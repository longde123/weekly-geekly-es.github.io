<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç° üëÖ ü•ü Perhitungan Rasio Negara UEFA ‚ö™Ô∏è üññ üöµüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ada dua turnamen populer dalam sepakbola: Liga Champions dan Liga Eropa. Berdasarkan hasil mereka, yang disebut Rating Asosiasi Sepakbola dihitung. Be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Perhitungan Rasio Negara UEFA</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lsfusion/blog/467279/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/jo/ja/xr/jojaxrvo8padbcbvfqrdsouex_e.jpeg" alt="gambar"></div><br>  Ada dua turnamen populer dalam sepakbola: Liga Champions dan Liga Eropa.  Berdasarkan hasil mereka, yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Rating Asosiasi Sepakbola</a> dihitung.  Berdasarkan peringkat ini, selanjutnya ditentukan berapa banyak tim dari masing-masing negara akan berpartisipasi dalam turnamen berikutnya. <br><br>  Pada artikel ini, saya akan membuat aplikasi berdasarkan platform <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lsFusion</a> terbuka dan gratis yang akan menghitung peringkat ini.  Ini akan menyimpan semua datanya dalam PostgreSQL, menyediakan antarmuka web untuk mengubah dan menampilkannya dengan kemampuan penyaringan dan pengurutan, serta mengimpor hasil pertandingan menggunakan API khusus. <br><br>  Semua kode untuk mengimplementasikan aplikasi ini akan terdiri dari sekitar 300 baris signifikan. <br><a name="habracut"></a><br><h3>  Logika domain </h3><br>  Pembuatan sistem informasi apa pun dimulai dengan tugas logika domain. <br>  Pertama-tama, adalah logis untuk memilih direktori paling sederhana yang hanya memiliki kode dan nama: <br><br><ul><li>  <b>Turnamen</b>  Liga Champions atau Liga Eropa. </li><li>  <b>Musim</b>  2018-2019 / 2017-2018 dll. </li><li> <b>Bulat</b> .  Final, Semifinal, Babak Grup, dll.  Ini dapat dianggap sebagai komposisi untuk turnamen, tetapi dalam implementasi ini saya memilihnya sebagai entitas yang terpisah. </li><li>  <b>Negara</b>  Aplikasi ini digunakan sebagai Asosiasi Sepak Bola.  Misalnya, klub Monako terletak di negara Monako, tetapi bermain di kejuaraan Prancis. </li><li>  <b>Klub</b>  Barcelona, ‚Äã‚ÄãReal Madrid, Manchester United, dll. </li></ul><br>  Karena lsFusion menggunakan tipe logika yang sama untuk mendeklarasikannya, kami akan mendeklarasikan metacode (atau templat kode) yang akan menghasilkan logika yang sesuai: <br><br><div class="spoiler">  <b class="spoiler_title">Direktori Deklarasi Direktori</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td><code><font color="#a626a4">META</font> defineMasterObject(object, caption, captions, nameLength) <br> <font color="#a626a4">CLASS</font> <font color="#4078f2">###</font> object caption; <br> <br> id <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">INTEGER</font> ( <font color="#4078f2">###</font> object); <br> object ( <font color="#a626a4">INTEGER</font> id) = <font color="#a626a4">GROUP</font> <font color="#a626a4">AGGR</font> <font color="#4078f2">###</font> object o <font color="#a626a4">BY</font> id(o); <font color="#808080"><i>//    </i></font> <br> <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> ( <font color="#4078f2">###</font> object) <font color="#a626a4">CHARWIDTH</font> nameLength; <br> object ( <font color="#a626a4">ISTRING</font> name) = <font color="#a626a4">GROUP</font> <font color="#a626a4">AGGR</font> <font color="#4078f2">###</font> object o <font color="#a626a4">BY</font> name(o); <font color="#808080"><i>//    </i></font> <br> <br> <font color="#a626a4">FORM</font> object caption <br> <font color="#a626a4">OBJECTS</font> o = <font color="#4078f2">###</font> object <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (o) id, name <br> <br> <font color="#a626a4">EDIT</font> <font color="#4078f2">###</font> object <font color="#a626a4">OBJECT</font> o <br> ; <br> <br> <font color="#a626a4">FORM</font> object <font color="#4078f2">##</font> s captions <br> <font color="#a626a4">OBJECTS</font> o = <font color="#4078f2">###</font> object <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">READONLY</font> id, name <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> ; <br> <br> <font color="#a626a4">FORM</font> dialog <font color="#4078f2">###</font> object <font color="#4078f2">##</font> s captions <br> <font color="#a626a4">OBJECTS</font> o = <font color="#4078f2">###</font> object <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">READONLY</font> id, name <br> <br> <font color="#a626a4">LIST</font> <font color="#4078f2">###</font> object <font color="#a626a4">OBJECT</font> o <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> object <font color="#4078f2">##</font> s; <br> } <br> <font color="#a626a4">END</font> <br></code> </td></tr></tbody></table></div><br></div></div><br>  Dia akan mengumumkan: <br><br><ul><li>  Kelas dengan nama yang diberikan </li><li>  Properti dengan kode dan nama untuk kelas baru </li><li>  Tiga bentuk: mengedit objek, formulir dengan daftar semua objek, yang kemudian ditambahkan ke navigator, dialog untuk memilih objek ini.  Sebagai dialog, Anda bisa menggunakan formulir kedua, tetapi kemudian pengguna akan memiliki kesempatan untuk mengubah objek saat memilih, yang dapat menyebabkan kesalahan pada bagian pengguna. </li></ul><br>  Empat parameter dilewatkan ke metacode: <br><br><ul><li>  <b>Identifier (objek)</b> .  Dengan nama ini, kelas dan formulir akan dibuat.  Konstruk ### digunakan untuk membuat huruf pertama dari pengenal ditulis dalam kode yang dihasilkan. </li><li>  <b>Nama dalam bentuk tunggal</b> .  Digunakan untuk judul kelas dan formulir. </li><li>  <b>Namanya dalam bentuk jamak</b> .  Digunakan untuk kotak kombo dan dialog. </li><li>  <b>Panjang Nama</b> .  Dalam nama-nama objek yang berbeda, panjang yang berbeda diharapkan, yang penting ketika membangun antarmuka. </li></ul><br>  Menggunakan metacode yang dibuat, tambahkan lima entitas yang dijelaskan di atas: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#4078f2">@defineMasterObject</font> (tournament, <font color="#50a14f">''</font> , <font color="#50a14f">''</font> , <font color="#986801">20</font> ); <br> <font color="#4078f2">@defineMasterObject</font> (season, <font color="#50a14f">''</font> , <font color="#50a14f">''</font> , <font color="#986801">5</font> ); <br> <font color="#4078f2">@defineMasterObject</font> (round, <font color="#50a14f">''</font> , <font color="#50a14f">''</font> , <font color="#986801">15</font> ); <br> <font color="#4078f2">@defineMasterObject</font> (country, <font color="#50a14f">''</font> , <font color="#50a14f">''</font> , <font color="#986801">10</font> ); <br> <font color="#4078f2">@defineMasterObject</font> (team, <font color="#50a14f">''</font> , <font color="#50a14f">''</font> , <font color="#986801">20</font> ); <br></code> </td></tr></tbody></table></div><br><br>  Kode yang dihasilkan, misalnya, untuk turnamen akan terlihat seperti ini: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">CLASS</font> Tournament <font color="#50a14f">''</font> ; <br> <br> id <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">INTEGER</font> (Tournament); <br> tournament ( <font color="#a626a4">INTEGER</font> id) = <font color="#a626a4">GROUP</font> <font color="#a626a4">AGGR</font> Tournament o <font color="#a626a4">BY</font> id(o); <br> <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> (Tournament) <font color="#a626a4">CHARWIDTH</font> <font color="#986801">20</font> ; <br> tournament ( <font color="#a626a4">ISTRING</font> name) = <font color="#a626a4">GROUP</font> <font color="#a626a4">AGGR</font> Tournament o <font color="#a626a4">BY</font> name(o); <br> <br> <font color="#a626a4">FORM</font> tournament <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> o = Tournament <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (o) id, name <br> <br> <font color="#a626a4">EDIT</font> Tournament <font color="#a626a4">OBJECT</font> o <br> ; <br> <br> <font color="#a626a4">FORM</font> tournaments <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> o = Tournament <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">READONLY</font> id, name <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> ; <br> <br> <font color="#a626a4">FORM</font> dialogTournaments <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> o = Tournament <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">READONLY</font> id, name <br> <br> <font color="#a626a4">LIST</font> Tournament <font color="#a626a4">OBJECT</font> o <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> tournaments; <br> } <br></code> </td></tr></tbody></table></div><br>  Tambahkan tautan ke negara ke logika klub yang dibuat.  Untuk melakukan ini, pertama-tama buat properti yang sesuai, yang kemudian menempatkannya pada bentuk pengeditan dan melihat klub: <br><div class="scrollable-table"><table><tbody><tr><td> <code>country = <font color="#a626a4">DATA</font> Country (Team); <br> nameCountry <font color="#50a14f">''</font> (Team t) = name(country(t)); <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> team <font color="#a626a4">PROPERTIES</font> (o) nameCountry; <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> teams <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">READONLY</font> nameCountry; <br></code> </td></tr></tbody></table></div><br>  Kami menempatkan semua logika yang dibuat dalam modul Master terpisah (file Master.lsf). <br><br>  Sekarang buat <i>Liga</i> entitas.  Dia akan menentukan turnamen musim tertentu.  Misalnya, Liga Champions 2017-18 atau Liga Eropa 2018-19.  Liga tidak akan memiliki nama, tetapi hanya tautan ke turnamen dan musim.  Oleh karena itu, kami tidak akan menggunakan metacode sebelumnya, tetapi kami akan melakukan logika yang sama dan memasukkannya ke modul Liga baru: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">MODULE</font> League; <br> <br> <font color="#a626a4">REQUIRE</font> Master; <br> <br> <font color="#a626a4">CLASS</font> League <font color="#50a14f">''</font> ; <br> <br> id <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">INTEGER</font> (League); <br> league ( <font color="#a626a4">INTEGER</font> id) = <font color="#a626a4">GROUP</font> <font color="#a626a4">AGGR</font> League o <font color="#a626a4">BY</font> id(o); <br> <br> tournament = <font color="#a626a4">DATA</font> Tournament (League); <br> nameTournament <font color="#50a14f">''</font> (League l)= name(tournament(l)); <br> <br> season = <font color="#a626a4">DATA</font> Season(League); <br> nameSeason <font color="#50a14f">''</font> (League l)= name(season(l)); <br> <br> <font color="#a626a4">FORM</font> league <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> o = League <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (o) id, nameTournament, nameSeason <br> <br> <font color="#a626a4">EDIT</font> League <font color="#a626a4">OBJECT</font> o <br> ; <br> <br> <font color="#a626a4">FORM</font> leagues <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> o = League <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">READONLY</font> id, nameTournament, nameSeason <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> ; <br> <br> <font color="#a626a4">FORM</font> dialogLeagues <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> o = League <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">READONLY</font> id, nameTournament, nameSeason <br> <br> <font color="#a626a4">LIST</font> League <font color="#a626a4">OBJECT</font> o <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> leagues; <br> } <br></code> </td></tr></tbody></table></div><br>  Dan akhirnya, tambahkan logika pertandingan.  Untuk melakukan ini, buat <i>Pertandingan</i> kelas, yang akan merujuk ke liga dan babak.  Baginya, klub-klub yang berpartisipasi di dalamnya, dan hasilnya juga akan ditanyakan.  Kami menempatkan semua ini dalam modul Match yang terpisah: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">MODULE</font> Match; <br> <br> <font color="#a626a4">REQUIRE</font> League; <br> <br> <font color="#a626a4">CLASS</font> Match <font color="#50a14f">''</font> ; <br> <br> id <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">INTEGER</font> (Match); <br> match ( <font color="#a626a4">INTEGER</font> id) = <font color="#a626a4">GROUP</font> <font color="#a626a4">AGGR</font> Match o <font color="#a626a4">BY</font> id(o); <br> <br> dateTime <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATETIME</font> (Match); <br> <br> league = <font color="#a626a4">DATA</font> League (Match); <br> <br> tournament (Match m) = tournament(league(m)); <br> nameTournament <font color="#50a14f">''</font> (Match m) = name(tournament(m)); <br> <br> season(Match m) = season(league(m)); <br> nameSeason <font color="#50a14f">''</font> (Match m) = name(season(m)); <br> <br> round = <font color="#a626a4">DATA</font> Round (Match); <br> nameRound <font color="#50a14f">''</font> (Match m) = name(round(m)); <br> <br> homeTeam = <font color="#a626a4">DATA</font> Team (Match); <br> nameHomeTeam <font color="#50a14f">''</font> (Match m) = name(homeTeam(m)); <br> <br> awayTeam = <font color="#a626a4">DATA</font> Team (Match); <br> nameAwayTeam <font color="#50a14f">''</font> (Match m) = name(awayTeam(m)); <br> <br> goalsHome <font color="#50a14f">' ()'</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">INTEGER</font> (Match); <br> goalsAway <font color="#50a14f">' ()'</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">INTEGER</font> (Match); <br> <br> <font color="#a626a4">FORM</font> match <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> o = Match <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (o) id, dateTime, nameTournament, nameSeason, nameRound, <br> nameHomeTeam, goalsHome, goalsAway, nameAwayTeam <br> <br> <font color="#a626a4">EDIT</font> Match <font color="#a626a4">OBJECT</font> o <br> ; <br> <br> <font color="#a626a4">FORM</font> matches <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> o = Match <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">READONLY</font> id, dateTime, nameTournament, nameSeason, nameRound, <br> nameHomeTeam, goalsHome, goalsAway, nameAwayTeam <br> <font color="#a626a4">PROPERTIES</font> (o) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Match <font color="#a626a4">OBJECT</font> o <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> matches; <br> } <br></code> </td></tr></tbody></table></div><br><br><h3>  Impor data </h3><br>  Sayangnya, saya berhasil menemukan hanya satu API publik dan gratis yang mendukung semua Eurocups.  Ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">API Sepak Bola</a> .  Namun, ada masalah: <br><br><ul><li>  Tidak ada hasil hingga 2016. </li><li>  Tidak ada kualifikasi untuk Liga Europa hingga 2018. </li><li>  Ada kesalahan tertentu dalam data.  Misalnya, Irtysh Pavlodar ditugaskan ke Rusia, meskipun klub ini mewakili Kazakhstan.  Juga, Europa Fc karena alasan tertentu merujuk ke Spanyol, bukan Gibraltar. </li></ul><br><br>  Kesalahan data dapat diperbaiki secara manual menggunakan formulir yang dibuat sebelumnya.  Namun, karena perhitungan koefisien total didasarkan pada lima tahun terakhir, sayangnya, itu tidak akan berfungsi untuk menghitung koefisien total dari data Football API.  Jika seseorang di komentar menyarankan di mana mendapatkan data yang diperlukan dalam format apa pun dari tahun-tahun sebelumnya, saya akan sangat berterima kasih.  Tetapi, karena ada data lengkap untuk 2018, akan mungkin untuk memverifikasi kebenaran perhitungan untuk setidaknya tahun ini. <br><br>  API yang kami butuhkan diimplementasikan dalam bentuk permintaan HTTP, di mana parameter dikirimkan melalui url, dan kunci akses khusus ditunjukkan di header.  Nyatakan logika yang sesuai: <br><div class="scrollable-table"><table><tbody><tr><td> <code>host = <font color="#50a14f">'api-football-v1.p.rapidapi.com'</font> ; <br> key <font color="#50a14f">'  API Football'</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">STRING</font> () <font color="#a626a4">CHARWIDTH</font> <font color="#986801">50</font> ; <br> <br> url = <font color="#50a14f">'https://'</font> + host() + <font color="#50a14f">'/v2'</font> ; <br> <br> headers( <font color="#a626a4">TEXT</font> name) = <font color="#a626a4">CASE</font> <br> <font color="#a626a4">WHEN</font> name = <font color="#50a14f">'x-rapidapi-host'</font> <font color="#a626a4">THEN</font> host() <br> <font color="#a626a4">WHEN</font> name = <font color="#50a14f">'x-rapidapi-key'</font> <font color="#a626a4">THEN</font> key(); <br></code> </td></tr></tbody></table></div><br>  Semua tindakan impor data akan ditempatkan pada formulir <i>liga yang</i> dibuat sebelumnya.  Di sana kita akan menempatkan kunci akses di bilah alat tabel dengan daftar liga: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> leagues <br> <font color="#a626a4">PROPERTIES</font> () key <font color="#a626a4">DRAW</font> o <font color="#a626a4">TOOLBAR</font> <br> ; <br></code> </td></tr></tbody></table></div><br><br>  Pertama, kami menerapkan daftar liga.  Untuk ini, API Sepakbola memiliki url khusus: / liga.  Permintaan GET untuk itu mengembalikan JSON dari formulir: <br><br><div class="spoiler">  <b class="spoiler_title">Jawabannya</b> <div class="spoiler_text"><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"api"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"results"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"leagues"</span></span>:[ { <span class="hljs-attr"><span class="hljs-attr">"league_id"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"2018 Russia World Cup"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"country"</span></span>:<span class="hljs-string"><span class="hljs-string">"World"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"country_code"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"season"</span></span>:<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-attr"><span class="hljs-attr">"season_start"</span></span>:<span class="hljs-string"><span class="hljs-string">"2018-06-14"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"season_end"</span></span>:<span class="hljs-string"><span class="hljs-string">"2018-07-15"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"logo"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://www.api-football.com/public/leagues/1.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"flag"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"standings"</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"is_current"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"league_id"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Premier League"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"country"</span></span>:<span class="hljs-string"><span class="hljs-string">"England"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"country_code"</span></span>:<span class="hljs-string"><span class="hljs-string">"GB"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"season"</span></span>:<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-attr"><span class="hljs-attr">"season_start"</span></span>:<span class="hljs-string"><span class="hljs-string">"2018-08-10"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"season_end"</span></span>:<span class="hljs-string"><span class="hljs-string">"2019-05-12"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"logo"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://www.api-football.com/public/leagues/2.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"flag"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://www.api-football.com/public/flags/gb.svg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"standings"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"is_current"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> } ] } }</code> </pre> </div></div><br><br>  Untuk menghasilkan permintaan GET dan mencatat badan respons, konstruksi berikut digunakan: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">LOCAL</font> result = <font color="#a626a4">FILE</font> (); <br> <font color="#a626a4">EXTERNAL</font> <font color="#a626a4">HTTP</font> <font color="#a626a4">GET</font> url() + <font color="#50a14f">'/leagues'</font> <font color="#a626a4">HEADERS</font> headers <font color="#a626a4">TO</font> result; <br></code> </td></tr></tbody></table></div><br>  Itu menulis hasilnya ke properti <i>hasil</i> lokal tanpa parameter tipe FILE. <br><br>  Untuk mem-parsing file dalam format JSON, formulir dibuat yang strukturnya sesuai dengan struktur JSON.  Anda dapat membuatnya di IDE menggunakan item menu: <br><br><img src="https://habrastorage.org/webt/wx/zf/8o/wxzf8oy-hnpcpdffxhltnfrrwcy.png" alt="gambar"><br><br>  Untuk JSON di atas, formulir akan terlihat seperti ini (dengan hanya memperhitungkan nilai-nilai yang akan diimpor): <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">GROUP</font> api; <br> <br> tournamentName = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">STRING</font> ( <font color="#a626a4">INTEGER</font> ); <br> seasonName = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">STRING</font> ( <font color="#a626a4">INTEGER</font> ); <br> leagueId = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">INTEGER</font> ( <font color="#a626a4">INTEGER</font> ); <br> <br> <font color="#a626a4">FORM</font> importLeagues <br> <font color="#a626a4">OBJECTS</font> leagues = <font color="#a626a4">INTEGER</font> <font color="#a626a4">IN</font> api <br> <font color="#a626a4">PROPERTIES</font> (leagues) name = tournamentName, season = seasonName, league_id = leagueId <br> ; <br></code> </td></tr></tbody></table></div><br>  Untuk langsung mengimpor dari properti <i>hasil</i> JSON dalam format formulir <i>importLeagues,</i> gunakan perintah berikut: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">IMPORT</font> importLeagues <font color="#a626a4">JSON</font> <font color="#a626a4">FROM</font> result(); <br></code> </td></tr></tbody></table></div><br>  Setelah dieksekusi, nilai-nilai yang sesuai dari file JSON akan ditempatkan di <i>turnamenName</i> , <i>musimName</i> dan properti <i>ligaId</i> : <br><br><img src="https://habrastorage.org/webt/vg/va/sq/vgvasqm0awmpbqdweoumd2ha8ty.png" alt="gambar"><br><br>  Artinya, nilai untuk <i>turnamenName (0)</i> akan menjadi "Piala Dunia", dan di <i>turnamenName (1) itu akan</i> menjadi "Liga Premier". <br><br>  Sayangnya, API Football tidak memiliki entitas turnamen sama sekali.  Satu-satunya cara untuk menghubungkan semua liga adalah memiliki nama yang cocok dengan liga-liga turnamen yang sama dari musim yang berbeda.  Untuk melakukan ini, dalam impor, pertama-tama kita mengelompokkan semua nama liga yang diimpor dan, jika tidak dalam database, membuat turnamen baru: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">FOR</font> [ <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> <font color="#986801">1</font> <font color="#a626a4">BY</font> tournamentName( <font color="#a626a4">INTEGER</font> i)]( <font color="#a626a4">STRING</font> tn) <font color="#a626a4">AND</font> <font color="#a626a4">NOT</font> tournament(tn) <font color="#a626a4">DO</font> <font color="#a626a4">NEW</font> t = Tournament { <br> name(t) &lt;- tn; <br> } <br></code> </td></tr></tbody></table></div><br>  Juga tidak ada kode untuk musim, jadi ketika mengimpor liga, mereka dibuat dengan cara yang sama.  Setelah objek yang hilang dibuat, liga diimpor secara langsung.  Turnamen dan musim dicari berdasarkan nama menggunakan properti yang dibangun sebelumnya melalui <i>GROUP AGGR</i> : <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">FOR</font> leagueId( <font color="#a626a4">INTEGER</font> i) <font color="#a626a4">AND</font> <font color="#a626a4">NOT</font> league(leagueId(i)) <font color="#a626a4">DO</font> <font color="#a626a4">NEW</font> l = League { <br> id(l) &lt;- leagueId(i); <br> tournament(l) &lt;- tournament(tournamentName(i)); <br> season(l) &lt;- season(seasonName(i)); <br> } <br></code> </td></tr></tbody></table></div><br>  Secara default, data akan dimuat, tetapi hanya akan disimpan ke database ketika pengguna mengklik tombol Simpan di formulir.  Jika perlu, Anda dapat menambahkan perintah <i>BERLAKU</i> di akhir tindakan sehingga segera disimpan ke database tanpa pratinjau. <br><br>  Dan akhirnya, tambahkan aksi impor ke formulir daftar liga: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> leagues <br> <font color="#a626a4">PROPERTIES</font> () importLeagues <font color="#a626a4">DRAW</font> o <font color="#a626a4">TOOLBAR</font> <br> ; <br></code> </td></tr></tbody></table></div><br>  Demikian pula, kami mengimpor klub dan pertandingan.  Namun, karena API menyediakan kemampuan untuk mengimpornya hanya untuk liga tertentu, tindakan tersebut harus menggunakan liga sebagai input: <br><br><div class="spoiler">  <b class="spoiler_title">Impor klub dan pertandingan</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#808080"><i>//  </i></font> <br> teamId = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">INTEGER</font> ( <font color="#a626a4">INTEGER</font> ); <br> teamName = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">STRING</font> ( <font color="#a626a4">INTEGER</font> ); <br> countryName = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">STRING</font> ( <font color="#a626a4">INTEGER</font> ); <br> <br> <font color="#a626a4">FORM</font> importTeams <br> <font color="#a626a4">OBJECTS</font> teams = <font color="#a626a4">INTEGER</font> <font color="#a626a4">IN</font> api <br> <font color="#a626a4">PROPERTIES</font> (teams) team_id = teamId, name = teamName, country = countryName <br> ; <br> <br> importTeams <font color="#50a14f">' '</font> (League l) { <br> <font color="#a626a4">LOCAL</font> result = <font color="#a626a4">FILE</font> (); <br> <font color="#a626a4">EXTERNAL</font> <font color="#a626a4">HTTP</font> <font color="#a626a4">GET</font> url() + <font color="#50a14f">'/teams/league/'</font> + id(l) <font color="#a626a4">HEADERS</font> headers <font color="#a626a4">TO</font> result; <br> <br> <font color="#a626a4">IMPORT</font> importTeams <font color="#a626a4">JSON</font> <font color="#a626a4">FROM</font> result(); <br> <font color="#a626a4">FOR</font> [ <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> <font color="#986801">1</font> <font color="#a626a4">BY</font> countryName( <font color="#a626a4">INTEGER</font> i)]( <font color="#a626a4">STRING</font> cn) <font color="#a626a4">AND</font> <font color="#a626a4">NOT</font> country(cn) <font color="#a626a4">DO</font> <font color="#a626a4">NEW</font> c = Country { <br> name(c) &lt;- cn; <br> } <br> <br> <font color="#a626a4">FOR</font> teamId( <font color="#a626a4">INTEGER</font> i) <font color="#a626a4">AND</font> <font color="#a626a4">NOT</font> team(teamId(i)) <font color="#a626a4">DO</font> <font color="#a626a4">NEW</font> t = Team { <br> id(t) &lt;- teamId(i); <br> name(t) &lt;- teamName(i); <br> country(t) &lt;- country(countryName(i)); <br> } <br> } <br> <br> <font color="#808080"><i>//  </i></font> <br> <br> matchId = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">INTEGER</font> ( <font color="#a626a4">INTEGER</font> ); <br> dateTime = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">STRING</font> ( <font color="#a626a4">INTEGER</font> ); <br> roundName = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">STRING</font> ( <font color="#a626a4">INTEGER</font> ); <br> <br> <font color="#a626a4">GROUP</font> homeTeam; <br> homeTeamId = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">INTEGER</font> ( <font color="#a626a4">INTEGER</font> ); <br> <br> <font color="#a626a4">GROUP</font> awayTeam; <br> awayTeamId = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">INTEGER</font> ( <font color="#a626a4">INTEGER</font> ); <br> <br> goalsHome = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">INTEGER</font> ( <font color="#a626a4">INTEGER</font> ); <br> goalsAway = <font color="#a626a4">DATA</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">INTEGER</font> ( <font color="#a626a4">INTEGER</font> ); <br> <br> <font color="#a626a4">FORM</font> importMatches <br> <font color="#a626a4">OBJECTS</font> fixtures = <font color="#a626a4">INTEGER</font> <font color="#a626a4">IN</font> api <br> <font color="#a626a4">PROPERTIES</font> (fixtures) fixture_id = matchId, league_id = leagueId, event_date = dateTime, round = roundName, <br> homeTeamId <font color="#a626a4">IN</font> homeTeam <font color="#a626a4">EXTID</font> <font color="#50a14f">'team_id'</font> , <br> awayTeamId <font color="#a626a4">IN</font> awayTeam <font color="#a626a4">EXTID</font> <font color="#50a14f">'team_id'</font> , <br> goalsHomeTeam = goalsHome, goalsAwayTeam = goalsAway <br> ; <br> <br> importMatches <font color="#50a14f">' '</font> (League l) { <br> <font color="#a626a4">LOCAL</font> result = <font color="#a626a4">FILE</font> (); <br> <font color="#a626a4">EXTERNAL</font> <font color="#a626a4">HTTP</font> <font color="#a626a4">GET</font> url() + <font color="#50a14f">'/fixtures/league/'</font> + id(l) <font color="#a626a4">HEADERS</font> headers <font color="#a626a4">TO</font> result; <br> <br> <font color="#a626a4">IMPORT</font> importMatches <font color="#a626a4">JSON</font> <font color="#a626a4">FROM</font> result(); <br> <font color="#a626a4">FOR</font> [ <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> <font color="#986801">1</font> <font color="#a626a4">BY</font> awayTeamId( <font color="#a626a4">INTEGER</font> i)]( <font color="#a626a4">INTEGER</font> id) <font color="#a626a4">AND</font> <font color="#a626a4">NOT</font> team(id) <font color="#a626a4">DO</font> { <br> <font color="#a626a4">MESSAGE</font> <font color="#50a14f">'      '</font> + id; <br> <font color="#a626a4">RETURN</font> ; <br> } <br> <br> <font color="#a626a4">FOR</font> [ <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> <font color="#986801">1</font> <font color="#a626a4">BY</font> awayTeamId( <font color="#a626a4">INTEGER</font> i)]( <font color="#a626a4">INTEGER</font> id) <font color="#a626a4">AND</font> <font color="#a626a4">NOT</font> team(id) <font color="#a626a4">DO</font> { <br> <font color="#a626a4">MESSAGE</font> <font color="#50a14f">'      '</font> + id; <br> <font color="#a626a4">RETURN</font> ; <br> } <br> <br> <font color="#a626a4">FOR</font> [ <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> <font color="#986801">1</font> <font color="#a626a4">BY</font> roundName( <font color="#a626a4">INTEGER</font> i)]( <font color="#a626a4">STRING</font> rn) <font color="#a626a4">AND</font> <font color="#a626a4">NOT</font> round(rn) <font color="#a626a4">DO</font> <font color="#a626a4">NEW</font> r = Round { <br> name(r) &lt;- rn; <br> } <br> <br> <font color="#a626a4">FOR</font> matchId( <font color="#a626a4">INTEGER</font> i) <font color="#a626a4">AND</font> <font color="#a626a4">NOT</font> match(matchId(i)) <font color="#a626a4">DO</font> <font color="#a626a4">NEW</font> m = Match { <br> id(m) &lt;- matchId(i); <br> dateTime(m) &lt;- toDateTimeFormat(left(dateTime(i), <font color="#986801">19</font> ), <font color="#50a14f">'yyyy-MM-ddThh24:mi:ss'</font> ); <br> league(m) &lt;- league(leagueId(i)); <br> round(m) &lt;- round(roundName(i)); <br> homeTeam(m) &lt;- team(homeTeamId(i)); <br> awayTeam(m) &lt;- team(awayTeamId(i)); <br> goalsHome(m) &lt;- goalsHome(i); <br> goalsAway(m) &lt;- goalsAway(i); <br> } <br> } <br></code> </td></tr></tbody></table></div><br>  Ada kekhasan untuk pertandingan: kode tim masuk ke dalam <i>tag homeTeam</i> dan <i>awayTeam</i> tambahan.  Grup yang sesuai dibuat untuk mereka dengan analogi dengan api.  Selain itu, di dalamnya mereka memiliki tag <i>team_id yang</i> sama.  Karena properti dengan nama yang sama tidak dapat ditambahkan ke formulir, kata kunci <i>EXTID</i> khusus <i>digunakan</i> , yang menentukan nama tag di JSON yang diimpor. <br><br>  Agar semua impor berada pada formulir yang sama, dan karena mereka terkait dengan liga, kami membawanya semuanya ke bentuk yang sama.  Selain itu, kami menambahkan tim dan pertandingan ke formulir agar dapat melihat apa yang diimpor sebelum menyimpan: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> leagues <br> <font color="#a626a4">OBJECTS</font> t = Team <br> <font color="#a626a4">PROPERTIES</font> (t) <font color="#a626a4">READONLY</font> id, name <br> <br> <font color="#a626a4">PROPERTIES</font> importTeams(o) <font color="#a626a4">DRAW</font> t <font color="#a626a4">TOOLBAR</font> <br> <br> <font color="#a626a4">OBJECTS</font> m = Match <br> <font color="#a626a4">PROPERTIES</font> (m) <font color="#a626a4">READONLY</font> id, dateTime, nameRound, nameHomeTeam, goalsHome, goalsAway, nameAwayTeam <br> <font color="#a626a4">FILTERS</font> league(m) = o <br> <br> <font color="#a626a4">PROPERTIES</font> importMatches(o) <font color="#a626a4">DRAW</font> m <font color="#a626a4">TOOLBAR</font> <br> ; <br> <br> <font color="#a626a4">DESIGN</font> leagues { <br> <font color="#a626a4">OBJECTS</font> { <br> <font color="#a626a4">NEW</font> leagueDetails { <br> fill = <font color="#986801">2</font> ; <br> type = <font color="#a626a4">SPLITH</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (t); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (m); <br> } <br> } <br> } <br></code> </td></tr></tbody></table></div></div></div><br><br>  Bentuk yang dihasilkan akan terlihat seperti ini: <br><img src="https://habrastorage.org/webt/is/ot/y6/isoty6b7twgeg3zssi-8tdxkyv4.gif" alt="gambar"><br><br>  Semua impor akan dimasukkan ke dalam modul APIFootball terpisah. <br><br><h3>  Perhitungan koefisien </h3><br>  Kami melanjutkan langsung ke perhitungan koefisien negara UEFA.  Adalah logis untuk meletakkan semua kode dalam modul UEFA yang dipasang khusus untuk ini. <br><br>  Pertama, perlu diingat bahwa API Sepak Bola menyediakan antarmuka untuk mengimpor semua pertandingan, dan bukan hanya Eurocups.  Oleh karena itu, kami memisahkan pertandingan Eurocup sesuai dengan nama turnamen (lebih tepat memiliki properti utama terpisah untuk ini, tetapi penerapan properti selalu dapat diubah tanpa mengubah sisa logika): <br><div class="scrollable-table"><table><tbody><tr><td> <code>isCL (Tournament t) = name(t) = <font color="#50a14f">'Champions League'</font> ; <br> isEL (Tournament t) = name(t) = <font color="#50a14f">'Europa League'</font> ; <br> <br> isUL (Tournament t) = isCL(t) <font color="#a626a4">OR</font> isEL(t); <br> isUL (Match m) = isUL(tournament(m)); <br></code> </td></tr></tbody></table></div><br>  Pertama, mari kita hitung poin yang diterima setiap klub dalam satu musim untuk hasil pertandingan tertentu. <br><blockquote>  Selama periode ini, setiap tim menerima: <br>  2 poin jika menang; <br>  1 poin untuk dasi. <br>  Sejak 1999, poin-poin ini dibagi menjadi dua jika diperoleh di babak kualifikasi, yaitu: <br>  1 poin jika menang; <br>  0,5 poin untuk seri. <br></blockquote><br><br>  Buat properti tambahan yang menentukan hubungan antara pertandingan dan klub: <br><div class="scrollable-table"><table><tbody><tr><td> <code>played (Team t, Match m) = homeTeam(m) = t <font color="#a626a4">OR</font> awayTeam(m) = t; <br> won (Team t, Match m) = (homeTeam(m) = t <font color="#a626a4">AND</font> goalsHome(m) &gt; goalsAway(m)) <font color="#a626a4">OR</font> (awayTeam(m) = t <font color="#a626a4">AND</font> goalsHome(m) &lt; goalsAway(m)); <br> draw (Team t, Match m) = played(t, m) <font color="#a626a4">AND</font> goalsHome(m) = goalsAway(m); <br></code> </td></tr></tbody></table></div><br>  Untuk menentukan berapa banyak poin yang dicetak di setiap pertandingan, kami menambahkan properti utama dari tipe numerik untuk putaran, yang secara default akan sama dengan satu: <br><div class="scrollable-table"><table><tbody><tr><td> <code>dataMatchCoeff = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">10</font> , <font color="#986801">1</font> ] (Round); <br> matchCoeff <font color="#50a14f">' '</font> (Round r) = <font color="#a626a4">OVERRIDE</font> dataMatchCoeff(r), <font color="#986801">1.0</font> ; <br></code> </td></tr></tbody></table></div><br>  Lalu kami menghitung poin untuk kemenangan dan hasil imbang dan menambahkan bersama-sama: <br><div class="scrollable-table"><table><tbody><tr><td> <code>wonPoints <font color="#50a14f">'  '</font> (Season s, Team t) = <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> <font color="#986801">2</font> * matchCoeff(round(Match m)) <font color="#a626a4">IF</font> won(t, m) <font color="#a626a4">AND</font> season(m) = s <font color="#a626a4">AND</font> isUL(m); <br> drawPoints <font color="#50a14f">'  '</font> (Season s, Team t) = <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> <font color="#986801">1</font> * matchCoeff(round(Match m)) <font color="#a626a4">IF</font> draw(t, m) <font color="#a626a4">AND</font> season(m) = s <font color="#a626a4">AND</font> isUL(m); <br> matchPoints <font color="#50a14f">'  '</font> (Season s, Team t) = wonPoints(s, t) (+) drawPoints(s, t) <font color="#a626a4">MATERIALIZED</font> ; <br></code> </td></tr></tbody></table></div><br>  Poin untuk pertandingan ditandai sebagai MATERIALISASI sehingga disimpan dalam tabel, dan tidak dihitung setiap waktu. <br><br>  Sekarang Anda perlu menghitung poin bonus: <br><blockquote>  Selain itu, poin bonus diberikan: <br>  1 poin diberikan jika tim mencapai perempat final, semifinal dan final di piala Eropa; <br>  4 poin untuk mencapai babak penyisihan grup Liga Champions (hingga 1996 - 2 poin, dari 1997 hingga 2003 - 1 poin, dari 2004 hingga 2008 - 3 poin); <br>  5 poin dalam hal tim berangkat ke 1/8 final Liga Champions (sebelum 2008 - 1 poin). <br>  Hanya pertandingan yang dimainkan yang diperhitungkan (kerugian teknis tidak diperhitungkan).  Pertandingan yang berakhir dengan serangkaian adu penalti, ketika menghitung koefisien dianggap sesuai dengan hasil, yang ditetapkan oleh hasil pertandingan dalam waktu reguler dan tambahan. <br></blockquote><br>  Dalam implementasi ini, kami menganggap bahwa klub pergi ke putaran turnamen jika ia bermain setidaknya satu pertandingan di dalamnya.  Untuk melakukan ini, kami menghitung berapa banyak pertandingan yang dimainkan klub di musim, turnamen, babak tertentu: <br><div class="scrollable-table"><table><tbody><tr><td> <code>played <font color="#50a14f">''</font> (Season s, Tournament t, Round r, Team tm) = <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> <font color="#986801">1</font> <font color="#a626a4">IF</font> played(tm, Match m) <font color="#a626a4">AND</font> round(m) = r <font color="#a626a4">AND</font> tournament(m) = t <font color="#a626a4">AND</font> season(m) = s; <br></code> </td></tr></tbody></table></div><br><br>  Sekarang Anda perlu menentukan berapa banyak poin untuk mencetak bagian dalam babak tertentu.  Karena itu tergantung pada turnamen (misalnya, bagian di Liga Champions given diberikan 5 poin, tetapi tidak ada di Liga Eropa).  Untuk melakukan ini, kami memperkenalkan properti utama: <br><div class="scrollable-table"><table><tbody><tr><td> <code>bonusPoints <font color="#50a14f">'  '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">10</font> , <font color="#986801">1</font> ] (Tournament, Round); <br></code> </td></tr></tbody></table></div><br>  Sekarang mari kita menghitung poin bonus dan jumlah total poin untuk klub untuk musim ini: <br><div class="scrollable-table"><table><tbody><tr><td> <code>bonusPoints <font color="#50a14f">' '</font> (Season s, Team tm) = <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> bonusPoints(Tournament t, Round r) <font color="#a626a4">IF</font> played(s, t, r, tm) <font color="#a626a4">MATERIALIZED</font> ; <br> <br> points <font color="#50a14f">''</font> (Season s, Team tm) = matchPoints(s, tm) (+) bonusPoints(s, tm); <br></code> </td></tr></tbody></table></div><br>  Akhirnya, kita langsung menuju koefisien negara. <br><blockquote>  Untuk menghitung peringkat asosiasi, semua poin yang dicetak oleh klub yang berpartisipasi di Liga Champions dan Liga Eropa ditambahkan, dan hasilnya dibagi dengan jumlah klub dari asosiasi ini [2] [3]. <br></blockquote><br>  Mari kita hitung jumlah klub untuk setiap asosiasi yang berpartisipasi dalam kompetisi Eropa: <br><div class="scrollable-table"><table><tbody><tr><td> <code>matchesUL <font color="#50a14f">'  '</font> (Season s, Team t) = <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> <font color="#986801">1</font> <font color="#a626a4">IF</font> played(t, Match m) <font color="#a626a4">AND</font> season(m) = s <font color="#a626a4">AND</font> isUL(m); <br> teams <font color="#50a14f">''</font> (Season s, Country c) = <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> <font color="#986801">1</font> <font color="#a626a4">IF</font> matchesUL(s, Team t) <font color="#a626a4">AND</font> country(t) = c; <br></code> </td></tr></tbody></table></div><br>  Sekarang kami mempertimbangkan jumlah total poin asosiasi untuk musim ini dan dibagi dengan jumlah klub: <br><div class="scrollable-table"><table><tbody><tr><td> <code>totalPoints <font color="#50a14f">' ()'</font> (Season s, Country c) = <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> points(s, Team t) <font color="#a626a4">IF</font> country(t) = c; <br> points <font color="#50a14f">''</font> (Season s, Country c) = trunc( <font color="#a626a4">NUMERIC</font> [ <font color="#986801">13</font> , <font color="#986801">4</font> ](totalPoints(s, c)) / teams(s, c), <font color="#986801">3</font> ); <br></code> </td></tr></tbody></table></div><br><br><blockquote>  Peringkat suatu negara adalah jumlah dari koefisien negara untuk 5 tahun sebelumnya. <br></blockquote><br><br>  Untuk melakukan ini, kami menomori semua musim mulai dari yang terakhir dengan kode internal (kami menganggap bahwa yang terakhir ditambahkan kemudian dan memiliki kode yang lebih besar): <br><div class="scrollable-table"><table><tbody><tr><td> <code>index <font color="#50a14f">''</font> (Season s) = <font color="#a626a4">PARTITION</font> <font color="#a626a4">SUM</font> <font color="#986801">1</font> <font color="#a626a4">IF</font> s <font color="#a626a4">IS</font> Season <font color="#a626a4">ORDER</font> <font color="#a626a4">DESC</font> s; <br></code> </td></tr></tbody></table></div><br>  Jika perlu, Anda bisa memasukkan bidang atau nomor terpisah dengan nama. <br>  Tetap hanya untuk menghitung peringkat akhir untuk negara: <br><div class="scrollable-table"><table><tbody><tr><td> <code>rating <font color="#50a14f">''</font> (Country c) = <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> points(Season s, c) <font color="#a626a4">IF</font> index(s) &lt;= <font color="#986801">5</font> ; <br></code> </td></tr></tbody></table></div><br>  Di atas, kami mengumumkan peluang untuk turnamen dan putaran.  Tambahkan mereka ke formulir pengeditan turnamen, sambil memfilter hanya putaran yang ada di turnamen ini: <br><div class="scrollable-table"><table><tbody><tr><td> <code>matches (Tournament t, Round r) = <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> <font color="#986801">1</font> <font color="#a626a4">IF</font> tournament(Match m) = t <font color="#a626a4">AND</font> round(m) = r; <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> tournament <br> <font color="#a626a4">OBJECTS</font> r = Round <br> <font color="#a626a4">PROPERTIES</font> name(r) <font color="#a626a4">READONLY</font> , matchCoeff(r), bonusPoints(o, r) <br> <font color="#a626a4">FILTERS</font> matches(o, r) <br> ; <br></code> </td></tr></tbody></table></div><br><br>  Pengaturan Odds, misalnya, untuk Liga Champions yang perlu Anda atur seperti ini: <br><img src="https://habrastorage.org/webt/fi/yy/gl/fiyyglmdvm2zst_v58pebjpc3ai.png" alt="gambar"><br><br>  Mari kita menggambar formulir yang akan menampilkan peringkat, di mana tim akan ditampilkan untuk setiap negara, dan untuk setiap tim pertandingannya: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">FORM</font> countryCoefficientUEFA <font color="#50a14f">'  UEFA'</font> <br> <font color="#a626a4">OBJECTS</font> s = Season <br> <font color="#a626a4">FILTERS</font> index(s) &lt;= <font color="#986801">5</font> <br> <br> <font color="#a626a4">OBJECTS</font> c = Country <br> <font color="#a626a4">PROPERTIES</font> (c) <font color="#a626a4">READONLY</font> name, rating <br> <font color="#a626a4">PROPERTIES</font> (s, c) <font color="#a626a4">COLUMNS</font> (s) points <font color="#a626a4">HEADER</font> <font color="#50a14f">' : '</font> + name(s), teams <font color="#a626a4">HEADER</font> <font color="#50a14f">' : '</font> + name(s) <br> <br> <font color="#a626a4">OBJECTS</font> t = Team <br> <font color="#a626a4">PROPERTIES</font> (t) <font color="#a626a4">READONLY</font> nameCountry, name <br> <font color="#a626a4">PROPERTIES</font> (s,t) <font color="#a626a4">COLUMNS</font> (s) <font color="#a626a4">HEADER</font> name(s) points <font color="#a626a4">BACKGROUND</font> matchesUL(s, t) <br> <font color="#a626a4">FILTERGROUP</font> country <br> <font color="#a626a4">FILTER</font> <font color="#50a14f">' '</font> country(t) = c <font color="#a626a4">DEFAULT</font> <br> <br> <font color="#a626a4">OBJECTS</font> m = Match <br> <font color="#a626a4">PROPERTIES</font> (m) <font color="#a626a4">READONLY</font> dateTime, nameTournament, nameSeason, nameRound, <br> nameHomeTeam, <br> goalsHome <font color="#a626a4">BACKGROUND</font> goalsHome(m) &gt; goalsAway(m), <br> goalsAway <font color="#a626a4">BACKGROUND</font> goalsHome(m) &lt; goalsAway(m), <br> nameAwayTeam <br> <font color="#a626a4">FILTERS</font> played(t, m) <br> <font color="#a626a4">ORDER</font> dateTime(m) <font color="#a626a4">DESC</font> <br> ; <br> <br> <font color="#a626a4">DESIGN</font> countryCoefficientUEFA { <br> <font color="#a626a4">OBJECTS</font> { <br> <font color="#a626a4">NEW</font> countryDetails { <br> type = <font color="#a626a4">SPLITH</font> ; <br> fill = <font color="#986801">0.5</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (t); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (m); <br> } <br> } <br> <br> } <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> countryCoefficientUEFA; <br> } <br></code> </td></tr></tbody></table></div><br>  Bentuk yang dihasilkan akan terlihat seperti ini: <br><img src="https://habrastorage.org/webt/za/ps/ov/zapsovbiitv6s0ggc1i19l0kad0.gif" alt="gambar"><br>  Warna di tabel klub menunjukkan ketika ia mengambil bagian dalam musim, dan dalam tabel pertandingan - siapa yang menang. <br>  Gambar tersebut menunjukkan bahwa peringkat untuk tahun 2018 dihitung persis sama dengan di Wikipedia.  Untuk tahun-tahun sebelumnya, seperti yang disebutkan di atas, API Sepak Bola tidak memberikan semua informasi. <br><br><h3>  Ringkasan </h3><br><br>  Kami membangun aplikasi kecil yang sepenuhnya dijelaskan oleh kode di atas dan menyimpan datanya di PostgreSQL, menyediakan antarmuka web untuk melihat dan mengedit data.  Pada saat yang sama, ini akan bekerja secara efektif pada volume besar, karena semua formulir hanya membaca jendela yang terlihat.  Juga di luar kotak adalah filter, pengurutan, pengunggahan ke Excel, dan banyak lagi. <br><br>  Perlu dicatat betapa mudahnya menggunakan platform tugas menghitung koefisien diuraikan menjadi properti individu.  Ketika dijalankan, semua logika ini akan diterjemahkan ke dalam query SQL, dan semua perhitungan akan dilakukan secara langsung pada server database menggunakan semua optimasi DBMS. <br><br>  Contoh cara kerja aplikasi dengan data yang dimuat ke dalamnya dapat ditemukan di: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://demo.lsfusion.org/euroleague</a> .  Login tamu tanpa kata sandi.  Pengguna dalam mode hanya baca. <br><br>  Mereka yang ingin dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengatur</a> sendiri semuanya secara lokal dan, misalnya, membuat model koefisien dengan memasukkan hasil pertandingan yang akan datang.  Semua modul aplikasi yang dijelaskan di atas di-host di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github</a> .  Setelah instalasi otomatis, Anda hanya perlu memunculkan file-file ini di folder yang sesuai dari instruksi dan restart server. <br><br>  Untuk mengunduh data dari Football API, Anda harus mendaftar dan mendapatkan kunci API.  Itu membutuhkan kartu, tetapi jika Anda membuat tidak lebih dari 50 permintaan per hari, maka tidak ada yang akan dikurangkan darinya. <br><br>  Selain itu, Anda dapat menjalankan aplikasi ini secara online di bagian yang sesuai di situs.  Pada tab Platform, pilih contoh Perhitungan Peluang UEFA dan klik Mainkan. <br><br>  Ngomong-ngomong, jika seseorang perlu menerapkan beberapa sistem sederhana yang Excel tidak lagi cocok, maka tulis di komentar.  Untuk mempelajari kemampuan platform, kami akan mencoba mengimplementasikannya dan menulis artikel terkait. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id467279/">https://habr.com/ru/post/id467279/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id467263/index.html">Kami menghasilkan energi surya atau pendapatan pasif sebesar 25% per tahun, pengalaman praktis. Bagian 2</a></li>
<li><a href="../id467269/index.html">Model dalam Keamanan Informasi</a></li>
<li><a href="../id467271/index.html">Pemrogram panggilan, ahli kimia berdasarkan profesi</a></li>
<li><a href="../id467275/index.html">Sampai Hari programmer. Programmer pada tahun 2019</a></li>
<li><a href="../id467277/index.html">pg_stat_statements + pg_stat_activity + loq_query = pg_ash?</a></li>
<li><a href="../id467281/index.html">Potret Ilmuwan Data di Rusia. Hanya fakta</a></li>
<li><a href="../id467283/index.html">Bagaimana menjelaskan kepada nenek Anda perbedaan antara SQL dan NoSQL</a></li>
<li><a href="../id467289/index.html">Mengembangkan OS seperti Unix yang monolitik - GDT & IDT (5)</a></li>
<li><a href="../id467291/index.html">iOS untuk kreativitas: menggambar</a></li>
<li><a href="../id467295/index.html">View Binding yang sudah lama dinanti di Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>