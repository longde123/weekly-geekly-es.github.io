<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯС│ ЁЯЫАЁЯП╝ тЪля╕П PostgreSQL рд╕рдВрдЧрддрд┐: рдЧреЛрд▓рд╛рдХрд╛рд░ рдирд╣реАрдВ, рдШреЛрдбрд╝рд╛ рдирд╣реАрдВ, рдирд┐рд░реНрд╡рд╛рдд рдореЗрдВ рдирд╣реАрдВ ЁЯМ▒ ЁЯФ╢ тЫ┤я╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдПрдХ DBMS рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдПрдХ рд▓рдЧрд╛рддрд╛рд░ рдЖрдЧреЗ рдмрдврд╝рдиреЗ рд╡рд╛рд▓рд╛ рднрд╡рд┐рд╖реНрдп рд╣реИред DBMSs рдмреЗрд╣рддрд░ рдФрд░ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдкрд░ рд╕реНрдХреЗрд▓ рдХрд░рддреЗ рд╣реИрдВ, рдЬрдмрдХрд┐ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рд╕реНрд╡рдпрдВ рдЙрддреНрдкрд╛рджрдХрдд...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PostgreSQL рд╕рдВрдЧрддрд┐: рдЧреЛрд▓рд╛рдХрд╛рд░ рдирд╣реАрдВ, рдШреЛрдбрд╝рд╛ рдирд╣реАрдВ, рдирд┐рд░реНрд╡рд╛рдд рдореЗрдВ рдирд╣реАрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/postgrespro/blog/423685/"><img src="https://habrastorage.org/webt/b0/s3/rq/b0s3rqkffufh7baruji0jc_vbgq.jpeg"><br><br>  рдПрдХ DBMS рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдПрдХ рд▓рдЧрд╛рддрд╛рд░ рдЖрдЧреЗ рдмрдврд╝рдиреЗ рд╡рд╛рд▓рд╛ рднрд╡рд┐рд╖реНрдп рд╣реИред  DBMSs рдмреЗрд╣рддрд░ рдФрд░ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдкрд░ рд╕реНрдХреЗрд▓ рдХрд░рддреЗ рд╣реИрдВ, рдЬрдмрдХрд┐ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рд╕реНрд╡рдпрдВ рдЙрддреНрдкрд╛рджрдХрддрд╛, рдХреЛрд░ рдХреА рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдореЗрдореЛрд░реА рдмрдврд╝рд╛рддреЗ рд╣реИрдВ - Achilles рдХрдЫреБрдП рдХреЗ рд╕рд╛рде рдкрдХрдбрд╝ рд░рд╣рд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА рдирд╣реАрдВред  рдбреАрдмреАрдПрдордПрд╕ рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреА рд╕рдорд╕реНрдпрд╛ рдЬреЛрд░реЛрдВ рдкрд░ рд╣реИред <br><br>  рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬрд╝ рдкреНрд░реЛрдлреЗрд╢рдирд▓ рдХреЛ рди рдХреЗрд╡рд▓ рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рд░реВрдк рд╕реЗ, рдмрд▓реНрдХрд┐ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд░реВрдк рд╕реЗ: рдЕрдкрдиреЗ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рд╕рд╛рде рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдХреА рд╕рдорд╕реНрдпрд╛ рдереАред  рдФрд░ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ред  рдЗрд╕ рддрд░рд╣ рдХреЗ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдкрд░ рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рдЪрд░реНрдЪрд╛ рдХреА рдЬрд╛рдПрдЧреАред <br><br>  NUMA рд╕рд┐рд╕реНрдЯрдо рдкрд░ PostgreSQL рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╕реНрдХреЗрд▓ рдХрд░рддрд╛ рд╣реИ рдЕрдЧрд░ рдпрд╣ рдПрдХ рд╣реА рдорджрд░рдмреЛрд░реНрдб рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдХрдИ рдкреНрд░реЛрд╕реЗрд╕рд░ рдФрд░ рдХрдИ рдбреЗрдЯрд╛ рдмрд╕реЗрдВ рд╣реИрдВред  рдХреБрдЫ рдЕрдиреБрдХреВрд▓рди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a> рдкрдврд╝реЗ рдЬрд╛ рд╕рдХрддреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИрдВ</a> ред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рдПрдХ рдФрд░ рд╡рд░реНрдЧ рд╣реИ, рдЙрдирдХреЗ рдкрд╛рд╕ рдХрдИ рдорджрд░рдмреЛрд░реНрдб рд╣реИрдВ, рдЬрд┐рдирдХреЗ рдмреАрдЪ рдбреЗрдЯрд╛ рд╡рд┐рдирд┐рдордп рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдЗрдВрдЯрд░рдХрдиреЗрдХреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрдмрдХрд┐ рдУрдПрд╕ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдЙрди рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдпрд╣ рдбрд┐рдЬрд╝рд╛рдЗрди рдПрдХ рдПрдХрд▓ рдорд╢реАрди рдХреА рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИред  рдФрд░ рдпрджреНрдпрдкрд┐ рдФрдкрдЪрд╛рд░рд┐рдХ рд░реВрдк рд╕реЗ рдРрд╕реЗ рд╕рд┐рд╕реНрдЯрдо рдХреЛ NUMA рдХреЗ рд▓рд┐рдП рднреА рдЬрд┐рдореНрдореЗрджрд╛рд░ рдард╣рд░рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рд╡реЗ рд╕реБрдкрд░ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЗ рдХрд░реАрдм рд╣реИрдВ, рдЬреИрд╕рд╛ рдХрд┐  рдиреЛрдб рдХреА рд╕реНрдерд╛рдиреАрдп рдореЗрдореЛрд░реА рддрдХ рдкрд╣реБрдВрдЪ рдФрд░ рдкрдбрд╝реЛрд╕реА рдиреЛрдб рдХреА рдореЗрдореЛрд░реА рддрдХ рдкрд╣реБрдВрдЪ рдореМрд▓рд┐рдХ рд░реВрдк рд╕реЗ рднрд┐рдиреНрди рд╣реЛрддреА рд╣реИред  PostgreSQL рд╕рдореБрджрд╛рдп рдХрд╛ рдорд╛рдирдирд╛ тАЛтАЛрд╣реИ рдХрд┐ рдЗрд╕ рддрд░рд╣ рдХреЗ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдкрд░ рдЪрд▓рдиреЗ рд╡рд╛рд▓рд╛ рдПрдХрдорд╛рддреНрд░ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬ рдЙрджрд╛рд╣рд░рдг рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рдПрдХ рд╕реНрд░реЛрдд рд╣реИ, рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рджреГрд╖реНрдЯрд┐рдХреЛрдг рдирд╣реАрдВ рд╣реИред <br><a name="habracut"></a><br>  рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╕рд╛рдЭрд╛ рдореЗрдореЛрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЛ рдореМрд▓рд┐рдХ рд░реВрдк рд╕реЗ рдЗрд╕ рддрдереНрдп рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХрд╛ рдЕрдкрдиреА рдФрд░ рджреВрд░рд╕реНрде рдореЗрдореЛрд░реА рдХрд╛ рдПрдХреНрд╕реЗрд╕ рд╕рдордп рдХрдо рдпрд╛ рдЬреНрдпрд╛рджрд╛ рддреБрд▓рдиреАрдп рд╣реИред  рдорд╛рдорд▓реЗ рдореЗрдВ рдЬрдм рд╣рдо рдХрдИ рдиреЛрдбреНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдПрдХ рддреЗрдЬ рд╕рдВрдЪрд╛рд░ рдЪреИрдирд▓ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рд╛рдЭрд╛ рдореЗрдореЛрд░реА рдкрд░ рджрд╛рдВрд╡ рдЦреБрдж рдХреЛ рд╕рд╣реА рдард╣рд░рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдВрдж рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╡рд┐рд▓рдВрдмрддрд╛ рдХреЗ рдХрд╛рд░рдг рдиреЛрдб (рдиреЛрдб) рдХреЗ рд▓рд┐рдП рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рдмрд╣реБрдд "рд╕рд╕реНрддрд╛" рд╣реИ рдЬрд╣рд╛рдВ рдпрд╣ рд╕реНрдерд┐рдд рд╣реИред рджрд┐рд▓рдЪрд╕реНрдк рдбреЗрдЯрд╛ рдмрд╕ рдкрд░ рдЗрд╕ рдбреЗрдЯрд╛ рдХреЛ рднреЗрдЬрдиреЗ рд╕реЗред  рдЗрд╕рд▓рд┐рдП, рд╕реБрдкрд░ рдХрдВрдкреНрдпреВрдЯрд░ рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдХрдИ рдиреЛрдбреНрд╕ рдХреЗ рд╕рд╛рде рд╕рд┐рд╕реНрдЯрдо, рдХреНрд▓рд╕реНрдЯрд░ рд╕рдорд╛рдзрд╛рди рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╣реИрдВред <br><br>  рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдорд▓реНрдЯреА-рдиреЛрдб рд╕рд┐рд╕реНрдЯрдо рдФрд░ рдареЗрда рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬ рд╕рд╛рдЭрд╛-рдореЗрдореЛрд░реА рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЗ рд╕рдВрдпреЛрдЬрди рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЖрдЦрд┐рд░рдХрд╛рд░, рдЕрдЧрд░ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдЬрдЯрд┐рд▓ рд╕рдВрдЧрдгрдирд╛ рдХрд░рдиреЗ рдореЗрдВ рдЕрдкрдирд╛ рдЕрдзрд┐рдХрд╛рдВрд╢ рд╕рдордп рд╡реНрдпрддреАрдд рдХрд░рддреА рд╣реИрдВ, рддреЛ рдпрд╣ рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рднреА рдмрд╣реБрдд рдХреБрд╢рд▓ рд╣реЛрдЧреАред  рд╣рдорд╛рд░реА рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдХреНрд▓рд╛рдЗрдВрдЯ рдиреЗ рдкрд╣рд▓реЗ рд╣реА рдПрдХ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдорд▓реНрдЯреА-рдиреЛрдб рд╕рд░реНрд╡рд░ рдЦрд░реАрджрд╛ рдерд╛, рдФрд░ рд╣рдореЗрдВ рдЙрд╕ рдкрд░ PostgreSQL рдХреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдирд╛ рдерд╛ред <br><br>  рд▓реЗрдХрд┐рди рд╕рдорд╕реНрдпрд╛рдПрдВ рдЧрдВрднреАрд░ рдереАрдВ: рд╕рдмрд╕реЗ рд╕рд░рд▓ рд▓реЗрдЦрди рдЕрдиреБрд░реЛрдз (рдПрдХ рд░рд┐рдХреЙрд░реНрдб рдореЗрдВ рдХрдИ рдлрд╝реАрд▓реНрдб рдорд╛рди рдмрджрд▓реЗрдВ) рдХрдИ рдорд┐рдирдЯ рд╕реЗ рдПрдХ рдШрдВрдЯреЗ рдХреА рдЕрд╡рдзрд┐ рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдП рдЧрдП рдереЗред  рдЬреИрд╕рд╛ рдХрд┐ рдмрд╛рдж рдореЗрдВ рдкреБрд╖реНрдЯрд┐ рдХреА рдЧрдИ рдереА, рдЗрди рд╕рдорд╕реНрдпрд╛рдУрдВ рдиреЗ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдХреЛрд░ рдХреА рд╡рдЬрд╣ рд╕реЗ рдФрд░ рдареАрдХ рдЗрд╕реА рддрд░рд╣, рдиреЛрдбреНрд╕ рдХреЗ рдмреАрдЪ рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рдзреАрдореА рдЧрддрд┐ рд╕реЗ рд╡рд┐рдирд┐рдордп рдХреЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдореЗрдВ рдХрдЯреНрдЯрд░рдкрдВрдереА рд╕рдорд╛рдирддрд╛ рдХреА рд╡рдЬрд╣ рд╕реЗ рдЕрдкрдиреЗ рд╕рднреА рдорд╣рд┐рдорд╛ рдореЗрдВ рдЦреБрдж рдХреЛ рдкреНрд░рдХрдЯ рдХрд┐рдпрд╛ред <br><br>  рдЗрд╕рд▓рд┐рдП, рд▓реЗрдЦ рдХреЗ рд░реВрдк рдореЗрдВ рдЕрдЧрд░ рджреЛрд╣рд░реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: <br><br><ul><li>  рдЕрдиреБрднрд╡ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ: рдХреНрдпрд╛ рдХрд░реЗрдВ рдЕрдЧрд░ рдорд▓реНрдЯреА-рдиреЛрдб рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рдмрдпрд╛рдирд╛ рдореЗрдВ рдзреАрдорд╛ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рдХрд╣рд╛рдВ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ, рдХреИрд╕реЗ рдирд┐рджрд╛рди рдХрд░реЗрдВ, рдХрд╣рд╛рдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реЗрдВред </li><li>  рдмрддрд╛рдПрдВ рдХрд┐ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрд╕реАрдХреНрдпреВрдмреА рдбреАрдмреАрдПрдордПрд╕ рдХреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдХреИрд╕реЗ рдЙрдЪреНрдЪ рд╕реНрддрд░ рдХреА рд╕рдВрдЧрд╛рдорд┐рддрд┐ рдХреЗ рд╕рд╛рде рд╣рд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЬрд┐рдирдореЗрдВ рддрд╛рд▓реЗ рдХреЛ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдореЗрдВ рдмрджрд▓рд╛рд╡ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдХреНрдпреВрдПрд▓ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИред </li></ul><br><h3>  рд╕рд░реНрд╡рд░ рдФрд░ рдбреАрдмреА </h3><br>  рдкреНрд░рдгрд╛рд▓реА рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдореЗрдВ 2 рд╕реЙрдХреЗрдЯ рдХреЗ рд╕рд╛рде 8 рдмреНрд▓реЗрдб рд╢рд╛рдорд┐рд▓ рдереЗред  рдХреБрд▓ рдореЗрдВ, 300 рд╕реЗ рдЕрдзрд┐рдХ рдХреЛрд░ (рдЙрдЪреНрдЪ рд░рдХреНрддрдЪрд╛рдк рдХреЛ рдЫреЛрдбрд╝рдХрд░)ред  рдПрдХ рддреЗрдЬ рдЯрд╛рдпрд░ (рдорд╛рд▓рд┐рдХрд╛рдирд╛ рдирд┐рд░реНрдорд╛рддрд╛ рддрдХрдиреАрдХ) рдмреНрд▓реЗрдб рдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИред  рдРрд╕рд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдпрд╣ рдПрдХ рд╕реБрдкрд░ рдХрдВрдкреНрдпреВрдЯрд░ рд╣реИ, рд▓реЗрдХрд┐рди DBMS рдХреЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рднрд╛рд╡рд╢рд╛рд▓реА рд╣реИред <br>  рд▓реЛрдб рднреА рдмрдбрд╝рд╛ рд╣реИред  1 рд╕реЗ рдЕрдзрд┐рдХ рдЯреЗрд░рд╛рдмрд╛рдЗрдЯ рдбреЗрдЯрд╛ред  рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб рд▓рдЧрднрдЧ 3000 рд▓реЗрдирджреЗрдиред  1000 рд╕реЗ рдЕрдзрд┐рдХ рдХрдиреЗрдХреНрд╢рди рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред <br><br>  рдкреНрд░рддрд┐ рдШрдВрдЯрд╛ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдЕрдкреЗрдХреНрд╖рд╛рдУрдВ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ рдЬреЛ рдкрд╣рд▓реА рдЪреАрдЬ рдХреА, рд╡рд╣ рджреЗрд░реА рдХреЗ рдХрд╛рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рдбрд┐рд╕реНрдХ рдкрд░ рд▓рд┐рдЦрдирд╛ рдерд╛ред  рдЬреИрд╕реЗ рд╣реА рдЕрд╕рдВрдЧрдд рд╡рд┐рд▓рдВрдм рд╢реБрд░реВ рд╣реБрдЖ, рдкрд░реАрдХреНрд╖рдг рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ <code>tmpfs</code> рдкрд░ рдХрд┐рдП рдЬрд╛рдиреЗ рд▓рдЧреЗред  рддрд╕реНрд╡реАрд░ рдирд╣реАрдВ рдмрджрд▓реА рд╣реИред  рдбрд┐рд╕реНрдХ рдХрд╛ рдЗрд╕рд╕реЗ рдХреЛрдИ рд▓реЗрдирд╛-рджреЗрдирд╛ рдирд╣реАрдВ рд╣реИред <br><br><h3>  рдирд┐рджрд╛рди рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рдирд╛: рджреГрд╢реНрдп </h3><br>  рдЪреВрдВрдХрд┐ рд╕рдорд╛рди рд╡рд╕реНрддреБрдУрдВ рдкрд░ "рджрд╕реНрддрдХ" рдХрд░рдиреЗ рд╡рд╛рд▓реА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдЙрдЪреНрдЪ рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзрд╛ рдХреЗ рдХрд╛рд░рдг рд╕рдорд╕реНрдпрд╛рдПрдВ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╣реЛрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдереА, рдЗрд╕рд▓рд┐рдП рдкрд╣рд▓реА рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рддрд╛рд▓реЗ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВред  PostgreSQL рдореЗрдВ, рдЗрд╕ рддрд░рд╣ рдХреЗ рдЪреЗрдХ рдХреЗ рд▓рд┐рдП рдПрдХ рджреГрд╢реНрдп <code>pg.catalog.pg_locks</code> рдФрд░ <code>pg_stat_activity</code> ред  рджреВрд╕рд░рд╛ рд╕рдВрд╕реНрдХрд░рдг, рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рдВрд╕реНрдХрд░рдг 9.6 рдореЗрдВ, рдЗрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рдХрд┐ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдХреНрдпрд╛ рдЗрдВрддрдЬрд╛рд░ рд╣реИ ( <i>рдЕрдорд┐рдд рдХрдкрд┐рд▓рд╛, рдЗрд▓реНрдбрд╕ рдХреБрд░реНрдмрд╛рдирд╛рд▓рд┐рд╡реА</i> ) - <code>wait_event_type</code> ред  рдЗрд╕ рдХреНрд╖реЗрддреНрд░ рдХреЗ рд▓рд┐рдП рд╕рдВрднрд╛рд╡рд┐рдд рдореВрд▓реНрдп <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рд╡рд░реНрдгрд┐рдд <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИрдВ</a> ред <br><br>  рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ, рдмрд╕ рдЧрд┐рдирддреА: <br><br><pre> <code class="sql hljs">postgres=<span class="hljs-comment"><span class="hljs-comment"># SELECT COUNT(*) FROM pg_locks; count тАФ---тАФ 88453 (1 row) postgres=# SELECT COUNT(*) FROM pg_stat_activity; count тАФ---тАФ 1826 (1 row) postgres=# SELECT COUNT(*) FROM pg_stat_activity WHERE state ='active'; count тАФ---тАФ 1005</span></span></code> </pre> <br>  рдпреЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдВрдЦреНрдпрд╛рдПрдБ рд╣реИрдВред  200,000 рддрд╛рд▓реЛрдВ рддрдХ рдкрд╣реБрдВрдЪреЗред <br>  рдЙрд╕реА рд╕рдордп, рдЗрд╕ рддрд░рд╣ рдХреЗ рддрд╛рд▓реЗ рдХреЛ рдЕрд╢реБрдн рдЕрдиреБрд░реЛрдз рдкрд░ рд▓рдЯрдХрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COUNT</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">mode</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">mode</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_locks <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> pid =<span class="hljs-number"><span class="hljs-number">580707</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mode</span></span>; count | mode тАФ<span class="hljs-comment"><span class="hljs-comment">-----+---------------тАФ 93 | AccessShareLock 1 | ExclusiveLock</span></span></code> </pre> <br>  рдмрдлрд░ рдкрдврд╝рддреЗ рд╕рдордп, рдбреАрдмреАрдПрдордПрд╕ <code>share</code> рд▓реЙрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬрдмрдХрд┐ рд▓реЗрдЦрди - <code>exclusive</code> ред  рдЕрд░реНрдерд╛рддреН, рд╕рднреА рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ 1% рд╕реЗ рдХрдо рдХреЗ рд▓рд┐рдП рд▓реЙрдХ рд▓реЙрдХ рд▓рд┐рдЦреЗрдВред <br>  <code>pg_locks</code> рджреГрд╢реНрдп рдореЗрдВ, рд▓реЙрдХ рдкреНрд░рдХрд╛рд░ рд╣рдореЗрд╢рд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдореЗрдВ</a> рд╡рд░реНрдгрд┐рдд рдХреЗ рд░реВрдк рдореЗрдВ рдирд╣реАрдВ рджрд┐рдЦрддреЗ рд╣реИрдВред <br><br>  рдпрд╣рд╛рдБ рдореИрдЪ рдкреНрд▓реЗрдЯ рд╣реИ: <br><br><pre> <code class="plaintext hljs">AccessShareLock = LockTupleKeyShare RowShareLock = LockTupleShare ExclusiveLock = LockTupleNoKeyExclusive AccessExclusiveLock = LockTupleExclusive</code> </pre> <br>  Pg_locks рдХреНрд╡реЗрд░реА рд╕реЗ рд╕реЗрд▓реЗрдХреНрдЯ рдореЛрдб рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдХреНрд░рд┐рдПрдЯ рдЗрдВрдбреЗрдХреНрд╕ (CONCURRENTLY рдХреЗ рдмрд┐рдирд╛) <code>buffer content lock</code> рд▓рд┐рдП 234 INSERTs рдФрд░ 390 INSERT рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░реЗрдЧрд╛ред  рдПрдХ рд╕рдВрднрд╛рд╡рд┐рдд рд╕рдорд╛рдзрд╛рди рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рддреНрд░реЛрдВ рдореЗрдВ INSERTs рдХреЛ "рдкрдврд╝рд╛рдирд╛" рд╣реИ рддрд╛рдХрд┐ рдмрдлрд╝рд░реНрд╕ рдореЗрдВ рдХрдо рдЕрдВрддрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред <br><br><h3>  рдпрд╣ perf рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рд╣реИ </h3><br>  рд╕рд╣реА рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдмрд╣реБрдд рд╕рд╛рд░реА рдиреИрджрд╛рдирд┐рдХ тАЛтАЛрдЬрд╛рдирдХрд╛рд░реА рдПрдХрддреНрд░ рдХрд░рддреА рд╣реИред  <code>record</code> рдореЛрдб рдореЗрдВ ... рдпрд╣ рд╕рд┐рд╕реНрдЯрдо рдИрд╡реЗрдВрдЯ рдХреЗ рдЖрдВрдХрдбрд╝реЛрдВ рдХреЛ рдлрд╛рдЗрд▓реЛрдВ рдореЗрдВ рд▓рд┐рдЦрддрд╛ рд╣реИ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╡реЗ <code>./perf_data</code> ), рдФрд░ <code>report</code> рдореЛрдб рдореЗрдВ рдпрд╣ рдПрдХрддреНрд░ рдХрд┐рдП рдЧрдП рдбреЗрдЯрд╛ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдЙрди рдШрдЯрдирд╛рдУрдВ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЪрд┐рдВрддрд╛ рдХреЗрд╡рд▓ <code>postgres</code> рдпрд╛ рджрд┐рдП рдЧрдП <code>pid</code> : <br><br><pre> <code class="plaintext hljs">$ perf record -u postgres  $ perf record -p 76876  ,  $ perf report &gt; ./my_results</code> </pre> <br>  рдирддреАрдЬрддрди, рд╣рдо рдХреБрдЫ рдРрд╕рд╛ рджреЗрдЦреЗрдВрдЧреЗ <br><br><img src="https://habrastorage.org/webt/rn/ta/rv/rntarvj2jticq7glciiqockk3-y.jpeg"><br><br>  рдирд┐рджрд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░реЗрдВ PostgreSQL рдХрд╛ рд╡рд░реНрдгрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ</a> , рд╕рд╛рде рд╣реА рд╕рд╛рде <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">pg рд╡рд┐рдХреА рдореЗрдВ рднреА</a> ред <br><br>  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╕рдмрд╕реЗ рд╕рд░рд▓ рдореЛрдб рдиреЗ рд╕рдВрдкреВрд░реНрдг рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реА рджреА - рдкреВрд░реНрдг <code>perf top</code> , рдЬреЛ <code>top</code> рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреА рднрд╛рд╡рдирд╛ рдореЗрдВ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  <code>perf top</code> рд╕рд╛рде <code>perf top</code> рд╣рдордиреЗ рджреЗрдЦрд╛ рдХрд┐ рдЬреНрдпрд╛рджрд╛рддрд░ рд╕рдордп рдкреНрд░реЛрд╕реЗрд╕рд░ рдореБрдЦреНрдп <code>PinBuffer()</code> , рд╕рд╛рде рд╣реА <code>PinBuffer()</code> рдФрд░ <code>LWLockAttemptLock().</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдЦрд░реНрдЪ рдХрд░рддрд╛ рд╣реИ <code>LWLockAttemptLock().</code>  ред <br><br>  <code>PinBuffer()</code> рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд╣реИ рдЬреЛ рдмрдлрд░ рдХреЗ рд╕рдВрджрд░реНрдн рдХреЗ рдХрд╛рдЙрдВрдЯрд░ рдХреЛ рдмрдврд╝рд╛рддрд╛ рд╣реИ (рд░реИрдо рдХреЗ рд▓рд┐рдП рдПрдХ рдбреЗрдЯрд╛ рдкреЗрдЬ рдХреЛ рдореИрдк рдХрд░рддрд╛ рд╣реИ), рдзрдиреНрдпрд╡рд╛рдж рдЬрд┐рд╕рдХреЗ рдХрд╛рд░рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдХреМрди рд╕реЗ рдмрдлрд╝рд░реНрд╕ рдХреЛ рдордЬрдмреВрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЬреЛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред <br><br>  <code>LWLockAttemptLock()</code> - <code>LWLock</code> рдХрд╛ рдХреИрдкреНрдЪрд░ рдлрд╝рдВрдХреНрд╢рдиред  <code>LWLock</code> <code>shared</code> рдФрд░ <code>exclusive</code> рджреЛ рд╕реНрддрд░реЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдкреНрд░рдХрд╛рд░ рдХрд╛ рддрд╛рд▓рд╛ рд╣реИ, <code>LWLock</code> рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдП рдмрд┐рдирд╛, рддрд╛рд▓реЗ рдХреЛ <code>shared memory</code> рдкреВрд░реНрд╡-рдЖрд╡рдВрдЯрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдкреНрд░рддреАрдХреНрд╖рд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдПрдХ рдХрддрд╛рд░ рдореЗрдВ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░ рд░рд╣реА рд╣реИред <br><br>  рдпреЗ рдлрд╝рдВрдХреНрд╢рди рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЧрдВрднреАрд░рддрд╛ рд╕реЗ PostgreSQL 9.5 рдФрд░ 9.6 рдореЗрдВ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд┐рдП рдЧрдП рд╣реИрдВред  рдЙрдирдХреЗ рдЕрдВрджрд░ рдХреЗ рд╕реНрдкрд┐рдирд▓реЙрдХ рдХреЛ рдкрд░рдорд╛рдгреБ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рдкреНрд░рддреНрдпрдХреНрд╖ рдЙрдкрдпреЛрдЧ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред <br><br><h3>  рдЬреНрд╡рд╛рд▓рд╛ рд░реЗрдЦрд╛рдВрдХрди </h3><br>  рдпрд╣ рдЙрдирдХреЗ рдмрд┐рдирд╛ рдЕрд╕рдВрднрд╡ рд╣реИ: рднрд▓реЗ рд╣реА рд╡реЗ рдмреЗрдХрд╛рд░ рдереЗ, рдлрд┐рд░ рднреА рдпрд╣ рдЙрдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдиреЗ рд▓рд╛рдпрдХ рд╣реЛрдЧрд╛ - рд╡реЗ рдЕрд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рд╕реБрдВрджрд░ рд╣реИрдВред  рд▓реЗрдХрд┐рди рд╡реЗ рдЙрдкрдпреЛрдЧреА рд╣реИрдВред  рдпрд╣рд╛рдБ <code>github</code> рд╕реЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ, рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рд╕реЗ рдирд╣реАрдВ (рди рддреЛ рд╣рдо рдФрд░ рди рд╣реА рдЧреНрд░рд╛рд╣рдХ рдЕрднреА рддрдХ рд╡рд┐рд╡рд░рдг рдХреЗ рдкреНрд░рдХрдЯреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВ)ред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/75b/909/e8d/75b909e8de5177a48fa7d73f53eff437.svg"><br><br>  рдпреЗ рдЦреВрдмрд╕реВрд░рдд рддрд╕реНрд╡реАрд░реЗрдВ рдмрд╣реБрдд рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рджрд┐рдЦрд╛рддреА рд╣реИрдВ рдХрд┐ рдкреНрд░реЛрд╕реЗрд╕рд░ рдЪрдХреНрд░ рдХреНрдпрд╛ рд▓реЗрддреЗ рд╣реИрдВред  рд╡рд╣реА <code>perf</code> рдбреЗрдЯрд╛ рдПрдХрддреНрд░ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди <code>flame graph</code> рдмреБрджреНрдзрд┐рдорд╛рдиреА рд╕реЗ рдбреЗрдЯрд╛ рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдПрдХрддреНрд░рд┐рдд рдХреЙрд▓ рд╕реНрдЯреИрдХ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдкреЗрдбрд╝реЛрдВ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рддрд╛ рд╣реИред  рдЖрдк рд▓реМ рдЧреНрд░рд╛рдл рдХреЗ рд╕рд╛рде рдкреНрд░реЛрдлрд╛рдЗрд▓рд┐рдВрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> , рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рдЖрдкрдХреЛ рд╡рд╣ рд╕рдм рдХреБрдЫ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдЬреЛ рдЖрдкрдХреЛ рдЪрд╛рд╣рд┐рдПред <br><br>  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд▓реМ рдЧреНрд░рд╛рдлрд╝ рдкрд░ <code>nestloop</code> рдХреА рдПрдХ рдмрдбрд╝реА рдорд╛рддреНрд░рд╛ рджрд┐рдЦрд╛рдИ рджреЗ <code>nestloop</code> рдереАред  рдЬрд╛рд╣рд┐рд░рд╛ рддреМрд░ рдкрд░, рдХрдИ рд╕рдорд╡рд░реНрддреА рдкрдврд╝рдиреЗ рдХреЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдореЗрдВ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рдЬреЛрдЗрди рдиреЗ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ <code>access share</code> рддрд╛рд▓реЗ рдХрд╛ рдХрд╛рд░рдг рдмрдирд╛ред <br><br>  <code>perf</code> рджреНрд╡рд╛рд░рд╛ рдПрдХрддреНрд░рд┐рдд рдЖрдБрдХрдбрд╝реЛрдВ рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдкреНрд░реЛрд╕реЗрд╕рд░ рд╕рд╛рдЗрдХрд┐рд▓ рдХрд╣рд╛рдБ рдЬрд╛рддреА рд╣реИ  рдФрд░ рдпрджреНрдпрдкрд┐ рд╣рдордиреЗ рджреЗрдЦрд╛ рдХрд┐ рдЕрдзрд┐рдХрд╛рдВрд╢ рдкреНрд░реЛрд╕реЗрд╕рд░ рд╕рдордп рддрд╛рд▓реЛрдВ рдкрд░ рдЧреБрдЬрд░рддрд╛ рд╣реИ, рд╣рдордиреЗ рдпрд╣ рдирд╣реАрдВ рджреЗрдЦрд╛ рдХрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рддрд╛рд▓реЗ рдХреА рдЗрддрдиреА рд▓рдВрдмреА рдЕрдкреЗрдХреНрд╖рд╛рдПрдБ рдХреНрдпрд╛ рд╣реЛрддреА рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдпрд╣ рдирд╣реАрдВ рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рд▓реЙрдХ рдЕрдкреЗрдХреНрд╖рд╛рдПрдБ рдХрд╣рд╛рдБ рд╣реЛрддреА рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐  рд╕реАрдкреАрдпреВ рд╕рдордп рдмрд░реНрдмрд╛рдж рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛ рд╣реИ рдкреНрд░рддреАрдХреНрд╖рд╛ред <br><br>  рдЕрдкреЗрдХреНрд╖рд╛рдУрдВ рдХреЛ рд╕реНрд╡рдпрдВ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рд╕рд┐рд╕реНрдЯрдо рджреГрд╢реНрдп <code>pg_stat_activity</code> рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> wait_event_type, wait_event, <span class="hljs-keyword"><span class="hljs-keyword">COUNT</span></span>(*) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_stat_activity <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> wait_event_type, wait_event;</code> </pre> <br>  рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐: <br><br><pre> <code class="plaintext hljs">LWLockTranche | buffer_content | UPDATE ************* LWLockTranche | buffer_content | INSERT INTO ******** LWLockTranche | buffer_content | \r | | insert into B4_MUTEX | | values (nextval('hib | | returning ID Lock | relation | INSERT INTO B4_***** LWLockTranche | buffer_content | UPDATE ************* Lock | relation | INSERT INTO ******** LWLockTranche | buffer_mapping | INSERT INTO ******** LWLockTranche | buffer_content | \r</code> </pre> <br>  (рдпрд╣рд╛рдВ рддрд╛рд░рд╛рдВрдХрди рдХреЗрд╡рд▓ рдЕрдиреБрд░реЛрдз рд╡рд┐рд╡рд░рдгреЛрдВ рдХреЛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рд╣рдо рдкреНрд░рдХрдЯ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ)ред <br><br>  рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдорд╛рди <code>buffer_content</code> (рдмрдлрд╝рд░реНрд╕ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдЕрд╡рд░реБрджреНрдз рдХрд░рдирд╛) рдФрд░ <code>buffer_mapping</code> (рд╣реИрд╢ рдкреНрд▓реЗрдЯ рдХреЗ рдШрдЯрдХреЛрдВ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ <code>shared_buffers</code> )ред <br><br><h3>  рдЬреАрдбреАрдмреА рдореЗрдВ рдорджрдж рдХреЗ рд▓рд┐рдП </h3><br>  рд▓реЗрдХрд┐рди рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рддрд╛рд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЗрддрдиреА рдЙрдореНрдореАрджреЗрдВ рдХреНрдпреЛрдВ рд╣реИрдВ?  рдЙрдореНрдореАрджреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддреГрдд рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, рдореБрдЭреЗ <code>GDB</code> рдбрд┐рдмрдЧрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдкрдбрд╝рд╛ред  <code>GDB</code> рд╕рд╛рде рд╣рдо рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХрд╛ рдХреЙрд▓ рд╕реНрдЯреИрдХ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдирдореВрдирд╛ рд▓рдЧрд╛рдиреЗ рд╕реЗ, рдЕрд░реНрдерд╛рддреНред  рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд░реИрдВрдбрдо рдХреЙрд▓ рд╕реНрдЯреИрдХреНрд╕ рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рдЕрдВрджрд╛рдЬрд╛ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╕реНрдЯреИрдХ рдХреА рд╕рдмрд╕реЗ рд▓рдВрдмреА рдЕрдкреЗрдХреНрд╖рд╛рдПрдБ рд╣реИрдВред <br><br>  рдЖрдВрдХрдбрд╝реЛрдВ рдХреЗ рд╕рдВрдХрд▓рди рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред  рд╣рдо рдЖрдВрдХрдбрд╝реЛрдВ рдХреЗ "рдореИрдиреБрдЕрд▓" рд╕рдВрдЧреНрд░рд╣ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЬреАрд╡рди рдореЗрдВ рд╡рд┐рд╢реЗрд╖ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдРрд╕рд╛ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, <code>gdb</code> рдХреЛ PostgreSQL рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╕рд░реНрд╡рд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛ <code>pid</code> рдвреВрдВрдвреЗрдВ, рд╕реЗ рдХрд╣реЗрдВ <br><br><pre> <code class="plaintext hljs">$ ps aux | grep postgres</code> </pre> <br>  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдордиреЗ рдкрд╛рдпрд╛: <br><br><pre> <code class="plaintext hljs">postgres 2025 0.0 0.1 172428 1240 pts/17  S   23  0:00 /usr/local/pgsql/bin/postgres -D /usr/local/pgsql/data</code> </pre> <br>  рдФрд░ рдЕрдм рдбрд┐рдмрдЧрд░ рдореЗрдВ <code>pid</code> рдбрд╛рд▓реЗрдВ: <br><br><pre> <code class="plaintext hljs">igor_le:~$gdb -p 2025</code> </pre> <br>  рдбреАрдмрдЧрд░ рдХреЗ рдЕрдВрджрд░ рдПрдХ рдмрд╛рд░, рд╣рдо <code>bt</code> [рдХрд┐, <code>backtrace</code> ] рдпрд╛ <code>where</code> рд▓рд┐рдЦрддреЗ рд╣реИрдВред  рдФрд░ рд╣рдореЗрдВ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╣реБрдд рд╕реА рдЬрд╛рдирдХрд╛рд░реА рдорд┐рд▓рддреА рд╣реИ: <br><br><pre> <code class="plaintext hljs">(gdb) bt #0 0x00007fbb65d01cd0 in __write_nocancel () from /lib64/libc.so.6 #1 0x00000000007c92f4 in write_pipe_chunks ( data=0x110e6e8 "2018тАР06тАР01 15:35:38 MSK [524647]: [392тАР1] db=bp,user=bp,app=[unknown],client=192.168.70.163 (http://192.168.70.163) LOG: relation 23554 new block 493: 248.389503\n2018тАР06тАР01 15:35:38 MSK [524647]: [393тАР1] db=bp,user=bp,app=["..., len=409, dest=dest@entry=1) at elog.c:3123 #2 0x00000000007cc07b in send_message_to_server_log (edata=0xc6ee60 &lt;errordata&gt;) at elog.c:3024 #3 EmitErrorReport () at elog.c:1479</code> </pre> <br>  рд╕рднреА рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рд╕реЗ рдХреЙрд▓ рд╕реНрдЯреИрдХреНрд╕ рд╕рд╣рд┐рдд рдПрдХрддреНрд░рд┐рдд рдЖрдВрдХрдбрд╝реЗ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рд╕рдордп рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдмрд┐рдВрджреБрдУрдВ рдкрд░ рдмрд╛рд░-рдмрд╛рд░ рдПрдХрддреНрд░ рдХрд┐рдП рдЧрдП, рд╣рдордиреЗ рджреЗрдЦрд╛ рдХрд┐ <code>relation extension lock</code> рдЕрдВрджрд░ <code>buffer partition lock</code> 3706 рд╕реЗрдХрдВрдб (рд▓рдЧрднрдЧ рдПрдХ рдШрдВрдЯреЗ) рддрдХ рд░рд╣рддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рдд рдмрдлрд░ рдХреЗ рд╣реИрд╢ рдЯреЗрдмрд▓ рдХреЗ рдПрдХ рдЯреБрдХрдбрд╝реЗ рдкрд░ рддрд╛рд▓реЗред рдкреНрд░рдмрдВрдзрдХ, рдЬреЛ рдкреБрд░рд╛рдиреЗ рдмрдлрд░ рдХреЛ рджрдмрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдерд╛, рддрд╛рдХрд┐ рдмрд╛рдж рдореЗрдВ рдЗрд╕реЗ рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рдЕрдиреБрд░реВрдк рдПрдХ рдирдП рдХреЗ рд╕рд╛рде рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред  <code>buffer content lock</code> рд▓реЙрдХ <code>buffer content lock</code> рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдВрдЦреНрдпрд╛ рднреА рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рдереА, рдЬреЛ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХреЗ рд▓рд┐рдП <code>B-tree</code> рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рдкреГрд╖реНрдареЛрдВ рдХреЛ рд▓реЙрдХ рдХрд░рдиреЗ рдХреА рдЕрдкреЗрдХреНрд╖рд╛ рдХреЗ рдЕрдиреБрд░реВрдк рдереАред <br><br><img src="https://habrastorage.org/webt/6c/y6/cw/6cy6cwmfye29jw84dkzoabjlgvg.jpeg"><br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рд░рд╛рдХреНрд╖рд╕реА рдкреНрд░рддреАрдХреНрд╖рд╛ рд╕рдордп рдХреЗ рд▓рд┐рдП рджреЛ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдЖрдП: <br><br><ul><li>  рдХрд┐рд╕реА рдФрд░ рдиреЗ рдпрд╣ <code>LWLock</code> рд▓рд┐рдпрд╛ рдФрд░ рдЕрдЯрдХ рдЧрдпрд╛ред  рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдВрднрд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реИред  рдХреНрдпреЛрдВрдХрд┐ рдмрдлрд░ рд╡рд┐рднрд╛рдЬрди рд▓реЙрдХ рдХреЗ рдЕрдВрджрд░ рдХреБрдЫ рднреА рдЬрдЯрд┐рд▓ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред </li><li>  рд╣рдореЗрдВ <code>LWLock</code> рдХреБрдЫ рд░реЛрдЧ рд╕рдВрдмрдВрдзреА рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рд╛ред  рдпрд╣ рдЗрд╕ рддрдереНрдп рдХреЗ рдмрд╛рд╡рдЬреВрдж рдХрд┐ рдХрд┐рд╕реА рдиреЗ рднреА рддрд╛рд▓рд╛ рдирд╣реАрдВ рд▓рд┐рдпрд╛, рдЙрд╕рдХреА рдЙрдореНрдореАрдж рдЕрдиреБрдЪрд┐рдд рд░реВрдк рд╕реЗ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓реАред </li></ul><br><h3>  рдиреИрджрд╛рдирд┐рдХ тАЛтАЛрдкреИрдЪ рдФрд░ рдкреЗрдбрд╝ рдЙрдкрдЪрд╛рд░ </h3><br>  рдПрдХ рд╕рд╛рде рдХрдиреЗрдХреНрд╢рди рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдХрдо рдХрд░рдХреЗ, рд╣рдо рд╕рдВрднрд╡рддрдГ рддрд╛рд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рдзрд╛рд░рд╛ рдХрд╛ рдирд┐рд░реНрд╡рд╣рди рдХрд░реЗрдВрдЧреЗред  рд▓реЗрдХрд┐рди рд╡рд╣ рд╕рдорд░реНрдкрдг рдЬреИрд╕рд╛ рд╣реЛрдЧрд╛ред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬрд╝ рдкреНрд░реЛрдлреЗрд╢рдирд▓ рдХреЗ рдореБрдЦреНрдп рд╡рд╛рд╕реНрддреБрдХрд╛рд░ (рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рдЙрдиреНрд╣реЛрдВрдиреЗ рдЗрд╕ рд▓реЗрдЦ рдХреЛ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХреА), <i>рдЕрд▓реЗрдХреНрдЬреЗрдВрдбрд░ рдХреЛрд░реЛрдЯрдХреЛрд╡</i> рдиреЗ рдкреИрдЪ рдХреА рдПрдХ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡ рджрд┐рдпрд╛ред <br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрджрд╛ рдХреА рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддреГрдд рддрд╕реНрд╡реАрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рдерд╛ред  рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ рдХрд┐ рддреИрдпрд╛рд░ рдЙрдкрдХрд░рдг рдХрд┐рддрдиреЗ рдЕрдЪреНрдЫреЗ рд╣реИрдВ, рдЙрдирдХреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рдиреИрджрд╛рдирд┐рдХ тАЛтАЛрдкреИрдЪ рднреА рдЙрдкрдпреЛрдЧреА рд╣реЛрдВрдЧреЗред <br><br>  рдПрдХ рдкреИрдЪ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛, рдЬреЛ <code>relation extension</code> рдореЗрдВ рдмрд┐рддрд╛рдП рдЧрдП рд╕рдордп рдХреЗ рдПрдХ рд╡рд┐рд╕реНрддреГрдд рд▓реЙрдЧрд┐рдВрдЧ рдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИ, рдЬреЛ <code>RelationAddExtraBlocks()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдЕрдВрджрд░ рд╣реЛ рд░рд╣рд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП рд╣рдо рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рддреЗ рд╣реИрдВ рдХрд┐ <code>RelationAddExtraBlocks().</code> рдЕрдВрджрд░ рдХреНрдпрд╛ рд╕рдордп рдмрд┐рддрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ <code>RelationAddExtraBlocks().</code> <br><br>  рдФрд░ рдЙрд╕рдХреЗ рд╕рдорд░реНрдерди рдореЗрдВ, рдПрдХ рдФрд░ рдкреИрдЪ <code>pg_stat_activity</code> рдореЗрдВ рд░рд┐рдкреЛрд░реНрдЯрд┐рдВрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛ рдХрд┐ рд╣рдо рдЕрдм <code>relation extension</code> рдореЗрдВ рдХреНрдпрд╛ рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рдпрд╣ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛: рдЬрдм <code>relation</code> рд╡рд┐рд╕реНрддрд╛рд░ рд╣реЛрддрд╛ рд╣реИ, рддреЛ <code>application_name</code> <code>RelationAddExtraBlocks</code> рдмрди рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЕрдм <code>gdb bt</code> рдФрд░ <code>perf</code> рдЙрдкрдпреЛрдЧ рд╕реЗ рдЕрдзрд┐рдХрддрдо рд╡рд┐рд╡рд░рдг рдХреЗ рд╕рд╛рде рдЖрд╕рд╛рдиреА рд╕реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЪрд┐рдХрд┐рддреНрд╕рд╛ (рдФрд░ рдиреИрджрд╛рдирд┐рдХ тАЛтАЛрдирд╣реАрдВ) рдкреИрдЪ рджреЛ рд▓рд┐рдЦреЗ рдЧрдП рдереЗред  рдкрд╣рд▓реЗ рдкреИрдЪ рдиреЗ <code>BтАРtree</code> рд▓реАрдл рд▓реЙрдХ рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдмрджрд▓ рджрд┐рдпрд╛: рдкрд╣рд▓реЗ, рдЬрдм рдбрд╛рд▓рдиреЗ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рддреЛ рдкрддреНрддреА рдХреЛ <code>share</code> рд░реВрдк рдореЗрдВ рдЕрд╡рд░реБрджреНрдз рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рдпрд╣ <code>exclusive</code> рд╣реЛ рдЧрдпрд╛ред  рдЕрдм рд╡рд╣ рддреБрд░рдВрдд <code>exclusive</code> рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рдЕрдм рдпрд╣ рдкреИрдЪ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд╣рд▓реЗ рд╣реА</a> <b>PostgreSQL 12 рдХреЗ</b> рд▓рд┐рдП рд╢реБрд░реВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ</a> ред  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдЗрд╕ рд╡рд░реНрд╖ <i>рдЕрд▓реЗрдХреНрдЬреЗрдВрдбрд░ рдХреЛрд░реЛрдЯрдХреЛрд╡</i> рдХреЛ рдПрдХ <i>рдХрдорд┐рдЯрд░</i> рдХрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджрд░реНрдЬрд╛</a> рдорд┐рд▓рд╛ - рд░реВрд╕ рдореЗрдВ рджреВрд╕рд░рд╛ рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдХреНрд╕реЗрд▓ рдХрдорд┐рдЯрд░ рдФрд░ рдХрдВрдкрдиреА рдореЗрдВ рджреВрд╕рд░рд╛ред <br><br>  рдореИрдкрд┐рдВрдЧ рд▓реЙрдХреНрд╕ рдкрд░ рд▓реЛрдб рдХреЛ рдХрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>NUM_BUFFER_PARTITIONS</code> рдорд╛рди рднреА 128 рд╕реЗ рдмрдврд╝рд╛рдХрд░ 512 рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛: рдмрдлрд░ рдореИрдиреЗрдЬрд░ рд╣реИрд╢ рдЯреЗрдмрд▓ рдХреЛ рдЫреЛрдЯреЗ рдЯреБрдХрдбрд╝реЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЗрд╕ рдЙрдореНрдореАрдж рдореЗрдВ рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЯреБрдХрдбрд╝реЗ рдкрд░ рд▓реЛрдб рдХрдо рд╣реЛ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдЗрд╕ рдкреИрдЪ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдмрдлрд╝рд░реНрд╕ рдХреА рд╕рд╛рдордЧреНрд░реА рдкрд░ рддрд╛рд▓реЗ рдЪрд▓реЗ рдЧрдП рдереЗ, рд▓реЗрдХрд┐рди <code>NUM_BUFFER_PARTITIONS</code> рдореЗрдВ рд╡реГрджреНрдзрд┐ рдХреЗ рдмрд╛рд╡рдЬреВрдж, <code>buffer_mapping</code> рдмрдиреА рд╣реБрдИ рдереА, рдпрд╛рдиреА рд╣рдо рдЖрдкрдХреЛ рдмрдлрд░ рдкреНрд░рдмрдВрдзрдХ рдХреЗ рдЯреЗрдмрд▓ рдХреЗ рдЯреБрдХрдбрд╝реЛрдВ рдХреЛ рдЕрд╡рд░реБрджреНрдз рдХрд░рдиреЗ рдХреА рдпрд╛рдж рджрд┐рд▓рд╛рддреЗ рд╣реИрдВ <br><br><pre> <code class="plaintext hljs">locks_count | active_session | buffer_content | buffer_mapping ----тАРтАРтАР--тАРтАРтАР+тАР------тАРтАРтАРтАРтАРтАРтАРтАРтАР+тАРтАРтАР------тАРтАРтАРтАРтАРтАРтАР+тАРтАР------тАРтАРтАР 12549 | 1218 | 0 | 15</code> </pre> <br>  рдФрд░ рд╡рд╣ рднреА рдЬреНрдпрд╛рджрд╛ рдирд╣реАрдВред  рдмреА - рдкреЗрдбрд╝ рдЕрдм рдПрдХ рдЕрдбрд╝рдЪрди рдирд╣реАрдВ рд╣реИред  <code>heap-</code> рд╡рд┐рд╕реНрддрд╛рд░ рд╕рд╛рдордиреЗ рдЖрдпрд╛ред <br><br><h3>  рдЕрдВрддрд░рд╛рддреНрдорд╛ рдХрд╛ рдЙрдкрдЪрд╛рд░ </h3><br>  рдЕрдЧрд▓рд╛, рд╕рд┐рдХрдВрджрд░ рдиреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдФрд░ рд╕рдорд╛рдзрд╛рди рдХреЛ рдЖрдЧреЗ рд░рдЦрд╛: <br><br>  <code>buffer parittion lock</code> рд╕рдордп <code>buffer parittion lock</code> рдкрд░ рд╣рдо рдмрд╣реБрдд рд╕рдордп рдЗрдВрддрдЬрд╛рд░ рдХрд░рддреЗ рд╣реИрдВред  рд╢рд╛рдпрдж рдПрдХ рд╣реА <code>buffer parittion lock</code> рдкрд░ рдХреБрдЫ рдмрд╣реБрдд рдорд╛рдВрдЧ рд╡рд╛рд▓рд╛ рдкреГрд╖реНрда рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреБрдЫ <code>BтАРtree</code> рдХреА рдЬрдбрд╝ред  рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░ рд░реАрдбрд┐рдВрдЧ рдЕрдиреБрд░реЛрдзреЛрдВ рд╕реЗ <code>shared lock</code> рд▓рд┐рдП рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рдПрдХ рдирд┐рд░рдВрддрд░ рдкреНрд░рд╡рд╛рд╣ рд╣реИред <br><br>  <code>LWLock</code> рдкрд░ рдкреНрд░рддреАрдХреНрд╖рд╛ рд░реЗрдЦрд╛ "рдЙрдЪрд┐рдд рдирд╣реАрдВ рд╣реИред"  рдЪреВрдВрдХрд┐ <code>shared lock</code> рдХреЛ рдПрдХ рд╣реА рдмрд╛рд░ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХрддрд╛рдиреБрд╕рд╛рд░ рд▓рд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдлрд┐рд░ рдпрджрд┐ <code>shared lock</code> рдкрд╣рд▓реЗ рд╣реА рд▓реЗ рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдмрд╛рдж рдореЗрдВ <code>shared lock</code> рдмрд┐рдирд╛ рдХрддрд╛рд░ рдХреЗ рдкрд╛рд╕ рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдпрджрд┐ рд╕рд╛рдЭрд╛ рдХрд┐рдП рдЧрдП рддрд╛рд▓реЛрдВ рдХреА рдзрд╛рд░рд╛ рдкрд░реНрдпрд╛рдкреНрдд рддреАрд╡реНрд░рддрд╛ рдХреА рд╣реИ, рддрд╛рдХрд┐ рдЙрдирдХреЗ рдмреАрдЪ рдХреЛрдИ "рдЦрд┐рдбрд╝рдХрд┐рдпрд╛рдВ" рди рд╣реЛрдВ, рддреЛ рдПрдХ <code>exclusive lock</code> рдЗрдВрддрдЬрд╛рд░ рд▓рдЧрднрдЧ рдЕрдирдВрдд рддрдХ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЗрд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдкреЗрд╢рдХрд╢ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ - рддрд╛рд▓реЗ рдХреЗ "рдХреЛрдорд▓рддрд╛ рд╕реЗ" рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рдПрдХ рдкреИрдЪред  рдпрд╣ <code>shared locker</code> рдХреЗ рд╡рд┐рд╡реЗрдХ рдХреЛ рдЬрд╛рдЧреГрдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╡реЗ рдИрдорд╛рдирджрд╛рд░реА рд╕реЗ рдХрддрд╛рд░ рдореЗрдВ <code>hwlock</code> , рдЬрдм рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ <code>exclusive lock</code> (рджрд┐рд▓рдЪрд╕реНрдк рд░реВрдк рд╕реЗ, рднрд╛рд░реА рддрд╛рд▓реЗ - <code>hwlock</code> - рд╡рд┐рд╡реЗрдХ рдХреЗ рд╕рд╛рде рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИ: рд╡реЗ рд╣рдореЗрд╢рд╛ рдИрдорд╛рдирджрд╛рд░реА рд╕реЗ рдХрддрд╛рд░ рдореЗрдВ рд░рд╣рддреЗ рд╣реИрдВ) <br><br><pre> <code class="plaintext hljs">locks_count | active_session | buffer_content | buffer_mapping | reladdextra | inserts&gt;30sec тАРтАРтАРтАРтАРтАР-тАРтАРтАРтАРтАР+тАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАР+тАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАР+тАРтАРтАРтАРтАРтАРтАРтАРтАРтАРтАР--тАР-тАР+тАРтАРтАРтАРтАРтАР-тАРтАРтАРтАРтАРтАР+тАРтАРтАРтАР------ 173985 | 1802 | 0 | 569 | 0 | 0</code> </pre> <br>  рд╕рдм рдареАрдХ рд╣реИ!  рд▓рдВрдмреЗ <code>insert</code> рдирд╣реАрдВ <code>insert</code> ред  рдпрджреНрдпрдкрд┐ рд╣реИрд╢ рдкреНрд▓реЗрдЯреЛрдВ рдХреЗ рдЯреБрдХрдбрд╝реЛрдВ рдкрд░ рддрд╛рд▓реЗ рдмрдиреЗ рд░рд╣реЗред  рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рдХрд░реЗрдВ, рдпреЗ рд╣рдорд╛рд░реЗ рдЫреЛрдЯреЗ рд╕реБрдкрд░ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЗ рдЯрд╛рдпрд░реЛрдВ рдХреЗ рдЧреБрдг рд╣реИрдВред <br><br>  рдЗрд╕ рдкреИрдЪ рдХреЛ <a href="">рд╕рдореБрджрд╛рдп</a> рдХреЛ рднреА <a href="">рдкреЗрд╢ рдХрд┐рдпрд╛</a> рдЧрдпрд╛ рдерд╛ред  рд▓реЗрдХрд┐рди рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ рдХрд┐ рд╕рдореБрджрд╛рдп рдореЗрдВ рдЗрди рдкреИрдЪ рдХрд╛ рднрд╛рдЧреНрдп рдХреИрд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рдХреБрдЫ рднреА рдЙрдиреНрд╣реЗрдВ <b>рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬ рдкреНрд░реЛ рдПрдВрдЯрд░рдкреНрд░рд╛рдЗрдЬ</b> рдХреЗ рдЕрдЧрд▓реЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИ, рдЬреЛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рднрд╛рд░реА рд▓реЛрдб рд╡рд╛рд▓реЗ рд╕рд┐рд╕реНрдЯрдо рд╡рд╛рд▓реЗ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдП рдЧрдП рд╣реИрдВред <br><br><h3>  рдиреИрддрд┐рдХрддрд╛ </h3><br>  рдЙрдЪреНрдЪ-рдиреИрддрд┐рдХ рд╣рд▓реНрдХреЗ <code>share</code> - рддрд╛рд▓реЗ - <code>share</code> рдХрддрд╛рд░ рдХреЛ рд▓рдВрдШрди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдмреНрд▓реЙрдХ рдиреЗ рдмрд╣реБ-рдиреЛрдб рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдкреНрд░рддрд┐ рдШрдВрдЯрд╛ рджреЗрд░реА рдХреА рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд┐рдпрд╛ рд╣реИред  <code>buffer manager</code> рд╣реИрд╢ рдЯреИрдЧ рдиреЗ рдмрд╣реБрдд рдЕрдзрд┐рдХ <code>share lock</code> рдлреНрд▓реЛ рдХреЗ рдХрд╛рд░рдг рдХрд╛рдо рдирд╣реАрдВ рдХрд┐рдпрд╛, рдЬрд┐рд╕рд╕реЗ рдкреБрд░рд╛рдиреЗ рдмрдлрд╝рд░реНрд╕ рдХреЛ рджрдмрд╛рдиреЗ рдФрд░ рдирдП рд▓реЛрдЧреЛрдВ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд▓реЙрдХ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдореМрдХрд╛ рдирд╣реАрдВ рдмрдЪрд╛ред  рдбреЗрдЯрд╛рдмреЗрд╕ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдмрдлрд░ рдХреЗ рд╡рд┐рд╕реНрддрд╛рд░ рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдПрдВ рдХреЗрд╡рд▓ рдЗрд╕рдХрд╛ рдПрдХ рдкрд░рд┐рдгрд╛рдо рдереАред  рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ, <code>B-tree</code> рд░реВрдЯ рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рд╕рд╛рде рдЕрдбрд╝рдЪрди рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рдирд╛ рд╕рдВрднрд╡ рдерд╛ред <br><br>  PostgreSQL NUMA рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдФрд░ рд╕реБрдкрд░ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЗрд╕ рддрд░рд╣ рдХреЗ рдкреЛрд╕реНрдЯрдЧреНрд░реИрдЬ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдХреЛ рдЕрдкрдирд╛рдирд╛ рдПрдХ рдмрд╣реБрдд рдмрдбрд╝рд╛ рдХрд╛рдо рд╣реИ, рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдХрдИ рд▓реЛрдЧреЛрдВ рдФрд░ рдХрдВрдкрдирд┐рдпреЛрдВ рдХреЗ рд╕рдордиреНрд╡рд┐рдд рдкреНрд░рдпрд╛рд╕реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА (рдФрд░ рд╕рдВрднрд╡рддрдГ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА)ред  рд▓реЗрдХрд┐рди рдЗрди рд╡рд╛рд╕реНрддреБ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рдЕрдкреНрд░рд┐рдп рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рдХрдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдФрд░ рд╣рдореЗрдВ рдпрд╣ рдХрд░рдирд╛ рд╣реЛрдЧрд╛: рдЬрд┐рди рдкреНрд░рдХрд╛рд░ рдХреЗ рднрд╛рд░реЛрдВ рдХреЗ рдХрд╛рд░рдг рджреЗрд░реА рд╣реБрдИ, рдЙрдирдХрд╛ рд╡рд░реНрдгрди рдмрд╣реБрдд рд╣реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реИ, рдЕрдиреНрдп рд╕реНрдерд╛рдиреЛрдВ рд╕реЗ рднреА рдЗрд╕реА рддрд░рд╣ рдХреЗ рд╕рдВрдХрдЯ рдХреЗ рд╕рдВрдХреЗрдд рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЖрддреЗ рд░рд╣рддреЗ рд╣реИрдВред  рдЗрд╕реА рддрд░рд╣ рдХреА рдкрд░реЗрд╢рд╛рдиреА рдкрд╣рд▓реЗ рджрд┐рдЦрд╛рдИ рджреА - рдХрдо рдХреЛрд░ рд╡рд╛рд▓реЗ рд╕рд┐рд╕реНрдЯрдо рдкрд░, рдмрд╕ рдкрд░рд┐рдгрд╛рдо рдЗрддрдиреЗ рд░рд╛рдХреНрд╖рд╕реА рдирд╣реАрдВ рдереЗ, рдФрд░ рд▓рдХреНрд╖рдгреЛрдВ рдХрд╛ рдЗрд▓рд╛рдЬ рдЕрдиреНрдп рддрд░реАрдХреЛрдВ рдФрд░ рдЕрдиреНрдп рдкреИрдЪ рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЕрдм рдПрдХ рдФрд░ рджрд╡рд╛ рджрд┐рдЦрд╛рдИ рджреА рд╣реИ - рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧреА рд╣реИред <br><br>  рдЗрд╕рд▓рд┐рдП, рдЬрдм PostgreSQL рд╕реНрдерд╛рдиреАрдп рдХреЗ рд░реВрдк рдореЗрдВ рдкреВрд░реЗ рд╕рд┐рд╕реНрдЯрдо рдХреА рдореЗрдореЛрд░реА рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рддреЛ рдиреЛрдбреНрд╕ рдХреЗ рдмреАрдЪ рдХреЛрдИ рд╣рд╛рдИ-рд╕реНрдкреАрдб рдмрд╕ рд╕реНрдерд╛рдиреАрдп рдореЗрдореЛрд░реА рдХреЗ рдПрдХреНрд╕реЗрд╕ рдЯрд╛рдЗрдо рдХреЗ рд╕рд╛рде рддреБрд▓рдирд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреА рд╣реИред  рдЗрд╕ рдХрдард┐рди, рдЕрдХреНрд╕рд░ рдЬрд░реВрд░реА, рд▓реЗрдХрд┐рди рджрд┐рд▓рдЪрд╕реНрдк рдХреЗ рдХрд╛рд░рдг рдХрд╛рд░реНрдп рдЙрддреНрдкрдиреНрди рд╣реЛрддреЗ рд╣реИрдВред  рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╣рд▓ рдХрд░рдиреЗ рдХрд╛ рдЕрдиреБрднрд╡ рди рдХреЗрд╡рд▓ рдирд┐рд░реНрдгрд╛рдпрдХ рдХреЗ рд▓рд┐рдП, рдмрд▓реНрдХрд┐ рдкреВрд░реЗ рд╕рдореБрджрд╛рдп рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИред <br><br><img src="https://habrastorage.org/webt/od/n1/sf/odn1sf_id7l60ezlyo-padxymmi.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi423685/">https://habr.com/ru/post/hi423685/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi423657/index.html">рдореИрдВ рдЬрд▓реНрджреА рд╕реЗ рдирд┐рдЬреА рддрд░реАрдХреЛрдВ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдирдХреИрдкреНрд╕реБрд▓реЗрд╢рди рдХрд╛ рд╕рдореНрдорд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реВрдВ, рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рдкреНрд░рдХрд╛рд░ рдХреА рд╡рд┐рдзрд┐ рддрд╛рд▓рд┐рдХрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реВрдВ</a></li>
<li><a href="../hi423663/index.html">рд╣рдо рд▓рд┐рд╕реНрдк - III рдореЗрдВ рдПрдХ рд╕рд░рд▓ рдЕрдиреБрд╡рд╛рджрдХ рд▓рд┐рдЦрддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi423667/index.html">рдкрд╣рд▓рд╛ рдорд╛рдЗрдХреНрд░реЛрдкреНрд░реЛрд╕реЗрд╕рд░ рд╡реАрдбрд┐рдпреЛ рдЧреЗрдо рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕</a></li>
<li><a href="../hi423679/index.html">рдПрдХ рдЧрдЧрдирдЪреБрдВрдмреА рдЗрдорд╛рд░рдд рдФрд░ рдЕрдВрдбреЗ рдХреЗ рд╕рд╛рде рдПрдХ рдХрд╛рд░реНрдп - рдиреНрдпреВрдЯрди рдХреЗ рдмрд┐рди рдирд╣реАрдВ?</a></li>
<li><a href="../hi423683/index.html">рд╕рд╛рдорд╛рдиреНрдп рдЬреНрдЮрд╛рди рдХреЗ рдЖрдзрд╛рд░ рдкрд░: рдЦрд░реЛрдВрдЪ рд╕реЗ рдмрдврд╝рддреЗ DevOps</a></li>
<li><a href="../hi423687/index.html">рд╣рд╛рдЗрдкрд░рдПрдХреНрд╕ рдкрд▓реНрд╕рдлрд╛рдпрд░ рдПрдлрдкреАрдПрд╕ рдкреНрд░реЛ - рддреЗрдЬ, рдЕрд░реНрдердкреВрд░реНрдг, рдЕрдзрд┐рдХ рд╕рд╕реНрддреА</a></li>
<li><a href="../hi423689/index.html">рдЖрд░рдЯреАрдУрдПрд╕ рдореИрдХреНрд╕ - рдореБрдлреНрдд? рд╣рдорд╛рд░реА рдирд┐: рд╢реБрд▓реНрдХ рд╡рд╛рдгрд┐рдЬреНрдпрд┐рдХ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рд▓рд╛рдЗрд╕реЗрдВрд╕ рдЦреЛрд▓рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рд╣реИ</a></li>
<li><a href="../hi423693/index.html">рд╡реЗрдмрдкреИрдХ 4 рдФрд░ рдХреЛрдб рдкреГрдердХреНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рджреВрд╕рд░рд╛ рддрд░реАрдХрд╛</a></li>
<li><a href="../hi423695/index.html">рдмреИрдВрдХ рдЦрд╛рддреЗ рдореЗрдВ рдПрдХ рдорд┐рд▓рд┐рдпрди рдбреЙрд▓рд░ рдХреЗ рд╕рд╛рде 40 рд╕рд╛рд▓ рд╕реЗ рдкрд╣рд▓реЗ рд░рд┐рдЯрд╛рдпрд░ рдХреИрд╕реЗ рдХрд░реЗрдВ</a></li>
<li><a href="../hi423697/index.html">рдкреНрд░рд╕реНрддреБрдд рд╣реИ рд╕реНрдкреНрд░рд┐рдВрдЧ рдбрд╛рдЯрд╛ JDBC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>