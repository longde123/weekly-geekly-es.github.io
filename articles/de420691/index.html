<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëû üßòüèΩ üèÖ Kivy. Xamarin Native reagieren. Drei Frameworks - ein Experiment üçΩÔ∏è üïµüèº ü§¥üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gr√º√üe an alle! Sobald der Rauch der hitzigen Diskussion in den Kommentaren zu meinem Artikel Kivy ein Esel-Framework f√ºr die plattform√ºbergreifende En...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kivy. Xamarin Native reagieren. Drei Frameworks - ein Experiment</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420691/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/zs/ph/zy/zsphzyh0mmbmfwzsfmkdi5tff4w.png"></div><br>  Gr√º√üe an alle!  Sobald der Rauch der hitzigen Diskussion in den Kommentaren zu meinem Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kivy ein Esel-Framework f√ºr die plattform√ºbergreifende Entwicklung Nr. 1</a> ist und unter anderem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ein</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">bemerkenswerter</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kommentar es gemacht hat</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">hielten</a> wir ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Mirimon</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">SeOd</a> ) es f√ºr uns und die Leser interessant, Kivy zu vergleichen. Xamarin.Forms und React Native, die dieselbe Anwendung darauf schreiben, begleiten sie mit dem entsprechenden Artikel √ºber Habr√©, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">R√ºbe auf GitHub</a> und sagen Ihnen ehrlich, wer bei der Implementierung mit welchen Schwierigkeiten konfrontiert war.  Nachdem wir uns im Telegramm versammelt und die Details besprochen hatten, machten wir uns an die Arbeit. <a name="habracut"></a><br><br>  F√ºr diesen Vergleich haben wir uns entschieden, einen einfachen Taskplaner mit drei Bildschirmen zu schreiben.  Es dauert zu lange, den Zustand dieser drei Plattformen heute anhand des Beispiels zu √§ndern, das umfangreicher ist als das von uns gew√§hlte Beispiel, da jeder mit seinen Projekten / bei der Arbeit / zu Hause besch√§ftigt ist.  Trotz der Einfachheit unserer Anwendung k√∂nnen Sie die Prinzipien der Anwendungsentwicklung in jeder Umgebung klar demonstrieren, mit Daten, Benutzeroberfl√§che usw. arbeiten. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Drei Frameworks - ein Experiment.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Xamarin.Forms.</b></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Teil 2</b></a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Drei Frameworks - ein Experiment.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Native reagieren.</b></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Teil 3</b></a> <br><br>  Dieser Artikel ist der erste im Zyklus, daher m√∂chte ich mit dem ToR beginnen, den wir f√ºr uns selbst skizziert haben, damit das Ergebnis √§hnlich ist. <br><br><h3>  Option TK: </h3><br><ul><li>  Notizen sollten nach Projekten strukturiert sein. </li><li>  Notizen k√∂nnen von verschiedenen Personen hinzugef√ºgt werden, daher muss der Autor der Notiz angegeben werden </li><li>  Notizen innerhalb des Projekts m√ºssen hinzugef√ºgt / gel√∂scht / bearbeitet werden. </li><li>  Notizen sollten die Gr√∂√üe des Inhalts haben, jedoch nicht mehr als 150 Pixel </li><li>  Das L√∂schen von Notizen sollte sowohl √ºber das Kontextmen√º der Notiz selbst als auch durch Wischen erfolgen </li></ul><br><h3>  Eine Beispiel-Benutzeroberfl√§che sollte ungef√§hr so ‚Äã‚Äãaussehen: </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9a/59/pe/9a59pegwbpwor9yytkfxwxqd_ue.png"></div><br><div class="spoiler">  <b class="spoiler_title">Bevor Sie beginnen, eine kleine Hilfe zu Kivy:</b> <div class="spoiler_text">  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kivy</a> ist ein plattform√ºbergreifendes Grafikframework in der Programmiersprache Python / Cython, das auf OpenGL ES 2 basiert und auf die Erstellung moderner Benutzeroberfl√§chen abzielt, die sich mehr auf die Arbeit mit Touch-Ger√§ten konzentrieren.</i>  <i>Kivy-Apps laufen auf Plattformen wie Linux, OS X, Windows, Android, iOS und Rapberry Pi.</i>  <i>In der Entwicklung haben Sie Zugriff auf eine Vielzahl von Python-Bibliotheken, die von Requests √ºber NumPy bis hin zu OpenCV reichen.</i>  <i>Kivy hat √ºber PyJNIus (Android) und PyOBJus (iOS) Zugriff auf fast alle nativen mobilen APIs (GPS, Kamera, Beschleunigungsmesser, Google API f√ºr Android), die automatisch Java / Objective-C-Code in Python einbinden .</i> <i><br><br></i>  <i>Kivy ist schnell.</i>  <i>Dies gilt sowohl f√ºr die Anwendungsentwicklung als auch f√ºr die Geschwindigkeit der Anwendungsausf√ºhrung.</i>  <i>Alle kritischen Funktionen werden auf C-Ebene implementiert.</i>  <i>Kivy verwendet die GPU auch dort, wo es Sinn macht.</i>  <i>Die GPU erledigt den gr√∂√üten Teil der Arbeit und steigert die Leistung erheblich.</i> <i><br><br></i>  <i>Kivy ist sehr flexibel.</i>  <i>Dies bedeutet, dass Sie sich dank der rasanten Entwicklung von Kivy sofort an neue Technologien anpassen k√∂nnen.</i>  <i>Kivy-Entwickler haben wiederholt Unterst√ºtzung f√ºr neue externe Ger√§te und Softwareprotokolle hinzugef√ºgt, manchmal sogar noch vor ihrer Ver√∂ffentlichung.</i>  <i>Kivy kann in Verbindung mit vielen verschiedenen L√∂sungen von Drittanbietern verwendet werden.</i>  <i>Unter Windows unterst√ºtzt Kivy beispielsweise WM_TOUCH. Dies bedeutet, dass jedes Ger√§t mit Windows 7 Pen &amp; Touch-Treibern mit Kivy funktioniert.</i>  <i>Unter OS X k√∂nnen Sie Apple-Ger√§te mit Multi-Touch-Unterst√ºtzung verwenden, z. B. Trackpads und M√§use.</i>  <i>Unter Linux k√∂nnen Sie HID-Eingabe-Eingabeereignisse verwenden.</i>  <i>Dar√ºber hinaus unterst√ºtzt Kivy TUIO (Tangible User Interface Objects) und eine Reihe anderer Eingabequellen.</i> <i><br><br></i>  <i>Sie k√∂nnen eine einfache Anwendung mit wenigen Codezeilen schreiben.</i>  <i>Kivy-Programme werden mit der Programmiersprache Python erstellt, die unglaublich vielseitig und leistungsstark ist, aber einfach zu bedienen ist.</i>  <i>Dar√ºber hinaus haben Kivy-Entwickler ihre eigene GUI-Markup-Sprache erstellt, um anspruchsvolle benutzerdefinierte GUIs zu erstellen.</i>  <i>Mit dieser Sprache k√∂nnen Sie die Elemente der Anwendung schnell konfigurieren, verbinden und organisieren.</i> <i><br><br></i>  <i>Und ja, Kivy ist v√∂llig frei.</i>  <i>Sie k√∂nnen es √ºberall verwenden!</i>  <i>In einem kommerziellen Produkt oder in Open Source.</i> <br></div></div><br>  Ich werde den gesamten Anwendungscode angeben und ausreichend detailliert zeigen, wie diese oder jene Elemente bei der Entwicklung f√ºr mobile Plattformen implementiert werden.  Als IDE verwende ich immer <i>PyCharm</i> , das die <b>Kv-Sprachsyntax</b> perfekt unterst√ºtzt - eine spezielle DSL-Sprache, in der die UI-Darstellung Ihrer Anwendung geschrieben ist.  Das Skelett der Anwendung wurde mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Consor-</a> Dienstprogramm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CreatorKivyProject erstellt</a> , das grundlegende Bildschirme mithilfe der MVVM-Vorlage bereitstellt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i5/de/m1/i5dem1ryi468aeeeo60_tjnxpke.png"></div><br>  Der <b>Basisklassenordner</b> enth√§lt die Logik von Widgets und Steuerelementen, die in der Programmiersprache Python implementiert sind, in <b>kv-</b> Schnittstellenbeschreibungsdateien in der <i>Kv-Sprache</i> .  Das Verzeichnis <b>applibs wird</b> f√ºr Bibliotheken von <b>Drittanbietern</b> verwendet. Im <b>Datenordner</b> befinden sich Medieninhalte, Datenbanken und andere Daten.  Die Datei <b>main.py</b> ist der Einstiegspunkt der Anwendung.  Er startet nur die Benutzeroberfl√§che <b>TodoList (). Run ()</b> render, f√§ngt einen Fehler ab, wenn er auftritt, und zeigt ein Fenster zum Senden eines Fehlerberichts an, der automatisch vom Dienstprogramm <i>CreatorKivyProject erstellt</i> wurde. Er hat nichts mit dem Schreiben unserer Anwendung zu tun und wird daher nicht ber√ºcksichtigt. <br><br>  Die Datei <b>todolist.py</b> mit dem Programmcode implementiert die <b>TodoList-</b> Klasse, die die Schnittstellenlayouts l√§dt, ihre Instanzen initialisiert, die Ereignisse der <b>Hardkeys</b> des Ger√§ts √ºberwacht und unseren ersten Bildschirm zur√ºckgibt, der im Aktivit√§tsmanager aufgef√ºhrt ist.  Nach <b>TodoList (). Run ()</b> wird die <b>Build-</b> Funktion aufgerufen und gibt das Widget zur√ºck, das auf dem Bildschirm angezeigt wird. <br><br>  Der Code f√ºr ein einfaches Programm, das einen einzelnen Bildschirm mit einem Bild anzeigt, sieht beispielsweise folgenderma√üen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1e/dc/wi/1edcwilpi3ejmykf6qiqjvhftcy.png"></div><br>  Und hier ist das Diagramm unserer Anwendungsklasse: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sv/9j/8n/sv9j8npirktg3qeglec4vclue4i.png"></div><br><div class="spoiler">  <b class="spoiler_title">todolist.py:</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- import os from kivy.app import App from kivy.lang import Builder from kivy.core.window import Window from kivy.factory import Factory from libs.applibs.kivymd.theming import ThemeManager from libs.dataBase import DataBase class TodoList(App, DataBase): title = 'Todo List' icon = 'icon.png' theme_cls = ThemeManager() theme_cls.primary_palette = 'BlueGrey' def __init__(self, **kvargs): super(TodoList, self).__init__(**kvargs) Window.bind(on_keyboard=self.eventsProgram) Window.softinput_mode = 'below_target' self.Window = Window self.pathToBase = '%s/data/dataProjects.json' % self.directory self.nameAuthor = u' ' def build(self): self.setDataProjects() self.loadAllKvFiles(os.path.join(self.directory, 'libs', 'uix', 'kv')) self.rootScreen = Factory.RootScreen() #    #  Activity. self.activityManager = self.rootScreen.ids.activityManager self.listProjectsActivity = self.rootScreen.ids.listProjectsActivity self.listNotesActivity = self.rootScreen.ids.listNotesActivity self.addNewNoteActivity = self.rootScreen.ids.addNewNoteActivity return self.rootScreen def loadAllKvFiles(self, directory_kv_files): for kv_file in os.listdir(directory_kv_files): kv_file = os.path.join(directory_kv_files, kv_file) if os.path.isfile(kv_file): Builder.load_file(kv_file) def on_start(self): self.listProjectsActivity.setListProjects(self) def eventsProgram(self, instance, keyboard, keycode, text, modifiers): if keyboard in (1001, 27): if self.activityManager.current == 'add new note activity': self.activityManager.backActivity( 'list notes activity', self.addNewNoteActivity.ids.floatingButton) if self.activityManager.current == 'list notes activity': self.activityManager.current = 'list project activity' return True</span></span></code> </pre> <br></div></div><br>  Unsere Anwendung besteht nur aus drei <i>Aktivit√§ten</i> . Der Screen Manager ( <i>ScreenMenager</i> ), den wir zu den <b>Build-</b> Funktionen zur√ºckgegeben haben, ist f√ºr das <b>Umschalten verantwortlich</b> : <br><br><pre> <code class="hljs scala">#:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">ListProjectsActivity</span></span> libs.uix.baseclass.<span class="hljs-type"><span class="hljs-type">ListProjectsActivity</span></span>.<span class="hljs-type"><span class="hljs-type">ListProjectsActivity</span></span> #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">ListNotesActivity</span></span> libs.uix.baseclass.<span class="hljs-type"><span class="hljs-type">ListNotesActivity</span></span>.<span class="hljs-type"><span class="hljs-type">ListNotesActivity</span></span> #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">AddNewNoteActivity</span></span> libs.uix.baseclass.<span class="hljs-type"><span class="hljs-type">AddNewNoteActivity</span></span>.<span class="hljs-type"><span class="hljs-type">AddNewNoteActivity</span></span> #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">ActivityManager</span></span> libs.uix.baseclass.<span class="hljs-type"><span class="hljs-type">ActivityManager</span></span>.<span class="hljs-type"><span class="hljs-type">ActivityManager</span></span> &lt;<span class="hljs-type"><span class="hljs-type">RootScreen</span></span><span class="hljs-meta"><span class="hljs-meta">@BoxLayout</span></span>&gt;: orientation: <span class="hljs-symbol"><span class="hljs-symbol">'vertica</span></span>l' spacing: dp(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-type"><span class="hljs-type">ActivityManager</span></span>: id: activityManager <span class="hljs-type"><span class="hljs-type">ListProjectsActivity</span></span>: id: listProjectsActivity <span class="hljs-type"><span class="hljs-type">ListNotesActivity</span></span>: id: listNotesActivity <span class="hljs-type"><span class="hljs-type">AddNewNoteActivity</span></span>: id: addNewNoteActivity</code> </pre><br>  Wenn die Anwendung gestartet wird, wird die Aktivit√§t installiert, die zuerst im ActivityManager angegeben wurde.  In unserem Fall ist es <i>ListProjectsActivity</i> .  In der Anwendung f√ºr Listen von Projekten und Aufgaben habe ich <i>ScrollView verwendet</i> .  Obwohl es korrekter war - <i>RecycleView</i> .  Denn das erste, wenn es √ºber hundert Beitr√§ge und Projekte gibt, kann es nicht.  Genauer gesagt wird das Rendern von Listen sehr lange dauern.  <i>Mit RecycleView</i> k√∂nnen <i>Sie</i> Listen beliebiger L√§nge fast sofort anzeigen.  Da Sie bei gro√üen Listen in jedem Fall entweder das dynamische Laden von Daten in eine Liste oder die Paginierung verwenden <i>m√ºssten</i> , dies jedoch im TOR nicht erl√§utert wurde, habe ich <i>ScrollView verwendet</i> .  Der zweite Grund ist, dass ich zu faul war, um die Listen unter <i>RecycleView</i> zu wiederholen (und es unterscheidet sich <i>grundlegend</i> von <i>ScrollView</i> ), und es blieb nicht viel Zeit, da die gesamte Anwendung in vier Stunden in Rauchpausen und Kaffeepausen geschrieben wurde. <br><br>  Der Startbildschirm mit einer Liste von Projekten (ListProjectsActivity.kv und ListProjectsActivity.py) sieht folgenderma√üen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4g/lu/i4/4glui4eyzptivo76zrmmqj_amqw.png"></div><br>  Da das Layout des ListProjectsActivity-Bildschirms bereits auf dem Bildschirm angezeigt wird, werde ich zeigen, wie seine Steuerungsklasse aussieht: <br><br><pre> <code class="hljs pgsql"># -*- coding: utf<span class="hljs-number"><span class="hljs-number">-8</span></span> -*- <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.app <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.uix.screenmanager <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Screen <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Activity <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> libs.uix.baseclass.InputDialog <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> InputDialog <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> . ProjectItem <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ProjectItem <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> ListProjectsActivity(Activity): objApp = App.get_running_app() def setListProjects(self, objApp): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> nameProject <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> objApp.dataProjects.keys(): self.ids.layoutContainer.add_widget(ProjectItem(projectName=nameProject)) def createNewProject(self, projectName): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> projectName <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> projectName.isspace(): self.ids.layoutContainer.add_widget(ProjectItem(projectName=projectName)) self.objApp.addProjectInBase(projectName) def deleteProject(self, instance): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> projectName <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.objApp.dataProjects: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> instance.projectName == projectName: self.objApp.deleteProjectFromBase(projectName) break def showDialogCreateProject(self, *args): InputDialog( title=<span class="hljs-string"><span class="hljs-string">' '</span></span>, hintText=<span class="hljs-string"><span class="hljs-string">' '</span></span>, textButtonCancel=<span class="hljs-string"><span class="hljs-string">''</span></span>, textTuttonOk=<span class="hljs-string"><span class="hljs-string">''</span></span>, eventsCallback=self.createNewProject).<span class="hljs-keyword"><span class="hljs-keyword">show</span></span>()</code> </pre><br>  Dialogfeldaufruf: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bt/t1/kj/btt1kjdoddave7eoowlvhxigdpq.png"></div><br>  In der Arbeit sieht das Aufrufen des Fensters und das Erstellen eines neuen Projekts folgenderma√üen aus: <br><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/gh/hm/teghhm6op9paveubdsjwh0m_d60.gif"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/uz/v7/hl/uzv7hllrtghzrnw-rj0i7e7xnds.gif"></div></td></tr></tbody></table><br>  Ich werde nicht auf die Frage nach Anwendungsdaten eingehen, da die Daten ein regul√§res W√∂rterbuch des Formulars sind <br><br><pre> <code class="python hljs">{<span class="hljs-string"><span class="hljs-string">"Name Project"</span></span>: [{<span class="hljs-string"><span class="hljs-string">"pathToAvatar"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"nameDate"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"nameAuthor"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"textNote"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>}]}</code> </pre> <br>  und die im <b>Datenverzeichnis</b> als einfache JSON-Datei gespeichert ist. <br><br>  Mal sehen, was das Element mit dem Projektnamen ist und wie man mit Kivy ein Element durch Wischen aus der Liste l√∂scht.  Dazu m√ºssen wir das Verhalten des Widgets in der Liste von der <i>SwipeBehavior-</i> Klasse der <i>SwipeToDelete-</i> Bibliothek <i>erben</i> : <br><br>  <b>ProjectItemActivity.py</b> <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.properties <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> StringProperty <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.uix.boxlayout <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> BoxLayout <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> libs.applibs.swipetodelete <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SwipeBehavior <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProjectItemActivity</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(SwipeBehavior, BoxLayout)</span></span></span><span class="hljs-class">:</span></span> projectName = StringProperty() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_touch_down</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, touch)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.collide_point(touch.x, touch.y): self.move_to = self.x, self.y <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super(ProjectItemActivity, self).on_touch_down(touch) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_touch_move</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, touch)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.collide_point(touch.x, touch.y): self.reduce_opacity() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super(ProjectItemActivity, self).on_touch_move(touch) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_touch_up</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, touch)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.collide_point(touch.x, touch.y): self.check_for_left() self.check_for_right() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super(ProjectItemActivity, self).on_touch_up(touch)</code> </pre><br>  Und die Beschreibung des Projektelements im Kv-Markup: <br><br>  <b>ProjectItemActivity.kv</b> <br><pre> <code class="hljs css">&lt;<span class="hljs-selector-tag"><span class="hljs-selector-tag">ProjectItemActivity</span></span>&gt;: <span class="hljs-selector-tag"><span class="hljs-selector-tag">swipe_rectangle</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">self</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.x</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">self</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.y</span></span> , <span class="hljs-selector-tag"><span class="hljs-selector-tag">self</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.width</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">self</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.height</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">swipe_timeout</span></span>: 1000000 <span class="hljs-selector-tag"><span class="hljs-selector-tag">swipe_distance</span></span>: 1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">event_after_swipe</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">app</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.listActivity</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.deleteProject</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">OneLineListItem</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">text</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">root</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.projectName</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">on_press</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">app</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.listActivity</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.setNotesProject</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">root</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.projectName</span></span>)</code> </pre><br>  Im Allgemeinen verf√ºgt jedes Widget in Kivy √ºber eine <b><i>on_touch-</i></b> Methode, mit der Sie alle Ereignisse <b><i>erfassen</i></b> k√∂nnen, die auf dem Bildschirm auftreten.  Hier ist ein kleiner Teil der Liste der verf√ºgbaren Veranstaltungen: <br><br><pre> <code class="python hljs">[<span class="hljs-string"><span class="hljs-string">'double_tap_time'</span></span>, <span class="hljs-string"><span class="hljs-string">'grab_state'</span></span>, <span class="hljs-string"><span class="hljs-string">'is_double_tap'</span></span>, <span class="hljs-string"><span class="hljs-string">'is_mouse_scrolling'</span></span>, <span class="hljs-string"><span class="hljs-string">'is_touch'</span></span>, <span class="hljs-string"><span class="hljs-string">'is_triple_tap'</span></span>, <span class="hljs-string"><span class="hljs-string">'move'</span></span>, <span class="hljs-string"><span class="hljs-string">'push'</span></span>, <span class="hljs-string"><span class="hljs-string">'push_attrs'</span></span>, <span class="hljs-string"><span class="hljs-string">'push_attrs_stack'</span></span>, <span class="hljs-string"><span class="hljs-string">'scale_for_screen'</span></span>, <span class="hljs-string"><span class="hljs-string">'time_end'</span></span>, <span class="hljs-string"><span class="hljs-string">'time_start'</span></span>, <span class="hljs-string"><span class="hljs-string">'time_update'</span></span>, <span class="hljs-string"><span class="hljs-string">'triple_tap_time'</span></span>, <span class="hljs-string"><span class="hljs-string">'ungrab'</span></span>, <span class="hljs-string"><span class="hljs-string">'update_time_end'</span></span>]</code> </pre><br><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/zz/bl/rl/zzblrlviduost-tycdnpvs-xyy0.gif"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/bd/dv/ml/bddvmlttyqkolsl5a-cy2r9a6vc.gif"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/nm/i0/fw/nmi0fw493_feuoafuwzbm4xr7hm.gif"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/kj/yr/9a/kjyr9axwzdywc3tdgkm_eyq9tzo.gif"></div></td></tr></tbody></table><br>  Implementierung des Kontextmen√ºs f√ºr Android ... <br><br>  Auch hier gab es keine Probleme, da dies nur ein Standard-DropDown-Widget ist.  Dank der Tatsache, dass Sie alle Widgets und Steuerelemente in Kivy so anpassen k√∂nnen, wie es Ihre Fantasie zul√§sst, habe ich leicht ein h√ºbsches Men√º erhalten.  Links ist die Basis DropDown, rechts ist meine: <br><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/9r/wh/nm/9rwhnm1vtqz-z9sbkosz-69rnrs.gif"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/hp/oz/xt/hpozxtujdyich9u4u9oh3wmasdw.gif"></div></td></tr></tbody></table><br>  Layout der Kontextmen√ºliste: <br><br>  <b>ContextMenuAndroidActivity.kv</b> <br><pre> <code class="hljs pgsql">#:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MDSeparator libs.applibs.kivymd.card.MDSeparator #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MenuItem libs.applibs.animdropdown.MenuItem &lt;ContextMenuAndroidActivity&gt;: MenuItem: <span class="hljs-type"><span class="hljs-type">text</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> menu: root on_press: root.tapOnItem(self.text) MDSeparator: MenuItem: <span class="hljs-type"><span class="hljs-type">text</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> menu: root on_press: root.tapOnItem(self.text)</code> </pre><br>  Der Software-Teil des Kontextmen√ºs: <br><br>  <b>ContextMenuAndroidActivity.kv</b> <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.app <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.clock <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Clock <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> libs.applibs.animdropdown <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AnimMenuDropDown <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContextMenuAndroidActivity</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(AnimMenuDropDown)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tapOnItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, textItem)</span></span></span><span class="hljs-function">:</span></span> objApp = App.get_running_app() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> textItem == <span class="hljs-string"><span class="hljs-string">''</span></span>: objApp.listActivity.deletePost() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: objApp.activityManager.current = <span class="hljs-string"><span class="hljs-string">'add new note activity'</span></span> Clock.schedule_once(objApp.addNewNoteActivity.editNote, <span class="hljs-number"><span class="hljs-number">.5</span></span>)</code> </pre><br>  Als n√§chstes importieren wir die <i>MenuDropDown-</i> Schaltfl√§che aus der <i>Animdropdown-</i> Bibliothek, √ºbergeben ihr das Objekt unseres Kontextmen√ºs als Parameter und f√ºgen diese Schaltfl√§che anschlie√üend dem <i>gew√ºnschten</i> Bildschirm hinzu.  In unserer Anwendung ist dies die Schaltfl√§che rechts in der Notizkarte: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/27/qr/jt/27qrjtfka-i1bjmtzte93q2iefm.png"></div><br>  Hinweise zur Markup-Aktivit√§tskarte: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/aq/bt/tx/aqbttxbii2mhh-jo6ispppmo6ks.png"></div><br>  <b>Basisklasse NoteActivity</b> : <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.app <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.properties <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> StringProperty <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.uix.boxlayout <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> BoxLayout <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> libs.applibs.animdropdown <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MenuButton <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> libs.applibs.swipetodelete <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SwipeBehavior <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> . ContextMenu <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ContextMenu <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NoteActivity</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(SwipeBehavior, BoxLayout)</span></span></span><span class="hljs-class">:</span></span> nameDate = StringProperty() textNote = StringProperty() pathToAvatar = StringProperty() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, **kwargs)</span></span></span><span class="hljs-function">:</span></span> super(NoteActivity, self).__init__(**kwargs) self.objApp = App.get_running_app() menuButton = MenuButton( dropdown_cls=ContextMenu, icon=<span class="hljs-string"><span class="hljs-string">'dots-vertical'</span></span>, _on_dropdown_fnc=self.setCurrentPost) self.ids.titleBox.add_widget(menuButton) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setCurrentPost</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args)</span></span></span><span class="hljs-function">:</span></span> self.objApp.listNotesActivity.checkCurentPost = self</code> </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ir/y9/vi/iry9vibv89ycgb70uwcb6rensce.png"></div><br>  Software-Implementierung von <b>ListNotesActivity</b> : <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- from kivy.app import App from kivy.uix.screenmanager import Screen as Activity from kivy.properties import ObjectProperty from . NoteActivity import NoteActivity class ListNotesActivity(Activity): checkCurentPost = ObjectProperty() objApp = App.get_running_app() def clearList(self): if self.objApp.activityManager.current == 'list project activity': self.ids.layoutContainer.clear_widgets() def addNewNote(self, objApp): objApp.activityManager.current = 'add new note activity' def setDefaultcheckCurentPost(self): self.checkCurentPost = lambda x: None def setNotesProject(self, nameProject): self.ids.toolBar.title = nameProject for dataProject in self.objApp.dataProjects[nameProject][1]: self.ids.layoutContainer.add_widget(NoteActivity( textNote=dataProject['textNote'], nameDate=dataProject['nameDate'], pathToAvatar=dataProject['pathToAvatar'])) def deletePost(self, instance=None): #  . if not self.checkCurentPost: checkCurentPost = instance else: checkCurentPost = self.checkCurentPost self.ids.layoutContainer.remove_widget(self.checkCurentPost) nameProject = self.ids.toolBar.title self.objApp.deleteNoteFromBase(nameProject, checkCurentPost.textNote) def checkScroll(self): if self.checkCurentPost and type(self.checkCurentPost) is not NoteActivity: self.checkCurentPost(self)</span></span></code> </pre><br>  Wie verwalte ich die Aktivit√§t der Anwendung?  Um von einer Aktivit√§t zu einer anderen zu wechseln, m√ºssen wir dem Bildschirmmanager den Namen der neuen Aktivit√§t mitteilen: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListNotesActivity</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Activity)</span></span></span><span class="hljs-class">:</span></span> ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addNewNote</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args)</span></span></span><span class="hljs-function">:</span></span> self.objApp.activityManager.current = <span class="hljs-string"><span class="hljs-string">'add new note activity'</span></span></code> </pre><br>  ... wobei <i><b>'Neue Notizaktivit√§t hinzuf√ºgen' der</b></i> Name der Aktivit√§t ist, mit der eine neue Notiz hinzugef√ºgt werden soll. <br><br>  Bildschirm und Layout der <b>AddNewNoteActivity-Aktivit√§t</b> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6m/wc/pd/6mwcpd7f5dswgcy8vgcehomb7ci.png"></div><br>  Basisklasse: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.app <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.animation <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Animation <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.uix.screenmanager <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Screen <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Activity <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.metrics <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dp <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> libs.uix.baseclass.NoteActivity <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NoteActivity <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddNewNoteActivity</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Activity)</span></span></span><span class="hljs-class">:</span></span> objApp = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> edit = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> oldTextNote = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">animationButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.objApp = App.get_running_app() self.ids.toolBar.title = self.objApp.listNotesActivity.ids.toolBar.title Animation(size=(dp(<span class="hljs-number"><span class="hljs-number">56</span></span>), dp(<span class="hljs-number"><span class="hljs-number">56</span></span>)), d=<span class="hljs-number"><span class="hljs-number">.5</span></span>, t=<span class="hljs-string"><span class="hljs-string">'in_out_cubic'</span></span>).start(self.ids.floatingButton) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addNewNotes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, textNote)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.edit: nameProject = self.ids.toolBar.title self.objApp.addEditNoteInBase(nameProject, textNote, self.oldTextNote) self.objApp.activityManager.backActivity(<span class="hljs-string"><span class="hljs-string">'list notes activity'</span></span>, self.ids.floatingButton) self.objApp.listNotesActivity.checkCurentPost.textNote = textNote self.edit = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.objApp.listNotesActivity.ids.layoutContainer.add_widget( NoteActivity( textNote=textNote, nameDate=<span class="hljs-string"><span class="hljs-string">'%s\n%s'</span></span> % ( self.objApp.nameAuthor, self.objApp.getDate()), pathToAvatar=<span class="hljs-string"><span class="hljs-string">'data/images/avatar.png'</span></span>)) self.objApp.addNoteInBase(self.ids.toolBar.title, textNote, <span class="hljs-string"><span class="hljs-string">'data/images/avatar.png'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">editNote</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, interval)</span></span></span><span class="hljs-function">:</span></span> self.edit = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> self.ids.textInput.text = self.objApp.listNotesActivity.checkCurentPost.textNote self.oldTextNote = self.ids.textInput.text</code> </pre><br>  Um die Schaltfl√§che zu animieren, habe ich das Ereignis <b>on_enter</b> verwendet, das <b>ausgel√∂st</b> wird, wenn die Aktivit√§t auf dem Bildschirm installiert wird: <br><br>  Im Markup: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AddNewNoteActivity</span></span></span><span class="hljs-tag">&gt;</span></span> on_enter: root.animationButton()</code> </pre><br>  Im Python-Code: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddNewNoteActivity</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Activity)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">animationButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> Animation(size=(dp(<span class="hljs-number"><span class="hljs-number">56</span></span>), dp(<span class="hljs-number"><span class="hljs-number">56</span></span>)), d=<span class="hljs-number"><span class="hljs-number">.5</span></span>, t=<span class="hljs-string"><span class="hljs-string">'in_out_cubic'</span></span>).start(self.ids.floatingButton)</code> </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/we/fj/lq/wefjlq6o_4ohxersgl96zebkxo4.gif"></div><br>  Im Gegensatz zu Xamarin.Forms sieht die Benutzeroberfl√§che in Kivy √ºberall gleich aus.  Wenn Sie also eine Anwendung f√ºr zwei Plattformen (Android und iOS) schreiben, sollten Sie dies ber√ºcksichtigen, wenn Sie die Benutzeroberfl√§che markieren und Eigenschaften f√ºr Widgets angeben.  Oder machen Sie zwei Markups f√ºr zwei Plattformen (die Logik bleibt unver√§ndert).  Dies ist ein Plus, da das Rendern und die Ereignisse der Benutzeroberfl√§che unabh√§ngig von den Funktionen der Plattform sind. Sie verwenden keine nativen APIs, um diese Aktionen zu steuern. Dadurch kann Ihre Anwendung auf nahezu jeder Plattform problemlos ausgef√ºhrt werden.  Alle Grafiken werden mit nativen OpenGL- und SDL2-Aufrufen auf der GPU gerendert, sodass Sie schnell Men√ºs, Schaltfl√§chen und andere Reize der grafischen Oberfl√§che zeichnen k√∂nnen, einschlie√ülich 2D- und 3D-Grafiken. <br><br>  Diese Anwendung verwendet das Android UI MaterialDesign.  Zum Beispiel hatte mein letztes Projekt eine adaptive Schnittstelle: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rm/de/xt/rmdextdb8krmw5ylbk2o7zwailk.png" width="600" height="400"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ev/pv/3_/evpv3_f2ht9oqh3cs7m4htfqdiq.png" width="600" height="400"></div><br>  Hier ist eine Demonstration der M√∂glichkeiten im Stil des Materialdesigns: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Wie bereits erw√§hnt, verwendet Kivy keine nativen APIs zum Rendern der Benutzeroberfl√§che. Daher k√∂nnen Sie mithilfe des <b><i>Bildschirmmoduls</i></b> verschiedene Modelle von Ger√§ten und Plattformen emulieren.  Es reicht aus, Ihr Projekt mit den erforderlichen Parametern auszuf√ºhren, damit das Fenster der getesteten Anwendung auf dem Computer ge√∂ffnet wird, als w√ºrde es auf einem realen Ger√§t ausgef√ºhrt.  Es klingt seltsam, aber da Kivy beim Rendern der Benutzeroberfl√§che von der Plattform abstrahiert, sind keine schweren und langsamen Emulatoren f√ºr Tests erforderlich.  Dies gilt nur f√ºr die Benutzeroberfl√§che.  Beispielsweise wurde die in diesem Artikel beschriebene <b><i>Testanwendung</i></b> mit den Parametern <b><i>-m Bildschirm</i></b> getestet <b><i>: droid2, Portr√§t, Ma√üstab = 0,75</i></b> , die eins zu eins meinem realen Ger√§t entsprechen. <br><br><div class="spoiler">  <b class="spoiler_title">Vollst√§ndige Liste der Parameter des Bildschirmmoduls:</b> <div class="spoiler_text"><pre> <code class="python hljs">devices = { <span class="hljs-comment"><span class="hljs-comment"># device: (name, width, height, dpi, density) 'onex': ('HTC One X', 1280, 720, 312, 2), 'one': ('HTC One', 1920, 1080, 468, 3), 'onesv': ('HTC One SV', 800, 480, 216, 1.5), 's3': ('Galaxy SIII', 1280, 720, 306, 2), 'note2': ('Galaxy Note II', 1280, 720, 267, 2), 'droid2': ('Motorola Droid 2', 854, 480, 240, 1.5), 'xoom': ('Motorola Xoom', 1280, 800, 149, 1), 'ipad': ('iPad (1 and 2)', 1024, 768, 132, 1), 'ipad3': ('iPad 3', 2048, 1536, 264, 2), 'iphone4': ('iPhone 4', 960, 640, 326, 2), 'iphone5': ('iPhone 5', 1136, 640, 326, 2), 'xperiae': ('Xperia E', 480, 320, 166, 1), 'nexus4': ('Nexus 4', 1280, 768, 320, 2), 'nexus7': ('Nexus 7 (2012 version)', 1280, 800, 216, 1.325), 'nexus7.2': ('Nexus 7 (2013 version)', 1920, 1200, 323, 2), # taken from design.google.com/devices # please consider using another data instead of # a dict for autocompletion to work # these are all in landscape 'phone_android_one': ('Android One', 854, 480, 218, 1.5), 'phone_htc_one_m8': ('HTC One M8', 1920, 1080, 432, 3.0), 'phone_htc_one_m9': ('HTC One M9', 1920, 1080, 432, 3.0), 'phone_iphone': ('iPhone', 480, 320, 168, 1.0), 'phone_iphone_4': ('iPhone 4', 960, 640, 320, 2.0), 'phone_iphone_5': ('iPhone 5', 1136, 640, 320, 2.0), 'phone_iphone_6': ('iPhone 6', 1334, 750, 326, 2.0), 'phone_iphone_6_plus': ('iPhone 6 Plus', 1920, 1080, 400, 3.0), 'phone_lg_g2': ('LG G2', 1920, 1080, 432, 3.0), 'phone_lg_g3': ('LG G3', 2560, 1440, 533, 3.0), 'phone_moto_g': ('Moto G', 1280, 720, 327, 2.0), 'phone_moto_x': ('Moto X', 1280, 720, 313, 2.0), 'phone_moto_x_2nd_gen': ('Moto X 2nd Gen', 1920, 1080, 432, 3.0), 'phone_nexus_4': ('Nexus 4', 1280, 768, 240, 2.0), 'phone_nexus_5': ('Nexus 5', 1920, 1080, 450, 3.0), 'phone_nexus_5x': ('Nexus 5X', 1920, 1080, 432, 2.6), 'phone_nexus_6': ('Nexus 6', 2560, 1440, 496, 3.5), 'phone_nexus_6p': ('Nexus 6P', 2560, 1440, 514, 3.5), 'phone_samsung_galaxy_note_4': ('Samsung Galaxy Note 4', 2560, 1440, 514, 3.0), 'phone_samsung_galaxy_s5': ('Samsung Galaxy S5', 1920, 1080, 372, 3.0), 'phone_samsung_galaxy_s6': ('Samsung Galaxy S6', 2560, 1440, 576, 4.0), 'phone_sony_xperia_c4': ('Sony Xperia C4', 1920, 1080, 400, 2.0), 'phone_sony_xperia_z_ultra': ('Sony Xperia Z Ultra', 1920, 1080, 348, 2.0), 'phone_sony_xperia_z1_compact': ('Sony Xperia Z1 Compact', 1280, 720, 342, 2.0), 'phone_sony_xperia_z2z3': ('Sony Xperia Z2/Z3', 1920, 1080, 432, 3.0), 'phone_sony_xperia_z3_compact': ('Sony Xperia Z3 Compact', 1280, 720, 313, 2.0), 'tablet_dell_venue_8': ('Dell Venue 8', 2560, 1600, 355, 2.0), 'tablet_ipad': ('iPad', 1024, 768, 132, 1.0), 'tablet_ipad_mini': ('iPad Mini', 1024, 768, 163, 1.0), 'tablet_ipad_mini_retina': ('iPad Mini Retina', 2048, 1536, 326, 2.0), 'tablet_ipad_pro': ('iPad Pro', 2732, 2048, 265, 2.0), 'tablet_ipad_retina': ('iPad Retina', 2048, 1536, 264, 2.0), 'tablet_nexus_10': ('Nexus 10', 2560, 1600, 297, 2.0), 'tablet_nexus_7_12': ('Nexus 7 12', 1280, 800, 216, 1.3), 'tablet_nexus_7_13': ('Nexus 7 13', 1920, 1200, 324, 2.0), 'tablet_nexus_9': ('Nexus 9', 2048, 1536, 288, 2.0), 'tablet_samsung_galaxy_tab_10': ('Samsung Galaxy Tab 10', 1280, 800, 148, 1.0), 'tablet_sony_xperia_z3_tablet': ('Sony Xperia Z3 Tablet', 1920, 1200, 282, 2.0), 'tablet_sony_xperia_z4_tablet': ('Sony Xperia Z4 Tablet', 2560, 1600, 297, 2.0)TodoList() app.run() }</span></span></code> </pre><br></div></div><br>  Was kann abschlie√üend gesagt werden?  Ist Kivy gut?  Zweifellos gut!  Wenn Sie die wunderbare Programmiersprache Python kennen, k√∂nnen Sie mit dem nicht weniger wunderbaren Kivy-Framework problemlos Anwendungen f√ºr mobile (und nicht nur) Plattformen erstellen. <br><br>  <b>Vorteile der Entwicklung von Anwendungen mit dem Kivy-Framework:</b> <br><br><ul><li>  Da es sich um Python handelt, ist die Entwicklungsgeschwindigkeit von Anwendungen um ein Vielfaches h√∂her als die Entwicklungsgeschwindigkeit in jeder anderen Programmiersprache oder jedem anderen Framework. </li><li>  Megatonnen vorgefertigter Python-Bibliotheken, die Sie in Ihren Projekten verwenden k√∂nnen: <b>OpenCV, Django, Flask, NumPy, ffmpeg, sqlite3, lxml</b> und Tausende anderer. </li><li>  Da Kivy OpenGL und GPU zum Rendern von Grafiken sowie eigene Widgets und Steuerelemente verwendet, ist die Rendergeschwindigkeit der Benutzeroberfl√§che sehr hoch und Sie sind vollst√§ndig von den Kopfschmerzen befreit, die in anderen Frameworks auftreten, die in den nativen Teil gelangen m√ºssen, um einige Teile der Benutzeroberfl√§che zu implementieren. </li><li>  Sie verwenden das native System nur dort, wo Sie Zugriff auf bestimmte Plattformfunktionen ben√∂tigen, die in einem wirklich plattform√ºbergreifenden Framework einfach nicht vorhanden sind: z. B. Zugriff auf die Geolokalisierung, Zugriff auf die Kamera, BlueTooth-Technologie ... <br><br>  Implementieren des Zugriffs auf die native Android-API zum Abrufen von IMEI und Ger√§temodell mithilfe von PyJnius: </li></ul><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_get_model_android</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnius <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> autoclass Build = autoclass(<span class="hljs-string"><span class="hljs-string">'android.os.Build'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str(Build.DEVICE) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_get_imei_android</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> jnius <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> autoclass Service = autoclass(<span class="hljs-string"><span class="hljs-string">'org.renpy.android.PythonActivity'</span></span>).mActivity Context = autoclass(<span class="hljs-string"><span class="hljs-string">'android.content.Context'</span></span>) TelephonyManager = Service.getSystemService(Context.TELEPHONY_SERVICE) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str(TelephonyManager.getDeviceId())</code> </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fw/bi/pm/fwbipmzqlt4iebzxbaap4f_-e0y.gif"></div><br>  Beispiel: Eine Implementierung von nativen IMEI-Empfangsger√§ten in Java: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Context; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.telephony.TelephonyManager; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GetImeiAndroid</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getImeiAndroid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE); String IMEINumber = tm.getDeviceId(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> IMEINumber; } }</code> </pre><br><ul><li>  Sie k√∂nnen JAR-Bibliotheken von Drittanbietern in Ihren Projekten verwenden, wenn es um Android geht. </li><li>  Sie besitzen alle auf dem Bildschirm auftretenden Ereignisse vollst√§ndig: Ber√ºhren, Multitouch, Streichen, Stanzen und andere Ereignisse, ohne zum Eingeborenen zu gehen. Dies ist also ein wesentlicher Bestandteil von Kivy. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Kivy-Funktionen in Touch-Ger√§ten:</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://player.vimeo.com/video/45240986" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://player.vimeo.com/video/40730046" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://player.vimeo.com/video/25680681" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/u4NRu7mBXtA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  <b>Trotz aller Vorteile hat Kivy mehrere Nachteile:</b> <br><br><ul><li>  Die Geschwindigkeit des "Kaltstarts", dh des ersten Starts der Anwendung ab dem Zeitpunkt, an dem alle Bibliotheken bereitgestellt werden, ist ziemlich lang.  Die folgenden sind normal, aber je nach Prozessorlast des Mobilger√§ts l√§nger als die native. </li><li>  Mit Listen arbeiten.  Sie k√∂nnen eine Liste mit einer Gr√∂√üe von 100.000 Elementen in einer halben Sekunde anzeigen (z. B. Benutzerkarten, Schaufenster, Zitate), jedoch unter einer Bedingung: Alle Karten m√ºssen dieselbe H√∂he haben.  Wenn Sie beispielsweise eine Liste von Zitaten mit einer unbekannten Textmenge im Voraus, jedoch in ihrer Gesamtheit, anzeigen, k√∂nnen gleichzeitig nicht mehr als zehn Punkte angezeigt werden, da dies etwa 10 bis 15 Sekunden dauert.  In diesem Fall m√ºssen Sie jeweils 10-15 Elemente laden, w√§hrend Sie durch die Liste scrollen. </li><li>  Es ist unm√∂glich, Text mit mehr als 6500 Zeichen (3,5 Seiten gedruckten Text) anzuzeigen - wir erhalten einen schwarzen Bildschirm.  Dies wird gel√∂st, indem der Text gebrochen und dann zusammengeklebt wird, was immer noch eine Kr√ºcke zu sein scheint.  Es ist jedoch nicht klar, an wen es denken w√ºrde, eine solche Textmenge gleichzeitig auszugeben.  Besonders wenn es um mobile Plattformen geht. </li></ul><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Weitere Artikel √ºber Kivy</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eine virtuelle Maschine</a> (der erste Beitrag von ZenCODE) von Kivy-Entwicklern ist bereit und konfiguriert, um Projekte f√ºr beide Python-Zweige zu erstellen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de420691/">https://habr.com/ru/post/de420691/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de420679/index.html">Neue Python-Kurse von Mail.Ru Group</a></li>
<li><a href="../de420681/index.html">AMD ThreadRipper 2: Erste Einf√ºhrung</a></li>
<li><a href="../de420685/index.html">Fix und neutralisieren: wie wir Silber gez√§hmt haben. Ein Wort zu Bakteriziden f√ºr Wasser</a></li>
<li><a href="../de420687/index.html">Verwenden von VS-Code zum Aufrufen der REST-API in Azure IoT Hub [+ n√ºtzliche Materialien]</a></li>
<li><a href="../de420689/index.html">Game Designer von Grund auf neu: Wie man Spiele ohne Erfahrung macht</a></li>
<li><a href="../de420693/index.html">Der Java-Entwicklungskurs von Mail.Ru Group auf dem Technostream-Kanal</a></li>
<li><a href="../de420695/index.html">Ray: Ein verteiltes System zur Verwendung von KI</a></li>
<li><a href="../de420697/index.html">Das ewige Thema mit PHP und MySQL</a></li>
<li><a href="../de420701/index.html">HSBI l√§dt am 29. August zu einem Vortragsabend zum Thema Spieledesign ein</a></li>
<li><a href="../de420703/index.html">Inhaltsangabe des Buches ‚ÄûVerhandlungen ohne Niederlage. Harvard-Methode</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>