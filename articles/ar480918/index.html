<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ๏ธ ๐๏ธ ๐ง ุงุจุงุชุดู Hadoop ุฑูุฒ ุงูุฌูุฏุฉ: ุงูุฅูุชุงุฌ ููุงุจู ุงูุงุฎุชุจุงุฑ ๐จโ๐ฉโ๐งโ๐ง ๐ฉ๐ปโ๐ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุฃุฌู ุงูุญุตูู ุนูู ููุฏ ุฅูุชุงุฌ ุนุงูู ุงูุฌูุฏุฉ ุ ูุง ูููู ููุท ุถูุงู ุฃูุตู ูุฏุฑ ูู ุงูุชุบุทูุฉ ููุงุฎุชุจุงุฑุงุช. ูุง ุดู ุ ุงููุชุงุฆุฌ ุงููุจูุฑุฉ ุชุชุทูุจ ุฑูุฒ ุงููุดุฑูุน ุงูุฑุฆูุณู ูุงูุงุฎุชุจุงุฑ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงุจุงุชุดู Hadoop ุฑูุฒ ุงูุฌูุฏุฉ: ุงูุฅูุชุงุฌ ููุงุจู ุงูุงุฎุชุจุงุฑ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/480918/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c48/f76/cf1/c48f76cf15c8138ce1d944918b1dcc07.png" alt="ุงูุดูู 1"></div><br>  ูู ุฃุฌู ุงูุญุตูู ุนูู ููุฏ ุฅูุชุงุฌ ุนุงูู ุงูุฌูุฏุฉ ุ ูุง ูููู ููุท ุถูุงู ุฃูุตู ูุฏุฑ ูู ุงูุชุบุทูุฉ ููุงุฎุชุจุงุฑุงุช.  ูุง ุดู ุ ุงููุชุงุฆุฌ ุงููุจูุฑุฉ ุชุชุทูุจ ุฑูุฒ ุงููุดุฑูุน ุงูุฑุฆูุณู ูุงูุงุฎุชุจุงุฑุงุช ููุนูู ูุนุง ุจููุงุกุฉ.  ูุฐูู ุ ูุฌุจ ุฅููุงุก ุงูุงุฎุชุจุงุฑุงุช ุงููุซูุฑ ูู ุงูุงูุชูุงู ูุซู ุงูุฑูุฒ ุงูุฑุฆูุณู.  ูุนุฏ ุงูุงุฎุชุจุงุฑ ุงููุงุฆู ุฃุญุฏ ุนูุงูู ุงููุฌุงุญ ุงูุฑุฆูุณูุฉ ุ ุญูุซ ุณูุคุฏู ุฅูู ุชุฑุงุฌุน ุงูุฅูุชุงุฌ.  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุชุญุฐูุฑุงุช ูุญูู ุซุงุจุช PVS-Studio ููุนุฑูุฉ ุฃูููุฉ ุญูููุฉ ุฃู ุงูุฃุฎุทุงุก ูู ุงูุงุฎุชุจุงุฑุงุช ููุณุช ุฃุณูุฃ ูู ุชูู ุงูุชู ูู ุงูุฅูุชุงุฌ.  ุงูุชุฑููุฒ ุงูููู: ุงุจุงุชุดู Hadoop. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุนู ุงููุดุฑูุน </h2><br>  ุฃููุฆู ุงูุฐูู ูุงููุง ููุชููู ูู ุงูุณุงุจู ุจุงูุจูุงูุงุช ุงููุจูุฑุฉ ุฑุจูุง ุณูุนูุง ุฃู ุนูููุง ูุน ูุดุฑูุน <a href="https://hadoop.apache.org/">Apache Hadoop</a> .  ุจุงุฎุชุตุงุฑ ุ Hadoop ูู ุฅุทุงุฑ ูููู ุงุณุชุฎุฏุงูู ูุฃุณุงุณ ูุจูุงุก ุฃูุธูุฉ ุงูุจูุงูุงุช ุงููุจูุฑุฉ ูุงูุนูู ูุนูุง. <br><br>  ูุชููู Hadoop ูู ุฃุฑุจุน ูุญุฏุงุช ุฑุฆูุณูุฉ ุ ูู ูููุง ูุคุฏู ูููุฉ ูุญุฏุฏุฉ ูุทููุจุฉ ููุธุงู ุชุญููู ุงูุจูุงูุงุช ุงููุจูุฑุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Hadoop ุงููุดุชุฑูุฉ </li><li style=";text-align:right;direction:rtl">  ูุงุจุฑูุฏููุณ </li><li style=";text-align:right;direction:rtl">  Hadoop ูุธุงู ุงููููุงุช ุงูููุฒุนุฉ </li><li style=";text-align:right;direction:rtl">  ุบุฒู </li></ul><br>  ุนูู ุฃู ุญุงู ุ ููุงู ุงููุซูุฑ ูู ุงูููุงุฏ ุญูู ูุฐุง ุงูููุถูุน ุนูู ุงูุฅูุชุฑูุช. <br><br><h2 style=";text-align:right;direction:rtl">  ุนู ุงูุดูู </h2><br>  ููุง ูู ููุถุญ ูู ุงููุซุงุฆู ุ ูููู ุฏูุฌ PVS-Studio ูู ุงููุดุฑูุน ุจุนุฏุฉ ุทุฑู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ ูุฎุถุฑู. </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู ุงูููููู ุงูุฅุถุงูู ุ </li><li style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ููุฏ IntellJ IDEA ุ </li><li style=";text-align:right;direction:rtl">  ูุจุงุดุฑุฉ ุจุงุณุชุฎุฏุงู ูุญูู. </li></ul><br>  ูุณุชูุฏ Hadoop ุนูู ูุธุงู ุงูุฅูุดุงุก ุงููุฎุถุฑู ุ ูุจุงูุชุงูู ุ ูู ุชูู ููุงู ุนูุจุงุช ูุน ุงูุงุฎุชูุงุฑ. <br><br>  ุจุนุฏ ุฏูุฌ ุงูุจุฑูุงูุฌ ุงููุตู ูู ุงููุซุงุฆู ูุชุญุฑูุฑ ุฃุญุฏ ูููุงุช pom.xml (ูุงูุช ููุงู ูุญุฏุงุช ูู ุงูุชุจุนูุงุช ุงูุชู ูู ุชูู ูุชููุฑุฉ) ุ ุจุฏุฃ ุงูุชุญููู! <br><br>  ุจุนุฏ ุงูุชูุงู ุงูุชุญููู ุ ุงุฎุชุฑุช ุงูุชุญุฐูุฑุงุช ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ููุงุญุธุช ุฃููู ุชูููุช ููุณ ุนุฏุฏ ุงูุชุญุฐูุฑุงุช ูู ููุฏ ุงูุฅูุชุงุฌ ููู ุงูุงุฎุชุจุงุฑุงุช.  ุนุงุฏุฉ ุ ุฃูุง ูุง ุฃุนุชุจุฑ ุชุญุฐูุฑุงุช ุงููุญูู ุ ุงูููุฏูุฉ ููุงุฎุชุจุงุฑุงุช.  ููู ุนูุฏูุง ูุณูุชูุง ุ ูู ุฃุณุชุทุน ุชุฑู ุชุญุฐูุฑุงุช "ุงูุงุฎุชุจุงุฑุงุช" ุฏูู ูุฑุงูุจุฉ.  "ููุงุฐุง ูุง ูููู ูุธุฑุฉ ุนููููุ" - ุงุนุชูุฏุช ุ ูุฃู ุงูุฃุฎุทุงุก ูู ุงูุงุฎุชุจุงุฑุงุช ูุฏ ูููู ููุง ุฃูุถูุง ุนูุงูุจ ูุฎููุฉ.  ูููู ุฃู ุชุคุฏู ุฅูู ุงุฎุชุจุงุฑ ุบูุฑ ุตุญูุญ ุฃู ุฌุฒุฆู ุ ุฃู ุญุชู mishmash (ุฃููุง ููุฌูุฏุฉ ููุท ููุชุญูู ูู ูุฑุจุน ุ ูุฃููุง ุฏุงุฆูุง ุฎุถุฑุงุก). <br><br>  ุจุนุฏ ุชุญุฏูุฏ ุงูุชุญุฐูุฑุงุช ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ุ ูุณูุชูุง ุนูู ุงููุฌููุนุงุช ุงูุชุงููุฉ: ุงูุฅูุชุงุฌ ูุงูุงุฎุชุจุงุฑ ููุญุฏุงุช Hadoop ุงูุฑุฆูุณูุฉ ุงูุฃุฑุจุนุฉ.  ูุงูุขู ุ ูุณุนุฏูู ุฃู ุฃูุฏู ุงูุชุจุงููู ุฅูู ุงุณุชุนุฑุงุถ ุชุญุฐูุฑุงุช ุงููุญูููู. <br><br><h2 style=";text-align:right;direction:rtl">  ููุฏ ุงูุงูุชุงุฌ </h2><br><h3 style=";text-align:right;direction:rtl">  Hadoop ุงููุดุชุฑูุฉ </h3><br>  <a href="https://www.viva64.com/en/w/v6033/">V6033</a> ุชูุช ุฅุถุงูุฉ ุนูุตุฑ ุจููุณ ุงูููุชุงุญ "KDC_BIND_ADDRESS".  MiniKdc.java (163) ู MiniKdc.java (162) <br><br><pre style=";text-align:right;direction:rtl"><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MiniKdc</span></span></span><span class="hljs-class"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Set&lt;String&gt; PROPERTIES = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashSet&lt;String&gt;(); .... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> { PROPERTIES.add(ORG_NAME); PROPERTIES.add(ORG_DOMAIN); PROPERTIES.add(KDC_BIND_ADDRESS); PROPERTIES.add(KDC_BIND_ADDRESS); <span class="hljs-comment"><span class="hljs-comment">// &lt;= PROPERTIES.add(KDC_PORT); PROPERTIES.add(INSTANCE); .... } .... }</span></span></code> </pre> <br>  ุชุนุฏ ุงููููุฉ ุงููุถุงูุฉ ูุฑุชูู ูู <i>HashSet</i> ุนูุจูุง ุดุงุฆุนูุง ุฌุฏูุง ุนูุฏ ุงูุชุญูู ูู ุงููุดุฑูุนุงุช.  ุณูุชู ุชุฌุงูู ุงูุฅุถุงูุฉ ุงูุซุงููุฉ ุจุงููุนู.  ุขูู ุฃู ุชููู ูุฐู ุงูุงุฒุฏูุงุฌูุฉ ูุฌุฑุฏ ูุฃุณุงุฉ ูุง ุฏุงุนู ููุง.  ูุงุฐุง ูู ูุงู ูู ุงูููุชุฑุถ ุฃู ุชุถุงู ูููุฉ ุฃุฎุฑูุ <br><br><h3 style=";text-align:right;direction:rtl">  ูุงุจุฑูุฏููุณ </h3><br>  <a href="https://www.viva64.com/en/w/v6072/">V6072</a> ุชู ุงูุนุซูุฑ ุนูู ุดุธุงูุง ููุฏ ููุงุซูุฉ.  ุฑุจูุง ุ ูุฐุง ุฎุทุฃ ูุทุจุนู ููุฌุจ ุงุณุชุฎุฏุงู ูุชุบูุฑ "localFiles" ุจุฏูุงู ูู "localArchives".  LocalDistributedCacheManager.java (183) ุ LocalDistributedCacheManager.java (178) ุ LocalDistributedCacheManager.java (176) ุ LocalDistributedCacheManager.java (181) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">synchronized</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(JobConf conf, JobID jobId)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ .... <span class="hljs-comment"><span class="hljs-comment">// Update the configuration object with localized data. if (!localArchives.isEmpty()) { conf.set(MRJobConfig.CACHE_LOCALARCHIVES, StringUtils .arrayToString(localArchives.toArray(new String[localArchives // &lt;= .size()]))); } if (!localFiles.isEmpty()) { conf.set(MRJobConfig.CACHE_LOCALFILES, StringUtils .arrayToString(localFiles.toArray(new String[localArchives // &lt;= .size()]))); } .... }</span></span></code> </pre> <br>  ุงูุชุดุฎูุต V6072 ูุนุทู ูู ุจุนุถ ุงูุฃุญูุงู ุจุนุถ ุงููุชุงุฆุฌ ุงููุซูุฑุฉ ููุงูุชูุงู.  ุงูุบุฑุถ ูู ูุฐุง ุงูุชุดุฎูุต ูู ุงูุชุดุงู ุดุธุงูุง ุดูุฑุฉ ุงูููุน ููุณูุง ุงููุงุชุฌุฉ ุนู ูุณุฎ ูุตู ูุงุณุชุจุฏุงู ูุชุบูุฑูู ูุงุญุฏ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุชู ุชุฑู ุจุนุถ ุงููุชุบูุฑุงุช "ุฏูู ุชุบููุฑ". <br><br>  ุงูุฑูุฒ ุฃุนูุงู ููุถุญ ูุฐุง.  ูู ุงููุชูุฉ ุงูุฃููู ุ ูุชู ุงุณุชุฎุฏุงู ูุชุบูุฑ <i>localArchives</i> ุ ูู ุงูุฌุฒุก ุงูุซุงูู ุงูููุงุซู - <i>localFiles</i> .  ุฅุฐุง ููุช ุชุฏุฑุณ ูุฐุง ุงูุฑูุฒ <i>ุจุนูุงูุฉ ูุงุฆูุฉ</i> ุ ูุจุฏูุงู ูู ุฐูู ุณุฑุนุงู ูุง ุชูุฑ ุจู ุ ููุง ูุญุฏุซ ุบุงูุจูุง ุฃุซูุงุก ูุฑุงุฌุนุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ุณุชูุงุญุธ ุงูุฌุฒุก ุ ุญูุซ ูุณู ุงููุคูู ุงุณุชุจุฏุงู ูุชุบูุฑ <i>localArchives</i> . <br><br>  ูููู ุฃู ูุคุฏู ูุฐุง gaffe ุฅูู ุงูุณููุงุฑูู ุงูุชุงูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููุชุฑุถ ุฃู ูุฏููุง <i>ุฃุฑุดูููุฉ ูุญููุฉ</i> (ุญุฌู = 4) <i>ูููู ูุญูู</i> (ุญุฌู = 2) ุ </li><li style=";text-align:right;direction:rtl">  ุนูุฏ ุฅูุดุงุก ุงูุตููู <i>localFiles.toArray (ุณูุณูุฉ ุฌุฏูุฏุฉ [localArchives.size ()])</i> ุ ุณูููู ุงูุนูุตุฑุงู ุงูุฃุฎูุฑุงู ุฎุงููุงู (["pathToFile1" ุ "pathToFile2" ุ null ุ null]) ุ </li><li style=";text-align:right;direction:rtl">  ุซู <i>org.apache.hadoop.util.StringUtils.arrayToString</i> ุณูุนูุฏ ุชูุซูู ุณูุณูุฉ ุงูุตููู ูุฏููุง ุ ุญูุซ ุณูุชู ุชูุฏูู ุฃุณูุงุก ุงููููุงุช ุงูุฃุฎูุฑุฉ ูู "ุฎุงููุฉ" ("pathToFile1 ุ pathToFile2 ุ null ุ null" <i>)</i> ุ </li><li style=";text-align:right;direction:rtl">  ุณูุชู ุชูุฑูุฑ ูู ูุฐุง ุฅูู ุฃุจุนุฏ ูู ุฐูู ุ ูุงููู ูุญุฏู ูุนูู ููุน ุงูุดููุงุช ุงูููุฌูุฏุฉ ููุซู ูุฐู ุงูุญุงูุงุช =). </li></ul><br>  ุชุนุจูุฑ <a href="https://www.viva64.com/en/w/v6007/">V6007</a> 'children.size ()&gt; 0' ุตุญูุญ ุฏุงุฆููุง.  Queue.java (347) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isHierarchySameAs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Queue newState)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (children == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || children.size() == <span class="hljs-number"><span class="hljs-number">0</span></span>) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(children.size() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { .... } .... }</code> </pre> <br>  ูุธุฑูุง ูุญูููุฉ ุฃู ุนุฏุฏ ุงูุนูุงุตุฑ ูุญุฏุฏูุง ุนูู 0 ุจุดูู ูููุตู ุ ูุณูุธู ุงูุชุญูู ูู <i>children.size ()&gt; 0</i> ุตุญูุญูุง ุฏุงุฆููุง. <br><br><h3 style=";text-align:right;direction:rtl">  HDFS </h3><br>  <a href="https://www.viva64.com/en/w/v6001/">V6001</a> ููุงู <a href="https://www.viva64.com/en/w/v6001/">ุชุนุจูุฑุงุช</a> ูุฑุนูุฉ ูุชุทุงุจูุฉ 'this.bucketSize' ุฅูู ุงููุณุงุฑ ูุฅูู ูููู ุนุงูู ุงูุชุดุบูู 'ูช'.  RollingWindow.java (79) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> RollingWindow(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> windowLenMs, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numBuckets) { buckets = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bucket[numBuckets]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; numBuckets; i++) { buckets[i] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bucket(); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.windowLenMs = windowLenMs; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.bucketSize = windowLenMs / numBuckets; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.bucketSize % bucketSize != <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= throw new IllegalArgumentException( "The bucket size in the rolling window is not integer: windowLenMs= " + windowLenMs + " numBuckets= " + numBuckets); } }</span></span></code> </pre> <br>  ููุง ุงูุนูุจ ูู ุฃู ุงููุชุบูุฑ ููุณูู ุจุญุฏ ุฐุงุชู.  ูุชูุฌุฉ ูุฐูู ุ ุณูููู ุงูุชุญูู ูู ุงูุชุนุฏุฏ ูุงุฌุญูุง ุฏุงุฆููุง ููู ุญุงูุฉ ุงูุญุตูู ุนูู ูุฏุฎูุงุช ุบูุฑ ุตุญูุญุฉ ( <i>windowLenMs</i> ุ <i>numBuckets</i> ) ุ ููู ูุชู ุทุฑุญ ุงูุงุณุชุซูุงุก ูุทูููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุบุฒู </h3><br>  <a href="https://www.viva64.com/en/w/v6067/">V6067 ูููู</a> ุงุซูุงู ุฃู ุฃูุซุฑ ูู ูุฑูุน ุงูุญุงูุฉ ุจุชูููุฐ ููุณ ุงูุฅุฌุฑุงุกุงุช.  TimelineEntityV2Converter.java (386)ุ TimelineEntityV2Converter.java (389) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ApplicationReport </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">convertToApplicationReport</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TimelineEntity entity)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (metrics != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> vcoreSeconds = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> memorySeconds = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> preemptedVcoreSeconds = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> preemptedMemorySeconds = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (TimelineMetric metric : metrics) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (metric.getId()) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ApplicationMetricsConstants.APP_CPU_METRICS: vcoreSeconds = getAverageValue(metric.getValues().values()); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ApplicationMetricsConstants.APP_MEM_METRICS: memorySeconds = ....; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ApplicationMetricsConstants.APP_MEM_PREEMPT_METRICS: preemptedVcoreSeconds = ....; <span class="hljs-comment"><span class="hljs-comment">// &lt;= break; case ApplicationMetricsConstants.APP_CPU_PREEMPT_METRICS: preemptedVcoreSeconds = ....; // &lt;= break; default: // Should not happen.. break; } } .... } .... }</span></span></code> </pre> <br>  ุดุธุงูุง ููุณ ุงูุฑูุฒ ูู ูุฑุนูู <i>ููุญุงูุฉ</i> .  ุงููุง ููุท ูู ูู ููุงู!  ูู ุงูุนุฏุฏ ุงูุณุงุฆุฏ ูู ุงูุญุงูุงุช ุ ูุฐุง ููุณ ุฎุทุฃ ุญูููููุง ุ ูููู ูุฌุฑุฏ ุณุจุจ ููุชูููุฑ ูู ุฅุตูุงุญ <i>ุงูุชุจุฏูู</i> .  ูููู ููุณ ูููุถูุฉ ูู ูุชูุงูู ุงููุฏ.  ุชููู ุฃุฌุฒุงุก ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุชูุฑุฑุฉ ุจุชุนููู ูููุฉ ุงููุชุบูุฑ <i>preemptedVcoreSeconds</i> .  ุฅุฐุง ูุธุฑุช ุนู ูุซุจ ุฅูู ุฃุณูุงุก ุฌููุน ุงููุชุบูุฑุงุช ูุงูุซูุงุจุช ุ ููู ุงููุญุชูู ุฃู ุชุณุชูุชุฌ ุฃูู ูู ุญุงูุฉ ุฅุฐุง ูุงู <i>metric.getId () == APP_MEM_PREEMPT_METRICS</i> ุ ููุฌุจ ุชุนููู ุงููููุฉ <i>ููุชุบูุฑ preemptedMemorySeconds</i> ุ ูููุณ ููุชุบูุฑุงุช <i>preemptedVcoreSeconds</i> .  ูู ูุฐุง ุงูุตุฏุฏ ุ ุจุนุฏ ุนุงูู ุชุดุบูู "ุงูุชุจุฏูู" ุ ุณุชุจูู <i>preemptedMemorySeconds</i> ุฏุงุฆููุง 0 ุ ุจูููุง ูุฏ ุชููู ูููุฉ <i>preemptedVcoreSeconds</i> ุบูุฑ ุตุญูุญุฉ. <br><br>  <a href="https://www.viva64.com/en/w/v6046/">V6046</a> ุชูุณูู ุบูุฑ ุตุญูุญ.  ูู ุงููุชููุน ูุฌูุฏ ุนุฏุฏ ูุฎุชูู ูู ุนูุงุตุฑ ุงูุชูุณูู.  ุงููุณูุทุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ: 2. AbstractSchedulerPlanFollower.java (186) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">synchronized</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">synchronizePlan</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Plan plan, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> shouldReplan)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { setQueueEntitlement(planQueueName, ....); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (YarnException e) { LOG.warn(<span class="hljs-string"><span class="hljs-string">"Exception while trying to size reservation for plan: {}"</span></span>, currResId, planQueueName, e); } .... }</code> </pre> <br>  ูุง ูุชู ุงุณุชุฎุฏุงู ูุชุบูุฑ <i>planQueueName</i> ุนูุฏ ุงูุชุณุฌูู.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ูุณุฎ ุงููุซูุฑ ุฃู ุนุฏู ุงูุงูุชูุงุก ูู ุณูุณูุฉ ุงูุชูุณูู.  ููููู ูุง ุฒูุช ุฃููู ุงููุตู ุงููุฏูู ุงูุฌูุฏ ูููุณุฎ ุ ููู ุฃูุฑ ุฑุงุฆุน ูู ุจุนุถ ุงูุญุงูุงุช ุฃู ุชุทูู ุงููุงุฑ ุนูู ูุฏูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฑูุฒ ุงูุงุฎุชุจุงุฑ </h2><br><h3 style=";text-align:right;direction:rtl">  Hadoop ุงููุดุชุฑูุฉ </h3><br>  <a href="https://www.viva64.com/en/w/v6072/">V6072</a> ุชู ุงูุนุซูุฑ ุนูู ุดุธุงูุง ููุฏ ููุงุซูุฉ.  ุฑุจูุง ุ ูุฐุง ุฎุทุฃ ูุทุจุนู ููุฌุจ ุงุณุชุฎุฏุงู ูุชุบูุฑ "allSecretsB" ุจุฏูุงู ูู "allSecretsA".  TestZKSignerSecretProvider.java (316) ุ TestZKSignerSecretProvider.java (309) ุ TestZKSignerSecretProvider.java (306) ุ TestZKSignerSecretProvider.java (313) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testMultiple</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> order)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ .... currentSecretA = secretProviderA.getCurrentSecret(); allSecretsA = secretProviderA.getAllSecrets(); Assert.assertArrayEquals(secretA2, currentSecretA); Assert.assertEquals(<span class="hljs-number"><span class="hljs-number">2</span></span>, allSecretsA.length); <span class="hljs-comment"><span class="hljs-comment">// &lt;= Assert.assertArrayEquals(secretA2, allSecretsA[0]); Assert.assertArrayEquals(secretA1, allSecretsA[1]); currentSecretB = secretProviderB.getCurrentSecret(); allSecretsB = secretProviderB.getAllSecrets(); Assert.assertArrayEquals(secretA2, currentSecretB); Assert.assertEquals(2, allSecretsA.length); // &lt;= Assert.assertArrayEquals(secretA2, allSecretsB[0]); Assert.assertArrayEquals(secretA1, allSecretsB[1]); .... }</span></span></code> </pre> <br>  ููุฑุฉ ุฃุฎุฑู V6072.  ููุธุฑ ุนู ูุซุจ ูู ุงููุชุบูุฑุงุช <i>allSecretsA</i> ู <i>allSecretsB</i> . <br><br>  <a href="https://www.viva64.com/en/w/v6043/">V6043</a> ุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ูุญุต ุงููุดุบู 'for'.  ุงูููู ุงูุฃูููุฉ ูุงูููุงุฆูุฉ ููุชูุฑุงุฑ ูู ููุณูุง.  TestTFile.java (235) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readPrepWithUnknownLength</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Scanner scanner, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> start, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = start; i &lt; start; i++) { String key = String.format(localFormatter, i); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] read = readKey(scanner); assertTrue(<span class="hljs-string"><span class="hljs-string">"keys not equal"</span></span>, Arrays.equals(key.getBytes(), read)); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { read = readValue(scanner); assertTrue(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException ie) { <span class="hljs-comment"><span class="hljs-comment">// should have thrown exception } String value = "value" + key; read = readLongValue(scanner, value.getBytes().length); assertTrue("values nto equal", Arrays.equals(read, value.getBytes())); scanner.advance(); } return (start + n); }</span></span></code> </pre> <br>  ุงุฎุชุจุงุฑ ูุฐุง ุฏุงุฆูุง ุงูุฎุถุฑุงุกุ  =).  ูู ูุชู ุชูููุฐ ุฌุฒุก ูู ุงูุญููุฉ ุ ููู ุฌุฒุก ูู ุงูุงุฎุชุจุงุฑ ููุณู.  ููุฑุฌุน ุฐูู ุฅูู ุญูููุฉ ุฃู ููู ุงูุนุฏุงุฏ ุงูุฃูููุฉ ูุงูููุงุฆูุฉ ูุชุณุงููุฉ ูู ุจูุงู <i>for</i> .  ูุชูุฌุฉ ูุฐูู ุ ูุฅู ุงูุดุฑุท ุงูุฐู <i>ุณุฃุจุฏุฃ ุจู</i> ุณูุจุฏุฃ ุนูู ุงูููุฑ ุ ููุง ูุคุฏู ุฅูู ูุซู ูุฐุง ุงูุณููู.  ุฑูุถุช ูู ุฎูุงู ููู ุงูุงุฎุชุจุงุฑ ูููุฒุช ุฅูู ุงุณุชูุชุงุฌ ููุงุฏู ุฃูู ูู ุงููุงูุน ูุฌุจ ุฃู ุฃููู ููุชูุจูุง <i>(ูู ุงูุจุฏุงูุฉ + n)</i> ูู ุญุงูุฉ ุงูุญููุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ูุงุจุฑูุฏููุณ </h3><br>  ุชุนุจูุฑ <a href="https://www.viva64.com/en/w/v6007/">V6007</a> 'byteAm &lt;0' ุบูุฑ ุตุญูุญ ุฏุงุฆููุง.  DataWriter.java (322) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">GenerateOutput </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeSegment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> byteAm, OutputStream out)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> headerLen = getHeaderLength(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (byteAm &lt; headerLen) { <span class="hljs-comment"><span class="hljs-comment">// not enough bytes to write even the header return new GenerateOutput(0, 0); } // adjust for header length byteAm -= headerLen; if (byteAm &lt; 0) { // &lt;= byteAm = 0; } .... }</span></span></code> </pre> <br>  ุดุฑุท <i>ุงูุจุงูุช &lt;0</i> ุบูุฑ ุตุญูุญ ุฏุงุฆููุง.  ููุนุฑูุฉ ุฐูู ุ ุฏุนููุง ูุนุทู ุงูููุฏ ุฃุนูุงู ูุธุฑุฉ ุฃุฎุฑู.  ุฅุฐุง ูุตู ุชูููุฐ ุงูุงุฎุชุจุงุฑ ุฅูู ุงูุนูููุฉ <i>byteAm - = headerLen</i> ุ ููุฐุง ูุนูู ุฃู <i>byteAm&gt; = headerLen.</i>  ูู ููุง ุ ูุจุนุฏ ุงูุทุฑุญ ุ ูู ุชููู ูููุฉ <i>byteAm</i> ุณุงูุจุฉ ุฃุจุฏูุง.  ูุฐุง ูุง ูุงู ุนูููุง ุฅุซุจุงุชู. <br><br><h3 style=";text-align:right;direction:rtl">  HDFS </h3><br>  <a href="https://www.viva64.com/en/w/v6072/">V6072</a> ุชู ุงูุนุซูุฑ ุนูู ุดุธุงูุง ููุฏ ููุงุซูุฉ.  ุฑุจูุง ุ ูุฐุง ุฎุทุฃ ูุทุจุนู ููุฌุจ ุงุณุชุฎุฏุงู ูุชุบูุฑ "normalFile" ุจุฏูุงู ูู "normalDir".  TestWebHDFS.java (625) ุ TestWebHDFS.java (615) ุ TestWebHDFS.java (614) ุ TestWebHDFS.java (624) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testWebHdfsErasureCodingFiles</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Path normalDir = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Path(<span class="hljs-string"><span class="hljs-string">"/dir"</span></span>); dfs.mkdirs(normalDir); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Path normalFile = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Path(normalDir, <span class="hljs-string"><span class="hljs-string">"file.log"</span></span>); .... <span class="hljs-comment"><span class="hljs-comment">// logic block #1 FileStatus expectedNormalDirStatus = dfs.getFileStatus(normalDir); FileStatus actualNormalDirStatus = webHdfs.getFileStatus(normalDir); // &lt;= Assert.assertEquals(expectedNormalDirStatus.isErasureCoded(), actualNormalDirStatus.isErasureCoded()); ContractTestUtils.assertNotErasureCoded(dfs, normalDir); assertTrue(normalDir + " should have erasure coding unset in " + ....); // logic block #2 FileStatus expectedNormalFileStatus = dfs.getFileStatus(normalFile); FileStatus actualNormalFileStatus = webHdfs.getFileStatus(normalDir); // &lt;= Assert.assertEquals(expectedNormalFileStatus.isErasureCoded(), actualNormalFileStatus.isErasureCoded()); ContractTestUtils.assertNotErasureCoded(dfs, normalFile); assertTrue( normalFile + " should have erasure coding unset in " + ....); }</span></span></code> </pre> <br>  ุตุฏู ุฃู ูุง ุชุตุฏู ุ ุฅูู V6072 ูุฑุฉ ุฃุฎุฑู!  ููุท ุงุชุจุน ุงููุชุบูุฑุงุช <i>normalDir</i> ู <i>normalFile.</i> <br><br>  <a href="https://www.viva64.com/en/w/v6027/">V6027</a> ูุชู ุชููุฆุฉ ุงููุชุบูุฑุงุช ูู ุฎูุงู ุงูุฏุนูุฉ ุฅูู ููุณ ุงููุธููุฉ.  ุฑุจูุง ูููู ุฎุทุฃ ุฃู ุฑูุฒ un-optimized.  TestDFSAdmin.java (883) ุ TestDFSAdmin.java (879) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">verifyNodesAndCorruptBlocks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> numDn, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> numLiveDn, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> numCorruptBlocks, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> numCorruptECBlockGroups, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> DFSClient client, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Long highestPriorityLowRedundancyReplicatedBlocks, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Long highestPriorityLowRedundancyECBlocks)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* init vars */</span></span> .... <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String expectedCorruptedECBlockGroupsStr = String.format( <span class="hljs-string"><span class="hljs-string">"Block groups with corrupt internal blocks: %d"</span></span>, numCorruptECBlockGroups); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String highestPriorityLowRedundancyReplicatedBlocksStr = String.format( <span class="hljs-string"><span class="hljs-string">"\tLow redundancy blocks with highest priority "</span></span> + <span class="hljs-string"><span class="hljs-string">"to recover: %d"</span></span>, highestPriorityLowRedundancyReplicatedBlocks); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String highestPriorityLowRedundancyECBlocksStr = String.format( <span class="hljs-string"><span class="hljs-string">"\tLow redundancy blocks with highest priority "</span></span> + <span class="hljs-string"><span class="hljs-string">"to recover: %d"</span></span>, highestPriorityLowRedundancyReplicatedBlocks); .... }</code> </pre> <br>  ูู ูุฐู <i>ุงูุดุฑูุญุฉ</i> ุ ุชุชู ุชููุฆุฉ ุงููุชุบูุฑุงุช <i>topPriorityLowRedundancyReplicatedBlocksStr</i> ู <i>topPriorityLowRedundancyECBlocksStr</i> ุจููุณ ุงูููู.  ูู ูุซูุฑ ูู ุงูุฃุญูุงู ูุฌุจ ุฃู ูููู ุงูุฃูุฑ ูุฐูู ุ ูููู ูุฐุง ููุณ ูู ุงูุญุงู.  ุฃุณูุงุก ุงููุชุบูุฑุงุช ุทูููุฉ ููุชุดุงุจูุฉ ุ ูุฐูู ููุณ ูู ุงููุณุชุบุฑุจ ุฃู ุฌุฒุกูุง ูู ูุตู ุงููุณุฎ ูู ูุชุบูุฑ ุจุฃู ุทุฑููุฉ.  ูุฅุตูุงุญูุง ุ ุนูุฏ ุชููุฆุฉ ูุชุบูุฑ <i>higherPriorityLowRedundancyECBlocksStr</i> ุ ูุชุนูู ุนูู ุงููุคูู ุงุณุชุฎุฏุงู ูุนููุฉ ุงูุฅุฏุฎุงู <i>higherPriorityLowRedundancyECBlocks</i> .  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุนูู ุงูุฃุฑุฌุญ ุ ูุง ูุฒุงู ูุชุนูู ุนูููู ุชุตุญูุญ ุฎุท ุงูุชูุณูู. <br><br>  <a href="https://www.viva64.com/en/w/v6019/">V6019 ุชู</a> ุงูุชุดุงู ููุฏ ุบูุฑ <a href="https://www.viva64.com/en/w/v6019/">ูุงุจู</a> ูููุตูู.  ูู ุงููููู ูุฌูุฏ ุฎุทุฃ.  TestReplaceDatanodeFailureReplication.java (222) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">verifyFileContent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...., SlowWriter[] slowwriters)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ LOG.info(<span class="hljs-string"><span class="hljs-string">"Verify the file"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; slowwriters.length; i++) { LOG.info(slowwriters[i].filepath + ....); FSDataInputStream in = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { in = fs.open(slowwriters[i].filepath); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>, x;; j++) { x = in.read(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((x) != -<span class="hljs-number"><span class="hljs-number">1</span></span>) { Assert.assertEquals(j, x); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { IOUtils.closeStream(in); } } }</code> </pre> <br>  ูุดูู ุงููุญูู ูู ุฃูู ูุง ูููู ุชุบููุฑ ุนุฏุงุฏ <i>i ++</i> ูู ุงูุญููุฉ.  ููุง ูุนูู ุฃูู ูู <i>for (int i = 0ุ i &lt;slowwriters.lengthุ i ++) {....}</i> ูู ูุชู ุชูููุฐ ุฃูุซุฑ ูู ุญููุฉ ูุงุญุฏุฉ.  ุฏุนูุง ูุนุฑู ููุงุฐุง.  ูุฐูู ุ ูู ุงูุชูุฑุงุฑ ุงูุฃูู ุ ูููู ุจุฑุจุท ุงูุฎูุท ุจุงูููู ุงูุฐู ูุชูุงูู ูุน <i>ูุชุงุจุงุช ุจุทูุฆุฉ [0]</i> ููุฒูุฏ ูู ุงููุฑุงุกุฉ.  ุจุนุฏ ุฐูู ุ ููุฑุฃ ูุญุชููุงุช ุงูููู ุนุจุฑ ุงูุญููุฉ <i>ูู (int j = 0ุ x ุุ j ++):</i> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุฑุฃูุง ุดูุฆูุง ูุง ุฐุง ุตูุฉ ุ <i>ูุณููุงุฑู</i> ูุฑุงุกุฉ ุงูุจุงูุช ุจุงููููุฉ ุงูุญุงููุฉ ููุนุฏุงุฏ <i>j ุนูู</i> ุงูุฑุบู ูู <i>assertEquals</i> (ุฅุฐุง ูู ููู ุงูุงุฎุชุจุงุฑ ูุงุฌุญูุง ุ ูุฅููุง ููุดู ูู ุงูุงุฎุชุจุงุฑ) ุ </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุงูุชุญูู ูู ุงูููู ุจูุฌุงุญ ููุตููุง ุฅูู ููุงูุฉ ุงูููู (ููุฑุฃ -1) ุ ูุณุชุฎุฑุฌ ุงูุทุฑููุฉ. </li></ul><br>  ูุฐูู ุ ุฃูุง ูุงู ูุง ูุญุฏุซ ุฃุซูุงุก ุงูุชุญูู ูู <i>ูุชุงุจุงุช ุงูุจุทูุฆุฉ [0]</i> ุ ููู ูุชููู ูู ุงูุชุญูู ูู ุงูุนูุงุตุฑ ุงูุชุงููุฉ.  ุนูู ุงูุฃุฑุฌุญ ุ ูุฌุจ ุงุณุชุฎุฏุงู <i>ุงููุณุฑ</i> ุจุฏูุงู ูู <i>ุงูุนูุฏุฉ.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุบุฒู </h3><br>  <a href="https://www.viva64.com/en/w/v6019/">V6019 ุชู</a> ุงูุชุดุงู ููุฏ ุบูุฑ <a href="https://www.viva64.com/en/w/v6019/">ูุงุจู</a> ูููุตูู.  ูู ุงููููู ูุฌูุฏ ุฎุทุฃ.  TestNodeManager.java (176) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testCreationOfNodeLabelsProviderService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InterruptedException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { .... } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { Assert.fail(<span class="hljs-string"><span class="hljs-string">"Exception caught"</span></span>); e.printStackTrace(); } }</code> </pre> <br>  ูู ูุฐู ุงูุญุงูุฉ ุ <i>ุณุชููู</i> ุทุฑููุฉ <i>Assert.fail ุจููุงุทุนุฉ</i> ุงูุงุฎุชุจุงุฑ ููู ุชุชู ุทุจุงุนุฉ stacktrace ูู ุญุงูุฉ ุญุฏูุซ ุงุณุชุซูุงุก.  ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ุญูู ุงูุงุณุชุซูุงุก ุงูุฐู ุชู ุงูุชุดุงูู ูุงููุฉ ููุง ุ ููู ุงูุฃูุถู ุฅุฒุงูุฉ ุทุจุงุนุฉ stacktrace ูุชุฌูุจ ุงูุงูุชุจุงุณ.  ุฅุฐุง ูุงูุช ุงูุทุจุงุนุฉ ุถุฑูุฑูุฉ ุ ูุฃูุช ุชุญุชุงุฌ ููุท ุฅูู ุชุจุฏูููุง. <br><br>  ุชู ุงูุนุซูุฑ ุนูู ุงูุนุฏูุฏ ูู ุงูุฃุฌุฒุงุก ุงููุดุงุจูุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V6019 ุชู ุงูุชุดุงู ููุฏ ุบูุฑ ูุงุจู ูููุตูู.  ูู ุงููููู ูุฌูุฏ ุฎุทุฃ.  TestResourceTrackerService.java (928) </li><li style=";text-align:right;direction:rtl">  V6019 ุชู ุงูุชุดุงู ููุฏ ุบูุฑ ูุงุจู ูููุตูู.  ูู ุงููููู ูุฌูุฏ ุฎุทุฃ.  TestResourceTrackerService.java (737) </li><li style=";text-align:right;direction:rtl">  V6019 ุชู ุงูุชุดุงู ููุฏ ุบูุฑ ูุงุจู ูููุตูู.  ูู ุงููููู ูุฌูุฏ ุฎุทุฃ.  TestResourceTrackerService.java (685) </li><li style=";text-align:right;direction:rtl">  .... </li></ul><br>  <a href="https://www.viva64.com/en/w/v6072/">V6072</a> ุชู ุงูุนุซูุฑ ุนูู ุดุธุงูุง ููุฏ ููุงุซูุฉ.  ุฑุจูุง ุ ูุฐุง ุฎุทุฃ ูุทุจุนู ููุฌุจ ุงุณุชุฎุฏุงู ูุชุบูุฑ "publicCache" ุจุฏูุงู ูู "usercache".  TestResourceLocalizationService.java (315)ุ TestResourceLocalizationService.java (309)ุ TestResourceLocalizationService.java (307)ุ TestResourceLocalizationService.java (313) <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testDirectoryCleanupOnNewlyCreatedStateStore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException, URISyntaxException </span></span>{ .... <span class="hljs-comment"><span class="hljs-comment">// verify directory creation for (Path p : localDirs) { p = new Path((new URI(p.toString())).getPath()); // logic block #1 Path usercache = new Path(p, ContainerLocalizer.USERCACHE); verify(spylfs).rename(eq(usercache), any(Path.class), any()); // &lt;= verify(spylfs).mkdir(eq(usercache), ....); // logic block #2 Path publicCache = new Path(p, ContainerLocalizer.FILECACHE); verify(spylfs).rename(eq(usercache), any(Path.class), any()); // &lt;= verify(spylfs).mkdir(eq(publicCache), ....); .... } .... }</span></span></code> </pre> <br>  ูุฃุฎูุฑุง ุ V6072 ูุฑุฉ ุฃุฎุฑู =).  ูุชุบูุฑุงุช ูุนุฑุถ ุงูุฌุฒุก ุงููุดุจูู: <i>usercache</i> ู <i>publicCache</i> . <br><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br>  ุชุชู ูุชุงุจุฉ ูุฆุงุช ุงูุขูุงู ูู ุณุทูุฑ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ุงูุชุทููุฑ.  ุนุงุฏุฉู ูุง ูุชู ุงูุญูุงุธ ุนูู ุฑูุฒ ุงูุฅูุชุงุฌ ูุธูููุง ูู ุงูุฃุฎุทุงุก ูุงูุนููุจ ูุงูุนููุจ (ูุฎุชุจุฑ ุงููุทูุฑูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจูู ุ ุชุชู ูุฑุงุฌุนุฉ ุงูุฑูุฒ ููุง ุฅูู ุฐูู).  ุงูุงุฎุชุจุงุฑุงุช ูู ุจุงูุชุฃููุฏ ุฃุฏูู ูู ูุฐุง ุงูุตุฏุฏ.  ูููู ููุงุฎุชุจุงุก ูู ุงูุงุฎุชุจุงุฑุงุช ุฃู ุชุฎุชุจุฆ ุจุณูููุฉ ูุฑุงุก "ุนูุงูุฉ ุฎุถุฑุงุก".  ุจูุง ุฃูู ุฑุจูุง ุญุตูุช ุนูู ูุฑุงุฌุนุฉ ุชุญุฐูุฑุงุช ุงูููู ุ ูุฅู ุงูุงุฎุชุจุงุฑ ุงูุฃุฎุถุฑ ููุณ ุฏุงุฆููุง ุจูุซุงุจุฉ ุงุฎุชุจุงุฑ ูุงุฌุญ. <br><br>  ูุฐู ุงููุฑุฉ ุ ุนูุฏ ุงูุชุญูู ูู ูุงุนุฏุฉ ููุฏ Apache Hadoop ุ ุชุจูู ุฃู ุงูุชุญููู ุงูุซุงุจุช ุถุฑูุฑู ููุบุงูุฉ ุณูุงุก ูู ููุฏ ุงูุฅูุชุงุฌ ุฃู ุงูุงุฎุชุจุงุฑุงุช ุงูุชู ุชูุนุจ ุฃูุถูุง ุฏูุฑูุง ููููุง ูู ุงูุชุทููุฑ. <br><br>  ูุฐูู ุฅุฐุง ููุช ุชูุชู ุจุฌูุฏุฉ ุงูููุฏ ูุงุฎุชุจุงุฑุงุชู ุ ุฃูุชุฑุญ ุนููู ุฃู ุชุถุน ูุนุงูู ุนูู ุงูุชุญููู ุงูุซุงุจุช.  ุงุฌุนู <a href="https://www.viva64.com/en/pvs-studio-download/">PVS-Studio</a> ุฃูู ููุงูุณ ูู ูุฐุง ุงููุดุฑูุน. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar480918/">https://habr.com/ru/post/ar480918/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar480904/index.html">PHP Microservice Framework: ุจูุฆุฉ ุงูุชุทููุฑ ูู Swoft</a></li>
<li><a href="../ar480906/index.html">ูุชุงุจุฉ ูุนุจุฉ ุจูุซูู ุจุณูุทุฉ</a></li>
<li><a href="../ar480910/index.html">ููููุฉ ุฌุนู ูุฆุฉ ุงุฎุชุจุงุฑ ุงูุฃุณุงุณูุฉ ูุงุฎุชุจุงุฑุงุช ุงูุณููููููู ูุงูุจุฏุก ูู ุฎูุงู JUnit RuleChain</a></li>
<li><a href="../ar480912/index.html">ุฏุจ ูู ุงูุนูู. ูุชุงุจุฉ TodoMVC. ุงูุฌุฒุก 1</a></li>
<li><a href="../ar480914/index.html">ุฎุฏูุงุช Microservices ูููุจุชุฏุฆูู</a></li>
<li><a href="../ar480920/index.html">ุงุฎุชุจุงุฑ ููุงุชูุญ TP-Link ูุน PoE ุจุนูุฏ ุงููุฏู. ูุงููููู ุญูู ุชุฑููุงุช ุงูููุงุฐุฌ ุงููุฏููุฉ</a></li>
<li><a href="../ar480922/index.html">Evgeny Usvitsky: "ูู ุดุฎุต ูู ุงูุนุงูู ูุนุฑู ุฃูู ูููู ุงูุญุตูู ุนูู ุงูุจูุงูุงุช ุงูุฌุบุฑุงููุฉ ุจุญุฑูุฉ - ููุท ูู OSM"</a></li>
<li><a href="../ar480924/index.html">ููู ูููุงุฐุง ุฃุนุงุฏ ุชุตููู ุงููุจุฏุนูู ูู ุทุจุนุฉ MediEvil ูุฏุฑุจ ุงููุนุจุฉ</a></li>
<li><a href="../ar480926/index.html">ูุธุฑูุฉ ุงูุงุญุชูุงูุงุช ูู ุฃุฌู ุชูุฏูู ุฏูููุฉ ุฌุณุฏูุง</a></li>
<li><a href="../ar480928/index.html">ุงุจุงุชุดู Hadoop ููุฏ ุงูุฌูุฏุฉ: ุฅูุชุงุฌ ุงุฎุชุจุงุฑ VS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>