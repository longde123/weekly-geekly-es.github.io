<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤚🏾 🎍 👂 20 proyek, 20 bahasa, batas waktu kemarin. Bagian 2 ⚙️ 👎🏻 🤵🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Melanjutkan serangkaian artikel tentang pengaturan pelokalan berkelanjutan. Anda dapat menemukan yang pertama di sini . Pada artikel ini saya akan mem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>20 proyek, 20 bahasa, batas waktu kemarin. Bagian 2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446640/"><p>  Melanjutkan serangkaian artikel tentang pengaturan pelokalan berkelanjutan.  Anda dapat menemukan yang pertama di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> .  Pada artikel ini saya akan memberi tahu Anda cara mengintegrasikan bundel Serge-Smartcat-GitLab dan mengkonfigurasi file konfigurasi Serge menggunakan contoh proyek uji.  Instruksi untuk Ubuntu. </p><br><h2>  Instalasi melalui vagrantfile </h2><br><p>  Jika Anda tidak memiliki server dengan Ubuntu, Anda dapat menggunakan Vagrant.  Cara kerjanya: </p><a name="habracut"></a><br><ol><li>  Instal Vagrant dan VirtualBox mengikuti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">instruksi</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Unduh</a> skrip vagrantfile dan bash. </li><li>  Luncurkan vagrantfile mengikuti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">instruksi</a> . </li></ol><br><p>  Hasil build Vagrant akan menjadi mesin virtual Ubuntu tempat Serge diinstal dengan plugin Smartcat.  Semua file yang diperlukan akan disalin, kunci ssh dibuat.  Anda dapat segera melanjutkan untuk mengatur proyek dan meluncurkan aplikasi. </p><br><h2>  Instalasi manual </h2><br><h3>  Pembuatan Pengguna </h3><br><p>  Buat grup pengguna layanan: </p><br><pre><code class="bash hljs">sudo groupadd serge</code> </pre> <br><p>  Buat pengguna serge dengan direktori home / usr / local / serge: </p><br><pre> <code class="bash hljs">sudo useradd -g serge serge -m -d /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/serge</code> </pre> <br><h3 id="ustanovka-serge">  Instal Serge </h3><br><p>  Dokumentasi lengkap Serge ada di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br>  Perbarui metadata dari database paket lokal: </p><br><pre> <code class="bash hljs">sudo apt-get -qq update</code> </pre> <br><p>  Instal alat perakitan, serta paket yang diperlukan.  Sebelum memulai instalasi, pastikan Perl 5.10 atau lebih tinggi diinstal. </p><br><pre> <code class="bash hljs">sudo apt-get -qq -y install build-essential libssl-dev libexpat-dev unzip wget</code> </pre> <br><p>  Buka direktori home pengguna serge dan instal Serge dengan semua dependensi yang diperlukan. </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/serge sudo -u serge wget https://github.com/evernote/serge/archive/master.zip -O serge-master.zip sudo -u serge unzip serge-master.zip sudo -u serge unlink serge-master.zip <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> serge-master sudo cpan App::cpanminus sudo cpanm --installdeps . sudo -u serge sudo ln -s /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/serge/serge-master/bin/serge /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin/serge</code> </pre> <br><h3 id="ustanovka-plagina-smartcat">  Menginstal Plugin Smartcat </h3><br><pre> <code class="bash hljs">sudo cpanm HTTP::Daemon@6.01 sudo cpanm Serge::Sync::Plugin::TranslationService::Smartcat sudo cpan install LWP::Protocol::https</code> </pre> <br><h3 id="sozdanie-klyuchey">  Penciptaan Kunci </h3><br><p>  Buat pengguna serge dengan kunci ssh yang akan digunakan pengguna serge di GitLab: </p><br><pre> <code class="bash hljs">sudo -u serge ssh-keygen -t rsa -N <span class="hljs-string"><span class="hljs-string">""</span></span> -f .id_rsa_serge</code> </pre> <br><h2 id="integraciya-s-gitlab">  Integrasi dengan GitLab </h2><br><p>  Buat pengguna serge di GitLab dan tambahkan ke semua repositori pengembang. <br>  Salin kunci ssh dari file id_rsa_serge.pub ke pengaturan profil pengguna serge di GitLab.  Ini diperlukan agar Serge dapat menerima dan mengirim string di GitLab. </p><br><p>  Instalasi selesai! </p><br><h2 id="integraciya-so-smartcat">  Integrasi Smartcat </h2><br><p>  Untuk memulai, Anda harus: </p><br><ol><li>  Mendaftar untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Smartcat</a> . </li><li>  Buat proyek dengan menunjukkan bahasa yang ingin Anda terjemahkan.  Saat mengatur plugin, Anda akan memerlukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kode bahasa yang</a> digunakan oleh Smartcat. </li><li>  Dapatkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">project_id</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">token</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dan token_id</a> . </li><li>  Menulis ke <a href="">support@smartcat.ai</a> dan meminta untuk mengaktifkan dukungan untuk algoritma parsing file Serge </li></ol><br><h2 id="nastroyka-konfiguracii-serge-smartcat">  Mengkonfigurasi Serge-Smartcat </h2><br><p>  Sebelum melanjutkan ke pengaturan, saya akan menjelaskan prinsip umum operasi.  Siklus lokalisasi standar mencakup 5 langkah: <br><img src="https://habrastorage.org/webt/zt/an/oe/ztanoeg340nl7-n7asuwfmblqps.png" alt="gambar"></p><br><ul><li>  <strong>pull</strong> - dapatkan baris baru dari repositori. </li><li>  <strong>pull-ts</strong> - dapatkan string lokal dari Smartcat (plugin Smartcat diaktifkan). </li><li>  <strong>localize</strong> - semua format sumber dari repositori diuraikan dan dikonversi ke file .po, terjemahan yang diterima ditulis ke file .po.  Semua baris ditulis ke database memori terjemahan Serge. </li><li>  <strong>push-ts</strong> - baris baru yang diterima pada langkah pertama dikirim ke Smartcat (menggunakan plugin Smartcat). </li><li>  string yang dilokalisasikan dilakukan di GitLab. <br>  Anda dapat menggunakan integrasi dengan sistem CAT lain, misalnya, ada plugin untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pootle</a> . </li></ul><br><h3 id="serge-i-git-repozitorii">  Serge dan git gudang </h3><br><p>  Bagaimana Serge tahu jalur mana yang harus dikirim untuk terjemahan?  Untuk menentukan baris baru, alat git standar digunakan: perbedaan antara cabang master dan yang sekarang diambil.  Diff dikirim untuk terjemahan. </p><br><p><img src="https://habrastorage.org/webt/ta/ju/u2/tajuu2v7hgqo1modl8uluubafoy.png" alt="gambar"></p><br><p>  <strong>Penting</strong> : Sebagai aturan, cabang master dilindungi, oleh karena itu cabang terjemahan tambahan digunakan untuk mendefinisikan diff, kami menyebutnya basis-terjemahan.  Yaitu, setelah rilis dilepaskan pada master, master juga harus dipegang dalam basis-terjemahan. </p><br><p>  Ada poin penting di sini.  Adalah perlu untuk membangun proses sedemikian rupa sehingga, di satu sisi, pengembang memahami apa dan pada saat apa akan pergi ke terjemahan, dan di sisi lain, sehingga techpec tidak berjalan dalam lingkaran, memegang kepalanya, karena perbedaannya adalah 1000 baris.  Dan sepertinya hanya judulnya yang diperbaiki. </p><br><h4 id="princip-raboty">  Prinsip kerja </h4><br><p>  Serge memasuki repositori, mengambil semua cabang, dan mulai membandingkannya dengan cabang master.  Untuk setiap cabang di mana diff terdeteksi, itu membuat satu set dokumen terjemahan dalam proyek Smartcat.  Agar tidak terjebak dalam kekacauan cabang yang tidak relevan dan tidak berdiri di dekat setiap pengembang dengan pertanyaan: "apakah Anda ingat untuk menghapus cabang?", Sangat nyaman untuk menggunakan awalan.  Sebagai contoh, Serge hanya bekerja dengan cabang yang memiliki awalan <strong>terjemahan</strong> . </p><br><p>  Juga penting bahwa teks-teks yang sudah dibaca dan disetujui yang siap untuk penerjemahan jatuh ke cabang dengan terjemahan awalan.  Lagipula, tidak ada yang mau menguraikan sejarah commit dengan sia-sia mencoba memahami teks macam apa itu dan mengapa berbeda seperti ini? </p><br><h4 id="podgotovka-kontenta">  Persiapan Konten </h4><br><p>  Proses persiapan konten kami adalah sebagai berikut: </p><br><p><img src="https://habrastorage.org/webt/bz/hr/uv/bzhruvkmajzvstsdzgtdsbtqmfg.png" alt="gambar"></p><br><p>  <strong>Pernyataan masalah.</strong>  Ketika tugas berada di tahap formulasi, kadang-kadang teks sudah muncul di sana yang harus masuk ke aplikasi tidak berubah.  Jika ya, copywriter dan penulis teknis membantu menyelesaikannya. </p><br><p>  <strong>Pengembangan tata letak.</strong>  Ketika perancang menyiapkan tata letak, penulis teknis dan copywriter membacakan semua teks.  Dengan demikian, tata letak yang disimpulkan dalam bahasa Inggris termasuk dalam pengembangan.  Pengembang tidak harus berpikir tentang teks, ia hanya mengambil garis yang sudah jadi dari tata letak. </p><br><p>  <strong>Pengembangan.</strong>  Sayangnya, langkah-langkah sebelumnya tidak dapat mencakup semua jenis teks yang mungkin.  Misalnya, tata letak tidak termasuk validator, kesalahan API, beberapa modal windows.  Jika selama proses pengembangan itu perlu menambahkan baris, penulis teknis dan copywriter menyediakan semua teks yang diperlukan pengembang. </p><br><p>  Dengan demikian, pada suatu titik waktu, kami memiliki keadaan di mana cabang berisi semua teks baru yang diperlukan untuk bagian dari kode yang sedang dikembangkan di dalamnya.  Pada titik ini, cabang baru dibuat darinya dengan terjemahan awalan- dan Serge dapat memulai proses penerjemahan.  Ketika terjemahan siap, pengembang mengambilnya dari cabang terjemahan, dan kemudian bertindak berdasarkan aliran git yang diterima dalam tim. </p><br><p>  Proses ini meminimalkan keterlibatan pengembang dalam proses pelokalan, dan juga meminimalkan jumlah tenaga kerja manual: Anda hanya perlu membuat cabang. </p><br><p>  Penjelasan lebih lanjut tentang proses penyetelan sangat bergantung pada fakta bahwa tim memiliki pengaturan dan proses yang serupa. </p><br><h2 id="nastroyka-proekta">  Penyiapan proyek </h2><br><p>  Masuk sebagai serge: </p><br><pre> <code class="bash hljs">sudo -Hu serge -i</code> </pre> <br><p>  Buat direktori grup: </p><br><pre> <code class="bash hljs">mkdir groups</code> </pre> <br><p>  Direktori ini akan meng-host proyek yang sesuai dengan repositori di GitLab.  Masuk akal untuk mengulangi struktur grup repositori dan lokasinya untuk memudahkan navigasi. </p><br><p>  Buat direktori untuk proyek pertama: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> groups mkdir myproject <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> myproject</code> </pre> <br><p>  Salin file konfigurasi Serge.  Anda dapat menginstal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">komandan tengah malam</a> dan mengelola file menggunakan manajer file.  Sebelum memasang MC, Anda harus keluar dari akun gabung. </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> sudo apt install mc sudo -Hu serge -i</code> </pre> <br><p>  File yang akan disalin dari / usr / local / serge / serge-master / bin / tools / fitur-branch-config-generator: </p><br><ul><li>  File konfigurasi Serge: <em>myproject.cfg</em> </li><li>  file templat pekerjaan: <em>myproject.inc</em> </li><li>  .serge template: <em>myproject.serge.tmpl</em> </li><li>  file untuk menambahkan cabang secara manual: <em>myproject_branches.txt</em> </li><li>  skrip untuk bekerja dengan GitLab: <em>fbcgen.pl</em> </li></ul><br><pre> <code class="bash hljs">cp /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/serge/serge-master/bin/tools/feature-branch-config-generator/{myproject.cfg,myproject.inc,myproject.serge.tmpl,myproject_branches.txt} /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/serge/serge-master/groups/myproject cp /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/serge/serge-master/bin/tools/feature-branch-config-generator/fbcgen.pl /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/serge/serge-master/</code> </pre> <br><p>  Buat file untuk merekam log plugin: </p><br><pre> <code class="bash hljs">mkdir <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> touch smartcat.log</code> </pre> <br><h3 id="nastroyka-myprojectinc">  Konfigurasikan myproject.inc </h3><br><ul><li>  Di bidang nama, tentukan format file sumber daya yang digunakan dalam proyek. </li><li>  Isi id dengan mask% yourproject%.% Yourformat%.% Yourmasterbranchname%. </li><li>  Di bidang destination_languages, tentukan bahasa yang ingin Anda terjemahkan. </li><li>  Isi sumber dengan topeng ./%proyekAnda%/%AndaMasterbranch%/res/en. </li><li>  Isi output_file_path dengan mask ./%proyek Anda%/%ourmasterbranch%/res/% LANG% /% FILE%. </li><li>  Isi source_match dengan mask.% Yourformat%. </li><li>  Bergantung pada format file sumber daya, tentukan plugin yang diperlukan untuk parsing.  Plugin terdaftar dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi server</a> .  Isi ts_file_path dengan mask ./po/%proyek Anda%/% LOCALE% /% FILE% .po. </li><li>  Isi master_job dengan mask% yourproject%.% Format% Anda.% Yourmasterbranch%. <br>  Parameter yang tersisa dibiarkan tidak berubah. </li></ul><br><h3 id="nastroyka-myprojectsergetmpl">  Konfigurasikan myproject.serge.tmpl </h3><br><ul><li>  project_id - id proyek di Smartcat </li><li>  token_id, token - data dari Smartcat </li><li>  remotepath - di sini Anda harus menentukan dengan benar nama parameter dan nilainya {% yourmasterbranch %% ssh_path_to_your_repo% #% yourmasterbranch%} </li><li>  $ FBCGEN_DIR_PADDED -% ssh_path_to_your_repo% # FBCGEN_BRANCH </li><li>  id - job.yourmasterbranch </li><li>  nama - proyek Anda </li><li>  source_language - id </li><li>  destination_languages ​​- bahasa yang perlu diterjemahkan </li><li>  source_dir - ./branches/yourmasterbranch/%path_to_resource_files% </li><li>  source_match - id.% format% Anda </li><li>  db_source - DBI: SQLite: dbname -./% proyek Anda% .db3 </li><li>  db_namespace -% yourproject% </li><li>  ts_file_path - ./po/PROJECT_ID_IN_SMARTCAT/% LANG% /% FILE% .po </li><li>  output_file_path - ./branches/%yourmasterbranch%/%path_to_resource_files%/% LOCALE%.  % format Anda% </li><li>  output_lang_rewrite { <br>  zh-hans zh-cn '' zh-hant-tw zh-tw <br>  } - Parameter ini memungkinkan Anda untuk mendefinisikan kembali penamaan bahasa.  Jika penunjukan bahasa dalam proyek tidak cocok dengan penunjukan yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">digunakan</a> dalam Smartcat, Anda dapat mendefinisikannya kembali. </li><li>  master_job - pekerjaan.% yourmasterbranch% </li><li>  @inherit -. # jobs /:% yourmasterbranch% </li><li>  source_dir (dalam FBCGEN_BRANCH_JOBS) - ./branches/$FBCGEN_DIR/%path_to_resource_files%/ </li><li>  output_file_path (dalam FBCGEN_BRANCH_JOBS) - ./branches/$FBCGEN_DIR/%path_to_resource_files%/% LOCALE%.  % format Anda% </li></ul><br><p>  <strong>Penting!</strong>  Di source_path_prefix, akhir harus menjadi titik% FBCGEN_BRANCH. </p><br><p>  Panggilan ke plugin Smartcat harus ditambahkan ke bagian myproject.serge.tmpl yang sesuai </p><br><pre> <code class="bash hljs">sync { ts { plugin Smartcat data { project_id 12345678-1234-1234-1234-1234567890123 token_id 12345678-1234-1234-1234-1234567890123 token 1_qwertyuiopasdfghjklzxcvbn push { disassemble_algorithm_name Serge.io PO } pull { complete_projects NO complete_documents YES } log_file ./<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/smartcat.log } }</code> </pre><br><p>  Deskripsi beberapa parameter: </p><br><ul><li>  <strong>disassemble_algorithm_name Serge.io PO</strong> - gunakan hash kunci yang diteruskan ke Serge.  Parameter ini diperlukan untuk mengoptimalkan waktu eksekusi dari perintah pull-ts dan push-ts. </li><li>  <strong>complete_projects NO</strong> - pilih baris dari Smartcat hanya jika semua dokumen dalam proyek selesai.  Untuk integrasi kami, proyek di Smartcat identik dengan repositori di GitLab, dan termasuk sekumpulan dokumen.  Dokumen adalah produk Cartesian dari jumlah cabang di repositori dan bahasa tempat terjemahan dibuat.  Artinya, jika di repositori Anda ada 2 cabang yang perlu diterjemahkan ke dalam 6 bahasa, 12 dokumen akan dibuat dalam proyek. </li><li>  <strong>complete_documents YES</strong> - pilih baris dari Smartcat jika dokumen dalam status selesai.  Ini dilakukan untuk meminimalkan jumlah komit ke repositori. </li></ul><br><h2 id="primer-nastroennogo-proekta">  Contoh Proyek Kustom </h2><br><p>  Di bawah ini adalah file konfigurasi untuk proyek dengan 6 bahasa.  Proyek menyimpan baris sumber dalam format js.  Format penamaan file 5 karakter digunakan.  Path ke file sumber daya: ./branches/base-translate/client/src/translations. </p><br><h3 id="myprojectcfg">  myproject.cfg </h3><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># This is a configuration file for fbcgen.pl # Usage: fbcgen.pl myproject.cfg # Root directory where the master branch checkout is located. # (path is relative to the location of the configuration file itself). # The local checkout should be initialized *before* fbcgen.pl is run. # You can run `serge --initialize onboarding-frontend.serge.tmpl` # to do an initial checkout of the project data. $data_dir = './branches/base-translate'; $branch_list_file = 'myproject_branches.txt'; # Where to load Serge config template from. # (path is relative to the location of the configuration file itself). $template_file = "myproject.serge.tmpl"; # Where to save the localized Serge config file. # (path is relative to the location of the configuration file itself). $output_file = "myproject.local.serge"; our $skip_branch_mask = '^(master)$'; # skip these branches unconditionally our $unmerged_branch_mask = '^(translate-)'; # process unmerged branches matching this mask our $any_branch_mask = '^(translate-)'; # additionally, process these branches even if they were merged # Filter out commits that match this mask when determining if branch is inactive. $skip_commit_mask = '^l10n@example.com'; # This sub returns a hash map of additional parameters # that can be referenced in template as `$FBCGEN_&lt;VARIABLE_NAME&gt;`. # For example, `EXTRA_INCLUDE` parameter generated in the function below # is referenced in `myproject.serge.tmpl` file as `$FBCGEN_EXTRA_INCLUDE`. $calculate_params = sub { my ($branch) = @_; return { # for branch names starting with `release/`, return an empty string; # otherwise, return a string that will be used in the `@include` directive EXTRA_INCLUDE =&gt; $branch =~ m!^release/! ? '' : "myproject.inc#skip-saving-localized-files\n" } }</span></span></code> </pre> <br><h3 id="myprojectinc">  myproject.inc </h3><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Here we define a job template (common parameters) that will be reused # across all jobs in the generated configuration file. # Certain job parameters (like job ID and paths) will be overridden # in each feature branch job. job-template { name JS file processing ('master' branch) id myproject.js.base-translate # master job id db_namespace myproject destination_languages ru ko de ja zh-Hans source_dir ./myproject/base-translate/res/en output_file_path ./myproject/base-translate/res/%LANG%/%FILE% source_match \.js$ parser { plugin parse_js } ts_file_path ./po/myproject/%LOCALE%/%FILE%.po callback_plugins { :feature_branch { plugin feature_branch data { master_job myproject.js.base-translate # this must match your master job id } } } } # This block will be included conditionally # for all branches except the `release/` ones (see myproject.cfg). # This allows one to skip saving localized files in non-release branches # (but still gather from them strings for translation). skip-saving-localized-files { callback_plugins { :skip-saving-localized-files { plugin process_if phase can_generate_localized_file data { if { lang_matches . then { return NO } } } } } }</span></span></code> </pre> <br><h3 id="myprojectsergetmpl">  myproject.serge.tmpl </h3><br><pre> <code class="bash hljs">sync { ts { plugin Smartcat data { project_id %project_id% token_id %token_id% token %token% push { disassemble_algorithm_name Serge.io PO } pull { complete_projects NO complete_documents YES } } } vcs { plugin git data { local_path ./branches add_unversioned YES name L10N Robot email l10n-robot@example.com remote_path { base-translate git@gitlab.loc:common/myproject.git<span class="hljs-comment"><span class="hljs-comment">#base-translate /* FBCGEN_BRANCH_REMOTES $FBCGEN_DIR_PADDED git@gitlab.loc:common/myproject.git#$FBCGEN_BRANCH */ } } } } jobs { :develop { id job.base-translate name myproject source_language en destination_languages ru zh-Hans ko de ja optimizations NO source_dir ./branches/base-translate/client/src/translations source_match `en-US.js` debug NO parser { plugin parse_js } leave_untranslated_blank YES db_source DBI:SQLite:dbname=./myproject.db3 db_namespace myproject ts_file_path ./po/1bd80338-a0b5-48b3-822c-e90affd2cdcc/%LANG%/%FILE%.po output_file_path ./branches/base-translate/client/src/translations/%CULTURE%.%EXT% output_bom NO output_lang_rewrite { zh-Hans zh } callback_plugins { :feature_branch { plugin feature_branch data { master_job job.base-translate } } } } /* FBCGEN_BRANCH_JOBS :$FBCGEN_DIR { @inherit .#jobs/:develop id job.$FBCGEN_DIR $FBCGEN_EXTRA_INCLUDE source_path_prefix $FBCGEN_BRANCH. source_dir ./branches/$FBCGEN_DIR/client/src/translations/ output_file_path ./branches/$FBCGEN_DIR/client/src/translations/%CULTURE%.%EXT% } */ }</span></span></code> </pre> <br><h3 id="zapusk-prilozheniya">  Peluncuran aplikasi </h3><br><p>  Kloning repositori </p><br><pre> <code class="bash hljs">GIT_SSH_COMMAND=<span class="hljs-string"><span class="hljs-string">"ssh -i /usr/local/serge/serge-master/.id_rsa_serge"</span></span> git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> -b base-translate git@gitlab.loc:groups/myproject.git branches/base-translate/</code> </pre> <br><h4 id="lokalizacionnyy-cikl">  Siklus lokalisasi </h4><br><p>  File .serge terbentuk: </p><br><pre> <code class="bash hljs">GIT_SSH_COMMAND=<span class="hljs-string"><span class="hljs-string">"ssh -i /usr/local/serge/serge-master/.id_rsa_serge"</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/serge/serge-master/fbcgen.pl myproject.cfg</code> </pre> <br><p>  Mengambil perubahan dari semua cabang repositori: </p><br><pre> <code class="bash hljs">GIT_SSH_COMMAND=<span class="hljs-string"><span class="hljs-string">"ssh -i /usr/local/serge/serge-master/.id_rsa_serge"</span></span> serge pull --initialize myproject.local.serge</code> </pre> <br><p>  Kumpulan perubahan terjemahan untuk semua cabang dari Smartcat: </p><br><pre> <code class="bash hljs">GIT_SSH_COMMAND=<span class="hljs-string"><span class="hljs-string">"ssh -i /usr/local/serge/serge-master/.id_rsa_serge"</span></span> serge pull-ts myproject.local.serge</code> </pre> <br><p>  Pembentukan basis data dan .po: </p><br><pre> <code class="bash hljs">GIT_SSH_COMMAND=<span class="hljs-string"><span class="hljs-string">"ssh -i /usr/local/serge/serge-master/.id_rsa_serge"</span></span> serge localize myproject.local.serge</code> </pre> <br><p>  Mengirim data baru dari repositori ke Smartcat: </p><br><pre> <code class="bash hljs">GIT_SSH_COMMAND=<span class="hljs-string"><span class="hljs-string">"ssh -i /usr/local/serge/serge-master/.id_rsa_serge"</span></span> serge push-ts myproject.local.serge</code> </pre> <br><p>  Mengirim transfer yang diterima ke repositori di cabang yang sesuai: </p><br><pre> <code class="bash hljs">GIT_SSH_COMMAND=<span class="hljs-string"><span class="hljs-string">"ssh -i /usr/local/serge/serge-master/.id_rsa_serge"</span></span> serge push myproject.local.serge</code> </pre> <br><p>  Artikel-artikel berikut akan dikhususkan untuk Pemecahan Masalah dan deskripsi kasus integrasi khusus. <br>  Artikel terakhir: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">20 proyek, 20 bahasa, batas waktu kemarin.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 3</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id446640/">https://habr.com/ru/post/id446640/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id446628/index.html">Beri lebih banyak HighLoad ++: mulai Senin di St. Petersburg</a></li>
<li><a href="../id446630/index.html">Bagaimana memilih printer 3D, atau mengapa Anda membutuhkan meja pemanas dan kamera tertutup</a></li>
<li><a href="../id446632/index.html">Dari Hukum ke Pengembangan Data Besar</a></li>
<li><a href="../id446634/index.html">Digest SDN - Enam Emulator Open Source</a></li>
<li><a href="../id446638/index.html">Cisco HyperFlex vs. pesaing: menguji kinerja</a></li>
<li><a href="../id446642/index.html">Daftar periksa untuk membuat dan menerbitkan aplikasi web</a></li>
<li><a href="../id446648/index.html">Pengembangan operator Kubernetes dengan Kerangka Operator</a></li>
<li><a href="../id446654/index.html">Bagaimana kami menyimpan ulasan kode</a></li>
<li><a href="../id446656/index.html">Pengodean suara 1600bit / s dengan neural vocoder LPCNet</a></li>
<li><a href="../id446660/index.html">AI, siswa dan hadiah besar: bagaimana melakukan pembelajaran mesin di kelas 8</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>