<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒˆ ğŸ‘©ğŸ¿â€ğŸ’¼ ğŸ‘ğŸ½ Apprenez OpenGL. LeÃ§on 6.4 - IBL. Exposition spÃ©culaire ğŸ‘¨ğŸ¿â€ğŸ”¬ â›°ï¸ ğŸ¤¶ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans la leÃ§on prÃ©cÃ©dente, nous avons prÃ©parÃ© notre modÃ¨le PBR pour travailler avec la mÃ©thode IBL - pour cela, nous devions prÃ©parer Ã  l'avance une ca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apprenez OpenGL. LeÃ§on 6.4 - IBL. Exposition spÃ©culaire</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429744/"><img align="left" src="https://habrastorage.org/web/c9e/9b2/a3b/c9e9b2a3baf749ab8e2b385c6d93d966.png" alt="OGL3" width="300"><br>  Dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">leÃ§on prÃ©cÃ©dente,</a> nous avons prÃ©parÃ© notre modÃ¨le PBR pour travailler avec la mÃ©thode IBL - pour cela, nous devions prÃ©parer Ã  l'avance une carte d'irradiation dÃ©crivant la partie diffuse de l'Ã©clairage indirect.  Dans cette leÃ§on, nous ferons attention Ã  la deuxiÃ¨me partie de l'expression de la rÃ©flectivitÃ© - le miroir: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1"><span class="MJXp-msubsup" id="MJXp-Span-2"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-3" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-4" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-5" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">p</span><span class="MJXp-mo" id="MJXp-Span-7" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-8">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12">g</span><span class="MJXp-msubsup" id="MJXp-Span-13"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-15" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-16" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-18">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">t</span><span class="MJXp-mtext" id="MJXp-Span-22">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">t</span><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-31">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">a</span></span></span><span class="MJXp-mo" id="MJXp-Span-37" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-38"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-40" style="vertical-align: -0.4em;">d</span></span><span class="MJXp-mtext" id="MJXp-Span-41">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">c</span><span class="MJXp-mrow" id="MJXp-Span-46"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">c</span></span><span class="MJXp-mrow" id="MJXp-Span-48"><span class="MJXp-mtext" id="MJXp-Span-49">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">i</span></span><span class="MJXp-mo" id="MJXp-Span-52" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-53"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-55" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mtext" id="MJXp-Span-56">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">c</span><span class="MJXp-mrow" id="MJXp-Span-61"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">G</span></span><span class="MJXp-mrow" id="MJXp-Span-65"><span class="MJXp-mn" id="MJXp-Span-66">4</span><span class="MJXp-mo" id="MJXp-Span-67" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-68">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">g</span><span class="MJXp-msubsup" id="MJXp-Span-73"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-75" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mtext" id="MJXp-Span-76">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">n</span><span class="MJXp-mo" id="MJXp-Span-82" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-83" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-84">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">g</span><span class="MJXp-msubsup" id="MJXp-Span-89"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-91" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-92">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">n</span><span class="MJXp-mo" id="MJXp-Span-98" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-99" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mo" id="MJXp-Span-100" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-101"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-103" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-104" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">p</span><span class="MJXp-mo" id="MJXp-Span-106" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-107">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">g</span><span class="MJXp-msubsup" id="MJXp-Span-112"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-114" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-115" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">n</span><span class="MJXp-mtext" id="MJXp-Span-117">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">t</span><span class="MJXp-mtext" id="MJXp-Span-122">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-126">g</span><span class="MJXp-msubsup" id="MJXp-Span-127"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-129" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">d</span><span class="MJXp-mtext" id="MJXp-Span-131">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">g</span><span class="MJXp-msubsup" id="MJXp-Span-136"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-138" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="134.751ex" height="2.78ex" viewBox="0 -832 58017.5 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="2942" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="14781" y="0"></use><g transform="translate(15171,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-66" x="16413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-72" x="16963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="17415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="17944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="18378" y="0"></use><g transform="translate(18811,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="753" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-2B" x="20132" y="0"></use><g transform="translate(21133,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-73" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-66" x="22337" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-72" x="22887" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="23339" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="23868" y="0"></use><g transform="translate(24302,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(26666,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="13946" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="14336" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="41392" y="0"></use><g transform="translate(41781,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="42807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-70" x="43196" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-2C" x="43700" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="44395" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="44881" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="45759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="46226" y="0"></use><g transform="translate(46706,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="47580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6E" x="47969" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="48820" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="49253" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="49777" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="50262" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="50874" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="51359" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="52238" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="52704" y="0"></use><g transform="translate(53185,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="54059" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="54832" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="55318" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="56196" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="56663" y="0"></use><g transform="translate(57143,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> L_o (p, \ omega_o) = \ int \ limits _ {\ Omega} (k_d \ frac {c} {\ pi} + k_s \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n) )}) L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i </script></p><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Table des matiÃ¨res</b> <div class="spoiler_text">  Partie 1. Pour commencer <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Opengl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CrÃ©ation de fenÃªtres</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bonjour fenÃªtre</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bonjour triangle</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Shaders</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Textures</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Transformations</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SystÃ¨mes de coordonnÃ©es</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Appareil photo</a> </li></ol><br>  Partie 2. Ã‰clairage de base <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les couleurs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bases d'Ã©clairage</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MatÃ©riaux</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes de texture</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sources lumineuses</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sources d'Ã©clairage multiples</a> </li></ol><br>  Partie 3. TÃ©lÃ©charger des modÃ¨les 3D <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BibliothÃ¨que Assimp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Classe de polygone de maillage</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Classe de modÃ¨le 3D</a> </li></ol><br>  Partie 4. FonctionnalitÃ©s avancÃ©es d'OpenGL <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Test de profondeur</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Test au pochoir</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MÃ©lange de couleurs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Couper les visages</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tampon de trame</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes cubiques</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Traitement avancÃ© des donnÃ©es</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GLSL avancÃ©</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Shader gÃ©omÃ©trique</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Instanciation</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lissage</a> </li></ol><br>  Partie 5. Ã‰clairage avancÃ© <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ã‰clairage avancÃ©.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ModÃ¨le Blinn-Fong.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Correction gamma</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes fantÃ´mes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes ombrÃ©es omnidirectionnelles</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartographie normale</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mappage de parallaxe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HDR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bloom</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rendu diffÃ©rÃ©</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SSAO</a> </li></ol><br>  Partie 6. PBR <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ThÃ©orie</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sources de lumiÃ¨re analytiques</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Irradiation diffuse.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exposition miroir.</a> </li></ol><br></div></div><br>  Vous pouvez remarquer que le composant miroir Cook-Torrens (sous-expression avec un facteur <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-139"><span class="MJXp-msubsup" id="MJXp-Span-140"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-142" style="vertical-align: -0.4em;">s</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.215ex" height="2.419ex" viewBox="0 -780.1 953.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-73" x="737" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> k_s </script>  ) n'est pas constant et dÃ©pend de la direction de la lumiÃ¨re incidente, <b>ainsi que</b> de la direction d'observation.  La solution de cette intÃ©grale pour toutes les directions possibles d'incidence de la lumiÃ¨re, ainsi que toutes les directions possibles d'observation en temps rÃ©el, n'est tout simplement pas faisable.  Par consÃ©quent, les chercheurs d'Epic Games ont proposÃ© une approche appelÃ©e l' <i>approximation Ã  somme divisÃ©e</i> , qui vous permet de prÃ©parer Ã  l'avance des donnÃ©es pour la composante miroir, sous certaines conditions. <br><br>  Dans cette approche, la composante miroir de l'expression de la rÃ©flectance est divisÃ©e en deux parties, qui peuvent Ãªtre individuellement prÃ©-convolutÃ©es puis combinÃ©es dans un shader PBR pour Ãªtre utilisÃ©es comme source de rayonnement spÃ©culaire indirect.  Comme pour la gÃ©nÃ©ration de cartes d'irradiation, le processus de convolution reÃ§oit une carte d'environnement HDR Ã  son entrÃ©e. <br><br>  Pour comprendre la mÃ©thode d'approximation Ã  somme divisÃ©e, regardons Ã  nouveau l'expression de la rÃ©flectivitÃ©, ne laissant que la sous-expression du composant miroir (la partie diffuse a Ã©tÃ© considÃ©rÃ©e sÃ©parÃ©ment dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">leÃ§on prÃ©cÃ©dente</a> ): <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-143"><span class="MJXp-msubsup" id="MJXp-Span-144"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-146" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-147" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">p</span><span class="MJXp-mo" id="MJXp-Span-149" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-150">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154">g</span><span class="MJXp-msubsup" id="MJXp-Span-155"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-156" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-157" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-158" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-159" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-160">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">t</span><span class="MJXp-mtext" id="MJXp-Span-164">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">t</span><span class="MJXp-msubsup" id="MJXp-Span-170"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-171" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-172" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-173">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178">a</span></span></span><span class="MJXp-mo" id="MJXp-Span-179" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-180"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-182" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mtext" id="MJXp-Span-183">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">c</span><span class="MJXp-mrow" id="MJXp-Span-188"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">G</span></span><span class="MJXp-mrow" id="MJXp-Span-192"><span class="MJXp-mn" id="MJXp-Span-193">4</span><span class="MJXp-mo" id="MJXp-Span-194" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-195">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">g</span><span class="MJXp-msubsup" id="MJXp-Span-200"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-202" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mtext" id="MJXp-Span-203">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">n</span><span class="MJXp-mo" id="MJXp-Span-209" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-210" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-211">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">g</span><span class="MJXp-msubsup" id="MJXp-Span-216"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-218" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-219">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">n</span><span class="MJXp-mo" id="MJXp-Span-225" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-msubsup" id="MJXp-Span-226"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-228" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-229" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">p</span><span class="MJXp-mo" id="MJXp-Span-231" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-232">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">g</span><span class="MJXp-msubsup" id="MJXp-Span-237"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-238" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-239" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-240" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241">n</span><span class="MJXp-mtext" id="MJXp-Span-242">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">t</span><span class="MJXp-mtext" id="MJXp-Span-247">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">g</span><span class="MJXp-msubsup" id="MJXp-Span-252"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-253" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-254" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-255">d</span><span class="MJXp-mtext" id="MJXp-Span-256">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">g</span><span class="MJXp-msubsup" id="MJXp-Span-261"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-263" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-264" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-265">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-266">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268">t</span><span class="MJXp-mtext" id="MJXp-Span-269">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-270">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-272">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">t</span><span class="MJXp-msubsup" id="MJXp-Span-275"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-277" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-278">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-280">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283">a</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-284"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-286" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-287" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">p</span><span class="MJXp-mo" id="MJXp-Span-289" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-290">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-291">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294">g</span><span class="MJXp-msubsup" id="MJXp-Span-295"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-296" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-297" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-298" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-299">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303">g</span><span class="MJXp-msubsup" id="MJXp-Span-304"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-305" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-306" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-307" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-308"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-309" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-310" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-311" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312">p</span><span class="MJXp-mo" id="MJXp-Span-313" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-314">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">g</span><span class="MJXp-msubsup" id="MJXp-Span-319"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-321" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-322" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323">n</span><span class="MJXp-mtext" id="MJXp-Span-324">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328">t</span><span class="MJXp-mtext" id="MJXp-Span-329">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-333">g</span><span class="MJXp-msubsup" id="MJXp-Span-334"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-336" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">d</span><span class="MJXp-mtext" id="MJXp-Span-338">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">g</span><span class="MJXp-msubsup" id="MJXp-Span-343"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-344" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-345" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="199.648ex" height="2.78ex" viewBox="0 -832 85959.2 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="2942" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="14781" y="0"></use><g transform="translate(15171,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-73" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-66" x="16374" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-72" x="16925" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="17376" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="17906" y="0"></use><g transform="translate(18339,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(20704,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="13946" y="0"></use></g><g transform="translate(35040,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="36066" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-70" x="36455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-2C" x="36959" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="37654" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="38139" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="39018" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="39484" y="0"></use><g transform="translate(39965,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="40839" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6E" x="41228" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="42079" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="42512" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="43036" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="43521" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="44133" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="44618" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="45497" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="45963" y="0"></use><g transform="translate(46444,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="47318" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="48091" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="48577" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="49455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="49922" y="0"></use><g transform="translate(50402,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-3D" x="51554" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="52860" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6E" x="53205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="53806" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6C" x="54417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="54716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="55061" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="55940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="56285" y="0"></use><g transform="translate(56647,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="2942" y="0"></use></g></g><g transform="translate(59672,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-72" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="60581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-70" x="60971" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-2C" x="61474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="62170" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="62655" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="63534" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="64000" y="0"></use><g transform="translate(64481,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-2C" x="65354" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="66049" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="66535" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="67413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="67880" y="0"></use><g transform="translate(68360,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="69333" y="0"></use><g transform="translate(69723,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="70749" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-70" x="71138" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-2C" x="71642" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="72337" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="72822" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="73701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="74167" y="0"></use><g transform="translate(74648,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="75522" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6E" x="75911" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="76762" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="77195" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="77719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="78204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="78816" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="79301" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="80180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="80646" y="0"></use><g transform="translate(81127,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="82000" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="82774" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="83259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="84138" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="84604" y="0"></use><g transform="translate(85085,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> L_o (p, \ omega_o) = \ int \ limits _ {\ Omega} (k_s \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n)} L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i = \ int \ limits _ {\ Omega} f_r (p, \ omega_i, \ omega_o) L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i </script></p><br>  Comme pour la prÃ©paration de la carte d'irradiation, cette intÃ©grale n'est pas possible Ã  rÃ©soudre en temps rÃ©el.  Par consÃ©quent, il est souhaitable de calculer de maniÃ¨re similaire la carte pour la composante miroir de l'expression de la rÃ©flectivitÃ© et, dans le cycle de rendu principal, d'effectuer une sÃ©lection simple Ã  partir de cette carte en fonction de la normale Ã  la surface.  Cependant, tout n'est pas si simple: la carte d'irradiation a Ã©tÃ© obtenue relativement facilement du fait que l'intÃ©grale ne dÃ©pendait que de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-346"><span class="MJXp-mtext" id="MJXp-Span-347">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-350">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">g</span><span class="MJXp-msubsup" id="MJXp-Span-352"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-354" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-4"> \ omega_i </script>  , et la sous-expression constante de la composante diffuse lambertienne pourrait Ãªtre retirÃ©e du signe de l'intÃ©grale.  Dans ce cas, l'intÃ©grale dÃ©pend non seulement de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-355"><span class="MJXp-mtext" id="MJXp-Span-356">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-358">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-359">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-360">g</span><span class="MJXp-msubsup" id="MJXp-Span-361"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-362" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-363" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-5"> \ omega_i </script>  qui est facile Ã  comprendre Ã  partir de la formule BRDF: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-364"><span class="MJXp-msubsup" id="MJXp-Span-365"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-366" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-367" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-368" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-369">p</span><span class="MJXp-mo" id="MJXp-Span-370" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-371"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-372" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-373" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-374" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-375"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-377" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-378" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-379" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-380">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">c</span><span class="MJXp-mrow" id="MJXp-Span-385"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-388">G</span></span><span class="MJXp-mrow" id="MJXp-Span-389"><span class="MJXp-mn" id="MJXp-Span-390">4</span><span class="MJXp-mo" id="MJXp-Span-391" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-392">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-395">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396">g</span><span class="MJXp-msubsup" id="MJXp-Span-397"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-399" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mtext" id="MJXp-Span-400">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-402">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-405">n</span><span class="MJXp-mo" id="MJXp-Span-406" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-407" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-408">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-411">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412">g</span><span class="MJXp-msubsup" id="MJXp-Span-413"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-414" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-415" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-416">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-417">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-418">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-420">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-421">n</span><span class="MJXp-mo" id="MJXp-Span-422" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="59.349ex" height="2.66ex" viewBox="0 -832 25552.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-72" x="693" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="909" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-70" x="1299" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-2C" x="1802" y="0"></use><g transform="translate(2247,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="1013" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-2C" x="3308" y="0"></use><g transform="translate(3753,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="1013" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="4913" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-3D" x="5580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-66" x="6887" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-72" x="7437" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="7889" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="8418" y="0"></use><g transform="translate(8852,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(11216,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMAIN-29" x="13946" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> f_r (p, w_i, w_o) = \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n)} </script></p><br>  L'expression sous l'intÃ©grale dÃ©pend aussi de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-423"><span class="MJXp-mtext" id="MJXp-Span-424">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-427">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428">g</span><span class="MJXp-msubsup" id="MJXp-Span-429"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-430" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-431" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.208ex" height="1.817ex" viewBox="0 -520.7 3533.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-7"> \ omega_o </script>  - pour deux vecteurs directionnels, il est presque impossible de sÃ©lectionner Ã  partir d'une carte cubique prÃ©alablement prÃ©parÃ©e.  Position du point <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-432"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-433">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-70" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> p </script>  dans ce cas, vous ne pouvez pas prendre en compte - pourquoi cela a Ã©tÃ© discutÃ© dans la leÃ§on prÃ©cÃ©dente.  Calcul prÃ©liminaire de l'intÃ©grale pour toutes les combinaisons possibles <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-434"><span class="MJXp-mtext" id="MJXp-Span-435">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439">g</span><span class="MJXp-msubsup" id="MJXp-Span-440"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-441" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-442" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-9"> \ omega_i </script>  et <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-443"><span class="MJXp-mtext" id="MJXp-Span-444">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-446">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448">g</span><span class="MJXp-msubsup" id="MJXp-Span-449"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-451" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.208ex" height="1.817ex" viewBox="0 -520.7 3533.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhjHHAWIN4gyheIKozqhlY275R2oSQ#MJMATHI-6F" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-10"> \ omega_o </script>  impossible dans les tÃ¢ches en temps rÃ©el. <br><br>  La mÃ©thode du montant fractionnÃ© d'Epic Games rÃ©sout ce problÃ¨me en divisant le problÃ¨me de calcul prÃ©liminaire en deux parties indÃ©pendantes, dont les rÃ©sultats peuvent Ãªtre combinÃ©s ultÃ©rieurement pour obtenir la valeur calculÃ©e finale.  La mÃ©thode de somme fractionnÃ©e extrait deux intÃ©grales de l'expression d'origine pour le composant miroir: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-452"><span class="MJXp-msubsup" id="MJXp-Span-453"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-454" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-455" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-456" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457">p</span><span class="MJXp-mo" id="MJXp-Span-458" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-459">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-461">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-462">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-463">g</span><span class="MJXp-msubsup" id="MJXp-Span-464"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-466" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-467" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-468" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-469">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-470">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-471">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">t</span><span class="MJXp-mtext" id="MJXp-Span-473">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-475">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-476">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-477">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-478">t</span><span class="MJXp-msubsup" id="MJXp-Span-479"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-480" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-481" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-482">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-483">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-484">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-485">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-486">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-487">a</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-488"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-489" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-490" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-491" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492">p</span><span class="MJXp-mo" id="MJXp-Span-493" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-494">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-495">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-496">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-497">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-498">g</span><span class="MJXp-msubsup" id="MJXp-Span-499"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-500" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-501" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-502" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-503">d</span><span class="MJXp-mtext" id="MJXp-Span-504">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-505">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-506">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-507">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-508">g</span><span class="MJXp-msubsup" id="MJXp-Span-509"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-510" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-511" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-512" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ—</span><span class="MJXp-mtext" id="MJXp-Span-513">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-514">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-515">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-516">t</span><span class="MJXp-mtext" id="MJXp-Span-517">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-518">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-519">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-520">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-521">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-522">t</span><span class="MJXp-msubsup" id="MJXp-Span-523"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-524" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-525" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-526">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-527">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-528">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-530">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-531">a</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-532"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-533" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-534" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-535" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-536">p</span><span class="MJXp-mo" id="MJXp-Span-537" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-538">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-539">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-540">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-541">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-542">g</span><span class="MJXp-msubsup" id="MJXp-Span-543"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-544" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-545" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-546" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-547">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-548">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-549">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-550">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-551">g</span><span class="MJXp-msubsup" id="MJXp-Span-552"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-553" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-554" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-555" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-556">n</span><span class="MJXp-mtext" id="MJXp-Span-557">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-559">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-560">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-561">t</span><span class="MJXp-mtext" id="MJXp-Span-562">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-563">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-564">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-565">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-566">g</span><span class="MJXp-msubsup" id="MJXp-Span-567"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-568" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-569" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-570">d</span><span class="MJXp-mtext" id="MJXp-Span-571">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-572">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-573">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-574">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-575">g</span><span class="MJXp-msubsup" id="MJXp-Span-576"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-577" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-578" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> L_o (p, \ omega_o) = \ int \ limits _ {\ Omega} L_i (p, \ omega_i) d \ omega_i * \ int \ limits _ {\ Omega} f_r (p, \ omega_i, \ omega_o) n \ cdot \ omega_i d \ omega_i </script></p><br>  Le rÃ©sultat du calcul de la premiÃ¨re partie est gÃ©nÃ©ralement appelÃ© une <i>carte d'environnement prÃ©-filtrÃ©e</i> , et c'est une carte d'environnement soumise au processus de convolution spÃ©cifiÃ© par cette expression.  Tout cela est similaire au processus d'obtention d'une carte d'irradiation, mais dans ce cas, la convolution est effectuÃ©e en tenant compte de la valeur de rugositÃ©.  Des valeurs de rugositÃ© plus Ã©levÃ©es conduisent Ã  l'utilisation de vecteurs d'Ã©chantillonnage plus disparates dans le processus de convolution, ce qui donne des rÃ©sultats plus flous.  Le rÃ©sultat de convolution pour chaque niveau de rugositÃ© sÃ©lectionnÃ© suivant est stockÃ© dans le niveau de mip suivant de la carte d'environnement prÃ©parÃ©e.  Par exemple, une carte d'environnement, convolutÃ©e pour cinq niveaux de rugositÃ© diffÃ©rents, contient cinq niveaux de mip et ressemble Ã  ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ad/nt/vq/adntvqtgc_vkrufypnzxeoayx4m.png"></div><br>  Les vecteurs d'Ã©chantillonnage et leur propagation sont dÃ©terminÃ©s sur la base de la fonction de distribution normale ( <i>NDF</i> ) du modÃ¨le BRDF de Cook-Torrens.  Cette fonction accepte le vecteur normal et la direction d'observation comme paramÃ¨tres d'entrÃ©e.  La direction d'observation n'Ã©tant pas connue Ã  l'avance lors du calcul prÃ©liminaire, les dÃ©veloppeurs d'Epic Games ont dÃ» faire une autre hypothÃ¨se: la direction du regard (et donc la direction de la rÃ©flexion spÃ©culaire) est toujours identique Ã  la direction de sortie de l'Ã©chantillon <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-579"><span class="MJXp-mtext" id="MJXp-Span-580">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-581">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-582">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-583">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-584">g</span><span class="MJXp-msubsup" id="MJXp-Span-585"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-586" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-587" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-12"> \ omega_o </script>  .  Sous forme de code: <br><br><pre><code class="cpp hljs">vec3 N = normalize(w_o); vec3 R = N; vec3 V = R;</code> </pre> <br>  Dans de telles conditions, la direction du regard n'est pas requise dans le processus de convolution de la carte de l'environnement, ce qui rend le calcul rÃ©alisable en temps rÃ©el.  Mais d'un autre cÃ´tÃ©, nous perdons la distorsion caractÃ©ristique des rÃ©flexions spÃ©culaires lorsqu'elles sont observÃ©es Ã  un angle aigu par rapport Ã  la surface rÃ©flÃ©chissante, comme on peut le voir dans l'image ci-dessous (de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Moving Frostbite Ã  PBR</a> ).  En gÃ©nÃ©ral, un tel compromis est considÃ©rÃ© comme acceptable. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qw/qu/8y/qwqu8yar2slqk93dchfih4laxse.png"></div><br>  La deuxiÃ¨me partie de l'expression Ã  somme fractionnÃ©e contient le BRDF de l'expression d'origine pour le composant miroir.  En supposant que la luminositÃ© de l'Ã©nergie entrante est reprÃ©sentÃ©e spectralement par la lumiÃ¨re blanche dans toutes les directions (c.-Ã -d. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-588"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-589">L</span><span class="MJXp-mo" id="MJXp-Span-590" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-591">p</span><span class="MJXp-mo" id="MJXp-Span-592" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-593">x</span><span class="MJXp-mo" id="MJXp-Span-594" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-595" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-596">1</span><span class="MJXp-mo" id="MJXp-Span-597" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-598">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-13"> L (p, x) = 1,0 </script>  ), il est possible de prÃ©-calculer la valeur de BRDF avec les paramÃ¨tres d'entrÃ©e suivants: rugositÃ© du matÃ©riau et angle entre la normale <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-599"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-14"> n </script>  et direction de la lumiÃ¨re <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-601"><span class="MJXp-mtext" id="MJXp-Span-602">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-603">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-604">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-605">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-606">g</span><span class="MJXp-msubsup" id="MJXp-Span-607"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-608" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-609" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-15"> \ omega_i </script>  (ou <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-610"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-611">n</span><span class="MJXp-mtext" id="MJXp-Span-612">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-613">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-614">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-615">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-616">t</span><span class="MJXp-mtext" id="MJXp-Span-617">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-618">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-619">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-620">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-621">g</span><span class="MJXp-msubsup" id="MJXp-Span-622"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-623" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-624" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-16"> n \ cdot \ omega_i </script>  )  L'approche Epic Games consiste Ã  stocker les rÃ©sultats du calcul BRDF pour chaque combinaison de rugositÃ© et l'angle entre la normale et la direction de la lumiÃ¨re sous la forme d'une texture bidimensionnelle connue sous le <i>nom de carte d'intÃ©gration BRDF</i> , qui sera ensuite utilisÃ©e comme <i>table de</i> <i>consultation</i> ( <i>LUT</i> ). .  Cette texture de rÃ©fÃ©rence utilise les canaux de sortie rouge et vert pour stocker l'Ã©chelle et le dÃ©calage pour calculer le coefficient de Fresnel de la surface, ce qui nous permet finalement de rÃ©soudre la deuxiÃ¨me partie de l'expression pour la somme sÃ©parÃ©e: <br><br><img src="https://habrastorage.org/webt/5s/so/fw/5ssofwhkncncu263tegajwxm15k.png"><br>  Cette texture auxiliaire est crÃ©Ã©e comme suit: les coordonnÃ©es de texture horizontales (allant de [0., 1.]) sont considÃ©rÃ©es comme des valeurs de paramÃ¨tres d'entrÃ©e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-625"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-626">n</span><span class="MJXp-mtext" id="MJXp-Span-627">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-628">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-629">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-630">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-631">t</span><span class="MJXp-mtext" id="MJXp-Span-632">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-633">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-634">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-635">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-636">g</span><span class="MJXp-msubsup" id="MJXp-Span-637"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-638" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-639" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> n \ cdot \ omega_i </script>  Fonctions BRDF;  les coordonnÃ©es de texture verticales sont considÃ©rÃ©es comme des valeurs de rugositÃ© d'entrÃ©e. <br><br>  Par consÃ©quent, avec une telle carte d'intÃ©gration et une carte d'environnement prÃ©traitÃ©e, vous pouvez combiner les Ã©chantillons Ã  partir d'eux pour obtenir la valeur finale de l'expression intÃ©grale du composant miroir: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> lod = getMipLevelFromRoughness(roughness); vec3 prefilteredColor = textureCubeLod(PrefilteredEnvMap, refVec, lod); vec2 envBRDF = texture2D(BRDFIntegrationMap, vec2(NdotV, roughness)).xy; vec3 indirectSpecular = prefilteredColor * (F * envBRDF.x + envBRDF.y)</code> </pre><br>  Cet examen de la mÃ©thode de somme fractionnÃ©e d'Epic Games devrait vous donner une idÃ©e du processus d'approximation de la partie de l'expression de rÃ©flectance qui est responsable du composant miroir.  Essayons maintenant de prÃ©parer nous-mÃªmes les donnÃ©es de la carte. <br><br><h2>  PrÃ©filtrage de la carte d'environnement HDR </h2><br>  Le prÃ©-filtrage de la carte de l'environnement est similaire Ã  ce qui a Ã©tÃ© fait pour obtenir une carte d'irradiation.  La seule diffÃ©rence est que nous prenons maintenant en compte la rugositÃ© et enregistrons le rÃ©sultat pour chaque niveau de rugositÃ© dans le nouveau niveau de mip de la carte cubique. <br><br>  Vous devez d'abord crÃ©er une nouvelle carte cubique qui contiendra le rÃ©sultat du prÃ©-filtrage.  Afin de crÃ©er le nombre nÃ©cessaire de niveaux de mip, nous appelons simplement <i>glGenerateMipmaps ()</i> - la mÃ©moire nÃ©cessaire sera allouÃ©e pour la texture actuelle: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> prefilterMap; glGenTextures(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;prefilterMap); glBindTexture(GL_TEXTURE_CUBE_MAP, prefilterMap); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">6</span></span>; ++i) { glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, <span class="hljs-number"><span class="hljs-number">0</span></span>, GL_RGB16F, <span class="hljs-number"><span class="hljs-number">128</span></span>, <span class="hljs-number"><span class="hljs-number">128</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, GL_RGB, GL_FLOAT, <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>); } glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_LINEAR); glGenerateMipmap(GL_TEXTURE_CUBE_MAP);</code> </pre><br>  Remarque: Ã©tant donnÃ© que la sÃ©lection dans <i>prefilterMap</i> sera basÃ©e sur l'existence de niveaux de mip, il est nÃ©cessaire de dÃ©finir le mode de filtre de rÃ©duction sur <i>GL_LINEAR_MIPMAP_LINEAR</i> pour activer le filtrage trilinÃ©aire.  Les images prÃ©traitÃ©es des images miroir sont stockÃ©es sur des faces distinctes de la carte cubique avec une rÃ©solution au niveau du mip de base de seulement 128x128 pixels.  Pour la plupart des matÃ©riaux, cela suffit, cependant, si votre scÃ¨ne a un nombre accru de surfaces lisses et brillantes (par exemple, une voiture neuve), vous devrez peut-Ãªtre augmenter cette rÃ©solution. <br><br>  Dans la leÃ§on prÃ©cÃ©dente, nous avons convolutionnÃ© la carte de l'environnement en crÃ©ant des vecteurs Ã©chantillons qui sont uniformÃ©ment rÃ©partis dans l'hÃ©misphÃ¨re <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-640"><span class="MJXp-mtext" id="MJXp-Span-641">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-642">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-643">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-644">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-645">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-646">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> \ Omega </script>  en utilisant des coordonnÃ©es sphÃ©riques.  Pour obtenir l'irradiation, cette mÃ©thode est assez efficace, ce qui ne peut Ãªtre dit des calculs de rÃ©flexions spÃ©culaires.  La physique des reflets spÃ©culaires nous dit que la direction de la lumiÃ¨re rÃ©flÃ©chie spÃ©culaire est adjacente au vecteur de rÃ©flexion <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-647"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-648">r</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> r </script>  pour une surface normale <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-649"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-650">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> n </script>  mÃªme si la rugositÃ© n'est pas nulle: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mh/fx/xq/mhfxxqxaglsggbtfz_1klwkmbga.png"></div><br>  La forme gÃ©nÃ©ralisÃ©e des directions de rÃ©flexion sortantes possibles est appelÃ©e <i>lobe spÃ©culaire</i> ( <i>lobe</i> <i>spÃ©culaire</i> ; "pÃ©tale d'un diagramme de rayonnement miroir" - peut-Ãªtre trop verbeux, <i>environ Per.</i> ).  Avec une augmentation de la rugositÃ©, le pÃ©tale se dÃ©veloppe et se dilate.  De plus, sa forme change en fonction de la direction de l'incidence de la lumiÃ¨re.  Ainsi, la forme du pÃ©tale dÃ©pend fortement des propriÃ©tÃ©s du matÃ©riau. <br><br>  Revenant au modÃ¨le des microsurfaces, on peut imaginer la forme du lobe miroir comme dÃ©crivant l'orientation de la rÃ©flexion par rapport au vecteur mÃ©dian des micro-surfaces, en tenant compte d'une direction donnÃ©e de l'incidence lumineuse.  Comprenant que la plupart des rayons de lumiÃ¨re rÃ©flÃ©chie se trouvent Ã  l'intÃ©rieur d'un pÃ©tale de miroir orientÃ© sur la base du vecteur mÃ©dian, il est logique de crÃ©er des vecteurs Ã©chantillons orientÃ©s de maniÃ¨re similaire.  Sinon, beaucoup d'entre eux seront inutiles.  Cette approche est appelÃ©e <i>Ã©chantillonnage d'importance</i> . <br><br><h4>  IntÃ©gration Monte Carlo et Ã©chantillonnage de signification </h4><br>  Pour bien comprendre la signification de l'Ã©chantillon en termes de signification, vous devrez d'abord vous familiariser avec un appareil mathÃ©matique tel que la mÃ©thode d'intÃ©gration de Monte Carlo.  Cette mÃ©thode est basÃ©e sur une combinaison de statistiques et de thÃ©orie des probabilitÃ©s et aide Ã  rÃ©soudre numÃ©riquement un problÃ¨me statistique sur un grand Ã©chantillon sans avoir Ã  considÃ©rer <i>chaque</i> Ã©lÃ©ment de cet Ã©chantillon. <br><br>  Par exemple, vous souhaitez calculer la croissance dÃ©mographique moyenne d'un pays.  Pour obtenir un rÃ©sultat prÃ©cis et fiable, il faudrait mesurer la croissance de <i>chaque</i> citoyen et faire la moyenne du rÃ©sultat.  Cependant, comme la population de la plupart des pays est assez importante, cette approche est pratiquement irrÃ©alisable, car elle nÃ©cessite trop de ressources pour Ãªtre exÃ©cutÃ©e. <br>  Une autre approche consiste Ã  crÃ©er un sous-Ã©chantillon plus petit rempli d'Ã©lÃ©ments vraiment alÃ©atoires (sans biais) de l'Ã©chantillon d'origine.  Ensuite, vous mesurez Ã©galement la croissance et faites la moyenne du rÃ©sultat pour ce sous-Ã©chantillon.  Vous pouvez prendre au moins une centaine de personnes et obtenir un rÃ©sultat, mÃªme s'il n'est pas absolument exact, mais tout de mÃªme assez proche de la situation rÃ©elle.  L'explication de cette mÃ©thode rÃ©side dans la prise en compte de la loi des grands nombres.  Et son essence est dÃ©crite de cette faÃ§on: le rÃ©sultat d'une mesure dans un sous-Ã©chantillon de taille plus petit <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-651"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-652">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> N </script>  , composÃ© d'Ã©lÃ©ments vÃ©ritablement alÃ©atoires de l'ensemble d'origine, sera proche du rÃ©sultat de contrÃ´le des mesures effectuÃ©es sur l'ensemble initial.  De plus, le rÃ©sultat approximatif a tendance Ã  Ãªtre vrai avec la croissance <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-653"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-654">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> N </script>  . <br>  L'intÃ©gration de Monte Carlo est l'application de la loi des grands nombres pour rÃ©soudre les intÃ©grales.  Au lieu de rÃ©soudre l'intÃ©grale, en tenant compte de l'ensemble (Ã©ventuellement infini) des valeurs <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-655"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-656">x</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> x </script>  nous utilisons <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-657"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-658">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> N </script>  des points d'Ã©chantillonnage alÃ©atoires et la moyenne du rÃ©sultat.  Avec croissance <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-659"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-660">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> N </script>  le rÃ©sultat approximatif est garanti de se rapprocher de la solution exacte de l'intÃ©grale. <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-661"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-662">O</span><span class="MJXp-mo" id="MJXp-Span-663" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-664">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-665">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-666">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-667">t</span><span class="MJXp-mtext" id="MJXp-Span-668">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-669">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-670">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-671">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-672">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-673">t</span><span class="MJXp-msubsup" id="MJXp-Span-674"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-675" style="margin-right: 0.05em;">s</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-678"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-679">b</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-676"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-677">a</span></span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-680">f</span><span class="MJXp-mo" id="MJXp-Span-681" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-682">x</span><span class="MJXp-mo" id="MJXp-Span-683" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-684">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-685">x</span><span class="MJXp-mo" id="MJXp-Span-686" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-687">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-688">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-689">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-690">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-691">c</span><span class="MJXp-mrow" id="MJXp-Span-692"><span class="MJXp-mn" id="MJXp-Span-693">1</span></span><span class="MJXp-mrow" id="MJXp-Span-694"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-695">N</span></span><span class="MJXp-mtext" id="MJXp-Span-696">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-697">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-698">u</span><span class="MJXp-msubsup" id="MJXp-Span-699"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-700" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-705"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-706">N</span><span class="MJXp-mo" id="MJXp-Span-707">âˆ’</span><span class="MJXp-mn" id="MJXp-Span-708">1</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-701"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-702">i</span><span class="MJXp-mo" id="MJXp-Span-703">=</span><span class="MJXp-mn" id="MJXp-Span-704">0</span></span></span></span></span></span></span><span class="MJXp-mtext" id="MJXp-Span-709">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-710">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-711">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-712">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-713">c</span><span class="MJXp-mrow" id="MJXp-Span-714"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-715">f</span><span class="MJXp-mo" id="MJXp-Span-716" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-717">x</span><span class="MJXp-mo" id="MJXp-Span-718" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mrow" id="MJXp-Span-719"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-720">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-721">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-722">f</span><span class="MJXp-mo" id="MJXp-Span-723" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-724">x</span><span class="MJXp-mo" id="MJXp-Span-725" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-26"> O = \ int \ limits_ {a} ^ {b} f (x) dx = \ frac {1} {N} \ sum_ {i = 0} ^ {N-1} \ frac {f (x)} { pdf (x)} </script></p><br>  Pour rÃ©soudre l'intÃ©grale, nous obtenons la valeur de l'intÃ©grande pour <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-726"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-727">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> N </script>  des points alÃ©atoires de l'Ã©chantillon dans [a, b], les rÃ©sultats sont rÃ©sumÃ©s et divisÃ©s par le nombre total de points pris pour la moyenne.  Objet <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-728"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-729">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-730">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-731">f</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> pdf </script>  dÃ©crit <i>la</i> <i>fonction de densitÃ© de probabilitÃ©</i> , qui montre la probabilitÃ© avec laquelle chaque valeur sÃ©lectionnÃ©e se produit dans l'Ã©chantillon d'origine.  Par exemple, cette fonction pour la croissance des citoyens ressemblerait Ã  ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2j/yh/zd/2jyhzdv02d8-zu_5sjgop6aahac.png"></div><br>  On peut voir qu'en utilisant des points d'Ã©chantillonnage alÃ©atoires, nous avons une chance beaucoup plus Ã©levÃ©e d'atteindre une valeur de croissance de 170 cm que quelqu'un avec une croissance de 150 cm. <br><br>  Il est clair que lors de l'intÃ©gration de Monte Carlo, certains points d'Ã©chantillonnage sont plus susceptibles d'apparaÃ®tre dans la sÃ©quence que d'autres.  Par consÃ©quent, dans toute expression d'estimation de Monte Carlo, nous divisons ou multiplions la valeur sÃ©lectionnÃ©e par la probabilitÃ© de son occurrence en utilisant la fonction de densitÃ© de probabilitÃ©.  Ã€ l'heure actuelle, lors de l'Ã©valuation de l'intÃ©grale, nous avons crÃ©Ã© de nombreux points d'Ã©chantillonnage uniformÃ©ment rÃ©partis: la chance d'obtenir l'un d'eux Ã©tait la mÃªme.  Ainsi, notre estimation Ã©tait <i>non biaisÃ©e</i> , ce qui signifie qu'Ã  mesure que le nombre de points d'Ã©chantillonnage augmente, notre estimation converge vers la solution exacte de l'intÃ©grale. <br><br>  Cependant, certaines fonctions d'Ã©valuation sont <i>biaisÃ©es</i> , c'est-Ã -dire  impliquant la crÃ©ation de points d'Ã©chantillonnage non pas d'une maniÃ¨re vraiment alÃ©atoire, mais avec une prÃ©dominance d'une certaine ampleur ou direction.  De telles fonctions d'Ã©valuation permettent Ã  l'estimation de Monte Carlo de converger vers la solution exacte <i>beaucoup plus rapidement</i> .  En revanche, en raison du biais de la fonction d'Ã©valuation, la solution peut ne jamais converger.  Dans le cas gÃ©nÃ©ral, cela est considÃ©rÃ© comme un compromis acceptable, en particulier dans les problÃ¨mes d'infographie, car l'estimation est trÃ¨s proche du rÃ©sultat analytique et n'est pas requise si son effet semble visuellement assez fiable.  Comme nous le verrons bientÃ´t, l'Ã©chantillon par signification (en utilisant une fonction d'estimation biaisÃ©e) vous permet de crÃ©er des points d'Ã©chantillonnage biaisÃ©s dans une certaine direction, qui est pris en compte en multipliant ou en divisant chaque valeur sÃ©lectionnÃ©e par la valeur correspondante de la fonction de densitÃ© de probabilitÃ©. <br><br>  L'intÃ©gration de Monte Carlo est assez courante dans les problÃ¨mes d'infographie, car c'est une mÃ©thode assez intuitive pour estimer la valeur des intÃ©grales continues par une mÃ©thode numÃ©rique qui est assez efficace.  Il suffit de prendre une zone ou un volume dans lequel l'Ã©chantillon est prÃ©levÃ© (par exemple, notre hÃ©misphÃ¨re <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-732"><span class="MJXp-mtext" id="MJXp-Span-733">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-734">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-735">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-736">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-737">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-738">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> \ Omega </script>  ), crÃ©er <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-739"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-740">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> N </script>  des points d'Ã©chantillonnage alÃ©atoires se trouvant Ã  l'intÃ©rieur, et effectuer une sommation pondÃ©rÃ©e des valeurs obtenues. <br><br>  La mÃ©thode de Monte Carlo est un sujet de discussion trÃ¨s Ã©tendu, et ici nous n'entrerons plus dans les dÃ©tails, mais il y a un dÃ©tail plus important: il n'y a aucun moyen de crÃ©er <i>des Ã©chantillons alÃ©atoires</i> .  Par dÃ©faut, chaque point d'Ã©chantillonnage est complÃ¨tement (psvedo) alÃ©atoire - ce que nous attendons.  Mais, en utilisant certaines propriÃ©tÃ©s de sÃ©quences quasi alÃ©atoires, il est possible de crÃ©er des ensembles de vecteurs qui, bien qu'alÃ©atoires, ont des propriÃ©tÃ©s intÃ©ressantes.  Par exemple, lors de la crÃ©ation d'Ã©chantillons alÃ©atoires pour le processus d'intÃ©gration, vous pouvez utiliser les <i>sÃ©quences</i> dites Ã  <i>faible Ã©cart</i> , qui garantissent le caractÃ¨re alÃ©atoire des points d'Ã©chantillonnage crÃ©Ã©s, mais dans l'ensemble gÃ©nÃ©ral, ils sont rÃ©partis plus uniformÃ©ment: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3v/wm/eq/3vwmeqom0d-sq_r0nqrobj0tspq.png"></div><br>  L'utilisation de sÃ©quences Ã  faible dÃ©calage pour crÃ©er un ensemble d'Ã©chantillons de vecteurs pour le processus d'intÃ©gration est la mÃ©thode d'intÃ©gration <i>Quasi-Monte Carlo</i> .  Les quasi-mÃ©thodes de Monte Carlo convergent beaucoup plus rapidement que l'approche gÃ©nÃ©rale, ce qui est une propriÃ©tÃ© trÃ¨s attrayante pour les applications avec des exigences de performances Ã©levÃ©es. <br><br>  Nous connaissons donc la mÃ©thode gÃ©nÃ©rale et quasi-Monte Carlo, mais il y a un dÃ©tail supplÃ©mentaire qui fournira un taux de convergence encore plus Ã©levÃ©: un Ã©chantillon par signification. <br>  Comme dÃ©jÃ  notÃ© dans la leÃ§on, pour les rÃ©flexions spÃ©culaires, la direction de la lumiÃ¨re rÃ©flÃ©chie est enfermÃ©e dans un lobe spÃ©culaire, dont la taille et la forme dÃ©pendent de la rugositÃ© de la surface rÃ©flÃ©chissante.  Comprendre que tous les vecteurs d'Ã©chantillons (quasi) alÃ©atoires qui se trouvent Ã  l'extÃ©rieur du lobe miroir n'affecteront pas l'expression intÃ©grale de la composante miroir, c'est-Ã -dire  inutile.  Il est logique de focaliser la gÃ©nÃ©ration d'Ã©chantillons vecteurs dans la rÃ©gion du lobe miroir en utilisant la fonction d'estimation biaisÃ©e pour la mÃ©thode de Monte Carlo. <br><br>  C'est l'essence mÃªme de l'Ã©chantillonnage par signification: la crÃ©ation de vecteurs d'Ã©chantillonnage est enfermÃ©e dans une certaine zone orientÃ©e le long du vecteur mÃ©dian des micro-surfaces, et dont la forme est dÃ©terminÃ©e par la rugositÃ© du matÃ©riau.  En utilisant une combinaison de la quasi-mÃ©thode de Monte Carlo, des sÃ©quences de faible inadÃ©quation et biais dans le processus de crÃ©ation de vecteurs d'Ã©chantillonnage en raison de l'Ã©chantillonnage significatif, nous atteignons des taux de convergence trÃ¨s Ã©levÃ©s.  Ã‰tant donnÃ© que la convergence vers la solution est suffisamment rapide, nous pouvons utiliser un plus petit nombre d'Ã©chantillons vecteurs pour obtenir une estimation suffisamment acceptable.  La combinaison de mÃ©thodes dÃ©crite permet, en principe, aux applications graphiques de rÃ©soudre mÃªme l'intÃ©grale du composant miroir en temps rÃ©el, bien que le calcul prÃ©liminaire reste une approche beaucoup plus rentable. <br><br><h4>  SÃ©quence de faible dÃ©calage </h4><br>  Dans cette leÃ§on, nous utilisons toujours un calcul prÃ©liminaire de la composante miroir de l'expression de la rÃ©flectance pour le rayonnement indirect.  Et nous utiliserons un Ã©chantillon significatif en utilisant une sÃ©quence alÃ©atoire de faible dÃ©calage et la quasi-mÃ©thode de Monte Carlo.  La sÃ©quence utilisÃ©e est connue sous le nom de <i>sÃ©quence Hammersley</i> , dont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Holger Dammertz</a> donne une description dÃ©taillÃ©e.  Cette sÃ©quence, Ã  son tour, est basÃ©e sur la <i>sÃ©quence de van der Corput</i> , qui utilise une transformation binaire spÃ©ciale de la fraction dÃ©cimale par rapport au point dÃ©cimal. <br><br>  En utilisant des astuces arithmÃ©tiques au niveau du bit, vous pouvez dÃ©finir assez efficacement la sÃ©quence van der Corpute directement dans le shader et en fonction de cela crÃ©er le i-Ã¨me Ã©lÃ©ment de la sÃ©quence Hammersley Ã  partir de la sÃ©lection dans <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-741"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-742">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> N </script>  articles: <br><br><pre> <code class="plaintext hljs">float RadicalInverse_VdC(uint bits) { bits = (bits &lt;&lt; 16u) | (bits &gt;&gt; 16u); bits = ((bits &amp; 0x55555555u) &lt;&lt; 1u) | ((bits &amp; 0xAAAAAAAAu) &gt;&gt; 1u); bits = ((bits &amp; 0x33333333u) &lt;&lt; 2u) | ((bits &amp; 0xCCCCCCCCu) &gt;&gt; 2u); bits = ((bits &amp; 0x0F0F0F0Fu) &lt;&lt; 4u) | ((bits &amp; 0xF0F0F0F0u) &gt;&gt; 4u); bits = ((bits &amp; 0x00FF00FFu) &lt;&lt; 8u) | ((bits &amp; 0xFF00FF00u) &gt;&gt; 8u); return float(bits) * 2.3283064365386963e-10; // / 0x100000000 } // ---------------------------------------------------------------------------- vec2 Hammersley(uint i, uint N) { return vec2(float(i)/float(N), RadicalInverse_VdC(i)); }</code> </pre><br>  <i>Hammersley ()</i> renvoie le iÃ¨me Ã©lÃ©ment d'une sÃ©quence de faible dÃ©calage Ã  partir d'Ã©chantillons de tailles multiples <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-743"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-744">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> N </script>  . <br><blockquote>  Tous les pilotes OpenGL ne prennent pas en charge les opÃ©rations au niveau du bit (WebGL et OpenGL ES 2.0, par exemple), donc pour certains environnements, une implÃ©mentation alternative de leur utilisation peut Ãªtre requise: <br><br><pre> <code class="plaintext hljs">float VanDerCorpus(uint n, uint base) { float invBase = 1.0 / float(base); float denom = 1.0; float result = 0.0; for(uint i = 0u; i &lt; 32u; ++i) { if(n &gt; 0u) { denom = mod(float(n), 2.0); result += denom * invBase; invBase = invBase / 2.0; n = uint(float(n) / 2.0); } } return result; } // ---------------------------------------------------------------------------- vec2 HammersleyNoBitOps(uint i, uint N) { return vec2(float(i)/float(N), VanDerCorpus(i, 2u)); }</code> </pre> <br>  Je note qu'en raison de certaines restrictions sur les opÃ©rateurs de cycle dans l'ancien matÃ©riel, cette implÃ©mentation passe par les 32 bits.  En consÃ©quence, cette version n'est pas aussi productive que la premiÃ¨re option - mais elle fonctionne sur n'importe quel matÃ©riel, et mÃªme en l'absence d'opÃ©rations sur les bits. </blockquote><br><h4>  Ã‰chantillon d'importance dans le modÃ¨le GGX </h4><br>  Au lieu d'une distribution uniforme ou alÃ©atoire (Monte Carlo) des vecteurs Ã©chantillons gÃ©nÃ©rÃ©s dans l'hÃ©misphÃ¨re <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-745"><span class="MJXp-mtext" id="MJXp-Span-746">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-747">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-748">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-749">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-750">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-751">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> \ Omega </script>  , qui apparaÃ®t dans l'intÃ©grale que nous rÃ©solvons, nous allons essayer de crÃ©er des vecteurs pour qu'ils gravitent dans la direction principale de rÃ©flexion de la lumiÃ¨re, caractÃ©risÃ©e par le vecteur mÃ©dian des microsurfaces et en fonction de la rugositÃ© de surface.  Le processus d'Ã©chantillonnage lui-mÃªme sera similaire Ã  celui envisagÃ© prÃ©cÃ©demment: ouvrir un cycle avec un nombre d'itÃ©rations suffisamment important, crÃ©er un Ã©lÃ©ment d'une sÃ©quence de faible dÃ©calage, sur la base de celui-ci, nous crÃ©ons un vecteur d'Ã©chantillonnage dans l'espace tangent, transfÃ©rons ce vecteur aux coordonnÃ©es mondiales et utilisons la luminositÃ© Ã©nergÃ©tique de la scÃ¨ne pour Ã©chantillonner.  En principe, les changements ne concernent que le fait qu'un Ã©lÃ©ment de la sÃ©quence de faible dÃ©calage est dÃ©sormais utilisÃ© pour spÃ©cifier un nouveau vecteur Ã©chantillon: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> uint SAMPLE_COUNT = <span class="hljs-number"><span class="hljs-number">4096u</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(uint i = <span class="hljs-number"><span class="hljs-number">0u</span></span>; i &lt; SAMPLE_COUNT; ++i) { vec2 Xi = Hammersley(i, SAMPLE_COUNT);</code> </pre><br>  De plus, pour la formation complÃ¨te du vecteur Ã©chantillon, il faudra en quelque sorte l'orienter en direction du lobe miroir correspondant Ã  un niveau de rugositÃ© donnÃ©.  Vous pouvez prendre le NDF (fonction de distribution normale) d'une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">leÃ§on</a> thÃ©orique et combiner avec le NDF GGX pour la mÃ©thode de spÃ©cification d'un vecteur Ã©chantillon dans le domaine de la paternitÃ© Epic Games: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">vec3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ImportanceSampleGGX</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vec2 Xi, vec3 N, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> roughness)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> a = roughness*roughness; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> phi = <span class="hljs-number"><span class="hljs-number">2.0</span></span> * PI * Xi.x; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cosTheta = <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>((<span class="hljs-number"><span class="hljs-number">1.0</span></span> - Xi.y) / (<span class="hljs-number"><span class="hljs-number">1.0</span></span> + (a*a - <span class="hljs-number"><span class="hljs-number">1.0</span></span>) * Xi.y)); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sinTheta = <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(<span class="hljs-number"><span class="hljs-number">1.0</span></span> - cosTheta*cosTheta); <span class="hljs-comment"><span class="hljs-comment">//       vec3 H; Hx = cos(phi) * sinTheta; Hy = sin(phi) * sinTheta; Hz = cosTheta; //        vec3 up = abs(Nz) &lt; 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0); vec3 tangent = normalize(cross(up, N)); vec3 bitangent = cross(N, tangent); vec3 sampleVec = tangent * Hx + bitangent * Hy + N * Hz; return normalize(sampleVec); }</span></span></code> </pre><br>  Le rÃ©sultat est un vecteur Ã©chantillon, approximativement orientÃ© le long du vecteur mÃ©dian des microsurfaces, pour une rugositÃ© donnÃ©e et un Ã©lÃ©ment de la sÃ©quence de faible mÃ©sappariement <i>Xi</i> .  Notez qu'Epic Games utilise le carrÃ© de la valeur de rugositÃ© pour une meilleure qualitÃ© visuelle, basÃ©e sur le travail original de Disney sur la mÃ©thode PBR. <br><br>  AprÃ¨s avoir terminÃ© la mise en Å“uvre de la sÃ©quence de Hammersley et de l'exemple de code de gÃ©nÃ©ration de vecteur, nous pouvons donner le code de prÃ©-filtrage et de shader de convolution: <br><br><pre> <code class="plaintext hljs">#version 330 core out vec4 FragColor; in vec3 localPos; uniform samplerCube environmentMap; uniform float roughness; const float PI = 3.14159265359; float RadicalInverse_VdC(uint bits); vec2 Hammersley(uint i, uint N); vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness); void main() { vec3 N = normalize(localPos); vec3 R = N; vec3 V = R; const uint SAMPLE_COUNT = 1024u; float totalWeight = 0.0; vec3 prefilteredColor = vec3(0.0); for(uint i = 0u; i &lt; SAMPLE_COUNT; ++i) { vec2 Xi = Hammersley(i, SAMPLE_COUNT); vec3 H = ImportanceSampleGGX(Xi, N, roughness); vec3 L = normalize(2.0 * dot(V, H) * H - V); float NdotL = max(dot(N, L), 0.0); if(NdotL &gt; 0.0) { prefilteredColor += texture(environmentMap, L).rgb * NdotL; totalWeight += NdotL; } } prefilteredColor = prefilteredColor / totalWeight; FragColor = vec4(prefilteredColor, 1.0); }</code> </pre> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous effectuons un filtrage prÃ©liminaire de la carte d'environnement en fonction d'une rugositÃ© donnÃ©e, dont le niveau change pour chaque niveau de mip de la carte cubique rÃ©sultante (de 0,0 Ã  1,0), et le rÃ©sultat du filtre est stockÃ© dans la variable </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prefilteredColor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ensuite, la variable est divisÃ©e par le poids total pour l'ensemble de l'Ã©chantillon, et les Ã©chantillons avec une contribution plus faible au rÃ©sultat final (ayant une valeur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NdotL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> infÃ©rieure </font><font style="vertical-align: inherit;">) augmentent Ã©galement le poids total moins.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Enregistrement des donnÃ©es de prÃ©-filtrage dans les niveaux de mip </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il reste Ã  Ã©crire du code qui demande directement Ã  OpenGL de filtrer la carte d'environnement avec diffÃ©rents niveaux de rugositÃ©, puis d'enregistrer les rÃ©sultats dans une sÃ©rie de niveaux de mip de la carte cubique cible. Ici, le code dÃ©jÃ  prÃ©parÃ© de la leÃ§on sur le calcul de la carte d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">irradiation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est utile </font><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="cpp hljs">prefilterShader.use(); prefilterShader.setInt(<span class="hljs-string"><span class="hljs-string">"environmentMap"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); prefilterShader.setMat4(<span class="hljs-string"><span class="hljs-string">"projection"</span></span>, captureProjection); glActiveTexture(GL_TEXTURE0); glBindTexture(GL_TEXTURE_CUBE_MAP, envCubemap); glBindFramebuffer(GL_FRAMEBUFFER, captureFBO); <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxMipLevels = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mip = <span class="hljs-number"><span class="hljs-number">0</span></span>; mip &lt; maxMipLevels; ++mip) { <span class="hljs-comment"><span class="hljs-comment">//        - unsigned int mipWidth = 128 * std::pow(0.5, mip); unsigned int mipHeight = 128 * std::pow(0.5, mip); glBindRenderbuffer(GL_RENDERBUFFER, captureRBO); glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT24, mipWidth, mipHeight); glViewport(0, 0, mipWidth, mipHeight); float roughness = (float)mip / (float)(maxMipLevels - 1); prefilterShader.setFloat("roughness", roughness); for (unsigned int i = 0; i &lt; 6; ++i) { prefilterShader.setMat4("view", captureViews[i]); glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, prefilterMap, mip); glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); renderCube(); } } glBindFramebuffer(GL_FRAMEBUFFER, 0);</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le processus est similaire Ã  une convolution de la carte d'irradiation, mais cette fois, vous devez spÃ©cifier la taille du tampon de trame Ã  chaque Ã©tape, en la rÃ©duisant de moitiÃ© pour correspondre aux niveaux de mip. </font><font style="vertical-align: inherit;">De plus, le niveau de mip auquel le rendu sera effectuÃ© en ce moment doit Ãªtre spÃ©cifiÃ© comme paramÃ¨tre de la fonction </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">glFramebufferTexture2D ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le rÃ©sultat de l'exÃ©cution de ce code devrait Ãªtre une carte cubique contenant des images de rÃ©flexions de plus en plus floues Ã  chaque niveau de mip suivant. </font><font style="vertical-align: inherit;">Vous pouvez utiliser une telle carte cubique comme source de donnÃ©es pour skybox et prendre un Ã©chantillon de n'importe quel niveau de mip en dessous de zÃ©ro:</font></font><br><br><pre> <code class="cpp hljs">vec3 envColor = textureLod(environmentMap, WorldPos, <span class="hljs-number"><span class="hljs-number">1.2</span></span>).rgb;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Le rÃ©sultat de cette action sera l'image suivante: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/f7/la/6t/f7la6ts6ewslfr8fg2kfvtdzuly.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il ressemble Ã  une carte d'environnement source trÃ¨s floue. </font><font style="vertical-align: inherit;">Si votre rÃ©sultat est similaire, le processus de filtrage prÃ©liminaire de la carte d'environnement HDR est probablement effectuÃ© correctement. </font><font style="vertical-align: inherit;">Essayez d'expÃ©rimenter avec un Ã©chantillon de diffÃ©rents niveaux de mip et observez une augmentation progressive du flou Ã  chaque niveau suivant.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PrÃ©filtre des artefacts de convolution </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour la plupart des tÃ¢ches, l'approche dÃ©crite fonctionne plutÃ´t bien, mais tÃ´t ou tard vous devrez rencontrer divers artefacts gÃ©nÃ©rÃ©s par le processus de prÃ©filtrage. </font><font style="vertical-align: inherit;">Voici les mÃ©thodes les plus courantes et les traiter.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La manifestation des coutures de la carte cubique </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La sÃ©lection des valeurs de la carte en cubes traitÃ©e par le filtre prÃ©liminaire pour les surfaces Ã  rugositÃ© Ã©levÃ©e conduit Ã  lire les donnÃ©es du niveau de mip quelque part plus prÃ¨s de la fin de leur chaÃ®ne. </font><font style="vertical-align: inherit;">Lors de l'Ã©chantillonnage Ã  partir d'une carte cubique, OpenGL par dÃ©faut n'interpole pas linÃ©airement entre les faces de la carte cubique. </font><font style="vertical-align: inherit;">Ã‰tant donnÃ© que les niveaux de mip Ã©levÃ©s ont une rÃ©solution infÃ©rieure et que la carte de l'environnement a Ã©tÃ© convolue en tenant compte d'un lobe miroir beaucoup plus grand, l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">absence de filtrage de texture entre les faces</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> devient Ã©vidente:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mh/dk/dq/mhdkdq1uolf6wc2lzhhrtxxghsy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Heureusement, OpenGL a la possibilitÃ© d'activer ce filtrage avec un simple indicateur: </font></font><br><br><pre> <code class="cpp hljs">glEnable(GL_TEXTURE_CUBE_MAP_SEAMLESS);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Il suffit de dÃ©finir l'indicateur quelque part dans le code d'initialisation de l'application et cet artefact est supprimÃ©. </font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Des points lumineux apparaissent </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ã‰tant donnÃ© que les rÃ©flexions miroir dans le cas gÃ©nÃ©ral contiennent des dÃ©tails Ã  haute frÃ©quence, ainsi que des rÃ©gions avec des luminositÃ©s trÃ¨s diffÃ©rentes, leur convolution nÃ©cessite l'utilisation d'un grand nombre de points d'Ã©chantillonnage pour prendre correctement en compte la grande dispersion des valeurs Ã  l'intÃ©rieur des rÃ©flexions HDR de l'environnement. Dans l'exemple, nous prenons dÃ©jÃ  un nombre suffisamment important d'Ã©chantillons, mais pour certaines scÃ¨nes et niveaux Ã©levÃ©s de rugositÃ© du matÃ©riau cela ne sera toujours pas suffisant, et vous serez tÃ©moin de l'apparition de nombreux points autour des zones claires:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1e/av/eu/1eaveuoooowy4vsfibkyw_bwqos.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez continuer Ã  augmenter le nombre d'Ã©chantillons, mais ce ne sera pas une solution universelle et dans certaines circonstances, cela autorisera toujours un artefact. </font><font style="vertical-align: inherit;">Mais vous pouvez vous tourner vers la mÃ©thode </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chetan Jags</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui vous permet de rÃ©duire la manifestation d'un artefact. </font><font style="vertical-align: inherit;">Pour ce faire, au stade de convolution prÃ©liminaire, la sÃ©lection Ã  partir de la carte d'environnement n'est pas effectuÃ©e directement, mais Ã  partir d'un de ses niveaux de mip, en fonction de la valeur obtenue Ã  partir de la fonction de distribution de probabilitÃ© de l'intÃ©grande et de la rugositÃ©:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> D = DistributionGGX(NdotH, roughness); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> pdf = (D * NdotH / (<span class="hljs-number"><span class="hljs-number">4.0</span></span> * HdotV)) + <span class="hljs-number"><span class="hljs-number">0.0001</span></span>; <span class="hljs-comment"><span class="hljs-comment">//        float resolution = 512.0; float saTexel = 4.0 * PI / (6.0 * resolution * resolution); float saSample = 1.0 / (float(SAMPLE_COUNT) * pdf + 0.0001); float mipLevel = roughness == 0.0 ? 0.0 : 0.5 * log2(saSample / saTexel);</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> N'oubliez pas d'activer le filtrage trilinÃ©aire pour la carte d'environnement afin de sÃ©lectionner avec succÃ¨s parmi les niveaux de mip: </font></font><br><br><pre> <code class="cpp hljs">glBindTexture(GL_TEXTURE_CUBE_MAP, envCubemap); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> N'oubliez pas non plus de crÃ©er directement des niveaux de mip pour la texture Ã  l'aide d'OpenGL, mais uniquement aprÃ¨s que le niveau de mip principal est complÃ¨tement formÃ©: </font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  HDR      ... [...] //  - glBindTexture(GL_TEXTURE_CUBE_MAP, envCubemap); glGenerateMipmap(GL_TEXTURE_CUBE_MAP);</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cette mÃ©thode fonctionne Ã©tonnamment bien, supprimant presque tous (et souvent tous) les points sur la carte filtrÃ©e, mÃªme Ã  des niveaux de rugositÃ© Ã©levÃ©s. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Calcul prÃ©liminaire de BRDF </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons donc traitÃ© avec succÃ¨s la carte de l'environnement avec le filtre et nous pouvons maintenant nous concentrer sur la deuxiÃ¨me partie de l'approximation sous la forme d'une somme distincte reprÃ©sentant BRDF. </font><font style="vertical-align: inherit;">Pour rafraÃ®chir la mÃ©moire, jetez un coup d'Å“il Ã  l'enregistrement complet de la solution approximative:</font></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-752"><span class="MJXp-msubsup" id="MJXp-Span-753"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-754" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-755" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-756" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-757"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-758" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-759"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-760" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-761" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-762" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font></span><span class="MJXp-mo" id="MJXp-Span-763" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-munderover" id="MJXp-Span-764"><span class=""><span class="MJXp-mo" id="MJXp-Span-765" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âˆ« </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-766" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-767"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î©</font></font></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-768"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-769" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> L </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-770" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-771" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-772"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-773" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-774"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-775" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-776" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-777" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-778"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-779"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-780" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-781" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-782" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> âˆ— </font></font></span><span class="MJXp-munderover" id="MJXp-Span-783"><span class=""><span class="MJXp-mo" id="MJXp-Span-784" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âˆ« </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-785" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-786"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î©</font></font></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-787"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-788" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-789" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-790" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-791"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-792" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-793"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-794" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-795" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-796" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-797"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-798" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-799" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-800" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-801"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mo" id="MJXp-Span-802" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â‹… </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-803"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-804" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-805" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-806"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-807"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-808" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-809" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-34">L_o(p,\omega_o) = \int\limits_{\Omega} L_i(p,\omega_i) d\omega_i * \int\limits_{\Omega} f_r(p, \omega_i, \omega_o) n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons calculÃ© au prÃ©alable la partie gauche de la somme et enregistrÃ© les rÃ©sultats pour diffÃ©rents niveaux de rugositÃ© sur une carte cubique distincte. </font><font style="vertical-align: inherit;">Le cÃ´tÃ© droit nÃ©cessitera la convolution de l'expression BDRF ainsi que les paramÃ¨tres suivants: angle</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-810"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-811"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mo" id="MJXp-Span-812" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â‹… </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-813"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-814" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-815" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , rugositÃ© de surface et coefficient de Fresnel</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35">n \cdot \omega_i</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-816"><span class="MJXp-msubsup" id="MJXp-Span-817"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-818" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-819" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36">F_0</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Un processus similaire Ã  l'intÃ©gration d'un BRDF en miroir pour un environnement complÃ¨tement blanc ou avec une luminositÃ© d'Ã©nergie constante </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-820"><span class="MJXp-msubsup" id="MJXp-Span-821"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-822" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-823" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-824" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-mn" id="MJXp-Span-825"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,0</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37">L_i = 1.0</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Convolution de BRDF pour trois variables n'est pas une tÃ¢che triviale, mais dans ce cas </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-826"><span class="MJXp-msubsup" id="MJXp-Span-827"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-828" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-829" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut Ãªtre dÃ©rivÃ© de l'expression dÃ©crivant le miroir BRDF:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38">F_0</script><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-830"><span class="MJXp-munderover" id="MJXp-Span-831"><span class=""><span class="MJXp-mo" id="MJXp-Span-832" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âˆ« </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-833" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-834"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î©</font></font></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-835"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-836" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-837" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-838" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-839"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span><span class="MJXp-mo" id="MJXp-Span-840" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-841"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-842" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-843" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-844" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-845"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-846" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-847" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-848" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-849"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-850" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â‹…</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-851"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-852" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-853" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-854"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-855"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-856" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-857" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-858" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><span class="MJXp-munderover" id="MJXp-Span-859"><span class=""><span class="MJXp-mo" id="MJXp-Span-860" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> âˆ« </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-861" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-862"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î©</font></font></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-863"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-864" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-865" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-866" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-867"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span><span class="MJXp-mo" id="MJXp-Span-868" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-869"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-870" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-871" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-872" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-873"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-874" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-875" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-876" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mfrac" id="MJXp-Span-877" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-878"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> F </font></font></span><span class="MJXp-mo" id="MJXp-Span-879" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-880"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-881" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-882" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-883" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-884"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-885" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-886"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mo" id="MJXp-Span-887" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-888"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-889" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-890" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-891" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-892"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-893" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-894"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n</font></font></span><span class="MJXp-mo" id="MJXp-Span-895" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â‹…</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-896"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-897" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-898" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-899"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-900"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-901" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-902" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-39">\int\limits_{\Omega} f_r(p, \omega_i, \omega_o) n \cdot \omega_i d\omega_i = \int\limits_{\Omega} f_r(p, \omega_i, \omega_o) \frac{F(\omega_o, h)}{F(\omega_o, h)} n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ici </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-903"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-904"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une fonction qui dÃ©crit le calcul de l'ensemble de Fresnel. </font><font style="vertical-align: inherit;">En dÃ©plaÃ§ant le diviseur dans l'expression de BRDF, vous pouvez passer Ã  la notation Ã©quivalente suivante:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> F </script><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-905"><span class="MJXp-munderover" id="MJXp-Span-906"><span class=""><span class="MJXp-mo" id="MJXp-Span-907" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âˆ« </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-908" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-909"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î© </font></font></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-910" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-911"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-912" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-913" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-914" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-915"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-916" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-917"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-918" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-919" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-920" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-921"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-922" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-923" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-924" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-925"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mo" id="MJXp-Span-926" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-927"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-928" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-929" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-930" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-931"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-932" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-933"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> F</font></font></span><span class="MJXp-mo" id="MJXp-Span-934" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-935"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-936" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-937" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-938" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-939"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></span><span class="MJXp-mo" id="MJXp-Span-940" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-941"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-942" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â‹…</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-943"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-944" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-945" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-946"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-947"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-948" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-949" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-41">\int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} F(\omega_o, h) n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Remplacement de la bonne entrÃ©e </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-950"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-951"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur l'approximation de Fresnel-Schlick, on obtient:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42"> F </script><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-952"><span class="MJXp-munderover" id="MJXp-Span-953"><span class=""><span class="MJXp-mo" id="MJXp-Span-954" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âˆ« </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-955" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-956"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î© </font></font></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-957" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-958"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-959" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-960" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-961" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-962"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-963" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-964"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-965" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-966" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-967" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-968"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-969" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-970" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-971" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-972"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mo" id="MJXp-Span-973" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-974"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-975" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-976" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-977" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-978"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-979" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-980" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-981"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-982" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-983" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-984" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></span><span class="MJXp-mo" id="MJXp-Span-985" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mn" id="MJXp-Span-986"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span><span class="MJXp-mo" id="MJXp-Span-987" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-988"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-989" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-990" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-991" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-992"><span class="MJXp-mrow" id="MJXp-Span-993" style="margin-right: 0.05em;"><span class="MJXp-mo" id="MJXp-Span-994" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mn" id="MJXp-Span-995"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span><span class="MJXp-mo" id="MJXp-Span-996" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-997"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-998" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-999" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1000" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â‹…</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1001"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></span><span class="MJXp-mo" id="MJXp-Span-1002" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1003" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1004" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1005"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-1006" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â‹…</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1007"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1008" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1009" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1010"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1011"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1012" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1013" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-43">\int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} (F_0 + (1 - F_0){(1 - \omega_o \cdot h)}^5) n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Indique l'expression </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1014"><span class="MJXp-msubsup" id="MJXp-Span-1015"><span class="MJXp-mrow" id="MJXp-Span-1016" style="margin-right: 0.05em;"><span class="MJXp-mo" id="MJXp-Span-1017" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mn" id="MJXp-Span-1018"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mo" id="MJXp-Span-1019" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1020"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1021" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1022" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1023" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> â‹… </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1024"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-1025" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1026" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44">{(1 - \omega_o \cdot h)}^5</script>  comment <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1027"><span class="MJXp-mrow" id="MJXp-Span-1028"><span class="MJXp-mo" id="MJXp-Span-1029" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1030"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1031"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1032"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1033"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1034"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour simplifier la dÃ©cision sur</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-45">/alpha</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1035"><span class="MJXp-msubsup" id="MJXp-Span-1036"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1037" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1038" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-46">F_0</script>  : <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1039"><span class="MJXp-munderover" id="MJXp-Span-1040"><span class=""><span class="MJXp-mo" id="MJXp-Span-1041" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">âˆ«</span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1042" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1043">Î©</span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-1044" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-1045"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1046" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1047" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-1048" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1049">p</span><span class="MJXp-mo" id="MJXp-Span-1050" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1051"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1052" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1053" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1054" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1055"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1056" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1057" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1058" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1059">F</span><span class="MJXp-mo" id="MJXp-Span-1060" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1061"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1062" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1063" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1064" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1065">h</span><span class="MJXp-mo" id="MJXp-Span-1066" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1067" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1068"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1069" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1070" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1071" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-1072" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-1073">1</span><span class="MJXp-mo" id="MJXp-Span-1074" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-msubsup" id="MJXp-Span-1075"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1076" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1077" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1078" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1079">Î±</span><span class="MJXp-mo" id="MJXp-Span-1080" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1081">n</span><span class="MJXp-mo" id="MJXp-Span-1082" style="margin-left: 0.267em; margin-right: 0.267em;">â‹…</span><span class="MJXp-msubsup" id="MJXp-Span-1083"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1084" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1085" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1086">d</span><span class="MJXp-msubsup" id="MJXp-Span-1087"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1088" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1089" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-47">\int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} (F_0 + (1 - F_0)\alpha) n \cdot \omega_i d\omega_i</script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1090"><span class="MJXp-munderover" id="MJXp-Span-1091"><span class=""><span class="MJXp-mo" id="MJXp-Span-1092" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">âˆ«</span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1093" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1094">Î©</span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-1095" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-1096"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1097" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1098" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-1099" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1100">p</span><span class="MJXp-mo" id="MJXp-Span-1101" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1102"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1103" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1104" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1105" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1106"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1107" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1108" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1109" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1110">F</span><span class="MJXp-mo" id="MJXp-Span-1111" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1112"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1113" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1114" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1115" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1116">h</span><span class="MJXp-mo" id="MJXp-Span-1117" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1118" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1119"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1120" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1121" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1122" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1123">1</span><span class="MJXp-mo" id="MJXp-Span-1124" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ—</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1125">Î±</span><span class="MJXp-mo" id="MJXp-Span-1126" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-msubsup" id="MJXp-Span-1127"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1128" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1129" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1130" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ—</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1131">Î±</span><span class="MJXp-mo" id="MJXp-Span-1132" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1133">n</span><span class="MJXp-mo" id="MJXp-Span-1134" style="margin-left: 0.267em; margin-right: 0.267em;">â‹…</span><span class="MJXp-msubsup" id="MJXp-Span-1135"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1136" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1137" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1138">d</span><span class="MJXp-msubsup" id="MJXp-Span-1139"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1140" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1141" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-48">\int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} (F_0 + 1*\alpha - F_0*\alpha) n \cdot \omega_i d\omega_i</script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1142"><span class="MJXp-munderover" id="MJXp-Span-1143"><span class=""><span class="MJXp-mo" id="MJXp-Span-1144" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">âˆ«</span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1145" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1146">Î©</span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-1147" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-1148"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1149" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1150" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-1151" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1152">p</span><span class="MJXp-mo" id="MJXp-Span-1153" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1154"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1155" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1156" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1157" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1158"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1159" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1160" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1161" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1162"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mo" id="MJXp-Span-1163" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1164"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1165" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1166" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1167" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1168"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-1169" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1170" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1171"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1172" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1173" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1174" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âˆ—</font></font></span><span class="MJXp-mo" id="MJXp-Span-1175" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mn" id="MJXp-Span-1176"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span><span class="MJXp-mo" id="MJXp-Span-1177" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1178"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î±</font></font></span><span class="MJXp-mo" id="MJXp-Span-1179" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mo" id="MJXp-Span-1180" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1181"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î±</font></font></span><span class="MJXp-mo" id="MJXp-Span-1182" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1183"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-1184" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â‹…</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1185"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1186" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1187" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1188"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1189"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1190" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1191" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-49">\int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} (F_0 * (1 - \alpha) + \alpha) n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fonction suivante </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1192"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1193"><font style="vertical-align: inherit;"></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous divisons</font><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1192"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1193"><font style="vertical-align: inherit;"> F</font></span></span></span><font style="vertical-align: inherit;"> en deux intÃ©grales:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-50"> F </script><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1194"><span class="MJXp-munderover" id="MJXp-Span-1195"><span class=""><span class="MJXp-mo" id="MJXp-Span-1196" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âˆ« </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1197" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1198"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î© </font></font></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-1199" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-1200"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1201" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1202" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1203" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1204"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-1205" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1206"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1207" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1208" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1209" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1210"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1211" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1212" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1213" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1214"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mo" id="MJXp-Span-1215" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1216"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1217" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1218" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1219" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1220"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-1221" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1222" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1223"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1224" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1225" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1226" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âˆ—</font></font></span><span class="MJXp-mo" id="MJXp-Span-1227" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mn" id="MJXp-Span-1228"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span><span class="MJXp-mo" id="MJXp-Span-1229" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1230"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î±</font></font></span><span class="MJXp-mo" id="MJXp-Span-1231" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mo" id="MJXp-Span-1232" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1233"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-1234" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â‹…</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1235"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1236" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1237" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1238"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1239"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1240" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1241" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1242" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></span><span class="MJXp-munderover" id="MJXp-Span-1243"><span class=""><span class="MJXp-mo" id="MJXp-Span-1244" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">âˆ«</font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1245" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1246"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î©</font></font></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-1247" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-1248"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1249" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1250" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1251" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1252"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span><span class="MJXp-mo" id="MJXp-Span-1253" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1254"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1255" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1256" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1257" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1258"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1259" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1260" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1261" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1262"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mo" id="MJXp-Span-1263" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1264"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1265" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1266" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1267" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1268"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-1269" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1270" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1271"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î±</font></font></span><span class="MJXp-mo" id="MJXp-Span-1272" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1273"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-1274" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â‹…</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1275"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1276" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1277" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1278"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1279"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1280" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1281" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-51">\int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} (F_0 * (1 - \alpha)) n \cdot \omega_i d\omega_i + \int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} (\alpha) n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> De cette faÃ§on </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1282"><span class="MJXp-msubsup" id="MJXp-Span-1283"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1284" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1285" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sera constant sous l'intÃ©grale, et nous pouvons le retirer du signe de l'intÃ©grale. </font><font style="vertical-align: inherit;">Ensuite, nous rÃ©vÃ©lerons</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52">F_0</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1286"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1287"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î±</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans l'expression d'origine et obtenez l'entrÃ©e finale pour BRDF sous la forme d'une somme distincte:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-53">\alpha</script><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1288"><span class="MJXp-msubsup" id="MJXp-Span-1289"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1290" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1291" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-munderover" id="MJXp-Span-1292"><span class=""><span class="MJXp-mo" id="MJXp-Span-1293" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">âˆ«</span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1294" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1295">Î©</span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-1296"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1297" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1298" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-1299" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1300">p</span><span class="MJXp-mo" id="MJXp-Span-1301" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1302"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1303" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1304" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1305" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1306"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1307" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1308" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1309" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1310" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-1311">1</span><span class="MJXp-mo" id="MJXp-Span-1312" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-msubsup" id="MJXp-Span-1313"><span class="MJXp-mrow" id="MJXp-Span-1314" style="margin-right: 0.05em;"><span class="MJXp-mo" id="MJXp-Span-1315" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-1316">1</span><span class="MJXp-mo" id="MJXp-Span-1317" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-msubsup" id="MJXp-Span-1318"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1319" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1320" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1321" style="margin-left: 0.267em; margin-right: 0.267em;">â‹…</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1322">h</span><span class="MJXp-mo" id="MJXp-Span-1323" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1324" style="vertical-align: 0.5em;">5</span></span><span class="MJXp-mo" id="MJXp-Span-1325" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1326">n</span><span class="MJXp-mo" id="MJXp-Span-1327" style="margin-left: 0.267em; margin-right: 0.267em;">â‹…</span><span class="MJXp-msubsup" id="MJXp-Span-1328"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1329" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1330" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1331">d</span><span class="MJXp-msubsup" id="MJXp-Span-1332"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1333" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1334" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1335" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-munderover" id="MJXp-Span-1336"><span class=""><span class="MJXp-mo" id="MJXp-Span-1337" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">âˆ«</span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1338" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1339">Î©</span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-1340"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1341" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1342" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-1343" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1344">p</span><span class="MJXp-mo" id="MJXp-Span-1345" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1346"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1347" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1348" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1349" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1350"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1351" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1352" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1353" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-1354"><span class="MJXp-mrow" id="MJXp-Span-1355" style="margin-right: 0.05em;"><span class="MJXp-mo" id="MJXp-Span-1356" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-1357">1</span><span class="MJXp-mo" id="MJXp-Span-1358" style="margin-left: 0.267em; margin-right: 0.267em;">âˆ’</span><span class="MJXp-msubsup" id="MJXp-Span-1359"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1360" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1361" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1362" style="margin-left: 0.267em; margin-right: 0.267em;">â‹…</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1363">h</span><span class="MJXp-mo" id="MJXp-Span-1364" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1365" style="vertical-align: 0.5em;">5</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1366">n</span><span class="MJXp-mo" id="MJXp-Span-1367" style="margin-left: 0.267em; margin-right: 0.267em;">â‹…</span><span class="MJXp-msubsup" id="MJXp-Span-1368"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1369" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1370" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1371">d</span><span class="MJXp-msubsup" id="MJXp-Span-1372"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1373" style="margin-right: 0.05em;">Ï‰</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1374" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-54">F_0 \int\limits_{\Omega} f_r(p, \omega_i, \omega_o)(1 - {(1 - \omega_o \cdot h)}^5) n \cdot \omega_i d\omega_i + \int\limits_{\Omega} f_r(p, \omega_i, \omega_o) {(1 - \omega_o \cdot h)}^5 n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Les deux intÃ©grales rÃ©sultantes reprÃ©sentent l'Ã©chelle et le dÃ©calage de la valeur </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1375"><span class="MJXp-msubsup" id="MJXp-Span-1376"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1377" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1378" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55">F_0</script>  en consÃ©quence.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Notez que </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1379"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1380"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mo" id="MJXp-Span-1381" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1382"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-1383" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1384"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1385" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1386" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1387" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1388"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1389" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ï‰ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1390" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1391" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contient une occurrence</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-56">f(p, \omega_i, \omega_o)</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1392"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1393"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , car ces occurrences s'annulent et disparaissent de l'expression. </font><font style="vertical-align: inherit;">En utilisant l'approche dÃ©jÃ  dÃ©veloppÃ©e, la convolution BRDF peut Ãªtre rÃ©alisÃ©e avec les donnÃ©es d'entrÃ©e: rugositÃ© et angle entre vecteurs</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57"> F </script><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1394"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1395"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-58"> n </script>  et <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1396"><span class="MJXp-msubsup" id="MJXp-Span-1397"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1398" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1399" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-59">w_o</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ã‰crire le rÃ©sultat dans la texture 2D - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">complexation carte BRDF</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">carte d'intÃ©gration BRDF</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), qui servira de valeurs de la </font><font style="vertical-align: inherit;">table auxiliaire pour utilisation dans le shader finale, qui formeront le rÃ©sultat final de l'Ã©clairage spÃ©culaire indirect. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le shader de convolution BRDF fonctionne sur le plan, en utilisant directement les coordonnÃ©es de texture bidimensionnelles comme paramÃ¨tres d'entrÃ©e du processus de convolution ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NdotV</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rugositÃ©</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Le code est sensiblement similaire Ã  la convolution du prÃ©-filtrage, mais ici le vecteur Ã©chantillon est traitÃ© en tenant compte de la fonction gÃ©omÃ©trique BRDF et de l'expression de l'approximation de Fresnel-Schlick:</font></font><br><br><pre> <code class="plaintext hljs">vec2 IntegrateBRDF(float NdotV, float roughness) { vec3 V; Vx = sqrt(1.0 - NdotV*NdotV); Vy = 0.0; Vz = NdotV; float A = 0.0; float B = 0.0; vec3 N = vec3(0.0, 0.0, 1.0); const uint SAMPLE_COUNT = 1024u; for(uint i = 0u; i &lt; SAMPLE_COUNT; ++i) { vec2 Xi = Hammersley(i, SAMPLE_COUNT); vec3 H = ImportanceSampleGGX(Xi, N, roughness); vec3 L = normalize(2.0 * dot(V, H) * H - V); float NdotL = max(Lz, 0.0); float NdotH = max(Hz, 0.0); float VdotH = max(dot(V, H), 0.0); if(NdotL &gt; 0.0) { float G = GeometrySmith(N, V, L, roughness); float G_Vis = (G * VdotH) / (NdotH * NdotV); float Fc = pow(1.0 - VdotH, 5.0); A += (1.0 - Fc) * G_Vis; B += Fc * G_Vis; } } A /= float(SAMPLE_COUNT); B /= float(SAMPLE_COUNT); return vec2(A, B); } // ---------------------------------------------------------------------------- void main() { vec2 integratedBRDF = IntegrateBRDF(TexCoords.x, TexCoords.y); FragColor = integratedBRDF; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme vous pouvez le voir, la convolution de BRDF est implÃ©mentÃ©e comme un arrangement presque littÃ©ral des calculs mathÃ©matiques ci-dessus. </font><font style="vertical-align: inherit;">Les paramÃ¨tres d'entrÃ©e de rugositÃ© et d'angle sont pris.</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1400"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1401"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î¸</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un vecteur Ã©chantillon est formÃ© sur la base de l'Ã©chantillon par signification, traitÃ© Ã  l'aide de la fonction de gÃ©omÃ©trie et de l'expression de Fresnel transformÃ©e pour BRDF. </font><font style="vertical-align: inherit;">Par consÃ©quent, pour chaque Ã©chantillon, l'ampleur de la mise Ã  l'Ã©chelle et du dÃ©placement de la valeur</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-60-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-60">\theta</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1402"><span class="MJXp-msubsup" id="MJXp-Span-1403"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1404" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1405" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui Ã  la fin sont moyennÃ©s et renvoyÃ©s sous la forme</font><i><font style="vertical-align: inherit;">vec2</font></i><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dans une</font><font style="vertical-align: inherit;">leÃ§on</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">thÃ©orique</font></a><font style="vertical-align: inherit;">, il a Ã©tÃ© mentionnÃ© que la composante gÃ©omÃ©trique de BRDF est lÃ©gÃ¨rement diffÃ©rente dans le cas du calcul de l'IBL, car le coefficient</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-61-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-61">F_0</script><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1406"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1407"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est spÃ©cifiÃ© diffÃ©remment:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-62-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-62"> k </script><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1408"><span class="MJXp-msubsup" id="MJXp-Span-1409"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1410" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1411" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1412"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1413"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1414"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1415"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1416"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1417"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-1418" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-mfrac" id="MJXp-Span-1419" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mo" id="MJXp-Span-1420" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1421"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î± </font></font></span><span class="MJXp-mo" id="MJXp-Span-1422" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mn" id="MJXp-Span-1423"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1424"><span class="MJXp-mo" id="MJXp-Span-1425" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1426" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mn" id="MJXp-Span-1427"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></span></span></span></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-63-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-63">k_{direct} = \frac{(\alpha + 1)^2}{8}</script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1428"><span class="MJXp-msubsup" id="MJXp-Span-1429"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1430" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1431" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1432"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1433"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1434"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-1435" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-mfrac" id="MJXp-Span-1436" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-1437"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1438" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Î± </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1439" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mn" id="MJXp-Span-1440"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-64-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-64">k_{IBL} = \frac{\alpha^2}{2}</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Puisque la convolution BRDF fait partie de la solution de l'intÃ©grale dans le cas du calcul d'IBL, nous utiliserons le coefficient </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1441"><span class="MJXp-msubsup" id="MJXp-Span-1442"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1443" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1444" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1445"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1446"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1447"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour le calcul de la fonction gÃ©omÃ©trique dans le modÃ¨le Schlick-GGX:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-65-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-65">k_{IBL}</script><font style="vertical-align: inherit;"></font><br><br><pre> <code class="plaintext hljs">float GeometrySchlickGGX(float NdotV, float roughness) { float a = roughness; float k = (a * a) / 2.0; float nom = NdotV; float denom = NdotV * (1.0 - k) + k; return nom / denom; } // ---------------------------------------------------------------------------- float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness) { float NdotV = max(dot(N, V), 0.0); float NdotL = max(dot(N, L), 0.0); float ggx2 = GeometrySchlickGGX(NdotV, roughness); float ggx1 = GeometrySchlickGGX(NdotL, roughness); return ggx1 * ggx2; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Veuillez noter que le coefficient </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1448"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1449"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k est</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> calculÃ© en fonction du paramÃ¨tre</font><i><font style="vertical-align: inherit;">a</font></i><font style="vertical-align: inherit;">. De plus, dans ce cas, le paramÃ¨tre de</font><i><font style="vertical-align: inherit;">rugositÃ©</font></i><font style="vertical-align: inherit;">n'est</font><font style="vertical-align: inherit;">pas au carrÃ© lors de la description du paramÃ¨tre</font><i><font style="vertical-align: inherit;">a</font></i><font style="vertical-align: inherit;">, ce qui a Ã©tÃ© fait Ã  d'autres endroits oÃ¹ ce paramÃ¨tre a Ã©tÃ© appliquÃ©. Je ne sais pas oÃ¹ se situe le problÃ¨me: dans le travail d'Epic Games ou dans le travail initial de Disney, mais il convient de dire que c'est prÃ©cisÃ©ment cette affectation directe de la valeur de</font><i><font style="vertical-align: inherit;">rugositÃ©</font></i><font style="vertical-align: inherit;">au</font><font style="vertical-align: inherit;">paramÃ¨tre</font><i><font style="vertical-align: inherit;">a qui</font></i><font style="vertical-align: inherit;">crÃ©e la carte d'intÃ©gration BRDF identique, prÃ©sentÃ©e dans la publication Epic Games.</font><font style="vertical-align: inherit;">De plus, les rÃ©sultats de convolution BRDF seront enregistrÃ©s sous la forme d'une texture 2D de taille 512x512:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-66-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-66"> k </script><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> brdfLUTTexture; glGenTextures(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;brdfLUTTexture); <span class="hljs-comment"><span class="hljs-comment">//   ,     glBindTexture(GL_TEXTURE_2D, brdfLUTTexture); glTexImage2D(GL_TEXTURE_2D, 0, GL_RG16F, 512, 512, 0, GL_RG, GL_FLOAT, 0); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme recommandÃ© par Epic Games, un format de texture Ã  virgule flottante 16 bits est utilisÃ© ici. </font><font style="vertical-align: inherit;">Veillez Ã  dÃ©finir le mode de rÃ©pÃ©tition sur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GL_CLAMP_TO_EDGE</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> afin d'Ã©viter d'Ã©chantillonner des artefacts Ã  partir du bord. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, nous utilisons le mÃªme objet tampon de trame et exÃ©cutons un shader sur la surface d'un quad en plein Ã©cran:</font></font><br><br><pre> <code class="cpp hljs">glBindFramebuffer(GL_FRAMEBUFFER, captureFBO); glBindRenderbuffer(GL_RENDERBUFFER, captureRBO); glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT24, <span class="hljs-number"><span class="hljs-number">512</span></span>, <span class="hljs-number"><span class="hljs-number">512</span></span>); glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, brdfLUTTexture, <span class="hljs-number"><span class="hljs-number">0</span></span>); glViewport(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">512</span></span>, <span class="hljs-number"><span class="hljs-number">512</span></span>); brdfShader.use(); glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); RenderQuad(); glBindFramebuffer(GL_FRAMEBUFFER, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En consÃ©quence, nous obtenons une carte de texture qui stocke le rÃ©sultat de la convolution de la partie de l'expression du montant fractionnÃ© responsable de BRDF: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5s/so/fw/5ssofwhkncncu263tegajwxm15k.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ayant en main les rÃ©sultats du filtrage prÃ©liminaire de la carte de l'environnement et de la texture avec les rÃ©sultats de la convolution BRDF, nous pouvons restituer le rÃ©sultat du calcul de l'intÃ©grale pour l'Ã©clairage spÃ©culaire indirect basÃ© sur l'approximation par une somme sÃ©parÃ©e. </font><font style="vertical-align: inherit;">La valeur restaurÃ©e sera ensuite utilisÃ©e comme rayonnement spÃ©culaire indirect ou de fond.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Calcul de la rÃ©flectance finale dans le modÃ¨le IBL </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ainsi, afin d'obtenir une valeur dÃ©crivant la composante miroir indirect dans l'expression gÃ©nÃ©rale de la rÃ©flectivitÃ©, il est nÃ©cessaire de Â«collerÂ» les composantes d'approximation calculÃ©es en un seul ensemble comme une somme distincte. </font><font style="vertical-align: inherit;">Tout d'abord, ajoutez les Ã©chantillonneurs appropriÃ©s au shader final pour les donnÃ©es prÃ©calculÃ©es:</font></font><br><br><pre> <code class="cpp hljs">uniform samplerCube prefilterMap; uniform sampler2D brdfLUT;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout d'abord, nous obtenons la valeur de la rÃ©flexion spÃ©culaire indirecte sur la surface en Ã©chantillonnant Ã  partir d'une carte d'environnement prÃ©traitÃ©e basÃ©e sur le vecteur de rÃ©flexion. </font><font style="vertical-align: inherit;">Veuillez noter qu'ici, la sÃ©lection du niveau de mip pour l'Ã©chantillonnage est basÃ©e sur la rugositÃ© de la surface. </font><font style="vertical-align: inherit;">Pour les surfaces plus rugueuses, la rÃ©flexion sera </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plus floue</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre> <code class="plaintext hljs">void main() { [...] vec3 R = reflect(-V, N); const float MAX_REFLECTION_LOD = 4.0; vec3 prefilteredColor = textureLod(prefilterMap, R, roughness * MAX_REFLECTION_LOD).rgb; [...] }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au stade de convolution prÃ©liminaire, nous n'avons prÃ©parÃ© que 5 niveaux de mip (de zÃ©ro Ã  quatriÃ¨me), la constante </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAX_REFLECTION_LOD</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sert Ã  limiter la sÃ©lection Ã  partir des niveaux de mip gÃ©nÃ©rÃ©s. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, nous faisons une sÃ©lection Ã  partir de la carte d'intÃ©gration BRDF en fonction de la rugositÃ© et de l'angle entre la normale et la direction de la vue:</font></font><br><br><pre> <code class="cpp hljs">vec3 F = FresnelSchlickRoughness(max(dot(N, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>), F0, roughness); vec2 envBRDF = texture(brdfLUT, vec2(max(dot(N, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>), roughness)).rg; vec3 specular = prefilteredColor * (F * envBRDF.x + envBRDF.y);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La valeur obtenue Ã  partir de la carte contient des facteurs d'Ã©chelle et de dÃ©placement pour </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1450"><span class="MJXp-msubsup" id="MJXp-Span-1451"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1452" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1453" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ici on prend la valeur</font><i><font style="vertical-align: inherit;">F</font></i><font style="vertical-align: inherit;">- coefficient de Fresnel). La valeur convertie</font><i><font style="vertical-align: inherit;">F est</font></i><font style="vertical-align: inherit;">ensuite combinÃ©e avec la valeur obtenue Ã  partir de la carte de prÃ©filtrage pour obtenir une solution approximative de l'expression intÃ©grale d'origine -</font><i><font style="vertical-align: inherit;">spÃ©culaire</font></i><font style="vertical-align: inherit;">.</font><font style="vertical-align: inherit;">Ainsi, nous obtenons une solution pour la partie de l'expression de la rÃ©flectivitÃ©, qui est responsable de la rÃ©flexion spÃ©culaire. Pour obtenir une solution complÃ¨te du modÃ¨le PBR IBL, vous devez combiner cette valeur avec la solution pour la partie diffuse de l'expression de rÃ©flectance que nous avons reÃ§ue dans la</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">derniÃ¨re</font></a><font style="vertical-align: inherit;">leÃ§on:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-67-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-67">F_0</script><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><br><pre> <code class="cpp hljs">vec3 F = FresnelSchlickRoughness(max(dot(N, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>), F0, roughness); vec3 kS = F; vec3 kD = <span class="hljs-number"><span class="hljs-number">1.0</span></span> - kS; kD *= <span class="hljs-number"><span class="hljs-number">1.0</span></span> - metallic; vec3 irradiance = texture(irradianceMap, N).rgb; vec3 diffuse = irradiance * albedo; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> MAX_REFLECTION_LOD = <span class="hljs-number"><span class="hljs-number">4.0</span></span>; vec3 prefilteredColor = textureLod(prefilterMap, R, roughness * MAX_REFLECTION_LOD).rgb; vec2 envBRDF = texture(brdfLUT, vec2(max(dot(N, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>), roughness)).rg; vec3 specular = prefilteredColor * (F * envBRDF.x + envBRDF.y); vec3 ambient = (kD * diffuse + specular) * ao;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je note que la valeur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spÃ©culaire</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'est </font><font style="vertical-align: inherit;">pas multipliÃ©e par </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , car elle contient dÃ©jÃ  un coefficient de Fresnel. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LanÃ§ons notre application de test avec un ensemble familier de sphÃ¨res aux caractÃ©ristiques changeantes de mÃ©tallicitÃ© et de rugositÃ© et examinons leur apparence dans toute la splendeur du PBR:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eb/wi/sm/ebwismvfoqyrfymot9i4ab1jtp0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez aller encore plus loin et tÃ©lÃ©charger un ensemble de textures correspondant au modÃ¨le PBR et obtenir des sphÃ¨res Ã  partir de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matÃ©riaux rÃ©els</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dn/0c/0c/dn0c0ctjrjf1o3uzwl7b0eyinwm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou mÃªme tÃ©lÃ©chargez un magnifique modÃ¨le avec les textures PBR prÃ©parÃ©es d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andrew Maximov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/op/x7/22/opx722vdxpwml-woff07gtfn1rc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je pense que vous n'aurez Ã  convaincre personne que le modÃ¨le d'Ã©clairage actuel semble beaucoup plus convaincant. De plus, l'Ã©clairage semble physiquement correct quelle que soit la carte de l'environnement. Ci-dessous sont utilisÃ©es plusieurs cartes d'environnement HDR complÃ¨tement diffÃ©rentes qui changent complÃ¨tement la nature de l'Ã©clairage - mais toutes les images semblent physiquement fiables, malgrÃ© le fait que vous n'ayez pas eu Ã  rÃ©gler de paramÃ¨tres dans le modÃ¨le! (En principe, cette simplification du travail avec les matÃ©riaux est le principal avantage du pipeline PBR, et une meilleure image peut Ãªtre considÃ©rÃ©e comme une consÃ©quence agrÃ©able. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/76/wa/yd/76waydpu8cbudb6igel20llh3ig.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fuh, notre voyage dans l'essence du moteur de rendu PBR est assez volumineux. Nous sommes arrivÃ©s au rÃ©sultat Ã  travers toute une sÃ©rie d'Ã©tapes et, bien sÃ»r, beaucoup de choses peuvent mal tourner avec les premiÃ¨res approches. Par consÃ©quent, pour tout problÃ¨me, je vous conseille de bien comprendre l'exemple de code pour les </font><font style="vertical-align: inherit;">sphÃ¨res </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monochromes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">texturÃ©es</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (et le code shader, bien sÃ»r!). Ou demandez conseil dans les commentaires.</font></font><br><br><h2>  Et ensuite? </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'espÃ¨re qu'en lisant ces lignes, vous avez dÃ©jÃ  dÃ©veloppÃ© une comprÃ©hension du travail du modÃ¨le de rendu PBR, ainsi que compris et lancÃ© avec succÃ¨s une application de test. Dans ces leÃ§ons, nous avons calculÃ© toutes les cartes de texture auxiliaires nÃ©cessaires pour le modÃ¨le PBR dans notre application avant le cycle de rendu principal. Pour les tÃ¢ches de formation, cette approche est appropriÃ©e, mais pas pour une application pratique. Tout d'abord, une telle prÃ©paration prÃ©liminaire ne devrait avoir lieu qu'une seule fois, et non pas Ã  chaque lancement d'application. DeuxiÃ¨mement, si vous dÃ©cidez d'ajouter des cartes d'environnement supplÃ©mentaires, vous devrez Ã©galement les traiter au dÃ©marrage. Et si quelques cartes supplÃ©mentaires sont ajoutÃ©es? VÃ©ritable boule de neige.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est pourquoi, dans le cas gÃ©nÃ©ral, une carte d'irradiation et une carte d'environnement prÃ©traitÃ©es sont prÃ©parÃ©es une fois, puis enregistrÃ©es sur disque (la carte d'agrÃ©gation BRDF ne dÃ©pend pas de la carte d'environnement, de sorte qu'elle peut gÃ©nÃ©ralement Ãªtre calculÃ©e ou tÃ©lÃ©chargÃ©e une fois). Il s'ensuit que vous aurez besoin d'un format pour stocker les cartes cubiques HDR, y compris leurs niveaux de mip. Eh bien, ou vous pouvez les stocker et les charger en utilisant l'un des formats les plus utilisÃ©s (donc </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.dds</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> prend en charge l'enregistrement des niveaux de mip).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un autre point important: afin de donner une comprÃ©hension approfondie du pipeline PBR dans ces leÃ§ons, j'ai dÃ©crit le processus complet de prÃ©paration du rendu PBR, y compris les calculs prÃ©liminaires des cartes auxiliaires pour IBL. Cependant, dans votre pratique, vous pouvez tout aussi bien utiliser l'un des grands utilitaires qui prÃ©parent ces cartes pour vous: par exemple </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmftStudio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IBLBaker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On n'a pas pris en </font><font style="vertical-align: inherit;">compte le processus de prÃ©paration de </font><font style="vertical-align: inherit;">la carte de cube </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rÃ©flexions Ã©chantillons</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sondes de rÃ©flexion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) et les processus connexes d'interpolation de carte cubique et de correction de parallaxe. En bref, cette technique peut Ãªtre dÃ©crite comme suit: nous plaÃ§ons dans notre scÃ¨ne de nombreux objets de rÃ©flexion, qui forment une image environnementale locale sous la forme d'une carte cubique, puis toutes les cartes auxiliaires nÃ©cessaires pour le modÃ¨le IBL sont formÃ©es sur sa base. En interpolant les donnÃ©es de plusieurs Ã©chantillons en fonction de la distance de la camÃ©ra, vous pouvez obtenir un Ã©clairage trÃ¨s dÃ©taillÃ© basÃ© sur l'image, dont la qualitÃ© n'est essentiellement limitÃ©e que par le nombre d'Ã©chantillons que nous sommes prÃªts Ã  placer dans la scÃ¨ne. Cette approche vous permet de modifier correctement l'Ã©clairage, par exemple, lorsque vous passez d'une rue fortement Ã©clairÃ©e au crÃ©puscule d'une certaine piÃ¨ce. Je vais probablement Ã©crire une leÃ§on sur les tests de rÃ©flexion Ã  l'avenir,Cependant, pour le moment, je ne peux que recommander l'article Chetan Jags ci-dessous pour examen.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(L'implÃ©mentation d'Ã©chantillons, et bien plus, peut Ãªtre trouvÃ©e dans le moteur brut de l'auteur des tutoriels </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">environ Per.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MatÃ©riel supplÃ©mentaire </font></font></h2><br><ol><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Real Shading dans Unreal Engine 4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Une explication de l'approche d'Epic Games pour approximer l'expression du composant miroir par une somme divisÃ©e. </font><font style="vertical-align: inherit;">Sur la base de cet article, le code de la leÃ§on IBL PBR a Ã©tÃ© Ã©crit.</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ombrage basÃ© physiquement et Ã©clairage basÃ© sur l'image</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Un excellent article dÃ©crivant le processus d'inclusion du calcul du composant miroir d'IBL dans une application de pipeline interactif PBR.</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ã‰clairage basÃ© sur l'image</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Un article trÃ¨s long et dÃ©taillÃ© sur l'IBL spÃ©culaire et les problÃ¨mes connexes, y compris le problÃ¨me d'interpolation de la sonde lumineuse.</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Moving Frostbite to PBR</a> :       ,     PBR     Â«AAAÂ». </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Physically Based Rendering â€“ Part Three</a> :  ,  IBL  PBR   JMonkeyEngine. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Implementation Notes: Runtime Environment Map Filtering for Image Based Lighting</a> :       HDR  ,       . </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr429744/">https://habr.com/ru/post/fr429744/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr429728/index.html">Architecture MVI moderne basÃ©e sur Kotlin</a></li>
<li><a href="../fr429732/index.html">Tu vas dÃ©tester Ã§a ou un conte sur le bon code</a></li>
<li><a href="../fr429734/index.html">Le rÃªve de voler avec un biais Ã©lectrique</a></li>
<li><a href="../fr429736/index.html">Berce de Sosnowski. Au MO, a introduit des amendes pour distribution</a></li>
<li><a href="../fr429738/index.html">Arrangement d'Ã©clat optimal dans le cluster de pÃ©taoctets Elasticsearch: programmation linÃ©aire</a></li>
<li><a href="../fr429750/index.html">DÃ©veloppeur Cookbook: DDD Recipes (Part 3, Application Architecture)</a></li>
<li><a href="../fr429754/index.html">Erreurs fatales d'intÃ©gration matÃ©rielle</a></li>
<li><a href="../fr429756/index.html">Comment configurer l'installation des variables d'environnement Nuxt.js en runtime, ou Comment tout faire n'aime pas tout le monde et ne le regrette pas</a></li>
<li><a href="../fr429758/index.html">Pourquoi la documentation SRE est importante. Partie 1</a></li>
<li><a href="../fr429762/index.html">Streamer de camÃ©scope MiniDV</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>