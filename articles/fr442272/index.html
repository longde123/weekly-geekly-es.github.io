<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∂üèº üë©üèΩ‚Äçüîß üìß Aller + = versionner le package üéÖüèæ ‚Ü©Ô∏è üë©üèΩ‚Äç‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Article √©crit en f√©vrier 2018. 

 Go doit ajouter le contr√¥le de version des packages. 

 Plus pr√©cis√©ment, vous devez ajouter le concept de versionin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aller + = versionner le package</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442272/"> <i><font color="gray">Article √©crit en f√©vrier 2018.</font></i> <br><br>  Go doit ajouter le contr√¥le de version des packages. <br><br>  Plus pr√©cis√©ment, vous devez ajouter le concept de versioning au dictionnaire de travail et aux outils des d√©veloppeurs Go afin que tout le monde utilise les m√™mes num√©ros de version lorsqu'ils mentionnent le programme √† cr√©er, ex√©cuter ou analyser.  La commande <code>go</code> doit indiquer exactement quelles versions de quels packages se trouvent dans un assembly particulier. <br><br>  La num√©rotation des versions vous permet de cr√©er des assemblages reproductibles: si je publie la derni√®re version de mon programme, vous obtiendrez non seulement la derni√®re version de mon code, mais aussi les m√™mes versions exactes de tous les packages dont mon code d√©pend, afin que nous cr√©ons des fichiers binaires compl√®tement √©quivalents. <br><br>  Le contr√¥le de version garantit √©galement que demain le programme sera construit exactement de la m√™me mani√®re qu'aujourd'hui.  M√™me si de nouvelles versions des d√©pendances sont publi√©es, <code>go</code> ne les utilisera pas sans une commande sp√©ciale. <br><a name="habracut"></a><br>  Bien que vous deviez ajouter un contr√¥le de version, vous ne devez pas renoncer aux principaux avantages de la commande <code>go</code> : c'est la simplicit√©, la vitesse et la compr√©hensibilit√©.  Aujourd'hui, de nombreux programmeurs ne font pas attention aux versions et tout fonctionne bien.  Si vous faites le bon mod√®le, les programmeurs ne feront <i>toujours</i> pas attention aux num√©ros de version, tout fonctionnera mieux et deviendra plus clair.  Les workflows existants changeront √† peine.  La sortie de nouvelles versions est tr√®s simple.  En g√©n√©ral, le contr√¥le de version doit √™tre abandonn√© et ne pas d√©tourner l'attention du d√©veloppeur. <br><br>  En bref, vous devez ajouter un contr√¥le de version du package, mais ne pas rompre.  Dans cet article, nous sugg√©rons comment proc√©der, et pr√©sentons √©galement un prototype que vous pouvez essayer maintenant et qui, je l'esp√®re, deviendra la base d'une √©ventuelle int√©gration <code>go</code> .  J'esp√®re que cet article sera le d√©but d'une discussion productive sur ce qui fonctionne et ce qui ne fonctionne pas.  Sur la base de cette discussion, je ferai des ajustements √† la fois √† ma proposition et au prototype, puis je pr√©senterai la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">proposition officielle</a> pour ajouter une fonction facultative √† Go 1.11. <br><br>  Cette proposition conserve tous les avantages de <code>go get</code> , mais ajoute des versions reproductibles, prend en charge le contr√¥le de version s√©mantique, √©limine la commercialisation, supprime GOPATH au profit d'un flux de travail bas√© sur le projet et offre un d√©part en douceur de <code>dep</code> et de ses pr√©d√©cesseurs.  Cependant, cette proposition n'en est encore qu'√† ses d√©buts.  Si les d√©tails ne sont pas corrects, nous les corrigerons avant que le travail n'entre dans la distribution principale de Go. <br><br><h1>  Situation g√©n√©rale </h1><br>  Avant d'examiner la proposition, regardons la situation actuelle et comment nous nous y sommes retrouv√©s.  Cette section est peut-√™tre un peu trop grande, mais l'histoire apporte des le√ßons importantes et aide √† comprendre pourquoi nous voulons changer quelque chose.  Si cela ne vous int√©resse pas, vous pouvez imm√©diatement consulter l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">offre</a> ou lire l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article de blog qui</a> l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">accompagne avec un exemple</a> . <br><br><h3>  <code>Makefile</code> , <code>goinstall</code> et <code>go get</code> </h3><br>  En novembre 2009, le compilateur, l'√©diteur de liens et plusieurs biblioth√®ques ont √©t√© publi√©s avec la version initiale de Go.  Pour compiler et lier les programmes, il a fallu ex√©cuter <code>6g</code> et <code>6l</code> , et nous avons inclus des exemples de makefiles dans le kit.  Le shell <code>gobuild</code> minimal pourrait compiler un paquet et √©crire le makefile correspondant (dans la plupart des cas).  Il n'y avait aucun moyen √©tabli de partager le code avec d'autres.  Nous savions que cela ne suffisait pas - mais nous avons publi√© ce que nous avions, en pr√©voyant de d√©velopper le reste avec la communaut√©. <br><br>  En f√©vrier 2010, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nous avons propos√© goinstall</a> , une commande simple pour t√©l√©charger des packages √† partir de r√©f√©rentiels de syst√®mes de contr√¥le de version tels que Bitbucket et GitHub.  <code>Goinstall</code> introduit des conventions sur les chemins d'importation qui sont d√©sormais g√©n√©ralement accept√©es.  Mais √† cette √©poque, aucun code ne suivait ces conventions; <code>goinstall</code> au d√©part qu'avec des packages qui n'importaient que la biblioth√®que standard.  Mais les d√©veloppeurs sont rapidement pass√©s √† un accord unique que nous connaissons aujourd'hui, et l'ensemble des packages Go publi√©s est devenu un √©cosyst√®me holistique. <br><br>  Goinstall a √©galement corrig√© les Makefiles, et avec eux la complexit√© des options de construction personnalis√©es.  Bien qu'il soit parfois g√™nant que les auteurs de packages ne puissent pas g√©n√©rer de code lors de chaque g√©n√©ration, cette simplification est extr√™mement importante pour les <i>utilisateurs de</i> packages: ils n'ont pas √† s'inqui√©ter d'installer le m√™me ensemble d'outils que l'auteur a utilis√©.  Cette simplification est √©galement cruciale pour le fonctionnement des outils.  Makefile est une recette √©tape par √©tape requise pour compiler un package;  et l'application d'un autre outil comme <code>go vet</code> ou autocompletion au m√™me package peut √™tre assez difficile.  M√™me obtenir des d√©pendances correctement, pour reconstruire des packages si n√©cessaire et seulement si n√©cessaire, est beaucoup plus compliqu√© avec des Makefiles arbitraires.  Bien qu'√† cette √©poque certaines personnes aient object√© qu'elles √©taient priv√©es de flexibilit√©, mais avec le recul, il devient clair que l'abandon du Makefile √©tait la bonne √©tape: les avantages l'emportent de loin sur les inconv√©nients. <br><br>  En d√©cembre 2011, en pr√©paration de Go 1, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nous avons introduit la commande go</a> , qui a remplac√© <code>goinstall</code> par <code>go get</code> . <br><br>  En g√©n√©ral, <code>go get</code> introduit des changements importants: il a permis aux d√©veloppeurs de go d'√©changer du code source et d'utiliser le travail de chacun.  Il a √©galement isol√© des parties du syst√®me de construction √† l'int√©rieur de la commande <code>go</code> , de sorte qu'une automatisation importante √† l'aide d'outils est devenue possible.  Mais <code>go get</code> manquer du concept de contr√¥le de version.  Dans les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">toutes premi√®res discussions sur goinstall,</a> il est devenu clair: vous devez faire quelque chose avec le contr√¥le de version.  Malheureusement, on ne savait pas exactement quoi faire.  Au moins, dans l'√©quipe Go, nous ne comprenions pas cela clairement.  Lorsque <code>go get</code> demande un package, il obtient toujours la derni√®re copie, d√©l√©guant les op√©rations de t√©l√©chargement et de mise √† jour √† un syst√®me de contr√¥le de version tel que Git ou Mercurial.  Un tel "travail aveugle" a entra√Æn√© au moins deux d√©fauts importants. <br><br><h3>  Gestion des versions et stabilit√© de l'API </h3><br>  Le premier inconv√©nient majeur de <code>go get</code> est que sans le concept de contr√¥le de version, il ne peut rien dire √† l'utilisateur des changements √† attendre dans cette mise √† jour. <br><br>  En novembre 2013, une version de Go 1.2 a ajout√© une entr√©e FAQ avec de tels conseils concernant la gestion des versions (le texte n'a pas chang√© pour la version Go 1.10): <br><br><blockquote>  Les packages √† usage g√©n√©ral devraient conserver une compatibilit√© ascendante √† mesure qu'ils √©voluent.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les recommandations de compatibilit√© de Go 1</a> sont pertinentes ici: ne supprimez pas les noms export√©s, encouragez le balisage des litt√©raux compos√©s, etc.  Si une nouvelle fonctionnalit√© est requise, ajoutez un nouveau nom au lieu de changer l'ancien.  En cas de changement fondamental, cr√©ez un nouveau package avec un nouveau chemin d'importation. </blockquote><br>  En mars 2014, Gustavo Niemeyer a lanc√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gopkg.in</a> sous le couvert de "API stables pour le langage Go".  Ce domaine est une redirection GitHub <code>gopkg.in/yaml.v1</code> qui vous permet d'importer des chemins tels que <code>gopkg.in/yaml.v1</code> et <code>gopkg.in/yaml.v2</code> pour diverses <code>gopkg.in/yaml.v2</code> (√©ventuellement dans diff√©rentes branches) d'un r√©f√©rentiel Git.  Selon le versionnage s√©mantique, les auteurs devraient, lorsqu'ils apportent des modifications critiques, publier une nouvelle version majeure.  Ainsi, les versions ult√©rieures du chemin d'importation <code>v1</code> remplacent les pr√©c√©dentes et <code>v2</code> peut donner des API compl√®tement diff√©rentes. <br><br>  En ao√ªt 2015, Dave Cheney a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">soumis une proposition de contr√¥le de version s√©mantique</a> .  Au cours des prochains mois, cela a provoqu√© une discussion int√©ressante: tout le monde semblait d'accord pour dire que le balisage s√©mantique des versions est une excellente id√©e, mais personne ne savait comment les outils devraient fonctionner avec ces versions. <br><br>  Tous les arguments pour le versioning s√©mantique seront in√©vitablement critiqu√©s en r√©f√©rence √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la loi</a> d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Hyrum</a> : <br><br><blockquote>  Le contrat de votre API devient sans importance avec un nombre suffisant d'utilisateurs.  Quelqu'un d√©pend de tout comportement observ√© du syst√®me. </blockquote><br>  Bien que la loi de Hyrum soit empiriquement correcte, le contr√¥le de version s√©mantique est toujours un moyen utile de g√©n√©rer des attentes sur la relation entre les versions.  Une mise √† niveau de 1.2.3 √† 1.2.4 ne devrait pas casser votre code, et une mise √† niveau de 1.2.3 √† 2.0.0 pourrait tr√®s bien.  Si le code cesse de fonctionner apr√®s la mise √† jour vers 1.2.4, l'auteur acceptera tr√®s probablement un rapport de bogue et corrigera l'erreur dans la version 1.2.5.  Si le code a cess√© de fonctionner (ou m√™me compil√©) apr√®s la mise √† jour vers 2.0.0, alors ce changement √©tait beaucoup plus susceptible d'√™tre intentionnel et, en cons√©quence, il est peu probable que quelque chose soit corrig√© dans 2.0.1. <br><br>  Je ne veux pas conclure de la loi de Hiram que le versioning s√©mantique est impossible.  Au lieu de cela, je crois que les assemblys doivent √™tre utilis√©s avec pr√©caution, en utilisant exactement les m√™mes versions de chaque d√©pendance que l'auteur.  Autrement dit, l'assemblage par d√©faut doit √™tre aussi reproductible que possible. <br><br><h3>  Assemblages distributeurs et reproductibles </h3><br>  Le deuxi√®me inconv√©nient majeur de <code>go get</code> est que sans le concept de contr√¥le de version, une √©quipe ne peut pas fournir et m√™me exprimer l'id√©e d'une construction reproductible.  Vous ne pouvez pas √™tre s√ªr que les utilisateurs compilent la m√™me version des d√©pendances de code que vous.  En novembre 2013, la FAQ suivante a √©t√© ajout√©e √† la FAQ pour Go 1.2: <br><br><blockquote>  Si vous utilisez un package externe et craignez qu'il ne change de fa√ßon inattendue, la solution la plus simple consiste √† le copier dans le r√©f√©rentiel local (cette approche est utilis√©e par Google).  Enregistrez une copie avec un nouveau chemin d'importation qui l'identifie comme une copie locale.  Par exemple, vous pouvez copier <code>original.com/pkg</code> sur <code>you.com/external/original.com/pkg</code> .  L'un des outils de cette proc√©dure est le goven de Kit Rerik. </blockquote><br>  Keith Rarik a d√©marr√© ce projet en mars 2012.  L'utilitaire <code>goven</code> copie la d√©pendance dans le r√©f√©rentiel local et met √† jour tous les chemins d'importation pour refl√©ter le nouvel emplacement.  De tels changements de code source sont n√©cessaires, mais d√©sagr√©ables.  Ils rendent difficile la comparaison et l'inclusion de nouvelles copies, et n√©cessitent √©galement la mise √† jour d'autres codes copi√©s √† l'aide de cette d√©pendance. <br><br>  En septembre 2013, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Keith a introduit godep</a> , "un nouvel outil pour corriger les d√©pendances des packages".  La principale r√©alisation de <code>godep</code> √©t√© ce que nous appelons maintenant la vente, c'est-√†-dire la copie des d√©pendances dans le projet <i>sans</i> changer les fichiers source, sans prise en charge directe des outils, en d√©finissant GOPATH d'une certaine mani√®re. <br><br>  En octobre 2014, Keith a propos√© d'ajouter la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prise</a> en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">charge des ¬´packages externes¬ª</a> aux outils Go afin que les outils comprennent mieux les projets utilisant cette convention.  √Ä ce moment-l√†, plusieurs <code>godep</code> style <code>godep</code> √©taient d√©j√† apparus.  Matt Farina a publi√© un article <code>godep</code> ¬´ <code>godep</code> gestionnaires de <code>godep</code> Sea of ‚Äã‚ÄãGo¬ª comparant <code>godep</code> aux <code>godep</code> , en particulier la <code>glide</code> . <br><br>  En avril 2015, Dave Cheney a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">introduit gb</a> , "un outil de construction bas√© sur un projet ... avec des g√©n√©rations r√©p√©t√©es via la vente √† la source", encore une fois sans r√©√©crire les chemins d'importation (une autre motivation pour cr√©er gb √©tait d'√©viter la n√©cessit√© de stocker du code dans des r√©pertoires sp√©cifiques dans GOPATH ce qui n'est pas toujours pratique). <br><br>  Ce printemps-l√†, Jason Buberlie a examin√© la situation des syst√®mes de gestion de packages Go, y compris la duplication d'efforts multiples et le travail vain sur des utilitaires similaires.  Son enqu√™te a clairement montr√© aux d√©veloppeurs que la prise en charge de la vente sans r√©√©crire les chemins d'importation doit √™tre ajout√©e √† la commande <code>go</code> .  Dans le m√™me temps, Daniel Theofanes a commenc√© √† pr√©parer des sp√©cifications pour un format de fichier qui d√©crit l'origine exacte et la version du code dans le r√©pertoire du fournisseur.  En juin 2015, nous avons accept√© la proposition de Keith comme une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">exp√©rience de vente dans Go 1.5</a> , qui √©tait incluse par d√©faut dans Go 1.6.  Nous avons encourag√© les auteurs de tous les outils de vente √† travailler avec Daniel pour adopter un format de fichier de m√©tadonn√©es unique. <br><br>  L'introduction du concept de vente dans Go a permis √† des outils comme le <code>vet</code> d'analyser les programmes de mani√®re plus comp√©tente, et aujourd'hui il a √©t√© utilis√© par une douzaine ou deux gestionnaires de packages ou outils de vente.  En revanche, comme tout le monde a des formats de m√©tadonn√©es diff√©rents, ils n'interagissent pas et ne peuvent pas facilement √©changer des informations de d√©pendance. <br><br>  Plus fondamentalement, la vente est une solution incompl√®te au probl√®me du contr√¥le de version.  Il fournit uniquement la reproductibilit√© de l'assemblage, mais n'aide pas √† comprendre les versions du package et √† d√©cider laquelle utiliser.  Les gestionnaires de packages comme <code>glide</code> et <code>dep</code> ajoutent implicitement le concept de contr√¥le de version √† Go, configurant le r√©pertoire des fournisseurs d'une certaine mani√®re.  Par cons√©quent, de nombreux outils de l'√©cosyst√®me Go peuvent ne pas √™tre en mesure d'obtenir les informations de version correctes.  Il est clair que Go a besoin d'un support direct pour les versions de packages. <br><br><h3>  Exp√©rience de gestion des packages officiels </h3><br>  Lors de GopherCon 2016 le Hack Day (maintenant Community Day), un groupe de militants de Go s'est r√©uni pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">discuter largement des probl√®mes de gestion des packages</a> .  L'un des r√©sultats a √©t√© la formation d'un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">comit√© et d'un groupe consultatif pour mener une gamme d'activit√©s dans le but de cr√©er un nouvel outil de gestion des colis</a> .  L'id√©e √©tait qu'un outil unifi√© remplace les outils existants, bien qu'il soit toujours impl√©ment√© en dehors de la bo√Æte √† outils directe de Go √† l'aide de catalogues de fournisseurs.  Le comit√© comprenait Andrew Gerrand, Ed Muller, Jesse Frazel et Sam Boyer, dirig√© par Peter Burgon.  Ils ont pr√©par√© un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projet de sp√©cification</a> , puis Sam et ses assistants ont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mis en ≈ìuvre le dep</a> .  Pour une compr√©hension de la situation g√©n√©rale, voir l'article de Sam de f√©vrier 2016, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´So You Want to Write a Package Manager¬ª,</a> son article de d√©cembre 2016 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´Go Dependency Management Saga¬ª,</a> et son discours de juillet 2017 √† GopherCon, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´A New Era of Package Management in Allez</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"</a> <br><br>  <code>Dep</code> effectue de nombreuses t√¢ches: il s'agit d'une am√©lioration importante par rapport aux pratiques actuelles.  Il s'agit d'une √©tape importante vers une solution future, et en m√™me temps une exp√©rience - nous l'appelons une ¬´exp√©rience officielle¬ª - qui nous aide √† mieux comprendre les besoins des d√©veloppeurs.  Mais <code>dep</code> pas un prototype direct de l'int√©gration possible des commandes <code>go</code> dans la gestion des versions des packages.  Il s'agit d'un moyen puissant, flexible et presque universel d'explorer l'espace des d√©cisions de conception.  Il est similaire aux makefiles que nous avons combattus au tout d√©but.  Mais d√®s que nous comprendrons mieux l'espace des d√©cisions de conception et que nous pourrons le r√©duire √† quelques fonctions cl√©s qui devraient √™tre prises en charge, cela aidera l'√©cosyst√®me Go √† supprimer d'autres fonctions, √† r√©duire l'expressivit√© et √† adopter des conventions contraignantes qui rendent les bases de code Go plus coh√©rentes et plus faciles √† comprendre. <br><br>  Cet article est le d√©but de la prochaine √©tape apr√®s <code>dep</code> : le premier prototype de l'int√©gration finale avec la commande <code>go</code> , l'√©quivalent batch de <code>goinstall</code> .  Un prototype est une commande distincte que nous appelons <code>vgo</code> : un remplacement <code>go</code> avec prise en charge de la gestion des versions des packages.  Il s'agit d'une nouvelle exp√©rience, et nous verrons ce qui en sortira.  Comme lors de l'annonce de <code>goinstall</code> , certains projets et codes sont d√©sormais compatibles avec <code>vgo</code> , tandis que d'autres n√©cessitent des modifications.  Nous supprimerons un certain contr√¥le et expressivit√©, tout comme les makefiles ont √©t√© supprim√©s afin de simplifier le syst√®me et d'√©liminer la complexit√© pour les utilisateurs.  Plus important encore, nous recherchons des pionniers qui aideront √† exp√©rimenter avec <code>vgo</code> pour obtenir le plus d'avis possible. <br><br>  D√©marrer une exp√©rience avec <code>vgo</code> ne signifie pas arr√™ter le support <code>dep</code> : il restera disponible jusqu'√† ce que nous <code>vgo</code> une int√©gration compl√®te et ouverte avec <code>go</code> .  Nous essaierons √©galement de faire la transition finale de <code>dep</code> √† int√©gration avec <code>go</code> aussi fluide que possible, sous quelque forme que se fasse cette int√©gration.  Les projets qui n'ont pas encore √©t√© convertis en <code>dep</code> peuvent encore b√©n√©ficier de cette conversion (notez que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>godep</code></a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>glide</code></a> arr√™t√© le d√©veloppement actif et encouragent la migration vers dep).  Peut-√™tre que certains projets voudront passer directement √† <code>vgo</code> si cela r√©pond √† leurs besoins. <br><br><h1>  Offrir </h1><br>  La proposition d'ajouter un contr√¥le de version √† la commande <code>go</code> compose de quatre √©tapes.  Tout d'abord, acceptez la <i>r√®gle de compatibilit√© d'importation</i> , qui est indiqu√©e par la FAQ et gopkg.in: les versions plus r√©centes du package avec le chemin d'importation sp√©cifi√© doivent √™tre r√©trocompatibles avec les versions plus anciennes.  Deuxi√®mement, adoptez un nouvel algorithme simple, connu sous le nom de <i>choix de la version minimale</i> pour d√©terminer quelles versions du package sont utilis√©es dans cet assemblage.  Troisi√®mement, introduisez le concept du <i>module</i> Go: des groupes de packages qui sont versionn√©s dans leur ensemble et d√©clarent les exigences minimales qui doivent √™tre satisfaites par leurs d√©pendances.  Quatri√®mement, d√©terminez comment int√©grer tout cela dans votre commande <code>go</code> existante afin que les flux de travail de base ne changent pas de mani√®re significative √† partir d'aujourd'hui.  Dans le reste de cet article, nous examinons chacune de ces √©tapes.  Ils sont discut√©s plus en d√©tail dans d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">autres articles de blog</a> . <br><br><h3>  R√®gle de compatibilit√© d'importation </h3><br>  Le principal probl√®me avec les syst√®mes de gestion de packages est la tentative de r√©solution des incompatibilit√©s.  Par exemple, la plupart des syst√®mes autorisent le package B √† d√©clarer qu'il a besoin du package D de la version 6 ou ult√©rieure, puis autorisent le package C √† d√©clarer qu'il requiert D la version 2, 3 ou 4, mais pas la version 5 ou ult√©rieure.  Ainsi, si vous souhaitez utiliser B et C dans votre package, vous n'avez pas de chance: vous ne pouvez s√©lectionner aucune version de D qui remplit les deux conditions et vous ne pouvez rien faire. <br><br>  Au lieu d'un syst√®me qui bloque in√©vitablement l'assemblage de grands programmes, notre proposition introduit une <i>r√®gle de compatibilit√© √† l'importation</i> pour les auteurs de packages: <br><br><blockquote>  Si l'ancien et le nouveau package ont le m√™me chemin d'importation, le nouveau package doit √™tre r√©trocompatible avec l'ancien package. </blockquote><br>  La r√®gle r√©p√®te la FAQ mentionn√©e pr√©c√©demment.  Ce texte se terminait par les mots: "En cas de changement radical, cr√©ez un nouveau package avec un nouveau chemin d'importation."           ,       .  ,           : <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"github.com/go-yaml/yaml/v2"</span></span></code> </pre> <br>      2.0.0   ,        .        ,     Go      .    .                  v1  v2. <br><br>         ,         . ,  ,     ,             .      .      . <br><br><h3>    </h3><br>     ,  <code>dep</code>  <code>cargo</code> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">       </a> .  ,         . -,  ¬´  ¬ª   -  ,   -   . ,   -     ,      ,    ,   . -,      ,    ,    ¬´,    X¬ª,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">    X</a> . <br><br>      ,    <i>  </i> .    <i> </i>    .     ,       .  ,      ,   .      ,      ,       , ,  ,      . <br><br>           .   ,     ,      ,     .         ,    ,        ,      ,     .      ,      -  .       ,     ,    . <br><br>           . <br><br>   ‚Äî      .      ¬´,    ¬ª,     ¬´,   ¬ª.     :  ()   .            . <br><br><h3>   Go </h3><br> <i></i> Go         ,    .     ,       .     Git      ,     Git .       ,      . <br><br>    <code>go.mod</code>        ,    . ,    <code>go.mod</code> : <br><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// My hello, world. module "rsc.io/hello" require ( "golang.org/x/text" v0.0.0-20180208041248-4e4a3210bb54 "rsc.io/quote" v1.5.2 )</span></span></code> </pre> <br>    ,     <code>rsc.io/hello</code> ,       : <code>golang.org/x/text</code>  <code>rsc.io/quote</code> .            ,    <code>go.mod</code> .     ,         -     . <br><br>      ,  <code>vgo</code>    ,    .   <code>rsc.io/quote</code> ,    <code>github.com/rsc/quote</code> ,   ,    1.5.2.    <code>golang.org/x/text</code>    .     ,  <i>v0.0.0-yyyymmddhhmmss-commit</i>      .         v0.0.0   <i>yyyymmddhhmmss-commit</i> .          ,   v0.0.0,    .      ,      . <br><br>     ,  <code>go.mod</code>     ,    ,          ,         .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . <br><br> <code>Goinstall</code>   <code>go get</code>       ,   <code>git</code>  <code>hg</code> ,     ,   . ,   <code>bzr</code>       Bazaar.     ,  Go    HTTP   zip-.   <code>go get</code>       .   <code>vgo</code>   API      . <br><br>      zip-      -   .            -,              .        <code>go.mod</code>  ,   ,     . <br><br><h3>  <code>go</code> </h3><br>      <code>go</code>  .      ,    ,   <code>go build</code> , <code>go install</code> , <code>go run</code>  <code>go test</code> ,      .   <code>golang.org/x/text</code>           Go   . <br><br>     ‚Äî   GOPATH    .   <code>go.mod</code>       ,       ,    <code>go.mod</code>    ,     ,      .     <code>git clone</code> , <code>cd</code> ,   .  .  GOPATH. <br><br><h1>  ? </h1><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´     Go¬ª</a>  ,   <code>vgo</code> .    ,        <code>vgo</code> .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> .   . <br><br> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> vgo</a> .       .   <code>go.mod</code> .  ,       <code>go.mod</code> ,   <code>dep</code> , <code>glide</code> , <code>glock</code> , <code>godep</code> , <code>godeps</code> , <code>govend</code> , <code>govendor</code>    <code>gvt</code> ,  <code>vgo</code>      <code>go.mod</code> . <br><br>  ,  Go        .     ,     Go, ‚Äî   ,       <code>go get</code> ,  GOPATH            GOPATH.          . <br><br>      - . ,    ,   <code>vgo</code>     .   ,  Go 1.11      Go,    ,   Go 1.12    .        ,  <code>go get</code> .    ,          ,    . <br><br>       <code>go get</code>        .       ,    .        ,  ,    . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr442272/">https://habr.com/ru/post/fr442272/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr442262/index.html">Secret du firmware</a></li>
<li><a href="../fr442264/index.html">√âliminer les opportunit√©s de d√©tournement de trafic</a></li>
<li><a href="../fr442266/index.html">Delta Chat - messager d√©centralis√© au-dessus du courrier √©lectronique</a></li>
<li><a href="../fr442268/index.html">AsyncIO Micropython: m√©thodes de synchronisation en programmation asynchrone</a></li>
<li><a href="../fr442270/index.html">5 erreurs √† √©viter lors de la cr√©ation de mod√®les 3D pour l'impression 3D</a></li>
<li><a href="../fr442274/index.html">Dart 2. Programmation asynchrone: flux de donn√©es</a></li>
<li><a href="../fr442278/index.html">Guide de l'utilisateur Kibana. Visualisation. Partie 6</a></li>
<li><a href="../fr442280/index.html">Apprentissage automatique dans Dodo. Comment lancer une nouvelle direction si vous √™tes d√©veloppeur</a></li>
<li><a href="../fr442282/index.html">Dart 2. Programmation asynchrone: futurs</a></li>
<li><a href="../fr442284/index.html">NoVerify: le linter pour PHP de l'√©quipe VKontakte est maintenant dans le domaine public</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>