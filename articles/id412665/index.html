<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ˜Œ ğŸš£ğŸ½ ğŸ–•ğŸ¿ Editor Jadwal Mingguan ğŸ‘¨â€ğŸ‘§â€ğŸ‘§ ğŸ© ğŸ§•ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya menulis karena untuk ketiga kalinya dalam setahun saya menemukan tugas ini. Setiap kali, semuanya dimulai dengan solusi kreatif yang luar biasa l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Editor Jadwal Mingguan</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412665/"> Saya menulis karena untuk ketiga kalinya dalam setahun saya menemukan tugas ini.  Setiap kali, semuanya dimulai dengan solusi kreatif yang luar biasa lebih mudah, dan pada akhirnya datang ke sistem yang akan saya bicarakan. <br><br>  Tujuannya adalah untuk membuat dan memelihara jadwal mingguan, seperti jadwal pelajaran sekolah atau jadwal dokter dan pejabat.  Ada satu set slot, setiap slot adalah tempat dalam jadwal mingguan dengan berbagai parameter tambahan, seperti nomor kabinet, nama karyawan.  Diperlukan untuk membangun sistem yang fleksibel dengan sejarah penuh yang dapat menyelesaikan masalah seperti: membuat jadwal yang berbeda dari awal musim panas, mengganti guru untuk 3 minggu ke depan, memindahkan jadwal dari Jumat ke Sabtu karena liburan. <br><br>  Saya akan menulis tentang apa yang biasanya mereka temukan dan bagaimana menyelesaikannya, saya akan menyelesaikan masalah mengecat strip, dan kemudian saya akan memberikan contoh backend sederhana pada node / sekuel dan diakhiri dengan frontend sederhana pada vue / vuex / vuetify / nuxt, di mana Anda dapat menyeret semuanya dengan mouse dan melihat bagaimana cara kerjanya <br><br>  Kode diposting di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github</a> , digunakan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br><img src="https://habrastorage.org/webt/6d/kv/7m/6dkv7mn28thsjpj3zkb7zy8asey.png"><br><a name="habracut"></a><br><h2>  Perubahan granular </h2><br>  Ada slot, entah bagaimana disajikan dalam database.  Perlu diedit.  Jadi, Anda perlu menggambar beberapa formulir dengan bidang, dan di bawah tombol "simpan".  Lagipula, semuanya biasanya diatur seperti itu.  Namun, tidak dalam hal ini.  Pertimbangkan bentuknya: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/py/bs/b9/pybsb9deiukwlb27ezwm0lhw84w.png"></div><br>  Saat menyimpan, semua data slot diperbarui, riwayat hilang.  Mari kita coba tambahkan elemen seperti itu: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wf/cd/wq/wfcdwq2crgge9obkl9cb61tbolw.png"></div><br>  Lagi oleh.  Sebagai contoh, pada tanggal 4 Juni, pada hari Senin, transfer kelas satu hari dari kantor pertama ke kantor kedua dicatat.  Kemudian muncul permintaan baru - mulai 28 Mei, pelajaran akan selalu dimulai pukul 20:00 bukannya 19:00.  Kami membuka formulir, mengubah waktu, menunjukkan tanggal dari tanggal 28 dan selamanya dan ... semua bidang, bersama dengan nomor kabinet, pergi ke server.  Perubahan sementara pada 4 Juni ditimpa.  Dengan menggunakan formulir ini, tidak mungkin untuk menentukan bidang mana pada interval mana yang ingin diubah pengguna, karena semua bidang dikirim sama sekali. <br><br>  Idenya adalah bahwa setiap aturan berubah secara independen dari yang lain dengan intervalnya sendiri.  Slot ditentukan oleh satu set parameter satu dimensi, setiap parameter memiliki riwayat perubahan yang ditentukan oleh serangkaian aturan.  Setiap aturan berisi nilai, tanggal mulai dan berakhir.  Karena ini adalah kalender mingguan, tanggal sudah cukup untuk menunjukkan hingga satu minggu, YYYYWW. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vd/sq/pc/vdsqpci_tcxsbarhm1hqdgocecy.jpeg"></div><br>  Tampaknya mengedit slot sekarang sangat rumit - untuk mengubah beberapa bidang, Anda perlu memilih setiap bidang, membuka formulir, meletakkan nilai dan interval.  Namun, dalam praktiknya, mengubah beberapa bidang terbukti menjadi situasi yang langka.  Jauh lebih sering adalah pembaruan massal beberapa slot sekaligus.  Misalnya, untuk menghapus ketidakhadiran guru karena sakit, Anda harus memilih semua bloknya, memasukkan status tugas staf dalam cuti medis, dan kemudian memilih guru pengganti untuk blok yang sama.  Hanya 2 tindakan dan bukannya n tindakan untuk n slot dalam kasus ini, seolah-olah mereka ditentukan melalui formulir tradisional.  Pada sistem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">StarBright.com</a> yang sedang saya kerjakan, tampilannya seperti ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sf/0y/in/sf0yin4ge2b-pign5bfjmkmjimc.gif"></div><br><h2>  Tugas melukis strip </h2><br>  Pertimbangkan strip yang terdiri dari sel-sel yang dicat dengan warna berbeda.  Setiap sel adalah satu minggu, setiap warna adalah sebuah makna.  Warna baru datang dan interval untuk mengaplikasikannya, mereka perlu mengecat ulang apa yang ada.  Pada tingkat data, ini berarti bahwa Anda perlu menghapus interval yang tumpang tindih sepenuhnya, mengubah interval tumpang tindih sebagian, menambahkan interval baru, menggabungkan interval satu warna yang berdekatan menjadi satu.  Hasil akhir harus terdiri dari interval yang tidak tumpang tindih. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yy/ve/ya/yyveyanr3v1zo9tt_y9zsioid34.png"></div><br>  <i>Hasil: [{delete, id: 2}, {update, id: 1, data: {to: 5}}, {update, id: 3, data: {from: 16}}, {insert, data: {from : 6, hingga: 15, nilai: menikah}}]</i> <br><br>  Ini adalah tugas yang sederhana, tetapi mudah untuk mengabaikan sesuatu di sini.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Berikut</a> adalah repositori terpisah dengan solusi dan tes.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://timeblock-rules.rag.lt</a> - di sini Anda dapat memeriksa cara kerjanya dan bermain dengan shading. <br><br><h2>  Backend </h2><br>  Aturan tidak tumpang tindih, sehingga `pilih * dari aturan yang paling sederhana dari &lt;=: minggu dan (menjadi nol atau&gt;&gt;: minggu)` sudah cukup untuk memilih dengan tepat aturan yang diperlukan untuk minggu yang ditentukan.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Berikut</a> adalah contoh sederhana backend pada node / sequelize.  Ia menggunakan gaya gabungan c janji dan asink / tunggu, yang dapat Anda baca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di artikel saya yang lain</a> . <br><br>  Berikut adalah tindakan yang memilih aturan untuk minggu yang ditentukan: <br><pre><code class="javascript hljs">routes.get(<span class="hljs-string"><span class="hljs-string">'/timeblocks'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ... validation ... await Rule .findAll({ <span class="hljs-attr"><span class="hljs-attr">where</span></span>: { <span class="hljs-attr"><span class="hljs-attr">from</span></span>: {<span class="hljs-attr"><span class="hljs-attr">$or</span></span>: [{<span class="hljs-attr"><span class="hljs-attr">$lte</span></span>: req.query.week}, <span class="hljs-literal"><span class="hljs-literal">null</span></span>]}, <span class="hljs-attr"><span class="hljs-attr">to</span></span>: {<span class="hljs-attr"><span class="hljs-attr">$or</span></span>: [{<span class="hljs-attr"><span class="hljs-attr">$gte</span></span>: req.query.week}, <span class="hljs-literal"><span class="hljs-literal">null</span></span>]} } }) .then( sendSuccess(res, <span class="hljs-string"><span class="hljs-string">'Calendar data extracted.'</span></span>), throwError(<span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-string"><span class="hljs-string">'sequelize error'</span></span>) ) } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (error) { catchError(res, error) } })</code> </pre> <br><br>  Dan di sini adalah PATCH untuk mengubah aturan: <br><pre> <code class="javascript hljs">routes.patch(<span class="hljs-string"><span class="hljs-string">'/timeblocks/:id(\\d+)'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ... validation ... const initialRules = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Rule .findAll({ <span class="hljs-attr"><span class="hljs-attr">where</span></span>: { <span class="hljs-attr"><span class="hljs-attr">timeblock_id</span></span>: req.params.id, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: {<span class="hljs-attr"><span class="hljs-attr">$in</span></span>: req.params.rules.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rule</span></span></span><span class="hljs-function"> =&gt;</span></span> rule.type)} } }).catch(throwError(<span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-string"><span class="hljs-string">'sequelize error'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promises = [] req.params.rules.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rule</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// This function defined in stripe coloring repo, https://github.com/Kasheftin/timeblock-rules/blob/master/src/fn/rules.js; const actions = processNewRule(rule, initialRules[rule.type] || []) actions.forEach(action =&gt; { if (action.type === 'delete') { promises.push(Rule.destroy({where: {id: action.id}})) } else if (action.type === 'update') { promises.push(Rule.update(action.data, {where: {id: action.id}})) } else if (action.type === 'insert') { promises.push(Rule.build({...action.data, timeblock_id: rule.timeblock_id, type: rule.type}).save()) } }) }) Promise.all(promises).then( result =&gt; sendSuccess(res, 'Timeblock rules updated.')() ) } catch (error) { catchError(res, error) } })</span></span></code> </pre><br><br>  Ini adalah bagian ideologis paling sulit dari backend, sisanya bahkan lebih sederhana. <br><br>  Pertanyaannya adalah bagaimana cara menghapus slot.  Dalam hal ini, riwayat lengkap disimpan, tidak ada yang dihapus.  Ada bidang status yang dapat dibuka, sementara ditutup dan ditutup.  Pengunjung melihat slot aktif dan untuk sementara tidak aktif, di yang terakhir biasanya admin biasanya menulis komentar tentang mengapa tidak ada aktivitas.  Seiring waktu, ada banyak slot tertutup, dan untuk menyederhanakan situasi, ada baiknya untuk memperkenalkan properti lain seperti tahun ajaran dan hanya menampilkan tahun sekolah saat ini saat mengedit slot. <br><br><h2>  Frontend </h2><br>  Kode dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori ini</a> , itu adalah situs satu halaman sederhana di nuxt.  Sebenarnya, ada beberapa masalah dengan ssr (misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">saya</a> menganalisis secara rinci cara menulis otentikasi pada nuxt), tetapi aplikasi sederhana ditulis dengan sangat cepat. <br><br>  Berikut adalah kode untuk satu halaman: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">components</span></span>: {...}, fetch ({app, route, redirect, store}) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!route.query.week) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newRoute = app.router.resolve({<span class="hljs-attr"><span class="hljs-attr">query</span></span>: {...route.query, <span class="hljs-attr"><span class="hljs-attr">week</span></span>: moment().format(<span class="hljs-string"><span class="hljs-string">'YYYYWW'</span></span>)}}, route) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> redirect(newRoute.href) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve() .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> store.dispatch(<span class="hljs-string"><span class="hljs-string">'calendar/set'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">week</span></span>: route.query.week})) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> store.dispatch(<span class="hljs-string"><span class="hljs-string">'calendar/fetch'</span></span>)) }, <span class="hljs-attr"><span class="hljs-attr">computed</span></span>: { week () { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$store.state.calendar.week } }, <span class="hljs-attr"><span class="hljs-attr">watch</span></span>: { week (week) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$router.push({ <span class="hljs-attr"><span class="hljs-attr">query</span></span>: { ...this.$route.query, week } }) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$store.dispatch(<span class="hljs-string"><span class="hljs-string">'calendar/fetch'</span></span>) } } }</code> </pre><br><br>  Metode pengambilan bekerja di server dan klien, mengalihkan ke minggu ini dan meminta kalender.  Ketika minggu berubah, data diminta kembali. <br><br>  Apa yang harus dilakukan dengan slot yang tumpang tindih?  Jawabannya tergantung pada logika bisnis, misalnya, Anda mungkin memerlukan validasi server yang melarang overlay.  Dalam hal ini, overlay diperbolehkan, dan untuk mendapatkan gambar yang indah, slot tersebut ditarik setengah lebar di samping satu sama lain.  Tambahkan tata letak dan dapatkan tampilan ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6d/kv/7m/6dkv7mn28thsjpj3zkb7zy8asey.png"></div><br><br>  Yang lainnya adalah javascript biasa tanpa ide khusus.  Dengan mousedown di blok, seret dan lepas dimulai.  Acara mousemove dan mouseup digantung di seluruh jendela.  Seret dan lepas dimulai dengan penundaan 200 ms untuk membedakan seret dari klik.  Parameter wadah tempat drop dilacak dihitung terlebih dahulu, karena getBoundingClientRect adalah operasi yang terlalu berat untuk dilakukan untuk setiap gerakan mouse.  Saya harus membuat dua bentuk - satu untuk membuat (mengatur semua aturan sekaligus mulai dari minggu ini), yang lain untuk perubahan granular ke slot. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://calendar.rag.lt</a> - di sini Anda dapat memeriksa cara kerja semuanya. <br><br><h2>  Tautan ke artikel </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://calendar.rag.lt</a> - aplikasi nuxt yang digunakan; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://calendar-api.rag.lt</a> - backend terperinci; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://timeblock-rules.rag.lt</a> - tes terperinci untuk tugas mengisi strip; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/Kasheftin/calendar-demo-frontend</a> - sumber frontend; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/Kasheftin/calendar-demo-backend</a> - sumber backend </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/Kasheftin/timeblock-rules</a> - kode sumber tugas; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://codeburst.io/nuxt-authentication-from-scratch-a7a024c7201b</a> - tutorial otorisasi tentang nuxt dari awal; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://codeburst.io/node-express-async-code-and-error-handling-121b1f0e44ba</a> - penanganan kesalahan dalam kode backend asynchronous pada node / express; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://codeburst.io/weekly-schedule-editor-concept-8df79ab83305</a> - artikel yang sama dalam bahasa Inggris. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id412665/">https://habr.com/ru/post/id412665/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id412653/index.html">Para musketeer tidak lagi sama, atau Menunggu Athos, tetapi Porthos tiba</a></li>
<li><a href="../id412655/index.html">Hierarki Dompet Multi-Signed (Sistem Kepercayaan)</a></li>
<li><a href="../id412657/index.html">Token atau saham utilitas: apa yang akan menjadi masa depan ICO</a></li>
<li><a href="../id412661/index.html">Bahasa Inggris untuk bekerja di pasar asing: buku teks apa yang tidak dibicarakan</a></li>
<li><a href="../id412663/index.html">AI menjual pizza atau bagaimana Voximplant berteman dengan Dialogflow</a></li>
<li><a href="../id412667/index.html">Cybergroup Turla menggunakan kampanye Metasploit in Mosquito</a></li>
<li><a href="../id412669/index.html">Manajemen waktu tidak menakutkan: bagaimana melakukan lebih banyak</a></li>
<li><a href="../id412671/index.html">BLE Console: cara yang sama sekali baru untuk berinteraksi dengan perangkat BLE</a></li>
<li><a href="../id412675/index.html">Kontrak dan alamat multisig dalam Bitcoin dan Ethereum</a></li>
<li><a href="../id412677/index.html">Matriks Ketertelusuran</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>