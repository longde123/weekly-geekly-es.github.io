<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🏫 😯 🕹️ 在Google上执行的操作：在Dialogflow和Cloud Functions for Firebase上为Google助手编写一个简单的应用程序 🤟🏾 🚦 🤸🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="上个月底，Google助手正式发布了俄语版本，因此该是时候弄清楚如何在标准Google技术堆栈上为Assistant编写自己的应用程序了。 在本文中，我们将考虑在Google的Actions中创建一个动作，分析从Dialogflow中的短语中提取实体和意图的过程，了解如何编写用于提取信息的处理程序以...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>在Google上执行的操作：在Dialogflow和Cloud Functions for Firebase上为Google助手编写一个简单的应用程序</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/419261/"> 上个月底，Google助手<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">正式发布</a>了俄语版本，因此该是时候弄清楚如何在标准Google技术堆栈上为Assistant编写自己的应用程序了。 在本文中，我们将考虑<b>在Google的Actions中</b>创建一个动作，分析从<b>Dialogflow中的</b>短语中提取实体和意图的过程，了解如何编写用于提取信息的处理程序以及如何在<b>Cloud Functions for Firebase中</b>使用网络。 <br><br><img src="https://habrastorage.org/webt/a0/fj/yq/a0fjyq-er-evhhgkrr8hgbjxqhi.png"><br>  <i>图</i>  <i>1.助手的应用程序体系结构。</i> <br><a name="habracut"></a><br>  Assistant的开发相对较近才开始发展，因此该网络的资料很少，所使用的工具和技术的数量大大增加了进入门槛。 本文虽然没有解决，但至少有助于解决这些问题。 让我们从在标准Google技术堆栈上实现的Assistant的应用程序架构（图1）开始： <br><br><ul><li>  <b>Google Actions</b>是用于为Google Assistant创建应用程序的平台。 </li><li>  <b>Dialogflow</b> -NLU引擎（自然语言理解），负责处理自然语言和设计对话框。 </li><li>  <b>用于Firebase的云功能</b> （为方便起见，我们将使用Firebase Functions的缩写）-用于处理用户交互的复杂逻辑以及与第三方服务一起使用的云功能。  Firebase函数和Dialogflow通过Webhook进行交互，因此从技术上讲，可以使用任何其他服务器解决方案。 但是，Firebase Functions是一个不错的选择，有时甚至可以替代自己的后端。 它使您可以在Google的基础架构上创建和运行服务，而不必担心服务器的分配，扩展或管理。 一方面，这使您可以专注于服务开发和功能的产品组件，而不会浪费时间在基础架构任务和管理上。 但另一方面，通常来说，代表团意味着对局势的控制减弱了。 </li></ul><br> 本文侧重于开发的技术方面；将不分析使用列出的服务的成本。 <br><br><img src="https://habrastorage.org/webt/mb/xq/lu/mbxqlufyd-0svj25q81mlwbzkmk.png"><br>  <i>图</i>  <i>2. Google Assistant组件的交互（基于材料： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Google Home和Google Assistant Workshop</a> ）。</i> <br><br> 在描述的堆栈中，动作逻辑如下所示（图2）： <br><br><ul><li> 用户访问Google助手应用程序，并通过特定操作启动对话。 </li><li> 通过Google上的操作，Google助手可以在Dialogflow中以文本格式代理每个用户短语，并另外提供<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">有关用户本人的信息</a> （经事先请求并得到用户的同意）和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">当前对话</a> 。 </li><li>  Dialogflow处理接收到的短语，从中提取必要的信息，并基于ML来决定将生成哪个答案。 </li><li> 在某些情况下，Dialogflow可以将响应的形成委派给Firebase Functions上的服务器，而后者又可以使用第三方服务来获取响应所需的信息。 </li><li> 答案形成后，Dialogflow将其返回到Google上的“操作”，然后从那里进入Google Assistant应用程序。 </li></ul><br><h2> 主意 </h2><br> 我们的操作将通过词组确定用户想要查看的gif格式，然后他将通过GIPHY API查找它们，并将其以卡片的形式返回给用户。 实施该操作时，我们将分析以下任务的解决方案： <br><br><ol><li> 在Google，Dialogflow和Firebase函数上设置并链接操作。 </li><li> 从用户短语中提取关键字（Dialogflow）。 </li><li> 脚本对话框（Dialogflow）。 </li><li> 使用对话上下文（Dialogflow）。 </li><li> 创建并连接一个Webhook以生成对用户短语的响应（Dialogflow，Firebase Function）。 </li><li> 在界面中显示卡轮播（Firebase功能）。 </li><li> 从第三方服务下载信息（Firebase功能）。 </li></ol><br><h2> 初始设定 </h2><br><img src="https://habrastorage.org/webt/qz/ib/k6/qzibk6lsuxemwmfzt2bmkpitzoa.png"><br>  <i>图</i>  <i>3.创建一个Dialogflow代理。</i> <br><br> 首先，我们需要一个Google帐户。 让我们首先在Dialogflow中创建一个项目，为此，在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">控制台中，</a>单击Create Agent按钮并填写必填字段（图3）： <br><br><ul><li> 默认语言是“俄语-ru”。 </li><li> 时区：“（GMT + 3：00）欧洲/莫斯科”。 </li><li>  Google云端专案：将自动为您的Dialogflow代理创建新的GCP，或者您可以选择现有的GCP专案之一（如果有）。 </li></ul><br> 然后单击右上角的“创建”按钮，并等待控制台配置新项目。 <br><br><img src="https://habrastorage.org/webt/il/wd/gd/ilwdgd0j4u6f9ghzfd6k9dmwtfq.png"><br>  <i>图</i>  <i>4.标准意图。</i> <br><br> 默认情况下，在创建Dialogflow代理时，将创建两个意图（图4）： <br><br><ul><li>  “默认的欢迎意图”-负责问候用户； </li><li>  “默认后备意图”-处理Dialogflow无法归因于任何其他意图的未知短语。 </li></ul><br> 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>的文章中已经详细介绍了在Dialogflow中创建对话框，因此，我将不再关注其操作原理。 <br><br><img src="https://habrastorage.org/webt/jj/if/sp/jjifspt3awd3uoyao-nxlhdnaco.png"><br>  <i>图</i>  <i>5.回答“默认欢迎意图”。</i> <br><br> 我们会在“默认欢迎意图”中添加一些欢迎解答，以帮助用户了解操作的目的以及他可以执行的功能。 在“响应”部分中，选择“ Google助手”选项卡，在“建议船”中，我们将编写短语示例来告诉用户如何与操作进行交流（图5）。 <br><br> 可以在手机和官方模拟器中的Google Assistant中调试操作。 要打开模拟器，您需要转到“集成”部分，在“ Google助手”卡中，单击“集成设置”按钮，然后单击“管理助手应用程序”。 在电话和仿真器中，都可以使用代码短语“ Ok Google，我想与我的测试应用程序对话”来触发操作。 <br><br><h2> 基本方案：GIF搜索 </h2><br> 创建一个新的搜索意图，该意图将从用户的短语中提取关键字，并将其通过webhook服务器发送到Firebase Functions。 反过来，服务器使用GIPHY API将找到相应的gif，并将结果以卡的形式返回给用户。 <br><br><img src="https://habrastorage.org/webt/dc/ig/68/dcig68-xcdbzx8ygmuy83-4xibk.png"><br>  <i>图</i>  <i>6.添加训练短语。</i> <br><br> 首先，我们将在“训练短语”部分中添加用于训练的典型短语（图6）： <br><br><ul><li>  “我想看跳舞的长颈鹿。” </li><li>  “找到animashki。” </li><li>  “出示印章。” </li><li> 给我看看GIF。 </li><li>  “给我找动画的大象。” </li><li>  “显示熊猫Gif。” </li><li>  “带有浣熊条纹的礼物。” </li><li>  “你有海豹。” </li><li>  “找到有趣的瀑布。” </li></ul><br><img src="https://habrastorage.org/webt/az/_s/e0/az_se0faydig_odzqvgvh4c0twu.png"><br>  <i>图</i>  <i>7.从文本中提取参数。</i> <br><br> 对于添加的短语，请注意搜索参数，Dialogflow应该从文本中选择该参数。 在这种情况下，最合适的参数类型是<code>@sys.any</code> ，因为几乎任何语言构造都可以用作搜索查询参数。 我们调用此参数<code>query</code>并将其标记为必需（图7）。 <br><br><img src="https://habrastorage.org/webt/xt/c_/cy/xtc_cyzai21tbnfysovpupedakg.png"><br>  <i>图</i>  <i>8.主要问题清单。</i> <br><br> 在“提示”小节中，我们将写下澄清问题，以确保Dialogflow将询问其是否无法从短语中提取关键字（图8）。 <br><br> 接下来，转到页面底部的“实现”部分（不要与左侧菜单中的同名部分混淆）。 单击“启用完整文件”按钮，然后启用“为此意图启用webhook调用”设置。 这将使Dialogflow在达到目的时委派Firebase Functions响应的形成。 <br><br> 现在转到左侧菜单中的“实现”标签，然后打开“内联编辑器”，我们将在其中编写新创建的“搜索意图”的逻辑。 要通过关键字搜索GIF，我们将使用请求<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://api.giphy.com/v1/gifs/search</a> ，该请求将根据<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">规范</a>以JSON格式返回找到的对象的列表。 从GIPHY接收到的回复将以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">浏览轮播</a>的形式显示-带有图像的卡片轮播，单击后将打开网页。 在我们的情况下，当您单击卡片时，用户将转到GIPHY服务页面，其中包含该动画和类似动画的列表。 <br><br> 下面介绍实现上述功能的代码。 <br><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> GIPHY_API_KEY = <span class="hljs-string"><span class="hljs-string">'API_KEY'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SEARCH_RESULTS = [ <span class="hljs-string"><span class="hljs-string">'-,    .'</span></span>, <span class="hljs-string"><span class="hljs-string">',   .'</span></span>, <span class="hljs-string"><span class="hljs-string">',   !'</span></span> ]; <span class="hljs-comment"><span class="hljs-comment">// Import the Dialogflow module from the Actions on Google client library. const { dialogflow, BrowseCarouselItem, BrowseCarousel, Suggestions, Image } = require('actions-on-google'); // Import the firebase-functions package for deployment. const functions = require('firebase-functions'); // Import the request-promise package for network requests. const request = require('request-promise'); // Instantiate the Dialogflow client. const app = dialogflow({ debug: true }); function getCarouselItems(data) { var carouselItems = []; data.slice(0, 10).forEach(function (gif) { carouselItems.push(new BrowseCarouselItem({ title: gif.title || gif.id, url: gif.url, image: new Image({ url: gif.images.downsized_medium.url, alt: gif.title || gif.id }), })); }); return carouselItems; } function search(conv, query) { // Send the GET request to GIPHY API. return request({ method: 'GET', uri: 'https://api.giphy.com/v1/gifs/search', qs: { 'api_key': GIPHY_API_KEY, 'q': query, 'limit': 10, 'offset': 0, 'lang': 'ru' }, json: true, resolveWithFullResponse: true, }).then(function (responce) { // Handle the API call success. console.log(responce.statusCode + ': ' + responce.statusMessage); console.log(JSON.stringify(responce.body)); // Obtain carousel items from the API call response. var carouselItems = getCarouselItems(responce.body.data); // Validate items count. if (carouselItems.length &lt;= 10 &amp;&amp; carouselItems.length &gt;= 2) { conv.data.query = query; conv.data.searchCount = conv.data.searchCount || 0; conv.ask(SEARCH_RESULTS[conv.data.searchCount % SEARCH_RESULTS.length]); conv.data.searchCount++; conv.ask(new BrowseCarousel({ items: carouselItems })); } else { // Show alternative response. conv.ask('      ,   - ?)'); } }).catch(function (error) { // Handle the API call failure. console.log(error); conv.ask(',     .'); }); } // Handle the Dialogflow intent named 'Search Intent'. // The intent collects a parameter named 'query'. app.intent('Search Intent', (conv, { query }) =&gt; { return search(conv, query); }); // Set the DialogflowApp object to handle the HTTPS POST request. exports.dialogflowFirebaseFulfillment = functions.https.onRequest(app);</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">依存关系</b> <div class="spoiler_text"><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"dialogflowFirebaseFulfillment"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"This is the default fulfillment for a Dialogflow agents using Cloud Functions for Firebase"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"private"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"Apache Version 2.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Google Inc."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"engines"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"node"</span></span>: <span class="hljs-string"><span class="hljs-string">"~6.0"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"firebase serve --only functions:dialogflowFirebaseFulfillment"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deploy"</span></span>: <span class="hljs-string"><span class="hljs-string">"firebase deploy --only functions:dialogflowFirebaseFulfillment"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"dependencies"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"actions-on-google"</span></span>: <span class="hljs-string"><span class="hljs-string">"2.0.0-alpha.4"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"firebase-admin"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.2.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"firebase-functions"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.5.7"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"dialogflow"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.1.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"dialogflow-fulfillment"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.3.0-beta.3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"request"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.81.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"request-promise"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.2.1"</span></span> } }</code> </pre> </div></div><br> 由于用户可以多次访问同一意图，因此建议对其返回各种答案。 为此，我们使用了<code>Conversation.data</code> JSON对象，该对象在再次访问该意图以及引用其他对话脚本时都保留其值。 <br><br><img src="https://habrastorage.org/webt/0m/lo/tp/0mlotpjfiboyxj_qgs5yselugxa.jpeg"><br>  <i>图</i>  <i>9.初始化对话（在左侧），优化搜索参数并进一步显示结果（在中间），显示新查询的搜索结果（在右边）</i> <br><br>  <i>注意：要通过Firebase功能使用第三方服务的API，您需要启用计费功能，否则，当尝试使用网络时，将发生错误：</i> <blockquote>  <i>“未配置结算帐户。</i>  <i>无法访问外部网络，并且配额受到严格限制。</i>  <i>配置帐单帐户以消除这些限制。”</i> </blockquote>  <i>为此，请单击左侧菜单中的“付费帐户”，然后在建议的关税计划中选择Flame（每月25美元）或Blaze（使用时付款）。</i>  <i>我选择了最后一个选项，因为作为测试应用程序开发的一部分，对我来说，这似乎更有利可图。</i> <br><br><h2> 高级方案：分页 </h2><br> 在大多数情况下，对于搜索查询，GIPHY会发现远远超过十个的GIF，因此允许用户查看整个搜索结果（即搜索结果）是正确的。 添加分页。 <br><br> 在Dialogflow控制台中，将鼠标悬停在“搜索意图”单元上。 右侧将出现几个按钮，单击“添加后续意图”。 这将使我们能够根据“搜索意图”创建一个对话分支。 在下拉列表的元素中，我们选择“更多”-用于启动其他信息显示的标准点火器。 <br><br><img src="https://habrastorage.org/webt/zb/26/0_/zb260_tehdtnrqgup4np6aqmjva.png"><br>  <i>图</i>  <i>10.目的的上下文是“搜索目的-更多”。</i> <br><br> 让我们转到新创建的意图，然后对“上下文”部分进行更改。 由于用户可以要求连续显示多次GIF，因此应该可以递归调用此意图。 为此，在传出上下文中，有必要注册传入中指示的同一行（图10）。 在“完整信息”部分，您还应该启用“为此意图启用webhook调用”设置。 <br><br> 现在，从侧面菜单返回“填充”，在此处初始化“搜索意图-更多”的处理程序。 我们还将<code>offset</code>参数添加到<code>search</code>功能中，该功能将在GIPHY API中用于分页。 <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SEARCH_RESULTS_MORE = [ <span class="hljs-string"><span class="hljs-string">'   !'</span></span>, <span class="hljs-string"><span class="hljs-string">',    .'</span></span>, <span class="hljs-string"><span class="hljs-string">',   .  ,    .'</span></span> ]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">search</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">conv, query, offset</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Send the GET request to GIPHY API. return request({ method: 'GET', uri: 'https://api.giphy.com/v1/gifs/search', qs: { 'api_key': GIPHY_API_KEY, 'q': query, 'limit': 10, 'offset': offset, 'lang': 'ru' }, json: true, resolveWithFullResponse: true, }).then(function (responce) { // Handle the API call success. console.log(responce.statusCode + ': ' + responce.statusMessage); console.log(JSON.stringify(responce.body)); // Obtain carousel items from the API call response. var carouselItems = getCarouselItems(responce.body.data); // Validate items count. if (carouselItems.length &lt;= 10 &amp;&amp; carouselItems.length &gt;= 2) { conv.data.query = query; conv.data.offset = responce.body.pagination.count + responce.body.pagination.offset; conv.data.paginationCount = conv.data.paginationCount || 0; conv.data.searchCount = conv.data.searchCount || 0; // Show successful response. if (offset == 0) { conv.ask(SEARCH_RESULTS[conv.data.searchCount % SEARCH_RESULTS.length]); conv.data.searchCount++; } else { conv.ask(SEARCH_RESULTS_MORE[conv.data.paginationCount % SEARCH_RESULTS_MORE.length]); conv.data.paginationCount++; } conv.ask(new BrowseCarousel({ items: carouselItems })); conv.ask(new Suggestions('')); } else { // Show alternative response. conv.ask('      ,   - ?)'); } }).catch(function (error) { // Handle the API call failure. console.log(error); conv.ask(',     .'); }); } // Handle the Dialogflow intent named 'Search Intent - more'. app.intent('Search Intent - more', (conv) =&gt; { // Load more gifs from the privious search query return search(conv, conv.data.query, conv.data.offset); });</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/rm/t1/fq/rmt1fqdvnbvywl1bsgmmjegxceu.jpeg"><br>  <i>图</i>  <i>11.搜索gif时的分页。</i> <br><br><h2> 结果 </h2><br> 该操作的视频如下所示。 <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/FsJu8CQODu8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Github上</a>提供了项目代码和助手转储。 <br><br><div class="spoiler">  <b class="spoiler_title">有关安装项目和导入转储的说明</b> <div class="spoiler_text"><ol><li> 转到Dialogflow控制台并创建一个新代理，或选择一个现有代理。 </li><li> 单击设置图标，转到“导出和导入”部分，然后单击“从ZIP还原”按钮。 从存储库的根目录中选择ZIP文件。 </li><li> 从左侧导航菜单中选择“实现”。 </li><li> 打开“内联编辑器”设置。 </li><li> 将文件内容从<code>functions</code>目录复制到“实现”中的相应选项卡上。 </li><li> 在<i>index.js</i>标签中输入GIPHY API访问密钥。 </li><li> 转到Firebase控制台，然后将计划更改为Flame或Blaze。 免费资费计划不支持通过网络使用第三方服务。 </li></ol><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN419261/">https://habr.com/ru/post/zh-CN419261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN419251/index.html">Slurm第三天的广播：在Kubernetes上很强烈</a></li>
<li><a href="../zh-CN419253/index.html">2018年罗马俱乐部报告，第3.6章：再生都市主义：生态城</a></li>
<li><a href="../zh-CN419255/index.html">物联网安全基础</a></li>
<li><a href="../zh-CN419257/index.html">印度推出新的PD保护法案-GDPR的另一种方式？</a></li>
<li><a href="../zh-CN419259/index.html">Rust 1.28发布</a></li>
<li><a href="../zh-CN419265/index.html">使用多层神经网络避免游戏中的障碍</a></li>
<li><a href="../zh-CN419267/index.html">SOK联合之旅</a></li>
<li><a href="../zh-CN419269/index.html">重新编写代码，以及如何解密它们。 标识符的秘密力量</a></li>
<li><a href="../zh-CN419271/index.html">Python和JavaScript中的类似物。 第四部分</a></li>
<li><a href="../zh-CN419273/index.html">编写Linux内核模块：具有IRQ支持的GPIO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>