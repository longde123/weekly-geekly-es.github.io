<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐃 🏄 🕔 超级任天堂图形芯片如何工作：超级PPU指南 🚍 👨🏻‍🚀 🔊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PPU概念说明 
 超级PPU 

 超级“图片处理设备”是一种视频控制器芯片，可处理图块图形，滚动平面和SNES子画面。 该功能类似于PPU控制台NES。 

 虚拟RAM 

 视频 RAM-超级PPU使用的RAM。 包含图块。 每种屏幕模式都使用其自己的图块大小。 每个图块通常为8x8或16x...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>超级任天堂图形芯片如何工作：超级PPU指南</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478580/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d82/be3/e2f/d82be3e2f5899794a841779b766a8018.png" alt="图片"></div><br><h2>  PPU概念说明 </h2><br>  <b>超级PPU</b> <br><br> 超级“图片处理设备”是一种视频控制器芯片，可处理图块图形，滚动平面和SNES子画面。 该功能类似于PPU控制台NES。 <br><br>  <b>虚拟RAM</b> <br><br>  <b>视频</b> RAM-超级PPU使用的RAM。 包含图块。 每种屏幕模式都使用其自己的图块大小。 每个图块通常为8x8或16x16像素。  VRAM的容量为64 KB。 <br><br>  <b>燕麦</b> <br><br>  “对象属性存储器”-包含子画面的数据定义。 可能包含不超过128个精灵的数据。 与NES中的OAM类似，但更高级。 <br><a name="habracut"></a><br>  <b>为每个精灵存储的OAM数据</b> <br><br><ul><li>  X子画面位置（9位，0-511或$ 00- $ 1FF） </li><li> 子画面位置在Y中（8位，0-239或$ 00- $ EF）。 值0-239在屏幕上，从-63到-1-“在屏幕上方”，因此sprite的底部在屏幕顶部可见。 这意味着非常大的精灵可以从底部开始，从顶部结束。 </li><li> 第一个精灵图块的ID。  8位索引 </li><li> 精灵名称表 </li><li>  Sprite使用的调色板的ID（0-7 / $ 00- $ 07）。  Sprite在最后8个子选板中使用子选板索引，因此ID实际上为7 + N </li><li> 精灵的大小。  1位：0 =较小的精灵可用于当前模式（通常为1个图块16x16像素），1 =较大的精灵可用于当前模式（通常为4个图块（2x2瓦片16x16像素）） </li><li> 精灵优先  OAM优先级：2比特； 这些位确定子画面相对于背景平面的优先级（请参见下面的图形平面部分）。 优先于其他精灵。  OAM中的零精灵具有最高优先级。  OAM中的第一个精灵具有较低的优先级。 第二个更低，依此类推。 </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eaa/b6c/753/eaab6c7535c7683807b97c4d85d90097.png"></div><br>  <i>OAM Viewer模拟器No $ sns（SMW）</i> <br><br><h2> 两种主要类型的机器 </h2><br>  <b>NTSC控制台</b> <br><br><ul><li> 超级任天堂（SNES），60赫兹的机器，主要在美国销售。 屏幕分辨率256x224像素（如NTSC NES） </li></ul><br>  <b>PAL控制台</b> <br><br><ul><li>  Super Famicom（SFC）的50赫兹汽车销往世界各地。 屏幕分辨率256x240像素（与PAL Famicom相同） </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/506/31e/184/50631e184ec22d7dcc826da1a5bb38d2.png"></div><br>  <i>左：NTSC超级任天堂（1型），右：PAL超级家族</i> <br><br><h2> 瓷砖卡 </h2><br>  SNES具有7种不同的“模式”后台处理 <br><br><ul><li> 他们被称为模式0-7。 模式1具有变化模式。 模式7具有模式7 Ext的子模式。  BG 每种模式都有其自己的可用背景平面数量。 对于该模式下可用的背景平面，每种模式都有其自己的颜色数量。 每个背景的渲染属性略有不同。 在图形的所有模式和所有平面中，任何子调色板中的颜色索引0始终表示透明颜色。 </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/164/a83/f95/164a83f95719008f76e78b1dd40fcd7c.png"></div><br>  <i>模式汇总表</i> <br><br><h2>  4个平面图形 </h2><br>  SNES最多可以处理4个图形平面，称为BG1-BG4。 这些图形平面可以滚动（滚动）。 <br><br>  <b>磁贴卡大小</b> <br><br><ul><li> 滚动平面的平铺图的大小可以为32x32、32x64、64x32或64x64切片。 根据磁贴卡每个块的大小（16x16 px / 1磁贴块或32x32 / 2x2磁贴块），磁贴卡的大小可能从256x256到1024x1024像素不等 </li><li> 有关图块地图中图块大小的更多信息，请参见本文的“图块地图和角色图” <a href="https://wiki.superfamicom.org/snes/show/Backgrounds">部分。</a> </li></ul><br>  <b>瓦片地图中每个瓦片的属性</b> <br><br><ul><li>  V / HFlip砖（垂直/水平反射） </li><li> 平铺优先级（低/高） </li><li> 调色板编号（3位，0-7 / $ 00- $ 07）。 飞机使用CGRAM的前8个子选板； 后8个子选板用于精灵（OAM） </li><li> 磁贴ID </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cec/b6d/02d/cecb6d02d6692c15d2b1e395b1a2c237.png"></div><br>  <i>SWM中用于4个背景（BG）的Tilemap Viewer</i> <br><br>  <b>视频模式</b> <br><br>  <b>模式0</b> <br><br><ul><li>  4个背景（BG），每个背景有4种颜色 </li><li> 优先BG（从前到后） <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f73/12b/8e5/f7312b8e5930d6e906669d823f439223.png"></div></li></ul><br>  <b>模式1</b> <br><br><ul><li>  2 BG 16种颜色 </li><li>  1 BG 4种颜色 </li><li> 优先级BG（从前到后）。 优先级根据寄存器$ 2105中第3位的状态而变化。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d0/2ca/745/4d02ca745d98ab260da835fabc4ac06c.png"></div></li></ul><br>  <b>模式2</b> <br><br><ul><li>  2个BG，每种16种颜色 </li><li> 优先BG（从前到后） <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/120/c9a/642/120c9a642ddd637a1a0aa5e51a4c3da3.png"></div></li><li> 第一种模式具有“按瓦片偏移”（有关更多详细信息，请参见<a href="https://wiki.superfamicom.org/snes/show/Backgrounds">模式2</a> ） </li></ul><br>  <b>模式3</b> <br><br><ul><li>  1个256色BG </li><li>  1 BG 16种颜色 </li><li> 优先BG（从前到后） <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ef9/bfd/37e/ef9bfd37ea9f0e5fa7b90bf6304204ab.png"></div></li><li> 可用的直接彩色模式（注册2130美元） </li></ul><br>  <b>模式4</b> <br><br><ul><li>  1个256色BG </li><li>  1 BG 4种颜色 </li><li> 优先BG（从前到后） <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eab/a47/2fc/eaba472fced61bd1964278595e09435c.png"></div></li><li> 第二种模式是“平铺”（有关更多详细信息，请参见<a href="https://wiki.superfamicom.org/snes/show/Backgrounds">模式4</a> ） </li></ul><br>  <b>模式5</b> <br><br><ul><li>  1 BG 16种颜色 </li><li>  1 BG 4种颜色 </li><li> 优先BG（从前到后） <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fe4/972/e7b/fe4972e7bcf4018407729329a0763170.png"></div></li><li>  “模式5与以前的模式不同。 它始终使用宽度为16像素（高度仍然可以是8或16）的图块，而不使用宽度为8/16像素的标准图块，并且仅使用一半的像素（从零开始，子屏幕图块为偶数像素，主屏幕图块为奇数像素）。 然后，它切换为伪整数以渲染512像素宽的栅格线。 此外，如果启用了隔行模式（请参见寄存器$ 2133的位0），则屏幕高度而不是224或239是448或478个半行。 在每个帧中绘制偶数或奇数行，这由$ 213f寄存器中的位7确定。 这也意味着可以为$ 212c和$ 212d分配相同的值，以获得“预期”显示。” </li></ul><br>  <b>模式6</b> <br><br><ul><li>  1 BG 16种颜色 </li><li> 优先BG（从前到后） <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/502/1db/86d/5021db86d5aaf944658bd2d0aaa8655d.png"></div></li><li> 特殊属性：与模式5类似，它具有一定的区别。 与模式2一样，它也是向平铺模式的转变。  “但是，值得记住的是，模式6始终使用宽度为8像素（16个半像素）的图块，这与BG3和BG1有关。  “不能将偏移量应用于8个半像素的图块或16像素宽的区域（仅当您不对两个8像素区域使用两个偏移值时）。” </li></ul><br>  <b>模式7</b> <br><br><ul><li>  1个256色BG </li><li> 一种非常不同的模式； 允许BG层的矩阵变换 </li><li> 在Super Mario Kart，FZero等游戏中用于伪3D效果。 </li><li> 有关更多详细信息，请参见<a href="https://wiki.superfamicom.org/snes/show/Backgrounds">模式7</a> 。 </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/22d/fd3/4f4/22dfd34f435f31754e7075a78dd8157b.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/528/a3a/602/528a3a602f495495adaf959f589d5242.png"></div><br><h2> 克格拉姆 </h2><br>  <b>“彩色图形RAM”</b> <br><br><ul><li> 包含调色板的颜色信息 </li><li> 总共包含256（$ FF）个调色板颜色条目。 </li><li> 每个图形模式将256个调色板条目划分为多个子调色板，每个子调色板具有N种颜色。  N取决于视频模式。 默认情况下，每个子调色板包含16种颜色（256个颜色/每个子调色板16种颜色= 16个子调色板）。 默认情况下，前8个子调色板（ID为0-7 / $ 00- $ 07，调色板记录ID为0-63 / $ 00- $ 3F）用于前景图块（FG），后8个子调色板（子调色板ID为8-16 / $ 08- $ 10，记录ID调色板64-127或$ 40- $ 80）-用于精灵对象。 使用此子调色板，子调色板中的第一种颜色对于图块/子图形变为透明 </li><li>  15位BGR颜色格式。  CGRAM中的每个颜色条目的格式均为2个字节（“字”），格式为0BBBBBGG GGGRRRRR（B =蓝色位，G =绿色位，R =红色位）。  16位，不使用第一位，因此保留15位颜色范围。 每个颜色分量（B，G，R）的值范围为0-31（十进制）或$ 00- $ 1F（十六进制） </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d82/be3/e2f/d82be3e2f5899794a841779b766a8018.png"></div><br>  <i>SNES调色板的细分（调色板查看器模拟器中的“超级马里奥世界”没有$ sns）</i> <br><br><h2> 推荐的调试和图形工具 </h2><br> 寻找一款优秀的软件来创建复古图形，将像素图稿拆分为多个图块并减少要在各种SNES视频模式下处理的色彩数量可能是一个困难的过程。 以下是与复古图形和专用仿真器一起使用的推荐软件列表，可让您浏览VRAM和平面的内容。 <br><br>  <b>图形软件：</b> <br><br>  <b>y</b> <br><br><ul><li> 多平台磁贴编辑器 </li><li>  <a href="http://www.romhacking.net/utilities/958/">C＃中的新版本</a> </li><li>  <a href="http://www.romhacking.net/utilities/119/">旧的C ++版本</a> </li></ul><br>  <b>Irfanview</b> <br><br><ul><li> 用于查看/编辑通用程序的程序，具有插件，并广泛支持许多文件类型 </li><li> 可以编辑，导出和导入调色板，以及增加/减少图像中的颜色数量并显示该数量 </li><li> 免费和开源软件 </li><li> 有一个PNG插件，用于<b>在保留调色板顺序的同时</b>更改颜色深度更改 </li><li>  <a href="http://www.irfanview.com/">网页首页</a> </li></ul><br>  <b>推荐的用于调试Super PPU的专用仿真器</b> <br><br>  <b>没有$ sns</b> <br><br><ul><li> 调试SNES模拟器 </li><li> 可以模拟SNES-CD Super Disc自制软件原型 </li><li> 可以显示机器/ CPU状态 </li><li> 即时显示BG图层 </li><li> 可以即时显示OAM </li><li> 可以在各种颜色模式下显示VRAM磁贴的内容 </li><li> 可以显示CGRAM内容 </li><li>  <a href="http://problemkaputt.de/sns.htm">资讯中心</a> </li></ul><br>  <b>希根</b> <br><br><ul><li> 各种复古控制台的模拟器 </li><li> 具有<b>对</b> SNES设备<b>周期</b>的非常精确的仿真; 用于模拟/调试SNES硬件问题 </li><li>  <a href="https://byuu.org/emulation/higan/">资讯中心</a> </li></ul><br><h2> 链接和其他阅读 </h2><br><br><ul><li>  <a href="https://wiki.superfamicom.org/snes/show/HomePage">SNESDev网站</a> </li><li>  <a href="https://wiki.superfamicom.org/snes/show/Sprites">SNES精灵</a> </li><li>  <a href="https://wiki.superfamicom.org/snes/show/Palettes">调色板信息</a> </li><li>  <a href="https://wiki.superfamicom.org/snes/show/Backgrounds">SNES背景层信息</a> </li><li>  <a href="https://forums.nesdev.com/viewtopic.php%3Ff%3D5%26amp%3Bt%3D11932">PAL / NTSC论坛主题</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN478580/">https://habr.com/ru/post/zh-CN478580/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN478560/index.html">免费的即时通讯程序是匿名的吗？</a></li>
<li><a href="../zh-CN478564/index.html">我们TsIAN如何驯服了TB级的日志</a></li>
<li><a href="../zh-CN478566/index.html">的iOS 应用程序未运行时联网</a></li>
<li><a href="../zh-CN478572/index.html">机器人上的神经网络：虚拟助手如何工作和学习</a></li>
<li><a href="../zh-CN478574/index.html">关于铁路制动的真相：第4部分-乘客制动</a></li>
<li><a href="../zh-CN478582/index.html">2019年全球移动设备VPN报告</a></li>
<li><a href="../zh-CN478584/index.html">JVM内部，第2部分-类文件结构</a></li>
<li><a href="../zh-CN478586/index.html">效率低下</a></li>
<li><a href="../zh-CN478590/index.html">您确定使用微服务吗？</a></li>
<li><a href="../zh-CN478594/index.html">为VFX设计人员阅读的5本书</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>