<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐คต๐ผ ๐คน๐ฝ โ ุฎุฑุงุฆุท ุณุฏุงุณูุฉ ูู ุงููุญุฏุฉ: ููุชุดู ุงููุณุงุฑ ููุฑู ุงููุงุนุจูู ูุงูุฑุณูู ุงููุชุญุฑูุฉ โ๏ธ ๐๐ป ๐๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูุฃุฌุฒุงุก 1-3: ุงูุดุจูุฉ ูุงูุฃููุงู ูุงุฑุชูุงุนุงุช ุงูุฎููุฉ 

 ุงูุฃุฌุฒุงุก 4-7: ุงููุทุจุงุช ูุงูุฃููุงุฑ ูุงูุทุฑู 

 ุงูุฃุฌุฒุงุก 8-11: ุงููุงุก ูุงูุฃุดูุงู ุงูุฃุฑุถูุฉ ูุงูุฃุณูุงุฑ 

 ุงูุฃุฌุฒุงุก 12-1...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฎุฑุงุฆุท ุณุฏุงุณูุฉ ูู ุงููุญุฏุฉ: ููุชุดู ุงููุณุงุฑ ููุฑู ุงููุงุนุจูู ูุงูุฑุณูู ุงููุชุญุฑูุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426481/" style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 1-3: ุงูุดุจูุฉ ูุงูุฃููุงู ูุงุฑุชูุงุนุงุช ุงูุฎููุฉ</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 4-7: ุงููุทุจุงุช ูุงูุฃููุงุฑ ูุงูุทุฑู</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 8-11: ุงููุงุก ูุงูุฃุดูุงู ุงูุฃุฑุถูุฉ ูุงูุฃุณูุงุฑ</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 12-15: ุงูุญูุธ ูุงูุชุญููู ุ ุงูููุงู ุ ุงููุณุงูุงุช</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 16-19: ุฅูุฌุงุฏ ุงูุทุฑูู ููุฑู ุงููุงุนุจูู ูุงูุฑุณูู ุงููุชุญุฑูุฉ</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 20-23: ุถุจุงุจ ุงูุญุฑุจ ุ ุจุญุซ ุงูุฎุฑุงุฆุท ุ ุงูุฌูู ุงูุฅุฌุฑุงุฆู</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 24-27: ุฏูุฑุฉ ุงููุงุก ุ ุงูุชุขูู ุ ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ ุ ุงูุฎุฑูุทุฉ ุงูุฃุณุทูุงููุฉ</a> <br><br><h1 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก 16: ุฅูุฌุงุฏ ุงูุทุฑูู </h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุจุชูููุฒ ุงูุฎูุงูุง </li><li style=";text-align:right;direction:rtl">  ุญุฏุฏ ูุฏู ุงูุจุญุซ </li><li style=";text-align:right;direction:rtl">  ุงุจุญุซ ุนู ุฃูุตุฑ ูุณุงุฑ </li><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุงุฆูุฉ ุงูุชุธุงุฑ ุฐุงุช ุฃููููุฉ </li></ul><br>  ุจุนุฏ ุญุณุงุจ ุงููุณุงูุงุช ุจูู ุงูุฎูุงูุง ุ ุดุฑุนูุง ูู ุงูุนุซูุฑ ุนูู ุงููุณุงุฑุงุช ุจูููุง. <br><br>  ุจุฏุกูุง ูู ูุฐุง ุงูุฌุฒุก ุ ุณูุชู ุฅูุดุงุก ุจุฑุงูุฌ ุชุนููููุฉ ููุฎุฑูุทุฉ ุงูุณุฏุงุณูุฉ ูู Unity 5.6.0.  ูุฑุฌู ููุงุญุธุฉ ุฃูู ูู 5.6 ููุงู ุฎุทุฃ ูุฏูุฑ ุตูุงุฆู ุงูููุงู ูู ุงูุชุฌููุนุงุช ููุนุฏูุฏ ูู ุงูููุตุงุช.  ููููู ุงูุงูุชูุงู ุญููู ูู ุฎูุงู ุชุถููู <em>Is Readable</em> ูู ุนุงุฑุถ ุตููู ุงููุณูุฌ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1d9/165/c4e/1d9165c4e1862b050015df3c9dcc48cd.jpg"></div><br>  <i>ุงูุชุฎุทูุท ูุฑุญูุฉ</i> <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุงูุฎูุงูุง ุงูุจุงุฑุฒุฉ </h2><br>  ููุจุญุซ ูู ุงููุณุงุฑ ุจูู ุฎููุชูู ุ ูุญุชุงุฌ ุฃููุงู ุฅูู ุชุญุฏูุฏ ูุฐู ุงูุฎูุงูุง.  ุฅููุง ุฃูุซุฑ ูู ูุฌุฑุฏ ุงุฎุชูุงุฑ ุฎููุฉ ูุงุญุฏุฉ ููุฑุงูุจุฉ ุงูุจุญุซ ุนูู ุงูุฎุฑูุทุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ุณูููู ุฃููุงู ุจุชุญุฏูุฏ ุงูุฎููุฉ ุงูุฃูููุฉ ุ ุซู ุงูุฎููุฉ ุงูุฃุฎูุฑุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู ูู ุงูููุงุฆู ููู ุฃู ูุชู ุชุณููุท ุงูุถูุก ุนูููู.  ูุฐูู ุ ุฏุนูุง ูุถูู ูุซู ูุฐู ุงููุธููุฉ.  ุญุชู ูููู ุจุฅูุดุงุก ุทุฑููุฉ ูุนูุฏุฉ ุฃู ูุนุงูุฉ ููุชูููุฒ ุ ูููู ููุท ุจุฅูุดุงุก ุดูุก ููุณุงุนุฏุชูุง ูู ุงูุชุทููุฑ. <br><br><h3 style=";text-align:right;direction:rtl">  ูุณูุฌ ูุฎุทุท </h3><br>  ุฅุญุฏู ุงูุทุฑู ุงูุจุณูุทุฉ ูุชุญุฏูุฏ ุงูุฎูุงูุง ูู ุฅุถุงูุฉ ูุณุงุฑ ุฅูููุง.  ุฃุณูู ุทุฑููุฉ ููููุงู ุจุฐูู ูู ุจุงุณุชุฎุฏุงู ูุณูุฌ ูุญุชูู ุนูู ูุฎุทุท ุณุฏุงุณู.  <a href="">ููุง</a> ููููู ุชูุฒูู ูุซู ูุฐุง ุงููููุณ.  ุฅูู ุดูุงู ุจุงุณุชุซูุงุก ุงููุฎุทุท ุงูุฃุจูุถ ููุณุฏุงุณู.  ุจุนุฏ ุฃู ุฃุตุจุญุช ุจูุถุงุก ุ ุณูููู ูุงุฏุฑูู ูู ุงููุณุชูุจู ุนูู ุชูููููุง ุญุณุจ ุญุงุฌุชูุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/0j/4u/vs/0j4uvsbyjtxiavcwaajn73csp68.png"></div><br>  <i>ูุฎุทุท ุงูุฎููุฉ ุนูู ุฎูููุฉ ุณูุฏุงุก</i> <br><br>  ูู ุจุงุณุชูุฑุงุฏ ุงููุณูุฌ ูุงุถุจุท <em>ููุน ุงููุณูุฌ</em> ุนูู <em>Sprite</em> .  ุณูุชู ุชุนููู <em>ูุถุน Sprite</em> ููุง ุนูู <em>Single</em> ูุน ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ.  ูุธุฑูุง ูุฃู ูุฐุง ูุณูุฌ ุฃุจูุถ ุจุดูู ุงุณุชุซูุงุฆู ุ ูุง ูุญุชุงุฌ ุฅูู ุงูุชุญููู ุฅูู <em>sRGB</em> .  ุชุดูุฑ ููุงุฉ ุฃููุง ุฅูู ุงูุดูุงููุฉ ุ ูุฐุง ูุฅู ุชูููู <em>Alpha ูู ุงูุดูุงููุฉ</em> .  ููุช ุฃูุถูุง ุจุชุนููู ูุณูุฌ <em>ูุถุน ุงูุชุตููุฉ</em> ุนูู <em>Trilinear</em> ุ ูุฃูู ุจุฎูุงู ุฐูู ูุฏ ุชุตุจุญ ุงูุชูุงูุงุช mip ูููุณุงุฑุงุช ููุญูุธุฉ ุฌุฏูุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ebb/e4a/a88/ebbe4aa88f93b71cf5946c4c011339dc.png"></div><br>  <i>ุฎูุงุฑุงุช ุงุณุชูุฑุงุฏ ุงููููุณ</i> <br><br><h3 style=";text-align:right;direction:rtl">  ููุด ูุงุญุฏ ููู ุฎููุฉ </h3><br>  ุฃุณุฑุน ุทุฑููุฉ ูู ุฅุถุงูุฉ ููุงู ูุญุชูู ููุฎูุงูุง ุ ูุฅุถุงูุฉ ูู ููุด ูุชุญุฑู.  ูู ุจุฅูุดุงุก ูุงุฆู ูุนุจุฉ ุฌุฏูุฏ ุ ูุฃุถู ูููู ุงูุตูุฑุฉ ( <em>Component / UI / Image</em> ) ุฅููู ููู ุจุชุนูููู ุงูุนูุฑูุช ุงูุชูุตููู.  ุซู ูู ุจุฅุฏุฑุงุฌ ูุซูู ุงูุฅุนุฏุงุฏ ุงููุณุจู <em>Hex Cell Label</em> ูู ุงููุดูุฏ ุ ูุงุฌุนู ูุงุฆู ุงูุนูุฑูุช ุชุงุจุนูุง ูู ุ ููู ุจุชุทุจูู ุงูุชุบููุฑุงุช ุนูู ุงูุจุงุฏุฆุฉ ุ ุซู ุชุฎูุต ูู ุงูุจุงุฏุฆุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5c2/7f6/7f4/5c27f67f4596673f5b2e73b2db5073cd.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5da/f7c/ea8/5daf7cea84e2ff46829460e0523bfa91.png"></div><br>  <i>ุนูุตุฑ ุงุฎุชูุงุฑ ุงูุทูู ุงูุฌุงูุฒุฉ</i> <br><br>  ุงูุขู ูู ุฎููุฉ ููุง ููุด ูุชุญุฑู ุ ููููุง ุณุชููู ูุจูุฑุฉ ุฌุฏูุง.  ูุฌุนู ุงูุฎุทูุท ุชุชุทุงุจู ูุน ูุฑุงูุฒ ุงูุฎูุงูุง ุ ูู ุจุชุบููุฑ <em>ุงูุนุฑุถ</em> <em>ูุงูุงุฑุชูุงุน</em> ููููู ุชุญููู ุงูุนูุฑูุช ุฅูู 17. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bc1/069/e42/bc1069e4216435f1a30af953af5b948a.png"></div><br>  <i>ุงูุงุฎุชูุงุฑ ุงูุนูุงุฑูุช ูุฎุจุฃุฉ ุฌุฒุฆูุง ูู ูุจู ุงูุฅุบุงุซุฉ</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฑุณู ููู ูู ุดูุก </h3><br>  ูุธุฑูุง ูุฃู ุงูููุงู ูุชุฑุงูุจ ุนูู ููุทูุฉ ุญูุงู ุงูุฎูุงูุง ุ ูุฅูู ุบุงูุจูุง ูุง ูุธูุฑ ุชุญุช ููุฏุณุฉ ุงูุฅุบุงุซุฉ.  ูุจุณุจุจ ูุฐุง ุ ูุฎุชูู ุฌุฒุก ูู ุงูุฏุงุฆุฑุฉ.  ูููู ุชุฌูุจ ุฐูู ุนู ุทุฑูู ุฑูุน ุงูุนูุงุฑูุช ููููุงู ุจุดูู ุนููุฏู ุ ูููู ููุณ ูู ุญุงูุฉ ุงููุณูุฑ.  ุจุฏูุงู ูู ุฐูู ุ ูููููุง ุงูููุงู ุจูุง ููู: ุงุฑุณู ุงููููุด ุงููุชุญุฑูุฉ ุฏุงุฆููุง ููู ูู ุดูุก ุขุฎุฑ.  ููููุงู ุจุฐูู ุ ูู ุจุฅูุดุงุก ุชุธููู ุงูุนูุฑูุช ุงูุฎุงุต ุจู.  ุณูููู ูุงููุง ุจุงููุณุจุฉ ููุง ููุณุฎ ุชุธููู ุงูุนูุฑูุช Unity ุงูููุงุณู ูุฅุฌุฑุงุก ุจุนุถ ุงูุชุบููุฑุงุช ุนููู. <br><br><pre style=";text-align:right;direction:rtl"><code class="hljs powershell">Shader <span class="hljs-string"><span class="hljs-string">"Custom/Highlight"</span></span> { Properties { <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">PerRendererData</span></span></span><span class="hljs-function">] _</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainTex</span></span></span></span> (<span class="hljs-string"><span class="hljs-string">"Sprite Texture"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>D) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} _Color (<span class="hljs-string"><span class="hljs-string">"Tint"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">MaterialToggle</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PixelSnap</span></span></span></span> (<span class="hljs-string"><span class="hljs-string">"Pixel snap"</span></span>, Float) = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">HideInInspector</span></span></span><span class="hljs-function">] _</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RendererColor</span></span></span></span> (<span class="hljs-string"><span class="hljs-string">"RendererColor"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">HideInInspector</span></span></span><span class="hljs-function">] _</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Flip</span></span></span></span> (<span class="hljs-string"><span class="hljs-string">"Flip"</span></span>, Vector) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">PerRendererData</span></span></span><span class="hljs-function">] _</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AlphaTex</span></span></span></span> (<span class="hljs-string"><span class="hljs-string">"External Alpha"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>D) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} <span class="hljs-function"><span class="hljs-function">[</span><span class="hljs-type"><span class="hljs-function"><span class="hljs-type">PerRendererData</span></span></span><span class="hljs-function">] _</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EnableExternalAlpha</span></span></span></span> (<span class="hljs-string"><span class="hljs-string">"Enable External Alpha"</span></span>, Float) = <span class="hljs-number"><span class="hljs-number">0</span></span> } SubShader { Tags { <span class="hljs-string"><span class="hljs-string">"Queue"</span></span>=<span class="hljs-string"><span class="hljs-string">"Transparent"</span></span> <span class="hljs-string"><span class="hljs-string">"IgnoreProjector"</span></span>=<span class="hljs-string"><span class="hljs-string">"True"</span></span> <span class="hljs-string"><span class="hljs-string">"RenderType"</span></span>=<span class="hljs-string"><span class="hljs-string">"Transparent"</span></span> <span class="hljs-string"><span class="hljs-string">"PreviewType"</span></span>=<span class="hljs-string"><span class="hljs-string">"Plane"</span></span> <span class="hljs-string"><span class="hljs-string">"CanUseSpriteAtlas"</span></span>=<span class="hljs-string"><span class="hljs-string">"True"</span></span> } Cull Off ZWrite Off Blend One OneMinusSrcAlpha Pass { CGPROGRAM <span class="hljs-comment"><span class="hljs-comment">#pragma vertex SpriteVert #pragma fragment SpriteFrag #pragma target 2.0 #pragma multi_compile_instancing #pragma multi_compile _ PIXELSNAP_ON #pragma multi_compile _ ETC1_EXTERNAL_ALPHA #include "UnitySprites.cginc" ENDCG } } }</span></span></code> </pre> <br>  ุงูุชุบููุฑ ุงูุฃูู ูู ุฃููุง ูุชุฌุงูู ุงููุฎุฒู ุงููุคูุช ููุนูู ุ ููุง ูุฌุนู ุงุฎุชุจุงุฑ Z ููุฌุญ ุฏุงุฆููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> ZWrite <span class="hljs-keyword"><span class="hljs-keyword">Off</span></span> ZTest <span class="hljs-keyword"><span class="hljs-keyword">Always</span></span></code> </pre> <br>  ุงูุชุบููุฑ ุงูุซุงูู ูู ุฃููุง ูุนุฑุถ ุจุนุฏ ุจููุฉ ุงูููุฏุณุฉ ุงูุดูุงูุฉ.  ูููู ูุฅุถุงูุฉ 10 ุฅูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุดูุงููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs objectivec"> <span class="hljs-string"><span class="hljs-string">"Queue"</span></span>=<span class="hljs-string"><span class="hljs-string">"Transparent+10"</span></span></code> </pre> <br>  ูู ุจุฅูุดุงุก ูุงุฏุฉ ุฌุฏูุฏุฉ ุณูุณุชุฎุฏููุง ูุฐุง ุงูุชุธููู.  ูููููุง ุชุฌุงูู ุฌููุน ุฎุตุงุฆุตู ุ ูุงูุงูุชุฒุงู ุจุงูููู ุงูุงูุชุฑุงุถูุฉ.  ุซู ุงุฌุนู ุงูุนูุฑูุช ุงููุณุจู ูุณุชุฎุฏู ูุฐู ุงููุงุฏุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/15b/d01/812/15bd01812d94f52ced67308dd000c430.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ef5/393/e24/ef5393e241252d81513a0ff5f8972b50.png"></div><br>  <i>ูุญู ูุณุชุฎุฏู ููุงุฏ ุงูุนูุฑูุช ุงูุฎุงุตุฉ ุจูุง</i> <br><br>  ุงูุขู ุชููู ููุงูุญ ุงูุชุญุฏูุฏ ูุฑุฆูุฉ ุฏุงุฆููุง.  ุญุชู ุฅุฐุง ูุงูุช ุงูุฎููุฉ ูุฎููุฉ ุชุญุช ููุด ุฃุนูู ุ ูุณูุธู ูุฎุทุทูุง ูุฑุณูููุง ููู ูู ุดูุก ุขุฎุฑ.  ูุฏ ูุง ูุจุฏู ุฌููููุง ุ ููู ุงูุฎูุงูุง ุงููุญุฏุฏุฉ ุณุชููู ุฏุงุฆููุง ูุฑุฆูุฉ ุ ููู ุฃูุฑ ูููุฏ ููุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ce2/8bc/418/ce28bc418dc0ec116cff1bcbaddf0363.png"></div><br>  <i>ุชุฌุงูู ุงููุฎุฒู ุงููุคูุช ููุนูู</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุญูู ูู ุงูุงุฎุชูุงุฑ </h3><br>  ูุง ูุฑูุฏ ุฅุจุฑุงุฒ ุฌููุน ุงูุฎูุงูุง ูู ููุณ ุงูููุช.  ูู ุงููุงูุน ุ ูู ุงูุจุฏุงูุฉ ูุฌุจ ุฅูุบุงุก ุชุญุฏูุฏูู ุฌููุนูุง.  ูููููุง ุชูููุฐ ุฐูู ุนู ุทุฑูู ุชุนุทูู ูููู ุงูุตูุฑุฉ ููุงุฆู <em>Highlight</em> ุงูุฌุงูุฒ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/82f/00e/164/82f00e164316900fb9d9694030298bcc.png"></div><br>  <i>ูููู ุตูุฑุฉ ูุนุทู</i> <br><br>  ูุชูููู ุชุญุฏูุฏ ุงูุฎููุฉ ุ ุฃุถู ุทุฑููุฉ <code>EnableHighlight</code> ุฅูู <code>EnableHighlight</code> .  ูุฌุจ ุฃู ูุฃุฎุฐ ุงูุทูู ุงููุญูุฏ ูู <code>uiRect</code> ุงูุฎุงุต ุจู <code>uiRect</code> ูููู ุงูุตูุฑุฉ ุงูุฎุงุต ุจู.  ุณูููู ุฃูุถูุง ุจุฅูุดุงุก ุทุฑููุฉ <code>DisableHighlight</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DisableHighlight</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Image highlight = uiRect.GetChild(<span class="hljs-number"><span class="hljs-number">0</span></span>).GetComponent&lt;Image&gt;(); highlight.enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EnableHighlight</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Image highlight = uiRect.GetChild(<span class="hljs-number"><span class="hljs-number">0</span></span>).GetComponent&lt;Image&gt;(); highlight.enabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  ุฃุฎูุฑูุง ุ ูููููุง ุชุญุฏูุฏ ุงูููู ุจุญูุซ ูููุญ ุงูุฅุถุงุกุฉ ุงูุฎูููุฉ ุชุฏุฑุฌูุง ุนูุฏ ุชุดุบููู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EnableHighlight</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Color color</span></span></span><span class="hljs-function">)</span></span> { Image highlight = uiRect.GetChild(<span class="hljs-number"><span class="hljs-number">0</span></span>).GetComponent&lt;Image&gt;(); highlight.color = color; highlight.enabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุญุฒูุฉ ุงููุญุฏุฉ</a> <br><br><h2 style=";text-align:right;direction:rtl">  ุฅูุฌุงุฏ ุงูุทุฑูู </h2><br>  ุงูุขู ุจุนุฏ ุฃู ูุชููู ูู ุชุญุฏูุฏ ุงูุฎูุงูุง ุ ูุญุชุงุฌ ุฅูู ุงูุงูุชูุงู ูุชุญุฏูุฏ ุฎููุชูู ุ ุซู ุงูุนุซูุฑ ุนูู ุงููุณุงุฑ ุจููููุง.  ูุญุชุงุฌ ุฃููุงู ุฅูู ุชุญุฏูุฏ ุงูุฎูุงูุง ุ ุซู ูุตุฑ ุงูุจุญุซ ุนูู ูุณุงุฑ ุจูููุง ุ ูุฃุฎูุฑูุง ูุธูุฑ ูุฐุง ุงููุณุงุฑ. <br><br><h3 style=";text-align:right;direction:rtl">  ุจุฏุก ุงูุจุญุซ </h3><br>  ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุฎููุชูู ูุฎุชููุชูู ุ ููุทุชุง ุงูุจุฏุงูุฉ ูุงูููุงูุฉ ููุจุญุซ.  ุงูุชุฑุถ ุฃูู ูุชุญุฏูุฏ ุฎููุฉ ุงูุจุญุซ ุงูุฃูููุฉ ุ ุงุถุบุท ูุน ุงูุงุณุชูุฑุงุฑ ุนูู ููุชุงุญ Shift ุงูุฃูุณุฑ ุฃุซูุงุก ุงูููุฑ ุจุงููุงูุณ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุชูููุฒ ุงูุฎููุฉ ุจุงูููู ุงูุฃุฒุฑู.  ูุญู ุจุญุงุฌุฉ ุฅูู ุญูุธ ุงูุฑุงุจุท ููุฐู ุงูุฎููุฉ ููุฒูุฏ ูู ุงูุจุญุซ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุนูุฏ ุงุฎุชูุงุฑ ุฎููุฉ ุจุฏุก ุฌุฏูุฏุฉ ุ ูุฌุจ ุชุนุทูู ุชุญุฏูุฏ ุงูุฎููุฉ ุงููุฏููุฉ.  ูุฐูู ุ ูุถูู ุงูุญูู <code>searchFromCell</code> ุฅูู <code>searchFromCell</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexCell previousCell, searchFromCell;</code> </pre> <br>  ุฏุงุฎู <code>HandleInput</code> ูููููุง ุงุณุชุฎุฏุงู <code>Input.GetKey(KeyCode.LeftShift)</code> ูุงุฎุชุจุงุฑ ููุชุงุญ Shift ูุน <code>Input.GetKey(KeyCode.LeftShift)</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (editMode) { EditCells(currentCell); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.LeftShift)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFromCell) { searchFromCell.DisableHighlight(); } searchFromCell = currentCell; searchFromCell.EnableHighlight(Color.blue); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { hexGrid.FindDistancesTo(currentCell); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d50/a63/1c3/d50a631c3f4701e414b2e9a9078a57a2.png"></div><br>  <i>ุฃูู ููุธุฑ</i> <br><br><h3 style=";text-align:right;direction:rtl">  ููุทุฉ ููุงูุฉ ุงูุจุญุซ </h3><br>  ุจุฏูุงู ูู ุงูุจุญุซ ุนู ุฌููุน ุงููุณุงูุงุช ุฅูู ุงูุฎููุฉ ุ ูุจุญุซ ุงูุขู ุนู ูุณุงุฑ ุจูู ุฎููุชูู ูุญุฏุฏุชูู.  ูุฐูู ุ <code>HexGrid.FindDistancesTo</code> ุชุณููุฉ <code>HexGrid.FindDistancesTo</code> ุฅูู <code>HexGrid.FindPath</code> <code>HexCell</code> ุงููุนููุฉ <code>HexCell</code> ุงูุซุงููุฉ. ุฃูุถูุง ุ ูู ุจุชุบููุฑ ุทุฑููุฉ <code>Search</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell</span></span></span><span class="hljs-function">)</span></span> { StopAllCoroutines(); StartCoroutine(Search(fromCell, toCell)); } <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Distance = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue; } WaitForSeconds delay = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WaitForSeconds(<span class="hljs-number"><span class="hljs-number">1</span></span> / <span class="hljs-number"><span class="hljs-number">60f</span></span>); List&lt;HexCell&gt; frontier = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;HexCell&gt;(); fromCell.Distance = <span class="hljs-number"><span class="hljs-number">0</span></span>; frontier.Add(fromCell); โฆ }</code> </pre> <br>  ุงูุขู ูุฌุจ ุนูู <code>HexMapEditor.HandleInput</code> ุงุณุชุฏุนุงุก ุงูุทุฑููุฉ ุงููุนุฏูุฉ ุ ุจุงุณุชุฎุฏุงู <code>searchFromCell</code> ู <code>searchFromCell</code> .  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูููููุง ุงูุจุญุซ ููุท ุนูุฏูุง ูุนุฑู ูู ุฃู ุฎููุฉ ููุจุญุซ.  ููุณูุง ูุถุทุฑูู ููุจุญุซ ูู ุญุงู ุชุทุงุจู ููุทุชู ุงูุจุฏุงูุฉ ูุงูููุงูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (editMode) { EditCells(currentCell); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.LeftShift)) { โฆ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFromCell &amp;&amp; searchFromCell != currentCell) { hexGrid.FindPath(searchFromCell, currentCell); }</code> </pre> <br>  ุจุงูุงูุชูุงู ุฅูู ุงูุจุญุซ ุ ูุญุชุงุฌ ุฃููุงู ุฅูู ุงูุชุฎูุต ูู ุฌููุน ุงูุชุญุฏูุฏุงุช ุงูุณุงุจูุฉ.  ูุฐูู ุ ุงุฌุนู <code>HexGrid.Search</code> ูููู ุงูุชุญุฏูุฏ ุนูุฏ ุฅุนุงุฏุฉ ุถุจุท ุงููุณุงูุงุช.  ูุธุฑูุง ูุฃู ูุฐุง ูุคุฏู ุฃูุถูุง ุฅูู ุฅููุงู ุฅุถุงุกุฉ ุงูุฎููุฉ ุงูุฃูููุฉ ุ ุซู ูู ุจุชุดุบูููุง ูุฑุฉ ุฃุฎุฑู.  ูู ูุฐู ุงููุฑุญูุฉ ุ ูููููุง ุฃูุถูุง ุชุณููุท ุงูุถูุก ุนูู ููุทุฉ ุงูููุงูุฉ.  ุฏุนููุง ูุฌุนููุง ุญูุฑุงุก. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Distance = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue; cells[i].DisableHighlight(); } fromCell.EnableHighlight(Color.blue); toCell.EnableHighlight(Color.red); โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/181/01c/5e5/18101c5e578322ea99598cbca70f60a9.png"></div><br>  <i>ููุงุท ุงูููุงูุฉ ููุณุงุฑ ูุญุชูู</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุชูููุฏ ุงูุจุญุซ </h3><br>  ุนูุฏ ูุฐู ุงูููุทุฉ ุ ูุง ุชุฒุงู ุฎูุงุฑุฒููุฉ ุงูุจุญุซ ุชุญุณุจ ุงููุณุงูุงุช ูุฌููุน ุงูุฎูุงูุง ุงูุชู ูููู ุงููุตูู ุฅูููุง ูู ุฎููุฉ ุงูุจุฏุงูุฉ.  ููููุง ูุณูุง ุจุญุงุฌุฉ ุฅูููุง ุจุนุฏ ุงูุขู.  ูููููุง ุงูุชููู ุจูุฌุฑุฏ ุฃู ูุฌุฏ ุงููุณุงูุฉ ุงูููุงุฆูุฉ ููุฎููุฉ ุงูููุงุฆูุฉ.  ุฃู ุฃูู ุนูุฏูุง ุชููู ุงูุฎููุฉ ุงูุญุงููุฉ ูุญุฏูุฏุฉ ุ ูููููุง ุงูุฎุฑูุฌ ูู ุญููุฉ ุงูุฎูุงุฑุฒููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (frontier.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> delay; HexCell current = frontier[<span class="hljs-number"><span class="hljs-number">0</span></span>]; frontier.RemoveAt(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current == toCell) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { โฆ } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/424/6e0/d49/4246e0d491a1938dfb1e9b3a00080e42.png"></div><br>  <i>ุชููู ุนูุฏ ููุทุฉ ุงูููุงูุฉ</i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฐุง ูุญุฏุซ ุฅุฐุง ุชุนุฐุฑ ุงููุตูู ุฅูู ููุทุฉ ุงูููุงูุฉุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุซู ุณุชูุงุตู ุงูุฎูุงุฑุฒููุฉ ุงูุนูู ุญุชู ุชุนุซุฑ ุนูู ุฌููุน ุงูุฎูุงูุง ุงูุชู ูููู ุงููุตูู ุฅูููุง.  ุจุฏูู ุฅููุงููุฉ ุงูุฎุฑูุฌ ุงููุจูุฑ ุ ุณุชุนูู ูุฃุณููุจ <code>FindDistancesTo</code> ุงููุฏูู. </div></div><br><h3 style=";text-align:right;direction:rtl">  ุนุฑุถ ุงููุณุงุฑ </h3><br>  ูููููุง ุฅูุฌุงุฏ ุงููุณุงูุฉ ุจูู ุจุฏุงูุฉ ูููุงูุฉ ุงููุณุงุฑ ุ ููููุง ูุง ูุนุฑู ุญุชู ุงูุขู ูุง ูู ุงููุณุงุฑ ุงูุญูููู.  ููุนุซูุฑ ุนููู ุ ุชุญุชุงุฌ ุฅูู ุชุชุจุน ููููุฉ ุงููุตูู ุฅูู ูู ุฎููุฉ.  ูููู ููู ููุนู ุฐููุ <br><br>  ุนูุฏ ุฅุถุงูุฉ ุฎููุฉ ุฅูู ุงูุญุฏูุฏ ุ ูููู ุจุฐูู ูุฃููุง ุฌูุงุฑ ุงูุฎููุฉ ุงูุญุงููุฉ.  ุงูุงุณุชุซูุงุก ุงููุญูุฏ ูู ุฎููุฉ ุงูุจุฏุงูุฉ.  ุชู ุงููุตูู ุฅูู ุฌููุน ุงูุฎูุงูุง ุงูุฃุฎุฑู ูู ุฎูุงู ุงูุฎููุฉ ุงูุญุงููุฉ.  ุฅุฐุง ุชุงุจุนูุง ุงูุฎููุฉ ุงูุชู ุชู ุงููุตูู ุฅูู ูู ุฎููุฉ ูููุง ุ ูุญุตู ุนูู ุดุจูุฉ ูู ุงูุฎูุงูุง ูุชูุฌุฉ ูุฐูู.  ุจุชุนุจูุฑ ุฃุฏู ุ ุดุจูุฉ ุชุดุจู ุงูุดุฌุฑุฉ ุ ูุฌุฐุฑูุง ูู ููุทุฉ ุงูุจุฏุงูุฉ.  ูููููุง ุงุณุชุฎุฏุงูู ูุจูุงุก ุงููุณุงุฑ ุจุนุฏ ุงููุตูู ุฅูู ููุทุฉ ุงูููุงูุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a71/331/153/a713311534e05f46c6fd22a632100494.png"></div><br>  <i>ุดุจูุฉ ุดุฌุฑุฉ ุชุตู ูุณุงุฑุงุช ุงููุฑูุฒ</i> <br><br>  ูููููุง ุญูุธ ูุฐู ุงููุนูููุงุช ุนู ุทุฑูู ุฅุถุงูุฉ ุงุฑุชุจุงุท ุฅูู ุฎููุฉ ุฃุฎุฑู ูู <code>HexCell</code> .  ูุณูุง ุจุญุงุฌุฉ ุฅูู ุฅุฌุฑุงุก ุชุณูุณู ููุฐู ุงูุจูุงูุงุช ุ ูุฐูู ูุณุชุฎุฏู ุงูุฎุงุตูุฉ ุงูููุงุณูุฉ ูุฐูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexCell PathFrom { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br>  ูู <code>HexGrid.Search</code> ุจุชุนููู ูููุฉ <code>PathFrom</code> ููุฌุงุฑ ุฅูู ุงูุฎููุฉ ุงูุญุงููุฉ ุนูุฏ ุฅุถุงูุชูุง ุฅูู ุงูุญุฏ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุบููุฑ ูุฐุง ุงูุฑุงุจุท ุนูุฏูุง ูุฌุฏ ุทุฑููุฉ ุฃูุตุฑ ููุฌุงุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.Distance == <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue) { neighbor.Distance = distance; neighbor.PathFrom = current; frontier.Add(neighbor); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (distance &lt; neighbor.Distance) { neighbor.Distance = distance; neighbor.PathFrom = current; }</code> </pre> <br>  ุจุนุฏ ุงููุตูู ุฅูู ููุทุฉ ุงูููุงูุฉ ุ ูููููุง ุชุตูุฑ ุงููุณุงุฑ ุจุงุชุจุงุน ูุฐู ุงูุฑูุงุจุท ูุฑุฉ ุฃุฎุฑู ุฅูู ุฎููุฉ ุงูุจุฏุงูุฉ ูุชุญุฏูุฏูุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current == toCell) { current = current.PathFrom; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (current != fromCell) { current.EnableHighlight(Color.white); current = current.PathFrom; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f89/9cc/8de/f899cc8de04e0c5666a2a05558b28042.png"></div><br>  <i>ุชู ุงูุนุซูุฑ ุนูู ุงููุณุงุฑ</i> <br><br>  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ุบุงูุจูุง ูุง ูููู ููุงู ุงูุนุฏูุฏ ูู ุฃูุตุฑ ุงููุณุงุฑุงุช.  ูุนุชูุฏ ุงูููุน ุงูุฐู ุชู ุงูุนุซูุฑ ุนููู ุนูู ุชุฑุชูุจ ูุนุงูุฌุฉ ุงูุฎูุงูุง.  ูุฏ ุชุจุฏู ุจุนุถ ุงููุณุงุฑุงุช ุฌูุฏุฉ ุ ูุงูุจุนุถ ุงูุขุฎุฑ ูุฏ ูููู ุณูุฆูุง ุ ูููู ูุง ููุฌุฏ ูุณุงุฑ ุฃูุตุฑ ุฃุจุฏูุง.  ุณูุนูุฏ ุฅูู ูุฐุง ูุงุญููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุบููุฑ ุจุฏุงูุฉ ุงูุจุญุซ </h3><br>  ุจุนุฏ ุชุญุฏูุฏ ููุทุฉ ุงูุจุฏุงูุฉ ุ ุณูุคุฏู ุชุบููุฑ ููุทุฉ ุงูููุงูุฉ ุฅูู ุจุฏุก ุจุญุซ ุฌุฏูุฏ.  ูุฌุจ ุฃู ูุญุฏุซ ููุณ ุงูุดูุก ุนูุฏ ุงุฎุชูุงุฑ ุฎููุฉ ุจุฏุงูุฉ ุฌุฏูุฏุฉ.  ูุฌุนู ูุฐุง ูููููุง ุ ูุฌุจ ุฃู ูุชุฐูุฑ <code>HexMapEditor</code> ุฃูุถูุง ููุทุฉ ุงูููุงูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexCell previousCell, searchFromCell, searchToCell;</code> </pre> <br>  ุจุงุณุชุฎุฏุงู ูุฐุง ุงูุญูู ุ ูููููุง ุฃูุถูุง ุจุฏุก ุจุญุซ ุฌุฏูุฏ ุนูุฏ ุงุฎุชูุงุฑ ุจุฏุงูุฉ ุฌุฏูุฏุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.LeftShift)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFromCell) { searchFromCell.DisableHighlight(); } searchFromCell = currentCell; searchFromCell.EnableHighlight(Color.blue); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchToCell) { hexGrid.FindPath(searchFromCell, searchToCell); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFromCell &amp;&amp; searchFromCell != currentCell) { searchToCell = currentCell; hexGrid.FindPath(searchFromCell, searchToCell); }</code> </pre> <br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุฌูุจ ููุงุท ุงูุจุฏุงูุฉ ูุงูููุงูุฉ ุงููุชุณุงููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (editMode) { EditCells(currentCell); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( Input.GetKey(KeyCode.LeftShift) &amp;&amp; searchToCell != currentCell ) { โฆ }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุญุฒูุฉ ุงููุญุฏุฉ</a> <br><br><h2 style=";text-align:right;direction:rtl">  ุจุญุซ ุฃุฐูู </h2><br>  ุนูู ุงูุฑุบู ูู ุฃู ุงูุฎูุงุฑุฒููุฉ ุชุฌุฏ ุฃูุตุฑ ูุณุงุฑ ุ ุฅูุง ุฃููุง ุชูุถู ุงููุซูุฑ ูู ุงูููุช ูู ุงุณุชูุดุงู ุงูููุงุท ุงูุชู ูู ุงููุงุถุญ ุฃููุง ูู ุชุตุจุญ ุฌุฒุกูุง ูู ูุฐุง ุงููุณุงุฑ.  ุนูู ุงูุฃูู ูู ุงููุงุถุญ ููุง.  ูุง ูููู ููุฎูุงุฑุฒููุฉ ุงููุธุฑ ุฅูู ุงูุฎุฑูุทุฉ ุ ูุง ูููููุง ุฑุคูุฉ ุฃู ุงูุจุญุซ ูู ุจุนุถ ุงูุงุชุฌุงูุงุช ุณูููู ุจูุง ูุนูู.  ุฅูู ููุถู ุงูุชุญุฑู ุนูู ุงูุทุฑู ุ ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃููุง ุชุชุฌู ูู ุงูุงุชุฌุงู ุงููุนุงูุณ ูู ููุทุฉ ุงูููุงูุฉ.  ูู ูู ุงููููู ุฃู ุชุฌุนู ุงูุจุญุซ ุฃูุซุฑ ุฐูุงุกุ <br><br>  ูู ุงูููุช ุงูุญุงูู ุ ุนูุฏ ุงุฎุชูุงุฑ ุงูุฎููุฉ ุงููุฑุงุฏ ูุนุงูุฌุชูุง ุจุนุฏ ุฐูู ุ ูุนุชุจุฑ ููุท ุงููุณุงูุฉ ูู ุงูุฎููุฉ ุฅูู ุงูุจุฏุงูุฉ.  ุฅุฐุง ุฃุฑุฏูุง ุฃู ูููู ุฃูุซุฑ ุฐูุงุกู ุ ููุฌุจ ุนูููุง ุฃูุถูุง ูุฑุงุนุงุฉ ุงููุณุงูุฉ ุฅูู ููุทุฉ ุงูููุงูุฉ.  ูุณูุก ุงูุญุธ ุ ูุง ูุนุฑูู ุจุนุฏ.  ูููู ูููููุง ุฅูุดุงุก ุชูุฏูุฑ ูููุณุงูุฉ ุงููุชุจููุฉ.  ุฅู ุฅุถุงูุฉ ูุฐุง ุงูุชูุฏูุฑ ุฅูู ุงููุณุงูุฉ ุฅูู ุงูุฎููุฉ ูุนุทููุง ููููุง ูุฅุฌูุงูู ุทูู ุงููุณุงุฑ ุงูุฐู ููุฑ ุนุจุฑ ูุฐู ุงูุฎููุฉ.  ุซู ูููููุง ุงุณุชุฎุฏุงูู ูุชุญุฏูุฏ ุฃููููุงุช ุนูููุงุช ุงูุจุญุซ ุนู ุงูุฎูุงูุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุจุญุซ ุนู ุงูุงุณุชุฏูุงู </h3><br>  ุนูุฏูุง ูุณุชุฎุฏู ุงูุชูุฏูุฑ ุฃู ุงูุชุฎููู ุจุฏูุงู ูู ุงูุจูุงูุงุช ุงููุนุฑููุฉ ุชูุงููุง ุ ูุณูู ุฐูู ุจุงุณุชุฎุฏุงู ุงุณุชุฏูุงู ุงูุจุญุซ.  ููุซู ูุฐุง ุงูุฅุฑุดุงุฏ ุฃูุถู ุชุฎููู ูููุณุงูุฉ ุงููุชุจููุฉ.  ูุฌุจ ุฃู ูุญุฏุฏ ูุฐู ุงููููุฉ ููู ุฎููุฉ ูุจุญุซ ุนููุง ุ ูุฐูู <code>HexCell</code> ุฎุงุตูุฉ ุนุฏุฏ ุตุญูุญ <code>HexCell</code> ููุง.  ูุณูุง ุจุญุงุฌุฉ ุฅูู ุฅุฌุฑุงุก ุชุณูุณู ููุง ุ ูุฐูู ุณุชููู ุฎุงุตูุฉ ููุงุณูุฉ ุฃุฎุฑู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SearchHeuristic { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br>  ููู ููุชุฑุถ ุงููุณุงูุฉ ุงููุชุจููุฉุ  ูู ุงูุญุงูุฉ ุงููุซุงููุฉ ุ ุณูููู ูุฏููุง ุทุฑูู ูุคุฏู ูุจุงุดุฑุฉ ุฅูู ููุทุฉ ุงูููุงูุฉ.  ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุฅู ุงููุณุงูุฉ ุชุณุงูู ุงููุณุงูุฉ ุบูุฑ ุงููุชุบูุฑุฉ ุจูู ุฅุญุฏุงุซูุงุช ูุฐู ุงูุฎููุฉ ูุงูุฎููุฉ ุงูููุงุฆูุฉ.  ุฏุนููุง ูุณุชููุฏ ูู ูุฐุง ูู ุงุณุชุฏูุงููุง. <br><br>  ูุธุฑูุง ูุฃู ุงูุงุณุชุฏูุงู ูุง ูุนุชูุฏ ุนูู ูุณุงุฑ ุณุจู ูุทุนู ุ ููู ุซุงุจุช ูู ุนูููุฉ ุงูุจุญุซ.  ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุญุณุงุจูุง ูุฑุฉ ูุงุญุฏุฉ ููุท ุนูุฏูุง ุชุถูู <code>HexGrid.Search</code> ุฎููุฉ ุฅูู ุงูุญุฏ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.Distance == <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue) { neighbor.Distance = distance; neighbor.PathFrom = current; neighbor.SearchHeuristic = neighbor.coordinates.DistanceTo(toCell.coordinates); frontier.Add(neighbor); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุฃููููุฉ ุงูุจุญุซ </h3><br>  ูู ุงูุขู ูุตุงุนุฏูุง ุ ุณูุญุฏุฏ ุฃููููุฉ ุงูุจุญุซ ุจูุงุกู ุนูู ุงููุณุงูุฉ ุฅูู ุงูุฎููุฉ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุงุณุชุฏูุงู.  ุฏุนูุง ูุถูู ุฎุงุตูุฉ ููุฐู ุงููููุฉ ูู <code>HexCell</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SearchPriority { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> distance + SearchHeuristic; } }</code> </pre> <br>  ููู ูุนูู ูุฐุง ุ ูู <code>HexGrid.Search</code> ุจุญูุซ ูุณุชุฎุฏู ูุฐู ุงูุฎุงุตูุฉ ููุฑุฒ ุงูุญุฏูุฏ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> frontier.Sort( (x, y) =&gt; x.SearchPriority.CompareTo(y.SearchPriority) );</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b58/a22/c9a/b58a22c9a65a2088309a46c6cbc2d102.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b44/0a3/c0a/b440a3c0aa42dc771ba3a7a0948c835f.png"></div><br>  <i>ุงูุจุญุซ ุจุฏูู ุงุณุชุฏูุงู ูุจุงุณุชุฎุฏุงู ุงูุงุณุชุฏูุงู</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุงุฑุดุงุฏู ุตุงูุญ </h3><br>  ุจูุถู ุฃููููุงุช ุงูุจุญุซ ุงูุฌุฏูุฏุฉ ุ ุณูุฒูุฑ ุนุฏุฏูุง ุฃูู ูู ุงูุฎูุงูุง ูุชูุฌุฉ ูุฐูู.  ููุน ุฐูู ุ ุนูู ุฎุฑูุทุฉ ููุญุฏุฉ ุ ูุง ุชุฒุงู ุงูุฎูุงุฑุฒููุฉ ุชุนุงูุฌ ุงูุฎูุงูุง ุงูุชู ุชุณูุฑ ูู ุงูุงุชุฌุงู ุงูุฎุงุทุฆ.  ูุฐุง ูุฃูู ุ ุงูุชุฑุงุถููุง ุ ุชููู ุชูููุฉ ูู ุฎุทูุฉ ุฎุทูุฉ 5 ุ ููุถูู ุงูุชูุฌูู ููู ุฎุทูุฉ 1. ููุท ุ ุฃู ุฃู ุชุฃุซูุฑ ุงูุชูุฌูู ุบูุฑ ููู ููุบุงูุฉ. <br><br>  ุฅุฐุง ูุงูุช ุชูุงููู ููู ุฌููุน ุงูุจุทุงูุงุช ูู ููุณูุง ุ ููููููุง ุงุณุชุฎุฏุงู ููุณ ุงูุชูุงููู ุนูุฏ ุชุญุฏูุฏ ุงูุชูุฌูู.  ูู ุญุงูุชูุง ุ ุณูููู ูุฐุง ูู ุงูุงุณุชุฏูุงู ุงูุญุงูู ูุถุฑูุจูุง ูู 5. ููุฐุง ุณูููู ุจุดูู ูุจูุฑ ูู ุนุฏุฏ ุงูุฎูุงูุง ุงููุนุงูุฌุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9a4/6c7/ac3/9a46c7ac3c0df63797bfda1f143f9409.png"></div><br>  <i>ุงุณุชุฎุฏุงู ุงูุงุณุชุฏูุงู ร 5</i> <br><br>  ููุน ุฐูู ุ ุฅุฐุง ูุงูุช ููุงู ุทุฑู ุนูู ุงูุฎุฑูุทุฉ ุ ููููููุง ุงููุจุงูุบุฉ ูู ุชูุฏูุฑ ุงููุณุงูุฉ ุงููุชุจููุฉ.  ููุชูุฌุฉ ูุฐูู ุ ูููู ุฃู ุชุฑุชูุจ ุงูุฎูุงุฑุฒููุฉ ุฃุฎุทุงุก ูุฃู ุชูุดุฆ ูุณุงุฑูุง ููุณ ุฃูุตุฑ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/cd2/7bb/dc7/cd27bbdc7043804a8d2a21ac096a6409.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0af/017/2a2/0af0172a264285358f99b0ece93833a3.png"></div><br>  <i>ุงุณุชุฏูุงู ููุฑุท ูุตุงูุญ</i> <br><br>  ูุถูุงู ุงูุนุซูุฑ ุนูู ุฃูุตุฑ ูุณุงุฑ ุ ูุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ุนุฏู ุงููุจุงูุบุฉ ูู ุชูุฏูุฑ ุงููุณุงูุฉ ุงููุชุจููุฉ.  ููุณูู ูุฐุง ุงูููุฌ ุงูุงุณุชุฏูุงู ุงูุตุญูุญ.  ูุธุฑูุง ูุฃู ุงูุญุฏ ุงูุฃุฏูู ูุชูููุฉ ุงูููู ูู 1 ุ ูููุณ ูุฏููุง ุฎูุงุฑ ุณูู ุงุณุชุฎุฏุงู ููุณ ุงูุชูุงููู ูู ุชุญุฏูุฏ ูุฌุฑูุงุช ุงูุฃููุฑ. <br><br>  ุจุงููุนูู ุงูุฏููู ูููููุฉ ุ ูู ุงูุทุจูุนู ุชูุงููุง ุงุณุชุฎุฏุงู ุชูุงููู ุฃูู ุ ูููู ูุฐุง ุณูุฌุนู ุฌูุงุฒ ุงูุงุณุชูุดุงู ุฃุถุนู.  ุงูุญุฏ ุงูุฃุฏูู ูู ูุฌุฑูุงุช ุงูุฃููุฑ ุงูููููุฉ ูู ุตูุฑ ุ ููู ูุง ูุนุทููุง ููุท ุฎูุงุฑุฒููุฉ ุฏููุณุชุฑุง.  ูุน ุงุฑุดุงุฏู ุบูุฑ ุตูุฑู ุ ุชุณูู ุงูุฎูุงุฑุฒููุฉ A <sup>*</sup> (ุชูุทู "A star"). <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ุชุณูู A *ุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุชู ุงูุชุฑุงุญ ููุฑุฉ ุฅุถุงูุฉ ุงูุงุณุชุฏูุงู ุฅูู ุฎูุงุฑุฒููุฉ ุฏููุณุชุฑุง ูุฃูู ูุฑุฉ ูู ูุจู ูููุฒ ูููุณูู.  ุณูู ูุณุฎุชู A1.  ุฌุงุก ุจูุฑุชุฑุงู ุฑุงูุงุฆูู ูู ููุช ูุงุญู ุจุฃูุถู ูุณุฎุฉ ุฃุทูู ุนูููุง ุงุณู A2.  ุซู ุฃุซุจุช ุจูุชุฑ ูุงุฑุช ุฃูู ุจุงุณุชุฎุฏุงู A2 ุงูุชุฌุฑูุจู ุงูุฌูุฏ ูู ุงูุฃูุซู ุ ุฃู ุฃูู ูุง ูููู ุฃู ูููู ููุงู ุฅุตุฏุงุฑ ุฃูุถู.  ุฃุฌุจุฑู ูุฐุง ุนูู ุงุณุชุฏุนุงุก ุงูุฎูุงุฑุฒููุฉ A <sup>*</sup> ูุฅุธูุงุฑ ุฃูู ูุง ูููู ุชุญุณูููุง ุ ุฃู ูู ุชุธูุฑ A3 ุฃู A4.  ูุฐุง ุ ูุนู ุ ุฎูุงุฑุฒููุฉ A <sup>*</sup> ูู ุฃูุถู ูุง ูููู ุฃู ูุญุตู ุนููู ุ ููููุง ุฌูุฏุฉ ูุซู ุงุณุชุฏูุงููุง. </div></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุญุฒูุฉ ุงููุญุฏุฉ</a> <br><br><h2 style=";text-align:right;direction:rtl">  ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฃููููุฉ </h2><br>  ุนูู ุงูุฑุบู ูู ุฃู A <sup>*</sup> ุฎูุงุฑุฒููุฉ ุฌูุฏุฉ ุ ุฅูุง ุฃู ุชุทุจูููุง ููุณ ูุนุงููุง ุฌุฏูุง ุ ูุฃููุง ูุณุชุฎุฏู ูุงุฆูุฉ ูุชุฎุฒูู ุงูุญุฏูุฏ ุ ูุงูุชู ูุฌุจ ูุฑุฒูุง ุนูุฏ ูู ุชูุฑุงุฑ.  ููุง ุฐูุฑูุง ูู ุงูุฌุฒุก ุงูุณุงุจู ุ ูุญู ุจุญุงุฌุฉ ุฅูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุฐุงุช ุฃููููุฉ ุ ูููู ุชูููุฐูุง ุงูููุงุณู ุบูุฑ ููุฌูุฏ.  ูุฐูู ุ ุฏุนูุง ููุดุฆูุง ุจููุณู. <br><br>  ูุฌุจ ุฃู ูุฏุนู ุฏูุฑูุง ุชุดุบูู ุงูุฅุนุฏุงุฏ ูุงูุงุณุชุจุนุงุฏ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจูุงุกู ุนูู ุงูุฃููููุฉ.  ูุฌุจ ุฃู ูุฏุนู ุฃูุถูุง ุชุบููุฑ ุฃููููุฉ ุงูุฎููุฉ ุงูููุฌูุฏุฉ ุจุงููุนู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ.  ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ูููู ุจุชุทุจููู ุ ููุง ูููู ูู ุงูุจุญุซ ุนู ุงููุฑุฒ ูุงูุฐุงูุฑุฉ ุงููุฎุตุตุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฌุจ ุฃู ุชุธู ุจุณูุทุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุงูุฎุงุตุฉ ุจู </h3><br>  ูู <code>HexCellPriorityQueue</code> ูุฆุฉ <code>HexCellPriorityQueue</code> ุฌุฏูุฏุฉ ุจุงูุทุฑู ุงูุดุงุฆุนุฉ ุงููุทููุจุฉ.  ูุณุชุฎุฏู ูุงุฆูุฉ ุจุณูุทุฉ ูุชุชุจุน ูุญุชููุงุช ูุงุฆูุฉ ุงูุงูุชุธุงุฑ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูุถูู ุทุฑููุฉ <code>Clear</code> ุฅูููุง ููุณุญ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจุญูุซ ูููู ุงุณุชุฎุฏุงููุง ุจุดูู ูุชูุฑุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HexCellPriorityQueue</span></span> { List&lt;HexCell&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;HexCell&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enqueue</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dequeue</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Change</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clear</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { list.Clear(); } }</code> </pre> <br>  ูููู ุจุชุฎุฒูู ุฃููููุงุช ุงูุฎููุฉ ูู ุงูุฎูุงูุง ููุณูุง.  ุฃู ุ ูุจู ุฅุถุงูุฉ ุฎููุฉ ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ูุฌุจ ุชุนููู ุฃููููุชูุง.  ูููู ูู ุญุงูุฉ ุชุบููุฑ ุงูุฃููููุฉ ุ ูุฏ ูููู ูู ุงููููุฏ ูุนุฑูุฉ ูุง ูู ุงูุฃููููุฉ ุงููุฏููุฉ.  ูุฐุง ุฏุนูุง ูุถูู ูุฐุง ุฅูู <code>Change</code> ููุนููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Change</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> oldPriority</span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br>  ูู ุงููููุฏ ุฃูุถูุง ูุนุฑูุฉ ุนุฏุฏ ุงูุฎูุงูุง ุงูููุฌูุฏุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ูุฐูู ุฏุนูุง ูุถูู ุฎุงุตูุฉ <code>Count</code> ููุฐุง.  ูุง ุนููู ุณูู ุงุณุชุฎุฏุงู ุงูุญูู ุงูุฐู ุณูููู ูู ุฃุฌูู ุจุฒูุงุฏุฉ ูููุต ุงูุชูุงุธุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Count { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> count; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enqueue</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { count += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dequeue</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { count -= <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clear</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { list.Clear(); count = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุฃุถู ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ </h3><br>  ุนูุฏ ุฅุถุงูุฉ ุฎููุฉ ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ุฏุนูุง ุฃููุงู ูุณุชุฎุฏู ุฃููููุชูุง ูููุฑุณ ุ ููุชุนุงูู ูุน ุงููุงุฆูุฉ ููุตูููุฉ ุจุณูุทุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enqueue</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { count += <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> priority = cell.SearchPriority; list[priority] = cell; }</code> </pre> <br>  ููุน ุฐูู ุ ูุฐุง ูุง ูุนูู ุฅูุง ุฅุฐุง ูุงูุช ุงููุงุฆูุฉ ุทูููุฉ ุจูุง ูููู ุ ูุฅูุง ูุฅููุง ุณูู ูุชุฌุงูุฒ ุงูุญุฏูุฏ.  ููููู ุชุฌูุจ ุฐูู ุนู ุทุฑูู ุฅุถุงูุฉ ุนูุงุตุฑ ูุงุฑุบุฉ ุฅูู ุงููุงุฆูุฉ ุญุชู ุชุตู ุฅูู ุงูุทูู ุงููุทููุจ.  ูุง ุชุดูุฑ ูุฐู ุงูุนูุงุตุฑ ุงููุงุฑุบุฉ ุฅูู ุงูุฎููุฉ ุ ูุฐุง ููููู ุฅูุดุงุคูุง ุนู ุทุฑูู ุฅุถุงูุฉ ูููุฉ <code>null</code> ุฅูู ุงููุงุฆูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> priority = cell.SearchPriority; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (priority &gt;= list.Count) { list.Add(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); } list[priority] = cell;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e77/000/fec/e77000feca5c0bfdb769062356ca9935.png"></div><br>  <i>ูุงุฆูุฉ ุจุงูุซููุจ</i> <br><br>  ูููู ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุฎุฒู ุจูุง ุฎููุฉ ูุงุญุฏุฉ ููุท ููู ุฃููููุฉ ุ ูุนูู ุงูุฃุฑุฌุญ ุณูููู ููุงู ุฎููุฉ ูุงุญุฏุฉ.  ูุชุชุจุน ุฌููุน ุงูุฎูุงูุง ุจุงูุฃููููุฉ ููุณูุง ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ูุงุฆูุฉ ุฃุฎุฑู.  ุนูู ุงูุฑุบู ูู ุฃูู ูููููุง ุงุณุชุฎุฏุงู ูุงุฆูุฉ ุญููููุฉ ููู ุฃููููุฉ ุ ูููููุง ุฃูุถูุง ุฅุถุงูุฉ ุฎุงุตูุฉ ุฅูู <code>HexCell</code> ูุนูุง.  ูุฐุง ูุณูุญ ููุง ุจุฅูุดุงุก ุณูุณูุฉ ูู ุงูุฎูุงูุง ุชุณูู ูุงุฆูุฉ ูุฑุชุจุทุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexCell NextWithSamePriority { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br>  ูุฅูุดุงุก ุณูุณูุฉ ุ ุงุณูุญ ูู <code>HexCellPriorityQueue.Enqueue</code> ุงูุฎููุฉ ุงููุถุงูุฉ ุญุฏูุซูุง ููุฅุดุงุฑุฉ ุฅูู ุงููููุฉ ุงูุญุงููุฉ ุจุงูุฃููููุฉ ููุณูุง ุ ูุจู ุญุฐููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> cell.NextWithSamePriority = list[priority]; list[priority] = cell;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/45b/082/87c/45b08287cf76c4636d7a673869aa39b5.png"></div><br>  <i>ูุงุฆูุฉ ุงูููุงุฆู ุงููุฑุชุจุทุฉ</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุฅุฒุงูุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ </h3><br>  ููุญุตูู ุนูู ุฎููุฉ ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฃููููุฉ ุ ูุญุชุงุฌ ุฅูู ุงููุตูู ุฅูู ุงููุงุฆูุฉ ุงููุฑุชุจุทุฉ ุจุฃูู ููุฑุณ ุบูุฑ ูุงุฑุบ.  ูุฐูู ุ ุณูู ูุชุฌูู ูู ุงููุงุฆูุฉ ูู ุญููุฉ ุญุชู ูุฌุฏูุง.  ุฅุฐุง ูู ูุฌุฏ ุ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุงุฑุบุฉ <code>null</code> . <br><br>  ูู ุงูุณูุณูุฉ ุงูููุฌูุฏุฉ ุ ูููููุง ุฅุฑุฌุงุน ุฃู ุฎููุฉ ุ ูุฃููู ุฌููุนุง ูุฏููู ููุณ ุงูุฃููููุฉ.  ุฃุณูู ุทุฑููุฉ ูู ุฅุฑุฌุงุน ุงูุฎููุฉ ูู ุจุฏุงูุฉ ุงูุณูุณูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dequeue</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { count -= <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; list.Count; i++) { HexCell cell = list[i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cell; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br>  ููุญูุงุธ ุนูู ุงูุงุฑุชุจุงุท ุจุงูุณูุณูุฉ ุงููุชุจููุฉ ุ ุงุณุชุฎุฏู ุงูุฎููุฉ ุงูุชุงููุฉ ุจููุณ ุฃููููุฉ ุงูุจุฏุงูุฉ ุงูุฌุฏูุฏุฉ.  ุฅุฐุง ูุงูุช ููุงู ุฎููุฉ ูุงุญุฏุฉ ููุท ุนูู ูุณุชูู ุงูุฃููููุฉ ูุฐุง ุ ูุณูุตุจุญ ุงูุนูุตุฑ <code>null</code> ูุณูุชู ุชุฎุทูู ูู ุงููุณุชูุจู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { list[i] = cell.NextWithSamePriority; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cell; }</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุชุชุจุน ุงูุญุฏ ุงูุฃุฏูู </h3><br>  ูุนูู ูุฐุง ุงูููุฌ ุ ูููู ูุชูุฑุฑ ูู ุฎูุงู ุงููุงุฆูุฉ ูู ูู ูุฑุฉ ูุชู ุชููู ุฎููุฉ.  ูุง ูููููุง ุชุฌูุจ ุงูุนุซูุฑ ุนูู ุฃุตุบุฑ ููุฑุณ ุบูุฑ ูุงุฑุบ ุ ูููู ููุณ ูุทููุจูุง ููุง ุงูุจุฏุก ูู ุงูุตูุฑ ูู ูู ูุฑุฉ.  ุจุฏูุงู ูู ุฐูู ุ ูููููุง ุชุชุจุน ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุฃููููุฉ ูุจุฏุก ุงูุจุญุซ ุจู.  ูู ุงูุจุฏุงูุฉ ุ ุงูุญุฏ ุงูุฃุฏูู ูุณุงูู ุจุดูู ุฃุณุงุณู ุงููุงููุงูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> minimum = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clear</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { list.Clear(); count = <span class="hljs-number"><span class="hljs-number">0</span></span>; minimum = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue; }</code> </pre> <br>  ุนูุฏ ุฅุถุงูุฉ ุฎููุฉ ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ูููู ุจุชุบููุฑ ุงูุญุฏ ุงูุฃุฏูู ุญุณุจ ุงูุถุฑูุฑุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enqueue</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { count += <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> priority = cell.SearchPriority; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (priority &lt; minimum) { minimum = priority; } โฆ }</code> </pre> <br>  ูุนูุฏ ุงูุงูุณุญุงุจ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ูุณุชุฎุฏู ุงููุงุฆูุฉ ุนูู ุงูุฃูู ููุชูุฑุงุฑ ุ ููุง ูุจุฏุฃ ูู ููุทุฉ ุงูุตูุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dequeue</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { count -= <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (; minimum &lt; list.Count; minimum++) { HexCell cell = list[minimum]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { list[minimum] = cell.NextWithSamePriority; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cell; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br>  ูุฐุง ูููู ุจุดูู ูุจูุฑ ูู ููุฏุงุฑ ุงูููุช ุงููุณุชุบุฑู ููุชุฌุงูุฒ ูู ุญููุฉ ูุงุฆูุฉ ุงูุฃููููุงุช. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุบููุฑ ุงูุฃููููุงุช </h3><br>  ุนูุฏ ุชุบููุฑ ุฃููููุฉ ุงูุฎููุฉ ุ ูุฌุจ ุฅุฒุงูุชูุง ูู ุงููุงุฆูุฉ ุงููุฑุชุจุทุฉ ุงูุชู ุชุนุฏ ุฌุฒุกูุง ูููุง.  ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ุงุชุจุงุน ุงูุณูุณูุฉ ุญุชู ูุฌุฏูุง. <br><br>  ููุจุฏุฃ ุจุฅุนูุงู ุฃู ุฑุฃุณ ูุงุฆูุฉ ุงูุฃููููุงุช ุงููุฏููุฉ ุณูููู ุงูุฎููุฉ ุงูุญุงููุฉ ุ ูุณูู ูุชุชุจุน ุฃูุถูุง ุงูุฎููุฉ ุงูุชุงููุฉ.  ูููููุง ุฃุฎุฐ ุงูุฎููุฉ ุงูุชุงููุฉ ุนูู ุงูููุฑ ุ ูุฃููุง ูุนูู ุฃู ููุงู ููุฑุณูุง ูุงุญุฏูุง ุนูู ุงูุฃูู ูู ุฎูุงู ูุฐุง ุงูููุฑุณ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Change</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> oldPriority</span></span></span><span class="hljs-function">)</span></span> { HexCell current = list[oldPriority]; HexCell next = current.NextWithSamePriority; }</code> </pre> <br>  ุฅุฐุง ูุงูุช ุงูุฎููุฉ ุงูุญุงููุฉ ุฎููุฉ ูุชุบูุฑุฉ ุ ููุฐู ูู ุฎููุฉ ุงูุฑุฃุณ ููููููุง ูุทุนูุง ููุง ูู ููุง ูุฏ ุณุญุจูุงูุง ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexCell current = list[oldPriority]; HexCell next = current.NextWithSamePriority; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current == cell) { list[oldPriority] = next; }</code> </pre> <br>  ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุงุชุจุงุน ุงูุณูุณูุฉ ุญุชู ูููู ูู ุงูุฎููุฉ ุฃูุงู ุงูุฎููุฉ ุงููุชุบูุฑุฉ.  ูุญุชูู ุนูู ุงุฑุชุจุงุท ุฅูู ุงูุฎููุฉ ุงูุชู ุชู ุชุนุฏูููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current == cell) { list[oldPriority] = next; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (next != cell) { current = next; next = current.NextWithSamePriority; } }</code> </pre> <br>  ูู ูุฐู ุงููุฑุญูุฉ ุ ูููููุง ุฅุฒุงูุฉ ุงูุฎููุฉ ุงูุชู ุชู ุชุบููุฑูุง ูู ุงููุงุฆูุฉ ุงููุฑุชุจุทุฉ ุ ูุชุฎุทููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (next != cell) { current = next; next = current.NextWithSamePriority; } current.NextWithSamePriority = cell.NextWithSamePriority;</code> </pre> <br>  ุจุนุฏ ุญุฐู ุฎููุฉ ุ ุชุญุชุงุฌ ุฅูู ุฅุถุงูุชูุง ูุฑุฉ ุฃุฎุฑู ุจุญูุซ ุชุธูุฑ ูู ูุงุฆูุฉ ุฃููููุชูุง ุงูุฌุฏูุฏุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Change</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> oldPriority</span></span></span><span class="hljs-function">)</span></span> { โฆ Enqueue(cell); }</code> </pre> <br>  <code>Enqueue</code> ุทุฑููุฉ <code>Enqueue</code> ูู ุงูุนุฏุงุฏ ุ ูููู ูู ุงููุงูุน ูุญู ูุง ูุถูู ุฎููุฉ ุฌุฏูุฏุฉ.  ูุฐูู ุ ูู ุฃุฌู ุงูุชุนููุถ ุนู ุฐูู ุ ุณูุชุนูู ุนูููุง ุฅููุงุต ุงูุนุฏุงุฏ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Enqueue(cell); count -= <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ </h3><br>  ุงูุขู ูููููุง ุงูุงุณุชูุงุฏุฉ ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฃููููุฉ ูุฏููุง ูู <code>HexGrid</code> .  ูููู ุงูููุงู ุจุฐูู ุจูุซูู ูุงุญุฏ ุ ูููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงูู ูุฌููุน ุนูููุงุช ุงูุจุญุซ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexCellPriorityQueue searchFrontier; โฆ <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFrontier == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { searchFrontier = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HexCellPriorityQueue(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { searchFrontier.Clear(); } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุจุฏุก ุงูุญููุฉ ุ </font></font><code>Search</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃููุงู ุฅุถุงูุฉ </font><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ </font></font><code>fromCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุจุฏุฃ ูู ุชูุฑุงุฑ ูุน ุฅุฎุฑุงุฌ ุงูุฎููุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. </font><font style="vertical-align: inherit;">ุณูุคุฏู ูุฐุง ุฅูู ุงุณุชุจุฏุงู ุฑูุฒ ุงูุญุฏูุฏ ุงููุฏูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> WaitForSeconds delay = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WaitForSeconds(<span class="hljs-number"><span class="hljs-number">1</span></span> / <span class="hljs-number"><span class="hljs-number">60f</span></span>); <span class="hljs-comment"><span class="hljs-comment">// List&lt;HexCell&gt; frontier = new List&lt;HexCell&gt;(); fromCell.Distance = 0; // frontier.Add(fromCell); searchFrontier.Enqueue(fromCell); while (searchFrontier.Count &gt; 0) { yield return delay; HexCell current = searchFrontier.Dequeue(); // frontier.RemoveAt(0); โฆ }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุชุบููุฑ ุงูููุฏ ุจุญูุซ ูุถูู ููุบูุฑ ุงูุฌุงุฑ. </font><font style="vertical-align: inherit;">ูุจู ุงูุชุบููุฑ ุณูุชุฐูุฑ ุงูุฃููููุฉ ุงููุฏููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.Distance == <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue) { neighbor.Distance = distance; neighbor.PathFrom = current; neighbor.SearchHeuristic = neighbor.coordinates.DistanceTo(toCell.coordinates); <span class="hljs-comment"><span class="hljs-comment">// frontier.Add(neighbor); searchFrontier.Enqueue(neighbor); } else if (distance &lt; neighbor.Distance) { int oldPriority = neighbor.SearchPriority; neighbor.Distance = distance; neighbor.PathFrom = current; searchFrontier.Change(neighbor, oldPriority); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ูุนุฏ ุจุญุงุฌุฉ ุฅูู ูุฑุฒ ุงูุญุฏูุฏ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// frontier.Sort( // (x, y) =&gt; x.SearchPriority.CompareTo(y.SearchPriority) // );</span></span></code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุญุซ ุจุงุณุชุฎุฏุงู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฃููููุฉ</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุง ุฐูุฑูุง ุณุงุจููุง ุ ูุนุชูุฏ ุฃูุตุฑ ูุณุงุฑ ูุชู ุงูุนุซูุฑ ุนููู ุนูู ุชุฑุชูุจ ูุนุงูุฌุฉ ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูููู ุฏูุฑูุง ุจุฅูุดุงุก ุชุฑุชูุจ ูุฎุชูู ุนู ุชุฑุชูุจ ุงููุงุฆูุฉ ุงููุตููุฉ ุ ุญุชู ูุชููู ูู ุงูุญุตูู ุนูู ุทุฑู ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูุถูู ููุฒูู ูู ุฑุฃุณ ุงููุงุฆูุฉ ุงููุฑุชุจุทุฉ ููู ุฃููููุฉ ุ ูุฅููุง ุชุดุจู ุงูููุฏุณุงุช ุฃูุซุฑ ูู ููุงุฆู ุงูุงูุชุธุงุฑ. </font><font style="vertical-align: inherit;">ุชุชู ูุนุงูุฌุฉ ุงูุฎูุงูุง ุงููุถุงูุฉ ุฃุฎูุฑูุง ุฃููุงู. </font><font style="vertical-align: inherit;">ูู ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ ููุฐุง ุงูููุฌ ุฃู ุงูุฎูุงุฑุฒููุฉ ุนุฑุถุฉ ููุชุนุฑุฌ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฒุฏุงุฏ ุฃูุถูุง ุงุญุชูุงู ุงููุณุงุฑุงุช ุงููุชุนุฑุฌุฉ. </font><font style="vertical-align: inherit;">ูุญุณู ุงูุญุธ ุ ุนุงุฏุฉ ูุง ุชุจุฏู ูุฐู ุงููุณุงุฑุงุช ุฃูุถู ุ ูุฐุง ูุฅู ูุฐุง ุงูุชุฃุซูุฑ ุงูุฌุงูุจู ูู ุตุงูุญูุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b44/0a3/c0a/b440a3c0aa42dc771ba3a7a0948c835f.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/908/1e9/cc5/9081e9cc5b0ea1d6f4309b6221eab1ac.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ูุฑุชุจุฉ ููุงุฆูุฉ ุงูุชุธุงุฑ ูุน ุฃููููุฉ </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฒุก 17: ุญุฑูุฉ ูุญุฏูุฏุฉ </font></font></h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌุฏ ุทุฑููุง ููุญุฑูุฉ ุฎุทูุฉ ุจุฎุทูุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุนุฑุถ ุงููุณุงุฑ ุนูู ุงูููุฑ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุจุฅูุดุงุก ุจุญุซ ุฃูุซุฑ ูุนุงููุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญู ูุชุตูุฑ ุงููุณุงุฑ ููุท. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุฐุง ุงูุฌุฒุก ุ ุณููุณู ุงูุญุฑูุฉ ุฅูู ุญุฑูุงุช ููุณุฑุน ุงูุจุญุซ ูุฏุฑ ุงูุฅููุงู. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c4d/572/9cc/c4d5729ccbf9cc994b7c8328950e6f5b.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณูุฑ ูู ุนุฏุฉ ุชุญุฑูุงุช</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุฑูุฉ ุฎุทูุฉ ุจุฎุทูุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูุนุงุจ ุงูุฅุณุชุฑุงุชูุฌูุฉ ุงูุชู ุชุณุชุฎุฏู ุดุจูุงุช ุณุฏุงุณูุฉ ุบุงูุจูุง ูุง ุชููู ุจุฏูุฑูุง ูุงุฆููุง ุนูู ุงูุฃุฏูุงุฑ. </font><font style="vertical-align: inherit;">ุชุชููุฒ ุงููุญุฏุงุช ุงูุชู ุชุชุญุฑู ุนูู ุงูุฎุฑูุทุฉ ุจุณุฑุนุฉ ูุญุฏูุฏุฉ ุ ููุง ูุญุฏ ูู ุงููุณุงูุฉ ุงูููุทูุนุฉ ูู ุฏูุฑุฉ ูุงุญุฏุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl">  ุงูุณุฑุนุฉ </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุฏูู ุฏุนู ููุญุฑูุฉ ุงููุญุฏูุฏุฉ ุ ูุถูู </font></font><code>HexGrid.FindPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู </font></font><code>HexGrid.Search</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุนููุฉ ุงูุตุญูุญุฉ ููุฏุฎููุง </font></font><code>speed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุญุฏุฏ ูุทุงู ุงูุญุฑูุฉ ูุญุฑูุฉ ูุงุญุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed</span></span></span><span class="hljs-function">)</span></span> { StopAllCoroutines(); StartCoroutine(Search(fromCell, toCell, speed)); } <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed</span></span></span><span class="hljs-function">)</span></span> { โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงุน ูุฎุชููุฉ ูู ุงููุญุฏุงุช ูู ุงููุนุจุฉ ุชุณุชุฎุฏู ุณุฑุนุงุช ูุฎุชููุฉ. </font><font style="vertical-align: inherit;">ุงููุฑุณุงู ุณุฑูุน ุ ุงููุดุงุฉ ุจุทูุฆุฉ ุ ูููุฐุง. </font><font style="vertical-align: inherit;">ููุณ ูุฏููุง ูุญุฏุงุช ุญุชู ุงูุขู ุ ูุฐูู ุณูุณุชุฎุฏู ุงูุขู ุณุฑุนุฉ ุซุงุจุชุฉ. </font><font style="vertical-align: inherit;">ููุฃุฎุฐ ูููุฉ 24. ูุฐู ูููุฉ ูุจูุฑุฉ ุฅูู ุญุฏ ูุง ุ ููุง ูููู ุชูุณูููุง ุนูู 5 (ุงูุชูููุฉ ุงูุงูุชุฑุงุถูุฉ ููุงูุชูุงู). </font><font style="vertical-align: inherit;">ุฅุถุงูุฉ ุญุฌุฉ ู </font></font><code>FindPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>HexMapEditor.HandleInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุฑุนุฉ ุซุงุจุชุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (editMode) { EditCells(currentCell); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( Input.GetKey(KeyCode.LeftShift) &amp;&amp; searchToCell != currentCell ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFromCell) { searchFromCell.DisableHighlight(); } searchFromCell = currentCell; searchFromCell.EnableHighlight(Color.blue); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchToCell) { hexGrid.FindPath(searchFromCell, searchToCell, <span class="hljs-number"><span class="hljs-number">24</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFromCell &amp;&amp; searchFromCell != currentCell) { searchToCell = currentCell; hexGrid.FindPath(searchFromCell, searchToCell, <span class="hljs-number"><span class="hljs-number">24</span></span>); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุญุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุชุชุจุน ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ ููุชุญุฑู ุนูู ุทูู ุงููุณุงุฑ ุ ูุญุชุงุฌ ุงูุขู ุฃูุถูุง ุฅูู ูุนุฑูุฉ ุนุฏุฏ ุงูุชุญุฑูุงุช ุงูุชู ุณุชุณุชุบุฑููุง ูููุถู ูุฏููุง. ููููุง ูุณูุง ุจุญุงุฌุฉ ุฅูู ุชุฎุฒูู ูุฐู ุงููุนูููุงุช ูู ูู ุฎููุฉ. ูููู ุงูุญุตูู ุนูููุง ุจูุณูุฉ ุงููุณุงูุฉ ุงูููุทูุนุฉ ุจุงูุณุฑุนุฉ. ูุธุฑูุง ูุฃู ูุฐู ุฃุนุฏุงุฏ ุตุญูุญุฉ ุ ูุณูู ูุณุชุฎุฏู ุงููุณูุฉ ุงูุตุญูุญุฉ. ุฃู ุฃู ุงููุณุงูุงุช ุงูุฅุฌูุงููุฉ ุงูุชู ูุง ุชุฒูุฏ ุนู 24 ุชุชูุงูู ูุน ุงูุฏูุฑุฉ ุงูุชุฏุฑูุจูุฉ 0. ููุฐุง ูุนูู ุฃูู ูููู ุฅููุงู ุงููุณุงุฑ ุจุงููุงูู ูู ุงูุฏูุฑุฉ ุงูุญุงููุฉ. ุฅุฐุง ูุงูุช ููุทุฉ ุงูููุงูุฉ ุนูู ูุณุงูุฉ 30 ุ ููุฌุจ ุฃู ูููู ูุฐุง ูู 1. ูููุตูู ุฅูู ููุทุฉ ุงูููุงูุฉ ุ ุณูุชุนูู ุนูู ุงููุญุฏุฉ ูุถุงุก ูู ุญุฑูุชูุง ูู ุงูููุนุทู ุงูุญุงูู ููู ุฌุฒุก ูู ุงูููุนุทู ุงูุชุงูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนููุง ุชุญุฏูุฏ ูุณุงุฑ ุงูุฎููุฉ ุงูุญุงููุฉ ูุฌููุน ุฌูุฑุงููุง ูู ุงูุฏุงุฎู</font></font><code>HexGrid.Search</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููู ุญุณุงุจ ูุณุงุฑ ุงูุฎููุฉ ุงูุญุงููุฉ ูุฑุฉ ูุงุญุฏุฉ ููุท ุ ูุจุงุดุฑุฉ ูุจู ุงูุฏูุฑุงู ูู ุฏูุฑุฉ ุงูุฌูุงุฑ. </font><font style="vertical-align: inherit;">ูููู ุชุญุฏูุฏ ุชุญุฑู ุงูุฌุงุฑ ุจูุฌุฑุฏ ุฃู ูุฌุฏ ุงููุณุงูุฉ ุฅููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> currentTurn = current.Distance / speed; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { โฆ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> distance = current.Distance; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current.HasRoadThroughEdge(d)) { distance += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current.Walled != neighbor.Walled) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { distance += edgeType == HexEdgeType.Flat ? <span class="hljs-number"><span class="hljs-number">5</span></span> : <span class="hljs-number"><span class="hljs-number">10</span></span>; distance += neighbor.UrbanLevel + neighbor.FarmLevel + neighbor.PlantLevel; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> turn = distance / speed; โฆ }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุญุฑูุฉ ุงูุถุงุฆุนุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุญุฑูุฉ ุงูุฌุงุฑ ุฃูุจุฑ ูู ุงูุฎุทูุฉ ุงูุญุงููุฉ ุ ูุฅููุง ุนุจุฑูุง ุญุฏูุฏ ุงูุญุฑูุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูุญุฑูุฉ ุงููุงุฒูุฉ ูููุตูู ุฅูู ุงูุฌุงุฑ 1 ุ ูุฅู ูู ุดูุก ุนูู ูุง ูุฑุงู. </font><font style="vertical-align: inherit;">ูููู ุฅุฐุง ูุงู ุงูุงูุชูุงู ุฅูู ุงูุฎููุฉ ุงูุชุงููุฉ ุฃูุซุฑ ุชูููุฉ ุ ูุตุจุญ ูู ุดูุก ุฃูุซุฑ ุชุนููุฏูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุชุฑุถ ุฃููุง ูุชุญุฑู ุนูู ุทูู ุฎุฑูุทุฉ ูุชุฌุงูุณุฉ ุ ุฃู ูููุตูู ุฅูู ูู ุฎููุฉ ุ ุชุญุชุงุฌ ุฅูู 5 ูุญุฏุงุช ููุญุฑูุฉ. </font><font style="vertical-align: inherit;">ุณุฑุนุชูุง ูู 24. ุจุนุฏ ุฃุฑุจุน ุฎุทูุงุช ุ ุฃููููุง 20 ูุญุฏุฉ ูู ูุฎุฒูููุง ูู ุงูุญุฑูุฉ ุ ูุจููุช 4 ูุญุฏุงุช. ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ ุ ููุงู ุญุงุฌุฉ ุฅูู 5 ูุญุฏุงุช ูุฑุฉ ุฃุฎุฑู ุ ุฃู ุฃูุซุฑ ูู ุงููุญุฏุงุช ุงููุชุงุญุฉ. </font><font style="vertical-align: inherit;">ูุงุฐุง ุนูููุง ุฃู ููุนู ูู ูุฐู ุงููุฑุญูุฉุ</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ุทุฑููุชุงู ููุฐู ุงูุญุงูุฉ. ุงูุฃูู ูู ุงูุณูุงุญ ูููุญุฏุฉ ุจุฏุฎูู ุงูุฎููุฉ ุงูุฎุงูุณุฉ ูู ุงูููุนุทู ุงูุญุงูู ุ ุญุชู ูู ูู ููู ูุฏููุง ูุง ูููู ูู ุงูุญุฑูุฉ. ูุงูุซุงูู ูู ุญุธุฑ ุงูุญุฑูุฉ ุฃุซูุงุก ุงูุญุฑูุฉ ุงูุญุงููุฉ ุ ุฃู ุฃูู ูุง ูููู ุงุณุชุฎุฏุงู ููุงุท ุงูุญุฑูุฉ ุงููุชุจููุฉ ูุณุชููุฏ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุชูุฏ ุงุฎุชูุงุฑ ุงูุฎูุงุฑ ุนูู ุงููุนุจุฉ. ุจุดูู ุนุงู ุ ูุนุชุจุฑ ุงูุฃุณููุจ ุงูุฃูู ุฃูุซุฑ ููุงุกูุฉ ููุฃูุนุงุจ ุงูุชู ูููู ูููุญุฏุงุช ูููุง ุงูุชุญุฑู ุจุถุน ุฎุทูุงุช ููุท ููู ุฏูุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุฃูุนุงุจ ูู ุณูุณูุฉ Civilization. ููุฐุง ูุถูู ุฃู ุงููุญุฏุงุช ูููููุง ุฏุงุฆููุง ุชุญุฑูู ุฎููุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู ููู ุฏูุฑ. ุฅุฐุง ูุงูุช ุงููุญุฏุงุช ูููููุง ุชุญุฑูู ุงูุนุฏูุฏ ูู ุงูุฎูุงูุง ูู ูู ุฏูุฑ ุ ููุง ูู ุงูุญุงู ูู Age of Wonders ุฃู Battle for Wesnoth ุ ูุฅู ุงูุฎูุงุฑ ุงูุซุงูู ูู ุงูุฃูุถู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูุณุชุฎุฏู ุงูุณุฑุนุฉ 24 ุ ูููุฎุชุงุฑ ุงูุทุฑููุฉ ุงูุซุงููุฉ. </font><font style="vertical-align: inherit;">ููู ูุจุฏุฃ ุงูุนูู ุ ูุญุชุงุฌ ุฅูู ุนุฒู ุชูุงููู ุงูุฏุฎูู ุฅูู ุงูุฎููุฉ ุงูุชุงููุฉ ูุจู ุฅุถุงูุชูุง ุฅูู ุงููุณุงูุฉ ุงูุญุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// int distance = current.Distance; int moveCost; if (current.HasRoadThroughEdge(d)) { moveCost = 1; } else if (current.Walled != neighbor.Walled) { continue; } else { moveCost = edgeType == HexEdgeType.Flat ? 5 : 10; moveCost += neighbor.UrbanLevel + neighbor.FarmLevel + neighbor.PlantLevel; } int distance = current.Distance + moveCost; int turn = distance / speed;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุชุฌ ุนู ุฐูู ูุชูุฌุฉ ุงูุญุฑูุฉ ุ ูุฅููุง ุฃููุงู ูุณุชุฎุฏู ุฌููุน ููุงุท ุงูุญุฑูุฉ ูู ุงูุญุฑูุฉ ุงูุญุงููุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุงูููุงู ุจุฐูู ุจุจุณุงุทุฉ ุนู ุทุฑูู ุถุฑุจ ุงูุญุฑูุฉ ุจุงูุณุฑุนุฉ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูุถูู ุชูููุฉ ุงูููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> distance = current.Distance + moveCost; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> turn = distance / speed; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (turn &gt; currentTurn) { distance = turn * speed + moveCost; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุณูููู ุงูุฎุทูุฉ ุงูุฃููู ูู ุงูุฎููุฉ ุงูุฑุงุจุนุฉ ุจุฃุฑุจุน ููุงุท ุญุฑูุฉ ุบูุฑ ูุณุชุฎุฏูุฉ. </font><font style="vertical-align: inherit;">ุชุชู ุฅุถุงูุฉ ูุฐู ุงูููุงุท ุงูููููุฏุฉ ุฅูู ุชูุงููู ุงูุฎููุฉ ุงูุฎุงูุณุฉ ุ ูุฐุง ุชุตุจุญ ูุณุงูุฉ 29 ุ ูููุณ 25. ููุชูุฌุฉ ูุฐูู ุ ุชููู ุงููุณุงูุงุช ุฃูุจุฑ ูู ุฐู ูุจู. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูุงู ููุฎููุฉ ุงูุนุงุดุฑุฉ ูุณุงูุฉ 50. ูููู ุงูุขู ูููุตูู ุฅูููุง ุ ูุญุชุงุฌ ุฅูู ุนุจูุฑ ุญุฏูุฏ ุญุฑูุชูู ุ ูููุฏุงู 8 ููุงุท ููุญุฑูุฉ ุ ุฃู ุฃู ุงููุณุงูุฉ ุฅูููุง ุฃุตุจุญุช ุงูุขู 58.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ff3/7f4/1f1/ff37f41f11c85f7f759367fd2b33334d.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุทูู ูู ุงููุชููุน</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธุฑูุง ูุฃูู ูุชู ุฅุถุงูุฉ ููุงุท ุงูุญุฑูุฉ ุบูุฑ ุงููุณุชุฎุฏูุฉ ุฅูู ุงููุณุงูุงุช ุฅูู ุงูุฎูุงูุง ุ ูุชู ุฃุฎุฐูุง ูู ุงูุงุนุชุจุงุฑ ุนูุฏ ุชุญุฏูุฏ ุฃูุตุฑ ูุณุงุฑ. </font><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุฃูุซุฑ ูุนุงููุฉ ูู ุฅูุฏุงุฑ ุฃูู ุนุฏุฏ ูููู ูู ุงูููุงุท. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุจุณุฑุนุงุช ูุฎุชููุฉ ุ ูููููุง ุงูุญุตูู ุนูู ูุณุงุฑุงุช ูุฎุชููุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนุฑุถ ุงูุชุญุฑูุงุช ุจุฏูุงู ูู ุงููุณุงูุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ููุนุจ ุงููุนุจุฉ ุ ูุง ููููุง ูุซูุฑูุง ููู ุงููุณุงูุฉ ุงููุณุชุฎุฏูุฉ ููุนุซูุฑ ุนูู ุฃูุตุฑ ูุณุงุฑ. </font><font style="vertical-align: inherit;">ูุญู ููุชููู ุจุนุฏุฏ ุงูุชุญุฑูุงุช ุงููุทููุจุฉ ูููุตูู ุฅูู ููุทุฉ ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุจุฏูุงู ูู ุงููุณุงูุงุช ุ ุฏุนูุง ูุนุฑุถ ุงูุชุญุฑูุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงู ุ ุชุฎูุต ูู </font></font><code>UpdateDistanceLabel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงููุชู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Distance { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> distance; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { distance = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-comment"><span class="hljs-comment">// UpdateDistanceLabel(); } } โฆ // void UpdateDistanceLabel () { // UnityEngine.UI.Text label = uiRect.GetComponent&lt;Text&gt;(); // label.text = distance == int.MaxValue ? "" : distance.ToString(); // }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ุณูุถูู ุฅูู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุนุงูุฉ </font></font><code>SetLabel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชู ุชุชููู ุณูุณูุฉ ุนุดูุงุฆูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetLabel</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> text</span></span></span><span class="hljs-function">)</span></span> { UnityEngine.UI.Text label = uiRect.GetComponent&lt;Text&gt;(); label.text = text; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ูุฐู ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ ูู </font></font><code>HexGrid.Search</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุธูู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูุฅุฎูุงุก ุงูุฎูุงูุง ุ ูุง ุนููู ุณูู ุชุนููููุง </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Distance = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue; cells[i].SetLabel(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); cells[i].DisableHighlight(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ูุนุทู ุนูุงูุฉ ุงูุฌุงุฑ ูููุฉ ุญุฑูุชู. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุณูููู ูุงุฏุฑูู ุนูู ุฑุคูุฉ ุนุฏุฏ ุงูุชุญุฑูุงุช ุงูุฅุถุงููุฉ ุงูุชู ุณุชุณุชุบุฑููุง ุนูู ุทูู ุงูุทุฑูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.Distance == <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue) { neighbor.Distance = distance; neighbor.SetLabel(turn.ToString()); neighbor.PathFrom = current; neighbor.SearchHeuristic = neighbor.coordinates.DistanceTo(toCell.coordinates); searchFrontier.Enqueue(neighbor); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (distance &lt; neighbor.Distance) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> oldPriority = neighbor.SearchPriority; neighbor.Distance = distance; neighbor.SetLabel(turn.ToString()); neighbor.PathFrom = current; searchFrontier.Change(neighbor, oldPriority); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0d4/6d6/97d/0d46d697d7c08be6d3381ce030541e4d.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฏุฏ ุงูุญุฑูุงุช ุงููุทููุจุฉ ููุชุญุฑู ุนูู ุทูู ูุณุงุฑ </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุณุงุฑุงุช ุงูููุฑูุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุนูุฏูุง ููุนุจ ุงููุนุจุฉ ุ ูุง ููุชู ููู ุชุฌุฏ ุฎูุงุฑุฒููุฉ ุงูุจุญุซ ุนู ุงููุณุงุฑ ุงูุทุฑูู. </font><font style="vertical-align: inherit;">ูุฑูุฏ ุฃู ูุฑู ุงููุณุงุฑ ุงููุทููุจ ุนูู ุงูููุฑ. </font><font style="vertical-align: inherit;">ูู ุงูููุช ุงูุญุงูู ุ ูููููุง ุงูุชุฃูุฏ ูู ุฃู ุงูุฎูุงุฑุฒููุฉ ุชุนูู ุ ูุฐุง ุฏุนูุง ูุชุฎูุต ูู ุชุตูุฑ ุงูุจุญุซ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฏูู ููุฑูุชูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑูุฑ ุจุทูุก ูู ุฎูุงู ุงูุฎูุงุฑุฒููุฉ ุ ุงุณุชุฎุฏููุง ููุฑูุชูู. </font><font style="vertical-align: inherit;">ูุณูุง ุจุญุงุฌุฉ ููููุงู ุจุฐูู ุจุนุฏ ุงูุขู ุ ูุฐูู ุณูุชุฎูุต ูู ุงูููุงููุงุช </font></font><code>StartCoroutine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>StopAllCoroutines</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ูุณุชุฏุนููุง ุจุจุณุงุทุฉ </font></font><code>Search</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทุฑููุฉ ููุชุธูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> header</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// StopAllCoroutines(); โฆ } public void FindPath (HexCell fromCell, HexCell toCell, int speed) { // StopAllCoroutines(); // StartCoroutine(Search(fromCell, toCell, speed)); Search(fromCell, toCell, speed); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูู ูุนุฏ ูุณุชุฎุฏูู </font></font><code>Search</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฑูุชูู ุ ูุฅูู ูุง ูุญุชุงุฌ ุฅูู ุงูุนุงุฆุฏ ุ ูุฐูู ุณูุชุฎูุต ูู ูุฐุง ุงูุนุงูู. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃููุง ุณูุฒูู ุฃูุถูุง ุงูุฅุนูุงู </font></font><code>WaitForSeconds</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุบูุฑ ููุน ุงูุฅุฑุฌุงุน ููุทุฑููุฉ ุฅูู </font></font><code>void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed</span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-comment"><span class="hljs-comment">// WaitForSeconds delay = new WaitForSeconds(1 / 60f); fromCell.Distance = 0; searchFrontier.Enqueue(fromCell); while (searchFrontier.Count &gt; 0) { // yield return delay; HexCell current = searchFrontier.Dequeue(); โฆ } }</span></span></code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุงุฆุฌ ููุฑูุฉ</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุนุฑูู ููุช ุงูุจุญุซ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงูุญุตูู ุนูู ุงููุณุงุฑุงุช ุนูู ุงูููุฑ ุ ูููู ูุง ูุฏู ุณุฑุนุฉ ุญุณุงุจูุงุ ุชุธูุฑ ุงููุณุงุฑุงุช ุงููุตูุฑุฉ ุนูู ุงูููุฑ ุชูุฑูุจูุง ุ ูููู ูุฏ ุชุจุฏู ุงููุณุงุฑุงุช ุงูุทูููุฉ ุนูู ุงูุฎุฑุงุฆุท ุงููุจูุฑุฉ ุจุทูุฆุฉ ุจุนุถ ุงูุดูุก. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ูููุณ ููุฏุงุฑ ุงูููุช ุงููุณุชุบุฑู ููุนุซูุฑ ุนูู ุงููุณุงุฑ ูุนุฑุถู. ูููููุง ุงุณุชุฎุฏุงู ููู ุชุนุฑูู ูุชุญุฏูุฏ ููุช ุงูุจุญุซ ุ ูููู ูุฐุง ูุซูุฑ ุฌุฏูุง ููุฎูู ุชูุงููู ุฅุถุงููุฉ. ุฏุนูุง ูุณุชุฎุฏู ุจุฏูุงู ูู ุฐูู </font></font><code>Stopwatch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุงูููุฌูุฏ ูู ูุณุงุญุฉ ุงูุงุณู </font></font><code>System.Diagnostics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุธุฑูุง ูุฃููุง ูุณุชุฎุฏูู ูุคูุชูุง ููุท ุ ููู ุฃุถูู ุงูุจูุงุก </font></font><code>using</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู ุจุฏุงูุฉ ุงูุจุฑูุงูุฌ ุงููุตู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุงูุจุญุซ ูุจุงุดุฑุฉู ุ ุฃูุดุฆ ุณุงุนุฉ ุฅููุงู ุฌุฏูุฏุฉ ูุงุจุฏุฃ ุชุดุบูููุง. ุจุนุฏ ุงูุชูุงู ุงูุจุญุซ ุ ุฃููู ุณุงุนุฉ ุงูุฅููุงู ูุงุนุฑุถ ุงูููุช ุงููููุถู ูู ูุญุฏุฉ ุงูุชุญูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed</span></span></span><span class="hljs-function">)</span></span> { System.Diagnostics.Stopwatch sw = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.Diagnostics.Stopwatch(); sw.Start(); Search(fromCell, toCell, speed); sw.Stop(); Debug.Log(sw.ElapsedMilliseconds); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ูุฎุชุงุฑ ุฃุณูุฃ ุญุงูุฉ ูุฎูุงุฑุฒููุฉ ูุฏููุง - ุจุญุซ ูู ุฃุณูู ุงููุณุงุฑ ุฅูู ุงูุฒุงููุฉ ุงููููู ุงูุนููุง ูุฎุฑูุทุฉ ูุจูุฑุฉ. ุฃุณูุฃ ุดูุก ูู ุฎุฑูุทุฉ ููุญุฏุฉ ุ ูุฃู ุงูุฎูุงุฑุฒููุฉ ูุฌุจ ุฃู ุชุนุงูุฌ ุฌููุน ุฎูุงูุง ุงูุฎุฑูุทุฉ ุงูุจุงูุบ ุนุฏุฏูุง 4800 ุฎููุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ce1/c03/524/ce1c0352479d7d8cddcff0b014291662.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุญุซ ูู ุฃุณูุฃ ุงูุญุงูุงุช</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุฃู ูููู </font><i><font style="vertical-align: inherit;">ุงูููุช</font></i><font style="vertical-align: inherit;"> ุงููุณุชุบุฑู ูู ุงูุจุญุซ ุนูู ูุฎุชูููุง ุ ูุฃู ูุญุฑุฑ ุงููุญุฏุฉ ููุณ ุงูุนูููุฉ ุงููุญูุฏุฉ ุงูุชู ุชุนูู ุนูู ุฌูุงุฒู. ูุฐุง ุงุฎุชุจุฑู ุนุฏุฉ ูุฑุงุช ูููู ูุชูุณุท โโุงููุฏุฉ. ูู ุญุงูุชู ุ ูุณุชุบุฑู ุงูุจุญุซ ุญูุงูู 45 ูููู ุซุงููุฉ. ูุฐุง ููุณ ูุซูุฑูุง ููุชูุงูู ูุน 22.22 ูุณุงุฑูุง ูู ุงูุซุงููุฉ ุ ุชุดูุฑ ุฅูู ุฐูู ุจู 22 ููุทุฉ (ูุณุงุฑุงุช ูู ุงูุซุงููุฉ). ูุฐุง ูุนูู ุฃู ูุนุฏู ุฅุทุงุฑุงุช ุงููุนุจุฉ ุณููุฎูุถ โโุฃูุถูุง ุจุญุฏ ุฃูุตู 22 ุฅุทุงุฑูุง ูู ุงูุซุงููุฉ ูู ูุฐุง ุงูุฅุทุงุฑ ุนูุฏ ุญุณุงุจ ูุฐุง ุงููุณุงุฑ. ููุฐุง ุฏูู ูุฑุงุนุงุฉ ุฌููุน ุงูุฃุนูุงู ุงูุฃุฎุฑู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนุฑุถ ุงูุฅุทุงุฑ ููุณู. ุฃู ูุญุตู ุนูู ุงูุฎูุงุถ ูุจูุฑ ุฅูู ุญุฏ ูุง ูู ูุนุฏู ุงูุฅุทุงุฑุงุช ุ ูุณูู ููุฎูุถ โโุฅูู 20 ุฅุทุงุฑูุง ูู ุงูุซุงููุฉ.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก ูุฐุง ุ ูุฌุจ ูุฑุงุนุงุฉ ุฃู ุฃุฏุงุก ูุญุฑุฑ ุงููุญุฏุฉ ูู ูููู ุนุงูููุง ูุซู ุฃุฏุงุก ุงูุชุทุจูู ุงูููุงุฆู. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุจุฅุฌุฑุงุก ููุณ ุงูุงุฎุชุจุงุฑ ูุน ุงูุชุฌููุน ุ ูุณูุณุชุบุฑู ูู ุงููุชูุณุท โโ15 ูููู ุซุงููุฉ ููุท. </font><font style="vertical-align: inherit;">ูุฐุง ูู 66 ููุทุฉ ุ ููู ุฃูุถู ุจูุซูุฑ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุง ูุฒุงู ูุฐุง ุฌุฒุกูุง ูุจูุฑูุง ูู ุงูููุงุฑุฏ ุงููุฎุตุตุฉ ููู ุฅุทุงุฑ ุ ูุฐูู ุณูุตุจุญ ูุนุฏู ุงูุฅุทุงุฑ ุฃูู ูู 60 ุฅุทุงุฑูุง ูู ุงูุซุงููุฉ.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูู ูููููู ุฑุคูุฉ ุณุฌู ุงูุชุตุญูุญ ููุชุฌููุนุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  Unity     ,    .     .  ,       ,   Unity  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Log Files</a> . </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุจุญุซ ููุท ุนูุฏ ุงูุถุฑูุฑุฉ. </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุฅุฌุฑุงุก ุชุญุณูู ุจุณูุท - ุฅุฌุฑุงุก ุจุญุซ ููุท ุนูุฏ ุงูุญุงุฌุฉ. </font><font style="vertical-align: inherit;">ุจูููุง ูุจุฏุฃ ุจุญุซูุง ุฌุฏูุฏูุง ูู ูู ุฅุทุงุฑ ูุชู ููู ุงูุถุบุท ุจุงุณุชูุฑุงุฑ ุนูู ุฒุฑ ุงููุงูุณ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูุชู ุงูุชูููู ูู ูุนุฏู ุงูุฅุทุงุฑุงุช ุจุงุณุชูุฑุงุฑ ุนูุฏ ุงูุณุญุจ ูุงูุฅุณูุงุท. </font><font style="vertical-align: inherit;">ูููููุง ุชุฌูุจ ุฐูู ูู ุฎูุงู ุจุฏุก ุจุญุซ ุฌุฏูุฏ </font></font><code>HexMapEditor.HandleInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุท ุนูุฏูุง ูุชุนุงูู ุญููุง ูุน ููุทุฉ ููุงูุฉ ุฌุฏูุฏุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ูุฐูู ุ ููุง ูุฒุงู ุงููุณุงุฑ ุงููุฑุฆู ุงูุญุงูู ุตุงูุญูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (editMode) { EditCells(currentCell); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( Input.GetKey(KeyCode.LeftShift) &amp;&amp; searchToCell != currentCell ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFromCell != currentCell) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFromCell) { searchFromCell.DisableHighlight(); } searchFromCell = currentCell; searchFromCell.EnableHighlight(Color.blue); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchToCell) { hexGrid.FindPath(searchFromCell, searchToCell, <span class="hljs-number"><span class="hljs-number">24</span></span>); } } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFromCell &amp;&amp; searchFromCell != currentCell) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchToCell != currentCell) { searchToCell = currentCell; hexGrid.FindPath(searchFromCell, searchToCell, <span class="hljs-number"><span class="hljs-number">24</span></span>); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุธูุงุฑ ุงูุชุณููุงุช ูููุณุงุฑ ููุท </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฏ ุนุฑุถ ุนูุงูุงุช ุงูุณูุฑ ุนูููุฉ ููููุฉ ุฅูู ุญุฏ ูุง ุ ุฎุงุตุฉ ูุฃููุง ูุณุชุฎุฏู ููุฌูุง ุบูุฑ ูุญุณู. </font><font style="vertical-align: inherit;">ุณูุคุฏู ุชูููุฐ ูุฐู ุงูุนูููุฉ ูุฌููุน ุงูุฎูุงูุง ุจุงูุชุฃููุฏ ุฅูู ุฅุจุทุงุก ุงูุชูููุฐ. </font><font style="vertical-align: inherit;">ูุฐูู ุฏุนููุง ุชุฎุทู ูุถุน ุงูุนูุงูุงุช </font></font><code>HexGrid.Search</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.Distance == <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue) { neighbor.Distance = distance; <span class="hljs-comment"><span class="hljs-comment">// neighbor.SetLabel(turn.ToString()); neighbor.PathFrom = current; neighbor.SearchHeuristic = neighbor.coordinates.DistanceTo(toCell.coordinates); searchFrontier.Enqueue(neighbor); } else if (distance &lt; neighbor.Distance) { int oldPriority = neighbor.SearchPriority; neighbor.Distance = distance; // neighbor.SetLabel(turn.ToString()); neighbor.PathFrom = current; searchFrontier.Change(neighbor, oldPriority); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุฑุคูุฉ ูุฐู ุงููุนูููุงุช ููุท ูููุณุงุฑ ุงูููุฌูุฏ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุจุนุฏ ุงููุตูู ุฅูู ููุทุฉ ุงูููุงูุฉ ุ ุณูููู ุจุญุณุงุจ ุงูุฏูุฑุฉ ุงูุชุฏุฑูุจูุฉ ูุชุนููู ุชุณููุงุช ุชูู ุงูุฎูุงูุง ุงูููุฌูุฏุฉ ุนูู ุงูุทุฑูู ููุท.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current == toCell) { current = current.PathFrom; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (current != fromCell) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> turn = current.Distance / speed; current.SetLabel(turn.ToString()); current.EnableHighlight(Color.white); current = current.PathFrom; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/090/f8f/2f1/090f8f2f121b6fafdb7b95d48fb41c8d.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุงูุชุณููุงุช ูุฎูุงูุง ุงููุณุงุฑ ููุท</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ูููู ุจุชุถููู ุชุณููุงุช ุงูุฎูุงูุง ููุท ุจูู ุงูุจุฏุงูุฉ ูุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ููู ููุทุฉ ุงูููุงูุฉ ูู ุฃูู ุดูุก ุ ูุฌุจ ุนูููุง ุฃูุถูุง ุชุนููู ุชุตููู ููุง. </font><font style="vertical-align: inherit;">ููููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุจุฏุก ุฏูุฑุฉ ุงููุณุงุฑ ูู ุงูุฎููุฉ ุงููุฌูุฉ ุ ูููุณ ูู ุงูุฎููุฉ ุงูููุฌูุฏุฉ ุฃูุงููุง. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชุชุบูุฑ ุฅุถุงุกุฉ ููุทุฉ ุงูููุงูุฉ ูู ุงูููู ุงูุฃุญูุฑ ุฅูู ุงูููู ุงูุฃุจูุถ ุ ูุฐูู ุณูุฒูู ุงูุฅุถุงุกุฉ ุงูุฎูููุฉ ุชุญุช ุงูุฏูุฑุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> fromCell.EnableHighlight(Color.blue); <span class="hljs-comment"><span class="hljs-comment">// toCell.EnableHighlight(Color.red); fromCell.Distance = 0; searchFrontier.Enqueue(fromCell); while (searchFrontier.Count &gt; 0) { HexCell current = searchFrontier.Dequeue(); if (current == toCell) { // current = current.PathFrom; while (current != fromCell) { int turn = current.Distance / speed; current.SetLabel(turn.ToString()); current.EnableHighlight(Color.white); current = current.PathFrom; } toCell.EnableHighlight(Color.red); break; } โฆ }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/dda/273/ea9/dda273ea9b4aa1767db16c19abf512cd.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูููุงุช ุงูุชูุฏู ูู ุงูุฃูู ุจุงููุณุจุฉ ูููุทุฉ ุงูููุงูุฉ.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุฏ ูุฐู ุงูุชุบููุฑุงุช ุ ูุชู ุชูููู ููุช ุงูุญุงูุฉ ุงูุฃุณูุฃ ุฅูู 23 ูููู ุซุงููุฉ ูู ุงููุญุฑุฑ ูุฅูู 6 ูููู ุซุงููุฉ ูู ุงูุชุฌููุน ุงูููุงุฆู. </font><font style="vertical-align: inherit;">ูุฐู ูู 43 ููุทุฉ ู 166 ููุทุฉ - ุฃูุถู ุจูุซูุฑ. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุจุญุซ ุงูุฃุฐูู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุฌุฒุก ุงูุณุงุจู ุ ุฌุนููุง ุฅุฌุฑุงุก ุงูุจุญุซ ุฃูุซุฑ ุฐูุงุกู ูู ุฎูุงู ุชูููุฐ ุฎูุงุฑุฒููุฉ A </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูู ุงููุงูุน ุ ูุง ุฒููุง ูุง ูุฌุฑู ุงูุจุญุซ ุจุงูุทุฑููุฉ ุงููุซูู. </font><font style="vertical-align: inherit;">ูู ูู ุชูุฑุงุฑ ุ ูุญุณุจ ุงููุณุงูุงุช ูู ุงูุฎููุฉ ุงูุญุงููุฉ ุฅูู ุฌููุน ุฌูุฑุงููุง. </font><font style="vertical-align: inherit;">ูููุทุจู ุฐูู ุนูู ุงูุฎูุงูุง ุงูุชู ููุณุช ุจุนุฏ ุฃู ุงูุชู ุชุนุฏ ุญุงูููุง ุฌุฒุกูุง ูู ุญุฏูุฏ ุงูุจุญุซ. </font><font style="vertical-align: inherit;">ููู ุงูุฎูุงูุง ุงูุชู ุชูุช ุฅุฒุงูุชูุง ุจุงููุนู ูู ุงูุญุฏูุฏ ุ ูู ุชุนุฏ ุจุญุงุฌุฉ ุฅูู ุงููุธุฑ ูููุง ุ ูุฃููุง ูุฌุฏูุง ุจุงููุนู ุฃูุตุฑ ูุณุงุฑ ููุฐู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ุฅู ุงูุชูููุฐ ุงูุตุญูุญ ูู A </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุฎุทู ูุฐู ุงูุฎูุงูุง ุ ุญุชู ูุชููู ูู ุงูููุงู ุจููุณ ุงูุดูุก.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฑุญูุฉ ุจุญุซ ุงูุฎููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุนุฑู ูุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ูุฏ ุบุงุฏุฑุช ุจุงููุนู ุงูุญุฏูุฏุ </font><font style="vertical-align: inherit;">ุจูููุง ูุง ูููููุง ุชุญุฏูุฏ ุฐูู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชุชุจุน ูุฑุญูุฉ ุงูุจุญุซ ุนู ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูู ุชูู ูู ุงูุญุฏูุฏ ุจุนุฏ ุ ุฃู ุฃููุง ููุฌูุฏุฉ ุงูุขู ุ ุฃู ูู ุงูุฎุงุฑุฌ. </font><font style="vertical-align: inherit;">ูููููุง ุชุชุจุน ุฐูู ุนู ุทุฑูู ุงูุฅุถุงูุฉ ุฅูู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุงุตูุฉ ุนุฏุฏูุฉ ุจุณูุทุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SearchPhase { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ุณุจูู ุงููุซุงู ุ ูุนูู 0 ุฃู ุงูุฎูุงูุง ูู ุชุตู ุจุนุฏ ุ 1 - ุฃู ุงูุฎููุฉ ููุฌูุฏุฉ ูู ุงูุญุฏ ุงูุขู ุ ู 2 - ุงูุชู ุชูุช ุฅุฒุงูุชูุง ุจุงููุนู ูู ุงูุญุฏ. </font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุถุฑุจ ุงูุญุฏูุฏ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>HexGrid.Search</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุฅุนุงุฏุฉ ุชุนููู ุฌููุน ุงูุฎูุงูุง ุฅูู 0 ูุงุณุชุฎุฏุงู 1 ุฏุงุฆููุง ููุญุฏูุฏ. </font><font style="vertical-align: inherit;">ุฃู ูููููุง ุฒูุงุฏุฉ ุนุฏุฏ ุงูุญุฏูุฏ ูุน ูู ุจุญุซ ุฌุฏูุฏ. </font><font style="vertical-align: inherit;">ูุจูุถู ูุฐุง ุ ูู ูุถุทุฑ ุฅูู ุงูุชุนุงูู ูุน ุฅุบุฑุงู ุงูุฎูุงูุง ุฅุฐุง ูููุง ูู ูู ูุฑุฉ ุจุฒูุงุฏุฉ ุนุฏุฏ ุงูุญุฏูุฏ ุจููุฏุงุฑ ุงุซููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> searchFrontierPhase; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed</span></span></span><span class="hljs-function">)</span></span> { searchFrontierPhase += <span class="hljs-number"><span class="hljs-number">2</span></span>; โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุชุนููู ูุฑุญูุฉ ุงูุจุญุซ ุนู ุงูุฎููุฉ ุนูุฏ ุฅุถุงูุชูุง ุฅูู ุงูุญุฏูุฏ. </font><font style="vertical-align: inherit;">ุชุจุฏุฃ ุงูุนูููุฉ ุจุฎููุฉ ุฃูููุฉ ุชุถุงู ุฅูู ุงูุญุฏูุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> fromCell.SearchPhase = searchFrontierPhase; fromCell.Distance = <span class="hljs-number"><span class="hljs-number">0</span></span>; searchFrontier.Enqueue(fromCell);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ูู ูุฑุฉ ูุถูู ุฌุงุฑุง ุฅูู ุงูุญุฏูุฏ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.Distance == <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue) { neighbor.SearchPhase = searchFrontierPhase; neighbor.Distance = distance; neighbor.PathFrom = current; neighbor.SearchHeuristic = neighbor.coordinates.DistanceTo(toCell.coordinates); searchFrontier.Enqueue(neighbor); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุต ุงูุญุฏูุฏ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ุงูุขู ุ ููุชุญูู ูู ุฃู ุงูุฎููุฉ ูู ุชุชู ุฅุถุงูุชูุง ุจุนุฏ ุฅูู ุงูุญุฏูุฏ ุ ุงุณุชุฎุฏููุง ูุณุงูุฉ ูุณุงููุฉ ูู </font></font><code>int.MaxValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููููุง ุงูุขู ููุงุฑูุฉ ูุฑุญูุฉ ุงูุจุญุซ ุนู ุงูุฎููุฉ ุจุงูุญุฏูุฏ ุงูุญุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// if (neighbor.Distance == int.MaxValue) { if (neighbor.SearchPhase &lt; searchFrontierPhase) { neighbor.SearchPhase = searchFrontierPhase; neighbor.Distance = distance; neighbor.PathFrom = current; neighbor.SearchHeuristic = neighbor.coordinates.DistanceTo(toCell.coordinates); searchFrontier.Enqueue(neighbor); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ูุนูู ุฃููุง ูู ูุนุฏ ุจุญุงุฌุฉ ุฅูู ุฅุนุงุฏุฉ ุถุจุท ูุณุงูุงุช ุงูุฎููุฉ ูุจู ุงูุจุญุซ ุ ุฃู ุฃููุง ุณูุถุทุฑ ุฅูู ุงูููุงู ุจุนูู ุฃูู ุ ููู ุฃูุฑ ุฌูุฏ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { <span class="hljs-comment"><span class="hljs-comment">// cells[i].Distance = int.MaxValue; cells[i].SetLabel(null); cells[i].DisableHighlight(); }</span></span></code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฑู ุงูุญุฏูุฏ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ุชุชู ุฅุฒุงูุฉ ุฎููุฉ ูู ุงูุญุฏูุฏ ุ ูุฅููุง ูุดูุฑ ุฅูู ุฐูู ุจุฒูุงุฏุฉ ูู ูุฑุญูุฉ ุงูุจุญุซ. </font><font style="vertical-align: inherit;">ูุฐุง ูุถุนูุง ุฎุงุฑุฌ ุงูุญุฏูุฏ ุงูุญุงููุฉ ููุจู ุงูุชุงูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (searchFrontier.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { HexCell current = searchFrontier.Dequeue(); current.SearchPhase += <span class="hljs-number"><span class="hljs-number">1</span></span>; โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ูููููุง ุชุฎุทู ุงูุฎูุงูุง ุงูุชู ุชูุช ุฅุฒุงูุชูุง ูู ุงูุญุฏูุฏ ุ ูุชุฌูุจ ุงูุญุณุงุจ ุบูุฑ ุงููุจุฑุฑ ูููุงุฑูุฉ ุงููุณุงูุงุช. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = current.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( neighbor == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || neighbor.SearchPhase &gt; searchFrontierPhase ) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงููุฑุญูุฉ ุ ูุง ุชุฒุงู ุงูุฎูุงุฑุฒููุฉ ูุฏููุง ุชูุชุฌ ุงููุชุงุฆุฌ ููุณูุง ุ ูููู ุจููุงุกุฉ ุฃูุจุฑ. </font><font style="vertical-align: inherit;">ุนูู ุฌูุงุฒู ุ ูุณุชุบุฑู ุงูุจุญุซ ูู ุฃุณูุฃ ุญุงูุฉ 20 ูููู ุซุงููุฉ ูู ุงููุญุฑุฑ ู 5 ูููู ุซุงููุฉ ูู ุงูุชุฌููุน. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุฃูุถูุง ุญุณุงุจ ุนุฏุฏ ุงููุฑุงุช ุงูุชู ุชูุช ูููุง ูุนุงูุฌุฉ ุงูุฎููุฉ ุจูุงุณุทุฉ ุงูุฎูุงุฑุฒููุฉ ุ ูุฒูุงุฏุฉ ุงูุนุฏุงุฏ ุนูุฏ ุญุณุงุจ ุงููุณุงูุฉ ุฅูู ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุณุงุจู ุ ูุงูุช ุฎูุงุฑุฒููุชูุง ูู ุฃุณูุฃ ุงูุญุงูุงุช ุชุญุณุจ ูุณุงูุงุช 28ุ239. </font><font style="vertical-align: inherit;">ูู ุฎูุงุฑุฒููุฉ A </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุงูุฒุฉ ุ </font><font style="vertical-align: inherit;">ูุญุณุจ ูุณุงูุงุชูุง 14ุ120. </font><font style="vertical-align: inherit;">ุงูุฎูุถ ุงููุจูุบ ุจูุณุจุฉ 50ูช. </font><font style="vertical-align: inherit;">ุฏุฑุฌุฉ ุชุฃุซูุฑ ูุฐู ุงููุคุดุฑุงุช ุนูู ุงูุฅูุชุงุฌูุฉ ุชุนุชูุฏ ุนูู ุงูุชูุงููู ูู ุญุณุงุจ ุชูููุฉ ุงูุงูุชูุงู. </font><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ูุง ููุฌุฏ ุงููุซูุฑ ูู ุงูุนูู ููุง ุ ูุฐุง ูุฅู ุงูุชุญุณูู ูู ุงูุชุฌููุน ููุณ ูุจูุฑูุง ุฌุฏูุง ุ ููููู ููุญูุธ ุฌุฏูุง ูู ุงููุญุฑุฑ. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุทููุฑ ุงูุทุฑูู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุจุฏุก ุจุญุซ ุฌุฏูุฏ ุ ูุญุชุงุฌ ุฃููุงู ููุณุญ ุงูุชุตูุฑ ูููุณุงุฑ ุงูุณุงุจู. </font><font style="vertical-align: inherit;">ุฃุซูุงุก ููุงููุง ุจุฐูู ุ ูู ุจุฅููุงู ุงูุชุญุฏูุฏ ูุฅุฒุงูุฉ ุงูุชุณููุงุช ูู ูู ุฎููุฉ ุดุจูุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ููุฌ ุตุนุจ ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ูุญุชุงุฌ ุฅูู ุงูุชุฎูุต ูู ุชูู ุงูุฎูุงูุง ุงูุชู ูุงูุช ุฌุฒุกูุง ูู ุงููุณุงุฑ ุงูุณุงุจู ููุท.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุจุญุซ ููุท </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุฃ ุจุฅุฒุงูุฉ ุฑูุฒ ุงูุชุตูุฑ ุจุงููุงูู ูู </font></font><code>Search</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ููุท ูุฅุฌุฑุงุก ุจุญุซ ุงููุณุงุฑ ูููุณ ุนููู ุฃู ูุนุฑู ูุงุฐุง ุณููุนู ุจูุฐู ุงููุนูููุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed</span></span></span><span class="hljs-function">)</span></span> { searchFrontierPhase += <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFrontier == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { searchFrontier = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HexCellPriorityQueue(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { searchFrontier.Clear(); } <span class="hljs-comment"><span class="hljs-comment">// for (int i = 0; i &lt; cells.Length; i++) { // cells[i].SetLabel(null); // cells[i].DisableHighlight(); // } // fromCell.EnableHighlight(Color.blue); fromCell.SearchPhase = searchFrontierPhase; fromCell.Distance = 0; searchFrontier.Enqueue(fromCell); while (searchFrontier.Count &gt; 0) { HexCell current = searchFrontier.Dequeue(); current.SearchPhase += 1; if (current == toCell) { // while (current != fromCell) { // int turn = current.Distance / speed; // current.SetLabel(turn.ToString()); // current.EnableHighlight(Color.white); // current = current.PathFrom; // } // toCell.EnableHighlight(Color.red); // break; } โฆ } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฅุจูุงุบ ุนู </font></font><code>Search</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุง ูุฌุฏูุง ุทุฑููุฉ ุ ุณูุนูุฏ ููุทููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed</span></span></span><span class="hljs-function">)</span></span> { searchFrontierPhase += <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (searchFrontier == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { searchFrontier = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HexCellPriorityQueue(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { searchFrontier.Clear(); } fromCell.SearchPhase = searchFrontierPhase; fromCell.Distance = <span class="hljs-number"><span class="hljs-number">0</span></span>; searchFrontier.Enqueue(fromCell); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (searchFrontier.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { HexCell current = searchFrontier.Dequeue(); current.SearchPhase += <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current == toCell) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } โฆ } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฐูุฑ ุงูุทุฑูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูุชู ุงูุนุซูุฑ ุนูู ุงููุณุงุฑ ุ ูุญุชุงุฌ ุฅูู ุชุฐูุฑู. </font><font style="vertical-align: inherit;">ุจูุถู ูุฐุง ุ ุณูุชููู ูู ุชูุธููู ูู ุงููุณุชูุจู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูุชุชุจุน ููุงุท ุงูููุงูุฉ ููุง ุฅุฐุง ูุงู ููุงู ูุณุงุฑ ุจููููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexCell currentPathFrom, currentPathTo; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> currentPathExists; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed</span></span></span><span class="hljs-function">)</span></span> { System.Diagnostics.Stopwatch sw = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.Diagnostics.Stopwatch(); sw.Start(); currentPathFrom = fromCell; currentPathTo = toCell; currentPathExists = Search(fromCell, toCell, speed); sw.Stop(); Debug.Log(sw.ElapsedMilliseconds); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุนุฑุถ ุงููุณุงุฑ ูุฑุฉ ุฃุฎุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ุจูุงูุงุช ุงูุจุญุซ ุงูุชู ุณุฌููุงูุง ูุชุตูุฑ ุงููุณุงุฑ ูุฑุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูููู ุจุฅูุดุงุก ุทุฑููุฉ ุฌุฏูุฏุฉ ููุฐุง </font></font><code>ShowPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณูู ููุฑ ูู ุฎูุงู ุงูุฏูุฑุฉ ูู ููุงูุฉ ุงููุณุงุฑ ุฅูู ุจุฏุงูุชู ุ ูุน ุชุณููุท ุงูุถูุก ุนูู ุงูุฎูุงูุง ูุชุนููู ูููุฉ ุญุฏ ูุชุตูููุงุชูุง. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ุงูุณุฑุนุฉ ุ ูุฐุง ุงุฌุนููุง ูุนููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ูุฏููุง ูุณุงุฑ ุ ูุฅู ุงูุทุฑููุฉ ุชุญุฏุฏ ุจุจุณุงุทุฉ ููุงุท ุงูููุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPathExists) { HexCell current = currentPathTo; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (current != currentPathFrom) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> turn = current.Distance / speed; current.SetLabel(turn.ToString()); current.EnableHighlight(Color.white); current = current.PathFrom; } } currentPathFrom.EnableHighlight(Color.blue); currentPathTo.EnableHighlight(Color.red); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุชุตู ุจูุฐู ุงูุทุฑููุฉ </font></font><code>FindPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุงูุจุญุซ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> currentPathExists = Search(fromCell, toCell, speed); ShowPath(speed);</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุณุงุญ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑู ุงููุณุงุฑ ูุฑุฉ ุฃุฎุฑู ุ ูููู ุงูุขู ูุง ูุชุญุฑู ุจุนูุฏูุง. </font><font style="vertical-align: inherit;">ููุณุญูุง ุ ูู ุจุฅูุดุงุก ุทุฑููุฉ </font></font><code>ClearPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ุฅููุง ูุณุฎุฉ </font></font><code>ShowPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุจุงุณุชุซูุงุก ุฃููุง ุชุนุทู ุงูุชุญุฏูุฏ ูุงูุชุณููุงุช ุ ูููููุง ูุง ุชุชุถูููุง. </font><font style="vertical-align: inherit;">ุจุนุฏ ุงูููุงู ุจุฐูู ุ ูุฌุจ ุนููู ูุณุญ ุจูุงูุงุช ุงููุณุงุฑ ุงููุณุฌูุฉ ุงูุชู ูู ุชุนุฏ ุตุงูุญุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClearPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPathExists) { HexCell current = currentPathTo; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (current != currentPathFrom) { current.SetLabel(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); current.DisableHighlight(); current = current.PathFrom; } current.DisableHighlight(); currentPathExists = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } currentPathFrom = currentPathTo = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ูุฐู ุงูุทุฑููุฉ ุ ูููููุง ูุณุญ ุงูุชุตูุฑ ูููุณุงุฑ ุงููุฏูู ูู ุฎูุงู ุฒูุงุฑุฉ ุงูุฎูุงูุง ุงูุถุฑูุฑูุฉ ููุท ุ ููู ูุนุฏ ุญุฌู ุงูุฎุฑูุทุฉ ููููุง. </font><font style="vertical-align: inherit;">ุณูุชุตู ุจู </font></font><code>FindPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุจุฏุก ุจุญุซ ุฌุฏูุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> sw.Start(); ClearPath(); currentPathFrom = fromCell; currentPathTo = toCell; currentPathExists = Search(fromCell, toCell, speed); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPathExists) { ShowPath(speed); } sw.Stop();</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูููู ุจูุณุญ ุงููุณุงุฑ ุนูุฏ ุฅูุดุงุก ุฎุฑูุทุฉ ุฌุฏูุฏุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { โฆ ClearPath(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (chunks != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; chunks.Length; i++) { Destroy(chunks[i].gameObject); } } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃูุถุง ูุจู ุชุญููู ุจุทุงูุฉ ุฃุฎุฑู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> header</span></span></span><span class="hljs-function">)</span></span> { ClearPath(); โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ูุณุญ ุชุตูุฑ ุงููุณุงุฑ ูุฑุฉ ุฃุฎุฑู ุ ููุง ูุงู ุงูุญุงู ูุจู ูุฐุง ุงูุชุบููุฑ. </font><font style="vertical-align: inherit;">ูููููุง ุงูุขู ูุณุชุฎุฏู ููุฌูุง ุฃูุซุฑ ููุงุกุฉ ุ ููู ุฃุณูุฃ ุญุงูุงุช ุงูุจุญุซ ุ ุงูุฎูุถ ุงูููุช ุฅูู 14 ูููู ุซุงููุฉ. </font><font style="vertical-align: inherit;">ูููู ุชุญุณู ุฎุทูุฑ ููุท ุจุณุจุจ ุงูุชูุธูู ุงูุฃูุซุฑ ุฐูุงุก. </font><font style="vertical-align: inherit;">ุงูุฎูุถ ููุช ุงูุชุฌููุน ุฅูู 3 ูููู ุซุงููุฉ ุ ููู 333 ููุทุฉ ูู ุงูุซุงููุฉ. </font><font style="vertical-align: inherit;">ุจูุถู ูุฐุง ุ ูุฅู ุงูุจุญุซ ุนู ุงููุณุงุฑุงุช ูุงุจู ููุชุทุจูู ุชูุงููุง ูู ุงูููุช ุงููุนูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ูููุง ุจุฅุฌุฑุงุก ุจุญุซ ุณุฑูุน ุนู ุงููุณุงุฑุงุช ุ ูููููุง ุฅุฒุงูุฉ ุฑูุฒ ุงูุชุตุญูุญ ุงููุคูุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// System.Diagnostics.Stopwatch sw = new System.Diagnostics.Stopwatch(); // sw.Start(); ClearPath(); currentPathFrom = fromCell; currentPathTo = toCell; currentPathExists = Search(fromCell, toCell, speed); ShowPath(speed); // sw.Stop(); // Debug.Log(sw.ElapsedMilliseconds); }</span></span></code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฒุก 18: ุงููุญุฏุงุช </font></font></h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุถุน ุงููุฑู ุนูู ุงูุฎุฑูุทุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญูุธ ูุชุญููู ูุฑู. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌุฏ ุทุฑู ููููุงุช. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชูู ุงููุญุฏุงุช. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ุจุนุฏ ุฃู ุงูุชุดููุง ููููุฉ ุงูุจุญุซ ุนู ูุณุงุฑ ุ ุฏุนูุง ูุถุน ุงููุฑู ุนูู ุงูุฎุฑูุทุฉ. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/881/316/9bb/8813169bb32795f4ea1d0c4696fddde2.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตูุช ุงูุชุนุฒูุฒุงุช</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุดููู ูุฑู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ุงูุขู ุชุนุงูููุง ููุท ูุน ุงูุฎูุงูุง ูุงูุฃุดูุงุก ุงูุซุงุจุชุฉ. </font><font style="vertical-align: inherit;">ุชุฎุชูู ุงููุญุฏุงุช ุนููุง ูู ุฃููุง ูุชุญุฑูุฉ. </font><font style="vertical-align: inherit;">ูููู ุฃู ุชุนูู ุงููุฑูุฉ ุฃู ุดูุก ูู ุฃู ูุทุงู ุ ูู ุดุฎุต ูุงุญุฏ ุฃู ูุฑูุจุฉ ุฅูู ุฌูุด ุจุฃูููู. </font><font style="vertical-align: inherit;">ูู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุ ููุชุตุฑ ุนูู ููุน ุจุณูุท ูู ุงููุญุฏุงุช ุงููุนูู. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุณููุชูู ุฅูู ุฏุนู ูุฌููุนุงุช ูู ุนุฏุฉ ุฃููุงุน ูู ุงููุญุฏุงุช.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฑูุฉ ุฌุงูุฒุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุนูู ูุน ุงููุฑู ุ ูู ุจุฅูุดุงุก ููุน ุฌุฏูุฏ ูู ุงูููููุงุช </font></font><code>HexUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุงูููุช ุงูุญุงูู ุ ุฏุนูุง ูุจุฏุฃ ุจูุงุญุฏ ูุงุฑุบ </font></font><code>MonoBehaviour</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุซู ูุถูู ูุธููุฉ ุฅููู ูุงุญููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HexUnit</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุฅูุดุงุก ูุงุฆู ูุนุจุฉ ูุงุฑุบ ุจุงุณุชุฎุฏุงู ูุฐุง ุงููููู ุ ูุงูุฐู ูุฌุจ ุฃู ูุตุจุญ ุฌุงูุฒูุง. </font><font style="vertical-align: inherit;">ุณูููู ูุฐุง ูู ุงููุงุฆู ุงูุฌุฐุฑ ูููุฑูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8de/c85/2f2/8dec852f21d7aaa2c3002dc119d890ef.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูุฉ ุฌุงูุฒุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ูููุฐุฌูุง ุซูุงุซู ุงูุฃุจุนุงุฏ ูุฑูุฒ ุฅูู ุงูุงููุตุงู ููุงุฆู ุชุงุจุน. </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏูุช ููุนุจูุง ุจุณูุทูุง ูุจุชูุฑูุง ุตูุนุช ูู ูุงุฏุฉ ุฒุฑูุงุก. </font><font style="vertical-align: inherit;">ูุญุฏุฏ ุงููุงุฆู ุงูุฌุฐุฑ ุงููุณุชูู ุงูุฃุฑุถู ููุงููุตุงู ุ ูุจุงูุชุงูู ุ ูุฅููุง ูุฒูุญ ุงูุนูุตุฑ ุงููุฑุนู ููููุง ูุฐูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/be6/157/db2/be6157db233e9e6fc0a40eae6747c731.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/be6/157/db2/be6157db233e9e6fc0a40eae6747c731.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุตุฑ ุงูููุนุจ ุงููุฑุนู ูู</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฅุถุงูุฉ ูุตุงุฏู ุฅูู ุงููุฌููุนุฉ ุจุญูุซ ูุณูู ุงูุงุฎุชูุงุฑ ูู ุงููุณุชูุจู. </font><font style="vertical-align: inherit;">ูุตุงุฏู ุงูููุนุจ ุงูููุงุณู ููุงุณุจ ุชูุงููุง ุจุงููุณุจุฉ ููุง ุ ููุท ุงุฌุนู ุงููุตุงุฏู ููุงุณุจูุง ูู ุฎููุฉ ูุงุญุฏุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุดุงุก ูุซููุงุช ูุฑูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุนุฏู ูุฌูุฏ ุทุฑููุฉ ูุนุจ ูุฏููุง ุญุชู ุงูุขู ุ ูุชู ุฅูุดุงุก ุงููุญุฏุงุช ูู ูุถุน ุงูุชุญุฑูุฑ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ููุจุบู ูุนุงูุฌุฉ ูุฐุง </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ุชููุฆุฉ ูุณุจูุฉ ุ ูุฐุง ุฃุถู ุญููุงู </font></font><code>HexUnit unitPrefab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฑุจุทู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexUnit unitPrefab;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/85c/b00/4bd/85cb004bd7bae06a6feaa8c93f144de9.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุตูู ุงููุจุงูู ุงูุฌุงูุฒุฉ</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุฅูุดุงุก ุงููุญุฏุงุช ุ ุณูุถุนูุง ุนูู ุงูุฎููุฉ ุชุญุช ุงููุคุดุฑ. </font><font style="vertical-align: inherit;">ููุฌุฏ </font></font><code>HandleInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูุฒ ููุจุญุซ ุนู ูุฐู ุงูุฎููุฉ ุนูุฏ ุชุญุฑูุฑ ุงูุชุถุงุฑูุณ. </font><font style="vertical-align: inherit;">ุงูุขู ูุญุชุงุฌู ุฃูุถูุง ูููุฑู ุ ูุฐูู ุณูููู ุงูุดูุฑุฉ ุงูููุงุจูุฉ ุฅูู ุทุฑููุฉ ูููุตูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetCellUnderCursor</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Ray inputRay = Camera.main.ScreenPointToRay(Input.mousePosition); RaycastHit hit; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Physics.Raycast(inputRay, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> hit)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hexGrid.GetCell(hit.point); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงุณุชุฎุฏุงู ูุฐู ุงูุทุฑููุฉ ูู </font></font><code>HandleInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุจุณูุทูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleInput</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Ray inputRay = Camera.main.ScreenPointToRay(Input.mousePosition); // RaycastHit hit; // if (Physics.Raycast(inputRay, out hit)) { // HexCell currentCell = hexGrid.GetCell(hit.point); HexCell currentCell = GetCellUnderCursor(); if (currentCell) { โฆ } else { previousCell = null; } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุฃุถู ุทุฑููุฉ ุฌุฏูุฏุฉ </font></font><code>CreateUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุชุฎุฏู ุฃูุถูุง </font></font><code>GetCellUnderCursor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ููุงู ุฎููุฉ ุ ูุณููุดุฆ ูุฑูุฉ ุฌุฏูุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateUnit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexCell cell = GetCellUnderCursor(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell) { Instantiate(unitPrefab); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุญูุงุธ ุนูู ุงูุชุณูุณู ุงููุฑูู ูุธูููุง ุ ุฏุนูุง ูุณุชุฎุฏู ุงูุดุจูุฉ ูุฃุตู ูุฌููุน ุนูุงุตุฑ ุงููุนุจุฉ ูู ุงููุฑู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateUnit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexCell cell = GetCellUnderCursor(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell) { HexUnit unit = Instantiate(unitPrefab); unit.transform.SetParent(hexGrid.transform, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุณูู ุทุฑููุฉ ูุฅุถุงูุฉ </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนู ูุฅูุดุงุก ูุญุฏุงุช ุจุงูุถุบุท ุนูู ููุชุงุญ. </font><font style="vertical-align: inherit;">ูู ุจุชุบููุฑ ุงูุทุฑููุฉ </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ุชุณุชุฏุนู </font></font><code>CreateUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ุชุถุบุท ุนูู ููุชุงุญ U. ููุง ูู ุงูุญุงู ูุน c </font></font><code>HandleInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฌุจ ุฃู ูุญุฏุซ ูุฐุง ุฅุฐุง ูู ููู ุงููุคุดุฑ ุฃุนูู ุนูุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ุณูุชุญูู ููุง ุฅุฐุง ูุงู ููุจุบู ุชุนุฏูู ุงูุฎุฑูุทุฉ ุ ูุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ูุณูู ูุชุญูู ููุง ุฅุฐุง ูุงู ููุจุบู ุนูููุง ุฅุถุงูุฉ ูุฑูุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุงุชุตู </font></font><code>CreateUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// if ( // Input.GetMouseButton(0) &amp;&amp; // !EventSystem.current.IsPointerOverGameObject() // ) { // HandleInput(); // } // else { // previousCell = null; // } if (!EventSystem.current.IsPointerOverGameObject()) { if (Input.GetMouseButton(0)) { HandleInput(); return; } if (Input.GetKeyDown(KeyCode.U)) { CreateUnit(); return; } } previousCell = null; }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/55e/b48/c86/55eb48c8601711d74720f29cfba7a4f3.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุฅูุดุงุก ูุซูู ูููุฑูุฉ</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุณูุจ ุงูููุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงูุขู ุฅูุดุงุก ูุญุฏุงุช ุ ููููุง ุชุธูุฑ ูู ุฃุตู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ูุถุนูุง ูู ุงูููุงู ุงูุตุญูุญ. </font><font style="vertical-align: inherit;">ููุฐุง ุ ูู ุงูุถุฑูุฑู ุฃู ุชููู ุงูููุงุช ุนูู ุนูู ุจูููููุง. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุถูู ุฅูู </font></font><code>HexUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุงุตูุฉ </font></font><code>Location</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏูุงูุฉ ุนูู ุงูุฎููุฉ ุงูุชู ูุดุบููููุง. </font><font style="vertical-align: inherit;">ุนูุฏ ุชุนููู ุงูุฎุงุตูุฉ ุ ุณูููู ุจุชุบููุฑ ููุถุน ุงููุฑูุฉ ุจุญูุซ ุชุชุทุงุจู ูุน ููุถุน ุงูุฎููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexCell Location { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> location; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { location = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; transform.localPosition = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.Position; } } HexCell location;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู </font></font><code>HexMapEditor.CreateUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู </font><font style="vertical-align: inherit;">ุฃููู </font><font style="vertical-align: inherit;">ุจุชุนููู ููุถุน ุฎููุฉ ุงููุฑูู ุชุญุช ุงููุคุดุฑ. </font><font style="vertical-align: inherit;">ุซู ุณุชููู ุงููุญุฏุงุช ุญูุซ ูุฌุจ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateUnit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexCell cell = GetCellUnderCursor(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell) { HexUnit unit = Instantiate(unitPrefab); unit.transform.SetParent(hexGrid.transform, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); unit.Location = cell; } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bf6/71f/92d/bf671f92d2e587bebec2bf08efafadbc.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑู ุนูู ุงูุฎุฑูุทุฉ</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุชุฌุงู ุงููุญุฏุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ุงูุขู ุ ุฌููุน ุงููุญุฏุงุช ููุง ููุณ ุงูุงุชุฌุงู ุ ูุงูุฐู ูุจุฏู ุบูุฑ ุทุจูุนู ุฅูู ุญุฏ ูุง. </font><font style="vertical-align: inherit;">ูุฅุนุงุฏุชูุง ุ ุฃุถู ุฅูู </font></font><code>HexUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุงุตูุฉ </font></font><code>Orientation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐู ูููุฉ ุนุงุฆูุฉ ุชุดูุฑ ุฅูู ุฏูุฑุงู ุงููุฌููุนุฉ ุนูู ุทูู ุงููุญูุฑ ุต ุจุงูุฏุฑุฌุงุช. </font><font style="vertical-align: inherit;">ุนูุฏ ุถุจุทู ุ ุณูููู ููููุง ูุฐูู ุจุชุบููุฑ ุฏูุฑุงู ูุงุฆู ุงููุนุจุฉ ููุณู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Orientation { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> orientation; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { orientation = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; transform.localRotation = Quaternion.Euler(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> orientation;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>HexMapEditor.CreateUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนููู ุฏูุฑุงู ุนุดูุงุฆู ูู 0 ุฅูู 360 ุฏุฑุฌุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateUnit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexCell cell = GetCellUnderCursor(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell) { HexUnit unit = Instantiate(unitPrefab); unit.transform.SetParent(hexGrid.transform, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); unit.Location = cell; unit.Orientation = Random.Range(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">360f</span></span>); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/74f/c4a/8c9/74fc4a8c943830b4abd6049889b41843.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุชุฌุงูุงุช ุงููุญุฏุฉ ุงููุฎุชููุฉ</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฑูุฉ ูุงุญุฏุฉ ููู ุฎููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุจุฏู ุงููุญุฏุงุช ุฌูุฏุฉ ุฅุฐุง ูู ูุชู ุฅูุดุงุคูุง ูู ุฎููุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุญุตู ุนูู ูุฌููุนุฉ ูู ุงูููุนุจุงุช ุงูุบุฑูุจุฉ ุงููุธูุฑ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9f8/a68/4b6/9f8a684b6425be20e23ac65901bf5888.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุงุช ูุชุฑุงูุจุฉ</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุณูุญ ุจุนุถ ุงูุฃูุนุงุจ ุจูุถุน ุนุฏุฉ ูุญุฏุงุช ูู ููุงู ูุงุญุฏ ุ ูุงูุจุนุถ ุงูุขุฎุฑ ูุง ูุณูุญ ุจุฐูู. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃูู ูู ุงูุฃุณูู ุงูุนูู ูุน ูุฑูุฉ ูุงุญุฏุฉ ููู ุฎููุฉ ุ ุณุฃุฎุชุงุฑ ูุฐุง ุงูุฎูุงุฑ. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ูุฌุจ ุนูููุง ุฅูุดุงุก ูุฑูุฉ ุฌุฏูุฏุฉ ููุท ุนูุฏูุง ูุง ุชููู ุงูุฎููุฉ ุงูุญุงููุฉ ูุดุบููุฉ. </font><font style="vertical-align: inherit;">ุญุชู ุชุชููู ูู ูุนุฑูุฉ ุฐูู ุ ุฃุถู ุฅูู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุงุตูุฉ ุงูููุงุณูุฉ </font></font><code>Unit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexUnit Unit { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ูุฐู ุงูุฎุงุตูุฉ </font></font><code>HexUnit.Location</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุนูุงู ุงูุฎููุฉ ุฅุฐุง ูุงูุช ุงููุญุฏุฉ ููุฌูุฏุฉ ุนูููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexCell Location { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> location; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { location = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.Unit = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; transform.localPosition = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.Position; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู </font></font><code>HexMapEditor.CreateUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ุงูุญุงููุฉ ูุฌุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateUnit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexCell cell = GetCellUnderCursor(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell &amp;&amp; !cell.Unit) { HexUnit unit = Instantiate(unitPrefab); unit.Location = cell; unit.Orientation = Random.Range(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">360f</span></span>); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุฑูุฑ ุงูุฎูุงูุง ุงููุดุบููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุจุฏุงูุฉ ุ ูุชู ูุถุน ุงููุญุฏุงุช ุจุดูู ุตุญูุญ ุ ูููู ูููู ุฃู ูุชุบูุฑ ูู ุดูุก ุฅุฐุง ุชู ุชุนุฏูู ุฎูุงูุงูุง ูุงุญููุง. </font><font style="vertical-align: inherit;">ุฅุฐุง ุชุบูุฑ ุงุฑุชูุงุน ุงูุฎููุฉ ุ ูุณูู ุชุชุฏูู ุงููุญุฏุฉ ุงูุชู ุชุดุบููุง ููููุง ุฃู ุชุบูุต ูููุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/27b/b7d/1c1/27bb7d1c120bc1546dfa0fd42823d66c.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑู ุงููุนููุฉ ูุงูุบุงุฑูุฉ</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุญู ูู ุงูุชุญูู ูู ูุถุน ุงููุฑูุฉ ุจุนุฏ ุฅุฌุฑุงุก ุงูุชุบููุฑุงุช. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุฃุถู ุงูุฃุณููุจ ุฅูู </font></font><code>HexUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุญุชู ุงูุขู ุ ูุญู ููุชููู ููุท ุจูุถุน ุงููุฑูู ุ ูุฐุง ุงุณุฃููู ูุฑุฉ ุฃุฎุฑู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ValidateLocation</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { transform.localPosition = location.Position; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุนูููุง ุชูุณูู ูููุน ุงูุงููุตุงู ุนูุฏ ุชุญุฏูุซ ุงูุฎููุฉ ุ ูุงุฐุง ูุญุฏุซ ุนูุฏูุง </font><font style="vertical-align: inherit;">ูุชู </font><font style="vertical-align: inherit;">ุงุณุชุฏุนุงุก </font><font style="vertical-align: inherit;">ุงูุฃุณุงููุจ </font></font><code>Refresh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู </font></font><code>RefreshSelfOnly</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงุฆู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ูุฐุง ุถุฑูุฑู ููุท ุนูุฏูุง ูููู ููุงู ุงููุตุงู ุญูููู ูู ุงูุฒูุฒุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Refresh</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (chunk) { chunk.Refresh(); โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Unit) { Unit.ValidateLocation(); } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RefreshSelfOnly</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { chunk.Refresh(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Unit) { Unit.ValidateLocation(); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฒุงูุฉ ุงููุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฅูุดุงุก ูุญุฏุงุช ุ ุณูููู ูู ุงููููุฏ ุชุฏููุฑูุง. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฃุถู ุฅูู </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุณููุจ </font></font><code>DestroyUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฌุจ ุนููู ุงูุชุญูู ููุง ุฅุฐุง ูุงู ููุงู ุงููุตุงู ูู ุงูุฎููุฉ ุชุญุช ุงููุคุดุฑ ุ ูุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ุชุฏููุฑ ูุงุฆู ุงููุนุจุฉ ููุงููุตุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyUnit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexCell cell = GetCellUnderCursor(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell &amp;&amp; cell.Unit) { Destroy(cell.Unit.gameObject); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฌู ููุงุญุธุฉ ุ ูููุตูู ุฅูู ุงููุฑูุฉ ุ ููุฑ ุนุจุฑ ุงูุฒูุฒุงูุฉ. </font><font style="vertical-align: inherit;">ููุชูุงุนู ูุน ุงููุฑูู ุ ูุง ุนููู ุณูู ุชุญุฑูู ุงููุงูุณ ููู ุฎููุชู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ููู ููุฌุญ ูุฐุง ุ ูุง ูุฌุจ ุฃู ูููู ูุฏู ุงููุฑูุฉ ูุตุงุฏู. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุฅู ุฅุถุงูุฉ ูุตุงุฏู ูุฌุนู ูู ุงูุณูู ุงูุชุญุฏูุฏ ูุฃูู ูููุน ุงูุฃุดุนุฉ ุงูุชู ูุฏ ุชุตุทุฏู ุจุงูุฎููุฉ ุฎูู ุงููุฑูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนููุง </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ูุฒูุฌูุง ูู Shift + U ุงูุฃูุณุฑ </font><font style="vertical-align: inherit;">ูุชุฏููุฑ ุงููุฑูุฉ </font><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKeyDown(KeyCode.U)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.LeftShift)) { DestroyUnit(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { CreateUnit(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุญุงูุฉ ุฅูุดุงุก ุงูุนุฏูุฏ ูู ุงููุญุฏุงุช ูุชุฏููุฑูุง ุ ุฏุนูุง ูููู ุญุฐุฑูู ูููุณุญ ุงูุฎุงุตูุฉ ุนูุฏ ุฅุฒุงูุฉ ุงููุญุฏุฉ. </font><font style="vertical-align: inherit;">ุฃู ุฃููุง ูููู ุจูุถูุญ ุงุฑุชุจุงุท ุงูุฎููุฉ ุจุงููุฑูู. </font><font style="vertical-align: inherit;">ุฃุถู ุฅูู </font></font><code>HexUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font></font><code>Die</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชู ุชุชุนุงูู ูุน ูุฐุง ุ ูุถูุง ุนู ุชุฏููุฑ ูุงุฆู ุงููุนุจุฉ ุงูุฎุงุตุฉ ุจู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Die</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { location.Unit = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; Destroy(gameObject); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุณุชุฏุนู ูุฐู ุงูุทุฑููุฉ </font></font><code>HexMapEditor.DestroyUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููู ูุฏูุฑ ุงููุฑูุฉ ูุจุงุดุฑุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyUnit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexCell cell = GetCellUnderCursor(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell &amp;&amp; cell.Unit) { <span class="hljs-comment"><span class="hljs-comment">// Destroy(cell.Unit.gameObject); cell.Unit.Die(); } }</span></span></code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅููุงุฐ ูุชุญููู ูุฑู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญ ูุฏููุง ูุญุฏุงุช ุนูู ุงูุฎุฑูุทุฉ ุ ูุฌุจ ุนูููุง ุชุถููููุง ูู ุนูููุฉ ุงูุญูุธ ูุงูุชุญููู. </font><font style="vertical-align: inherit;">ูููููุง ุงูุชุนุงูู ูุน ูุฐู ุงููููุฉ ุจุทุฑููุชูู. </font><font style="vertical-align: inherit;">ุงูุฃูู ูู ุชุณุฌูู ุจูุงูุงุช ุงููุฑูุฉ ุนูุฏ ุชุณุฌูู ุฎููุฉ ุจุญูุซ ูุชู ุฎูุท ุจูุงูุงุช ุงูุฎููุฉ ูุงููุฑูุฉ. </font><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุซุงููุฉ ูู ุญูุธ ุจูุงูุงุช ุงูุฎููุฉ ูุงููุฑูุฉ ุจุดูู ูููุตู. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃูู ูุฏ ูุจุฏู ุฃู ุงูุทุฑููุฉ ุงูุฃููู ุฃุณูู ูู ุงูุชูููุฐ ุ ุฅูุง ุฃู ุงูุทุฑููุฉ ุงูุซุงููุฉ ุชุนุทููุง ุงููุฒูุฏ ูู ุงูุจูุงูุงุช ุงูููุธูุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ุดุงุฑููุง ุงูุจูุงูุงุช ุ ูุณูููู ูู ุงูุณูู ุงูุนูู ูุนูุง ูู ุงููุณุชูุจู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุชุจุน ุงููุญุฏุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญูุงุธ ุนูู ุฌููุน ุงููุญุฏุงุช ูุนูุง ุ ูุญุชุงุฌ ุฅูู ุชุชุจุนูุง. </font><font style="vertical-align: inherit;">ุณูููู ุจุฐูู ุนู ุทุฑูู ุงูุฅุถุงูุฉ ุฅูู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ุงููุญุฏุงุช. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชุญุชูู ูุฐู ุงููุงุฆูุฉ ุนูู ุฌููุน ุงููุญุฏุงุช ุนูู ุงูุฎุฑูุทุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> List&lt;HexUnit&gt; units = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;HexUnit&gt;();</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุฅูุดุงุก ุฃู ุชุญููู ุฎุฑูุทุฉ ุฌุฏูุฏุฉ ุ ูุญุชุงุฌ ุฅูู ุงูุชุฎูุต ูู ุฌููุน ุงููุญุฏุงุช ุนูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูุชุจุณูุท ูุฐู ุงูุนูููุฉ ุ ูู ุจุฅูุดุงุก ุทุฑููุฉ </font></font><code>ClearUnits</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุชู ูู ูุฑุฏ ูู ุงููุงุฆูุฉ ููุณุญูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClearUnits</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; units.Count; i++) { units[i].Die(); } units.Clear(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ูุณูู ูุฐุง ุงูุฃุณููุจ </font></font><code>CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููู ุจุฐูู ุจุนุฏ ุชูุธูู ุงูุทุฑูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { โฆ ClearPath(); ClearUnits(); โฆ } โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> header</span></span></span><span class="hljs-function">)</span></span> { ClearPath(); ClearUnits(); โฆ }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุถุงูุฉ ูุฑู ุฅูู ุงูุดุจูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุ ุนูุฏ ุฅูุดุงุก ูุญุฏุงุช ุฌุฏูุฏุฉ ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุชูุง ุฅูู ุงููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุถุน ุทุฑููุฉ ูุฐูู </font></font><code>AddUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุชู ุณุชุชูุงูู ุฃูุถูุง ูููุน ุงููุฑูุฉ ููุนููุงุช ุงููุงุฆู ุงูุฃุตูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddUnit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexUnit unit, HexCell location, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> orientation</span></span></span><span class="hljs-function">)</span></span> { units.Add(unit); unit.transform.SetParent(transform, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); unit.Location = location; unit.Orientation = orientation; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู </font></font><code>HexMapEditor.CreatUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ูุงูููุง ุงูุงุชุตุงู </font></font><code>AddUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุซูู ุฌุฏูุฏ ููุงููุตุงู ููููุนู ูุงุชุฌุงูู ุงูุนุดูุงุฆู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateUnit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexCell cell = GetCellUnderCursor(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell &amp;&amp; !cell.Unit) { <span class="hljs-comment"><span class="hljs-comment">// HexUnit unit = Instantiate(unitPrefab); // unit.transform.SetParent(hexGrid.transform, false); // unit.Location = cell; // unit.Orientation = Random.Range(0f, 360f); hexGrid.AddUnit( Instantiate(unitPrefab), cell, Random.Range(0f, 360f) ); } }</span></span></code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฒุงูุฉ ุงููุฑู ูู ุงูุดุจูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุทุฑููุฉ ูุฅุฒุงูุฉ ุงููุฑูู ู ุฌ </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุท ูู ุจุฅุฎุฑุงุฌ ุงููุฑูู ูู ุงููุงุฆูุฉ ูุงุทูุจ ููู ุฃู ูููุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveUnit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexUnit unit</span></span></span><span class="hljs-function">)</span></span> { units.Remove(unit); unit.Die(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูู ูุฐู ุงูุทุฑููุฉ </font></font><code>HexMapEditor.DestroyUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุจุฏูุงู ูู ุชุฏููุฑ ุงููุฑูุฉ ูุจุงุดุฑุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyUnit</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexCell cell = GetCellUnderCursor(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell &amp;&amp; cell.Unit) { <span class="hljs-comment"><span class="hljs-comment">// cell.Unit.Die(); hexGrid.RemoveUnit(cell.Unit); } }</span></span></code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุฏุงุช ุงูุชูููุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ุณูุญุชูุธ ุจุฌููุน ุงููุญุฏุงุช ูุนูุง ุ ูุญุชุงุฌ ุฅูู ุชุฐูุฑ ุงูุฎูุงูุง ุงูุชู ุชุดุบููุง. </font><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุฃูุซุฑ ููุซูููุฉ ูู ุญูุธ ุฅุญุฏุงุซูุงุช ูููุนูู. </font><font style="vertical-align: inherit;">ูุฌุนู ูุฐุง ูููููุง ุ ูุถูู </font><font style="vertical-align: inherit;">ุงูุญูููู X ู Z </font><font style="vertical-align: inherit;">ุฅูู </font></font><code>HexCoordinates</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font></font><code>Save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชู ููุชุจูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; [System.Serializable] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> HexCoordinates { โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryWriter writer</span></span></span><span class="hljs-function">)</span></span> { writer.Write(x); writer.Write(z); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ </font></font><code>Save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>HexUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงูุขู ุชุณุฌูู ุงูุฅุญุฏุงุซูุงุช ูุงูุชูุฌู ูููุญุฏุฉ. </font><font style="vertical-align: inherit;">ูุฐู ูู ุฌููุน ุจูุงูุงุช ุงููุญุฏุงุช ุงูุชู ูุฏููุง ูู ุงูููุช ุงูุญุงูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HexUnit</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryWriter writer</span></span></span><span class="hljs-function">)</span></span> { location.coordinates.Save(writer); writer.Write(orientation); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃูู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุชุจุน ุงููุญุฏุงุช ุ ูุฅู ุทุฑููุชู </font></font><code>Save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชุณุฌู ุจูุงูุงุช ุงููุญุฏุงุช. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ุงูุชุจ ุงูุนุฏุฏ ุงูุฅุฌูุงูู ูููุญุฏุงุช ุ ุซู ุงูุชูู ุญูููุง ุฌููุนูุง ูู ุญููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryWriter writer</span></span></span><span class="hljs-function">)</span></span> { writer.Write(cellCountX); writer.Write(cellCountZ); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Save(writer); } writer.Write(units.Count); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; units.Count; i++) { units[i].Save(writer); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง ุจุชุบููุฑ ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ุ ูุฐูู ุณูููู ุจุฒูุงุฏุฉ ุฑูู ุงูุฅุตุฏุงุฑ </font></font><code>SaveLoadMenu.Save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู 2. ุณูุธู ุฑูุฒ ุงูุชูููุฏ ุงููุฏูู ูุนูู ุ ูุฃูู ุจุจุณุงุทุฉ ูู ููุฑุฃ ุจูุงูุงุช ุงููุฑูู. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุฒูุงุฏุฉ ุฑูู ุงูุฅุตุฏุงุฑ ููุฅุดุงุฑุฉ ุฅูู ูุฌูุฏ ูุนูููุงุช ูุญุฏุฉ ูู ุงูููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> path</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> ( BinaryWriter writer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryWriter(File.Open(path, FileMode.Create)) ) { writer.Write(<span class="hljs-number"><span class="hljs-number">2</span></span>); hexGrid.Save(writer); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญููู ุงููุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃูู </font></font><code>HexCoordinates</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุ ููุง ูุนูู ูุฅุถุงูุฉ ุงูุทุฑููุฉ ุงููุนุชุงุฏุฉ ุฅููู </font></font><code>Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุฌุนููุง ุทุฑููุฉ ุซุงุจุชุฉ ุชูุฑุฃ ุงูุฅุญุฏุงุซูุงุช ุงููุฎุฒูุฉ ูุชุฑุฌุนูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> HexCoordinates </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader</span></span></span><span class="hljs-function">)</span></span> { HexCoordinates c; cx = reader.ReadInt32(); cz = reader.ReadInt32(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> c; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุนุฏุฏ ุงููุญุฏุงุช ูุชุบูุฑ ุ ูููุณ ูุฏููุง ูุญุฏุงุช ููุฌูุฏุฉ ูุณุจููุง ูููู ุชุญููู ุงูุจูุงูุงุช ูููุง. </font><font style="vertical-align: inherit;">ูููููุง ุฅูุดุงุก ูุซููุงุช ุฌุฏูุฏุฉ ูููุญุฏุงุช ูุจู ุชุญููู ุจูุงูุงุชูุง ุ ูููู ูุฐุง ุณูุชุทูุจ ุฃู ูููู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฅูุดุงุก ูุซููุงุช ูููุญุฏุงุช ุงูุฌุฏูุฏุฉ ูู ููุช ุงูุชูููุฏ. </font><font style="vertical-align: inherit;">ูุฐุง ูู ุงูุฃูุถู ุชุฑููุง </font></font><code>HexUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุฃูุถูุง ุงูุทุฑููุฉ ุงูุซุงุจุชุฉ </font></font><code>HexUnit.Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุจุฏุฃ ุจุจุณุงุทุฉ ุจูุฑุงุกุฉ ูุฐู ุงููุฑู. </font><font style="vertical-align: inherit;">ููุฑุงุกุฉ ูููุฉ ุชุนููู ุงูุงุชุฌุงู ุ ูุณุชุฎุฏู ุงูุทุฑููุฉ </font></font><code>BinaryReader.ReadSingle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ุฃุนุฒุจุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  <code>float</code>        ,     .     ,   <code>double</code> ,     .  Unity   . </div></div><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader</span></span></span><span class="hljs-function">)</span></span> { HexCoordinates coordinates = HexCoordinates.Load(reader); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> orientation = reader.ReadSingle(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุฅูุดุงุก ูุซูู ูุชุดูููุฉ ุฌุฏูุฏุฉ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุญุชุงุฌ ููุฐุง ุฑุงุจุทูุง ุฅูู ุงููุญุฏุฉ ุงูุฌุงูุฒุฉ. </font><font style="vertical-align: inherit;">ุญุชู ูุง ูุนูุฏ ุงูุฃูุฑ ุจุนุฏ ุ ุฏุนูุง ูุถูู </font></font><code>HexUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ ุซุงุจุชุฉ </font><font style="vertical-align: inherit;">ูุฐูู </font><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> HexUnit unitPrefab;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุนููู ูุฐุง ุงูุฑุงุจุท ุ ุฏุนูุง ูุณุชุฎุฏูู ูุฑุฉ ุฃุฎุฑู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุง ูุนููุง ูุน ูุณูุฌ ุงูุถุฌูุฌ. </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุญุชุงุฌ ุฅูู ุฏุนู ุงูุนุฏูุฏ ูู ุฃููุงุน ุงููุญุฏุงุช ุ ุณููุชูู ุฅูู ุญู ุฃูุถู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexUnit unitPrefab; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexMetrics.noiseSource = noiseSource; HexMetrics.InitializeHashGrid(seed); HexUnit.unitPrefab = unitPrefab; CreateMap(cellCountX, cellCountZ); } โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEnable</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!HexMetrics.noiseSource) { HexMetrics.noiseSource = noiseSource; HexMetrics.InitializeHashGrid(seed); HexUnit.unitPrefab = unitPrefab; } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/251/e2e/9c0/251e2e9c0e0f9ec8c6da0a0a7bce6f85.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุชุงุฒ ุงููุญุฏุงุช ุงูุฌุงูุฒุฉ.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุฏ ุชูุตูู ุงูุญูู ุ ูู ูุนุฏ ุจุญุงุฌุฉ ุฅูู ุฑุงุจุท ูุจุงุดุฑ ุฅููู </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ููููู ุงุณุชุฎุฏุงูู </font></font><code>HexUnit.unitPrefab</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// public HexUnit unitPrefab; โฆ void CreateUnit () { HexCell cell = GetCellUnderCursor(); if (cell &amp;&amp; !cell.Unit) { hexGrid.AddUnit( Instantiate(HexUnit.unitPrefab), cell, Random.Range(0f, 360f) ); } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุฅูุดุงุก ูุซูู ูููุฑูู ุงูุฌุฏูุฏ </font></font><code>HexUnit.Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฅุนุงุฏุชู ุ ูููููุง ุงุณุชุฎุฏุงู ุงูุฅุญุฏุงุซูุงุช ุงููุญููุฉ ูุงูุชูุฌูู ูุฅุถุงูุชูุง ุฅูู ุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ูุฌุนู ูุฐุง ูููููุง ุ ุฃุถู ูุนููุฉ </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader, HexGrid grid</span></span></span><span class="hljs-function">)</span></span> { HexCoordinates coordinates = HexCoordinates.Load(reader); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> orientation = reader.ReadSingle(); grid.AddUnit( Instantiate(unitPrefab), grid.GetCell(coordinates), orientation ); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููุงูุฉ ุ </font></font><code>HexGrid.Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุณุจ ุนุฏุฏ ุงููุญุฏุงุช ููุณุชุฎุฏููุง ูุชุญููู ุฌููุน ุงููุญุฏุงุช ุงููุฎุฒูุฉ ุ ูููุฑุฑ ุฃููุณูุง ูุญุฌุฉ ุฅุถุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> header</span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> unitCount = reader.ReadInt32(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; unitCount; i++) { HexUnit.Load(reader, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงูุทุจุน ุ ุณูุนูู ูุฐุง ููุท ูุญูุธ ุงููููุงุช ุฐุงุช ุงูุฅุตุฏุงุฑ ุงูุฐู ูุง ููู ุนู 2 ุ ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฃุญุฏุซ ูุง ุชูุฌุฏ ูุญุฏุงุช ููุชุญููู. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (header &gt;= <span class="hljs-number"><span class="hljs-number">2</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> unitCount = reader.ReadInt32(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; unitCount; i++) { HexUnit.Load(reader, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงูุขู ุชุญููู ูููุงุช ุงูุฅุตุฏุงุฑ 2 ุจุดูู ุตุญูุญ ุ ูุฐูู </font></font><code>SaveLoadMenu.Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฒูุงุฏุฉ ุนุฏุฏ ุงููุณุฎุฉ ุงููุฏุนููุฉ ุฅูู 2.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> path</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!File.Exists(path)) { Debug.LogError(<span class="hljs-string"><span class="hljs-string">"File does not exist "</span></span> + path); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (BinaryReader reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryReader(File.OpenRead(path))) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> header = reader.ReadInt32(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (header &lt;= <span class="hljs-number"><span class="hljs-number">2</span></span>) { hexGrid.Load(reader, header); HexMapCamera.ValidatePosition(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.LogWarning(<span class="hljs-string"><span class="hljs-string">"Unknown map format "</span></span> + header); } } }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุฑูุฉ ุงูููุงุช </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑู ูุชูููุฉ ุ ูุฐุง ูุฌุจ ุฃู ูููู ูุงุฏุฑูู ุนูู ุชุญุฑูููู ุญูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูุฏููุง ุจุงููุนู ุฑูุฒ ุจุญุซ ุงููุณุงุฑ ุ ูููู ุญุชู ุงูุขู ูููุง ุจุงุฎุชุจุงุฑู ููุท ููุฃูุงูู ุงูุนุดูุงุฆูุฉ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุงูุขู ุฅูู ุฅุฒุงูุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุชุฌุฑูุจูุฉ ุงููุฏููุฉ ูุฅูุดุงุก ูุงุฌูุฉ ูุณุชุฎุฏู ุฌุฏูุฏุฉ ูุฅุฏุงุฑุฉ ุงููุฑูู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุธูู ูุญุฑุฑ ุงูุฎุฑุงุฆุท </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฏ ุชุญุฑูู ุงููุญุฏุงุช ุนูู ุทูู ุงููุณุงุฑุงุช ุฌุฒุกูุง ูู ุทุฑููุฉ ุงููุนุจ ุ ููุง ููุทุจู ุนูู ูุญุฑุฑ ุงูุฎุฑุงุฆุท. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูู ูุชุฎูุต </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฌููุน ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุฑุชุจุทุฉ ุจุฅูุฌุงุฏ ุงููุณุงุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// HexCell previousCell, searchFromCell, searchToCell; HexCell previousCell; โฆ void HandleInput () { HexCell currentCell = GetCellUnderCursor(); if (currentCell) { if (previousCell &amp;&amp; previousCell != currentCell) { ValidateDrag(currentCell); } else { isDrag = false; } if (editMode) { EditCells(currentCell); } // else if ( // Input.GetKey(KeyCode.LeftShift) &amp;&amp; searchToCell != currentCell // ) { // if (searchFromCell != currentCell) { // if (searchFromCell) { // searchFromCell.DisableHighlight(); // } // searchFromCell = currentCell; // searchFromCell.EnableHighlight(Color.blue); // if (searchToCell) { // hexGrid.FindPath(searchFromCell, searchToCell, 24); // } // } // } // else if (searchFromCell &amp;&amp; searchFromCell != currentCell) { // if (searchToCell != currentCell) { // searchToCell = currentCell; // hexGrid.FindPath(searchFromCell, searchToCell, 24); // } // } previousCell = currentCell; } else { previousCell = null; } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฅุฒุงูุฉ ูุฐุง ุงูุฑูุฒ ุ ูู ูุนุฏ ูู ุงูููุทูู ุชุฑู ุงููุญุฑุฑ ูุดุทูุง ุนูุฏูุง ูุง ูููู ูู ูุถุน ุงูุชุญุฑูุฑ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุจุฏูุงู ูู ุญูู ุชุชุจุน ุงููุถุน ุ ูููููุง ุจุจุณุงุทุฉ ุชูููู ุฃู ุชุนุทูู ุงููููู </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ูุชุนูู ุนูู ุงููุญุฑุฑ ุงูุขู ุงูุชุนุงูู ูุน ุชุณููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// bool editMode; โฆ public void SetEditMode (bool toggle) { // editMode = toggle; // hexGrid.ShowUI(!toggle); enabled = toggle; } โฆ void HandleInput () { HexCell currentCell = GetCellUnderCursor(); if (currentCell) { if (previousCell &amp;&amp; previousCell != currentCell) { ValidateDrag(currentCell); } else { isDrag = false; } // if (editMode) { EditCells(currentCell); // } previousCell = currentCell; } else { previousCell = null; } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธุฑูุง ูุฃููุง ุงูุชุฑุงุถููุง ูุณูุง ูู ูุถุน ุชุญุฑูุฑ ุงูุฎุฑูุทุฉ ุ ูุฅููุง ูู Awake ุณูููู ุจุชุนุทูู ุงููุญุฑุฑ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { terrainMaterial.DisableKeyword(<span class="hljs-string"><span class="hljs-string">"GRID_ON"</span></span>); SetEditMode(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฏ ุงุณุชุฎุฏุงู raycast ููุจุญุซ ุนู ุงูุฎููุฉ ุงูุญุงููุฉ ุชุญุช ุงููุคุดุฑ ุฃูุฑูุง ุถุฑูุฑููุง ุนูุฏ ุชุญุฑูุฑ ุงูุฎุฑูุทุฉ ูุฅุฏุงุฑุฉ ุงููุญุฏุงุช. </font><font style="vertical-align: inherit;">ุฑุจูุง ูู ุงููุณุชูุจู ุณูููู ูููุฏูุง ููุง ูุดูุก ุขุฎุฑ. </font><font style="vertical-align: inherit;">ุฏุนูุง ูููู ููุทู ุงูุจุซ ุงูุฅุดุนุงุนู ูู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ ุฌุฏูุฏุฉ </font></font><code>GetCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ูุนููุฉ ุดุนุงุน.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Ray ray</span></span></span><span class="hljs-function">)</span></span> { RaycastHit hit; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Physics.Raycast(ray, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> hit)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> GetCell(hit.point); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br> <code>HexMapEditor.GetCellUniderCursor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ููุท ุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑููุฉ ูุน ุดุนุงุน ุงููุคุดุฑ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">HexCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetCellUnderCursor</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hexGrid.GetCell(Camera.main.ScreenPointToRay(Input.mousePosition)); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุนุจุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุญูู ูู ูุงุฌูุฉ ูุณุชุฎุฏู ูุถุน ุงููุนุจุฉ ุ ุณูุณุชุฎุฏู ูููููุง ุฌุฏูุฏูุง. </font><font style="vertical-align: inherit;">ุจูููุง ุณูุชุนุงูู ููุท ูุน ุงุฎุชูุงุฑ ูุญุฑูุฉ ุงููุญุฏุงุช. </font><font style="vertical-align: inherit;">ูู ุจุฅูุดุงุก ููุน ูููู ุฌุฏูุฏ ูู </font></font><code>HexGameUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููููุงู ุจุนููู ุ ูููู ุงูุงุฑุชุจุงุท ุจุงูุดุจูุฉ ุจุงููุณุจุฉ ูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.EventSystems; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HexGameUI</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexGrid grid; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ูุฐุง ุงููููู ุฅูู ูุงุฆู ุงููุนุจุฉ ุงูุฌุฏูุฏ ูู ุงูุชุณูุณู ุงููุฑูู ููุงุฌูุฉ ุงููุณุชุฎุฏู. </font><font style="vertical-align: inherit;">ููุณ ูู ุงูุถุฑูุฑู ุฃู ูููู ูุฏูู ูุฏูู ุงูุฎุงุต ุ ูููู ุณูููู ูู ุงููุงุถุญ ููุง ุฃู ููุงู ูุงุฌูุฉ ูุณุชุฎุฏู ูููุตูุฉ ููุนุจุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/515/769/bdd/515769bdd0b6fbee9cb8451348595a57.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9b3/b7c/0d7/9b3b7c0d719d05862a76ba8e70409970.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆู ูุงุฌูุฉ ูุณุชุฎุฏู ุงููุนุจุฉ</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุถุงูุฉ </font></font><code>HexGameUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ </font></font><code>SetEditMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุง ูู </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฌุจ ุชุดุบูู ูุงุฌูุฉ ูุณุชุฎุฏู ุงููุนุจุฉ ุนูุฏูุง ูุง ูููู ูู ูุถุน ุงูุชุญุฑูุฑ. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃูุถูุง ุชุถููู ุงูุชุตูููุงุช ููุง ูุฃู ูุงุฌูุฉ ูุณุชุฎุฏู ุงููุนุจุฉ ุชุนูู ูุน ุงููุณุงุฑุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetEditMode</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> toggle</span></span></span><span class="hljs-function">)</span></span> { enabled = !toggle; grid.ShowUI(!toggle); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุทุฑููุฉ ูุงุฌูุฉ ูุณุชุฎุฏู ุงููุนุจุฉ ูุน ูุงุฆูุฉ ุงูุฃุญุฏุงุซ ุงูุฎุงุตุฉ ุจูุจุฏู ูุถุน ุงูุชุญุฑูุฑ. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ุนูุฏูุง ูููู ุงููุงุนุจ ุจุชุบููุฑ ุงููุถุน ุ ูุชู ุงุณุชุฏุนุงุก ููุชุง ุงูุทุฑููุชูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/92b/dde/778/92bdde778bfc97ae4b5bdc1d49a2bb6b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุนุฏูุฏ ูู ุทุฑู ุงูุญุฏุซ. </font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุชุจุน ุงูุฎููุฉ ุงูุญุงููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุงุกู ุนูู ุงููููู ุ </font></font><code>HexGameUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชุงุฌ ุฅูู ูุนุฑูุฉ ุงูุฎููุฉ ุงูููุฌูุฏุฉ ุญุงูููุง ุชุญุช ุงููุคุดุฑ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูููู ุจุฅุถุงูุฉ ุญูู ุฅููู </font></font><code>currentCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexCell currentCell;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุฅูุดุงุก ุทุฑููุฉ </font></font><code>UpdateCurrentCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุชุฎุฏู </font></font><code>HexGrid.GetCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุนุงุน ุงููุคุดุฑ ูุชุญุฏูุซ ูุฐุง ุงูุญูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateCurrentCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { currentCell = grid.GetCell(Camera.main.ScreenPointToRay(Input.mousePosition)); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุชุญุฏูุซ ุงูุฎููุฉ ุงูุญุงููุฉ ุ ูุฏ ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ูุง ุฅุฐุง ูุงูุช ูุฏ ุชุบูุฑุช. </font><font style="vertical-align: inherit;">ูุฑุถ </font></font><code>UpdateCurrentCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุนุงุฏุฉ ูุฐู ุงููุนูููุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateCurrentCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexCell cell = grid.GetCell(Camera.main.ScreenPointToRay(Input.mousePosition)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell != currentCell) { currentCell = cell; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุฎุชูุงุฑ ุงููุญุฏุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ููู ูุฑูุฉ ุ ูุฌุจ ุชุญุฏูุฏูุง ูุชุชุจุนูุง. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ุจุฅุถุงูุฉ ุญูู </font></font><code>selectedUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexUnit selectedUnit;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูุญุงูู ุฅุฌุฑุงุก ุชุญุฏูุฏ ุ ูุญุชุงุฌ ุฅูู ุงูุจุฏุก ุจุชุญุฏูุซ ุงูุฎููุฉ ุงูุญุงููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูุฎููุฉ ุงูุญุงููุฉ ุ ูุฅู ุงููุญุฏุฉ ุงูุชู ุชุดุบู ูุฐู ุงูุฎููุฉ ุชุตุจุญ ุงููุญุฏุฉ ุงููุญุฏุฏุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ุชูู ููุงู ูุญุฏุฉ ูู ุงูุฎููุฉ ุ ููู ูุชู ุชุญุฏูุฏ ุฃู ูุญุฏุฉ. </font><font style="vertical-align: inherit;">ุฏุนููุง ููุดุฆ ุทุฑููุฉ ูุฐูู </font></font><code>DoSelection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoSelection</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { UpdateCurrentCell(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentCell) { selectedUnit = currentCell.Unit; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏุฑู ุงุฎุชูุงุฑ ุงููุญุฏุงุช ุจููุฑุฉ ุจุณูุทุฉ ุนูู ุงููุฃุฑุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุถูู ุทุฑููุฉ </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููู ุจุงูุงุฎุชูุงุฑ ุนูุฏ ุชูุดูุท ุฒุฑ ุงููุงูุณ. ุจุงูุทุจุน ุ ูุญุชุงุฌ ุฅูู ุชูููุฐูุง ููุท ุนูุฏูุง ูุง ูููู ุงููุคุดุฑ ุฃุนูู ุนูุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!EventSystem.current.IsPointerOverGameObject()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetMouseButtonDown(<span class="hljs-number"><span class="hljs-number">0</span></span>)) { DoSelection(); } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงููุฑุญูุฉ ุ ุชุนูููุง ููููุฉ ุชุญุฏูุฏ ูุญุฏุฉ ูุงุญุฏุฉ ูู ูู ูุฑุฉ ุจููุฑุฉ ูุงูุณ. </font><font style="vertical-align: inherit;">ุนูุฏ ุงูููุฑ ููู ุฎููุฉ ูุงุฑุบุฉ ุ ุชุชู ุฅุฒุงูุฉ ุชุญุฏูุฏ ุฃู ูุญุฏุฉ. </font><font style="vertical-align: inherit;">ูููู ูู ุญูู ุฃููุง ูุง ูุชููู ุฃู ุชุฃููุฏ ูุฑุฆู ุนูู ุฐูู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุญุซ ูุฑูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุชุญุฏูุฏ ุงููุญุฏุฉ ุ ูููููุง ุงุณุชุฎุฏุงู ูููุนูุง ูููุทุฉ ุจุฏุงูุฉ ููุนุซูุฑ ุนูู ูุณุงุฑ. </font><font style="vertical-align: inherit;">ูุชูุดูุท ูุฐุง ุ ูู ูุทูุจ ููุฑุฉ ุฃุฎุฑู ุนูู ุฒุฑ ุงููุงูุณ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ุณูุฌุฏ ุชููุงุฆููุง ููุธูุฑ ุงููุณุงุฑ ุจูู ููุถุน ุงููุฌููุนุฉ ูุงูุฎููุฉ ุงูุญุงููุฉ. </font><font style="vertical-align: inherit;">ุณููุนู ุฐูู ุฏุงุฆููุง </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุจุงุณุชุซูุงุก ููุช ุงูุงุฎุชูุงุฑ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุนูุฏูุง ูููู ูุฏููุง ููุฑุฒุฉ ุ ูุณูู ุงูุทุฑููุฉ </font></font><code>DoPathfinding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!EventSystem.current.IsPointerOverGameObject()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetMouseButtonDown(<span class="hljs-number"><span class="hljs-number">0</span></span>)) { DoSelection(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (selectedUnit) { DoPathfinding(); } } }</code> </pre> <br> <code>DoPathfinding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุฑุฏ ุชุญุฏูุซ ุงูุฎููุฉ ุงูุญุงููุฉ ูุงูููุงููุงุช </font></font><code>HexGrid.FindPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ููุงู ููุทุฉ ููุงูุฉ. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู ูุฑุฉ ุฃุฎุฑู ุณุฑุนุฉ ุซุงุจุชุฉ ุชุจูุบ 24.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoPathfinding</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { UpdateCurrentCell(); grid.FindPath(selectedUnit.Location, currentCell, <span class="hljs-number"><span class="hljs-number">24</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฑุฌู ููุงุญุธุฉ ุฃูู ูุง ููุจุบู ููุง ุงูุนุซูุฑ ุนูู ูุณุงุฑ ุฌุฏูุฏ ูู ูู ูุฑุฉ ูููู ูููุง ุจุงูุชุญุฏูุซ ุ ูููู ููุท ุนูุฏูุง ุชุชุบูุฑ ุงูุฎููุฉ ุงูุญุงููุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoPathfinding</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (UpdateCurrentCell()) { grid.FindPath(selectedUnit.Location, currentCell, <span class="hljs-number"><span class="hljs-number">24</span></span>); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/39f/8d1/ce9/39f8d1ce9040ae5370fd12f447ecd8e7.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุญุซ ุนู ูุณุงุฑ ูุฑูุฉ</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ูุฑู ุงููุณุงุฑุงุช ุงูุชู ุชุธูุฑ ุนูุฏ ุชุญุฑูู ุงููุคุดุฑ ุจุนุฏ ุงุฎุชูุงุฑ ูุฑูุฉ. </font><font style="vertical-align: inherit;">ุจูุถู ูุฐุง ุ ูู ุงููุงุถุญ ุฃู ูุญุฏุฉ ูุชู ุงุฎุชูุงุฑูุง. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุง ูุชู ูุณุญ ุงููุณุงุฑุงุช ุฏุงุฆููุง ุจุดูู ุตุญูุญ. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ุฏุนูุง ููุณุญ ุงููุณุงุฑ ุงููุฏูู ุฅุฐุง ูุงู ุงููุคุดุฑ ุฎุงุฑุฌ ุงูุฎุฑูุทุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoPathfinding</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (UpdateCurrentCell()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentCell) { grid.FindPath(selectedUnit.Location, currentCell, <span class="hljs-number"><span class="hljs-number">24</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { grid.ClearPath(); } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ูุฐุง ูุชุทูุจ ุฃู </font></font><code>HexGrid.ClearPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู </font><font style="vertical-align: inherit;">ุงูุฃูุฑ </font><font style="vertical-align: inherit;">ุดุงุฆุนูุง ุ ูุฐูู ูุฌุฑู ูุซู ูุฐุง ุงูุชุบููุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClearPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุซุงูููุง ุ ุณูููู ุจูุณุญ ุงููุณุงุฑ ุงููุฏูู ุนูุฏ ุงุฎุชูุงุฑ ููุฑุฒุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoSelection</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { grid.ClearPath(); UpdateCurrentCell(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentCell) { selectedUnit = currentCell.Unit; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุฎูุฑูุง ุ ุณูููู ุจูุณุญ ุงููุณุงุฑ ุนูุฏ ุชุบููุฑ ูุถุน ุงูุชุญุฑูุฑ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetEditMode</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> toggle</span></span></span><span class="hljs-function">)</span></span> { enabled = !toggle; grid.ShowUI(!toggle); grid.ClearPath(); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุจุญุซ ุนู ููุงุท ุงูููุงูุฉ ุงูุตุงูุญุฉ ููุท </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููููุง ุฏุงุฆููุง ุงูุนุซูุฑ ุนูู ุงูุทุฑูู ุ ูุฃูู ูู ุจุนุถ ุงูุฃุญูุงู ูููู ูู ุงููุณุชุญูู ุงููุตูู ุฅูู ุงูุฎููุฉ ุงูุฃุฎูุฑุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุฃูุฑ ุทุจูุนู. </font><font style="vertical-align: inherit;">ููู ูู ุจุนุถ ุงูุฃุญูุงู ุชููู ุงูุฎููุฉ ุงูุฃุฎูุฑุฉ ุบูุฑ ููุจููุฉ. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูุฑุฑูุง ุฃู ุงููุณุงุฑุงุช ูุง ูููู ุฃู ุชุชุถูู ุฎูุงูุง ุชุญุช ุงููุงุก. </font><font style="vertical-align: inherit;">ููููุง ูุฏ ุชุนุชูุฏ ุนูู ุงููุญุฏุฉ. </font><font style="vertical-align: inherit;">ุฏุนูุง ูุถูู ุฅูู </font></font><code>HexUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ ุชุฎุจุฑูุง ูุง ุฅุฐุง ูุงูุช ุงูุฎููุฉ ูู ููุทุฉ ููุงูุฉ ุตุงูุญุฉ. </font><font style="vertical-align: inherit;">ุงูุฎูุงูุง ุชุญุช ุงููุงุก ููุณุช ูุฐูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsValidDestination</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !cell.IsUnderwater; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูุญูุง ููุญุฏุฉ ูุงุญุฏุฉ ููุท ุจุงููููู ูู ุงูุฒูุฒุงูุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ุชููู ุงูุฎููุฉ ุงูููุงุฆูุฉ ุตุงูุญุฉ ุฅุฐุง ูุงูุช ูุดุบููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsValidDestination</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !cell.IsUnderwater &amp;&amp; !cell.Unit; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ูุฐู ุงูุทุฑููุฉ </font></font><code>HexGameUI.DoPathfinding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฌุงูู ููุงุท ุงูููุงูุฉ ุบูุฑ ุงูุตุงูุญุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoPathfinding</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (UpdateCurrentCell()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentCell &amp;&amp; selectedUnit.IsValidDestination(currentCell)) { grid.FindPath(selectedUnit.Location, currentCell, <span class="hljs-number"><span class="hljs-number">24</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { grid.ClearPath(); } } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุงูุชูุงู ุฅูู ููุทุฉ ุงูููุงูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุฏููุง ูุณุงุฑ ุตุงูุญ ุ ูุฅููุง ูุงุฏุฑูู ุนูู ุชุญุฑูู ุงููุฑูู ุฅูู ููุทุฉ ุงูููุงูุฉ. </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑู ูุชู ูููู ุงูููุงู ุจุฐูู. </font><font style="vertical-align: inherit;">ูุฌุนููุง ุชูุฑ ูุฐู ุงููุนูููุงุช ูู ุฎุงุตูุฉ ุฌุฏูุฏุฉ ูููุฑุงุกุฉ ููุท </font></font><code>HasPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasPath { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> currentPathExists; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญุฑูู ูุฑูุฉ ุ ุฃุถู ุฅูู </font></font><code>HexGameUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font></font><code>DoMove</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณูุชู ุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑููุฉ ุนูุฏ ุฅุตุฏุงุฑ ุฃูุฑ ูุฅุฐุง ุชู ุงุฎุชูุงุฑ ูุญุฏุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุฌุจ ุนููู ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ููุงู ุทุฑููุฉ ุ ูุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูู ุจุชุบููุฑ ูููุน ููุฑุฒุฉ. </font><font style="vertical-align: inherit;">ุจูููุง ูููู ุงููุฑูุฉ ุนูู ุงูููุฑ ุฅูู ููุทุฉ ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ูู ุฃุญุฏ ุงูุจุฑุงูุฌ ุงูุชุนููููุฉ ุงูุชุงููุฉ ุ ุณูุฌุนู ุงููุฑูุฉ ูู ุงููุงูุน ุนูู ุทูู ุงูุทุฑูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoMove</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (grid.HasPath) { selectedUnit.Location = currentCell; grid.ClearPath(); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุชุฎุฏู ุฒุฑ ุงููุงูุณ 1 (ุงููุฑ ุจุฒุฑ ุงููุงูุณ ุงูุฃููู) ูุฅุฑุณุงู ุงูุฃูุฑ. </font><font style="vertical-align: inherit;">ุณูู ูุชุญูู ูู ุฐูู ุฅุฐุง ุชู ุงุฎุชูุงุฑ ููุฑุฒุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ูุชู ุงูุถุบุท ุนูู ุงูุฒุฑ ุ ูุฅููุง ูุจุญุซ ุนู ุงููุณุงุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!EventSystem.current.IsPointerOverGameObject()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetMouseButtonDown(<span class="hljs-number"><span class="hljs-number">0</span></span>)) { DoSelection(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (selectedUnit) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetMouseButtonDown(<span class="hljs-number"><span class="hljs-number">1</span></span>)) { DoMove(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { DoPathfinding(); } } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุชุญุฑูู ุงููุญุฏุงุช! </font><font style="vertical-align: inherit;">ููู ูู ุจุนุถ ุงูุฃุญูุงู ูุฑูุถูู ุฅูุฌุงุฏ ุทุฑููุฉ ูุจุนุถ ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ุนูู ูุฌู ุงูุฎุตูุต ุ ุฅูู ุชูู ุงูุฎูุงูุง ุงูุชู ูุงูุช ููุฑุฒุฉ. </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ูุฃูู </font></font><code>HexUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููู ุจุชุญุฏูุซ ุงููููุน ุงููุฏูู ุนูุฏ ุชุนููู ูููุน ุฌุฏูุฏ. </font><font style="vertical-align: inherit;">ูุฅุตูุงุญ ุฐูู ุ ุณูููู ุจูุณุญ ุงูุฑุงุจุท ูุน ุงููุฑูุฉ ูู ูููุนูุง ุงููุฏูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexCell Location { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> location; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (location) { location.Unit = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } location = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.Unit = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; transform.localPosition = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.Position; } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฌูุจ ุงููุฑู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูู ุงูุจุญุซ ุนู ุงูุทุฑูู ุงูุขู ุจุดูู ุตุญูุญ ุ ููููู ูููุญุฏุงุช ุงูุงูุชูุงู ุงูููุฑู ุนูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃููู ูุง ูุณุชุทูุนูู ุงูุงูุชูุงู ุฅูู ุงูุฎูุงูุง ุงูุชู ูุฏููุง ุจุงููุนู ูุฑูุฉ ุ ูุชู ุชุฌุงูู ุงูููุงุฑุฒ ุงูุชู ุชูู ูู ุงูุทุฑูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/519/3d8/7dd/5193d87dd25bfa2fbc9e0ba26529b926.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชุฌุงูู ุงููุญุฏุงุช ุงูููุฌูุฏุฉ ุนูู ุงูุทุฑูู ุ</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุนุงุฏุฉ ูุง ุชุชุญุฑู ุงููุญุฏุงุช ูู ููุณ ุงููุตูู ูู ุฎูุงู ุจุนุถูุง ุงูุจุนุถ ุ ูููู ุญุชู ุงูุขู ููุณ ูุฏููุง ูุตุงุฆู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฏุนูุง ูุนุชุจุฑ ุฌููุน ุงููุญุฏุงุช ูููุตูุฉ ุนู ุจุนุถูุง ุงูุจุนุถ ูููุน ุงููุณุงุฑุงุช. </font><font style="vertical-align: inherit;">ูููู ุชูููุฐ ุฐูู ุนู ุทุฑูู ุชุฎุทู ุงูุฎูุงูุง ุงููุดุบููุฉ </font></font><code>HexGrid.Search</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( neighbor == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || neighbor.SearchPhase &gt; searchFrontierPhase ) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.IsUnderwater || neighbor.Unit) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f3c/f3b/698/f3cf3b698191010f55c0c994d3e324d8.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฑุฒ ุชุฌูุจ </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unitypackage</font></font></a> <br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฒุก 19: ุงูุญุฑูุฉ ุงููุชุญุฑูุฉ </font></font></h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุจููู ุงููุญุฏุงุช ุจูู ุงูุฎูุงูุง. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุตูุฑ ูุณุงุฑ ุณุงูุฑ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุงูููุงุช ุนูู ุทูู ุงูููุญููุงุช. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญู ูุฌุจุฑ ุงูููุงุช ุนูู ุงููุธุฑ ูู ุงุชุฌุงู ุงูุญุฑูุฉ. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุฐุง ุงูุฌุฒุก ุ ุณููุฑุถ ุงููุญุฏุงุช ุจุฏูุงู ูู ุงูุงูุชูุงู ุงูููุฑู ููุชุญุฑู ุนูู ุทูู ุงููุณุงุฑุงุช. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a08/e41/a4f/a08e41a4fd0e90ea26dc11f16ff518f2.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑู ุนูู ุงูุทุฑูู</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุญุฑูุฉ ุนูู ุทูู ุงูุทุฑูู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุฌุฒุก ุงูุณุงุจู ุฃุถููุง ุงููุญุฏุงุช ูุงููุฏุฑุฉ ุนูู ุชุญุฑูููุง. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃููุง ุงุณุชุฎุฏููุง ุงูุจุญุซ ุนู ุงููุณุงุฑ ูุชุญุฏูุฏ ููุงุท ุงูููุงูุฉ ุงูุตุงูุญุฉ ุ ุจุนุฏ ุฅุนุทุงุก ุงูุฃูุฑ ุ ุงูุชููุช ุงูููุงุช ุจุจุณุงุทุฉ ุฅูู ุงูุฎููุฉ ุงูููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ูุงุชุจุงุน ุงููุณุงุฑ ุงูููุฌูุฏ ุจุงููุนู ุ ูุญุชุงุฌ ุฅูู ุชุชุจุน ูุฐุง ุงููุณุงุฑ ูุฅูุดุงุก ุนูููุฉ ุฑุณูู ูุชุญุฑูุฉ ุชุฌุจุฑ ุงููุฑูุฉ ุนูู ุงูุงูุชูุงู ูู ุฎููุฉ ุฅูู ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ููุฐ ุงููุธุฑ ุฅูู ุงูุฑุณูู ุงููุชุญุฑูุฉ ุ ูู ุงูุตุนุจ ููุงุญุธุฉ ููููุฉ ุชุญุฑู ุงููุฑูุฉ ุ ูุชุตูุฑ ุฃูุถูุง ุงููุณุงุฑ ุงูุฐู ุณุงูุฑ ุจูุณุงุนุฏุฉ ุงูุฃุฏูุงุช. </font><font style="vertical-align: inherit;">ูููู ูุจู ุฃู ููุถู ูุฏููุง ุ ูุญุชุงุฌ ุฅูู ุฅุตูุงุญ ุงูุฎุทุฃ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎุทุฃ ูู ุงูุฃุฏูุงุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุณุจุจ ุงูุฅุดุฑุงู ุ ูุญุณุจ ุจุดูู ุบูุฑ ุตุญูุญ ุงููุณุงุฑ ุงูุฐู ุณูุชู ุงููุตูู ุฅูู ุงูุฎููุฉ ููู. </font><font style="vertical-align: inherit;">ุงูุขู ูุญุฏุฏ ุงููุณุงุฑ ุจุชูุณูู ุงููุณุงูุฉ ุงูุฅุฌูุงููุฉ ุนูู ุณุฑุนุฉ ุงููุฑูู</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mo" id="MJXp-Span-3" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span><span class="MJXp-mrow" id="MJXp-Span-5"><span class="MJXp-mo" id="MJXp-Span-6" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุจุฐ ุงูุจุงูู. </font><font style="vertical-align: inherit;">ูุญุฏุซ ุงูุฎุทุฃ ุนูุฏ ุงูุฏุฎูู ุฅูู ุงูุฎููุฉ ุชุญุชุงุฌ ุฅูู ุฅููุงู ุฌููุน ููุงุท ุงูุญุฑูุฉ ุงููุชุจููุฉ ููู ุญุฑูุฉ. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ุชููู ูู ุฎุทูุฉ 1 ุ ูุงูุณุฑุนุฉ 3 ุ ูููููุง ุชุญุฑูู ุซูุงุซ ุฎูุงูุง ูู ูู ุฏูุฑ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุน ุงูุญุณุงุจุงุช ุงูุญุงููุฉ ุ ูุง ูููููุง ุงุชุฎุงุฐ ุณูู ุฎุทูุชูู ูู ุงูุฎุทูุฉ ุงูุฃููู ุ ูุฃู ุงูุฎุทูุฉ ุงูุซุงูุซุฉ</font></font><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.407ex" height="2.66ex" viewBox="0 -832 3189.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-3D" x="639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-64" x="1695" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2F" x="2219" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-73" x="2719" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1">t = d / s</script><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-8"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑ </font></font></span><span class="MJXp-mo" id="MJXp-Span-10" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏ </font></font></span><span class="MJXp-mrow" id="MJXp-Span-12"><span class="MJXp-mo" id="MJXp-Span-13" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font></span><span class="MJXp-mo" id="MJXp-Span-15" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-16"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 </font></font></span><span class="MJXp-mrow" id="MJXp-Span-17"><span class="MJXp-mo" id="MJXp-Span-18" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mn" id="MJXp-Span-19"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3 </font></font></span><span class="MJXp-mo" id="MJXp-Span-20" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-21"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.254ex" height="2.66ex" viewBox="0 -832 7859.2 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-3D" x="639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-64" x="1695" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2F" x="2219" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-73" x="2719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-3D" x="3466" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-33" x="4523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2F" x="5023" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-33" x="5524" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-3D" x="6302" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-31" x="7358" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2">t = d / s = 3 / 3 = 1</script>  . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d80/9ec/098/d809ec098cac1850cf16d47ce45ed030.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูุงููู ุงููุฌูุนุฉ ููุชุญุฑู ุจุญุฑูุงุช ูุญุฏุฏุฉ ุจุดูู ุบูุฑ ุตุญูุญ ุ ุงูุณุฑุนุฉ 3 ูู</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุฌู ุงูุญุณุงุจ ุงูุตุญูุญ ููุญุฑูุงุช ุ ูุญุชุงุฌ ุฅูู ุชุญุฑูู ุงูุญุฏูุฏ ุฎุทูุฉ ูุงุญุฏุฉ ูู ุงูุฎููุฉ ุงูุฃูููุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชูููู ุงููุณุงูุฉ ุจููุฏุงุฑ 1 ูุจู ุญุณุงุจ ุงูุญุฑูุฉ. ุซู ุณุชููู ุงูุฎุทูุฉ ููุฎุทูุฉ ุงูุซุงูุซุฉ</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-22"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑ </font></font></span><span class="MJXp-mo" id="MJXp-Span-24" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-25"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mn" id="MJXp-Span-28"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3 </font></font></span><span class="MJXp-mo" id="MJXp-Span-29" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-30"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.686ex" height="2.66ex" viewBox="0 -832 5031.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-3D" x="639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-32" x="1695" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2F" x="2196" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-33" x="2696" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-3D" x="3474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-30" x="4531" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3">t = 2 / 3 = 0</script><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/656/291/37e/65629137e3267e033d1f5f6d3fd1f724.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญุฑูุงุช ุงูุตุญูุญุฉ</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููููุง ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุบููุฑ ุตูุบุฉ ุงูุญุณุงุจ ุฅูู</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-31"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑ </font></font></span><span class="MJXp-mo" id="MJXp-Span-33" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mo" id="MJXp-Span-34" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏ </font></font></span><span class="MJXp-mo" id="MJXp-Span-36" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-37"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mo" id="MJXp-Span-38" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mrow" id="MJXp-Span-39"><span class="MJXp-mo" id="MJXp-Span-40" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุซุงููุฉ</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.219ex" height="2.66ex" viewBox="0 -832 5691.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-3D" x="639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-28" x="1695" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-64" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2212" x="2830" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-31" x="3831" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-29" x="4332" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2F" x="4721" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-73" x="5222" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4">t = (d - 1) / s</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ุจูุฐุง ุงูุชุบููุฑ ุฅูู </font></font><code>HexGrid.Search</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell fromCell, HexCell toCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed</span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (searchFrontier.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { โฆ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> currentTurn = (current.Distance - <span class="hljs-number"><span class="hljs-number">1</span></span>) / speed; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { โฆ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> distance = current.Distance + moveCost; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> turn = (distance - <span class="hljs-number"><span class="hljs-number">1</span></span>) / speed; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (turn &gt; currentTurn) { distance = turn * speed + moveCost; } โฆ } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุบูุฑ ุฃูุถูุง ุนูุงูุงุช ุงูุชุญุฑูุงุช. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> speed</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPathExists) { HexCell current = currentPathTo; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (current != currentPathFrom) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> turn = (current.Distance - <span class="hljs-number"><span class="hljs-number">1</span></span>) / speed; โฆ } } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุญุธ ุฃูู ุจุงุณุชุฎุฏุงู ูุฐุง ุงูููุฌ ุ ูููู ูุณุงุฑ ุงูุฎููุฉ ุงูุฃููู โ1. </font><font style="vertical-align: inherit;">ูุฐุง ุฃูุฑ ุทุจูุนู ุ ูุฃููุง ูุง ูุนุฑุถู ุ ูุชุธู ุฎูุงุฑุฒููุฉ ุงูุจุญุซ ุนุงููุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุทุฑูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญุฑู ุนูู ุทูู ุงููุณุงุฑ ูู ูููุฉ ุงููุฑูุฉ. </font><font style="vertical-align: inherit;">ููู ููุนู ุฐูู ุ ุนููู ุฃู ูุนุฑู ุงูุทุฑูู. </font><font style="vertical-align: inherit;">ูุฏููุง ูุฐู ุงููุนูููุงุช </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฐุง ุฏุนูุง ูุถูู ุทุฑููุฉ ุฅูููุง ููุญุตูู ุนูู ุงููุณุงุฑ ุงูุญุงูู ูู ุดูู ูุงุฆูุฉ ูู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ููููู ุฃุฎุฐูุง ูู ูุฌููุนุฉ ุงูููุงุฆู ูุงูุนูุฏุฉ ุฅุฐุง ูุงู ููุงู ูุณุงุฑ ุญููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;HexCell&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!currentPathExists) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } List&lt;HexCell&gt; path = ListPool&lt;HexCell&gt;.Get(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> path; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุชู ุชุนุจุฆุฉ ุงููุงุฆูุฉ ุจุงุชุจุงุน ูุณุงุฑ ุงูุงุฑุชุจุงุท ูู ุงูุฎููุฉ ุงูููุงุฆูุฉ ุฅูู ุงูุฎููุฉ ุงูุฃูููุฉ ุ ููุง ูู ุงูุญุงู ุนูุฏ ุชุตูุฑ ุงููุณุงุฑ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> List&lt;HexCell&gt; path = ListPool&lt;HexCell&gt;.Get(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexCell c = currentPathTo; c != currentPathFrom; c = c.PathFrom) { path.Add(c); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> path;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุฐู ุงูุญุงูุฉ ุ ูุญุชุงุฌ ุฅูู ุงููุณุงุฑ ุจุฃูููู ุ ูุงูุฐู ูุชุถูู ุงูุฎููุฉ ุงูุฃูููุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexCell c = currentPathTo; c != currentPathFrom; c = c.PathFrom) { path.Add(c); } path.Add(currentPathFrom); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> path;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุฏููุง ุงููุณุงุฑ ุจุงูุชุฑุชูุจ ุงูุนูุณู. </font><font style="vertical-align: inherit;">ูููููุง ุงูุนูู ูุนู ุ ูููู ูู ูููู ุจุฏููููุง ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ุฏุนููุง ูููุจ ุงููุงุฆูุฉ ุจุญูุซ ุชูุชูู ูู ุงูุจุฏุงูุฉ ุฅูู ุงูููุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> path.Add(currentPathFrom); path.Reverse(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> path;</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุทูุจ ุงูุญุฑูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุฃู ูุถูู ุฅูู </font></font><code>HexUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุ ููุทูุจ ููู ุงุชุจุงุน ุงููุณุงุฑ. </font><font style="vertical-align: inherit;">ูู ุงูุจุฏุงูุฉ ุ ุณูุญูุง ูู ุจุจุณุงุทุฉ ุจุงูุงูุชูุงู ุงูููุฑู ุฅูู ุงูุฒูุฒุงูุฉ ุงูุฃุฎูุฑุฉ. </font><font style="vertical-align: inherit;">ูู ูุนูุฏ ุงููุงุฆูุฉ ุนูู ุงูููุฑ ุฅูู ุงููุฌููุนุฉ ุ ูุฃููุง ุณุชููู ูููุฏุฉ ููุง ูุจุนุถ ุงูููุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HexUnit</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Travel</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">List&lt;HexCell&gt; path</span></span></span><span class="hljs-function">)</span></span> { Location = path[path.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>]; } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทูุจ ุงูุญุฑูุฉ ุ ูููู ุจุชุบููุฑูุง </font></font><code>HexGameUI.DoMove</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ุชุณุชุฏุนู ุทุฑููุฉ ุฌุฏูุฏุฉ ูุน ุงููุณุงุฑ ุงูุญุงูู ุ ููุง ุชููู ููุท ุจุชุนููู ูููุน ุงููุญุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoMove</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (grid.HasPath) { <span class="hljs-comment"><span class="hljs-comment">// selectedUnit.Location = currentCell; selectedUnit.Travel(grid.GetPath()); grid.ClearPath(); } }</span></span></code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุตูุฑ ุงููุณุงุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุฃู ูุจุฏุฃ ูู ุชุญุฑูู ุงููุฑูุฉ ุ ุฏุนูุง ูุชุญูู ูู ุตุญุฉ ุงููุณุงุฑุงุช. </font><font style="vertical-align: inherit;">ุณููุนู ุฐูู ุนู ุทุฑูู ุทูุจ </font></font><code>HexUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฐูุฑ ุงููุณุงุฑ ุงูุฐู ูุฌุจ ุฃู ูุชุญุฑู ุนูู ุทููู ุ ุจุญูุซ ูููู ุชุตูุฑู ุจุงุณุชุฎุฏุงู ุงูุฃุฏูุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> List&lt;HexCell&gt; pathToTravel; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Travel</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">List&lt;HexCell&gt; path</span></span></span><span class="hljs-function">)</span></span> { Location = path[path.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>]; pathToTravel = path; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุทุฑููุฉ </font></font><code>OnDrawGizmos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุธูุงุฑ ุงููุณุงุฑ ุงูุฃุฎูุฑ ููุฐูุงุจ (ุฅู ูุฌุฏ). </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ุชูู ุงููุญุฏุฉ ูุฏ ุชุญุฑูุช ุจุนุฏ ุ ููุฌุจ ุฃู ูููู ุงููุณุงุฑ ูุชุณุงูููุง </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููู ูุธุฑูุง ูุชุณูุณู ุงููุญุฏุฉ ุฃุซูุงุก ุงูุชุญุฑูุฑ ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุฑุฌูุฉ ูู ูุถุน ุงูุชุดุบูู ุ ูููู ุฃู ุชููู ุฃูุถูุง ูุงุฆูุฉ ูุงุฑุบุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDrawGizmos</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pathToTravel == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || pathToTravel.Count == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุณูู ุทุฑููุฉ ูุฅุธูุงุฑ ุงููุณุงุฑ ูู ุฑุณู ูุฌุงู ุงูุฃุฏุงุฉ ููู ุฎููุฉ ูู ุงููุณุงุฑ. </font><font style="vertical-align: inherit;">ุฅู ุงููุฑุฉ ุงูุชู ูุจูุบ ูุตู ูุทุฑูุง 2 ูุญุฏุฉ ููุงุณุจุฉ ููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDrawGizmos</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pathToTravel == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || pathToTravel.Count == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; pathToTravel.Count; i++) { Gizmos.DrawSphere(pathToTravel[i].Position, <span class="hljs-number"><span class="hljs-number">2f</span></span>); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธุฑูุง ูุฃููุง ุณูุนุฑุถ ูุณุงุฑุงุช ุงูุงููุตุงู ุ ูุณูู ูููู ูุงุฏุฑูู ุนูู ุฑุคูุฉ ุฌููุน ูุณุงุฑุงุชูุง ุงูุฃุฎูุฑุฉ ูู ููุช ูุงุญุฏ. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/dac/907/a7d/dac907a7da12a75436c7ae26956884bd.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุฑุถ Gizmos ุขุฎุฑ ุงููุณุงุฑุงุช ุงูุชู ุชู ูุทุนูุง. ูู</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุฌู ุฅุธูุงุฑ ุงุชุตุงูุงุช ุงูุฎููุฉ ุจุดูู ุฃูุถู ุ ูุฑุณู ุงูุนุฏูุฏ ูู ุงููุฌุงูุงุช ูู ุญููุฉ ุนูู ุฎุท ุจูู ุงูุฎูุงูุง ุงูุณุงุจูุฉ ูุงูุญุงููุฉ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ุจุฏุก ุงูุนูููุฉ ูู ุงูุฎููุฉ ุงูุซุงููุฉ. </font><font style="vertical-align: inherit;">ูููู ุชุฑุชูุจ ุงููุฌุงูุงุช ุจุงุณุชุฎุฏุงู ุงูุงุณุชููุงุก ุงูุฎุทู ุจุฒูุงุฏุฉ ูุฏุฑูุง 0.1 ูุญุฏุฉ ุ ุจุญูุซ ูุญุตู ุนูู ุนุดุฑุฉ ูุฌุงูุงุช ููู ููุทุน.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; pathToTravel.Count; i++) { Vector3 a = pathToTravel[i - <span class="hljs-number"><span class="hljs-number">1</span></span>].Position; Vector3 b = pathToTravel[i].Position; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = <span class="hljs-number"><span class="hljs-number">0f</span></span>; t &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span>; t += <span class="hljs-number"><span class="hljs-number">0.1f</span></span>) { Gizmos.DrawSphere(Vector3.Lerp(a, b, t), <span class="hljs-number"><span class="hljs-number">2f</span></span>); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5c2/46a/11c/5c246a11c0753d03b2572de5bfc297a4.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑู ุฃูุซุฑ ูุถูุญุง</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุณู ุนูู ุทูู ุงูุทุฑูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุงุณุชุฎุฏุงู ููุณ ุงูุทุฑููุฉ ูุชุญุฑูู ุงููุญุฏุงุช. </font><font style="vertical-align: inherit;">ุฏุนููุง ุฅูุดุงุก ููุฑูุชูู ููุฐุง. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฑุณู ุงูุฃุฏุงุฉ ุ ุณูุญุฏุฏ ูููุน ุงููุฑูุฉ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุงูุฒูุงุฏุฉ ุ ุณูู ูุณุชุฎุฏู ุฏูุชุง ุงูููุช 0.1 ุ ูุณูุฌุฑู ุงูุนุงุฆุฏ ููู ุชูุฑุงุฑ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุณููุชูู ุงููุฑูู ูู ุฎููุฉ ุฅูู ุฃุฎุฑู ูู ุซุงููุฉ ูุงุญุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HexUnit</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { โฆ <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TravelPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; pathToTravel.Count; i++) { Vector3 a = pathToTravel[i - <span class="hljs-number"><span class="hljs-number">1</span></span>].Position; Vector3 b = pathToTravel[i].Position; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = <span class="hljs-number"><span class="hljs-number">0f</span></span>; t &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span>; t += Time.deltaTime) { transform.localPosition = Vector3.Lerp(a, b, t); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุฃ ููุฑูุชูู ูู ููุงูุฉ ุงูุทุฑููุฉ </font></font><code>Travel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููู ุฃููุงู ุ ุณูููู ุฌููุน ุงููุงุฆูุงุช ุงูุญูุฉ ุงูููุฌูุฏุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ูุญู ูุถูู ุนุฏู ุจุฏุก ุนูู ุฌุฒูุฆูู ูู ููุณ ุงูููุช ุ ูุฅูุง ุณูุคุฏู ุฐูู ุฅูู ูุชุงุฆุฌ ุบุฑูุจุฉ ููุบุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Travel</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">List&lt;HexCell&gt; path</span></span></span><span class="hljs-function">)</span></span> { Location = path[path.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>]; pathToTravel = path; StopAllCoroutines(); StartCoroutine(TravelPath()); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฑูู ุฎููุฉ ูุงุญุฏุฉ ูู ุงูุซุงููุฉ ุจุทูุฆุฉ ุฌุฏูุง. </font><font style="vertical-align: inherit;">ูู ูุฑุบุจ ุงููุงุนุจ ุฃุซูุงุก ุงููุจุงุฑุงุฉ ูู ุงูุงูุชุธุงุฑ ููุชุฑุฉ ุทูููุฉ. </font><font style="vertical-align: inherit;">ููููู ุฌุนู ุณุฑุนุฉ ุชุญุฑู ุงููุฑูู ุฎูุงุฑ ุชูููู ุ ูููู ุงูุขู ุ ุฏุนูุง ูุณุชุฎุฏู ุซุงุจุชูุง. </font><font style="vertical-align: inherit;">ููุฏ ุฎุตุตุช ููุง ูููุฉ 4 ุฎูุงูุง ูู ุงูุซุงููุฉ ุ </font><font style="vertical-align: inherit;">ุฅูู ุณุฑูุน ุฌุฏูุง ุ ููู ุฏุนูุง ููุงุญุธ ูุง ูุญุฏุซ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> travelSpeed = <span class="hljs-number"><span class="hljs-number">4f</span></span>; โฆ <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TravelPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; pathToTravel.Count; i++) { Vector3 a = pathToTravel[i - <span class="hljs-number"><span class="hljs-number">1</span></span>].Position; Vector3 b = pathToTravel[i].Position; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = <span class="hljs-number"><span class="hljs-number">0f</span></span>; t &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span>; t += Time.deltaTime * travelSpeed) { transform.localPosition = Vector3.Lerp(a, b, t); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซููุง ูููููุง ุชุตูุฑ ุนุฏุฉ ูุณุงุฑุงุช ูู ููุช ูุงุญุฏ ุ ูููููุง ุฌุนู ุนุฏุฉ ูุญุฏุงุช ุชุณุงูุฑ ูู ููุณ ุงูููุช. </font><font style="vertical-align: inherit;">ูู ูุฌูุฉ ูุธุฑ ุญุงูุฉ ุงููุนุจุฉ ุ ูุง ุชุฒุงู ุงูุญุฑูุฉ ุชุฎุงุทุฑ ุ ูุงูุฑุณูู ุงููุชุญุฑูุฉ ูุฑุฆูุฉ ุจุดูู ุญุตุฑู. </font><font style="vertical-align: inherit;">ุชุดุบู ุงููุญุฏุงุช ุนูู ุงูููุฑ ุงูุฎููุฉ ุงูุฃุฎูุฑุฉ. </font><font style="vertical-align: inherit;">ููููู ุญุชู ุฅูุฌุงุฏ ุทุฑู ูุจุฏุก ุฎุทูุฉ ุฌุฏูุฏุฉ ูุจู ูุตูููู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ููููู ุจุตุฑููุง ุฅูู ุจุฏุงูุฉ ูุณุงุฑ ุฌุฏูุฏ. </font><font style="vertical-align: inherit;">ูููู ุชุฌูุจ ุฐูู ุนู ุทุฑูู ุญุธุฑ ุงููุญุฏุงุช ุฃู ุญุชู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุจุฃููููุง ุฃุซูุงุก ุชุญุฑููุง ุ ูููู ูุซู ูุฐุง ุงูุชูุงุนู ุงูุณุฑูุน ููุงุณุจ ุชูุงููุง ุนูุฏ ุชุทููุฑ ูุงุฎุชุจุงุฑ ุงูุญุฑูุงุช.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุญุฏุงุช ุงููุชุญุฑูุฉ. </font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฐุง ุนู ุงููุฑู ูู ุงูุงุฑุชูุงุนุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">        ,      .       ,           .        ,    .   ,      .      ,  Endless Legend,   ,         .     ,    . </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููููู ุจุนุฏ ุงูุชุฌููุน </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุนููุจ Corutin ุฃููุง ูุง "ุชุนูุด" ุนูุฏ ุฅุนุงุฏุฉ ุชุฌููุนูุง ูู ูุถุน ุงูุชุดุบูู. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ุญุงูุฉ ุงููุนุจุฉ ุฏุงุฆููุง ูุง ุชููู ุตุญูุญุฉ ุ ุฅูุง ุฃู ูุฐุง ูููู ุฃู ูุคุฏู ุฅูู ุชุนุซุฑ ุงููุฑู ูู ููุงู ูุง ูู ูุณุงุฑูุง ุงูุฃุฎูุฑ ุฅุฐุง ุจุฏุฃุช ุฅุนุงุฏุฉ ุงูุชุฌููุน ููู ูุง ูุฒุงููู ูุชุญุฑููู. </font><font style="vertical-align: inherit;">ููุชุฎููู ูู ุงูุนูุงูุจ ุ ุฏุนููุง ูุชุฃูุฏ ูู ุฃูู ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุฌููุน ุ ุชููู ุงููุญุฏุงุช ุฏุงุฆููุง ูู ุงููุถุน ุงูุตุญูุญ. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุญุฏูุซ ูููููู ูู </font></font><code>OnEnable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEnable</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (location) { transform.localPosition = location.Position; } }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุฑูุฉ ุณูุณุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุจุฏู ุงูุญุฑูุฉ ูู ุงููุฑูุฒ ุฅูู ูุฑูุฒ ุงูุฎููุฉ ูููุงููููุฉ ููุบุงูุฉ ูุชุญุฏุซ ุชุบููุฑุงุช ุญุงุฏุฉ ูู ุงูุงุชุฌุงู. </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ููุนุฏูุฏ ูู ุงูุฃูุนุงุจ ุ ุณูููู ูุฐุง ุทุจูุนููุง ุ ููููู ุบูุฑ ููุจูู ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุญุฑูุฉ ูุงูุนูุฉ ููููุงู ุนูู ุงูุฃูู. </font><font style="vertical-align: inherit;">ูุฐุง ุฏุนูุง ูุบูุฑ ุงูุญุฑูุฉ ูุฌุนููุง ุชุจุฏู ุฃูุซุฑ ุนุถููุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุงูุชูุงู ูู ุงูุถูุน ุฅูู ุงูุถูุน </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุจุฏุฃ ุงููุฑูุฉ ุฑุญูุชูุง ูู ูุฑูุฒ ุงูุฒูุฒุงูุฉ. </font><font style="vertical-align: inherit;">ููุฑ ุฅูู ููุชุตู ุญุงูุฉ ุงูุฎููุฉ ุ ุซู ูุฏุฎู ุงูุฎููุฉ ุงูุชุงููุฉ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุงูุชุญุฑู ูุญู ุงููุฑูุฒ ุ ููููู ุงูุชูุฌู ูุจุงุดุฑุฉู ุฅูู ุงูุญุงูุฉ ุงูุชุงููุฉ ุงูุชู ูุฌุจ ุนููู ุนุจูุฑูุง. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ุณุชูุทุน ุงููุญุฏุฉ ุงููุณุงุฑ ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุชุบููุฑ ุงูุงุชุฌุงู. </font><font style="vertical-align: inherit;">ูุฐุง ูููู ูุฌููุน ุงูุฎูุงูุง ุจุงุณุชุซูุงุก ููุงุท ุงูููุงูุฉ ูููุณุงุฑ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2bc/8f0/1b9/2bc8f01b93b55b7acab8d9f56dd6f4be.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซูุงุซ ุทุฑู ููุงูุชูุงู ูู ุงูุญุงูุฉ ุฅูู ุงูุญุงูุฉ</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุนูุง ูุชููู ูุน </font></font><code>OnDrawGizmos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุถ ุงููุณุงุฑุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ุจูุฐู ุงูุทุฑููุฉ. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุชู ุงูุงุณุชููุงุก ุจูู ุญูุงู ุงูุฎูุงูุง ุ ูุงูุชู ูููู ุงูุนุซูุฑ ุนูููุง ุนู ุทุฑูู ุญุณุงุจ ูุชูุณุท โโููุงุถุน ุงูุฎูุงูุง ุงููุฌุงูุฑุฉ. </font><font style="vertical-align: inherit;">ูููู ุจุงููุณุจุฉ ููุง ุญุณุงุจ ุญุงูุฉ ูุงุญุฏุฉ ููู ุชูุฑุงุฑ ุ ูุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงููููุฉ ูู ุงูุชูุฑุงุฑ ุงูุณุงุจู. </font><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ ูููููุง ุฃู ูุฌุนู ุงูุทุฑููุฉ ุชุนูู ููุฎููุฉ ุงูุฃูููุฉ ุ ูููู ุจุฏูุงู ูู ุงูุญุงูุฉ ูุฃุฎุฐ ูููููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDrawGizmos</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pathToTravel == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || pathToTravel.Count == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Vector3 a, b = pathToTravel[<span class="hljs-number"><span class="hljs-number">0</span></span>].Position; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; pathToTravel.Count; i++) { <span class="hljs-comment"><span class="hljs-comment">// Vector3 a = pathToTravel[i - 1].Position; // Vector3 b = pathToTravel[i].Position; a = b; b = (pathToTravel[i - 1].Position + pathToTravel[i].Position) * 0.5f; for (float t = 0f; t &lt; 1f; t += 0.1f) { Gizmos.DrawSphere(Vector3.Lerp(a, b, t), 2f); } } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุตูู ุฅูู ูุฑูุฒ ุงูุฎููุฉ ุงูููุงุฆูุฉ ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ููุถุน ุงูุฎููุฉ ูููุทุฉ ุฃุฎูุฑุฉ ุ ูููุณ ุงูุญุงูุฉ. </font><font style="vertical-align: inherit;">ููููู ุฅุถุงูุฉ ุงูุชุญูู ูู ูุฐู ุงูุญุงูุฉ ุฅูู ุงูุญููุฉ ุ ูููู ูุฐุง ุงูุฑูุฒ ุงูุจุณูุท ุณูููู ุฃูุซุฑ ูุถูุญูุง ูุชูุฑุงุฑ ุงูุฑูุฒ ูุชุบููุฑู ููููุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDrawGizmos</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; pathToTravel.Count; i++) { โฆ } a = b; b = pathToTravel[pathToTravel.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>].Position; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = <span class="hljs-number"><span class="hljs-number">0f</span></span>; t &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span>; t += <span class="hljs-number"><span class="hljs-number">0.1f</span></span>) { Gizmos.DrawSphere(Vector3.Lerp(a, b, t), <span class="hljs-number"><span class="hljs-number">2f</span></span>); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/deb/466/4d4/deb4664d4f8bcffcc3839dddfaa0d792.png"></div><br> <i><font style="vertical-align: inherit;"></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุงุฑุงุช </font><i><font style="vertical-align: inherit;">ุงููุณุชูุฏุฉ ุฅูู ุงูุถูุน ุชููู</font></i><font style="vertical-align: inherit;"> ุงููุณุงุฑุงุช ุงููุงุชุฌุฉ ุฃูู ูุซู ุงูุชุนุฑุฌุงุช ุ ููุชู ุชูููู ุฒุงููุฉ ุงูุฏูุฑุงู ุงููุตูู ูู 120 ุฏุฑุฌุฉ ุฅูู 90 ุฏุฑุฌุฉ. </font><font style="vertical-align: inherit;">ูููู ุงุนุชุจุงุฑ ูุฐุง ุชุญุณูููุง ุ ูุฐูู ูุทุจู ููุณ ุงูุชุบููุฑุงุช ูู coroutine </font></font><code>TravelPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑู ููู ูุจุฏู ูู ุงูุฑุณูู ุงููุชุญุฑูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TravelPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Vector3 a, b = pathToTravel[<span class="hljs-number"><span class="hljs-number">0</span></span>].Position; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; pathToTravel.Count; i++) { <span class="hljs-comment"><span class="hljs-comment">// Vector3 a = pathToTravel[i - 1].Position; // Vector3 b = pathToTravel[i].Position; a = b; b = (pathToTravel[i - 1].Position + pathToTravel[i].Position) * 0.5f; for (float t = 0f; t &lt; 1f; t += Time.deltaTime * travelSpeed) { transform.localPosition = Vector3.Lerp(a, b, t); yield return null; } } a = b; b = pathToTravel[pathToTravel.Count - 1].Position; for (float t = 0f; t &lt; 1f; t += Time.deltaTime * travelSpeed) { transform.localPosition = Vector3.Lerp(a, b, t); yield return null; } }</span></span></code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญุฑู ุจุณุฑุนุฉ ูุชุบูุฑุฉ</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุฏ ูุทุน ุงูุฒูุงูุง ุ ุฃุตุจุญ ุทูู ุฃุฌุฒุงุก ุงููุณุงุฑ ูุนุชูุฏ ุนูู ุงูุชุบููุฑ ูู ุงูุงุชุฌุงู. </font><font style="vertical-align: inherit;">ููููุง ูุญุฏุฏ ุงูุณุฑุนุฉ ูู ุงูุฎูุงูุง ูู ุงูุซุงููุฉ. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุชุชุบูุฑ ุณุฑุนุฉ ุงููุตู ุจุดูู ุนุดูุงุฆู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุชุจุน ุงูููุญููุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุบููุฑุงุช ููุฑูุฉ ูู ุงูุงุชุฌุงู ูุงูุณุฑุนุฉ ุนูุฏูุง ุชุจุฏู ุญุฏูุฏ ุงูุฎููุฉ ุชุจุฏู ูุจูุญุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุฃูุถู ุงุณุชุฎุฏุงู ุชุบููุฑ ุชุฏุฑูุฌู ูู ุงูุงุชุฌุงู. </font><font style="vertical-align: inherit;">ูููููุง ุฅุถุงูุฉ ุฏุนู ููุฐุง ูู ุฎูุงู ุฅุฌุจุงุฑ ุงูููุงุช ุนูู ุงูุณูุฑ ุนูู ุทูู ุงูููุญููุงุช ุจุฏูุงู ูู ุงูุฎุทูุท ุงููุณุชูููุฉ. </font><font style="vertical-align: inherit;">ููููู ุงุณุชุฎุฏุงู ููุญููุงุช ุจูุฒููุฑ ููุฐุง ุงูุบุฑุถ. </font><font style="vertical-align: inherit;">ุนูู ูุฌู ุงูุฎุตูุต ุ ูููููุง ุฃู ูุฃุฎุฐ ููุญููุงุช Bezier ุงูุชุฑุจูุนูุฉ ุญูุซ ูููู ูุฑูุฒ ุงูุฎูุงูุง ูู ููุงุท ุงูุชุญูู ุงููุณุทู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชููู ุงูููุงุณ ููููุญููุงุช ุงููุฌุงูุฑุฉ ุตูุฑูุง ูุฑุขุฉ ูุจุนุถูุง ุงูุจุนุถ ุ ุฃู ุฃู ุงููุณุงุฑ ุจุฃูููู ุณูุชุญูู ุฅูู ููุญูู ุณูุณ ูุณุชูุฑ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a94/c46/0b8/a94c460b8e7b3fd2ecc3b4ea4e3225a9.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุญููุงุช ูู ุงูุญุงูุฉ ุฅูู ุงูุญุงูุฉ</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุจุฅูุดุงุก ูุฆุฉ ูุณุงุนุฏุฉ </font></font><code>Bezier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุทุฑููุฉ ููุญุตูู ุนูู ููุงุท ุนูู ููุญูู Bezier ุงูุชุฑุจูุนู. </font><font style="vertical-align: inherit;">ููุง ูู ููุถุญ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุฑูุงูุฌ ุงูุชุนูููู Curves and Splines</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุชู ุงุณุชุฎุฏุงู ุงูุตูุบุฉ ููุฐุง ุงูุบุฑุถ</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-42"><span class="MJXp-mo" id="MJXp-Span-43" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mn" id="MJXp-Span-44"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mo" id="MJXp-Span-45" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑ </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-47"><span class="MJXp-mo" id="MJXp-Span-48" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-49" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃ </font></font></span><span class="MJXp-mo" id="MJXp-Span-51" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mn" id="MJXp-Span-52"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mo" id="MJXp-Span-53" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mn" id="MJXp-Span-54"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mo" id="MJXp-Span-55" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑ </font></font></span><span class="MJXp-mo" id="MJXp-Span-57" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑ </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจ </font></font></span><span class="MJXp-mo" id="MJXp-Span-60" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-61"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑ </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-63" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฌ</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.208ex" height="2.901ex" viewBox="0 -935.7 12575.6 1249" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-31" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2212" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-74" x="2112" y="0"></use><g transform="translate(2474,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-32" x="550" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-41" x="3317" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2B" x="4290" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-32" x="5291" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-28" x="5791" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-31" x="6181" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2212" x="6904" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-74" x="7904" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-29" x="8266" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-74" x="8655" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-42" x="9017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2B" x="9998" y="0"></use><g transform="translate(10999,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-32" x="511" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-43" x="11815" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5">(1 - t)^2 A + 2(1 - t) t B + t^2 C</script>  ุฃูู <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-65"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃ</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.743ex" height="2.057ex" viewBox="0 -780.1 750.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-41" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> A </script>  ุ <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-67"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-68"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจ</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-42" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> B </script>  ู <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-69"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ููุงุท ุงูุชุญูู ุ ู t ูู interpolator.</font></font><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.766ex" height="2.057ex" viewBox="0 -780.1 760.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-43" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8">C</script><font style="vertical-align: inherit;"></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Bezier</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetPoint</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 a, Vector3 b, Vector3 c, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> t</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> r = <span class="hljs-number"><span class="hljs-number">1f</span></span> - t; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r * r * a + <span class="hljs-number"><span class="hljs-number">2f</span></span> * r * t * b + t * t * c; } }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุง ูุฌุจ ุฃู ููุชุตุฑ GetPoint ุนูู 0-1ุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">         0-1,    .          .  ,    <code>GetPointClamped</code> ,    <code>t</code> .      ,      <code>GetPointUnclamped</code> . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุธูุงุฑ ูุณุงุฑ ุงูููุญูู </font></font><code>OnDrawGizmos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุญุชุงุฌ ุฅูู ุชุชุจุน ููุณ ููุทุชูู ุ ูููู ุซูุงุซ ููุงุท. </font><font style="vertical-align: inherit;">ููุทุฉ ุฅุถุงููุฉ ูู ูุฑูุฒ ุงูุฎููุฉ ุงูุชู ูุนูู ูุนูุง ูู ุงูุชูุฑุงุฑ ุงูุญุงูู ุ ูุงูุฐู ูุญุชูู ุนูู ููุฑุณ </font></font><code>i - 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฃู ุงูุฏูุฑุฉ ุชุจุฏุฃ ุจู 1. ุจุนุฏ ุงุณุชูุงู ุฌููุน ุงูููุงุท ุ ูููููุง ุงุณุชุจุฏุงููุง </font></font><code>Vector3.Lerp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจู </font></font><code>Bezier.GetPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฎูุงูุง ุงูุจุฏุงูุฉ ูุงูููุงูุฉ ุ ุจุฏูุงู ูู ุงูููุงูุฉ ูููุงุท ุงูููุชุตู ุ ูููููุง ุจุจุณุงุทุฉ ุงุณุชุฎุฏุงู ูุฑูุฒ ุงูุฎููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDrawGizmos</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pathToTravel == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || pathToTravel.Count == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Vector3 a, b, c = pathToTravel[<span class="hljs-number"><span class="hljs-number">0</span></span>].Position; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; pathToTravel.Count; i++) { a = c; b = pathToTravel[i - <span class="hljs-number"><span class="hljs-number">1</span></span>].Position; c = (b + pathToTravel[i].Position) * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = <span class="hljs-number"><span class="hljs-number">0f</span></span>; t &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span>; t += Time.deltaTime * travelSpeed) { Gizmos.DrawSphere(Bezier.GetPoint(a, b, c, t), <span class="hljs-number"><span class="hljs-number">2f</span></span>); } } a = c; b = pathToTravel[pathToTravel.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>].Position; c = b; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = <span class="hljs-number"><span class="hljs-number">0f</span></span>; t &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span>; t += <span class="hljs-number"><span class="hljs-number">0.1f</span></span>) { Gizmos.DrawSphere(Bezier.GetPoint(a, b, c, t), <span class="hljs-number"><span class="hljs-number">2f</span></span>); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/140/79d/cae/14079dcae70b7b2522c137e0af848883.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุงุฑุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ุจุงุณุชุฎุฏุงู ููุญููุงุช Bezier</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุจุฏู ุงููุณุงุฑ </font><i><font style="vertical-align: inherit;">ุงูููุญูู</font></i><font style="vertical-align: inherit;"> ุฃูุถู ุจูุซูุฑ. </font><font style="vertical-align: inherit;">ูุทุจู ููุณ ุงูุชุบููุฑุงุช ุนูู </font></font><code>TravelPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑู ููู ูุชู ุชุญุฑูู ุงููุญุฏุงุช ุจุงุณุชุฎุฏุงู ูุฐุง ุงูููุฌ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TravelPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Vector3 a, b, c = pathToTravel[<span class="hljs-number"><span class="hljs-number">0</span></span>].Position; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; pathToTravel.Count; i++) { a = c; b = pathToTravel[i - <span class="hljs-number"><span class="hljs-number">1</span></span>].Position; c = (b + pathToTravel[i].Position) * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = <span class="hljs-number"><span class="hljs-number">0f</span></span>; t &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span>; t += Time.deltaTime * travelSpeed) { transform.localPosition = Bezier.GetPoint(a, b, c, t); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } a = c; b = pathToTravel[pathToTravel.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>].Position; c = b; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = <span class="hljs-number"><span class="hljs-number">0f</span></span>; t &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span>; t += Time.deltaTime * travelSpeed) { transform.localPosition = Bezier.GetPoint(a, b, c, t); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } }</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญุฑู ุนูู ุทูู ุงูููุญููุงุช ุ ูุฃุตุจุญุช</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑุณูู ุงููุชุญุฑูุฉ ุณูุณุฉ ุฃูุถูุง ุ ุญุชู ุนูุฏูุง ุชููู ุณุฑุนุฉ ุงูุงููุตุงู ุบูุฑ ูุณุชูุฑุฉ. </font><font style="vertical-align: inherit;">ุจูุง ุฃู ุชูุงุณ ููุญูู ุงูุฃุฌุฒุงุก ุงููุฌุงูุฑุฉ ูุชุฒุงูู ุ ูุฅู ุงูุณุฑุนุฉ ูุณุชูุฑุฉ. </font><font style="vertical-align: inherit;">ูุญุฏุซ ุงูุชุบููุฑ ูู ุงูุณุฑุนุฉ ุชุฏุฑูุฌููุง ููุญุฏุซ ุนูุฏูุง ููุฑ ุงููุตุงู ุนุจุฑ ุงูุฎููุฉ ุ ููุชุจุงุทุฃ ุนูุฏ ุชุบููุฑ ุงูุงุชุฌุงู. </font><font style="vertical-align: inherit;">ุฅุฐุง ุฐูุจ ูุจุงุดุฑุฉ ุ ูุฅู ุงูุณุฑุนุฉ ุชุจูู ุซุงุจุชุฉ. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุจุฏุฃ ุงููุฑูุฉ ูุชููู ุฑุญูุชูุง ุจุณุฑุนุฉ ุตูุฑ. </font><font style="vertical-align: inherit;">ูุฐุง ูุญุงูู ุงูุญุฑูุฉ ุงูุทุจูุนูุฉ ุ ูุฐุง ุงุชุฑููุง ููุฐุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุชุจุน ุงูููุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ูุฐู ุงููุญุธุฉ ุ ุจุฏุฃูุง ูู ุงูุชูุฑุงุฑ ููู ูู ููุทุน ูู 0 ุ ูุชูุงุตููุง ุญุชู ูุตู ุฅูู 1. ูุฐุง ูุนูู ุจุดูู ุฌูุฏ ุนูุฏ ุงูุฒูุงุฏุฉ ุจูููุฉ ุซุงุจุชุฉ ุ ูููู ุชูุฑุงุฑูุง ูุนุชูุฏ ุนูู ุฏูุชุง ุงูููุช. ุนูุฏ ุงูุชูุงู ุงูุชูุฑุงุฑ ุนูู ููุทุน ูุงุญุฏ ุ ูู ุงููุญุชูู ุฃู ูุชุฌุงูุฒ 1 ุจููุฏุงุฑ ูุนูู ุ ุงุนุชูุงุฏูุง ุนูู ุฏูุชุง ุงูููุช. ูุฐุง ุบูุฑ ูุฑุฆู ุจูุนุฏูุงุช ุฅุทุงุฑุงุช ุนุงููุฉ ุ ูููู ูููู ุฃู ูุคุฏู ุฅูู ุงูุชุฒุงุฒุงุช ุจูุนุฏูุงุช ุฅุทุงุฑุงุช ููุฎูุถุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฌูุจ ููุฏุงู ุงูููุช ุ ูุญุชุงุฌ ุฅูู ููู ุงูููุช ุงููุชุจูู ูู ุฌุฒุก ุฅูู ุขุฎุฑ. ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุงูุชุชุจุน </font></font><code>t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุทูู ุงููุณุงุฑ ุจุฃูููู ุ ูููุณ ููุท ูู ูู ุฌุฒุก. ุซู ูู ููุงูุฉ ูู ุฌุฒุก ุณูุทุฑุญ 1 ููู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TravelPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Vector3 a, b, c = pathToTravel[<span class="hljs-number"><span class="hljs-number">0</span></span>].Position; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = <span class="hljs-number"><span class="hljs-number">0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; pathToTravel.Count; i++) { a = c; b = pathToTravel[i - <span class="hljs-number"><span class="hljs-number">1</span></span>].Position; c = (b + pathToTravel[i].Position) * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (; t &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span>; t += Time.deltaTime * travelSpeed) { transform.localPosition = Bezier.GetPoint(a, b, c, t); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } t -= <span class="hljs-number"><span class="hljs-number">1f</span></span>; } a = c; b = pathToTravel[pathToTravel.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>].Position; c = b; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (; t &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span>; t += Time.deltaTime * traveSpeed) { transform.localPosition = Bezier.GetPoint(a, b, c, t); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ููุง ูููู ุจุฐูู ุจุงููุนู ุ ูููุชุฃูุฏ ูู ุฃู ุฏูุชุง ุงูููุช ุชุคุฎุฐ ูู ุงูุงุนุชุจุงุฑ ูู ุจุฏุงูุฉ ุงููุณุงุฑ. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃููุง ุณูุจุฏุฃ ูู ุงูุชุญุฑู ุนูู ุงูููุฑ ุ ููู ููู ููุชูู ุงูุฃูุฏู ูุฅุทุงุฑ ูุงุญุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = Time.deltaTime * travelSpeed;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ููุชูู ุชูุงููุง ูู ุงูููุช ุงูุฐู ูุฌุจ ุฃู ููุชูู ููู ุงููุณุงุฑ ุ ูููู ูุจู ูุญุธุงุช. </font><font style="vertical-align: inherit;">ููุง ุ ูุฏ ูุนุชูุฏ ุงููุฑู ุฃูุถูุง ุนูู ูุนุฏู ุงูุฅุทุงุฑ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฏุนูุง ูุฌุนู ุงููุฑูุฉ ุชููู ุงููุณุงุฑ ุชูุงููุง ุนูุฏ ููุทุฉ ุงูููุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TravelPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ transform.localPosition = location.Position; }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฑุณูู ุงููุชุญุฑูุฉ ุงูุชูุฌูููุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏุฃุช ุงููุญุฏุงุช ูู ุงูุชุญุฑู ุนูู ููุญูู ุณูุณ ุ ููููุง ูู ุชุบูุฑ ุงุชุฌุงููุง ููููุง ูุงุชุฌุงู ุงูุญุฑูุฉ. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ูุจุฏู ุฃููุง ุชูุฒูู. </font><font style="vertical-align: inherit;">ูุฌุนู ุงูุญุฑูุฉ ุชุจุฏู ููุฃููุง ุญุฑูุฉ ุญููููุฉ ุ ูุญุชุงุฌ ุฅูู ุชุฏููุฑูุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุทูุน </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุฑูุงูุฌ ุงูุชุนูููู Curves and Splines</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููููุง ุงุณุชุฎุฏุงู ูุดุชู ุงูููุญูู ูุชุญุฏูุฏ ุงุชุฌุงู ุงููุญุฏุฉ. </font><font style="vertical-align: inherit;">ุตูุบุฉ ูุดุชู ููุญูู ุจูุฒู ุงูุชุฑุจูุนู:</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-71"><span class="MJXp-mn" id="MJXp-Span-72"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mo" id="MJXp-Span-73" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mo" id="MJXp-Span-74" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mn" id="MJXp-Span-75"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mo" id="MJXp-Span-76" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mo" id="MJXp-Span-78" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-79" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font></span><span class="MJXp-mo" id="MJXp-Span-81" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font></span><span class="MJXp-mo" id="MJXp-Span-83" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-84" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mo" id="MJXp-Span-86" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C </font></font></span><span class="MJXp-mo" id="MJXp-Span-88" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font></span><span class="MJXp-mo" id="MJXp-Span-90" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-91" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.64ex" height="2.66ex" viewBox="0 -832 12761.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-28" x="890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-31" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2212" x="2002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-74" x="3002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-29" x="3364" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-28" x="3753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-42" x="4143" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2212" x="5125" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-41" x="6125" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-29" x="6876" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2B" x="7488" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-74" x="8488" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-28" x="8850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-43" x="9239" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-2212" x="10222" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMATHI-42" x="11223" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-29" x="11982" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://habr.com/ru/post/426481/&amp;usg=ALkJrhh4JkGoxjsz_D6SfYI4EzQWS-9MiA#MJMAIN-29" x="12372" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9">2 ((1 - t) (B - A) + t (C - B))</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุฅูู </font></font><code>Bezier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ูุญุณุงุจูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetDerivative</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 a, Vector3 b, Vector3 c, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> t </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">2f</span></span> * ((<span class="hljs-number"><span class="hljs-number">1f</span></span> - t) * (b - a) + t * (c - b)); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ูุงูู ุงููุดุชู ุนูู ุฎุท ูุณุชููู ูุงุญุฏ ูุน ุงุชุฌุงู ุงูุญุฑูุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ุงูุทุฑููุฉ </font></font><code>Quaternion.LookRotation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญููููุง ุฅูู ูุฑูุฉ. </font><font style="vertical-align: inherit;">ุณูููู ุจุชูููุฐูุง ูู ูู ุฎุทูุฉ </font></font><code>HexUnit.TravelPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> transform.localPosition = Bezier.GetPoint(a, b, c, t); Vector3 d = Bezier.GetDerivative(a, b, c, t); transform.localRotation = Quaternion.LookRotation(d); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; โฆ transform.localPosition = Bezier.GetPoint(a, b, c, t); Vector3 d = Bezier.GetDerivative(a, b, c, t); transform.localRotation = Quaternion.LookRotation(d); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>;</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุง ููุฌุฏ ุฎุทุฃ ูู ุจุฏุงูุฉ ุงููุณุงุฑุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">    ,        .    <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-92"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">A</span></span></span><script type="math/tex" id="MathJax-Element-10"> A </script>  ู <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-94"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">B</span></span></span><script type="math/tex" id="MathJax-Element-11"> B </script>  ,    .   ,   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-96"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">t</span><span class="MJXp-mo" id="MJXp-Span-98" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-99">0</span></span></span><script type="math/tex" id="MathJax-Element-12">t = 0</script> ,     ,      <code>Quaternion.LookRotation</code> .  ,    ,     <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-100"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">t</span><span class="MJXp-mo" id="MJXp-Span-102" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-103">0</span></span></span><script type="math/tex" id="MathJax-Element-13">t = 0</script>   .     .       ,  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-104"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">t</span><span class="MJXp-mo" id="MJXp-Span-106" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-107">0</span></span></span><script type="math/tex" id="MathJax-Element-14">t > 0</script>    . <br>         ,     <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-108"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">t</span><span class="MJXp-mo" id="MJXp-Span-110" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;</span><span class="MJXp-mn" id="MJXp-Span-111">1</span></span></span><script type="math/tex" id="MathJax-Element-15">t < 1</script>  . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงููููุถ ูู ููุถุน ุงูุงููุตุงู ุ ูุฅู ุนุฏู ูุซุงููุฉ ุงุชุฌุงููุง ูู ููุงูุฉ ุงููุณุงุฑ ููุณ ููููุง. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ุฃู ุงุชุฌุงูู ูุชูุงูู ูุน ุงูุฏูุฑุงู ุงูููุงุฆู. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุจุนุฏ ุงูุงูุชูุงุก ุ ูุณุงูู ุงุชุฌุงููุง ุฅูู ุฏูุฑุงููุง ูู Y.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> transform.localPosition = location.Position; orientation = transform.localRotation.eulerAngles.y;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุชุจุฏู ุงููุญุฏุงุช ุจุงูุถุจุท ูู ุงุชุฌุงู ุงูุญุฑูุฉ ุ ุฃููููุง ูุนููุฏููุง. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃููู ุณูู ูููููู ุฅูู ุงูุฃูุงู ูุงูุฎูู ุ ูููุฒููู ูู ุงูููุญุฏุฑุงุช ููุชุณูููููุง. </font><font style="vertical-align: inherit;">ููุชุฃูุฏ ูู ุฃููุง ุชูู ุฏุงุฆููุง ุจุดูู ูุณุชููู ุ ูููู ุจุฅุฌุจุงุฑ ุงููููู Y ููุชุฌู ุงูุงุชุฌุงู ุนูู ุงูุตูุฑ ูุจู ุงุณุชุฎุฏุงูู ูุชุญุฏูุฏ ุฏูุฑุงู ุงููุญุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Vector3 d = Bezier.GetDerivative(a, b, c, t); dy = <span class="hljs-number"><span class="hljs-number">0f</span></span>; transform.localRotation = Quaternion.LookRotation(d); โฆ Vector3 d = Bezier.GetDerivative(a, b, c, t); dy = <span class="hljs-number"><span class="hljs-number">0f</span></span>; transform.localRotation = Quaternion.LookRotation(d);</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุทูุน ุฅูู ุงูุฃูุงู ุฃุซูุงุก ุงูุชุญุฑู</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญู ููุธุฑ ุฅูู ุงูููุทุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูุงู ุงููุณุงุฑ ุ ุชุชุทูุน ุงููุญุฏุงุช ุฅูู ุงูุฃูุงู ุ ูููู ูุจู ุงูุจุฏุก ูู ุงูุชุญุฑู ุ ูููููุง ุงููุธุฑ ูู ุงูุงุชุฌุงู ุงูุขุฎุฑ. ูู ูุฐู ุงูุญุงูุฉ ุ ูุบูุฑูู ุงุชุฌุงููู ุนูู ุงูููุฑ. ุณูููู ูู ุงูุฃูุถู ุฅุฐุง ุฃุฏุงุฑุช ูู ุงุชุฌุงู ุงููุณุงุฑ ูุจู ุจุฏุก ุงูุญุฑูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃู ูููู ุงูุจุญุซ ูู ุงูุงุชุฌุงู ุงูุตุญูุญ ูููุฏูุง ูู ุงูููุงูู ุงูุฃุฎุฑู ุ ูุฐูู ุฏุนููุง ููุดุฆ ุทุฑููุฉ </font></font><code>LookAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฌุจุฑ ุงููุฑูุฉ ุนูู ุชุบููุฑ ุงูุงุชุฌุงู ูู ุฃุฌู ุงููุธุฑ ุฅูู ููุทุฉ ูุนููุฉ. ูููู ุถุจุท ุงูุฏูุฑุงู ุงููุทููุจ ุจุงุณุชุฎุฏุงู ุงูุทุฑููุฉ </font></font><code>Transform.LookAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุฃููุงู ูู ุฎูุงู ุฌุนู ุงูููุทุฉ ูู ููุณ ุงููุถุน ุงูุฑุฃุณู ููุงููุตุงู. ุจุนุฏ ุฐูู ูููููุง ุงุณุชุฑุฏุงุฏ ุงุชุฌุงู ุงููุฑูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LookAt</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 point</span></span></span><span class="hljs-function">)</span></span> { point.y = transform.localPosition.y; transform.LookAt(point); orientation = transform.localRotation.eulerAngles.y; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ูุชุญูู ุงููุตู ูู ุงููุงูุน ุ ุณูุญูู ุงูุทุฑููุฉ ุฅูู ููุฑูุชูู ุขุฎุฑ ูู ุดุฃูู ุฃู ูุฏูุฑูุง ุจุณุฑุนุฉ ุซุงุจุชุฉ. ูููู ุฃูุถูุง ุชุนุฏูู ุณุฑุนุฉ ุงูุฏูุฑุงู ุ ูููููุง ุณูุณุชุฎุฏู ุงูุซุงุจุช ูุฑุฉ ุฃุฎุฑู. ูุฌุจ ุฃู ูููู ุงูุฏูุฑุงู ุณุฑูุนูุง ุ ุญูุงูู 180 ุฏุฑุฌุฉ ูู ุงูุซุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> rotationSpeed = <span class="hljs-number"><span class="hljs-number">180f</span></span>; โฆ <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LookAt</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 point</span></span></span><span class="hljs-function">)</span></span> { โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณ ูู ุงูุถุฑูุฑู ุงูุนุจุซ ุจุชุณุฑูุน ุงูุฏูุฑ ูุฃูู ุบูุฑ ูุญุณูุณ. ุณูููู ูุงููุงู ุจุงููุณุจุฉ ููุง ุฃู ูุณุชููู ุจุจุณุงุทุฉ ุจูู ุงูุงุชุฌุงููู. ูุณูุก ุงูุญุธ ุ ูุฐู ููุณุช ุจุณูุทุฉ ููุง ูู ุญุงูุฉ ุฑูููู ุ ูุฃู ุงูุฒูุงูุง ุฏุงุฆุฑูุฉ. ุนูู ุณุจูู ุงููุซุงู ุ ูุฌุจ ุฃู ูุคุฏู ุงูุงูุชูุงู ูู 350 ุฏุฑุฌุฉ ุฅูู 10 ุฏุฑุฌุฉ ุฅูู ุฏูุฑุงู 20 ุฏุฑุฌุฉ ูู ุงุชุฌุงู ุนูุงุฑุจ ุงูุณุงุนุฉ ุ ูููู ุงูุงุณุชููุงุก ุงูุจุณูุท ุณููุฑุถ ุฏูุฑุงู 340 ุฏุฑุฌุฉ ูู ุงุชุฌุงู ุนูุณ ุนูุงุฑุจ ุงูุณุงุนุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุณูู ุทุฑููุฉ ูุฅูุดุงุก ุฏูุฑุงู ุตุญูุญ ูู ุงูุงุณุชููุงู ุจูู ูุตููู ุจุงุณุชุฎุฏุงู ุงูุงุณุชููุงุก ุงููุฑูู. ุณูุคุฏู ุฐูู ุฅูู ุฃูุตุฑ ุฏูุฑุฉ. ููููุงู ุจุฐูู ุ ูุญุตู ุนูู ุฑุจุงุนูุงุช ุงูุจุฏุงูุฉ ูุงูููุงูุฉ ุ ุซู ูููู ุจุงูุงูุชูุงู ุจููููุง ุจุงุณุชุฎุฏุงู </font></font><code>Quaternion.Slerp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LookAt</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 point</span></span></span><span class="hljs-function">)</span></span> { point.y = transform.localPosition.y; Quaternion fromRotation = transform.localRotation; Quaternion toRotation = Quaternion.LookRotation(point - transform.localPosition); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = Time.deltaTime; t &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span>; t += Time.deltaTime) { transform.localRotation = Quaternion.Slerp(fromRotation, toRotation, t); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } transform.LookAt(point); orientation = transform.localRotation.eulerAngles.y; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุนูู ูุฐุง ุ ูููู ุงูุงุณุชููุงุก ููุชูู ุฏุงุฆููุง ูู 0 ุฅูู 1 ุ ุจุบุถ ุงููุธุฑ ุนู ุฒุงููุฉ ุงูุฏูุฑุงู. </font><font style="vertical-align: inherit;">ูุถูุงู ุงูุณุฑุนุฉ ุงูุฒุงููุฉ ุงูููุชุธูุฉ ุ ูุญุชุงุฌ ุฅูู ุฅุจุทุงุก ุงูุงุณุชููุงุก ูุน ุฒูุงุฏุฉ ุฒุงููุฉ ุงูุฏูุฑุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Quaternion fromRotation = transform.localRotation; Quaternion toRotation = Quaternion.LookRotation(point - transform.localPosition); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> angle = Quaternion.Angle(fromRotation, toRotation); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed = rotationSpeed / angle; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = Time.deltaTime * speed; t &lt; <span class="hljs-number"><span class="hljs-number">1f</span></span>; t += Time.deltaTime * speed ) { transform.localRotation = Quaternion.Slerp(fromRotation, toRotation, t); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูุนุฑูุฉ ุงูุฒุงููุฉ ุ ูููููุง ุชุฎุทู ุงูุฏูุฑ ุชูุงููุง ุฅุฐุง ุงุชุถุญ ุฃูู ุตูุฑ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> angle = Quaternion.Angle(fromRotation, toRotation); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (angle &gt; <span class="hljs-number"><span class="hljs-number">0f</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed = rotationSpeed / angle; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( โฆ ) { โฆ } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุฅุถุงูุฉ ุฏูุฑุงู ุงููุญุฏุฉ </font></font><code>TravelPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุจุณุงุทุฉ ุนู ุทุฑูู ุฃุฏุงุก ุงูุนุงุฆุฏ ูุจู ุชุญุฑูู </font></font><code>LookAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุถุน ุงูุฎููุฉ ุงูุซุงููุฉ. </font><font style="vertical-align: inherit;">ุณุชุทูู ุงููุญุฏุฉ ุชููุงุฆููุง Coroutine </font></font><code>LookAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>TravelPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชูุชุธุฑ ุงูุชูุงูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TravelPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Vector3 a, b, c = pathToTravel[<span class="hljs-number"><span class="hljs-number">0</span></span>].Position; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LookAt</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pathToTravel[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">].Position</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = Time.deltaTime * travelSpeed; โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุชุญููุช ูู ุงูุฑูุฒ ุ ููุชูู ุงููุฑูู ุฅูู ุงูุฎููุฉ ุงูุฃุฎูุฑุฉ ุ ุซู ูุชุญูู ุฅูู ููุงู ุ ุซู ููุชูู ุจุนุฏ ุฐูู ุฅูู ุจุฏุงูุฉ ุงููุณุงุฑ ููุจุฏุฃ ูู ุงูุงูุชูุงู ูู ููุงู. </font><font style="vertical-align: inherit;">ูุญุฏุซ ูุฐุง ูุฃููุง ูุนูู ูููุฉ ูุฎุงุตูุฉ </font></font><code>Location</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุจุฏุงูุฉ coroutine </font></font><code>TravelPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุชุฎูุต ูู ุงูููู ุงูููุฑู ุ ูููููุง ูู ุงูุจุฏุงูุฉ </font></font><code>TravelPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุนุงุฏุฉ ููุถุน ุงูุงููุตุงู ุฅูู ุงูุฎููุฉ ุงูุฃูููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Vector3 a, b, c = pathToTravel[<span class="hljs-number"><span class="hljs-number">0</span></span>].Position; transform.localPosition = c; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LookAt</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pathToTravel[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">].Position</span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฏุฑ ูุจู ุงูุชุญุฑู</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุณุงุญ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุชููู ุงูุญุฑูุฉ ุงูุชู ูุญุชุงุฌูุง ุ ูููููุง ุงูุชุฎูุต ูู ุงูุทุฑููุฉ </font></font><code>OnDrawGizmos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุจุญุฐูู ุฃู ุงูุชุนููู ูู ุญุงู ุงุญุชุฌูุง ุฅูู ุฑุคูุฉ ุงููุณุงุฑุงุช ูู ุงููุณุชูุจู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// void OnDrawGizmos () { // โฆ // }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูู ูุนุฏ ุจุญุงุฌุฉ ุฅูู ุชุฐูุฑ ุงูุทุฑููุฉ ุงูุชู ููุง ูุชุญุฑู ุจูุง ุ ููููู ูู ุงูููุงูุฉ </font></font><code>TravelPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฑูุฑ ูุงุฆูุฉ ุงูุฎูุงูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TravelPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ ListPool&lt;HexCell&gt;.Add(pathToTravel); pathToTravel = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฐุง ุนู ุงูุฑุณูู ุงููุชุญุฑูุฉ ุงูุญููููุฉ ูููุฑูุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">         ,   .    3D-       .      .        ,     .       Mecanim,     <code>TravelPath</code> . </div></div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar426481/">https://habr.com/ru/post/ar426481/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar426471/index.html">ููู ุชุชุณุฑุจ ุจูุงูุงุช ุจุฑุงูุฌ ุงูุชุฌุณุณ</a></li>
<li><a href="../ar426473/index.html">ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ Redux. ูุนู ุฃู ูุงุ</a></li>
<li><a href="../ar426475/index.html">ููุง - ูุณุงุนุฏ ูู ุงููุงุชู ุงูุฐูู</a></li>
<li><a href="../ar426477/index.html">ุงูุญูููุฉ ุงููุงููุฉ ุนู RTOS. ุงููุงุฏุฉ ุฑูู 15. ุฃูุณุงู ุงูุฐุงูุฑุฉ: ุงูุฎุฏูุงุช ูููุงูู ุงูุจูุงูุงุช</a></li>
<li><a href="../ar426479/index.html">ููุถุฏุฉ ุงุฎุชุจุงุฑ ูุญููุฉ ุงูุตูุน ูููุญุงุช ุงูุฃู</a></li>
<li><a href="../ar426483/index.html">ุงูุดุฎุต ุงูุฐู ูุชููู ุนูู ุชุณูุง. ููุฒูุฏ ูู ุงูุฑุจุญ</a></li>
<li><a href="../ar426485/index.html">ุงุฎุชุจุงุฑ Qt 5 ุงูุซุงูุซ ูุน PVS-Studio</a></li>
<li><a href="../ar426487/index.html">ุงุฎุชุจุงุฑ ุงูุฃุชูุชุฉ ูู ุงูุตูุฑ. ุงูุฌุฒุก ุงูุฃูู</a></li>
<li><a href="../ar426489/index.html">ูู ุนูุงูุฉ ุงูุฃุนุฏุงุฏ ุงูุฃูููุฉ ูุบูุฑ ุงูููุทููุฉ</a></li>
<li><a href="../ar426491/index.html">ุฃุณุจูุน ุงูุฃูู 39: ูู ููุงุฉ + Google</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>