<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöê üõ¥ ü•ô Gu√≠a: c√≥mo hacer un bot simple para JS Telegram para un principiante en programaci√≥n üë™ üïµÔ∏è üë§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Empec√© a sumergirme en el mundo de TI hace solo tres semanas. En serio, hace tres semanas ni siquiera entend√≠a la sintaxis HTML, y mi introducci√≥n a l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gu√≠a: c√≥mo hacer un bot simple para JS Telegram para un principiante en programaci√≥n</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447006/">  Empec√© a sumergirme en el mundo de TI hace solo tres semanas.  En serio, hace tres semanas ni siquiera entend√≠a la sintaxis HTML, y mi introducci√≥n a los lenguajes de programaci√≥n termin√≥ con un curr√≠culo escolar de Pascal de 10 a√±os.  Sin embargo, decid√≠ ir al campamento de TI, para cuyos hijos ser√≠a bueno hacer un bot.  Decid√≠ que no era tan dif√≠cil. <br><br>  Esto comenz√≥ un largo viaje, dentro del cual yo: <br><br><ul><li>  despleg√≥ un servidor en la nube con Ubuntu, </li><li>  registrado en github </li><li>  Aprend√≠ la sintaxis b√°sica de JavaScript </li><li>  lea un mont√≥n de art√≠culos en ingl√©s y ruso, </li><li>  finalmente hizo un bot </li><li>  escribi√≥ este art√≠culo finalmente. </li></ul><br>  El resultado final se parec√≠a a esto: <br><br><img src="https://habrastorage.org/webt/qi/72/kz/qi72kzkdbw7i_mk0bry9i9bcrew.png"><br><a name="habracut"></a><br>  Dir√© de inmediato, este es un art√≠culo para principiantes, solo para entender c√≥mo hacer cosas b√°sicas desde el punto cero. <br><br>  Y tambi√©n, para programadores avanzados, solo para hacerlos re√≠r un poco. <br><br>  <b>1. ¬øC√≥mo escribir c√≥digo en JS?</b> <br><br>  Comprend√≠ que vale la pena comenzar con al menos comprender la sintaxis del lenguaje.  La elecci√≥n recay√≥ en JavaScript, simplemente porque el siguiente paso para m√≠ fue crear una aplicaci√≥n en ReactNative.  Comenc√© con un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">curso</a> sobre Codecademy y qued√© encantado.  Los primeros 7 d√≠as son gratis.  Proyectos reales.  Lo recomiendo  Pasarlo tom√≥ alrededor de 25 horas.  De hecho, lejos de todo fue √∫til.  As√≠ es como se ve la estructura del curso y el primer bloque est√° en detalle. <br><br><img src="https://habrastorage.org/webt/cv/et/v9/cvetv9w-mfsa3oyb4rjzqhsaphu.png"><br><br>  <b>2. ¬øC√≥mo registrar un bot?</b> <br><br>  Al principio, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este art√≠culo</a> del blog de cierto Archakov me ayud√≥ mucho.  √âl mastica desde el principio.  Pero lo principal es que hay una instrucci√≥n para registrar un bot.  No escribir√© mejor, y como esta es la parte m√°s f√°cil, simplemente escribir√© la esencia.  Necesita crear un bot y obtener su API.  Esto se hace a trav√©s de otro bot: @BotFather.  Encu√©ntrelo en el telegrama, escr√≠balo, siga una ruta simple y obtenga (¬°guarde!) Una clave API (este es un conjunto de n√∫meros y letras).  Fue √∫til m√°s tarde. <br><br><img src="https://habrastorage.org/webt/se/yv/pj/seyvpjcxg3cv4s_vcagqxyyhtwq.png"><br><br>  <b>3. ¬øC√≥mo se ve el c√≥digo bot?</b> <br><cut><br>  Despu√©s de un largo estudio de los art√≠culos, me di cuenta de que vale la pena usar alg√∫n tipo de biblioteca (c√≥digo de terceros en formato de m√≥dulo) para no molestarme en aprender la API de telegramas y crear grandes piezas de c√≥digo desde cero.  Encontr√© el marco de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">telegraf</a> que necesitaba estar conectado de alguna manera a algo usando npm o yarn.  As√≠ entend√≠ entonces en qu√© consiste la implementaci√≥n del bot.  R√≠ete aqu√≠.  No me ofender√©.  Los siguientes ejemplos de la parte inferior de la p√°gina me ayudaron sobre todo durante la posterior creaci√≥n del bot: <br><br><img src="https://habrastorage.org/webt/j_/n_/pr/j_n_praw6dpswa0q0veu5bj1osm.png"><br><br>  <b>3. C√≥mo crear su propio servidor en la nube por 100 rublos</b> <br><br>  Despu√©s de una larga b√∫squeda, me di cuenta de que el comando 'npm' de la imagen de arriba se refiere a la l√≠nea de comando.  La l√≠nea de comando est√° en todas partes, pero para ejecutarla, debe instalar NodePackageManager.  El problema era que estaba programando en el PixelBook con ChromeOS.  Omitir√© un bloque grande aqu√≠ sobre c√≥mo aprend√≠ Linux: para la mayor√≠a, esto est√° vac√≠o e innecesario.  Si tiene un Windows o MacBook, ya tiene una consola. <br><br>  En pocas palabras, instal√© Linux a trav√©s de Crostini. <br><br>  Sin embargo, en el proceso, me di cuenta de que para que el bot funcione constantemente (y no solo cuando mi computadora est√° encendida) necesito un servidor en la nube.  Eleg√≠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">vscale.io</a> , lanc√© 100 rublos, compr√© el servidor Ubuntu m√°s barato ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ver foto</a> ). <br><br><img src="https://habrastorage.org/webt/rs/ad/jn/rsadjnqc7eok_5wps7dqbftw9yo.png"><br><br>  <b>4. C√≥mo preparar un servidor para lanzar un bot</b> <br><br>  Despu√©s de eso, me di cuenta de que necesito hacer alg√∫n tipo de carpeta en el servidor en la que coloque el archivo con el texto del c√≥digo.  Para hacer esto, en la consola (ejecutar directamente en el sitio a trav√©s del bot√≥n "Abrir consola") conduje <br><br><pre><code class="plaintext hljs">mkdir bot</code> </pre> <br>  bot: este se ha convertido en el nombre de mi carpeta.  Despu√©s de eso, instal√© npm y Node.js, lo que me permitir√° ejecutar c√≥digo desde archivos con permiso * .js <br><br><pre> <code class="plaintext hljs">sudo apt update sudo apt install nodejs sudo apt install npm</code> </pre> <br>  Recomiendo encarecidamente que en esta etapa, configure la conexi√≥n al servidor a trav√©s de su consola.  Aqu√≠ est√°n las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">instrucciones</a> , que le permitir√°n trabajar con el servidor directamente a trav√©s de la consola de su computadora. <br><br>  <b>5. C√≥mo escribir el c√≥digo del primer bot.</b> <br><br>  Y ahora es solo un descubrimiento para m√≠.  Cualquier programa es solo l√≠neas de texto.  Se pueden conducir a cualquier lugar, guardar con la extensi√≥n deseada y todo.  Eres hermosa  Us√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Atom</a> , pero realmente, simplemente puedes escribir en el bloc de notas est√°ndar.  Lo principal es guardar el archivo en la extensi√≥n deseada m√°s adelante.  As√≠ es como escribir texto en Word y guardar. <br><br>  Hice un nuevo archivo, en el que insert√© el c√≥digo del ejemplo en la p√°gina de telegraf y lo guard√© en el archivo index.js (no es necesario nombrar el archivo de esa manera, pero se acepta).  Importante: en lugar de BOT_TOKEN, inserte su clave API del segundo p√°rrafo. <br><br><pre> <code class="plaintext hljs">const Telegraf = require('telegraf') const bot = new Telegraf(process.env.BOT_TOKEN) bot.start((ctx) =&gt; ctx.reply('Welcome!')) bot.help((ctx) =&gt; ctx.reply('Send me a sticker')) bot.on('sticker', (ctx) =&gt; ctx.reply('')) bot.hears('hi', (ctx) =&gt; ctx.reply('Hey there')) bot.launch()</code> </pre> <br>  <b>6. C√≥mo cargar c√≥digo al servidor a trav√©s de github</b> <br><br>  Ahora necesitaba cargar de alguna manera este c√≥digo al servidor y ejecutarlo.  Para m√≠ se convirti√≥ en un desaf√≠o.  Como resultado, despu√©s de una larga prueba, me di cuenta de que ser√≠a m√°s f√°cil crear un archivo en github, que llama a actualizar el c√≥digo usando el comando en la consola.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Registr√©</a> una cuenta en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> e hice un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nuevo proyecto</a> , donde cargu√© el archivo.  Despu√©s de eso, necesitaba entender c√≥mo configurar la carga de archivos desde mi cuenta (¬°abierto!) Al servidor en la carpeta bot (si de repente lo dej√≥, simplemente escriba cd bot). <br><br>  <b>7. C√≥mo subir archivos al servidor a trav√©s de github parte 2</b> <br><br>  Necesitaba poner en el servidor un programa que descargue archivos de git.  Puse git en el servidor, conduci√©ndolo a la consola <br><br><pre> <code class="plaintext hljs">apt-get install git</code> </pre> <br>  Despu√©s de eso, necesitaba configurar la carga del archivo.  Para hacer esto, ingres√© a la l√≠nea de comando <br><br><pre> <code class="plaintext hljs">git clone git://github.com/b0tank/bot.git bot</code> </pre><br>  Como resultado, todo el proyecto se carg√≥ en el servidor.  El error en esta etapa fue que esencialmente hice una segunda carpeta dentro de la carpeta bot ya existente.  La direcci√≥n antes del archivo parec√≠a * / bot / bot / index.js <br><br>  Decid√≠ descuidar este problema. <br><br>  Y para cargar la biblioteca de telegraf, que solicitamos en la primera l√≠nea de c√≥digo, introduzca un comando en la consola. <br><br><pre> <code class="plaintext hljs">npm install telegraf</code> </pre> <br>  <b>8. C√≥mo iniciar un bot</b> <br><br>  Para hacer esto, mientras est√° en la carpeta con el archivo (para cambiar de una carpeta a otra a trav√©s de la consola, ejecute el comando del formato <code>cd bot</code> para asegurarse de que est√° donde necesita conducir un comando que muestra en la consola todos los archivos y carpetas que se encuentran all√≠ <code>ls -a</code> <br><br>  Para correr, entr√© en la consola <br><br><pre> <code class="plaintext hljs">node index.js</code> </pre><br>  Si no hay error, todo est√° bien, el bot funciona.  B√∫scalo en el telegrama.  Si hay un error, aplique su conocimiento desde 1 punto. <br><br>  <b>9. C√≥mo iniciar un bot en segundo plano</b> <br><br>  R√°pidamente, te dar√°s cuenta de que el bot solo funciona cuando t√∫ mismo est√°s sentado en la consola.  Para resolver este problema utilic√© el comando <br><br><pre> <code class="plaintext hljs">screen</code> </pre> <br>  Despu√©s de eso, aparecer√° una pantalla con algo de texto.  Esto significa que todo est√° bien.  Est√°s en un servidor virtual en un servidor en la nube.  Para comprender mejor c√≥mo funciona todo esto, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠ hay un art√≠culo</a> .  Simplemente vaya a su carpeta y maneje el comando para iniciar el bot <br><br><pre> <code class="plaintext hljs">node index.js</code> </pre> <br>  <b>10. ¬øC√≥mo funciona el bot y c√≥mo ampliar su funcionalidad?</b> <br><br>  ¬øQu√© puede hacer nuestro bot del ejemplo?  El puede <br><br><pre> <code class="plaintext hljs">bot.start((ctx) =&gt; ctx.reply('Welcome!'))</code> </pre> <br>  di "¬°Bienvenido!"  en el momento del inicio (intente cambiar el texto) <br><br><pre> <code class="plaintext hljs">bot.help((ctx) =&gt; ctx.reply('Send me a sticker'))</code> </pre> <br>  en respuesta al comando / ayuda est√°ndar, env√≠e un mensaje "Enviarme una pegatina" <br><br><pre> <code class="plaintext hljs">bot.on('sticker', (ctx) =&gt; ctx.reply(''))</code> </pre> <br>  en respuesta a la pegatina enviar aprobaci√≥n <br><br><pre> <code class="plaintext hljs">bot.hears('hi', (ctx) =&gt; ctx.reply('Hey there'))</code> </pre> <br>  responde "Hola" si dicen "hola" <br>  bot.launch () <br><br><img src="https://habrastorage.org/webt/af/dy/rw/afdyrw8ffn4et_wcaqhpqvblxcc.png"><br><br>  Si observa el c√≥digo en <a href="">github</a> , se dar√° cuenta r√°pidamente de que no me he alejado mucho de esta funcionalidad.  Lo que se usa activamente es la funci√≥n <code>ctx.replyWithPhoto</code> , que le permite enviar una foto o un gif en respuesta a un texto espec√≠fico. <br><br>  Una parte importante del c√≥digo fue escrita por ni√±os de 11 a 13 a√±os, a quienes les di acceso al bot.  Presentaron su caso de usuario.  Creo que es f√°cil determinar qu√© parte hicieron ellos. <br><br>  Por ejemplo, el mensaje "jake" viene con un gif con un personaje famoso de la caricatura Adventure Time. <br><br><img src="https://habrastorage.org/webt/d_/uw/7l/d_uw7lowyis6kiupnbc_vb5_cfs.png"><br><br>  Para desarrollar a√∫n m√°s el bot, para conectar el teclado necesita mirar ejemplos, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desde aqu√≠</a> <br><br>  <b>11. C√≥mo actualizar el c√≥digo y reiniciar el bot</b> <br><br>  No olvide que necesita actualizar el c√≥digo no solo en github, sino tambi√©n en el servidor.  Hacer esto es simple: detenga el bot (presione ctrl + c), <br><br>  - Entrar en la consola, estar en la carpeta de destino, <code>git pull</code> <br>  - inicie el bot nuevamente con el <code>node index.js</code> <br><br>  <b>Fin</b> <br><br>  Muchas de las cosas descritas en este archivo ser√°n s√∫per obvias para los programadores avanzados.  Sin embargo, cuando yo mismo intent√© de un salto para saltar sobre el abismo al mundo de los bots, realmente perd√≠ esa gu√≠a.  Una gu√≠a en la que las cosas que son obvias y simples para cualquier especialista de TI no se pasan por alto. <br><br>  En el futuro planeo una publicaci√≥n sobre c√≥mo hacer mi primera aplicaci√≥n ReactNative con el mismo estilo, ¬°suscr√≠base! </cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/447006/">https://habr.com/ru/post/447006/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../446996/index.html">El m√©todo Pomodoro no es tan genial como podr√≠a ser</a></li>
<li><a href="../446998/index.html">Inicio de SAP GUI desde un navegador</a></li>
<li><a href="../447000/index.html">Guerras de formato de audio: 10 materiales en medios digitales y anal√≥gicos</a></li>
<li><a href="../447002/index.html">Tour de coworking fotogr√°fico de Cabinet Lounge</a></li>
<li><a href="../447004/index.html">Universal Watchdog en ATtiny13</a></li>
<li><a href="../447008/index.html">C√≥mo tomar el control de su infraestructura de red. Tabla de contenidos</a></li>
<li><a href="../447010/index.html">No por mucho tiempo la m√∫sica son√≥ ... o c√≥mo el OS Elbrus nunca se volvi√≥ libre</a></li>
<li><a href="../447014/index.html">Estructuras de referencia desechables en C # 8.0</a></li>
<li><a href="../447016/index.html">25 a√±os despu√©s: una entrevista con Linus Torvalds</a></li>
<li><a href="../447018/index.html">Enriquecimiento cu√°ntico en una interpretaci√≥n multimundo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>