<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‚ â™“ï¸ ğŸ•¤ ä½¿ç”¨react-reduxçš„connectï¼ˆï¼‰å‡½æ•° ğŸ‘¨ğŸ¾â€ğŸš€ ğŸ¥ƒ ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘ä»¬ä»Šå¤©ç¿»è¯‘çš„æ–‡ç« å°†è®¨è®ºå¦‚ä½•åœ¨Reactåº”ç”¨ç¨‹åºä¸­åˆ›å»ºä¸ReduxçŠ¶æ€ç›¸å…³çš„å®¹å™¨ç»„ä»¶ã€‚ è¯¥ææ–™åŸºäºä½¿ç”¨react-reduxåŒ…çš„ Reactä¸­çŠ¶æ€ç®¡ç†æœºåˆ¶çš„æè¿°ã€‚ å‡å®šæ‚¨å·²ç»å¯¹æˆ‘ä»¬å°†è¦è®¨è®ºçš„åº“çš„ä½“ç³»ç»“æ„å’ŒAPIæœ‰äº†åŸºæœ¬çš„äº†è§£ã€‚ å¦‚æœä¸æ˜¯è¿™ç§æƒ…å†µï¼Œè¯·å‚é˜…Reactå’ŒReduxæ–‡æ¡£ã€‚ 

  

 å…³äº...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨react-reduxçš„connectï¼ˆï¼‰å‡½æ•°</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/423157/"> æˆ‘ä»¬ä»Šå¤©ç¿»è¯‘çš„æ–‡ç« å°†è®¨è®ºå¦‚ä½•åœ¨Reactåº”ç”¨ç¨‹åºä¸­åˆ›å»ºä¸ReduxçŠ¶æ€ç›¸å…³çš„å®¹å™¨ç»„ä»¶ã€‚ è¯¥ææ–™åŸºäºä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">react-reduxåŒ…çš„</a> Reactä¸­çŠ¶æ€ç®¡ç†æœºåˆ¶çš„æè¿°ã€‚ å‡å®šæ‚¨å·²ç»å¯¹æˆ‘ä»¬å°†è¦è®¨è®ºçš„åº“çš„ä½“ç³»ç»“æ„å’ŒAPIæœ‰äº†åŸºæœ¬çš„äº†è§£ã€‚ å¦‚æœä¸æ˜¯è¿™ç§æƒ…å†µï¼Œè¯·å‚é˜…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">React</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Redux</a>æ–‡æ¡£ã€‚ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/35f/0eb/fea/35f0ebfea2178696cb95ede9f78407c9.jpg" alt="å›¾ç‰‡"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">å…³äºJavaScriptåº”ç”¨ç¨‹åºä¸­çš„çŠ¶æ€ç®¡ç†</font> </h2><br>  Reactä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸¤ç§å°†æ•°æ®ä¼ è¾“åˆ°ç»„ä»¶çš„ä¸»è¦æœºåˆ¶ã€‚ è¿™äº›æ˜¯å±æ€§ï¼ˆå±æ€§ï¼‰å’ŒçŠ¶æ€ã€‚ å±æ€§æ˜¯åªè¯»çš„ï¼Œå¹¶å…è®¸çˆ¶ç»„ä»¶å°†å±æ€§ä¼ é€’ç»™å­ç»„ä»¶ã€‚ çŠ¶æ€æ˜¯å°è£…åœ¨ç»„ä»¶ä¸­çš„æœ¬åœ°å®ä½“ï¼Œå¯ä»¥åœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­éšæ—¶æ›´æ”¹ã€‚ <br><br> ç”±äºçŠ¶æ€æ˜¯ä¸€ç§ç”¨äºåˆ›å»ºå¼ºå¤§çš„åŠ¨æ€Reactåº”ç”¨ç¨‹åºçš„æå…¶æœ‰ç”¨çš„æœºåˆ¶ï¼Œå› æ­¤æœ‰å¿…è¦å¯¹å…¶è¿›è¡Œé€‚å½“çš„ç®¡ç†ã€‚ å½“å‰æœ‰å‡ ä¸ªåº“æä¾›äº†ç”¨äºç®¡ç†åº”ç”¨ç¨‹åºè¿è¡ŒçŠ¶å†µçš„ç»“æ„è‰¯å¥½çš„ä½“ç³»ç»“æ„ã€‚ å…¶ä¸­åŒ…æ‹¬<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Flux</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Redux</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MobX</a> ã€‚ <br><br>  Reduxæ˜¯ä¸€ä¸ªæ—¨åœ¨åˆ›å»ºç”¨äºå­˜å‚¨åº”ç”¨ç¨‹åºçŠ¶æ€çš„å®¹å™¨çš„åº“ã€‚ å®ƒä¸ºå¼€å‘äººå‘˜æä¾›äº†è¡Œä¸ºå¯é¢„æµ‹çš„æ˜“äºç†è§£çš„çŠ¶æ€ç®¡ç†å·¥å…·ã€‚ è¯¥åº“é€‚ç”¨äºç”¨çº¯JavaScriptç¼–å†™çš„åº”ç”¨ç¨‹åºï¼Œä»¥åŠä½¿ç”¨æŸäº›æ¡†æ¶è¿›è¡Œå¼€å‘çš„é¡¹ç›®ã€‚  Reduxçš„ä½“ç§¯å¾ˆå°ï¼Œä½†æ˜¯å®ƒå…è®¸æ‚¨ç¼–å†™å¯åœ¨ä¸åŒç¯å¢ƒä¸­è¿è¡Œçš„å¯é åº”ç”¨ç¨‹åºã€‚ <br><br> ä»¥ä¸‹æ˜¯åˆ›å»ºReduxå­˜å‚¨åº“çš„æ–¹æ³•ï¼š <br><br><pre><code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createStore } from <span class="hljs-string"><span class="hljs-string">'redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = {    auth: { loggedIn: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = createStore((state = initialState, action) =&gt; {    switch (action.type) {        case <span class="hljs-string"><span class="hljs-string">"LOG_IN"</span></span>:            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, auth: { loggedIn: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } };            <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;        case <span class="hljs-string"><span class="hljs-string">"LOG_OUT"</span></span>:            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { ...state, auth: { loggedIn: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } };            <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;        <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>:            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state;            <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;    }    })</code> </pre> <br><h2>  <font color="#3AC1EF">React-reduxåŒ…</font> </h2><br>  react-reduxè½¯ä»¶åŒ…ä¸ºReduxçŠ¶æ€å®¹å™¨æä¾›äº†Reactç»‘å®šï¼Œè¿™ä½¿å¾—å°†Reactåº”ç”¨ç¨‹åºè¿æ¥åˆ°Reduxä»“åº“éå¸¸å®¹æ˜“ã€‚ è¿™ä½¿æ‚¨å¯ä»¥æ ¹æ®Reactåº”ç”¨ç¨‹åºä¸å­˜å‚¨åº“çš„å…³ç³»æ¥åˆ†ç¦»å®ƒä»¬ã€‚ å³ï¼Œæˆ‘ä»¬æ­£åœ¨è°ˆè®ºä»¥ä¸‹ç±»å‹çš„ç»„ä»¶ï¼š <br><br><ol><li> æ¼”ç¤ºç»„ä»¶ã€‚ ä»–ä»¬ä»…è´Ÿè´£åº”ç”¨ç¨‹åºçš„å¤–è§‚ï¼Œå¹¶ä¸äº†è§£Reduxçš„çŠ¶æ€ã€‚ å®ƒä»¬é€šè¿‡å±æ€§æ¥æ”¶æ•°æ®å¹¶å¯ä»¥è°ƒç”¨å›è°ƒï¼Œå›è°ƒä¹Ÿé€šè¿‡å±æ€§ä¼ é€’ç»™å®ƒä»¬ã€‚ </li><li> å®¹å™¨ç»„ä»¶ã€‚ å®ƒä»¬è´Ÿè´£åº”ç”¨ç¨‹åºå†…éƒ¨æœºåˆ¶çš„æ“ä½œï¼Œå¹¶ä¸ReduxçŠ¶æ€äº¤äº’ã€‚ å®ƒä»¬é€šå¸¸æ˜¯ä½¿ç”¨react-reduxåˆ›å»ºçš„ï¼Œå¯ä»¥è°ƒåº¦Reduxæ“ä½œã€‚ å¦å¤–ï¼Œä»–ä»¬è®¢é˜…çŠ¶æ€æ›´æ”¹ã€‚ </li></ol><br> å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>æ‰¾åˆ°æœ‰å…³æ­¤æ–¹æ³•çš„è¯¦ç»†ä¿¡æ¯ï¼Œä»¥æ˜ç¡®å„ä¸ªç»„ä»¶çš„èŒè´£ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä¸»è¦è®¨è®ºä½¿ç”¨react-reduxè¿æ¥åˆ°ReduxçŠ¶æ€çš„å®¹å™¨ç»„ä»¶ã€‚ <br><br>  react-reduxè½¯ä»¶åŒ…çš„ç•Œé¢éå¸¸ç®€å•ã€‚ ç‰¹åˆ«æ˜¯ï¼Œæœ‰å…³æ­¤æ¥å£çš„æœ€æœ‰è¶£çš„äº‹æƒ…å½’ç»“ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š <br><br><ol><li>  <code>&lt;Provider store&gt;</code> -å…è®¸æ‚¨ä¸ºReactåº”ç”¨ç¨‹åºåˆ›å»ºåŒ…è£…ï¼Œå¹¶ä½¿ReduxçŠ¶æ€å¯ç”¨äºå…¶å±‚æ¬¡ç»“æ„ä¸­çš„æ‰€æœ‰å®¹å™¨ç»„ä»¶ã€‚ </li><li>  <code>connect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])</code> -å…è®¸æ‚¨åˆ›å»ºé«˜é˜¶ç»„ä»¶ã€‚ è¿™æ˜¯åŸºäºåŸºæœ¬Reactç»„ä»¶åˆ›å»ºå®¹å™¨ç»„ä»¶æ‰€å¿…éœ€çš„ã€‚ </li></ol><br> å®‰è£…react-reduxä»¥ä¾¿åœ¨é¡¹ç›®ä¸­ä½¿ç”¨æ­¤è½¯ä»¶åŒ…ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> react-redux <span class="hljs-comment"><span class="hljs-comment">--save</span></span></code> </pre> <br> åŸºäºæ‚¨å·²ç»ä¸ºReactåº”ç”¨ç¨‹åºé…ç½®äº†Reduxå­˜å‚¨åº“çš„å‡è®¾ï¼Œä»¥ä¸‹æ˜¯å°†åº”ç”¨ç¨‹åºè¿æ¥åˆ°Reduxå­˜å‚¨åº“çš„ç¤ºä¾‹ï¼š <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Provider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> createStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./createReduxStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = createStore(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rootElement = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'root'</span></span>); ReactDOM.render(( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{store}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">AppRootComponent</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ), rootElement);</code> </pre> <br> ç°åœ¨ï¼Œæ‚¨å¯ä»¥åˆ›å»ºè¿æ¥åˆ°Reduxå­˜å‚¨åº“çš„å®¹å™¨ç»„ä»¶ã€‚ è¿™æ˜¯ä½¿ç”¨<code>connect()</code> APIåœ¨<code>AppRootComponent</code>çš„å±‚æ¬¡ç»“æ„ä¸­å®Œæˆçš„ã€‚ <br><br><h2>  <font color="#3AC1EF">ä»€ä¹ˆæ—¶å€™ä½¿ç”¨connectï¼ˆï¼‰ï¼Ÿ</font> </h2><br><h3>  <font color="#3AC1EF">containeråˆ›å»ºå®¹å™¨ç»„ä»¶</font> </h3><br> å¦‚å‰æ‰€è¿°ï¼Œreact-redux <code>connect()</code> APIç”¨äºåˆ›å»ºè¿æ¥åˆ°Reduxå­˜å‚¨åº“çš„å®¹å™¨ç»„ä»¶ã€‚ ä½¿ç”¨Reactä¸Šä¸‹æ–‡æœºåˆ¶ä»ç»„ä»¶çš„æœ€é«˜ç¥–å…ˆè·å¾—æ‚¨è¦è¿æ¥çš„å­˜å‚¨ã€‚ å¦‚æœä»…åˆ›å»ºæ¼”ç¤ºæ–‡ç¨¿ç»„ä»¶ï¼Œåˆ™ä¸éœ€è¦<code>connect()</code>å‡½æ•°ã€‚ <br><br> å¦‚æœæ‚¨åœ¨Reactç»„ä»¶ä¸­éœ€è¦ä»å­˜å‚¨ä¸­æ¥æ”¶æ•°æ®ï¼Œæˆ–è€…éœ€è¦åˆ†æ´¾æ“ä½œï¼Œæˆ–è€…æ‚¨éœ€è¦åŒæ—¶æ‰§è¡Œè¿™ä¸¤é¡¹æ“ä½œï¼Œåˆ™å¯ä»¥å°†å¸¸è§„ç»„ä»¶åŒ…è£…åˆ°ç”±<code>connect()</code>è¿”å›çš„é«˜é˜¶ç»„ä»¶ä¸­ï¼Œä»è€Œå°†å…¶è½¬æ¢ä¸ºå®¹å™¨ç»„ä»¶react-reduxã€‚ çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Profile <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./components/Profile'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> ProfileContainer(props) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   props.loggedIn     ? &lt;Profile profile={props.profile} /&gt;     : &lt;div&gt;Please <span class="hljs-keyword"><span class="hljs-keyword">login</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> profile.&lt;/div&gt; ) } const mapStateToProps = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(state) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   profile: state.<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>.profile,   loggedIn: state.auth.loggedIn } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>(mapStateToProps)(ProfileContainer);</code> </pre> <br><h3>  <font color="#3AC1EF">â–æ— éœ€æ‰‹åŠ¨è®¢é˜…Reduxå­˜å‚¨</font> </h3><br> æ‚¨å¯ä»¥è‡ªå·±åˆ›å»ºå®¹å™¨ç»„ä»¶ï¼Œå¹¶ä½¿ç”¨<code>store.subscribe()</code>å‘½ä»¤åœ¨Reduxå­˜å‚¨åº“ä¸Šæ‰‹åŠ¨ç­¾åè¯¥ç»„ä»¶ã€‚ ä½†æ˜¯ï¼Œä½¿ç”¨<code>connect()</code>å‡½æ•°æ„å‘³ç€åº”ç”¨äº†ä¸€äº›æ€§èƒ½æ”¹è¿›å’Œä¼˜åŒ–ï¼Œè¿™äº›æ€§èƒ½å’Œä¼˜åŒ–å¯èƒ½åœ¨ä½¿ç”¨å…¶ä»–æœºåˆ¶æ—¶æ— æ³•ä½¿ç”¨ã€‚ <br><br> åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°è¯•æ‰‹åŠ¨åˆ›å»ºå®¹å™¨ç»„ä»¶ï¼Œå¹¶é€šè¿‡è®¢é˜…å°†å…¶è¿æ¥åˆ°Reduxå­˜å‚¨åº“ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åŠªåŠ›å®ç°ä¸ä¸Šä¾‹ç›¸åŒçš„åŠŸèƒ½ã€‚ <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component } from <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> store from <span class="hljs-string"><span class="hljs-string">'./reduxStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Profile from <span class="hljs-string"><span class="hljs-string">'./components/Profile'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProfileContainer</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getCurrentStateFromStore() getCurrentStateFromStore() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {     profile: store.getState().user.profile,     loggedIn: store.getState().auth.loggedIn   } } updateStateFromStore = () =&gt; {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> currentState = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getCurrentStateFromStore();     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state !== currentState) {     <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState(currentState);   } } componentDidMount() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.unsubscribeStore = store.subscribe(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.updateStateFromStore); } componentWillUnmount() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.unsubscribeStore(); } render() {   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { loggedIn, profile } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state;     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     loggedIn       ? &lt;Profile profile={profile} /&gt;       : &lt;div&gt;Please login to view profile.&lt;/div&gt;   ) } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> ProfileContainer;</code> </pre> <br> æ­¤å¤–ï¼Œ <code>connect()</code>å‡½æ•°ä¸ºå¼€å‘äººå‘˜æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ï¼Œä½¿æ‚¨å¯ä»¥é…ç½®å®¹å™¨ç»„ä»¶ä»¥åŸºäºæœ€åˆä¼ é€’ç»™å®ƒä»¬çš„å±æ€§æ¥æ¥æ”¶åŠ¨æ€å±æ€§ã€‚ äº‹å®è¯æ˜ï¼Œè¿™å¯¹äºä»åŸºäºå±æ€§çš„çŠ¶æ€ä¸­è·å–é€‰æ‹©æˆ–å°†æ“ä½œç”Ÿæˆå™¨ä¸å±æ€§ä¸­çš„ç‰¹å®šå˜é‡é“¾æ¥åœ¨ä¸€èµ·éå¸¸æœ‰ç”¨ã€‚ <br><br> å¦‚æœæ‚¨çš„Reactåº”ç”¨ç¨‹åºä½¿ç”¨å¤šä¸ªReduxå­˜å‚¨åº“ï¼Œé‚£ä¹ˆ<code>connect()</code>å¯ä»¥è½»æ¾æŒ‡å®šå®¹å™¨ç»„ä»¶åº”è¿æ¥åˆ°çš„ç‰¹å®šå­˜å‚¨åº“ã€‚ <br><br><h2>  <font color="#3AC1EF">è§£å‰–è¿æ¥ï¼ˆï¼‰</font> </h2><br>  react-reduxè½¯ä»¶åŒ…æä¾›çš„<code>connect()</code>å‡½æ•°æœ€å¤šå¯ä»¥åŒ…å«å››ä¸ªå‚æ•°ï¼Œæ¯ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰çš„ã€‚ è°ƒç”¨<code>connect()</code>å‡½æ•°åï¼Œå°†è¿”å›ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œè¯¥ç»„ä»¶å¯ç”¨äºåŒ…è£…ä»»ä½•Reactç»„ä»¶ã€‚ <br><br> ç”±äºè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œå› æ­¤éœ€è¦å†æ¬¡è°ƒç”¨å®ƒï¼Œå¹¶ä¼ é€’åŸºæœ¬çš„Reactç»„ä»¶ä»¥å°†å…¶è½¬æ¢ä¸ºå®¹å™¨ç»„ä»¶ï¼š <br><br><pre> <code class="hljs lisp">const ContainerComponent = connect()(<span class="hljs-name"><span class="hljs-name">BaseComponent</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br> è¿™æ˜¯<code>connect()</code>å‡½æ•°çš„ç­¾åï¼š <br><br><pre> <code class="hljs powershell">connect([<span class="hljs-type"><span class="hljs-type">mapStateToProps</span></span>], [<span class="hljs-type"><span class="hljs-type">mapDispatchToProps</span></span>], [<span class="hljs-type"><span class="hljs-type">mergeProps</span></span>], [<span class="hljs-type"><span class="hljs-type">options</span></span>])</code> </pre> <br><h3>  <font color="#3AC1EF">â–mapStateToPropså‚æ•°</font> </h3><br>  <code>mapStateToProps</code>å‚æ•°æ˜¯ä¸€ä¸ªè¿”å›å¸¸è§„å¯¹è±¡æˆ–å…¶ä»–å‡½æ•°çš„å‡½æ•°ã€‚ ä¼ é€’æ­¤<code>connect()</code>å‚æ•°<code>connect()</code>å®¹å™¨ç»„ä»¶é¢„è®¢åˆ°Reduxå­˜å‚¨åº“æ›´æ–°ã€‚ è¿™æ„å‘³ç€æ¯æ¬¡å­˜å‚¨åº“çŠ¶æ€æ›´æ”¹æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨<code>mapStateToProps</code>å‡½æ•°ã€‚ å¦‚æœæ‚¨ä¸æƒ³ç›‘è§†çŠ¶æ€æ›´æ–°ï¼Œ <code>connect()</code>ä½œä¸ºæ­¤å‚æ•°çš„å€¼ä¼ é€’ç»™<code>undefined</code>æˆ–<code>null</code> ã€‚ <br><br> ä½¿ç”¨ä¸¤ä¸ªå‚æ•°å£°æ˜<code>mapStateToProps</code>å‡½æ•°ï¼Œå…¶ä¸­ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Reduxå­˜å‚¨åº“çš„å½“å‰çŠ¶æ€ã€‚ ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¦‚æœä¼ é€’ï¼‰æ˜¯ä¼ é€’ç»™ç»„ä»¶çš„å±æ€§çš„å¯¹è±¡ï¼š <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   <span class="hljs-attr"><span class="hljs-attr">profile</span></span>: state.user.profile,   <span class="hljs-attr"><span class="hljs-attr">loggedIn</span></span>: state.auth.loggedIn } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> connect(mapStateToProps)(ProfileComponent);</code> </pre> <br> å¦‚æœä»<code>mapStateToProps</code>è¿”å›äº†å¸¸è§„å¯¹è±¡ï¼Œåˆ™è¿”å›çš„<code>stateProps</code>å¯¹è±¡å°†ä¸ç»„ä»¶çš„å±æ€§ç»„åˆã€‚ æ‚¨å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼åœ¨ç»„ä»¶ä¸­è®¿é—®è¿™äº›å±æ€§ï¼š <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProfileComponent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   props.loggedIn     ? <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Profile</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">profile</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{props.profile}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">     : </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Please login to view profile.</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ) }</span></span></code> </pre> <br> å¦‚æœ<code>mapStateToProps</code>è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™æ­¤å‡½æ•°ç”¨ä½œ<code>mapStateToProps</code>çš„æ¯ä¸ªå®ä¾‹çš„<code>mapStateToProps</code> ã€‚ è¿™å¯¹äºæé«˜æ¸²æŸ“æ€§èƒ½å’Œè¿›è¡Œå¤‡å¿˜å½•å¾ˆæœ‰ç”¨ã€‚ <br><br><h3>  <font color="#3AC1EF">â–mapDispatchToPropså‚æ•°</font> </h3><br>  <code>mapDispatchToProps</code>å‚æ•°å¯ä»¥æ˜¯å¯¹è±¡æˆ–è¿”å›å¸¸è§„å¯¹è±¡æˆ–å¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ã€‚ ä¸ºäº†æ›´å¥½åœ°è¯´æ˜<code>mapDispatchToProps</code> ï¼Œæˆ‘ä»¬éœ€è¦åŠ¨ä½œç”Ÿæˆå™¨ã€‚ å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹ç”Ÿæˆå™¨ï¼š <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> writeComment = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">comment</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ comment, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'WRITE_COMMENT'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> updateComment = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id, comment</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ id, comment, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'UPDATE_COMMENT'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> deleteComment = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ id, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'DELETE_COMMENT'</span></span> });</code> </pre> <br> ç°åœ¨è€ƒè™‘<code>mapDispatchToProps</code>çš„å„ç§ç”¨æ³•ã€‚ <br><br><h4> é»˜è®¤é»˜è®¤å®ç° </h4><br> å¦‚æœä¸ä½¿ç”¨ç”±å¯¹è±¡æˆ–å‡½æ•°è¡¨ç¤ºçš„è‡ªå·±çš„<code>mapDispatchToProps</code>å®ç°ï¼Œåˆ™å°†ä½¿ç”¨æ ‡å‡†å®ç°ï¼Œè¯¥å®ç°å°†<code>dispatch()</code>å­˜å‚¨åº“æ–¹æ³•ä½œä¸ºç»„ä»¶çš„å±æ€§æ¥å®ç°ã€‚ æ‚¨å¯ä»¥åœ¨ä»¥ä¸‹ç»„ä»¶ä¸­ä½¿ç”¨æ­¤å±æ€§ï¼š <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { updateComment, deleteComment } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>(props) { const { id, content } = props.<span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>; //    props.dispatch() const editComment = () =&gt; props.dispatch(updateComment(id, content)); const removeComment = () =&gt; props.dispatch(deleteComment(id)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;div&gt;     &lt;p&gt;{ content }&lt;/p&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={editComment}&gt;Edit <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={removeComment}&gt;Remove <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;   &lt;/div&gt; ) } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>()(<span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>);</code> </pre> <br><h4> å¯¹è±¡è½¬ç§» </h4><br> å¦‚æœå°†å¯¹è±¡ç”¨ä½œ<code>mapDispatchToProps</code>çš„å‚æ•°ï¼Œåˆ™è¯¥å¯¹è±¡ä¸­çš„æ¯ä¸ªå‡½æ•°å°†è¢«è§†ä¸ºReduxåŠ¨ä½œç”Ÿæˆå™¨ï¼Œå¹¶åŒ…è£…åœ¨<code>dispatch()</code>å­˜å‚¨åº“æ–¹æ³•è°ƒç”¨ä¸­ï¼Œè¿™å°†å…è®¸ç›´æ¥è°ƒç”¨å®ƒã€‚ å…·æœ‰åŠ¨ä½œç”Ÿæˆå™¨<code>dispatchProps</code>çš„ç»“æœå¯¹è±¡å°†ä¸ç»„ä»¶çš„å±æ€§ç»„åˆã€‚ <br><br> ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†æ„é€ <code>mapDispatchToProps</code>å‚æ•°çš„ç¤ºä¾‹ï¼Œè¯¥å‚æ•°æ˜¯å…·æœ‰åŠ¨ä½œç”Ÿæˆå™¨çš„å¯¹è±¡ï¼Œä»¥åŠå¦‚ä½•å°†ç”Ÿæˆå™¨ç”¨ä½œReactç»„ä»¶çš„å±æ€§ï¼š <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { updateComment, deleteComment } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>(props) { const { id, content } = props.<span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>; // ,   ,   const editComment = () =&gt; props.updatePostComment(id, content); const removeComment = () =&gt; props.deletePostComment(id); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;div&gt;     &lt;p&gt;{ content }&lt;/p&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={editComment}&gt;Edit <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={removeComment}&gt;Remove <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;   &lt;/div&gt; ) } //     const mapDispatchToProps = { updatePostComment: updateComment, deletePostComment: deleteComment } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, mapDispatchToProps)(<span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>);</code> </pre> <br><h4> åŠŸèƒ½è½¬ç§» </h4><br> å½“ä½¿ç”¨<code>mapDispatchToProps</code>å‡½æ•°ä½œä¸ºå‚æ•°æ—¶<code>mapDispatchToProps</code>ç¨‹åºå‘˜å¿…é¡»æ³¨æ„è¿”å›<code>dispatchProps</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä½¿ç”¨<code>dispatch()</code>å­˜å‚¨æ–¹æ³•ç»‘å®šåŠ¨ä½œç”Ÿæˆå™¨ã€‚ æ­¤å‡½æ•°æ¥å—<code>dispatch()</code>å­˜å‚¨åº“æ–¹æ³•ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚ ä¸<code>mapStateToProps</code> ï¼Œè¯¥å‡½æ•°è¿˜å¯ä»¥æ¥å—å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°<code>ownProps</code> ï¼Œè¯¥å‚æ•°æè¿°å…·æœ‰ä¼ é€’ç»™ç»„ä»¶çš„åŸå§‹å±æ€§çš„æ˜ å°„ã€‚ <br><br> å¦‚æœæ­¤å‡½æ•°è¿”å›å¦ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™è¿”å›çš„å‡½æ•°å°†ç”¨ä½œ<code>mapDispatchToProps</code> ï¼Œè¿™å¯¹äºæ”¹å–„æ¸²æŸ“æ€§èƒ½å’Œ<code>mapDispatchToProps</code>å¾ˆæœ‰ç”¨ã€‚ <br><br>  Reduxä¸­çš„<code>bindActionCreators()</code>å¸®åŠ©å‡½æ•°å¯åœ¨è¯¥å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œä»¥å°†åŠ¨ä½œç”Ÿæˆå™¨ç»‘å®šåˆ°<code>dispatch()</code>å­˜å‚¨åº“æ–¹æ³•ã€‚ <br><br> ä¸‹é¢çš„ç¤ºä¾‹ä»¥<code>mapDispatchToProps</code>çš„è§’è‰²æ˜¾ç¤ºå‡½æ•°çš„<code>mapDispatchToProps</code> ã€‚ å®ƒè¿˜æ¼”ç¤ºäº†è¾…åŠ©åŠŸèƒ½<code>bindActionCreators()</code>çš„å·¥ä½œï¼Œè¯¥åŠŸèƒ½ç”¨äºç»‘å®šåŠ¨ä½œç”Ÿæˆå™¨ä»¥ä¸å¯¹Reactç»„ä»¶çš„<code>props.actions</code>çš„æ³¨é‡Š<code>props.actions</code>ä½¿ç”¨ï¼š <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { bindActionCreators } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> commentActions <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>(props) { const { id, content } = props.<span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>; const { updateComment, deleteComment } = props.actions; //    props.actions const editComment = () =&gt; updateComment(id, content); const removeComment = () =&gt; deleteComment(id); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;div&gt;     &lt;p&gt;{ content }&lt;/p&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={editComment}&gt;Edit <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;     &lt;button <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="button" onClick={removeComment}&gt;Remove <span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>&lt;/button&gt;   &lt;/div&gt; ) } const mapDispatchToProps = (dispatch) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {   actions: bindActionCreators(commentActions, dispatch) } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, mapDispatchToProps)(<span class="hljs-keyword"><span class="hljs-keyword">Comment</span></span>);</code> </pre> <br><h3>  <font color="#3AC1EF">mergeå‚æ•°mergeProps</font> </h3><br> å¦‚æœå°†<code>mergeProps</code>å‚æ•°ä¼ é€’ç»™<code>connect()</code> ï¼Œåˆ™å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰ä»¥ä¸‹ä¸‰ä¸ªå‚æ•°çš„å‡½æ•°ï¼š <br><br><ul><li>  <code>stateProps</code>æ˜¯ä»<code>mapStateToProps()</code>è°ƒç”¨è¿”å›çš„å±æ€§å¯¹è±¡ã€‚ </li><li>  <code>dispatchProps</code>å…·æœ‰<code>mapDispatchToProps()</code>åŠ¨ä½œç”Ÿæˆå™¨çš„å±æ€§å¯¹è±¡ã€‚ </li><li>  <code>ownProps</code>ç»„ä»¶è·å¾—çš„åŸå§‹å±æ€§ã€‚ </li></ul><br> æ­¤å‡½æ•°è¿”å›ä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„å±æ€§å°†ä¼ é€’ç»™åŒ…è£…çš„ç»„ä»¶ã€‚ è¿™å¯¹äºæœ‰æ¡ä»¶åœ°æ˜ å°„Reduxå­˜å‚¨åº“æˆ–åŸºäºå±æ€§çš„æ“ä½œç”Ÿæˆå™¨çš„éƒ¨åˆ†çŠ¶æ€å¾ˆæœ‰ç”¨ã€‚ <br><br> å¦‚æœ<code>connect()</code>æ²¡æœ‰é€šè¿‡æ­¤å‡½æ•°ï¼Œåˆ™ä½¿ç”¨å…¶æ ‡å‡†å®ç°ï¼š <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mergeProps = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stateProps, dispatchProps, ownProps</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign({}, ownProps, stateProps, dispatchProps) }</code> </pre> <br><h3>  <font color="#3AC1EF">representingç”¨å‚æ•°è¡¨ç¤ºå¯¹è±¡çš„å‚æ•°</font> </h3><br> ä½œä¸ºç¬¬å››ä¸ªå‚æ•°ä¼ é€’ç»™<code>connect()</code>å‡½æ•°çš„å¯é€‰å¯¹è±¡ï¼ŒåŒ…å«æ—¨åœ¨æ›´æ”¹æ­¤å‡½æ•°çš„è¡Œä¸ºçš„å‚æ•°ã€‚ å› æ­¤ï¼Œ <code>connect()</code>æ˜¯<code>connectAdvanced()</code>å‡½æ•°çš„ç‰¹æ®Šå®ç°ï¼Œå®ƒæ¥å—<code>connectAdvanced()</code>å¯ç”¨çš„å¤§å¤šæ•°å‚æ•°ä»¥åŠä¸€äº›å…¶ä»–å‚æ•°ã€‚ <br><br>  <a href="">åœ¨</a>é˜…è¯»å®Œä¹‹åï¼Œ <a href="">è¿™æ˜¯</a>æ–‡æ¡£é¡µé¢ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°å¯ä»¥ä¸<code>connect()</code>ä¸€èµ·ä½¿ç”¨çš„å‚æ•°ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•ä¿®æ”¹æ­¤å‡½æ•°çš„è¡Œä¸ºã€‚ <br><br><h2>  <font color="#3AC1EF">ä½¿ç”¨connectï¼ˆï¼‰å‡½æ•°</font> </h2><br><h3>  <font color="#3AC1EF">â–åˆ›å»ºå­˜å‚¨</font> </h3><br> åœ¨ä½¿ç”¨<code>connect()</code>å°†å¸¸è§„Reactç»„ä»¶è½¬æ¢ä¸ºå®¹å™¨ç»„ä»¶ä¹‹å‰ï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªReduxå­˜å‚¨åº“ï¼Œè¯¥ç»„ä»¶å°†è¿æ¥åˆ°è¯¥å­˜å‚¨åº“ã€‚ <br><br> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå®¹å™¨ç»„ä»¶<code>NewComment</code> ï¼Œè¯¥ç»„ä»¶ç”¨äºå‘å‘å¸ƒä¸­æ·»åŠ æ–°è¯„è®ºï¼Œå¹¶å¦å¤–æ˜¾ç¤ºä¸€ä¸ªç”¨äºå‘é€è¯„è®ºçš„æŒ‰é’®ã€‚ æè¿°æ­¤ç»„ä»¶çš„ä»£ç å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">React</span></span> from <span class="hljs-symbol"><span class="hljs-symbol">'reac</span></span>t'; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { connect } from <span class="hljs-symbol"><span class="hljs-symbol">'react</span></span>-redux'; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NewComment</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ input = <span class="hljs-literal"><span class="hljs-literal">null</span></span> writeComment = evt =&gt; {   evt.preventDefault();   const comment = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input.value;     comment &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.dispatch({ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: <span class="hljs-symbol"><span class="hljs-symbol">'WRITE_COMMEN</span></span>T', comment }); } render() {   const { id, content } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.comment;     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;div&gt;       &lt;input <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"text"</span></span> ref={e =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.input = e} placeholder=<span class="hljs-string"><span class="hljs-string">"Write a comment"</span></span> /&gt;       &lt;button <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"button"</span></span> onClick={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.writeComment}&gt;<span class="hljs-type"><span class="hljs-type">Submit</span></span> <span class="hljs-type"><span class="hljs-type">Comment</span></span>&lt;/button&gt;     &lt;/div&gt;   ) } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> connect()(<span class="hljs-type"><span class="hljs-type">NewComment</span></span>);</code> </pre> <br> ä¸ºäº†åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æ­¤ç»„ä»¶ï¼Œæœ‰å¿…è¦æè¿°è¯¥ç»„ä»¶å¿…é¡»è¿æ¥åˆ°çš„Reduxå­˜å‚¨åº“ã€‚ å¦åˆ™ï¼Œå°†å‘ç”Ÿé”™è¯¯ã€‚ è¿™å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å®Œæˆï¼Œæˆ‘ä»¬ç°åœ¨å°†è€ƒè™‘ã€‚ <br><br><h4> åœ¨å®¹å™¨ç»„ä»¶ä¸­è®¾ç½®å•†åº—å±æ€§ </h4><br> ä¸ºç»„ä»¶é…å¤‡Reduxå­˜å‚¨åº“çš„ç¬¬ä¸€ç§æ–¹æ³•æ˜¯å°†æŒ‡å‘è¯¥å­˜å‚¨åº“çš„é“¾æ¥ä¼ é€’ä¸ºç»„ä»¶çš„<code>store</code>å±æ€§å€¼ï¼š <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> store <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./reduxStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NewComment <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./components/NewComment'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CommentsApp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">NewComment</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{store}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> }</span></span></code> </pre> <br><h4> åœ¨&lt;Provider&gt;ç»„ä»¶ä¸­è®¾ç½®storeå±æ€§ </h4><br> å¦‚æœæ‚¨åªæƒ³ä¸ºåº”ç”¨ç¨‹åºè®¾ç½®Reduxå­˜å‚¨åº“ä¸€æ¬¡ï¼Œé‚£ä¹ˆæ‚¨å°†å¯¹æˆ‘ä»¬ç°åœ¨è€ƒè™‘çš„æ–¹æ³•æ„Ÿå…´è¶£ã€‚ å®ƒé€šå¸¸é€‚ç”¨äºä»…ä½¿ç”¨ä¸€ä¸ªReduxå­˜å‚¨åº“çš„åº”ç”¨ç¨‹åºã€‚ <br><br>  react-reduxè½¯ä»¶åŒ…ä¸ºå¼€å‘äººå‘˜æä¾›äº†<code>&lt;Provider&gt;</code>ç»„ä»¶ï¼Œè¯¥ç»„ä»¶å¯ç”¨äºåŒ…è£…åº”ç”¨ç¨‹åºçš„æ ¹ç»„ä»¶ã€‚ å®ƒæ¥å—<code>store</code>å±æ€§ã€‚ å‡å®šå®ƒæ˜¯åˆ°è®¡åˆ’åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„Reduxå­˜å‚¨åº“çš„é“¾æ¥ã€‚ æ ¹æ®åº”ç”¨ç¨‹åºçš„å±‚æ¬¡ç»“æ„ï¼Œä½¿ç”¨Reactä¸Šä¸‹æ–‡æœºåˆ¶å°†<code>store</code>å±æ€§ä¼ é€’ç»™å®¹å™¨ç»„ä»¶ï¼š <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> store <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./reduxStore'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Provider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NewComment <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./components/NewComment'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CommentsApp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">NewComment</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> } ReactDOM.render(( </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{store}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">CommentsApp</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Provider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ), document.getElementById('root'))</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">ProOpenPropsè®¿é—®ç»„ç»‡</font> </h3><br> å¦‚å‰æ‰€è¿°ï¼Œå¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°<code>ownProps</code>å£°æ˜<code>mapStateToProps</code>ç»™<code>connect()</code>çš„<code>mapStateToProps</code>å’Œ<code>mapDispatchToProps</code>å‡½æ•°ï¼Œè¯¥å‚æ•°æ˜¯ç»„ä»¶çš„å±æ€§ã€‚ <br> ä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜ã€‚ å¦‚æœå·²å£°æ˜å‡½æ•°çš„å¿…éœ€å‚æ•°æ•°é‡å°äº2ï¼Œåˆ™å°†ä¸ä¼šä¼ è¾“<code>ownProps</code> ã€‚ ä½†æ˜¯ï¼Œå¦‚æœå£°æ˜çš„å‡½æ•°æ²¡æœ‰å¿…éœ€çš„å‚æ•°æˆ–å¸¦æœ‰è‡³å°‘2ä¸ªå‚æ•°ï¼Œåˆ™å°†ä¼ é€’<code>ownProps</code> ã€‚ <br><br> è€ƒè™‘ä½¿ç”¨<code>ownProps</code>å‡ ç§é€‰æ‹©ã€‚ <br><br><h4> æ²¡æœ‰å‚æ•°çš„å‡½æ•°å£°æ˜ </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// state console.log(arguments[1]); // ownProps };</span></span></code> </pre> <br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºå£°æ˜äº†å‡½æ•°è€Œæ²¡æœ‰å¿…éœ€çš„å‚æ•°ï¼Œ <code>ownProps</code>ä¼ é€’<code>ownProps</code> ã€‚ å› æ­¤ï¼Œä¸‹é¢çš„ä»£ç å°†ä¸ºå…¶ä½™çš„ES6å‚æ•°ä½¿ç”¨æ–°è¯­æ³•ç¼–å†™ï¼š <br><br><pre> <code class="hljs actionscript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-rest_arg"><span class="hljs-function"><span class="hljs-params"><span class="hljs-rest_arg">...args</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ console.log(args[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// state console.log(args[1]); // ownProps };</span></span></code> </pre> <br><h4> ä¸€ä¸ªå‚æ•°çš„å‡½æ•°å£°æ˜ </h4><br> è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(state); <span class="hljs-comment"><span class="hljs-comment">// state console.log(arguments[1]); // undefined };</span></span></code> </pre> <br> åªæœ‰ä¸€ä¸ªå‚æ•°<code>state</code> ã€‚ ç»“æœï¼Œç”±äºæœªä¼ è¾“<code>ownProps</code> ï¼Œå› æ­¤<code>arguments[1]</code>çš„å€¼<code>undefined</code> ã€‚ <br><br><h4> å…·æœ‰é»˜è®¤å‚æ•°çš„å‡½æ•°å£°æ˜ </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, ownProps = {}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(state); <span class="hljs-comment"><span class="hljs-comment">// state console.log(ownProps); // {} };</span></span></code> </pre> <br> åªæœ‰ä¸€ä¸ªå¿…éœ€çš„å‚æ•°<code>state</code> ï¼Œå› ä¸ºç¬¬äºŒä¸ªå‚æ•°<code>ownProps</code>æ˜¯å¯é€‰çš„ï¼Œå› ä¸ºå®ƒå…·æœ‰é»˜è®¤å€¼ã€‚ ç»“æœï¼Œç”±äºåªæœ‰ä¸€ä¸ªå¿…éœ€çš„å‚æ•°ï¼Œ <code>ownProps</code>ä¸ä¼šä¼ é€’<code>ownProps</code> ï¼Œå¹¶ä¸”å°†ä½¿ç”¨ä¸ºå…¶åˆ†é…çš„é»˜è®¤å€¼ï¼ˆå³ï¼Œä½¿ç”¨ç©ºå¯¹è±¡ï¼‰æ‰§è¡Œæ˜ å°„ã€‚ <br><br><h4> å£°æ˜å¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•° </h4><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapStateToProps = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, ownProps</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(state); <span class="hljs-comment"><span class="hljs-comment">// state console.log(ownProps); // ownProps };</span></span></code> </pre> <br> ä¸€åˆ‡éƒ½å®‰æ’å¾—éå¸¸ç®€å•ã€‚ å³ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºä½¿ç”¨ä¸¤ä¸ªå¿…éœ€çš„å‚æ•°å£°æ˜äº†å‡½æ•°ï¼Œå› æ­¤<code>ownProps</code>äº†<code>ownProps</code>çš„ä¼ è¾“ã€‚ <br><br><h2>  <font color="#3AC1EF">æ€»ç»“</font> </h2><br> æŒæ¡äº†è¿™äº›ææ–™ä¹‹åï¼Œæ‚¨äº†è§£äº†ä½•æ—¶ä»¥åŠå¦‚ä½•ä½¿ç”¨react-reduxè½¯ä»¶åŒ…æä¾›çš„<code>connect()</code> APIï¼Œè¯¥APIæ—¨åœ¨åˆ›å»ºè¿æ¥åˆ°ReduxçŠ¶æ€çš„å®¹å™¨ç»„ä»¶ã€‚ è¿™é‡Œæˆ‘ä»¬è¯¦ç»†è®¨è®ºäº†<code>connect()</code>å‡½æ•°çš„ç»“æ„ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒï¼Œä½†æ˜¯ï¼Œå¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šæœ‰å…³æ­¤æœºåˆ¶çš„ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯è¦ç†Ÿæ‚‰å…¶ä½¿ç”¨æ¡ˆä¾‹ï¼Œè¯·æŸ¥çœ‹ä¸€ä¸‹react-reduxæ–‡æ¡£çš„<a href="">è¿™ä¸€</a>éƒ¨åˆ†ã€‚ <br><br>  <b>äº²çˆ±çš„è¯»è€…ä»¬ï¼</b> æ‚¨æ˜¯å¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨react-reduxï¼Ÿ <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN423157/">https://habr.com/ru/post/zh-CN423157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN423147/index.html">å…³äºHadoopæ—¶ä»£çš„å­˜å‚¨ç­–ç•¥å’Œæ ¼å¼</a></li>
<li><a href="../zh-CN423149/index.html">ç›´æ¥æ¯”è¾ƒæ¿€å…‰è¿‘è§†çŸ«æ­£æ–¹æ³•æˆ–é€‰æ‹©ReLEx SMILEæ—¶éœ€è¦æ”¯ä»˜çš„è´¹ç”¨</a></li>
<li><a href="../zh-CN423151/index.html">PHPä¸­çš„å…¨å±€å¯¹è±¡</a></li>
<li><a href="../zh-CN423153/index.html">Node.jsæŒ‡å—ï¼Œç¬¬2éƒ¨åˆ†ï¼šJavaScriptï¼ŒV8ï¼Œä¸€äº›å¼€å‘æŠ€å·§</a></li>
<li><a href="../zh-CN423155/index.html">éº»çœç†å·¥å­¦é™¢çš„è¯¾ç¨‹â€œè®¡ç®—æœºç³»ç»Ÿå®‰å…¨â€ã€‚ è®²åº§8ï¼šç½‘ç»œå®‰å…¨æ¨¡å‹ï¼Œç¬¬2éƒ¨åˆ†</a></li>
<li><a href="../zh-CN423159/index.html">ç¨‹åºå‘˜èŠ‚å¿«ä¹ï¼ çˆ±ä½ çš„å¼€å‘è€…</a></li>
<li><a href="../zh-CN423161/index.html">ä¼ä¸šéœ€è¦ä¸ªäººæ•°æ®</a></li>
<li><a href="../zh-CN423163/index.html">å°†CryptoProè¿æ¥åˆ°Mono</a></li>
<li><a href="../zh-CN423165/index.html">è™šå¹»å¼•æ“4ä¸­çš„åŠ¨æ€ç½‘æ ¼å›¾ç»˜åˆ¶</a></li>
<li><a href="../zh-CN423167/index.html">é©¬å…‹Â·æ‰å…‹ä¼¯æ ¼ï¼ˆMark Zuckerbergï¼‰å…³äºFacebooké—®é¢˜çš„è¯é¢˜ã€‚ ã€Šçº½çº¦å®¢ã€‹æ–‡ç« çš„ä¸»è¦å†…å®¹</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>