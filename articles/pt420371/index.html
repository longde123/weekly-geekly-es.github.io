<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÖ üåî ü§ôüèª Sobre a quest√£o da constru√ß√£o de bicicletas no campo do armazenamento de correio el√©trico üåâ üëâ üè§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Por minha vontade, h√° um servidor de correio sob meus cuidados. Pequenos, ~ 20 usu√°rios. Funciona de forma est√°vel, √© indesej√°vel alterar o software. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sobre a quest√£o da constru√ß√£o de bicicletas no campo do armazenamento de correio el√©trico</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420371/">  Por minha vontade, h√° um servidor de correio sob meus cuidados.  Pequenos, ~ 20 usu√°rios.  Funciona de forma est√°vel, √© indesej√°vel alterar o software.  E isso n√£o seria necess√°rio, mas depois que os logs de backup sugerirem inequivocamente - se voc√™ continuar com o mesmo esp√≠rito, a noite inteira passar√° para um backup completo.  E o problema est√° no volume de caixas de correio dos usu√°rios. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1e/lg/ef/1elgefhundgzt-huf1mhs5fgj1u.jpeg"></div><a name="habracut"></a><br>  O problema √© indicado, √© necess√°rio resolver.  O caminho a seguir - comprar ferro ainda mais poderoso - n√£o √© do meu tipo, e o or√ßamento n√£o √© de borracha.  A op√ß√£o √≥bvia: cotas.  Mas, na pr√°tica, isso n√£o ajuda muito.  Os juramentos de ‚Äúeu limpei tudo‚Äù, ap√≥s um exame mais detalhado, se transformam em selos, fotos engra√ßadas e arquivos de fotos de fam√≠lia (no correio corporativo, sim).  E o n√∫mero de gritos "Eu tenho uma luz urgente n√£o funciona, fa√ßa imediatamente" aumenta em uma ordem de magnitude.  Portanto, n√£o por muito tempo e perca a f√© nas pessoas. <br><br>  Felizmente, n√£o sou psic√≥loga, n√£o sou coach ou mentora.  Meu neg√≥cio √© tecnologia.  Ent√£o, n√≥s vamos do lado t√©cnico. <br><br>  A primeira coisa que pensei foi em mensagens autodestrutivas.  Grosso modo, tudo sem a marca "importante" √© exclu√≠do ap√≥s N dias.  Para o meu gosto, deve ser "costurado" nos padr√µes de armazenamento de correio el√©trico.  Mas at√© agora isso n√£o √©, e a implementa√ß√£o me pareceu ambiciosa demais. <br><br>  O segundo pensamento foram c√≥pias.  Conhe√ßa estas mensagens em que voc√™ n√£o √© o destinat√°rio principal.  Vem com voc√™ apenas para obter informa√ß√µes.  Algumas dessas mensagens podem ser exclu√≠das automaticamente.  Mas, de repente, aqui os usu√°rios foram divididos em dois campos: "todos precisam de voc√™ o que" e "o que √© isso".  N√£o dominei o algoritmo de classifica√ß√£o autom√°tica com tais condi√ß√µes. <br><br>  Bem, n√£o exclua, ent√£o copie!  Pegue todas as c√≥pias e fa√ßa links simb√≥licos.  Uma an√°lise r√°pida mostrou que mesmo o processamento de duplicatas COMPLETAS dessa maneira salva TR√äS reposit√≥rios.  Mas, mas, mas.  Infelizmente, este √© um caminho sem sa√≠da devido a muitas limita√ß√µes t√©cnicas. <br><br><div class="spoiler">  <b class="spoiler_title">Detalhes para os interessados ‚Äã‚Äãno spoiler</b> <div class="spoiler_text">  - nem todos os arquivadores entendem links simb√≥licos; <br>  - O software do servidor est√° ficando louco em alguns lugares; <br>  - complexidade org.  car√°ter e direitos de acesso. <br></div></div><br>  A prop√≥sito, nas configura√ß√µes do meu servidor de email, backups gerais e armazenamento de arquivos para os usu√°rios s√£o muito escassos.  Portanto, o espa√ßo para manobra era pequeno. <br><br>  O que resta?  Com tristeza, olhei para as focas <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3_/lg/nh/3_lgnhen33bf-iilsfejxyfrpuo.jpeg"></div><br>  e j√° se perguntava uma rede neural simples que limparia o correio para o usu√°rio.  E ent√£o ... Com licen√ßa, com licen√ßa, mas o que os gatos fazem na carta?  Lembro que uma carta com um anexo pesa quase um ter√ßo a mais do que um anexo!  Mas posso mover o anexo? <br><br>  Assim come√ßou o caminho onde havia "muitas descobertas maravilhosas".  Se eu soubesse ... Bem, voc√™ entende.  Uma gota de ignor√¢ncia e coragem nos leva √† vit√≥ria! <br><br>  Portanto: fazemos o <b>armazenamento de anexos separadamente das cartas</b> . <br><br>  O principal erro que voc√™ pode cometer aqui √© abrir o arquivo eml em um editor de texto e decidir se h√° texto sem formata√ß√£o.  Ent√£o eu fiz.  E ficou encantado.  No momento, escreverei um arquivo em lotes.  Os utilit√°rios de linha de comando para extrair anexos est√£o cheios: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github.com/erikvdv1/eml-attachments</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github.com/maiken2051/uudeview</a> , de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">imediato</a> .  H√° problemas com codifica√ß√µes, mas isso n√£o √© a coisa mais importante. <br><br>  O mais importante: retirar o arquivo e criar um link para ele √© uma quest√£o insignificante.  Mas, para inserir este link na carta original ... Porque n√£o h√° texto.  Existe <b>MIME</b> . <br><br>  Um leitor experiente, √© claro, ri agora do infeliz autor.  O autor, no entanto, descobriu as del√≠cias do "padr√£o".  A coisa mais importante que eu entendi: os cogumelos ag√°ricos n√£o s√£o necess√°rios para cair em um furioso. <br><br><div class="spoiler">  <b class="spoiler_title">Exemplos e abuso - sob o spoiler:</b> <div class="spoiler_text"><br>  charset = utf-8 <br>  charset = "UTF-8" <br>  charset = "UTF-8" <br>  conjunto de caracteres = UTF-8; <br>  conjunto de caracteres = "UTF-8"; <br>  conjunto de caracteres = "UTF-8"; <br>  Esta √© a mesma coisa. <br><br>  Quebras de linha no meio de um fluxo Base64.  De onde eles v√™m ainda √© um mist√©rio para mim. <br><br>  E vice-versa: a aus√™ncia de \ r \ n \ r \ n ap√≥s a parte do cabe√ßalho. <br><br>  No pr√≥prio cabe√ßalho, a ordem dos campos √© a pedido do calcanhar esquerdo. <br><br>  As letras mais antigas permitem um comprimento de linha n√£o superior a 80 caracteres, incluindo os de servi√ßo. <br><br>  Pode haver quebras de linha nos nomes dos arquivos (no corpo da mensagem e n√£o no pr√≥prio nome). <br><br>  Em geral, as quebras de linha podem estar em qualquer lugar, apesar do fato de que na quebra de linha padr√£o √© declarada como o final do par√¢metro atual. <br><br>  O texto da carta em si √© codificado.  Como exatamente ele √© codificado, permanece na consci√™ncia de um servidor espec√≠fico, h√° v√°rias op√ß√µes (fedor). <br><br>  E, na carta, quase sempre h√° uma parte em html.  Ou seja, se voc√™ enviar "Hello" e houver uma tag br ou p, na carta sempre haver√° DUAS se√ß√µes: com texto simples e com tags.  E o texto √© duplicado.  E aqui eles "economizaram" o poder da computa√ß√£o ... Apenas uma mistura variada de Frankenstein. <br><br>  O nome dos arquivos que eles t√™m √© assim: filename = "=? Encoding? Type?; E acontece assim: filename * 0 * = encoding '' (STA ?? !!). O segundo √© um padr√£o mais recente, RFC5987. O padr√£o declara explicitamente esse nome de arquivo * 0 * = ENC e nome de arquivo = "=?  mesma coisa  Nesse lugar, finalmente me convenci de que eles estavam zombando de mim.  Como ele pode ser tratado normalmente, eu n√£o sei. <br><br>  Separadamente, como sempre, a Apple marcou.  Eles geralmente t√™m algum tipo de padr√£o pr√≥prio.  No futuro, longas tentativas de processar seu c√≥digo levaram √† √∫nica solu√ß√£o correta: "Erro: o correio da Apple n√£o √© suportado". <br><br>  O Thunderbird faz isso.  Com pesar, entrei em suas fontes, mas n√£o consegui encontrar a se√ß√£o necess√°ria em um gigabyte e meio de c√≥digo para uma mistura de python e dialetos de Java.  Ajudaram no IRC, onde eles gentilmente me disseram onde procurar, mas ainda n√£o conseguiram encontr√°-lo. <br></div></div><br>  Mas ele n√£o desanimou.  N√£o leia a documenta√ß√£o @, escreva o c√≥digo e pronto.  N√£o, s√©rio, eu tive que fazer algo para aproximar o fim do MIME. <br><br>  Script em lote n√£o foi suficiente.  O resultado foi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um utilit√°rio de linha de comando em C # e dotNet</a> . <br><br>  O utilit√°rio possui dois modos de opera√ß√£o: <br>  Primeiro: apenas extrai os anexos.  Ao mesmo tempo, funciona corretamente com codifica√ß√µes para Windows. <br><br>  Segundo: e aqui a divers√£o principal.  Agora ainda podemos armazenar anexos de correio separadamente do correio!  O utilit√°rio <b>cria uma nova letra em vez da antiga</b> : o <b>anexo √© cortado, a letra √© reformatada em HTML simples com codifica√ß√£o UTF</b> sem limitar o comprimento da linha.  A se√ß√£o de texto / plan√≠cie √© tomada como base.  Se houver tabelas na se√ß√£o html, elas ser√£o transferidas, mantendo a formata√ß√£o dentro da tabela, mas essa funcionalidade funciona mais ou menos.  No final do texto da carta atual (se for uma resposta ou um encaminhamento), os links para os recursos de rede s√£o inseridos com o caminho para os arquivos extra√≠dos, nos formatos arquivo /// e ftp: //. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cad/324/3b7/cad3243b7a0c78597fddcc3f4162c563.png" alt="imagem"><br><br>  O sistema √© testado em mais de 10000 letras e √© implantado na infraestrutura existente. <br><br>  <b>Vantagens identificadas:</b> <br>  + foi: <br><blockquote>  Backup <br>  Foi iniciado √†s 01:00:08 <br>  e conclu√≠da com √™xito 03:26:32 <br></blockquote><br>  tornou-se: <br><blockquote>  Backup <br>  Foi iniciado √†s 01:00:09 <br>  e conclu√≠do com √™xito 01:40:36 <br></blockquote><br>  + Economizou 30 +% de armazenamento: os arquivos v√£o do pesado Base64 e outros para o formato normal do sistema de arquivos, al√©m de muitas duplicatas, mesmo dentro de caixas de correio individuais. <br><br>  + A velocidade de processamento de caixas de correio pelos programas de servidor e correio √© aumentada. <br><br>  + Desaparece "Abri uma carta dos correios, editei-a por 10 horas e ela n√£o sobreviveu" <br><br>  + Voc√™ pode recusar cotas. <br><br>  + Ainda √© poss√≠vel encontrar um anexo no correio, em vez de simplesmente transferi-lo para o armazenamento de arquivos. <br><br>  + Pr√≥ximo ao final do MIME.  Arrependam-se, autores! <br><br>  <b>Contras da decis√£o:</b> <br><br>  - algumas letras (mas n√£o anexos) ainda batem.  Basicamente, n√£o internamente, mas quando visto em alguns clientes; <br>  - em ftp alguns dem√¥nios est√£o constantemente quebrando; <br>  - nem todos os clientes de email suportam a abertura por meio do arquivo: /// <br><br>  <b>Quest√µes controversas:</b> <br><br>  ?  Correio da Apple n√£o suportado.  Para mim - e o Buda est√° com ele; <br>  ?  Bata letras com formata√ß√£o complexa.  Geralmente, esses s√£o folhetos de reservas ou publicidade; <br>  ?  Se o servidor ftp estiver em uma porta n√£o padr√£o, pode haver problemas de acesso.  Decidido por um bot de correio. <br><br>  De uma maneira t√£o espinhosa, o problema foi resolvido. <br><br>  Obrigado pela aten√ß√£o! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt420371/">https://habr.com/ru/post/pt420371/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt420359/index.html">Var, let ou const? Problemas de escopo vari√°vel e ES6</a></li>
<li><a href="../pt420361/index.html">Erro ao executar o TextBox.GetLineText no .NET WPF</a></li>
<li><a href="../pt420363/index.html">Webinars da HPE de agosto a outubro: novos t√≥picos (+ SHD, pr√°tica de IA, armazenamento de petabytes pronto para uso)</a></li>
<li><a href="../pt420367/index.html">Apocalipse com ar condicionado: cen√°rio de apag√£o da rede inteligente</a></li>
<li><a href="../pt420369/index.html">Comuta√ß√£o extrema de borda estendida ou IEEE 802.1BR</a></li>
<li><a href="../pt420373/index.html">Quase OCR para obter a senha do VPNBook. PHP + Mikrotik</a></li>
<li><a href="../pt420375/index.html">Aprenda o OpenGL. Li√ß√£o 5.8 - Bloom</a></li>
<li><a href="../pt420377/index.html">Como iniciamos as videochamadas</a></li>
<li><a href="../pt420381/index.html">Por que basta considerar as redes neurais como uma caixa preta?</a></li>
<li><a href="../pt420383/index.html">"Yandex.Money n√£o lhe interessa inserir sua inscri√ß√£o."</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>