<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî£ üë©üèø‚Äç‚öïÔ∏è ‚ùå Projet IRotary üâë üò• ‚õ∞Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans lequel un t√©l√©phone avec un num√©roteur re√ßoit des composants √©lectroniques pour fonctionner sur les r√©seaux mobiles et peut fonctionner comme pr√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Projet IRotary</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/396653/"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans lequel un t√©l√©phone avec un num√©roteur re√ßoit des composants √©lectroniques pour fonctionner sur les r√©seaux mobiles et peut fonctionner comme pr√©vu.</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit d'une description de projet en trois parties, que j'ai d√ª √©crire comme l'ach√®vement solennel du projet lui-m√™me, mais comme j'ai trop retard√© ce point, j'ai d√©cid√© de d√©crire l'ensemble du projet comme une seule exposition coh√©rente. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si quelqu'un se souvient, je suis une personne tr√®s en col√®re. </font><font style="vertical-align: inherit;">Je me f√¢che facilement lorsque je parle au t√©l√©phone, mais pour le moment, il n'y a pas de bon moyen d'exprimer mon agacement. </font><font style="vertical-align: inherit;">Je m'ennuie de l'ancien temps, o√π vous pouviez forcer le combin√© sur l'appareil pour soulager la tension - mais les t√©l√©phones mobiles ne donnent pas une telle opportunit√©. </font><font style="vertical-align: inherit;">Et j'ai d√©cid√© de cr√©er un t√©l√©phone portable avec un num√©roteur. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc iRotary est n√©</font></font><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Projet IRotary</font></font></h4> <br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/e7d/768/b43/e7d768b433efc07a79968dab1fc577f9.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beaut√©</font></font></i><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
J'ai commenc√© par acheter un vrai t√©l√©phone √† l'ancienne avec un num√©roteur rotatif - juste celui que j'utilisais enfant. </font><font style="vertical-align: inherit;">J'ai choisi une glorieuse couleur orange pour que la beaut√© d'iRotary ne soit pas inf√©rieure √† l'ambition du projet. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La photo a √©t√© prise √† partir du m√™me t√©l√©phone le premier jour de l'achat, avec des c√¢bles et tout le reste. </font><font style="vertical-align: inherit;">Il a l'air si cool aujourd'hui, bien qu'il ait 50% de fils en moins - ce qui est bien dans le cas des t√©l√©phones mobiles. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'ensemble du projet m'a co√ªt√© 150 $ pour les pi√®ces et 2000 $ pour le temps de d√©veloppement - il a fallu deux jours complets pour assembler et a dur√© plusieurs mois toutes sortes d'actions, en attendant des pi√®ces de rechange, en utilisant des pi√®ces de rechange, en attendant les pi√®ces suivantes, etc. </font><font style="vertical-align: inherit;">La premi√®re √©tape, bien s√ªr, a √©t√© d'extraire tout ce qui n'√©tait pas n√©cessaire et de le remplacer par tout ce dont vous avez besoin.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtape 1: d'abord, wah!</font></font></h4> <br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/39e/871/1fa/39e8711fa2fa5d9a28a41c7b6a820f41.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imaginez ce que √ßa fait de faire une telle fraise!</font></font></i><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Le meilleur candidat pour les interfaces avec l'ancien num√©roteur, bien s√ªr, est l'Arduino. Il sera √©galement charg√© de travailler avec GSM. Il est id√©al pour lire les impulsions d'un composeur et les convertir en un entier, qui peut ensuite √™tre utilis√© pour composer un num√©ro. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les communications sont facilement trait√©es par le bouclier GSM. Il s'agit d'un p√©riph√©rique qui se connecte √† l'Arduino (dans les rues, nous l'appelons un ¬´bouclier¬ª). Il est tr√®s simple √† programmer, il est livr√© avec une biblioth√®que avec la plupart des fonctions n√©cessaires - lecture de SMS, envoi et r√©ception d'appels, envoi DTMF, etc.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'√©tape suivante consistait √† √©crire du code pour convertir le cadran en chiffres. Le composeur fonctionne comme ceci: apr√®s une rotation forc√©e, il commence √† tourner en arri√®re, il touche le commutateur une fois pour chaque num√©ro compos√©. Cela signifie que si vous composez trois, le commutateur enverra trois signaux, car trois num√©ros passeront par lui. Pour d√©terminer le num√©ro compos√©, il vous suffit de compter combien de fois le commutateur a √©t√© ouvert et ferm√©. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela a √©t√© facile √† faire avec le code suivant, qui incr√©mente simplement la variable chaque fois que la tension du commutateur passe de faible √† √©lev√©e:</font></font><br>
 <br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readPulses</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> pinPulse = digitalRead(PIN_PULSE);<font></font>
 <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pinPulse == HIGH &amp;&amp; edge == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
        pulses++;<font></font>
        edge = <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pinPulse == LOW &amp;&amp; edge == <span class="hljs-number"><span class="hljs-number">1</span></span>) {<font></font>
        edge = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il vous suffit ensuite de collecter les num√©ros et de passer l'appel lorsque le nombre de chiffres atteint 10. En Gr√®ce, tous les num√©ros sont √† dix chiffres, √† l'exception des num√©ros de t√©l√©phone, un code pour lequel j'ajouterai plus tard. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajouter des num√©ros √† une ligne √† son tour est un processus simple, il se fait avec le code suivant.</font></font><br>
 <br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readDialing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> digit;
    <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> finalDigit = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> pinDialing = digitalRead(PIN_DIALING);<font></font>
 <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pinDialing == <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; dialing == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
        digit = getDigit();<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (digit != <span class="hljs-number"><span class="hljs-number">-1</span></span>) {<font></font>
            number += (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)digit;<font></font>
            showNumber(number);<font></font>
 <font></font>
            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (number.length() == NUMBER_LENGTH) {<font></font>
                dialNumber(number);<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
    dialing = pinDialing;<font></font>
}<font></font>
</code></pre><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'avait pas encore envoy√© d'appel, car le bouclier n'√©tait pas encore connect√© - c'√©tait la prochaine √©tape. </font><font style="vertical-align: inherit;">Voici un prototype √† l'≈ìuvre:</font></font><br>
 <br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/embed/vJwSYywhbds%3Ffeature%3Doembed&amp;usg=ALkJrhg-ASYkaabcsHYhjuGzurVCdgqzYg" frameborder="0" allowfullscreen=""></iframe><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il a tout de suite fait beaucoup d'argent, m√™me avec la vieille machine d√©labr√©e que j'ai trouv√©e pour le prototypage. </font><font style="vertical-align: inherit;">Le composeur est une chose incroyablement pr√©cise, et cela devrait √™tre comme √ßa, sinon vous auriez pu vous trouver au mauvais endroit et ne pas le savoir jusqu'√† ce qu'un mec vous r√©ponde et que vous appeliez votre petite amie et que vous d√©cidiez qu'elle vous trompait , et jette un scandale, mais en fait, ce n'est qu'une camelote. </font><font style="vertical-align: inherit;">C'est pourquoi le nombre de divorces a chut√© apr√®s l'introduction des num√©roteurs num√©riques. </font><font style="vertical-align: inherit;">En outre, r√©duction de la violence contre les personnes avec un grand nombre de z√©ros dans les chambres.</font></font><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtape 2: qui ne prend pas de risques, ce n'est pas GSM-it</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La prochaine √©tape apr√®s une reconnaissance de num√©ro r√©ussie consiste √† ajouter la possibilit√© de passer des appels mobiles. </font><font style="vertical-align: inherit;">J'ai connect√© le bouclier avec Arduino et ajout√© le code n√©cessaire pour les appels:</font></font><br>
 <br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dialNumber</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String number)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
    call.Call(numArray);<font></font>
}<font></font>
</code></pre><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passionnant. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que c'√©tait si simple, c'√©tait tr√®s cool, car la plupart des fonctionnalit√©s du t√©l√©phone mobile (num√©rotation et appel) √©taient pr√™tes. Voici comment cela fonctionne:</font></font><br>
 <br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/embed/jAfTbwEfRlU%3Ffeature%3Doembed&amp;usg=ALkJrhjJU3FxKO7LkPM7YtU4vhsmFdEwoA" frameborder="0" allowfullscreen=""></iframe><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä cette √©tape, j'ai rencontr√© plusieurs difficult√©s. Le premier est o√π placer l'Arduino avec le blindage sur le t√©l√©phone, car il n'y avait pratiquement pas d'espace en raison des composants du t√©l√©phone. Pour r√©soudre ce probl√®me presque insoluble, j'ai d√ª faire un compromis: j'ai supprim√© l'appel, qui ne pouvait toujours pas √™tre aliment√© par la batterie (il a besoin de 50 V), ce qui a r√©duit l'authenticit√© de l'appareil. Pourquoi ai-je besoin d'un t√©l√©phone avec un num√©roteur s'il ne peut pas produire le son familier d'un dzzzzzzzzzzzzzzzzz? </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et l'inspiration est venue! La solution √©tait simple: laisser le t√©l√©phone fonctionner en mode silencieux, √™tre poli, afin de ne pas d√©ranger les autres, mais sinon beau.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ayant r√©solu deux probl√®mes d'un seul coup, j'ai senti ma joie grandir. Un autre probl√®me √©tait qu'il √©tait en quelque sorte n√©cessaire de connecter l'entr√©e et la sortie du blindage au combin√©. Ici, les excuses n'aideront pas, car aucun t√©l√©phone qui se respecte ne sera sourd et muet, j'ai donc d'abord d√©cid√© d'acheter un petit microphone et un haut-parleur, et de les mettre dans le combin√©. Et je l'ai presque command√© quand j'ai soudainement d√©cid√©: je vais d'abord essayer le microphone et le haut-parleur existants. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai rapidement saut√© sur le Kuhlmann et esquiss√© un circuit tr√®s compliqu√© compos√© d'un grand nombre de composants: trois fils et deux connecteurs. En mettant tout cela ensemble, j'ai ins√©r√© les connecteurs dans les entr√©es et sorties du bouclier et j'ai pass√© un appel. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - salut! - dit ma voix. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - salut! R√©pondis-je joyeusement. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Je t'entends! Me dis-je.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Et je suis toi! </font><font style="vertical-align: inherit;">- la r√©ponse a retenti. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le test a √©t√© un succ√®s retentissant. </font><font style="vertical-align: inherit;">Les composants existants s'adaptaient non seulement au bouclier, mais produisaient √©galement un bruit de bruissement et une r√©troaction authentiques, que j'ai r√©ussi √† oublier. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La diff√©rence entre un mobile et un tel t√©l√©phone est que le premier n'a pas besoin de reproduire votre voix via le haut-parleur. </font><font style="vertical-align: inherit;">Par cons√©quent, il vous semble que votre voix est plus silencieuse qu'elle ne l'est (puisque vous branchez l'oreille au haut-parleur), et vous criez davantage - comme si vous essayiez d'√©couter de la musique avec un casque tout en parlant avec quelqu'un. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et sur l'ancien t√©l√©phone, vous pouvez entendre votre voix lorsque vous parlez, ce qui est bien, et cela ne vous oblige pas √† crier apr√®s votre interlocuteur. </font><font style="vertical-align: inherit;">C'est un effet agr√©able que nous avons perdu. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici le teaser du produit final:</font></font><br>
 <br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/embed/0yND1ilvxss%3Ffeature%3Doembed&amp;usg=ALkJrhh3ixWh5TvGphaC38NdMDYgpOEZMg" frameborder="0" allowfullscreen=""></iframe><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les sonneries sont fausses, mais c'est Hollywood.</font></font><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtape 3: aller plus loin</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque l'audio, la reconnaissance des num√©ros et le GSM ont fonctionn√©, il est temps de connecter le reste des commandes - un levier, un bouton et une √©trange LED, un indicateur de t√©l√©chargement. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est pr√©f√©rable de le faire par le biais d'√©v√©nements. Arduino ne fonctionne pas comme √ßa parce que vous devez constamment demander: "Le bouton est-il enfonc√©?" plusieurs milliers de fois par seconde, mais l'architecture des √©v√©nements est facile √† simuler en utilisant un peu de code. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je voulais d√©crocher le t√©l√©phone du levier pour r√©pondre √† l'appel si le t√©l√©phone sonnait, et remettre le t√©l√©phone sur le levier a interrompu l'appel en cours. Je voulais √©galement que tous les signaux de commande soient ignor√©s lorsque le combin√© √©tait sur le levier.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceci est facile √† r√©aliser avec une machine d'√©tat. </font><font style="vertical-align: inherit;">Cela signifie qu'il existe une variable contenant l'√©tat actuel du t√©l√©phone - seul, parler, sonner, composer, etc. </font><font style="vertical-align: inherit;">Et si des √©v√©nements se produisent (en appuyant sur le bouton), ils peuvent simplement v√©rifier l'√©tat du t√©l√©phone et effectuer une action ou non.</font></font><br>
 <br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les √©v√©nements</font></font></h5> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les √©v√©nements peuvent √™tre reconnus de la m√™me mani√®re que les nombres. </font><font style="vertical-align: inherit;">Nous v√©rifierons si l'√©tat du bouton change et ne commencerons l'√©v√©nement que si nous d√©tectons le changement (sinon nous d√©clencherions l'√©v√©nement des milliers de fois lorsque nous demandions si le bouton √©tait enfonc√© et Arduino r√©pondrait ¬´oui¬ª des milliers de fois par seconde).</font></font><br>
 <br>
<pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIN_BUTTON_HALF 6</span></span><font></font>
 <font></font>
<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> buttonHalfEdge = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkButtonHalfPressed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (digitalRead(PIN_BUTTON_HALF) == LOW) {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonHalfEdge == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
            buttonHalfPressed();<font></font>
        }<font></font>
        buttonHalfEdge = <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buttonHalfEdge == <span class="hljs-number"><span class="hljs-number">1</span></span>) {<font></font>
            buttonHalfReleased();<font></font>
        }<font></font>
        buttonHalfEdge = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce bouton a deux √©tats, √† moiti√© enfonc√© et compl√®tement enfonc√© (ou √† moiti√© enfonc√© et compl√®tement enfonc√©, si vous demandez au pessimiste). </font><font style="vertical-align: inherit;">Le code d√©finit les deux √©tats et les autres √©v√©nements sont trait√©s de la m√™me mani√®re. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez regarder le syst√®me fonctionner dans la vid√©o suivante, o√π les composants sont dans le bo√Ætier, mais il doit toujours √™tre branch√© sur USB pour l'alimentation.</font></font><br>
 <br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/embed/v_e1oqCkeng%3Ffeature%3Doembed&amp;usg=ALkJrhiNXNOrWJrdmgZHDHOze9DxcId7EA" frameborder="0" allowfullscreen=""></iframe><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La beaut√©!</font></font><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtape 4: alimentation par batterie</font></font></h4><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/8e2/4dc/77a/8e24dc77a881ac4aff1b719afbb0a9c2.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connecteur USB pour charger la batterie</font></font></i><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bien s√ªr, quel type de t√©l√©phone portable serait-il s'il n'√©tait pas mobile? </font><font style="vertical-align: inherit;">Ce ne serait pas un t√©l√©phone portable! </font><font style="vertical-align: inherit;">Ainsi, les deux options pour transporter le t√©l√©phone sont une petite batterie de 5 volts et un circuit de charge USB, ou un c√¢ble tr√®s, tr√®s long. </font><font style="vertical-align: inherit;">Comme le cuivre est plus cher que l'or aujourd'hui et que je n'ai pas d'argent, j'ai choisi la premi√®re option. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il a besoin de trois composants:</font></font><br>
<ul>
<li> ( ,     ). ,    ,   ,      .</li>
<li> ,       ,   ‚Äì  USB-  ¬´¬ª.      USB-.</li>
<li>  (   ).    ,     ,     .     ,  ,           ,     Arduino   5,     .</li>
</ul><br>
 <br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/25c/91a/4d7/25c91a4d71c84e2c8078d13e44cd314f.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©gulateur et ensemble de charge</font></font></i><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Une fois de plus, la batterie et le r√©gulateur sont connect√©s √† la charge. La charge a un port USB (et j'ai utilis√© une rallonge pour l'acheminer vers l'endroit o√π se trouvait le c√¢ble t√©l√©phonique), qui sera utilis√© pour la charge. Le r√©gulateur va tout g√¢cher et donner la tension n√©cessaire aux composants n√©cessaires, de sorte que vous pouvez allumer et √©teindre le t√©l√©phone pendant le fonctionnement, et la tension ne baissera pas.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez √©galement charger le t√©l√©phone inclus, ce qui est pratique. </font><font style="vertical-align: inherit;">Je ne sais pas combien de temps dure la batterie, je ne l'ai pas utilis√©e pendant plus de quelques heures, mais peut-√™tre que pendant quelques jours vous ne pourrez pas √©crire √† vos amis depuis votre t√©l√©phone (vous devez connecter une machine √† √©crire). </font><font style="vertical-align: inherit;">J'essaierai de le tester un jour, mais pour l'instant je dirai simplement que la batterie dure des mois, et vous pouvez parler pendant des semaines, puis elle sera mieux vendue, ou au moins ramasser le montant requis sur un kickstarter.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtape 5: Il n'y a pas d'√©tape 5.</font></font></h4> <br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/dfb/189/bca/dfb189bca56c7c3874060fc9a8340d04.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les int√©rieurs sont assembl√©s</font></font></i><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Et le projet est termin√©! Apr√®s avoir tir√© les fils et pouss√© les objets dans des endroits auxquels ils n'√©taient pas destin√©s, vous pouvez fermer le bo√Ætier dans lequel tout va bien - sauf si vous le secouez. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez comprendre approximativement l'emplacement des composants. Arduino est en haut √† droite, sous c'est un bouclier (vous pouvez voir une antenne saillante), un c√¢ble d'alimentation USB bleu va au r√©gulateur connect√© √† la batterie et au chargeur, qui va au connecteur de type m√®re en haut √† gauche. Vous pouvez voir les c√¢bles du microphone et du haut-parleur (du coin sup√©rieur droit vers la gauche). </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les circuits sur la carte de circuit imprim√© marron ci-dessous sont les circuits d'origine du t√©l√©phone. Ils ne sont pas utilis√©s, mais il serait difficile de les retirer, et peut-√™tre que le levier (un morceau de plastique transparent √† gauche) ne fonctionnerait pas sans eux, ce qui serait inacceptable.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant, comme promis, la derni√®re publicit√©, dans toute sa beaut√© finale. </font><font style="vertical-align: inherit;">Quel charme! </font><font style="vertical-align: inherit;">Assurez-vous de l'envoyer √† tous vos amis, m√™me √† ceux √† qui vous n'avez pas parl√© depuis longtemps. </font><font style="vertical-align: inherit;">Quoi de plus important que de reparler avec de vieux amis gr√¢ce au projet fou d'Internet d'un mec de Gr√®ce? </font><font style="vertical-align: inherit;">Bien s√ªr, rien! </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si cela vous √©gratigne directement pour cr√©er votre propre t√©l√©phone mobile avec un num√©roteur, et que vous envisagez d'√©crire √† partir de z√©ro, de passer des nuits blanches √† faire de l'ing√©nierie inverse de mes morceaux de code, j'ai de bonnes nouvelles pour vous. </font><font style="vertical-align: inherit;">J'ai publi√© tout le code en ligne parce que je suis une telle personne. </font></font><br>
 <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/skorokithakis/iRotary</font></font></a><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dites-moi combien ce projet √©tonnant a chang√© votre vie dans les commentaires sur l'article original ou sur Twitter! </font><font style="vertical-align: inherit;">Smack!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr396653/">https://habr.com/ru/post/fr396653/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr396641/index.html">Une autre maison intelligente, en plusieurs parties. Station m√©t√©orologique √† partir de mat√©riaux improvis√©s</a></li>
<li><a href="../fr396643/index.html">La vitesse √† laquelle la technologie √©volue</a></li>
<li><a href="../fr396645/index.html">50 nuances de moignon * Ports d'E / S de microcontr√¥leur Microchip</a></li>
<li><a href="../fr396649/index.html">Bitfinex a pirat√© et retir√© environ 65 millions de dollars en √©quivalent</a></li>
<li><a href="../fr396651/index.html">Regarder l'avenir pour comprendre le pass√©</a></li>
<li><a href="../fr396655/index.html">√âtude: le niveau d'activit√© physique devrait √™tre cinq √† sept fois plus √©lev√© que ce que l'OMS recommande actuellement</a></li>
<li><a href="../fr396657/index.html">–£ –≤–∞—Å –Ω–µ—Ç –≤—ã—Å—ã–ø–∞–Ω–∏–π? –ë—É–¥—É—Ç</a></li>
<li><a href="../fr396659/index.html">Une autre promesse de Pers√©ide et d'autres √©v√©nements de l'automne astronomique 2016</a></li>
<li><a href="../fr396661/index.html">Pr√©sentation du lecteur flash USB-Lightning Transcend JetDrive Go 300K</a></li>
<li><a href="../fr396663/index.html">Ampoules LED Feron</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>