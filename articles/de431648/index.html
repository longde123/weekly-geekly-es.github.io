<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òëÔ∏è üìÉ üôçüèº NB-IoT: Wie funktioniert es? Teil 2 üíΩ üÜî üêÖ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das letzte Mal haben wir √ºber die Funktionen des neuen Standard-NB-IoT in Bezug auf die Architektur des Funkzugangsnetzes gesprochen. Heute werden wir...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>NB-IoT: Wie funktioniert es? Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ru_mts/blog/431648/">  <b>Das letzte Mal haben wir √ºber die Funktionen des neuen Standard-NB-IoT in Bezug auf die Architektur des Funkzugangsnetzes gesprochen.</b>  <b>Heute werden wir mit NB-IoT diskutieren, was sich im Kernnetzwerk (Core Network) ge√§ndert hat.</b>  <b>Also lass uns gehen.</b> <b><br></b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8bd/02e/574/8bd02e574b24c9955dc693bb5a5f3642.jpg" alt="Bild"><br><br>  Im Kern des Netzwerks sind erhebliche √Ñnderungen aufgetreten.  Zun√§chst sind ein neues Element sowie eine Reihe von Mechanismen erschienen, die vom Standard als ‚ÄûCIoT EPS-Optimierung‚Äú oder Kernnetzwerkoptimierung f√ºr das zellulare Internet der Dinge definiert werden. <br><br>  Wie Sie wissen, gibt es in Mobilfunknetzen zwei Hauptkommunikationskan√§le, die Steuerebene (CP) und die Benutzerebene (UP).  Die Steuerebene dient zum Austausch von Dienstnachrichten zwischen verschiedenen Netzwerkelementen und wird zum Bereitstellen von Mobilit√§tsger√§ten (Mobility Management) (UE) und zum Einrichten / Verwalten einer Daten√ºbertragungssitzung (Session Management) verwendet.  Die Benutzerebene ist in der Tat ein Kanal zum √úbertragen von Benutzerverkehr.  In klassischem LTE ist die Verteilung von CP und UP √ºber die Schnittstellen wie folgt: <a name="habracut"></a><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e6a/f57/257/e6af5725701496cca134e7fde45de5d5.png" alt="Bild"><br><br>  Die CP- und UP-Optimierungsmechanismen f√ºr NB-IoT sind auf MME-, SGW- und PGW-Knoten implementiert, die bedingt zu einem einzigen Element namens C-SGN (Cellular IoT Serving Gateway Node) kombiniert werden.  Der Standard geht auch von der Entstehung eines neuen Netzwerkelements aus - SCEF (Service Capability Exposure Function).  Die Schnittstelle zwischen MME und SCEF hei√üt T6a und ist auf Basis des DIAMETER-Protokolls implementiert.  Trotz der Tatsache, dass DIAMETER ein Signalisierungsprotokoll ist, ist es in NB-IoT f√ºr die √úbertragung kleiner Mengen von Nicht-IP-Daten angepasst. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7d9/a36/d53/7d9a36d53e5fa359b1e7d02da98a0cfc.png" alt="Bild"><br><br>  Basierend auf dem Namen ist SCEF eine Site, auf der Servicefunktionen verf√ºgbar gemacht werden.  Mit anderen Worten, SCEF verbirgt die Komplexit√§t des Netzwerks des Betreibers und macht Anwendungsentwicklern die Notwendigkeit der Identifizierung und Authentifizierung mobiler Ger√§te (UE) √ºberfl√ºssig, sodass Anwendungsserver (Application Server, im Folgenden AS) Daten empfangen und Ger√§te √ºber eine einzige API verwalten k√∂nnen. <br><br>  Die Kennung des UE ist keine Telefonnummer (MSISDN) oder IP-Adresse wie im klassischen 2G / 3G / LTE-Netzwerk, sondern die sogenannte ‚Äûexterne ID‚Äú, die vom Standard im Format &lt;Local Identifier&gt; @ &lt;Domain definiert wird, das Anwendungsentwicklern bekannt ist Kennung&gt; ".  Dies ist ein separates gro√ües Thema, das separates Material verdient. Daher werden wir jetzt nicht im Detail darauf eingehen. <br><br>  Jetzt werden wir uns mit den wichtigsten Innovationen befassen.  "CIoT EPS Optimization" ist eine Optimierung der Verkehrs√ºbertragungsmechanismen und der Verwaltung von Teilnehmersitzungen.  Hier sind die wichtigsten: <br><br><ul><li>  DoNAS </li><li>  Nidd </li><li>  PSM- und eDRX-Energiesparmechanismen </li><li>  Hlcom </li></ul><br>  <b>DoNAS (Daten √ºber NAS):</b> <br><br>  Dies ist ein Mechanismus zur Optimierung der √úbertragung kleiner Datenmengen. <br><br>  Bei klassischem LTE stellt eine Teilnehmereinheit bei der Registrierung im Netzwerk eine PDN-Verbindung (im Folgenden PDN) √ºber eNodeB zu MME-SGW-PGW her.  Die UE-eNodeB-MME-Verbindung ist der sogenannte ‚ÄûSignaling Radio Bearer‚Äú (SRB).  Wenn Daten gesendet / empfangen werden m√ºssen, stellt das UE eine weitere Verbindung zum eNodeB her - "Data Radio Bearer" (DRB), um Benutzerverkehr an SGW und weiter an PGW zu senden (Schnittstellen S1-U bzw. S5).  Am Ende des Austauschs und f√ºr einige Zeit (normalerweise 5 bis 20 Sekunden) ohne Datenverkehr werden diese Verbindungen getrennt und das Ger√§t wechselt in den Standby-Modus oder in den ‚ÄûLeerlaufmodus‚Äú.  Bei Bedarf wird der Austausch eines neuen Datenelements SRB und DRB neu installiert. <br><br>  In NB-IoT kann der Benutzerverkehr in NAS-Protokollnachrichten ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://www.3gpp.org/more/96-nas</a> ) √ºber einen Signalisierungskanal (SRB) √ºbertragen werden.  Die Installation von DRB ist nicht mehr erforderlich.  Dies reduziert die Signallast erheblich, spart Netzwerkfunkressourcen und verl√§ngert vor allem die Batterielebensdauer des Ger√§ts. <br><br>  Im Abschnitt eNodeB - MME werden Benutzerdaten √ºber die S1-MME-Schnittstelle √ºbertragen, was bei der klassischen LTE-Technologie nicht der Fall war, und daf√ºr wird das NAS-Protokoll verwendet, in dem der ‚ÄûBenutzerdatencontainer‚Äú erscheint. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b38/3ca/091/b383ca091aff5634b77f798c124ea537.png" alt="Bild"><br><br>  Um die ‚ÄûBenutzerebene‚Äú von der MME zum SGW zu √ºbertragen, wird eine neue S11-U-Schnittstelle angezeigt, √ºber die kleine Mengen von Benutzermelonendaten √ºbertragen werden k√∂nnen.  Das S11-U-Protokoll basiert auf GTP-U v1, mit dem die Benutzerebene auf anderen Schnittstellen des 3GPP-Architekturnetzwerks √ºbertragen wird. <br><img src="https://habrastorage.org/getpro/habr/post_images/291/414/312/2914143120918a42d83230b40eb7f4e1.png" alt="Bild"><br>  <b>NIDD (Non-IP Data Delivery):</b> <br><br>  Im Rahmen der weiteren Optimierung der Mechanismen zur √úbertragung kleiner Datenmengen wurde zus√§tzlich zu den vorhandenen PDN-Typen wie IPv4, IPv6 und IPv4v6 ein anderer Typ angezeigt - Nicht-IP.  In diesem Fall wird dem UE keine IP-Adresse zugewiesen, und Daten werden ohne Verwendung des IP-Protokolls √ºbertragen.  Daf√ºr gibt es mehrere Gr√ºnde: <br><br><ol><li>  IoT-Ger√§te wie Sensoren k√∂nnen sehr kleine Datenmengen √ºbertragen, 20 Byte oder sogar weniger.  Angesichts der Mindestgr√∂√üe eines IP-Headers von 20 Byte kann die Kapselung in IP manchmal recht teuer sein. </li><li>  Es ist nicht erforderlich, einen IP-Stack im Chip zu implementieren, was zu einer Kostenreduzierung f√ºhrt (Frage zur Diskussion in den Kommentaren). </li></ol><br>  Im Gro√üen und Ganzen ben√∂tigen IoT-Ger√§te eine IP-Adresse, um Daten √ºber das Internet zu √ºbertragen.  Im Konzept von NB-IoT fungiert SCEF als zentraler Verbindungspunkt f√ºr AS, und der Datenaustausch zwischen Ger√§ten und Anwendungsservern erfolgt √ºber die API.  Wenn kein SCEF vorhanden ist, k√∂nnen Nicht-IP-Daten von PGW √ºber den Punkt-zu-Punkt-Tunnel (PtP) an den AS √ºbertragen werden, und die IP-Kapselung wird bereits darauf durchgef√ºhrt. <br><br>  All dies passt in das NB-IoT-Paradigma - die maximale Vereinfachung und Verbilligung von Ger√§ten. <br><br>  <b>PSM- und eDRX-Energiesparmechanismen:</b> <br><br>  Einer der Hauptvorteile von LPWAN-Netzen ist die Energieeffizienz.  Erkl√§rt eine Batterielebensdauer von bis zu 10 Jahren mit einer einzelnen Batterie.  Lassen Sie uns sehen, wie solche Werte erreicht werden. <br><br>  Wann verbraucht ein Ger√§t am wenigsten Strom?  Richtig, wenn es ausgeschaltet ist.  Und wenn es unm√∂glich ist, das Ger√§t vollst√§ndig zu deaktivieren, schalten Sie das Funkmodul aus, solange es nicht ben√∂tigt wird.  Nur zuerst m√ºssen Sie dies mit dem Netzwerk koordinieren. <br><br>  <b>PSM (Energiesparmodus):</b> <br><br>  Im PSM-Energiesparmodus kann das Ger√§t das Funkmodul f√ºr l√§ngere Zeit ausschalten, w√§hrend es im Netzwerk registriert bleibt, und den PDN nicht jedes Mal neu installieren, wenn Sie Daten √ºbertragen m√ºssen. <br><br>  Damit das Netzwerk wei√ü, dass das Ger√§t noch verf√ºgbar ist, wird regelm√§√üig der Aktualisierungsvorgang - Tracking Area Update (TAU) - eingeleitet.  Die H√§ufigkeit dieser Prozedur wird vom Netzwerk mithilfe des T3412-Timers eingestellt, dessen Wert w√§hrend der Attach-Prozedur oder der n√§chsten TAU an das Ger√§t √ºbertragen wird.  In klassischem LTE betr√§gt der Standardwert dieses Timers 54 Minuten und das Maximum 186 Minuten.  Um jedoch eine hohe Energieeffizienz zu gew√§hrleisten, ist es zu teuer, alle 186 Minuten auf Sendung zu gehen.  Um dieses Problem zu l√∂sen, wurde der PSM-Mechanismus entwickelt. <br><br>  Das Ger√§t aktiviert den PSM-Modus, indem es die Werte der beiden Timer T3324 und T3412-Extended in den Meldungen ‚ÄûAttach Request‚Äú oder ‚ÄûTracking Area Request‚Äú √ºbertr√§gt.  Der erste bestimmt die Zeit, zu der das Ger√§t verf√ºgbar ist, nachdem in den "Leerlaufmodus" gewechselt wurde.  Die Sekunde ist die Zeit, nach der die TAU hergestellt werden muss. Erst jetzt kann ihr Wert 35712000 Sekunden oder 413 Tage erreichen.  Abh√§ngig von den Einstellungen akzeptiert die MME m√∂glicherweise die vom Ger√§t empfangenen Timer-Werte oder √§ndert sie, indem sie neue Werte in den Meldungen "Anh√§ngen akzeptieren" oder "Verfolgen der Aktualisierung des Verfolgungsbereichs" sendet.  Jetzt kann das Ger√§t das Funkmodul 413 Tage lang nicht einschalten und im Netzwerk registriert bleiben.  Dadurch erzielen wir enorme Einsparungen bei den Netzwerkressourcen und der Energieeffizienz der Ger√§te! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/454/acd/f5b/454acdf5be7596292b607513eeacaac7.png" alt="Bild"><br><br>  In diesem Modus ist das Ger√§t jedoch nicht nur f√ºr eingehende Kommunikationen verf√ºgbar.  √úbertragen Sie bei Bedarf etwas auf die Seite des Anwendungsservers. Das Ger√§t kann das PSM jederzeit verlassen und Daten senden. Danach bleibt es aktiv, damit der T3324-Timer Informationsnachrichten vom AS empf√§ngt (falls vorhanden). <br><br>  <b>eDRX (erweiterter diskontinuierlicher Empfang):</b> <br><br>  eDRX, erweiterter intermittierender Empfang.  Um Daten an ein Ger√§t zu √ºbertragen, das sich im "Leerlaufmodus" befindet, f√ºhrt das Netzwerk eine Benachrichtigungsprozedur durch - "Paging".  Nach Empfang des Paging-Ger√§ts wird die Einrichtung eines SRB f√ºr die weitere Kommunikation mit dem Netzwerk eingeleitet.  Um die an ihn gerichtete Paging-Nachricht nicht zu verpassen, muss das Ger√§t die Radiosendung st√§ndig √ºberwachen, was ebenfalls sehr energieaufwendig ist. <br><br>  eDRX ist ein Modus, in dem das Ger√§t nicht st√§ndig, sondern regelm√§√üig Nachrichten vom Netzwerk empf√§ngt.  W√§hrend der Attach- oder TAU-Prozeduren handelt das Ger√§t mit dem Netzwerk die Zeitintervalle aus, in denen es die Luft ‚Äûabh√∂rt‚Äú.  Dementsprechend wird der Paging-Vorgang in den gleichen Intervallen durchgef√ºhrt.  Im eDRX-Modus ist das Ger√§t in Zyklen unterteilt (eDRX-Zyklus).  Zu Beginn jedes Zyklus befindet sich das sogenannte ‚ÄûPaging Time Window‚Äú (PTW) - dies ist die Zeit, zu der das Ger√§t den Funkkanal abh√∂rt.  Am Ende von PTW schaltet das Ger√§t das Funkmodul bis zum Ende des Zyklus aus. <br><img src="https://habrastorage.org/getpro/habr/post_images/6db/904/b06/6db904b06c01b940885b43683cc8c905.png" alt="Bild"><br>  <b>HLCOM (Kommunikation mit hoher Latenz):</b> <br><br>  Wenn Daten an Uplink √ºbertragen werden m√ºssen, kann das Ger√§t einen dieser beiden Energiesparmodi verlassen, ohne auf das Ende des PSM- oder eDRX-Zyklus zu warten.  Hier ist es jedoch nur m√∂glich, Daten auf das Ger√§t zu √ºbertragen, wenn es aktiv ist. <br><br>  HLCOM-Funktionalit√§t oder Kommunikation mit hoher Latenz ist das Puffern von Downlink-Paketen auf SGW, w√§hrend sich das Ger√§t im Energiesparmodus befindet und f√ºr die Kommunikation nicht zug√§nglich ist.  Gepufferte Pakete werden zugestellt, sobald das Ger√§t das PSM verl√§sst, indem es eine TAU erstellt oder Uplink-Verkehr √ºbertr√§gt oder wenn PTW eintrifft. <br><br>  Dies erfordert nat√ºrlich ein Bewusstsein der Entwickler von IoT-Produkten, da die Kommunikation mit dem Ger√§t nicht in Echtzeit erfolgt und ein bestimmter Ansatz zum Entwerfen der Gesch√§ftslogik f√ºr Anwendungen erforderlich ist. <br><br>  Lassen Sie uns abschlie√üend sagen: Die Einf√ºhrung des neuen ist immer aufregend, und jetzt haben wir es mit einem Standard zu tun, der selbst von Weltbison wie Vodafone und Telefonica nicht vollst√§ndig getestet wurde - daher ist er doppelt aufregend.  Unsere Pr√§sentation des Materials erhebt keinen Anspruch auf absolute Vollst√§ndigkeit, wir hoffen jedoch, dass ein ausreichendes Verst√§ndnis der Technologie vermittelt wird.  Feedback w√§re dankbar. <br><br>  <i>Autor: Alexey Lapshin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">aslapsh,</a> Experte f√ºr konvergierte L√∂sungen und Multimediadienste</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de431648/">https://habr.com/ru/post/de431648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de431636/index.html">So feiern Sie den Tag der Informationssicherheit</a></li>
<li><a href="../de431638/index.html">Wie wir in die Informationssicherheitsabteilung eines gro√üen Unternehmens kamen und dort anfingen zu arbeiten. Tagebuch zweier junger und vielversprechender Spezialisten</a></li>
<li><a href="../de431642/index.html">Imker versus Mikrocontroller oder die Vorteile von Fehlern</a></li>
<li><a href="../de431644/index.html">Gerade mit TM. v4.0</a></li>
<li><a href="../de431646/index.html">DataGrip 2018.3: Cassandra-Unterst√ºtzung, Generieren von SQL-Dateien aus Objekten, viele Verbesserungen der automatischen Vervollst√§ndigung und vieles mehr</a></li>
<li><a href="../de431650/index.html">Lernlatenz: Warteschlangentheorie</a></li>
<li><a href="../de431652/index.html">Reservoir Sampling Algorithmus</a></li>
<li><a href="../de431654/index.html">Trends in den Programmiersprachen 2019</a></li>
<li><a href="../de431656/index.html">CraSSh: Brechen Sie alle modernen Browser mit CSS-Berechnungen</a></li>
<li><a href="../de431660/index.html">Spielfunktionen mit ECS: F√ºgen Sie dem Sch√ºtzen ein Erste-Hilfe-Set hinzu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>