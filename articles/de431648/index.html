<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☑️ 📃 🙍🏼 NB-IoT: Wie funktioniert es? Teil 2 💽 🆔 🐅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das letzte Mal haben wir über die Funktionen des neuen Standard-NB-IoT in Bezug auf die Architektur des Funkzugangsnetzes gesprochen. Heute werden wir...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>NB-IoT: Wie funktioniert es? Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ru_mts/blog/431648/">  <b>Das letzte Mal haben wir über die Funktionen des neuen Standard-NB-IoT in Bezug auf die Architektur des Funkzugangsnetzes gesprochen.</b>  <b>Heute werden wir mit NB-IoT diskutieren, was sich im Kernnetzwerk (Core Network) geändert hat.</b>  <b>Also lass uns gehen.</b> <b><br></b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8bd/02e/574/8bd02e574b24c9955dc693bb5a5f3642.jpg" alt="Bild"><br><br>  Im Kern des Netzwerks sind erhebliche Änderungen aufgetreten.  Zunächst sind ein neues Element sowie eine Reihe von Mechanismen erschienen, die vom Standard als „CIoT EPS-Optimierung“ oder Kernnetzwerkoptimierung für das zellulare Internet der Dinge definiert werden. <br><br>  Wie Sie wissen, gibt es in Mobilfunknetzen zwei Hauptkommunikationskanäle, die Steuerebene (CP) und die Benutzerebene (UP).  Die Steuerebene dient zum Austausch von Dienstnachrichten zwischen verschiedenen Netzwerkelementen und wird zum Bereitstellen von Mobilitätsgeräten (Mobility Management) (UE) und zum Einrichten / Verwalten einer Datenübertragungssitzung (Session Management) verwendet.  Die Benutzerebene ist in der Tat ein Kanal zum Übertragen von Benutzerverkehr.  In klassischem LTE ist die Verteilung von CP und UP über die Schnittstellen wie folgt: <a name="habracut"></a><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e6a/f57/257/e6af5725701496cca134e7fde45de5d5.png" alt="Bild"><br><br>  Die CP- und UP-Optimierungsmechanismen für NB-IoT sind auf MME-, SGW- und PGW-Knoten implementiert, die bedingt zu einem einzigen Element namens C-SGN (Cellular IoT Serving Gateway Node) kombiniert werden.  Der Standard geht auch von der Entstehung eines neuen Netzwerkelements aus - SCEF (Service Capability Exposure Function).  Die Schnittstelle zwischen MME und SCEF heißt T6a und ist auf Basis des DIAMETER-Protokolls implementiert.  Trotz der Tatsache, dass DIAMETER ein Signalisierungsprotokoll ist, ist es in NB-IoT für die Übertragung kleiner Mengen von Nicht-IP-Daten angepasst. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7d9/a36/d53/7d9a36d53e5fa359b1e7d02da98a0cfc.png" alt="Bild"><br><br>  Basierend auf dem Namen ist SCEF eine Site, auf der Servicefunktionen verfügbar gemacht werden.  Mit anderen Worten, SCEF verbirgt die Komplexität des Netzwerks des Betreibers und macht Anwendungsentwicklern die Notwendigkeit der Identifizierung und Authentifizierung mobiler Geräte (UE) überflüssig, sodass Anwendungsserver (Application Server, im Folgenden AS) Daten empfangen und Geräte über eine einzige API verwalten können. <br><br>  Die Kennung des UE ist keine Telefonnummer (MSISDN) oder IP-Adresse wie im klassischen 2G / 3G / LTE-Netzwerk, sondern die sogenannte „externe ID“, die vom Standard im Format &lt;Local Identifier&gt; @ &lt;Domain definiert wird, das Anwendungsentwicklern bekannt ist Kennung&gt; ".  Dies ist ein separates großes Thema, das separates Material verdient. Daher werden wir jetzt nicht im Detail darauf eingehen. <br><br>  Jetzt werden wir uns mit den wichtigsten Innovationen befassen.  "CIoT EPS Optimization" ist eine Optimierung der Verkehrsübertragungsmechanismen und der Verwaltung von Teilnehmersitzungen.  Hier sind die wichtigsten: <br><br><ul><li>  DoNAS </li><li>  Nidd </li><li>  PSM- und eDRX-Energiesparmechanismen </li><li>  Hlcom </li></ul><br>  <b>DoNAS (Daten über NAS):</b> <br><br>  Dies ist ein Mechanismus zur Optimierung der Übertragung kleiner Datenmengen. <br><br>  Bei klassischem LTE stellt eine Teilnehmereinheit bei der Registrierung im Netzwerk eine PDN-Verbindung (im Folgenden PDN) über eNodeB zu MME-SGW-PGW her.  Die UE-eNodeB-MME-Verbindung ist der sogenannte „Signaling Radio Bearer“ (SRB).  Wenn Daten gesendet / empfangen werden müssen, stellt das UE eine weitere Verbindung zum eNodeB her - "Data Radio Bearer" (DRB), um Benutzerverkehr an SGW und weiter an PGW zu senden (Schnittstellen S1-U bzw. S5).  Am Ende des Austauschs und für einige Zeit (normalerweise 5 bis 20 Sekunden) ohne Datenverkehr werden diese Verbindungen getrennt und das Gerät wechselt in den Standby-Modus oder in den „Leerlaufmodus“.  Bei Bedarf wird der Austausch eines neuen Datenelements SRB und DRB neu installiert. <br><br>  In NB-IoT kann der Benutzerverkehr in NAS-Protokollnachrichten ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://www.3gpp.org/more/96-nas</a> ) über einen Signalisierungskanal (SRB) übertragen werden.  Die Installation von DRB ist nicht mehr erforderlich.  Dies reduziert die Signallast erheblich, spart Netzwerkfunkressourcen und verlängert vor allem die Batterielebensdauer des Geräts. <br><br>  Im Abschnitt eNodeB - MME werden Benutzerdaten über die S1-MME-Schnittstelle übertragen, was bei der klassischen LTE-Technologie nicht der Fall war, und dafür wird das NAS-Protokoll verwendet, in dem der „Benutzerdatencontainer“ erscheint. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b38/3ca/091/b383ca091aff5634b77f798c124ea537.png" alt="Bild"><br><br>  Um die „Benutzerebene“ von der MME zum SGW zu übertragen, wird eine neue S11-U-Schnittstelle angezeigt, über die kleine Mengen von Benutzermelonendaten übertragen werden können.  Das S11-U-Protokoll basiert auf GTP-U v1, mit dem die Benutzerebene auf anderen Schnittstellen des 3GPP-Architekturnetzwerks übertragen wird. <br><img src="https://habrastorage.org/getpro/habr/post_images/291/414/312/2914143120918a42d83230b40eb7f4e1.png" alt="Bild"><br>  <b>NIDD (Non-IP Data Delivery):</b> <br><br>  Im Rahmen der weiteren Optimierung der Mechanismen zur Übertragung kleiner Datenmengen wurde zusätzlich zu den vorhandenen PDN-Typen wie IPv4, IPv6 und IPv4v6 ein anderer Typ angezeigt - Nicht-IP.  In diesem Fall wird dem UE keine IP-Adresse zugewiesen, und Daten werden ohne Verwendung des IP-Protokolls übertragen.  Dafür gibt es mehrere Gründe: <br><br><ol><li>  IoT-Geräte wie Sensoren können sehr kleine Datenmengen übertragen, 20 Byte oder sogar weniger.  Angesichts der Mindestgröße eines IP-Headers von 20 Byte kann die Kapselung in IP manchmal recht teuer sein. </li><li>  Es ist nicht erforderlich, einen IP-Stack im Chip zu implementieren, was zu einer Kostenreduzierung führt (Frage zur Diskussion in den Kommentaren). </li></ol><br>  Im Großen und Ganzen benötigen IoT-Geräte eine IP-Adresse, um Daten über das Internet zu übertragen.  Im Konzept von NB-IoT fungiert SCEF als zentraler Verbindungspunkt für AS, und der Datenaustausch zwischen Geräten und Anwendungsservern erfolgt über die API.  Wenn kein SCEF vorhanden ist, können Nicht-IP-Daten von PGW über den Punkt-zu-Punkt-Tunnel (PtP) an den AS übertragen werden, und die IP-Kapselung wird bereits darauf durchgeführt. <br><br>  All dies passt in das NB-IoT-Paradigma - die maximale Vereinfachung und Verbilligung von Geräten. <br><br>  <b>PSM- und eDRX-Energiesparmechanismen:</b> <br><br>  Einer der Hauptvorteile von LPWAN-Netzen ist die Energieeffizienz.  Erklärt eine Batterielebensdauer von bis zu 10 Jahren mit einer einzelnen Batterie.  Lassen Sie uns sehen, wie solche Werte erreicht werden. <br><br>  Wann verbraucht ein Gerät am wenigsten Strom?  Richtig, wenn es ausgeschaltet ist.  Und wenn es unmöglich ist, das Gerät vollständig zu deaktivieren, schalten Sie das Funkmodul aus, solange es nicht benötigt wird.  Nur zuerst müssen Sie dies mit dem Netzwerk koordinieren. <br><br>  <b>PSM (Energiesparmodus):</b> <br><br>  Im PSM-Energiesparmodus kann das Gerät das Funkmodul für längere Zeit ausschalten, während es im Netzwerk registriert bleibt, und den PDN nicht jedes Mal neu installieren, wenn Sie Daten übertragen müssen. <br><br>  Damit das Netzwerk weiß, dass das Gerät noch verfügbar ist, wird regelmäßig der Aktualisierungsvorgang - Tracking Area Update (TAU) - eingeleitet.  Die Häufigkeit dieser Prozedur wird vom Netzwerk mithilfe des T3412-Timers eingestellt, dessen Wert während der Attach-Prozedur oder der nächsten TAU an das Gerät übertragen wird.  In klassischem LTE beträgt der Standardwert dieses Timers 54 Minuten und das Maximum 186 Minuten.  Um jedoch eine hohe Energieeffizienz zu gewährleisten, ist es zu teuer, alle 186 Minuten auf Sendung zu gehen.  Um dieses Problem zu lösen, wurde der PSM-Mechanismus entwickelt. <br><br>  Das Gerät aktiviert den PSM-Modus, indem es die Werte der beiden Timer T3324 und T3412-Extended in den Meldungen „Attach Request“ oder „Tracking Area Request“ überträgt.  Der erste bestimmt die Zeit, zu der das Gerät verfügbar ist, nachdem in den "Leerlaufmodus" gewechselt wurde.  Die Sekunde ist die Zeit, nach der die TAU hergestellt werden muss. Erst jetzt kann ihr Wert 35712000 Sekunden oder 413 Tage erreichen.  Abhängig von den Einstellungen akzeptiert die MME möglicherweise die vom Gerät empfangenen Timer-Werte oder ändert sie, indem sie neue Werte in den Meldungen "Anhängen akzeptieren" oder "Verfolgen der Aktualisierung des Verfolgungsbereichs" sendet.  Jetzt kann das Gerät das Funkmodul 413 Tage lang nicht einschalten und im Netzwerk registriert bleiben.  Dadurch erzielen wir enorme Einsparungen bei den Netzwerkressourcen und der Energieeffizienz der Geräte! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/454/acd/f5b/454acdf5be7596292b607513eeacaac7.png" alt="Bild"><br><br>  In diesem Modus ist das Gerät jedoch nicht nur für eingehende Kommunikationen verfügbar.  Übertragen Sie bei Bedarf etwas auf die Seite des Anwendungsservers. Das Gerät kann das PSM jederzeit verlassen und Daten senden. Danach bleibt es aktiv, damit der T3324-Timer Informationsnachrichten vom AS empfängt (falls vorhanden). <br><br>  <b>eDRX (erweiterter diskontinuierlicher Empfang):</b> <br><br>  eDRX, erweiterter intermittierender Empfang.  Um Daten an ein Gerät zu übertragen, das sich im "Leerlaufmodus" befindet, führt das Netzwerk eine Benachrichtigungsprozedur durch - "Paging".  Nach Empfang des Paging-Geräts wird die Einrichtung eines SRB für die weitere Kommunikation mit dem Netzwerk eingeleitet.  Um die an ihn gerichtete Paging-Nachricht nicht zu verpassen, muss das Gerät die Radiosendung ständig überwachen, was ebenfalls sehr energieaufwendig ist. <br><br>  eDRX ist ein Modus, in dem das Gerät nicht ständig, sondern regelmäßig Nachrichten vom Netzwerk empfängt.  Während der Attach- oder TAU-Prozeduren handelt das Gerät mit dem Netzwerk die Zeitintervalle aus, in denen es die Luft „abhört“.  Dementsprechend wird der Paging-Vorgang in den gleichen Intervallen durchgeführt.  Im eDRX-Modus ist das Gerät in Zyklen unterteilt (eDRX-Zyklus).  Zu Beginn jedes Zyklus befindet sich das sogenannte „Paging Time Window“ (PTW) - dies ist die Zeit, zu der das Gerät den Funkkanal abhört.  Am Ende von PTW schaltet das Gerät das Funkmodul bis zum Ende des Zyklus aus. <br><img src="https://habrastorage.org/getpro/habr/post_images/6db/904/b06/6db904b06c01b940885b43683cc8c905.png" alt="Bild"><br>  <b>HLCOM (Kommunikation mit hoher Latenz):</b> <br><br>  Wenn Daten an Uplink übertragen werden müssen, kann das Gerät einen dieser beiden Energiesparmodi verlassen, ohne auf das Ende des PSM- oder eDRX-Zyklus zu warten.  Hier ist es jedoch nur möglich, Daten auf das Gerät zu übertragen, wenn es aktiv ist. <br><br>  HLCOM-Funktionalität oder Kommunikation mit hoher Latenz ist das Puffern von Downlink-Paketen auf SGW, während sich das Gerät im Energiesparmodus befindet und für die Kommunikation nicht zugänglich ist.  Gepufferte Pakete werden zugestellt, sobald das Gerät das PSM verlässt, indem es eine TAU erstellt oder Uplink-Verkehr überträgt oder wenn PTW eintrifft. <br><br>  Dies erfordert natürlich ein Bewusstsein der Entwickler von IoT-Produkten, da die Kommunikation mit dem Gerät nicht in Echtzeit erfolgt und ein bestimmter Ansatz zum Entwerfen der Geschäftslogik für Anwendungen erforderlich ist. <br><br>  Lassen Sie uns abschließend sagen: Die Einführung des neuen ist immer aufregend, und jetzt haben wir es mit einem Standard zu tun, der selbst von Weltbison wie Vodafone und Telefonica nicht vollständig getestet wurde - daher ist er doppelt aufregend.  Unsere Präsentation des Materials erhebt keinen Anspruch auf absolute Vollständigkeit, wir hoffen jedoch, dass ein ausreichendes Verständnis der Technologie vermittelt wird.  Feedback wäre dankbar. <br><br>  <i>Autor: Alexey Lapshin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">aslapsh,</a> Experte für konvergierte Lösungen und Multimediadienste</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de431648/">https://habr.com/ru/post/de431648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de431636/index.html">So feiern Sie den Tag der Informationssicherheit</a></li>
<li><a href="../de431638/index.html">Wie wir in die Informationssicherheitsabteilung eines großen Unternehmens kamen und dort anfingen zu arbeiten. Tagebuch zweier junger und vielversprechender Spezialisten</a></li>
<li><a href="../de431642/index.html">Imker versus Mikrocontroller oder die Vorteile von Fehlern</a></li>
<li><a href="../de431644/index.html">Gerade mit TM. v4.0</a></li>
<li><a href="../de431646/index.html">DataGrip 2018.3: Cassandra-Unterstützung, Generieren von SQL-Dateien aus Objekten, viele Verbesserungen der automatischen Vervollständigung und vieles mehr</a></li>
<li><a href="../de431650/index.html">Lernlatenz: Warteschlangentheorie</a></li>
<li><a href="../de431652/index.html">Reservoir Sampling Algorithmus</a></li>
<li><a href="../de431654/index.html">Trends in den Programmiersprachen 2019</a></li>
<li><a href="../de431656/index.html">CraSSh: Brechen Sie alle modernen Browser mit CSS-Berechnungen</a></li>
<li><a href="../de431660/index.html">Spielfunktionen mit ECS: Fügen Sie dem Schützen ein Erste-Hilfe-Set hinzu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>