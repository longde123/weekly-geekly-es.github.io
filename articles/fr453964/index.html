<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∞üèª üèÅ üë∞üèº POO en langue R (partie 1): classes S3 üíª üì∫ üîü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R est un langage orient√© objet. Dans ce document, absolument tout est un objet, √† partir des fonctions et se terminant par des tableaux. 


 √Ä son tou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>POO en langue R (partie 1): classes S3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453964/"><p>  R est un langage orient√© objet.  Dans ce document, absolument tout est un objet, √† partir des fonctions et se terminant par des tableaux. </p><br><p>  √Ä son tour, chaque objet dans R appartient √† une classe.  En fait, dans le monde qui nous entoure, la situation est √† peu pr√®s la m√™me.  Nous sommes entour√©s d'objets, et chaque objet peut √™tre attribu√© √† une classe.  Une classe d√©termine l'ensemble des propri√©t√©s et actions pouvant √™tre effectu√©es avec cet objet. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/6c5/79c/992/6c579c992140a44ceb85c0359165ec15.jpg" alt="image"></p><a name="habracut"></a><br><p> Par exemple, dans toute cuisine, il y a une table et une cuisini√®re.  Et la table de cuisine et le po√™le peuvent √™tre appel√©s √©quipements de cuisine.  En r√®gle g√©n√©rale, les propri√©t√©s de la table sont limit√©es par ses dimensions, sa couleur et le mat√©riau √† partir duquel elle est fabriqu√©e.  Le po√™le a une plus large gamme de propri√©t√©s, au moins la puissance, le nombre de br√ªleurs et le type de po√™le (√©lectrique ou gaz) seront obligatoires. </p><br><p>  Les actions pouvant √™tre effectu√©es sur des objets sont appel√©es leurs m√©thodes.  Pour la table et l'assiette, respectivement, l'ensemble des m√©thodes sera √©galement diff√©rent.  Vous pouvez d√Æner √† table, vous pouvez cuisiner dessus, mais il est impossible de traiter thermiquement les aliments, pour lesquels un po√™le est g√©n√©ralement utilis√©. <br><img src="https://habrastorage.org/getpro/habr/post_images/8f8/8a9/06d/8f88a906d52701c8a5059106b2148fca.jpg" alt="image"></p><br><h2 id="soderzhanie">  Table des mati√®res </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Propri√©t√©s de classe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctions g√©n√©ralis√©es</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Qu'est-ce qu'une classe S3 et comment cr√©er votre propre classe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fonctions d'affectation aux classes S3 personnalis√©es</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©veloppement de m√©thodes personnalis√©es pour la fonction d'impression g√©n√©rique</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cr√©ation d'une fonction g√©n√©ralis√©e et de m√©thodes pour celle-ci</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">H√©ritage</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Quand vous pouvez utiliser vos propres cours</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conclusion</a> </li></ul><br><h2 id="svoystva-klassov">  Propri√©t√©s de classe </h2><br><p>  Dans R, chaque objet appartient √©galement √† une classe.  Selon la classe, il poss√®de un certain ensemble de propri√©t√©s et de m√©thodes.  En termes de programmation orient√©e objet (POO), la possibilit√© de combiner des √©l√©ments similaires dans un ensemble de propri√©t√©s et de m√©thodes d'objets en groupes (classes) est appel√©e <strong>encapsulation</strong> . </p><br><p>  Un vecteur est la classe d'objets la plus simple de R; il a la propri√©t√© de longueur.  Pour un exemple, nous prendrons les <em>lettres</em> vectorielles int√©gr√©es. </p><br><pre><code class="plaintext hljs">length(letters)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 26</code> </pre> <br><p>  En utilisant la fonction de <code>length</code> , nous avons obtenu la longueur du vecteur de <em>lettres</em> .  Essayons maintenant d'appliquer la m√™me fonction au cadre de date int√©gr√© de l' <em>iris</em> . </p><br><pre> <code class="plaintext hljs">length(iris)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 5</code> </pre> <br><p>  La fonction de <code>length</code> , applicable aux tables, renvoie le nombre de colonnes. </p><br><p>  Les tables ont √©galement une autre propri√©t√©, dimension. </p><br><pre> <code class="plaintext hljs">dim(iris)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 150 5</code> </pre> <br><p>  La fonction <code>dim</code> dans l'exemple ci-dessus affiche des informations indiquant qu'il y a 150 lignes et 5 colonnes dans la table d' <em>iris</em> . </p><br><p>  √Ä son tour, le vecteur n'a pas de dimension. </p><br><pre> <code class="plaintext hljs">dim(letters)</code> </pre><br><pre> <code class="plaintext hljs">NULL</code> </pre> <br><p>  Ainsi, nous nous sommes assur√©s que les objets de diff√©rentes classes ont un ensemble de propri√©t√©s diff√©rent. </p><br><h2 id="obobschyonnye-funkcii">  Fonctions g√©n√©ralis√©es </h2><br><p>  R a de nombreuses fonctions g√©n√©riques: <code>print</code> , <code>plot</code> , <code>summary</code> , etc.  Ces fonctions fonctionnent diff√©remment avec des objets de diff√©rentes classes. </p><br><p>  Prenons, par exemple, la fonction de <code>plot</code> .  Ex√©cutons-le en passant la table <em>iris</em> comme argument principal. </p><br><p> <code>plot(iris)</code> </p> <br><p>  <strong>R√©sultat:</strong> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0ae/432/7ba/0ae4327babecab1c6f76a19b311450d3.png" alt="Le r√©sultat de la fonction de trac√©"></p><br><p>  Essayons maintenant de passer √† la fonction de <code>plot</code> un vecteur de 100 nombres al√©atoires qui ont une distribution normale. </p><br><p> <code>plot(rnorm(100, 50, 30))</code> </p> <br><p>  <strong>R√©sultat:</strong> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4f7/c3e/85d/4f7c3e85d80cbcdf4484d201bd17ec99.png" alt="Le r√©sultat de la fonction de trac√©"></p><br><p>  Nous avons obtenu diff√©rents graphiques, dans le premier cas, la matrice de corr√©lation, dans le second, le nuage de points, sur lequel l'indice d'observation est affich√© le long de l'axe x, et sa valeur le long de l'axe y. </p><br><p>  Ainsi, la fonction de <code>plot</code> peut s'adapter pour fonctionner avec diff√©rentes classes.  Si nous revenons √† la terminologie OOP, alors la capacit√© de d√©terminer la classe d'un objet entrant et d'effectuer diverses actions avec des objets de diff√©rentes classes s'appelle le <strong>polymorphisme</strong> .  Cela est d√ª au fait que cette fonction n'est qu'un wrapper pour une vari√©t√© de m√©thodes √©crites pour travailler avec diff√©rentes classes.  Vous pouvez le v√©rifier avec la commande suivante: </p><br><pre> <code class="plaintext hljs">body(plot)</code> </pre> <br><pre> <code class="plaintext hljs">UseMethod("plot")</code> </pre> <br><p>  La commande <code>body</code> imprime le corps de la fonction sur la console R.  Comme vous pouvez le voir, le corps de la fonction body se compose d'une seule commande <code>UseMethod("plot")</code> . </p><br><p>  C'est-√†-dire  la fonction de <code>plot</code> , d√©marre simplement l'une des nombreuses m√©thodes qui y sont √©crites, en fonction de la classe de l'objet qui lui est transmise.  Affichez une liste de toutes ses m√©thodes comme suit. </p><br><pre> <code class="plaintext hljs">methods(plot)</code> </pre> <br><pre> <code class="plaintext hljs"> [1] plot.acf* plot.data.frame* plot.decomposed.ts* [4] plot.default plot.dendrogram* plot.density* [7] plot.ecdf plot.factor* plot.formula* [10] plot.function plot.hclust* plot.histogram* [13] plot.HoltWinters* plot.isoreg* plot.lm* [16] plot.medpolish* plot.mlm* plot.ppr* [19] plot.prcomp* plot.princomp* plot.profile.nls* [22] plot.raster* plot.spec* plot.stepfun [25] plot.stl* plot.table* plot.ts [28] plot.tskernel* plot.TukeyHSD*</code> </pre> <br><p>  Le r√©sultat indique que la fonction de trac√© a 29 m√©thodes, parmi lesquelles il y a <em>plot.default</em> , qui fonctionne par d√©faut si la fonction re√ßoit un objet d'une classe inconnue en entr√©e. </p><br><p>  En utilisant la fonction <code>methods</code> , vous pouvez √©galement obtenir un ensemble de toutes les fonctions g√©n√©ralis√©es qui ont une m√©thode √©crite pour n'importe quelle classe. </p><br><pre> <code class="plaintext hljs">methods(, "data.frame")</code> </pre> <br><pre> <code class="plaintext hljs"> [1] $&lt;- [ [[ [[&lt;- [5] [&lt;- aggregate anyDuplicated as.data.frame [9] as.list as.matrix by cbind [13] coerce dim dimnames dimnames&lt;- [17] droplevels duplicated edit format [21] formula head initialize is.na [25] Math merge na.exclude na.omit [29] Ops plot print prompt [33] rbind row.names row.names&lt;- rowsum [37] show slotsFromS3 split split&lt;- [41] stack str subset summary [45] Summary t tail transform [49] type.convert unique unstack within</code> </pre> <br><h2 id="chto-takoe-s3-klass-i-kak-sozdat-sobstvennyy-klass">  Qu'est-ce qu'une classe S3 et comment cr√©er votre propre classe </h2><br><p>  Il existe un certain nombre de classes dans R que vous pouvez cr√©er vous-m√™me.  L'un des plus populaires est S3. </p><br><p>  Cette classe est une liste dans laquelle sont stock√©es diverses propri√©t√©s de la classe que vous avez cr√©√©e.  Pour cr√©er votre propre classe, cr√©ez simplement une <em>liste</em> et donnez-lui un nom de classe. </p><br><p>  Le livre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"L'art de la programmation en R"</a> donne un exemple de la classe des <em>employ√©s</em> , qui stocke des informations sur l'employ√©.  Comme exemple de cet article, j'ai √©galement d√©cid√© de prendre un objet pour stocker des informations sur les employ√©s.  Mais il l'a rendu plus complexe et fonctionnel. </p><br><pre> <code class="plaintext hljs">#    employee1 &lt;- list(name = "Oleg", surname = "Petrov", salary = 1500, salary_datetime = Sys.Date(), previous_sallary = NULL, update = Sys.time()) #    class(employee1) &lt;- "emp"</code> </pre> <br><p>  Ainsi, nous avons cr√©√© notre propre classe, qui stocke les donn√©es suivantes dans sa structure: </p><br><ul><li>  Nom de l'employ√© </li><li>  Nom de famille de l'employ√© </li><li>  Salaire </li><li>  Le moment o√π le salaire a √©t√© √©tabli </li><li>  Salaire pr√©c√©dent </li><li>  Date et heure de la derni√®re mise √† jour des informations </li></ul><br><p>  Apr√®s cela, avec la commande <code>class(employee1) &lt;- "emp"</code> nous affectons la classe <em>emp</em> √† l'objet. </p><br><p>  Pour la commodit√© de cr√©er des objets de classe <em>emp,</em> vous pouvez √©crire une fonction. </p><br><div class="spoiler">  <b class="spoiler_title">Code de fonction pour cr√©er des objets de classe emp</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#     create_employee &lt;- function(name, surname, salary, salary_datetime = Sys.Date(), update = Sys.time()) { out &lt;- list(name = name, surname = surname, salary = salary, salary_datetime = salary_datetime, previous_sallary = NULL, update = update) class(out) &lt;- "emp" return(out) } #    emp    create_employee employee1 &lt;- create_employee("Oleg", "Petrov", 1500) #     class(employee1)</code> </pre> <br><pre> <code class="plaintext hljs">[1] "emp"</code> </pre> </div></div><br><h2 id="funkcii-prisvaivaniya-znacheniy-polzovatelskim-s3-klassam">  Fonctions d'affectation aux classes S3 personnalis√©es </h2><br><p>  Nous avons donc cr√©√© notre propre <em>emp</em> classe, mais jusqu'√† pr√©sent, cela ne nous a rien donn√©.  Voyons pourquoi nous avons cr√©√© notre propre classe et ce que nous pouvons en faire. </p><br><p>  Tout d'abord, vous pouvez √©crire des fonctions d'affectation pour la classe cr√©√©e. </p><br><div class="spoiler">  <b class="spoiler_title">Fonction d'assignation pour [</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">"[&lt;-.emp" &lt;- function(x, i, value) { if ( i == "salary" || i == 3 ) { cat(x$name, x$surname, "has changed salary from", x$salary, "to", value) x$previous_sallary &lt;- x$salary x$salary &lt;- value x$salary_datetime &lt;- Sys.Date() x$update &lt;- Sys.time() } else { cat( "You can`t change anything except salary" ) } return(x) }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Fonction d'assignation pour [[</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">"[[&lt;-.emp" &lt;- function(x, i, value) { if ( i == "salary" || i == 3 ) { cat(x$name, x$surname, "has changed salary from", x$salary, "to", value) x$previous_sallary &lt;- x$salary x$salary &lt;- value x$salary_datetime &lt;- Sys.Date() x$update &lt;- Sys.time() } else { cat( "You can`t change anything except salary" ) } return(x) }</code> </pre> </div></div><br><p>  Lors de la cr√©ation, les fonctions d'affectation sont toujours entre guillemets et ressemblent √† ceci: <code>"[&lt;-. " / "[[&lt;-. "</code> .  Et ils ont 3 arguments requis. </p><br><ul><li>  <strong>x</strong> - L'objet auquel la valeur sera affect√©e; </li><li>  <strong>i</strong> - Le nom / index de l'√©l√©ment objet (nom, pr√©nom, salaire, salaire_datetime, salaire_pr√©c√©dent, mise √† jour); </li><li>  <strong>value</strong> - La valeur assign√©e. </li></ul><br><p>  Plus loin dans le corps de la fonction, vous √©crivez comment les √©l√©ments de votre classe doivent changer.  Dans mon cas, je souhaite que l'utilisateur ne puisse modifier que le salaire <em>(√©l√©ment de</em> salaire <em>, dont l'indice est 3)</em> .  Par cons√©quent, √† l'int√©rieur de la fonction, j'√©cris un ch√®que <code>if ( i == "salary" || i == 3 )</code> .  Si l'utilisateur essaie de modifier d'autres propri√©t√©s, il re√ßoit le message <code>"You can't change anything except salary"</code> . </p><br><p>  Lorsque l'√©l√©ment de <em>salaire</em> est <em>modifi√©, un</em> message s'affiche contenant le nom et le pr√©nom de l'employ√©, son niveau de salaire actuel et nouveau.  Le salaire actuel est transmis √† la propri√©t√© <em>previous_sallary</em> , et le <em>salaire</em> re√ßoit une nouvelle valeur.  Les valeurs des propri√©t√©s <em>salaire_datetime</em> et <em>mise √† jour</em> sont √©galement mises √† jour. </p><br><p>  Vous pouvez maintenant essayer de modifier le salaire. </p><br><pre> <code class="plaintext hljs">employee1["salary"] &lt;- 1750</code> </pre> <br><pre> <code class="plaintext hljs">Oleg Petrov has changed salary from 1500 to 1750</code> </pre> <br><h2 id="razrabotka-sobstvennyh-metodov-dlya-obobschyonnyh-funkciy">  D√©veloppement de m√©thodes personnalis√©es pour des fonctions g√©n√©riques </h2><br><p>  Plus t√¥t, vous avez d√©j√† appris que dans R, il existe des fonctions g√©n√©ralis√©es qui modifient leur comportement en fonction de la classe re√ßue √† l'entr√©e de l'objet. </p><br><p>  Vous pouvez ajouter vos m√©thodes aux fonctions g√©n√©ralis√©es existantes et m√™me cr√©er vos propres fonctions g√©n√©ralis√©es. </p><br><p>  L' <code>print</code> est l'une des fonctions g√©n√©riques les plus utilis√©es.  Cette fonction est d√©clench√©e chaque fois que vous appelez un objet par son nom.  Maintenant, la sortie d'impression de l'objet de classe <em>emp que</em> nous avons cr√©√© ressemble √† ceci: </p><br><pre> <code class="plaintext hljs">$name [1] "Oleg" $surname [1] "Petrov" $salary [1] 1750 $salary_datetime [1] "2019-05-29" $previous_sallary [1] 1500 $update [1] "2019-05-29 11:13:25 EEST"</code> </pre><br><p>  √âcrivons notre m√©thode pour la fonction d'impression. </p><br><pre> <code class="plaintext hljs">print.emp &lt;- function(x) { cat("Name:", x$name, x$surname, "\n", "Current salary:", x$salary, "\n", "Days from last udpate:", Sys.Date() - x$salary_datetime, "\n", "Previous salary:", x$previous_sallary) }</code> </pre> <br><p>  Maintenant, la fonction d'impression peut imprimer des objets de notre classe <em>emp</em> .  Entrez simplement le nom de l'objet dans la console et obtenez la sortie suivante. </p><br><pre> <code class="plaintext hljs">employee1</code> </pre> <br><pre> <code class="plaintext hljs">Name: Oleg Petrov Current salary: 1750 Days from last udpate: 0 Previous salary: 1500</code> </pre> <br><h2 id="sozdanie-obobschyonnoy-funkcii-i-metodov">  Cr√©ation de fonctions et de m√©thodes g√©n√©riques </h2><br><p>  La plupart des fonctions g√©n√©riques √† l'int√©rieur se ressemblent et utilisent simplement la fonction <code>UseMethod</code> . </p><br><pre> <code class="plaintext hljs">#   get_salary &lt;- function(x, ...) { UseMethod("get_salary") }</code> </pre> <br><p>  Nous allons maintenant √©crire deux m√©thodes pour cela, l'une pour travailler avec des objets de la classe <em>emp</em> , la deuxi√®me m√©thode sera lanc√©e par d√©faut pour les objets de toutes les autres classes, pour travailler avec laquelle notre fonction g√©n√©ralis√©e n'a pas de m√©thode √©crite s√©par√©ment. </p><br><pre> <code class="plaintext hljs">#      emp get_salary.emp &lt;- function(x) x$salary #      get_salary.default &lt;- function(x) cat("Work only with emp class objects")</code> </pre> <br><p>  Le nom de la m√©thode se compose du nom de la fonction et de la classe d'objets que cette m√©thode traitera.  La m√©thode <em>par d√©faut</em> sera ex√©cut√©e √† chaque fois si vous passez un objet de classe dans lequel la m√©thode n'est pas √©crite. </p><br><pre> <code class="plaintext hljs">get_salary(employee1)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 1750</code> </pre> <br><pre> <code class="plaintext hljs">get_salary(iris)</code> </pre> <br><pre> <code class="plaintext hljs">Work only with emp class objects</code> </pre> <br><h2 id="nasledovanie">  H√©ritage </h2><br><p>  Un autre terme que vous rencontrerez lors de l'apprentissage de la programmation orient√©e objet. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/816/718/892/8167188925cafe5b3224398c7d78b51d.png" alt="image"></p><br><p>  Tout ce qui est montr√© sur l'image peut √™tre class√© comme classe de <em>transport</em> .  En effet, tous ces objets ont une m√©thode commune - le mouvement, et des propri√©t√©s communes, par exemple, la vitesse.  N√©anmoins, les 6 objets peuvent √™tre divis√©s en trois sous-classes: la terre, l'eau et l'air.  Dans ce cas, la sous-classe h√©ritera des propri√©t√©s de la classe parente, mais aura √©galement des propri√©t√©s et des m√©thodes suppl√©mentaires.  Une propri√©t√© similaire dans le cadre de la programmation orient√©e objet est appel√©e <strong>h√©ritage</strong> . </p><br><p>  Dans notre exemple, nous pouvons allouer des travailleurs distants √† une sous-classe distincte de <em>remote_emp</em> .  Ces employ√©s auront une propri√©t√© suppl√©mentaire: la ville de r√©sidence. </p><br><pre> <code class="plaintext hljs">#    employee2 &lt;- list(name = "Ivan", surname = "Ivanov", salary = 500, salary_datetime = Sys.Date(), previous_sallary = NULL, update = Sys.time(), city = "Moscow") #    remote_emp class(employee2) &lt;- c("remote_emp", "emp") #    class(employee2)</code> </pre> <br><pre> <code class="plaintext hljs">[1] "remote_emp" "emp"</code> </pre> <br><p>  Lors de l'affectation d'une classe, de la cr√©ation d'une sous-classe, nous utilisons un vecteur dans lequel le premier √©l√©ment est le nom de la sous-classe, suivi du nom de la classe parente. </p><br><p>  Dans le cas de l' <strong>h√©ritage,</strong> toutes les fonctions et m√©thodes g√©n√©ralis√©es √©crites pour fonctionner avec la classe parente fonctionneront correctement avec ses sous-classes. </p><br><pre> <code class="plaintext hljs">#    remote_emp   employee2</code> </pre> <br><pre> <code class="plaintext hljs">Name: Ivan Ivanov Current salary: 500 Days from last udpate: 0 Previous salary:</code> </pre> <br><pre> <code class="plaintext hljs">#   salary   remote_emp get_salary(employee2)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 500</code> </pre> <br><p>  Mais vous pouvez d√©velopper des m√©thodes s√©par√©ment pour chaque sous-classe. </p><br><pre> <code class="plaintext hljs">#     salary   remote_emp get_salary.remote_emp &lt;- function(x) { cat(x$surname, "remote from", x$city, "\n") return(x$salary) }</code> </pre> <br><pre> <code class="plaintext hljs">#   salary   remote_emp get_salary(employee2)</code> </pre> <br><pre> <code class="plaintext hljs">Ivanov remote from Moscow [1] 500</code> </pre> <br><p>  Cela fonctionne comme suit.  Tout d'abord, la fonction g√©n√©ralis√©e recherche une m√©thode √©crite pour la sous-classe <em>remote_emp</em> , si elle ne la trouve pas, elle va plus loin et recherche une m√©thode √©crite pour la classe parent <em>emp</em> . </p><br><h2 id="kogda-vam-mogut-prigoditsya-sobstvennye-klassy">  Quand vous pouvez utiliser vos propres cours </h2><br><p>  Il est peu probable que la fonctionnalit√© de cr√©ation de vos propres classes S3 soit utile √† ceux qui commencent tout juste leur voyage dans la ma√Ætrise du langage R. </p><br><p>  Personnellement, ils ont √©t√© utiles pour d√©velopper le package <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rfacebookstat</a> .  Le fait est que dans l'API Facebook, le param√®tre <em>action_breakdowns</em> existe pour charger les √©v√©nements et r√©pondre aux publications publicitaires dans diff√©rents groupes. </p><br><p>  Lorsque vous utilisez de tels regroupements, vous obtenez une r√©ponse sous la forme d'une structure JSON au format suivant: </p><br><pre> <code class="plaintext hljs">{ "action_name": "like", "action_type": "post_reaction", "value": 6 } { "action_type": "comment", "value": 4 }</code> </pre> <br><p>  Le nombre et le nom des √©l√©ments pour les diff√©rentes <em>actions_breakdowns sont</em> diff√©rents, donc pour chacun, vous devez √©crire votre propre analyseur.  Pour r√©soudre ce probl√®me, j'ai utilis√© la fonctionnalit√© de cr√©ation de classes S3 personnalis√©es et une fonction g√©n√©ralis√©e avec un ensemble de m√©thodes. </p><br><p>  Lors de la demande de statistiques sur les √©v√©nements avec des regroupements, en fonction des valeurs des arguments, une classe a √©t√© d√©finie qui a √©t√© affect√©e √† la r√©ponse re√ßue de l'API.  La r√©ponse a √©t√© transmise √† une fonction g√©n√©rique et, en fonction de la classe sp√©cifi√©e pr√©c√©demment, une m√©thode a √©t√© d√©termin√©e pour analyser le r√©sultat.  Toute personne int√©ress√©e √† approfondir les d√©tails de l'impl√©mentation peut trouver le code pour cr√©er une fonction et des m√©thodes g√©n√©ralis√©es, et <a href="">voici</a> leur utilisation. </p><br><p>  Dans mon cas, j'ai utilis√© des classes et des m√©thodes pour les traiter exclusivement √† l'int√©rieur du package.  Si vous devez g√©n√©ralement fournir √† l'utilisateur du package une interface pour travailler avec les classes que vous avez cr√©√©es, toutes les m√©thodes doivent √™tre incluses en tant que directive <code>S3method</code> dans le fichier <code>S3method</code> , comme suit. </p><br><pre> <code class="plaintext hljs">S3method(_,) S3method("[&lt;-",emp) S3method("[[&lt;-",emp) S3method("print",emp)</code> </pre> <br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  Comme le montre clairement le titre de l'article, ce n'est que la premi√®re partie, car  en R, en plus des classes <em>S3</em> , il y en a d'autres: <em>S4</em> , <em>R5</em> ( <em>RC</em> ), <em>R6</em> .  √Ä l'avenir, j'essaierai d'√©crire sur chacune de ces impl√©mentations de POO.  N√©anmoins, toute personne ayant un niveau d'anglais leur permet de lire des livres librement, alors Headley Wickham est plut√¥t concis, et avec des exemples, il a couvert ce sujet dans son livre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Advanced R"</a> . </p><br><p>  Si tout √† coup, dans un article, j'ai manqu√© des informations importantes sur les cours S3, je vous serais reconnaissant de bien vouloir en parler dans les commentaires. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr453964/">https://habr.com/ru/post/fr453964/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr453952/index.html">¬´La demande a m√ªri¬ª: Alexei Fedorov √† propos d'une nouvelle conf√©rence sur les syst√®mes distribu√©s</a></li>
<li><a href="../fr453956/index.html">Museum DataArt. Terminal vid√©o ADM-3A. La voiture est lourde, fiable, abattue</a></li>
<li><a href="../fr453958/index.html">Monorepositoires: veuillez</a></li>
<li><a href="../fr453960/index.html">Global DevOps Bootcamp 2019 √† Moscou</a></li>
<li><a href="../fr453962/index.html">RxSwift et Coroutines chez Kotlin - d√©veloppement mobile optionnel d'AGIMA et GeekBrains</a></li>
<li><a href="../fr453968/index.html">D√©sapprendre les pratiques de r√©vision des codes toxiques</a></li>
<li><a href="../fr453970/index.html">Nous √©crivons le proxy Reverse socks5 sur PowerShell. Partie 2</a></li>
<li><a href="../fr453972/index.html">Les arch√©ologues recr√©ent une √©pingle vieille de deux mille ans √† l'aide de l'impression et de la num√©risation 3D</a></li>
<li><a href="../fr453974/index.html">Concurrence des syst√®mes ML sur le mat√©riel linguistique. Comment avons-nous appris √† remplir les blancs</a></li>
<li><a href="../fr453976/index.html">Programme √©ducatif √©conomique pour les informaticiens</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>