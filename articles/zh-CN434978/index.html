<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📡 ⛏️ 👨🏻‍⚕️ 介绍HealthKit 📽️ 👨🏼‍🏫 👸🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在此HealthKit文章中，您将学习如何请求访问HealthKit数据的权限，以及如何向中央HealthKit存储库读写数据。 本文使用Swift 4，iOS 11，Xcode 9版本。 

 HealthKit是iOS 8中引入的API。HealthKit充当所有与健康相关的数据的中央存储库，允...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>介绍HealthKit</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434978/">在此HealthKit文章中，您将学习如何请求访问HealthKit数据的权限，以及如何向中央HealthKit存储库读写数据。 本文使用Swift 4，iOS 11，Xcode 9版本。 <br><br>  <b>HealthKit</b>是iOS 8中引入的<i>API。HealthKit</i>充当所有与健康相关的数据的中央存储库，允许用户创建生物学档案并存储锻炼数据。 <br><br> 阅读HealthKit文章时，您将创建最简单的培训跟踪应用程序并学习： <br><br><ul><li> 如何请求权限和访问HealthKit数据 </li><li> 如何读取HealthKit数据并将其显示在UITableView中 </li><li> 如何将数据写入中央HealthKit存储库 </li></ul><br> 准备好开始使用HealthKit了吗？ 继续阅读！ <br><a name="habracut"></a><br>  <b>注意：</b> <i>要学习本教程，您将需要一个有效的iOS开发人员帐户。</i>  <i>否则，您将无法启用HealthKit功能并无法访问HealthKit存储库。</i> <br><br><h3> 开始 </h3><br> 入门应用程序在锻炼程序期间跟踪卡路里燃烧。 对于好莱坞内部人士和名流而言，很明显，我在谈论<b>Prancercise</b> 。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sp/rk/if/sprkif8aw8ng01gh-y4vrroags8.png" alt="实践" width="764" height="430"></div><br>  <a href="">下载入门项目并在Xcode中打开它</a> 。 <br><br> 编译并运行该应用程序。 您将看到用户界面的“骨架”。 在接下来的两篇文章中，您将逐步为该应用程序添加功能。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c8f/68a/4a5/c8f68a4a5bea9dfc34c426606e443458.png" alt="图片" width="281" height="500"></div><br><h3> 分配团队 </h3><br>  <b>HealthKit</b>是一个特殊的框架。 如果您没有有效的开发人员帐户，则该应用程序将无法使用它。 拥有开发者帐户后，您可以分配您的团队。 <br><br> 在项目浏览器中选择<b>PrancerciseTracker</b> ，然后选择<b>PrancerciseTracker target</b> 。 转到<b>常规</b>选项卡，然后单击<b>团队</b>字段。 <br><br> 选择与您的开发者帐户关联的命令： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/809/a3e/af2/809a3eaf2aa966919ed95ad1f8a4be38.png" alt="图片" width="2020" height="752"></div><br><h3> 权限/权利 </h3><br>  HealthKit也具有自己的一组权限，您需要启用它们才能创建使用该框架的应用程序。 <br><br> 在目标编辑器中打开“ <b>功能”</b>选项卡并启用<b>HealthKit</b> ，如以下屏幕截图所示： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dce/374/42e/dce37442eebca83d0e6e480113dcd3fc.png" alt="图片"><br><br> 等待Xcode为您配置HealthKit。 通常，这里没有问题，但是如果忘记正确指定组和捆绑包标识符，仍然会遇到一些问题。 <br><br> 现在一切就绪。 您只需要询问用户使用HealthKit的权限即可。 <br><br><h3> 权限 </h3><br>  HealthKit可处理机密和敏感数据。 并不是每个人都感到很舒服，以至于允许已安装的应用程序访问此信息。 <br><br> 这就是HealthKit具有强大的隐私系统的原因。  HealthKit仅有权访问用户同意共享的数据。 要为Prancercise Tracker的用户创建配置文件，必须首先获得访问每种数据类型的权限。 <br><br><h3> 用法说明更新 </h3><br> 首先，您需要描述为什么要求用户提供健康指标。  <b>Xcode</b>使您能够在应用程序的<b>Info.plist</b>文件中指定此代码。 <br><br> 打开<b>Info.plist</b> 。 然后添加以下键： <br>  <b>隐私</b> - <b>健康共享使用说明</b> <br>  <b>隐私</b> -运行状况<b>更新使用情况说明</b> <br><br> 这些键存储将在HeathKit登录屏幕出现时显示的文本。  <b>Health Share使用说明</b>是指应从HealthKit读取的数据部分。  <b>运行状况更新使用情况说明</b>与写入HealthKit的数据相对应。 <br><br> 您可以在此处“添加”所需的所有内容。 这通常是一个描述：“我们将使用您的健康信息来更好地跟踪您的锻炼情况。” <br><br> 请记住，如果未安装这些密钥，则当您尝试登录HealthKit时应用程序将崩溃。 <br><br><h3>  HealthKit授权 </h3><br> 打开<i>HealthKitSetupAssistant.swift</i>文件，其中是用于在HealthKit中进行授权的类方法。 <br><br><pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">func</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorizeHealthKit</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">completion</span></span></span><span class="hljs-class">: @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">escaping</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bool</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Error</span></span></span><span class="hljs-class">?) -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Swift</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">) </span></span>{ }</code> </pre> <br>  authorizeHealthKit（completion :)方法不带任何参数，并且具有返回布尔值（ <b>成功</b>或<b>失败</b> ）和可选错误（如果万一出问题）的补全。 如果返回错误，则在两种情况下将它们传递给complition： <br><br><ol><li>  HealthKit可能在您的设备上不可用。 例如，如果应用程序在iPad上运行。 </li><li> 在当前版本的HealthKit中，某些数据类型可能不可用。 </li></ol><br> 让我们打破这个过程。 要授权HealthKit， <i>authorizeHealthKit（completion :)</i>方法必须完成以下四个步骤： <br><br><ol><li> 检查Healthkit在此设备上是否可用。 如果不是这种情况，则将失败和错误返回至完成状态。 </li><li> 准备健康数据类型。  Prancercise Tracker将读取和写入HealthKit。 </li><li> 将此数据组织为要读取的类型和要写入的类型的列表。 </li><li> 请求授权。 如果此操作成功，则所有活动均正确并正确完成。 </li></ol><br><h3>  HealthKit可用性检查 </h3><br> 首先，您需要检查设备上HealthKit的可用性。 <br> 将以下代码粘贴到<i>authorizeHealthKit（completion :)</i>方法的开头： <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//1. ,      HealthKit guard HKHealthStore.isHealthDataAvailable() else { completion(false, HealthkitSetupError.notAvailableOnDevice) return }</span></span></code> </pre><br> 您会经常与<b>HKHealthStore</b>互动。 它是存储用户健康数据的中央存储库。  <i>isHealthDataAvailable（）</i>方法将帮助您了解当前用户设备是否支持Heathkit数据。 <br><br> 如果HealthKit在设备上不可用，则guard语句会阻止应用程序执行其余的<i>authorizeHealthKit（completion :)</i>方法。 发生这种情况时，会用<b>notAvailableOnDevice</b>错误<b>调用</b>完成块。 您可以将其简单地输出到控制台或主控制器中，以在发生此类错误时处理进一步的步骤。 <br><br><h3> 资料准备 </h3><br> 一旦知道HealthKit在用户的设备上可用，就该准备将要读写HealthKit的数据类型了。 <br>  HealthKit使用<b>HKObjectType</b>类型。 进入或返回到中央HealthKit存储库的每种类型都是一种<b>HKObjectType</b> 。 您还将看到HKSampleType和<b>HKWorkoutType</b> 。 它们都继承自<b>HKObjectType</b> ，因此基本上这是同一件事。 <br><br> 在第一个代码段之后立即粘贴以下代码段： <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//2.   ,     HealthKit guard let dateOfBirth = HKObjectType.characteristicType(forIdentifier: .dateOfBirth), let bloodType = HKObjectType.characteristicType(forIdentifier: .bloodType), let biologicalSex = HKObjectType.characteristicType(forIdentifier: .biologicalSex), let bodyMassIndex = HKObjectType.quantityType(forIdentifier: .bodyMassIndex), let height = HKObjectType.quantityType(forIdentifier: .height), let bodyMass = HKObjectType.quantityType(forIdentifier: .bodyMass), let activeEnergy = HKObjectType.quantityType(forIdentifier: .activeEnergyBurned) else { completion(false, HealthkitSetupError.dataTypeNotAvailable) return }</span></span></code> </pre><br> 哇，这是个大<b>后卫</b> ！ 这也是使用单个防护程序检索多个选项的一个很好的例子。 <br><br> 若要为这些特征创建<b>HKObjectType</b> ，您需要使用<i>HKObjectType.characteristicType（forIdentifier :)</i>或<i>HKObjectType.quantityType（forIdentifier :)</i> <br> 特征类型和数量类型是框架定义的枚举。  HealthKit与他们一起穿靴。 <br><br> 您还将注意到，如果一种特性或选择类型不可用，则该方法将失败。 这是故意的。 您的应用程序应该始终确切知道可以使用哪种类型的HealthKit。 <br><br><h3> 准备用于读取和写入的数据类型列表 </h3><br> 现在该准备一份用于读取和写入的数据类型列表了。 <br> 在第二部分之后立即将第三个代码粘贴到<i>authorizeHealthKit（completion :)</i>方法中： <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//3.   ,  HealthKit     let healthKitTypesToWrite: Set&lt;HKSampleType&gt; = [bodyMassIndex, activeEnergy, HKObjectType.workoutType()] let healthKitTypesToRead: Set&lt;HKObjectType&gt; = [dateOfBirth, bloodType, biologicalSex, bodyMassIndex, height, bodyMass, HKObjectType.workoutType()]</span></span></code> </pre><br>  HealthKit期望一组代表用户可以写入的数据类型的<b>HKSampleType</b>对象，并且还期望为您的应用程序显示一组HKObjectType对象。 <br><br>  <b>HKObjectType.workoutType（）</b>是<b>HKObjectType</b>的特殊类型。 它是任何锻炼。 <br><br><h3>  HealthKit授权 </h3><br> 最后一部分是最简单的。 您只需要从HealthKit请求授权。 粘贴最后一段代码： <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//4.    HKHealthStore().requestAuthorization(toShare: healthKitTypesToWrite, read: healthKitTypesToRead) { (success, error) in completion(success, error) }</span></span></code> </pre><br> 此代码从HealthKit请求授权，然后调用完成。 它们将变量用于成功操作以及从HKHealthStore的<i>requestAuthorization（toShare：read：complete :)</i>方法传递的错误。 <br><br> 您可以将其视为重定向。 您无需将数据包传递给HealthKitSetupAssistant内部，而是将数据包传递给主控制器，该主控制器可能显示警告或采取其他措施。 <br><br> 该项目已经有一个Authorize HealthKit按钮，并在MasterViewController中调用<i>authorizeHealthKit（）</i>方法。 这是调用我们刚刚编写的授权方法的理想场所。 <br><br> 打开<b>MasterViewController.swift</b> ，找到<i>authorizeHealthKit（</i> ）方法并粘贴以下代码： <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">HealthKitSetupAssistant</span></span>.authorizeHealthKit { (authorized, error) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> authorized <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> baseMessage = <span class="hljs-string"><span class="hljs-string">"HealthKit Authorization Failed"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> error = error { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"\(baseMessage). Reason: \(error.localizedDescription)"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(baseMessage) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"HealthKit Successfully Authorized."</span></span>) }</code> </pre><br> 此代码使用您刚刚实现的<i>authorizeHealthKit（completion :)</i>方法。 完成后，它将在控制台中显示一条消息，指示在HealthKit中授权是否成功。 <br><br> 启动应用程序。 在主窗口中单击“授权HealthKit”，您将看到一个弹出授权屏幕： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4ef/2bc/500/4ef2bc50015fda69b7d916b9231a5f1a.png" alt="图片" width="281" height="500"></div><br> 打开所有开关，滚动查看所有开关，然后按<b>允许</b> 。 在控制台中，您应该看到以下消息： <br><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">HealthKit</span></span> <span class="hljs-type"><span class="hljs-type">Successfully</span></span> <span class="hljs-type"><span class="hljs-type">Authorized</span></span>.</code> </pre><br>  <b>太好了！</b> 该应用程序可以访问HealthKit的中央存储库。 现在是时候开始跟踪项目了。 <br><br><h3> 特性和样品 </h3><br> 在本节中，您将学习： <br><br><ul><li> 如何阅读用户的生物学特征。 </li><li> 如何读写不同类型的样本（重量，高度等） </li></ul><br> 通常，生物学特性是不会改变的元素类型，就像您的血型一样。 样品是经常变化的元素，例如重量。 <br><br> 为了正确跟踪<b>Prancercise</b>锻炼<b>模式</b>的有效性， <b>Prancercise Tracker</b>应用程序必须接收用户体重和身高的样本。 这些样本一起可用于计算体重指数（BMI）。 <br><br>  <b>注意：</b> <i>体重指数（BMI）是人体脂肪的一种广泛使用的指标，是根据一个人的体重和身高计算出来的。</i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在此处</a>了解更多信息。</i> <br><br><h3> 阅读规范 </h3><br>  Prancercise Tracker不记录生物学特征。 他从HealthKit获得它们。 这意味着这些特征必须首先存储在中央HeathKit存储库中。 <br><br> 如果您还没有这样做，是时候告诉<b>HeathKit</b>更多有关您自己的信息。 <br><br> 在设备或模拟器上打开“运行状况”应用程序。 选择“健康数据”选项卡。 然后，单击右上角的配置文件图标以查看您的健康配置文件。 单击<b>编辑，</b>然后输入信息的出生日期，性别，血型： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/324/285/ea4/324285ea449bb8049ff166c1e83ec76f.png" alt="图片" width="1732" height="1540"></div><br> 现在， <b>HealthKit</b>知道您的出生日期，性别和血型，是时候在<b>Prancercise Tracker中</b>阅读这些功能了。 <br><br> 返回<b>Xcode</b>并打开<i>ProfileDataStore.swift</i> 。  <b>ProfileDataStore</b>类代表您对用户所有与健康相关的数据的访问点。 <br><br> 将以下方法粘贴到<b>ProfileDataStore中</b> ： <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">func</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getAgeSexAndBloodType</span></span></span><span class="hljs-class">() </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">throws</span></span></span><span class="hljs-class"> -&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">age</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Int</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">biologicalSex</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HKBiologicalSex</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bloodType</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HKBloodType</span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> healthKitStore = <span class="hljs-type"><span class="hljs-type">HKHealthStore</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-comment"><span class="hljs-comment">//1. This method throws an error if these data are not available. let birthdayComponents = try healthKitStore.dateOfBirthComponents() let biologicalSex = try healthKitStore.biologicalSex() let bloodType = try healthKitStore.bloodType() //2. Use Calendar to calculate age. let today = Date() let calendar = Calendar.current let todayDateComponents = calendar.dateComponents([.year], from: today) let thisYear = todayDateComponents.year! let age = thisYear - birthdayComponents.year! //3. Unwrap the wrappers to get the underlying enum values. let unwrappedBiologicalSex = biologicalSex.biologicalSex let unwrappedBloodType = bloodType.bloodType return (age, unwrappedBiologicalSex, unwrappedBloodType) } }</span></span></code> </pre><br>  <i>getAgeSexAndBloodType（）</i>方法调用<b>HKHealthStore</b> ，询问用户的出生日期，性别和血型。 它还使用出生日期计算用户的年龄。 <br><br><ol><li> 您可能已经注意到，此方法可能会导致错误。 只要在HealthKit中央存储库中没有存储生日，性别或血型，就会发生这种情况。 由于您刚刚在应用程序中输入了此信息，因此不会引起错误。 </li><li> 使用<b>Calendar</b>类，可以将任何日期转换为一组<b>Date Components</b> 。 如果您想获得一年的约会日期，这真的很方便。 该代码仅获取您的出生年份，当前年份，然后计算差异。 </li><li>  “扩展”变量的命名方式很显然，您需要从包装类（ <b>HKBiologicalSexObject</b>和<b>HKBloodTypeObject</b> ）中访问基本枚举。 </li></ol><br><h3>  UI更新 </h3><br> 如果现在编译并运行该应用程序，则您尚未在用户界面中看到任何更改，因为尚未将此逻辑连接到它。 <br> 打开<b>ProfileViewController.swif</b> t并找到<b>loadAndDisplayAgeSexAndBloodType</b> <i>（</i> ）方法 <br><br> 此方法将使用您的<b>ProfileDataStore</b>将生物学特征加载到用户界面中。 <br><br> 将以下代码粘贴到<i>loadAndDisplayAgeSexAndBloodType（）</i>方法中： <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> userAgeSexAndBloodType = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-type"><span class="hljs-type">ProfileDataStore</span></span>.getAgeSexAndBloodType() userHealthProfile.age = userAgeSexAndBloodType.age userHealthProfile.biologicalSex = userAgeSexAndBloodType.biologicalSex userHealthProfile.bloodType = userAgeSexAndBloodType.bloodType updateLabels() } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> error { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.displayAlert(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: error) }</code> </pre><br> 该代码块将年龄，性别和血液类型加载为元组。 然后，他在UserHealthProfile模型的本地实例中设置这些字段。 最后，它通过调用<i>updateLabels（）</i>方法，使用<b>UserHealthProfile中</b>的新字段更新用户界面。 <br><br> 由于<b>ProfileDataStore的</b> <i>getAgeSexAndBloodType（）</i>方法可能会引发错误，因此<b>ProfileViewController</b>必须对其进行处理。 在这种情况下，您只需采取错误并将其显示为警告。 <br><br> 这一切都很棒，但有一个陷阱。  <i>updateLabels（）</i>方法尚未<i>执行</i>任何操作。 这只是一个空白广告。 这次，让我们进入用户界面。 <br><br> 找到<i>updateLabels（）</i>方法并将此代码粘贴到其中： <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> age = userHealthProfile.age { ageLabel.text = <span class="hljs-string"><span class="hljs-string">"\(age)"</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> biologicalSex = userHealthProfile.biologicalSex { biologicalSexLabel.text = biologicalSex.stringRepresentation } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bloodType = userHealthProfile.bloodType { bloodTypeLabel.text = bloodType.stringRepresentation }</code> </pre><br> 代码很简单。 如果用户设置了年龄，它将被格式化为标签。 生物性别和血型也是如此。 变量stringRepresentation将枚举转换为字符串以用于显示。 <br><br> 编译并运行该应用程序。 转到配置文件和BMI屏幕。 单击读取HealthKit数据按钮。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e13/3a5/ed1/e133a5ed1cd1d13016f28cc1a3452af9.png" alt="图片" width="281" height="500"></div><br> 如果您以前在应用程序中输入了信息，则该信息应显示在此屏幕的快捷方式中。 如果您尚未这样做，则会出现一条错误消息。 <br><br> 哇！ 您可以直接从<b>HealthKit</b>读取和显示数据。 <br><br><h3> 查询样本 </h3><br> 现在是时候读取用户的体重和身高了。 它们将用于在配置文件视图中计算和显示BMI。 <br><br> 生物学特性很容易获得，因为它们几乎不会改变。 样品需要更复杂的方法。 他们使用<b>HKQuery</b> ，更确切地说是<b>HKSampleQuery</b> 。 <br><br> 要从HealthKit请求样品，您将需要： <br><br><ol><li> 指定您要索取的样品类型（重量，高度等）， </li><li> 一些有助于过滤和排序数据的其他选项。 为此，可以传递一个可选的<b>NSPredicate</b>或<b>NSSortDescriptors</b>数组。 </li></ol><br>  <b>注意：</b> <i>如果您熟悉CoreData，您可能会注意到一些相似之处。</i>  <i><b>HKSampleQuery</b>与对象类型的<b>NSFetchedRequest</b>非常相似，您可以在其中指定谓词和排序描述符，然后设置对象的上下文以执行查询以获取结果。</i> <br><br> 设置查询后，只需调用<b>HKHealthStore</b> <i>ExecuteQuery（）</i>方法即可获取结果。 <br><br> 对于<b>Prancercise Tracker，</b>您将创建一个通用功能，该功能可以下载任何类型的最新样本。 因此，您可以将其用于体重和身高。 <br><br> 打开<b>ProfileDataStore.swift</b>并将以下方法粘贴到该类中，位于<i>getAgeSexAndBloodType（）</i>方法的正下方： <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">func</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getMostRecentSample</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sampleType</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HKSampleType</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">completion</span></span></span><span class="hljs-class">: @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">escaping</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HKQuantitySample</span></span></span><span class="hljs-class">?, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Error</span></span></span><span class="hljs-class">?) -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Swift</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//1.  HKQuery    . let mostRecentPredicate = HKQuery.predicateForSamples(withStart: Date.distantPast, end: Date(), options: .strictEndDate) let sortDescriptor = NSSortDescriptor(key: HKSampleSortIdentifierStartDate, ascending: false) let limit = 1 let sampleQuery = HKSampleQuery(sampleType: sampleType, predicate: mostRecentPredicate, limit: limit, sortDescriptors: [sortDescriptor]) { (query, samples, error) in //2.       . DispatchQueue.main.async { guard let samples = samples, let mostRecentSample = samples.first as? HKQuantitySample else { completion(nil, error) return } completion(mostRecentSample, nil) } } HKHealthStore().execute(sampleQuery) }</span></span></code> </pre><br> 此方法使用样品的类型（身高，体重，BMI等）。 然后，他创建一个查询以检索此类型的最后一个样本。 如果您查看增长样本，您将返回上一个增长记录。 <br><br> 这里发生了很多事情。 我将停止解释一些事情。 <br><br><ol><li>  <b>HKQuery</b>中有几种方法可以帮助您过滤出HealthKit查询示例。 在这种情况下，我们使用内置的日期谓词。 </li><li> 从HealthKit请求样品是一个异步过程。 这就是为什么在Dispatch块内找到完成处理程序中的代码的原因。 主线程上需要合规。 否则，应用程序将失败。 </li></ol><br> 如果一切顺利，您的请求将被执行，并且您将在<b>主</b>线程上返回一个简洁的示例， <b>ProfileViewController</b>可以在该<b>示例中将</b>其内容放置在标签中。 现在开始做这部分。 <br><br><h3> 在用户界面中显示样本 </h3><br> 在上一节中，您是从<b>HealthKit</b>下载数据的。 将它们另存为<b>ProfileViewController中</b>的模型，然后使用<b>ProfileViewController</b> <i>updateLabels（）</i>方法更新行中的内容 <br><br> 您所要做的就是通过添加一个函数来扩展此过程，该函数可以加载样本，为用户界面处理它们，然后调用<i>updateLabels（）</i>来用文本填充标签。 <br><br> 打开<b>ProfileViewController.swift</b>文件，找到<b>loadAndDisplayMostRecentHeight</b> <i>（</i> ）方法并粘贴以下代码： <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//1.  HealthKit      guard let heightSampleType = HKSampleType.quantityType(forIdentifier: .height) else { print("Height Sample Type is no longer available in HealthKit") return } ProfileDataStore.getMostRecentSample(for: heightSampleType) { (sample, error) in guard let sample = sample else { if let error = error { self.displayAlert(for: error) } return } //2.     ,   , //    . let heightInMeters = sample.quantity.doubleValue(for: HKUnit.meter()) self.userHealthProfile.heightInMeters = heightInMeters self.updateLabels() }</span></span></code> </pre><br><ol><li> 此方法首先创建一种生长样本。 然后，他将这种类型的样本传递给您刚刚编写的方法，该方法将返回HealthKit中记录的最新用户增长样本。 </li><li> 一旦样本返回，增长将转换为米并存储在UserHealthProfile模型中。 然后， <b>UI</b>将更新。 </li></ol><br>  <b>注意：</b> <i>通常您希望将数量样本转换为标准单位。</i>  <i>为此，以上代码使用<i>doubleValue（for :)</i>方法，该方法允许您<b>将所需的</b>适当数据（在本例中为<b>meter</b> ）传递给<b>HKUnit</b> 。</i> <i><br><br></i>  <i>您可以使用<b>HealthKit提供的</b>一些常见类方法来创建各种类型的<b>HKUnit</b> 。</i>  <i>要获取计数器，您只需使用<b>HKUnit中</b>的meter（）方法，这将是您所需要的。</i> <br><br> 随着增长的整理。 重量呢？ 一切都非常相似，但是您需要在<b>ProfileViewController中</b>填充<b>loadAndDisplayMostRecentWeight</b> <i>（）</i>方法。 <br><br> 将以下代码粘贴到<i>loadAndDisplayMostRecentWeight（）</i>方法中： <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> weightSampleType = <span class="hljs-type"><span class="hljs-type">HKSampleType</span></span>.quantityType(forIdentifier: .bodyMass) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Body Mass Sample Type is no longer available in HealthKit"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-type"><span class="hljs-type">ProfileDataStore</span></span>.getMostRecentSample(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: weightSampleType) { (sample, error) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sample = sample <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> error = error { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.displayAlert(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: error) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> weightInKilograms = sample.quantity.doubleValue(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: <span class="hljs-type"><span class="hljs-type">HKUnit</span></span>.gramUnit(with: .kilo)) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.userHealthProfile.weightInKilograms = weightInKilograms <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateLabels() }</code> </pre><br> 您创建想要接收的样本类型，为其请求<b>HealthKit</b> ，进行一些单位转换，将其保存在模型中并更新用户界面。 <br><br> 目前，它可以表明工作已完成，但是还有其他事情。  <i>updateLabels（）</i>函数无法<i>识别</i>您已经可以使用的新数据。 <br><br> 让我们修复它。 <br><br>  <i>将以下行</i>添加到<i>updateLabels（）</i>函数中，在展开血型以在用户界面上显示它的部分的正下方： <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> weight = userHealthProfile.weightInKilograms { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> weightFormatter = <span class="hljs-type"><span class="hljs-type">MassFormatter</span></span>() weightFormatter.isForPersonMassUse = <span class="hljs-literal"><span class="hljs-literal">true</span></span> weightLabel.text = weightFormatter.string(fromKilograms: weight) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> height = userHealthProfile.heightInMeters { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> heightFormatter = <span class="hljs-type"><span class="hljs-type">LengthFormatter</span></span>() heightFormatter.isForPersonHeightUse = <span class="hljs-literal"><span class="hljs-literal">true</span></span> heightLabel.text = heightFormatter.string(fromMeters: height) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bodyMassIndex = userHealthProfile.bodyMassIndex { bodyMassIndexLabel.text = <span class="hljs-type"><span class="hljs-type">String</span></span>(format: <span class="hljs-string"><span class="hljs-string">"%.02f"</span></span>, bodyMassIndex) }</code> </pre><br> 遵循<i>updateLabels（）</i>函数中的原始模板，它扩展了<b>UserHealthProfile</b>模型中的身高，体重和体重指数。 如果可用，它们将生成适当的行并将其分配给用户屏幕上的标签。 <br><br>  <b>MassFormatter</b>和<b>LengthFormatter</b>完成将值转换为字符串的工作。 <br><br> 体重指数实际上并未存储在<b>UserHealthProfile</b>模型中。 这是一个为您执行计算的计算属性。 <br><br> 单击<b>bodyMassIndex</b>属性，您将明白我的意思： <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bodyMassIndex: <span class="hljs-type"><span class="hljs-type">Double?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> weightInKilograms = weightInKilograms, <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> heightInMeters = heightInMeters, heightInMeters &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (weightInKilograms/(heightInMeters*heightInMeters)) }</code> </pre><br> 体重指数是一个可选属性，也就是说，如果您未指定身高或体重（或者将它们设置为没有意义的数字），则它可以返回nil。 实际计算只是重量除以高度的平方。 <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：</font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您还没有将数据添加到</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HealthKit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以便应用程序读取的</font><font style="vertical-align: inherit;">话，那么您很快就会沉迷于所有这些</font><font style="vertical-align: inherit;">。如果尚未这样做，则至少需要创建身高和体重样本。</font></font></i> <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开运行状况应用程序，然后转到运行状况数据选项卡。在此处，选择“身体测量”参数，然后选择“权重”，然后选择“添加数据点”以添加新的体重样本。重复增长过程。</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prancercise Tracker</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应该能够读取用户体重和身高的最新样本，然后将其显示在文本中。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译并运行应用程序。转到</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置文件和BMI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。然后单击“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">读取HealthKit数据”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮</font><font style="vertical-align: inherit;">。</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/841/d4d/35d/841d4d35d54528b5578fe32a3b163c0a.png" alt="图片" width="281" height="500"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">太棒了！</font><font style="vertical-align: inherit;">您只需从</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HealthKit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储库中读取第一个样本，</font><font style="vertical-align: inherit;">然后使用它们来计算BMI。</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 保存样品 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prancercise跟踪器</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已经拥有一个方便的计算身体质量指数。</font><font style="vertical-align: inherit;">让我们用它来记录用户的BMI示例。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProfileDataStore.swift</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并添加以下方法：</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">func</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">saveBodyMassIndexSample</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bodyMassIndex</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Double</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">date</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Date</span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//1. ,      guard let bodyMassIndexType = HKQuantityType.quantityType(forIdentifier: .bodyMassIndex) else { fatalError("Body Mass Index Type is no longer available in HealthKit") } //2.   HKUnit     let bodyMassQuantity = HKQuantity(unit: HKUnit.count(), doubleValue: bodyMassIndex) let bodyMassIndexSample = HKQuantitySample(type: bodyMassIndexType, quantity: bodyMassQuantity, start: date, end: date) //3.      HealthKit HKHealthStore().save(bodyMassIndexSample) { (success, error) in if let error = error { print("Error Saving BMI Sample: \(error.localizedDescription)") } else { print("Successfully saved BMI Sample") } } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与其他样本类型一样，您必须首先确保</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HealthKit中</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供了样本类型</font><font style="vertical-align: inherit;">。</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，代码检查</font><font style="vertical-align: inherit;">体重指数</font><font style="vertical-align: inherit;">是否存在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数量类型</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果是这样，则将其用于创建数量样本。</font><font style="vertical-align: inherit;">如果不是，则该应用程序停止工作。</font></font></li><li>  <i>count()</i>  <b>HKUnit</b>    ,       ,   .  -      ,    ,           . </li><li> <b>HKHealthStore</b>     ,        .      ,        . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">快完成了总结用户界面。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProfileViewController.swif</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，找到</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saveBodyMassIndexToHealthKit（</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">。当用户单击表中的“保存BMI”按钮时，将调用此方法。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将以下代码粘贴到该方法中：</font></font><br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bodyMassIndex = userHealthProfile.bodyMassIndex <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { displayAlert(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: <span class="hljs-type"><span class="hljs-type">ProfileDataError</span></span>.missingBodyMassIndex) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-type"><span class="hljs-type">ProfileDataStore</span></span>.saveBodyMassIndexSample(bodyMassIndex: bodyMassIndex, date: <span class="hljs-type"><span class="hljs-type">Date</span></span>())</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您还记得，体重指数是一个计算属性，当从</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HealthKit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载身高和体重样本时，该属性返回一个值</font><font style="vertical-align: inherit;">。这段代码正在尝试计算此属性，如果可能，它将被传递给</font><font style="vertical-align: inherit;">您刚刚编写</font><font style="vertical-align: inherit;">的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saveBodyMassIndexSample（bodyMassIndex：date :)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果由于某种原因无法计算出体重指数，也会显示一个方便的警报。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译并运行该应用程序。转到</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置文件和BMI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">屏幕</font><font style="vertical-align: inherit;">。从</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HeathKit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载数据</font><font style="vertical-align: inherit;">，然后单击“保存BMI”按钮。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看控制台。你看到了吗？</font></font><br><br><pre> <code class="swift hljs">   <span class="hljs-type"><span class="hljs-type">BMI</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果是这样，恭喜！</font><font style="vertical-align: inherit;">您的BMI样本现在存储在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HealthKit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中央存储库中</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">让我们看看是否可以找到他。</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开“健康”应用程序，点击“健康数据”选项卡，在表格视图中单击“身体测量”，然后单击“身体质量指数”。</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/953/802/724/953802724c0ccad14b5184bd8b01b17f.png" alt="图片" width="281" height="500"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN434978/">https://habr.com/ru/post/zh-CN434978/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN434968/index.html">关于名称空间的一些事情</a></li>
<li><a href="../zh-CN434970/index.html">关于IT业务等</a></li>
<li><a href="../zh-CN434972/index.html">如果您根本不喜欢如何编写单元测试</a></li>
<li><a href="../zh-CN434974/index.html">使用配置格式1C：企业</a></li>
<li><a href="../zh-CN434976/index.html">ITMO University Fablab：为有创造力的人提供DIY协作-显示内部内容</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>