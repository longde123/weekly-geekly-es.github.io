<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’½ ğŸ‘‰ğŸ» ğŸ‰ 9 alternatif untuk tim yang buruk (pola desain) ğŸš› ğŸ½ ğŸš </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Apa ini dan mengapa? 
 Saat mendesain, pengembang mungkin menghadapi masalah: makhluk dan benda mungkin memiliki kemampuan berbeda dalam kombinasi ber...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>9 alternatif untuk tim yang buruk (pola desain)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439506/"><img src="https://habrastorage.org/getpro/habr/post_images/986/ab5/0b3/986ab50b34cc8a3453a622333411cc46.png" alt="gambar"><br><br><h3>  Apa ini dan mengapa? </h3><br>  Saat mendesain, pengembang mungkin menghadapi masalah: makhluk dan benda mungkin memiliki kemampuan berbeda dalam kombinasi berbeda.  Katak melompat dan berenang, bebek berenang dan terbang, tetapi tidak dengan berat, dan katak bisa terbang dengan dahan dan bebek.  Karenanya, lebih mudah untuk beralih dari warisan ke komposisi dan menambah kemampuan secara dinamis.  Kebutuhan untuk menghidupkan katak terbang menyebabkan penolakan yang tidak dibenarkan atas metode kemampuan dan penghapusan kode mereka dalam tim di salah satu implementasi.  Ini dia: <a name="habracut"></a><br><br><pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CastSpellCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span> (source, target, spell) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source = source; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.target = target; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.spell = spell; } execute () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> spellAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source.getAbility(SpellCastAbility); <span class="hljs-comment"><span class="hljs-comment">//      if (!cond) return error if (spellAbility == null) { throw new Error('NoSpellCastAbility'); } this.addChildren(new PayManaCommand(this.source, this.spell.manaCost)); this.addChildren(this.spell.getCommands(this.source, this.target)); //   : healthAbility.health = Math.max( 0, resultHealth ); } } // : async onMeleeHit (meleeHitCommand) { await view.drawMeleeHit( meleeHitCommand.source, meleeHitCommand.target ); } async onDealDamage (dealDamageCommand) { await view.showDamageNumbers( dealDamageCommand.target, dealDamageCommand.damage ); }</span></span></code> </pre> <br><h3>  Apa yang bisa dilakukan? </h3><br>  Pertimbangkan beberapa pendekatan yang berbeda sifatnya: <br><br><h4>  Pengamat </h4><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Executor</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Observer</span></span></span><span class="hljs-class"> </span></span>{<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animator</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Observer</span></span></span><span class="hljs-class"> </span></span>{<span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>}</code> </pre><br>  Solusi klasik yang terkenal bagi para programmer.  Anda hanya perlu mengubahnya minimal untuk memeriksa nilai yang dikembalikan oleh pengamat: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.listeners.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result, listener</span></span></span><span class="hljs-function">) =&gt;</span></span> result &amp;&amp; listener(action), <span class="hljs-literal"><span class="hljs-literal">true</span></span>)</code> </pre> <br>  Kerugian: pengamat harus berlangganan ke acara dalam urutan yang benar. <br><br>  Jika Anda melakukan penanganan kesalahan, animator juga akan dapat menampilkan animasi dari tindakan yang gagal.  Anda dapat memberikan nilai sebelumnya kepada pengamat, secara konseptual, solusinya tetap sama.  Apakah metode pengamat atau fungsi panggilan balik dipanggil, apakah loop biasa digunakan dan bukan konvolusi, detailnya tidak begitu signifikan. <br><br><h4>  Tinggalkan apa adanya </h4><br>  Dan memang.  Pendekatan saat ini memiliki kekurangan dan kelebihan: <br><br><ol><li>  Menguji kemampuan untuk menjalankan perintah membutuhkan eksekusi perintah </li><li>  Argumen dalam urutan yang berubah, kondisi, awalan metode terprogram </li><li>  Loop dependensi (perintah &lt;mantra &lt;perintah) </li><li>  Entitas tambahan untuk setiap tindakan (metode digantikan oleh metode, kelas dan konstruktornya) </li><li>  Pengetahuan dan tindakan berlebihan dari masing-masing tim: dari mekanika game hingga kesalahan sinkronisasi dan manipulasi langsung properti orang lain </li><li>  Antarmuka menyesatkan (mengeksekusi tidak hanya panggilan, tetapi juga menambahkan perintah melalui addChildren; yang, jelas melakukan sebaliknya) </li><li>  Kebutuhan yang meragukan dan implementasi instruksi rekursif per se </li><li>  Kelas dispatcher, jika ada, tidak menjalankan fungsinya </li><li>  [+] Diduga satu-satunya cara untuk menghidupkan dalam praktik, jika animasinya memerlukan data lengkap (ditunjukkan sebagai alasan utama) </li><li>  [+] Mungkin alasan lain </li></ol><br>  Beberapa kekurangan dapat ditangani secara terpisah, tetapi sisanya membutuhkan perubahan yang lebih drastis. <br><br><h4>  ad hoc </h4><br><ul><li>  Kondisi untuk pelaksanaan tim, terutama mekanisme permainan, harus dikeluarkan dari tim dan dieksekusi secara terpisah.  Kondisi dapat berubah dalam runtime, dan menyoroti tombol tidak aktif dalam warna abu-abu terjadi dalam praktik jauh sebelum bekerja pada animasi dimulai, belum lagi logika.  Untuk menghindari penyalinan, mungkin masuk akal untuk menyimpan kondisi umum dalam prototipe kemampuan. </li><li>  Metode pengembalian, dikombinasikan dengan paragraf sebelumnya, kebutuhan untuk pemeriksaan tersebut akan hilang: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> spellAbility = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.source.getAbility(SpellCastAbility); <span class="hljs-comment"><span class="hljs-comment">//      if (!cond) return error if (spellAbility == null) { throw new Error('NoSpellCastAbility'); }</span></span></code> </pre> <br>  Mesin javascript itu sendiri akan menampilkan TypeError yang benar ketika metode ini keliru disebut. </li><li>  Tim juga tidak membutuhkan pengetahuan seperti itu: <br><br><pre> <code class="javascript hljs">healthAbility.health = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.max( <span class="hljs-number"><span class="hljs-number">0</span></span>, resultHealth );</code> </pre> </li><li>  Untuk memecahkan masalah argumen yang mengubah tempat, mereka bisa dilewatkan oleh objek. </li><li>  Meskipun kode panggilan tidak tersedia untuk dipelajari, tampaknya sebagian besar kekurangan tumbuh karena cara yang tidak optimal dalam memohon tindakan game.  Misalnya, penangan tombol mengakses entitas tertentu.  Oleh karena itu, menggantinya di handler dengan perintah khusus tampaknya cukup alami.  Jika Anda memiliki operator, jauh lebih mudah untuk memanggil animasi setelah tindakan, Anda dapat mentransfer informasi yang sama dengannya, sehingga tidak akan kekurangan data. </li></ul><br><h4>  Antrian </h4><br>  Untuk menampilkan animasi tindakan setelah tindakan selesai, cukup menambahkannya ke antrian dan menjalankannya kira-kira seperti pada solusi 1. <br><br><pre> <code class="javascript hljs">[ [ walkRequirements, walkAction, walkAnimation ], [ castRequirements, castAction, castAnimation ], <span class="hljs-comment"><span class="hljs-comment">// ... ]</span></span></code> </pre> <br>  Entah entitas mana yang ada dalam array: fungsi dilarang dengan parameter yang diperlukan, instance kelas khusus, atau objek biasa. <br>  Nilai dari solusi tersebut adalah kesederhanaan dan transparansi, mudah untuk membuat jendela geser untuk melihat N perintah terakhir. <br><br>  Sangat cocok untuk prototyping dan debugging. <br><br><h4>  Kelas pengganti </h4><br>  Kami membuat kelas animasi untuk kemampuan. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MovementAbility</span></span></span><span class="hljs-class"> </span></span>{ walk (...args) { <span class="hljs-comment"><span class="hljs-comment">// action } } class AnimatedMovementAbility { walk (...args) { // animation } }</span></span></code> </pre><br>  Jika tidak mungkin untuk membuat perubahan pada kelas panggilan, kami mewarisi darinya atau menghias metode yang diinginkan sehingga memanggil animasi.  Atau kami mengirimkan animasi alih-alih kemampuan, mereka memiliki antarmuka yang sama. <br><br>  Sangat cocok ketika Anda membutuhkan serangkaian metode yang hampir sama, mereka dapat secara otomatis diperiksa dan diuji. <br><br><h4>  Kombinasi Metode </h4><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AnimatedMovementAbility = combinedClass(MovementAbility, { [<span class="hljs-string"><span class="hljs-string">'*:before'</span></span>] (method, ...args) { <span class="hljs-comment"><span class="hljs-comment">// call requirements }, ['*:after'] (method, ...args) { // call animations } })</span></span></code> </pre> <br>  Ini akan menjadi peluang yang menarik dengan dukungan bahasa ibu. <br>  Baik untuk menggunakannya jika opsi ini lebih produktif, walaupun proxy sebenarnya dibutuhkan. <br><br><h4>  Proksi </h4><br>  Kami membungkus kemampuan dalam proxy, menangkap metode dalam getter. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Proxy</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MovementAbility, {<span class="hljs-comment"><span class="hljs-comment">/* handler */</span></span>})</code> </pre> <br>  Kerugian: berkali-kali lebih lambat dari panggilan biasa, yang tidak begitu penting untuk animasi.  Pada server yang memproses jutaan objek, perlambatan akan terlihat, tetapi server tidak perlu animasi. <br><br><h4>  Janji </h4><br>  Anda dapat membuat rantai dari Janji, tetapi ada opsi lain (ES2018): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> action <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> actionDispatcher.getActions()) { <span class="hljs-comment"><span class="hljs-comment">// }</span></span></code> </pre> <br>  getActions mengembalikan iterator tindakan asinkron.  Metode iterator selanjutnya mengembalikan Janji yang Ditangguhkan dari tindakan selanjutnya.  Setelah memproses acara dari pengguna dan server, kami memanggil resolusinya (), buat janji baru. <br><br><h4>  Tim yang lebih baik </h4><br>  Buat objek seperti ini: <br><br><pre> <code class="javascript hljs">{actor, ability, method, options}</code> </pre> <br>  Kode diturunkan untuk memeriksa dan memanggil metode kemampuan dengan parameter.  Opsi termudah dan paling produktif. <br><br><h4>  Catatan </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sumber sampel perintah</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id439506/">https://habr.com/ru/post/id439506/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id439496/index.html">Cara penagihan dilakukan di sana: ketika pelanggan dan pengembang berbicara bahasa yang berbeda</a></li>
<li><a href="../id439498/index.html">Pada perangkat keras mana untuk menganalisis sejumlah besar informasi?</a></li>
<li><a href="../id439500/index.html">Mengapa captcha menjadi begitu rumit</a></li>
<li><a href="../id439502/index.html">Perilaku dan kebenaran yang tidak terdefinisi tidak didefinisikan</a></li>
<li><a href="../id439504/index.html">Apakah tim Anda membutuhkan Insinyur Data?</a></li>
<li><a href="../id439508/index.html">Mitap tentang Pengembangan Sumber Terbuka di Moskow</a></li>
<li><a href="../id439510/index.html">Sistem kontrol terdistribusi tinggi dari pembangkit listrik tenaga nuklir modern</a></li>
<li><a href="../id439512/index.html">Usia dinosaurus atau reasuransi yang diverifikasi secara hukum?</a></li>
<li><a href="../id439514/index.html">Replikasi Tarantool: Konfigurasi dan Penggunaan</a></li>
<li><a href="../id439516/index.html">00110001 00110100 00101110 00110000 00110010</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>