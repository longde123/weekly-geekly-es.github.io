<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧔🏾 👧🏻 ⌚️ Extensor óptico HDMI. 300 metros 🥔 🤨 🙋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Buen dia, Habr! 



 Desarrollo de cable de extensión de fibra óptica HDMI para 300 metros. Denegación del canal de retorno (transmisión de datos en u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Extensor óptico HDMI. 300 metros</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473796/"> Buen dia, Habr! <br><br><img src="https://habrastorage.org/webt/mn/v0/c1/mnv0c1yzdk47cytsckizxbgnvxk.jpeg"><br><br>  Desarrollo de cable de extensión de fibra óptica HDMI para 300 metros.  Denegación del canal de retorno (transmisión de datos en un cable de fibra óptica).  Clonación de EDID desde el monitor. <br><a name="habracut"></a><br>  El estándar HDMI es ampliamente utilizado en muchas áreas donde desea mostrar la imagen en la pantalla.  Personalmente, pude transmitir la señal a través de un cable HDMI a una distancia de 10 metros (simplemente ya no era necesario).  Creo que sin pérdida de calidad, puede transferir la imagen a una distancia de 30-40 m.  Las principales desventajas en el caso de brochado de un cable de este tipo son su diámetro y tamaño, directamente, de los conectores.  La forma más fácil de excluir el cable es usar un cable de extensión inalámbrico, creo que será posible alcanzar los 100-150 metros, pero no lo diré con certeza.  Desafortunadamente, no todos los objetos, por una razón u otra, permiten el uso de redes inalámbricas.  ¿Y si necesitas aún más? <br><br><img src="https://habrastorage.org/webt/a0/bl/n5/a0bln5vodfqydql1puhfo7gwdjw.jpeg"><br>  <i>Fig.1.</i>  <i>Cable HDMI y óptica (LC)</i> <br><br>  Por supuesto, la óptica probablemente no sea la mejor opción para transmitir video, pero cuando se usan computadoras y monitores estacionarios, ni siquiera es nada.  La primera tesis es el diámetro del cable óptico (en mi caso, es de 2-3 mm) y el diámetro del conector del cable de fibra óptica.  El segundo es, por supuesto, la distancia.  Mirando hacia el futuro, diré que las pruebas se llevaron a cabo en un cable de 300 m de diámetro (externo) - 3 mm. <br><br><h4>  Base elemental </h4><br>  Al desarrollar la base del elemento, la elección, inesperadamente, recayó en la empresa china SiFotonics, que se especializa en este tipo de equipos.  Para empezar, estudiamos sus productos y obtuvimos dos errores, que conectamos con un cable óptico de trescientos metros y nos aseguramos de que todo funcionara perfectamente.  También tienen receptores / transmisores ópticos SFP (ROSA / TOSA), serializadores / deserializadores, controladores, etc. <br><br><h4>  Principio de funcionamiento </h4><br>  Para conectar y operar los dispositivos, debe conectar dos cables ópticos y aplicar alimentación (cable microUSB).  Si damos una analogía con un cable HDMI convencional, en el que hay I2C para intercambiar una tabla EDID, entonces todo es lo mismo, un canal para la transferencia de datos, el segundo, para transferir EDID desde el monitor a la tarjeta de video.  Los datos se transmiten a una velocidad de 10 Gbps.  Al arrancar el cable del canal de retorno, la imagen desaparece invariablemente.  En este momento, surgieron algunas dudas, y si se están transmitiendo datos de servicio o marcas de sincronización en el canal de retorno, o tal vez los dispositivos están monitoreando conexiones entre sí ... <br><br><img src="https://habrastorage.org/webt/kr/zc/jj/krzcjjntpkohogy_33h8uf0nksk.png"><br>  <i>Fig.2.</i>  <i>La composición de los módulos.</i> <br><br>  La primera iteración de la placa, también es un diseño, resultó ser de 20X45 mm de tamaño.  Con un conector de alimentación "lateral", para facilitar la distribución de buses de energía en los vertederos.  Total de 4 capas resultaron.  Por qué esta configuración de PCB es mala, escribiré más tarde.  Los desarrolladores de depuración complicados usaron 0201 pasivo, lo que no quería hacer, así que usé 0402 y una papilla de condensador debajo del chip. <br><br><img src="https://habrastorage.org/webt/qj/90/cf/qj90cfepirzf-imyui0ouuutqu8.png"><br>  <i>Fig.3.</i>  <i>Modelo 3D del diseño de la placa del módulo fuente</i> <br><br>  Como escribí anteriormente, mi tarea no era solo hacer una pareja con una distancia de trabajo de 300 metros, sino también eliminar el canal de retorno de la óptica.  Incluso en la etapa de desarrollo, decidimos no participar en la finalización del software chino (aunque amablemente se nos proporcionaron todas las fuentes), ya que, en primer lugar, se trata de un montón de líneas de código incomprensibles en un compilador incomprensible, y en segundo lugar, SiFotonics puede suministrar chips flasheados, que Es muy conveniente, ya que es muy difícil flashear dispositivos como parte de la producción.  Para que el lector no piense que estoy exagerando al hablar de las dificultades, le daré una foto del soporte de programación. <br><br><img src="https://habrastorage.org/webt/n_/nm/fn/n_nmfnhsezuqt1q-ly4tg3kewms.jpeg"><br>  <i>Fig.4.</i>  <i>Soporte para programación y diagnóstico.</i> <br><br>  Sí, sí, como probablemente ya haya adivinado, los contactos JTAG para programación se envían a contactos microUSB y a algunos contactos HDMI que solían ser GND.  Debo decir de inmediato que esto no afectó la calidad del trabajo.  Entonces, ponte de pie.  Para programar el chip, primero debe ensamblar un circuito del soporte y poner el chip en modo de programación utilizando un software especializado.  Luego, necesita ensamblar otro circuito y usar el otro software para flashear la placa.  Después de eso, pasa automáticamente al modo de trabajo. <br>  En general, me parece que esto no es práctico incluso para 1000 piezas. <br><br>  Volvamos al canal inverso.  Para almacenar tablas EDID, necesitamos una EEPROM, y necesitaremos cambiar su dirección sobre la marcha.  Tomó el N24C02UDTG en un paquete miniatura US-8.  Para programarlo, uso el microcontrolador STM32F031G4U6, también en el paquete más pequeño que se puede encontrar en el dominio público: UFQFPN-28.  También tomé el interruptor de encendido TPS27081ADDCR.  Y esto es lo que obtuve: <br><br><img src="https://habrastorage.org/webt/h4/kb/gj/h4kbgj-h9ntrucsztkaiurs06do.jpeg"><br>  <i>Fig.5.</i>  <i>Esquema de implementación de clonación EDID</i> <br><br>  La idea es la siguiente.  Este circuito se implementa en el módulo de transmisión (el que se conecta a la PC).  Para clonar un monitor EDID, el dispositivo se conecta al monitor.  Por defecto, la dirección EEPROM en nuestro módulo no debe coincidir con la dirección EEPROM en el monitor (durante la lectura), es decir, puede ser cualquier otra, por ejemplo, hice que el tramo A0 sea manejable.  En el momento de la conexión al monitor, se suministra energía a la EEPROM y el tramo A0 se eleva a la resistencia lógica "0".  Dos EEPROM con las mismas direcciones están colgadas en el bus i2c, pero esto no es crítico, ya que todavía no estamos trabajando con ellas.  En mi circuito también hay un botón y un LED para indicar la alimentación / firmware EDID / errores.  Una pulsación breve del botón cambia la dirección y permite que el microcontrolador comience a leer / escribir EDID.  Restablecemos la EEPROM con alimentación (por si acaso) cuando recibimos la señal del botón, leemos el EDID del monitor e inmediatamente lo escribimos en nuestro chip.  Parpadeamos 3 veces con el LED y apagamos la EEPROM.  La lectura / escritura ocurre instantáneamente, por lo que se produce un retraso forzado por el parpadeo, de modo que el usuario comprende que algo está sucediendo.  Es decir, comenzamos a parpadear cuando ya es posible dejarlo ir.  Si algo está mal, no encienda el LED. <br><br>  Luego, conecte el módulo a la PC e inmediatamente vea el nuevo monitor en la configuración.  El problema está resuelto. <br><br>  Para programar el microcontrolador trajo el bus SWD. <br><br><img src="https://habrastorage.org/webt/oe/xl/ba/oexlbaajt8temn8aq4sdthg29dy.jpeg"><br>  <i>Fig.6.</i>  <i>Reverso de la placa del módulo</i> <br><br><h4>  Caracteristicas </h4><br>  Después de todo el trabajo realizado con la clonación EDID, eliminé el canal óptico inverso y todo funcionó a la perfección.  En estos experimentos, el poder provino de una PC USB.  Durante el arranque, la computadora (en cualquier caso la mía) apaga la alimentación USB por un momento y la imagen del BIOS parpadea en el monitor; esto no es crítico.  Luego saqué los módulos de canal inverso de los dispositivos y después de este parpadeo, la imagen dejó de recuperarse.  Y esto se debió precisamente a la falta de un módulo TOSA en el dispositivo del monitor.  Traté de emular la presencia de un láser, pero todo fue en vano.  Estoy casi seguro de que este problema puede resolverse con el firmware, pero decidimos no entrar en él.  Un milagro ocurrió cuando conecté ambos dispositivos (receptor y transmisor) a las fuentes de alimentación (como, por cierto, se indicó en la declaración de trabajo).  La imagen dejó de parpadear y, en consecuencia, desapareció.  Si distorsiona la potencia de los dispositivos durante el funcionamiento, la imagen se restaura sin problemas. <br><br><img src="https://habrastorage.org/webt/fz/00/35/fz0035l-7lplz-hgibwwnnkma8m.png"><br>  <i>Fig.7.</i>  <i>Circuito de conmutación del módulo transmisor (láser)</i> <br><br>  Ahora volvamos a la configuración de la PCB y al conector de alimentación lateral.  Esta implementación fue inicialmente inconveniente y adecuada solo para el diseño.  En el dispositivo de liberación, reduje el ancho de la placa a 16,3 mm y puse el conector de alimentación en lugar del módulo óptico del canal inverso; esto le permitirá incluir varios dispositivos en una tarjeta de video.  De lo contrario, el conector de alimentación interfirió conmigo y la placa era muy ancha. <br><br><img src="https://habrastorage.org/webt/9l/jd/_4/9ljd_4un4tsnidmubcxb2pjgiz4.jpeg"><br>  <i>Fig.8.</i>  <i>Receptor estrecho y placas transmisoras</i> <br><br>  Aquí, por supuesto, hubo muchos cambios de cableado y reordenamiento de componentes.  Los rangos de suministro se rehicieron por completo para optimizar estos tamaños y transferir el conector microUSB.  Como puede suponer, los casos para ambos dispositivos son idénticos, por lo tanto, la configuración de la placa, los conectores y el módulo óptico se encuentran en la misma posición.  El cuerpo está fresado en aluminio y es un disipador de calor para el procesador y el controlador.  Las protuberancias para estos componentes se fresan en el interior, por lo que también se ubican de la misma manera. <br><br><h4>  Conclusión </h4><br>  Por el momento, se sueldan cuatro pares de dispositivos, se realizan pruebas con un cable largo en diferentes monitores y televisores.  No hay quejas sobre el trabajo.  Verificamos solo en fullHD y a continuación. <br><br>  Gracias y hasta pronto! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/473796/">https://habr.com/ru/post/473796/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../473784/index.html">¿Cómo escribir un contrato inteligente para WebAssembly en una red Ontology? Parte 2: C ++</a></li>
<li><a href="../473786/index.html">La inscripción para el hackathon en Riga está terminando. Premio - entrenamiento a corto plazo en el PhysTech</a></li>
<li><a href="../473788/index.html">Las microproteínas descubren aspectos desconocidos de la biología moderna.</a></li>
<li><a href="../473790/index.html">Splines en gráficos 3D, la opción más automatizada</a></li>
<li><a href="../473794/index.html">Phishing móvil: amenazas infinitas</a></li>
<li><a href="../473798/index.html">Programación orientada al protocolo. Parte 1</a></li>
<li><a href="../473800/index.html">Bio radar, dron de cartón y salchicha voladora - Nikita Kalinovsky sobre las buenas y malas tecnologías de búsqueda</a></li>
<li><a href="../473802/index.html">Alain Bombar - Caída después del triunfo</a></li>
<li><a href="../473804/index.html">¿Cuál es el salario de Junior QA?</a></li>
<li><a href="../473806/index.html">Este es el tipo de internet que queremos: cómo las redes sociales se convirtieron en un arma mortal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>