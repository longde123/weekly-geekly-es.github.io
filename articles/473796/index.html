<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title> ю 锔 Extensor 贸ptico HDMI. 300 metros  え </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Buen dia, Habr! 



 Desarrollo de cable de extensi贸n de fibra 贸ptica HDMI para 300 metros. Denegaci贸n del canal de retorno (transmisi贸n de datos en u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Extensor 贸ptico HDMI. 300 metros</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473796/"> Buen dia, Habr! <br><br><img src="https://habrastorage.org/webt/mn/v0/c1/mnv0c1yzdk47cytsckizxbgnvxk.jpeg"><br><br>  Desarrollo de cable de extensi贸n de fibra 贸ptica HDMI para 300 metros.  Denegaci贸n del canal de retorno (transmisi贸n de datos en un cable de fibra 贸ptica).  Clonaci贸n de EDID desde el monitor. <br><a name="habracut"></a><br>  El est谩ndar HDMI es ampliamente utilizado en muchas 谩reas donde desea mostrar la imagen en la pantalla.  Personalmente, pude transmitir la se帽al a trav茅s de un cable HDMI a una distancia de 10 metros (simplemente ya no era necesario).  Creo que sin p茅rdida de calidad, puede transferir la imagen a una distancia de 30-40 m.  Las principales desventajas en el caso de brochado de un cable de este tipo son su di谩metro y tama帽o, directamente, de los conectores.  La forma m谩s f谩cil de excluir el cable es usar un cable de extensi贸n inal谩mbrico, creo que ser谩 posible alcanzar los 100-150 metros, pero no lo dir茅 con certeza.  Desafortunadamente, no todos los objetos, por una raz贸n u otra, permiten el uso de redes inal谩mbricas.  驴Y si necesitas a煤n m谩s? <br><br><img src="https://habrastorage.org/webt/a0/bl/n5/a0bln5vodfqydql1puhfo7gwdjw.jpeg"><br>  <i>Fig.1.</i>  <i>Cable HDMI y 贸ptica (LC)</i> <br><br>  Por supuesto, la 贸ptica probablemente no sea la mejor opci贸n para transmitir video, pero cuando se usan computadoras y monitores estacionarios, ni siquiera es nada.  La primera tesis es el di谩metro del cable 贸ptico (en mi caso, es de 2-3 mm) y el di谩metro del conector del cable de fibra 贸ptica.  El segundo es, por supuesto, la distancia.  Mirando hacia el futuro, dir茅 que las pruebas se llevaron a cabo en un cable de 300 m de di谩metro (externo) - 3 mm. <br><br><h4>  Base elemental </h4><br>  Al desarrollar la base del elemento, la elecci贸n, inesperadamente, recay贸 en la empresa china SiFotonics, que se especializa en este tipo de equipos.  Para empezar, estudiamos sus productos y obtuvimos dos errores, que conectamos con un cable 贸ptico de trescientos metros y nos aseguramos de que todo funcionara perfectamente.  Tambi茅n tienen receptores / transmisores 贸pticos SFP (ROSA / TOSA), serializadores / deserializadores, controladores, etc. <br><br><h4>  Principio de funcionamiento </h4><br>  Para conectar y operar los dispositivos, debe conectar dos cables 贸pticos y aplicar alimentaci贸n (cable microUSB).  Si damos una analog铆a con un cable HDMI convencional, en el que hay I2C para intercambiar una tabla EDID, entonces todo es lo mismo, un canal para la transferencia de datos, el segundo, para transferir EDID desde el monitor a la tarjeta de video.  Los datos se transmiten a una velocidad de 10 Gbps.  Al arrancar el cable del canal de retorno, la imagen desaparece invariablemente.  En este momento, surgieron algunas dudas, y si se est谩n transmitiendo datos de servicio o marcas de sincronizaci贸n en el canal de retorno, o tal vez los dispositivos est谩n monitoreando conexiones entre s铆 ... <br><br><img src="https://habrastorage.org/webt/kr/zc/jj/krzcjjntpkohogy_33h8uf0nksk.png"><br>  <i>Fig.2.</i>  <i>La composici贸n de los m贸dulos.</i> <br><br>  La primera iteraci贸n de la placa, tambi茅n es un dise帽o, result贸 ser de 20X45 mm de tama帽o.  Con un conector de alimentaci贸n "lateral", para facilitar la distribuci贸n de buses de energ铆a en los vertederos.  Total de 4 capas resultaron.  Por qu茅 esta configuraci贸n de PCB es mala, escribir茅 m谩s tarde.  Los desarrolladores de depuraci贸n complicados usaron 0201 pasivo, lo que no quer铆a hacer, as铆 que us茅 0402 y una papilla de condensador debajo del chip. <br><br><img src="https://habrastorage.org/webt/qj/90/cf/qj90cfepirzf-imyui0ouuutqu8.png"><br>  <i>Fig.3.</i>  <i>Modelo 3D del dise帽o de la placa del m贸dulo fuente</i> <br><br>  Como escrib铆 anteriormente, mi tarea no era solo hacer una pareja con una distancia de trabajo de 300 metros, sino tambi茅n eliminar el canal de retorno de la 贸ptica.  Incluso en la etapa de desarrollo, decidimos no participar en la finalizaci贸n del software chino (aunque amablemente se nos proporcionaron todas las fuentes), ya que, en primer lugar, se trata de un mont贸n de l铆neas de c贸digo incomprensibles en un compilador incomprensible, y en segundo lugar, SiFotonics puede suministrar chips flasheados, que Es muy conveniente, ya que es muy dif铆cil flashear dispositivos como parte de la producci贸n.  Para que el lector no piense que estoy exagerando al hablar de las dificultades, le dar茅 una foto del soporte de programaci贸n. <br><br><img src="https://habrastorage.org/webt/n_/nm/fn/n_nmfnhsezuqt1q-ly4tg3kewms.jpeg"><br>  <i>Fig.4.</i>  <i>Soporte para programaci贸n y diagn贸stico.</i> <br><br>  S铆, s铆, como probablemente ya haya adivinado, los contactos JTAG para programaci贸n se env铆an a contactos microUSB y a algunos contactos HDMI que sol铆an ser GND.  Debo decir de inmediato que esto no afect贸 la calidad del trabajo.  Entonces, ponte de pie.  Para programar el chip, primero debe ensamblar un circuito del soporte y poner el chip en modo de programaci贸n utilizando un software especializado.  Luego, necesita ensamblar otro circuito y usar el otro software para flashear la placa.  Despu茅s de eso, pasa autom谩ticamente al modo de trabajo. <br>  En general, me parece que esto no es pr谩ctico incluso para 1000 piezas. <br><br>  Volvamos al canal inverso.  Para almacenar tablas EDID, necesitamos una EEPROM, y necesitaremos cambiar su direcci贸n sobre la marcha.  Tom贸 el N24C02UDTG en un paquete miniatura US-8.  Para programarlo, uso el microcontrolador STM32F031G4U6, tambi茅n en el paquete m谩s peque帽o que se puede encontrar en el dominio p煤blico: UFQFPN-28.  Tambi茅n tom茅 el interruptor de encendido TPS27081ADDCR.  Y esto es lo que obtuve: <br><br><img src="https://habrastorage.org/webt/h4/kb/gj/h4kbgj-h9ntrucsztkaiurs06do.jpeg"><br>  <i>Fig.5.</i>  <i>Esquema de implementaci贸n de clonaci贸n EDID</i> <br><br>  La idea es la siguiente.  Este circuito se implementa en el m贸dulo de transmisi贸n (el que se conecta a la PC).  Para clonar un monitor EDID, el dispositivo se conecta al monitor.  Por defecto, la direcci贸n EEPROM en nuestro m贸dulo no debe coincidir con la direcci贸n EEPROM en el monitor (durante la lectura), es decir, puede ser cualquier otra, por ejemplo, hice que el tramo A0 sea manejable.  En el momento de la conexi贸n al monitor, se suministra energ铆a a la EEPROM y el tramo A0 se eleva a la resistencia l贸gica "0".  Dos EEPROM con las mismas direcciones est谩n colgadas en el bus i2c, pero esto no es cr铆tico, ya que todav铆a no estamos trabajando con ellas.  En mi circuito tambi茅n hay un bot贸n y un LED para indicar la alimentaci贸n / firmware EDID / errores.  Una pulsaci贸n breve del bot贸n cambia la direcci贸n y permite que el microcontrolador comience a leer / escribir EDID.  Restablecemos la EEPROM con alimentaci贸n (por si acaso) cuando recibimos la se帽al del bot贸n, leemos el EDID del monitor e inmediatamente lo escribimos en nuestro chip.  Parpadeamos 3 veces con el LED y apagamos la EEPROM.  La lectura / escritura ocurre instant谩neamente, por lo que se produce un retraso forzado por el parpadeo, de modo que el usuario comprende que algo est谩 sucediendo.  Es decir, comenzamos a parpadear cuando ya es posible dejarlo ir.  Si algo est谩 mal, no encienda el LED. <br><br>  Luego, conecte el m贸dulo a la PC e inmediatamente vea el nuevo monitor en la configuraci贸n.  El problema est谩 resuelto. <br><br>  Para programar el microcontrolador trajo el bus SWD. <br><br><img src="https://habrastorage.org/webt/oe/xl/ba/oexlbaajt8temn8aq4sdthg29dy.jpeg"><br>  <i>Fig.6.</i>  <i>Reverso de la placa del m贸dulo</i> <br><br><h4>  Caracteristicas </h4><br>  Despu茅s de todo el trabajo realizado con la clonaci贸n EDID, elimin茅 el canal 贸ptico inverso y todo funcion贸 a la perfecci贸n.  En estos experimentos, el poder provino de una PC USB.  Durante el arranque, la computadora (en cualquier caso la m铆a) apaga la alimentaci贸n USB por un momento y la imagen del BIOS parpadea en el monitor; esto no es cr铆tico.  Luego saqu茅 los m贸dulos de canal inverso de los dispositivos y despu茅s de este parpadeo, la imagen dej贸 de recuperarse.  Y esto se debi贸 precisamente a la falta de un m贸dulo TOSA en el dispositivo del monitor.  Trat茅 de emular la presencia de un l谩ser, pero todo fue en vano.  Estoy casi seguro de que este problema puede resolverse con el firmware, pero decidimos no entrar en 茅l.  Un milagro ocurri贸 cuando conect茅 ambos dispositivos (receptor y transmisor) a las fuentes de alimentaci贸n (como, por cierto, se indic贸 en la declaraci贸n de trabajo).  La imagen dej贸 de parpadear y, en consecuencia, desapareci贸.  Si distorsiona la potencia de los dispositivos durante el funcionamiento, la imagen se restaura sin problemas. <br><br><img src="https://habrastorage.org/webt/fz/00/35/fz0035l-7lplz-hgibwwnnkma8m.png"><br>  <i>Fig.7.</i>  <i>Circuito de conmutaci贸n del m贸dulo transmisor (l谩ser)</i> <br><br>  Ahora volvamos a la configuraci贸n de la PCB y al conector de alimentaci贸n lateral.  Esta implementaci贸n fue inicialmente inconveniente y adecuada solo para el dise帽o.  En el dispositivo de liberaci贸n, reduje el ancho de la placa a 16,3 mm y puse el conector de alimentaci贸n en lugar del m贸dulo 贸ptico del canal inverso; esto le permitir谩 incluir varios dispositivos en una tarjeta de video.  De lo contrario, el conector de alimentaci贸n interfiri贸 conmigo y la placa era muy ancha. <br><br><img src="https://habrastorage.org/webt/9l/jd/_4/9ljd_4un4tsnidmubcxb2pjgiz4.jpeg"><br>  <i>Fig.8.</i>  <i>Receptor estrecho y placas transmisoras</i> <br><br>  Aqu铆, por supuesto, hubo muchos cambios de cableado y reordenamiento de componentes.  Los rangos de suministro se rehicieron por completo para optimizar estos tama帽os y transferir el conector microUSB.  Como puede suponer, los casos para ambos dispositivos son id茅nticos, por lo tanto, la configuraci贸n de la placa, los conectores y el m贸dulo 贸ptico se encuentran en la misma posici贸n.  El cuerpo est谩 fresado en aluminio y es un disipador de calor para el procesador y el controlador.  Las protuberancias para estos componentes se fresan en el interior, por lo que tambi茅n se ubican de la misma manera. <br><br><h4>  Conclusi贸n </h4><br>  Por el momento, se sueldan cuatro pares de dispositivos, se realizan pruebas con un cable largo en diferentes monitores y televisores.  No hay quejas sobre el trabajo.  Verificamos solo en fullHD y a continuaci贸n. <br><br>  Gracias y hasta pronto! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/473796/">https://habr.com/ru/post/473796/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../473784/index.html">驴C贸mo escribir un contrato inteligente para WebAssembly en una red Ontology? Parte 2: C ++</a></li>
<li><a href="../473786/index.html">La inscripci贸n para el hackathon en Riga est谩 terminando. Premio - entrenamiento a corto plazo en el PhysTech</a></li>
<li><a href="../473788/index.html">Las microprote铆nas descubren aspectos desconocidos de la biolog铆a moderna.</a></li>
<li><a href="../473790/index.html">Splines en gr谩ficos 3D, la opci贸n m谩s automatizada</a></li>
<li><a href="../473794/index.html">Phishing m贸vil: amenazas infinitas</a></li>
<li><a href="../473798/index.html">Programaci贸n orientada al protocolo. Parte 1</a></li>
<li><a href="../473800/index.html">Bio radar, dron de cart贸n y salchicha voladora - Nikita Kalinovsky sobre las buenas y malas tecnolog铆as de b煤squeda</a></li>
<li><a href="../473802/index.html">Alain Bombar - Ca铆da despu茅s del triunfo</a></li>
<li><a href="../473804/index.html">驴Cu谩l es el salario de Junior QA?</a></li>
<li><a href="../473806/index.html">Este es el tipo de internet que queremos: c贸mo las redes sociales se convirtieron en un arma mortal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>