<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ณ ๐คฆ๐ผ ๐บ ููุงู ุทุฑููุฉ ุฃุฎุฑู ูุชุญุณูู ุตูุฑ ุนุงูู ูููุงุก ูุชุทุจููุงุช Java ๐ซ ๐จโ๐จโ๐งโ๐ฆ ๐ฉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุจุฏุฃุช ูุตุฉ ุชุญุณูู ุงูุตูุฑ ูุชุทุจููุงุช ุฌุงูุง ุจููุงู ุงูุฑุจูุน Spring Spring in a Container . ููุงูุด ุงูุฌูุงูุจ ุงููุฎุชููุฉ ูุฅูุดุงุก ุตูุฑ ุนุงูู ูููุงุก ูุชุทุจููุงุช ุงูุชูููุฏ ุงูุฑุจูุน ุ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุงู ุทุฑููุฉ ุฃุฎุฑู ูุชุญุณูู ุตูุฑ ุนุงูู ูููุงุก ูุชุทุจููุงุช Java</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458260/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุจุฏุฃุช ูุตุฉ ุชุญุณูู ุงูุตูุฑ ูุชุทุจููุงุช ุฌุงูุง ุจููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฑุจูุน Spring Spring in a Container</a> .  ููุงูุด ุงูุฌูุงูุจ ุงููุฎุชููุฉ ูุฅูุดุงุก ุตูุฑ ุนุงูู ูููุงุก ูุชุทุจููุงุช ุงูุชูููุฏ ุงูุฑุจูุน ุ ุจูุง ูู ุฐูู ูุถูุฉ ูุซูุฑุฉ ููุงูุชูุงู ูุซู ุชูููู ุญุฌู ุงูุตูุฑ.  ุจุงููุณุจุฉ ุฅูู ูุฑููุง ุ ูุงู ูุฐุง ููุงุณุจูุง ูุนุฏุฉ ุฃุณุจุงุจ ุ ูุฐูู ูุฑุฑูุง ุชุทุจูู ูุฐุง ุงูุญู ุนูู ุทูุจุงุชูุง. </p><br><p style=";text-align:right;direction:rtl">  ููุง ูุญุฏุซ ุบุงูุจูุง ุ ูู ูุชู ุฅููุงุน ูู ุดูุก ูู ุงููุฑุฉ ุงูุฃููู ุ ููุฏ ูุงูุช ููุงู ูุฑูู ุฏูููุฉ ูู ุงููุดุฑูุนุงุช ูุชุนุฏุฏุฉ ุงููุญุฏุงุช ููุญุงููุฉ ูุฏูุน ูู ูุฐุง ุนูู ูุธุงู CI ุ ูุฐูู ุณุชุฌุฏ ูู ูุฐู ุงูููุงูุฉ ุญูุงู ููุฐู ุงููุดููุงุช. </p><br><p style=";text-align:right;direction:rtl">  ุงููุฏู ูู ุงูุชุญุณูู ูู ุชูููู <em>ุงููุฑู</em> ุจูู ุงูุตูุฑ ุงููุงุชุฌุฉ ูู ุงูุชุฌููุน ุฅูู ุงูุชุฌููุน ุ ููุง ูุนุทู ูุชูุฌุฉ ุฌูุฏุฉ ูู ุนูููุฉ ุงูุชุณููู ุงููุณุชูุฑ ุ ูุฐูู ุฅุฐุง ููุช ููุชููุง ุจุชูููู ุญุฌู ุงูุตูุฑุฉ ุนูู ูุฐุง ุงููุญู ุ ููููู ุงูุฑุฌูุน ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงูุงุช</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุฎุฑู</a> ุนูู ุงููุญูุฑ </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ููู ุนููู ุชูุถูุญ ุณุจุจ ููุงูู ุจุดูุก ูุง ุจุงุณุชุฎุฏุงู ุชุทุจูู ุงูุชูููุฏ ูุชุนุฏุฏ ุงูุฃูุชุงุฑ ูุจู ูุถุนู ูู ุงูุตูุฑุฉ ุ ูููููู ุงูุงูุชูุงู ููุฑูุง ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุตู ุทุฑููุฉ ุงูุชุญุณูู</a> .  ุฅุฐุง ุชูููุช ูู ุงูุชุนุฑู ุนูู ุงูููุงูุฉ ูู ูุฏููุฉ Spring ุ ูููููู ูุชุงุจุนุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญู ุงููุดููุงุช ุงูููุฌูุฏุฉ</a> . </p><a name="habracut"></a><br><h1 id="zachem-eto-vse-ili-obratnaya-storona-fat-jara" style=";text-align:right;direction:rtl">  ููุงุฐุง ูุฐุง ูู ุดูุก ุ ุฃู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุฌุฑุฉ ุงูุฏููู </h1><br><p style=";text-align:right;direction:rtl">  ุจุดูู ุงูุชุฑุงุถู ุ ูุฅู ุงูุฌุฑุฉ ุงูุชู ุชูุชุฌูุง Spring Boot ูู ููู ุฌุฑุฉ ูุงุจู ููุชูููุฐ ูุญุชูู ุนูู ุฑูุฒ ุงูุชุทุจูู ูุฌููุน ุชุจุนูุงุชู. </p><br><p style=";text-align:right;direction:rtl"> ููุฒุฉ ูุฐุง ุงูููุฌ ูุงุถุญุฉ: ุฅูู ููุงุณุจ ููุนูู ูุน ููู ูุงุญุฏ ุ ููุฏูู ูู ูุง ุชุญุชุงุฌู ููุชุดุบูู ูู ุฎูุงู <code>java -jar &lt;myapp&gt;.jar</code> .  Dockerfile ุชุงููุฉ ูููุณ ูู ุงููุงุฆุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุฌุงูุจ ุงูุณูุจู ูู ุนุฏู ููุงุกุฉ ุงูุชุฎุฒูู.  ูู ุชุทุจูู ุงูุฅููุงุน ุงูููุงุณููู ุ ูู ุงููุงุถุญ ุฃู ูุณุจุฉ ุงูุดูุฑุงุช ูุงูููุชุจุงุช ูุง ุชุคูุฏ ุงูุดูุฑุฉ ุงูุฎุงุตุฉ ุจูุง.  ุนูู ุณุจูู ุงููุซุงู ุ ุณูู ูุณุชุบุฑู ุชุทุจูู ูุงุฑุบ ูุญุชูู ุนูู ุฌุฒุก ููุจ ูููุชุจุงุช ููุนูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุงูุฐู ูููู ุฅูุดุงุคู ุนุจุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">start.spring.io</a> ุ 20 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุบุงุจุงูุช</a> ุ ูููุง 98ูช ุณุชููู ููุชุจุงุช.  ููุฐู ุงููุณุจุฉ ูุง ุชุชุบูุฑ ูุซูุฑุง ุฎูุงู ุนูููุฉ ุงูุชุทููุฑ. </p><br><p style=";text-align:right;direction:rtl">  ููููุง ูุฌูุน ุงูุชุทุจูู ุฃูุซุฑ ูู ูุฑุฉ ุ ูููู ุจุดูู ููุชุธู ุนูู ุฎุงุฏู CI ุ ููู ุซู ูุดุฑู ุนูู ุณูุณูุฉ ูู ุงูุจูุฆุงุช.  ูุจุงูุชุงูู ุ ุชููู 10 ูุฌููุนุงุช ุจุณุฑุนุฉ 200 ููุฌุงุจุงูุช ุ ู 100 - ุจุณุฑุนุฉ 2 ุฌูุฌุงุจุงูุช ุ ูุงูุชู ุณูู ุชุณุชุบุฑู ุงูุชุนุฏููุงุช ูููุง ุงููููู ุฌุฏูุง. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุงูููู ุฃูู ุจุงููุณุจุฉ ููุชูููุฉ ุงูุญุงููุฉ ููุชุฎุฒูู ุ ููุฐู ุฃุฑูุงู ูุซูุฑุฉ ููุณุฎุฑูุฉ ููุง ูุชุนูู ุนููู ูุถุงุก ุจุนุถ ุงูููุช ูู ุชุญุณููุงุช ููุฐู ุ ููู ูู ูุฐุง ูุชููู ุนูู ุญุฌู ุงููุคุณุณุฉ ูุนุฏุฏ ุงูุชุทุจููุงุช ุงูุชู ุชุญุชุงุฌ ุฅูู ุชุฎุฒูู ุตูุฑูุง.  ูููู ุฃู ุชุญูุฒ ุดุฑูุท ุงููุดุฑ ุฃูุถูุง ุจููุฉ: ุนูุฏูุง ูููู ุงูุณุฌู ูุงูุฎุงุฏู ูู ููุงู ูุฑูุจ ุ ูุฅู ุงุฎุชูุงููุง ูุฏุฑู 100 ููุฌุงุจุงูุช ููุณ ููุญูุธูุง ุฌุฏูุง ุ ูููู ูู ุงูุฃูุธูุฉ ุงูููุฒุนุฉ ุ ูุฏ ูููู ูุฐุง ุงูุฃูุฑ ุฃูุซุฑ ุฃูููุฉ ุ ุฎุงุตุฉ ุนูุฏูุง ุชุญุชุงุฌ ุฅูู ุงููุดุฑ ูู ุจูุฏุงู ูุนููุฉ ูุซู ุงูุตูู ุจุฌุฏุงุฑ ุงูุญูุงูุฉ ุงูุฎุงุต ุจูุง ูุงููููุงุช ุบูุฑ ุงููุณุชูุฑุฉ. ุฅูู ุงูุนุงูู ุงูุฎุงุฑุฌู. </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ูุน ูุนุฑูุฉ ุงูุฃุณุจุงุจ ุ ุญุงู ุงูููุช ููุชุญุณูู. </p><br><h1 id="anchoroptimizinganchor-optimiziruem-sborku-ili-chto-mozhno-pocherpnut-iz-springovogo-bloga" style=";text-align:right;direction:rtl"><a name="optimizing"></a>  ูููู ุจุชุญุณูู ุงูุชุฌููุน ุ ุฃู ูุง ุงูุฐู ูููู ุชุนููู ูู ูุฏููุฉ ุงูุฑุจูุน </h1><br><p style=";text-align:right;direction:rtl">  ุชูุฏู ูุฐู ุงูููุงูุฉ ุญูุงู ูุนููููุง: ุจุฏูุงู ูู ุทุจูุฉ ูุงุญุฏุฉ ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ <code>COPY my-jar.jar app.jar</code> ุ ูุญุชุงุฌ ุฅูู ุนูู ุทุจูุงุช ูุชุนุฏุฏุฉ. <br>  ุชุญุชูู ุงูุทุจูุฉ ุนูู ููุชุจุงุช ุ ูุงูุซุงูู ูู ุงูููุฏ ุงูุฎุงุต ุจูุง.  ููููุงู ุจุฐูู ุ ุชุญุชุงุฌ ุฅูู ูู ุถุบุท ููู jar ููุณุฎ ุงููุญุชููุงุช ุฅูู ุทุจูุงุช ูุฎุชููุฉ ูู ุงูุตูุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุจุฑูุงูุฌ ุงููุตู ูุฅุนุฏุงุฏ ููู jar ูุดุจู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh set -e path_to_jar=$1 dir=$(dirname "${path_to_jar}") jar_name=$(basename "${path_to_jar}") mkdir -p "${dir}/docker-dist" &amp;&amp; cd "${dir}/docker-dist" jar -xf ../"${jar_name}"</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฏ ูุจุฏู ุงูุฅุฑุณุงุก ุจุงุณุชุฎุฏุงู ุจูุงุก ูุชุนุฏุฏ ุงููุฑุงุญู ุจูุฐุง ุงูุดูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">FROM openjdk:8-jdk-alpine as build WORKDIR /wd COPY prepare_for_docker.sh /usr/local/bin/prepare_for_docker COPY target/demo.jar /wd/app.jar RUN prepare_for_docker /wd/app.jar FROM openjdk:8-jdk-alpine COPY --from=build /wd/docker-dist/BOOT-INF/lib /app/lib COPY --from=build /wd/docker-dist/META-INF /app/META-INF COPY --from=build /wd/docker-dist/BOOT-INF/classes /app ENTRYPOINT ["java","-cp","app:app/lib/*","com.example.demo.DemoApplication"]</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุฑุญูุฉ ุงูุฃููู ุ ูููู ุจูุณุฎ ูู ูุง ูุญุชุงุฌู ุ ููููู ุจุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู ููู ุถุบุท ููู jar ุ ููู ุงููุฑุญูุฉ ุงูุซุงููุฉ ุ ูุถุน ููุชุจุงุช ูููุตูุฉ ูุฑูุฒูุง ุจุดูู ูููุตู ูู ุทุจูุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุณูู ุงูุชุฃูุฏ ูู ูุงุจููุฉ ุงูุชุดุบูู: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฌูุน ูุฃูู ูุฑุฉ </li><li style=";text-align:right;direction:rtl">  ูู ุจุฅุฌุฑุงุก ุฃู ุชุบููุฑ ุนูู ุงูููุฏ ุงูุฎุงุต ุจูุง. </li><li style=";text-align:right;direction:rtl">  ูุทูู <code>docker build</code> ูุฑุฉ ุฃุฎุฑู ููุฑู ุงูุฎุทูุท ุงูุนุฒูุฒุฉ <code>Using cache</code> ุนูุฏ ูุณุฎ ุฏููู lib ุจุฃูููู <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">... Step 5/10 : RUN prepare_for_docker app.jar ---&gt; Running in c8e422491eb2 Removing intermediate container c8e422491eb2 ---&gt; c7dcec4ae18a Step 6/10 : FROM openjdk:8-jdk-alpine ---&gt; a3562aa0b991 Step 7/10 : COPY --from=build /wd/docker-dist/BOOT-INF/lib /app/lib ---&gt; Using cache ---&gt; 01b600d7e350 Step 8/10 : COPY --from=build /wd/docker-dist/META-INF /app/META-INF ---&gt; Using cache ---&gt; 5c0c03a3c8f1 Step 9/10 : COPY --from=build /wd/docker-dist/BOOT-INF/classes /app ---&gt; 5ffed6ee5696 Step 10/10 : ENTRYPOINT ["java","-cp","app:app/lib/*","com.example.demo.DemoApplication"] ---&gt; Running in 99957250fe5d Removing intermediate container 99957250fe5d ---&gt; 6735799d9f32 Successfully built 6735799d9f32 Successfully tagged boot2-sample:latest</code> </pre> </li></ol><br><p style=";text-align:right;direction:rtl">  ุฅุญุฏู ุงูุทุฑู ุงููุงุถุญุฉ ูุชุญุณูู ูุฐุง ุงูููุฌ ูู ุฅูุดุงุก <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุตูุฑุฉ ุฃุณุงุณูุฉ</a> ุตุบูุฑุฉ ุจุงุณุชุฎุฏุงู ุจุฑูุงูุฌ ูุตู ุญุชู ูุง ูุชู ุณุญุจูุง ูู ูุดุฑูุน ุฅูู ูุดุฑูุน.  ูุจุงูุชุงูู ุ ุชุตุจุญ ุงูุทุจูุฉ ุงูุฃููู ุฃูุซุฑ ุฅูุฌุงุฒูุง. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">FROM zeldigas/java-layered-builder as build COPY target/demo.jar app.jar RUN prepare_for_docker app.jar</code> </pre> <br><h1 id="anchorimprovementsanchordorabatyvaem-reshenie" style=";text-align:right;direction:rtl"><a name="improvements"></a>  ูุญู ุจุตุฏุฏ ุงูุงูุชูุงุก ูู ุงูุญู </h1><br><p style=";text-align:right;direction:rtl">  ููุง ุฐูุฑูุง ุณุงุจููุง ูู ุจุฏุงูุฉ ุงูููุงูุฉ ุ ูุนูู ุงูุญู ุ ูููู ุฃุซูุงุก ุงูุนูููุฉ ุ ุชู ุงูุนุซูุฑ ุนูู ูุดููุชูู ุณูุชู ููุงูุดุชููุง ูุงุญููุง. </p><br><h2 id="ne-vse-fayly-v-lib-odinakovo-bibliotechny" style=";text-align:right;direction:rtl">  ููุณุช ูู ุงููููุงุช ุงูููุฌูุฏุฉ ูู <code>lib</code> ููุชุจุฉ ูุชุณุงููุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ูุดุฑูุนู ูุชุนุฏุฏ ุงููุญุฏุงุช (ุนูู ุงูุฃูู ุ ููุงู ูุญุฏุฉ A ุ ุงูุชู ุชุนุชูุฏ ุนูููุง ุงููุญุฏุฉ ุจ ุ ููุชู ุชุฌููุนูุง ูุฌุฑุงุฑ ุฏุณู ุฒูุจุฑูู) ุ ูุน ุชุทุจูู ุญู ุฃุตูู ุนููู ุ ุณุชุฌุฏ ุฃูู ูุง ููุฌุฏ ุชุฎุฒูู ูุคูุช ููุทุจูุฉ.  ูุง ุงูุฎุทุฃ ุงูุฐู ุญุฏุซุ </p><br><p style=";text-align:right;direction:rtl">  ุงููุณุฃูุฉ ูู ูุญุฏุงุช ุฅุถุงููุฉ: ููู ูุตุงุฏุฑ ููุชุบููุฑุงุช ุงููุณุชูุฑุฉ ููุทุจูุฉ ุ ุญุชู ูู ูู ุชูู ุจุฅุฌุฑุงุก ุฃู ุชุบููุฑุงุช ุนูู ุฑูุฒ ุงููุญุฏุฉ ุงูููุทูุฉ.  ููุฑุฌุน ุฐูู ุฅูู ุฎุตูุตูุฉ ุฅูุดุงุก ูููุงุช ุฌุฑุฉ maven (ูุน ุงููุถุน ุ ุงููุถุน ุฃูุถู ููููุงู ุ ูููู ุบูุฑ ูุชุฃูุฏ).  ุฅู ูููุฉ ุงูุญุตูู ุนูู ูุทุน ุฃุซุฑูุฉ ูุงุจูุฉ ููุงุณุชูุณุงุฎ ููุณุช ููุถูุน ูุฐุง ุงูููุงู (ุนูู ุงูุฑุบู ูู ุฃููุง ูุซูุฑุฉ ููุงูุชูุงู ููุงุจูุฉ ููุชุญููู ุจุงูุทุจุน) ุ ูุฐูู ุณููุชูู ุฅูู ุญู ุจุณูุท ุฅูู ุญุฏ ูุง. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุจุชูุฒูุน ูุญุชููุงุช <code>lib</code> ุฅูู <code>lib</code> ุ ุจุนุฏ ุชูุฑูุบูุง ุ ูุน ูุตู ูุญุฏุงุช ุงููุดุฑูุน ุนู ุงูููุชุจุงุช ุงูุฃุฎุฑู.  ุฏุนููุง ูููู ุงูุจุฑูุงูุฌ ุงููุตู ูุชูุฑูุบ ุฌุฑุฉ ุงูุฏููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh set -e path_to_jar=$1 shift #(1) app_modules=$* #(2) dir=$(dirname "${path_to_jar}") jar_name=$(basename "${path_to_jar}") mkdir -p "${dir}/docker-dist" &amp;&amp; cd "${dir}/docker-dist" jar -xf ../"${jar_name}" if [ -n "${app_modules}" ]; then #(3) mkdir app-lib for i in $app_modules; do mv "BOOT-INF/lib/$i"* app-lib #(4) done fi</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุชูุฌุฉ ูุฐูู ุ ุจุฏุฃ ุงูุจุฑูุงูุฌ ุงููุตู ูู ุฏุนู ููู ุงููุนููุงุช ุงูุฅุถุงููุฉ (ุงูุธุฑ 1 ู 2).  ุฅุฐุง ุชู ุชูุฑูุฑ ูุณูุทุงุช ุฅุถุงููุฉ (3) ุ ูุณูุชู ุงุนุชุจุงุฑ ูู ูุงุญุฏุฉ ูููุง ุจุงุฏุฆุฉ ูุงุณู ุงูููู ุงูุฐู ููููู (4) ุฅูู ุฏููู ูููุตู. </p><br><p style=";text-align:right;direction:rtl">  ูุซุงู Dockerfile ูุณููุงุฑูู ูุน ูุงุญุฏ ุฅุถุงูู.  <code>shared-module</code> ูุฅุตุฏุงุฑ <code>1.0-SNAPSHOT</code> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">FROM openjdk:8-jdk-alpine as build COPY target/demo.jar /wd/app.jar RUN prepare_for_docker /wd/app.jar shared-module-1.0 FROM openjdk:8-jdk-alpine COPY --from=build /wd/docker-dist/BOOT-INF/lib /app/lib COPY --from=build /wd/docker-dist/app-lib /app/lib COPY --from=build /wd/docker-dist/META-INF /app/META-INF COPY --from=build /wd/docker-dist/BOOT-INF/classes /app ENTRYPOINT ["java","-cp","app:app/lib/*","com.example.demo.DemoApplication"]</code> </pre> <br><h2 id="zapuskaem-na-ci-servere" style=";text-align:right;direction:rtl">  ุชุนูู ุนูู ุฎุงุฏู CI </h2><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุชุตุญูุญ ูู ุดูุก ูุญูููุง ุ ุจุงูุฑุถุง ุนู ุงููุชูุฌุฉ ุ ุจุฏุฃูุง ุงูุนูู ุนูู ุฎุงุฏู CI ููู ุณุฌูุงุช ุงูุจูุงุก ูุฌุฏูุง ุฃู ุงููุนุฌุฒุฉ ูู ุชุญุฏุซ ุ ุฃู ุจุงูุฃุญุฑู ูู ุชูู ุงููุชุงุฆุฌ ุซุงุจุชุฉ: ูู ุจุนุถ ุงูุญุงูุงุช ุ ุชู ุชูููุฐ ุงูุชุฎุฒูู ุงููุคูุช ุ ููู ุงููุฑุฉ ุงูุชุงููุฉ ูุงูุช ุฌููุน ุงูุทุจูุงุช ุฌุฏูุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุชูุฌุฉ ูุฐูู ุ ุชู ุงูุชุดุงู ุงูุฌุงูู - ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุฑุณู ุงูุณูู ุ ุฃู ุจุงูุฃุญุฑู ุ ุบูุงุจู ูู ุญุงูุฉ ุงูุนูุงูู ุงููุฎุชููุฉ (ูู ูุชู ุชุฌููุน ูุฌููุนุชูุง ุนูู ูููู ูุญุฏุฏ ููุธุงู CI).  ููุง ุงุชุถุญ ูููุง ุจุนุฏ ุ ุฅุฐุง ูู ุชูู ููุงู ุทุจูุงุช ููุงุณุจุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุฑุณู ุงูุณูู ุ ูุณูุชู ุงูุญุตูู ุนูู ุทุจูุงุช ุฐุงุช ูุฌููุนุฉ ุงุฎุชุจุงุฑูุฉ ูุฎุชููุฉ ูู ููุณ ูุฌููุนุฉ ุงููููุงุช.  ููููู ุงูุชุญูู ูู ุฐูู ูุญูููุง ุ ุนู ุทุฑูู ุชุดุบูู <code>--no-cache</code> ุงูุฎูุงุฑ <code>--no-cache</code> ุ ุฃู ุนู ุทุฑูู <code>--no-cache</code> ูุฑุฉ ุซุงููุฉ ุนู ุทุฑูู ุญุฐู ุงูุตูุฑุฉ ุฃููุงู ูุฌููุน ุงูุทุจูุงุช ุงููุณูุทุฉ.  ูุชูุฌุฉ ูุฐูู ุ ุชุญุตู ุนูู ุทุจูุฉ ุงุฎุชุจุงุฑูุฉ ูุฎุชููุฉ ุชูุงููุง ุ ูุงูุชู ุชููุฑ ูู ุงูุฌููุฏ ุงูุณุงุจูุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/k6/v0/ea/k6v0eaq02yvlokvcopiwp3fkwdm.png" alt="ุจุฏูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงูุตุญูุญุฉ ุ ูุญุตู ุนูู ุทุจูุงุช ูุฎุชููุฉ"></p><br><p style=";text-align:right;direction:rtl">  ููุงู ุนุฏุฉ ุทุฑู ูุญู ุงููุดููุฉ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ูุธุงู CI ูุฏุนู ูุฐุง ุฎุงุฑุฌ ุงูุตูุฏูู (ุนูู ุณุจูู ุงููุซุงู ุ ูุฅู ุฏุงุฆุฑุฉ CI <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุฌุฒุก ุงูุฎุทุท</a> ููุง ุฏุนู ูุฏูุฌ ูุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงููุดุชุฑูุฉ ุฃุซูุงุก ุงูุชุฌููุนุงุช) </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฎูุท ูุณู</a> ูุน ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุนุงูู ูููุงุก ุจูู ูููุงุก </li><li style=";text-align:right;direction:rtl">  ุงุณุชูุฏ ูู ุนุงูู ุฅุฏุงุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงููุฏูุฌ (- ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>--cache-from</code></a> ) </li></ol><br><p style=";text-align:right;direction:rtl">  ุฐูุจูุง ูู ุงูุทุฑูู ุงูุซุงูุซ ุ ูุฃูู ูู ุญุงูุชูุง ูุงู ุงูุฃูุฑ ุฃุจุณุท.  ูุณูุญ ูู ูุฐุง ุงูุฎูุงุฑ ุจุฅุฎุจุงุฑ ุงูุจุฑูุงูุฌ ุงูุฎูู ุนู ุงูุตูุฑ ุงูุชู ูุฌุจ ุฃู ูุฃุฎุฐูุง ูู ุงูุงุนุชุจุงุฑ ููุญุงููุฉ ุงุณุชุฎุฏุงููุง ููุชุฎุฒูู ุงููุคูุช ุฃุซูุงุก ุงูุชุฌููุน.  ููููู ุชุญุฏูุฏ ุงูุนุฏูุฏ ูู ุงูุตูุฑ ุงูุชู ุชุฑุงูุง ุถุฑูุฑูุฉ ุ ุงูุดูุก ุงูุฑุฆูุณู ูู ุฃููุง ููุฌูุฏุฉ ูู ูุธุงู ุงููููุงุช.  ุฅุฐุง ูู ุชูู ุงูุตูุฑุฉ ุงููุญุฏุฏุฉ ููุฌูุฏุฉ ุ ูุณูุชู ุชุฌุงูููุง ุจุจุณุงุทุฉ ุ ูุฐุง ูุฌุจ ุนููู ุงูุณุญุจ ูุจู ุงูุจูุงุก. </p><br><p style=";text-align:right;direction:rtl">  ุฅููู ูุง ูุดุจู ุชุฌููุน ุงูุญุงููุฉ ูุน ูุฐุง ุงูุฃุณููุจ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">set</span></span> -e version=... <span class="hljs-comment"><span class="hljs-comment">#      docker pull registy.example.com/my-image:latest || true #         docker build -t registry.example.com/my-image:$version --cache-from registry.example.com/my-image:latest . #   registry    latest docker tag registry.example.com/my-image:$version registry.example.com/my-image:latest docker push registry.example.com/my-image:$version docker push registry.example.com/my-image:latest</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญู ูุญุงูู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุทุจูุงุช ููุท ูู ุฃุญุฏุซ ุงูุตูุฑ ุ ููู ูุง ูููู ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ูููู ูุง ุฃุญุฏ ููุชุฑุซ ููุฎุชุชู ููุทููุง ุฃูุซุฑ ุชุนููุฏูุง ููุชุฑุงุฌุน ุนู ุจุนุถ ุงูุฅุตุฏุงุฑุงุช ุฃู ูุนุชูุฏ ุนูู ูุนุฑู vcs ุงููุฑุชูุจ. </p><br><p style=";text-align:right;direction:rtl">  ูุนูู ุนูู ุชูููู ูุฐุง ุงูููุฌ ูุน ุฅููุงููุงุช CI ุงูุฎุงุตุฉ ุจู ูุงูุญุตูู ุนูู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ููุซููุฉ ููุทุจูุงุช ูุน ุงูููุชุจุงุช. </p><br><h1 id="itogo" style=";text-align:right;direction:rtl">  ูู ุงููุฌููุน </h1><br><p style=";text-align:right;direction:rtl">  ููุธูุฑ ุงูุญู ูุชุงุฆุฌ ุฌูุฏุฉ ุ ุฎุงุตุฉู ุนูุฏ ุงุณุชุฎุฏุงูู ูู ุงููุดุฑูุนุงุช ุฐุงุช ุงููุฑุญูุฉ ุงููุดุทุฉ ูู ุงูุชุทููุฑ ูุฎุท ุฃูุงุจูุจ CD ูุถุจูุท.  ููุถุญ ุงูุฑุณู ุงูุจูุงูู ุฃุฏูุงู ูุชูุฌุฉ ุชุทุจูู ุงูุชุญุณูู ุนูู ุฃุญุฏ ุงูุชุทุจููุงุช.  ูู ุงููุงุถุญ ุฃู ุงูููู ุงูุฎุทู ูุฏ ุชุบูุฑ ุฅูู ุจุฏุงูุฉ ูุชูุทุนุฉ ูู ุงูุชุฌููุน ุงูุณุจุนูู (ุชุฑุชุจุท ุญุงูุงุช ุงููุดู ูู ุงูุณุชูููุงุช ุจุงูุชุญุฏูุฏ ุจุฃุนูุงู ุชุตุญูุญ ุงูุฃุฎุทุงุก ุนูู ุนูุงูู ุงูุจูุงุก).  ุงูุงูุจุนุงุซุงุช ุจุนุฏ ุชุฑุชุจุท ุจุชุญุฏูุซ ุงูุตูุฑุฉ ุงูุฃุณุงุณูุฉ (ุนุงููุฉ) ูุงูููุชุจุงุช (ุฃูู) </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ja/dj/en/jadjennx5loozk5x7iz_nxrct1o.png"></p><br><p style=";text-align:right;direction:rtl">  ูุนุฏ ุชุญุณูู ุงูุชุฎุฒูู ูู ุญุงูุชูุง ุฃูุฑูุง ุฑุงุฆุนูุง ุ ููููู ูุนุฏ ููุงูุฃุฉ ุซุงูููุฉ.  ูุนุฏ ุชุณุฑูุน ูุดุฑ ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ ุนูู ุงูุฅุตุฏุงุฑ ุงููุฏูู ูู ุงูุนุฏูุฏ ูู ุงูููุงุทู ุฃูุซุฑ ูุชุนุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ูุฐู ุงูุชูููุฉ ูุชูุงููุฉ ุชูุงููุง ูุน ุงูุฃุณุงููุจ ุงูุฃุฎุฑู ุงูุชู ุชูุฏู ุฅูู ุชูููู ุญุฌู ุตูุฑุฉ ูุงุญุฏุฉ (ุฌุจุงู ุงูุฃูุจ ูุบูุฑูุง ูู ุงูุตูุฑ ุงูุฃุณุงุณูุฉ ุฎูููุฉ ุงููุฒู ุ ูููุช ุงูุชุดุบูู ุงููุฎุตุต ููุชุทุจูู).  ุงูุดูุก ุงูุฑุฆูุณู ูู ุงุชุจุงุน ุงูููุงุนุฏ ุงูุนุงูุฉ ูุชุฌููุน ุงูุตูุฑุฉ ูู ุญูุซ ุงูุชุฎุฒูู ุงููุคูุช ูุงูุชุฃูุฏ ูู ุฃู ุงููุชูุฌุฉ ูุงุจูุฉ ููุชูุฑุงุฑ. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar458260/">https://habr.com/ru/post/ar458260/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar458246/index.html">ุงูุตุฏู ุนุดูุงุฆูุฉ ูู ุงูุญูุงุฉ ุ ุฃู ููู ุชุจูู ุฃูู ูุฏูุช ูุน ูุนูุฉ ูู ูุตูุน ุฌุฑุงุฑ</a></li>
<li><a href="../ar458248/index.html">ุจุณูุท ุดูุฑุชู ูู ุฎูุงู ุนูู ุงูุตูุงุฑูุฎ: ูุดุบู C ++ 20's Spaceship</a></li>
<li><a href="../ar458250/index.html">BTRFS ูุฃุตุบุฑ</a></li>
<li><a href="../ar458252/index.html">ูููุฐุฌ ุฑูุงุถู ูุชูุณููุจ ุฑุงุฏููู ุทููู ุงููุฏู</a></li>
<li><a href="../ar458256/index.html">ุฃูู ูุญู ุงูููุช ูุบุณู ุงููุฎุ</a></li>
<li><a href="../ar458262/index.html">ูุตูู ุนุจุฑ ุงูุฅูุชุฑูุช ููุงุนุฉ ุงูุงุฌุชูุงุนุงุช - ุงุฎุชูุงุฑ ุงูุญู ุงูุฃูุซู ูุนูุฏ ุงููุคุชูุฑุงุช ุนู ุทุฑูู ุงูููุฏูู</a></li>
<li><a href="../ar458264/index.html">10 ูุจุงุฏุฆ ูุงููู ุงูุชูุซูู ุงูุฐุงุชู</a></li>
<li><a href="../ar458268/index.html">ุชุฌุฒุฆุฉ ุงูุฌูุงุฒ ุงูุชููุณู ุงูุชููุงุฆู</a></li>
<li><a href="../ar458270/index.html">ุญูู ุงูุฃุฎุทุงุก ุงูุชู ุชุธูุฑ ูู ุงูุนุฏู ูุงูุชู ูุง ููุฌุฏ ุฃุญุฏ ูููููุง: ุธุงูุฑุฉ ุชูุทูุฎ ุงููุณุคูููุฉ</a></li>
<li><a href="../ar458272/index.html">GOSH! ูููุณุงูุฑูู - ูุตุฉ ูุดุฑูุน ููุฒู ูุงุญุฏ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>