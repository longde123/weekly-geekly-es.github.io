<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍝 👃 👨🏻‍⚕️ مرة أخرى حول جواز السفر 👨🏼‍✈️ 🕠 ⏮️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="في الآونة الأخيرة ، قدموا لي الدعم لمشروع على Express.js. عند دراسة رمز المشروع ، وجدت عملًا مربكًا بعض الشيء مع المصادقة / التخويل ، والذي كان يستند ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>مرة أخرى حول جواز السفر</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435106/" style=";text-align:right;direction:rtl"> في الآونة الأخيرة ، قدموا لي الدعم لمشروع على Express.js.  عند دراسة رمز المشروع ، وجدت عملًا مربكًا بعض الشيء مع المصادقة / التخويل ، والذي كان يستند ، مثل 99.999٪ من الحالات ، إلى مكتبة passport.js.  عملت هذه الشفرة ، وتبعًا لمبدأ "العمل - لا تلمس" ، تركتها كما هي.  عندما تم تكليفي بعد يومين بمهمة إضافة استراتيجيتين أخريين للترخيص.  ثم بدأت أتذكر أنني كنت أقوم بالفعل بعمل مماثل ، واستغرق الأمر عدة سطور من التعليمات البرمجية.  بعد الاطلاع على الوثائق الخاصة بجواز السفر ، لم أكن أتحرك في فهم ماذا وكيف نفعل ، لأنه  هناك نظروا في الحالات عندما يتم استخدام استراتيجية واحدة بالضبط ، والتي ، لكل فرد ، يتم إعطاء أمثلة.  ولكن كيف تجمع بين العديد من الاستراتيجيات ، لماذا تحتاج إلى استخدام طريقة تسجيل الدخول () التي تشبه طريقة تسجيل الدخول ()) - لا تزال غير موضحة.  لذلك ، لكي أفهم الآن ، وليس تكرار البحث نفسه مرارًا وتكرارًا ، قمت بتجميع هذه الملاحظات بنفسي. <br><a name="habracut"></a><br>  قليلا من التاريخ.  في البداية ، استخدمت تطبيقات الويب نوعين من المصادقة / التخويل: 1) أساسي و 2) باستخدام جلسات باستخدام ملفات تعريف الارتباط.  في المصادقة / التخويل الأساسي ، يتم إرسال رأس في كل طلب ، وبالتالي يتم إجراء مصادقة العميل في كل طلب.  عند استخدام الجلسات ، يتم إجراء مصادقة العميل مرة واحدة فقط (يمكن أن تكون الطرق مختلفة جدًا ، بما في ذلك Basic ، وكذلك حسب الاسم وكلمة المرور ، التي يتم إرسالها في النموذج ، وآلاف الطرق الأخرى التي تسمى الاستراتيجيات من حيث passport.js).  الشيء الرئيسي هو أنه بعد المصادقة ، يحدد العميل معرف الجلسة في ملف تعريف الارتباط (أو في بعض التطبيقات ، بيانات الجلسة) ، ويتم تخزين معرف المستخدم في بيانات الجلسة. <br><br>  تحتاج أولاً إلى تحديد ما إذا كنت ستستخدم الجلسات في التطبيق الخاص بك للمصادقة / التخويل.  إذا كنت تقوم بتطوير خلفية لتطبيق الهاتف المحمول ، فعلى الأرجح لا.  إذا كان هذا هو تطبيق ويب ، فعلى الأرجح نعم.  لاستخدام الجلسات ، تحتاج إلى تنشيط محلل ملفات تعريف الارتباط ، والبرامج الوسيطة للجلسة ، وكذلك تهيئة الجلسة: <br><br><pre style=";text-align:right;direction:rtl"><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = express(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sessionMiddleware = session({ <span class="hljs-attr"><span class="hljs-attr">store</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RedisStore({<span class="hljs-attr"><span class="hljs-attr">client</span></span>: redisClient}), secret, <span class="hljs-attr"><span class="hljs-attr">resave</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">rolling</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">saveUninitialized</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">cookie</span></span>: { <span class="hljs-attr"><span class="hljs-attr">maxAge</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span> * <span class="hljs-number"><span class="hljs-number">60</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-attr"><span class="hljs-attr">httpOnly</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, }, }); app.use(cookieParser()); app.use(sessionMiddleware); app.use(passport.initialize()); app.use(passport.session());</code> </pre> <br>  هنا تحتاج إلى إعطاء بعض التفسيرات المهمة.  إذا كنت لا ترغب في أن يقوم redis بتناول جميع ذاكرة الوصول العشوائي (RAM) في غضون عامين ، فيجب عليك العناية بحذف بيانات الجلسة في الوقت المناسب.  تعتبر المعلمة maxAge مسؤولة عن هذا الأمر ، حيث تقوم أيضًا بتعيين هذه القيمة لكل من ملف تعريف الارتباط والقيمة المخزنة في redis.  يؤدي تعيين القيم إلى إعادة حفظ: true ، rolling: true ، إلى تمديد فترة الصلاحية مع قيمة maxAge المحددة مع كل طلب جديد (إذا لزم الأمر).  وإلا ، سيتم مقاطعة جلسة العميل بشكل دوري.  وأخيرًا ، فإن saveUninitialized: المعلمة false لن تضع جلسات فارغة في redis.  يتيح لك ذلك وضع تهيئة الجلسات و passport.js على مستوى التطبيق ، دون انسداد redis بالبيانات غير الضرورية.  على مستوى المسار ، من المنطقي وضع التهيئة فقط إذا كانت طريقة passport.initialize () بحاجة إلى استدعاء بمعلمات مختلفة. <br><br>  إذا لم يتم استخدام الجلسة ، فسيتم التهيئة بشكل كبير: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">app.use(passport.initialize());</code> </pre><br><br>  بعد ذلك ، تحتاج إلى إنشاء كائن إستراتيجية (كما تستدعي passport.js طريقة المصادقة في المصطلحات).  كل استراتيجية لها ميزات التكوين الخاصة بها.  الشيء الوحيد الذي لم يتغير هو أن وظيفة رد الاتصال يتم تمريرها إلى مُنشئ الإستراتيجية ، التي تشكل كائن المستخدم ، يمكن الوصول إليها كطلب. مستخدم لقوائم انتظار البرامج الوسيطة التالية: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> jwtStrategy = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JwtStrategy(params, (payload, done) =&gt; UserModel.findOne({<span class="hljs-attr"><span class="hljs-attr">where</span></span>: {<span class="hljs-attr"><span class="hljs-attr">id</span></span>: payload.userId}}) .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">) =&gt;</span></span> { done(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, user); }) .catch(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) =&gt;</span></span> { done(error, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); }) );</code> </pre><br><br>  يجب أن ندرك جيدًا أنه في حالة عدم استخدام جلسة ، سيتم استدعاء هذه الطريقة في كل مرة يتم الوصول إلى مورد محمي ، وسوف يؤثر استعلام قاعدة البيانات (كما في المثال) بشكل كبير على أداء التطبيق. <br><br>  بعد ذلك ، تحتاج إلى إعطاء أمر لاستخدام الاستراتيجية.  كل استراتيجية لها اسم افتراضي.  ولكن يمكن أيضًا تعيينه بشكل صريح ، والذي يسمح باستخدام استراتيجية واحدة ذات معلمات مختلفة ومنطق وظيفة رد الاتصال: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">passport.use(<span class="hljs-string"><span class="hljs-string">'jwt'</span></span>, jwtStrategy); passport.use(<span class="hljs-string"><span class="hljs-string">'simple-jwt'</span></span>, simpleJwtStrategy);</code> </pre><br><br>  بعد ذلك ، بالنسبة إلى المسار المحمي ، تحتاج إلى تعيين استراتيجية مصادقة ومعلمة جلسة مهمة (الافتراضي صحيح): <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> authenticate = passport.authenticate(<span class="hljs-string"><span class="hljs-string">'jwt'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">session</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}); router.use(<span class="hljs-string"><span class="hljs-string">'/hello'</span></span>, authenticate, (req, res) =&gt; { res.send(<span class="hljs-string"><span class="hljs-string">'hello'</span></span>); });</code> </pre><br><br>  إذا لم يتم استخدام الجلسة ، فيجب أن تكون المصادقة محمية بكل طرق الوصول المقيدة.  إذا تم استخدام الجلسة ، فستحدث المصادقة مرة واحدة ، ولهذا السبب يتم تعيين مسار خاص ، على سبيل المثال تسجيل الدخول: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> authenticate = passport.authenticate(<span class="hljs-string"><span class="hljs-string">'local'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">session</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}); router.post(<span class="hljs-string"><span class="hljs-string">'/login'</span></span>, authenticate, (req, res) =&gt; { res.send({}) ; }); router.post(<span class="hljs-string"><span class="hljs-string">'/logout'</span></span>, mustAuthenticated, (req, res) =&gt; { req.logOut(); res.send({}); });</code> </pre><br><br>  عند استخدام جلسة ، على طرق محمية ، وكقاعدة عامة ، يتم استخدام برنامج وسيط موجز للغاية (والذي لم يتم تضمينه لسبب ما في مكتبة passport.js): <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mustAuthenticated</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!req.isAuthenticated()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> res.status(HTTPStatus.UNAUTHORIZED).send({}); } next(); }</code> </pre><br><br>  لذلك ، كانت هناك لحظة أخيرة - إجراء تسلسل وإلغاء تسلسل كائن request.user إلى / من الجلسة: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">passport.serializeUser(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user, done</span></span></span><span class="hljs-function">) =&gt;</span></span> { done(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, user.id); }); passport.deserializeUser(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id, done</span></span></span><span class="hljs-function">) =&gt;</span></span> { UserModel.findOne({<span class="hljs-attr"><span class="hljs-attr">where</span></span>: {id}}).then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user</span></span></span><span class="hljs-function">) =&gt;</span></span> { done(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, user); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }); });</code> </pre><br><br>  أريد التأكيد مرة أخرى على أن التسلسل وإلغاء التسلسل لا يعملان إلا مع الاستراتيجيات التي تم تعيين السمة {session: true} عليها.  سيتم تنفيذ التسلسل مرة واحدة فورًا بعد المصادقة.  لذلك ، سيكون تحديث البيانات المخزنة في الجلسة مشكلة كبيرة ، حيث يتم حفظ معرف المستخدم فقط (الذي لا يتغير).  سيتم تنفيذ عملية إلغاء التسلسل عند كل طلب إلى طريق آمن.  في هذا الصدد ، تؤثر استعلامات قاعدة البيانات (كما في المثال) بشكل كبير على أداء التطبيق. <br><br>  ملاحظة.  إذا كنت تستخدم العديد من الاستراتيجيات في نفس الوقت ، فسوف يعمل نفس رمز التسلسل / إلغاء التسلسل على كل هذه الاستراتيجيات.  لأخذ الإستراتيجية التي تم بها إجراء المصادقة في الاعتبار ، على سبيل المثال ، يمكنك تضمين سمة إستراتيجية في كائن المستخدم.  كما أنه لا معنى لاستدعاء طريقة التهيئة () عدة مرات بقيم مختلفة.  ستظل معاد كتابتها بقيم من آخر مكالمة. <br><br>  هذا يمكن أن يكون نهاية القصة.  بسبب  بالإضافة إلى ما قيل ، في الممارسة العملية ، لا شيء آخر مطلوب.  ومع ذلك ، بناءً على طلب مطوري الواجهة الأمامية ، اضطررت إلى إضافة كائن مع وصف الخطأ إلى استجابة 401 (افتراضيًا ، هذا هو الخط "غير مصرح به").  وهذا ، كما اتضح ، لا يمكن القيام به ببساطة.  في مثل هذه الحالات ، تحتاج إلى التعمق أكثر في قلب المكتبة ، وهو ليس لطيفًا جدًا.  تحتوي طريقة passport.authenticate على معلمة اختيارية ثالثة: وظيفة رد اتصال مع وظيفة التوقيع (خطأ ، مستخدم ، معلومات).  المشكلة الصغيرة هي أنه لا يتم تمرير كائن الاستجابة ولا أي وظيفة مثل done () / next () إلى هذه الوظيفة ، وبالتالي يجب عليك تحويلها إلى برنامج وسيط بنفسك: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">route.post(<span class="hljs-string"><span class="hljs-string">'/hello'</span></span>, authenticate(<span class="hljs-string"><span class="hljs-string">'jwt'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">session</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}), (req, res) =&gt; { res.send({}) ; }); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">authenticate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">strategy, options</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) </span></span>{ passport.authenticate(strategy, options, (error, user , info) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(error); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!user) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TranslatableError(<span class="hljs-string"><span class="hljs-string">'unauthorised'</span></span>, HTTPStatus.UNAUTHORIZED)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (options.session) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> req.logIn(user, (err) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (err) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(err); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next(); }); } req.user = user; next(); })(req, res, next); }; }</code> </pre><br><br>  روابط مفيدة: <br><br>  1) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">toon.io/understanding-passportjs- مصادقة- تدفق</a> <br>  2) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">habr.com/post/201206</a> <br>  3) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">habr.com/company/ruvds/blog/335434</a> <br>  4) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">habr.com/post/262979</a> <br>  5) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">habr.com/company/Voximplant/blog/323160</a> <br>  6) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">habr.com/company/dataart/blog/262817</a> <br>  7) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">tools.ietf.org/html/draft-ietf-oauth-pop-architecture-08</a> <br>  8) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">oauth.net/articles/ مصادقة</a> <br><br>  apapacy@gmail.com <br>  4 يناير 2019 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar435106/">https://habr.com/ru/post/ar435106/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar435090/index.html">قدمت مجموعة هيونداي للسيارات مفهوم الشحن اللاسلكي ومواقف السيارات المستقلة</a></li>
<li><a href="../ar435094/index.html">Gamepad من Sega Mega Drive و Raspberry Pi Part 2 (آخر ستة أزرار)</a></li>
<li><a href="../ar435096/index.html">تأثير الراديو أنبوب دافئ</a></li>
<li><a href="../ar435098/index.html">ADB vs Spy Cam & Mic</a></li>
<li><a href="../ar435102/index.html">قليلا عن التحليل المعجمى</a></li>
<li><a href="../ar435108/index.html">باستخدام Prolog</a></li>
<li><a href="../ar435112/index.html">مقابلة الشركات</a></li>
<li><a href="../ar435114/index.html">بيانات الربيع jpa</a></li>
<li><a href="../ar435118/index.html">حفظ File Me - خدمة نسخ احتياطي مجانية مع تشفير من جانب العميل</a></li>
<li><a href="../ar435120/index.html">وظائف Lambda في SQL ... دعنا نفكر</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>