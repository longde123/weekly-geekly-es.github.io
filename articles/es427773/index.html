<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîù ‚õπüèª ‚öΩÔ∏è Escrib√≠ una extensi√≥n de navegador cruzado para pesta√±as, pero t√∫ no haces eso üìÅ üìà üë©üèæ‚Äçü§ù‚Äçüë®üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Una introducci√≥n larga y tediosa con un reclamo de megaloman√≠a. 
 Una vez que descubr√≠ que, como siempre, algo no me conven√≠a mucho en este mundo. Es ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Escrib√≠ una extensi√≥n de navegador cruzado para pesta√±as, pero t√∫ no haces eso</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427773/"><h3>  Una introducci√≥n larga y tediosa con un reclamo de megaloman√≠a. </h3><br>  Una vez que descubr√≠ que, como siempre, algo no me conven√≠a mucho en este mundo.  Es decir, al ingresar alg√∫n tipo de consulta larga en un motor de b√∫squeda en una computadora de escritorio y luego cambiar a una tableta, no pude recordar el texto de la consulta textualmente para obtener exactamente los mismos resultados.  Todo comenz√≥ muy bien.  Vi en el motor de b√∫squeda un enlace a la respuesta a mi pregunta y me di cuenta de que promete una lectura larga.  Luego apagu√© la computadora y me dej√© caer en el sof√° con la tableta con la idea de que ahora lo volver√≠a a escribir todo en el motor de b√∫squeda, abrir√© ese enlace ahora en la tableta y acostado, tranquilo, en una posici√≥n m√°s c√≥moda, lo leer√© ... Pero no aqu√≠ fue.  Algunas discrepancias menores en el texto, y mi enlace ya no est√° en el motor de b√∫squeda.  Jugar el enlace en s√≠ tampoco es una opci√≥n: es demasiado largo.  Al pensar en las opciones para el texto de la consulta, estaba casi furioso por romper la tableta.  Maldita sea, tuve que levantarme, volver a encender la computadora, iniciar el navegador y profundizar en el historial para encontrar el texto exacto de mi solicitud. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/96/4d/2c/964d2c1pum-7mihsz15k_6r1ayu.jpeg"></div><br>  <i>Extensi√≥n instalada en Chrome y Firefox</i> <br><a name="habracut"></a><br><h3>  Idea </h3><br>  Pens√©, pero ser√≠a bueno escribir una extensi√≥n de este tipo para el navegador que le permitiera transferir cualquiera de sus pesta√±as abiertas a trav√©s del servidor a cualquier otra computadora y continuar trabajando con ellas all√≠.  S√≠, algunos navegadores ya tienen una funci√≥n en la nube: solo necesita iniciar sesi√≥n en ambos dispositivos y ... Pero esa es la trampa.  Pero, ¬øqu√© pasa si tengo Chrome en mi computadora y Firefox en mi tableta?  Y luego ... Solo inicia sesi√≥n, s√≠.  Si a√∫n recordaba mi contrase√±a de la cuenta de google.  Y simplemente no tengo una cuenta en Firefox.  Ni siquiera s√© si hay alguna cuenta all√≠?  Hay, por supuesto, servicios en la nube de terceros donde puede registrarse y probablemente de alguna manera arrojar el enlace deseado para usted.  Pero a√∫n es necesario registrarse all√≠ y memorizar firmemente otra contrase√±a ... No, esto es completamente poco realista.  Al final, puede lanzarse un enlace por correo.  Pero todo esto lleva mucho tiempo y copiar y pegar, y luego en la barra de direcciones, lo que, por ejemplo, en una tableta es extremadamente inconveniente.  No, todo esto es una especie de tonter√≠a ... <br><br>  Tumbado en el sof√°, lentamente me di cuenta de que todas estas acciones requieren demasiado movimiento ... No, muchachos, eso no servir√°.  Y cuando entiendo que algo no me conviene en este mundo, me siento a escribir c√≥digo para hacer todo a mi manera.  Pens√© que estaba autorizado en las redes sociales tanto en la tableta como en la computadora de escritorio.  Y en diferentes navegadores, por ejemplo, en la misma computadora, tambi√©n.  En general, la soluci√≥n para m√≠ era obvia: autenticar al usuario a trav√©s de las redes sociales. <br><br><h3>  Digresi√≥n l√≠rica </h3><br>  Por cierto, cuando escribo algo propio, lo hago tambi√©n a mi manera.  Escribo en javaScript puro en un cuaderno avanzado, no uso github, no uso bibliotecas de terceros, ni siquiera uso jquery.  Por lo tanto, no habr√° un tutorial sobre c√≥mo escribir una extensi√≥n del navegador.  No te voy a ense√±ar esto.  No hagas lo que yo hago.  Te advierto: este es un mal ejemplo.  Tambi√©n quiero contarles a todos los cr√≠ticos potenciales, anticipando su reacci√≥n; s√≠, estoy completamente de acuerdo con toda su ira justa.  S√≠, no puede insertar todo el script en uno o dos archivos, pero debe cortar todo, como una ensalada, en muchos pedazos peque√±os para que luego pueda ensamblarse durante 3 horas en un comando largo e inteligente desde la l√≠nea de comandos.  S√≠, no puede combinar c√≥digo javascript y c√≥digo html en un archivo; es mejor arruinar otro nivel de abstracci√≥n que los combine.  S√≠, no puedes usar el dise√±o de la tabla, pero maldici√≥n, ¬°es hierro!  Y, a√∫n m√°s, ahora me van a quemar, no puede usar innerHtml y crear una estructura html compleja de una sola vez, pero necesita unir y separar a todos los ni√±os en un bucle y adjuntar cuidadosamente y luego eliminar cada controlador ... S√≠, estoy haciendo todo mal.  Pecaminoso, me arrepiento.  Pero lo hago conscientemente, porque es m√°s f√°cil.  ¬øY qui√©n me lo prohibir√°?  Al final, no es ilegal, ¬øverdad?  No s√© c√≥mo programar como lo requiere un mod moderno, y ni siquiera quiero intentarlo, porque creo que el diagrama del proceso de desarrollo es innecesariamente complicado.  Estoy a favor de escribir c√≥digo con mis manos y no construirlo a partir de las piezas de otra persona sin escribir una sola l√≠nea.  Sin embargo, mi c√≥digo es ligero, no necesita ser ensamblado por un equipo especial y funciona r√°pidamente.  Estoy escribiendo c√≥digo usando la tecnolog√≠a F5.  Esto es cuando, para ver c√≥mo funciona la versi√≥n actual en cualquier momento del proceso de desarrollo, simplemente haga clic en el navegador F5. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rl/hq/rs/rlhqrsc-7sjls6fju4o6lmawsto.jpeg"></div><br><br>  Sin embargo, todav√≠a ten√≠a que colgar los controladores en un bucle, porque de lo contrario la extensi√≥n no pasa la prueba.  Tambi√©n en extensiones, por si acaso, en el archivo de √≠ndice html, de repente, los scripts conectados din√°micamente est√°n prohibidos.  Entonces los conect√© a trav√©s de la etiqueta del script. <br><br><h3>  Almacenamiento de pesta√±as </h3><br>  Entonces, decid√≠ que las pesta√±as abiertas en el navegador deber√≠an guardarse en ciertas listas, que se llamar√°n computadoras: computadora de casa, computadora de trabajo, computadora local.  Local: esto es cuando la lista no se almacena en el servidor, sino en la base de datos del navegador y, en consecuencia, solo puede usarla en el navegador desde el que se guarda.  Esto es para aquellas pesta√±as que no necesitan ser lanzadas entre diferentes computadoras.  Bueno, el resto de las listas se pueden ver en cualquier computadora y navegador de entre los admitidos por la extensi√≥n. <br><br>  Para cada pesta√±a, el usuario puede dejar un comentario de texto arbitrario.  Por ejemplo, es conveniente para m√≠ recordar qu√© series detuve al ver la serie, y tambi√©n marcar por m√≠ mismo lo que est√° en la p√°gina, si no est√° claro por su t√≠tulo y tipo de enlace. <br><br>  Seg√∫n la documentaci√≥n para crear extensiones para Chrome y Firefox, el c√≥digo de extensi√≥n debe ubicarse en dos archivos: el principal y el de fondo.  El script principal se ocupa de la visualizaci√≥n de la interfaz de usuario, y el script de fondo puede controlar las pesta√±as del navegador e intercambiar datos con el servidor.  La administraci√≥n de pesta√±as en Chrome y Firefox es muy similar.  Por ejemplo, el controlador de eventos para abrir o cerrar pesta√±as en Chrome tiene este aspecto: <br><br><pre><code class="plaintext hljs">chrome.tabs.onUpdated.addListener( function(tabId, changeInfo) { });</code> </pre> <br>  Y en Firefox as√≠: <br><br><pre> <code class="plaintext hljs">browser.tabs.onUpdated.addListener( function(tabId, changeInfo, tabInfo) { });</code> </pre> <br>  Y la funci√≥n que muestra una lista de todas las pesta√±as abiertas se escribe exactamente igual para ambos navegadores: <br><br><pre> <code class="plaintext hljs">chrome.tabs.query({},function(data){ });</code> </pre> <br>  S√≠, s√≠, Chrome tambi√©n escribe Chrome en Firefox ... etc.  Esto es un poco extra√±o, sin embargo, el hecho de que los navegadores se est√©n moviendo hacia la estandarizaci√≥n de su API es muy alentador. <br><br>  En realidad, toda la funcionalidad de la extensi√≥n se logra mediante el uso de varias funciones: abrir la ventana de extensi√≥n haciendo clic en su icono, leer pesta√±as abiertas, cerrar la pesta√±a, crear una nueva pesta√±a, escuchar eventos de pesta√±as e intercambiar datos con la ventana de extensi√≥n.  Eso es todo.  Estos m√©todos solo est√°n disponibles en el script de fondo. <br><br>  Despu√©s de leer, las pesta√±as abiertas en el navegador se env√≠an a mi servidor y se guardan all√≠ en una base de datos SQL normal.  El script del servidor est√° escrito en PHP.  Hay una tabla de usuario que almacena enlaces a filas en otra tabla: la tabla de datos.  Estos datos son las direcciones de las p√°ginas, sus nombres y comentarios de texto del usuario, almacenados en el formato de cadenas de texto en un campo de tipo de texto de aproximadamente un kilobyte de largo.  Los datos se almacenan en forma no cifrada.  Se pueden guardar alrededor de 1,000 pesta√±as por megabyte.  Se proporciona un m√°ximo de 25 de estos almacenamientos ("Computadoras") para cada usuario. <br><br>  Sin embargo, la versi√≥n gratuita de la extensi√≥n limita al usuario a dos almacenamientos: la computadora del hogar y la computadora del trabajo, y cada uno de ellos no puede almacenar m√°s de 10 pesta√±as.  Todav√≠a estoy trabajando en la versi√≥n paga y los m√©todos de pago.  Habr√° hasta 25 "computadoras" y hasta aproximadamente 1000 pesta√±as en cada una, as√≠ como una selecci√≥n de im√°genes de fondo, iconos y nombres para cada computadora, listas jer√°rquicas y mucho m√°s. <br><br>  Hay otro repositorio: computadora local.  Aqu√≠ no hay restricciones, ya que los datos de la pesta√±a se almacenan en la base de datos del navegador local en la computadora del usuario.  Aqu√≠ puede almacenar tantas pesta√±as como desee, pero no m√°s de lo que permite el disco duro.  Adem√°s, dado que los datos no se almacenan en el almacenamiento local, sino en indexedDB, no hay l√≠mite de 5 o algunos megabytes all√≠.  Solo es importante no borrar accidentalmente este repositorio junto con el historial del navegador.  Tambi√©n planeo exportar e importar pesta√±as a un archivo de texto. <br><br>  Para trabajar con indexedDB, escrib√≠ una peque√±a sublibrary que solo tiene 106 l√≠neas de largo.  A diferencia de la base de datos en el servidor, aqu√≠ no es necesario que todos los datos se destilen en una cadena de texto, sino que se pueden guardar inmediatamente en la matriz asociativa tal como est√°n.  El principio de almacenamiento es el siguiente: la clave es el valor.  Y el valor puede ser una gran matriz asociativa. <br><br><h3>  Autenticaci√≥n de usuario </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/n_/q-/iy/n_q-iys59c4pqcmjfcps0r3v-xw.jpeg"></div><br>  <i>Firefox</i> <br><br>  La autorizaci√≥n, como ya se√±al√©, ocurre a trav√©s de las redes sociales y, en el servidor, usando el protocolo OAuth.  Todav√≠a es compatible con Facebook y VKontakte, pero planeo aumentar el n√∫mero de m√©todos de autenticaci√≥n de usuarios.  El esquema de autorizaci√≥n del servidor OAuth se describe en detalle en la documentaci√≥n de ambas redes sociales, por lo que no tiene sentido detenerse en √©l en detalle.  Solo noto que no me gust√≥ el hecho de que durante la autorizaci√≥n se abre una nueva pesta√±a del navegador, incluso si el usuario ya ha iniciado sesi√≥n en la red social y ya ha otorgado los derechos de extensi√≥n.  El script de extensi√≥n de fondo debe capturar esta pesta√±a y luego forzarla a cerrar, y en general, no se ve est√©ticamente agradable, se pega en las otras pesta√±as y parpadea cuando aparece y se destruye. <br><br>  Para cerrarlo, para VKontakte debe verificar la presencia de la direcci√≥n en el controlador de eventos de pesta√±a: <br><br><pre> <code class="plaintext hljs">oauth.vk.com/blank.html</code> </pre> <br>  Y para Facebook: <br><br><pre> <code class="plaintext hljs">https://www.facebook.com/connect/blank.html</code> </pre> <br>  Y por si acaso: <br><br><pre> <code class="plaintext hljs">facebook.com/connect/login_success.html</code> </pre> <br>  Por lo tanto, al principio envi√© un ensamblaje de extensi√≥n a Google Web Store, en el que se realiz√≥ la autorizaci√≥n en el cliente con un pull-up preliminar de la red social de la API de JavaScript del cliente correspondiente.  Adem√°s, dado que la extensi√≥n est√° instalada en el usuario y necesito autorizar en mi servidor, tambi√©n extraje html de mi servidor en el script de extensi√≥n en el i-frame, pero ya extraje la API de la red social ... <br><br>  Y el esquema de intercambio de datos con el servidor era as√≠.  Una p√°gina de √≠ndice de extensi√≥n env√≠a un comando (informaci√≥n de clic, por ejemplo) a un script de extensi√≥n de fondo.  La secuencia de comandos de fondo que usa postMessage env√≠a datos a i-frame html.  I-frame env√≠a datos al script php en el servidor.  El servidor responde en el i-frame, el i-frame responde en el script de fondo, el script de fondo responde en el √≠ndice, el usuario ve la respuesta.  Uff ... Y lo m√°s importante: ¬°todo funcion√≥! <br><br>  En general, esto no funcion√≥.  Google envolvi√≥ mi extensi√≥n con una serie de formulaciones, entre las cuales hab√≠a algo vago que, dicen, su extensi√≥n no cumple con nuestra pol√≠tica de seguridad.  A trav√©s de la correspondencia con el apoyo, pude lograr detalles.  Es decir, no les gust√≥ el hecho de que la extensi√≥n extrae html y js de servidores de terceros ... En general, tuve que terminar con la autorizaci√≥n del cliente y volver al servidor.  S√≠, el env√≠o de una solicitud de publicaci√≥n http desde un script de extensi√≥n en segundo plano directamente a su servidor, sin embargo, result√≥ estar permitido.  Bien  Eso es incluso mejor.  Result√≥ m√°s corto y no es necesario extraer la API de JavaScript de las redes sociales; este es un tiempo de espera adicional para el usuario. <br><br><h3>  Ver pesta√±as </h3><br>  Volver a las opciones de expansi√≥n.  La lista de pesta√±as en s√≠ es una serie de l√≠neas en las que primero aparece el favicon de la imagen, luego el t√≠tulo de la p√°gina y finalmente el enlace.  Lo que no cabe en el tama√±o de l√≠nea designado en la pantalla se recorta.  Pero la base de datos se guarda por completo.  Adem√°s, cualquier l√≠nea se puede mover hacia arriba de la pantalla en forma de mosaico de color.  Esto es para los sitios m√°s importantes que deben estar ante sus ojos en primer lugar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9v/7_/7q/9v7_7qc9d8rbacokyuyloyuxths.jpeg"></div><br>  <i>Lista de pesta√±as de Chrome</i> <br><br>  Los colores para los mosaicos se seleccionan autom√°ticamente en funci√≥n del nombre de dominio del sitio.  La funci√≥n acepta la url.  El nombre de dominio se divide en tres grupos de caracteres aproximadamente iguales: los primeros caracteres de cada grupo se convierten a los valores de los componentes de color: R, G, B. Esta conversi√≥n se realiza de la siguiente manera.  Los c√≥digos de estos tres caracteres se reducen al rango d1, de 0 a 25, al tomar el resto de la divisi√≥n en 26. Incluso los caracteres del alfabeto ruso se reducir√°n a este rango.  No importa que la letra 27 se convierta en la primera: no necesitamos que los componentes de color de todas las letras del alfabeto sean necesariamente diferentes, perm√≠tales repetirlos.  Luego, los tres n√∫meros obtenidos del rango d1 (0 ... 25) se reducen proporcionalmente al rango d2 (150 ... 255).  En general, estos rangos se establecen al comienzo de la funci√≥n y se pueden cambiar a cualquier otro.  Tom√© 150 ... 255 para que los componentes de color sean brillantes.  Si establece, por ejemplo, 0 ... 100, los mosaicos se volver√°n oscuros.  Por lo tanto, tres caracteres del nombre de dominio se convierten en 3 n√∫meros del rango 150 ... 255.  Y luego, como probablemente haya adivinado, se interpretan como los componentes de color de los mosaicos R, G y B. Todo es muy simple. <br><br><pre> <code class="javascript hljs">getSiteColor=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d1=[<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">25</span></span>], d2=[<span class="hljs-number"><span class="hljs-number">150</span></span>,<span class="hljs-number"><span class="hljs-number">255</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> code=<span class="hljs-number"><span class="hljs-number">0</span></span>, codep=<span class="hljs-number"><span class="hljs-number">0</span></span>, color=<span class="hljs-number"><span class="hljs-number">0</span></span>, str=<span class="hljs-string"><span class="hljs-string">''</span></span>, domen=<span class="hljs-string"><span class="hljs-string">''</span></span>, ar=[], inc=<span class="hljs-number"><span class="hljs-number">0</span></span>; ar=url.split(<span class="hljs-string"><span class="hljs-string">'//'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ar.length&gt;<span class="hljs-number"><span class="hljs-number">1</span></span>) {str=ar[<span class="hljs-number"><span class="hljs-number">1</span></span>];} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {str=ar[<span class="hljs-number"><span class="hljs-number">0</span></span>];}; str=str.split(<span class="hljs-string"><span class="hljs-string">'www.'</span></span>).join(<span class="hljs-string"><span class="hljs-string">''</span></span>); domen=str.split(<span class="hljs-string"><span class="hljs-string">'/'</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>]; str=domen.split(<span class="hljs-string"><span class="hljs-string">'.'</span></span>).join(<span class="hljs-string"><span class="hljs-string">''</span></span>); ar=[]; inc=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(str.length/<span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str.length % <span class="hljs-number"><span class="hljs-number">3</span></span> &gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) {inc++;}; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;str.length; i+=inc) { code=str.slice(i, i+<span class="hljs-number"><span class="hljs-number">1</span></span>).charCodeAt(<span class="hljs-number"><span class="hljs-number">0</span></span>); codep=code % (d1[<span class="hljs-number"><span class="hljs-number">1</span></span>]-d1[<span class="hljs-number"><span class="hljs-number">0</span></span>]+<span class="hljs-number"><span class="hljs-number">1</span></span>); color=<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.round( codep * (d2[<span class="hljs-number"><span class="hljs-number">1</span></span>]-d2[<span class="hljs-number"><span class="hljs-number">0</span></span>]) / (d1[<span class="hljs-number"><span class="hljs-number">1</span></span>]-d1[<span class="hljs-number"><span class="hljs-number">0</span></span>]) ) + d2[<span class="hljs-number"><span class="hljs-number">0</span></span>]; ar.push(color); }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-attr"><span class="hljs-attr">r</span></span>:ar[<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-attr"><span class="hljs-attr">g</span></span>:ar[<span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-attr"><span class="hljs-attr">b</span></span>:ar[<span class="hljs-number"><span class="hljs-number">2</span></span>], <span class="hljs-attr"><span class="hljs-attr">domen</span></span>:domen}; }</code> </pre> <br><h3>  Estructura de documentos html </h3><br>  Un documento html consta de varios elementos de lienzo con posicionamiento absoluto, combinados por superposici√≥n, y un bloque div en el que se muestra la lista.  Se cuelga una funci√≥n en el tama√±o de la ventana del navegador que cambia el tama√±o de todos estos elementos, ajust√°ndolos a la nueva altura y anchura.  Tambi√©n hay un tama√±o m√≠nimo, superaci√≥n que provoca la aparici√≥n de barras de desplazamiento.  La imagen de fondo se muestra en el lienzo inferior.  Decid√≠ que para diferentes listas (es decir, computadoras), se deben establecer diferentes fondos para facilitar la navegaci√≥n del usuario.  La imagen de fondo llena una ventana con la preservaci√≥n de sus proporciones y se ilumina un poco para no llamar la atenci√≥n: se dibuja un rect√°ngulo blanco transl√∫cido encima.  Sobre el lienzo de fondo se encuentra el lienzo del men√∫ principal, solo llena la parte superior de la pantalla.  Bueno e incluso m√°s arriba se encuentra el bloque div, en el que se forma la lista de pesta√±as.  La navegaci√≥n del men√∫ del lienzo se realiza a trav√©s de mi mini biblioteca. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hf/yo/7z/hfyo7zhfazg4zngh50ulh7mibte.jpeg"></div><br>  <i>Navegador Opera y Yandex</i> <br><br><h3>  Localizaci√≥n </h3><br>  En la pantalla principal hay una bandera, al hacer clic en la cual la interfaz cambia entre ruso e ingl√©s.  Aqu√≠ la p√°gina se redirige a la misma direcci√≥n, pero con un par√°metro en la l√≠nea de comando.  Este par√°metro se lee antes de cargar todos los dem√°s elementos.  Y en funci√≥n de su valor, este o aquel archivo js con frases en ruso o ingl√©s se carga en la matriz asociativa para frases: lng_en.js o lng_ru.js.  Y en la aplicaci√≥n misma, para mostrar frases de interfaz, ya se utilizan enlaces a cadenas de texto de esta matriz asociativa.  Adem√°s, dependiendo del valor en la barra de direcciones, se carga un archivo que contiene los elementos de la interfaz gr√°fica: botones: buttons_en.png o buttons_ru.png.  Decid√≠ que es mejor crear botones junto con los √≠conos e inscripciones en cada idioma en el editor de gr√°ficos que crear un bot√≥n vac√≠o e superponer √≠conos e inscripciones en √©l, especialmente porque no hay muchos de ellos y toda esta lista de sprites pesa solo 50 Kb  Planeo continuar trabajando en el dise√±o y hacer que todos los botones tengan diferentes formas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4j/42/i8/4j42i89k06pbdosro4pe1ytjm50.jpeg"></div><br><br>  El archivo general con sprites main.png, que contiene elementos gr√°ficos que no est√°n vinculados a una localizaci√≥n espec√≠fica, se carga de todos modos. <br><br><h3>  Versi√≥n web </h3><br>  Pens√© que ser√≠a bueno si los enlaces cuidadosamente almacenados desde la computadora de la casa o el trabajo pudieran verse desde el tel√©fono.  Pero no todos los navegadores de sistemas operativos m√≥viles admiten extensiones.  Entonces cre√© un ensamblaje web.  Al visitar el sitio en una direcci√≥n espec√≠fica, a√∫n puede iniciar sesi√≥n en una de las redes sociales y ver sus pesta√±as. <br><br>  S√≠, no hay forma de agregar pesta√±as a la lista o editar.  Pero al menos puede abrir pesta√±as de la lista y ver las p√°ginas.  Creo que vale la pena trabajar en la versi√≥n m√≥vil de este sitio y mostrar listas m√°s grandes de pesta√±as en √©l. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vh/h8/3p/vhh83pbba9_0rje4wdcjtye33ve.jpeg"></div><br>  <i>Versi√≥n web en IE 11</i> <br><br><h3>  Publicidad </h3><br>  Realmente no he trabajado en promover mi expansi√≥n hasta ahora.  Acaba de crear grupos en las redes sociales e invit√≥ a todos sus amigos all√≠.  S√≠, lanz√≥ una campa√±a publicitaria en Yandex Direct por 1.500 rublos.  Ella no dio ning√∫n resultado especial, pero tal vez no hice el anuncio correctamente.  O tal vez el problema es que indiqu√© un enlace a la versi√≥n en ingl√©s de la p√°gina de inicio de la extensi√≥n.  Y tal vez vali√≥ la pena dar un enlace no a la p√°gina de inicio, sino inmediatamente a una de las tiendas de extensiones.  Como sabes, no soy un genio del marketing.  En general, intentar√© nuevamente con otros par√°metros.  La campa√±a dio 39 clics.  Es dif√≠cil decir si adquir√≠ algunos usuarios nuevos como resultado de ello. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/89/sb/dg/89sbdgtfmp59-vykztuj4i-z3li.jpeg"></div><br>  Hab√≠a una rareza con la versi√≥n en Firefox. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/k5/ku/so/k5kuso8qgka09q2ahx76mettkmo.jpeg"></div><br>  Las estad√≠sticas del 17 de octubre muestran hasta 227 descargas.  No s√© si la campa√±a en Yandex.Direct contribuy√≥ a esto o no, pero por alguna raz√≥n, 1-2 descargas por d√≠a nuevamente contin√∫an por alguna raz√≥n.  Al mismo tiempo, para la extensi√≥n de Firefox existe el concepto de usuarios diarios: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/h2/8j/2c/h28j2cd3ylazbx7nnqflnqghsmu.jpeg"></div><br>  Por qu√© hubo 227 descargas, pero solo hubo 1-2 usuarios diarios, no est√° claro.  Quiz√°s fue alg√∫n tipo de fracaso.  En general, todav√≠a no entend√≠a qu√© era y d√≥nde est√°n todas estas personas ... <br><br>  Las estad√≠sticas en la tienda de extensiones de Chrome Web Store complacieron un horario eternamente sin carga, eso es lo que no vi, y de 5 a 10 usuarios diarios. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dt/2u/zt/dt2uzt-5i74e8m947qxfntmuhgs.jpeg"></div><br>  Adem√°s, envi√© el ensamblaje a la tienda de extensiones de Opera.  Sin embargo, despu√©s de haber presentado dos versiones y sin esperar la moderaci√≥n de ninguna de ellas, en alg√∫n momento escup√≠ sobre la difusi√≥n de otras nuevas all√≠.  Y, de hecho, ¬øpor qu√© es esto necesario si Opera instala perfectamente las extensiones de la tienda Chrome? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/or/6l/kt/or6lkthk4ovyqbuv3_hsyf8ypny.jpeg"></div><br><h3>  Resumen </h3><br>  Cre√© tres compilaciones de extensiones: para Chrome, Firefox y la versi√≥n web.  En realidad, los tres conjuntos son uno y el mismo conjunto, lo que simplemente indica en la configuraci√≥n qu√© motor de navegador se est√° utilizando actualmente.  Y se inicializan las funciones correspondientes para trabajar con pesta√±as.  Modifico este valor antes de empacar en zip y enviar el paquete a la tienda de extensi√≥n adecuada. <br><br>  Las versiones para Chrome y Firefox han sido probadas y colocadas en sus respectivas tiendas de extensiones oficiales.  Adem√°s, el registro como desarrollador de extensiones con Google cuesta $ 5.  Mozilla lo tiene gratis.  La versi√≥n web de la extensi√≥n se encuentra en el servidor.  El ensamblaje de la tienda Chrome funciona bien en navegadores compatibles: tambi√©n se puede instalar en Yandex Browser y Opera.  Planeo lanzar nuevas versiones con caracter√≠sticas a√∫n m√°s avanzadas. <br><br>  En general, las extensiones del navegador son poderosas.  Ahora no necesito levantarme del sof√°, y tampoco hay necesidad de ira para romper la tableta.  Esto es completo Zen.  Bueno para todos </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es427773/">https://habr.com/ru/post/es427773/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es427759/index.html">Sobre la solvencia de los problemas de circunvalaci√≥n en tiempo polin√≥mico</a></li>
<li><a href="../es427761/index.html">Implementaci√≥n del algoritmo k-means (k-means) usando el ejemplo de trabajar con p√≠xeles</a></li>
<li><a href="../es427763/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 13: Protocolos de red, Parte 1</a></li>
<li><a href="../es427767/index.html">Situaci√≥n: en Canad√° propusieron introducir un impuesto a la transmisi√≥n; estamos discutiendo cu√°l es el problema</a></li>
<li><a href="../es427771/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 13: Protocolos de red, parte 2</a></li>
<li><a href="../es427775/index.html">Un bot disfrazado de programador corrige errores en el c√≥digo</a></li>
<li><a href="../es427779/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 13: Protocolos de red, Parte 3</a></li>
<li><a href="../es427781/index.html">¬øPor qu√© las organizaciones de cr√©dito?</a></li>
<li><a href="../es427783/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 14: "SSL y HTTPS", parte 1</a></li>
<li><a href="../es427785/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 14: "SSL y HTTPS", parte 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>