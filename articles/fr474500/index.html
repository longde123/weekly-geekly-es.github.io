<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§í ‚òùüèΩ üë©üèø‚Äç‚öñÔ∏è D√©veloppement de plugins pour Grafana: l'histoire des c√¥nes pleins üò£ ‚òïÔ∏è ‚û°Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! Il y a quelques mois, nous avons lanc√© notre nouveau projet open-source, le plugin Grafana pour surveiller les kubernetes, appel√© DevO...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©veloppement de plugins pour Grafana: l'histoire des c√¥nes pleins</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/474500/">  Bonjour √† tous!  Il y a quelques mois, nous avons lanc√© notre nouveau projet open-source, le plugin Grafana pour surveiller les kubernetes, appel√© <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DevOpsProdigy KubeGraf, en production</a></b> .  Le code source du plugin est disponible dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©f√©rentiel public sur GitHub</a> .  Et dans cet article, nous voulons partager avec vous une histoire sur la fa√ßon dont nous avons cr√©√© le plug-in, quels outils nous avons utilis√©s et quels pi√®ges nous avons rencontr√©s au cours du processus de d√©veloppement.  C'est parti! <br><a name="habracut"></a><br><h4>  Partie 0 - introduction: comment en sommes-nous arriv√©s l√†? </h4><br>  L'id√©e d'√©crire notre propre plugin pour Grafan est n√©e par hasard.  Notre entreprise surveille des projets Web de diff√©rents niveaux de complexit√© depuis plus de 10 ans.  Pendant ce temps, nous avons acquis une grande expertise, des cas int√©ressants et une exp√©rience dans l'utilisation de divers syst√®mes de surveillance.  Et √† un moment donn√©, nous nous sommes demand√©: ¬´Existe-t-il un outil magique pour surveiller Kubernetes, de sorte que, comme on dit,¬´ r√©gler et oublier ¬ª¬ª? .. Promstandart pour surveiller les k8, bien s√ªr, a longtemps √©t√© un groupe de Prom√©th√©e + Grafana.  Et comme solutions pr√™tes √† l'emploi pour cette pile, il existe un large √©ventail d'outils diff√©rents: prometheus-operator, ensemble de tableaux de bord kubernetes-mixin, grafana-kubernetes-app. <br><br>  Le plugin grafana-kubernetes-app semblait √™tre l'option la plus int√©ressante pour nous, mais il n'a pas √©t√© pris en charge depuis plus d'un an et, de plus, il ne sait pas comment travailler avec les nouvelles versions de node-exporter et kube-state-metrics.  Et √† un moment donn√©, nous avons d√©cid√©: "Mais ne prenons-nous pas notre propre d√©cision?" <br><br>  Quelles id√©es nous avons d√©cid√© de mettre en ≈ìuvre dans notre plugin: <br><br><ul><li>  visualisation de la "carte des applications": pr√©sentation pratique des applications dans le cluster, regroup√©es par espace de noms, d√©ploiement ...; </li><li>  visualisation des connexions de la forme "d√©ploiement - service (+ ports)". </li><li>  visualisation de la distribution des applications de cluster par des hochements de t√™te de cluster. </li><li>  collecte de m√©triques et d'informations √† partir de plusieurs sources: Prometheus et k8s api server. </li><li>  surveillance √† la fois de la partie infrastructure (utilisation du temps processeur, de la m√©moire, du sous-syst√®me de disque, du r√©seau) et de la logique d'application - modules d'√©tat de sant√©, nombre de r√©pliques disponibles, informations sur le passage des √©chantillons de vivacit√© / disponibilit√©. </li></ul><br>
<h4>  Partie 1: Qu'est-ce que le plugin Grafana? </h4><br>  D'un point de vue technique, le plugin pour Grafana est un contr√¥leur angulaire qui est stock√© dans le r√©pertoire de donn√©es <i>Grafana</i> ( <i>/var/grafana/plugins/&lt;votre_nom_plugin&gt;/dist/module.js</i> ) et peut √™tre charg√© en tant que module SystemJS.  Ce fichier doit √©galement contenir un fichier plugin.json contenant toutes les m√©ta-informations sur votre plugin: nom, version, type de plugin, liens vers le r√©f√©rentiel / site / licence, d√©pendances, etc. <br><br><img src="https://habrastorage.org/webt/ln/rz/kf/lnrzkf9mc6n6xcyn6iciuvak6cy.png"><br>  <i>module.ts</i> <br><br><img src="https://habrastorage.org/webt/lf/mk/3x/lfmk3xekikfm-p0y-donjv3rvw4.png"><br>  <i>plugin.json</i> <br><br>  Comme vous pouvez le voir sur la capture d'√©cran, nous avons sp√©cifi√© plugin.type = app.  Les plugins pour Grafana peuvent √™tre de trois types: <br><br>  <b>panneau</b> : le type de plug-in le plus courant - c'est un panneau pour visualiser toutes les mesures, il est utilis√© pour cr√©er divers tableaux de bord. <br>  <b>source de donn√©es</b> : connecteur enfichable vers n'importe quelle source de donn√©es (par exemple, Prometheus-datasource, ClickHouse-datasource, ElasticSearch-datasource). <br>  <b>app</b> : un plugin qui vous permet de cr√©er votre propre application frontend √† l'int√©rieur de Grafana, de cr√©er vos propres pages html et d'acc√©der manuellement √† la source de donn√©es pour visualiser diverses donn√©es.  De plus, des plugins d'autres types (source de donn√©es, panneau) et divers tableaux de bord peuvent √™tre utilis√©s comme d√©pendances. <br><br><img src="https://habrastorage.org/webt/x_/f-/3x/x_f-3x9bj18pz5zfvmx2yzg-9gg.png"><br>  <i>Un exemple de d√©pendances de plugin avec type = app</i> . <br><br>  En tant que langage de programmation, vous pouvez utiliser √† la fois JavaScript et TypeScript (nous l'avons choisi).  Vous pouvez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">trouver les</a> blancs pour les plug-ins hello-world de tout type <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> : dans ce r√©f√©rentiel il y a un grand nombre de packs de d√©marrage (il y a m√™me un exemple exp√©rimental d'un plugin sur React) avec des constructeurs pr√©-install√©s et configur√©s. <br><br><h4>  Partie 2: pr√©parer votre environnement local </h4><br>  Pour travailler sur le plugin, nous avons naturellement besoin d'un cluster kubernetes avec tous les outils pr√©install√©s: prometheus, node-exporter, kube-state-metrics, grafana.  L'environnement doit √™tre configur√© rapidement, facilement et naturellement, et pour fournir des donn√©es de rechargement √† chaud, le r√©pertoire Grafana doit √™tre mont√© directement √† partir de la machine du d√©veloppeur. <br><br>  √Ä notre avis, la fa√ßon la plus pratique de travailler localement avec kubernetes est le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">minikube</a> .  L'√©tape suivante consiste √† √©tablir le bundle Prometheus + Grafana √† l'aide de l'op√©rateur prometheus.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cet article</a> d√©taille le processus d'installation de prometheus-operator sur minikube.  Pour activer la persistance, vous devez d√©finir le param√®tre <i>persistence: true</i> dans le fichier charts / grafana / values.yaml, ajouter vos propres PV et PVC et les sp√©cifier dans le param√®tre persistence.existingClaim <br><br>  Le script de lancement final du minikube ressemble √† ceci: <br><br><pre><code class="plaintext hljs">minikube start --kubernetes-version=v1.13.4 --memory=4096 --bootstrapper=kubeadm --extra-config=scheduler.address=0.0.0.0 --extra-config=controller-manager.address=0.0.0.0 minikube mount /home/sergeisporyshev/Projects/Grafana:/var/grafana --gid=472 --uid=472 --9p-version=9p2000.L</code> </pre> <br><h4>  Partie 3: le d√©veloppement lui-m√™me </h4><br>  <b>Mod√®le d'objet</b> <br><br>  En pr√©paration de l'impl√©mentation du plugin, nous avons d√©cid√© de d√©crire toutes les entit√©s Kubernetes de base avec lesquelles nous travaillerons en tant que classes TypeScript: pod, d√©ploiement, daemonset, statefulset, job, cronjob, service, node, namespace.  Chacune de ces classes h√©rite de la classe BaseModel commune, qui d√©crit le constructeur, le destructeur, les m√©thodes de mise √† jour et de changement de visibilit√©.  Chacune des classes d√©crit les relations imbriqu√©es avec d'autres entit√©s, par exemple, une liste de pods pour une entit√© de type d√©ploiement. <br><br><pre> <code class="plaintext hljs">import {Pod} from "./pod"; import {Service} from "./service"; import {BaseModel} from './traits/baseModel'; export class Deployment extends BaseModel{ pods: Array&lt;Pod&gt;; services: Array&lt;Service&gt;; constructor(data: any){ super(data); this.pods = []; this.services = []; } }</code> </pre> <br>  √Ä l'aide de getters et setters, nous pouvons afficher ou d√©finir les m√©triques des entit√©s dont nous avons besoin d'une mani√®re pratique et lisible.  Par exemple, la sortie format√©e des n≈ìuds CPU allouables: <br><br><pre> <code class="plaintext hljs">get cpuAllocatableFormatted(){ let cpu = this.data.status.allocatable.cpu; if(cpu.indexOf('m') &gt; -1){ cpu = parseInt(cpu)/1000; } return cpu; }</code> </pre> <br>  <b>Pages</b> <br><br>  Une liste de toutes les pages de notre plugin est initialement d√©crite dans notre pluing.json dans la section des d√©pendances: <br><br><img src="https://habrastorage.org/webt/vs/ij/b_/vsijb_avnlpat0ukzzgikcgmh4m.png"><br><br>  Dans le bloc de chaque page, nous devons indiquer le TITRE DE PAGE (il sera ensuite converti en slug, par lequel cette page sera disponible);  nom du composant responsable du fonctionnement de cette page (la liste des composants est export√©e vers module.ts);  sp√©cifiant le r√¥le de l'utilisateur pour lequel l'acc√®s √† cette page est disponible et les param√®tres de navigation pour la barre lat√©rale. <br><br>  Dans le composant responsable du fonctionnement de la page, nous devons installer templateUrl, en y passant le chemin du fichier html avec balisage.  √Ä l'int√©rieur du contr√¥leur, gr√¢ce √† l'injection de d√©pendances, nous pouvons acc√©der √† jusqu'√† 2 services angulaires importants: <br><br><ul><li>  backendSrv - un service qui fournit une interaction avec le serveur api grafana; </li><li>  datasourceSrv - un service qui fournit une interaction locale avec toutes les sources de donn√©es install√©es dans votre Grafana (par exemple, la m√©thode .getAll () - renvoie une liste de toutes les sources de donn√©es install√©es'ov; .get (&lt;nom&gt;) - renvoie un objet instance d'une source de donn√©es particuli√®re. </li></ul><br><img src="https://habrastorage.org/webt/hd/ss/w8/hdssw8bsserz_p6ffzvuq49xbxs.png"><br><br><img src="https://habrastorage.org/webt/ps/we/ke/pswekesfljdpxjyedl4loxyuu_4.png"><br><br><img src="https://habrastorage.org/webt/aw/hv/ks/awhvksak5uamftrs_kwvbxdo71k.png"><br><br><h4>  Partie 4: source de donn√©es </h4><br>  Du point de vue de Grafana, la source de donn√©es est exactement le m√™me plug-in que tout le monde: elle a son propre point d'entr√©e module.js, il y a un fichier avec meta-information plugin.json.  Lors du d√©veloppement d'un plugin avec type = app, nous pouvons interagir avec la source de donn√©es existante (par exemple, prometheus-datasource), ainsi que la n√¥tre, que nous pouvons stocker directement dans le r√©pertoire du plugin (dist / datasource / *) ou d√©finir comme une d√©pendance.  Dans notre cas, la source de donn√©es est livr√©e avec le code du plugin.  Il est √©galement obligatoire que vous ayez le mod√®le config.html et le contr√¥leur ConfigCtrl qui seront utilis√©s pour la page de configuration de l'instance de source de donn√©es et le contr√¥leur de source de donn√©es, qui impl√©mente la logique de votre source de donn√©es. <br><br>  Dans le plugin KubeGraf, du point de vue de l'interface utilisateur, la source de donn√©es est une instance du cluster kubernetes dans lequel les fonctionnalit√©s suivantes sont impl√©ment√©es (le code source est disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">par r√©f√©rence</a> ): <br><br><ul><li>  collecte de donn√©es depuis le serveur api k8s (obtention d'une liste de namespace'ov, deployment'ov ...) </li><li>  les demandes de proxy dans prometheus-datasource (qui est s√©lectionn√© dans les param√®tres du plug-in pour chaque cluster sp√©cifique) et les r√©ponses de formatage pour l'utilisation des donn√©es dans les pages statiques et les tableaux de bord. </li><li>  mise √† jour des donn√©es sur les pages statiques du plugin (avec le taux de rafra√Æchissement d√©fini). </li><li>  traitement des demandes de g√©n√©ration d'une liste de mod√®les dans les tableaux de bord grafana (m√©thode .metriFindQuery ()) </li></ul><br><img src="https://habrastorage.org/webt/m0/dp/eg/m0dpeghprcomipkozpjqmwle888.png"><br><br><img src="https://habrastorage.org/webt/kg/il/f5/kgilf58m2_urrtf9ad9cbdqoiby.png"><br><br><img src="https://habrastorage.org/webt/zh/em/xa/zhemxa8z6uu7mf6tflfbzqbuf-m.png"><br><br><ul><li>  tester la connexion avec le cluster final k8s. </li></ul><br><br><pre> <code class="plaintext hljs">testDatasource(){ let url = '/api/v1/namespaces'; let _url = this.url; if(this.accessViaToken) _url += '/__proxy'; _url += url; return this.backendSrv.datasourceRequest({ url: _url, method: "GET", headers: {"Content-Type": 'application/json'} }) .then(response =&gt; { if (response.status === 200) { return {status: "success", message: "Data source is OK", title: "Success"}; }else{ return {status: "error", message: "Data source is not OK", title: "Error"}; } }, error =&gt; { return {status: "error", message: "Data source is not OK", title: "Error"}; }) }</code> </pre> <br>  Un point int√©ressant distinct, √† notre avis, est la mise en ≈ìuvre du m√©canisme d'authentification et d'autorisation pour la source de donn√©es.  En r√®gle g√©n√©rale, d√®s la configuration de l'acc√®s √† la source de donn√©es finale, nous pouvons utiliser le composant Grafana int√©gr√© - datasourceHttpSettings.  √Ä l'aide de ce composant, nous pouvons configurer l'acc√®s √† la source de donn√©es http en sp√©cifiant l'url et les param√®tres d'authentification / autorisation de base: login-password ou client-cert / client-key.  Afin de r√©aliser la possibilit√© de configurer l'acc√®s √† l'aide d'un jeton au porteur (de facto la norme pour les k8), j'ai d√ª faire un peu de "chimie". <br><br>  Pour r√©soudre ce probl√®me, vous pouvez utiliser le m√©canisme int√©gr√© de ¬´Plugin Routes¬ª de Grafana (plus sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">page de documentation officielle</a> ).  Dans les param√®tres de notre source de donn√©es, nous pouvons d√©clarer un ensemble de r√®gles de routage qui seront trait√©es par le serveur proxy grafana.  Par exemple, pour chaque point de terminaison individuel, il est possible d'apposer des en-t√™tes ou des URL avec la possibilit√© de cr√©er un mod√®le, dont les donn√©es peuvent √™tre extraites des champs jsonData et secureJsonData (pour stocker des mots de passe ou des jetons sous forme crypt√©e).  Dans notre exemple, les requ√™tes du formulaire <i>/ __ proxy / api / v1 / namespaces</i> seront transmises par proxy √† l'url du formulaire <br>  &lt;your_k8s_api_url&gt; / api / v1 / namespaces avec l'en-t√™te Authorization: Bearer. <br><br><img src="https://habrastorage.org/webt/ht/xt/nm/htxtnmm0hw6xg0wutfdr11kx1a4.png"><br><br><img src="https://habrastorage.org/webt/mj/z8/ra/mjz8razkuln7puiqzwuplxhfqc4.png"><br><br>  Naturellement, pour travailler avec le serveur api k8s, nous avons besoin d'un utilisateur avec des acc√®s en lecture seule, le manifeste de cr√©ation que vous pouvez √©galement trouver dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code source du plugin</a> . <br><br><h4>  Partie 5: lib√©ration </h4><br><img src="https://habrastorage.org/webt/wx/hb/bl/wxhbbl4dw6dszbcic1hhe9g5pte.jpeg"><br><br>  Apr√®s avoir √©crit votre propre plugin pour Grafana, vous voudrez naturellement le mettre dans le domaine public.  Grafana est une biblioth√®que de plugins disponible sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">grafana.com/grafana/plugins</a> <br><br>  Pour que votre plugin soit disponible dans la boutique officielle, vous devez faire des relations publiques dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce r√©f√©rentiel</a> en ajoutant le contenu suivant au fichier repo.json: <br><br><img src="https://habrastorage.org/webt/bk/cf/nt/bkcfntnwmmnx8scgebsbtxpgjfk.png"><br><br>  o√π version est la version de votre plugin, url est un lien vers le r√©f√©rentiel, et commit est un hachage du commit, par lequel une version sp√©cifique du plugin sera disponible. <br><br>  Et √† la sortie, vous verrez une merveilleuse image du formulaire: <br><br><img src="https://habrastorage.org/webt/j3/cb/ul/j3cbulols6yx4buc_ysgd9qffdo.png"><br><br>  Les donn√©es seront automatiquement extraites de votre fichier Lisezmoi.md, Changelog.md et du fichier plugin.json avec la description du plugin. <br><br><h4>  Partie 6: au lieu de conclusions </h4><br>  Nous n'avons pas arr√™t√© de d√©velopper notre plugin apr√®s la sortie.  Et maintenant, nous travaillons sur la surveillance correcte de l'utilisation des ressources des n≈ìuds de cluster, l'introduction de nouvelles fonctionnalit√©s pour augmenter l'UX, et nous r√©coltons √©galement une grande quantit√© de commentaires re√ßus apr√®s l'installation du plugin √† la fois par nos clients et depuis l'ishui sur le github (si vous laissez votre probl√®me ou tirez une demande, je Je serai tr√®s content :-)). <br><br>  Nous esp√©rons que cet article vous aidera √† comprendre un outil aussi g√©nial que Grafana et, √©ventuellement, √† √©crire votre propre plugin. <br><br>  Merci!) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr474500/">https://habr.com/ru/post/fr474500/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr474490/index.html">Le moment est venu: Pr√©sentation de l'aspirateur nasal Coclean</a></li>
<li><a href="../fr474492/index.html">R√©agissez au chat multi-utilisateurs avec le backend Chatix</a></li>
<li><a href="../fr474494/index.html">Comment s'est pass√© le Zabbix Summit 2019</a></li>
<li><a href="../fr474496/index.html">Bases de donn√©es sur HighLoad ++ 2019</a></li>
<li><a href="../fr474498/index.html">Tutoriel JavaFX: Hello World</a></li>
<li><a href="../fr474502/index.html">Analyse d'Odnoklassniki au Joker 2019</a></li>
<li><a href="../fr474504/index.html">Backend orthodoxe</a></li>
<li><a href="../fr474508/index.html">R√©alisations de la bio-impression 3D des greffes de peau</a></li>
<li><a href="../fr474514/index.html">Comment survivent les magnats chinois de l'exploitation mini√®re du Bitcoin</a></li>
<li><a href="../fr474516/index.html">Applications vocales: le milliardi√®me march√© que la Russie ne remarque pas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>