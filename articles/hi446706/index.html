<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСитАНЁЯСйтАНЁЯСз ЁЯСйЁЯП╗тАНЁЯФм ЁЯНе PostgreSQL рдореЗрдВ рд╕рдорд╛рдирд╛рдВрддрд░ рдХреНрд╡реЗрд░реА ЁЯОЕЁЯП╗ ЁЯША ЁЯзЫЁЯП╗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЖрдзреБрдирд┐рдХ рд╕реАрдкреАрдпреВ рдореЗрдВ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдХреЛрд░ рд╣реИрдВред рд╡рд░реНрд╖реЛрдВ рдХреЗ рд▓рд┐рдП, рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдиреЗ рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдкреНрд░рд╢реНрди рднреЗрдЬреЗ рд╣реИрдВред рдпрджрд┐ рдпрд╣ рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдХрдИ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдП...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PostgreSQL рдореЗрдВ рд╕рдорд╛рдирд╛рдВрддрд░ рдХреНрд╡реЗрд░реА</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/446706/"><p><img src="https://habrastorage.org/webt/kx/ht/dl/kxhtdlsry_f8p1jv2ve_1ziks7e.jpeg"></p><br><p>  рдЖрдзреБрдирд┐рдХ рд╕реАрдкреАрдпреВ рдореЗрдВ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдХреЛрд░ рд╣реИрдВред  рд╡рд░реНрд╖реЛрдВ рдХреЗ рд▓рд┐рдП, рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдиреЗ рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЛ рдкреНрд░рд╢реНрди рднреЗрдЬреЗ рд╣реИрдВред  рдпрджрд┐ рдпрд╣ рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдХрдИ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд░рд┐рдкреЛрд░реНрдЯрд┐рдВрдЧ рдХреНрд╡реЗрд░реА рд╣реИ, рддреЛ рдпрд╣ рддреЗрдЬреА рд╕реЗ рдЪрд▓рддрд╛ рд╣реИ рдЬрдм рдпрд╣ рдХрдИ рд╕реАрдкреАрдпреВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдФрд░ PostgreSQL рдореЗрдВ рд╕рдВрд╕реНрдХрд░рдг 9.6 рд╕реЗ рд╢реБрд░реВ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред </p><br><p>  рд╕рдорд╛рдирд╛рдВрддрд░ рдХреНрд╡реЗрд░реА рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдореЗрдВ 3 рд╕рд╛рд▓ рд▓рдЧ рдЧрдП - рдореБрдЭреЗ рдХреНрд╡реЗрд░реА рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдЪрд░рдгреЛрдВ рдореЗрдВ рдХреЛрдб рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдирд╛ рдкрдбрд╝рд╛ред  PostgreSQL 9.6 рдиреЗ рдХреЛрдб рдХреЛ рдФрд░ рдмреЗрд╣рддрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪрд╛ рдкреЗрд╢ рдХрд┐рдпрд╛ред  рдмрд╛рдж рдХреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ, рдЕрдиреНрдп рдкреНрд░рдХрд╛рд░ рдХреЗ рдкреНрд░рд╢реНрдиреЛрдВ рдХреЛ рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><a name="habracut"></a><br><h3 id="ogranicheniya">  рдкреНрд░рддрд┐рдмрдВрдз </h3><br><ul><li>  рдпрджрд┐ рд╕рднреА рдХреЛрд░ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд▓реЗ рд▓рд┐рдП рдЧрдП рд╣реИрдВ, рддреЛ рд╕рдорд╛рдирд╛рдВрддрд░ рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рд╕рдХреНрд╖рдо рди рдХрд░реЗрдВ, рдЕрдиреНрдпрдерд╛ рдЕрдиреНрдп рдЕрдиреБрд░реЛрдз рдзреАрдорд╛ рд╣реЛ рдЬрд╛рдПрдВрдЧреЗред </li><li>  рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд, рдЙрдЪреНрдЪ WORK_MEM рдореВрд▓реНрдпреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдмрд╣реБрдд рдореЗрдореЛрд░реА рдХреА рдЦрдкрдд рдХрд░рддрд╛ рд╣реИ - рдкреНрд░рддреНрдпреЗрдХ рд╣реИрд╢ рдЬреБрдбрд╝рддреЗ рд╣реИрдВ рдпрд╛ рд╕реЙрд░реНрдЯ рдХрд╛рдо рдХреА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдореЗрдореЛрд░реА рд▓реЗрддреЗ рд╣реИрдВред </li><li>  рдХрдо рд╡рд┐рд▓рдВрдмрддрд╛ OLTP рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕рдорд╛рдирд╛рдВрддрд░ рдирд┐рд╖реНрдкрд╛рджрди рджреНрд╡рд╛рд░рд╛ рддреНрд╡рд░рд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдФрд░ рдпрджрд┐ рдХреНрд╡реЗрд░реА рдПрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рд▓реМрдЯрддреА рд╣реИ, рддреЛ рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗрд╡рд▓ рдЗрд╕реЗ рдзреАрдорд╛ рдХрд░ рджреЗрдЧрд╛ред </li><li>  рдбреЗрд╡рд▓рдкрд░реНрд╕ TPC-H рдмреЗрдВрдЪрдорд╛рд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВред  рд╢рд╛рдпрдж рдЖрдкрдХреЗ рдкрд╛рд╕ рд╕рдорд╛рдирд╛рдиреНрддрд░ рд╕рдорд╛рдирд╛рдВрддрд░ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рд╕рдорд╛рди рдкреНрд░рд╢реНрди рд╣реЛрдВред </li><li>  рдХреЗрд╡рд▓ рд╡рд┐рдзреЗрдп рддрд╛рд▓реЛрдВ рдХреЗ рдмрд┐рдирд╛ рдЪрдпрдирд┐рдд рдкреНрд░рд╢реНрдиреЛрдВ рдХреЛ рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  рдХрднреА-рдХрднреА рд╕рд╣реА рдЕрдиреБрдХреНрд░рдордг рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдЕрдиреБрдХреНрд░рдорд┐рдХ рддрд╛рд▓рд┐рдХрд╛ рд╕реНрдХреИрди рд╕реЗ рдмреЗрд╣рддрд░ рд╣реЛрддрд╛ рд╣реИред </li><li>  рдирд┐рд▓рдВрдмрд┐рдд рдкреНрд░рд╢реНрди рдФрд░ рд╢рд╛рдк рджреЗрдиреЗ рд╡рд╛рд▓реЗ рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИрдВред </li><li>  рд╡рд┐рдВрдбреЛ рдлрд╝рдВрдХреНрд╢рди рдФрд░ рдСрд░реНрдбрд░ рдХрд┐рдП рдЧрдП рд╕реЗрдЯ рдХреЗ рдХреБрд▓ рдХрд╛рд░реНрдп рд╕рдорд╛рдирд╛рдВрддрд░ рдирд╣реАрдВ рд╣реИрдВред </li><li>  рдЖрдк I / O рдХрд╛рд░реНрдпрднрд╛рд░ рдореЗрдВ рдХреБрдЫ рднреА рд╣рд╛рд╕рд┐рд▓ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред </li><li>  рдХреЛрдИ рд╕рдорд╛рдирд╛рдВрддрд░ рд╕реЙрд░реНрдЯрд┐рдВрдЧ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдирд╣реАрдВ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдХреНрд░рдордмрджреНрдз рдкреНрд░рд╢реНрдиреЛрдВ рдХреЛ рдХреБрдЫ рдкрд╣рд▓реБрдУрдВ рдореЗрдВ рд╕рдорд╛рдирд╛рдВрддрд░ рд░реВрдк рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </li><li>  рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреЗрд╕реНрдЯреЗрдб рдЪрдпрди рдХреЗ рд╕рд╛рде CTE (рдХреЗ рд╕рд╛рде ...) рдХреЛ рдмрджрд▓реЗрдВред </li><li> рддреГрддреАрдп-рдкрдХреНрд╖ рдбреЗрдЯрд╛ рд░реИрдкрд░ рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддреЗ (рд▓реЗрдХрд┐рди рд╡реЗ рдХрд░ рд╕рдХрддреЗ рдереЗ!) </li><li>  рдкреВрд░реНрдг OOO JOIN рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИред </li><li>  max_rows рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдЕрдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИред </li><li>  рдпрджрд┐ рдЕрдиреБрд░реЛрдз рдореЗрдВ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд╣реИ рдЬрд┐рд╕реЗ PARALLEL SAFE рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдпрд╣ рдПрдХрд▓-рдереНрд░реЗрдбреЗрдб рд╣реЛрдЧрд╛ред </li><li>  рд▓реЗрди-рджреЗрди рдЕрд▓рдЧрд╛рд╡ рд╕реНрддрд░ SERIALIZABLE рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИред </li></ul><br><h3 id="testovaya-sreda">  рдкрд░реНрдпрд╛рд╡рд░рдг рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ </h3><br><p>  PostgreSQL рдбреЗрд╡рд▓рдкрд░реНрд╕ рдиреЗ TPC-H рдмреЗрдВрдЪрдорд╛рд░реНрдХ рдкреНрд░рд╢реНрдиреЛрдВ рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╕рдордп рдХреЛ рдХрдо рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА рд╣реИред  рдмреЗрдВрдЪрдорд╛рд░реНрдХ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЗрд╕реЗ PostgreSQL рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░реЗрдВ</a> ред  рдпрд╣ TPC-H рдмреЗрдВрдЪрдорд╛рд░реНрдХ рдХрд╛ рдЕрдиреМрдкрдЪрд╛рд░рд┐рдХ рдЙрдкрдпреЛрдЧ рд╣реИ - рдбреЗрдЯрд╛рдмреЗрд╕ рдпрд╛ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдХреА рддреБрд▓рдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВред </p><br><ol><li>  рдбрд╛рдЙрдирд▓реЛрдб TPC-H_Tools_v2.17.3.zip (рдпрд╛ рдПрдХ рдирдпрд╛ рд╕рдВрд╕реНрдХрд░рдг) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдСрдл-рд╕рд╛рдЗрдЯ TPC рд╕реЗ</a> ред </li><li>  Makefile.suite рдХреЛ Makefile рдХрд╛ рдирд╛рдо рдмрджрд▓реЗрдВ рдФрд░ рдпрд╣рд╛рдБ рдмрддрд╛рдП рдЕрдиреБрд╕рд╛рд░ рдмрджрд▓реЗрдВ: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/tvondra/pg_ppch</a>  рдХреЛрдб рдХреЛ рдореЗрдХ рдХрдорд╛рдВрдб рд╕реЗ рд╕рдВрдХрд▓рд┐рдд рдХрд░реЗрдВред </li><li> рдбреЗрдЯрд╛ рдЬрдирд░реЗрдЯ рдХрд░реЗрдВ: <code>./dbgen -s 10</code> рдПрдХ 23 GB рдбреЗрдЯрд╛рдмреЗрд╕ рдмрдирд╛рддрд╛ рд╣реИред  рдпрд╣ рд╕рдорд╛рдирд╛рдВрддрд░ рдФрд░ рдЧреИрд░-рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рдЕрдВрддрд░ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред </li><li>  рдХреЗ <code>csv  for</code> рдФрд░ <code>sed</code> <code>csv  for</code> <code>tbl</code> рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдкрд░рд┐рд╡рд░реНрддрд┐рддред </li><li>  Pg_tpch рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЛ рдХреНрд▓реЛрди рдХрд░реЗрдВ рдФрд░ <code>csv</code> рдХреЛ <code>pg_tpch/dss/data</code> рдХреЙрдкреА рдХрд░реЗрдВред </li><li>  <code>qgen</code> рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдХреНрд╡реЗрд░реА рдмрдирд╛рдПрдБред </li><li>  <code>./tpch.sh</code> рдХрдорд╛рдВрдб рдХреЗ рд╕рд╛рде рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдбреЗрдЯрд╛ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВред </li></ol><br><h3 id="parallelnoe-posledovatelnoe-skanirovanie">  рд╕рдорд╛рдирд╛рдВрддрд░ рдЕрдиреБрдХреНрд░рдорд┐рдХ рд╕реНрдХреИрди </h3><br><p>  рд╕рдорд╛рдирд╛рдВрддрд░ рдкрдврд╝рдиреЗ рдХреЗ рдХрд╛рд░рдг рдпрд╣ рддреЗрдЬ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреНрдпреЛрдВрдХрд┐ рдХрдИ рд╕реАрдкреАрдпреВ рдХреЛрд░ рдореЗрдВ рдбреЗрдЯрд╛ рдмрд┐рдЦрд░рд╛ рд╣реБрдЖ рд╣реИред  рдЖрдзреБрдирд┐рдХ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдкрд░, PostgreSQL рдбреЗрдЯрд╛ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХреИрд╢ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдкрдврд╝рдиреЗ-рдЖрдЧреЗ рдХреЗ рд╕рд╛рде, рдЖрдк рдкреАрдЬреА рдбреЗрдорди рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рднрдВрдбрд╛рд░рдг рд╕реЗ рдЕрдзрд┐рдХ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рдХреНрд╡реЗрд░реА рдкреНрд░рджрд░реНрд╢рди рдбрд┐рд╕реНрдХ I / O рджреНрд╡рд╛рд░рд╛ рд╕реАрдорд┐рдд рдирд╣реАрдВ рд╣реИред  рдпрд╣ рд╕реАрдкреАрдпреВ рдЪрдХреНрд░ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░рддрд╛ рд╣реИ: </p><br><ul><li>  рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рдкреГрд╖реНрдареЛрдВ рд╕реЗ рдПрдХ-рдПрдХ рдХрд░рдХреЗ рд▓рд╛рдЗрдиреЗрдВ рдкрдврд╝реЗрдВ; </li><li>  рд╕реНрдЯреНрд░рд┐рдВрдЧ рдорд╛рди рдФрд░ <code>WHERE</code> рдХреНрд▓реЙрд╕ рдХреА рддреБрд▓рдирд╛ рдХрд░реЗрдВред </li></ul><br><p>  рдЖрдЗрдП рдПрдХ рд╕рд░рд▓ <code>select</code> рдХреНрд╡реЗрд░реА рдЪрд▓рд╛рдПрдБ: </p><br><pre> <code class="plaintext hljs">tpch=# explain analyze select l_quantity as sum_qty from lineitem where l_shipdate &lt;= date '1998-12-01' - interval '105' day; QUERY PLAN -------------------------------------------------------------------------------------------------------------------------- Seq Scan on lineitem (cost=0.00..1964772.00 rows=58856235 width=5) (actual time=0.014..16951.669 rows=58839715 loops=1) Filter: (l_shipdate &lt;= '1998-08-18 00:00:00'::timestamp without time zone) Rows Removed by Filter: 1146337 Planning Time: 0.203 ms Execution Time: 19035.100 ms</code> </pre> <br><p>  рдПрдХ рдЕрдиреБрдХреНрд░рдорд┐рдХ рд╕реНрдХреИрди рдПрдХрддреНрд░реАрдХрд░рдг рдХреЗ рдмрд┐рдирд╛ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рдХреЛ рдПрдХ рдПрдХрд▓ рд╕реАрдкреАрдпреВ рдХреЛрд░ рджреНрд╡рд╛рд░рд╛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдпрджрд┐ рдЖрдк <code>SUM()</code> рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рджреЛ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдЕрдиреБрд░реЛрдз рдХреЛ рдЧрддрд┐ рджреЗрдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВрдЧреЗ: </p><br><pre> <code class="plaintext hljs">explain analyze select sum(l_quantity) as sum_qty from lineitem where l_shipdate &lt;= date '1998-12-01' - interval '105' day; QUERY PLAN ---------------------------------------------------------------------------------------------------------------------------------------------------- Finalize Aggregate (cost=1589702.14..1589702.15 rows=1 width=32) (actual time=8553.365..8553.365 rows=1 loops=1) -&gt; Gather (cost=1589701.91..1589702.12 rows=2 width=32) (actual time=8553.241..8555.067 rows=3 loops=1) Workers Planned: 2 Workers Launched: 2 -&gt; Partial Aggregate (cost=1588701.91..1588701.92 rows=1 width=32) (actual time=8547.546..8547.546 rows=1 loops=3) -&gt; Parallel Seq Scan on lineitem (cost=0.00..1527393.33 rows=24523431 width=5) (actual time=0.038..5998.417 rows=19613238 loops=3) Filter: (l_shipdate &lt;= '1998-08-18 00:00:00'::timestamp without time zone) Rows Removed by Filter: 382112 Planning Time: 0.241 ms Execution Time: 8555.131 ms</code> </pre> <br><h3 id="parallelnaya-agregaciya">  рд╕рдорд╛рдирд╛рдВрддрд░ рдПрдХрддреНрд░реАрдХрд░рдг </h3><br><p>  рд╕рдорд╛рдирд╛рдВрддрд░ Seq рд╕реНрдХреИрди рдиреЛрдб рдЖрдВрд╢рд┐рдХ рдПрдХрддреНрд░реАрдХрд░рдг рдХреЗ рд▓рд┐рдП рддрд╛рд░ рдкреИрджрд╛ рдХрд░рддрд╛ рд╣реИред  рдЖрдВрд╢рд┐рдХ рд╕рдореБрдЪреНрдЪрдп рдиреЛрдб рдЗрди рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЛ <code>SUM()</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <code>SUM()</code> ред  рдЕрдВрдд рдореЗрдВ, рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд╕реЗ SUM рдХрд╛рдЙрдВрдЯрд░ рдЗрдХрдЯреНрдард╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ Gather рдиреЛрдб рджреНрд╡рд╛рд░рд╛ред </p><br><p>  рдЕрдВрддрд┐рдо рдкрд░рд┐рдгрд╛рдо рдХреА рдЧрдгрдирд╛ "рдлрд╛рдЗрдирд▓ рдПрдЧреНрд░реАрдЧреЗрдЯ" рдиреЛрдб рджреНрд╡рд╛рд░рд╛ рдХреА рдЬрд╛рддреА рд╣реИред  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдЕрдкрдиреЗ рдПрдХрддреНрд░реАрдХрд░рдг рдХрд╛рд░реНрдп рд╣реИрдВ, рддреЛ рдЙрдиреНрд╣реЗрдВ "рд╕рдорд╛рдирд╛рдВрддрд░ рд╕реБрд░рдХреНрд╖рд┐рдд" рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░рдирд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВред </p><br><h3 id="kolichestvo-rabochih-processov">  рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдХреА рд╕рдВрдЦреНрдпрд╛ </h3><br><p>  рд╕рд░реНрд╡рд░ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд┐рдП рдмрд┐рдирд╛ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдХреА рд╕рдВрдЦреНрдпрд╛ рдмрдврд╝рд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИ: </p><br><pre> <code class="plaintext hljs">alter system set max_parallel_workers_per_gather=4; select * from pg_reload_conf();</code> </pre> <br><p>  рдЕрдм рд╣рдо рд╕рдордЭрд╛рддреЗ рд╣реИрдВ рдХрд┐ 4 рд╢реНрд░рдорд┐рдХ рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">tpch=# explain analyze select sum(l_quantity) as sum_qty from lineitem where l_shipdate &lt;= date '1998-12-01' - interval '105' day; QUERY PLAN ---------------------------------------------------------------------------------------------------------------------------------------------------- Finalize Aggregate (cost=1440213.58..1440213.59 rows=1 width=32) (actual time=5152.072..5152.072 rows=1 loops=1) -&gt; Gather (cost=1440213.15..1440213.56 rows=4 width=32) (actual time=5151.807..5153.900 rows=5 loops=1) Workers Planned: 4 Workers Launched: 4 -&gt; Partial Aggregate (cost=1439213.15..1439213.16 rows=1 width=32) (actual time=5147.238..5147.239 rows=1 loops=5) -&gt; Parallel Seq Scan on lineitem (cost=0.00..1402428.00 rows=14714059 width=5) (actual time=0.037..3601.882 rows=11767943 loops=5) Filter: (l_shipdate &lt;= '1998-08-18 00:00:00'::timestamp without time zone) Rows Removed by Filter: 229267 Planning Time: 0.218 ms Execution Time: 5153.967 ms</code> </pre> <br><p>  рдпрд╣рд╛рдБ рдХреНрдпрд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИ?  2 рдЧреБрдирд╛ рдЕрдзрд┐рдХ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдереЗ, рдФрд░ рдЕрдиреБрд░реЛрдз рдХреЗрд╡рд▓ 1.6599 рдЧреБрдирд╛ рддреЗрдЬ рдерд╛ред  рдЧрдгрдирд╛ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИрдВред  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ 2 рдХрд╛рд░реНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдФрд░ 1 рдиреЗрддрд╛ рдереЗред  рдмрджрд▓рд╛рд╡ рдХреЗ рдмрд╛рдж, рдпрд╣ 4 + 1 рд╣реЛ рдЧрдпрд╛ред </p><br><p>  рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рд╕реЗ рд╣рдорд╛рд░рд╛ рдЕрдзрд┐рдХрддрдо рддреНрд╡рд░рдг: 5/3 = 1.66 (6) рдмрд╛рд░ред </p><br><h2 id="kak-eto-rabotaet">  рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ? </h2><br><h3 id="processy">  рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ </h3><br><p>  рдПрдХ рдЕрдиреБрд░реЛрдз рдХрд╛ рдирд┐рд╖реНрдкрд╛рджрди рд╣рдореЗрд╢рд╛ рдПрдХ рдЕрдЧреНрд░рдгреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╕реЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред  рдиреЗрддрд╛ рд╕рдм рдХреБрдЫ рдЧреИрд░-рд╕рдорд╛рдирд╛рдВрддрд░ рдФрд░ рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдХрд░рддрд╛ рд╣реИред  рд╕рдорд╛рди рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рд╡рд╛рд▓реА рдЕрдиреНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧрддрд┐рд╢реАрд▓ рдкреГрд╖реНрдарднреВрдорд┐ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдХреЗ</a> рдПрдХ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ (рд╕рдВрд╕реНрдХрд░рдг 9.4 рдХреЗ рдмрд╛рдж рд╕реЗ)ред  рдЪреВрдВрдХрд┐ PostgreSQL рдХреЗ рдЕрдиреНрдп рднрд╛рдЧ рдереНрд░реЗрдбреНрд╕ рдХреЗ рдмрдЬрд╛рдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, 3 рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд╡рд╛рд▓реА рдХреНрд╡реЗрд░реА рдкрд╛рд░рдВрдкрд░рд┐рдХ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреА рддреБрд▓рдирд╛ рдореЗрдВ 4 рдЧреБрдирд╛ рддреЗрдЬ рд╣реЛ рд╕рдХрддреА рд╣реИред </p><br><h3 id="vzaimodeystvie">  рдмрд╛рддрдЪреАрдд </h3><br><p>  рд╡рд░реНрдХрдлрд╝реНрд▓реЛрдЬрд╝ рдПрдХ рд╕рдВрджреЗрд╢ рдХрддрд╛рд░ (рд╕рд╛рдЭрд╛ рдореЗрдореЛрд░реА рдХреЗ рдЖрдзрд╛рд░ рдкрд░) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдиреЗрддрд╛ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ 2 рдХрддрд╛рд░реЗрдВ рд╣реЛрддреА рд╣реИрдВ: рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдФрд░ рдЯреБрдкрд▓реНрд╕ рдХреЗ рд▓рд┐рдПред </p><br><h3 id="skolko-nuzhno-rabochih-processov">  рдЖрдкрдХреЛ рдХрд┐рддрдиреЗ рдХрд╛рд░реНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ? </h3><br><p>  рдиреНрдпреВрдирддрдо рд╕реАрдорд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>max_parallel_workers_per_gather</code></a> рдкреИрд░рд╛рдореАрдЯрд░ рджреНрд╡рд╛рд░рд╛ рд╕реЗрдЯ рдХреА рдЧрдИ рд╣реИред  рдлрд┐рд░, рдХреНрд╡реЗрд░реА рдирд┐рд╖реНрдкрд╛рджрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>max_parallel_workers size</code></a> рдкреИрд░рд╛рдореАрдЯрд░ рджреНрд╡рд╛рд░рд╛ рд╕реАрдорд┐рдд рдкреВрд▓ рд╕реЗ рд╡рд░реНрдХрдлрд╝реНрд▓реЛрдЬрд╝ рд▓реЗрддрд╛ рд╣реИред  рдЕрдВрддрд┐рдо рд╕реАрдорд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>max_worker_processes</code></a> , рдЕрд░реНрдерд╛рдд рдкреГрд╖реНрдарднреВрдорд┐ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдХреБрд▓ рд╕рдВрдЦреНрдпрд╛ред </p><br><p>  рдпрджрд┐ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рдерд╛, рддреЛ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдПрдХрд▓-рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реЛрдЧреАред </p><br><p>  рдХреНрд╡реЗрд░реА рдпреЛрдЬрдирд╛рдХрд╛рд░ рдЯреЗрдмрд▓ рдпрд╛ рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рдЖрдХрд╛рд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╡рд░реНрдХрдлрд╝реНрд▓реЛрдЬрд╝ рдХреЛ рдЫреЛрдЯрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>min_parallel_table_scan_size</code></a> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>min_parallel_index_scan_size</code></a> рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">set min_parallel_table_scan_size='8MB' 8MB table =&gt; 1 worker 24MB table =&gt; 2 workers 72MB table =&gt; 3 workers x =&gt; log(x / min_parallel_table_scan_size) / log(3) + 1 worker</code> </pre> <br><p>  рд╣рд░ рдмрд╛рд░ рдПрдХ рдЯреЗрдмрд▓ <code>min_parallel_(index|table)_scan_size</code> рд╕реЗ 3 рдЧреБрдирд╛ рдмрдбрд╝рд╛ рд╣реЛрддрд╛ рд╣реИ, рдкреЛрд╕реНрдЯрдЧреНрд░реИрдлрд╝ рдПрдХ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИред  рдХрд╛рд░реНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рд▓рд╛рдЧрдд рдЖрдзрд╛рд░рд┐рдд рдирд╣реАрдВ рд╣реИред  рдкрд░рд┐рдкрддреНрд░ рдирд┐рд░реНрднрд░рддрд╛ рдЬрдЯрд┐рд▓ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рдЬрдЯрд┐рд▓ рдмрдирд╛рддреА рд╣реИред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рдЕрдиреБрд╕реВрдЪрдХ рд╕рд░рд▓ рдирд┐рдпрдореЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред </p><br><p>  рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ, рдпреЗ рдирд┐рдпрдо рд╣рдореЗрд╢рд╛ рдЙрддреНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЖрдк рдХрд┐рд╕реА рд╡рд┐рд╢реЗрд╖ рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд▓рд┐рдП рд╡рд░реНрдХрдлрд╝реНрд▓реЛрдЬрд╝ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ: ALTER TABLE ... SET ( <code>parallel_workers = N</code> )ред </p><br><h3 id="pochemu-parallelnaya-obrabotka-ne-ispolzuetsya">  рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ? </h3><br><p>  рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рдХреА рдПрдХ рд▓рдВрдмреА рд╕реВрдЪреА рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд▓рд╛рдЧрдд рдХреА рдЬрд╛рдБрдЪ рднреА рд╣реЛрддреА рд╣реИ: </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>parallel_setup_cost</code></a> - рд▓рдШреБ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рдмрд┐рдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред  рдпрд╣ рдкреИрд░рд╛рдореАрдЯрд░ рдореЗрдореЛрд░реА рддреИрдпрд╛рд░ рдХрд░рдиреЗ, рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдФрд░ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдбреЗрдЯрд╛ рд╡рд┐рдирд┐рдордп рдХреЗ рд▓рд┐рдП рд╕рдордп рдХрд╛ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛рддрд╛ рд╣реИред </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>parallel_tuple_cost</code></a> : рдПрдХ рдиреЗрддрд╛ рдФрд░ рд╢реНрд░рдорд┐рдХреЛрдВ рдХреЗ рдмреАрдЪ рд╕рдВрдЪрд╛рд░ рдХрд╛рд░реНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рд╕реЗ рдЯреНрдпреВрдкрд▓реНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдЕрдиреБрдкрд╛рдд рдореЗрдВ рджреЗрд░реА рд╣реЛ рд╕рдХрддреА рд╣реИред  рдпрд╣ рдкреИрд░рд╛рдореАрдЯрд░ рдбреЗрдЯрд╛ рд╡рд┐рдирд┐рдордп рд▓рд╛рдЧрддреЛрдВ рдХреА рдЧрдгрдирд╛ рдХрд░рддрд╛ рд╣реИред </p><br><h3 id="soedineniya-vlozhennyh-ciklov--nested-loop-join">  рдиреЗрд╕реНрдЯреЗрдб рд▓реВрдк рдЬреЙрдЗрди </h3><br><pre> <code class="plaintext hljs">PostgreSQL 9.6+      тАФ   . explain (costs off) select c_custkey, count(o_orderkey) from customer left outer join orders on c_custkey = o_custkey and o_comment not like '%special%deposits%' group by c_custkey; QUERY PLAN -------------------------------------------------------------------------------------- Finalize GroupAggregate Group Key: customer.c_custkey -&gt; Gather Merge Workers Planned: 4 -&gt; Partial GroupAggregate Group Key: customer.c_custkey -&gt; Nested Loop Left Join -&gt; Parallel Index Only Scan using customer_pkey on customer -&gt; Index Scan using idx_orders_custkey on orders Index Cond: (customer.c_custkey = o_custkey) Filter: ((o_comment)::text !~~ '%special%deposits%'::text)</code> </pre> <br><p>  рд╕рдВрдЧреНрд░рд╣ рдЕрдВрддрд┐рдо рдЪрд░рдг рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдиреЗрд╕реНрдЯреЗрдб рд▓реВрдк рд▓реЗрдлреНрдЯ рдЬреЙрдЗрди рдПрдХ рд╕рдорд╛рдирд╛рдВрддрд░ рдСрдкрд░реЗрд╢рди рд╣реИред  рд╕рдорд╛рдирд╛рдВрддрд░ рд╕реВрдЪрдХрд╛рдВрдХ рдХреЗрд╡рд▓ рд╕реНрдХреИрди рдХреЗрд╡рд▓ рд╕рдВрд╕реНрдХрд░рдг 10 рдореЗрдВ рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛ред рдпрд╣ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рд╕рдорд╛рдирд╛рдВрддрд░ рдзрд╛рд░рд╛рд╡рд╛рд╣рд┐рдХ рд╕реНрдХреИрдирд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рд╣рд╛рд▓рдд <code>c_custkey = o_custkey</code> рдкреНрд░рддреНрдпреЗрдХ рдХреНрд▓рд╛рдЗрдВрдЯ рд▓рд╛рдЗрди рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрджреЗрд╢ рдкрдврд╝рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП рдпрд╣ рд╕рдорд╛рдирд╛рдВрддрд░ рдирд╣реАрдВ рд╣реИред </p><br><h3 id="hesh-soedinenie--hash-join">  рд╣реИрд╢ рдЬреЙрдЗрди - рд╣реИрд╢ рдЬреЙрдЗрди </h3><br><p>  рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ PostgreSQL 11. рд╕реЗ рдкрд╣рд▓реЗ рдЕрдкрдиреА рд╕реНрд╡рдпрдВ рдХреА рд╣реИрд╢ рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдпрджрд┐ рдЗрдирдореЗрдВ рд╕реЗ рдЪрд╛рд░ рд╕реЗ рдЕрдзрд┐рдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдБ рд╣реИрдВ, рддреЛ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рд╕реБрдзрд╛рд░ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред  рдирдП рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ, рд╣реИрд╢ рддрд╛рд▓рд┐рдХрд╛ рд╕рд╛рдЭрд╛ рдХреА рдЧрдИ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рд╣реИрд╢ рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП WORK_MEM рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><pre> <code class="plaintext hljs">select l_shipmode, sum(case when o_orderpriority = '1-URGENT' or o_orderpriority = '2-HIGH' then 1 else 0 end) as high_line_count, sum(case when o_orderpriority &lt;&gt; '1-URGENT' and o_orderpriority &lt;&gt; '2-HIGH' then 1 else 0 end) as low_line_count from orders, lineitem where o_orderkey = l_orderkey and l_shipmode in ('MAIL', 'AIR') and l_commitdate &lt; l_receiptdate and l_shipdate &lt; l_commitdate and l_receiptdate &gt;= date '1996-01-01' and l_receiptdate &lt; date '1996-01-01' + interval '1' year group by l_shipmode order by l_shipmode LIMIT 1; QUERY PLAN ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- Limit (cost=1964755.66..1964961.44 rows=1 width=27) (actual time=7579.592..7922.997 rows=1 loops=1) -&gt; Finalize GroupAggregate (cost=1964755.66..1966196.11 rows=7 width=27) (actual time=7579.590..7579.591 rows=1 loops=1) Group Key: lineitem.l_shipmode -&gt; Gather Merge (cost=1964755.66..1966195.83 rows=28 width=27) (actual time=7559.593..7922.319 rows=6 loops=1) Workers Planned: 4 Workers Launched: 4 -&gt; Partial GroupAggregate (cost=1963755.61..1965192.44 rows=7 width=27) (actual time=7548.103..7564.592 rows=2 loops=5) Group Key: lineitem.l_shipmode -&gt; Sort (cost=1963755.61..1963935.20 rows=71838 width=27) (actual time=7530.280..7539.688 rows=62519 loops=5) Sort Key: lineitem.l_shipmode Sort Method: external merge Disk: 2304kB Worker 0: Sort Method: external merge Disk: 2064kB Worker 1: Sort Method: external merge Disk: 2384kB Worker 2: Sort Method: external merge Disk: 2264kB Worker 3: Sort Method: external merge Disk: 2336kB -&gt; Parallel Hash Join (cost=382571.01..1957960.99 rows=71838 width=27) (actual time=7036.917..7499.692 rows=62519 loops=5) Hash Cond: (lineitem.l_orderkey = orders.o_orderkey) -&gt; Parallel Seq Scan on lineitem (cost=0.00..1552386.40 rows=71838 width=19) (actual time=0.583..4901.063 rows=62519 loops=5) Filter: ((l_shipmode = ANY ('{MAIL,AIR}'::bpchar[])) AND (l_commitdate &lt; l_receiptdate) AND (l_shipdate &lt; l_commitdate) AND (l_receiptdate &gt;= '1996-01-01'::date) AND (l_receiptdate &lt; '1997-01-01 00:00:00'::timestamp without time zone)) Rows Removed by Filter: 11934691 -&gt; Parallel Hash (cost=313722.45..313722.45 rows=3750045 width=20) (actual time=2011.518..2011.518 rows=3000000 loops=5) Buckets: 65536 Batches: 256 Memory Usage: 3840kB -&gt; Parallel Seq Scan on orders (cost=0.00..313722.45 rows=3750045 width=20) (actual time=0.029..995.948 rows=3000000 loops=5) Planning Time: 0.977 ms Execution Time: 7923.770 ms</code> </pre> <br><p>  TPC-H рд╕реЗ 12 рдЕрдиреБрд░реЛрдз рдПрдХ рд╕рдорд╛рдирд╛рдВрддрд░ рд╣реИрд╢ рдХрдиреЗрдХреНрд╢рди рджрд┐рдЦрд╛рддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдПрдХ рд╕рд╛рдЭрд╛ рд╣реИрд╢ рддрд╛рд▓рд┐рдХрд╛ рдмрдирд╛рдиреЗ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛрддрд╛ рд╣реИред </p><br><h3 id="soedinenie-sliyaniem--merge-join">  рдорд┐рд▓рд╛рдирд╛ </h3><br><p>  рдПрдХ рдорд░реНрдЬ рдЬреБрдбрд╝рдирд╛ рдкреНрд░рдХреГрддрд┐ рдореЗрдВ рд╕рдорд╛рдирд╛рдВрддрд░ рдирд╣реАрдВ рд╣реИред  рдЪрд┐рдВрддрд╛ рди рдХрд░реЗрдВ рдЕрдЧрд░ рдпрд╣ рдЕрдиреБрд░реЛрдз рдХрд╛ рдЕрдВрддрд┐рдо рдЪрд░рдг рд╣реИ - рдЗрд╕реЗ рдЕрднреА рднреА рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><pre> <code class="plaintext hljs">-- Query 2 from TPC-H explain (costs off) select s_acctbal, s_name, n_name, p_partkey, p_mfgr, s_address, s_phone, s_comment from part, supplier, partsupp, nation, region where p_partkey = ps_partkey and s_suppkey = ps_suppkey and p_size = 36 and p_type like '%BRASS' and s_nationkey = n_nationkey and n_regionkey = r_regionkey and r_name = 'AMERICA' and ps_supplycost = ( select min(ps_supplycost) from partsupp, supplier, nation, region where p_partkey = ps_partkey and s_suppkey = ps_suppkey and s_nationkey = n_nationkey and n_regionkey = r_regionkey and r_name = 'AMERICA' ) order by s_acctbal desc, n_name, s_name, p_partkey LIMIT 100; QUERY PLAN ---------------------------------------------------------------------------------------------------------- Limit -&gt; Sort Sort Key: supplier.s_acctbal DESC, nation.n_name, supplier.s_name, part.p_partkey -&gt; Merge Join Merge Cond: (part.p_partkey = partsupp.ps_partkey) Join Filter: (partsupp.ps_supplycost = (SubPlan 1)) -&gt; Gather Merge Workers Planned: 4 -&gt; Parallel Index Scan using &lt;strong&gt;part_pkey&lt;/strong&gt; on part Filter: (((p_type)::text ~~ '%BRASS'::text) AND (p_size = 36)) -&gt; Materialize -&gt; Sort Sort Key: partsupp.ps_partkey -&gt; Nested Loop -&gt; Nested Loop Join Filter: (nation.n_regionkey = region.r_regionkey) -&gt; Seq Scan on region Filter: (r_name = 'AMERICA'::bpchar) -&gt; Hash Join Hash Cond: (supplier.s_nationkey = nation.n_nationkey) -&gt; Seq Scan on supplier -&gt; Hash -&gt; Seq Scan on nation -&gt; Index Scan using idx_partsupp_suppkey on partsupp Index Cond: (ps_suppkey = supplier.s_suppkey) SubPlan 1 -&gt; Aggregate -&gt; Nested Loop Join Filter: (nation_1.n_regionkey = region_1.r_regionkey) -&gt; Seq Scan on region region_1 Filter: (r_name = 'AMERICA'::bpchar) -&gt; Nested Loop -&gt; Nested Loop -&gt; Index Scan using idx_partsupp_partkey on partsupp partsupp_1 Index Cond: (part.p_partkey = ps_partkey) -&gt; Index Scan using supplier_pkey on supplier supplier_1 Index Cond: (s_suppkey = partsupp_1.ps_suppkey) -&gt; Index Scan using nation_pkey on nation nation_1 Index Cond: (n_nationkey = supplier_1.s_nationkey)</code> </pre> <br><p>  рдорд░реНрдЬ рдЬреНрд╡рд╛рдЗрди рдиреЛрдб Gather Merge рдХреЗ рдКрдкрд░ рд╕реНрдерд┐рдд рд╣реИред  рддреЛ рдорд░реНрдЬ рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рд╕рдорд╛рдирд╛рдВрддрд░ рд╕реВрдЪрдХрд╛рдВрдХ рд╕реНрдХреИрди рдиреЛрдб рдЕрднреА рднреА <code>part_pkey</code> рдЦрдВрдб рдХреЗ рд╕рд╛рде рдорджрдж рдХрд░рддрд╛ рд╣реИред </p><br><h3 id="soedinenie-po-sekciyam">  рдЕрдиреБрднрд╛рдЧ рдХрдиреЗрдХреНрд╢рди </h3><br><p>  PostgreSQL 11 рдореЗрдВ, рд╡рд┐рднрд╛рдЬрди рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЕрдХреНрд╖рдо рд╣реИ: рдЗрд╕рдореЗрдВ рдмрд╣реБрдд рдорд╣рдВрдЧрд╛ рд╢реЗрдбреНрдпреВрд▓рд┐рдВрдЧ рд╣реИред  рд╕рдорд╛рди рд╡рд┐рднрд╛рдЬрди рд╡рд╛рд▓реЗ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рдЕрдиреБрднрд╛рдЧ рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рддреЛ Postgres рдЫреЛрдЯреЗ рд╣реИрд╢ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред  рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрднрд╛рдЧ рдХрдиреЗрдХреНрд╢рди рд╕рдорд╛рдирд╛рдВрддрд░ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </p><br><pre> <code class="plaintext hljs">tpch=# set enable_partitionwise_join=t; tpch=# explain (costs off) select * from prt1 t1, prt2 t2 where t1.a = t2.b and t1.b = 0 and t2.b between 0 and 10000; QUERY PLAN --------------------------------------------------- Append -&gt; Hash Join Hash Cond: (t2.b = t1.a) -&gt; Seq Scan on prt2_p1 t2 Filter: ((b &gt;= 0) AND (b &lt;= 10000)) -&gt; Hash -&gt; Seq Scan on prt1_p1 t1 Filter: (b = 0) -&gt; Hash Join Hash Cond: (t2_1.b = t1_1.a) -&gt; Seq Scan on prt2_p2 t2_1 Filter: ((b &gt;= 0) AND (b &lt;= 10000)) -&gt; Hash -&gt; Seq Scan on prt1_p2 t1_1 Filter: (b = 0) tpch=# set parallel_setup_cost = 1; tpch=# set parallel_tuple_cost = 0.01; tpch=# explain (costs off) select * from prt1 t1, prt2 t2 where t1.a = t2.b and t1.b = 0 and t2.b between 0 and 10000; QUERY PLAN ----------------------------------------------------------- Gather Workers Planned: 4 -&gt; Parallel Append -&gt; Parallel Hash Join Hash Cond: (t2_1.b = t1_1.a) -&gt; Parallel Seq Scan on prt2_p2 t2_1 Filter: ((b &gt;= 0) AND (b &lt;= 10000)) -&gt; Parallel Hash -&gt; Parallel Seq Scan on prt1_p2 t1_1 Filter: (b = 0) -&gt; Parallel Hash Join Hash Cond: (t2.b = t1.a) -&gt; Parallel Seq Scan on prt2_p1 t2 Filter: ((b &gt;= 0) AND (b &lt;= 10000)) -&gt; Parallel Hash -&gt; Parallel Seq Scan on prt1_p1 t1 Filter: (b = 0)</code> </pre> <br><p>  рдореБрдЦреНрдп рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рд╡рд░реНрдЧреЛрдВ рдореЗрдВ рдХрдиреЗрдХреНрд╢рди рдХреЗрд╡рд▓ рд╕рдорд╛рдирд╛рдВрддрд░ рд╣реИ рдпрджрд┐ рдпреЗ рдЕрдиреБрднрд╛рдЧ рдкрд░реНрдпрд╛рдкреНрдд рдмрдбрд╝реЗ рд╣реИрдВред </p><br><h3 id="parallelnoe-dopolnenie--parallel-append">  рд╕рдорд╛рдирд╛рдВрддрд░ рдкрд░рд┐рд╢рд┐рд╖реНрдЯ - рд╕рдорд╛рдирд╛рдВрддрд░ рдкрд░рд┐рд╢рд┐рд╖реНрдЯ </h3><br><p>  рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡рд░реНрдХрдлрд╝реНрд▓реЛрдЬрд╝ рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдмреНрд▓реЙрдХ рдХреЗ рдмрдЬрд╛рдп <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдорд╛рдирд╛рдВрддрд░ рдПрдкреЗрдВрдб</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рдЖрдорддреМрд░ рдкрд░ UNION ALL рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рд╕рд╛рде рд╣реЛрддрд╛ рд╣реИред  рдиреБрдХрд╕рд╛рди рдХрдо рд╕рдорд╛рдирддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдХреЗрд╡рд▓ 1 рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред </p><br><p>  2 рд╡рд░реНрдХрдлреНрд▓реЛ рдпрд╣рд╛рдВ рдЪрд▓ рд░рд╣реЗ рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ 4 рд╢рд╛рдорд┐рд▓ рд╣реИрдВред </p><br><pre> <code class="plaintext hljs">tpch=# explain (costs off) select sum(l_quantity) as sum_qty from lineitem where l_shipdate &lt;= date '1998-12-01' - interval '105' day union all select sum(l_quantity) as sum_qty from lineitem where l_shipdate &lt;= date '2000-12-01' - interval '105' day; QUERY PLAN ------------------------------------------------------------------------------------------------ Gather Workers Planned: 2 -&gt; Parallel Append -&gt; Aggregate -&gt; Seq Scan on lineitem Filter: (l_shipdate &lt;= '2000-08-18 00:00:00'::timestamp without time zone) -&gt; Aggregate -&gt; Seq Scan on lineitem lineitem_1 Filter: (l_shipdate &lt;= '1998-08-18 00:00:00'::timestamp without time zone)</code> </pre> <br><h3 id="samye-vazhnye-peremennye">  рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЪрд░ </h3><br><ul><li>  WORK_MEM рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП рдореЗрдореЛрд░реА рдХреА рдорд╛рддреНрд░рд╛ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рддрд╛ рд╣реИ, рди рдХрд┐ рдХреЗрд╡рд▓ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рд▓рд┐рдП: рдХрд╛рд░реНрдп_рдо рдХрдиреЗрдХреНрд╢рди <em>рдкреНрд░рдХреНрд░рд┐рдпрд╛</em> = рдмрд╣реБрдд рд╕рд╛рд░реА рдореЗрдореЛрд░реАред </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>max_parallel_workers_per_gather</code></a> - рдпреЛрдЬрдирд╛ рд╕реЗ рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рдирд┐рд╖реНрдкрд╛рджрди рдХрд╛рд░реНрдпрдХреНрд░рдо рдХрд┐рддрдиреЗ рдХрд╛рдо рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>max_worker_processes</code></a> - рд╕рд░реНрд╡рд░ рдкрд░ CPU рдХреЛрд░ рдХреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдХрд╛рд░реНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдХреБрд▓ рд╕рдВрдЦреНрдпрд╛ рдХреЛ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░рддрд╛ рд╣реИред </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>max_parallel_workers</code></a> рд╕рдорд╛рди рд╣реИ, рд▓реЗрдХрд┐рди рд╕рдорд╛рдирд╛рдВрддрд░ рд╡рд░реНрдХрдлрд╝реНрд▓реЛрдЬрд╝ рдХреЗ рд▓рд┐рдПред </li></ul><br><h3 id="itogi">  рдкрд░рд┐рдгрд╛рдо </h3><br><p>  рд╕рдВрд╕реНрдХрд░рдг 9.6 рд╕реЗ рд╢реБрд░реВ рд╣реЛрдХрд░, рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрдИ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдпрд╛ рдЗрдВрдбреЗрдХреНрд╕ рдХреЛ рд╕реНрдХреИрди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдЬрдЯрд┐рд▓ рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдЧрдВрднреАрд░рддрд╛ рд╕реЗ рд╕реБрдзрд╛рд░ рд╕рдХрддрд╛ рд╣реИред  PostgreSQL 10 рдореЗрдВ, рд╕рдорд╛рдирд╛рдВрддрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рдХреНрд╖рдо рд╣реИред  рдмрдбрд╝реЗ рдУрдПрд▓рдЯреАрдкреА рд╡рд░реНрдХрд▓реЛрдб рд╡рд╛рд▓реЗ рд╕рд░реНрд╡рд░ рдкрд░ рдЗрд╕реЗ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░рдирд╛ рдпрд╛рдж рд░рдЦреЗрдВред  рдЕрдиреБрдХреНрд░рдорд┐рдХ рд╕реНрдХреИрди рдпрд╛ рдЗрдВрдбреЗрдХреНрд╕ рд╕реНрдХреИрди рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдпрджрд┐ рдЖрдк рд╕рдВрдкреВрд░реНрдг рдбреЗрдЯрд╛рд╕реЗрдЯ рдореЗрдВ рд░рд┐рдкреЛрд░реНрдЯ рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдХреНрд╡реЗрд░реАрдЬрд╝ рдХреЛ рдХреЗрд╡рд▓ рд▓рд╛рдкрддрд╛ рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛ рдЬреЛрдбрд╝рдХрд░ рдпрд╛ рд╕рд╣реА рд╡рд┐рднрд╛рдЬрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдзрд┐рдХ рдХреБрд╢рд▓ рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><h3 id="ssylki">  рд╕рдВрджрд░реНрдн </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://www.postgresql.org/docs/11/how-parallel-query-works.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://www.postgresql.org/docs/11/parallel-plans.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://ashutoshpg.blogspot.com/2017/12/partition-wise-joins-divide-and-conquer.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://rhaas.blogspot.com/2016/04/postgresql-96-with-parallel-query-vs.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://amitkapila16.blogspot.com/2015/11/parallel-sequential-scans-in-play.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://write-skew.blogspot.com/2018/01/parallel-hash-for-postgresql.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://rhaas.blogspot.com/2017/03/parallel-query-v2.html</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://blog.2ndquadrant.com/parallel-monster-benchmark/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://blog.2ndquadrant.com/parallel-aggregate/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://www.depesz.com/2018/02/12/waiting-for-postgresql-11-support-parallel-btree-index-builds/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">PostgreSQL 11 рдореЗрдВ рдХреЛрдиреНрдХреНрдпреВрд░рд┐рдЯреА</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi446706/">https://habr.com/ru/post/hi446706/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi446690/index.html">рдЗрд▓реЗрдХреНрдЯреНрд░реЛрд▓рдХреНрд╕ рдиреЗ рд╕рдмрд╕реЗ рдкреНрд░рджреВрд╖рд┐рдд рд╢рд╣рд░реЛрдВ рдХреЗ рд▓рд┐рдП рд╕реНрдорд╛рд░реНрдЯ рдПрдпрд░ рдкреНрдпреВрд░реАрдлрд╛рдпрд░ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛</a></li>
<li><a href="../hi446694/index.html">JBOD рдореЙрдбреНрдпреВрд▓рд░ рднрдВрдбрд╛рд░рдг рдФрд░ рд╕реНрд╡рддрдВрддреНрд░рддрд╛ рдХреА рдбрд┐рдЧреНрд░реА</a></li>
<li><a href="../hi446696/index.html">152-рдПрдлрдЬреЗрдб рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдорд┐рдердХ, рдЬреЛ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдбреЗрдЯрд╛ рдСрдкрд░реЗрдЯрд░ рдХреЗ рд▓рд┐рдП рдорд╣рдВрдЧрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ</a></li>
<li><a href="../hi446700/index.html">рд▓реЗрдЬрд╝рдбреЙрдХрд░ - рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рд╕реАрдзреЗ рдбреЙрдХрд░ рдХреЗ рд▓рд┐рдП рдЬреАрдпреВрдЖрдИ</a></li>
<li><a href="../hi446702/index.html">рдФрд░ рдПрдХ рдФрд░ рдЕрдЬреАрдм рд╣реЗрдбрдлрд╝реЛрди - рд╕реЛрдиреЗ рдХреЗ рд▓рд┐рдП</a></li>
<li><a href="../hi446708/index.html">рдЕрдВрддрд░рд┐рдХреНрд╖ рд╕рдВрдЪрд╛рд░ рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреА рддреБрд▓рдирд╛</a></li>
<li><a href="../hi446710/index.html">Microservice рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЪрд╛рд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХрд╣рд╛рдирд┐рдпрд╛рдВ - рдмреИрдХрдПрдВрдб рдпреВрдирд╛рдЗрдЯреЗрдб 3 рдорд╛рдЗрдЯреИрдк рд╕реЗ рд░рд┐рдкреЛрд░реНрдЯ: рдЦреЛрд▓реЛрдбреЗрдЯреНрд╕</a></li>
<li><a href="../hi446712/index.html">HTTPS рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣ рд╕реБрд░рдХреНрд╖рд┐рдд рдирд╣реАрдВ рд╣реИ рдЬреИрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИред HTTPS рд╕рд╛рдЗрдЯреЛрдВ рдХреЗ 5.5% рдореЗрдВ рдХрдордЬреЛрд░рд┐рдпрд╛рдБ рдкрд╛рдИ рдЧрдИрдВ</a></li>
<li><a href="../hi446714/index.html">рдЖрдИрдЯреА рд╡рд░реНрд▓реНрдб рд╕реЗ рдЙрддреНрд╕реБрдХ рд╡рд┐рдХреГрддрд┐рдпрд╛рдВ - 4</a></li>
<li><a href="../hi446716/index.html">рдХрдпрд╛рдордд рдХреА рдЪреЗрддрдирд╛ рдФрд░ рддрд░реНрдХ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>