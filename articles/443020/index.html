<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§û üï§ üïµüèæ El primer videojuego de mi y mi novia. Desarrollo con unidad. Parte 1 üëî üçé ü§öüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si no tenemos en cuenta los lanzamientos para Android y una docena de proyectos abandonados justo antes de que estuvieran listos, entonces s√≠, es nues...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El primer videojuego de mi y mi novia. Desarrollo con unidad. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443020/"> Si no tenemos en cuenta los lanzamientos para Android y una docena de proyectos abandonados justo antes de que estuvieran listos, entonces s√≠, es nuestro primer juego apropiado para m√°s de una plataforma.  ¬øC√≥mo empez√≥ todo?  Muy simple  Trabajamos en otro proyecto, llam√©moslo "proyecto A", y hab√≠amos estado trabajando en √©l durante mucho tiempo cuando decidimos hacer un juego durante un par de meses y usarlo para entrenar nuestras habilidades de marketing, y luego inmediatamente lanza nuestro "proyecto A" cuando tengamos m√°s experiencia en la promoci√≥n de juegos.  Pero el plan fall√≥ y el "proyecto A" se mantuvo intacto durante todo el a√±o.  Pero esta historia no se trata del "proyecto A", se trata de un juego l√≥gico llamado "Cubicity: Slide puzzle". <br><br><img src="https://habrastorage.org/webt/xw/93/vg/xw93vgwunh93oudw5-8848nyzfw.png"><br><a name="habracut"></a><br>  El primer borrador fue el siguiente: gr√°ficos m√≠nimos, interfaz de usuario m√≠nima y tambi√©n todo lo m√≠nimo posible, el juego ten√≠a que estar al estilo de los juegos casuales de hoy que inundan el mercado, as√≠ como Match-3.  Como resultado, nuestro objetivo se ve√≠a as√≠: las fichas redondas se conectan a la figura y se mueven con un deslizamiento en 4 direcciones.  Aquellos que ya han jugado Cubicity saben que no hemos cambiado completamente la tarea, sino que hemos mejorado ferozmente otros aspectos al ser un equipo de solo dos personas. <br><br><img src="https://habrastorage.org/webt/4o/eq/w7/4oeqw7uh2jze_civpgc3wyq9vdg.png"><br><br>  Si algunos de los lectores esperan encontrar aqu√≠ un secreto del desarrollo exitoso y r√°pido del juego, entonces no existe tal secreto.  Aqu√≠ no compartimos una amplia experiencia o conocimiento, solo contamos la historia de un proyecto de una peque√±a empresa.  Y a√∫n no sabemos si tiene √©xito o no.  Pero para muchos de ustedes, nuestros lectores, este es un mensaje del pasado enviado por los desarrolladores. <br><br>  Volvamos a la historia de c√≥mo se cre√≥ Cubicity.  Principalmente trabajamos solo con Unity y aqu√≠ est√° el conjunto est√°ndar de cada desarrollador decente de Unity: Newtonsoft.json, Zenject, Cinemachine, Dotween, etc.  Como se puede ver en la imagen de arriba, el primer prototipo del juego inclu√≠a solo cubos y fichas.  Despu√©s de una semana de pensamientos sobre c√≥mo mejorar el juego y atraer a los jugadores, hubo un momento eureka ... Para buscar algunos personajes c√∫bicos o redondos en la tienda de Activos.  Y as√≠, algunos paquetes de personajes fueron comprados sin dudarlo.  La misma situaci√≥n ocurri√≥ con los bloques en los que los personajes se mueven ahora.  Tambi√©n se escribi√≥ una lista de nuevos elementos de juego con casi 30 elementos nuevos de los cuales elegimos en primer lugar cosas neutrales como bloques / flechas de redireccionamiento, elevador y teletransporte.  Decidimos dejar el resto para los nuevos niveles y presentarlos uno por uno en 30-35 niveles. <br><br><br><img src="https://habrastorage.org/webt/43/88/pe/4388petqixbawzpjtjf9otnyzgu.png"><br><br>  Para ser sincero, ni siquiera podemos recordar qu√© nos inspir√≥ a hacer tantos niveles en el primer paso, pero tenemos lo que tenemos, por lo que el primer lanzamiento incluy√≥ 95 niveles.  Son demasiados, para decir la verdad, y lo lamentamos.  ¬øPor qu√© arrepentirse?  Porque el juego no estaba completamente listo y muchas cosas cambiaron despu√©s del lanzamiento.  Parec√≠a que est√°bamos atrapados en el D√≠a de la Marmota, porque necesit√°bamos hacer modificaciones en cada nivel de 95. Se pasaron dos meses de trabajo continuo en todos los niveles.  A√∫n as√≠, esos niveles no estaban 100% listos, pero no est√°bamos lejos de all√≠.  En los d√≠as m√°s productivos, 10 niveles se transfirieron f√°cilmente de la cabeza al papel y luego a la escena.  Pero tambi√©n hubo d√≠as en que sientes que eres Hank Moody de California, que sufre el bloqueo del escritor, y crees que llegaste al fondo, pero el nuevo d√≠a trae nuevas ideas. <br><br>  En cuanto al componente visual, fue un poco m√°s dif√≠cil.  El dibujo, como en la mayor√≠a de los juegos, se lleva a cabo en la superficie fuera de la pantalla con una resoluci√≥n inferior a la nativa y los blits a la superficie primaria, pero la IU se dibuja sin cambios en la resoluci√≥n para una mejor claridad y legibilidad.  Por lo tanto, obtenemos lo mejor de los dos mundos: no una interfaz de usuario borrosa ni un renderizado pesado en el juego.  Despu√©s de numerosos experimentos, elegimos 2x MSAA + FXAA para antialiasing, porque ofrecen la mejor imagen con la menor cantidad de recursos.  Concluimos razonablemente que un juego l√≥gico no necesita 60 cuadros por segundo, y decidimos no reinventar la rueda y establecer el l√≠mite de cuadros a 30 fps (incluso las consolas suelen hacer esto).  Establecer el l√≠mite del marco tiene un efecto positivo no solo en el consumo de energ√≠a, sino tambi√©n en el calentamiento del tel√©fono, lo que evita que el tel√©fono se acelere debido al sobrecalentamiento. <br><br>  Luego tuvimos que tomar una decisi√≥n dif√≠cil, y esos fueron los puntos finales.  Cada vez que se iniciaba el nivel, los personajes se eleg√≠an al azar de los disponibles para el jugador, por eso ser√≠a problem√°tico dibujar una figura en miniatura de alg√∫n personaje.  Puede que no lo creas, pero pasamos mucho tiempo resolviendo esta tarea despu√©s de postergarla continuamente.  Los cubos en los puntos finales no parec√≠an una idea tan terrible, y la pintura en papel ayud√≥ a pasar el nivel y llevar a todos al lugar correcto.  M√°s tarde, se decidi√≥ utilizar los mismos caracteres en lugar de cubos, pero de menor tama√±o.  Se hizo mejor, pero solo para nosotros.  Unos d√≠as m√°s tarde, estos personajes se volvieron y resaltaron, y se hizo mucho m√°s claro qui√©n es qui√©n, pero a√∫n no fue satisfactorio.  La versi√≥n final se adopt√≥ un mes despu√©s, por prueba y error, y luego se dedic√≥ un par de semanas a crear iconos para los acabados.  ¬°Adi√≥s verano, hasta pronto! <br><br><img src="https://habrastorage.org/webt/od/3u/nq/od3unqvyizdarlourfngxv5bpl4.png"><br><br>  En nuestra humilde opini√≥n, las nubes resultaron ser bastante agradables.  Pero, de hecho, este es el truco m√°s simple.  Cuando decidimos agregar nubes, lo primero que pensamos fue hacer un video de fondo 360.  Este enfoque fracas√≥, ya que para plataformas m√≥viles es deseable ajustar el juego en el l√≠mite de tama√±o para la descarga a trav√©s de LTE.  Si quer√≠amos que el video no se sobrecomprimiera, ten√≠amos que darle 10-15 MB.  Combinado con la presencia de niveles nocturnos en el juego con sus nubes, es demasiado (toda la construcci√≥n final del juego para Android toma 61 MB).  El segundo deseo era escribir nuestro propio sistema para las nubes.  Fue tentador para un desarrollador, pero para una persona que quer√≠a terminar el juego lo antes posible, no era adecuado.  La soluci√≥n lleg√≥ en forma de crear una textura para la nube y crear un sistema de part√≠culas con una vida √∫til infinita de la part√≠cula, y tambi√©n un n√∫mero limitado de part√≠culas en general.  Despu√©s de eso, agregamos tama√±os aleatorios entre dos constantes junto con rotaci√≥n aleatoria.  El resultado fue realmente satisfactorio, nuestro cielo estaba lleno de nubes que eran bonitas y no nos hicieron llorar al mirarlas. <br><br><img src="https://habrastorage.org/webt/o0/0o/zi/o00ozi2skh67h5dy3its1rccnku.png"><br><br>  Shadows en el juego (en la versi√≥n m√≥vil) consiste completamente en quads que se arreglan simplemente a mano, ya que no quer√≠amos agregar sombras reales a la versi√≥n m√≥vil.  Una de las razones es la ausencia de sombras suaves en las plataformas m√≥viles con OpenGLES 2.0 y, por supuesto, la degradaci√≥n del rendimiento en dispositivos d√©biles. <br><br><img src="https://habrastorage.org/webt/me/mc/_p/memc_pcveu2mqhvkflhwpjbi-ay.png"><br><br>  Como se mencion√≥ anteriormente, usamos 2x MSAA + FXAA para suavizar, ¬°pero eso no es todo!  Tambi√©n agregamos AmplifyColor a nuestro procesamiento posterior, ya que es un gran activo por dinero razonable que le permite aplicar diferentes Lut-s en el procesamiento posterior.  Una lut correctamente seleccionada mejora la imagen.  Durante el proceso de desarrollo probamos diferentes enfoques, incluida la pila est√°ndar de postprocesamiento de la unidad, pero en la construcci√≥n sus sombreadores y opciones tomaron mucho.  Algunas soluciones fueron muy hermosas, pero funcionaron extremadamente mal en tel√©fonos no muy nuevos (cr√©anme, si creen que todos ahora tienen al menos un tel√©fono "normal", se equivocan. Una gran cantidad de personas a√∫n posee tel√©fonos chinos de $ 40 y se queja a usted en los comentarios que su DOOM no va bien en su basura). <br><br>  El equilibrio del juego no siempre es f√°cil de alcanzar, e incluso ahora a veces pensamos que los niveles pueden ser demasiado dif√≠ciles, que esos niveles dif√≠ciles pueden aparecer con demasiada frecuencia, etc.  Despu√©s de equilibrarnos como pudimos, decidimos introducir herramientas para facilitar la vida del jugador (Retroceder, Bomba, Bloque de hielo, Teletransporte), y s√≠, se hizo m√°s f√°cil vivir, pero no para nosotros, solo para futuros jugadores.  La cantidad de trabajo y errores aumentaron para nosotros. <br><br>  Llegamos al men√∫ del juego, con nuestros poderes menguantes y nervios reprimidos.  La creatividad pis√≥ los frenos.  Hablando francamente, tuvimos que inspirarnos en otros juegos, por lo que les agradecemos mucho.  Y finalmente lo hicimos, la interfaz de usuario estaba lista en dise√±os anteriores. <br><br><img src="https://habrastorage.org/webt/fk/zu/oa/fkzuoa_egypchqldgd2faaqok74.png"><br><br>  Quer√≠amos estar a la moda tambi√©n.  As√≠ que decidimos agregar ahorro en el almacenamiento en la nube y no nos arrepentimos.  Esta tarea no fue la m√°s f√°cil, ya que en diferentes plataformas hay diferentes proveedores de almacenamiento en la nube.  En Steam hay Steamworks, para dispositivos m√≥viles es GooglePlay y GameRoom.  As√≠ que tuvimos que unificar el sistema de ahorro para poder sustituirlo por la plataforma deseada.  Al principio, decidimos usar EasyMobile para estos fines, pero pronto abandonamos esta idea.  El complemento es bastante bueno y tiene una gran cantidad de posibilidades, pero realmente no nos gustaba trabajar con almacenes nativos en la nube.  Como resultado, elegimos Firebase Realtime Database y la autenticaci√≥n de Facebook.  En resumen, tuvimos que pasar por el infierno para que todo funcionara (y esto no se trata de programaci√≥n, sino de configuraciones de 100500 que tuvieron que hacerse en ubicaciones de aplicaciones de 100500 y en Facebook, Firebase, etc.).  Tambi√©n en la base de datos hay l√≠mites de tr√°fico y para guardarlo, cada vez que escribimos, creamos un GUID y lo escribimos tanto en la base de datos como en el dispositivo.  Por lo tanto, si vemos que los GUID en el dispositivo y en la nube coinciden, podemos estar seguros de que no necesitamos leer todos los datos de la nube, pero podemos usar una copia local de los datos.  Como resultado, se agreg√≥ la sincronizaci√≥n, pero ... Uno de los errores m√°s extra√±os para nosotros fue el comportamiento no obvio de la base de datos de Firebase en algunos casos.  Como usamos Json, serializamos clases para almacenar el estado, pero Firebase a veces se comporta un poco extra√±o. <br><br>  Si pasamos un objeto de diccionario a Firebase, por ejemplo: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dict = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, SlotState&gt; { { <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() }, { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() }, { <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() };</code> </pre> <br>  Cuando lo leamos de la base de datos, no obtendremos un objeto Json, sino una matriz de Json (¬øQu√©?) <br>  Bueno, ok, usaremos listas en todas partes y no tendremos problemas, ¬øverdad?  Pero parec√≠a no estar bien. <br><br>  Si escribimos en Firebase: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dict = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, SlotState&gt; { { <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() }, { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() }, { <span class="hljs-number"><span class="hljs-number">100500</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() };</code> </pre> <br>  O incluso: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dict = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, SlotState&gt; { { <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() }, { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, { <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SlotState() };</code> </pre> <br>  Cuando lo leamos de la base de datos, obtendremos un objeto Json con claves y valores. <br><br>  Bueno, la l√≥gica de los desarrolladores se puede entender, pero puede generar errores que pueden aparecer despu√©s de un tiempo (¬øRecuerdas los GUID agregados para guardar que mencionamos anteriormente? Como resultado, una lectura rara de la base de datos con entradas relativamente frecuentes) . <br><br>  ¬øCu√°ndo es el lanzamiento?  Esta pregunta se escuch√≥ con mayor frecuencia.  Pero era necesario estar bien preparado para este d√≠a.  Tuvimos que hacer una lista de mercados, elegir una fecha de lanzamiento, evitar grandes ventas, hubo muchos matices que retrasaron el lanzamiento durante aproximadamente 2 meses.  Siguiendo el consejo de un art√≠culo, elegimos martes y mi√©rcoles para su lanzamiento.  Decidimos solicitar una revisi√≥n en 4pds, hablar sobre el juego en varios foros y publicitarlo en las redes sociales, en particular en Instagram (por supuesto, por una tarifa).  Lo que result√≥ de todo esto, lo descubrir√° en la segunda parte de esta historia, pero eso es m√°s tarde. <br><br>  ¬øQu√© tenemos al final?  Crear un juego no siempre es un proceso r√°pido.  Y es posible que el tiempo esperado para desarrollar el juego tenga que multiplicarse por 5. Obtenga personas que puedan ayudarlo con consejos pr√°cticos en industrias desconocidas.  Rel√°jese en cada oportunidad, ya que crear algo, no solo juegos, requiere mucha energ√≠a.  No es correcto estar cerca del lanzamiento sinti√©ndose agotado y ser menos √∫til que al comienzo del proyecto.  Y dinero, busca dinero, lo necesitar√°s.  Y de parte nuestra, gracias por su atenci√≥n, buena suerte y nos vemos en el pr√≥ximo art√≠culo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/443020/">https://habr.com/ru/post/443020/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443006/index.html">Lanzamiento de Grafana v6: nuevas caracter√≠sticas de una herramienta de visualizaci√≥n abierta</a></li>
<li><a href="../443008/index.html">Oda al d√≠a de un programador</a></li>
<li><a href="../443012/index.html">La compa√±√≠a rusa lanz√≥ la producci√≥n en serie de neuroprocesadores, competidores de Nvidia</a></li>
<li><a href="../443014/index.html">Compartir noticias de transporte: los scooters el√©ctricos no duran mucho; Lyft y Uber van a salir a bolsa</a></li>
<li><a href="../443016/index.html">Aprendizaje profundo: no solo sella en tel√©fonos m√≥viles o c√≥mo diagnosticamos los carros de locomotoras</a></li>
<li><a href="../443022/index.html">Rosserial y STM32</a></li>
<li><a href="../443024/index.html">ITMO University Digest: 12 conferencias tem√°ticas, hackatones y cursos MOOC para estudiantes de TI</a></li>
<li><a href="../443026/index.html">Control de acceso y con qu√© se come</a></li>
<li><a href="../443028/index.html">Eventos digitales en Mosc√∫ del 11 al 17 de marzo.</a></li>
<li><a href="../443030/index.html">El perfil de memoria m√°s simple en STM32 y otros microcontroladores</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>