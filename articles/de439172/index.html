<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèåÔ∏è üò∞ üè≥Ô∏è‚Äçüåà Assert () - Makroerweiterung zur Implementierung einer minimalen Fehlerbehandlung ‚ù£Ô∏è ü¶å üîâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Herr, ich habe mir eine Drachenverteidigung ausgedacht." Er hat keine Angst mehr vor uns! Es wird durch das Flattern der Fl√ºgel eines Drachen ausgel√∂...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Assert () - Makroerweiterung zur Implementierung einer minimalen Fehlerbehandlung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439172/"> "Herr, ich habe mir eine Drachenverteidigung ausgedacht."  Er hat keine Angst mehr vor uns!  Es wird durch das Flattern der Fl√ºgel eines Drachen ausgel√∂st und schaltet eine laute Sirene ein, damit jeder den Drachen n√§her kommen h√∂ren kann. <br>  "Tut diese Verteidigung noch etwas?" <br>  "Nein, warum?"  Wir werden gewarnt! <br>  ‚ÄûJa ... von den heulenden Sirenen gefressen ... Und doch ... erinnern Sie uns daran, wenn wir Ausf√§lle geplant haben? ... <br><br><h3>  Problembeschreibung </h3><br>  Diese Methode gibt nicht das Konzept der Fehlerbehandlung in komplexen und komplexen Projekten vor.  Es ist vielmehr ein Beispiel daf√ºr, was mit minimalen Mitteln getan werden kann. <br><a name="habracut"></a><br>  Eine gute Norm ist anzunehmen, dass w√§hrend der Programmausf√ºhrung kein assert () ausgel√∂st werden soll.  Wenn beim Testen der Anwendung mindestens eine assert () funktioniert hat, m√ºssen Sie diesen Fehler an den Entwickler senden.  Was aber, wenn die Anwendung nicht vollst√§ndig getestet wurde?  Und assert () funktioniert f√ºr den Client?  Fehler an Entwickler senden?  Programm abbrechen?  In Wirklichkeit ist dies die Release-Version der Anwendung und der Standard assert () wird einfach deaktiviert.  Die Frage stellt sich auch mit dem internen Widerspruch des Systems: Es sollte viel assert () geben, um das Erkennen von Fehlern zu erleichtern, aber assert () sollte weniger sein, um den Benutzer und seine Arbeit mit der Anwendung weniger zu unterbrechen.  Ich m√∂chte insbesondere nicht ‚Äûfallen‚Äú, wenn die Anzahl der Benutzer die Anwendung von der Stabilit√§t der Arbeit abh√§ngt und wenn assert () im Wesentlichen unbedeutend ist (Korrektur erforderlich, aber beispielsweise recht erfolgreich weiterarbeiten kann). <br><br>  Solche √úberlegungen f√ºhren dazu, dass assert () c / c ++ verfeinert werden muss.  Und definieren Sie Ihre eigenen Makros, die die Funktionalit√§t von standard assert () erweitern - aber durch Hinzuf√ºgen einer minimalen Fehlerbehandlung.  Lassen Sie solche Makros sein. <br><br>  <b>VERIFY_EXIT (Bedingung);</b> <b><br></b>  <b>VERIFY_RETURN (Condition, ReturnValue);</b> <b><br></b>  <b>VERIFY_THROW (Bedingung, Ausnahme);</b> <b><br></b>  <b>VERIFY_DO (Bedingung) {/ * Fehlerblock * /};</b> <br><br>  (Diese Makros k√∂nnen auch anders aufgerufen werden. Zum Beispiel VERIFY_OR_EXIT (), VERIFY_OR_RETURN (), VERIFY_OR_THROW (), VERIFY_OR_DO (). Oder umgekehrt in einer k√ºrzeren Version.) <br><br>  Diese Makros haben zum einen eine Implementierung sowohl f√ºr die Debug-Version der Kompilierung als auch f√ºr die Release-Version.  Dadurch k√∂nnen sie sich in der Release-Version des Programms verhalten.  Das hei√üt,  F√ºhren Sie Aktionen nicht nur w√§hrend des Testens, sondern auch mit dem Benutzer aus. <br><br><h3>  Makrobeschreibung </h3><br>  (Die Beschreibung der Makros ist ungef√§hr, ihr anderes Design ist ebenfalls m√∂glich.) <br><br>  1) <b>VERIFY_EXIT (Bedingung);</b> <br><br>  Es √ºberpr√ºft die Bedingungsbedingung und ruft, wenn sie falsch ist, die Standard-assert () (Debug-Version) auf und beendet auch die aktuelle Funktion (Debug- und Release-Versionen). <br><br>  2) <b>VERIFY_RETURN (Bedingung, R√ºckgabewert);</b> <br><br>  Es √ºberpr√ºft die Bedingungsbedingung und ruft, wenn sie falsch ist, die Standard-assert () (Debug-Version) auf und beendet die aktuelle Funktion durch R√ºckgabe von <b>ReturnValue</b> (Debug- und Release-Versionen). <br><br>  3) <b>VERIFY_THROW (Bedingung, Ausnahme);</b> <br><br>  √úberpr√ºft die Bedingungsbedingung und wenn sie falsch ist, ruft sie die Standard-assert () (Debug-Version) auf und l√∂st auch eine <b>Ausnahme aus</b> (Debug- und Release-Versionen). <br><br>  4) <b>VERIFY_DO (Bedingung) {/ * Fehlerblock * /};</b> <br><br>  √úberpr√ºft die Bedingungsbedingung. Wenn sie falsch ist, ruft sie den Standard assert () (Debug-Version) auf und f√ºhrt auch einen <b>Fehlerblock</b> oder eine Operation unmittelbar nach dem Makro aus (Debug- und Release-Versionen). <br><br>  F√ºr alle Makros ist es wichtig: <br><br><ul><li>  In allen F√§llen muss die <b>Bedingung</b> wahr sein, um das Makro zu "√ºbergeben", und falsch, um den Pfad der minimalen Fehlerbehandlung zu aktivieren. </li><li>  Jedes der Makros implementiert eine minimale Methode zur Fehlerbehandlung.  Dies ist erforderlich, um das Verhalten bei Fehlern zu implementieren, die beim Testen nicht erkannt wurden, aber beim Benutzer aufgetreten sind.  Abh√§ngig von der Implementierung k√∂nnen Sie den Entwickler √ºber einen Fehler informieren, der auf dem Client aufgetreten ist. Jede Implementierung bietet jedoch eine minimale M√∂glichkeit, einen Fehler zu beheben. </li></ul><br><h3>  Makro-Verwendungsmuster </h3><br>  Das Interessanteste ist nat√ºrlich, dass die Entropie-Supermenschen (Helden der Reduzierung von Programmfehlern) die Verwendung dieser Makros sind. <br><br>  1) Vor- und Nachbedingungen. <br><br>  Der erste Anwendungsfall sind Vor- und Nachbedingungen.  Ich m√∂chte Sie daran erinnern, dass Vorbedingungen den Status des Programms (Eingabeargumente, Objektstatus, verwendete Variablen) auf √úbereinstimmung mit den erforderlichen Anforderungen des ausgef√ºhrten Codefragments √ºberpr√ºfen.  Post-Bedingungen (sie sind in Programmen weniger verbreitet) sollen √ºberpr√ºfen, ob wir das gew√ºnschte Ergebnis erzielt haben und ob der Status der Objekte f√ºr das aktuelle Codefragment g√ºltig bleibt. <br><br>  Die Verwendung der vorgeschlagenen Makros ist unkompliziert - wir weisen jede Pr√ºfung in einem separaten Makro zu.  Wir w√§hlen Makros basierend auf der von uns ben√∂tigten Fehlerbehandlung aus.  (VERIFY_EXIT () - Fehlerverarbeitung beim Beenden dieser Funktion, VERIFY_RETURN () - Fehlerverarbeitung bei R√ºckgabe eines Wertes, VERRIFY_THROW () - Fehlerverarbeitung mit Ausnahme usw.) <br><br>  Sie k√∂nnen auch das VERIFY () -Makro hinzuf√ºgen oder verwenden, das keine Fehlerbehandlung durchf√ºhrt.  Dies kann beispielsweise unter Nachbedingungen am Ende einer Funktion n√ºtzlich sein. <br><br>  Diese Makros sind v√∂llig autark, wenn Sie die Prinzipien des reinen Codes verwenden und gen√ºgend Funktionen zuweisen, um atomare Aktionen zu implementieren.  Jede Funktion kann den Status eines Objekts, Eingabeargumente usw. √ºberpr√ºfen.  seine atomare Wirkung auszuf√ºhren. <br><br>  2) Semantik einer Transaktion. <br><br>  Diese Makros k√∂nnen auch verwendet werden, um Code mit Transaktionssemantik zu implementieren.  Eine solche Semantik wird verstanden als: 1) schrittweise Vorbereitung auf eine Operation mit √úberpr√ºfung der Ergebnisse jeder der Vorbereitungsstufen;  2) die Durchf√ºhrung der Aktion nur, wenn alle Vorbereitungsphasen erfolgreich waren;  3) Verweigerung der Erf√ºllung, wenn einige Bedingungen in der Vorbereitungsphase nicht erf√ºllt sind (mit einem m√∂glichen Rollback von der Erf√ºllung). <br><br>  3) Entwerfen des Codes unter Ber√ºcksichtigung einer m√∂glichen Erweiterung. <br><br>  Dies gilt insbesondere f√ºr Bibliotheken und allgemeinen Code, die anf√§nglich im selben Kontext der Ausf√ºhrungsbedingungen entwickelt werden k√∂nnen und sp√§ter mit anderen Bedingungen verwendet werden k√∂nnen (beginnen, anders verwendet zu werden).  In diesem Fall k√∂nnen diese Makros die "Grenzen" der Funktionalit√§t des Codes beschreiben.  Bestimmen Sie, was urspr√ºnglich als Fehler angesehen wurde und was erfolgreich war.  (Dieser Ansatz kommt den klassischen Pre-Post-Bedingungen sehr nahe.) Nat√ºrlich schreibe ich die ‚ÄûR√§nder‚Äú in Anf√ºhrungszeichen, weil  Diese Grenzen k√∂nnen √ºberarbeitet werden, es ist jedoch wichtig, das Wissen √ºber die akzeptablen Grenzen des Code-Designs zu ermitteln (oder vielmehr an zuk√ºnftige Entwickler weiterzugeben). <br><br><h3>  Makroimplementierung </h3><br>  Ich gehe davon aus, dass die meisten Entwickler auf mittlerer Ebene keine Probleme haben werden, diese Makros zu implementieren.  Aber wenn Sie Informationen ben√∂tigen, werde ich einige wichtige Punkte widmen. <br><br>  Makros m√ºssen als einzelne Anweisung darstellbar sein.  Was kann mit do {} while (false) Konstrukten oder √§hnlichem gemacht werden?  Zum Beispiel so: <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> VERFY_EXIT(cond) \ do{bool _= (bool)(cond); assert(_); </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">(!_) {return;}} while(false) \ </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/*end macro VERIFY_EXIT()*/</span></span></span></span></code> </pre> <br>  Dann k√∂nnen Sie den folgenden Code schreiben: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(a &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) VERIFY_EXIT(a%<span class="hljs-number"><span class="hljs-number">2</span></span>==<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br>  Dies ist nat√ºrlich nur eine der M√∂glichkeiten der Implementierung.  Sie k√∂nnen Makros auf andere Weise implementieren. <br><br>  PS Erfolgreicher Kampf mit Entropie, √úbermenschen! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de439172/">https://habr.com/ru/post/de439172/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de439160/index.html">Stand des Algorithmus: Was passiert mit Indie-Entwicklern auf Steam?</a></li>
<li><a href="../de439162/index.html">So debuggen Sie Frontend und Backend: Schritt-f√ºr-Schritt-Anleitung</a></li>
<li><a href="../de439166/index.html">mmWave auf dem Weg zur Kommerzialisierung im Smartphone-Formfaktor</a></li>
<li><a href="../de439168/index.html">Client-Analysesysteme</a></li>
<li><a href="../de439170/index.html">Mobilfunkbetreiber helfen Banken dabei, die Richtigkeit von Kundendaten zu √ºberpr√ºfen</a></li>
<li><a href="../de439174/index.html">Tag des sicheren Internets: Welche Bedrohungen m√ºssen 2019 gesucht werden?</a></li>
<li><a href="../de439176/index.html">Senden Sie eine E-Mail mit Anh√§ngen von JavaMailSender von SpringFramework</a></li>
<li><a href="../de439180/index.html">Rekko Herausforderung</a></li>
<li><a href="../de439182/index.html">Wie wir Bestellungen zwischen Fahrern in Yandex.Taxi verteilen</a></li>
<li><a href="../de439184/index.html">√Ñndern Sie Ihr Kennwort: Testen der Kennwortrichtlinien f√ºr Webdienste</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>