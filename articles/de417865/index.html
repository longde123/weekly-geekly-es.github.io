<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôëÔ∏è üñ®Ô∏è ‚õ¥Ô∏è Android-Barrierefreiheit - ein Wolf im Schafspelz? Yandex Vortrag üë©üèæ‚ÄçüöÄ üïç üòÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor einem Monat hat Senior-Entwickler Danila Fetisov auf der n√§chsten Droid Party das Prinzip des Dienstes, der f√ºr die Barrierefreiheitsfunktionen vo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Android-Barrierefreiheit - ein Wolf im Schafspelz? Yandex Vortrag</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/417865/">  Vor einem Monat hat Senior-Entwickler Danila Fetisov auf der n√§chsten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Droid Party</a> das Prinzip des Dienstes, der f√ºr die Barrierefreiheitsfunktionen von Android verantwortlich ist, eingehend untersucht.  Sie erfahren, wie Sie damit die Zug√§nglichkeit Ihrer Projekte verbessern sowie eine gef√§hrliche Sicherheitsanf√§lligkeit namens Clickjacking verbessern k√∂nnen. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/dxbv5EoiRxc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - Mein Name ist Danila Fetisov, ich komme aus dem Moskauer B√ºro von Yandex, genauer gesagt von Taxi, genauer gesagt von Taximeter.  Heute werden wir dar√ºber sprechen, was Android-Barrierefreiheit ist und warum ich beschlossen habe, ein so heiliges kleines Ding f√ºr Menschen mit Behinderungen einen Wolf im Schafspelz zu nennen. <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/cv/vo/zp/cvvozpr20mbka0ypbsfbidevqg4.jpeg"><br><br>  Also die Gliederung des Berichts.  Zuerst werden wir sehen, wie dieses Ding verwendet, erstellt und angepasst werden kann.  Vielleicht erz√§hle ich Ihnen ein paar Life-Hacks, Lebensmittel-Nishtyaks.  Und dann √ºber das Interessanteste - dar√ºber, warum dieses Ding gef√§hrlich ist. <br><img src="https://habrastorage.org/webt/a9/ey/rl/a9eyrlotqmcnesi28xvqz-eccf4.jpeg"><br>  Wie k√∂nnen wir das √ºberhaupt anwenden?  Was ist es im Allgemeinen f√ºr diejenigen, die es nicht wissen?  Alle Ereignisse, die im System auftreten, fallen in unseren Dienst und wir verarbeiten sie. <br><br>  Sobald etwas auf uns hereinf√§llt, k√∂nnen wir den Inhalt von dort √ºbernehmen und ihn mit demselben Yandex SpeechKit, Google Text-to-Speech oder etwas anderem, das Ihnen gef√§llt, aussprechen.  Aber was am interessantesten ist, wir k√∂nnen nicht nur ein Systemereignis empfangen, sondern auch ausl√∂sen.  Du kannst immer noch etwas sagen.  Er warf die Veranstaltung, dr√ºckte den Knopf, und richtig, alles ist in Ordnung, genie√üen Sie das Leben. <br><br>  Wenn wir √ºber diese beiden Punkte sprechen, sind sie tats√§chlich voreingestellt.  Google hat diese Funktion gestartet, damit Menschen mit Behinderungen Ihre Anwendung verwenden k√∂nnen.  Aber wie jeder wei√ü, wollen wir Entwickler uns nicht langweilen: Wir setzen uns, schauen uns den Code an und √ºberlegen: Wie k√∂nnen wir ihn anwenden?  Und los geht's. <br><br>  Automatisierung, Testen durch Simulation von Benutzeraktionen, kontextbezogene Werbung.  Sie verstehen: Da wir Inhalte vom Bildschirm erhalten, k√∂nnen wir verstehen, wie wir diesen Benutzer frustrieren k√∂nnen. <br><br>  Was ist sonst noch interessant?  Verarbeitung von USSD-Anfragen.  Leider erschien die normale API erst ab dem 26. SDK und Entwickler m√ºssen irgendwie √ºberleben.  Und Sie stellen sich vor, sie analysieren ernsthaft USSD-Anforderungen und analysieren Benutzeroberfl√§chen mithilfe des AccessibilityService. <br><br>  Der sechste Punkt ist die Ellipse.  Warum?  Denn nach diesem Bericht haben Sie Verst√§ndnis daf√ºr, wie und wof√ºr Sie ihn anwenden m√ºssen.  Und dann √∂ffnen Sie buchst√§blich Ihren Fantasiefluss, nehmen eine Tasse Tee, Kaffee und fahren, um ihre coolen Funktionen zu codieren. <br><br>  Wo soll ich anfangen?  Die n√§chste Folie wird schmerzhaft allt√§glich sein. <br><img src="https://habrastorage.org/webt/u8/jc/wx/u8jcwxc0utuf1cuifynebg6ln-i.jpeg"><br><br>  Wir nehmen einen Service in Anspruch, erben von AccessibilityService und genie√üen das Leben. <br><br>  Dann werfen wir diesen Dienst in Manifest, und was ist hier interessant?  Im Wesentlichen eine regelm√§√üige Serviceaufzeichnung.  Achten Sie jedoch auf das Beschriftungsfeld.  Jetzt werde ich nicht sagen, was es ist.  Denken Sie daran, dies wird etwas sp√§ter sein. <br><img src="https://habrastorage.org/webt/u3/0x/_r/u30x_rwrhhj5ofyohytu0m97zua.jpeg"><br><img src="https://habrastorage.org/webt/qk/8p/yd/qk8pydxidl1roqfqjecast4wtns.jpeg"><br><br>  Weiter unten im Manifest haben wir nur eine Konfigurationsdatei, auch nichts Interessantes. <br><img src="https://habrastorage.org/webt/51/g8/eo/51g8eoxbsuo4pug8fio8_cltyhu.jpeg"><br><br>  Und die Konfigurationsdatei selbst sieht etwas schrecklicher aus.  Von dem, was Sie ben√∂tigen, sind h√∂chstwahrscheinlich 85 bis 90 Prozent das Feld f√ºr die Filtereinstellungen f√ºr eingehende Ereignisse. <br><br>  Nehmen wir an, es lohnt sich hier, dass wir absolut alle Veranstaltungen erhalten m√∂chten.  Sie k√∂nnen einen Filter nur f√ºr Klicks, f√ºr das √Ñndern von Inhalten oder f√ºr etwas anderes verwenden. <br><br>  Als n√§chstes folgt ein Filter f√ºr Anwendungspakete.  Wof√ºr ist das?  Sie selbst verstehen vollkommen, dass das Empfangen von Ereignissen von absolut allen Anwendungen im System f√ºr eine Anwendung zu viel w√§re.  Aus diesem Grund hat Google beschlossen, dies irgendwie einzuschr√§nken.  Filter hinzugef√ºgt. <br><br>  Weitere Beschreibung.  Es gab ein Beschriftungsfeld und verwenden Sie jetzt die Beschreibung.  Tats√§chlich erstellen sie ein Paar, das dem Benutzer dann mitteilt, warum Sie Ihren Dienst aktivieren m√ºssen. <br><br>  Und der letzte Punkt: Inhalt wird vom aktuell ge√∂ffneten Fenster ben√∂tigt oder nicht ben√∂tigt.  Wenn Sie nur verstehen m√∂chten, dass ein Ereignis aufgetreten ist, setzen Sie es auf false und qu√§len Sie den Benutzer nicht erneut. <br><img src="https://habrastorage.org/webt/qi/xf/n8/qixfn8lb2tnrxvzvsedyjhp26v4.jpeg"><br><br>  Die Aufnahme des Dienstes.  Um diese Funktion zu aktivieren, m√ºssen Sie den Benutzer leider qu√§len und ihn zwingen, relativ gesehen sieben Kreise der Einstellungsh√∂lle zu durchlaufen. <br><br>  Erstens er√∂ffnen wir ihm besondere M√∂glichkeiten.  Cool AccessibilityService - Dies ist genau das gleiche Label aus dem Manifest, von dem ich Ihnen in den vorherigen Folien erz√§hlt habe. <br><img src="https://habrastorage.org/webt/ys/kn/5d/yskn5d7xfrtm1xumv1s7qoiah3y.jpeg"><br><br>  Weiter.  Der Benutzer muss Ihren Dienst ausw√§hlen und beginnt dann, die Beschreibung zu lesen. Warum m√∂chten Sie diesen Dienst aktivieren und die Kontrolle √ºber das Ger√§t erlangen? <br><img src="https://habrastorage.org/webt/hl/1c/ge/hl1cge-ths25xe4nd9idmbs4vzk.jpeg"><br><br>  OK, beinhaltet.  Aber da war es.  Es kommt eine Art be√§ngstigender Dialog heraus, der besagt: "Alter, wenn Sie ihn jetzt einschalten, √ºbernehmen wir die volle Kontrolle √ºber Ihre Anwendung. Relativ gesehen wird alles be√§ngstigend sein."  Benutzer lesen dies nicht immer, klicken Sie einfach auf "OK", damit wir hinter ihnen stehen.  Also leben wir. <br><br>  Woher kommt eigentlich die Ereignisverarbeitung?  Die n√§chste Folie ist etwas schlauer als die erste Folie √ºber den Service, aber dennoch. <br><img src="https://habrastorage.org/webt/az/l9/w2/azl9w2qudcqjphygfi-60a0dniy.jpeg"><br><br>  Hier ist unser DummyAccessibilityService, und wir legen dort zwei Methoden ab, in die wir alles schreiben werden.  In der Tat ist Interrupt eine solche Methode, bei der Sie Ihre Links bereinigen, Abonnements beenden oder etwas anderes. <br><br>  Am interessantesten ist die AccessibilityEvent-Klasse, die uns zukommt.  Was k√∂nnen wir daraus machen? <br><img src="https://habrastorage.org/webt/no/xx/vc/noxxvcfn4y0yml08swcmvl2xfa8.jpeg"><br>  Zun√§chst k√∂nnen wir verstehen, was wirklich in Ihrem System passiert ist.  Wir nehmen EventType und was bekommen wir hier? <br><br>  Und wir bekommen, dass wir dort eine Art Aktivit√§t ge√∂ffnet haben, oder Dialog oder Popup, oder im Allgemeinen ist die Benachrichtigung gefallen.  Alles f√§llt genau dort auf window_state_changed. <br><br>  Wir verstehen weiter, dass sich der Inhalt einiger Ansichten ge√§ndert hat.  Sie haben es verschoben, eine Zeile in die Textansicht geworfen oder so √§hnlich. <br><br>  Und dann finden wir heraus, wann der Benutzer auf eine Ansicht klickt oder diese ausw√§hlt.  Meiner Meinung nach sind 85 und sogar 98 Prozent der Hauptproduktaufgaben, die Sie mit diesen Ereignistypen abdecken. <br><br>  Aber wenn Sie nicht genug davon haben, k√∂nnen Sie bitte zur Dokumentation gehen, ich werde Ihnen am Ende des Berichts einen Link zeigen, und nat√ºrlich werden Sie den Bericht herunterladen, Sie k√∂nnen fortfahren.  Es ist nur eine Lesung f√ºr den ganzen Abend, es gibt eine riesige Liste.  Im Ernst, Sie werden es nicht auf einmal beherrschen. <br><img src="https://habrastorage.org/webt/f5/ja/fz/f5jafzlevas63xsqrin83inyxhc.jpeg"><br>  Jetzt haben wir eine Frage: Wie finde ich eine Ansicht?  Wir haben herausgefunden, was passiert ist.  Und jetzt wollen wir verstehen, mit welcher Ansicht, mit welcher Komponente dies passiert ist. <br><br>  Nehmen Sie an unserem AccessibilityEvent teil. <br><br>  Wir nehmen Source von ihm und, voila, wir haben bereits Metainformationen angezeigt. <br><br>  Aber was ist, wenn Sie ein Hardcore-Entwickler sind und nicht gen√ºgend Informationen zu einer Ansicht haben, m√∂chten Sie verstehen, was jetzt im Grunde auf dem Bildschirm passiert?  Das SDK ist begrenzt, aber klein. <br><img src="https://habrastorage.org/webt/zk/op/5-/zkop5-6exzqeskitmmqwurgzjg0.jpeg"><br>  Wir nehmen unseren AccessibilityService und erhalten tats√§chlich einen Verweis auf das Stammelement in der gesamten Hierarchie auf dem aktuellen Bildschirm.  Und erst dann bekommen wir unsere Metainformationen zu sehen. <br><img src="https://habrastorage.org/webt/rb/re/bb/rbrebb7swp7d2y33m_hfmukf_dc.jpeg"><br>  Das ist nat√ºrlich cool, aber jetzt sollten Sie eine Frage im Kopf haben: Nun, wir haben einen Link zum Root-Element.  Was machen wir als n√§chstes? <br><br>  Wenn Sie den sicheren Weg gehen wollen, dann bitte die erste Option.  Nehmen Sie eine ID-Ansicht und finden Sie nur eine Methode. <br><br>  Wenn es Ihnen irgendwie langweilig vorkommt, dass die Jagd etwas mehr Spa√ü macht, dann nehmen wir den Text aus der Ansicht, wir finden ihn aus dem Text. <br><br>  Wenn das f√ºr dich nicht interessant genug ist - Leute, nimm Kind und Rekursion, geh drauf.  Dann werden Sie genau verstehen, was passiert. <br><br>  Gro√üartig.  Sie und ich haben herausgefunden, wie Sie eine Ansicht finden.  Wie soll ich jetzt mit ihr interagieren? <br><br>  Wieder nehmen wir unsere AccessibilityNodeInfo und werfen jetzt bereits Action hinein.  Welche Aktion k√∂nnen wir dort werfen? <br><img src="https://habrastorage.org/webt/gq/fg/wt/gqfgwtmaht-gksrhpzagim1siww.jpeg"><br>  Zun√§chst k√∂nnen wir Click werfen.  Warum habe ich hier nicht nur nach Klick, sondern auch Klick und Auswahl hier gesetzt?  Ja, weil es eine Reihe von Eckf√§llen gibt, wenn der √ºbliche Klick Sie nicht rettet.  Angenommen, ein Benutzer w√§hlt einen Text aus und durch Klicken auf die Ansicht wird die Auswahl sauber aus diesem Text entfernt.  Auf einigen Ger√§ten kann die Ansicht im Prinzip erst angeklickt werden, wenn Sie Select darauf aufrufen.  Im Allgemeinen viele Probleme.  Und wenn Sie nur ein Dampfbad nehmen m√∂chten - w√§hlen Sie, klicken Sie.  Zwei Aktionen, und das ist alles, es gibt Gl√ºck. <br><br>  Was kommt als n√§chstes bei uns?  Und dann haben wir die Textinstallation.  Auch hier ist alles einfach.  Nehmen Sie Action_set_text, erstellen Sie ein Bundle mit unserer Linie und leben Sie. <br><br>  Und der dritte Punkt ist die Dokumentation.  Dies ist wieder der zweite Abend, den Sie haben werden.  Eine Reihe von Aktionen direkt, meiner Meinung nach sogar mehr als Ereignisse. <br><br>  Hurra!  Der langweiligste Teil des Berichts ist vorbei.  Jetzt ist es Zeit f√ºr alle Arten von Nishtyachkov. <br><br>  Angenommen, Sie haben einen Dienst erstellt, konfiguriert und eine Art Ereignisverarbeitung ausgef√ºhrt.  Jetzt m√ºssen Sie verstehen, wie Sie den Benutzer zwingen und ihn bitten, diesen Dienst weiterhin zu aktivieren.  Um dies zu verstehen, m√ºssen Sie im Prinzip herausfinden, ob der Dienst jetzt aktiviert ist oder nicht. <br><img src="https://habrastorage.org/webt/bt/ns/dk/btnsdk2nbs59tbxcdsxh1tpdeh8.jpeg"><br><br>  Alles ist einfach bis zur Banalit√§t.  Wir nehmen den AccessibilityManager und fragen ihn nach allen derzeit im System enthaltenen Diensten. Dort finden wir unsere. <br><br>  Aber nat√ºrlich w√§re alles cool, wenn der AccessibilityManager ein normaler Typ w√§re, und es gab keinen, bei dem Sie ihn fragen: "Alter, geben Sie mir bitte alle verf√ºgbaren Dienste", und er sagt: "Entschuldigung, ich bin nicht heute in der Stimmung.  Hier ist eine leere Liste f√ºr dich. ‚Äú  Und du sitzt so und denkst: "Verdammt, wir haben normal geredet." <br><img src="https://habrastorage.org/webt/1d/fg/hb/1dfghb7xfautjz-mkrs0pdkjdd4.jpeg"><br><br>  Nun, es gibt gute alte Freunde - das sind Settings.Secure.getInt und getString.  Zuerst fragen wir, ob Dienste √ºberhaupt im System enthalten sind.  Wenn enthalten, wird alles in eine Zeile geworfen, und dort suchen wir bereits nach unseren Inhalten. <br><br>  Und hier begegnen wir der Tatsache, dass wir alles richtig gemacht haben.  Wir haben die Konfiguration erstellt, die Erstellung von Ereignissen erstellt und den Dienst aktiviert.  Wir sehen mit Sicherheit, dass wir den Service eingeschaltet haben und keine Ereignisse zu uns kommen.  Und so kommen sie entweder an oder kommen nicht an.  In diesem Moment dachte ich, dass in meinem Leben eine Art schwarzer Streifen gekommen war.  Richtig, es gab keine Optionen. <br><br>  Ich dachte, dachte, reserched, reserched und dann, Bingo, wurde mir klar, dass dies Xiaomi mit ihrem MIUI ist.  Das ist nur Jungs Schmerz!  Das ist ernst. <br><br>  Okay, verstehe, was das Problem ist.  Wie kann ich es jetzt l√∂sen?  Leider wird bei einigen Firmware-Versionen in MIUI alles so ausgef√ºhrt, dass das System Ihren Dienst im Prinzip nicht einmal startet, wenn sich Ihre Anwendung nicht im automatischen Start befindet. <br><img src="https://habrastorage.org/webt/3b/_k/pm/3b_kpmlnpiqfih6eecs3v8w3x-q.jpeg"><br><br>  Aber hier ist eine L√∂sung: Wir bitten den Benutzer, Ihre Anwendung zum automatischen Start hinzuzuf√ºgen, und wir leben weiter und genie√üen das Leben. <br><img src="https://habrastorage.org/webt/y-/qq/zh/y-qqzhgxuwg7vj9hvrilasjw5es.jpeg"><br>  Und dann kam die Kirsche auf den Kuchen.  Warum ist dieser Dienst f√ºr Menschen mit Behinderungen so freundlich, ein Wolf im Schafspelz? <br><br>  Es scheint mir, dass viele von Ihnen bereits vermutet haben, dass wir, wenn ein Benutzer diesen Dienst aktiviert, leicht viele vertrauliche Informationen von seinem Ger√§t stehlen k√∂nnen.  Wir k√∂nnen es nicht nur stehlen, sondern auch irgendwo ablegen, z. B. den Bildschirm entsperren, wenn er mit einem PIN-Code gesperrt ist.  Nun, ok, schalte den Bildschirm frei.  Was weiter?  Wir werben f√ºr uns selbst, wir werden viel Geld verdienen, wir werden sofort leben.  Und am Ende k√∂nnen wir grunds√§tzlich alle Aktionen des Benutzers imitieren und beispielsweise eine Art Anwendung einf√ºgen, ihr Administratorrechte erteilen und dem Benutzer sagen: ‚ÄûAuf Wiedersehen.  Verabschieden Sie sich von Ihrem Ger√§t. ‚Äú <br><img src="https://habrastorage.org/webt/29/pe/c0/29pec0si917-v1ig0uot2phee9s.jpeg"><br>  Okay, wir k√∂nnen das alles machen, aber jetzt wirst du sagen: ‚ÄûDu bist nat√ºrlich gut gemacht.  Er sagte uns, wie wir welche Art von Daten stehlen k√∂nnen.  Aber wie bringt man den Benutzer dazu, Ihren AccessibilityService einzuschalten, und ob die Anwendung Linksh√§nder ist? ‚Äú  Okay, der Benutzer, so scheint es mir, √∂ffnet einfach die Einstellungen, versteht, dass dort eine Art Unsinn geschrieben ist, schlie√üt, deinstalliert die Anwendung und vergisst.  Und Sie wissen, Sie werden Recht haben, wenn der erste Weg, um die Systemeinstellungen einzuschalten, auf "Nein" geht, weil dies eine Art Unsinn ist.  Und hier kommt uns eine Schwachstelle zu Hilfe, die im Wesentlichen als Clickjacking bezeichnet wird.  Wie viele von euch kennen sich mit Clickjacking aus?  Gro√üartig, es wird interessant sein. <br><br>  Aufgrund dieser Sicherheitsanf√§lligkeit haben einige Leute - ich habe eine kleine Referenz angegeben, da alle folgenden Screenshots aus den Ressourcen dieser Leute stammen - einen Angriff namens Cloak and Dagger entwickelt.  Mit nur zwei Berechtigungen und minimaler Benutzerinteraktion erhalten Sie direkt √ºber das Wort ‚Äûvollst√§ndig‚Äú Zugriff auf die gesamte Anwendung. <br>  Aber ok, was m√ºssen wir tun, um den Benutzer zu hacken? <br><br>  Wir werfen unsere Anwendung auf Google Play.  Wir hoffen, dass der Benutzer der Android-Version weniger als 8 ist. <br><br>  Sie verstehen, ein bisschen - 95% im Moment.  Und das ist alles, der Benutzer l√§dt unsere Anwendung herunter. <br><img src="https://habrastorage.org/webt/9v/dn/he/9vdnhevjsiqymsps9saljmvqbxo.jpeg"><br><br>  Kurz gesagt, diese Malware sagt dem Benutzer, wie man ein guter Kerl wird, und zeigt ganz am Ende ein Video.  Jetzt sehen Sie alles selbst. <br><img src="https://habrastorage.org/webt/gd/7z/mr/gd7zmrvvkntjwcemk7yutwncngi.jpeg"><br><br>  Ok, lass uns anfangen.  Ein kleiner Text.  Uns wird gesagt: "Wenn Sie jetzt mit dem Tutorial beginnen, werden Sie ein guter Kerl."  Okay, nat√ºrlich fangen wir an. <br><img src="https://habrastorage.org/webt/pl/sv/hm/plsvhmpjsbzpt3bgzrue8sxz9uw.jpeg"><br><br>  Ein anderer Text.  Au√üerdem werden Menschen in Form von gr√ºnen M√§nnern pr√§sentiert.  Nun, ok, klicken wir auf Weiter. <br><img src="https://habrastorage.org/webt/lb/ma/eu/lbmaeuozr-ryujmjavqj0qkxile.jpeg"><br><br>  Ein anderer Text.  Okay.  Jetzt werde ich es zu Ende lesen und auf jeden Fall ein Video sehen, in dem sie mir sagen, wie ich ein guter Kerl werden kann. <br><img src="https://habrastorage.org/webt/cm/ip/6_/cmip6_hmlgvpcgaye7vxyx61jbs.jpeg"><br><img src="https://habrastorage.org/webt/oj/9h/ad/oj9hadtoyv97xptkrep1llofyok.jpeg"><br><br>  Ich klicke auf "OK" und dort startet das Video.  Das ist uns nicht so wichtig.  Es ist wichtig, was in diesem Moment wirklich auf dem Ger√§t passiert ist.  Der Nutzer startet die Anwendung und da wir sie √ºber Google Play installiert haben, wird uns automatisch die Berechtigung zum √úberlagern erteilt.  Voila, wir √∂ffnen das Eingabehilfenfenster und √ºberlagern es einfach.  Der Benutzer klickt auf das Start-Tutorial, w√§hlt jedoch tats√§chlich unseren AccessibilityService aus.  Nun, Sie verstehen, was als n√§chstes kommt. <br><img src="https://habrastorage.org/webt/wn/mz/ao/wnmzaoxeynacfz_ndt0yqwxqipq.jpeg"><br><br>  Als n√§chstes klicken wir auf Weiter und w√§hlen den Kippschalter. <br><img src="https://habrastorage.org/webt/bl/-h/ei/bl-hei-modlm3kl0v_jdimivloo.jpeg"><br><br>  Ganz am Ende schalten wir den AccessibilityService ein, und der Benutzer merkt nicht einmal, dass dies passiert ist. <br><br>  Wissen Sie, wo das Problem liegt?  Die √úberlagerung ist so angeordnet, dass sie entweder alle Ereignisse vollst√§ndig absorbiert, alle Ber√ºhrungen bereits weit entfernt sind oder vollst√§ndig fehlen.  Und der Punkt dieses speziellen Angriffs ist, dass wir das Overlay f√ºllen, den gesamten Bildschirm mit Ausnahme eines Leerzeichens.  In diesem Fall ist dies die Schaltfl√§che OK.  Diese Schaltfl√§che ist wirklich aus dem Dialog.  Wenn wir darauf klicken, erhalten wir ein Ereignis, das besagt, dass eine Ber√ºhrung drau√üen stattgefunden hat und alles in Ordnung ist. <br><br>  Wie reagiert Google auf all diese Probleme?  Sie verstehen, dies ist eine ziemlich brutale Sicherheitsl√ºcke. <br><img src="https://habrastorage.org/webt/mn/mz/hx/mnmzhxn22qbitijiqknvxdeycxm.jpeg"><br>  Alles begann sehr interessant - alles mit acht Jahren Schweigen.  Google enth√ºllte dieses kleine Ding und sagte: ‚ÄûLeute, benutzt es.  Es ist sicher.  Ich sage sicher. "  Na gut.  Google warf.  Die gleichen Leute, die Cloak und Dagger erfunden haben, haben Unterst√ºtzung geleistet, Tracker und Bug-Tracker ausgegeben. <br><br>  Dann sagte Google: ‚ÄûOkay, okay Leute, beruhigt euch.  Ich werde Clickjacking in Oreo schlie√üen. "  Nun, mach es aus.  Sie sitzen immer noch da und denken: ‚ÄûVerdammt, Leute, egal, wenn Angreifer den Benutzer zwingen, die Zug√§nglichkeit zu aktivieren, wird es schlecht.  Lassen Sie uns die Entwickler ein wenig verspotten. <br><br>  Und sie senden einen Brief: "Tun Sie es, ich wei√ü nicht was, sonst wird Ihre Bewerbung aus Google Play gel√∂scht."  Kurz gesagt lautete der Brief wie folgt: ‚ÄûLeute, sagt uns und den Benutzern, warum ihr AccessibiiltyService brauchst.‚Äú  Wie kann man das sagen?  In welchem ‚Äã‚ÄãFormat?  Wo?  Im Allgemeinen kein Verst√§ndnis.  Und in dem Brief ist dies nat√ºrlich nicht angegeben. <br><br>  Na gut.  Riesige F√§den auf reddit, ein paar Briefe zur Unterst√ºtzung.  Und dann schreibt ein Entwickler einen Brief auf reddit und sagt: ‚ÄûJa, Leute, nichts Kompliziertes.  F√ºgen Sie es in die Beschreibung ein, die ich Ihnen gezeigt habe, und geben Sie es in die Beschreibung von Google Play ein. Alles wird gut, ich werde Sie in Ruhe lassen. " <br><br>  In diesem Moment dachte ich: Okay, ich habe diesen Brief an einer Seitenlinie von Reddit gefunden.  Aber was ist, wenn ich ein junger Entwickler bin, ich habe gerade AccessibilityService kennengelernt und m√∂chte die Anwendung damit freigeben?  Wie soll ich herausfinden, dass ich solche Aktionen ausf√ºhren muss, muss ich sie in der Beschreibung bei Google Play usw. ablegen?  Ich dachte, dachte, suchte, suchte und, wei√üt du, Leute, ich habe √ºberhaupt nichts gefunden. <br><br>  Im Ernst, es gibt nichts.  In der Hauptdokumentation gibt es nur eine Beschreibung: "Leute, das ist nur f√ºr Menschen mit Behinderungen, das ist der Punkt.  Du kannst es nicht mehr benutzen. "  Aber tats√§chlich stellt sich heraus, dass es m√∂glich ist. <br><img src="https://habrastorage.org/webt/5b/lw/_3/5blw_3tvoiwpbotsie5ilkmemve.jpeg"><br>  Nun, du und ich sind zu Ende gegangen.  Was k√∂nnten wir mit dir reden?  Wir haben dar√ºber gesprochen, wie man es verwendet, wie man alles erstellt, konfiguriert und wie man mit UI-Ereignissen umgeht.  Nat√ºrlich haben wir verstanden, wie dies m√∂glich ist, aber Sie m√ºssen nicht mit dem AccessibilityService interagieren.  Nat√ºrlich empfehle ich Ihnen nicht, dies zu tun, es war nur zur Information.  Hier sind die versprochenen Quellen: <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">developer.android.com/guide/topics/ui/accessibility/services</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">developer.android.com/reference/android/view/accessibility/AccessibilityEvent</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">developer.android.com/reference/android/view/accessibility/AccessibilityNodeInfo</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">cloak-and-dagger.org</a> <br><br>  Leute, vielen Dank f√ºr eure Aufmerksamkeit! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de417865/">https://habr.com/ru/post/de417865/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de417855/index.html">Der chinesische "Mondpalast" stellte einen neuen Rekord auf</a></li>
<li><a href="../de417857/index.html">$ 225 GPS-Spoofer, der Robomobile auf den Gegenverkehr umleiten kann</a></li>
<li><a href="../de417859/index.html">3CX-Integration mit Microsoft Dynamics 365</a></li>
<li><a href="../de417861/index.html">Endloses Primmuster</a></li>
<li><a href="../de417863/index.html">Kinder bald bestellen? Der UK Ethics Council genehmigt die Gentechnik menschlicher Embryonen</a></li>
<li><a href="../de417867/index.html">Wie man die Dauer eines IT-Projekts bewertet und wann es sich √ºberhaupt nicht lohnt</a></li>
<li><a href="../de417869/index.html">So debuggen Sie WebRTC</a></li>
<li><a href="../de417871/index.html">An der Ziellinie des suborbitalen Tourismus</a></li>
<li><a href="../de417873/index.html">M√∂glichkeiten zum Erstellen von PopUp-Fenstern</a></li>
<li><a href="../de417875/index.html">Raus aus dem Kaninchenbau SPA mit modernen Schienen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>