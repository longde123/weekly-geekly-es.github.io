<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèñÔ∏è üö° üîê Nous affichons un cadre photo num√©rique sur Internet ‚èÆÔ∏è üíπ üôÜüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Probablement, en regardant le cadre photo num√©rique, beaucoup se sont demand√© s'il √©tait possible d'afficher leurs propres informations qui varient da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous affichons un cadre photo num√©rique sur Internet</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384177/"><img src="https://habrastorage.org/getpro/geektimes/post_images/6e0/7f6/558/6e07f655878fd2feef35f5e53bb87465.jpg" alt="image" align="right"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Probablement, en regardant le cadre photo num√©rique, beaucoup se sont demand√© s'il √©tait possible d'afficher leurs propres informations qui varient dans le temps? </font><font style="vertical-align: inherit;">Depuis que je suis propri√©taire du cadre photo depuis plusieurs ann√©es, une telle id√©e m'est venue √† l'esprit - le cadre serait parfait pour afficher les pr√©visions m√©t√©orologiques et les informations de la ¬´maison intelligente¬ª. </font><font style="vertical-align: inherit;">Sur la fa√ßon de mettre en ≈ìuvre une telle fonctionnalit√©, sans interf√©rer avec la conception du cadre - lire sous le chat.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©thodes d'impl√©mentation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le moyen le plus simple de contr√¥ler l'image affich√©e sur le cadre photo num√©rique est simplement de changer les images pr√©-pr√©par√©es stock√©es dans sa m√©moire de la mani√®re n√©cessaire. Voici </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un exemple d'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> impl√©mentation de cette m√©thode. De toute √©vidence, cette m√©thode n'est pas tr√®s flexible - vous pouvez afficher un seul nombre variable, et le processus de modification de ce nombre sera assez lent.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, √† condition qu'il soit impossible de d√©monter le cadre, il ne reste plus qu'√† utiliser ses interfaces de m√©moire externe - SPI (pour travailler avec la carte SD) et USB. Il suffit de fabriquer un appareil qui simule un lecteur externe, de le connecter au ch√¢ssis - et il demandera lui-m√™me des images √† un tel appareil. L'utilisation d'un microcontr√¥leur pour √©muler une carte SD est assez difficile, et le facteur de forme de la carte elle-m√™me est assez difficile √† r√©p√©ter. On pourrait utiliser une carte SD WiFi pr√™te √† l'emploi, mais toutes ces cartes que je connais √©taient trop ch√®res (&gt; 40 $, ce qui est proche du co√ªt du cadre lui-m√™me). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Utiliser l'USB pour r√©soudre ce probl√®me est plus appropri√© - ce n'est pas un probl√®me de trouver un microcontr√¥leur productif avec prise en charge USB; la connexion au ch√¢ssis est r√©alis√©e par un connecteur standard. De plus, il y avait d√©j√† une </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">publication</font></a><font style="vertical-align: inherit;"> sur Habr√©</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©di√© √† l'√©mulation d'une cl√© USB √† l'aide du microcontr√¥leur stm32. </font><font style="vertical-align: inherit;">Les commentaires sur cet article ont discut√© de la possibilit√© de transf√©rer des donn√©es √† changement dynamique par cette m√©thode. </font><font style="vertical-align: inherit;">En raison de la mise en cache des donn√©es du syst√®me d'exploitation lors de la lecture d'un fichier, cela n'a aucun sens de changer le contenu des fichiers √©mul√©s - le syst√®me d'exploitation ne les demandera tout simplement pas, car il ne pourra pas d√©couvrir qu'ils ont chang√©. </font><font style="vertical-align: inherit;">Cependant, les cadres photo ne mettent pas les fichiers en cache (ils n'ont tout simplement pas la bonne quantit√© de RAM)! </font><font style="vertical-align: inherit;">Vous pouvez le v√©rifier en connectant n'importe quelle cl√© USB au cadre photo, avec une LED clignotante lors de la lecture des fichiers - elle clignotera constamment lors de la lecture des fichiers. </font><font style="vertical-align: inherit;">Par cons√©quent, j'ai d√©cid√© d'utiliser cette m√©thode particuli√®re.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie logiciel</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'avais d√©j√† la carte de d√©bogage STM32F4DISCOVERY, j'ai donc d√©cid√© de v√©rifier le fonctionnement de la biblioth√®que emfat propos√©e dans l'article ci-dessus. Il n'y a eu aucun probl√®me avec Windows 7, mais le cadre photo n'a pas pu d√©tecter les fichiers sur le disque ¬´virtuel¬ª. Comme il s'est av√©r√© plus tard, la tablette Android n'a pas non plus d√©tect√© le lecteur. Un autre ordinateur Ubuntu a d√©tect√© un p√©riph√©rique USB mais n'a pas pu monter le lecteur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai d√ª m'attaquer plus profond√©ment au probl√®me. En fin de compte, malgr√© le fait que Windows ait d√©tect√© le lecteur et puisse y lire des fichiers, TestDisk n'a pas pu d√©terminer le syst√®me de fichiers sur celui-ci:</font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/f3b/e67/bf7/f3be67bf7a36fcf33544e192e9ac1849.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Petit √† petit, en √©tudiant les r√©sultats des donn√©es brutes fournies par TestDisk, ainsi qu'en fouillant dans le code source de ce programme, j'ai r√©alis√© que l'un des crit√®res selon lesquels TestDisk d√©termine le syst√®me de fichiers utilis√© est la taille du disque. Dans emfat, la taille du disque √©mul√© d√©pend de la quantit√© de donn√©es qu'il contient. Ainsi, s'il y a un ou plusieurs petits fichiers sur le disque, la taille du disque ne d√©passera pas 16 Mo. Dans le m√™me temps, FAT32 impose des restrictions sur la taille minimale du volume - au moins 65527 grappes. √âtant donn√© que dans ¬´emfat¬ª, un cluster occupe 4096 octets, alors pour la conformit√© FAT32, la taille du disque doit √™tre de 65527 * 4096 ~ 268 Mo. En r√©alit√©, ce n'est pas le cas, ce qui provoque des erreurs dans la d√©termination du type de syst√®me de fichiers. Une tentative d'augmenter la capacit√© du disque en augmentant le volume du fichier √©mul√© √† 400 Mo n'a pas fonctionn√© - peut-√™tre que quelque chose d'autre ne convenait pas.J'ai donc d√©cid√© de refaire "emfat" pour √©muler le syst√®me de fichiers FAT16.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fin de compte, cela a r√©ussi et le lecteur a commenc√© √† √™tre correctement d√©tect√© par tous les appareils: </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/2af/9f5/214/2af9f52140870a70b7db4c4c268557ac.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
il convient de noter que FAT16 a √©galement une limitation de la taille du disque - au moins 4087 clusters, soit 16 Mo dans ce cas. Pour remplir cette condition, il est n√©cessaire de cr√©er un fichier virtuel de 20 Mo dans emfat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La v√©rification avec le cadre photo s'est bien pass√©e - le cadre a correctement affich√© l'image de test stock√©e dans la m√©moire flash du contr√¥leur. L'√©tape suivante consiste √† afficher des images personnalis√©es. La fa√ßon la plus simple d'√©muler des fichiers BMP est qu'ils ont une structure assez simple, l'image peut √™tre 256 couleurs, c'est-√†-dire il y a un octet par pixel. Mais seulement dans ce cas, vous avez besoin de 480 Ko de RAM pour stocker une image de taille 800 * 600. Le microcontr√¥leur n'a pas une telle capacit√© de m√©moire, ce qui signifie qu'il ne reste qu'une seule option - pour former l'image √† la vol√©e. Le principe de fonctionnement est le suivant - dans le cas o√π le p√©riph√©rique h√¥te demande des donn√©es √† partir d'un fichier du lecteur, emfat appelle la fonction de rappel correspondant √† ce fichier. Le num√©ro du secteur √† partir duquel les donn√©es sont demand√©es et le pointeur par lequel ces donn√©es doivent √™tre √©crites sont transf√©r√©s vers cette fonction. Conna√Ætre le num√©ro de secteur,vous pouvez d√©terminer quelle partie de l'image est demand√©e et la former.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au cours des exp√©riences, un fait d√©sagr√©able a √©t√© d√©couvert: Windows peut demander des donn√©es √† des secteurs en panne. La raison pour laquelle cela est fait n'est pas claire, mais cela complique la formation de l'image √† la vol√©e, car il est n√©cessaire mais de calculer le num√©ro de secteur - quelle donn√©e est actuellement demand√©e. Un autre probl√®me est que les lignes dans les fichiers BMP vont de bas en haut, ce qui complique encore le calcul de la position. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour afficher le texte, j'ai utilis√© la biblioth√®que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mcufont</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il est pratique car il vous permet d'utiliser des polices compress√©es, ce qui r√©duit consid√©rablement l'utilisation de la m√©moire Flash. Puisque j'ai utilis√© des polices suffisamment grandes, cette fonctionnalit√© est tr√®s importante.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette biblioth√®que √©crit directement l'image g√©n√©r√©e dans la m√©moire, donc pour que la biblioth√®que fonctionne, vous devez allouer un tableau s√©par√© dans la RAM. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai √©galement impl√©ment√© le rendu des images de la m√©moire du contr√¥leur. </font><font style="vertical-align: inherit;">Toutes les images, comme le texte, sont affich√©es en noir et blanc, gr√¢ce √† quoi des informations sur 8 pixels peuvent √™tre stock√©es dans un octet de l'image. </font><font style="vertical-align: inherit;">Afin de convertir des images ordinaires en une vue adapt√©e √† la connexion √† un projet, le programme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LCD Assistant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a √©t√© utilis√© </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, une image de la forme suivante est form√©e sur le lecteur USB connect√©:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gros titre</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/16a/699/689/16a699689e3f49efaf6ce6ba7dd1658d.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s que le programme a √©t√© test√© sur STM32F4DISCOVERY, j'ai fabriqu√© l'appareil lui-m√™me, qui est un microcontr√¥leur avec un module WiFi connect√© √† l'ESP8266. Parmi ceux qui convenaient, je n'avais que le contr√¥leur STM32F107RCT7. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le circuit de l'appareil r√©sultant s'est av√©r√© assez simple: </font><font style="vertical-align: inherit;">
mais en raison des restrictions sur la taille de la carte - 17x36 mm (j'avais pr√©vu de l'installer dans le bo√Ætier fini) et de la grande taille du contr√¥leur, la carte de circuit imprim√© n'√©tait pas la plus facile √† fabriquer - double face, avec des pi√®ces mont√©es des deux c√¥t√©s. En m√™me temps, certaines lignes √©lectriques devaient √™tre r√©alis√©es avec un fil. </font><font style="vertical-align: inherit;">
Vue de la carte r√©sultante (lors du d√©bogage avec le module ESP-01):</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/geektimes/post_images/d32/edb/b4d/d32edbb4d3ec41ea2c94d465f7d0185e.png"></a><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/geektimes/post_images/a05/143/39b/a0514339b6515e7ccf6077d8f6b1ecaf.jpg"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec les tailles de carte indiqu√©es, le module WiFi ESP-03 √©tait le plus adapt√©. Voici √† quoi ressemble la carte r√©sultante avec le module d√©j√† install√©: </font><font style="vertical-align: inherit;">
Et du c√¥t√© du contr√¥leur: </font><font style="vertical-align: inherit;">
Au cours des exp√©riences, il s'est av√©r√© que la sensibilit√© de l'antenne en c√©ramique n'√©tait clairement pas suffisante - le module √† peine connect√© au routeur. Apr√®s avoir connect√© un morceau de fil de 31 mm √† la broche WIFI_ANT, la sensibilit√© s'est nettement am√©lior√©e et est devenue similaire √† la sensibilit√© de l'ESP-01. L'endroit o√π le cadre photo est install√© en permanence est √† quelques m√®tres du routeur, et l'antenne native du module fonctionne √©galement normalement, il n'y a donc pas d'antenne suppl√©mentaire sur la photo.</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/geektimes/post_images/620/187/625/6201876252f2d5cf82453a382a6b2d6f.jpg"></a><br><font style="vertical-align: inherit;"></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/geektimes/post_images/297/73f/e0e/29773fe0ef0eda55b05038b15fe54ca1.jpg"></a><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme l'ESP8266 √©tait assez chaud en fonctionnement constant, j'ai d√©cid√© de l'allumer uniquement lors des demandes d'informations. La gestion de l'alimentation peut √™tre effectu√©e √† l'aide de la sortie du module CH_PD. R√©gler cette broche sur 0 fait passer l'ESP8266 en mode basse consommation. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de rendre plus pratique le test du fonctionnement de l'ESP8266, j'ai √©crit un firmware s√©par√© pour le microcontr√¥leur qui impl√©mente le pont USB-UART. C'est √† travers lui que le module est configur√© pour fonctionner avec le routeur, de sorte qu'apr√®s la mise sous tension, l'ESP8266 s'y connecte automatiquement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le principe de fonctionnement de l'appareil r√©sultant est assez simple - toutes les 10 minutes, le contr√¥leur essaie de demander des donn√©es au serveur, et s'il r√©ussit, il met √† jour les donn√©es m√©t√©orologiques. </font><font style="vertical-align: inherit;">Les donn√©es sur la temp√©rature actuelle et les pr√©visions pour 3 jours √† l'avance sont extraites du site openweathermap.org, les informations sur la temp√©rature ext√©rieure et int√©rieure du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">balcon</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> proviennent du </font><font style="vertical-align: inherit;">serveur majordomo. </font><font style="vertical-align: inherit;">Dans le m√™me temps, le cadre photo demande une image toutes les 6 secondes, tout en affichant les informations actuelles. </font><font style="vertical-align: inherit;">√âtant donn√© que les deux processus peuvent se produire simultan√©ment, le DMA est utilis√© pour recevoir des donn√©es de l'ESP8266. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, l'image suivante s'affiche sur le cadre photo: </font><font style="vertical-align: inherit;">
Code source du projet: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">github.com/iliasam/USB_Photoframe</font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/100/6b7/3fd/1006b73fd6d7be30e91c1412b8035d9d.jpg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr384177/">https://habr.com/ru/post/fr384177/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr384167/index.html">Clavier √©tendu Apple II</a></li>
<li><a href="../fr384169/index.html">Les autorit√©s de New York apprennent aux feux de circulation √† communiquer avec les voitures</a></li>
<li><a href="../fr384171/index.html">Stuart, Mignon Stuart</a></li>
<li><a href="../fr384173/index.html">DrinkMate: un alcootest miniature qui vous permet de prendre les bonnes d√©cisions</a></li>
<li><a href="../fr384175/index.html">Contr√¥leur de contr√¥le d'√©clairage LC-07</a></li>
<li><a href="../fr384179/index.html">Le co√ªt total de tous les composants de l'iPhone 6s est de 234 $</a></li>
<li><a href="../fr384181/index.html">Paniers d'achat abandonn√©s</a></li>
<li><a href="../fr384183/index.html">S√©minaire scientifique "St√©r√©olithographie laser et technologies additives"</a></li>
<li><a href="../fr384185/index.html">L'universit√© d'√âtat de Moscou est proche des cent meilleures universit√©s</a></li>
<li><a href="../fr384191/index.html">Comment se familiariser avec l'AR / VR: ressources utiles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>