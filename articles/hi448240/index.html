<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСЖЁЯП┐ ЁЯОн ЁЯд╖ЁЯП╜ рд░рд╕реНрдЯ рдореЗрдВ рдореИрдЬрд┐рдХ рдбреЗрдЯрд╛ рдЯрд╛рдЗрдк рдЯреНрд░рд╛рдВрд╕рдлреЙрд░реНрдореЗрд╢рди: рдЗрдВрдЯреНрд░рд┐рдВрд╕рд┐рдХрд╛ рдореЗрдо :: рдЯреНрд░рд╛рдВрд╕рдорд┐рдЯ <рдЯреА, рдпреВ> ЁЯС╖ЁЯП╗ ЁЯСЖЁЯП╜ ЁЯУ╕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд░рд┐рдЪрдп 


 рдбреЗрдЯрд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреА рд╡реНрдпрд╛рдкрдХ рд╡рд┐рдЪрд╛рд░рдзрд╛рд░рд╛ рдХреЗ рдмрд╛рд╡рдЬреВрдж, рд░рд╕реНрдЯ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рдореЗрдВ рднреА рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд╡рд┐рдзрд┐рдпрд╛рдВ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдХрднреА-рдХрднреА рд╡реЗ рдЕрдирд╛рд╡рд╢реН...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд░рд╕реНрдЯ рдореЗрдВ рдореИрдЬрд┐рдХ рдбреЗрдЯрд╛ рдЯрд╛рдЗрдк рдЯреНрд░рд╛рдВрд╕рдлреЙрд░реНрдореЗрд╢рди: рдЗрдВрдЯреНрд░рд┐рдВрд╕рд┐рдХрд╛ рдореЗрдо :: рдЯреНрд░рд╛рдВрд╕рдорд┐рдЯ <рдЯреА, рдпреВ></h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448240/"><p><img src="https://habrastorage.org/webt/m-/yv/sg/m-yvsgqiqpdkzs8z020qxwp8qry.jpeg"></p><br><h1 id="vvedenie">  рдкрд░рд┐рдЪрдп </h1><br><p>  рдбреЗрдЯрд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреА рд╡реНрдпрд╛рдкрдХ рд╡рд┐рдЪрд╛рд░рдзрд╛рд░рд╛ рдХреЗ рдмрд╛рд╡рдЬреВрдж, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд░рд╕реНрдЯ</a> рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рдореЗрдВ рднреА рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд╡рд┐рдзрд┐рдпрд╛рдВ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдХрднреА-рдХрднреА рд╡реЗ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдЧрдгрдирд╛рдУрдВ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рдХреЗ рдЧрддрд┐ рдмрдврд╝рд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдХрднреА-рдХрднреА рдпрд╣ рдХреЗрд╡рд▓ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p> рдЙрдирдореЗрдВ рд╕реЗ рдПрдХ рд╣рдорд╛рд░реА рд╡рд░реНрддрдорд╛рди рдорд┐рд╕рд╛рд▓ рд╣реИ - рдЖрдВрддрд░рд┐рдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>mem::transmute&lt;T, U&gt;</code></a> , рдЗрди рджреЛрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬреЛ рдмрд╣реБрдд рд╣реА рдЕрд╕рд╛рдорд╛рдиреНрдп рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдХрд╛рдо рдореЗрдВ рдЖрддреЗ рд╣реИрдВред </p><a name="habracut"></a><br><h1 id="opisanie-funkcionala">  рдХрд╛рд░реНрдпрд╛рддреНрдордХ рд╡рд┐рд╡рд░рдг </h1><br><p>  <code>mem::transmute&lt;T, U&gt;</code> рдХрдВрдкрд╛рдЗрд▓рд░ рджреНрд╡рд╛рд░рд╛ рд╕реАрдзреЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдкрд░рд┐рднрд╛рд╖рд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЗрд╕реЗ рд░реВрд╕реНрдЯ рднрд╛рд╖рд╛ рдХреЗ рд╕рд┐рдВрдЯреИрдХреНрд╕ рджреНрд╡рд╛рд░рд╛ рд╡рд░реНрдгрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рдмрд╕ рдПрдХ рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░ рдХреЗ рдмрд┐рдЯреНрд╕ рдХреЛ рджреВрд╕рд░реЗ рдХреЗ рдмрд┐рдЯреНрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдкреБрди: рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"rust-intrinsic"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">transmute</span></span></span></span>&lt;T, U&gt;(e: T) -&gt; U</code> </pre> <br><p>  рдкреБрди: рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░ <code>T</code> рдХреЗ рдкреБрдирд░реНрд╡реНрдпрд╛рдЦреНрдпрд╛ рд╡рд╛рд▓реЗ рдЪрд░ рдХреЗ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рдХреЛ рд▓реЗрддрд╛ рд╣реИ, рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рдЗрд╕реЗ "рднреВрд▓ рдЬрд╛рддрд╛ рд╣реИ" (рд▓реЗрдХрд┐рди рд╕рдВрдмрдВрдзрд┐рдд рд╡рд┐рдзреНрд╡рдВрд╕рдХ рдХреЛ рдмреБрд▓рд╛рдП рдмрд┐рдирд╛)ред </p><br><p>  рднреМрддрд┐рдХ рд╕реНрдореГрддрд┐ рдореЗрдВ рдХреЛрдИ рднреА рдирдХрд▓ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЖрдВрддрд░рд┐рдХ рд╕рд┐рд░реНрдл рд╕рдВрдХрд▓рдХ рдХреЛ рд╕реНрдкрд╖реНрдЯ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЯрд╛рдЗрдк <code>T</code> рдХреА рд╕рд╛рдордЧреНрд░реА рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдкреНрд░рдХрд╛рд░ <code>U</code> </p><br><p>  рдпрджрд┐ <code>T</code> рдФрд░ <code>U</code> рд▓рдВрдмрд╛рдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╣реИ, рддреЛ рд╕рдВрдХрд▓рди рддреНрд░реБрдЯрд┐ рд╣реЛрдЧреАред  рди рддреЛ рддрд░реНрдХ рдФрд░ рди рд╣реА рд░рд┐рдЯрд░реНрди рдорд╛рди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдорд╛рдиреНрдп рдорд╛рди</a> рд╣реЛ рд╕рдХрддреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИрдВ</a> ред </p><br><h1 id="neopredelyonnoe-povedenie">  рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ </h1><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдкрдиреЗ рджреЗрдЦрд╛ рд╣реЛрдЧрд╛, рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рд╣реИ, рдЬреЛ рддрд╛рд░реНрдХрд┐рдХ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдХрдИ рдХрд╛рд░рдХреЛрдВ рдХреЗ рдХрд╛рд░рдг <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░</a> рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддрд╛ рд╣реИ: </p><br><ul><li>  рдЕрдорд╛рдиреНрдп рд╕реНрдерд┐рддрд┐ рдХреЗ рд╕рд╛рде рдХрд┐рд╕реА рднреА рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдирд╛; </li><li>  рдЕрдорд╛рдиреНрдп рдорд╛рди рдХреЗ рд╕рд╛рде рдПрдХ рдЖрджрд┐рдо рдмрдирд╛рдирд╛; </li><li>  рдкреНрд░рдХрд╛рд░ рдХреЗ рдЕрдиреБрдорд╛рди рдХреЛ рд╕рдВрддреБрд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИ, рддреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рдЖрдЙрдЯрдкреБрдЯ рдкреНрд░рдХрд╛рд░ рд╕рдВрднрд╡ рд╣реИ; </li><li>  <code>non-repr(C)</code> рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рдмреАрдЪ рдмрд╛рддрдЪреАрдд; </li><li>  рдПрдХ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЬреАрд╡рди рд╕рдордп рдХреЗ рдмрд┐рдирд╛ рдирд┐рдпрдорд┐рдд рд▓рд┐рдВрдХ рд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдВрдмрдВрдзрд┐рдд рдЕрд╕рдВрдмрдВрдзрд┐рдд рдЬреАрд╡рди рд╕рдордп</a> рдореЗрдВ рдкрд░рд┐рдгрд╛рдо; </li><li>  рдПрдХ рдЕрдкрд░рд┐рд╡рд░реНрддрдиреАрдп рд▓рд┐рдВрдХ рдХреЛ рдПрдХ рдЙрддреНрдкрд░рд┐рд╡рд░реНрддреА рдПрдХ рдореЗрдВ рдмрджрд▓рдирд╛ред </li></ul><br><h1 id="otkrytye-vozmozhnosti">  рдЦреБрд▓реЗ рдЕрд╡рд╕рд░ </h1><br><p>  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рддрдХрдиреАрдХ рдХреБрдЫ рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдЦреБрдж рдХреЛ рд╕рд╣реА рдард╣рд░рд╛рддреА рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдлреНрд▓реЛрдЯрд┐рдВрдЧ-рдкреЙрдЗрдВрдЯ рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдПрдХ рд╕рд╛ рдкреИрдЯрд░реНрди рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ (рдпрд╛, рдЖрдорддреМрд░ рдкрд░, рдЯрд╛рдЗрдкрд┐рдВрдЧ рдкрд╛рдЗрдВрдЯрд┐рдВрдЧ, рдЬрд╣рд╛рдВ <code>T</code> рдФрд░ <code>U</code> рдХрдЪреНрдЪреЗ рдкреЙрдЗрдВрдЯрд░реНрд╕ рдирд╣реАрдВ рд╣реИрдВ): </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bitpattern = <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> { std::mem::transmute::&lt;<span class="hljs-built_in"><span class="hljs-built_in">f32</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">u32</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">1.0</span></span>) }; <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(bitpattern, <span class="hljs-number"><span class="hljs-number">0x3F800000</span></span>);</code> </pre> <br><p>  рдПрдХ рд░реЙ рдкреЙрдЗрдВрдЯрд░ рдХреЛ рдкреЙрдЗрдВрдЯрд░ рд╕реЗ рдПрдХ рдлрдВрдХреНрд╢рди рдореЗрдВ рдХрдиреНрд╡рд░реНрдЯ рдХрд░реЗрдВред  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдпрд╣ рддрдХрдиреАрдХ рдЙрди рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рдХреЗ рдмреАрдЪ рдкреЛрд░реНрдЯреЗрдмрд▓ рдирд╣реАрдВ рд╣реИ рдЬрд╣рд╛рдВ рдлрд╝рдВрдХреНрд╢рди рдкреЙрдЗрдВрдЯрд░реНрд╕ рдФрд░ рдирд┐рдпрдорд┐рдд рдкреЙрдЗрдВрдЯрд░реНрд╕ рдЖрдХрд╛рд░ рдореЗрдВ рднрд┐рдиреНрди рд╣реЛрддреЗ рд╣реИрдВред </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span></span>() -&gt; <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span> { <span class="hljs-number"><span class="hljs-number">0</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> pointer = foo <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> (); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> function = <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> { std::mem::transmute::&lt;*<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> (), <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span></span>() -&gt; <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>&gt;(pointer) }; <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(function(), <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br><p>  рдЬреАрд╡рди рд╕рдордп рд╡рд┐рд╕реНрддрд╛рд░ рдпрд╛ рдЕрдкрд░рд┐рд╡рд░реНрддрдиреАрдп рдЬреАрд╡рди рд╕рдордп рдХреЛ рдЫреЛрдЯрд╛ рдХрд░рдирд╛ред  рдпрд╣ рдПрдХ рдмрд╣реБрдд рд╣реА рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдФрд░ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдЙрдиреНрдирдд рдЬрдВрдЧ рд╕рд┐рдВрдЯреИрдХреНрд╕ рд╣реИ: </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;(&amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extend_lifetime</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span>&gt;(r: R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span>&gt;) -&gt; R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span>&gt; { std::mem::transmute::&lt;R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span>&gt;, R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span>&gt;&gt;(r) } <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shorten_invariant_lifetime</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">'c</span></span>&gt;(r: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span>&gt;) -&gt; &amp;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'c</span></span>&gt; { std::mem::transmute::&lt;&amp;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span>&gt;, &amp;<span class="hljs-symbol"><span class="hljs-symbol">'b</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> R&lt;<span class="hljs-symbol"><span class="hljs-symbol">'c</span></span>&gt;&gt;(r) }</code> </pre> <br><h1 id="schadyaschie-alternativy">  рд╡рд┐рдХрд▓реНрдк рдмрдЦреНрд╢рд╛ </h1><br><p>  рдореВрд▓ рд░реВрдк рд╕реЗ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code> as</code></a> рд╕рд╣рдЬрддрд╛ рд╕реЗ <code>mem::transmute&lt;T, U&gt;</code> рдХрд╛рд░рдг рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рд░реЛрдХ рд╕рдХрддрд╛ рд╣реИ <code>mem::transmute&lt;T, U&gt;</code> : </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> ptr = &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> val_transmuted = <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> { std::mem::transmute::&lt;&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-built_in"><span class="hljs-built_in">u32</span></span>&gt;(ptr) }; <span class="hljs-comment"><span class="hljs-comment">//   `as`  .  ,  //   `as    let val_casts = unsafe { &amp;mut *(ptr as *mut i32 as *mut u32) };</span></span></code> </pre> <br><p>  рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рддрд░реАрдХреЛрдВ рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, <code>mem::transmute&lt;T, U&gt;</code> рдХреЛ рдПрдХ рд╕рдорд╛рди рдХреЙрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд╣реА рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ <code>mem::transmute&lt;T, U&gt;</code> : </p><br><pre> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">//        //    let slice = unsafe { std::mem::transmute::&lt;&amp;str, &amp;[u8]&gt;("Rust") }; assert_eq!(slice, &amp;[82, 117, 115, 116]); //      `as_bytes()`,  //     let slice = "Rust".as_bytes(); assert_eq!(slice, &amp;[82, 117, 115, 116]); //      //   assert_eq!(b"Rust", &amp;[82, 117, 115, 116]);</span></span></code> </pre> <br><p>  рдФрд░ рдЗрд╕ рд╕реНрд░реЛрдд рдХреЛрдб рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>slice::split_at_mut()</code></a> рддреАрди рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрдиреЛрдВ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>slice::split_at_mut()</code></a> рдлрд╝рдВрдХреНрд╢рди: <code>mem::transmute&lt;T, U&gt;</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ <code>mem::transmute&lt;T, U&gt;</code> , рдСрдкрд░реЗрдЯрд░ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>slice::from_raw_parts()</code></a> рдлрд╝рдВрдХреНрд╢рдиред </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> std::{slice, mem}; <span class="hljs-comment"><span class="hljs-comment">//     ,    //     fn split_at_mut_transmute&lt;T&gt;(slice: &amp;mut [T], mid: usize) -&gt; (&amp;mut [T], &amp;mut [T]) { let len = slice.len(); assert!(mid &lt;= len); unsafe { let slice2 = mem::transmute::&lt;&amp;mut [T], &amp;mut [T]&gt;(slice); // -, mem::transmute&lt;T, U&gt;   , //  ,    -    T  U. // // -,      ,  //        (&amp;mut slice[0..mid], &amp;mut slice2[mid..len]) } } //       ; `&amp;mut *` //    `&amp;mut T`  `&amp;mut T`  `*mut T`. fn split_at_mut_casts&lt;T&gt;(slice: &amp;mut [T], mid: usize) -&gt; (&amp;mut [T], &amp;mut [T]) { let len = slice.len(); assert!(mid &lt;= len); unsafe { let slice2 = &amp;mut *(slice as *mut [T]); //        ,  //        (&amp;mut slice[0..mid], &amp;mut slice2[mid..len]) } } //    ,    //  fn split_at_stdlib&lt;T&gt;(slice: &amp;mut [T], mid: usize) -&gt; (&amp;mut [T], &amp;mut [T]) { let len = slice.len(); assert!(mid &lt;= len); unsafe { let ptr = slice.as_mut_ptr(); //      ,  //    : `slice`, r-value ret.0  r-value ret.1. // // `slice`     `let ptr = ...`,   // ,    "",  ,  //      . (slice::from_raw_parts_mut(ptr, mid), slice::from_raw_parts_mut(ptr.add(mid), len - mid)) } }</span></span></code> </pre> <br><p>  рджреВрд╕рд░реЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, <code>mem::transmute&lt;T, U&gt;</code> рдХрд╛ рдЙрдкрдпреЛрдЧ <code>mem::transmute&lt;T, U&gt;</code> рдХреЗрд╡рд▓ рддрдм рд╣реА рдЙрдЪрд┐рдд рд╣реИ рдЬрдм рдХреБрдЫ рдФрд░ рдорджрдж рдирд╣реАрдВ рдХрд░рддрд╛ (рдХреБрдЫ рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рдкреНрд░рддрд┐рдмрд┐рдВрдм рдХреЗ рд╕рд╛рде рд╕рд╛рджреГрд╢реНрдп рдпрд╣рд╛рдБ рдЙрдкрдпреБрдХреНрдд рд╣реИ)ред </p><br><h1 id="variaciya-memtransmute_copyt-u">  рднрд┐рдиреНрдирддрд╛ рдореЗрдо :: рдЯреНрд░рд╛рдВрд╕рдорд┐рдЯ_рдХреЛрдкреА &lt;рдЯреА, рдпреВ&gt; </h1><br><p>  рд╕рд╛рдорд╛рдиреНрдп рдЖрдВрддрд░рд┐рдХ <code>mem::transmute&lt;T, U&gt;</code> рдЙрди рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдЬрд╣рд╛рдВ рдЯрд╛рдЗрдк <code>T</code> рдХреЗ рдПрдХ рдЪрд░ рдХреЗ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рдЕрд╕рдВрднрд╡ рд╣реИред  рдЗрд╕рдХреА рд╡рд┐рд╡рд┐рдзрддрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>mem::transmute_copy&lt;T, U&gt;</code></a> рдмрдЪрд╛рд╡ рдХреЗ рд▓рд┐рдП рдЖрддрд╛ рд╣реИ: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">transmute_copy</span></span></span></span>&lt;T, U&gt;(src: &amp;T) -&gt; U</code> </pre> <br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдкрдиреЗ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛рдпрд╛ рд╣реИ, рдПрдХ рддрд░реНрдХ рдХреЛ рдЖрдЧреЗ рдмрдврд╝рд╛рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдпрд╣ рдЗрд╕рдХреА рдкреВрд░реА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдкрд░рд┐рдгрд╛рдо рдХреЗ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рднрд┐рдиреНрдирддрд╛ рдЕрдзрд┐рдХ рдзреАрдореА рдЧрддрд┐ рд╕реЗ рдХрд╛рдо рдХрд░реЗрдЧреА, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рдХрдо рдмрд╛рд░ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред </p><br><p>  <code>mem::transmute&lt;T, U&gt;</code> рд╡рд┐рдкрд░реАрдд <code>mem::transmute&lt;T, U&gt;</code> , рд╡рд░реНрддрдорд╛рди рдПрдирд╛рд▓реЙрдЧ рдПрдХ рд╕рдВрдХрд▓рдХ рддреНрд░реБрдЯрд┐ рдЙрддреНрдкрдиреНрди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рдпрджрд┐ рдкреНрд░рдХрд╛рд░ <code>T</code> рдФрд░ <code>U</code> рдмрд╛рдЗрдЯреНрд╕ рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд▓рдВрдмрд╛рдИ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рджреГрдврд╝рддрд╛ рд╕реЗ рдХреЗрд╡рд▓ рддрднреА рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИ рдЬрдм рдЙрдирдХрд╛ рдЖрдХрд╛рд░ рд╕рдорд╛рди рд╣реЛред </p><br><p>  рдпрд╣ рднреА рдпрд╛рдж рд░рдЦрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдпрджрд┐ <code>U</code> рдПрдХ рдЖрдХрд╛рд░ <code>T</code> рдЖрдХрд╛рд░ рд╕реЗ рдЕрдзрд┐рдХ рд╣реИ, рддреЛ рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдЕрдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред </p><br><h1 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h1><br><p>  рдПрдХ рдмрд╛рд░ рдлрд┐рд░, рдореИрдВ рдзреНрдпрд╛рди рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рд╡рд┐рдЪрд╛рд░рд╛рдзреАрди рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреЗрд╡рд▓ рдЙрди рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬрдм рдЖрдк рдЙрдирдХреЗ рдмрд┐рдирд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред  рдЬреИрд╕рд╛ рдХрд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдиреЛрдорд┐рдХреЛрди</a> рдХрд╣рддреЗ рд╣реИрдВ, рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╕рдмрд╕реЗ рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдЪреАрдЬ рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк рд░рд╕реНрдЯ рдореЗрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдЗрд╕ рд▓реЗрдЦ рдХреЗ рд╕рднреА рдЙрджрд╛рд╣рд░рдг <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>  mem::transmute&lt;T, U&gt;</code></a> , рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реЗ</a> рд╕рд╛рдордЧреНрд░реА рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдореБрдЭреЗ рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рд▓реЗрдЦ рдЖрдкрдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рдерд╛ред <br></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi448240/">https://habr.com/ru/post/hi448240/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi448228/index.html">рдореЙрдбрд▓рд┐рдВрдЧ рдХреЗ рдкреНрд░рдХрд╛рд░ред рд╕реНрдХрд▓реНрдкрд┐рдВрдЧ, рд░реЗрдЯреЛрдкреЛрд▓реЙрдЬреА рдФрд░ рд╕реНрд╡реАрдк рдХреА рдореВрд▓ рдмрд╛рддреЗрдВ</a></li>
<li><a href="../hi448230/index.html">ClearView рдХреЗ рд╕рд╛рде рд╡реНрдпрд╡рд╕рд╛рдп рдирд┐рд░рдВрддрд░рддрд╛ рдХрд╛ рдкреНрд░рдмрдВрдзрди</a></li>
<li><a href="../hi448234/index.html">рдПрдЖрдИ рдФрд░ рдПрдордУ: рдХреБрдЫ рд░реБрдЭрд╛рди рдФрд░ рд░реБрдЭрд╛рди</a></li>
<li><a href="../hi448236/index.html">рдлреЗрд╕рдмреБрдХ рдХреА рдЯреИрд░рд┐рдл рдЯреЗрдХреНрдиреЛрд▓реЙрдЬреА рдЯреЗрд╕реНрдЯрд┐рдВрдЧ рд╕реЗ рд▓реЗрдХрд░ рдХрдорд░реНрд╢рд┐рдпрд▓ рдпреВрдЬ рддрдХ рдореЗрдВ рдмрджрд▓ рдЬрд╛рддреА рд╣реИ</a></li>
<li><a href="../hi448238/index.html">рдЯреНрд░рд╛рдВрдЬрд┐рд╕реНрдЯрд░ рдХрд╣рд╛рдиреА: рдЕрдВрдзреЗрд░реЗ рдореЗрдВ рд╕реНрдкрд░реНрд╢ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡реИрдбрд┐рдВрдЧ</a></li>
<li><a href="../hi448242/index.html">рдХреЙрд╕рдореЙрд╕ рдФрд░ рдЬреАрди</a></li>
<li><a href="../hi448244/index.html">рдбреАрдПрдмреА + рдбрд┐рдЬрд┐рдЯрд▓ рд░реЗрдбрд┐рдпреЛ - рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рдХреНрдпрд╛ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ?</a></li>
<li><a href="../hi448248/index.html">рдПрдХ рд╕реБрдкрд░ рдЧреЗрдо рдмреЙрдп рдореЗрдВ рдПрдХ рд╕рдВрдЪрд╛рд░ рдХреЗрдмрд▓ рдХрдиреЗрдХреНрдЯрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛</a></li>
<li><a href="../hi448250/index.html">рдЙрддреНрдкрд╛рдж рд╡рд┐рдХрд╛рд╕ рджреГрд╢реНрдп рд╕рд╣рд╛рдпрддрд╛: рдПрдХ рд╡рд┐рдЪрд╛рд░ рдмрдирд╛рдирд╛</a></li>
<li><a href="../hi448254/index.html">IPhone рдкрд╣рд▓рд╛ Apple рдлреЛрди рдирд╣реАрдВ рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>