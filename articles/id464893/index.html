<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⏯️ 👨‍🔧 🏓 Kami mencari bug dalam kode PHP tanpa penganalisa statis 👂🏼 👨🏼‍💻 🏗️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bagian favorit saya dalam analisis kode statis adalah mengajukan hipotesis tentang potensi kesalahan dalam kode dan kemudian memeriksanya. 


 Contoh ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kami mencari bug dalam kode PHP tanpa penganalisa statis</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464893/"><p>  Bagian favorit saya dalam analisis kode statis adalah mengajukan hipotesis tentang potensi kesalahan dalam kode dan kemudian memeriksanya. </p><br><p>  Contoh hipotesis: </p><br><pre><code class="plaintext hljs"> strpos      .</code> </pre> <br><p>  Tetapi ada kemungkinan bahwa bahkan pada beberapa juta baris kode diagnosis seperti itu tidak akan "menembak", jadi Anda tidak ingin menghabiskan banyak waktu pada hipotesis yang tidak berhasil. </p><br><p>  Hari ini saya akan menunjukkan cara melakukan analisis statis paling sederhana menggunakan utilitas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">phpgrep</a> tanpa menulis kode. </p><br><div class="scrollable-table"><table><tbody><tr><td><img src="https://habrastorage.org/webt/ct/6n/nt/ct6nntwmvdgniqe2e625qogapj0.png"></td><td><hr><p>  Di bawah potongan: </p><br><ul><li>  Cari dan analisis bug dalam proyek sumber terbuka. </li><li>  Mulai cepat dengan phpgrep. </li><li>  Prinsip pencarian sintaksis. </li></ul><br><br><hr></td></tr></tbody></table></div><a name="habracut"></a><br><h1 id="predposylki">  Latar belakang </h1><br><p>  Selama beberapa bulan sekarang, saya telah mendukung PHP NoVerify linter (baca di artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NoVerify: Linter for PHP dari Tim VKontakte</a> ). </p><br><p>  Dari waktu ke waktu, ide untuk diagnostik baru muncul di tim.  Mungkin ada banyak ide, tetapi saya ingin memeriksa semuanya, terutama jika pemeriksaan yang diusulkan ditujukan untuk mengidentifikasi cacat kritis. </p><br><p>  Sebelumnya, saya aktif mengembangkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">go-kritik</a> dan situasinya mirip, dengan satu-satunya perbedaan adalah bahwa kode sumber dianalisis dalam Go, dan bukan dalam PHP.  Ketika saya mengetahui tentang utilitas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gogrep</a> , dunia saya terbalik.  Seperti namanya, utilitas ini memiliki kesamaan dengan grep, hanya pencarian yang dilakukan bukan dengan ekspresi reguler, tetapi oleh pola sintaks (saya akan menjelaskan nanti apa artinya). </p><br><p>  Saya tidak ingin hidup tanpa grep yang pintar, jadi suatu malam saya memutuskan untuk duduk dan menulis <code>phpgrep</code> . </p><br><h1 id="analiziruemyy-korpus">  Kasus yang dianalisis </h1><br><p>  Agar menyenangkan, kami segera membenamkan diri dalam aplikasi.  Kami akan menganalisis satu set kecil proyek PHP yang cukup terkenal dan besar yang tersedia di GitHub. </p><br><p>  Kit kami mencakup proyek-proyek berikut: </p><br><div class="scrollable-table"><table><tbody><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Wordpress</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Wikia</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Drupal</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">yii2</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CodeIgniter</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">komposer</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Phalcon</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Joomla!</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Laravel</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">moodle</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">inti ownCloud</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Phabrator</a> </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Phpunit</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">symfony</a> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">woocommerce</a> </td></tr></tbody></table></div><br><p>  Bagi orang-orang yang merencanakan apa yang kita rencanakan, ini adalah set yang sangat membangkitkan selera. </p><br><p>  Jadi ayo pergi! </p><br><h1 id="ispolzovanie-prisvaivaniya-v-kachestve-vyrazheniya">  Menggunakan Penugasan sebagai Ekspresi </h1><br><p>  Jika penugasan digunakan sebagai ekspresi, apalagi: </p><br><ul><li>  konteks mengharapkan hasil operasi logis (kondisi logis) dan </li><li>  sisi kanan ekspresi tidak memiliki efek samping dan konstan, </li></ul><br><p>  kemungkinan besar kesalahan dalam kode. </p><br><p>  Untuk memulainya, mari kita ambil konstruksi berikut untuk "konteks logis": </p><br><ol><li>  Ekspresi di dalam " <code>if ($cond)</code> ". </li><li>  Kondisi operator ternary adalah: " <code>$cond ? $x : $y</code> ". </li><li>  Kondisi kelanjutan untuk loop " <code>while ($cond)</code> " dan " <code>for ($init; $cond; $post)</code> ". </li></ol><br><p>  Di sisi kanan penugasan, kami mengharapkan konstanta atau literal. </p><br><div class="spoiler">  <b class="spoiler_title">Mengapa kita membutuhkan batasan seperti itu?</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td>  Kedua pembatasan diperlukan untuk mengurangi jumlah positif palsu. <br><br>  Jika kita mencari penugasan secara eksklusif dalam kondisi, maka probabilitas bahwa ada kesalahan ketik dan bukannya "=" tersirat oleh "==" lebih tinggi. <br><br>  Tetapi bahkan dalam kasus ini, situasi kontroversial tetap di mana tugas masuk akal karena efek samping yang mungkin terjadi dalam suatu fungsi.  Agar tidak berurusan dengan mereka, kami hanya akan memilih nilai yang diberikan paling sederhana. <br></td></tr></tbody></table></div></div></div><br><p>  Mari kita mulai dengan (1): </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#      # |      (  ) # | | # | | phpgrep . 'if ($_ = []) $_' # 1 # | # | #    #  3    . phpgrep . 'if ($_ = ${"const"}) $_' # 2 phpgrep . 'if ($_ = ${"str"}) $_' # 3 phpgrep . 'if ($_ = ${"num"}) $_' # 4</span></span></code> </pre> <br><p>  Di sini kita melihat 4 pola, satu-satunya perbedaan di antaranya adalah ekspresi yang ditetapkan (RHS).  Mari kita mulai dengan yang pertama. </p><br><p>  Template " <code>if ($_ = []) $_</code> " menangkap <code>if</code> , yang memiliki larik kosong yang ditetapkan untuk ekspresi apa pun.  <code>$_</code> cocok dengan ekspresi atau pernyataan apa pun. </p><br><pre> <code class="plaintext hljs">    (RHS) | if ($_ = []) $_ | | |   if',   ,  {}    LHS  </code> </pre> <br><p>  Contoh berikut menggunakan grup <strong>const</strong> , <strong>str,</strong> dan <strong>num yang</strong> lebih kompleks.  Tidak seperti <code>$_</code> mereka menggambarkan batasan pada operasi yang kompatibel. </p><br><ul><li>  <code>const</code> adalah konstanta bernama atau konstanta kelas. </li><li>  <code>str</code> adalah string literal dari jenis apa pun. </li><li>  <code>num</code> adalah literal numerik dari jenis apa pun. </li></ul><br><p>  Pola-pola ini cukup untuk mencapai beberapa operasi pada kasus ini. </p><br><p>  ⎆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">moodle / blok / rss_client / viewfeed.php # L37</a> : </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($courseid = SITEID) { $courseid = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  Pemicu kedua dalam moodle adalah ketergantungan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ADOdb</a> .  Di perpustakaan hulu, masalahnya masih ada. </p><br><p>  ⎆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ADOdb / driver / adodb-odbtp.inc.php # L741</a> : </p><br><p><img src="https://habrastorage.org/webt/uo/mv/wj/uomvwjrpztuhmrkm4lolol9sbvg.png"></p><br><p>  Ada banyak fragmen ini, tetapi bagi kami hanya baris pertama yang relevan.  Alih-alih membandingkan bidang <code>databaseType</code> , kami melakukan tugas dan selalu masuk ke dalam kondisi. </p><br><p>  Tempat lain yang menarik di mana kami ingin melakukan tindakan hanya untuk catatan "yang benar", tetapi sebaliknya, selalu jalankan dan, lebih lagi, tandai semua catatan sebagai benar! </p><br><p>  ⎆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">moodle / pertanyaan / format / blackboard_six / formatqti.php # L598</a> : </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// For BB Fill in the Blank, only interested in correct answers. if ($response-&gt;feedback = 'correct') { // ... }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Daftar templat yang diperluas untuk pemeriksaan ini</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td><pre>  phpgrep.  'untuk ($ _; $ _ = []; $ _) $ _'
 phpgrep.  'untuk ($ _; $ _ = $ {"const"}; $ _) $ _'
 phpgrep.  'untuk ($ _; $ _ = $ {"num"}; $ _) $ _'
 phpgrep.  'untuk ($ _; $ _ = $ {"str"}; $ _) $ _'
 phpgrep.  'while ($ _ = []) $ _'
 phpgrep.  'while ($ _ = $ {"const"}) $ _'
 phpgrep.  'while ($ _ = $ {"num"}) $ _'
 phpgrep.  'while ($ _ = $ {"str"}) $ _'
 phpgrep.  'if ($ _ = []) $ _'
 phpgrep.  'if ($ _ = $ {"const"}) $ _'
 phpgrep.  'if ($ _ = $ {"str"}) $ _'
 phpgrep.  'if ($ _ = $ {"num"}) $ _'
 phpgrep.  '$ _ = []?  $ _: $ _ '
 phpgrep.  '$ _ = $ {"const"}?  $ _: $ _ '
 phpgrep.  '$ _ = $ {"str"}?  $ _: $ _ '
 phpgrep.  '$ _ = $ {"num"}?  $ _: $ _ '
 phpgrep.  '($ _ = []) &amp;&amp; $ _'
 phpgrep.  '($ _ = $ {"const"}) &amp;&amp; $ _'
 phpgrep.  '($ _ = $ {"str"}) &amp;&amp; $ _'
 phpgrep.  '($ _ = $ {"num"}) &amp;&amp; $ _'
 phpgrep.  '$ _ &amp;&amp; $ _ = []'
 phpgrep.  '$ _ &amp;&amp; $ _ = $ {"const"}'
 phpgrep.  '$ _ &amp;&amp; $ _ = $ {"str"}'
 phpgrep.  '$ _ &amp;&amp; $ _ = $ {"num"}'
 phpgrep.  '($ _ = []) ||  $ _ '
 phpgrep.  '($ _ = $ {"const"}) ||  $ _ '
 phpgrep.  '($ _ = $ {"str"}) ||  $ _ '
 phpgrep.  '($ _ = $ {"num"}) ||  $ _ '
 phpgrep.  '$ _ ||  $ _ = [] '
 phpgrep.  '$ _ ||  $ _ = $ {"const"} '
 phpgrep.  '$ _ ||  $ _ = $ {"str"} '
 phpgrep.  '$ _ ||  $ _ = $ {"num"} ' </pre></td></tr></tbody></table></div></div></div><br><p>  Mari kita ulangi apa yang kita pelajari: </p><br><ul><li>  Template terlihat seperti kode php yang mereka temukan. </li><li>  <code>$_</code> berarti apa saja.  Anda dapat membandingkan dengan <code>.</code>  dalam ekspresi reguler. </li><li>  <code>${"&lt;class&gt;"}</code> bekerja seperti <code>$_</code> dengan batasan tipe elemen AST. </li></ul><br><p>  Perlu juga ditekankan bahwa segala sesuatu kecuali variabel dipetakan secara harfiah.  Ini berarti bahwa pola " <code>array(1, 2 + 3)</code> " akan dipenuhi hanya oleh kode yang identik dalam struktur sintaksis (spasi tidak mempengaruhi).  Di sisi lain, pola " <code>array($_, $_)</code> " memenuhi literal array dua elemen. </p><br><h1 id="sravnenie-vyrazheniya-s-samim-soboy">  Membandingkan ekspresi dengan dirimu sendiri </h1><br><p>  Kebutuhan untuk membandingkan sesuatu dengan diri sendiri sangat jarang.  Ini mungkin cek <code>NaN</code> , tapi setidaknya separuh waktu itu merupakan kesalahan salin / tempel. </p><br><p>  ⎆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Wikia / aplikasi / ekstensi / SemanticDrilldown / termasuk / SD_FilterValue.php # L103</a> : </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( $fv1-&gt;month == $fv1-&gt;month ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br><p>  Ke kanan harus " <code>$fv2-&gt;month</code> ". </p><br><p>  Untuk mengekspresikan bagian duplikat dalam templat, kami menggunakan variabel dengan nama selain " <code>_</code> ".  Mekanisme pengulangan dalam suatu pola mirip dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">backlink</a> dalam ekspresi reguler. </p><br><p>  Pola " <code>$x == $x</code> " akan sesuai dengan yang ditemukan oleh contoh di atas.  Alih-alih " <code>x</code> ", nama apa pun dapat digunakan.  Yang penting nama-nama itu identik.  Variabel templat yang memiliki nama yang dibedakan tidak harus memiliki konten yang sama saat mengambil. </p><br><p>  Contoh berikut ditemukan menggunakan " <code>$x &lt;= $x</code> ". </p><br><p>  ⎆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Drupal / inti / modul / tampilan / tes / src / Unit / ViewsDataTest.php # L166</a> : </p><br><pre> <code class="php hljs">$prev = $base_tables[$base_tables_keys[$i - <span class="hljs-number"><span class="hljs-number">1</span></span>]]; $current = $base_tables[$base_tables_keys[$i]]; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertTrue( $prev[<span class="hljs-string"><span class="hljs-string">'weight'</span></span>] &lt;= $current[<span class="hljs-string"><span class="hljs-string">'weight'</span></span>] &amp;&amp; $prev[<span class="hljs-string"><span class="hljs-string">'title'</span></span>] &lt;= $prev[<span class="hljs-string"><span class="hljs-string">'title'</span></span>], <span class="hljs-comment"><span class="hljs-comment">// &lt;--------------  'The tables are sorted as expected.');</span></span></code> </pre> <br><h1 id="dubliruyuschiesya-podvyrazheniya">  Subekspresi duplikat </h1><br><p>  Sekarang kita tahu tentang kemungkinan subekspresi berulang, kita dapat menyusun banyak pola yang menarik. </p><br><p>  Salah satu favorit saya adalah " <code>$_ ? $x : $x</code> ". <br>  Ini adalah operator ternary dengan cabang benar / salah identik. </p><br><p>  ⎆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">joomla-cms / libraries / src / User / UserHelper.php # L522</a> : </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{SHA256}'</span></span> . $encrypted : <span class="hljs-string"><span class="hljs-string">'{SHA256}'</span></span> . $encrypted;</code> </pre> <br><p>  Kedua cabang digandakan, yang menunjukkan potensi masalah dalam kode.  Jika kita melihat kode di sekitar, kita bisa mengerti apa yang seharusnya.  Demi keterbacaan, saya memotong bagian dari kode dan mengurangi nama variabel <code>$encrypted</code> menjadi <code>$enc</code> . </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'crypt-blowfish'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt ? <span class="hljs-string"><span class="hljs-string">'{crypt}'</span></span> : <span class="hljs-string"><span class="hljs-string">''</span></span>) . crypt($plaintext, $salt); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'md5-base64'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{MD5}'</span></span> . $enc : $enc; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'ssha'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{SSHA}'</span></span> . $enc : $enc; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'smd5'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{SMD5}'</span></span> . $enc : $enc; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'sha256'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{SHA256}'</span></span> . $enc : <span class="hljs-string"><span class="hljs-string">'{SHA256}'</span></span> . $enc; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ($show_encrypt) ? <span class="hljs-string"><span class="hljs-string">'{MD5}'</span></span> . $enc : $enc;</code> </pre> <br><p>  Saya berani bertaruh bahwa kode membutuhkan tambalan berikut: </p><br><pre> <code class="diff hljs"><span class="hljs-deletion"><span class="hljs-deletion">- ($show_encrypt) ? '{SHA256}' . $encrypted : '{SHA256}' . $encrypted; + ($show_encrypt) ? '{SHA256}' . $encrypted : $encrypted;</span></span></code> </pre> <br><h1 id="opasnye-prioritety-operaciy-v-php">  Prioritas Operasi Berbahaya dalam PHP </h1><br><p>  Tindakan pencegahan yang baik dalam PHP adalah penggunaan tanda kurung pengelompokan di mana pun penting untuk memiliki urutan perhitungan yang benar. </p><br><p>  Dalam banyak bahasa pemrograman, ungkapan " <code>x &amp; mask != 0</code> " memiliki makna intuitif.  Jika <code>mask</code> menggambarkan sedikit, maka kode ini memeriksa bahwa pada <code>x</code> bit ini tidak sama dengan nol.  Sayangnya, untuk PHP ungkapan ini akan dihitung seperti ini: " <code>x &amp; (mask != 0)</code> ", yang hampir selalu bukan yang Anda butuhkan. </p><br><p>  WordPress, Joomla dan moodle menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SimplePie</a> . </p><br><p>  ⎆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SimplePie / library / SimplePie / Locator.php # L254</a> <br>  ⎆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SimplePie / library / SimplePie / Locator.php # L384</a> <br>  ⎆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SimplePie / library / SimplePie / Locator.php # L412</a> <br>  ⎆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SimplePie / library / SimplePie / Sanitize.php # L349</a> <br>  ⎆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SimplePie / library / SimplePie.php # L1634</a> </p><br><pre> <code class="php hljs">$feed-&gt;method &amp; SIMPLEPIE_FILE_SOURCE_REMOTE === <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><p>  <code>SIMPLEPIE_FILE_SOURCE_REMOTE</code> didefinisikan sebagai <code>1</code> , sehingga ekspresi akan sama dengan: </p><br><pre> <code class="plaintext hljs">$feed-&gt;method &amp; (1 === 0) // =&gt; $feed-&gt;method &amp; false</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Contoh Template Pencarian</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td><pre>  phpgrep.  '$ x &amp; $ mask == $ y'
 phpgrep.  '$ x &amp; $ mask === $ y'
 phpgrep.  '$ x &amp; $ mask! == $ y'
 phpgrep.  '$ x &amp; $ mask! = $ y'
 phpgrep.  '$ x |  $ mask == $ y '
 phpgrep.  '$ x |  $ mask === $ y '
 phpgrep.  '$ x |  $ mask! == $ y '
 phpgrep.  '$ x |  $ mask! = $ y ' </pre></td></tr></tbody></table></div></div></div><br><p>  Melanjutkan topik prioritas operasi yang tidak terduga, Anda dapat membaca tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">operator ternary di PHP</a> .  Pada habr, bahkan artikel itu ditujukan untuk itu: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Perintah eksekusi operator ternary</a> . </p><br><p>  Apakah mungkin menemukan tempat seperti itu dengan <code>phpgrep</code> ?  Jawabannya adalah <strong>ya</strong> ! </p><br><pre> <code class="bash hljs">phpgrep . <span class="hljs-string"><span class="hljs-string">'$_ == $_ ? $_ : $_ ? $_ : $_'</span></span> phpgrep . <span class="hljs-string"><span class="hljs-string">'$_ != $_ ? $_ : $_ ? $_ : $_'</span></span></code> </pre> <br><h1 id="prelesti-proverki-url-s-pomoschyu-regulyarnyh-vyrazheniy">  Manfaat Validasi Ekspresi Reguler </h1><br><p>  ⎆ <a href="">Wikia / aplikasi / pemeliharaan / wikia / updateCentralInterwiki.inc # L95</a> : </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( preg_match( <span class="hljs-string"><span class="hljs-string">'/(wowwiki.com|wikia.com|falloutvault.com)/'</span></span>, $url ) ) { $local = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $local = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  Seperti yang dikandung oleh pembuat kode, kami memeriksa URL untuk kebetulan dengan salah satu dari 3 opsi.  Simbol maaf <code>.</code>  tidak terlindungi, yang akan mengarah pada fakta bahwa alih-alih <code>falloutvault.com</code> kita bisa mendapatkan <code>falloutvaultxcom</code> pada domain apa pun dan lulus ujian. </p><br><p><img src="https://habrastorage.org/webt/n7/sj/pc/n7sjpcnsabhg5ggan7tiscxy0q4.png"></p><br><p>  Ini bukan kesalahan khusus PHP.  Dalam aplikasi apa pun di mana validasi dilakukan melalui ekspresi reguler dan karakter meta adalah bagian dari string yang diperiksa, ada risiko lupa melarikan diri di mana itu diperlukan dan mendapatkan kerentanan. </p><br><p>  Anda dapat menemukan tempat-tempat seperti itu dengan menjalankan <code>phpgrep</code> : </p><br><pre> <code class="bash hljs">phpgrep . <span class="hljs-string"><span class="hljs-string">'preg_match(${"pat:str"}, ${"*"})'</span></span> <span class="hljs-string"><span class="hljs-string">'pat~[^\\]\.(com|ru|net|org)\b'</span></span></code> </pre> <br><p>  Kami memperkenalkan subpattern <code>pat</code> bernama, yang menangkap string literal apa pun, dan kemudian menerapkan filter dari ekspresi reguler untuknya. </p><br><p>  Filter dapat diterapkan ke variabel template apa pun.  Selain ekspresi reguler, ada juga operator struktural <code>=</code> dan <code>!=</code> .  Daftar lengkap dapat ditemukan dalam <a href="">dokumentasi</a> . </p><br><p>  <code>${"*"}</code> menangkap angka sembarang argumen, jadi kami tidak perlu khawatir tentang parameter opsional fungsi <code>preg_match</code> . </p><br><h1 id="dublikaty-klyuchey-v-literale-massiva">  Kunci duplikat dalam literal array </h1><br><p>  Di PHP, Anda tidak akan menerima peringatan apa pun jika Anda menjalankan kode ini: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> var_dump([<span class="hljs-string"><span class="hljs-string">'a'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'a'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// : array(1) {["a"]=&gt; int(2)}</span></span></code> </pre> <br><p>  Kita dapat menemukan array seperti itu menggunakan <code>phpgrep</code> : </p><br><pre> <code class="plaintext hljs">[${"*"}, $k =&gt; $_, ${"*"}, $k =&gt; $_, ${"*"}]</code> </pre> <br><p>  Pola ini dapat didekripsi sebagai berikut: "sebuah array literal di mana setidaknya ada dua kunci yang identik dalam posisi sewenang-wenang."  Ekspresi <code>${"*"}</code> membantu kami untuk menggambarkan "posisi sewenang-wenang", memungkinkan elemen 0-N sebelum, di antara, dan setelah kunci yang menarik bagi kami. </p><br><p>  ⎆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Wikia / aplikasi / ekstensi / wikia / WikiaMiniUpload / WikiaMiniUpload_body.php # L23</a> : </p><br><pre> <code class="php hljs">$script_a = [ <span class="hljs-string"><span class="hljs-string">'wmu_back'</span></span> =&gt; wfMessage( <span class="hljs-string"><span class="hljs-string">'wmu_back'</span></span> )-&gt;escaped(), <span class="hljs-string"><span class="hljs-string">'wmu_back'</span></span> =&gt; wfMessage( <span class="hljs-string"><span class="hljs-string">'wmu_back'</span></span> )-&gt;escaped(), <span class="hljs-comment"><span class="hljs-comment">// ... ];</span></span></code> </pre> <br><p>  Dalam kasus ini, ini bukan kesalahan besar, tapi saya tahu kasus di mana duplikasi kunci dalam array besar (100 elemen) membawa setidaknya perilaku yang tidak terduga di mana salah satu kunci tumpang tindih dengan nilai yang lain. </p><br><hr><br><p>  Ini mengakhiri kunjungan singkat kami dengan contoh-contoh.  Jika Anda menginginkan lebih, pada akhir artikel ini menjelaskan cara mendapatkan semua hasil. </p><br><h1 id="chto-zhe-takoe-phpgrep">  Apa itu phpgrep? </h1><br><p>  Kebanyakan editor dan IDE menggunakan pencarian teks biasa untuk menemukan kode (jika itu bukan pencarian untuk karakter khusus seperti kelas atau variabel) - dengan kata lain, sesuatu seperti grep. </p><br><p>  Anda memasukkan " <code>$x</code> ", cari " <code>$x</code> ".  Ekspresi reguler mungkin tersedia untuk Anda, maka Anda sebenarnya dapat mencoba mengurai kode PHP dengan pelanggan tetap.  Kadang-kadang bahkan bekerja jika Anda mencari sesuatu yang sangat spesifik dan sederhana - misalnya, "variabel apa saja dengan beberapa akhiran."  Tetapi jika variabel dengan akhiran ini harus menjadi bagian dari ekspresi majemuk lain, kesulitan muncul. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">phpgrep</a> adalah alat untuk mencari kode PHP dengan mudah, yang memungkinkan Anda untuk mencari tidak menggunakan pelanggan yang berorientasi teks, tetapi menggunakan templat yang sadar sintaksis. </p><br><p>  Sadar-sintaksis artinya bahasa templat mencerminkan bahasa target, dan tidak beroperasi pada karakter individual, seperti yang dilakukan oleh ekspresi reguler.  Kami juga tidak membuat perbedaan sebelum memformat kode, hanya strukturnya yang penting. </p><br><div class="spoiler">  <b class="spoiler_title">Konten Opsional: Mulai Cepat</b> <div class="spoiler_text"><h1 id="quick-start">  Mulai cepat </h1><br><h3 id="ustanovka">  Instalasi </h3><br><p>  Ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">build rilis</a> siap pakai untuk amd64 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">untuk Linux dan Windows</a> , tetapi jika Anda telah menginstalnya, maka satu perintah sudah cukup untuk mendapatkan biner baru untuk platform Anda: </p><br><pre> <code class="bash hljs">go get -v github.com/quasilyte/phpgrep/cmd/phpgrep</code> </pre> <br><p>  Jika <code>$GOPATH/bin</code> ada dalam sistem <code>$PATH</code> , maka perintah <code>phpgrep</code> akan segera tersedia.  Untuk memverifikasi ini, coba jalankan perintah dengan parameter <code>-help</code> : </p><br><pre> <code class="bash hljs">phpgrep -<span class="hljs-built_in"><span class="hljs-built_in">help</span></span></code> </pre> <br><p>  Jika tidak ada yang terjadi, cari di mana Go telah menginstal biner dan menambahkannya ke variabel lingkungan <code>$PATH</code> . </p><br><p>  Cara lama dan andal untuk melihat <code>$GOPATH</code> , meskipun tidak disetel secara eksplisit: </p><br><pre> <code class="bash hljs">go env GOPATH</code> </pre> <br><h3 id="ispolzovanie">  Gunakan </h3><br><p>  Buat file <code>hello.php</code> pengujian: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...$xs)</span></span></span><span class="hljs-function"> </span></span>{} f(<span class="hljs-number"><span class="hljs-number">10</span></span>); f(<span class="hljs-number"><span class="hljs-number">20</span></span>); f(<span class="hljs-number"><span class="hljs-number">30</span></span>); f($x); f();</code> </pre> <br><p>  Jalankan <code>phpgrep</code> di atasnya: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># phpgrep hello.php 'f(${"x:int"})' 'x!=20' hello.php:3: f(10) hello.php:5: f(30)</span></span></code> </pre> <br><p>  Kami menemukan semua panggilan ke fungsi <code>f</code> dengan satu argumen, nomor yang nilainya tidak sama dengan 20. </p></div></div><br><h1 id="kak-rabotaet-phpgrep">  Cara kerja phpgrep </h1><br><p>  Untuk parsing PHP, pustaka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/z7zmey/php-parser</a> digunakan.  Ini cukup bagus, tetapi beberapa keterbatasan <code>phpgrep</code> mengikuti dari fitur parser yang digunakan.  Terutama banyak kesulitan muncul ketika mencoba bekerja secara normal dengan kurung. </p><br><p>  Prinsip <code>phpgrep</code> sederhana: </p><br><ul><li>  AST dibangun dari template input, filter dibongkar; </li><li>  untuk setiap file input, pohon AST lengkap dibangun; </li><li>  kita melihat-lihat AST dari setiap file, mencoba menemukan subtree yang cocok dengan polanya; </li><li>  untuk setiap hasil daftar filter diterapkan; </li><li>  semua hasil yang telah melewati filter dicetak ke layar. </li></ul><br><p>  Yang paling menarik adalah bagaimana tepatnya kedua node AST dicocokkan untuk kesetaraan.  Terkadang sepele: satu-ke-satu, dan meta-node dapat menangkap lebih dari satu elemen.  Contoh dari node meta adalah <code>${"*"}</code> dan <code>${"str"}</code> . </p><br><h1 id="zaklyuchenie">  Kesimpulan </h1><br><p>  Akan tidak jujur ​​untuk berbicara tentang <code>phpgrep</code> tanpa menyebutkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pencarian struktural dan ganti</a> (SSR) dari PhpStorm.  Mereka memecahkan masalah yang sama, dan SSR memiliki kelebihan, misalnya, integrasi ke dalam IDE, dan <code>phpgrep</code> membanggakan bahwa itu adalah program mandiri, yang jauh lebih mudah untuk dimasukkan, misalnya, pada CI. </p><br><p>  Antara lain, <code>phpgrep</code> juga merupakan perpustakaan yang dapat Anda gunakan dalam program Anda untuk mencocokkan kode PHP.  Ini sangat berguna untuk linter dan pembuatan kode. </p><br><p>  Saya akan senang jika alat ini bermanfaat bagi Anda.  Jika artikel ini hanya memotivasi Anda untuk melihat ke arah RSK tersebut, juga bagus. </p><br><img src="https://habrastorage.org/webt/o_/9a/cz/o_9aczasnsf3wssmuunol5lyjfe.png"><br><br><h1 id="dopolnitelnye-materialy">  Bahan tambahan </h1><br><p>  Daftar lengkap pola yang digunakan untuk analisis dapat ditemukan di file <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">patterns.txt</a> .  Di sebelah file ini, Anda dapat menemukan skrip <code>phpgrep-lint.sh</code> , yang menyederhanakan peluncuran <code>phpgrep</code> dengan daftar templat. </p><br><p>  Artikel ini tidak memberikan daftar respons lengkap, tetapi Anda dapat mereproduksi percobaan dengan mengkloning semua repositori yang disebutkan dan menjalankan <code>phpgrep-lint.sh</code> di atasnya. </p><br><p>  Anda dapat mengambil inspirasi dari templat uji, misalnya, dari artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">studio PVS</a> .  Saya sangat menyukai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ekspresi Logis: Kesalahan yang Dibuat oleh Profesional</a> , yang berubah menjadi seperti ini: </p><br><pre> <code class="plaintext hljs">#  "x != y || x != z": phpgrep . '$x != $a || $x != $b' phpgrep . '$x !== $a || $x != $b' phpgrep . '$x != $a || $x !== $b' phpgrep . '$x !== $a || $x !== $b'</code> </pre> <br><p>  Anda mungkin juga tertarik dengan presentasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">phpgrep: pencarian kode sadar-sintaks</a> . </p><br><blockquote>  Artikel ini menggunakan gambar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">penjual akan</a> yang dibuat melalui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gopherkon</a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id464893/">https://habr.com/ru/post/id464893/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id464877/index.html">Berita dari dunia OpenStreetMap No. 473 (08/06/2019 - 12/08/2019)</a></li>
<li><a href="../id464881/index.html">Menyesuaikan komposisi tes JUnit5 dengan application.properties</a></li>
<li><a href="../id464883/index.html">Ke mana Jaringan menuju</a></li>
<li><a href="../id464887/index.html">Beberapa kesalahan umum di Vue.js (Vuex)</a></li>
<li><a href="../id464889/index.html">Kembali ke masa depan ponsel</a></li>
<li><a href="../id464895/index.html">Kenapa Israel adalah mesin untuk pengembangan teknologi otomotif</a></li>
<li><a href="../id464897/index.html">Membangun XPath? XPath algoritmik? Tidak lain hanyalah XPath</a></li>
<li><a href="../id464899/index.html">Runtuhnya sebuah kota Texas yang melewatkan uang dari pertanian bitcoin</a></li>
<li><a href="../id464901/index.html">Pengembangan Helpdesk</a></li>
<li><a href="../id464909/index.html">“Mereka mengawasi kita”: apa yang bisa terjadi pada minivan yang tidak mencolok tepat di bawah jendela Anda</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>