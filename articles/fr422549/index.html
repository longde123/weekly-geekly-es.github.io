<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï† ‚ö∞Ô∏è üîÜ Corda: Kotlin üöΩ üññüèæ üìÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quand quelqu'un regarde le code Corda , il remarque imm√©diatement qu'il est √©crit en Kotlin - le nouveau langage de programmation de JetBrains, qui pe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Corda: Kotlin</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422549/"><p>  Quand quelqu'un regarde le code <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Corda</a> , il remarque imm√©diatement qu'il est √©crit en Kotlin - le nouveau langage de programmation de JetBrains, qui peut √™tre compil√© pour JVM et Javascript.  C'√©tait un choix inhabituel, et dans cet article, je veux partager quelques raisons de cette d√©cision et l'exp√©rience de notre "ann√©e avec Kotlin en production". </p><a name="habracut"></a><br><h3 id="pochemu-kotlin">  Pourquoi Kotlin? </h3><br><p>  Cette solution peut √™tre divis√©e en deux parties: </p><br><ol><li>  Quelle plateforme utiliser?  JVM, .NET, Node, Python / Ruby, Go, Haskell ou quelque chose de compil√© (en code machine)? </li><li>  Quelle langue utiliser si vous choisissez JVM?  Java?  Sinon, pourquoi?  Et sinon, quoi d'autre: Scala, Ceylan, Clojure, Kotlin, Python, Ruby, Javascript ou Haskell (car ils ont tous une impl√©mentation pour JVM). </li></ol><br><p> Les raisons du choix de JVM comme plate-forme sont bien connues dans l'environnement des applications d'entreprise, et il n'y a pas grand int√©r√™t √† s'y attarder.  Il suffit de dire que si vous avez besoin d'un runtime multiplateforme √©volutif, thread-safe avec <em>garbage collection</em> , et avec de nombreuses biblioth√®ques bien document√©es qui r√©solvent les probl√®mes m√©tier de base, alors le choix est r√©duit uniquement √† JVM et .NET. </p><br><p>  Au d√©but des travaux sur Corda, le projet n'avait pas de nom et il √©tait difficile d'imaginer qu'√† l'avenir il deviendrait un produit.  En fait, lorsque le projet, qui est devenu Corda, a commenc√© en d√©cembre 2015 (lors de mon premier jour de travail), il n'√©tait pas pr√©vu de cr√©er un nouveau syst√®me comptable distribu√© pour l'entreprise.  Corda a commenc√© comme un ensemble de prototypes pour explorer de nouvelles id√©es et exigences qui int√©ressaient le <em>groupe de travail sur l'architecture</em> du consortium, en particulier celles li√©es √† la visibilit√© limit√©e des donn√©es et au mod√®le de donn√©es qui fournit l'√©volutivit√© de ¬´l'ensemble UTXO de tableaux de sortie transactionnels¬ª ainsi que la programmabilit√© des contrats intelligents Ethereum imp√©ratifs en g√©n√©ral. </p><br><p>  En raison du fait qu'il n'√©tait pas clair si ces prototypes se transformeraient en quelque chose, ou serviraient simplement d'information pour d'autres produits sur le march√©, nous avons √©t√© confront√©s √† un choix difficile.  D'une part, nous voulions explorer rapidement et de mani√®re productive des algorithmes et des structures de donn√©es.  D'un autre c√¥t√©, il devrait rester une opportunit√© potentielle de cr√©er un grand produit d'entreprise et d'embaucher rapidement des personnes pour cela. </p><br><p>  Java r√©pondait certainement √† ces exigences, mais le manque de fonctionnalit√©s modernes dans le langage r√©duit consid√©rablement la productivit√© et, plus implicitement, le moral des d√©veloppeurs. </p><br><p>  Le typage dynamique n'a pas √©t√© pris en compte - les avantages de la correction, des outils de d√©veloppement et des performances fournis par le typage statique sont trop importants pour √™tre n√©glig√©s. </p><br><p>  Les langues fondamentalement diff√©rentes des plus populaires n'ont pas non plus √©t√© prises en compte, car  nous voulions pouvoir engager des experts financiers.  Et, bien qu'il <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">soit tout √† fait possible de</a> cr√©er une √©quipe autour d'une langue comme Haskell, trouver une personne avec une exp√©rience bancaire s√©rieuse et des langues paresseuses (paresseuses) pures (fonctionnelles) vivant au hasard √† Londres semblait risqu√©.  De plus, la nature m√™me du produit impliquait que nos "utilisateurs" sont en fait des d√©veloppeurs de plugins et d'applications qui utilisent la plate-forme, et il est inutile de les obliger √† apprendre des paradigmes et des outils compl√®tement nouveaux.  Notre choix de langue ne doit pas trop limiter les utilisateurs. </p><br><p>  En cons√©quence, ces exigences nous ont laiss√© avec Kotlin, Scala et Ceylan.  Ces langues sont assez similaires et assez int√©ressantes.  Nous avons choisi Kotlin pour les raisons suivantes: </p><br><ul><li>  Int√©gration presque <em>transparente</em> avec Java <br><ul><li>  En particulier, les programmes Kotlin utilisent une version am√©lior√©e (am√©lior√©e par le compilateur) des collections JDK standard, ce qui garantit ainsi qu'il n'y a aucun probl√®me d'int√©gration en raison de l'utilisation d'autres biblioth√®ques de collections.  Nous transmettons et recevons des collections <em>vers</em> et <em>depuis</em> les biblioth√®ques Java partout, il est donc important que cela ne pose pas de probl√®me. </li><li> √Ä partir des classes Kotlin, nous obtenons une API Java simple avec les m√©thodes <code>get</code> / <code>set</code> / <code>is</code> conform√©ment aux types.  Aucune annotation sp√©ciale ou autre action n'est requise pour cela.  Pour la raison que Corda fournit une API con√ßue pour une utilisation transparente par les d√©veloppeurs Java, c'est un grand avantage: √† partir du code ordinaire, vous obtenez une API qui ne peut pas √™tre distingu√©e de l'API Java avec seulement quelques mises en garde (par exemple, l'interception explicite des exceptions v√©rifi√©es de Java n√©cessite une explicite annotation de m√©thode) </li></ul></li><li>  L'inclusion de petites fonctions comme <code>map</code> / <code>filter</code> / <code>fold</code> / <code>groupBy</code> (au lieu d'esp√©rer que la JVM le fera elle-m√™me) est effectu√©e par le compilateur.  Malheureusement, le compilateur JIT JVM, bien qu'excellent dans l'ensemble, n'√©limine pas dans tous les cas la surcharge d'utilisation abondante de fonctions d'ordre sup√©rieur.  L'utilisation de Kotlin compense cela, en plus de vous permettre de contr√¥ler l'ex√©cution du programme √† partir des fonctions lambda (remarque: par exemple, retour <em>non local</em> ).  C'est l'une des fonctionnalit√©s les moins connues, mais en m√™me temps, utiles.  Parce que  partout o√π nous √©crivons du code dans un style aussi fonctionnel, alors s'il √©tait mal traduit en code machine, nous pourrions nous cr√©er des probl√®mes de performances. </li><li>  En raison du fait que le code sur Kotlin est traduit en un code Java assez similaire, presque tous les outils orient√©s Java existants fonctionnent <em>imm√©diatement</em> .  Ce n'est pas toujours vrai dans le cas d'autres langues.  Par exemple, Quasar a du mal √† instrumenter le code Scala car il a besoin d'annotations de m√©thode, et Scala traduit les lambdas en m√©thodes qui ne peuvent pas √™tre annot√©es.  Les lambdas Kotlin sont g√©n√©ralement int√©gr√©s (voir ci-dessus), ou peuvent √™tre annot√©s autrement. </li><li>  Une excellente documentation et une minuscule biblioth√®que standard le rendent tr√®s rapide √† apprendre.  Nous n'avons pas indiqu√© dans nos offres d'emploi le besoin d'exp√©rience chez Kotlin, et nous avons embauch√© des personnes √† son insu <em>pendant</em> 1 <em>√†</em> 3 <em>ans,</em> apr√®s quoi un nouveau membre de l'√©quipe a pu √©crire du code idiomatique. </li><li>  Sur la base de la s√©lection des candidats qui nous ont interview√©s, IntelliJ est l'IDE le plus populaire (ils avaient un libre choix d'outils).  Parmi les langages post-Java, IntelliJ prend le mieux en charge Kotlin. </li><li>  J'ai d√©j√† eu une exp√©rience satisfaisante avec lui et, par cons√©quent, j'√©tais s√ªr que ses nouveaux coll√®gues l'appr√©cieraient √©galement. </li></ul><br><p>  Si ce n'√©tait pas pour Kotlin, nous avons probablement choisi Scala: Kotlin s'en inspire largement et les deux sont de bonnes langues. </p><br><h3 id="nash-god-s-kotlin">  Notre ann√©e avec Kotlin </h3><br><p>  Comment est-ce - un an pour travailler avec une nouvelle langue dans le contexte d'une application d'entreprise? </p><br><p>  La chose la plus importante √©tait, sans aucun doute, d'entendre des coll√®gues qu'ils aiment vraiment travailler avec lui.  Le langage de programmation est une affaire personnelle pour tout le monde, et les gens ont g√©n√©ralement une opinion pr√©cise √† ce sujet.  Si vous, en tant que premi√®re t√¢che d'un nouvel emploi, demandez √† quelqu'un d'apprendre une nouvelle langue et ne l'avertissez m√™me pas √† l'avance, il y a toujours un risque qu'un coll√®gue le d√©teste et le trouve plut√¥t ennuyeux plut√¥t que d'augmenter sa productivit√©.  Mais ce n'est pas le cas. </p><br><p>  Voici quelques-uns des probl√®mes qui surviennent souvent dans un environnement de d√©veloppement d'entreprise post-Java / C # que nous avons nous-m√™mes rencontr√©: </p><br><ul><li>  <strong>Le code est diff√©rent selon qui l'a √©crit.</strong>  En g√©n√©ral, ce n'est pas un gros probl√®me.  Contrairement √† Go, qui n√©cessite un certain style de conception, le code Kotlin de diff√©rents auteurs peut √™tre diff√©rent.  Mais IntelliJ dispose d'un outil de formatage qui fournit un style de base de code unifi√©.  C'est plus limit√© que pour Java, mais √ßa suffit.  Un probl√®me plus subtil, en particulier avec le code Scala, est l'opposition du style de codage Java-OOP et Haskell-FI.  Le code Scala qui utilise des biblioth√®ques telles que scalaz peut √™tre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">difficile √† lire</a> pour les d√©veloppeurs qui s'attendent √† voir Java <em>am√©lior√©</em> .  Dans ce d√©bat, Kotlin est assez fermement du c√¥t√© de Java <em>am√©lior√©</em> .  Et, bien que la programmation fonctionnelle, d'une certaine mani√®re, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">peut</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√™tre</a> sur Kotlin, la communaut√© (au moins pour l'instant) ne s'est pas divis√©e en camps.  Nous avons eu des cas o√π le code a √©t√© √©crit comme s'il s'agissait de Haskell, mais il a √©t√© √©labor√© sur la r√©vision du code. </li><li>  <strong>Biblioth√®ques</strong>  Chez Corda, nous utilisons plus de 50 biblioth√®ques open source et il n'y a eu aucun probl√®me avec aucune.  Nous n'avons jamais √©crit de wrappers ou de couches d'adaptateurs.  Comme les syst√®mes de construction dans les projets sur Kotlin, Maven ou Gradle sont g√©n√©ralement utilis√©s - il n'y a pas de remplacement officiel sp√©cifique √† Kotlin pour ces outils (bien que Gradle ait introduit la prise en charge de Kotlin comme nouveau langage de script!). </li><li>  <strong>DSL et SQL.</strong>  C # a LINQ, Java a JOOQ et Kotlin a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exposed</a> .  C'est l'un des domaines o√π Kotlin est un peu plus faible que ses concurrents - Exposed est un excellent exemple d'utilisation des capacit√©s de Kotlin pour la construction DSL, mais la biblioth√®que elle-m√™me a une API instable et est un projet secondaire.  JOOQ, bien s√ªr, peut √™tre utilis√© avec Kotlin et, avec le recul, cela semble √™tre l'option pr√©f√©r√©e. </li><li>  <strong>IDE / bo√Æte √† outils.</strong>  Le plugin Kotlin pour IntelliJ est, bien s√ªr, √©crit par JetBrains et, dans l'ensemble, est g√©nial.  Cependant, il est moins sophistiqu√© que le support Java.  Les nouvelles fonctionnalit√©s de l'√©diteur, telles qu'un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">indice de param√®tre</a> , doivent √™tre port√©es manuellement sur Kotlin, et le support lui-m√™me, en tant que tel, est g√©n√©ralement en retard sur les plug-ins Java beaucoup plus anciens.  Nous avons √©galement remarqu√© que le plugin IDE notifie assez souvent des erreurs internes, bien que la fr√©quence des exceptions IDE ait consid√©rablement diminu√© au cours de l'ann√©e (et il semble qu'elles n'affectent rien).  L'utilisation d'autres outils ne pose pas non plus de probl√®mes, car  ce qui est √©crit pour Java fonctionne g√©n√©ralement <em>hors de la bo√Æte</em> .  Une exception est les outils qui fonctionnent avec du code source au lieu du bytecode, et qui, √©videmment, ne peuvent pas √™tre r√©utilis√©s.  Avec tout cela, le compilateur Kotlin et le plugin IDE ne sont pas aussi d√©bogu√©s que dans le cas de Java, m√™me un an apr√®s la sortie de 1.0.  Tr√®s probablement, vous ne rencontrerez jamais d'erreurs internes dans <code>javac</code> , mais, bien que tr√®s rarement, nous les voyons toujours dans Kotlin. </li><li>  <strong>Reconnaissance par les utilisateurs.</strong>  Les utilisateurs de Corda sont le plus souvent de grandes institutions financi√®res conservatrices.  Ces entreprises pr√©f√®rent utiliser des langues communes et bien √©tablies.  Kotlin, n'√©tant ni l'un ni l'autre, a clairement caus√© une certaine surprise au moment o√π nous avons commenc√©.  "Pourquoi Kotlin?"  - C'est une question qui, au cours de l'ann√©e √©coul√©e, a pratiquement disparu, car  les gens ont regard√© de plus pr√®s et ont r√©alis√© que ce n'est pas aussi risqu√© que c'est g√©n√©ralement le cas avec les nouveaux langages de programmation.  Nous avons √©galement essay√© de faciliter l'adoption en fournissant des exemples de code d√©montrant que la cr√©ation d'applications √† l'aide de la plate-forme ne n√©cessite pas de connaissances Kotlin.  Les r√©sultats n'ont pas √©t√© aussi r√©ussis - de nombreux d√©veloppeurs travaillant pour la premi√®re fois avec Corda commencent toujours par explorer Kotlin.  Il n'est pas tr√®s clair si cela est le r√©sultat du fait que nous avons fourni des exemples d'utilisation et une documentation insuffisamment orient√©s Java, ou est-ce juste une bonne excuse pour apprendre un nouvel outil cool.  Nous avons √©galement √©t√© aid√©s par l'adoption croissante de Kotlin au sein des principales banques d'investissement.  Au cours de la derni√®re ann√©e, plusieurs membres du consortium nous ont dit que leurs √©quipes de d√©veloppement interne avaient commenc√© √† examiner s√©rieusement Kotlin pour leurs propres produits: souvent en raison de la disponibilit√© d'outils qui convertissent Java en Kotlin, qui fournissent une int√©gration beaucoup moins p√©nible dans la base de code existante. </li><li>  <strong>Support commercial.</strong>  Le risque d'utiliser des langages peu connus est qu'ils peuvent arr√™ter de se d√©velopper, ou avoir des objectifs qui ne correspondent pas aux besoins form√©s autour du produit, la communaut√© des utilisateurs (par exemple, dans le cas des langages de recherche, l'objectif principal des d√©veloppeurs est de cr√©er des articles scientifiques).  La principale raison pour laquelle nous sommes confiants avec Kotlin est que JetBrains est une entreprise stable et rentable qui est sur le march√© depuis plus de 15 ans.  JetBrains a rapidement commenc√© <em>√† go√ªter</em> son propre outil en introduisant Kotlin dans le code des principaux produits.  Ainsi, le risque de r√©siliation du soutien est plut√¥t faible.  De plus, JetBrains est d√©j√† une entreprise d'√¢ge moyen, et son march√© cible (IDE et outils de d√©veloppement) a cess√© d'√™tre nouveau ou particuli√®rement √† la mode, ce qui r√©duit le risque d'une √©ventuelle prise de contr√¥le de l'entreprise, ce qui peut entra√Æner des changements strat√©giques impr√©visibles.  Et, malgr√© l'absence d'un package de support commercial pour Kotlin, dans la pratique, l'√©quipe r√©sout rapidement les probl√®mes connus.  √Ä l'heure actuelle, JetBrains a l'intention de publier la prochaine mise √† jour linguistique apr√®s un an depuis la version 1.0.  Ce cycle de publication est assez similaire au cycle de d√©veloppement dans l'environnement d'entreprise. </li></ul><br><h3 id="vyvody">  Conclusions? </h3><br><p>  On ne le regrette pas: le choix d'une langue jeune au d√©part de ce projet √©tait, bien que risqu√©, mais √©quilibr√©.  Il a fait du bon travail pour nous et nous ne changerions pas notre choix. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr422549/">https://habr.com/ru/post/fr422549/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr422539/index.html">√Ä propos de l'√©conomie num√©rique, des incendies et d'Internet</a></li>
<li><a href="../fr422541/index.html">Le drame des trous dans l'Union s'est transform√© en fantasmagorie</a></li>
<li><a href="../fr422543/index.html">Pensez comme un programmeur. Tutoriel de r√©solution de probl√®mes</a></li>
<li><a href="../fr422545/index.html">Fa√ßons de synchroniser les onglets du navigateur</a></li>
<li><a href="../fr422547/index.html">Pour √©liminer Spectre et Meltdown, vous devrez peut-√™tre cr√©er un tout nouveau type de processeur</a></li>
<li><a href="../fr422551/index.html">Comment voler de l'argent avec une carte sans contact et Apple Pay</a></li>
<li><a href="../fr422553/index.html">L'extension de navigateur officielle Mega vole les donn√©es de partage de fichiers et la crypto-monnaie</a></li>
<li><a href="../fr422555/index.html">Architecture multi-modules Android. De A √† Z</a></li>
<li><a href="../fr422561/index.html">Comment Yandex a appliqu√© la vision par ordinateur pour am√©liorer la qualit√© des √©missions vid√©o. Technologie DeepHD</a></li>
<li><a href="../fr422565/index.html">Webinaires Skillbox Friday: Tout pour les programmeurs et les concepteurs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>