<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòü üíò üëºüèΩ Bouton d'appel bricolage partie 2. Vid√©ophone de Raspberry Pi ü•ë üöÖ ‚ù£Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cette partie, nous fabriquons un appareil VoIP Raspberry Pi pour passer des appels vid√©o en utilisant le protocole SIP. 

 La t√¢che initiale est ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bouton d'appel bricolage partie 2. Vid√©ophone de Raspberry Pi</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478970/">  Dans cette partie, nous fabriquons un appareil VoIP Raspberry Pi pour passer des appels vid√©o en utilisant le protocole SIP. <br><br>  La t√¢che initiale est rest√©e la m√™me: passer un appel par influence ext√©rieure (appuyer sur un bouton).  Mais la mise en ≈ìuvre de l'id√©e a un peu chang√©.  Comme dans la partie pr√©c√©dente, nous utiliserons le client SIP du terminal Linphonec, mais afin de simplifier la configuration, j'ai d√©cid√© d'utiliser le fournisseur VoIP Zadarma.com avec des appels en ligne gratuits, y compris le support vid√©o.  Pour les appels vid√©o, j'ai utilis√© une cam√©ra USB √©conomique. <br><br>  D√©tails, ainsi que des instructions √©tape par √©tape sous la coupe. <br><a name="habracut"></a><br>  <a href="https://habr.com/ru/post/464309/">Premi√®re partie</a> <br>  Le syst√®me est d√©ploy√© sur l' <u><b>image de base pour RPI v3_40_int</b></u> hors de la bo√Æte sans installer quoi que ce soit suppl√©mentaire. <br><br>  <a href="https://connect.smartliving.ru/tasks/20.html" rel="nofollow">Lier les images de base de MajorDoMo pour la framboise</a> <br><br>  La webcam que j'ai utilis√©e est √©conomique (environ 7 ans √† Minsk) - Ritmix RVC-015M.  A la possibilit√© de r√©gler manuellement la mise au point. <br><br>  En train de tester et d'√©crire un article, j'ai d√©cid√© d'abandonner l'utilisation de mon serveur VoIP (Fresswitch).  L'installation de votre serveur VoIP complique le processus de configuration, mais vous donne plus de flexibilit√©. <br><br>  Pour un exemple, nous utiliserons l'op√©rateur <a href="https://habr.com/ru/company/zadarma/profile/">Zadarma</a> pr√©sent√© sur Habr VoIP. <br><br>  Pour passer des appels, nous avons besoin de deux comptes sur le serveur SIP.  Sous l'un, le Raspberry Pi et le client de la console fonctionneront, le second pour le smartphone (ou PC).  Le processus d'inscription est intuitif et n'a pas besoin de description. <br><br>  Je vais r√©p√©ter bri√®vement l'installation et la configuration du package Linphone, des informations plus d√©taill√©es dans la premi√®re partie. <br><br><h3>  Installation et assemblage de Linphone </h3><br><h4>  Pr√©paration de l'installation: </h4><br>  Arr√™tez l'ex√©cution mais les services inutilis√©s: <br><br><div class="spoiler">  <b class="spoiler_title">Arr√™t des services</b> <div class="spoiler_text"><pre><code class="plaintext hljs">sudo systemctl stop freeswitch.service sudo systemctl stop majordomo.service sudo systemctl stop avahi-daemon.socket sudo systemctl stop avahi-daemon.service sudo systemctl stop mosquitto.service sudo systemctl stop mysql sudo systemctl stop mpd.service sudo systemctl stop mpd.socket sudo systemctl stop homebridge.service sudo systemctl stop nginx.service sudo systemctl stop bluetooth.target sudo systemctl stop bluetooth.service</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Cr√©ation d'un fichier d'√©change swap temporaire</b> <div class="spoiler_text">  Au cas o√π, nous cr√©ons un fichier d'√©change temporaire (avant le red√©marrage du syst√®me) (espace disque dur), que le syst√®me d'exploitation utilise en cas de RAM insuffisante. <br><br>  Commandes alternatives: v√©rifier si le fichier d'√©change est inclus dans notre installation Raspbian (Debian); si la sortie est vide, cela signifie que le fichier d'√©change est manquant sur le syst√®me. <br>  Ajoutez un √©change 1G et cr√©ez un fichier. <br><br>  Nous d√©finissons les autorisations appropri√©es pour ce fichier, seul l'utilisateur root peut lire et √©crire dans le fichier d'√©change. <br><br>  Nous utilisons l'outil mkswap pour configurer la zone de swap Linux dans le fichier et l'activer: <br><br><pre> <code class="plaintext hljs">sudo swapon --show sudo fallocate -l 1G /swapfile sudo chmod 600 /swapfile sudo mkswap /swapfile sudo swapon /swapfile</code> </pre> </div></div><br><h3>  Installation du client SIP de la console Linphonec et de l'utilitaire de gestion Linphonecsh </h3><br>  Pour construire le package √† partir des sources, nous installons des d√©pendances suppl√©mentaires: <br><br><pre> <code class="plaintext hljs">sudo apt-get install cmake automake autoconf libtool intltool yasm libasound2-dev libpulse-dev libv4l-dev nasm git libglew-dev</code> </pre> <br>  Nous allons dans le r√©pertoire personnel et t√©l√©chargeons le package Linphone lui-m√™me, le t√©l√©chargement a pris environ 20 minutes: <br><br><pre> <code class="plaintext hljs">cd /home/pi/ git clone git://git.linphone.org/linphone-desktop.git -recursive</code> </pre><br>  Nous allons dans le r√©pertoire cr√©√© lors du t√©l√©chargement du package, pr√©parons pour l'installation la version sans interface graphique: <br><br><pre> <code class="plaintext hljs">cd linphone-desktop sudo ./prepare.py no-ui -DENABLE_OPENH264=ON -DENABLE_WEBRTC_AEC=OFF -DENABLE_UNIT_TESTS=OFF -DENABLE_MKV=OFF -DENABLE_FFMPEG=ON -DENABLE_CXX_WRAPPER=OFF -DENABLE_NON_FREE_CODECS=ON -DENABLE_VCARD=OFF -DENABLE_BV16=OFF -DENABLE_V4L=OFF</code> </pre> <br>  G√©n√©rez √† l'aide de l'attribut ‚Äìj4 (c'est-√†-dire, cr√©ez en 4 threads en m√™me temps: <br><br><pre> <code class="plaintext hljs">sudo make -j4</code> </pre> <br>  L'assemblage prend 30 √† 40 minutes. <br><br>  Les fichiers de programme compil√©s sont apparus dans le r√©pertoire OUTPUT / no-ui / bin.  Pour ex√©cuter le programme, allez-y, v√©rifiez la version du programme: <br><br><pre> <code class="plaintext hljs">cd OUTPUT/no-ui/bin ./linphonec -v</code> </pre> <br>  <i>On obtient le r√©sultat: version: 3.12.0</i> <br><br>  Surcharger notre framboise. <br><br>  Lorsque vous red√©marrez, tous les services enregistr√©s au d√©marrage sont restaur√©s, le fichier d'√©change est supprim√©. <br><br><h2>  Configuration d'un terminal client SIP Linphonec </h2><br>  Ex√©cutez Linphonec en mode de r√©ponse automatique √† partir de l'utilisateur pi actuel: <br><br><pre> <code class="plaintext hljs">/home/pi/linphone-desktop/OUTPUT/no-ui/bin/linphonec</code> </pre> <br>  Au premier lancement, Linphonec essaie de cr√©er un fichier de base de donn√©es et un fichier de param√®tres.  Toutefois, le d√©marrage se produit avec des erreurs et le programme s'arr√™te. <br><br>  Comment cr√©er un r√©pertoire √† partir de l'utilisateur actuel (pi) dans la premi√®re partie <br><br><pre> <code class="plaintext hljs">mkdir /home/pi/.local mkdir /home/pi/.local/share mkdir /home/pi/.local/share/linphone</code> </pre> <br>  Parce que  dans notre cas, nous n'utilisons pas de serveur VoIP, alors le port standard pour la t√©l√©phonie IP 5060 est utilis√©. <br><br>  Nous enregistrerons l'un des comptes en ex√©cutant la commande suivante dans Linphonec: <br><br><pre> <code class="plaintext hljs">register sip:XXXXXX@sip.zadarma.com sip.zadarma.com YYYYYYY</code> </pre> <br>  le format de la commande peut √™tre consult√© en tapant help register. <br><br>  Dans notre cas, XXXXXX est le num√©ro de compte (login), YYYYY est le mot de passe √©mis lors de l'inscription.  V√©rifiez l'inscription: <br><br><pre> <code class="plaintext hljs">status register</code> </pre> <br>  r√©ponse lors de l'inscription r√©ussie: <i>enregistr√©, identit√© = sip: XXXXX@sip.zadarma.com dur√©e = 3600</i> <br><br>  Pour quitter le client, appuyez sur ctrl + c ou sur la commande quit. <br><br>  Apr√®s avoir quitt√© le r√©pertoire personnel / home / pi, le fichier de configuration du client de la console est apparu: .linphonerc. <br><br><h3>  Connexion d'un cam√©scope WEB </h3><br>  Nous nous connectons √† la cam√©ra Raspberry. <br><br>  V√©rifier si mon compte est inclus dans le groupe vid√©o <br><br><pre> <code class="plaintext hljs">cat /etc/group | grep video</code> </pre> <br>  R√©ponse: <i>vid√©o: x: 44: pi</i> <br><br>  Voyons si la webcam de votre syst√®me a √©t√© d√©termin√©e: <br><br><pre> <code class="plaintext hljs">sudo ls -l /dev/ | grep video</code> </pre> <br>  V√©rifiez si le microphone de la cam√©ra est d√©termin√©: <br><br><pre> <code class="plaintext hljs">arecord -l</code> </pre> <br>  La r√©ponse est: <br><br>  <i>Liste des p√©riph√©riques mat√©riels CAPTURE</i> <i><br></i>  <i>carte 1: CAMERA [USB2.0 PC CAMERA], p√©riph√©rique 0: USB Audio [USB Audio]</i> <i><br></i>  <i>Sous-appareils: 1/1</i> <i><br></i>  <i>Sous-appareil # 0: sous-appareil # 0</i> <br><br>  Tout est en ordre, il y a aussi un microphone.  Nous allons le v√©rifier dans alsemikser <br><br><pre> <code class="plaintext hljs">alsamixer</code> </pre> <br>  Je pr√©cise tout de suite que mon microphone est activ√© par d√©faut, il a √©t√© identifi√© comme le principal et est presque compl√®tement tordu, il y a une forte surpuissance. <br><br>  Appuyez sur F6 (s√©lectionnez une carte), s√©lectionnez USB PC Camera, puis F4 - le p√©riph√©rique de capture (microphone sur la cam√©ra), abaissez son niveau √† presque z√©ro, avec les touches de curseur vers le bas, en m√™me temps, nous v√©rifierons la capture. <br><br><img src="https://habrastorage.org/webt/m1/t9/eb/m1t9ebbgvi01vbrtj4lb1vkysok.png">  " <br><br>  Sur le march√© des applications pour Android, j'installe l'application Linphone (j'en ai essay√© plusieurs, seulement elle a la diffusion vid√©o. Sur Windows, tous les clients SIP que j'utilise fonctionnent sans probl√®me. Cela fonctionne aussi sans probl√®me sur mon serveur SIP (freeswitch, si utilis√© en local, et pas seulement le r√©seau, la meilleure option est votre serveur + passerelle pour les appels depuis votre r√©seau local). <br><br>  Pour obtenir des instructions sur la configuration de l'application Linphone Android, rendez-vous sur Zadarma.com. <br>  <a href="https://zadarma.com/ru/support/instructions/android/linphone/" rel="nofollow">Instructions du fournisseur SIP</a> . <br><br>  Nous enregistrons le t√©l√©phone mobile sur Zadarma, puis, √©ventuellement, nous configurons la vid√©o, l'audio, etc. <br><br>  Pour les tests, nous ex√©cutons l'utilitaire linphonec avec la fonction d'appel vid√©o et de r√©ponse automatique dans RPI (en ajoutant les touches -V -a): <br><br><pre> <code class="plaintext hljs">/home/pi/linphone-desktop/OUTPUT/no-ui/bin/linphonec -V -a</code> </pre> <br>  et passez un appel dans le terminal client en tapant: <br><br><pre> <code class="plaintext hljs">call 576935</code> </pre> <br>  La substitution du serveur VoIP (domaine) est effectu√©e automatiquement, bien que vous puissiez enti√®rement composer l'adresse SIP. <br><br>  En cons√©quence, nous obtenons: <br><br><img src="https://habrastorage.org/webt/ae/yb/k5/aeybk565vplirfecvbnfmylgyh8.jpeg"><br>  (qualit√© plus ou moins bonne pour cet appareil photo √† une distance de 2-3 m√®tres de l'objectif). <br><br>  Nous pouvons v√©rifier le mode de r√©ponse automatique en composant le num√©ro RPI sur le smartphone. <br><br>  Pour ex√©cuter et contr√¥ler Linphonec en mode d√©mon, l'utilitaire Linphonecsh est utilis√©. <br><br>  Initialement, au d√©marrage, l'initialisation du client linphonecsh -init est requise.  Lorsque cette commande est ex√©cut√©e, le client de console d√©marre sans charger le fichier de configuration. <br>  Pour qu'au d√©marrage le fichier de configuration soit lu, l'appel vid√©o et la r√©ponse automatique aux appels entrants seront lanc√©s avec les drapeaux - s - V -a: <br><br><pre> <code class="plaintext hljs">/home/pi/linphone-desktop/OUTPUT/no-ui/bin/linphonecsh init -c /home/pi/.linphonerc -V -a</code> </pre> <br>  Nous pouvons maintenant g√©rer le client de console √† partir de la ligne de commande du syst√®me d'exploitation et de MajorDoMo. <br><br>  La commande pour d√©marrer un appel vid√©o depuis le terminal: <br><br><pre> <code class="plaintext hljs">/home/pi/linphone-desktop/OUTPUT/no-ui/bin/linphonecsh dial XXXXX</code> </pre> <br>  La premi√®re √©tape peut √™tre franchie. <br><br><h3>  Connecter un bouton et travailler avec GPIO </h3><br><img src="https://habrastorage.org/webt/ox/fd/z3/oxfdz3i_gcu-ga22wx6et4lqqya.jpeg"><br><br>  Le Raspberry Pi poss√®de un certain nombre de ports GPIO (entr√©e / sortie √† usage g√©n√©ral) qui s'interfacent.  qui contient des entr√©es et sorties √† usage g√©n√©ral auxquelles diff√©rents actionneurs peuvent √™tre connect√©s, dans notre cas un simple bouton. <br><br>  Presque toutes les broches GPIO (il y en a plusieurs r√©serv√©es) peuvent √™tre r√©gl√©es sur l'un des deux √©tats: ¬´sortie¬ª (alias OUT ou logique 1) ou ¬´entr√©e¬ª (IN ou logique 0).  La tension de sortie est de 3,3 V. <br><br>  Pour mon bouton, j'utiliserai les deux broches les plus √† droite dans la rang√©e sup√©rieure.  Le connecteur n ¬∞ 38 (GPIO20) sera r√©gl√© sur ¬´sortie¬ª (OUT) et le connecteur n ¬∞ 40 (GPIO21) sur ¬´entr√©e¬ª (IN). <br><br>  Les cavaliers BBJ sont utilis√©s pour se connecter au peigne GPIO.  Il est recommand√© de se connecter lorsque la framboise est d√©connect√©e du r√©seau. <br><br>  Cr√©ons deux scripts.  Le premier est utilis√© pour initialiser les ports GPIO, le second est pour les commandes de contr√¥le de l'utilitaire Linphonecsh. <br><br>  Script Bash pour initialiser les ports GPIO: <br><br><pre> <code class="plaintext hljs">sudo nano /usr/local/bin/gpio21.sh</code> </pre> <br>  et collez le contenu <br><br><div class="spoiler">  <b class="spoiler_title">gpio21.sh</b> <div class="spoiler_text">  #!  / bin / bash <br>  # Configurer GPIO20 et d√©finir pour sortir <br>  echo 20&gt; / sys / class / gpio / export <br>  echo out&gt; / sys / class / gpio / gpio20 / direction <br>  echo 1&gt; / sys / class / gpio / gpio20 / value <br>  # Configurer GPIO21 et param√©trer pour entrer <br>  echo 21&gt; / sys / class / gpio / export <br>  √©cho dans&gt; / sys / class / gpio / gpio21 / direction <br></div></div><br>  Nous rendons le fichier ex√©cutable: <br><br><pre> <code class="plaintext hljs">sudo chmod +x /usr/local/bin/gpio21.sh</code> </pre> <br>  Le deuxi√®me script de num√©rotation au clic d'un bouton, j'ai d√©cid√© de le faire en PHP, pour une int√©gration ult√©rieure avec le syst√®me domotique MajorDoMo.  Au toucher d'un bouton, l'√©tat du port 21 change, le syst√®me lit p√©riodiquement la valeur du port 21 et, s'il est modifi√©, envoie une commande de num√©rotation √† Linphonecsh. <br><br><pre> <code class="plaintext hljs">sudo nano /usr/local/bin/dial.php</code> </pre> <br>  et collez le contenu: <br><br><div class="spoiler">  <b class="spoiler_title">dial.php</b> <div class="spoiler_text">  &lt;? php <br>  $ old_state = 0; <br>  tandis que (vrai) <br>  { <br>  $ state = file_get_contents ('/ sys / class / gpio / gpio21 / value'); <br>  if ($ state! = $ old_state) <br>  { <br>  if ($ state == 1) <br>  { <br>  // Faire un nouvel appel <br>  √©cho ¬´faire¬ª; <br>  exec ("sudo -u pi / home / pi / linphone-desktop / OUTPUT / no-ui / bin / linphonecsh dial sip: XXXXX@sip.zadarma.com"); <br>  usleep (200000); <br>  } <br>  $ old_state = $ state; <br>  } <br>  usleep (20000); <br>  } <br>  ?&gt; <br></div></div><br>  Nous rendons le fichier ex√©cutable. <br><br>  Ensuite, nous √©crivons trois lignes √† la fin du fichier de d√©marrage: <br><br><ol><li>  Script d'initialisation du port GPIO </li><li>  lancement de l'utilitaire de gestion en mode r√©ponse automatique et prise en charge du transfert vid√©o </li><li>  Composition de scripts PHP. </li></ol><br><pre> <code class="plaintext hljs">crontab -e</code> </pre> <br><br><pre> <code class="plaintext hljs">@reboot sudo /usr/local/bin/gpio21.sh @reboot sudo -u pi /home/pi/linphone-desktop/OUTPUT/no-ui/bin/linphonecsh init -c /home/pi/.linphonerc -V -a @reboot sudo php /usr/local/bin/dial.php</code> </pre> <br>  Surcharger notre Raspberry, sudo reboot.  Apr√®s red√©marrage, notre visiophone est pr√™t √† l'emploi. <br><br>  De plus, si vous le souhaitez et si possible - int√©gration dans un syst√®me domotique, connexion √† votre serveur SIP, etc. <br><br><div class="spoiler">  <b class="spoiler_title">Charge RPI pendant l'attente et l'appel vid√©o</b> <div class="spoiler_text">  Charge RPI en attendant et en effectuant un appel vid√©o: <br><br><img src="https://habrastorage.org/webt/kg/gl/rv/kgglrvchkeffwsetw_lrhmzrili.png"><br><br><img src="https://habrastorage.org/webt/ex/rq/0n/exrq0nlihpbkpg_rg83cgokupmy.png"><br></div></div><br><h4>  Une petite digression comme conclusion </h4><br>  Au d√©part, je pr√©voyais de faire un appareil pour communiquer avec une personne apr√®s une maladie qui ne peut pas utiliser le t√©l√©phone seule, apr√®s cela le besoin a disparu, mais j'ai d√©cid√© de terminer le travail, et j'ai vu la possibilit√© d'utiliser l'un des composants de la domotique √† d'autres fins. <br><br>  Lors de la cr√©ation, je souhaite que les crit√®res suivants soient remplis, ou au moins deux sur trois: <br><br><ol><li>  Disponibilit√© (la possibilit√© d'acheter des composants ici et maintenant (dans ma r√©gion). </li><li>  Budget (faible co√ªt de l'appareil √† la sortie). </li><li>  Simplicit√© d'ex√©cution, ou au moins l'exhaustivit√© des instructions √©tape par √©tape (La capacit√© pour une personne qui avait besoin de le r√©p√©ter, sans connaissances particuli√®res et sans temps, de fabriquer un appareil et de commencer √† l'utiliser) </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr478970/">https://habr.com/ru/post/fr478970/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr478958/index.html">Guide de mise √† niveau complet de Windows 10 pour les entreprises de toute taille</a></li>
<li><a href="../fr478960/index.html">Mini capteur de lumi√®re et de choc | nRF52840</a></li>
<li><a href="../fr478962/index.html">Ilya Yakyamsev: l'efficacit√© ne fonctionne pas</a></li>
<li><a href="../fr478966/index.html">Comment survivre et devenir d√©veloppeur front-end dans le monde moderne?</a></li>
<li><a href="../fr478968/index.html">SpaceX lance Nanoracks pour cr√©er des stations orbitales de d√©bris spatiaux</a></li>
<li><a href="../fr478972/index.html">Gagnants du concours Miro Platform</a></li>
<li><a href="../fr478980/index.html">SDK Azure pour .NET: l'histoire d'un moteur de recherche de bogues difficile</a></li>
<li><a href="../fr478982/index.html">Comme je l'ai cru Ilona Mask. Et quand nous serons de nouveau sur la lune</a></li>
<li><a href="../fr478984/index.html">TimTam - un appareil de massage √† percussion de nouvelle g√©n√©ration avec une fonction de chauffage de pointe unique</a></li>
<li><a href="../fr478986/index.html">Yandex a lanc√© un vote populaire pour les jeux r√©tro. Finalistes de Retro Games Battle 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>