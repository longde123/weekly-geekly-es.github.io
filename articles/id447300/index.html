<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☝🏼 👰🏾 👨🏾‍💼 Membangun VirtualBox untuk Windows 💝 📻 🆕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Intro 
 Ini adalah fakta yang terkenal bagi banyak pengguna versi Windows dari VirtualBox (mulai sekarang, VB ; jangan dikacaukan dengan Visual Basic)...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membangun VirtualBox untuk Windows</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447300/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2f6/4c2/1ba/2f64c21bac5d7f0c050e7442bd08960e.png"></div><br><h4><img src="https://habrastorage.org/getpro/habr/post_images/1c4/b9c/64d/1c4b9c64d7dc3f83417ee1cbbd24820a.png">  Intro </h4><br>  Ini adalah fakta yang terkenal bagi banyak pengguna versi Windows dari VirtualBox (mulai sekarang, <em>VB</em> ; jangan dikacaukan dengan Visual Basic) yang dimulai dengan 4.3.14 pengembang menambahkan apa yang disebut "pengerasan" yang dirancang untuk mencegah suntikan berbahaya ke VB.  Meskipun niatnya baik, implementasi tersebut menyebabkan banyak konflik dengan produk yang benar-benar sah seperti antivirus, modul kriptografi dan bahkan beberapa pembaruan Windows itu sendiri, dan ketika konflik seperti itu terjadi VB berhenti bekerja.  Pengguna harus menunggu setidaknya satu bulan hingga versi VB baru dirilis dengan pengecualian yang tepat ditambahkan.  Kasus terburuk adalah, aplikasi atau pembaruan yang bertentangan harus dihapus, atau VB sendiri harus diturunkan ke versi 4.3.12 yang merupakan yang terbaru tanpa pengerasan.  Banyak permintaan untuk menambahkan daftar pengecualian yang dikendalikan pengguna, atau opsi untuk menonaktifkan pengerasan, semuanya tidak dijawab.  Satu-satunya balasan dari pengembang terdengar seperti "jika Anda sendiri tidak ingin membuatnya dari kode sumber".  Yah, sepertinya kita harus melakukannya. <br><br>  Meskipun instruksi pembuatan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dijelaskan</a> pada proyek resmi Wiki, petunjuk tersebut tidak lengkap dan agak ketinggalan zaman, sementara prosedur pembuatan sering gagal dengan pesan kesalahan yang tidak jelas.  Jadi ketika, pada akhirnya, saya membuatnya berfungsi saya pikir itu layak mendokumentasikan secara lengkap dalam artikel terpisah.  Instruksi ini sedang diperbarui dari waktu ke waktu, dan saat ini diadaptasi untuk membangun VB versi 6.0.4.  Namun, jika Anda memerlukan informasi tentang membangun versi VB atau perpustakaan tambahan yang lebih lama, Anda selalu bisa mendapatkannya dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">riwayat perubahan</a> . <br><br><a name="habracut"></a><h4><img src="https://habrastorage.org/getpro/habr/post_images/1c4/b9c/64d/1c4b9c64d7dc3f83417ee1cbbd24820a.png">  Daftar isi </h4><blockquote>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pernyataan Masalah</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kata Peringatan</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Membangun Persiapan Lingkungan</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aplikasi Instalasi quirks</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sentuhan Akhir</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Membangun VirtualBox</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Epilog</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Amandemen</a> <br></blockquote><br><a name="task"></a><h4><img src="https://habrastorage.org/getpro/habr/post_images/1c4/b9c/64d/1c4b9c64d7dc3f83417ee1cbbd24820a.png">  Pernyataan Masalah </h4><br>  Pada awalnya, saya ingin membuatnya tetap sederhana dengan hanya membangun kembali komponen biner dan menyalinnya di atas versi yang diinstal dari distribusi resmi.  Namun, itu terjadi jauh dari sederhana karena instalasi bergantung pada beberapa sistem API yang tidak jelas dan memerlukan instalasi driver dan registrasi komponen COM.  Saya bertanya-tanya apakah layak untuk mempelajari bagaimana semua ini bekerja dan untuk menulis naskah untuk mengotomatiskan tugas-tugas ini, tetapi setelah beberapa pertimbangan saya memutuskan untuk menjadi besar dan membangun distribusi penuh yang sedekat mungkin dengan yang resmi, hanya tanpa pengerasan. <br><br>  Saya harus mengatakan bahwa tugas ini terbukti sangat sulit, dan saya gagal memenuhinya hingga 100%.  Apa yang saya temui adalah Penambahan Tamu yang disediakan untuk Windows (32- dan 64-bit), OS / 2, Linux, dan beberapa sistem * NIX lainnya.  Komentar dalam Makefile yang sesuai menyebutkan bahwa mereka semua dibangun pada mesin jarak jauh yang berbeda, dan saya jelas tidak menantikan untuk mengelola pabrik pembuatan seperti itu.  Jadi solusi terakhir saya adalah membangun dari kode sumber semuanya, kecuali Penambahan, tetapi mengambil image ISO resmi dengan mereka dan hanya dimasukkan ke dalam distribusi saya apa adanya.  Saya belum memeriksa apakah Penambahan memiliki mekanisme pengerasan yang sama, tetapi bahkan jika ada, saya belum pernah mendengar keluhan tentang hal itu. <br><br><a name="warnings"></a><h4><img src="https://habrastorage.org/getpro/habr/post_images/1c4/b9c/64d/1c4b9c64d7dc3f83417ee1cbbd24820a.png">  Sebuah kata peringatan </h4><br><h5>  • Pertimbangan keamanan </h5><br>  Pengerasan tidak ditambahkan atas kemauan, itu adalah solusi untuk menutup kerentanan di VB.  Sayangnya, Oracle menolak untuk memberikan deskripsi rinci tentang masalah ini, meskipun sudah diperbaiki bertahun-tahun yang lalu.  Secara umum, ini ada hubungannya dengan mekanisme injeksi DLL di Windows yang, dalam kasus VB, dapat menyebabkan peningkatan hak istimewa yang tidak sah pada komputer host, dan ada eksploitasi yang berfungsi untuk kerentanan ini.  Jadi berhati-hatilah jika Anda memutuskan untuk menggunakan versi hardening-less. <br><br><h5>  • Penandatanganan driver </h5><br>  Dimulai dengan Vista, dalam versi Windows 64-bit pengguna tidak dapat memuat driver sewenang-wenang lagi.  Driver harus ditandatangani oleh sertifikat dengan rantai sertifikat silang yang naik ke CA root Microsoft (dan di Windows 10 dengan Boot Aman diaktifkan driver harus ditandatangani oleh Microsoft sendiri).  Sebelum Anda memulai perjalanan membangun VB, Anda perlu memutuskan bagaimana menyelesaikan masalah ini.  Anda dapat menghabiskan sejumlah uang dan membeli sertifikat Anda sendiri, atau mencoba menghubungi beberapa perusahaan pihak ketiga yang menyediakan layanan penandatanganan untuk proyek-proyek sumber terbuka (jika mereka setuju untuk menandatangani driver yang rentan), atau mengatur Windows Anda ke dalam mode pengujian yang memungkinkan memuat driver. ditandatangani dengan sertifikat uji yang dibuat secara lokal. <br><br>  Dalam artikel ini saya terutama akan menyiratkan skenario terakhir, tetapi saya akan menyebutkan bagaimana prosedur berubah jika Anda memiliki sertifikat komersial "dewasa". <br><br><a name="environment"></a><h4><img src="https://habrastorage.org/getpro/habr/post_images/1c4/b9c/64d/1c4b9c64d7dc3f83417ee1cbbd24820a.png">  Bangun persiapan lingkungan </h4><br>  Panduan resmi merekomendasikan untuk menggunakan Windows 7 hingga 10 sebagai sistem build.  Saya melakukan semua pekerjaan di Windows 7 SP1 x64, dan saya tidak berpikir bahwa versi OS sangat mempengaruhi prosedur.  Harap diingat bahwa mesin (nyata atau virtual) yang akan Anda gunakan untuk membangun VB harus memiliki koneksi Internet. <br><br>  Lingkungan build membutuhkan cukup banyak alat.  Jika beberapa program memiliki versi portabel saya lebih suka mengambil itu daripada menggunakan installer. <br><br>  Sekarang, program-program berikut ini hanya dapat diperoleh sebagai distribusi yang dapat diinstal (setidaknya, secara resmi).  Untuk Visual Studio dan SDK / WDK, penting untuk mengikuti urutan pemasangan seperti yang ditentukan di bawah ini.  Setelah Anda selesai menggunakannya, saya sangat merekomendasikan untuk menjalankan Pembaruan Windows dan mengambil pembaruan terbaru untuk semua produk Microsoft. <br><ul><li>  <b>Visual Studio 2010 Professional</b> <br>  Anda membutuhkan persis versi 2010, dan haruslah Profesional atau lebih tinggi.  Versi 2010 Express tidak memiliki ATL yang diperlukan untuk membangun COM API, yang digunakan oleh semua frontend untuk berkomunikasi.  Saya mencoba beralih ke Edisi Komunitas VS 2013 atau 2015 sehingga itu bukan persyaratan untuk memiliki program berbayar (yang bahkan tidak lagi dijual), tetapi sejauh ini gagal. </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Windows SDK v7.1</a></b> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Visual Studio 2010 SP1</a></b> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pembaruan Kompiler Visual C ++ 2010 SP1 untuk SDK 7.1</a></b> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kit Pengembangan Driver Windows (WDK) v7.1</a></b> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Windows SDK v8.1</a></b> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Activeperl</a></b> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ActivePython 2.7</a></b> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cygwin</a></b> </li></ul><br>  Program lain diunduh sebagai arsip portabel atau kode sumber: <br><ul><li>  <b><a href="">Qt 5.6.3</a></b> (kode sumber) </li><li>  <b>MinGW-w64 4.5.4</b> : <ul><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Versi 32-bit</a></b> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Versi 64-bit</a></b> </li></ul></li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SDL v1.2.x</a></b> (pustaka pengembangan untuk Visual C ++) </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">cURL</a></b> (kode sumber) </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">OpenSSL 1.1.1</a></b> (kode sumber) </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gSOAP 2.8.x</a></b> (direkomendasikan versi 2.8.41 atau lebih tinggi) </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">libvpx 1.7.0</a></b> (kode sumber; versi yang lebih baru tidak mendukung VS 2010) </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">libopus 1.3</a></b> (kode sumber) </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MiKTeX Portable</a></b> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NASM</a></b> <br>  Saya sarankan menggunakan versi portabel 64-bit. </li><li> <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">WiX</a></b> <br>  Saya sarankan menggunakan arsip portabel (dinamai seperti <code>wix311-binaries.zip</code> ). </li></ul><br>  Anda juga membutuhkan arsip-arsip berikut: <br><ul><li>  <b><a href="">DocBook XML DTD 4.5</a></b> </li><li>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lembar Gaya DocBook XSL 1.69.1</a></b> </li></ul><br><div class="spoiler">  <b class="spoiler_title">Untuk apa semua ini Anda inginkan?</b> <div class="spoiler_text">  Jika Anda tidak ingin membangun paket yang sama persis dengan saya, Anda mungkin dapat menyingkirkan beberapa alat yang disebutkan di atas.  Jadi di sini saya akan memberikan beberapa detail untuk tujuan mereka dalam proses pembangunan. <br><br><ul><li>  <b>SDK 8.1</b> <br>  Build aktual dilakukan menggunakan SDK 7.1, tetapi Anda membutuhkan program SignTool dari 8.1, karena yang dari 7.1 tidak dapat melakukan penandatanganan ganda SHA-1 / SHA-256.  Jika Anda memiliki SDK 8.1 yang diinstal di tempat lain, Anda dapat menyalin <code>signtool.exe</code> dengan semua dependensinya dari sana, dan tentukan path ke sana dalam file <code>LocalConfig.kmk</code> (lihat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bawah</a> ). </li><li>  <b>WiX</b> <br>  Ini adalah kerangka kerja untuk membuat paket MSI.  Meskipun distribusi VB final adalah EXE, itu berisi dua file MSI di dalamnya, jadi Anda perlu WiX untuk membangunnya.  Namun, jika Anda hanya ingin membangun file biner VB tanpa mengemasnya, Anda dapat melakukannya tanpa WiX. </li><li>  <b>Sdl</b> <br>  Pustaka ini digunakan untuk <code>VBoxSDL.exe</code> front-end tambahan sederhana yang dapat digunakan sebagai pengganti <code>VirtualBox.exe</code> .  Secara teori, jika Anda tidak memerlukan komponen itu, Anda harus dapat menjalankan build tanpa memiliki SDL, tetapi saya belum mencoba ini. </li><li>  <b>gSOAP</b> <br>  Perpustakaan ini digunakan untuk membangun <code>VBoxWebSrv.exe</code> , layanan manajemen jarak jauh VB.  Jika Anda tidak memiliki gSOAP, komponen ini akan dilompati selama pembuatan. </li><li>  <b>libvpx</b> , <b>libopus</b> <br>  Ini adalah codec video dan audio yang digunakan untuk merekam layar VM.  Jika Anda tidak memilikinya, build masih akan selesai dengan sukses, dan VB akan tetap memiliki semua opsi untuk pengambilan video, tetapi opsi ini akan diabaikan (meskipun animasi pengambilan akan diputar, tidak ada rekaman aktual yang akan disimpan) . </li><li>  <b>Cygwin</b> <br>  Diperlukan untuk membangun libvpx. </li><li>  <b>MiKTeX</b> <br>  MiKTeX digunakan untuk menyusun dokumentasi PDF ( <code>doc\UserManual.pdf</code> ).  Tanpa program ini, PDF akan secara diam-diam dihilangkan dari bangunan dan pengemasan. </li><li>  <b>NASM</b> <br>  Assembler digunakan saat membangun OpenSSL.  Anda dapat membangunnya juga tanpa menggunakan assembler, tetapi saya masih merekomendasikan untuk menggunakannya untuk menghasilkan kode yang lebih optimal. </li></ul></div></div><br>  Berikut ini adalah ringkasan dari semua alat dan pustaka yang saya gunakan, termasuk versi persisnya (jika mungkin) dan jalur instalasi yang saya pilih pada sistem build saya.  Penunjukan " <code>{x32|x64}</code> " digunakan untuk lokasi pemasangan versi 32-dan 64-bit yang terpisah. <table><tbody><tr><th>  Program / alat </th><th>  Versi </th><th>  Jalur pemasangan </th></tr><tr><td>  Studio visual </td><td>  2010 Profesional </td><td> <code>C:\Program Files (x86)\Microsoft Visual Studio 10.0\</code> </td> </tr><tr><td>  SDK </td><td>  7.1 </td><td> <code>C:\Program Files\Microsoft SDKs\Windows\v7.1\</code> </td> </tr><tr><td>  SDK </td><td>  8.1 </td><td> <code>C:\Programs\DevKits\8.1\</code> </td> </tr><tr><td>  Wdk </td><td>  7.1.0 </td><td> <code>C:\WinDDK\7600.16385.1\</code> </td> </tr><tr><td>  Activeperl </td><td>  5.26.1 Build 2601 x64 </td><td> <code>C:\Programs\Perl\</code> </td> </tr><tr><td>  ActivePython </td><td>  2.7.14.2717 x64 </td><td> <code>C:\Programs\Python\</code> </td> </tr><tr><td>  WiX </td><td>  3.11.1.2318 </td><td> <code>C:\Programs\WiX\</code> </td> </tr><tr><td>  Qt </td><td>  5.6.3 </td><td> <code>C:\Programs\Qt\5.6.3-{x32|x64}\</code> </td> </tr><tr><td>  MinGW-32 </td><td>  4.5.4 </td><td> <code>C:\Programs\mingw32\</code> </td> </tr><tr><td>  MinGW-64 </td><td>  4.5.4 </td><td> <code>C:\Programs\mingw64\</code> </td> </tr><tr><td>  Cygwin </td><td>  - </td><td> <code>C:\Programs\cygwin64\</code> </td> </tr><tr><td>  Sdl </td><td>  1.2.15 </td><td> <code>C:\Programs\SDL\{x32|x64}\</code> </td> </tr><tr><td>  CURL </td><td>  7.64.1 </td><td> <code>C:\Programs\curl\{x32|x64}\</code> </td> </tr><tr><td>  Openssl </td><td>  1.1.1b </td><td> <code>C:\Programs\OpenSSL\{x32|x64}\</code> </td> </tr><tr><td>  gSOAP </td><td>  2.8.82 </td><td> <code>C:\Programs\gSOAP\</code> </td> </tr><tr><td>  libvpx </td><td>  1.7.0 </td><td> <code>C:\Programs\libvpx\</code> </td> </tr><tr><td>  libopus </td><td>  1.3 </td><td> <code>C:\Programs\libopus\</code> </td> </tr><tr><td>  MiKTeX Portable </td><td>  2.9.6942 </td><td> <code>C:\Programs\MiKTeX\</code> </td> </tr><tr><td>  NASM </td><td>  2.14.02 x64 </td><td> <code>C:\Programs\nasm\</code> </td> </tr><tr><td>  DocBook XML DTD </td><td>  4.5 </td><td> <code>C:\Programs\DocBook\xml\</code> </td> </tr><tr><td>  Lembar Gaya DocBook XSL </td><td>  1.69.1 </td><td> <code>C:\Programs\DocBook\xsl\</code> </td> </tr></tbody></table><a name="environment-inst"></a><h4><img src="https://habrastorage.org/getpro/habr/post_images/1c4/b9c/64d/1c4b9c64d7dc3f83417ee1cbbd24820a.png">  Aplikasi Instalasi quirks </h4><br>  Di sini saya memberikan beberapa petunjuk tentang pemasangan beberapa alat yang disebutkan di atas di mana prosedurnya tidak jelas atau memerlukan tindakan tambahan. <br><br><h5>  • Windows SDK v7.1 </h5>  Instalasi SDK ini mungkin akan gagal karena ia menyertakan pustaka compiler dan runtime yang sudah ketinggalan zaman.  Setelah Anda menginstal VS 2010, ada versi yang lebih baru dari yang ada di sistem, sehingga yang lama gagal untuk menginstal, dan installer utama menganggapnya sebagai kesalahan kritis.  Untuk mengatasi ini, Anda harus menghapus centang pada kotak centang yang sesuai, atau sebelum instalasi SDK, hapus instalan paket-paket seperti <i>"Microsoft Visual C ++ 2010 &lt;arch&gt; Redistributable"</i> , <i>"Microsoft Visual C ++ 2010 &lt;arch&gt; Runtime"</i> , <i>"Microsoft Visual C ++ Compiler ... "</i>  Biarkan SDK menginstal versi yang lebih lama, dan kemudian jalankan Pembaruan Windows untuk mendapatkan versi terbaru yang tersedia. <br><br>  Ketika Anda menginstal SDK, pastikan Anda memeriksa sampel program (Windows Native Code Development -&gt; Samples): mereka berisi beberapa skrip yang digunakan oleh aturan VB build.  Tanpa mereka Anda tidak akan dapat membangun paket MSI. <br><br><h5>  • Windows SDK v8.1 </h5>  Anda hanya perlu menginstal komponen "Kit Pengembangan Perangkat Lunak Windows". <br><br><h5>  • WDK v7.1 </h5>  Anda hanya perlu menginstal komponen "Build Environments". <br><br><h5>  • Qt 5.6.3 </h5>  Dimulai dengan Qt 5.7.0, untuk membangunnya Anda memerlukan Visual Studio 2012 atau lebih baru, jadi kami terjebak dengan 5.6.x. <br>  Karena tidak ada build resmi untuk Visual Studio 2010, kami harus membuat Qt dari kode sumber sendiri. <br><br><ol><li>  Buka paket arsip kode sumber Qt ke dalam <code>C:\Programs\Qt\</code> dan ganti nama direktori <code>qt-everywhere-opensource-src-5.6.3</code> menjadi <code>5.6.3-src</code> . </li><li>  Di sampingnya buat direktori <code>build-x32</code> mana build akan berlangsung. </li><li>  Buka konsol dan jalankan perintah berikut untuk mempersiapkan lingkungan: <pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /d C:\Programs\Qt\build-x32 <span class="hljs-built_in"><span class="hljs-built_in">SET</span></span> QTVER=<span class="hljs-number"><span class="hljs-number">5</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span> "C:\Program Files\Microsoft SDKs\Windows\v7.<span class="hljs-number"><span class="hljs-number">1</span></span>\Bin\SetEnv.<span class="hljs-built_in"><span class="hljs-built_in">Cmd</span></span>" /Release /x86 /win7 <span class="hljs-built_in"><span class="hljs-built_in">COLOR</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SET</span></span> QTDIR=C:\Programs\Qt\<span class="hljs-variable"><span class="hljs-variable">%QTVER%</span></span>-x32 <span class="hljs-built_in"><span class="hljs-built_in">SET</span></span> <span class="hljs-built_in"><span class="hljs-built_in">PATH</span></span>=<span class="hljs-variable"><span class="hljs-variable">%QTDIR%</span></span>\bin;<span class="hljs-variable"><span class="hljs-variable">%PATH%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SET</span></span> QMAKESPEC=win32-msvc2010</code> </pre>  Perintah <code>color</code> adalah opsional, menghilangkan warna hijau yang ditetapkan oleh skrip <code>SetEnv.Cmd</code> . </li><li>  Sekarang kita perlu menjalankan skrip <code>configure.bat</code> dari <code>5.6.3-src</code> .  VB tidak menggunakan sebagian besar apa yang termasuk Qt, jadi kami dapat secara signifikan mengurangi waktu pembuatan dengan menonaktifkan berbagai komponen, tetapi harap perhatikan bahwa beberapa opsi sangat penting untuk VB.  Khususnya, saya telah menemukan bahwa: <ul><li>  OpenGL ES 2 tidak didukung (ketika membangun VB, kompiler gagal menemukan beberapa file header). </li><li>  Dukungan FreeType harus diaktifkan (jika tidak, plugin <code>qoffscreen</code> tidak akan dibangun, dan diperlukan untuk VB). </li></ul>  Ini adalah baris perintah lengkap yang telah saya akhiri dengan: <pre> <code class="dos hljs">..\<span class="hljs-number"><span class="hljs-number">5</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>-src\configure.bat -prefix c:\Programs\Qt\<span class="hljs-number"><span class="hljs-number">5</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>-x32 -mp -opensource -confirm-license -nomake tests -nomake examples -no-compile-examples -release -shared -pch -no-ltcg -accessibility -no-sql-sqlite -opengl desktop -no-openvg -no-nis -no-iconv -no-evdev -no-mtdev -no-inotify -no-eventfd -largefile -no-system-proxies -qt-zlib -qt-pcre -no-icu -qt-libpng -qt-libjpeg -qt-freetype -no-fontconfig -qt-harfbuzz -no-angle -incredibuild-xge -no-plugin-manifests -qmake -qreal double -rtti -strip -no-ssl -no-openssl -no-libproxy -no-dbus -no-audio-backend -no-wmf-backend -no-qml-debug -no-direct2d -directwrite -no-style-fusion -native-gestures -skip qt3d -skip qtactiveqt -skip qtandroidextras -skip qtcanvas3d -skip qtconnectivity -skip qtdeclarative -skip qtdoc -skip qtenginio -skip qtgraphicaleffects -skip qtlocation -skip qtmacextras -skip qtmultimedia -skip qtquickcontrols -skip qtquickcontrols2 -skip qtscript -skip qtsensors -skip qtserialbus -skip qtserialport -skip qtwayland -skip qtwebchannel -skip qtwebengine -skip qtwebsockets -skip qtwebview -skip qtx11extras -skip qtxmlpatterns</code> </pre> </li><li>  Jalur instalasi Qt yang ditentukan di sini (dalam opsi <code>-prefix</code> ) di- <code>-prefix</code> ke file kode sumber perantara oleh skrip configure, sehingga file biner juga akan mengingatnya.  Aplikasi berbasis Qt apa pun yang dibangun menggunakan pustaka ini akan mencari plugin yang diperlukan di jalur itu terlebih dahulu, dan hanya jika mereka tidak dapat ditemukan, ia akan menggunakan lokasinya sendiri saat ini.  Dalam kebanyakan kasus ini OK, tetapi misalkan pada komputer di mana VB kami diinstal, ada build lain dari Qt yang terletak di <code>c:\Programs\Qt\5.6.3-x32</code> , tetapi dikompilasi dengan opsi yang berbeda atau oleh kompiler yang berbeda?  Kemudian VB akan mencoba memuat plug-in dan crash (tidak kompatibel) tersebut. <br>  Ada dua cara yang mungkin untuk menghindari masalah ini.  Pertama adalah menambahkan ke instalasi file tambahan bernama <code>qt.conf</code> dengan teks berikut: <pre> <code class="plaintext hljs">[Paths] Plugins=.</code> </pre>  Yang lain adalah untuk memperbaiki jalur instalasi yang disimpan sebelum membangun Qt, sehingga menunjuk ke direktori aplikasi.  Saya memutuskan untuk mengikuti cara yang terakhir, saya tidak suka gagasan memiliki file tambahan dengan apa yang dimiliki distribusi Oracle VB.  Anda perlu membuka file <code>C:\Programs\Qt\build-x32\qtbase\src\corelib\global\qconfig.cpp</code> dibuat oleh skrip configure, temukan baris berikut: <pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> qt_configure_prefix_path_str [<span class="hljs-number"><span class="hljs-number">512</span></span> + <span class="hljs-number"><span class="hljs-number">12</span></span>] = <span class="hljs-string"><span class="hljs-string">"qt_prfxpath=c:/Programs/Qt/5.6.3-x32"</span></span>;</code> </pre>  dan ganti jalur dengan satu titik, sehingga garis ini tampak seperti ini: <pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> qt_configure_prefix_path_str [<span class="hljs-number"><span class="hljs-number">512</span></span> + <span class="hljs-number"><span class="hljs-number">12</span></span>] = <span class="hljs-string"><span class="hljs-string">"qt_prfxpath=."</span></span>;</code> </pre>  Perubahan ini hanya akan memengaruhi perilaku runtime VB.  Langkah instalasi Qt sendiri akan menggunakan path asli, karena sekarang disimpan di Makefiles yang tidak kita modifikasi. </li><li>  Selanjutnya, jalankan build menggunakan perintah <code>nmake</code> </li><li>  Dan instal pustaka yang dibangun menggunakan <code>nmake install</code> </li></ol><br>  Sekarang buka jendela konsol baru dan lakukan hal yang sama untuk versi 64-bit.  Anda harus mengganti "x32" dengan "x64" di semua jalur, dan perintah persiapan lingkungan akan terlihat seperti ini: <pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">md</span></span> C:\Programs\Qt\build-x64 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /d C:\Programs\Qt\build-x64 <span class="hljs-built_in"><span class="hljs-built_in">SET</span></span> QTVER=<span class="hljs-number"><span class="hljs-number">5</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span> "C:\Program Files\Microsoft SDKs\Windows\v7.<span class="hljs-number"><span class="hljs-number">1</span></span>\Bin\SetEnv.<span class="hljs-built_in"><span class="hljs-built_in">Cmd</span></span>" /Release /x64 /win7 <span class="hljs-built_in"><span class="hljs-built_in">COLOR</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SET</span></span> QTDIR=C:\Programs\Qt\<span class="hljs-variable"><span class="hljs-variable">%QTVER%</span></span>-x64 <span class="hljs-built_in"><span class="hljs-built_in">SET</span></span> <span class="hljs-built_in"><span class="hljs-built_in">PATH</span></span>=<span class="hljs-variable"><span class="hljs-variable">%QTDIR%</span></span>\bin;<span class="hljs-variable"><span class="hljs-variable">%PATH%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">SET</span></span> QMAKESPEC=win32-msvc2010</code> </pre> <br>  Setelah Anda selesai menginstal, direktori <code>build-x32</code> , <code>build-x64</code> , dan <code>5.6.3-src</code> dapat dihapus. <br><br><h5>  • MinGW </h5>  Cukup bongkar arsip 32- dan 64-bit ke direktori instalasi masing-masing. <br><br><h5>  • Cygwin </h5>  Selama instalasi Anda harus memilih paket yang <code>make</code> dan <code>yasm</code> . <br><br><h5>  • SDL </h5><ol><li>  Buka paket arsip SDL dua kali ke jalur yang terpisah: <code>C:\Programs\SDL\x32\</code> dan <code>C:\Programs\SDL\x64\</code> . </li><li>  Pindahkan semua isi subdirektori <code>C:\Programs\SDL\x64\lib\x64\</code> ke direktori induknya (yaitu, ke dalam <code>C:\Programs\SDL\x64\lib\</code> ), lalu hapus subdirektori <code>C:\Programs\SDL\x64\lib\x86</code> dan <code>x64</code> . </li><li>  Lakukan hal yang sama untuk versi 32-bit: pindahkan konten dari <code>C:\Programs\SDL\x32\lib\x86\</code> ke dalam <code>C:\Programs\SDL\x32\lib\</code> , lalu hapus <code>C:\Programs\SDL\x64\lib\x86</code> dan <code>x64</code> . </li></ol><br><h5>  • NASM </h5>  Buka paket arsip <code>nasm-2.14.02-win64.zip</code> ke <code>C:\Programs\</code> , lalu ganti nama direktori resultan <code>nasm-2.14.02</code> sebagai <code>nasm</code> . <br><br><h5>  • OpenSSL </h5><ol><li>  Buka paket arsip OpenSSL ke dalam <code>C:\Programs\OpenSSL\</code> dua kali, mengganti nama salinan direktori <code>openssl-1.1.1b</code> sebagai <code>openssl-1.1.1b-x32</code> dan <code>openssl-1.1.1b-x64</code> . </li><li>  Buka konsol, buat dan instal versi 32-bit dengan menjalankan: <pre> <code class="dos hljs">"C:\Program Files\Microsoft SDKs\Windows\v7.<span class="hljs-number"><span class="hljs-number">1</span></span>\Bin\SetEnv.<span class="hljs-built_in"><span class="hljs-built_in">Cmd</span></span>" /Release /x86 /win7 <span class="hljs-built_in"><span class="hljs-built_in">COLOR</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-built_in"><span class="hljs-built_in">PATH</span></span>=<span class="hljs-variable"><span class="hljs-variable">%PATH%</span></span>;C:\Programs\nasm <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /d C:\Programs\OpenSSL\openssl-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>b-x32\ perl Configure VC-WIN32 no-shared --prefix=C:\Programs\OpenSSL\x32 --openssldir=C:\Programs\OpenSSL\x32\ssl nmake nmake test nmake install</code> </pre>  Jika langkah configure menghasilkan peringatan menakutkan tentang kompiler yang hilang, harap abaikan pesan ini, itu berbohong dengan sangat keterlaluan. <br>  Jika Anda tidak ingin menggunakan NASM, lewati saja perintah dengan modifikasi <code>PATH</code> , dan untuk skrip <code>Configure</code> tentukan parameter tambahan <code>no-asm</code> . </li><li>  Sekarang buka jendela konsol baru dan lakukan hal yang sama untuk versi 64-bit: <pre> <code class="dos hljs">"C:\Program Files\Microsoft SDKs\Windows\v7.<span class="hljs-number"><span class="hljs-number">1</span></span>\Bin\SetEnv.<span class="hljs-built_in"><span class="hljs-built_in">Cmd</span></span>" /Release /x64 /win7 <span class="hljs-built_in"><span class="hljs-built_in">COLOR</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> <span class="hljs-built_in"><span class="hljs-built_in">PATH</span></span>=<span class="hljs-variable"><span class="hljs-variable">%PATH%</span></span>;C:\Programs\nasm <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /d C:\Programs\OpenSSL\openssl-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>b-x64\ perl Configure VC-WIN64A no-shared --prefix=C:\Programs\OpenSSL\x64 --openssldir=C:\Programs\OpenSSL\x64\ssl nmake nmake test nmake install</code> </pre>  Menonaktifkan NASM sama dengan 32-bit. </li><li>  Sekarang Anda dapat menghapus direktori <code>C:\Programs\OpenSSL\openssl-1.1.1b-x32</code> dan <code>openssl-1.1.1b-x64</code> . </li></ol><br><h5>  • CURL </h5><ol><li>  Bongkar arsip cURL ke dalam <code>C:\Programs\curl\</code> dan ganti nama subdirektori <code>curl-7.64.1</code> menjadi <code>curl-7.64.1-x32</code> . </li><li>  Buka file <code>C:\Programs\curl\curl-7.64.1-x32\winbuild\MakefileBuild.vc</code> di editor teks, dan cari blok kode berikut (di sekitar baris No.61-69): <pre> <code class="plaintext hljs">!IF "$(VC)"=="6" CC_NODEBUG = $(CC) /O2 /DNDEBUG CC_DEBUG = $(CC) /Od /Gm /Zi /D_DEBUG /GZ CFLAGS = /I. /I../lib /I../include /nologo /W4 /wd4127 /GX /DWIN32 /YX /FD /c /DBUILDING_LIBCURL !ELSE CC_NODEBUG = $(CC) /O2 /DNDEBUG CC_DEBUG = $(CC) /Od /D_DEBUG /RTC1 /Z7 /LDd CFLAGS = /I. /I ../lib /I../include /nologo /W4 /wd4127 /EHsc /DWIN32 /FD /c /DBUILDING_LIBCURL !ENDIF</code> </pre>  Setelah baris ini tambahkan arahan baru: <pre> <code class="plaintext hljs">CFLAGS = $(CFLAGS) /DCURL_DISABLE_LDAP</code> </pre>  Jika tidak, pembuatan VB akan gagal dengan kesalahan tautan. </li><li>  Sekarang buka file <code>C:\Programs\curl\curl-7.64.1-x32\winbuild\gen_resp_file.bat</code> , dan setelah baris pertama ( <code>@echo OFF</code> ) masukkan perintah ini: <pre> <code class="plaintext hljs">cd .</code> </pre>  Itu tidak melakukan apa-apa, kecuali mengatur ulang kode <code>ERRORLEVEL</code> .  Scriptnya sangat sederhana sehingga bisa diselesaikan tanpa menjalankan perintah apa pun yang akan mengubah kode kesalahan.  Jadi jika kode itu bukan nol sebelum memulai skrip, ia akan mempertahankan nilainya pada keluar skrip, dan <code>nmake</code> akan berpikir skrip yang mengembalikan kode kesalahan ini, dan menghentikan pembangunan dengan kegagalan.  Menambahkan <code>cd</code> palsu itu memperbaiki masalah. </li><li>  Sekarang buat salinan lengkap <code>curl-7.64.1-x32</code> dengan nama <code>curl-7.64.1-x64</code> . </li><li>  Buka konsol, buat versi 32-bit dan salin file yang kami butuhkan: <pre> <code class="dos hljs">"C:\Program Files\Microsoft SDKs\Windows\v7.<span class="hljs-number"><span class="hljs-number">1</span></span>\Bin\SetEnv.<span class="hljs-built_in"><span class="hljs-built_in">Cmd</span></span>" /Release /x86 /win7 <span class="hljs-built_in"><span class="hljs-built_in">COLOR</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /d C:\Programs\curl\curl-<span class="hljs-number"><span class="hljs-number">7</span></span>.<span class="hljs-number"><span class="hljs-number">64</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>-x32\winbuild <span class="hljs-built_in"><span class="hljs-built_in">md</span></span> C:\Programs\curl\x32 nmake /f Makefile.vc <span class="hljs-built_in"><span class="hljs-built_in">mode</span></span>=static WITH_SSL=static DEBUG=no MACHINE=x86 SSL_PATH=C:\Programs\OpenSSL\x32 ENABLE_SSPI=no ENABLE_WINSSL=no ENABLE_IDN=no <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span> ..\builds\libcurl-vc-x86-release-static-ssl-static-ipv6\lib\libcurl_a.lib ..\..\x32\libcurl.lib <span class="hljs-built_in"><span class="hljs-built_in">xcopy</span></span> /E ..\builds\libcurl-vc-x86-release-static-ssl-static-ipv6\include\curl ..\..\x32\include\curl\</code> </pre> </li><li>  Buka jendela konsol lain dan buat versi 64-bit: <pre> <code class="dos hljs">"C:\Program Files\Microsoft SDKs\Windows\v7.<span class="hljs-number"><span class="hljs-number">1</span></span>\Bin\SetEnv.<span class="hljs-built_in"><span class="hljs-built_in">Cmd</span></span>" /Release /x64 /win7 <span class="hljs-built_in"><span class="hljs-built_in">COLOR</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /d C:\Programs\curl\curl-<span class="hljs-number"><span class="hljs-number">7</span></span>.<span class="hljs-number"><span class="hljs-number">64</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>-x64\winbuild <span class="hljs-built_in"><span class="hljs-built_in">md</span></span> C:\Programs\curl\x64 nmake /f Makefile.vc <span class="hljs-built_in"><span class="hljs-built_in">mode</span></span>=static WITH_SSL=static DEBUG=no MACHINE=x64 SSL_PATH=C:\Programs\OpenSSL\x64 ENABLE_SSPI=no ENABLE_WINSSL=no ENABLE_IDN=no <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span> ..\builds\libcurl-vc-x64-release-static-ssl-static-ipv6\lib\libcurl_a.lib ..\..\x64\libcurl.lib <span class="hljs-built_in"><span class="hljs-built_in">xcopy</span></span> /E ..\builds\libcurl-vc-x64-release-static-ssl-static-ipv6\include\curl ..\..\x64\include\curl\ <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span> ..\builds\libcurl-vc-x64-release-static-ssl-static-ipv6\bin\curl.exe ..\..\x64\curl.exe</code> </pre>  Perhatikan bahwa selain apa yang kami lakukan untuk versi 32-bit, di sini kami juga menyalin file <code>curl.exe</code> .  Kami akan menggunakannya nanti, untuk mengunduh gambar tambahan tamu. </li><li>  Direktori <code>C:\Programs\curl\curl-7.64.1-x32</code> dan <code>curl-7.64.1-x64</code> tidak lagi diperlukan dan dapat dihapus. </li></ol><br><h5>  • libvpx </h5><ol><li>  Buka paket arsip libvpx ke <code>C:\Programs\libvpx-build\</code> . </li><li>  Luncurkan terminal Cygwin, pembangunan akan dilakukan di sana.  Platform target kami adalah Visual Studio 2010;  sistem build hanya mendukung sebagian saja: ia akan mencoba menjalankan build sebenarnya menggunakan <code>msbuild.exe</code> tetapi tidak berfungsi karena beberapa alasan;  Saya gagal mencari tahu mengapa.  Sebagai gantinya, kita cukup menjalankan Visual Studio itu sendiri dan menggunakannya untuk membangun proyek.  Untungnya itu dapat digunakan dari baris perintah, jadi tidak perlu meluncurkan IDE yang sebenarnya (walaupun Anda bisa jika mau, dalam hal ini Anda harus memodifikasi variabel <code>PATH</code> dan menambahkan path <code>C:\Programs\cygwin64\bin</code> untuk itu, atau dengan cara lain memungkinkan VS untuk menemukan <code>yasm.exe</code> terletak di sana dan diperlukan untuk membangun).  Jadi, untuk melakukan pembangunan kedua arsitektur, jalankan perintah berikut di terminal Cygwin: <pre> <code class="bash hljs">mkdir -p /cygdrive/c/Programs/libvpx-build/build32 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /cygdrive/c/Programs/libvpx-build/build32 ../libvpx-1.7.0/configure --target=x86-win32-vs10 --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-install-bins --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-examples --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-tools --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-docs --prefix=../../libvpx make <span class="hljs-string"><span class="hljs-string">"/cygdrive/c/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/devenv.com"</span></span> vpx.sln /Project vpx.vcxproj /Rebuild <span class="hljs-string"><span class="hljs-string">"Release|Win32"</span></span> make install mkdir -p /cygdrive/c/Programs/libvpx-build/build64 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /cygdrive/c/Programs/libvpx-build/build64 ../libvpx-1.7.0/configure --target=x86_64-win64-vs10 --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-install-bins --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-examples --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-tools --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-docs --prefix=../../libvpx make <span class="hljs-string"><span class="hljs-string">"/cygdrive/c/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/devenv.com"</span></span> vpx.sln /Project vpx.vcxproj /Rebuild <span class="hljs-string"><span class="hljs-string">"Release|x64"</span></span> make install</code> </pre> </li><li>  Tutup Cygwin, kita tidak akan membutuhkannya lagi.  Direktori <code>C:\Programs\libvpx-build</code> dapat dihapus. </li></ol><br><h5>  • libopus </h5><ol><li>  Buka paket arsip opus ke dalam <code>C:\Programs\libopus-build\</code> , buka subdirektori <code>opus-1.3\win32\VS2015</code> . </li><li>  Proyek ini dirancang untuk versi Visual Studio yang lebih baru, jadi kita perlu memodifikasinya untuk membuatnya dalam versi kami 2010. Anda dapat melakukannya baik menggunakan IDE, atau editor teks biasa.  Saya memilih yang terakhir.  Buka file <code>opus.vcxproj</code> dan lakukan hal berikut: <ol><li>  Temukan semua baris yang berisi teks <pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PlatformToolset</span></span></span><span class="hljs-tag">&gt;</span></span>v140<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PlatformToolset</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  dan ganti <code>v140</code> dengan <code>v100</code> .  Jika Anda menggunakan IDE, ini adalah opsi konfigurasi "Platrofm Toolset" yang terletak di halaman Configuration Properties -&gt; General.  Jangan lupa tentang penyeleksi Konfigurasi dan Platform di bagian atas dialog. </li><li>  Selanjutnya, cari blok kode ini: <pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemDefinitionGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ClCompile</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  dan tambahkan tag baru di dalamnya: <pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugInformationFormat</span></span></span><span class="hljs-tag">&gt;</span></span>ProgramDatabase<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DebugInformationFormat</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  Dalam IDE Anda dapat melakukannya dengan membuka halaman Configuration Properties -&gt; C / C ++ -&gt; Umum dan pengaturan "Format Informasi Debug" ke "ProgramDatabase (/ Zi)".  Sebenarnya, Anda dapat mengaturnya ke nilai lain yang valid, kami tidak memerlukan database debugging sama sekali, tetapi dengan nilai yang tidak valid proyek akan gagal dibangun. </li></ol></li><li>  Sekarang mari kita membangun versi Rilis untuk kedua platform (baik menggunakan VS IDE, atau baris perintah) dan salin <code>opus.lib</code> perpustakaan dan subdirektori <code>include\</code> ke jalur tujuan kami: <pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /d C:\Programs\libopus-build\opus-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>\win32\VS2015 <span class="hljs-built_in"><span class="hljs-built_in">md</span></span> C:\Programs\libopus\lib\x64 <span class="hljs-built_in"><span class="hljs-built_in">md</span></span> C:\Programs\libopus\lib\Win32 <span class="hljs-built_in"><span class="hljs-built_in">xcopy</span></span> /EC:\Programs\libopus-build\opus-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>\include C:\Programs\libopus\include\ "C:\Program Files (x86)\Microsoft Visual Studio <span class="hljs-number"><span class="hljs-number">10</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>\Common7\IDE\devenv.com" opus.sln /Project opus.vcxproj /Rebuild "Release|x64" <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span> x64\Release\opus.lib C:\Programs\libopus\lib\x64\ "C:\Program Files (x86)\Microsoft Visual Studio <span class="hljs-number"><span class="hljs-number">10</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>\Common7\IDE\devenv.com" opus.sln /Project opus.vcxproj /Rebuild "Release|Win32" <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span> Win32\Release\opus.lib C:\Programs\libopus\lib\Win32\</code> </pre> </li><li>  Direktori <code>C:\Programs\libopus-build</code> dapat dihapus. </li></ol><br><h5>  • gSOAP </h5>  Buka arsip, masuk ke subdirektori <code>gsoap-2.8\gsoap</code> dan bongkar isinya ke <code>C:\Programs\gSOAP\</code> .  OpenSSL 1.1.x membutuhkan gSOAP versi 2.8.41 atau lebih tinggi.  Jika karena alasan tertentu Anda ingin menggunakan versi yang lebih lama, Anda perlu menerapkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tambalan yang</a> dibuat oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mattias Ellert</a> .  Menerapkan tambalan dapat dilakukan secara manual (formatnya mudah: buka file yang disebutkan, hapus baris yang ditandai dengan minus, tambahkan baris yang ditandai dengan plus; sisanya adalah konteks), atau dapatkan alat <code>patch</code> porting untuk Windows dan gunakan. <br><br><h5>  • MiKTeX </h5><ol><li>  Buka paket arsip ke <code>C:\Programs\MiKTeX\</code> . </li><li>  Buka konsol dan pasang modul tambahan: <pre> <code class="dos hljs">"C:\Programs\MiKTeX\texmfs\install\miktex\bin\mpm.exe" --verbose --install=koma-script --install=ucs --install=tabulary --install=url --install=fancybox --install=fancyvrb --install=bera --install=charter --install=mptopdf</code> </pre> </li></ol><br><h5>  • DocBook </h5>  Untuk XML DTD Anda perlu membuat direktori dan membongkar isi arsip di sana.  Untuk XSL Stylesheets, semua konten sudah ada dalam satu direktori, jadi Anda perlu mengekstraknya dan hanya mengganti nama setelahnya. <br><br><a name="final-touches"></a><h4><img src="https://habrastorage.org/getpro/habr/post_images/1c4/b9c/64d/1c4b9c64d7dc3f83417ee1cbbd24820a.png">  Sentuhan terakhir </h4><br>  Lingkungan build hampir siap, hanya beberapa langkah lagi diperlukan.  Unduh arsip kode sumber VirtualBox (jika Anda belum melakukannya) dan bongkar ke tempat Anda ingin bekerja.  Saya memilih <code>C:\Devel\</code> untuk tujuan itu, meletakkan kode sumber yang sudah dibongkar dan mengganti subdirektori ke dalam <code>VirtualBox-src</code> . <br><br><h5>  • Menambahkan sertifikat </h5><br>  Jika Anda tidak memiliki sertifikat berbayar, saya sarankan Anda untuk setidaknya membuat yang ditandatangani sendiri: lebih mudah untuk membuat Windows memuat driver yang ditandatangani sendiri daripada yang tidak ditandatangani.  Untuk melakukannya, buka konsol dengan hak yang lebih tinggi, dan jalankan perintah berikut yang akan menambah dua sertifikat (SHA-1 dan SHA-256) dan mengimpornya ke penyimpanan pribadi Anda: <pre> <code class="dos hljs">"C:\Program Files\Microsoft SDKs\Windows\v7.<span class="hljs-number"><span class="hljs-number">1</span></span>\Bin\SetEnv.<span class="hljs-built_in"><span class="hljs-built_in">Cmd</span></span>" /Release /x64 /win7 <span class="hljs-built_in"><span class="hljs-built_in">COLOR</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> makecert.exe -a sha1 -r -pe -ss my -n "CN=Roga and Kopyta Ltd" C:\Devel\testcert_1.cer makecert.exe -a sha256 -r -pe -ss my -n "CN=Roga and Kopyta Ltd" C:\Devel\testcert_256.cer certmgr.exe -add C:\Devel\testcert_1.cer -s -r localMachine root certmgr.exe -add C:\Devel\testcert_256.cer -s -r localMachine root</code> </pre>  Anda dapat, tentu saja, memilih nama Anda sendiri untuk sertifikat daripada "Roga and Kopyta Ltd", dan jalur untuk menyimpan file.  Sekarang kita perlu mendapatkan cap jempol dari sertifikat yang dihasilkan.  Buka konsol manajemen Sertifikat (dengan menjalankan <code>certmgr.msc</code> ) dan navigasikan ke penyimpanan Pribadi.  Anda akan melihat dua sertifikat baru bernama "Roga and Kopyta Ltd" di sana.  Klik dua kali yang pertama;  dalam dialog yang muncul, buka tab <i>Detail</i> .  Bidang "Algoritme tanda tangan" berisi nama algoritme: sha256RSA atau sha1RSA.  Gulir ke bawah untuk bidang "Thumbprint" yang berisi urutan angka heksadesimal.  Salin nilai lengkap ini dan tulis di suatu tempat.  Lakukan hal yang sama untuk sertifikat kedua;  jangan lupa untuk menandai cap jempol mana yang untuk SHA-1, dan yang untuk SHA-256. <br><br><h5>  • Membangun xmllint </h5><br>  Salah satu langkah membangun akan membutuhkan program <code>xmllint</code> .  Saya tidak memasukkannya ke daftar persyaratan build karena sumbernya dibundel dalam arsip VirtualBox.  Tetapi Anda masih harus membangunnya sendiri, karena aturan VB build tidak melakukannya.  Saya memilih <code>C:\Programs\xmllint</code> sebagai direktori tujuan. <ol><li>  Salin direktori <code>C:\Devel\VirtualBox-src\src\libs\libxml2-2.9.4</code> ke dalam <code>C:\Programs\</code> untuk memastikan build-nya tidak memengaruhi VB dengan cara apa pun. </li><li>  Buka konsol dan jalankan perintah berikut: <pre> <code class="dos hljs">"C:\Program Files\Microsoft SDKs\Windows\v7.<span class="hljs-number"><span class="hljs-number">1</span></span>\Bin\SetEnv.<span class="hljs-built_in"><span class="hljs-built_in">Cmd</span></span>" /Release /x64 /win7 <span class="hljs-built_in"><span class="hljs-built_in">COLOR</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /d C:\Programs\libxml2-<span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">9</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>\win32 cscript.exe configure.js cruntime=/MT prefix=C:\Programs\xmllint iconv=no nmake /f Makefile.msvc nmake /f Makefile.msvc install</code> </pre> </li><li>  Hapus direktori <code>C:\Programs\libxml2-2.9.4</code> . </li></ol><br><h5>  • Modifikasi file VB </h5><br>  Sebelum memulai build, kita juga perlu membawa beberapa perubahan ke dalam kode sumber VB.  Kumpulan lengkapnya disajikan di sini sebagai file tambalan yang dapat diunduh yang dapat diterapkan baik secara manual, atau menggunakan alat <code>patch</code> (yang perlu Anda unduh secara terpisah): <br><br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>Vbox_build.patch</b></a> <br><br>  Jika tidak ada masalah menerapkan tambalan Anda dapat melompat ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">langkah berikutnya</a> .  Namun, jika Anda memiliki beberapa masalah dan memerlukan informasi lebih lanjut tentang perubahan tertentu, atau jika Anda hanya ingin memahami apa yang sedang diubah dan mengapa, Anda dipersilakan untuk melanjutkan dan membaca detail yang disediakan di bawah ini.  Harap perhatikan bahwa perubahan datang ke sini dalam urutan yang berbeda dibandingkan dengan file tambalan.  Path ke file ditentukan relatif ke direktori kode sumber VB <code>C:\Devel\VirtualBox-src</code> . <ol><li>  File <code>configure.vbs</code> : <ul><li>  Baris kode: <pre> <code class="vbscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Shell(DosSlashes(strPathVC &amp; <span class="hljs-string"><span class="hljs-string">"/bin/cl.exe"</span></span>), <span class="hljs-literal"><span class="hljs-literal">True</span></span>) &lt;&gt; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span></code> </pre>  diganti dengan: <pre> <code class="vbscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Shell(DosSlashes(strPathVC &amp; <span class="hljs-string"><span class="hljs-string">"/bin/cl.exe"</span></span>) &amp; <span class="hljs-string"><span class="hljs-string">" /?"</span></span>, <span class="hljs-literal"><span class="hljs-literal">True</span></span>) &lt;&gt; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span></code> </pre>  Baris ini melakukan pemeriksaan kompiler tetapi ia lupa bahwa <code>cl.exe</code> tanpa argumen mengembalikan kesalahan, dan karenanya dianggap sebagai kompiler yang tidak valid.  Menambahkan " <code>/?</code>  "Argumen membuatnya menampilkan bantuan dan keluar dengan kode 0 kesalahan. </li><li>  Sekarang mari kita beralih ke fungsi <code>CheckForMinGW32Sub</code> .  Seperti namanya, itu memeriksa validitas MinGW 32-bit.  Namun, ini dirancang untuk versi 3.3.3, sementara saya menggunakan 4.5.4 yang memiliki struktur file / direktori yang berbeda, jadi saya telah mengganti seluruh fungsi dengan kode berikut (yang pada dasarnya hanya salinan dari <code>CheckForMinGWw64Sub</code> disesuaikan untuk Varian 32-bit): <pre> <code class="vbscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> CheckForMinGW32Sub(strPathMingW32, strPathW32API) g_strSubOutput = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> strPathW32API = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> strPathW32API = strPathMingW32 LogPrint <span class="hljs-string"><span class="hljs-string">"trying: strPathMingW32="</span></span> &amp;strPathMingW32 &amp; <span class="hljs-string"><span class="hljs-string">" strPathW32API="</span></span> &amp; strPathW32API <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"bin/gcc.exe"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"bin/ld.exe"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"bin/objdump.exe"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"bin/dllwrap.exe"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"bin/dlltool.exe"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"bin/as.exe"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"include/bfd.h"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"lib32/libgcc_s.a"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"i686-w64-mingw32/lib/dllcrt1.o"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"i686-w64-mingw32/lib/dllcrt2.o"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"i686-w64-mingw32/lib/libmsvcrt.a"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"i686-w64-mingw32/lib/libmsvcr100.a"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"i686-w64-mingw32/include/_mingw.h"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"i686-w64-mingw32/include/stdint.h"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFileExists(strPathMingW32, <span class="hljs-string"><span class="hljs-string">"i686-w64-mingw32/include/windows.h"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Shell(DosSlashes(strPathMingW32 &amp; <span class="hljs-string"><span class="hljs-string">"/bin/gcc.exe"</span></span>) &amp; <span class="hljs-string"><span class="hljs-string">" -dumpversion"</span></span>, <span class="hljs-literal"><span class="hljs-literal">True</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">dim</span></span> offVer, iMajor, iMinor, iPatch, strVer <span class="hljs-comment"><span class="hljs-comment">' extract the version. strVer = Trim(Replace(Replace(g_strShellOutput, vbCr, ""), vbLf, "")) if (Mid(strVer, 2, 1) = ".") _ And (Mid(strVer, 4, 1) = ".") then iMajor = Int(Left(strVer, 1)) ' Is Int() the right thing here? I want atoi()!!! iMinor = Int(Mid(strVer, 3, 1)) iPatch = Int(Mid(strVer, 5)) else LogPrint "Malformed version: '" &amp; strVer &amp; "'" strVer = "" end if if strVer &lt;&gt; "" then if (iMajor = 4) And (iMinor &gt;= 4) then CheckForMinGW32Sub = True g_strSubOutput = strVer else LogPrint "MinGW32 version '" &amp; iMajor &amp; "." &amp; iMinor &amp; "." &amp; iPatch &amp; "' is not supported (or configure.vbs failed to parse it correctly)." end if else LogPrint "Couldn't locate the GCC version in the output!" end if else LogPrint "Failed to run gcc.exe!" end if end if end function</span></span></code> </pre> </li><li>  Fungsi kami berikutnya adalah <code>CheckForCurlSub</code> , dan blok kode yang akan diedit adalah: <pre> <code class="vbscript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> LogFileExists(strPathCurl, <span class="hljs-string"><span class="hljs-string">"include/curl/curl.h"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFindFile(strPathCurl, <span class="hljs-string"><span class="hljs-string">"libcurl.dll"</span></span>) &lt;&gt; <span class="hljs-string"><span class="hljs-string">""</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFindFile(strPathCurl, <span class="hljs-string"><span class="hljs-string">"libcurl.lib"</span></span>) &lt;&gt; <span class="hljs-string"><span class="hljs-string">""</span></span> _</code> </pre>  Ia memeriksa validitas libcurl, tetapi membutuhkan versi yang terhubung secara dinamis dan gagal jika tidak ada file DLL yang dapat ditemukan.  Kami menggunakan versi yang terhubung secara statis, sehingga pemeriksaan untuk DLL sayangnya harus pergi dan meninggalkan kami dengan: <pre> <code class="vbscript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> LogFileExists(strPathCurl, <span class="hljs-string"><span class="hljs-string">"include/curl/curl.h"</span></span>) _ <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> LogFindFile(strPathCurl, <span class="hljs-string"><span class="hljs-string">"libcurl.lib"</span></span>) &lt;&gt; <span class="hljs-string"><span class="hljs-string">""</span></span> _</code> </pre> </li><li>  Sekarang masuk ke fungsi <code>CheckForPython</code> mana variabel <code>VBOX_BLD_PYTHON</code> dihasilkan: <pre> <code class="vbscript hljs"> CfgPrint <span class="hljs-string"><span class="hljs-string">"VBOX_BLD_PYTHON := "</span></span> &amp; strPathPython &amp; <span class="hljs-string"><span class="hljs-string">"\python.exe"</span></span></code> </pre>  Garis miring terbalik di depan <code>python.exe</code> harus diganti dengan yang maju: <code>"/python.exe"</code> (tanpa perbaikan ini, beberapa pemeriksaan selama prosedur pembangunan akan gagal; Saya belum melihat efek buruk lainnya, tapi lebih cantik tanpa pesan kegagalan, dan dalam hal apapun lebih baik aman daripada menyesal). </li><li>  Versi Windows dari skrip configure tidak mendukung libvpx dan libopus, jadi saya telah menambahkannya sendiri.  Tentu saja, cara paling sederhana adalah hanya dengan jalur hardcode ke perpustakaan, tapi saya lebih suka mengimplementasikannya seperti semua komponen lainnya, dengan melewati jalur di baris perintah, dan memeriksa validitas yang tepat.  Kode utama untuk ini terdiri dari dua fungsi pemeriksaan: <pre> <code class="vbscript hljs"><span class="hljs-comment"><span class="hljs-comment">'' ' Checks for libvpx sub CheckForVpx(strOptVpx) dim strPathVpx, str strVpx = "libvpx" PrintHdr strVpx if strOptVpx = "" then MsgError "Invalid path specified!" exit sub end if if g_strTargetArch = "amd64" then strVsBuildArch = "x64" else strVsBuildArch = "Win32" end if strLibPathVpx = "lib/" &amp; strVsBuildArch &amp; "/vpxmd.lib" strPathVpx = "" if LogFileExists(strOptVpx, "include/vpx/vpx_encoder.h") _ And LogFileExists(strOptVpx, strLibPathVpx) _ then strPathVpx = UnixSlashes(PathAbs(strOptVpx)) CfgPrint "SDK_VBOX_VPX_INCS := " &amp; strPathVpx &amp; "/include" CfgPrint "SDK_VBOX_VPX_LIBS := " &amp; strPathVpx &amp; "/" &amp; strLibPathVpx else MsgError "Can't locate " &amp; strVpx &amp; ". " _ &amp; "Please consult the configure.log and the build requirements." exit sub end if PrintResult strVpx, strPathVpx end sub '' ' Checks for libopus sub CheckForOpus(strOptOpus) dim strPathOpus, str strOpus = "libopus" PrintHdr strOpus if strOptOpus = "" then MsgError "Invalid path specified!" exit sub end if if g_strTargetArch = "amd64" then strVsBuildArch = "x64" else strVsBuildArch = "Win32" end if strLibPathOpus = "lib/" &amp; strVsBuildArch &amp; "/opus.lib" strPathOpus = "" if LogFileExists(strOptOpus, "include/opus.h") _ And LogFileExists(strOptOpus, strLibPathOpus) _ then strPathOpus = UnixSlashes(PathAbs(strOptOpus)) CfgPrint "SDK_VBOX_OPUS_INCS := " &amp; strPathOpus &amp; "/include" CfgPrint "SDK_VBOX_OPUS_LIBS := " &amp; strPathOpus &amp; "/" &amp; strLibPathOpus else MsgError "Can't locate " &amp; strOpus &amp; ". " _ &amp; "Please consult the configure.log and the build requirements." exit sub end if PrintResult strOpus, strPathOpus end sub</span></span></code> </pre>  Penggunaan fungsi digunakan untuk mencetak daftar argumen baris perintah;  tambahkan dua argumen baru kami di sana: <pre> <code class="vbscript hljs"> Print <span class="hljs-string"><span class="hljs-string">" --with-libvpx=PATH "</span></span> Print <span class="hljs-string"><span class="hljs-string">" --with-libopus=PATH "</span></span></code> </pre>  Di awal fungsi, banyak variabel didefinisikan untuk menyimpan path ke komponen, kita perlu menambahkan dua yang baru di sana: <pre> <code class="vbscript hljs"> strOptVpx = <span class="hljs-string"><span class="hljs-string">""</span></span> strOptOpus = <span class="hljs-string"><span class="hljs-string">""</span></span></code> </pre>  Sedikit lebih jauh ke bawah blok <code>select-case</code> yang memproses argumen dan mengisi variabel;  menambah kontribusi kami: <pre> <code class="vbscript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"--with-libvpx"</span></span> strOptVpx = strPath <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"--with-libopus"</span></span> strOptOpus = strPath</code> </pre>  Dan, akhirnya, hampir di bagian paling akhir file ada rantai semua panggilan fungsi cek, ini adalah tempat kami menambahkan panggilan dari dua fungsi baru kami: <pre> <code class="vbscript hljs"> CheckForVpx strOptVpx CheckForOpus strOptOpus</code> </pre> </li></ul></li><li>  File selanjutnya adalah <code>src\VBox\Runtime\Makefile.kmk</code> .  Kita perlu menemukan definisi variabel <code>VBoxRT_LIBS.win</code> dan <code>VBoxRT-x86_LIBS.win</code> , dan menambahkan dua pustaka baru untuk mereka, <code>crypt32.lib</code> dan <code>bcrypt.lib</code> .  Jadi kode berikut: <pre> <code class="plaintext hljs">VBoxRT_LIBS.win = \ $(PATH_SDK_$(VBOX_WINDDK)_LIB)/vccomsup.lib \ $(PATH_SDK_$(VBOX_WINDDK)_LIB)/wbemuuid.lib \ $(PATH_TOOL_$(VBOX_VCC_TOOL)_LIB)/delayimp.lib</code> </pre>  berubah menjadi: <pre> <code class="plaintext hljs">VBoxRT_LIBS.win = \ $(PATH_SDK_$(VBOX_WINDDK)_LIB)/vccomsup.lib \ $(PATH_SDK_$(VBOX_WINDDK)_LIB)/wbemuuid.lib \ $(PATH_TOOL_$(VBOX_VCC_TOOL)_LIB)/delayimp.lib \ $(PATH_SDK_$(VBOX_WINPSDK)_LIB)/crypt32.lib \ $(PATH_SDK_$(VBOX_WINPSDK)_LIB)/bcrypt.lib</code> </pre>  (jangan lewatkan backslash yang tertinggal setelah <code>delayimp.lib</code> !);  dan, masing-masing, blok ini: <pre> <code class="plaintext hljs">VBoxRT-x86_LIBS.win = \ $(PATH_SDK_$(VBOX_WINDDK)_LIB.x86)/vccomsup.lib \ $(PATH_SDK_$(VBOX_WINDDK)_LIB.x86)/wbemuuid.lib \ $(PATH_TOOL_$(VBOX_VCC_TOOL_STEM)X86_LIB)/delayimp.lib</code> </pre>  menjadi: <pre> <code class="plaintext hljs">VBoxRT-x86_LIBS.win = \ $(PATH_SDK_$(VBOX_WINDDK)_LIB.x86)/vccomsup.lib \ $(PATH_SDK_$(VBOX_WINDDK)_LIB.x86)/wbemuuid.lib \ $(PATH_TOOL_$(VBOX_VCC_TOOL_STEM)X86_LIB)/delayimp.lib \ $(PATH_SDK_$(VBOX_WINPSDK)_LIB.x86)/crypt32.lib \ $(PATH_SDK_$(VBOX_WINPSDK)_LIB.x86)/bcrypt.lib</code> </pre>  Perubahan ini diperlukan untuk menautkan <code>VBoxRT.dll</code> sukses.  Saya tidak 100% yakin mengapa demikian, versi Oracle tidak memiliki ketergantungan waktu-muat pada <code>crypt32.dll</code> , ini dimuat dalam run-time, jadi file LIB tidak diperlukan.  Namun tanpa itu linker tidak dapat menemukan beberapa fungsi dan gagal.  Saya menduga itu mungkin terkait dengan opsi build OpenSSL, tapi saya belum memeriksanya, menambahkan ketergantungan lebih mudah.  Dan ketergantungan kedua, <code>bcrypt.dll</code> , adalah persyaratan untuk OpenSSL 1.1.1 yang baru. </li><li>  Jika Anda memiliki gSOAP versi 2.8.79 atau lebih tinggi, Anda harus mengedit file <code>src\VBox\Runtime\r3\win\VBoxRT-openssl-1.1plus.def</code> dan tambahkan baris berikut ke daftar ekspor: <pre> <code class="plaintext hljs"> OpenSSL_version_num DH_generate_parameters_ex DH_new ASN1_STRING_get0_data</code> </pre>  Daftar ini mendefinisikan fungsi mana yang diekspor oleh perpustakaan <code>VBoxRT.dll</code> (yang berisi OpenSSL di dalamnya).  Ketika alat <code>VBoxWebSrv.exe</code> sedang ditautkan, tergantung pada versi gSOAP, mungkin memerlukan fungsi OpenSSL tambahan.  Karena mereka tidak ada dalam daftar ekspor, penghubung menambahkan OpenSSL itu sendiri dan segera mengeluh tentang banyak konflik antara OpenSSL eksternal ini dan salinannya sendiri sudah dibangun ke dalam <code>VBoxRT</code> .  Menambahkan ekspor tersebut memperbaiki masalah. </li><li>  Seperti yang telah saya sebutkan di awal, saya tidak membangun penambahan tamu, tetapi saya perlu memiliki image ISO sebagai bagian dari distribusi.  Aturan pembuatan dirancang untuk skenario ini, tetapi mereka berharap bahwa gambar ISO siap secara ajaib akan muncul di tempat yang tepat pada waktu yang tepat.  Saya telah menambahkan sihir ini ke file <code>src\VBox\Makefile.kmk</code> .  Cari kode berikut: <pre> <code class="plaintext hljs"> ifdef VBOX_WITH_ADDITIONS include $(PATH_SUB_CURRENT)/Additions/Makefile.kmk endif</code> </pre>  dan tepat di bawahnya berlaku aturan untuk mengunduh otomatis file gambar: <pre> <code class="plaintext hljs"> ifndef VBOX_WITHOUT_ADDITIONS_ISO $(VBOX_PATH_ADDITIONS_ISO)/VBoxGuestAdditions.iso: $(QUIET)$(MKDIR) -p $(@D) $(VBOX_RETRY) $(TOOL_CURL_FETCH) http://download.virtualbox.org/virtualbox/$(VBOX_VERSION_STRING_RAW)/VBoxGuestAdditions_$(VBOX_VERSION_STRING_RAW).iso -o $@ endif</code> </pre>  Jika Anda mengedit file secara manual alih-alih menerapkan tambalan, harap perhatikan bahwa perintah aturan harus dimulai dengan karakter tabulasi. </li><li>  Sebelum versi 6.0, dokumentasi adalah salah satu subsistem yang berhasil dibangun tanpa perubahan.  Saya tidak tahu apa yang salah dengan itu, tapi itu didesain ulang sedemikian rupa sehingga tidak lagi berfungsi pada sistem build saya.  Saya tidak tahu bagaimana Oracle sendiri membangun dokumentasi (mungkin pada sistem * NIX), tetapi bagi saya aturan build terus kehilangan garis miring, atau menambahkan kelebihannya, dan akibatnya mereka gagal menemukan file target karena ketidakcocokan dalam file katalog.  Saya akhirnya berhasil menggabungkan beberapa perubahan yang memungkinkan untuk membangun dokumentasi tanpa kesalahan.  Pertama-tama, salah satu direktori target tidak ada, sehingga beberapa file perantara tidak dapat dibuat.  Masalah ini diperbaiki pada file <code>doc\manual\Makefile.kmk</code> , di dalam blok kode berikut: <pre> <code class="plaintext hljs">define def_vbox_refentry_to_user_sect1 $$(VBOX_PATH_MANUAL_OUTBASE)/$(1)/user_$(2): $(3) \ $$(VBOX_PATH_MANUAL_SRC)/docbook-refentry-to-manual-sect1.xsl \ $$(VBOX_XML_CATALOG) $$(VBOX_XML_CATALOG_DOCBOOK) $$(VBOX_XML_CATALOG_MANUAL) \ $$(VBOX_VERSION_STAMP) | $$(dir $$@) $$(call MSG_TOOL,xsltproc $$(notdir $$(filter %.xsl,$$^)),,$$(filter %.xml,$$^),$$@) $$(QUIET)$$(RM) -f "$$@" $$(QUIET)$$(call VBOX_XSLTPROC_WITH_CAT) --output $$@ $$(VBOX_PATH_MANUAL_SRC)/docbook-refentry-to-manual-sect1.xsl $$&lt; endef</code> </pre>  Tepat setelah <code>$$(RM)</code> saya telah menambahkan perintah untuk membuat direktori yang hilang: <pre> <code class="plaintext hljs"> $$(QUIET)$$(MKDIR) -p "$$(@D)"</code> </pre> <br>  Sedangkan untuk garis miring, perbaikannya terletak di file <code>doc\manual\Config.kmk</code> .  Saya tidak dapat menemukan solusi "normal" untuk itu, tetapi ada solusi yang cukup baik untuk tujuan praktis, yang menyiratkan menduplikasi aturan substitusi jalur untuk jalur yang salah.  Pertama, di bawah garis: <pre> <code class="plaintext hljs"> VBOX_FILE_URL_MAYBE_SLASH = $(if $(eq $(KBUILD_HOST),win),/,)</code> </pre> I've created two new variables which basically contain the same paths as their origins, but with triple slash after the disk letter instead of a single slash: <pre> <code class="plaintext hljs"> VBOX_PATH_MANUAL_SRC_SLASHED = $(subst :/,:///,$(VBOX_PATH_MANUAL_SRC)) VBOX_PATH_MANUAL_OUTBASE_SLASHED = $(subst :/,:///,$(VBOX_PATH_MANUAL_OUTBASE))</code> </pre> A little bit below that, there is a rule for creating the catalog file: <pre> <code class="plaintext hljs"> $(VBOX_XML_CATALOG): $(MAKEFILE_CURRENT) | $$(dir $$@) $(call MSG_L1,Creating catalog $@) $(QUIET)$(APPEND) -tn "$@" \ '&lt;?xml version="1.0"?&gt;' \ '&lt;!DOCTYPE catalog PUBLIC "-//OASIS//DTD Entity Resolution XML Catalog V1.0//EN" "http://www.oasis-open.org/committees/entity/release/1.0/catalog.dtd"&gt;' \ '&lt;catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog"&gt;' \ ' &lt;delegatePublic publicIdStartString="-//OASIS/ENTITIES DocBook XML" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_DOCBOOK)"/&gt;' \ ' &lt;delegatePublic publicIdStartString="-//OASIS/DTD DocBook XML" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_DOCBOOK)"/&gt;' \ ' &lt;delegateSystem systemIdStartString="http://www.oasis-open.org/docbook/" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_DOCBOOK)"/&gt;' \ ' &lt;delegateURI uriStartString="http://www.oasis-open.org/docbook/" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_DOCBOOK)"/&gt;' \ ' &lt;delegateSystem systemIdStartString="$(VBOX_PATH_MANUAL_SRC)" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_MANUAL)"/&gt;' \ ' &lt;delegateURI uriStartString="$(VBOX_PATH_MANUAL_SRC)" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_MANUAL)"/&gt;' \ ' &lt;delegateURI uriStartString="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_PATH_MANUAL_SRC)" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_MANUAL)"/&gt;' \ ' &lt;delegateURI uriStartString="$(VBOX_PATH_MANUAL_OUTBASE)" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_MANUAL)"/&gt;' \ '&lt;/catalog&gt;'</code> </pre> For each line which contains the variable <code>VBOX_PATH_MANUAL_SRC</code> or <code>VBOX_PATH_MANUAL_OUTBASE</code> (except for the line with the <code>file://</code> prefix), I've appended the copy of the whole line, but with the variable replaced with its triple-slash counterpart. The result looks like this: <pre> <code class="plaintext hljs"> $(VBOX_XML_CATALOG): $(MAKEFILE_CURRENT) | $$(dir $$@) $(call MSG_L1,Creating catalog $@) $(QUIET)$(APPEND) -tn "$@" \ '&lt;?xml version="1.0"?&gt;' \ '&lt;!DOCTYPE catalog PUBLIC "-//OASIS//DTD Entity Resolution XML Catalog V1.0//EN" "http://www.oasis-open.org/committees/entity/release/1.0/catalog.dtd"&gt;' \ '&lt;catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog"&gt;' \ ' &lt;delegatePublic publicIdStartString="-//OASIS/ENTITIES DocBook XML" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_DOCBOOK)"/&gt;' \ ' &lt;delegatePublic publicIdStartString="-//OASIS/DTD DocBook XML" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_DOCBOOK)"/&gt;' \ ' &lt;delegateSystem systemIdStartString="http://www.oasis-open.org/docbook/" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_DOCBOOK)"/&gt;' \ ' &lt;delegateURI uriStartString="http://www.oasis-open.org/docbook/" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_DOCBOOK)"/&gt;' \ ' &lt;delegateSystem systemIdStartString="$(VBOX_PATH_MANUAL_SRC)" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_MANUAL)"/&gt;' \ ' &lt;delegateSystem systemIdStartString="$(VBOX_PATH_MANUAL_SRC_SLASHED)" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_MANUAL)"/&gt;' \ ' &lt;delegateURI uriStartString="$(VBOX_PATH_MANUAL_SRC)" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_MANUAL)"/&gt;' \ ' &lt;delegateURI uriStartString="$(VBOX_PATH_MANUAL_SRC_SLASHED)" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_MANUAL)"/&gt;' \ ' &lt;delegateURI uriStartString="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_PATH_MANUAL_SRC)" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_MANUAL)"/&gt;' \ ' &lt;delegateURI uriStartString="$(VBOX_PATH_MANUAL_OUTBASE)" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_MANUAL)"/&gt;' \ ' &lt;delegateURI uriStartString="$(VBOX_PATH_MANUAL_OUTBASE_SLASHED)" catalog="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_XML_CATALOG_MANUAL)"/&gt;' \ '&lt;/catalog&gt;'</code> </pre> Even further down, there is another rule for creating an auxiliary catalog file; the starting line is: <pre> <code class="plaintext hljs"> $(VBOX_XML_CATALOG_MANUAL): $(MAKEFILE_CURRENT) | $$(dir $$@)</code> </pre> Here I'm doing the same operation as above. In addition, in the beginning of the generated file there are several lines defining the entries in the <code>common/</code> subdirectory: <pre> <code class="plaintext hljs"> ' &lt;system systemId="$(VBOX_PATH_MANUAL_SRC)/common/oracle-accessibility-en.xml" uri="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_PATH_MANUAL_SRC)/en_US/oracle-accessibility-en.xml"/&gt;' \ ' &lt;system systemId="$(VBOX_PATH_MANUAL_SRC)/common/oracle-support-en.xml" uri="file://$(VBOX_FILE_URL_MAYBE_SLASH)$(VBOX_PATH_MANUAL_SRC)/en_US/oracle-support-en.xml"/&gt;' \</code> </pre> With these we have the opposite problem: triple slash after the <code>file</code> is replaced with a single slash. I worked this around by getting rid of the <code>file</code> protocol altogether and replacing those URIs with direct file system paths in the target address (the <code>uri</code> attribute). The result for these lines looks like this (including the aforementioned fix): <pre> <code class="plaintext hljs"> ' &lt;system systemId="$(VBOX_PATH_MANUAL_SRC)/common/oracle-accessibility-en.xml" uri="$(VBOX_PATH_MANUAL_SRC)/en_US/oracle-accessibility-en.xml"/&gt;' \ ' &lt;system systemId="$(VBOX_PATH_MANUAL_SRC_SLASHED)/common/oracle-accessibility-en.xml" uri="$(VBOX_PATH_MANUAL_SRC)/en_US/oracle-accessibility-en.xml"/&gt;' \ ' &lt;system systemId="$(VBOX_PATH_MANUAL_SRC)/common/oracle-support-en.xml" uri="$(VBOX_PATH_MANUAL_SRC)/en_US/oracle-support-en.xml"/&gt;' \ ' &lt;system systemId="$(VBOX_PATH_MANUAL_SRC_SLASHED)/common/oracle-support-en.xml" uri="$(VBOX_PATH_MANUAL_SRC)/en_US/oracle-support-en.xml"/&gt;' \</code> </pre> </li><li> When VB is built with signing, most of its binaries receive the integrity check flag (the linker option <code>/IntegrityCheck</code> ) which forces Windows to check digital signatures and forbids launching applications which are signed incorrectly. If you have a valid paid certificate that's not a problem; however with a self-signed certificate VB will refuse to start, even if Windows is booted in the test mode. I've modified the file <code>Config.kmk</code> in such a way that this flag is only added when you have a full-grown certificate (the criterion of that is presence of a cross-certificate in <code>LocalConfig.kmk</code> ; see <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">below</a> ). The changes look like this: <ul><li> A new variable <code>VBOX_INTEGRITY_CHECK</code> is added, which contains the desired value of the option: <pre> <code class="plaintext hljs">if defined(VBOX_SIGNING_MODE) &amp;&amp; defined(VBOX_CROSS_CERTIFICATE_FILE) VBOX_INTEGRITY_CHECK := /IntegrityCheck else VBOX_INTEGRITY_CHECK := /IntegrityCheck:NO endif</code> </pre> </li><li> Below that there is the <code>editbin</code> call: <pre> <code class="plaintext hljs"> $(VBOX_VCC_EDITBIN) /LargeAddressAware /DynamicBase /NxCompat /Release /IntegrityCheck \ /Version:$(VBOX_VERSION_MAJOR)0$(VBOX_VERSION_MINOR).$(VBOX_VERSION_BUILD) \ "$@"</code> </pre> Here I've replaced the unconditional <code>/IntegrityCheck</code> with the new variable <code>$(VBOX_INTEGRITY_CHECK)</code> . </li><li> Next, look for the blocks of the following kinds: <pre> <code class="plaintext hljs">ifdef VBOX_SIGNING_MODE TEMPLATE_XXXXXX_LDFLAGS += -IntegrityCheck endif</code> </pre> or <pre> <code class="plaintext hljs">if defined(VBOX_SIGNING_MODE) &amp;&amp; defined(VBOX_WITH_HARDENING) TEMPLATE_XXXXXX_LDFLAGS += -IntegrityCheck endif</code> </pre> where « <code>XXXXXX</code> » stands for various component names. There are 6 such blocks in total, 3 of each kind. Here I've modified the condition by adding a check for cross-certificate. The first line then turns into, respectively: <pre> <code class="plaintext hljs">if defined(VBOX_SIGNING_MODE) &amp;&amp; defined(VBOX_CROSS_CERTIFICATE_FILE)</code> </pre> or <pre> <code class="plaintext hljs">if defined(VBOX_SIGNING_MODE) &amp;&amp; defined(VBOX_CROSS_CERTIFICATE_FILE) &amp;&amp; defined(VBOX_WITH_HARDENING)</code> </pre> </li></ul></li><li> Two more files modified by me do not take immediate part in building of VB: <code>src\VBox\Installer\win\Scripts\PackDriversForSubmission.cmd</code> and <code>UnpackBlessedDrivers.cmd</code> . These auxiliary scripts can be used if you intend to send the drivers into Microsoft for Windows 10 signing. The first script prepares a CAB archive for sending; the second one unpacks the resultant ZIP archive with the signed drivers and verifies the signatures. In the packing script all I did was just fixing several typos. In the unpacking script I added ability to specify path to the <code>signtool</code> program, and got rid of the <code>unzip</code> tool by replacing it with a small Perl script. The signing procedure is described below. If you don't plan to get the Microsoft signature you can simply ignore all these changes in the scripts. </li></ol><br><a name="final-touches-localconfig"></a><h5> • VB build configuration file </h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang kita perlu membuat file </font></font><code>LocalConfig.kmk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di direktori sumber VB, dan menulis di sana semua path dan membangun parameter. </font><font style="vertical-align: inherit;">Anda dapat menggunakan teks berikut sebagai templat:</font></font><pre> <code class="plaintext hljs">VBOX_WITH_HARDENING := VBOX_PATH_WIX := C:\Programs\WiX VBOX_GSOAP_INSTALLED := 1 VBOX_PATH_GSOAP := C:\Programs\gSOAP VBOX_WITH_COMBINED_PACKAGE := 1 VBOX_WITH_QT_PAYLOAD := 1 VBOX_WITH_QTGUI_V5 := 1 VBOX_SIGNING_MODE := release VBOX_CERTIFICATE_SUBJECT_NAME := Roga and Kopyta Ltd VBOX_CERTIFICATE_FINGERPRINT := XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX VBOX_CERTIFICATE_SHA2_SUBJECT_NAME := Roga and Kopyta Ltd VBOX_CERTIFICATE_SHA2_FINGERPRINT := XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX XX VBOX_TSA_URL := http://timestamp.digicert.com VBOX_TSA_SHA2_URL := http://timestamp.digicert.com VBOX_TSA_URL_ARGS := /t "$(VBOX_TSA_URL)" VBOX_TSA_SHA2_URL_ARGS := /tr "$(VBOX_TSA_SHA2_URL)" /td sha256 VBOX_CROSS_CERTIFICATE_FILE := VBOX_CROSS_CERTIFICATE_FILE_ARGS := VBOX_CROSS_CERTIFICATE_SHA2_FILE := VBOX_CROSS_CERTIFICATE_SHA2_FILE_ARGS := VBOX_PATH_SIGN_TOOLS := C:\Programs\DevKits\8.1\bin\x64 VBOX_PATH_SELFSIGN := C:\WinDDK\7600.16385.1\bin\selfsign VBOX_PATH_WISUMINFO := "C:\Program Files\Microsoft SDKs\Windows\v7.1\Samples\sysmgmt\msi\scripts\WiSumInf.vbs" VBOX_PATH_WISUBSTG := "C:\Program Files\Microsoft SDKs\Windows\v7.1\Samples\sysmgmt\msi\scripts\WiSubStg.vbs" VBOX_WITH_DOCS := 1 VBOX_WITH_DOCS_CHM := 1 VBOX_WITH_DOCS_PACKING := 1 VBOX_WITH_ADDITIONS := VBOX_WITH_ADDITIONS_PACKING := 1 VBOX_HAVE_XMLLINT := 1 VBOX_XMLLINT := C:\Programs\xmllint\bin\xmllint.exe VBOX_PATH_DOCBOOK := C:/Programs/DocBook/xsl VBOX_PATH_DOCBOOK_DTD := C:/Programs/DocBook/xml VBOX_PATH_HTML_HELP_WORKSHOP := "C:\Program Files (x86)\HTML Help Workshop" VBOX_PDFLATEX := C:\Programs\MiKTeX\texmfs\install\miktex\bin\pdflatex.exe VBOX_PDFLATEX_CMD := $(VBOX_PDFLATEX) -halt-on-error -interaction batchmode TOOL_CURL_FETCH := C:\Programs\curl\x64\curl.exe PATH_TOOL_NASM := C:/Programs/nasm VBOX_INSTALLER_LANGUAGES := en_US VBOX_WITH_TESTCASES := VBOX_WITH_VALIDATIONKIT := VBOX_WITH_VBOX_IMG := 1 VBOX_WITH_RECORDING := 1 VBOX_WITH_AUDIO_RECORDING := 1 SDK_VBOX_VPX := 1 VBOX_WITH_LIBVPX := 1 SDK_VBOX_OPUS := 1 VBOX_WITH_LIBOPUS := 1 VBOX_BUILD_PUBLISHER := _OSE</code> </pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anda harus mengedit templat ini: </font></font><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variabel </font></font><code>VBOX_CERTIFICATE_SUBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan masing-masing </font></font><code>VBOX_CERTIFICATE_SHA2_SUBJECT_NAME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus berisi nama sertifikat SHA-1 dan SHA-256.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variabel </font></font><code>VBOX_CERTIFICATE_FINGERPRINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>VBOX_CERTIFICATE_SHA2_FINGERPRINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harus mengandung cap jempol dari sertifikat tersebut; </font><font style="vertical-align: inherit;">Anda telah menyalinnya sebelumnya dari konsol manajemen Sertifikat.</font></font></li><li> If you have a paid certificate you should delete the lines defining the variables <code>VBOX_CROSS_CERTIFICATE_FILE_ARGS</code> and <code>VBOX_CROSS_CERTIFICATE_SHA2_FILE_ARGS</code> , then in the variables <code>VBOX_CROSS_CERTIFICATE_FILE</code> and <code>VBOX_CROSS_CERTIFICATE_SHA2_FILE</code> (without « <code>_ARGS</code> ») put the full path to the cross-certificate (without it the drivers will not be accepted). You can download it from the web site of the company that issued the certificate, or <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">from Microsoft</a> . </li><li> You can fine-tune the signing process using various additional variables and macros to redefine the certificate storage, timestamp server, or even construct a full command line for the <code>signtool</code> program. You can take a look into the file <code>Config.kmk</code> below the comment «Code Signing», there you'll find which variables are defined and how they are used. </li><li> If you've installed some of the programs into paths different from mine, you need to fix those paths in the template. It's strongly recommended to keep the path style for each variable (forward/backward slashes), sometimes it's critical for successful build. </li><li> Fox WiX you need to specify the path to its binaries. With the portable version, it is just the directory where you unpacked it; if you used the installer, the binaries will be located in the subdirectory <code>bin</code> . Please, note, that the path must not contain spaces! If it does you have to convert it into the 8.3 format (you can use <code>dir /x</code> for that). Unfortunately, enclosing the path in quotes does not work with this variable. </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variabel </font></font><code>VBOX_BUILD_PUBLISHER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menentukan akhiran branding dalam nomor versi. </font><font style="vertical-align: inherit;">Secara default itu adalah "_OSE" (yaitu, versi produk lengkap adalah "6.0.4_OSE"). </font><font style="vertical-align: inherit;">Anda dapat menentukan sufiks lain di sini, atau mengosongkannya untuk menyingkirkannya sama sekali. </font><font style="vertical-align: inherit;">Tetapi jika Anda menghapus variabel sepenuhnya, itu akan menggunakan "_OSE" default.</font></font></li></ul><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sisa variabel sebagian besar digunakan untuk mendeklarasikan komponen mana yang akan dibangun. </font><font style="vertical-align: inherit;">Dan, tentu saja, deklarasi utama datang di bagian paling atas: matikan hardening.</font></font><br><br><a name="build-vb"></a><h4><img src="https://habrastorage.org/getpro/habr/post_images/1c4/b9c/64d/1c4b9c64d7dc3f83417ee1cbbd24820a.png"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Membangun kotak virtual </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Akhirnya, kita sekarang dapat mulai membangun VirtualBox itu sendiri. </font><font style="vertical-align: inherit;">Jika Anda biasanya lebih suka membangun untuk platform yang berbeda secara paralel, Anda harus melakukannya tanpa itu untuk saat ini, atau menggunakan dua salinan hierarki sumber terpisah, karena VB memiliki file konfigurasi umum yang dibuat sebelum pembuatan dan berisi data yang bergantung pada platform. </font><font style="vertical-align: inherit;">Tidak akan baik bagi kompiler untuk tiba-tiba membuangnya dari lingkungan build 64-bit ke dalam 32-bit di tengah proses build. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika Anda memerlukan tanda tangan driver yang kompatibel dengan Windows 10, silakan merujuk ke informasi yang diberikan setelah deskripsi prosedur utama.</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita mulai dengan versi 64-bit. </font><font style="vertical-align: inherit;">Buka konsol dan jalankan perintah berikut:</font></font><pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /d C:\Devel\VirtualBox-src "C:\Program Files\Microsoft SDKs\Windows\v7.<span class="hljs-number"><span class="hljs-number">1</span></span>\Bin\SetEnv.<span class="hljs-built_in"><span class="hljs-built_in">Cmd</span></span>" /Release /x64 /win7 <span class="hljs-built_in"><span class="hljs-built_in">COLOR</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> BUILD_TARGET_ARCH=amd64 cscript configure.vbs --with-DDK=C:\WinDDK\<span class="hljs-number"><span class="hljs-number">7600</span></span>.<span class="hljs-number"><span class="hljs-number">16385</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span> --with-MinGW-w64=C:\Programs\mingw64 --with-MinGW32=C:\Programs\mingw32 --with-libSDL=C:\Programs\SDL\x64 --with-openssl=C:\Programs\OpenSSL\x64 --with-openssl32=C:\Programs\OpenSSL\x32 --with-libcurl=C:\Programs\curl\x64 --with-libcurl32=C:\Programs\curl\x32 --with-Qt5=C:\Programs\Qt\<span class="hljs-number"><span class="hljs-number">5</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>-x64 --with-libvpx=C:\Programs\libvpx --with-libopus=C:\Programs\libopus --with-python=C:/Programs/Python env.bat kmk kmk C:/Devel/VirtualBox-src/out/win.x86/release/obj/Installer/VirtualBox-<span class="hljs-number"><span class="hljs-number">6</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>_OSE-r128164-MultiArch_amd64.msi</code> </pre> The <code>configure.vbs</code> script verifies the environment and generates configuration files ( <code>AutoConfig.kmk</code> and <code>env.bat</code> ). The first <code>kmk</code> command builds the binaries and collect them into <code>out\win.amd64\bin\</code> . And the last command packs them all into the intermediate MSI package. Important notes: <ul><li> You must use forward slashes in the last command. With backslashes, <code>kmk</code> would fail to find the build rules. </li><li> Even though we are building the 64-bit version, the target package is located in <code>out\win.x86\…</code> , because the final stage of the build will be performed from the 32-bit build environment. </li><li> If you've changed the branding suffix you need to change the name of the target package by replacing the «_OSE» with what you specified in the variable <code>VBOX_BUILD_PUBLISHER</code> . </li><li> The revision number in the MSI package name (128164) can be found in the file <code>Config.kmk</code> inside the <code>VBOX_SVN_REV_FALLBACK</code> variable definition. Please, note, that this value may be different from revisions of the official distribution (for instance, the version 6.0.4 has release number 128413). Unfortunately, I have no idea why. </li></ul></li><li> Now we need to build the 32-bit version and pack everything together. For that, open a new console window, and run the following commands: <pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /d C:\Devel\VirtualBox-src "C:\Program Files\Microsoft SDKs\Windows\v7.<span class="hljs-number"><span class="hljs-number">1</span></span>\Bin\SetEnv.<span class="hljs-built_in"><span class="hljs-built_in">Cmd</span></span>" /Release /x86 /win7 <span class="hljs-built_in"><span class="hljs-built_in">COLOR</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> BUILD_TARGET_ARCH=x86 cscript configure.vbs --with-DDK=C:\WinDDK\<span class="hljs-number"><span class="hljs-number">7600</span></span>.<span class="hljs-number"><span class="hljs-number">16385</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span> --with-MinGW-w64=C:\Programs\mingw64 --with-MinGW32=C:\Programs\mingw32 --with-libSDL=C:\Programs\SDL\x32 --with-openssl=C:\Programs\OpenSSL\x32 --with-libcurl=C:\Programs\curl\x32 --with-Qt5=C:\Programs\Qt\<span class="hljs-number"><span class="hljs-number">5</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>-x32 --with-libvpx=C:\Programs\libvpx --with-libopus=C:\Programs\libopus --with-python=C:/Programs/Python env.bat kmk kmk C:/Devel/VirtualBox-src/out/win.x86/release/bin/VirtualBox-<span class="hljs-number"><span class="hljs-number">6</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>_OSE-r128164-MultiArch.exe</code> </pre> Same as with the 64-bit, you need to replace the «_OSE» suffix with what you have. <br> Notice how in the last command we are building an <code>EXE</code> , and not an <code>MSI</code> . This is the final installer which will cause the 32-bit package to be built automatically, from dependencies. </li><li> Even if you have a paid certificate you will find that you cannot install this distribution into Windows 10 booted with Secure Boot enabled. This OS has stricter requirements, and the drivers must be signed by none other than Microsoft themselves. The procedure is explained in details on various Internet resources and is unrelated to this article, so I'm not going to go deep into this topic. Instead I'll outline the main steps you need to take for integrating this task with the VB build procedure. <ul><li> The main requirement here is that you must have not just a normal code signing certificate, but an EV one (Extended Validation). Also you need to register an account at <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Hardware Dev Center</a> and add your certificate there. </li><li> Now, during building the 64-bit version of VB, just after you've got all binary components (that is, after the first <code>kmk</code> run which was without arguments), you need to create a CAB archive with the drivers. There is a batch script template for that; the build system modifies it according to the current task and puts it into <code>out\win.amd64\release\repack\</code> . Go into this path and run the following command: <pre> <code class="dos hljs">PackDriversForSubmission.<span class="hljs-built_in"><span class="hljs-built_in">cmd</span></span> -x</code> </pre> When the script finishes, the file <code>VBoxDrivers-6.0.4r128164-amd64.cab</code> will appear in the same directory. </li><li> You need to sign this CAB archive with your EV certificate. Then go to the Microsoft Hardware Dev Center, create a new submission, upload your signed archive, select the desired target OS version (make sure it's 64-bit) and send the submission. </li><li> It will take several minutes to process, after which you will have a ZIP archive where all the drivers have been signed by Microsoft in addition to your signature, and all the CAT files generated anew. Download this archive and place it somewhere so that the build system had access to it. </li><li> Unpack the archive and put all the files from the subdirectories directly into <code>out\win.amd64\release\bin\</code> overwriting the existing files. You can do it either manually or using another script from the same path <code>out\win.amd64\release\repack\</code> by running the following commands: <pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">set</span></span> _MY_SIGNTOOL=C:\Programs\DevKits\<span class="hljs-number"><span class="hljs-number">8</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>\bin\x64\signtool.exe UnpackBlessedDrivers.<span class="hljs-built_in"><span class="hljs-built_in">cmd</span></span> -n -i <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>\to\signed.zip</code> </pre> Of course, you need to put here the correct paths to <code>signtool.exe</code> and the ZIP archive. </li><li> Now you can run the second <code>kmk</code> command which packs all the components into an MSI installer. If you were doing all this in the same console window, don't forget to switch back to the base directory of the VB project. </li><li> Finally, proceed with building of the 32-bit version of VB, and perform all the same additional steps: after the first <code>kmk</code> switch to <code>out\win.x86\release\repack\</code> , create the CAB archive, sign it, send to Microsoft (now choosing the 32-bit OS version), replace the drivers with their counter-signed versions, and run the final <code>kmk</code> for building the complete VB distribution. </li></ul></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika tidak ada di antara kita yang telah mengacaukan segalanya, semua rantai panjang ini akan membawa Anda installer VirtualBox baru yang mengkilap yang berbeda dari Oracle hanya dengan ikonnya, gambar Tentang, dan, tentu saja, kurangnya pengerasan yang mendalam. Tidak sulit untuk mengganti juga ikon dan gambar, tetapi saya tidak akan membahas topik ini di sini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk kenyamanan saya telah membuat </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file batch tunggal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang mengotomatisasi pembuatan penuh VB. Anda dapat menggunakannya jika Anda perlu membangun pemasang lengkap secara teratur.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hanya beberapa kata lagi tentang menginstal distribusi yang dihasilkan jika Anda menggunakan sertifikat yang ditandatangani sendiri. </font><font style="vertical-align: inherit;">Ketika tiba-tiba ditemukan, di Windows 8/10 tidak cukup untuk boot ke mode pengujian, instalasi masih gagal mengklaim bahwa tanda tangan driver tidak valid. </font><font style="vertical-align: inherit;">Anda dapat mengatasi masalah ini dengan menambahkan sertifikat ke penyimpanan root CA Anda:</font></font><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buka dialog Properti penginstal VB dengan mengklik kanan dan memilih </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Properti</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kemudian beralih ke </font><font style="vertical-align: inherit;">tab </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tanda Tangan Digital</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Anda akan menemukan dua tanda tangan di sana, keduanya bernama "Roga and Kopyta Ltd", satu adalah sha1, yang lain sha256. </font><font style="vertical-align: inherit;">Pilih yang pertama, klik </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Detail</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dialog lain muncul, di mana Anda perlu mengklik tombol </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lihat Sertifikat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li> One more dialog, click <i>Install Certificate</i> . </li><li> In the Import wizard, select the location «Local Machine», click <i>Next</i> . After UAC confirmation (if needed), there's the certificate store selection. Select «Place all certificates in the following store», then click <i>Browse</i> and choose the store named «Trusted Root Certification Authorities». Then <i>Next</i> , <i>Finish</i> . You're done, the certificate is installed. </li><li> Close all the dialogs but the very first one, select the second signature (sha256) and repeat the steps 2 to 4 for it too. </li><li> Close all the dialogs, run the installer. Now it should work fine. </li></ol><br><a name="afterword"></a><h4><img src="https://habrastorage.org/getpro/habr/post_images/1c4/b9c/64d/1c4b9c64d7dc3f83417ee1cbbd24820a.png"> Epilogue </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika saya selesai menulis artikel saya sendiri terkejut oleh volumenya. Pada awalnya saya berencana untuk pergi ke banyak detail tentang alasan untuk memilih cara ini atau itu untuk menyelesaikan setiap masalah, menjelaskan apa masalahnya, tepatnya, dan solusi alternatif apa yang mungkin berlaku. Tetapi segera menjadi jelas bahwa, jika dimuat dengan semua rincian ini, teks akan menjadi sangat besar. Saya harus minta maaf, untuk resep yang terlihat seperti "lakukan saja ini dan jangan bertanya". Saya sendiri tidak menyukai orang-orang itu, tetapi saya tidak bisa menemukan cara lain. Sesekali saya masih mencoba menguraikan apa yang sedang terjadi, untuk melunakkan kesan.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sejumlah besar detail tentang sistem build VB harus tetap berada di belakang layar; karena saya sama-sama merasa enggan untuk menggembungkan teks, dan, kadang-kadang, terlalu malas untuk mencari pendekatan yang berbeda, lebih efisien untuk menyelesaikan masalah. Lagipula, tujuan utama saya, pada awalnya, adalah untuk mendapatkan versi build dari VirtualBox saat ini. 4.3.12 sudah ketinggalan zaman pada saat itu, tetapi saya tidak bisa mengambil risiko memperbarui salah satu alat saya yang paling aktif digunakan ke versi yang diperkeras yang mungkin berhenti bekerja kapan saja. Meskipun, dari waktu ke waktu saya kembali dan, setelah menemukan sesuatu yang baru, tambahkan ke artikel ini. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya berharap artikel ini akan menemukan audiensnya. Jika Anda tertarik untuk melihat dan menganalisis hasil akhir tetapi tidak ingin mengatur semua tumpukan program, Anda bisa mendapatkan versi distribusi saya dari sini:</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">versi 6.0.4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Semua driver (dan file lainnya) ditandatangani dengan sertifikat yang ditandatangani sendiri yang tidak tepercaya, jadi untuk menginstal ini dalam versi Windows 64-bit Anda harus reboot ke mode uji. </font><font style="vertical-align: inherit;">Jika Anda memiliki pertanyaan, saran, rekomendasi, jangan ragu untuk menulis kepada saya baik di sini di komentar, atau melalui pesan pribadi. </font><font style="vertical-align: inherit;">Semoga Open Source menyertai Anda!</font></font><br><br><a name="history"></a><h4><img src="https://habrastorage.org/getpro/habr/post_images/1c4/b9c/64d/1c4b9c64d7dc3f83417ee1cbbd24820a.png"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Amandemen </font></font></h4><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arsipkan</font></font></b> <div class="spoiler_text"><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> • Artikel Rusia diterbitkan 01/21/2016 </font></font></h5><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> VirtualBox 5.0.12. </font></font></li></ol><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> • Pembaruan 05.24.2016 </font></font></h5><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Artikel ini diperbarui untuk VB 5.0.20, salah satu perubahan utama adalah penandatanganan ganda SHA-1 / SHA-256. </font></font></li><li> Added disabling of forced signature checks if self-signed certificates are used. </li><li> Added information about workaround for installation failure of the self-signed distribution. </li><li> Library versions were updated. </li><li> Disabled some unused components for speeding up the build process. </li><li> Minor fixes and improvements. </li></ol><br><h5> • Update of 29.07.2016 </h5><ol><li> The article is updated for VB 5.1.2; the most important change is upgrading to Qt5. The differences from VB 5.0.x procedure are specified where applicable. </li><li> Library versions were updated. </li><li> The full build batch was updated to check error codes after each operation. </li><li> Minor fixes and improvements. </li></ol><br><h5> • Update of 15.09.2016 </h5><ol><li> The article is updated for VB 5.1.6. </li><li> Library versions were updated. </li><li> Added NASM for building OpenSSL. </li><li> Added OpenSSL into cURL; this fixes the broken function of checking for updates and downloading the Extension Pack. </li><li> The full build batch now reads the VB version automatically. </li><li> Various minor fixes and improvements. </li></ol><br><h5> • Update of 30.11.2016 </h5><ol><li> The article is updated for VB 5.1.10. </li><li> Library versions were updated; particularly OpenSSL was upgraded to version 1.1.x. </li><li> Fixed some installation errors: <ul><li> path to the Qt plugins now points to the installation directory; </li><li> added forgotten OpenSSL libraries to the 32-bit components of the 64-bit VB version. </li></ul></li><li> The article no longer contains information about building older VB versions. If needed, the previous versions of it are available in the <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub project</a> . </li></ol><br><h5> • Update of 2.12.2016 </h5><ol><li> Switched to using statically linked OpenSSL. </li></ol><br><h5> • Update of 20.06.2017 </h5><ol><li> The article is updated for VB 5.1.22. </li><li> cURL, OpenSSL, and gSOAP were updated; adapted the build instructions for cURL, gSOAP and VB. </li></ol><br><h5> • Update of 1.12.2017 </h5><ol><li> The article is updated for VB 5.2.2. </li><li> Switched from MinGW-32 3.3.3 to 4.5.4. </li><li> Qt, cURL, OpenSSL, gSOAP, and some build tools were updated; adapted the build instructions for cURL, gSOAP and VB. </li><li> Switched to using local archives of DocBook XML/XSL instead of online versions. </li><li> Using cURL program instead of wget for downloading the Guest Additions ISO image. </li><li> Various minor fixes and improvements. </li></ol><br><h5> • Update of 4.12.2017 </h5><ol><li> The libxml version was fixed in the build instructions. </li></ol><br><h5> • Update of 4.09.2018 </h5><ol><li> The article is updated for VB 5.2.18. </li><li> cURL, OpenSSL, gSOAP and some build tools were updated; adapted the build instructions for cURL. </li></ol><br><h5> • Update of 12.12.2018 </h5><ol><li> The article is updated for VB 5.2.22. </li><li> Enabled screen recording functionality which is disabled in OSE version by default; added libraries libopus and libvpx for encoding. </li><li> cURL, OpenSSL, and gSOAP were updated. </li><li> The full set of VirtualBox source code changes is now published as a single patch file for easier application. </li></ol></div></div><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> • Pembaruan 01/25/2019 </font></font></h5><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Artikel ini diperbarui untuk VB 6.0.2. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Peningkatan penambahan penambahan Pengunjung membangun. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cURL dan gSOAP dimutakhirkan; </font><font style="vertical-align: inherit;">Lembar Gaya DocBook XSL diturunkan ke versi 1.69.1 (dokumentasi lebih cocok untuk versi itu).</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kumpulan build lengkap dipisah dari teks artikel menjadi file yang dapat diunduh. </font></font></li></ol><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> • Pembaruan 04/08/2019 </font></font></h5><ol><li> The article has been translated into English for the first time. Also numerous minor changes were introduced into the Russian version. </li><li> Added information about drivers signing for Windows 10. </li><li> The article is updated for VB 6.0.4. </li><li> cURL, OpenSSL, gSOAP, and some tools were updated. </li><li> The full build batch no longer has to be placed at the specific path. Also, it now contains the basic template for automated Windows 10 drivers signing. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id447300/">https://habr.com/ru/post/id447300/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id447288/index.html">5 stablecoin teratas. Yang perlu Anda ketahui</a></li>
<li><a href="../id447290/index.html">Dokter naik, naik</a></li>
<li><a href="../id447292/index.html">14 produk baru di Visual Studio 2019</a></li>
<li><a href="../id447294/index.html">Live Share sekarang disertakan dengan Visual Studio 2019</a></li>
<li><a href="../id447298/index.html">Manajemen pengetahuan melalui model kompetensi</a></li>
<li><a href="../id447302/index.html">Sistem Operasi Akhir Pekan</a></li>
<li><a href="../id447304/index.html">Avaricious tidak membayar dua kali - kami mengonfigurasikan memori pada platform AMD B450 dan kami menerima produktivitas gratis</a></li>
<li><a href="../id447306/index.html">Tesla Transformer pada papan satu inci persegi</a></li>
<li><a href="../id447308/index.html">Desain instan</a></li>
<li><a href="../id447310/index.html">Bagaimana kami beralih dari pengembangan web ke pengembangan game</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>