<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©â€ğŸ« ğŸ† ğŸ•µğŸ¾ æ¯”è¾ƒæµè¡Œçš„Python Python CLIåº“ï¼šclickï¼Œconceï¼Œfireå’Œå…¶ä»– ğŸ¤›ğŸ» ğŸŒ ğŸ§’ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pythonæ˜¯æ§åˆ¶å°åº”ç”¨ç¨‹åºçš„ä¸€ç§å‡ºè‰²è¯­è¨€ï¼Œå®ƒçªå‡ºæ˜¾ç¤ºäº†ç”¨äºè¿™äº›ä»»åŠ¡çš„å¤§é‡åº“ã€‚ ä½†æ˜¯ï¼Œå­˜åœ¨å“ªäº›åº“ï¼Ÿ å“ªä¸ªæ›´å¥½ï¼Ÿ è¯¥ææ–™æ¯”è¾ƒäº†æ§åˆ¶å°ä¸–ç•Œä¸­æµè¡Œçš„å·¥å…·ï¼Œä½†ä¸æ˜¯å¾ˆå¥½ï¼Œå¹¶å°è¯•å›ç­”ç¬¬äºŒä¸ªé—®é¢˜ã€‚ 

 ä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œè¯¥è¯„è®ºåˆ†ä¸ºä¸¤ç¯‡æ–‡ç« ï¼šç¬¬ä¸€ç¯‡æ¯”è¾ƒäº†å…­ä¸ªæœ€å—æ¬¢è¿çš„å›¾ä¹¦é¦†ï¼Œç¬¬äºŒç¯‡æ¯”è¾ƒä¸å—æ¬¢è¿ï¼Œä½†æ›´å…·ä½“ï¼Œä½†ä»ç„¶å€¼å¾—å…³...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ¯”è¾ƒæµè¡Œçš„Python Python CLIåº“ï¼šclickï¼Œconceï¼Œfireå’Œå…¶ä»–</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466999/"><img src="https://habrastorage.org/webt/rp/ek/be/rpekben_u6jtlwru-flsslxk70e.png"><br><br>  Pythonæ˜¯æ§åˆ¶å°åº”ç”¨ç¨‹åºçš„ä¸€ç§å‡ºè‰²è¯­è¨€ï¼Œå®ƒçªå‡ºæ˜¾ç¤ºäº†ç”¨äºè¿™äº›ä»»åŠ¡çš„å¤§é‡åº“ã€‚  <i>ä½†æ˜¯ï¼Œå­˜åœ¨å“ªäº›åº“ï¼Ÿ</i>  <i>å“ªä¸ªæ›´å¥½ï¼Ÿ</i> è¯¥ææ–™æ¯”è¾ƒäº†æ§åˆ¶å°ä¸–ç•Œä¸­æµè¡Œçš„å·¥å…·ï¼Œä½†ä¸æ˜¯å¾ˆå¥½ï¼Œå¹¶å°è¯•å›ç­”ç¬¬äºŒä¸ªé—®é¢˜ã€‚ <br><br> ä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œè¯¥è¯„è®ºåˆ†ä¸ºä¸¤ç¯‡æ–‡ç« ï¼šç¬¬ä¸€ç¯‡æ¯”è¾ƒäº†å…­ä¸ªæœ€å—æ¬¢è¿çš„å›¾ä¹¦é¦†ï¼Œç¬¬äºŒç¯‡æ¯”è¾ƒä¸å—æ¬¢è¿ï¼Œä½†æ›´å…·ä½“ï¼Œä½†ä»ç„¶å€¼å¾—å…³æ³¨ã€‚ <br><a name="habracut"></a><br> åœ¨æ¯ä¸ªç¤ºä¾‹ä¸­ï¼Œå°†ä½¿ç”¨Python 3.7ç¼–å†™<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">todolib</a>åº“çš„æ§åˆ¶å°å®ç”¨ç¨‹åºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¯¥å®ç”¨ç¨‹åºåˆ›å»ºï¼ŒæŸ¥çœ‹ï¼Œæ ‡è®°å’Œåˆ é™¤ä»»åŠ¡ã€‚ å…¶ä½™çš„å°†åœ¨ç‰¹å®šæ¡†æ¶ä¸Šç®€åŒ–å®æ–½çš„å‰æä¸‹æ·»åŠ ã€‚ ä»»åŠ¡æœ¬èº«å­˜å‚¨åœ¨jsonæ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶å°†ä¿å­˜åœ¨å•ç‹¬çš„è°ƒç”¨ä¸­-è¿™äº›ç¤ºä¾‹çš„é™„åŠ æ¡ä»¶ã€‚ <br> é™¤æ­¤ä¹‹å¤–ï¼Œå°†ä¸ºæ¯ä¸ªå®ç°ç¼–å†™ä¸€ä¸ªç®€å•çš„æµ‹è¯•ã€‚ å¸¦æœ‰ä»¥ä¸‹å›ºå®šè£…ç½®çš„Pytestè¢«ç”¨ä½œæµ‹è¯•æ¡†æ¶ï¼š <br><br><pre><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@pytest.fixture(autouse=True) def db(monkeypatch): """ monkeypatch     ,        """ value = {"tasks": []} monkeypatch.setattr(todolib.TodoApp, "get_db", lambda _: value) return value @pytest.yield_fixture(autouse=True) def check(db): """      """ yield assert db["tasks"] and db["tasks"][0]["title"] == "test" # ,      EXPECTED = "Task 'test' created with number 1.\n"</span></span></code> </pre> <br> åŸåˆ™ä¸Šï¼Œä»¥ä¸Šæ‰€æœ‰å†…å®¹éƒ½è¶³ä»¥è¯´æ˜è¿™äº›åº“ã€‚ å®Œæ•´çš„æºä»£ç åœ¨<a href="">æ­¤</a>å­˜å‚¨åº“ä¸­å¯ç”¨ã€‚ <br><br><h2>  argparse </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Argparse</a>å…·æœ‰ä¸å¯å¦è®¤çš„ä¼˜åŠ¿-å®ƒåœ¨æ ‡å‡†åº“ä¸­ï¼Œå…¶APIä¹Ÿä¸éš¾å­¦ä¹ ï¼šæœ‰ä¸€ä¸ªè§£æå™¨ï¼Œæœ‰å‚æ•°ï¼Œè¿™äº›å‚æ•°å…·æœ‰<i>type</i> ï¼Œ <i>action</i> ï¼Œ <i>dest</i> ï¼Œ <i>default</i>å’Œ<i>help</i> ã€‚ å¹¶å…·æœ‰å­<i>è§£æå™¨</i> -èƒ½å¤Ÿå°†éƒ¨åˆ†å‚æ•°å’Œé€»è¾‘åˆ†ç¦»ä¸ºå•ç‹¬çš„å‘½ä»¤ã€‚ <br><br><h4> è§£æå™¨ </h4><br> ä¹ä¸€çœ‹-æ²¡ä»€ä¹ˆå¼‚å¸¸ï¼Œè§£æå™¨å°±åƒè§£æå™¨ã€‚ ä½†æ˜¯-æˆ‘è®¤ä¸º-ä¸å…¶ä»–åº“ç›¸æ¯”ï¼Œå¯è¯»æ€§ä¸æ˜¯æœ€å¥½çš„ï¼Œå› ä¸º ä¸åŒå‘½ä»¤çš„å‚æ•°åœ¨ä¸€ä¸ªåœ°æ–¹æè¿°ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æºä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_parser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> parser = argparse.ArgumentParser(<span class="hljs-string"><span class="hljs-string">"Todo notes - argparse version"</span></span>) parser.add_argument( <span class="hljs-string"><span class="hljs-string">"--verbose"</span></span>, <span class="hljs-string"><span class="hljs-string">"-v"</span></span>, action=<span class="hljs-string"><span class="hljs-string">"store_true"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Enable verbose mode"</span></span> ) parser.add_argument(<span class="hljs-string"><span class="hljs-string">"--version"</span></span>, <span class="hljs-string"><span class="hljs-string">"-V"</span></span>, action=<span class="hljs-string"><span class="hljs-string">"store_true"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Show version"</span></span>) subparsers = parser.add_subparsers(title=<span class="hljs-string"><span class="hljs-string">"Commands"</span></span>, dest=<span class="hljs-string"><span class="hljs-string">"cmd"</span></span>) add = subparsers.add_parser(<span class="hljs-string"><span class="hljs-string">"add"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Add new task"</span></span>) add.add_argument(<span class="hljs-string"><span class="hljs-string">"title"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Todo title"</span></span>) show = subparsers.add_parser(<span class="hljs-string"><span class="hljs-string">"show"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Show tasks"</span></span>) show.add_argument( <span class="hljs-string"><span class="hljs-string">"--show-done"</span></span>, action=<span class="hljs-string"><span class="hljs-string">"store_true"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Include done tasks in the output"</span></span> ) done = subparsers.add_parser(<span class="hljs-string"><span class="hljs-string">"done"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Mark task as done"</span></span>) done.add_argument(<span class="hljs-string"><span class="hljs-string">"number"</span></span>, type=int, help=<span class="hljs-string"><span class="hljs-string">"Task number"</span></span>) remove = subparsers.add_parser(<span class="hljs-string"><span class="hljs-string">"remove"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Remove task"</span></span>) remove.add_argument(<span class="hljs-string"><span class="hljs-string">"number"</span></span>, type=int, help=<span class="hljs-string"><span class="hljs-string">"Task number"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> parser</code> </pre><br></div></div><br><h4> ä¸»è¦çš„ </h4><br> è€Œä¸”è¿™é‡Œæ˜¯åŒä¸€ä»¶äº‹-è§£æå™¨é™¤äº†è§£æå‚æ•°å¤–æ— èƒ½ä¸ºåŠ›ï¼Œå› æ­¤é€»è¾‘å°†å¿…é¡»ç‹¬ç«‹ç¼–å†™å¹¶æ”¾åœ¨ä¸€ä¸ªä½ç½®ã€‚ ä¸€æ–¹é¢-æœ‰å¯èƒ½ç”Ÿå­˜ï¼Œå¦ä¸€æ–¹é¢-å¯èƒ½ä¼šæ›´å¥½ï¼Œä½†ç›®å‰å°šä¸æ¸…æ¥šã€‚ <br><br>  <b>UPDï¼š</b> <i>æ­£å¦‚<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">foldr</a>æ‰€è¿°ï¼Œå®é™…ä¸Šï¼Œå­è§£æå™¨å¯ä»¥é€šè¿‡set_defaultsï¼ˆfunc = fooï¼‰è®¾ç½®å‡½æ•°ï¼Œå³argparseå…è®¸æ‚¨å°†mainç¼©çŸ­ä¸ºå°å°ºå¯¸ã€‚</i>  <i>ç”Ÿæ´»å’Œå­¦ä¹ ã€‚</i> <br><br><div class="spoiler">  <b class="spoiler_title">æºä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(raw_args=None)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Argparse example entrypoint """</span></span> parser = get_parser() args = parser.parse_args(raw_args) logging.basicConfig() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> args.verbose: logging.getLogger(<span class="hljs-string"><span class="hljs-string">"todolib"</span></span>).setLevel(logging.INFO) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> args.version: print(lib_version) exit(<span class="hljs-number"><span class="hljs-number">0</span></span>) cmd = args.cmd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> cmd: parser.print_help() exit(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> TodoApp.fromenv() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> app: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cmd == <span class="hljs-string"><span class="hljs-string">"add"</span></span>: task = app.add_task(args.title) print(task, <span class="hljs-string"><span class="hljs-string">"created with number"</span></span>, task.number, end=<span class="hljs-string"><span class="hljs-string">".\n"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> cmd == <span class="hljs-string"><span class="hljs-string">"show"</span></span>: app.print_tasks(args.show_done) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> cmd == <span class="hljs-string"><span class="hljs-string">"done"</span></span>: task = app.task_done(args.number) print(task, <span class="hljs-string"><span class="hljs-string">"marked as done."</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> cmd == <span class="hljs-string"><span class="hljs-string">"remove"</span></span>: task = app.remove_task(args.number) print(task, <span class="hljs-string"><span class="hljs-string">"removed from list."</span></span>)</code> </pre><br></div></div><br><h4> æµ‹è¯•ä¸­ </h4><br> è¦æ£€æŸ¥è¯¥å®ç”¨ç¨‹åºçš„è¾“å‡ºï¼Œä½¿ç”¨äº†<i>capsys</i>å›ºå®šè£…ç½®ï¼Œè¯¥è£…ç½®å¯ä»¥è®¿é—®stdoutå’Œstderrä¸­çš„æ–‡æœ¬ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_argparse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(capsys)</span></span></span><span class="hljs-function">:</span></span> todo_argparse.main([<span class="hljs-string"><span class="hljs-string">"add"</span></span>, <span class="hljs-string"><span class="hljs-string">"test"</span></span>]) out, _ = capsys.readouterr() <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> out == EXPECTED</code> </pre><br><h4> æ€»ç»“ </h4><br> ä¼˜ç‚¹-ä¸€ç»„å¾ˆå¥½çš„è§£æåŠŸèƒ½ï¼Œæ ‡å‡†åº“ä¸­å­˜åœ¨æ¨¡å—ã€‚ <br><br> ç¼ºç‚¹-argparseä»…å‚ä¸å‚æ•°è§£æï¼Œmainä¸­çš„å¤§å¤šæ•°é€»è¾‘å¿…é¡»ç”±æˆ‘è‡ªå·±ç¼–å†™ã€‚ å°šä¸æ¸…æ¥šå¦‚ä½•åœ¨æµ‹è¯•ä¸­æµ‹è¯•é€€å‡ºä»£ç ã€‚ <br><br><h2>  docopt </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">docopt</a>æ˜¯ä¸€ä¸ªå°å‹è§£æå™¨ï¼ˆå°äº600è¡Œï¼Œè€Œä½¿ç”¨argparseåˆ™ä¸º2500è¡Œï¼‰è§£æå™¨ï¼Œå¼•ç”¨GitHubä¸Šçš„æè¿°ï¼Œä¼šè®©æ‚¨å¾®ç¬‘ã€‚  docoptçš„ä¸»è¦æ€æƒ³æ˜¯ä½¿ç”¨æ–‡æœ¬ï¼ˆä¾‹å¦‚ï¼Œåœ¨docstringä¸­ï¼‰ä»¥æ–‡å­—å½¢å¼æè¿°æ¥å£ã€‚ <br><br> åœ¨åŒä¸€ä¸ªgithubï¼Œdocopt&gt; 6700ä¸ªstarsä¸Šï¼Œå®ƒè‡³å°‘åœ¨22,000ä¸ªå…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨ã€‚ è€Œä¸”è¿™ä»…é€‚ç”¨äºpythonå®ç°ï¼  docopté¡¹ç›®é¡µé¢å…·æœ‰ç”¨äºä¸åŒè¯­è¨€çš„è®¸å¤šé€‰é¡¹ï¼Œä»Cå’ŒPHPåˆ°CoffeeScriptç”šè‡³Rã€‚è¿™ç§è·¨å¹³å°åªèƒ½ç”±ä»£ç çš„ç´§å‡‘æ€§å’Œç®€å•æ€§æ¥è§£é‡Šã€‚ <br><br><h4> è§£æå™¨ </h4><br> ä¸argparseç›¸æ¯”ï¼Œæ­¤è§£æå™¨å‘å‰è¿ˆå‡ºäº†ä¸€å¤§æ­¥ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-string"><span class="hljs-string">"""Todo notes on docopt. Usage: todo_docopt [-v | -vv ] add &lt;task&gt; todo_docopt [-v | -vv ] show --show-done todo_docopt [-v | -vv ] done &lt;number&gt; todo_docopt [-v | -vv ] remove &lt;number&gt; todo_docopt -h | --help todo_docopt --version Options: -h --help Show help. -v --verbose Enable verbose mode. """</span></span></code> </pre><br><h4> ä¸»è¦çš„ </h4><br> é€šå¸¸ï¼Œæ‰€æœ‰å†…å®¹éƒ½ä¸argparseç›¸åŒï¼Œä½†æ˜¯ç°åœ¨<i>verbose</i>å¯ä»¥å…·æœ‰å¤šä¸ªå€¼ï¼ˆ0-2ï¼‰ï¼Œå¹¶ä¸”å¯¹å‚æ•°çš„è®¿é—®æœ‰æ‰€ä¸åŒï¼šdocoptè¿”å›çš„ä¸æ˜¯å…·æœ‰å±æ€§çš„åç§°ç©ºé—´ï¼Œè€Œåªæ˜¯è¿”å›å­—å…¸ï¼Œåœ¨å…¶ä¸­æŒ‡å®šäº†å‘½ä»¤çš„é€‰æ‹©é€šè¿‡å¥¹çš„å¸ƒå°”å€¼ï¼Œå¦‚<i>ifæ‰€ç¤º</i> ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">æºä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(argv=None)</span></span></span><span class="hljs-function">:</span></span> args = docopt(__doc__, argv=argv, version=lib_version) log.setLevel(levels[args[<span class="hljs-string"><span class="hljs-string">"--verbose"</span></span>]]) logging.basicConfig() log.debug(<span class="hljs-string"><span class="hljs-string">"Arguments: %s"</span></span>, args) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> TodoApp.fromenv() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> app: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> args[<span class="hljs-string"><span class="hljs-string">"add"</span></span>]: task = app.add_task(args[<span class="hljs-string"><span class="hljs-string">"&lt;task&gt;"</span></span>]) print(task, <span class="hljs-string"><span class="hljs-string">"created with number"</span></span>, task.number, end=<span class="hljs-string"><span class="hljs-string">".\n"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> args[<span class="hljs-string"><span class="hljs-string">"show"</span></span>]: app.print_tasks(args[<span class="hljs-string"><span class="hljs-string">"--show-done"</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> args[<span class="hljs-string"><span class="hljs-string">"done"</span></span>]: task = app.task_done(args[<span class="hljs-string"><span class="hljs-string">"&lt;number&gt;"</span></span>]) print(task, <span class="hljs-string"><span class="hljs-string">"marked as done."</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> args[<span class="hljs-string"><span class="hljs-string">"remove"</span></span>]: task = app.remove_task(args[<span class="hljs-string"><span class="hljs-string">"&lt;number&gt;"</span></span>]) print(task, <span class="hljs-string"><span class="hljs-string">"removed from list."</span></span>)</code> </pre><br></div></div><br><h4> æµ‹è¯•ä¸­ </h4><br> ä¸argparseæµ‹è¯•ç±»ä¼¼ï¼š <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_docopt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(capsys)</span></span></span><span class="hljs-function">:</span></span> todo_docopt.main([<span class="hljs-string"><span class="hljs-string">"add"</span></span>, <span class="hljs-string"><span class="hljs-string">"test"</span></span>]) out, _ = capsys.readouterr() <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> out == EXPECTED</code> </pre><br><h4> æ€»ç»“ </h4><br> å¥½å¤„åŒ…æ‹¬-è§£æå™¨çš„ä»£ç æ›´å°‘ï¼Œæ˜“äºæè¿°ä»¥åŠå‘½ä»¤å’Œå‚æ•°çš„è¯»å–ï¼Œå†…ç½®ç‰ˆæœ¬ã€‚ <br><br> ç¼ºç‚¹ï¼Œé¦–å…ˆï¼Œå’Œargparseä¸€æ ·-mainä¸­æœ‰å¾ˆå¤šé€»è¾‘ï¼Œæ‚¨ä¸èƒ½æµ‹è¯•é€€å‡ºä»£ç ã€‚ æ­¤å¤–ï¼Œå½“å‰çš„docoptç‰ˆæœ¬ï¼ˆ0.6.2ï¼‰å°šä¸ç¨³å®šï¼Œè€Œä¸”ä¸å¤ªå¯èƒ½å®ç°-è¯¥é¡¹ç›®ä»2012å¹´åˆ°2013å¹´åº•ä¸€ç›´åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç§¯æ</a>å¼€å‘ï¼Œæœ€åä¸€æ¬¡æäº¤æ˜¯åœ¨12æœˆ17æ—¥ã€‚ ç›®å‰æœ€ä¸æ„‰å¿«çš„æ˜¯ï¼ŒæŸäº›docoptå¸¸è§„åœ¨æ‰§è¡Œæµ‹è¯•æ—¶ä¼šå¼•å‘DeprecationWarningã€‚ <br><br><h2> è¯·ç‚¹å‡» </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Click</a>ä»æœ¬è´¨ä¸Šä¸argparseå’Œdocoptçš„ä¸åŒä¹‹å¤„åœ¨äºåŠŸèƒ½çš„æ•°é‡ä»¥åŠé€šè¿‡è£…é¥°å™¨æè¿°å‘½ä»¤å’Œå‚æ•°çš„æ–¹æ³•ï¼Œå¹¶ä¸”é€»è¾‘æœ¬èº«è¢«å»ºè®®åˆ†ç¦»ä¸ºå•ç‹¬çš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯å¤§å‹<i>main</i> ã€‚ ä½œè€…å£°ç§°Clickæœ‰å¾ˆå¤šè®¾ç½®ï¼Œä½†æ˜¯æ ‡å‡†å‚æ•°åº”è¯¥è¶³å¤Ÿäº†ã€‚ åœ¨è¿™äº›åŠŸèƒ½ä¸­ï¼Œå¼ºè°ƒäº†åµŒå¥—å‘½ä»¤åŠå…¶å»¶è¿ŸåŠ è½½ã€‚ <br><br> è¯¥é¡¹ç›®éå¸¸å—æ¬¢è¿ï¼šé™¤äº†æ‹¥æœ‰è¶…è¿‡8100é¢—æ˜Ÿå¹¶åœ¨è‡³å°‘17.4ä¸‡ä¸ªï¼ˆï¼ï¼‰é¡¹ç›®ä¸­ä½¿ç”¨å®ƒä¹‹å¤–ï¼Œå®ƒä»åœ¨å¼€å‘ä¸­ï¼š7.0ç‰ˆå·²äº2018å¹´ç§‹å­£å‘å¸ƒï¼Œå¹¶ä¸”ä»Šå¤©å‡ºç°äº†æ–°çš„æäº¤å’Œåˆå¹¶è¯·æ±‚å¤©ã€‚ <br><br><h4> è§£æå™¨ </h4><br> åœ¨æ–‡æ¡£é¡µé¢ä¸Šï¼Œæˆ‘æ‰¾åˆ°äº†<i>confirmation_option</i>è£…é¥°å™¨ï¼Œè¯¥è£…é¥°å™¨åœ¨æ‰§è¡Œå‘½ä»¤ä¹‹å‰è¦æ±‚ç”¨æˆ·ç¡®è®¤ã€‚ ä¸ºäº†æ¼”ç¤ºå®ƒï¼Œæ·»åŠ äº†æ“¦æ‹­å‘½ä»¤ï¼Œè¯¥å‘½ä»¤æ¸…é™¤äº†æ•´ä¸ªä»»åŠ¡åˆ—è¡¨ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æºä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs">levels = [logging.WARN, logging.INFO, logging.DEBUG] pass_app = click.make_pass_decorator(TodoApp) @click.group() @click.version_option(lib_version, prog_name=<span class="hljs-string"><span class="hljs-string">"todo_click"</span></span>) @click.option(<span class="hljs-string"><span class="hljs-string">"-v"</span></span>, <span class="hljs-string"><span class="hljs-string">"--verbose"</span></span>, count=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-comment"><span class="hljs-comment"># click   ,     @click.option("--db", help="Path to the database file") @click.pass_context def cli(ctx, verbose, db): """Todo notes - click version.""" level = levels[min(verbose, 2)] logging.basicConfig(level=level) logging.getLogger("todolib").setLevel(level) ctx.obj = TodoApp.fromenv(db) atexit.register(ctx.obj.save) @cli.command() @click.argument("task") @pass_app def add(app, task): """ Add new task. """ task = app.add_task(task) click.echo(f"{task} created with number {task.number}.") @cli.command() @click.option("--show-done", is_flag=True, help="Include done tasks") @pass_app def show(app, show_done): """ Show current tasks. """ app.print_tasks(show_done) @cli.command() @click.argument("number", type=int) @pass_app def done(app, number): """ Mark task as done. """ task = app.task_done(number) click.echo(f"{task} marked as done.") @cli.command() @click.argument("number", type=int) @pass_app def remove(app, number): """ Remove task from the list. """ task = app.remove_task(number) click.echo(f"{task} removed from the list.") @cli.command() @click.confirmation_option(prompt="Are you sure you want to remove database") @pass_app def wipe(app): for task in app.list_tasks(): task.remove()</span></span></code> </pre><br></div></div><br><h4> ä¸»è¦çš„ </h4><br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é‡åˆ°äº†Clickçš„ä¸»è¦ä¼˜ç‚¹-ç”±äºå‘½ä»¤çš„é€»è¾‘æ ¹æ®å®ƒä»¬çš„åŠŸèƒ½åˆ†å¼€ï¼Œå› æ­¤å‡ ä¹æ²¡æœ‰å†…å®¹ä¿ç•™åœ¨mainä¸­ã€‚ è¿™é‡Œè¿˜å±•ç¤ºäº†åº“ä»ç¯å¢ƒå˜é‡æ¥æ”¶å‚æ•°å’Œå‚æ•°çš„èƒ½åŠ›ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">"__main__"</span></span>: cli(auto_envvar_prefix=<span class="hljs-string"><span class="hljs-string">"TODO"</span></span>)</code> </pre><br><h4> æµ‹è¯•ä¸­ </h4><br> å¯¹äºClickï¼Œä¸éœ€è¦æ‹¦æˆªsys.stdoutï¼Œå› ä¸ºæœ‰ä¸€ä¸ª<i>å¸¦æœ‰è¿è¡Œ</i>ç¨‹åºçš„<i>click.testing</i>æ¨¡å—å¯ä»¥å¤„ç†è¿™äº›äº‹æƒ…ã€‚  <i>CliRunner</i>æœ¬èº«ä¸ä»…æ‹¦æˆªè¾“å‡ºï¼Œè¿˜å…è®¸æ‚¨æ£€æŸ¥é€€å‡ºä»£ç ï¼Œè¿™ä¹Ÿå¾ˆé…·ã€‚ æ‰€æœ‰è¿™ä¸€åˆ‡éƒ½å…è®¸åœ¨ä¸ä½¿ç”¨pytestå¹¶ç»•è¿‡æ ‡å‡†<i>unittest</i>æ¨¡å—çš„æƒ…å†µä¸‹æµ‹è¯•ç‚¹å‡»å®ç”¨ç¨‹åºã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> click.testing <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> runner = click.testing.CliRunner() result = runner.invoke(todo_click.cli, [<span class="hljs-string"><span class="hljs-string">"add"</span></span>, <span class="hljs-string"><span class="hljs-string">"test"</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> result.exit_code == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> result.output == EXPECTED</code> </pre><br><h4> æ€»ç»“ </h4><br> è¿™åªæ˜¯Clickå¯ä»¥åšçš„ä¸€å°éƒ¨åˆ†ã€‚ ä»APIçš„å…¶ä½™éƒ¨åˆ†å¼€å§‹-å€¼çš„éªŒè¯ï¼Œä¸ç»ˆç«¯çš„é›†æˆï¼ˆé¢œè‰²ï¼Œè¾ƒå°‘çš„åˆ†é¡µå™¨ï¼Œè¿›åº¦æ¡ç­‰ï¼‰ï¼Œç»“æœå›è°ƒï¼Œè‡ªåŠ¨å®Œæˆç­‰ã€‚ æ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„</a>æŸ¥çœ‹ä»–ä»¬çš„ç¤ºä¾‹ã€‚ <br><br> ä¼˜ç‚¹ï¼šåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½æœ‰å¾ˆå¤šå·¥å…·ï¼Œæ˜¯åŸå§‹çš„ï¼Œä½†æ˜¯åŒæ—¶æ–¹ä¾¿æè¿°å›¢é˜Ÿï¼Œæ˜“äºæµ‹è¯•å’Œæ´»è·ƒé¡¹ç›®å¯¿å‘½ã€‚ <br><br> ç¼ºç‚¹ï¼šâ€œå•å‡»â€çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆ-è¿™æ˜¯ä¸€ä¸ªéš¾é¢˜ã€‚ ä¹Ÿè®¸ä»–å¯¹ä»¥ä¸‹åº“çš„åŠŸèƒ½ä¸€æ— æ‰€çŸ¥ï¼Ÿ <br><br><h2> ç€ç« </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Fire</a>ä¸ä»…æ˜¯Googleæä¾›çš„ç”¨äºæ§åˆ¶å°ç•Œé¢çš„å¹´è½»åº“ï¼ˆäº2017å¹´å‡ºç°ï¼‰ï¼Œå®ƒè¿˜æ˜¯ä¸€ä¸ªç”¨äºä»¥é€å­—å¼•å·ç”Ÿæˆ<i>ç»å¯¹ä»»ä½•</i> Python <i>å¯¹è±¡çš„</i>æ§åˆ¶å°ç•Œé¢çš„åº“ã€‚ <br> é™¤å…¶ä»–å¤–ï¼Œæ®æŒ‡å‡ºï¼Œfireæœ‰åŠ©äºä»£ç çš„å¼€å‘å’Œè°ƒè¯•ï¼Œæœ‰åŠ©äºè°ƒæ•´CLIä¸­çš„ç°æœ‰ä»£ç ï¼Œä¿ƒè¿›ä»bashåˆ°Pythonçš„è¿‡æ¸¡ï¼Œå¹¶å…·æœ‰è‡ªå·±çš„REPLç”¨äºäº¤äº’å·¥ä½œã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å—ï¼Ÿ <br><br><h4> è§£æå™¨å’Œä¸» </h4><br>  fire.Fireå®é™…ä¸Šèƒ½å¤Ÿæ¥å—ä»»ä½•å¯¹è±¡ï¼šæ¨¡å—ï¼Œç±»å®ä¾‹ï¼Œå…·æœ‰å‘½ä»¤åç§°å’Œç›¸åº”åŠŸèƒ½çš„å­—å…¸ç­‰ã€‚ <br><br> å¯¹æˆ‘ä»¬è€Œè¨€é‡è¦çš„æ˜¯Fireå…è®¸ä¼ è¾“ç±»å¯¹è±¡ã€‚ å› æ­¤ï¼Œç±»æ„é€ å‡½æ•°æ¥å—æ‰€æœ‰å‘½ä»¤å…±æœ‰çš„å‚æ•°ï¼Œå¹¶ä¸”å…¶æ–¹æ³•å’Œå±æ€§æ˜¯å•ç‹¬çš„å‘½ä»¤ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨æ­¤ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">æºä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Commands</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, db=None, verbose=False)</span></span></span><span class="hljs-function">:</span></span> level = logging.INFO <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> verbose <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> logging.WARNING logging.basicConfig(level=level) logging.getLogger(<span class="hljs-string"><span class="hljs-string">"todolib"</span></span>).setLevel(level) self._app = todolib.TodoApp.fromenv(db) atexit.register(self._app.save) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">version</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> todolib.__version__ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, task)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"""Add new task."""</span></span> task = self._app.add_task(task) print(task, <span class="hljs-string"><span class="hljs-string">"created with number"</span></span>, task.number, end=<span class="hljs-string"><span class="hljs-string">".\n"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, show_done=False)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Show current tasks. """</span></span> self._app.print_tasks(show_done) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">done</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, number)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Mark task as done. """</span></span> task = self._app.task_done(number) print(task, <span class="hljs-string"><span class="hljs-string">"marked as done."</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, number)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Removes task from the list. """</span></span> task = self._app.remove_task(number) print(task, <span class="hljs-string"><span class="hljs-string">"removed from the list."</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args=None)</span></span></span><span class="hljs-function">:</span></span> fire.Fire(Commands, command=args)</code> </pre><br></div></div><br><h4> å†…è”æ ‡å¿— </h4><br>  Fireæœ‰è‡ªå·±çš„å¸¦æœ‰ç‰¹æ®Šè¯­æ³•çš„æ ‡å¿—ï¼ˆå¿…é¡»åœ¨â€œ-â€ä¹‹åä¼ é€’å®ƒä»¬ï¼‰ï¼Œè¿™ä½¿æ‚¨å¯ä»¥åœ¨è§£æå™¨å’Œæ•´ä¸ªåº”ç”¨ç¨‹åºçš„å†…éƒ¨è¿›è¡ŒæŸ¥çœ‹ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">é€šè¯èŒƒä¾‹</b> <div class="spoiler_text"><pre> <code class="bash hljs">$ ./todo_fire.py show -- --trace Fire trace: 1. Initial component 2. Instantiated class <span class="hljs-string"><span class="hljs-string">"Commands"</span></span> (todo_fire.py:9) 3. Accessed property <span class="hljs-string"><span class="hljs-string">"show"</span></span> (todo_fire.py:25) $ ./todo_fire.py -- --verbose | head -n 12 <span class="hljs-comment"><span class="hljs-comment">#    , ,  Commands._app NAME todo_fire.py - SYNOPSIS todo_fire.py - GROUP | COMMAND GROUPS GROUP is one of the following: _app Todo Application definition. $ ./todo_fire.py show -- --interactive Fire is starting a Python REPL with the following objects: Modules: atexit, fire, logging, todolib Objects: Commands, args, component, main, result, self, todo_fire.py, trace Python 3.7.4 (default, Aug 15 2019, 13:09:37) [GCC 7.4.0] on linux Type "help", "copyright", "credits" or "license" for more information. (InteractiveConsole) &gt;&gt;&gt; self &lt;__main__.Commands object at 0x7fd0a6125bd0&gt; &gt;&gt;&gt; self._app.db {'tasks': [{'title': 'test', 'done': False}]}</span></span></code> </pre><br></div></div><br><h4> æµ‹è¯•ä¸­ </h4><br> æµ‹è¯•ä¸»è¦åŠŸèƒ½ä¸æµ‹è¯•argparseå’Œdocoptç›¸ä¼¼ï¼Œå› æ­¤æˆ‘åœ¨è¿™é‡Œçœ‹ä¸åˆ°é‡ç‚¹ã€‚ <br><br> åŒæ—¶ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”±äºFireå…·æœ‰è‡ªçœæ€§ï¼Œå› æ­¤åŒæ ·æœ‰å¯èƒ½ç«‹å³æµ‹è¯•Commandsç±»ã€‚ <br><br><h4> æ€»ç»“ </h4><br> ç«æ˜¯ä¸€ç§ä¸å•å‡»åŒæ ·æœ‰è¶£çš„å·¥å…·ã€‚ å®ƒä¸éœ€è¦åœ¨è§£æå™¨ä¸­åˆ—å‡ºå¾ˆå¤šé€‰é¡¹ï¼Œé…ç½®æœ€å°‘ï¼Œæœ‰ç”¨äºè°ƒè¯•çš„é€‰é¡¹ï¼Œå¹¶ä¸”åº“æœ¬èº«çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç”Ÿå­˜å’Œå¼€å‘</a>è¿œæ¯”å•å‡»ï¼ˆä»Šå¹´å¤å¤©æäº¤60é¡¹ï¼‰æ›´ä¸ºæ´»è·ƒã€‚ <br><br> ç¼ºç‚¹ï¼šå¯ä»¥å¤§å¤§å°‘äºç‚¹å‡»å’Œå…¶ä»–è§£æå™¨ï¼› ä¸ç¨³å®šçš„APIï¼ˆå½“å‰ç‰ˆæœ¬ä¸º0.2.1ï¼‰ã€‚ <br><br><h2> æ°´æ³¥å‚ </h2><br> å®é™…ä¸Šï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Cement</a>å¹¶ä¸å®Œå…¨æ˜¯CLIåº“ï¼Œè€Œæ˜¯ç”¨äºæ§åˆ¶å°åº”ç”¨ç¨‹åºçš„æ¡†æ¶ï¼Œä½†æ˜¯æ®ç§°å®ƒé€‚ç”¨äºå…·æœ‰å„ç§é›†æˆçš„è„šæœ¬å’Œå¤æ‚åº”ç”¨ç¨‹åºã€‚ <br><br><h4> è§£æå™¨ </h4><br>  Cementä¸­çš„è§£æå™¨çœ‹èµ·æ¥å¾ˆä¸å¯»å¸¸ï¼Œä½†æ˜¯å¦‚æœä»”ç»†çœ‹ä¸€ä¸‹å‚æ•°ï¼Œå°±å¾ˆå®¹æ˜“çŒœåˆ°ç†Ÿæ‚‰çš„argparseæ˜¯åœ¨å¹•åã€‚ ä½†è¿™ä¹Ÿè®¸æ˜¯æœ€å¥½çš„-æ— éœ€å­¦ä¹ æ–°å‚æ•°ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æºä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> cement <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Controller, ex <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Controller)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> label = <span class="hljs-string"><span class="hljs-string">"base"</span></span> arguments = [ ( [<span class="hljs-string"><span class="hljs-string">"-v"</span></span>, <span class="hljs-string"><span class="hljs-string">"--version"</span></span>], {<span class="hljs-string"><span class="hljs-string">"action"</span></span>: <span class="hljs-string"><span class="hljs-string">"version"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">f"todo_cement v</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{todolib.__version__}</span></span></span><span class="hljs-string">"</span></span>}, ) ] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_default</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"""Default action if no sub-command is passed."""</span></span> self.app.args.print_help() @ex(help=<span class="hljs-string"><span class="hljs-string">"Add new task"</span></span>, arguments=[([<span class="hljs-string"><span class="hljs-string">"task"</span></span>], {<span class="hljs-string"><span class="hljs-string">"help"</span></span>: <span class="hljs-string"><span class="hljs-string">"Task title"</span></span>})]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> title = self.app.pargs.task self.app.log.debug(<span class="hljs-string"><span class="hljs-string">f"Task title: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{title!r}</span></span></span><span class="hljs-string">"</span></span>) task = self.app.todoobj.add_task(title) print(task, <span class="hljs-string"><span class="hljs-string">"created with number"</span></span>, task.number, end=<span class="hljs-string"><span class="hljs-string">".\n"</span></span>) @ex( help=<span class="hljs-string"><span class="hljs-string">"Show current tasks"</span></span>, arguments=[ ([<span class="hljs-string"><span class="hljs-string">"--show-done"</span></span>], dict(action=<span class="hljs-string"><span class="hljs-string">"store_true"</span></span>, help=<span class="hljs-string"><span class="hljs-string">"Include done tasks"</span></span>)) ], ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.app.todoobj.print_tasks(self.app.pargs.show_done) @ex(help=<span class="hljs-string"><span class="hljs-string">"Mark task as done"</span></span>, arguments=[([<span class="hljs-string"><span class="hljs-string">"number"</span></span>], {<span class="hljs-string"><span class="hljs-string">"type"</span></span>: int})]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">done</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> task = self.app.todoobj.task_done(self.app.pargs.number) print(task, <span class="hljs-string"><span class="hljs-string">"marked as done."</span></span>) @ex(help=<span class="hljs-string"><span class="hljs-string">"Remove task from the list"</span></span>, arguments=[([<span class="hljs-string"><span class="hljs-string">"number"</span></span>], {<span class="hljs-string"><span class="hljs-string">"type"</span></span>: int})]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> task = self.app.todoobj.remove_task(self.app.pargs.number) print(task, <span class="hljs-string"><span class="hljs-string">"removed from the list."</span></span>)</code> </pre><br></div></div><br><h4> åº”ç”¨ç¨‹å¼å’Œä¸»è¦ </h4><br> é™¤å…¶ä»–äº‹é¡¹å¤–ï¼Œæ°´æ³¥ä»ç„¶å°†å¼‚å¸¸åŒ…è£¹èµ·æ¥ã€‚ è¿™åœ¨SIGINT / SIGTERMçš„é›¶ä»£ç è¾“å‡ºä¸­å¾—åˆ°äº†è¯æ˜ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æºä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoApp</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(App)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, argv=None)</span></span></span><span class="hljs-function">:</span></span> super().__init__(argv=argv) self.todoobj = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load_db</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.todoobj = todolib.TodoApp.fromenv() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.todoobj.save() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># application label label = "todo_cement" # register handlers handlers = [Base] hooks = [("post_setup", lambda app: app.load_db()), ("pre_close", lambda app: app.save())] # call sys.exit() on close close_on_exit = True def main(): with TodoApp() as app: try: app.run() except CaughtSignal as e: if e.signum not in (signal.SIGINT, signal.SIGTERM): raise app.log.debug(f"\n{e}") app.exit_code = 0</span></span></code> </pre><br></div></div><br> å¦‚æœæ‚¨è¯»è¿‡mainï¼Œåˆ™å¯ä»¥çœ‹åˆ°todolib.TodoAppçš„åŠ è½½å’Œä¿å­˜ä¹Ÿå¯ä»¥åœ¨è¦†ç›–çš„__enter __ / __ exit__ä¸­å®Œæˆï¼Œä½†æ˜¯è¿™äº›é˜¶æ®µæœ€ç»ˆè¢«åˆ†æˆäº†å•ç‹¬çš„æ–¹æ³•ï¼Œä»¥æ¼”ç¤ºCementé’©å­ã€‚ <br><br><h4> æµ‹è¯•ä¸­ </h4><br> ä¸ºäº†è¿›è¡Œæµ‹è¯•ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„åº”ç”¨ç¨‹åºç±»ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_cement</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(capsys)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> todo_cement.TodoApp(argv=[<span class="hljs-string"><span class="hljs-string">"add"</span></span>, <span class="hljs-string"><span class="hljs-string">"test"</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> app: app.run() out, _ = capsys.readouterr() <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> out == EXPECTED <span class="hljs-comment"><span class="hljs-comment">#     jinja,       assert app.last_rendered is None</span></span></code> </pre><br><h4> æ€»ç»“ </h4><br> ä¼˜ç‚¹ï¼šè¿™å¥—APIå°±åƒä¸€å¥—ç‘å£«åˆ€ï¼Œå¯é€šè¿‡é’©å­å’Œæ’ä»¶è¿›è¡Œæ‰©å±•ï¼Œå…·æœ‰ç¨³å®šçš„ç•Œé¢å’Œæ´»è·ƒçš„å¼€å‘èƒ½åŠ›ã€‚ <br><br> ç¼ºç‚¹ï¼šåœ¨ç©ºçš„æ–‡æ¡£ä¸­ï¼› å°å‹çš„åŸºäºCementçš„è„šæœ¬ä¼¼ä¹æœ‰äº›å¤æ‚ã€‚ <br><br><h2> å…‹è±å¥¥ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Cleo</a>è¿œä¸åƒè¿™é‡Œåˆ—å‡ºçš„å…¶ä»–æ¡†æ¶é‚£æ ·å—æ¬¢è¿ï¼ˆåœ¨GitHubä¸Šæ€»å…±æœ‰400é¢—æ˜Ÿï¼‰ï¼Œä½†æ˜¯å½“æˆ‘ç ”ç©¶Poetryæ ¼å¼åŒ–è¾“å‡ºæ—¶ï¼Œæˆ‘è®¾æ³•äº†è§£äº†å®ƒã€‚ <br><br> å› æ­¤ï¼ŒCleoæ˜¯å·²ç»æåˆ°çš„Poetryï¼ˆç”¨äºç®¡ç†ä¾èµ–é¡¹ï¼Œvirtualenvå’Œåº”ç”¨ç¨‹åºæ„å»ºçš„å·¥å…·ï¼‰çš„ä½œè€…çš„é¡¹ç›®ä¹‹ä¸€ã€‚ å…³äºhabrä¸Šçš„è¯—æ­Œå·²ç»å†™äº†ä¸æ­¢ä¸€æ¬¡äº†ï¼Œå…³äºå®ƒçš„æ§åˆ¶å°éƒ¨åˆ†-ä¸ã€‚ <br><br><h4> è§£æå™¨ </h4><br> åƒæ°´æ³¥ä¸€æ ·ï¼Œå…‹è±å¥¥ï¼ˆCleoï¼‰ä¹Ÿå»ºç«‹åœ¨å¯¹è±¡åŸåˆ™çš„åŸºç¡€ä¸Šï¼Œå³ é€šè¿‡Commandç±»åŠå…¶æ–‡æ¡£å­—ç¬¦ä¸²å®šä¹‰å‘½ä»¤ï¼Œé€šè¿‡optionï¼ˆï¼‰æ–¹æ³•è®¿é—®å‚æ•°ï¼Œä¾æ­¤ç±»æ¨ã€‚ å¦å¤–ï¼Œç”¨äºè¾“å‡ºæ–‡æœ¬çš„lineï¼ˆï¼‰æ–¹æ³•æ”¯æŒæ ·å¼ï¼ˆå³é¢œè‰²ï¼‰å¹¶æ ¹æ®å¼€ç®±å³ç”¨çš„è¯¦ç»†æ ‡è®°æ•°è¾“å‡ºè¿‡æ»¤ã€‚  Cleoè¿˜å…·æœ‰è¡¨è¾“å‡ºã€‚ è¿˜æœ‰è¿›åº¦æ¡ã€‚ ä½†æ˜¯...ä¸€èˆ¬è€Œè¨€ï¼Œè¯·å‚é˜…ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">æºä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> cleo <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Command <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> BaseCommand <span class="hljs-comment"><span class="hljs-comment"># cleo    clikit,          from clikit.api.io import flags as verbosity class Command(BaseCommand): def __init__(self): super().__init__() self.todoapp = None def handle(self): with todolib.TodoApp.fromenv() as app: self.todoapp = app self.do_handle() def do_handle(self): raise NotImplementedError class AddCommand(Command): """ Add new task. add {task : Task to add} """ def do_handle(self): title = self.argument("task") task = self.todoapp.add_task(title) # will be printed only on "-vvv" self.line(f"Title: {title}", style="comment", verbosity=verbosity.DEBUG) self.line(f"Task &lt;info&gt;{task.title}&lt;/&gt; created with number {task.number}.") class ShowCommand(Command): """ Show current tasks. show {--show-done : Include tasks that are done.} """ def do_handle(self): tasks = self.todoapp.list_tasks(self.option("show-done")) if not tasks: self.line("There is no TODOs.", style="info") self.render_table( ["Number", "Title", "Status"], [ [str(task.number), task.title, "" if task.done else "âœ˜"] for task in tasks ], ) class DoneCommand(Command): """ Mark task as done. done {number : Task number} """ def do_handle(self): task = self.todoapp.task_done(int(self.argument("number"))) self.line(f"Task &lt;info&gt;{task.title}&lt;/&gt; marked as done.") class RemoveCommand(Command): """ Removes task from the list. remove {number : Task number} """ def do_handle(self): task = self.todoapp.remove_task(int(self.argument("number"))) self.line(f"Task &lt;info&gt;{task.title}&lt;/&gt; removed from the list.")</span></span></code> </pre><br></div></div><br><h4> ä¸»è¦çš„ </h4><br> éœ€è¦åšçš„åªæ˜¯åˆ›å»ºä¸€ä¸ª<i>cleo.Application</i>å¯¹è±¡ï¼Œç„¶åå°†å‘½ä»¤ä¼ é€’ç»™add_commandsã€‚ ä¸ºäº†åœ¨æµ‹è¯•æœŸé—´ä¸é‡å¤ï¼Œæ‰€æœ‰è¿™äº›éƒ½ä»mainè½¬ç§»åˆ°äº†æ„é€ å‡½æ•°ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> cleo <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Application <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> BaseApplication <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoApp</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(BaseApplication)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> super().__init__(name=<span class="hljs-string"><span class="hljs-string">"ToDo app - cleo version"</span></span>, version=todolib.__version__) self.add_commands(AddCommand(), ShowCommand(), DoneCommand(), RemoveCommand()) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args=None)</span></span></span><span class="hljs-function">:</span></span> TodoApp().run(args=args)</code> </pre><br><h4> æµ‹è¯•ä¸­ </h4><br> ä¸ºäº†åœ¨Cleoä¸­æµ‹è¯•å‘½ä»¤ï¼Œæœ‰<i>CommandTester</i> ï¼Œå®ƒ<s>ä¸</s>æ¡†æ¶çš„æ‰€æœ‰æˆå¹´<s>å”å”</s>ä¸€æ ·ï¼Œæ‹¦æˆªI / Oå¹¶é€€å‡ºä»£ç ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_cleo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> app = todo_cleo.TodoApp() command = app.find(<span class="hljs-string"><span class="hljs-string">"add"</span></span>) tester = cleo.CommandTester(command) tester.execute(<span class="hljs-string"><span class="hljs-string">"test"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> tester.status_code == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> tester.io.fetch_output() == <span class="hljs-string"><span class="hljs-string">"Task test created with number 0.\n"</span></span></code> </pre><br><h4> æ€»ç»“ </h4><br> ä¼˜ç‚¹ï¼šå¸¦ç±»å‹æç¤ºçš„å¯¹è±¡ç»“æ„ï¼Œå¯ç®€åŒ–å¼€å‘ï¼ˆå› ä¸ºè®¸å¤šIDEå’Œç¼–è¾‘å™¨éƒ½å¯¹OOPä»£ç å’Œé”®å…¥æ¨¡å—æä¾›äº†å¾ˆå¥½çš„æ”¯æŒï¼‰ï¼› å¤§é‡çš„åŠŸèƒ½ä¸ä»…å¯ä»¥å¤„ç†å‚æ•°ï¼Œè¿˜å¯ä»¥å¤„ç†I / Oã€‚ <br><br> åŠ æˆ–å‡ï¼šå…¶è¯¦ç»†å‚æ•°ï¼Œä»…ä¸I / O Cleo / CliKitå…¼å®¹ã€‚ å°½ç®¡å¯ä»¥ä¸ºæ—¥å¿—è®°å½•æ¨¡å—ç¼–å†™è‡ªå®šä¹‰å¤„ç†ç¨‹åºï¼Œä½†æ˜¯éšç€cleoçš„å¼€å‘ï¼Œå¯èƒ½å¾ˆéš¾ç»´æŠ¤å®ƒã€‚ <br><br> ç¼ºç‚¹ï¼šå¾ˆæ˜æ˜¾-ä¸ªäººè§‚ç‚¹-ä¸€ä¸ªå¹´è½»çš„APIï¼šè¯¥æ¡†æ¶é™¤â€œè¯—æ­Œâ€å¤–ç¼ºå°‘å¦ä¸€ä¸ªâ€œå¤§å‹â€ç”¨æˆ·ï¼ŒCleoçš„å¼€å‘ä¸å¼€å‘å¹¶è¡Œå¹¶æ»¡è¶³ä¸€ä¸ªäººçš„éœ€æ±‚ï¼› æœ‰æ—¶æ–‡æ¡£è¿‡æ—¶äº†ï¼ˆä¾‹å¦‚ï¼Œæ—¥å¿—è®°å½•çº§åˆ«ç°åœ¨ä¸åœ¨clikitæ¨¡å—ä¸­ï¼Œè€Œæ˜¯åœ¨clikit.api.io.flagsä¸­ï¼‰ï¼Œå¹¶ä¸”é€šå¸¸æƒ…å†µä¸‹æ•ˆæœä¸ä½³ï¼Œæ— æ³•åæ˜ æ•´ä¸ªAPIã€‚ <br><br> ä¸Cementç›¸æ¯”ï¼ŒCleoæ›´åŠ ä¸“æ³¨äºCLIï¼Œå¹¶ä¸”ä»–æ˜¯å”¯ä¸€è€ƒè™‘è¿‡æ ¼å¼åŒ–é»˜è®¤è¾“å‡ºä¸­çš„å¼‚å¸¸ï¼ˆéšè—é»˜è®¤å †æ ˆè·Ÿè¸ªï¼‰çš„äººã€‚ ä½†æ˜¯ï¼Œä»–ï¼ˆä¹Ÿæ˜¯ä¸ªäººè§‚ç‚¹ï¼‰åœ¨å…¶é’å¹´æ—¶æœŸå’ŒAPIçš„ç¨³å®šæ€§æ–¹é¢è¾“ç»™äº†Cementã€‚ <br><br><h2> æ€»ç»“ </h2><br> è‡³æ­¤ï¼Œæ¯ä¸ªäººéƒ½å·²ç»æœ‰äº†è‡ªå·±çš„çœ‹æ³•ï¼Œè¿™æ˜¯æ›´å¥½çš„ï¼Œä½†ç»“è®ºåº”è¯¥æ˜¯ï¼šæˆ‘æœ€å–œæ¬¢Clickï¼Œå› ä¸ºå…¶ä¸­åŒ…å«å¾ˆå¤šä¸œè¥¿ï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒå¼€å‘å’Œæµ‹è¯•åº”ç”¨ç¨‹åºéå¸¸å®¹æ˜“ã€‚ å¦‚æœæ‚¨å°è¯•ç¼–å†™æœ€å°‘çš„ä»£ç -è¯·ä»Fireå¼€å§‹ã€‚ æ‚¨çš„è„šæœ¬éœ€è¦è®¿é—®Memcachedï¼Œä½¿ç”¨jinjaè¿›è¡Œæ ¼å¼è®¾ç½®å’Œå¯æ‰©å±•æ€§-ä½¿ç”¨Cementï¼Œæ‚¨å°†ä¸ä¼šåæ‚”ã€‚ æ‚¨æœ‰ä¸€ä¸ªå® ç‰©é¡¹ç›®ï¼Œæˆ–è€…æƒ³å°è¯•å…¶ä»–ä¸œè¥¿-çœ‹ä¸€ä¸‹cleoã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN466999/">https://habr.com/ru/post/zh-CN466999/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN466983/index.html">ä¸ºä»€ä¹ˆæ²¡äººèƒ½å‡»è´¥ç‰¹æ–¯æ‹‰</a></li>
<li><a href="../zh-CN466985/index.html">å…³äºæ–°çš„C ++æ ‡å‡†</a></li>
<li><a href="../zh-CN466987/index.html">éå…¸å‹çš„â€œ lsâ€æˆ–å¦‚ä½•æ‹›å¾…linuxoids</a></li>
<li><a href="../zh-CN466993/index.html">é…ç½®è­¦å‘Šä¸‹ä¸€ä»£æ’ä»¶ä»¥ä¸PVS-Studioé›†æˆ</a></li>
<li><a href="../zh-CN466995/index.html">ä¸ºPVS-Studioé›†æˆé…ç½®è­¦å‘Šä¸‹ä¸€ä»£æ’ä»¶</a></li>
<li><a href="../zh-CN467003/index.html">é€‚ç”¨äº1075ä¸ªç±»åˆ«çš„å¿«é€Ÿï¼Œä¾¿æ·ï¼Œè‡ªé€‚åº”èœå•ï¼ˆ36000ä¸ªäº§å“ï¼‰</a></li>
<li><a href="../zh-CN467005/index.html">å¦‚ä½•æ­£ç¡®ä¸ºå¤šé¡¹å¼ç€è‰²</a></li>
<li><a href="../zh-CN467007/index.html">FLProg-ç‹¬ç«‹é›†æˆåˆ°è‡ªå®šä¹‰æ§åˆ¶å™¨çš„ç¨‹åºä¸­</a></li>
<li><a href="../zh-CN467009/index.html">ä½¿ç”¨Notionå’ŒPythonåˆ¶ä½œå®¶åº­å›¾ä¹¦é¦†</a></li>
<li><a href="../zh-CN467011/index.html">æ•°æ®ç§‘å­¦å…¥é—¨è¦é˜…è¯»å’Œçœ‹çš„å†…å®¹ï¼šä¹¦ç±ï¼Œå­—å…¸å’Œè¯¾ç¨‹</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>