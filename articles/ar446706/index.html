<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐๐ฝ ๐ท ุงุณุชูุณุงุฑุงุช ููุงุฒูุฉ ูู ุจูุณุชุฌุฑุณ ๐ ๐ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุงู ุงููุซูุฑ ูู ุงูููู ูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงูุญุฏูุซุฉ. ูุนุฏุฉ ุณููุงุช ุ ุฃุฑุณูุช ุงูุชุทุจููุงุช ุงุณุชุนูุงูุงุช ุฅูู ููุงุนุฏ ุงูุจูุงูุงุช ุจุดูู ูุชูุงุฒ. ุฅุฐุง ูุงู ูุฐุง ุงุณุชุนูุงููุง ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงุณุชูุณุงุฑุงุช ููุงุฒูุฉ ูู ุจูุณุชุฌุฑุณ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/446706/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/kx/ht/dl/kxhtdlsry_f8p1jv2ve_1ziks7e.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ููุงู ุงููุซูุฑ ูู ุงูููู ูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงูุญุฏูุซุฉ.  ูุนุฏุฉ ุณููุงุช ุ ุฃุฑุณูุช ุงูุชุทุจููุงุช ุงุณุชุนูุงูุงุช ุฅูู ููุงุนุฏ ุงูุจูุงูุงุช ุจุดูู ูุชูุงุฒ.  ุฅุฐุง ูุงู ูุฐุง ุงุณุชุนูุงููุง ููุฅุจูุงุบ ุนู ุงูุนุฏูุฏ ูู ุงูุตููู ูู ุงูุฌุฏูู ุ ูุณูุชู ุชุดุบููู ุจุดูู ุฃุณุฑุน ุนูุฏูุง ูุณุชุฎุฏู ูุญุฏุงุช ูุนุงูุฌุฉ ูุฑูุฒูุฉ ูุชุนุฏุฏุฉ ุ ููู PostgreSQL ูููู ูู ุงููููู ุงูุจุฏุก ูู ุงูุฅุตุฏุงุฑ 9.6. </p><br><p style=";text-align:right;direction:rtl">  ุงุณุชุบุฑู ุงูุฃูุฑ 3 ุณููุงุช ูุชูููุฐ ูุธููุฉ ุงูุงุณุชุนูุงู ุงูููุงุฒู - ูุงุถุทุฑุฑุช ุฅูู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ูุฑุงุญู ูุฎุชููุฉ ูู ุชูููุฐ ุงูุงุณุชุนูุงู.  ูุฏู PostgreSQL 9.6 ุจููุฉ ุชุญุชูุฉ ูุฒูุงุฏุฉ ุชุญุณูู ุงูุฑูุฒ.  ูู ุงูุฅุตุฏุงุฑุงุช ุงููุงุญูุฉ ุ ูุชู ุชูููุฐ ุฃููุงุน ุฃุฎุฑู ูู ุงูุงุณุชุนูุงูุงุช ุจุงูุชูุงุฒู. </p><a name="habracut"></a><br><h3 id="ogranicheniya" style=";text-align:right;direction:rtl">  ูููุฏ </h3><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุง ุชูู ุจุชูููู ุงูุชูููุฐ ุงูููุงุฒู ุฅุฐุง ูุงูุช ุฌููุน ุงูููู ูุฃุฎูุฐุฉ ุจุงููุนู ุ ูุฅูุง ุณุชุชุจุงุทุฃ ุงูุทูุจุงุช ุงูุฃุฎุฑู. </li><li style=";text-align:right;direction:rtl">  ุงูุฃูู ูู ุฐูู ุ ุชุณุชููู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ ูุน ููู WORK_MEM ุนุงููุฉ ุงููุซูุฑ ูู ุงูุฐุงูุฑุฉ - ูู ุฑุงุจุท ุงูุชุฌุฒุฆุฉ ุฃู ุงููุฑุฒ ูุฃุฎุฐ ุงูุฐุงูุฑุฉ ูู ููุฏุงุฑ ุงูุนูู. </li><li style=";text-align:right;direction:rtl">  ูุง ูููู ุชุณุฑูุน ุทูุจุงุช OLTP ููุฎูุถุฉ ุฒูู ุงููุตูู ุนู ุทุฑูู ุงูุชูููุฐ ุงููุชูุงุฒู.  ูุฅุฐุง ุฃุฑุฌุน ุงูุงุณุชุนูุงู ุตููุง ูุงุญุฏูุง ุ ูุณุชุนูู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ ุนูู ุฅุจุทุงุฆู. </li><li style=";text-align:right;direction:rtl">  ูุญุจ ุงููุทูุฑูู ุงุณุชุฎุฏุงู ูุนูุงุฑ TPC-H.  ุฑุจูุง ูุฏูู ุงุณุชูุณุงุฑุงุช ููุงุซูุฉ ููุชูููุฐ ุงููุชูุงุฒู ุงููุซุงูู. </li><li style=";text-align:right;direction:rtl">  ูุชู ุชูููุฐ ุงุณุชุนูุงูุงุช SELECT ููุท ุจุฏูู ุฃููุงู ูุณุงููุฉ ุจุงูุชูุงุฒู. </li><li style=";text-align:right;direction:rtl">  ุชููู ุงูููุฑุณุฉ ุงูุตุญูุญุฉ ูู ุจุนุถ ุงูุฃุญูุงู ุฃูุถู ูู ุนูููุงุช ุงููุณุญ ุงููุชุณูุณูุฉ ููุฌุฏูู ุจุงูุชูุงุฒู. </li><li style=";text-align:right;direction:rtl">  ุชุนููู ุงูุงุณุชุนูุงูุงุช ูุงููุคุดุฑุงุช ุบูุฑ ูุฏุนูู. </li><li style=";text-align:right;direction:rtl">  ูุธุงุฆู ุงููุงูุฐุฉ ูุงููุธุงุฆู ุงูุฅุฌูุงููุฉ ูููุฌููุนุงุช ุงููุทููุจุฉ ููุณุช ูุชูุงุฒูุฉ. </li><li style=";text-align:right;direction:rtl">  ูุง ุชูุณุจ ุดูุฆูุง ูู ุนุจุก ุงูุนูู I / O. </li><li style=";text-align:right;direction:rtl">  ูุง ุชูุฌุฏ ุฎูุงุฑุฒููุงุช ูุฑุฒ ูุชูุงุฒูุฉ.  ููู ูููู ุชูููุฐ ุงูุงุณุชุนูุงูุงุช ุงููุตููุฉ ุจุงูุชูุงุฒู ูู ุจุนุถ ุงูุฌูุงูุจ. </li><li style=";text-align:right;direction:rtl"> ุงุณุชุจุฏู CTE (WITH ...) ุจู SELECT ุงููุชุฏุงุฎู ูุชูููู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ. </li><li style=";text-align:right;direction:rtl">  ูุง ุชุฏุนู ูุบููุงุช ุงูุจูุงูุงุช ุงูุชุงุจุนุฉ ูุฌูุงุช ุฃุฎุฑู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ (ููู ูููููุง!) </li><li style=";text-align:right;direction:rtl">  JOIN FULL OUTER ุบูุฑ ูุฏุนูู. </li><li style=";text-align:right;direction:rtl">  max_rows ูุนุทู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ููุทูุจ ูุธููุฉ ูู ูุชู ุชูููุฒูุง ุนูู ุฃููุง PARALLEL SAFE ุ ูุณุชููู ูุชุฑุงุจุทุฉ. </li><li style=";text-align:right;direction:rtl">  ูุณุชูู ุนุฒู ุงููุนุงููุฉ SERIALIZABLE ูุนุทู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ. </li></ul><br><h3 id="testovaya-sreda" style=";text-align:right;direction:rtl">  ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ </h3><br><p style=";text-align:right;direction:rtl">  ุญุงูู ูุทูุฑู PostgreSQL ุชูููู ููุช ุงุณุชุฌุงุจุฉ ุงุณุชุนูุงูุงุช ุงุฎุชุจุงุฑ TPC-H.  ูู ุจุชูุฒูู ุงููุนูุงุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชููููู ูุน PostgreSQL</a> .  ูุฐุง ุงุณุชุฎุฏุงู ุบูุฑ ุฑุณูู ููุนูุงุฑ TPC-H - ูููุณ ูููุงุฑูุฉ ููุงุนุฏ ุงูุจูุงูุงุช ุฃู ุงูุฃุฌูุฒุฉ. </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุจุชูุฒูู TPC-H_Tools_v2.17.3.zip (ุฃู ุฅุตุฏุงุฑ ุฃุญุฏุซ) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู TPC ุฎุงุฑุฌ ุงููููุน</a> . </li><li style=";text-align:right;direction:rtl">  ุฅุนุงุฏุฉ ุชุณููุฉ makefile.suite ุฅูู Makefile ูุชุบููุฑูุง ููุง ูู ููุถุญ ููุง: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://github.com/tvondra/pg_tpch</a> .  ุชุฑุฌูุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ make. </li><li style=";text-align:right;direction:rtl"> ุชูููุฏ ุงูุจูุงูุงุช: <code>./dbgen -s 10</code> ุชูุดุฆ ูุงุนุฏุฉ ุจูุงูุงุช 23 ุฌูุฌุงุจุงูุช.  ูุฐุง ูููู ููุนุฑูุฉ ุงููุฑู ูู ุฃุฏุงุก ุงูุงุณุชุนูุงูุงุช ุงููุชูุงุฒูุฉ ูุบูุฑ ุงููุชูุงุฒูุฉ. </li><li style=";text-align:right;direction:rtl">  ุชุญููู ูููุงุช <code>tbl</code> ุฅูู <code>csv  for</code> ู <code>sed</code> . </li><li style=";text-align:right;direction:rtl">  ูู ุจูุณุฎ ูุณุชูุฏุน pg_tpch ูุงูุณุฎ <code>csv</code> ุฅูู <code>pg_tpch/dss/data</code> . </li><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุงุณุชุนูุงูุงุช ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ <code>qgen</code> . </li><li style=";text-align:right;direction:rtl">  ูู ุจุชุญููู ุงูุจูุงูุงุช ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ <code>./tpch.sh</code> . </li></ol><br><h3 id="parallelnoe-posledovatelnoe-skanirovanie" style=";text-align:right;direction:rtl">  ุงููุณุญ ุงููุชุณูุณู ุงูููุงุฒู </h3><br><p style=";text-align:right;direction:rtl">  ูุฏ ูููู ุฃุณุฑุน ููุณ ุจุณุจุจ ุงููุฑุงุกุฉ ุงููุชูุงุฒูุฉ ุ ูููู ุจุณุจุจ ุชูุงุซุฑ ุงูุจูุงูุงุช ุนุจุฑ ุงูุนุฏูุฏ ูู ูุฑุงูุฒ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ูู ุฃูุธูุฉ ุงูุชุดุบูู ุงูุญุฏูุซุฉ ุ ูุชู ุชุฎุฒูู ูููุงุช ุจูุงูุงุช PostgreSQL ุจุดูู ุฌูุฏ.  ูู ุฎูุงู ุงููุฑุงุกุฉ ุงููุณุจูุฉ ุ ููููู ุงูุญุตูู ุนูู ุงููุฒูุฏ ูู ูุญุฏุฉ ุงูุชุฎุฒูู ุฃูุซุฑ ูู ุทูุจุงุช ุงูุจุฑูุงูุฌ ุงูุฎูู PG.  ูุฐูู ุ ูุง ููุชุตุฑ ุฃุฏุงุก ุงูุงุณุชุนูุงู ุนู ุทุฑูู ุฅุฏุฎุงู / ุฅุฎุฑุงุฌ ุงููุฑุต.  ูุณุชููู ุฏูุฑุงุช CPU ุฅูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ุงูุฃุณุทุฑ ูุงุญุฏุงู ุชูู ุงูุขุฎุฑ ูู ุตูุญุงุช ุงูุฌุฏูู ุ </li><li style=";text-align:right;direction:rtl">  ููุงุฑูุฉ ููู ุงูุณูุณูุฉ ู ุฌูู <code>WHERE</code> . </li></ul><br><p style=";text-align:right;direction:rtl">  ูููู ุจุชุดุบูู ุงุณุชุนูุงู <code>select</code> ุจุณูุท: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">tpch=# explain analyze select l_quantity as sum_qty from lineitem where l_shipdate &lt;= date '1998-12-01' - interval '105' day; QUERY PLAN -------------------------------------------------------------------------------------------------------------------------- Seq Scan on lineitem (cost=0.00..1964772.00 rows=58856235 width=5) (actual time=0.014..16951.669 rows=58839715 loops=1) Filter: (l_shipdate &lt;= '1998-08-18 00:00:00'::timestamp without time zone) Rows Removed by Filter: 1146337 Planning Time: 0.203 ms Execution Time: 19035.100 ms</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนุทู ุงููุญุต ุงููุชุณูุณู ุนุฏุฏูุง ูุจูุฑูุง ุฌุฏูุง ูู ุงูุตููู ุฏูู ุชุฌููุน ุ ูุฐูู ูุชู ุชูููุฐ ุงูุทูุจ ุจูุงุณุทุฉ ูุญุฏุฉ ูุนุงูุฌุฉ ูุฑูุฒูุฉ ูุงุญุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุฃุถูุช <code>SUM()</code> ุ ูุณุชุฑู ุฃู ุณูุฑุชู ุนูู ุณุชุณุงุนุฏ ูู ุชุณุฑูุน ุงูุทูุจ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">explain analyze select sum(l_quantity) as sum_qty from lineitem where l_shipdate &lt;= date '1998-12-01' - interval '105' day; QUERY PLAN ---------------------------------------------------------------------------------------------------------------------------------------------------- Finalize Aggregate (cost=1589702.14..1589702.15 rows=1 width=32) (actual time=8553.365..8553.365 rows=1 loops=1) -&gt; Gather (cost=1589701.91..1589702.12 rows=2 width=32) (actual time=8553.241..8555.067 rows=3 loops=1) Workers Planned: 2 Workers Launched: 2 -&gt; Partial Aggregate (cost=1588701.91..1588701.92 rows=1 width=32) (actual time=8547.546..8547.546 rows=1 loops=3) -&gt; Parallel Seq Scan on lineitem (cost=0.00..1527393.33 rows=24523431 width=5) (actual time=0.038..5998.417 rows=19613238 loops=3) Filter: (l_shipdate &lt;= '1998-08-18 00:00:00'::timestamp without time zone) Rows Removed by Filter: 382112 Planning Time: 0.241 ms Execution Time: 8555.131 ms</code> </pre> <br><h3 id="parallelnaya-agregaciya" style=";text-align:right;direction:rtl">  ุงูุชุฌููุน ุงูููุงุฒู </h3><br><p style=";text-align:right;direction:rtl">  ุชููุชุฌ ุนูุฏุฉ Parallel Seq Scan ุณูุงุณู ููุชุฌููุน ุงูุฌุฒุฆู.  ุนูุฏุฉ ุงูุชุฌููุน ุงูุฌุฒุฆู ุจุงูุชุทุงุน ูุฐู ุงูุฎุทูุท ุจุงุณุชุฎุฏุงู <code>SUM()</code> .  ูู ุงูููุงูุฉ ุ ูุชู ุฌูุน ุงูุนุฏุงุฏ SUM ูู ูู ุณูุฑ ุนูู ุจูุงุณุทุฉ ุนูุฏุฉ Gather. </p><br><p style=";text-align:right;direction:rtl">  ูุชู ุงุญุชุณุงุจ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ุจูุงุณุทุฉ ุงูุนูุฏุฉ "Finalize Aggregate".  ุฅุฐุง ูุงู ูุฏูู ูุธุงุฆู ุงูุชุฌููุน ุงูุฎุงุตุฉ ุจู ุ ูุชุฃูุฏ ูู ุชูููุฒูุง ุนูู ุฃููุง "ุขููุฉ ููุงุฒูุฉ". </p><br><h3 id="kolichestvo-rabochih-processov" style=";text-align:right;direction:rtl">  ุนุฏุฏ ูู ุณูุฑ ุงูุนูู </h3><br><p style=";text-align:right;direction:rtl">  ูููู ุฒูุงุฏุฉ ุนุฏุฏ ููุงู ุณูุฑ ุงูุนูู ุฏูู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">alter system set max_parallel_workers_per_gather=4; select * from pg_reload_conf();</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุฑู 4 ุนูุงู ูู ุดุฑุญ ุงููุฎุฑุฌุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">tpch=# explain analyze select sum(l_quantity) as sum_qty from lineitem where l_shipdate &lt;= date '1998-12-01' - interval '105' day; QUERY PLAN ---------------------------------------------------------------------------------------------------------------------------------------------------- Finalize Aggregate (cost=1440213.58..1440213.59 rows=1 width=32) (actual time=5152.072..5152.072 rows=1 loops=1) -&gt; Gather (cost=1440213.15..1440213.56 rows=4 width=32) (actual time=5151.807..5153.900 rows=5 loops=1) Workers Planned: 4 Workers Launched: 4 -&gt; Partial Aggregate (cost=1439213.15..1439213.16 rows=1 width=32) (actual time=5147.238..5147.239 rows=1 loops=5) -&gt; Parallel Seq Scan on lineitem (cost=0.00..1402428.00 rows=14714059 width=5) (actual time=0.037..3601.882 rows=11767943 loops=5) Filter: (l_shipdate &lt;= '1998-08-18 00:00:00'::timestamp without time zone) Rows Removed by Filter: 229267 Planning Time: 0.218 ms Execution Time: 5153.967 ms</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ุงูุฐู ูุญุฏุซ ููุงุ  ูุงู ููุงู ุงููุฒูุฏ ูู ุณูุฑ ุงูุนูู ูุฑุชูู ุ ููุงู ุงูุทูุจ ุฃุณุฑุน 1.6599 ูุฑุฉ.  ุงูุญุณุงุจุงุช ูุซูุฑุฉ ููุงูุชูุงู.  ูุงู ูุฏููุง 2 ุนูููุงุช ุงูุนูู ูุงููุงุฆุฏ 1.  ุจุนุฏ ุงูุชุบููุฑ ุ ุฃุตุจุญ 4 + 1. </p><br><p style=";text-align:right;direction:rtl">  ุฃูุตู ุชุณุงุฑุน ูุฏููุง ูู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ: 5/3 = 1.66 (6) ูุฑุงุช. </p><br><h2 id="kak-eto-rabotaet" style=";text-align:right;direction:rtl">  ููู ูุนููุ </h2><br><h3 id="processy" style=";text-align:right;direction:rtl">  ุงูุนูููุงุช </h3><br><p style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุชูููุฐ ุงูุทูุจ ุฏุงุฆููุง ุจุนูููุฉ ุฑุงุฆุฏุฉ.  ูููู ุงูุฒุนูู ุจูู ุดูุก ุบูุฑ ูุชูุงุฒู ูุฌุฒุก ูู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ.  ุชุณูู ุงูุนูููุงุช ุงูุฃุฎุฑู ุงูุชู ุชุคุฏู ููุณ ุงูุทูุจุงุช ุณูุฑ ุงูุนูู.  ุชุณุชุฎุฏู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ ุจููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุณุงุณูุฉ ูุณูุฑ ุนูู ุงูุฎูููุฉ ุงูุฏููุงููููุฉ</a> (ููุฐ ุงูุฅุตุฏุงุฑ 9.4).  ูุธุฑูุง ูุฃู ุฃุฌุฒุงุก ุฃุฎุฑู ูู PostgreSQL ุชุณุชุฎุฏู ุงูุนูููุงุช ุจุฏูุงู ูู ุงูุฎููุท ุ ููุฏ ูููู ุงูุงุณุชุนูุงู ุงูุฐู ูุญุชูู ุนูู 3 ููุงู ุณูุฑ ุนูู ุฃุณุฑุน ุจู 4 ูุฑุงุช ูู ุงููุนุงูุฌุฉ ุงูุชูููุฏูุฉ. </p><br><h3 id="vzaimodeystvie" style=";text-align:right;direction:rtl">  ุชูุงุนู </h3><br><p style=";text-align:right;direction:rtl">  ุชุชูุงุตู ููุงู ุณูุฑ ุงูุนูู ูุน ุงููุงุฆุฏ ูู ุฎูุงู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฑุณุงุฆู (ุจูุงุกู ุนูู ุงูุฐุงูุฑุฉ ุงููุดุชุฑูุฉ).  ุชุญุชูู ูู ุนูููุฉ ุนูู ุทุงุจูุฑุชูู: ููุฃุฎุทุงุก ููููุฌููุนุงุช. </p><br><h3 id="skolko-nuzhno-rabochih-processov" style=";text-align:right;direction:rtl">  ูู ุนุฏุฏ ุนูููุงุช ุงูุนูู ุงูุชู ุชุญุชุงุฌูุงุ </h3><br><p style=";text-align:right;direction:rtl">  ูุชู ุชุนููู ุงูุญุฏ ุงูุฃุฏูู ุจูุงุณุทุฉ ุงููุนููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>max_parallel_workers_per_gather</code></a> .  ุจุนุฏ ุฐูู ุ ูุฃุฎุฐ ูููุฐู ุงูุงุณุชุนูุงู ุณูุฑ ุงูุนูู ูู ุงูุชุฌูุน ุงููุญุฏุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>max_parallel_workers size</code></a> .  ุงูููุฏ ุงูุฃุฎูุฑ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>max_worker_processes</code></a> ุ ุฃู ุฅุฌูุงูู ุนุฏุฏ ุนูููุงุช ุงูุฎูููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ููู ูู ุงููููู ุชุฎุตูุต ุณูุฑ ุนูู ุ ูุณุชููู ุงููุนุงูุฌุฉ ุฃุญุงุฏูุฉ ุงูุนูููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ููุฎุทุท ุงูุงุณุชุนูุงู ุชูุตูุฑ ููุงู ุณูุฑ ุงูุนูู ุญุณุจ ุญุฌู ุงูุฌุฏูู ุฃู ุงูููุฑุณ.  ููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>min_parallel_table_scan_size</code></a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>min_parallel_index_scan_size</code></a> ูุนููุงุช ููุฐุง. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">set min_parallel_table_scan_size='8MB' 8MB table =&gt; 1 worker 24MB table =&gt; 2 workers 72MB table =&gt; 3 workers x =&gt; log(x / min_parallel_table_scan_size) / log(3) + 1 worker</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูู ูุฑุฉ ูููู ูููุง ุงูุฌุฏูู ุฃูุจุฑ ุจุซูุงุซ ูุฑุงุช ูู <code>min_parallel_(index|table)_scan_size</code> ุ ูุถูู Postgres ุณูุฑ ุนูู.  ุนุฏุฏ ุนูููุงุช ุงูุนูู ูุง ูุนุชูุฏ ุนูู ุงูุชูููุฉ.  ุงูุงุนุชูุงุฏ ุงูุฏุงุฆุฑู ูุนููุฏ ุงูุชูููุฐ ุงููุนูุฏ.  ุจุฏูุงู ูู ุฐูู ุ ูุณุชุฎุฏู ุงููุฌุฏูู ููุงุนุฏ ุจุณูุทุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ูุง ุชููู ูุฐู ุงูููุงุนุฏ ููุงุณุจุฉ ุฏุงุฆููุง ููุฅูุชุงุฌ ุ ูุฐูู ููููู ุชุบููุฑ ุนุฏุฏ ููุงู ุณูุฑ ุงูุนูู ูุฌุฏูู ูุนูู: ALTER TABLE ... SET ( <code>parallel_workers = N</code> ). </p><br><h3 id="pochemu-parallelnaya-obrabotka-ne-ispolzuetsya" style=";text-align:right;direction:rtl">  ููุงุฐุง ูุง ูุชู ุงุณุชุฎุฏุงู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉุ </h3><br><p style=";text-align:right;direction:rtl">  ุจุงูุฅุถุงูุฉ ุฅูู ูุงุฆูุฉ ุทูููุฉ ูู ุงููููุฏ ุ ููุงู ุฃูุถูุง ุงุฎุชุจุงุฑุงุช ุงูุชูููุฉ: </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>parallel_setup_cost</code></a> - ุงูุงุณุชุบูุงุก ุนู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ ููุทูุจุงุช ุงููุตูุฑุฉ.  ูุฐู ุงููุนููุฉ ุชูุฏุฑ ุงูููุช ุงููุงุฒู ูุฅุนุฏุงุฏ ุงูุฐุงูุฑุฉ ุ ูุจุฏุก ุงูุนูููุฉ ุ ูุชุจุงุฏู ุงูุจูุงูุงุช ุงูุฃูููุฉ. </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>parallel_tuple_cost</code></a> : ูููู ุชุฃุฎูุฑ ุงูุงุชุตุงู ุจูู ุงููุงุฆุฏ ูุงูุนูุงู ุจูุง ูุชูุงุณุจ ูุน ุนุฏุฏ ุงูุชูุงููุฐ ูู ุนูููุงุช ุงูุนูู.  ูุฐู ุงููุนููุฉ ุจุญุณุงุจ ุชูุงููู ุชุจุงุฏู ุงูุจูุงูุงุช. </p><br><h3 id="soedineniya-vlozhennyh-ciklov--nested-loop-join" style=";text-align:right;direction:rtl">  ุญููุฉ ูุชุฏุงุฎูุฉ </h3><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">PostgreSQL 9.6+      โ   . explain (costs off) select c_custkey, count(o_orderkey) from customer left outer join orders on c_custkey = o_custkey and o_comment not like '%special%deposits%' group by c_custkey; QUERY PLAN -------------------------------------------------------------------------------------- Finalize GroupAggregate Group Key: customer.c_custkey -&gt; Gather Merge Workers Planned: 4 -&gt; Partial GroupAggregate Group Key: customer.c_custkey -&gt; Nested Loop Left Join -&gt; Parallel Index Only Scan using customer_pkey on customer -&gt; Index Scan using idx_orders_custkey on orders Index Cond: (customer.c_custkey = o_custkey) Filter: ((o_comment)::text !~~ '%special%deposits%'::text)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุชู ุงููุฌููุนุฉ ูู ุงููุฑุญูุฉ ุงูุฃุฎูุฑุฉ ุ ูุฐุง ูุฅู Nested Loop Left Join ูู ุนูููุฉ ููุงุฒูุฉ.  ูุธูุฑ Parallel Index Only Scan ูู ุงูุฅุตุฏุงุฑ 10. ููุนูู ุจุดูู ูุดุงุจู ูููุณุญ ุงูุชุณูุณูู ุงููุชูุงุฒู.  ุงูุดุฑุท <code>c_custkey = o_custkey</code> ููุฑุฃ ุทูุจ ูุงุญุฏ ููู ุณุทุฑ ุนููู.  ูุฐูู ููุณ ุจุงูุชูุงุฒู. </p><br><h3 id="hesh-soedinenie--hash-join" style=";text-align:right;direction:rtl">  Hash Join - Hash Join </h3><br><p style=";text-align:right;direction:rtl">  ููุดุฆ ูู ุณูุฑ ุนูู ุฌุฏูู ุงูุชุฌุฒุฆุฉ ุงูุฎุงุต ุจู ูุจู PostgreSQL 11. ูุฅุฐุง ูุงู ููุงู ุฃูุซุฑ ูู ุฃุฑุจุน ูู ูุฐู ุงูุนูููุงุช ุ ููู ูุชุญุณู ุงูุฃุฏุงุก.  ูู ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ ุ ุชุชู ูุดุงุฑูุฉ ุฌุฏูู ุงูุชุฌุฒุฆุฉ.  ูููู ููู ุณูุฑ ุนูู ุงุณุชุฎุฏุงู WORK_MEM ูุฅูุดุงุก ุฌุฏูู ุชุฌุฒุฆุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">select l_shipmode, sum(case when o_orderpriority = '1-URGENT' or o_orderpriority = '2-HIGH' then 1 else 0 end) as high_line_count, sum(case when o_orderpriority &lt;&gt; '1-URGENT' and o_orderpriority &lt;&gt; '2-HIGH' then 1 else 0 end) as low_line_count from orders, lineitem where o_orderkey = l_orderkey and l_shipmode in ('MAIL', 'AIR') and l_commitdate &lt; l_receiptdate and l_shipdate &lt; l_commitdate and l_receiptdate &gt;= date '1996-01-01' and l_receiptdate &lt; date '1996-01-01' + interval '1' year group by l_shipmode order by l_shipmode LIMIT 1; QUERY PLAN ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- Limit (cost=1964755.66..1964961.44 rows=1 width=27) (actual time=7579.592..7922.997 rows=1 loops=1) -&gt; Finalize GroupAggregate (cost=1964755.66..1966196.11 rows=7 width=27) (actual time=7579.590..7579.591 rows=1 loops=1) Group Key: lineitem.l_shipmode -&gt; Gather Merge (cost=1964755.66..1966195.83 rows=28 width=27) (actual time=7559.593..7922.319 rows=6 loops=1) Workers Planned: 4 Workers Launched: 4 -&gt; Partial GroupAggregate (cost=1963755.61..1965192.44 rows=7 width=27) (actual time=7548.103..7564.592 rows=2 loops=5) Group Key: lineitem.l_shipmode -&gt; Sort (cost=1963755.61..1963935.20 rows=71838 width=27) (actual time=7530.280..7539.688 rows=62519 loops=5) Sort Key: lineitem.l_shipmode Sort Method: external merge Disk: 2304kB Worker 0: Sort Method: external merge Disk: 2064kB Worker 1: Sort Method: external merge Disk: 2384kB Worker 2: Sort Method: external merge Disk: 2264kB Worker 3: Sort Method: external merge Disk: 2336kB -&gt; Parallel Hash Join (cost=382571.01..1957960.99 rows=71838 width=27) (actual time=7036.917..7499.692 rows=62519 loops=5) Hash Cond: (lineitem.l_orderkey = orders.o_orderkey) -&gt; Parallel Seq Scan on lineitem (cost=0.00..1552386.40 rows=71838 width=19) (actual time=0.583..4901.063 rows=62519 loops=5) Filter: ((l_shipmode = ANY ('{MAIL,AIR}'::bpchar[])) AND (l_commitdate &lt; l_receiptdate) AND (l_shipdate &lt; l_commitdate) AND (l_receiptdate &gt;= '1996-01-01'::date) AND (l_receiptdate &lt; '1997-01-01 00:00:00'::timestamp without time zone)) Rows Removed by Filter: 11934691 -&gt; Parallel Hash (cost=313722.45..313722.45 rows=3750045 width=20) (actual time=2011.518..2011.518 rows=3000000 loops=5) Buckets: 65536 Batches: 256 Memory Usage: 3840kB -&gt; Parallel Seq Scan on orders (cost=0.00..313722.45 rows=3750045 width=20) (actual time=0.029..995.948 rows=3000000 loops=5) Planning Time: 0.977 ms Execution Time: 7923.770 ms</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุถุญ ุงูุทูุจ 12 ูู TPC-H ุงุชุตุงู ุชุฌุฒุฆุฉ ูุชูุงุฒู.  ูุดุงุฑู ูู ุณูุฑ ุนูู ูู ุฅูุดุงุก ุฌุฏูู ุชุฌุฒุฆุฉ ูุดุชุฑู. </p><br><h3 id="soedinenie-sliyaniem--merge-join" style=";text-align:right;direction:rtl">  ุฏูุฌ ุงูุงูุถูุงู </h3><br><p style=";text-align:right;direction:rtl">  ุตูุฉ ุฏูุฌ ููุณุช ูุชูุงุฒูุฉ ูู ุงูุทุจูุนุฉ.  ูุง ุชููู ุฅุฐุง ูุงูุช ูุฐู ูู ุงููุฑุญูุฉ ุงูุฃุฎูุฑุฉ ูู ุงูุทูุจ - ููุง ูุฒุงู ูู ุงููููู ุชูููุฐู ุจุงูุชูุงุฒู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">-- Query 2 from TPC-H explain (costs off) select s_acctbal, s_name, n_name, p_partkey, p_mfgr, s_address, s_phone, s_comment from part, supplier, partsupp, nation, region where p_partkey = ps_partkey and s_suppkey = ps_suppkey and p_size = 36 and p_type like '%BRASS' and s_nationkey = n_nationkey and n_regionkey = r_regionkey and r_name = 'AMERICA' and ps_supplycost = ( select min(ps_supplycost) from partsupp, supplier, nation, region where p_partkey = ps_partkey and s_suppkey = ps_suppkey and s_nationkey = n_nationkey and n_regionkey = r_regionkey and r_name = 'AMERICA' ) order by s_acctbal desc, n_name, s_name, p_partkey LIMIT 100; QUERY PLAN ---------------------------------------------------------------------------------------------------------- Limit -&gt; Sort Sort Key: supplier.s_acctbal DESC, nation.n_name, supplier.s_name, part.p_partkey -&gt; Merge Join Merge Cond: (part.p_partkey = partsupp.ps_partkey) Join Filter: (partsupp.ps_supplycost = (SubPlan 1)) -&gt; Gather Merge Workers Planned: 4 -&gt; Parallel Index Scan using &lt;strong&gt;part_pkey&lt;/strong&gt; on part Filter: (((p_type)::text ~~ '%BRASS'::text) AND (p_size = 36)) -&gt; Materialize -&gt; Sort Sort Key: partsupp.ps_partkey -&gt; Nested Loop -&gt; Nested Loop Join Filter: (nation.n_regionkey = region.r_regionkey) -&gt; Seq Scan on region Filter: (r_name = 'AMERICA'::bpchar) -&gt; Hash Join Hash Cond: (supplier.s_nationkey = nation.n_nationkey) -&gt; Seq Scan on supplier -&gt; Hash -&gt; Seq Scan on nation -&gt; Index Scan using idx_partsupp_suppkey on partsupp Index Cond: (ps_suppkey = supplier.s_suppkey) SubPlan 1 -&gt; Aggregate -&gt; Nested Loop Join Filter: (nation_1.n_regionkey = region_1.r_regionkey) -&gt; Seq Scan on region region_1 Filter: (r_name = 'AMERICA'::bpchar) -&gt; Nested Loop -&gt; Nested Loop -&gt; Index Scan using idx_partsupp_partkey on partsupp partsupp_1 Index Cond: (part.p_partkey = ps_partkey) -&gt; Index Scan using supplier_pkey on supplier supplier_1 Index Cond: (s_suppkey = partsupp_1.ps_suppkey) -&gt; Index Scan using nation_pkey on nation nation_1 Index Cond: (n_nationkey = supplier_1.s_nationkey)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชูุน ุนูุฏุฉ ุฏูุฌ ุงูุฏูุฌ ุฃุนูู Gather Merge.  ูุฐูู ุงูุฏูุฌ ูุง ูุณุชุฎุฏู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ.  ููู ุงูุนูุฏุฉ Parallel Index Scan ูุง ุชุฒุงู ุชุณุงุนุฏ ูู ุงูุฌุฒุก <code>part_pkey</code> . </p><br><h3 id="soedinenie-po-sekciyam" style=";text-align:right;direction:rtl">  ูุณู ุงูุงุชุตุงู </h3><br><p style=";text-align:right;direction:rtl">  ูู PostgreSQL 11 ุ ูุชู ุชุนุทูู ุงูุชูุณูู ุจุดูู ุงูุชุฑุงุถู: ูู ุฌุฏููุฉ ุจุงูุธุฉ ุงูุซูู.  ูููู ุฑุจุท ุงูุฌุฏุงูู ูุน ุงูุชูุณูู ุงูููุงุซู ูุณููุง ุชูู ุงูุขุฎุฑ.  ูุฐูู ุณูู ุชุณุชุฎุฏู ุจูุณุชุฌุฑุณ ุงูุฌุฏุงูู ุงูุชุฌุฒุฆุฉ ุฃุตุบุฑ.  ูู ุงุชุตุงู ุงููุณู ูููู ุฃู ุชููู ูุชูุงุฒูุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">tpch=# set enable_partitionwise_join=t; tpch=# explain (costs off) select * from prt1 t1, prt2 t2 where t1.a = t2.b and t1.b = 0 and t2.b between 0 and 10000; QUERY PLAN --------------------------------------------------- Append -&gt; Hash Join Hash Cond: (t2.b = t1.a) -&gt; Seq Scan on prt2_p1 t2 Filter: ((b &gt;= 0) AND (b &lt;= 10000)) -&gt; Hash -&gt; Seq Scan on prt1_p1 t1 Filter: (b = 0) -&gt; Hash Join Hash Cond: (t2_1.b = t1_1.a) -&gt; Seq Scan on prt2_p2 t2_1 Filter: ((b &gt;= 0) AND (b &lt;= 10000)) -&gt; Hash -&gt; Seq Scan on prt1_p2 t1_1 Filter: (b = 0) tpch=# set parallel_setup_cost = 1; tpch=# set parallel_tuple_cost = 0.01; tpch=# explain (costs off) select * from prt1 t1, prt2 t2 where t1.a = t2.b and t1.b = 0 and t2.b between 0 and 10000; QUERY PLAN ----------------------------------------------------------- Gather Workers Planned: 4 -&gt; Parallel Append -&gt; Parallel Hash Join Hash Cond: (t2_1.b = t1_1.a) -&gt; Parallel Seq Scan on prt2_p2 t2_1 Filter: ((b &gt;= 0) AND (b &lt;= 10000)) -&gt; Parallel Hash -&gt; Parallel Seq Scan on prt1_p2 t1_1 Filter: (b = 0) -&gt; Parallel Hash Join Hash Cond: (t2.b = t1.a) -&gt; Parallel Seq Scan on prt2_p1 t2 Filter: ((b &gt;= 0) AND (b &lt;= 10000)) -&gt; Parallel Hash -&gt; Parallel Seq Scan on prt1_p1 t1 Filter: (b = 0)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุดูุก ุงูุฑุฆูุณู ูู ุฃู ุงูุงุชุตุงู ูู ุงูููุงุทุน ูุชูุงุฒู ููุท ุฅุฐุง ูุงูุช ูุฐู ุงูููุงุทุน ูุจูุฑุฉ ุจุฏุฑุฌุฉ ูุงููุฉ. </p><br><h3 id="parallelnoe-dopolnenie--parallel-append" style=";text-align:right;direction:rtl">  ุฅูุญุงู ููุงุฒ - ุฅูุญุงู ููุงุฒ </h3><br><p style=";text-align:right;direction:rtl">  ูููู ุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุฐููู ุงูููุงุฒู</a> ุจุฏูุงู ูู ุงููุชู ุงููุฎุชููุฉ ูู ููุงู ุณูุฑ ุงูุนูู ุงููุฎุชููุฉ.  ูุญุฏุซ ูุฐุง ุนุงุฏุฉ ูุน ุงุณุชุนูุงูุงุช UNION ALL.  ุงูุนูุจ ูู ุฃูู ุงูุชูุงุฒู ุ ูุฃู ูู ุณูุฑ ุงูุนูู ูุนุงูุฌ ุทูุจ ูุงุญุฏ ููุท. </p><br><p style=";text-align:right;direction:rtl">  2 ุณูุฑ ุงูุนูู ุชุนูู ููุง ุ ุนูู ุงูุฑุบู ูู 4 ูุฏุฑุฌุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">tpch=# explain (costs off) select sum(l_quantity) as sum_qty from lineitem where l_shipdate &lt;= date '1998-12-01' - interval '105' day union all select sum(l_quantity) as sum_qty from lineitem where l_shipdate &lt;= date '2000-12-01' - interval '105' day; QUERY PLAN ------------------------------------------------------------------------------------------------ Gather Workers Planned: 2 -&gt; Parallel Append -&gt; Aggregate -&gt; Seq Scan on lineitem Filter: (l_shipdate &lt;= '2000-08-18 00:00:00'::timestamp without time zone) -&gt; Aggregate -&gt; Seq Scan on lineitem lineitem_1 Filter: (l_shipdate &lt;= '1998-08-18 00:00:00'::timestamp without time zone)</code> </pre> <br><h3 id="samye-vazhnye-peremennye" style=";text-align:right;direction:rtl">  ุฃูู ุงููุชุบูุฑุงุช </h3><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุนูู WORK_MEM ุนูู ุชุญุฏูุฏ ููุฏุงุฑ ุงูุฐุงูุฑุฉ ููู ุนูููุฉ ุ ูููุณ ููุท ููุทูุจุงุช: <em>ุนูููุงุช</em> ุงุชุตุงู work_mem = ุงููุซูุฑ ูู ุงูุฐุงูุฑุฉ. </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>max_parallel_workers_per_gather</code></a> - ุนุฏุฏ ุนูููุงุช ุงูุนูู ุงูุชู ุณูุณุชุฎุฏููุง ุงูุจุฑูุงูุฌ ุงููููุฐ ูููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ ูู ุงูุฎุทุฉ. </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>max_worker_processes</code></a> - ูุถุจุท ุฅุฌูุงูู ุนุฏุฏ ุนูููุงุช ุงูุนูู ุนูู ุนุฏุฏ ูุฑุงูุฒ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุนูู ุงูุฎุงุฏู. </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>max_parallel_workers</code></a> ูู ููุณู ุ ูููู ุจุงููุณุจุฉ ูุณูุฑ ุงูุนูู ุงููุชูุงุฒู. </li></ul><br><h3 id="itogi" style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h3><br><p style=";text-align:right;direction:rtl">  ุจุฏุกูุง ูู ุงูุฅุตุฏุงุฑ 9.6 ุ ูููู ูููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ ุฃู ุชุญุณู ุจุดูู ูุจูุฑ ุฃุฏุงุก ุงูุงุณุชุนูุงูุงุช ุงููุนูุฏุฉ ุงูุชู ุชูุญุต ุงูุนุฏูุฏ ูู ุงูุตููู ุฃู ุงูููุงุฑุณ.  ูู PostgreSQL 10 ุ ูุชู ุชูููู ุงููุนุงูุฌุฉ ุงููุชูุงุฒูุฉ ุงูุชุฑุงุถููุง.  ุชุฐูุฑ ุฃู ุชููู ุจุชุนุทููู ุนูู ุงูุฎูุงุฏู ุฐุงุช ุนุจุก ุนูู ูุจูุฑ ุนูู OLTP.  ุนูููุงุช ุงููุณุญ ุงููุชุณูุณูุฉ ุฃู ุนูููุงุช ุงููุณุญ ุงูุถูุฆู ููููุฑุณ ุชุณุชููู ุงููุซูุฑ ูู ุงูููุงุฑุฏ.  ุฅุฐุง ูู ุชูู ุชููู ุจุงูุฅุจูุงุบ ุนุจุฑ ูุฌููุนุฉ ุงูุจูุงูุงุช ุจุฃููููุง ุ ููููู ุฌุนู ุงูุงุณุชุนูุงูุงุช ุฃูุซุฑ ูุงุนููุฉ ุนู ุทุฑูู ุฅุถุงูุฉ ููุงุฑุณ ููููุฏุฉ ุฃู ุงุณุชุฎุฏุงู ุงูุชูุณูู ุงูุตุญูุญ. </p><br><h3 id="ssylki" style=";text-align:right;direction:rtl">  ูุฑุงุฌุน </h3><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://www.postgresql.org/docs/11/how-parallel-query-works.html</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://www.postgresql.org/docs/11/parallel-plans.html</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://ashutoshpg.blogspot.com/2017/12/partition-wise-joins-divide-and-conquer.html</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://rhaas.blogspot.com/2016/04/postgresql-96-with-parallel-query-vs.html</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://amitkapila16.blogspot.com/2015/11/parallel-sequential-scans-in-play.html</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://write-skew.blogspot.com/2018/01/parallel-hash-for-postgresql.html</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://rhaas.blogspot.com/2017/03/parallel-query-v2.html</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://blog.2ndquadrant.com/parallel-monster-benchmark/</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://blog.2ndquadrant.com/parallel-aggregate/</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://www.depesz.com/2018/02/12/waiting-for-postgresql-11-support-parallel-btree-index-builds/</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุฒุงูู ูู PostgreSQL 11</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar446706/">https://habr.com/ru/post/ar446706/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar446690/index.html">ุงููุชุฑููููุณ ุชุทูู ุฌูุงุฒ ุชูููุฉ ุงูููุงุก ุงูุฐูู ูููุฏู ุงูุฃูุซุฑ ุชููุซูุง</a></li>
<li><a href="../ar446694/index.html">ุชุฎุฒูู ูุญุฏุงุช JBOD ูุฏุฑุฌุงุช ูู ุงูุญุฑูุฉ</a></li>
<li><a href="../ar446696/index.html">ุงูุฎุฑุงูุงุช ุญูู 152-FZ ุ ูุงูุชู ูููู ุฃู ุชููู ููููุฉ ููุดุบู ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ</a></li>
<li><a href="../ar446700/index.html">Lazydocker - ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ ู Docker ูุจุงุดุฑุฉ ูู ุงููุญุทุฉ</a></li>
<li><a href="../ar446702/index.html">ูุณูุงุนุฉ ุฑุฃุณ ุบุฑูุจุฉ ุฃุฎุฑู - ููููู</a></li>
<li><a href="../ar446708/index.html">ููุงุฑูุฉ ุฃูุธูุฉ ุงูุงุชุตุงูุงุช ุงููุถุงุฆูุฉ</a></li>
<li><a href="../ar446710/index.html">ุฃุฑุจุน ูุตุต ุญููููุฉ ุนู ุงูุนูู ุจุงุณุชุฎุฏุงู ุจููุฉ ุงูุฎุฏูุงุช ุงููุตุบุฑุฉ - ุชูุฑูุฑ ูู Backend United 3 mitap: Kholodets</a></li>
<li><a href="../ar446712/index.html">HTTPS ููุณ ุฏุงุฆููุง ุขูููุง ููุง ูุจุฏู. ููุงุท ุงูุถุนู ุงูููุฌูุฏุฉ ูู 5.5 ูช ูู ููุงูุน HTTPS</a></li>
<li><a href="../ar446714/index.html">ุงูุญุฑุงูุงุช ุบุฑูุจุฉ ุนู ุนุงูู ุชูููููุฌูุง ุงููุนูููุงุช - 4</a></li>
<li><a href="../ar446716/index.html">ููู ุงูููุงูุฉ ุงููุนู ูุงูุญุฌุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>