<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕝 🏐 ❌ Vue d'ensemble des possibilités de Qt Creator 4.11 et QBS 1.15 pour la programmation de microcontrôleurs ↩️ 🧜🏽 🐾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, chers programmeurs, matériel et tous ceux qui sympathisent avec eux. Je voudrais continuer à passer en revue les capacités de l'IDE Qt Creato...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vue d'ensemble des possibilités de Qt Creator 4.11 et QBS 1.15 pour la programmation de microcontrôleurs</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480132/">  Bonjour, chers programmeurs, matériel et tous ceux qui sympathisent avec eux.  Je voudrais continuer à passer en revue les capacités de l'IDE Qt Creator en conjonction avec le système de construction QBS concernant la programmation des microcontrôleurs. <br><br>  Plus tôt, j'ai écrit sur les améliorations des versions précédentes de <a href="https://habr.com/ru/post/467323/">QtC 4.10 et QBS 1.14</a> . <br><br>  Pour qui ce sujet est intéressant, bienvenue au chat. <br><a name="habracut"></a><br>  L'autre jour, discrètement et imperceptiblement, la version <a href="https://www.qt.io/blog/qt-creator-4.11.0-is-released">Qt Creator 4.11 a</a> été publiée, qui a ajouté quelques améliorations pour travailler avec les microcontrôleurs (chez les gens ordinaires - les appareils «baremetal»).  Cette version de Qt Creator intègre le système de <a href="">construction QBS 1.15</a> , qui a également de nouvelles améliorations (il n'a pas encore été publié). <br><br><h2>  Améliorations de Qt Creator </h2><br>  Toutes ces améliorations ne sont disponibles que lorsque le plugin BareMetal est activé, ce qui est activé via le menu "Aide -&gt; À propos des plugins -&gt; Support des périphériques -&gt; BareMetal". <br><br><ol><li>  De nouvelles architectures ont été ajoutées aux compilateurs GCC, SDCC et IAR EW, dont les détails de base sont donnés dans le tableau ci-dessous: <br><div class="scrollable-table"><table><tbody><tr><th>  Compilateur </th><th>  Architectures prises en charge </th></tr><tr><td>  <a href="https://www.iar.com/iar-embedded-workbench/">IAR EW</a> </td><td>  STM8, MSP430 </td></tr><tr><td>  <a href="http://www.ti.com/tool/MSP430-GCC-OPENSOURCE">Gcc</a> </td><td>  MSP430 </td></tr><tr><td>  <a href="http://sdcc.sourceforge.net/">SDCC</a> </td><td>  STM8 </td></tr></tbody></table></div><br>  Désormais, ces nouveaux compilateurs sont automatiquement détectés dans l'onglet "Outils -&gt; Options -&gt; Kits -&gt; Compilateurs -&gt; Auto-détectés". <br><br>  Par exemple, pour moi, cela ressemble à ceci: <br><br><img src="https://habrastorage.org/webt/d7/gh/pu/d7ghpuka9laz8a0q3czfxhmsa-a.png"><br><br>  Sous Windows, la détection automatique du compilateur GCC pour l'architecture MSP430 n'est pas implémentée, car  Cet ensemble est fourni comme une archive simple et non comme un programme d'installation. <br><br>  Mais personne ne prend la peine d'ajouter manuellement ce compilateur GCC (et tout autre supporté), tandis que Qt Creator déterminera correctement le compilateur ABI: <br><br><img src="https://habrastorage.org/webt/p-/xb/vn/p-xbvnguinkwkm66g6xpxtmofl8.png"><br><br>  <i>Remarque: Et bien sûr, tous les compilateurs auront automatiquement des répertoires avec des en-têtes, des macros prédéfinies, etc. pour la mise en évidence correcte du code.</i> <br><br></li><li>  À la demande des <a href="https://bugreports.qt.io/browse/QTCREATORBUG-18729">travailleurs</a> , un support a été ajouté pour les fichiers <a href="https://www.keil.com/pack/doc/CMSIS/SVD/html/svd_Format_pg.html">SVD</a> pour décrire les registres des périphériques du microcontrôleur. <br><br>  <i>Remarque: Comme je le sais, cette fonctionnalité est disponible uniquement pour les ARM (bien que je puisse me tromper) et est toujours de nature expérimentale.</i> <br><br>  Pour utiliser cette fonction, vous devez d'abord sélectionner le fichier SVD souhaité dans le champ «Fichier de description périphérique» dans les paramètres de l'appareil «Outils-&gt; Options-&gt; Périphériques-&gt; Votre appareil», correspondant au microcontrôleur cible: <br><br><img src="https://habrastorage.org/webt/ze/oi/1t/zeoi1trttbsicrssaf3kt-xjoru.png"><br><br>  <i>Remarque: Ces fichiers peuvent être téléchargés à partir du site Web d'ARM ou extraits de répertoires avec les produits Keil MDK ou IAR EW installés.</i> <br><br>  De plus, après avoir commencé le débogage, sélectionnez «Registres périphériques» dans le menu «Fenêtre-&gt; Vues».  Après cela, le panneau «Registres périphériques» s'ouvrira (similaire au panneau «Registres») dans lequel, par un clic droit, un menu avec une liste des groupes de registres à afficher est appelé: <br><br><img src="https://habrastorage.org/webt/xw/ql/ei/xwqleiclsokd_oq5-ds36a48wny.png"><br><br>  Nous sélectionnons n'importe quel groupe (par exemple, RCC) et obtenons une liste de tous les registres de ce groupe avec leur description détaillée et leurs valeurs qui peuvent être lues / écrites: <br><br><img src="https://habrastorage.org/webt/-k/7m/xl/-k7mxlw4zfyjvnbgvyocaseqlmq.png"><br><br>  <i>Remarque: Pour le moment, l'affichage des registres d'un seul des groupes sélectionnés est implémenté.</i> <br></li></ol><br><h2>  Améliorations dans QBS </h2><br>  QBS fera partie intégrante de cette revue, il est donc logique de parler de ses améliorations: <br><br><ol><li>  Ajout de la prise en charge de ces nouveaux compilateurs et implémentation de la capacité de détecter automatiquement les compilateurs installés et de créer des profils. <br><br>  La propriété <b><i>qbs.architecture</i></b> a les valeurs suivantes: <br><br><div class="scrollable-table"><table><tbody><tr><th>  Nom de l'architecture </th><th>  Valeur de la propriété </th></tr><tr><td>  STM8 </td><td>  stm8 </td></tr><tr><td>  MSP430 </td><td>  msp430 </td></tr></tbody></table></div><br></li><li>  La prise en charge du générateur a été ajoutée aux projets Keil MDK et IAR EW pour les architectures et versions suivantes: <br><br><div class="scrollable-table"><table><tbody><tr><th>  IDE </th><th>  L'architecture </th><th>  Générateur </th></tr><tr><td>  KEIL uVision 5.23 </td><td>  BRAS </td><td>  keiluv5 </td></tr><tr><td>  KEIL uVision 5.23 </td><td>  MCS51 </td><td>  keiluv5 </td></tr><tr><td>  IAR EW 8.40.1 </td><td>  BRAS </td><td>  iarew8 </td></tr><tr><td>  IAR EW 3.11.1 </td><td>  STM8 </td><td>  iarew3 </td></tr><tr><td>  IAR EW 10.10.1 </td><td>  MCS51 </td><td>  iarew10 </td></tr><tr><td>  IAR EW 7.12.4 </td><td>  MSP430 </td><td>  iarew7 </td></tr><tr><td>  IAR EW 7.20.1 </td><td>  AVR </td><td>  iarew7 </td></tr></tbody></table></div><br>  <i>Remarque: Le tableau ci-dessus montre les versions des produits avec lesquels le développement des générateurs allait et dont le fonctionnement était plus ou moins vérifié.</i> <br><br>  Ainsi, il est désormais possible avec ces générateurs de créer un projet natif pour l'IDE cible souhaité.  Dans le même temps, chaque générateur convertira tous les indicateurs, chemins et dépendances spécifiques au compilateur spécifiés dans le projet QBS aux paramètres correspondants de l'IDE du projet cible. <br><br>  Si le projet QBS source contenait plusieurs produits (par exemple, applications, bibliothèques, etc.), le générateur créera un «espace de travail» cible avec des sous-projets imbriqués «projet» pour chaque IDE cible. <br><br>  <i>Remarque: Je dirai tout de suite que, comme je le sais, les IDE KEIL ou IAR EW ne prennent pas en charge le suivi des dépendances (si je me trompe, corrigez-le).</i>  <i>Par conséquent, par exemple, si le projet contient l'application et la dépendance sous la forme d'une bibliothèque, l'utilisateur devra d'abord créer la bibliothèque, puis l'application elle-même.</i> <br><br>  Pour générer des projets, vous devez avoir déjà configuré des profils QBS avec les compilateurs appropriés. <br><br>  <i>Remarque: jusqu'à présent, vous ne pouvez pas vous passer de profils, car</i>  <i>le générateur du profil reçoit l'architecture elle-même, le chemin vers le compilateur préinstallé (IDE), et plus encore.</i>  <i>Ces données sont nécessaires pour la recherche correcte des scripts de l'éditeur de liens, des chemins d'accès aux bibliothèques d'exécution et d'autres choses spécifiques (il n'y a pas de logique simple là-bas).</i> <br><br>  Par exemple, pour créer un projet cible pour le microcontrôleur IAR EW et ARM, il suffit d'exécuter la commande suivante: <br><br><pre><code class="bash hljs">qbs generate -g iarew8 -d &lt;path/to/build/directory&gt; -f &lt;path/to/qbs/project/file&gt; profile:&lt;your/qbs/profile/<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>/arm&gt;</code> </pre> <br>  Les noms de profil peuvent être obtenus à l'aide, par exemple, de l'utilitaire GUI <a href="https://doc.qt.io/qbs/cli-config-ui.html">qbs-config-ui</a> (ou utilisez la version console). <br><br>  <i>Remarque: Pour le moment, les générateurs ont un statut expérimental.</i>  <i>Dans certains cas (si le projet d'origine est complexe), ils généreront peut-être des fichiers de projet cible incorrects, ou ignoreront certains indicateurs et plus encore.</i>  <i>Ne grondez pas fortement, mais créez des rapports de bogues dans le tracker QBS.</i> <br></li></ol><br>  Vous pouvez voir l'état actuel de la prise en charge du compilateur <a href="https://bugreports.qt.io/browse/QBS-1467">ici</a> , et l'état actuel de l'intégration du générateur <a href="https://bugreports.qt.io/browse/QBS-658">ici</a> . <br><br>  Pour voir comment tout cela fonctionne, QBS fournit un ensemble d' <a href="https://github.com/qbs/qbs/tree/1.15/examples/baremetal">exemples</a> simples. <br><br><h2>  Et ensuite </h2><br>  Dans les versions futures, il est prévu d'ajouter des architectures et des générateurs <a href="https://www.renesas.com/us/en/">Renesas</a> à l'IAR EW pour ces architectures (je ne sais pas si cela réussira).  Et aussi, si vous êtes très chanceux, un débogueur de Keil uVision sera intégré dans Qt Creator. <br><br>  Sur cette note, je termine mon histoire, merci à tous ceux qui feront attention à cette critique. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr480132/">https://habr.com/ru/post/fr480132/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr480118/index.html">Nous écrivons un simulateur de saisie tactile en utilisant du JavaScript pur. Partie 1</a></li>
<li><a href="../fr480120/index.html">Une nouvelle réalisation en cryptographie - Factorisation d'un RSA 795 bits</a></li>
<li><a href="../fr480122/index.html">Tout sur les taxes pour les indépendants IT. STS, brevet ou taxe pour indépendants. 2e partie</a></li>
<li><a href="../fr480124/index.html">Comment augmenter la portée de communication avec un véhicule aérien sans pilote (UAV)</a></li>
<li><a href="../fr480126/index.html">Enquête du vendredi: Qu'avez-vous sur le panneau Express?</a></li>
<li><a href="../fr480134/index.html">Tout sur les taxes pour les indépendants IT. Charge fiscale de la PI dans différents modes. 3e partie</a></li>
<li><a href="../fr480136/index.html">La position officielle des comités du programme Highload ++ et d'autres conférences informatiques sur les réclamations contre Igor Sysoev ...</a></li>
<li><a href="../fr480138/index.html">@Pythonetc compilation, novembre 2019</a></li>
<li><a href="../fr480140/index.html">Trucs et astuces de ma chaîne Telegram @pythonetc, novembre 2019</a></li>
<li><a href="../fr480142/index.html">Tendances UX / UI en 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>