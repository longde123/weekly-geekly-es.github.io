<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÖüèª üë¶üèª üåà Schreiben eines einfachen NTP-Clients üïõ ‚óªÔ∏è üë≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo habrayuzery. Heute m√∂chte ich dar√ºber sprechen, wie ich meinen einfachen NTP-Client schreibe. Grunds√§tzlich werden wir √ºber die Struktur des Pak...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Schreiben eines einfachen NTP-Clients</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448060/"> Hallo habrayuzery.  Heute m√∂chte ich dar√ºber sprechen, wie ich meinen einfachen NTP-Client schreibe.  Grunds√§tzlich werden wir √ºber die Struktur des Pakets und die Verarbeitung der Antwort vom NTP-Server sprechen.  Der Code wird in Python geschrieben, weil meiner Meinung nach die beste Sprache f√ºr solche Dinge einfach nicht gefunden werden kann.  Kenner werden auf die √Ñhnlichkeit des Codes mit dem ntplib-Code achten - ich war davon ‚Äûinspiriert‚Äú. <br><a name="habracut"></a><br>  Was genau ist NTP?  NTP - Protokoll der Interaktion mit genauen Zeitservern.  Dieses Protokoll wird in vielen modernen Maschinen verwendet.  <i>Zum Beispiel der Dienst w32tm in Windows.</i> <br><br>  Insgesamt gibt es 5 Versionen des NTP-Protokolls.  Die erste, 0. Version (1985, RFC958)) gilt derzeit als veraltet.  Jetzt werden die neueren verwendet, 1. (1988, RFC1059), 2. (1989, RFC1119), 3. (1992, RFC1305) und 4. (1996, RFC2030).  1-4 Versionen sind miteinander kompatibel, sie unterscheiden sich nur in den Serverbetriebsalgorithmen. <br><br><h3>  Paketformat </h3><br><img src="https://habrastorage.org/webt/fq/il/6l/fqil6lihcd8xozi7v2z7sbylrbm.png"><br><br>  <b>Sprungindikator</b> (Korrekturindikator) - eine Zahl, die eine Warnung vor der zweiten Koordination anzeigt.  Wert: <br><br><ul><li>  0 - keine Korrektur </li><li>  1 - Die letzte Minute des Tages enth√§lt 61 Sekunden </li><li>  2 - Die letzte Minute des Tages enth√§lt 59 Sekunden </li><li>  3 - Serverst√∂rung (Zeit nicht synchronisiert) </li></ul><br>  <b>Versionsnummer</b> - Die Versionsnummer des NTP-Protokolls (1-4). <br><br>  <b>Modus</b> - Betriebsmodus des Paketsenders.  Wert von 0 bis 7, am h√§ufigsten: <br><br><ul><li>  3 - Kunde </li><li>  4 - Server </li><li>  5 - Sendemodus </li></ul><br>  <b>Schicht</b> (Layering-Ebene) - Die Anzahl der Zwischenschichten zwischen dem Server und der Referenzuhr (1 - Der Server entnimmt Daten direkt von der Referenzuhr, 2 - Der Server nimmt Daten vom Server mit der Ebene 1 usw.). <br>  <b>Poll</b> ist eine vorzeichenbehaftete Ganzzahl, die das maximale Intervall zwischen aufeinanderfolgenden Nachrichten darstellt.  Hier gibt der NTP-Client das Intervall an, in dem er erwartet, den Server abzufragen, und der NTP-Server gibt das Intervall an, in dem er erwartet, abgefragt zu werden.  Der Wert ist der bin√§re Logarithmus von Sekunden. <br>  <b>Pr√§zision</b> ist eine vorzeichenbehaftete Ganzzahl, die die Genauigkeit der Systemuhr darstellt.  Der Wert ist der bin√§re Logarithmus von Sekunden. <br>  <b>Root-Verz√∂gerung</b> (Server-Verz√∂gerung) - Die Zeit, w√§hrend der die Uhr den NTP-Server erreicht, als Anzahl der Sekunden mit einem festen Punkt. <br>  <b>Root-Dispersion</b> - Die Streuung der NTP-Serveruhr als Anzahl der Sekunden mit einem festen Punkt. <br>  <b>Ref id</b> (Quellkennung) - ID der Uhr.  Wenn der Server eine Schicht von 1 hat, ist ref id der Name der Atomuhr (4 ASCII-Zeichen).  Wenn der Server einen anderen Server verwendet, wird die Adresse dieses Servers in die Referenz-ID geschrieben. <br>  Die letzten 4 Felder sind Zeit - 32 Bit - der ganzzahlige Teil, 32 Bit - Bruchteil. <br>  <b>Referenz</b> - die letzte Uhr auf dem Server. <br>  <b>Ursprung</b> - der Zeitpunkt, zu dem das Paket gesendet wurde (vom Server ausgef√ºllt - mehr dazu weiter unten). <br>  <b>Empfangszeit, zu der</b> das Paket vom Server empfangen wurde. <br>  <b>Sendezeit, zu der</b> das Paket vom Server an den Client gesendet wurde (vom Client ausgef√ºllt, mehr dazu weiter unten). <br><br>  Wir werden die letzten beiden Felder nicht ber√ºcksichtigen. <br><br>  Schreiben wir unser Paket: <br><br><div class="spoiler">  <b class="spoiler_title">Paketcode</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NTPPacket</span></span></span><span class="hljs-class">:</span></span> _FORMAT = <span class="hljs-string"><span class="hljs-string">"!BB bb 11I"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, version_number=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">, mode=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, transmit=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># Necessary of enter leap second (2 bits) self.leap_indicator = 0 # Version of protocol (3 bits) self.version_number = version_number # Mode of sender (3 bits) self.mode = mode # The level of "layering" reading time (1 byte) self.stratum = 0 # Interval between requests (1 byte) self.pool = 0 # Precision (log2) (1 byte) self.precision = 0 # Interval for the clock reach NTP server (4 bytes) self.root_delay = 0 # Scatter the clock NTP-server (4 bytes) self.root_dispersion = 0 # Indicator of clocks (4 bytes) self.ref_id = 0 # Last update time on server (8 bytes) self.reference = 0 # Time of sending packet from local machine (8 bytes) self.originate = 0 # Time of receipt on server (8 bytes) self.receive = 0 # Time of sending answer from server (8 bytes) self.transmit = transmit</span></span></code> </pre> <br></div></div><br>  Um ein Paket an den Server zu senden (und zu empfangen), m√ºssen wir es in ein Array von Bytes umwandeln k√∂nnen. <br>  F√ºr diese (und umgekehrte) Operation schreiben wir zwei Funktionen - pack () und unpack (): <br><br><div class="spoiler">  <b class="spoiler_title">Packfunktion</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pack</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> struct.pack(NTPPacket._FORMAT, (self.leap_indicator &lt;&lt; <span class="hljs-number"><span class="hljs-number">6</span></span>) + (self.version_number &lt;&lt; <span class="hljs-number"><span class="hljs-number">3</span></span>) + self.mode, self.stratum, self.pool, self.precision, int(self.root_delay) + get_fraction(self.root_delay, <span class="hljs-number"><span class="hljs-number">16</span></span>), int(self.root_dispersion) + get_fraction(self.root_dispersion, <span class="hljs-number"><span class="hljs-number">16</span></span>), self.ref_id, int(self.reference), get_fraction(self.reference, <span class="hljs-number"><span class="hljs-number">32</span></span>), int(self.originate), get_fraction(self.originate, <span class="hljs-number"><span class="hljs-number">32</span></span>), int(self.receive), get_fraction(self.receive, <span class="hljs-number"><span class="hljs-number">32</span></span>), int(self.transmit), get_fraction(self.transmit, <span class="hljs-number"><span class="hljs-number">32</span></span>))</code> </pre><br></div></div><br>  Um den Bruchteil der Zahl zum Schreiben in das Paket auszuw√§hlen, ben√∂tigen wir die Funktion get_fraction (): <br><div class="spoiler">  <b class="spoiler_title">get_fraction ()</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_fraction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(number, precision)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> int((number - int(number)) * <span class="hljs-number"><span class="hljs-number">2</span></span> ** precision)</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Funktion auspacken</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unpack</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, data: bytes)</span></span></span><span class="hljs-function">:</span></span> unpacked_data = struct.unpack(NTPPacket._FORMAT, data) self.leap_indicator = unpacked_data[<span class="hljs-number"><span class="hljs-number">0</span></span>] &gt;&gt; <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-comment"><span class="hljs-comment"># 2 bits self.version_number = unpacked_data[0] &gt;&gt; 3 &amp; 0b111 # 3 bits self.mode = unpacked_data[0] &amp; 0b111 # 3 bits self.stratum = unpacked_data[1] # 1 byte self.pool = unpacked_data[2] # 1 byte self.precision = unpacked_data[3] # 1 byte # 2 bytes | 2 bytes self.root_delay = (unpacked_data[4] &gt;&gt; 16) + \ (unpacked_data[4] &amp; 0xFFFF) / 2 ** 16 # 2 bytes | 2 bytes self.root_dispersion = (unpacked_data[5] &gt;&gt; 16) + \ (unpacked_data[5] &amp; 0xFFFF) / 2 ** 16 # 4 bytes self.ref_id = str((unpacked_data[6] &gt;&gt; 24) &amp; 0xFF) + " " + \ str((unpacked_data[6] &gt;&gt; 16) &amp; 0xFF) + " " + \ str((unpacked_data[6] &gt;&gt; 8) &amp; 0xFF) + " " + \ str(unpacked_data[6] &amp; 0xFF) self.reference = unpacked_data[7] + unpacked_data[8] / 2 ** 32 # 8 bytes self.originate = unpacked_data[9] + unpacked_data[10] / 2 ** 32 # 8 bytes self.receive = unpacked_data[11] + unpacked_data[12] / 2 ** 32 # 8 bytes self.transmit = unpacked_data[13] + unpacked_data[14] / 2 ** 32 # 8 bytes return self</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">F√ºr faule Leute als Anwendung - ein Code, der ein Paket in eine sch√∂ne Zeichenfolge verwandelt</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to_display</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Leap indicator: {0.leap_indicator}\n"</span></span> \ <span class="hljs-string"><span class="hljs-string">"Version number: {0.version_number}\n"</span></span> \ <span class="hljs-string"><span class="hljs-string">"Mode: {0.mode}\n"</span></span> \ <span class="hljs-string"><span class="hljs-string">"Stratum: {0.stratum}\n"</span></span> \ <span class="hljs-string"><span class="hljs-string">"Pool: {0.pool}\n"</span></span> \ <span class="hljs-string"><span class="hljs-string">"Precision: {0.precision}\n"</span></span> \ <span class="hljs-string"><span class="hljs-string">"Root delay: {0.root_delay}\n"</span></span> \ <span class="hljs-string"><span class="hljs-string">"Root dispersion: {0.root_dispersion}\n"</span></span> \ <span class="hljs-string"><span class="hljs-string">"Ref id: {0.ref_id}\n"</span></span> \ <span class="hljs-string"><span class="hljs-string">"Reference: {0.reference}\n"</span></span> \ <span class="hljs-string"><span class="hljs-string">"Originate: {0.originate}\n"</span></span> \ <span class="hljs-string"><span class="hljs-string">"Receive: {0.receive}\n"</span></span> \ <span class="hljs-string"><span class="hljs-string">"Transmit: {0.transmit}"</span></span>\ .format(self)</code> </pre><br></div></div><br><h3>  Senden eines Pakets an den Server </h3><br>  Es ist erforderlich, ein Paket mit den ausgef√ºllten Feldern <b>Version</b> , <b>Modus</b> und Senden an den Server zu senden.  In <b>Senden m√ºssen</b> Sie die aktuelle Zeit auf dem lokalen Computer (Anzahl der Sekunden seit dem 1. Januar 1900), Version - beliebig 1-4, Modus - 3 (Client-Modus) angeben. <br><br>  Nachdem der Server die Anforderung akzeptiert hat, f√ºllt er alle Felder im NTP-Paket aus, indem er den <b>√úbertragungswert</b> aus der Anforderung in das Feld <b>Originate</b> kopiert.  Es ist mir ein R√§tsel, warum der Kunde den Wert seiner Zeit nicht sofort in das Feld " <b>Ursprung"</b> eingeben kann.  Wenn das Paket zur√ºckkommt, hat der Client viermal - die Zeit, zu der die Anforderung gesendet wurde ( <b>Originate</b> ), die Zeit, zu der der Server die Anforderung <b>empfangen hat</b> ( <b>Receive</b> ), die Zeit, zu der der Server die Antwort gesendet hat ( <b>Transmit</b> ) und die Zeit, zu der der Client die Antwort empfangen hat - <b>Arrive</b> (nicht im Paket).  Mit diesen Werten k√∂nnen wir die richtige Zeit einstellen. <br><br><div class="spoiler">  <b class="spoiler_title">Paket senden und empfangen Code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># Time difference between 1970 and 1900, seconds FORMAT_DIFF = (datetime.date(1970, 1, 1) - datetime.date(1900, 1, 1)).days * 24 * 3600 # Waiting time for recv (seconds) WAITING_TIME = 5 server = "pool.ntp.org" port = 123 packet = NTPPacket(version_number=2, mode=3, transmit=time.time() + FORMAT_DIFF) answer = NTPPacket() with socket.socket(socket.AF_INET, socket.SOCK_DGRAM) as s: s.settimeout(WAITING_TIME) s.sendto(packet.pack(), (server, port)) data = s.recv(48) arrive_time = time.time() + FORMAT_DIFF answer.unpack(data)</span></span></code> </pre><br></div></div><br><h3>  Daten vom Server verarbeiten </h3><br>  Die Verarbeitung von Daten vom Server √§hnelt den Aktionen des englischen Gentleman aus der alten Aufgabe von Raymond M. Sullian (1978): ‚ÄûEine Person hatte keine Uhr, aber andererseits gab es eine genaue Wanduhr, die er manchmal vergessen hatte zu starten.  Einmal, nachdem er vergessen hatte, die Uhr wieder zu starten, besuchte er seinen Freund, verbrachte den Abend an diesem Ort und als er nach Hause zur√ºckkehrte, gelang es ihm, die Uhr richtig einzustellen.  Wie hat er das geschafft, wenn die Reisezeit nicht im Voraus bekannt war? ‚Äú  Die Antwort lautet: ‚ÄûEine Person verl√§sst das Haus, startet die Uhr und merkt sich, in welcher Position sich die Zeiger befinden.  Als er zu einem Freund kommt und die G√§ste verl√§sst, notiert er die Zeit seiner Ankunft und Abreise.  Auf diese Weise kann er herausfinden, wie viel er besucht hat.  Nach der R√ºckkehr nach Hause und dem Blick auf die Uhr bestimmt eine Person die Dauer ihrer Abwesenheit.  Wenn man von dieser Zeit die Zeit abzieht, die er f√ºr einen Besuch aufgewendet hat, lernt eine Person die Zeit, die sie f√ºr die Hin- und Herreise aufgewendet hat.  Nachdem er die H√§lfte der f√ºr die Reise aufgewendeten Zeit zur Zeit des Verlassens der G√§ste hinzugef√ºgt hat, hat er die M√∂glichkeit, die Ankunftszeit zu Hause herauszufinden und die Uhrzeiger entsprechend zu √ºbersetzen. ‚Äú <br><br>  Wir finden die Serverarbeitszeit auf der Anfrage: <br><br><ol><li>  Wir finden die Paketpfadzeit vom Client zum Server: <i>((Arrive - Originate) - (Transmit - Receive)) / 2</i> </li><li>  Finden Sie den Unterschied zwischen Client- und Serverzeit: <br>  <i>Empfangen - Originieren - ((Ankommen - Originieren) - (Senden - Empfangen)) / 2 =</i> <i><br></i>  <i>2 * Empfangen - 2 * Originieren - Ankommen + Originieren + Senden - Empfangen =</i> <i><br></i>  <i>Empfangen - Urspr√ºnglich - Ankommen + Senden</i> </li></ol><br>  F√ºgen Sie den erhaltenen Wert zur Ortszeit hinzu und genie√üen Sie das Leben. <br><br><div class="spoiler">  <b class="spoiler_title">Ausgabeergebnis</b> <div class="spoiler_text"><pre> <code class="python hljs">time_different = answer.get_time_different(arrive_time) result = <span class="hljs-string"><span class="hljs-string">"Time difference: {}\nServer time: {}\n{}"</span></span>.format( time_different, datetime.datetime.fromtimestamp(time.time() + time_different).strftime(<span class="hljs-string"><span class="hljs-string">"%c"</span></span>), answer.to_display()) print(result)</code> </pre><br></div></div><br>  N√ºtzlicher <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de448060/">https://habr.com/ru/post/de448060/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de448050/index.html">Amateur-Holographie - Silberhalogenid-Materialien</a></li>
<li><a href="../de448052/index.html">Mikrotik. IPSEC vpn f√ºr NAT als Client</a></li>
<li><a href="../de448054/index.html">SciPy, Optimierung mit Bedingungen</a></li>
<li><a href="../de448056/index.html">Was sind intelligente Vertr√§ge?</a></li>
<li><a href="../de448058/index.html">Hexapod von Grund auf neu entwickeln (Teil 5) - Elektronik</a></li>
<li><a href="../de448068/index.html">Amerikanische Wissenschaftler haben Robotern den Umgang mit Hilfswerkzeugen beigebracht</a></li>
<li><a href="../de448070/index.html">Importsubstitution in der Praxis. Teil 3. Betriebssysteme</a></li>
<li><a href="../de448072/index.html">Das Verst√§ndnis von Joins ist gebrochen. Dies ist definitiv nicht der Schnittpunkt von Kreisen, ehrlich</a></li>
<li><a href="../de448074/index.html">ALU mit 12 Transistoren (eigentlich nicht)</a></li>
<li><a href="../de448076/index.html">Simple Go Simulationssystem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>