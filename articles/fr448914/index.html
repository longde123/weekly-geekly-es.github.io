<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👲🏻 🎱 👼 Chargement d'images paresseuses avec des outils de navigation 👨🏻‍🔬 👩‍🔬 👩‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'auteur du document, dont nous publions la traduction aujourd'hui, Eddie Osmani de Google, dit que dans Chrome 75, la prise en charge du nouvel attri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Chargement d'images paresseuses avec des outils de navigation</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/448914/"> L'auteur du document, dont nous publions la traduction aujourd'hui, Eddie Osmani de Google, dit que dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Chrome 75, la</a> prise en charge du nouvel attribut des éléments de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">chargement</a> <code>&lt;img&gt;</code> et <code>&lt;iframe&gt;</code> pourrait bien apparaître.  Cela signifie que ces éléments prendront en charge les fonctionnalités standard pour le soi-disant «chargement paresseux» des données. <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/432/57c/297/43257c297cba317be0898b210b61c0fa.gif" alt="image"></a> </div><a name="habracut"></a><br>  Si vous avez hâte de savoir à quoi ressemble l'utilisation du nouvel attribut dans le code, jetez un œil à cet exemple: <br><br><pre> <code class="javascript hljs">&lt;img align=<span class="hljs-string"><span class="hljs-string">"center"</span></span> src=<span class="hljs-string"><span class="hljs-string">"celebration.jpg"</span></span> loading=<span class="hljs-string"><span class="hljs-string">"lazy"</span></span> alt=<span class="hljs-string"><span class="hljs-string">"..."</span></span> /&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">iframe</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"video-player.html"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">loading</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"lazy"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">iframe</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Nous allons maintenant parler du fonctionnement de l'attribut de <code>loading</code> . <br><br><h2>  <font color="#3AC1EF">Informations préliminaires</font> </h2><br>  Les pages Web contiennent souvent de nombreuses images, ce qui affecte la taille des pages, conduit à son <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://">augmentation excessive</a> et affecte la vitesse de chargement des pages.  De nombreuses images affichées sur les pages se trouvent en dehors de leur zone visible.  Pour voir ces images, l'utilisateur doit faire défiler la page. <br><br>  Historiquement, afin de limiter l'impact sur le temps de chargement des pages d'images situées en dehors de la zone visible des pages, les programmeurs devaient utiliser des bibliothèques JavaScript (comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LazySizes</a> ).  Ces bibliothèques vous permettent de retarder le chargement de ces images jusqu'au moment où l'utilisateur, en faisant défiler la page, ne s'en rapproche pas suffisamment. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/271/bff/328/271bff328200fd37965db022ef47e0c8.png"></div><br>  <i><font color="#999999">Page chargeant 211 images.</font></i>  <i><font color="#999999">Une version de page qui n'est pas utilisée pour créer un chargement d'image paresseuse charge immédiatement 10 Mo de données graphiques.</font></i>  <i><font color="#999999">La même page utilisant le chargement différé (à l'aide de LazySizes) ne précharge que 250 Ko d'informations graphiques.</font></i>  <i><font color="#999999">Tout le reste est chargé lorsque l'utilisateur se déplace sur la page.</font></i>  <i><font color="#999999">Les détails de cette expérience sont disponibles sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">webpagetest.org</a> .</font></i> <br><br>  Et si le navigateur pouvait aider le programmeur à éviter de charger des images situées en dehors de la zone visible des pages?  Cela aurait un effet bénéfique sur la vitesse de chargement des données dans la zone visible de la page, réduirait, sur les appareils de faible puissance, la quantité totale de données transmises sur le réseau, réduirait la consommation de mémoire.  Tout cela sera bientôt possible grâce au nouvel attribut des éléments de <code>loading</code> <code>&lt;img&gt;</code> et <code>&lt;iframe&gt;</code> . <br><br><h2>  <font color="#3AC1EF">Attribut de chargement</font> </h2><br>  L'attribut de <code>loading</code> permet au navigateur de retarder le chargement du contenu des éléments <code>&lt;img&gt;</code> et <code>&lt;iframe&gt;</code> qui se trouvent en dehors de la zone visible de la page jusqu'à ce que l'utilisateur fasse défiler la page suffisamment près de ces éléments.  Cet attribut prend en charge trois valeurs: <br><br><ul><li>  <code>lazy</code> : indique les matériaux qui sont de bons candidats pour le chargement paresseux. </li><li>  <code>eager</code> : les matériaux des éléments avec cette valeur d'attribut doivent être chargés immédiatement. </li><li>  <code>auto</code> : le navigateur décidera d'appliquer ou non le chargement différé aux matériaux avec cette valeur d'attribut. </li></ul><br>  Si vous ne spécifiez pas la valeur de l'attribut de <code>loading</code> , cela équivaudra à le définir sur <code>auto</code> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b23/4e3/a36/b234e3a36b9ad54b312f4a7e18a6a596.png"></div><br>  <i><font color="#999999">Actuellement, l'attribut de chargement pour les éléments &lt;img&gt; et &lt;iframe&gt; est sous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la norme HTML</a></font></i> <br><br><h2>  <font color="#3AC1EF">Des exemples</font> </h2><br>  L'attribut de <code>loading</code> fonctionne avec les éléments <code>&lt;img&gt;</code> (y compris l'attribut <code>srcset</code> et à l'intérieur de l'élément <code>&lt;picture&gt;</code> ), ainsi qu'avec les éléments <code>&lt;iframe&gt;</code> . <br><br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!--    ,      ,   ,         --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"unicorn.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loading</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    ,    --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"unicorn.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loading</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"eager"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   ,        ,   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"unicorn.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loading</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"auto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--      &lt;picture&gt;.      &lt;img&gt;,    &lt;picture&gt;   srcset     --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">picture</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">media</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(min-width: 40em)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">srcset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"big.jpg 1x, big-hd.jpg 2x"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">srcset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"small.jpg 1x, small-hd.jpg 2x"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fallback.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loading</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">picture</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    ,     srcset --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"small.jpg"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">srcset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"large.jpg 1024w, medium.jpg 640w, small.jpg 320w"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sizes</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(min-width: 36em) 33.3vw, 100vw"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"A rad wolf"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loading</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--      &lt;iframe&gt;   ,     ,          --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iframe</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"video-player.html"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loading</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iframe</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Il est à noter que nous utilisons ici des formulations comme celle-ci: «lorsque l'utilisateur fait défiler la page pour que sa zone visible soit proche de l'élément».  Le navigateur détermine le moment exact où l'image commence à se charger.  En général, nous pouvons espérer que le navigateur commencera à télécharger des documents dont le téléchargement a été retardé, un certain temps avant que la zone de la page qui les contient soit visible pour l'utilisateur.  Cela augmentera les chances que le téléchargement et la sortie des documents pertinents soient terminés au moment où l'utilisateur les voit. <br><br>  Veuillez noter que j'ai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">suggéré</a> que l'attribut en question soit appelé <code>loading</code> , car cette approche pour le nommer correspond à celle utilisée lors du choix d'un nom pour l'attribut de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">décodage</a> .  Les phrases précédentes, comme <code>lazyload</code> , ne fonctionnaient pas, car il était nécessaire que cet attribut <code>lazyload</code> en charge plusieurs valeurs ( <code>lazy</code> , <code>eager</code> et <code>auto</code> ). <br><br><h2>  <font color="#3AC1EF">Vérifier la prise en charge du navigateur pour le chargement de l'attribut</font> </h2><br>  Nous avons pris en compte l'importance de la possibilité d'utiliser des bibliothèques JavaScript pour organiser le chargement paresseux des matériaux (pour la prise en charge de cette fonctionnalité par plusieurs navigateurs).  Vous pouvez vérifier si le navigateur prend en <code>loading</code> attribut de <code>loading</code> en: <br><br><pre> <code class="javascript hljs">&lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">'loading'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> HTMLImageElement.prototype) {   <span class="hljs-comment"><span class="hljs-comment">//   `loading`. } else {  //  -      JavaScript-   //    . } &lt;/script&gt;</span></span></code> </pre> <br>  Notez que l'attribut de <code>loading</code> peut être utilisé pour étendre progressivement les capacités de la page.  Les navigateurs qui prennent en charge cet attribut pourront organiser le téléchargement paresseux des documents à l'aide de <code>loading=lazy</code> , et les navigateurs qui ne prennent pas en charge cette fonctionnalité téléchargeront simplement ces documents comme auparavant. <br><br><h2>  <font color="#3AC1EF">Chargement d'images paresseuses entre navigateurs</font> </h2><br>  Si la prise en charge multi-navigateur pour le chargement d'images paresseuses est importante, il ne suffit pas simplement de déterminer si le navigateur prend en charge cette fonctionnalité et, si ce n'est pas le cas, utilisez la bibliothèque appropriée si vous utilisez un design comme <code>&lt;img align="center" src=unicorn.jpg loading=lazy /&gt;</code> pour décrire l'image dans le balisage <code>&lt;img align="center" src=unicorn.jpg loading=lazy /&gt;</code> . <br><br>  Dans le balisage, vous devez utiliser quelque chose comme <code>&lt;img data-src=unicorn.jpg /&gt;</code> (plutôt que <code>src</code> , <code>srcset</code> ou <code>&lt;source&gt;</code> ) afin d'éviter le chargement normal de l'image par des navigateurs qui ne prennent pas en charge le nouvel attribut.  Afin de changer ces attributs en ceux qui doivent être utilisés avec le support de l'attribut de <code>loading</code> du navigateur, ou de télécharger la bibliothèque correspondante si cet attribut n'est pas pris en charge, vous pouvez utiliser JavaScript. <br><br>  Voici un exemple de ce à quoi cela pourrait ressembler: <br><br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!--   ,     ,   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".."</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    ,     --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"unicorn.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loading</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazyload"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"cats.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loading</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazyload"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dogs.jpg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loading</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazy"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lazyload"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> (</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">async</span></span></span><span class="javascript"> () =&gt; {   </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'loading'</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">in</span></span></span><span class="javascript"> HTMLImageElement.prototype) {       </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> images = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelectorAll(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"img.lazyload"</span></span></span><span class="javascript">);       images.forEach(</span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">img</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> {           img.src = img.dataset.src;       });   } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">else</span></span></span><span class="javascript"> {       </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//    LazySizes       const lazySizesLib = await import('/lazysizes.min.js');       //  LazySizes ( data-src &amp; class=lazyload)       lazySizes.init(); // lazySizes    ,   .   } })(); </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Considérez certaines des fonctionnalités de ce code: <br><br><ul><li>  Les images visibles par l'utilisateur immédiatement après le chargement de la page sont décrites à l'aide de balises <code>&lt;img&gt;</code> normales.  L'utilisation de l'attribut <code>data-src</code> sans <code>src</code> empêchera les images de s'afficher immédiatement après le chargement de la page.Par conséquent, en configurant les images qui devraient être visibles immédiatement après le chargement de la page, nous devons spécifier l'attribut <code>src</code> . </li><li>  Lorsque nous décrivons des images qui ne sont pas immédiatement visibles par l'utilisateur après le chargement de la page, nous utilisons l'attribut <code>data-src</code> .  Ceci est fait afin de les empêcher de se charger normalement dans les navigateurs qui ne prennent pas en charge l'attribut de <code>loading</code> .  Si le navigateur prend en charge cet attribut, nous changeons <code>data-src</code> en <code>src</code> . </li><li>  Si l'attribut de <code>loading</code> n'est pas pris en charge, nous chargeons la bibliothèque auxiliaire (lazySizes) et l'initialisons.  Ici, nous utilisons <code>class=lazyload</code> pour pointer la bibliothèque LazySizes vers les images avec lesquelles nous voulons travailler en utilisant la technique de chargement paresseux. </li></ul><br><h2>  <font color="#3AC1EF">Démo</font> </h2><br>  Vous pouvez voir ici un exemple de page sur laquelle un chargement paresseux de 100 images de chats est effectué.  Mais, si vous êtes intéressé, les téléchargements vidéo de cette page. <br><br><h2>  <font color="#3AC1EF">Fonctionnalités de mise en œuvre pour le chargement de la prise en charge des attributs dans Chrome</font> </h2><br>  Nous recommandons fortement qu'avant d'utiliser l'attribut de <code>loading</code> en production, attendez que son support apparaisse dans la version stable de Chrome.  Si vous êtes impatient d'essayer cette opportunité, alors vous serez peut-être intéressé par ce dont nous allons parler. <br><br><h3>  Test d'attribut de chargement </h3><br>  Pour expérimenter le nouvel attribut en ce moment, accédez à la page des paramètres des indicateurs Chrome ( <code>chrome://flags</code> ), activez les options <code>Enable lazy frame loading</code> et <code>Enable lazy image loading</code> indicateurs de <code>Enable lazy image loading</code> , puis redémarrez le navigateur. <br><br><h3>  Paramètres du navigateur </h3><br>  La mise en œuvre de la méthode de chargement paresseux des matériaux dans Chrome est basée non seulement sur la proximité de la zone visible de la page avec ces matériaux, mais également sur la vitesse de connexion.  Les seuils de déclenchement du chargement paresseux de matériaux pour différentes vitesses de connexion sont codés en dur dans le code, mais ces valeurs peuvent être remplacées à l'aide de la ligne de commande.  Voici un exemple de paramètres prioritaires pour les images: <br><br><pre> <code class="javascript hljs">canary --user-data-dir=<span class="hljs-string"><span class="hljs-string">"$(mktemp -d)"</span></span> --enable-features=LazyImageLoading --blink-settings=lazyImageLoadingDistanceThresholdPxUnknown=<span class="hljs-number"><span class="hljs-number">5000</span></span>,lazyImageLoadingDistanceThresholdPxOffline=<span class="hljs-number"><span class="hljs-number">8000</span></span>,lazyImageLoadingDistanceThresholdPxSlow2G=<span class="hljs-number"><span class="hljs-number">8000</span></span>,lazyImageLoadingDistanceThresholdPx2G=<span class="hljs-number"><span class="hljs-number">6000</span></span>,lazyImageLoadingDistanceThresholdPx3G=<span class="hljs-number"><span class="hljs-number">4000</span></span>,lazyImageLoadingDistanceThresholdPx4G=<span class="hljs-number"><span class="hljs-number">3000</span></span> <span class="hljs-string"><span class="hljs-string">'https://mathiasbynens.be/demo/img-loading-lazy'</span></span></code> </pre> <br>  La commande ci-dessus correspond aux paramètres par défaut actuels.  Afin de commencer à charger des images si la position de défilement de la page est à 400 pixels de l'image, toutes les valeurs de cette commande doivent être modifiées à 400. Ce qui suit est un exemple d'une variation de 1 pixel de cette commande (ce paramètre est utilisé dans la vidéo ci-dessus). ) <br><br><pre> <code class="javascript hljs">canary --user-data-dir=<span class="hljs-string"><span class="hljs-string">"$(mktemp -d)"</span></span> --enable-features=LazyImageLoading --blink-settings=lazyImageLoadingDistanceThresholdPxUnknown=<span class="hljs-number"><span class="hljs-number">1</span></span>,lazyImageLoadingDistanceThresholdPxOffline=<span class="hljs-number"><span class="hljs-number">1</span></span>,lazyImageLoadingDistanceThresholdPxSlow2G=<span class="hljs-number"><span class="hljs-number">1</span></span>,lazyImageLoadingDistanceThresholdPx2G=<span class="hljs-number"><span class="hljs-number">1</span></span>,lazyImageLoadingDistanceThresholdPx3G=<span class="hljs-number"><span class="hljs-number">1</span></span>,lazyImageLoadingDistanceThresholdPx4G=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">'https://mathiasbynens.be/demo/img-loading-lazy'</span></span></code> </pre> <br>  Il est très probable que la configuration standard du chargement paresseux dans Chrome change à mesure que la mise en œuvre de cette fonctionnalité se stabilise dans les semaines à venir. <br><br><h3>  Outils pour les développeurs </h3><br>  Les fonctionnalités de la mise en œuvre de la prise en <code>loading</code> attribut de <code>loading</code> dans Chrome sont que le navigateur, lors du chargement de la page, demande les 2 premiers Ko d'images au serveur s'il prend en charge la technologie de demande de plage.  Les 2 premières images KB contiennent probablement des informations sur leurs tailles.  Cela permet au navigateur de générer des espaces réservés dont les tailles correspondent aux tailles des images.  De plus, dans ces 2K, si nous parlons de petites images comme des icônes, il est très probable que l'image entière soit incluse. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b74/620/a7b/b74620a7b3a2a8de53987fcad91c79d6.png"></div><br>  <i><font color="#999999">Chargement de fragments de fichiers graphiques</font></i> <br><br>  Chrome télécharge les données d'image restantes au moment où l'utilisateur est sur le point de les voir.  Lorsque vous travaillez avec des outils de développement, cela peut conduire au fait que des informations sur deux téléchargements d'images peuvent «apparaître» dans le panneau Réseau, et des informations sur deux requêtes effectuées pour télécharger chaque image seront affichées dans le panneau Temporisation des ressources. <br><br><h2>  <font color="#3AC1EF">Serveur de support du navigateur définissant l'attribut de chargement</font> </h2><br>  Si nous vivions dans un monde parfait, alors pour savoir si vous devez utiliser la bibliothèque auxiliaire pour la sortie de page correcte dans un navigateur, vous ne pouvez pas vous fier à l'analyse du navigateur à l'aide de JavaScript côté client.  Avec cette approche, le serveur, sachant à l'avance si une telle bibliothèque est nécessaire ou non, l'inclurait (ou non) dans la page envoyée au navigateur.  Une telle vérification peut être rendue possible en utilisant la technologie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://httpwg.org/">HTTP Client Hint</a> , grâce à laquelle le client est capable de transmettre des "conseils" sur ses capacités au serveur. <br><br>  Le «conseil» correspondant concernant la prise en <code>loading</code> attribut de <code>loading</code> est maintenant à un stade précoce de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">considération</a> . <br><br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>  L'auteur de ce matériel invite tous ceux qui sont intéressés à utiliser l'attribut de <code>loading</code> lorsqu'ils travaillent avec les éléments <code>&lt;img&gt;</code> et <code>&lt;iframe&gt;</code> à l'essayer et à partager <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">leurs</a> impressions avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lui</a> .  Il est particulièrement intéressé à savoir à quoi ressemblent, du point de vue des développeurs, les mécanismes de support multi-navigateur proposés ici pour le chargement paresseux des données, et à savoir s'il a raté certains cas limites en parlant de tels mécanismes. <br><br>  <b>Chers lecteurs!</b>  Envisagez-vous d'utiliser l'attribut de <code>loading</code> dans vos projets? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr448914/">https://habr.com/ru/post/fr448914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr448894/index.html">Étui pour "framboise" avec RetroPie - à partir d'un appareil pour visualiser les diapositives</a></li>
<li><a href="../fr448896/index.html">Théorie de l'hypersense</a></li>
<li><a href="../fr448900/index.html">Frontend Weekly Digest (15-21 avril 2019)</a></li>
<li><a href="../fr448904/index.html">Le condensé de matières fraîches du monde du front-end de la dernière semaine n ° 361 (15-21 avril 2019)</a></li>
<li><a href="../fr448912/index.html">Chypre - un moment de douce psychédélique</a></li>
<li><a href="../fr448916/index.html">Grille ou Flexbox?</a></li>
<li><a href="../fr448918/index.html">Composants Web: 9 projets à découvrir en 2019</a></li>
<li><a href="../fr448920/index.html">Utilisation de la console JavaScript dans les navigateurs</a></li>
<li><a href="../fr448922/index.html">L'intelligence artificielle améliore la qualité graphique des anciens jeux vidéo et le fait très bien</a></li>
<li><a href="../fr448926/index.html">10 façons d'économiser sur l'infrastructure informatique pour tout le monde</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>