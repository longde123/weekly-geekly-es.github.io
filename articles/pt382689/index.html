<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèáüèΩ üêá ü•å Controlamos a ilumina√ß√£o do apartamento (NooLite, Raspberry Pi e WebIOPi) üó®Ô∏è üçΩÔ∏è üåÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quero compartilhar a experi√™ncia de usar o sistema dom√©stico inteligente NooLite junto com o Raspberry Pi Modelo B (daqui em diante RPI ) em um aparta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Controlamos a ilumina√ß√£o do apartamento (NooLite, Raspberry Pi e WebIOPi)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/382689/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quero compartilhar a experi√™ncia de usar o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sistema</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dom√©stico inteligente </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">NooLite</font></a><font style="vertical-align: inherit;"> junto com o Raspberry Pi Modelo B (daqui </font><font style="vertical-align: inherit;">em </font><font style="vertical-align: inherit;">diante </font></font><abbr title="Raspberry Pi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RPI</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) em um apartamento de dois quartos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobre o sistema NooLite foram escritos repetidamente em um hub:</font></font><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NooLite - um sistema de ilumina√ß√£o controlado por r√°dio ou o primeiro passo para uma casa inteligente</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NooLite-2, ou casa inteligente para manequins</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">procure no Habr a tag "noolite" ou digite na barra de pesquisa google "site: habrahabr.ru noolite"</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo vou dizer:</font></font><br>
<ul>
<li>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WebIOPi</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Raspbian</a>    UART     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> MT1132 NooLite</a></li>
<li>    WebIOPi      HTTP REST  GPIO UART</li>
<li>      Android     REST </li>
</ul><br>
<a name="habracut"></a><br>
<h4></h4><br>
<ul>
<li><b></b> ( ): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RPI</a> + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WebIOPi</a> (UART+REST) + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NooLite </a></li>
<li><b> </b>:   NooLite   ‚Äî   </li>
<li><b></b> ( , ):   Android, WEB-,  bash shell (python script)</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez algu√©m pense: ‚ÄúEu n√£o me incomodaria com o RPI por uma funcionalidade t√£o simples - controlar a ilumina√ß√£o do apartamento a partir de um telefone celular, mas realizaria tudo </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usando um copo de pl√°stico, uma pedra e um fio</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em um Arduino com um escudo Wi-Fi ou um mais simples. implementa√ß√£o concisa no microcontrolador AVR ". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por√©m, como eu j√° estava acumulando poeira na prateleira do RPI e fui superado pelo desejo de criar ilumina√ß√£o ‚Äúinteligente‚Äù usando a plataforma RPI, decidi tom√°-lo como base. </font><font style="vertical-align: inherit;">Al√©m disso, a possibilidade de usar o RPI fornece uma boa margem para expandir a funcionalidade da ‚Äúcasa inteligente‚Äù.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dados de entrada</font></font></h4><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apartamento de 2 assoalhadas P44T sem reparo em um novo pr√©dio</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RPI (foi adquirida h√° dois anos por uma quest√£o de interesse)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desejo de realizar ilumina√ß√£o inteligente</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante algum tempo, observei v√°rias plataformas e tecnologias da casa inteligente, como resultado, a escolha recaiu no sistema NooLite, com base no seguinte:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pre√ßo adequado em compara√ß√£o com sistemas similares (Z-Wave, EnOcean, ZigBee)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Confio nos produtos fabricados na Bielorr√∫ssia</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">protocolo aberto</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muitos exemplos de uso na Internet</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">433 MHz </font><font style="vertical-align: inherit;">generalizada e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ratificada pelo SCRF</font></font></a><font style="vertical-align: inherit;"></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chamei</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a </font><font style="vertical-align: inherit;">aten√ß√£o </font><font style="vertical-align: inherit;">para a </font><font style="vertical-align: inherit;">plataforma </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">Wiren Board</font></a><font style="vertical-align: inherit;"> baseada em ARM9 </font><font style="vertical-align: inherit;">para automa√ß√£o residencial </font><font style="vertical-align: inherit;">com funcionalidade rica para todas as necessidades imagin√°veis ‚Äã‚Äãe inimagin√°veis. </font><font style="vertical-align: inherit;">Fiquei especialmente satisfeito com o recurso matador - um m√≥dulo de r√°dio de 433 MHz, que no meu caso √© adequado para controlar as unidades de energia NooLite. </font><font style="vertical-align: inherit;">Mas j√° que eu j√° tenho um RPI, vamos construir sobre isso. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para implementar a ilumina√ß√£o "inteligente" no apartamento, eu precisava resolver as seguintes tarefas:</font></font><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">determinar o cen√°rio de ilumina√ß√£o ideal em um apartamento de dois quartos</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">definir um m√©todo para integra√ß√£o com o RPI e coloca√ß√£o de baixa corrente</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escolha um wrapper para controlar</font></font></a><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desenhar uma arquitetura de intera√ß√£o comum</font></font></a></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fa√ßa uma lista de compras </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coordene o acima com sua esposa</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compre os componentes necess√°rios</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controles remotos de liga√ß√£o e integra√ß√£o de RPI de depura√ß√£o&gt; NooLite</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encontre e compre interruptores adequados para controles remotos</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coloque blocos e interruptores de energia </font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desenvolver um aplicativo m√≥vel para Android</font></font></a></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os itens 1 e 4-6 podem ser repetidos em um ciclo. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pre√ßo de Emiss√£o:</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RPI [1 pc]</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dulo NooLite MT1132 [1 140 ‚ÇΩ X 1 pc] 1 140 ‚ÇΩ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blocos de for√ßa NL [1 240 ‚ÇΩ X 11 pe√ßas] 13 640 ‚ÇΩ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pain√©is de controle estacion√°rios NL [1 340 ‚ÇΩ X 7 pe√ßas] 9 380 ‚ÇΩ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaveiro de controle remoto NL [1 550 ‚ÇΩ X 1 pc] 1 550 ‚ÇΩ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensor de movimento NL [1 550 ‚ÇΩ X 1 pc] 1 550 ‚ÇΩ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caixas de montagem, suportes, m√≥dulos de teclado / bot√£o (interruptores), quadros (adquiridos individualmente)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amigos com uma impressora 3D - de gra√ßa</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total: ~ 27 000 ‚ÇΩ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + controlador de 3 000 ‚ÇΩ.</font></font><br>
<a name="block1"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cen√°rio de ilumina√ß√£o do apartamento</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O layout do colete de canto de dois quartos P44T com uma janela de sacada √© apresentado abaixo. </font></font><br>
<img src="https://habrastorage.org/files/f24/f3a/512/f24f3a512d94401ebf9d36ae27b645a2.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Est√° planejado controlar a ilumina√ß√£o com o NooLite em todos os quartos, exceto na varanda, banheiro e lavabo.</font></font><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O corredor</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2 pontos de ilumina√ß√£o com modo rel√© (ligado / desligado). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um ponto de luz n√£o t√£o brilhante deve ser controlado pelo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sensor de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> movimento </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">PM111</font></a><font style="vertical-align: inherit;"> . Isso permitir√° que no escuro ilumine o caminho do andarilho noturno em busca das luzes da fome noturna. </font></font><br>
<img src="https://habrastorage.org/files/82b/981/6b6/82b9816b645c43f09360010da4b2d6bd.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ambos os pontos de ilumina√ß√£o devem ser controlados por um interruptor fixo localizado ao lado da porta da frente. O interruptor deve incluir o cen√°rio "apague as luzes em todo o apartamento". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sensor de movimento t√©rmico entra no modo de espera (come√ßa a responder ao movimento de objetos t√©rmicos) quando voc√™ define o n√≠vel de ilumina√ß√£o necess√°rio da sala e a sensibilidade. Geralmente, durante o dia, n√£o h√° necessidade de piscar a luz no corredor para passar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das instru√ß√µes para o sensor:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se a ilumina√ß√£o pr√≥xima ao sensor </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM111 for</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> maior que a definida pelo regulador de ilumina√ß√£o, o sensor estar√° no modo de espera. </font><font style="vertical-align: inherit;">Ao mesmo tempo, seu consumo atual √© m√≠nimo (menos de 1 ŒºA) e o sensor de movimento t√©rmico √© desativado. </font><font style="vertical-align: inherit;">Quando a ilumina√ß√£o cai abaixo de um n√≠vel predeterminado, o sensor entra no modo de espera.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As luzes no banheiro e no banheiro s√£o controladas por um interruptor estacion√°rio cl√°ssico. </font><font style="vertical-align: inherit;">A luz e o ventilador no vaso sanit√°rio s√£o conectados atrav√©s de um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rel√© de tempo F&amp;F PO-415</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tamb√©m bielorrusso) em um trilho DIN.</font></font><br>
<img src="https://habrastorage.org/files/761/0dd/00a/7610dd00a0d14e85bfb6aad508fd7570.png"><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado do fechamento do contato de controle 6, os contatos de rel√© 11, 12 s√£o fechados. </font><font style="vertical-align: inherit;">A abertura do contato de controle 6 causa uma contagem regressiva do tempo definido, ap√≥s o qual a opera√ß√£o do PO-415 para.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O interruptor estacion√°rio do corredor deve ser do tipo bot√£o de press√£o, pois a chamada de um script envolve pressionar um bot√£o (o script n√£o possui estados ON / OFF). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, o bot√£o √© necess√°rio se precisarmos desligar a luz j√° acesa pelo sensor de movimento, quando o temporizador do sensor estiver configurado para n√£o desligar a luz por v√°rios minutos ap√≥s ser acionado. </font><font style="vertical-align: inherit;">A chave n√£o se encaixa neste caso. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total no final do corredor:</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">duas unidades de pot√™ncia do tipo rel√© 200 W ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SU111-200</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no modo rel√©)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um interruptor fixo de 3 bot√µes ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PK313</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Remote </font><font style="vertical-align: inherit;">):</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bot√£o 1 - ligar / desligar a ilumina√ß√£o do ponto de luz 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bot√£o 2 - ligar / desligar a ilumina√ß√£o do ponto de luz 2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bot√£o 3 - apague a luz em todo o apartamento (script)</font></font></li>
</ul><br>
 </li>
</ul><br>
<img src="https://habrastorage.org/files/d15/e11/fde/d15e11fde6b544e0b8b4a39329018f58.png"><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cozinha</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tr√™s pontos de ilumina√ß√£o:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l√¢mpada acima da mesa ( </font><font style="vertical-align: inherit;">modo de rel√© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SU111-200</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ilumina√ß√£o pontual no teto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flex√≠vel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><font style="vertical-align: inherit;">modo de rel√© </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">SU111-200</font></a><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faixa de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> LED para iluminar a superf√≠cie de trabalho da cozinha ( </font><font style="vertical-align: inherit;">modo rel√© </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">SU111-200</font></a><font style="vertical-align: inherit;"> )</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os pontos de ilumina√ß√£o s√£o controlados por um interruptor de 3 bot√µes ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> remoto </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">PK311</font></a><font style="vertical-align: inherit;"> ) localizado na entrada da cozinha.</font></font><br>
<img src="https://habrastorage.org/files/f5e/6db/293/f5e6db29310044d7a028093a8bf6dcfc.png"><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sala de estar e varanda</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dois pontos de ilumina√ß√£o no modo rel√© ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SU111-200</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ilumina√ß√£o principal na sala de estar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">luz na varanda</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada ponto de ilumina√ß√£o √© controlado por 2 interruptores:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interruptor estacion√°rio de 2 bot√µes na varanda ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PK313</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Remote </font><font style="vertical-align: inherit;">):</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bot√£o 1 - luz liga / desliga na varanda</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bot√£o 2 - ligar / desligar a luz na sala de estar</font></font></li>
</ul><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interruptor fixo de 2 teclas na sala de estar ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PK314</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Remote </font><font style="vertical-align: inherit;">):</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tecla 1 - ligar / desligar a luz na sala de estar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tecla 2 - luz liga / desliga na varanda</font></font></li>
</ul><br>
 </li>
</ul><br>
<img src="https://habrastorage.org/files/2cd/d9e/241/2cdd9e24183442d089566677dee0de8c.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez algu√©m pergunte "por que n√£o colocar um interruptor de 2 teclas na varanda como na sala de estar?" </font><font style="vertical-align: inherit;">ou "por que n√£o colocar bot√µes em todo o apartamento?". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aconteceu que, inicialmente, era para instalar um interruptor de 3 bot√µes com um bot√£o de cen√°rio na varanda, mas depois mudou de id√©ia ao escolher o design dos pr√≥prios interruptores. </font><font style="vertical-align: inherit;">Tamb√©m foi assumido que haveria bot√µes no corredor e na cozinha e chaves na sala, no quarto e na varanda para preservar o design. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais tarde, eu queria diminuir a luz com um interruptor ao lado da cama, para que tudo desse errado. </font><font style="vertical-align: inherit;">Para preservar o design dos disjuntores, tive que viajar por muitos mercados da constru√ß√£o, visitar uma d√∫zia de sites na Internet, mais sobre isso mais adiante na se√ß√£o ‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encontre e compre disjuntores adequados para controles remotos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù.</font></font><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quarto</font></font></h5><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se√ß√£o 1 (cama)</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Normalmente, os blocos de energia est√£o localizados em cada ponto de ilumina√ß√£o. </font><font style="vertical-align: inherit;">Um ponto de ilumina√ß√£o - uma unidade de energia. </font><font style="vertical-align: inherit;">No meu cen√°rio de ilumina√ß√£o, h√° um desvio da l√≥gica tradicional. </font><font style="vertical-align: inherit;">No quarto ‚Äúse√ß√£o 1‚Äù, √© suposto instalar uma l√¢mpada com duas unidades de energia, uma das quais ser√° esmaecida. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se√ß√£o 2 (janela do compartimento)</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Al√©m dos interruptores estacion√°rios, todos os pontos de ilumina√ß√£o devem ser controlados a partir de um controle remoto de bolso como um console de backup e RPI. </font><font style="vertical-align: inherit;">Para chaveiro:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bot√£o A (ligar / desligar a luz no corredor e na cozinha)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bot√£o B (ligar / desligar a luz na sala de estar e na varanda)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bot√£o C (ligar / desligar a luz do quarto)</font></font></li>
</ul><br>
<img src="https://habrastorage.org/files/a78/f82/e8d/a78f82e8da434711aa8a66d6c40d7050.png"><br>
<a name="block2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definindo o posicionamento de baixa corrente e o m√©todo de integra√ß√£o NooLite C para RPI</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu direi imediatamente, a integra√ß√£o √© simples. </font><font style="vertical-align: inherit;">O NooLite possui um m√≥dulo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MT1132</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">O m√≥dulo recebe um pacote de controle via UART de algum controlador, no meu caso, √© um RPI, transmite um comando pelo ar para dispositivos executivos (blocos de energia) e responde com a constru√ß√£o OK / r \ n, tudo descrito nas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instru√ß√µes do m√≥dulo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tens√£o de alimenta√ß√£o do m√≥dulo (VCC Upit)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,7-5,5 V</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">faixa de tens√£o de entrada em Rx </font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 - Para cima</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTL ALTO LVL (unidade l√≥gica) em Upit = 5 V</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 - Upit (5 V)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTL BAIXO LVL (zero l√≥gico) em Upit = 5 V</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0-0,8 V</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTL ALTO LVL (unidade l√≥gica) em Upit = 3,3 V</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2-3,3 V</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTL BAIXO LVL (zero l√≥gico) em Upit = 3,3 V</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0-0,8 V</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Velocidade UART</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9600 baud</font></font></td>
</tr>
</tbody></table><br>
<img src="https://habrastorage.org/files/ffe/4ee/a4d/ffe4eea4d7a14c25ae45f94c3bef4204.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como as linhas RPART UART operam com n√≠veis TTL de 3,3 V, usaremos 3,3 V como a pot√™ncia U do m√≥dulo. </font></font><br>
<img src="https://habrastorage.org/files/d37/959/89e/d3795989ef37427ab127ad82d02e2ed0.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode usar tr√™s linhas no MT1132: VCC, GND e RX, para transmitir um pacote de controle. </font><font style="vertical-align: inherit;">Fiz isso durante a depura√ß√£o - n√£o li a resposta "OK \ r \ n" do MT1132, bastava observar o indicador da unidade de energia conectada. </font><font style="vertical-align: inherit;">Ap√≥s a aceita√ß√£o bem-sucedida do comando "encaderna√ß√£o", um piscar frequente do LED embutido √© iniciado na unidade de energia. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro ponto, a pot√™ncia do transmissor de r√°dio com pot√™ncia U de 3,3 V a 3,3 mW, com pot√™ncia U de 5 V a 5 mW. </font><font style="vertical-align: inherit;">A dist√¢ncia m√°xima para a unidade de energia √© de 70 m.</font></font><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre o pacote de controle</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pacote de controle consiste em 12 bytes: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ST, B0, B1, B2, B3, B4, B5, B6, B7, B8, CS, SP </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ST</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - byte inicial, sempre 85 </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B0..B8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - carga √∫til (comandos de controle) </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - soma de verifica√ß√£o. </font><font style="vertical-align: inherit;">O byte menos </font><font style="vertical-align: inherit;">significativo </font><font style="vertical-align: inherit;">da soma dos 10 primeiros bytes (ST a B8) </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - stop byte.De </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
acordo com as instru√ß√µes, escrevi os bytes de controle que preciso: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - comando de controle com valores:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 - desligue a carga</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 - ligue a carga</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 - ligar ou desligar a carga</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9 - desacoplamento (inicia o processo de exclus√£o do endere√ßo da mem√≥ria da unidade de pot√™ncia)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15 - encaderna√ß√£o (registre o endere√ßo do m√≥dulo na unidade de energia)</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - endere√ßo do canal (de 0 a 31). </font><font style="vertical-align: inherit;">Apenas 32 canais. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
outros bytes por padr√£o, exceto a soma de verifica√ß√£o. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - configurando o modo de transmiss√£o do m√≥dulo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o </font><font style="vertical-align: inherit;">valor 80 (0x50) for passado </font><font style="vertical-align: inherit;">para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B0,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ent√£o:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√∫mero de repeti√ß√µes - 2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">taxa de bits 2-1000 bps</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modo 0 - envia um comando</font></font></li>
</ul><br>
<img src="https://habrastorage.org/files/034/067/d82/034067d8239e4139b06ce9408ce2d87f.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, compilei apenas uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tabela</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com os pacotes de controle necess√°rios para mim.</font></font><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coloca√ß√£o no painel el√©trico</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Decidiu-se instalar uma corrente fraca no quadro de distribui√ß√£o interno:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O RPI √© montado em um trilho DIN anexando amigos impressos em uma impressora 3D</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dulo MT1132 para controle de unidades de pot√™ncia por via a√©rea</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dois ~ 220 soquetes em DIN para conex√£o de fontes de alimenta√ß√£o de um roteador e RPI</font></font></li>
</ul><br>
<img src="https://habrastorage.org/files/9ab/684/784/9ab6847847b94274ab95a4cdac7379b3.jpg"><br>
<a name="block3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depura√ß√£o de integra√ß√£o e sele√ß√£o de wrappers para gerenciamento</font></font></h4><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pr√©-requisitos:</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RPI</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dulo MT1132</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fios m√£e-m√£e para conectar os pinos MT1132 e RPI GPIO</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cart√£o SD com qualquer imagem RPI pr√©-instalada</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acesso ao console RPI SHELL (bash, csh, korn, etc.) (teclado direto ou remoto via SSH)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pacotes de controle preparados</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioteca para trabalhar com UART via cabe√ßalho GPIO no RPI</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enquanto preparava a imagem, peguei um bug legal no Macbook Air enquanto gravava a imagem Raspbian-wheezy sob a raiz (embora para mim esse seja um recurso - prote√ß√£o adicional contra grava√ß√£o, pense novamente antes de sobrescrever os dados):</font></font><br>
<pre><code class="bash hljs">dd bs=1m <span class="hljs-keyword">if</span>=2015-02-16-raspbian-wheezy.img of=/dev/disk2</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O console retornou:</font></font><br>
<pre><code class="bash hljs">dd: /dev/disk2: Permission denied </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com a trava removida no cart√£o SD, sob a raiz e os mods corretos em / dev / disk2 .... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o eu encontrei uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">troca sobre esse t√≥pico</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , algu√©m ajudou a explodir no slot SD na papoula, algu√©m conseguiu uma slot machine. Bater um macbook √© um desperd√≠cio hoje e, como resultado, uma pequena lacuna me ajudou: se o cart√£o SD n√£o estiver totalmente inserido, tudo funcionar√°. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante a depura√ß√£o, tive que fazer uma fazenda coletiva, porque n√£o havia conectores m√£e-m√£e adequados. </font></font><br>
<img src="https://habrastorage.org/files/ebf/f89/c4f/ebff89c4f54a444da08cee2965451eda.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considerando que eu precisava de um inv√≥lucro para controlar as unidades de energia via WEB, a capacidade de fazer solicita√ß√µes REST no futuro e uma biblioteca UART a partir de uma caixa - a escolha ficou no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebIOPi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<img src="https://habrastorage.org/files/3da/fa4/85e/3dafa485e4fe44f8b9f0c0b7bfffc282.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Embora eu quisesse construir o OpenHAB por causa da arquitetura legal. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A plataforma de automa√ß√£o foi descrita em Habr√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Definitivamente vou usar esta plataforma no futuro, mas por enquanto, para a minha "Lista de desejos", a plataforma escolhida √© suficiente.</font></font><br>
<a name="arch"></a><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura de intera√ß√£o geral</font></font></h5><br>
<img src="https://habrastorage.org/files/ebb/55d/b61/ebb55db6163f476fb505ca4e498f2d7f.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurando o WebIOPi no m√≠nimo</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Usando as instru√ß√µes fornecidas no site do projeto:</font></font><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instale a estrutura WebIOPi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seguindo estas etapas</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instala√ß√£o</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Executando o WebIOPi (Daemon)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In√≠cio autom√°tico na inicializa√ß√£o</font></font></li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configure o UART</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> alterando 3 arquivos: / etc / inittab, /boot/cmdline.txt, / etc / webiopi / config. </font><font style="vertical-align: inherit;">Passos:</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uart a bordo</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√£o WebIOPi</font></font></li>
</ul><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reproduzimos as a√ß√µes descritas na se√ß√£o</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Truque de loopback serial (envie a "string" para n√≥s mesmos via UART e leia a interface WEBIOPi na se√ß√£o Monitor serial)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o v√≠deo na se√ß√£o Monitor serial exibe o processo</font></font></li>
</ul><br>
 </li>
</ol><br>
<img src="https://habrastorage.org/files/39b/9d6/224/39b9d6224a214d16bb931577c750497c.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instale um jumper para testar o loop UART. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando a tabela compilada anteriormente com pacotes de controle, escreveremos um script Python simples para gerenciar o m√≥dulo a partir do RPI SHELL.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Script RPI Shell para o m√≥dulo MT1132</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#!/usr/bin/python</span><font></font>
<span class="hljs-keyword">import</span> sys, getopt<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>(<span class="hljs-params">argv</span>):</span><font></font>
   ch = <span class="hljs-string">''</span><font></font>
   cmd = <span class="hljs-string">''</span><font></font>
   <span class="hljs-keyword">try</span>:<font></font>
      opts, args = getopt.getopt(argv,<span class="hljs-string">"h:"</span>,[<span class="hljs-string">"ch="</span>,<span class="hljs-string">"cmd="</span>])<font></font>
   <span class="hljs-keyword">except</span> getopt.GetoptError:<font></font>
      <span class="hljs-keyword">print</span> <span class="hljs-string">'mt1132.py --ch &lt;channel_number&gt; --cmd &lt;ON/OFF/BIND/UNBIND&gt;'</span><font></font>
      sys.exit(<span class="hljs-number">2</span>)<font></font>
   <span class="hljs-keyword">for</span> opt, arg <span class="hljs-keyword">in</span> opts:<font></font>
      <span class="hljs-keyword">if</span> opt == <span class="hljs-string">'-h'</span>:<font></font>
         <span class="hljs-keyword">print</span> <span class="hljs-string">'mt1132.py --ch &lt;channel_number&gt; --cmd &lt;ON/OFF/BIND/UNBIND&gt;'</span><font></font>
         sys.exit()<font></font>
      <span class="hljs-keyword">elif</span> opt <span class="hljs-keyword">in</span> (<span class="hljs-string">"--ch"</span>):<font></font>
         ch = arg<font></font>
      <span class="hljs-keyword">elif</span> opt <span class="hljs-keyword">in</span> (<span class="hljs-string">"--cmd"</span>):<font></font>
         cmd = arg<font></font>
   <span class="hljs-keyword">print</span> <span class="hljs-string">'Channel: '</span>, ch<font></font>
   <span class="hljs-keyword">print</span> <span class="hljs-string">'Command: '</span>, cmd<font></font>
   <span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'ON'</span> <span class="hljs-keyword">and</span> ch!=<span class="hljs-string">''</span>:<font></font>
        <span class="hljs-keyword">if</span> ch==<span class="hljs-string">'0'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 0'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a7</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'1'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 1'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a8</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'2'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 2'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a9</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'3'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 3'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00aa</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'4'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 4'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ab</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'5'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 5'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ac</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'6'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 6'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ad</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'7'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 7'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ae</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'8'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 8'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x08</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00af</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'9'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 9'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b0</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'10'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch ON channel 10'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x0a</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b1</span>, <span class="hljs-number">0x00aa</span>])<font></font>
   <span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'OFF'</span> <span class="hljs-keyword">and</span> ch!=<span class="hljs-string">''</span>:<font></font>
        <span class="hljs-keyword">if</span> ch==<span class="hljs-string">'0'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 0'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a5</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'1'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 1'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a6</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'2'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 2'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a7</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'3'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 3'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a8</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'4'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 4'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a9</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'5'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 5'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00aa</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'6'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 6'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ab</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'7'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 7'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ac</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'8'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 8'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x08</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ad</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'9'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 9'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ae</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'10'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'Switch OFF channel 10'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x0a</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ae</span>, <span class="hljs-number">0x00aa</span>])<font></font>
   <span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'BIND'</span> <span class="hljs-keyword">and</span> ch!=<span class="hljs-string">''</span>:<font></font>
        <span class="hljs-keyword">if</span> ch==<span class="hljs-string">'0'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 0'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b4</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'1'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 1'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b5</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'2'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 2'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b6</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'3'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 3'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b7</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'4'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 4'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b8</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'5'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 5'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b9</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'6'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 6'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ba</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'7'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 7'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00bb</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'8'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 8'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x08</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00bc</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'9'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 9'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00bd</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'10'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'BIND channel 10'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x0a</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00be</span>, <span class="hljs-number">0x00aa</span>])<font></font>
   <span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'UNBIND'</span> <span class="hljs-keyword">and</span> ch!=<span class="hljs-string">''</span>:<font></font>
        <span class="hljs-keyword">if</span> ch==<span class="hljs-string">'0'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 0'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ae</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'1'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 1'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00af</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'2'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 2'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b0</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'3'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 3'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b1</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'4'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 4'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b2</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'5'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 5'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b3</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'6'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 6'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b4</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'7'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 7'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b5</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'8'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 8'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x08</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b6</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'9'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 9'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b7</span>, <span class="hljs-number">0x00aa</span>])<font></font>
        <span class="hljs-keyword">elif</span> ch==<span class="hljs-string">'10'</span>:<font></font>
                <span class="hljs-keyword">print</span> <span class="hljs-string">'UNBIND channel 10'</span><font></font>
                serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x0a</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b8</span>, <span class="hljs-number">0x00aa</span>])<font></font>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<font></font>
   main(sys.argv[<span class="hljs-number">1</span>:])<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para controlar o MT1132 no console do shell, execute os seguintes comandos </font></font><br>
<pre><code class="bash hljs"><font></font>
mt1132.py --ch &lt;channel_number&gt; --cmd &lt;ON/OFF/BIND/UNBIND&gt;<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apertamos a </font><b><font style="vertical-align: inherit;">API REST</font></b><font style="vertical-align: inherit;"> A estrutura WebIOPi fornece </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controle via solicita√ß√µes HTTP no estilo REST</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o que facilita a fixa√ß√£o de clientes m√≥veis e simplifica a intera√ß√£o cliente-servidor. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Copie a pasta da estrutura da API REST usando o link acima:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obter fun√ß√£o GPIO</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definir fun√ß√£o GPIO</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obter valor GPIO</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definir valor GPIO</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sa√≠da de um √∫nico pulso</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sequ√™ncia de bits de sa√≠da</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWM de sa√≠da com uma taxa de ciclo de servi√ßo</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sa√≠da PWM com um √¢ngulo para servos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chamar uma macro no servidor</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obter estado / configura√ß√£o do GPIO completo</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso caso √© "Chamar uma macro no servidor". </font><font style="vertical-align: inherit;">A descri√ß√£o n√£o √© gordurosa, mas suficiente para a experi√™ncia: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTP POST / macros / (macro) / (args)</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retorna o valor retornado pela macro</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como (macro) ainda n√£o foi preparado, verificaremos o REST "Get full GPIO state / configuration" e, para isso, precisamos fazer uma solicita√ß√£o HTTP GET / *. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abrimos qualquer cliente da API REST, usei o cliente DHC para o navegador Chrome. Estamos tentando executar uma solicita√ß√£o REST para obter o hor√°rio atual. </font></font><br>
<img src="https://habrastorage.org/files/b21/fc2/c33/b21fc2c3392b49c6b4f3f36220f97268.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√£o do WebIOPi (/ etc / webiopi / config) </font></font></b><br>
<img src="https://habrastorage.org/files/9c0/861/2fa/9c08612fa2024ef892a0e31b641c90e7.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na se√ß√£o [DEVICES]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione um dispositivo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serial</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (UART GPIO) - este √© o nosso m√≥dulo MT1132, em que </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ttyAMA0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© o dispositivo (porta) que o kernel Raspbian v√™, a </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">taxa de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> transmiss√£o √© a velocidade em Trocar informa√ß√µes de Baud atrav√©s desta interface UART. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
9600 baud / (8 + 1 bit de in√≠cio + 1 bit de parada) = 960 bytes / s. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na se√ß√£o [SCRIPTS]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (scripts personalizados):</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione a string </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myscrypt = /home/pi/smarthome/python/mt1132.py</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - para conectar nosso script √† estrutura. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na se√ß√£o [REST]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (configura√ß√µes de controle do GPIO por meio da API REST. Opcional): </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gpio-post-value = false - pro√≠be alterar os n√≠veis l√≥gicos de BAIXO / ALTO nos pinos do GPIO por meio de solicita√ß√µes REST; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gpio-post-function = false - pro√≠be a altera√ß√£o da configura√ß√£o IN / OUT nos pinos GPIO atrav√©s de solicita√ß√µes REST. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As demais configura√ß√µes permanecem inalteradas. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[COAP]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
eu n√£o </font><b><font style="vertical-align: inherit;">toquei</font></b><font style="vertical-align: inherit;"> , desconecte. Enquanto eu n√£o tenho id√©ia do que √© comido e onde √© usado. Gravei apenas esta linha na minha cabe√ßa: oAP - √© um protocolo de transfer√™ncia da web especializado para uso com n√≥s restritos e redes restritas no</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet das Coisas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , projetada para aplicativos m√°quina a m√°quina (M2M), como energia inteligente e automa√ß√£o predial ". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez em Habr algu√©m abra casos √∫teis de uso.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adicione macros para solicita√ß√µes REST a um script preparado anteriormente.</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># Channel 0	</span>
<span class="hljs-meta">@webiopi.macro	</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">ch0</span>(<span class="hljs-params">cmd</span>):</span>
	<span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'on'</span>:<font></font>
		serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a7</span>, <span class="hljs-number">0x00aa</span>])<font></font>
		webiopi.sleep(<span class="hljs-number">1</span>)<font></font>
		resp = <span class="hljs-string">'Channel: 0, Cmd: '</span> + cmd + <span class="hljs-string">', Status: '</span> + serial.readString()
	<span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'off'</span>:<font></font>
		serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00a5</span>, <span class="hljs-number">0x00aa</span>])<font></font>
		webiopi.sleep(<span class="hljs-number">1</span>)<font></font>
		resp = <span class="hljs-string">'Channel: 0, Cmd: '</span> + cmd + <span class="hljs-string">', Status: '</span> + serial.readString()
	<span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'unbind'</span>:<font></font>
		serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00ae</span>, <span class="hljs-number">0x00aa</span>])<font></font>
		webiopi.sleep(<span class="hljs-number">1</span>)<font></font>
		resp = <span class="hljs-string">'Channel: 0, Cmd: '</span> + cmd + <span class="hljs-string">', Status: '</span> + serial.readString()
	<span class="hljs-keyword">if</span> cmd==<span class="hljs-string">'bind'</span>:<font></font>
		serial.writeBytes([<span class="hljs-number">0x55</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x0f</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00b4</span>, <span class="hljs-number">0x00aa</span>])<font></font>
		webiopi.sleep(<span class="hljs-number">1</span>)<font></font>
		resp = <span class="hljs-string">'Channel: 0, Cmd: '</span> + cmd + <span class="hljs-string">', Status: '</span> + serial.readString()
	<span class="hljs-keyword">return</span> resp 
</code></pre><br>
</div></div><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testando solicita√ß√µes REST com macros</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enviamos uma solicita√ß√£o REST para "vincular o endere√ßo do terceiro canal NooLite MT1132 ao bloco de energia no qual a liga√ß√£o √© iniciada" via DHC. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o pacote de controle for enviado com sucesso, o m√≥dulo MT1132 responder√° via UART TX ao GPIO UART RX "OK". </font><font style="vertical-align: inherit;">Se for bem-sucedida, a unidade de energia lembrar√° o endere√ßo do canal e piscar√° intensamente com o LED verde embutido.</font></font><br>
<img src="https://habrastorage.org/files/ea3/e94/eb7/ea3e94eb7784412f8e909c7fb5af18a6.png"><br>
<a name="block5"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cliente simples para Android</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, n√£o planejei escrever um aplicativo para Android, devido ao fato de n√£o ter ideia, pretendia me restringir a um navegador. </font><font style="vertical-align: inherit;">Em seguida, ele acidentalmente entrou no canal </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Start Android</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">O autor, Dmitry, conta em detalhes com Andryukha como iniciar rapidamente seu primeiro projeto na plataforma Androyd. </font><font style="vertical-align: inherit;">Muito obrigado ao autor pelo projeto e pelo trabalho duro! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de assistir e concluir mais de vinte li√ß√µes, comecei a criar meu aplicativo simples de controle de ilumina√ß√£o. </font><font style="vertical-align: inherit;">Para desenvolvimento, usei o IDE Android Studio, conforme solicitado pelo Google - com base no IntelliJ IDEA. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interface O</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
resultado foi uma interface muito asc√©tica:</font></font><br>
<img src="https://habrastorage.org/files/771/334/b07/771334b07db9439381afe676f597f189.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main.xml COMO EST√Å</font></font></b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
    <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl7"</span>
    <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"2dp"</span>
    <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"false"</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-comment">&lt;!-- --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"50dp"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1c1"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"18sp"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"110dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl4"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/white"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/white"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"18sp"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1c2"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"120dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">" "</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl4"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"2"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/white"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"18sp"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1c3"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"150dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl4"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"3"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-comment">&lt;!--  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"110dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/black"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/room1txt"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/room1"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/holotheme_color"</span>
            <span class="hljs-attr">android:textStyle</span>=<span class="hljs-string">"bold"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"120dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"2"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center|top"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place1txt"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1switch1"</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place5txt"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1switch2"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place2txt"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1switch3"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"150dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"3"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1b1on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1b1off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1b2on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1b2off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1b3on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r1b3off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-comment">&lt;!--  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"40dp"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"110dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/room2txt"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/room2"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/holotheme_color"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/black"</span>
            <span class="hljs-attr">android:textStyle</span>=<span class="hljs-string">"bold"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"120dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place1txt"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r2switch1"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"2"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center|left"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"150dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"3"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r2b1on"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r2b1off"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-comment">&lt;!--  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"40dp"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"110dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/room3txt"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/room3"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/black"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/holotheme_color"</span>
            <span class="hljs-attr">android:textStyle</span>=<span class="hljs-string">"bold"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"120dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place1txt"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r3switch1"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"2"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center|left"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"150dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"3"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r3b1on"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r3b1off"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-comment">&lt;!--    --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"110dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/room4txt"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/room4"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/holotheme_color"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/black"</span>
            <span class="hljs-attr">android:textStyle</span>=<span class="hljs-string">"bold"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"120dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"2"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"37dp"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place6txt"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4switch1"</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"37dp"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place8txt"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4switch3"</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"37dp"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place7txt"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4switch2"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"150dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"3"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"37dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4b1on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4b1off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4b3on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4b3off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4b2on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r4b2off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><font></font>
<font></font>
<font></font>
    <span class="hljs-comment">&lt;!--  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"110dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"16sp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/room5txt"</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/room5"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/black"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/holotheme_color"</span>
            <span class="hljs-attr">android:textStyle</span>=<span class="hljs-string">"bold"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"120dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"2"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place3txt"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r5switch1"</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
                <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"13sp"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"37dp"</span>
                <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/hl9"</span>
                <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/place4txt"</span>
                <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r5switch2"</span>
                <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"4dp"</span>
                <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center_vertical|left"</span>
                <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@drawable/hover1"</span>
                <span class="hljs-attr">android:clickable</span>=<span class="hljs-string">"true"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/hl8"</span>
            <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"150dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"3"</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:layout_margin</span>=<span class="hljs-string">"1dp"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"36dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r5b1on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r5b1off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
                <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
                <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
                <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"37dp"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r5b2on"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
                    <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/buttonStyleSmall"</span>
                    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
                    <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
                    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
                    <span class="hljs-attr">android:text</span>=<span class="hljs-string">""</span>
                    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/r5b2off"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os m√©todos OnClick est√£o vinculados aos bot√µes.</font></font><br>
<pre><code class="java hljs"><span class="hljs-meta">@Override</span><font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{<font></font>
        <span class="hljs-comment">// define the button switch that invoked the listener by id</span><font></font>
        <span class="hljs-keyword">switch</span> (v.getId()) {<font></font>
            <span class="hljs-comment">// Buttons room1 </span><font></font>
            <span class="hljs-keyword">case</span> R.id.r1b1on: <span class="hljs-comment">// </span><font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch4url) + <span class="hljs-string">"on"</span>;<font></font>
                <span class="hljs-keyword">new</span> ParseTask().execute();<font></font>
                <span class="hljs-keyword">break</span>;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Switch define a visualiza√ß√£o de ID do elemento button, exibe uma mensagem TOAST na tela e faz uma solicita√ß√£o HTTP ao RPI via HttpURLConnection dentro de AsyncTask (chame ParseTask (). Execute ();). </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intera√ß√£o com o back-end</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
HttpURLConnection - uma classe para intera√ß√£o via protocolo HTTP. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Classe AsyncTask m√©todo doInBackground - executa tarefas pesadas em um fluxo em segundo plano separado e retorna o resultado de volta ao fluxo da interface do usu√°rio. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HttpURLConnection √© executado no m√©todo doInBackground. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa t√©cnica √© frequentemente encontrada na Internet para implementar a troca de dados por meio do protocolo HTTP.</font></font><br>
<pre><code class="java hljs">webiopiurl = getString(R.string.ch4url) + <span class="hljs-string">"on"</span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Substitui uma constante do arquivo strings.xml nos recursos do projeto</font></font><br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ch4url"</span>&gt;</span>http://192.168.1.154:8000/macros/ch4/<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, o URL completo para ativar o canal 4 se parece com isso</font></font><br>
<pre><code class="html hljs xml">http://192.168.1.154:8000/macros/ch4/on
</code></pre><br>
<pre><code class="java hljs"><span class="hljs-comment">// HTTP Query to backend in REST style</span><font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParseTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AsyncTask</span>&lt;<span class="hljs-title">Void</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">String</span>&gt; </span>{<font></font>
        HttpURLConnection urlConnection = <span class="hljs-keyword">null</span>;<font></font>
        BufferedReader reader = <span class="hljs-keyword">null</span>;<font></font>
        String result = <span class="hljs-string">""</span>;<font></font>
        String BASIC_AUTH = <span class="hljs-string">"Basic "</span><font></font>
                + Base64.encodeToString((getString(R.string.login) + <span class="hljs-string">":"</span> + getString(R.string.pwd)).getBytes(), Base64.NO_WRAP);<font></font>
<font></font>
        <span class="hljs-meta">@Override</span><font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> String <span class="hljs-title">doInBackground</span><span class="hljs-params">(Void... params)</span> </span>{<font></font>
            <span class="hljs-comment">//    REST </span><font></font>
            <span class="hljs-keyword">try</span> {<font></font>
                URL url = <span class="hljs-keyword">new</span> URL(webiopiurl);<font></font>
                urlConnection = (HttpURLConnection) url.openConnection();<font></font>
                urlConnection.setRequestMethod(<span class="hljs-string">"POST"</span>);<font></font>
                urlConnection.setRequestProperty(<span class="hljs-string">"Authorization"</span>, BASIC_AUTH);<font></font>
                urlConnection.connect();<font></font>
                <span class="hljs-comment">//    backend webiopi</span><font></font>
                InputStream inputStream = urlConnection.getInputStream();<font></font>
                StringBuffer buffer = <span class="hljs-keyword">new</span> StringBuffer();<font></font>
                reader = <span class="hljs-keyword">new</span> BufferedReader(<span class="hljs-keyword">new</span> InputStreamReader(inputStream));<font></font>
                String line;<font></font>
                <span class="hljs-keyword">while</span> ((line = reader.readLine()) != <span class="hljs-keyword">null</span>) {<font></font>
                    buffer.append(line);<font></font>
                }<font></font>
                result = buffer.toString();<font></font>
            } <span class="hljs-keyword">catch</span> (Exception e) {<font></font>
                e.printStackTrace();<font></font>
            }<font></font>
            <span class="hljs-keyword">return</span> result;<font></font>
        }<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo MainActivity.java COMO EST√Å</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">package</span> ru.bbq.smarthome_App;<font></font>
<font></font>
<span class="hljs-keyword">import</span> android.os.AsyncTask;
<span class="hljs-keyword">import</span> android.os.Bundle;
<span class="hljs-keyword">import</span> android.support.v7.app.ActionBarActivity;
<span class="hljs-keyword">import</span> android.util.Base64;
<span class="hljs-keyword">import</span> android.util.Log;
<span class="hljs-keyword">import</span> android.view.View;
<span class="hljs-keyword">import</span> android.widget.Button;
<span class="hljs-keyword">import</span> android.widget.TextView;
<span class="hljs-keyword">import</span> android.widget.Toast;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.io.BufferedReader;
<span class="hljs-keyword">import</span> java.io.InputStream;
<span class="hljs-keyword">import</span> java.io.InputStreamReader;
<span class="hljs-keyword">import</span> java.net.HttpURLConnection;
<span class="hljs-keyword">import</span> java.net.URL;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ActionBarActivity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">View</span>.<span class="hljs-title">OnClickListener</span> </span>{
    <span class="hljs-comment">// Add logger</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String LOG_TAG = <span class="hljs-string">"my_log"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String webiopiurl = <span class="hljs-string">""</span>;
    <span class="hljs-comment">// switch buttons</span><font></font>
    TextView r1sw1;<font></font>
    TextView r1sw2;<font></font>
    TextView r1sw3;<font></font>
    TextView r2sw1;<font></font>
    TextView r3sw1;<font></font>
    TextView r4sw1;<font></font>
    TextView r4sw2;<font></font>
    TextView r4sw3;<font></font>
    TextView r5sw1;<font></font>
    TextView r5sw2;<font></font>
    <span class="hljs-comment">// ON OFF buttons</span><font></font>
    Button r1b1on;<font></font>
    Button r1b1off;<font></font>
    Button r1b2on;<font></font>
    Button r1b2off;<font></font>
    Button r1b3on;<font></font>
    Button r1b3off;<font></font>
    Button r2b1on;<font></font>
    Button r2b1off;<font></font>
    Button r3b1on;<font></font>
    Button r3b1off;<font></font>
    Button r4b1on;<font></font>
    Button r4b1off;<font></font>
    Button r4b2on;<font></font>
    Button r4b2off;<font></font>
    Button r4b3on;<font></font>
    Button r4b3off;<font></font>
    Button r5b1on;<font></font>
    Button r5b1off;<font></font>
    Button r5b2on;<font></font>
    Button r5b2off;<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);<font></font>
        setContentView(R.layout.main);<font></font>
        <span class="hljs-comment">// find View-elements and buttons</span>
        r1sw1 = (TextView) findViewById(R.id.r1switch1); <span class="hljs-comment">// room1switch1</span>
        r1sw2 = (TextView) findViewById(R.id.r1switch2); <span class="hljs-comment">// room1switch2</span>
        r1sw3 = (TextView) findViewById(R.id.r1switch3); <span class="hljs-comment">// room1switch3</span>
        r2sw1 = (TextView) findViewById(R.id.r2switch1); <span class="hljs-comment">// room2switch1</span>
        r3sw1 = (TextView) findViewById(R.id.r3switch1); <span class="hljs-comment">// room3switch1</span>
        r4sw1 = (TextView) findViewById(R.id.r4switch1); <span class="hljs-comment">// room4switch1</span>
        r4sw2 = (TextView) findViewById(R.id.r4switch2); <span class="hljs-comment">// room4switch2</span>
        r4sw3 = (TextView) findViewById(R.id.r4switch3); <span class="hljs-comment">// room4switch3</span>
        r5sw1 = (TextView) findViewById(R.id.r5switch1); <span class="hljs-comment">// room5switch1</span>
        r5sw2 = (TextView) findViewById(R.id.r5switch2); <span class="hljs-comment">// room5switch2</span>
        r1b1on = (Button) findViewById(R.id.r1b1on);    <span class="hljs-comment">// room1 button1 ON</span>
        r1b1off = (Button) findViewById(R.id.r1b1off);  <span class="hljs-comment">// room1 button1 OFF</span>
        r1b2on = (Button) findViewById(R.id.r1b2on);    <span class="hljs-comment">// room1 button2 ON</span>
        r1b2off = (Button) findViewById(R.id.r1b2off);  <span class="hljs-comment">// room1 button2 OFF</span>
        r1b3on = (Button) findViewById(R.id.r1b3on);    <span class="hljs-comment">// room1 button3 ON</span>
        r1b3off = (Button) findViewById(R.id.r1b3off);  <span class="hljs-comment">// room1 button3 OFF</span>
        r2b1on = (Button) findViewById(R.id.r2b1on);    <span class="hljs-comment">// room2 button1 ON</span>
        r2b1off = (Button) findViewById(R.id.r2b1off);  <span class="hljs-comment">// room2 button1 OFF</span>
        r3b1on = (Button) findViewById(R.id.r3b1on);    <span class="hljs-comment">// room3 button1 ON</span>
        r3b1off = (Button) findViewById(R.id.r3b1off);  <span class="hljs-comment">// room3 button1 OFF</span>
        r4b1on = (Button) findViewById(R.id.r4b1on);    <span class="hljs-comment">// room4 button1 ON</span>
        r4b1off = (Button) findViewById(R.id.r4b1off);  <span class="hljs-comment">// room4 button1 OFF</span>
        r4b2on = (Button) findViewById(R.id.r4b2on);    <span class="hljs-comment">// room4 button2 ON</span>
        r4b2off = (Button) findViewById(R.id.r4b2off);  <span class="hljs-comment">// room4 button2 OFF</span>
        r4b3on = (Button) findViewById(R.id.r4b3on);    <span class="hljs-comment">// room4 button3 ON</span>
        r4b3off = (Button) findViewById(R.id.r4b3off);  <span class="hljs-comment">// room4 button3 OFF</span>
        r5b1on = (Button) findViewById(R.id.r5b1on);    <span class="hljs-comment">// room5 button1 ON</span>
        r5b1off = (Button) findViewById(R.id.r5b1off);  <span class="hljs-comment">// room5 button1 OFF</span>
        r5b2on = (Button) findViewById(R.id.r5b2on);    <span class="hljs-comment">// room5 button2 ON</span>
        r5b2off = (Button) findViewById(R.id.r5b2off);  <span class="hljs-comment">// room5 button2 OFF</span><font></font>
<font></font>
        <span class="hljs-comment">//assign listeners to buttons</span>
        r1b1on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r1b1off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r1b2on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r1b2off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r1b3on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r1b3off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r2b1on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r2b1off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r3b1on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r3b1off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r4b1on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r4b1off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r4b2on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r4b2off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r4b3on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r4b3off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r5b1on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r5b1off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r5b2on.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
        r5b2off.setOnClickListener(<span class="hljs-keyword">this</span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// Define On ClickView method</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{
        <span class="hljs-comment">// define the button switch that invoked the listener by id</span>
        <span class="hljs-keyword">switch</span> (v.getId()) {
            <span class="hljs-comment">// Buttons room1 </span>
            <span class="hljs-keyword">case</span> R.id.r1b1on: <span class="hljs-comment">// </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch4url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r1b1off: <span class="hljs-comment">// </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch4url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r1b2on: <span class="hljs-comment">//  </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw2.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch3url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r1b2off: <span class="hljs-comment">//  </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw2.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch3url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r1b3on: <span class="hljs-comment">// LED </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw3.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch2url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r1b3off: <span class="hljs-comment">// LED </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room1txt)+<span class="hljs-string">" &gt; "</span>+r1sw3.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch2url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-comment">// Buttons room2 </span>
            <span class="hljs-keyword">case</span> R.id.r2b1on:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room2txt)+<span class="hljs-string">" &gt; "</span>+r2sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch6url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r2b1off:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room2txt)+<span class="hljs-string">" &gt; "</span>+r2sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch6url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-comment">// Buttons room3 </span>
            <span class="hljs-keyword">case</span> R.id.r3b1on:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room3txt)+<span class="hljs-string">" &gt; "</span>+r3sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch5url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r3b1off:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room3txt)+<span class="hljs-string">" &gt; "</span>+r3sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch5url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-comment">// Buttons room4 bedroom</span>
            <span class="hljs-keyword">case</span> R.id.r4b1on: <span class="hljs-comment">//    </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room4txt)+<span class="hljs-string">" &gt; "</span>+r4sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch8url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r4b1off: <span class="hljs-comment">//    </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room4txt)+<span class="hljs-string">" &gt; "</span>+r4sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch8url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r4b2on: <span class="hljs-comment">//    </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room4txt)+<span class="hljs-string">" &gt; "</span>+r4sw2.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch7url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r4b2off: <span class="hljs-comment">//    </span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room4txt)+<span class="hljs-string">" &gt; "</span>+r4sw2.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch7url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r4b3on: <span class="hljs-comment">//   dimmer</span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room4txt)+<span class="hljs-string">" &gt; "</span>+r4sw3.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch9url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r4b3off: <span class="hljs-comment">//   dimmer</span>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room4txt)+<span class="hljs-string">" &gt; "</span>+r4sw3.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch9url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-comment">// Buttons room5 corridor</span>
            <span class="hljs-keyword">case</span> R.id.r5b1on:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room5txt)+<span class="hljs-string">" &gt; "</span>+r5sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch1url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r5b1off:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room5txt)+<span class="hljs-string">" &gt; "</span>+r5sw1.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch1url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r5b2on:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.bon)+<span class="hljs-string">" '"</span>+getString(R.string.room5txt)+<span class="hljs-string">" &gt; "</span>+r5sw2.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch0url) + <span class="hljs-string">"on"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> R.id.r5b2off:<font></font>
                Toast.makeText(<span class="hljs-keyword">this</span>, getString(R.string.boff)+<span class="hljs-string">" '"</span>+getString(R.string.room5txt)+<span class="hljs-string">" &gt; "</span>+r5sw2.getText()+<span class="hljs-string">"'"</span>, Toast.LENGTH_SHORT).show();<font></font>
                webiopiurl = getString(R.string.ch0url) + <span class="hljs-string">"off"</span>;
                <span class="hljs-keyword">new</span> ParseTask().execute();
                <span class="hljs-keyword">break</span>;<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// HTTP Query to backend in REST style</span>
    <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParseTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AsyncTask</span>&lt;<span class="hljs-title">Void</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">String</span>&gt; </span>{<font></font>
        HttpURLConnection urlConnection = <span class="hljs-keyword">null</span>;<font></font>
        BufferedReader reader = <span class="hljs-keyword">null</span>;<font></font>
        String result = <span class="hljs-string">""</span>;<font></font>
        String BASIC_AUTH = <span class="hljs-string">"Basic "</span>
                + Base64.encodeToString((getString(R.string.login) + <span class="hljs-string">":"</span> + getString(R.string.pwd)).getBytes(), Base64.NO_WRAP);
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> String <span class="hljs-title">doInBackground</span><span class="hljs-params">(Void... params)</span> </span>{
            <span class="hljs-comment">//    REST </span>
            <span class="hljs-keyword">try</span> {<font></font>
                URL url = <span class="hljs-keyword">new</span> URL(webiopiurl);<font></font>
                urlConnection = (HttpURLConnection) url.openConnection();<font></font>
                urlConnection.setRequestMethod(<span class="hljs-string">"POST"</span>);<font></font>
                urlConnection.setRequestProperty(<span class="hljs-string">"Authorization"</span>, BASIC_AUTH);<font></font>
                urlConnection.connect();<font></font>
                <span class="hljs-comment">//    backend webiopi</span><font></font>
                InputStream inputStream = urlConnection.getInputStream();<font></font>
                StringBuffer buffer = <span class="hljs-keyword">new</span> StringBuffer();<font></font>
                reader = <span class="hljs-keyword">new</span> BufferedReader(<span class="hljs-keyword">new</span> InputStreamReader(inputStream));<font></font>
                String line;<font></font>
                <span class="hljs-keyword">while</span> ((line = reader.readLine()) != <span class="hljs-keyword">null</span>) {<font></font>
                    buffer.append(line);<font></font>
                }<font></font>
                result = buffer.toString();<font></font>
            } <span class="hljs-keyword">catch</span> (Exception e) {<font></font>
                e.printStackTrace();<font></font>
            }<font></font>
            <span class="hljs-keyword">return</span> result;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onPostExecute</span><span class="hljs-params">(String str)</span> </span>{
            <span class="hljs-keyword">super</span>.onPostExecute(str);
            <span class="hljs-comment">//  ,    plain text ( JSON)</span>
            <span class="hljs-comment">//    log</span><font></font>
            Log.d(LOG_TAG, str);<font></font>
            <span class="hljs-comment">//  TOAST -   webiopi     MT1132</span><font></font>
            Toast.makeText(getApplicationContext(), str, Toast.LENGTH_SHORT).show();<font></font>
        }<font></font>
    }<font></font>
<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<a name="block4"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encontre e compre switches adequados para controles remotos</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com base no cen√°rio de ilumina√ß√£o, este projeto utiliza teclados estacion√°rios NooLite e bot√µes / interruptores, √© necess√°rio fornecer a capacidade de instalar switches com tr√™s m√≥dulos (bot√µes / teclas), preservando o design dos switches (todos os switches devem ter a mesma apar√™ncia). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao escolher op√ß√µes, considere a possibilidade de:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instala√ß√£o de dois a tr√™s m√≥dulos no suporte de switches</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instala√ß√£o de m√≥dulos de bot√£o e teclado</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os interruptores bticino livinglight s√£o adequados para essas condi√ß√µes. </font><font style="vertical-align: inherit;">Na foto abaixo, os m√≥dulos montados com o controle remoto NooLite. </font></font><br>
<img src="https://habrastorage.org/files/f6e/6b0/d1a/f6e6b0d1a7b9428cbba0d6e6670c1cb9.jpg"><br>
<img src="https://habrastorage.org/files/57d/47e/4f9/57d47e4f9b90491980fa5cff309ec226.jpg"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unidade de energia no teto durante a depura√ß√£o. Depura√ß√£o </font></font></b> <br>
<img src="https://habrastorage.org/files/d08/495/843/d08495843ec84300bc851d70e0b011ab.jpg"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no local </font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">. </font></b></font><br>
<img src="https://habrastorage.org/files/ceb/2c6/51a/ceb2c651a47145a2b51daab51abb32d6.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Painel el√©trico com corrente fraca localizada no interior.</font></font></b><br>
<img src="https://habrastorage.org/files/128/1f8/00a/1281f800ac6e40dd829cdde1e7b7f3cf.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agradecemos sua aten√ß√£o. </font><font style="vertical-align: inherit;">Tenha um bom dia!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt382689/">https://habr.com/ru/post/pt382689/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt382677/index.html">Minha Internet das Coisas: Guest Castle (Parte 2)</a></li>
<li><a href="../pt382679/index.html">Os astr√¥nomos conseguiram tirar fotos do lago de lava na superf√≠cie de Io, o sat√©lite de J√∫piter</a></li>
<li><a href="../pt382681/index.html">5 horas da abordagem da Soyuz √† ISS - em um v√≠deo de meio minuto no YouTube</a></li>
<li><a href="../pt382685/index.html">Olhe al√©m do horizonte</a></li>
<li><a href="../pt382687/index.html">Cientistas do CERN est√£o preparando um "campo de for√ßa" para proteger os astronautas da radia√ß√£o</a></li>
<li><a href="../pt382693/index.html">Sat√©lite Roskosmos METEOR-M2 caiu [dispositivo restaurado]</a></li>
<li><a href="../pt382695/index.html">Fus√£o geral</a></li>
<li><a href="../pt382697/index.html">Realidade virtual e mercado de consumo</a></li>
<li><a href="../pt382699/index.html">A Biblioteca Brit√¢nica pede ajuda para decifrar a gravura de uma espada do s√©culo XIII</a></li>
<li><a href="../pt382701/index.html">No filme "John Wick" far√° um jogo de tiro em primeira pessoa para √≥culos de realidade virtual</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>