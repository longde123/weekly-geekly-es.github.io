<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦍 🕗 👩🏾‍🏫 Zen de Teste de Unidade 📦 💭 🌉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A capacidade de escrever bons testes de unidade é um recurso importante de qualquer desenvolvedor. Mas como entender que seus testes de unidade estão ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Zen de Teste de Unidade</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439804/"><p><img src="https://habrastorage.org/webt/ih/ya/u6/ihyau61ji5s6cgg7f91-grwhr84.png"></p><br><p>  A capacidade de escrever bons testes de unidade é um recurso importante de qualquer desenvolvedor.  Mas como entender que seus testes de unidade estão corretos?  Um bom teste de unidade é como um bom jogo de xadrez.  No nosso caso, as peças de xadrez são as abordagens que discutiremos neste post.  Não há melhor <em>jogador de</em> xadrez em um jogo de xadrez, porque tudo depende das posições <em>(e de um jogador)</em> .  Da mesma forma, no teste de unidade, você não precisa distinguir apenas uma abordagem.  Em outras palavras, você deve usar todas as abordagens juntas para obter o melhor resultado.  Então, se você quiser ganhar este jogo, seja bem-vindo. </p><a name="habracut"></a><br><h2 id="dbut">  Estréia </h2><br><h3 id="why-should-i-write-unit-tests">  Por que devo escrever testes de unidade? </h3><br><p>  Você não precisa escrever testes de unidade, a menos que seja uma pessoa com percepção extra-sensorial que possa escrever código sem erros, tenha super memória, possa compilar seu código em sua cabeça ou apenas sinta dor.  Caso contrário, você definitivamente precisará escrever testes de unidade, porque eles diminuem a contagem de bugs em recursos novos e existentes, reduzem o custo e o medo de alterar seus recursos e permitem refatorar seu código.  Além disso, você deve sempre executar testes existentes e eu recomendo que você preste atenção nas ferramentas de teste contínuo. </p><br><h3 id="what-to-test">  O que testar? </h3><br><p>  Obviamente, no teste de unidade, você está testando o comportamento de alguma unidade separada <em>(não invocações, porque elas podem ser alteradas posteriormente)</em> .  Além disso, estabeleça uma regra para cobrir com testes de unidade todos os erros que você encontrou para provar que eles foram corrigidos.  E a cobertura do código?  A cobertura de código não é uma meta, é apenas uma medida que ajuda a entender qual parte da lógica você esqueceu de cobrir com testes de unidade.  Seria um erro enorme quando você decidir cobrir todas as linhas de código com testes de unidade. </p><br><h2 id="mittelspiel">  Mittelspiel </h2><br><h3 id="test-only-one-thing">  Teste apenas uma coisa </h3><br><p>  Não confunda teste de unidade com teste de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">integração,</a> onde o teste de mais de uma coisa é normal.  A idéia do teste de unidade é provar que um módulo de aplicativo separado funciona ou não.  Você precisa entender fácil e certamente qual comportamento do seu código falha e como corrigi-lo.  <strong>Quantas afirmações você deve usar?</strong>  <strong>Um!</strong>  O uso de várias declarações pode ser o cheiro do código que você está testando mais de uma coisa.  Além disso, existe a chance de alguém adicionar uma nova afirmação ao seu teste, em vez de escrever outro.  E como você pode entender como suas outras afirmações foram concluídas quando a primeira falhou? </p><br><h3 id="avoid-logic">  Evite a lógica </h3><br><p> Erros nos testes são as coisas mais difíceis de encontrar para os desenvolvedores.  A chance de obter um bug no seu código de teste aumenta à medida que você decide adicionar lógica ao seu teste.  Torna-se mais difícil de ler, entender e manter.  Usar <code>for</code> , <code>foreach</code> , <code>if</code> , <code>switch</code> e outros operadores em um teste também pode ser um cheiro de código que você está testando mais de uma coisa. </p><br><h3 id="aaa">  AAA </h3><br><p>  O <strong>Organizar, Agir, Afirmar</strong> é um padrão comumente usado que ajuda a organizar seu código de teste em três fases de acordo.  Separa claramente o que está sendo testado das etapas de configuração e verificação.  Essa é uma das melhores práticas e torna seu código de teste mais legível e sustentável.  Dito isto, não use <strong>comentários</strong> AAA em seus testes se quiser manter seu código limpo e legível.  O teste criado com competência expressa a idéia de AAA, mesmo sem comentários. </p><br><h3 id="stick-to-the-naming-convention">  Atenha-se à convenção de nomenclatura </h3><br><p>  Os nomes dos testes devem ser descritivos e compreensíveis, não apenas para o seu autor.  Existem muitas estratégias de nomeação de teste, mas eu gosto da de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Roy Osherove</a> : <code>[MethodName_StateUnderTest_ExpectedBehavior]</code> .  Tem todas as informações necessárias sobre o teste de forma formatada.  É fácil seguir essa estratégia para qualquer desenvolvedor. </p><br><p>  Exemplos: </p><br><pre> <code class="plaintext hljs">public void Sum_NegativeNumberAs2ndParam_ExceptionThrown () public void Sum_simpleValues_Calculated () public void Parse_OnEmptyString_ExceptionThrown() public void Parse_SingleToken_ReturnsEqualTokenValue ()</code> </pre> <br><p>  Mas preste atenção que você pode ter uma convenção de nomenclatura que deve seguir no seu projeto atual.  Não os misture. </p><br><h3 id="test-data-preparation">  Preparação de dados de teste </h3><br><p>  A construção de dados de teste pode trazer confusão e sofrimento ao seu código de testes.  Você pode enfrentar essa situação quando: </p><br><ul><li>  você precisa alterar o construtor do seu modelo em cada parte do código em que esse modelo é criado <em>(isso geralmente acontece quando o modelo é imutável)</em> ; </li><li>  você tem muitas duplicatas de código ao criar seus dados de teste; </li><li>  você precisa passar muitos "dados mágicos" para o construtor do modelo <em>(por exemplo, <code>new Device("Stub", 10, true, "http");</code> )</em> ; </li><li>  você sente que precisa criar um tipo de gerador de dados aleatórios; </li><li>  é difícil para você criar coletas de dados de testes. </li></ul><br><p>  Com isso em mente, você deve considerar algumas alternativas comuns: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mãe do objeto</a> e [Padrão do construtor Fluent].  Essas abordagens também são bons jogadores de equipe, para que você possa usá-las juntas. </p><br><p>  Não use dados aleatórios, porque seu teste pode ser sensível a algum tipo de valor.  Como resultado, você pode obter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">heisenbug</a> maligno em seu teste, difícil de encontrar e reproduzir. </p><br><h3 id="learn-your-testing-framework">  Aprenda sua estrutura de teste </h3><br><p>  Aprenda todos os atributos, asserções e outros recursos da sua estrutura de teste.  Isso ajuda você a tornar seus testes mais legíveis e elegantes.  Por exemplo, na estrutura do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NUnit</a> , você pode usar dois modelos de asserções e escolher o que mais gosta: </p><br><pre> <code class="plaintext hljs">Assert.AreEqual(StatusCode.OK, response.StatusCode);</code> </pre> <br><p>  ou </p><br><pre> <code class="plaintext hljs">Assert.That(StatusCode.OK, Is.EqualTo(response.StatusCode));</code> </pre> <br><p>  Não se esqueça dos métodos de configuração e desmontagem, atributos TestCase e Categoria, declarações de coleção.  Não confunda parâmetros de resultados esperados e reais em asserções. </p><br><h2 id="endspiel">  Endspiel </h2><br><p>  Seu código de teste tem o mesmo privilégio que o código de produção que você precisa escrever e manter, não se esqueça dos princípios do SOLID.  Além disso, seus testes de unidade devem ser legíveis e existem várias razões.  Em primeiro lugar, a intenção dos seus testes deve ser compreensível e clara.  Isso significa que você não precisa perder seu tempo lendo os testes.  Em segundo lugar, deve ser fácil manter seus testes, detectar e eliminar problemas sem depuração. </p><br><p>  O teste de unidade é uma filosofia enorme que não pode ser discutida apenas em um post.  Aqui expliquei abordagens comuns e perguntas frequentes relacionadas ao teste de unidade.  Se você quiser mergulhar mais fundo, pode achar esses links interessantes: </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Roy Osherove blog</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Livro de Roy Osherove, "The Art of Unit Testing"</a> </p><br><blockquote>  Mantenha a calma e teste de unidade </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt439804/">https://habr.com/ru/post/pt439804/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt439788/index.html">Outras curiosidades dos algoritmos GOST Grasshopper e Stribog</a></li>
<li><a href="../pt439790/index.html">Testar o JaCarta WebClient ou armazenar tokens em um cofre</a></li>
<li><a href="../pt439792/index.html">A NASA está procurando parceiros na indústria americana para criar um pouso tripulado parcialmente reutilizável</a></li>
<li><a href="../pt439794/index.html">Dor nas costas - compreensão da perspectiva da medicina moderna</a></li>
<li><a href="../pt439796/index.html">Spring Boot 2: o que eles não escrevem nas notas de versão</a></li>
<li><a href="../pt439806/index.html">Nomes de domínio SSL válidos para contêineres do Docker local</a></li>
<li><a href="../pt439808/index.html">Os maiores telescópios. De notebooks e olhos a câmeras de 340 megapixels e data centers. Parte 1</a></li>
<li><a href="../pt439810/index.html">Conheça a estrutura de microsserviço Moleculer</a></li>
<li><a href="../pt439812/index.html">Abordagens Kaggle para CV em prod: você não pode implementar para cortar</a></li>
<li><a href="../pt439818/index.html">Características das abordagens de design no setor de fabricação real</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>