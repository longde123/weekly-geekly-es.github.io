<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‚ ğŸ“¢ ğŸ’» Analyseur intelligent pour un nombre Ã©crit en mots ğŸ‘§ğŸ½ ğŸ‘ğŸ¾ ğŸ–ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prologue 


 Bonjour, chers lecteurs. Dans cet article, je vais vous expliquer comment analyser un nombre Ã©crit en russe. 


 Intelligent, cet analyse...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Analyseur intelligent pour un nombre Ã©crit en mots</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453642/"><img src="https://habrastorage.org/webt/x_/al/d2/x_ald2dbs-mrb8gyk1v9z7fzk9w.png"><br><br><h1>  Prologue </h1><br><p>  Bonjour, chers lecteurs.  Dans cet article, je vais vous expliquer comment analyser un nombre Ã©crit en russe. </p><br><p>  Intelligent, cet analyseur permet d'extraire des nombres du texte avec des erreurs commises Ã  la suite d'une saisie incorrecte ou Ã  la suite de la reconnaissance optique du texte d'une image (OCR). </p><br><p>  Pour les paresseux: <br>  Lien vers le projet github: <a href="">lien</a> . </p><br><a name="habracut"></a><br><h1>  De l'algorithme au rÃ©sultat </h1><br><p>  Cette section dÃ©crira les algorithmes utilisÃ©s.  Attention, beaucoup de lettres! </p><br><h2>  Ã‰noncÃ© du problÃ¨me </h2><br><p> Au travail, je dois reconnaÃ®tre le texte d'un document imprimÃ© photographiÃ© avec un appareil photo pour smartphone / tablette.  En raison de l'accord de non-divulgation, je ne peux pas donner d'exemple de photographie, mais le fait est que le document a un tableau dans lequel certains indicateurs sont Ã©crits en chiffres et en mots, et ces donnÃ©es doivent Ãªtre lues.  L'analyse du texte dans les mots est nÃ©cessaire comme outil de validation supplÃ©mentaire pour garantir que le numÃ©ro est correctement reconnu.  Mais, comme vous le savez, l'OCR ne garantit pas une reconnaissance de texte prÃ©cise.  Par exemple, le nombre vingt, Ã©crit en mots, peut Ãªtre reconnu comme Â«dvupatÂ» ou mÃªme comme Â«dvupatÂ».  Il est nÃ©cessaire d'en tenir compte et d'extraire le maximum d'informations, en Ã©valuant l'ampleur de l'erreur possible. </p><br><p>  <b>Remarque</b>  Pour la reconnaissance de texte, j'utilise tesseract 4. Pour .NET, il n'y a pas de package NuGet prÃªt Ã  l'emploi de la quatriÃ¨me version, donc j'en ai crÃ©Ã© un Ã  partir de la branche principale du projet, qui peut Ãªtre utile: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Genesis.Tesseract4</a> . </p><br><br><h2>  Algorithme de base d'analyse des nombres </h2><br><p>  CommenÃ§ons par un simple, Ã  savoir avec un algorithme de reconnaissance de texte Ã©crit en mots, jusqu'Ã  prÃ©sent sans erreurs.  Si vous Ãªtes intÃ©ressÃ© par l'analyse intelligente, ignorez cette section. </p><br><p>  Je ne suis pas particuliÃ¨rement douÃ© pour la recherche sur Google, donc je n'ai pas immÃ©diatement trouvÃ© d'algorithme prÃªt Ã  l'emploi pour rÃ©soudre ce problÃ¨me.  Cependant, c'est encore mieux, car  un algorithme inventÃ© par nous-mÃªmes donne plus de place au codage.  Et la tÃ¢che elle-mÃªme s'est avÃ©rÃ©e intÃ©ressante. </p><br><p>  Prenons donc un petit nombre, par exemple, Â«cent vingt-troisÂ».  Il se compose de trois mots ( <i>jetons</i> ), chacun correspondant Ã  un nombre, tous ces nombres se rÃ©sument: </p><br> <code>"  " =  +  +  = 100 + 20 + 3 = 123</code> <br> <br><p>  Jusqu'Ã  prÃ©sent, tout est simple, mais nous creusons plus profondÃ©ment, par exemple, considÃ©rons le nombre Â«deux cent douze mille cent cinqÂ». </p><br> <code>"    " = ( + ) Ã—  + ( + ) = 212 * 1.000 + 105 = 212.105.</code> <br> <br><p>  Comme vous pouvez le voir, lorsqu'il y a des milliers dans le nombre (ainsi que des millions et d'autres degrÃ©s de mille), le nombre est divisÃ© en parties constituÃ©es d'un petit nombre local, dans l'exemple ci-dessus - 212, et d'un facteur (1000).  Il peut y avoir plusieurs de ces fragments, mais ils vont tous dans l'ordre dÃ©croissant du facteur, par exemple, mille ou mille ne peuvent pas suivre mille.  Cela est Ã©galement vrai pour des parties d'un petit nombre, car des centaines ne peuvent pas suivre des centaines et des dizaines de dizaines, donc l'entrÃ©e Â«cent cinq centsÂ» est incorrecte.  Nous appellerons une caractÃ©ristique qui relie deux jetons du mÃªme type un <i>niveau</i> , par exemple, les jetons Â«centÂ» et Â«trois centsÂ» ont un niveau, et il est supÃ©rieur au jeton Â«cinquanteÂ». </p><br><p>  De ces considÃ©rations naÃ®t l'idÃ©e d'un algorithme.  Ã‰crivons tous les jetons ( <i>Ã©chantillons</i> ) possibles, chacun d'eux assignera un numÃ©ro, ainsi que deux paramÃ¨tres - le niveau et le signe du multiplicateur. </p><br><div class="scrollable-table"><table><tbody><tr><th>  Jeton </th><th>  NumÃ©ro </th><th>  Niveau </th><th>  Multiplicateur? </th></tr><tr><td>  zÃ©ro <br></td><td>  0 <br></td><td>  1 <br></td><td>  non <br></td></tr><tr><td>  simple / simple <br></td><td>  1 <br></td><td>  1 <br></td><td>  non <br></td></tr><tr><td>  deux / deux <br></td><td>  2 <br></td><td>  1 <br></td><td>  non <br></td></tr><tr><td>  ... <br></td><td>  ... <br></td><td>  1 <br></td><td>  non <br></td></tr><tr><td>  dix-neuf <br></td><td>  19 <br></td><td>  1 <br></td><td>  non <br></td></tr><tr><td>  vingt <br></td><td>  20 <br></td><td>  2 <br></td><td>  non <br></td></tr><tr><td>  ... <br></td><td>  ... <br></td><td>  2 <br></td><td>  non <br></td></tr><tr><td>  quatre-vingt-dix <br></td><td>  90 <br></td><td>  2 <br></td><td>  non <br></td></tr><tr><td>  cent <br></td><td>  100 <br></td><td>  3 <br></td><td>  non <br></td></tr><tr><td>  ... <br></td><td>  ... <br></td><td>  3 <br></td><td>  non <br></td></tr><tr><td>  neuf cents <br></td><td>  900 <br></td><td>  3 <br></td><td>  non <br></td></tr><tr><td>  mille / mille / mille <br></td><td>  1 000 <br></td><td>  4 <br></td><td>  oui <br></td></tr><tr><td>  millions / millions / millions <br></td><td>  1 000 000 <br></td><td>  5 <br></td><td>  oui <br></td></tr><tr><td>  ... <br></td><td>  ... <br></td><td>  ... <br></td><td>  oui <br></td></tr><tr><td>  quadrillion / quadrillion / quadrillion <br></td><td>  1 000 000 000 000 000 <br></td><td>  8 <br></td><td>  oui <br></td></tr></tbody></table></div><br><p>  En fait, vous pouvez ajouter d'autres jetons Ã  ce tableau, y compris pour les langues Ã©trangÃ¨res, mais n'oubliez pas que dans certains pays, un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">systÃ¨me de nommage</a> long plutÃ´t qu'un court <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">est utilisÃ©</a> . </p><br><p>  Passons maintenant Ã  l'analyse.  Nous obtiendrons quatre quantitÃ©s: </p><br><ol><li>  <i>Niveau global</i> (globalLevel).  Indique le niveau du dernier multiplicateur.  Initialement indÃ©fini et nÃ©cessaire pour le contrÃ´le.  Si nous rencontrons un jeton multiplicateur dont le niveau est supÃ©rieur ou Ã©gal au global, alors c'est une erreur. </li><li>  <i>Valeur globale</i> (globalValue).  Additionneur total, oÃ¹ le rÃ©sultat est le rÃ©sultat de la multiplication du nombre et du facteur locaux. </li><li>  <i>Niveau local</i> (localLevel).  Indique le niveau du dernier jeton.  Initialement indÃ©fini, fonctionne de maniÃ¨re similaire au niveau global, mais est rÃ©initialisÃ© aprÃ¨s la dÃ©couverte du multiplicateur. </li><li>  <i>Valeur locale</i> (localValue)  Un additionneur de jeton non multiplicateur, c'est-Ã -dire  numÃ©ros jusqu'Ã  999. </li></ol><br><p>  L'algorithme est le suivant: </p><br><ol><li>  Divisez la chaÃ®ne en jetons en utilisant le rÃ©gulier "\ s +". </li><li>  Nous prenons le jeton suivant, nous obtenons des informations Ã  ce sujet Ã  partir de l'Ã©chantillon. </li><li>  S'il s'agit d'un multiplicateur: <br><ul><li>  Si le niveau global est dÃ©fini, nous nous assurons qu'il est supÃ©rieur ou Ã©gal au niveau du jeton.  Sinon, il s'agit d'une erreur; le numÃ©ro est incorrect. </li><li>  DÃ©finissez le niveau global au niveau du jeton actuel. </li><li>  Multipliez la valeur du jeton par la valeur locale et ajoutez le rÃ©sultat Ã  la valeur globale. </li><li>  Nous effaÃ§ons la valeur et le niveau locaux. </li></ul></li><li>  Si ce n'est pas un multiplicateur: <br><ul><li>  Si le niveau local est dÃ©fini, nous nous assurons qu'il est supÃ©rieur ou Ã©gal au niveau du jeton.  Sinon, il s'agit d'une erreur; le numÃ©ro est incorrect. </li><li>  DÃ©finissez le niveau local au niveau du jeton actuel. </li><li>  Ajoutez la valeur du jeton Ã  la valeur locale. </li></ul></li><li>  Nous renvoyons le rÃ©sultat comme la somme des valeurs globales et locales. </li></ol><br><p>  Un exemple de travail pour le nombre Â«deux millions deux cent douze mille cent quatre-vingt-cinqÂ». </p><br><div class="scrollable-table"><table><tbody><tr><th>  Jeton <br></th><th>  globalLevel <br></th><th>  globalValue <br></th><th>  localLevel <br></th><th>  localValue <br></th></tr><tr><td></td><td>  - <br></td><td>  - <br></td><td>  - <br></td><td>  - <br></td></tr><tr><td>  deux <br></td><td>  - <br></td><td>  - <br></td><td>  1 <br></td><td>  2 <br></td></tr><tr><td>  millions <br></td><td>  5 <br></td><td>  2 000 000 <br></td><td>  - <br></td><td>  - <br></td></tr><tr><td>  deux cents <br></td><td>  5 <br></td><td>  2 000 000 <br></td><td>  3 <br></td><td>  200 <br></td></tr><tr><td>  douze <br></td><td>  5 <br></td><td>  2 000 000 <br></td><td>  1 <br></td><td>  212 <br></td></tr><tr><td>  mille <br></td><td>  4 <br></td><td>  2.212.000 <br></td><td>  - <br></td><td>  - <br></td></tr><tr><td>  cent <br></td><td>  4 <br></td><td>  2.212.000 <br></td><td>  3 <br></td><td>  100 <br></td></tr><tr><td>  quatre-vingts <br></td><td>  4 <br></td><td>  2.212.000 <br></td><td>  2 <br></td><td>  180 <br></td></tr><tr><td>  cinq <br></td><td>  4 <br></td><td>  2.212.000 <br></td><td>  1 <br></td><td>  185 <br></td></tr></tbody></table></div><p>  Le rÃ©sultat sera le 2.212.185. </p><br><h2>  Analyse intelligente </h2><br><p>  Cet algorithme peut Ãªtre utilisÃ© pour implÃ©menter d'autres comparaisons, et pas seulement pour l'analyse des nombres, c'est pourquoi je vais essayer de le dÃ©crire plus en dÃ©tail. </p><br><p>  Avec l'analyse du nombre correctement Ã©crit compris.  RÃ©flÃ©chissons maintenant aux erreurs qui peuvent se produire si le nombre obtenu Ã  la suite de l'OCR est mal Ã©crit.  Je ne considÃ¨re pas d'autres options, mais vous pouvez modifier l'algorithme pour une tÃ¢che spÃ©cifique. </p><br><p>  J'ai identifiÃ© trois types d'erreurs que j'ai rencontrÃ©es au cours du travail: </p><br><ol><li>  Remplacez les caractÃ¨res par d'autres avec un style similaire.  Par exemple, la lettre Â«cÂ» est pour une raison quelconque remplacÃ©e par Â«pÂ», et Â«nÂ» par Â«etÂ» et vice versa.  Lorsque vous utilisez la troisiÃ¨me version de tesseract, il est possible de remplacer la lettre Â«oÂ» par zÃ©ro.  Ces erreurs sont les plus courantes et nÃ©cessitent un rÃ©glage pour une bibliothÃ¨que de reconnaissance spÃ©cifique.  Ainsi, les principes de fonctionnement des versions 3 et 4 de tesseract ont des diffÃ©rences cardinales, donc les erreurs y seront diffÃ©rentes. <br></li><li>  Fusion de jetons.  Les mots peuvent fusionner (n'ont pas encore rencontrÃ© le contraire).  En combinaison avec la premiÃ¨re erreur, il gÃ©nÃ¨re des phrases dÃ©moniaques telles que "double one".  Essayons Ã©galement de diaboliser ces monstres. <br></li><li>  Bruit - caractÃ¨res et phrases laissÃ©s dans le texte.  Malheureusement, il n'y a pas grand-chose Ã  faire pour le moment, mais il existe une perspective pour la collecte de statistiques suffisamment importantes. <br></li></ol><br><p>  Dans le mÃªme temps, l'algorithme d'analyse dÃ©crit ci-dessus ne change presque pas, la principale diffÃ©rence est de diviser la chaÃ®ne en jetons. </p><br><p>  Mais commenÃ§ons par collecter des statistiques sur l'utilisation des lettres dans les jetons.  Sur les 33 lettres de la langue russe, seulement 20 sont utilisÃ©es lors de l'Ã©criture d'entiers non nÃ©gatifs, appelons-les de <i>bonnes lettres</i> : </p><br> <code></code> <br> <br><p>  Les 13 autres, respectivement, seront appelÃ©s <i>mauvaises lettres</i> .  La taille maximale du jeton est de 12 caractÃ¨res (13 en comptant pour le quadrillion).  Les sous-chaÃ®nes plus longues que cette valeur doivent Ãªtre divisÃ©es. </p><br><p>  Pour comparer les chaÃ®nes et les jetons, j'ai dÃ©cidÃ© d'utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'algorithme de Wagner-Fisher</a> , bien que je l'appelle le nom de Levenshtein dans le code.  Je n'ai pas besoin d'instructions Ã©ditoriales, j'ai donc implÃ©mentÃ© une version mÃ©moire de l'algorithme.  Je dois admettre que la mise en Å“uvre de cet algorithme s'est avÃ©rÃ©e Ãªtre une tÃ¢che plus difficile que l'analyseur lui-mÃªme. </p><br><p>  Un petit programme Ã©ducatif: la distance Levenshtein est un cas particulier de l'algorithme de Wagner-Fisher, lorsque le coÃ»t d'insertion, de suppression et de remplacement de caractÃ¨res est statique.  Ce n'est pas le cas dans notre tÃ¢che.  Ã‰videmment, si nous trouvons une mauvaise lettre dans une sous-chaÃ®ne, alors elle doit Ãªtre remplacÃ©e par une bonne lettre, mais remplacer un bon par une mauvaise est extrÃªmement indÃ©sirable.  D'une maniÃ¨re gÃ©nÃ©rale, c'est impossible, mais la situation dÃ©pend de la tÃ¢che spÃ©cifique. </p><br><p>  Pour dÃ©crire le coÃ»t d'insertion, de suppression et de remplacement de caractÃ¨res, j'ai crÃ©Ã© un tableau comme celui-ci: un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien vers un tableau avec des poids</a> .  Bien qu'il soit rempli avec la mÃ©thode des trois P (sexe, doigt, plafond), mais si vous le remplissez avec des donnÃ©es basÃ©es sur les statistiques OCR, vous pouvez amÃ©liorer considÃ©rablement la qualitÃ© de la reconnaissance des nombres.  Le code de bibliothÃ¨que contient le fichier de ressources NumeralLevenshteinData.txt, dans lequel vous pouvez insÃ©rer des donnÃ©es d'une table similaire Ã  l'aide de Ctrl + A, Ctrl + C et Ctrl + V. </p><br><p>  Si un caractÃ¨re non-table est trouvÃ© dans le texte, par exemple zÃ©ro, le coÃ»t de son insertion est Ã©gal Ã  la valeur maximale de la table, et le coÃ»t de la suppression et du remplacement est Ã©gal au minimum, donc l'algorithme est plus susceptible de remplacer zÃ©ro par la lettre Â«oÂ», et si vous utilisez la troisiÃ¨me version de tesseract , il est alors logique d'ajouter zÃ©ro au tableau et d'Ã©crire le prix minimum pour le remplacer par la lettre Â«oÂ». </p><br><p>  Nous avons donc prÃ©parÃ© les donnÃ©es pour l'algorithme de Wagner-Fisher, apportons des modifications Ã  l'algorithme pour diviser la chaÃ®ne en jetons.  Pour ce faire, nous effectuerons une analyse supplÃ©mentaire de chaque jeton, mais avant cela, nous dÃ©velopperons les informations sur le jeton avec les caractÃ©ristiques suivantes: </p><br><ul><li>  <i>Niveau d'erreur</i> .  Un nombre rÃ©el de 0 (pas d'erreur) Ã  1 (le jeton est incorrect), ce qui signifie Ã  quel point le jeton a Ã©tÃ© comparÃ© Ã  l'Ã©chantillon. <br></li><li>  <i>Un signe d'utilisation d'un jeton</i> .  Lors de l'analyse d'une chaÃ®ne avec des dÃ©bris entrecoupÃ©s, une partie des jetons sera rejetÃ©e, car cet attribut ne sera pas dÃ©fini.  Dans ce cas, la valeur d'erreur totale sera considÃ©rÃ©e comme la moyenne arithmÃ©tique des erreurs des jetons utilisÃ©s. <br></li></ul><br><p>  Algorithme d'analyse de jeton: </p><br><ol><li>  Nous essayons de trouver le jeton dans le tableau tel quel.  Si nous trouvons - tout va bien, retournez-le. </li><li>  Sinon, faites une liste des options possibles: </li><li><p>  Nous essayons de faire correspondre le jeton avec l'Ã©chantillon en utilisant l'algorithme de Wagner-Fisher.  Cette option se compose d'un jeton (Ã©chantillon mappÃ©) et son erreur est Ã©gale Ã  la meilleure distance divisÃ©e par la longueur de l'Ã©chantillon. </p><br>  <b>Exemple: le</b> jeton Â«zÃ©roÂ» est comparÃ© Ã  l'Ã©chantillon Â«zÃ©roÂ», tandis que la distance est de 0,5, car  le coÃ»t de remplacement de la mauvaise lettre Â«yÂ» par un bon Â«oÂ» est de 0,5.  L'erreur totale pour ce jeton sera de 0,5 / 4 = 0,125. <br></li><li><p>  Si la sous-chaÃ®ne est suffisamment grande (j'ai 6 caractÃ¨res), nous essayons de la diviser en deux parties d'au moins 3 caractÃ¨res chacune.  Pour une chaÃ®ne de 6 caractÃ¨res, il y aura une seule division: 3 + 3 caractÃ¨res.  Pour une chaÃ®ne de 7 caractÃ¨res - il y a dÃ©jÃ  deux options, 3 + 4 et 4 + 3, etc.  Pour chacune des options, nous appelons rÃ©cursivement la mÃªme fonction d'analyse de jeton, nous entrons les options reÃ§ues dans la liste. </p><br><p>  Afin de ne pas mourir en rÃ©currence, nous dÃ©terminons le niveau maximum d'Ã©chec.  En outre, les options obtenues Ã  la suite de la division sont artificiellement dÃ©gradÃ©es d'un certain montant (option, par dÃ©faut 0,1), de sorte que l'option de comparaison directe a plus de valeur.  J'ai dÃ» ajouter cette opÃ©ration, car  les sous-Ã©tapes du type "double" ont Ã©tÃ© divisÃ©es avec succÃ¨s en jetons "deux" et "cinq", et n'ont pas Ã©tÃ© rÃ©duites Ã  "vingt".  HÃ©las, ce sont les caractÃ©ristiques de la langue russe. </p><br><p>  <b>Exemple: le</b> jeton Â«doubleÂ» a une comparaison directe avec l'Ã©chantillon Â«vingtÂ», erreur 0,25.  De plus, la meilleure option pour diviser est Â«deuxÂ» + Â«cinqÂ» avec un coÃ»t de 0,25 (en remplaÃ§ant Â«aÂ» par Â«iÂ»), aggravÃ© artificiellement Ã  0,35, ce qui fait que le jeton Â«vingtÂ» est prÃ©fÃ©rÃ©. </p><br></li><li>  AprÃ¨s avoir compilÃ© toutes les options, nous sÃ©lectionnons la meilleure par le minimum d'erreurs des jetons qui y participent.  Le rÃ©sultat est renvoyÃ©. </li></ol><br><p>  De plus, la vÃ©rification des jetons est introduite dans l'algorithme de gÃ©nÃ©ration de nombres principal afin que leur erreur ne dÃ©passe pas une certaine valeur (option, par dÃ©faut 0,67).  Avec cela, nous Ã©liminons les dÃ©chets potentiels, mais pas avec beaucoup de succÃ¨s. </p><br><h2>  L'algorithme en bref pour ceux qui Ã©taient trop paresseux pour lire le texte ci-dessus </h2><br><p>  Nous divisons la chaÃ®ne d'entrÃ©e reprÃ©sentant le nombre de mots en sous-chaÃ®nes en utilisant le \ s + rÃ©gulier, puis nous essayons de faire correspondre chaque sous-chaÃ®ne avec des exemples de jetons ou de la diviser en sous-chaÃ®nes plus petites, en choisissant les meilleurs rÃ©sultats.  En consÃ©quence, nous obtenons un ensemble de jetons par lequel nous gÃ©nÃ©rons un nombre, et la valeur d'erreur est prise comme la moyenne arithmÃ©tique des erreurs parmi les jetons utilisÃ©s dans la gÃ©nÃ©ration. </p><br><h2>  Affiner un algorithme pour une tÃ¢che spÃ©cifique </h2><br><p>  Dans ma tÃ¢che, les nombres sont non nÃ©gatifs et relativement petits, donc j'exclurai les jetons inutiles du "million" et plus.  Pour le test, chers lecteurs, au contraire, j'ai ajoutÃ© des jetons de jargon supplÃ©mentaires, qui permettaient d'analyser des chaÃ®nes telles que "cinq piÃ¨ces", "tondre deux cents" et mÃªme "trois stolniks et deux piÃ¨ces d'or".  C'est drÃ´le, mais cela n'a mÃªme pas nÃ©cessitÃ© de modifications de l'algorithme. </p><br><h2>  Nouvelle amÃ©lioration </h2><br><p>  L'algorithme existant a des dÃ©fauts: </p><br><ol><li>  <b>ContrÃ´le de cas.</b>  Les chaÃ®nes "deux mille" et "deux mille" seront reconnues avec une erreur nulle comme 2000. Dans ma tÃ¢che, le contrÃ´le de cas n'est pas requis, il est mÃªme dangereux, mais si vous avez besoin d'une telle fonction, cela est rÃ©solu en introduisant un drapeau supplÃ©mentaire dans le jeton qui est responsable du cas du prochain jeton . <br></li><li>  <b>Nombres nÃ©gatifs.</b>  Un jeton nÃ©gatif supplÃ©mentaire est introduit avec un traitement spÃ©cial.  Rien de compliquÃ©, mais n'oubliez pas que la lettre Â«yÂ» est mauvaise et n'apparaÃ®t pas dans les chiffres, vous devrez changer ses caractÃ©ristiques de poids ou espÃ©rer qu'elle ne change pas pendant le processus OCR. <br></li><li>  <b>Nombres fractionnaires.</b>  Il est rÃ©solu en remplaÃ§ant le type long par un double et en introduisant des jetons "dixiÃ¨mes", "centiÃ¨mes", etc ... N'oubliez pas de rÃ©viser l'Ã©chelle des lettres. <br></li><li>  <b>Reconnaissance des numÃ©ros saisis par les utilisateurs.</b>  Parce que  lors de la saisie manuelle de texte, nous faisons le plus souvent des erreurs liÃ©es Ã  la rÃ©Ã©dition de siVMolov, vous devez ajouter cette opÃ©ration Ã  l'algorithme de Wagner-Fisher. <br></li><li>  <b>Prise en charge d'autres langues.</b>  Nous introduisons de nouveaux jetons, Ã©largissons le tableau des poids. <br></li><li>  <b>Manipulation des ordures.</b>  Dans certains documents, les donnÃ©es sont imprimÃ©es, la qualitÃ© de l'image peut Ãªtre mÃ©diocre, la cellule peut Ãªtre vide et banale.  Dans ce cas, les ordures qui doivent Ãªtre nettoyÃ©es entrent d'une maniÃ¨re ou d'une autre dans la ligne.  Le mieux que je puisse offrir pour le moment est de prÃ©traiter le document avant l'OCR.  Supprimer les lignes du tableau et les remplir avec une couleur proche de la couleur de l'espace libre de la cellule m'a beaucoup aidÃ©.  Cela n'a pas rÃ©solu tous les problÃ¨mes, mais a amÃ©liorÃ© la qualitÃ© de la reconnaissance du texte des documents oÃ¹ le tableau avait des courbures en raison des ecchymoses du document ou d'un photographe tordu.  IdÃ©alement, vous devez faire pivoter la cellule elle-mÃªme et la reconnaÃ®tre sÃ©parÃ©ment, si vous avez bien sÃ»r une table. <br></li></ol><br><h1>  Alors, quel est le rÃ©sultat net? </h1><br><p>  Le projet contient un exemple d'application console exÃ©cutÃ©e dans le fichier samples.txt avec des exemples pour l'analyseur.  Voici une capture d'Ã©cran des rÃ©sultats: </p><br><img src="https://habrastorage.org/webt/fq/ed/ac/fqedacgduf7tewa8tvg-tn6zv3s.png"><br><br><p>  Je vous charge d'Ã©valuer le rÃ©sultat, mais moi, ce n'est pas mal.  L'erreur pour les exemples de reconnaissance rÃ©els ne dÃ©passe pas 0,25, bien que je n'aie pas encore exÃ©cutÃ© l'ensemble des documents disponibles, tout ne sera probablement pas si fluide lÃ -bas. </p><br><p>  Quant Ã  la derniÃ¨re section, je me demandais toujours Ã  quel point c'est Â«dofigaÂ».  En outre, le programme s'est donnÃ© une rÃ©ponse adÃ©quate, combien devrait Ãªtre pris sur un personnel (je n'utilise pas, mais quand mÃªme) et a mÃªme dÃ©terminÃ© avec prÃ©cision la signification du vieux mot russe "obscuritÃ©".  Et oui, la conclusion ne comprenait pas encore une autre mesure que l'Ã©ducation ne permettait pas d'ajouter, mais le programme estime qu'elle est Ã©gale Ã  mille =) </p><br><h1>  Quelques mots sur la bibliothÃ¨que </h1><br><p>  Au dÃ©part, mes projets ne prÃ©voyaient pas la crÃ©ation d'une bibliothÃ¨que, j'ai dÃ©cidÃ© de la concevoir exclusivement pour un Habr.  J'ai essayÃ© de mettre le code dans l'ordre, mais si vous l'utilisez, faites un fork ou une copie, comme  vous n'aurez probablement pas besoin de jargon et d'autres jetons inclus dans les exemples. </p><br><p>  La bibliothÃ¨que elle-mÃªme est Ã©crite sous .NET Standart 2.0 et C # 7.x, et les algorithmes sont facilement traduits dans d'autres langues. </p><br><p>  En cas d'expansion possible de la bibliothÃ¨que, j'ajouterai la composition des composants importants de l'analyseur numÃ©rique en mots (espace de noms Genesis.CV.NumberUtils): </p><br><ul><li>  RussianNumber.cs - analyseur directement </li><li>  RussianNumber.Data.cs - fichier avec description des jetons </li><li>  RussianNumber.ToString.cs - convertisseur de nombre en texte en mots </li><li>  RussianNumberParserOptions.cs - options de l'analyseur </li><li>  NumeralLevenshtein.cs - implÃ©mentation de l'algorithme de Wagner-Fisher </li><li>  NumeralLevenshteinData.txt - ressource, donnÃ©es de pondÃ©ration des lettres </li></ul><br><p>  Utilisation: </p><br><ul><li>  RussianNumber.ToString (valeur) - convertir un nombre en texte </li><li>  RussianNumber.Parse (valeur, [options]) - convertit le texte en nombre </li></ul><br><h1>  Conclusion </h1><br><p>  J'espÃ¨re vraiment que l'article ne vous a pas semblÃ© ennuyeux malgrÃ© l'abondance de texte.  RÃ©cemment, j'ai trouvÃ© beaucoup de sujets liÃ©s Ã  la vision par ordinateur, sur lesquels il y a quelque chose Ã  dire, donc je voudrais avoir une opinion sur ce format d'articles.  Que vaut-il la peine d'ajouter ou, inversement, de supprimer?  Qu'est-ce qui vous intÃ©resse le plus, lecteurs, les algorithmes eux-mÃªmes ou les fragments de code? </p><br><p>  Aimez-vous l'article?  DÃ©couvrez les autres: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Prise en charge de la sÃ©rialisation JavaScript de classe JavaScript</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Remplir des modÃ¨les de texte avec des donnÃ©es basÃ©es sur un modÃ¨le.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ImplÃ©mentation .NET Ã  l'aide de fonctions de bytecode dynamique (IL)</a> <br></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr453642/">https://habr.com/ru/post/fr453642/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr453618/index.html">Comment nous travaillons avec les idÃ©es et comment LANBIX est nÃ©</a></li>
<li><a href="../fr453622/index.html">Programmeur de puces G-Shield: Ã©criture de certificats numÃ©riques sur des puces au stade de la production</a></li>
<li><a href="../fr453626/index.html">Aventures dans un flux sÃ©parÃ©. Rapport Yandex</a></li>
<li><a href="../fr453628/index.html">Que paierez-vous dans 20 ans?</a></li>
<li><a href="../fr453634/index.html">Ã‰cole d'analyse systÃ¨me d'Alfa Bank</a></li>
<li><a href="../fr453644/index.html">Interview - 10 questions sur Swift. 3e partie</a></li>
<li><a href="../fr453646/index.html">Normalisation des donnÃ©es dans une base de donnÃ©es distribuÃ©e, des microservices et un ERP</a></li>
<li><a href="../fr453650/index.html">Noyau logiciel de la cyber-infrastructure embarquÃ©e du chasseur d'attaque unifiÃ© F-35</a></li>
<li><a href="../fr453652/index.html">LogRock: test via la journalisation</a></li>
<li><a href="../fr453656/index.html">Web statique: retour aux sources?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>