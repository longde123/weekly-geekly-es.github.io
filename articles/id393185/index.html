<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚒️ 🚁 🙍🏽 Modul penerima MR1132 nooLite baru untuk Arduino 👐🏽 🙀 👋🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini akan membahas modul penerima sinyal nooLite baru untuk Arduino dan mikrokontroler. Apa yang luar biasa tentang modul ini? Sampai sekarang,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Modul penerima MR1132 nooLite baru untuk Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/393185/"><img src="https://habrastorage.org/files/24c/ab6/dab/24cab6dab74e4e778cd238d261be0b69.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artikel ini akan membahas modul penerima sinyal nooLite baru untuk Arduino dan mikrokontroler. Apa yang luar biasa tentang modul ini? Sampai sekarang, tidak ada cara untuk menerima informasi dari sensor dan untuk mengontrol transmisi sinyal dari remote control sistem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nooLite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pada mikrokontroler dan Arduino, kemungkinan ini hanya ada untuk komputer yang menggunakan adaptor USB khusus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang, dengan dirilisnya modul MR1132, sekarang dimungkinkan untuk menerima data tentang suhu, kelembaban, pencahayaan, dan keberadaan orang-orang di ruangan dari sensor nirkabel sistem nooLite dalam sketsa Anda di Arduino, kemampuan untuk melacak perintah yang dikeluarkan ke unit daya nooLite dengan sakelar kendali jarak jauh dan banyak lagi yang sebelumnya tidak tersedia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada artikel ini saya akan memberi tahu Anda tentang pengoperasian modul ini dan memberikan sketsa yang berfungsi, yang dengannya Anda dapat dengan mudah membuat perangkat di MR1132. </font><font style="vertical-align: inherit;">Dalam artikel selanjutnya saya akan berbicara tentang integrasi modul ini dengan sistem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Mega Server yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> populer </font><font style="vertical-align: inherit;">dan tentang fitur-fitur luar biasa yang akan muncul sehubungan dengan integrasi ini.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modul</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul MR1132 sangat mirip dengan saudaranya, modul MT1132 (yang sudah ada siklus artikel di Gimetays </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">satu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dua</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tiga</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Perbedaannya adalah bahwa modul MT1132 adalah pemancar, dan modul MR1132 adalah penerima dan efek terbesar dapat diperoleh ketika mereka digunakan bersama. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Poin penting lainnya adalah bahwa pemancar MT1132 bersifat universal dan bekerja baik dari 3,3 V dan dari 5 V (yang berarti bekerja dengan pengontrol 3,3 volt dan dengan 5 volt), dan penerima hanya dari 5 V. Ini harus diperhitungkan saat merancang perangkat Anda dan, jika perlu, gunakan koordinator level logis.</font></font><br>
<br>
<img src="https://habrastorage.org/files/36e/50c/816/36e50c816d1b4859b7a56eb2ae4f4996.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Koneksi sesederhana modul MT1132 - tegangan suplai, arde dan dua kontak RX dan TX. </font><font style="vertical-align: inherit;">RTS dapat ditarik ke tegangan suplai, tetapi semuanya bekerja untuk saya bahkan tanpa menghubungkan output ini.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bekerja</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul beroperasi melalui antarmuka serial dengan kecepatan 9600. Modul menerima perintah dari pengontrol dan, pada gilirannya, mengeluarkan data yang diterima dari udara (dari sensor dan remote nooLite). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat lebih dekat pada poin ini, sehingga Anda memiliki pemahaman yang jelas tentang cara kerja modul ini.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua perintah yang dapat dikirim oleh pengontrol ke modul melalui antarmuka serial terkait dengan perangkat nooLite “binding” atau “unying”, yang darinya modul akan menerima data. Tidak ada lagi perintah kontrol untuk modul ini. Misalnya, Anda mengikat sensor suhu nooLite PT112 pada saluran nol (total 32 saluran, yang tercermin dalam nama modul) dan setelah itu modul akan mulai menerima data dari sensor ini dan menampilkannya ke antarmuka serial (di mana tugas kami adalah untuk "menangkap" dan menggunakannya untuk tujuan). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika kita tidak perlu lagi menerima data dari sensor apa pun, maka kita dapat mengirim perintah decoupling (dalam hal ini, pada saluran nol) dan penerima tidak akan lagi memberikan informasi kepada pengontrol dari sensor ini.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adapun informasi yang diterima oleh modul MR1132 dari perangkat nooLite, ada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dokumen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terpisah </font><font style="vertical-align: inherit;">yang menjelaskan format semua perintah yang mungkin. </font><font style="vertical-align: inherit;">Kami, dalam konteks narasi ini, dari daftar luas ini akan tertarik pada tim sensor suhu, kelembaban dan gerak. </font><font style="vertical-align: inherit;">Perintah-perintah ini akan dibahas secara rinci di bawah ini, menggunakan sketsa sebagai contoh.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensor</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam percobaan kami, tiga sensor akan digunakan. </font></font><br>
<br>
<img src="https://habrastorage.org/files/3f9/ca8/0d4/3f9ca80d49e04e228406018485a56439.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sensor suhu PT112 dan sensor suhu dan kelembaban PT111. </font><font style="vertical-align: inherit;">Mereka terlihat sama dan bekerja dengan cara yang persis sama, perbedaannya adalah PT112 hanya memberikan informasi tentang suhu, dan PT111 memberikan informasi tentang suhu dan kelembaban. </font><font style="vertical-align: inherit;">Sensor-sensor ini dapat bekerja dalam mode sensor sederhana atau dalam mode termostat dan hygrostat, tetapi kita akan tertarik dengan mode sensor sederhana. </font></font><br>
<br>
<img src="https://habrastorage.org/files/faa/396/a15/faa396a152b5477b9bdfd91d722c9ca3.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sensor ketiga adalah PM111. </font><font style="vertical-align: inherit;">Ini adalah sensor gerak yang dapat secara langsung mengontrol unit daya nooLite, tetapi kami hanya akan tertarik pada kami sebagai sumber informasi tentang gerakan dan keberadaan orang di ruangan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengendali</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arduino Mega 2560 akan digunakan sebagai pengontrol kontrol, dan dua antarmuka serial - Serial (untuk kontrol informasi visual) Serial2 (untuk komunikasi dengan modul penerima). </font><font style="vertical-align: inherit;">Serial1 dicadangkan untuk modul pemancar MT1132.</font></font><br>
<br>
<img src="https://habrastorage.org/files/464/661/a69/464661a69db6436da29c14c265c92996.jpg" alt="gambar"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sketsa</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bagian setup (), dua antarmuka diluncurkan, pesan informasi tentang awal sketsa ditampilkan, dan perintah dikeluarkan untuk mengikat perangkat nooLite pada saluran nol. </font><font style="vertical-align: inherit;">Ini adalah perintah uji dan Anda dapat berkomentar atau menggantinya dengan perintah lain (misalnya, binding di saluran lain atau melepaskan ikatan).</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);<font></font>
  Serial2.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);<font></font>
  Serial.println(<span class="hljs-string"><span class="hljs-string">"*** Start sketch ***"</span></span>);<font></font>
  mrBind(<span class="hljs-number"><span class="hljs-number">0</span></span>);
  <span class="hljs-comment"><span class="hljs-comment">//mrUnbind(0);</span></span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelum mengerjakan sketsa, Anda perlu melakukan beberapa langkah awal, yaitu, ikat sensor Anda ke modul dengan cara berikut: </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PT112</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - saluran nol </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PT111</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - saluran satu </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM111</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - saluran dua </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk ini Anda perlu menjalankan sketsa tiga kali, mengubah perintah penjilidan</font></font><br>
<br>
<pre><code class="java hljs">mrBind(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
mrBind(<span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
mrBind(<span class="hljs-number"><span class="hljs-number">2</span></span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dan setiap kali tekan tombol pada sensor yang sesuai. </font><font style="vertical-align: inherit;">Ini perlu dilakukan hanya sekali, maka perintah yang mengikat dapat dikomentari. </font><font style="vertical-align: inherit;">Atau, alih-alih, lepaskan perintah lepaskan dan lepaskan salah satu sensor yang terpasang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bagian loop (), hanya ada satu fungsi mrCheck (), yang bertanggung jawab untuk "menangkap" pesan dari modul MR1132 dari antarmuka serial Serial2.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mrCheck</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Serial2.available() == <span class="hljs-number"><span class="hljs-number">8</span></span>) {<font></font>
    mrBuf[<span class="hljs-number"><span class="hljs-number">0</span></span>] = Serial2.read();<font></font>
    mrBuf[<span class="hljs-number"><span class="hljs-number">1</span></span>] = Serial2.read();<font></font>
    mrBuf[<span class="hljs-number"><span class="hljs-number">2</span></span>] = Serial2.read();<font></font>
    mrBuf[<span class="hljs-number"><span class="hljs-number">3</span></span>] = Serial2.read();
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mrBuf[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-number"><span class="hljs-number">79</span></span> &amp;&amp; mrBuf[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-number"><span class="hljs-number">75</span></span> &amp;&amp; mrBuf[<span class="hljs-number"><span class="hljs-number">2</span></span>] == <span class="hljs-number"><span class="hljs-number">13</span></span> &amp;&amp; mrBuf[<span class="hljs-number"><span class="hljs-number">3</span></span>] == <span class="hljs-number"><span class="hljs-number">10</span></span>) {<font></font>
      Serial.println(<span class="hljs-string"><span class="hljs-string">"OK"</span></span>);<font></font>
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
        mrBuf[<span class="hljs-number"><span class="hljs-number">4</span></span>] = Serial2.read();<font></font>
        mrBuf[<span class="hljs-number"><span class="hljs-number">5</span></span>] = Serial2.read();<font></font>
        mrBuf[<span class="hljs-number"><span class="hljs-number">6</span></span>] = Serial2.read();<font></font>
        mrBuf[<span class="hljs-number"><span class="hljs-number">7</span></span>] = Serial2.read();<font></font>
        mrNewData();<font></font>
      }<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi ini mengisi array mrBuf [8] dengan data yang berasal dari modul atau mentransmisikan ke pesan Seri "OK", yang dikeluarkan oleh modul MR1132. Selanjutnya, isi dari array mrBuf [8] diuraikan sesuai dengan format data dari perintah sistem nooLite, dan fungsi sketsa yang sesuai terlibat dalam hal ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi mrNewData () mengekstrak data utama dari array mrBuf [8] dan, tergantung pada perintah yang masuk, menampilkan informasi yang diperlukan ke Serial (saluran, perintah, suhu, kelembaban, status baterai sensor, dll.).</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mrNewData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  mrClearData();<font></font>
  mrPrintHeader();<font></font>
  <font></font>
  mrSetBindState();<font></font>
  mrPrintBindState();<font></font>
  mrSetChannel();<font></font>
  mrPrintChannel();<font></font>
<font></font>
  mrSetCommand();<font></font>
  mrSetDatas();<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (mrCommand) {
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>:<font></font>
      Serial.print(<span class="hljs-string"><span class="hljs-string">"PIR command: "</span></span>);Serial.println(<span class="hljs-string"><span class="hljs-string">"OFF"</span></span>);
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>:<font></font>
      Serial.print(<span class="hljs-string"><span class="hljs-string">"PIR command: "</span></span>); Serial.println(<span class="hljs-string"><span class="hljs-string">"ON"</span></span>);
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>:<font></font>
      mrSetDeviceType();<font></font>
      mrPrintDeviceType();<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mrDeviceType == <span class="hljs-number"><span class="hljs-number">1</span></span>) {<font></font>
        mrSetTemperature();<font></font>
        mrPrintTemperature();<font></font>
      }<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mrDeviceType == <span class="hljs-number"><span class="hljs-number">2</span></span>) {<font></font>
        mrSetTemperature();<font></font>
        mrPrintTemperature();<font></font>
        mrSetHumidity();<font></font>
        mrPrintHumidity();<font></font>
      }<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <font></font>
      ;<font></font>
  } <span class="hljs-comment"><span class="hljs-comment">// switch</span></span><font></font>
  mrSetBatteryState();<font></font>
} <span class="hljs-comment"><span class="hljs-comment">// newData()</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi yang mengandung kata Cetak dalam namanya terlibat dalam mengeluarkan informasi ke antarmuka Serial untuk kontrol visual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi-fungsi berikut mendekripsi data dalam array mrBuf [8], sesuai dengan format data dari perintah sistem nooLite: </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mrSetTogl ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nilai penghitung perintah masuk </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mrSetBindState ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - status modul (mengikat / norma) </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mrSetReceiveBit ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - bit penerimaan kontrol perintah baru </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mrSetChannel ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nomor saluran </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mrSetCommand ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - perintah </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mrSetFormat ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - format data </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mrSetDeviceType ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - tipe sensor </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mrSetDatas ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - isi empat byte data </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mrSetTemperature ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- mendapatkan nilai suhu </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mrSetHumidity ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - mendapatkan nilai kelembaban </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mrSetBrightness ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - mendapatkan nilai iluminasi </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mrSetBatteryState ()</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - status baterai sensor </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat melihat detail penerapan fungsi-fungsi ini dalam kode sketsa lengkap yang terlampir di bawah ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini sketsa lengkapnya.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode sketsa lengkap</font></font></b><div class="spoiler_text">// TX2 16<br>
// RX2 17<br>
// TX1 18<br>
// RX1 19<br>
<br>
// nooLite MR1132 data<br>
byte mrBuf[8];<br>
int mrTogl = -1;<br>
int mrBindState = -1;<br>
int mrReceiveBit = -1;<br>
int mrChannel = -1;<br>
int mrCommand = -1;<br>
int mrFormat = -1;<br>
int mrData0 = -1;<br>
int mrData1 = -1;<br>
int mrData2 = -1;<br>
int mrData3 = -1;<br>
int mrDeviceType = -1;<br>
int mrBatteryState = -1;<br>
int mrHumidity = -1;<br>
int mrBrightness = -1;<br>
float mrTemp = -1.0;<br>
<br>
// nooLite MR1132 bind/unbind<br>
<br>
void mrSerialChannel(byte ch) {<br>
 switch (ch) {<br>
 case 0: Serial.println («0»); break;<br>
 case 1: Serial.println («1»); break;<br>
 case 2: Serial.println («2»); break;<br>
 case 3: Serial.println («3»); break;<br>
 case 4: Serial.println («4»); break;<br>
 case 5: Serial.println («5»); break;<br>
 case 6: Serial.println («6»); break;<br>
 case 7: Serial.println («7»); break;<br>
 case 8: Serial.println («8»); break;<br>
 case 9: Serial.println («9»); break;<br>
 case 10: Serial.println(«10»); break;<br>
 case 11: Serial.println(«11»); break;<br>
 case 12: Serial.println(«12»); break;<br>
 case 13: Serial.println(«13»); break;<br>
 case 14: Serial.println(«14»); break;<br>
 case 15: Serial.println(«15»); break;<br>
 case 16: Serial.println(«16»); break;<br>
 case 17: Serial.println(«17»); break;<br>
 case 18: Serial.println(«18»); break;<br>
 case 19: Serial.println(«19»); break;<br>
 case 20: Serial.println(«20»); break;<br>
 case 21: Serial.println(«21»); break;<br>
 case 22: Serial.println(«22»); break;<br>
 case 23: Serial.println(«23»); break;<br>
 case 24: Serial.println(«24»); break;<br>
 case 25: Serial.println(«25»); break;<br>
 case 26: Serial.println(«26»); break;<br>
 case 27: Serial.println(«27»); break;<br>
 case 28: Serial.println(«28»); break;<br>
 case 29: Serial.println(«29»); break;<br>
 case 30: Serial.println(«30»); break;<br>
 case 31: Serial.println(«31»); break;<br>
 } // switch<br>
} // mrSerialChannel( )<br>
<br>
void mrSerial2Channel(byte ch) {<br>
 switch (ch) {<br>
 case 0: Serial2.print(«00»); break;<br>
 case 1: Serial2.print(«01»); break;<br>
 case 2: Serial2.print(«02»); break;<br>
 case 3: Serial2.print(«03»); break;<br>
 case 4: Serial2.print(«04»); break;<br>
 case 5: Serial2.print(«05»); break;<br>
 case 6: Serial2.print(«06»); break;<br>
 case 7: Serial2.print(«07»); break;<br>
 case 8: Serial2.print(«08»); break;<br>
 case 9: Serial2.print(«09»); break;<br>
 case 10: Serial2.print(«10»); break;<br>
 case 11: Serial2.print(«11»); break;<br>
 case 12: Serial2.print(«12»); break;<br>
 case 13: Serial2.print(«13»); break;<br>
 case 14: Serial2.print(«14»); break;<br>
 case 15: Serial2.print(«15»); break;<br>
 case 16: Serial2.print(«16»); break;<br>
 case 17: Serial2.print(«17»); break;<br>
 case 18: Serial2.print(«18»); break;<br>
 case 19: Serial2.print(«19»); break;<br>
 case 20: Serial2.print(«20»); break;<br>
 case 21: Serial2.print(«21»); break;<br>
 case 22: Serial2.print(«22»); break;<br>
 case 23: Serial2.print(«23»); break;<br>
 case 24: Serial2.print(«24»); break;<br>
 case 25: Serial2.print(«25»); break;<br>
 case 26: Serial2.print(«26»); break;<br>
 case 27: Serial2.print(«27»); break;<br>
 case 28: Serial2.print(«28»); break;<br>
 case 29: Serial2.print(«29»); break;<br>
 case 30: Serial2.print(«30»); break;<br>
 case 31: Serial2.print(«31»); break;<br>
 } // switch<br>
} // mrSerial2Channel( )<br>
<br>
void mrPrintBind(byte ch) {<br>
 Serial.print(«Bind on channel „);<br>
 mrSerialChannel(ch);<br>
}<br>
<br>
void mrBind(byte ch) {<br>
 mrPrintBind(ch);<br>
 Serial2.print(“bind_mode_cell_»);<br>
 mrSerial2Channel(ch);<br>
 Serial2.write(3); // End of Text — B00000011(BIN)<br>
}<br>
<br>
void mrPrintUnbind(byte ch) {<br>
 Serial.println(«Unbind on channel „);<br>
 mrSerialChannel(ch);<br>
}<br>
<br>
void mrUnbind(byte ch) {<br>
 mrPrintUnbind(ch);<br>
 Serial2.print(“clear_one_cell_»);<br>
 mrSerial2Channel(ch);<br>
 Serial2.write(3);<br>
}<br>
<br>
void mrBindStop() {<br>
 Serial.println(«Bind mode off»);<br>
 Serial2.print(«bind_mode_off»);<br>
 Serial2.write(3);<br>
}<br>
<br>
void mrClearAll() {<br>
 Serial.println(«Clear all cell»);<br>
 Serial2.print(«clear_all_cell»);<br>
 Serial2.write(3);<br>
}<br>
<br>
// nooLite MR1132 print works<br>
<br>
void mrPrintHeader() {<br>
 Serial.println();<br>
}<br>
<br>
void mrPrintDeviceType() {<br>
 Serial.print(«Device: „); <br>
 if (mrDeviceType == 1) {<br>
 Serial.println(“PT112»);<br>
 }<br>
 if (mrDeviceType == 2) {<br>
 Serial.println(«PT111»);<br>
 }<br>
}<br>
<br>
void mrPrintBindState() {<br>
 if (mrBindState == 1) {<br>
 Serial.print(«Bind State: „);<br>
 Serial.println(“ON»);<br>
 }<br>
}<br>
<br>
void mrPrintBatteryState() {<br>
 if (mrBatteryState == 1) {<br>
 Serial.print(«Battery State: „);<br>
 Serial.println(“LOW!»);<br>
 }<br>
}<br>
<br>
void mrPrintChannel() {<br>
 Serial.print(«Channel: „);<br>
 Serial.println(mrChannel);<br>
}<br>
<br>
void mrPrintTemperature() {<br>
 Serial.print(“Temp: „);<br>
 Serial.println(mrTemp);<br>
}<br>
<br>
void mrPrintHumidity() {<br>
 Serial.print(“Humidity: „);<br>
 Serial.println(mrHumidity);<br>
}<br>
<br>
// nooLite MR1132 data works<br>
<br>
void mrClearData() {<br>
 mrTogl = -1;<br>
 mrBindState = -1;<br>
 mrReceiveBit = -1;<br>
 mrChannel = -1;<br>
 mrCommand = -1;<br>
 mrFormat = -1;<br>
 mrData0 = -1;<br>
 mrData1 = -1;<br>
 mrData2 = -1;<br>
 mrData3 = -1;<br>
 mrDeviceType = -1;<br>
 mrBatteryState = -1;<br>
 mrHumidity = -1;<br>
 mrBrightness = -1;<br>
 mrTemp = -1.0;<br>
}<br>
<br>
void mrSetTogl() {<br>
 byte b0 = bitRead(mrBuf[0], 0);<br>
 byte b1 = bitRead(mrBuf[0], 1);<br>
 byte b2 = bitRead(mrBuf[0], 2);<br>
 byte b3 = bitRead(mrBuf[0], 3);<br>
 byte b4 = bitRead(mrBuf[0], 4);<br>
 byte b5 = bitRead(mrBuf[0], 5);<br>
 mrTogl = 32*b5 + 16*b4 + 8*b3 + 4*b2 + 2*b1 + b0;<br>
}<br>
<br>
void mrSetBindState() {<br>
 mrBindState = bitRead(mrBuf[0], 6);<br>
}<br>
<br>
void mrSetReceiveBit() {<br>
 mrReceiveBit = bitRead(mrBuf[0], 7);<br>
}<br>
<br>
void mrSetChannel() {<br>
 mrChannel = mrBuf[1];<br>
}<br>
<br>
void mrSetCommand() {<br>
 mrCommand = mrBuf[2];<br>
}<br>
<br>
void mrSetFormat() {<br>
 mrFormat = mrBuf[3];<br>
}<br>
<br>
void mrSetDeviceType() {<br>
 byte tp1 = bitRead(mrBuf[5], 4);<br>
 byte tp2 = bitRead(mrBuf[5], 5);<br>
 byte tp3 = bitRead(mrBuf[5], 6);<br>
 mrDeviceType = 4*tp3 + 2*tp2 + tp1;<br>
}<br>
<br>
void mrSetDatas() {<br>
 mrData0 = mrBuf[4];<br>
 mrData1 = mrBuf[5];<br>
 mrData2 = mrBuf[6];<br>
 mrData3 = mrBuf[7];<br>
}<br>
<br>
void mrSetTemperature() {<br>
 byte t8 = bitRead(mrData1, 0);<br>
 byte t9 = bitRead(mrData1, 1);<br>
 byte t10= bitRead(mrData1, 2);<br>
 int temp2 = 1024*t10 + 512*t9 + 256*t8;<br>
<br>
int temp = mrData0 + temp2;<br>
<br>
byte t11 = bitRead(mrData1, 3);<br>
 if (t11 == 1) {<br>
 temp = (4096 — temp) * -1;<br>
 }<br>
 mrTemp = (float)temp / 10.0;<br>
}<br>
<br>
void mrSetBatteryState() {<br>
 mrBatteryState = bitRead(mrBuf[5], 7);<br>
}<br>
<br>
void mrSetHumidity() {<br>
 mrHumidity = mrData2;<br>
}<br>
<br>
void mrSetBrightness() {<br>
 mrBrightness = mrData3;<br>
}<br>
<br>
void mrNewData() {<br>
 mrClearData();<br>
 mrPrintHeader();<br>
 <br>
 mrSetBindState();<br>
 mrPrintBindState();<br>
 mrSetChannel();<br>
 mrPrintChannel();<br>
<br>
mrSetCommand();<br>
 mrSetDatas();<br>
<br>
switch (mrCommand) {<br>
 case 0:<br>
 Serial.print(“PIR command: „); Serial.println(“OFF»);<br>
 break;<br>
 case 2:<br>
 Serial.print(«PIR command: „); Serial.println(“ON»);<br>
 break;<br>
 case 21:<br>
 mrSetDeviceType();<br>
 mrPrintDeviceType();<br>
 if (mrDeviceType == 1) {<br>
 mrSetTemperature();<br>
 mrPrintTemperature();<br>
 }<br>
 if (mrDeviceType == 2) {<br>
 mrSetTemperature();<br>
 mrPrintTemperature();<br>
 mrSetHumidity();<br>
 mrPrintHumidity();<br>
 }<br>
 break;<br>
 default: <br>
;<br>
 } // switch<br>
 mrSetBatteryState();<br>
} // newData()<br>
<br>
void mrCheck() {<br>
 if (Serial2.available() == 8) {<br>
 mrBuf[0] = Serial2.read();<br>
 mrBuf[1] = Serial2.read();<br>
 mrBuf[2] = Serial2.read();<br>
 mrBuf[3] = Serial2.read();<br>
 if (mrBuf[0] == 79 &amp;&amp; mrBuf[1] == 75 &amp;&amp; mrBuf[2] == 13 &amp;&amp; mrBuf[3] == 10) {<br>
 Serial.println(«OK»);<br>
 } else {<br>
 mrBuf[4] = Serial2.read();<br>
 mrBuf[5] = Serial2.read();<br>
 mrBuf[6] = Serial2.read();<br>
 mrBuf[7] = Serial2.read();<br>
 mrNewData();<br>
 }<br>
 }<br>
}<br>
<br>
void setup() {<br>
 Serial.begin(9600);<br>
 Serial2.begin(9600);<br>
 Serial.println("*** Start sketch ***");<br>
 mrBind(0);<br>
 //mrUnbind(0);<br>
}<br>
<br>
void loop() {<br>
 mrCheck();<br>
} // loop()<br>
<br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebenarnya, itulah yang Anda butuhkan untuk mulai bekerja dengan modul MR1132 dan menggunakannya dalam sketsa dan proyek Anda. </font><font style="vertical-align: inherit;">Modul ini juga dapat digunakan untuk mengontrol sinyal dari konsol yang terpasang di dinding nooLite dan sistem Anda sekarang dapat mengetahui di mana dan di mana konsol bekerja dan perintah mana yang dikirim ke unit daya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Segera versi 0.15 baru dari sistem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Mega Server</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> populer akan dirilis </font><font style="vertical-align: inherit;">dan dalam versi ini akan ada dukungan built-in untuk modul MR1132 dan manajemen yang nyaman langsung dari halaman web dan banyak lagi.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id393185/">https://habr.com/ru/post/id393185/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id393171/index.html">Menurut akun Vilnius: bagaimana Lithuania membantu cryptocurrency dan blockchains mengubah dunia</a></li>
<li><a href="../id393175/index.html">Inisiatif Microsoft OpenT2T Baru: "Antarmuka Segalanya"</a></li>
<li><a href="../id393177/index.html">Empat puluh dua detik</a></li>
<li><a href="../id393179/index.html">Intel Compute Stick mendapatkan prosesor Intel Core dan kamera Realsense</a></li>
<li><a href="../id393181/index.html">Chip radio telah dibuat yang secara bersamaan mengirim dan menerima menggunakan antena tunggal</a></li>
<li><a href="../id393187/index.html">Rogozin: kita perlu pengembangan perangkat lunak kolektif mengikuti contoh Cina, dengan partisipasi negara</a></li>
<li><a href="../id393189/index.html">Oscar, tubuh modular</a></li>
<li><a href="../id393191/index.html">Berapa biaya baju besi Darth Vader</a></li>
<li><a href="../id393193/index.html">"Upaya yang belum pernah terjadi sebelumnya tentang diganggu gugat kehidupan pribadi warga negara"</a></li>
<li><a href="../id393195/index.html">MPAA хочет, чтобы провайдеры отключали от интернета пиратов-рецидивистов</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>