<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ง ๐ฉ๐พโ๐ ๐ฉโ๐ซ 12.3 ููููู ูู WebSockets ุงููุชุฒุงููุฉ โข๏ธ ๐ค ๐ค๐ฝ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุดูุก ูุงุญุฏ ุนู WebSockets ูู ุฃูู ุชุญุชุงุฌ ุฅูู ุงููุซูุฑ ูู ุงูููุงุฑุฏ ูู ุฌุงูุจ ุงูุนููู ูุชูููุฏ ุญูููุฉ ุนุงููุฉ ุจูุง ูููู ููุฎุงุฏู ุญุชู ูุณุชููู ุฌููุน ููุงุฑุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>12.3 ููููู ูู WebSockets ุงููุชุฒุงููุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460847/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุดูุก ูุงุญุฏ ุนู WebSockets ูู ุฃูู ุชุญุชุงุฌ ุฅูู ุงููุซูุฑ ูู ุงูููุงุฑุฏ ูู ุฌุงูุจ ุงูุนููู ูุชูููุฏ ุญูููุฉ ุนุงููุฉ ุจูุง ูููู ููุฎุงุฏู ุญุชู ูุณุชููู ุฌููุน ููุงุฑุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุงู ุงูุนุฏูุฏ ูู ุงูุชุญุฏูุงุช ุงูุชู ูุฌุจ ุงูุชุบูุจ ุนูููุง ูุฃู ุจุฑูุชูููู WebSockets ูุชุทูุจ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูู ุฌุงูุจ ุงูุนููู ุฃูุซุฑ ูู ุฌุงูุจ ุงูุฎุงุฏู.  ูู ููุณ ุงูููุช ุ ุชุญุชุงุฌ ุฅูู ุงููุซูุฑ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ูุชุฎุฒูู ุงููุนูููุงุช ุญูู ุงูุงุชุตุงูุงุช ุงูููุชูุญุฉ ุฅุฐุง ูุงู ูุฏูู ููุงููู ูููุง. </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ููุช ูุญุธูุธูุง ุจุฏุฑุฌุฉ ูุงููุฉ ููุญุตูู ุนูู ุงุซููู ูู ุงูุฎูุงุฏู ุงูุฌุฏูุฏุฉ ููุชุฑุฉ ูุญุฏูุฏุฉ ูู ุงูููุช ุชุญุช ุชุตุฑูู ูุงุฎุชุจุงุฑุงุช "ุงูุฅุฑูุงู" ููุฃุฌูุฒุฉ.  ูุฐูู ูุฑุฑุช ุงุณุชุฎุฏุงู ุฎุงุฏู ุงูุชุทุจููุงุช Lua Application Server - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">LAppS ุงูุฎุงุต ุจู</a> ููููุงู ุจุงููููุชูู: ุงุฎุชุจุงุฑ ุงูุฃุฌูุฒุฉ ูุฅุฌุฑุงุก ุงุฎุชุจุงุฑุงุช ุชุญููู ุนุงููุฉ LAPSS. </p><br><p style=";text-align:right;direction:rtl"><a name="habracut"></a>  ุฏุนูุง ูุฑู ุงูุชูุงุตูู </p><br><h1 id="challenges" style=";text-align:right;direction:rtl">  ุงูุชุญุฏูุงุช </h1><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ููุจู ูู ุดูุก ุ ุชุชุทูุจ WebSockets ูู ุฌุงูุจ ุงูุนููู RNG ุณุฑูุนูุง ูุฅุฎูุงุก ุญุฑูุฉ ุงููุฑูุฑ ูุง ูู ุชุฑุบุจ ูู ูุฒููู.  ุฃุฑุฏุช ุฃู ุชููู ุงูุงุฎุชุจุงุฑุงุช ูุงูุนูุฉ ุ ูุฐุง ุชุฎูุตุช ูู ููุฑุฉ ุชุฒููุฑ RNG ุนู ุทุฑูู ุงุณุชุจุฏุงููุง ุจุซุงุจุช.  ูุฐุง ูุชุฑู ุงูุฎูุงุฑ ุงููุญูุฏ - ุงููุซูุฑ ูู ููุฉ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ููุง ููุช ุ ูุฏู ุฎุงุฏููู: ุฃุญุฏููุง ูุฒูุฏ ุจูุนุงูุฌ Intel Gold 6148 CPUs (40 ูุฑูุฒูุง ูู ุงููุฌููุน) 256 ุฌูุฌุงุจุงูุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู (DDR4-2666) ููุงุญุฏ ูุฒูุฏ ุจูุนุงูุฌ Intel Platinum 8180 ูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (112 ูุฑูุฒูุง ูู ุงููุฌููุน) 384GB RAM (DDR4-2666) .  ุณุฃุดูุฑ ุฅูููู ุนูู ุฃููู ุงูุฎุงุฏู A ูุงูุฎุงุฏู B ูููุง ุจุนุฏ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุชุญุฏู ุงูุซุงูู - ูุง ุชูุฌุฏ ููุชุจุงุช ุฃู ูุฌููุนุงุช ุงุฎุชุจุงุฑ ูู WebSockets ุจุณุฑุนุฉ ูุงููุฉ.  ููุฐุง ูู ุงูุณุจุจ ุงูุฐู ุฏูุนูู ุฅูู ุชุทููุฑ ูุญุฏุฉ ุนููู WebSockets ูู LAppS (cws). </p><br><h1 id="the-tests-setup" style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ุงูุงุฎุชุจุงุฑุงุช </h1><br><p style=";text-align:right;direction:rtl">  ูุญุชูู ููุง ุงูุฎุงุฏููู ุนูู ุจุทุงูุงุช 10 ุฌูุฌุงุจุช ุฐุงุช ุงููููุฐ ุงููุฒุฏูุฌ.  ูุชู ุชุฌููุน ุงููููุฐ 1 ูู ูู ุจุทุงูุฉ ุนูู ูุงุฌูุฉ ุงูุฑุจุท ููุชู ุชูุตูู ูุฐู ุงูููุงูุฐ ุนูู ุฃู ูู ุงูุจุทุงูุงุช ูุน ุจุนุถูุง ุงูุจุนุถ ูู ูุถุน RR.  ูุชู ุชุฌููุน ุงููููุฐ 2 ูู ูู ุจุทุงูุฉ ุฅูู ูุงุฌูุฉ ุงูุฑุจุท ูู ูุถุน "ุงููุณุฎ ุงูุงุญุชูุงุทู ุงููุดุท" ุ ูุชุตูุฉ ุนุจุฑ ูุญูู Ethernet.  ูุงู ูู ุฎุงุฏู ุฃุฌูุฒุฉ ูุดุบู RHEL 7.6.  ุงุถุทุฑุฑุช ุฅูู ุชุซุจูุช gcc-8.3 ูู ุงููุตุงุฏุฑ ููุญุตูู ุนูู ูุชุฑุฌู ุญุฏูุซ ุจุฏูุงู ูู gcc-4.8.5 ุงูุงูุชุฑุงุถู.  ููุณ ุฃูุถู ุฅุนุฏุงุฏ ูุงุฎุชุจุงุฑุงุช ุงูุฃุฏุงุก ุ ูููู ูุง ูููู ุฃู ูููู ุงููุชุณูููู ูู ุงููุฎุชุงุฑูู. </p><br><p style=";text-align:right;direction:rtl">  ุชุญุชูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (CPU) ุนูู ุงูุฎุงุฏู A (2xGold 6148) ุนูู ุชุฑุฏุฏ ุฃุนูู ูู ุงูุฎุงุฏู B (4xPlatinum 8180).  ูู ุงูููุช ููุณู ุ ูุญุชูู Server B ุนูู ูุฒูุฏ ูู ุงูููู ุ ูุฐูู ูุฑุฑุช ุชุดุบูู ุฎุงุฏู ุตุฏู ุนูู ุงูุฎุงุฏู A ูุนููุงุก ุงูุตุฏู ุนูู ุงูุฎุงุฏู B. </p><br><p style=";text-align:right;direction:rtl">  ุฃุฑุฏุช ุฃู ุฃุฑู ููู ูุชุตุฑู LAppS ุชุญุช ุนุจุก ูุจูุฑ ูุน ููุงููู ุงูุงุชุตุงูุงุช ููุง ูู ุงูุญุฏ ุงูุฃูุตู ูููุฏุงุฑ ุทูุจุงุช ุงูุตุฏู ูู ุงูุซุงููุฉ ุงูุชู ูููู ุฃู ุชูุฏูู.  ูุฐู ูู ุงููุงูุน ูุฌููุนุชุงู ูุฎุชููุชุงู ูู ุงูุงุฎุชุจุงุฑุงุช ูุฃูู ูุน ุฒูุงุฏุฉ ุญุฌู ุงูุงุชุตุงูุงุช ุ ูููู ุงูุฎุงุฏู ูุงูุนููู ุจุนูู ูุชุฒุงูุฏ ุงูุชุนููุฏ. </p><br><p style=";text-align:right;direction:rtl">  ูุจู ุฐูู ุ ููุช ุจุฅุฌุฑุงุก ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุนูู ุฌูุงุฒ ุงูููุจููุชุฑ ุงูููุฒูู ุงูุฐู ุฃุณุชุฎุฏูู ููุชุทููุฑ.  ุณูุชู ุงุณุชุฎุฏุงู ูุชุงุฆุฌ ูุฐู ุงูุงุฎุชุจุงุฑุงุช ููููุงุฑูุฉ.  ูุญุชูู ุฌูุงุฒ ุงูููุจููุชุฑ ุงูููุฒูู ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ Intel Core i7-7700 ุณุนุฉ 3.6 ุฌูุฌุง ูุฑุชุฒ (ุชูุฑุจู 4.0 ุฌูุฌุงููุฑุชุฒ) ูุน 4 ูุฑุงูุฒ ู 32 ุฌูุฌุงุจุงูุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู DDR4-2400.  ูุดุบู ูุฐุง ุงูููุจููุชุฑ Gentoo ูุน 4.14.72 kernel. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุณุชููุงุช ุชุตุญูุญ ุดุจุญ ูุงูุงูููุงุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุจููุชุฑ ุงูููุฒู <br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">/sys/devices/system/cpu/vulnerabilities/l1tf:Mitigation: PTE Inversion; VMX: conditional cache flushes, SMT vulnerable /sys/devices/system/cpu/vulnerabilities/meltdown:Mitigation: PTI /sys/devices/system/cpu/vulnerabilities/spec_store_bypass:Mitigation: Speculative Store Bypass disabled via prctl and seccomp /sys/devices/system/cpu/vulnerabilities/spectre_v1:Mitigation: __user pointer sanitization /sys/devices/system/cpu/vulnerabilities/spectre_v2:Vulnerable: Minimal generic ASM retpoline, IBPB, IBRS_FW</code> </pre> </li><li style=";text-align:right;direction:rtl">  ุงูุฎูุงุฏู A ู B <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">/sys/kernel/debug/x86/ibpb_enabled : 1 /sys/kernel/debug/x86/pti_enabled : 1 /sys/kernel/debug/x86/ssbd_enabled : 1 /sys/kernel/debug/x86/ibrs_enabled : 1 /sys/kernel/debug/x86/retp_enabled : 3</code> </pre> </li></ul><br><p style=";text-align:right;direction:rtl">  ุณุฃูุฏู ููุงุญุธุฉ ุฅุถุงููุฉ ุจูุชุงุฆุฌ ุงุฎุชุจุงุฑุงุช ุงูุฎูุงุฏู A ู B ุณูุงุก ุชู ุชูููู ูุฐู ุงูุชุตุญูุญุงุช ุฃู ูุง. </p><br><p style=";text-align:right;direction:rtl">  ุนูู ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุดุฎุตู ุงูุฎุงุต ุจู ูุง ูุชู ุชุบููุฑ ูุณุชูู ุงูุชุตุญูุญ. </p></div></div><br><h2 id="installing-lapps-081" style=";text-align:right;direction:rtl">  ุชุซุจูุช LAppS 0.8.1 </h2><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชุซุจูุช ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ ู LAppS</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุนุชูุฏ LAppS ุนูู luajit-2.0.5 ุฃู ุฃุนูู ุ libcrypto ++ 8.2 ูููุชุจุงุช wolfSSL-3.15.7 ููุฌุจ ุชุซุจูุชูุง ูู ูุตุงุฏุฑ ูู RHEL 7.6 ููู ุงููุญุชูู ูู ุฃู ุชูุฒูุน linux ุขุฎุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงุฏุฆุฉ ุงูุชุซุจูุช ูู / usr / local.  ููุง ูู ุฌุฒุก Dockerfile ุงูุฐุงุชู ุฅูู ุญุฏ ูุจูุฑ ูุชุซุจูุช wolfSSL </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ADD https://github.com/wolfSSL/wolfssl/archive/v3.15.7-stable.tar.gz ${WORKSPACE} RUN tar xzvf v3.15.7-stable.tar.gz WORKDIR ${WORKSPACE}/wolfssl-3.15.7-stable RUN ./autogen.sh RUN ./configure CFLAGS="-pipe -O2 -march=native -mtune=native -fomit-frame-pointer -fstack-check -fstack-protector-strong -mfpmath=sse -msse2avx -mavx2 -ftree-vectorize -funroll-loops -DTFM_TIMING_RESISTANT -DECC_TIMING_RESISTANT -DWC_RSA_BLINDING" --prefix=/usr/local --enable-tls13 --enable-openssh --enable-aesni --enable-intelasm --enable-keygen --enable-certgen --enable-certreq --enable-curve25519 --enable-ed25519 --enable-intelasm --enable-harden RUN make -j40 all RUN make install</code> </pre><br><p style=";text-align:right;direction:rtl">  ูููุง ูู ุงูุฌุฒุก ูุชุซุจูุช libcrypto ++ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ADD https://github.com/weidai11/cryptopp/archive/CRYPTOPP_8_2_0.tar.gz ${WORKSPACE} RUN rm -rf ${WORKSPACE}/cryptopp-CRYPTOPP_8_2_0 RUN tar xzvf ${WORKSPACE}/CRYPTOPP_8_2_0.tar.gz WORKDIR ${WORKSPACE}/cryptopp-CRYPTOPP_8_2_0 RUN make CFLAGS="-pipe -O2 -march=native -mtune=native -fPIC -fomit-frame-pointer -fstack-check -fstack-protector-strong -mfpmath=sse -msse2avx -mavx2 -ftree-vectorize -funroll-loops" CXXFLAGS="-pipe -O2 -march=native -mtune=native -fPIC -fomit-frame-pointer -fstack-check -fstack-protector-strong -mfpmath=sse -msse2avx -mavx2 -ftree-vectorize -funroll-loops" -j40 libcryptopp.a libcryptopp.so RUN make install</code> </pre><br><p style=";text-align:right;direction:rtl">  ู luajit </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ADD http://luajit.org/download/LuaJIT-2.0.5.tar.gz ${WORKSPACE} WORKDIR ${WORKSPACE} RUN tar xzvf LuaJIT-2.0.5.tar.gz WORKDIR ${WORKSPACE}/LuaJIT-2.0.5 RUN env CFLAGS="-pipe -Wall -pthread -O2 -fPIC -march=native -mtune=native -mfpmath=sse -msse2avx -mavx2 -ftree-vectorize -funroll-loops -fstack-check -fstack-protector-strong -fno-omit-frame-pointer" make -j40 all RUN make install</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุญุฏู ุงูุชุจุนูุงุช ุงูุงุฎุชูุงุฑูุฉ ูู LAppS ุ ูุงูุชู ูุฏ ูุชู ุชุฌุงูููุง ุ ูู ุงูููุชุจุฉ ุงูุฌุฏูุฏุฉ ูู Microsoft <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">mimalloc</a> .  ุชุญูู ูุฐู ุงูููุชุจุฉ ุชุญุณูููุง ูุจูุฑูุง ูู ุงูุฃุฏุงุก (ุญูุงูู 1ูช) ูููููุง ุชุชุทูุจ cmake-3.4 ุฃู ุฃุนูู.  ุจุงููุธุฑ ุฅูู ููุฏุงุฑ ุงูููุช ุงููุญุฏูุฏ ููุงุฎุชุจุงุฑุงุช ุ ููุฏ ูุฑุฑุช ุงูุชุถุญูุฉ ุจุชุญุณูู ุงูุฃุฏุงุก ุงููุฐููุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุนูู ุฌูุงุฒ ุงูููุจููุชุฑ ุงูููุฒูู ุงูุฎุงุต ุจู ุ ูู ุฃููู ุจุชุนุทูู <em>mimalloc</em> ุฃุซูุงุก ุงูุงุฎุชุจุงุฑุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูุชูุญ ุงูุฎุฑูุฌ LAPSS ูู ุงููุณุชูุฏุน: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">WORKDIR ${WORKSPACE} RUN rm -rf ITCLib ITCFramework lar utils LAppS RUN git clone https://github.com/ITpC/ITCLib.git RUN git clone https://github.com/ITpC/utils.git RUN git clone https://github.com/ITpC/ITCFramework.git RUN git clone https://github.com/ITpC/LAppS.git RUN git clone https://github.com/ITpC/lar.git WORKDIR ${WORKSPACE}/LAppS</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญุชุงุฌ ุงูุขู ุฅูู ุฅุฒุงูุฉ "-lmimalloc" ูู ุฌููุน Makefiles ูู ุงูุฏููู ุงููุฑุนู <strong>nbproject</strong> ุ ุญุชู ูุชููู ูู ุฅูุดุงุก LAppS (ุนูู ุงูุชุฑุงุถ ุฃู ุฏููููุง ุงูุญุงูู ูู $ {WORKSPACE} / LAppS) </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># find ./nbproject -type f -name "*.mk" -exec sed -i.bak -e 's/-lmimalloc//g' {} \; # find ./nbproject -type f -name "*.bak" -exec rm {} \;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงูุขู ูููููุง ุจูุงุก LAppS.  ูููุฑ LAppS ุนุฏุฉ ุชููููุงุช ุจูุงุก ุ ูุงูุชู ูุฏ ุชุณุชุจุนุฏ ุฃู ูุง ุชุณุชุจุนุฏ ุจุนุถ ุงูููุฒุงุช ุนูู ุฌุงูุจ ุงูุฎุงุฏู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุน ุฏุนู ุทุจูุฉ ุงูููุงุจุณ ุงูุขููุฉ ููุน ุฌูุน ุฅุญุตุงุกุงุช ุงูุฏุนู </li><li style=";text-align:right;direction:rtl">  ูุน ุทุจูุฉ ุงูููุงุจุณ ุงูุขููุฉ (SSL) ูุจุฏูู ุชุฌููุน ุงูุฅุญุตุงุกุงุช (ุนูู ุงูุฑุบู ูู ุฃู ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุฅุญุตุงุฆูุงุช ุณูู ูุณุชูุฑ ูุฃูู ูุณุชุฎุฏู ูุถุจุท LAppS ุงูุฏููุงูููู ูู ููุช ุงูุชุดุบูู) </li><li style=";text-align:right;direction:rtl">  ุจุฏูู SSL ูุฏูู ุชุฌูุน ุฅุญุตุงุฆู. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุจู ุงูุฎุทูุฉ ุงูุชุงููุฉ ุ ุชุฃูุฏ ูู ุฃูู ูุงูู ุฏููู / opt / lapps (ุฃู ูู ุจุฅุฌุฑุงุก ุนูููุงุช ุงูุชุซุจูุช ูุน sudo) </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุฌุนู ููุนูู ูู ุงูุซูุงุฆูุงุช ูุน ุฏุนู ุทุจูุฉ ุงูููุงุจุณ ุงูุขููุฉ ูุฌูุน ุงูุฅุญุตุงุฆูุงุช ูุจุฏูู (ุนูู ุงูุชุฑุงุถ ุฃููุง ุฏุงุฎู ุฏููู $ {WORKSPACE} / LAppS): </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># make clean # make CONF=Release.AVX2 install # make CONF=Release.AVX2.NO_STATS.NO_TLS install</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุซูุงุฆูุงุช ุงููุงุชุฌุฉ ูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  dist / Release.AVX2 / GNU-Linux / lapps.avx2 </li><li style=";text-align:right;direction:rtl">  dist / Release.AVX2.NO_STATS.NO_TLS / GNU-Linux / lapps.avx2.nostats.notls </li></ul><br><p style=";text-align:right;direction:rtl">  ุณูุชู ุชุซุจูุชูุง ูู / opt / lapps / bin. </p><br><p style=";text-align:right;direction:rtl">  ูุฑุฌู ููุงุญุธุฉ ุฃู ูุญุฏุฉ ุนููู WebSockets ูู Lua ูุตููุฉ ุฏุงุฆููุง ุจุฏุนู SSL.  ูุนุชูุฏ ุชููููู ุฃู ุนุฏูู ุนูู URI ุงูุฐู ุชุณุชุฎุฏูู ููุงุชุตุงู (ws: // ุฃู wss: //) ูู ููุช ุงูุชุดุบูู. </p></div></div><br><h2 id="test-1-top-performance-on-home-pc-configuration-for-baseline" style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ 1. ุฃุนูู ุฃุฏุงุก ุนูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงูููุฒููุฉ.  ุงูุชูููู ูุฎุท ุงูุฃุณุงุณ. </h2><br><p style=";text-align:right;direction:rtl">  ููุฏ ุฃุซุจุชุช ุจุงููุนู ุฃููู ุฃุญุตู ุนูู ุฃูุถู ุฃุฏุงุก ุนูุฏูุง ุฃููู ุจุชูููู ุฃุฑุจุนุฉ ูุซููุงุช ุฎุฏูุฉ ููุงุณูุฉ ูุน 100 ุงุชุตุงู ููู ูููุง.  ูู ุงูููุช ููุณู ุ ุฃุญุชุงุฌ ุฅูู ุซูุงุซ ุญุงูุงุช ููุท ูุฎุฏูุฉ IOWorkers ูุฃุฑุจุนุฉ ุตุฏู ูุชุญููู ุฃูุถู ุฃุฏุงุก.  ุชุฐูุฑุ  ูุฏู ููุท 4 ุงูููู ููุง. </p><br><p style=";text-align:right;direction:rtl">  ุงูุบุฑุถ ูู ูุฐุง ุงูุงุฎุชุจุงุฑ ูู ููุท ูุถุน ุฎุท ุงูุฃุณุงุณ ููุฒูุฏ ูู ุงูููุงุฑูุฉ.  ูุง ุดูุก ูุซูุฑ ููุง ุญูุง. </p><br><p style=";text-align:right;direction:rtl">  ุฑูุน ุงูุตูุช ุนุงููุง ูู ุงูุฎุทูุงุช ุงููุงุฒูุฉ ูุชูููู LAppS ููุงุฎุชุจุงุฑุงุช. </p><br><h3 id="self-signed-certificates" style=";text-align:right;direction:rtl">  ุดูุงุฏุงุช ูููุนุฉ ุฐุงุชูุง </h3><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงููุตู certgen.sh</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash openssl genrsa -out example.org.key 2048 openssl req -new -key example.org.key -out example.org.csr openssl genrsa -out ca.key 2048 openssl req -new -x509 -key ca.key -out ca.crt openssl x509 -req -in example.org.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out example.org.crt cat example.org.crt ca.crt &gt; example.org.bundle.crt</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุณูุคุฏู ุชุดุบูู ูุฐุง ุงูุจุฑูุงูุฌ ุงููุตู ูู ุฏุงุฎู ุงูุฏููู / opt / lapps / conf / ssl ุฅูู ุฅูุดุงุก ุฌููุน ุงููููุงุช ุงููุทููุจุฉ.  ูููุง ููู ุฅุฎุฑุงุฌ ุงูุจุฑูุงูุฌ ุงููุตู ููุง ูุชุจุชู: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">certgen.sh ุงูุฅุฎุฑุงุฌ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"># certgen.sh Generating RSA private key, 2048 bit long modulus .................................................................................................................................................................+++++ .....................................+++++ e is 65537 (0x010001) You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:KZ State or Province Name (full name) [Some-State]:none Locality Name (eg, city) []:Almaty Organization Name (eg, company) [Internet Widgits Pty Ltd]:NOORG.DO.NOT.FORGET.TO.REMOVE.FROM.BROWSER Organizational Unit Name (eg, section) []: Common Name (eg server FQDN or YOUR name) []: Email Address []: Please enter the following 'extra' attributes to be sent with your certificate request A challenge password []: An optional company name []: Generating RSA private key, 2048 bit long modulus ...+++++ ............................................................................+++++ e is 65537 (0x010001) You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:KZ State or Province Name (full name) [Some-State]:none Locality Name (eg, city) []:Almaty Organization Name (eg, company) [Internet Widgits Pty Ltd]:none Organizational Unit Name (eg, section) []: Common Name (eg server FQDN or YOUR name) []:*.example.org Email Address []: Signature ok subject=C = KZ, ST = none, L = Almaty, O = NOORG.DO.NOT.FORGET.TO.REMOVE.FROM.BROWSER Getting CA Private Key</code> </pre> </div></div><br><h3 id="lapps-configuration" style=";text-align:right;direction:rtl">  ุงูุชูููู LAPSS </h3><br><p style=";text-align:right;direction:rtl">  ูููุง ููู ููู ุชูููู WebSockets ุงูุฐู ุชู ุชุนูููู ูู TLS 1.3 ุ ููุชุถูู ุงูุดูุงุฏุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ุฃุนูุงู ูุชู ุชููุฆุชู ุจุงุณุชุฎุฏุงู 3 IOWorkers (ุงูุธุฑ ุงููุตู ุงูุชูุตููู ูููุชุบูุฑุงุช ูู ูููู LAppS). </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">/opt/lapps/etc/conf/ws.json</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"listeners"</span></span> : <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"connection_weight"</span></span>: <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ip"</span></span> : <span class="hljs-string"><span class="hljs-string">"0.0.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"port"</span></span> : <span class="hljs-number"><span class="hljs-number">5083</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lapps_config_auto_save"</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span> , <span class="hljs-attr"><span class="hljs-attr">"workers"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"workers"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_connections"</span></span> : <span class="hljs-number"><span class="hljs-number">40000</span></span>, <span class="hljs-attr"><span class="hljs-attr">"auto_fragment"</span></span> : <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_poll_events"</span></span> : <span class="hljs-number"><span class="hljs-number">256</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_poll_wait_ms"</span></span> : <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_inbounds_skip"</span></span> : <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-attr"><span class="hljs-attr">"input_buffer_size"</span></span> : <span class="hljs-number"><span class="hljs-number">2048</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"acl"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"policy"</span></span> : <span class="hljs-string"><span class="hljs-string">"allow"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"exclude"</span></span> : [] }, <span class="hljs-attr"><span class="hljs-attr">"tls"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tls_server_version"</span></span> : <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tls_client_version"</span></span> : <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tls_certificates"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"ca"</span></span>:<span class="hljs-string"><span class="hljs-string">"/opt/lapps/conf/ssl/ca.crt"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"cert"</span></span>: <span class="hljs-string"><span class="hljs-string">"/opt/lapps/conf/ssl/example.org.bundle.crt"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"key"</span></span>: <span class="hljs-string"><span class="hljs-string">"/opt/lapps/conf/ssl/example.org.key"</span></span> } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุชูููู ุงูุฎุฏูุงุช: ุฎุงุฏู ุงูุงุฑุชุฏุงุฏ ูุนููู ุงูุงุฑุชุฏุงุฏ (ูุนูุงุฑ) ุ ูููู ูููุง ุฃุฑุจุน ุญุงูุงุช. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">/opt/lapps/etc/conf/lapps.json</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"directories"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"app_conf_dir"</span></span>: <span class="hljs-string"><span class="hljs-string">"etc"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"applications"</span></span>: <span class="hljs-string"><span class="hljs-string">"apps"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deploy"</span></span>: <span class="hljs-string"><span class="hljs-string">"deploy"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tmp"</span></span>: <span class="hljs-string"><span class="hljs-string">"tmp"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"workdir"</span></span>: <span class="hljs-string"><span class="hljs-string">"workdir"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"services"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"echo"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"auto_start"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"instances"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"internal"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_inbound_message_size"</span></span>: <span class="hljs-number"><span class="hljs-number">16777216</span></span>, <span class="hljs-attr"><span class="hljs-attr">"protocol"</span></span>: <span class="hljs-string"><span class="hljs-string">"raw"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"request_target"</span></span>: <span class="hljs-string"><span class="hljs-string">"/echo"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"acl"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"policy"</span></span> : <span class="hljs-string"><span class="hljs-string">"allow"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"exclude"</span></span> : [] } }, <span class="hljs-attr"><span class="hljs-attr">"benchmark"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"auto_start"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"instances"</span></span> : <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"internal"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"preload"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"nap"</span></span>, <span class="hljs-string"><span class="hljs-string">"cws"</span></span>, <span class="hljs-string"><span class="hljs-string">"time"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"depends"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"echo"</span></span> ] } } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุฎุฏูุฉ ุงูุตุฏู ุชุงููุฉ ููุบุงูุฉ: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุตุฏู ุฑูุฒ ูุตุฏุฑ ุงูุฎุฏูุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="lua hljs">echo = {} echo.<span class="hljs-built_in"><span class="hljs-built_in">__index</span></span> = echo; echo.onStart=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"echo::onStart"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> echo.onDisconnect=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> echo.onShutdown=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"echo::onShutdown()"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> echo.onMessage=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(handler,opcode, message)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> result, errmsg=ws:send(handler,opcode,message); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">not</span></span> result) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"echo::OnMessage(): "</span></span>..errmsg); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> echo</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุชูุดุฆ ุงูุฎุฏูุฉ ุงููุนูุงุฑูุฉ ูุง ูุตู ุฅูู <strong>benchmark.max_connections</strong> ุฅูู <strong>benchmark.target</strong> ุซู ุชุนูู ููุท ุญุชู ุชููู LAppS.  ูุง ููุฌุฏ ุชููู ูู ุฅูุดุงุก ุงูุฑูุงุจุท ุฃู ุทูุจ ุตุฏู ุงููุตู.  ุชุดุจู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุญุฏุฉ cws ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุงูููุจ ูู WebSockets.  ุจูุฌุฑุฏ ุฅูุดุงุก ุฌููุน ุฃุฌูุฒุฉ <strong>ุงูููุงุณ ุงูููุงุณูุฉ</strong> ุ ูููู ุงููุคุดุฑ ุจุทุจุงุนุฉ ูููุฉ ุงูููุงุจุณ ุงููุชุตูุฉ.  ุจูุฌุฑุฏ ุฅูุดุงุก ุงูุงุชุตุงู ุ ูุฑุณู <strong>ุงููุนูุงุฑ benchmark.message</strong> ุฅูู ุงูุฎุงุฏู.  ุจุนุฏ ุฃู ูุฑุฏ ุงูุฎุงุฏู ุ ูุชู <strong>ุงุณุชุฏุนุงุก</strong> ุทุฑููุฉ <strong>onmessage</strong> ุงููุฌูููุฉ <strong>ููุงุฆู cws</strong> ุ ูุงูุชู ุชุฑุณู ุงูุฑุณุงูุฉ ููุณูุง ูุฑุฉ ุฃุฎุฑู ุฅูู ุงูุฎุงุฏู. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฑูุฒ ูุตุฏุฑ ุงูุฎุฏูุฉ ุงููุนูุงุฑู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="lua hljs">benchmark={} benchmark.<span class="hljs-built_in"><span class="hljs-built_in">__index</span></span>=benchmark benchmark.init=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> benchmark.messages_counter=<span class="hljs-number"><span class="hljs-number">0</span></span>; benchmark.start_time=<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>.now(); benchmark.max_connections=<span class="hljs-number"><span class="hljs-number">100</span></span>; benchmark.target=<span class="hljs-string"><span class="hljs-string">"wss://127.0.0.1:5083/echo"</span></span>; benchmark.message=<span class="hljs-string"><span class="hljs-string">"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span></span>; benchmark.meter=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> benchmark.messages_counter=benchmark.messages_counter+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> slice=<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>.now() - benchmark.start_time; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( slice &gt;= <span class="hljs-number"><span class="hljs-number">1000</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(benchmark.messages_counter..<span class="hljs-string"><span class="hljs-string">" messages received per "</span></span>..slice..<span class="hljs-string"><span class="hljs-string">"ms"</span></span>) benchmark.messages_counter=<span class="hljs-number"><span class="hljs-number">0</span></span>; benchmark.start_time=<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>.now(); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> benchmark.run=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> n=nap:new(); <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> counter=<span class="hljs-number"><span class="hljs-number">1</span></span>; n:sleep(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> array={}; <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> start=<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>.now(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(#array &lt; benchmark.max_connections) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">not</span></span> must_stop()) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> sock, err_msg=cws:new(benchmark.target, { onopen=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(handler)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> result, errstr=cws:send(handler,benchmark.message,<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">not</span></span> result) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Error on websocket send at handler "</span></span>..handler..<span class="hljs-string"><span class="hljs-string">": "</span></span>..errstr); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, onmessage=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(handler,message,opcode)</span></span></span></span> benchmark.meter(); cws:send(handler,message,opcode); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, onerror=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(handler, message)</span></span></span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Client WebSocket connection is failed for socketfd "</span></span>..handler..<span class="hljs-string"><span class="hljs-string">". Error: "</span></span>..message); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, onclose=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(handler)</span></span></span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Connection is closed for socketfd "</span></span>..handler); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(sock ~= <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">table</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">insert</span></span>(array,sock); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(err_msg); err_msg=<span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">collectgarbage</span></span>(<span class="hljs-string"><span class="hljs-string">"collect"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-comment"><span class="hljs-comment">-- poll events once per 10 outgoing connections -- this will improve the connection establishment speed if counter == 10 then cws:eventLoop(); counter=1 else counter = counter + 1; end end print("Sockets connected: "..#array); benchmark.start_time=time.now(); while not must_stop() do cws:eventLoop(); end for i=1,#array do array[i]:close(); cws:eventLoop(); end end return benchmark;</span></span></code> </pre> </div></div><br><h3 id="services-installation" style=";text-align:right;direction:rtl">  ุชุฑููุจ ุงูุฎุฏูุงุช </h3><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุญุชุงุฌ ุฅูู ูุถุน ุงูุจุฑุงูุฌ ุงููุตูุฉ ููุฎุฏูุฉ ูู /opt/lapps/apps//.lua: <br></p><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  /opt/lapps/apps/benchmark/benchmark.lua </li><li style=";text-align:right;direction:rtl">  /opt/lapps/apps/echo/echo.lua </li></ul><br><p style=";text-align:right;direction:rtl">  ูุญู ุนูู ุงุณุชุนุฏุงุฏ ูุชุดุบูู ูุนูุงุฑูุง ุงูุขู.  ูุฌุฑุฏ ุชุดุบูู: <code>rm -f lapps.log; /opt/lapps/bin/lapps.avx2 &gt; log</code>  <code>rm -f lapps.log; /opt/lapps/bin/lapps.avx2 &gt; log</code> ูู ุฏุงุฎู ุฏููู LAppS ูุงูุชุธุฑ ููุฏุฉ 5 ุฏูุงุฆู ุ ุซู ุงุถุบุท ุนูู Ctrl-C ูุฑุฉ ูุงุญุฏุฉ ุ ูุฅููุงู LAppS (ูู ุชุชููู ุนูู ุงูููุฑ ุ ุณุชุบูู ุงูุงุชุตุงูุงุช ุฃููุงู) ุ ุฃู ูุฑุชูู (ุณูุคุฏู ุฐูู ุฅูู ููุงุทุนุฉ ุชุณูุณู ุฅููุงู ุงูุชุดุบูู). </p><br><p style=";text-align:right;direction:rtl">  ุญุณููุง ุ ูุฏููุง ููู ูุตู ูุญุชูู ุนูู ุดูุก ูู ูุฐุง ุงููุจูู ุฏุงุฎู: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงููุงุชุฌ ุงูููุงุณู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุตุฏู :: onStart <br>  ุตุฏู :: onStart <br>  ุตุฏู :: onStart <br>  ุตุฏู :: onStart <br>  ุชุดุบูู <br>  ุชููู 1 ุฑุณุงุฆู ููู 3196ms <br>  ุชููู 1 ุฑุณุงุฆู ููู 3299ms <br>  ุชููู 1 ุฑุณุงุฆู ููู 3299ms <br>  ุชููู 1 ุฑุณุงุฆู ููู 3305ms <br>  ูุขุฎุฐ ุชูุตูู: 100 <br>  ูุขุฎุฐ ุชูุตูู: 100 <br>  ูุขุฎุฐ ุชูุตูู: 100 <br>  ูุขุฎุฐ ุชูุตูู: 100 <br>  ุชููู 134597 ุฑุณุงูุฉ ููู 1000ms <br>  ุชููู 139774 ุฑุณุงูุฉ ููู 1000ms <br>  ุชููู 138521 ุฑุณุงูุฉ ููู 1000ms <br>  ุชููู 139404 ุฑุณุงูุฉ ููู 1000 ูููู ุซุงููุฉ <br>  ุชููู 140162 ุฑุณุงูุฉ ููู 1000ms <br>  ุชููู 139337 ุฑุณุงูุฉ ููู 1000ms <br>  140088 ุฑุณุงูุฉ ูุฑุฏุช ููู 1000ms <br>  ุชููู 139946 ุฑุณุงูุฉ ููู 1000ms <br>  ุชููู 141204 ุฑุณุงูุฉ ููู 1000ms <br>  ุชููู 137988 ุฑุณุงูุฉ ููู 1000ms <br>  ุชููู 141805 ุฑุณุงูุฉ ููู 1000ms <br>  ุชููู 134733 ุฑุณุงูุฉ ููู 1000ms <br>  ... </p></div></div><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ุชูุธูู ููู ุงูุณุฌู ูุฐุง ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> -e <span class="hljs-string"><span class="hljs-string">':%s/ms/^V^M/g\n:%g/^$/d\nGdd1G4/Sockets\n4\ndggZZ'</span></span> | vi <span class="hljs-variable"><span class="hljs-variable">$i</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  '^ V ^ M' ูู ุชูุซูู ูุฑุฆู ููููุงุท ุงูุฑุฆูุณูุฉ ุงูุชุงููุฉ: Ctrl-V Ctrl-V Ctrl-V Ctrl-M ุ ูุฐูู ุณูููู ูู ุบูุฑ ุงููุฌุฏู ุฃู ุชููู ููุท ุจูุณุฎ ูุตู ุฎุท bash ูุฐุง.  ุดุฑุญ ูุตูุฑ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุชุนูู ุนูููุง ุงุณุชุจุฏุงู ุฑููุฒ "ms" ุจููุงูุฉ ุงูุณุทุฑ ุ ูุฃููุง ูุณูุง ูู ุญุงุฌุฉ ุฅูููุง ุ ูุณูู ุชูุณุฏ ุงูุญุณุงุจุงุช ูู ููุช ูุงุญู ุ ููุฏ ุชุทุจุน 4 ูุนุงููุฑ ุชุนูู ุนูู ุงูุชูุงุฒู ูุชุงุฆุฌูุง ูู ุณุทุฑ ูุงุญุฏ. </li><li style=";text-align:right;direction:rtl">  ูุญู ุจุญุงุฌุฉ ุฅูู ุฅุฒุงูุฉ ุฌููุน ุงูุฎุทูุท ุงููุงุฑุบุฉ ุจุนุฏ ุฐูู </li><li style=";text-align:right;direction:rtl">  ูุฒูู ุงูุณุทุฑ ุงูุฃุฎูุฑ ุฃูุถูุง ุ ูุฃููุง ุชููู ุงูุฎุงุฏู </li><li style=";text-align:right;direction:rtl">  ูู ููู <strong>ุงูุณุฌู ุ</strong> ูู ูููู ููุงู ุณูู ุฎุทูุท ุฃูุงููุฉ ุชุชููู ูู <em>ูุขุฎุฐ ุชูุตูู ูุชุตูุฉ: 100</em> (ูุฃููุง ูููู ุจุชุดุบูู ุฃุฑุจุน ุฎุฏูุงุช ูุฑุฌุนูุฉ ููุท).  ูุฐุง ุ ูุฅููุง ูุชุฎุทู 4 ุฃุณุทุฑ ุจุนุฏ ุขุฎุฑูุง ุ ููู ุฅุฒุงูุฉ ูู ุดูุก ุฅูู ุฃุนูู ุงูููู. </li><li style=";text-align:right;direction:rtl">  ุญูุธ ุงูููู. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุชู ุญูุธ ุงูููู ููุฏ ุนุฏุช ุฅูู ุงููุฑุงุก ุงูุขู ุ ูููู ุงูุณุฌู ุฌุงูุฒ ููุฎุทูุฉ ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># awk -v avg=0 '{rps=($1/$5);avg+=rps;}END{print ((avg*1000)/NR)*4}' log</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง awk ุฃุญุงุฏู ุงูุทุจูุฉ ูุญุณุจ ููุฏุงุฑ ุฑุฏูุฏ ุงูุตุฏู ููู ูููู ุซุงููุฉ ุ ููุฌูุน ุงููุชูุฌุฉ ูู <em>ูุชูุณุท</em> ูุชุบูุฑ.  ุจุนุฏ ุฃู ุชุชู ูุนุงูุฌุฉ ุฌููุน ุงูุฃุณุทุฑ ุงูููุฌูุฏุฉ ูู ููู ุงูุณุฌู ุ ูุชุถุงุนู <em>ูุชูุณุท โโุงูุนุฏุฏ</em> ุฅูู 1000 ููุญุตูู ุนูู ุงููุจูุบ ุงูุฅุฌูุงูู ูุงุณุชุฌุงุจุงุช ุงูุตุฏู ูู ุงูุซุงููุฉ ุ ููุณูููุง ุนูู ุนุฏุฏ ุงูุฎุทูุท ููุถุงุนูุฉ ุนุฏุฏ ุงูุฎุฏูุงุช ุงููุฑุฌุนูุฉ.  ูุฐุง ูุนุทููุง ูุชูุณุท โโุนุฏุฏ ุงุณุชุฌุงุจุงุช ุงูุตุฏู ูู ุงูุซุงููุฉ ูุชุดุบูู ุงูุงุฎุชุจุงุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุนูู ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจู ุ ูุฐุง ุงูุฑูู (ERps) ูู: <strong>563854</strong> </p><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ููุนู ุงูุดูุก ููุณู ุฏูู ุฏุนู ุทุจูุฉ ุงูููุงุจุณ ุงูุขููุฉ ููุฑู ุงููุฑู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุบููุฑ ูููุฉ <strong>tls</strong> ูู ws.json ุฅูู false </li><li style=";text-align:right;direction:rtl">  ุชุบููุฑ <strong>benchmark.target</strong> ูู benchmark.lua ูู wss: // ุฅูู ws: // </li><li style=";text-align:right;direction:rtl">  ุชุดุบูู <code>rm -f lapps.log; /opt/lapps/bin/lapps.avx2.nostats.notls &gt; log</code>  <code>rm -f lapps.log; /opt/lapps/bin/lapps.avx2.nostats.notls &gt; log</code> ูู ุฏุงุฎู ุฏููู LAppS ุ ููุฑุฑ ุงูุฎุทูุงุช ุฃุนูุงู. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุฏู: <strong>721236</strong> ุฑุฏูุฏ ูู ุงูุซุงููุฉ ุงููุงุญุฏุฉ </p><br><p style=";text-align:right;direction:rtl">  ุงููุฑู ูู ุงูุฃุฏุงุก ูุน SSL ูุจุฏูู SSL ูู ุญูุงูู 22 ูช.  ุฏุนููุง ูุถุน ูุฐู ุงูุฃุฑูุงู ูู ุงูุงุนุชุจุงุฑ ููุฑุฌูุน ุฅูููุง ูุณุชูุจูุงู. </p><br><p style=";text-align:right;direction:rtl">  ูุน ููุณ ุงูุฅุนุฏุงุฏ ุนูู Server A ุ ูุฏู: <strong>421905</strong> ERpS ูุน SSL ู <strong>443145</strong> ERpS ุจุฏูู SSL.  ุชู ุชุนุทูู ุชุตุญูุญุงุช Specter ู Meltdown. <br>  ุนูู ุงูุฎุงุฏู B ุ ูุฏู <strong>270996</strong> ERpS ูุน SSL ู <strong>318522</strong> ERpS ุจุฏูู SSL ูุน ุชูููู ุงูุชุตุญูุญุงุช.  <strong>385726</strong> ู <strong>372126</strong> ุจุฏูู ููุน SSL.  ุชู ุชุนุทูู ุชุตุญูุญุงุช Specter ู Meltdown ุฃูุถูุง. </p><br><p style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ ุฃุณูุฃ ูุน ููุณ ุงูุฅุนุฏุงุฏ ูุฃู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุนูู ูุฐู ุงูุฎูุงุฏู ููุง ุชุฑุฏุฏ ุฃูู. </p><br><p style=";text-align:right;direction:rtl">  ูุฑุฌู ุงูุงูุชุจุงู ุฅูู ุฃู ุงูุนููุงุก ูุนุชูุฏูู ุจุดุฏุฉ ุนูู ุชููุฑ ุงูุจูุงูุงุช ูู / dev / urandom.  ูุฏ ูุณุชุบุฑู ุงูุฃูุฑ ุจุนุถ ุงูููุช ุญุชู ูุจุฏุฃ ุงูุนููุงุก ุจุงููุนู ูู ุงูุชุดุบูู ุ ุฅุฐุง ููุช ุจุชุดุบููู ุจุงููุนู ูุฑุฉ ูุงุญุฏุฉ.  ูุฐุง ุ ุงูุชุธุฑ ุญุชู ูุจุฏุฃูุง ุงูุนูู ุ ุซู ูุตูููู ุจุณุฑุนุฉ ูููุง ููุนููู.  ููุท ูู ุจูุฑุงูุจุฉ ูุง ุฅุฐุง ูุงูุช ูุซููุงุช LAppS ุชููู ุจุฃู ุนูู ุนูู ุงูุฅุทูุงู.  ุฅุฐุง ุชู ุงุณุชููุงุฏ / dev / urandom ูุฅู LAppS ูู ุชุฃูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงูุฎุงุตุฉ ุจู ุญุชู ุชุชููุฑ ุจุนุถ ุงูุจูุงูุงุช. </p><br><h1 id="preparing-for-big-tests" style=";text-align:right;direction:rtl">  ุงูุชุญุถูุฑ ููุงุฎุชุจุงุฑุงุช ุงููุจูุฑุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุฅุฌุฑุงุก ุจุนุถ ุงูุชุบููุฑุงุช ูู ูุนููุงุช kernel ููุง ุชูุณู ulimit ูู nr ูู ุงููููุงุช ุงูููุชูุญุฉ.  ุงุนุชุฏุช ุชูุฑูุจุง ููุณ ุงูุฅุนุฏุงุฏ ููุง ูู ุงูุญุงู ูู ูุฐู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงูุฉ</a> . </p><br><p style=";text-align:right;direction:rtl">  ูู ุจุฅูุดุงุก ููู ุจุงููุญุชูู ุงูุชุงูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">: sysctl -w fs.file-max=14000000 sysctl -w fs.nr_open=14000000 <span class="hljs-built_in"><span class="hljs-built_in">ulimit</span></span> -n 14000000 sysctl -w net.ipv4.tcp_mem=<span class="hljs-string"><span class="hljs-string">"100000000 100000000 100000000"</span></span> sysctl -w net.core.somaxconn=20000 sysctl -w net.ipv4.tcp_max_syn_backlog=20000 sysctl -w net.ipv4.ip_local_port_range=<span class="hljs-string"><span class="hljs-string">"1025 65535"</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุซู ุงุณุชุฎุฏู <em>ุงููุตุฏุฑ ./filename</em> ุนูู ููุง ุงูุฎุงุฏููู ูุชุบููุฑ ูุนููุงุช kernel ู ulimit. </p><br><p style=";text-align:right;direction:rtl">  ูุฏูู ูุฐู ุงููุฑุฉ ูู ุฅูุดุงุก ุนุฏุฉ ููุงููู ูู ุงูุนููุงุก ุนูู ุฎุงุฏู ูุงุญุฏ ูุฑุจุทูู ุจุงูุฎุงุฏู ุงูุซุงูู. </p><br><p style=";text-align:right;direction:rtl">  ุณูููู ุงูุฎุงุฏู A ุจูุซุงุจุฉ ุฌุงูุจ ุฎุงุฏู ุฎุฏูุฉ WebSockets echo. <br>  ุณูููู ุงูุฎุงุฏู B ุจูุซุงุจุฉ ุฌุงูุจ ุนููู ุฎุฏูุฉ ุตุฏู WebSockets. </p><br><p style=";text-align:right;direction:rtl">  ููุฌุฏ ููุฏ ูู LAppS ุชูุฑุถู LuaJIT.  ููููู ุงุณุชุฎุฏุงู ุฐุงูุฑุฉ ูุตูู ุนุดูุงุฆู (RAM) ุณุนุฉ 2 ุฌูุฌุงุจุงูุช ููุท ููู ุฌูุงุฒ LuaJIT VM.  ูุฐุง ูู ุงูุญุฏ ุงูุฃูุตู ูุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุงูุชู ููููู ุงุณุชุฎุฏุงููุง ุถูู ูุซูู LAppS ูุงุญุฏ ูุฌููุน ุงูุฎุฏูุงุช ุ ุญูุซ ุฃู ุงูุฎุฏูุงุช ูู ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุงููุฑุชุจุทุฉ ุจูุซูู libluajit ูุงุญุฏ.  ุฅุฐุง ุชุฌุงูุฒุช ุฃู ูู ุฎุฏูุงุชู ุงูุชู ุชุนูู ุชุญุช ูุซูู LAppS ุงููุฑุฏู ูุฐุง ุงูุญุฏ ุ ูุณุชููู ุฌููุน ุงูุฎุฏูุงุช ุฎุงุฑุฌ ุงูุฐุงูุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุชุดูุช ุฃูู ููู ูุซูู LAppS ูุง ููููู ุฅูุดุงุก ุฃูุซุฑ ูู 2 464000 ุนููู WebSockets ุจุญุฌู ุฑุณุงูุฉ ูุจูุบ 64 ุจุงูุช.  ูุฏ ูุบูุฑ ุญุฌู ุงูุฑุณุงูุฉ ูุฐุง ุงูุญุฏ ููููุงู ุ ูุฃู LAppS ุชููู ุจุชูุฑูุฑ ุงูุฑุณุงูุฉ ุฅูู ุฎุฏูุฉ cws ุนู ุทุฑูู ุชุฎุตูุต ูุณุงุญุฉ ููุฐู ุงูุฑุณุงูุฉ ุฏุงุฎู LuaJIT. </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูุนูู ุฃูู ูุฌุจ ุนูู ุจุฏุก ุนุฏุฉ ูุซููุงุช LAppS ุจููุณ ุงูุชูููู ุนูู Server B ูุฅูุดุงุก ุฃูุซุฑ ูู 2.4 ููููู WebSockets.  ูุง ูุณุชุฎุฏู Server A (ุฎุงุฏู ุงูุงุฑุชุฏุงุฏ) ุฃูุจุฑ ูุฏุฑ ูููู ูู ุงูุฐุงูุฑุฉ ุนูู ุฌุงูุจ LuaJIT ุ ูุจุงูุชุงูู ูุฅู ูุซูู LAPSS ุณูู ูุชููู 12.3 ููููู ูู WebSockets ุฏูู ุฃู ูุดููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุนุฏ ุฅุนุฏุงุฏูู ูุฎุชูููู ููุฎูุงุฏู A ู B. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฎุงุฏู ู ws.json</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"listeners"</span></span> : <span class="hljs-number"><span class="hljs-number">224</span></span>, <span class="hljs-attr"><span class="hljs-attr">"connection_weight"</span></span>: <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ip"</span></span> : <span class="hljs-string"><span class="hljs-string">"0.0.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"port"</span></span> : <span class="hljs-number"><span class="hljs-number">5084</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lapps_config_auto_save"</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span> , <span class="hljs-attr"><span class="hljs-attr">"workers"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"workers"</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_connections"</span></span> : <span class="hljs-number"><span class="hljs-number">2000000</span></span>, <span class="hljs-attr"><span class="hljs-attr">"auto_fragment"</span></span> : <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_poll_events"</span></span> : <span class="hljs-number"><span class="hljs-number">256</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_poll_wait_ms"</span></span> : <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_inbounds_skip"</span></span> : <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-attr"><span class="hljs-attr">"input_buffer_size"</span></span> : <span class="hljs-number"><span class="hljs-number">2048</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"acl"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"policy"</span></span> : <span class="hljs-string"><span class="hljs-string">"allow"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"exclude"</span></span> : [] }, <span class="hljs-attr"><span class="hljs-attr">"tls"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tls_server_version"</span></span> : <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tls_client_version"</span></span> : <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tls_certificates"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"ca"</span></span>:<span class="hljs-string"><span class="hljs-string">"/opt/lapps/conf/ssl/ca.crt"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"cert"</span></span>: <span class="hljs-string"><span class="hljs-string">"/opt/lapps/conf/ssl/example.org.bundle.crt"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"key"</span></span>: <span class="hljs-string"><span class="hljs-string">"/opt/lapps/conf/ssl/example.org.key"</span></span> } }</code> </pre> </div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฎุงุฏู ู lapps.json</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"directories"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"app_conf_dir"</span></span>: <span class="hljs-string"><span class="hljs-string">"etc"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"applications"</span></span>: <span class="hljs-string"><span class="hljs-string">"apps"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deploy"</span></span>: <span class="hljs-string"><span class="hljs-string">"deploy"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tmp"</span></span>: <span class="hljs-string"><span class="hljs-string">"tmp"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"workdir"</span></span>: <span class="hljs-string"><span class="hljs-string">"workdir"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"services"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"echo"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"auto_start"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"instances"</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-attr"><span class="hljs-attr">"internal"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_inbound_message_size"</span></span>: <span class="hljs-number"><span class="hljs-number">16777216</span></span>, <span class="hljs-attr"><span class="hljs-attr">"protocol"</span></span>: <span class="hljs-string"><span class="hljs-string">"raw"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"request_target"</span></span>: <span class="hljs-string"><span class="hljs-string">"/echo"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"acl"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"policy"</span></span> : <span class="hljs-string"><span class="hljs-string">"allow"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"exclude"</span></span> : [] } } } }</code> </pre> </div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฎุงุฏู B ws.json</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"listeners"</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"connection_weight"</span></span>: <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ip"</span></span> : <span class="hljs-string"><span class="hljs-string">"0.0.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"port"</span></span> : <span class="hljs-number"><span class="hljs-number">5083</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lapps_config_auto_save"</span></span> : <span class="hljs-literal"><span class="hljs-literal">true</span></span> , <span class="hljs-attr"><span class="hljs-attr">"workers"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"workers"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_connections"</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"auto_fragment"</span></span> : <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_poll_events"</span></span> : <span class="hljs-number"><span class="hljs-number">2048</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_poll_wait_ms"</span></span> : <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">"max_inbounds_skip"</span></span> : <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-attr"><span class="hljs-attr">"input_buffer_size"</span></span> : <span class="hljs-number"><span class="hljs-number">2048</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"acl"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"policy"</span></span> : <span class="hljs-string"><span class="hljs-string">"deny"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"exclude"</span></span> : [] }, <span class="hljs-attr"><span class="hljs-attr">"tls"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tls_server_version"</span></span> : <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tls_client_version"</span></span> : <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tls_certificates"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"ca"</span></span>:<span class="hljs-string"><span class="hljs-string">"/opt/lapps/conf/ssl/ca.crt"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"cert"</span></span>: <span class="hljs-string"><span class="hljs-string">"/opt/lapps/conf/ssl/example.org.bundle.crt"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"key"</span></span>: <span class="hljs-string"><span class="hljs-string">"/opt/lapps/conf/ssl/example.org.key"</span></span> } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูุญุชูู ุงูุฎุงุฏู A ุนูู ูุงุฌูุชูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  bond0 - xx203.37 </li><li style=";text-align:right;direction:rtl">  bond1 - xx23.10 </li></ul><br><p style=";text-align:right;direction:rtl">  ูุงุญุฏ ูู ุฃุณุฑุน ูุงูุขุฎุฑ ุฃุจุทุฃ ูููู ูุง ููู ุญูุง.  ุณูููู ุงูุฎุงุฏู ุชุญุช ุงูุญูู ุงูุซููู ุนูู ุฃู ุญุงู. </p><br><p style=";text-align:right;direction:rtl">  ูุชูุญ ุฅุนุฏุงุฏ ูุงูุจ ูู /opt/lapps/benchmark/benchmark.lua </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">benchmark.lua</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="lua hljs">benchmark={} benchmark.<span class="hljs-built_in"><span class="hljs-built_in">__index</span></span>=benchmark benchmark.init=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> benchmark.messages_counter=<span class="hljs-number"><span class="hljs-number">0</span></span>; benchmark.start_time=<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>.now(); benchmark.max_connections=<span class="hljs-number"><span class="hljs-number">10000</span></span>; benchmark.target_port=<span class="hljs-number"><span class="hljs-number">0</span></span>; benchmark.target_prefix=<span class="hljs-string"><span class="hljs-string">"wss://IPADDR:"</span></span>; benchmark.target_postfix=<span class="hljs-string"><span class="hljs-string">"/echo"</span></span>; benchmark.message=<span class="hljs-string"><span class="hljs-string">"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"</span></span>; benchmark.meter=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> benchmark.messages_counter=benchmark.messages_counter+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> slice=<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>.now() - benchmark.start_time; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( slice &gt;= <span class="hljs-number"><span class="hljs-number">1000</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(benchmark.messages_counter..<span class="hljs-string"><span class="hljs-string">" messages received per "</span></span>..slice..<span class="hljs-string"><span class="hljs-string">"ms"</span></span>) benchmark.messages_counter=<span class="hljs-number"><span class="hljs-number">0</span></span>; benchmark.start_time=<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>.now(); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> benchmark.run=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> n=nap:new(); <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> counter=<span class="hljs-number"><span class="hljs-number">1</span></span>; n:sleep(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> array={}; <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> start=<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>.now(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(#array &lt; benchmark.max_connections) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">not</span></span> must_stop()) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> benchmark.target_port=<span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>(<span class="hljs-number"><span class="hljs-number">5084</span></span>,<span class="hljs-number"><span class="hljs-number">5307</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> sock, err_msg=cws:new(benchmark.target_prefix..benchmark.target_port..benchmark.target_postfix, { onopen=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(handler)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> result, errstr=cws:send(handler,benchmark.message,<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">not</span></span> result) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Error on websocket send at handler "</span></span>..handler..<span class="hljs-string"><span class="hljs-string">": "</span></span>..errstr); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, onmessage=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(handler,message,opcode)</span></span></span></span> benchmark.meter(); cws:send(handler,message,opcode); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, onerror=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(handler, message)</span></span></span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Client WebSocket connection is failed for socketfd "</span></span>..handler..<span class="hljs-string"><span class="hljs-string">". Error: "</span></span>..message); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, onclose=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(handler)</span></span></span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Connection is closed for socketfd "</span></span>..handler); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(sock ~= <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">table</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">insert</span></span>(array,sock); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(err_msg); err_msg=<span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">collectgarbage</span></span>(<span class="hljs-string"><span class="hljs-string">"collect"</span></span>); <span class="hljs-comment"><span class="hljs-comment">-- force garbage collection on connection failure. end -- poll events once per 10 outgoing connections -- this will improve the connection establishment speed if counter == 10 then cws:eventLoop(); counter=1 else counter = counter + 1; end end print("Sockets connected: "..#array); benchmark.start_time=time.now(); while not must_stop() do cws:eventLoop(); end for i=1,#array do array[i]:close(); cws:eventLoop(); end end return benchmark;</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุฎุฒู ุนูุงููู IP Server ูู ูููุงุช IP1 ู IP2 ุนูู ุงูุชูุงูู ููู ุซู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> 1 2 <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> mkdir -p /opt/lapps/apps/benchmark<span class="hljs-variable"><span class="hljs-variable">${i}</span></span> sed -e <span class="hljs-string"><span class="hljs-string">"s/IPADDR/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(cat IP1)</span></span></span><span class="hljs-string">/g"</span></span> /opt/lapps/apps/benchmark/benchmark.lua &gt; /opt/lapps/apps/benchmark<span class="hljs-variable"><span class="hljs-variable">${i}</span></span>/benchmark<span class="hljs-variable"><span class="hljs-variable">${i}</span></span>.lua <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูููู ุจุชุนุฏูู /opt/lapps/etc/conf/lapps.json ุนูู Server B ูุงุณุชุฎุฏุงู ูุงุชูู ุงูุฎุฏูุชูู ุงููุนูุงุฑูุชูู: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฎุงุฏู B lapps.json</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"directories"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"app_conf_dir"</span></span>: <span class="hljs-string"><span class="hljs-string">"etc"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"applications"</span></span>: <span class="hljs-string"><span class="hljs-string">"apps"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deploy"</span></span>: <span class="hljs-string"><span class="hljs-string">"deploy"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"tmp"</span></span>: <span class="hljs-string"><span class="hljs-string">"tmp"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"workdir"</span></span>: <span class="hljs-string"><span class="hljs-string">"workdir"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"services"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"benchmark1"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"auto_start"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"instances"</span></span> : <span class="hljs-number"><span class="hljs-number">112</span></span>, <span class="hljs-attr"><span class="hljs-attr">"internal"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"preload"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"nap"</span></span>, <span class="hljs-string"><span class="hljs-string">"cws"</span></span>, <span class="hljs-string"><span class="hljs-string">"time"</span></span> ] }, <span class="hljs-attr"><span class="hljs-attr">"benchmark2"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"auto_start"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"instances"</span></span> : <span class="hljs-number"><span class="hljs-number">112</span></span>, <span class="hljs-attr"><span class="hljs-attr">"internal"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"preload"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"nap"</span></span>, <span class="hljs-string"><span class="hljs-string">"cws"</span></span>, <span class="hljs-string"><span class="hljs-string">"time"</span></span> ] } } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูู ูุญู ูุณุชุนุฏููุ  ูุง ูุญู ูุณูุง ูุฐูู.  ูุธุฑูุง ูุฃููุง ุนุงุฒููู ุนูู ุฅูุดุงุก 2 240 ุฃูู ููุจุณ ุตุงุฏุฑ ูุนููุงููู ููุท ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุงููุฒูุฏ ูู ุงูููุงูุฐ ุนูู ุฌุงูุจ ุงูุฎุงุฏู.  ูู ุงููุณุชุญูู ุฅูุดุงุก ุงุชุตุงูุงุช ุฃูุซุฑ ูู 64 ูููู ุจุงูุช ูููุณ ip: port pair (ูู ุงููุงูุน ุฃูู ููููุงู ูู 64 ูููู ุจุงูุช). </p><br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฎุงุฏู A ูู ุงูููู LAppS / include / wsServer.h ุชูุฌุฏ ุฏุงูุฉ startListeners () ุฎุงููุฉ.  ูู ูุฐู ุงููุธููุฉ ุ ุณูุณุชุจุฏู ุงูุณุทุฑ 126 </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">LAppSConfig::getInstance()-&gt;getWSConfig()["port"],</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุน ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">static_cast&lt;int&gt;(LAppSConfig::getInstance()-&gt;getWSConfig()["port"])+i,</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุนุงุฏุฉ ุจูุงุก LAPSS: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">make CONF=Release.AVX2 install</code> </pre> <br><h1 id="running-the-tests-for-2-240-000-client-websockets" style=";text-align:right;direction:rtl">  ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช ูู 2 240 000 ุนููู WebSockets. </h1><br><p style=";text-align:right;direction:rtl">  ุงุจุฏุฃ ุชุดุบูู LAppS ุนูู Server B ุ ุซู ุงุจุฏุฃ ุชุดุบูู LAppS ุนูู Server B ูุฃุนุฏ ุชูุฌูู ุงูุฅุฎุฑุงุฌ ุฅูู ููู ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">/opt/lapps/bin/lapps.avx2 &gt; <span class="hljs-built_in"><span class="hljs-built_in">log</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญุฑูุฑ ุ ููุงุญุธุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">if you want to run several LAppS instances, then create separate directory for each instnace (like run1,run2, etc) and run each instance from within these directories. This is required for lapps.log file and of course for resulting standard output, for not to be overlapped/overwritten by concurrent LAppS instances.</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฏ ูุณุชุบุฑู ูุฐุง ุจุนุถ ุงูููุช ุญุชู ูุชู ุชุฃุณูุณ ุฌููุน ุงูุงุชุตุงูุงุช.  ุฏุนููุง ุฑุตุฏ ุงูุชูุฏู ุงููุญุฑุฒ. </p><br><p style=";text-align:right;direction:rtl">  ูุง ุชุณุชุฎุฏู netstat ููุดุงูุฏุฉ ุงูุงุชุตุงูุงุช ุงูุซุงุจุชุฉ ุ ููู ุบูุฑ ุงููุฌุฏู ูู ุญูู ุฃูู ูุนูู ุฅูู ุฃุฌู ุบูุฑ ูุณูู ุจุนุฏ ูุซู ุงูุงุชุตุงูุงุช 150k ุงูุชู ุฃูุดุฆุช ูู ุจุนุถ ุงูุซูุงูู.  ุงูุธุฑ ุฅูู lapps.log ุนูู Server A ุ ูู ุงูุฏููู ุงูุฐู ููุช ููู ุนูุฏูุง ุจุฏุฃุช ุชุดุบูู LAppS.  ููููู ุงุณุชุฎุฏุงู ุงูุฎุทูุท ุงููุฑุฏูุฉ ุงูุชุงููุฉ ูุชุฑู ููู ูุชู ุชุฃุณูุณ ุงูุงุชุตุงูุงุช ูููู ูุชู ุชูุฒูุนูุง ุจูู IOWorkers: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">date;awk <span class="hljs-string"><span class="hljs-string">'/ will be added to connection pool of worker/{a[$22]++}END{for(i in a){ print i, a[i]; sum+=a[i]} print sum}'</span></span> lapps.log | sort -n;date</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููุง ููู ููุฑุฉ ุนู ูุฏู ุณุฑุนุฉ ุฅูุดุงุก ูุฐู ุงูุงุชุตุงูุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">375874 Sun Jul 21 20:33:07 +06 2019 650874 Sun Jul 21 20:34:42 +06 2019 2894 connections per second 1001874 Sun Jul 21 20:36:45 +06 2019 2974 connections per second 1182874 Sun Jul 21 20:37:50 +06 2019 2784 connections per second 1843874 Sun Jul 21 20:41:44 +06 2019 2824 connections per second 2207874 Sun Jul 21 20:45:43 +06 2019 3058 connections per second</code> </pre><br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฎุงุฏู B ุ ูุฏ ูุชุญูู ูู ุนุฏุฏ ุงููุนุงููุฑ ุงูุชู ุชู ุงูุงูุชูุงุก ูู ุชุฃุณูุณ ุงุชุตุงูุงุชูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># grep Sockets log | wc -l 224</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฃู ุชุฑู ุฃู ุงูุฑูู ูู 224 ุ ุฏุน ุงูุฎูุงุฏู ุชุนูู ููุชุฑุฉ ูู ุงูููุช ุ ุฑุงูุจ ุงุณุชุฎุฏุงู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ุงูุฌุฒุก ุงูุนููู.  ูุฏ ุชุฑู ุดูุฆูุง ููุฐุง (ุงูุฎุงุฏู B ูู ุงููุณุงุฑ ูุงูุฎุงุฏู A ูู ุงูุฌุงูุจ ุงูุฃููู): </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/e0/vy/sv/e0vysvislttrfhwpn_vexnwseli.png" alt="ุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ุฃู ูุซู ูุฐุง (ุงูุฎุงุฏู B ูู ุงููุณุงุฑ ูุงูุฎุงุฏู A ูู ุงูุฌุงูุจ ุงูุฃููู): </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/p1/cj/qk/p1cjqk6fxmthbnnexc2ikco9d6a.png"></p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงุถุญ ุฃู ุงูุฎุงุฏู B ุ ุญูุซ ุชุนูู ุฎุฏูุงุช ุงูุนููู ุงูููุงุณูุฉ ุ ุชุญุช ุนุจุก ุซููู.  ุฎุงุฏู A ุชุญุช ุนุจุก ุซููู ุฌุฏุง ูููู ููุณ ุฏุงุฆูุง.  ูู ุจุนุถ ุงูุฃุญูุงู ูููู ูุดุนุฑูุฑุฉ ุจูููุง Server B ููุงูุญ ูุน ููุฏุงุฑ ุงูููุงู ููุนูู.  ุชุดููุฑ ุญุฑูุฉ ุงููุฑูุฑ ุนูู TLS ููุซู ููุบุงูุฉ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุงูุฎูุงุฏู (ุงุถุบุท ุนูู Ctrl-C ุนุฏุฉ ูุฑุงุช) ููู ุจุชุนุฏูู ุงูุณุฌู ููุง ูุงู ูู ูุจู ูููู ูููุง ูุชุนูู ุจุงููููุฉ ุงููุชุบูุฑุฉ ูู ุงูุฎุฏูุงุช ุงููุฑุฌุนูุฉ (224): </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> -e <span class="hljs-string"><span class="hljs-string">':%s/ms/^V^M/g\n:%g/^$/d\nGdd1G224/Sockets\n224\ndggZZ'</span></span> | vi <span class="hljs-variable"><span class="hljs-variable">$i</span></span> awk -v avg=0 <span class="hljs-string"><span class="hljs-string">'{rps=($1/$5);avg+=rps;}END{print ((avg*1000)/NR)*224}'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">log</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฏ ุชุฑุบุจ ูู ุญุฐู ุงูุนุฏูุฏ ูู ุงูุฃุณุทุฑ ุงูุฃุฎูุฑุฉ ุฃูุถูุง ุ ูุญุณุงุจ ุนูููุงุช ุงูุทุจุงุนุฉ ูู ุฅููุงู ุงูุฎุฏูุงุช ุงููุฑุฌุนูุฉ.  ูุฏูู ุจุงููุนู ููุฑุฉ ุนู ููููุฉ ุงูููุงู ุจุฐูู.  ูุฐูู ุณุฃููู ุจูุดุฑ ุงููุชุงุฆุฌ ูุณููุงุฑูููุงุช ุงุฎุชุจุงุฑ ูุฎุชููุฉ ููุชุงุจุนุฉ ุงููุดููุงุช ุงูุชู ูุงุฌูุชูุง. </p><br><h1 id="results-for-all-the-other-tests-49-million-and-beyond" style=";text-align:right;direction:rtl">  ูุชุงุฆุฌ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุงูุฃุฎุฑู (4.9 ููููู ููุง ุจุนุฏูุง) </h1><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/az/4a/at/az4aatexickfttbrom2gg3yrymu.png"></p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุฎุชุจุงุฑ # 4 ุชุญููู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ra/ka/_f/raka_fia7i2vnqhwh2p-5lnulc8.png"></p></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุฎุชุจุงุฑ # 5 ุชุญููู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ln/z5/ml/lnz5mlaoz7aclxuyvjwjpwj25jm.png"></p></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุฎุชุจุงุฑ # 5 ูุชูุงุฒูุฉ ูุชูุงุณู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุนูู ูุฏู ุงููุณุงูุงุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/vi/cy/fe/vicyfenhzk7uvcjsiohq950c9fa.png"></p></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุฎุชุจุงุฑ # 6</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/7h/bg/ez/7hbgezb4zxuv3ijuemjmkilf110.png"></p></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุฎุชุจุงุฑ # 8</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/gq/5_/uj/gq5_uje-nnkfhlqmilb7xnbu5tc.png"></p></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุฎุชุจุงุฑ # 12</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xa/tr/m9/xatrm9dbbaha13w9wjxzmecvxjm.png"></p></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุฎุชุจุงุฑ ุฑูู 13</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/-w/9t/i8/-w9ti8atzczna-9dvepihihlyqu.png"></p></div></div><br><h1 id="problems" style=";text-align:right;direction:rtl">  ูุดุงูู. </h1><br><p style=";text-align:right;direction:rtl">  ูุถุนุช ูู ุงูุฌุฏูู ุฃุนูุงู ุจุงูููู ุงูุฃุญูุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุซุจุช ุฃู ุชุดุบูู ุฃูุซุฑ ูู 224 ูุณุฎุฉ ูุฑุฌุนูุฉ ุนูู ุงูุฎุงุฏู B ูู ุงูููุฑุฉ ุงูุณูุฆุฉ ุ ูุฃู ุงูุฎุงุฏู ุงูููุฌูุฏ ุนูู ุฌุงูุจ ุงูุนููู ูุงู ุบูุฑ ูุงุฏุฑ ุนูู ุชูุฒูุน ููุช ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุจุงูุชุณุงูู ุจูู ุงูุนูููุงุช / ุณูุงุณู ุงูุนูููุงุช.  ุงุณุชุญูุฐุช ุงููุซููุงุช 224 ุงูููุงุณูุฉ ุงูุฃููู ุงูุชู ุฃูุดุฃุช ุฌููุน ุงุชุตุงูุงุชูุง ุนูู ูุนุธู ููุงุฑุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุจููุฉ ุงููุซููุงุช ุงููุฑุฌุนูุฉ ูุชุฃุฎุฑุฉ.  ุญุชู ุงุณุชุฎุฏุงู renice -20 ูุง ูุณุงุนุฏ ูุซูุฑูุง (448 ุญุงูุฉ ูุฑุฌุนูุฉ ุ ุญุงูุชุงู LAppS): </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">448 ุงูุญุงูุงุช ุงููุฑุฌุนูุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/a2/ms/bg/a2msbgjgzuwvzzdl332linmmq98.png"><br>  ุฎุงุฏู B (ุงูุฌุงูุจ ุงูุฃูุณุฑ) ุชุญุช ุนุจุก ุซููู ููุบุงูุฉ ููุง ูุฒุงู ูุฏู ุงูุฎุงุฏู A ููุงุฑุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุฌุงููุฉ. </p></div></div><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุถุงุนูุช ูู <strong>benchmark.max_connections</strong> ุจุฏูุงู ูู ุจุฏุก ุงููุฒูุฏ ูู ูุซููุงุช LAppS ุงููููุตูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ูุชุดุบูู 12.3 ููููู ูู WebSockets ุ ุจุฏุฃุช ุชุดุบูู ุงูุฅุตุฏุงุฑ ุงูุฎุงูุณ ูู LAppS (ุงูุงุฎุชุจุงุฑุงู 5 ู 6) ุฏูู ุฅููุงู ุชุดุบูู ุฃุฑุจุนุฉ ูููุง ููุฏ ุงูุชุดุบูู ุจุงููุนู.  ููุนุจ ุฏูุฑ CFQ ุนู ุทุฑูู ุชุนููู ูุฏููุง ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุนูููุงุช ุฐุงุช ุงูุฃููููุฉ ูุน <em>ูุชู -STOP / -CONT</em> ุฃู / <em>ููุฑู</em> ุฃููููุงุชูู.  ููููู ุงุณุชุฎุฏุงู ุงูุจุฑูุงูุฌ ุงููุตู ุงููุงูุจ ุงูุชุงูู ููุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> [ 1 ]; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">kill</span></span> -STOP &lt;4 fast-processes pids&gt; sleep 10 <span class="hljs-built_in"><span class="hljs-built_in">kill</span></span> -CONT &lt;4 fast-processes pids&gt; sleep 5 <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฑุญุจูุง ุจูู ูู 2019 RHEL 7.6!  ุจุตุฑุงุญุฉ ุ ููุฏ ุงุณุชุฎุฏูุช ุฃูุฑ renice ูุฃูู ูุฑุฉ ููุฐ ุนุงู 2009. ูุง ูู ุงูุฃุณูุฃ ุ - ููุฏ ูุฌุญุช ูู ุงุณุชุฎุฏุงูู ูุฐู ุงููุฑุฉ ุชูุฑูุจูุง. </p><br><p style=";text-align:right;direction:rtl">  ูุงู ูุฏู ูุดููุฉ ูุน ูุญุฑู ูุจุนุซุฑ ูุฌูุน ุจุทุงูุงุช NIC.  ูุฐูู ููุช ุจุชุนุทููู ูุจุนุถ ุงูุงุฎุชุจุงุฑุงุช ุ ูููุณ ูู ุงููุงูุน ูุถุน ูุฐุง ุงูุญุฏุซ ูู ุงูุฌุฏูู. </p><br><p style=";text-align:right;direction:rtl">  ูุงู ูุฏู ุงุถุทุฑุงุจุงุช ุฌุฒุฆูุฉ ูู ุงูุงุฑุชุจุงุทุงุช ุชุญุช ุงูุญูู ุงูุซููู ูุนูุงูุฉ ุจุฑูุงูุฌ ุงูุชุดุบูู NIC ุ ูุฐูู ุงุถุทุฑุฑุช ุฅูู ุชุฌุงูู ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุฐุงุช ุงูุตูุฉ. </p><br><h1 id="end-of-story" style=";text-align:right;direction:rtl">  ููุงูุฉ ุงููุตุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุจุตุฑุงุญุฉ ุ ุฐูุจุช ุงูุงุฎุชุจุงุฑุงุช ุฃูุซุฑ ุณูุงุณุฉ ููุง ุชููุนุช. </p><br><p style=";text-align:right;direction:rtl">  ุฃูุง ููุชูุน ุฃููู ูู ุฃุชููู ูู ุชุญููู LAppS ุนูู Server A ุฅูู ูุงูู ุฅููุงูุงุชู (ุจุฏูู SSL) ุ ูุฃููู ูู ุฃุญุตู ุนูู ูุง ูููู ูู ููุงุฑุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูู ุฌุงูุจ ุงูุนููู.  ุนูู ุงูุฑุบู ูู ุชูููู TLS 1.3 ุ ุฅูุง ุฃู LAppS ุนูู ุงูุฎุงุฏู A ูุงูุช ุชุณุชุฎุฏู ุฌููุน ููุงุฑุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุชููุฑุฉ ุชูุฑูุจูุง. </p><br><p style=";text-align:right;direction:rtl">  ูุง ุฒูุช ููุชูุนุง ุจุฃู LAppS ูู ุฎุงุฏู WebSockets ููุชูุญ ุงููุตุฏุฑ ุงูุฃูุซุฑ ูุงุจููุฉ ููุชูุณุนุฉ ูุฃุณุฑุน ูุฃู ูุญุฏุฉ ุนููู WebSockets cws ูู ุงููุญูุฏุฉ ูู ููุนูุง ุ ุงูุชู ุชููุฑ ุฅุทุงุฑ ุนูู ูุงุฎุชุจุงุฑ ุงูุญูู ุงูุนุงูู. </p><br><p style=";text-align:right;direction:rtl">  ูุฑุฌู ุงูุชุญูู ูู ุงููุชุงุฆุฌ ุนูู ุงูุฃุฌูุฒุฉ ุงูุฎุงุตุฉ ุจู. </p><br><p style=";text-align:right;direction:rtl">  ููุงุญุธุฉ: ูุง ุชุณุชุฎุฏู ุฃุจุฏูุง nginx ุฃู apache ูููุงุฒู ุงูุชุญููู ุฃู ูุจุฑููุณู ุจุฏูู ูู WebSockets ุ ุฃู ุณุชูุชูู ูู ุงูููุงูุฉ ุจุฎูุถ ุงูุฃุฏุงุก ุญุณุจ ุงูุญุฌู.  ููู ููุณุช ุจูุงุก ู WebSockets. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar460847/">https://habr.com/ru/post/ar460847/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar460837/index.html">ุงููุจุชุฏุฆูู ุจูุฏูุงุณุช ูุชูุจ</a></li>
<li><a href="../ar460839/index.html">ุฅุทูุงู ุงูููุชุฑุณ - ูุณุชูุฏุนุงุช ุงูุจูุงูุงุช ุงููุชุฑุฌูุฉ ูุณุจูุง</a></li>
<li><a href="../ar460841/index.html">TOP-23 ุชุทุจููุงุช ุชุนูู ุงููุบุฉ</a></li>
<li><a href="../ar460843/index.html">ุชูุฏูู ูุตูู ุชุฏูู ุงูููุงููุงุช 3CX ุงูุฌุฏูุฏ ููููุฏ ููุงูุจ 3CX CRM</a></li>
<li><a href="../ar460845/index.html">ุชููู ูุฑูุงูุฏู ููุฑุจุงุชู ุ ูุงูุฏ ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจู (ููููุฉ ุงููุฑูุฑ) ุ ุนู ุนูุฑ ููุงูุฒ 93 ุนุงููุง</a></li>
<li><a href="../ar460849/index.html">ุงูุฌุฒุก 4. ูููุฐุฌ ุงูุฑุณู ุงูุจูุงูู ูุญุณุงุจ ุงูุฏูุงู ุงูููุทููุฉ ููุนูููุงุช ุงููุชูุงุฒูุฉ ุบูุฑ ุงููุชุฒุงููุฉ</a></li>
<li><a href="../ar460851/index.html">SamsPcbGuide ุ ุงูุฌุฒุก 10: ุงูุชูููููุฌูุง - ููููุงุช ูุญุงู ุฎุงููุฉ ูู ุงูุฑุตุงุต</a></li>
<li><a href="../ar460855/index.html">ููููุฉ ุงุณุชุฎุฏุงู PHP ูุชูููุฐ ุงูุฎุฏูุงุช ุงููุตุบุฑุฉุ</a></li>
<li><a href="../ar460857/index.html">ููู Namecoin Blockchain ุงูุจุญูุซ ุชูุจุฃ RTM ุงููุฌูุงุช ุงูุฅููุชุฑูููุฉ</a></li>
<li><a href="../ar460859/index.html">IThink # 3 ูุคุชูุฑ ูู ุฎุงุฑููู - ุนูู ุฃุณุงุณ WWDC 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>