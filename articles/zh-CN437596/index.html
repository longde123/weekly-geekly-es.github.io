<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏽‍🤝‍🧑🏻 🔑 🙅🏻 OTRS：LDAP认证，授权和同步（FreeIPA，AD） 🛌🏿 👨🏼‍🔬 🐗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="OTRS是用Perl编写的开源票务请求系统。 

 有两种选择： 



- OTRS业务解决方案-付费版本 
- （（OTRS））社区版 -免费版 
 我将列出该系统支持的一些功能 ： 



- ITSM模块（服务级别管理，变更管理，配置管理，CMDB） 
- 响应式Web界面 
- API 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OTRS：LDAP认证，授权和同步（FreeIPA，AD）</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437596/"><img src="https://habrastorage.org/webt/it/eo/2d/iteo2de4gfi-h7dhk7hi1djav1a.png" alt="图片"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OTRS</a>是用Perl编写的开源票务请求系统。 <br><br> 有两种选择： <br><br><ul><li>  OTRS业务解决方案-付费版本 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">（（OTRS））社区版</a> -免费版 </li></ul><br> 我将列出该系统支持的一些<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">功能</a> ： <br><br><ul><li>  ITSM模块（服务级别管理，变更管理，配置管理，CMDB） </li><li> 响应式Web界面 </li><li>  API </li><li>  SLA和服务 </li><li> 多租户 </li><li> 升级 </li><li>身份验证：DB，LDAP，HTTPBasicAuth，Radius </li><li> 支持MySQL，MariaDB，PostgreSQL，Oracle </li></ul><br> 而且，如果您发现其中的缺陷，那是不寻常的界面，并且设置起来很复杂。 重点介绍了使用各种LDAP目录进行授权（组，RBAC，对多家客户公司的支持），身份验证和元数据同步（名称，电话等）的基础知识 <br><a name="habracut"></a><br><h2> 客户端，队列，代理和组 </h2><br> 安装OTRS之后，您将立即可以访问： <br><br><ul><li>  <b>客户</b> -可以通过发送信件或使用Web访问来创建应用程序 </li><li>  <b>队列</b> -每个应用程序属于其中一个应用程序队列 </li><li>  <b>代理</b> -从他们可用的队列中从事应用程序执行的IT专业人员 </li><li>  <b>组</b> -连接队列，客户端和代理以及设置代理权限的实体-例如，只读，更改应用程序的优先级等。 </li></ul><br><img src="https://habrastorage.org/webt/5w/tc/yr/5wtcyrvgrlrl7uhahh_udj_1l9y.png" alt="图片"><br><br><h2> 标准组 </h2><br> 安装系统后，您将看到三个创建的组： <br><br><ul><li>  <b>管理员</b> -组成员可以管理（配置）OTRS </li><li>  <b>统计</b> -自定义和运行报告的能力 </li><li>  <b>用户</b> -客户端，队列和代理的标准组 </li></ul><br><h2> 集团相关权利 </h2><br><h3> 基本权利 </h3><br> 可以在限制代理程序操作的组中配置的主要权限： <br><br><ul><li> 该组/队列中应用程序中的<b>只读</b>权限 </li><li>  <b>move-</b>将请求移至该组/队列的权限 </li><li>  <b>创建</b> -在此组/队列中创建应用程序的权限 </li><li>  <b>note-</b>向该组/队列中的应用程序添加注释的权限 </li><li>  <b>owner-</b>更改此组/队列中应用程序所有者的权限 </li><li>  <b>优先级</b> -更改此组/队列中应用程序优先级的权限 </li><li>  <b>读取/写入</b> -对该组/队列中的请求具有完全的读取和写入权限 </li></ul><br><h3> 附加权利 </h3><br> 还具有其他权限，可以在设置（系统::权限）中启用其显示： <br><br><ul><li>  <b>报告</b> -提供对报告页面的访问 </li><li>  <b>redirect-</b>重定向/退回邮件消息的权利（ticketZoom中的重定向/退回链接） </li><li>  <b>创建</b> -有权对申请做出回应 </li><li>  <b>客户</b> -更改此应用程序的客户的权利 </li><li>  <b>forward-</b>转发消息的权利（使用“转发”按钮） </li><li>  <b>待定</b> -转移<b>待定申请</b>的权利 </li><li>  <b>电话</b> -以消息/便笺的形式将客户通话内容添加到应用程序的权利 </li><li>  <b>负责人</b> -更改负责申请者的权利 </li></ul><br> 更详细地考虑这一点： <br><br><ul><li> 每个客户端可以包含在一个或几个组中，最初所有客户端都是用户组的成员 </li><li> 每个订单队列都与任何一个组相关联 </li><li> 通过Web界面，客户端可以在队列中发出请求，这些队列中包括他的组可以访问 </li><li> 当客户通过电子邮件发送请求时，可以根据对信件属性（例如，发件人的地址或信件标题）的分析来更改应用程序的特性，包括应用程序将要进入的队列 </li><li> 如果客户端通过电话呼叫，则代理可以通过选择代理可用的任何队列来手动创建应用程序 </li><li> 希望客户端的应用程序始终处于客户端可用的队列中，否则他将无法通过Web界面访问该应用程序 </li><li> 代理可以根据应用程序所在队列的权限在应用程序中执行操作 </li></ul><br><img src="https://habrastorage.org/webt/eh/xz/8g/ehxz8gmrdrbni4babbqwj_cfxmk.png" alt="图片"><br><br><h2> 数据库认证 </h2><br> 身份验证和授权代理和客户端的标准方法是通过数据库。 <br><br> 例如，使用数据库设置代理身份验证如下所示： <br><br><pre><code class="perl hljs">$Self-&gt;{<span class="hljs-string"><span class="hljs-string">'AuthModule'</span></span>} = <span class="hljs-string"><span class="hljs-string">'Kernel::System::Auth::DB'</span></span>;</code> </pre> <br> 客户： <br><br><pre> <code class="perl hljs">$Self-&gt;{<span class="hljs-string"><span class="hljs-string">'Customer::AuthModule'</span></span>} = <span class="hljs-string"><span class="hljs-string">'Kernel::System::CustomerAuth::DB'</span></span>; $Self-&gt;{<span class="hljs-string"><span class="hljs-string">'Customer::AuthModule::DB::Table'</span></span>} = <span class="hljs-string"><span class="hljs-string">'customer_user'</span></span>; $Self-&gt;{<span class="hljs-string"><span class="hljs-string">'Customer::AuthModule::DB::CustomerKey'</span></span>} = <span class="hljs-string"><span class="hljs-string">'login'</span></span>; $Self-&gt;{<span class="hljs-string"><span class="hljs-string">'Customer::AuthModule::DB::CustomerPassword'</span></span>} = <span class="hljs-string"><span class="hljs-string">'pw'</span></span>;</code> </pre> <br> 我们还将保留此身份验证方法，并通过LDAP添加身份验证。 <br><br><h2> 角色和公司 </h2><br> 我们还将通过添加角色和公司来扩展授权功能： <br><br><ul><li>  <b>角色</b> -通过连接组和代理允许更灵活的访问控制 </li><li>  <b>公司</b> -允许隔离各种客户的应用程序（无论是不同部门还是公司） </li></ul><br><img src="https://habrastorage.org/webt/dm/59/ti/dm59titblhtfolxudg69gyp3bs0.png" alt="图片"><br><br><h2> 问题陈述 </h2><br> 您是my-it-company.com上OTRS系统的管理员，该公司向其他公司（或您所拥有的单位）提供服务。 <br><br> 您确实不希望手动创建新的代理和客户帐户，也不希望填写其他信息，例如电子邮件地址，电话号码，职位，地址和内阁编号-毕竟，这已经在LDAP目录中。 <br><br> 您的公司还将获得明显的优势-在所有系统中使用单个员工密码，在LDAP中阻止帐户将阻止对所有其他服务的访问。 <br><br>  <i>my-it-company.com</i>在Linux上运行，并使用Red Hat FreeIPA作为目录服务器，您所服务的部门使用各种Microsoft Active Directory林，您没有该林具有联合身份，但可以连接到域控制器。 <br><br> 您需要将应用程序流与不同的客户端分开，并实现对队列的不同级别的代理访问权限-管理者应该能够更改系统中任务的优先级。 <br><br> 您公司的员工还可以根据<i>my-it-company.com</i>的内部需求在系统中设置任务，有时既是代理商又是客户（有时不是同时）。 <br><br><img src="https://habrastorage.org/webt/rb/je/y4/rbjey4jhao-a1f-h1eqfsqvrbwg.png" alt="图片"><br><br><h2> 准备工作 </h2><br><h3> 查看LDAP的帐户 </h3><br> 如果禁止匿名浏览目录树，我们将在具有足够权限进行LDAP查询的域名<i>my-it-company.com</i> ， <i>pear.com</i>和<i>macrohard.com中</i>创建帐户（我们称它们为ldap-bot） <br><br><h3>  FreeIPA组与OTRS角色同步 </h3><br> 我们将在FreeIPA上创建三组用户，这三组用户将与我们的OTRS角色同步，例如： <br><br><ul><li>  <b>otrs-sa-</b>该组的成员将有权访问OTRS管理，但我们不会授予对队列的访问权限，因此我们不想一直在管理员的领导下工作）， </li><li>  <b>otrs-admins-</b>我们的经理有权更改应用程序的优先级）和 </li><li>  <b>otrs-服务台</b> -我们的专家帐户 </li></ul><br><h3> 公司属性 </h3><br> 选择我们用来确定与公司的隶属关系的属性。 使其成为“组织”属性。 例如，从组织和技术角度讲，一切都变得如此，并且所有域中的所有用户始终在“组织”字段中具有值： <br><br><ul><li>  <b>我的公司</b> -适用于my-it-company.com的员工 </li><li>  <b>梨公司</b> -针对pear.com的员工 </li><li>  <b>macrohard-company-</b>适用于macrohard.com的员工 </li></ul><br><h3> 定义FreeIPA使用的用户属性 </h3><br> 我们研究FreeIPA方案，找出同步所需的属性名称（名称，登录名，电话等）。 <br><br><pre> <code class="bash hljs">kinit laptevs ipa user-show --all --raw laptevs</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">我们得出类似的结论：</b> <div class="spoiler_text">  dn：uid = laptevs，cn =用户，cn =帐户，dc =我的公司，dc = com <br>  uid：laptevs <br> 别名：斯坦尼斯拉夫 <br>  sn：拉普捷夫 <br>  cn：Laptev Stanislav <br> 首字母缩写：SL <br> 主目录：/ home / laptevs <br>  gecos：拉普捷夫·斯坦尼斯拉夫 <br>  loginshell：/ bin / sh <br>  krbcanonicalname：laptevs@MY-IT-COMPANY.COM <br>  krbprincipalname：laptevs@MY-IT-COMPANY.COM <br> 邮件：laptevs@MY-IT-COMPANY.COM <br>  uidnumber：1344600003 <br>  gidnumber：1344600003 <br>  l：莫斯科 <br> 电话号码：+7（863）999-99-99 <br> 手机：+7（999）999-99-99 <br>  ou：我的公司 <br> 标题：SysAdm <br>  sshpubkeyfp：SHA256：Yi8mKF + j28 / r2cpxLgIbvZ / Oymt57rhliHKhqBuJxqE laptevs-putty（ssh-rsa） <br>  nsaccountlock：否 <br>  has_password：TRUE <br>  has_keytab：TRUE <br>  displayName：Laptev Stanislav <br>  ipaSshPubKey：c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBQkpRQUFBZ0VBNjQ1RTJjSjIvWXVVYm9GNzdZY3hLNzBndm1jWlgrZjBZTVpsaXRQVXNCWFZ0cENtTEtwcjRwK2JEeUdhRzNLTWx1T08ydW9wS0pXRk9mWE83Zzl3OTYzdklQblN3MzVHSmI3VGhhbk1pTXpNUE82T1lQZEY0em14b2k4N 0RGYkdXV2V6aGwzcitsbmFGYTB0dEQ5TkFWRU1Fb3BMdmkzcHZ1UXpyVmNjVlMxamFxY1dNT2ZGUC9TRlVoY1dGeVpZd3Z6eW0wWnZObUZtdjVjVHJGNzJMSXZOdHlsNkZGK2ZaU3ZpS01mcXZ6NStkT2xZZGd5bVVSOG5iaVpkTXZKaTIvbzhjTy84ekpoMFhtSnVRSjJXNEVvYVEvajVTTm8ySjZ6NklXNk I3cFB4Y002a0tJcUp5N08zTkNOcGRrVmVQbEFHbThsOFZDREpVa1RLSjRGOS9mSTZFUkhxVUZwK3p1VENTR1R3ZWlKdXppenFSZWJTTkNiMXh3RldmUitvYzFLdWNZSU5QbTYxRi93YXhOcC9aSG9OK2w1dCtkYWI4cElZSGZzTnNUNWx2RWt4Ukh0bnNyeUxsbWk1ZVdzd3RBbDB3TUpWd1cvUWNJcjhOaVN Ybm96Q3dHWTZCaTQ2L0FGTGVidmFLV0tKRmpKZFgxOFlRVDRpVzZGaE83aW40TGlUamlNaENXbStvbjNQbERYeXZpdkJ1WkFXUldXNEdjbXREVW8rSVhZT2t3MWh3UldqdkJtcExHMVZpMFhPckltbmQybTVZdWk1bHo0b1ZlekFRN1NjYVlrdDBoVEdQU1Z2UHpmVlowYWJCQlpiRmViK1hUV2tpSnBPMHBO T3dodGNadHYrN3RMMnc1OFN3QnhVTUk4NzUzdG5Sc1h1blBXZERqcUsxSDA9IGxhcHRldnMtcHV0dHk = <br>  ipaUniqueID：68d46dac-1d3c-11e9-82fd-0242ac110002 <br>  krbExtraData：AAL4VkVcbGFwdGV2c0BPTUlLUk9OLlBSTwA = <br>  krbLastFailedAuth：20190123084142Z <br>  krbLastPwdChange：20190121052200Z <br>  krbLoginFailedCount：0 <br>  krbPassword到期时间：20190421052200Z <br> 成员：cn = otrs-admins，cn =组，cn =帐户，dc =我的公司，dc = com <br> 成员：cn = ipausers，cn =组，cn =帐户，dc =我的公司，dc = com <br>  mepManagedEntry：cn = laptevs，cn =组，cn =帐户，dc =我的公司，dc = com <br>  objectClass：顶部 <br>  objectClass：人 <br>  objectClass：组织人员 <br>  objectClass：inetorgperson <br>  objectClass：inetuser <br>  objectClass：posixaccount <br>  objectClass：krbprincipalaux <br>  objectClass：krbticketpolicyaux <br>  objectClass：ipaobject <br>  objectClass：ipasshuser <br>  objectClass：ipaSshGroupOfPubKeys <br>  objectClass：mepOriginEntry </div></div><br>  <b>dn</b> ：uid = laptevs，cn =用户，cn =帐户，dc =我的公司，dc = com <br>  <b>uid</b> ：laptevs <br>  <b>名字</b> ：Stanislav <br>  <b>sn</b> ：拉普捷夫 <br>  <b>cn</b> ：拉普捷夫·斯坦尼斯拉夫（Laptev Stanislav） <br>  <b>邮件</b> ：laptevs@MY-IT-COMPANY.COM <br>  <b>l</b> ：莫斯科 <br>  <b>电话号码</b> ：+7（863）999-99-99 <br>  <b>手机</b> ：+7（999）999-99-99 <br>  <b>ou</b> ：我的公司 <br>  <b>标题</b> ：SysAdm <br><br><h2> 配置OTRS </h2><br><h3> 配置文件 </h3><br><ul><li>  <b>/ opt / otrs /</b> -通常，OTRS系统文件位于此处 </li><li>  <b>内核/ Config.pm-</b>您正在编辑的配置文件 </li><li>  <b>Kernel / Config / Defaults.pm-</b>具有标准设置的文件，您无法对其进行编辑，但可以在其中查看所有现有参数并对其进行注释 </li></ul><br><h3> 代理设定 </h3><br><h4> 代理验证 </h4><br><pre> <code class="perl hljs"> <span class="hljs-comment"><span class="hljs-comment"># --------------------------------------------------- # # Agents authentication # # --------------------------------------------------- # # my-it-company.com LDAP backend $Self-&gt;{AuthModule} = 'Kernel::System::Auth::LDAP'; #  LDAP- $Self-&gt;{'AuthModule::LDAP::Host'} = 'my-it-company.com'; $Self-&gt;{'AuthModule::LDAP::BaseDN'} = 'dc=my-it-company,dc=com'; $Self-&gt;{'AuthModule::LDAP::UID'} = 'uid'; #  ,        $Self-&gt;{'AuthModule::LDAP::SearchUserDN'} = 'uid=ldap-bot,cn=users,cn=accounts,dc=my-it-company,dc=com'; $Self-&gt;{'AuthModule::LDAP::SearchUserPw'} = 'bot-password!'; #    LDAP.      ,    " " $Self-&gt;{'AuthModule::LDAP::AlwaysFilter'} = '(mail=*)'; #      $Self-&gt;{'AuthModule::LDAP::Charset'} = 'utf-8'; $Self-&gt;{'AuthModule::UseSyncBackend'} = 'AuthSyncBackend'; # my-it-company.com DB backend $Self-&gt;{AuthModule2} = 'Kernel::System::Auth::DB'; $Self-&gt;{'AuthModule::DB::CryptType2'} = 'sha2'; # --------------------------------------------------- # # End Agents authentication # # --------------------------------------------------- #</span></span></code> </pre> <br><h4> 同步代理（具有OTRS角色的LDAP组） </h4><br><pre> <code class="perl hljs"> <span class="hljs-comment"><span class="hljs-comment"># --------------------------------------------------- # # Agent authentication sync # # (enable agent data sync. after succsessful # # authentication) # # --------------------------------------------------- # # my-it-company.com LDAP auth sync. backend. $Self-&gt;{AuthSyncModule} = 'Kernel::System::Auth::Sync::LDAP'; $Self-&gt;{'AuthSyncModule::LDAP::Host'} = 'my-it-company.com'; $Self-&gt;{'AuthSyncModule::LDAP::BaseDN'} = 'dc=my-it-company,dc=com'; $Self-&gt;{'AuthSyncModule::LDAP::UID'} = 'uid'; $Self-&gt;{'AuthSyncModule::LDAP::SearchUserDN'} = 'uid=ldap-bot,cn=users,cn=accounts,dc=my-it-company,dc=com'; $Self-&gt;{'AuthSyncModule::LDAP::SearchUserPw'} = 'bot-password!'; $Self-&gt;{'AuthSyncModule::LDAP::AlwaysFilter'} = '(mail=*)'; $Self-&gt;{'AuthSyncModule::LDAP::UserSyncMap'} = { # DB -&gt; LDAP UserFirstname =&gt; 'givenName', UserLastname =&gt; 'sn', UserEmail =&gt; 'mail', }; $Self-&gt;{'AuthSyncModule::LDAP::AccessAttr'} = 'member'; $Self-&gt;{'AuthSyncModule::LDAP::UserAttr'} = 'DN'; $Self-&gt;{'AuthSyncModule::LDAP::UserSyncRolesDefinition'} = { # ldap group 'cn=otrs-sa,cn=groups,cn=accounts,dc=my-it-company,dc=com' =&gt; { # otrs role 'otrs-sa' =&gt; 1, }, 'cn=otrs-admins,cn=groups,cn=accounts,dc=my-it-company,dc=com' =&gt; { 'otrs-admins' =&gt; 1, }, 'cn=otrs-helpdesk,cn=groups,cn=accounts,dc=my-it-company,dc=com' =&gt; { 'helpdesk' =&gt; 1, } }; $Self-&gt;{DatabaseUserTable} = 'users'; $Self-&gt;{DatabaseUserTableUserID} = 'id'; $Self-&gt;{DatabaseUserTableUserPW} = 'pw'; $Self-&gt;{DatabaseUserTableUser} = 'login'; # --------------------------------------------------- # # End Agents authentication sync # # --------------------------------------------------- #</span></span></code> </pre><br> 如果您认为角色不适合您，并且只想要组，那么我将举两个将LDAP组与OTRS组同步的示例-简化后的示例，并为每个组设置权限。 <br><br><div class="spoiler">  <b class="spoiler_title">备用代理同步（具有OTRS组的LDAP组，具有权限）</b> <div class="spoiler_text"><pre> <code class="perl hljs"> <span class="hljs-comment"><span class="hljs-comment"># --------------------------------------------------- # # Agent authentication sync # # (enable agent data sync. after succsessful # # authentication) # # --------------------------------------------------- # # my-it-company.com LDAP auth sync. backend. $Self-&gt;{AuthSyncModule} = 'Kernel::System::Auth::Sync::LDAP'; $Self-&gt;{'AuthSyncModule::LDAP::Host'} = 'my-it-company.com'; $Self-&gt;{'AuthSyncModule::LDAP::BaseDN'} = 'dc=my-it-company,dc=com'; $Self-&gt;{'AuthSyncModule::LDAP::UID'} = 'uid'; $Self-&gt;{'AuthSyncModule::LDAP::SearchUserDN'} = 'uid=ldap-bot,cn=users,cn=accounts,dc=my-it-company,dc=com'; $Self-&gt;{'AuthSyncModule::LDAP::SearchUserPw'} = 'bot-password!'; $Self-&gt;{'AuthSyncModule::LDAP::AlwaysFilter'} = '(mail=*)'; $Self-&gt;{'AuthSyncModule::LDAP::UserSyncMap'} = { # DB -&gt; LDAP UserFirstname =&gt; 'givenName', UserLastname =&gt; 'sn', UserEmail =&gt; 'mail', }; $Self-&gt;{'AuthSyncModule::LDAP::AccessAttr'} = 'member'; $Self-&gt;{'AuthSyncModule::LDAP::UserAttr'} = 'DN'; # AuthSyncModule::LDAP::UserSyncGroupsDefinition # (If "LDAP" was selected for AuthModule and you want to sync LDAP # groups to otrs groups, define the following.) $Self-&gt;{'AuthSyncModule::LDAP::UserSyncGroupsDefinition'} = { # ldap group 'cn=otrs-admins,cn=groups,cn=accounts,dc=my-it-company,dc=com' =&gt; { # otrs group 'admin' =&gt; { # permission rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, 'stats' =&gt; { rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, 'users' =&gt; { rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, 'pear-group' =&gt; { rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, 'macrohard-group' =&gt; { rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, }, 'cn=otrs-helpdesk,cn=groups,cn=accounts,dc=my-it-company,dc=com' =&gt; { 'stats' =&gt; { rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, 'users' =&gt; { rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, } }; $Self-&gt;{DatabaseUserTable} = 'users'; $Self-&gt;{DatabaseUserTableUserID} = 'id'; $Self-&gt;{DatabaseUserTableUserPW} = 'pw'; $Self-&gt;{DatabaseUserTableUser} = 'login'; # --------------------------------------------------- # # End Agents authentication sync # # --------------------------------------------------- #</span></span></code> </pre> <br><br></div></div><br><div class="spoiler">  <b class="spoiler_title">替代的简化代理同步（具有OTRS角色且具有rw特权的LDAP组）</b> <div class="spoiler_text"><pre> <code class="perl hljs"> <span class="hljs-comment"><span class="hljs-comment"># --------------------------------------------------- # # Agent authentication sync # # (enable agent data sync. after succsessful # # authentication) # # --------------------------------------------------- # # my-it-company.com LDAP auth sync. backend. $Self-&gt;{AuthSyncModule} = 'Kernel::System::Auth::Sync::LDAP'; $Self-&gt;{'AuthSyncModule::LDAP::Host'} = 'my-it-company.com'; $Self-&gt;{'AuthSyncModule::LDAP::BaseDN'} = 'dc=my-it-company,dc=com'; $Self-&gt;{'AuthSyncModule::LDAP::UID'} = 'uid'; $Self-&gt;{'AuthSyncModule::LDAP::SearchUserDN'} = 'uid=ldap-bot,cn=users,cn=accounts,dc=my-it-company,dc=com'; $Self-&gt;{'AuthSyncModule::LDAP::SearchUserPw'} = 'bot-password!'; $Self-&gt;{'AuthSyncModule::LDAP::AlwaysFilter'} = '(mail=*)'; $Self-&gt;{'AuthSyncModule::LDAP::UserSyncMap'} = { # DB -&gt; LDAP UserFirstname =&gt; 'givenName', UserLastname =&gt; 'sn', UserEmail =&gt; 'mail', }; $Self-&gt;{'AuthSyncModule::LDAP::AccessAttr'} = 'member'; $Self-&gt;{'AuthSyncModule::LDAP::UserAttr'} = 'DN'; #    -     / # AuthSyncModule::LDAP::UserSyncInitialGroups # (sync following group with rw permission after initial create of first agent # login) $Self-&gt;{'AuthSyncModule::LDAP::UserSyncInitialGroups'} = [ 'users', ]; $Self-&gt;{DatabaseUserTable} = 'users'; $Self-&gt;{DatabaseUserTableUserID} = 'id'; $Self-&gt;{DatabaseUserTableUserPW} = 'pw'; $Self-&gt;{DatabaseUserTableUser} = 'login'; # --------------------------------------------------- # # End Agents authentication sync # # --------------------------------------------------- #</span></span></code> </pre> <br><br></div></div><br><h3> 客户设置 </h3><br><h4> 客户认证 </h4><br><pre> <code class="perl hljs"> <span class="hljs-comment"><span class="hljs-comment"># --------------------------------------------------- # # ustomer authentication # # --------------------------------------------------- # # ustomer DB auth. backend $Self-&gt;{'Customer::AuthModule'} = 'Kernel::System::CustomerAuth::DB'; $Self-&gt;{'Customer::AuthModule::DB::Table'} = 'customer_user'; $Self-&gt;{'Customer::AuthModule::DB::CustomerKey'} = 'login'; $Self-&gt;{'Customer::AuthModule::DB::CustomerPassword'} = 'pw'; # my-it-company.com (ustomer) LDAP auth. backend $Self-&gt;{'Customer::AuthModule2'} = 'Kernel::System::CustomerAuth::LDAP'; $Self-&gt;{'Customer::AuthModule::LDAP::Host2'} = 'my-it-company.com'; $Self-&gt;{'Customer::AuthModule::LDAP::BaseDN2'} = 'dc=my-it-company,dc=com'; $Self-&gt;{'Customer::AuthModule::LDAP::UID2'} = 'uid'; $Self-&gt;{'Customer::AuthModule::LDAP::SearchUserDN2'} = 'uid=ldap-bot,cn=users,cn=accounts,dc=my-it-company,dc=com'; $Self-&gt;{'Customer::AuthModule::LDAP::SearchUserPw2'} = 'bot-password!'; $Self-&gt;{'Customer::AuthModule::LDAP::AlwaysFilter2'} = '(mail=*)'; # pear LDAP auth. backend. $Self-&gt;{'Customer::AuthModule3'} = 'Kernel::System::CustomerAuth::LDAP'; $Self-&gt;{'Customer::AuthModule::LDAP::Host3'} = 'pear.com'; $Self-&gt;{'Customer::AuthModule::LDAP::BaseDN3'} = 'DC=pear,DC=com'; $Self-&gt;{'Customer::AuthModule::LDAP::UID3'} = 'sAMAccountName'; $Self-&gt;{'Customer::AuthModule::LDAP::SearchUserDN3'} = 'ldap-bot@pear.com'; $Self-&gt;{'Customer::AuthModule::LDAP::SearchUserPw3'} = 'bot-password?'; # : (mail=*) -      (samAccountType=805306368) -     (!(userAccountControl:1.2.840.113556.1.4.803:=2)) -   $Self-&gt;{'Customer::AuthModule::LDAP::AlwaysFilter3'} = '(&amp;(mail=*)(samAccountType=805306368)(!(userAccountControl:1.2.840.113556.1.4.803:=2)))'; # macrohard LDAP auth. backend. $Self-&gt;{'Customer::AuthModule4'} = 'Kernel::System::CustomerAuth::LDAP'; $Self-&gt;{'Customer::AuthModule::LDAP::Host4'} = 'macrohard.com'; $Self-&gt;{'Customer::AuthModule::LDAP::BaseDN4'} = 'dc=macrohard,dc=com'; $Self-&gt;{'Customer::AuthModule::LDAP::UID4'} = 'sAMAccountName'; $Self-&gt;{'Customer::AuthModule::LDAP::SearchUserDN4'} = 'ldap-bot@macrohard.com'; $Self-&gt;{'Customer::AuthModule::LDAP::SearchUserPw4'} = 'bot-password!?'; $Self-&gt;{'Customer::AuthModule::LDAP::AlwaysFilter4'} = '(&amp;(mail=*)(samAccountType=805306368)(!(userAccountControl:1.2.840.113556.1.4.803:=2)))'; # --------------------------------------------------- # # End customer authentication settings # # --------------------------------------------------- #</span></span></code> </pre> <br><h4> 客户端同步（从LDAP获取客户端属性，与OTRS公司进行通信） </h4><br><pre> <code class="perl hljs"> <span class="hljs-comment"><span class="hljs-comment"># --------------------------------------------------- # # Customer authentication sync # # --------------------------------------------------- # # Customer user DB backend and settings $Self-&gt;{CustomerUser} = { Name =&gt; Translatable('Database Backend'), Module =&gt; 'Kernel::System::CustomerUser::DB', Params =&gt; { Table =&gt; 'customer_user', SearchCaseSensitive =&gt; 0, }, # customer unique id CustomerKey =&gt; 'login', # customer # CustomerID =&gt; 'customer_id', CustomerValid =&gt; 'valid_id', CustomerUserListFields =&gt; [ 'first_name', 'last_name', 'email' ], CustomerUserSearchFields =&gt; [ 'login', 'first_name', 'last_name', 'customer_id' ], CustomerUserSearchPrefix =&gt; '*', CustomerUserSearchSuffix =&gt; '*', CustomerUserSearchListLimit =&gt; 250, CustomerUserPostMasterSearchFields =&gt; ['email'], CustomerUserNameFields =&gt; [ 'title', 'first_name', 'last_name' ], CustomerUserEmailUniqCheck =&gt; 1, CustomerCompanySupport =&gt; 1, CacheTTL =&gt; 60 * 60 * 24, Map =&gt; [ [ 'UserTitle', Translatable('Title or salutation'), 'title', 1, 0, 'var', '', 0, undef, undef ], [ 'UserFirstname', Translatable('Firstname'), 'first_name', 1, 1, 'var', '', 0, undef, undef ], [ 'UserLastname', Translatable('Lastname'), 'last_name', 1, 1, 'var', '', 0, undef, undef ], [ 'UserLogin', Translatable('Username'), 'login', 1, 1, 'var', '', 0, undef, undef ], [ 'UserPassword', Translatable('Password'), 'pw', 0, 0, 'var', '', 0, undef, undef ], [ 'UserEmail', Translatable('Email'), 'email', 1, 1, 'var', '', 0, undef, undef ], [ 'UserCustomerID', Translatable('CustomerID'), 'customer_id', 0, 1, 'var', '', 0, undef, undef ], [ 'UserPhone', Translatable('Phone'), 'phone', 1, 0, 'var', '', 0, undef, undef ], [ 'UserFax', Translatable('Fax'), 'fax', 1, 0, 'var', '', 0, undef, undef ], [ 'UserMobile', Translatable('Mobile'), 'mobile', 1, 0, 'var', '', 0, undef, undef ], [ 'UserStreet', Translatable('Street'), 'street', 1, 0, 'var', '', 0, undef, undef ], [ 'UserZip', Translatable('Zip'), 'zip', 1, 0, 'var', '', 0, undef, undef ], [ 'UserCity', Translatable('City'), 'city', 1, 0, 'var', '', 0, undef, undef ], [ 'UserCountry', Translatable('Country'), 'country', 1, 0, 'var', '', 0, undef, undef ], [ 'UserComment', Translatable('Comment'), 'comments', 1, 0, 'var', '', 0, undef, undef ], [ 'ValidID', Translatable('Valid'), 'valid_id', 0, 1, 'int', '', 0, undef, undef ], ], # default selections Selections =&gt; { # UserTitle =&gt; { # 'Mr.' =&gt; Translatable('Mr.'), # 'Mrs.' =&gt; Translatable('Mrs.'), # }, }, }; # my-it-company.com customer user ldap backend and settings $Self-&gt;{CustomerUser2} = { Name =&gt; 'AD my-it-company.com', Module =&gt; 'Kernel::System::CustomerUser::LDAP', Params =&gt; { # ldap host Host =&gt; 'my-it-company.com', # ldap base dn BaseDN =&gt; 'dc=my-it-company,dc=com', # search scope (one|sub) SSCOPE =&gt; 'sub', UserDN =&gt; 'uid=ldap-bot,cn=users,cn=accounts,dc=my-it-company,dc=com', UserPw =&gt; 'bot-password!', # in case you want to add always one filter to each ldap query, use # this option. eg AlwaysFilter =&gt; '(mail=*)' or AlwaysFilter =&gt; '(objectclass=user)' AlwaysFilter =&gt; '(mail=*)', SourceCharset =&gt; 'utf-8', Die =&gt; 0, }, # customer unique id CustomerKey =&gt; 'uid', # customer # CustomerID =&gt; 'ou', CustomerUserListFields =&gt; ['uid', 'cn', 'mail'], CustomerUserSearchFields =&gt; ['uid', 'cn', 'mail'], CustomerUserSearchPrefix =&gt; '', CustomerUserSearchSuffix =&gt; '*', CustomerUserSearchListLimit =&gt; 250, CustomerUserPostMasterSearchFields =&gt; ['mail'], CustomerUserNameFields =&gt; ['sn', 'givenname'], # Configures the character for joining customer user name parts. Join single space if it is not defined. CustomerUserNameFieldsJoin =&gt; ' ', # show customer user and customer tickets in customer interface CustomerUserExcludePrimaryCustomerID =&gt; 0, # add a ldap filter for valid users (expert setting) # CustomerUserValidFilter =&gt; '(!(description=gesperrt))', # admin can't change customer preferences AdminSetPreferences =&gt; 1, # cache time to live in sec. - cache any ldap queries CacheTTL =&gt; 0, Map =&gt; [ [ 'UserTitle', Translatable('Title or salutation'), 'title', 1, 0, 'var', '', 1, undef, undef ], [ 'UserFirstname', Translatable('Firstname'), 'givenname', 1, 1, 'var', '', 1, undef, undef ], [ 'UserLastname', Translatable('Lastname'), 'sn', 1, 1, 'var', '', 1, undef, undef ], [ 'UserLogin', Translatable('Username'), 'uid', 1, 1, 'var', '', 1, undef, undef ], [ 'UserEmail', Translatable('Email'), 'mail', 1, 1, 'var', '', 1, undef, undef ], [ 'UserCustomerID', Translatable('CustomerID'), 'ou', 0, 1, 'var', '', 1, undef, undef ], [ 'UserPhone', Translatable('Phone'), 'telephonenumber', 1, 0, 'var', '', 1, undef, undef ], [ 'UserMobile', Translatable('Mobile'), 'mobile', 1, 0, 'var', '', 1, undef, undef ], ], }; # pear customer user ldap backend and settings $Self-&gt;{CustomerUser3} = { Name =&gt; 'AD pear', Module =&gt; 'Kernel::System::CustomerUser::LDAP', Params =&gt; { # ldap host Host =&gt; 'pear.com', BaseDN =&gt; 'DC=pear,DC=com', SSCOPE =&gt; 'sub', UserDN =&gt; 'ldap-bot@pear.com', UserPw =&gt; 'bot-password?', AlwaysFilter =&gt; '(&amp;(mail=*)(samAccountType=805306368)(!(userAccountControl:1.2.840.113556.1.4.803:=2)))', SourceCharset =&gt; 'utf-8', Die =&gt; 0, }, # customer unique id CustomerKey =&gt; 'sAMAccountName', # customer # CustomerID =&gt; 'company', CustomerUserListFields =&gt; ['sAMAccountName', 'cn', 'mail'], CustomerUserSearchFields =&gt; ['sAMAccountName', 'cn', 'mail'], CustomerUserSearchPrefix =&gt; '', CustomerUserSearchSuffix =&gt; '*', CustomerUserSearchListLimit =&gt; 250, CustomerUserPostMasterSearchFields =&gt; ['mail'], CustomerUserNameFields =&gt; ['sn', 'givenname'], # Configures the character for joining customer user name parts. Join single space if it is not defined. CustomerUserNameFieldsJoin =&gt; ' ', # show customer user and customer tickets in customer interface CustomerUserExcludePrimaryCustomerID =&gt; 0, AdminSetPreferences =&gt; 1, CacheTTL =&gt; 0, Map =&gt; [ # note: Login, Email and CustomerID needed! # var, frontend, storage, shown (1=always,2=lite), required, storage-type, http-link, readonly, http-link-target, link class(es) [ 'UserTitle', Translatable('Title or salutation'), 'title', 1, 0, 'var', '', 1, undef, undef ], [ 'UserFirstname', Translatable('Firstname'), 'givenname', 1, 1, 'var', '', 1, undef, undef ], [ 'UserLastname', Translatable('Lastname'), 'sn', 1, 1, 'var', '', 1, undef, undef ], [ 'UserLogin', Translatable('Username'), 'sAMAccountName', 1, 1, 'var', '', 1, undef, undef ], [ 'UserFullLogin', Translatable('FullUsername'), 'userPrincipalName', 1, 1, 'var', '', 1, undef, undef ], [ 'UserEmail', Translatable('Email'), 'mail', 1, 1, 'var', '', 1, undef, undef ], [ 'UserCustomerID', Translatable('CustomerID'), 'company', 0, 1, 'var', '', 1, undef, undef ], [ 'UserPhone', Translatable('Phone'), 'telephoneNumber', 1, 0, 'var', '', 1, undef, undef ], [ 'UserMobile', Translatable('Mobile'), 'mobile', 1, 0, 'var', '', 1, undef, undef ], [ 'UserAddress', Translatable('Address'), 'postaladdress', 1, 0, 'var', '', 1, undef, undef ], [ 'UserOffice', Translatable('Office'), 'physicalDeliveryOfficeName', 1, 0, 'var', '', 1, undef, undef ], [ 'UserDepartment', Translatable('Department'), 'department', 1, 0, 'var', '', 1, undef, undef ], [ 'UserComment', Translatable('Comment'), 'description', 1, 0, 'var', '', 1, undef, undef ], ], }; # macrohard customer user ldap backend and settings $Self-&gt;{CustomerUser4} = { Name =&gt; 'AD macrohard', Module =&gt; 'Kernel::System::CustomerUser::LDAP', Params =&gt; { # ldap host Host =&gt; 'macrohard.com', # ldap base dn BaseDN =&gt; 'dc=macrohard,dc=com', # search scope (one|sub) SSCOPE =&gt; 'sub', UserDN =&gt; 'ldap-bot@macrohard.com', UserPw =&gt; 'bot-password!?', AlwaysFilter =&gt; '(&amp;(mail=*)(samAccountType=805306368)(!(userAccountControl:1.2.840.113556.1.4.803:=2)))', SourceCharset =&gt; 'utf-8', Die =&gt; 0, }, # customer unique id CustomerKey =&gt; 'sAMAccountName', # customer # CustomerID =&gt; 'company', CustomerUserListFields =&gt; ['sAMAccountName', 'cn', 'mail'], CustomerUserSearchFields =&gt; ['sAMAccountName', 'cn', 'mail'], CustomerUserSearchPrefix =&gt; '', CustomerUserSearchSuffix =&gt; '*', CustomerUserSearchListLimit =&gt; 250, CustomerUserPostMasterSearchFields =&gt; ['mail'], CustomerUserNameFields =&gt; ['sn', 'givenname'], # Configures the character for joining customer user name parts. Join single space if it is not defined. CustomerUserNameFieldsJoin =&gt; ' ', # show customer user and customer tickets in customer interface CustomerUserExcludePrimaryCustomerID =&gt; 0, AdminSetPreferences =&gt; 1, CacheTTL =&gt; 0, Map =&gt; [ [ 'UserTitle', Translatable('Title or salutation'), 'title', 1, 0, 'var', '', 1, undef, undef ], [ 'UserFirstname', Translatable('Firstname'), 'givenname', 1, 1, 'var', '', 1, undef, undef ], [ 'UserLastname', Translatable('Lastname'), 'sn', 1, 1, 'var', '', 1, undef, undef ], [ 'UserLogin', Translatable('Username'), 'sAMAccountName', 1, 1, 'var', '', 1, undef, undef ], [ 'UserFullLogin', Translatable('FullUsername'), 'userPrincipalName', 1, 1, 'var', '', 1, undef, undef ], [ 'UserEmail', Translatable('Email'), 'mail', 1, 1, 'var', '', 1, undef, undef ], [ 'UserCustomerID', Translatable('CustomerID'), 'company', 0, 1, 'var', '', 1, undef, undef ], [ 'UserPhone', Translatable('Phone'), 'telephoneNumber', 1, 0, 'var', '', 1, undef, undef ], [ 'UserMobile', Translatable('Mobile'), 'mobile', 1, 0, 'var', '', 1, undef, undef ], [ 'UserAddress', Translatable('Address'), 'postaladdress', 1, 0, 'var', '', 1, undef, undef ], [ 'UserOffice', Translatable('Office'), 'physicalDeliveryOfficeName', 1, 0, 'var', '', 1, undef, undef ], [ 'UserDepartment', Translatable('Department'), 'department', 1, 0, 'var', '', 1, undef, undef ], [ 'UserComment', Translatable('Comment'), 'description', 1, 0, 'var', '', 1, undef, undef ], ], };</span></span></code> </pre> <br><h2> 结论 </h2><br> 如您所见，在OTRS中设置身份验证和帐户同步非常简单，但是我希望本文对那些刚开始熟悉该系统的人有所帮助。 <br><br> 本文剩下什么呢？ <br><br><ul><li> 与LDAP并行运行时，您还可以运行SSO授权，这将使客户端的生活更加轻松。 </li><li> 如果您有Perl专家，则可以编写自己的后端以连接到其他信息系统。 </li><li> 故意简化了配置，例如，没有属于LDAP组的过滤单元，没有域后缀，BASE DN，使用其他属性，在其他端口上使用LDAP等 </li></ul><br> 在PM中的注释，错别字信息中欢迎提示和澄清。 <br><br> 谢谢您的关注。 特别感谢在多年以前当我被介绍给这个系统时在OTRS上使用的材料： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">Turilion</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">supersuperoleg</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">wmlex</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN437596/">https://habr.com/ru/post/zh-CN437596/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN437586/index.html">我们使用Google助手示例创建语音应用</a></li>
<li><a href="../zh-CN437588/index.html">用手机开发比用网络开发更有趣吗？</a></li>
<li><a href="../zh-CN437590/index.html">iPhone上的延迟数字</a></li>
<li><a href="../zh-CN437592/index.html">异步任务执行层架构</a></li>
<li><a href="../zh-CN437594/index.html">我如何消除所有游戏中卡顿和跳帧的原因，以及如何意外将温度降低15度</a></li>
<li><a href="../zh-CN437598/index.html">如何通过虚拟化从家用PC保存游戏系统</a></li>
<li><a href="../zh-CN437600/index.html">opencv4arts：画我的城市文森特</a></li>
<li><a href="../zh-CN437602/index.html">使用Android Studio剖析Unity项目</a></li>
<li><a href="../zh-CN437604/index.html">波函数崩溃：受量子力学启发的算法</a></li>
<li><a href="../zh-CN437606/index.html">谁吃了我们iPhone的记忆？ 苹果去皮</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>