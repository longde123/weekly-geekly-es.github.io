<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§‘ğŸ½â€ğŸ¤â€ğŸ§‘ğŸ» ğŸ”‘ ğŸ™…ğŸ» OTRSï¼šLDAPè®¤è¯ï¼Œæˆæƒå’ŒåŒæ­¥ï¼ˆFreeIPAï¼ŒADï¼‰ ğŸ›ŒğŸ¿ ğŸ‘¨ğŸ¼â€ğŸ”¬ ğŸ—</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="OTRSæ˜¯ç”¨Perlç¼–å†™çš„å¼€æºç¥¨åŠ¡è¯·æ±‚ç³»ç»Ÿã€‚ 

 æœ‰ä¸¤ç§é€‰æ‹©ï¼š 



- OTRSä¸šåŠ¡è§£å†³æ–¹æ¡ˆ-ä»˜è´¹ç‰ˆæœ¬ 
- ï¼ˆï¼ˆOTRSï¼‰ï¼‰ç¤¾åŒºç‰ˆ -å…è´¹ç‰ˆ 
 æˆ‘å°†åˆ—å‡ºè¯¥ç³»ç»Ÿæ”¯æŒçš„ä¸€äº›åŠŸèƒ½ ï¼š 



- ITSMæ¨¡å—ï¼ˆæœåŠ¡çº§åˆ«ç®¡ç†ï¼Œå˜æ›´ç®¡ç†ï¼Œé…ç½®ç®¡ç†ï¼ŒCMDBï¼‰ 
- å“åº”å¼Webç•Œé¢ 
- API 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OTRSï¼šLDAPè®¤è¯ï¼Œæˆæƒå’ŒåŒæ­¥ï¼ˆFreeIPAï¼ŒADï¼‰</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437596/"><img src="https://habrastorage.org/webt/it/eo/2d/iteo2de4gfi-h7dhk7hi1djav1a.png" alt="å›¾ç‰‡"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OTRS</a>æ˜¯ç”¨Perlç¼–å†™çš„å¼€æºç¥¨åŠ¡è¯·æ±‚ç³»ç»Ÿã€‚ <br><br> æœ‰ä¸¤ç§é€‰æ‹©ï¼š <br><br><ul><li>  OTRSä¸šåŠ¡è§£å†³æ–¹æ¡ˆ-ä»˜è´¹ç‰ˆæœ¬ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼ˆï¼ˆOTRSï¼‰ï¼‰ç¤¾åŒºç‰ˆ</a> -å…è´¹ç‰ˆ </li></ul><br> æˆ‘å°†åˆ—å‡ºè¯¥ç³»ç»Ÿæ”¯æŒçš„ä¸€äº›<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åŠŸèƒ½</a> ï¼š <br><br><ul><li>  ITSMæ¨¡å—ï¼ˆæœåŠ¡çº§åˆ«ç®¡ç†ï¼Œå˜æ›´ç®¡ç†ï¼Œé…ç½®ç®¡ç†ï¼ŒCMDBï¼‰ </li><li> å“åº”å¼Webç•Œé¢ </li><li>  API </li><li>  SLAå’ŒæœåŠ¡ </li><li> å¤šç§Ÿæˆ· </li><li> å‡çº§ </li><li>èº«ä»½éªŒè¯ï¼šDBï¼ŒLDAPï¼ŒHTTPBasicAuthï¼ŒRadius </li><li> æ”¯æŒMySQLï¼ŒMariaDBï¼ŒPostgreSQLï¼ŒOracle </li></ul><br> è€Œä¸”ï¼Œå¦‚æœæ‚¨å‘ç°å…¶ä¸­çš„ç¼ºé™·ï¼Œé‚£æ˜¯ä¸å¯»å¸¸çš„ç•Œé¢ï¼Œå¹¶ä¸”è®¾ç½®èµ·æ¥å¾ˆå¤æ‚ã€‚ é‡ç‚¹ä»‹ç»äº†ä½¿ç”¨å„ç§LDAPç›®å½•è¿›è¡Œæˆæƒï¼ˆç»„ï¼ŒRBACï¼Œå¯¹å¤šå®¶å®¢æˆ·å…¬å¸çš„æ”¯æŒï¼‰ï¼Œèº«ä»½éªŒè¯å’Œå…ƒæ•°æ®åŒæ­¥ï¼ˆåç§°ï¼Œç”µè¯ç­‰ï¼‰çš„åŸºç¡€çŸ¥è¯† <br><a name="habracut"></a><br><h2> å®¢æˆ·ç«¯ï¼Œé˜Ÿåˆ—ï¼Œä»£ç†å’Œç»„ </h2><br> å®‰è£…OTRSä¹‹åï¼Œæ‚¨å°†ç«‹å³å¯ä»¥è®¿é—®ï¼š <br><br><ul><li>  <b>å®¢æˆ·</b> -å¯ä»¥é€šè¿‡å‘é€ä¿¡ä»¶æˆ–ä½¿ç”¨Webè®¿é—®æ¥åˆ›å»ºåº”ç”¨ç¨‹åº </li><li>  <b>é˜Ÿåˆ—</b> -æ¯ä¸ªåº”ç”¨ç¨‹åºå±äºå…¶ä¸­ä¸€ä¸ªåº”ç”¨ç¨‹åºé˜Ÿåˆ— </li><li>  <b>ä»£ç†</b> -ä»ä»–ä»¬å¯ç”¨çš„é˜Ÿåˆ—ä¸­ä»äº‹åº”ç”¨ç¨‹åºæ‰§è¡Œçš„ITä¸“ä¸šäººå‘˜ </li><li>  <b>ç»„</b> -è¿æ¥é˜Ÿåˆ—ï¼Œå®¢æˆ·ç«¯å’Œä»£ç†ä»¥åŠè®¾ç½®ä»£ç†æƒé™çš„å®ä½“-ä¾‹å¦‚ï¼Œåªè¯»ï¼Œæ›´æ”¹åº”ç”¨ç¨‹åºçš„ä¼˜å…ˆçº§ç­‰ã€‚ </li></ul><br><img src="https://habrastorage.org/webt/5w/tc/yr/5wtcyrvgrlrl7uhahh_udj_1l9y.png" alt="å›¾ç‰‡"><br><br><h2> æ ‡å‡†ç»„ </h2><br> å®‰è£…ç³»ç»Ÿåï¼Œæ‚¨å°†çœ‹åˆ°ä¸‰ä¸ªåˆ›å»ºçš„ç»„ï¼š <br><br><ul><li>  <b>ç®¡ç†å‘˜</b> -ç»„æˆå‘˜å¯ä»¥ç®¡ç†ï¼ˆé…ç½®ï¼‰OTRS </li><li>  <b>ç»Ÿè®¡</b> -è‡ªå®šä¹‰å’Œè¿è¡ŒæŠ¥å‘Šçš„èƒ½åŠ› </li><li>  <b>ç”¨æˆ·</b> -å®¢æˆ·ç«¯ï¼Œé˜Ÿåˆ—å’Œä»£ç†çš„æ ‡å‡†ç»„ </li></ul><br><h2> é›†å›¢ç›¸å…³æƒåˆ© </h2><br><h3> åŸºæœ¬æƒåˆ© </h3><br> å¯ä»¥åœ¨é™åˆ¶ä»£ç†ç¨‹åºæ“ä½œçš„ç»„ä¸­é…ç½®çš„ä¸»è¦æƒé™ï¼š <br><br><ul><li> è¯¥ç»„/é˜Ÿåˆ—ä¸­åº”ç”¨ç¨‹åºä¸­çš„<b>åªè¯»</b>æƒé™ </li><li>  <b>move-</b>å°†è¯·æ±‚ç§»è‡³è¯¥ç»„/é˜Ÿåˆ—çš„æƒé™ </li><li>  <b>åˆ›å»º</b> -åœ¨æ­¤ç»„/é˜Ÿåˆ—ä¸­åˆ›å»ºåº”ç”¨ç¨‹åºçš„æƒé™ </li><li>  <b>note-</b>å‘è¯¥ç»„/é˜Ÿåˆ—ä¸­çš„åº”ç”¨ç¨‹åºæ·»åŠ æ³¨é‡Šçš„æƒé™ </li><li>  <b>owner-</b>æ›´æ”¹æ­¤ç»„/é˜Ÿåˆ—ä¸­åº”ç”¨ç¨‹åºæ‰€æœ‰è€…çš„æƒé™ </li><li>  <b>ä¼˜å…ˆçº§</b> -æ›´æ”¹æ­¤ç»„/é˜Ÿåˆ—ä¸­åº”ç”¨ç¨‹åºä¼˜å…ˆçº§çš„æƒé™ </li><li>  <b>è¯»å–/å†™å…¥</b> -å¯¹è¯¥ç»„/é˜Ÿåˆ—ä¸­çš„è¯·æ±‚å…·æœ‰å®Œå…¨çš„è¯»å–å’Œå†™å…¥æƒé™ </li></ul><br><h3> é™„åŠ æƒåˆ© </h3><br> è¿˜å…·æœ‰å…¶ä»–æƒé™ï¼Œå¯ä»¥åœ¨è®¾ç½®ï¼ˆç³»ç»Ÿ::æƒé™ï¼‰ä¸­å¯ç”¨å…¶æ˜¾ç¤ºï¼š <br><br><ul><li>  <b>æŠ¥å‘Š</b> -æä¾›å¯¹æŠ¥å‘Šé¡µé¢çš„è®¿é—® </li><li>  <b>redirect-</b>é‡å®šå‘/é€€å›é‚®ä»¶æ¶ˆæ¯çš„æƒåˆ©ï¼ˆticketZoomä¸­çš„é‡å®šå‘/é€€å›é“¾æ¥ï¼‰ </li><li>  <b>åˆ›å»º</b> -æœ‰æƒå¯¹ç”³è¯·åšå‡ºå›åº” </li><li>  <b>å®¢æˆ·</b> -æ›´æ”¹æ­¤åº”ç”¨ç¨‹åºçš„å®¢æˆ·çš„æƒåˆ© </li><li>  <b>forward-</b>è½¬å‘æ¶ˆæ¯çš„æƒåˆ©ï¼ˆä½¿ç”¨â€œè½¬å‘â€æŒ‰é’®ï¼‰ </li><li>  <b>å¾…å®š</b> -è½¬ç§»<b>å¾…å®šç”³è¯·</b>çš„æƒåˆ© </li><li>  <b>ç”µè¯</b> -ä»¥æ¶ˆæ¯/ä¾¿ç¬ºçš„å½¢å¼å°†å®¢æˆ·é€šè¯å†…å®¹æ·»åŠ åˆ°åº”ç”¨ç¨‹åºçš„æƒåˆ© </li><li>  <b>è´Ÿè´£äºº</b> -æ›´æ”¹è´Ÿè´£ç”³è¯·è€…çš„æƒåˆ© </li></ul><br> æ›´è¯¦ç»†åœ°è€ƒè™‘è¿™ä¸€ç‚¹ï¼š <br><br><ul><li> æ¯ä¸ªå®¢æˆ·ç«¯å¯ä»¥åŒ…å«åœ¨ä¸€ä¸ªæˆ–å‡ ä¸ªç»„ä¸­ï¼Œæœ€åˆæ‰€æœ‰å®¢æˆ·ç«¯éƒ½æ˜¯ç”¨æˆ·ç»„çš„æˆå‘˜ </li><li> æ¯ä¸ªè®¢å•é˜Ÿåˆ—éƒ½ä¸ä»»ä½•ä¸€ä¸ªç»„ç›¸å…³è” </li><li> é€šè¿‡Webç•Œé¢ï¼Œå®¢æˆ·ç«¯å¯ä»¥åœ¨é˜Ÿåˆ—ä¸­å‘å‡ºè¯·æ±‚ï¼Œè¿™äº›é˜Ÿåˆ—ä¸­åŒ…æ‹¬ä»–çš„ç»„å¯ä»¥è®¿é—® </li><li> å½“å®¢æˆ·é€šè¿‡ç”µå­é‚®ä»¶å‘é€è¯·æ±‚æ—¶ï¼Œå¯ä»¥æ ¹æ®å¯¹ä¿¡ä»¶å±æ€§ï¼ˆä¾‹å¦‚ï¼Œå‘ä»¶äººçš„åœ°å€æˆ–ä¿¡ä»¶æ ‡é¢˜ï¼‰çš„åˆ†ææ¥æ›´æ”¹åº”ç”¨ç¨‹åºçš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬åº”ç”¨ç¨‹åºå°†è¦è¿›å…¥çš„é˜Ÿåˆ— </li><li> å¦‚æœå®¢æˆ·ç«¯é€šè¿‡ç”µè¯å‘¼å«ï¼Œåˆ™ä»£ç†å¯ä»¥é€šè¿‡é€‰æ‹©ä»£ç†å¯ç”¨çš„ä»»ä½•é˜Ÿåˆ—æ¥æ‰‹åŠ¨åˆ›å»ºåº”ç”¨ç¨‹åº </li><li> å¸Œæœ›å®¢æˆ·ç«¯çš„åº”ç”¨ç¨‹åºå§‹ç»ˆå¤„äºå®¢æˆ·ç«¯å¯ç”¨çš„é˜Ÿåˆ—ä¸­ï¼Œå¦åˆ™ä»–å°†æ— æ³•é€šè¿‡Webç•Œé¢è®¿é—®è¯¥åº”ç”¨ç¨‹åº </li><li> ä»£ç†å¯ä»¥æ ¹æ®åº”ç”¨ç¨‹åºæ‰€åœ¨é˜Ÿåˆ—çš„æƒé™åœ¨åº”ç”¨ç¨‹åºä¸­æ‰§è¡Œæ“ä½œ </li></ul><br><img src="https://habrastorage.org/webt/eh/xz/8g/ehxz8gmrdrbni4babbqwj_cfxmk.png" alt="å›¾ç‰‡"><br><br><h2> æ•°æ®åº“è®¤è¯ </h2><br> èº«ä»½éªŒè¯å’Œæˆæƒä»£ç†å’Œå®¢æˆ·ç«¯çš„æ ‡å‡†æ–¹æ³•æ˜¯é€šè¿‡æ•°æ®åº“ã€‚ <br><br> ä¾‹å¦‚ï¼Œä½¿ç”¨æ•°æ®åº“è®¾ç½®ä»£ç†èº«ä»½éªŒè¯å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre><code class="perl hljs">$Self-&gt;{<span class="hljs-string"><span class="hljs-string">'AuthModule'</span></span>} = <span class="hljs-string"><span class="hljs-string">'Kernel::System::Auth::DB'</span></span>;</code> </pre> <br> å®¢æˆ·ï¼š <br><br><pre> <code class="perl hljs">$Self-&gt;{<span class="hljs-string"><span class="hljs-string">'Customer::AuthModule'</span></span>} = <span class="hljs-string"><span class="hljs-string">'Kernel::System::CustomerAuth::DB'</span></span>; $Self-&gt;{<span class="hljs-string"><span class="hljs-string">'Customer::AuthModule::DB::Table'</span></span>} = <span class="hljs-string"><span class="hljs-string">'customer_user'</span></span>; $Self-&gt;{<span class="hljs-string"><span class="hljs-string">'Customer::AuthModule::DB::CustomerKey'</span></span>} = <span class="hljs-string"><span class="hljs-string">'login'</span></span>; $Self-&gt;{<span class="hljs-string"><span class="hljs-string">'Customer::AuthModule::DB::CustomerPassword'</span></span>} = <span class="hljs-string"><span class="hljs-string">'pw'</span></span>;</code> </pre> <br> æˆ‘ä»¬è¿˜å°†ä¿ç•™æ­¤èº«ä»½éªŒè¯æ–¹æ³•ï¼Œå¹¶é€šè¿‡LDAPæ·»åŠ èº«ä»½éªŒè¯ã€‚ <br><br><h2> è§’è‰²å’Œå…¬å¸ </h2><br> æˆ‘ä»¬è¿˜å°†é€šè¿‡æ·»åŠ è§’è‰²å’Œå…¬å¸æ¥æ‰©å±•æˆæƒåŠŸèƒ½ï¼š <br><br><ul><li>  <b>è§’è‰²</b> -é€šè¿‡è¿æ¥ç»„å’Œä»£ç†å…è®¸æ›´çµæ´»çš„è®¿é—®æ§åˆ¶ </li><li>  <b>å…¬å¸</b> -å…è®¸éš”ç¦»å„ç§å®¢æˆ·çš„åº”ç”¨ç¨‹åºï¼ˆæ— è®ºæ˜¯ä¸åŒéƒ¨é—¨è¿˜æ˜¯å…¬å¸ï¼‰ </li></ul><br><img src="https://habrastorage.org/webt/dm/59/ti/dm59titblhtfolxudg69gyp3bs0.png" alt="å›¾ç‰‡"><br><br><h2> é—®é¢˜é™ˆè¿° </h2><br> æ‚¨æ˜¯my-it-company.comä¸ŠOTRSç³»ç»Ÿçš„ç®¡ç†å‘˜ï¼Œè¯¥å…¬å¸å‘å…¶ä»–å…¬å¸ï¼ˆæˆ–æ‚¨æ‰€æ‹¥æœ‰çš„å•ä½ï¼‰æä¾›æœåŠ¡ã€‚ <br><br> æ‚¨ç¡®å®ä¸å¸Œæœ›æ‰‹åŠ¨åˆ›å»ºæ–°çš„ä»£ç†å’Œå®¢æˆ·å¸æˆ·ï¼Œä¹Ÿä¸å¸Œæœ›å¡«å†™å…¶ä»–ä¿¡æ¯ï¼Œä¾‹å¦‚ç”µå­é‚®ä»¶åœ°å€ï¼Œç”µè¯å·ç ï¼ŒèŒä½ï¼Œåœ°å€å’Œå†…é˜ç¼–å·-æ¯•ç«Ÿï¼Œè¿™å·²ç»åœ¨LDAPç›®å½•ä¸­ã€‚ <br><br> æ‚¨çš„å…¬å¸è¿˜å°†è·å¾—æ˜æ˜¾çš„ä¼˜åŠ¿-åœ¨æ‰€æœ‰ç³»ç»Ÿä¸­ä½¿ç”¨å•ä¸ªå‘˜å·¥å¯†ç ï¼Œåœ¨LDAPä¸­é˜»æ­¢å¸æˆ·å°†é˜»æ­¢å¯¹æ‰€æœ‰å…¶ä»–æœåŠ¡çš„è®¿é—®ã€‚ <br><br>  <i>my-it-company.com</i>åœ¨Linuxä¸Šè¿è¡Œï¼Œå¹¶ä½¿ç”¨Red Hat FreeIPAä½œä¸ºç›®å½•æœåŠ¡å™¨ï¼Œæ‚¨æ‰€æœåŠ¡çš„éƒ¨é—¨ä½¿ç”¨å„ç§Microsoft Active Directoryæ—ï¼Œæ‚¨æ²¡æœ‰è¯¥æ—å…·æœ‰è”åˆèº«ä»½ï¼Œä½†å¯ä»¥è¿æ¥åˆ°åŸŸæ§åˆ¶å™¨ã€‚ <br><br> æ‚¨éœ€è¦å°†åº”ç”¨ç¨‹åºæµä¸ä¸åŒçš„å®¢æˆ·ç«¯åˆ†å¼€ï¼Œå¹¶å®ç°å¯¹é˜Ÿåˆ—çš„ä¸åŒçº§åˆ«çš„ä»£ç†è®¿é—®æƒé™-ç®¡ç†è€…åº”è¯¥èƒ½å¤Ÿæ›´æ”¹ç³»ç»Ÿä¸­ä»»åŠ¡çš„ä¼˜å…ˆçº§ã€‚ <br><br> æ‚¨å…¬å¸çš„å‘˜å·¥è¿˜å¯ä»¥æ ¹æ®<i>my-it-company.com</i>çš„å†…éƒ¨éœ€æ±‚åœ¨ç³»ç»Ÿä¸­è®¾ç½®ä»»åŠ¡ï¼Œæœ‰æ—¶æ—¢æ˜¯ä»£ç†å•†åˆæ˜¯å®¢æˆ·ï¼ˆæœ‰æ—¶ä¸æ˜¯åŒæ—¶ï¼‰ã€‚ <br><br><img src="https://habrastorage.org/webt/rb/je/y4/rbjey4jhao-a1f-h1eqfsqvrbwg.png" alt="å›¾ç‰‡"><br><br><h2> å‡†å¤‡å·¥ä½œ </h2><br><h3> æŸ¥çœ‹LDAPçš„å¸æˆ· </h3><br> å¦‚æœç¦æ­¢åŒ¿åæµè§ˆç›®å½•æ ‘ï¼Œæˆ‘ä»¬å°†åœ¨å…·æœ‰è¶³å¤Ÿæƒé™è¿›è¡ŒLDAPæŸ¥è¯¢çš„åŸŸå<i>my-it-company.com</i> ï¼Œ <i>pear.com</i>å’Œ<i>macrohard.comä¸­</i>åˆ›å»ºå¸æˆ·ï¼ˆæˆ‘ä»¬ç§°å®ƒä»¬ä¸ºldap-botï¼‰ <br><br><h3>  FreeIPAç»„ä¸OTRSè§’è‰²åŒæ­¥ </h3><br> æˆ‘ä»¬å°†åœ¨FreeIPAä¸Šåˆ›å»ºä¸‰ç»„ç”¨æˆ·ï¼Œè¿™ä¸‰ç»„ç”¨æˆ·å°†ä¸æˆ‘ä»¬çš„OTRSè§’è‰²åŒæ­¥ï¼Œä¾‹å¦‚ï¼š <br><br><ul><li>  <b>otrs-sa-</b>è¯¥ç»„çš„æˆå‘˜å°†æœ‰æƒè®¿é—®OTRSç®¡ç†ï¼Œä½†æˆ‘ä»¬ä¸ä¼šæˆäºˆå¯¹é˜Ÿåˆ—çš„è®¿é—®æƒé™ï¼Œå› æ­¤æˆ‘ä»¬ä¸æƒ³ä¸€ç›´åœ¨ç®¡ç†å‘˜çš„é¢†å¯¼ä¸‹å·¥ä½œï¼‰ï¼Œ </li><li>  <b>otrs-admins-</b>æˆ‘ä»¬çš„ç»ç†æœ‰æƒæ›´æ”¹åº”ç”¨ç¨‹åºçš„ä¼˜å…ˆçº§ï¼‰å’Œ </li><li>  <b>otrs-æœåŠ¡å°</b> -æˆ‘ä»¬çš„ä¸“å®¶å¸æˆ· </li></ul><br><h3> å…¬å¸å±æ€§ </h3><br> é€‰æ‹©æˆ‘ä»¬ç”¨æ¥ç¡®å®šä¸å…¬å¸çš„éš¶å±å…³ç³»çš„å±æ€§ã€‚ ä½¿å…¶æˆä¸ºâ€œç»„ç»‡â€å±æ€§ã€‚ ä¾‹å¦‚ï¼Œä»ç»„ç»‡å’ŒæŠ€æœ¯è§’åº¦è®²ï¼Œä¸€åˆ‡éƒ½å˜å¾—å¦‚æ­¤ï¼Œå¹¶ä¸”æ‰€æœ‰åŸŸä¸­çš„æ‰€æœ‰ç”¨æˆ·å§‹ç»ˆåœ¨â€œç»„ç»‡â€å­—æ®µä¸­å…·æœ‰å€¼ï¼š <br><br><ul><li>  <b>æˆ‘çš„å…¬å¸</b> -é€‚ç”¨äºmy-it-company.comçš„å‘˜å·¥ </li><li>  <b>æ¢¨å…¬å¸</b> -é’ˆå¯¹pear.comçš„å‘˜å·¥ </li><li>  <b>macrohard-company-</b>é€‚ç”¨äºmacrohard.comçš„å‘˜å·¥ </li></ul><br><h3> å®šä¹‰FreeIPAä½¿ç”¨çš„ç”¨æˆ·å±æ€§ </h3><br> æˆ‘ä»¬ç ”ç©¶FreeIPAæ–¹æ¡ˆï¼Œæ‰¾å‡ºåŒæ­¥æ‰€éœ€çš„å±æ€§åç§°ï¼ˆåç§°ï¼Œç™»å½•åï¼Œç”µè¯ç­‰ï¼‰ã€‚ <br><br><pre> <code class="bash hljs">kinit laptevs ipa user-show --all --raw laptevs</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">æˆ‘ä»¬å¾—å‡ºç±»ä¼¼çš„ç»“è®ºï¼š</b> <div class="spoiler_text">  dnï¼šuid = laptevsï¼Œcn =ç”¨æˆ·ï¼Œcn =å¸æˆ·ï¼Œdc =æˆ‘çš„å…¬å¸ï¼Œdc = com <br>  uidï¼šlaptevs <br> åˆ«åï¼šæ–¯å¦å°¼æ–¯æ‹‰å¤« <br>  snï¼šæ‹‰æ™®æ·å¤« <br>  cnï¼šLaptev Stanislav <br> é¦–å­—æ¯ç¼©å†™ï¼šSL <br> ä¸»ç›®å½•ï¼š/ home / laptevs <br>  gecosï¼šæ‹‰æ™®æ·å¤«Â·æ–¯å¦å°¼æ–¯æ‹‰å¤« <br>  loginshellï¼š/ bin / sh <br>  krbcanonicalnameï¼šlaptevs@MY-IT-COMPANY.COM <br>  krbprincipalnameï¼šlaptevs@MY-IT-COMPANY.COM <br> é‚®ä»¶ï¼šlaptevs@MY-IT-COMPANY.COM <br>  uidnumberï¼š1344600003 <br>  gidnumberï¼š1344600003 <br>  lï¼šè«æ–¯ç§‘ <br> ç”µè¯å·ç ï¼š+7ï¼ˆ863ï¼‰999-99-99 <br> æ‰‹æœºï¼š+7ï¼ˆ999ï¼‰999-99-99 <br>  ouï¼šæˆ‘çš„å…¬å¸ <br> æ ‡é¢˜ï¼šSysAdm <br>  sshpubkeyfpï¼šSHA256ï¼šYi8mKF + j28 / r2cpxLgIbvZ / Oymt57rhliHKhqBuJxqE laptevs-puttyï¼ˆssh-rsaï¼‰ <br>  nsaccountlockï¼šå¦ <br>  has_passwordï¼šTRUE <br>  has_keytabï¼šTRUE <br>  displayNameï¼šLaptev Stanislav <br>  ipaSshPubKeyï¼šc3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBQkpRQUFBZ0VBNjQ1RTJjSjIvWXVVYm9GNzdZY3hLNzBndm1jWlgrZjBZTVpsaXRQVXNCWFZ0cENtTEtwcjRwK2JEeUdhRzNLTWx1T08ydW9wS0pXRk9mWE83Zzl3OTYzdklQblN3MzVHSmI3VGhhbk1pTXpNUE82T1lQZEY0em14b2k4N 0RGYkdXV2V6aGwzcitsbmFGYTB0dEQ5TkFWRU1Fb3BMdmkzcHZ1UXpyVmNjVlMxamFxY1dNT2ZGUC9TRlVoY1dGeVpZd3Z6eW0wWnZObUZtdjVjVHJGNzJMSXZOdHlsNkZGK2ZaU3ZpS01mcXZ6NStkT2xZZGd5bVVSOG5iaVpkTXZKaTIvbzhjTy84ekpoMFhtSnVRSjJXNEVvYVEvajVTTm8ySjZ6NklXNk I3cFB4Y002a0tJcUp5N08zTkNOcGRrVmVQbEFHbThsOFZDREpVa1RLSjRGOS9mSTZFUkhxVUZwK3p1VENTR1R3ZWlKdXppenFSZWJTTkNiMXh3RldmUitvYzFLdWNZSU5QbTYxRi93YXhOcC9aSG9OK2w1dCtkYWI4cElZSGZzTnNUNWx2RWt4Ukh0bnNyeUxsbWk1ZVdzd3RBbDB3TUpWd1cvUWNJcjhOaVN Ybm96Q3dHWTZCaTQ2L0FGTGVidmFLV0tKRmpKZFgxOFlRVDRpVzZGaE83aW40TGlUamlNaENXbStvbjNQbERYeXZpdkJ1WkFXUldXNEdjbXREVW8rSVhZT2t3MWh3UldqdkJtcExHMVZpMFhPckltbmQybTVZdWk1bHo0b1ZlekFRN1NjYVlrdDBoVEdQU1Z2UHpmVlowYWJCQlpiRmViK1hUV2tpSnBPMHBO T3dodGNadHYrN3RMMnc1OFN3QnhVTUk4NzUzdG5Sc1h1blBXZERqcUsxSDA9IGxhcHRldnMtcHV0dHk = <br>  ipaUniqueIDï¼š68d46dac-1d3c-11e9-82fd-0242ac110002 <br>  krbExtraDataï¼šAAL4VkVcbGFwdGV2c0BPTUlLUk9OLlBSTwA = <br>  krbLastFailedAuthï¼š20190123084142Z <br>  krbLastPwdChangeï¼š20190121052200Z <br>  krbLoginFailedCountï¼š0 <br>  krbPasswordåˆ°æœŸæ—¶é—´ï¼š20190421052200Z <br> æˆå‘˜ï¼šcn = otrs-adminsï¼Œcn =ç»„ï¼Œcn =å¸æˆ·ï¼Œdc =æˆ‘çš„å…¬å¸ï¼Œdc = com <br> æˆå‘˜ï¼šcn = ipausersï¼Œcn =ç»„ï¼Œcn =å¸æˆ·ï¼Œdc =æˆ‘çš„å…¬å¸ï¼Œdc = com <br>  mepManagedEntryï¼šcn = laptevsï¼Œcn =ç»„ï¼Œcn =å¸æˆ·ï¼Œdc =æˆ‘çš„å…¬å¸ï¼Œdc = com <br>  objectClassï¼šé¡¶éƒ¨ <br>  objectClassï¼šäºº <br>  objectClassï¼šç»„ç»‡äººå‘˜ <br>  objectClassï¼šinetorgperson <br>  objectClassï¼šinetuser <br>  objectClassï¼šposixaccount <br>  objectClassï¼škrbprincipalaux <br>  objectClassï¼škrbticketpolicyaux <br>  objectClassï¼šipaobject <br>  objectClassï¼šipasshuser <br>  objectClassï¼šipaSshGroupOfPubKeys <br>  objectClassï¼šmepOriginEntry </div></div><br>  <b>dn</b> ï¼šuid = laptevsï¼Œcn =ç”¨æˆ·ï¼Œcn =å¸æˆ·ï¼Œdc =æˆ‘çš„å…¬å¸ï¼Œdc = com <br>  <b>uid</b> ï¼šlaptevs <br>  <b>åå­—</b> ï¼šStanislav <br>  <b>sn</b> ï¼šæ‹‰æ™®æ·å¤« <br>  <b>cn</b> ï¼šæ‹‰æ™®æ·å¤«Â·æ–¯å¦å°¼æ–¯æ‹‰å¤«ï¼ˆLaptev Stanislavï¼‰ <br>  <b>é‚®ä»¶</b> ï¼šlaptevs@MY-IT-COMPANY.COM <br>  <b>l</b> ï¼šè«æ–¯ç§‘ <br>  <b>ç”µè¯å·ç </b> ï¼š+7ï¼ˆ863ï¼‰999-99-99 <br>  <b>æ‰‹æœº</b> ï¼š+7ï¼ˆ999ï¼‰999-99-99 <br>  <b>ou</b> ï¼šæˆ‘çš„å…¬å¸ <br>  <b>æ ‡é¢˜</b> ï¼šSysAdm <br><br><h2> é…ç½®OTRS </h2><br><h3> é…ç½®æ–‡ä»¶ </h3><br><ul><li>  <b>/ opt / otrs /</b> -é€šå¸¸ï¼ŒOTRSç³»ç»Ÿæ–‡ä»¶ä½äºæ­¤å¤„ </li><li>  <b>å†…æ ¸/ Config.pm-</b>æ‚¨æ­£åœ¨ç¼–è¾‘çš„é…ç½®æ–‡ä»¶ </li><li>  <b>Kernel / Config / Defaults.pm-</b>å…·æœ‰æ ‡å‡†è®¾ç½®çš„æ–‡ä»¶ï¼Œæ‚¨æ— æ³•å¯¹å…¶è¿›è¡Œç¼–è¾‘ï¼Œä½†å¯ä»¥åœ¨å…¶ä¸­æŸ¥çœ‹æ‰€æœ‰ç°æœ‰å‚æ•°å¹¶å¯¹å…¶è¿›è¡Œæ³¨é‡Š </li></ul><br><h3> ä»£ç†è®¾å®š </h3><br><h4> ä»£ç†éªŒè¯ </h4><br><pre> <code class="perl hljs"> <span class="hljs-comment"><span class="hljs-comment"># --------------------------------------------------- # # Agents authentication # # --------------------------------------------------- # # my-it-company.com LDAP backend $Self-&gt;{AuthModule} = 'Kernel::System::Auth::LDAP'; #  LDAP- $Self-&gt;{'AuthModule::LDAP::Host'} = 'my-it-company.com'; $Self-&gt;{'AuthModule::LDAP::BaseDN'} = 'dc=my-it-company,dc=com'; $Self-&gt;{'AuthModule::LDAP::UID'} = 'uid'; #  ,        $Self-&gt;{'AuthModule::LDAP::SearchUserDN'} = 'uid=ldap-bot,cn=users,cn=accounts,dc=my-it-company,dc=com'; $Self-&gt;{'AuthModule::LDAP::SearchUserPw'} = 'bot-password!'; #    LDAP.      ,    " " $Self-&gt;{'AuthModule::LDAP::AlwaysFilter'} = '(mail=*)'; #      $Self-&gt;{'AuthModule::LDAP::Charset'} = 'utf-8'; $Self-&gt;{'AuthModule::UseSyncBackend'} = 'AuthSyncBackend'; # my-it-company.com DB backend $Self-&gt;{AuthModule2} = 'Kernel::System::Auth::DB'; $Self-&gt;{'AuthModule::DB::CryptType2'} = 'sha2'; # --------------------------------------------------- # # End Agents authentication # # --------------------------------------------------- #</span></span></code> </pre> <br><h4> åŒæ­¥ä»£ç†ï¼ˆå…·æœ‰OTRSè§’è‰²çš„LDAPç»„ï¼‰ </h4><br><pre> <code class="perl hljs"> <span class="hljs-comment"><span class="hljs-comment"># --------------------------------------------------- # # Agent authentication sync # # (enable agent data sync. after succsessful # # authentication) # # --------------------------------------------------- # # my-it-company.com LDAP auth sync. backend. $Self-&gt;{AuthSyncModule} = 'Kernel::System::Auth::Sync::LDAP'; $Self-&gt;{'AuthSyncModule::LDAP::Host'} = 'my-it-company.com'; $Self-&gt;{'AuthSyncModule::LDAP::BaseDN'} = 'dc=my-it-company,dc=com'; $Self-&gt;{'AuthSyncModule::LDAP::UID'} = 'uid'; $Self-&gt;{'AuthSyncModule::LDAP::SearchUserDN'} = 'uid=ldap-bot,cn=users,cn=accounts,dc=my-it-company,dc=com'; $Self-&gt;{'AuthSyncModule::LDAP::SearchUserPw'} = 'bot-password!'; $Self-&gt;{'AuthSyncModule::LDAP::AlwaysFilter'} = '(mail=*)'; $Self-&gt;{'AuthSyncModule::LDAP::UserSyncMap'} = { # DB -&gt; LDAP UserFirstname =&gt; 'givenName', UserLastname =&gt; 'sn', UserEmail =&gt; 'mail', }; $Self-&gt;{'AuthSyncModule::LDAP::AccessAttr'} = 'member'; $Self-&gt;{'AuthSyncModule::LDAP::UserAttr'} = 'DN'; $Self-&gt;{'AuthSyncModule::LDAP::UserSyncRolesDefinition'} = { # ldap group 'cn=otrs-sa,cn=groups,cn=accounts,dc=my-it-company,dc=com' =&gt; { # otrs role 'otrs-sa' =&gt; 1, }, 'cn=otrs-admins,cn=groups,cn=accounts,dc=my-it-company,dc=com' =&gt; { 'otrs-admins' =&gt; 1, }, 'cn=otrs-helpdesk,cn=groups,cn=accounts,dc=my-it-company,dc=com' =&gt; { 'helpdesk' =&gt; 1, } }; $Self-&gt;{DatabaseUserTable} = 'users'; $Self-&gt;{DatabaseUserTableUserID} = 'id'; $Self-&gt;{DatabaseUserTableUserPW} = 'pw'; $Self-&gt;{DatabaseUserTableUser} = 'login'; # --------------------------------------------------- # # End Agents authentication sync # # --------------------------------------------------- #</span></span></code> </pre><br> å¦‚æœæ‚¨è®¤ä¸ºè§’è‰²ä¸é€‚åˆæ‚¨ï¼Œå¹¶ä¸”åªæƒ³è¦ç»„ï¼Œé‚£ä¹ˆæˆ‘å°†ä¸¾ä¸¤ä¸ªå°†LDAPç»„ä¸OTRSç»„åŒæ­¥çš„ç¤ºä¾‹-ç®€åŒ–åçš„ç¤ºä¾‹ï¼Œå¹¶ä¸ºæ¯ä¸ªç»„è®¾ç½®æƒé™ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å¤‡ç”¨ä»£ç†åŒæ­¥ï¼ˆå…·æœ‰OTRSç»„çš„LDAPç»„ï¼Œå…·æœ‰æƒé™ï¼‰</b> <div class="spoiler_text"><pre> <code class="perl hljs"> <span class="hljs-comment"><span class="hljs-comment"># --------------------------------------------------- # # Agent authentication sync # # (enable agent data sync. after succsessful # # authentication) # # --------------------------------------------------- # # my-it-company.com LDAP auth sync. backend. $Self-&gt;{AuthSyncModule} = 'Kernel::System::Auth::Sync::LDAP'; $Self-&gt;{'AuthSyncModule::LDAP::Host'} = 'my-it-company.com'; $Self-&gt;{'AuthSyncModule::LDAP::BaseDN'} = 'dc=my-it-company,dc=com'; $Self-&gt;{'AuthSyncModule::LDAP::UID'} = 'uid'; $Self-&gt;{'AuthSyncModule::LDAP::SearchUserDN'} = 'uid=ldap-bot,cn=users,cn=accounts,dc=my-it-company,dc=com'; $Self-&gt;{'AuthSyncModule::LDAP::SearchUserPw'} = 'bot-password!'; $Self-&gt;{'AuthSyncModule::LDAP::AlwaysFilter'} = '(mail=*)'; $Self-&gt;{'AuthSyncModule::LDAP::UserSyncMap'} = { # DB -&gt; LDAP UserFirstname =&gt; 'givenName', UserLastname =&gt; 'sn', UserEmail =&gt; 'mail', }; $Self-&gt;{'AuthSyncModule::LDAP::AccessAttr'} = 'member'; $Self-&gt;{'AuthSyncModule::LDAP::UserAttr'} = 'DN'; # AuthSyncModule::LDAP::UserSyncGroupsDefinition # (If "LDAP" was selected for AuthModule and you want to sync LDAP # groups to otrs groups, define the following.) $Self-&gt;{'AuthSyncModule::LDAP::UserSyncGroupsDefinition'} = { # ldap group 'cn=otrs-admins,cn=groups,cn=accounts,dc=my-it-company,dc=com' =&gt; { # otrs group 'admin' =&gt; { # permission rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, 'stats' =&gt; { rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, 'users' =&gt; { rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, 'pear-group' =&gt; { rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, 'macrohard-group' =&gt; { rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, }, 'cn=otrs-helpdesk,cn=groups,cn=accounts,dc=my-it-company,dc=com' =&gt; { 'stats' =&gt; { rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, 'users' =&gt; { rw =&gt; 1, move_into =&gt; 1, create =&gt; 1, note =&gt; 1, owner =&gt; 1, prioriry =&gt; 1, ro =&gt; 1, }, } }; $Self-&gt;{DatabaseUserTable} = 'users'; $Self-&gt;{DatabaseUserTableUserID} = 'id'; $Self-&gt;{DatabaseUserTableUserPW} = 'pw'; $Self-&gt;{DatabaseUserTableUser} = 'login'; # --------------------------------------------------- # # End Agents authentication sync # # --------------------------------------------------- #</span></span></code> </pre> <br><br></div></div><br><div class="spoiler">  <b class="spoiler_title">æ›¿ä»£çš„ç®€åŒ–ä»£ç†åŒæ­¥ï¼ˆå…·æœ‰OTRSè§’è‰²ä¸”å…·æœ‰rwç‰¹æƒçš„LDAPç»„ï¼‰</b> <div class="spoiler_text"><pre> <code class="perl hljs"> <span class="hljs-comment"><span class="hljs-comment"># --------------------------------------------------- # # Agent authentication sync # # (enable agent data sync. after succsessful # # authentication) # # --------------------------------------------------- # # my-it-company.com LDAP auth sync. backend. $Self-&gt;{AuthSyncModule} = 'Kernel::System::Auth::Sync::LDAP'; $Self-&gt;{'AuthSyncModule::LDAP::Host'} = 'my-it-company.com'; $Self-&gt;{'AuthSyncModule::LDAP::BaseDN'} = 'dc=my-it-company,dc=com'; $Self-&gt;{'AuthSyncModule::LDAP::UID'} = 'uid'; $Self-&gt;{'AuthSyncModule::LDAP::SearchUserDN'} = 'uid=ldap-bot,cn=users,cn=accounts,dc=my-it-company,dc=com'; $Self-&gt;{'AuthSyncModule::LDAP::SearchUserPw'} = 'bot-password!'; $Self-&gt;{'AuthSyncModule::LDAP::AlwaysFilter'} = '(mail=*)'; $Self-&gt;{'AuthSyncModule::LDAP::UserSyncMap'} = { # DB -&gt; LDAP UserFirstname =&gt; 'givenName', UserLastname =&gt; 'sn', UserEmail =&gt; 'mail', }; $Self-&gt;{'AuthSyncModule::LDAP::AccessAttr'} = 'member'; $Self-&gt;{'AuthSyncModule::LDAP::UserAttr'} = 'DN'; #    -     / # AuthSyncModule::LDAP::UserSyncInitialGroups # (sync following group with rw permission after initial create of first agent # login) $Self-&gt;{'AuthSyncModule::LDAP::UserSyncInitialGroups'} = [ 'users', ]; $Self-&gt;{DatabaseUserTable} = 'users'; $Self-&gt;{DatabaseUserTableUserID} = 'id'; $Self-&gt;{DatabaseUserTableUserPW} = 'pw'; $Self-&gt;{DatabaseUserTableUser} = 'login'; # --------------------------------------------------- # # End Agents authentication sync # # --------------------------------------------------- #</span></span></code> </pre> <br><br></div></div><br><h3> å®¢æˆ·è®¾ç½® </h3><br><h4> å®¢æˆ·è®¤è¯ </h4><br><pre> <code class="perl hljs"> <span class="hljs-comment"><span class="hljs-comment"># --------------------------------------------------- # # ustomer authentication # # --------------------------------------------------- # # ustomer DB auth. backend $Self-&gt;{'Customer::AuthModule'} = 'Kernel::System::CustomerAuth::DB'; $Self-&gt;{'Customer::AuthModule::DB::Table'} = 'customer_user'; $Self-&gt;{'Customer::AuthModule::DB::CustomerKey'} = 'login'; $Self-&gt;{'Customer::AuthModule::DB::CustomerPassword'} = 'pw'; # my-it-company.com (ustomer) LDAP auth. backend $Self-&gt;{'Customer::AuthModule2'} = 'Kernel::System::CustomerAuth::LDAP'; $Self-&gt;{'Customer::AuthModule::LDAP::Host2'} = 'my-it-company.com'; $Self-&gt;{'Customer::AuthModule::LDAP::BaseDN2'} = 'dc=my-it-company,dc=com'; $Self-&gt;{'Customer::AuthModule::LDAP::UID2'} = 'uid'; $Self-&gt;{'Customer::AuthModule::LDAP::SearchUserDN2'} = 'uid=ldap-bot,cn=users,cn=accounts,dc=my-it-company,dc=com'; $Self-&gt;{'Customer::AuthModule::LDAP::SearchUserPw2'} = 'bot-password!'; $Self-&gt;{'Customer::AuthModule::LDAP::AlwaysFilter2'} = '(mail=*)'; # pear LDAP auth. backend. $Self-&gt;{'Customer::AuthModule3'} = 'Kernel::System::CustomerAuth::LDAP'; $Self-&gt;{'Customer::AuthModule::LDAP::Host3'} = 'pear.com'; $Self-&gt;{'Customer::AuthModule::LDAP::BaseDN3'} = 'DC=pear,DC=com'; $Self-&gt;{'Customer::AuthModule::LDAP::UID3'} = 'sAMAccountName'; $Self-&gt;{'Customer::AuthModule::LDAP::SearchUserDN3'} = 'ldap-bot@pear.com'; $Self-&gt;{'Customer::AuthModule::LDAP::SearchUserPw3'} = 'bot-password?'; # : (mail=*) -      (samAccountType=805306368) -     (!(userAccountControl:1.2.840.113556.1.4.803:=2)) -   $Self-&gt;{'Customer::AuthModule::LDAP::AlwaysFilter3'} = '(&amp;(mail=*)(samAccountType=805306368)(!(userAccountControl:1.2.840.113556.1.4.803:=2)))'; # macrohard LDAP auth. backend. $Self-&gt;{'Customer::AuthModule4'} = 'Kernel::System::CustomerAuth::LDAP'; $Self-&gt;{'Customer::AuthModule::LDAP::Host4'} = 'macrohard.com'; $Self-&gt;{'Customer::AuthModule::LDAP::BaseDN4'} = 'dc=macrohard,dc=com'; $Self-&gt;{'Customer::AuthModule::LDAP::UID4'} = 'sAMAccountName'; $Self-&gt;{'Customer::AuthModule::LDAP::SearchUserDN4'} = 'ldap-bot@macrohard.com'; $Self-&gt;{'Customer::AuthModule::LDAP::SearchUserPw4'} = 'bot-password!?'; $Self-&gt;{'Customer::AuthModule::LDAP::AlwaysFilter4'} = '(&amp;(mail=*)(samAccountType=805306368)(!(userAccountControl:1.2.840.113556.1.4.803:=2)))'; # --------------------------------------------------- # # End customer authentication settings # # --------------------------------------------------- #</span></span></code> </pre> <br><h4> å®¢æˆ·ç«¯åŒæ­¥ï¼ˆä»LDAPè·å–å®¢æˆ·ç«¯å±æ€§ï¼Œä¸OTRSå…¬å¸è¿›è¡Œé€šä¿¡ï¼‰ </h4><br><pre> <code class="perl hljs"> <span class="hljs-comment"><span class="hljs-comment"># --------------------------------------------------- # # Customer authentication sync # # --------------------------------------------------- # # Customer user DB backend and settings $Self-&gt;{CustomerUser} = { Name =&gt; Translatable('Database Backend'), Module =&gt; 'Kernel::System::CustomerUser::DB', Params =&gt; { Table =&gt; 'customer_user', SearchCaseSensitive =&gt; 0, }, # customer unique id CustomerKey =&gt; 'login', # customer # CustomerID =&gt; 'customer_id', CustomerValid =&gt; 'valid_id', CustomerUserListFields =&gt; [ 'first_name', 'last_name', 'email' ], CustomerUserSearchFields =&gt; [ 'login', 'first_name', 'last_name', 'customer_id' ], CustomerUserSearchPrefix =&gt; '*', CustomerUserSearchSuffix =&gt; '*', CustomerUserSearchListLimit =&gt; 250, CustomerUserPostMasterSearchFields =&gt; ['email'], CustomerUserNameFields =&gt; [ 'title', 'first_name', 'last_name' ], CustomerUserEmailUniqCheck =&gt; 1, CustomerCompanySupport =&gt; 1, CacheTTL =&gt; 60 * 60 * 24, Map =&gt; [ [ 'UserTitle', Translatable('Title or salutation'), 'title', 1, 0, 'var', '', 0, undef, undef ], [ 'UserFirstname', Translatable('Firstname'), 'first_name', 1, 1, 'var', '', 0, undef, undef ], [ 'UserLastname', Translatable('Lastname'), 'last_name', 1, 1, 'var', '', 0, undef, undef ], [ 'UserLogin', Translatable('Username'), 'login', 1, 1, 'var', '', 0, undef, undef ], [ 'UserPassword', Translatable('Password'), 'pw', 0, 0, 'var', '', 0, undef, undef ], [ 'UserEmail', Translatable('Email'), 'email', 1, 1, 'var', '', 0, undef, undef ], [ 'UserCustomerID', Translatable('CustomerID'), 'customer_id', 0, 1, 'var', '', 0, undef, undef ], [ 'UserPhone', Translatable('Phone'), 'phone', 1, 0, 'var', '', 0, undef, undef ], [ 'UserFax', Translatable('Fax'), 'fax', 1, 0, 'var', '', 0, undef, undef ], [ 'UserMobile', Translatable('Mobile'), 'mobile', 1, 0, 'var', '', 0, undef, undef ], [ 'UserStreet', Translatable('Street'), 'street', 1, 0, 'var', '', 0, undef, undef ], [ 'UserZip', Translatable('Zip'), 'zip', 1, 0, 'var', '', 0, undef, undef ], [ 'UserCity', Translatable('City'), 'city', 1, 0, 'var', '', 0, undef, undef ], [ 'UserCountry', Translatable('Country'), 'country', 1, 0, 'var', '', 0, undef, undef ], [ 'UserComment', Translatable('Comment'), 'comments', 1, 0, 'var', '', 0, undef, undef ], [ 'ValidID', Translatable('Valid'), 'valid_id', 0, 1, 'int', '', 0, undef, undef ], ], # default selections Selections =&gt; { # UserTitle =&gt; { # 'Mr.' =&gt; Translatable('Mr.'), # 'Mrs.' =&gt; Translatable('Mrs.'), # }, }, }; # my-it-company.com customer user ldap backend and settings $Self-&gt;{CustomerUser2} = { Name =&gt; 'AD my-it-company.com', Module =&gt; 'Kernel::System::CustomerUser::LDAP', Params =&gt; { # ldap host Host =&gt; 'my-it-company.com', # ldap base dn BaseDN =&gt; 'dc=my-it-company,dc=com', # search scope (one|sub) SSCOPE =&gt; 'sub', UserDN =&gt; 'uid=ldap-bot,cn=users,cn=accounts,dc=my-it-company,dc=com', UserPw =&gt; 'bot-password!', # in case you want to add always one filter to each ldap query, use # this option. eg AlwaysFilter =&gt; '(mail=*)' or AlwaysFilter =&gt; '(objectclass=user)' AlwaysFilter =&gt; '(mail=*)', SourceCharset =&gt; 'utf-8', Die =&gt; 0, }, # customer unique id CustomerKey =&gt; 'uid', # customer # CustomerID =&gt; 'ou', CustomerUserListFields =&gt; ['uid', 'cn', 'mail'], CustomerUserSearchFields =&gt; ['uid', 'cn', 'mail'], CustomerUserSearchPrefix =&gt; '', CustomerUserSearchSuffix =&gt; '*', CustomerUserSearchListLimit =&gt; 250, CustomerUserPostMasterSearchFields =&gt; ['mail'], CustomerUserNameFields =&gt; ['sn', 'givenname'], # Configures the character for joining customer user name parts. Join single space if it is not defined. CustomerUserNameFieldsJoin =&gt; ' ', # show customer user and customer tickets in customer interface CustomerUserExcludePrimaryCustomerID =&gt; 0, # add a ldap filter for valid users (expert setting) # CustomerUserValidFilter =&gt; '(!(description=gesperrt))', # admin can't change customer preferences AdminSetPreferences =&gt; 1, # cache time to live in sec. - cache any ldap queries CacheTTL =&gt; 0, Map =&gt; [ [ 'UserTitle', Translatable('Title or salutation'), 'title', 1, 0, 'var', '', 1, undef, undef ], [ 'UserFirstname', Translatable('Firstname'), 'givenname', 1, 1, 'var', '', 1, undef, undef ], [ 'UserLastname', Translatable('Lastname'), 'sn', 1, 1, 'var', '', 1, undef, undef ], [ 'UserLogin', Translatable('Username'), 'uid', 1, 1, 'var', '', 1, undef, undef ], [ 'UserEmail', Translatable('Email'), 'mail', 1, 1, 'var', '', 1, undef, undef ], [ 'UserCustomerID', Translatable('CustomerID'), 'ou', 0, 1, 'var', '', 1, undef, undef ], [ 'UserPhone', Translatable('Phone'), 'telephonenumber', 1, 0, 'var', '', 1, undef, undef ], [ 'UserMobile', Translatable('Mobile'), 'mobile', 1, 0, 'var', '', 1, undef, undef ], ], }; # pear customer user ldap backend and settings $Self-&gt;{CustomerUser3} = { Name =&gt; 'AD pear', Module =&gt; 'Kernel::System::CustomerUser::LDAP', Params =&gt; { # ldap host Host =&gt; 'pear.com', BaseDN =&gt; 'DC=pear,DC=com', SSCOPE =&gt; 'sub', UserDN =&gt; 'ldap-bot@pear.com', UserPw =&gt; 'bot-password?', AlwaysFilter =&gt; '(&amp;(mail=*)(samAccountType=805306368)(!(userAccountControl:1.2.840.113556.1.4.803:=2)))', SourceCharset =&gt; 'utf-8', Die =&gt; 0, }, # customer unique id CustomerKey =&gt; 'sAMAccountName', # customer # CustomerID =&gt; 'company', CustomerUserListFields =&gt; ['sAMAccountName', 'cn', 'mail'], CustomerUserSearchFields =&gt; ['sAMAccountName', 'cn', 'mail'], CustomerUserSearchPrefix =&gt; '', CustomerUserSearchSuffix =&gt; '*', CustomerUserSearchListLimit =&gt; 250, CustomerUserPostMasterSearchFields =&gt; ['mail'], CustomerUserNameFields =&gt; ['sn', 'givenname'], # Configures the character for joining customer user name parts. Join single space if it is not defined. CustomerUserNameFieldsJoin =&gt; ' ', # show customer user and customer tickets in customer interface CustomerUserExcludePrimaryCustomerID =&gt; 0, AdminSetPreferences =&gt; 1, CacheTTL =&gt; 0, Map =&gt; [ # note: Login, Email and CustomerID needed! # var, frontend, storage, shown (1=always,2=lite), required, storage-type, http-link, readonly, http-link-target, link class(es) [ 'UserTitle', Translatable('Title or salutation'), 'title', 1, 0, 'var', '', 1, undef, undef ], [ 'UserFirstname', Translatable('Firstname'), 'givenname', 1, 1, 'var', '', 1, undef, undef ], [ 'UserLastname', Translatable('Lastname'), 'sn', 1, 1, 'var', '', 1, undef, undef ], [ 'UserLogin', Translatable('Username'), 'sAMAccountName', 1, 1, 'var', '', 1, undef, undef ], [ 'UserFullLogin', Translatable('FullUsername'), 'userPrincipalName', 1, 1, 'var', '', 1, undef, undef ], [ 'UserEmail', Translatable('Email'), 'mail', 1, 1, 'var', '', 1, undef, undef ], [ 'UserCustomerID', Translatable('CustomerID'), 'company', 0, 1, 'var', '', 1, undef, undef ], [ 'UserPhone', Translatable('Phone'), 'telephoneNumber', 1, 0, 'var', '', 1, undef, undef ], [ 'UserMobile', Translatable('Mobile'), 'mobile', 1, 0, 'var', '', 1, undef, undef ], [ 'UserAddress', Translatable('Address'), 'postaladdress', 1, 0, 'var', '', 1, undef, undef ], [ 'UserOffice', Translatable('Office'), 'physicalDeliveryOfficeName', 1, 0, 'var', '', 1, undef, undef ], [ 'UserDepartment', Translatable('Department'), 'department', 1, 0, 'var', '', 1, undef, undef ], [ 'UserComment', Translatable('Comment'), 'description', 1, 0, 'var', '', 1, undef, undef ], ], }; # macrohard customer user ldap backend and settings $Self-&gt;{CustomerUser4} = { Name =&gt; 'AD macrohard', Module =&gt; 'Kernel::System::CustomerUser::LDAP', Params =&gt; { # ldap host Host =&gt; 'macrohard.com', # ldap base dn BaseDN =&gt; 'dc=macrohard,dc=com', # search scope (one|sub) SSCOPE =&gt; 'sub', UserDN =&gt; 'ldap-bot@macrohard.com', UserPw =&gt; 'bot-password!?', AlwaysFilter =&gt; '(&amp;(mail=*)(samAccountType=805306368)(!(userAccountControl:1.2.840.113556.1.4.803:=2)))', SourceCharset =&gt; 'utf-8', Die =&gt; 0, }, # customer unique id CustomerKey =&gt; 'sAMAccountName', # customer # CustomerID =&gt; 'company', CustomerUserListFields =&gt; ['sAMAccountName', 'cn', 'mail'], CustomerUserSearchFields =&gt; ['sAMAccountName', 'cn', 'mail'], CustomerUserSearchPrefix =&gt; '', CustomerUserSearchSuffix =&gt; '*', CustomerUserSearchListLimit =&gt; 250, CustomerUserPostMasterSearchFields =&gt; ['mail'], CustomerUserNameFields =&gt; ['sn', 'givenname'], # Configures the character for joining customer user name parts. Join single space if it is not defined. CustomerUserNameFieldsJoin =&gt; ' ', # show customer user and customer tickets in customer interface CustomerUserExcludePrimaryCustomerID =&gt; 0, AdminSetPreferences =&gt; 1, CacheTTL =&gt; 0, Map =&gt; [ [ 'UserTitle', Translatable('Title or salutation'), 'title', 1, 0, 'var', '', 1, undef, undef ], [ 'UserFirstname', Translatable('Firstname'), 'givenname', 1, 1, 'var', '', 1, undef, undef ], [ 'UserLastname', Translatable('Lastname'), 'sn', 1, 1, 'var', '', 1, undef, undef ], [ 'UserLogin', Translatable('Username'), 'sAMAccountName', 1, 1, 'var', '', 1, undef, undef ], [ 'UserFullLogin', Translatable('FullUsername'), 'userPrincipalName', 1, 1, 'var', '', 1, undef, undef ], [ 'UserEmail', Translatable('Email'), 'mail', 1, 1, 'var', '', 1, undef, undef ], [ 'UserCustomerID', Translatable('CustomerID'), 'company', 0, 1, 'var', '', 1, undef, undef ], [ 'UserPhone', Translatable('Phone'), 'telephoneNumber', 1, 0, 'var', '', 1, undef, undef ], [ 'UserMobile', Translatable('Mobile'), 'mobile', 1, 0, 'var', '', 1, undef, undef ], [ 'UserAddress', Translatable('Address'), 'postaladdress', 1, 0, 'var', '', 1, undef, undef ], [ 'UserOffice', Translatable('Office'), 'physicalDeliveryOfficeName', 1, 0, 'var', '', 1, undef, undef ], [ 'UserDepartment', Translatable('Department'), 'department', 1, 0, 'var', '', 1, undef, undef ], [ 'UserComment', Translatable('Comment'), 'description', 1, 0, 'var', '', 1, undef, undef ], ], };</span></span></code> </pre> <br><h2> ç»“è®º </h2><br> å¦‚æ‚¨æ‰€è§ï¼Œåœ¨OTRSä¸­è®¾ç½®èº«ä»½éªŒè¯å’Œå¸æˆ·åŒæ­¥éå¸¸ç®€å•ï¼Œä½†æ˜¯æˆ‘å¸Œæœ›æœ¬æ–‡å¯¹é‚£äº›åˆšå¼€å§‹ç†Ÿæ‚‰è¯¥ç³»ç»Ÿçš„äººæœ‰æ‰€å¸®åŠ©ã€‚ <br><br> æœ¬æ–‡å‰©ä¸‹ä»€ä¹ˆå‘¢ï¼Ÿ <br><br><ul><li> ä¸LDAPå¹¶è¡Œè¿è¡Œæ—¶ï¼Œæ‚¨è¿˜å¯ä»¥è¿è¡ŒSSOæˆæƒï¼Œè¿™å°†ä½¿å®¢æˆ·ç«¯çš„ç”Ÿæ´»æ›´åŠ è½»æ¾ã€‚ </li><li> å¦‚æœæ‚¨æœ‰Perlä¸“å®¶ï¼Œåˆ™å¯ä»¥ç¼–å†™è‡ªå·±çš„åç«¯ä»¥è¿æ¥åˆ°å…¶ä»–ä¿¡æ¯ç³»ç»Ÿã€‚ </li><li> æ•…æ„ç®€åŒ–äº†é…ç½®ï¼Œä¾‹å¦‚ï¼Œæ²¡æœ‰å±äºLDAPç»„çš„è¿‡æ»¤å•å…ƒï¼Œæ²¡æœ‰åŸŸåç¼€ï¼ŒBASE DNï¼Œä½¿ç”¨å…¶ä»–å±æ€§ï¼Œåœ¨å…¶ä»–ç«¯å£ä¸Šä½¿ç”¨LDAPç­‰ </li></ul><br> åœ¨PMä¸­çš„æ³¨é‡Šï¼Œé”™åˆ«å­—ä¿¡æ¯ä¸­æ¬¢è¿æç¤ºå’Œæ¾„æ¸…ã€‚ <br><br> è°¢è°¢æ‚¨çš„å…³æ³¨ã€‚ ç‰¹åˆ«æ„Ÿè°¢åœ¨å¤šå¹´ä»¥å‰å½“æˆ‘è¢«ä»‹ç»ç»™è¿™ä¸ªç³»ç»Ÿæ—¶åœ¨OTRSä¸Šä½¿ç”¨çš„ææ–™ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">Turilion</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">supersuperoleg</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">wmlex</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN437596/">https://habr.com/ru/post/zh-CN437596/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN437586/index.html">æˆ‘ä»¬ä½¿ç”¨GoogleåŠ©æ‰‹ç¤ºä¾‹åˆ›å»ºè¯­éŸ³åº”ç”¨</a></li>
<li><a href="../zh-CN437588/index.html">ç”¨æ‰‹æœºå¼€å‘æ¯”ç”¨ç½‘ç»œå¼€å‘æ›´æœ‰è¶£å—ï¼Ÿ</a></li>
<li><a href="../zh-CN437590/index.html">iPhoneä¸Šçš„å»¶è¿Ÿæ•°å­—</a></li>
<li><a href="../zh-CN437592/index.html">å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå±‚æ¶æ„</a></li>
<li><a href="../zh-CN437594/index.html">æˆ‘å¦‚ä½•æ¶ˆé™¤æ‰€æœ‰æ¸¸æˆä¸­å¡é¡¿å’Œè·³å¸§çš„åŸå› ï¼Œä»¥åŠå¦‚ä½•æ„å¤–å°†æ¸©åº¦é™ä½15åº¦</a></li>
<li><a href="../zh-CN437598/index.html">å¦‚ä½•é€šè¿‡è™šæ‹ŸåŒ–ä»å®¶ç”¨PCä¿å­˜æ¸¸æˆç³»ç»Ÿ</a></li>
<li><a href="../zh-CN437600/index.html">opencv4artsï¼šç”»æˆ‘çš„åŸå¸‚æ–‡æ£®ç‰¹</a></li>
<li><a href="../zh-CN437602/index.html">ä½¿ç”¨Android Studioå‰–æUnityé¡¹ç›®</a></li>
<li><a href="../zh-CN437604/index.html">æ³¢å‡½æ•°å´©æºƒï¼šå—é‡å­åŠ›å­¦å¯å‘çš„ç®—æ³•</a></li>
<li><a href="../zh-CN437606/index.html">è°åƒäº†æˆ‘ä»¬iPhoneçš„è®°å¿†ï¼Ÿ è‹¹æœå»çš®</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>