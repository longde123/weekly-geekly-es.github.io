<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>拘勇 游녪游낕 游낕 C칩mo hacer la coloraci칩n correcta del c칩digo en "Habr칠" y por qu칠 es tan dif칤cil 游꿄 游댎 游븾游낖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hace unos meses publiqu칠 mi primer post sobre Habr칠. Quiz치s algunos de ustedes noten que el c칩digo en el art칤culo est치 pintado de una manera inusual, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C칩mo hacer la coloraci칩n correcta del c칩digo en "Habr칠" y por qu칠 es tan dif칤cil</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/custis/blog/472446/"><img src="https://habrastorage.org/webt/xg/ma/eu/xgmaeu4rba2fisi1m-lv2k5ggeo.jpeg"><br><br>  Hace unos meses publiqu칠 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mi primer post</a> sobre Habr칠.  Quiz치s algunos de ustedes noten que el c칩digo en el art칤culo est치 pintado de una manera inusual, y lo m치s importante, coloreado correctamente, a pesar de que el editor de texto incorporado en el sitio no admite el marcado original del c칩digo y a menudo resalta sus elementos incorrectamente.  Al mismo tiempo, el c칩digo no se inserta en la imagen, como hacen algunos escritores completamente desesperados. <br><br>  En mi caso, preservar el marcado fue especialmente importante porque el art칤culo era una descripci칩n de c칩mo trabajar en el c칩digo.  Para resolver el problema, cre칠 una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">herramienta</a> que le permite transferir el resaltado de c칩digo en el esquema seleccionado de IDEA a un art칤culo sobre Habr.  Hablar칠 sobre el proceso de creaci칩n de una herramienta y las caracter칤sticas de su uso. <br><a name="habracut"></a><br><h2>  Porque todo esto </h2><br>  A primera vista, puede parecer que esto se hace por travesuras, simplemente porque la iluminaci칩n est치ndar implementada a trav칠s de la etiqueta <code>&lt;source&gt;</code> no es adecuada. <br><br>  En cierto modo, esto es, por supuesto, cierto, pero no del todo. <br><br>  En primer lugar, el resaltado dentro del <code>&lt;source&gt;</code> no puede funcionar con fragmentos de c칩digo, ya que no habr치 suficiente informaci칩n para colorear.  Todos los elementos declarados fuera del alcance de la pieza ser치n pintados al azar.  Este problema no tiene soluci칩n, ya que, hasta donde yo s칠, ninguno de los servicios para colorear en l칤nea le permite hacer lo siguiente: <br><br><ol><li>  Pegue el c칩digo completo del proyecto en el art칤culo sin mostrarlo en su totalidad, o pegue el enlace al commit en GitHub.  En lugares espec칤ficos del art칤culo, use recortes de l칤neas del c칩digo completo (con una indicaci칩n del rango).  En este caso, la luz de fondo debe determinarse en funci칩n del c칩digo completo, por supuesto. </li><li>  Indique metainformaci칩n expl칤cita para elementos indefinidos.  Una manera bastante dif칤cil para el usuario, pero estar칤a de acuerdo con tal cosa. </li></ol><br>  En segundo lugar, el resaltado dentro de <code>&lt;source&gt;</code> nunca es igual al n칰mero de diferentes tipos de elementos con un IDE regular.  Y debido al problema descrito anteriormente, hacer coloreado avanzado no tiene sentido: nadie inserta el c칩digo completo del proyecto en el art칤culo, por lo que esta funcionalidad no funcionar치. <br><br>  Al mismo tiempo, la realidad es que los fragmentos de c칩digo deben insertarse en los art칤culos, y cuanto m치s peque침os sean, mejor. <br><br>  Puede leer el c칩digo sin resaltar, pero por qu칠. <br><br><h2>  Caracter칤sticas de Habr </h2><br>  IntelliJ IDEA tiene soporte incorporado para exportar c칩digo a HTML.  La copia regular del c칩digo se coloca en el portapapeles, incluido el c칩digo de color, que se puede leer como HTML. <br><br>  Desafortunadamente, Habr no permite el uso de marcado HTML en art칤culos directamente.  Las razones de esto son un misterio cubierto de oscuridad, pero quiz치s esto se deba a la unificaci칩n de la apariencia de los art칤culos.  Si permite el uso de HTML en los art칤culos, ser치 posible ponerse al d칤a de tal manera que haya problemas con la visualizaci칩n. <br><br>  En general, apoyo la idea de prohibir HTML en los art칤culos, pero hay una advertencia.  Un recurso para profesionales de TI, donde el c칩digo a menudo se discute y no hay forma de insertarlo correctamente en un art칤culo, es de alguna manera extra침o. <br><br>  Entonces, tenemos a nuestra disposici칩n las etiquetas <code>&lt;b&gt;</code> , <code>&lt;i&gt;</code> , <code>&lt;font&gt;</code> .  Adem치s, todo esto funciona dentro de la <code>&lt;code&gt;</code> , que es necesaria para formatear.  Bueno, <code>&amp;nbsp</code> <code>;</code>  Tambi칠n nos salvaron, lo que es 칰til para largas l칤neas de c칩digo y sangr칤a. <br><br>  No es necesario decir que todas las formas est치ndar para obtener c칩digo HTML de IDEA no ofrecen ese tipo de HTML, por lo que el trabajo de conversi칩n ser치 bastante grande. <br><br><h2>  El enfoque </h2><br>  Para empezar, vale la pena agradecer al autor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">capslocky</a> por su <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">material</a> sobre este tema.  No utilic칠 la herramienta propuesta en el art칤culo directamente, y dif칤cilmente hubiera sucedido, pero gracias a este material entend칤 toda la profundidad del problema y al mismo tiempo sent칤 el viento de la esperanza. <br><br>  El 칰nico inconveniente de esta publicaci칩n es la gran cantidad de c칩digo combinado con una explicaci칩n muy escasa de lo que hace y por qu칠. <br><br>  Intentar칠 corregir la situaci칩n y describir lo que tendr치 que hacer con su marcado HTML si desea llevarlo a un formulario que est칠 listo para su inserci칩n en Habr. <br><br><ol><li>  Antes de exportar, debe establecer el esquema de color deseado en IDEA, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desde el sitio web de Temas de color</a> .  El c칩digo se exportar치 con el esquema seleccionado.  Es mejor elegir un esquema con un fondo blanco (ya que el fondo no se puede establecer en el Habr칠) y sin subrayar.  No pens칠 en lo f치cil que es arrastrarlos, porque realmente no quer칤a hacerlo. </li><li>  Trabajamos solo con los elementos internos de la <code>&lt;pre&gt;</code> .  Incluso si est치 utilizando la exportaci칩n no desde IDEA, sino alguna otra, probablemente habr치 esta etiqueta en el marcado HTML, ya que sin ella es dif칤cil formatear el c칩digo correctamente.  La etiqueta en s칤 se elimina, reemplaz치ndola con <code>&lt;code&gt;</code> . </li><li>  Lo m치s probable es que el texto se presente como un <code>&lt;span&gt;</code> con diferentes estilos.  Todos tienen que deshacerse de ellos.  Muchos servicios de coloraci칩n incorporan estilos en una hoja de estilos, lo cual es l칩gico, y utilizan enlaces a nombres de estilos.  Espec칤ficamente, IDEA a칰n no hace esto, lo que hace que la tarea sea un poco m치s f치cil (la configuraci칩n de estilo se encuentra directamente en <code>&lt;span&gt;</code> ). </li><li>  Establezca el color de la fuente a trav칠s de la <code>&lt;font&gt;</code> .  Desafortunadamente, el color de fondo no se puede establecer. </li><li>  <code>font-style:italic</code> propiedad de <code>font-style:italic</code> en un par de etiquetas <code>&lt;i&gt;</code> <code>&lt;/i&gt;</code> y <code>font-weight:bold</code> en <code>&lt;b&gt;</code> <code>&lt;/b&gt;</code> . </li><li>  Reemplace todos los espacios con <code>&amp;nbsp</code> <code>;</code>  . </li><li>  Los saltos de l칤nea en forma de <code>&lt;br&gt;</code> reemplazan por <code>\n</code> . </li><li>  El marcado HTML en IDEA produce l칤neas en blanco con estilos y espacios a partir de espacios con estilos.  Es mejor tirar estos estilos: esto reducir치 en gran medida la longitud y aumentar치 la comprensi칩n del c칩digo. </li><li>  Aseg칰rese de que los avances de l칤nea no tengan ning칰n estilo.  De lo contrario, habr치 problemas con las l칤neas vac칤as. </li></ol><br>  El 칰ltimo p치rrafo se ilustra con un ejemplo: <br><br> <code>&lt;code&gt;</code> <br>  <code>1</code> <code>&lt;font color="000000"&gt;</code> <br>  <code>&lt;/font&gt;</code> <code>2</code> <br> <code>&lt;/code&gt;</code> <br> <br>  El c칩digo dado ser치 activado por "Habr" en <code>12</code> .  Lo mismo se aplica a las etiquetas <code>&lt;b&gt;</code> y <code>&lt;i&gt;</code> , as칤 como a cualquier combinaci칩n de las mismas.  Los saltos de l칤nea no deben tener un estilo, y todo estar치 bien. <br><br><h2>  Implementaci칩n </h2><br>  Al principio, la tarea de escribir un convertidor para c칩digo HTML arbitrario me pareci칩 bastante complicada.  Sin embargo, si toma una decisi칩n para una versi칩n espec칤fica de HTML, entonces no todo es tan malo.  Logr칠 hacer todo en RegExp puro, es decir, incluso sin an치lisis HTML.  El problema principal result칩 identificar las caracter칤sticas del marcado "Habr". <br><br>  Para que los avances de l칤nea no tuvieran estilos, tuve que hacer reemplazos bastante complicados, que probablemente sean los m치s incomprensibles (vea la funci칩n popupBr).  La idea es que las etiquetas <code>&lt;br&gt;</code> despu칠s de cada reemplazo "emerjan" desde la profundidad de las etiquetas de formato hacia el exterior.  Por lo tanto, despu칠s de todos los reemplazos, la etiqueta <code>&lt;br&gt;</code> tiene formato. <br><br>  Adem치s, result칩 que IDEA no solo pone texto enriquecido en el portapapeles, sino tambi칠n objetos bastante complicados como <code>application/x-java-jvm-local-objectref</code> .  El problema es que la presencia de tales objetos en el portapapeles conduce a errores persistentes en mi consola sobre el tema de la construcci칩n de DataFlavor.  Desafortunadamente, no hay nada que puedas hacer: JDK simplemente funciona con el portapapeles.  Para m칤, fue un descubrimiento tener <a href="">ese c칩digo</a> .  Aparentemente, los t칤os inteligentes que escribieron esto creen que servir치.  En general, no tenga miedo de los errores que puedan ocurrir al trabajar con la herramienta. <br><br>  El proyecto est치 escrito en Kotlin y vive en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> . <br><br><p>  춰Sugerencias para mejorar son bienvenidas!  Por ejemplo, ser칤a bueno dise침ar esta herramienta como un complemento para IDEA.  Todav칤a no he encontrado una forma simple de hacer esto: desafortunadamente, las fuentes del complemento Copiar como HTML est치n cerradas, y lleva demasiado tiempo descubrir c칩mo escribir un complemento de este tipo desde cero. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/472446/">https://habr.com/ru/post/472446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../472434/index.html">Actualiza tus lanzamientos</a></li>
<li><a href="../472438/index.html">C칩mo se usan los proxies en la seguridad de la informaci칩n: 6 casos de uso pr치ctico</a></li>
<li><a href="../472440/index.html">Un d칤a en Joker 2019</a></li>
<li><a href="../472442/index.html">La situaci칩n: todos hablan del regreso de los formatos de audio olvidados: por qu칠 est치n destinados a seguir siendo un nicho</a></li>
<li><a href="../472444/index.html">Los mejores productos parten de problemas reales: Intercomunicador sobre trabajos por hacer. Parte 3 final</a></li>
<li><a href="../472448/index.html">Temas de la secci칩n Frontend en DUMP Kazan: ML para un desarrollador front-end, pixel magic, SvelteJS, risas, sudor y l치grimas</a></li>
<li><a href="../472452/index.html">쮺칩mo agregar soporte para el per칤odo de gracia (Per칤odo de gracia de facturaci칩n) en la aplicaci칩n iOS?</a></li>
<li><a href="../472454/index.html">Descripci칩n general de servidores VPS baratos</a></li>
<li><a href="../472462/index.html">iFest en Nizhny Novgorod: es impresionante</a></li>
<li><a href="../472464/index.html">5 formas de hacer un servidor Python en una Raspberry Pi Parte 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>