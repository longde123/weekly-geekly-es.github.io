<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÖ∞Ô∏è üßù üåÆ Data Mesh: comment travailler avec des donn√©es sans monolithe üë®üèª‚Äçüåæ üé∞ üïì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Chez Dodo Pizza Engineering, nous aimons vraiment les donn√©es (et qui ne les aime pas maintenant?). Maintenant, il y aura une histoire ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Data Mesh: comment travailler avec des donn√©es sans monolithe</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/475476/"><p>  Bonjour, Habr!  Chez Dodo Pizza Engineering, nous aimons vraiment les donn√©es (et qui ne les aime pas maintenant?).  Maintenant, il y aura une histoire sur la fa√ßon d'accumuler toutes les donn√©es du monde Dodo Pizza et de donner √† tout employ√© de l'entreprise un acc√®s pratique √† ce tableau de donn√©es.  D√©fiez sous l'ast√©risque: sauvez les nerfs de l'√©quipe Data Engineering. </p><br><img src="https://habrastorage.org/webt/cn/bt/y8/cnbty8-s8axbhnzriavdi65eqy4.png"><a name="habracut"></a><br><p>  Comme les vrais Plyushkins, nous enregistrons toutes sortes d'informations sur le travail de nos pizzerias: </p><br><ul><li>  rappelez-vous toutes les commandes des utilisateurs; </li><li>  nous savons combien de temps il a fallu pour faire la toute premi√®re pizza √† Syktyvkar; </li><li>  Nous voyons combien de temps la pizza refroidit sur la tablette chauffante de Voronej en ce moment; </li><li>  stocker des donn√©es sur les radiations de produits; </li><li>  et bien plus encore. </li></ul><br><p>  Plusieurs √©quipes sont actuellement charg√©es de travailler avec les donn√©es chez Dodo Pizza, l'une d'entre elles est l'√©quipe d'ing√©nierie des donn√©es.  Maintenant, ils (c'est-√†-dire nous) ont une t√¢che: donner √† tout employ√© de l'entreprise un acc√®s pratique √† ce tableau de donn√©es. </p><br><p>  Lorsque nous avons commenc√© √† r√©fl√©chir √† la fa√ßon de proc√©der et commenc√© √† discuter du probl√®me, nous avons trouv√© une approche tr√®s int√©ressante de la gestion des donn√©es - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Data Mesh</a> (vous trouverez ici un √©norme article chic).  Ses id√©es sont tr√®s bien tomb√©es sur notre id√©e de la fa√ßon dont nous voulons construire notre syst√®me.  Le reste de l'article sera notre r√©flexion sur l'approche et la fa√ßon dont nous la voyons mise en ≈ìuvre dans Dodo Pizza Engineering. </p><br><h2 id="chto-my-imeem-v-vidu-pod-dannymi">  Qu'entendons-nous par ¬´donn√©es¬ª </h2><br><p>  Pour commencer, d√©cidons de ce que nous entendons par les donn√©es de Dodo Pizza Engineering: </p><br><ul><li>  Les √©v√©nements qui envoient des services (nous avons un bus commun construit en utilisant RabbitMQ); </li><li>  Enregistrements √† l'int√©rieur de la base de donn√©es (pour nous, c'est MySQL et CosmosDB); </li><li>  Clickstream √† partir d'une application mobile et d'un site Web. </li></ul><br><p>  Pour que l'entreprise Dodo Pizza utilise et s'appuie sur ces donn√©es, il est important que les conditions suivantes soient remplies: </p><br><ul><li>  <strong>Ils doivent √™tre holistiques.</strong>  Nous devons √™tre s√ªrs que nous ne modifions pas les donn√©es au cours de leur traitement, stockage et affichage.  Si une entreprise ne peut pas faire confiance √† nos donn√©es, elles ne seront d'aucune utilit√©. </li><li>  <strong>Ils doivent √™tre horodat√©s et non √©cras√©s.</strong>  Cela signifie qu'√† tout moment, nous voulons pouvoir revenir en arri√®re et regarder les donn√©es de cette p√©riode.  Par exemple, d√©couvrez combien de pizzas ont √©t√© vendues le 8 juillet 2018. </li><li>  <strong>Ils doivent √™tre fiables.</strong>  Dans le processus de collecte et de stockage des donn√©es, nous devons non seulement perdre l'int√©grit√©, mais aussi la fiabilit√©.  Nous ne pouvons pas perdre de donn√©es, de tranches de temps, car avec eux, nous perdons la confiance de nos clients (externes et internes). </li><li>  <strong>Ils devraient √™tre avec un sch√©ma stable - nous √©crivons des demandes pour ces donn√©es.</strong>  Nous ne voudrions vraiment pas qu'ils changent tellement avec le changement de code d'application, avec le refactoring, que nos demandes cessent de fonctionner.  Celui qui r√©dige les demandes ne saura jamais que vous avez fait la refactorisation jusqu'√† ce que tout se brise.  Je ne voudrais pas savoir cela des clients. </li></ul><br><p>  Compte tenu de toutes ces exigences, nous sommes arriv√©s √† la conclusion que les donn√©es de Dodo sont un produit.  Identique √† l'API de service public.  Par cons√©quent, la m√™me √©quipe propri√©taire du service devrait √™tre propri√©taire des donn√©es.  De plus, les modifications du sch√©ma de donn√©es doivent toujours √™tre r√©trocompatibles. </p><br><h2 id="tradicionnyy-podhod--data-lake">  Approche traditionnelle - Data Lake </h2><br><p> Pour r√©soudre les probl√®mes de stockage et de traitement fiables des m√©gadonn√©es, il existe une approche traditionnelle adopt√©e par de nombreuses entreprises qui travaillent avec un tel pool d'informations - Data Lake.  Dans le cadre de cette approche, les ing√©nieurs de donn√©es collectent des informations de tous les composants du syst√®me et les placent dans un grand stockage (cela peut √™tre, par exemple, Hadoop, Azure Kusto, Apache Cassandra ou m√™me une r√©plique MySQL si des donn√©es y p√©n√®trent). </p><br><p>  En outre, ces m√™mes ing√©nieurs √©crivent des demandes √† un tel stockage.  La mise en ≈ìuvre de cette approche chez Dodo Pizza Engineering implique que l'√©quipe d'ing√©nierie des donn√©es sera propri√©taire du sch√©ma de donn√©es dans le r√©f√©rentiel analytique. </p><br><p>  Avec ce sc√©nario, l'√©quipe devient des chats tr√®s tristes et c'est pourquoi: </p><br><ul><li>  Elle doit surveiller les changements dans <strong>TOUS les</strong> services au sein de l'entreprise.  Et il y en a beaucoup et il y a beaucoup de changements (en moyenne, nous fusionnons ~ 100 demandes de tirage par semaine, alors que de nombreux services ne font pas du tout de demandes de tirage). </li><li>  Lors de la modification du sch√©ma de donn√©es, le chef de produit et l'√©quipe qui modifient le sch√©ma de donn√©es doivent attendre que l'ing√©nierie des donn√©es termine le code n√©cessaire pour que les modifications soient prises en charge.  De plus, nous figurons depuis longtemps et la situation o√π une √©quipe en attend une autre est tr√®s rare.  Et nous ne voulons pas que cela devienne une partie ¬´normale¬ª du processus de d√©veloppement. </li><li>  Elle doit √™tre immerg√©e dans l' <strong>ensemble des</strong> activit√©s de l'entreprise.  Une cha√Æne de pizzerias ressemble √† une entreprise simple, mais il semble juste.  Il est tr√®s difficile de rassembler suffisamment de comp√©tences en une seule √©quipe pour construire un mod√®le de donn√©es ad√©quat pour l'ensemble de l'entreprise. </li><li>  Il s'agit d'un seul point d'√©chec.  Chaque fois que vous devez modifier les donn√©es renvoy√©es par le service ou √©crire une requ√™te, toutes ces t√¢ches incombent √† l'√©quipe d'ing√©nierie des donn√©es.  En cons√©quence, l'√©quipe a un arri√©r√© surcharg√©. </li></ul><br><blockquote>  Il s'av√®re que l'√©quipe est √† l'intersection d'un grand nombre de besoins et a peu de chances de pouvoir les satisfaire.  En m√™me temps, il sera soumis √† une pression et √† un stress constants.  Nous ne voulons vraiment pas cela.  Par cons√©quent, vous devez r√©fl√©chir √† la mani√®re de r√©soudre ces probl√®mes et en m√™me temps avoir la possibilit√© d'analyser les donn√©es. </blockquote><br><h2 id="peretekaya-ot-data-lake-k-data-mesh">  Circulation de Data Lake vers Data Mesh </h2><br><p>  Heureusement, non seulement nous nous sommes pos√© cette question.  En fait, un probl√®me similaire a d√©j√† √©t√© r√©solu dans l'industrie (all√©luia!).  Uniquement dans un autre domaine: le d√©ploiement d'applications.  Oui, je parle de l'approche DevOps, o√π l'√©quipe d√©termine comment d√©ployer le produit qu'elle cr√©e. </p><br><p>  Une approche similaire de la r√©solution de probl√®mes de Data Lake a √©t√© sugg√©r√©e par Zhamak Dehghani, consultant de ThoughtWorks.  Regardant Netflix et Spotify r√©soudre de tels probl√®mes, elle a √©crit un article √©tonnant sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment passer d'un lac de donn√©es monolithique √† un maillage de donn√©es distribu√©</a> (le lien vers celui-ci √©tait au d√©but de l'article).  Les principales id√©es que nous en avons sorties: </p><br><ul><li>  Divisez le grand Data Lake en domaines de donn√©es tr√®s similaires aux domaines de conception pilot√©s par domaine.  Chaque domaine est un petit contexte born√©. </li><li>  L'√©quipe technique, qui est responsable des domaines DDD, est √©galement responsable des domaines de donn√©es correspondants.  Ils stockent le circuit, y apportent des modifications, y chargent des donn√©es.  Dans le m√™me temps, ils savent tout eux-m√™mes: comment changer le chargement des donn√©es et ne rien casser lorsque l'application change.  La connaissance ne va nulle part.  Pour ouvrir les donn√©es, ils ne doivent aller nulle part.  L'√©quipe elle-m√™me m√®ne un cycle de d√©veloppement complet, de la modification des donn√©es op√©rationnelles √† la fourniture de donn√©es analytiques √† des tiers.  Une √©quipe poss√®de tout ce qui est associ√© au domaine (√† la fois le domaine commercial et le domaine de donn√©es). </li><li>  Ing√©nieur de donn√©es - Un r√¥le au sein de l'√©quipe technique.  Il ne s'agit pas n√©cessairement d'un individu, mais il est imp√©ratif que l'√©quipe poss√®de cette comp√©tence. </li></ul><br><h2 id="a-v-eto-vremya-komanda-data-engineering">  Pendant ce temps, l'√©quipe Data Engineering ... </h2><br><p>  Si vous imaginez que tout cela se r√©alise au clic d'un doigt, alors il reste √† r√©pondre √† deux questions: </p><br><p>  <strong>Que fera l'√©quipe d'ing√©nierie des donn√©es maintenant?</strong>  Dodo Pizza Engineering dispose d√©j√† d'une √©quipe de plateforme / SRE.  Sa t√¢che est de donner aux d√©veloppeurs des outils pour un d√©ploiement facile des services.  L'√©quipe d'ing√©nierie des donn√©es remplira le m√™me r√¥le pour les donn√©es uniquement. </p><br><p>  La transformation des donn√©es op√©rationnelles en donn√©es analytiques est un processus complexe.  Rendre l'analytique accessible √† l'ensemble de l'entreprise est encore plus difficile.  C'est la solution √† ces probl√®mes que l'√©quipe d'ing√©nierie des donn√©es traitera. </p><br><p>  Nous allons fournir √† l'√©quipe technique un ensemble d'outils et de pratiques pratiques gr√¢ce auxquels elle pourra publier les donn√©es de son service vers le reste de l'entreprise.  Nous serons √©galement responsables des parties g√©n√©rales de l'infrastructure du pipeline de donn√©es (files d'attente, stockage fiable, clusters pour effectuer des transformations sur les donn√©es). </p><br><p>  <strong>Comment les comp√©tences Data Engineer appara√Ætront-elles dans Feature Team?</strong>  L'√©quipe technique devient plus difficile.  Bien s√ªr, nous pourrions essayer d'embaucher un Data Engineer dans chacune de nos √©quipes.  Mais c'est tr√®s difficile.  Trouver une personne ayant une bonne formation en informatique et la convaincre de travailler au sein d'une √©quipe d'√©picerie est difficile. </p><br><p>  Le grand avantage de Dodo est que nous aimons l'apprentissage interne.  Alors maintenant, notre plan est le suivant: l'√©quipe d'ing√©nierie des donn√©es commence √† publier les donn√©es de certains services, pleure, pique, mais continue de manger le cactus.  D√®s que nous comprenons que nous avons un processus pr√™t √† l'emploi pour la publication, nous commen√ßons √† en parler dans Feature Team. </p><br><p>  Nous avons plusieurs fa√ßons de proc√©der: </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DevForum</a> , dans lequel nous vous dirons √† quoi ressemble le processus que nous avons cr√©√©, quels outils sont l√† et comment les utiliser le plus efficacement possible. </li><li>  S'exprimer au DevForum nous aidera √† recueillir les commentaires des d√©veloppeurs de produits.  Apr√®s cela, nous pourrons rejoindre les √©quipes produits et les aider √† r√©soudre les probl√®mes de publication des donn√©es, organiser la formation des √©quipes. </li></ol><br><h2 id="potreblenie-dannyh">  Consommation de donn√©es </h2><br><p>  Maintenant, j'ai beaucoup parl√© de la publication des donn√©es.  Mais il y a aussi la consommation.  Et ce probl√®me? </p><br><p>  Nous avons une merveilleuse √©quipe de BI qui r√©dige des rapports tr√®s complexes pour une soci√©t√© de gestion.  √Ä l'int√©rieur de Dodo IS, il existe de nombreux rapports pour nos partenaires qui les aident √† g√©rer les pizzerias.  Dans notre nouveau mod√®le, nous les consid√©rons comme des consommateurs de donn√©es qui ont leurs propres domaines de donn√©es.  Et ce sont les consommateurs qui seront responsables de leurs propres domaines.  Parfois, un domaine consommateur peut √™tre d√©crit avec une seule demande au r√©f√©rentiel analytique - et c'est bien.  Mais nous comprenons que cela ne fonctionnera pas toujours.  C'est pourquoi nous souhaitons que la plate-forme que nous allons cr√©er pour les √©quipes de produits soit √©galement utilis√©e par les consommateurs de donn√©es (dans le cas des rapports au sein de Dodo IS, ce ne seront que des √©quipes). </p><br><p>  C'est ainsi que nous voyons travailler avec les donn√©es dans Dodo Pizza Engineering.  Nous sommes heureux de lire vos r√©flexions √† ce sujet dans les commentaires. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr475476/">https://habr.com/ru/post/fr475476/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr475464/index.html">La voie de l'architecte: certification et immersion de produit</a></li>
<li><a href="../fr475466/index.html">Intel Xeon E-2200. C≈ìurs de serveur, budget</a></li>
<li><a href="../fr475468/index.html">Quel est le probl√®me avec l'exp√©rience Microsoft sur une semaine de 4 jours ou ne perdons pas la t√™te √† la vue d'une efficacit√© de 40%</a></li>
<li><a href="../fr475470/index.html">Vers o√π le march√© de l'analytique BI se dirige en 2019</a></li>
<li><a href="../fr475472/index.html">Pourquoi la glace est-elle glissante: une r√©ponse scientifique √† la question des enfants</a></li>
<li><a href="../fr475478/index.html">Exp√©rience Netflix: Netflix Inside</a></li>
<li><a href="../fr475480/index.html">Tu es quoi Comment nous avons distingu√© la parodie de l'humain - et m√™me gagn√©</a></li>
<li><a href="../fr475482/index.html">Comment la t√¢che de test est-elle devenue une biblioth√®que de production</a></li>
<li><a href="../fr475486/index.html">Cr√©ateurs AR: l'√©mergence d'un nouveau m√©tier</a></li>
<li><a href="../fr475488/index.html">Pr√©sentation de PyTorch: Deep Learning in Natural Language Processing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>