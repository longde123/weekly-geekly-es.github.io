<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äç‚úàÔ∏è üóø üë©üèª‚Äçü§ù‚Äçüë®üèø LED delgado hecho en casa üßëüèæ‚Äçü§ù‚Äçüßëüèº üë®üèº‚Äçüç≥ üöä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øPor qu√© es necesario? 


 Recientemente, escrib√≠ un art√≠culo sobre una computadora de bicicleta bluetooth casera. Hubo una discusi√≥n animada. Una de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LED delgado hecho en casa</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408807/"><h1>  ¬øPor qu√© es necesario? </h1><br><p>  Recientemente, escrib√≠ un art√≠culo sobre una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">computadora de bicicleta bluetooth</a> casera.  Hubo una discusi√≥n animada.  Una de las sugerencias para la modernizaci√≥n fue la idea de agregar una indicaci√≥n o pantalla LCD.  Me gust√≥ la idea.  Y decid√≠ pensar en c√≥mo darle vida. </p><br><p>  Como las computadoras para bicicletas ya se hab√≠an fabricado, el estuche estaba casi completamente ocupado, la opci√≥n con una pantalla LCD se cay√≥.  Necesit√°bamos un tama√±o de 40x30 mm, teniendo en cuenta todos los cables y alambres, y un grosor de no m√°s de 2-3 mm.  Tambi√©n hay pocas conclusiones libres.  Varios indicadores LED (tres d√≠gitos, escala) no encajaban.  Entonces se me ocurri√≥ una muy buena idea: hacer un indicador casero con LED SMD.  Tome una textolita delgada de un solo lado, coloque en ella el n√∫mero correcto de LED, en el orden correcto y obtendr√° un excelente indicador.  Habiendo imaginado que los cables deber√≠an estar conectados a todos los LED, decid√≠ que un microcontrolador barato encajar√≠a en la placa, que controlar√≠a todos los LED, y el MK principal de la computadora de la bicicleta controlar√≠a el indicador a trav√©s de un cable. </p><br><p>  El resultado es un indicador muy compacto (solo 3 mm de grosor).  Gesti√≥n en un cable, y 2 m√°s en alimentos.  Si tiene dispositivos preparados, o planea hacer un dispositivo, y necesita un indicador, entonces un indicador casero es la mejor opci√≥n.  Veamos m√°s de cerca c√≥mo funciona. </p><a name="habracut"></a><br><h1>  20 LEDs en 10 pines - ¬°f√°cil! </h1><br><p>  MK Eleg√≠ el m√°s caro: SMT8S003, lo mismo que en la computadora de la bicicleta.  Tiene solo 20 piernas.  Si quitas las piernas de poder y control, quedan 14 piernas.  La primera tarea que ten√≠a que resolverse era controlar estas patas con tantos LED como fuera posible. </p><br><p>  Inmediatamente se me ocurri√≥ que se pod√≠an colgar 2 LED en una pata, con un pin en GND y el otro en VDD.  Para cada LED, una resistencia.  De acuerdo con este esquema. </p><br><p><img src="https://habrastorage.org/webt/vc/c-/id/vcc-idtntq-9zcgj2_g-tl7-awe.jpeg"><br clear="left"><br>  Es f√°cil de administrar.  Alimentamos al pin 0, un LED est√° encendido, alimentamos 1: el segundo LED est√° encendido.  Traducimos al tercer estado (entrada), ninguno se quema.  Resulta que en 14 conclusiones puedes colgar 28 LED.  No muy mal. </p><br><p>  El hijo dibuj√≥ el indicador en s√≠.  Para una computadora de bicicleta, el tipo de indicador m√°s √∫til, despu√©s de los n√∫meros, es una escala.  El indicador consta de 2 escalas de 8 LED y 4 LED de estado m√°s diferentes.  Total 20 LEDs.  R√°pidamente dibuj√© el tablero, grab√©, solde y comenc√© a probar. </p><br><p>  Enciendo el MK, todas las conclusiones est√°n en el tercer estado, nada deber√≠a arder.  Y ... los LED est√°n encendidos.  Por supuesto, tienen suficiente voltaje de 5 voltios para brillar tenuemente.  No funcionar√°, cambiamos el esquema ... </p><br><h2>  M√°s LEDs </h2><br><p>  Despu√©s de pensarlo un poco, surgi√≥ otra idea.  Conecte los LED no a la alimentaci√≥n y a la tierra, sino a dos conclusiones m√°s del MK.  Entonces definitivamente puedes apagar todo.  Lo intentamos, funciona muy bien.  Debido a la indicaci√≥n din√°mica, todo parpadea maravillosamente.  Puedes controlar cada LED. </p><br><p>  Como resultado, el siguiente esquema result√≥ para el futuro: </p><br><p><img src="https://habrastorage.org/webt/kd/5c/fc/kd5cfcy9pbstuw4l02doacdbzle.jpeg"><br clear="left">  Distinguimos varias conclusiones de control y trabajadores.  Ponemos las resistencias solo en el control upr1 upr2.  Por lo tanto, el circuito y la traza de la placa se simplifican enormemente.  Se pueden colocar hasta 96 LED en 14 pines.  6 gerentes y 8 trabajadores, m√°s 2 LED en cada uno.  M√°s que suficiente, el brazo de soldadura se cansar√°. </p><br><p>  Result√≥ que puedes hacer m√°s.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Charlie</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Allen</a> fue a√∫n m√°s lejos al colocar varios LED entre los pines de control.  Por lo tanto, se pueden colocar hasta 16 * 15 LED en 16 pines.  Pero, en su circuito, se agregan muchas resistencias, y tambi√©n es necesario que todos los LED sean del mismo color, en general hay peque√±os problemas.  Conclusi√≥n: 96 LED son m√°s que suficientes. </p><br><h1>  Controlamos cada LED individualmente </h1><br><p>  Para controlar cada LED, se utiliza el m√©todo de indicaci√≥n din√°mica.  En un momento dado, se puede encender un LED por salida de control.  A continuaci√≥n, debe ordenar todos los pares, estos son los estados de indicaci√≥n, y as√≠ sucesivamente en un c√≠rculo.  Como la placa ya est√° hecha, la rehice en un pin de control y una resistencia.  Result√≥ 20 LED en una salida y 10 conclusiones de trabajo.  Total 20 estados. </p><br><p><img src="https://habrastorage.org/webt/de/6p/yx/de6pyx1yu4lwcrrknzrnr-7o25m.jpeg"><br clear="left"></p><br><p>  Para reducir el consumo de energ√≠a, MK opera a una frecuencia de 2 MHz.  Para ordenar 20 estados con una frecuencia de 50 Hz como m√≠nimo, necesita un temporizador con una frecuencia de 1000 Hz.  Adem√°s, tambi√©n quer√≠a controlar el brillo.  Pero resulta que, para reducirlo en un factor de 10, necesita una frecuencia de temporizador de 10,000 Hz, y 100 veces los 100,000 Hz.  En este caso, en el controlador de interrupciones, debe ordenar todas las opciones e iluminar el LED deseado.  En general, MK no pudo hacer frente.  Tuve que cambiar a la opci√≥n con modulaci√≥n PWM. </p><br><h1>  Controlamos el brillo usando un temporizador PWM </h1><br><p>  El resultado es un programa simple.  Utilizamos un temporizador: TIM2, con la posibilidad de generar PWM.  Configuramos la frecuencia del temporizador a 1000 Hz, y el valor m√°ximo del temporizador 125 es el ancho PWM, que determinar√° la gradaci√≥n del brillo.  Como resultado, puede establecer cualquier valor de brillo de 0 a 125. En el momento de la segunda interrupci√≥n del temporizador, en comparaci√≥n con el llenado del PWM, apague todos los LED. </p><br><p>  El resultado es un gran indicador.  Debido al control de brillo, el consumo en la fase activa es de 1 mA a 4 mA. </p><br><h1>  Conectamos una bicicleta </h1><br><p>  El indicador en s√≠ est√° listo, en el caso de la computadora de la bicicleta se ve as√≠: </p><br><p><img src="https://habrastorage.org/webt/ra/si/ap/rasiapvq2nntvwyejmvpegpakym.jpeg"><br clear="left"><br>  Para controlar el indicador, eleg√≠ el protocolo de 1 cable.  No lo describir√©.  Solo puedo decir que tuve que atormentarme para manejar la interrupci√≥n y soportar los tiempos necesarios, pero al final funcion√≥.  La computadora de la bicicleta es como un maestro, y el indicador es como un esclavo.  Para el control, se deben transmitir 4 bytes.  El primer byte es el comando, el brillo y un bit para entrar en modo de suspensi√≥n, los 3 bytes restantes son LED, un bit por LED. </p><br><p>  Lo primero que se me ocurri√≥ mostrar en el indicador fue la velocidad y el personal.  Los LED de servicio deben dejarse para el estado del bluetooth, la violaci√≥n del control de velocidad y cadencia, y otro: control de distancia. </p><br><p>  Despu√©s de las pruebas experimentales, agregu√© la capacidad de mostrar la distancia restante del conjunto o las calor√≠as restantes del conjunto.  Result√≥ muy conveniente.  Usted establece un plan: gastar 2000 Cal para caminar, ve y ve de inmediato, todav√≠a quedan la mitad.  Conclusi√≥n: una indicaci√≥n es algo √∫til. </p><br><p>  A mi hijo realmente le gust√≥, tuvo la idea de hacer un llavero, un indicador con una bater√≠a de epoxi.  Fui a pensar. </p><br><h1>  ¬øQu√© otros indicadores se pueden hacer? </h1><br><p>  Reloj - LED en dos c√≠rculos - horas y minutos. </p><br><p>  Puntos cardinales: para la br√∫jula electr√≥nica. </p><br><p>  Escala para codificador rotatorio incremental. </p><br><p>  Varias escalas en un indicador. </p><br><p>  Coraz√≥n para una tarjeta musical. </p><br><p>  Matriz 8x8 para mostrar im√°genes. </p><br><p>  Indicador delgado de siete segmentos para un d√≠gito de 11 LED. </p><br><p>  En general, hay muchas ideas sobre c√≥mo usar esto. </p><br><p>  En <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> , como de costumbre, una placa, un programa, la implementaci√≥n del protocolo de 1 cable y la indicaci√≥n din√°mica.  Quien lo necesite, puede usarlo en sus proyectos. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es408807/">https://habr.com/ru/post/es408807/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es408795/index.html">La b√∫squeda de vida en el sistema solar.</a></li>
<li><a href="../es408797/index.html">Una breve historia de la pantalla azul de la muerte</a></li>
<li><a href="../es408799/index.html">El auto el√©ctrico en la carga de la prueba de enero Falcon Heavy fue una broma. O no ...</a></li>
<li><a href="../es408801/index.html">Estafa en la nube: c√≥mo los estafadores intentan hacerse pasar por HashFlare y vender servicios inexistentes</a></li>
<li><a href="../es408803/index.html">M√∫sica de color incre√≠blemente espectacular en Arduino y LED</a></li>
<li><a href="../es408809/index.html">Mi odisea de Bitcoin de $ 200K</a></li>
<li><a href="../es408811/index.html">La nueva impresora 3D imprime 10 veces m√°s r√°pido que los modelos existentes</a></li>
<li><a href="../es408815/index.html">El comercio de futuros de Bitcoin ha comenzado: consecuencias y pron√≥sticos</a></li>
<li><a href="../es408817/index.html">¬øQui√©nes son los "vagabundos grises" de Australia?</a></li>
<li><a href="../es408819/index.html">$ 8 millones para la ca√≠da de estrellas. ALE iniciar√° el lanzamiento de la primera lluvia de meteoros artificiales del mundo en 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>