<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïù üëÅ‚Äçüó® üîº Wie schreibe ich Programme an der Schnittstelle von mobiler Entwicklung und Algorithmen? Yandex Wettbewerb und Geschichten ü§≠ ü§æüèª üõÖ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vom 10. bis 22. September findet der mobile Entwicklungswettbewerb Yandex.Blitz statt. Die Registrierung ist offen . Blitz ist ein kurzer Weg zu Yande...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie schreibe ich Programme an der Schnittstelle von mobiler Entwicklung und Algorithmen? Yandex Wettbewerb und Geschichten</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/420305/">  Vom 10. bis 22. September findet der mobile Entwicklungswettbewerb Yandex.Blitz statt.  Die Registrierung ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offen</a> .  Blitz ist ein kurzer Weg zu Yandex: Die f√ºnf besten Teilnehmer m√ºssen einen Abschnitt des Interviews anstelle der vier Standardabschnitte erfolgreich bestehen, um ein Stellenangebot zu erhalten. <br><br>  Anl√§sslich des Wettbewerbs haben wir mit Kollegen √ºber interessante Aufgaben gesprochen, die sich sofort auf mobile Plattformen und Algorithmen beziehen.  Heute werden wir ihre Geschichten mit Lesern von Habr teilen. <br><br><img src="https://habrastorage.org/webt/3z/_5/ry/3z_5rygov_eu9yhgyzngfbv6vmy.png"><br><br>  Es wird angenommen, dass die Entwicklung mobiler Anwendungen etwas Besonderes ist, weit entfernt von der Programmierung im allgemeinen Sinne, und Spezialisten, die f√ºr Android und iOS schreiben, nie auf die L√∂sung algorithmisch intensiver Aufgaben sto√üen, sondern sich darauf beschr√§nken, vorgefertigte Bibliotheken zu verbinden, Bildschirme zu setzen, einfache Gesch√§ftslogik zu schreiben und Erforschung von Fehlern einer bestimmten Plattform.  Aber nicht so einfach. <br><br><a name="habracut"></a>  Das Erstellen von Software f√ºr mobile Ger√§te ist immer mit Einschr√§nkungen verbunden.  Selbst in High-End-Ger√§ten sind CPUs und GPUs nicht so leistungsf√§hig und haben nicht so viel Speicher wie in einem modernen Computer.  Gleichzeitig sind Budget-Smartphones mit noch schw√§cherer Hardware der Hauptteil des Marktes.  Ihre Eigent√ºmer sind besonders von einem Mangel an Ressourcen betroffen. <br><br>  Die Entwicklung eines komplexen Wettbewerbsprojekts ist ohne den Einsatz von L√∂sungen, die Aufgaben schneller als in einer quadratischen Zeit bew√§ltigen, nicht m√∂glich.  Benutzer k√∂nnen sich an einen Mitbewerber wenden, wenn ihnen die Arbeitsgeschwindigkeit oder der Verbrauch von Batteriestrom in Ihrer Anwendung nicht gef√§llt. <br><br>  Historisch gesehen ist Blitz ein Wettbewerb um die Kenntnis von Algorithmen und die F√§higkeit, die Idee einer L√∂sung in Code umzusetzen.  Blitz, der im September stattfinden wird, wird keine Ausnahme sein.  Wir haben versucht, Aufgaben mit Algorithmen auszuw√§hlen, die denen √§hneln, die von Yandex-Mobilentwicklern in realen Projekten f√ºr Android und iOS verwendet werden. <br><br><h4>  Beschleunigen Sie den Sugest Browser </h4><br>  <b><i>Mikhail Efimov, Hauptentwickler</i></b> : <br><blockquote> - Ich habe Omnibox - Browser-Suchzeichenfolge.  Die automatische Ausf√ºllung funktioniert darin - geben Sie einfach den Wortanfang ein, und wir bieten das ganze Wort an.  Die anf√§ngliche Aufgabe kann wie folgt vereinfacht werden: Nachdem Sie eine Eingabezeichenfolge erhalten haben, suchen Sie alle W√∂rter aus einer vordefinierten Menge, in der die Eingabezeichenfolge als Teilzeichenfolge angezeigt wird.  Dazu nehmen wir alle Suffixe des Wortes - alle Teilzeichenfolgen, mit denen es endet.  F√ºr das Wort "Tabelle" sind es beispielsweise "Tabelle" und "Tol".  Suffixe mit ein oder zwei Zeichen - hier h√§tten wir "ol" und "l" - werden nicht ber√ºcksichtigt, da durch sie M√ºll in den Sest gelangt. <br><br>  Anstelle eines Wortes erhalten wir also zwei.  Wenn es aus f√ºnf Buchstaben bestehen w√ºrde, w√ºrden sie drei usw. erhalten. Au√üerdem k√∂nnen Sie beispielsweise eine bekannte Datenstruktur erstellen, mit der Sie nach ihnen suchen k√∂nnen.  Diese Struktur hat jedoch einen Nachteil: Sie kann viel Speicherplatz beanspruchen. <br><br>  Wir haben wiederum eine sortierte Liste von Suffixen gef√ºhrt - Suffix-Array.  Das Element im Array ist nicht das gesamte Suffix - dann w√ºrde die Struktur zu viel Speicher beanspruchen, eine quadratische Menge -, sondern nur ein Paar Zeiger.  Der erste gibt das Wort oder die Phrase an, die Sie verwenden m√∂chten, der zweite das Symbol in dem Wort oder der Phrase, mit dem das Suffix beginnt.  Dieser Ansatz spart Speicher.  Wir haben nur zwei Zeiger, zwei Acht-Byte-Zahlen anstelle von sehr langen W√∂rtern. <br><br>  Die n√§chste Frage ist, wie eine bereits sortierte Liste gespeichert wird.  Es kann als einfaches Array gespeichert werden - aber dann werden sehr lange neue Eintr√§ge in das Array eingef√ºgt.  Daher habe ich mich entschieden, den "erweiterten" bin√§ren Suchbaum zu speichern - den erweiterten bin√§ren Suchbaum.  Als Schl√ºssel enth√§lt jeder Knoten im Baum ein bestimmtes Suffix f√ºr ein bestimmtes Wort, und als ‚ÄûErg√§nzung‚Äú werden Informationen zu Priorit√§ten in den Knoten gespeichert.  Sie m√ºssen lediglich den Baumknoten finden, der dem eingegebenen Pr√§fix entspricht.  Au√üerdem k√∂nnen Sie diesen und benachbarte Knoten analysieren, um zu verstehen, welches der W√∂rter f√ºr die Ausgabe verwendet werden kann. <br><br>  Unter diesen werden diejenigen mit einer h√∂heren Priorit√§t ausgew√§hlt.  Die Priorit√§t wird durch die L√§nge des Einr√ºckens des Suffixes vom Wortanfang an beeinflusst.  Bei W√∂rtern ohne Einzug ist die Priorit√§t h√∂her. Wenn der Benutzer beispielsweise "st" eingegeben hat, hat das Wort "Tabelle" eine viel h√∂here Priorit√§t als das Wort "Br√ºcke".  Im Prinzip k√∂nnen Sie jedoch eine solche Zeichenfolge eingeben, dass der Browser als Antwort das Wort anzeigt, bei dem diese Reihenfolge in der Mitte oder am Ende auftritt.  Zum Beispiel, wenn es kein Wort gibt, das mit dieser Sequenz beginnt. </blockquote><br><h4>  Anzeige von CCTV-Kameras auf mobilen Yandex.Maps </h4><br>  <i><b>Sergey Kuznetsov, Hauptentwickler</b> :</i> <br><blockquote>  - Wir hatten einen Algorithmus, der Kameras auf einer Karte anzeigte.  Er arbeitete in quadratischer Zeit, nicht sehr schnell.  Es gab die Idee, dass es verbessert werden kann, ohne auf Schnickschnack zur√ºckzugreifen. <br><br>  Wenn wir √ºber die Aussage des Problems sprechen, dann hatten wir viele Kameras, die angezeigt werden m√ºssen.  In hohen Ma√üst√§ben der Karte konnten sie sich √ºberschneiden, und es war h√§sslich - es musste eine Kamera angezeigt werden, anstatt dass sich viele √ºberschnitten. <br><br>  Wenn wir dieses Problem formalisieren, l√§uft es auf Folgendes hinaus: In der Ebene gibt es n identische Quadrate mit Seiten parallel zu den Koordinatenachsen, und Sie m√ºssen aus ihnen eine so gro√üe Anzahl von Quadraten ausw√§hlen, dass sie sich nicht darin schneiden und alle anderen Quadrate mindestens eines schneiden Quadrate des urspr√ºnglichen Satzes.  Der einfachste L√∂sungsalgorithmus - als wir ein Quadrat ausgew√§hlt und mit allen anderen geschnitten haben - funktionierte f√ºr n <sup>2</sup> .  Das Problem kann jedoch in n * log (n) unter Verwendung einer bestimmten Klasse von Algorithmen gel√∂st werden, die in der Literatur als "Abtastzeile" bezeichnet wird.  Wenn Sie diesen Ansatz nicht kennen, kann dieses Problem nat√ºrlich gel√∂st werden, aber wenn Sie es wissen, kann es viel einfacher gel√∂st werden.  Sie wissen sofort, in welche Richtung Sie denken m√ºssen. </blockquote><br><img src="https://habrastorage.org/webt/qp/5g/kq/qp5gkqw4zm-uhpoopbmma9jqk1q.png" width="350"><img src="https://habrastorage.org/webt/mr/sv/qt/mrsvqt_-ri1ognvqr4eokhkvj4m.png" width="350"><br><h5>  <sub><sup>Kameras auf mobilen Karten.</sup></sub>  <sub><sup>Wenn Sie verkleinern, bleibt nur ein Symbol √ºbrig</sup></sub> </h5><br><h4>  Abrufen von Daten aus einer der Quellen des Sugest-Browsers </h4><br>  <i><b>Alexander Yashkin, Leiter der Portal-Backend-Gruppe</b> :</i> <br><blockquote>  - Es gibt mehrere "schwere" Quellen f√ºr Tipps, die beim Eingeben im Omnibox-Browser angezeigt werden.  Eine solche Quelle ist der lokale Verlauf des Benutzers.  Tipps aus der Geschichte werden von einem historischen Anbieter hochgeladen - eine Komponente kam von Chromium zu uns.  Was ist das Besondere an Omnibox?  Es sollte sehr schnell sein und sofort w√§hrend der Eingabe angezeigt werden, damit die Quellen gr√∂√ütenteils synchron sind.  Wenn der Browser gestartet wird, erstellt der Anbieter einen schnellen Index der Verlaufstipps der letzten Woche.  In Chromium verwendete der Verlaufsindex f√ºr Omnibox die assoziativen Container std :: set und std :: map aus der C ++ - Standardbibliothek.  Um Daten in solchen Beh√§ltern zu speichern, wird normalerweise rot-schwarzes Holz verwendet. <br><br>  Unsere Aufgabe war es, die Verlaufssuche in der Omnibox zu beschleunigen.  Anhand der Histogramme der Benutzer haben wir gesehen, dass die historische Suche die meiste Zeit in Anspruch nimmt und auf langsamen Computern die Menschen wirklich leiden.  F√ºr einige war die Erwartung eine Zehntelsekunde - wenn Sie schnell Zeichen in die Omnibox eingeben, ist sie zu lang und kann noch schlimmer sein. <br><br>  Ich habe verschiedene Ans√§tze, Optimierungen, vorgelagert in Chromium gemacht.  Gleichzeitig wurden √Ñnderungen an unserem Code vorgenommen.  Dann ging die Aufgabe an unseren Entwickler Denis Yaroshevsky √ºber.  Er ist ein ziemlich begeisterter Entwickler - er interessiert sich f√ºr C ++, STL, Algorithmen.  Nach dem St√∂bern schlug er vor, radikal zu handeln: Ersetzen Sie std :: set durch flat_set und std :: map durch flat_map.  √Ñndern Sie einfach die Grundstruktur.  std :: set und std :: map speichern ihre Elemente in den Knoten des Baums, und flat_set und flat_map sind tats√§chlich Wrapper √ºber dem sortierten Vektor.  Flache Container sind einer der beliebtesten Container, die nicht Teil der C ++ - Standardbibliothek sind.  Vielleicht fallen sie im n√§chsten Standard noch hinein. <br><br>  Zuerst gab es ein gewisses Misstrauen: Der vorgeschlagene Weg schien zu einfach und lag an der Oberfl√§che.  Um die Wirksamkeit zu beweisen, haben wir einen Perf-Test durchgef√ºhrt: Wir haben das Profil eines unserer Kollegen erstellt, daraus einen Verlaufsindex erstellt und beliebte Abfragen durchgef√ºhrt.  Wir haben 10 Anfragen ausgew√§hlt und die Zeiten gez√§hlt.  Denis zeigte mir das Ergebnis, die Verbesserungen waren offensichtlich und ich glaubte auch an seine Idee. <br><br>  Das gefundene Problem war nicht spezifisch f√ºr Yandex.Browser.  Es betraf jeden Chromium-basierten Browser. Als Teilnehmer des Chromium-Projekts haben wir uns daher zun√§chst f√ºr einen Upstream entschieden.  Aber in Chrom gibt es viele, die sich verpflichten, und einige der vorgeschlagenen Ideen sind wild.  Chrom-Entwickler stehen allen, die anbieten, etwas von au√üen zu √§ndern, umso vorsichtiger gegen√ºber, umso radikaler.  Zuerst wollten sie unseren Patch nicht nehmen.  Sie schlugen zuvor vor, die Wirksamkeit zu beweisen und ein Mini-Design-Dokument zu schreiben, damit sie die Idee verstehen, davon profitieren und den Vorschlag kritisieren k√∂nnen. <br><br>  Au√üerdem hie√ü es: Wenn Sie es brauchen, schreiben Sie separate Implementierungen von flachen Containern und f√ºgen Sie sie hinzu.  F√ºgen Sie unserem Projekt keine neuen Bibliotheken hinzu - Implementierungen sind bereits in boost, eastl vorhanden.  Den Grundkomponenten von Chrom sollten flache Beh√§lter zugesetzt werden.  Dies ist ein Analogon zur Standardbibliothek, und Chromleute sind sehr besorgt, damit nichts √úberfl√ºssiges in sie gelangt. <br><br>  Denis Yaroshevsky hat das alles getan, Zeit damit verbracht, ein Designdokument zu schreiben, die Implementierung von flat_set in C ++ - Vorlagen zu schreiben, viel Template-Magie anzuwenden, Tests √ºber die Funktionalit√§t von Containern zu schreiben und einen weiteren synthetischen Perf-Test zu erstellen - wir konnten keinen Perf-Test mit real senden Profil eines Kollegen.  Denis diskutierte mit den Eigent√ºmern des Basis- und Omnibox-Codes, √ºberarbeitete den Code basierend auf den Ergebnissen der √úberpr√ºfung grundlegend - und √ºberwand sie schlie√ülich und lud den Code auf Chromium hoch. <br><br>  Diese ganze Saga dauerte sechs Monate.  Das Chrom schrieb dann: ‚ÄûJa, wir haben wirklich eine 10‚Äì20% ige Verbesserung aller Histogramme gesehen.  Gro√üartig, danke! "  Von ihnen kam es uns schon durch den Downstream im Browser und dann ein Happy End.  In der Tat hat sich der historische Index bei allen Konfigurationen und auf allen Plattformen erheblich beschleunigt.  In diesem Index sind die Vorteile von Flachbeh√§ltern viel besser als die Nachteile. <br><br>  Nach dem Upstream wurden flat_set und flat_map viel h√§ufiger verwendet - jetzt finden Sie im Code mehrere hundert Stellen, an denen sie beteiligt sind.  Moral - Geduld und Arbeit werden alles zermahlen und sorgf√§ltig nicht nur Algorithmen f√ºr Ihren Code ausw√§hlen, sondern auch geeignete Datenstrukturen. </blockquote><br><img src="https://habrastorage.org/webt/ax/2-/3k/ax2-3k3so-zw4zsgqtgmkajj7uo.png"><br><h5>  <sub><sup>Siehe die linke Seite des Diagramms.</sup></sub>  <sub><sup>Ein starker R√ºckgang der Ladezeit der Omnibox-Ergebnisse zu Beginn des Jahres 2017 ist genau auf den √úbergang zu flat_set und flat_map zur√ºckzuf√ºhren</sup></sub> </h5><br><h4>  Beschleunigen einer der HashMap in Chromium </h4><br>  <i><b>Oleg Maksimenko, Hauptentwickler</b> :</i> <br><blockquote>  "Ziel war es, die Speicherung regul√§rer HTML-Seiten in einem unserer Teilprojekte zu beschleunigen."  Ich habe die Standardmethode zum Profilieren des Codes verwendet - ich habe mir angesehen, welche Codeteile beim Speichern ‚Äûhei√ü‚Äú sind.  Ich bin auf einen unerwarteten Ort gesto√üen.  Das hei√üt, dies ist nicht die Hauptlogik, sondern nur eine Suche im HashMap-Container, die einen kleinen Prozentsatz der Gesamtzeit einnehmen sollte.  Stattdessen gab es wirklich hohe Kosten. <br><br>  Ich habe beschlossen, die bestehende Implementierung zu ersetzen.  Es war eine interne HashMap von Chromium.  Ich habe ihn ersetzt und mehrmals gewonnen.  Dann ging ich noch ein St√ºck weiter und stellte sicher, dass dies kein Fehler der Jungs von Google war, dass es nicht darum ging, die gesamte HashMap zu implementieren, sondern eine Hash-Funktion.  Das ist eine √§u√üere Sache.  Und es stellte sich heraus, dass der von uns verwendete Code einen trivialen Hash enthielt. Die Adresse im Speicher wurde als Hash verwendet.  M√∂glicherweise passte eine solche L√∂sung aufgrund einiger Merkmale, beispielsweise eines kleinen Volumens, zu ihnen.  Vielleicht war ihre HashMap kein Hot Spot, aber sie wurde uns, als wir diese Struktur anwendeten.  Durch einfaches Ersetzen der naiven und trivialen Hash-Funktion durch std :: hash wurde die Geschwindigkeit um das 3- bis 10-fache erh√∂ht.  Infolgedessen verschwand dieser Appell an das Hash-Ged√§chtnis von der Liste der Hot Spots und nahm, wie zun√§chst erwartet, einen kleinen Prozentsatz ein.  Alles wurde gut und sch√∂n. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de420305/">https://habr.com/ru/post/de420305/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de420295/index.html">NeoQUEST-2018: der lang erwartete Cold Boot, wissenschaftliche Forschung und G√§ste aus Nischni Nowgorod</a></li>
<li><a href="../de420297/index.html">Schritt-f√ºr-Schritt-Anleitung zum Wiederherstellen des Zugriffs auf Linux Amazon EC2-Instanzen beim Verlust einer PEM-Datei</a></li>
<li><a href="../de420299/index.html">Meine Lieblingsbeispiele f√ºr funktionale Programmierung in Kotlin</a></li>
<li><a href="../de420301/index.html">Indischer Premierminister Narendra Modi: Wir werden die Flagge des Landes 2022 an Bord der Gaganyan ins All schicken</a></li>
<li><a href="../de420303/index.html">Lastausgleich beim Parsen von Sites und Verbinden zus√§tzlicher Cloud-Ressourcen</a></li>
<li><a href="../de420307/index.html">5 CSS-Tricks, die Sie kennen sollten</a></li>
<li><a href="../de420311/index.html">Wie unsere Intuition uns √ºber die globale Erw√§rmung t√§uscht</a></li>
<li><a href="../de420313/index.html">Wir machen literarische Stunden auf der Basis des elektronischen Buches</a></li>
<li><a href="../de420315/index.html">Wir machen einen 3D-Konfigurator ohne Programmierung und Layout</a></li>
<li><a href="../de420317/index.html">Ein neuer Sofortbluttest f√ºr Hirnsch√§den wurde entwickelt.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>