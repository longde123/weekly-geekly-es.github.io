<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÖ∞Ô∏è üßëüèø ‚ùì PVS-Studio para Visual Studio üôçüèø üîí üçö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Muitos de nossos artigos est√£o focados em qualquer coisa, mas n√£o na ferramenta PVS-Studio em si. Considerando que fazemos muito para tornar seu uso c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PVS-Studio para Visual Studio</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/458068/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b55/042/8ad/b550428adfba0288bfdfce8d5f15e6fa.png"></div><br>  Muitos de nossos artigos est√£o focados em qualquer coisa, mas n√£o na ferramenta PVS-Studio em si.  Considerando que fazemos muito para tornar seu uso conveniente para os desenvolvedores.  No entanto, nossos esfor√ßos costumam ser escondidos nos bastidores.  Decidi remediar essa situa√ß√£o e falar sobre o plug-in PVS-Studio para Visual Studio.  Se voc√™ usa o Visual Studio, este artigo √© para voc√™. <br><a name="habracut"></a><br><h2>  O que √© an√°lise de c√≥digo est√°tico e por que precisamos dela </h2><br>  A an√°lise de c√≥digo est√°tico √© o processo de detec√ß√£o de erros e falhas no c√≥digo fonte dos programas.  A an√°lise est√°tica pode ser considerada como um processo de revis√£o automatizada de c√≥digo.  A <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">revis√£o</a> conjunta de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo</a> √© uma metodologia maravilhosa.  No entanto, tem uma desvantagem significativa - alto custo.  √â necess√°rio reunir v√°rios programadores para revisar o c√≥digo rec√©m-escrito ou reescrito ap√≥s as modifica√ß√µes feitas nele. <br><br>  Por um lado, queremos revisar o c√≥digo regularmente.  Por outro lado, √© muito caro.  A solu√ß√£o de compromisso s√£o ferramentas de an√°lise est√°tica.  Eles analisam seriamente o c√≥digo fonte dos programas e d√£o recomenda√ß√µes aos programadores sobre a revis√£o de certos fragmentos de c√≥digo.  Obviamente, um programa n√£o substituir√° uma revis√£o de c√≥digo completa, feita por uma equipe de desenvolvedores.  No entanto, a rela√ß√£o pre√ßo / benef√≠cio torna a an√°lise est√°tica uma pr√°tica bastante √∫til, aplicada por muitas empresas.  Se o leitor estiver interessado em n√∫meros precisos, sugiro que voc√™ leia o artigo " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PVS-Studio ROI</a> ". <br><br>  Existem muitos analisadores de c√≥digo est√°tico comerciais e gratuitos.  Uma grande lista de analisadores est√°ticos est√° dispon√≠vel na Wikipedia: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Lista de ferramentas para an√°lise de c√≥digo est√°tico</a> .  A lista de linguagens para as quais existem analisadores de c√≥digo est√°tico √© bastante grande (C, C ++, C #, Java, Ada, Fortran, Perl, Ruby, ...).  Escusado ser√° dizer que falaremos sobre o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">analisador</a> PVS-Studio. <br><br>  A principal vantagem da an√°lise de c√≥digo est√°tico √© a oportunidade de reduzir bastante o custo de eliminar defeitos em um programa.  Quanto mais cedo um erro for detectado, menos caro ser√° corrigi-lo.  Assim, de acordo com o livro ‚ÄúCode Complete‚Äù de McConnell, a detec√ß√£o de erros no est√°gio de teste de c√≥digo √© dez vezes mais cara do que no est√°gio de cria√ß√£o de c√≥digo (codifica√ß√£o): <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/834/bdd/a8f/834bdda8fd783e91db60015010476cd6.png" alt="Figura 1. Custo m√©dio de corre√ß√£o de defeitos, dependendo do tempo de sua apar√™ncia e detec√ß√£o no c√≥digo (os dados na tabela s√£o retirados do livro 'Code Complete' de S. McConnell)"></div><br>  <font color="#999999"><i>Figura 1. Custo m√©dio de corre√ß√£o de defeitos, dependendo do tempo de sua apar√™ncia e detec√ß√£o no c√≥digo (os dados na tabela s√£o retirados do livro 'Code Complete' de S. McConnell)</i></font> <br><br>  As ferramentas de an√°lise est√°tica permitem detectar um grande n√∫mero de erros, t√≠picos do est√°gio de cria√ß√£o do c√≥digo, o que reduz significativamente o custo de todo o desenvolvimento do projeto.  Por exemplo, o analisador de c√≥digo est√°tico do PVS-Studio pode ser executado em modo de segundo plano logo ap√≥s a compila√ß√£o e, no caso de encontrar poss√≠veis erros, notificar√° o programador.  Mais sobre este modo ser√° apresentado abaixo. <br><br><h2>  Analisador de c√≥digo est√°tico PVS-Studio </h2><br>  O PVS-Studio √© um analisador est√°tico que detecta bugs e poss√≠veis vulnerabilidades no c√≥digo-fonte dos aplicativos em C, C ++ (outras extens√µes suportadas: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C ++ / CLI</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C ++ / CX</a> ), C # e Java nas plataformas Windows, Linux e macOS.  O analisador √© soberbamente integrado aos IDEs do Visual Studio 2010 - 2019 e do IntelliJ IDEA.  Neste artigo, veremos mais de perto o PVS-Studio, verificando o c√≥digo nas linguagens C, C ++ e C #.  Voc√™ pode ler sobre como usar o PVS-Studio para verificar o c√≥digo Java no IntelliJ IDEA <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Ap√≥s a instala√ß√£o do PVS-Studio e sua integra√ß√£o no Visual Studio, os usu√°rios recebem um item adicional "PVS-Studio" no menu principal e na janela para trabalhar com mensagens de erro: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/943/589/d81/943589d818ec8e95fe078ed08585fe5c.png" alt="Figura 2. Os principais itens que o analisador PVS-Studio adiciona ao integrar ao Visual Studio."></div><br>  <font color="#999999"><i>Figura 2. Os principais itens que o analisador PVS-Studio adiciona ao integrar ao Visual Studio.</i></font> <br><br><h3>  Configura√ß√µes iniciais </h3><br>  O analisador est√° pronto para funcionar logo ap√≥s a instala√ß√£o.  Na maioria dos casos, voc√™ n√£o precisa configurar nada para a primeira execu√ß√£o.  A √∫nica configura√ß√£o que voc√™ pode precisar no in√≠cio √© a exclus√£o de bibliotecas de terceiros.  Voc√™ n√£o vai consertar nada nos arquivos originais, por exemplo, na biblioteca jpeg, portanto n√£o h√° necessidade de verificar isso.  Al√©m disso, a exclus√£o de pastas desnecess√°rias acelerar√° a an√°lise do projeto.  As exce√ß√µes do diret√≥rio s√£o definidas aqui: PVS-Studio&gt; Op√ß√µes ...&gt; N√£o verificar arquivos&gt; PathMasks (consulte a Figura 3). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee5/c57/d08/ee5c57d087ce5294b2de1cc455fbd662.png" alt="Figura 3. Editando uma lista de diret√≥rios que o analisador n√£o verificar√°."></div><br>  <font color="#999999"><i>Figura 3. Editando uma lista de diret√≥rios que o analisador n√£o verificar√°.</i></font> <br><br>  Se no nome completo do arquivo houver um dos nomes especificados, a an√°lise n√£o ser√° realizada para esse arquivo.  Por padr√£o, os nomes de alguns diret√≥rios j√° est√£o inclu√≠dos na lista.  No entanto, no seu projeto, o diret√≥rio com a biblioteca ZLib pode ser chamado n√£o de "zlib", mas, por exemplo, "zip_lib".  Portanto, esta lista deve ser editada.  Para come√ßar a editar, voc√™ precisa clicar em um bot√£o com tr√™s pontos. <br><br>  Exemplos de m√°scaras aceit√°veis ‚Äã‚Äãpara a lista PathMasks: <br><br><ul><li>  c: \ Libs \ - todos os arquivos deste diret√≥rio e seus subdiret√≥rios ser√£o exclu√≠dos. </li><li>  \ Libs \ ou * \ Libs \ * - todos os arquivos nos diret√≥rios, o caminho ao qual cont√©m o subdiret√≥rio "Libs" ser√° exclu√≠do.  Se os s√≠mbolos "*" n√£o forem especificados, eles ser√£o adicionados automaticamente de qualquer maneira, portanto as duas op√ß√µes ser√£o iguais. </li><li>  Libs ou * Libs * - todos os arquivos, cujo caminho cont√©m o subdiret√≥rio, cujo nome √© igual ou cont√©m 'Libs'.  Tamb√©m neste caso, todos os arquivos que cont√™m Libs em seus nomes, por exemplo, c: \ project \ mylibs.cpp, ser√£o exclu√≠dos.  Para evitar confus√£o, recomendamos sempre usar barras. </li></ul><br>  Al√©m de excluir diret√≥rios inteiros, voc√™ pode definir m√°scaras para excluir arquivos individuais.  Para fazer isso, existe a configura√ß√£o FileNameMasks.  Saiba mais sobre como trabalhar com listas de exce√ß√µes na documenta√ß√£o: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Configura√ß√µes: N√£o verifique arquivos</a> . <br><br><h3>  Verifica√ß√£o do projeto </h3><br>  Ao concluir as configura√ß√µes iniciais, voc√™ pode come√ßar a verificar o projeto.  O PVS-Studio para Visual Studio oferece suporte √† verifica√ß√£o de projetos em C ++ (.vcxproj) e C # (.csproj).  Voc√™ tamb√©m pode tentar verificar imediatamente a solu√ß√£o inteira, que cont√©m projetos desses tipos.  Para fazer isso, selecione o item de menu Extens√µes Extens√µes&gt; PVS-Studio&gt; Verificar&gt; Solu√ß√£o (consulte a Figura 4). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/716/ee3/2d8/716ee32d88dcc6bac832be8356dfaca6.png" alt="Figura 4. Verifique uma solu√ß√£o usando o analisador PVS-Studio."></div><br>  <font color="#999999"><i>Figura 4. Verifique uma solu√ß√£o usando o analisador PVS-Studio.</i></font> <br><br>  Se houver alguma dificuldade com a verifica√ß√£o, recomendamos consultar a se√ß√£o " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PVS-Studio: Solu√ß√£o de problemas</a> " em nosso site.  Essas n√£o s√£o recomenda√ß√µes est√∫pidas no esp√≠rito de "verificar se o plugue est√° inserido no soquete".  A se√ß√£o descreve situa√ß√µes t√≠picas das solicita√ß√µes dos usu√°rios e sugere op√ß√µes. <br><br><h3>  Trabalhando com uma lista de mensagens de diagn√≥stico </h3><br>  Ap√≥s a verifica√ß√£o, todas as mensagens de diagn√≥stico ser√£o exibidas em uma janela especial.  A janela possui muitos componentes de controle.  Todos eles servem para mostrar exatamente as mensagens de diagn√≥stico que s√£o interessantes para o usu√°rio.  No entanto, no primeiro momento, a janela pode parecer complicada.  Vejamos todos os componentes de controle (veja a Figura 5). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b28/700/7c4/b287007c4520a416cd531e31962c01ca.png" alt="Figura 5. Uma janela com mensagens de diagn√≥stico."></div><br>  <font color="#999999"><i>Figura 5. Uma janela com mensagens de diagn√≥stico.</i></font> <br><br><ol><li>  Bem, aqui est√° a janela do PVS-Studio. </li><li>  Menu adicional.  Permite acessar op√ß√µes como marcar avisos como falsos, ocultar mensagens e adicionar arquivos a exce√ß√µes (leia sobre isso abaixo). </li><li>  O bot√£o ativa as mensagens "algo deu errado".  Por exemplo, um dos arquivos n√£o pode ser pr√©-processado. </li><li>  V√° para a mensagem anterior / seguinte.  Isso abre o arquivo relevante e o cursor √© colocado na linha com um erro em potencial.  Al√©m disso, voc√™ sempre pode selecionar um diagn√≥stico da lista com um clique duplo.  Voc√™ pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">definir teclas</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">atalho</a> para transi√ß√µes para a mensagem anterior / seguinte.  Por padr√£o, s√£o Alt + '[' e Alt + ']'. </li><li>  Bot√µes que incluem avisos de diferentes n√≠veis.  Os dois primeiros n√≠veis de diagn√≥stico est√£o agora ativados.  Ao mesmo tempo, a janela mostra 90 avisos do primeiro n√≠vel, 6700 avisos do segundo n√≠vel.  O n√≠vel da mensagem √© mostrado no lado esquerdo da janela como uma faixa, correspondendo √† cor da faixa no bot√£o de n√≠vel correspondente.  Por que existem tantos disparos?  Por que 6700 avisos?  Para demonstrar as habilidades da interface, um conjunto de regras <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MISRA</a> est√° ativado, o que √© inadequado para aplicativos regulares :). </li><li>  Conjuntos ativos de regras de diagn√≥stico.  Geral - diagn√≥stico geral, Otimiza√ß√£o - micro-otimiza√ß√£o, diagn√≥stico de 64 bits - 64 bits, diagn√≥stico dos padr√µes MISRA - MISRA C e MISRA C ++.  Todos os tipos de avisos agora s√£o exibidos na janela. </li><li>  O indicador mostra o n√∫mero de avisos marcados como falsos (alarmes falsos).  Voc√™ pode ativar / desativar a exibi√ß√£o de mensagens marcadas nas configura√ß√µes - PVS-Studio&gt; Op√ß√µes ...&gt; Configura√ß√µes espec√≠ficas do analisador&gt; Exibir alarmes falsos. </li><li>  Filtros r√°pidos.  Por exemplo, voc√™ pode encurtar a lista para apenas mensagens com o c√≥digo V501 e as do projeto XYZ. </li><li>  Alguns diagn√≥sticos sugerem prestar aten√ß√£o n√£o a uma, mas a v√°rias linhas.  Nesse caso, pontos aparecem ao lado do n√∫mero da linha.  Clicando nele, voc√™ pode ver a lista de linhas e escolher uma delas. </li></ol><br>  A tabela com mensagens de diagn√≥stico √© dividida nas seguintes colunas: <br><br><ul><li>  <b>N√≠vel</b>  O n√≠vel de certeza que indica que foi encontrado um erro, n√£o um cheiro de c√≥digo.  O n√≠vel 1 (vermelho) mostra os locais mais suspeitos.  O n√≠vel 3 (amarelo) √© provavelmente uma imprecis√£o n√£o essencial no c√≥digo. </li><li>  <b>Estrela</b>  N√£o tem um objetivo espec√≠fico.  Os usu√°rios podem interpret√°-lo como desejarem.  Por exemplo, um usu√°rio pode marcar os avisos mais interessantes para uma an√°lise mais cuidadosa.  A analogia √© a marca principal de emails em clientes de email como o Thunderbird ou o Outlook. </li><li>  <b>ID</b>  N√∫mero de mensagem exclusivo.  Pode ser √∫til ao lidar com uma lista grande.  Por exemplo, voc√™ pode acessar uma mensagem com um n√∫mero espec√≠fico (consulte "Navegue at√© o ID ..." no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">menu de contexto</a> ). </li><li>  <b>C√≥digo</b>  C√≥digo da mensagem.  Se voc√™ clicar nele, abrir√° uma p√°gina descrevendo o aviso. </li><li>  <b>CWE.</b>  Permite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">identificar</a> um aviso pelo c√≥digo CWE (Common Weakness Enumeration).  Ao clicar no link, voc√™ pode ver uma descri√ß√£o desse CWE na rede. </li><li>  <b>Misra.</b>  O mesmo que acima, mas para o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">padr√£o MISRA</a> . </li><li>  <b>Mensagem</b>  O texto da mensagem de diagn√≥stico. </li><li>  <b>Projeto</b>  Nome do projeto (voc√™ pode desativar esta coluna usando um menu de contexto). </li><li>  <b>Ficheiro</b>  Nome do arquivo </li><li>  <b>Linha</b>  N√∫mero da linha  <b>Importante!</b>  Observe que algumas linhas terminam com pontos.  Exemplo: "123 (...)".  Ao clicar neste n√∫mero, voc√™ obter√° uma lista de todas as linhas de c√≥digo relacionadas a esta mensagem.  Ao mesmo tempo, voc√™ pode ir para cada uma das linhas da lista. </li></ul><br>  Sim, foi exaustivo ler tudo.  No entanto, garanto que, depois de come√ßar a us√°-lo, voc√™ se acostumar√° rapidamente √† ferramenta.  E voc√™ raramente clica em algo para configurar. <br><br><h3>  Menu de contexto </h3><br>  Portanto, clicando duas vezes na mensagem, voc√™ acessa o trecho de c√≥digo relevante.  Com o clique do bot√£o direito do mouse, o menu de contexto √© aberto. <br><br>  O menu √© bastante simples e n√£o vou desarrumar o artigo com a descri√ß√£o de cada item.  Se algo n√£o estiver claro, voc√™ pode consultar a documenta√ß√£o. <br><br>  No entanto, gostaria de me debru√ßar sobre um recurso muito √∫til.  Voc√™ se lembra que nas configura√ß√µes voc√™ pode adicionar pastas / arquivos a serem exclu√≠dos?  O fato √© que adicionar algo √© muito mais simples do que parece! <br><br>  Preste aten√ß√£o √† op√ß√£o de menu "N√£o verifique arquivos e oculte todas as mensagens de ...".  Ao clicar nele, voc√™ obt√©m uma lista de caminhos que voc√™ pode adicionar √†s exce√ß√µes (veja a figura 6). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce3/581/300/ce35813002196bdbd53fcb666a33f58b.png" alt="Figura 6. Excluindo arquivos da verifica√ß√£o."></div><br>  <font color="#999999"><i>Figura 6. Excluindo arquivos da verifica√ß√£o.</i></font> <br><br>  Voc√™ pode escolher um arquivo separado ou um dos diret√≥rios.  A imagem mostra que a pasta "SDL2-2.0.9 \ src \ haptic \ windows" foi escolhida.  Isso significa que todos os arquivos nesta pasta e todas as subpastas ser√£o exclu√≠dos da an√°lise.  Al√©m disso, todas as mensagens relacionadas a esses arquivos desaparecer√£o da lista imediatamente.  Muito conveniente.  Voc√™ n√£o precisa reiniciar a an√°lise para remover todas as mensagens relacionadas aos testes. <br><br><h2>  Modo de an√°lise incremental </h2><br>  A introdu√ß√£o ao PVS-Studio ser√° incompleta, se ocultarmos um dos recursos mais importantes - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a an√°lise incremental de c√≥digo</a> . <br><br>  Quanto mais cedo um erro for detectado, menos caro ser√° elimin√°-lo.  A melhor op√ß√£o √© destacar erros no texto do programa editado imediatamente.  No entanto, √© tecnicamente dif√≠cil e consome muitos recursos.  √â por isso que o PVS-Studio √© executado no modo de segundo plano quando o c√≥digo fixo √© compilado com sucesso.  Ao fazer isso, voc√™ procura por erros no c√≥digo que acabou de ser alterado.  O √≠cone na √°rea de notifica√ß√£o do sistema indica que a an√°lise est√° em execu√ß√£o. <br><br>  Quando um erro √© encontrado, uma janela pop-up aparece, alertando sobre o perigo (veja a Figura 7). <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/61b/394/8bd/61b3948bd26a9ed4c410446e46b5eb3b.png" alt="Figura 7. Uma mensagem pop-up informando que locais suspeitos foram encontrados nos arquivos editados."></div><br>  <font color="#999999"><i>Figura 7. Uma mensagem pop-up informando que locais suspeitos foram encontrados nos arquivos editados.</i></font> <br><br>  Se voc√™ clicar no √≠cone, abrir√° o IDE com o resultado da verifica√ß√£o do projeto (veja a Figura 2) e poder√° cavar fragmentos de c√≥digo suspeitos. <br><br>  De fato, √© mais f√°cil tentar trabalhar nesse modo do que descrev√™-lo.  Voc√™ escreve o c√≥digo como antes.  Quando necess√°rio, o analisador ir√° incomod√°-lo.  Experimente! <br><br>  Usamos esse modo o tempo todo.  Sim, √†s vezes tamb√©m cometemos erros de codifica√ß√£o.  A capacidade de corrigi-los imediatamente reduz significativamente o tempo para detectar o defeito e tentar entender por que o programa n√£o est√° se comportando como planejado.  √â muito perturbador gastar 15 a 20 minutos depurando para eventualmente encontrar um erro de digita√ß√£o no √≠ndice.  Aqui est√° um dos casos em que o PVS-Studio encontrou um erro no PVS-Studio logo ap√≥s aparecer no c√≥digo: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (in[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-string"><span class="hljs-string">'\\'</span></span> &amp;&amp; in[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'.'</span></span> &amp;&amp; in[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-string"><span class="hljs-string">'\\'</span></span>) { in += <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br>  Bem, o mais interessante ainda est√° por vir.  O analisador PVS-Studio √†s vezes pode ser muito mais √∫til que isso.  Aqui est√° uma das opini√µes sobre o nosso analisador: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A experi√™ncia do usu√°rio de trabalhar com o analisador</a> ".  O texto me faz pensar. <br><br>  Deixe-me resumir.  A an√°lise incremental √© algo que voc√™ definitivamente deveria tentar.  Voc√™ vai adorar assim que encontrar alguns erros no c√≥digo novo. <br><br><h2>  Recursos do PVS-Studio </h2><br>  Sejamos breves.  √â imposs√≠vel descrever sucintamente todos os diagn√≥sticos dispon√≠veis no PVS-Studio.  Uma lista completa de diagn√≥sticos e suas descri√ß√µes detalhadas podem ser encontradas na documenta√ß√£o: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Descri√ß√£o dos bugs detectados</a> .  Vamos resolver a tabela na qual os diagn√≥sticos s√£o agrupados por tipo.  Alguns diagn√≥sticos est√£o em mais de um grupo.  O fato √© que a classifica√ß√£o √© bastante formal.  Por exemplo, um erro de digita√ß√£o pode resultar no uso de mem√≥ria n√£o inicializada.  Alguns dos erros, pelo contr√°rio, n√£o cabiam em nenhum dos grupos, porque eram muito espec√≠ficos.  No entanto, esta tabela fornece informa√ß√µes sobre o funcionamento do analisador de c√≥digo est√°tico. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee5/a44/f24/ee5a44f24dff71c09d5491dc9294b4f2.png" alt="Figura 8. Recursos do PVS-Studio."></div><br>  <font color="#999999"><i>Figura 8. Recursos do PVS-Studio.</i></font> <br><br>  Como voc√™ v√™, o analisador √© especialmente √∫til em √°reas como procurar bugs de copiar e colar.  √â √≥timo na detec√ß√£o de problemas relacionados √† seguran√ßa do c√≥digo. <br><br>  Para ver esses diagn√≥sticos em a√ß√£o, consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">base de erros</a> .  Coletamos todos os erros que encontramos, verificando v√°rios projetos de c√≥digo aberto com o PVS-Studio. <br><br><h2>  SAST </h2><br>  O PVS-Studio √© uma ferramenta est√°tica de teste de seguran√ßa de aplicativos.  O analisador pode detectar poss√≠veis vulnerabilidades no c√≥digo do projeto e mostrar o identificador de erro apropriado em uma determinada classifica√ß√£o. <br><br>  O PVS-Studio suporta as seguintes classifica√ß√µes de erro: <br><br><ol><li>  CWE </li><li>  SEI CERT </li><li>  Misra </li></ol><br>  Voc√™ pode ativar a exibi√ß√£o de c√≥digos CWE no menu de contexto da janela do analisador, no caminho Mostrar colunas&gt; CWE <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/919/85b/e34/91985be349bf7385fa7f3878ef57dcde.png" alt="Figura 9. Menu de contexto e o exemplo de sa√≠da CWE."></div><br>  <font color="#999999"><i>Figura 9. Menu de contexto e o exemplo de sa√≠da CWE.</i></font> <br><br>  Ou no menu principal (Extens√µes&gt; PVS-Studio&gt; Exibir c√≥digos CWE na janela Sa√≠da) <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0b6/582/d8c/0b6582d8c2626066567dfd111439cbc6.png" alt="Figura 10. Menu de extens√£o."></p><br>  <font color="#999999"><i>Figura 10. Menu de extens√£o.</i></font> <br><br>  O diagn√≥stico MISRA √© ativado separadamente nas configura√ß√µes: <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b89/898/709/b89898709db7045f949fb564c6c80059.png" alt="Figura 11. Uma lista de erros detectados."></p><br>  <font color="#999999"><i>Figura 11. Uma lista de erros detectados.</i></font> <br><br>  Voc√™ pode ler mais sobre essas classifica√ß√µes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h2>  Verificando projetos na linha de comando </h2><br>  PVS-Studio_Cmd.exe - um utilit√°rio para verificar projetos C ++ / C # Visual Studio (.vcxproj / .csproj) e .sln na linha de comando.  Pode ser √∫til automatizar a an√°lise.  O programa est√° no diret√≥rio em que a instala√ß√£o foi feita - por padr√£o, √© 'C: \ Arquivos de Programas (x86) \ PVS-Studio'. <br><br>  O programa tem muitos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">par√¢metros</a> , mas primeiro precisamos de apenas tr√™s deles: <br><br><ul><li>  --target: arquivo de projeto ou solu√ß√£o que precisa ser verificado. </li><li>  --output: arquivo plog no qual o relat√≥rio precisa ser gravado. </li><li>  --progress: mostra o progresso de uma verifica√ß√£o. </li></ul><br>  Aqui est√° a apar√™ncia da execu√ß√£o: <br><br><p><img src="https://habrastorage.org/getpro/habr/post_images/3ce/ee2/aa1/3ceee2aa11c0bf9f887ad8959d7cdd65.png" alt="Figura 12. Sa√≠da do programa PVS-Studio_Cmd.exe."></p><br>  <font color="#999999"><i>Figura 12. Sa√≠da do programa PVS-Studio_Cmd.exe.</i></font> <br><br>  Ap√≥s a execu√ß√£o, obteremos um arquivo de plug-in com um relat√≥rio, um caminho especificado nas op√ß√µes de execu√ß√£o.  Voc√™ pode converter este relat√≥rio em outros formatos usando o utilit√°rio PlogConverter.exe.  Para visualizar o relat√≥rio no IDE, clique duas vezes em um arquivo plog no localizador. <br><br>  Tamb√©m √© poss√≠vel abrir o arquivo de relat√≥rio no menu de extens√£o pelo caminho Extens√µes&gt; PVS-Studio&gt; Abrir / Salvar&gt; Abrir relat√≥rio de an√°lise ... <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/490/7ac/cc5/4907accc516b05ccfedf52acc9c85d9f.png" alt="Quadro 4"></div><br><br>  Informa√ß√µes detalhadas sobre o utilit√°rio e seus par√¢metros podem ser encontradas na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> . <br><br><h2>  Supress√£o de falsos positivos </h2><br>  Algumas mensagens emitidas pelo analisador ser√£o inevitavelmente falsas.  N√£o h√° nada que possamos fazer sobre isso.  Um analisador est√°tico √© apenas um programa que n√£o possui intelig√™ncia artificial e n√£o pode identificar se √© um bug real ou n√£o. <br><br>  Para combater os falsos positivos, o analisador fornece um conjunto de mecanismos diferentes.  Eles s√£o detalhados nas seguintes se√ß√µes da documenta√ß√£o: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ajuste fino</a> . </li><li>  Um m√©todo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aproximado</a> que permite trabalhar apenas com avisos relacionados a c√≥digo novo ou modificado. </li></ul><br><h2>  Conclus√£o </h2><br>  Obviamente, n√£o contamos tudo sobre a ferramenta.  Se voc√™ contar tudo, o artigo se transformar√° em documenta√ß√£o.  O objetivo era mostrar como √© f√°cil trabalhar com a ferramenta no ambiente do Visual Studio.  Voc√™ pode ler sobre outros ambientes e modos de trabalho na documenta√ß√£o e outros artigos em nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site</a> .  A prop√≥sito, existem muitas coisas interessantes para os programadores.  Venha e fique por aqui. <br><br>  Vale ressaltar que o PVS-Studio n√£o funciona apenas no ambiente da Microsoft.  Tamb√©m suportamos a linguagem Java, podemos trabalhar no Linux e macOS, integrar no CMake e muito mais.  Voc√™ pode descobrir mais na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> . <br><br>  Desejo a voc√™ um c√≥digo incorreto e espero que voc√™ goste do PVS-Studio.  Se houver alguma d√∫vida, sempre ajudaremos e daremos conselhos.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Escreva para n√≥s</a> . <br><br><h2>  Links adicionais: </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Revis√£o de c√≥digo</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">An√°lise de c√≥digo est√°tico</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ferramentas de an√°lise de c√≥digo est√°tico</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SAST</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tecnologias usadas no analisador PVS-Studio</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fa√ßa o download</a> e experimente o PVS-Studio. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Suporte do Visual Studio 2019</a> . </li><li>  Discuta o pre√ßo do analisador PVS-Studio para sua equipe e como compr√°-lo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">compre o PVS-Studio</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Exemplo de uso de um analisador est√°tico</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Respostas</a> a perguntas freq√ºentemente feitas em confer√™ncias. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como executar o PVS-Studio Java</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como executar o PVS-Studio no Linux e macOS</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt458068/">https://habr.com/ru/post/pt458068/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt458052/index.html">AMA com Habr.10. √öltima * Edi√ß√£o</a></li>
<li><a href="../pt458056/index.html">A grande entrevista com Martin Kleppmann: ‚ÄúDescobrindo o futuro dos sistemas de dados distribu√≠dos‚Äù</a></li>
<li><a href="../pt458060/index.html">Criando um shader de grama no mecanismo Unity</a></li>
<li><a href="../pt458062/index.html">Vis√£o geral da plataforma UserGate</a></li>
<li><a href="../pt458064/index.html">PVS-Studio nas nuvens - Executando a an√°lise no Travis CI</a></li>
<li><a href="../pt458070/index.html">PVS-Studio para Visual Studio</a></li>
<li><a href="../pt458072/index.html">PVS-Studio vai para as nuvens - an√°lise de lan√ßamento no Travis CI</a></li>
<li><a href="../pt458074/index.html">Ir idioma: sele√ß√£o ORM</a></li>
<li><a href="../pt458076/index.html">Marketing com tomada de decis√£o de ML</a></li>
<li><a href="../pt458080/index.html">25 de julho de Moscou - QIWI iOS Meetup</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>