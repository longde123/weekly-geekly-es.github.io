<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï¥üèº üéµ ‚óΩÔ∏è Como fazer amigos Progress OpenEdge e Oracle DBMS üë¶üèª üõ¨ üíπ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Desde 1999, nosso banco utiliza o sistema banc√°rio integrado BISKVIT na plataforma Progress OpenEdge para atender o back office, amplamente utilizado ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como fazer amigos Progress OpenEdge e Oracle DBMS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vtb/blog/445998/">  Desde 1999, nosso banco utiliza o sistema banc√°rio integrado BISKVIT na plataforma Progress OpenEdge para atender o back office, amplamente utilizado em todo o mundo, inclusive no setor financeiro.  O desempenho deste DBMS permite ler at√© um milh√£o ou mais registros por segundo em um banco de dados (DB).  Nosso Progress OpenEdge atende cerca de 1,5 milh√£o de dep√≥sitos de pessoas f√≠sicas e cerca de 22,2 milh√µes de contratos de produtos ativos (empr√©stimos para autom√≥veis e hipotecas) e tamb√©m √© respons√°vel por todos os acordos com o regulador (CB) e SWIFT. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/307/c1d/98d/307c1d98db920948d240ad6101acc1e1.png"><br><br>  Usando o Progress OpenEdge, somos confrontados com o fato de que precisamos fazer amizade com o Oracle DBMS.  Inicialmente, esse pacote foi o "gargalo" da nossa infraestrutura - at√© a instala√ß√£o e configura√ß√£o do Pro2 CDC - um produto Progress que permite enviar dados do Progress DBMS para o Oracle DBMS diretamente, on-line.  Neste post, explicaremos em detalhes, com todas as armadilhas, como efetivamente fazer amizade com o OpenEdge e Oracle. <br><a name="habracut"></a><br>
<h2>  Como foi: upload de dados para o QCD atrav√©s do compartilhamento de arquivos </h2><br>  Primeiro, alguns fatos sobre nossa infraestrutura.  O n√∫mero de usu√°rios ativos do banco de dados √© de aproximadamente 15 mil.  O volume de todos os bancos de dados produtivos, incluindo r√©plica e espera, √© de 600 TB, o maior banco de dados √© de 16,5 TB.  Ao mesmo tempo, os bancos de dados s√£o constantemente reabastecidos: somente no √∫ltimo ano, foram adicionados cerca de 120 TB de dados produtivos.  O sistema fornece 150 servidores front-end na plataforma x86.  Os bancos de dados est√£o hospedados em 21 servidores da plataforma IBM. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a9/f39/b08/1a9f39b085135d52cace5abb4f3f6dce.png"><br>  Os sistemas frontais, v√°rios servi√ßos banc√°rios e de ABS s√£o integrados ao OpenEdge Progress (IBS BISQUIT) por meio do barramento Sonic ESB.  Os dados s√£o carregados no QCD atrav√©s da troca de arquivos.  Essa solu√ß√£o, at√© um determinado momento, imediatamente teve dois grandes problemas - o baixo desempenho do upload de informa√ß√µes para o data warehouse corporativo (QCD) e o tempo necess√°rio para reconciliar os dados (reconcilia√ß√£o) com outros sistemas. <br><img src="https://habrastorage.org/getpro/habr/post_images/5ed/b9b/7dc/5edb9b7dc0c77268d2a3d535f5593d80.png"><br>  Portanto, come√ßamos a procurar uma ferramenta que pudesse acelerar esses processos.  A solu√ß√£o para ambos os problemas foi precisamente o novo produto Progress OpenEdge - Pro2 CDC (Change Data Capture).  Ent√£o, vamos come√ßar. <br><br><h2>  Instalar Progress OpenEdge e Pro2Oracle </h2><br>  Para executar o Pro2 Oracle no computador Windows de um administrador, basta instalar o Progress OpenEdge Developer Kit Classroom Edition, que pode ser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">baixado</a> gratuitamente.  Diret√≥rios de instala√ß√£o padr√£o do OpenEdge: <br><br>  <i>DLC: C: \ Progresso \ OpenEdge</i> <i><br></i>  <i>WRK: C: \ OpenEdge \ WRK</i> <br><br>  Os processos de ETL requerem licen√ßas Progress OpenEdge vers√£o 11.7+ - ou seja, OE DataServer para Oracle e 4GL Development System.  Essas licen√ßas est√£o inclu√≠das no Pro2.  Para opera√ß√£o completa do DataServer for Oracle com um banco de dados Oracle remoto, o Full Oracle Client est√° instalado. <br><br>  No servidor Oracle, voc√™ precisa instalar a vers√£o do Oracle Database 12+, criar um banco de dados vazio e adicionar o usu√°rio (vamos cham√°-lo de <i>cdc</i> ). <br><br>  Para instalar o Pro2Oracle, baixe o pacote de distribui√ß√£o mais recente no centro de download da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Progress Software</a> .  Descompacte o arquivo no diret√≥rio <i>C: \ Pro2</i> (o mesmo kit de distribui√ß√£o √© usado para configurar o Pro2 no Unix e os mesmos princ√≠pios de configura√ß√£o s√£o aplicados). <br><br><h2>  Criando um banco de dados de replica√ß√£o cdc </h2><br>  O banco de dados de replica√ß√£o <i>cdc (repl)</i> √© usado pelo Pro2 para armazenar informa√ß√µes de configura√ß√£o, incluindo o mapa de replica√ß√£o, os nomes dos bancos de dados replicados e suas tabelas.  Ele tamb√©m cont√©m uma fila de replica√ß√£o que consiste em anota√ß√µes sobre o fato de a linha da tabela no banco de dados de origem ter sido alterada.  Os dados da fila de replica√ß√£o s√£o usados ‚Äã‚Äãpelos processos ETL para identificar as linhas que precisam ser copiadas para o Oracle a partir do banco de dados de origem. <br><br>  Crie um banco de dados cdc separado. <br><br><div class="spoiler">  <b class="spoiler_title">Procedimento para criar um banco de dados</b> <div class="spoiler_text"><ol><li>  No servidor de banco de dados, crie um diret√≥rio para o banco de dados cdc - por exemplo, em <i>/ database / cdc /</i> server. <br></li><li>  Crie um manequim para a base do cdc: <i>procopy $ DLC / cdc vazio</i> <br></li><li>  Ativar suporte a arquivos grandes: <i>proutil cdc -C EnableLargeFiles</i> <br></li><li>  Preparamos o script para iniciar o banco de dados cdc.  Os par√¢metros de in√≠cio devem ser semelhantes aos par√¢metros de in√≠cio do banco de dados replicado. <br></li><li>  Iniciamos o banco de dados cdc. <br></li><li>  N√≥s nos conectamos ao banco de dados cdc e carregamos o diagrama Pro2 a partir do arquivo <i>cdc.df</i> , inclu√≠do no pacote Pro2. <br></li><li>  No banco de dados cdc, crie os seguintes usu√°rios: <br></li></ol><br>  <i>pro2adm - para conectar a partir do painel de administra√ß√£o do Pro2;</i> <i><br></i>  <i>pro2etl - para conectar processos ETL (ReplBatch);</i> <i><br></i>  <i>pro2cdc - para conectar processos do CDC (CDCBatch);</i> <br></div></div><br><br><h2>  Ativando o OpenEdge Change Data Capture </h2><br>  Agora, vamos ativar o pr√≥prio mecanismo do CDC, atrav√©s do qual os dados ser√£o replicados para uma √°rea tecnol√≥gica adicional.  Em cada banco de dados de origem Progress OpenEdge, voc√™ precisa adicionar √°reas de armazenamento separadas nas quais os dados de origem ser√£o duplicados e ativar o pr√≥prio mecanismo usando o <i>comando proutil</i> . <br><br><div class="spoiler">  <b class="spoiler_title">Procedimento de exemplo para o banco de dados bisquit</b> <div class="spoiler_text"><ol><li>  Copie o arquivo <i>cdcadd.st do</i> diret√≥rio <i>C: \ Pro2 \ db</i> para o diret√≥rio do banco de dados de origem <i>bisquit</i> . <br></li><li>  Descrevemos em extens√µes de <i>extens√£o</i> fixa <i>cdcadd.st</i> para <i>as</i> <i>√°reas ReplCDCArea</i> e <i>ReplCDCArea_IDX</i> .  Voc√™ pode adicionar novas √°reas de armazenamento on-line: <i>prostrct addonline bisquit cdcadd.st</i> <br></li><li>  Ative o OpenEdge CDC: <br>  <i>proutil bisquit -C enablecdc area "ReplCDCArea" indexarea "ReplCDCArea_IDX"</i> <br></li><li>  Os seguintes usu√°rios devem ser criados no banco de dados de origem para identificar os processos em execu√ß√£o: <br>  <i>a.</i>  <i>pro2adm - para conectar no painel de administra√ß√£o do Pro2.</i> <i><br></i>  <i>b.</i>  <i>pro2etl - para conectar processos ETL (ReplBatch).</i> <i><br></i>  <i>c.</i>  <i>pro2cdc - para conectar processos do CDC (CDCBatch).</i> <br></li></ol><br></div></div><br><br><h2>  Criando um suporte de esquema para o DataServer for Oracle </h2><br>  Em seguida, precisamos criar o titular do esquema do banco de dados no servidor em que os dados do DBMS Progress para o DBMS Oracle ser√£o replicados.  O DataServer Schema Holder √© um banco de dados Progress OpenEdge vazio, sem usu√°rios ou dados do aplicativo, contendo um mapa de correspond√™ncia entre as tabelas de origem e as tabelas externas do Oracle. <br><br>  O banco de dados do Titular do Esquema do Progress OpenEdge DataServer para Oracle para Pro2 deve estar localizado no servidor de processo ETL, criado separadamente para cada filial. <br><br><div class="spoiler">  <b class="spoiler_title">Como criar um titular de esquema</b> <div class="spoiler_text"><ol><li>  Descompacte a distribui√ß√£o do Pro2 no <i>diret√≥rio / pro2</i> <br></li><li>  Crie e acesse o <i>diret√≥rio / pro2 / dbsh</i> <br></li><li>  Crie o banco de dados Titular do Esquema usando o <i>comando procopy $ DLC / empty bisquitsh</i> <br></li><li>  Convertemos <i>bisquitsh</i> na codifica√ß√£o necess√°ria - por exemplo, em UTF-8, se os bancos de dados Oracle estiverem codificados em UTF-8: <i>proutil bisquitsh -C convchar converter UTF-8</i> <br></li><li>  Depois de criar um banco de dados <i>bisquitsh</i> vazio, <i>nos</i> conectamos a ele no modo de usu√°rio √∫nico: <i>pro bisquitsh</i> <br></li><li>  V√° para o Dicion√°rio de dados: <i>Ferramentas -&gt; Dicion√°rio de dados -&gt; DataServer -&gt; Utilit√°rios ORACLE -&gt; Criar esquema do DataServer</i> <br></li><li>  Iniciar titular do esquema <br></li><li>  Configure o Oracle DataServer broker: <br>  <i>a.</i>  <i>Inicie AdminServer.</i> <i><br></i>  <i>proadsv -start</i> <i><br></i>  <i>b.</i>  <i>In√≠cio do Oracle DataServer Broker</i> <i><br></i>  <i>oraman -name orabroker1 -start</i> <br></li></ol><br></div></div><br><br><h2>  Configurar o painel de administra√ß√£o e o esquema de replica√ß√£o </h2><br>  O painel de administra√ß√£o do Pro2 define as configura√ß√µes do Pro2, incluindo a configura√ß√£o do esquema de replica√ß√£o e a gera√ß√£o de programas de processo ETL (Processor Library), programas principais de sincroniza√ß√£o (Bulk-Copy Processor), gatilhos de replica√ß√£o e pol√≠ticas do OpenEdge CDC.  Existem tamb√©m ferramentas principais para monitorar e gerenciar processos ETL e CDC.  Primeiro, configuramos os arquivos de par√¢metros. <br><br><div class="spoiler">  <b class="spoiler_title">Como configurar arquivos de par√¢metros</b> <div class="spoiler_text"><ol><li>  V√° para o diret√≥rio <i>C: \ Pro2 \ bprepl \ Scripts</i> <br></li><li>  Abra o arquivo <i>replProc.pf</i> para edi√ß√£o <br></li><li>  Adicione os par√¢metros para conectar-se ao banco de dados de replica√ß√£o cdc: <br>  <i># Banco de dados de replica√ß√£o</i> <i><br></i>  <i>-db cdc -ld repl -H &lt;nome do host do banco de dados principal&gt; -S &lt;porta do broker do banco de dados cdc&gt;</i> <i><br></i>  <i>-U pro2admin -P &lt;senha&gt;</i> <br></li><li>  Adicione os par√¢metros para conectar-se aos bancos de dados de origem e ao Schema Holder na forma de arquivos de par√¢metros para <i>replProc.pf</i> .  O nome do arquivo de par√¢metro deve corresponder ao nome do banco de dados de origem a ser conectado. <br>  <i># Conecte-se a todos os BISQUIT de origem replicada</i> <i><br></i>  <i>-pf bprepl \ scripts \ bisquit.pf</i> <br></li><li>  Adicione os par√¢metros para conectar-se ao titular do esquema no replProc.pf. <br>  <i>Titular do esquema do #Darget Pro DB</i> <i><br></i>  <i>-db bisquitsh -ld bisquitsh</i> <i><br></i>  <i>-H &lt;nome do host dos processos ETL&gt;</i> <i><br></i>  <i>-S &lt;porta do broker biskuitsh&gt;</i> <i><br></i>  <i>-db bisquitsql</i> <i><br></i>  <i>-ld bisquitsql</i> <i><br></i>  <i>-dt ORACLE</i> <i><br></i>  <i>-S 5162 -H &lt;nome do host do broker Oracle&gt;</i> <i><br></i>  <i>-DataService orabroker1</i> <br></li><li>  Salve o <i>arquivo de</i> par√¢metro <i>replProc.pf</i> <br></li><li>  Em seguida, √© necess√°rio criar e abrir para editar os arquivos de par√¢metros para cada banco de dados de origem conectado no <i>diret√≥rio C: \ Pro2 \ bprepl \ Scripts: bisquit.pf</i> .  Cada arquivo pf cont√©m par√¢metros para conectar-se ao banco de dados correspondente, por exemplo: <br>  <i>-db bisquit -ld bisquit -H &lt;nome do host&gt; -S &lt;porta do broker&gt;</i> <i><br></i>  <i>-U pro2admin -P &lt;senha&gt;</i> <br></li></ol><br></div></div><br><br>  Para configurar os atalhos do Windows, v√° para o <i>diret√≥rio C: \ Pro2 \ bprepl \ Scripts</i> e edite o atalho ‚ÄúPro2 - Administra√ß√£o‚Äù.  Para fazer isso, abra as propriedades do atalho e, na linha <i>Iniciar,</i> indique o diret√≥rio de instala√ß√£o Pro2.  Uma opera√ß√£o semelhante precisa ser feita para os r√≥tulos ‚ÄúPro2 - Editor‚Äù e ‚ÄúRunBulkLoader‚Äù. <br><br><h2>  Configurando a administra√ß√£o do Pro2: baixando a configura√ß√£o principal </h2><br>  Lan√ßamos o console. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b82/639/717/b82639717e154bdb889038e56ca41d90.png"><br><br>  V√° para o "DB Map". <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8ec/623/ae9/8ec623ae9f617ae630a42fa1d1b599c6.png"><br><br>  Para vincular os bancos de dados no Pro2 - Administration, v√° para a guia <i>DB Map</i> .  Adicionamos o mapeamento de bancos de dados de origem - <i>Schema Holder - Oracle</i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d23/db6/d6c/d23db6d6c53ea7e7d47aa2b6a71b2cde.png"><br><br>  V√° para a guia <i>Mapeamento</i> .  Na lista <i>Banco de Dados de Origem</i> , o primeiro banco de dados de origem conectado √© selecionado por padr√£o.  √Ä direita da lista deve estar <i>Todos os bancos de dados conectados</i> - os bancos de dados selecionados est√£o conectados.  Uma lista de tabelas Progress do bisquit deve estar vis√≠vel abaixo, √† esquerda.  √Ä direita, h√° uma lista de tabelas do banco de dados Oracle. <br><br><h2>  Criando esquemas e bancos de dados SQL no Oracle </h2><br>  Para criar um mapa de replica√ß√£o, voc√™ deve primeiro gerar o <i>esquema SQL</i> no Oracle.  Na Administra√ß√£o do Pro2, execute o item de menu <i>Ferramentas -&gt; Gerar c√≥digo -&gt; Esquema de destino e</i> , na caixa de di√°logo <i>Selecionar banco de</i> dados, <i>selecione</i> um ou mais bancos de dados de origem e transfira-os para a direita. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a15/d6b/ca5/a15d6bca502084aea7c24faace6494f3.png"><br><br>  Clique em OK e selecione o diret√≥rio para salvar os esquemas SQL. <br><br>  Em seguida, criamos a base.  Isso pode ser feito, por exemplo, atrav√©s do <i>Oracle SQL Developer</i> .  Para fazer isso, conecte-se ao banco de dados Oracle e carregue o esquema para adicionar tabelas.  Ap√≥s alterar a composi√ß√£o das tabelas Oracle, √© necess√°rio atualizar os esquemas SQL no Titular do Esquema. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a21/86f/d8d/a2186fd8d269e13120ce1ff2c87467d3.png"><br><br>  Ap√≥s o download ser conclu√≠do com √™xito, saia do banco de dados bisquitsh e abra o painel de administra√ß√£o do Pro2.  As tabelas do banco de dados Oracle devem aparecer na guia Mapeamento √† direita. <br><br><h2>  Tabelas de mapeamento </h2><br>  Para criar um mapa de replica√ß√£o no painel de administra√ß√£o do Pro2, v√° para a guia Mapeamento, selecione o banco de dados de origem.  Clicamos em Mapear tabelas, selecionamos √† esquerda as tabelas Selecionar altera√ß√µes que devem ser replicadas para Oracle, transferimos para a direita e confirmamos a sele√ß√£o.  Um mapa ser√° criado automaticamente para as tabelas selecionadas.  Repita a opera√ß√£o para criar um mapa de replica√ß√£o para outros bancos de dados de origem. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/455/9f9/1fe/4559f91fe85a7e724bf015f13873cbc3.png"><br><br><h2>  Gera√ß√£o dos programas da biblioteca do processador de replica√ß√£o Pro2 e do processador de c√≥pia em massa </h2><br><br>  A Biblioteca do processador foi projetada para ETLs (processos especiais de replica√ß√£o) que processam a fila de replica√ß√£o Pro2 e enviam as altera√ß√µes para o banco de dados Oracle.  Ap√≥s a gera√ß√£o, os programas da biblioteca do processador de replica√ß√£o s√£o salvos automaticamente no <i>diret√≥rio bprepl / repl_proc (par√¢metro PROC_DIRECTORY)</i> .  Para gerar a biblioteca do processador de replica√ß√£o, acesse <i>Ferramentas -&gt; Gerar c√≥digo -&gt; Biblioteca do processador.</i>  Ap√≥s a conclus√£o da gera√ß√£o, os programas aparecer√£o no <i>diret√≥rio bprepl / repl_proc</i> . <br><br>  Os programas de processador em massa s√£o usados ‚Äã‚Äãpara sincronizar os bancos de dados Progress de origem com o banco de dados Oracle de destino com base na linguagem de programa√ß√£o Progress ABL (4GL).  Para ger√°-los, v√° para o item de menu <i>Ferramentas -&gt; Gerar c√≥digo -&gt; Processador de c√≥pia em massa</i> .  Na caixa de di√°logo Selecionar banco de dados, selecione o banco de dados de origem, transfira-o para o lado direito da janela e clique em <i>OK</i> .  Ap√≥s a conclus√£o da gera√ß√£o, os programas aparecer√£o no <i>diret√≥rio bprepl \ repl_mproc</i> . <br><br><h2>  Configurando processos de replica√ß√£o no Pro2 </h2><br>  Dividir as tabelas em conjuntos atendidos por um thread de replica√ß√£o separado pode melhorar o desempenho e a efici√™ncia do Oracle Pro2.  Por padr√£o, todas as conex√µes criadas no mapa de replica√ß√£o para novas tabelas de replica√ß√£o s√£o vinculadas ao fluxo n√∫mero 1. √â recomend√°vel que as tabelas sejam divididas em fluxos diferentes. <br><br>  As informa√ß√µes sobre o status dos fluxos de replica√ß√£o s√£o exibidas na tela Administra√ß√£o do Pro2 na guia Monitor na se√ß√£o Status da replica√ß√£o.  Uma descri√ß√£o detalhada dos valores dos par√¢metros pode ser encontrada na documenta√ß√£o do Pro2 (diret√≥rio C: \ Pro2 \ Docs). <br><br><h2>  Criar e ativar pol√≠ticas do CDC </h2><br>  Pol√≠ticas s√£o um conjunto de regras para o mecanismo OpenEdge CDC, de acordo com o qual as altera√ß√µes nas tabelas s√£o rastreadas.  No momento da reda√ß√£o deste artigo, o Pro2 suporta apenas pol√≠ticas CDC com n√≠vel 0, ou seja, apenas o fato de <i>uma altera√ß√£o de registro</i> √© rastreado. <br><br>  Para criar uma pol√≠tica do CDC no painel administrativo, v√° para a guia Mapeamento, selecione o banco de dados de origem e clique no bot√£o Adicionar / Remover Pol√≠ticas.  Na janela Selecionar Altera√ß√µes que se abre, selecione no lado esquerdo e transfira para a tabela direita para a qual voc√™ precisa criar ou excluir uma pol√≠tica do CDC. <br><br>  Para ativar, abra a guia Mapeamento novamente, selecione o banco de dados de origem e clique no bot√£o <i>(In) Ativar Pol√≠ticas</i> .  Selecione e transfira para o lado direito da tabela cujas pol√≠ticas voc√™ precisa ativar, clique em OK.  Depois disso, eles s√£o marcados em verde.  Usando <i>(In) Ativar Pol√≠ticas</i> , voc√™ tamb√©m pode desativar as pol√≠ticas do CDC.  Todas as opera√ß√µes s√£o realizadas online. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/518/0ef/770/5180ef7709ef906a1541bb7e71b8b5ba.png"><br><br>  Ap√≥s ativar a pol√≠tica do CDC, as notas sobre os registros alterados s√£o salvas na √°rea de armazenamento <i>‚ÄúReplCDCArea‚Äù</i> , de acordo com o banco de dados original.  Essas notas ser√£o processadas por um processo especial do <i>CDCBatch</i> , que, com base nas mesmas, criar√° notas na fila de replica√ß√£o do Pro2 no banco de dados <i>cdc (repl)</i> . <br><br>  Portanto, temos duas filas para replica√ß√£o.  O primeiro est√°gio √© o CDCBatch: do banco de dados original, os dados v√£o primeiro para o banco de dados intermedi√°rio do CDC.  O segundo est√°gio √© quando os dados s√£o derramados do banco de dados do CDC no Oracle.  Esse √© um recurso da arquitetura atual e do pr√≥prio produto - at√© o momento, os desenvolvedores n√£o conseguiram estabelecer a replica√ß√£o direta. <br><br><h2>  Sincroniza√ß√£o prim√°ria </h2><br>  Depois de ativar o mecanismo CDC e configurar o servidor de replica√ß√£o Pro2, precisamos iniciar a sincroniza√ß√£o principal.  Comando de in√≠cio da sincroniza√ß√£o prim√°ria: <br><br>  <i>/pro2/bprepl/Script/replLoad.sh bisquit nome-da-tabela</i> <br><br>  Ap√≥s a conclus√£o da sincroniza√ß√£o inicial, os processos de replica√ß√£o podem ser iniciados. <br><br><h2>  Iniciar processos de replica√ß√£o </h2><br>  Para iniciar os processos de replica√ß√£o, voc√™ precisa executar o script <i>replbatch.sh</i> .  Antes de iniciar, verifique se h√° scripts replbatch para todos os threads - replbatch1, replbatch2, etc.  Se tudo estiver no lugar, abra a linha de comandos (por exemplo, <i>proenv)</i> , acesse o <i>diret√≥rio / bprepl / scripts</i> e inicie o script.  No painel administrativo, verificamos que o processo correspondente recebeu o status EXECUTANDO. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f7f/e36/d10/f7fe36d10541f356f26d18f220a241cc.png"><br><br><h2>  Resultados </h2><br><img src="https://habrastorage.org/webt/96/tx/ic/96txicmq_eawginnc244qddkqww.png"><br>  Ap√≥s a implementa√ß√£o, aceleramos bastante o upload de informa√ß√µes para o data warehouse corporativo.  Os dados em si v√£o para o Oracle online.  N√£o √© necess√°rio gastar tempo em algumas consultas de longa dura√ß√£o para coletar dados de diferentes sistemas.  Al√©m disso, nesta solu√ß√£o, o processo de replica√ß√£o pode compactar dados, o que tamb√©m tem um efeito positivo na velocidade.  Agora, a reconcilia√ß√£o di√°ria do sistema BISKVIT com outros sistemas come√ßou a levar de 15 a 20 minutos, em vez de 2 a 2,5 horas, e a reconcilia√ß√£o total - v√°rias horas, em vez de dois dias. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt445998/">https://habr.com/ru/post/pt445998/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt445980/index.html">Programamos o controle de voz de um helic√≥ptero usando Node.js e ARDrone</a></li>
<li><a href="../pt445984/index.html">Tempestade de carteiristas Pacsafe</a></li>
<li><a href="../pt445986/index.html">Desenvolvimento do cliente como filosofia de vida</a></li>
<li><a href="../pt445988/index.html">Correio pr√≥prio tempor√°rio: telegram bot</a></li>
<li><a href="../pt445992/index.html">Nauchpop no m√≠nimo: ilus√µes de √≥tica</a></li>
<li><a href="../pt446000/index.html">O que h√° de errado com o Yandex.Music? An√°lise de UX / UI</a></li>
<li><a href="../pt446006/index.html">Intel - som novo</a></li>
<li><a href="../pt446008/index.html">Ferramenta de c√≥digo aberto para valida√ß√£o da qualidade da pesquisa baseada em inten√ß√µes</a></li>
<li><a href="../pt446022/index.html">Como eu N√ÉO fiz a varredura na Internet da Bielorr√∫ssia</a></li>
<li><a href="../pt446024/index.html">Instale e configure um n√≥ Ripple</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>