<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚄 ✊🏽 👂🏿 Einrichten des automatischen Testens einer Hybridanwendung 🧕🏾 💍 👰🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel möchte ich meine Erfahrungen bei der Lösung des Problems des automatisierten Testens einer mobilen Anwendung auf Android teilen. 

 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Einrichten des automatischen Testens einer Hybridanwendung</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452742/">  In diesem Artikel möchte ich meine Erfahrungen bei der Lösung des Problems des automatisierten Testens einer mobilen Anwendung auf Android teilen. <br><br><h2>  Was ich erzählen werde: </h2><br><ul><li>  Ausführen einer automatisierten Testumgebung mit Appium <br>  (PC-Betriebssystem - Windows 10) </li><li>  So vermeiden Sie Fehler, die beim Ausführen von Tests in einer Hybridanwendung auftreten </li><li>  Einige grundlegende Befehle zum Ausführen der einfachsten Tests.  Wir werden Java und JavaScript verwenden </li></ul><a name="habracut"></a><br><h2>  Herausforderung </h2><br>  Automatisieren Sie das Testen hybrider mobiler Apps. <br><br>  Über die zu testende Anwendung: <br><div class="scrollable-table"><table><tbody><tr><td>  Plattform </td><td>  Android </td></tr><tr><td>  Framework </td><td>  Angular, Cordova, Ionic </td></tr><tr><td>  Browser </td><td>  Zebrastreifen </td></tr></tbody></table></div><br>  Vielleicht sind dies die wichtigsten Punkte, die die Konfiguration des PCs für die Ausführung der Tests beeinflusst haben. <br><br><h2>  Testumgebung </h2><br>  Wir werden Appium als automatisiertes Testwerkzeug verwenden. <br>  Kurz gesagt, dies ist ein Tool, mit dem Sie über den Server Befehle an den Client senden können, was zu tun ist und warum. <br><br>  Ausführliche Informationen finden Sie auf der Website des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entwicklers</a> . <br><br>  Fangen wir an. <br><br>  Erstellen Sie an einem für Sie geeigneten Ort auf der Festplatte den Ordner „Appium Automation“. <br><br>  Zum Beispiel: <br><br><pre><code class="plaintext hljs">C:\Appium automation</code> </pre> <br>  Erstellen Sie in diesem Ordner (C: \ Appium Automation) einige weitere Ordner: <br><div class="scrollable-table"><table><tbody><tr><td>  Android SDK </td><td>  C: \ Appium-Automatisierung \ Android SDK </td></tr><tr><td>  Android Studio </td><td>  C: \ Appium-Automatisierung \ Android Studio </td></tr><tr><td>  APK </td><td>  C: \ Appium Automation \ APK </td></tr><tr><td>  Appium lib </td><td>  C: \ Appium-Automatisierung \ Appium Lib </td></tr><tr><td>  Selenium lib </td><td>  C: \ Appium Automation \ Selenium Lib </td></tr></tbody></table></div><br>  Wenn eine der von Ihnen installierten Anwendungen / Komponenten den Anweisungen folgt, verstehen Sie nur die Logik der Beziehung, d. H.  Es ist nicht erforderlich, alles neu zu installieren. <br><br><h2>  Füllen Sie erstellte Ordner und laden Sie andere Komponenten </h2><br><h3>  1. Java SDK </h3><br>  Folgen Sie dem Link und klicken Sie auf Download: <br><br><img src="https://habrastorage.org/webt/tk/v8/5e/tkv85eeozm-zxppbrbnhfnylnsu.png"><br><br>  Als nächstes gelangen wir zur Download-Seite für verschiedene Betriebssysteme, wie  Ich habe Windows 10 x64, wählen Sie: <br><br><img src="https://habrastorage.org/webt/-c/az/xt/-cazxtubqocc54mw-t4mw6unzyc.png"><br><br>  Öffnen Sie die Datei nach dem Herunterladen und entpacken Sie die EXE-Shnik (wählen Sie den Pfad während der Installation aus) in den Ordner: <br><br><pre> <code class="plaintext hljs">C:\Program Files\Java\jdk-12.0.1</code> </pre> <br>  <i>(Versionsnummer zum Zeitpunkt des Downloads kann variieren)</i> <br><br><h3>  2. Android Studio und Android SDK </h3><br>  Zum Herunterladen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">folgen Sie dem Link</a> . <br><br>  Im Ordner installieren: <br><br><pre> <code class="plaintext hljs">C:\Appium automation\Android Studio</code> </pre> <br>  Beim ersten Start von Android Studio müssen Sie <b>das Programm konfigurieren</b> : <br><br><ul><li>  Instantyp Wählen Sie Benutzerdefiniert und klicken Sie auf Weiter </li><li>  Wählen Sie ein Thema aus, das Ihnen gefällt, und klicken Sie auf Weiter </li><li>  Android SDK-Speicherort Geben Sie C: \ Appium Automation \ Android SDK an und klicken Sie auf Weiter </li><li>  Die Emulatoreinstellungen können auf Empfohlen belassen werden. Klicken Sie auf Weiter </li><li>  Klicken Sie auf Fertig stellen und warten Sie, bis der Installationsvorgang abgeschlossen ist. </li></ul><br>  <b>Erstellen Sie ein neues Projekt in Android Studio:</b> <br><br><ul><li>  Klicken Sie auf Neues Android Studio-Projekt starten </li><li>  Geben Sie den Namen, den Pfad zu Ihrem Projekt an, oder Sie können nichts ändern und den vorgeschlagenen verlassen. Klicken Sie auf Weiter </li><li>  Wählen Sie in der Dropdown-Liste Telefon und Tablet die Option „API 23: Android 6.0 (Marshmallow)“ aus und klicken Sie auf Weiter </li><li>  Wählen Sie Leere Aktivität und klicken Sie auf Weiter </li><li>  Klicken Sie auf Weiter </li><li>  Klicken Sie auf Fertig stellen </li></ul><br>  <b>Installieren Sie die SDK-Tools</b> <br><br>  Wählen Sie in Android Studio Extras - SDK-Manager. <br><br>  Im angezeigten Fenster wird der Abschnitt Android SDK ausgewählt. <br><br><img src="https://habrastorage.org/webt/os/_0/_v/os_0_vspi8pv4zxy7nd467jidns.png"><br><br>  Wählen Sie auf der Registerkarte SDK-Plattformen die Version von Android aus, auf der Sie Tests durchführen möchten. <br>  Wählen Sie in den SDK-Tools die folgenden Elemente aus: <br><br><ul><li>  Android SDK Build-Tools </li><li>  Android Emulator </li><li>  Android SDK Plattform-Tools </li><li>  Android SDK-Tools </li><li>  Dokumentation für Android SDK </li><li>  Support-Repository </li></ul><br>  Klicken Sie auf Übernehmen oder OK und warten Sie, bis der Download und die Installation der Komponenten abgeschlossen sind. <br><br><img src="https://habrastorage.org/webt/or/yn/3m/oryn3mpv3hztnxhcbyswrii5lwo.png"><br><br><h3>  3. Erstellen Sie PATH-Variablen </h3><br>  Klicken Sie mit der rechten Maustaste auf "Arbeitsplatz" - "Eigenschaften" - "Erweiterte Systemeinstellungen". <br>  Wählen Sie im folgenden Fenster auf der Registerkarte "Erweitert" die Option "Umgebungsvariablen ...". <br><br>  Erstellen Sie im Block „Systemvariablen“ eine neue Variable. <br><br><img src="https://habrastorage.org/webt/w3/6j/qa/w36jqawmywp25jzuakdqjcxm7ew.png"><br><br><img src="https://habrastorage.org/webt/wa/-1/ln/wa-1lnnhoeq31tu9y5yijlaomfu.png"><br><br>  <b>Erste Variable</b> <br><br>  Variablenname - JAVA_HOME <br><br>  Der Wert der Variablen ist <br><br><pre> <code class="plaintext hljs">C:\Program Files\Java\jdk-12.0.1</code> </pre> <br>  (Der Pfad, unter dem Sie jdk in Schritt 1 installiert haben. In einigen Fällen kann es sein, dass der Ordner "Programme" als "Programme" (x86) bezeichnet wird.) <br><br>  <b>Zweite Variable</b> <br><br>  Variablenname - ANDROID_HOME <br><br>  Der Wert der Variablen ist <br><br><pre> <code class="plaintext hljs">C:\Appium automation\Android SDK</code> </pre> <br>  <b>Hinzufügen von Pfadvariablen</b> <br><br>  Suchen Sie die Pfadvariable in der Liste der Systemvariablen und klicken Sie auf "Ändern ...". <br><br>  Klicken Sie im angezeigten Fenster auf "Erstellen" und fügen Sie die Variablen hinzu: <br><br><ul><li>  % ANDROID_HOME% \ emulator </li><li>  % ANDROID_HOME% \ Plattform-Tools </li><li>  % ANDROID_HOME% \ tools </li><li>  % ANDROID_HOME% \ tools \ bin </li></ul><br>  Als Ergebnis sollten Sie 4 neue Variablen erhalten, nach denen Sie auf OK klicken müssen. <br><br><img src="https://habrastorage.org/webt/c6/x6/vi/c6x6viqmdb0fqbhurecbqknjyiy.png"><br><br><h3>  4. Appium </h3><br>  <b>Appium herunterladen:</b> <br><br><ul><li>  Wir folgen dem Link <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://appium.io/</a> </li><li>  Klicken Sie auf Download </li><li>  Wir wählen Appium-windows-1.13.0.exe (die Versionsnummer zum Zeitpunkt des Ladens kann variieren) </li></ul><br><img src="https://habrastorage.org/webt/hu/sm/yx/husmyxk1fvejkd7y4y8jaxdbvym.png"><br><br>  Führen Sie die heruntergeladene EXE-Datei aus und installieren Sie Appium auf Ihrem PC.  Während des Installationsvorgangs müssen Sie nur die Installation global oder für einen bestimmten Benutzer auswählen.  Ich habe seitdem global installiert  es ist mir egal <br><br>  <b>Herunterladen der Appium-Bibliotheken:</b> <br><br><ul><li>  Wir folgen dem Link <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://appium.io/downloads.html</a> </li><li>  Wählen Sie eine Sprache, in meinem Fall Java </li><li>  Klicken Sie auf das Download-Symbol </li></ul><br><img src="https://habrastorage.org/webt/le/zv/el/lezvel7fmjx-eca19mywvtcxeos.png"><br><br>  Verschieben Sie die heruntergeladene JAR-Datei in den Ordner <br><br><pre> <code class="plaintext hljs">C:\Appium automation\Appium Lib</code> </pre> <br><ul><li>  Wir folgen dem Link <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://mvnrepository.com/artifact/junit/junit</a> </li><li>  Wir wählen die neueste stabile Version (ich habe es 4.12) </li><li>  Klicken Sie hier, um die JAR-Datei zu laden </li></ul><br><img src="https://habrastorage.org/webt/vt/2w/l3/vt2wl3f8wgkrwqkttolyc_wxad0.png"><br><br>  Verschieben Sie die heruntergeladene JAR-Datei in den Ordner: <br><br><pre> <code class="plaintext hljs">C:\Appium automation\Appium Lib</code> </pre> <br><br><ul><li>  Wir folgen dem Link <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://mvnrepository.com/artifact/org.hamcrest/hamcrest-core</a> </li><li>  Wählen Sie die neueste stabile Version (ich verwende 1.3) </li><li>  Klicken Sie hier, um die JAR-Datei zu laden </li></ul><br><img src="https://habrastorage.org/webt/pm/rj/yl/pmrjylunp15yv4i9k2dbrt5qlli.png"><br><br>  Verschieben Sie die heruntergeladene JAR-Datei in den Ordner: <br><br><pre> <code class="plaintext hljs">C:\Appium automation\Appium Lib</code> </pre> <br>  <b>Laden Sie die Selenium-Bibliotheken herunter:</b> <br><br><ul><li>  Wir folgen dem Link <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.seleniumhq.org/download</a> </li><li>  Wählen Sie eine Sprache, in meinem Fall Java </li><li>  Klicken Sie auf Download </li></ul><br><img src="https://habrastorage.org/webt/qe/vh/im/qevhimwudtjl4xuefskik1yffva.png"><br><br>  Entpacken Sie das heruntergeladene Archiv in den Ordner: <br><br><pre> <code class="plaintext hljs">C:\Appium automation\Selenium Lib</code> </pre> <br><h2>  5. IntelliJ IDEA Community Edition </h2><br>  Zum Herunterladen gehen Sie zum Link <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.jetbrains.com/idea/download</a> <br>  Klicken Sie in der Nähe der Community-Version auf Download (dies ist eine kostenlose Version, die jedoch für automatische Tests ausreicht). <br><br>  Die Download-Seite bietet einen Vergleich der Community- und Ultimate-Versionen. <br><br>  Wenn Sie die Ultimate-Version kaufen möchten, können Sie dies sicher tun!  Aber auch hier wird die Community-Version ausreichen. <br><br>  Führen Sie die heruntergeladene EXE-Datei aus und installieren Sie sie (klicken Sie einfach auf Weiter, bis das Programm mit der Installation beginnt). <br><br>  <b>Erster Start von IntelliJ IDEA</b> <br><br><ul><li>  Wählen Sie "Einstellungen nicht importieren". </li><li>  Wir akzeptieren die Lizenzvereinbarung </li><li>  Wählen Sie ein Thema </li><li>  Klicken Sie auf Weiter </li><li>  Klicken Sie auf Mit IntelliJ IDEA starten </li></ul><br>  <b>Erstellen eines Projekts in IntelliJ IDEA</b> <br><br><ul><li>  Wählen Sie Neues Projekt erstellen </li><li>  Geben Sie den Pfad zum Java SDK an <br><ul><li>  Klicken Sie auf Neu ... </li><li>  Geben Sie den Pfad zum zuvor geladenen Java SDK C: \ Programme \ Java \ jdk-12.0.1 an </li></ul></li><li>  Klicken Sie auf Weiter </li><li>  Aktivieren Sie das Kontrollkästchen "Projekt aus Vorlage erstellen". </li><li>  Klicken Sie auf Weiter </li><li>  Geben Sie den Projektnamen und den Speicherort an, der gespeichert werden soll </li><li>  Klicken Sie auf Fertig stellen </li></ul><br>  <b>Einstellungen für das erstellte Projekt</b> <br><br>  Wählen Sie Datei - Projektstruktur ... <br><br>  Wählen Sie im angezeigten Fenster Module - Abhängigkeiten - "+" - JARs oder Verzeichnisse ... <br><br><img src="https://habrastorage.org/webt/9x/j2/om/9xj2om_3_7ffkxapkghxa-nnm_8.png"><br><br>  Und wir fügen dem Projekt alle zuvor geladenen Bibliotheken hinzu. <br><br><img src="https://habrastorage.org/webt/w7/ky/1f/w7ky1fqtizkqqxnbkjvc8lqmap8.png"><br><br>  Klicken Sie auf OK. <br><br>  Jetzt kann das Projekt Tests ausführen. <br><br><h3>  6. Einrichtung des Android-Geräts </h3><br>  <b>Echtes Gerät</b> <br>  Sie benötigen ein USB-Kabel, um das Gerät an den Computer und das Smartphone selbst anzuschließen. <br><br>  Gehen Sie zunächst auf dem Smartphone zu „Einstellungen“ - „Über das Telefon“. <br><br>  Auf verschiedenen Smartphones ist alles anders, aber unter dem Strich müssen Sie die „Seriennummer“ suchen und 5-7 Mal darauf klicken, bis der Toaster mit der Meldung „Sie sind jetzt Entwickler“ angezeigt wird (der Text der Benachrichtigung kann von Modell zu Modell unterschiedlich sein). <br><br>  Nach dieser Manipulation wird in den Einstellungen Ihres Telefons der Abschnitt "Für Entwickler" angezeigt.  Es kann sich auch in verschiedenen Abschnitten von Modell zu Modell verstecken, z. B. irgendwo unter "Einstellungen" - "Für Entwickler" und irgendwo unter "Einstellungen" - "Sonderfunktionen" - "Für Entwickler" usw. . <br><br>  Sie müssen zum Abschnitt "Für Entwickler" gehen und "USB-Debugging" aktivieren. <br><br>  Wenn Sie Ihr Smartphone über USB anschließen, wird eine Meldung über die USB-Debugging-Berechtigung angezeigt. Sie können "Diesem Gerät vertrauen" aktivieren und auf "OK" klicken. Diese Meldung wird beim nächsten Anschließen des Telefons an diesen PC nicht mehr angezeigt. <br>  Ihr gesamtes Smartphone ist bereit, in automatischen Tests zu arbeiten. <br><br>  <b>Virtuelles Gerät</b> <br><br>  Sie können ein virtuelles Gerät auch über Android Studio erstellen. Dann müssen Sie das reale Gerät nicht mit dem Computer verbinden. <br><br>  Auf einem virtuellen Gerät können Tests jedoch langsamer ablaufen als auf einem realen. <br><br>  Um es zu erstellen, öffnen Sie Android Studio und dann: <br><br><ul><li>  "Tools" - "AVD Manager" - "+ Virtuelles Gerät erstellen ..." </li><li>  Wählen Sie ein Gerät aus und klicken Sie auf Weiter </li><li>  Wählen Sie die gewünschte Version von Android und klicken Sie auf Weiter </li><li>  Geben Sie den Gerätenamen an und klicken Sie auf Fertig stellen </li></ul><br>  Nach den vorgenommenen Manipulationen im Abschnitt „Extras“ - „AVD Manager“ sehen Sie das erstellte Gerät.  Mit dem grünen Symbol „Wiedergabe“ können Sie das Gerät starten. <br><br>  <b>Wie kann ich überprüfen, ob Ihr PC das angeschlossene Gerät gesehen hat?</b> <br><br>  Führen Sie die Befehlszeile aus ("Start" - "Dienstprogramme - Windows" - "Eingabeaufforderung") <br>  Geben Sie den Befehl adb Geräte ein. <br><br>  Wenn das Gerät mit aktivierter USB-Debugging-Funktion verbunden ist, erhalten Sie das angeschlossene Gerät und seine UDID (Seriennummer): <br><br><pre> <code class="plaintext hljs">List of devices attached UDID device</code> </pre><br><h3>  7. Wir schreiben ein Projekt </h3><br>  <b>Import hinzufügen.</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> name; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.android.AndroidDriver; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.android.AndroidElement; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.remote.MobileCapabilityType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.remote.DesiredCapabilities; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.JavascriptExecutor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.MalformedURLException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.URL; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.TimeUnit;</code> </pre><br>  <b>Wir registrieren den Server und wo er Anfragen senden muss</b> <br><br>  Installieren Sie den Android-Treiber: <br><br><pre> <code class="java hljs">AndroidDriver&lt;AndroidElement&gt; driver = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>;</code> </pre> <br>  Wir setzen die Parameter (Eigenschaften): <br><br><pre> <code class="java hljs">DesiredCapabilities capabilities = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities();</code> </pre> <br>  Der Name des Geräts (Sie finden ihn für das reale Gerät unter "Einstellungen" - "Über das Telefon" und für die virtuellen "Tools" - "AVD Manager" - das Feld "Name"): <br><br><pre> <code class="java hljs">capabilities.setCapability(MobileCapabilityType.DEVICE_NAME, <span class="hljs-string"><span class="hljs-string">"MyPhone"</span></span>);</code> </pre> <br>  Link zu der APK, die gestartet werden muss (.apk muss ein Debug-Build sein, damit Sie und Appium Anwendungen überprüfen können): <br><br><pre> <code class="java hljs">capabilities.setCapability(MobileCapabilityType.APP, <span class="hljs-string"><span class="hljs-string">"C:\\Appium automation\\APK\\My-debug-Apk.apk"</span></span>);</code> </pre> <br>  Starten Sie den Appium-Treiber: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AndroidDriver&lt;&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:4723/wd/hub"</span></span>), capabilities); driver.manage().timeouts().implicitlyWait(<span class="hljs-number"><span class="hljs-number">10</span></span>, TimeUnit.SECONDS); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (MalformedURLException e) { System.out.println(e.getMessage()); }</code> </pre><br>  Dieser Code reicht aus, um Ihre Anwendung auf dem angeschlossenen Gerät zu starten. <br><br>  <b>Zusätzliche Teams</b> <br><br>  Um das Projekt für eine bestimmte Zeit anzuhalten, zum Beispiel 8 Sekunden.  (Wert wird in Millisekunden angegeben).  Dies kann erforderlich sein, wenn Sie auf das Laden der Seite oder Anwendung warten müssen: <br><br><pre> <code class="java hljs">Thread.sleep(<span class="hljs-number"><span class="hljs-number">8000</span></span>);</code> </pre> <br>  Wir erhalten ContextHandles, in denen wir verstehen, womit wir gerade arbeiten (NATIVE_APP oder WEBVIEW): <br><br><pre> <code class="java hljs">Set&lt;String&gt; contextNames = driver.getContextHandles(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String contextName : contextNames) { System.out.println(contextName); }</code> </pre> <br>  Weisen Sie dem zuletzt im Array empfangenen Wert den Kontext zu.  Auf diese Weise können Sie korrekt zu WEBVIEW, tk wechseln.  Standardkontext = NATIVE_APP: <br><br><pre> <code class="java hljs">driver.context((String) contextNames.toArray()[contextNames.toArray().length - <span class="hljs-number"><span class="hljs-number">1</span></span>]);</code> </pre> <br>  <b>Wir steuern die Anwendungsschnittstelle</b> <br><br>  Weil  Wir arbeiten mit einer Hybridanwendung, d.h.  Anwendungselemente werden in WEBVIEW und nicht in NATIVE_APP gerendert. In den meisten Fällen müssen wir einen Suchtyp für das Element findElementByCssSelector verwenden. <br><br>  Klicken Sie auf die Schaltfläche OK: <br><br><pre> <code class="java hljs">driver.findElementByCssSelector(<span class="hljs-string"><span class="hljs-string">".button-ok"</span></span>).click();</code> </pre> <br>  - wobei .button-ok die Elementklasse ist.  Sie können die Element-ID auch genau verwenden. <br><br>  Wir senden den Wert in das Feld, zum Beispiel haben Sie eine Suche und möchten den Wert "Kino" dorthin senden. <br><br><pre> <code class="java hljs">driver.findElementByCssSelector(<span class="hljs-string"><span class="hljs-string">".search-input"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">""</span></span>);</code> </pre> <br><br>  Klicken Sie hier, um zu finden: <br><br><pre> <code class="java hljs">driver.findElementByCssSelector(<span class="hljs-string"><span class="hljs-string">".search-button"</span></span>).click();</code> </pre> <br>  Auf diese Weise können Sie Ihre Anwendung bereits steuern. <br><br>  Früher oder später werden Sie darauf stoßen, dass nicht alle Inhalte auf dem Smartphone-Bildschirm platziert werden, d. H.  Sie müssen scrollen.  Wenn ein Element während des Testvorgangs nicht auf dem Bildschirm angezeigt wird, gibt Appium den Fehler aus, dass das Element nicht angezeigt wird, und höchstwahrscheinlich werden alle weiteren Tests mit Fehlern abgedeckt. <br><br>  Um auf dem Bildschirm zu scrollen, können Sie die JS-Funktion scrollIntoView in Java ausführen. <br><br><pre> <code class="java hljs">((JavascriptExecutor) driver).executeScript(<span class="hljs-string"><span class="hljs-string">"document.querySelector('.button-ok').scrollIntoView({block: \"end\", behavior: \"smooth\"});"</span></span>);</code> </pre> <br>  In meinem Fall können Sie auf diese Weise zur Schaltfläche OK wechseln. <br><br>  Es kann ein Vorfall sein, dass Sie alles richtig geschrieben haben, aber das Scrollen wird nicht ausgeführt. <br><br>  Versuchen Sie, sich an andere Elemente auf dem Bildschirm zu binden. Führen Sie dies zunächst über die Konsole in Chrome - Inspect durch, damit Sie sicher sind, dass der Bildlauf beim Binden an dieses Element funktioniert. <br><br>  Sie können mit Schritt 8 fortfahren und wenn alles für Sie funktioniert, dann ist das großartig! <br>  Aber ich hatte noch eine andere Falle. <br>  Er heißt Crosswalk Browser. <br><br>  Als ich das Projekt startete, bekam ich ständig einen Fehler: <br><br><pre> <code class="plaintext hljs">“Make sure the app has its webview configured for debugging”</code> </pre> <br>  Dies bedeutet, dass kein einziger Test durchgeführt wurde. <br><br>  Was Sie in diesem Fall überprüfen müssen: <br><br><ul><li>  Stellen Sie sicher, dass Sie einen Debug-Build haben </li><li>  Stellen Sie sicher, dass der Debug-Build Inspect-a-Anwendung ermöglicht </li><li>  Installieren Sie einen festen Chromedriver <br><ul><li>  Folgen Sie dem Link <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://github.com/blutter/appium-crosswalk-fix</a> </li><li>  Die Installation erfolgt über npm. Installieren Sie es daher im Voraus auf Ihrem PC ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.npmjs.com/get-npm</a> ). </li></ul></li></ul><br>  Fügen Sie nach diesen Manipulationen Ihrem Projekt weitere Funktionen hinzu. <br><br><pre> <code class="java hljs">capabilities.setCapability(<span class="hljs-string"><span class="hljs-string">"chromedriverExecutable"</span></span>, <span class="hljs-string"><span class="hljs-string">"C:\\node_modules\\appium-with-crosswalk-fix\\chromedriver\\2.28\\chromedriver.exe"</span></span>);</code> </pre> <br>  - wobei C: \\ Knotenmodule \\ Appium-with-Crosswalk-Fix \\ Chromedriver \\ 2.28 \\ Chromedriver.exe <br>  Dies ist der Weg zum festen Chromedriver <br><br>  <b>Ihr Projekt sieht also folgendermaßen aus:</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> name; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.android.AndroidDriver; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.android.AndroidElement; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io.appium.java_client.remote.MobileCapabilityType; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.remote.DesiredCapabilities; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.openqa.selenium.JavascriptExecutor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.MalformedURLException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.URL; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.TimeUnit; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InterruptedException </span></span>{ AndroidDriver&lt;AndroidElement&gt; driver = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; DesiredCapabilities capabilities = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DesiredCapabilities(); capabilities.setCapability(MobileCapabilityType.DEVICE_NAME, <span class="hljs-string"><span class="hljs-string">"MyPhone"</span></span>); capabilities.setCapability(MobileCapabilityType.APP, <span class="hljs-string"><span class="hljs-string">"C:\\Appium automation\\APK\\My-debug-apk.apk"</span></span>); capabilities.setCapability(<span class="hljs-string"><span class="hljs-string">"chromedriverExecutable"</span></span>, <span class="hljs-string"><span class="hljs-string">"C:\\node_modules\\appium-with-crosswalk-fix\\chromedriver\\2.28\\chromedriver.exe"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AndroidDriver&lt;&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:4723/wd/hub"</span></span>), capabilities); driver.manage().timeouts().implicitlyWait(<span class="hljs-number"><span class="hljs-number">10</span></span>, TimeUnit.SECONDS); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (MalformedURLException e) { System.out.println(e.getMessage()); } Set&lt;String&gt; contextNames = driver.getContextHandles(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String contextName : contextNames) { System.out.println(contextName); } driver.context((String) contextNames.toArray()[contextNames.toArray().length - <span class="hljs-number"><span class="hljs-number">1</span></span>]); Thread.sleep(<span class="hljs-number"><span class="hljs-number">8000</span></span>); driver.findElementByCssSelector(<span class="hljs-string"><span class="hljs-string">".search-input"</span></span>).sendKeys(<span class="hljs-string"><span class="hljs-string">""</span></span>); driver.findElementByCssSelector(<span class="hljs-string"><span class="hljs-string">".search-button"</span></span>).click(); }</code> </pre><br>  Ein solches Projekt: <br><br><ul><li>  Installieren Sie Ihre Anwendung auf dem Gerät. </li><li>  Suchen Sie das Suchfeld auf der Anwendungsseite </li><li>  Wird dort die Bedeutung von "Kino" bringen </li><li>  Klicken Sie auf die Schaltfläche "Suchen" </li></ul><br><h3>  8. Wir starten das Projekt </h3><br>  Es gibt mehrere Hauptpunkte für den Start eines Projekts: <br><br><ul><li>  Starten Sie den Appium-Server (Punkt 4). <br><ul><li>  Verwenden Sie die Verknüpfung, um Appium zu starten </li><li>  Klicken Sie auf "Server starten". </li></ul></li><li>  Schließen Sie das Gerät an einen PC an oder starten Sie ein virtuelles Gerät (Punkt 6). </li><li>  Richten Sie ein Projekt ein (S. 5 und S. 7) </li><li>  Klicken Sie auf Ausführen (oder in der IntelliJ IDEA-Symbolleiste oder auf Ausführen - 'Haupt' ausführen). </li><li>  Genieße das Ergebnis </li></ul><br>  Nun, dann können Sie die Einstellungen testen. Die erforderlichen Informationen finden Sie auf der offiziellen Website des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entwicklers</a> . <br>  Appium kann auch zum Testen von iOS-Anwendungen verwendet werden. <br><br>  Ich wollte kurz schreiben, aber es stellte sich wie immer heraus. <br><br>  Vielen Dank an alle, die bis zum Ende gelesen haben, ich hoffe es war nützlich für Sie! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de452742/">https://habr.com/ru/post/de452742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de452730/index.html">Zertifizierung von Informationssystemen nach dem Prinzip der Standardsegmente. Mythen und Wirklichkeit</a></li>
<li><a href="../de452734/index.html">Migrieren Sie iOS (ARM) -Anwendungen mithilfe von Bitcode automatisch auf macOS (x86)</a></li>
<li><a href="../de452736/index.html">Nachrichtenverschlüsselung in SecureDialogues</a></li>
<li><a href="../de452738/index.html">Snom D717 IP-Telefon Bewertung</a></li>
<li><a href="../de452740/index.html">Eine Auswahl von Datensätzen für maschinelles Lernen</a></li>
<li><a href="../de452744/index.html">Gibt es ein erfülltes Leben eines Fernbedieners ohne freiberuflichen Austausch?</a></li>
<li><a href="../de452746/index.html">Das Buch "Die Kunst des Programmierens in R. Eintauchen in Big Data"</a></li>
<li><a href="../de452748/index.html">Prinzipien zur Entwicklung moderner Anwendungen aus NGINX. Teil 1</a></li>
<li><a href="../de452750/index.html">Nextcloud innerhalb und außerhalb von OpenLiteSpeed: Reverse Proxy konfigurieren</a></li>
<li><a href="../de452752/index.html">Hausgemachte BigData. Teil 1. Spark-Streaming-Praxis in einem AWS-Cluster</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>