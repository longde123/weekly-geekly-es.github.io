<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔟 👴🏼 🐂 Transfert de données inter-scènes dans Unity - Application de plusieurs valeurs à un développement de jeu simple 😑 👿 🐎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article sera utile aux développeurs de jeux débutants. Dans ce document, je parlerai de ma propre expérience dans la mise en œuvre d'une interacti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Transfert de données inter-scènes dans Unity - Application de plusieurs valeurs à un développement de jeu simple</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440718/">  Cet article sera utile aux développeurs de jeux débutants.  Dans ce document, je parlerai de ma propre expérience dans la mise en œuvre d'une interaction multi-étapes et des problèmes que j'ai rencontrés. <br><br>  Parlons de classes statiques pour le stockage de données, de différentes façons de charger des scènes avec le moteur Unity, et abordons également le cas de la connexion d'Admob au projet.  Informations fournies par la documentation officielle et une sympathique communauté de développeurs. <br><a name="habracut"></a><br><h2>  La situation </h2><br>  Mon jeu se compose de deux scènes - le menu principal, qui est visible immédiatement lors du chargement et, directement, une scène de jeu avec des mécaniques, dans laquelle, selon l'option sélectionnée, le préfabriqué de l'objet est chargé.  Il ne m’était pas possible de les combiner en une seule scène, car plusieurs objets assez complexes sont liés au menu, et il est plus pratique de séparer les entités. <br><br>  Auparavant, j'utilisais simplement un certain objet contrôleur pour stocker les données, mais avec le déchargement de la scène, il cesse d'exister. <br><br><h2>  Transfert de données (classe statique) </h2><br>  Il s'est avéré que Unity est excellent pour travailler avec du code, même s'il se trouve paisiblement dans un fichier dans le dossier des scripts et n'est pas attaché par un composant à un objet sur la scène (ce n'était pas évident pour un débutant).  Par exemple, un tel fichier peut être une classe statique de la forme suivante: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataHolder</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> GameObject prefabName; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> GameObject Prefab { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prefabName; } <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> { prefabName = value; } } }</code> </pre> <br><br>  Ainsi, j'ai réussi à sauvegarder le choix de l'utilisateur même après avoir déchargé la scène et chargé une nouvelle.  Au départ, tout fonctionnait exactement avec des scènes de commutation difficiles. <br><br>  En utilisant ce mécanisme, vous pouvez également transférer des paramètres vers d'autres scènes à partir du menu, par exemple, la langue de localisation, les paramètres des sons et de la musique, et bien plus encore. <br><br><h2>  Multi-valeur (SceneManagement) </h2><br>  Tout me convenait et donc, jusqu'à ce que je reçoive la tâche de me connecter au projet Admob (publicité), pour que la vidéo soit montrée au tout début de la scène du jeu.  Il s'est avéré qu'il y a des subtilités: demander une vidéo prend beaucoup de temps, et il n'a tout simplement pas le temps d'arriver lors du changement de scène.  Je ne voulais pas retarder des retards supplémentaires dans le projet, d'autant plus que nous avons beaucoup de temps jusqu'à ce que le joueur «colle» au menu.  Ensuite, j'ai découvert qu'il n'est pas nécessaire de changer de scène «dur», car il existe une merveilleuse option pour le chargement additif (sans décharger la scène précédente). <br><br>  Je charge la scène du jeu avec le contrôleur de menu (la scène avec le menu et l'objet publicitaire reste également chargée): <br><br><pre> <code class="cpp hljs">SceneManager.LoadScene(<span class="hljs-number"><span class="hljs-number">1</span></span>,LoadSceneMode.Additive);</code> </pre><br>  À la fin du niveau, je décharge la scène du jeu avec le contrôleur de jeu (pour qu'elle ne se bloque pas dans ma mémoire): <br><br><pre> <code class="cpp hljs">SceneManager.LoadScene(<span class="hljs-number"><span class="hljs-number">0</span></span>,LoadSceneMode.Single);</code> </pre><br>  En utilisant un tel schéma, la publicité est chargée immédiatement au début de l'application, et vous pouvez invoquer l'affichage de la publicité à tout moment souhaité.  Vous pouvez faire de même avec tous les objets dont vous avez besoin. <br><br><h2>  Les problèmes </h2><br>  Malheureusement, même avec le chargement additif de scènes, vous ne pourrez pas vous plonger dans les objets d'une scène à partir d'une autre.  Les liens vers les objets devront être transmis via un certain «médiateur» (dans mon cas, la même classe statique a été utilisée). <br><br>  Soyez prudent lorsque vous instanciez des préfabriqués, si plusieurs scènes sont actives - pour moi, ils ont tous décidé de tomber sur la mauvaise scène (plus une autre fois). <br><br><div class="spoiler">  <b class="spoiler_title">Liens de documentation</b> <div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Gestion de scène</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Classe statique</a> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr440718/">https://habr.com/ru/post/fr440718/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr440708/index.html">Webinaire ouvert "Travail: le sien et celui d'un autre"</a></li>
<li><a href="../fr440710/index.html">Deux aspects de WebView: démarrage rapide de projets et vol de données personnelles</a></li>
<li><a href="../fr440712/index.html">Le cloud n'est que l'ordinateur de quelqu'un</a></li>
<li><a href="../fr440714/index.html">Comment la baisse du taux d'acquisition nous affecte (titulaires de carte)</a></li>
<li><a href="../fr440716/index.html">Mise en place du plus grand IDCS pré-assemblé pour les pouvoirs publics à Volgograd</a></li>
<li><a href="../fr440720/index.html">Nous implémentons l'interface utilisateur dans iOS: nous améliorons, accélérons, évoluons</a></li>
<li><a href="../fr440722/index.html">Un peu de pratique de la programmation fonctionnelle dans Swift pour les débutants</a></li>
<li><a href="../fr440724/index.html">Sélection: 4 services utiles pour les immigrants potentiels aux États-Unis, en Europe et dans d'autres pays</a></li>
<li><a href="../fr440726/index.html">Le jeu des archétypes: comment la narration fonctionne pour les marques technologiques</a></li>
<li><a href="../fr440728/index.html">Développement mobile: de l'idée à l'estimation des coûts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>