<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”£ ğŸ¥Š ğŸ· å¦‚ä½•ç»“äº¤æœ‹å‹Ovirtå’Œè®©æˆ‘ä»¬åŠ å¯† ğŸ‘¨ğŸ½â€ğŸ”§ â™Œï¸ ğŸ™‚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨æ”¹å–„åŸºç¡€æ¶æ„çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å†³å®šç»“æŸè¿™ä¸ªå¤è€è€Œç—›è‹¦çš„é—®é¢˜-ä¸ºåŒäº‹ï¼ˆå¼€å‘äººå‘˜ï¼Œæµ‹è¯•äººå‘˜ï¼Œç®¡ç†å‘˜ç­‰ï¼‰æä¾›åœ¨ovirtä¸­ç‹¬ç«‹ç®¡ç†å…¶è™šæ‹Ÿæœºçš„èƒ½åŠ›ï¼Œè€Œæ— éœ€ä»»ä½•é¢å¤–çš„ä¸¾åŠ¨ã€‚ ovirtä¸­æœ‰å‡ ä¸ªç»„ä»¶éœ€è¦é…ç½®ä»¥è§£å†³æˆ‘çš„é—®é¢˜ï¼šWebç•Œé¢æœ¬èº«ï¼ŒnoVNCæ§åˆ¶å°ä»¥åŠå¡«å†™ç£ç›˜æ˜ åƒã€‚ 

 æˆ‘æ²¡æœ‰æ‰¾åˆ°â€œä½¿é—ªçƒâ€æŒ‰é’®ï¼Œå› æ­¤æˆ‘æ˜¾ç¤º...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•ç»“äº¤æœ‹å‹Ovirtå’Œè®©æˆ‘ä»¬åŠ å¯†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424127/">åœ¨æ”¹å–„åŸºç¡€æ¶æ„çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å†³å®šç»“æŸè¿™ä¸ªå¤è€è€Œç—›è‹¦çš„é—®é¢˜-ä¸ºåŒäº‹ï¼ˆå¼€å‘äººå‘˜ï¼Œæµ‹è¯•äººå‘˜ï¼Œç®¡ç†å‘˜ç­‰ï¼‰æä¾›åœ¨ovirtä¸­ç‹¬ç«‹ç®¡ç†å…¶è™šæ‹Ÿæœºçš„èƒ½åŠ›ï¼Œè€Œæ— éœ€ä»»ä½•é¢å¤–çš„ä¸¾åŠ¨ã€‚  ovirtä¸­æœ‰å‡ ä¸ªç»„ä»¶éœ€è¦é…ç½®ä»¥è§£å†³æˆ‘çš„é—®é¢˜ï¼šWebç•Œé¢æœ¬èº«ï¼ŒnoVNCæ§åˆ¶å°ä»¥åŠå¡«å†™ç£ç›˜æ˜ åƒã€‚ <br><br> æˆ‘æ²¡æœ‰æ‰¾åˆ°â€œä½¿é—ªçƒâ€æŒ‰é’®ï¼Œå› æ­¤æˆ‘æ˜¾ç¤ºäº†ä¸ºè§£å†³è¯¥é—®é¢˜è€Œè½¬åŠ¨çš„æ‰‹æŸ„ã€‚ å®Œæ•´è¯´æ˜ä¸‹ï¼š <br><br><img src="https://habrastorage.org/webt/pv/uo/ax/pvuoaxsmb0cnk7ifn-sjjh2aal0.jpeg"><br><br><a name="habracut"></a><br><br><h4> å…è´£å£°æ˜ï¼š </h4><br> åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘æƒ³æè¯·æ‚¨æ³¨æ„ä¸€ä¸ªäº‹å®ï¼Œå³ç”±äºæŸç§æˆ‘ä¸çŸ¥é“çš„åŸå› ï¼ŒåŸºç¡€ç»“æ„åŸŸæ˜¯åœ¨lanï¼Œlocalç­‰ç§æœ‰åŒºåŸŸä¸­åˆ›å»ºçš„ã€‚ <br><br> æˆ‘ä¸çŸ¥é“é˜»æ­¢æˆ‘åœ¨å…¬å…±åŒºåŸŸä½¿ç”¨ç»„ç»‡åŸŸçš„åŸå› ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å®‰å…¨åœ°å°†åŸŸç”¨äºå…¬å¸Alex-GLuck-Awesome-Company.comçš„ç«™ç‚¹ï¼Œè€Œä¸æ˜¯åŸŸAlex-GLuck-Awesome-Company.localã€‚ <br><br> å¦‚æœæ‚¨æ‹…å¿ƒæ— æ³•è·Ÿè¸ªç»„ç»‡ä¸­çš„åŸŸï¼Œå¹¶ä¸”è¿™ä¼šé€ æˆä¸€äº›éº»çƒ¦ï¼Œé‚£ä¹ˆå¯¹äºæ¯å¹´ä¸å¤šçš„100å¢å¸ƒï¼Œæ‚¨å¯ä»¥ä¸ºaglac.comåŸºç¡€æ¶æ„é€‰æ‹©ä¸€ä¸ªå•ç‹¬çš„åŸŸã€‚ <br><br> ä¸ºä»€ä¹ˆåœ¨å…¬å…±åŒºåŸŸä½¿ç”¨åŸŸåæ›´æœ‰åˆ©å¯å›¾ï¼š <br><br>  1.åœ¨ç»„ç»‡å†…å…¬å…±ç©ºé—´ä¸­å‡ºç°çš„æœåŠ¡ï¼šVPNï¼Œæ–‡ä»¶å…±äº«ï¼ˆseafileï¼Œnextcloudï¼‰å’Œå…¶ä»–ã€‚ åœ¨æ­¤ç±»æœåŠ¡ä¸Šé…ç½®æµé‡åŠ å¯†é€šå¸¸çœ‹èµ·æ¥åƒæ˜¯åœ¨å¹ç‰›ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¸ä¼šä¿æŠ¤è‡ªå·±ä¸å—MitMçš„ä¾µå®³ï¼Œå› ä¸ºè¿™å¾ˆå›°éš¾ï¼ˆå®é™…ä¸Šä¸æ˜¯ï¼‰ã€‚ <br><br> æˆ–åœ¨åŠå…¬å®¤å†…ï¼Œæ‚¨æœ‰ä¸€ä¸ªæœåŠ¡åœ°å€ï¼Œå¦ä¸€ä¸ªæ˜¯æ¥è‡ªInternetçš„æœåŠ¡åœ°å€ï¼Œå¹¶ä¸”å¿…é¡»ç»´æŠ¤è¿™äº›é€šä¿¡ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ‰é™çš„ä¸“ä¸šèµ„æºæ‰€èŠ±è´¹çš„ã€‚ å¥½å§ï¼Œå‘˜å·¥å¿…é¡»è®°ä½ä¸åŒçš„åœ°å€ï¼Œè¿™å¾ˆä¸æ–¹ä¾¿ã€‚ <br><br>  2.æ‚¨å¯ä»¥ä½¿ç”¨å…è´¹çš„è¯ä¹¦é¢å‘æœºæ„æ¥åŠ å¯†å†…éƒ¨æœåŠ¡ã€‚ <br><br> è‡ªå·±çš„PKIæ˜¯ä¸€é¡¹éœ€è¦å¾—åˆ°æ”¯æŒçš„æœåŠ¡ï¼Œæ¯å¹´æœ‰100å¢å¸ƒçš„æœºä¼šå¯ä»¥ä½¿ç”¨å…è´¹è¯ä¹¦é¢å‘æœºæ„æä¾›çš„PKIï¼Œè€Œä¸æ˜¯ä¸ºå°†å…¶èŠ±è´¹åœ¨å…¶ä»–ä»»åŠ¡ä¸Šçš„å‘˜å·¥ä»˜å‡ºæ—¶é—´ã€‚ <br><br>  3.ä½¿ç”¨è‡ªå·±çš„è¯ä¹¦é¢å‘æœºæ„æ—¶ï¼Œæ‚¨å°†æŠŠæ‘‡æ†æ”¾åœ¨æƒ³è¦ä½¿ç”¨BYODï¼ˆå¸¦ä»–ä»¬çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œæ‰‹æœºï¼Œå¹³æ¿ç”µè„‘ï¼‰ä¸”æ— æ³•æ§åˆ¶å…¶è®¾å¤‡çš„è¿œç¨‹å‘˜å·¥å’ŒåŒäº‹çš„æ‰‹ä¸­ã€‚ ä»–ä»¬å¸¦æ¥äº†ç½‚ç²ŸèŠ±ï¼ŒLinuxï¼ŒAndroidï¼ŒiOSï¼ŒWindows-æ”¯æŒè¿™æ ·çš„åŠ¨ç‰©å›­æ¯«æ— æ„ä¹‰ã€‚ <br><br> å½“ç„¶ï¼Œæ€»è€Œè¨€ä¹‹ï¼Œæœ‰ä¾‹å¤–ï¼Œæ‹¥æœ‰å…¶ä»–åˆ¶å®šå®‰å…¨ç­–ç•¥çš„è‹›åˆ»ä¼ä¸šçš„é“¶è¡Œå°†æ°¸è¿œæ— æ³•æ”¹å–„ä¸ºå‘˜å·¥æä¾›çš„æœåŠ¡ã€‚ <br><br> ä»–ä»¬æœ‰ä»˜è´¹çš„è¯ä¹¦é¢å‘æœºæ„ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šç­¾ç½²å…¶CAè¯ä¹¦ï¼ˆè°·æ­Œâ€œæ ¹ç­¾åæœåŠ¡â€ï¼‰ã€‚ <br><br> è¿˜æœ‰å…¶ä»–åŸå› ä½¿ä½¿ç”¨å…¬å…±é¢†åŸŸæ›´æœ‰åˆ©å¯å›¾ï¼ˆæœ€é‡è¦çš„æ˜¯å®ƒå±äºæ‚¨ï¼‰ï¼Œä½†æœ¬æ–‡å¹¶éå¦‚æ­¤ã€‚ <br><br><h2> åº•çº¿ï¼Œä½†é‡ç‚¹... </h2><br>  <b>æ³¨æ„ï¼</b>  <b>å¦‚æœå°†Let's Encryptçš„CAè¯ä¹¦æ·»åŠ åˆ°ovirtçš„å—ä¿¡ä»»åˆ—è¡¨ä¸­ï¼Œåˆ™å¯èƒ½ä¼šå½±å“ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼</b> <br><br> æ‚¨éœ€è¦æ³¨æ„çš„ç¬¬ä¸€ä»¶äº‹æ˜¯å°†Internetæ¥å£æ”¾ç½®åœ¨Internetä¸Šæ˜¯ä¸€ç§ä¸è‰¯åšæ³•ï¼Œå› ä¸º è¿™æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œå¹¶ä¸”ä¼šå¸¦æ¥å…¶ä»–å®‰å…¨å¨èƒã€‚ <br><br> å› æ­¤ï¼Œæ‚¨éœ€è¦åœ¨æˆ‘ä»¬çš„æŸäº›å ¡å’ä¸»æœºä¸Šè·å¾—è¯ä¹¦ï¼Œç„¶åä½¿ç”¨ovirt-engineå°†è¯ä¹¦å’Œå¯†é’¥è½¬ç§»åˆ°æˆ‘ä»¬çš„ä¸»æœºä¸Šã€‚ <br><br> æˆ‘ä»¬ä½¿ç”¨ovirtengine.example.com <i>ovirt</i>åç§°åœ¨DNSä¸­æ·»åŠ å ¡å’ä¸»æœºçš„å¤–éƒ¨åœ°å€ï¼Œæˆ‘å°†æŠŠcertbotå’Œnginxçš„å®‰è£…ç½®äºå¹•åï¼ˆå·²ç»åœ¨é›†çº¿å™¨ä¸Šè¿›è¡Œäº†æè¿°ï¼‰ã€‚ <br><br> é…ç½®Nginxç‰ˆæœ¬&gt; = 1.15.7 <br><br><div class="spoiler">  <b class="spoiler_title">/etc/nginx/conf.d/default.conf</b> <div class="spoiler_text"><pre><code class="plaintext hljs">server { server_name _; listen 80 default_server; location /robots.txt { alias /usr/share/nginx/html/robots.txt; } location /.well-known { root /usr/share/nginx/html; } location / { return 444; } } server { server_name _; listen 443 ssl http2 default_server; location /robots.txt { alias /usr/share/nginx/html/robots.txt; } location /.well-known { root /usr/share/nginx/html; } ssl_certificate /etc/nginx/ssl/$ssl_server_name/fullchain.pem; ssl_certificate_key /etc/nginx/ssl/$ssl_server_name/privkey.pem; ssl_protocols TLSv1.2; ssl_prefer_server_ciphers on; ssl_dhparam /etc/nginx/ssl/dhparam.pem; ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA'; ssl_session_timeout 1d; ssl_session_cache shared:SSL:50m; #    OCSP-,         ssl_stapling on; ssl_stapling_verify on; add_header Strict-Transport-Security max-age=15768000; location / { return 444; } }</code> </pre> <br></div></div><br> ç„¶åæˆ‘ä»¬è·å¾—äº†è¯ä¹¦å’Œå¯†é’¥ï¼š <br><br><pre> <code class="bash hljs">certbot certonly --nginx -d ovirtengine.example.com</code> </pre><br> æˆ‘ä»¬å­˜æ¡£æˆ‘ä»¬çš„è¯ä¹¦å’Œå¯†é’¥ï¼š <br><br><pre> <code class="bash hljs">tar Phczf /tmp/ovirtengine.example.com.tgz /etc/letsencrypt/live/ovirtengine.example.com</code> </pre><br> ä»å ¡å’ä¸»æœºä¸‹è½½å­˜æ¡£ï¼Œç„¶åå°†å…¶ä¸Šä¼ åˆ°æˆ‘ä»¬çš„ovirt-enzhinï¼š <br><br><pre> <code class="bash hljs">scp bastion-host:/tmp/ovirtengine.example.com.tgz /tmp/ scp /tmp/ovirtengine.example.com.tgz ovirtengine.example.com:/</code> </pre><br><h3> è¾¾åˆ°ç›®æ ‡ </h3><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è§£å‹ç¼©å½’æ¡£æ–‡ä»¶å¹¶åˆ›å»ºç¬¦å·é“¾æ¥ä»¥ç®€åŒ–å¯¹æ–‡ä»¶ä½ç½®ç³»ç»Ÿçš„ç†è§£ï¼š <br><br><pre> <code class="bash hljs">tar Pxzf /ovirtengine.example.com.tgz &amp;&amp; rm -f ovirtengine.example.com.tgz mkdir -p /etc/letsencrypt/live ln -f -s /etc/letsencrypt/live /etc/pki/letsencrypt</code> </pre><br> æˆ‘ä»¬å°†ovirtä¸­çš„å†…ç½®pkié…ç½®ä¸ºä½¿ç”¨Javaè¯ä¹¦å­˜å‚¨åŒºï¼ˆopenjdkï¼‰è¿›è¡Œè¯ä¹¦éªŒè¯ï¼š <br><br><pre> <code class="bash hljs">cat &lt;&lt; EOF &gt; /etc/ovirt-engine/engine.conf.d/99-setup-pki.conf ENGINE_HTTPS_PKI_TRUST_STORE=<span class="hljs-string"><span class="hljs-string">"/etc/pki/java/cacerts"</span></span> ENGINE_HTTPS_PKI_TRUST_STORE_PASSWORD=<span class="hljs-string"><span class="hljs-string">""</span></span> EOF</code> </pre><br> æˆ‘ä»¬å°†CAä»è®©æˆ‘ä»¬åŠ å¯†è½¬æ¢ä¸ºderæ ¼å¼ï¼Œç„¶ååœ¨Javaä¿¡ä»»åº“çš„è¯ä¹¦å­˜å‚¨ä¸­æ·»åŠ ä¸€ä¸ªovirtï¼ˆè¿™æ˜¯è¯ä¹¦åˆ—è¡¨æ‰€åœ¨çš„å®¹å™¨ï¼Œåœ¨Javaä¸­ä½¿ç”¨äº†è¿™æ ·çš„ç³»ç»Ÿï¼‰ï¼š <br><br><pre> <code class="bash hljs">openssl x509 -outform der -<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /etc/pki/letsencrypt/ovirtengine.example.com/chain.pem -out /tmp/ovirtengine.example.com.chain.der keytool -import -<span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> <span class="hljs-string"><span class="hljs-string">"Let's Encrypt Authority X3"</span></span> -file /tmp/ovirtengine.example.com.chain.der -keystore /etc/pki/ovirt-engine/.truststore -storepass $(grep <span class="hljs-string"><span class="hljs-string">'^ENGINE_PKI_TRUST_STORE_PASSWORD'</span></span> /etc/ovirt-engine/engine.conf.d/10-setup-pki.conf | cut -f 2 -d <span class="hljs-string"><span class="hljs-string">'"'</span></span>) rm -f /tmp/ovirtengine.example.com.chain.der</code> </pre><br> æˆ‘ä»¬ç¼–è¾‘apacheçš„SSLè®¾ç½®ï¼Œæ·»åŠ å‚æ•°ä»¥æ”¯æŒç¬¦å·é“¾æ¥ï¼Œå¹¶åˆ é™¤CAçš„å‚æ•°ï¼Œè¿™å°†æ£€æŸ¥è¯ä¹¦ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿå°†ä½¿ç”¨å—ä¿¡ä»»çš„CAè®¾ç½®è¿›è¡ŒéªŒè¯ï¼‰ï¼š <br><br><pre> <code class="bash hljs">sed -r -i <span class="hljs-string"><span class="hljs-string">'s|^(SSLCACertificateFile.*)|#\1|g'</span></span> /etc/httpd/conf.d/ssl.conf sed -r -i <span class="hljs-string"><span class="hljs-string">'0,/(^#?SSLCACertificateFile.*)/ s//\1\nOptions FollowSymlinks/'</span></span> /etc/httpd/conf.d/ssl.conf</code> </pre><br> ä¹‹åï¼Œä»¥é˜²ä¸‡ä¸€ï¼Œæˆ‘ä»¬å°†è‡ªåŠ¨å¤‡ä»½é€šè¿‡PKI ovirt'aç”Ÿæˆçš„åŸå§‹æ–‡ä»¶ï¼Œå¹¶å°†ç¬¦å·é“¾æ¥æ›¿æ¢ä¸ºLet's Encryptä¸­çš„æ–‡ä»¶ï¼š <br><br><pre> <code class="bash hljs">ln -f -s /etc/pki/letsencrypt/ovirtengine.example.com/fullchain.pem /etc/pki/ovirt-engine/apache-chain.pem services=( <span class="hljs-string"><span class="hljs-string">'apache'</span></span> <span class="hljs-string"><span class="hljs-string">'imageio-proxy'</span></span> <span class="hljs-string"><span class="hljs-string">'websocket-proxy'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${services[@]}</span></span></span><span class="hljs-string">"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> cp /etc/pki/ovirt-engine/certs/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>.cer{,.<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$( date +%F )</span></span></span><span class="hljs-string">"</span></span>.bak} cp /etc/pki/ovirt-engine/keys/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>.key.nopass{,.<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$( date +%F )</span></span></span><span class="hljs-string">"</span></span>.bak} ln -f -s /etc/pki/letsencrypt/ovirtengine.example.com/privkey.pem /etc/pki/ovirt-engine/keys/<span class="hljs-variable"><span class="hljs-variable">$i</span></span>.key.nopass ln -f -s /etc/pki/letsencrypt/ovirtengine.example.com/cert.pem /etc/pki/ovirt-engine/certs/{apache,imageio-proxy,websocket-proxy}.cer <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre><br> æˆ‘ä»¬æ¢å¤æ–‡ä»¶ä¸Šçš„SElinuxä¸Šä¸‹æ–‡å¹¶é‡æ–°å¯åŠ¨æˆ‘ä»¬çš„æœåŠ¡ï¼ˆhttpdï¼Œovirt-engineï¼Œovirt-imageio-proxyï¼Œovirt-websocket-proxyï¼‰ï¼š <br><br><pre> <code class="bash hljs">restorecon -Rv /etc/pki systemctl restart httpd ovirt-engine ovirt-imageio-proxy ovirt-websocket-proxy</code> </pre><br>  httpd-Apache WebæœåŠ¡å™¨ <br>  ovirt-engine-ovirt Webç•Œé¢ <br>  ovirt-imageio-proxy-åŠ è½½ç£ç›˜æ˜ åƒçš„å®ˆæŠ¤ç¨‹åº <br>  ovirt-websocket-proxy-ç”¨äºè¿è¡ŒnoVNCæ§åˆ¶å°çš„æœåŠ¡ <br><br> ä»¥ä¸Šæ‰€æœ‰å†…å®¹å‡å·²åœ¨ovirt 4.2ç‰ˆä¸Šè¿›è¡Œäº†æµ‹è¯•ã€‚ <br><br><h2> è‡ªåŠ¨ç»­è®¢Ovirtè¯ä¹¦ </h2><br> æ ¹æ®è‰¯å¥½çš„å®‰å…¨åšæ³•ï¼Œå ¡å’ä¸»æœºä¸ovirtä¹‹é—´ä¸åº”å»ºç«‹è¿æ¥ï¼Œå¹¶ä¸”è¯ä¹¦åªèƒ½é¢å‘3ä¸ªæœˆã€‚ è¿™æ˜¯å…³äºæˆ‘å¦‚ä½•å®æ–½è¯ä¹¦æ›´æ–°çš„æœ‰äº‰è®®çš„è§‚ç‚¹ã€‚ <br><br> æˆ‘æœ‰ä¸€æœ¬åˆå¥å‰§æœ¬ï¼Œæ¯å¤©æ—©ä¸Š5ç‚¹æŒ‰æ—¶é—´è¡¨åœ¨é¢†ç­ä¸Šæ’­æ”¾ã€‚ è¯¥å‰§æœ¬è¿›å…¥Ovirtï¼Œæ£€æŸ¥è¯ä¹¦çš„æœ‰æ•ˆæœŸï¼Œå¦‚æœåˆ°æœŸå‰è¿˜å‰©ä¸åˆ°5å¤©ï¼Œå®ƒå°†è¿›å…¥å ¡å’ä¸»æœºå¹¶å¼€å§‹è¯ä¹¦æ›´æ–°ã€‚ <br><br> æ›´æ–°è¯ä¹¦åï¼Œå®ƒå°†å­˜æ¡£æ–‡ä»¶çš„æ–‡ä»¶å¤¹å­˜æ¡£ï¼Œå°†formanä¸‹è½½åˆ°ä¸»æœºï¼Œç„¶åè§£å‹ç¼©ovirtä¸»æœºã€‚ ç„¶åï¼Œå®ƒæ¢å¤æ–‡ä»¶ä¸Šçš„SElinuxä¸Šä¸‹æ–‡å¹¶é‡æ–°å¯åŠ¨æˆ‘ä»¬çš„æœåŠ¡ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN424127/">https://habr.com/ru/post/zh-CN424127/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN424111/index.html">æ™ºèƒ½åˆçº¦æµªæ½®ã€‚ åˆä½“éªŒ</a></li>
<li><a href="../zh-CN424113/index.html">è®¾è®¡è¿‡ç¨‹ï¼Œç ”ç©¶å’Œæ±‚èŒ</a></li>
<li><a href="../zh-CN424115/index.html">ç”¨ä¾‹æˆ–è´Ÿè½½å‡è¡¡å™¨æ‰€ç¼ºå°‘çš„</a></li>
<li><a href="../zh-CN424119/index.html">æ˜¯å¦æœ‰Scrum *ï¼Ÿ</a></li>
<li><a href="../zh-CN424121/index.html">åœ¨pgModelerä¸­åˆ›å»ºä¸€ä¸ªè§¦å‘å‡½æ•°</a></li>
<li><a href="../zh-CN424129/index.html">Androidå¼€å‘ã€‚ æœ‰å…³å¿«é€Ÿä½¿ç”¨åˆ—è¡¨çš„ä¸€äº›çŸ¥è¯†</a></li>
<li><a href="../zh-CN424131/index.html">æ™ºèƒ½ç³»ç»Ÿå¼€å‘äººå‘˜å®£è¨€ï¼š15æ¡åŸåˆ™</a></li>
<li><a href="../zh-CN424133/index.html">é€šè¿‡äººæ–‡è§†è§’è™šæ‹ŸåŒ–å»ºç­‘å±€çš„å·¥ä½œ</a></li>
<li><a href="../zh-CN424135/index.html">æ¬§ç›Ÿæ‰¹å‡†æ–°çš„ç‰ˆæƒæŒ‡ä»¤-å®ƒå°†å¦‚ä½•å½±å“äº’è”ç½‘</a></li>
<li><a href="../zh-CN424137/index.html">æ‚¨å¦‚ä½•åº†ç¥ç¨‹åºå‘˜çš„ä¸€å¤©ï¼Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>