<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👍🏽 🏉 ↕️ Openstack Load Balancing 🧗 🍂 👩‍👦‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam sistem cloud yang besar, masalah penyeimbangan otomatis atau penyeimbangan beban pada sumber daya komputasi sangat akut. Orang Tionghoa juga men...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Openstack Load Balancing</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rostelecom/blog/461483/">  Dalam sistem cloud yang besar, masalah penyeimbangan otomatis atau penyeimbangan beban pada sumber daya komputasi sangat akut.  Orang Tionghoa juga menangani masalah ini (pengembang dan operator layanan cloud, kami adalah bagian dari grup perusahaan Rostelecom). <br><br>  Dan, karena platform pengembangan utama kami adalah Openstack, dan kami, seperti semua orang, malas, diputuskan untuk mengambil semacam modul siap pakai yang sudah menjadi bagian dari platform.  Pilihan kami jatuh pada Watcher, yang kami putuskan untuk digunakan untuk kebutuhan kami. <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/i_/o6/ll/i_o6llxyfnumqc0nqrlnuk-ptem.jpeg" width="900"></a> <br>  Pertama, mari kita berurusan dengan istilah dan definisi. <br><a name="habracut"></a><br><h2>  Ketentuan dan definisi </h2><br>  <b>Tujuan</b> adalah hasil akhir yang dapat dibaca, diamati, dan diukur manusia yang harus dicapai.  Untuk mencapai setiap tujuan, ada satu atau lebih strategi.  Strategi adalah implementasi dari algoritma yang mampu menemukan solusi untuk tujuan tertentu. <br><br>  <b>Tindakan</b> adalah tugas dasar yang mengubah keadaan saat ini dari sumber daya yang dikelola target dari klaster OpenStack, seperti: memigrasi mesin virtual (migrasi), mengubah status kekuatan sebuah simpul (change_node_power_state), mengubah status layanan nova (change_nova_service_state), mengubah rasa (mengubah ukuran) , mendaftarkan pesan NOP (nop), tidak adanya tindakan untuk jangka waktu tertentu - jeda (tidur), transfer disk (volume_migrate). <br><br>  <b>Rencana Tindakan (Action Plan)</b> - aliran tindakan tertentu yang dilakukan dalam urutan tertentu untuk mencapai Tujuan tertentu.  Rencana aksi juga memuat perkiraan kinerja global dengan seperangkat indikator kinerja.  Rencana tindakan dihasilkan oleh Watcher setelah audit yang berhasil, akibatnya strategi yang digunakan menemukan solusi untuk mencapai tujuan.  Rencana tindakan terdiri dari daftar tindakan berurutan. <br><br>  <b>Audit</b> adalah permintaan untuk optimasi cluster.  Optimalisasi dilakukan untuk mencapai satu tujuan dalam kluster yang diberikan.  Untuk setiap audit yang berhasil, Watcher membuat Rencana Tindakan. <br><br>  <b>Lingkup Audit</b> adalah seperangkat sumber daya di mana audit dilakukan (zona ketersediaan, agregator node, node komputasi individual atau node penyimpanan, dll.).  Lingkup audit didefinisikan dalam setiap templat.  Jika ruang lingkup audit tidak ditentukan, seluruh cluster diaudit. <br><br>  <b>Template Audit</b> - Kumpulan pengaturan yang tersimpan untuk memulai audit.  Templat diperlukan untuk menjalankan audit dengan pengaturan yang sama beberapa kali.  Template harus mengandung tujuan audit, jika strategi tidak diindikasikan, maka strategi yang paling sesuai yang ada dipilih. <br><br>  <b>Cluster</b> adalah seperangkat mesin fisik yang menyediakan sumber daya komputasi, penyimpanan, dan jaringan dan dikelola oleh node kontrol OpenStack yang sama. <br><br>  <b>Cluster Data Model (CDM)</b> adalah representasi logis dari keadaan saat ini dan topologi sumber daya yang dikelola cluster. <br><br>  <b>Indikator Efisiensi (Indikator Efisiensi)</b> - indikator yang menunjukkan bagaimana solusi yang dibuat menggunakan strategi ini diimplementasikan.  Indikator kinerja khusus untuk tujuan tertentu dan biasanya digunakan untuk menghitung efektivitas global dari rencana aksi final. <br><br>  <b>Spesifikasi Khasiat</b> adalah seperangkat fitur spesifik yang terkait dengan setiap Sasaran, yang mendefinisikan berbagai indikator kinerja yang harus disediakan oleh strategi yang memastikan pencapaian tujuan yang sesuai dalam keputusannya.  Memang, setiap solusi yang diusulkan oleh strategi akan diperiksa untuk kesesuaian dengan spesifikasi sebelum menghitung efektivitas globalnya. <br><br>  <b>"Mesin skoring"</b> adalah file yang dapat dieksekusi yang memiliki input yang terdefinisi dengan baik, output yang terdefinisi dengan baik, dan melakukan tugas matematika murni.  Jadi, perhitungan tidak tergantung pada lingkungan di mana ia dilakukan - itu akan memberikan hasil yang sama di mana saja. <br><br>  <b>Watcher Planner</b> adalah bagian dari mesin pengambilan keputusan Watcher.  Modul ini menerima serangkaian tindakan yang dihasilkan oleh strategi dan membuat rencana alur kerja yang mendefinisikan bagaimana merencanakan berbagai tindakan ini dalam waktu dan untuk setiap tindakan, apa saja prasyaratnya. <br><br><h2>  Tujuan dan Strategi Pengamat </h2><br><div class="scrollable-table"><table><tbody><tr><td>  <b>Tujuan</b> </td><td>  Strategi </td></tr><tr><td rowspan="3">  <b>Tujuan bodoh</b> </td><td>  Strategi boneka </td></tr><tr><td>  Strategi Dummy menggunakan mesin Scoring sampel </td></tr><tr><td>  Strategi boneka dengan ukuran </td></tr><tr><td>  <b>Menghemat energi</b> </td><td>  Strategi penghematan energi </td></tr><tr><td rowspan="2">  <b>Konsolidasi server</b> </td><td>  Konsolidasi Server Offline Dasar </td></tr><tr><td>  Strategi Konsolidasi Beban Kerja VM </td></tr><tr><td rowspan="3">  <b>Penyeimbangan beban kerja</b> </td><td>  Strategi Migrasi Saldo Beban Kerja </td></tr><tr><td>  Strategi Keseimbangan Kapasitas Penyimpanan </td></tr><tr><td>  Stabilisasi beban kerja </td></tr><tr><td>  <b>Tetangga yang bising</b> </td><td>  Tetangga yang bising </td></tr><tr><td>  <b>Optimasi termal</b> </td><td>  Strategi berbasis suhu outlet </td></tr><tr><td>  <b>Optimalisasi aliran udara</b> </td><td>  Strategi migrasi aliran udara yang seragam </td></tr><tr><td>  <b>Perawatan perangkat keras</b> </td><td>  Migrasi zona </td></tr><tr><td>  <b>Tidak terklasifikasi</b> </td><td>  Aktuator </td></tr></tbody></table></div><br>  <b>Sasaran dummy</b> - <b>sasaran</b> cadangan yang digunakan untuk tujuan pengujian. <br><br>  Strategi terkait: Strategi Dummy, Strategi Dummy menggunakan mesin Scoring sampel dan strategi Dummy dengan pengubahan ukuran.  Strategi dummy adalah strategi dummy yang digunakan untuk pengujian integrasi melalui Tempest.  Strategi ini tidak memberikan optimasi yang berguna, tujuan utamanya adalah untuk menggunakan tes Tempest. <br><br>  Strategi boneka menggunakan sampel Mesin Pencetak - strategi ini mirip dengan yang sebelumnya, hanya berbeda dalam penggunaan sampel "mesin evaluasi", yang melakukan perhitungan menggunakan metode pembelajaran mesin. <br><br>  Strategi boneka dengan ukuran - strategi ini mirip dengan yang sebelumnya, hanya berbeda dalam penggunaan mengubah rasa (migrasi dan mengubah ukuran). <br><br>  Tidak digunakan dalam produksi. <br><br>  <b>Hemat Energi</b> - meminimalkan konsumsi energi.  Strategi untuk tujuan ini. Menyimpan Strategi Energi bersamaan dengan Strategi Konsolidasi Beban Kerja VM (Konsolidasi Server) mampu melakukan fungsi manajemen daya dinamis (DPM), yang menghemat energi dengan secara dinamis mengkonsolidasikan beban kerja bahkan selama periode beban sumber daya rendah: mesin virtual ditransfer ke node yang lebih sedikit: , dan node yang tidak perlu terputus.  Setelah konsolidasi, strategi menawarkan keputusan untuk menghidupkan / mematikan node sesuai dengan parameter yang diberikan: "min_free_hosts_num" - jumlah node yang disertakan gratis yang menunggu untuk dimuat, dan "free_used_percent" - persentase node yang disertakan gratis ke jumlah node yang ditempati oleh mesin.  Agar strategi <b>berjalan, Ironic</b> harus <b>dihidupkan dan dikonfigurasikan untuk bekerja dengan power on / off pada node.</b> <br><br><h3>  Opsi Strategi </h3><br><div class="scrollable-table"><table><tbody><tr><td>  <b>parameter</b> </td><td>  <b>jenis</b> </td><td>  <b>secara default</b> </td><td>  <b>deskripsi</b> </td></tr><tr><td>  <b>free_used_percent</b> </td><td>  Nomor </td><td>  10.0 </td><td>  rasio jumlah node komputasi bebas dengan jumlah node komputasi dengan mesin virtual </td></tr><tr><td>  <b>min_free_hosts_num</b> </td><td>  Int </td><td>  1 </td><td>  jumlah minimum node komputasi gratis </td></tr></tbody></table></div><br>  Harus ada setidaknya dua node di cloud.  Metode yang digunakan adalah mengubah status daya simpul (change_node_power_state).  <b>Strategi tidak memerlukan kumpulan metrik.</b> <br><br>  Konsolidasi Server - meminimalkan jumlah node komputasi (konsolidasi).  Ini memiliki dua strategi: Konsolidasi Server Offline Dasar dan Strategi Konsolidasi Beban Kerja VM. <br><br>  Strategi Konsolidasi Server Offline Dasar meminimalkan jumlah total server yang digunakan dan juga meminimalkan jumlah migrasi. <br><br>  <b>Strategi dasar membutuhkan metrik berikut:</b> <b><br></b> <br><div class="scrollable-table"><table><tbody><tr><td>  <b>metrik</b> </td><td>  <b>layanan</b> </td><td>  <b>plugin</b> </td><td>  <b>komentar</b> </td></tr><tr><td>  <b>compute.node.cpu.percent</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  tidak ada </td><td></td></tr><tr><td>  <b>cpu_util</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  tidak ada </td><td></td></tr></tbody></table></div><br>  Parameter strategi: migrasi_attempts - jumlah kombinasi untuk mencari kandidat shutdown potensial (default, 0, tanpa batasan), interval periode-waktu dalam detik untuk mendapatkan agregasi statis dari sumber data metrik (700 secara default). <br><br>  Metode yang digunakan: migrasi, perubahan status layanan nova (change_nova_service_state). <br><br>  Strategi Konsolidasi Beban Kerja VM didasarkan pada algoritma heuristik fit pertama, yang berfokus pada beban CPU yang diukur dan mencoba untuk meminimalkan node yang memiliki terlalu banyak atau terlalu sedikit beban, dengan mempertimbangkan keterbatasan kapasitas sumber daya.  Strategi ini memberikan solusi yang mengarah pada penggunaan sumber daya klaster yang lebih efisien menggunakan empat langkah berikut: <br><br><ol><li>  Fase bongkar - pemrosesan sumber daya yang digunakan secara berlebihan; </li><li>  Fase konsolidasi - pemrosesan sumber daya yang kurang dimanfaatkan; </li><li>  Optimalisasi solusi - mengurangi jumlah migrasi; </li><li>  Menonaktifkan node komputasi yang tidak digunakan. </li></ol><br>  Strategi ini membutuhkan metrik berikut: <br><br><div class="scrollable-table"><table><tbody><tr><td>  <b>metrik</b> </td><td>  <b>layanan</b> </td><td>  <b>plugin</b> </td><td>  <b>komentar</b> </td></tr><tr><td>  <b>memori</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  tidak ada </td><td></td></tr><tr><td>  <b>ukuran disk.root.size</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  tidak ada </td><td></td></tr></tbody></table></div><br>  Metrik berikut bersifat opsional, tetapi tingkatkan akurasi strategi jika tersedia: <br><div class="scrollable-table"><table><tbody><tr><td>  <b>metrik</b> </td><td>  <b>layanan</b> </td><td>  <b>plugin</b> </td><td>  <b>komentar</b> </td></tr><tr><td>  <b>residen memori</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  tidak ada </td><td></td></tr><tr><td>  <b>cpu_util</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  tidak ada </td><td></td></tr></tbody></table></div><br>  Parameter strategi: interval periode - waktu dalam detik untuk mendapatkan agregasi statis dari sumber data metrik (3600 secara default). <br><br>  Menggunakan metode yang sama dengan strategi sebelumnya.  Lebih detail di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  <b>Penyeimbangan Beban Kerja</b> - menyeimbangkan beban kerja antara node komputasi.  Tujuannya memiliki tiga strategi: Strategi Migrasi Keseimbangan Beban Kerja, stabilisasi beban kerja, Strategi Keseimbangan Kapasitas Penyimpanan. <br><br>  Strategi Migrasi Saldo Beban Kerja meluncurkan migrasi mesin virtual berdasarkan beban kerja mesin virtual host.  Keputusan untuk mentransfer dibuat setiap kali% utilisasi CPU atau RAM dari node melebihi ambang yang ditentukan.  Dalam hal ini, mesin virtual yang dipindahkan harus membawa node lebih dekat ke beban kerja rata-rata semua node. <br><br><h3>  Persyaratan </h3><br><ul><li>  Penggunaan prosesor fisik; </li><li>  Setidaknya dua node komputasi fisik; </li><li>  Komponen Ceilometer yang diinstal dan dikonfigurasi adalah ceilometer-agent-compute yang bekerja pada setiap node komputasi, dan Ceilometer API, serta mengumpulkan metrik berikut: </li></ul><br><div class="scrollable-table"><table><tbody><tr><td>  <b>metrik</b> </td><td>  <b>layanan</b> </td><td>  <b>plugin</b> </td><td>  <b>komentar</b> </td></tr><tr><td>  <b>cpu_util</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  tidak ada </td><td></td></tr><tr><td>  <b>residen memori</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  tidak ada </td><td></td></tr></tbody></table></div><br>  Opsi Strategi: <br><div class="scrollable-table"><table><tbody><tr><td>  <b>parameter</b> </td><td>  <b>jenis</b> </td><td>  <b>secara default</b> </td><td>  <b>deskripsi</b> </td></tr><tr><td>  <b>metrik</b> </td><td>  Tali </td><td>  'cpu_util' </td><td>  Metrik yang mendasari: 'cpu_util', 'memory.resident'. </td></tr><tr><td>  <b>ambang batas</b> </td><td>  Nomor </td><td>  25.0 </td><td>  Ambang batas kerja untuk migrasi. </td></tr><tr><td>  <b>periode</b> </td><td>  Nomor </td><td>  300 </td><td>  Periode waktu kumulatif Ceilometer. </td></tr></tbody></table></div><br>  Metode yang digunakan adalah migrasi. <br><br>  Stabilisasi beban kerja - strategi yang bertujuan untuk menstabilkan beban kerja menggunakan migrasi langsung.  Strategi ini didasarkan pada algoritma deviasi standar dan menentukan apakah ada kemacetan di cluster dan meresponsnya dengan memicu migrasi mesin untuk menstabilkan cluster. <br><br><h3>  Persyaratan </h3><br><ul><li>  Penggunaan prosesor fisik; </li><li>  Setidaknya dua node komputasi fisik; </li><li>  Komponen Ceilometer yang diinstal dan dikonfigurasi adalah ceilometer-agent-compute yang bekerja pada setiap node komputasi, dan Ceilometer API, serta mengumpulkan metrik berikut: </li></ul><br><div class="scrollable-table"><table><tbody><tr><td>  <b>metrik</b> </td><td>  <b>layanan</b> </td><td>  <b>plugin</b> </td><td>  <b>komentar</b> </td></tr><tr><td>  <b>cpu_util</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  tidak ada </td><td></td></tr><tr><td>  <b>residen memori</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  tidak ada </td><td></td></tr></tbody></table></div><br>  Strategi Keseimbangan Kapasitas Penyimpanan (strategi yang diterapkan sejak Queens) - strategi mentransfer disk tergantung pada beban kumpulan Cinder.  Keputusan transfer dibuat setiap kali penggunaan kumpulan melebihi ambang yang ditentukan.  Disk jelajah harus membawa kolam lebih dekat ke beban rata-rata semua kolam Cinder. <br><br><h3>  Persyaratan dan Batasan </h3><br><ul><li>  Setidaknya dua kolam Cinder; </li><li>  Kemampuan untuk memigrasi disk. </li><li>  Kolektor model data cluster. </li></ul><br>  Opsi Strategi: <br><br><div class="scrollable-table"><table><tbody><tr><td>  <b>parameter</b> </td><td>  <b>jenis</b> </td><td>  <b>secara default</b> </td><td>  <b>deskripsi</b> </td></tr><tr><td>  <b>volume_threshold</b> </td><td>  Nomor </td><td>  80.0 </td><td>  Nilai ambang cakram untuk penyeimbangan volume. </td></tr></tbody></table></div><br>  Metode yang digunakan adalah migrasi disk (volume_migrate). <br><br>  Noisy Neighbor - mengidentifikasi dan memigrasi "tetangga berisik" - mesin virtual prioritas rendah yang mempengaruhi kinerja mesin virtual prioritas tinggi dari sudut pandang IPC, menggunakan Cache Level Terakhir.  Strategi sendiri: Noisy Neighbor (parameter strategi yang digunakan adalah cache_threshold (nilai default adalah 35), migrasi dimulai ketika kinerja turun ke nilai yang ditentukan. Untuk strategi untuk bekerja, <b>metrik LLC (Cache Level Terakhir)</b> yang disertakan <b>,</b> <b>server Intel terbaru dengan dukungan CMT</b> , dan juga koleksi metrik berikut: <br><div class="scrollable-table"><table><tbody><tr><td>  <b>metrik</b> </td><td>  <b>layanan</b> </td><td>  <b>plugin</b> </td><td>  <b>komentar</b> </td></tr><tr><td>  <b>cpu_l3_cache</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  tidak ada </td><td>  Diperlukan Intel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CMT</a> . </td></tr></tbody></table></div><br>  Model data cluster (default): Kolektor model data data cluster.  Metode yang diterapkan adalah migrasi. <br><br>  Bekerja untuk tujuan ini melalui Dashboard tidak sepenuhnya diimplementasikan di Queens. <br><br>  <b>Optimalisasi Termal</b> - mengoptimalkan kondisi suhu.  Temperatur outlet (udara buang) adalah salah satu sistem telemetri termal yang penting untuk mengukur keadaan termal / beban kerja server.  Untuk tujuan tersebut, ada satu strategi - Strategi berbasis suhu outlet, yang membuat keputusan untuk mentransfer beban kerja ke node dengan kondisi suhu yang menguntungkan (suhu terendah saat keluar) ketika suhu pada output host asli mencapai ambang custom. <br><br>  Agar strategi dapat berfungsi, Anda memerlukan server dengan Intel Power Node Manager <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">3.0 atau yang lebih baru yang</a> diinstal dan dikonfigurasi, serta kumpulan metrik berikut: <br><div class="scrollable-table"><table><tbody><tr><td>  <b>metrik</b> </td><td>  <b>layanan</b> </td><td>  <b>plugin</b> </td><td>  <b>komentar</b> </td></tr><tr><td>  <b>hardware.ipmi.node.outlet_temperature</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  IPMI </td><td></td></tr></tbody></table></div><br>  Opsi Strategi: <br><div class="scrollable-table"><table><tbody><tr><td>  <b>parameter</b> </td><td>  <b>jenis</b> </td><td>  <b>secara default</b> </td><td>  <b>deskripsi</b> </td></tr><tr><td>  <b>ambang batas</b> </td><td>  Nomor </td><td>  35.0 </td><td>  Ambang batas suhu untuk migrasi. </td></tr><tr><td>  <b>periode</b> </td><td>  Nomor </td><td>  30 </td><td>  Interval waktu dalam detik untuk memperoleh agregasi statistik dari sumber data metrik. </td></tr></tbody></table></div><br>  Metode yang digunakan adalah migrasi. <br><br>  <b>Optimalisasi Aliran Udara</b> - optimalkan mode ventilasi.  Strategi sendiri - Aliran Udara Seragam menggunakan migrasi langsung.  Strategi memulai migrasi mesin virtual setiap kali aliran udara dari kipas server melebihi ambang yang ditentukan. <br><br>  Agar berhasil, strateginya membutuhkan: <br><br><ul><li>  Perangkat keras: menghitung node &lt;dengan dukungan NodeManager 3.0; </li><li>  Setidaknya dua node komputasi; </li><li>  Komponen ceilometer-agent-compute dan Ceilometer API yang dipasang dan dikonfigurasikan pada setiap node komputasi dapat berhasil melaporkan metrik seperti aliran udara, daya sistem, dan suhu saluran masuk: </li></ul><br><div class="scrollable-table"><table><tbody><tr><td>  <b>metrik</b> </td><td>  <b>layanan</b> </td><td>  <b>plugin</b> </td><td>  <b>komentar</b> </td></tr><tr><td>  <b>hardware.ipmi.node.airflow</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  IPMI </td><td></td></tr><tr><td>  <b>hardware.ipmi.node.temperature</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  IPMI </td><td></td></tr><tr><td>  <b>hardware.ipmi.node.power</b> </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ceilometer</a> </td><td>  IPMI </td><td></td></tr></tbody></table></div><br>  Agar strategi berjalan, Anda memerlukan server dengan Intel Power Node Manager 3.0 atau yang lebih baru yang diinstal dan dikonfigurasi. <br><br>  Keterbatasan: Konsep ini tidak dimaksudkan untuk produksi. <br><br>  Diusulkan untuk menggunakan algoritma ini dengan audit kontinu, karena hanya satu mesin virtual yang direncanakan akan dimigrasi per iterasi. <br><br>  Migrasi langsung dimungkinkan. <br><br>  Opsi Strategi: <br><div class="scrollable-table"><table><tbody><tr><td>  <b>parameter</b> </td><td>  <b>jenis</b> </td><td>  <b>secara default</b> </td><td>  <b>deskripsi</b> </td></tr><tr><td>  <b>threshold_airflow</b> </td><td>  Nomor </td><td>  400.0 </td><td>  Ambang aliran udara untuk Unit migrasi adalah 0,1CFM </td></tr><tr><td>  <b>threshold_inlet_t</b> </td><td>  Nomor </td><td>  28.0 </td><td>  Ambang batas suhu masuk untuk keputusan migrasi </td></tr><tr><td>  <b>threshold_power</b> </td><td>  Nomor </td><td>  350.0 </td><td>  Ambang daya sistem untuk keputusan migrasi </td></tr><tr><td>  <b>periode</b> </td><td>  Nomor </td><td>  30 </td><td>  Interval waktu dalam detik untuk memperoleh agregasi statistik dari sumber data metrik. </td></tr></tbody></table></div><br>  Metode yang digunakan adalah migrasi. <br><br>  <b>Pemeliharaan Perangkat Keras</b> - pemeliharaan perangkat keras.  Strategi yang terkait dengan tujuan ini adalah migrasi Zona.  Strategi ini adalah alat untuk migrasi otomatis yang efisien dan minimal mesin dan disk virtual jika terjadi pemeliharaan perangkat keras.  Strategi membangun rencana tindakan sesuai dengan bobot: satu set tindakan yang memiliki bobot lebih akan direncanakan di depan yang lain.  Ada dua opsi konfigurasi: bobot tindakan (action_weights) dan paralelisasi. <br><br>  Keterbatasan: perlu untuk menyesuaikan bobot tindakan dan paralelisasi. <br><br>  Opsi Strategi: <br><div class="scrollable-table"><table><tbody><tr><td>  <b>parameter</b> </td><td>  <b>jenis</b> </td><td>  <b>secara default</b> </td><td>  <b>deskripsi</b> </td></tr><tr><td>  <b>compute_nodes</b> </td><td>  array </td><td>  Tidak ada </td><td>  Komputasi node untuk migrasi. </td></tr><tr><td>  <b>storage_pools</b> </td><td>  array </td><td>  Tidak ada </td><td>  Node penyimpanan untuk migrasi. </td></tr><tr><td>  <b>parallel_total</b> </td><td>  bilangan bulat </td><td>  6 </td><td>  Jumlah total tindakan yang harus dilakukan secara paralel. </td></tr><tr><td>  <b>parallel_per_node</b> </td><td>  bilangan bulat </td><td>  2 </td><td>  Jumlah tindakan yang dilakukan secara paralel untuk setiap node komputasi. </td></tr><tr><td>  <b>parallel_per_pool</b> </td><td>  bilangan bulat </td><td>  2 </td><td>  Jumlah tindakan yang dilakukan secara paralel untuk setiap kumpulan penyimpanan. </td></tr><tr><td>  <b>prioritas</b> </td><td>  objek </td><td>  Tidak ada </td><td>  Daftar prioritas untuk mesin dan disk virtual. </td></tr><tr><td>  <b>dengan_attached_volume</b> </td><td>  boolean </td><td>  Salah </td><td>  Salah - mesin virtual akan dimigrasi setelah semua drive dimigrasikan.  Mesin virtual - benar akan dimigrasi setelah migrasi semua drive yang dipetakan. </td></tr></tbody></table></div><br>  Elemen-elemen array node komputasi: <br><div class="scrollable-table"><table><tbody><tr><td>  <b>parameter</b> </td><td>  <b>jenis</b> </td><td>  <b>secara default</b> </td><td>  <b>deskripsi</b> </td></tr><tr><td>  <b>src_node</b> </td><td>  tali </td><td>  Tidak ada </td><td>  Komputasi node dari mana mesin virtual dimigrasikan (wajib). </td></tr><tr><td>  <b>dst_node</b> </td><td>  tali </td><td>  Tidak ada </td><td>  Hitung simpul yang bermigrasi mesin virtual. </td></tr></tbody></table></div><br>  Elemen array node penyimpanan: <br><div class="scrollable-table"><table><tbody><tr><td>  <b>parameter</b> </td><td>  <b>jenis</b> </td><td>  <b>secara default</b> </td><td>  <b>deskripsi</b> </td></tr><tr><td>  <b>src_pool</b> </td><td>  tali </td><td>  Tidak ada </td><td>  Kumpulan penyimpanan tempat disk dimigrasikan (wajib). </td></tr><tr><td>  <b>dst_pool</b> </td><td>  tali </td><td>  Tidak ada </td><td>  Kumpulan penyimpanan tempat disk dimigrasikan. </td></tr><tr><td>  <b>src_type</b> </td><td>  tali </td><td>  Tidak ada </td><td>  Jenis disk asli (wajib). </td></tr><tr><td>  <b>dst_type</b> </td><td>  tali </td><td>  Tidak ada </td><td>  Jenis final drive (wajib). </td></tr></tbody></table></div><br>  Elemen objek prioritas: <br><div class="scrollable-table"><table><tbody><tr><td>  <b>parameter</b> </td><td>  <b>jenis</b> </td><td>  <b>secara default</b> </td><td>  <b>deskripsi</b> </td></tr><tr><td>  <b>proyek</b> </td><td>  array </td><td>  Tidak ada </td><td>  Nama-nama proyek. </td></tr><tr><td>  <b>compute_node</b> </td><td>  array </td><td>  Tidak ada </td><td>  Nama node komputasi. </td></tr><tr><td>  <b>storage_pool</b> </td><td>  array </td><td>  Tidak ada </td><td>  Nama-nama kolam penyimpanan. </td></tr><tr><td>  <b>menghitung</b> </td><td>  enum </td><td>  Tidak ada </td><td>  Parameter mesin virtual ["vcpu_num", "mem_size", "disk_size", "Created_at"]. </td></tr><tr><td>  <b>penyimpanan</b> </td><td>  enum </td><td>  Tidak ada </td><td>  Opsi disk ["ukuran", "Created_at"]. </td></tr></tbody></table></div><br>  Metode yang digunakan - migrasi mesin virtual, migrasi disk. <br><br>  <b>Unclassified</b> adalah tujuan pendukung yang digunakan untuk memfasilitasi pengembangan strategi.  Itu tidak mengandung spesifikasi dan dapat digunakan kapan pun strategi belum terhubung dengan tujuan yang ada.  Tujuan ini juga dapat digunakan sebagai tahap transisi.  Strategi terkait adalah Aktuator. <br><br><h2>  Buat tujuan baru </h2><br>  <b>Watcher Decision Engine</b> memiliki antarmuka plug-in "tujuan eksternal" yang memungkinkan Anda untuk mengintegrasikan tujuan eksternal yang dapat dicapai menggunakan strategi. <br><br>  Sebelum membuat tujuan baru, Anda harus memastikan bahwa tidak ada tujuan yang ada memenuhi kebutuhan Anda. <br><br><h3>  Buat plugin baru </h3><br>  Untuk membuat target baru, Anda harus: memperluas kelas target, menerapkan metode kelas <b>get_name ()</b> untuk mengembalikan pengidentifikasi unik untuk target baru yang ingin Anda buat.  Pengidentifikasi unik ini harus cocok dengan nama titik masuk yang Anda nyatakan nanti. <br><br>  Selanjutnya, Anda perlu menerapkan metode kelas <b>get_display_name ()</b> untuk mengembalikan nama tampilan yang diterjemahkan dari target yang ingin Anda buat (jangan gunakan variabel untuk mengembalikan string yang diterjemahkan sehingga dapat dikumpulkan secara otomatis oleh alat terjemahan.). <br><br>  Terapkan metode kelas <b>get_translate_display_name ()</b> untuk mengembalikan kunci terjemahan (sebenarnya nama tampilan bahasa Inggris) dari target baru Anda.  Nilai kembali harus cocok dengan string yang diterjemahkan ke dalam get_display_name (). <br><br>  Terapkan metode <b>get_efficacy_specification ()</b> untuk mengembalikan spesifikasi kinerja untuk tujuan Anda.  Metode get_efficacy_specification () mengembalikan instance Unclassified () yang disediakan oleh Watcher.  Spesifikasi kinerja ini berguna dalam proses mengembangkan tujuan Anda karena memenuhi spesifikasi kosong. <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lebih detail di sini</a> <br><br>  Pengamat Arsitektur (info lebih lanjut di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> ). <br><br><img src="https://habrastorage.org/webt/q7/ei/fb/q7eifbf7zjvdiwm3cna7ipzttyq.png"><br><br><h3>  Komponen </h3><br><img src="https://habrastorage.org/webt/rx/fv/om/rxfvom9yai_at5zt7bwlxs4ole0.png"><br><br>  <b>API Watcher</b> - komponen yang mengimplementasikan REST API yang disediakan oleh Watcher.  Mekanisme interaksi: CLI, plugin Horizon, Python SDK. <br><br>  <b>Watcher DB</b> - database Watcher. <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Watcher Applier</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - komponen yang mengimplementasikan implementasi rencana aksi yang dibuat oleh komponen Watcher Decision Engine. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Watcher Decision Engine</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah komponen yang bertanggung jawab untuk menghitung serangkaian tindakan optimisasi potensial untuk memenuhi tujuan audit. Jika strategi tidak ditentukan, komponen secara mandiri memilih yang paling cocok. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penerbit Metrik Penerbit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah komponen yang mengumpulkan dan menghitung beberapa metrik atau peristiwa dan menerbitkannya di titik akhir CEP. Fungsionalitas fitur juga dapat disediakan oleh penerbit Ceilometer. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mesin Pemroses Kejadian Kompleks (CEP)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Mesin untuk pemrosesan acara yang kompleks. </font><font style="vertical-align: inherit;">Untuk alasan kinerja, mungkin ada beberapa contoh Mesin CEP berjalan pada saat yang sama, masing-masing menangani jenis metrik / peristiwa tertentu. </font><font style="vertical-align: inherit;">Dalam sistem Watcher, CEP meluncurkan dua jenis tindakan: - menulis peristiwa / metrik yang sesuai ke basis data deret waktu; </font><font style="vertical-align: inherit;">- mengirim peristiwa yang relevan ke komponen Mesin Pengamat Pengamat ketika peristiwa ini dapat memengaruhi hasil strategi pengoptimalan saat ini, karena klaster Openstack bukan sistem statis. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interaksi komponen dilakukan sesuai dengan protokol AMQP. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengkonfigurasi Pengamat</font></font></a> <br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Skema interaksi dengan Watcher </font></font></h3><br><img src="https://habrastorage.org/webt/_w/0a/di/_w0adiqerc6ar47nhdoitlh1uje.png"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hasil Tes Pengamat </font></font></h2><br><ol><li>   Optimization — Action plans 500  (   Queens,       ),    ,       ,   . </li><li>   Action details ,        (   Queens,       ). </li><li>    Dummy ()    ,   . </li><li>    Unclassified  ,               . </li><li>    Workload Balancing ( Storage Capacity balance)  ,     .     . </li><li>    Workload Balancing ( Workload Balance Migration Strategy)  ,     . </li><li>    Workload Balancing ( Workload Stabilization Strategy)  . </li><li>    Noisy Neighbor  ,     . </li><li>    Hardware maintenance  ,        (  ,      ). </li><li>    nova.conf ( default  compute_monitors = cpu.virt_driver)        . </li><li>    Server Consolidation ( Basic)    . </li><li>    Server Consolidation ( VM workload consolidation)   .      .  ,  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> . <br>    - Watcher (  —       Optimization,     -   ): <br><br> [watcher_strategies.basic] <br> datasource = ceilometer, gnocchi </li><li>    Saving Energy   .   ,  -   Ironic,     baremetal service. </li><li>    Thermal Optimization   .   ,    Server Consolidation ( VM workload consolidation) (  ) </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Audit untuk Optimasi Aliran Udara gagal. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesalahan penyelesaian audit berikut juga ditemukan. </font><font style="vertical-align: inherit;">Traceback di log decision-engine.log (status cluster tidak ditentukan). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">→ Diskusi kesalahan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di sini</font></font></a> <br><br><h2>  Kesimpulan </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hasil dari penelitian dua bulan kami adalah kesimpulan yang jelas bahwa untuk mendapatkan sistem penyeimbangan beban kerja yang lengkap, kami harus bekerja erat dalam menyelesaikan alat untuk platform Openstack. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Watcher telah membuktikan dirinya sebagai produk yang serius dan berkembang pesat dengan potensi yang sangat besar, untuk penggunaan penuh yang membutuhkan banyak pekerjaan serius. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tetapi lebih banyak tentang itu di artikel siklus berikutnya.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id461483/">https://habr.com/ru/post/id461483/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id461467/index.html">Contoh membuat aplikasi Makefile for Go</a></li>
<li><a href="../id461469/index.html">Bagaimana rasanya mendengarkan kode dengan 1000 kata per menit</a></li>
<li><a href="../id461471/index.html">.NET - Alat untuk bekerja dengan multithreading dan asynchrony - Bagian 2</a></li>
<li><a href="../id461473/index.html">Algoritma debugging pada grafik - sekarang dengan gambar</a></li>
<li><a href="../id461475/index.html">AMA dengan Habr. 1011</a></li>
<li><a href="../id461487/index.html">Tugas CTF Mini</a></li>
<li><a href="../id461493/index.html">Django 3.0 akan tidak sinkron</a></li>
<li><a href="../id461497/index.html">Render teks modern di Linux: bagian 1</a></li>
<li><a href="../id461499/index.html">Bahasa apa yang akan diterjemahkan gim Anda di 2019</a></li>
<li><a href="../id461501/index.html">Mengapa di AS mereka sedang menyelidiki pekerjaan perusahaan IT besar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>