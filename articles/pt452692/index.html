<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§õüèº üè∏ üçì O autor do projeto rePalm reescreveu o Palm OS do zero e planeja transform√°-lo em uma plataforma de rel√≥gio inteligente üí∞ üíñ üíâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="E, aparentemente, os rel√≥gios no Palm OS encontrar√£o seu comprador: 





 O Palm OS √© um sistema operacional para computadores de m√£o, que estava no ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O autor do projeto rePalm reescreveu o Palm OS do zero e planeja transform√°-lo em uma plataforma de rel√≥gio inteligente</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452692/"><p>  E, aparentemente, os rel√≥gios no Palm OS encontrar√£o seu comprador: </p><br><p><img src="https://habrastorage.org/webt/c2/xx/aj/c2xxajvrt_rz12zxopisdcckr8s.png" alt="imagem"></p><a name="habracut"></a><br><p>  O Palm OS √© um sistema operacional para computadores de m√£o, que estava no auge de popularidade entre 1998 e a primeira metade dos anos 2000.  √â muito simples e n√£o exige recursos, consome cuidadosamente a energia da bateria e √© extraordinariamente projetado para uso em computadores de m√£o.  Mas em 2004-2005, os dispositivos Palm OS deram lugar aos dispositivos Windows Mobile: </p><br><p><img src="https://habrastorage.org/webt/il/fa/2y/ilfa2y9j6ihdigdcum8yvbabrdu.png" alt="imagem"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=http://web.archive.org/web/20140122150728/">(fonte)</a> </p><br><p>  Isso aconteceu por v√°rios motivos, em parte devido a erros de gerenciamento e em parte devido √†s peculiaridades do pr√≥prio sistema operacional: em 2004, o Palm OS arrastou uma longa cauda de compatibilidade com vers√µes anteriores, o que impediu o desenvolvimento e o avan√ßo.  O que valia, por exemplo, a falta de prote√ß√£o de mem√≥ria: um erro no aplicativo poderia levar a um congelamento ou falha de todo o sistema operacional, como nos dias do Windows 9x ou Mac OS 9. Ou implementa√ß√£o do sistema de arquivos: os arquivos eram armazenados como registros no banco de dados e o tamanho de um registro n√£o pode exceder 64 kilobytes.  Provavelmente, em 1996, essa foi uma boa solu√ß√£o, mas esse sistema de armazenamento de dados n√£o foi adaptado para grandes arquivos multim√≠dia e cart√µes de mem√≥ria que apareceram mais tarde. </p><br><p>  Bem, voc√™ n√£o pode ignorar a mudan√ßa de arquitetura no Palm OS 5.0 do Motorola 68k para o ARM.  Em seguida, para compatibilidade com aplicativos mais antigos, um tradutor bin√°rio foi adicionado ao sistema operacional, que rapidamente transcodificou as instru√ß√µes do M68k para o ARM.  Em princ√≠pio, mesmo com essa camada, aplicativos antigos funcionavam em novos processadores n√£o t√£o ruins quanto em seus 68K nativos, j√° que as chamadas do sistema Palm OS eram feitas de forma nativa no ARM, e a perda de desempenho da transmiss√£o foi compensada por um aumento de v√°rias vezes na frequ√™ncia de novos processadores em compara√ß√£o com o Motorola Dragonball.  O verdadeiro problema era que os desenvolvedores n√£o obtiveram as ferramentas para criar aplicativos ARM nativos.  O c√≥digo do Palm OS 5 ainda foi compilado para 68k, e at√© aplicativos padr√£o funcionaram na camada do tradutor. </p><br><p>  No entanto, apesar dos muitos recursos arquitet√¥nicos do Palm OS, seus pontos fortes n√£o deixaram de ser pontos fortes.  Ainda √© um sistema simples, de baixo n√≠vel e baixo recurso.  Em 2015, usei o Palm Pilot com um processador de 16 MHz como planejador di√°rio e fiquei completamente √† vontade!  Al√©m disso, muitos adoraram esse sistema precisamente pela simplicidade e muitos tinham aplicativos b√°sicos suficientes.  Leitores, jogadores, di√°rios e planejadores, jogos - tudo isso existe em abund√¢ncia no Palm OS.  Voc√™ pode encontrar aplicativos para este sistema operacional hoje. </p><br><p>  Portanto, ap√≥s tantos anos, a comunidade de f√£s desse sistema sobreviveu, que suporta sites com aplicativos, mant√©m seu pr√≥prio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">subreddit</a> e continua a usar palmeiras. </p><br><p><img src="https://habrastorage.org/webt/ib/gk/vq/ibgkvqijcdsfypa9a3phthhbsai.png" alt="imagem"></p><br><p>  Mas um dos membros da comunidade foi al√©m, decidindo transferir o Palm OS para um hardware mais moderno e encontrar um aplicativo √∫til para este projeto. </p><br><p>  Dmitry Greenberg, programador do Google, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cria ajustes e hacks</a> para dispositivos Palm OS desde 2003, incluindo o WarpSpeed, um programa para overclock de PDAs, e o PowerSDHC, um driver para cart√µes de mem√≥ria SDHC. </p><br><p>  No Google, Dmitry lidava principalmente com sistemas embarcados.  Em particular, ele participou do desenvolvimento do sistema operacional do smartwatch Android Wear, do media player Nexus Q e da plataforma Android TV. </p><br><p>  Depois de se aposentar do Google, Dmitry decidiu criar uma plataforma para rel√≥gios inteligentes baseada no Palm OS 5.x, o sistema operacional que foi atualizado pela √∫ltima vez h√° 15 anos: </p><br><p><img src="https://habrastorage.org/webt/m5/7w/rb/m57wrbhj1hkktiqmam5sl3kwuji.png" alt="imagem"></p><br><p>  √Ä primeira vista, o plano √© excelente: √© improv√°vel que as plataformas modernas de rel√≥gios inteligentes possam ser comparadas ao Palm OS em termos de consumo de recursos e dura√ß√£o da bateria. </p><br><p>  O problema √© que os c√≥digos-fonte do Palm OS nunca foram publicados.  Sim, alguns c√≥digos-fonte apareceram em dom√≠nio p√∫blico nos livros did√°ticos de desenvolvimento de aplicativos, mas isso n√£o √© suficiente.  A fonte era para o PalmSource e para os licenciados, principalmente empresas que lan√ßavam seus dispositivos no Palm OS - em termos da NDA, √© claro.  Portanto, n√£o √© poss√≠vel encontrar o c√≥digo-fonte desse sistema operacional depois de tantos anos, e a legalidade de seu uso estar√° em quest√£o. </p><br><p>  Ainda existe um caminho dif√≠cil e dif√≠cil para os entusiastas mais exigentes com for√ßa de vontade em concreto armado: engenharia reversa.  Foi esse caminho que Dmitry escolheu, gradualmente, em v√°rias etapas, implementando seu plano. </p><br><p>  Primeiro, voc√™ deve escrever uma ferramenta para descompactar imagens ROM de dispositivos Palm OS.  Em seguida, foi necess√°rio desmontar os principais componentes do sistema operacional obtidos a partir da imagem descompactada.  Ent√£o - o trabalho mais longo e mon√≥tono - voc√™ deve entender a l√≥gica das fun√ß√µes da API do sistema e escrever suas pr√≥prias implementa√ß√µes dessas fun√ß√µes.  E o mais dif√≠cil √© escrever o kernel do sistema operacional, j√° que os existentes (por exemplo, linux) n√£o suportam algumas fun√ß√µes do kernel do Palm OS (suspens√£o de threads, ativa√ß√£o / desativa√ß√£o de multitarefas preemptivas). </p><br><p>  Voc√™ pode ler o hist√≥rico completo da reescrita do Palm OS a partir do zero <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no blog de Dmitry. Analisarei</a> apenas brevemente a implementa√ß√£o das etapas principais.  Dmitry levou v√°rios meses para implementar APIs do sistema, o que seria suficiente para carregar o sistema operacional.  Mais algumas semanas - para engenharia reversa do subsistema gr√°fico e dois meses - para escrever c√≥digo para dar suporte ao desenho.  Nesse ponto, a funcionalidade implementada era suficiente para iniciar o sistema operacional sobre o kernel do linux no QEMU e carregar uma imagem de algum dispositivo Palm OS nesse ambiente. </p><br><p><img src="https://habrastorage.org/webt/g5/4v/cz/g54vczuq1nui6hym_pq81thsyeu.png" alt="bota * PRIMEIRA * da rePalm (c) Dmitry Grinberg"><br>  <em>Primeira</em> inicializa√ß√£o do rePalm (c) Dmitry Grinberg </p><br><p>  Para passar de um emulador para um hardware real, ainda era necess√°rio resolver muitos problemas: escolha uma plataforma de hardware de trabalho est√°vel e bem documentada, escreva o kernel do SO para a arquitetura selecionada, escreva um tradutor ARM no Thumb (o processador Cortex-M4 selecionado por Dmitry suporta apenas instru√ß√µes Thumb de byte duplo, nesse momento enquanto muitos componentes do Palm OS usam instru√ß√µes ARM completas de 4 bytes) e escrevem um compilador JIT (!!!) para que a tradu√ß√£o dupla M68k -&gt; ARM -&gt; Thumb funcione a uma velocidade adequada. </p><br><p>  Ap√≥s um ano de desenvolvimento ativo, o rePalm √© lan√ßado na placa de depura√ß√£o STM32F429, os gr√°ficos, a tela sens√≠vel ao toque e o cart√£o SD funcionam, a sincroniza√ß√£o via HotSync funciona e a maioria dos aplicativos e jogos escritos no Palm OS 5.x funcionam muito bem.  Os planos incluem suporte para Wi-Fi e Bluetooth, suporte para som e conex√£o do dispositivo via USB no modo de armazenamento em massa e atualiza√ß√£o da biblioteca SSL.  Dmitry complementa sua <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">postagem no blog √†</a> medida que se desenvolve e tamb√©m publica regularmente atualiza√ß√µes de projetos no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sub-editor</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">r / Palm</a> . </p><br><p><img src="https://habrastorage.org/webt/lg/0t/on/lg0tongxj9ud2h6on5uzuvjoszy.png" alt="imagem"><br>  c) Dmitry Grinberg </p><br><hr><br><p>  √â bom acompanhar o trabalho de uma pessoa apaixonada e observar como um projeto interessante e ambicioso se desenvolve.  Mas vale lembrar que Dmitry √© principalmente um engenheiro e programador.  Para ele, a solu√ß√£o para um problema de engenharia (alinhar o Palm OS ao mundo moderno) √© maior do que criar um produto comercial, seja um rel√≥gio inteligente ou qualquer outra coisa.  Estou certo de que o projeto ter√° muitas aplica√ß√µes interessantes, mas √© dif√≠cil dizer o que acontecer√° a seguir e se veremos a vers√£o moderna do Fossil WristPDA.  Resta desejar boa sorte a Dmitry e acompanhar o desenvolvimento do rePalm. </p><br><p><img src="https://habrastorage.org/webt/fl/ck/if/flckifrdmi5qdxa4rrnsgotps30.png" alt="imagem"><br>  c) Dmitry Grinberg </p><br><p>  PS Agradecemos a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Newbilius</a> pela id√©ia de publicar este artigo aqui no blog.  Mais pessoas devem saber sobre projetos t√£o legais! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt452692/">https://habr.com/ru/post/pt452692/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt452682/index.html">Previs√£o e discuss√£o: os sistemas h√≠bridos de armazenamento dar√£o lugar a todos os tipos de flash</a></li>
<li><a href="../pt452684/index.html">Desenvolvendo um jogo no Svelte 3</a></li>
<li><a href="../pt452686/index.html">Espionagem pela qual eles n√£o pro√≠bem (uma hist√≥ria dos anos 80)</a></li>
<li><a href="../pt452688/index.html">Servi√ßo do Windows. Procure por erros do sistema e exiba-os no WinForm C #</a></li>
<li><a href="../pt452690/index.html">O que h√° de t√£o interessante na Ferrovia Transiberiana?</a></li>
<li><a href="../pt452696/index.html">Como iniciar micropagamentos em seu aplicativo</a></li>
<li><a href="../pt452698/index.html">Dois em um: dados tur√≠sticos e ingressos para eventos culturais estavam dispon√≠veis ao p√∫blico</a></li>
<li><a href="../pt452700/index.html">Not√≠cias do mundo do OpenStreetMap No. 460 (7 de maio de 2019 a 13 de maio de 2019)</a></li>
<li><a href="../pt452702/index.html">Testes para c√≥digo e c√≥digo para testes</a></li>
<li><a href="../pt452704/index.html">Depura√ß√£o post-mortem no Cortex-M</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>