<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶Ñ üßöüèæ ‚úãüèª Transpilador PAS2JS de Pascal a JavaScript: incompatible con Delphi y soluciones alternativas ‚è´ üõéÔ∏è üë©üèº‚Äçüè´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy en d√≠a, en el bolsillo de una persona com√∫n se encuentra una poderosa computadora personal, con la que solo se pod√≠a so√±ar hace 10-20 a√±os. Y si t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Transpilador PAS2JS de Pascal a JavaScript: incompatible con Delphi y soluciones alternativas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436920/"><p> Hoy en d√≠a, en el bolsillo de una persona com√∫n se encuentra una poderosa computadora personal, con la que solo se pod√≠a so√±ar hace 10-20 a√±os.  Y si tiene kil√≥metros de c√≥digo de Windows depurado y aplicaciones y utilidades perfectamente funcionales escritas en Delphi, seguramente querr√° usar esta riqueza para el desarrollo m√≥vil.  Y tambi√©n la experiencia adquirida durante la programaci√≥n en Windows.  PAS2JS lo ayudar√° a combinar dos mundos: el desarrollo para Windows y la creaci√≥n de aplicaciones web y m√≥dulos Node.js. </p><br><p>  Algunas de las dificultades descubiertas de la experiencia personal se discuten en este art√≠culo. </p><a name="habracut"></a><br><h1>  ¬øPor qu√© no simplemente aprender JavaScript y escribir aplicaciones web en √©l? </h1><br><p>  He aprendido JavaScript lo suficientemente bien.  Pero primero, programar para la Web es m√°s que solo conocer el idioma.  En segundo lugar, la capacidad de escribir un c√≥digo para diferentes plataformas no tiene precio.  Puede depurar m√≥dulos de aplicaci√≥n en Delphi IDE utilizando su potente depurador y editor, y luego, agregando los enlaces necesarios, obtenga una aplicaci√≥n de trabajo preparada para el sitio.  Y cuando corrija el error o agregue nuevas funcionalidades a la aplicaci√≥n para Windows, ser√° suficiente simplemente recompilar los m√≥dulos JavaScript en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PAS2JS</a> . </p><br><p>  Cabe se√±alar que si bien PAS2JS no admite todas las caracter√≠sticas del lenguaje Delphi, se enumeran en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio</a> .  Adem√°s, algunos fragmentos de c√≥digo PAS2JS aparentemente simple no se pueden transponer a JavaScript. </p><br><h1>  Dificultades de traducci√≥n </h1><br><p>  Entonces, el nuevo paquete PAS2JS se descarg√≥ de <a href="">FTP</a> , tratamos de recompilar el simple "Hola Mundo" e inmediatamente nos detenemos en: </p><br><pre><code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">uses</span></span> System.SysUtils;</code> </pre> <br><blockquote>  Error: no se puede encontrar la unidad "System.SysUtils" </blockquote><p>  Los paquetes PAS2JS listos para usar, que se pueden encontrar en la carpeta de paquetes, duplican parcialmente las unidades del sistema Delphi.  Pero no tienen un prefijo en el nombre.  La soluci√≥n es simple: elimine el prefijo "Sistema".  del nombre de la unidad.  El programa se compila en Delphi (si no es as√≠, verifique la presencia del prefijo "Sistema" en los Nombres de Alcance de la Unidad, en el men√∫ Delphi Project | Opciones | Delphi Compiler). </p><br><h1>  Tipo de fundici√≥n en constantes </h1><br><p>  PAS2JS no admite la conversi√≥n de tipos en expresiones constantes: </p><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CODE_A = Word(<span class="hljs-string"><span class="hljs-string">'a'</span></span>);</code> </pre> <br><blockquote>  Error: se espera una expresi√≥n constante </blockquote><p>  En el caso de los tipos enumerados, puede intentar cambiar, as√≠, esto va: </p><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CODE_A = Ord(<span class="hljs-string"><span class="hljs-string">'a'</span></span>);</code> </pre> <br><p>  Adem√°s, PAS2JS no comprende las funciones integradas de los idiomas Lo y Hi.  En la definici√≥n de constantes, se pueden reemplazar de la siguiente manera: </p><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> LO_BYTE = $<span class="hljs-number"><span class="hljs-number">1234</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> $FF; <span class="hljs-comment"><span class="hljs-comment">// Lo($1234); HI_BYTE = $1234 shr 8;// Hi($1234);</span></span></code> </pre> <br><h1>  Caracteres y cadenas ANSI </h1><br><p>  Espero que ya haya cambiado a cadenas Unicode en sus proyectos de Delphi.  Si dej√≥ algunas de las l√≠neas en formato ANSI para ahorrar memoria, no se convertir√°n a JavaScript: PAS2JS no conoce los tipos AnsiChar, AnsiString, Utf8String y RawByteString.  Considere reemplazarlos con tipos Unicode, o Byte y Array of Byte. </p><br><p>  Aqu√≠ hay un ejemplo de reemplazo de AnsiChar con Byte: </p><br><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//  procedure TestAnsiCharAndByte1; const SMALL_ENG_LETTERS = ['a'..'z']; CAPITAL_ENG_LETTERS = ['A'..'Z']; var ch: AnsiChar; engs: set of AnsiChar; begin engs := SMALL_ENG_LETTERS + CAPITAL_ENG_LETTERS; ch := 'Z'; if ch in engs then Writeln('It''s an English letter'); end; //  procedure TestAnsiCharAndByte2; const SMALL_ENG_LETTERS = [Ord('a')..Ord('z')]; CAPITAL_ENG_LETTERS = [Ord('A')..Ord('Z')]; var ch: Byte; engs: set of Byte; begin engs := SMALL_ENG_LETTERS + CAPITAL_ENG_LETTERS; ch := Ord('Z'); if ch in engs then Writeln('It''s an English letter'); end;</span></span></code> </pre> <br><h1>  Carta sin vida √≥ </h1><br><p>  Como curiosidad: en polaco hay una letra √≥ - O kreskowane, Unicode # $ 00F3.  Por alguna raz√≥n, a PAS2JS no le gust√≥ y, en algunos casos, no puede percibir una l√≠nea si se incluye esta letra: </p><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> s := #$<span class="hljs-number"><span class="hljs-number">00</span></span>F3<span class="hljs-string"><span class="hljs-string">'abdef'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  s := 'abdef'#$017C; //  s := #$00F3'abdef'#$017C; // Error: Illegal character s := #$00F3; s := s + 'abdef'#$017C; //    end;</span></span></code> </pre> <br><h1>  Declaraci√≥n del caso </h1><br><p>  Una sorpresa repentina yac√≠a en la declaraci√≥n del caso, en la que PAS2JS se neg√≥ a aceptar las letras rusas como opciones: </p><br><pre> <code class="delphi hljs"> ch := <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ch <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>: Writeln(<span class="hljs-string"><span class="hljs-string">' ""'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Error: Incompatible types: got "Char" expected "Char" (???) ''..'': Writeln('   '); // Error: char expected, but string found end;</span></span></code> </pre> <br><p>  La definici√≥n de constantes para las letras rusas necesarias ayud√≥: </p><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ckbA = #$<span class="hljs-number"><span class="hljs-number">410</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  ckbB = #$411; //  ckbYa = #$42F; //  var ch: Char; begin ch := ''; case ch of ckbA: Writeln(' ""'); ckbB..ckbYa: Writeln('   '); end;</span></span></code> </pre> <br><h1>  Conclusiones </h1><br><p>  Logr√© compilar un peque√±o proyecto de Delphi para la Web, haciendo cambios relativamente peque√±os en el c√≥digo fuente del programa, y ‚Äã‚Äãpor el tiempo ahorrado escrib√≠ este art√≠culo.  Las pruebas mostraron que ambas versiones del programa: para Windows y para la Web, funcionan exactamente igual.  Esto es sin duda un √©xito: ahora puedo desarrollar este proyecto finalizando un programa en Delphi y traduci√©ndolo a JavaScript usando PAS2JS. </p><br><p>  En cuanto a las fallas menores identificadas, estoy seguro de que se eliminar√°n r√°pidamente.  Dado que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el proyecto PAS2JS</a> es abierto y gratuito, desarrollado activamente por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la comunidad Free Pascal</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es436920/">https://habr.com/ru/post/es436920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es436910/index.html">Consejos para crear flujos de trabajo personalizados en GitLab CI</a></li>
<li><a href="../es436912/index.html">Tendencias de CRM 2019: divertido de leer, peligroso de creer</a></li>
<li><a href="../es436914/index.html">Problemas de crecimiento de inicio - Monitoreo</a></li>
<li><a href="../es436916/index.html">VShard - escala horizontal en Tarantool</a></li>
<li><a href="../es436918/index.html">Creando un juego para Game Boy, Parte 2</a></li>
<li><a href="../es436922/index.html">Optimizaci√≥n del tiempo de inicio de Prometheus 2.6.0 con pprof</a></li>
<li><a href="../es436924/index.html">Algunas palabras sobre la organizaci√≥n de competiciones de rob√≥tica</a></li>
<li><a href="../es436926/index.html">H√©roes de la autenticaci√≥n de dos factores, o c√≥mo "caminar en la piel de los dem√°s"</a></li>
<li><a href="../es436928/index.html">WebRTC: a√∫n m√°s f√°cil (EasyRTC)</a></li>
<li><a href="../es436934/index.html">Matem√°ticas ingenuas: el motor de Mendocino y el teorema de Earnshaw</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>