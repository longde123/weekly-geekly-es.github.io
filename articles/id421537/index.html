<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛌 👩‍🎓 👏🏼 Fungsi Tingkat Tinggi di JS: Kursus Petarung Muda 🧜🏾 🥞 🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini dimaksudkan untuk seseorang yang mengambil langkah-langkah pemalu di jalur sulit untuk mempelajari JavaScript. Terlepas dari kenyataan bah...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fungsi Tingkat Tinggi di JS: Kursus Petarung Muda</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421537/">  <i>Artikel ini dimaksudkan untuk seseorang yang mengambil langkah-langkah pemalu di jalur sulit untuk mempelajari JavaScript.</i>  <i>Terlepas dari kenyataan bahwa pada tahun 2018, saya menggunakan sintaks ES5 sehingga artikel tersebut dapat dipahami oleh Padawans muda yang mengambil kursus JavaScript Level 1 di HTML Academy.</i> <br><br>  Salah satu fitur yang membedakan JS dari banyak bahasa pemrograman lain adalah bahwa dalam bahasa ini fungsi adalah "objek kelas satu".  Atau, dalam bahasa Rusia, fungsi adalah sebuah makna.  Sama seperti angka, string atau objek.  Kita bisa menulis fungsi ke variabel, kita bisa meletakkannya di array atau di properti objek.  Kami bahkan dapat menambahkan dua fungsi.  Bahkan, tidak ada yang berarti akan datang dari ini, tetapi sebagai fakta - kita bisa! <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">world</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(hello + world); <span class="hljs-comment"><span class="hljs-comment">//  ,  ,   //   ,    </span></span></code> </pre> <br>  Yang paling menarik adalah kita dapat membuat fungsi yang beroperasi pada fungsi lain - menerimanya sebagai argumen atau mengembalikannya sebagai nilai.  Fungsi semacam itu disebut <i>fungsi tingkat tinggi</i> .  Dan hari ini kita, anak perempuan dan laki-laki, akan berbicara tentang bagaimana menyesuaikan peluang ini dengan kebutuhan ekonomi nasional.  Sepanjang jalan, Anda akan belajar lebih banyak tentang beberapa fitur fungsi berguna di JS. <br><a name="habracut"></a><br><h3>  Saluran pipa </h3><br>  Katakanlah kita memiliki sesuatu yang Anda butuhkan untuk membuat banyak karya.  Katakanlah pengguna mengunggah file teks yang menyimpan data dalam format JSON, dan kami ingin memproses isinya.  Pertama, kita perlu memangkas karakter spasi putih tambahan, yang bisa "tumbuh" di sekitar tepi sebagai akibat dari tindakan pengguna atau sistem operasi.  Kemudian periksa bahwa tidak ada kode jahat dalam teks (siapa tahu, pengguna ini).  Kemudian beralih dari teks ke objek menggunakan metode <code>JSON.parse</code> .  Kemudian hapus data yang kita butuhkan dari objek ini.  Dan pada akhirnya - kirim data ini ke server.  Anda mendapatkan sesuatu seperti ini: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trim</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">/*  */</span></span>}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sanitize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">/*  */</span></span>}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">/*  */</span></span>}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extractData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">/*  */</span></span>}; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">/*  */</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textFromFile = getTextFromFile(); send(extractData(parse(sanitize(trim(testFromFile))));</code> </pre><br>  Terlihat sangat setuju.  Selain itu, Anda mungkin tidak memperhatikan bahwa ada satu braket penutup yang hilang.  Tentu saja, IDE akan memberi tahu Anda hal ini, tetapi masih ada masalah.  Untuk mengatasinya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">operator baru |&gt;</a> baru-baru ini diusulkan.  Sebenarnya, ini bukan hal baru, tetapi secara jujur ​​meminjam dari bahasa fungsional, tetapi ini bukan intinya.  Dengan menggunakan operator ini, baris terakhir dapat ditulis ulang sebagai berikut: <br><br><pre> <code class="javascript hljs">textFromFile |&gt; trim |&gt; sanitize |&gt; parse |&gt; extractData |&gt; send;</code> </pre><br>  Operator |&gt; mengambil operan kiri dan meneruskannya ke operan kanan sebagai argumen.  Misalnya, <code>"Hello" |&gt; console.log</code> setara dengan <code>console.log("Hello")</code> .  Ini sangat tepat untuk kasus-kasus ketika beberapa fungsi dipanggil sepanjang rantai.  Namun, sebelum pengenalan operator ini, banyak waktu akan berlalu (jika proposal ini diterima sama sekali), tetapi Anda harus hidup entah bagaimana sekarang.  Oleh karena itu, kita dapat menulis fungsi <s>sepeda</s> yang mensimulasikan perilaku ini: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pipe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> args = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = args.shift(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(args.length){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = args.shift(); result = f(result); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } pipe( textFromFile, trim, sanitize, parse, extractData, send );</code> </pre><br>  Jika Anda seorang pemula javascript (javascript? Javascript?), Baris pertama dari fungsi ini mungkin tampak tidak dapat dipahami oleh Anda.  Sederhana: di dalam fungsi, kami menggunakan kata kunci <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">argumen</a> untuk mengakses objek mirip array yang berisi semua argumen yang diteruskan ke fungsi.  Ini sangat nyaman ketika kita tidak tahu sebelumnya berapa banyak argumen yang akan dia miliki.  Objek besar seperti array, tetapi tidak cukup.  Oleh karena itu, kami mengonversinya menjadi array normal menggunakan metode <code>Array.from</code> .  Kode selanjutnya, saya harap, sudah cukup mudah dibaca: kita mulai dari kiri ke kanan untuk mengekstrak elemen dari array dan menerapkannya satu sama lain dengan cara yang sama seperti yang dilakukan oleh operator |&gt;. <br><br><h3>  Penebangan </h3><br>  Berikut adalah contoh lain yang dekat dengan kehidupan nyata.  Misalkan kita sudah memiliki fungsi <code>f</code> yang tidak ... sesuatu yang bermanfaat.  Dan dalam proses pengujian kode kami, kami ingin tahu lebih banyak tentang bagaimana tepatnya melakukannya.  Pada saat apa yang disebut, argumen apa yang diteruskan ke sana, nilai mana yang dikembalikan. <br><br>  Tentu saja, dengan setiap pemanggilan fungsi, kita dapat menulis ini: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = f(a, b); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">" f     "</span></span> + a + <span class="hljs-string"><span class="hljs-string">"  "</span></span> + b + <span class="hljs-string"><span class="hljs-string">"   "</span></span> + result); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">" : "</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now());</code> </pre><br>  Tapi, pertama, agak rumit.  Dan kedua, sangat mudah untuk melupakannya.  Suatu hari kita hanya akan menulis <code>f(a, b)</code> , dan sejak itu kegelapan ketidaktahuan akan menetap di pikiran kita.  Ini akan berkembang dengan setiap tantangan baru, yang tidak kita ketahui. <br><br>  Idealnya, saya ingin logging terjadi secara otomatis.  Sehingga setiap kali Anda memanggil <code>f</code> , semua hal yang kita butuhkan ditulis ke konsol.  Dan, untungnya, kita punya cara untuk melakukan ini.  Memenuhi fitur tatanan baru yang lebih tinggi! <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addLogger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">f</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> args = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = f.apply(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, args); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">" "</span></span> + f.name + <span class="hljs-string"><span class="hljs-string">"     "</span></span> + args.join() + <span class="hljs-string"><span class="hljs-string">"    "</span></span> + result + <span class="hljs-string"><span class="hljs-string">"\n"</span></span> + <span class="hljs-string"><span class="hljs-string">" : "</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + b; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sumWithLogging = addLogger(sum); sum(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   sumWithLogging(1, 2) // </span></span></code> </pre><br>  Fungsi mengambil fungsi dan mengembalikan fungsi yang memanggil fungsi yang diteruskan ke fungsi saat fungsi tersebut dibuat.  Maaf, saya tidak bisa berhenti menulis ini.  Sekarang dalam bahasa Rusia: fungsi <code>addLogger</code> menciptakan <code>addLogger</code> sekitar fungsi yang diteruskan sebagai argumen.  Pembungkus juga merupakan fungsi.  Saat dipanggil, ia mengumpulkan array argumennya dengan cara yang sama seperti yang kami lakukan pada contoh sebelumnya.  Kemudian, menggunakan metode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">apply</a> , ia memanggil fungsi yang dibungkus dengan argumen yang sama dan mengingat hasilnya.  Setelah itu, pembungkus menulis semuanya ke konsol. <br><br>  Di sini kita memiliki kasus serangan man-in-the-middle klasik.  Jika Anda menggunakan pembungkus alih-alih <code>f</code> , maka dari sudut pandang kode yang menggunakannya, praktis tidak ada perbedaan.  Kode dapat berasumsi bahwa ia berkomunikasi dengan <code>f</code> secara langsung.  Sementara itu, pembungkus melaporkan semuanya kepada Kamerad Mayor. <br><br><h3>  Eins, zwei, drei, vier ... </h3><br>  Dan satu tugas lagi yang dekat dengan latihan.  Misalkan kita perlu memberi nomor beberapa entitas.  Setiap kali entitas baru muncul, kami mendapatkan nomor baru untuk itu, satu lebih dari yang sebelumnya.  Untuk melakukan ini, kami memulai fungsi dari formulir berikut: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastNumber = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNewNumber</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lastNumber++; }</code> </pre><br>  Dan kemudian kita memiliki entitas jenis baru.  Katakanlah, sebelum itu, kami memberi nomor kelinci, dan sekarang ada juga kelinci.  Jika Anda menggunakan satu fungsi untuk keduanya dan yang lainnya, maka setiap nomor yang dikeluarkan untuk kelinci akan membuat "lubang" dalam rangkaian angka yang dikeluarkan untuk kelinci.  Jadi, kita membutuhkan fungsi kedua, dan dengan itu variabel kedua: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastHareNumber = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNewHareNumber</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lastHareNumber++; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastRabbitNumber = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNewRabbitNumber</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lastRabbitNumber++; }</code> </pre><br>  Anda merasa kode ini baunya tidak enak?  Saya ingin memiliki sesuatu yang lebih baik.  Pertama, saya ingin dapat mendeklarasikan fungsi tersebut kurang verbose, tanpa menduplikasi kode.  Dan kedua, saya ingin entah bagaimana "mengemas" variabel yang digunakan fungsi ke dalam fungsi itu sendiri agar tidak menyumbat namespace sekali lagi. <br><br><div class="spoiler">  <b class="spoiler_title">Dan kemudian seorang pria masuk, akrab dengan konsep OOP, dan berkata:</b> <div class="spoiler_text">  "Dasar, Watson."  Hal ini diperlukan untuk membuat generator nomor bukan objek, tetapi objek.  Objek hanya dirancang untuk menyimpan fungsi yang bekerja dengan data, bersama dengan data ini.  Lalu kita bisa menulis sesuatu seperti: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> numberGenerator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NumberGenerator(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> n = numberGenerator.get();</code> </pre><br>  Yang akan saya jawab: <br>  - Sejujurnya, saya sepenuhnya setuju dengan Anda.  Dan pada prinsipnya, ini adalah pendekatan yang lebih benar daripada apa yang akan saya tawarkan sekarang.  Tetapi di sini kita memiliki artikel tentang fungsi, bukan tentang OOP.  Jadi bisakah kamu diam sebentar dan biarkan aku menyelesaikannya? <br></div></div><br>  Di sini (kejutan!) Fungsi tingkat tinggi akan membantu kita lagi. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createNumberGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n++; } } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> getNewHareNumber = createNumberGenerator(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> getNewRabbitNumber = createNumberGenerator(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( getNewHareNumber(), getNewHareNumber(), getNewHareNumber(), getNewRabbitNumber(), getNewRabbitNumber(), ); <span class="hljs-comment"><span class="hljs-comment">//    0, 1, 2, 0, 1</span></span></code> </pre><br>  Dan di sini beberapa orang mungkin memiliki pertanyaan, mungkin bahkan dalam bentuk cabul: apa yang sedang terjadi?  Mengapa kita membuat variabel yang tidak digunakan dalam fungsi itu sendiri?  Bagaimana cara fungsi internal mengaksesnya jika fungsi eksternal telah menyelesaikan eksekusi sejak lama?  Mengapa dua fungsi yang dibuat mengacu pada variabel yang sama mendapatkan hasil yang berbeda?  Satu jawaban untuk semua pertanyaan ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">penutupan</a> . <br><br>  Setiap kali fungsi <code>createNumberGenerator</code> , JS interpreter menciptakan hal ajaib yang disebut "konteks eksekusi".  Secara kasar, ini adalah objek di mana semua variabel yang dideklarasikan dalam fungsi ini disimpan.  Kami tidak dapat mengaksesnya sebagai objek javascript biasa, namun demikian. <br><br>  Jika fungsi itu "sederhana" (katakanlah, menambahkan angka), maka setelah akhir kerjanya, konteks eksekusi ternyata tidak berguna.  Apakah Anda tahu apa yang terjadi pada data yang tidak perlu di JS?  Mereka ditelan oleh iblis tak pernah puas bernama Pengumpul Sampah.  Namun, jika fungsi itu "rumit", mungkin saja seseorang masih membutuhkan konteksnya bahkan setelah fungsi ini dijalankan.  Dalam hal ini, Pengumpul Sampah menyelamatkannya, dan dia tetap menggantung di suatu tempat dalam ingatannya, sehingga mereka yang membutuhkannya masih dapat memiliki akses kepadanya. <br><br>  Dengan demikian, fungsi yang dikembalikan oleh <code>createNumberGenerator</code> akan selalu memiliki akses ke salinan variabelnya sendiri <code>n</code> .  Anda dapat menganggapnya sebagai Bag of Holding dari D&amp;D.  Anda memasukkan tangan Anda ke dalam tas dan menemukan diri Anda dalam "saku" interdimensional pribadi di mana Anda dapat menyimpan semua yang Anda inginkan. <br><br><h3>  Debounce </h3><br>  Ada yang namanya "menghilangkan bouncing".  Ini adalah saat kita tidak ingin beberapa fungsi dipanggil terlalu sering.  Misalkan ada tombol tertentu, mengklik yang meluncurkan proses "mahal" (panjang, atau memakan banyak memori, atau Internet, atau mengorbankan perawan).  Mungkin saja pengguna yang tidak sabar mulai mengklik tombol ini dengan frekuensi lebih dari sepuluh hertz.  Selain itu, proses tersebut memiliki sifat yang tidak masuk akal untuk menjalankannya sepuluh kali berturut-turut, karena hasil akhirnya tidak akan berubah.  Saat itulah kami menerapkan "penghapusan obrolan". <br><br>  Esensinya sangat sederhana: kami melakukan fungsi tidak segera, tetapi setelah beberapa waktu.  Jika sebelum waktu ini berlalu, fungsinya dipanggil lagi, kita “reset timer”.  Dengan demikian, pengguna dapat mengklik tombol setidaknya seribu kali - hanya satu yang diperlukan untuk pengorbanan.  Namun, lebih sedikit kata, lebih banyak kode: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">debounce</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">f, delay</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastTimeout; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(lastTimeout){ clearTimeout(lastTimeout); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> args = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>); lastTimeout = setTimeout(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ f.apply(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, args); }, delay); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sacrifice</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(name + <span class="hljs-string"><span class="hljs-string">"     * *"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sacrificeDebounced</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">debounce</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">sacrifice, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">500</span></span></span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sacrificeDebounced</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sacrificeDebounced</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sacrificeDebounced</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span></span><span class="hljs-function">);</span></span></code> </pre><br>  Dalam setengah detik Lena akan dikorbankan, dan Katya dan Sveta akan selamat berkat fungsi magis kami. <br><br>  Jika Anda hati-hati membaca contoh sebelumnya, Anda harus memiliki pemahaman yang baik tentang bagaimana semuanya bekerja di sini.  Fungsi wrapper yang dibuat oleh <code>debounce</code> memicu eksekusi yang tertunda dari fungsi asli menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">setTimeout</a> .  Dalam hal ini, pengidentifikasi waktu habis disimpan dalam variabel lastTimeout, yang dapat diakses oleh pembungkus karena penutupan.  Jika pengidentifikasi batas waktu sudah ada dalam variabel ini, pembungkus membatalkan batas waktu ini dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">clearTimeout</a> .  Jika batas waktu sebelumnya telah selesai, maka tidak ada yang terjadi.  Jika tidak, jauh lebih buruk baginya. <br><br>  Tentang ini, mungkin, aku akan berakhir.  Saya harap hari ini Anda belajar banyak hal baru, dan yang paling penting - Anda memahami semua yang Anda pelajari.  Sampai jumpa lagi. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id421537/">https://habr.com/ru/post/id421537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id421527/index.html">Siaran peluncuran proyek "Server di awan"</a></li>
<li><a href="../id421529/index.html">Netflix, Uber, Google dan Anda di MBLT DEV 2018</a></li>
<li><a href="../id421531/index.html">Bagaimana mengintegrasikan ReactJS ke dalam 1C-Bitrix dengan pembuatan templat secara otomatis di back-end menggunakan contoh jaringan Globus</a></li>
<li><a href="../id421533/index.html">Memilih bahasa pemrograman: 3 tips dari seorang programmer dari Apple</a></li>
<li><a href="../id421535/index.html">Petualangan - Elektronik. Di ayunan bersayap di dunia IT</a></li>
<li><a href="../id421543/index.html">Kloning kartu tanpa kontak menggunakan aplikasi seluler</a></li>
<li><a href="../id421545/index.html">Ulasan PocketBook 616 - dompet 2018 paling hemat dengan fungsi backlight</a></li>
<li><a href="../id421547/index.html">Penerimaan Pusat Data Independen</a></li>
<li><a href="../id421549/index.html">Kami sedang menulis dokumentasi teknis: panduan untuk orang awam</a></li>
<li><a href="../id421551/index.html">Menguasai Vuex - Dari Nol ke Pahlawan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>