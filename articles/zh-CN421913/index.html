<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃 🎻 🐼 不知道门罗币中的机密交易或如何转移机密信息 🕡 😗 ⛄️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="我们将继续围绕Monero区块链设备的周期，今天的文章将专门介绍RingCT协议（Ring Secret Transactions），该协议介绍了机密交易和新的环签名。 不幸的是，Internet上几乎没有有关其工作方式的信息，因此我们试图填补这一空白。 



 我们将讨论网络如何使用此协议隐藏传...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>不知道门罗币中的机密交易或如何转移机密信息</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/exante/blog/421913/"> 我们将继续围绕Monero区块链设备的周期，今天的文章将专门介绍RingCT协议（Ring Secret Transactions），该协议介绍了机密交易和新的环签名。 不幸的是，Internet上几乎没有有关其工作方式的信息，因此我们试图填补这一空白。 <br><br><img src="https://habrastorage.org/webt/v9/0l/1g/v90l1gauj3w6ozqk-r2xy4otdrm.jpeg" alt="图片"><br><br> 我们将讨论网络如何使用此协议隐藏传输量，为什么我们拒绝经典的加密货币环签名以及该技术将如何进一步发展。 <br><br> 由于此协议是门罗币中最复杂的技术之一，因此读者将需要有关此区块链设备的基础知识以及椭圆曲线上的密码学浅表知识（要刷新此知识，您可以阅读上一篇有关<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">多重签名的</a>文章的第一章）。 <br><br><h2>  RingCT协议 </h2><br> 对加密货币的可能攻击之一是基于对已发送交易的数量和时间的了解的区块链分析。 它允许 <a name="habracut"></a> 大大缩小了攻击者感兴趣的输出的搜索范围。 为了防止此类分析，Monero引入了一种匿名交易协议，该协议完全隐藏了网络上的传输量。 <br><br> 值得注意的是，隐藏金额的想法并不新鲜。 最早描述它的人之一是比特币核心开发人员Greg Maxwell在他的《 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">保密交易》文章中</a> 。  RingCT的当前实现是对它的修改，可以使用环签名（不使用环签名），因此得名-Ring Confidential Transactions。 <br><br> 除其他事项外，该协议有助于消除混合粉尘输出的问题-少量输出（通常以交易的形式从变化中获得），这会产生比其本身成本更多的问题。 <br><br>  2017年1月，举行了Monero硬分叉网络，允许随意使用机密交易。 同年9月，使用版本6的硬分叉，此类交易成为网络上唯一允许的交易。 <br><br>  RingCT一次使用多种机制：多层可链接的自发匿名组签名（以下称为MLSAG），Pedersen承诺和范围证明（该术语没有确定的俄语翻译）。 <br><br>  RingCT协议引入了两种类型的匿名事务：简单和完全。 当交易使用多个输入时，第一个钱包生成，第二个钱包在相反的情况下生成。 它们在交易金额和MLSAG签名所签名的数据的验证方面有所不同（我们将在下文中详细讨论）。 而且，完全类型的交易可以用任意数量的输入生成，没有根本的区别。 关于这一主题的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">“从零到门罗币为零”</a>一书说，将全部交易限制为一次输入的决定是仓促作出的，将来可能会改变。 <br><br><h2>  MLSAG签名 </h2><br> 回想一下交易的签名输入是什么。 每笔交易都花一些钱并产生。 通过创建交易输出来产生资金（直接类比为钞票），而交易花费的输出（毕竟，在现实生活中我们正在花费钞票）成为输入（小心，在这里很容易混淆）。 <br><br> 入口是指多个出口，但仅花费一个出口，因此创建了一个“烟幕”，使分析翻译历史变得困难。 如果一个事务有多个输入，则可以以矩阵的形式表示这种结构，其中行是输入，列是捏合输出。 为了向网络证明交易花费了其输出（知道其秘密密钥），请使用环签名对输入进行签名。 这样的签名可以保证签名者知道任何列中所有元素的秘密密钥。 <br><br> 机密交易不再使用传统的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">加密纸币</a>环签名，它们已被MLSAG取代，MLSAG是类似的单层环签名<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">LSAG</a>的多输入版本。 <br><br> 之所以称它们为多层，是因为它们一次对多个输入进行签名，每个输入都与其他多个输入混合，也就是说，矩阵是有符号的，而不是一行。 稍后我们将看到，这有助于节省签名的大小。 <br><br> 让我们以交易为例看一下环签名的形成方式，该交易花费2个实际输出，并使用m-1个从区块链到捏合的随机输出。 表示我们花费的输出的公钥 <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gu/4u/9m/gu4u9mnzmc-wpvuc0w10ia4o2gs.png" alt="图片"></div>  ，以及它们的关键图像： <div style="text-align:center;"><img src="https://habrastorage.org/webt/tt/rv/uk/ttrvukvf8qvtgv_kvrv2c1_9kkw.png" alt="图片"></div> 这样，我们得到一个<i>2 x m的</i>矩阵。 首先，我们需要为每对输出计算所谓的挑战： <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xh/ep/_e/xhep_exju8fxgly4qplkkhh34go.png" alt="图片"></div><br> 我们从使用其公钥花费的输出开始计算： <div style="text-align:center;"><img src="https://habrastorage.org/webt/gu/4u/9m/gu4u9mnzmc-wpvuc0w10ia4o2gs.png" alt="图片"></div> 和随机数 <div style="text-align:center;"><img src="https://habrastorage.org/webt/oc/za/qv/oczaqve9gcpaweyhauv8we5qkvy.png" alt="图片"></div> 结果，我们得到了以下值： <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2b/i4/v0/2bi4v0vf-x6anuaqqia8hxbkam8.png" alt="图片"></div> 我们用来计算挑战的 <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nm/6l/fa/nm6lfa818v5mxm-rvfp6hkiuvme.png" alt="图片"></div> 下一对输出（为了更容易理解我们要替换的位置，我们以不同的颜色突出显示了这些值）。 根据第一个插图中给出的公式，将所有以下所有值围成一个圆计算。 最后计算一对实际输出的挑战。 <br><br> 如我们所见，在所有列中，除了包含实际输出的那一列之外，均使用随机生成的数字 <img src="https://habrastorage.org/webt/pu/77/3l/pu773lhxvbedx-4d_uz8e7na6re.png" alt="图片">  。 对于第π列，我们也需要它们。 转换 <img src="https://habrastorage.org/webt/wx/o_/je/wxo_je3mz0ex3ghpq4iberz4ndk.png" alt="图片"> 在s： <div style="text-align:center;"><img src="https://habrastorage.org/webt/rm/i3/1b/rmi31b1tafevtvqrc0y7cs9n768.png" alt="图片"></div><br> 签名本身就是所有这些值的元组： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/v7/eh/1o/v7eh1oxq-ulyfhvbuhjcmkq6i0k.png" alt="图片"></div><br><br> 此外，该数据被写入事务中。 <br><br> 如我们所见，MLSAG仅包含一个质询<i>c <sub>0</sub></i> ，从而节省了签名的大小（该签名已经需要大量空间）。 接下来，使用数据的任何审阅者 <img src="https://habrastorage.org/webt/cu/q4/ll/cuq4lldorotwinlearl5xt1qymq.png" alt="图片">  ，恢复值c <sub>1</sub> ，...，c <sub>m</sub>并验证 <img src="https://habrastorage.org/webt/fa/pl/mo/faplmosl0hctcqabrvmhgsogs-g.png" alt="图片">  。 因此，我们的戒指被关闭，签名通过了验证。 <br><br> 对于full类型的RingCT事务，将在混合输出的矩阵中再增加一行，但是我们将在下面讨论。 <br><br><h2>  Pedersen的承诺 </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用承诺方案</a> （通常使用英文术语-承诺），以便一方可以证明自己知道某个秘密（数字），而无需实际透露它。 例如，您在骨头上扔了一定数量，考虑承诺并将其传递给依赖方。 因此，在透露机密号码时，检查员会独立考虑承诺，从而确保您没有欺骗他。 <br><br> 门罗币承诺用于隐藏转账金额并使用最常见的选项-彼德森承诺。 顺便说一句，一个奇怪的事实-首先，开发人员建议使用通常的捏合方法隐藏金额，即将输出添加到任意金额以引入不确定性，但随后转而使用承诺（这并不是事实，他们节省了交易规模，如下所示）。 <br> 通常，承诺如下： <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xz/vk/l2/xzvkl2nn0_81ne6mcwojadsaeaq.png" alt="图片"></div> 其中<i>C</i>是承诺本身的值， <i>a</i>是要隐藏的数量， <i>H</i>是椭圆曲线上的固定点（附加生成器）， <i>x</i>是隐藏随机生成的因子的任意掩码。 这里需要使用掩码，以使第三方无法通过简单的蛮力选择承诺的价值。 <br><br> 生成新的退出时，钱包会为此计算出一个承诺，而在支出时，它会根据生成的类型采用生成期间计算出的值，或再次对其进行重新计数。 <br><br><h2>  Ringct简单 </h2><br> 对于简单的RingCT交易，为了确保该交易创建的输出等于输入的总和（不是从空中赚钱），第一笔和第二笔的承诺应相同，即： <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/am/0v/4f/am0v4fja8emeembkxosqj1bja0i.png" alt="图片"></div><br> 承诺委员会认为有些不同-没有遮罩： <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bx/8d/lx/bx8dlxo9uoopyxzc7wcwwapg0zk.png" alt="图片"></div>  ，其中<i>a</i>是佣金的金额，可公开获得。 <br><br> 这种方法使我们能够向依赖方证明我们使用了相同的数量而不泄露它们。 <br><br> 为了使事情更清楚，让我们看一个例子。 假设事务在10个和5个XMR上花费了两个输出（即它们成为输入），并生成了三个输出，总共12个XMR：3个，4个和5个XMR。 同时支付3 XMR的佣金。 因此，所花费的金额加上所产生的金额和佣金等于15 XMR。 让我们尝试计算承诺并查看承诺金额的差异（记住数学）： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7b/bf/vr/7bbfvrnobydcnqtxp2vf8s56blq.png" alt="图片"></div><br> 在这里，我们看到方程收敛—我们需要的输入和输出的掩码之和是相同的。 为此，钱包会随机生成<i>x <sub>1</sub> ，y <sub>1</sub> ，y <sub>2</sub>和y <sub>3</sub></i> ，其余的<i>x <sub>2会这样</sub></i>计算： <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_3/y_/qv/_3y_qvyuvc9vrqbrf4ksg3omz0w.png" alt="图片"></div><br> 使用这些蒙版，我们可以向任何检查过的人证明，在不透露金额的情况下，我们产生的资金不会超过我们的支出。 原来是吧？ <br><br><h2>  RingCT已满 </h2><br> 在完整的RingCT交易中，检查转账金额更为复杂。 在这些交易中，钱包不计入入账承诺，而是使用生成承诺时计算出的承诺。 在这种情况下，我们必须假设我们所获得的金额之差不再等于零，而是： <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fp/to/yv/fptoyvgkotfb7lrt6awun-yquq4.png" alt="图片"></div><br>  <i>z</i>是输入和输出的掩码之间的差。 如果我们将<i>zG</i>视为公钥（实际上是），则<i>z</i>是私钥。 因此，我们知道公钥和相应的私钥。 有了这些数据，我们可以将其与揉捏输出的公钥一起用于MLSAG环形签名中： <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hu/s8/ey/hus8eymfhfmvblaa8oacj6uma1e.png" alt="图片"></div><br> 因此，有效的环签名将保证我们知道其中一列的所有私钥，并且仅当交易产生的资金不超过其支出的费用时，我们才能知道最后一行的私钥。 顺便说一下，这是对以下问题的答案：“为什么承诺量的差异没有导致零”-如果<i>zG = 0</i> ，那么我们将使用实际输出打开该列。 <br><br> 但是收款人怎么知道他们寄给他多少钱呢？ 这里的一切都很简单-交易的发送者和接收者使用Diffie-Hellman协议交换密钥，使用接收者的交易密钥和查看密钥，并计算共享机密。 发送者将使用此共享密钥加密的输出总和写入交易数据的特殊字段中。 <br><br><h2> 范围证明 </h2><br> 但是，如果您使用负数作为承诺金额会怎样？ 这可以导致产生额外的硬币！ 这样的结果是不可接受的，因此，我们需要保证我们使用的金额不为负（当然，不披露这些金额，否则会花费很多精力，而且都是徒劳的）。 换句话说，我们必须证明和在区间<i>[0，2 <sup>n</sup> -1]中</i> 。 <br><br> 为此，将每个输出的总和划分为二进制数字，并分别考虑每个数字的承诺。 这是如何发生的，最好考虑一个例子。 <br><br> 假设我们有少量并且适合4位（实际上是64位），并且我们创建了5 XMR量的输出。 我们考虑每个类别的承诺以及全部金额的一般承诺： <div style="text-align:center;"><img src="https://habrastorage.org/webt/py/v3/jj/pyv3jjgxqy7nwgtf39axn_qk_no.png" alt="图片"></div><br> 此外，每个承诺都混合有代理人<i>（C <sub>i</sub> -2 <sup>i</sup> H）</i> ，并由Greg Maxwell在2015年提出的Borromeo环签名（另一个环签名）成对签名（有关更多信息，请参见<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a> ）： <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vt/mu/ve/vtmuvemnrabzcc0hcx9iq6jkz98.png" alt="图片"></div> 一起，这称为范围证明，并确保承诺使用区间<i>[0，2 <sup>n</sup> -1]中的量</i> 。 <br><br><h2> 接下来是什么？ </h2><br> 在当前的实现中，范围证明占用大量空间-每个输出6176字节。 这导致大量交易，并因此导致更高的佣金。 为了减小Monero的交易规模，开发人员正在引入Borromeo签名而不是Borromeo签名-范围证明机制，没有按位承诺。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">根据一些估计</a> ，他们可以将范围证明大小减小到94％。 顺便说一下，在7月中旬，该技术已由Kudelski Security进行了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">审核</a> ，该技术并未发现该技术本身或实施方面的任何重大缺陷。 该技术已经在测试网络中使用，并且有了新的硬分叉，它很可能可以迁移到主网络。 <br><br> 提出您的问题，为有关加密货币技术的新文章提出主题，并在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Facebook上</a>订阅我们的小组以了解我们的事件和出版物。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN421913/">https://habr.com/ru/post/zh-CN421913/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN421901/index.html">不要试图预测明天的问题</a></li>
<li><a href="../zh-CN421903/index.html">TiKV-用于云原生的分布式键值数据库</a></li>
<li><a href="../zh-CN421905/index.html">使用不同的无线耳机六个月：我选择了什么</a></li>
<li><a href="../zh-CN421909/index.html">华为在IFA 2018上：芯片，智能扬声器和跟踪器（文本翻译）</a></li>
<li><a href="../zh-CN421911/index.html">HP iPaq hx4700：五分钟到现在</a></li>
<li><a href="../zh-CN421915/index.html">Dutchsinse Youtube频道地震预报系统概述</a></li>
<li><a href="../zh-CN421917/index.html">丰田向Uber投资5亿美元，出租车服务价值720亿美元</a></li>
<li><a href="../zh-CN421919/index.html">与TM的直线。 v2.0</a></li>
<li><a href="../zh-CN421921/index.html">IT专家为什么应该“知道其他人的生活”？</a></li>
<li><a href="../zh-CN421923/index.html">我们了解设计专业</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>