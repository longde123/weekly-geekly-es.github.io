<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖖🏽 👩🏻‍🔧 👩🏻‍🌾 IPhone SMT Solver 📉 🗒️ 🤟🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Warum einen teuren PC kaufen, wenn Ihr iPhone SMT schneller löst? 

 Die Formel für Erfüllbarkeitsmodulo-Theorien (SMT) ist das Lösbarkeitsproblem für...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IPhone SMT Solver</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429318/">  <b>Warum einen teuren PC kaufen, wenn Ihr iPhone SMT schneller löst?</b> <br><br>  <font color="gray">Die Formel für Erfüllbarkeitsmodulo-Theorien (SMT) ist das Lösbarkeitsproblem für logische Formeln unter Berücksichtigung der ihnen zugrunde liegenden Theorien.</font>  <font color="gray">- <i>Wikipedia</i></font> <br><br>  Vor einigen Tagen habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">getwittert</a> : „Ein interessantes Experiment: Auf dem neuen iPhone arbeitet der Z3-Prover schneller als auf meinem (ziemlich teuren) Desktop-Intel.  Es ist Zeit, alle formalen Forschungsmethoden auf das Telefon zu übertragen. " <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1057682481334218752"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  Ich habe über die unglaublichen Fortschritte gelesen, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Apple-Prozessorentwickler gemacht</a> haben, und dass die Macs bald auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Apples eigene ARM-Prozessoren übertragen werden</a> .  Diese Berichte beziehen sich normalerweise auf einige plattformübergreifende Tests wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Geekbench, um</a> zu demonstrieren, dass die mobilen Prozessoren von Apple den mobilen und Desktop-Prozessoren von Intel nicht unterlegen sind.  Aber ich war immer etwas skeptisch gegenüber diesen plattformübergreifenden Tests (und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">anderen</a> ) - spiegeln sie wirklich die Geschwindigkeit wider, mit der ich echte Aufgaben ausführe, für die ich meinen Mac verwende? <br><a name="habracut"></a><br>  Als Forscher formaler Methoden muss ich regelmäßig einen SMT-Solver ausführen, normalerweise den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Z3-Prover</a> .  Ich habe viel Zeit damit verbracht, die Leistungsmerkmale des Z3 zu studieren.  Es hat einige Funktionen, die in Tests nicht berücksichtigt werden (Z3 ist normalerweise Single-Threaded).  Ich habe kürzlich ein neues <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">iPhone XS</a> mit dem neuesten Apple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">A12</a> Prozessor gekauft.  Und irgendwie, ohne etwas zu tun, entschied ich mich, Z3 in iOS zu kompilieren und zu sehen, wie schnell das neue Telefon (oder ein hypothetischer zukünftiger Mac) funktioniert. <br><br><h1>  Erster Test </h1><br>  Das Cross-Compilieren von Z3 erwies sich als überraschend einfach. Sie müssen nur einige Codezeilen ändern.  Ich habe die Quellen für den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Start von Z3 auf Ihrem eigenen iOS-Gerät veröffentlicht</a> .  Für den Test habe ich einige Fragen aus meiner jüngsten Arbeit zur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Profilerstellung für symbolisches Computing</a> beantwortet: Für jeden Fall wurde die von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rosette</a> generierte SMT extrahiert. <br><br>  Im ersten Test habe ich das iPhone XS mit einem der Desktops verglichen, die auf dem Intel Core i7-7700K laufen - dem besten Intel-Chip für den Verbrauchermarkt, als ich das Auto vor 18 Monaten gebaut habe.  Intel sollte ohne Probleme gewinnen, aber es stellte sich anders heraus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2a/hf/xx/2ahfxxitzxvvmqtwelezih3nako.png"></div><br><br>  In diesem 23-Sekunden-Test war das iPhone XS etwa 11% schneller!  Ich habe dies auf Twitter gemeldet, aber Twitter lässt nicht viel Platz für Details, deshalb werde ich sie hier präsentieren: <br><br><ul><li> Dieser Benchmark ist ein Fragment von <code>QF_BV</code> von SMT, daher löst Z3 diesen Teil mit Bit-Strahlen und SAT-Solver. </li><li>  Das Ergebnis ist ziemlich stabil, selbst wenn Sie den Zyklus zehnmal ausführen: Das iPhone unterstützt diese Leistung und scheint sich aufgrund von Überhitzung nicht zu verlangsamen.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><sup>1</sup></a> <a name="1_1"></a>  .  Trotzdem ist der Benchmark noch recht flüchtig. </li><li>  Mehrere Personen fragten, ob dies auf Nichtdeterminismus zurückzuführen sei.  Vielleicht geht der Löser auf verschiedenen Plattformen aufgrund der Verwendung von Zufallszahlen oder aus einem anderen Grund anders vor?  Aber ich habe die detaillierte Ausgabe von Z3 ziemlich sorgfältig geprüft, und die Ergebnisse lassen sich damit kaum erklären. </li><li>  Auf beiden Systemen lief Z3 4.8.1, das ich mit Clang mit den gleichen Optimierungseinstellungen kompiliert habe.  Ich habe auch Tests auf dem i7-7700K mit vorgefertigten Z3-Binärdateien (die von GCC kompiliert werden) durchgeführt, aber sie sind noch langsamer. </li></ul><br><h1>  Was ist los? </h1><br>  Wie ist das möglich?  Core i7-7700K ist der gleiche Desktop-Prozessor.  Bei einer Single-Threaded-Aufgabe verbraucht es etwa 45 Watt und arbeitet mit einer Frequenz von 4,5 GHz.  Unplugged iPhone dagegen.  Es verbraucht wahrscheinlich nicht einmal 10% dieser Leistung und funktioniert (wir hoffen) irgendwo im 2-GHz-Band.  Darüber hinaus habe ich nach einem Vergleichstest den Bericht über die Verwendung des iPhone-Akkus überprüft: Slack verbrauchte trotz der kürzeren Zeit auf dem Bildschirm viermal mehr Energie als die Z3-Anwendung. <br><br>  Apple bietet nicht genügend Informationen, um die Leistung von Z3 auf dem iPhone zu verstehen, aber zum Glück stellt Intel diese Informationen für seinen Prozessor bereit.  Ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habe eine</a> Weile in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">VTune gestöbert</a> , um Leistungsengpässe beim Starten von Z3 auf dem Desktop zu finden.  Wie von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mat Soos</a> festgestellt, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verbringt</a> der SAT-Solver die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">meiste</a> Zeit mit der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verteilung</a> , die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sehr empfindlich auf den Cache reagiert</a> .  VTune stimmt zu und sagt, dass der Z3 viel Zeit damit verbringt, im Gedächtnis zu warten, wenn er die beobachteten Literale durchläuft.  Der Schlüssel zur Leistung scheint also die Cache-Größe und die Speicherlatenz zu sein.  Dieser Effekt könnte erklären, warum das iPhone in diesem Test so leistungsfähig ist: Der A12-Chip verfügt über einen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">riesigen L2-Cache mit geringer Latenz</a> und scheint nach einem Cache-Fehler im Vergleich zu 7700K auch eine bessere Speicherlatenz zu haben. <br><br><h1>  Der schnelle Fortschritt der Apple-Prozessoren </h1><br>  Um die Ergebnisse zu bestätigen, führte ich ein ausführlicheres Experiment durch und sammelte alle Apple-Geräte, die ich bekommen konnte.  Ich habe mich auch für einen zehnmal längeren Benchmark entschieden (d. H. 4 Minuten auf dem Desktop), um Bedenken hinsichtlich der Bursts bei der Leistung mobiler CPUs auszuräumen. <br><br>  Hier sind die Ergebnisse für diese Geräte (mit Veröffentlichungsdaten) für den A7, Apples ersten 64-Bit-Benutzerprozessor: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gp/up/8x/gpup8x1j4svvnf1oxk1uitesnc4.png"></div><br><br>  Es sollte sofort beachtet werden, dass der i7-7700K-Desktop-Prozessor in diesem längeren Test dem iPhone XS überlegen ist.  Das iPhone ist jedoch unglaublich wettbewerbsfähig und zeigt das Ergebnis zwischen dem i7-7700K und seinem Vorgänger, dem i7-6700K, der vor etwas weniger als zwei Jahren der schnellste Desktop-Prozessor für Verbraucher war. <br><br>  Zum Spaß habe ich einen weiteren Core m7-6Y75-Prozessor von meinem 2016 MacBook hinzugefügt.  Im Z3-Test ist mein Telefon etwa 50% schneller als ein Laptop. <br><br>  Das wirklich Bemerkenswerte hier ist der Trend: eine ziemlich konstante Verbesserung von 30% pro Jahr für diesen Z3-Benchmark.  Natürlich sollten Sie aus einem dummen Test keine weitreichenden Schlussfolgerungen ziehen, aber es scheint, dass Apple-Prozessoren nach einigen Iterationen für Workloads gut geeignet sind.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><sup>2</sup></a> <a name="2_2"></a>  .  Ich habe ehrlich gesagt nicht erwartet, dass wir uns so nahe sind: Die moderne Architektur von Smartphones ist einfach unglaublich! <br><br>  <i>Vielen Dank an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Megan Cowan</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Max Willsy</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eddie Ian</a> für ihre Hilfe bei der Durchführung von Tests auf anderen Geräten.</i> <br><br><hr><br><a name="1"></a>  <sup>1</sup> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Max</a> bemerkte, dass das iPhone wasserdicht ist, sodass die Theorie durch Eintauchen in ein Eisbad überprüft werden kann.  Aber ich habe viel Geld für das Telefon bezahlt und möchte eine solche Erfahrung nicht freiwillig machen.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">↑</a> <br><br><a name="2"></a>  <sup>2</sup> .  Ich wette, dass das A12X im neuen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">iPad Pro</a> dank der größeren <abbr title="Strukturelemente, die den klimatisierten Raum begrenzen und die Wärmeübertragung regulieren">thermischen Hülle</abbr> , die das Tablet bietet, noch schneller ist.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">↑</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de429318/">https://habr.com/ru/post/de429318/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de429308/index.html">Wie ich ein Startup in einer großen Firma verlassen habe</a></li>
<li><a href="../de429310/index.html">Einstellung, Jagd, Ausbildung und Entwicklung von Rubisten. HR-Ecke auf der RubyRussia-2018-Konferenz</a></li>
<li><a href="../de429312/index.html">Gemeinsame Spielelogik auf Client und Server</a></li>
<li><a href="../de429314/index.html">Übersicht über beliebte Crypto Airdrop-Plattformen</a></li>
<li><a href="../de429316/index.html">Komplexe Zahlenoperationen</a></li>
<li><a href="../de429320/index.html">Live-Übertragung des Sberbank Data Science Day am 10. November</a></li>
<li><a href="../de429322/index.html">nanoCAD Mechanics 9.0: Die Grundlagen des modernen Designs</a></li>
<li><a href="../de429324/index.html">Unreal Engine 4.21 Release</a></li>
<li><a href="../de429326/index.html">App Store ruft nicht an. Oder wie ich meine Bewerbung gemacht habe, aber sie wird die Benutzer nicht erreichen</a></li>
<li><a href="../de429328/index.html">Softwaremodul zur Digitalisierung beschädigter Dokumente</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>