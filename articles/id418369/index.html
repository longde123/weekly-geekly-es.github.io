<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙎🏾 🐃 🎦 angular-ngrx-data - manajemen negara dan CRUD dalam lima menit 🎴 🌪️ 💕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sampai saat ini, tidak ada satu pun aplikasi SPA besar yang lengkap tanpa manajemen negara . Ada beberapa solusi untuk Angular di bidang ini. Yang pal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>angular-ngrx-data - manajemen negara dan CRUD dalam lima menit</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418369/"><img src="https://habrastorage.org/webt/b8/vq/w4/b8vqw4vomyo32ddmdrogi6lnnxo.png" alt="gambar"><br>  Sampai saat ini, tidak ada satu pun aplikasi <b>SPA</b> besar yang lengkap tanpa <b>manajemen negara</b> .  Ada beberapa solusi untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>Angular</b></a> di bidang ini.  Yang paling populer adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>NgRx</b></a> .  Ini mengimplementasikan pola <b>Redux</b> menggunakan perpustakaan <b>RxJs</b> dan memiliki alat yang baik. <br><br>  Pada artikel ini, kita akan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>membahas</b></a> modul <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>NgRx</b></a> utama secara <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>singkat</b></a> dan fokus lebih detail pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>pustaka sudut-ngrx-data</b></a> , yang memungkinkan Anda untuk membuat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>CRUD</b></a> penuh dengan <b>manajemen negara</b> dalam lima menit. <br><a name="habracut"></a><br><h2>  Ulasan NgRx </h2><br>  <b>Anda</b> dapat membaca lebih lanjut tentang <b>NgRx</b> di artikel berikut: <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aplikasi reaktif pada Angular / NGRX.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 1. Pendahuluan</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aplikasi reaktif pada Angular / NGRX.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 2. Toko</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aplikasi reaktif pada Angular / NGRX.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 3. Efek</a> <br><br>  Secara singkat pertimbangkan modul utama <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NgRx</a> , pro dan kontra. <br><br>  <b><a href="">NgRx / store</a></b> - mengimplementasikan pola Redux. <br><br><div class="spoiler">  <b class="spoiler_title">Implementasi toko sederhana</b> <div class="spoiler_text">  counter.actions.ts <br><pre><code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> INCREMENT = <span class="hljs-string"><span class="hljs-string">'INCREMENT'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> DECREMENT = <span class="hljs-string"><span class="hljs-string">'DECREMENT'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> RESET = <span class="hljs-string"><span class="hljs-string">'RESET'</span></span>;</code> </pre> <br>  counter.reducer.ts <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Action } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@ngrx/store'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">counterReducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state: number = initialState, action: Action</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> INCREMENT: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> DECREMENT: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> RESET: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state; } }</code> </pre>  . <br>  Koneksi ke modul <br><pre> <code class="hljs coffeescript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { NgModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { StoreModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@ngrx/store'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { counterReducer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./counter'</span></span>; @NgModule({ imports: [StoreModule.forRoot({ count: counterReducer })], }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppModule</span></span></span><span class="hljs-class"> {}</span></span></code> </pre><br>  Gunakan dalam komponen <br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Component } from <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Store, select } from <span class="hljs-string"><span class="hljs-string">'@ngrx/store'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Observable } from <span class="hljs-string"><span class="hljs-string">'rxjs'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { INCREMENT, DECREMENT, RESET } from <span class="hljs-string"><span class="hljs-string">'./counter'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppState</span></span></span><span class="hljs-class"> </span></span>{ count: number; } <span class="hljs-meta"><span class="hljs-meta">@Component({ selector: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'app-my-counter'</span></span></span><span class="hljs-meta">, template: ` &lt;button (click)</span></span>=<span class="hljs-string"><span class="hljs-string">"increment()"</span></span>&gt;Increment&lt;/button&gt; &lt;div&gt;Current Count: {{ count$ | async }}&lt;/div&gt; &lt;button (click)=<span class="hljs-string"><span class="hljs-string">"decrement()"</span></span>&gt;Decrement&lt;/button&gt; &lt;button (click)=<span class="hljs-string"><span class="hljs-string">"reset()"</span></span>&gt;Reset Counter&lt;/button&gt; `, }) export <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyCounterComponent</span></span></span><span class="hljs-class"> </span></span>{ count$: Observable&lt;number&gt;; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> store: Store&lt;AppState&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.count$ = store.pipe(select(<span class="hljs-string"><span class="hljs-string">'count'</span></span>)); } increment() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ type: INCREMENT }); } decrement() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ type: DECREMENT }); } reset() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ type: RESET }); } }</code> </pre><br></div></div><br>  <b><a href="">NgRx / store-devtools</a></b> - memungkinkan Anda untuk melacak perubahan dalam aplikasi melalui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">redux-devtools</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Contoh Koneksi</b> <div class="spoiler_text"><pre> <code class="hljs powershell">import { StoreDevtoolsModule } from <span class="hljs-string"><span class="hljs-string">'@ngrx/store-devtools'</span></span>; @NgModule({ imports: [ <span class="hljs-type"><span class="hljs-type">StoreModule.forRoot</span></span>(<span class="hljs-type"><span class="hljs-type">reducers</span></span>), //      <span class="hljs-type"><span class="hljs-type">StoreModule</span></span> <span class="hljs-type"><span class="hljs-type">StoreDevtoolsModule.instrument</span></span>({ <span class="hljs-type"><span class="hljs-type">maxAge</span></span>: <span class="hljs-number"><span class="hljs-number">25</span></span>, //   <span class="hljs-number"><span class="hljs-number">25</span></span>  }), ], }) export <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppModule</span></span></span></span> {}</code> </pre> <br></div></div><br>  <b><a href="">NgRx / efek</a></b> - memungkinkan Anda untuk menambahkan data yang masuk ke aplikasi ke repositori, seperti permintaan http. <br><br><div class="spoiler">  <b class="spoiler_title">Contoh</b> <div class="spoiler_text">  ./effects/auth.effects.ts <br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Injectable } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { HttpClient } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/common/http'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Action } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@ngrx/store'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Actions, Effect, ofType } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@ngrx/effects'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Observable, <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rxjs'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { catchError, map, mergeMap } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rxjs/operators'</span></span>; @Injectable() export <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> AuthEffects { // <span class="hljs-keyword"><span class="hljs-keyword">Listen</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the <span class="hljs-string"><span class="hljs-string">'LOGIN'</span></span> action @Effect() <span class="hljs-keyword"><span class="hljs-keyword">login</span></span>$: Observable&lt;Action&gt; = this.actions$.pipe( ofType(<span class="hljs-string"><span class="hljs-string">'LOGIN'</span></span>), mergeMap(action =&gt; this.http.post(<span class="hljs-string"><span class="hljs-string">'/auth'</span></span>, action.payload).pipe( // <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> successful, dispatch success action <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> result map(data =&gt; ({ <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-string"><span class="hljs-string">'LOGIN_SUCCESS'</span></span>, payload: data })), // <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> request fails, dispatch failed action catchError(() =&gt; <span class="hljs-keyword"><span class="hljs-keyword">of</span></span>({ <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-string"><span class="hljs-string">'LOGIN_FAILED'</span></span> })) ) ) ); constructor(private http: HttpClient, private actions$: Actions) {} }</code> </pre><br>  Menghubungkan efek ke modul <br><br><pre> <code class="hljs coffeescript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { EffectsModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@ngrx/effects'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { AuthEffects } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./effects/auth.effects'</span></span>; @NgModule({ imports: [EffectsModule.forRoot([AuthEffects])], }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppModule</span></span></span><span class="hljs-class"> {}</span></span></code> </pre><br></div></div><br>  <b><a href="">NgRx / entitas</a></b> - menyediakan kemampuan untuk bekerja dengan array data. <br><br><div class="spoiler">  <b class="spoiler_title">Contoh</b> <div class="spoiler_text">  user.model.ts <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">export</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">interface</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">User</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">id</span></span>: string; <span class="hljs-attribute"><span class="hljs-attribute">name</span></span>: string; }</code> </pre><br>  user.actions.ts <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Action } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@ngrx/store'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Update } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@ngrx/entity'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { User } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./user.model'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> enum UserActionTypes { LOAD_USERS = <span class="hljs-string"><span class="hljs-string">'[User] Load Users'</span></span>, ADD_USER = <span class="hljs-string"><span class="hljs-string">'[User] Add User'</span></span>, UPSERT_USER = <span class="hljs-string"><span class="hljs-string">'[User] Upsert User'</span></span>, ADD_USERS = <span class="hljs-string"><span class="hljs-string">'[User] Add Users'</span></span>, UPSERT_USERS = <span class="hljs-string"><span class="hljs-string">'[User] Upsert Users'</span></span>, UPDATE_USER = <span class="hljs-string"><span class="hljs-string">'[User] Update User'</span></span>, UPDATE_USERS = <span class="hljs-string"><span class="hljs-string">'[User] Update Users'</span></span>, DELETE_USER = <span class="hljs-string"><span class="hljs-string">'[User] Delete User'</span></span>, DELETE_USERS = <span class="hljs-string"><span class="hljs-string">'[User] Delete Users'</span></span>, CLEAR_USERS = <span class="hljs-string"><span class="hljs-string">'[User] Clear Users'</span></span>, } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoadUsers</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Action</span></span></span><span class="hljs-class"> </span></span>{ readonly type = UserActionTypes.LOAD_USERS; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(public payload: { users: User[] }) {} } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddUser</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Action</span></span></span><span class="hljs-class"> </span></span>{ readonly type = UserActionTypes.ADD_USER; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(public payload: { user: User }) {} } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpsertUser</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Action</span></span></span><span class="hljs-class"> </span></span>{ readonly type = UserActionTypes.UPSERT_USER; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(public payload: { user: User }) {} } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddUsers</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Action</span></span></span><span class="hljs-class"> </span></span>{ readonly type = UserActionTypes.ADD_USERS; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(public payload: { users: User[] }) {} } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpsertUsers</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Action</span></span></span><span class="hljs-class"> </span></span>{ readonly type = UserActionTypes.UPSERT_USERS; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(public payload: { users: User[] }) {} } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdateUser</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Action</span></span></span><span class="hljs-class"> </span></span>{ readonly type = UserActionTypes.UPDATE_USER; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(public payload: { user: Update&lt;User&gt; }) {} } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdateUsers</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Action</span></span></span><span class="hljs-class"> </span></span>{ readonly type = UserActionTypes.UPDATE_USERS; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(public payload: { users: Update&lt;User&gt;[] }) {} } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DeleteUser</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Action</span></span></span><span class="hljs-class"> </span></span>{ readonly type = UserActionTypes.DELETE_USER; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(public payload: { id: string }) {} } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DeleteUsers</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Action</span></span></span><span class="hljs-class"> </span></span>{ readonly type = UserActionTypes.DELETE_USERS; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(public payload: { ids: string[] }) {} } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClearUsers</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Action</span></span></span><span class="hljs-class"> </span></span>{ readonly type = UserActionTypes.CLEAR_USERS; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> type UserActionsUnion = | LoadUsers | AddUser | UpsertUser | AddUsers | UpsertUsers | UpdateUser | UpdateUsers | DeleteUser | DeleteUsers | ClearUsers;</code> </pre><br>  user.reducer.ts <br><pre> <code class="hljs coffeescript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { EntityState, EntityAdapter, createEntityAdapter } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@ngrx/entity'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { User } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./user.model'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { UserActionsUnion, UserActionTypes } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./user.actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface State extends EntityState&lt;User&gt; { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> additional entities state properties selectedUserId: number | <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> const adapter: EntityAdapter&lt;User&gt; = createEntityAdapter&lt;User&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> const initialState: State = adapter.getInitialState({ <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> additional entity state properties selectedUserId: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> function reducer(state = initialState, action: UserActionsUnion): State { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { case UserActionTypes.ADD_USER: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> adapter.addOne(action.payload.user, state); } case UserActionTypes.UPSERT_USER: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> adapter.upsertOne(action.payload.user, state); } case UserActionTypes.ADD_USERS: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> adapter.addMany(action.payload.users, state); } case UserActionTypes.UPSERT_USERS: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> adapter.upsertMany(action.payload.users, state); } case UserActionTypes.UPDATE_USER: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> adapter.updateOne(action.payload.user, state); } case UserActionTypes.UPDATE_USERS: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> adapter.updateMany(action.payload.users, state); } case UserActionTypes.DELETE_USER: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> adapter.removeOne(action.payload.id, state); } case UserActionTypes.DELETE_USERS: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> adapter.removeMany(action.payload.ids, state); } case UserActionTypes.LOAD_USERS: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> adapter.addAll(action.payload.users, state); } case UserActionTypes.CLEAR_USERS: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> adapter.removeAll({ ...state, selectedUserId: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }); } default: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state; } } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> const getSelectedUserId = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(state: State)</span></span></span><span class="hljs-function"> =&gt;</span></span> state.selectedUserId; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> get the selectors const { selectIds, selectEntities, selectAll, selectTotal } = adapter.getSelectors(); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> select the array <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> user ids <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> const selectUserIds = selectIds; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> select the dictionary <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> user entities <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> const selectUserEntities = selectEntities; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> select the array <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> users <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> const selectAllUsers = selectAll; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> select the total user count <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> const selectUserTotal = selectTotal;</code> </pre><br>  reduksi / index.ts <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createSelector, createFeatureSelector, ActionReducerMap, } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@ngrx/store'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> fromUser <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./user.reducer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface State { <span class="hljs-attr"><span class="hljs-attr">users</span></span>: fromUser.State; } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducers: ActionReducerMap&lt;State&gt; = { <span class="hljs-attr"><span class="hljs-attr">users</span></span>: fromUser.reducer, }; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> selectUserState = createFeatureSelector&lt;fromUser.State&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'users'</span></span></span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">export</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selectUserIds</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">createSelector</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> selectUserState, fromUser.selectUserIds </span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">export</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selectUserEntities</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">createSelector</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> selectUserState, fromUser.selectUserEntities </span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">export</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selectAllUsers</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">createSelector</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> selectUserState, fromUser.selectAllUsers </span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">export</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selectUserTotal</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">createSelector</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> selectUserState, fromUser.selectUserTotal </span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">export</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selectCurrentUserId</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">createSelector</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> selectUserState, fromUser.getSelectedUserId </span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">export</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selectCurrentUser</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">createSelector</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> selectUserEntities, selectCurrentUserId, (userEntities, userId</span></span></span><span class="hljs-function">) =&gt;</span></span> userEntities[userId] );</code> </pre><br></div></div><br><h2>  Apa hasilnya? </h2><br>  Kami mendapatkan <b>manajemen negara</b> penuh dengan banyak keuntungan: <br><br>  - sumber data tunggal untuk aplikasi, <br>  - negara disimpan secara terpisah dari aplikasi, <br>  - gaya penulisan tunggal untuk semua pengembang dalam proyek, <br>  - <b>changeDetectionStrategy.OnPush</b> di semua komponen aplikasi, <br>  - debugging yang nyaman melalui <b>redux-devtools</b> , <br>  - kemudahan pengujian, seperti  <b>reduksi</b> adalah fungsi murni. <br><br>  <b>Namun ada juga kelemahannya:</b> <br><br>  - Sejumlah besar modul yang tampaknya tidak dapat dipahami, <br>  - banyak jenis kode yang sama yang tidak akan Anda lihat tanpa kesedihan <br>  - Kesulitan dalam menguasai karena semua hal di atas. <br><br><h2>  CRUD </h2><br>  Sebagai aturan, sebagian besar aplikasi ditempati oleh pekerjaan dengan objek (pembuatan, membaca, memperbarui, menghapus), oleh karena itu, untuk kenyamanan pekerjaan, konsep <b>CRUD</b> telah dibuat (Buat, Baca, Perbarui, Hapus).  Dengan demikian, operasi dasar untuk bekerja dengan semua jenis objek distandarisasi.  Telah booming untuk waktu yang lama di backend.  Banyak perpustakaan membantu menerapkan fungsi ini dan menyingkirkan pekerjaan rutin. <br><br>  Dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NgRx</a> , modul <a href="">entitas</a> bertanggung jawab untuk <b>CRUD</b> , dan jika Anda melihat contoh implementasinya, Anda dapat segera melihat bahwa ini adalah bagian terbesar dan paling kompleks dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NgRx</a> .  Itulah sebabnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">John Papa</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ward Bell</a> membuat data <b>angular-ngrx</b> . <br><br><h2>  angular-ngrx-data </h2><br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">angular-ngrx-data</a></b> adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pustaka</a> add-in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NgRx</a> yang memungkinkan Anda untuk bekerja dengan array data tanpa menulis kode tambahan. <br>  Selain menciptakan <b>manajemen negara yang</b> lengkap, ia melakukan pembuatan layanan dengan <b>http</b> untuk berinteraksi dengan server. <br><br><h2>  Pertimbangkan sebuah contoh </h2><br>  <b>Instalasi</b> <br><br><pre> <code class="hljs kotlin">npm install --save <span class="hljs-meta"><span class="hljs-meta">@ngrx</span></span>/store <span class="hljs-meta"><span class="hljs-meta">@ngrx</span></span>/effects <span class="hljs-meta"><span class="hljs-meta">@ngrx</span></span>/entity <span class="hljs-meta"><span class="hljs-meta">@ngrx</span></span>/store-devtools ngrx-<span class="hljs-keyword"><span class="hljs-keyword">data</span></span></code> </pre><br>  <b>Modul data sudut-ngrx</b> <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { NgModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { CommonModule } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/common'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { EntityMetadataMap, NgrxDataModule, DefaultDataServiceConfig } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ngrx-data'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> defaultDataServiceConfig: DefaultDataServiceConfig = { <span class="hljs-attr"><span class="hljs-attr">root</span></span>: <span class="hljs-string"><span class="hljs-string">'crud'</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> entityMetadata: EntityMetadataMap = { <span class="hljs-attr"><span class="hljs-attr">Hero</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">User</span></span>:{} }; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pluralNames = { <span class="hljs-attr"><span class="hljs-attr">Hero</span></span>: <span class="hljs-string"><span class="hljs-string">'heroes'</span></span> }; @NgModule({ <span class="hljs-attr"><span class="hljs-attr">imports</span></span>: [ CommonModule, NgrxDataModule.forRoot({ entityMetadata, pluralNames }) ], <span class="hljs-attr"><span class="hljs-attr">declarations</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">providers</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">provide</span></span>: DefaultDataServiceConfig, <span class="hljs-attr"><span class="hljs-attr">useValue</span></span>: defaultDataServiceConfig } ] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntityStoreModule</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> <br>  <b>Hubungkan ke aplikasi</b> <br><br><pre> <code class="hljs powershell">@NgModule({ imports: [ <span class="hljs-type"><span class="hljs-type">BrowserModule</span></span>, <span class="hljs-type"><span class="hljs-type">HttpClientModule</span></span>, <span class="hljs-type"><span class="hljs-type">StoreModule.forRoot</span></span>({}), <span class="hljs-type"><span class="hljs-type">EffectsModule.forRoot</span></span>([]), <span class="hljs-type"><span class="hljs-type">EntityStoreModule</span></span>, <span class="hljs-type"><span class="hljs-type">StoreDevtoolsModule.instrument</span></span>({ <span class="hljs-type"><span class="hljs-type">maxAge</span></span>: <span class="hljs-number"><span class="hljs-number">25</span></span>, }), ], declarations: [ <span class="hljs-type"><span class="hljs-type">AppComponent</span></span> ], providers: [], bootstrap: [<span class="hljs-type"><span class="hljs-type">AppComponent</span></span>] }) export <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppModule</span></span></span></span> {}</code> </pre><br>  <i>Kami baru saja mendapatkan <b>API yang</b> dihasilkan untuk bekerja dengan back-end dan integrasi <b>API</b> dengan <b>NgRx</b> , <u><b>tanpa menulis efek tunggal, peredam dan tindakan serta pemilih.</b></u></i> <br><br><h2>  Mari kita teliti lebih detail apa yang terjadi di sini. </h2><br>  <b>Konstanta defaultDataServiceConfig</b> menetapkan konfigurasi untuk API kami dan menghubungkan ke modul <b>penyedia</b> .  Properti <b>root</b> menunjukkan ke mana harus mencari permintaan.  Jika tidak disetel, maka defaultnya adalah "api". <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> defaultDataServiceConfig: DefaultDataServiceConfig = { root: <span class="hljs-string"><span class="hljs-string">'crud'</span></span> };</code> </pre> <br>  <b>Konstanta entityMetadata</b> mendefinisikan nama-nama <b>toko</b> yang akan dibuat ketika <b>NgrxDataModule.forRoot</b> terhubung. <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> entityMetadata: EntityMetadataMap = { Hero: {}, User:{} }; ... NgrxDataModule.forRoot({ entityMetadata, pluralNames })</code> </pre><br>  Jalur ke API terdiri dari jalur dasar (dalam kasus kami "kasar") dan nama toko. <br>  Misalnya, untuk mendapatkan pengguna dengan nomor tertentu, pathnya adalah “crud / user / {userId}”. <br><br>  Untuk mendapatkan daftar pengguna yang lengkap, huruf "s" - "crud / user <b>s</b> " ditambahkan ke akhir nama toko secara default. <br><br>  Jika Anda memerlukan rute yang berbeda untuk mendapatkan daftar lengkap (misalnya, "pahlawan" dan bukan "pahlawan"), Anda dapat mengubahnya dengan mengatur <b>nama jamak</b> dan menghubungkannya ke <b>NgrxDataModule.forRoot</b> . <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pluralNames = { <span class="hljs-attr"><span class="hljs-attr">Hero</span></span>: <span class="hljs-string"><span class="hljs-string">'heroes'</span></span> }; ... NgrxDataModule.forRoot({ entityMetadata, pluralNames })</code> </pre><br><h2>  Koneksi dalam komponen </h2><br>  Untuk menghubungkan dalam komponen, Anda harus meneruskan konstruktor <b>entitasServices</b> ke konstruktor dan menggunakan metode <b>getEntityCollectionService untuk</b> memilih layanan penyimpanan yang diinginkan <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Component, OnInit, ChangeDetectionStrategy } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Observable } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rxjs'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Hero } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@appModels/hero'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { EntityServices, EntityCollectionService } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ngrx-data'</span></span>; @Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-heroes'</span></span>, <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'./heroes.component.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./heroes.component.css'</span></span>], <span class="hljs-attr"><span class="hljs-attr">changeDetection</span></span>: ChangeDetectionStrategy.OnPush }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HeroesComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ heroes$: Observable&lt;Hero[]&gt;; heroesService: EntityCollectionService&lt;Hero&gt;; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(entityServices: EntityServices) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroesService = entityServices.getEntityCollectionService(<span class="hljs-string"><span class="hljs-string">'Hero'</span></span>); } ... }</code> </pre><br>  Untuk mengikat daftar ke komponen, cukup untuk mengambil <b>entitas $</b> properti dari layanan, dan untuk mendapatkan data dari server, panggil metode <b>getAll ()</b> . <br><br><pre> <code class="hljs kotlin">ngOnInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroes$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroesService.entities$; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroesService.getAll(); }</code> </pre><br>  Selain data dasar, Anda juga bisa mendapatkan: <br><br>  - <b>dimuat $</b> , <b>memuat $</b> - mendapatkan status memuat data, <br>  - <b>kesalahan $</b> - kesalahan saat layanan berjalan, <br>  - <b>hitung $</b> - jumlah total catatan dalam repositori. <br><br>  Metode utama berinteraksi dengan server: <br><br>  - <b>getAll ()</b> - mendapatkan seluruh daftar data, <br>  - <b>getWithQuery (kueri)</b> - mendapatkan daftar yang difilter menggunakan parameter kueri, <br>  - <b>getByKey (id)</b> - mendapatkan satu catatan dengan pengidentifikasi, <br>  - <b>add (entitas)</b> - menambahkan entitas baru dengan permintaan dukungan, <br>  - <b>delete (entitas)</b> - menghapus entitas dengan permintaan dukungan, <br>  - <b>perbarui (entitas)</b> - perbarui entitas dengan permintaan dukungan. <br><br>  Metode penyimpanan lokal: <br><br>  - <b>addManyToCache (entitas)</b> - menambahkan array entitas baru ke repositori, <br>  - <b>addOneToCache (entitas)</b> - menambahkan entitas baru hanya ke repositori, <br>  - <b>removeOneFromCache (id)</b> - hapus satu entitas dari repositori, <br>  - <b>updateOneInCache (entitas)</b> - perbarui entitas dalam repositori, <br>  - <b>upsertOneInCache (entitas)</b> - jika entitas dengan id yang ditentukan ada, itu diperbarui, jika tidak, yang baru dibuat, <br>  - dan lainnya <br><br>  <b>Contoh penggunaan komponen</b> <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { EntityCollectionService, EntityServices } from <span class="hljs-string"><span class="hljs-string">'ngrx-data'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Hero } from <span class="hljs-string"><span class="hljs-string">'../../core'</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Component({ selector: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'app-heroes'</span></span></span><span class="hljs-meta">, templateUrl: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'./heroes.component.html'</span></span></span><span class="hljs-meta">, changeDetection: ChangeDetectionStrategy.OnPush })</span></span> export <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HeroesComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ heroes$: Observable&lt;Hero[]&gt;; heroesService: EntityCollectionService&lt;Hero&gt;; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(entityServices: EntityServices) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroesService = entityServices.getEntityCollectionService(<span class="hljs-string"><span class="hljs-string">'Hero'</span></span>); } ngOnInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroes$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroesService.entities$; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getHeroes(); } getHeroes() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroesService.getAll(); } addHero(hero: Hero) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroesService.add(hero); } deleteHero(hero: Hero) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroesService.delete(hero.id); } updateHero(hero: Hero) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroesService.update(hero); } }</code> </pre> <br>  Semua metode <b>angular-ngrx-data</b> dibagi menjadi bekerja secara lokal dan berinteraksi dengan server.  Ini memungkinkan Anda untuk menggunakan pustaka saat memanipulasi data pada klien dan menggunakan server. <br><br><h2>  Penebangan </h2><br>  Untuk masuk, Anda perlu menyuntikkan <a href="">EntityServices</a> ke dalam komponen atau layanan dan menggunakan properti: <br><br>  <b>--ucedActions $</b> - untuk tindakan logging, <br>  - <b>entityActionErrors $</b> - untuk kesalahan logging. <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Component, OnInit } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { MessageService } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@appServices/message.service'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { EntityServices } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'ngrx-data'</span></span>; @Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-messages'</span></span>, <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'./messages.component.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./messages.component.css'</span></span>] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MessagesComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>( public messageService: MessageService, private entityServices: EntityServices ) {} ngOnInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.entityServices.reducedActions$.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (res &amp;&amp; res.type) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.messageService.add(res.type); } }); } }</code> </pre><br><h2>  Pindah ke repositori NgRx utama </h2><br>  Seperti yang diumumkan pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ng-conf 2018</a> , <b>angular-ngrx-data</b> akan segera dimigrasikan ke repositori <b>NgRx</b> utama. <br><br><div class="spoiler">  <b class="spoiler_title">Mengurangi Boilerplate dengan video pembicaraan NgRx - Brandon Roberts &amp; Mike Ryan</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/t3jx0EC-Y3c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br><h2>  Referensi </h2><br>  <b>Pembuat anguar-ngrx-data:</b> <br>  - John Papa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">twitter.com/John_Papa</a> <br>  - Ward Bell <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">twitter.com/wardbell</a> <br><br>  <b>Repositori resmi:</b> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NgRx</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">angular-ngrx-data</a> <br><br>  <b>Contoh aplikasi:</b> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dengan NgRx tanpa angular-ngrx-data</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dengan NgRx dan data angular-ngrx</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>Komunitas Angular berbahasa Rusia di Telegram</b></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id418369/">https://habr.com/ru/post/id418369/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id418357/index.html">DEFCON 23. "Pengakuan cyberstalker profesional." Ken Westin</a></li>
<li><a href="../id418359/index.html">Fintech digest: identifikasi warga supermarket keuangan, mantan karyawan QIWI yang ditambang 2,4% dari bitcoin, BRICS dan blockchain</a></li>
<li><a href="../id418361/index.html">Mengapa E dalam singkatan EHD adalah tentang proses bisnis</a></li>
<li><a href="../id418363/index.html">Tiga tanda pasti bahwa sudah waktunya untuk memotong kerangka Anda</a></li>
<li><a href="../id418365/index.html">Lambat tapi Benar: Lautan dan Lautan Mengancam Infrastruktur Internet Global</a></li>
<li><a href="../id418371/index.html">Microtask untuk programmer dan metode pembayaran cryptocurrency alternatif</a></li>
<li><a href="../id418375/index.html">Tinjauan umum Uniz Slash + 3D Photo-Printer</a></li>
<li><a href="../id418377/index.html">Kotlin: dua sendok tar dalam satu tong madu</a></li>
<li><a href="../id418379/index.html">Prostesis bioelektrik anak-anak. Bagian 2</a></li>
<li><a href="../id418381/index.html">Apa yang Baru di DevTools di Versi Chrome 68</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>