<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’£ âœŠğŸ¾ ğŸ” Menggambar non-blok dan memperbarui grafik dengan bokeh ğŸ¤½ğŸ½ ãŠ™ï¸ ğŸŒ•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya punya satu skrip Python dengan perhitungan. Ada siklus sekitar 2000 iterasi, yang masing-masing dianggap beberapa menit. 

 Dan saya memutuskan u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menggambar non-blok dan memperbarui grafik dengan bokeh</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474378/"><img src="https://habrastorage.org/getpro/habr/post_images/7d6/7d5/d33/7d67d5d33f08f31050d5082c77d4c33e.png" alt="gambar"><br><br>  Saya punya satu skrip Python dengan perhitungan.  Ada siklus sekitar 2000 iterasi, yang masing-masing dianggap beberapa menit. <br><br>  Dan saya memutuskan untuk secara pintar men-debug skrip itu, menampilkan grafik beberapa metrik dari nomor iterasi.  Dan sebagai iterasi berikutnya dihitung, jadi ini jadwal dan pembaruan. <br><br>  Cara termudah untuk melakukan ini adalah dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bokeh.</a>  Lebih tepatnya, menggunakan server bokeh untuk menggambar grafik.  Bagaimana - sekarang saya akan memberi tahu Anda. <br><br><a name="habracut"></a>  Pertama, mulai server: server keluar dari kotak bersama dengan bokeh itu sendiri, jadi setelah pip install bokeh, ketik saja servis bokeh di konsol dan server dimulai. <br><br>  Mengapa itu dibutuhkan?  Dan kemudian menunjukkan grafik <br><br><ul><li>  tidak memblokir eksekusi sisa kode (karena terjadi di browser, dalam proses terpisah), </li><li>  sehingga grafik merespons perubahan ukuran jendela (atau meminimalkan-memaksimalkan-memaksimalkan) </li><li>  dan agar kapan saja kita dapat mengubah jadwal ini seperti yang kita inginkan, langsung dari proses Python kami! </li></ul><br>  Ini dilakukan seperti ini: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> bokeh.plotting <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> figure <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> bokeh.client <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pull_session <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> bokeh.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ColumnDataSource <span class="hljs-comment"><span class="hljs-comment">#     --    -,    bokeh serve # Please run "bokeh serve" in console before start! if __name__ == "__main__": #    (  ,     ) session = pull_session() #  .. ,      (    ) fig = figure(title=("Total TBS (in bits)"), plot_height=300, plot_width=800) #         datasource = ColumnDataSource(data={"x": [], "y": []}) line = fig.line(x="x", y="y", source=datasource, line_width=2, legend=("Super dooper line from hell")) #        session.show(fig) #     for i in range(10000): #          .   datasource     #       = ) datasource.stream({"x": [i], "y": [i ** 2]}) #       30-40      ,   session.force_roundtrip() #  !</span></span></code> </pre> <br>  Sebelumnya, saya juga harus melakukan ini, tetapi keputusan sebelumnya adalah, secara halus, tidak begitu baik.  Apa yang belum saya coba dalam hidup saya ... <br><br><div class="spoiler">  <b class="spoiler_title">Perhatian, pemberat otak!</b> <div class="spoiler_text">  Anda dapat menggunakan matplotlib dalam mode non-blocking dengan menarik secara manual plt.draw () di setiap iterasi.  Benar, matplotlib tidak memiliki pemrosesan pesan sendiri dari GUI dalam mode non-blocking, dan jika jendela meminimalkan atau menutup dengan jendela lain, kita harus menunggu iterasi berikutnya untuk menggambar ulang.  Kruk begitu-begitu, tetapi untuk debugging itu akan dilakukan. <br><br>  Dimungkinkan di Negro untuk menghasilkan gambar dengan bagan dari matplotlib yang sama dan membuangnya ke disk.  Juga kruk yang ganas, tetapi menunggang kekurangan ikan.  Atau pada mesin jarak jauh tanpa gambar. <br><br>  Anda dapat melakukannya dengan cara yang keren: gunakan PyQt, bungkus kode perhitungan dalam sebuah QObject, dorong ke dalam aliran terpisah, bungkus grafik matplotlib dalam QWidget (atau gunakan grafik dari Qt Data Visualizaion, atau dari PyQtGraph), hubungkan matematika ke grafik melalui sinyal dengan sebuah slot , dan akan ada kebahagiaan.  Benar, ini sedikit seperti solusi debugging cepat, dan Qt perlu diajarkan, tetapi saya melakukannya beberapa kali. <br><br>  Anda dapat meningkatkan aplikasi server kecil untuk menggambar grafik dalam proses terpisah (misalnya, menggunakan aiohttp + PyQt + PyQtGraph), yang dapat diketuk melalui REST API dari proses utama.  Setelah saya melakukan ini, tetapi tidak menarik perbaikan cepat untuk debugging juga. <br><br>  Anda dapat menulis ke beberapa jenis database (apa yang ada di mode saat ini?), Dan kemudian biarkan Grafan masuk ke mode.  Benar, Anda perlu meletakkan kedua basis data dan Grafan, mengonfigurasinya, dan umumnya repot menulis ke basis data.  Mungkin, ini juga dimungkinkan melalui file, tetapi untuk dua grafik untuk seribu poin masing-masing adalah seperti sparrow ... <br><br>  Atau Anda dapat memahami plotly.dash, letakkan matematika dalam aliran terpisah, bungkus dalam aplikasi dasbor, dan lakukan banyak sampah.  Ini belum saya kuasai, meskipun itu perlu. <br></div></div><br>  Singkatnya, debugging berhasil! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id474378/">https://habr.com/ru/post/id474378/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id474366/index.html">Acara digital di Moskow dari 4 hingga 10 November</a></li>
<li><a href="../id474368/index.html">Sinopsis tentang Pembelajaran Mesin. Teori probabilitas. Formula bayes</a></li>
<li><a href="../id474370/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 387 (28 Oktober - 3 November 2019)</a></li>
<li><a href="../id474372/index.html">Saldo digital</a></li>
<li><a href="../id474374/index.html">Cara membuat aplikasi web Anda bekerja secara offline</a></li>
<li><a href="../id474380/index.html">PHP Digest No. 167 (22 Oktober - 4 November 2019)</a></li>
<li><a href="../id474382/index.html">Film "Project 'Hummingbird'" dalam hal sejarah, teknologi, dan keuangan</a></li>
<li><a href="../id474386/index.html">Eksperimen Microsoft untuk mengurangi minggu kerja menjadi 4 hari menyebabkan peningkatan 40% dalam produktivitas</a></li>
<li><a href="../id474388/index.html">Semua orang terbakar dengan efisiensi</a></li>
<li><a href="../id474390/index.html">Acara digital di St. Petersburg dari 4 hingga 10 November</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>