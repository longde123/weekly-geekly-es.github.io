<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍❤️‍💋‍👨 🥢 👨🏼‍🏫 Développement d'applications pour un ancien PDA (Cybiko Xtreme) en 2019 🖕🏻 📜 🎤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Présentation 
 Salut Habr! Je voudrais partager mon expérience en écrivant une application pour un très vieil ordinateur de poche, qui est sérieusemen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Développement d'applications pour un ancien PDA (Cybiko Xtreme) en 2019</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445686/"><img src="https://habrastorage.org/webt/ph/mh/cb/phmhcbpdse1fki5efokzyl_fhq4.jpeg"><br><br><h3>  Présentation </h3><br>  Salut Habr!  Je voudrais partager mon expérience en écrivant une application pour un très vieil ordinateur de poche, qui est sérieusement en avance sur son temps, à savoir la version Cybiko Xtreme 2001.  Pour ceux qui s'intéressent à la façon dont vivait un développeur mobile au début des années 2000, bienvenue chez cat. <br><a name="habracut"></a><br><h3>  À propos de Cybiko Xtreme </h3><br>  Donc, cet appareil m'est venu dans le lointain 2002 et a causé un plaisir total.  Je ne pouvais pas apprécier les capacités de communication, car dans ma ville, je ne rencontrais plus de personnes avec de tels PDA, cependant, en général, la possibilité de jouer à de nombreux jeux sans avoir à s'asseoir devant un ordinateur était fantastique.  À bien des égards, les créateurs de l'appareil se sont concentrés sur les capacités réseau du PDA.  Les développeurs ont choisi un réseau radio maillé pour connecter les appareils entre eux.  Directement, les appareils étaient interconnectés à une distance pouvant atteindre 100 mètres, mais il était possible de se connecter les uns aux autres via un autre appareil, et en théorie, avec une couverture réseau dense, la distance était illimitée.  L'appareil a eu l'occasion de remplir votre profil (il semble même y attacher une photo, même si cela aurait peu de sens dans l'affichage en niveaux de gris), discuter avec d'autres utilisateurs ayant des intérêts similaires, chercher de nouveaux amis, etc.  Il ressemble à tout ce réseau social, même si, à ma connaissance, un tel terme n'existait pas encore.  S'il y avait beaucoup d'appareils, je pense que le projet allait décoller, mais malheureusement, quelque chose s'est mal passé avec les créateurs. <br><br>  Trouver ce PDA dans mes vieilles affaires, je voulais ponostalgiser.  Ce n'était pas très intéressant de jouer à d'anciens jeux (néanmoins, ils n'ont pas l'air spécialement par rapport aux nouveaux), mais essayer de développer une application et sentir comment vivaient les premiers développeurs mobiles était beaucoup plus intéressant. <br><br><h3>  Idée d'application </h3><br>  Étant donné que, par la nature de mon activité, je suis lié à la sécurité de l'information et que ce sujet est extrêmement intéressant pour moi, j'ai décidé de créer une application dans le même domaine.  Le plus simple (et au moins quelque chose d'utile?) Me semblait l'application «gestionnaire de mots de passe».  Cette application vous permet de voir comment évolue une interface utilisateur graphique, et de travailler avec le système de fichiers (stockage d'un conteneur chiffré avec des mots de passe). <br><br>  En tant que cryptographie pour protéger le conteneur, j'ai décidé d'utiliser le soi-disant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cryptage XOR</a> .  La clé est le mot de passe principal.  La force cryptographique de ce cryptage dépend fortement de la longueur de la clé, et il n'est pas recommandé de l'utiliser dans des systèmes sérieux, cependant, ce cryptage a un sérieux plus - il est très facile à mettre en œuvre.  Étant donné que l'application a été créée uniquement à des fins de divertissement, un tel cryptage est idéal. <br><br><h3>  Émulateur </h3><br>  La connexion de Cybiko Xtreme à un ordinateur moderne est un processus assez compliqué, j'ai donc décidé de travailler sur les lancements de test de l'application sur l'émulateur (heureusement, c'est le cas). <br>  L'apparence est indiquée dans la figure ci-dessous. <br><br><img src="https://habrastorage.org/webt/la/7b/om/la7bomtis49fpnrhc_pu8wedd7c.png"><br><br>  Il existe certaines fonctionnalités pour télécharger des applications sur l'émulateur.  Selon les instructions trouvées <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici, l'</a> application peut être envoyée en utilisant le bouton "Envoyer" dans la fenêtre "Console", cependant, peu importe comment j'ai essayé, je n'ai pas réussi.  Le forum Planet Cybiko (malheureusement le forum est actuellement fermé) a un lien vers un outil qui vous permet de créer vos propres disques RAM Cybiko.  Par conséquent, il suffit de créer un disque RAM avec une application compilée et de redémarrer l'émulateur avec. <br><br><h3>  SDK </h3><br>  Trouver un SDK sur Internet n'a pas été très difficile.  Après avoir déballé et analysé la structure du répertoire, j'ai d'abord attiré l'attention sur le répertoire doc, qui s'est avéré être une aide très utile expliquant comment, en principe, compiler l'application, et quelle structure le projet devrait avoir. <br><br>  J'ai trouvé de nombreux exemples d'applications dans le répertoire des démos.  Les applications du répertoire du didacticiel étaient particulièrement intéressantes et expliquaient pas à pas les principes de développement de Cybiko Xtreme.  Tout est simple, accessible et compréhensible. <br><br><h3>  Écriture de code </h3><br>  La structure d'un projet au contenu minimal est présentée ci-dessous: <br><br><div class="spoiler">  <b class="spoiler_title">Structure du projet</b> <div class="spoiler_text"><pre><code class="cpp hljs">project res root.inf src source1.c … make.bat</code> </pre> <br></div></div><br>  Le fichier root.inf contient les métadonnées de l'application, à savoir des informations sur son type (application, jeu ou bibliothèque), la version, la version minimale du système d'exploitation (comme dans Android), un nom unique, etc. <br><br>  Le fichier make.bat contient des commandes pour créer l'application à l'aide de sdk.  En fait, l'assemblage complet se fait avec la commande d'appel Cybiko C Compiller: <br><br><pre> <code class="plaintext hljs">"C:\Program Files (x86)\Cybiko\Cybiko_SDK\bin\vcc" -R0 src/*.c res/*.help res/*.inf -o passwords_master.app</code> </pre> <br>  Remarque importante: lorsque vous construisez sur Windows 7 pour vcc.exe, vous devez définir le mode de compatibilité sur Windows XP (Service Pack 2), sinon il y a des problèmes avec le démarrage du compilateur. <br><br>  Le répertoire src contient le code source du programme.  Le résultat de la compilation est un fichier * .app. <br><br>  Pour décrire le développement de l'application entière, un article ne suffit certainement pas, je ne décrirai donc que le tout début.  Si quelqu'un a des questions, posez-les dans les commentaires ou dans PM. <br><br>  Tout commence par l'initialisation du contexte d'application dans la fonction principale en appelant: <br><br><div class="spoiler">  <b class="spoiler_title">Initialisation</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init_module</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * main_module)</span></span></span></span>;</code> </pre> <br></div></div><br>  Après l'initialisation, la structure main_module contient des pointeurs vers le contexte graphique et le processus d'application en cours. <br><br>  Ensuite, vous devez créer le formulaire principal.  Cela se fait comme suit: <br><br><div class="spoiler">  <b class="spoiler_title">Créer un formulaire maître</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cFrameForm</span></span></span><span class="hljs-class"> * </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ptr_main_form</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">malloc</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cFrameForm</span></span></span><span class="hljs-class">));</span></span> cFrameForm_ctor(ptr_main_form, <span class="hljs-string"><span class="hljs-string">"Passwords Master"</span></span>, main_module.m_process);</code> </pre> <br></div></div><br>  Vérifiez s'il existe un conteneur de mots de passe sur le système de fichiers: <br><br><div class="spoiler">  <b class="spoiler_title">Vérification de la disponibilité des conteneurs</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check_database</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileInput</span></span></span><span class="hljs-class"> * </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ptr_file_input</span></span></span><span class="hljs-class"> = (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileInput</span></span></span><span class="hljs-class"> *) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">malloc</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileInput</span></span></span><span class="hljs-class">));</span></span> FileInput_ctor_Ex(ptr_file_input, DATABASE_FILE); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (FileInput_is_good(ptr_file_input)) { FileInput_dtor(ptr_file_input, FREE_MEMORY); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } FileInput_dtor(ptr_file_input, FREE_MEMORY); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; }</code> </pre> <br></div></div><br>  Nous montrons la boîte de dialogue de saisie du mot de passe principal.  Si le conteneur existe déjà, nous essayons de déchiffrer avec le mot de passe principal entré.  S'il n'y avait pas de conteneur, utilisez le mot de passe principal entré pour créer un nouveau conteneur. <br><br><div class="spoiler">  <b class="spoiler_title">Entrez le mot de passe principal</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_master_password</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct cFrameForm * ptr_form, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * master_password)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Show dialog enter master password struct cDialog * ptr_pass_dialog; ptr_pass_dialog = (struct cDialog *) malloc(sizeof(struct cDialog)); cDialog_ctor(ptr_pass_dialog, 0, "Enter master password", mbEdit | mbOk | mbCancel | mbs1, 15, ptr_form-&gt;CurrApplication); cDialog_SetEditText(ptr_pass_dialog, ""); do { // If pressed cancel - close application if (cDialog_ShowModal(ptr_pass_dialog) == mbOk) cDialog_GetEditText(ptr_pass_dialog, master_password); else { ptr_form-&gt;ModalResult = mrQuit; break; } } while (strlen(master_password) == 0); // Releases the dialog cDialog_dtor(ptr_pass_dialog, FREE_MEMORY); }</span></span></code> </pre> <br></div></div><br>  Tous les autres travaux de l'application sont construits autour d'un cycle de traitement des messages du système d'exploitation jusqu'à la fermeture du formulaire principal. <br><br><div class="spoiler">  <b class="spoiler_title">Traitement des messages</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (ptr_form-&gt;ModalResult != mrQuit) { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Message</span></span></span><span class="hljs-class"> * </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ptr_message</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cWinApp_get_message</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ptr_form</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CurrApplication</span></span></span><span class="hljs-class">, 0, 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MSG_USER</span></span></span><span class="hljs-class">);</span></span> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(ptr_message-&gt;msgid) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> MSG_SHUTUP: <span class="hljs-comment"><span class="hljs-comment">// Processes the system exit signal. case MSG_QUIT: ptr_form-&gt;ModalResult = mrQuit; break; case MSG_KEYDOWN: // Processes keyboard input ptr_key_param = Message_get_key_param(ptr_message); switch(ptr_key_param-&gt;scancode) { case KEY_ESC: ... break; case KEY_ENTER: ... break; case KEY_DEL: ... break; default: cFrameForm_proc(ptr_form, ptr_message); } break; default: cWinApp_defproc(module.m_process, ptr_message); } Message_delete(ptr_message); }</span></span></code> </pre> <br></div></div><br>  Le résultat du travail au démarrage dans l'émulateur est présenté ci-dessous: <br><br><img src="https://habrastorage.org/webt/xr/3a/7l/xr3a7lyulrairexxldzii6tv4fg.png"><br><br>  Avec le code source complet, si vous le souhaitez <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">peut être trouvé sur github au lien.</a> <br><br><h3>  Lancer sur un vrai appareil </h3><br>  Comme je l'ai déjà dit, le lancement sur un véritable appareil est difficile, car le logiciel de synchronisation de Cybiko avec un ordinateur ne prend pas en charge les systèmes d'exploitation modernes.  Selon les instructions trouvées <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , j'ai pu synchroniser Cybiko avec Windows 2000 fonctionnant dans Virtual Box.  Parmi les nuances, je peux noter que le programme n'a vu Cybiko que lorsqu'il était connecté via USB et automatiquement transmis à la machine virtuelle.  C'est probablement pourquoi l'auteur du manuel écrit qu'il doit être ajouté en tant que périphérique permanent pour cette machine dans les paramètres USB Virtual Box. <br><br>  Le résultat de la synchronisation dans l'image ci-dessous: <br><br><img src="https://habrastorage.org/webt/ip/hx/9d/iphx9dqdc5ahl82dnjxyo7jb-ta.png"><br><br>  Le résultat de ma candidature est présenté dans la vidéo suivante: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/yJdBuWyrAgE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3>  Conclusion </h3><br>  J'ai beaucoup de merveilleux souvenirs liés à Cybiko Xtreme, et encore une fois, toucher ce merveilleux appareil était sacrément agréable pour moi.  Je tiens à remercier chaleureusement ses créateurs pour le travail accompli.  Je voudrais également remercier les créateurs de l'émulateur, des forums et des sites sur Cybiko, ainsi que ma femme pour leur aide dans le tournage de la vidéo et l'édition de cet article. <br><br>  Merci à tous pour votre attention! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445686/">https://habr.com/ru/post/fr445686/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445676/index.html">Nouveau dans Git 3: fermetures</a></li>
<li><a href="../fr445678/index.html">4. Check Point Getting Started R80.20. Installation et initialisation</a></li>
<li><a href="../fr445680/index.html">Nouvelle fonctionnalité dans Git 3: fermetures</a></li>
<li><a href="../fr445682/index.html">PVS-Studio pour Java est envoyé vers le chemin. Le prochain arrêt est Elasticsearch</a></li>
<li><a href="../fr445684/index.html">Onduleur monobloc vs modulaire</a></li>
<li><a href="../fr445692/index.html">Présentation des fonctionnalités de PlayCanvas pour la création d'applications Web VR</a></li>
<li><a href="../fr445696/index.html">Comment sont créés les robots qui peuvent aller où nous sommes</a></li>
<li><a href="../fr445698/index.html">Licence NanoCAD</a></li>
<li><a href="../fr445700/index.html">«33 mots sur le design»: qui et pourquoi fait un film sur le design en Russie</a></li>
<li><a href="../fr445702/index.html">SlowPochta - messager de la livraison injustifiée de messages avec un temps de transmission indéfini</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>