<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçüé§ üñ•Ô∏è ü¶Ñ Bangun aplikasi Android. Tugas dengan tanda bintang üíî üôá üëÇüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, Habr! Di musim panas, saya berbicara di Summer Droid Meetup dengan laporan tentang membangun aplikasi Android. Versi video dapat ditemukan di si...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bangun aplikasi Android. Tugas dengan tanda bintang</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/469771/"><img src="https://habrastorage.org/webt/-b/02/yh/-b02yhihv1wljls_lzryoh__sbe.png"><br><br>  Halo, Habr!  Di musim panas, saya berbicara di Summer Droid Meetup dengan laporan tentang membangun aplikasi Android.  Versi video dapat ditemukan di sini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">habr.com/ru/company/funcorp/blog/462825</a> .  Dan bagi mereka yang suka membaca lebih lanjut, saya hanya menulis artikel ini. <br><br>  Ini tentang apa itu - aplikasi Android.  Kami akan mengumpulkan dengan cara yang berbeda Halo, dunia!: Mulai dari konsol dan lihat apa yang terjadi di bawah tenda sistem pembangunan, lalu kembali ke masa lalu, ingat Maven dan pelajari tentang solusi Bazel dan Buck modern.  Dan akhirnya, semua ini sebanding. <br><a name="habracut"></a><br>  Kami memikirkan kemungkinan perubahan dalam sistem perakitan ketika kami memulai proyek baru.  Tampaknya bagi kami bahwa ini adalah kesempatan yang baik untuk mencari beberapa alternatif untuk Gradle.  Selain itu, lebih mudah untuk melakukan ini di awal daripada menerjemahkan proyek yang ada.  Kelemahan Gradle berikut mendorong kami ke langkah ini: <br><br><ul><li>  dia jelas memiliki masalah dengan perakitan tambahan, meskipun dia bisa melihat kemajuan ke arah ini; </li><li>  dia mengerjakan proyek monolitik yang sangat besar dengan buruk; </li><li>  itu terjadi bahwa iblis mulai untuk waktu yang sangat lama; </li><li>  menuntut mesin yang menjalankannya. </li></ul><br><h2>  APK </h2><br>  Pertama-tama, ingat apa yang terdiri dari aplikasi Android: kode terkompilasi, sumber daya dan AndroidManifest.xml. <br><br><img src="https://habrastorage.org/webt/pe/do/sm/pedosmtvfcqralxv1td9d4xcjg0.jpeg"><br><br>  Sumber ada dalam file classes.dex (mungkin ada beberapa file, tergantung pada ukuran aplikasi) dalam format dex khusus yang dapat digunakan oleh mesin virtual Android.  Hari ini adalah ART, pada perangkat yang lebih lama - Dalvik.  Selain itu, Anda dapat menemukan folder lib, di mana sumber asli diatur dalam subfolder.  Mereka akan dinamai tergantung pada arsitektur prosesor target, misalnya x86, arm, dll.  Jika Anda menggunakan exoplayer, maka Anda mungkin memiliki lib.  Dan folder aidl, yang berisi antarmuka komunikasi antarproses.  Mereka akan berguna jika Anda perlu mengakses layanan yang berjalan dalam proses lain.  Antarmuka semacam itu digunakan baik di Android itu sendiri maupun di dalam GooglePlayServices. <br><br>  Berbagai sumber daya yang tidak dikompilasi seperti gambar ada di folder res.  Semua sumber daya yang dikompilasi, seperti gaya, baris, dll., Digabungkan menjadi file resource.arsc.  Di folder aset, sebagai aturan, mereka meletakkan segala sesuatu yang tidak sesuai dengan sumber daya, misalnya, font khusus. <br><br>  Selain semua ini, APK berisi AndroidManifest.xml.  Di dalamnya, kami menjelaskan berbagai komponen aplikasi, seperti Aktivitas, Layanan, berbagai izin, dll.  Itu terletak dalam bentuk biner, dan untuk melihat ke dalam, itu pertama-tama harus dikonversi menjadi file yang dapat dibaca manusia. <br><br><h2>  CONSOLE </h2><br>  Sekarang kita tahu apa yang terdiri dari aplikasi, kita dapat mencoba membangun Hello, world!  dari konsol menggunakan alat yang disediakan SDK Android.  Ini adalah langkah yang cukup penting dalam memahami cara kerja sistem membangun, karena mereka semua bergantung pada utilitas ini pada tingkat tertentu.  Karena proyek ini ditulis dalam Kotlin, kita memerlukan kompilernya untuk baris perintah.  Mudah mengunduh secara terpisah. <br><br>  Perakitan aplikasi dapat dibagi menjadi langkah-langkah berikut: <br><br><ul><li> Unduh dan buka semua pustaka tempat proyek ini bergantung.  Dalam kasus saya, ini adalah perpustakaan kompatibilitas mundur appcompat, yang, pada gilirannya, tergantung pada appcompat-core, jadi kami juga memompakannya; </li><li>  menghasilkan R.java.  Kelas yang luar biasa ini berisi pengidentifikasi semua sumber daya dalam aplikasi dan digunakan untuk mengaksesnya dalam kode; </li><li>  kami mengkompilasi sumber menjadi bytecode dan menerjemahkannya ke Dex, karena mesin virtual Android tidak tahu cara bekerja dengan bytecode yang biasa; </li><li>  kami mengemas semua yang ada di APK, tetapi pertama-tama luruskan semua sumber daya yang tidak dapat dimampatkan, seperti gambar, relatif terhadap awal file.  Ini memungkinkan harga peningkatan yang sama sekali tidak signifikan dalam ukuran APK untuk mempercepat pekerjaannya secara signifikan.  Dengan demikian, sistem dapat secara langsung memetakan sumber daya ke RAM menggunakan fungsi mmap (). </li><li>  menandatangani aplikasi.  Prosedur ini melindungi integritas APK dan mengkonfirmasi kepengarangan.  Dan berkat ini, misalnya, Play Market dapat memverifikasi bahwa aplikasi itu dibuat oleh Anda. </li></ul><br><div class="spoiler">  <b class="spoiler_title">buat skrip</b> <div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">preparedir</span></span></span></span>() { rm -r -f <span class="hljs-variable"><span class="hljs-variable">$1</span></span> mkdir <span class="hljs-variable"><span class="hljs-variable">$1</span></span> } PROJ=<span class="hljs-string"><span class="hljs-string">"src/main"</span></span> LIBS=<span class="hljs-string"><span class="hljs-string">"libs"</span></span> LIBS_OUT_DIR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$LIBS</span></span></span><span class="hljs-string">/out"</span></span> BUILD_TOOLS=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_HOME</span></span></span><span class="hljs-string">/build-tools/28.0.3"</span></span> ANDROID_JAR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_HOME</span></span></span><span class="hljs-string">/platforms/android-28/android.jar"</span></span> DEBUG_KEYSTORE=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(echo ~)</span></span></span><span class="hljs-string">/.android/debug.keystore"</span></span> GEN_DIR=<span class="hljs-string"><span class="hljs-string">"build/generated"</span></span> KOTLIN_OUT_DIR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$GEN_DIR</span></span></span><span class="hljs-string">/kotlin"</span></span> DEX_OUT_DIR=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$GEN_DIR</span></span></span><span class="hljs-string">/dex"</span></span> OUT_DIR=<span class="hljs-string"><span class="hljs-string">"out"</span></span> libs_res=<span class="hljs-string"><span class="hljs-string">""</span></span> libs_classes=<span class="hljs-string"><span class="hljs-string">""</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$LIBS_OUT_DIR</span></span> aars=$(ls -p <span class="hljs-variable"><span class="hljs-variable">$LIBS</span></span> | grep -v /) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> filename <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$aars</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> DESTINATION=<span class="hljs-variable"><span class="hljs-variable">$LIBS_OUT_DIR</span></span>/<span class="hljs-variable"><span class="hljs-variable">${filename%.*}</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"unpacking </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$filename</span></span></span><span class="hljs-string"> into </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DESTINATION</span></span></span><span class="hljs-string">"</span></span> unzip -o -q <span class="hljs-variable"><span class="hljs-variable">$LIBS</span></span>/<span class="hljs-variable"><span class="hljs-variable">$filename</span></span> -d <span class="hljs-variable"><span class="hljs-variable">$DESTINATION</span></span> libs_res=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$libs_res</span></span></span><span class="hljs-string"> -S </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DESTINATION</span></span></span><span class="hljs-string">/res"</span></span> libs_classes=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$libs_classes</span></span></span><span class="hljs-string">:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DESTINATION</span></span></span><span class="hljs-string">/classes.jar"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$GEN_DIR</span></span> <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/aapt package -f -m \ -J <span class="hljs-variable"><span class="hljs-variable">$GEN_DIR</span></span> \ -M <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/AndroidManifest.xml \ -S <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/res \ <span class="hljs-variable"><span class="hljs-variable">$libs_res</span></span> \ -I <span class="hljs-variable"><span class="hljs-variable">$ANDROID_JAR</span></span> --auto-add-overlay preparedir <span class="hljs-variable"><span class="hljs-variable">$KOTLIN_OUT_DIR</span></span> compiledKotlin=<span class="hljs-variable"><span class="hljs-variable">$KOTLIN_OUT_DIR</span></span>/compiled.jar kotlinc <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/java <span class="hljs-variable"><span class="hljs-variable">$GEN_DIR</span></span> -include-runtime \ -cp <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_JAR</span></span></span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$libs_classes</span></span></span><span class="hljs-string">"</span></span>\ -d <span class="hljs-variable"><span class="hljs-variable">$compiledKotlin</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$DEX_OUT_DIR</span></span> dex=<span class="hljs-variable"><span class="hljs-variable">$DEX_OUT_DIR</span></span>/classes.dex <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/dx --dex --output=<span class="hljs-variable"><span class="hljs-variable">$dex</span></span> <span class="hljs-variable"><span class="hljs-variable">$compiledKotlin</span></span> preparedir <span class="hljs-variable"><span class="hljs-variable">$OUT_DIR</span></span> unaligned_apk=<span class="hljs-variable"><span class="hljs-variable">$OUT_DIR</span></span>/unaligned.apk <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/aapt package -f -m \ -F <span class="hljs-variable"><span class="hljs-variable">$unaligned_apk</span></span> \ -M <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/AndroidManifest.xml \ -S <span class="hljs-variable"><span class="hljs-variable">$PROJ</span></span>/res \ <span class="hljs-variable"><span class="hljs-variable">$libs_res</span></span> \ -I <span class="hljs-variable"><span class="hljs-variable">$ANDROID_JAR</span></span> --auto-add-overlay cp <span class="hljs-variable"><span class="hljs-variable">$dex</span></span> . <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/aapt add <span class="hljs-variable"><span class="hljs-variable">$unaligned_apk</span></span> classes.dex rm classes.dex aligned_apk=<span class="hljs-variable"><span class="hljs-variable">$OUT_DIR</span></span>/aligned.apk <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/zipalign -f 4 <span class="hljs-variable"><span class="hljs-variable">$unaligned_apk</span></span> <span class="hljs-variable"><span class="hljs-variable">$aligned_apk</span></span> <span class="hljs-variable"><span class="hljs-variable">$BUILD_TOOLS</span></span>/apksigner sign --ks <span class="hljs-variable"><span class="hljs-variable">$DEBUG_KEYSTORE</span></span> <span class="hljs-variable"><span class="hljs-variable">$aligned_apk</span></span></code> </pre> <br></div></div><br>  Menurut angka-angka, ternyata rakitan bersih membutuhkan waktu 7 detik, dan rakitan tambahan tidak tertinggal, karena kami tidak menembolok apa pun dan membangun kembali semuanya setiap waktu. <br><br><h2>  Maven </h2><br>  Ini dikembangkan oleh orang-orang di Yayasan Perangkat Lunak Apache untuk membangun proyek Java.  Buat konfigurasi untuknya dijelaskan dalam XML.  Revisi awal Maven dikumpulkan oleh Ant, dan sekarang mereka telah beralih ke rilis stabil terbaru. <br><br>  Pro Maven: <br><br><ul><li>  Ini mendukung artefak rakitan caching, mis.  membangun bertahap harus lebih cepat daripada bersih; </li><li>  mampu menyelesaikan dependensi pihak ketiga.  Yaitu  Saat Anda menentukan ketergantungan pada perpustakaan pihak ketiga di konfigurasi Maven atau Gradle, Anda tidak perlu khawatir tentang apa itu tergantung; </li><li>  Ada banyak dokumentasi terperinci, karena sudah ada di pasaran cukup lama. </li><li>  dan itu bisa menjadi mekanisme pembangunan yang akrab jika Anda baru saja datang ke dunia pengembangan Android dari backend. </li></ul><br>  Kekurangan Maven: <br><br><ul><li>  Tergantung pada versi Java yang diinstal pada mesin tempat perakitan berlangsung; </li><li>  Plugin Android sekarang didukung oleh pengembang pihak ketiga: Saya pribadi menganggap ini kelemahan yang sangat signifikan, karena suatu hari mereka mungkin berhenti melakukan ini; <br></li><li>  XML tidak terlalu cocok untuk mendeskripsikan konfigurasi build karena redundansi dan ketidaknyamanannya; </li><li>  baik, dan seperti yang akan kita lihat nanti, itu berjalan lebih lambat dari Gradle, setidaknya pada proyek uji. </li></ul><br>  Untuk membangun, kita perlu membuat pom.xml, yang berisi deskripsi proyek kami.  Di tajuk menunjukkan informasi dasar tentang artefak yang dikumpulkan, serta versi Kotlin. <br><br><div class="spoiler">  <b class="spoiler_title">membangun config pom.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.example<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>myapplication<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>apk<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>My Application<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span>1.3.41<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-stdlib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.google.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>4.1.1.4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>provided<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>process-sources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.simpligility.maven.plugins<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>android-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>28<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">buildTools</span></span></span><span class="hljs-tag">&gt;</span></span>28.0.3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">buildTools</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sdk</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">failOnNonStandardStructure</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">failOnNonStandardStructure</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  Dari segi angka, semuanya tidak terlalu cerah.  Perakitan yang bersih membutuhkan waktu sekitar 12 detik, sementara yang tambahan - 10. Ini berarti bahwa Maven entah bagaimana menggunakan kembali artefak dari rakitan sebelumnya, atau, menurut pendapat saya, kemungkinan plug-in untuk membangun proyek Android mencegahnya melakukan hal ini. <br><br>  Sekarang mereka menggunakan semua ini, saya pikir, pertama-tama, pembuat plugin adalah orang-orang dari kesederhanaan.  Informasi yang lebih dapat dipercaya tentang masalah ini tidak dapat ditemukan. <br><br><h2>  Bazel </h2><br>  Para insinyur di perut Google menciptakan Bazel untuk membangun proyek mereka dan baru-baru ini memindahkannya ke open source.  Untuk deskripsi build-configs seperti Python-Skylark atau Starlark digunakan, kedua nama memiliki tempat untuk menjadi.  Itu dirakit menggunakan rilis stabil terbaru sendiri. <br><br>  Pro Bazel: <br><br><ul><li>  dukungan untuk berbagai bahasa pemrograman.  Jika Anda meyakini dokumentasinya, maka ia tahu cara mengumpulkan proyek untuk iOs, Android, atau bahkan backend; </li><li>  Dapat men-cache artefak yang sebelumnya dikumpulkan </li><li>  mampu bekerja dengan dependensi Maven; </li><li>  Bazel, menurut pendapat saya, sangat mendukung untuk proyek-proyek yang didistribusikan.  Dia dapat menentukan revisi spesifik dari repositori git sebagai dependensi, dan dia akan menurunkannya dan menyimpannya selama proses build.  Untuk mendukung skalabilitas, Bazel dapat, misalnya, mendistribusikan berbagai target pada server build berbasis cloud, yang memungkinkan Anda untuk dengan cepat membangun proyek besar. </li></ul><br>  Kekurangan Bazel: <br><br><ul><li>  semua pesona ini sangat sulit dipertahankan, karena konfigurasi pembuatannya sangat rinci dan menggambarkan perakitan pada tingkat rendah; </li><li>  antara lain, tampaknya Bazel sekarang aktif berkembang.  Karena itu, beberapa contoh tidak dikumpulkan, dan yang dikumpulkan dapat menggunakan fungsi yang sudah usang, yang ditandai sebagai usang; </li><li>  dokumentasi sekarang juga menyisakan banyak yang diinginkan, terutama bila dibandingkan dengan Gradle; </li><li>  pada proyek kecil, pemanasan dan analisis build-config mungkin memakan waktu lebih lama daripada perakitan itu sendiri, yang menurut saya tidak bagus. </li></ul><br>  Secara konseptual, konfigurasi Bazel dasar terdiri dari WORKSPACE, di mana kami menggambarkan segala macam hal global untuk suatu proyek, dan BUILD, yang berisi target langsung untuk perakitan. <br>  Mari kita jelaskan WORKSPACE.  Karena kami memiliki proyek Android, hal pertama yang kami konfigurasi adalah Android SDK.  Juga, aturan untuk membongkar konfigurasi diimpor di sini.  Kemudian, karena proyek ditulis dalam Kotlin, kita harus menentukan aturan untuk itu.  Di sini kita melakukan ini, merujuk pada revisi spesifik langsung dari repositori git. <br><br><div class="spoiler">  <b class="spoiler_title">WORKSPACE</b> <div class="spoiler_text"><pre> <code class="python hljs">android_sdk_repository( name = <span class="hljs-string"><span class="hljs-string">"androidsdk"</span></span>, api_level = <span class="hljs-number"><span class="hljs-number">28</span></span>, build_tools_version = <span class="hljs-string"><span class="hljs-string">"28.0.3"</span></span> ) load(<span class="hljs-string"><span class="hljs-string">"@bazel_tools//tools/build_defs/repo:http.bzl"</span></span>, <span class="hljs-string"><span class="hljs-string">"http_archive"</span></span>) <span class="hljs-comment"><span class="hljs-comment"># # KOTLIN RULES # RULES_KOTLIN_VERSION = "990fcc53689c8b58b3229c7f628f843a60cb9f5c" http_archive( name = "io_bazel_rules_kotlin", url = "https://github.com/bazelbuild/rules_kotlin/archive/%s.zip" % RULES_KOTLIN_VERSION, strip_prefix = "rules_kotlin-%s" % RULES_KOTLIN_VERSION ) load("@io_bazel_rules_kotlin//kotlin:kotlin.bzl", "kotlin_repositories", "kt_register_toolchains") kotlin_repositories() kt_register_toolchains()</span></span></code> </pre><br></div></div><br>  Sekarang mari kita mulai pada BUILD. <br><br>  Pertama kita mengimpor aturan untuk merakit Kotlin dan menjelaskan apa yang ingin kita kumpulkan.  Dalam kasus kami, ini adalah aplikasi Android, jadi kami menggunakan android_binary, tempat kami mengatur manifes, SDK minimum, dll.  Aplikasi kita akan bergantung pada sumbernya, jadi kami menyebutkannya dalam deps dan beralih ke apa mereka dan di mana menemukannya.  Kode juga akan bergantung pada sumber daya dan pustaka appcompat.  Untuk sumber daya, kami menggunakan target yang biasa untuk mengumpulkan sumber-sumber android, tetapi kami hanya menetapkan sumber daya untuk itu tanpa kelas java.  Dan kami menjelaskan beberapa aturan yang mengimpor perpustakaan pihak ketiga.  Itu juga menyebutkan appcompat_core, yang bergantung pada appcompat. <br><br><div class="spoiler">  <b class="spoiler_title">BANGUN</b> <div class="spoiler_text"><pre> <code class="python hljs">load(<span class="hljs-string"><span class="hljs-string">"@io_bazel_rules_kotlin//kotlin:kotlin.bzl"</span></span>, <span class="hljs-string"><span class="hljs-string">"kt_android_library"</span></span>) android_binary( name = <span class="hljs-string"><span class="hljs-string">"app"</span></span>, custom_package = <span class="hljs-string"><span class="hljs-string">"com.example.myapplication"</span></span>, manifest = <span class="hljs-string"><span class="hljs-string">"src/main/AndroidManifest.xml"</span></span>, manifest_values = { <span class="hljs-string"><span class="hljs-string">"minSdkVersion"</span></span>: <span class="hljs-string"><span class="hljs-string">"15"</span></span>, }, deps = [ <span class="hljs-string"><span class="hljs-string">":lib"</span></span>, ], ) kt_android_library( name = <span class="hljs-string"><span class="hljs-string">"lib"</span></span>, srcs = glob([<span class="hljs-string"><span class="hljs-string">"src/main/java/**/*"</span></span>]), deps = [ <span class="hljs-string"><span class="hljs-string">":res"</span></span>, <span class="hljs-string"><span class="hljs-string">":appcompat"</span></span>, ], ) android_library( name = <span class="hljs-string"><span class="hljs-string">"res"</span></span>, resource_files = glob([<span class="hljs-string"><span class="hljs-string">"src/main/res/**/*"</span></span>]), manifest = <span class="hljs-string"><span class="hljs-string">"src/main/AndroidManifest.xml"</span></span>, custom_package = <span class="hljs-string"><span class="hljs-string">"com.example.myapplication"</span></span>, ) aar_import( name = <span class="hljs-string"><span class="hljs-string">"appcompat"</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/appcompat.aar"</span></span>, deps = [ <span class="hljs-string"><span class="hljs-string">":appcompat_core"</span></span>, ] ) aar_import( name = <span class="hljs-string"><span class="hljs-string">"appcompat_core"</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/core.aar"</span></span>, )</code> </pre><br></div></div><br>  Dalam jumlah untuk proyek sekecil itu, semuanya terlihat menyedihkan.  Lebih dari setengah menit menuju bangunan yang bersih Halo, dunia!  - banyak.  Waktu bangun tambahan juga jauh dari sempurna. <br><br>  Bazel digunakan oleh penciptanya (Google) untuk beberapa proyek mereka, termasuk yang server, serta Dropbox dan Huawei, yang mengumpulkan aplikasi seluler untuk mereka.  Dan Belati 2 yang terkenal juga akan pergi ke Bazel. <br><br><h2>  Buck </h2><br>  Itu ditemukan oleh pembelot dari Google ke Facebook.  Dia menggunakan Python untuk menggambarkan konfigurasi, dan kemudian bermigrasi ke Skylark yang disebutkan hari ini.  Dia pergi, tiba-tiba, menggunakan sistem Semut. <br><br>  Buck Pros: <br><br><ul><li>  mendukung berbagai bahasa pemrograman dan dapat membangun Android dan iOS; </li><li>  Dapat men-cache artefak yang sebelumnya dikumpulkan </li><li>  Buck membuat implementasi dex mereka sendiri, yang bekerja lebih cepat daripada yang standar dan hang dengan daemon sistem.  Jadi mereka menghemat waktu pada inisialisasi dex.  Insinyur telah benar-benar dioptimalkan.  Misalnya, Buck tidak mengumpulkan kode yang bergantung pada pustaka jika antarmuka tidak berubah saat mengubah pustaka internal.  Demikian pula untuk sumber daya: jika pengidentifikasi tidak berubah, maka saat mengubah sumber daya, kode tidak dipasang kembali. </li><li>  ada sebuah plugin yang dapat menyembunyikan Buck di belakang konfigurasi Gredlovsky.  Yaitu  Anda mendapatkan sesuatu seperti proyek Gradle normal, yang sebenarnya dibangun melalui Buck. </li></ul><br>  Cons Buck: <br><br><ul><li>  sulit dipertahankan seperti Bazel.  Yaitu  di sini juga perlu untuk menggambarkan aturan tingkat rendah yang dengan jelas menggambarkan proses perakitan; </li><li>  antara lain, Buck tidak dapat menyelesaikan ketergantungan Maven sendiri. </li></ul><br>  Jadi, apa konfigurasi konfigurasi untuk Hello, world!  melalui uang?  Di sini kami menjelaskan satu file konfigurasi, di mana kami mengindikasikan bahwa kami ingin membangun proyek Android yang akan ditandatangani dengan kunci debug.  Aplikasi juga akan tergantung pada source - lib di array deps.  Berikutnya adalah target dengan pengaturan tanda tangan.  Saya menggunakan kunci debit yang disertakan dengan Android SDK.  Segera setelah itu mengikuti target, yang akan mengumpulkan sumber-sumber Kotlin untuk kita.  Seperti Bazel, itu tergantung pada sumber daya dan kompatibilitas perpustakaan. <br><br>  Kami menggambarkannya.  Ada target terpisah untuk sumber daya di Buck, jadi sepeda tidak berguna.  Berikut adalah aturan untuk perpustakaan pihak ketiga yang diunduh. <br><br><div class="spoiler">  <b class="spoiler_title">BANGUN</b> <div class="spoiler_text"><pre> <code class="python hljs">android_binary( name = <span class="hljs-string"><span class="hljs-string">'app'</span></span>, manifest = <span class="hljs-string"><span class="hljs-string">'src/main/AndroidManifest.xml'</span></span>, manifest_entries = { <span class="hljs-string"><span class="hljs-string">'min_sdk_version'</span></span>: <span class="hljs-number"><span class="hljs-number">15</span></span>, }, keystore = <span class="hljs-string"><span class="hljs-string">':debug_keystore'</span></span>, deps = [ <span class="hljs-string"><span class="hljs-string">':lib'</span></span>, ], ) keystore( name = <span class="hljs-string"><span class="hljs-string">'debug_keystore'</span></span>, store = <span class="hljs-string"><span class="hljs-string">'debug.keystore'</span></span>, properties = <span class="hljs-string"><span class="hljs-string">'debug.keystore.properties'</span></span>, ) android_library( name = <span class="hljs-string"><span class="hljs-string">'lib'</span></span>, srcs = glob([<span class="hljs-string"><span class="hljs-string">'src/main/java/*.kt'</span></span>]), deps = [ <span class="hljs-string"><span class="hljs-string">':res'</span></span>, <span class="hljs-string"><span class="hljs-string">':compat'</span></span>, <span class="hljs-string"><span class="hljs-string">':compat_core'</span></span>, ], language = <span class="hljs-string"><span class="hljs-string">'kotlin'</span></span>, ) android_resource( name = <span class="hljs-string"><span class="hljs-string">'res'</span></span>, res = <span class="hljs-string"><span class="hljs-string">"src/main/res"</span></span>, package = <span class="hljs-string"><span class="hljs-string">'com.example.myapplication'</span></span>, ) android_prebuilt_aar( name = <span class="hljs-string"><span class="hljs-string">'compat'</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/appcompat.aar"</span></span>, ) android_prebuilt_aar( name = <span class="hljs-string"><span class="hljs-string">'compat_core'</span></span>, aar = <span class="hljs-string"><span class="hljs-string">"libs/core.aar"</span></span>, )</code> </pre><br></div></div><br>  Semua ini berjalan sangat cepat.  Rakitan bersih membutuhkan waktu lebih dari 7 detik, sementara rakitan tambahan benar-benar tidak terlihat 200 milidetik.  Saya pikir ini adalah hasil yang sangat bagus. <br><br>  Inilah yang dilakukan Facebook.  Selain aplikasi utama mereka, mereka mengumpulkan Facebook Messenger untuk mereka.  Dan Uber, yang membuat plugin untuk Gradle dan Airbnb dengan Lyft. <br><br><h2>  Kesimpulan </h2><br>  Sekarang kita telah berbicara tentang masing-masing sistem pembangunan, kita dapat membandingkan satu sama lain menggunakan contoh Halo, dunia!  Perakitan konsol menyenangkan dengan stabilitasnya.  Waktu eksekusi skrip dari terminal dapat dianggap sebagai referensi untuk perakitan build bersih, karena biaya pihak ketiga untuk skrip parsing minimal di sini.  Dalam hal ini, saya akan menyebut Maven orang luar yang jelas untuk peningkatan yang sangat tidak signifikan dalam perakitan tambahan.  Bazel mem-parsing konfigurasi untuk waktu yang sangat lama dan menginisialisasi: ada ide bahwa entah bagaimana cache hasil inisialisasi, karena penambahan incremental itu berjalan jauh lebih cepat daripada bersih.  Buck adalah pemimpin koleksi ini.  Sangat cepat perakitan bersih dan tambahan. <br><br><img src="https://habrastorage.org/webt/br/f3/_p/brf3_pzmfeixbecyexdghd5ivfs.jpeg"><br><br>  Sekarang bandingkan pro dan kontra.  Saya tidak akan memasukkan Maven dalam perbandingan, karena jelas kehilangan ke Gradle dan hampir tidak pernah digunakan di pasar.  Saya menyatukan Buck dan Bazel, karena mereka memiliki kelebihan dan kekurangan yang kira-kira sama. <br><br>  Jadi, tentang Gradle: <br><br><ul><li>  yang pertama dan, menurut saya, yang paling penting adalah sederhana.  Sangat sederhana; </li><li>  di luar kotak, bongkar dan keluarkan dependensi; </li><li>  baginya ada banyak pelatihan dan dokumentasi yang berbeda; </li><li>  didukung secara aktif oleh Google dan komunitas.  Integrasi hebat dengan Android Studio, alat pengembangan andalan saat ini.  Dan semua fitur baru untuk membangun aplikasi Android pertama kali muncul di Gradle. </li></ul><br>  Tentang Buck / Bazel: <br><br><ul><li>  pasti bisa sangat cepat dibandingkan dengan Gradle.  Saya percaya bahwa ini terutama terlihat pada proyek yang sangat besar </li><li>  Anda dapat menyimpan satu proyek di mana akan ada kode sumber iOS dan Android, dan kumpulkan dengan satu sistem build.  Hal ini memungkinkan beberapa bagian aplikasi meraba-raba antar platform.  Misalnya, ini adalah bagaimana Chromium berjalan; </li><li>  dipaksa untuk menjelaskan dependensi secara terperinci dan dengan demikian secara harfiah memaksa pengembang untuk menjadi multi-modular. </li></ul><br>  Jangan lupa tentang kontra. <br><br>  Gradle membayar kesederhanaannya dengan menjadi lambat dan tidak efisien. <br>  Buck / Bazel, sebaliknya, karena kecepatannya, menderita dari kebutuhan untuk menggambarkan proses pembangunan di konfigurasi secara lebih rinci.  Yah, karena mereka muncul di pasar relatif baru-baru ini, tidak ada banyak dokumentasi dan berbagai lembar contekan. <br><br><h2>  iFUNNY </h2><br>  Mungkin Anda memiliki pertanyaan bagaimana kami mengumpulkan iFunny.  Sama seperti banyak - menggunakan Gradle.  Dan ada alasan untuk ini: <br><br><ol><li>  Belum jelas apa keuntungan dalam kecepatan perakitan ini akan memberi kita.  Membangun iFunny yang bersih membutuhkan waktu hampir 3 menit, dan tambahan - sekitar satu menit, yang sebenarnya tidak terlalu lama. </li><li>  Konfigurasi buck atau Bazel build lebih sulit dipertahankan.  Dalam kasus Buck, Anda juga perlu memantau relevansi perpustakaan yang terhubung dan perpustakaan tempat mereka bergantung. </li><li>  Adalah hal biasa untuk mentransfer proyek yang ada dari Gradle ke Buck / Bazel, terutama dalam kondisi laba yang tidak dapat dipahami. </li></ol><br>  Jika proyek Anda akan memakan waktu lebih dari 45 menit dan ada sekitar 20 orang di tim pengembangan Android, maka masuk akal untuk berpikir tentang mengubah sistem pembangunan.  Jika Anda dan teman Anda melihat startup, maka gunakan Gradle dan lepaskan pemikiran ini. <br><br><img src="https://habrastorage.org/webt/ah/po/1o/ahpo1oen8smqi1ks_fdqfqeydea.jpeg"><br><br>  Saya akan dengan senang hati membahas prospek alternatif untuk Gradle di komentar! <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan ke proyek</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id469771/">https://habr.com/ru/post/id469771/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id469753/index.html">9 penemuan open source terbaik untuk September 2019</a></li>
<li><a href="../id469755/index.html">Bagaimana menjadi programmer yang baik</a></li>
<li><a href="../id469757/index.html">Teknologi AR pada layanan lukisan</a></li>
<li><a href="../id469765/index.html">Pujian rileks, dan kritik menyinggung - bagaimana mengevaluasi pekerjaan orang lain, sehingga semua orang baik-baik saja</a></li>
<li><a href="../id469767/index.html">Bagaimana kami memilih ServiceDesk. Bagian 1</a></li>
<li><a href="../id469775/index.html">Buat suara</a></li>
<li><a href="../id469779/index.html">Pertemuan Masa Depan London Academy Terbuka</a></li>
<li><a href="../id469783/index.html">Mengapa masa depan pengiriman mungkin masih di belakang airships</a></li>
<li><a href="../id469785/index.html">Penggunaan Intel NUC - Menangkan Kontes NUC. Hasil dan pemenang</a></li>
<li><a href="../id469797/index.html">Solusi Veeam PN dan fitur-fitur barunya di versi 2.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>