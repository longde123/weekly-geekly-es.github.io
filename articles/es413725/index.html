<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï• üë† üëãüèø Trabajando con matrices en bash üëô üç± üßëüèΩ‚Äçü§ù‚Äçüßëüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Los programadores usan bash regularmente para resolver muchas tareas relacionadas con el desarrollo de software. Al mismo tiempo, las matrices bash a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Trabajando con matrices en bash</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/413725/">  Los programadores usan bash regularmente para resolver muchas tareas relacionadas con el desarrollo de software.  Al mismo tiempo, las matrices bash a menudo se consideran una de las caracter√≠sticas m√°s incomprensibles de este shell (probablemente, las matrices solo son superadas por las expresiones regulares a este respecto).  El autor del material, cuya traducci√≥n publicamos hoy, invita a todos al maravilloso mundo de las matrices de bash que, si se acostumbra a su sintaxis inusual, puede traer muchos beneficios. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/efa/72d/7c7/efa72d7c779f3915863c44ac528143a2.jpg" alt="imagen"></div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">El verdadero desaf√≠o de que las matrices bash sean √∫tiles</font> </h2><br>  Escribir sobre bash es controvertido.  El hecho es que los art√≠culos sobre bash a menudo se convierten en gu√≠as de usuario dedicadas a historias sobre las caracter√≠sticas sint√°cticas de los comandos en cuesti√≥n.  Este art√≠culo est√° escrito de manera diferente, esperamos que no lo encuentre en el pr√≥ximo "manual de usuario". <br><br>  Dado lo anterior, imagine un escenario real para usar matrices en bash.  Suponga que se enfrenta a la tarea de evaluar y optimizar una utilidad a partir de un nuevo conjunto interno de herramientas utilizadas en su empresa.  En el primer paso de este estudio, debe probarlo con diferentes conjuntos de par√°metros.  La prueba tiene como objetivo estudiar c√≥mo se comporta un nuevo conjunto de herramientas cuando utilizan un n√∫mero diferente de subprocesos.  Para simplificar la presentaci√≥n, suponemos que la "caja de herramientas" es una "caja negra" compilada a partir de c√≥digo C ++.  Al usarlo, el √∫nico par√°metro en el que podemos influir es el n√∫mero de subprocesos reservados para el procesamiento de datos.  Llamar al sistema bajo investigaci√≥n desde la l√≠nea de comando se ve as√≠: <br><br><pre><code class="hljs pgsql">./pipeline <span class="hljs-comment"><span class="hljs-comment">--threads 4</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Los fundamentos</font> </h2><br>  En primer lugar, declaramos una matriz que contiene los valores del par√°metro <code>--threads</code> con los que queremos probar el sistema.  Esta matriz se ve as√≠: <br><br><pre> <code class="hljs lisp">allThreads=(<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> <span class="hljs-number"><span class="hljs-number">128</span></span>)</code> </pre> <br>  En este ejemplo, todos los elementos son n√∫meros, pero de hecho, en las matrices bash, puede almacenar tanto n√∫meros como cadenas al mismo tiempo.  Por ejemplo, la declaraci√≥n de dicha matriz es bastante aceptable: <br><br><pre> <code class="hljs lisp">myArray=(<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"three"</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-string"><span class="hljs-string">"five"</span></span>)</code> </pre> <br>  Al igual que con otras variables bash, aseg√∫rese de que no haya espacios alrededor del signo <code>=</code> .  De lo contrario, bash considerar√° el nombre de la variable como el nombre del programa que necesita ejecutar, ¬°y <code>=</code> su primer argumento! <br><br>  Ahora que hemos inicializado la matriz, extraigamos algunos elementos de ella.  Aqu√≠ puede observar, por ejemplo, que el <code>echo $allThreads</code> solo generar√° el primer elemento de la matriz. <br><br>  Para comprender las razones de este comportamiento, vamos a desviarnos un poco de las matrices y recordar c√≥mo trabajar con variables en bash.  Considere el siguiente ejemplo: <br><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">type</span></span>=<span class="hljs-string"><span class="hljs-string">"article"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Found 42 </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$type</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br>  Suponga que tiene una variable <code>$type</code> que contiene una cadena que representa un sustantivo.  Despu√©s de esta palabra, agregue la letra <code>s</code> .  Sin embargo, no puede simplemente agregar esta letra al final del nombre de la variable, ya que esto convertir√° el comando para acceder a la variable en <code>$types</code> , es decir, trabajaremos con una variable completamente diferente.  En esta situaci√≥n, puede usar una construcci√≥n como <code>echo "Found 42 "$type"s"</code> .  Pero es mejor resolver este problema usando llaves: <code>echo "Found 42 ${type}s"</code> , que nos permite decirle a bash d√≥nde comienza y termina el nombre de la variable (curiosamente, la misma sintaxis se usa en JavaScript ES6 para incorporar variables en expresiones en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cadenas de patrones</a> ). <br><br>  Ahora volvamos a las matrices.  Resulta que, aunque las llaves no son necesarias cuando se trabaja con variables, son necesarias para trabajar con matrices.  Le permiten establecer √≠ndices para acceder a los elementos de la matriz.  Por ejemplo, un comando de la forma <code>echo ${allThreads[1]}</code> generar√° el segundo elemento de la matriz.  Si olvida las llaves en la construcci√≥n anterior, bash percibir√° <code>[1]</code> como una cadena y procesar√° lo que suceda en consecuencia. <br><br>  Como puede ver, las matrices en bash tienen una sintaxis extra√±a, pero en ellas, al menos, la numeraci√≥n de los elementos comienza desde cero.  Esto los hace similares a las matrices de muchos otros lenguajes de programaci√≥n. <br><br><h2>  <font color="#3AC1EF">Formas de acceder a los elementos de la matriz</font> </h2><br>  En el ejemplo anterior, utilizamos √≠ndices enteros en matrices que se especifican expl√≠citamente.  Ahora considere dos formas m√°s de trabajar con matrices. <br><br>  El primer m√©todo es aplicable si necesitamos el elemento <code>$i</code> √©simo de la matriz, donde <code>$i</code> es una variable que contiene el √≠ndice del elemento de matriz deseado.  Puede extraer este elemento de la matriz utilizando una construcci√≥n de la forma <code>echo ${allThreads[$i]}</code> . <br><br>  El segundo m√©todo le permite mostrar todos los elementos de la matriz.  Consiste en reemplazar el √≠ndice num√©rico con el s√≠mbolo <code>@</code> (se puede interpretar como un comando que apunta a todos los elementos de la matriz).  Se ve as√≠: <code>echo ${allThreads[@]}</code> . <br><br><h2>  <font color="#3AC1EF">Iterando sobre elementos de matriz en bucles</font> </h2><br>  Los principios anteriores de trabajar con elementos de matriz nos ser√°n √∫tiles para resolver el problema de enumerar elementos de matriz.  En nuestro caso, esto significa lanzar el comando de <code>pipeline</code> en estudio con cada uno de los valores, que simboliza el n√∫mero de subprocesos y se almacena en una matriz.  Se ve as√≠: <br><br><pre> <code class="hljs powershell"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{allThreads[<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>]}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ./pipeline -<span class="hljs-literal"><span class="hljs-literal">-threads</span></span> <span class="hljs-variable"><span class="hljs-variable">$t</span></span> done</code> </pre> <br><h2>  <font color="#3AC1EF">Enumeraci√≥n de √≠ndices de matriz en bucles</font> </h2><br>  Ahora considere un enfoque ligeramente diferente para ordenar las matrices.  En lugar de iterar sobre los elementos, podemos iterar sobre los √≠ndices de la matriz: <br><br><pre> <code class="hljs powershell"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{!allThreads[<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>]}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ./pipeline -<span class="hljs-literal"><span class="hljs-literal">-threads</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{allThreads[<span class="hljs-variable"><span class="hljs-variable">$i</span></span>]} done</code> </pre> <br>  Analicemos lo que est√° sucediendo aqu√≠.  Como ya hemos visto, una construcci√≥n de la forma <code>${allThreads[@]}</code> representa todos los elementos de la matriz.  Cuando agregamos un signo de exclamaci√≥n aqu√≠, convertimos esta construcci√≥n en <code>${!allThreads[@]}</code> , lo que lleva al hecho de que devuelve los √≠ndices de la matriz (de 0 a 7 en nuestro caso). <br><br>  En otras palabras, el ciclo <code>for</code> sobre todos los √≠ndices de la matriz representada como la variable <code>$i</code> , y en el cuerpo del ciclo, se <code>--thread</code> los elementos de la matriz que sirven como valores del par√°metro <code>${allThreads[$i]}</code> usando la <code>${allThreads[$i]}</code> . <br><br>  Leer este c√≥digo es m√°s dif√≠cil que el del ejemplo anterior.  Por lo tanto, surge la pregunta de para qu√© sirven todas estas dificultades.  Y necesitamos esto porque en algunas situaciones, cuando se procesan matrices en bucles, debe conocer tanto los √≠ndices como los valores de los elementos.  Por ejemplo, si necesita omitir el primer elemento de una matriz, iterar sobre los √≠ndices nos salvar√°, por ejemplo, de la necesidad de crear una variable adicional y de incrementarla en un bucle para trabajar con elementos de la matriz. <br><br><h2>  <font color="#3AC1EF">Relleno de matrices</font> </h2><br>  Hasta ahora, hemos explorado el sistema invocando el comando de <code>pipeline</code> y pas√°ndole cada uno de los valores del par√°metro <code>--threads</code> nos interesa.  Ahora suponga que este comando proporciona la duraci√≥n de un determinado proceso en segundos.  Nos gustar√≠a interceptar los datos que se le devuelven en cada iteraci√≥n y guardarlos en otra matriz.  Esto nos dar√° la oportunidad de trabajar con los datos almacenados una vez que hayan finalizado todas las pruebas. <br><br><h2>  <font color="#3AC1EF">Construcciones de sintaxis √∫tiles</font> </h2><br>  Antes de hablar sobre c√≥mo agregar datos a las matrices, veamos algunas construcciones de sintaxis √∫tiles.  Para empezar, necesitamos un mecanismo para obtener la salida de datos mediante comandos bash.  Para capturar la salida de un comando, debe usar la siguiente construcci√≥n: <br><br><pre> <code class="hljs lua"><span class="hljs-built_in"><span class="hljs-built_in">output</span></span>=$( ./my_script.sh )</code> </pre> <br>  Despu√©s de ejecutar este comando, lo que <code>myscript.sh</code> se almacenar√° en la variable <code>$output</code> . <br><br>  La segunda construcci√≥n, que ser√° √∫til muy pronto, nos permite adjuntar nuevos datos a las matrices.  Se ve as√≠: <br><br><pre> <code class="hljs lisp">myArray+=( <span class="hljs-string"><span class="hljs-string">"newElement1"</span></span> <span class="hljs-string"><span class="hljs-string">"newElement2"</span></span> )</code> </pre> <br><h2>  <font color="#3AC1EF">Resoluci√≥n de problemas</font> </h2><br>  Ahora, si re√∫ne todo lo que acabamos de aprender, puede crear un script para probar el sistema, que ejecuta un comando con cada uno de los valores de los par√°metros de la matriz y almacena en la otra matriz lo que muestra este comando. <br><br><pre> <code class="hljs powershell">allThreads=(<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> <span class="hljs-number"><span class="hljs-number">128</span></span>) allRuntimes=() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{allThreads[<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>]}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> runtime=<span class="hljs-variable"><span class="hljs-variable">$</span></span>(./pipeline -<span class="hljs-literal"><span class="hljs-literal">-threads</span></span> <span class="hljs-variable"><span class="hljs-variable">$t</span></span>) allRuntimes+=( <span class="hljs-variable"><span class="hljs-variable">$runtime</span></span> ) done</code> </pre> <br><h2>  <font color="#3AC1EF">Que sigue</font> </h2><br>  Acabamos de examinar c√≥mo usar las matrices bash para iterar sobre los par√°metros utilizados al iniciar un programa y guardar los datos que devuelve este programa.  Sin embargo, las opciones para usar matrices no se limitan a este escenario.  Aqu√≠ hay un par de ejemplos m√°s. <br><br><h2>  <font color="#3AC1EF">Alertas de problemas</font> </h2><br>  En este escenario, veremos una aplicaci√≥n que se divide en m√≥dulos.  Cada uno de estos m√≥dulos tiene su propio archivo de registro.  Podemos escribir un script de trabajo <code>cron</code> que, si se encuentran problemas en el archivo de registro correspondiente, notificar√° por correo electr√≥nico a la persona responsable de cada uno de los m√≥dulos: <br><br><pre> <code class="hljs kotlin">#  -    logPaths=(<span class="hljs-string"><span class="hljs-string">"api.log"</span></span> <span class="hljs-string"><span class="hljs-string">"auth.log"</span></span> <span class="hljs-string"><span class="hljs-string">"jenkins.log"</span></span> <span class="hljs-string"><span class="hljs-string">"data.log"</span></span>) logEmails=(<span class="hljs-string"><span class="hljs-string">"jay@email"</span></span> <span class="hljs-string"><span class="hljs-string">"emma@email"</span></span> <span class="hljs-string"><span class="hljs-string">"jon@email"</span></span> <span class="hljs-string"><span class="hljs-string">"sophia@email"</span></span>) #         <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ${!logPaths[@]}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> log=${logPaths[$i]} stakeholder=${logEmails[$i]} numErrors=$( tail -n <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$log</span></span></span><span class="hljs-string">"</span></span> | grep <span class="hljs-string"><span class="hljs-string">"ERROR"</span></span> | wc -l ) #       <span class="hljs-number"><span class="hljs-number">5</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$numErrors</span></span></span><span class="hljs-string">"</span></span> -gt <span class="hljs-number"><span class="hljs-number">5</span></span> ]]; then   emailRecipient=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$stakeholder</span></span></span><span class="hljs-string">"</span></span>   emailSubject=<span class="hljs-string"><span class="hljs-string">"WARNING: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${log}</span></span></span><span class="hljs-string"> showing unusual levels of errors"</span></span>   emailBody=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${numErrors}</span></span></span><span class="hljs-string"> errors found in log </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${log}</span></span></span><span class="hljs-string">"</span></span>   echo <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$emailBody</span></span></span><span class="hljs-string">"</span></span> | mailx -s <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$emailSubject</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$emailRecipient</span></span></span><span class="hljs-string">"</span></span> fi done</code> </pre> <br><h2>  <font color="#3AC1EF">Solicitudes API</font> </h2><br>  Suponga que desea recopilar informaci√≥n sobre qu√© usuarios comentan sus publicaciones en Medium.  Como no tenemos acceso directo a la base de datos de este sitio, no discutiremos las consultas SQL.  Sin embargo, puede usar varias API para acceder a este tipo de datos. <br><br>  Para evitar largas conversaciones sobre autenticaci√≥n y tokens, utilizaremos, como punto final, el servicio p√∫blico de prueba de API <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">JSONPlaceholder</a> .  Despu√©s de recibir una publicaci√≥n del servicio y extraer datos de su c√≥digo en las direcciones de correo electr√≥nico de los comentaristas, podemos poner estos datos en una matriz: <br><br><pre> <code class="hljs kotlin">endpoint=<span class="hljs-string"><span class="hljs-string">"https://jsonplaceholder.typicode.com/comments"</span></span> allEmails=() #   <span class="hljs-number"><span class="hljs-number">10</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> postId <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> {<span class="hljs-number"><span class="hljs-number">1</span></span>..<span class="hljs-number"><span class="hljs-number">10</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> #    API       response=$(curl <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${endpoint}</span></span></span><span class="hljs-string">?postId=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${postId}</span></span></span><span class="hljs-string">"</span></span>) #  jq   JSON       allEmails+=( $( jq <span class="hljs-string"><span class="hljs-string">'.[].email'</span></span> &lt;&lt;&lt; <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$response</span></span></span><span class="hljs-string">"</span></span> ) ) done</code> </pre> <br>  Tenga en cuenta que la herramienta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">jq</a> se usa aqu√≠, lo que permite analizar JSON en la l√≠nea de comandos.  No vamos a entrar en detalles sobre c√≥mo trabajar con jq si est√° interesado en esta herramienta; consulte la documentaci√≥n correspondiente. <br><br><h2>  <font color="#3AC1EF">Bash o Python?</font> </h2><br>  Matrices: una funci√≥n √∫til y est√° disponible no solo en bash.  El que escribe scripts para la l√≠nea de comando puede tener una pregunta l√≥gica sobre en qu√© situaciones vale la pena usar bash y en qu√©, por ejemplo, Python. <br><br>  En mi opini√≥n, la respuesta a esta pregunta radica en cu√°nto depende el programador de una tecnolog√≠a en particular.  Digamos, si el problema se puede resolver directamente en la l√≠nea de comando, entonces nada impide el uso de bash.  Sin embargo, en el caso de que, por ejemplo, el script que le interesa sea parte de un proyecto escrito en Python, puede usar Python. <br><br>  Por ejemplo, para resolver el problema considerado aqu√≠, puede usar un script escrito en Python, sin embargo, esto se reducir√° a escribir envoltorios para Python para bash: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> subprocess all_threads = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">64</span></span>, <span class="hljs-number"><span class="hljs-number">128</span></span>] all_runtimes = [] #         <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> all_threads: cmd = <span class="hljs-string"><span class="hljs-string">'./pipeline --threads {}'</span></span>.format(t) #   subprocess   ,    p = subprocess.Popen(cmd, stdout=subprocess.PIPE, shell=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) output = p.communicate()[<span class="hljs-number"><span class="hljs-number">0</span></span>] all_runtimes.append(output)</code> </pre> <br>  Quiz√°s la soluci√≥n a este problema con bash, sin involucrar otras tecnolog√≠as, es m√°s corta y m√°s comprensible, y aqu√≠ puede prescindir por completo de Python. <br><br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>  En este material analizamos muchos dise√±os utilizados para trabajar con matrices.  Aqu√≠ hay una tabla donde encontrar√° lo que hemos revisado y algo nuevo. <br><table><tbody><tr><td>  Construcci√≥n de sintaxis </td><td>  Descripci√≥n </td></tr><tr><td> <code>arr=()</code> </td> <td>  Crea una matriz vac√≠a </td></tr><tr><td> <code>arr=(1 2 3)</code> </td> <td>  Inicializaci√≥n de matriz </td></tr><tr><td> <code>${arr[2]}</code> </td> <td>  Obtener el tercer elemento de una matriz </td></tr><tr><td> <code>${arr[@]}</code> </td> <td>  Obtener todos los elementos de la matriz </td></tr><tr><td> <code>${!arr[@]}</code> </td> <td>  Obtener √≠ndices de matriz </td></tr><tr><td> <code>${#arr[@]}</code> </td> <td>  C√°lculo del tama√±o de matriz </td></tr><tr><td> <code>arr[0]=3</code> </td> <td>  Sobrescribir el primer elemento de una matriz </td></tr><tr><td> <code>arr+=(4)</code> </td> <td>  Unirse a una matriz de valores </td></tr><tr><td> <code>str=$(ls)</code> </td> <td>  Guardar la salida del <code>ls</code> como una cadena </td></tr><tr><td> <code>arr=( $(ls) )</code> </td> <td>  Guardar la salida del <code>ls</code> como una matriz de nombres de archivo </td></tr><tr><td> <code>${arr[@]:s:n}</code> </td> <td>  Obtener elementos de matriz de elemento con √≠ndice <code>s</code> a elemento con √≠ndice <code>s+(n-1)</code> <br></td></tr></tbody></table><br>  A primera vista, las matrices bash pueden parecer bastante extra√±as, pero las posibilidades que ofrecen merecen la pena para hacer frente a estas rarezas.  Creemos que habiendo dominado las matrices de bash, las usar√° con bastante frecuencia.  Es f√°cil imaginar innumerables escenarios en los que estas matrices pueden ser √∫tiles. <br><br>  <b>Estimados lectores!</b>  Si tiene ejemplos interesantes del uso de matrices en scripts de bash, comp√°rtalos. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es413725/">https://habr.com/ru/post/es413725/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es413715/index.html">Pensi√≥n de jubilaci√≥n de TI</a></li>
<li><a href="../es413717/index.html">GraphQL para plataformas InterSystems</a></li>
<li><a href="../es413719/index.html">C ++ 20 en camino! Encuentro en Rapperswil Yona</a></li>
<li><a href="../es413721/index.html">Comprobaci√≥n de tiempo: Timejacking vs Bitcoin</a></li>
<li><a href="../es413723/index.html">Saga de servicios electr√≥nicos y sus ubicaciones. Parte 2. Armario electr√≥nico</a></li>
<li><a href="../es413729/index.html">C√≥mo y por qu√© escribimos nuestro ECS</a></li>
<li><a href="../es413731/index.html">BA / SA Investigaci√≥n de mercado laboral</a></li>
<li><a href="../es413733/index.html">Mikrosh, Krista, Apogee, Lviv: las primeras computadoras sovi√©ticas para llevar</a></li>
<li><a href="../es413739/index.html">C√≥mo escaneamos todo Internet y lo que aprendimos</a></li>
<li><a href="../es413741/index.html">Qu√© era y c√≥mo: impresiones del equipo WWDC Redmadrobot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>