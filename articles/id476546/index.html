<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🎤 👼🏿 🏝️ Cloud WebRTC Streaming di DigitalOcean 🚥 🚵🏿 ⏪</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cloud hosting DigitalOcean yang terkenal baru-baru ini mengakuisisi tokonya sendiri dengan gambar yang sudah jadi, dari mana Anda dapat dengan cepat m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cloud WebRTC Streaming di DigitalOcean</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flashphoner/blog/476546/"><p><img src="https://habrastorage.org/webt/qu/k2/rk/quk2rkqml_odwigj2khcbkjsgaa.png"></p><br><p>  Cloud hosting DigitalOcean yang terkenal baru-baru ini mengakuisisi tokonya sendiri dengan gambar yang sudah jadi, dari mana Anda dapat dengan cepat menyebarkan server aplikasi apa pun.  Sama seperti AWS, hanya DO, untuk mereka yang sudah menggunakan layanan dari penyedia ini.  Mari kita lihat bagaimana, dengan akun DO, menyebarkan server sederhana seharga $ 10 per bulan untuk streaming WebRTC berdasarkan Flashphoner WebCallServer, dan bagaimana server seperti itu dapat bermanfaat. </p><a name="habracut"></a><br><h2 id="razvertyvanie">  Penempatan </h2><br><p>  Kami memasukkan akun pada DO, ikuti tautan ke gambar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">WebCallServer Flashphoner</a> dan klik tombol "Buat Tetesan Server Panggilan Web Flashphoner" </p><br><p><img src="https://habrastorage.org/webt/3l/_f/35/3l_f35kar7y9bm3thyu1hvynmbk.png"></p><br><p>  Kami memilih karakteristik utara dan rencana tarif.  Secara default, DO akan menawarkan sesuatu kepada kami dari segmen menengah, tetapi kami tertarik dengan biaya minimum </p><br><p><img src="https://habrastorage.org/webt/er/y4/ck/ery4ckt3mvppfgrv10ui5a9st9u.png"></p><br><p>  Pilih wilayah tempat pusat data berada, misalnya, Frankfurt </p><br><p><img src="https://habrastorage.org/webt/dt/sw/3g/dtsw3gy3cy76buk6p2dgtikr_oc.png"></p><br><p>  Pilih metode otentikasi, misalnya, kata sandi satu kali </p><br><p><img src="https://habrastorage.org/webt/jm/vn/5g/jmvn5g5yy6m702li7ovvxluzu8a.png"></p><br><p>  Kami menunjukkan jumlah server (sejauh ini kami tertarik pada satu server) dan memberi nama server kami.  Nama ini akan ditulis, termasuk di / etc / hostname </p><br><br><p>  Klik "Buat tetesan" </p><br><p><img src="https://habrastorage.org/webt/fm/q1/ql/fmq1qlgnbpz5bq7r8ncqiyr40sw.png"></p><br><p>  Setelah pembuatan, server akan secara otomatis memulai.  Anda dapat menghubungkannya melalui SSH dan, jika kata sandi satu kali dipilih sebagai metode otentikasi, ubah kata sandi.  Deskripsi singkat Flashphoner WebCallServer dengan tautan dokumentasi akan ditampilkan di konsol </p><br><p><img src="https://habrastorage.org/webt/rm/h2/xc/rmh2xcmpcjs5tvut5aybhumulgi.png"></p><br><h2 id="eto-test-menya-vidno">  "Ini ujian. Bisakah aku melihatmu?" </h2><br><p>  Flashphoner WebCallServer dijalankan sepenuhnya siap untuk bekerja, lisensi percobaan 30 hari diaktifkan secara otomatis.  Untuk menguji semua fungsi dasar terdapat antarmuka web, kami membatasi diri untuk memeriksa publikasi dan pemutaran aliran WebRTC. </p><br><p> Buka halaman browser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https: // droplet_ip: 8444 / admin /</a> .  Secara default, sertifikat yang ditandatangani sendiri disertakan dengan server, jadi Anda harus mengonfirmasi pengecualian keamanan.  Di masa mendatang, Anda dapat mengganti sertifikat dengan sertifikat Anda sendiri.  Masukkan nama pengguna dan kata sandi ( <em>demo</em> default) </p><br><p><img src="https://habrastorage.org/webt/-a/xu/qw/-axuqw0izvkcml9ycx4qev8dbam.png"></p><br><p>  Pilih contoh Streaming Dua Arah di sidebar, klik tombol "Connect", lalu "Publish".  Untuk memainkan streaming, klik "Mainkan" </p><br><p><img src="https://habrastorage.org/webt/gg/uu/vg/gguuvghawemad1ch60ka4voke0a.png"></p><br><h2 id="za-prigorshnyu-dollarov">  Untuk beberapa dolar </h2><br><p>  Apakah server yang mampu $ 10 per bulan yang mampu menjadi platform perangkat keras untuk streaming WebRTC?  Mari kita lihat apa yang ditawarkan prosesor DigitalOcean </p><br><pre><code class="bash hljs">lscpu</code> </pre> <br><p><img src="https://habrastorage.org/webt/gz/my/dw/gzmydw2rmby7xbf_jfefcegdj14.png"></p><br><p>  dan dari memori </p><br><pre> <code class="bash hljs">free -h</code> </pre> <br><p><img src="https://habrastorage.org/webt/0f/m8/fl/0fm8fllsykumuxadaai1zqlf-lk.png"></p><br><p>  Memeriksa server dengan tes beban, kami melihat bahwa server mungkin tidak begitu kecil. </p><br><p>  Misalnya, kami akan menerbitkan satu instance streaming dan melihat berapa banyak pelanggan yang secara bersamaan dapat kehilangan streaming ini, menempati tidak lebih dari 90% dari prosesor: </p><br><div class="scrollable-table"><table><thead><tr><th>  Izin </th><th>  Kecepatan bit, Kbps </th><th>  Jumlah publikasi </th><th>  Jumlah pelanggan </th></tr></thead><tbody><tr><td>  360p </td><td>  1300 </td><td>  1 </td><td>  70 </td></tr><tr><td>  480p </td><td>  1800 </td><td>  1 </td><td>  70 </td></tr><tr><td>  720p </td><td>  3000 </td><td>  1 </td><td>  50 </td></tr></tbody></table></div><br><p>  Dengan beberapa publikasi simultan, jumlah maksimum stream yang diproses tetap pada tingkat yang sama: jika Anda mempublikasikan 7 stream, hingga 10 pemirsa dapat berlangganan masing-masing. </p><br><p>  Katakanlah kita perlu transcode stream di server untuk mengurangi resolusi atau menyelaraskan FPS.  Untuk kasus ini, periksa jumlah publikasi maksimum: </p><br><div class="scrollable-table"><table><thead><tr><th>  Izin </th><th>  Kecepatan bit, Kbps </th><th>  Jumlah utas </th></tr></thead><tbody><tr><td>  360p </td><td>  1300 </td><td>  5 </td></tr><tr><td>  480p </td><td>  1800 </td><td>  3 </td></tr><tr><td>  720p </td><td>  3000 </td><td>  2 </td></tr></tbody></table></div><br><p>  Dengan demikian, server biaya minimum pada DO dengan parameter 1 inti CPU, RAM 2 Gb, lalu lintas 2 TB per bulan cocok tidak hanya untuk pengujian streaming WebRTC, tetapi juga untuk digunakan dalam proyek-proyek kecil.  Misalnya, Anda dapat: </p><br><ul><li>  mendistribusikan melalui WebRTC aliran dari kamera IP untuk pengawasan video perusahaan paling sederhana; </li><li>  mengatur webinar untuk karyawan perusahaan kecil </li><li>  naikkan radio Internet Anda (streaming audio membutuhkan lebih sedikit sumber daya CPU) </li></ul><br><p>  Selain itu, server ini dapat dianggap sebagai platform referensi untuk penghitungan skala, yang akan terus kami lakukan. </p><br><h2 id="ya-dostoyna-bolshego">  "Aku pantas mendapatkan lebih banyak!" </h2><br><p>  Aturannya, secara umum, sangat sederhana: tidak banyak inti, dan begitu juga ingatannya.  Bergantung pada jumlah pelanggan yang direncanakan, rekomendasi dari set konfigurasi yang ditawarkan oleh DO adalah sebagai berikut: </p><br><div class="scrollable-table"><table><thead><tr><th>  Jumlah pelanggan </th><th>  vCPUs </th><th>  RAM, Gb </th><th>  Lalu lintas, TB </th><th>  Contoh penggunaan </th></tr></thead><tbody><tr><td>  hingga 200 </td><td>  4 </td><td>  8 </td><td>  5 </td><td>  Sistem pengawasan video </td></tr><tr><td>  hingga 500 </td><td>  8 </td><td>  16 </td><td>  6 </td><td>  Webinar </td></tr><tr><td>  hingga 1000 </td><td>  16 </td><td>  64 </td><td>  9 </td><td>  Obrolan video </td></tr><tr><td>  hingga 2000 </td><td>  20 </td><td>  96 </td><td>  10 </td><td>  Streaming video HD </td></tr></tbody></table></div><br><p>  Jika Anda berencana untuk berkembang lebih jauh, Anda harus menggunakan CDN dengan kecepatan server 1 Edge untuk 2000 pelanggan.  Misalkan kita perlu mendistribusikan video HD, jumlah penonton yang direncanakan adalah 10.000. Dalam hal ini, Anda memerlukan 2 server Origin untuk mempublikasikan dan 5 server Edge untuk melihatnya. </p><br><p><img src="https://habrastorage.org/webt/d2/ky/xw/d2kyxwehzmckmsc09bltxy5epes.png"></p><br><p>  Contoh pengaturan: </p><br><ul><li>  Asal 1 </li></ul><br><pre> <code class="plaintext hljs">cdn_enabled=true cdn_ip=origin1.flashponer.com cdn_nodes_resolve_ip=false cdn_role=origin</code> </pre> <br><ul><li>  Asal 2 </li></ul><br><pre> <code class="plaintext hljs">cdn_enabled=true cdn_ip=origin2.flashponer.com cdn_point_of_entry=origin1.flashponer.com cdn_nodes_resolve_ip=false cdn_role=origin</code> </pre> <br><ul><li>  Edge 1 - Edge 5 (hanya alamat server dalam parameter <code>cdn_ip</code> yang <code>cdn_ip</code> ) </li></ul><br><pre> <code class="plaintext hljs">cdn_enabled=true cdn_ip=edge1.flashphoner.com cdn_point_of_entry=origin1.flashponer.com cdn_nodes_resolve_ip=false cdn_role=edge</code> </pre> <br><p>  CDN juga dapat bermanfaat jika pelanggan didistribusikan secara geografis, misalnya, pemirsa potensial kami tinggal di Eropa dan Amerika. </p><br><p><img src="https://habrastorage.org/webt/gd/45/2b/gd452bd762x9ou7zie8svwpvi8c.png"></p><br><p>  Contoh pengaturan: </p><br><ul><li>  Asal EU </li></ul><br><pre> <code class="plaintext hljs">cdn_enabled=true cdn_ip=origin_eu.flashponer.com cdn_nodes_resolve_ip=false cdn_role=origin cdn_groups=EU</code> </pre> <br><ul><li>  Asal kami </li></ul><br><pre> <code class="plaintext hljs">cdn_enabled=true cdn_ip=origin_us.flashponer.com cdn_point_of_entry=origin_eu.flashponer.com cdn_nodes_resolve_ip=false cdn_role=origin cdn_groups=US</code> </pre> <br><ul><li>  Edge 1 EU </li></ul><br><pre> <code class="plaintext hljs">cdn_enabled=true cdn_ip=edge1_eu.flashphoner.com cdn_point_of_entry=origin_eu.flashponer.com cdn_nodes_resolve_ip=false cdn_role=edge cdn_groups=EU</code> </pre> <br><ul><li>  Edge 1 AS </li></ul><br><pre> <code class="plaintext hljs">cdn_enabled=true cdn_ip=edge1_us.flashphoner.com cdn_point_of_entry=origin_eu.flashponer.com cdn_nodes_resolve_ip=false cdn_role=edge cdn_groups=US</code> </pre> <br><p>  Semakin banyak pemirsa, semakin besar variasi perangkat pemutaran dan saluran ke perangkat ini.  Untuk memastikan kualitas penyiaran ke berbagai perangkat, kemungkinan besar, transcoding video akan diperlukan, yang dapat ditugaskan ke server Transcoder CDN khusus. </p><br><p><img src="https://habrastorage.org/webt/da/wi/n1/dawin1lf1bz_cqnovovjmcg5tms.png"></p><br><p>  Contoh pengaturan: </p><br><ul><li>  Asal </li></ul><br><pre> <code class="plaintext hljs">cdn_enabled=true cdn_ip=origin.flashponer.com cdn_nodes_resolve_ip=false cdn_role=origin cdn_groups=default</code> </pre> <br><ul><li>  Transcoder EU </li></ul><br><pre> <code class="plaintext hljs">cdn_enabled=true cdn_ip=transcoder_eu.flashponer.com cdn_point_of_entry=origin.flashponer.com cdn_nodes_resolve_ip=false cdn_role=transcoder cdn_groups=EU</code> </pre> <br><ul><li>  Edge 1 EU </li></ul><br><pre> <code class="plaintext hljs">cdn_enabled=true cdn_ip=edge1_eu.flashphoner.com cdn_point_of_entry=origin.flashponer.com cdn_nodes_resolve_ip=false cdn_role=edge cdn_groups=EU</code> </pre> <br><p>  Untuk transcoding, seperti yang kami ketahui selama pengujian, jumlah inti prosesor adalah penting.  Dari jalur konfigurasi yang dioptimalkan oleh CPU, 32 vCPU paling mahal, 64 Gb RAM paling cocok.  Pada saat yang sama, di jalur lain, konfigurasi dengan sejumlah besar memori yang ditutup dalam jumlah CPU bisa jauh lebih mahal.  Sayangnya, penghematan pada transcoder tidak akan berfungsi: karena video dikodekan bingkai demi bingkai, harus ada memori yang cukup untuk semua gambar, dan prosesor untuk memproses semua aliran. </p><br><p>  Saat menggunakan CDN, akan berguna untuk membuat beberapa server dengan konfigurasi yang sama secara bersamaan.  Namun, untuk CDN yang didistribusikan secara geografis, jenis server Edge dan Transcoder yang sama perlu ditempatkan di pusat data yang berbeda. </p><br><h2 id="zaklyuchenie">  Kesimpulan </h2><br><p>  Jadi, kami mengerahkan dan menguji server kecil untuk streaming video WebRTC dengan latensi rendah di DigitalOcean, memastikan bahwa server dalam konfigurasi minimum cocok tidak hanya untuk pengujian, tetapi juga untuk digunakan dalam proyek-proyek kecil, kami menerima data untuk penskalaan tergantung pada jumlah penonton yang diharapkan, dan menyentuh tentang topik penyebaran CDN, yang dengan sendirinya layak menjadi artikel terpisah.  Tetap bersama kami, untuk dilanjutkan ... </p><br><h2 id="ssylki">  Referensi </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Flashphoner WebCallServer di DigitalOcean Marketplace</a> adalah gambar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pra-</a> bangun dari Server Panggilan Web di DigitalOcean. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CDN streaming WebRTC latensi rendah adalah</a> jaringan pengiriman konten berbasis Web Call Server. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id476546/">https://habr.com/ru/post/id476546/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id476528/index.html">Arsitek Perangkat Lunak Kursus baru dari OTUS</a></li>
<li><a href="../id476532/index.html">Pola dasar UI / UX</a></li>
<li><a href="../id476534/index.html">Cara membangun akuntansi manajemen yang efektif dan mendapatkan keuntungan besar</a></li>
<li><a href="../id476538/index.html">Protokol Distribusi Kunci Kriptografi Asimetris: Denning - Sacco, DASS, Wu Lama</a></li>
<li><a href="../id476540/index.html">Smart Home - kontrol suara dalam tiga langkah. Raspberry + HomeKit</a></li>
<li><a href="../id476548/index.html">Apa kesamaan dari overclocking dan downsizing?</a></li>
<li><a href="../id476550/index.html">Dasar Slurm di Moskow. Hari Kedua Mizaru, Kikazaru, Iwazaru, dan dukungan teknis selalu bertugas</a></li>
<li><a href="../id476554/index.html">Streaming WebRTC berbasis cloud di DigitalOcean</a></li>
<li><a href="../id476556/index.html">Narasi dan "ruang bawah tanah": bagaimana perancang game mengaitkan lokasi dengan plot</a></li>
<li><a href="../id476558/index.html">ONYX BOOX Max 3 ulasan: pembaca layar maksimum</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>