<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõçÔ∏è üí∫ üèóÔ∏è Como criar um mapa dos estacionamentos de Moscou usando o Kepler.gl üéÄ üë©üèæ‚Äçüéì ‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Alguns meses atr√°s, foi lan√ßada a primeira vers√£o do Kepler.gl - uma nova ferramenta de c√≥digo-fonte aberto para visualizar e analisar grandes conjunt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como criar um mapa dos estacionamentos de Moscou usando o Kepler.gl</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418799/"><p>  Alguns meses atr√°s, foi lan√ßada a primeira vers√£o do Kepler.gl - uma nova ferramenta de c√≥digo-fonte aberto para visualizar e analisar grandes conjuntos de dados geogr√°ficos. </p><br><p> Neste artigo, sugiro que voc√™ se familiarize com os principais recursos do aplicativo e crie usando duas visualiza√ß√µes cartogr√°ficas que nos permitir√£o descobrir alguns fatos interessantes sobre estacionamento pago em Moscou. </p><br><img src="https://habrastorage.org/webt/6k/up/gt/6kupgtbtchgcu6wnfmsbxodbiea.png"><br><br>  Mas primeiro, algumas palavras sobre quem e por que criaram o Kepler.gl <p><a name="habracut"></a><br></p><p>  Inicialmente, o Kepler.Gl foi criado pela equipe de engenharia da Uber para analistas de empresas que queriam entender melhor "como a cidade est√° se movendo", usando para isso uma enorme quantidade de dados de tr√°fego de informa√ß√µes geogr√°ficas coletadas diariamente por milhares de "uber" em v√°rias cidades do mundo. </p><br><p>  No entanto, em maio deste ano, a empresa anunciou o acesso aberto a este aplicativo e publicou todo o c√≥digo-fonte do Kepler.gl no <a href="">GitHub</a> <br></p><br><h4>  Principais recursos do Kepler.gl </h4><br><p>  Independentemente das ferramentas de an√°lise de dados selecionadas, dos servi√ßos ou estruturas de mapas usados, bem como das bibliotecas para criar v√°rias visualiza√ß√µes, o processo de trabalhar nelas √© reduzido para 4 est√°gios principais: <br><br></p><ul><li>  coleta de informa√ß√µes </li><li>  processamento de dados </li><li>  pesquisa e an√°lise de dados preparados (para identificar depend√™ncias, procurar anomalias etc.) </li><li>  cria√ß√£o de visualiza√ß√£o </li></ul><br><img src="https://habrastorage.org/webt/xw/5a/oq/xw5aoqlvabvn7xx0qzk_m1xt48q.png" alt="Etapas da cria√ß√£o da visualiza√ß√£o"><br>  <i>Figura 1. Os est√°gios b√°sicos da cria√ß√£o de uma visualiza√ß√£o</i> <br><br><p>  O Kepler.gl automatiza e simplifica parcialmente 3 das 4 etapas listadas, o que simplifica significativamente todo o processo de an√°lise e visualiza√ß√£o de grandes conjuntos de dados e ajuda a criar um mapa interativo informativo e, o mais importante, colorido, baseado em seus pr√≥prios conjuntos de dados geogr√°ficos em apenas meia hora. </p><br><p>  Ao mesmo tempo, a experi√™ncia de programa√ß√£o ou design n√£o √© absolutamente necess√°ria, porque a filtragem e a agrega√ß√£o de dados, escolhendo uma maneira de exibir dados, dependendo de v√°rios par√¢metros dos objetos em estudo, sobrepondo informa√ß√µes de v√°rias fontes, alternando entre os modos 2D e 3D e muito mais s√£o configuradas usando o painel da interface do usu√°rio. </p><br><p></p><h4>  Como usar o Kepler.gl para an√°lise de dados </h4><br>  A maneira mais f√°cil √© come√ßar a conhecer o Kepler.gl usando sua vers√£o online, dispon√≠vel no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">kepler.gl</a> ou, se voc√™ n√£o confia em servidores de terceiros, pode implantar uma vers√£o local para si mesmo, seguindo as instru√ß√µes no <a href="">GitHub</a> . <br><p>  A seguir, usarei os dados sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Estacionamento pago em Moscou"</a> fornecidos pelo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Portal de Dados Abertos" do</a> governo de Moscou.  Este conjunto cont√©m informa√ß√µes sobre mais de 9 mil objetos localizados na rede de ruas, incluindo informa√ß√µes sobre o custo e o n√∫mero de vagas de estacionamento. </p><br><p>  <strong>Etapa 1. Carregamento de Dados</strong> </p><br><p>  At√© o momento, o Kepler.gl suporta tr√™s formatos de dados de origem: geojson, json e csv.  Depois de salvar os dados em um dos formatos indicados (neste exemplo eu uso .csv), simplesmente os carregamos no aplicativo.  A prop√≥sito, aqui, na caixa de di√°logo de download, para se familiarizar com o aplicativo, voc√™ tamb√©m pode usar uma das dezenas de conjuntos de dados de teste predefinidos. </p><br><p>  <i><strong>Nota</strong></i>  <i>Para o Chrome, o tamanho m√°ximo do arquivo de upload n√£o deve exceder 250 Mb.</i>  <i>Os criadores do Kepler.gl sugerem o uso do Safari se voc√™ precisar baixar um arquivo maior.</i>  <i>No entanto, em qualquer caso, √© necess√°rio lembrar que o desempenho do aplicativo depende do dispositivo no qual est√° sendo executado.</i>  <i>Afinal, todas as manipula√ß√µes associadas √† agrega√ß√£o, filtragem e exibi√ß√£o de dados ocorrem no cliente.</i> </p><br><p>  <strong>Etapa 2. Exibindo Dados em um Mapa</strong> </p><br><p>  O aplicativo suporta 9 tipos de camadas de visualiza√ß√£o (camada de visualiza√ß√£o de dados), que diferem entre si em um conjunto de par√¢metros personaliz√°veis: </p><br><ul><li>  camada pontual </li><li>  camada de arcos (arco) </li><li>  camada de linhas (linha) </li><li>  grade (grade) </li><li>  grade hexagonal (Hexbin) </li><li>  pol√≠gonos de camada (Poligon) </li><li>  camada de cluster (Claster) </li><li>  camada de √≠cone (√≠cone) </li><li>  mapa de calor (mapa de calor) </li></ul><br><p>  Al√©m disso, mesmo as camadas do mesmo tipo, exibindo o mesmo conjunto de dados, podem diferir drasticamente, dependendo da configura√ß√£o selecionada. <br><br><img src="https://habrastorage.org/webt/jp/xf/r8/jpxfr8r9_kjhnuyn2qduhzidr8g.png"><br><br>  <i>Figura 2. Mapas criados no kepler.gl usando v√°rios tipos de camadas</i> <br></p><br><p>  O Kepler.gl n√£o limita o n√∫mero de camadas usadas ao exibir o conjunto de dados de teste.  As camadas s√£o desenhadas no mapa na mesma ordem em que est√£o localizadas na lista de camadas no painel lateral.  Essa sequ√™ncia pode ser facilmente alterada simplesmente arrastando as camadas correspondentes uma na outra na guia Camadas. </p><br><p>  Ao usar v√°rias camadas, preste aten√ß√£o ao par√¢metro "Layer Blending", respons√°vel por como as camadas se sobrep√µem.  √â uniforme durante toda a visualiza√ß√£o, o que torna imposs√≠vel o uso de diferentes tipos de mistura para diferentes camadas. </p><br><p>  Atualmente, tr√™s valores para este par√¢metro est√£o dispon√≠veis: </p><br><ul><li>  <strong>Normal</strong> <br>  Nesse caso, as camadas inferiores n√£o afetam a cor dos pontos (ou outros elementos) das camadas superiores. <br></li><li>  <b>Aditivo</b> <br>  Com esse tipo de sobreposi√ß√£o, os valores de cor dos elementos correspondentes s√£o somados.  √â conveniente para identificar √°reas de alta densidade, que neste caso ser√£o mais brilhantes. </li><li>  <b>Subtrativo</b> <br>  Diferentemente do aditivo, ele n√£o adiciona, mas subtrai o significado das cores nas √°reas que se cruzam.  √â conveniente quando se usa um cart√£o n√£o escuro, mas claro. <br></li></ul><br><p>  Assim, para visualizar nossos dados no mapa, √© necess√°rio criar pelo menos uma camada usando-os.  Vale ressaltar que, ap√≥s o download do arquivo, o Kepler.gl tentar√° identificar os campos que cont√™m informa√ß√µes de localiza√ß√£o geogr√°fica e exibi-los instantaneamente, criando automaticamente camadas dos tipos correspondentes (geralmente ponto ou pol√≠gono). </p><br><p>  No entanto, no nosso caso, devido √† diferen√ßa nos formatos de dados esperado e usado, voc√™ dever√° especificar a fonte de coordenadas.  Para fazer isso, primeiro exclua as camadas de pol√≠gono criadas por Kepler.gl e, em seguida, adicione manualmente uma nova camada de tipo Ponto.  Como fonte de coordenadas, usamos os campos <i>Latitude_WGS84</i> e <i>Longitude_WGS84</i> em vez do campo <i>Coordenadas</i> selecionado automaticamente pelo aplicativo para renderizar dados no mapa. </p><br><p><img src="https://habrastorage.org/webt/6v/nt/e2/6vnte2-4d0a2gvs_heyack9rimq.png"><br><br>  <i>Figura 3. Usando a camada pontual Kepler.gl para exibir os estacionamentos de Moscou</i> <br></p><br><p>  Nesta modalidade, o cart√£o n√£o √© muito informativo.  A √∫nica coisa que se pode dizer, olhando para ela, √© que h√° mais estacionamentos no centro do que nos arredores. </p><br><p>  Portanto, √© hora de usar outras informa√ß√µes sobre os objetos estudados para uma an√°lise mais detalhada e procurar fatos e / ou padr√µes interessantes. </p><br><p>  <b>Etapa 3. Modifica√ß√£o da apar√™ncia do mapa com base nos dados relacionados nos objetos exibidos</b> </p><br><p>  O conjunto baixado do Open Data Portal cont√©m muitas informa√ß√µes sobre cada um dos estacionamentos, no entanto, dois par√¢metros me pareceram os mais interessantes - o custo de uma hora de estacionamento e o n√∫mero de vagas dispon√≠veis. </p><br><p>  Onde est√£o os estacionamentos mais caros em Moscou?  Existe uma rela√ß√£o entre o tamanho do estacionamento e a dist√¢ncia do centavo?  Qual √© a diferen√ßa no custo de uma hora de estacionamento dentro e fora do Ring Garden?  Para responder a essas perguntas, basta alterar um pouco as configura√ß√µes de exibi√ß√£o da camada de pontos criada anteriormente e olhar novamente o mapa. </p><br><p>  Primeiro, mude a cor dos pontos, dependendo do custo de uma hora de estacionamento neste local.  Para fazer isso, na lista suspensa <i>"Cor baseada em",</i> como base para a escolha de uma cor, indicamos o par√¢metro <i>"Pre√ßo"</i> do conjunto de dados original. </p><br><p><img src="https://habrastorage.org/webt/rt/io/da/rtioda3jtsavrkfl22j1xzqyqam.png"><br><br>  <i>Figura 4. Usando cores para exibir informa√ß√µes de custo do hor√°rio de estacionamento</i> <br></p><br><p>  J√° nesta fase, v√°rias observa√ß√µes interessantes podem ser feitas.  Por exemplo, que nem todo o centro √© igualmente caro para os motoristas, mas em Tverskaya √© melhor ser um pedestre </p><br><p>  Agora vamos ver a capacidade dos estacionamentos.  Para isso, usaremos o campo <i>"CarCapacity"</i> como um par√¢metro b√°sico para determinar o raio de um ponto (o atributo <i>"Radius Based On"</i> de uma camada de pontos).  Defina o intervalo do raio de 0 a 30px. </p><br><p><img src="https://habrastorage.org/webt/vh/5z/ec/vh5zecdsdlsllcddfgvu-qmlfl8.png"><br><br>  <i>Figura 5. Personaliza√ß√£o do tamanho dos pontos, dependendo do n√∫mero de vagas</i> </p><br><p>  Assim, em apenas alguns minutos, nosso mapa de estacionamento se tornou notavelmente mais informativo.  Agora, mesmo uma r√°pida olhada nela permite n√£o apenas comparar a pol√≠tica de pre√ßos de diferentes √°reas da cidade, mas tamb√©m avaliar aproximadamente suas chances de encontrar um espa√ßo livre, considerando n√£o apenas o n√∫mero de estacionamentos nas proximidades, mas tamb√©m o espa√ßo. </p><br><p>  <b>Etapa 4. Agregando dados com Kepler.gl</b> </p><br><p>  O uso de uma camada de pontos para exibir cada um dos mais de 9000 estacionamentos j√° nos permitiu fazer algumas observa√ß√µes interessantes, mas o mapa n√£o nos permite responder facilmente perguntas como "Onde h√° mais vagas de estacionamento por unidade de √°rea?".  Para responder, precisamos usar uma das camadas de agrega√ß√£o. </p><br><p>  Atualmente, o Kepler.Gl suporta 4 tipos de camadas: grade (Grade), grade hexagonal (Hexbin), mapa de calor (Mapa de calor) e cluster (Cluster).  Os dois √∫ltimos tipos (Cluster e Mapa de Calor) s√£o convenientes quando voc√™ precisa agregar dados por apenas um par√¢metro.  A grade e a grade hexagonal permitem analisar valores agregados por v√°rios par√¢metros simultaneamente. </p><br><p>  Para responder √† pergunta colocada anteriormente, alteraremos o tipo de camada de pontos que criamos anteriormente para "grade" (Grade), isso n√£o apenas avaliar√° o n√∫mero total de vagas por unidade de √°rea, mas tamb√©m salvar√° informa√ß√µes sobre o custo m√©dio de uma hora de estacionamento neste local. </p><br><p>  Defina o tamanho da grade como 1km2 (o m√≠nimo dispon√≠vel em Kepler.gl).  O valor do par√¢metro Coverage √© reduzido de 1 para 0,7, para que um pequeno espa√ßo apare√ßa entre as c√©lulas, o que melhora a legibilidade do mapa final. </p><br><p>  <i><b>Nota</b></i>  <i>A lista de op√ß√µes dispon√≠veis para personaliza√ß√£o varia de acordo com o tipo de camada selecionado.</i>  <i>Voc√™ pode encontrar mais detalhes sobre os atributos suportados por cada um deles na documenta√ß√£o oficial do Kepler.gl.</i> </p><br><p>  A cor de cada c√©lula na nova visualiza√ß√£o, como antes, depender√° do custo de uma hora de estacionamento.  No entanto, agora, al√©m do nome do campo no conjunto de dados usado, tamb√©m precisamos indicar como o Kepler.gl agregar√° essas informa√ß√µes.  Os m√©todos de agrega√ß√£o dependem do tipo de campo selecionado.  No nosso caso, <i>"Pre√ßo"</i> √© um tipo num√©rico (int) e o aplicativo oferece uma das 5 op√ß√µes: </p><br><ul><li>  valor mais alto (m√≠nimo) </li><li>  menor valor (m√°ximo) </li><li>  quantidade (soma) </li><li>  valor m√©dio (m√©dio) </li><li>  mediana </li></ul><br><p>  A altura de cada uma das colunas da grade refletir√° o n√∫mero total de vagas nesta √°rea.  Para fazer isso, v√° para o modo 3D de visualiza√ß√£o do mapa.  Em seguida, na guia "Camadas" do painel lateral <i>, selecione "Ativar altura"</i> para a nossa camada de agrega√ß√£o e selecione o campo <i>"CarCapacity"</i> como par√¢metro base. </p><br><p><img src="https://habrastorage.org/webt/cf/xc/or/cfxcor7m99gxqv25e2m1x4lkf2u.png"><br><br>  <i>Figura 6. Informa√ß√µes generalizadas sobre o custo e a capacidade do estacionamento</i> </p><br><p>  Assim, depois de gastar mais alguns minutos na configura√ß√£o da camada de agrega√ß√£o, podemos dizer com seguran√ßa que, dentro do Anel do Jardim, n√£o apenas o n√∫mero de estacionamentos, mas tamb√©m o n√∫mero real de vagas √© muito maior do que fora. </p><br><p>  <b>Conclus√£o</b> </p><br><p>  Neste artigo, usando um exemplo espec√≠fico, apenas parte dos recursos do Kepler.gl foi considerada uma ferramenta moderna para visualiza√ß√£o e an√°lise b√°sica de v√°rios dados geogr√°ficos.  Se voc√™ estiver interessado neste aplicativo, recomendo que voc√™ tamb√©m se familiarize com os artigos e tutoriais abaixo, al√©m de experimentar a filtragem de dados, configurar dicas de ferramentas e estilos de mapa e outros recursos desse aplicativo. </p><br><p>  E no pr√≥ximo artigo, mostrarei maneiras de compartilhar as visualiza√ß√µes e mapas que voc√™ criou, bem como sobre o uso do Kepler.gl como um componente React para seu aplicativo da web. </p><br><p>  <b>Links √∫teis</b> </p><br><ul><li>  <a href="">Reposit√≥rio do Kepler.Gl no GitHub</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Detalhes do Kepler.gl de seu criador no Uber</a> : ‚ÄúDe belos mapas a id√©ias acion√°veis: Introdu√ß√£o ao kepler.gl, a caixa de ferramentas geoespaciais de c√≥digo aberto da Uber‚Äù <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Entrevista com o desenvolvedor Kepler.Gl Shen Hee</a> </li></ul><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt418799/">https://habr.com/ru/post/pt418799/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt418789/index.html">Uber para de desenvolver caminh√µes n√£o tripulados</a></li>
<li><a href="../pt418791/index.html">Or√°culos, ou por que contratos inteligentes ainda n√£o mudaram o mundo?</a></li>
<li><a href="../pt418793/index.html">PDper EXpert - Especialista em distribui√ß√£o de energia</a></li>
<li><a href="../pt418795/index.html">An√°lise do ASUS ROG GM501 Zephyrus M</a></li>
<li><a href="../pt418797/index.html">Erros canhotos de projetos de TI ao entrar no mercado nos EUA</a></li>
<li><a href="../pt418803/index.html">O sistema de vis√£o de m√°quina do trailer do filme prev√™ quem vir√° ao cinema</a></li>
<li><a href="../pt418807/index.html">SSD Kingston UV500 - Rei das atualiza√ß√µes</a></li>
<li><a href="../pt418809/index.html">Corporation, DIY desafia voc√™ a um duelo</a></li>
<li><a href="../pt418813/index.html">Surpresa: a constante do Hubble √© realmente inconstante</a></li>
<li><a href="../pt418815/index.html">Erros t√≠picos que um desenvolvedor comete durante o treinamento - e como evit√°-los</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>