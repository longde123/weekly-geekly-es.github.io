<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéå üê• üëä Casa inteligente com a Xiaomi no exemplo de um banho üÜñ üîÜ üö£üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Na Internet, existem muitas cr√≠ticas e v√≠deos sobre a constru√ß√£o de casas inteligentes. H√° uma opini√£o de que tudo isso √© muito caro e problem√°tico na...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Casa inteligente com a Xiaomi no exemplo de um banho</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/plesk/blog/482554/">  Na Internet, existem muitas cr√≠ticas e v√≠deos sobre a constru√ß√£o de casas inteligentes.  H√° uma opini√£o de que tudo isso √© muito caro e problem√°tico na organiza√ß√£o, ou seja, em geral, muitos geeks.  Mas o progresso n√£o p√°ra.  Os dispositivos est√£o ficando mais baratos, enquanto mais funcionais, e o design e a instala√ß√£o s√£o bastante simples.  No entanto, basicamente, as revis√µes concentram-se em 1-2 exemplos de uso, praticamente n√£o cobrindo as nuances e sem criar uma imagem hol√≠stica.  Portanto, neste artigo, desejo revisar o projeto conclu√≠do, demonstrar cen√°rios de uso e armadilhas encontradas na constru√ß√£o de uma casa inteligente usando dispositivos Xiaomi usando o banheiro como exemplo.  As id√©ias descritas com pequenas varia√ß√µes podem ser aplicadas √† automa√ß√£o do apartamento. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9h/lb/tj/9hlbtjf6rdghf--lzwsq-5bysk8.jpeg" alt="imagem" width="400" height="400"></div><br><a name="habracut"></a><br><h2>  Antecedentes ou por que tudo isso √© necess√°rio </h2><br>  Para iniciantes, um pouco de pano de fundo para deixar o contexto claro.  No in√≠cio do outono de 2018, o acabamento do banho foi conclu√≠do e foi colocado em opera√ß√£o.  A casa de banhos √© um edif√≠cio capital aut√¥nomo, com aquecimento e abastecimento de √°gua o ano todo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ns/wd/o5/nswdo5svyprgue1sgxhojmb83kk.jpeg" alt="imagem"></div><br>  Por raz√µes √≥bvias, ningu√©m vive constantemente na casa de banho e n√£o controla a condi√ß√£o das instala√ß√µes.  Tanto quanto eu gostaria, uma visita ao banho tamb√©m n√£o √© um evento muito frequente.  Consequentemente, os pensamentos sobre a cria√ß√£o de um banho ‚Äúinteligente‚Äù estavam presentes desde o in√≠cio do projeto.  Antes de tudo, por quest√µes de seguran√ßa (inc√™ndio, inunda√ß√£o, controle de acesso).  Por exemplo, desligar o aquecimento a -35 graus na rua (moro em Novosibirsk) √© uma situa√ß√£o muito perigosa.  No entanto, ao contr√°rio da casa principal, n√£o pensei no projeto de automa√ß√£o do banho desde o in√≠cio e n√£o fiz fia√ß√£o adicional nos lugares certos.  Por outro lado, a Internet foi realizada na casa de banho e a vigil√¢ncia por v√≠deo est√° sendo realizada para a apari√ß√£o de dois outros edif√≠cios (voc√™ pode avaliar o que est√° acontecendo visualmente). <br><br>  Tendo retornado de uma viagem de neg√≥cios em novembro de 2019, √† noite fui √† casa de banhos, abri a porta da frente e fiquei chocado com o que vi.  Os LEDs do ponto WiFi piscaram para mim na escurid√£o, e uma corrente de √°gua jorrou em meus p√©s.  Ou seja, ocorreram inunda√ß√µes, enquanto a eletricidade n√£o desligou.  A √°gua na casa de banho √© organizada usando seu pr√≥prio po√ßo, bomba submers√≠vel e automa√ß√£o que controla o processo.  Como se viu depois, um dos acess√≥rios do banheiro foi interrompido e inundou todos os c√¥modos.  Eu nunca descobri por que a automa√ß√£o ficou com pena e ainda desligou, mas ela conseguiu bombear 15 cm de √°gua em 30 quadrados.  Na rua, naquele dia, eram -14 graus.  O piso quente aguentou, continuando a manter a temperatura ambiente no n√≠vel adequado, mas uma umidade de 100% apareceu.  Era imposs√≠vel procrastinar mais sobre a organiza√ß√£o de uma casa inteligente - voc√™ precisa come√ßar a faz√™-lo. <br><br><h2>  Sele√ß√£o de equipamentos </h2><br>  Durante a constru√ß√£o da casa principal, adquiri experi√™ncia trabalhando com dispositivos <a href="https://eldesalarms.com/">Eldes</a> (a fia√ß√£o correspondente foi criada).  Parte da automa√ß√£o √© feita no <a href="https://www.raspberrypi.org/">Raspberry PI</a> .  Outra parte est√° nos <a href="https://www.aqara.com/en/home.html">dispositivos Xiaomi Aqara</a> .  A op√ß√£o com Raspberry PI foi a mais atraente para mim e, inicialmente, foi considerada para o balne√°rio.  Infelizmente, por√©m, exige muito mais esfor√ßos da organiza√ß√£o.  Esse ainda n√£o √© um dispositivo plug-and-play - come√ßando com exerc√≠cios com hardware e terminando com software de grava√ß√£o para suas pr√≥prias necessidades.  Por certas raz√µes, o <a href="https://mjdm.ru/">MajorDoMo</a> n√£o <a href="https://mjdm.ru/">estava</a> feliz.  Atravessando o Raspberry PI, o adaptador ZigBee (para usar os sensores sem fio Xiaomi) e o estudo necess√°rio do Apple HomeKit (e a interface do Apple HomeKit n√£o est√° muito feliz no momento).  N√£o havia muito tempo (n√£o queria repetir a situa√ß√£o) e n√£o havia fia√ß√£o para cada ponto desejado, ent√£o decidi fazer tudo nos dispositivos Xiaomi. <br><br>  O principal dispositivo nessa situa√ß√£o √© o hub.  No caso da Xiaomi, existem duas op√ß√µes para o hub: Xiaomi Mi Smart Home Gateway 2 e Xiaomi Aqara Gateway.  Este √∫ltimo √© cerca de duas vezes mais caro, mais adequado para o mercado local e √© capaz de integrar dispositivos ao Apple HomeKit.  No entanto, se voc√™ instalar o aplicativo Aqara Home e selecionar a regi√£o "R√∫ssia", no momento em que escrever essas linhas, apenas 13 dispositivos diferentes (interruptores, soquetes, sensores) estar√£o dispon√≠veis.  Se voc√™ instalar o aplicativo Xiaomi Home, selecione a regi√£o ‚ÄúChina Continental‚Äù e centenas de dispositivos estar√£o dispon√≠veis para conex√£o.  No entanto, se voc√™ selecionar a regi√£o ‚ÄúChina Continental‚Äù, n√£o poder√° conectar uma tomada europeia e vice-versa.  A sele√ß√£o da regi√£o ‚ÄúChina Continental‚Äù como parte do aplicativo Aqara Home n√£o fornece a integridade dos dispositivos presentes no Xiaomi Home com a mesma regi√£o.  Com medo de incompatibilidade, decidi parar no hub Xiaomi Mi Smart Home Gateway 2. O pre√ßo de emiss√£o √© de cerca de 2000 p.  A prop√≥sito, o pr√≥prio hub atua como uma l√¢mpada - isso pode ser levado em considera√ß√£o durante a instala√ß√£o. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vs/ul/kx/vsulkxlnghjjindbwwmxw9aemxq.jpeg" alt="imagem"></div><br>  Uma quest√£o interessante separada √© quanto tempo isso vai funcionar.  N√£o se trata apenas de sensores e baterias, mas de sincroniza√ß√£o e armazenamento de dados na nuvem.  A conta est√° atualmente livre.  Toda a informa√ß√£o √© armazenada nos servidores Xiaomi.  Se amanh√£ os caras decidirem que os usu√°rios da R√∫ssia n√£o devem armazenar dados na regi√£o ‚ÄúChina Continental‚Äù ou se Roskomnadzor banir seus servidores por algum motivo, toda a casa inteligente corre o risco de se transformar em uma ab√≥bora.  Decidi por mim mesmo que, nesse caso, os sensores permanecer√£o e o hub ser√° substitu√≠do pelo adaptador Raspberri PI + ZigBee. <br><br><h2>  Controle e preven√ß√£o de vazamentos </h2><br>  O primeiro e mais importante cen√°rio de automa√ß√£o foi uma continua√ß√£o natural do problema - com um vazamento, voc√™ deve desligar o suprimento de √°gua, ou seja, a bomba, e enviar uma notifica√ß√£o sobre o problema ao telefone.  Havia dois locais potencialmente perigosos para a ocorr√™ncia de vazamentos. <br><br>  Al√©m do hub para este cen√°rio, foram necess√°rios dois sensores de vazamento e um soquete inteligente montado na parede.  O pre√ßo do sensor de vazamento √© de cerca de 1400 r.  O pre√ßo de uma tomada inteligente √© de cerca de 1700 p.  Os sensores de vazamento s√£o aut√¥nomos, funcionam com baterias.  O fabricante afirma que uma bateria √© suficiente por 2 anos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bt/d3/q2/btd3q2gftpvfsf_drdszmsisfwm.jpeg" alt="imagem"></div><br>  A instala√ß√£o de uma tomada inteligente foi um pouco complicada porque soquetes quadrados s√£o necess√°rios para as lojas chinesas, que n√£o s√£o vendidas em nossas lojas comuns (mas podem ser solicitadas).  Fazer furos quadrados ainda √© um prazer.  Al√©m disso, voc√™ precisa de um adaptador, embora tamb√©m haja uma tomada para um plugue europeu.  Na vers√£o Aqara para o mercado local, atualmente n√£o existe uma tomada para montagem na parede, o que nos liga √† regi√£o ‚ÄúChina Continental‚Äù.  Como alternativa, voc√™ pode instalar uma tomada comum, conectar uma tomada inteligente com uma tomada da Xiaomi, mas isso exigiria dois adaptadores adicionais.  Outra alternativa √© um rel√©.  Mas eu me acomodei em uma tomada na parede. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qe/rg/pg/qergpgrjkaqqosy5xr2pqc_hli8.jpeg" alt="imagem"></div><br>  No aplicativo Xiaomi Home, um soquete e um sensor foram adicionados.  A seguir, o cen√°rio ‚Äúno caso de um vazamento‚Äù √© prescrito para duas a√ß√µes: desligue a tomada e envie um alerta. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p7/pj/ub/p7pjubzhpjzb6tt_aoxrdd20_fs.jpeg" alt="imagem"></div><br>  O primeiro sensor de vazamento foi instalado pr√≥ximo √† bomba (e, de fato, ao lado do cubo).  Para o teste, a √°gua foi vertida em uma pequena placa e o sensor foi baixado nela.  Realizei toda a a√ß√£o diretamente no local de instala√ß√£o do sensor, a fim de trazer a situa√ß√£o o mais pr√≥ximo poss√≠vel da realidade.  O teste foi bem-sucedido: o soquete foi desligado, a notifica√ß√£o chegou ao telefone e o hub piscou no modo de emerg√™ncia. <br><br>  O segundo detector de vazamento foi planejado para ser instalado no banheiro ao lado do tubo de troca.  Mas com sua instala√ß√£o, surgiram nuances - o hub n√£o viu o sensor, embora a dist√¢ncia fosse pequena.  O motivo √© a configura√ß√£o das instala√ß√µes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ce/33/gb/ce33gbivdrkzwq2f4t-vghi69ki.jpeg" alt="imagem"></div><br>  Havia uma sala de vapor entre o local da instala√ß√£o do hub (sala de relaxamento) e o local da instala√ß√£o do segundo sensor de vazamento (banheiro).  A sauna a vapor, nas melhores tradi√ß√µes, √© costurada no c√≠rculo com papel alum√≠nio, criando problemas com a passagem do sinal. <br><br>  O fabricante afirma que os dispositivos s√£o capazes de formar uma rede mesh, ou seja, um dispositivo pode transmitir dados para o hub por outro dispositivo.  Em algum lugar, encontrei informa√ß√µes de que apenas os dispositivos conectados √† rede (e n√£o as baterias) podem atuar como tais transmissores em uma rede mesh.  No entanto, foi o suficiente para eu instalar um sensor de temperatura no canto do banheiro, para que o sinal do sensor de vazamento deixasse de desaparecer.  Talvez seja uma coincid√™ncia, porque mais tarde, no banheiro sob o teto, foi montado um rel√© para controlar a luz da rua (talvez ele atue como um transmissor na rede de malha).  No entanto, o problema com a perda de sinal do sensor de vazamento no banheiro foi resolvido.  Al√©m disso, voc√™ pode verificar a conex√£o do dispositivo com o hub clicando no sensor no centro.  Se tudo estiver bem, em chin√™s puro, as informa√ß√µes relevantes ser√£o ouvidas no hub (no caso do hub Aqara, a comunica√ß√£o ser√° em ingl√™s agrad√°vel). <br><br>  Verificar o desligamento e ligar a eletricidade usando a m√°quina mostrou que o soquete inteligente entra no estado desligado.  Para mudar para o estado ligado quando a eletricidade aparecer, existe uma configura√ß√£o correspondente: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7m/mp/rv/7mmprvrfrwirqrveigp5hk5rbna.jpeg" alt="imagem"></div><br>  Um sinal adicional da inunda√ß√£o da sala foi um aumento de umidade de at√© 100%.  Sobre o controle desse sintoma - na pr√≥xima se√ß√£o. <br><br><h2>  Controle de fuma√ßa e temperatura </h2><br>  O balne√°rio √© uma sala de risco de inc√™ndio; portanto, o cen√°rio a seguir foi identificar sinais de inc√™ndio. <br><br>  Para este cen√°rio, eram necess√°rios dois sensores de temperatura (e umidade) e um sensor de fuma√ßa.  O pre√ßo do sensor de temperatura √© de cerca de 1000 r.  O detector de fuma√ßa custa cerca de 2000 p.  Na vers√£o Aqara para a regi√£o local, atualmente n√£o h√° detector de fuma√ßa, o que novamente nos liga √† regi√£o ‚ÄúChina Continental‚Äù. <br><br>  O detector de fuma√ßa foi montado no teto do corredor na sala de lavagem (na verdade, n√£o muito longe do fog√£o e da sa√≠da da sala de vapor).  Em seguida, no aplicativo Xiaomi Home, um dispositivo foi adicionado e um cen√°rio "em caso de detec√ß√£o de fuma√ßa" foi criado, seguido pelo envio de uma notifica√ß√£o para o telefone.  O teste foi realizado por uma lareira.  O sensor concluiu com sucesso o teste.  O hub piscou com um alarme, mais um alerta sonoro funcionou.  O sensor em si tamb√©m emitia um sinal sonoro muito vil e alto, alertando sobre o problema. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zg/ej/jg/zgejjg01wv9ayueq8tzptcumzs8.jpeg" alt="imagem"></div><br>  Outro sinal de inc√™ndio √© o aumento da temperatura.  Para monitorar a temperatura, dois sensores foram instalados: um no banheiro e outro no banheiro.  Em seguida, no aplicativo, o cen√°rio ‚Äúno caso de uma temperatura superior √† definida‚Äù foi configurado com a notifica√ß√£o correspondente ao telefone.  No momento, defino o limite para a sala de relaxamento em 30 graus (no ver√£o, provavelmente, precisarei reconfigur√°-la). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nq/0w/pj/nq0wpjrfwe3nsl6hfpnjxwsuzhq.jpeg" alt="imagem"></div><br>  Al√©m disso, o cen√°rio foi configurado "no caso de uma temperatura abaixo do conjunto", com um limite de 18 graus e alertas para o telefone.  Se, por algum motivo, o aquecimento parar de funcionar, eu gostaria de saber o mais r√°pido poss√≠vel.  Da mesma forma, os cen√°rios ‚Äúno caso de aumento de umidade‚Äù foram criados para ambos os sensores com um limite de 70%, um alerta para o telefone e um desligamento da bomba de abastecimento de √°gua. <br><br>  Dos agrad√°veis ‚Äã‚Äãb√¥nus para sensores de temperatura e umidade, gr√°ficos hist√≥ricos est√£o dispon√≠veis no aplicativo.  Voc√™ pode, por exemplo, determinar em que momentos o banho foi usado para a finalidade a que se destina (picos de temperatura no gr√°fico abaixo) ou comparar se a temperatura atual √© anormal. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cf/tb/av/cftbaviejmlpp8nndfwizm6un60.jpeg" alt="imagem"></div><br><br><h2>  Controle de ventila√ß√£o </h2><br>  Um extrato for√ßado das instala√ß√µes √© organizado na sala de vapor.  Ap√≥s a conclus√£o dos procedimentos, √© aconselh√°vel ventilar a sala.  A ventila√ß√£o era ligada por um interruptor de chave, e a ventila√ß√£o em si precisava de pelo menos 30 minutos, no entanto, muitas vezes as reuni√µes na casa de banho terminam na primeira ou na segunda hora da noite.  Nem sempre √© poss√≠vel fazer tudo com anteced√™ncia, mas sentar no final por mais 30 minutos e esperar at√© a sala de vapor ser ventilada √© um prazer abaixo da m√©dia devido ao fato de que voc√™ j√° quer dormir. <br><br>  Para este cen√°rio, precis√°vamos de um interruptor de chave da Xiaomi com uma linha zero e montagem na parede.  O pre√ßo da emiss√£o √© de cerca de 1900 p.  Os switches est√£o dispon√≠veis na vers√£o Aqara para o mercado local. <br><br>  No meu caso, √© imposs√≠vel simplesmente substituir um comutador convencional por um comutador inteligente - √© necess√°ria uma linha de energia.  Dessa forma, tive que esticar a linha zero at√© o orif√≠cio de montagem do comutador, pois havia essa oportunidade.  No caso de um switch sem linha zero, a instala√ß√£o seria mais f√°cil. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/q0/k2/p-/q0k2p-qvozvt_zk3e-i407jprhk.jpeg" alt="imagem"></div><br>  Ap√≥s a instala√ß√£o, um switch inteligente foi adicionado ao aplicativo como dispositivo e seu desempenho foi testado.  H√° um temporizador nas configura√ß√µes do interruptor, e voc√™ pode definir a hora de desligar.  Ou seja, agora, antes de sair do banho, o cron√¥metro est√° definido para mais 30 minutos de ventila√ß√£o e voc√™ pode dormir em seguran√ßa. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9e/4c/5g/9e4c5gckmsp0dsiekxkbvhk5imk.jpeg" alt="imagem"></div><br>  Mais uma op√ß√£o de automa√ß√£o de processos √© poss√≠vel.  Ap√≥s o banho, al√©m da ventila√ß√£o, a porta da sala de vapor se abre completamente.  Isso leva a um aumento de temperatura na sala de lavagem, onde um sensor de temperatura est√° instalado.  Com base nas leituras desse sensor, voc√™ pode criar cen√°rios de ativa√ß√£o / desativa√ß√£o da ventila√ß√£o.  Mas ainda n√£o executei esta op√ß√£o.  Al√©m disso, pode-se experimentar um sensor aberto da porta da sala de vapor.  Mas receio que ele morra ou caia rapidamente, j√° que a porta √© feita de vidro e, na sala de vapor, tamb√©m pode ser de 120 graus. <br><br><h2>  Controle de ilumina√ß√£o p√∫blica </h2><br>  Outra tarefa que eu queria automatizar era controlar as luzes da rua na varanda.  Um dos cen√°rios t√≠picos: acenda a luz na varanda quando voc√™ estiver perto do pr√©dio e escurecer l√° fora.  O banheiro est√° trancado, o interruptor da luz da rua est√° localizado dentro de casa.  Eu tive que ir atr√°s da chave para abrir a porta e acender a luz.  Desligar as luzes requer um procedimento semelhante.  Outro cen√°rio que surge regularmente: acender ou apagar a luz da varanda quando voc√™ estiver na casa principal.  Muitas vezes, ao sair da casa de banho, esqueci de apagar a luz da varanda e descobri isso quando estava em casa: olhando pela janela ou olhando para as c√¢meras de vigil√¢ncia.  Neste momento, a relut√¢ncia geralmente n√£o tem para onde ir, ent√£o a luz continuou a queimar a noite toda. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/tg/ex/cctgexbilx-hsr-tomjp9cs0gl8.jpeg" alt="imagem"></div><br>  Para implementar essa id√©ia, um rel√© de dois canais foi comprado.  O pre√ßo da emiss√£o √© de cerca de 2000 p.  Atualmente, faltam rel√©s na vers√£o Aqara para o mercado local.  Mas pode ser substitu√≠do por um comutador de chave (√© claro que instal√°-lo em uma caixa de distribui√ß√£o √© um processo mais problem√°tico). <br><br>  Inicialmente, pretendia montar o rel√© atr√°s do interruptor de chave, no entanto, era muito problem√°tico puxar a linha de energia para o lugar certo (novamente, o rel√© precisa de energia).  Um local ideal √© uma caixa de deriva√ß√£o onde a linha de energia, a linha do interruptor e a linha das l√¢mpadas das ruas convergiram.  Estava sob um teto falso, o que levou ao desmantelamento de v√°rios trilhos de revestimento.  Era aconselh√°vel pensar sobre esse ponto com anteced√™ncia.  No entanto, a instala√ß√£o foi conclu√≠da com √™xito.  O diagrama de fia√ß√£o √© muito mais complicado do que para tomadas e interruptores (no meu caso, quatro fios de 3 fios e 8 terminais no pr√≥prio rel√©).  Para n√£o ter em mente e n√£o confundir nada, desenhei um diagrama em um peda√ßo de papel antes de montar.  Ent√£o eu fiz uma instala√ß√£o de teste para verificar tudo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bz/n5/gd/bzn5gdba_obeh-ja73lxl2fdvjc.jpeg" alt="imagem"></div><br>  O dispositivo foi conectado ao aplicativo e a etapa de teste foi iniciada.  A luz da rua deveria ser ligada / desligada como uma chave anteriormente existente e usando o aplicativo.  H√° duas luzes na rua - uma √† esquerda e a outra √† direita.  O rel√© possui dois canais, mas n√£o fazia sentido ativ√°-los separadamente.  Por outro lado, n√£o queria inclu√≠-los por vez com dois cliques no aplicativo.  Portanto, o controle foi feito em um canal de rel√©.  Por uma estranha coincid√™ncia, essa op√ß√£o n√£o funcionou normalmente - houve uma ou outra posi√ß√£o.  N√£o havia muito tempo para experimentos, pois a luz do dia terminou e eu queria montar o forro na parte traseira do teto.  Portanto, eu apenas peguei as luzes em paralelo nos dois canais e tudo funcionou como eu queria.  Para que os comutadores f√≠sicos e de software funcionassem como passagens, a op√ß√£o Interlock foi ativada nas configura√ß√µes do rel√©. <br><br>  Tamb√©m seria poss√≠vel organizar a luz do timer liga / desliga.  Mas esse cen√°rio ainda n√£o est√° interessado. <br><br><h2>  Controle de acesso </h2><br>  Outro momento curioso foi o controle sobre a abertura da porta da rua.  Primeiro de tudo, para determinar e notificar que algu√©m se esqueceu de fechar a porta normalmente ou completamente a deixou aberta. <br><br>  Para este cen√°rio, era necess√°rio um sensor de abertura de janela / porta.  O pre√ßo de emiss√£o √© de cerca de 1000 r.  Existem sensores fabricados pela Aqara para o mercado local (eles possuem bordas menos arredondadas). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pb/fy/id/pbfyidivjmpgggpxrwxowgeq-h8.jpeg" alt="imagem"></div><br>  A instala√ß√£o √© muito simples - os sensores s√£o montados em fita dupla face.  Antes da montagem, √© melhor conectar o sensor no aplicativo para ver a que dist√¢ncia a opera√ß√£o ocorre.  As instru√ß√µes escrevem sobre uma folga de at√© 20 mm, mas, para dizer o m√≠nimo, n√£o √© verdade - o sensor e o √≠m√£ de resposta precisam ser montados quase nivelados.  Na casa principal, um sensor semelhante √© instalado na porta da garagem.          1 .       ‚Äú‚Äù     . <br><br>  ,       ,    .   ‚Äú    1 ‚Äù    .         1 ,     .    Aqara   Aqara Home     .    Xiaomi Home   ,  , .   ,    1     ‚Äì   ,     .      .     . , ,   ,     (     )     (  ),        . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wk/uv/ry/wkuvryxsyoah4u-7dwoj0yct9a4.jpeg" alt="imagem"></div><br><br><h2>    </h2><br>      . ,    ,     .   ,   ,   .     ‚Äì      , ,    .   ,      . <br><br>         (    )  .    AliExpress      . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i9/ij/pf/i9ijpffhxd2i-jaq00ieo58eupo.png" alt="imagem"></div><br>        (           ).       , , ,     (  ‚ÄúChina Mainland‚Äù)      .       ,      Aqara   .   ,   , ,  .  ,  Xiaomi , ,   - (     ).  , , ,      .     ,          .     ,     (  ‚Äì     ‚Äì ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uw/ph/x_/uwphx_titz3r1-hhwlduqxmzlwg.jpeg" alt="imagem"></div><br>       . ,     ,            ‚Äúrequest failed‚Äù.    ‚Äì        ‚Äì    ,      .      (   20-30)       .         / ,     .             .       ‚Äì        .           .  ,      push-   (   ). , ,  ,    . <br><br> ,           Xiaomi         .     - ,    ,      . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt482554/">https://habr.com/ru/post/pt482554/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt482540/index.html">Software VS Hardware: o que est√° na tend√™ncia e quem √© o futuro?</a></li>
<li><a href="../pt482544/index.html">Reunindo uma equipe de inicializa√ß√£o com "0" - instru√ß√µes passo a passo para os menores</a></li>
<li><a href="../pt482546/index.html">VK Tech: um ano de desenvolvimento em n√∫meros Git</a></li>
<li><a href="../pt482550/index.html">O misterioso programa LyX. Parte 2</a></li>
<li><a href="../pt482552/index.html">Registro e autoriza√ß√£o usando o Spring Security usando um aplicativo simples como exemplo</a></li>
<li><a href="../pt482556/index.html">Na √©poca em que a grama estava "mais verde" e a AKG produzia fones de ouvido dinost√°ticos</a></li>
<li><a href="../pt482558/index.html">Cientistas mataram o v√≠rus do herpes adormecido em c√©lulas humanas</a></li>
<li><a href="../pt482560/index.html">Como escrever textos f√°ceis</a></li>
<li><a href="../pt482562/index.html">O computador pessoal deveria morrer dez anos atr√°s: o que aconteceu</a></li>
<li><a href="../pt482564/index.html">Se todas as hist√≥rias foram escritas no estilo de fic√ß√£o cient√≠fica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>