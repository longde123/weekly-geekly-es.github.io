<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏽 ✋🏾 🐽 Buka webinar "SELECT pesanan eksekusi permintaan dan rencana permintaan di MS SQL Server" ⁉️ 🚏 🕯️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo lagi! 

 Kolega, pada hari terakhir bulan Januari, kami meluncurkan kursus “Pengembang MS SQL Server” , sehubungan dengan yang kami dapatkan dari...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Buka webinar "SELECT pesanan eksekusi permintaan dan rencana permintaan di MS SQL Server"</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/437828/">  Halo lagi! <br><br>  Kolega, pada hari terakhir bulan Januari, kami meluncurkan kursus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">“Pengembang MS SQL Server”</a> , sehubungan dengan yang kami dapatkan dari pelajaran terbuka bertema.  Di dalamnya kita berbicara tentang bagaimana MS SQL Server mengeksekusi query SELECT, membahas urutan dan apa yang dianalisis, dan juga terjun sedikit ke dalam membaca rencana kueri. <br><br>  Dosen - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kristina Kucherova</a> , arsitek model data di Sberbank Rusia. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/H9oS-eLSX_8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br>  <b>Tujuan dan rute webinar</b> <br><br>  Tujuan-tujuan berikut ini ditetapkan pada awal webinar: <br><br><ol><li>  Lihat bagaimana server mengeksekusi permintaan, dan mengapa ini terjadi dengan cara ini </li><li>  Belajar membaca rencana kueri. </li></ol><br>  Untuk mencapainya, guru menyiapkan rute yang sederhana namun efektif: <br><br><img src="https://habrastorage.org/webt/fq/kj/nr/fqkjnrypzokv5wpzw1phclft3xa.jpeg"><br><br>  <b>Mengapa saya memerlukan paket permintaan?</b> <br><br>  Rencana kueri adalah alat yang sangat berguna, yang, sayangnya, banyak pengembang tidak menggunakannya.  Sekilas, sepertinya tidak perlu tahu mekanisme permintaan itu.  Namun, jika Anda memahami apa yang terjadi di dalam SQL Server, Anda dapat menulis kueri yang lebih efisien.  Dan itu akan banyak membantu, misalnya, selama optimasi. <br><br>  <b>Bagaimana kita melihat kueri SELECT?</b> <br><br>  Mari kita lihat seperti apa query SELECT: <br><br><table><tbody><tr><td>  PILIH [bidang1], [bidang2] ... <br></td><td>  Bidang apa yang kita pilih? <br></td></tr><tr><td>  DARI [tabel] <br></td><td>  Dari mana? <br></td></tr><tr><td>  WHERE [ketentuan] <br></td><td>  Dimana kondisinya <br></td></tr><tr><td>  GROUP BY [bidang1] <br></td><td>  Kelompokkan menurut bidang <br></td></tr><tr><td>  MEMILIKI [kondisi] <br></td><td>  Memiliki kondisi ini dan itu <br></td></tr><tr><td>  PESANAN OLEH [field1] <br></td><td>  Pemesanan (sortir) <br></td></tr></tbody></table><br>  <b>Bagaimana memahami ke mana harus mencari data?</b> <br><br>  Hal pertama yang coba dipahami server ketika permintaan datang adalah ke mana harus mencari data.  Perintah FROM menjawab pertanyaan ini, karena di sinilah kita akan memiliki daftar tabel (atau nama satu tabel). <br><br>  Untuk lebih jelasnya, mari kita bayangkan bahwa server kami adalah semacam kepala pelayan, yang kami pesan untuk menjemput kami saat liburan.  Dengan demikian, kepala pelayan mulai berpikir, tetapi di lemari apa hal-hal yang diperlukan (di meja mana Anda perlu mengambil data)?  Dan agar kepala pelayan kami dapat dengan mudah menyelesaikan tugasnya, kami menggunakan FROM. <br><br><img src="https://habrastorage.org/webt/ig/wo/uy/igwouy4la8vroshisd8pk5sqcx8.jpeg"><br><br>  <b>Bagaimana cara memahami data yang akan diambil?</b> <br><br>  Katakanlah kepala pelayan menemukan lemari yang tepat dan membukanya.  Tetapi hal-hal apa yang harus diambil?  Mungkin kita akan pergi ke resor ski?  Atau mungkin di pantai yang panas dan terik?  Untuk membuat hal-hal kami cocok dengan cuaca, perintah WHERE berguna bagi kami, yang menentukan kondisi, yaitu, memungkinkan kami untuk menyaring data.  Jika panas, kita ambil papan tulis, baju dan pakaian renang, jika dingin - sarung tangan, kaus kaki rajutan, sweater)). <br><br>  Langkah selanjutnya adalah melampirkan data ini ke grup, yang terjadi dengan GROUP BY (kaus terpisah, kaus kaki terpisah).  Menurut hasil pengelompokan, satu kondisi lagi dapat dikenakan menggunakan HAVING (misalnya, mencabut hal-hal yang tidak berpasangan).  Pada akhirnya, kami menambahkan semuanya menggunakan ORDER BY, mendapatkan koper yang sudah jadi pada output, atau lebih tepatnya, blok data yang dipesan. <br><br><img src="https://habrastorage.org/webt/vd/lt/4b/vdlt4bg1o5ebpaxz1di_vhl__tm.jpeg"><br><br>  By the way, ada nuansa, tetapi terdiri dalam kenyataan bahwa ada perbedaan kondisi yang harus ditentukan di WHERE dan yang di HAVING.  Tapi ini lebih baik dilihat di video. <br><br>  Kami melanjutkan.  Jalur eksekusi permintaan disimpan <b>sebagai rencana permintaan</b> di cache, yaitu, kepala pelayan kami menuliskan semuanya, karena ia adalah kepala pelayan yang baik - bagaimana jika Anda ingin mengulangi pesanan Anda tahun depan?  Dan rencana semacam itu, pada prinsipnya, mungkin banyak. <br><br>  <b>Jenis koneksi dalam paket kueri</b> <br><br>  Ada tiga koneksi yang mungkin Anda temui dalam hal permintaan: <br><br><ol><li>  Nested Loop. </li><li>  Gabung bergabung. </li><li>  Hash bergabung. </li></ol><br>  Sebelum membahas masing-masing secara lebih rinci, mari kita rangkum mengapa kita harus membaca rencana kueri.  Ini sebenarnya sangat berguna karena Anda akan belajar: <br><br><ul><li>  indeks mana yang digunakan; </li><li>  dalam urutan apa gabung; </li><li>  apa yang dipilih dari buffer; </li><li>  berapa banyak server menghabiskan sumber daya pada operasi; </li><li>  apa perbedaan antara rencana hipotetis dan nyata. </li></ul><br>  <b>Loop bersarang</b> <br><br>  Katakanlah kita perlu menggabungkan data dari tabel yang berbeda.  Mari kita sajikan tabel ini sebagai ... sejumlah kecil cokelat Skittles dan kemasan lengkap M&amp;M. <br><br><img src="https://habrastorage.org/webt/4k/-s/uh/4k-suhjbpvptu8kjhe77rx8posm.jpeg"><br><br>  Saat menghubungkan jenis Nested Loop, kami mengambil permen Skittles, dan kemudian kami mendapatkan permen buta dari paket M&amp;M.  Jika kami tidak menemukan permen dengan warna yang sama (ini adalah kondisi kami), kami mendapatkan yang berikutnya, yaitu ada payudara biasa.  Akibatnya, kita dapat mengatakan bahwa koneksi Nested Loop lebih cocok untuk sejumlah kecil data.  Jelas, jika ada banyak data, penghilang bukanlah pilihan terbaik. <br><br><img src="https://habrastorage.org/webt/fu/0d/mv/fu0dmvprjve1i1mgbn5v3nou3ow.jpeg"><br><br>  Mari kita lihat tampilannya di panel SQL: <br><br><pre><code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--drop table skittles --drop table mms --    create table mms (id int identity(1,1), color varchar(25), taste varchar(15)) insert into mms (color, taste) values ('yellow', 'chocolate') insert into mms (color, taste) values ('red', 'nuts') create clustered index IX_mms_color ON mms(color); create table skittles (id int identity(1,1), color varchar(25), taste varchar(15)) create index IX_skittles_id ON skittles(id); create clustered index IX_skittles_color ON skittles(color); insert into skittles (color, taste) values ('red', 'cherry') insert into skittles (color, taste) values ('blue', 'strange') insert into skittles (color, taste) values ('yellow', 'lemon') insert into skittles (color, taste) values ('green', 'apple') insert into skittles (color, taste) values ('orange', 'orange') --    select mms.* from mms join skittles on mms.color = skittles.color select * from mms join skittles on mms.color = skittles.color</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/gx/vj/ed/gxvjedgxwzjcdv2kbzreqmmofwi.jpeg"><br><br>  <b>Gabung bergabung</b> <br><br>  Koneksi digunakan untuk sejumlah besar data.  Saat Anda memiliki gabungan Gabung, kedua tabel Anda memiliki indeks yang dengannya mereka dapat bergabung.  Dalam hal permen, seolah-olah kita mengaturnya terlebih dahulu berdasarkan warna. <br><br>  Ini terlihat seperti ini: <br><br><img src="https://habrastorage.org/webt/j2/cy/ld/j2cyldmem4_ytym2ssj3wpyco1q.jpeg"><br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--2 tables 50000 rows, only clustered index by color, color is not unique select COUNT(*) from mms_big join skittles_big on mms_big.color = skittles_big.color</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/xv/vm/mf/xvvmmf1ozq_lt7f2rrcnqsvz1cs.jpeg"><br><br>  Gabung gabung baik dalam kasus berikut: <br><br><ul><li>  set data besar; </li><li>  bidang koneksi yang sama dari jenis yang sama; </li><li>  bidang koneksi memiliki indeks. </li></ul><br>  <b>Hash bergabung</b> <br><br>  Hash join digunakan untuk sejumlah besar data yang tidak disortir.  Untuk bergabung dengan tabel dalam hal ini, Anda perlu membuat sesuatu yang meniru indeks. <br><br>  Hash bergabung dengan contoh: <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--drop table skittles --drop table mms --    create table mms (id int identity(1,1), color varchar(25), taste varchar(15)) insert into mms (color, taste) values ('yellow', 'chocolate') insert into mms (color, taste) values ('red', 'nuts') insert into mms (color, taste) values ('blue', 'strange') insert into mms (color, taste) values ('green', 'chocolate') insert into mms (color, taste) values ('orange', 'chocolate') create table skittles (id int identity(1,1), color varchar(25), taste varchar(15)) insert into skittles (color, taste) values ('red', 'cherry') insert into skittles (color, taste) values ('blue', 'strange') insert into skittles (color, taste) values ('yellow', 'lemon') insert into skittles (color, taste) values ('green', 'apple') insert into skittles (color, taste) values ('orange', 'orange') --    select * from mms join skittles on mms.color = skittles.color</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/0g/vr/xd/0gvrxdfdoc55bwpdkv5ghkwnq-w.jpeg"><br><br>  Untuk kejelasan, kami mengingat permen kami: <br><br><img src="https://habrastorage.org/webt/xg/2l/cn/xg2lcndw5mzxm5msx6l_0kq_4wc.jpeg"><br><br>  Penggunaan Hash join melibatkan 2 fase tindakan: <br><br><ol><li>  Build - tabel hash dibangun di atas meja terkecil.  Untuk setiap nilai dalam tabel No. 1, hash dipertimbangkan.  Nilai disimpan dalam tabel hash, dan hash yang dihitung digunakan sebagai kunci. </li><li>  Probe.  Untuk setiap baris dari tabel No. 2, nilai hash dihitung untuk bidang yang ditentukan dalam gabungan (operator =).  Hash dicari di tabel hash, nilai bidang diperiksa. </li></ol><br><img src="https://habrastorage.org/webt/nr/nn/q2/nrnnq2ahbh57a28x3szylahyjue.jpeg"><br><br><img src="https://habrastorage.org/webt/fu/e3/bg/fue3bgxwsesvzgwjgzzva6isnpu.jpeg"><br><br><img src="https://habrastorage.org/webt/dd/fx/mn/ddfxmnjwgneqpqmzxeseavjpkhy.jpeg"><br><br>  Kapan hash bergabung adalah baik: <br><br><ul><li>  kumpulan data besar; </li><li>  tidak ada indeks marjinal. </li></ul><br>  Poin penting: jika tidak ada cukup memori, rekaman akan masuk ke tempdb - ke disk. <br><br>  Teman-teman, selain hal di atas, pelajaran terbuka juga termasuk poin menarik lainnya, yang paling baik dilihat dengan menonton video.  Kami menyarankan untuk mengunjungi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Hari Terbuka kursus</a> "Pengembang MS SQL Server", di mana Anda dapat menanyakan semua pertanyaan Anda kepada guru. <br><br>  Guru PS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kristina Kucherova</a> berterima kasih kepada Jes Schultz Borland atas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">presentasinya</a> dengan Rencana Eksekusi PASS Summitt: The Secret to Query Tuning Success, yang digunakan dalam mempersiapkan pelajaran terbuka. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id437828/">https://habr.com/ru/post/id437828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id437816/index.html">MPLS ada di mana-mana. Bagaimana infrastruktur jaringan Yandex.Cloud</a></li>
<li><a href="../id437818/index.html">Kami mengajarkan komputer untuk membedakan suara: mengenal kontes DCASE dan merakit klasifikasi audio Anda dalam 30 menit</a></li>
<li><a href="../id437820/index.html">50 nuansa keamanan Drupal</a></li>
<li><a href="../id437824/index.html">Ekstensi 1C universal untuk Google Sheets dan Documents - ambil dan gunakan</a></li>
<li><a href="../id437826/index.html">Bagaimana kami memigrasi database dari Redis dan Riak KV ke PostgreSQL. Bagian 1: proses</a></li>
<li><a href="../id437830/index.html">Pemrograman yang andal berdasarkan bahasa - review noob. Bagian 1</a></li>
<li><a href="../id437832/index.html">Sumber terbuka: humor kode, trik kode, BUKAN kode</a></li>
<li><a href="../id437834/index.html">Dua cerita tentang bagaimana acara pemrograman berlangsung di Yekaterinburg</a></li>
<li><a href="../id437836/index.html">Di bawah tenda Screeps - virtualisasi di kotak pasir MMO untuk programmer</a></li>
<li><a href="../id437838/index.html">Teknologi pembelajaran mesin mempercepat proses adaptasi pasien terhadap protesa bionik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>