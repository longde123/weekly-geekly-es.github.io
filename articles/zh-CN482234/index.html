<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛳️ 🗜️ 🍋 PADS Professional中的数模转换和混合建模 🛀🏼 🖇️ 👄</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="内置模拟混合信号建模（AMS）工具是PADS Professional包含的有用功能之一，它使您可以使用SPICE和VHDL-AMS模型来仿真电路设计。 使用这两种模型的能力可以对复杂的机电一体化系统进行更灵活，更准确的验证。 通过在布局，布线或生产阶段开始之前执行仿真，可以确保电路解决方案按预期工...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PADS Professional中的数模转换和混合建模</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nanosoft/blog/482234/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/w2/_m/zr/w2_mzrigorvjrshvg7lntjfwfnm.png"></div><br><br> 内置模拟混合信号建模（AMS）工具是PADS Professional包含的有用功能之一，它使您可以使用SPICE和VHDL-AMS模型来仿真电路设计。 使用这两种模型的能力可以对复杂的机电一体化系统进行更灵活，更准确的验证。 通过在布局，布线或生产阶段开始之前执行仿真，可以确保电路解决方案按预期工作，从而消除了与性能相关的问题。 在本文的框架中，我们将使用SPICE和VHDL-AMS模型对发生器电路进行设计和建模。 然后，我们将研究如何使用AMS集成功能为现有电路建模。 <br><br> 所有最有趣的事情都在削减。 <br><br><img src="https://habrastorage.org/webt/xk/zl/u9/xkzlu9ne10dq03qfhm9vsv8japm.png" width="100" height="98"><br><a name="habracut"></a><br><h2> 模式创建 </h2><br> 在PADS Designer中，我设计了部分完成的振荡器电路。 我要做的第一件事是添加缺少的电路元件和相关的仿真模型。 要搜索和放置符号，我使用PADS Designer中AMS建模工具栏上的“ <b>搜索/放置符号</b> ”工具。 我将在电路上放置的第一个组件是LM741运算放大器，它由Spice宏模型小节（图1）中的标准7针符号表示。 <br><br> <a href=""><img src="https://habrastorage.org/webt/fj/-o/pf/fj-opfdqdm0pjsiqeneo1bqjcwk.png"></a> <br>  <i>图1：将运算放大器符号添加到部分完成的振荡器电路中（可单击）</i> <br><br> 以类似的方式，我们将缺失电阻的符号与库中随附的VHDL-AMS模型一起放置。 放置电阻器符号后，右键单击该符号，然后选择“ <b>Edit Model Properties</b> ”。 在出现的“ <b>模型属性”</b>窗口中<b>，</b>我可以编辑模型的所有必要属性，包括指定特定的零件编号和设置所需的数值参数。 在我们的案例中，我为组件分配了一个预先计算的电阻值3.2 kOhm，这对于实现正确的振荡器增益是必不可少的（图2）。 <br><br> <a href=""><img src="https://habrastorage.org/webt/pu/-f/o5/pu-fo59hmng9o7rnl_hh0wo5rmi.png"></a> <br>  <i>图2：通过“模型属性”窗口为电阻器分配一个值（可单击）</i> <br><br> 然后，以同样的方式，通过“ <b>模型属性</b> ”窗口，为运算放大器的符号选择所需的微电路模型。  “ <b>SPICE文件名</b> ”下拉列表显示了模型库的所有可用部分。  “ <b>模型/子电路</b> ”列表显示所选模型库中包含的所有组件。 在这里，我选择手术模型LM741的模型（图3）。 选择模型后，将打开一个窗口，您可以在其中将模型的结论与符号的结论进行比较（这是自动发生的，但如有必要，您可以随时重新分配它们）。 <br><br> <a href=""><img src="https://habrastorage.org/webt/pq/d0/eu/pqd0eujwc-790muzg209tnod_48.png"></a> <br>  <i>图3：将SPICE仿真模型LM741分配给运算放大器符号（可单击）</i> <br><br> 要用维恩桥完成该发生器电路，我需要几个二极管。 可以直接从PADS Designer中的仿真工具栏放置SPICE原语二极管。 放置符号后，按照与使用LM741运算放大器选择所需组件模型时相同的步骤进行操作。 在这种情况下，我需要一个1N914型号。 该电路要求将这些二极管以相反的方向平行放置，以保持正确的增益并确保稳定的振荡状态。 将模型分配给第一个二极管后，我可以简单地复制带有所有属性的符号并将其粘贴到所需的位置，作为第二个二极管（图4）。 <br><br> <a href=""><img src="https://habrastorage.org/webt/85/cn/_u/85cn_u-sw2b5mydcq6qxfbpo6vw.png"></a> <br>  <i>图4：在振荡器电路中添加两个并联二极管（可单击）</i> <br><br><h2> 电源和信号的形成 </h2><br> 在PADS Pro Designer中，由于完全集成的AMS建模平台，因此可以添加接地和功率模型，而无需创建和放置单独的原理图符号。 在为运放添加正负电压源模型之前，我首先绘制电路，将其连接到符号的正负输出，然后分别命名。 接下来，转到“ <b>仿真</b> ”菜单，选择“ <b>设置原理图</b> ”，然后在出现的窗口中单击“ <b>添加源</b> ”。 由于我已经在上一步中指出了连接到运算放大器电源端子的电源电路的名称，因此选择这些电路以为其分配正负5伏电源将是一个非常简单的过程（图5）。 <br><br> <a href=""><img src="https://habrastorage.org/webt/wg/0c/rh/wg0crhct-ksowl0kpouldlvualm.png"></a> <br>  <i>图5：为运算放大器添加正电源和负电源（可单击）</i> <br><br> 在这些电源模型上，可以启用交流电（AC）模拟选项。 当您要对另一个直流电路中给定域的频率响应建模时，可以使用它。 我不会将交流仿真选项用于运放电压源，但会向发电机电路的RC电路（P1）中添加带有交流分析选项的分段线性电流源。 这样做的目的是模拟在实际条件下触发振荡的瞬态开关过程。 对于分段线性电流源，我希望0.1 mA打开30μs，然后在AC值为1A时关闭。 这足以触发振荡（图6）。 <br><br> <a href=""><img src="https://habrastorage.org/webt/iz/rt/7m/izrt7mg7-izffpyyqrgk5jnnqqq.png"></a> <br>  <i>图6：为分段振荡创建分段线性电流源（可单击）</i> <br><br><h2> 造型 </h2><br> 在添加所有源之后，我们可以继续对电路进行建模。 我只选择要在PADS Designer中模拟的电路部分，然后右键单击并选择“ <b>模拟所选组件</b> ”（仅对所选组件建模）。 我将从时域（5毫秒）分析开始。 我希望看到输出正弦波的频率约为14 kHz。 快速查看和评估模拟输出信号，我们得出结论，该电路按预期工作（图7）。 <br><br> <a href=""><img src="https://habrastorage.org/webt/pl/wy/1z/plwy1zvg6-xathj0w-reprupyte.png"></a> <br>  <i>图7：在时域中为发生器电路建模输出信号的形状（可单击）</i> <br><br> 现在，我知道该振荡器可以在14 kHz正常工作，我将复制该电路并更换RC电路中的电容器，以模拟第二个8 kHz的振荡器。 接下来，我将在电路中包括第三个运算放大器，它将用作将两个正弦曲线放在一起的简单加法器（图8）。 最后，和以前一样，我需要向该电路（P2）添加分段线性电流源。 我将为此电流源使用与第一个发电机相同的参数，因此两个发电机将同时启动。 实际上，我可以将此电路用于信号处理设备，其中求和放大器的输出就是ADC的输入。 <br><br> <a href=""><img src="https://habrastorage.org/webt/lo/aa/0h/loaa0hyfjtlsig2xtad1xl1ixxm.png"></a> <br>  <i>图8：具有两个发生器和一个求和放大器的最终电路（可单击）</i> <br><br>  PADS Professional允许您在任何设计阶段执行类似的仿真。 因此，通过在项目的不同阶段进行建模，您可以显着减少或完全消除最终产品中不必要的功能意外。 现在，我准备用电路模拟整个工作表，以确保整个系统按预期工作。 这次，我将在频域（从1 Hz到100 kHz）中执行仿真，以清楚地看到整个系统的运行情况。 查看求和电路的输出信号（图9），您可以清楚地看到两个正弦信号，每个信号都以其给定的频率工作。 <br><br> <a href=""><img src="https://habrastorage.org/webt/sa/fu/t5/safut5ahkdmhobvmowt-o2utaiq.png"></a> <br>  <i>图9：在频域中对整个电路建模。</i>  <i>两个正弦信号都清晰可见（可单击）</i> <br><br><h2> 不同类型的分析 </h2><br> 回到我们的电路，我还创建了一个简单的降压转换器（5V-3.3V），其开关频率为250 kHz（图10）。 为了创建必要的建模波形并确认电路的正确功能，我想在时域中查看输出信号的FFT。 我可以通过在“ <b>模拟控件</b> ”弹出窗口的“ <b>时域分析</b> ”部分中选中“启用FFT”复选框来完成此操作。 在“ <b>仿真控制</b> ”窗口的“ <b>结果</b> ”选项卡上，我可以仅为输出信号配置选择性FFT触发。 通过选择我感兴趣的特定信号来执行FFT（FFT）而不是对电路中的所有信号进行转换，我可以显着减少总仿真时间。 接下来，我们自己开始仿真过程。 <br><br> <a href=""><img src="https://habrastorage.org/webt/is/yj/x7/isyjx7kgj1adml4bfeq7pmmawsw.png"></a> <br>  <i>图10：降压转换器（5V-3.3V）的图（可单击）</i> <br><br> 首先，我想测量电压的输出纹波，以确保其落在允许的工作极限内。 我从“ <b>波形分析器”</b>窗口的左窗格中选择<b>v_out</b>信号。 通常，我看到输出电压如预期的那样设置为约3.3 V（图11a）。 为了测量电压纹波，我将增加一小部分正在研究的信号，并使用内置的波形计算器来获得电压纹波的峰值（图11b）。 波形计算器可广泛用于类似和许多其他类型的计算。 <br><br> <a href=""><img src="https://habrastorage.org/webt/sq/6n/3k/sq6n3kf94yy0yrxqnj280uu7w9a.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/f7/dp/mg/f7dpmgrju6kw4do2w6kfs6brh60.png"></a> <br>  <i>图11a（顶部）：显示3.3V电压的V_out波形（可单击）</i> <i><br></i>  <i>图11b（底部）：波形分析仪，用于计算输出电压的峰值纹波（可单击）</i> <br><br> 为了更深入地了解脉冲转换器的操作，我可以看到为v_out打开的FFT波形。 可以在“ <b>波形分析器</b> ”窗口左侧的“ <b>傅立叶分析</b> ”部分中找到它。 为了更好地解释结果，我将以对数刻度显示x轴。 现在，我看到在输出信号的幅度和相位中，输出电容器的低通滤波器，电感和阻性负载的影响清晰可见，并且在250 kHz开关频率下的谐波衰减也清晰可见（图12）。 <br><br> <a href=""><img src="https://habrastorage.org/webt/ag/zi/7t/agzi7t2ovgogsqfjl2bkeqquide.png"></a> <br>  <i>图：降压转换器的12 FFT和PFC输出信号（可单击）</i> <br><br> 除了时域和频域中的标准仿真方案外，我还可以运行其他类型的分析，例如扫描分析，蒙特卡洛分析，灵敏度分析和最坏情况分析。 我将执行扫描分析（sweep），以查看我的脉冲转换器在不同输入电压范围内的行为。 扫描参数将作为输入电压源，我将以2V的增量设置6V至16V的范围。 扫频分析在帮助您了解电路在不同情况下的行为方面非常有用。 在图13中，您可以看到在我设置的输入电压范围内，降压转换器的所有输出信号都具有的扫描仿真结果。 其他可用的高级建模功能可以使您对性能有更多了解。 例如，蒙特卡洛分析可能表明您很重要 <br> 有关设计产品的实际性能特征的统计信息。 这可以帮助您预测潜在的产品故障以及最坏的情况。 <br><br> <a href=""><img src="https://habrastorage.org/webt/xx/to/yz/xxtoyz6_-t1lgn8yrmgadf95pwq.png"></a> <br>  <i>图13：在输入电压范围内降压转换器的输出电压形状（可点击）</i> <br><br><h2> 功能建模BEAGLEBONE BLACK </h2><br> 接下来，为了进行建模，我将使用BeagleBone一阶计算机电路 <br>  Black是免费发行的开源项目。 在该图的“ <b>电源管理</b> ”表中（图14），PMIC提供了该板的大多数电源要求。 尽管此芯片提供3.3V输出，但不足以为板上的所有使用者供电。 为了弥补这一点，使用了一个单独的线性稳压器，该稳压器的输入电压为3.3V，该电压由PMIC形成。 现在让我们对电路中线性稳压器的部分进行建模。 <br><br> <a href=""><img src="https://habrastorage.org/webt/ez/5_/e9/ez5_e9xxcz9ncc2k9s46ucactle.png"></a> <br>  <i>图14：BeagleBone Black电源管理图（PMIC（中）和线性控制器（左下））（可单击）</i> <br><br> 为了进行线性控制器电路仿真，我将需要为电路上放置的符号分配组件模型。 我从制造商的网站上下载了此特定LDO的SPICE模型，对于电阻器和电容器，我可以使用库中包含的标准SPICE原语。 要分配电阻器和电容器的模型，我将按照与之前相同的步骤进行操作，因此只需右键单击该组件并选择“ <b>Edit Model Properties</b> ”（图15）。 这种情况下的唯一区别是，这些组件的字符不是从AMS库中选择的，而是从中央组件库中放置的。 将模型分配给这些元素时，我将必须执行引脚映射，但不必指定组件额定值。 这是由于以下事实：有关组件额定值的信息是自动从项目的中央库中提取的。 <br><br> <a href=""><img src="https://habrastorage.org/webt/hz/jl/ie/hzjlieiomidkey6jg99r0mzumum.png"></a> <br>  <i>图15：将模型分配给先前放置的组件符号（可单击）</i> <br><br> 分配LDO模型时，可以通过单击“ <b>Spice File Name</b> ”（ <b>香料文件名）</b>旁边的三个点来选择我先前下载的模型，该模型存储在本地磁盘上（图16a）。 由于组件符号和模型文件不是AMS库的标准，为了进行正确的仿真，有必要将模型中指示的结论与符号的结论进行比较（图16b）。 在分配了所有必需的模型之后，有必要指定电源。 我想看看LDO在启动时如何工作，因此我将在输出（EN）上配置电压源，以便在1 ms后达到3.3V的值。 这将模拟PMIC芯片的3.3V输出。 为此，我遵循前面显示的相同过程，向启用引脚添加了分段线性电源。 最后，我将为输入引脚（IN）分配5V电源，并为相应的接地引脚分配地。 通过将源模型直接添加到所需电路，而不是添加用于建模的单个符号，我可以将电路保存为原始状态。 <br><br> <a href=""><img src="https://habrastorage.org/webt/7g/qf/dq/7gqfdqg5hcrwubokzs_r0irlcka.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/92/el/ky/92elkyanwmiouzmvl2zsuezwzq4.png"></a> <br>  <i>图16a（顶部）：您可以为LDO模型选择本地SPICE。</i> <i><br></i>  <i>图16b（底部）：比较SPICE模型中的线索和UGO上的线索。</i> <i><br></i>  <i>（可点击）</i> <br><br> 通过在时域（最长5 ms）中运行仿真并分析输出信号，您可以清楚地看到当引脚电压（EN）达到3.3V时器件处于开启状态。 使用测量和计算电压电平的工具，我发现输出电压电平不足。 我知道我需要给用户提供3.3V电压。 然而，该仿真迭代表明，获得的最大电压约为3V（图17）。 这表明，很可能反馈电路中的电阻值存在问题。 <br><br> <a href=""><img src="https://habrastorage.org/webt/1s/1x/5_/1s1x5_s8bal1mwc2beomtteugma.png"></a> <br>  <i>图17：当EN引脚的电压达到所需值时，LDO开启，但是在这种情况下，在LDO输出上，我们收到的电源电压值不足（可点击）</i> <br><br> 要解决此问题，您将需要在LDO上打开数据表。 经过一些简单的计算，我发现我用R2电阻器选择的值太大，这反过来又使可调输出电压太低。 接下来，我只需将电阻器的值更改为适当的值，然后重新启动仿真即可。 通过分析接收信号的形式，我发现输出电压现在具有所需的3.3V电平（图18）。 这种情况显示了工程师不断面临的众多困难之一。 一个简单的错误（例如，错误选择的电阻器值）会导致电路故障，并因此导致昂贵的设备重新设计。 由于具有功能性AMS建模功能，因此我能够在项目的早期阶段解决此问题，进行必要的更改，然后确保设备正常运行。 <br><br> <a href=""><img src="https://habrastorage.org/webt/ck/ar/3k/ckar3kpi7k0lt54bjdbzqtfoiyi.png"></a> <br>  <i>图18：检查LDO的3.3V输出电压电平（可点击）</i> <br><br> 因此，使用PADS Professional中完全集成的AMS工具（数模转换和混合建模），您可以模拟真实电路的行为，因此不会再有意外发生。 <br><br> 有关Mentor（西门子用于印刷电路板设计，分析和验证的业务）产品的更多信息，请访问<a href="https://mentorpcb.ru/">mentorpcb.ru</a> <br> 为了不错过有趣的事件和产品更新，请订阅我们的信息资源： <br><br>  <a href="https://www.facebook.com/MENTORXPADS/">脸书</a> <br>  <a href="https://www.youtube.com/channel/UCIOYPa1RZ7yNOTb-ltNr1WQ">导师PCB专家YouTube频道</a> <br>  <a href="https://www.youtube.com/playlist%3Flist%3DPLtXHciUSAhQ7IYuXXKll2-A8HSH6Ts5vU">YouTube频道CAD专家</a> <br>  <a href="https://t.me/PCB_designers">电报频道</a> <br><br> 与您一起的是NANOSOFT PADS解决方案产品经理Filipov Bogdan。 <br><br>  <b>圣诞快乐，新年快乐！</b> <br><img src="https://habrastorage.org/webt/a1/bn/bb/a1bnbbz2iu2hedjt5pctf_mnak4.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN482234/">https://habr.com/ru/post/zh-CN482234/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN482218/index.html">12月27日的Java摘要</a></li>
<li><a href="../zh-CN482220/index.html">Aruco标记定位</a></li>
<li><a href="../zh-CN482224/index.html">当设计师需要成为一名小程序员时</a></li>
<li><a href="../zh-CN482226/index.html">医疗保健提供商不可错过的20大应用</a></li>
<li><a href="../zh-CN482232/index.html">StackOverflow不仅仅是一个愚蠢问题的答案库</a></li>
<li><a href="../zh-CN482240/index.html">我们使用Wi-Fi 6拆卸了第一批TP-Link设备：Archer AX6000路由器和Archer TX3000E适配器</a></li>
<li><a href="../zh-CN482244/index.html">盲相机测试结果：iPhone，Pixel，华为，三星</a></li>
<li><a href="../zh-CN482246/index.html">正确答案和获奖者公告</a></li>
<li><a href="../zh-CN482248/index.html">我们分享有关SSD如何在RAID下显示以及哪个阵列级别更有利可图的经验</a></li>
<li><a href="../zh-CN482250/index.html">一个简单的VueJS状态机</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>