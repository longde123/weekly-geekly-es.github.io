<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘©ğŸ½ ğŸ”‚ ğŸ‘ğŸ» Bot for Rustï¼ŒCå’Œä»»ä½•å…¶ä»–è¯­è¨€çš„ã€Šæ˜Ÿé™…äº‰éœ¸ã€‹ ğŸ›¶ ğŸ˜‘ ğŸ‘‡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã€Šæ˜Ÿé™…äº‰éœ¸ï¼šå·¢ç©´ä¹‹æˆ˜ã€‹ ã€‚ å¯¹æˆ‘æ¥è¯´æ„å‘³ç€å¤šå°‘ å¯¹äºä½ ä»¬ä¸­çš„è®¸å¤šäººã€‚ å¦‚æ­¤ä¹‹å¤šï¼Œä»¥è‡³äºæˆ‘æ€€ç–‘æ˜¯å¦åº”è¯¥é“¾æ¥åˆ°Wikiã€‚ 


 ä¸€æ¬¡ï¼Œ éœå°”ç‰¹ï¼ˆHaltï¼‰åœ¨ä¸€å°ä¸ªäººç”µå­é‚®ä»¶ä¸­æ•²äº†æˆ‘ï¼Œå¹¶æå‡ºè¦å­¦ä¹ Rust ã€‚ åƒä»»ä½•æ™®é€šäººä¸€æ ·ï¼Œæˆ‘ä»¬å†³å®šä»  ä½ å¥½ä¸–ç•Œ  ä¸ºWindowsç¼–å†™ä¸€ä¸ªåŠ¨æ€åº“ï¼Œè¯¥åº“å¯ä»¥åŠ è½½åˆ°St...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bot for Rustï¼ŒCå’Œä»»ä½•å…¶ä»–è¯­è¨€çš„ã€Šæ˜Ÿé™…äº‰éœ¸ã€‹</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416743/"><p><img src="https://habrastorage.org/webt/qv/fa/ex/qvfaexsnkzmckmwrt_spqmc7nr4.png" align="left">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ã€Šæ˜Ÿé™…äº‰éœ¸ï¼šå·¢ç©´ä¹‹æˆ˜ã€‹</a> ã€‚ å¯¹æˆ‘æ¥è¯´æ„å‘³ç€å¤šå°‘ å¯¹äºä½ ä»¬ä¸­çš„è®¸å¤šäººã€‚ å¦‚æ­¤ä¹‹å¤šï¼Œä»¥è‡³äºæˆ‘æ€€ç–‘æ˜¯å¦åº”è¯¥é“¾æ¥åˆ°Wikiã€‚ </p><br><p> ä¸€æ¬¡ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">éœå°”ç‰¹ï¼ˆHaltï¼‰</a>åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ä¸€å°</a>ä¸ªäºº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ç”µå­é‚®ä»¶ä¸­</a>æ•²äº†æˆ‘ï¼Œå¹¶æå‡ºè¦å­¦ä¹ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Rust</a> ã€‚ åƒä»»ä½•æ™®é€šäººä¸€æ ·ï¼Œæˆ‘ä»¬å†³å®šä» <del> ä½ å¥½ä¸–ç•Œ </del> ä¸ºWindowsç¼–å†™ä¸€ä¸ªåŠ¨æ€åº“ï¼Œè¯¥åº“å¯ä»¥åŠ è½½åˆ°StarCraftæ¸¸æˆçš„åœ°å€ç©ºé—´ä¸­å¹¶ç®¡ç†å•å…ƒã€‚ </p><br><p>æœ¬æ–‡å°†ä»‹ç»ä½¿ç”¨æŠ€æœ¯æ¥å¯»æ‰¾è§£å†³æ–¹æ¡ˆçš„è¿‡ç¨‹ï¼Œè¿™äº›æŠ€æœ¯å°†ä½¿æ‚¨èƒ½å¤Ÿå­¦ä¹ Rustè¯­è¨€åŠå…¶ç”Ÿæ€ç³»ç»Ÿä¸­çš„æ–°äº‹ç‰©ï¼Œæˆ–è€…æ¿€å‘æ‚¨ä»¥è‡ªå·±å–œæ¬¢çš„è¯­è¨€å®ç°botçš„çµæ„Ÿï¼Œæ— è®ºæ˜¯Cï¼ŒC ++ï¼Œrubyï¼Œpythonç­‰ </p><a name="habracut"></a><br><p> åœ¨éŸ©å›½çš„å›½æ­Œä¸‹ï¼Œè¿™ç¯‡æ–‡ç« å½“ç„¶å€¼å¾—ä¸€è¯»ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">æ˜Ÿé™…äº‰éœ¸OST</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/pNt0iVG2VOA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><br><h2 id="bwapi"> å¸ƒç“¦çš® </h2><br><p> è¯¥æ¸¸æˆå·²ç»20å²äº†ã€‚ è€Œä¸”å®ƒä»ç„¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¾ˆå—æ¬¢è¿</a> ï¼Œå³ä½¿<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨2017å¹´</a> ï¼Œé”¦æ ‡èµ›ä¹Ÿèšé›†äº†ç¾å›½æ•´ä¸ªå¤§å…ï¼Œåœ¨é‚£é‡Œä¸¾è¡Œäº†å¤§å¸ˆçº§Jaedongä¸Bisuçš„æˆ˜æ–—ã€‚ é™¤ç°åœºç©å®¶å¤–ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ— çµè½¦</a>ä¹Ÿå‚åŠ æˆ˜æ–—ï¼ è¿™è¦å½’åŠŸäº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">BWAPI</a> ã€‚ æ›´æœ‰ç”¨çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é“¾æ¥</a> ã€‚ </p><br><p> åå¤šå¹´æ¥ï¼Œå›´ç»•è¿™ä¸ªæ¸¸æˆçš„æœºå™¨äººå¼€å‘è€…ç¤¾åŒºå·²ç»å‡ºç°ã€‚ çˆ±å¥½è€…ä¼šç¼–å†™æœºå™¨äººå¹¶å‚åŠ å„ç§é”¦æ ‡èµ›ã€‚ ä»–ä»¬ä¸­çš„è®¸å¤šäººéƒ½å­¦ä¹ AIå’Œæœºå™¨å­¦ä¹ ã€‚ å¤§å­¦ä½¿ç”¨BWAPIæ¥æ•™è‚²å­¦ç”Ÿã€‚ ç”šè‡³è¿˜æœ‰ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æŠ½æé¢‘é“</a>æ’­æ”¾æ¸¸æˆã€‚ </p><br><p> å› æ­¤ï¼Œå‡ å¹´å‰ï¼Œä¸€ç¾¤ç²‰ä¸æ‰­è½¬äº†Starcraftçš„å†…éƒ¨ç»“æ„ï¼Œå¹¶ç¼–å†™äº†C ++ APIï¼Œè¯¥APIå¯è®©æ‚¨ç¼–å†™æœºå™¨äººï¼Œèå…¥æ¸¸æˆè¿‡ç¨‹å¹¶æ§åˆ¶å¯æ€œçš„çŸ®äººã€‚ </p><br><p> å› ä¸ºå®ƒç»å¸¸å‘ç”Ÿåœ¨ <del> ç›–æˆ¿å­ï¼Œä½ éœ€è¦ä¹°çŸ¿çŸ³ï¼Œé”»é€ å·¥å…·... </del> å†™ä¸€ä¸ªæœºå™¨äººï¼Œæ‚¨éœ€è¦å®ç°APIã€‚  Rustå¯ä»¥æä¾›ä»€ä¹ˆï¼Ÿ </p><br><h2 id="ffi"> è”é‚¦è°ƒæŸ¥å±€ </h2><br><p> ä¸Rustä¸­çš„å…¶ä»–è¯­è¨€è¿›è¡Œäº¤äº’éå¸¸ç®€å•ã€‚ ä¸ºæ­¤æœ‰<abbr title="å¤–éƒ¨åŠŸèƒ½ç•Œé¢">FFI</abbr> ã€‚ è®©æˆ‘æä¾›<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡æ¡£</a>çš„ç®€çŸ­æ‘˜å½•ã€‚ </p><br><p> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¿«ç…§</a>åº“ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª<a href="">snappy-ch</a>å¤´æ–‡ä»¶ï¼Œå°†ä»ä¸­å¤åˆ¶å‡½æ•°å£°æ˜ã€‚ </p><br><p> ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">cargo</a>åˆ›å»ºä¸€ä¸ªé¡¹ç›®ã€‚ </p><br><pre><code class="bash hljs">$ cargo new --bin snappy Created binary (application) `snappy` project $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> snappy snappy$ tree . â”œâ”€â”€ Cargo.toml â””â”€â”€ src â””â”€â”€ main.rs 1 directory, 2 files</code> </pre> <br><p>  Cargoä¸ºè¯¥é¡¹ç›®åˆ›å»ºäº†æ ‡å‡†æ–‡ä»¶ç»“æ„ã€‚ </p><br><p> åœ¨<code>Cargo.toml</code>æŒ‡å®šå¯¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">libc</a>çš„ä¾èµ–å…³ç³»ï¼š </p><br><pre> <code class="hljs powershell">[<span class="hljs-type"><span class="hljs-type">dependencies</span></span>] libc = <span class="hljs-string"><span class="hljs-string">"0.2"</span></span></code> </pre> <br><p>  <code>src/main.rs</code>æ–‡ä»¶å°†å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">crate</span></span> libc; <span class="hljs-comment"><span class="hljs-comment">//   C ,     size_t use libc::size_t; #[link(name = "snappy")] //       extern { //    ,    //  C  : // size_t snappy_max_compressed_length(size_t source_length); fn snappy_max_compressed_length(source_length: size_t) -&gt; size_t; } fn main() { let x = unsafe { snappy_max_compressed_length(100) }; println!("max compressed length of a 100 byte buffer: {}", x); }</span></span></code> </pre> <br><p> æˆ‘ä»¬æ”¶é›†å¹¶è¿è¡Œï¼š </p><br><pre> <code class="bash hljs">snappy$ cargo build ... snappy$ cargo run Finished dev [unoptimized + debuginfo] target(s) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> 0.02s Running `target/debug/snappy` max compressed length of a 100 byte buffer: 148</code> </pre> <br><p> æ‚¨åªèƒ½è°ƒç”¨â€œ <code>cargo run</code> ï¼Œè€Œåœ¨å‘å°„å‰å°†è°ƒç”¨â€œ <code>cargo run</code> ã€‚ æˆ–æ„å»ºä¸€ä¸ªé¡¹ç›®å¹¶ç›´æ¥è°ƒç”¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼š </p><br><pre> <code class="bash hljs">snappy$ ./target/debug/snappy max compressed length of a 100 byte buffer: 148</code> </pre> <br><p> åœ¨å·²å®‰è£…snappyåº“çš„æƒ…å†µä¸‹ç¼–è¯‘ä»£ç ï¼ˆå¯¹äºUbuntuï¼Œå¿…é¡»å®‰è£…libsnappy-devè½¯ä»¶åŒ…ï¼‰ã€‚ </p><br><pre> <code class="bash hljs">snappy$ ldd target/debug/snappy ... libsnappy.so.1 =&gt; /usr/lib/x86_64-linux-gnu/libsnappy.so.1 (0x00007f8de07cf000)</code> </pre> <br><p> å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬çš„äºŒè¿›åˆ¶æ–‡ä»¶é“¾æ¥åˆ°libsnappyå…±äº«åº“ã€‚  <code>snappy_max_compressed_length</code>è°ƒç”¨æ˜¯æ­¤åº“ä¸­çš„å‡½æ•°è°ƒç”¨ã€‚ </p><br><h2 id="rust-bindgen"> é”ˆç»“åˆ </h2><br><p> å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿè‡ªåŠ¨ç”ŸæˆFFIï¼Œé‚£å°±å¤ªå¥½äº†ã€‚ å¹¸è¿çš„æ˜¯ï¼Œåœ¨æ‹‰æ–¯æ‰˜æ›¼è¯ºå¤«çš„å†›æ¢°åº“ä¸­æœ‰ä¸€ä¸ªå«åš<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">rust-bindgençš„å·¥å…·</a> ã€‚ å¥¹èƒ½å¤Ÿç”Ÿæˆä¸Cï¼ˆå’ŒæŸäº›C ++ï¼‰åº“çš„FFIç»‘å®šã€‚ </p><br><p> å®‰è£…æ–¹å¼ï¼š </p><br><pre> <code class="bash hljs">$ cargo install bindgen</code> </pre> <br><p> ä½¿ç”¨<strong>rust-bindgenæ˜¯</strong>ä»€ä¹ˆæ ·çš„ï¼Ÿ æˆ‘ä»¬è·å–C / C ++å¤´æ–‡ä»¶ï¼Œåœ¨å…¶ä¸Šè®¾ç½®<strong>bindgen</strong>å®ç”¨ç¨‹åºï¼Œç„¶åè·å¾—ç”Ÿæˆçš„Rustä»£ç ä»¥åŠç»“æ„ï¼Œç»“æ„å’ŒåŠŸèƒ½çš„å®šä¹‰ã€‚ è¿™å°±æ˜¯ç”¨äºå¿«ç…§çš„FFIä»£çš„æ ·å­ï¼š </p><br><pre> <code class="rust hljs">$ bindgen /usr/include/snappy-ch | grep -C <span class="hljs-number"><span class="hljs-number">1</span></span> snappy_max_compressed_length <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">snappy_max_compressed_length</span></span></span></span>(source_length: <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">usize</span></span>; }</code> </pre> <br><p> äº‹å®è¯æ˜ï¼Œbindgenåœ¨BWAPIæ ‡å¤´å‰é¢ä¼ é€’ï¼Œç”Ÿæˆå¤§é‡ä¸å¯ç”¨çš„ä»£ç è¡¨ï¼ˆç”±äºè™šæ‹Ÿæˆå‘˜å‡½æ•°ï¼Œå…¬å…±APIä¸­çš„std ::å­—ç¬¦ä¸²ç­‰ï¼‰ã€‚ äº‹å®æ˜¯BWAPIç”¨C ++ç¼–å†™ã€‚ å³ä½¿åœ¨C ++é¡¹ç›®ä¸­ï¼ŒC ++é€šå¸¸ä¹Ÿå¾ˆéš¾ä½¿ç”¨ã€‚ ä¸€æ—¦å¯ä»¥æ›´å¥½åœ°ä½¿ç”¨ç›¸åŒçš„é“¾æ¥å™¨ï¼ˆç›¸åŒç‰ˆæœ¬ï¼‰é“¾æ¥å·²ç¼–è¯‘çš„åº“ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç¼–è¯‘å™¨ï¼ˆç›¸åŒç‰ˆæœ¬ï¼‰æ›´å¥½åœ°è§£æå¤´æ–‡ä»¶ã€‚ å› ä¸ºæœ‰å¾ˆå¤šå› ç´ å¯ä»¥å½±å“ç»“æœã€‚ ä¾‹å¦‚ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">mangling</a> ï¼ŒGNU GCCä»ç„¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ— æ³•æ­£ç¡®å®ç°</a> ã€‚ è¿™äº›å› ç´ æ˜¯å¦‚æ­¤é‡è¦ï¼Œä»¥è‡³äºå³ä½¿åœ¨<abbr title="Googleçš„C ++æµ‹è¯•æ¡†æ¶">gtestä¸­</abbr>ä¹Ÿæ— æ³•å…‹æœè¿™äº›å› ç´ ï¼Œå¹¶ä¸”æ–‡æ¡£<a href="">è¡¨æ˜</a> ï¼Œæœ€å¥½ä½¿ç”¨ç›¸åŒçš„ç¼–è¯‘å™¨å’Œç›¸åŒçš„é“¾æ¥å™¨å°†gtestä½œä¸ºé¡¹ç›®çš„ä¸€éƒ¨åˆ†è¿›è¡Œæ„å»ºã€‚ </p><br><h2 id="bwapi-c"> å¸ƒç“¦æ¯”å…‹ </h2><br><p>  Cæ˜¯é€šç”¨è¯­è¨€ç¼–ç¨‹ã€‚ å¦‚æœrust-bindgené€‚ç”¨äºCè¯­è¨€ï¼Œä¸ºä»€ä¹ˆä¸ä¸ºCå®ç°BWAPIï¼Œç„¶åä½¿ç”¨å…¶APIï¼Ÿ å¥½ä¸»æ„ï¼ </p><br><p> æ˜¯çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œç›´â€‹â€‹åˆ°æ‚¨æ·±å…¥äº†è§£BWAPIå¹¶æŸ¥çœ‹éœ€è¦å®ç°çš„ç±»å’Œæ–¹æ³•çš„æ•°é‡=ï¼ˆå°¤å…¶æ˜¯æ‰€æœ‰è¿™äº›ç»“æ„åœ¨å†…å­˜ï¼Œæ±‡ç¼–å™¨ï¼Œå†…å­˜è¡¥ä¸å’Œå…¶ä»–æˆ‘ä»¬æ²¡æœ‰æ—¶é—´çš„ææ€–ä¸­çš„å¸ƒå±€ï¼‰ã€‚æœ‰å¿…è¦æœ€å¤§é™åº¦åœ°åˆ©ç”¨ç°æœ‰è§£å†³æ–¹æ¡ˆã€‚ </p><br><p> ä½†æ˜¯æˆ‘ä»¬å¿…é¡»ä»¥æŸç§æ–¹å¼å¤„ç†æ”¹å‹ï¼ŒC ++ä»£ç ï¼Œç»§æ‰¿å’Œè™šæ‹Ÿæˆå‘˜å‡½æ•°ã€‚ </p><br><p> åœ¨C ++ä¸­ï¼Œæœ‰ä¸¤ä¸ªå¼ºå¤§çš„å·¥å…·å¯ç”¨æ¥è§£å†³é—®é¢˜ï¼Œå®ƒä»¬æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸é€æ˜çš„æŒ‡é’ˆ</a>å’Œ<code>extern "C"</code> ã€‚ </p><br><p>  <code>extern "C" {}</code>ä½¿C ++ä»£ç èƒ½å¤Ÿä¼ªè£…æˆCã€‚è¿™ä½¿æ‚¨å¯ä»¥ç”Ÿæˆçº¯å‡½æ•°åç§°è€Œæ— éœ€å¤„ç†ã€‚ </p><br><p> ä¸é€æ˜çš„æŒ‡é’ˆä½¿æˆ‘ä»¬èƒ½å¤Ÿæ“¦é™¤ç±»å‹å¹¶åˆ›å»ºæŒ‡å‘æˆ‘ä»¬æœªæä¾›å…¶å®ç°çš„â€œæŸç§ç±»å‹â€çš„æŒ‡é’ˆã€‚ ç”±äºè¿™ä»…æ˜¯æŸç§ç±»å‹çš„å£°æ˜ï¼Œè€Œä¸æ˜¯å…¶å®ç°ï¼Œå› æ­¤æ— æ³•é€šè¿‡å€¼ä½¿ç”¨æ­¤ç±»å‹ï¼Œå®ƒåªèƒ½ç”±æŒ‡é’ˆä½¿ç”¨ã€‚ </p><br><p> å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·çš„C ++ä»£ç ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> cpp { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> bar; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;bar; } }; } <span class="hljs-comment"><span class="hljs-comment">// namespace cpp</span></span></code> </pre> <br><p> æˆ‘ä»¬å¯ä»¥å°†å…¶è½¬æ¢ä¸ºCå¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo_</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">//    Foo //  cpp::Foo::get_bar int Foo_get_bar(Foo* self); }</span></span></code> </pre> <br><p> è¿˜æœ‰C ++éƒ¨åˆ†ï¼Œè¿™å°†æ˜¯Cæ ‡å¤´å’ŒC ++å®ç°ä¹‹é—´çš„é“¾æ¥ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Foo_get_bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Foo* self)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      cpp::Foo    ::get_bar return reinterpret_cast&lt;cpp::Foo*&gt;(self)-&gt;get_bar(); }</span></span></code> </pre> <br><p> å¹¶éæ‰€æœ‰çš„ç±»æ–¹æ³•éƒ½å¿…é¡»ä»¥è¿™ç§æ–¹å¼å¤„ç†ã€‚  BWAPIä¸­æœ‰ä¸€äº›ç±»ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›ç»“æ„çš„å­—æ®µå€¼æ¥å®ç°è‡ªå·±çš„æ“ä½œï¼Œä¾‹å¦‚<code>typedef struct Position { int x; int y; } Position;</code> <code>typedef struct Position { int x; int y; } Position;</code> ä»¥åŠ<code>Position::get_distance</code>ç±»çš„æ–¹æ³•ã€‚ </p><br><p> æœ‰äº›äººå¿…é¡»ä»¥ç‰¹æ®Šçš„æ–¹å¼å—åˆ°å®¡åˆ¤ã€‚ ä¾‹å¦‚ï¼ŒAIModuleåº”è¯¥æ˜¯æŒ‡å‘å…·æœ‰ç‰¹å®šè™šæ‹Ÿæˆå‘˜å‡½æ•°é›†çš„C ++ç±»çš„æŒ‡é’ˆã€‚ ä½†æ˜¯ï¼Œè¿™é‡Œæ˜¯<a href="">æ ‡é¢˜</a>å’Œ<a href="">å®ç°</a> ã€‚ </p><br><p> å› æ­¤ï¼Œç»è¿‡å‡ ä¸ªæœˆçš„åŠªåŠ›ï¼Œ <strong>554</strong>ç§æ–¹æ³•å’Œåå‡ ä¸ªç±»ï¼Œè·¨å¹³å°åº“<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">BWAPI-C</a>è¯ç”Ÿäº†ï¼Œå®ƒä½¿æ‚¨<a href="">å¯ä»¥ç”¨Cç¼–å†™æœºå™¨äººã€‚</a> å‰¯äº§å“æ˜¯äº¤å‰ç¼–è¯‘ï¼Œå¹¶ä¸”èƒ½å¤Ÿä»¥ä»»ä½•å…¶ä»–æ”¯æŒFFIå’Œcdeclè°ƒç”¨çº¦å®šçš„è¯­è¨€æ¥å®ç°APIã€‚ </p><br><p> å¦‚æœè¦ç¼–å†™åº“ï¼Œè¯·ç¼–å†™C APIã€‚ </p><br><p>  BWAPI-Cçš„æœ€é‡è¦åŠŸèƒ½æ˜¯ä¸å…¶ä»–è¯­è¨€é›†æˆçš„æœ€å¤§èƒ½åŠ›ã€‚  <code>Python</code> ï¼Œ <code>Ruby</code> ï¼Œ <code>Rust</code> ï¼Œ <code>PHP</code> ï¼Œ <code>Java</code>å’Œè®¸å¤šå…¶ä»–äººéƒ½çŸ¥é“å¦‚ä½•ä½¿ç”¨Cï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨å¯¹æ–‡ä»¶è¿›è¡Œä¸€ç‚¹å·¥ä½œå¹¶å®ç°åŒ…è£…å™¨ï¼Œåˆ™ä¹Ÿå¯ä»¥åœ¨å®ƒä»¬ä¸Šç¼–å†™ä¸€ä¸ªæœºå™¨äººã€‚ </p><br><h2 id="pishem-bota-na-c"> ç”¨Cç¼–å†™æœºå™¨äºº </h2><br><p> æœ¬éƒ¨åˆ†ä»‹ç»äº†Starcraftæ¨¡å—è®¾è®¡çš„ä¸€èˆ¬åŸç†ã€‚ </p><br><p> æœºå™¨äººæœ‰2ç§ç±»å‹ï¼šæ¨¡å—å’Œå®¢æˆ·ç«¯ã€‚ æˆ‘ä»¬å°†çœ‹ä¸€ä¸ªç¼–å†™æ¨¡å—çš„ä¾‹å­ã€‚ </p><br><p> æ¨¡å—æ˜¯å¯ä¸‹è½½çš„åº“ï¼›å¯ä»¥åœ¨<a href="">æ­¤å¤„æŸ¥çœ‹</a>åŠ è½½çš„ä¸€èˆ¬åŸç†ã€‚ è¯¥æ¨¡å—åº”å¯¼å‡º2ä¸ªå‡½æ•°ï¼š <code>newAIModule</code>å’Œ<code>gameInit</code> ã€‚ </p><br><p> ä½¿ç”¨<code>gameInit</code>ä¸€åˆ‡éƒ½å¾ˆç®€å•ï¼Œè°ƒç”¨æ­¤å‡½æ•°å¯ä»¥å°†æŒ‡é’ˆä¼ é€’ç»™å½“å‰æ¸¸æˆã€‚ è¯¥æŒ‡é’ˆéå¸¸é‡è¦ï¼Œå› ä¸ºåœ¨BWAPIä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªå…¨å±€é™æ€å˜é‡ï¼Œè¯¥å˜é‡åœ¨ä»£ç çš„æŸäº›éƒ¨åˆ†ä¸­ä½¿ç”¨ã€‚ è®©æˆ‘ä»¬æè¿°<code>gameInit</code> ï¼š </p><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-function">DLLEXPORT </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gameInit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* game</span></span></span><span class="hljs-function">)</span></span> { BWAPIC_setGame(game); }</code> </pre> <br><p>  <code>newAIModule</code>æœ‰ç‚¹å¤æ‚ã€‚ å®ƒåº”è¯¥è¿”å›ä¸€ä¸ªæŒ‡å‘C ++ç±»çš„æŒ‡é’ˆï¼Œè¯¥ç±»å…·æœ‰ä¸€ä¸ªè™šæ‹Ÿæ–¹æ³•è¡¨ï¼Œè¯¥è™šæ‹Ÿæ–¹æ³•è¡¨çš„åç§°ä¸º<strong>onXXXXX</strong> ï¼Œåœ¨æŸäº›æ¸¸æˆäº‹ä»¶ä¸­è¢«è°ƒç”¨ã€‚ å®šä¹‰æ¨¡å—çš„ç»“æ„ï¼š </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExampleAIModule</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AIModule_vtable* vtable_; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* name; } ExampleAIModule;</code> </pre> <br><p> ç¬¬ä¸€ä¸ªå­—æ®µå¿…é¡»æ˜¯æŒ‡å‘æ–¹æ³•è¡¨çš„æŒ‡é’ˆï¼ˆé­”æœ¯ï¼Œæ‰€æœ‰äº‹ç‰©ï¼‰ã€‚ å› æ­¤ï¼Œ <code>newAIModule</code>å‡½æ•°ï¼š </p><br><pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-function">DLLEXPORT </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newAIModule</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ExampleAIModule* <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> = (ExampleAIModule*) <span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(ExampleAIModule) ); <span class="hljs-keyword"><span class="hljs-keyword">module</span></span>-&gt;name = <span class="hljs-string"><span class="hljs-string">"ExampleAIModule"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">module</span></span>-&gt;vtable_ = &amp;module_vtable; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> createAIModuleWrapper( (AIModule*) <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> ); }</code> </pre> <br><p>  <code>createAIModuleWrapper</code>æ˜¯å¦ä¸€ç§é­”æœ¯ï¼Œå®ƒå¯ä»¥å°†CæŒ‡é’ˆè½¬æ¢ä¸ºå¸¦æœ‰è™šæ‹Ÿçš„C ++ç±»çš„æŒ‡é’ˆ <del> æ–¹æ³• </del> æˆå‘˜å‡½æ•°ã€‚ </p><br><p>  <code>module_vtable</code>æ˜¯æ–¹æ³•è¡¨ä¸Šçš„é™æ€å˜é‡ï¼Œæ–¹æ³•çš„å€¼å¡«å……æœ‰æŒ‡å‘å…¨å±€å‡½æ•°çš„æŒ‡é’ˆï¼š </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> AIModule_vtable module_vtable = { onStart, onEnd, onFrame, onSendText, onReceiveText, onPlayerLeft, onNukeDetect, onUnitDiscover, onUnitEvade, onUnitShow, onUnitHide, onUnitCreate, onUnitDestroy, onUnitMorph, onUnitRenegade, onSaveGame, onUnitComplete }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onEnd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> isWinner)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onFrame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSendText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* text)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReceiveText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Player* player, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* text)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onPlayerLeft</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Player* player)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNukeDetect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Position target)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitDiscover</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitEvade</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitShow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitHide</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitDestroy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitMorph</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitRenegade</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSaveGame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* gameName)</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUnitComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Unit* unit)</span></span></span><span class="hljs-function"> </span></span>{}</code> </pre> <br><p> é€šè¿‡å‡½æ•°çš„åç§°åŠå…¶ç­¾åï¼Œå¯ä»¥æ¸…æ¥šåœ°çœ‹å‡ºåœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹ä»¥åŠç”¨ä»€ä¹ˆå‚æ•°è°ƒç”¨å®ƒä»¬ã€‚ ä¾‹å¦‚ï¼Œæˆ‘å°†æ‰€æœ‰å‡½æ•°è®¾ä¸ºç©º </p><br><pre> <code class="hljs java"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AIModule* </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">module</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ ExampleAIModule* self = (ExampleAIModule*) <span class="hljs-keyword"><span class="hljs-keyword">module</span></span>; Game* game = BWAPIC_getGame(); Game_sendText(game, <span class="hljs-string"><span class="hljs-string">"Hello from bwapi-c!"</span></span>); Game_sendText(game, <span class="hljs-string"><span class="hljs-string">"My name is %s"</span></span>, self-&gt;name); }</code> </pre> <br><p> æ¸¸æˆå¼€å§‹æ—¶è°ƒç”¨æ­¤å‡½æ•°ã€‚ æŒ‡å‘å½“å‰æ¨¡å—çš„æŒ‡é’ˆä½œä¸ºå‚æ•°ä¼ é€’ã€‚  <code>BWAPIC_getGame</code>è¿”å›æŒ‡å‘æˆ‘ä»¬é€šè¿‡è°ƒç”¨<code>BWAPIC_setGame</code>è®¾ç½®çš„æ¸¸æˆçš„å…¨å±€æŒ‡é’ˆã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†å±•ç¤ºä¸€ä¸ªäº¤å‰ç¼–è¯‘å’Œæ¨¡å—æ“ä½œçš„ç¤ºä¾‹ï¼š </p><br><pre> <code class="bash hljs">bwapi-c/example$ tree . â”œâ”€â”€ BWAPIC.dll â””â”€â”€ Dll.c 0 directories, 2 files bwapi-c/example$ i686-w64-mingw32-gcc -mabi=ms -shared -o Dll.dll Dll.c -I../include -L. -lBWAPIC bwapi-c/example$ cp Dll.dll ~/Starcraft/bwapi-data/ bwapi-c/example$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/Starcraft/bwapi-data/ Starcraft$ wine bwheadless.exe -e StarCraft.exe -l bwapi-data/BWAPI.dll --headful ... ... ...</code> </pre> <br><p> æˆ‘ä»¬æˆ³ä¸€ä¸‹æŒ‰é’®å¹¶å¼€å§‹æ¸¸æˆã€‚ æ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">BWAPI</a>ç½‘ç«™å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">BWAPI-Cä¸­</a>é˜…è¯»æœ‰å…³å¯åŠ¨çš„æ›´å¤šä¿¡æ¯ã€‚ </p><br><p> æ¨¡å—çš„ç»“æœï¼š </p><br><p><img src="https://habrastorage.org/webt/cw/a-/41/cwa-41ihsyva-pj2stpef1xjn2g.png" alt="å›¾ç‰‡"></p><br><p> åœ¨<a href="">bwapi-c / example / Dll.cä¸­</a>å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€äº›çš„æ¨¡å—ç¤ºä¾‹ï¼Œå…¶ä¸­æ˜¾ç¤ºäº†ä¸è¿­ä»£å™¨ï¼Œå•å…ƒæ§åˆ¶ï¼ŒçŸ¿ç‰©æœç´¢å’Œç»Ÿè®¡ä¿¡æ¯<a href="">ä¸€èµ·å·¥ä½œçš„æƒ…å†µã€‚</a> </p><br><h2 id="bwapi-sys">  bwapiç³»ç»Ÿ </h2><br><p> åœ¨Rastaç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¹ æƒ¯ä¸Š</a>ä»¥æŸç§æ–¹å¼è°ƒç”¨é“¾æ¥åˆ°æœ¬æœºåº“çš„ç¨‹åºåŒ…ã€‚ ä»»ä½•foo-sysè½¯ä»¶åŒ…éƒ½å…·æœ‰ä¸¤ä¸ªé‡è¦åŠŸèƒ½ï¼š </p><br><ul><li> é“¾æ¥åˆ°æœ¬åœ°â€‹â€‹libfooåº“ </li><li> æä¾›æ¥è‡ªlibfooåº“çš„å‡½æ•°å£°æ˜ã€‚ ä½†æ˜¯ï¼Œä»…ä¸æä¾›å£°æ˜-* -sysç®±ä¸­çš„é«˜çº§æŠ½è±¡ã€‚ </li></ul><br><p> ä¸ºäº†ä½¿* -sysç¨‹åºåŒ…èƒ½å¤ŸæˆåŠŸé“¾æ¥ï¼Œä»–ä»¬å°†æœ¬æœºåº“<a href="">æœç´¢</a>å’Œ/æˆ–æ¥è‡ªæºçš„åº“<a href="">ç¨‹åºé›†</a>é›†æˆåˆ°å…¶ä¸­ã€‚ </p><br><p> ä¸ºäº†ä½¿* -sysåŒ…æä¾›å£°æ˜ï¼Œå¿…é¡»æ‰‹åŠ¨ç¼–å†™å®ƒä»¬æˆ–ä½¿ç”¨bindgenç”Ÿæˆã€‚ å†æ¬¡bindgenã€‚ å°è¯•ç¬¬äºŒä¸ª=ï¼‰ </p><br><p> ç”¨bwapi-cç”Ÿæˆæ´»é¡µå¤¹å˜å¾—æ·«ç§½ï¼š </p><br><pre> <code class="bash hljs">bindgen BWAPI.h -o lib.rs \ --opaque-type <span class="hljs-string"><span class="hljs-string">".+_"</span></span> \ --blacklist-type <span class="hljs-string"><span class="hljs-string">"std.*|__.+|.+_$|Game_v(Send|Print|Draw).*|va_list|.+_t$"</span></span> \ --no-layout-tests \ --no-derive-debug \ --raw-line <span class="hljs-string"><span class="hljs-string">"#![allow(improper_ctypes, non_snake_case)]"</span></span> \ -- -I../submodules/bwapi-c/include sed -i -r -- <span class="hljs-string"><span class="hljs-string">'s/.+\s+(.+)_;/pub struct \1;/'</span></span> lib.rs</code> </pre> <br><p> å…¶ä¸­<code>BWAPI.h</code>æ˜¯åŒ…å«æ¥è‡ªBWAPI-Cçš„æ‰€æœ‰æ ‡å¤´æ ‡å¤´çš„æ–‡ä»¶ã€‚ </p><br><p> ä¾‹å¦‚ï¼Œå¯¹äºå·²çŸ¥çš„å‡½æ•°ï¼Œbindgenç”Ÿæˆä»¥ä¸‹å£°æ˜ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> { <span class="hljs-comment"><span class="hljs-comment">/// BWAPIC_setGame must be called from gameInit to initialize BWAPI::BroodwarPtr pub fn BWAPIC_setGame(game: *mut Game); } extern "C" { pub fn BWAPIC_getGame() -&gt; *mut Game; }</span></span></code> </pre> <br><p> æœ‰ä¸¤ç§ç­–ç•¥ï¼šå°†ç”Ÿæˆçš„ä»£ç å­˜å‚¨åœ¨å­˜å‚¨åº“ä¸­ï¼Œå¹¶åœ¨ç»„è£…æœŸé—´åŠ¨æ€ç”Ÿæˆä»£ç ã€‚ è¿™ä¸¤ç§æ–¹æ³•éƒ½æœ‰å…¶ä¼˜ç‚¹å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¼ºç‚¹</a> ã€‚ </p><br><p> æ¬¢è¿ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">bwapi-sys</a> ï¼Œè¿™æ˜¯æœæˆ‘ä»¬ç›®æ ‡è¿ˆå‡ºçš„åˆä¸€å°æ­¥ã€‚ </p><br><p> è¿˜è®°å¾—æˆ‘åˆšæ‰æåˆ°çš„è·¨å¹³å°å—ï¼Ÿ  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">Nlinker</a>åŠ å…¥äº†è¯¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">é¡¹ç›®</a>å¹¶å®æ–½äº†ä¸€é¡¹æ£˜æ‰‹çš„ç­–ç•¥ã€‚ å¦‚æœç›®æ ‡æ˜¯Windowsï¼Œåˆ™ä»githubä¸‹è½½å·²ç»ç»„è£…å¥½çš„BWAPICã€‚ å¯¹äºå…¶ä½™çš„ç›®æ ‡ï¼Œæˆ‘ä»¬ä»OpenBWçš„æ¥æºä¸­æ”¶é›†BWAPI-Cï¼ˆç¨åå†å‘Šè¯‰æ‚¨ï¼‰ã€‚ </p><br><h2 id="bwapi-rs"> å¸ƒç“¦çš®å°” </h2><br><p> ç°åœ¨æœ‰äº†ç»‘å®šå™¨ï¼Œæˆ‘ä»¬å¯ä»¥æè¿°é«˜çº§æŠ½è±¡äº†ã€‚ æˆ‘ä»¬æœ‰ä¸¤ç§ç±»å‹å¯ä»¥ä½¿ç”¨ï¼šçº¯å€¼å’Œä¸é€æ˜æŒ‡é’ˆã€‚ </p><br><p> æœ‰äº†çº¯ä»·å€¼ï¼Œä¸€åˆ‡éƒ½ä¼šå˜å¾—ç®€å•ã€‚ ä»¥é¢œè‰²ä¸ºä¾‹ã€‚ æˆ‘ä»¬éœ€è¦ä½¿ä½¿ç”¨Rustä»£ç æ›´æ–¹ä¾¿ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä»¥æ–¹ä¾¿è‡ªç„¶çš„æ–¹å¼ä½¿ç”¨é¢œè‰²ï¼š </p><br><pre> <code class="rust hljs">game.draw_line(CoordinateType::Screen, (<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>), (<span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>), Color::Red); ^^^</code> </pre> <br><p> å› æ­¤ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæœ‰å¿…è¦ä½¿ç”¨C ++çš„<a href="">å¸¸é‡</a>å®šä¹‰Rustè¯­è¨€æšä¸¾çš„æƒ¯ç”¨è¯­ï¼Œå¹¶ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">std :: convert :: From</a> traitåœ¨bwapi_sys :: Colorä¸­å®šä¹‰è½¬æ¢æ–¹æ³•ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-comment"><span class="hljs-comment">// FFI version #[repr(C)] #[derive(Copy, Clone)] pub struct Color { pub color: ::std::os::raw::c_int, } // Idiomatic version #[derive(PartialEq, PartialOrd, Copy, Clone)] pub enum Color { Black = 0, Brown = 19, ...</span></span></code> </pre> <br><p> å°½ç®¡ä¸ºæ–¹ä¾¿èµ·è§ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨crate <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">enum-primitive-derive</a> ã€‚ </p><br><p> ä½¿ç”¨ä¸é€æ˜çš„æŒ‡é’ˆï¼Œè¿™ä¸å†å›°éš¾ã€‚ ä¸ºæ­¤ï¼Œè¯·ä½¿ç”¨<a href="">Newtype</a>æ¨¡å¼ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Player</span></span></span></span>(*<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> sys::Player);</code> </pre> <br><p> ä¹Ÿå°±æ˜¯è¯´ï¼ŒPlayeræ˜¯å…·æœ‰ç§æœ‰å­—æ®µçš„ç‰¹å®šç»“æ„-æ¥è‡ªCçš„åŸå§‹ä¸é€æ˜æŒ‡é’ˆã€‚è¿™æ˜¯å¦‚ä½•æè¿°Player :: coloræ–¹æ³•çš„æ–¹æ³•ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Player { <span class="hljs-comment"><span class="hljs-comment">//    Player::getColor  bwapi-sys //extern "C" { // pub fn Player_getColor(self_: *mut Player) -&gt; Color; //} pub fn color(&amp;self) -&gt; Color { // bwapi_sys::Player_getColor -    BWAPI-C // self.0 -   let color = unsafe { bwapi_sys::Player_getColor(self.0) }; color.into() //  bwapi_sys::Color -&gt; Color } }</span></span></code> </pre> <br><p> ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨Rustç¼–å†™æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæœºå™¨äººäº†ï¼ </p><br><h2 id="pishem-bota-na-rust"> ç”¨Rustç¼–å†™ä¸€ä¸ªæœºå™¨äºº </h2><br><p> ä½œä¸ºæ¦‚å¿µçš„è¯æ˜ï¼Œè¯¥æœºå™¨äººå°†çœ‹èµ·æ¥åƒä¸€ä¸ªè‘—åçš„å›½å®¶ï¼šå®ƒçš„æ‰€æœ‰åŠŸèƒ½éƒ½æ˜¯é›‡ç”¨å·¥äººå¹¶æ”¶é›†çŸ¿ç‰©è´¨ã€‚ </p><br><p><img src="https://habrastorage.org/webt/hx/r_/jm/hxr_jmj2fbsitx-tfw96p2pa2tu.png" alt="åŒ—æœé²œ"></p><br><p><img src="https://habrastorage.org/webt/ww/gf/lr/wwgflrekcnxtv75thaurrwcm0g8.png" alt="éŸ©å›½"></p><br><p> è®©æˆ‘ä»¬ä»æ‰€éœ€çš„<code>gameInit</code>å’Œ<code>newAIModule</code> ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[no_mangle]</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gameInit</span></span></span></span>(game: *<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> void) { bwapi_sys::BWAPIC_setGame(game <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> bwapi_sys::Game); } <span class="hljs-meta"><span class="hljs-meta">#[no_mangle]</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsafe</span></span> <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newAIModule</span></span></span></span>() -&gt; *<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> void { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> module = ExampleAIModule { name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>::from(<span class="hljs-string"><span class="hljs-string">"ExampleAIModule"</span></span>) }; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> result = wrap_handler(<span class="hljs-built_in"><span class="hljs-built_in">Box</span></span>::new(module)); result }</code> </pre> <br><p>  <code>#[no_mangle]</code>ä¸C ++ä¸­çš„<code>extern "C"</code>æ‰§è¡Œç›¸åŒçš„åŠŸèƒ½ã€‚ åœ¨<code>wrap_handler</code>å†…éƒ¨ï¼Œæ›¿æ¢è™šæ‹Ÿå‡½æ•°è¡¨å¹¶ä¼ªè£…æˆC ++ç±»ä¼šå‘ç”Ÿå„ç§é­”æœ¯ã€‚ </p><br><p> æ¨¡å—ç»“æ„çš„æè¿°æ¯”Cè¯­è¨€æ›´ç®€å•ï¼Œæ›´æ¼‚äº®ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExampleAIModule</span></span></span></span> { name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, }</code> </pre> <br><p> æ·»åŠ ä¸€äº›ç”¨äºå‘ˆç°ç»Ÿè®¡ä¿¡æ¯å’Œå‘å‡ºè®¢å•çš„æ–¹æ³•ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> ExampleAIModule { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw_stat</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> game = Game::get(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> message = <span class="hljs-built_in"><span class="hljs-built_in">format!</span></span>(<span class="hljs-string"><span class="hljs-string">"Frame {}"</span></span>, game.frame_count()); game.draw_text(CoordinateType::Screen, (<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>), &amp;message); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">give_orders</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> player = Game::get().self_player(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> unit <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> player.units() { <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> unit.get_type() { UnitType::Terran_SCV | UnitType::Zerg_Drone | UnitType::Protoss_Probe =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> !unit.is_idle() { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> unit.is_carrying_gas() || unit.is_carrying_minerals() { unit.return_cargo(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(mineral) = Game::get() .minerals() .min_by_key(|m| unit.distance_to(m)) { <span class="hljs-comment"><span class="hljs-comment">// WE REQUIRE MORE MINERALS unit.right_click(&amp;mineral, false); } } UnitType::Terran_Command_Center =&gt; { unit.train(UnitType::Terran_SCV); } UnitType::Protoss_Nexus =&gt; { unit.train(UnitType::Protoss_Probe); } UnitType::Zerg_Hatchery | UnitType::Zerg_Lair | UnitType::Zerg_Hive =&gt; { unit.train(UnitType::Zerg_Drone); } _ =&gt; {} }; } } }</span></span></code> </pre> <br><p> ä¸ºäº†ä½¿ExampleAIModuleç±»å‹å˜æˆä¸€ä¸ªçœŸå®çš„æ¨¡å—ï¼Œæ‚¨éœ€è¦æ•™å®ƒå“åº”<strong>onXXXX</strong>äº‹ä»¶ï¼Œä¸ºæ­¤æ‚¨éœ€è¦å®ç°EventHandlerç±»å‹ï¼Œå®ƒæ˜¯Cè¯­è¨€ä¸­AIModule_vtableè™šæ‹Ÿè¡¨çš„ç±»ä¼¼ç‰©ï¼š </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> EventHandler <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ExampleAIModule { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_start</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) { Game::get().send_text(&amp;<span class="hljs-built_in"><span class="hljs-built_in">format!</span></span>(<span class="hljs-string"><span class="hljs-string">"Hello from Rust! My name is {}"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.name)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_end</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _is_winner: <span class="hljs-built_in"><span class="hljs-built_in">bool</span></span>) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_frame</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.draw_stat(); <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.give_orders(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_send_text</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _text: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_receive_text</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _player: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Player, _text: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_player_left</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _player: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Player) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_nuke_detect</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _target: Position) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_discover</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_evade</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_show</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_hide</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_create</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_destroy</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_morph</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_renegade</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_save_game</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _game_name: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_unit_complete</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, _unit: &amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> Unit) {} }</code> </pre> <br><p> å»ºç«‹å’Œå¯åŠ¨æ¨¡å—å°±åƒä½¿ç”¨Cä¸€æ ·å®¹æ˜“ï¼š </p><br><pre> <code class="bash hljs">bwapi-rs$ cargo build --example dll --target=i686-pc-windows-gnu bwapi-rs$ cp ./target/i686-pc-windows-gnu/debug/examples/dll.dll ~/Starcraft/bwapi-data/Dll.dll bwapi-rs$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/Starcraft/bwapi-data/ Starcraft$ wine bwheadless.exe -e StarCraft.exe -l bwapi-data/BWAPI.dll --headful ... ... ...</code> </pre> <br><p> å’Œå·¥ä½œè§†é¢‘ï¼š </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/rACbnWpI01M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2 id="nemnogo-o-krosskompilyacii"> å…³äºäº¤å‰ç¼–è¯‘çš„ä¸€äº›çŸ¥è¯† </h2><br><p> ç®€è€Œè¨€ä¹‹ï¼ŒRustå¾ˆæ¼‚äº®ï¼ åªéœ€å•å‡»ä¸¤æ¬¡ï¼Œæ‚¨å°±å¯ä»¥ä¸ºä¸åŒçš„å¹³å°æ”¾ç½®è®¸å¤šå·¥å…·é“¾ã€‚ å…·ä½“æ¥è¯´ï¼Œi686-pc-windows-gnuå·¥å…·é“¾æ˜¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤è®¾ç½®çš„ï¼š </p><br><pre> <code class="bash hljs">rustup target add i686-pc-windows-gnu</code> </pre> <br><p> æ‚¨è¿˜å¯ä»¥åœ¨<code>.cargo/config</code>é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ä¸ºè´§ç‰©æŒ‡å®škofigï¼š </p><br><pre> <code class="hljs powershell">[<span class="hljs-type"><span class="hljs-type">target.i686</span></span>-<span class="hljs-type"><span class="hljs-type">pc</span></span>-<span class="hljs-type"><span class="hljs-type">windows</span></span>-<span class="hljs-type"><span class="hljs-type">gnu</span></span>] linker = <span class="hljs-string"><span class="hljs-string">"i686-w64-mingw32-gcc"</span></span> ar = <span class="hljs-string"><span class="hljs-string">"i686-w64-mingw32-ar"</span></span> runner = <span class="hljs-string"><span class="hljs-string">"wine"</span></span></code> </pre> <br><p> è¿™å°±æ˜¯ä»Windows on Linuxç¼–è¯‘Rusté¡¹ç›®æ‰€éœ€è¦åšçš„ä¸€åˆ‡ã€‚ </p><br><h2 id="openbw">  Openbw </h2><br><p> è¿™äº›å®¶ä¼™èµ°å¾—æ›´è¿œã€‚ ä»–ä»¬å†³å®šç¼–å†™æ¸¸æˆSCï¼šBWï¼çš„å¼€æºç‰ˆæœ¬ã€‚ ä»–ä»¬åšå¾—å¾ˆå¥½ã€‚ ä»–ä»¬çš„ç›®æ ‡ä¹‹ä¸€æ˜¯å®ç°é«˜æ¸…å›¾ç‰‡ï¼Œä½†æ˜¯SCï¼šRemasteredé¢†å…ˆäºä»–ä»¬=ï¼ˆç›®å‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»–ä»¬çš„APIæ¥ç¼–å†™æœºå™¨äººï¼ˆæ˜¯çš„ï¼Œåœ¨C ++ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ã€‚ä½†æ˜¯ï¼Œæœ€ä»¤äººæƒŠå¥‡çš„åŠŸèƒ½æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ç›´æ¥</a>æŸ¥çœ‹å›æ”¾çš„åŠŸèƒ½ã€‚ </p><br><h2 id="zaklyuchenie"> ç»“è®º </h2><br><p> åœ¨å®ç°è¿‡ç¨‹ä¸­ä»ç„¶å­˜åœ¨ä¸€ä¸ªæœªè§£å†³çš„é—®é¢˜ï¼šæˆ‘ä»¬ä¸æ§åˆ¶é“¾æ¥çš„å”¯ä¸€æ€§ï¼Œå¹¶ä¸”åœ¨æ›´æ”¹å¯¹è±¡æ—¶åŒæ—¶å­˜åœ¨<code>&amp;mut</code>å’Œ<code>&amp;</code>ä¼šå¯¼è‡´ä¸ç¡®å®šçš„è¡Œä¸ºã€‚ éº»çƒ¦äº†  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">éœå°”ç‰¹ï¼ˆHaltï¼‰</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¯•å›¾</a>å®ç°æƒ¯ç”¨çš„ç»‘å®šï¼Œä½†æ˜¯ä»–çš„å¯¼ç«ç´¢ç¨å¾®æ¶ˆå¤±äº†ã€‚ åŒæ ·ï¼Œè¦è§£å†³æ­¤é—®é¢˜ï¼Œæ‚¨å°†å¿…é¡»å®šæ€§åœ°ä½¿ç”¨C ++ APIå¹¶æ­£ç¡®è®¾ç½®<code>const</code>é™å®šç¬¦ã€‚ </p><br><p> æˆ‘çœŸçš„å¾ˆäº«å—è¿™ä¸ªé¡¹ç›®çš„å·¥ä½œï¼Œæˆ‘è§‚çœ‹äº†é‡æ’­å¹¶æ·±å…¥åˆ°äº†å¤§æ°”ä¸­ã€‚ è¯¥æ¸¸æˆç•™ä¸‹äº†é—äº§ã€‚ æ²¡æœ‰æ¸¸æˆåœ¨SCï¼šBWä¸Šå¾ˆæµè¡Œï¼Œå¹¶ä¸”å®ƒå¯¹ì¹˜ì •ì¹˜çš„å½±å“æ˜¯ä¸å¯æƒ³è±¡çš„ã€‚ åœ¨é»„é‡‘æ—¶æ®µï¼ŒéŸ©å›½çš„èŒä¸šç©å®¶å’ŒéŸ©å›½æˆå‰§ä¸€æ ·å—æ¬¢è¿ã€‚  ë˜í•œí”„í”„ê²Œë¨¸ë¨¸ìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆìˆã€‚ </p><br><p> æ˜Ÿé™…äº‰éœ¸ä¸‡å²ï¼ </p><br><h2 id="ssylki"> å‚è€ƒæ–‡çŒ® </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">itter</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¸ƒç“¦çš®å°”</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">bwapiç³»ç»Ÿ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¸ƒç“¦æ¯”</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¸ƒç“¦çš®</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Openbw</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN416743/">https://habr.com/ru/post/zh-CN416743/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN416729/index.html">PYCON RUSSIAè®¡åˆ’å·²å‡†å¤‡å°±ç»ªï¼šæ¥è‡ªGoogleï¼ŒRed Hatï¼ŒYelpï¼ŒYandexçš„å‘è¨€äººçš„25ä¸ªæŠ¥å‘Šå’Œ3ä¸ªè®²ä¹ ç­</a></li>
<li><a href="../zh-CN416731/index.html">ç»ç’ƒä¸Šçš„éœœå†»ï¼šå¦‚ä½•åˆ¶é€ é‡å‹ç¾ç‰¹æ ¼æ‹‰æ–¯å¡‘æ–™</a></li>
<li><a href="../zh-CN416737/index.html">Voxel 3d Unityæ¸¸æˆä¸­çš„*è·¯å¾„æŸ¥æ‰¾ç®—æ³•</a></li>
<li><a href="../zh-CN416739/index.html">å…¨æ–°ASUSåœ¨Computex 2018ä¸Š</a></li>
<li><a href="../zh-CN416741/index.html">æ”»å‡»è€…åœ¨å…¶å¯†ç ç›—çªƒè½¯ä»¶ä¸­ä½¿ç”¨äº†è¢«ç›—çš„D-Linkè¯ä¹¦</a></li>
<li><a href="../zh-CN416745/index.html">2018å¹´Computexä¸Šçš„æ–°ASUS ROG</a></li>
<li><a href="../zh-CN416751/index.html">æ”¶é›†ä¸Šä¸‹æ–‡ä¿¡æ¯ä»¥è¿›è¡Œæ—¥å¿—è®°å½•</a></li>
<li><a href="../zh-CN416753/index.html">æµè¡Œçš„Hola VPNæ’ä»¶é­åˆ°å…¥ä¾µ</a></li>
<li><a href="../zh-CN416755/index.html">æç«¯å–œæ¬¢-åå¯¹è°ƒæŸ¥å§”å‘˜ä¼š</a></li>
<li><a href="../zh-CN416757/index.html">ç‰‡çŠ¶æµ‹è¯•</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>