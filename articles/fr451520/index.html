<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍🏫 👩🏽 👜 VDI: pas cher et gai 🌽 📪 🧚🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, chers Khabrovites, amis et connaissances. En préface, je veux parler de la mise en œuvre d'un projet intéressant ou, comme il est maintenant ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>VDI: pas cher et gai</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451520/"><img src="https://habrastorage.org/webt/wi/kx/fo/wikxfomu1gaefx-0flncqjauk5o.png"><br><br>  Bonjour, chers Khabrovites, amis et connaissances.  En préface, je veux parler de la mise en œuvre d'un projet intéressant ou, comme il est maintenant à la mode de le dire, d'un cas intéressant concernant le déploiement de l'infrastructure VDI.  Il semblait qu'il y avait beaucoup d'articles sur le VDI, il y avait une étape par étape, et une comparaison des concurrents directs et encore une étape par étape et encore une comparaison des solutions compétitives.  Il semblait que quelque chose de nouveau pouvait être proposé? <br><br>  Et nouveau, que de nombreux articles n'ont pas, est une description de l'effet économique de la mise en œuvre, le calcul du coût de possession de la solution sélectionnée, et encore plus intéressant est la comparaison du coût de possession avec des solutions similaires.  Dans ce cas, basé sur le titre de l'article, le mot-clé est <b>bon marché</b> : qu'est-ce que cela signifie?  Au début de l'année, un de mes collègues, un ami et un ami, avait pour tâche d'implémenter VDI avec un nombre minimum de «fenêtres», à savoir un hyperviseur gratuit, un bureau Linux, une base de données gratuite et d'autres moyens de minimiser les coûts avec notre Microsoft «bien-aimé». <br><a name="habracut"></a><br>  Et pourquoi avec des «fenêtres minimales»?  Ici, je m'éloigne de la narration et décris la disposition des raisons pour lesquelles j'étais intéressé par la divulgation de ce sujet particulier.  Un de mes amis, que j'ai aidé dans le déploiement du projet, travaille dans une entreprise moyenne de plus de 500 employés, tous les logiciels ne sont pas légaux, mais des travaux étaient en cours pour l'optimiser, la plupart des systèmes d'information frontaux sont adaptés pour le WEB, j'étais de bonne humeur jusqu'au beau jour le «gestionnaire personnel» de Microsoft affecté à la société n'est pas venu et a commencé à ne pas, à ne pas offrir, à ne pas demander, mais à exiger de toute urgence de légaliser tout, tirant de nombreuses conclusions sur les solutions utilisées basées sur les sources ouvertes et la presse.  versions.  Il semblait que la société ne s'en souciait pas, mais cette importunité et cette obsession, à la limite des menaces, ont stimulé les plans de longue date de <s>substitution</s> des <s>importations pour</s> minimiser l'utilisation des produits MS et le maximum de soins dans OpenSource.  Une personne de l'extérieur peut ne pas croire particulièrement à la situation décrite avec un représentant du géant du logiciel, mais à un moment donné, une situation similaire s'est répétée 1 en 1 avec la pression spécifiée d'un employé de Microsoft personnellement avec moi. <br><br>  En revanche, il s'agit d'un déclencheur supplémentaire pour revoir la stratégie de développement de la DSI afin de diversifier l'utilisation des logiciels payants.  Encore une fois, la tendance à la pénétration des solutions OpenSource pour les entreprises prend de l'ampleur. Il y a eu une discussion sur ce sujet lors de la conférence IT-OS 0219 et la diapositive ci-dessous le confirme pleinement. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mh/0x/2e/mh0x2e7i7tobz-us6jmjyxgyw3e.png" alt="image"></div><br>  Ainsi, dans l'organisation mentionnée ci-dessus, l'objectif était fixé: forcer la finalisation de la licence des produits MS, tout en introduisant et en utilisant au maximum les solutions OpenSource.  Pour l'accès des utilisateurs, il a été décidé de passer complètement de «terminalok» et Windows VDI à Linux VDI.  Le choix de Citrix VDI a été déterminé en raison du petit personnel administratif, du grand nombre d'agences et de la simplicité du déploiement du scaling et du produit déjà acheté. <br><br>  Et dans la première partie de l'article, je veux me concentrer sur le calcul du propriétaire TCO de l'infrastructure Linux VDI et le choix d'une solution basée sur la solution Citrix Virtual Apps and Desktops chez les gens ordinaires de XenDesktop et le bon vieux XenServer, bien que maintenant il s'appelle Citrix Hypervisor (oh, ce changement de marque, change le nom de presque tous produits) et, par conséquent, les postes de travail Linux.  Tout le monde semblait bien conscient que la synergie de VDI / APP est la combinaison de l'utilisation de Vmware en tant qu'hyperviseur, Citrix en tant que contrôleur de distribution d'applications et Microsoft en tant qu'OS invité.  Mais que se passe-t-il si la même technologie est nécessaire, mais au moindre coût?  Eh bien, calculons: <br><br>  Au début, je parlerai de la disposition de DO, et après cela, cela valait la peine de passer à une nouvelle plate-forme. <br>  Pour la simplicité et l'intégrité de l'image, considérons uniquement la partie logicielle, puisque l'équipement était déjà disponible et a accompli sa tâche. <br><br>  Donc, au début c'était ... il y avait un merveilleux stockage EMC, un panier Blade de serveurs HP c7000 et 7 G8 dans le rôle de virtualisation VDI.  Windows Server 2012R2 avec le rôle Hyper-V a été installé sur les serveurs et SCVMM a été utilisé.  La plate-forme VDI acquise basée sur XenDesktop 7.18 a été déployée, plusieurs parcs de terminaux ont été déployés.  Connaissant la disposition et la nécessité de concéder une licence sur un grand nombre de logiciels, comparons le coût du déploiement de Linux VDI et d'une solution clé en main complète de Microsoft.  Il a été décidé de mettre en œuvre la traduction progressivement, au stade initial les succursales de l'entreprise ont été affectées, la deuxième étape a été le transfert des emplois restants chez GO. <br><br><img src="https://habrastorage.org/webt/5f/bo/4k/5fbo4kvywhqjqd-f3ytkdggr2ny.png"><br><br>  À la ferme terminale, 1C travaillait principalement, sur les postes de travail VDI, la suite bureautique standard, le courrier, les fichiers, Internet fonctionnait (leur fonction principale était exclusivement la lecture et l'impression). <br><br>  Connaissant la liste des logiciels requis, calculons le coût total de possession d'une solution de Microsoft. <br><br>  <b>Windows Server:</b> <br><br>  Selon les exigences de licence Microsoft, les conditions suivantes doivent être remplies: <br><br><ol><li>  Vous devez autoriser tous les cœurs physiques du serveur. </li><li>  Le paquet minimum de licences de serveur à 2 cœurs est de 8 pièces.  (ou une licence 16 cœurs). </li><li>  Le paquet minimum de licences de processeur à 2 cœurs est de 4 pièces.  (cette règle est activée si le nombre de processeurs est supérieur à deux). </li><li>  Le pack de licences standard accorde le droit d'utiliser une instance physique et deux instances virtuelles de Windows Server sur un serveur. </li><li>  Le package de licence Datacenter donne le droit d'utiliser une instance physique et un nombre quelconque d'instances virtuelles de Windows Server sur un seul serveur. </li></ol><br>  Il s'avère que si vous devez installer plus de 13 copies virtuelles de Windows Server et des postes de travail Windows sur le serveur, il est économiquement possible d'acheter l'édition Datacenter, que nous envisagerons. <br><br>  <b>Windows 10 VDI:</b> <br><br>  Selon la politique de licence de Microsoft, l'accès aux bureaux virtuels à partir du système d'exploitation client doit être effectué à partir d'un appareil disposant d'un abonnement Microsoft VDA (Virtual Desktop Access) valide, à l'exception des PC couverts par la Software Assurance.  Dans notre cas, nous devons acheter et renouveler chaque année un abonnement à 300 licences DVA. <br><br>  «J'achète un logiciel VDI auprès de VMware / Citrix / d'un autre fournisseur. <br><br>  Ai-je toujours besoin de Windows VDA?  Oui  Si vous accédez à un système d'exploitation client Windows en tant que système d'exploitation invité dans le centre de données à partir de tout appareil non SA (y compris les clients légers, iPad, etc.), Windows VDA est le véhicule de licence approprié quel que soit le fournisseur de logiciels VDI que vous choisissez.  Le seul scénario où vous n'auriez pas besoin de Windows VDA est si vous utilisiez des PC couverts par la Software Assurance comme périphériques d'accès, car les droits d'accès au bureau virtuel sont inclus en tant qu'avantage de SA. <br><br>  <b>SCVMM:</b> <br><br>  Le gestionnaire de machine virtuelle System Center du système de gestion de l'infrastructure virtuelle est inclus dans le package Microsoft System Center et n'est pas fourni en tant que produit distinct.  Concernant cette approche, il n'est pas nécessaire de discuter de ce que nous avons, alors nous l'avons. <br><br>  Compte tenu des exigences de licence: <br><br><ol><li>  «Vous devez octroyer une licence à tous les cœurs physiques du serveur. </li><li>  Le paquet minimum de licences de serveur à 2 cœurs est de 8 pièces.  (ou une licence 16 cœurs). </li><li>  Le paquet minimum de licences de processeur à 2 cœurs est de 4 pièces.  (cette règle est activée si le nombre de processeurs est supérieur à deux). </li><li>  Le package de licence standard offre le droit de gérer un OS physique et deux OS virtuels sur un serveur. </li><li>  Le package de licence Datacenter offre le droit de gérer un OS physique et un nombre illimité d'OS virtuels sur un serveur. » </li></ol><br><img src="https://habrastorage.org/webt/f8/gv/ey/f8gveyi4ffhvkva0au_3liatglw.png"><br><br>  Les prix indiqués sont des prix, bien sûr, avec un tel volume, une remise est possible, mais contrairement aux prix BPL de Cisco ou Lenovo, oubliez une remise de 50 ou 70%.  D'après l'expérience de la SEP, plus de 5% est difficile à voir.  Il s'avère que pour la première année, le coût de possession sera supérieur à 5 millions de roubles, dans les 3 ans, le coût de possession sera de ~ 9 millions de roubles.  Le nombre n'est pas petit, mais pour une entreprise de taille moyenne, je dirai que c'est énorme.  Il s'avère que d'un point de vue économique, la décision ne semble déjà pas si simple. <br><br>  Pour l'avenir, je dirai qu'après avoir calculé la décision dudit projet, la direction a pris une décision positive lors de son approbation. <br><br><h3>  Le résultat: </h3><br>  En conséquence, l'ensemble de logiciels s'est avéré être le suivant: Citrix Hypervisor Gireprivizor, OS invité Linux, est contrôlé par Citrix Virtual Desktops.  Économiser 3 millions de roubles.  par an est important.  Ce projet a-t-il été facile à mettre en œuvre?  Non!  Est-ce une panacée pour une telle décision?  Non!  Mais il est clair qu'il y a place pour un examen détaillé de la possibilité de mettre en œuvre des systèmes invités Linux basés sur Citrix VDI.  Bien sûr, il y a aussi quelques petits inconvénients, je vous en dirai plus dans la deuxième partie, qui sera une étape par étape complète de la solution décrite. <br><br>  En conclusion, je tiens à dire que je ne prétends pas être une instance finale, mais le cas lui-même, la tâche était très intéressante. <br><br>  <i>Merci de votre attention, à bientôt)</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr451520/">https://habr.com/ru/post/fr451520/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr451510/index.html">Un peu de paroles techniques sur les outils C ++ de JetBrains, et qu'est-ce que les licornes ont à voir avec ça</a></li>
<li><a href="../fr451512/index.html">Comment analyser le protocole réseau MMORPG mobile</a></li>
<li><a href="../fr451514/index.html">Nouvelles des sous-grilles CSS</a></li>
<li><a href="../fr451516/index.html">Modèles de conception utilisés dans le framework Spring</a></li>
<li><a href="../fr451518/index.html">Nos sites Web mobiles dépouillés</a></li>
<li><a href="../fr451522/index.html">Nous déployons l'automatisation en quelques heures: TypeScript, Protractor, Jasmine</a></li>
<li><a href="../fr451524/index.html">L'histoire de la rupture de la bouilloire Autoplay Media Studio 8.5.3.0</a></li>
<li><a href="../fr451528/index.html">«Et c'est ainsi»: que les fournisseurs de cloud ne s'entendent pas sur les données personnelles</a></li>
<li><a href="../fr451532/index.html">Nouvelles du monde d'OpenStreetMap n ° 459 (30/04/2019 - 06/05/2019)</a></li>
<li><a href="../fr451534/index.html">12 principes d'animation dans le développement de jeux vidéo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>