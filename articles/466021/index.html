<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåÑ üôèüèΩ ‚úçÔ∏è C√≥mo le ense√±√© a Yandex.Alice a hablar sobre juguetes sexuales ü§ó üíÄ ‚õ≥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Integramos Yandex.Alisa y sex shops a trav√©s del arranque Spring. 

 El tema de los asistentes de voz est√° ganando impulso, y decid√≠ unirme a esta ten...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo le ense√±√© a Yandex.Alice a hablar sobre juguetes sexuales</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466021/">  Integramos Yandex.Alisa y sex shops a trav√©s del arranque Spring. <br><br>  El tema de los asistentes de voz est√° ganando impulso, y decid√≠ unirme a esta tendencia integrando el mayor proveedor mayorista de productos √≠ntimos y Yandex.Alisa. <br><a name="habracut"></a><br>  <b>Idea</b> : el proveedor tiene cuentas personales de propietarios de tiendas en l√≠nea, y es necesario proporcionar datos anal√≠ticos del proveedor a trav√©s del canal de voz de Alice. <br><br>  La integraci√≥n constaba de dos partes: <br><br><ul><li>  Integraci√≥n del servicio web y REST API del proveedor de bienes. </li><li>  Integraci√≥n de Yandex.Alice y un servicio web para procesar solicitudes de usuarios. </li></ul><br><h2>  Integraci√≥n de servicio web y API REST de proveedor de bienes </h2><br>  El servicio debe comprender exactamente qu√© solicit√≥ el usuario y solicitar estos datos al servidor del proveedor.  Decidimos escribir un servicio en Spring Boot. <br><br><h3>  Configuraci√≥n del proyecto </h3><br>  Creamos un repositorio en Git y usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">spring initializr</a> implementamos el proyecto en el arranque de primavera (especificamos web en dependencias). <br><br>  La solicitud al servicio viene en formato JSON.  Tiene una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estructura bien documentada</a> , por lo que generar clases es bastante simple: <br><br><img src="https://imageshack.com/i/plcr0ysAp" alt="imagen"><br><br>  Convenientemente, las palabras clave se resaltan en la solicitud, como una direcci√≥n reconocida.  Est√°n ubicados en el bloque <code>‚Äúentities‚Äù</code> : <br><br><img src="https://imageshack.com/i/pm0Cso3Sp" alt="imagen"><br><br>  Pero en nuestro caso fue m√°s conveniente usar el campo <code>Command</code> .  Contiene el texto dictado por el usuario.  Dado que el servicio de integraci√≥n se dedica al reconocimiento de significado, necesitamos analizar las solicitudes.  Se pueden separar entre s√≠ (solicitudes de pedidos realizados, solicitudes de pedidos en proceso), por lo que decidimos usar expresiones regulares para analizarlas. <br><br>  La integraci√≥n con el proveedor se implement√≥ a trav√©s de la biblioteca httpclients de Apache y la deserializaci√≥n de la respuesta XML a trav√©s de jaxb. <br><br>  Entonces, resolvimos la solicitud y los datos solicitados al proveedor.  Pero Alice es una chica estricta y, por lo tanto, no aceptar√° nuestra respuesta despu√©s de tres segundos.  Y el usuario puede querer obtener una descripci√≥n comparativa de su tienda en los √∫ltimos dos a√±os, lo que llevar√° m√°s tiempo.  Para resolver este problema, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">habilitamos el</a> almacenamiento en cach√© a trav√©s de la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ehCache</a> y configuramos la carga de datos del usuario.  Enfrent√≥ un nuevo matiz: Alice no da casi ning√∫n dato personalizado de usuario.  Es decir, ni siquiera ve el correo electr√≥nico en la solicitud entrante.  Solo hay userId que muestra el identificador √∫nico del dispositivo.  Se convirti√≥ en la clave para identificar a los usuarios. <br><br>  La clave est√° all√≠, el cach√© est√°, queda por entender cu√°ndo cargar informaci√≥n en √©l.  El usuario no solicita datos de inmediato, pero primero inicia la habilidad (este es el t√©rmino utilizado en Alice, hablar√© m√°s sobre esto a continuaci√≥n).  Para el servidor, esto parece una solicitud con una etiqueta de <code>Command</code> vac√≠a.  En este punto, puede comenzar a descargar los datos del cliente y, para cuando se env√≠e la primera solicitud del usuario, todos los datos ya se han cargado en nuestro servicio. <br><br>  Para realizar pruebas completas y seguir trabajando en el producto, decidimos implementar la aplicaci√≥n en la nube en Heroku.  Para hacer esto, vaya al sitio web de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Heroku</a> , reg√≠strese, descargue heroku cli e inst√°lelo.  Luego abra la consola e ingrese <code>heroku login</code> .  Vaya al directorio con el proyecto cd ~ / myapp y ejecute <code>heroku create</code> . <br><br>  Cuando crea la aplicaci√≥n, Git crea un repositorio remoto llamado heroku, que est√° asociado con su repositorio local de Git.  Por defecto, Heroku genera un nombre aleatorio en el servidor para su proyecto.  Puede reemplazarlo pasando el nombre de la aplicaci√≥n usando <code>heroku create myapp</code> . <br><br>  Para verificar el inicio de la aplicaci√≥n, ejecute el comando. <br><br> <code>heroku ps:scale web=1</code> <br> <br>  Y si necesita ir por el camino "/", ejecutamos <code>heroku open</code> . <br>  El primer punto de integraci√≥n est√° listo. <br><br><h2>  Integraci√≥n de Yandex.Alice y servicio de procesamiento de solicitudes </h2><br>  Implementamos la integraci√≥n a trav√©s de la creaci√≥n de la llamada habilidad en la plataforma Yandex.  Primero, reg√≠strese en Yandex, y luego vaya a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la p√°gina del desarrollador</a> .  Haga clic en "crear di√°logo" y seleccione el tipo de di√°logo: <br><br><img src="https://imageshack.com/i/pldC2gG5p" alt="imagen"><br><br>  En la pesta√±a "Configuraci√≥n" y necesita completar los campos: <br><br><img src="https://imageshack.com/i/poWuOxHUp" alt="imagen"><br><br><ul><li>  Nombre de la <b>habilidad</b> : el nombre que se mostrar√° en el cat√°logo de Alice.  Con √©l, el usuario podr√° activar la habilidad, por ejemplo, "Lanzar la habilidad [Nombre de la habilidad]". </li><li>  <b>Nombre de activaci√≥n</b> : aqu√≠ puede especificar varias opciones para acceder a la habilidad.  Por defecto, una opci√≥n para el nombre de activaci√≥n es el nombre de la habilidad. </li><li>  <b>Un ejemplo de una solicitud</b> es una frase mediante la cual Alice activa esta habilidad.  Las solicitudes se presentar√°n como botones en el directorio despu√©s de la publicaci√≥n. </li><li>  <b>URL de Webhook</b> : debe especificar la URL de nuestro servicio web que procesar√° las solicitudes de los usuarios. </li><li>  Yandex.Cloud: Yandex puede otorgar una subvenci√≥n a su nube, pero implementaremos el servicio en heroku, por lo que no lo marcaremos. </li><li>  <b>Voz</b> : aqu√≠ puede elegir la voz que hablar√° su habilidad.  Hay diferentes variaciones de hombres y mujeres.  Pero vale la pena considerar que el usuario probablemente dir√°: "Alice, lanza la habilidad", y si Alice responde con el bar√≠tono masculino, esto puede ser algo confuso. </li><li>  <b>Limitaciones en las plataformas utilizadas</b> : si se requiere una pantalla cuando se trabaja con una habilidad.  En nuestro caso, no, as√≠ que no marques. </li><li>  <b>Privacidad</b> : marque la casilla si no desea que la habilidad se refleje en el cat√°logo. </li><li>  <b>Sitio de verificaci√≥n de marca</b> : la direcci√≥n del sitio para la habilidad.  La habilidad para la que complet√≥ este campo se moderar√° solo si ha confirmado los derechos del sitio especificado en Yandex.Webmaster. </li><li>  <b>Categor√≠a</b> : en nuestro caso, es "negocios y finanzas". </li><li>  <b>Descripci√≥n</b> : ¬øpor qu√© necesitas tu habilidad?  La descripci√≥n de la habilidad se mostrar√° en el cat√°logo de habilidades y estar√° disponible para los usuarios. </li><li>  <b>Notas para el moderador</b> , quiz√°s el campo m√°s interesante.  Para ingresar al cat√°logo, la habilidad debe ser moderada, lo que significa que debe cumplir con ciertas reglas que se describen aqu√≠.  En este campo puede describir el proceso de prueba.  Por ejemplo, c√≥mo pasar por la autorizaci√≥n y un escenario de usuario t√≠pico. </li><li>  <b>Restricciones de edad</b> : a pesar del tema de la habilidad, transmitiremos datos adecuados para cualquier grupo de edad.  Por lo tanto, no ponga una marca. </li><li>  <b>El icono</b> es imprescindible :) </li></ul><br>  Guarda el di√°logo.  Todos los cambios en la configuraci√≥n de habilidades tienen efecto solo despu√©s de hacer clic en el bot√≥n "Guardar". <br><br>  Configuramos la integraci√≥n, escribimos el servicio, ahora puedes probarlo. <br><br>  Vaya a la pesta√±a "Pruebas". <br><br><img src="https://imageshack.com/i/plnhhATFp" alt="imagen"><br><br>  Aqu√≠ puedes comprobar el rendimiento de la habilidad.  Por conveniencia, hemos agregado acceso r√°pido a los botones de funci√≥n a la habilidad. <br><br>  Hay limitaciones: no puede verificar la habilidad de la frase inicial y no puede verificar la entrada / salida de voz.  Y si no deber√≠a haber problemas con la frase, la pronunciaci√≥n correcta de las respuestas se verificar√° solo despu√©s de la publicaci√≥n de la habilidad. <br>  Despu√©s de todas las pruebas, la habilidad se puede enviar para moderaci√≥n.  Para hacer esto, vaya a la pesta√±a "Informaci√≥n general" y haga clic en "Moderaci√≥n". <br><br><img src="https://imageshack.com/i/pmBBZRvtp" alt="imagen"><br><br>  Despu√©s de la moderaci√≥n, aparecer√° el bot√≥n Publicar en lugar de este bot√≥n.  Despu√©s de la publicaci√≥n, la habilidad aparecer√° en el cat√°logo oficial de Yandex. <br><br><h2>  Caracter√≠sticas y limitaciones. </h2><br>  Por el momento, las habilidades est√°n algo separadas de la propia Alice (tengo que decir "lanzar la habilidad"), lo que hace dif√≠cil percibir a Alice como una asistente de voz completa.  Ser√≠a genial moldear el contexto de tus habilidades y hacerle preguntas directamente a Alice.  No hay forma de obtener informaci√≥n del usuario que no sea userId, que es el identificador del dispositivo.  Por lo tanto, cada dispositivo debe ser reautorizado, lo que dificulta el almacenamiento de una √∫nica sesi√≥n de usuario.  Adem√°s, la habilidad no puede enviar mensajes push, por lo que no funcionar√° para hacer la habilidad de recordatorio. <br><br>  Por otro lado, las habilidades pueden ser una buena plataforma para implementar el control por voz, por ejemplo, electrodom√©sticos.  Adem√°s, la habilidad puede ser √∫til para entrenar o realizar experimentos, para aclarar informaci√≥n sobre pedidos, precios, etc.  En general, donde los usuarios pueden hacer una pregunta breve exacta o dar un comando breve. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/466021/">https://habr.com/ru/post/466021/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465995/index.html">LDC - Excursi√≥n</a></li>
<li><a href="../466001/index.html">Feng Shui "m√≥vil", o dormimos correctamente (caf√©, cucarachas e intolerancia en Habr√©)</a></li>
<li><a href="../466015/index.html">Un poco m√°s sobre trigonometr√≠a en inform√°tica</a></li>
<li><a href="../466017/index.html">Livy: el eslab√≥n perdido en la cadena de Python Hadoop Spark Airflow</a></li>
<li><a href="../466019/index.html">ABBYY Mobile Web Capture: fotos de alta calidad de documentos directamente en el navegador de su tel√©fono inteligente</a></li>
<li><a href="../466027/index.html">El libro "El camino de Python. Cintur√≥n negro para desarrollo, escalado, prueba y despliegue ‚Äù</a></li>
<li><a href="../466029/index.html">C√≥mo convertir una computadora cu√°ntica en un generador de n√∫meros aleatorios perfecto</a></li>
<li><a href="../466031/index.html">La misi√≥n √©pica de DeepMind para resolver el problema cient√≠fico m√°s complejo</a></li>
<li><a href="../466033/index.html">C√≥mo involucrar a un equipo en la b√∫squeda de ideas y obtener mucho m√°s que ideas</a></li>
<li><a href="../466039/index.html">Bibliotecas PHP para comercio electr√≥nico: trabajando con ATOL y Payture, analizando c√≥digos GS1 y otras tareas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>