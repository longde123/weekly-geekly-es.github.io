<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëΩ üíú üçë Como criamos um gravador de v√≠deo em nuvem de tamanho pequeno a partir de uma c√¢mera IP comum ‚ôøÔ∏è üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø ü¶ï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O t√≥pico da vigil√¢ncia por v√≠deo tornou-se grave para mim com o advento da habita√ß√£o suburbana. Na Internet, voc√™ pode encontrar muitas informa√ß√µes so...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como criamos um gravador de v√≠deo em nuvem de tamanho pequeno a partir de uma c√¢mera IP comum</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422797/"><img src="https://habrastorage.org/webt/s6/vk/u6/s6vku6wsk6xv28mxzagkcil4ddy.jpeg"><br><br>  O t√≥pico da vigil√¢ncia por v√≠deo tornou-se grave para mim com o advento da habita√ß√£o suburbana.  Na Internet, voc√™ pode encontrar muitas informa√ß√µes sobre a organiza√ß√£o da videovigil√¢ncia.  Infelizmente, a maioria das op√ß√µes se resumia √† compra de kits prontos da China.  De amigos, ouvi muitas cr√≠ticas a esse respeito.  De alguma forma, ele mesmo participou da instala√ß√£o do equipamento comprado da Aliexpress.  Em algum lugar, metade das fun√ß√µes declaradas n√£o funcionou como indicado, algumas das op√ß√µes n√£o deram certo, embora o registrador n√£o tenha sido barato.  E havia muitos coment√°rios e opini√µes.  Al√©m disso, muitos criticam o fato de os v√≠deos serem armazenados nos servi√ßos em nuvem chineses.  E ent√£o surgiu a id√©ia - e se voc√™ tentar criar seu pr√≥prio DVR com funcionalidade m√≠nima?  O que?  Naquele momento, comecei a me envolver no linux, escrevi aplicativos com funcionalidades elementares no bash, experimentei a web ... Em princ√≠pio, tudo o que voc√™ precisa para resolver o problema.  Mal disse o que fez. <br><a name="habracut"></a><br><h2>  Vamos l√°  Sele√ß√£o de ferro </h2><br>  Um popular roteador TP-LINK TL-MR3020 com OPENWRT a bordo foi escolhido como objeto de teste. <br><br><img src="https://habrastorage.org/webt/kq/at/vp/kqatvporczm8e1ksiicnm0jq_7e.png"><br><br>  Caracter√≠sticas do roteador: <br><br><ul><li>  Processador MIPS de 300 MHz; <br></li><li>  32 MB de RAM; <br></li><li>  chip flash para 4MB; <br></li><li>  Porta USB 2.0; <br></li><li>  Porta RJ-45 com 100 Mb full duplex; <br></li><li>  Pinos GPIO, gratuitos e com LEDs; <br></li><li>  Bot√£o e ligue os pinos GPIO; <br></li></ul><br>  A c√¢mera √© uma c√¢mera chinesa HD IP comum encomendada na China.  N√≥s gravamos v√≠deo no protocolo RTSP.  O utilit√°rio openRTSP nos ajudou com isso, que fazia parte do reposit√≥rio OPENWRT e tinha todas as funcionalidades necess√°rias.  Decidimos trabalhar com o servi√ßo em nuvem Yandex.Disk por meio do protocolo webdav.  Este servi√ßo fornece 10 GB de espa√ßo livre em disco para cada novo usu√°rio.  Bem, l√° voc√™ pode comprar conforme necess√°rio. <br><br><h2>  Ess√™ncia da ideia </h2><br>  Usando o protocolo rtsp, pegamos o fluxo de v√≠deo da c√¢mera IP.  N√≥s criamos um diret√≥rio de buffer.  N√≥s gravamos v√≠deos nele.  Usando o utilit√°rio CURL por meio do protocolo webdav, enviamos v√≠deos para a nuvem.  No nosso caso, este √© o Yandex.Disk. <br><br><h2>  Experimente </h2><br>  Depois de conectar a c√¢mera IP via ethernet ao roteador, lan√ßamos uma grava√ß√£o de teste de um clipe de 10 segundos no formato .mp4 no disco Yandex: <br><br><pre><code class="bash hljs">OPENRTSP -V -B 51200 -b 200000 -4 -f 25 -d 10&gt;/tmp/ya_disk/test.mp4</code> </pre> <br>  Ent√£o eles enviaram para a nuvem: <br><br><pre> <code class="bash hljs">curl -v -m 180 --stderr /tmp/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> -k -u <span class="hljs-variable"><span class="hljs-variable">$email</span></span>:<span class="hljs-variable"><span class="hljs-variable">$pass</span></span> -T /tmp/ya_disk/test.mp4 https://webdav.yandex.ru/</code> </pre> <br><h2>  Isso funciona! </h2><br>  Os testes come√ßaram com diferentes comprimentos de clipes, diferentes intervalos de grava√ß√£o e grava√ß√£o peri√≥dica.  Em geral, os testes foram bem sucedidos.  No entanto, houve um problema com a grava√ß√£o de clipes muito curtos (da ordem de 5 segundos).  Os clipes foram gravados em uma velocidade mais alta e seu comprimento foi menor que o definido.  Eles resolveram o problema editando as fontes openRTSP: asseguraram que o programa cumprisse estritamente o valor de fps inserido pelo usu√°rio, e n√£o retirado do SDP, tamb√©m eliminava quadros com menos de 100 bytes. <br><br><h2>  Pensamos sobre a funcionalidade </h2><br>  Ap√≥s testes bem-sucedidos, foi decidido fazer uma interface de controle.  Naquela √©poca, eu estava come√ßando a me familiarizar com a web, ent√£o decidi fazer uma vers√£o da web.  Pilha de tecnologia no lado do usu√°rio (front-end): HTML5, CSS3, JQUERY, AJAX.  No lado do ferro (back-end): UHTTPD, CGI, BASH.  Eles n√£o ficaram espertos com o design, usaram o arranjo lado a lado dos bot√µes da p√°gina principal. <br><br><img src="https://habrastorage.org/webt/qe/xd/vr/qexdvryzlpxmdrojtosh4rsxrwc.jpeg" alt="P√°gina inicial do aplicativo"><br><br>  As p√°ginas de gerenciamento e entrada de dados foram feitas usando o JQUERY.  Com os primeiros resultados bem-sucedidos do gerenciamento de um <s>roteador de</s> registradores, come√ßamos a adicionar funcionalidades.  Talvez tenha sido um erro.  Devido √† inexperi√™ncia, negligenciamos os testes.  Agora, quando h√° muitas funcionalidades, √© dif√≠cil testar.  Devido √† falta de disciplina na escrita de c√≥digo no in√≠cio do desenvolvimento, torna-se cada vez mais dif√≠cil entender o que est√° escrito.  As falhas aparecem de tempos em tempos, √© claro que as eliminamos, mas seria muito mais f√°cil fazer isso nos est√°gios iniciais do desenvolvimento e nos est√°gios. <br><br>  Ent√£o, a funcionalidade: <br><br><ul><li>  Suporte para qualquer c√¢mera IP; <br></li><li>  Suporte para modems 3G / 4G; <br></li><li>  Grave no armazenamento em nuvem (gratuito) e / ou em uma unidade USB; <br></li><li>  Grava√ß√£o peri√≥dica e / ou grava√ß√£o de movimento; <br></li><li>  Loop para disco; <br></li><li>  Ajustando o comprimento do rolo; <br></li><li>  Modos de grava√ß√£o: por hora, por movimento, dia, noite; <br></li><li>  Trabalho aut√¥nomo em caso de falta de energia (aproximadamente 20 min); <br></li></ul><br><h2>  Implementa√ß√£o do lado do cliente </h2><br>  Existem 6 bot√µes no menu de configura√ß√µes do gravador: WIFI, GRAVA√á√ÉO, C√ÇMERA, 3G / 4G, ARMAZENAMENTO e AJUDA.  Ent√£o, em ordem: <br><br><h4>  WIFI </h4><br><img src="https://habrastorage.org/webt/ql/xz/us/qlxzusdqgobrodb5sjuz2dyr8_e.jpeg"><br><br>  Aqui voc√™ pode configurar o gravador de wi-fi.  O WI-FI pode funcionar em 2 modos - "cliente" e "ponto de acesso".  No modo "Ponto de acesso", tudo fica claro: n√∫mero do canal, SSID, tipo de criptografia, senha.  No modo "cliente", o registrador est√° conectado a qualquer ponto de acesso wi-fi. <br><br>  Por conseguinte, neste modo, n√£o √© necess√°rio um modem 3G / 4G.  Para que o usu√°rio n√£o perca o registrador quando o cliente se conecta ao ponto de acesso, implementamos fisicamente o modo repetidor. <br><br>  A √∫nica coisa que voc√™ precisa prestar aten√ß√£o √© que, ao conectar o registrador ao ponto de acesso, √© necess√°rio verificar se o dispositivo m√≥vel do usu√°rio "saltou" para outro ponto de acesso Wi-Fi, porque  O ponto de acesso do registrador Wi-fi desaparecer√° por um curto per√≠odo de tempo.  O campo "Modo de recupera√ß√£o" √© uma garantia de que voc√™ n√£o "perder√°" o registrador.  √â um tempo garantido quando voc√™ o liga, quando o usu√°rio pode configurar o dispositivo ou ligar o ponto de acesso.  Ap√≥s o modo de recupera√ß√£o, ele ir√° automaticamente para a p√°gina do menu principal.  Essa parte da funcionalidade ainda est√° sendo testada e desativada temporariamente. <br><br><h4>  RECORD </h4><br><img src="https://habrastorage.org/webt/ed/yt/a_/edyta_ndlmoiwbzz2h_l0vovi1i.jpeg"><br><br>  Campo de indica√ß√£o de data e hora, menu ‚ÄúDefinir hora‚Äù, ‚ÄúRegistro no armazenamento local‚Äù e ‚ÄúRegistro no armazenamento na nuvem‚Äù. <br><br>  <u>Ajuste de hora.</u>  Ao clicar no bot√£o "Alterar hora", voc√™ pode alterar a hora e a data.  Al√©m disso, usando o controle deslizante, a hora do in√≠cio e do fim do dia √© definida (para todos, √© individual).  Isso √© feito para otimizar os modos operacionais do registrador em diferentes hor√°rios do dia. <br>  <u>Escreva no armazenamento local.</u>  Aqui voc√™ pode ativar ou desativar a grava√ß√£o em m√≠dia externa, ativar ou desativar a grava√ß√£o de movimento e / ou grava√ß√£o peri√≥dica com a capacidade de definir a dura√ß√£o do clipe gravado e o per√≠odo de grava√ß√£o dos clipes (no modo de grava√ß√£o peri√≥dica). <br>  <u>Escreva no armazenamento em nuvem.</u>  Aqui, como no par√°grafo anterior, o registro no armazenamento em nuvem est√° configurado.  Foi adicionado um item para configurar um servi√ßo de nuvem, no qual voc√™ pode especificar em qual nuvem de servi√ßo gravar (por enquanto, ele funciona apenas com um disco Yandex), o nome de usu√°rio e a senha da sua conta Yandex. <br><br><h4>  AJUDA </h4><br><img src="https://habrastorage.org/webt/bo/su/nr/bosunrz6knsyt0os8oaciji7bp4.jpeg"><br><br>  O conte√∫do dos itens de menu da interface, bem como o objetivo de cada um deles, s√£o descritos por pontos. <br><br><h4>  C√ÇMARA </h4><br><img src="https://habrastorage.org/webt/gp/ct/vd/gpctvdkx2nnr94fu2otbenwky1g.jpeg"><br><br>  <u>Endere√ßo de fluxo RTSP da c√¢mera.</u>  Os dados para esse campo podem ser encontrados visitando a p√°gina de configura√ß√µes da c√¢mera IP.  No futuro, planejamos receber esses dados via ONVIF e o campo ser√° preenchido automaticamente.  Enquanto a opera√ß√£o est√°vel do ONVIF em todas as c√¢meras IP s√≥ pode sonhar. <br>  <u>O atraso entre os rolos.</u>  Par√¢metro que determina a pausa em segundos ao gravar filmes.  √â usado no modo de grava√ß√£o de movimento.  Permite salvar o tr√°fego da Internet com movimentos constantes ou frequentes no quadro. <br>  <u>V√≠deo da c√¢mera.</u>  √ötil para controlar a imagem gravada ao instalar a c√¢mera. <br><br><h4>  3G / 4G </h4><br><img src="https://habrastorage.org/webt/ge/c9/dt/gec9dtcbg66elw_sp2ds9h-ysjy.jpeg"><br><br>  Isso exibe informa√ß√µes sobre sua conex√£o com a Internet usando um modem 3G / 4G.  Os dados s√£o atualizados a cada 3 segundos.  √ötil para monitorar a qualidade da comunica√ß√£o ao instalar a c√¢mera. <br><br><h4>  ARMAZENAGEM </h4><br><img src="https://habrastorage.org/webt/ao/cl/p0/aoclp0z14ymolmup3jm7sgssmte.jpeg"><br><br>  Existem dois submenus - "Armazenamento local" e "Yandex.Disk".  Quando voc√™ seleciona a primeira, entramos na √°rvore de arquivos da m√≠dia externa conectada; quando voc√™ seleciona a segunda, vamos para Yandex.disk. <br><br><div class="spoiler">  <b class="spoiler_title">Vers√£o m√≥vel da interface</b> <div class="spoiler_text"><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/63/42/sj/6342sj6nkn2uysfwtn_abkmvefa.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/zv/pl/yt/zvplytjskq_ec8we8uu87kn3rkq.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/wp/iy/os/wpiyos6r4vspkt873xhhpxl8elc.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/rz/s3/2q/rzs32qlwxazwwchceyf-v3lz2f0.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/cy/_l/rf/cy_lrfznpxhzqdsn9ug3acldocm.jpeg"></div><br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/ao/cl/p0/aoclp0z14ymolmup3jm7sgssmte.jpeg"></div><br></div></div><br>  Os v√≠deos gravados podem ser visualizados no Yandex.Disk com o player incorporado do servi√ßo.  Al√©m disso, o v√≠deo pode ser baixado e visualizado localmente por qualquer player de v√≠deo.  O armazenamento de v√≠deos gravados est√° organizado da seguinte forma: <br><br><img width="500" src="https://habrastorage.org/webt/_z/sz/bb/_zszbbu8vhfriszhfay6pa0zyb4.png"><br><br>  CAM - pasta para gravar v√≠deos do registrador; <br>  MOTION - uma pasta para gravar v√≠deos gravados por movimento no quadro; <br>  TIME - pasta para gravar v√≠deos gravados em uma frequ√™ncia especificada; <br>  AAAA-MM-DD - pasta para v√≠deos gravados durante o dia; <br>  DDMMYYYY-HH_MM_SS.mp4 - v√≠deos gravados no formato mp4; <br><br><div class="spoiler">  <b class="spoiler_title">Organiza√ß√£o do armazenamento de arquivos no Yandex.Disk</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ag/xq/cm/agxqcmgnb5lesjs6uh5z139h0ws.jpeg"><br><img src="https://habrastorage.org/webt/_u/8c/_s/_u8c_sk4-clpuw-pq1zqlsntol8.jpeg"><br><img src="https://habrastorage.org/webt/3e/vh/d0/3evhd0z4yjcpbgn_ynxzlnwemp8.jpeg"><br><img src="https://habrastorage.org/webt/aj/x9/iv/ajx9ivr061regnksnz9_njdyx3i.jpeg"><br></div></div><br><h2>  O que tem dentro?  Implementa√ß√£o do lado do servidor </h2><br>  Como escrevi acima, o roteador TP-LINK TL-MR3020 com o OPENWRT integrado tornou-se o primeiro experimental.  Barrier Breaker vers√£o 14.07.  No in√≠cio do teste, era a vers√£o mais recente.  Agora atualizado para LEDE.  O OpenRTSP n√£o estava no reposit√≥rio desta vers√£o, ent√£o adicionamos o utilit√°rio, ao mesmo tempo removendo tudo o que era sup√©rfluo. <br><br>  Ap√≥s testes bem-sucedidos, come√ßamos a considerar outros roteadores com arquitetura semelhante.  Est√°vamos procurando uma plataforma mais adequada para o registrador em dimens√µes e caracter√≠sticas.  A id√©ia √© que, ao exibir um dos roteadores com firmware modificado e conectar uma c√¢mera IP com um modem 3G / 4G, voc√™ obtenha um registrador.  A lista de dispositivos nos quais a funcionalidade do registrador foi testada: <br><br><ul><li>  TP-LINK TL-MR3020; <br></li><li>  HAME A5; <br></li><li>  CARAMBOLLA2; <br></li><li>  N√£o desejado; <br></li><li>  Skywork skw71; <br></li><li>  TP-LINK TL-MR10U (com bateria); <br></li><li>  TP-LINK TL-MR3040 (com bateria); <br></li><li>  TP-LINK TL-MR3220 V: 2.3 (4 portas Ethernet); <br></li></ul><br>  Tentamos experimentar as placas dos roteadores no caso.  A id√©ia era que, al√©m do estojo, nada se destaca e n√£o trava, e o estojo em si √© de tamanho m√≠nimo.  Portanto, conforme planejado em 3G / 4G, o modem deve estar dentro do gabinete.  Portanto, obtivemos um prot√≥tipo de rua de <s>fazenda coletiva</s> baseado na placa TP-LINK TL-MR3020: <br><br><img src="https://habrastorage.org/webt/nl/ql/dn/nlqldndp6xnonugngztcpn-o_xm.jpeg"><br><br><img src="https://habrastorage.org/webt/vb/hy/by/vbhybyc7_i9shuotg2dwn_qw3ke.jpeg"><br><br><img src="https://habrastorage.org/webt/cu/79/kg/cu79kgd-vpw8yxk5fi2zyi01s7m.jpeg"><br><br><img src="https://habrastorage.org/webt/m_/nw/nn/m_nwnnnz5mix4-hcgidu4dsjhe0.jpeg"><br><br>  Obviamente, preferimos roteadores com tamanhos m√≠nimos.  Portanto, decidimos experimentar o roteador chin√™s HAME A5, imprimir uma caixa e ver o que acontece: <br><br><img src="https://habrastorage.org/webt/te/qe/ic/teqeicmmwrkyrst7en_32jj84bw.jpeg"><br><br><img src="https://habrastorage.org/webt/dl/hi/y0/dlhiy07kcg5ufwmzubs7r8us2us.jpeg"><br><br>  No HAME A5, o firmware de nosso registrador era inst√°vel, o roteador desligava e reiniciava constantemente.  Provavelmente, isso ocorreu devido a superaquecimento grave.  Portanto, tive que abandon√°-lo em favor de uma op√ß√£o mais confi√°vel e comprovada. <br><br>  Tentamos muitas op√ß√µes, mas nada √© melhor que o meu.  Portanto, eles decidiram distribuir sua placa com um m√≥dulo da CARAMBOLLA2 e a possibilidade de dura√ß√£o da bateria. <br><br><img src="https://habrastorage.org/webt/bx/p-/zo/bxp-zot1dl1nsjbjumki4qt1dpy.jpeg"><br><br>  Caracter√≠sticas do CARAMBOLLA2: <br><br><ul><li>  Processador AR9331, 400 MHz; <br></li><li>  64 MB de RAM DDR2; <br></li><li>  16 MB FLASH; <br></li><li>  802.11 b / g / n, 2,4 GHz, 1x1 SISO, taxa de dados m√°xima de 150MBps, pot√™ncia de sa√≠da de 21 dB; <br></li><li>  Tens√£o de alimenta√ß√£o 3,3 V; <br></li><li>  Dimens√µes 28 x 38 mm; <br></li></ul><br>  Ao projetar o quadro, ficou claro que ele era bem pequeno: <br><br><img src="https://habrastorage.org/webt/09/g4/2o/09g42orapxjcry1gjob3mmtkkpg.jpeg"><br><br><img src="https://habrastorage.org/webt/7s/ol/rf/7solrfz2329dboluqs76zeirkoa.jpeg"><br><br><div class="spoiler">  <b class="spoiler_title">Outra foto!</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/sh/oq/jx/shoqjxdqcwa-g9biqhqb5szbqt4.jpeg"><br><br><img src="https://habrastorage.org/webt/dq/ia/fm/dqiafmvqrdvxrd7idqtlxlmuop4.jpeg"><br><br><img src="https://habrastorage.org/webt/vs/ym/rf/vsymrfn14peipdbsa0pqm8piypg.jpeg"><br><br><img src="https://habrastorage.org/webt/nj/yj/4x/njyj4x78zsubs7dfdszrbepsyeo.jpeg"><br><br><img src="https://habrastorage.org/webt/ci/mb/me/cimbmecbzt4cv51juvlcurk2akq.jpeg"><br><br><img src="https://habrastorage.org/webt/p-/09/vg/p-09vgwxivhz7nptwo1krbio0re.jpeg"><br><br><img src="https://habrastorage.org/webt/vl/oe/_t/vloe_twvd3tajilgcdeyeidqbq0.jpeg"><br><br><img src="https://habrastorage.org/webt/w7/j4/jf/w7j4jfs7htudfwac7xknhz9reay.jpeg"><br></div></div><br>  Por que n√£o instal√°-lo diretamente na c√¢mera?  Portanto, resolvemos imediatamente o problema com o caso do registrador.  Ent√£o eles fizeram.  Aqui est√° o que aconteceu: <br><br><img src="https://habrastorage.org/webt/6f/v6/nb/6fv6nbf5wd1hkjwv8iggioi1xwy.jpeg"><br><br><img src="https://habrastorage.org/webt/8j/g9/u9/8jg9u9gu3giixnag8fmd1rsnurq.jpeg"><br><br><img src="https://habrastorage.org/webt/gb/n-/if/gbn-ifgahpemu2_xgfszm8sizja.jpeg"><br><br><img src="https://habrastorage.org/webt/ky/mo/vg/kymovgkcsnj8h_lga0gug9p-jzq.jpeg"><br><br>  A foto mostra que a placa do gravador est√° montada paralela √†s placas da c√¢mera nos racks.  Por raz√µes de resfriamento do chip, √© melhor usar c√¢meras IP com uma caixa de metal e fazer um radiador para que o calor seja removido da caixa.  Para conectar um modem 3G / 4G e / ou unidade USB, foi utilizado um fio de c√¢mera IP Ethernet padr√£o.  A autonomia da c√¢mera com o gravador interno fornece uma bateria de 700mAh 3.7V.  A fun√ß√£o da bateria ser√° √∫til em caso de falta de energia deliberada.  Esta bateria √© suficiente para cerca de 20 minutos de opera√ß√£o do DVR com a c√¢mera. <br><br><h2>  D√™ mais c√¢meras! </h2><br>  Al√©m disso, foram realizadas experi√™ncias com a grava√ß√£o de v√≠deos de v√°rias c√¢meras IP.  Os experimentos mostraram que a grava√ß√£o de v√≠deos de duas c√¢meras IP funcionava de maneira est√°vel, por isso estamos considerando a possibilidade de criar um gravador em um caso separado, com a capacidade de conectar duas c√¢meras IP.  Agora estamos testando o trabalho do registrador com tr√™s e quatro c√¢meras IP.  Os resultados ainda n√£o est√£o claros.  As c√¢meras ser√£o alimentadas a partir do gravador via PoE passivo. <br><br><img src="https://habrastorage.org/webt/5n/oj/tz/5nojtzo-rywvsubllu0uyfmpur0.png"><br><br><div class="spoiler">  <b class="spoiler_title">Mais fotos!</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/1c/rk/k5/1crkk5wkwnsfqqflozr4ros4oq0.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j0/hv/3c/j0hv3cipg7qajfkaywh1ks2yxdq.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hb/ck/lx/hbcklx37psblnkxf0m4l2kmbrfm.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gt/mj/cw/gtmjcw4yvs0gdljxbcsjkl99zgo.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-m/-a/ky/-m-akymdn9mjlf65snafjoggdla.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/j1/mz/dk/j1mzdkaoi3lbqd7glqc8ldvtblg.png"></div><br></div></div><br>  A funcionalidade desta op√ß√£o pode ser √∫til, por exemplo, ao instalar c√¢meras com interse√ß√£o de zonas de vigil√¢ncia.  Para trabalhar com um grande n√∫mero de c√¢meras, voc√™ pode olhar na dire√ß√£o dos minicomputadores atualmente muito populares.  Mas voc√™ precisa entender que o consumo de energia desses dispositivos √© uma ordem de magnitude mais alta e o pre√ßo tamb√©m. <br><br><h2>  Como voc√™ chama um barco para navegar </h2><br>  Voc√™ provavelmente notou a inscri√ß√£o no quadro.  Achamos que era in√∫til que um projeto n√£o tivesse t√≠tulo.  Eles criaram um nome modesto - ‚ÄúVip-Cam‚Äù (c√¢mera de v√≠deo-IP).  Bem, a vers√£o com v√°rias c√¢meras - "Vip-Box". <br><br><h2>  O que vem a seguir? </h2><br>  Planos futuros: <br><br><ul><li>  Otimize e teste o c√≥digo.  Obtenha um dispositivo de trabalho est√°vel; <br></li><li>  Realizar pesquisas sobre a possibilidade de configurar uma c√¢mera IP atrav√©s do menu de aplicativos da web; <br></li><li>  Explore a possibilidade de integrar um DVR em um sistema dom√©stico inteligente; <br></li><li>  Continue testando a opera√ß√£o do DVR com duas ou mais c√¢meras IP; <br></li><li>  Realize testes no funcionamento da c√¢mera com uma bateria solar; <br></li><li>  Criando uma modifica√ß√£o no DVR com suporte para c√¢meras IP 2-x; <br></li><li>  Adicionando funcionalidade para configura√ß√£o remota do DVR e c√¢mera IP; <br></li><li>  Adicionando a capacidade de criar remotamente um v√≠deo sob demanda; <br></li></ul><br>  As fontes do projeto est√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Por isso, implementamos atualmente a ideia de um mini-gravador em nuvem.  O projeto √© implementado no seu tempo livre; portanto, o tempo de desenvolvimento √© bastante atrasado.  Como resultado, temos um prot√≥tipo funcional de um DVR de tamanho pequeno que pode gravar v√≠deos no armazenamento em nuvem gratuitamente.  Ainda h√° muito trabalho, mas uma das tarefas foi resolvida - √© bem poss√≠vel criar um registrador incompar√°vel e de alta qualidade.  Obrigado pela aten√ß√£o. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt422797/">https://habr.com/ru/post/pt422797/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt422787/index.html">Grandes mudan√ßas nas principais arquiteturas de chips</a></li>
<li><a href="../pt422789/index.html">@Pythonetc Aug de 2018</a></li>
<li><a href="../pt422791/index.html">Como N√ÉO Aprender Ingl√™s: Erros Comuns</a></li>
<li><a href="../pt422793/index.html">Confer√™ncia DEFCON 22. Andrew "Zoz" Brooks. N√£o estrague tudo! Parte 2</a></li>
<li><a href="../pt422795/index.html">Tecnologia e neg√≥cios: um novo modelo de coopera√ß√£o com a Zyxel na R√∫ssia</a></li>
<li><a href="../pt422799/index.html">Como a Microsoft ocultou o servidor inteiro e como encontr√°-lo</a></li>
<li><a href="../pt422801/index.html">Entendendo o RBAC no Kubernetes</a></li>
<li><a href="../pt422803/index.html">Calculadora de custos de armazenamento ou Como abrimos a "caixa preta"</a></li>
<li><a href="../pt422805/index.html">Cancelamento r√°pido da inscri√ß√£o nas listas de discuss√£o no Mail.Ru Mail</a></li>
<li><a href="../pt422807/index.html">AliceVision: fotogrametria da linha de comando</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>