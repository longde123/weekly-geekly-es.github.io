<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ°Ô∏è üë• üéç C'est la norme - 2: comment les cartes normales sont cuites ü§ôüèø üéÖüèª üëäüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il s'agit de la deuxi√®me partie d'une s√©rie de didacticiels sur les cartes normales. La premi√®re partie est ici , mais pour comprendre la deuxi√®me par...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C'est la norme - 2: comment les cartes normales sont cuites</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481704/">  Il s'agit de la deuxi√®me partie d'une s√©rie de didacticiels sur les cartes normales.  La premi√®re partie est <a href="https://habr.com/ru/post/481480/">ici</a> , mais pour comprendre la deuxi√®me partie il n'est pas n√©cessaire de la lire. <br><br>  Le principe g√©n√©ral de cuisson d'une carte normale est relativement simple: nous avons un mod√®le lowpoly avec coordonn√©es UV et un mod√®le highpoly;  nous transf√©rons les informations normales de highpoly √† lowpoly.  Gr√¢ce √† cela, lowpoly r√©fl√©chira la lumi√®re de la m√™me mani√®re que highpoly. <br><br>  Au cours de ce processus, le programme de cuisson √©met essentiellement des rayons provenant du lowpoly, suivant les normales des sommets et recherchant le higpoly.  C'est l'aspect le plus important de la cr√©ation de cartes normales, et la plupart des probl√®mes qui surviennent lorsque vous travaillez avec des cartes normales y sont li√©s. <br><br>  Si vous ne contr√¥lez pas les normales des sommets du mod√®le lowpoly, vous perdrez le contr√¥le de la carte normale. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d4c/2ef/788/d4c2ef788f47c39a1a9af5075fee4045.jpg" alt="image"></div><a name="habracut"></a><br><h2>  Mauvaise corr√©lation des cartes normales </h2><br>  Pour contr√¥ler le lissage du mod√®le lowpoly, nous avons besoin de sommets divis√©s (pour cr√©er des bords rigides) ou de sommets moyens (pour cr√©er des bords lisses). <br><br>  Il s'est av√©r√© que tous les programmes 3D n'utilisent pas les m√™mes calculs pour calculer la moyenne des sommets.  Cela signifie que dans diff√©rents √©diteurs 3D, le mod√®le lowpoly aura un aspect diff√©rent et ses normales de sommet pointeront l√©g√®rement dans des directions diff√©rentes.  Habituellement, cela ne pose pas de gros probl√®me, car ces √©carts sont tr√®s faibles, mais ils affectent l'apparence du mod√®le;  et ces diff√©rences sont amplifi√©es lors de l'utilisation de cartes normales, car les cartes normales modifient les normales des mod√®les lowpoly, qui sont diff√©rents dans diff√©rents programmes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/327/02a/ab5/32702aab582f315e26e2560cf332395b.gif" alt="image"></div><br>  L'industrie graphique 3D s'efforce de r√©soudre ce probl√®me;  R√©cemment, un standard appel√© espace Mikk est apparu.  Il s'agit d'une m√©thode de calcul des normales de sommet que toutes les applications 3D peuvent utiliser pour que les normales de sommet se ressemblent dans tous les programmes 3D.  Cependant, il convient de noter que jusqu'√† pr√©sent, toutes les applications 3D ne l'utilisent pas. <br><br>  Une autre fa√ßon de r√©duire cet effet est de ne pas trop compter sur des cartes normales lors de la cuisson.  Essayez de faire ressembler le mod√®le lowpoly √† un mod√®le highpoly et utilisez des bords plus rigides sur des surfaces planes.  Dans ce cas, la carte normale n'a pas √† faire tout le travail et les petites d√©viations deviendront moins visibles. <br><br><h2>  D√©tails en biseau de la carte normale </h2><br>  Lorsque l'ordinateur fait la moyenne de la direction de la normale pour les normales des sommets du mod√®le lowpoly, de grands changements dans les angles de surface peuvent ¬´presser¬ª les normales du mod√®le lowpoly et ils ne seront plus perpendiculaires √† la surface lowpoly. <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Votre navigateur ne prend pas en charge la vid√©o HTML5. <source src="https://i.gyazo.com/50bd7d9f5f977216b2864fbf950c901f.mp4" type="video/mp4"></video></div></div></div><br>  √âtant donn√© que le programme de cuisson normal, lors de la recherche de pi√®ces highpoly, utilise les directions normales lowpoly, si ces directions sont biseaut√©es, elles seront biseaut√©es sur la carte normale: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf8/e98/422/bf8e98422aec69790267c3c52fdfbcef.jpg" alt="image"></div><br>  Il s'agit d'un probl√®me tr√®s courant pour lequel plusieurs solutions ont √©t√© trouv√©es.  Il n'y a pas de solution id√©ale, tout d√©pend de la g√©om√©trie. <br><br>  1. Dans certains programmes de cuisson 3D, il est possible de rechaper ces pi√®ces avec un changement temporaire des normales lowpoly afin qu'elles cuisent sans biseautage.  Par exemple, une telle option se trouve dans le Marmoset Toolbag.  Un utilisateur de Reddit avec le surnom Tanagashi m'a gentiment expliqu√© que certains programmes comme xNormal peuvent tesseller lowpoly pour ajouter de nouveaux sommets et rendre les normales perpendiculaires √† la surface lowpoly, cuire la carte normale dans l'espace objet et ensuite la convertir en espace tangent bas√© sur les normales lowpoly originales.  En utilisant la nouvelle carte normale, le programme peut cr√©er des masques pour contr√¥ler o√π utiliser la carte normale d'origine et o√π elle a √©t√© cr√©√©e √† partir du mod√®le lowpoly en mosa√Øque. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a39/2fd/517/a392fd51788c92d06501493d0e949c2e.gif" alt="image"></div><br>  2. L'ajout de sommets rendra la transition entre les normales des sommets moins oblique, car un angle de 90 ¬∞ sera divis√© en plusieurs degr√©s plus petits, rendant la deuxi√®me transition moins oblique.  De toute √©vidence, cela augmente le nombre de polygones, et lorsque vous ajoutez de la g√©om√©trie, je recommande d'utiliser ces modules compl√©mentaires pour cr√©er une silhouette de mod√®le plus int√©ressante. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/375/6f2/34f/3756f234f4c52de7576959e762e96f94.jpg" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21a/89a/841/21a89a8412a3e56f57d12a259c4773f5.jpg" alt="image"></div><br>  3. S√©paration des normales moyennes des sommets (raidissement de l'ar√™te / utilisation de groupes de lissage s√©par√©s): de cette fa√ßon, chaque sommet aura plusieurs normales, chacune √©tant perpendiculaire √† la surface lowpoly.  N'oubliez pas que lorsqu'un programme 3D a un sommet divis√© normalement, il cr√©e en fait un doublon du sommet, augmentant ainsi le nombre de sommets et r√©duisant l√©g√®rement les performances.  De plus, comme nous le verrons plus loin, les c√¥tes rigides cr√©ent le probl√®me des ¬´c√¥tes noires¬ª. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/339/67d/6a1/33967d6a1ac517cbd1429962fe35d44b.jpg" alt="image"></div><br>  4. Vous pouvez modifier les normales du mod√®le pour plier les normales lowpoly afin qu'elles soient perpendiculaires aux normales highpoly.  N'oubliez pas que tous les programmes ne permettent pas l'utilisation de normales modifi√©es (dans Zbrush, il n'y a que des normales moyennes, les fichiers OBJ et les FBX obsol√®tes ne contiennent pas d'informations sp√©ciales sur les normales).  En fait, il existe deux fa√ßons de modifier les normales: <br><br><ul><li>  Normales pond√©r√©es: Il s'agit d'une m√©thode automatique, similaire aux normales moyennes des sommets.  L'id√©e est que lors de la moyenne des normales des sommets, toutes les faces ne devraient pas avoir la m√™me force: les grandes faces ¬´attirent¬ª les normales des sommets vers elles-m√™mes plus fortement que les petites faces.  Pour cette raison, les grands visages, qui sont g√©n√©ralement plus importants, auront une meilleure projection des d√©tails.  Cela fonctionne particuli√®rement bien avec les panneaux highpoly. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f5e/8a3/5d2/f5e8a35d20a5c86a39cafbd3b8c47fec.jpg" alt="image"></div></li><li>  Normales personnalis√©es: en utilisant les outils de l'√©diteur 3D, nous pouvons plier des normales lowpoly.  Il s'agit d'une id√©e relativement nouvelle, pour la mise en ≈ìuvre de laquelle il n'y a pas d'outils standardis√©s.  N'oubliez pas que les normales de flexion peuvent cr√©er des ombrages ind√©sirables tr√®s √©tranges dans d'autres parties du mod√®le, donc cette technique est g√©n√©ralement combin√©e avec des biseaux.  Certaines personnes appellent cette technique ¬´mod√©lisation midpoly¬ª. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1fa/1be/881/1fa1be881824a7e856c436d010f60900.jpg" alt="image"></div></li></ul><br><h2>  Cage / distance de cuisson </h2><br>  Par d√©faut, les rayons √©mis par une surface √† faible niveau de polarit√© parcourent une distance limit√©e de sorte que le faible niveau de polarit√© ne re√ßoit pas d'informations normales de parties √©loign√©es du niveau de haut niveau.  Cette distance est g√©n√©ralement appel√©e ¬´distance frontale / arri√®re¬ª, car les rayons peuvent √™tre √©mis vers l'int√©rieur, l'ext√©rieur ou les deux.  Dans la figure ci-dessous, cette distance est indiqu√©e en rouge: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/72c/487/534/72c48753443123074b3b0170ee04e7e8.jpg" alt="image"></div><br>  Certaines applications 3D (telles que 3ds Max) permettent √©galement l'utilisation d'une cage.  La cage est une ¬´copie¬ª d'un mod√®le lowpoly qui peut √™tre modifi√©e de mani√®re √† contenir id√©alement un highpoly.  De plus, dans certains cas (pas toujours), cela nous permet de changer la direction des rayons sans changer les normales initiales des sommets lowpoly.  Cela peut aider √† obtenir les meilleurs cas limites de cuisson et √† √©viter les biseaux;  cependant, nous devons nous rappeler que nous cuisons en utilisant non pas la direction des sommets des normales, mais √† la fin nous utiliserons la carte normale pour changer les vraies normales lowpoly, donc le r√©sultat peut sembler √©trange. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/704/4ce/7b5/7044ce7b56b34b72f6e862383627a421.jpg" alt="image"></div><br><h2>  Coutures c√¥tel√©es </h2><br>  Comme nous l'avons vu, s'il existe un mod√®le avec des bords durs (certains bords ont plus d'un groupe de lissage, ou certains bords sont marqu√©s comme ¬´durs¬ª), le programme de cuisson divise le sommet normal entre deux faces.  Il y a des bons et des mauvais c√¥t√©s √† cette op√©ration. <br><br>  La bonne chose √† ce sujet est que les normales ne sont pas moyenn√©es, donc il y a moins de distorsion des normales: les normales des sommets sont compl√®tement perpendiculaires √† la surface lowpoly.  Il peut √©galement rendre le lowpoly plus beau s'il a des bords √† angles vifs plus adapt√©s aux bords rigides. <br><br>  La mauvaise nouvelle est qu'il y a maintenant un √©cart entre les normales, et cela peut signifier que nous pouvons perdre des informations si lowpoly a un √©cart dans les normales o√π il ne peut pas obtenir de d√©tails highpoly.  De plus, certaines parties de la projection lowpoly peuvent se croiser et rivaliser pour le m√™me espace UV.  Les deux effets cr√©ent une couture le long de la nervure, dont la visibilit√© d√©pend du moteur. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/097/f20/b68/097f20b68dc98a4bcef6c786e031f59e.jpg" alt="image"></div><br>  Cependant, cela peut √™tre facilement √©vit√© avec une astuce simple: si deux faces sont s√©par√©es par un bord dur, vous devez placer chaque face sur un √Ælot UV s√©par√©, en laissant de l'espace entre elles.  Pour r√©duire l'impact du probl√®me des normales divis√©es, les programmes de cuisson essaient un peu d'informations suppl√©mentaires en dehors des sommets des normales, mais pour cela, ils ont besoin d'espace suppl√©mentaire sur la texture.  Si les faces s√©par√©es par un bord dur sont connect√©es en UV, il n'y aura pas de place pour enregistrer ces informations suppl√©mentaires sur la texture. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/692/cdc/849/692cdc849e49cfb24b86ecce53f73f53.jpg" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cc4/f72/eb6/cc4f72eb6888c6711f16980f9d79edf4.jpg" alt="image"></div><br><h2>  Conclusion </h2><br>  Ayant pr√©par√© le mod√®le lowpoly et le rapprochant le plus possible du mod√®le highpoly, je commence √† travailler sur le lissage avant UV.  J'ai d√©fini le lissage pour lowpoly (si l'objet est organique, je commence par un mod√®le enti√®rement liss√©, s'il a une surface solide, puis je r√®gle l'angle de lissage entre 30 et 60 ¬∞ et ajuste le lissage jusqu'√† ce que le r√©sultat soit satisfaisant). <br><br>  Apr√®s avoir pr√©par√© le lissage du mod√®le, je commence √† travailler sur les UV, en divisant tous les bords durs en √Ælots UV s√©par√©s (pour √©viter les coutures sur les bords). <br><br>  S'il y a des erreurs avec les biseaux, alors j'ajoute des bords suppl√©mentaires (g√©n√©ralement je fais des biseaux pour maintenir la rondeur de la silhouette).  Cela fonctionne pour la plupart de mes mod√®les, mais je peux corriger les erreurs avec les biseaux si j'utilise le sac √† outils Marmoset pour la cuisson, ou en utilisant mes propres normes / pond√©r√©es. <br><br>  S'il y a des erreurs de projection, je modifie la distance de cuisson / cage, modifie le lopoly / highpoly pour qu'ils soient mieux adapt√©s √† la cuisson, ou supprime les cartes normales sur des pi√®ces s√©par√©es tr√®s rigides, par exemple, aux extr√©mit√©s des c√¥nes. <br><br>  Le prochain article sera une instruction pour r√©soudre les probl√®mes de cuisson des cartes normales et discuter des probl√®mes et des solutions les plus courants. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr481704/">https://habr.com/ru/post/fr481704/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr481694/index.html">Ma fa√ßon de partitionner dans PostgreSQL</a></li>
<li><a href="../fr481696/index.html">r√®gle: contr√¥le dynamique de Go</a></li>
<li><a href="../fr481698/index.html">WebRTC en streaming dans et autour de la r√©alit√© virtuelle</a></li>
<li><a href="../fr481700/index.html">Une tante</a></li>
<li><a href="../fr481702/index.html">Du grille-pain au drone. Comment Internet des objets est-il n√© et pourquoi ne s'est-il d√©clench√© que 30 ans plus tard</a></li>
<li><a href="../fr481706/index.html">Des ordinateurs quantiques perdus dans la course et leurs erreurs fatales</a></li>
<li><a href="../fr481708/index.html">PocketBook est-il si bon?</a></li>
<li><a href="../fr481710/index.html">En bref, fait la couleur blockbuster centenaire</a></li>
<li><a href="../fr481714/index.html">Pourquoi les jeux vid√©o et les jeux de soci√©t√© ne sont pas le meilleur indicateur des capacit√©s de l'IA (entretien avec le cr√©ateur de Keras)</a></li>
<li><a href="../fr481716/index.html">Programmation r√©active, √ßa vaut le coup de tout laisser tomber et de se pr√©cipiter vers le r√™ve</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>