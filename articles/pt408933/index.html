<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•ò üßì üå≤ Substitui√ß√£o de um pressostato mec√¢nico por um digital (para propriet√°rios de po√ßos) üéÉ üåõ üíÜüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quando encontrei a necessidade de ajustar um pressostato mec√¢nico com molas, percebi que precisava de uma liga√ß√£o para um amigo, ou melhor, para meu p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Substitui√ß√£o de um pressostato mec√¢nico por um digital (para propriet√°rios de po√ßos)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408933/"> Quando encontrei a necessidade de ajustar um pressostato mec√¢nico com molas, percebi que precisava de uma liga√ß√£o para um amigo, ou melhor, para meu pai, uma vez que o mecanismo, embora bem pensado e tolerante a falhas, est√° em um n√≠vel alto, mas h√° uma desvantagem de um ajuste √∫nico no rosto. . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/13e/24d/072/13e24d0724dea32524577289dea261f6.jpg" alt="imagem"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/953/7be/772/9537be77296c01b41348a4e722cef8bf.jpg" alt="imagem"></div><br>  Eu pe√ßo um corte, √© mais interessante l√°;) <br><a name="habracut"></a><br>  Eu meio que descobri e at√© consegui ajust√°-lo, mas gastei tempo e nervosismo nisso.  Ent√£o percebi que um rel√© digital seria √≥timo, basta pressionar os bot√µes e definir o desejado.  √â claro que muitos podem me condenar em v√°rios aspectos: <br><br>  "Voc√™ √© um tolo por n√£o poder lidar com o pressostato mais simples e com duas molas." <br>  - boi mec√¢nico, funcionar√° para sempre. <br>  - por que h√° algo para regular: uma vez que um encanador define XX * (taxa do pa√≠s) rublos e todos <br><br>  Sem problemas, voc√™ pode continuar a lista por um longo tempo, mas pela natureza de sua engenharia, eu gostaria de desenvolver e melhorar tudo ao meu redor, e n√£o torcer as molas e pensar quando os contatos do rel√© mec√¢nico queimarem l√° e o rel√© de prote√ß√£o da bomba t√©rmica come√ßar a funcionar quando voc√™ estiver com sab√£o: D, e ainda melhor sua esposa :) <br><br>  Devemos prestar homenagem, o rel√© mec√¢nico j√° est√° trabalhando para mim pelo quarto ano e nada aconteceu com ele (pah pah pah), eu apenas tive que reconstruir, limpar os contatos e esses "CLIQUE!" Come√ßaram a brilhar.  eles se esfor√ßaram um pouco na garagem e ... assustaram meu rato, para que ele tivesse que fugir. <br><br><div class="spoiler">  <b class="spoiler_title">Escape</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/-fVq93IuNN0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  Como gosto de automa√ß√£o e passei de um fio para o arduino atrav√©s do esp, posso e fa√ßo v√°rios trabalhos em casa, ou melhor, dispositivos, para facilitar a vida.  O c√≠rculo de amigos conhece a lista de projetos que tento concluir e implementar, mas n√£o h√° tempo para isso.  Essa constru√ß√£o do banho vai aparecer durante todo o ver√£o (750 horas), depois a neve se acumula :) e aqui est√° o Ano Novo no nariz! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/d20/61c/46b/d2061c46b4400e77cb2c657f745003d9.jpg" alt="imagem"></div><br>  Muitas pessoas ‚Äúme amam‚Äù tamb√©m, especialmente da esfera de TI.  Mas isso √© apenas divertido, a vida √© uma coisa interessante, e sem ela de forma alguma.  Tamb√©m muito obrigado a todos aqueles que me apoiam - sem as suas am√°veis ‚Äã‚Äãpalavras, a unidade n√£o seria a mesma.  Agrade√ßo √† minha esposa por entender o amor dos meus conselhos) <br><br>  Das letras, pulamos para a realidade.  Eu me virei em busca de um rel√© digital e percebi que era muito dif√≠cil nesse sentido, seja estrangeiro por US $ 100 e nem um pouco como eu gostaria ... ou um mec√¢nico por US $ 15.  Trago-o em $, pois h√° muito se sabe que, se troc√°ssemos para $, mesmo as av√≥s n√£o tomariam banho, como nas moedas.  Mas sou um patife - a casa est√° conectada √† Internet, mas n√£o h√° pressostato - louco! <br><br>  Tema para os trolls: comecei a trabalhar com o Arduino de origem chinesa, n√£o os originais, mas os chineses, eles funcionam da mesma maneira, onde h√° pequenos erros, mas eles n√£o me machucam de maneira a vomitar lava de negativo e agitar esp8266, que morre de est√°tica mais r√°pido do que voc√™ o conectar√° ao seu computador e, mesmo com a energia 3.3, que voc√™ precisa encontrar), a menos que seja o NodeMCU, que eu adoro. <br><br>  Adoro o esp8266, o Arduino e as pessoas, mas para me sentar rapidamente para montar um dispositivo de automa√ß√£o est√°vel e funcional - o arduino √© uma coisa indispens√°vel + A fia√ß√£o da linguagem C ajuda muito para entender rapidamente o que √© necess√°rio.  (ningu√©m censurar√° o que voc√™ escreveu na linguagem de script de freio Lua).  esp8266 (minha opini√£o) - bom onde voc√™ n√£o precisa medir o ADC e a Internet √© necess√°ria.  Embora sua ‚Äúumidade de combust√£o‚Äù seja muito decepcionante. <br><br>  Voltamos √†s nossas ovelhas, ou seja, um revezamento :) <br><br>  Como resultado, encontrei um sensor na China por US $ 5, com um ADC de 0-5V e decidi experiment√°-lo.  Nem por isso, fui estupidamente acionado para aplic√°-lo e montar o dispositivo.  Fantasias er√≥ticas imediatas come√ßaram, como os LEDs piscar√£o) e os bot√µes para ajuste s√£o pressionados, e os d√≠gitos acesos acender√£o na ic√¥nica tela azul chinesa e tudo isso funcionar√° com press√£o real em nosso pente. <br><br>  Eu pensei sobre isso, descrevi, desenhei, planejei, encomendei e comecei a escrever o c√≥digo at√© a er√≥tica passar com pensamentos. <br><br>  Quando o sensor chegou, percebi que ele era muito bem feito. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/cac/9f7/0e4/cac9f70e428dc26b50ef47c3f69e21a3.jpg" alt="imagem"></div><br>  Al√©m disso, percebi que ele come√ßa a mostrar dados n√£o do zero, mas de 0,5V a 4,5V.  de 0 a 12 bar.  Fiquei muito feliz, porque fiquei satisfeito em reconhecer a singularidade desse dispositivo, voc√™ pode acompanhar quando o sensor morre e n√£o mostra o cobi√ßado 0,5 na sa√≠da. <br><br>  Inser√ß√£o do sensor no sistema atual, deixando a mec√¢nica "por precau√ß√£o". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/953/ff1/9a8/953ff19a89efd97c7de0c335a0d841a0.jpg" alt="imagem"></div><br>  Uma coisa √© triste, n√£o havia dados no sensor, como calcular suas leituras, mas como havia uma linha linear no gr√°fico, tive que (envergonhado, admito) - abrir o livro da ALGEBRA e aprender novamente, lembrar como eles constroem uma rela√ß√£o linear direta no equa√ß√£o :) por dois pontos e sobre um milagre, eu rapidamente obtive (voc√™ pode me envergonhar) uma f√≥rmula simples e estimada em que, depois de converter o sinal ADC em VOLTS, entendi quanta press√£o eu tenho em Bar.  Como o pr√≥prio sensor emitiu de 0 a 1,2Mpa - n√£o √© dif√≠cil traduzir para Bar - sabendo que: <br><br>  1 Pa = 1,0E-5 bar <br>  ou seja, 1200000Pa = 12Bar <br>  Como a press√£o da bomba n√£o excede 4Bar, esse sensor √© suficiente para os olhos! <br><br>  Ent√£o eu peguei o Arduino Uno - ele estava por demais, normalmente o uso para projetos de dobradi√ßas r√°pidas, testes e depois uso o Arduino Nano, pois √© desprovido do kit do corpo esquerdo e seu tamanho √© 3 vezes menor!  E sim, os arduinistas de origem chinesa v√£o me perdoar, lamento v√™-la ociosa, devo deix√°-la entrar no dispositivo!  Pensei e comprei uma pequena caixa de pl√°stico IP55, fiz um buraco embaixo da tela, que comprei h√° 4 anos!  Karl!  E ent√£o eu n√£o percebi que esse LCD 16 * 2 entraria em um neg√≥cio t√£o √∫til.  Peguei dois bot√µes autom√°ticos no mercado de carros, soldei os fios e nem projetei a placa separadamente, como fa√ßo para o Nano - j√° que o Uno √© estupidamente grande e nem um pouco para esses fins. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a6e/c78/d35/a6ec78d35d2e73c21da5ab9f53bfbd25.jpg" alt="imagem"><br><br>  O algoritmo √© bastante simples e ainda est√° passando por testes de campo, o c√≥digo do projeto para uma an√°lise mais detalhada est√° localizado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  N√£o tenho vergonha de public√°-lo se houver cr√≠ticas construtivas, estou pronto para fazer altera√ß√µes, uma vez que est√° aberto a qualquer discuss√£o. <br><br>  Tentei incorporar os seguintes princ√≠pios no algoritmo: <br><br>  - Inicializa√ß√£o de dados: na inicializa√ß√£o, todas as vari√°veis ‚Äã‚Äãde opera√ß√£o s√£o verificadas e iniciadas <br>  - Polling inicial do sensor: √© verificado se o sensor n√£o falhou (em caso de falha, o rel√© da bomba √© cortado apenas por precau√ß√£o) os dados s√£o calculados e transferidos para a press√£o atual no pente (pente de distribui√ß√£o, ao qual os vizinhos est√£o conectados + entrada da bomba + acumulador hidr√°ulico) se tudo estiver dentro das press√µes inferior e superior, continuaremos ouvindo e calculando os dados <br>  - Os dados s√£o exibidos visualmente na tela como: <br><br>  press√£o mais baixa - press√£o atual - alta press√£o <br>  √≠ndice de queda de press√£o - [blocos, mostra a press√£o no sistema] <br><br>  Isso permite que voc√™ avalie rapidamente a situa√ß√£o do que est√° acontecendo. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a16/a6f/711/a16a6f7117f1602f238acc0115cba914.jpg" alt="imagem"><br><br>  - Se a press√£o atual for menor que LOWER: um rel√© de estado s√≥lido √© cortado em 15A (testado por anos) e a bomba liga e entrega a √°gua silenciosamente, rapidamente, sem fa√≠scas e cliques.  A press√£o TOP desarma o rel√©.  A bomba nunca liga e desliga, se houver, com leituras de sensor que est√£o al√©m da faixa razo√°vel.  Isso √© seguran√ßa. <br><br>  - Calculo o √≠ndice de queda de press√£o quando metade da press√£o permanece no pente e as anteriores e as atuais s√£o verificadas a cada 10 segundos, se a diferen√ßa for menor que o padr√£o 0,05 - ent√£o o √≠ndice atual muda e a bomba LIGA SEMPRE, ou seja, a l√≥gica √© o r√°pido consumo de √°gua e que para prever a inclus√£o da bomba, eu uso essa l√≥gica.  A l√≥gica n√£o funciona at√© o momento a 100%, pois ainda estou testando este momento, h√° falhas associadas ao tempo em milis () dos pr√≥prios arduinos, isso me incomoda um pouco, mas vou encontrar uma solu√ß√£o para um c√°lculo claro.  A l√≥gica √© acionada no in√≠cio e, em seguida, o √≠ndice cai para 0,01 e a l√≥gica n√£o funciona mais, mas isso n√£o afeta a ativa√ß√£o e desativa√ß√£o da bomba.  Aqui voc√™ pode focar no t√≥pico ‚Äúa bomba deve ser ligada um certo n√∫mero de vezes por hora e n√£o mais‚Äù - voc√™ tem direito a isso), n√£o vou discutir - esse t√≥pico est√° sendo analisado. <br><br>  - existem bot√µes laterais que permitem definir o limiar BAIXO e ALTO para ligar e desligar a bomba DINAMICAMENTE, sem reiniciar, apenas estupidamente em movimento - olhe para a tela e pressione os bot√µes laterais ....  conveniente!  os dados s√£o gravados imediatamente na EEPPROM e, quando a unidade √© ligada, √© carregada de l√° (√© uma mem√≥ria constante para escrever n√∫meros de 0 a 255 bytes, n√£o √© suficiente para pequenos caprichos).  Ao mesmo tempo, h√° um ponto em que os n√∫meros de ponto flutuante s√£o t√£o dif√≠ceis e hemorr√°gicos que foi simplesmente decidido da minha parte assim: sabendo que o n√∫mero x.x0 √© uma press√£o do tipo float, ele pode ser facilmente convertido em byte se voc√™ multiplicar por 10 e escreva na mem√≥ria, ou seja: exemplo: 1,80 * 10 = 18 - ap√≥s a multiplica√ß√£o, o n√∫mero flutuante descarta o √∫ltimo zero automaticamente e obtemos um n√∫mero que se encaixa no tipo de byte, ao ler, o dividimos por 10,0 e obtemos a forma oposta para trabalhar em nosso sistema e tipo float. <br><br>  - Todo o bem estar√° dispon√≠vel para ‚Äúsomente leitura‚Äù fora de casa, o que nos permitir√° entender a situa√ß√£o com press√£o n√£o apenas na press√£o arterial, mas tamb√©m nos canos! <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e04/3c9/963/e043c99632033b3dc2fe5bf4479c726f.jpg" alt="imagem"><br><br>  Bem, isso √© tudo, √© perdoado, quem quer que seja incomodado com os detalhes do c√≥digo, TIPOS est√∫pidos de dados e detalhes √≠ntimos de carregar dados da mem√≥ria, pule isso porque, sabendo que existem pessoas da √°rea de TI, eles far√£o todos os tipos de perguntas ou vice-versa, rir dos meus algoritmos simples que n√£o usam o AI \ ML da moda e outros algoritmos mega legais e de big data.  Esperamos que os engenheiros tamb√©m entendam outras partes relacionadas √† parte mec√¢nica. <br><br>  Em geral, a conclus√£o √© a seguinte: voc√™ pode fazer tudo, facilmente, faz√™-lo no interesse e, como um comentarista favorito disse uma vez: voc√™ pode ser adulto e "brincar com brinquedos infantis". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/b98/8d9/760/b988d9760525a615924a2c77c37bb68f.jpg" alt="imagem"></div><br><div class="spoiler">  <b class="spoiler_title">ensaios de campo</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/cn3C7iSAZ1k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  Seu bon√©, automa√ß√£o, cara capaz e tenha um bom dia para voc√™! <br><br>  Ervas daninhas: <br><br>  - Continuo testando o √≠ndice de queda de press√£o para in√≠cio prematuro <br>  - Arduino uno (China) - problemas com o cron√¥metro millis () vieram √† tona - vou procurar o arduino nano (isso nunca aconteceu antes, suponho que seja um modelo curvo) (eu n√£o entendi, ent√£o n√£o) <br>  - O erro √© declarado 1.5% - de 1.2Bar - isso √© 0.18Bar - na verdade - eu tenho algo em torno de 0,3 em rela√ß√£o ao meu man√¥metro, mas n√£o sei o quanto ele est√° ... ent√£o 2% admitem erro m√°ximo - voc√™ pode colocar o erro no algoritmo (como eu) e ser√° mais ou menos como a verdade.  N√£o inicie sat√©lites - ele far√°) <br><br>  <b>upd: o</b> pre√ßo na regi√£o de US $ 15 a 18 foi lan√ßado para o produto. <br><br>  Feliz Ano Novo!  Que todos os seus planos se realizem, BANHEIROS ser√£o constru√≠dos, haver√° CALOR em casa e toda a sua fam√≠lia estar√° com voc√™!  Que o ano novo seja apenas uma boa not√≠cia. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt408933/">https://habr.com/ru/post/pt408933/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt408923/index.html">"Obrigado pela ajuda, camarada!" Acelerando os PCs para jogos AMD Ryzen</a></li>
<li><a href="../pt408925/index.html">Steampunk Hi-Fi: um passado alternativo para equipamentos de som</a></li>
<li><a href="../pt408927/index.html">O Steam parou de aceitar pagamentos em Bitcoin devido √† alta volatilidade da criptomoeda</a></li>
<li><a href="../pt408929/index.html">Os desenvolvedores de alguns jogos para celular exploram criptomoeda nos smartphones dos usu√°rios</a></li>
<li><a href="../pt408931/index.html">An√°lise do Port√°til ASUS N580VD</a></li>
<li><a href="../pt408935/index.html">Antena inteligente para redes LTE</a></li>
<li><a href="../pt408939/index.html">Relat√≥rio final sobre o projeto do sat√©lite Mayak</a></li>
<li><a href="../pt408941/index.html">Conector de diagn√≥stico OBD-II como interface para IoT</a></li>
<li><a href="../pt408943/index.html">O que o t√©dio faz com uma pessoa: a ci√™ncia da consci√™ncia errante</a></li>
<li><a href="../pt408945/index.html">Milion√°rio an√¥nimo de bitcoin doa US $ 86 milh√µes para caridade.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>