<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🈯️ 👩🏿‍🤝‍👩🏾 🛬 Coincidencia de productos con Elasticsearch para el servicio de monitoreo de precios de la competencia 🧑🏼‍🤝‍🧑🏻 👩🏼‍🎤 🕐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En 2017, surgió la idea de desarrollar un servicio de monitoreo de precios de la competencia. Su característica distintiva de otros servicios similare...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Coincidencia de productos con Elasticsearch para el servicio de monitoreo de precios de la competencia</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428814/">  En 2017, surgió la idea de desarrollar un servicio de monitoreo de precios de la competencia.  Su característica distintiva de otros servicios similares era la función de la correspondencia automática diaria de bienes.  Aparentemente, debido a la falta casi completa de información sobre cómo hacer esto, los servicios de monitoreo de precios ofrecían solo la posibilidad de comparación manual por parte de los propios clientes o de los operadores de servicios con un precio de 0.2 a 1 rublo por hecho de comparación.  La situación real con, por ejemplo, 10 sitios y 20,000 productos en cada uno, inevitablemente requiere la automatización del proceso, ya que el emparejamiento manual ya es demasiado largo y costoso. <br><br>  El enfoque de la coincidencia automática se describirá a continuación utilizando un ejemplo de varias farmacias competidoras que utilizan la tecnología <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Elaticsearch</a> . <br><a name="habracut"></a><br><h2>  Descripción del entorno </h2><br><ol><li>  SO: Windows 10 </li><li>  Base: Elaticsearch 6.2 </li><li>  Cliente para solicitudes: Cartero 6.2 </li></ol><br><h2>  Configurar Elaticsearch </h2><br>  Configuración del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mapeador</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">analizador de</a> campo del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">producto</a> en una sola solicitud <br><br><pre><code class="hljs pgsql">PUT http://localhost:<span class="hljs-number"><span class="hljs-number">9200</span></span>/app { "mappings": { "product": { "properties": { "name": { "type": "text", "analyzer": "name_analyzer" #        }, "manufacturer": { "type": "text" }, "city_id": { "type": "integer" }, "company_id": { "type": "integer" }, "category_id": { "type": "integer" }, } } }, "settings": { "index": { "analysis": { "analyzer": { "name_analyzer": { "type": "custom", "tokenizer": "standard", #        ,       "char_filter": [ "html_strip", #       html  "comma_to_dot_char_filter" #    ,     ], "filter": [ "word_delimeter_filter", #     "synonym_filter", #    "lowercase" #      ] } }, "filter": { "synonym_filter": { "type": "synonym_graph", "synonyms": [ ", ", ", ", ", ", ", , ", ", ", ", , , ", ", ", ", ", ", , ", ", , ", ", , , -, -", ", , ", ", , , ", ", ", ", ", ", , ", ", , ", ", ", ", ", ", ", ", ", ", , , ", ", ", ", g", "ml, " ] }, "word_delimeter_filter": { "type": "word_delimiter", "type_table": [ ". =&gt; DIGIT", #       "- =&gt; ALPHANUM", "; =&gt; SUBWORD_DELIM", "` =&gt; SUBWORD_DELIM" ] } }, "char_filter": { "comma_to_dot_char_filter": { "type": "mapping", "mappings": [ ", =&gt; ." ] } } } } } }</code> </pre> <br>  Por ejemplo, podemos ver en qué partes el analizador "name_analyzer" romperá el nombre del medicamento "Hyoxysone 10mg + 30mg / g pomada para uso externo de un tubo de 10g".  Usamos request <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">_analyze</a> . <br><br><pre> <code class="hljs pgsql">POST http://localhost:<span class="hljs-number"><span class="hljs-number">9200</span></span>/app/_analyze { "analyzer" : "name_analyzer", "text" : " 10+30/      10" }</code> </pre> <br>  resultado <br><pre> <code class="hljs objectivec">{ <span class="hljs-string"><span class="hljs-string">"tokens"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"start_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"end_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;ALPHANUM&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }, { <span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">"10"</span></span>, <span class="hljs-string"><span class="hljs-string">"start_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">"end_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;ALPHANUM&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }, { <span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"start_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-string"><span class="hljs-string">"end_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;ALPHANUM&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> }, { <span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">"30"</span></span>, <span class="hljs-string"><span class="hljs-string">"start_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-string"><span class="hljs-string">"end_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;ALPHANUM&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> }, { <span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"start_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-string"><span class="hljs-string">"end_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">19</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;ALPHANUM&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">"position"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span> }, { <span class="hljs-string"><span class="hljs-string">"token"</span></span>: <span class="hljs-string"><span class="hljs-string">"g"</span></span>, <span class="hljs-string"><span class="hljs-string">"start_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-string"><span class="hljs-string">"end_offset"</span></span>: <span class="hljs-number"><span class="hljs-number">21</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"SYNONYM"</span></span>, <span class="hljs-meta"><span class="hljs-meta">#,   </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"g"</span></span></span><span class="hljs-meta">   SYNONYM,  ,          </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">", g"</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 5 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 20, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 21, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 5 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 22, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 26, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 6 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 27, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 30, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 7 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 31, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 40, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 8 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 41, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 51, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 9 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 52, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 56, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 10 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"10"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 57, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 59, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 11 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"g"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 59, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 60, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"SYNONYM"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 12 }, { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"token"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">""</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"start_offset"</span></span></span><span class="hljs-meta">: 59, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"end_offset"</span></span></span><span class="hljs-meta">: 60, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"type"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"&lt;ALPHANUM&gt;"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"position"</span></span></span><span class="hljs-meta">: 12 } ] }</span></span></code> </pre> <br><h2>  Relleno con datos de prueba </h2><br>  Solicitar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">_bulk</a> <br><br><pre> <code class="hljs ruby">POST <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/localhost:9200/</span></span>_bulk { <span class="hljs-string"><span class="hljs-string">"index"</span></span>: { <span class="hljs-string"><span class="hljs-string">"_index"</span></span>: <span class="hljs-string"><span class="hljs-string">"app"</span></span>, <span class="hljs-string"><span class="hljs-string">"_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"product"</span></span>, <span class="hljs-string"><span class="hljs-string">"_id"</span></span>: <span class="hljs-number"><span class="hljs-number">195111</span></span> } } { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" 10+30/      10"</span></span>, <span class="hljs-string"><span class="hljs-string">"manufacturer"</span></span>: <span class="hljs-string"><span class="hljs-string">"   "</span></span>, <span class="hljs-string"><span class="hljs-string">"city_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"company_id"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"category_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> } { <span class="hljs-string"><span class="hljs-string">"index"</span></span>: { <span class="hljs-string"><span class="hljs-string">"_index"</span></span>: <span class="hljs-string"><span class="hljs-string">"app"</span></span>, <span class="hljs-string"><span class="hljs-string">"_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"product"</span></span>, <span class="hljs-string"><span class="hljs-string">"_id"</span></span>: <span class="hljs-number"><span class="hljs-number">195222</span></span> } } { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"     10 +30 /: 10 "</span></span>, <span class="hljs-string"><span class="hljs-string">"manufacturer"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"city_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"company_id"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">"category_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre><br><h2>  Búsqueda de mapeo </h2><br>  Deje que el producto de nuestro cliente para el que queremos encontrar todos los productos similares de la competencia tenga características <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"     10 +30 /   10 "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"manufacturer"</span></span>: <span class="hljs-string"><span class="hljs-string">"   "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"city_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"company_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"category_id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre><br>  Usando el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">directorio de medicamentos,</a> seleccionamos el nombre del medicamento del nombre del producto.  En este caso, la palabra "Hyoxysone".  Esta palabra será un criterio obligatorio. <br><br>  También recortamos todos los números del nombre - "10 30 10", también serán un criterio indispensable.  Además, si un cierto número se incluyó dos veces, también debería incluirse dos veces en los productos encontrados, de lo contrario aumentaremos la posibilidad de coincidencia con los productos incorrectos. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">_</a> Solicitud de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">búsqueda</a> <br><br><pre> <code class="hljs powershell">GET http://localhost:<span class="hljs-number"><span class="hljs-number">9200</span></span>/app/product/_search { <span class="hljs-string"><span class="hljs-string">"query"</span></span>: { <span class="hljs-string"><span class="hljs-string">"bool"</span></span>: { <span class="hljs-string"><span class="hljs-string">"filter"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"terms"</span></span>: { <span class="hljs-string"><span class="hljs-string">"company_id"</span></span>: [ <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span> ] } }, { <span class="hljs-string"><span class="hljs-string">"term"</span></span>: { <span class="hljs-string"><span class="hljs-string">"city_id"</span></span>: { <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> } } }, { <span class="hljs-string"><span class="hljs-string">"term"</span></span>: { <span class="hljs-string"><span class="hljs-string">"category_id"</span></span>: { <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> } } } ], <span class="hljs-string"><span class="hljs-string">"must"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"bool"</span></span>: { <span class="hljs-string"><span class="hljs-string">"should"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"match"</span></span>: { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: { <span class="hljs-string"><span class="hljs-string">"query"</span></span>: <span class="hljs-string"><span class="hljs-string">"    + /   "</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"operator"</span></span>: <span class="hljs-string"><span class="hljs-string">"or"</span></span>, <span class="hljs-string"><span class="hljs-string">"minimum_should_match"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"fuzziness"</span></span>: <span class="hljs-string"><span class="hljs-string">"AUTO"</span></span> } } } ], <span class="hljs-string"><span class="hljs-string">"must"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"match"</span></span>: { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: { <span class="hljs-string"><span class="hljs-string">"query"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"operator"</span></span>: <span class="hljs-string"><span class="hljs-string">"or"</span></span>, <span class="hljs-string"><span class="hljs-string">"minimum_should_match"</span></span>: <span class="hljs-string"><span class="hljs-string">"70%"</span></span>, <span class="hljs-string"><span class="hljs-string">"fuzziness"</span></span>: <span class="hljs-string"><span class="hljs-string">"AUTO"</span></span> } } }, { <span class="hljs-string"><span class="hljs-string">"match_phrase"</span></span>: { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: { <span class="hljs-string"><span class="hljs-string">"query"</span></span>: <span class="hljs-string"><span class="hljs-string">"10 30 10"</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"slop"</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span> } } } ] } } ], <span class="hljs-string"><span class="hljs-string">"should"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"bool"</span></span>: { <span class="hljs-string"><span class="hljs-string">"should"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"match"</span></span>: { <span class="hljs-string"><span class="hljs-string">"manufacturer"</span></span>: { <span class="hljs-string"><span class="hljs-string">"query"</span></span>: <span class="hljs-string"><span class="hljs-string">"   "</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"operator"</span></span>: <span class="hljs-string"><span class="hljs-string">"or"</span></span>, <span class="hljs-string"><span class="hljs-string">"minimum_should_match"</span></span>: <span class="hljs-string"><span class="hljs-string">"70%"</span></span>, <span class="hljs-string"><span class="hljs-string">"fuzziness"</span></span>: <span class="hljs-string"><span class="hljs-string">"AUTO"</span></span> } } }, { <span class="hljs-string"><span class="hljs-string">"match"</span></span>: { <span class="hljs-string"><span class="hljs-string">"manufacturer"</span></span>: { <span class="hljs-string"><span class="hljs-string">"query"</span></span>: <span class="hljs-string"><span class="hljs-string">"alenta armacevtika "</span></span>, <span class="hljs-string"><span class="hljs-string">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"operator"</span></span>: <span class="hljs-string"><span class="hljs-string">"or"</span></span>, <span class="hljs-string"><span class="hljs-string">"minimum_should_match"</span></span>: <span class="hljs-string"><span class="hljs-string">"70%"</span></span>, <span class="hljs-string"><span class="hljs-string">"fuzziness"</span></span>: <span class="hljs-string"><span class="hljs-string">"AUTO"</span></span> } } } ] } } ] } }, <span class="hljs-string"><span class="hljs-string">"highlight"</span></span>: { <span class="hljs-string"><span class="hljs-string">"fields"</span></span>: { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: {} } }, <span class="hljs-string"><span class="hljs-string">"size"</span></span>: <span class="hljs-number"><span class="hljs-number">50</span></span> }</code> </pre> <br>  En la salida, obtenemos la identificación de los productos, así como su nombre + puntaje para análisis, con fragmentos coincidentes coincidentes. <br><br><ul><li>  <b>Hyoxysone</b> <b>10</b> <b>mg</b> + <b>30</b> <b>mg</b> / <b>g</b> <b>pomada</b> <b>para</b> <b>uso</b> <b>externo</b> <b>,</b> <b>tubo</b> <b>10</b> <b>g</b> - Puntuación de algoritmo: 69.84 </li><li>  <b>Pomada HYOXISON</b> <b>para</b> <b>uso</b> <b>externo</b> <b>10</b> <b>mg</b> + <b>30</b> <b>mg</b> / <b>g</b> : <b>10</b> <b>g</b> - Evaluación de algoritmo: 49.79 </li></ul><br><h2>  Conclusión </h2><br>  El método descrito ciertamente no dará una precisión de coincidencia del 100%, pero facilitará en gran medida el proceso de coincidencia manual de productos.  También es adecuado para tareas que no requieren una precisión absoluta. <br>  En general, si mejora su consulta de búsqueda utilizando heurísticas adicionales y aumenta el número de sinónimos, puede lograr un resultado casi satisfactorio. <br>  Además, las pruebas de rendimiento realizadas en el antiguo i7 mostraron buenos resultados.  Se realizan 10 consultas de búsqueda en una matriz de 200,000 productos en un par de segundos.  Puedes ver este ejemplo en vivo de la medicina <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aquí</a> . <br><br>  Sugiera sus opciones, formas de hacer coincidir los comentarios. <br><br>  Gracias por su atencion! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es428814/">https://habr.com/ru/post/es428814/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es428800/index.html">Cocinar CSS perfecto</a></li>
<li><a href="../es428806/index.html">Análisis de verificación del consumidor: lo que compran en Amazon</a></li>
<li><a href="../es428808/index.html">Poca conveniencia en la vida estudiantil.</a></li>
<li><a href="../es428810/index.html">18 materiales sobre tecnología digital en audio</a></li>
<li><a href="../es428812/index.html">TypeScript: Deserialización de JSON en clases con validación de tipo en propiedades</a></li>
<li><a href="../es428816/index.html">Diseño de materiales: forma: consejos para mejorar la GUI de una aplicación de Android (y no solo) cambiando la forma de los elementos</a></li>
<li><a href="../es428818/index.html">DeOldify: un programa para colorear imágenes en blanco y negro</a></li>
<li><a href="../es428820/index.html">Estás en 3D en tercera persona: Oculus Go + Raspberry Pi</a></li>
<li><a href="../es428822/index.html">La historia de un pequeño truco, o un error adecuado Recompensa de un proveedor local de Internet</a></li>
<li><a href="../es428824/index.html">Telescopio más allá de lo razonable</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>