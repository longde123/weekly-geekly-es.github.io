<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëï üåà üë©üèº‚Äçü§ù‚Äçüë©üèª Engenharia reversa de uma esta√ß√£o de solda high-end ü¶î üßî üíé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="(Esta √© a tradu√ß√£o do artigo original realizado por baragol ) 

 Tivemos um monte de fotografias do PCB principal, um v√≠deo do YouTube com formas de o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Engenharia reversa de uma esta√ß√£o de solda high-end</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451246/"><img src="https://habrastorage.org/webt/zy/do/hq/zydohqpxzvzoygol3o6ci9wkebw.jpeg"><br><br>  <i>(Esta √© a tradu√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> original realizado por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">baragol</a> )</i> <br><br>  Tivemos um monte de fotografias do PCB principal, um v√≠deo do YouTube com formas de onda de tens√£o de dreno de MOSFETs, um post no f√≥rum com uma descri√ß√£o dos valores de capacit√¢ncia dos capacitores de circuito LC e tamb√©m v√°rios v√≠deos de unboxing mostrando o aquecimento do ponta de solda.  A √∫nica coisa que realmente me preocupou foi o v√≠deo com a medi√ß√£o do consumo m√°ximo de energia durante o aquecimento.  N√£o h√° nada no mundo mais desamparado, irrespons√°vel e depravado do que os cartuchos queimados comprados por 60 d√≥lares na Amazon.  Mas deixe-me come√ßar do come√ßo. <br><a name="habracut"></a><br><h4>  Introdu√ß√£o ao assunto </h4><br>  Para entender que tipo de dispositivo vamos projetar hoje, primeiro vamos relembrar brevemente os tipos de esta√ß√µes de solda em oferta e como elas s√£o diferentes. <br><br>  Como voc√™ deve ter adivinhado, todo o segmento de pre√ßo mais baixo desse equipamento √© possu√≠do por marcas chinesas, que clonam amplamente o design bastante bem-sucedido do ferro de solda japon√™s Hakko.  O princ√≠pio operacional por tr√°s do modelo original e de suas in√∫meras r√©plicas √© muito direto: um aquecedor de n√≠quel ou de pel√≠cula fina transfere seu calor para uma ponta de solda destac√°vel, sua temperatura sendo regulada com uma unidade de termopar ou um termistor embutido no aquecedor.  Essa √© uma solu√ß√£o simples e barata, mas sua qualidade pode ficar um pouco longe da perfeita nas r√©plicas chinesas, por exemplo, um aquecedor de tamanho ligeiramente errado, um material ligeiramente mais barato da ponta, o que resulta em envolver o aquecedor em papel alum√≠nio, encomendar uma dica original em japon√™s do exterior, substituindo o conector por um mais poderoso ... em outras palavras, voc√™ ter√° seu prato cheio rapidamente. <br><br>  Em algum lugar no meio do espectro de pre√ßos est√£o as esta√ß√µes de solda originais de marcas ocidentais de renome.  A ERSA alem√£, a US Weller, a japonesa Hakko - esse tipo de marca.  O princ√≠pio operacional deles √© basicamente id√™ntico, exceto que voc√™ realmente n√£o precisa acessar seus recursos para faz√™-los funcionar;  eles incluem itens legais prontos para uso, como um cabo de silicone macio que n√£o derrete com o menor toque do ferro de solda e ... bem, na verdade n√£o existem tantos itens promocionais!  O pre√ßo?  Corresponde √† promessa.  As centenas de d√≥lares para gastar com essas coisas podem angustiar n√£o apenas um humilde entusiasta de bricolage que gosta de passar as noites aprimorando seu hardware, mas tamb√©m um neg√≥cio de m√©dio porte. <br><br>  No entanto, o artigo de hoje √© sobre algo diferente.  Vou falar sobre o verdadeiro fen√¥meno high-end no mundo das esta√ß√µes de solda, a saber, os ferros de solda por indu√ß√£o fabricados nos EUA da Metcal (atualmente s√£o produzidos sob esta marca pela OK International).  Na verdade, v√°rias empresas est√£o produzindo esses equipamentos, por exemplo, al√©m do Metcal, tamb√©m posso mencionar a Thermaltronics, a JBC e at√© a Hakko, que vendem um design semelhante.  O design operacional do aquecedor de indu√ß√£o nesses dispositivos √© bastante elegante: <br><br> <a href=""><img src="https://habrastorage.org/webt/u_/zy/lj/u_zyljn2jccu9qkjsywbyn1w7ro.jpeg"></a> <br><br>  Como voc√™ pode ver, n√£o possui nenhum sensor de temperatura;  sua ponta de solda √© feita de cobre com revestimento ferromagn√©tico que, quando exposto a um campo magn√©tico alternado de alta frequ√™ncia (13,56 MHz), √© aquecido e, a uma certa temperatura, chamada temperatura Curie, perde suas qualidades magn√©ticas e para aquecendo ainda mais.  Quando voc√™ toca no ponto de solda, o item ferromagn√©tico perde parcialmente seu calor e o indutor come√ßa imediatamente a transmitir sua energia √† ponta de solda.  Os cartuchos v√™m com quatro temperaturas fixas, das quais voc√™ realmente precisa apenas de duas - para solda com chumbo e sem chumbo.  √â s√≥ isso. <br><br>  A OKI / Metcal produz v√°rios modelos de esta√ß√µes de solda por indu√ß√£o que t√™m pre√ßos diferentes e com pot√™ncia de sa√≠da diferente; no entanto, a faixa de pre√ßo de US $ 1000 libera um de qualquer desejo de tirar proveito deste belo dispositivo, por mais bonito que possa parecer.  O que me leva √† id√©ia de tentar economizar algum dinheiro! <br><br><h4>  Problemm </h4><br>  Vamos colocar desta forma: usando apenas fontes publicamente dispon√≠veis, para realizar a engenharia reversa virtual do dispositivo original MX-5200 e terminar com o design de um oscilador de forma de onda de alta frequ√™ncia e canal √∫nico de classe consumidor com a pot√™ncia de sa√≠da de 80W, que replicar√° a funcionalidade da esta√ß√£o de solda original o m√°ximo poss√≠vel. <br><br>  Se voc√™ fizer alguma pesquisa on-line, encontrar√° facilmente um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">diagrama esquem√°tico</a> da gera√ß√£o anterior da esta√ß√£o Metcal MX-500, cuidadosamente copiada de sua PCB.  A implementa√ß√£o direta das id√©ias de design desse diagrama n√£o funcionar√°, pois a pot√™ncia de sa√≠da desse equipamento √© de apenas 40W e n√£o pode ser facilmente ampliada.  No entanto, este diagrama antigo nos ajudar√° a entender o funcionamento dos principais conjuntos. <br><br>  Portanto, os seguintes elementos podem ser vistos no diagrama: <br><br><ol><li>  Um gerador HF de alta pot√™ncia com tr√™s circuitos ressonantes de sa√≠da; </li><li>  Um conversor step-down de pulso para alimentar o gerador (1), com a tens√£o de sa√≠da variando de 17 a 21V; </li><li>  Um circuito de feedback para regular a tens√£o do conversor de redu√ß√£o (2), dependendo da tens√£o em um dos circuitos ressonantes de sa√≠da do gerador (1); </li><li>  Um circuito de prote√ß√£o para desligar o gerador (1) em caso de desconex√£o do indutor; </li><li>  Uma fonte de alimenta√ß√£o do transformador com tens√£o de sa√≠da de 53V. </li></ol><br>  Vamos considerar rapidamente algumas solu√ß√µes comuns de projeto de circuitos.  Por exemplo, o circuito pode ser alimentado com um transformador de n√∫cleo toroidal de baixa frequ√™ncia.  Espere, vamos usar um transformador ressonante LLC com um raro microchip HiperLCS da Power Integrations: h√° muito tempo pretendo trabalhar com ele.  Vamos tamb√©m usar um transformador abaixador mais atualizado para controlar a pot√™ncia de sa√≠da e ver se podemos obter 5A de um pacote SO-8.  Espere um minuto, um projeto pode sobreviver sem um Arduino, um esbo√ßo e um LED?  Vamos tamb√©m adicionar um chip STM32 e uma pequena tela para mostrar a pot√™ncia de sa√≠da atual.  Para simplificar, mediremos a pot√™ncia no circuito de pot√™ncia do gerador de alta frequ√™ncia;  quanto √† efici√™ncia, levaremos isso em considera√ß√£o (ou devemos ignor√°-lo) no software.  Usaremos uma caixa de metal do tamanho certo, que servir√° como escudo e dissipador de calor ao mesmo tempo. <br><br><img src="https://habrastorage.org/webt/gc/u2/w1/gcu2w1dww-mhiyltoow_rpraa8c.jpeg"><br><br>  Para a soldagem real, irei √† Amazon e comprarei um kit de atualiza√ß√£o do Metcal MX-UK1, incluindo uma bancada de trabalho e o pr√≥prio ferro de solda (que √© apenas uma pe√ßa de m√£o conectada a um fio) e cartuchos de solda.  Com base na minha experi√™ncia de trabalho, acho mais f√°cil lidar com itens pequenos com uma ponta de ferro de solda com casco de 30 ¬∞ e, para soldar qualquer coisa maior, levarei algo mais amplo, mais pesado e mais quente, ent√£o aqui est√° minha escolha: um Metcal SMTC-0167 para solda fina e um Thermaltronics M7K100 para trabalhar com itens de maior escala.  A prop√≥sito, dicas mais baratas da Thermaltronics tamb√©m far√£o o truque. <br><br><img src="https://habrastorage.org/webt/dt/go/ha/dtgohazuklmmwjlzrnkjeqatbrc.jpeg"><br><br>  Enquanto meus itens est√£o sendo enviados, vou desenhar um fluxograma do dispositivo no projeto. <br><br><img src="https://habrastorage.org/webt/zl/uy/bh/zluybhztltpnmerd00thb0u5smo.png"><br><br>  √â importante descrever o feedback entre a sa√≠da do gerador HF e a entrada de controle do conversor de redu√ß√£o.  O fato √© que, ap√≥s uma ponta de solda ter sido aquecida at√© a temperatura operacional, o oscilador continua emitindo uma tens√£o de amplitude razoavelmente alta (em torno de 100V), e a pot√™ncia resultante come√ßa a se dissipar na resist√™ncia ativa da bobina do indutor, que, devido √† efeito de pele, √© muito maior do que um mult√≠metro comum pode registrar.  Como resultado, a pequena bobina fica em brasa e queima.  Para evitar isso, as esta√ß√µes originais usam um feedback negativo que reduz a tens√£o de alimenta√ß√£o do oscilador em resposta √† crescente taxa de ondas estacion√°rias que vem com a altera√ß√£o na imped√¢ncia do indutor.  O modelo de 40W usa um m√©todo relativamente simples da patente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">US4626767A</a> , enquanto o modelo de 80W usa um feedback mais sofisticado envolvendo um transformador de corrente.  Vamos dar uma olhada neste v√≠deo que voc√™ pode encontrar na web: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/-55dR4yTJDQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  A linha azul mostra a tens√£o de alimenta√ß√£o no est√°gio de sa√≠da do gerador de alta frequ√™ncia e, como voc√™ pode ver no v√≠deo, precisamos fornecer que a tens√£o de alimenta√ß√£o seja capaz de aumentar em pelo menos o dobro (portanto, a pot√™ncia de sa√≠da ser√° crescendo proporcionalmente √† voltagem ao quadrado, ou seja, quatro vezes o valor da voltagem).  Como n√£o consegui garantir a mesma qualidade de regula√ß√£o com um circuito de feedback simples que modelei no LTSpice, apenas copiei o circuito de feedback da fotografia do PCB. <br><br><h4>  Gerador de alta frequ√™ncia </h4><br>  Vamos come√ßar a projetar o m√≥dulo de alta frequ√™ncia, trabalhando primeiro o circuito ressonante de sa√≠da.  D√™ uma olhada nesta foto de alta resolu√ß√£o: <br><br> <a href=""><img src="https://habrastorage.org/webt/ng/9m/ia/ng9miake_7v8hi53skrpz8ko3lm.jpeg"></a> <br><br>  Voc√™ pode ver tr√™s bobinas enroladas em torno dos n√∫cleos toroidais amarelos, com 4, 6 e 7 voltas, respectivamente, da esquerda para a direita.  Pelo sistema de classifica√ß√£o da Amidon, o amarelo √© usado para n√∫cleos de ferro em p√≥ com a permeabilidade de 8,5 (material n¬∫ 6).  O tamanho das bobinas pode ser calculado primeiro usando uma r√©gua para medir o di√¢metro das bobinas na tela e comparando-a com a medida de algum componente bem reconhec√≠vel, como o transistor de sa√≠da no pacote TO-247.  Aparentemente, esse design usa n√∫cleos T130-6;  isso, na minha opini√£o, √© um exagero - tais tor√≥ides grandes s√£o destinados a uma pot√™ncia muito maior.  Mas n√£o tenho inten√ß√£o de usar cal√ßas inteligentes aqui: certamente n√£o posso comprar os n√∫cleos originais dos EUA; portanto, pedirei suas r√©plicas chinesas baratas do AliExpress e veremos se eles podem fazer o trabalho (alerta de spoiler: eles foram muito bem) .  Seus valores de indut√¢ncia foram calculados em 180, 400 e 540 nH, respectivamente. <br><br>  Nos circuitos ressonantes, os indutores operam ao lado de capacitores.  N√£o podemos derivar seus valores de capacit√¢ncia da fotografia, no entanto, podemos encontrar facilmente uma mensagem postada pelo meticuloso material el√©trico da mikes (o autor do v√≠deo acima) que gentilmente compartilhou suas observa√ß√µes (destacadas em amarelo): <br><br><img src="https://habrastorage.org/webt/hq/aq/md/hqaqmdiwweyahwjsjwp5ayrhqx0.png"><br><br>  Depois de alimentar esses valores com um modelo de especiaria, fica claro que as frequ√™ncias ressonantes dos circuitos s√£o levemente afastadas de 13,56 MHz.  O fato √© que, quanto mais pr√≥xima a frequ√™ncia da auto-ressonante, menor √© a tens√£o necess√°ria para alimentar o gerador de alta frequ√™ncia e maior √© o consumo de corrente.  O projeto original alimenta o est√°gio de sa√≠da com um conversor abaixador com um limite de corrente de 3 A, de modo que os projetistas colocam os est√°gios de sa√≠da um pouco fora da resson√¢ncia para poder aumentar a tens√£o de alimenta√ß√£o e diminuir o uso de corrente.  Por outro lado, estamos planejando empregar um chip 5A, no entanto, ele ficou com pouca corrente enquanto no modo ressonante, ent√£o, da mesma forma, colocaremos os est√°gios de sa√≠da da resson√¢ncia um pouco.  Descobriremos os valores exatos da capacit√¢ncia experimentalmente, com base nos limites do projeto para a tens√£o m√°xima de alimenta√ß√£o do circuito de sa√≠da (22V) e o uso m√°ximo de corrente (4A). <br><br>  Observe que bastante energia flui dentro dos circuitos ressonantes, ansiosos para serem liberados no ambiente na forma de calor.  Portanto, para aumentar o fator Q, vamos usar fios esmaltados bastante grossos (1,25 mm) para as bobinas e conectar v√°rios capacitores em paralelo. <br><br>  Escolher o transistor de sa√≠da correto √© outra quest√£o intrigante.  Caso o cartucho seja substitu√≠do ou removido, a sobretens√£o pode subir para 300-350V, mas os autores do projeto original optaram por n√£o se preocupar com prote√ß√£o sofisticada e simplesmente equiparam o est√°gio de sa√≠da com um transistor de RF IXFH12N50F bastante raro, r√°pido e caro da IXYS com o limite de tens√£o de dreno de 500V.  N√£o podemos permitir esse luxo, ent√£o vamos pegar um transistor de efeito de campo padr√£o de 200V STP19NF20 que custa apenas meio d√≥lar e conect√°-lo em paralelo a um supressor de surto de 150V.  Perfeito!  O supressor cortar√° levemente as oscila√ß√µes dos circuitos ressonantes, impedindo-os de girarem muito, enquanto o m√≥dulo de prote√ß√£o interromper√° o oscilador em cerca de 10 ms ap√≥s o desaparecimento da carga. <br><br><img src="https://habrastorage.org/webt/rf/tg/il/rftgil-a5rpht6bup_enjbtq8kk.jpeg"><br><br>  Devido √† grande capacit√¢ncia de entrada e √† alta frequ√™ncia, n√£o podemos controlar a porta do transistor de sa√≠da diretamente com um driver de porta comum.  A foto da placa original revela uma bobina indutora sem n√∫cleo entre os dois transistores de pot√™ncia.  Esse √© um pequeno truque comumente usado: junto com a capacit√¢ncia da fonte de porta, o indutor cria um circuito ressonante que sustenta o fluxo de energia atrav√©s do circuito de porta, o que resulta em um aumento na efici√™ncia do pr√©-amplificador.  Ao mesmo tempo, esse mesmo circuito imp√µe uma restri√ß√£o impl√≠cita ao poss√≠vel modelo do transistor de sa√≠da: seu valor de resistor de porta deve ser o mais baixo poss√≠vel para manter um fator Q razo√°vel do circuito.  Sem entrar em muitos detalhes, vamos reproduzir a solu√ß√£o do fabricante.  Selecionaremos o valor de indut√¢ncia correto com base na efici√™ncia m√°xima do circuito real, apertando / esticando os enrolamentos da bobina. <br><br>  A partir de ent√£o, o design do circuito se torna mais trivial.  Conduziremos o pr√©-amplificador projetado em torno de um transistor IRF510 com baixa capacit√¢ncia de entrada usando um driver duplo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MAX17602</a> , pois suas caracter√≠sticas de velocidade parecem boas.  Um MAX17600 ou um MAX17601 funcionaria ainda melhor, e poder√≠amos conectar suas sa√≠das em paralelo, mas eu n√£o as tinha imediatamente dispon√≠veis; portanto, trabalharemos com o que tivermos. <br><br>  A frequ√™ncia de oscila√ß√£o correta ser√° definida por um ressonador de cristal.  Infelizmente, n√£o consegui encontrar um cristal de 13,56 MHz para o oscilador ativo.  Mas n√£o se preocupe, pegaremos um ressonador de 27,12 MHz mais comum e reduziremos pela metade a frequ√™ncia.  Faremos bom uso de um microcontrolador, ou melhor, de um de seus temporizadores programados de acordo.  Tamb√©m devo mencionar que um MCU s√≥ pode ser conectado diretamente a um ressonador de cristal que trabalha na frequ√™ncia fundamental do cristal.  Os ressonadores russos de terceiro tom harm√¥nico de 27.120 kHz usados ‚Äã‚Äãapenas podem ser conectados atrav√©s de um hack r√°pido na forma de um circuito ressonante extra. <br><br><h4>  Fonte de alimenta√ß√£o </h4><br>  Ap√≥s uma longa s√©rie de experimentos infrut√≠feros com produtos fabricados na China, decidi alimentar o est√°gio de sa√≠da do oscilador HF a partir de um conversor step-down baseado no chip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TPS54560</a> da TI.  Para evitar batidas aud√≠veis, definiremos a frequ√™ncia do oscilador interno em torno de 450 kHz, a uma dist√¢ncia da faixa de frequ√™ncia de trabalho do conversor LLC.  Como alternativa, eu poderia ter feito exatamente o oposto, ou seja, sincronizar o conversor step-down com o oscilador do conversor LLC, mas naquele momento eu estava ficando pregui√ßoso, ent√£o desisti dessa id√©ia. <br><br>  O pr√≥prio conversor TPS54560, apesar de seu pequeno tamanho, possui um valor significativo da corrente de sa√≠da, ent√£o √†s vezes voc√™ pode imaginar que isso √© um avan√ßo sem precedentes na luta pela efici√™ncia energ√©tica ... No entanto, a verdade √© que o chip realmente precisa ser adequadamente resfriado .  A placa de demonstra√ß√£o oferecida pela Texas Instruments cont√©m dois grandes planos terrestres com 2 on√ßas de espessura em ambos os lados;  a transfer√™ncia de calor atrav√©s das camadas √© garantida por seis orif√≠cios, logo abaixo do fundo do chip (onde ele possui um pino de dissipa√ß√£o de calor).  Esse layout torna um pouco mais dif√≠cil fazer uma placa de bricolage, ent√£o obviamente terei que encomend√°-la a um fabricante chin√™s.  Bugger! <br><br>  Para alimentar o driver e o pr√©-amplificador, vamos retirar a tens√£o n√£o regulamentada de 12V da segunda bobina do conversor LLC.  O consumo de corrente no restante da placa ser√° insignificante; portanto, para alimentar o controlador de 5V e iluminar a tela LCD, usaremos o regulador linear produzido internamente KR142EN5A, enquanto a linha de 3,3V para o MCU ser√° regulada por o min√∫sculo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LD2985</a> . <br><br>  Para reduzir a tens√£o da linha nos 30V e 12V necess√°rios, empregaremos um conversor LLC baseado no chip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LCS708HG</a> . <br><br><img src="https://habrastorage.org/webt/65/l8/ed/65l8edk_ucvq50zsc5hf2jbxxp8.jpeg"><br><br>  Tenho certeza de que muitos leitores gostariam de saber mais sobre os conversores LLC, por isso explicarei seu princ√≠pio operacional em mais detalhes.  A LLC n√£o √© um acr√¥nimo, pois essas letras representam "indutor-indutor-capacitor" e, em suma, implementam o projeto el√©trico para conectar o enrolamento prim√°rio de um transformador.  O ponto √© que, algumas vezes, parte do fluxo gerado pelo enrolamento prim√°rio pode n√£o estar ligado ao enrolamento secund√°rio, o que causa a chamada indut√¢ncia de vazamento - indut√¢ncia dispersa que √© incapaz de transferir a energia acumulada para o circuito secund√°rio.  Nos conversores flyback padr√£o, essa energia deve ser dissipada em supressores ou resistores de amortecedor, de modo que os transformadores (ou, mais especificamente, bobinas de bobina dupla) s√£o geralmente projetados de forma a reduzir o m√°ximo poss√≠vel a indut√¢ncia de vazamento.  No entanto, as coisas s√£o completamente diferentes com as LLCs. <br><br>  Em um conversor ressonante, a indut√¢ncia de vazamento combinada com a capacit√¢ncia conectada serialmente ao enrolamento prim√°rio cria um circuito de tanque que resolve dois problemas importantes.  Primeiro, ele faz a comuta√ß√£o dos transistores de sa√≠da de alta tens√£o do conversor em valores de tens√£o pr√≥ximos a zero (o chamado Zero Voltage Switching, ZVS), que reduz significativamente as perdas de energia causadas pela comuta√ß√£o.  Segundo, a energia acumulada no indutor desacoplado flui de volta para o circuito, portanto isso elimina qualquer necessidade de amortecedores, pois na verdade n√£o h√° perda de energia.  Em sua nota de aplica√ß√£o AN-55, a Power Integrations fornece um esbo√ßo detalhado de como projetar um transformador para aumentar sua indut√¢ncia de vazamento (isso √© necess√°rio para garantir a caracter√≠stica correta do transformador).  Eu, por exemplo, enrole voltas prim√°rias e secund√°rias afastadas, em duas se√ß√µes diferentes: <br><br><img src="https://habrastorage.org/webt/7i/iu/z-/7iiuz-igqg1rhgqisg31neowkm8.jpeg"><br><br>  Geralmente, esse design sofisticado de layout resulta em um valor de efici√™ncia bastante decente, por exemplo, um chip LCS708HG sem dissipador de calor, apesar do tamanho miniatura, fornece uma pot√™ncia de sa√≠da de cerca de 200 W!  Esse √© um resultado realmente extraordin√°rio, mas voc√™ s√≥ pode obt√™-lo quando operar exatamente na frequ√™ncia de resson√¢ncia autom√°tica do circuito de sa√≠da.  √â aqui que est√° o problema. <br><br>  O caso √© que, neste caso, a tens√£o de sa√≠da √© regulada alterando a frequ√™ncia do pulso em vez da raz√£o do pulso, e o regulamento ocorre em uma faixa muito estreita de tens√£o - cerca de ¬± 15%.  Al√©m disso, em resposta √†s flutua√ß√µes da tens√£o de entrada em rela√ß√£o ao seu valor nominal, a frequ√™ncia de convers√£o se afasta da resson√¢ncia, impondo o modo de comuta√ß√£o for√ßada nos transistores dentro do chip, consequentemente aquecendo-os bastante.  Com efeito, o conversor precisa receber tens√£o regulada em sua entrada! <br><br>  Em produtos fabricados na f√°brica, os conversores s√£o equipados com corretores de fator de pot√™ncia ativo (APFCs) na entrada, os quais, al√©m de corrigir a energia, tamb√©m mant√™m uma tens√£o de sa√≠da de 380-390V.  Mas, afinal, estamos lidando com um design DIY aqui, ent√£o vamos alegremente ignorar um solu√ßo trivial como a sensibilidade √† qualidade da energia da linha.  Com base nos c√°lculos e com a permiss√£o para pulsa√ß√£o de tens√£o na capacit√¢ncia do buffer, a tens√£o de entrada est√° na faixa de aproximadamente 230V ¬± 10%; portanto, se a rede el√©trica operar dentro dos padr√µes, tudo funcionar√° sem problemas.  Vamos deixar l√° por enquanto. <br><br>  Copiaremos o restante do design do conversor da folha de dados relevante.  Eu provavelmente focaria apenas no capacitor ressonante - esse componente aparentemente simples.  Se voc√™ j√° se perguntou qual √© a diferen√ßa entre capacitores de filme de polipropileno e capacitores de filme de polietileno tereftalato (PET), eis a resposta: os primeiros t√™m uma tangente de perda dez vezes menor.  √â exatamente por isso que minha tentativa de substituir o volumoso K78-2 (outro produto produzido no mercado interno) por um modelo PET mais barato e menor K73-17 causou um comportamento curioso: o capacitor entrou em superaquecimento e come√ßou a gerar ru√≠do de crepita√ß√£o suspeito.  Interessante. <br><br>  Os chips da s√©rie HiperLCS requerem uma linha de fonte de alimenta√ß√£o dedicada de 12V.  Para evitar o problema de mexer em um enrolamento adicional, um retificador e circuitos de inicializa√ß√£o, vamos nos ater ao livro.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Obteremos</a> a tens√£o necess√°ria de um pequeno conversor separado em um chip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LNK304</a> .  Sua principal caracter√≠stica √© o design sem transformador, pois o √∫nico indutor de que precisamos √© de um estrangulador barato fabricado na f√°brica.  A corrente m√°xima de sa√≠da permanece dentro de um pequeno intervalo, cerca de 100mA, e a simplicidade do design, juntamente com a capacidade de manter o n√∫mero de componentes no m√≠nimo, o tornam uma solu√ß√£o atraente (enquanto o n√∫mero de conversores por polegada quadrada de superf√≠cie est√° come√ßando para me irritar. O Deus dos conversores exige mais deles!) <br><br><h4>  C√©rebro </h4><br>  Bem, s√≥ mais algumas coisas para fazer.  A esta√ß√£o original possui um LCD que, pelo pre√ßo que voc√™ pagou, exibe uma semelhan√ßa com a pot√™ncia de sa√≠da.  Vamos fazer algo semelhante: pegaremos o controlador STM32F030 em sua configura√ß√£o m√≠nima (em um pacote TSSOP-20).  Uma das entradas do conversor A / D mede a tens√£o de alimenta√ß√£o do est√°gio de sa√≠da no gerador HF, enquanto a outra entrada mede a corrente.  Para evitar a quebra do circuito de aterramento, conectaremos o resistor sensor de corrente ao fio positivo e implementaremos a mudan√ßa de n√≠vel usando o chip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">INA138 de</a> finalidade <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">especial</a> , um design da Burr-Brown em seus dias gloriosos.  Para exibir informa√ß√µes, vamos usar um OLED de texto com uma resolu√ß√£o de 16x2 feita pelo WinStar.  √â isso em poucas palavras.  Espere, deixamos um pino do processador desocupado.  Bem, deixe piscar um LED ent√£o.  N√£o me pergunte o porqu√™. <br><br>  O firmware do controlador foi escrito na linguagem C usando o STM32CubeMX e a vers√£o gratuita do IAR Embedded Workbench.  O c√≥digo √© bastante trivial.  Na hora do timer do sistema, uma vez em 300ms, o loop principal l√™ dados dos dois canais do conversor A / D, multiplica-os e envia para o display como a leitura de pot√™ncia.  Na parte inferior da tela, o valor da energia √© visualizado em uma barra renderizada com fontes personalizadas.  Ap√≥s o desligamento da ponta de solda, o manipulador da interrup√ß√£o proveniente da sa√≠da do detector de carga para o temporizador de refer√™ncia do oscilador HF.  Para garantir um congelamento ou falha no MCU, adicionei manipuladores para erros de hardware e para os sinais do timer do watchdog;  o firmware tamb√©m emprega a tecnologia CSS (Clock Security System) que, no caso de uma umidade nas oscila√ß√µes do ressonador prim√°rio de cristal, muda para o oscilador RC embutido e relan√ßa o microcontrolador.  O tamanho total do firmware √© 10 KB.  Carreguei o c√≥digo-fonte do firmware junto com os outros arquivos de projeto no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub</a> para que os mais curiosos de voc√™s d√™em uma olhada (mas n√£o espere nada de extraordin√°rio). <br><br><h4>  Layout </h4><br><div class="spoiler">  <b class="spoiler_title">O dispositivo inclui v√°rias bobinas personalizadas</b> <div class="spoiler_text"><ul><li>  O dreno MOSFET √© bloqueado e o transformador de corrente √© enrolado em um n√∫cleo de anel HF-ferrita de 16x8x6mm com permeabilidade de 50. N√£o h√° problema em usar fio esmaltado de 0,6 mm, os chokes t√™m 15 voltas, transformador de corrente - 2x14 voltas; </li><li>  O indutor sem n√∫cleo possui 10 voltas de fio de 0,6 mm distribu√≠dos uniformemente ao longo de 10 mm de comprimento.  O di√¢metro interno √© de 5 mm; </li><li>  O transformador principal √© baseado em um pequeno n√∫cleo EFD25 do material N87 Epcos.  Adicionei uma folga de 0,2 mm em cada perna inserindo duas camadas de papel de nota.  Isso nos d√° uma diferen√ßa de 0,4 mm no total.  Para o enrolamento prim√°rio (33 voltas) e o primeiro enrolamento secund√°rio (2x6 voltas), o fio litz com isolamento triplo √© usado com tamanhos de 100/46 e 175/46, respectivamente (aqui o primeiro n√∫mero √© a contagem de fios e o segundo √© o di√¢metro AWG).  O segundo enrolamento secund√°rio de 10V tem duas voltas de qualquer fio flex√≠vel flex√≠vel apropriado (usei um isolado com PTFE). </li></ul></div></div><br>  Os c√°lculos para todos os componentes do conversor LLC, incluindo os valores de indut√¢ncia dos enrolamentos do transformador, s√£o fornecidos no arquivo de layout anexado ao projeto, que voc√™ pode visualizar usando o PI Xls Designer.  Tamb√©m inclu√≠ todas as folhas de dados das pe√ßas eletr√¥nicas que usei no projeto, enviei modelos LTspice de algumas partes do circuito e algumas fotos, √© claro. <br><br>  O resultado do projeto descrito acima √© o seguinte diagrama esquem√°tico el√©trico: <br><br> <a href=""><img src="https://habrastorage.org/webt/6a/bn/p0/6abnp0p3g-16iu0umf5eq4eo3zq.png"></a> <br><br>  O diagrama e o layout da placa de circuito impresso foram preparados usando o DipTrace, com os desenhos convertidos para o formato Gerber para posterior expedi√ß√£o √† f√°brica.  O layout da placa de circuito impresso √© feito para se encaixar bem na caixa do dispositivo, com uma camada inteira coberta com um plano de aterramento para proteger os fr√°geis circuitos de baixa corrente.  Esse layout facilita muito a fabrica√ß√£o da placa em casa, pois n√£o requer nenhum alinhamento preciso dos modelos de fotos: voc√™ pode preencher quase toda a superf√≠cie reversa da placa com um plano s√≥lido e, em seguida, usar uma broca espessa para fazer chanfros de furo ao redor dos pinos que n√£o precisam ser aterrados. <br><br><img src="https://habrastorage.org/webt/py/hr/jg/pyhrjgytrdz7antf8jetd_xzu-4.jpeg"><br><br><img src="https://habrastorage.org/webt/rv/-a/nv/rv-anvkpggckyvycywv2kgr8bja.jpeg"><br><br>  Como algumas pe√ßas HF usadas no projeto emitem muito ru√≠do de r√°dio e os componentes de energia s√£o superaquecidos facilmente, naturalmente minha escolha do material para o gabinete ser√° de alum√≠nio.  Vou escolher um estojo G0476 aproximadamente correspondente do cat√°logo de Gainta.  Cortaremos uma janela no caso do OLED usando uma ferramenta rotativa.  Em seguida, conectaremos o gabinete diretamente ao fio terra do cabo de alimenta√ß√£o juntamente com a blindagem do cabo de solda e o terra da placa de circuito impresso. <br><br>  Infelizmente, a id√©ia de conectar um OLED com mais contraste em vez de um LCD veio a mim muito depois de eu ter enviado meu pedido de PCB para a f√°brica.  Os n√≠veis de CMOS de entrada de um OLED <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WEH001602AGPP5N00001</a> do WinStar s√£o diferentes dos n√≠veis TTL padr√£o de um LCD, portanto, o truque ao alimentar + 5V no controlador do monitor e sua ilumina√ß√£o e depois ler os sinais l√≥gicos do microprocessador alimentado por + 3,3V n√£o vai funcionar aqui.  Eu tive que conectar o monitor a uma linha de 3,3V usando um fio separado. <br><br>  Para reduzir o ru√≠do, instalei resistores de supress√£o de interfer√™ncia de 390 Ohm no barramento que conecta a PCB e a tela e cobri o microcontrolador com uma blindagem de folha de cobre.  Sob opera√ß√£o normal, o conector de programa√ß√£o deve ser coberto com uma parte f√™mea que aterra diretamente os pinos de depura√ß√£o e o pino NRST - atrav√©s de um capacitor. <br><br>  No final, meu dispositivo adquiriu sua apar√™ncia final: <br><br><img src="https://habrastorage.org/webt/dp/pj/ay/dppjaykwjjd0xym_k3nxxe5n4g4.jpeg"><br><br>  Aqui est√° o procedimento resultante para o aquecimento do ferro de solda: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/odTL6zllHzc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h4>  Bottom line </h4><br>  Agora vamos totalizar os gastos com este pequeno peda√ßo de divers√£o: <br><br>  Componentes eletr√¥nicos - cerca de US $ 50 (os mais caros foram o chip HiperLCS por US $ 15 e o OLED por US $ 10); <br>  Fabrica√ß√£o de PCB, custo por 10 pe√ßas.  - pouco mais de US $ 40; <br>  Case - US $ 8. <br><br>  O <b>custo total</b> da fonte de alimenta√ß√£o de alta frequ√™ncia foi de cerca de US $ 100.  Tamb√©m paguei por um ferro de solda com uma bancada (US $ 170) e dois cartuchos (US $ 100). <br><br>  √â claro que eu poderia otimizar os gastos at√© certo ponto, por exemplo, o eBay possui uma ampla variedade de pe√ßas usadas do Metcal; nesse caso, estamos falando de apenas algumas dezenas de d√≥lares, mas isso provavelmente √© uma quest√£o de prefer√™ncia pessoal. <br><br><h4>  Errata </h4><br><ol><li>  A rede de capacitores de carga de cristal foi roteada de maneira incorreta e √© muito sens√≠vel ao ru√≠do HF.  O caminho certo √© <a href="">isso</a> .  Agradecemos a Alexander Chulkin por esta importante melhoria. </li><li>  N√£o h√° suporte para a capacidade de desconectar o cabo do ferro de soldar de uma esta√ß√£o operacional, pois √†s vezes ele pode reiniciar o microcontrolador.  Vale a pena considerar a introdu√ß√£o de algumas blindagens adicionais da parte HF (embora n√£o tenha 100% de certeza). </li></ol><br><h4>  Conclus√µes </h4><br>  Agora, deixe-me compartilhar com voc√™ o objetivo final que eu estava buscando neste projeto - a experi√™ncia que obtive ao trabalhar com o dispositivo.  √â como usar um ferro de soldar muito poderoso e em brasa, enquanto segura uma ferramenta pequena e leve nas m√£os.  Se valeu a pena o dinheiro e o esfor√ßo gastos, √© dif√≠cil dizer.  Vou deixar a pergunta em aberto. <br><br><img src="https://habrastorage.org/webt/gy/uj/vn/gyujvninztoywjpa9ruzoae0dts.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt451246/">https://habr.com/ru/post/pt451246/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt451226/index.html">Nova vida de jogos antigos: o diret√≥rio de c√≥digo-fonte mais aberto das portas de c√≥digo-fonte (Java + PHP)</a></li>
<li><a href="../pt451230/index.html">Cinco erros cometidos pelas pessoas na prepara√ß√£o para a imigra√ß√£o trabalhista dos EUA</a></li>
<li><a href="../pt451232/index.html">O uso do modelo de financiamento cont√≠nuo no crowdfunding</a></li>
<li><a href="../pt451240/index.html">Por que eu gosto de interfaces Go</a></li>
<li><a href="../pt451242/index.html">MMORPG sozinho (perseguidor 2d)</a></li>
<li><a href="../pt451248/index.html">O lado sombrio dos hackathons</a></li>
<li><a href="../pt451252/index.html">As strings no Python devem ser iter√°veis?</a></li>
<li><a href="../pt451254/index.html">Categoria: fornecedor de IaaS de ferro unboxing</a></li>
<li><a href="../pt451256/index.html">O que √© um sistema de relat√≥rio ideal. √â realista entender o que est√° acontecendo na empresa?</a></li>
<li><a href="../pt451258/index.html">Me pegue se puder. Carta do gerente</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>