<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👕 🌈 👩🏼‍🤝‍👩🏻 Engenharia reversa de uma estação de solda high-end 🦔 🧔 💎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="(Esta é a tradução do artigo original realizado por baragol ) 

 Tivemos um monte de fotografias do PCB principal, um vídeo do YouTube com formas de o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Engenharia reversa de uma estação de solda high-end</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451246/"><img src="https://habrastorage.org/webt/zy/do/hq/zydohqpxzvzoygol3o6ci9wkebw.jpeg"><br><br>  <i>(Esta é a tradução do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> original realizado por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">baragol</a> )</i> <br><br>  Tivemos um monte de fotografias do PCB principal, um vídeo do YouTube com formas de onda de tensão de dreno de MOSFETs, um post no fórum com uma descrição dos valores de capacitância dos capacitores de circuito LC e também vários vídeos de unboxing mostrando o aquecimento do ponta de solda.  A única coisa que realmente me preocupou foi o vídeo com a medição do consumo máximo de energia durante o aquecimento.  Não há nada no mundo mais desamparado, irresponsável e depravado do que os cartuchos queimados comprados por 60 dólares na Amazon.  Mas deixe-me começar do começo. <br><a name="habracut"></a><br><h4>  Introdução ao assunto </h4><br>  Para entender que tipo de dispositivo vamos projetar hoje, primeiro vamos relembrar brevemente os tipos de estações de solda em oferta e como elas são diferentes. <br><br>  Como você deve ter adivinhado, todo o segmento de preço mais baixo desse equipamento é possuído por marcas chinesas, que clonam amplamente o design bastante bem-sucedido do ferro de solda japonês Hakko.  O princípio operacional por trás do modelo original e de suas inúmeras réplicas é muito direto: um aquecedor de níquel ou de película fina transfere seu calor para uma ponta de solda destacável, sua temperatura sendo regulada com uma unidade de termopar ou um termistor embutido no aquecedor.  Essa é uma solução simples e barata, mas sua qualidade pode ficar um pouco longe da perfeita nas réplicas chinesas, por exemplo, um aquecedor de tamanho ligeiramente errado, um material ligeiramente mais barato da ponta, o que resulta em envolver o aquecedor em papel alumínio, encomendar uma dica original em japonês do exterior, substituindo o conector por um mais poderoso ... em outras palavras, você terá seu prato cheio rapidamente. <br><br>  Em algum lugar no meio do espectro de preços estão as estações de solda originais de marcas ocidentais de renome.  A ERSA alemã, a US Weller, a japonesa Hakko - esse tipo de marca.  O princípio operacional deles é basicamente idêntico, exceto que você realmente não precisa acessar seus recursos para fazê-los funcionar;  eles incluem itens legais prontos para uso, como um cabo de silicone macio que não derrete com o menor toque do ferro de solda e ... bem, na verdade não existem tantos itens promocionais!  O preço?  Corresponde à promessa.  As centenas de dólares para gastar com essas coisas podem angustiar não apenas um humilde entusiasta de bricolage que gosta de passar as noites aprimorando seu hardware, mas também um negócio de médio porte. <br><br>  No entanto, o artigo de hoje é sobre algo diferente.  Vou falar sobre o verdadeiro fenômeno high-end no mundo das estações de solda, a saber, os ferros de solda por indução fabricados nos EUA da Metcal (atualmente são produzidos sob esta marca pela OK International).  Na verdade, várias empresas estão produzindo esses equipamentos, por exemplo, além do Metcal, também posso mencionar a Thermaltronics, a JBC e até a Hakko, que vendem um design semelhante.  O design operacional do aquecedor de indução nesses dispositivos é bastante elegante: <br><br> <a href=""><img src="https://habrastorage.org/webt/u_/zy/lj/u_zyljn2jccu9qkjsywbyn1w7ro.jpeg"></a> <br><br>  Como você pode ver, não possui nenhum sensor de temperatura;  sua ponta de solda é feita de cobre com revestimento ferromagnético que, quando exposto a um campo magnético alternado de alta frequência (13,56 MHz), é aquecido e, a uma certa temperatura, chamada temperatura Curie, perde suas qualidades magnéticas e para aquecendo ainda mais.  Quando você toca no ponto de solda, o item ferromagnético perde parcialmente seu calor e o indutor começa imediatamente a transmitir sua energia à ponta de solda.  Os cartuchos vêm com quatro temperaturas fixas, das quais você realmente precisa apenas de duas - para solda com chumbo e sem chumbo.  É só isso. <br><br>  A OKI / Metcal produz vários modelos de estações de solda por indução que têm preços diferentes e com potência de saída diferente; no entanto, a faixa de preço de US $ 1000 libera um de qualquer desejo de tirar proveito deste belo dispositivo, por mais bonito que possa parecer.  O que me leva à idéia de tentar economizar algum dinheiro! <br><br><h4>  Problemm </h4><br>  Vamos colocar desta forma: usando apenas fontes publicamente disponíveis, para realizar a engenharia reversa virtual do dispositivo original MX-5200 e terminar com o design de um oscilador de forma de onda de alta frequência e canal único de classe consumidor com a potência de saída de 80W, que replicará a funcionalidade da estação de solda original o máximo possível. <br><br>  Se você fizer alguma pesquisa on-line, encontrará facilmente um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">diagrama esquemático</a> da geração anterior da estação Metcal MX-500, cuidadosamente copiada de sua PCB.  A implementação direta das idéias de design desse diagrama não funcionará, pois a potência de saída desse equipamento é de apenas 40W e não pode ser facilmente ampliada.  No entanto, este diagrama antigo nos ajudará a entender o funcionamento dos principais conjuntos. <br><br>  Portanto, os seguintes elementos podem ser vistos no diagrama: <br><br><ol><li>  Um gerador HF de alta potência com três circuitos ressonantes de saída; </li><li>  Um conversor step-down de pulso para alimentar o gerador (1), com a tensão de saída variando de 17 a 21V; </li><li>  Um circuito de feedback para regular a tensão do conversor de redução (2), dependendo da tensão em um dos circuitos ressonantes de saída do gerador (1); </li><li>  Um circuito de proteção para desligar o gerador (1) em caso de desconexão do indutor; </li><li>  Uma fonte de alimentação do transformador com tensão de saída de 53V. </li></ol><br>  Vamos considerar rapidamente algumas soluções comuns de projeto de circuitos.  Por exemplo, o circuito pode ser alimentado com um transformador de núcleo toroidal de baixa frequência.  Espere, vamos usar um transformador ressonante LLC com um raro microchip HiperLCS da Power Integrations: há muito tempo pretendo trabalhar com ele.  Vamos também usar um transformador abaixador mais atualizado para controlar a potência de saída e ver se podemos obter 5A de um pacote SO-8.  Espere um minuto, um projeto pode sobreviver sem um Arduino, um esboço e um LED?  Vamos também adicionar um chip STM32 e uma pequena tela para mostrar a potência de saída atual.  Para simplificar, mediremos a potência no circuito de potência do gerador de alta frequência;  quanto à eficiência, levaremos isso em consideração (ou devemos ignorá-lo) no software.  Usaremos uma caixa de metal do tamanho certo, que servirá como escudo e dissipador de calor ao mesmo tempo. <br><br><img src="https://habrastorage.org/webt/gc/u2/w1/gcu2w1dww-mhiyltoow_rpraa8c.jpeg"><br><br>  Para a soldagem real, irei à Amazon e comprarei um kit de atualização do Metcal MX-UK1, incluindo uma bancada de trabalho e o próprio ferro de solda (que é apenas uma peça de mão conectada a um fio) e cartuchos de solda.  Com base na minha experiência de trabalho, acho mais fácil lidar com itens pequenos com uma ponta de ferro de solda com casco de 30 ° e, para soldar qualquer coisa maior, levarei algo mais amplo, mais pesado e mais quente, então aqui está minha escolha: um Metcal SMTC-0167 para solda fina e um Thermaltronics M7K100 para trabalhar com itens de maior escala.  A propósito, dicas mais baratas da Thermaltronics também farão o truque. <br><br><img src="https://habrastorage.org/webt/dt/go/ha/dtgohazuklmmwjlzrnkjeqatbrc.jpeg"><br><br>  Enquanto meus itens estão sendo enviados, vou desenhar um fluxograma do dispositivo no projeto. <br><br><img src="https://habrastorage.org/webt/zl/uy/bh/zluybhztltpnmerd00thb0u5smo.png"><br><br>  É importante descrever o feedback entre a saída do gerador HF e a entrada de controle do conversor de redução.  O fato é que, após uma ponta de solda ter sido aquecida até a temperatura operacional, o oscilador continua emitindo uma tensão de amplitude razoavelmente alta (em torno de 100V), e a potência resultante começa a se dissipar na resistência ativa da bobina do indutor, que, devido à efeito de pele, é muito maior do que um multímetro comum pode registrar.  Como resultado, a pequena bobina fica em brasa e queima.  Para evitar isso, as estações originais usam um feedback negativo que reduz a tensão de alimentação do oscilador em resposta à crescente taxa de ondas estacionárias que vem com a alteração na impedância do indutor.  O modelo de 40W usa um método relativamente simples da patente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">US4626767A</a> , enquanto o modelo de 80W usa um feedback mais sofisticado envolvendo um transformador de corrente.  Vamos dar uma olhada neste vídeo que você pode encontrar na web: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/-55dR4yTJDQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  A linha azul mostra a tensão de alimentação no estágio de saída do gerador de alta frequência e, como você pode ver no vídeo, precisamos fornecer que a tensão de alimentação seja capaz de aumentar em pelo menos o dobro (portanto, a potência de saída será crescendo proporcionalmente à voltagem ao quadrado, ou seja, quatro vezes o valor da voltagem).  Como não consegui garantir a mesma qualidade de regulação com um circuito de feedback simples que modelei no LTSpice, apenas copiei o circuito de feedback da fotografia do PCB. <br><br><h4>  Gerador de alta frequência </h4><br>  Vamos começar a projetar o módulo de alta frequência, trabalhando primeiro o circuito ressonante de saída.  Dê uma olhada nesta foto de alta resolução: <br><br> <a href=""><img src="https://habrastorage.org/webt/ng/9m/ia/ng9miake_7v8hi53skrpz8ko3lm.jpeg"></a> <br><br>  Você pode ver três bobinas enroladas em torno dos núcleos toroidais amarelos, com 4, 6 e 7 voltas, respectivamente, da esquerda para a direita.  Pelo sistema de classificação da Amidon, o amarelo é usado para núcleos de ferro em pó com a permeabilidade de 8,5 (material nº 6).  O tamanho das bobinas pode ser calculado primeiro usando uma régua para medir o diâmetro das bobinas na tela e comparando-a com a medida de algum componente bem reconhecível, como o transistor de saída no pacote TO-247.  Aparentemente, esse design usa núcleos T130-6;  isso, na minha opinião, é um exagero - tais toróides grandes são destinados a uma potência muito maior.  Mas não tenho intenção de usar calças inteligentes aqui: certamente não posso comprar os núcleos originais dos EUA; portanto, pedirei suas réplicas chinesas baratas do AliExpress e veremos se eles podem fazer o trabalho (alerta de spoiler: eles foram muito bem) .  Seus valores de indutância foram calculados em 180, 400 e 540 nH, respectivamente. <br><br>  Nos circuitos ressonantes, os indutores operam ao lado de capacitores.  Não podemos derivar seus valores de capacitância da fotografia, no entanto, podemos encontrar facilmente uma mensagem postada pelo meticuloso material elétrico da mikes (o autor do vídeo acima) que gentilmente compartilhou suas observações (destacadas em amarelo): <br><br><img src="https://habrastorage.org/webt/hq/aq/md/hqaqmdiwweyahwjsjwp5ayrhqx0.png"><br><br>  Depois de alimentar esses valores com um modelo de especiaria, fica claro que as frequências ressonantes dos circuitos são levemente afastadas de 13,56 MHz.  O fato é que, quanto mais próxima a frequência da auto-ressonante, menor é a tensão necessária para alimentar o gerador de alta frequência e maior é o consumo de corrente.  O projeto original alimenta o estágio de saída com um conversor abaixador com um limite de corrente de 3 A, de modo que os projetistas colocam os estágios de saída um pouco fora da ressonância para poder aumentar a tensão de alimentação e diminuir o uso de corrente.  Por outro lado, estamos planejando empregar um chip 5A, no entanto, ele ficou com pouca corrente enquanto no modo ressonante, então, da mesma forma, colocaremos os estágios de saída da ressonância um pouco.  Descobriremos os valores exatos da capacitância experimentalmente, com base nos limites do projeto para a tensão máxima de alimentação do circuito de saída (22V) e o uso máximo de corrente (4A). <br><br>  Observe que bastante energia flui dentro dos circuitos ressonantes, ansiosos para serem liberados no ambiente na forma de calor.  Portanto, para aumentar o fator Q, vamos usar fios esmaltados bastante grossos (1,25 mm) para as bobinas e conectar vários capacitores em paralelo. <br><br>  Escolher o transistor de saída correto é outra questão intrigante.  Caso o cartucho seja substituído ou removido, a sobretensão pode subir para 300-350V, mas os autores do projeto original optaram por não se preocupar com proteção sofisticada e simplesmente equiparam o estágio de saída com um transistor de RF IXFH12N50F bastante raro, rápido e caro da IXYS com o limite de tensão de dreno de 500V.  Não podemos permitir esse luxo, então vamos pegar um transistor de efeito de campo padrão de 200V STP19NF20 que custa apenas meio dólar e conectá-lo em paralelo a um supressor de surto de 150V.  Perfeito!  O supressor cortará levemente as oscilações dos circuitos ressonantes, impedindo-os de girarem muito, enquanto o módulo de proteção interromperá o oscilador em cerca de 10 ms após o desaparecimento da carga. <br><br><img src="https://habrastorage.org/webt/rf/tg/il/rftgil-a5rpht6bup_enjbtq8kk.jpeg"><br><br>  Devido à grande capacitância de entrada e à alta frequência, não podemos controlar a porta do transistor de saída diretamente com um driver de porta comum.  A foto da placa original revela uma bobina indutora sem núcleo entre os dois transistores de potência.  Esse é um pequeno truque comumente usado: junto com a capacitância da fonte de porta, o indutor cria um circuito ressonante que sustenta o fluxo de energia através do circuito de porta, o que resulta em um aumento na eficiência do pré-amplificador.  Ao mesmo tempo, esse mesmo circuito impõe uma restrição implícita ao possível modelo do transistor de saída: seu valor de resistor de porta deve ser o mais baixo possível para manter um fator Q razoável do circuito.  Sem entrar em muitos detalhes, vamos reproduzir a solução do fabricante.  Selecionaremos o valor de indutância correto com base na eficiência máxima do circuito real, apertando / esticando os enrolamentos da bobina. <br><br>  A partir de então, o design do circuito se torna mais trivial.  Conduziremos o pré-amplificador projetado em torno de um transistor IRF510 com baixa capacitância de entrada usando um driver duplo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MAX17602</a> , pois suas características de velocidade parecem boas.  Um MAX17600 ou um MAX17601 funcionaria ainda melhor, e poderíamos conectar suas saídas em paralelo, mas eu não as tinha imediatamente disponíveis; portanto, trabalharemos com o que tivermos. <br><br>  A frequência de oscilação correta será definida por um ressonador de cristal.  Infelizmente, não consegui encontrar um cristal de 13,56 MHz para o oscilador ativo.  Mas não se preocupe, pegaremos um ressonador de 27,12 MHz mais comum e reduziremos pela metade a frequência.  Faremos bom uso de um microcontrolador, ou melhor, de um de seus temporizadores programados de acordo.  Também devo mencionar que um MCU só pode ser conectado diretamente a um ressonador de cristal que trabalha na frequência fundamental do cristal.  Os ressonadores russos de terceiro tom harmônico de 27.120 kHz usados ​​apenas podem ser conectados através de um hack rápido na forma de um circuito ressonante extra. <br><br><h4>  Fonte de alimentação </h4><br>  Após uma longa série de experimentos infrutíferos com produtos fabricados na China, decidi alimentar o estágio de saída do oscilador HF a partir de um conversor step-down baseado no chip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TPS54560</a> da TI.  Para evitar batidas audíveis, definiremos a frequência do oscilador interno em torno de 450 kHz, a uma distância da faixa de frequência de trabalho do conversor LLC.  Como alternativa, eu poderia ter feito exatamente o oposto, ou seja, sincronizar o conversor step-down com o oscilador do conversor LLC, mas naquele momento eu estava ficando preguiçoso, então desisti dessa idéia. <br><br>  O próprio conversor TPS54560, apesar de seu pequeno tamanho, possui um valor significativo da corrente de saída, então às vezes você pode imaginar que isso é um avanço sem precedentes na luta pela eficiência energética ... No entanto, a verdade é que o chip realmente precisa ser adequadamente resfriado .  A placa de demonstração oferecida pela Texas Instruments contém dois grandes planos terrestres com 2 onças de espessura em ambos os lados;  a transferência de calor através das camadas é garantida por seis orifícios, logo abaixo do fundo do chip (onde ele possui um pino de dissipação de calor).  Esse layout torna um pouco mais difícil fazer uma placa de bricolage, então obviamente terei que encomendá-la a um fabricante chinês.  Bugger! <br><br>  Para alimentar o driver e o pré-amplificador, vamos retirar a tensão não regulamentada de 12V da segunda bobina do conversor LLC.  O consumo de corrente no restante da placa será insignificante; portanto, para alimentar o controlador de 5V e iluminar a tela LCD, usaremos o regulador linear produzido internamente KR142EN5A, enquanto a linha de 3,3V para o MCU será regulada por o minúsculo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LD2985</a> . <br><br>  Para reduzir a tensão da linha nos 30V e 12V necessários, empregaremos um conversor LLC baseado no chip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LCS708HG</a> . <br><br><img src="https://habrastorage.org/webt/65/l8/ed/65l8edk_ucvq50zsc5hf2jbxxp8.jpeg"><br><br>  Tenho certeza de que muitos leitores gostariam de saber mais sobre os conversores LLC, por isso explicarei seu princípio operacional em mais detalhes.  A LLC não é um acrônimo, pois essas letras representam "indutor-indutor-capacitor" e, em suma, implementam o projeto elétrico para conectar o enrolamento primário de um transformador.  O ponto é que, algumas vezes, parte do fluxo gerado pelo enrolamento primário pode não estar ligado ao enrolamento secundário, o que causa a chamada indutância de vazamento - indutância dispersa que é incapaz de transferir a energia acumulada para o circuito secundário.  Nos conversores flyback padrão, essa energia deve ser dissipada em supressores ou resistores de amortecedor, de modo que os transformadores (ou, mais especificamente, bobinas de bobina dupla) são geralmente projetados de forma a reduzir o máximo possível a indutância de vazamento.  No entanto, as coisas são completamente diferentes com as LLCs. <br><br>  Em um conversor ressonante, a indutância de vazamento combinada com a capacitância conectada serialmente ao enrolamento primário cria um circuito de tanque que resolve dois problemas importantes.  Primeiro, ele faz a comutação dos transistores de saída de alta tensão do conversor em valores de tensão próximos a zero (o chamado Zero Voltage Switching, ZVS), que reduz significativamente as perdas de energia causadas pela comutação.  Segundo, a energia acumulada no indutor desacoplado flui de volta para o circuito, portanto isso elimina qualquer necessidade de amortecedores, pois na verdade não há perda de energia.  Em sua nota de aplicação AN-55, a Power Integrations fornece um esboço detalhado de como projetar um transformador para aumentar sua indutância de vazamento (isso é necessário para garantir a característica correta do transformador).  Eu, por exemplo, enrole voltas primárias e secundárias afastadas, em duas seções diferentes: <br><br><img src="https://habrastorage.org/webt/7i/iu/z-/7iiuz-igqg1rhgqisg31neowkm8.jpeg"><br><br>  Geralmente, esse design sofisticado de layout resulta em um valor de eficiência bastante decente, por exemplo, um chip LCS708HG sem dissipador de calor, apesar do tamanho miniatura, fornece uma potência de saída de cerca de 200 W!  Esse é um resultado realmente extraordinário, mas você só pode obtê-lo quando operar exatamente na frequência de ressonância automática do circuito de saída.  É aqui que está o problema. <br><br>  O caso é que, neste caso, a tensão de saída é regulada alterando a frequência do pulso em vez da razão do pulso, e o regulamento ocorre em uma faixa muito estreita de tensão - cerca de ± 15%.  Além disso, em resposta às flutuações da tensão de entrada em relação ao seu valor nominal, a frequência de conversão se afasta da ressonância, impondo o modo de comutação forçada nos transistores dentro do chip, consequentemente aquecendo-os bastante.  Com efeito, o conversor precisa receber tensão regulada em sua entrada! <br><br>  Em produtos fabricados na fábrica, os conversores são equipados com corretores de fator de potência ativo (APFCs) na entrada, os quais, além de corrigir a energia, também mantêm uma tensão de saída de 380-390V.  Mas, afinal, estamos lidando com um design DIY aqui, então vamos alegremente ignorar um soluço trivial como a sensibilidade à qualidade da energia da linha.  Com base nos cálculos e com a permissão para pulsação de tensão na capacitância do buffer, a tensão de entrada está na faixa de aproximadamente 230V ± 10%; portanto, se a rede elétrica operar dentro dos padrões, tudo funcionará sem problemas.  Vamos deixar lá por enquanto. <br><br>  Copiaremos o restante do design do conversor da folha de dados relevante.  Eu provavelmente focaria apenas no capacitor ressonante - esse componente aparentemente simples.  Se você já se perguntou qual é a diferença entre capacitores de filme de polipropileno e capacitores de filme de polietileno tereftalato (PET), eis a resposta: os primeiros têm uma tangente de perda dez vezes menor.  É exatamente por isso que minha tentativa de substituir o volumoso K78-2 (outro produto produzido no mercado interno) por um modelo PET mais barato e menor K73-17 causou um comportamento curioso: o capacitor entrou em superaquecimento e começou a gerar ruído de crepitação suspeito.  Interessante. <br><br>  Os chips da série HiperLCS requerem uma linha de fonte de alimentação dedicada de 12V.  Para evitar o problema de mexer em um enrolamento adicional, um retificador e circuitos de inicialização, vamos nos ater ao livro.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Obteremos</a> a tensão necessária de um pequeno conversor separado em um chip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LNK304</a> .  Sua principal característica é o design sem transformador, pois o único indutor de que precisamos é de um estrangulador barato fabricado na fábrica.  A corrente máxima de saída permanece dentro de um pequeno intervalo, cerca de 100mA, e a simplicidade do design, juntamente com a capacidade de manter o número de componentes no mínimo, o tornam uma solução atraente (enquanto o número de conversores por polegada quadrada de superfície está começando para me irritar. O Deus dos conversores exige mais deles!) <br><br><h4>  Cérebro </h4><br>  Bem, só mais algumas coisas para fazer.  A estação original possui um LCD que, pelo preço que você pagou, exibe uma semelhança com a potência de saída.  Vamos fazer algo semelhante: pegaremos o controlador STM32F030 em sua configuração mínima (em um pacote TSSOP-20).  Uma das entradas do conversor A / D mede a tensão de alimentação do estágio de saída no gerador HF, enquanto a outra entrada mede a corrente.  Para evitar a quebra do circuito de aterramento, conectaremos o resistor sensor de corrente ao fio positivo e implementaremos a mudança de nível usando o chip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">INA138 de</a> finalidade <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">especial</a> , um design da Burr-Brown em seus dias gloriosos.  Para exibir informações, vamos usar um OLED de texto com uma resolução de 16x2 feita pelo WinStar.  É isso em poucas palavras.  Espere, deixamos um pino do processador desocupado.  Bem, deixe piscar um LED então.  Não me pergunte o porquê. <br><br>  O firmware do controlador foi escrito na linguagem C usando o STM32CubeMX e a versão gratuita do IAR Embedded Workbench.  O código é bastante trivial.  Na hora do timer do sistema, uma vez em 300ms, o loop principal lê dados dos dois canais do conversor A / D, multiplica-os e envia para o display como a leitura de potência.  Na parte inferior da tela, o valor da energia é visualizado em uma barra renderizada com fontes personalizadas.  Após o desligamento da ponta de solda, o manipulador da interrupção proveniente da saída do detector de carga para o temporizador de referência do oscilador HF.  Para garantir um congelamento ou falha no MCU, adicionei manipuladores para erros de hardware e para os sinais do timer do watchdog;  o firmware também emprega a tecnologia CSS (Clock Security System) que, no caso de uma umidade nas oscilações do ressonador primário de cristal, muda para o oscilador RC embutido e relança o microcontrolador.  O tamanho total do firmware é 10 KB.  Carreguei o código-fonte do firmware junto com os outros arquivos de projeto no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub</a> para que os mais curiosos de vocês dêem uma olhada (mas não espere nada de extraordinário). <br><br><h4>  Layout </h4><br><div class="spoiler">  <b class="spoiler_title">O dispositivo inclui várias bobinas personalizadas</b> <div class="spoiler_text"><ul><li>  O dreno MOSFET é bloqueado e o transformador de corrente é enrolado em um núcleo de anel HF-ferrita de 16x8x6mm com permeabilidade de 50. Não há problema em usar fio esmaltado de 0,6 mm, os chokes têm 15 voltas, transformador de corrente - 2x14 voltas; </li><li>  O indutor sem núcleo possui 10 voltas de fio de 0,6 mm distribuídos uniformemente ao longo de 10 mm de comprimento.  O diâmetro interno é de 5 mm; </li><li>  O transformador principal é baseado em um pequeno núcleo EFD25 do material N87 Epcos.  Adicionei uma folga de 0,2 mm em cada perna inserindo duas camadas de papel de nota.  Isso nos dá uma diferença de 0,4 mm no total.  Para o enrolamento primário (33 voltas) e o primeiro enrolamento secundário (2x6 voltas), o fio litz com isolamento triplo é usado com tamanhos de 100/46 e 175/46, respectivamente (aqui o primeiro número é a contagem de fios e o segundo é o diâmetro AWG).  O segundo enrolamento secundário de 10V tem duas voltas de qualquer fio flexível flexível apropriado (usei um isolado com PTFE). </li></ul></div></div><br>  Os cálculos para todos os componentes do conversor LLC, incluindo os valores de indutância dos enrolamentos do transformador, são fornecidos no arquivo de layout anexado ao projeto, que você pode visualizar usando o PI Xls Designer.  Também incluí todas as folhas de dados das peças eletrônicas que usei no projeto, enviei modelos LTspice de algumas partes do circuito e algumas fotos, é claro. <br><br>  O resultado do projeto descrito acima é o seguinte diagrama esquemático elétrico: <br><br> <a href=""><img src="https://habrastorage.org/webt/6a/bn/p0/6abnp0p3g-16iu0umf5eq4eo3zq.png"></a> <br><br>  O diagrama e o layout da placa de circuito impresso foram preparados usando o DipTrace, com os desenhos convertidos para o formato Gerber para posterior expedição à fábrica.  O layout da placa de circuito impresso é feito para se encaixar bem na caixa do dispositivo, com uma camada inteira coberta com um plano de aterramento para proteger os frágeis circuitos de baixa corrente.  Esse layout facilita muito a fabricação da placa em casa, pois não requer nenhum alinhamento preciso dos modelos de fotos: você pode preencher quase toda a superfície reversa da placa com um plano sólido e, em seguida, usar uma broca espessa para fazer chanfros de furo ao redor dos pinos que não precisam ser aterrados. <br><br><img src="https://habrastorage.org/webt/py/hr/jg/pyhrjgytrdz7antf8jetd_xzu-4.jpeg"><br><br><img src="https://habrastorage.org/webt/rv/-a/nv/rv-anvkpggckyvycywv2kgr8bja.jpeg"><br><br>  Como algumas peças HF usadas no projeto emitem muito ruído de rádio e os componentes de energia são superaquecidos facilmente, naturalmente minha escolha do material para o gabinete será de alumínio.  Vou escolher um estojo G0476 aproximadamente correspondente do catálogo de Gainta.  Cortaremos uma janela no caso do OLED usando uma ferramenta rotativa.  Em seguida, conectaremos o gabinete diretamente ao fio terra do cabo de alimentação juntamente com a blindagem do cabo de solda e o terra da placa de circuito impresso. <br><br>  Infelizmente, a idéia de conectar um OLED com mais contraste em vez de um LCD veio a mim muito depois de eu ter enviado meu pedido de PCB para a fábrica.  Os níveis de CMOS de entrada de um OLED <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WEH001602AGPP5N00001</a> do WinStar são diferentes dos níveis TTL padrão de um LCD, portanto, o truque ao alimentar + 5V no controlador do monitor e sua iluminação e depois ler os sinais lógicos do microprocessador alimentado por + 3,3V não vai funcionar aqui.  Eu tive que conectar o monitor a uma linha de 3,3V usando um fio separado. <br><br>  Para reduzir o ruído, instalei resistores de supressão de interferência de 390 Ohm no barramento que conecta a PCB e a tela e cobri o microcontrolador com uma blindagem de folha de cobre.  Sob operação normal, o conector de programação deve ser coberto com uma parte fêmea que aterra diretamente os pinos de depuração e o pino NRST - através de um capacitor. <br><br>  No final, meu dispositivo adquiriu sua aparência final: <br><br><img src="https://habrastorage.org/webt/dp/pj/ay/dppjaykwjjd0xym_k3nxxe5n4g4.jpeg"><br><br>  Aqui está o procedimento resultante para o aquecimento do ferro de solda: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/odTL6zllHzc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h4>  Bottom line </h4><br>  Agora vamos totalizar os gastos com este pequeno pedaço de diversão: <br><br>  Componentes eletrônicos - cerca de US $ 50 (os mais caros foram o chip HiperLCS por US $ 15 e o OLED por US $ 10); <br>  Fabricação de PCB, custo por 10 peças.  - pouco mais de US $ 40; <br>  Case - US $ 8. <br><br>  O <b>custo total</b> da fonte de alimentação de alta frequência foi de cerca de US $ 100.  Também paguei por um ferro de solda com uma bancada (US $ 170) e dois cartuchos (US $ 100). <br><br>  É claro que eu poderia otimizar os gastos até certo ponto, por exemplo, o eBay possui uma ampla variedade de peças usadas do Metcal; nesse caso, estamos falando de apenas algumas dezenas de dólares, mas isso provavelmente é uma questão de preferência pessoal. <br><br><h4>  Errata </h4><br><ol><li>  A rede de capacitores de carga de cristal foi roteada de maneira incorreta e é muito sensível ao ruído HF.  O caminho certo é <a href="">isso</a> .  Agradecemos a Alexander Chulkin por esta importante melhoria. </li><li>  Não há suporte para a capacidade de desconectar o cabo do ferro de soldar de uma estação operacional, pois às vezes ele pode reiniciar o microcontrolador.  Vale a pena considerar a introdução de algumas blindagens adicionais da parte HF (embora não tenha 100% de certeza). </li></ol><br><h4>  Conclusões </h4><br>  Agora, deixe-me compartilhar com você o objetivo final que eu estava buscando neste projeto - a experiência que obtive ao trabalhar com o dispositivo.  É como usar um ferro de soldar muito poderoso e em brasa, enquanto segura uma ferramenta pequena e leve nas mãos.  Se valeu a pena o dinheiro e o esforço gastos, é difícil dizer.  Vou deixar a pergunta em aberto. <br><br><img src="https://habrastorage.org/webt/gy/uj/vn/gyujvninztoywjpa9ruzoae0dts.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt451246/">https://habr.com/ru/post/pt451246/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt451226/index.html">Nova vida de jogos antigos: o diretório de código-fonte mais aberto das portas de código-fonte (Java + PHP)</a></li>
<li><a href="../pt451230/index.html">Cinco erros cometidos pelas pessoas na preparação para a imigração trabalhista dos EUA</a></li>
<li><a href="../pt451232/index.html">O uso do modelo de financiamento contínuo no crowdfunding</a></li>
<li><a href="../pt451240/index.html">Por que eu gosto de interfaces Go</a></li>
<li><a href="../pt451242/index.html">MMORPG sozinho (perseguidor 2d)</a></li>
<li><a href="../pt451248/index.html">O lado sombrio dos hackathons</a></li>
<li><a href="../pt451252/index.html">As strings no Python devem ser iteráveis?</a></li>
<li><a href="../pt451254/index.html">Categoria: fornecedor de IaaS de ferro unboxing</a></li>
<li><a href="../pt451256/index.html">O que é um sistema de relatório ideal. É realista entender o que está acontecendo na empresa?</a></li>
<li><a href="../pt451258/index.html">Me pegue se puder. Carta do gerente</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>