<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•û üò¨ ü§ôüèª Wiren Board 6: de nouveau sur Habr√© avec la nouvelle version du contr√¥leur d'automatisation üíñ ü•õ üêÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! 

 Aujourd'hui, nous allons parler d'une toute nouvelle version de notre contr√¥leur pour l'automatisation, la maison intelligente et t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wiren Board 6: de nouveau sur Habr√© avec la nouvelle version du contr√¥leur d'automatisation</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wirenboard/blog/414411/">  Bonjour √† tous! <br><br>  Aujourd'hui, nous allons parler d'une toute nouvelle version de notre contr√¥leur pour l'automatisation, la maison intelligente et tout √ßa.  Vous trouverez ci-dessous un aper√ßu technique d√©taill√© de l'appareil. <br><br><img src="https://habrastorage.org/webt/ln/gt/35/lngt35xgm_uycfbrizl8votbmki.jpeg"><br><a name="habracut"></a><br><br clear="left"><div class="spoiler">  <b class="spoiler_title">En bref sur les contr√¥leurs Wiren Board</b> <div class="spoiler_text">  Un contr√¥leur de carte Wiren est un appareil qui agit comme un contr√¥leur central dans un syst√®me d'automatisation ou de surveillance. <br><br>  Par exemple, dans un ¬´b√¢timent intelligent¬ª, le contr√¥leur peut contr√¥ler l'√©clairage et la climatisation, prendre des mesures √† partir de capteurs climatiques et de capteurs de s√©curit√©.  Pour cela, le contr√¥leur prend en charge divers p√©riph√©riques externes, ex√©cute des r√®gles et des scripts, stocke et affiche magnifiquement les donn√©es. <br><br>  Le contr√¥leur fonctionne sous Linux, poss√®de de nombreuses interfaces c√¢bl√©es et sans fil int√©gr√©es pour la communication avec les p√©riph√©riques externes et le monde ext√©rieur. <br>  Le contr√¥leur est modulaire - les modules d'E / S (relais, entr√©es pour contacts secs) sont ancr√©s sur le c√¥t√©, les modules d'extension sont ins√©r√©s √† l'int√©rieur - ports RS-485, RS-232 suppl√©mentaires, etc. <br><br>  Naturellement, tout cela est de qualit√© industrielle: un bo√Ætier sur rail DIN, une large plage de puissance d'entr√©e, une large plage de temp√©ratures, une m√©moire fiable, une protection pour tous les ports, etc. <br></div></div><br><h2>  Pourquoi avons-nous publi√© une nouvelle version </h2><br>  Les temps sont durs maintenant: pour faire clignoter une LED, vous pouvez souvent vous passer d'un gigahertz de fr√©quence d'horloge.  S√©rieusement, les performances de notre pr√©c√©dente Wiren Board 5 avec ARM9 √©taient suffisantes pour presque toutes les t√¢ches, mais uniquement avec nos logiciels √©crits en C ++ et Go. <br><br>  Nous voulions donner aux utilisateurs plus de flexibilit√© - afin qu'ils puissent facilement utiliser des applications gourmandes en m√©moire et en processeur. <br><br>  Le principal changement dans Wiren Board 6 est le nouveau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">processeur NXP i.MX 6ULL</a> avec un c≈ìur Cortex A7 √† 800 MHz et 512 Mo de RAM DDR3 (dans WB5, il y avait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Freescale i.MX28</a> 454 MHz ARM9 et 128 Mo DDR2). <br><br>  Le contr√¥leur est devenu plusieurs fois plus rapide: en plus d'augmenter r√©ellement la fr√©quence d'horloge, l'utilisation d'une architecture centrale plus productive (en termes de MHz) joue √©galement un r√¥le.  I.MX 6ULL ‚Äã‚Äãa un FPU mat√©riel - dans certaines applications qui stockent et traitent des donn√©es, cela a donn√© une augmentation significative des performances. <br><br>  Le nouveau processeur a permis d'utiliser les derni√®res versions de Node.js (l'architecture du processeur pr√©c√©dent n'√©tait pas prise en charge dans le moteur V8), d'utiliser Node-RED et d'installer un logiciel pr√™t √† l'emploi pour Raspberry Pi sans recompilation. <br><br>  En g√©n√©ral, du point de vue du d√©veloppement et de la s√©lection des logiciels, Wiren Board 6 est pass√© de la cat√©gorie des ¬´mat√©riels embarqu√©s¬ª √† la cat√©gorie des ¬´ordinateurs ordinaires avec Linux, mais avec de nombreuses interfaces¬ª. <br><br>  <s>Quelques</s> mots sur pourquoi <s>pas 8xCortex A53@2.2GHz</s> nous avons choisi le processeur plus lentement que dans les nouveaux d√©codeurs TV ou dans le nouveau Raspberry Pi.  i.MX 6ULL ‚Äã‚Äãest un processeur moderne (2017) pour les syst√®mes embarqu√©s industriels.  Il a une tr√®s faible consommation d'√©nergie et n'est donc presque pas chauff√©.  Mais en m√™me temps, la temp√©rature de travail √† c≈ìur admissible peut atteindre 105 ¬∞ C.  Ceci est important pour nous, car Wiren Board se trouve g√©n√©ralement dans des armoires ferm√©es sans aucun refroidissement.  Les contr√¥leurs fonctionnent √©galement √† froid, la temp√©rature minimale de tous les composants est de moins 40 ¬∞ C. <br><br>  Ce processeur a √©galement un excellent support dans le noyau Linux principal, et le fabricant garantit sa production jusqu'en 2026 au moins. <br><br><img src="https://habrastorage.org/webt/j5/rd/tp/j5rdtpkodksucvdkxpvi-wyb5te.jpeg"><br><br><h2>  Autres changements de contr√¥leur </h2><br>  Les contr√¥leurs Wiren Board 5 avaient plusieurs r√©visions mat√©rielles qui peuvent √™tre utilis√©es pour suivre l'√©volution de l'appareil.  Il y a beaucoup de diff√©rences entre la derni√®re r√©vision et la premi√®re: <br><br><ul><li>  Ajout du bornier Vout - sortie de tension.  Pratique pour connecter des p√©riph√©riques via RS-485 - vous pouvez prendre des donn√©es et des lignes √©lectriques √† partir d'un seul appareil; <br></li><li>  la console de d√©bogage s'affiche sur l'interface Micro-USB au lieu de UART; <br></li><li>  Ajout d'un deuxi√®me port Ethernet.  Utilis√© comme canal de sauvegarde pour se connecter √† des r√©seaux isol√©s et pour connecter d'autres contr√¥leurs; <br></li><li>  le sch√©ma d'alimentation est modifi√©.  Nous avons utilis√© un abaissement synchrone (une efficacit√© plus √©lev√©e signifie moins de chauffage de la carte), la plage de puissance d'entr√©e est jusqu'√† 40 volts, nous nous sommes d√©barrass√©s des condensateurs √©lectrolytiques (d√©sormais uniquement en c√©ramique) - cela augmente la dur√©e de vie; <br></li><li>  des cavaliers sont ajout√©s pour activer les r√©sistances de terminaison sur les lignes RS-485 / CAN; <br></li><li>  Interface audio num√©rique S / PDIF supprim√©e - pas populaire; <br></li><li>  port retir√© pour l'√©metteur-r√©cepteur IR - il s'est av√©r√© que ce n'√©tait pas tr√®s pratique √† utiliser, ils ont donc sorti un appareil WB-MIR s√©par√© avec RS-485; <br></li><li>  prise en charge limit√©e du modem 3G: il peut √™tre install√© √† la place du module Wi-Fi. <br></li></ul><br>  <b>Dans Wiren Board 6, d'autres modifications ont √©t√© ajout√©es:</b> <br><br><ul><li>  Prise en charge suppl√©mentaire de deux cartes SIM.  Le pays est grand, la qualit√© de la communication n'est pas toujours au top, et maintenant il y a tout de suite une r√©serve; <br></li><li>  impl√©ment√© un support complet pour le module 3G et m√™me NB-IoT (ce sera un article s√©par√©).  La 3G produit honn√™tement 5 Mbps.  SSH ne ralentit pas, en g√©n√©ral une connexion plus stable, vous pouvez prendre n'importe quel nombre de param√®tres d'objets distants; <br></li><li>  capteur de temp√©rature sur la carte contr√¥leur.  Peu co√ªteux, mais il est utile pour les gens de voir dans quelles conditions le contr√¥leur fonctionne.  Un autre capteur mesure la temp√©rature du c≈ìur du processeur afin que le contr√¥leur r√©initialise automatiquement la fr√©quence en cas de surchauffe; <br></li><li>  deuxi√®me port USB.  Parce que nous le pouvons. <br></li></ul><br>  <b>Changements internes:</b> <br><br><ol><li>  Nous avons refait le sch√©ma d'alimentation (encore? Combien pouvez-vous, Karl?).  Maintenant, cela ressemble √† ceci: <br><br><img src="https://habrastorage.org/webt/ip/m8/l7/ipm8l7h2o5qq4yvf8defl-48u9i.png"><br><br>  Les avantages d'un tel sch√©ma: <br><br>  - La consommation principale dans le contr√¥leur est sur la ligne 5V.  L'efficacit√© √† haute charge (nombreux modules lat√©raux, capteurs externes, etc.) est plus √©lev√©e; <br>  - Si nous installons notre module d'alimentation de secours √† l'int√©rieur du contr√¥leur, alors en l'absence de tension externe, 11 volts sont fournis au bornier Vout.  Cela permet √† plusieurs appareils connect√©s via RS-485 de fonctionner; <br>  - la sortie peut √™tre programm√©e pour s'allumer et s'√©teindre, ce qui est utile pour red√©marrer √† distance les p√©riph√©riques connect√©s de diff√©rents fabricants par l'alimentation. <br></li><li>  √âtirement des lignes RS-485 sans logiciel.  Une faible ¬´extension¬ª de la r√©sistance des lignes est n√©cessaire pour d√©finir un niveau logique fixe sur le bus lorsqu'aucun appareil ne transmet de donn√©es.  Vous devez d√©sactiver ¬´l'√©tirement¬ª (polarisation √† s√©curit√© int√©gr√©e de mani√®re intelligente) si plusieurs contr√¥leurs sont connect√©s au bus, par exemple, lorsque la carte Wiren fonctionne comme un esclave Modbus. <br></li><li>  Cl√©s intelligentes au lieu de transistors sur les bornes A1-A4: avec protection contre les courts-circuits et les surchauffes, et limitation de courant. <br></li></ol><br><h3>  Modules d'extension </h3><br>  Les modules d'E / S (ce sont des modules avec des E / S suppl√©mentaires connect√©es au contr√¥leur sur le c√¥t√©) sont rest√©s les m√™mes qu'auparavant, mais les modules d'extension ont d√©cid√© de refaire. <br><br><img src="https://habrastorage.org/webt/lz/7k/w5/lz7kw54yg51qzsbjygope3t7kkc.png"><br><br>  Brochage du connecteur d'extension.  A gauche - telle qu'elle √©tait, √† droite - telle qu'elle est devenue. <br><br>  Dans WB5, ils ont sorti des signaux avec une marge - puissance, UART, I2C, SPI.  Pendant trois ans, ils ont propos√© un seul module utilisant SPI - le module de carte SD, et il ne n√©cessite pas de borniers externes.  Et I2C est un logiciel bas√© sur GPIO.  Par cons√©quent, l'exc√©dent a √©t√© supprim√© et l'espace a √©t√© lib√©r√© pour le troisi√®me emplacement pour les modules d'extension qui ne n√©cessitent pas de terminaux externes (il s'agit d'un GPS, d'un emplacement microSD, √† l'avenir, de diff√©rents modules avec une radio). <br><br><img src="https://habrastorage.org/webt/dg/x8/ma/dgx8ma82tszftljcaxoeqoyio38.jpeg"><br><br>  Les modules d'extension eux-m√™mes ont √©t√© fabriqu√©s avec une cl√© - la partie saillante de la carte est ins√©r√©e dans l'emplacement de la carte contr√¥leur.  Cela ajoute de la rigidit√© √† la connexion - les mouchoirs ne pendent pas dans le connecteur et il est impossible de les ins√©rer incorrectement. <br><br><h3>  Processeur cryptographique </h3><br>  Dans Wiren Board 6, nous avons ajout√© un processeur cryptographique.  Il s'agit d'une puce sp√©ciale qui stocke les cl√©s de chiffrement priv√©es des utilisateurs et les utilise pour cr√©er une signature num√©rique cryptographique des donn√©es. <br><br>  Si c'est simple, il s'agit d'un analogue des cartes √† puce ou des sifflets USB, qui sont √©mis par les banques et les agences gouvernementales pour confirmer l'identit√© de l'utilisateur. <br><br><div class="spoiler">  <b class="spoiler_title">Pourquoi avons-nous besoin d'un processeur cryptographique</b> <div class="spoiler_text">  Le processeur cryptographique du contr√¥leur est utilis√© pour son authentification dans les syst√®mes de surveillance et de contr√¥le du niveau sup√©rieur. <br><br>  Auparavant, pour connecter des contr√¥leurs √†, par exemple, un serveur VPN, il √©tait n√©cessaire d'utiliser un nom d'utilisateur et un mot de passe communs (non s√©curis√©s) ou de fournir des d√©tails distincts √† chaque contr√¥leur (peu pratique).  En plus des difficult√©s de gestion des d√©tails, les deux solutions sont potentiellement dangereuses: les d√©tails et un fichier de certificat, si vous le souhaitez, pourraient √™tre copi√©s d'un contr√¥leur √† un autre et acc√©der au syst√®me. <br><br>  Avec un processeur cryptographique, tout est grandement simplifi√©: sur le serveur, il vous suffit d'enregistrer une liste de num√©ros de s√©rie (nom commun) des contr√¥leurs autoris√©s.  Dans le m√™me temps, le serveur v√©rifie la signature cryptographique du certificat du contr√¥leur, qui ne peut pas √™tre falsifi√©e et copi√©e. <br><br>  Nous avons impl√©ment√© la prise en charge des puces cryptographiques dans la biblioth√®que syst√®me standard d'OpenSSL, de sorte que presque tous les logiciels standard utilisant SSL, TLS ou HTTPS pourront fonctionner avec des cl√©s mat√©rielles prot√©g√©es. <br><br>  Nous travaillons maintenant avec des partenaires - fournisseurs de syst√®mes de haut niveau pour garantir que la carte Wiren est connect√©e √† ces syst√®mes sans mots de passe et pr√©r√©glages.  Un support est √©galement pr√©vu pour les plateformes IoT des principaux fournisseurs: Amazon, Google et autres. <br></div></div><br><h3>  Logiciels </h3><br>  En g√©n√©ral, les mises √† jour du logiciel Wiren Board sont publi√©es simultan√©ment pour toutes les versions et r√©visions de contr√¥leur prises en charge. <br><br>  Cependant, √† la sortie de Wiren Board 6, nous avons programm√© plusieurs changements importants dans le logiciel. <br><br><h4>  Debian 9 </h4><br>  Les nouveaux contr√¥leurs sont livr√©s avec la derni√®re version stable de Debian - Debian Stretch.  Le processus de transition de Debian Wheezy a √©t√© un processus long et douloureux, principalement en raison de l'utilisation de systemd au lieu de sysvinit dans la nouvelle Debian. <br><br>  Mais maintenant, nos utilisateurs b√©n√©ficient d'une distribution moderne avec des versions relativement r√©centes de logiciels tiers.  De plus, la distribution et WB6 lui-m√™me sont compatibles avec les packages pour Raspbian. <br><br><h4>  Nouveau syst√®me de mise √† jour et de r√©cup√©ration du firmware </h4><br>  Les versions pr√©c√©dentes des contr√¥leurs pouvaient √™tre mises √† jour via le gestionnaire de packages APT, ou le micrologiciel entier pouvait √™tre remplac√© via l'interface Web.  Si des actions imprudentes de l'utilisateur conduisaient √† une inop√©rabilit√© du syst√®me, la restauration compl√®te du firmware d'usine a √©t√© effectu√©e via le port USB √† l'aide d'un ordinateur ou d'une machine virtuelle avec Linux et d'un programme sp√©cial mxsldr. <br><br>  Dans Wiren Board 6, nous avons √©galement impl√©ment√© une mise √† jour √† l'aide du chargeur de d√©marrage.  Pour restaurer le firmware, ins√©rez simplement la cl√© USB avec le nouveau fichier de firmware dans le port USB du contr√¥leur et cliquez sur le bouton de mise √† jour. <br><br>  De m√™me, vous pouvez r√©initialiser tous les param√®tres du contr√¥leur aux param√®tres d'usine par d√©faut. <br><br><h4>  Appel √† l'action </h4><br>  Besoin de plus d'informations techniques?  Ici vous pouvez trouver les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sp√©cifications compl√®tes</a> . <br><br>  Vous avez d'autres questions sur l'appareil et ses applications?  Nous vous attendons sur notre site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://wirenboard.com/</a> et visitons notre bureau. <br><br>  Voulez-vous essayer un nouveau contr√¥leur au travail?  Vous pouvez acheter le contr√¥leur au d√©tail directement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur notre site Web</a> .  Nous exp√©dions l'√©quipement par courrier 1-2 jours apr√®s la commande. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr414411/">https://habr.com/ru/post/fr414411/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr414397/index.html">FCS propose de ramener le seuil de franchise √† z√©ro</a></li>
<li><a href="../fr414399/index.html">L'utilisation de la production num√©rique dans les entreprises et l'enseignement r√©els</a></li>
<li><a href="../fr414401/index.html">100 500 m√©thodes de mise en cache dans Oracle Database</a></li>
<li><a href="../fr414403/index.html">Fujitsu a cr√©√© une nouvelle technologie de mod√©lisation mol√©culaire</a></li>
<li><a href="../fr414405/index.html">Installer le certificat sur le serveur HTTP Apache</a></li>
<li><a href="../fr414413/index.html">Synopsis et vid√©o de l'histoire du r√©seautage dans l'industrie du jeu avec le gamedev du festival</a></li>
<li><a href="../fr414415/index.html">Conf√©rence Tarantool 21 juin - non seulement sur Tarantool, mais en g√©n√©ral sur l'informatique en m√©moire</a></li>
<li><a href="../fr414417/index.html">√âv√©nements num√©riques √† Moscou du 18 au 24 juin</a></li>
<li><a href="../fr414419/index.html">ESET pr√©pare des logiciels espions InvisiMole depuis 2013</a></li>
<li><a href="../fr414423/index.html">Ce jour-l√†, nous nous sommes rapproch√©s le plus possible ... Une nouvelle version de SBM 11.4 est sortie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>