<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíø üå≥ üíÇ Gera√ß√£o de ambiente baseado em som e m√∫sica no Unity3D üë≠ ‚è´ üë®‚Äçüë©‚Äçüëß‚Äçüëß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Anota√ß√£o 


 Ol√° pessoal. Este artigo √© o primeiro de uma s√©rie sobre o t√≥pico de gera√ß√£o de conte√∫do com base em m√∫sica e som. De fato, essa gera√ß√£o ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gera√ß√£o de ambiente baseado em som e m√∫sica no Unity3D</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/digital-ecosystems/blog/429872/"><h2 id="annotaciya">  Anota√ß√£o </h2><br><p>  Ol√° pessoal.  Este artigo √© o primeiro de uma s√©rie sobre o t√≥pico de gera√ß√£o de conte√∫do com base em m√∫sica e som.  De fato, essa gera√ß√£o √© uma tarefa t√©cnica bastante complicada; portanto, este material ser√° introdut√≥rio, mais focado no design de jogos e em uma compreens√£o geral do assunto, ap√≥s o qual nos aprofundaremos nos aspectos t√©cnicos deste t√≥pico. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gn/qs/ck/gnqscktbympej56xg1dr8gepcjm.jpeg" width="700"></div><br><p>  Neste artigo, consideraremos um g√™nero espec√≠fico de jogos em que o conte√∫do √© gerado com base no som e na m√∫sica.  A teoria geral do som n√£o ser√° apresentada aqui, mas no material voc√™ pode encontrar links para fontes de informa√ß√£o e uma breve descri√ß√£o dos termos que usaremos.  O material, embora contenha informa√ß√µes t√©cnicas sobre teoria e programa√ß√£o de som, foi projetado para um p√∫blico iniciante.  As ilustra√ß√µes s√£o feitas por conta pr√≥pria e, como n√£o sou artista, n√£o as leve a s√©rio, elas s√£o necess√°rias apenas para uma melhor compreens√£o do material.  Boa leitura! </p><a name="habracut"></a><br><h2 id="vvedenie">  1. Introdu√ß√£o </h2><br><p> A gera√ß√£o processual baseada na m√∫sica nos videogames √© um t√≥pico que, para mim, pessoalmente, sempre foi envolto em um certo toque de misticismo.  H√° algo incr√≠vel em como as formas sonoras n√£o s√£o apenas visualizadas, mas tamb√©m afetam diretamente a jogabilidade.  Tudo parece peculiar, mas muito divertido.  √â por isso que esses jogos t√™m seu pr√≥prio p√∫blico pequeno, mas est√°vel.  O Steam adicionou tags separadas para estes jogos: "Gera√ß√£o baseada em m√∫sica" e "Rhythm game".  No momento, essas tags podem ser encontradas em cerca de 200 projetos, embora existam muito mais jogos que usam essa mec√¢nica. </p><br><p>  De fato, a gera√ß√£o baseada em som oferece espa√ßo ilimitado para o desenvolvimento da jogabilidade, mas at√© agora essas id√©ias continuam sendo o destino de projetos independentes, enquanto em jogos AAA (com exce√ß√£o do Guitar Hero) tais experi√™ncias n√£o s√£o aplic√°veis ‚Äã‚Äãdevido √† sua instabilidade e incomum jogabilidade. . </p><br><h2 id="primery-horoshih-proektov">  Exemplos de bons projetos </h2><br><p>  Antes de passar para a ess√™ncia da gera√ß√£o baseada em som (n√£o confunda com gera√ß√£o de som!), Gostaria de dar exemplos de jogos bem-sucedidos que usam mec√¢nica semelhante.  Se voc√™ ainda n√£o os jogou, tente!  Voc√™ provavelmente nunca viu isso antes.  Muitos desses projetos receberam pr√™mios de jogadores e da imprensa. </p><br><p>  A rigor, a gera√ß√£o pura √© usada apenas no Audiosurf.  No resto dos jogos, eu uso um ou outro de seus elementos.  Alguns jogos s√£o mais focados no rastreamento de bits, outros no volume da faixa etc. </p><br><p>  Esses projetos s√£o muito dif√≠ceis de avaliar por uma captura de tela ou descri√ß√£o. Portanto, se voc√™ n√£o tiver tempo para reproduzir, assista ao v√≠deo no YouTube. </p><br><h3 id="audiosurf">  Audiosurf </h3><br><p><img src="https://habrastorage.org/webt/nh/dp/or/nhdporzttdbt587cybzmwcadnba.jpeg"><br>  Para muitos jogadores, o Audiosurf foi o primeiro jogo a usar a gera√ß√£o de conte√∫do baseado em m√∫sica.  O projeto foi criado por um desenvolvedor independente do Invisible Handlebar - a empresa de Dylan Fiterer.  Quando o Audiosurf apareceu no Steam, esse mercado estava apenas come√ßando a se desenvolver e a taxa de crescimento monstruosa atual ainda estava longe.  O Audiosurf parecia muito novo e n√£o usual, al√©m disso, foi o primeiro jogo no Steam (exceto nos jogos da Valve), que continha conquistas! </p><br><p>  O slogan do Audiosurf - "Ride your music" - reflete com muita precis√£o a jogabilidade: com base na sua trilha, a trilha que voc√™ precisa dirigir √© criada.  O jogo leva em considera√ß√£o a velocidade da pista, mudan√ßas din√¢micas (aumento e diminui√ß√£o de volume) e bit.  Nele, voc√™ pode usar diferentes g√™neros de m√∫sica e combin√°-los com diferentes modos de jogo.  Al√©m disso, cada faixa tem sua pr√≥pria tabela de registros, e voc√™ pode se surpreender ao descobrir que seu "Undeground death metal" favorito √© ouvido por mais dez pessoas. </p><br><p><img src="https://habrastorage.org/webt/jp/na/gw/jpnagwx7mg8oqxu13pc7vxxwrli.jpeg"><br>  <em>Infelizmente, na est√°tica, o Audiosurf n√£o √© percebido.</em>  <em>Precisa jogar.</em> </p><br><p>  Falando em jogabilidade, o Audiosurf √© √≥timo.  Por exemplo, se a trilha come√ßar com uma introdu√ß√£o silenciosa, seu barco subir√° lentamente para cima, mas quando a textura musical se tornar mais saturada e encorpada, a velocidade aumentar√° e voc√™ se apressar√° o tempo todo.  O chamado Drop √© especialmente bem sentido, durante o qual o som "interrompe" no meio do desenvolvimento e depois retorna no momento do cl√≠max.  Um kit de bateria diversificado pode transformar sua trilha em uma estrada montanhosa, al√©m de afetar os especiais.  efeitos  Al√©m disso, os blocos que voc√™ deve coletar ao passar o rastreio gerado tamb√©m s√£o colocados sob o bit. </p><br><p>  10 anos se passaram desde o lan√ßamento do jogo, mas ainda √© muito popular entre os jogadores.  No momento, duas partes do jogo foram lan√ßadas, e o desenvolvedor Dylan Fitterer continuou a desenvolver suas id√©ias e criou o Audioshield, onde voc√™ se afasta de blocos de realidade virtual voando em voc√™ sob uma batida de bits. </p><br><p>  Recomendamos a reprodu√ß√£o em faixas como: </p><br><ul><li>  Sistema de um Down - Chop Suey! </li><li>  Martin Garrix - Animais </li><li>  Skrillex - Bangarang </li></ul><br><p>  Compartilhe suas faixas favoritas do Audiosurf nos coment√°rios! </p><br><p>  O jogo pode ser comprado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Steam</a> . </p><br><h3 id="beat-hazard">  Perigo de batida </h3><br><p>  Neste projeto, os criadores adotaram a mec√¢nica padr√£o do Shoot'em e adicionaram uma an√°lise das suas m√∫sicas l√°.  Acabou muito legal.  A m√∫sica afeta tudo: o poder do seu navio, o n√∫mero de oponentes, a velocidade geral do jogo.  O melhor de tudo √© que o jogo pode ser sentido com m√∫sica, onde h√° transi√ß√µes n√≠tidas do sil√™ncio para um som poderoso, ent√£o sua tela explode com os efeitos e o navio come√ßa a disparar em raios enormes. </p><br><p>  O jogo tem uma mec√¢nica bastante rica, v√°rios modos e chefes enormes.  Em geral, tudo o que voc√™ precisa para se divertir! </p><br><p><img src="https://habrastorage.org/webt/df/rb/9u/dfrb9uy1jhzy5bapkf5fpfar0vy.jpeg"></p><br><p>  Recomendamos a reprodu√ß√£o em faixas como: </p><br><ul><li>  The Prodigy - Os invasores devem morrer! </li><li>  Cogumelo Infectado - A Lenda dos Shawarma Negros </li><li>  Daft Punk - Contato </li></ul><br><p>  Escreva nos coment√°rios as faixas que voc√™ mais gosta de destruir naves inimigas! </p><br><p>  O jogo pode ser comprado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Steam</a> . </p><br><h3 id="soundodger">  Soundodger + </h3><br><p>  O jogo √© uma esp√©cie de mistura de Beat Hazzard e o popular Super Hexagon.  A ess√™ncia da jogabilidade √© que voc√™ precisa se esquivar de objetos cuja atividade depende da sua faixa de m√∫sica.  O processo √© muito complicado e, portanto, super emocionante. </p><br><p><img src="https://habrastorage.org/webt/io/od/q0/ioodq0vk5pbmfujecgekpklm_90.jpeg"></p><br><p>  O jogo pode ser comprado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Steam</a> . </p><br><h3 id="crypt-of-the-necrodancer">  Cripta do necrodancer </h3><br><p>  Um jogo que transfere com precis√£o o ritmo com uma precis√£o insana e faz voc√™ dan√ßar com um gamepad.  Crypt of the NecroDancer √© um projeto do tipo Roguel, no qual voc√™ e os monstros devem se mover estritamente com a m√∫sica.  Se voc√™ n√£o entrar no ritmo, o jogo o multar√° quando voc√™ se mover.  Todo o local ao mesmo tempo pulsa ao ritmo, o que cria uma atmosfera irreal.  A trilha sonora foi escrita pelo famoso Danny Baranowsky (Super Meat Boy, The Binding of Isaac).  A prop√≥sito, o jogo suporta tapetes de dan√ßa! </p><br><p><img src="https://habrastorage.org/webt/g0/tq/p3/g0tqp3ufnugpsybbeu-ku6_vk18.jpeg"></p><br><p>  O jogo pode ser comprado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Steam</a> . </p><br><h3 id="geometry-dash">  Tra√ßo de geometria </h3><br><p>  √â um corredor muito incondicional, no qual voc√™ confia n√£o apenas na sua rea√ß√£o, mas tamb√©m no senso de ritmo, j√° que todos os obst√°culos s√£o claramente vencidos e no final da pista (se voc√™ alcan√ßar) voc√™ j√° est√° se movendo em um n√≠vel intuitivo.  A rigor, n√£o h√° gera√ß√£o como tal, mas os desenvolvedores usaram a an√°lise de faixas de m√∫sica para melhor construir o n√≠vel. </p><br><p><img src="https://habrastorage.org/webt/1z/bp/sy/1zbpsynlhfdxks9z_es3qifiwp8.png"><br>  <em>Como quase todos os jogos desse g√™nero, o Geometry Dash parece muito brilhante</em> </p><br><p>  O jogo pode ser comprado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Steam</a> . </p><br><h3 id="beatbuddy-tale-of-the-guardians">  Beatbuddy: conto dos guardi√µes </h3><br><p>  Um magn√≠fico jogo de plataformas musicais, cuja a√ß√£o ocorre no mundo subaqu√°tico, vivendo sob uma batida eletromagn√©tica brilhante.  Cada criatura neste jogo gera seu pr√≥prio som.  Krabik bate rapidamente, as an√™monas s√£o respons√°veis ‚Äã‚Äãpelo cano ... Ao mesmo tempo, o personagem principal pode influenciar os habitantes do mundo e mudar a m√∫sica e a pr√≥pria jogabilidade.  Para o jogo, foram utilizadas faixas de m√∫sicos como Parov Stelar, Austin Wintory, Sabrepulse e La Rochelle Band. </p><br><p><img src="https://habrastorage.org/webt/do/km/yh/dokmyh3teztg93lai0ca422zesq.jpeg"></p><br><p>  O jogo pode ser comprado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Steam</a> . </p><br><p>  Depois de termos sido inspirados por excelentes projetos, podemos prosseguir com o estudo da pergunta "como tudo funciona?" </p><br><h2 id="osnovnye-parametry-zvuka">  Op√ß√µes b√°sicas de som </h2><br><h3 id="parametry-analogovogo-zvuka">  Op√ß√µes de √°udio anal√≥gico </h3><br><p>  Como o t√≥pico escolhido n√£o √© muito simples e cont√©m muitos aspectos t√©cnicos, decidi n√£o inflar o artigo com teoria, mas definir conceitos b√°sicos.  Se voc√™ deseja estudar a teoria do som mais de perto, no Habr havia muitos artigos sobre esse assunto.  No final do artigo, voc√™ encontrar√° muitos links √∫teis. </p><br><p>  Os par√¢metros b√°sicos do som, incluiremos o seguinte: </p><br><ul><li>  Frequ√™ncia ou tom da onda sonora, Hz </li><li>  Amplitude da onda sonora ou volume do som, dB </li><li>  Coeficiente de atenua√ß√£o √© a taxa de diminui√ß√£o da amplitude ao longo do tempo. </li><li>  Forma de onda - uma vis√£o geral de uma onda sonora.  Usando este par√¢metro, voc√™ pode dividir os sons em grupos (n√≠tidos, suaves, ru√≠dos, etc.) </li></ul><br><p>  Para maior clareza, citei as principais caracter√≠sticas da onda sonora nos gr√°ficos a seguir (as unidades n√£o est√£o definidas, pe√ßo desculpas): </p><br><p><img src="https://habrastorage.org/webt/4w/jw/5k/4wjw5kztenllvl9kji6hzxos5um.png"><br>  <em>Som alto com grande amplitude</em> </p><br><p><img src="https://habrastorage.org/webt/bu/-5/lp/bu-5lp0ns5jj5_vhdkpe0mlsvni.png"><br>  <em>Som silencioso com menos amplitude</em> </p><br><p><img src="https://habrastorage.org/webt/28/p2/zr/28p2zrfybsakqdpkj80zswskbjy.png"><br>  <em>Alta frequ√™ncia, alta frequ√™ncia</em> </p><br><p><img src="https://habrastorage.org/webt/9e/eb/xy/9eebxygle4253bci6_wh8p_lj_i.png"><br>  <em>Som baixo com menos frequ√™ncia</em> </p><br><p><img src="https://habrastorage.org/webt/y_/wr/gt/y_wrgtlts7ut9betdlwosmnu_km.png"><br>  <em>Som alto e alto (cuide dos seus ouvidos!)</em> </p><br><p>  Em geral, esses dados s√£o suficientes para entender o que √© o som e seguir em frente.  Mas se voc√™ estiver interessado neste t√≥pico, √© claro que precisar√° estud√°-lo mais profundamente. </p><br><h3 id="parametry-cifrovogo-zvuka">  Op√ß√µes de √°udio digital </h3><br><p>  Ao escrever jogos e outros programas, trabalharemos com a forma digital do som.  O som digital √© obtido por amostragem (divis√£o em pequenos pontos no tempo), quantiza√ß√£o (arredondamento para um determinado n√≠vel) e codifica√ß√£o (na verdade, transformando o som em zeros e uns).  Voc√™ pode encontrar muitas informa√ß√µes sobre esse t√≥pico no artigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teoria do som.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O que voc√™ precisa saber sobre o som para trabalhar com ele.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Experimente o Yandex.Music</a> , que eu realmente gostei.  L√° voc√™ encontrar√° informa√ß√µes sobre como medir volume e uma descri√ß√£o dos filtros que mencionarei. </p><br><p>  A principal coisa que precisamos saber sobre o sinal digital √©: </p><br><ol><li><p>  Taxa de amostragem - caracteriza a precis√£o com que o som ser√° digitalizado.  Por exemplo, quando dizemos que a taxa de amostragem √© 44,1 kHz, isso significa que o sinal √© medido 44.100 vezes em um segundo.  Hoje, as taxas de amostragem mais comuns s√£o 44,1 kHz e 48 kHz. </p><br></li><li><p>  Profundidade de bits de um sinal digital - caracteriza o qu√£o ampla faixa din√¢mica se encaixa no seu digital.  √â medido em bits e geralmente √© de 16, 24 e 32 bits.  A faixa din√¢mica √© a diferen√ßa entre o som mais alto e o mais silencioso, expresso em decib√©is.  Por exemplo, para um sinal de 8 bits, √© 48 dB, para um sinal de 16 bits, √© 96 dB, para um sinal de 24 bits, √© 144 dB e para um sinal de 32 bits, √© 192 dB. </p><br></li><li><p>  A taxa de bits √© o que todos os internautas viram em 2002 quando baixaram m√∫sicas.  Taxa de bits √© o n√∫mero de bits usados ‚Äã‚Äãpara transmitir ou processar dados por unidade de tempo.  Nos formatos de streaming de v√≠deo e √°udio (por exemplo, MPEG e MP3) que usam compacta√ß√£o com perda de qualidade, o par√¢metro "taxa de bits" expressa o grau de compacta√ß√£o do fluxo. </p><br></li></ol><br><h2 id="metadannye-v-muzykalnyh-faylah">  Metadados em arquivos de m√∫sica </h2><br><p>  Al√©m dos pr√≥prios par√¢metros de som, podemos usar informa√ß√µes ocultas nos pr√≥prios arquivos de som.  Essas informa√ß√µes geralmente s√£o chamadas de Tags e cada formato de arquivo tem seu pr√≥prio formato de tag.  Vamos falar sobre os arquivos mp3 como os mais comuns. </p><br><p>  As tags s√£o mais f√°ceis de ler usando uma biblioteca pronta, por exemplo, usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">TagLib</a> . </p><br><p>  O formato mp3 cont√©m metadados em sua estrutura ID3, na qual podemos armazenar muitas informa√ß√µes.  Existem v√°rias op√ß√µes para o formato ID3, mas falaremos sobre o ID3 v2.3, no qual voc√™ pode armazenar a maioria dos dados.  A partir de informa√ß√µes √∫teis, voc√™ deve prestar aten√ß√£o a: <strong>nome, ano de grava√ß√£o, g√™nero, BPM (n√∫mero de batidas por minuto), dura√ß√£o da faixa</strong> .  Como esses campos podem nos ajudar na gera√ß√£o de conte√∫do?  Se tudo est√° claro com o BPM, ele √© usado durante a gera√ß√£o o tempo todo e falaremos sobre isso separadamente, ent√£o por que precisamos de outros campos?  Aqui voc√™ precisa mostrar imagina√ß√£o. </p><br><p>  Por exemplo, lemos o g√™nero e o ano.  Para come√ßar, precisamos processar essas informa√ß√µes um pouco.  Para simplificar, consideraremos apenas o ingl√™s.  As tags Mp3 (e outras tags) geralmente s√£o preenchidas manualmente; a partir daqui, seguem diferentes grafias de g√™neros, pontua√ß√£o diferente etc.  √â melhor trazer a tag resultante para um √∫nico formato para facilitar a compara√ß√£o com outras pessoas.  √â recomend√°vel remover todos os sinais de pontua√ß√£o, espa√ßos e converter a string em min√∫sculas.  Isso pode ser feito usando express√µes regulares. </p><br><p>  Ap√≥s essas manipula√ß√µes, ser√° muito mais f√°cil comparar os g√™neros de m√∫sicas.  Em seguida, voc√™ precisar√° criar uma base de g√™neros, com base em alguma fonte, e passar por ela para compilar seu banco de dados de tags.  Aqui est√° um exemplo de uma lista de todos os g√™neros: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">musicgenreslist.com</a> .  Naturalmente, voc√™ precisa escolher apenas o mais b√°sico. </p><br><p>  Eu n√£o respondi, por que essas dificuldades?  Vou dar exemplos (muito simplificados). <br>  Com base no g√™nero, podemos: </p><br><ul><li>  Alterar local (rock - floresta sombria, m√∫sica eletr√¥nica - espa√ßo, pa√≠s - deserto, pop - cidade etc.) </li><li>  Mudar personagem </li><li>  Mude inimigos, etc. </li></ul><br><p><img src="https://habrastorage.org/webt/xf/ri/y7/xfriy7rqpsny7hsrcrbezkncpts.jpeg"><br>  <em>Um exemplo de personagem baseado nas tags rock, electro, pop.</em> </p><br><p>  E ent√£o voc√™ pode inventar qualquer coisa!  Ano de lan√ßamento do √°lbum: 1960-1970?  Vista o personagem com as roupas desse per√≠odo.  Dura√ß√£o da trilha 10 minutos?  Deixe sua "cobra gerada musicalmente" ter uma cauda longa.  Existem muitas oportunidades e sempre h√° uma chance de surpreender o jogador. </p><br><h2 id="predstavlenie-audiofaylov-v-unity">  Representa√ß√£o de arquivos de √°udio no Unity </h2><br><p><img src="https://habrastorage.org/webt/dn/oa/fh/dnoafhs7ydzopthfrzaowcgvygi.png"><br>  <em>Tudo parece ser simples ...</em> </p><br><p>  O Unity possui v√°rios componentes principais para trabalhar com som: </p><br><ul><li>  O ouvinte de √°udio (ouvinte) se comporta como um microfone.  Ele recebe entrada de qualquer fonte de som (fonte de √°udio) na cena e reproduz sons pelos alto-falantes.  Para a maioria dos aplicativos, faz sentido adicionar um ouvinte √† c√¢mera principal - o objeto C√¢mera Principal. </li><li>  Fonte de √°udio reproduz o clipe de √°udio em cena.  Se o clipe de √°udio for um clipe 3D, a fonte ser√° reproduzida em uma determinada posi√ß√£o no espa√ßo e ser√° silenciada, dependendo da dist√¢ncia. </li><li>  Clipes de √°udio (clipes) cont√™m dados de √°udio usados ‚Äã‚Äãem fontes de √°udio.  O Unity suporta ativos de √°udio mono, est√©reo e multicanal.  O Unity pode importar os seguintes tipos de arquivo: .aif, .wav, .mp3 e .ogg. </li></ul><br><p><img src="https://habrastorage.org/webt/yo/gn/4u/yogn4ur4qy6vpafvedpkylajw-s.png"></p><br><p>  Se voc√™ estiver profundamente imerso no trabalho com som, precisar√° interagir diretamente com os clipes de √°udio.  Um clipe de √°udio cont√©m uma matriz de quadros de som (amostras) que voc√™ pode ler e substituir.  Com isso (e montes de matan), voc√™ pode determinar os par√¢metros das trilhas sonoras e produzir efeitos sonoros. </p><br><h2 id="muzykalnye-parametry-treka">  Configura√ß√µes da faixa de m√∫sica </h2><br><p>  Ent√£o, lemos alguns dados iniciais de nossa trilha e obtivemos os primeiros rudimentos de gera√ß√£o.  Agora voc√™ pode passar para a parte mais dif√≠cil.  Precisamos entender quais par√¢metros din√¢micos da pista podemos determinar e como eles podem ser usados ‚Äã‚Äãna jogabilidade.  Parte do material √© baseada no blog do est√∫dio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parallelcube</a> .  Os caras criam recursos e tutoriais para o Unreal Engine, pelos quais muitos agradecem a eles. </p><br><p>  As seguintes tarefas podem ser distinguidas: </p><br><ul><li>  Definindo um barril como um gatilho para efeitos especiais </li><li>  Determinando momentos calmos e altos em uma faixa </li><li>  Usando esses dados para criar um n√≠vel </li><li>  Usando esses dados para criar efeitos </li></ul><br><h3 id="opredelenie-bochki-v-treke-i-ispolzovanie-etogo-zvuka-kak-triggera">  Detectando um bumbo em uma faixa e usando esse som como gatilho. </h3><br><p>  Para come√ßar a trabalhar na determina√ß√£o dos par√¢metros da faixa, voc√™ precisa selecionar a m√∫sica.  Para facilitar o trabalho, voc√™ precisa de uma faixa na qual haja um barril √≥bvio e, de prefer√™ncia, transi√ß√µes n√≠tidas em volume.  Eu escolhi a faixa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Perturbator - Future Club</a> , que voc√™ pode ouvir no jogo Hotline Miami 2: Wrong Number. </p><br><p>  Aqui est√° uma pequena an√°lise da entrada dessa faixa (a faixa de √°udio foi especialmente reduzida) </p><br><p><img src="https://habrastorage.org/webt/lg/5r/8_/lg5r8_jmgic9_dygd7ouaziop1y.png"></p><br><ol><li>  O chamado fade in, ou introdu√ß√£o.  Neste momento, a faixa aumenta de volume. </li><li>  A principal for√ßa de choque aparece - o barril.  Os momentos da apar√™ncia do barril s√£o muito f√°ceis de ler na representa√ß√£o visual da faixa de √°udio.  Al√©m disso, um sintetizador de fundo soa aqui e seu ru√≠do √© vis√≠vel na faixa.  Se a pista n√£o tivesse sido comprimida, teria sido ainda mais clara.  (detalhes sobre compacta√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> ) </li><li>  Um sintetizador adicional aparece, o que diminui levemente a clareza da representa√ß√£o visual do barril </li><li>  Uma pausa que aparece antes de um momento brilhante na faixa (soltar). </li><li>  A parte principal, onde, al√©m do barril, aparece um sintetizador de baixo, o que distorce bastante a representa√ß√£o visual do sinal, mas o barril ainda pode ser distinguido. </li></ol><br><p>  Portanto, nossa principal tarefa √© determinar em que ponto nosso barril soa.  Essa √© uma tarefa bastante dif√≠cil, para a qual geralmente s√£o usadas bibliotecas de √°udio especiais.  Lembre-se, se houver op√ß√µes prontas, e voc√™ tiver o objetivo de fazer um efeito, e n√£o estudar o tapete.  parte, fa√ßa op√ß√µes prontas.  Se seu jogo tiver um or√ßamento e US $ 25 extras, voc√™ poder√° comprar um ativo especial do desenvolvedor 3y3net, chamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Beat Detection</a> .  Al√©m disso, voc√™ pode considerar uma √≥tima op√ß√£o do desenvolvedor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Allan Pichardo</a> .  Se voc√™ quiser entender como esses algoritmos funcionam, √© claro, escreva voc√™ mesmo do zero. </p><br><p>  Como vimos na faixa de √°udio, uma batida √© sempre claramente distinguida pelo n√≠vel de som.  Essa √© a sua ess√™ncia.  Os m√∫sicos processam e compactam a faixa especialmente para que a batida n√£o fique entupida com outros sons e tenha seu lugar na faixa de frequ√™ncia da faixa.  O bit √© sempre mais alto que o n√≠vel m√©dio de volume (M√©dia).  Se o som for mais alto que um determinado limite (Threshold), ent√£o, apenas olhando para a exibi√ß√£o gr√°fica da onda sonora, podemos dizer com confian√ßa "Sim, isso √© um pouco!". </p><br><p><img src="https://habrastorage.org/webt/fk/i_/d8/fki_d86fbvfj_nj-watpcbczg_y.gif"></p><br><p>  Gostaria de apresentar uma descri√ß√£o t√©cnica mais detalhada e algoritmos espec√≠ficos para determinar um pouco em um artigo separado (ser√° publicado depois de um tempo), pois esse t√≥pico vai muito al√©m do escopo deste material.  Em resumo, nesses algoritmos, o som passa primeiro pelos filtros para facilitar o processo, ap√≥s o qual a din√¢mica da energia sonora √© analisada.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui est√° um exemplo de um algoritmo desse tipo (aten√ß√£o, matlab!)</a> . </p><br><p>  Uma descri√ß√£o matem√°tica completa desse algoritmo pode ser encontrada neste artigo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Projeto e implementa√ß√£o de um algoritmo do Beat Detector</a> . </p><br><p>  Portanto, vamos imaginar que fomos capazes de escrever um script que determina em tempo real em que ponto um barril √© acionado.  Al√©m disso, com a ajuda do algoritmo, tamb√©m podemos determinar o BPM geral e entender onde o ritmo principal "bate" conosco.  O que podemos fazer com as informa√ß√µes recebidas? </p><br><p>  Voc√™ pode usar o Beathazard como exemplo e garantir que, para cada batida do ritmo principal, nossa nave atire com um laser convencional comum e, quando o cano atinja, atire com um super laser.  Ser√° algo parecido com isto: </p><br><p><img src="https://habrastorage.org/webt/9t/1z/ts/9t1ztsknz1gonebi2lzw7urv3p0.gif"></p><br><p>  Al√©m disso, podemos adicionar mais promo√ß√µes.  efeitos  E fa√ßa o n√≠vel pulsar junto com o bit: </p><br><p><img src="https://habrastorage.org/webt/yh/ga/e6/yhgae6kinv2oyb5aurq_c50ms60.gif"></p><br><p>  O mesmo algoritmo que determina o bit em tempo real, podemos usar para calcular o BPM (batimentos por minuto ou o n√∫mero de batimentos por minuto).  As informa√ß√µes de BPM podem ser usadas, por exemplo, para gerar n√≠veis de dificuldade e calcular pontos de b√¥nus.  Se a pista for r√°pida (150-180 BMP), o jogador receber√° um b√¥nus X5, etc. </p><br><h3 id="opredelenie-tihih-i-gromkih-momentov-v-treke">  Determinando momentos calmos e altos em uma faixa </h3><br><p>  Uma maneira de determinar momentos altos e silenciosos √© processar a faixa com um filtro passa-baixo e obter uma m√©dia m√≥vel para o n√≠vel de volume.  Depois disso, podemos salvar esse n√≠vel de volume em um formato conveniente para n√≥s, por exemplo, em uma matriz flutuante. </p><br><p>            ,           . ,       ,    ,  .          ,    .    ,     . </p><br><p><img src="https://habrastorage.org/webt/pe/ar/vi/pearviknrx8wgkrkdar9bfmxum4.gif"></p><br><h3 id="sozdanie-urovnya-na-osnove-audiodannyh">     . </h3><br><p>   ,   ,   ,        ,    (     ).      , ,   2D-?          .          : </p><br><p><img src="https://habrastorage.org/webt/i5/fk/vs/i5fkvsoesbwbwf1mbx7ysar2j20.png"></p><br><p>            3D,    2D .  ,  Audiosurf     ,          . </p><br><p><img src="https://habrastorage.org/webt/av/tk/ip/avtkipe2mfxasz1wzqjfnj9hyy0.png"><br> <em>   Elastomania,      ?    !?</em> </p><br><p>                  , ,  ,    -  . </p><br><h2 id="zaklyuchenie">  Conclus√£o </h2><br><p>  ,         ,     .     ,       ,         ,    ,            . ,    ,       ,      .    ,      ,           .                 Unity.   ! </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1y/u8/va/1yu8va0zuojgi-b0dos-rrkilw0.jpeg" width="700"></div><br><h2 id="poleznye-ssylki">  Links √∫teis </h2><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    </a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teoria do som. </font><font style="vertical-align: inherit;">O que voc√™ precisa saber sobre o som para trabalhar com ele. </font><font style="vertical-align: inherit;">Experimente o Yandex.Music</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visualiza√ß√£o de m√∫sica: das abordagens tradicionais √†s interfaces modernas</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No√ß√µes b√°sicas de codifica√ß√£o de √°udio com perdas. </font><font style="vertical-align: inherit;">Testando a vers√£o beta do Opus 1.3</font></font></a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compress√£o de som</font></font></a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt429872/">https://habr.com/ru/post/pt429872/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt429854/index.html">Como fazer um romance interracial no jogo e n√£o fazer o jogador rir</a></li>
<li><a href="../pt429856/index.html">Migrando do Ubuntu para o Windows 10, Hyper-V e se livrando de um roteador de ferro</a></li>
<li><a href="../pt429858/index.html">Retire dinheiro da Upwork. An√°lise comparativa</a></li>
<li><a href="../pt429860/index.html">"Monstros em jogos ou como surpreender um jogador"</a></li>
<li><a href="../pt429866/index.html">Como: Termos de TI em ingl√™s</a></li>
<li><a href="../pt429876/index.html">Pesquisadores superaram os bloqueadores de an√∫ncios mais poderosos, a guerra de formatos est√° chegando</a></li>
<li><a href="../pt429878/index.html">Por que com o crescimento da empresa, os desenvolvedores que estavam na vanguarda est√£o "exagerados"</a></li>
<li><a href="../pt429880/index.html">Pix4D - de fotos a medi√ß√µes</a></li>
<li><a href="../pt429882/index.html">Controle de LEDs RGB via microcontroladores Cypress UDB PSoC</a></li>
<li><a href="../pt429884/index.html">Confer√™ncia PROSTOR 2018: perguntas e respostas sobre o futuro do armazenamento</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>