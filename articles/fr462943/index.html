<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßô üôèüèº üíáüèª Chasser les Wumpus ou exp√©rimenter l'√©criture d'un jeu Android classique üò≠ üë©üèº‚Äçü§ù‚Äçüë®üèª üê¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Avez-vous d√©j√† entendu parler de Vampus? Quelle que soit la r√©ponse - bienvenue dans son mandat! 

 Dans cet article, je veux vous raconter mon histoi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Chasser les Wumpus ou exp√©rimenter l'√©criture d'un jeu Android classique</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462943/"><img src="https://habrastorage.org/webt/hp/ja/ij/hpjaijkod2extsjskmvlmgv5f0w.jpeg" alt="image"><br><br>  <i>Avez-vous d√©j√† entendu parler de Vampus?</i>  <i>Quelle que soit la r√©ponse - bienvenue dans son mandat!</i> <br><br>  Dans cet article, je veux vous raconter mon histoire de cr√©ation d'un jeu pour Android.  Selon la comp√©tence du lecteur, l'exp√©rience, les r√©flexions et les d√©cisions que je transmets seront plus ou moins utiles.  Cependant, j'esp√®re que mon histoire, au moins, sera int√©ressante. <a name="habracut"></a><br><a name="toMenu"></a><br><h2>  Table des mati√®res </h2><br>  1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Introduction</a> <br>  2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Choix des fonds</a> <br>  3. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'id√©e du projet</a> <br>  4. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JE SENTE UN WUMPUS</a> <br>  5. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La base des bases - la structure du projet</a> <br>  6. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">G√©n√©ration du labyrinthe de Vampus et travail avec lui</a> <br>  7. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Stockage des messages du jeu et de leur sortie pour le joueur</a> <br>  8. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le premier r√©sultat</a> <br>  9. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">M√™me les petits jeux sont dignes de l'histoire.</a> <br>  10. La <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">transformation Vampus et le r√©sultat final</a> <br>  11. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conclusion</a> <br><a name="to1"></a><br><h2>  1. Introduction </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Table des mati√®res</a> <br><br>  Tout d'abord, quelques mots sur vous.  La programmation, malheureusement, n'est pas mon activit√© principale, mais je suis heureuse d'y consacrer mon temps libre. <br><br>  Pour une raison quelconque, j'ai choisi la fa√ßon de cr√©er des jeux mobiles.  Mes projets pr√©c√©dents pour les appareils mobiles ont √©t√© cr√©√©s dans l'environnement Qt en conjonction avec les langages QML et C ++.  J'ai beaucoup appr√©ci√© ce trio, mais en analysant mes id√©es, j'ai r√©alis√© qu'√† l'avenir, il faudrait trop de temps et d'efforts pour r√©soudre certains probl√®mes avec les moyens que je connaissais.  Par cons√©quent, en r√©fl√©chissant au prochain projet, j'ai d√©cid√© de trouver de nouveaux outils de d√©veloppement plus adapt√©s et d'acqu√©rir de l'exp√©rience avec eux. <br><a name="to2"></a><br><h2>  2. Choix des fonds </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Table des mati√®res</a> <br><br>  Auparavant, je ne faisais attention qu'√† Android, et dans le nouveau projet, j'ai d√©cid√© de me concentrer sur ce syst√®me d'exploitation, de me familiariser avec Android Studio, qui en est originaire, d'essayer de nouveau Java pour moi-m√™me (et √† l'avenir, si vous l'aimez, promettant √©galement Kotlin). <br><br>  Je n'ai jamais utilis√© AS ou Java auparavant, et j'ai √©t√© confront√© √† un gigantesque front de travail avec de nombreuses nouvelles t√¢ches, et j'√©tais pr√™t √† me lancer dans la bataille, il ne restait plus qu'√† proposer un projet. <br><a name="to3"></a><br><h2>  3. L'id√©e du projet </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Table des mati√®res</a> <br><br>  On sait que le mieux, c'est que la formation se d√©roule sur des t√¢ches r√©elles, et surtout celles qui l'int√©ressent.  Pour moi, un tel projet de formation devait √™tre un jeu pour lequel je formais un certain nombre d'exigences: <br><br><ol><li>  Rejouer la valeur. </li><li>  La simplicit√© des m√©caniques de jeu. </li><li>  Utilisation minimale des graphiques. </li><li>  Le gameplay devrait obliger le joueur √† r√©fl√©chir. </li><li>  La partie de jeu ne devrait pas √™tre longue. </li><li>  Mise en ≈ìuvre rapide du projet (2 mois). </li><li>  Simplicit√© et facilit√© de l'interface utilisateur. </li></ol><br>  Apr√®s avoir tri√© de nombreuses options et √©valu√© objectivement mes forces, en me rappelant que peu importe le temps et les ressources allou√©s au d√©but, en fait, beaucoup plus sera n√©cessaire, je suis arriv√© √† la conclusion qu'il vaut mieux prendre les classiques test√©s comme base de formation que d'inventer quelque chose qui leur est propre.  Je ne voulais absolument pas cr√©er un serpent conditionnel et j'ai commenc√© √† √©tudier les vieux jeux.  J'ai donc d√©couvert le curieux Hunt the Wumpus. <br><a name="to4"></a><br><h2>  4. JE SENTE UN WUMPUS </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Table des mati√®res</a> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b48/769/35e/b4876935e124ffff57c7f718dda7a6bf.png" alt="image"></div><br>  Vampus Hunting est un jeu de texte classique invent√© par Gregory Yob en 1972. La m√™me ann√©e, il a re√ßu une description du jeu et du code source dans un article de magazine. <br><br>  L'essence du jeu est l'√©tude par le joueur du labyrinthe de dod√©ca√®dre, qui est la maison du vampire mal√©fique, et tente de deviner, sur la base des messages indicateurs affich√©s dans le journal de jeu, qui se trouvent dans les salles sup√©rieures.  En plus de Vampus lui-m√™me (d√©gage une odeur d√©sagr√©able), il y a des chauves-souris (du bruit est entendu) transportant le joueur dans une pi√®ce al√©atoire, et des piq√ªres (p√©n√®tre), frapp√©es dans lesquelles m√®ne √† la fin de la partie.  Le but du jeu est de tuer le Vampus, pour lequel le joueur a 5 fl√®ches qui peuvent voler de 1 √† 5 pi√®ces √† la fois (le joueur d√©cide lui-m√™me quel type de "force" pour faire le coup).  Ainsi, le joueur a deux actions: tirer de l'arc, aller dans la salle.  Le r√©sultat d√©pendra de la part de chance et du degr√© de conscience. <br><br>  En g√©n√©ral, j'ai aim√© la m√©canique: c'est simple, mais en m√™me temps avec des √©l√©ments de risque.  Il n'y avait pas de jeux int√©ressants sur Vampus sur Google Play (sauf un nouveau jeu √† cette √©poque dans le monde Lovecraft, dans lequel, comme je l'ai d√©couvert plus tard, il √©tait bas√© sur les m√™mes m√©canismes Vampus. Mais cet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> concerne la cr√©ation d'un jeu sur Habr√©), il a donc √©t√© accept√© la d√©cision de prendre Vampus comme base.  Je me suis fix√© comme objectif de conserver le jeu classique, mais je le mets l√©g√®rement √† jour et j'ajoute de nouvelles fonctionnalit√©s. <br><a name="to5"></a><br><h2>  5. La base des bases - la structure du projet </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Table des mati√®res</a> <br><br>  Tout d'abord, j'ai appris les r√®gles du jeu classique et me suis familiaris√© avec diverses impl√©mentations de Vampus.  Ensuite, j'ai fait un sch√©ma avec la logique du jeu (cliquable): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/q2/pp/is/q2ppisokkh-yozlyjshuw3mw6lw.jpeg"></div><br>  Au d√©but, le sch√©ma √©tait utile, car  Autoris√© √† analyser les m√©canismes du jeu, √† √©liminer les d√©fauts et √† cr√©er quelque chose qui leur est propre.  De plus, ce sch√©ma a √©t√© utile lorsque j'ai travaill√© plus tard avec l'artiste pour expliquer l'essence du jeu. <br><br>  J'ai divis√© le projet en 4 parties, dans chacune desquelles diff√©rentes t√¢ches ont √©t√© r√©solues.  Je n'en donnerai que quelques-uns. <br><br>  <b>1. M√©canique du jeu</b> <br><br><ul><li>  Sous quelle forme les informations sur le donjon seront-elles stock√©es? </li><li>  De quel type et de combien de variables avez-vous besoin? </li><li>  √âcriture d'algorithmes: formation d'un donjon, vol de fl√®che, v√©rification du r√©sultat du tir, vol de fl√®che avec une s√©quence de pi√®ces incorrectement s√©lectionn√©e, d√©placement d'un joueur, v√©rification d'une pi√®ce lors du d√©placement, d√©placement d'un joueur avec des chauves-souris, etc. </li><li>  Comment afficher les informations dans le journal de jeu et dans quel ordre? </li><li>  Dans quel ordre v√©rifier la chambre? </li></ul><br>  <b>2. UI</b> <br><br><ul><li>  Quelles activit√©s devraient figurer dans l'application?  √Ä quoi devraient-ils ressembler et quels √©l√©ments devraient y figurer? </li><li>  Quels param√®tres peuvent √™tre modifi√©s dans les param√®tres? </li><li>  Ai-je besoin d'images dans le jeu? </li><li>  Quel devrait √™tre en g√©n√©ral le style de l'application (couleurs, ambiance, style de message)? </li><li>  Quelles polices utiliser? </li></ul><br>  <b>3. Autre</b> <br><br><ul><li>  Connectez-vous aux services Google Play </li><li>  Travailler avec des fichiers XML </li><li>  Quelles polices utiliser? </li></ul><br>  <b>4. √âcrire du texte pour le jeu</b> <br><br><ul><li>  Messages du jeu </li><li>  Les r√®gles </li><li>  Description du jeu pour Google Play </li></ul><br>  Il est plut√¥t inutile, plut√¥t qu'impossible, de tout d√©crire, donc je ne me concentrerai que sur certains points, apr√®s quoi je montrerai le premier r√©sultat obtenu. <br><a name="to6"></a><br><h2>  6. G√©n√©ration du labyrinthe de Vampus et travail avec lui </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Table des mati√®res</a> <br><br>  Le Labyrinthe de Vampus est un dod√©ca√®dre, qui peut √™tre repr√©sent√© comme une matrice <b>G de</b> dimension 20x20.  Nous num√©rotons les sommets de 0 √† 19. Si l'√©l√©ment de matrice est 1, il y a un passage entre les sommets (chambres), sinon, non. <br><br>  Nous introduisons √©galement la matrice <b>N</b> de dimension 20x3, qui stocke les indices de voisins pour chaque pi√®ce.  Cette matrice acc√©l√©rera le travail avec <b>G.</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rx/s3/4p/rxs34ps8u9pan8saswot4225uow.jpeg"></div><br>  Les matrices <b>G</b> et <b>N</b> sont cousues dans le code du jeu et ne changent pas (bien s√ªr, le stockage de <b>G est</b> inutile, car vous ne pouvez travailler qu'avec <b>N</b> , mais pour le moment, laissons cela de cette fa√ßon).  Ce sont les ¬´vrais¬ª indices de sommet d'un dod√©ca√®dre donn√© une fois pour toutes.  Pour le joueur, des indices ¬´jeu¬ª sont form√©s, qui sont une sorte de masque des ¬´vrais¬ª, en un vecteur <b>V de</b> dimension 20 comme suit: <br><br><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  ""    for (byte i = 0; i &lt; 20; i++) { V[i] = i; } //    ""  for (int i = 0; i &lt; 20; i++) { int tmpRand = random.nextInt(20); byte tmpVar = V[i]; V[i] = V[tmpRand]; V[tmpRand] = tmpVar; }</span></span></code> </pre> <br>  Ainsi, l'image suivante est obtenue: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jo/4f/sy/jo4fsylsevqqvfz3vgjbzj0gtfe.jpeg"></div><br>  Le vecteur V est form√© √† chaque nouveau jeu, ce qui donne au joueur un "nouveau" donjon. <br><br>  Pour √©tablir la correspondance entre l'index de salle ¬´vrai¬ª et ¬´jeu¬ª, la m√©thode de conversion <b>indByNmb</b> est utilis√©e: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">byte</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indByNmb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> room)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> ind = -<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; V.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (V[i] == room) { ind = i; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ind; }</code> </pre><br>  En entr√©e, la m√©thode <b>indByNmb</b> obtient l'index "jeu" de la salle <b>room</b> , et en sortie, elle donne l' <b>ind</b> "true". <br><br>  Apr√®s avoir g√©n√©r√© la structure du donjon, nous pla√ßons: 2 troupeaux de chauves-souris, 2 trous, un Vampus et un joueur: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] randomRooms = {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">19</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">20</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> tmpRand = random.nextInt(<span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> tmpVar = randomRooms[i]; randomRooms[i] = randomRooms[tmpRand]; randomRooms[tmpRand] = tmpVar; } P = randomRooms[<span class="hljs-number"><span class="hljs-number">0</span></span>]; W = randomRooms[<span class="hljs-number"><span class="hljs-number">1</span></span>]; Pits[<span class="hljs-number"><span class="hljs-number">0</span></span>] = randomRooms[<span class="hljs-number"><span class="hljs-number">2</span></span>]; Pits[<span class="hljs-number"><span class="hljs-number">1</span></span>] = randomRooms[<span class="hljs-number"><span class="hljs-number">3</span></span>]; Bats[<span class="hljs-number"><span class="hljs-number">0</span></span>] = randomRooms[<span class="hljs-number"><span class="hljs-number">4</span></span>]; Bats[<span class="hljs-number"><span class="hljs-number">1</span></span>] = randomRooms[<span class="hljs-number"><span class="hljs-number">5</span></span>];</code> </pre><br>  Un tel placement garantit qu'il n'y aura pas deux habitants dans une pi√®ce et que le joueur ne sera pas jet√© dans la pi√®ce vers le Vampus d√®s le d√©but. <br><br>  La g√©n√©ration compl√®te du donjon est la suivante: <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] V = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[<span class="hljs-number"><span class="hljs-number">20</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// ""  int P; //  , byte W; //   byte[] Bats = new byte[2]; //    , byte[] Pits = new byte[2]; //    public void generateDungeons() { resetVars(); //      for (int i = 0; i &lt; 20; i++) { int tmpRand = random.nextInt(20); byte tmpVar = V[i]; V[i] = V[tmpRand]; V[tmpRand] = tmpVar; } byte[] randomRooms = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19}; for (int i = 0; i &lt; 20; i++) { int tmpRand = random.nextInt(20); byte tmpVar = randomRooms[i]; randomRooms[i] = randomRooms[tmpRand]; randomRooms[tmpRand] = tmpVar; } P = randomRooms[0]; W = randomRooms[1]; Pits[0] = randomRooms[2]; Pits[1] = randomRooms[3]; Bats[0] = randomRooms[4]; Bats[1] = randomRooms[5]; }</span></span></code> </pre><br></div></div><br>  Vous pouvez maintenant impl√©menter tous les algorithmes de la m√©canique de jeu.  Ainsi, par exemple, la sortie des salles voisines se produit lorsqu'un joueur <b>entre dans la</b> salle avec l'index <b>currentRoom</b> : <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printNearRooms</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> currentRoom)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> ind = indByNmb(currentRoom); appendText(V[N[ind][<span class="hljs-number"><span class="hljs-number">0</span></span>]], V[N[ind][<span class="hljs-number"><span class="hljs-number">1</span></span>]], V[N[ind][<span class="hljs-number"><span class="hljs-number">2</span></span>]]); }</code> </pre><br>  En entr√©e, la m√©thode <b>printNearRooms</b> obtient l'index ¬´jeu¬ª actuel de la salle <b>currentRoom</b> . <br><br>  Consid√©rez la m√©canique d'un exemple.  Laissez le joueur se d√©placer dans une nouvelle salle et un message appara√Æt: "Maintenant, je suis dans la salle 8".  Le nombre 8 est un indice de jeu.  L'indice de pi√®ce ¬´vrai¬ª est 6 (voir les captures d'√©cran ci-dessus).  Le code fonctionne sp√©cifiquement avec le ¬´vrai¬ª index, c'est-√†-dire  6. Pour 6, les indices des ¬´vrais¬ª voisins sont d√©termin√©s: 2, 5, 7. Les ¬´jeux¬ª, respectivement, seront: 10, 0, 7. Nous montrons le joueur dans le journal: ¬´Je peux aller dans les salles 10, 0, 7¬ª. <br><br>  Ainsi, en formant √† chaque nouveau jeu le vecteur <b>V</b> et en travaillant avec les index "vrai" et "jeu" du graphe du labyrinthe, l'apparence du fait que chaque jeu est unique est cr√©√©e. <br><br>  Gr√¢ce √† la fonction <b>appendText, les</b> messages sont affich√©s √† un intervalle sp√©cifi√©.  Nous la rencontrerons plus tard. <br><br>  Voici un exemple de v√©rification de la proximit√© de souris dans la pi√®ce: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isBatsNear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> answer = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> indP = indByNmb(P); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((V[N[indP][i]] == Bats[<span class="hljs-number"><span class="hljs-number">0</span></span>]) || (V[N[indP][i]] == Bats[<span class="hljs-number"><span class="hljs-number">1</span></span>])) { answer = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> answer; }</code> </pre><br><a name="to7"></a><br><h2>  7. Stockage des messages du jeu et de leur sortie pour le joueur </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Table des mati√®res</a> <br><br>  Le jeu classique √©tait un processus d'interaction entre le joueur et la console, c'est-√†-dire  le jeu √©tait purement textuel.  Je voulais enregistrer cette fonctionnalit√© pour laquelle j'ai divis√© tous les messages du jeu en blocs, par exemple: <br><br><ul><li>  Le premier message du nouveau jeu. </li><li>  Un message quand un joueur bouge. </li><li>  Message √† proximit√© des stands. </li><li>  Message lors du d√©placement de Vampus. </li><li>  Message en tombant dans un trou. </li></ul><br>  Le texte est stock√© dans un fichier XML.  Chaque bloc a plusieurs options de message pour une vari√©t√© de gameplay. <br><br>  Un exemple de bloc de message qui s'affiche s'il y a un trou dans l'une des pi√®ces voisines: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g_pitsNear_1"</span></span></span><span class="hljs-tag">&gt;</span></span>‚Äî  \n<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g_pitsNear_2"</span></span></span><span class="hljs-tag">&gt;</span></span>‚Äî    \n<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g_pitsNear_3"</span></span></span><span class="hljs-tag">&gt;</span></span>‚Äî     \n<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g_pitsNear_4"</span></span></span><span class="hljs-tag">&gt;</span></span>‚Äî  , \n<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g_pitsNear_5"</span></span></span><span class="hljs-tag">&gt;</span></span>‚Äî   \n<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string-array</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g_pitsNear"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span>@string/g_pitsNear_1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span>@string/g_pitsNear_2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span>@string/g_pitsNear_3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span>@string/g_pitsNear_4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span>@string/g_pitsNear_5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string-array</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Avec cette structure, vous pouvez facilement modifier les messages existants ou ajouter de nouveaux messages sans affecter le code Java. <br><br>  Si, par exemple, lors de la v√©rification de la salle, la m√©thode <b>isBatsNear</b> pr√©sent√©e pr√©c√©demment a renvoy√© <b>true</b> , nous obtenons le bloc de message requis √† partir de XML, puis en prenons un au hasard comme argument pour <b>appendText</b> : <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isBatsNear()) { String[] g_batsNear = getResources().getStringArray(R.array.g_batsNear); appendText(g_batsNear[random.nextInt(g_batsNear.length)]); }</code> </pre><br>  Les messages du jeu sont envoy√©s √† la console, qui est un objet <b>TextView</b> .  Regardons la m√©thode <b>appendText</b> . <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appendText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String str)</span></span></span><span class="hljs-function"> </span></span>{ msgBuffer.add(str); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isTimerGameMsgWork) { mTimerGameMsg.run(); isTimerGameMsgWork = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } }</code> </pre><br>  Lorsqu'il devient n√©cessaire d'afficher un message de jeu, la m√©thode <b>appendText</b> est <b>appel√©e</b> , qui la prend comme argument.  Dans la m√©thode elle-m√™me, une ligne est d'abord ajout√©e au tampon <b>msgBuffer</b> .  Ceci est suivi de la v√©rification de la variable bool√©enne <b>isTimerGameMsgWork</b> .  Il accepte <b>vrai</b> dans les cas o√π le minuteur <b>mTimerGameMsg</b> est <b>d√©marr√©</b> .  Lorsque cette minuterie fonctionne, puis √† partir du tampon <b>msgBuffer,</b> selon le principe FIFO (First In First Out), les messages sont <b>re√ßus</b> √† un intervalle sp√©cifi√© <b>mIntervalGameMsg</b> et ajout√©s au journal du jeu - <b>txtViewGameLog</b> . <br><br>  Le code de sortie du message complet: <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="java hljs">ArrayList&lt;String&gt; msgBuffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); Handler mHandlerGameMsg; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mIntervalGameMsg = <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isTimerGameMsgWork = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appendText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String str)</span></span></span><span class="hljs-function"> </span></span>{ msgBuffer.add(str); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isTimerGameMsgWork) { mTimerGameMsg.run(); isTimerGameMsgWork = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Runnable mTimerGameMsg = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Runnable() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (msgBuffer.size() == <span class="hljs-number"><span class="hljs-number">0</span></span>) { mHandlerGameMsg.removeCallbacks(mTimerGameMsg); isTimerGameMsgWork = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { txtViewGameLog.append(msgBuffer.get(<span class="hljs-number"><span class="hljs-number">0</span></span>)); msgBuffer.remove(<span class="hljs-number"><span class="hljs-number">0</span></span>); mHandlerGameMsg.postDelayed(mTimerGameMsg, mIntervalGameMsg); } } };</code> </pre><br></div></div><br><a name="to8"></a><br><h2>  8. Le premier r√©sultat </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Table des mati√®res</a> <br><br>  Apr√®s un mois de d√©veloppement, la premi√®re version jouable du jeu avec des fonctionnalit√©s enti√®rement impl√©ment√©es a √©t√© re√ßue.  Je joins des captures d'√©cran: <br><br><div class="spoiler">  <b class="spoiler_title">Captures d'√©cran de la premi√®re version du jeu</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/zh/tq/fc/zhtqfcmbe0mrsyhzs8fkamiczcq.png" width="300"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1j/rp/pp/1jrpppw8ilbwgsqjeinxb0spkss.png" width="300"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sn/s7/rh/sns7rh_i4jxngizz-qwh-1fh-0a.png" width="300"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vo/ey/iz/voeyiz_ddei0p8o8lxxjdamzn18.png" width="300"></div><br></div></div><br>  Sur les captures d'√©cran pr√©sent√©es, vous pouvez voir: le menu principal, la fen√™tre des r√®gles, la fen√™tre des param√®tres, la fen√™tre du jeu. <br><br>  Bien s√ªr, j'ai compris que le r√©sultat √©tait compl√®tement inint√©ressant.  L'essentiel est que j'ai acquis une exp√©rience pratique en AS et Java, ce qui √©tait la premi√®re t√¢che. <br><br>  Le joueur, comme dans le jeu classique, devait interagir via la console: saisir le num√©ro de la pi√®ce √† d√©placer ou l'itin√©raire de la fl√®che pour voler.  Dans les param√®tres, j'ai permis de changer la taille de la police et la transparence de l'arri√®re-plan.  J'ai suppos√© que pour chaque fen√™tre de jeu, il y aurait son propre fond d'image (afin de diversifier l√©g√®rement le gameplay, ha!). <br><br>  Ensuite, j'ai pr√©vu de remplacer les images existantes (que j'ai prises sans scrupule sur Internet) par celles que l'artiste dessinerait.  Ensuite, je publierais le jeu sur le march√© du jeu et l'oublierais en toute s√©curit√©, en appliquant l'exp√©rience acquise √† de nouveaux projets.  Et puis je ne pouvais pas imaginer combien Vampus pouvait changer ... <br><a name="to9"></a><br><h2>  9. M√™me les petits jeux sont dignes de l'histoire. </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Table des mati√®res</a> <br><br>  Quand une personne vient travailler avec l'√¢me, le projet n'en profite que.  J'ai eu la chance que l'artiste, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Anastasia Frolikova</a> , se soit av√©r√©e √™tre une telle personne.  C'est-√†-dire  au lieu de simplement dessiner ce dont j'avais besoin, elle s'est int√©ress√©e au monde du jeu et voulait comprendre comment cela fonctionne.  Et soudain, il s'est av√©r√© que, dans l'ensemble, il n'y avait pas de paix!  Qui est ce vampus?  Et pourquoi un joueur devrait-il le tuer?  √Ä quoi ressemblent les salles Vampus?  Et ainsi de suite, ainsi de suite, auquel je ne pensais pas et que je n'avais pas l'intention de dire au joueur.  En cons√©quence, nous avons convenu que m√™me un jeu aussi petit devrait avoir sa propre histoire.  Et elle est apparue. <br><br>  Selon notre l√©gende, le Vampus, bien qu'ancien, mais pas une cr√©ature mythique mal√©fique qui aime se moquer des gens.  Oui, il vit dans un labyrinthe, mais ce labyrinthe n'est pas sous la forme d'un donjon sombre classique, mais sous la forme d'une maison inimaginable compos√©e d'un tas de pi√®ces, dont le contenu caract√©rise Vampus.  Ainsi, par exemple, dans une des salles il y a un cin√©ma, sur les murs duquel se trouvent des affiches de ses films pr√©f√©r√©s, et dans l'autre il y a son placard, o√π il pr√©pare ses "farces". <br><br><div style="text-align:center;"><img width="300" src="https://habrastorage.org/webt/nz/n4/wt/nzn4wtiuursbcwufsw51ylpfuc4.jpeg"></div><br>  Le joueur d'un chasseur sans nom est devenu un habitu√© du forum cryptozoologique qui veut prouver l'existence de Vampus.  Nous avons remplac√© l'arc et la fl√®che classiques par un appareil photo et un film, et le but du jeu n'√©tait pas de tuer Vampus, mais d'obtenir sa photo.  Soit dit en passant, le menu principal a √©t√© refait pour un forum o√π les gens discutent de Vampus, et √† partir de la discussion, le joueur peut en apprendre davantage. <br><br><div class="spoiler">  <b class="spoiler_title">La premi√®re version du menu principal, r√©alis√©e sous forme de forum</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/jj/m9/qi/jjm9qirjviamgd49jzag_p-edqq.jpeg" width="300"></div></div></div><br>  Quant aux autres aspects, ils sont rest√©s quasiment inchang√©s: les souris agissent de la m√™me mani√®re, et entrer dans le trou a commenc√© √† entra√Æner un crash, une panne de cam√©ra et la fin du jeu (et non la mort du joueur). <br><br><div style="text-align:center;"><img width="300" src="https://habrastorage.org/webt/oz/sm/v_/ozsmv_qxhdyepdscbqx5qs5jjoi.jpeg"></div><br>  Un autre moment sur la cam√©ra.  Dans le jeu classique, le joueur pouvait tirer une fl√®che dans une plage de 1 √† 5 pi√®ces et cela semblait logique.  Nous avons un appareil photo au lieu d'un arc (prenant des photos de 1 √† 3 pi√®ces √† la fois, mais fonctionnant comme une fl√®che classique qui frappe Vampus).  Et √ßa ... √ßa a l'air bizarre, non?  Il y avait une id√©e de r√©duire la port√©e de la cam√©ra √† 1 pi√®ce afin que vous puissiez prendre des photos de la seule voisine, mais cela, d'une part, complique le jeu, et d'autre part, des situations peuvent √™tre obtenues o√π le jeu ne peut pas √™tre gagn√©, ce qui est faux.  En g√©n√©ral, c'est le moment qui me hante toujours personnellement, mais je n'ai pas encore trouv√© de solution. <br><br>  En ce qui concerne le style et l'humeur du jeu.  Presque tous les jeux sur Vampus sont faits dans des tons gris ennuyeux, et les actions se d√©roulent dans des endroits sombres des donjons.  Par cons√©quent, nous avons d√©cid√© que notre jeu devrait √™tre diff√©rent de tout cela et √™tre fait avec humour et dans des couleurs vives. <br><br><div style="text-align:center;"><img width="300" src="https://habrastorage.org/webt/tk/9l/dz/tk9ldz0tthvuxjyct602egaatoq.jpeg"></div><br><br><a name="to10"></a><br><h2>  10. La transformation Vampus et le r√©sultat final </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Table des mati√®res</a> <br><br>  Ensuite, 2 autres mois de travail sur le jeu nous attendaient.  Puisque Vampus dispose de 20 chambres, chacune a son propre int√©rieur.  De plus, des ic√¥nes de r√©alisations, des ic√¥nes du jeu ont √©t√© dessin√©es, des d√©cisions sur la conception en g√©n√©ral et l'interface utilisateur ont √©t√© prises.  Le texte complet du jeu a √©galement √©t√© ajout√©, le code a √©t√© compl√©t√© et optimis√©, de nouvelles fonctions ont √©t√© ajout√©es (par exemple, un bloc-notes est apparu pour enregistrer des informations pendant le jeu).  En g√©n√©ral, le Vampus a subi des changements majeurs. <br><br>  Les salles, par exemple, ont √©t√© cr√©√©es comme suit: <br><br><img src="https://habrastorage.org/webt/in/q4/jc/inq4jcvrpg6vhfmmlcxvgumo1iq.jpeg" alt="image"><br>  Il y a 20 salles, toutes uniques, et le joueur re√ßoit un "nouveau" labyrinthe √† chaque partie.  Comment rendre chaque nouvelle photo de jeu attach√©e √† de nouvelles salles?  La plus simple consiste √† utiliser la m√™me approche d'index "vrai" et "jeu": <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">changeImgOfRoom</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ImageView img = findViewById(R.id.imgRoom); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ind = indByNmb(P); String imgName = <span class="hljs-string"><span class="hljs-string">"room_"</span></span> + ind; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id = getResources().getIdentifier(imgName, <span class="hljs-string"><span class="hljs-string">"drawable"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getPackageName()); Glide.with(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) .load(id) .transition(DrawableTransitionOptions.withCrossFade()) .into(img); }</code> </pre><br>  Les images de format carr√© (pour r√©duire la distorsion lors de la visualisation sur diff√©rents √©crans) sont stock√©es dans des ressources portant les noms [room_0;  room_1;  ..., chambre_19].  Et ils sont, en fait, associ√©s aux ¬´vrais¬ª indices du dod√©ca√®dre, mais pour le joueur, chaque nouveau jeu pour la m√™me pi√®ce aura des images diff√©rentes.  Pourquoi est-ce n√©cessaire?  Afin de donner la possibilit√© dans une partie de jeu sp√©cifique de corr√©ler des informations textuelles avec l'image d'une pi√®ce particuli√®re ("ouais, je me souviens que dans la salle X, qui √©tait le salon, il y avait un brouillon") et que cela n'a pas fonctionn√© "pourquoi est-ce toujours dans ma chambre X est la m√™me image? "  Tout pour la vari√©t√© et aider le joueur (cependant, comme l'exp√©rience l'a montr√©, il n'y a pas d'aide de la m√©morisation visuelle, il est plus efficace de travailler avec du texte). <br><br>  Finalement, nous avons eu une nouvelle version du jeu.  Et tu sais quoi?  Le vampus est devenu sacr√©ment attrayant, et surtout, c'est toujours le m√™me Vampus classique, mais dans une nouvelle maison confortable! <br><br><div class="spoiler">  <b class="spoiler_title">Captures d'√©cran de la deuxi√®me version du jeu</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/qp/9h/mb/qp9hmbsp51ktglkb7iod8tm9ysq.jpeg" width="300"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pe/wn/hn/pewnhnr7px4ejhf5ko1xw11dwlk.jpeg" width="300"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ll/cd/ch/llcdchk4835c5xxhkkoeajjbzvi.jpeg" width="300"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/bw/ny/zobwnyzsxnrqs0-cnhvdlzag1zw.jpeg" width="300"></div><br></div></div><br>  Sur les captures d'√©cran: le menu principal, la fen√™tre des r√®gles, la fen√™tre des param√®tres, la fen√™tre du jeu. <br><br>  En ce qui concerne la m√©canique, elle n'est que l√©g√®rement modifi√©e et renomm√©e (enfin, en fait, y a-t-il une diff√©rence: un appareil photo ou un arc, si vous avez besoin de faire la m√™me chose?).  Le changement le plus notable dans la m√©canique est de simplifier le processus d'interaction entre le joueur et le jeu - l'entr√©e classique des num√©ros de pi√®ce √† l'aide du clavier a √©t√© supprim√©e.  Maintenant, pour basculer entre les pi√®ces, vous devez s√©lectionner 1 num√©ro sur 3 dans la fen√™tre pop-up, et pour former le ¬´parcours¬ª pour la photographie, faites simplement d√©filer les roues du tambour: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_f/is/yj/_fisyjclhhj5unjkm9myeinpe0w.jpeg" width="300"></div><br>  Dans la vid√©o ci-dessous, vous pouvez voir le r√©sultat final: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Yfa1x3a6Hcg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><a name="to11"></a><br><h2>  11. Conclusion </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Table des mati√®res</a> <br><br>  La premi√®re version du jeu a √©t√© re√ßue par moi dans un mois de d√©veloppement, allouant 1 √† 2 heures apr√®s le travail.  En m√™me temps, ni AS ni Java ne m'√©taient auparavant familiers.  La deuxi√®me version du jeu a pris encore 2 mois.  Ainsi, seulement 3 mois de travail tranquille. <br><br>  Bien s√ªr, sous cette forme, le jeu n'est pas pour un large √©ventail, car  cela peut sembler compliqu√© et pas excitant pour un joueur moderne, mais plus important encore, probablement, en gardant l'esprit des jeux classiques, ne trouvez-vous pas? <br><br>  Suis-je satisfait du r√©sultat?  Certainement oui.  J'ai acquis beaucoup d'exp√©rience √† la fois en programmation et en travail d'√©quipe.  J'aime √† la fois la m√©canique r√©sultante du jeu et sa composante visuelle.  Y a-t-il quelque chose que j'aimerais changer?  Bien s√ªr, il n'y a pas de limites √† la perfection et vous pouvez toujours ajouter / am√©liorer quelque chose, mais vous ne pouvez pas le faire pour toujours! <br><br>  Ce jeu est-il int√©ressant?  Eh bien, ce n'est pas √† moi de d√©cider.  Mais que Vampus soit √† l'aise dans la maison que nous lui avons construite avec beaucoup d'amour et d'attention. <br><br>  Je vous souhaite du succ√®s! <br><br>  Merci et attention √† Vampus! <br><br>  PS Les t√¢ches qui surgissent constamment et la joie de les r√©soudre sont exactement ce que j'aime programmer.  J'esp√®re que vous n'obtiendrez pas moins de plaisir. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462943/">https://habr.com/ru/post/fr462943/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462929/index.html">Je te vois: tactiques de masquage de chauve-souris</a></li>
<li><a href="../fr462933/index.html">Comment fonctionne le blocage d'Internet: un examen des m√©thodes modernes avec un exemple r√©el</a></li>
<li><a href="../fr462935/index.html">Comment rester concentr√© tout en travaillant dans un bureau √† aire ouverte?</a></li>
<li><a href="../fr462937/index.html">Le concept de tissu persistant pour contr√¥ler l'infrastructure informatique</a></li>
<li><a href="../fr462939/index.html">Top 10 des rapports C ++ Russie et liste de lecture de conf√©rence en acc√®s libre</a></li>
<li><a href="../fr462945/index.html">G√©n√©rez des mots de passe √† usage unique pour 2FA dans JS √† l'aide de l'API Web Crypto</a></li>
<li><a href="../fr462947/index.html">L'histoire de la fa√ßon dont PVS-Studio a trouv√© une erreur dans la biblioth√®que utilis√©e dans ... PVS-Studio</a></li>
<li><a href="../fr462949/index.html">L'histoire de la fa√ßon dont PVS-Studio a trouv√© une erreur dans la biblioth√®que utilis√©e dans ... PVS-Studio</a></li>
<li><a href="../fr462951/index.html">L√† o√π une personne voit des formes, l'IA voit des textures</a></li>
<li><a href="../fr462955/index.html">Transformation num√©rique de la formation et de la certification du personnel de terrain</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>