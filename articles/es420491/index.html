<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôçüèº üë©üèø‚Äçü§ù‚Äçüë©üèº üëÄ Mi forma de guerrero, o c√≥mo prepar√© una aplicaci√≥n para la vida en Sailfish ‚ù£Ô∏è üë®üèø‚Äçüé§ üëÜüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El arte de un guerrero es mantener el equilibrio. 
 entre el horror de ser humano y el milagro de ser humano. 
 "Viaje a Ixtl√°n" 

 Mi camino de guerr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mi forma de guerrero, o c√≥mo prepar√© una aplicaci√≥n para la vida en Sailfish</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/digdes/blog/420491/">  <i>El arte de un guerrero es mantener el equilibrio.</i> <i><br></i>  <i>entre el horror de ser humano y el milagro de ser humano.</i> <i><br></i>  <i>"Viaje a Ixtl√°n"</i> <br><br>  Mi camino de guerrero, un desarrollador frontend brutal en los profesionales, fue encontrar un equilibrio entre el desarrollo de una aplicaci√≥n que se ejecuta en Sailfish y una aplicaci√≥n multiplataforma. <br><br>  Recientemente, he estado trabajando en el puesto de desarrollador en Digital Design, y a veces tengo que lidiar con tareas que no hab√≠a encontrado antes.  Es interesante y a menudo divertido.  Ahora, por ejemplo, estoy escribiendo una aplicaci√≥n corporativa para Sailfish OS y quiero compartir mi experiencia con usted; esto se discutir√° a continuaci√≥n.  S√≠gueme debajo del corte si eres un desarrollador novato o, al igual que yo, te enfrentas a la tarea de adaptar una aplicaci√≥n corporativa para el sistema operativo Sailfish y no sabes por d√≥nde empezar, as√≠ como aquellos que no han escuchado sobre las caracter√≠sticas de Qt y Sailfish. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zr/xh/si/zrxhsitmn-nk4wa5iic71hc7wfu.jpeg"></div><a name="habracut"></a><br><h3>  Un poco de historia, o por qu√© lo hice. </h3><br>  Cuando la compa√±√≠a desarroll√≥ la soluci√≥n Areopad ISCO para iPad (iOS) hace 5 a√±os, nadie podr√≠a haber pensado que los clientes necesitar√≠an una aplicaci√≥n para trabajar en un dispositivo con sistema operativo Sailfish (entonces el sistema operativo pertenec√≠a a la empresa finlandesa Jolla, sin embargo, ahora tambi√©n).  Pero en 2016, la compa√±√≠a rusa Open Mobile Platform adquiri√≥ una licencia para su uso, modificaci√≥n, distribuci√≥n y lo record√≥: adapt√≥ los dispositivos m√≥viles y usuarios dom√©sticos (principalmente empresas y agencias gubernamentales) y registr√≥ Sailfish Mobile OS RUS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en el registro</a> .  Y ahora, uno podr√≠a decir, es el √∫nico sistema operativo oficial ruso para dispositivos m√≥viles. <br><br>  Naturalmente, quer√≠amos entenderlo: ya conquistamos el resto del sistema operativo y, aparentemente, Sailfish tiene un gran futuro (s√≠, estoy hablando de la sustituci√≥n de importaciones).  De todo esto se deduce que la aplicaci√≥n para Sailfish sea!  La primera aplicaci√≥n que se prob√≥ fue el Sistema de informaci√≥n de aplicaciones m√≥viles para el trabajo de los cuerpos colegiales Areopad (estaba en la etapa de modernizaci√≥n). <br><br><h3>  Ahora sobre qt </h3><br>  Una maravillosa herramienta multiplataforma que incluye un entorno de desarrollo, un mont√≥n de bibliotecas √∫tiles y convenientes, e incluso su propio lenguaje de marcado QML.  No me detendr√© en ello durante mucho tiempo, porque se han escrito muchos art√≠culos sobre este milagro en el Habr√©, y tambi√©n puede leer la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> , que se lee de forma f√°cil y natural. <br><br>  Por si acaso, aclarar√© que los c√°lculos y el mapeo se realizan en diferentes idiomas en diferentes m√≥dulos (C ++ y QML) que interact√∫an entre s√≠ utilizando m√©todos especiales dif√≠ciles (propiedad, ranura de se√±al). <br><br>  Y Qt es el marco principal utilizado en el desarrollo de software para Sailfish. <br><br><h3>  Enfoques para resolver el problema: vaya a la izquierda - ganar√° una muleta, vaya a la derecha - perder√° caracter√≠sticas </h3><br>  Al principio, inspirado por la idea de multiplataforma y el hecho de que lo implementar√©, pens√© que una aplicaci√≥n escrita para Sailfish no despegar√≠a, pero ser√≠a un fracaso feliz en cualquier otro sistema operativo, incluso un refrigerador o un hervidor de agua.  Pero mi felicidad dur√≥ exactamente hasta el momento en que me sent√© para ejecutarlo en Android, luego me sent√≠ triste.  Sailfish no est√° en absoluto adaptado para este negocio y definitivamente no tiene la intenci√≥n de cambiar nada. <br><br>  Si Android o iOS le permiten usar la compilaci√≥n condicional y proporcionar alg√∫n tipo de kit de herramientas para esto, entonces Sailfish no se puede distinguir de Linux (dentro de Qt, por supuesto). <br><br>  Luego, surge el problema de compatibilidad QML: en Sailfish, la versi√≥n obsoleta de Qt Quick (2.6 para Sailfish y ya 2.11 para todos los dem√°s), Android no conoce Silica, Sailfish no conoce QtQuick.Controls.  Por lo tanto, para diferentes sistemas operativos, debe extraer los mismos componentes de diferentes bibliotecas, lo que produce casi los mismos archivos para cada sistema operativo. <br>  Al mismo tiempo, Silica probablemente tiene las mismas caracter√≠sticas que QtQuick.Controls, pero se niega a ejecutarse en cualquier otra plataforma. <br><br><h3>  Caracter√≠sticas del pez vela </h3><br>  Siendo una persona <s>perezosa, lo</s> m√°s creativa posible con el deseo de optimizar los costos laborales, tom√© el camino de menor <s>resistencia</s> funcional y escrib√≠ mi obra maestra en Qt puro, sin usar QtQuick.Controls y Silica.  Como resultado, todo funciona de manera decente y noble en Sailfish, pero en Android, la mitad de los elementos, a pesar de mi estricta orden de permanecer quieto, han ido a alg√∫n lugar por sus asuntos probablemente importantes, por lo que el siguiente paso a√∫n se har√° en un adulto y divorciado. archivos de marcado para cada sistema operativo en diferentes √°ngulos.  [Lo que hice m√°s tarde, mientras preparaba un art√≠culo para su publicaci√≥n.  Esta historia se basa en un art√≠culo separado].  Recuerde y acepte: las constantes m√°gicas son malas (por ejemplo, ancho: 15).  Y en dos dispositivos casi id√©nticos, incluso con el mismo sistema operativo, pueden diferir en 2 veces. <br><br>  Sin embargo, no puedo dejar de notar que definitivamente hay cosas interesantes en la versi√≥n Sailfish.  Por supuesto, durante un per√≠odo tan corto que estoy familiarizado con √©l, es casi imposible conocer todo el rico mundo interior de Sailfish: nuestra relaci√≥n con √©l est√° en la etapa del "per√≠odo del ramo de dulces", y mucho de lo que a√∫n no he estudiado en su car√°cter complejo.  Adem√°s, se decidi√≥ dibujar una aplicaci√≥n universal para todos los sistemas operativos, por lo que no tuve la oportunidad de usar mecanismos m√°s sofisticados para usar la oportunidad, pero probablemente le cuente algunos puntos interesantes. <br><br>  Solo hablaremos de una biblioteca para implementar la GUI de Silica, porque el resto que logr√© aprender y comprender no es diferente de la programaci√≥n est√°ndar de QML. <br><br><ul><li>  <b>Tema.</b> </li></ul><br>  Esta herramienta me interes√≥ m√°s porque no he visto un an√°logo en otros sistemas operativos, y tambi√©n es sencillo.  La conclusi√≥n es que el dise√±o de la aplicaci√≥n no es una constante, sino que depende del tema elegido. <br><br>  El elemento del tema contiene informaci√≥n sobre el tema seleccionado actualmente: colores primarios, tama√±os de fuente, sangr√≠as y componentes.  Por lo tanto, al escribir aplicaciones, no necesita codificar los colores, ajustar el tama√±o para que se ajuste a la pantalla y, en general, mirar el dise√±o (perdone a los dise√±adores, ya tiene mucho trabajo), simplemente puede extraerlo todo del elemento Theme.  Bueno, ¬øno es genial? <br><br><img src="https://habrastorage.org/webt/ak/pr/wa/akprwaderu8np2wpkch4j_qo9xa.png"><br><br><ul><li>  <b>Menu</b> </li></ul><br>  Tambi√©n es una caracter√≠stica de Sailfish (aunque puede ser posible en Android, pero no lo he visto). <br><br>  Hay tres tipos de men√∫s: <br>  <b>PullDownMenu - PushUpMenu - ContextMenu</b> <br><br><img src="https://habrastorage.org/webt/bu/y7/a5/buy7a5tkeexpsohiexbtm4oydfm.jpeg"><img src="https://habrastorage.org/webt/jk/sl/4n/jksl4n-kik82otj40tdtcn9q4jq.jpeg"><img src="https://habrastorage.org/webt/ny/ti/tw/nytitwwksf94j2c1oraw50qea7q.jpeg"><br><br>  En cuanto a Silica ... Ver: no son diferentes del est√°ndar ... Ver (son ¬± un par de propiedades no muy notables), y el componente Bot√≥n lo pone bastante nervioso: la altura del bot√≥n no se puede cambiar, debe escribir Rect√°ngulo y MouseArea en todas partes.  Si estuviera haciendo una aplicaci√≥n solo para Sailfish, usando el dise√±o est√°ndar de este sistema operativo, no ser√≠a necesario cambiar la altura del bot√≥n o ser√≠a posible usar un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">componente de Silica</a> .  Pero como estoy escribiendo una aplicaci√≥n para todos los dispositivos, se decidi√≥ utilizar el dise√±o m√°s masivo (Android), para que todos est√©n familiarizados y c√≥modos.  Muchos no est√°n de acuerdo conmigo y dicen que necesita usar elementos de interfaz de usuario nativos para cada plataforma, pero este es un tema completamente diferente, ha sido objeto de holivars durante muchos a√±os, durante este tiempo ha crecido m√°s de una generaci√≥n de desarrolladores. <br><br><h3>  Vuela en la pomada para el desarrollo m√≥vil en Qt </h3><br><ul><li>  <b>Asicronismo</b> </li></ul><br>  En Qt, para comunicarse con el servidor, llamar a una funci√≥n no es suficiente, debe enviar una solicitud y solicitar un objeto especial responsable de la respuesta del servidor, llamar a la funci√≥n de procesamiento de respuesta (que, por supuesto, nosotros mismos escribimos), cuando se recibe la respuesta: <br><br><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-function"><span class="hljs-function">QNetworkRequest </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">request</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"http://www.leningrad.spb.ru"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; QNetworkReply *reply = mngr-&gt;get(request); connect(reply, &amp;QNetworkReply::finished, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, &amp;Class:: onReplyFinished); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReplyFinished</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ QNetworkReply *reply = (QNetworkReply*)sender(); QByteArray ans = reply-&gt;readAll(); qDebug() &lt;&lt; ans; }</code> </pre> <br>  Se llamar√° a la funci√≥n onReplyFinished cuando se reciba una respuesta del servidor, y esto puede tardar sin importar cu√°nto tiempo depende de la calidad de la conexi√≥n y del lado del servidor.  Ahora imagine c√≥mo se organizar√° todo esto con 1500-2000 solicitudes, que en este caso dependen unas de otras y deben ejecutarse en estricto orden.  Y si recuerda que toda la parte de la interfaz de usuario depende de la respuesta, se vuelve completamente aterradora. <br><br><ul><li>  <b>Programaci√≥n orientada a muletas, o un enfoque creativo para resolver problemas</b> </li></ul><br>  Otro tema es ListView, que es un problema Qt muy local, pero a√∫n desagradable. <br><br>  Cualquier ListView que se respete debe tener un componente de encabezado que, como primer delegado, inserte alg√∫n elemento que sea fundamentalmente diferente del resto.  S√≠, lo hace, s√≠, pinta todo perfectamente, si no fuera por un "pero": mi delegado ocupa toda la pantalla, y necesita desplazarse, pero tan pronto como trato de desplazarme hacia la izquierda al encabezado desde el √≠ndice cero, b√°sicamente rechaza esto Mostrar encabezado.  ¬øQu√© hacer al respecto?  Cosas con una muleta.  Una parte de mi c√≥digo de formaci√≥n de modelo para este ListView en la parte cpp, que describe lo que est√° sucediendo con la mayor precisi√≥n posible: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (QVariant quest, QQuestions) { Questions.append(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Question(client, quest)); } kostilQuestions = Questions; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Questions.size() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) kostilQuestions.prepend(Questions[<span class="hljs-number"><span class="hljs-number">0</span></span>]);</code> </pre> <br>  A continuaci√≥n, se crean 2 elementos independientes en el delegado, cuya visibilidad depende del √≠ndice. <br>  Cuando el √≠ndice es cero, vemos uno, de lo contrario el otro. <br><br><h4>  Resumen </h4><br>  Como resultado, obtuve una aplicaci√≥n que "vuela" en Android e iOS, y Sailfish, m√°s precisamente una aplicaci√≥n flexible que se adapta a estos sistemas operativos.  Y la magia no tiene nada que ver con eso.  Encontr√© una manera de evitar conflictos y hacer amigos de todos los sistemas operativos con Sailfish sustituyendo algunos archivos por Sailfish y todos los dem√°s.  Esto nos permiti√≥ seleccionar capas de interfaz de usuario para cada sistema operativo en el c√≥digo de la aplicaci√≥n. <br><br>  Podemos suponer que dimos el primer paso: nos hicimos amigos de Sailfish.  Pero el trabajo sobre esto no se ha completado, Sailfish y yo vamos a un nuevo nivel de nuestra relaci√≥n: estamos preparando la aplicaci√≥n Areopad CSIS para el registro en el registro (como la aplicaci√≥n Sailfish), lo que significa que tendremos que adaptarla tambi√©n para el registro. <br><br>  Espero que haya sido interesante.  Continuar√° </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es420491/">https://habr.com/ru/post/es420491/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es420475/index.html">Comparaci√≥n de las m√°quinas de corte por l√°ser Raylogic 11G y Raylogic V12</a></li>
<li><a href="../es420477/index.html">Revisi√≥n de HyperX Cloud Stinger Core: un auricular ligero y resistente para personajes</a></li>
<li><a href="../es420479/index.html">Inyecci√≥n de dependencias en el servicio Apache Ignite.NET</a></li>
<li><a href="../es420487/index.html">Las empresas solicitan el derecho a los datos personales de los usuarios</a></li>
<li><a href="../es420489/index.html">Los nuevos procesadores ARM pueden competir con Core i5</a></li>
<li><a href="../es420493/index.html">¬øPuede el servicio de pedidos de comida estadounidense convertirse en Amazon en el mundo de los restaurantes?</a></li>
<li><a href="../es420495/index.html">Pantalla de renderizado de agua</a></li>
<li><a href="../es420497/index.html">Singularidad de verduras: Kroger lanza robocouriers para clientes de frutas y verduras en Arizona</a></li>
<li><a href="../es420499/index.html">Anatom√≠a de los sistemas de recomendaci√≥n. Primera parte</a></li>
<li><a href="../es420501/index.html">Linux en RAM: debirf way 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>