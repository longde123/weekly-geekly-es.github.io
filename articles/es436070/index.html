<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§° üëäüèΩ üåÖ C√≥mo lidiar con pruebas escamosas en la comunidad de c√≥digo abierto ‚õπÔ∏è üë®üèª‚Äçüé§ üßîüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Muchos proyectos enfrentan el problema de las pruebas escamosas, y este tema se ha planteado m√°s de una vez en Habr√©. Las pruebas que no han decidido ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo lidiar con pruebas escamosas en la comunidad de c√≥digo abierto</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/436070/">  Muchos proyectos enfrentan el problema de las pruebas escamosas, y este tema se ha planteado m√°s de una vez en Habr√©.  Las pruebas que no han decidido su condici√≥n constantemente requieren no solo tiempo de m√°quina, sino tambi√©n el tiempo de los desarrolladores y probadores.  Y si en una empresa comercial puede asignar un determinado recurso para resolver este problema y nombrar personas responsables, entonces en la comunidad de c√≥digo abierto no es tan simple.  Especialmente cuando se trata de grandes proyectos, por ejemplo, como Apache Ignite, donde hay casi 60 mil pruebas diferentes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f92/3f5/dd2/f923f5dd2d414a1737fb093c3e0ddac4.png"><br><br>  En esta publicaci√≥n, de hecho, le diremos c√≥mo resolver este problema en Apache Ignite.  Somos Dmitry Pavlov, ingeniero de software l√≠der / gerente comunitario en GridGain, y Nikolai Kulagin, ingeniero de TI en Sberbank Technologies. <br><a name="habracut"></a><br>  <i>Todo lo escrito a continuaci√≥n no representa la posici√≥n de ninguna compa√±√≠a, incluido Sberbank.</i>  <i>Esta historia es exclusivamente de miembros de la comunidad Apache Ignite.</i> <br><br><h2>  Apache Ignite y pruebas </h2><br>  La historia de Apache Ignite comienza en 2014, cuando GridGain don√≥ la primera versi√≥n del producto interno a Apache Software Foundation.  Han pasado m√°s de 4 a√±os desde entonces, y durante este tiempo el n√∫mero de pruebas se acerc√≥ a la marca de 60 mil. <br><br>  Utilizamos JetBrains TeamCity como el servidor de integraci√≥n continua, gracias a los muchachos de JetBrains por apoyar el movimiento de c√≥digo abierto.  Todas nuestras pruebas se distribuyen entre las suites, cuyo n√∫mero para la rama maestra es cercano a 140. En las suites, las pruebas se agrupan seg√∫n alg√∫n criterio.  Esto puede probar solo la funcionalidad de Machine Learning [RunMl], solo el cach√© [RunCache] o el [RunAll] completo.  En el futuro, la ejecuci√≥n de las pruebas significar√° exactamente [RunAll]: una verificaci√≥n completa.  Lleva aproximadamente 55 horas de tiempo de m√°quina. <br><br>  Junit se usa como la biblioteca principal, pero hay pocas pruebas unitarias.  En su mayor parte, todas nuestras pruebas son pruebas de integraci√≥n, ya que contienen el lanzamiento de uno o m√°s nodos (y esto lleva varios segundos).  Por supuesto, las pruebas de integraci√≥n son convenientes porque una de esas pruebas cubre muchos aspectos e interacciones, lo cual es bastante dif√≠cil de lograr con una sola prueba unitaria.  Pero tambi√©n hay desventajas: en nuestro caso, este es un tiempo de entrega bastante largo, as√≠ como la dificultad de encontrar un problema. <br><br><h2>  Problemas con escamas </h2><br>  Parte de estas pruebas es escamosa.  Ahora, seg√∫n la clasificaci√≥n de TeamCity, aproximadamente 1,700 pruebas est√°n marcadas como escamosas, es decir, con un cambio de estado sin cambiar el c√≥digo o la configuraci√≥n.  Estas pruebas no se pueden ignorar, ya que existe el riesgo de que se produzca un error en la producci√≥n.  Por lo tanto, tienen que ser revisados ‚Äã‚Äãy reiniciados, a veces varias veces, para analizar los resultados de las ca√≠das, y esto requiere un tiempo y esfuerzo valiosos.  Y si los miembros existentes de la comunidad hacen frente a esta tarea, para los nuevos contribuyentes esto puede convertirse en una barrera real.  Debe admitir que cuando realiza cambios en el Java Doc, no espera encontrar un bloqueo, pero no uno, sino varias docenas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/723/db8/c6b/723db8c6b70264074788f6783717f2b6.png"><br><br><h2>  ¬øQui√©n tiene la culpa? </h2><br>  La mitad de los problemas con las pruebas escamosas surgen debido a la configuraci√≥n del equipo, debido al tama√±o de la instalaci√≥n.  Y la segunda mitad est√° directamente relacionada con las personas que fallaron y no repararon su error. <br><br>  Convencionalmente, todos los miembros de la comunidad se pueden dividir en dos grupos: <br><br><ul><li>  Entusiastas que ingresan a la comunidad por su propia voluntad y contribuyen a su tiempo libre. <br></li><li>  Colaboradores a tiempo completo que trabajan para empresas que de alguna manera usan o est√°n asociadas con este producto de c√≥digo abierto. <br></li></ul><br>  Un contribuyente del primer grupo bien puede hacer una √∫nica edici√≥n y abandonar la comunidad.  Y alcanzarlo en caso de detecci√≥n de un error es casi imposible.  Es m√°s f√°cil interactuar con personas del segundo grupo, es m√°s probable que respondan a una prueba que rompen.  Pero sucede que una empresa que anteriormente estaba interesada en un producto ha dejado de necesitarlo.  Ella est√° dejando la comunidad, y sus empleados contribuyentes est√°n con ella.  O es posible que el contribuyente abandone la empresa y, con ella, la comunidad.  Por supuesto, despu√©s de tales cambios, algunos a√∫n contin√∫an participando en la comunidad.  Pero no todos. <br><br><h2>  ¬øQui√©n lo arreglar√°? </h2><br>  Si estamos hablando de personas que abandonaron la comunidad, entonces sus errores, por supuesto, van a los contribuyentes actuales.  Vale la pena se√±alar que para la revisi√≥n que condujo al error, el revisor tambi√©n es responsable, pero tambi√©n puede ser un entusiasta, es decir, no siempre estar√° disponible. <br><br>  Sucede que resulta llegar a una persona, decirle: este es el problema.  Pero √©l dice: no, esta no es mi soluci√≥n introdujo un error.  Dado que una ejecuci√≥n completa de la rama maestra se realiza autom√°ticamente con una cola relativamente libre, esto ocurre con mayor frecuencia por la noche.  Antes de esto, se pueden verter varios commits en la rama durante todo el d√≠a. <br><br>  En TeamCity, cualquier modificaci√≥n del c√≥digo se considera como un registro de cambios.  Si despu√©s de tres cambiadores tenemos una nueva ca√≠da, entonces tres personas dir√°n que esto no se debe a su compromiso.  Si hay cinco cambiadores, lo escucharemos de cinco personas. <br><br>  Otro problema: informar al contribuyente que las pruebas deben ejecutarse antes de cada revisi√≥n.  Algunos no saben d√≥nde, qu√© y c√≥mo correr.  O las pruebas se ejecutaron, pero el contribuyente no escribi√≥ sobre eso en el ticket.  Tambi√©n hay problemas en esta etapa. <br><br>  Adelante  Suponga que las pruebas se ejecutan y que en el ticket hay un enlace a los resultados.  Pero, como result√≥, esto no ofrece ninguna garant√≠a de an√°lisis de las pruebas de ejecuci√≥n.  El contribuyente puede mirar su carrera, ver algunas gotas all√≠, pero escribir "TeamCity se ve bien".  El revisor, especialmente si est√° familiarizado con el contribuyente o lo ha revisado con √©xito antes, puede que realmente no vea el resultado.  Y obtenemos este "TeamCity se ve bien": <br><br><img src="https://habrastorage.org/getpro/habr/post_images/055/26c/db2/05526cdb20d19b264ac4750695e46dee.png"><br><br>  Donde "Bueno" est√° aqu√≠ no est√° claro.  Pero aparentemente, los autores al menos saben que las pruebas deben ejecutarse. <br><br><h2>  C√≥mo luchamos contra esto </h2><br><h3>  M√©todo 1. Pruebas separadas </h3><br>  Dividimos las pruebas en dos grupos.  En el primero, "limpio" - pruebas estables.  En el segundo - inestable.  El enfoque es bastante obvio, pero no funcion√≥ incluso con dos intentos.  Por qu√©  Porque una suite con pruebas inestables se convierte en un gueto donde algo comienza a expirar necesariamente, se bloquea, etc.  Como resultado, todos comienzan a ignorar estas pruebas siempre problem√°ticas.  En general, no tiene sentido dividir las pruebas por grado. <br><br><h4>  M√©todo 2. Separaci√≥n y notificaci√≥n. </h4><br>  La segunda opci√≥n es similar a la primera: asignar pruebas m√°s estables y ejecutar las pruebas de PR restantes por la noche.  Si algo se rompe en un grupo estable, se env√≠a un mensaje al contribuyente con las herramientas est√°ndar de TeamCity que dice que algo debe repararse. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/321/7d1/7ba/3217d17ba4744bf932a498f8c2dcd63d.png"><br><br>  ... 0 personas reaccionaron a estos mensajes.  Todos los ignoraron. <br><br><h3>  M√©todo 3. Monitoreo diario </h3><br>  Dividimos las suites en varios "observadores", los miembros m√°s responsables de la comunidad, y los firmamos para recibir alertas sobre ca√≠das.  Como resultado, se confirm√≥ en la pr√°ctica que el entusiasmo tiende a terminar.  Los contribuyentes abandonan esta empresa y dejan de verificar regularmente.  Luego lo extra√±√©, mir√© all√≠, y otra vez algo se arrastr√≥ hacia el maestro. <br><br><h3>  M√©todo 4. Automatizaci√≥n </h3><br>  Despu√©s de otro m√©todo fallido, los chicos de GridGain recordaron una utilidad previamente desarrollada que agreg√≥ la funcionalidad que faltaba en ese momento en TeamCity.  A saber, la capacidad de ver estad√≠sticas generales sobre el n√∫mero de ca√≠das: cu√°nto y qu√© cay√≥, deterior√≥ o mejor√≥ el resultado al d√≠a siguiente.  Esta utilidad se desarroll√≥ gradualmente, se agregaron informes y se les cambi√≥ el nombre.  Luego agregaron notificaciones, renombradas nuevamente.  Entonces result√≥ TeamCity Bot.  Ahora tiene casi 500 confirmaciones y 7 contribuyentes y est√° en el repositorio complementario de Apache. <br><br>  ¬øQu√© hace el bot?  Sus capacidades se pueden combinar en dos grupos: <br><br><ul><li>  Monitoreo de proyectos: monitoreo visual al ver los resultados de las ejecuciones, as√≠ como la notificaci√≥n autom√°tica en mensajer√≠a instant√°nea (por ejemplo, holgura) <br></li><li>  Verificaci√≥n de sucursal: an√°lisis de pruebas de relaciones p√∫blicas, as√≠ como la emisi√≥n de una visa en un boleto. <br></li></ul><br><h2>  Flujo de trabajo de TeamCity Bot </h2><br>  Antes de Apache Ignite Teamcity Bot, el proceso de "contribuci√≥n" a la comunidad era el siguiente: <br><br><ol><li>  En JIRA, uno de los tickets est√° seleccionado y arreglado; <br></li><li>  Se crea una solicitud de extracci√≥n; <br></li><li>  Ejecuta pruebas que pueden verse afectadas por los cambios realizados; <br></li><li>  Si se aprueban las pruebas, el confirmador puede previsualizar y moderar la solicitud de extracci√≥n. <br></li></ol><br><img src="https://habrastorage.org/getpro/habr/post_images/1b2/c5c/d81/1b2c5cd81a826ec8e761b8c12b62c7f4.png"><br><br>  Parece simple, pero de hecho el tercer punto puede ser una barrera para algunos contribuyentes.  Por ejemplo: un reci√©n llegado a la comunidad decide hacer su primera contribuci√≥n eligiendo el boleto m√°s simple.  Esto podr√≠a estar editando un Java Doc o actualizando versiones de dependencia de Maven.  Analizando los resultados de la carrera en su peque√±o arreglo, de repente descubre que han ca√≠do unas 30 pruebas.  De d√≥nde viene el n√∫mero de pruebas fallidas y c√≥mo analizarlas, √©l no lo sabe.  Es de esperar que el contribuyente nunca vuelva aqu√≠ nuevamente. <br><br>  Los miembros m√°s experimentados de la comunidad tambi√©n sufren de escamas: pasan tiempo analizando pruebas que se cayeron por casualidad y, por lo tanto, obstaculizan el desarrollo de productos. <br><img src="https://habrastorage.org/getpro/habr/post_images/c42/290/ffb/c42290ffb3ead465704b6a3a990b09b2.png"><br>  <i>Esquema de contribuci√≥n con TeamCity Bot</i> <br><br>  Con la llegada del bot, los pasos en el contrajuego aumentaron, pero el tiempo dedicado a analizar las pruebas ca√≠das disminuy√≥ significativamente.  Ahora es suficiente para ejecutar la prueba y despu√©s de pasarla, mira la p√°gina del bot correspondiente.  Si hay posibles bloqueadores (pruebas descartadas que no se consideran escamosas), es suficiente realizar una doble verificaci√≥n, despu√©s de lo cual puede obtener una visa en forma de un comentario en JIRA con los resultados de la prueba. <br><br><h2>  Resumen de caracter√≠sticas </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/07c/a1b/a0e/07ca1ba0eb4d07a1537e75062eda2dd5.png"><br><br>  <i>Inspeccionar contribuci√≥n: una lista de todos los RP no cerrados con un resumen de cada informaci√≥n: la fecha de la √∫ltima actualizaci√≥n, el n√∫mero de RP, el nombre, el autor y el boleto en JIRA</i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6d9/7ec/2f8/6d97ec2f8eba182718d88d291edfa58d.png"><br>  <i>Para cada solicitud de extracci√≥n, hay disponible una pesta√±a con informaci√≥n m√°s detallada: el nombre de RP correcto, sin el cual el bot no podr√° encontrar el ticket deseado en JIRA;</i>  <i>si se realizaron pruebas;</i>  <i>si el resultado de la prueba est√° listo;</i>  <i>dej√≥ un comentario en JIRA.</i> <br><br>  An√°lisis de resultados de la prueba: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ed8/104/3c2/ed81043c26693ca7f40f3f9379797b7a.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/c42/a79/22c/c42a7922ce4b4163c9561bfaa4964ea9.png"><br><br>  Aqu√≠ hay dos informes sobre c√≥mo probar el mismo PR.  El primero es del bot.  El segundo es un informe est√°ndar sobre Teamcity.  La diferencia en la cantidad de informaci√≥n es obvia, y esto no tiene en cuenta el hecho de que para ver el historial de las pruebas TC, tambi√©n ser√° necesario realizar varias transiciones a p√°ginas adyacentes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c66/7d5/24d/c667d524d85a956b5aca555343056563.png"><br><br>  Volvamos al informe del bot.  Este informe se divide visualmente en dos tablas: posibles bloqueadores y todos los bloqueos.  Los bloqueadores incluyen pruebas que: <br><br><ul><li>  tener una tasa de falla en el maestro de menos del 4% (menos de 4 inicios de cada 100 no tuvieron √©xito); <br></li><li>  no son escamosas en la clasificaci√≥n de TeamCity; <br></li><li>  cay√≥ debido a un tiempo de espera, falta de memoria, c√≥digo de salida, falla de JVM. <br></li></ul><br>  Por ejemplo, en la captura de pantalla anterior, dos suites se indican como posibles bloqueadores: en la primera, la prueba cay√≥, y en la segunda, se produjo un tiempo de espera. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/867/ba7/53b/867ba753b7fee200ae041c36c30fc136.png"><br><br>  Para finalmente entender qu√© es una prueba escamosa y qu√© es un error, considere la imagen de arriba.  La barra horizontal es de 100 carreras.  Barra verde vertical: √©xito al pasar la prueba, rojo: ca√≠da.  En el caso de un error, el historial de ejecuci√≥n se ve natural: una barra verde al final cambia de color a rojo.  Esto significa que fue en este lugar donde apareci√≥ un error y la prueba comenz√≥ a caer constantemente.  Si tenemos ante nosotros una prueba escamosa, entonces su historial de carreras es una alternancia continua de colores verde y rojo. <br><br>  An√°lisis de resultados de prueba <br><br><img src="https://habrastorage.org/getpro/habr/post_images/faa/050/154/faa050154f92d1cd4cb388efa59f461d.png"><br><br>  Por ejemplo, analizamos los resultados de pasar las pruebas en la captura de pantalla anterior.  Seg√∫n la versi√≥n del bot, puede haber dos bloqueos debido a un error: se enumeran en la tabla de posibles bloqueadores.  Pero bien pueden ser pruebas escamosas con una baja tasa de fracaso.  Para excluir esta opci√≥n, simplemente haga clic en el bot√≥n Volver a ejecutar posibles bloqueadores, y estas dos suites pasar√°n a una doble verificaci√≥n.  Para facilitar a√∫n m√°s la tarea, puede hacer clic en Volver a ejecutar posibles bloqueadores y comentar JIRA, y obtener un comentario (y con √©l una notificaci√≥n por correo electr√≥nico) del bot despu√©s de que se complete la verificaci√≥n.  Luego entre y vea si hay un problema o no. <br><br>  Para los revisores, esto es muy bueno.  Puede olvidarse de las ediciones que no pasaron ninguna verificaci√≥n, pero simplemente haga clic en varias ediciones, haga clic en el bot√≥n verde grande Volver a ejecutar y espere la carta. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eb0/352/de5/eb0352de55fe68f17e69139426ac4474.png"><br>  <i>Informe perfecto: no se detectaron bloqueadores</i> <i><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ce9/8aa/303/ce98aa3034b0b39391aa1fe4db081375.png"><br></i>  <i>Visa verde (comentario) del bot.</i>  <i>No se encontraron bloqueadores.</i> <i><br><br><img src="https://habrastorage.org/getpro/habr/post_images/9c5/be4/802/9c5be48026aad0175d690636ea5d14d9.png"><br></i>  <i>Visa roja: se requieren verificaciones y / o errores de edici√≥n</i> <br><br>  Sucede que algunos errores todav√≠a se filtran en el "maestro".  Como dijimos, antes de esto se luchaba a trav√©s de notificaciones personales.  O alguna persona se asegur√≥ de que nada cayera.  Ahora estamos usando una soluci√≥n m√°s simple: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/57d/c82/90f/57dc8290f1643362d93ff95e497ce36c.png"><br><br>  Cuando se detecta un nuevo error, se env√≠a un mensaje a la lista de desarrolladores, que indica los contribuyentes y sus cambiadores, que pueden ser la causa del error.  Entonces, toda la comunidad descubrir√° qui√©n hizo que todo sucediera. <br><br>  Por lo tanto, pudimos aumentar el n√∫mero de soluciones r√°pidas y reducir en gran medida el tiempo que lleva solucionar el problema. <br><br>  Monitoreo del estado del asistente <br>  Otra de las funciones del bot es monitorear el estado del asistente con las estad√≠sticas de los √∫ltimos lanzamientos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ce6/3da/e80/ce63dae8033464df004d8a168e75c9c1.png"><br><br>  Domina las tendencias <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab4/d34/ecc/ab4d34ecc348552b4de5804a1b66a7a6.png"><br><br>  La p√°gina de Tendencias maestras compara dos selecciones "maestras" para per√≠odos de tiempo espec√≠ficos.  Para cada elemento de la tabla, se muestra el valor m√°ximo, m√≠nimo y la mediana. <br><img src="https://habrastorage.org/getpro/habr/post_images/564/8c5/fd1/5648c5fd1dd4080a736856bf2d9afbd3.png"><br><br>  Adem√°s de los resultados generales para toda la muestra, la tabla contiene gr√°ficos para cada indicador con la visualizaci√≥n de los valores de cada compilaci√≥n.  Al hacer clic en un punto, puede ir a los resultados de la ejecuci√≥n en TeamCity.  Adem√°s, es posible eliminar el resultado de las estad√≠sticas.  Esto es √∫til cuando se producen valores anormales debido a fallas graves, que el contribuyente probablemente no tenga la culpa.  Dichos resultados deben excluirse para que no se tengan en cuenta al calcular las mismas pruebas escamosas.  Adem√°s, la construcci√≥n tambi√©n se puede distinguir para rastrear los resultados de cada indicador. <br><br>  Apache Ignite Teamcity Bot ahora tiene m√°s de 65 miembros registrados.  Durante todo el per√≠odo de uso del bot, las visas recibieron m√°s de 400 solicitudes de extracci√≥n, y en promedio se emiten cinco visas por d√≠a. <br><br><h2>  Estructura de TeamCity Bot </h2><br>  El bot est√° alojado en un servidor separado, va a ignite.apache.org para obtener datos, notifica p√∫blicamente a todos en la lista de desarrolladores, esta es nuestra plataforma principal para desarrolladores de Ignite, y escribe visas para tickets a trav√©s de la API JIRA. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/609/73e/734/60973e7345a076dbabedb9ef35921b7e.png"><br><br>  Utiliza el servidor Jetty, los servlets de Jersey, una serie de servicios con una l√≥gica empresarial compleja del propio bot, incluidos los servicios Teamcity, JIRA y GitHub que acceden al servicio de integraci√≥n encendida.  Adem√°s de esta integraci√≥n pura para solicitudes http.  Como almacenamiento: el producto de Apache Ignite en el modo incrustado de configuraci√≥n de nodo √∫nico con persistencia activa.  Adem√°s de las ventajas obvias de usar Ignite como base de datos, tambi√©n nos ayuda a encontrar varias √°reas de aplicaci√≥n de Ignite y comprender qu√© es conveniente y qu√© no. <br><br>  La primera versi√≥n de la implementaci√≥n del bot se inspir√≥ en un art√≠culo sobre el almacenamiento en cach√© REST y fue un cach√© REST y servicios GitHub y Teamcity.  Teamcity xml y json devueltos del servidor fueron analizados por Pure Java Objects, que luego se almacenaron en cach√©.  Al principio funcion√≥, y bastante r√°pido.  Pero con un aumento en la cantidad de datos, los resultados comenzaron a deteriorarse. <br><br>  Vale la pena se√±alar que TeamCity elimina una historia anterior a ~ 2 semanas, pero el bot no.  Finalmente, con este enfoque, aparecieron toneladas de datos que son muy dif√≠ciles de administrar. <br><br><h2>  TeamCity Bot Development </h2><br>  El nuevo enfoque implementa una opci√≥n compacta de almacenamiento de datos y opta por un peque√±o n√∫mero de particiones de cach√©.  Una gran cantidad de particiones en un nodo afecta negativamente la velocidad de sincronizaci√≥n de datos al disco y aumenta el tiempo de inicio del cl√∫ster. <br><br>  Todas las actualizaciones de datos principales se realizan de forma asincr√≥nica, porque de lo contrario corremos el riesgo de tener una mala experiencia de usuario debido al lento retorno de los datos de TeamCity. <br><br>  Para las cadenas que rara vez cambian sus valores (por ejemplo, los nombres de las pruebas), se realiza un mapeo simple en id, que es generado por Atomic Sequence.  Aqu√≠ hay un ejemplo de tal entrada: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/408/1f8/1f5/4081f81f553eb5b318799e11ea847043.png"><br><br>  El nombre largo de la prueba corresponde al n√∫mero int, que se almacena en todas las compilaciones.  Esto ahorra una gran cantidad de recursos.  Adem√°s de los m√©todos que devuelven esta l√≠nea est√° el interceptor de cach√© en memoria de Guava.  Gracias a la anotaci√≥n de cach√©, incluso en el mont√≥n no seleccionamos l√≠neas al leerlas de Ignite por id.  Y por id siempre obtenemos la misma l√≠nea, lo cual es bueno para el rendimiento. <br><br>  Para las l√≠neas "impredecibles", por ejemplo, los registros de seguimiento de pila, se utilizan varios tipos de compresi√≥n: compresi√≥n gzip, compresi√≥n r√°pida o sin comprimir, seg√∫n cu√°l sea mejor.  Todos estos m√©todos ayudan a ajustar los datos m√°ximos en la memoria y dan r√°pidamente una respuesta al cliente. <br><br><h2>  Por qu√© TeamCity Bot es mejor </h2><br>  Esto no quiere decir que TeamCity no tenga las caracter√≠sticas enumeradas anteriormente.  Lo est√°n, pero dispersos en una pila de lugares diferentes.  En el bot, todo se recopila en una p√°gina y puede comprender r√°pidamente cu√°l es el problema. <br><br>  Una buena adici√≥n es la carta que el bot env√≠a en la hoja de desarrollo cuando detecta un problema.  Inmediatamente en la comunidad hay una ocasi√≥n para comenzar una discusi√≥n: "¬øQuiz√°s, ahora, vamos a revertir?".  Esto agrega confianza a los revisores. <br><br>  Con el bot, es mucho m√°s f√°cil para los nuevos contribuyentes unirse al proceso de desarrollo.  Al hacer su primera soluci√≥n, no siempre sabe qu√© implican los cambios realizados.  Y sumergi√©ndose de lleno en el an√°lisis de los resultados de las pruebas en TeamCity, puede perder f√°cilmente su entusiasmo por un mayor desarrollo.  Apache Ignite TeamCity Bot lo ayudar√° a comprender r√°pidamente si hay un problema y a mantener el entusiasmo. <br><br>  Esperamos que el bot simplifique la vida de los contribuyentes actuales y atraiga a nuevas personas a la comunidad.  Finalmente, aconsejamos, por supuesto, evitar la aparici√≥n de una gran cantidad de pruebas escamosas, porque es dif√≠cil lidiar con ellas.  Y conf√≠e en los robots: no tienen preferencias y no conf√≠an en la palabra de la gente. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es436070/">https://habr.com/ru/post/es436070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es436060/index.html">Soluciones arquitect√≥nicas para un juego m√≥vil. Parte 3: Ver en el empuje del jet</a></li>
<li><a href="../es436062/index.html">Sistema de arbitraje para principiantes, parte 1</a></li>
<li><a href="../es436064/index.html">Inteligencia artificial para todos</a></li>
<li><a href="../es436066/index.html">Matem√°ticas del Apocalipsis: teor√≠a de juegos y la crisis nuclear del Caribe</a></li>
<li><a href="../es436068/index.html">Conferencia C ++ Rusia 2019</a></li>
<li><a href="../es436072/index.html">Limpiar, marcar: c√≥mo ense√±amos a chatbot a distinguir los problemas del cliente</a></li>
<li><a href="../es436076/index.html">An√°lisis de ataque de Cowrie Hanipot</a></li>
<li><a href="../es436080/index.html">Semana de la seguridad 03: 2019 - A√±o de privacidad</a></li>
<li><a href="../es436082/index.html">C√≥mo UEBA ayuda a mejorar la ciberseguridad</a></li>
<li><a href="../es436086/index.html">Descripci√≥n general de la actualizaci√≥n 4 para Veeam Cloud Connect</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>