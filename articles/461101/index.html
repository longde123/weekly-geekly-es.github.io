<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïë üë®üèΩ‚Äçüç≥ üö© Android Jetpack Compose Primera impresi√≥n üì≠ üôà ü§¶üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Despu√©s de ver una charla sobre Android Jetpack Compose en Google IO 2019, quise probarlo de inmediato. Adem√°s, el enfoque implementado en √©l recordab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Android Jetpack Compose Primera impresi√≥n</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461101/"><p>  Despu√©s de ver una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">charla sobre Android Jetpack Compose</a> en Google IO 2019, quise probarlo de inmediato.  Adem√°s, el enfoque implementado en √©l recordaba mucho a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Flutter, que me interesaba anteriormente</a> . </p><br><p><img src="https://habrastorage.org/webt/i1/-6/fz/i1-6fzjfxbzx-ajpwg-5y7ey7cq.png"></p><a name="habracut"></a><br><p> La biblioteca Compose est√° en la etapa pre alfa, por lo que no hay mucha documentaci√≥n y art√≠culos disponibles.  A continuaci√≥n, confiar√© en varios recursos que logr√© encontrar, adem√°s de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">biblioteca de c√≥digo abierto</a> . </p><br><p>  Estos recursos son: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Desarrolladores de Android Backstage: Episodio 115: Jetpack Compose</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Componer desde los primeros principios</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Inmersi√≥n en jetpack compose</a> </li></ul><br><h1 id="chto-takoe-android-jetpack-compose">  ¬øQu√© es Android Jetpack Compose? </h1><br><p>  Anteriormente, toda la interfaz de usuario de Android se basaba en la clase View.  Este ha sido el caso desde los primeros d√≠as de Android.  Y a este respecto, se han acumulado muchos defectos heredados y arquitect√≥nicos, que podr√≠an mejorarse.  Pero hacer esto es bastante dif√≠cil sin romper todo el c√≥digo escrito sobre su base. </p><br><p>  En los √∫ltimos a√±os, han aparecido muchos conceptos nuevos en el mundo de las aplicaciones de los clientes (incluidas las tendencias de Frontend), por lo que el equipo de Google ha tomado un camino radical y reescribi√≥ todo el nivel de IU en Android desde cero.  Entonces apareci√≥ la biblioteca Android Jetpack Compose, que incluye trucos conceptuales de React, Litho, Vue, Flutter y muchos otros. </p><br><p>  Veamos algunas de las caracter√≠sticas de la interfaz de usuario existente y comp√°rela con Compose. </p><br><h3 id="1--nezavisimost-ot-relizov-android">  1. Independencia de las versiones de Android </h3><br><p>  La interfaz de usuario existente est√° estrechamente relacionada con la plataforma.  Cuando aparecieron los primeros componentes de Material Design, solo funcionaban con Android 5 (API21) y versiones posteriores.  Para trabajar en versiones anteriores del sistema, debe usar la Biblioteca de soporte. </p><br><p>  Compose es parte de Jetpack, lo que lo hace independiente de las versiones del sistema y es posible usarlo incluso en versiones anteriores de Android (al menos con API21). </p><br><h3 id="2-ves-api-na-kotlin">  2. Toda la API de Kotlin </h3><br><p>  Anteriormente, ten√≠a que lidiar con diferentes archivos para crear una interfaz de usuario.  Describimos el marcado en xml, y luego usamos el c√≥digo Java / Kotlin para que funcione.  Luego volvimos nuevamente a otros archivos xml para configurar temas, animaci√≥n, navegaci√≥n, ... E incluso intentamos escribir c√≥digo en xml (Enlace de datos). </p><br><p>  El uso de Kotlin le permite escribir UI de estilo declarativo directamente en c√≥digo en lugar de xml. </p><br><h3 id="3-composable--kompozitnyy-ispolzovanie-kompozicii-vmesto-nasledovaniya">  3. Composable = Composite: usando composici√≥n en lugar de herencia </h3><br><p>  Crear elementos de IU personalizados puede ser bastante engorroso.  Necesitamos heredar de View o su descendiente y cuidar muchas propiedades importantes antes de que comience correctamente.  Por ejemplo, la clase TextView contiene aproximadamente 30 mil l√≠neas de c√≥digo Java.  Esto se debe al hecho de que contiene mucha l√≥gica innecesaria dentro de s√≠ misma que es heredada por los elementos descendientes. </p><br><p>  Compose surgi√≥ por otro lado, reemplazando la herencia con la composici√≥n. </p><br><p> <code>Padding</code> es el m√°s adecuado para ilustrar de qu√© se trata: </p><br><p>  En la interfaz de usuario existente, para renderizar <code>TextView</code> sangr√≠a a <code>30dp</code> : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/ca2/b25/683ca2b253a68f623931819b8185ab89.png" alt="imagen" width="500"></div><br><p>  necesitamos escribir el siguiente c√≥digo: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/simpleTextView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/cyan"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30dp"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">------------------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NOTE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Drag or tap on the seek bar"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Esto significa que en alg√∫n lugar dentro de TextView.java o sus superclases hay una l√≥gica que sabe contar y dibujar sangr√≠as. </p><br><p>  Veamos c√≥mo puedes hacer lo mismo en Compose: </p><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// note: the cyan background color is omitted for now to keep it simple Padding(30.dp) { Text("Drag or tap on the seek bar") }</span></span></code> </pre> <br><p>  <strong>Cambios</strong> <br>  <code>TextView</code> convertido solo en <code>Text()</code> .  La propiedad <code>android:padding</code> ha convertido en un <code>Padding</code> que envuelve el <code>Text</code> . </p><br><p>  <strong>Los beneficios</strong> <br>  Por lo tanto, <code>Text</code> solo es responsable de representar el texto en s√≠.  No sabe contar sangr√≠as.  <code>Padding</code> , por otro lado, solo es responsable del relleno y nada m√°s.  Se puede usar alrededor de cualquier otro elemento. </p><br><h3 id="4-odnonapravlennyy-potok-dannyh">  4. Flujo de datos unidireccional </h3><br><p>  El flujo de datos unidireccional es un concepto importante si hablamos, por ejemplo, de controlar el estado de un <code>CheckBox</code> en un sistema de IU existente.  Cuando el usuario toca el <code>CheckBox</code> , su estado se <code>checked = true</code> : la clase actualiza el estado Ver y llama una devoluci√≥n de llamada desde el c√≥digo que supervisa el cambio de estado. </p><br><p>  Luego, en el propio c√≥digo, por ejemplo, en <code>ViewModel</code> , debe actualizar la variable de <code>state</code> correspondiente.  Ahora tiene dos copias del estado presionado, lo que puede crear problemas.  Por ejemplo, cambiar el valor de la variable de <code>state</code> dentro del <code>ViewModel</code> har√° que <code>CheckBox</code> actualice, lo que puede terminar en un bucle sin fin.  Para evitar esto, tendremos que idear alg√∫n tipo de muleta. </p><br><p>  Usar Compose ayudar√° a resolver estos problemas, ya que se basa en el principio de un punto.  El cambio de estado se procesar√° dentro del marco: simplemente damos el modelo de datos hacia adentro.  Adem√°s, el componente en Compose ahora no cambia su estado por s√≠ solo.  En cambio, solo llama a la devoluci√≥n de llamada, y ahora es tarea de la aplicaci√≥n cambiar la interfaz de usuario. </p><br><h3 id="5-uluchshenie-otladki">  5. Mejora de la depuraci√≥n </h3><br><p>  Como toda la interfaz de usuario ahora est√° escrita en Kotlin, ahora puede depurar la interfaz de usuario.  No lo intent√© yo mismo, pero en el podcast dijeron que el depurador y los puntos de interrupci√≥n funcionan en Compose. </p><br><h1 id="hvatit-slov-pokazhite-kod">  Palabras suficientes, muestra el c√≥digo </h1><br><p>  Lo s√©, quiero ver r√°pidamente c√≥mo se ve la interfaz de usuario en el c√≥digo (spoiler: muy similar a Flutter si intentas escribir en √©l). </p><br><p>  Comenzaremos creando algunas <code>View</code> simples, luego compararemos c√≥mo se ven en la IU existente y en Redactar. </p><br><h3 id="1-framelayout-vs-wrap--padding--background">  1. <code>FrameLayout</code> vs <code>Wrap + Padding + Background</code> </h3><br><p>  Reutilizamos nuestro ejemplo anterior e intentamos que este <code>TextView</code> a <code>30dp</code> con un fondo turquesa: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/ca2/b25/683ca2b253a68f623931819b8185ab89.png" alt="`TextView` sangrado en` 30dp` y fondo turquesa" width="500"></div><br><p>  IU existente: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/simpleTextView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/cyan"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">--------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NOTE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30dp"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">------------------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">AND</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Drag or tap on the seek bar"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Ahora mira el c√≥digo que hace lo mismo en Compose: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Wrap { Padding(<span class="hljs-number"><span class="hljs-number">30</span></span>.dp) { DrawRectangle(color = Color.Cyan) Text(<span class="hljs-string"><span class="hljs-string">"Drag or tap on the seek bar"</span></span>) } } }</code> </pre> <br><p>  Aqu√≠ hay algunas cosas nuevas.  Como <code>Text</code> solo sabe sobre renderizar texto, no le importan el relleno ni el fondo.  Por lo tanto, para agregarlos, necesitamos usar tres funciones separadas: </p><br><ul><li>  <code>DrawRectangle</code> fondo </li><li>  <code>Padding</code> sangrantes </li><li>  <code>Wrap</code> es una funci√≥n que superpone par√°metros como <code>FrameLayout</code> . </li></ul><br><p>  F√°cil  Pero es ligeramente diferente del sistema de IU existente al que todos estamos acostumbrados. </p><br><h3 id="2-vertikalnyy-linearlayout-vs-column">  2. <code>LinearLayout</code> vertical vs <code>Column</code> </h3><br><p>  Ahora intentemos hacer algo equivalente a nuestro viejo <code>LinearLayout</code> . <br>  Para colocar dos elementos uno debajo del otro, como en la imagen a continuaci√≥n, podemos usar <code>Column</code> : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/32c/9e9/29e/32c9e929e70b2f811aad977075a79e87.png" alt="Dos elementos uno debajo del otro" width="500"></div><br><p>  El c√≥digo se ver√° as√≠: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) Button(text = <span class="hljs-string"><span class="hljs-string">"Next"</span></span>) } }</code> </pre> <br><p>  Anidado en el elemento <code>Column</code> se ubicar√° verticalmente uno debajo del otro. </p><br><h3 id="2a-otstupy">  2a.  Sangr√≠a </h3><br><p>  Probablemente haya notado que el texto y el bot√≥n est√°n demasiado cerca del borde.  Por lo tanto, agregue <code>Padding</code> . </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { <span class="hljs-comment"><span class="hljs-comment">//   Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text("Click the button below: ") Button(text = "Next") } } }</span></span></code> </pre> <br><p>  Se ve mejor: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d1/d83/053/4d1d83053a411a9858b0feedab75de4a.png" alt="Dos elementos sangrados uno debajo del otro" width="500"></div><br><h3 id="2b-intervaly">  2b.  Intervalos </h3><br><p>  Tambi√©n podemos agregar alguna sangr√≠a entre <code>Text</code> y <code>Button</code> : </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) HeightSpacer(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) <span class="hljs-comment"><span class="hljs-comment">//    Button(text = "Next") } } }</span></span></code> </pre> <br><p>  C√≥mo se ve nuestra pantalla ahora: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2be/3d8/709/2be3d8709c5f83c72f15ab9b450e0ba6.png" alt="Dos elementos, uno debajo del otro, sangrados y espaciados" width="500"></div><br><h3 id="2c-gorizontalnyy-linearlayout-vs-row">  2c.  Horizontal <code>LinearLayout</code> vs <code>Row</code> </h3><br><p>  Coloque el segundo bot√≥n al lado del primero: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/351/842/b31/351842b31ea3fd8ec51a7585ea8efcad.png" alt="Se agreg√≥ un segundo bot√≥n" width="500"></div><br><p>  C√≥digo para esto: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) HeightSpacer(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) Row { <span class="hljs-comment"><span class="hljs-comment">//   Button(text = "Back") //   WidthSpacer(10.dp) //    Button(text = "Next") } } } }</span></span></code> </pre> <br><p>  Dentro de la <code>Row</code> dos botones ser√°n horizontales.  <code>WidthSpacer</code> agrega distancia entre ellos. </p><br><h3 id="2d-gravity-vs-alignment">  2d.  <code>Gravity</code> vs <code>Alignment</code> </h3><br><p>  Alinee nuestros elementos en el centro, como lo hace la <code>gravity</code> en la interfaz de usuario actual.  Para mostrar diff, comentar√© las l√≠neas antiguas y las reemplazar√© por otras nuevas: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { <span class="hljs-comment"><span class="hljs-comment">// Column(crossAxisAlignment = CrossAxisAlignment.Start) { Column(crossAxisAlignment = CrossAxisAlignment.Center) { //  Text("Click the button below: ") HeightSpacer(10.dp) // Row { Row(mainAxisSize = FlexSize.Min) { //    Button(text = "Back") WidthSpacer(10.dp) Button(text = "Next") } } } }</span></span></code> </pre> <br><p>  Tendremos √©xito: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/346/e5c/ad7/346e5cad7f27352c91076001d2bf5cf0.png" alt="Alineaci√≥n central" width="500"></div><br><p>  Con <code>crossAxisAlignment = CrossAxisAlignment.Center</code> elementos anidados se centrar√°n horizontalmente.  Tambi√©n deber√≠amos establecer el par√°metro <code>Row</code> en <code>mainAxisSize = FlexSize.Min</code> , similar en comportamiento a <code>layout_width = wrap_content</code> , para que no se extienda por la pantalla debido al <code>mainAxisSize = FlexSize.Max</code> predeterminado, que se comporta como <code>layout_width = match_parent</code> . </p><br><h3 id="2d-zamechanie">  2d.  Observaci√≥n </h3><br><p>  De lo que vimos en los ejemplos anteriores, puede ver que todos los elementos est√°n compuestos de funciones separadas: el <code>padding</code> es una funci√≥n separada, el <code>spacer</code> es una funci√≥n separada, en lugar de ser propiedades dentro de <code>Text</code> , <code>Button</code> o <code>Column</code> . </p><br><p>  Se est√°n desarrollando elementos m√°s complejos como <code>RecyclerView</code> o <code>ConstraintLayout</code> : por lo tanto, no pude encontrar un ejemplo con ellos en las fuentes de demostraci√≥n. </p><br><h3 id="3stili-i-temy">  3. Estilos y temas </h3><br><p>  Probablemente haya notado que los botones de arriba son morados por defecto.  Esto se debe a que usan estilos predeterminados.  Veamos c√≥mo funcionan los estilos en Compose. </p><br><p>  En los ejemplos anteriores, <code>FormDemo</code> etiquetado con la anotaci√≥n <code>@Composable</code> .  Ahora mostrar√© c√≥mo se usa este elemento en la <code>Activity</code> : </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) setContent { CraneWrapper{ MaterialTheme { FormDemo() } } } }</code> </pre> <br><p>  En lugar de la funci√≥n <code>setContentView()</code> , usamos <code>setContent()</code> , una funci√≥n de extensi√≥n de la biblioteca <code>Compose.kt</code> . </p><br><p>  <code>CraneWrapper</code> contiene el √°rbol Compose y proporciona acceso a <code>Context</code> , <code>Density</code> , <code>FocusManager</code> y <code>TextInputService</code> . </p><br><p>  <code>MaterialTheme</code> permite personalizar el tema para los elementos. </p><br><p>  Por ejemplo, puedo cambiar el color primario del tema a marr√≥n de la siguiente manera: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) setContent { CraneWrapper{ <span class="hljs-comment"><span class="hljs-comment">// MaterialTheme { MaterialTheme(colors = MaterialColors(primary = Color.Maroon)) { FormDemo() } } } }</span></span></code> </pre> <br><p>  Ahora nuestra pantalla se ver√° as√≠: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f1/783/c01/8f1783c0159c45c314c05724969d7000.png" alt="Maroon como color primario" width="500"></div><br><p>  Otros colores y fuentes que se pueden cambiar: <a href="">MaterialTheme.kt # 57</a> </p><br><p>  Rally Activity proporciona un buen ejemplo de c√≥mo personalizar un tema: <a href="">c√≥digo fuente para RallyTheme.kt</a> </p><br><h1 id="chto-posmotretpochitat">  Qu√© ver / leer </h1><br><p>  Si desea m√°s, puede ensamblar el proyecto de muestra de acuerdo con las <a href="">instrucciones aqu√≠</a> . </p><br><p>  Mientras escriben los usuarios de Windows, ahora no hay una forma oficial de iniciar Compose, pero hay una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gu√≠a</a> no oficial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de kotlinlang Slack</a> . </p><br><p>  Se pueden hacer preguntas sobre Compose a los desarrolladores en el canal <code>#compose</code> kotlinlang Slack. </p><br><p>  Deje otros enlaces en los comentarios: los m√°s √∫tiles se agregar√°n aqu√≠. </p><br><h1 id="vyvody">  Conclusiones </h1><br><p>  El desarrollo de esta biblioteca est√° en pleno desarrollo, por lo que las interfaces que se muestran aqu√≠ est√°n sujetas a cambios.  Todav√≠a hay muchas cosas sobre las que puede aprender en el c√≥digo fuente, como <code>@Model</code> y flujo de datos unidireccional (flujo de datos unidireccional).  Quiz√°s este sea un tema para futuros art√≠culos. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/461101/">https://habr.com/ru/post/461101/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461087/index.html">Generando mazmorras y cuevas para mi juego</a></li>
<li><a href="../461091/index.html">L√°mparas LED Camelion</a></li>
<li><a href="../461093/index.html">Noticias del mundo de OpenStreetMap No. 469 (07/09/2019 - 07/07/2019)</a></li>
<li><a href="../461095/index.html">Apollo Guidance Computer: software de arquitectura y sistema. Parte 1</a></li>
<li><a href="../461099/index.html">Juego AirAttack! - nuestra primera experiencia de desarrollo de realidad virtual</a></li>
<li><a href="../461105/index.html">5 complementos √∫tiles para webpack</a></li>
<li><a href="../461107/index.html">Dos√≠metro para Seryozha. Parte II Tubos centenarios vs √°tomo pac√≠fico</a></li>
<li><a href="../461113/index.html">Cinco a√±os de uso de C ++ para proyectos de microcontroladores en producci√≥n</a></li>
<li><a href="../461121/index.html">Peque√±os experimentos multitarea en un microcontrolador</a></li>
<li><a href="../461125/index.html">La tarea de crear c√≥digos num√©ricos secuenciales para numerar mensajes en el c√≥digo fuente en Visual Studio (ej. C #)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>