<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥓 🔬 🚴🏿 Cascadeur: Vorhersage der Sechs-Punkte-Pose eines Charakters 👆🏿 🐃 👐🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir möchten allgemein die ersten Erfolge mit tiefem Lernen in der Charakteranimation für unser Cascadeur- Programm skizzieren. 

 Während der Arbeit a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cascadeur: Vorhersage der Sechs-Punkte-Pose eines Charakters</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/banzai/blog/469221/"><iframe width="560" height="315" src="https://www.youtube.com/embed/Hu88WW7JzqI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Wir möchten allgemein die ersten Erfolge mit tiefem Lernen in der Charakteranimation für unser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cascadeur-</a> Programm skizzieren. <br><br>  Während der Arbeit an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Shadow Fight 3</a> haben wir viele Kampfanimationen gesammelt - ungefähr 1100 Bewegungen mit einer durchschnittlichen Dauer von ungefähr 4 Sekunden.  Es schien uns vor langer Zeit, dass dies ein guter Datensatz für das Training einer Art neuronalen Netzwerks sein könnte. <br><br>  Sobald wir bemerkten, dass die Animatoren, wenn sie die ersten Skizzen von Ideen auf Papier machen, nur einen Mann mit einem wörtlichen Stock zeichnen müssen, um sich die Pose des Charakters vorzustellen.  Wir dachten, da ein erfahrener Animator eine Pose in einem einfachen Muster gut einstellen kann, ist es durchaus möglich, dass ein neuronales Netzwerk dies kann.  Aus dieser Beobachtung entstand eine einfache Idee: Nehmen wir nur 6 Schlüsselpunkte von jeder Pose - Handgelenke, Knöchel, Becken und Halsbasis.  Wenn das neuronale Netzwerk nur die Positionen dieser Punkte kennt, kann es dann den Rest der Pose vorhersagen - die Position der 37 verbleibenden Punkte des Charakters? <br><a name="habracut"></a><br>  Wie man den Lernprozess anordnet, war von Anfang an klar: Am Eingang erhält das Netzwerk die Positionen von 6 Punkten aus einer bestimmten Pose, am Ausgang gibt es die Positionen der verbleibenden 37 Punkte an und wir vergleichen sie mit den Positionen, die sich an der Ausgangsposition befanden.  In der Auswertungsfunktion können Sie die Methode der kleinsten Quadrate für die Abstände zwischen den vorhergesagten Positionen von Punkten und der Quelle verwenden. <br><br>  Für den Trainingsdatensatz hatten wir alle Bewegungen der Charaktere aus Shadow Fight 3. Wir haben Posen von jedem Frame genommen und ungefähr 115.000 Posen erhalten.  Aber dieses Set war spezifisch - der Charakter schaute fast immer entlang der X-Achse und das linke Bein war zu Beginn der Bewegung immer vorne.  Um dieses Problem zu lösen, haben wir den Datensatz künstlich erweitert, indem wir Spiegelposen generiert und jede Pose zufällig im Raum gedreht haben.  Außerdem konnten wir den Datensatz auf zwei Millionen Posen erhöhen.  Wir haben 95% unseres Datensatzes für das Netzwerktraining und 5% für die Parametrisierung und das Testen verwendet. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nb/va/fj/nbvafjah67zy6xy7i-jo-46_vj4.png" alt="Bild"></div><br>  Wir haben eine ziemlich einfache neuronale Netzwerkarchitektur verwendet - ein vollständig verbundenes fünfschichtiges Netzwerk mit einer Aktivierungsfunktion und einer Initialisierungsmethode von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">selbstnormalisierenden neuronalen Netzwerken</a> .  Auf der letzten Ebene wird die Aktivierung nicht verwendet.  Mit 3 Koordinaten für jeden Knoten erhalten wir eine Eingabeschicht mit 6 * 3 Elementen und eine Ausgabeschicht mit 37 * 3 Elementen.  Wir suchten nach der optimalen Architektur für verborgene Schichten und konzentrierten uns auf eine Fünf-Schichten-Architektur mit 300, 400, 300, 200 Neuronen auf jeder verborgenen Schicht. Netzwerke mit weniger verborgenen Schichten lieferten jedoch auch gute Ergebnisse.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die L2-Regularisierung</a> von Netzwerkparametern war ebenfalls sehr nützlich, da sie die Vorhersagen reibungsloser und kontinuierlicher machte. <br><br>  Ein neuronales Netzwerk mit solchen Parametern sagt die Position von Punkten mit einem durchschnittlichen Fehler von 3,5 cm voraus. Dies ist ein sehr hoher Fehler, aber die Besonderheiten des Problems müssen berücksichtigt werden.  Für einen Satz von Eingabewerten kann es viele mögliche Ausgabewerte geben.  Daher lernte das neuronale Netzwerk schließlich, die wahrscheinlichsten gemittelten Vorhersagen zu treffen.  Wenn jedoch die Anzahl der Eingabepunkte auf 16 anstieg, verringerte sich der Fehler um die Hälfte, was in der Praxis eine sehr genaue Vorhersage der Pose ergab. <br><br>  Gleichzeitig konnte das neuronale Netzwerk jedoch keine vollständig korrekte Pose abgeben, wobei die Länge aller Knochen und die korrekten Gelenkgelenke erhalten blieben.  Aus diesem Grund starten wir zusätzlich einen Optimierungsprozess, bei dem alle Festkörper und Gelenke unseres physikalischen Modells ausgerichtet werden. <br><br>  In der Praxis waren die Ergebnisse sehr überzeugend - Sie können sie in unserem Video sehen.  Es gibt aber auch eine Besonderheit aufgrund der Tatsache, dass der Trainingsdatensatz Kampfanimationen aus einem Kampfspiel mit Waffen enthält.  Zum Beispiel scheint ein Charakter anzunehmen, dass er sich wie in einer Kampfhaltung mit einer Schulter zum Feind dreht und dementsprechend seine Füße und seinen Kopf dreht.  Und wenn Sie seine Hand ausstrecken, dreht sich der Pinsel nicht so, als wäre er mit einer Faust getroffen worden, sondern wie wenn er von einem Schwert getroffen wird. <br><br><img src="https://habrastorage.org/webt/lv/u1/lw/lvu1lwjym_zusygguv6cjtl3agg.gif"><br><br>  Die logische Idee für den nächsten Schritt ergab sich daraus, einige weitere Netzwerke mit einem erweiterten Satz von Punkten zu trainieren, die die Ausrichtung der Hände, Füße und des Kopfes sowie die Position der Knie und Ellbogen festlegen.  Wir haben 16-Punkte- und 28-Punkte-Schemata hinzugefügt.  Es stellte sich heraus, dass die Ergebnisse dieser Netzwerke kombiniert werden können, so dass der Benutzer Positionen auf einen beliebigen Satz von Punkten setzen kann.  Zum Beispiel entschied sich der Benutzer, den linken Ellbogen zu bewegen, berührte aber nicht den rechten.  Dann wird die Position des rechten Ellbogens und der rechten Schulter in einem 6-Punkt-Muster vorhergesagt, und die Position der linken Schulter wird in einem 16-Punkt-Muster vorhergesagt. <br><br><img src="https://habrastorage.org/webt/wu/5b/bb/wu5bbbpcesmntbbfj-xovirhbg8.gif"><br><br>  Es scheint, dass dies ein wirklich interessantes Werkzeug für die Arbeit mit der Pose eines Charakters ist.  Sein Potenzial wurde noch nicht bis zum Ende offenbart, und wir haben Ideen, wie wir es verbessern und nicht nur für die Arbeit mit einer Pose anwenden können.  Die erste Version dieses Tools ist bereits in der aktuellen Version von Cascadeur verfügbar.  Sie können es versuchen, wenn Sie sich für einen Closed Beta-Test auf unserer Website <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">cascadeur.com anmelden</a> <br><br>  Wir freuen uns über Ihre Meinung und beantworten Fragen. <br><br>  <i>Das Banzai Games-Team benötigt einen Deep-Learning-Forscher.</i>  <i>Lesen Sie hier mehr über die freie Stelle.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de469221/">https://habr.com/ru/post/de469221/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de469211/index.html">Wie ICD ein Ökosystem für Bankkunden entwickelt</a></li>
<li><a href="../de469213/index.html">Erkundung kombinatorischer Parser mit Rust</a></li>
<li><a href="../de469215/index.html">Arbeiten mit Datumsangaben in der Sprache R (Grundfunktionen sowie Lubridate- und TimeperiodsR-Pakete)</a></li>
<li><a href="../de469217/index.html">IMHO Saint TeamLead Conf 2019</a></li>
<li><a href="../de469219/index.html">Top 20 Navigationsfunktionen bei IntelliJ IDEA. Teil 2</a></li>
<li><a href="../de469223/index.html">LED-Hintergrundbeleuchtung als Hintertür</a></li>
<li><a href="../de469229/index.html">Robotik-Club-Projekt „GoROBO“ - ein Startup vom Beschleuniger der ITMO-Universität schafft es</a></li>
<li><a href="../de469231/index.html">Game Design Vortragsabend</a></li>
<li><a href="../de469233/index.html">Die Habr Weekly # 20 / 2FA-Authentifizierung ist kein Allheilmittel. Android 10 Gehen Sie für den schwächsten jQuery-Story-Gates-Film</a></li>
<li><a href="../de469235/index.html">Troldesh in einer neuen Maske: die nächste Welle der Massenverteilung des Ransomware-Virus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>