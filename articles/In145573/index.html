<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯПй ЁЯТ╝ ЁЯд┤ЁЯП┐ MySQL рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкрд░реНрд▓ рдореЗрдВ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреА рдирд┐рдЧрд░рд╛рдиреА ЁЯд╢ЁЯП╛ ЁЯЦХЁЯП╝ ЁЯЫм</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╕рднреА рдХреЛ рдирдорд╕реНрдХрд╛рд░ред 

 рдкрд╛рдВрдЪ рд╕рд╛рд▓ рд╕реЗ рдЕрдзрд┐рдХ рд╕рдордп рд╕реЗ рдореИрдВ рдПрдХ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рдХрдВрдкрдиреА рдореЗрдВ рдПрдХ рд╕рд┐рд╕реНрдЯрдо рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реВрдВ, рдЬреЛ рдХрд┐ рдлреНрд░реАрдмреЗрд╕ рдФрд░ рд╕реЗрдВрдЯреЛрд╕ рдХреЗ рд╕рд╛...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MySQL рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкрд░реНрд▓ рдореЗрдВ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреА рдирд┐рдЧрд░рд╛рдиреА</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body" data-io-article-url="https://habr.com/ru/post/145573/"> рд╕рднреА рдХреЛ рдирдорд╕реНрдХрд╛рд░ред <br><br>  рдкрд╛рдВрдЪ рд╕рд╛рд▓ рд╕реЗ рдЕрдзрд┐рдХ рд╕рдордп рд╕реЗ рдореИрдВ рдПрдХ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рдХрдВрдкрдиреА рдореЗрдВ рдПрдХ рд╕рд┐рд╕реНрдЯрдо рдПрдбрдорд┐рдирд┐рд╕реНрдЯреНрд░реЗрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реВрдВ, рдЬреЛ рдХрд┐ рдлреНрд░реАрдмреЗрд╕ рдФрд░ рд╕реЗрдВрдЯреЛрд╕ рдХреЗ рд╕рд╛рде рд╕реМ рд╕реЗ рдЕрдзрд┐рдХ рд╕рд░реНрд╡рд░реЛрдВ рдХреА рд╕реЗрд╡рд╛ рдХрд░ рд░рд╣рд╛ рд╣реИред  рдЗрд╕ рд╕рдордп рдХреЗ рджреМрд░рд╛рди, рдХрдИ рд╕реНрд╡-рд▓рд┐рдЦрд┐рдд рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЬрдорд╛ рд╣реБрдИ рд╣реИрдВ рдЬреЛ рдореЗрд░реЗ рдЬреАрд╡рди рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рддреА рд╣реИрдВред  рдореИрдВ рдЗрди рд▓рд┐рдкрд┐рдпреЛрдВ рдХреЛ рд╕рдореБрджрд╛рдп рдХреЗ рд╕рд╛рде рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ, рдФрд░ рд╕реНрд╡рд╕реНрде рдЖрд▓реЛрдЪрдирд╛ рд╕реБрдирдиреЗ рд╕реЗ рдХрднреА рджреБрдЦ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред <br><br>  рдкреГрд╖реНрдарднреВрдорд┐ред <br><a name="habracut"></a><br>  рдХрдИ рд╕рд╛рд▓ рдкрд╣рд▓реЗ, рдореЗрд░реЗ рдПрдХ рдорд┐рддреНрд░ рдиреЗ рдЕрдкрдиреЗ рдмрдЯреБрдП рдореЗрдВ рдкреИрд╕реЗ рдХрд╛ рдЕрдзрд┐рд╢реЗрд╖ рд╣реЛрдиреЗ рдХреЗ рдХрд╛рд░рдг, рдПрдХ-рдпреВрдирд┐рдЯ рдЗрдВрдЯреЗрд▓ рд╕рд░реНрд╡рд░ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рд░реНрд╡рд░ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдЦрд░реАрджрд╛, рдЗрд╕реЗ рд╕рдмрд╕реЗ рд╕рд╕реНрддреЗ рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдореЗрдВ рд░рдЦрд╛ (рдЬреИрд╕рд╛ рдХрд┐ рдЕрдм рдЗрд╕реЗ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлреИрд╢рдиреЗрдмрд▓ рд╣реИ - рдХреЙрд▓реЛрдХреЛрд▓реЗрд╢рди рдкрд░), рдФрд░ рдкрд╣рд▓реЗ рдЕрдкрдиреА рд╕рд╛рдЗрдЯреЛрдВ рдХреЛ рдкреЛрд╕реНрдЯ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛, рдлрд┐рд░ рд╢реБрд░реВ рдХрд┐рдпрд╛ред рджреЛрд╕реНрддреЛрдВ рдХреЛ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рд╡рд┐рддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рджреЛрд╕реНрддреЛрдВ рдиреЗ рдЕрдкрдиреЗ рдкреЗрдЬ рдкреЛрд╕реНрдЯ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛, рдлрд┐рд░ рдЕрдкрдиреЗ рджреЛрд╕реНрддреЛрдВ рдФрд░ рдирд┐рдпреЛрдХреНрддрд╛рдУрдВ рдХреА рд╕рд╛рдЗрдЯреЗрдВ рдЦреАрдВрдЪреАрдВред  рдЪреВрдБрдХрд┐ рдореЗрд░реЗ рджреЛрд╕реНрдд рдХреЛ LAMP рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдореЗрдВ рдмреБрд░реА рддрд░рд╣ рд╕реЗ рдорд╣рд╛рд░рдд рд╣рд╛рд╕рд┐рд▓ рдереА, рдЗрд╕рд▓рд┐рдП рдЖрдЧреЗ рдХреА рд╣рд▓рдЪрд▓ рдХреЗ рдмрд┐рдирд╛, рдЙрдиреНрд╣реЛрдВрдиреЗ Cpanel WHM рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛, рд▓реЗрдХрд┐рди рдореИрдВ рдЗрд╕ рд╕рднреА рдЕрд░реНрдерд╡реНрдпрд╡рд╕реНрдерд╛ рдХреЛ рдкреНрд░рд╢рд╛рд╕рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдХрд░реНрд╖рд┐рдд рд╣реБрдЖ, рдЬрд┐рд╕реЗ "рднреЛрдЬрди рдХреЗ рд▓рд┐рдП" рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдПрдХ рд╕реНрд╡рддрдВрддреНрд░ рд╢реНрд░рдо рд╢рдХреНрддрд┐ рдХреЗ рд░реВрдк рдореЗрдВ, рдореБрдЭреЗ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереАред <br><br>  рдХрдИ рд╡рд░реНрд╖реЛрдВ рдХреЗ рд▓рд┐рдП, рдмрд╣реБрдд рд╕рд╛рд░реА рд╕рд╛рдЗрдЯреЛрдВ рдиреЗ рд╕рд░реНрд╡рд░ рдкрд░ рд░реВрдЯ рд▓рд┐рдпрд╛, рднрд╛рд░ рдмрдврд╝рддрд╛ рдЧрдпрд╛, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдореИрдВрдиреЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рдлрд▓рддрд╛ рдХреЗ рд╕рд╛рде рд╕рдВрдШрд░реНрд╖ рдХрд┐рдпрд╛ред  рд╕рдордп-рд╕рдордп рдкрд░, mysql рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдПрдВ рд╢реБрд░реВ рд╣реБрдИрдВред  рдХреБрдЫ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдиреЗ рдзреАрдореЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛, рдЬреЛ рдмрд╛рдж рдХреЗ рд▓реЛрдЧреЛрдВ рдХреЛ рдЕрд╡рд░реБрджреНрдз рдХрд░рддреЗ рд╣реИрдВ, рджреВрд╕рд░реЛрдВ рдиреЗ рдЬреЛрдЗрдиреЛрдВ рдХреЗ рдПрдХ рд╕рдореВрд╣ рдХреЗ рд╕рд╛рде рдмрд╣реБ-рдХрд╣рд╛рдиреА рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд┐рдпрд╛, рдЬреЛ рдЕрднреА рднреА рдирд┐рд╢реНрдЪрд┐рдд <a href="http://bugs.mysql.com/bug.php%3Fid%3D26339">рдмрдЧ рдХреЗ</a> рдХрд╛рд░рдг рдирд╣реАрдВ рд╣реИ <a href="http://bugs.mysql.com/bug.php%3Fid%3D26339">,</a> рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрднреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рдЖрдВрдХрдбрд╝реЗ рд░рд╛рдЬреНрдп рдореЗрдВ рд▓рдЯрдХрд╛ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЕрдВрдд рдореЗрдВ, mysql рдиреЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдмрдВрдж рдХрд░ рджрд┐рдпрд╛ рдФрд░ рдЬрд╡рд╛рдм рджреЗрдирд╛ рдмрдВрдж рдХрд░ рджрд┐рдпрд╛ред  рдПрдХ рдирд┐рдЧрд░рд╛рдиреА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА рдЬреЛ рдХрд┐ mysql рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рд╕реВрдЪреА рдХреЛ рджреЗрдЦреЗрдЧрд╛ рдФрд░ рдЖрдкрд╛рддрдХрд╛рд▓ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдЕрд▓рд╛рд░реНрдо рдХреЛ рдзреНрд╡рдирд┐ рджреЗрдЧрд╛ред <br><br>  рдкрд╣рд▓реЗ рдореИрдВрдиреЗ рдмреИрд╢ рдореЗрдВ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд▓рд┐рдЦреАред  рдлрд┐рд░, рдЬрдм рдореБрдЭреЗ рдЕрдкрдиреА рдореБрдЦреНрдп рдиреМрдХрд░реА рдХреА рдкреНрд░рдХреГрддрд┐ рд╕реЗ рдореЛрддреА рдХреЛ рдЬрд╛рдирдирд╛ рдкрдбрд╝рд╛, рддреЛ рдореИрдВрдиреЗ рдЗрд╕реЗ рдкрд░реНрд▓ рдореЗрдВ рд▓рд┐рдЦрд╛ред <br><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЕрднреНрдпрд╛рд╕ рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ, рд╕рд╛рдорд╛рдиреНрдп рдСрдкрд░реЗрд╢рди рдХреЗ рджреМрд░рд╛рди, mysql рд╕рд░реНрд╡рд░ рдПрдХ рд╕рд╛рде рдкрд╛рдБрдЪ "рдзреАрдореА" рдкреНрд░рд╢реНрдиреЛрдВ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рддрд╛ рд╣реИ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЕрддреНрдпрдзрд┐рдХ рд▓реЛрдб рдХрд┐рдП рдЧрдП рд╕рд░реНрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП рднреА, рдФрд░ рдпрджрд┐ рдХреЛрдИ рд╣реЛ, рддреЛ рдпрд╣ рдЗрди рдкреНрд░рд╢реНрдиреЛрдВ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдЕрд╡рд╕рд░ рд╣реИред  рдмреЗрд╢рдХ, рдЖрдкрдХреЛ рд╕рдордп-рд╕рдордп рдкрд░ рдзреАрдореА рдХреНрд╡реЗрд░реА рдХреЗ рд▓реЙрдЧ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдиреЗ рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЕрдЧрд▓реЗ рд▓реЗрдЦ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╖рдп рд╣реИ, рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬреЛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рддрд╛ рд╣реИ рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕рд░рд▓ рд╕реВрдЪрдХрд╛рдВрдХ рдмрдирд╛рддрд╛ рд╣реИред <br><br>  рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рддрд░реНрдХ рд╕рд░рд▓ рд╣реИред  рд╣рдо рдорд╛рдирддреЗ рд╣реИрдВ рдХрд┐ mysql рд╕рд░реНрд╡рд░ рдХреЛ рдЬреЛрдЦрд┐рдо рд╣реИ, рдЕрдЧрд░ рд╕рддреНрдпрд╛рдкрди рдХреЗ рд╕рдордп, рджрд╕ рд╕реЗ рдЕрдзрд┐рдХ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП) "рдзреАрдореА" рдХреНрд╡реЗрд░реА рдПрдХ рд╕рд╛рде рдЪрд▓ рд░рд╣реА рд╣реИрдВ - рдЕрд╡рдзрд┐ рдореЗрдВ рдПрдХ рд╕реЗрдХрдВрдб рд╕реЗ рдЕрдзрд┐рдХред  рд╣рдо рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдХреЛ "рдЧрдВрднреАрд░" рдХрд╣рддреЗ рд╣реИрдВред  рдпрджрд┐ рд╕реНрдерд┐рддрд┐ рдЧрдВрднреАрд░ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдЕрд▓рд╛рд░реНрдо рдмрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><br>  рдЖрдЧреЗ рдХреЗ рдЕрднреНрдпрд╛рд╕ рд╕реЗ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдЕрдЧрд░ mysql рдХреБрдЫ рд╕рдордп рдХреЗ рд▓рд┐рдП рдПрдХ рдкреВрд░реНрд╡ рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ рд░рд╣рд╛ рд╣реЛ рддреЛ рдЕрд▓рд╛рд░реНрдо рдмрдЬрд╛рдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реЛрдЧрд╛ред  рдпрд╣реА рд╣реИ, рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ 10 рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рдирд╣реАрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рд░ рдорд┐рдирдЯ рдХреЗ рд╕рд╛рде рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдмрдврд╝рддреА рд╣реИред  рдЕрдирд┐рд╢реНрдЪрд┐рдд рд╕реНрдерд┐рддрд┐ рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рдЖрдВрдХрдбрд╝рд╛ рд▓реЗрддреЗ рд╣реИрдВ, рдХрд╣рддреЗ рд╣реИрдВ, 5ред <br><br>  рдПрдХ рдорд┐рдирдЯ рдореЗрдВ рдПрдХ рдмрд╛рд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд▓рд╛рдПрдБред  рд╣рдо рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рд╕реВрдЪреА рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВ, рд╣рдо рдЙрд╕ рд╕рдм рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рдиреАрдВрдж рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдирд╣реАрдВ рд╣реИ рдФрд░ рдПрдХ рд╕реЗрдХрдВрдб рд╕реЗ рдЕрдзрд┐рдХ рд╕рдордп рд▓реЗрддрд╛ рд╣реИред  рдпрджрд┐ рд╕рдВрдЦреНрдпрд╛ 10 рд╕реЗ рдЕрдзрд┐рдХ рд╣реИ, рддреЛ рд╣рдо рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рд╕реВрдЪреА рдХреЗ рд╕рд╛рде рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХреЛ рдПрдХ рдкрддреНрд░ рднреЗрдЬрддреЗ рд╣реИрдВред  рдкрд░рд┐рдгрд╛рдореА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕рд╣реЗрдЬреЗрдВред  рд╣рдо рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдХреЗ рдорд╛рдиреЛрдВ рдХреЛ рдЕрдВрддрд┐рдо 5 рдорд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдкрдврд╝рддреЗ рд╣реИрдВ - рдЕрдВрддрд┐рдо 5 рдорд┐рдирдЯреЛрдВ рдХреЗ рд▓рд┐рдП, рдФрд░ рдпрджрд┐ рдЗрд╕ рдЕрд╡рдзрд┐ рдХреЗ рджреМрд░рд╛рди 5 рдкреВрд░реНрд╡-рд░рд╛рдЬрдиреИрддрд┐рдХ рд░рд╛рдЬреНрдп рдереЗ, рддреЛ рд╣рдо рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдХреЛ рдПрдХ рдИрдореЗрд▓ рднреЗрдЬрддреЗ рд╣реИрдВред <br><br>  рдЗрд╕рдХреЗ рдмрд╛рдж, рдПрдХ рдмреНрд▓реЙрдХ рдХреЛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рдбрд╛рд▓рд╛ рдЧрдпрд╛ рдерд╛, рдЬреЛ рдмрд╣реБ-рдордВрдЬрд┐рд▓рд╛ рдкреНрд░рд╢реНрдиреЛрдВ рдХреЛ рдкрдХрдбрд╝рддрд╛ рдерд╛, рдЬреЛ рд╕рд╛рдВрдЦреНрдпрд┐рдХреА рд░рд╛рдЬреНрдп рдореЗрдВ рдирд┐рд▓рдВрдмрд┐рдд рдХрд░ рджрд┐рдП рдЧрдП рдереЗред <br><br>  рджрд░рдЕрд╕рд▓, рд╕реНрдХреНрд░рд┐рдкреНрдЯред <br><br><pre><code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/perl #use strict; use DBI; use DBD::mysql; use POSIX; ($sysname, $hostname, $release, $version, $machine) = POSIX::uname(); my $slowtime=1; #       my $warnlevel=5; #       my $warncounter=5; #  $warncounter     my $alarmcounter=10; #     &gt;= $alarmcounter     my $socket='/tmp/mysql56.sock'; #    my $email="admin\@myemail.net"; #   my $wrkdir='/tmp/'; my $procfile=$wrkdir.'alarm.proclist'; #      my $datfile=$wrkdir.'alarm.dat'; #        my $pidfile=$wrkdir.'alarm.pid'; # pid .  mysql         if (-e "$pidfile") { printf("pid file found. Exit.\n"); exit(255); } open (PIDFILE,"&gt;$pidfile") || die "cant create $pidfile\n"; print PIDFILE "$$\n"; close PIDFILE; open (PROCFILE,"&gt;$procfile") || die "cant create $procfile\n"; my ($proc, $dbh, $sth, $totalcounter, $slowcounter, $sleepcounter, $user, $time, $state, $command, $info, $i); until ($dbh = DBI-&gt;connect("DBI:mysql:mysql_socket=$socket", "user", "password")){ unlink($pidfile); die("Can't connect: $DBI::errstr\n"); } $sth = $dbh-&gt;prepare("SHOW FULL PROCESSLIST"); $sth-&gt;execute; my @proclist=(); $totalcounter=$slowcounter=$sleepcounter=0; while (my $row = $sth-&gt;fetchrow_hashref()) { $user=$row-&gt;{'User'}; $time=$row-&gt;{'Time'}; $state=$row-&gt;{'State'}; $command=$row-&gt;{'Command'}; $info=$row-&gt;{'Info'}; $totalcounter++; next if ($user =~ m/root/); if ($command =~ m/(Sleep|Delayed|Binlog)/){ $sleepcounter++; next; }; ###      statistics if ($state =~ m/statistics/ &amp;&amp; $time &gt; 5){ $statinfo="$user: killed $mid: $dbuser | $db | $time | $state | $command | $info\n\n"; $sth2 = $dbh-&gt;prepare("kill $mid"); $sth2-&gt;execute; $sth2-&gt;finish; open (MAIL,"|/usr/sbin/sendmail -F$hostname $email"); print MAIL "To:$email\nSubject:".$subj."Hanged query in the statistics state: $hostname, user $user \n\n"; print MAIL $statinfo; close (MAIL); }; ### if ($time&gt;$slowtime) { $slowcounter++; } $info =~ s/[\r\n\t]+/ /g; push (@proclist,sprintf("%-24s | %4d | %s | %s | %s \n", $user, $time, $state, $command, $info)); printf PROCFILE ("%-24s | %4d | %s | %s | %s \n", $user, $time, $state, $command, $info); } $sth-&gt;finish; close PROCFILE; #print "--- $slowcounter slow queries from total $totalcounter ($sleepcounter are sleep) ---- \n"; my @data=(); ### read slowcounter timings from dat file open (DATFILE,"&lt;$datfile"); while(&lt;DATFILE&gt;){ my($line) = $_; chomp($line); push (@data,$line); } close(DATFILE); ### if dat file is smaller than warnlevel then fill timings by zeros if (scalar(@data)&lt;$warnlevel) { for $i ( 0 .. $warnlevel-scalar(@data) ) { push (@data,0); } } ### shift timings with last slowcounter push (@data,$slowcounter); shift(@data); ### dumping slowcounter timings to dat file open (DATFILE,"+&gt;$datfile") || die "cant create $datfile\n"; foreach (@data) { print DATFILE "$_\n"; } close(DATFILE); ### get number of bad states for last minutes my $cnt=0; foreach (@data) { if($_ &gt;= $warnlevel) { $cnt++; } } my $subj=" "; if ($slowcounter&gt;=$alarmcounter) { # very critical state $subj=" VERY "; } my $warnmessage="Critical state of $hostname! There was a $warncounter checks with at least $warnlevel long queries!\n"; if ($slowcounter&gt;=$alarmcounter) { # very critical state $warnmessage=$warnmessage."--- !!! Last check shows $slowcounter long queries!\n"; } if (($cnt &gt;= $warncounter) || $slowcounter&gt;=$alarmcounter){ open (MAIL,"|/usr/sbin/sendmail -F$hostname $email"); print MAIL "To:$email\nSubject:".$subj."Critical state of $hostname\n\n"; print MAIL $warnmessage; print MAIL "---------------------------------------------------------------------------------------------------\n"; print MAIL "--- $slowcounter slow queries from total $totalcounter ($sleepcounter are sleep) \n"; print MAIL "---------------------------------------------------------------------------------------------------\n"; foreach (@proclist) { print MAIL "$_"; } close (MAIL); } unlink($pidfile);</span></span></code> </pre> <br><br>  рдореИрдВ рдирд┐рдЬрд╝рдиреА рдиреЛрд╡рдЧреЛрд░реЛрдб рдЕрдВрдЧреНрд░реЗрдЬреА рдореЗрдВ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдорд╛рдлреА рдорд╛рдБрдЧрддрд╛ рд╣реВрдБред <br><br>  рднрд╡рд┐рд╖реНрдп рдореЗрдВ, рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рдХрдВрдкрдиреА рдореЗрдВ mysql рдХреЙрдореНрдмреИрдЯ рд╕рд░реНрд╡рд░ рдкрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЬрд╣рд╛рдБ рдореИрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реВрдВ, рдФрд░ рдХрдИ рдмрд╛рд░ рдореИрд╕рдХрд╛рд░рд▓ рд╕рд░реНрд╡рд░ рдХреЛ рд╕реЗрд╡рд╛ рд╕реЗ рд╡рдВрдЪрд┐рдд рд╣реЛрдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рдореЗрдВ рдорджрдж рдХреА, рдФрд░ рдмрд╕ рдХреБрдЫ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рдмреЗрдХрд╛рд░ рд╕рдВрд╕рд╛рдзрди рдХреЛ рдмрд░реНрдмрд╛рдж рдХрд░рдиреЗ рдХреА рд╕реВрдЪрдирд╛ рджреАред <br><br>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛рдо рдХрд░рддреА рд╣реИ: <br><br>  - рдЬрдм рд╕реНрдкреИрдо рдмреЙрдЯ рднрдЧрд╡рд╛рди-рднреВрд▓ рдЧрдП рдордВрдЪреЛрдВ рдкрд░ рд╣рдорд▓рд╛ рдХрд░рддреЗ рд╣реИрдВред  рд▓реЛрдб рдХреЗ рддрд╣рдд, рдкреНрд░рджрд░реНрд╢рди рдбреНрд░реЙрдк, рдлреЛрд░рдо рдЯреЗрдмрд▓ рдХреНрд░реИрд╢ рд╣реЛрдиреЗ рд▓рдЧрддреЗ рд╣реИрдВ, рдЕрдиреБрд░реЛрдз "рд▓реЙрдХ" рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдХрддрд╛рд░ рдореЗрдВ рдвреЗрд░ рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВред  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╕реЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдПрдХ рдмрд╣реБрдд рд╣реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдФрд░ рд╕рд╣рдЬ рд╕реВрдЪреА рдЖрддреА рд╣реИ; <br><br>  - рдЬрдм рдЕрдВрдзреЗ SQL рдЗрдВрдЬреЗрдХреНрд╢рди рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рд╛рдЗрдЯреЛрдВ рдкрд░ рдПрдХ рдмреЗрдВрдЪрдорд╛рд░реНрдХ рд╣рдорд▓рд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ; <br><br>  - рдЬрдм mysql рдмреЗрд╡рдХреВрдлреА рд╕реЗ рд▓рдЯрдХрддрд╛ рд╣реИ, рдФрд░ рдпрд╣ рдХрднреА-рдХрднрд╛рд░ рд▓реЛрдб рдХреЗ рддрд╣рдд рд╣реЛрддрд╛ рд╣реИ (рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЕрдирд┐рд╢реНрдЪрд┐рдд рдХрд╛рд▓ рддрдХ рдХрд╛рдо рдХрд░рддреА рд╣реИ, рдЕрдиреНрдп рд╕рднреА рдмрд┐рдирд╛ рдХрд┐рд╕реА рд╕реНрдерд┐рддрд┐ рдХреЗ рдмрд╕ рд▓рдЯрдХрд╛рддреЗ рд╣реИрдВ, рдФрд░ рдЬрдм рддрдХ рдХрдиреЗрдХреНрд╢рди рд╕реАрдорд╛ рдирд╣реАрдВ рдЪреБрдиреА рдЬрд╛рддреА рд╣реИ, рддрдм рддрдХ) - рд╕реНрдХреНрд░рд┐рдкреНрдЯ mysql рдкреЛрд░реНрдЯ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╕рд┐рд╕реНрдЯрдо рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рддреЗрдЬреА рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ ; <br><br>  - рдЬрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рдкрд╛рд╕ рдбреЗрдЯрд╛ рдХреА рдорд╛рддреНрд░рд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдкреНрд░рднрд╛рд╡рд╢рд╛рд▓реА рддрд╛рд▓рд┐рдХрд╛рдПрдБ рд╣реЛрддреА рд╣реИрдВ рдФрд░ рдЗрддрдиреЗ рдЕрдЪреВрдХ рдкреНрд░рд╢реНрди рд╣реЛрддреЗ рд╣реИрдВ рдХрд┐ рдПрдХ рдХреНрд╡реЗрд░реА рдХреЛ рдХрдИ рд╕реЗрдХрдВрдб рдпрд╛ рдХреБрдЫ рдорд┐рдирдЯреЛрдВ рдХреЗ рд▓рд┐рдП рднреА рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд╢реЗрд╖ рдкреНрд░рд╢реНрди рд╕рдВрдЪрд┐рдд рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рдмрдВрдж рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдХрддрд╛рд░ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рддреЗ рд╣реИрдВред  рдкрддреНрд░ рдореЗрдВ рдПрдХ рдЕрдбреЙрдкреНрдЯрд┐рд╡ рдХреНрд╡реЗрд░реА рддреБрд░рдВрдд рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИ, рдЖрдк рдЬрд▓реНрджреА рд╕реЗ рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХреНрд╡реЗрд░реА рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ рдПрдХ рдЗрдВрдбреЗрдХреНрд╕ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдпрджрд┐ рдЗрдиреЛрдбрдм рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдирд┐рдЧрд░рд╛рдиреА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЧрд╣рди рдзреАрдореА рдХреНрд╡реЗрд░реА рдкрд░ рднреА рдХрд╛рдо рдХрд░рддреА рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЙрдирдХрд╛ рдмрдВрдбрд▓ "рднреЗрдЬрд╛ рдЧрдпрд╛ рдбреЗрдЯрд╛" рдпрд╛ "tmp рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рд▓рд┐рдкрд┐" рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд▓рдЯрдХрд╛ рд╣реБрдЖ рд╣реИред  рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдРрд╕реЗ рдЕрдиреБрд░реЛрдз рдмрд╣реБрдд рдЦрддрд░рдирд╛рдХ рд╣реЛрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рд╕рд░реНрд╡рд░ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдмрд╣реБрдд рдХрдо рдХрд░ рджреЗрддреЗ рд╣реИрдВ; <br><br>  - рдЬрдм рдорд▓реНрдЯреА рд╕реНрдЯреЛрд░реА рдЬреЙрдЗрди рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд▓рдЯрдХрд╛рддреЗ рд╣реИрдВред  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЙрдиреНрд╣реЗрдВ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдирд╛рдЦреВрди рджреЗрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдХрднреА-рдХрднреА рд╡реЗ рдорд╛рд░реЗ рдирд╣реАрдВ рдЬрд╛рддреЗ рд╣реИрдВ - mysql рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдХрд╛рд░рдг; <br><br>  - рдХрдИ рдмрд╛рд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдкрдХрдбрд╝рд╛ рдЧрдпрд╛ mysql рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рд╢реНрдиреЛрдВ рдкрд░ рд▓рдЯрдХрд╛ рд╣реБрдЖ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдЖрдЧреЗ рдЕрдзреНрдпрдпрди рдиреЗ рдПрдХ рдЕрджреНрдпрддрди рдХрд╛ рдиреЗрддреГрддреНрд╡ рдХрд┐рдпрд╛, рдмрдЧрдЯреНрд░реИрдХ рдкрд░ рд╕рдорд╛рди рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рд╕рд╛рде рдмрдЧ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рдмрд╛рджред <br><br>  рдХрднреА-рдХрднреА, рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рдЭреВрдареА рд╕рдХрд╛рд░рд╛рддреНрдордХрддрд╛рдПрдВ рдЖрддреА рд╣реИрдВ рдпрджрд┐ рдХреЛрдИ рд╡реНрдпрдХреНрддрд┐ рдПрдХ рдмрдбрд╝реА рддрд╛рд▓рд┐рдХрд╛ рдХреА рдорд░рдореНрдордд, рдЕрдиреБрдХреВрд▓рди рдпрд╛ рдбрдВрдк рдХрд░рддрд╛ рд╣реИред <br><br>  рдореБрдЭреЗ рдЦреБрд╢реА рд╣реЛрдЧреА рдЕрдЧрд░ рдпрд╣ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд┐рд╕реА рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИред </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/In145573/">https://habr.com/ru/post/In145573/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../In145564/index.html">рдУрдкреЗрд░рд╛ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЯреАрдо рджреНрд╡рд╛рд░рд╛ SPDY рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдкрд╛рд░реНрд╕рд┐рдВрдЧ</a></li>
<li><a href="../In145565/index.html">Unity3dред рдПрдХрддрд╛ 3 рдбреА рдЫрд╛рддреНрд░ (B09-B12) рд╕реЗ рд╕рдмрдХ</a></li>
<li><a href="../In145567/index.html">рдЪреАрдВрдЯреА рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕реЛрд╢рд▓ рдореАрдбрд┐рдпрд╛ рдХреА рдЦреЛрдЬ</a></li>
<li><a href="../In145568/index.html">рд╡реИрд╕реЗ рднреА рдирдИ рд╡реЗрдмрд╕рд╛рдЗрдЯ рдбрд┐рдЬрд╛рдЗрди</a></li>
<li><a href="../In145570/index.html">рдордзреНрдпрд╕реНрдерддрд╛ рдкреНрд░рдгрд╛рд▓реА рдореЗрдВ рдИ-рдиреНрдпрд╛рдп рдХрд╛ рд╡рд┐рдХрд╛рд╕</a></li>
<li><a href="../In145574/index.html">LocalStorage рдХреЗ рд╕рд╛рде рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдХрд╛рдоред рдареАрдХ рдЙрд╕реА рд╕рдордп, SessionStorage рдХреЗ рд╕рд╛рде</a></li>
<li><a href="../In145575/index.html">PHP рдореЗрдВ рд╡рд╕реНрддреБрдУрдВ рдХрд╛ рд╕рдВрдЧреНрд░рд╣ред рднрд╛рдЧ рджреЛ</a></li>
<li><a href="../In145576/index.html">Computex 2012 рдХрд╛ рдЪреМрдерд╛ рджрд┐рди рд╣реИред рдЕрдиреМрдкрдЪрд╛рд░рд┐рдХ</a></li>
<li><a href="../In145578/index.html">рдЧреАрдХреНрд╕ рдХреЗ рд▓рд┐рдП рд╕рд░рд▓ phpMyAdmin рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди</a></li>
<li><a href="../In145579/index.html">DataGenetics рд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рдбреЛрдореЗрди рддрдереНрдп</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>