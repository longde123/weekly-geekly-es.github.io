<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐼 👨🏽‍🚀 🚜 Kubernetes 1.14: Aperçu des principales innovations ⚛️ 🕴🏻 🛵</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kubernetes - 1.14 sortira cette nuit. Selon la tradition qui s'est développée pour notre blog, nous parlons de changements clés dans la nouvelle versi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kubernetes 1.14: Aperçu des principales innovations</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/445196/"><img src="https://habrastorage.org/webt/dx/2g/0e/dx2g0etf3mgkoidtla2dfbgmud4.png"><br><br>  Kubernetes - <a href="">1.14</a> <a href="">sortira</a> cette nuit.  Selon la tradition qui s'est développée pour notre blog, nous parlons de changements clés dans la nouvelle version de ce merveilleux produit Open Source. <br><br>  Les informations utilisées pour préparer ce matériel sont tirées du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tableau de suivi des améliorations de Kubernetes</a> , <a href="">CHANGELOG-1.14</a> et des problèmes connexes, des demandes d'extraction, des propositions d'amélioration de Kubernetes (KEP).  <b>MISE À JOUR</b> (26 mars): L' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">annonce officielle de la sortie</a> est également apparue sur le blog K8s. <a name="habracut"></a><br><br>  Commençons par une introduction importante du cycle de vie du cluster SIG: <b>les clusters de basculement dynamique</b> Kubernetes (et plus précisément les déploiements HA auto-hébergés) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">peuvent</a> désormais <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">être créés</a> à l'aide des commandes <code>kubeadm</code> ( <code>init</code> et <code>join</code> ) habituelles (dans le contexte des clusters à nœud unique).  En bref, pour cela: <br><br><ul><li>  les certificats utilisés par le cluster sont transférés vers des secrets; </li><li>  pour la possibilité d'utiliser le cluster etcd à l'intérieur du cluster K8s (c'est-à-dire de se débarrasser de la dépendance externe qui a existé jusqu'à présent), l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">opérateur etcd est utilisé</a> ; </li><li>  Les paramètres recommandés pour un équilibreur de charge externe qui fournit une configuration à tolérance de pannes sont documentés (à l'avenir, la possibilité d'une défaillance à partir de cette dépendance est prévue, mais pas à ce stade). </li></ul><br><img src="https://habrastorage.org/webt/s0/0l/v4/s00lv4q1fpdozudahtus5ummwq4.png"><br>  <i>Architecture de cluster Kubernetes HA construite avec kubeadm</i> <br><br>  Les détails de la mise en œuvre peuvent être trouvés dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">proposition de conception</a> .  Cette fonctionnalité était très attendue: la version alpha était attendue dans K8s 1.9, mais n'apparaissait que maintenant. <br><br><h2>  API </h2><br>  La commande <code>apply</code> et la <b>gestion d'objet</b> généralement <b>déclarative sont</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">déplacées</a> de <code>kubectl</code> vers apiserver.  Les développeurs eux-mêmes expliquent brièvement leur décision en disant que l' <code>kubectl apply</code> est un élément fondamental du travail avec les configurations dans Kubernetes, cependant, c'est «plein de bugs et difficile à corriger», et donc cette fonctionnalité doit être restaurée à la normale et transférée sur le plan de contrôle.  Exemples simples et illustratifs des problèmes d'aujourd'hui: <br><br><img src="https://habrastorage.org/webt/5b/sl/cw/5bslcwl-e_5kxq67oqrsgizwsk0.png"><br><br>  Les détails de l'implémentation sont dans <a href="">KEP</a> .  La disponibilité actuelle est la version alpha (la promotion en version bêta est prévue pour la prochaine version de Kubernetes). <br><br>  Dans la version alpha, la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">possibilité d'</a> utiliser le schéma OpenAPI v3 pour <b>créer et publier la documentation OpenAPI sur CustomResources</b> (CR) utilisée pour valider (côté serveur) les ressources K8 définies par l'utilisateur (CustomResourceDefinition, CRD) est devenue disponible.  La publication d'OpenAPI pour CRD permet aux clients (par exemple, <code>kubectl</code> ) d'effectuer une validation de leur côté (dans le cadre de <code>kubectl create</code> et <code>kubectl apply</code> ) et d'émettre de la documentation conformément au schéma ( <code>kubectl explain</code> ).  Les détails sont dans le <a href="">KEP</a> . <br><br>  Les journaux préexistants <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s'ouvrent désormais</a> avec l'indicateur <code>O_APPEND</code> (plutôt que <code>O_TRUNC</code> ) pour éviter la perte de journaux dans certaines situations et pour la commodité de tronquer les journaux avec des utilitaires de rotation externes. <br><br>  Toujours dans le contexte de l'API Kubernetes, on peut noter que dans <code>PodSandbox</code> et <code>PodSandboxStatus</code> champ <code>PodSandboxStatus</code> est <code>runtime_handler</code> pour prendre en compte les informations sur <code>RuntimeClass</code> dans le pod (en savoir plus à ce sujet dans le texte sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la version Kubernetes 1.12</a> , où cette classe est apparue comme une version alpha), et dans Admission Webhooks a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">implémenté la</a> possibilité de déterminer les versions d' <code>AdmissionReview</code> qu'ils prennent en charge.  Enfin, dans les règles d'admission Webhooks, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vous pouvez</a> désormais <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">limiter la</a> portée de leur application à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la</a> portée de l'espace de noms et du cluster. <br><br><h2>  Installations de stockage </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code><b>PersistentLocalVolumes</b></code></a> qui ont le statut bêta depuis la sortie de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">K8s 1.10</a> sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">déclarés</a> stables (GA): cette porte de fonctionnalité ne sera plus désactivée et sera supprimée dans Kubernetes 1.17. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La possibilité d'</a> utiliser les variables d'environnement de la soi-disant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">API descendante</a> (par exemple, le nom du pod) pour les noms de répertoire montés en tant que sous- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>subPath</code></a> a été développée - sous la forme d'un nouveau champ <code>subPathExpr</code> , avec lequel le nom de répertoire souhaité est maintenant déterminé.  Initialement, la fonctionnalité est apparue dans Kubernetes 1.11, mais pour 1.14, elle est restée dans l'état de la version alpha. <br><br>  Comme avec la version précédente de Kubernetes, de nombreux changements importants sont introduits pour la CSI (Container Storage Interface) en évolution rapide: <br><br><h3>  CSI </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La prise en charge du</a> <b>redimensionnement de la</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prise en charge</a> <b>des volumes CSI est</b> devenue disponible (dans le cadre de la version alpha).  Pour l'utiliser, vous devrez activer la porte de fonctionnalité appelée <code>ExpandCSIVolumes</code> , ainsi que la présence de la prise en charge de cette opération dans un pilote CSI spécifique. <br><br>  Une autre caractéristique de CSI dans la version alpha est la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">possibilité</a> de se référer directement (c'est-à-dire sans utiliser de PV / PVC) aux volumes CSI dans le cadre de la spécification du pod.  Cela <b>supprime la restriction d'utilisation de CSI comme entrepôts de données exclusivement distants</b> , leur ouvrant la porte au monde des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">volumes éphémères locaux</a> .  Pour l'utiliser ( <a href="">exemple de la documentation</a> ), vous devez activer la porte de fonctionnalité <code>CSIInlineVolume</code> . <br><br>  Il y a eu des progrès dans les «internes» de Kubernetes liés à CSI, qui ne sont pas si visibles pour les utilisateurs finaux (administrateurs système) ... Pour le moment, les développeurs sont obligés de prendre en charge deux versions de chaque plug-in de stockage: une «à l'ancienne», à l'intérieur de la base de code K8 (dans -tree), et le second - dans le cadre du nouveau CSI <i>(en savoir plus à ce sujet, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> )</i> .  Cela entraîne des inconvénients compréhensibles qui doivent être résolus à mesure que le CSI se stabilise.  La simple dépréciation de l'API obsolète des plug-ins dans l'arborescence n'est pas possible en raison de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">politique Kubernetes correspondante</a> . <br><br>  Tout cela a conduit au fait que la version alpha a atteint le <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">processus de migration du</a> code interne des plug-ins</b> implémentés en tant <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">qu'arborescences vers les</a> plug-ins</b> CSI, en raison de quoi les développeurs seront réduits à prendre en charge une version de leurs plug-ins, et la compatibilité avec les anciennes API sera préservée et ils peuvent être déclarer obsolète comme d'habitude.  Il est prévu que d'ici la prochaine version de Kubernetes (1.15), tous les plugins du fournisseur de cloud seront migrés, l'implémentation recevra le statut bêta et sera activée dans les installations par défaut de K8s.  Voir la <a href="">proposition de conception pour</a> plus <a href="">de</a> détails.  Cette migration a également entraîné le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rejet</a> des restrictions pour les volumes définis par des fournisseurs de cloud spécifiques (AWS, Azure, GCE, Cinder). <br><br>  De plus, la prise en charge des périphériques de bloc CSI ( <code>CSIBlockVolume</code> ) a été <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">convertie</a> en version bêta. <br><br><h2>  Nodes / Kubelet </h2><br>  Introduction d'une version alpha du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nouveau point</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">terminaison</a> dans Kubelet, conçue pour <b>renvoyer des métriques pour les principales ressources</b> .  De manière générale, si Kubelet obtenait des statistiques sur l'utilisation des conteneurs de cAdvisor, ces données proviennent désormais de l'exécution du conteneur via le CRI (Container Runtime Interface), mais la compatibilité avec les anciennes versions de Docker est préservée.  Auparavant, les statistiques collectées dans Kubelet étaient fournies via l'API REST, mais maintenant il utilise le point de terminaison situé dans <code>/metrics/resource/v1alpha1</code> .  La stratégie à long terme des développeurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">est</a> de minimiser l'ensemble des métriques fournies par Kubelet.  <i>Soit dit en passant, ces mesures elles-mêmes ne sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plus appelées</a> «mesures de base», mais «mesures de ressources» et sont décrites comme des «ressources de première classe, telles que le processeur et la mémoire».</i> <br><br>  Une nuance très intéressante: malgré l'avantage évident des performances des points de terminaison gRPC par rapport aux différents cas d'utilisation du format Prometheus <i>(le résultat de l'un des</i> tests <i>de référence ci-dessous)</i> , les auteurs ont préféré le format texte Prometheus en raison de la direction claire de ce système de surveillance dans la communauté. <br><br><blockquote>  <i>«GRPC n'est pas compatible avec les principaux pipelines de surveillance.</i>  <i>Endpoint ne sera utile que pour fournir des métriques à Metrics Server ou surveiller des composants qui s'intègrent directement avec lui.</i>  <i>Lors de l'utilisation de la mise en cache dans Metrics Server, les performances du format de texte Prometheus <b>sont suffisamment bonnes pour</b> que nous préférions Prometheus à gRPC, étant donné l'utilisation répandue de Prometheus dans la communauté.</i>  <i>Lorsque le format OpenMetrics devient plus stable, nous pouvons nous rapprocher des performances gRPC avec un format basé sur des prototypes. »</i> </blockquote><br><img src="https://habrastorage.org/webt/v5/st/uo/v5stuoyssgedyqibabti_oz6bbi.png"><br>  <i>L'un des tests de performances comparatifs utilisant les formats gRPC et Prometheus dans le nouveau point de terminaison Kubelet pour les métriques.</i>  <i>Plus de graphiques et d'autres détails peuvent être trouvés dans <a href="">KEP</a> .</i> <br><br>  Entre autres changements: <br><br><ul><li>  Kubelet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">accepte</a> désormais le paramètre <code>pid=&lt;number&gt;</code> dans les <code>--system-reserved</code> et <code>--kube-reserved</code> , garantissant que le PID spécifié sera réservé pour le système entier ou les démons du système Kubernetes, respectivement.  La fonctionnalité est activée lorsque la porte de fonctionnalité est activée, appelée <code>SupportNodePidsLimit</code> . </li><li>  Kubelet essaie maintenant (une fois) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d'arrêter les</a> conteneurs dans un état inconnu avant de redémarrer et de supprimer les opérations. </li><li>  Lorsque vous utilisez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>PodPresets</code></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">,</a> les mêmes informations sont désormais <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ajoutées au</a> conteneur init en tant que conteneur standard. </li><li>  Kubelet a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">commencé à utiliser</a> <code>usageNanoCores</code> du fournisseur de statistiques CRI, et des statistiques de réseau ont été <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ajoutées</a> pour les nœuds et les conteneurs sous Windows. </li><li>  Les informations sur le système d'exploitation et l'architecture sont désormais enregistrées dans les <code>kubernetes.io/os</code> et <code>kubernetes.io/arch</code> des objets Node (transférées de la version bêta à GA). </li><li>  La possibilité de spécifier un groupe d'utilisateurs système spécifique pour les conteneurs dans le pod ( <code>RunAsGroup</code> , apparu dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">K8s 1.11</a> ) est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">passée</a> à la version bêta (activée par défaut). </li><li>  du et find utilisés dans cAdvisor sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">remplacés</a> par des implémentations Go. </li></ul><br><h2>  CLI </h2><br>  L'indicateur -k a été <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ajouté à</a> cli-runtime et kubectl pour l'intégration avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b>kustomize</b></a> (à propos, il est maintenant développé dans un référentiel séparé), c'est-à-dire  pour le traitement de fichiers YAML supplémentaires à partir de répertoires de personnalisation spéciaux (pour plus de détails sur leur utilisation, voir <a href="">KEP</a> ): <br><br><img src="https://habrastorage.org/webt/nv/sf/uy/nvsfuyar7x570ia_zrcp_v4lohi.jpeg"><br>  <i>Un exemple d'une utilisation simple du fichier de personnalisation (une utilisation plus compliquée de kustomize dans les <a href="">superpositions est également possible</a> )</i> <br><br>  De plus: <br><br><ul><li>  Le logo kubectl et sa documentation ont été <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mis à jour</a> - voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">kubectl.docs.kubernetes.io</a> . <br><br><img src="https://habrastorage.org/webt/n4/-1/kw/n4-1kwnebvlrzwahpkhdpjhlbsi.png"></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Une</a> nouvelle commande <code>kubectl create cronjob</code> a été <code>kubectl create cronjob</code> , dont le nom parle de lui-même. </li><li>  Dans les <code>kubectl logs</code> vous pouvez désormais <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">combiner les</a> indicateurs <code>-f</code> ( <code>--follow</code> pour les journaux de streaming) et <code>-l</code> ( <code>--selector</code> pour la requête d'étiquette). </li><li>  kubectl a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">appris à</a> copier des fichiers sélectionnés avec un joker. </li><li>  L'indicateur <code>--all</code> a été <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ajouté à la</a> commande <code>kubectl wait</code> pour sélectionner toutes les ressources dans l'espace de noms du type de ressource spécifié. </li><li>  Mécanisme de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plugin</a> stable déclaré <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pour kubectl</a> . </li></ul><br><h2>  Autre </h2><br>  Le statut stable (GA) a reçu les fonctionnalités suivantes: <br><br><ul><li>  Prise en charge des nœuds Windows (y compris Windows Server 2019), ce qui implique la possibilité de planifier des conteneurs Windows Server dans Kubernetes (voir également <a href="">KEP</a> ); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>ReadinessGate</code></a> utilisé dans la spécification du pod pour déterminer les conditions supplémentaires qui sont prises en compte dans la préparation du pod; </li><li>  Prise en charge des grandes pages (portail de fonctionnalités appelé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>HugePages</code></a> ); </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CustomPodDNS</a> ; </li><li>  API PriorityClass, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pod Priority &amp; Preemption</a> . </li></ul><br>  Autres changements introduits dans Kubernetes 1.14: <br><br><ul><li>  La stratégie RBAC par défaut ne fournit plus l'accès à l'API de <code>discovery</code> et la <code>access-review</code> d' <code>access-review</code> aux <i>utilisateurs</i> non authentifiés. </li><li>  La prise en charge officielle de CoreDNS est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fournie</a> uniquement pour Linux, donc lorsque vous utilisez kubeadm pour son déploiement (CoreDNS) dans un cluster, les nœuds doivent fonctionner uniquement sous Linux (les sélecteurs de nœuds sont utilisés pour cette limitation). </li><li>  La configuration CoreDNS par défaut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">utilise</a> désormais <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plug-in</a> de transfert au lieu du proxy.  De plus, readinessProbe a été <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ajouté à</a> CoreDNS, ce qui empêche l'équilibrage de charge sur les pods correspondants (non prêts pour le service). </li><li>  Dans kubeadm, dans les <code>upload-certs</code> <code>init</code> ou <code>upload-certs</code> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">il est devenu possible</a> de télécharger les certificats requis pour connecter le nouveau plan de contrôle au secret kubeadm-certs (l' <code>--experimental-upload-certs</code> est utilisé). </li><li>  Pour les installations Windows, une version alpha de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prise en charge de</a> gMSA (Group Managed Service Account) - comptes spéciaux dans Active Directory, qui peuvent être utilisés par des conteneurs, est apparue. </li><li>  Pour GCE <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">, le</a> cryptage mTLS a été <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">activé</a> entre etcd et kube-apiserver. </li><li>  Mises à jour du logiciel utilisé / dépendant: Go 1.12.1, CSI 1.1, CoreDNS 1.3.1, prise en charge de Docker 18.09 dans kubeadm, et la version minimale prise en charge de l'API Docker était de 1,26. </li></ul><br><h2>  PS </h2><br>  Lisez aussi dans notre blog: <br><br><ul><li>  « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kubernetes 1.13: un aperçu des principales innovations</a> »; </li><li>  « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kubernetes 1.12: aperçu des principales innovations</a> »; </li><li>  « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kubernetes 1.11: un aperçu des innovations clés</a> »; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kubernetes 1.10: un aperçu des principales innovations</a> ." </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445196/">https://habr.com/ru/post/fr445196/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445186/index.html">Création d'un système de combat en RPG</a></li>
<li><a href="../fr445188/index.html">Quelles seront les interfaces neuronales de jeu?</a></li>
<li><a href="../fr445190/index.html">Échanger / ne pas échanger: notre pilote ML dans The Platypus</a></li>
<li><a href="../fr445192/index.html">4K: évolution ou marketing?</a></li>
<li><a href="../fr445194/index.html">10 concepts pour un designer en 2019</a></li>
<li><a href="../fr445198/index.html">Lecteur de console Cmus pour Linux</a></li>
<li><a href="../fr445200/index.html">Les fournisseurs d'accès Internet demandent au ministère des Communications de les laisser entrer chez eux sans contrat</a></li>
<li><a href="../fr445202/index.html">Happy Potter et l'Ordre de CSS</a></li>
<li><a href="../fr445204/index.html">Conversion en continu des bases de données Firebird 2.5 au format ODS12 (Firebird 3.0)</a></li>
<li><a href="../fr445206/index.html">Réduisez les temps d'arrêt lors de la mise à niveau de Zimbra</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>