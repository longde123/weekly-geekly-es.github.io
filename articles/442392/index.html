<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèø‚Äçü§ù‚Äçüßëüèº ü•™ üë©‚Äçüëß‚Äçüëß Registro de NodeJS hecho a la derecha ü§æüèΩ üõéÔ∏è üë©üèº‚Äçü§ù‚Äçüë®üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øQu√© es lo que m√°s te molesta cuando piensas en iniciar sesi√≥n en NodeJS? Si me preguntas, dir√© que no hay est√°ndares de la industria para crear ID de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Registro de NodeJS hecho a la derecha</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442392/"><p><img src="https://habrastorage.org/webt/5a/em/fo/5aemfoyk841-ll_xjint9es2kao.jpeg"></p><br><p>  ¬øQu√© es lo que m√°s te molesta cuando piensas en iniciar sesi√≥n en NodeJS?  Si me preguntas, dir√© que no hay est√°ndares de la industria para crear ID de rastreo.  En este art√≠culo, veremos c√≥mo podemos crear estos ID de rastreo (lo que significa que examinaremos brevemente c√≥mo funciona el almacenamiento local de continuaci√≥n, tambi√©n conocido como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CLS</a> ) y profundizaremos en c√≥mo podemos utilizar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Proxy</a> para que funcione con CUALQUIER registrador. </p><a name="habracut"></a><br><h2 id="why-is-it-even-a-problem-to-have-a-trace-id-for-each-request-in-nodejs">  ¬øPor qu√© es incluso un problema tener un ID de rastreo para cada solicitud en NodeJS? </h2><br><p>  Bueno, en plataformas que usan subprocesos m√∫ltiples y generan un nuevo subproceso para cada solicitud.  Hay una cosa llamada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">almacenamiento local de subprocesos, tambi√©n conocido como TLS</a> , que permite mantener cualquier informaci√≥n arbitraria disponible para cualquier cosa dentro de un subproceso.  Si tiene una API nativa para hacerlo, es bastante trivial generar una ID aleatoria para cada solicitud, col√≥quela en TLS y √∫sela en su controlador o servicio m√°s adelante.  Entonces, ¬øcu√°l es el trato con NodeJS? <br>  Como saben, NodeJS es una plataforma de un solo subproceso (ya no es cierto ya que ahora tenemos trabajadores, pero eso no cambia el panorama general), lo que hace que TLS sea obsoleto.  En lugar de operar diferentes subprocesos, NodeJS ejecuta diferentes devoluciones de llamada dentro del mismo subproceso (hay una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gran serie de art√≠culos</a> sobre el bucle de eventos en NodeJS si est√° interesado) y NodeJS nos proporciona una manera de identificar de forma √∫nica estas devoluciones de llamada y rastrear sus relaciones entre s√≠ . </p><br><p>  En los viejos tiempos (v0.11.11) ten√≠amos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">addAsyncListener</a> que nos permit√≠a rastrear eventos asincr√≥nicos.  Sobre esta base, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Forrest Norvell</a> cre√≥ la primera implementaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">almacenamiento local</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">continuaci√≥n, tambi√©n conocido como CLS</a> .  No vamos a cubrir esa implementaci√≥n de CLS debido al hecho de que nosotros, como desarrolladores, ya fuimos despojados de esa API en v0.12. </p><br><p>  Hasta NodeJS 8 no ten√≠amos una forma oficial de conectarnos al procesamiento de eventos as√≠ncronos de NodeJS.  Y finalmente NodeJS 8 nos otorg√≥ el poder que perdimos a trav√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">async_hooks</a> (si desea obtener una mejor comprensi√≥n de async_hooks, eche un vistazo a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este art√≠culo</a> ).  Esto nos lleva a la implementaci√≥n moderna basada en async_hooks de CLS - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cls-hooked</a> . </p><br><h2 id="cls-overview">  Resumen de CLS </h2><br><p>  Aqu√≠ hay un flujo simplificado de c√≥mo funciona CLS: </p><br><p><img src="https://habrastorage.org/webt/ix/xe/wj/ixxewjdn0xn7r5feuvgdl1vnjow.jpeg"></p><br><p>  Vamos a desglosarlo paso a paso: </p><br><ol><li>  Digamos que tenemos un servidor web t√≠pico.  Primero tenemos que crear un espacio de nombres CLS.  Una vez para toda la vida de nuestra aplicaci√≥n. </li><li>  En segundo lugar, tenemos que configurar un middleware para crear un nuevo contexto CLS para cada solicitud.  Para simplificar, supongamos que este middleware es solo una devoluci√≥n de llamada que se llama al recibir una nueva solicitud. </li><li>  Entonces, cuando llega una nueva solicitud, llamamos a esa funci√≥n de devoluci√≥n de llamada. </li><li>  Dentro de esa funci√≥n, creamos un nuevo contexto CLS (una de las formas es utilizar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ejecutar la</a> llamada a la API). </li><li>  En este punto, CLS coloca el nuevo contexto en un mapa de contextos por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ID de ejecuci√≥n actual</a> . </li><li> Cada espacio de nombres CLS tiene propiedad <code>active</code> .  En esta etapa, CLS asigna <code>active</code> al contexto. </li><li>  Dentro del contexto, hacemos una llamada a un recurso as√≠ncrono, por ejemplo, solicitamos algunos datos de la base de datos.  Pasamos una devoluci√≥n de llamada a la llamada, que se ejecutar√° una vez que se complete la solicitud a la base de datos. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el</a> gancho as√≠ncrono <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">init se</a> activa para una nueva operaci√≥n asincr√≥nica.  Agrega el contexto actual al mapa de contextos por ID as√≠ncrono (consid√©relo un identificador de la nueva operaci√≥n asincr√≥nica). </li><li>  Como no tenemos m√°s l√≥gica dentro de nuestra primera devoluci√≥n de llamada, finaliza efectivamente nuestra primera operaci√≥n asincr√≥nica. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">despu√©s de que se</a> active el enlace as√≠ncrono para la primera devoluci√≥n de llamada.  Establece el contexto activo en el espacio de nombres como <code>undefined</code> (no siempre es cierto ya que podemos tener m√∫ltiples contextos anidados, pero para el caso m√°s simple es cierto). </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Desbloquear</a> gancho se dispara para la primera operaci√≥n.  Elimina el contexto de nuestro mapa de contextos por su ID as√≠ncrona (es lo mismo que la ID de ejecuci√≥n actual de nuestra primera devoluci√≥n de llamada). </li><li>  La solicitud a la base de datos ha finalizado y nuestra segunda devoluci√≥n de llamada est√° a punto de activarse. </li><li>  En este punto, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">antes de que el</a> gancho as√≠ncrono entre en juego.  Su ID de ejecuci√≥n actual es la misma que la ID as√≠ncrona de la segunda operaci√≥n (solicitud de base de datos).  Establece <code>active</code> propiedad <code>active</code> del espacio de nombres en el contexto encontrado por su ID de ejecuci√≥n actual.  Es el contexto que creamos antes. </li><li>  Ahora ejecutamos nuestra segunda devoluci√≥n de llamada.  Ejecutar un poco de l√≥gica de negocios en el interior.  Dentro de esa funci√≥n, podemos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">obtener cualquier valor por clave</a> del CLS y devolver√° lo que encuentre por la clave en el contexto que creamos antes. </li><li>  Suponiendo que es el final del procesamiento de la solicitud, nuestra funci√≥n regresa. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">despu√©s de que se</a> active el enlace as√≠ncrono para la segunda devoluci√≥n de llamada.  Establece el contexto activo en el espacio de nombres como <code>undefined</code> . </li><li>  <code>destroy</code> gancho se dispara para la segunda operaci√≥n asincr√≥nica.  Elimina nuestro contexto del mapa de contextos por su ID as√≠ncrono, dej√°ndolo absolutamente vac√≠o. </li><li>  Como ya no tenemos referencias al objeto de contexto, nuestro recolector de basura libera la memoria asociada a √©l. </li></ol><br><p>  Es una versi√≥n simplificada de lo que sucede debajo del cap√≥, pero cubre todos los pasos principales.  Si quieres profundizar m√°s, puedes echar un vistazo al <a href="">c√≥digo fuente</a> .  Son menos de 500 l√≠neas. </p><br><h2 id="generating-trace-ids">  Generando ID de rastreo </h2><br><p>  Entonces, una vez que tengamos una comprensi√≥n general de CLS, pensemos c√≥mo podemos utilizarlo para nuestro propio bien.  Una cosa que podr√≠amos hacer es crear un middleware que envuelva cada solicitud en un contexto, genere un identificador aleatorio y lo <code>traceID</code> en CLS por la clave <code>traceID</code> .  M√°s tarde, dentro de uno de nuestros millones de controladores y servicios podr√≠amos obtener ese identificador de CLS. </p><br><p>  Para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">expresar</a> este middleware podr√≠a verse as√≠: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cls = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'cls-hooked'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> uuidv4 = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'uuid/v4'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> clsNamespace = cls.createNamespace(<span class="hljs-string"><span class="hljs-string">'app'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> clsMiddleware = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// req and res are event emitters. We want to access CLS context inside of their event callbacks clsNamespace.bind(req) clsNamespace.bind(res) const traceID = uuidv4() clsNamespace.run(() =&gt; { clsNamespace.set('traceID', traceID) next() }) }</span></span></code> </pre> <br><p>  Luego, en nuestro controlador, podr√≠amos obtener el ID de rastreo generado de esta manera: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> controller = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> traceID = clsNamespace.get(<span class="hljs-string"><span class="hljs-string">'traceID'</span></span>) }</code> </pre> <br><p>  No hay mucho uso de este ID de rastreo a menos que lo agreguemos a nuestros registros. </p><br><p>  A√±√°dalo a nuestro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">winston</a> . </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { createLogger, format, transports } = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'winston'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addTraceId = printf(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">info</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> message = info.message <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> traceID = clsNamespace.get(<span class="hljs-string"><span class="hljs-string">'taceID'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (traceID) { message = <span class="hljs-string"><span class="hljs-string">`[TraceID: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${traceID}</span></span></span><span class="hljs-string">]: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${message}</span></span></span><span class="hljs-string">`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> message }) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> logger = createLogger({ <span class="hljs-attr"><span class="hljs-attr">format</span></span>: addTraceId, <span class="hljs-attr"><span class="hljs-attr">transports</span></span>: [<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> transports.Console()], })</code> </pre> <br><p>  Bueno, si todos los registradores admitieran formateadores en una forma de funciones (muchos de ellos no lo hacen por una buena raz√≥n) este art√≠culo no existir√≠a.  Entonces, ¬øc√≥mo agregar√≠a una identificaci√≥n de rastreo a mi amado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pino</a> ?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Proxy</a> al rescate! </p><br><h2 id="combining-proxy-and-cls">  Combinando Proxy y CLS </h2><br><p>  Proxy es un objeto que envuelve nuestro objeto original y nos permite anular su comportamiento en ciertas situaciones.  La lista de estas situaciones (en realidad se llaman trampas) es limitada y puede ver todo el conjunto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> , pero solo estamos interesados ‚Äã‚Äãen atrapar trampas.  Nos proporciona la capacidad de interceptar el acceso a la propiedad.  Significa que si tenemos un objeto <code>const a = { prop: 1 }</code> y lo envolvemos en un Proxy, con <code>get</code> trap podr√≠amos devolver lo que queramos para <code>a.prop</code> . </p><br><p>  Por lo tanto, la idea es generar un ID de rastreo aleatorio para cada solicitud y crear un <a href="">registrador de pino secundario</a> con el ID de rastreo y ponerlo en CLS.  Entonces podr√≠amos envolver nuestro registrador original con un Proxy, que redirigir√≠a todas las solicitudes de registro al registrador secundario en CLS si se encuentra uno y seguir√≠a usando el registrador original de lo contrario. </p><br><p>  En este escenario, nuestro Proxy podr√≠a verse as√≠: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pino = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'pino'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> logger = pino() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> loggerCls = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Proxy</span></span>(logger, { get(target, property, receiver) { <span class="hljs-comment"><span class="hljs-comment">// Fallback to our original logger if there is no child logger in CLS target = clsNamespace.get('loggerCls') || target return Reflect.get(target, property, receiver) }, })</span></span></code> </pre> <br><p>  Nuestro middleware se transformar√≠a en algo como esto: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cls = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'cls-hooked'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> uuidv4 = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'uuid/v4'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> clsMiddleware = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// req and res are event emitters. We want to access CLS context inside of their event callbacks clsNamespace.bind(req) clsNamespace.bind(res) const traceID = uuidv4() const loggerWithTraceId = logger.child({ traceID }) clsNamespace.run(() =&gt; { clsNamespace.set('loggerCls', loggerWithTraceId) next() }) }</span></span></code> </pre> <br><p>  Y podr√≠amos usar el registrador de esta manera: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> controller = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) =&gt;</span></span> { loggerCls.info(<span class="hljs-string"><span class="hljs-string">'Long live rocknroll!'</span></span>) <span class="hljs-comment"><span class="hljs-comment">// Logs something like // {"level":30,"time":1551385666046,"msg":"Long live rocknroll!","pid":25,"hostname":"eb6a6c70f5c4","traceID":"9ba393f0-ec8c-4396-8092-b7e4b6f375b5","v":1} }</span></span></code> </pre> <br><h2 id="cls-proxifyhttpsgithubcomkeenondrumscls-proxify">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cls-proxify</a> </h2><br><p>  Basado en la idea anterior, se cre√≥ una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">peque√±a biblioteca llamada cls-proxify</a> .  Tiene integraci√≥n con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">express</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">koa</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">fastify</a> fuera de la caja. <br>  Se aplica no solo <code>get</code> trap al objeto original, sino tambi√©n a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">muchos otros</a> .  Entonces hay infinitas aplicaciones posibles.  Podr√≠as llamar a funciones proxy, construcci√≥n de clases, ¬°casi cualquier cosa!  ¬°Est√°s limitado solo por tu imaginaci√≥n! <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Eche un vistazo a las demostraciones en vivo de su uso con pino y fastify, pino y express</a> . </p><br><p>  Con suerte, has encontrado algo √∫til para tu proyecto.  ¬°No dudes en comunicarme tus comentarios!  Aprecio mucho cualquier cr√≠tica y pregunta. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/442392/">https://habr.com/ru/post/442392/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../442376/index.html">Densidad de parcela comercial</a></li>
<li><a href="../442378/index.html">Un clic en la interfaz de Booking com puede arruinar unas vacaciones o por qu√© es importante un sistema de calificaci√≥n funcional</a></li>
<li><a href="../442380/index.html">Ordenar el caos</a></li>
<li><a href="../442384/index.html">Ampliar la funcionalidad del sistema de audio est√°ndar.</a></li>
<li><a href="../442386/index.html">Thymeleaf: Dialecto Dise√±o + Spring Boot 2</a></li>
<li><a href="../442396/index.html">Eventos digitales en Mosc√∫ del 4 al 10 de marzo</a></li>
<li><a href="../442402/index.html">Lo m√°s importante. Integraci√≥n con servicios externos.</a></li>
<li><a href="../442404/index.html">Lo m√°s importante. Integraci√≥n con servicios externos (parte 2)</a></li>
<li><a href="../442406/index.html">Fintech digest: transferencias gratuitas en el sistema SBP, la vulnerabilidad de los bancos a los ataques y otras noticias</a></li>
<li><a href="../442408/index.html">La m√°quina universal para realizar pruebas de bricolaje, parte 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>