<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ï üë©üèº‚Äç‚öñÔ∏è ‚òÇÔ∏è Activos inteligentes de Waves: listas en blanco y negro, comercio a intervalos üë∏üèº üéöÔ∏è üî£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En dos art√≠culos anteriores, hablamos sobre cuentas inteligentes y c√≥mo se pueden usar para realizar subastas y crear programas de lealtad , y tambi√©n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Activos inteligentes de Waves: listas en blanco y negro, comercio a intervalos</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/waves/blog/444686/"><img src="https://habrastorage.org/webt/qc/bn/or/qcbnormwrs0x3w_ushrehqcxjci.png" alt="imagen"><br><br>  <i>En dos art√≠culos anteriores, hablamos sobre cuentas inteligentes y c√≥mo se pueden usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">para realizar subastas y crear programas de lealtad</a> , y tambi√©n para ayudar a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">garantizar la transparencia de los instrumentos financieros</a> .</i> <i><br><br></i>  <i>Ahora consideraremos los activos inteligentes y varios casos de su aplicaci√≥n, incluida la congelaci√≥n de activos y la creaci√≥n de restricciones en las transacciones en direcciones espec√≠ficas.</i> <br><a name="habracut"></a><br>  Waves Smart Assets permite a los usuarios superponer scripts en activos, siguiendo la misma mec√°nica que con las cuentas inteligentes.  Cada nueva transacci√≥n creada usando el activo inteligente ser√° confirmada primero por el script, y solo luego por la cadena de bloques. <br><br>  Vale la pena se√±alar las siguientes diferencias entre activos inteligentes y cuentas inteligentes: <br><br><ol><li>  Es imposible verificar las pruebas en el c√≥digo de activo inteligente (hablamos de ellas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en el primer art√≠culo</a> ). </li><li>  En el c√≥digo de la cuenta inteligente, puede verificar ExchangeTransaction solo si su cuenta es una cuenta coincidente.  De lo contrario, solo se verifica el pedido.  No puede verificar el pedido directamente en el c√≥digo de activo inteligente, puede verificar ExchangeTransaction y, si es necesario, extraer el pedido de √©l. </li><li>  Un activo inteligente, a diferencia de una cuenta inteligente, no tiene un estado, pero a√∫n tenemos acceso a los estados de la cuenta desde el script. </li></ol><br>  Los activos inteligentes simplifican enormemente la redacci√≥n de contratos, haciendo que la implementaci√≥n de muchos casos sea concisa y elegante. <br><br>  <b>Congelaci√≥n de activos</b> <br><br>  Para congelar activos a una determinada <i>altura de</i> bloque <i>targetHeight</i> , simplemente puede establecer este valor en el script del siguiente activo inteligente: <br><br><pre><code class="scala hljs">let targetHeight = <span class="hljs-number"><span class="hljs-number">1500000</span></span> height &gt;= targetHeight height -  ,   .</code> </pre> <br>  <b>Condici√≥n espec√≠fica de Matcher</b> <br><br>  Para establecer una coincidencia espec√≠fica como desee, puede especificar su direcci√≥n como remitente en el script de activos inteligentes de la siguiente forma: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t : <span class="hljs-type"><span class="hljs-type">ExchangeTransaction</span></span> =&gt; t.sender == addressFromString(<span class="hljs-string"><span class="hljs-string">"3PJaDyprvekvPXPuAtxrapacuDJopgJRaU3"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br>  <b>Lista blanca de destinatarios</b> <br><br>  Para permitir que los tokens se env√≠en solo a ciertas cuentas, para crear una "lista blanca" de destinatarios, puede usar un activo inteligente con el siguiente esquema, que verifica si est√° en la lista: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t : <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; let trustedRecipient1 = addressFromString(<span class="hljs-string"><span class="hljs-string">"3P6ms9EotRX8JwSrebeTXYVnzpsGCrKWLv4"</span></span>) let trustedRecipient2 = addressFromString(<span class="hljs-string"><span class="hljs-string">"3PLZcCJyYQnfWfzhKXRA4rteCQC9J1ewf5K"</span></span>) let trustedRecipient3 = addressFromString(<span class="hljs-string"><span class="hljs-string">"3PHrS6VNPRtUD8MHkfkmELavL8JnGtSq5sx"</span></span>) t.recipient == trustedRecipient1 || t.recipient == trustedRecipient2 || t.recipient == trustedRecipient3 <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>  Por seguridad y consistencia comprobable del lenguaje, la lista no contiene una implementaci√≥n de iterador.  Por lo tanto, se define como un conjunto de elementos espec√≠ficos. <br><br>  <b>Destinatarios de la lista negra</b> <br><br>  Del mismo modo, para prohibir el env√≠o de tokens a ciertas cuentas, puede crear una "lista negra".  En este caso, se usa exactamente el mismo activo inteligente, pero con la direcci√≥n marcada por ausencia en la lista negra: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t : <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; let bannedRecipient1 = addressFromString(<span class="hljs-string"><span class="hljs-string">"3P6ms9EotRX8JwSrebeTXYVnzpsGCrKWLv4"</span></span>) let bannedRecipient2 = addressFromString(<span class="hljs-string"><span class="hljs-string">"3PLZcCJyYQnfWfzhKXRA4rteCQC9J1ewf5K"</span></span>) let bannedRecipient3 = addressFromString(<span class="hljs-string"><span class="hljs-string">"3PHrS6VNPRtUD8MHkfkmELavL8JnGtSq5sx"</span></span>) t.recipient != bannedRecipient1 &amp;&amp; t.recipient != bannedRecipient2 &amp;&amp; t.recipient != bannedRecipient3 <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>  <b>Env√≠o con permiso del emisor</b> <br><br>  Al usar un activo inteligente, tambi√©n puede configurar la opci√≥n de enviar un activo inteligente solo con el permiso del emisor <i>(etiqueta de compromiso / deuda</i> ).  El emisor expresa su consentimiento colocando la identificaci√≥n de la transacci√≥n al estilo de su cuenta: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t : <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; let issuer = extract(addressFromString(<span class="hljs-string"><span class="hljs-string">"3P6ms9EotRX8JwSrebeTXYVnzpsGCrKWLv4"</span></span>)) #,      <span class="hljs-type"><span class="hljs-type">ID</span></span>   isDefined(getInteger(issuer, toBase58String(t.id))) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>  <b>Cambiar solo por ciertas monedas</b> <br><br>  Un activo inteligente permite permiso para cambiarlo solo por ciertas monedas.  Por ejemplo, para permitir el intercambio solo de bitcoins, puede usar el siguiente c√≥digo: <br><br><pre> <code class="scala hljs">let <span class="hljs-type"><span class="hljs-type">BTCId</span></span> = base58<span class="hljs-symbol"><span class="hljs-symbol">'8LQW8f7P5d5PZM7GtZEBgaqRPGSzS3DfPuiXrURJ4AJ</span></span>S' <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t : <span class="hljs-type"><span class="hljs-type">ExchangeTransaction</span></span> =&gt; t.sellOrder.assetPair.priceAsset == <span class="hljs-type"><span class="hljs-type">BTCId</span></span> || t.sellOrder.assetPair.amountAsset == <span class="hljs-type"><span class="hljs-type">BTCId</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br>  <b>Comercio a precio de or√°culo</b> <br><br>  En el script de activos inteligentes, puede establecer el permiso para comerciar solo al precio fijado en la historia del or√°culo confiable.  Aqu√≠ hay un ejemplo de tal script: <br><br><pre> <code class="scala hljs">let oracle = <span class="hljs-type"><span class="hljs-type">Address</span></span>(base58<span class="hljs-symbol"><span class="hljs-symbol">'3PLNmokt22NrSiNvCLvwMUP84LCMJqbXwA</span></span>D') let assetId = toBase58String(base58<span class="hljs-symbol"><span class="hljs-symbol">'oWgJN6YGZFtZrV8BWQ1PGktZikgg7jzGmtm16Ktyvj</span></span>d') <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { #   <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t: <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> | <span class="hljs-type"><span class="hljs-type">MassTransferTransaction</span></span> =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> e: <span class="hljs-type"><span class="hljs-type">ExchangeTransaction</span></span> =&gt; #,     ,        let correctPrice = e.price == extract(getInteger(oracle, assetId)) #,       <span class="hljs-type"><span class="hljs-type">WAVES</span></span> let correctPriceAsset = !isDefined(e.sellOrder.assetPair.priceAsset) correctPrice &amp;&amp; correctPriceAsset <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br>  Aqu√≠ nos enfrentamos a un momento no obvio al verificar la identificaci√≥n del activo con el que se realiza la operaci√≥n.  El hecho es que si la identificaci√≥n del activo no est√° definida, entonces estamos hablando de WAVES.  En el script, nos aseguramos de que el comercio est√© emparejado con WAVES, de esta manera. <br><br>  <b>Aumento de precio fijo</b> <br><br>  Puede establecer un precio fijo para un activo inteligente, que aumentar√° gradualmente en una proporci√≥n determinada.  Aqu√≠ hay un script de activos de ejemplo, cuyo precio aumentar√° en un 5% cada 1000 bloques: <br><br><pre> <code class="scala hljs">let startPrice = <span class="hljs-number"><span class="hljs-number">10</span></span> let startHeight = <span class="hljs-number"><span class="hljs-number">1000</span></span> let interval = <span class="hljs-number"><span class="hljs-number">1000</span></span> #        let raise = <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t: <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> | <span class="hljs-type"><span class="hljs-type">MassTransferTransaction</span></span> =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> e: <span class="hljs-type"><span class="hljs-type">ExchangeTransaction</span></span> =&gt; e.price == startPrice + ((height - startHeight) / interval) * (<span class="hljs-number"><span class="hljs-number">100</span></span> + raise) / <span class="hljs-number"><span class="hljs-number">100</span></span> &amp;&amp; !isDefined(e.sellOrder.assetPair.priceAsset) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br>  <b>Intervalo de comercio</b> <br><br>  Adem√°s, gracias al script, el comercio de activos inteligentes puede limitarse a intervalos predeterminados.  Aqu√≠ hay un ejemplo de tal script: <br><br><pre> <code class="scala hljs">let startHeight = <span class="hljs-number"><span class="hljs-number">10000</span></span> let interval = <span class="hljs-number"><span class="hljs-number">44000</span></span> let limit = <span class="hljs-number"><span class="hljs-number">1500</span></span> <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t: <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> | <span class="hljs-type"><span class="hljs-type">MassTransferTransaction</span></span> | <span class="hljs-type"><span class="hljs-type">ExchangeTransaction</span></span> =&gt; (height - startHeight) % interval &lt; limit <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br>  En el script, nos aseguramos de que no <i>hayan</i> pasado m√°s de los intervalos <i>l√≠mite</i> desde el inicio de la negociaci√≥n <i>startHeight</i> .  La longitud del intervalo es igual al n√∫mero de bloques especificados en el campo de <i>intervalo</i> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/444686/">https://habr.com/ru/post/444686/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../444674/index.html">Sony Xperia 10 y Xperia 10 Plus: tel√©fonos inteligentes de visi√≥n amplia</a></li>
<li><a href="../444676/index.html">CRM rating, tops, reviews: ¬ømienten todos?</a></li>
<li><a href="../444678/index.html">D√≠a de actividad: 12 de abril, vuelo normal.</a></li>
<li><a href="../444682/index.html">Las acciones de Sony y Nintendo se desploman despu√©s de lanzar la transmisi√≥n de video para jugadores de Google</a></li>
<li><a href="../444684/index.html">Trabajamos con redes neuronales: una lista de verificaci√≥n para la depuraci√≥n</a></li>
<li><a href="../444688/index.html">Deje de hablar sobre la plantilla de repositorio con Eloquent</a></li>
<li><a href="../444690/index.html">C√≥mo los investigadores de Uber aplican y escalan el conocimiento del comportamiento humano</a></li>
<li><a href="../444692/index.html">MOSDROID # 16 Azufre en Redmadrobot</a></li>
<li><a href="../444694/index.html">Como pronosticamos el flujo de salida, nos acercamos a √©l como un desastre natural</a></li>
<li><a href="../444696/index.html">Aumente la densidad del contenedor en un nodo utilizando la tecnolog√≠a PFCACHE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>