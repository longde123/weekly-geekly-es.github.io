<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíù üéæ üë©üèæ‚Äçüåæ Retroiluminaci√≥n del teclado DasKeyboard basada en glucosa en sangre usando REST API üíΩ ‚õ∏Ô∏è ‚ôäÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Del blog de Scott Hanselman, profesor, programador y profesor. 

 Llevo mucho tiempo escribiendo art√≠culos sobre temas relacionados con la diabetes y ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Retroiluminaci√≥n del teclado DasKeyboard basada en glucosa en sangre usando REST API</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443154/"> <i>Del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">blog de</a> Scott Hanselman, profesor, programador y profesor.</i> <br><br>  Llevo mucho tiempo escribiendo art√≠culos sobre temas relacionados con la diabetes y la tecnolog√≠a en mi blog.  En 2012, el estado de las tecnolog√≠as relacionadas con la diabetes era <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">deplorable</a> , pero ahora est√°n experimentando un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aumento prometedor</a> . <br><br>  Si tiene diabetes tipo I y usa un medidor continuo de glucosa (MCG), deber√° configurar el servicio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Nightscout</a> y tendr√° una API REST para acceder a sus datos de glucosa en sangre.  CGM verifica el nivel de glucosa en mi sangre cada 5 minutos, a trav√©s del canal Bluetooth de baja potencia, los datos van a mi tel√©fono y de all√≠ a la nube.  Pero necesita almacenar datos de glucosa en la nube bajo su control.  Los fabricantes de CGM ofrecen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sus propias</a> nubes, pero podemos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">exportar</a> f√°cilmente desde all√≠ a la base de datos MongoDB. <br><a name="habracut"></a><br>  Mi Nightscout se ejecuta en Azure y mi cuerpo tiene su propia API REST.  Puedo hacer la siguiente solicitud HTTP GET: <br><br>  /api/v1/entries.json?count=3 <br><br>  y obt√©n este tipo de respuesta: <br><br><pre><code class="json hljs">[ { _id: <span class="hljs-string"><span class="hljs-string">"5c6066d477b2a69a0a7810e5"</span></span>, sgv: <span class="hljs-number"><span class="hljs-number">143</span></span>, date: <span class="hljs-number"><span class="hljs-number">1549821626000</span></span>, dateString: <span class="hljs-string"><span class="hljs-string">"2019-02-10T18:00:26.000Z"</span></span>, trend: <span class="hljs-number"><span class="hljs-number">4</span></span>, direction: <span class="hljs-string"><span class="hljs-string">"Flat"</span></span>, device: <span class="hljs-string"><span class="hljs-string">"share2"</span></span>, type: <span class="hljs-string"><span class="hljs-string">"sgv"</span></span> }, { _id: <span class="hljs-string"><span class="hljs-string">"5c6065a877b2a69a0a7801ce"</span></span>, sgv: <span class="hljs-number"><span class="hljs-number">134</span></span>, date: <span class="hljs-number"><span class="hljs-number">1549821326000</span></span>, dateString: <span class="hljs-string"><span class="hljs-string">"2019-02-10T17:55:26.000Z"</span></span>, trend: <span class="hljs-number"><span class="hljs-number">4</span></span>, direction: <span class="hljs-string"><span class="hljs-string">"Flat"</span></span>, device: <span class="hljs-string"><span class="hljs-string">"share2"</span></span>, type: <span class="hljs-string"><span class="hljs-string">"sgv"</span></span> }, { _id: <span class="hljs-string"><span class="hljs-string">"5c60647b77b2a69a0a77f381"</span></span>, sgv: <span class="hljs-number"><span class="hljs-number">130</span></span>, date: <span class="hljs-number"><span class="hljs-number">1549821026000</span></span>, dateString: <span class="hljs-string"><span class="hljs-string">"2019-02-10T17:50:26.000Z"</span></span>, trend: <span class="hljs-number"><span class="hljs-number">4</span></span>, direction: <span class="hljs-string"><span class="hljs-string">"Flat"</span></span>, device: <span class="hljs-string"><span class="hljs-string">"share2"</span></span>, type: <span class="hljs-string"><span class="hljs-string">"sgv"</span></span> } ]</code> </pre> <br>  Si cambio la URL .json a .txt, obtengo lo siguiente: <br><br><pre> <code class="plaintext hljs">2019-02-10T18:00:26.000Z 1549821626000 143 Flat 2019-02-10T17:55:26.000Z 1549821326000 134 Flat 2019-02-10T17:50:26.000Z 1549821026000 130 Flat</code> </pre> <br>  El valor plano al final es un valor de enumeraci√≥n que me da una idea general del comportamiento de la glucosa.  Los diab√©ticos tienen que controlar la glucosa cada hora, y a veces cada minuto.  Por lo tanto, es muy importante para nosotros tener pantallas que podamos ver r√°pidamente.  Es decir, cualquier cosa que pueda dar una idea de mi estado actual. <br><br>  Por ejemplo: <br><br><ul><li>  Alexa, ¬øcu√°l es mi nivel de glucosa? </li><li>  C√≥mo agregar datos y tendencias de glucosa a una solicitud Git / PATH en una l√≠nea de entrada. </li><li>  Arduino con LCD. </li><li>  El calendario familiar montado en la pared del calendario dakBoard que muestra los niveles de glucosa. </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/6ba/019/e01/6ba019e011a80519ff93e38dcc97b292.png"><br><br>  Recientemente compr√© un Das Keyboard 5Q <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">para</a> m√≠, ¬°y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">por primera vez</a> escrib√≠ sobre Das Keyboard ya en 2006!  Ella tiene su propia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">API REST</a> .  Y estoy trabajando en usar la API de Applet desde el teclado para resaltar sus teclas superiores de acuerdo con los cambios en el nivel de glucosa en mi sangre.  Usar√© sus bibliotecas para Node y JavaScript, y todo funcionar√° en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">contexto de su software</a> . <br><br>  Sin embargo, dado que el teclado tiene una API REST ejecut√°ndose en localhost, y mi nivel de glucosa tambi√©n lo tiene, hice el siguiente script en mi rodilla.  Lo agregu√© a cron, y ahora mi teclado cambia la luz de fondo de naranja (bajo) a verde, amarillo o rojo (alto) en paralelo con los cambios en el nivel de glucosa en mi sangre.  Result√≥ un buen indicador de fondo.  Alguien tuite√≥ que, dicen, nadie est√° mirando el teclado.  En mi opini√≥n, esto es est√∫pido.  Probablemente notar√© si mi teclado se pone rojo.  Esto sigue siendo una advertencia de fondo, pero si es necesario, puedo agregar f√°cilmente una llamada a un mensaje m√°s expl√≠cito al script. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh #      #  JSON-   API. #        Nightscout set -e # quit on first error. PORT=27301 #   5Q PID="DK5QPID" # product ID #  .  5Q  ,  166 #     . MAX_ZONE_ID=166 #      Nightscout   TEXT red=#f00 green=#0f0 yellow=#ff0 #   ‚Äì    COLOR=#f50 bgvalue=$(curl -s https://MYSITE/api/v1/entries.txt?count=1 | grep -Eo '000\s([0-9]{1,3})+\s' | cut -f 2) if [ $bgvalue -gt 80 ] then COLOR=$green if [ $bgvalue -gt 140 ] then COLOR=$yellow if [ $bgvalue -gt 200 ] then COLOR=$red fi fi fi echo "  $bgvalue,   $COLOR!" for i in `seq $MAX_ZONE_ID` do #echo "   zoneId: $i" # :    "name"  "message" ,   #     curl -s -S --output /dev/null -X POST --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{ "name": "Nightscout", "id": "'$i'", "message": "Blood sugar is '$bgvalue'", "pid": "'$PID'", "zoneId": "'"$i"'", "color": "'$COLOR'", "effect": "SET_COLOR" }' "http://localhost:$PORT/api/1.0/signals" done echo "\n.\n\"</span></span></code> </pre> <br>  La API del teclado local debe enviar una se√±al para solo una zona o tecla, por lo que apliqu√© un peque√±o truco, enviando m√°s de cien solicitudes REST para colorear todo el teclado.  Sin embargo, todas estas llamadas ocurren localmente y no cargan mucho el sistema.  Despu√©s de la transici√≥n a la nueva API, todo se volver√° m√°s preciso. <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: absolute; visibility: hidden; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1093994908140982272"></twitter-widget><blockquote class="twitter-tweet" data-lang="en_US" data-twitter-extracted-i1583333785508725116="true"><p lang="en" dir="ltr">  ¬°Las teclas de mi teclado cambian de color * cuando mi nivel de az√∫car en sangre aumenta! * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">@Daskeyboard</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">@NightscoutProj</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">#WeAreNotWaiting</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">#diabetes</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pic.twitter.com/DSBDcrO7RE</a> </p>  - Scott Hanselman (@shanselman) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">8 de febrero de 2019</a> </blockquote><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  Adem√°s, al presionar la tecla de volumen, junto con cualquier tecla resaltada, aparece una ventana emergente con el valor exacto del nivel de glucosa (este es un mensaje en la segunda llamada al rizo).  Esto es nuevamente un truco, pero voy a hacer una aplicaci√≥n formal, que se puede instalar desde la tienda de aplicaciones.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El c√≥digo se puede tomar aqu√≠</a> . <br><br>  ¬øQu√© otras buenas ideas tiene sobre la notificaci√≥n de antecedentes de az√∫car?  Tira de LED alrededor del monitor?  Bombilla inteligente Phillips Hue? <br><br>  Por cierto, la idea con una pantalla que puedes mirar se puede usar para rastrear otros indicadores (frecuencia card√≠aca, ansiedad, presi√≥n arterial) todo lo que se puede medir en tu cuerpo en tiempo real (o casi real). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/443154/">https://habr.com/ru/post/443154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443140/index.html">Sistema de simulaci√≥n de script ZenCad 3D</a></li>
<li><a href="../443144/index.html">42 escuelas en los EE. UU. Es un sue√±o americano al alcance de todos</a></li>
<li><a href="../443146/index.html">Estacionamiento inteligente: estaciones adaptativas de navegaci√≥n, iluminaci√≥n y carga para veh√≠culos el√©ctricos</a></li>
<li><a href="../443150/index.html">Angular vs React: biblioteca completa con un marco</a></li>
<li><a href="../443152/index.html">C√≥mo bloquear Microsoft Edge en segundo plano en Windows 10</a></li>
<li><a href="../443158/index.html">Nostalgia por Half Life: crear un decodificador para que una estaci√≥n de radio reciba la voz y el sonido final al estilo de las cosechadoras</a></li>
<li><a href="../443160/index.html">El resumen de materiales interesantes para el desarrollador m√≥vil # 289 (4 de marzo - 10 de marzo)</a></li>
<li><a href="../443164/index.html">Truco de red neuronal para principiantes</a></li>
<li><a href="../443166/index.html">Cree y actualice listas de correo en Zimbra Collaboration OSE basado en grupos y usuarios de Active Directory</a></li>
<li><a href="../443174/index.html">hellOGL: OpenGL hola mundo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>