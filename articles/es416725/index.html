<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöπ üî§ üêΩ Kotlin DSL: teor√≠a y pr√°ctica üåë üë®üèΩ‚Äçüéì üßô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Desarrollar pruebas de aplicaciones no es una experiencia agradable. Este proceso lleva mucho tiempo, requiere mucha concentraci√≥n y es extremadamente...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kotlin DSL: teor√≠a y pr√°ctica</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/416725/">  Desarrollar pruebas de aplicaciones no es una experiencia agradable.  Este proceso lleva mucho tiempo, requiere mucha concentraci√≥n y es extremadamente demandado.  El lenguaje Kotlin proporciona un conjunto de herramientas que hacen que sea bastante f√°cil construir su propio lenguaje orientado a problemas (DSL).  Existe experiencia cuando Kotlin DSL reemplaz√≥ a los constructores y los m√©todos est√°ticos para probar el m√≥dulo de planificaci√≥n de recursos, lo que hizo que agregar nuevas pruebas y respaldar las antiguas de una rutina fuera un proceso divertido. <br><br>  En el curso del art√≠culo, analizaremos todas las herramientas principales del arsenal del desarrollador y c√≥mo se pueden combinar para resolver problemas de prueba.  Iremos desde el dise√±o de la Prueba Ideal hasta el lanzamiento de la prueba m√°s aproximada, limpia y comprensible para el sistema de planificaci√≥n de recursos basado en Kotlin. <br><br>  El art√≠culo ser√° √∫til para los ingenieros en ejercicio, aquellos que consideran el Kotlin como un lenguaje para escribir c√≥modamente pruebas compactas y aquellos que desean mejorar el proceso de prueba en su proyecto. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/q_UM1EY2S5g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Este art√≠culo se basa en una presentaci√≥n de Ivan Osipov ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">i_osipov</a> ) en la conferencia JPoint.  Narraci√≥n adicional se lleva a cabo en su nombre.  Ivan trabaja como programador en Haulmont.  El producto principal de la compa√±√≠a es CUBA, una plataforma para el desarrollo de empresas y diversas aplicaciones web.  En particular, se est√°n realizando proyectos de outsourcing en esta plataforma, entre los que recientemente hubo un proyecto en el campo de la educaci√≥n, en el que Ivan se comprometi√≥ a construir un cronograma para una instituci√≥n educativa.  Dio la casualidad de que durante los √∫ltimos tres a√±os Ivan ha estado trabajando con los planificadores de una forma u otra, y espec√≠ficamente en Haulmont han estado probando este planificador durante un a√±o. <br><a name="habracut"></a><br>  Para aquellos que desean ejecutar ejemplos, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mantenga un enlace a GitHub</a> .  Debajo del enlace, encontrar√° todo el c√≥digo que analizaremos, ejecutaremos y escribiremos hoy.  ¬°Abre el c√≥digo y listo! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ec3/fa3/670/ec3fa3670fd1c8a3cf7222f7e746933c.jpg"><br><br>  Hoy discutiremos: <br><br><ul><li>  ¬øQu√© son los lenguajes orientados a problemas? <br></li><li>  lenguajes orientados a problemas incorporados; <br></li><li>  construir un horario para una instituci√≥n educativa; <br></li><li>  c√≥mo se prueba todo con Kotlin. <br></li></ul><br>  Hoy hablar√© en detalle sobre las herramientas que tenemos en el lenguaje, le mostrar√© algunas demostraciones y redactaremos toda la prueba desde el principio hasta el final.  Al mismo tiempo, me gustar√≠a ser m√°s objetivo, por lo que hablar√© sobre algunas de las desventajas que identifiqu√© durante el desarrollo. <br><br>  Comencemos hablando sobre el m√≥dulo de construcci√≥n de horarios.  Entonces, la construcci√≥n del cronograma se lleva a cabo en varias etapas.  Cada uno de estos pasos debe probarse por separado.  Debe comprender que, a pesar de que los pasos son diferentes, tenemos un modelo de datos com√∫n. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/031/be4/27d/031be427d58c5073a3bc619cbed65792.jpg"><br><br>  Este proceso se puede representar de la siguiente manera: en la entrada hay algunos datos con un modelo com√∫n, en la salida hay un cronograma.  Los datos se validan, filtran y luego se crean grupos de capacitaci√≥n.  Esto se refiere al √°rea tem√°tica del horario de la instituci√≥n educativa.  En base a los grupos construidos y en base a otros datos, colocamos la lecci√≥n.  Hoy hablaremos solo sobre la √∫ltima etapa, sobre la ubicaci√≥n de las clases. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f64/032/4b1/f640324b1a2ff556a4da892822847a9c.jpg"><br><br>  Un poco sobre probar el planificador. <br><br>  En primer lugar, como ya entendi√≥, las diferentes etapas deben probarse por separado.  Uno puede seleccionar un proceso m√°s o menos est√°ndar de inicio de pruebas: hay inicializaci√≥n de datos, hay un inicio del planificador, hay una verificaci√≥n de los resultados de este planificador en s√≠.  Hay una gran cantidad de casos comerciales diferentes que deben cubrirse y diferentes situaciones que deben tenerse en cuenta para que, al elaborar un cronograma, estas situaciones tambi√©n persistan. <br><br>  Un modelo a veces puede ser pesado, y para crear una sola entidad, es necesario inicializar cinco entidades adicionales, o incluso m√°s.  Por lo tanto, en total, se obtiene una gran cantidad de c√≥digo, que escribimos una y otra vez para cada prueba.  El soporte para tales pruebas lleva una cantidad considerable de tiempo.  Si desea actualizar el modelo, y esto a veces sucede, la escala de los cambios afecta las pruebas. <br><br>  Escribamos una prueba: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fda/0f5/94d/fda0f594d14b8043054bcae7fe3315ad.jpg"><br><br>  Escribamos la prueba m√°s simple para que generalmente entiendas la imagen. <br>  ¬øQu√© le viene a la mente cuando piensa en las pruebas?  Quiz√°s estas son algunas pruebas primitivas de este tipo: crea una clase, crea un m√©todo en ella, la marca con la <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">prueba de</a></i> anotaci√≥n.  Como resultado, usamos las capacidades de JUnit e inicializamos algunos datos, valores predeterminados, luego valores espec√≠ficos de prueba, hacemos lo mismo para el resto del modelo y finalmente creamos un objeto de planificador, le transferimos nuestros datos, comenzamos, recibimos resultados y los verificamos.  Proceso m√°s o menos est√°ndar.  Pero obviamente hay duplicaci√≥n de c√≥digo en √©l.  Lo primero que viene a la mente es la capacidad de poner todo en m√©todos est√°ticos.  Dado que hay un mont√≥n de valores predeterminados, ¬øpor qu√© no ocultarlo? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/521/543/590/521543590a00c6101abd4fcefd345e04.jpg"><br><br>  Este es un buen primer paso para reducir la duplicaci√≥n. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c7f/c57/11c/c7fc5711ccf2a4e9dfb626ea64cffb9b.jpg"><br><br>  Mirando esto, entiendes que me gustar√≠a mantener el modelo m√°s compacto.  Aqu√≠ tenemos un patr√≥n generador en el que, en alg√∫n lugar debajo del cap√≥, se inicializa el valor predeterminado y los valores espec√≠ficos de la prueba se inicializan all√≠ mismo.  Est√° mejorando, sin embargo, todav√≠a estamos escribiendo el c√≥digo repetitivo, y lo estamos escribiendo nuevamente cada vez.  Imagine 200 pruebas: debe escribir estas tres l√≠neas 200 veces.  Obviamente, me gustar√≠a deshacerme de esto de alguna manera.  Desarrollando la idea, llegamos a un cierto l√≠mite.  Entonces, por ejemplo, podemos crear un generador de patrones en general para todo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/259/e9b/7a3/259e9b7a39e84a41466572b38afc280d.jpg"><br><br>  Puede crear un planificador desde cero hasta el final, establecer todos los valores que necesitamos, comenzar a programar y todo es genial.  Si observa en detalle este ejemplo y lo analiza en detalle, resulta que se est√° escribiendo una gran cantidad de c√≥digo innecesario.  Me gustar√≠a hacer que las pruebas sean m√°s legibles para que pueda echar un vistazo y comprender de inmediato, sin profundizar en los patrones, etc. <br><br>  Entonces, tenemos un c√≥digo innecesario.  Las matem√°ticas simples sugieren que hay un 55% m√°s de letras de las que necesitamos, y de alguna manera me gustar√≠a alejarme de ellas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d55/610/ef7/d55610ef71d368b8d16c1fdef35cd2c5.jpg"><br><br>  Despu√©s de un tiempo, el soporte para nuestras pruebas resulta ser m√°s costoso, ya que debe admitir m√°s c√≥digo.  A veces, si no hacemos ning√∫n esfuerzo, la legibilidad deja mucho que desear o resulta aceptable, pero nos gustar√≠a a√∫n m√°s.  Quiz√°s m√°s adelante comencemos a agregar alg√∫n tipo de marcos, bibliotecas, para que las pruebas sean m√°s f√°ciles de escribir.  Debido a esto, aumentamos el nivel de entrada para probar nuestra aplicaci√≥n.  Aqu√≠ tenemos una aplicaci√≥n ya complicada, el nivel de entrada en sus pruebas es significativo y lo estamos aumentando a√∫n m√°s. <br><br><h2>  Prueba perfecta </h2><br>  Es genial decir cu√°n malo es todo, pero pensemos en c√≥mo ser√≠a muy bueno.  Un ejemplo ideal que nos gustar√≠a obtener como resultado: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e2b/7c5/f48/e2b7c5f48dbd065e95b1617ad10622ba.jpg"><br><br>  Imagine que hay una declaraci√≥n en la que decimos que esta es una prueba con un nombre espec√≠fico, y queremos usar un espacio para separar las palabras en el nombre, no CamelCase.  Estamos creando un cronograma, tenemos algunos datos y se verifican los resultados del planificador.  Dado que trabajamos principalmente con Java, y todo el c√≥digo de la aplicaci√≥n principal est√° escrito en este lenguaje, me gustar√≠a tener capacidades de prueba compatibles.  Me gustar√≠a inicializar los datos lo m√°s obvio posible para el lector.  Quiero inicializar algunos datos comunes y parte del modelo que necesitamos.  Por ejemplo, cree estudiantes, maestros y describa cu√°ndo est√°n disponibles.  Este es nuestro ejemplo perfecto. <br><br><h2>  Lenguaje espec√≠fico de dominio </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/f81/c79/0a9/f81c790a921e43d645fc7380607cf8ea.jpg"><br><br>  Mir√°ndolo todo, parece que parece un lenguaje orientado a problemas.  Necesitas entender qu√© es y cu√°l es la diferencia.  Los idiomas se pueden dividir en dos tipos: lenguajes de prop√≥sito general (lo que escribimos constantemente, resolver absolutamente cualquier tarea y hacer frente a absolutamente todo) y lenguajes orientados a problemas.  Entonces, por ejemplo, SQL nos ayuda a extraer datos de la base de datos perfectamente, y algunos otros lenguajes tambi√©n ayudan a resolver otros problemas espec√≠ficos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2f8/e45/2f6/2f8e452f62f39f0f56a2c73e355dddcb.jpg"><br><br>  Una forma de implementar lenguajes orientados a problemas es lenguajes integrados, o internos.  Dichos idiomas se implementan sobre la base de un lenguaje de prop√≥sito general.  Es decir, varias construcciones de nuestro lenguaje de prop√≥sito general forman algo as√≠ como una base: eso es lo que usamos cuando trabajamos con un lenguaje orientado a problemas.  En este caso, por supuesto, surge una oportunidad en un lenguaje orientado a problemas para usar todas las caracter√≠sticas y caracter√≠sticas que provienen de un lenguaje de prop√≥sito general. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/07f/4cb/57f/07f4cb57f84ba884bd558ee8e97202a2.jpg"><br><br>  Nuevamente, eche un vistazo a nuestro ejemplo perfecto y piense en qu√© idioma elegir.  Tenemos tres opciones. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d1d/b21/4b3/d1db214b39b5620875350b382622e662.jpg"><br><br>  La primera opci√≥n es Groovy.  Un lenguaje maravilloso y din√°mico que se ha demostrado en la construcci√≥n de lenguajes orientados a problemas.  Nuevamente, puede dar un ejemplo de un archivo de compilaci√≥n en Gradle, que muchos de nosotros usamos.  Tambi√©n est√° Scala, que tiene una gran cantidad de oportunidades para la implementaci√≥n de algo propio.  Y finalmente, est√° Kotlin, que tambi√©n nos ayuda a construir un lenguaje orientado a los problemas, y hoy se discutir√°.  No quisiera engendrar guerras y comparar Kotlin con otra cosa, m√°s bien, queda en tu conciencia.  Hoy les mostrar√© lo que Kotlin tiene para desarrollar lenguajes orientados a problemas.  Cuando desee comparar esto y decir que un idioma es mejor, puede volver a este art√≠culo y ver f√°cilmente la diferencia. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/050/2e7/29e/0502e729ebf030ea5e4d9f038a4b7cc6.jpg"><br><br>  ¬øQu√© nos da Kotlin para desarrollar un lenguaje orientado a problemas? <br><br>  En primer lugar, es un tipeo est√°tico, y todo lo que se deriva de esto.  En la etapa de compilaci√≥n, se detectan una gran cantidad de problemas, y esto ahorra mucho, especialmente en el caso de que no desee tener problemas relacionados con la sintaxis y la escritura en las pruebas. <br>  Entonces, hay un gran sistema de inferencia de tipos que proviene de Kotlin.  Esto es maravilloso, porque no hay necesidad de escribir ning√∫n tipo una y otra vez, el compilador muestra todo con una explosi√≥n. <br><br>  En tercer lugar, existe un excelente soporte para el entorno de desarrollo, y esto no es sorprendente, porque la misma compa√±√≠a crea el entorno de desarrollo principal para hoy, y lo hace Kotlin. <br>  Finalmente, dentro de DSL, obviamente podemos usar Kotlin.  En mi opini√≥n subjetiva, admitir DSL es mucho m√°s f√°cil que admitir clases de utilidad.  Como ver√° m√°s adelante, la legibilidad es ligeramente mejor que la de los constructores.  Lo que quiero decir con "mejor": obtienes un poco menos de sintaxis que necesitas escribir; alguien que lea tu lenguaje orientado a problemas lo tomar√° m√°s r√°pido.  Finalmente, ¬°escribir tu bicicleta es mucho m√°s divertido!  Pero, de hecho, implementar un lenguaje orientado a problemas es mucho m√°s f√°cil que aprender un nuevo marco. <br><br>  Recordar√© una vez m√°s el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enlace a GitHub</a> , si desea escribir m√°s demos, puede ingresar y recoger el c√≥digo del enlace. <br><br><h2>  Dise√±ando el ideal en Kotlin </h2><br>  Pasemos a dise√±ar nuestro ideal, pero ya en Kotlin.  Echa un vistazo a nuestro ejemplo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5e3/695/850/5e3695850435a204b9cbb3b94f6f7635.png"><br><br>  Y en etapas comenzaremos a reconstruirlo. <br><br>  Tenemos una prueba que se convierte en una funci√≥n en Kotlin, que se puede nombrar usando espacios. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/03d/699/a71/03d699a71ecf86e0e5c03b7a6de57995.png"><br><br>  Lo marcaremos con la anotaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">prueba</a> , que est√° disponible para nosotros desde JUnit.  En Kotlin, puede usar la forma abreviada para escribir funciones y, a trav√©s de <i>=,</i> deshacerse de llaves extra para la funci√≥n en s√≠. <br><br>  Horario nos convertimos en un bloque.  Lo mismo sucede con muchos dise√±os, ya que todav√≠a trabajamos en Kotlin. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a7b/db9/656/a7bdb965641ca434f1eba5e7781b9b53.png"><br><br>  Pasemos al resto.  Las llaves aparecen nuevamente, no las eliminaremos, pero al menos tratemos de acercarnos a nuestro ejemplo.  Al construir construcciones con espacios, podr√≠amos de alguna manera refinarnos y hacerlos de alguna manera diferentes, pero me parece que es mejor hacer los m√©todos habituales que encapsular√°n el procesamiento, pero en general esto ser√° obvio para el usuario . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/378/6e6/eaf/3786e6eafdb8ebd14c344af30698df56.png"><br><br>  Nuestro alumno se convierte en un bloque en el que trabajamos con propiedades, con m√©todos, y continuaremos analizando esto con usted. <br><br><img width="600" src="https://habrastorage.org/getpro/habr/post_images/76b/a76/554/76ba76554585689a4c2562167fd26833.png"><br><br>  Finalmente, los profesores.  Aqu√≠ tenemos algunos bloques anidados. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/deb/a5d/f0a/deba5df0a67a08566e07370bf2f70bc0.png"><br><br>  En el siguiente c√≥digo, pasamos a los cheques.  Necesitamos verificaciones de compatibilidad con lenguajes Java, y s√≠, Kotlin es compatible con Java. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8aa/09d/a05/8aa09da05c7c48282e01b0ea409e0f3c.png"><br><br><h2>  Arsenal de desarrollo de DSL en Kotlin </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/5f6/113/6ef/5f61136ef41733e6fb88c5ff17d6975f.jpg"><br><br>  Pasemos a la lista de herramientas que tenemos.  Aqu√≠ traje una tableta, tal vez enumera todo lo que se necesita para desarrollar lenguajes orientados a problemas en Kotlin.  Puede volver a ella de vez en cuando y refrescar su memoria. <br><br>  La tabla muestra alguna comparaci√≥n de la sintaxis orientada a problemas y la sintaxis habitual que est√° disponible en el lenguaje. <br><br><h2>  Lambdas en Kotlin </h2><br> <code>val lambda: () -&gt; Unit = { }</code> <br> <br>  Comencemos con el ladrillo m√°s b√°sico que tenemos en Kotlin: estas son lambdas. <br>  Hoy, por tipo lambda, me referir√© solo a un tipo funcional.  Las lambdas se denotan de la siguiente manera: <code>( ) -&gt;  </code> . <br><br>  Inicializamos el lambda con la ayuda de llaves, dentro de ellas podemos escribir un c√≥digo que se llamar√°.  Es decir, una lambda, de hecho, solo oculta este c√≥digo en s√≠ mismo.  Ejecutar tal lambda parece una llamada a funci√≥n, solo par√©ntesis. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a48/f4d/d49/a48f4dd497c8aa6b93ab2043e014ca02.jpg"><br><br>  Si queremos pasar alg√∫n tipo de par√°metro, en primer lugar, debemos describirlo en el tipo. <br>  En segundo lugar, tenemos acceso al identificador predeterminado, que podemos usar, sin embargo, si esto no nos conviene de alguna manera, podemos establecer nuestro propio nombre de par√°metro y usarlos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/194/fab/626/194fab62612fb71e6a5f148193ec1ff9.jpg"><br><br>  Al mismo tiempo, podemos omitir el uso de este par√°metro y usar el gui√≥n bajo para no producir identificadores.  En este caso, para ignorar el identificador, ser√≠a posible no escribir nada, pero en el caso general de varios par√°metros est√° el mencionado "_". <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ff/80e/de2/1ff80ede232393839186b9345065700c.jpg"><br><br>  Si queremos pasar m√°s de un par√°metro, necesitamos definir expl√≠citamente sus identificadores. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c8d/d2b/952/c8dd2b952caa82b67157f41dc79535b0.jpg"><br><br>  Finalmente, qu√© suceder√° si intentamos pasar la lambda a alguna funci√≥n y ejecutarla all√≠.  Se ve en la aproximaci√≥n inicial de la siguiente manera: tenemos una funci√≥n a la que pasamos lambda entre llaves, y si en Kotlin lambda se escribe como el √∫ltimo par√°metro, podemos sacarlo de estos corchetes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b80/d7c/0d8/b80d7c0d814f3c51a91f2c224707a2d5.jpg"><br><br>  Si no queda nada entre los corchetes, podemos eliminar los corchetes.  Aquellos familiarizados con Groovy deber√≠an estar familiarizados con esto. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/74b/5dd/a95/74b5dda953b1df973a8d893f7a615195.jpg"><br><br>  ¬øD√≥nde se aplica esto?  Absolutamente en todas partes.  Es decir, las llaves muy rizadas de las que ya hemos hablado, las usamos, estas son las mismas lambdas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/69e/4bd/781/69e4bd781897ef0515384f81367899cc.jpg"><br><br>  Ahora veamos una de las variedades de lambdas, las llamo lambdas con contexto.  Encontrar√° algunos otros nombres, por ejemplo, lambda con receptor, y difieren de los lambdas ordinarios al declarar un tipo de la siguiente manera: a la izquierda, agregamos alguna clase de contexto, puede ser cualquier clase. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8bd/375/5b1/8bd3755b1085f3049a7ea32c7cc41f79.jpg"><br><br>  ¬øPara qu√© es esto?  Esto es necesario para que dentro de la lambda tengamos acceso a esta palabra clave: esta es la palabra clave en s√≠ misma, nos dice nuestro contexto, es decir, a alg√∫n objeto que vinculamos a nuestra lambda.  Entonces, por ejemplo, podemos crear una lambda que generar√° alguna cadena, naturalmente, usaremos la clase de cadena para declarar un contexto y la llamada de tal lambda se ver√° as√≠: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d80/552/181/d80552181518f155fc596c1bb3ddf2aa.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/788/63d/b17/78863db1732d9b92bff62bf82060771a.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/770/a1b/038/770a1b0388cd2380c491cdf5ca8c344c.jpg"><br><br>  Si desea pasar un contexto como par√°metro, tambi√©n puede hacerlo.  Sin embargo, no podemos transmitir completamente el contexto, es decir, ¬°una lambda con un contexto requiere atenci√≥n!  - contexto, s√≠.  ¬øQu√© sucede si comenzamos a pasar una lambda con un contexto a alg√∫n m√©todo?  Aqu√≠ miramos nuevamente nuestro m√©todo exec: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/15b/f36/3d9/15bf363d94919f7c73d775c5d28c6c53.jpg"><br><br>  C√°mbiele el nombre al m√©todo del alumno; nada ha cambiado: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e12/4cc/e3b/e124cce3bd7bdb776c3e946edf8ec52c.jpg"><br><br>  Por lo tanto, nos movemos gradualmente a nuestra construcci√≥n, la construcci√≥n del estudiante, que debajo de las llaves oculta toda inicializaci√≥n. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eba/286/8b3/eba2868b306f476c35df51d8af500335.jpg"><br><br>  Vamos a resolverlo.  Tenemos alg√∫n tipo de funci√≥n de estudiante que toma una lambda con el contexto del estudiante. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d3f/954/e2a/d3f954e2a7016ecf31a081559674d01f.jpg"><br><br>  Obviamente, necesitamos contexto. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/362/4d8/3be/3624d83be81ee01223ad758e9e81c94d.jpg"><br><br>  Aqu√≠ creamos un objeto y ejecutamos este lambda en √©l. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cab/d4a/940/cabd4a940deacfcdcb680c4916b29eae.jpg"><br><br>  Como resultado, tambi√©n podemos inicializar algunos valores predeterminados antes de iniciar el lambda, por lo que encapsulamos todo lo que necesitamos para la funci√≥n. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0b4/572/421/0b457242103fc70de806c9de62234135.jpg"><br><br>  Debido a esto, dentro de la lambda, tenemos acceso a esta palabra clave, por eso, probablemente, hay lambdas con contexto. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b1b/819/fdb/b1b819fdb7488092550b2ac72265cd72.jpg"><br><br>  Naturalmente, podemos deshacernos de esta palabra clave y tenemos la oportunidad de escribir tales construcciones. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/50d/dbc/492/50ddbc4920ffb871918ce7c063a874a2.jpg"><br><br>  Nuevamente, si no solo tenemos m√©todos patentados, sino tambi√©n algunos, tambi√©n podemos llamarlos, parece bastante natural. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b72/155/316/b72155316d99a7e4816d1234644b761b.jpg"><br><br><h2>  Solicitud </h2><br>  Todas estas lambdas en el c√≥digo son lambdas de contexto.  Hay una gran cantidad de contextos, se cruzan de una forma u otra y nos permiten construir nuestro lenguaje orientado a los problemas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/83a/f30/2ff/83af302ff3c0a85db220c70f0d567743.jpg"><br><br>  Resumiendo las lambdas: tenemos lambdas ordinarias, las tenemos con el contexto, y esas y otras se pueden usar. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fcc/1ac/dfc/fcc1acdfc43284500c38884d88212877.jpg"><br><br><h2>  Operadores </h2><br>  Kotlin tiene un conjunto limitado de operadores que puede anular mediante convenciones y la palabra clave operador. <br><br>  Veamos al profesor y su accesibilidad.  Supongamos que decimos que el maestro trabaja los lunes a partir de las 8 am durante 1 hora.  Tambi√©n queremos decir que, adem√°s de esta hora, funciona desde las 13.00 por 1 hora.  Me gustar√≠a expresar esto usando el operador <b>+</b> .  ¬øC√≥mo se puede hacer esto? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/17b/360/9ab/17b3609ab2ebd28cf27f906934536e05.jpg"><br><br>  Hay alg√∫n m√©todo de disponibilidad que acepta una lambda con un contexto de tabla de <code>AvailabilityTable</code> .  Esto significa que hay alguna clase que se llama as√≠, y el m√©todo del lunes se declara en esta clase.  Este m√©todo devuelve <code>DayPointer</code> desde  necesita adjuntar nuestro operador a algo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/721/aea/73d/721aea73d36a41cf3dbecd328b1f5ab5.jpg"><br><br>  Veamos qu√© es DayPointer.  Este es un indicador de la tabla de disponibilidad de algunos maestros, y el d√≠a est√° en su horario.  Tambi√©n tenemos una funci√≥n de tiempo que de alguna manera convertir√° algunas filas en √≠ndices enteros: en Kotlin tenemos una clase <code>IntRange</code> para esto. <br><br>  A la izquierda est√° <code>DayPointer</code> , a la derecha est√° el tiempo, y nos gustar√≠a combinarlos con el operador <b>+</b> .  Para hacer esto, puede crear nuestro operador en la clase <code>DayPointer</code> .  Tomar√° un rango de valores de tipo Int y devolver√° <code>DayPointer</code> para que podamos encadenar nuestro DSL una y otra vez. <br>  Ahora, echemos un vistazo al dise√±o clave con el que todo comienza, con el que comienza nuestro DSL.  Su implementaci√≥n es ligeramente diferente, y ahora lo resolveremos. <br>  Kotlin tiene un concepto singleton integrado en el lenguaje.  Para hacer esto, en lugar de la palabra clave class, se usa la palabra clave <code>object</code> .  Si creamos un m√©todo dentro de un singleton, entonces podemos acceder a √©l de tal manera que no sea necesario crear una instancia de esta clase nuevamente.  Simplemente nos referimos a √©l como un m√©todo est√°tico en una clase. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d3d/226/065/d3d2260651fc4049ec8d3e6878a0cc51.jpg"><br><br>  Si observa el resultado de la descompilaci√≥n (es decir, en el entorno de desarrollo, haga clic en Herramientas -&gt; Kotlin -&gt; Mostrar c√≥digo de bytes de Kotlin -&gt; Descompilar), puede ver la siguiente implementaci√≥n de singleton: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3c6/8c9/577/3c68c957760612b06a5b008c734ddb33.jpg"><br><br>  Esta es solo una clase ordinaria, y aqu√≠ no sucede nada sobrenatural. <br>  Otra herramienta interesante es la declaraci√≥n de <code>invoke</code> .  Imagine que tenemos algo de clase A, tenemos su instancia, y nos gustar√≠a ejecutar esta instancia, es decir, poner par√©ntesis en un objeto de esta clase, y podemos hacerlo gracias al operador de <code>invoke</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/25f/3a1/f95/25f3a1f95c8c61dcb4937822bd9578e6.jpg"><br><br>  De hecho, los par√©ntesis nos permiten llamar al m√©todo invoke y tiene un modificador de operador.  Si pasamos una lambda con contexto a este operador, obtenemos tal construcci√≥n. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b6b/61d/675/b6b61d67518cb1dc730bce8e309ae0dc.jpg"><br><br>  Crear instancias cada vez es otra actividad, por lo que podemos combinar conocimientos previos y actuales. <br><br>  Hagamos un singleton, ll√°melo horario, dentro de √©l declararemos el operador de invocaci√≥n, dentro crearemos un contexto y aceptar√° una lambda con el contexto que creamos aqu√≠.  Resulta un √∫nico punto de entrada en nuestro DSL y, como resultado, obtenemos la misma construcci√≥n: horario con llaves. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/53a/41f/7d8/53a41f7d8e9067b6ce850045e745fb4f.jpg"><br><br>  Bueno, hablamos sobre el horario, echemos un vistazo a nuestros cheques. <br>  Tenemos maestros, hemos creado alg√∫n tipo de horario, y queremos comprobar que en el horario de este maestro en un d√≠a determinado en una determinada lecci√≥n hay alg√∫n objeto con el que trabajaremos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/22d/0e3/9ef/22d0e39ef38ceb43fd60654de876691b.jpg"><br><br>  Me gustar√≠a usar corchetes y acceder a nuestro horario de una manera que parezca visualmente el acceso a las matrices. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1e6/895/b9e/1e6895b9ed089ed99d4c2639e6e1f578.jpg"><br><br>  Esto se puede hacer usando el operador: get / set: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/815/9f5/a86/8159f5a8628b6c5bb21d219e395ea32b.jpg"><br><br>  Aqu√≠ no estamos haciendo nada nuevo, solo siga las convenciones.  En el caso del operador set, necesitamos pasar adicionalmente los valores a nuestro m√©todo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4c8/03d/2f2/4c803d2f20ed8b7f79e308d47b734bd9.jpg"><br><br>  Entonces, los corchetes para leer se convierten en get, y los corchetes a trav√©s de los cuales asignamos se convierten en set. <br><br><h2>  Demostraci√≥n: objeto, operadores </h2><br>  Puede leer m√°s texto o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ver el video aqu√≠</a> .  El video tiene una hora de inicio clara, pero no se especifica una hora de finalizaci√≥n; en principio, una vez iniciado, puede verlo antes del final del art√≠culo. <br><br>  Por conveniencia, resumir√© brevemente la esencia del video directamente en el texto. <br><br>  Escribamos una prueba.  Tenemos alg√∫n objeto de programaci√≥n, y si vamos a su implementaci√≥n a trav√©s de ctrl + b, veremos todo lo que mencion√© antes. <br><br><img src="https://habrastorage.org/webt/uk/pg/0d/ukpg0djbwn_hfyq4a7g9usa65aa.png"><br><br>  Dentro del objeto de programaci√≥n, queremos inicializar los datos, luego realizar algunas comprobaciones, y dentro de los datos, nos gustar√≠a decir que: <br><br><ul><li>  nuestra escuela est√° abierta desde las 8 de la ma√±ana; <br></li><li>  hay un cierto conjunto de elementos para los cuales construiremos un cronograma; <br></li><li>  hay algunos maestros que han descrito alg√∫n tipo de accesibilidad; <br></li><li>  tener un estudiante <br></li><li>  en principio, para un estudiante solo necesitamos decir que est√° estudiando un tema espec√≠fico. <br></li></ul><br><img src="https://habrastorage.org/webt/v_/mq/ia/v_mqia50010hyrqza7zubejj62e.png"><br><br>  Y aqu√≠ uno de los inconvenientes de Kotlin y los lenguajes orientados a problemas se manifiesta en principio: es bastante dif√≠cil abordar algunos objetos que creamos anteriormente.  En esta demostraci√≥n, indicar√© todo como √≠ndices, es decir, rus es el √≠ndice 0, las matem√°ticas son el √≠ndice 2. Y el profesor, naturalmente, tambi√©n lidera algo.  No solo va a trabajar, sino que se dedica a algo.  Para los lectores de este art√≠culo, me gustar√≠a ofrecer una opci√≥n m√°s para el direccionamiento, puede crear etiquetas √∫nicas y almacenar entidades en Map en ellas, y cuando necesite acceder a una de ellas, siempre puede encontrarla por etiqueta.  Contin√∫e desmontando el DSL. <br><br>  Aqu√≠, lo que debe tenerse en cuenta: en primer lugar, tenemos el operador +, a cuya implementaci√≥n tambi√©n podemos ir y ver que realmente tenemos la clase DayPointer, que nos ayuda a vincular todo esto con la ayuda del operador. <br><br>  Y gracias al hecho de que tenemos acceso al contexto, el entorno de desarrollo nos dice que en nuestro contexto a trav√©s de esta palabra clave, tenemos acceso a alguna colecci√≥n y la usaremos. <br><br><img src="https://habrastorage.org/webt/l_/3q/uw/l_3quwu2xaqlxikn71jhpnnero4.png"><br><br>  Es decir, tenemos una colecci√≥n de eventos.  El evento encapsula un conjunto de propiedades, por ejemplo: que hay un estudiante, un maestro, qu√© d√≠a se re√∫nen en qu√© lecci√≥n. <br><br><img src="https://habrastorage.org/webt/fn/1f/xa/fn1fxa5legi4mwszf5xbudchoi0.png"><br><br>  Seguimos escribiendo la prueba a√∫n m√°s. <br><br><img src="https://habrastorage.org/webt/vj/bt/s9/vjbts9wb6fely-atqa-kr88i9qm.png"><br><br>  Aqu√≠, nuevamente, usamos el operador get; no es tan f√°cil llegar a su implementaci√≥n, pero podemos hacerlo. <br><br><img src="https://habrastorage.org/webt/iz/gd/dv/izgddvy3bomaqjp_6yvbfrbcgpe.png"><br><br>  De hecho, solo seguimos el acuerdo, por lo que tenemos acceso a este dise√±o. <br>  Volvamos a la presentaci√≥n y continuemos la conversaci√≥n sobre Kotlin.  Quer√≠amos que se implementaran los controles en Kotlin, y pasamos por estos eventos: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b4f/f23/a77/b4ff23a77974a299ecac5c1c3b5d984f.jpg"><br><br>  Un evento es esencialmente un conjunto encapsulado de 4 propiedades.  Me gustar√≠a descomponer este evento en un conjunto de propiedades, como una tupla.  En ruso, dicha construcci√≥n se llama <i>declaraci√≥n m√∫ltiple</i> (encontr√© solo una traducci√≥n de este tipo), o <i>declaraci√≥n de desestructuraci√≥n</i> , y funciona de la siguiente manera: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f2c/185/5f1/f2c1855f1ee98b51a4bda6ce9cc0b0a8.jpg"><br><br>  Si alguno de ustedes no est√° familiarizado con esta caracter√≠stica, funciona as√≠: puede tomar el evento y, en el lugar donde se usa, utilizando par√©ntesis, descomponerlo en un conjunto de propiedades. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/444/95f/0a3/44495f0a381b71a20578736f0cb491af.jpg"><br><br>  Esto funciona porque tenemos un m√©todo de componentes, es decir, es un m√©todo generado por el compilador gracias al modificador de datos que escribimos antes de la clase. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/126/db9/d78/126db9d789acf9b3482f314d5a53261f.jpg"><br><br>  Junto con esto, una gran cantidad de otros m√©todos vuelan hacia nosotros.  Estamos interesados ‚Äã‚Äãen el m√©todo componentN, que se genera en funci√≥n de las propiedades enumeradas en la lista de par√°metros del constructor primario. <br><br><img src="https://habrastorage.org/webt/hd/nf/ou/hdnfoutg14046a351gjyhodfprc.png"><br><br>  Si no tuvi√©ramos un modificador de datos, ser√≠a necesario escribir manualmente un operador que haga lo mismo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e2b/37f/a2f/e2b37fa2fad7cd8e201987c32fbf572b.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e59/bc7/479/e59bc7479e66cd96c4d0d5093ef33608.jpg"><br><br>  Entonces, tenemos algunos m√©todos de componentes, y se descomponen en tal llamada: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/96a/cae/aa9/96acaeaa91222d55c4a77b70c9b02903.jpg"><br><br>  En esencia, es el az√∫car sint√°ctico sobre la llamada de varios m√©todos. <br><br>  Ya hemos hablado sobre alguna tabla de disponibilidad y, de hecho, te enga√±√©.  Sucede  No existe ninguna <code>avaiabilityTable</code> , no est√° en la naturaleza, pero existe una matriz de valores booleanos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/393/d7d/5d7/393d7d5d739ea9cecedadff695ca6874.jpg"><br><br>  No se necesita ninguna clase adicional: puede tomar la matriz de valores booleanos y cambiarle el nombre para mayor claridad.  Esto se puede hacer usando los llamados <i>typealias</i> o <i>type alias</i> .  Desafortunadamente, no obtenemos ninguna bonificaci√≥n adicional de esto, es solo un cambio de nombre.  Si toma la disponibilidad y cambia el nombre a la matriz de valores booleanos, nada cambiar√° en absoluto.  El c√≥digo funcion√≥ y funcionar√°. <br><br>  Echemos un vistazo al profesor, esta es exactamente esta accesibilidad y hablemos de √©l: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/521/031/f59/521031f59a8e7b222c2614b32ba88abd.jpg"><br><br>  Tenemos un maestro, y el m√©todo de disponibilidad se llama (¬øa√∫n no has perdido el hilo del razonamiento? :-).  ¬øDe donde vino?  Es decir, un maestro es alg√∫n tipo de entidad que tiene una clase, y este es un c√≥digo comercial.  Y no puede haber un m√©todo adicional. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/54e/044/683/54e0446838b2360d695b45e5bacec69d.jpg"><br><br>  Este m√©todo aparece debido a las funciones de extensi√≥n.  Tomamos y sujetamos a nuestra clase alguna otra funci√≥n que podemos ejecutar en objetos de esta clase. <br>  Si pasamos algo de lambda a esta funci√≥n, y luego lo ejecutamos en una propiedad existente, entonces todo est√° bien: el m√©todo de disponibilidad en su implementaci√≥n inicializa la propiedad de disponibilidad.  Puedes deshacerte de esto.  Ya conocemos el operador de invocaci√≥n, que se puede adjuntar a un tipo y, al mismo tiempo, ser una funci√≥n de extensi√≥n.  Si le pasa una lambda a este operador, all√≠ mismo, en la palabra clave this, podemos ejecutar esta lambda.  Como resultado, cuando trabajamos con un maestro, la accesibilidad es una propiedad del maestro y no un m√©todo adicional, y aqu√≠ no ocurre ning√∫n rassynchron. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4d6/1af/f71/4d61aff7169c403c75493790720c0e6e.jpg"><br><br>  Como beneficio adicional, se pueden crear funciones de extensi√≥n para tipos anulables.  Esto es bueno, porque si hay una variable con un tipo anulable que contiene un valor nulo, nuestra funci√≥n ya est√° lista para esto y no caer√° de NullPointer.  Dentro de esta funci√≥n, esto puede ser nulo y debe manejarse. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/59a/e33/1c5/59ae331c58bcd16003f51f870b89549e.jpg"><br><br>  Resumiendo las funciones de extensi√≥n: debe comprender que solo hay acceso a la API p√∫blica de la clase, y que la clase en s√≠ no se modifica de ninguna manera.  Una funci√≥n de extensi√≥n est√° determinada por el tipo de variable y no por el tipo real.  Adem√°s, un miembro de la clase con la misma firma tendr√° prioridad.  Puede crear una funci√≥n de extensi√≥n para una clase, pero escr√≠bala en una clase completamente diferente, y dentro de esta funci√≥n de extensi√≥n habr√° acceso a dos contextos simult√°neamente.  Resulta la intersecci√≥n de contextos.  Y finalmente, esta es una gran oportunidad para llevar y sujetar a los operadores en general a cualquier lugar donde queramos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a04/1e8/610/a041e86102be21acf2c3170cf941d064.jpg"><br><br>  La siguiente herramienta son las funciones infijadas.  Otro martillo peligroso en manos del desarrollador.  ¬øPor qu√© peligroso?  Lo que ves es c√≥digo.  Tal c√≥digo se puede escribir en Kotlin, ¬°y no lo hagas!  Por favor no lo hagas.  Sin embargo, el enfoque es bueno.  Gracias a esto, es posible deshacerse de puntos, corchetes, de toda esa sintaxis ruidosa, de la que estamos tratando de alejarnos lo m√°s posible y hacer que nuestro c√≥digo sea un poco m√°s limpio. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/909/8c3/4a0/9098c34a06b09bac0597004c6fbf6b1a.jpg"><br><br>  Como funciona  Tomemos un ejemplo m√°s simple: una variable entera.  Creemos una funci√≥n de extensi√≥n para √©l, llam√©mosle shouldBeEqual, har√° algo, pero esto no es interesante.  Si agregamos el modificador infijo a la izquierda, es suficiente.  Puede deshacerse de los puntos y corchetes, pero hay algunos matices. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/39e/fc2/31f/39efc231fb88cee1ef014a36fcb6cc73.jpg"><br><br>  Sobre esta base, solo se implementa la construcci√≥n de datos y aserciones, unidas entre s√≠. <br><img src="https://habrastorage.org/getpro/habr/post_images/80f/6dd/126/80f6dd126255196fc538026ea28656c1.jpg"><br><br>  Vamos a resolverlo.  Tenemos un SchedulingContext: el contexto general del inicio de la programaci√≥n.  Hay una funci√≥n de datos que devuelve el resultado de esta planificaci√≥n.  Al mismo tiempo, creamos una funci√≥n de extensi√≥n y al mismo tiempo las aserciones de la funci√≥n infija, que lanzar√° una lambda que verifica nuestros valores. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/449/74c/fe5/44974cfe559d94d17e6435557757af80.jpg"><br><br>  Hay un sujeto, un objeto y una acci√≥n, y de alguna manera necesitas conectarlos.  En este caso, el resultado de ejecutar datos con llaves es el tema.  La lambda que pasamos al m√©todo de aserciones es un objeto, y el m√©todo de aserciones en s√≠ mismo es una acci√≥n.  Todo esto parece mantenerse unido. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/518/aac/4e9/518aac4e9d92ca84a79e6cdb09fea773.jpg"><br><br>  Hablando de la funci√≥n infijo, es importante entender que este es un paso para deshacerse de la sintaxis ruidosa.  Sin embargo, debemos tener un sujeto y un objeto de esta acci√≥n, y debemos usar el modificador infijo.  Puede haber exactamente un par√°metro, es decir, cero par√°metros no pueden ser, dos no pueden ser, tres, bueno, entiendes.  Puede pasar, por ejemplo, lambdas a esta funci√≥n, y de esta manera se obtienen construcciones que no ha visto antes. <br><br>  Pasemos a la pr√≥xima demostraci√≥n.  Es mejor mirar el video y no leer el texto. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/q_UM1EY2S5g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Ahora todo parece listo: la funci√≥n infijo que viste, la extensi√≥n de la funci√≥n que viste, la declaraci√≥n de desestructuraci√≥n est√° lista. <br><br>  Volvamos a nuestra presentaci√≥n, y aqu√≠ pasaremos a un punto bastante importante al construir lenguajes orientados a problemas: lo que debe pensar es el control de contexto. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ff/0d3/57a/9ff0d357a3e39d01bcb3d5d07d81d71e.jpg"><br><br>  Hay situaciones en las que podemos tomar DSL y reutilizarlo dentro de √©l, pero no queremos hacer esto.  Nuestro usuario (posiblemente un usuario inexperto) escribe datos dentro de los datos, y eso no tiene sentido.  Nos gustar√≠a de alguna manera prohibirle que haga esto. <br><br>  Antes de la versi√≥n 1.1 de Kotlin, ten√≠amos que hacer lo siguiente: en respuesta al hecho de que tenemos un m√©todo de datos en <code>SchedulingContext</code> , tuvimos que crear otro m√©todo de datos en <code>DataContext</code> , en el que aceptamos un lambda (aunque sin implementaci√≥n), debemos marcar este m√©todo anotaci√≥n <code>@Deprecated</code> y decirle al compilador que no compile esto.  Ver√° que este m√©todo comienza; no compile.  Usando este enfoque, incluso recibimos alg√∫n mensaje significativo cuando escribimos c√≥digo sin sentido. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dfb/7a7/0b4/dfb7a70b4fba1c5cb0bf37715a4fe1bd.jpg"><br><br>  Despu√©s de la versi√≥n Kotlin 1.1, <code>@DslMarker</code> una maravillosa anotaci√≥n <code>@DslMarker</code> .  Esta anotaci√≥n es necesaria para marcar anotaciones derivadas.  Con ellos, a su vez, marcaremos lenguajes orientados a problemas.  Para cada lenguaje orientado a problemas, puede crear una anotaci√≥n que marque <code>@DslMarker</code> y colgarla en cada contexto que sea necesario.  Ya no es necesario escribir m√©todos adicionales que se debe prohibir la compilaci√≥n, todo funciona.  No compilado <br><br>  Sin embargo, existe un caso especial cuando trabajamos con nuestro modelo de negocio.  Suele estar escrito en Java.  ,   ,    .  ,     ?  <code>Student</code> .  ‚Äì   -,  Kotlin . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4c6/111/c5c/4c6111c5c80ab5c4856e68c06880ed4a.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/cc3/572/a05/cc3572a054dabbe4e32362d845b30cf8.jpg"><br><br>    -    ,         :    .        ,     ,  . <br><br><img width="100%" src="https://habrastorage.org/getpro/habr/post_images/2fd/77d/125/2fd77d1250c0677a24c1c9c358f11663.jpg"><br><br>     . <br><br><ol><li>   ,     .   StudentContext.    ,        .    ‚Äì   , , ,   . <br></li><li>   ‚Äì      ,    ,     .        .  StudentContext  ,      IStudent       .  ,       Student,        IStudent  StudentContext.   DslMarker  ,  . <br></li><li>  :   deprecated     .   ,   .       ,   .       extension-,     .       . <br></li></ol><br><img src="https://habrastorage.org/getpro/habr/post_images/9ea/10d/d6a/9ea10dd6af4495be38653339010e0a46.jpg"><br><br>  ,       ,    ,    . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1d7/9f9/53f/1d79f953fc755000013d44d15f56fb73.jpg"><br><br>    .     . ,       ,   ,      .  ,           .   @DslMarker,      .   ,       @DslMarker,   @Deprecated,      ,    . <br><br> ,   : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/q_UM1EY2S5g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><img src="https://habrastorage.org/getpro/habr/post_images/16c/690/f58/16c690f589bf90cc1547edc1ee985ae0.jpg"><br><br><h2>    </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primero, reutilice las partes DSL. Hoy ya ha visto que las entidades de direccionamiento creadas con DSL pueden ser problem√°ticas. Hay maneras de evitar esto, pero es aconsejable pensarlo de antemano para tener un plan para esto.</font></font><br><br> ,     -  ,      , ,      , -   ,    .   ?    for ‚Äî    .       DSL,       , ,        DSL.     this     it.  ,   Kotlin  1.2.20    ,      .    ,         it. <br><br>    .    DSL,     --,        ,  . ,      . ,    ,        ,   - ,       ,     .   . , -    ,     .. <br><br> , .    ,     -  ‚Äì      DSL. ,     Kotlin-,   . ,   DSL   ,   ,   Kotlin-  .   -?     Gradle-,   ,   ,    ,   - .    - ,   ,    ‚Äì    ,       DSL. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/13e/4e0/05a/13e4e005af12def0ee687b008ffc41ac.jpg"><br><br>   DSL'   , .    ,     .  ,   DSL ,  ,   . - ‚Äì   . -, -      . ,       - . <br> ,  Kotlin.  ,     ,  ,       , , ,     .         (, - ,     ),      ,   DSL  , ,       ,     .      . <br><br>   ¬´¬ª,     .   ,       Kotlin   .     ,  ,    .    ,        ‚Äî  ,     . <br> ,   DSL.      ,       - .    DSL,      ,     10   ,      ,   -      .    DSL ‚Äì      ,     ,     . <br><br>  ,   .    , Telegram: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">@ivan_osipov</a> , Twitter: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">@_osipov_</a> , : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">i_osipov</a> .    . <br><br><blockquote>  Minuto de publicidad.        <b>JPoint</b> ‚Äî  ,  19-20   -  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Joker 2018</a> ‚Äî    Java-.       .    ,         . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es416725/">https://habr.com/ru/post/es416725/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es416711/index.html">P√°ginas de la historia de Intel. Fuego de f√°brica de Penang</a></li>
<li><a href="../es416713/index.html">Informe del Club de Roma 2018, Cap√≠tulo 3.14: "Ni un solo PIB ..."</a></li>
<li><a href="../es416719/index.html">Extensi√≥n PHP y Kotlin Native. Segunda parte, consciente</a></li>
<li><a href="../es416721/index.html">Casa de bricolaje: casas de mu√±ecas para adultos</a></li>
<li><a href="../es416723/index.html">Accesibilidad API: interfaces de lenguaje natural</a></li>
<li><a href="../es416727/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 2: "Control de ataques de hackers", parte 3</a></li>
<li><a href="../es416729/index.html">El programa PYCON RUSSIA est√° listo: 25 informes y 3 talleres de oradores de Google, Red Hat, Yelp, Yandex</a></li>
<li><a href="../es416731/index.html">Frost on glass: c√≥mo hacer pl√°stico de vidrio resistente</a></li>
<li><a href="../es416737/index.html">A * Algoritmo de b√∫squeda de ruta en un juego Voxel 3d Unity</a></li>
<li><a href="../es416739/index.html">Nuevo ASUS en Computex 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>