<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯФЪ тЪЦя╕П ЁЯОК рдЕрдЪреНрдЫреЗ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП DDoS рдХреЛ рдХреИрд╕реЗ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░реЗрдВ? ЁЯСиЁЯП╝тАНтЬИя╕П ЁЯРА тЪЫя╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдПрдХ рдирдИ рд╕реЗрд╡рд╛ рдХреЗ рдЬрд╛рд░реА рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдпрд╣ рд╣рдорд╛рд░реА рдЕрдкреЗрдХреНрд╖рд╛рдУрдВ рдХреЗ рдЕрдиреБрд░реВрдк рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рдпрд╣ рдЙрдкрд▓рдмреНрдз рд╣реИ рдХрд┐ рдЪрд╛рд╣реЗ рдХрд┐рддрдиреЗ рдЧреНрд░рд╛рд╣рдХ рдПрдХ рд╕рд╛рде ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЕрдЪреНрдЫреЗ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП DDoS рдХреЛ рдХреИрд╕реЗ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░реЗрдВ?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ntc-vulkan/blog/481756/"><p><img src="https://habrastorage.org/webt/qa/gk/up/qagkupe_y5cx7thbrqpj4aynn1y.png" alt="рдЫрд╡рд┐"></p><br><p>  рдПрдХ рдирдИ рд╕реЗрд╡рд╛ рдХреЗ рдЬрд╛рд░реА рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдпрд╣ рд╣рдорд╛рд░реА рдЕрдкреЗрдХреНрд╖рд╛рдУрдВ рдХреЗ рдЕрдиреБрд░реВрдк рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рдпрд╣ рдЙрдкрд▓рдмреНрдз рд╣реИ рдХрд┐ рдЪрд╛рд╣реЗ рдХрд┐рддрдиреЗ рдЧреНрд░рд╛рд╣рдХ рдПрдХ рд╕рд╛рде рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред </p><br><p>  рдФрд░ рдЕрдЧрд░ рдпрд╣ рд╡рд┐рддрд░рд┐рдд DoS рд╣рдорд▓реЗ рдХреЗ рдЦрд┐рд▓рд╛рдл рдЖрдпреЛрдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рдпрд╣ рд╕реЗрд╡рд╛ рдХреИрд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЗрдЧреА?  рдХреНрдпрд╛ рд╕рдВрд╕рд╛рдзрди рд╕рдВрднрд╛рд╡рд┐рдд рд╣рдорд▓рд╛рд╡рд░реЛрдВ рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИ? </p><br><p>  рд╕рдВрднрд╛рд╡рд┐рдд рдЬреЛрдЦрд┐рдореЛрдВ рдХрд╛ рдЖрдХрд▓рди рдХрд░рдиреЗ рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╣ рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рдЙрди рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рд╕рдВрдЪрд╛рд▓рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИ рдЬреЛ DDoS рд╣рдорд▓реЗ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рддреЗ рд╣реИрдВ, рдЬрдмрдХрд┐ рдмрдбрд╝реЗ рдкреИрдорд╛рдиреЗ рдкрд░ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рд╕рдВрд╕рд╛рдзрди рдЕрднреА рддрдХ рд▓реЙрдиреНрдЪ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><p>  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рд╣рдо DNS рдФрд░ HTTP рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг рдХреЗ рдЖрдпреЛрдЬрди рдХреЗ рдЕрдиреБрднрд╡ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реЗрдВрдЧреЗред </p><a name="habracut"></a><br><h1>  рдЯреНрд░реЗрдирд┐рдВрдЧ </h1><br><p>  рдореЙрдирд┐рдЯрд░ рдХрд┐рдП рдЧрдП рд╕рдВрд╕рд╛рдзрди рдкрд░ рдмрдбрд╝реА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдХрдИ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрд╡рд╛ рдореЗрдВ рдЕрдзрд┐рдХрддрдо рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдЕрдиреБрд░реЛрдз рднреЗрдЬреЗрдЧрд╛ред  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдбреЗрдЯрд╛ рд╕реЗрдВрдЯрд░ рдирд╣реАрдВ рд╣реИ, рддреЛ рдпрд╣ рдПрдХ рдмрд╛рджрд▓ рдореЗрдВ рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ рдЖрднрд╛рд╕реА рдорд╢реАрдиреЛрдВ рдХреЛ рдХрд┐рд░рд╛рдП рдкрд░ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИред  рдЗрд╕ рд╡рд┐рдЪрд╛рд░ рдХреА рдПрдХ рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИ: рдЖрдкрдХреЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдмрд╛рджрд▓ рдХреНрд░реЙрд▓ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдПрдХ рд╣рдорд▓рд╛рд╡рд░ рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреА рдЧрддрд┐рд╡рд┐рдзрд┐ рд▓реЗ рд░рд╣рд╛ рд╣реИред </p><br><p>  рд╡рд┐рднрд┐рдиреНрди рдХреНрд▓рд╛рдЙрдб рд╕реЗрд╡рд╛рдУрдВ рдХреА рдиреАрддрд┐рдпреЛрдВ рдХреА рддреБрд▓рдирд╛ рдХрд░рддреЗ рд╣реБрдП (рдХрд┐рд╕реА рдиреЗ рдХрд┐рд╕реА рдЦрд╛рддреЗ рдХреЛ рдмреЗрд░рд╣рдореА рд╕реЗ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░ рджрд┐рдпрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдХрд╛рд░рдг, рд╕рдВрднрд╡рддрдГ рдЙрдирдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреА рдЧрдИ рдереА), рд╣рдордиреЗ <a href="https://aws.amazon.com/">рдЕрдореЗрдЬрд╝рди рд╡реЗрдм рд╕рд░реНрд╡рд┐рд╕реЗрдЬ</a> (AWS) рдкрд░ рд░реЛрдХ рд▓рдЧрд╛рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред  рдЙрдирдХреЗ <a href="https://aws.amazon.com/ru/ec2/testing/">рджрд╕реНрддрд╛рд╡реЗрдЬреЛрдВ рд╕реЗ</a> рд╕рдВрдХреЗрдд рдорд┐рд▓рддрд╛ рд╣реИ рдХрд┐ AWS рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрддреЗ рдкрд░ рдПрдХ рдИрдореЗрд▓ рднреЗрдЬрдХрд░ рдЕрдиреБрдореЛрджрди рдорд╛рдВрдЧрддрд╛ рд╣реИред </p><br><h1>  рддрдирд╛рд╡ рдкрд░реАрдХреНрд╖рдг рдХрд╛ рд╣рд╛рд░реНрдореЛрдирд╛рдЗрдЬреЗрд╢рди </h1><br><p>  рд╣рдо рдПрдХ рд╕рдВрджреЗрд╢ рднреЗрдЬрддреЗ рд╣реИрдВ рдЬрд╣рд╛рдБ рд╣рдо рдЕрдкрдиреЗ рдЗрд░рд╛рджреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рд╣рдореЗрдВ рдПрдХ рдлреЙрд░реНрдо рдорд┐рд▓рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдкреВрд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП: </p><br><pre><code class="plaintext hljs">Customer ID: Customer Name: Email Address: AWS Account ID load test will be performed from: Does the customer have an NDA? Target Data EC2 Resources: Cloudfront Distribution: API Gateway / Lambda ID: ELB Names: Non-AWS Target: Region (please list all regions in scope for testing): Source Data: IP Addresses: Source Account ID: Regions involved: Testing Parameters: How much traffic do you plan to generate by region during testing? What is your expected peak load from source by region? (ie xx Gbps) What is your expected peak load at destination? (ie xx Gbps) Are you testing traffic outbound from EC2, inbound into EC2, or both? Are you testing traffic outbound (egress) from EC2, inbound (ingress) into EC2, or both: Egress. What is your expected peak load from source by region? (ie xx Gbps) Ingress. What is your expected peak load from source by region? (ie xx Gbps) Start Date: End Date: Finite testing details including timeline of testing: Summary of Test: Testing Timelines by phase including rps, pps, and Gbps: Peak bandwidth for each source IP: Tools Used for each phase of test: Types of testing to be performed for each phase of the request: What criteria/metrics will you monitor to ensure the success of this test? Who is performing the Load Test? (Please provide contact details): Does the tester have an NDA? Testing Security Do you have a way to monitor the data traffic for the duration of the test to verify bandwidth limits do not exceed approved rates? Do you have a way to immediately stop the traffic if we/you discover any issue? 2 Emergency contact names and phone numbers:</code> </pre> <br><p>  рдХрдИ рдмрд╛рд░реАрдХрд┐рдпрд╛рдВ рд╣реИрдВ: </p><br><ol><li><p>  рд╡реЗ рд╣рдорд╕реЗ рдкреВрдЫрддреЗ рд╣реИрдВ рдХрд┐ рд╣рдо рдХреМрди "рддрди" рдХрд░реЗрдВрдЧреЗред  рдХреНрдпрд╛ рд╣рдореЗрдВ рдЗрд╕ рдкрд░ рдЕрдзрд┐рдХрд╛рд░ рд╣реИ?  рд╣рдо рдХрд╣рддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рд╣рдорд╛рд░рд╛ рд╕рдВрд╕рд╛рдзрди рд╣реИ (рдЬрд╛рд╣рд┐рд░рд╛ рддреМрд░ рдкрд░, рдХреЛрдИ рднреА рдЬрд╛рдВрдЪ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдРрд╕рд╛ рд╣реИ) рдФрд░ рдкрд░реАрдХреНрд╖рдг рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕реБрд╕рдВрдЧрдд рд╣реИред </p><br></li><li><p>  рд╣рдореЗрдВ рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдХрд┐рддрдирд╛ рдЯреНрд░реИрдлрд╝рд┐рдХ рдмрдирд╛рдПрдВрдЧреЗред  рдкрддреНрд░рд╛рдЪрд╛рд░ рдХреЗ рджреМрд░рд╛рди, рд╣рдореЗрдВ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдиреЗрдЯрд╡рд░реНрдХ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдорд╛рддреНрд░рд╛ рдкрд░ рдкреНрд░рддреНрдпреЗрдХ рдХреНрд╖реЗрддреНрд░ рдХреА рдЕрдкрдиреА рд╕реАрдорд╛ рд╣реИред  рдХреБрд▓ рдореЗрдВ, рдЙрдиреНрд╣реЗрдВ 645 Gb / s рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИред  рд╣рдо рдорд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рд╣рдорд▓реЗ рдХреЗ рд▓рд┐рдП рдХрд┐рддрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдФрд░ рд╣рдо рдЖрд╡рд╢реНрдпрдХ рдореВрд▓реНрдп рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕ рддрд░рд╣ рд╕реЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХрд╛ рдЪрдпрди рдХрд░рддреЗ рд╣реИрдВред </p><br></li><li><p>  рдпрд╣ рд╡рд░реНрдгрди рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рдХрд┐рд╕ рд╕рдордп рд╣рдорд▓рд╛ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдпрд╣ рдХрд┐рддрдиреЗ рд╕рдордп рддрдХ рдЪрд▓реЗрдЧрд╛ рдФрд░ рдЗрд╕рдХреА рд╢рдХреНрддрд┐ рдХреИрд╕реЗ рдмрдврд╝реЗрдЧреАред  рдореБрдХреНрдд рд░реВрдк рдореЗрдВ, рд▓реЗрдХрд┐рди рдкрд░реНрдпрд╛рдкреНрдд рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╣рдо рдЕрдкрдиреА рдпреЛрдЬрдирд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВред  рд╣рдорд▓реЗ рдХреЛ рдзреАрд░реЗ-рдзреАрд░реЗ рд╢рдХреНрддрд┐ рдореЗрдВ рд╡реГрджреНрдзрд┐ рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдкреЗрдВрдЯ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдкрд░реАрдХреНрд╖рдг рдХреЗ рдХреНрдпрд╛ рдЪрд░рдг рд╣реЛрдВрдЧреЗ рдФрд░ рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдкрд░ рдЕрдзрд┐рдХрддрдо рд╢рдХреНрддрд┐ рдХреНрдпрд╛ рд╣реЛрдЧреАред  рд╣рдорд▓реЗ рдХреА рддрд╛рд░реАрдЦ рдХреЛ рдПрдХ рджрд┐рди рддрдХ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рджреЛ рд╕реЗ рддреАрди рд╕рдкреНрддрд╛рд╣ рдХреА рд╕реАрдорд╛ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br></li><li><p>  рдФрд░ рдЕрд╕рдлрд▓ рд╣реЛрдиреЗ рдХреЗ рдмрд┐рдирд╛, рд╣рдо рдпрд╣ рдЖрд╢реНрд╡рд╕реНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА рдкреВрд░реА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдХрд┐ рд╣рдо рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░реЗрдВрдЧреЗ, рдкрд░реАрдХреНрд╖рдг рдХреА рдкреНрд░рдЧрддрд┐ рдХреА рд╕рд╛рд╡рдзрд╛рдиреАрдкреВрд░реНрд╡рдХ рдирд┐рдЧрд░рд╛рдиреА рдХрд░реЗрдВ рдФрд░ рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдиреЗ рдкрд░ рдЗрд╕реЗ рдкрд╣рд▓реЗ рдЕрдиреБрд░реЛрдз рдкрд░ рд░реЛрдХ рджреЗрдВред </p><br></li></ol><br><p>  рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ, рднрд░реЗ рд╣реБрдП рдлреЙрд░реНрдо рдХреЗ рдЬрд╡рд╛рдм рдореЗрдВ рд╡реЗ рдХреБрдЫ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдорд╛рдВрдЧреЗрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдкрд░реАрдХреНрд╖рдг рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рддрдм рддрдХ рдЬрд╡рд╛рдм рджреЗрддреЗ рд╣реИрдВ рдЬрдм рддрдХ рд╣рдореЗрдВ рдкрд░реАрдХреНрд╖рдг рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рдорд┐рд▓рддреАред </p><br><p>  рдпрджрд┐ рддреБрд░рдВрдд рдЬрд╡рд╛рдм рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рдЕрдиреБрдореЛрджрди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдореЗрдВ рд▓рдЧрднрдЧ рддреАрди рдХрд╛рд░реНрдпрджрд┐рд╡рд╕ рд▓рдЧрддреЗ рд╣реИрдВред </p><br><h1>  рдЕрдзреЛрд╕рдВрд░рдЪрдирд╛ рддреИрдпрд╛рд░ рдХрд░рдирд╛ </h1><br><p>  рдЕрдиреБрдореЛрджрди рдХреЗ рдмрд╛рдж, рд╣рдореЗрдВ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪрд╛ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝ рд░рд╣рд╛ рд╣реИред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдЬрд╛рдБрдЪ рдХреЗ рджреМрд░рд╛рди рд╣рдореЗрдВ рддреБрд░рдВрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА: </p><br><p>  тАв рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╢рд╛рдорд┐рд▓ рдХрд░реЗрдВ; </p><br><p>  тАв рдПрдХ рдкрд░реАрдХреНрд╖рдг рд╣рдорд▓реЗ рд╢реБрд░реВ; </p><br><p>  тАв рдкреНрд░рдЧрддрд┐ рдкрд░ рдЖрдВрдХрдбрд╝реЗ рдЗрдХрдЯреНрдард╛; </p><br><p>  тАв рдкрд░реАрдХреНрд╖рдг рд╣рдорд▓реЗ рдХреЛ рд░реЛрдХреЗрдВ; </p><br><p>  тАв рдЖрдИрдкреА рдкрддрд╛ рдмрджрд▓реЗрдВ; </p><br><p>  тАв рдЙрджрд╛рд╣рд░рдг рдмрдВрдж рдХрд░реЗрдВред </p><br><h2>  рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдЗрдореЗрдЬ рдмрдирд╛рдПрдВ </h2><br><h3>  рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдЯрд╛рдЗрдк рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ </h3><br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдЗрдП рдПрдХ рдПрдбрдмреНрд▓реНрдпреВрдПрд╕ рдЫрд╡рд┐ рдмрдирд╛рдПрдВ рдЬрд┐рд╕рдореЗрдВ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдЙрдкрдХрд░рдг рдФрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реЛрдВрдЧреЗред  рдкрд╣рд▓рд╛ рдХрджрдо рдпрд╣ рд╣реИ рдХрд┐ рдХрд┐рд╕ рдЙрджрд╛рд╣рд░рдг рдХреЛ рдХрд┐рд░рд╛рдП рдкрд░ рд▓рд┐рдпрд╛ рдЬрд╛рдПред  рд╣рдо рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рддреЗ рд╣реИрдВ: рд╣рдо рдХреАрдордд рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВ, рдЕрдзрд┐рдХрддрдо рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдорд╛рддреНрд░рд╛, рд╕реАрдкреАрдпреВ рдкрд╛рд╡рд░ (рдЙрддреНрддрд░рд╛рд░реНрджреНрдз рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЯреНрд░реИрдлрд╝рд┐рдХ рдкреНрд░реЛрд╕реЗрд╕рд░ рдкрд╛рд╡рд░ рджреНрд╡рд╛рд░рд╛ рд╕рдм рдХреЗ рдмрд╛рдж рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ), рдлрд┐рд░ рд╣рдо рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкреНрд░рджрд░реНрд╢рди рдФрд░ рдЕрдзрд┐рдХрддрдо рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рддреЗ рд╣реИрдВред  рд╣рдорд╛рд░реЗ рдЕрдиреБрдорд╛рдиреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░, <code>t3.small</code> рдЙрджрд╛рд╣рд░рдг рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рд╣рд░ рдХреЛрдИ рдЕрдкрдиреЗ рд╕реНрд╡рд╛рдж рдХреЗ рд▓рд┐рдП рдЪреБрдирддрд╛ рд╣реИред </p><br><p>  рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЗ рд▓рдХреНрд╖рдг <a href="https://aws.amazon.com/ec2/instance-types/">рдпрд╣рд╛рдВ</a> рджреЗрдЦреЗ рдЬрд╛ рд╕рдХрддреЗ <a href="https://aws.amazon.com/ec2/instance-types/">рд╣реИрдВ</a> ред  рдЖрдк <a href="https://www.ec2instances.info/">рдпрд╣рд╛рдВ</a> рдЙрджрд╛рд╣рд░рдгреЛрдВ <a href="https://www.ec2instances.info/">рдХрд╛</a> рдЪрдпрди рдФрд░ рддреБрд▓рдирд╛ рднреА рдХрд░ рд╕рдХрддреЗ <a href="https://www.ec2instances.info/">рд╣реИрдВ</a> ред </p><br><h3>  рд╕реАрдорд╛ рдЕрдиреБрд░реЛрдз </h3><br><p>  рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╕реЛрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рдХрд┐рддрдиреЗ рдЙрджрд╛рд╣рд░рдг рднрд╛рдЧ рд▓реЗрдВрдЧреЗред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдЕрдореЗрдЬрд╝реЕрди рдкреНрд░рддреНрдпреЗрдХ рдХреНрд╖реЗрддреНрд░ рдХреЗ рд▓рд┐рдП рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░ рдЕрдкрдиреА рд╕реАрдорд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдкрдХреЛ рд▓рдЧ рд░рд╣рд╛ рд╣реИ рдХрд┐ рдЖрдкрдХреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЙрдкрд▓рдмреНрдз рдЕрдзрд┐рдХ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА, рддреЛ рдЖрдкрдХреЛ рдЬрд▓реНрдж рд╕реЗ рдЬрд▓реНрдж рд╕реАрдорд╛ рдореЗрдВ рд╡реГрджреНрдзрд┐ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <a href="https://console.aws.amazon.com/support/cases">рд╕рд╣рд╛рдпрддрд╛</a> рдЕрдиреБрднрд╛рдЧ рдкрд░ рдЬрд╛рдПрдВ, рд╕реЗрд╡рд╛ рдкреНрд░рдХрд╛рд░ рдХреА рд╡реГрджреНрдзрд┐ рдХреА рдХреЙрд▓ рдмрдирд╛рдПрдВред  рдЕрдиреБрд░реЛрдз рдХреЗ рд▓рд┐рдП рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рд╕рдордп рдЕрд▓рдЧ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ: рдЕрдЧрд▓реЗ рджрд┐рди рдХреЛрдИ рдЬрд╡рд╛рдм рджреЗрддрд╛ рд╣реИ, рдЕрдиреБрд░реЛрдз рдХреЗ рд░реВрдк рдореЗрдВ рдХрдИ рд╕рдВрд╕реНрдерд╛рдПрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдХреЛрдИ рдХрд╣рддрд╛ рд╣реИ рдХрд┐ рд╡рд╣ рдПрди рдЙрджрд╛рд╣рд░рдгреЛрдВ рд╕реЗ рдЕрдзрд┐рдХ рдирд╣реАрдВ рдЪрд▓рдиреЗ рджреЗрдЧрд╛ред  рдРрд╕реЗ рдХреНрд╖реЗрддреНрд░ рдереЗ рдЬрд┐рдиреНрд╣реЛрдВрдиреЗ рд▓рдЧрднрдЧ рдПрдХ рдорд╣реАрдиреЗ рдХреЗ рдЕрдиреБрд░реЛрдз рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреАред </p><br><h3>  рдкреНрд░рджрд░реНрд╢рди рдЯреНрдпреВрдирд┐рдВрдЧ </h3><br><p>  рдЕрдЧрд▓рд╛, рдЖрдкрдХреЛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдЫрд╡рд┐ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдХреЗ рджреМрд░рд╛рди рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдЪрдпрдирд┐рдд рдкреНрд░рдХрд╛рд░ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдХреЛ рдЪрд╛рд▓реВ рдХрд░рддреЗ рд╣реИрдВ, рдЙрд╕ рдкрд░ рд╕рднреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдмрдирд╛рддреЗ рд╣реИрдВ, рдлрд┐рд░ рдПрдХ рдЫрд╡рд┐ рдХреЗ рд░реВрдк рдореЗрдВ рдЬреЛ рдХреБрдЫ рд╣реБрдЖ рд╣реИ рдЙрд╕реЗ рдмрдЪрд╛рдПрдВ (рдХреНрд░рд┐рдпрд╛ рдореЗрдиреВ рдореЗрдВ, рдЬрд╣рд╛рдВ рдЖрдк рдЙрджрд╛рд╣рд░рдг рдХреЛ рд╕рдХреНрд╖рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рд╛рде рд╣реА рдЫрд╡рд┐ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рднреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ)ред </p><br><p>  рд╣рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдЙрджрд╛рд╣рд░рдг рд╕реЗ рдЕрдзрд┐рдХрддрдо рдЖрдЙрдЯрдЧреЛрдЗрдВрдЧ рдЯреНрд░реИрдлрд╝рд┐рдХ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдкрд╣рд▓реЗ рд╣рдо рдЙрджрд╛рд╣рд░рдг рдкрд░ рдЕрдкрдиреЗ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдиреЗрдЯрд╡рд░реНрдХ рдФрд░ рдореЗрдореЛрд░реА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХрд╛ рдЕрдиреБрдХреВрд▓рди рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <code>/etc/sysctl.conf</code> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕реЗрдЯрд┐рдВрдЧ рдХрд░реЗрдВ: </p><br><p>  тАв рд╕реНрдерд╛рдиреАрдп рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдХреА рд╕реАрдорд╛ рдмрдврд╝рд╛рдПрдБ рдФрд░ рдлрд╝рд╛рдЗрдирд▓_рд╡рд┐рдЯ рд░рд╛рдЬреНрдп рдореЗрдВ рд╕реЙрдХреЗрдЯреНрд╕ рджреНрд╡рд╛рд░рд╛ рдЦрд░реНрдЪ рдХрд┐рдП рдЧрдП рд╕рдордп рдХреЛ рдХрдо рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">net.ipv4.ip_local_port_range = 1024-65535 ( : 32768-61000) net.ipv4.tcp_fin_timeout = 10 ( : 60)</code> </pre> <br><p>  рд╕реНрдерд╛рдиреАрдп рдкреЛрд░реНрдЯ рд░реЗрдВрдЬ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрдИрдкреА рд╕реЗ рдПрдХ рдореЗрдЬрдмрд╛рди рдЕрдзрд┐рдХрддрдо рдХрд┐рддрдиреА рдЖрдЙрдЯрдЧреЛрдЗрдВрдЧ рд╕реЙрдХреЗрдЯреНрд╕ рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕реЗрдЯрд┐рдВрдЧ (61,000-32,768) рдХреЗ рд╕рд╛рде, 28,233 рд╕реЙрдХреЗрдЯ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреЗ рд╣реИрдВред  рдирдИ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рд╕рд╛рде - 64 500ред </p><br><p>  Fin_timeout рдиреНрдпреВрдирддрдо рд╕рдордп рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЖрдЙрдЯрдЧреЛрдЗрдВрдЧ рд╕реЙрдХреЗрдЯреНрд╕ FIN_WAIT рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдпрджрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рд╕рд┐рд╕реНрдЯрдо рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб (61,000-32,768) / 60 = 470 рд╕реЙрдХреЗрдЯ рд╕реЗ рдЕрдзрд┐рдХ рдирд╣реАрдВ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  Port_range рдХреЛ рдмрдврд╝рд╛рдХрд░ рдФрд░ fin_time рдХреЛ рдШрдЯрд╛рдХрд░, рд╣рдо рдЕрдзрд┐рдХ рдЖрдЙрдЯрдЧреЛрдЗрдВрдЧ рдХрдиреЗрдХреНрд╢рди рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд┐рд╕реНрдЯрдо рдХреА рдХреНрд╖рдорддрд╛ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдЬрдм рд╣рдо рдирд┐рдГрд╢реБрд▓реНрдХ рд╕рдорд╛рдкреНрдд рд╣реЛрддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ TIME_WAIT рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕реЙрдХреЗрдЯ рдХрд╛ рдкреБрди: рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">net.ipv4.tcp_tw_reuse = 1</code> </pre> <br><p>  рдЙрдкрд░реЛрдХреНрдд рд╡рд┐рдХрд▓реНрдк рд╕реЗрдЯ рдХрд░рдирд╛ (рдЬреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЕрдХреНрд╖рдо рд╣реИ) рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреВрд░реНрдг рдХрд┐рдП рдЧрдП рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреЗ "рдирд┐рд╖реНрдХреНрд░рд┐рдп" рдХреЗ рдиреБрдХрд╕рд╛рди рдХреЛ рдХрдо рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЗрд╕ <a href="https://vincent.bernat.ch/en/blog/2014-tcp-time-wait-state-linux">рд▓реЗрдЦ</a> рдореЗрдВ TIME_WAIT рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╣реБрдд рд╡рд┐рд╕реНрддреГрдд рд╡рд░реНрдгрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><p>  рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдКрдкрд░ tcp_tw_reuse рд╡рд┐рдХрд▓реНрдк рдХреЗ рд▓рд┐рдП tcp_timestamps рд╡рд┐рдХрд▓реНрдк рдЪрд╛рд▓реВ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">net.ipv4.tcp_timestamps = 1 тАУ   `tcp_timestamps`     tcp_tw_reuse</code> </pre> <br><p>  тАв рдЕрдиреНрдп рд╡рд┐рдХрд▓реНрдк: </p><br><pre> <code class="plaintext hljs">net.ipv4.tcp_max_tw_buckets = 720000 тАУ       TIME_WAIT net.ipv4.tcp_keepalive_time = 600 тАУ  - keepalive- net.ipv4.tcp_keepalive_probes = 3 тАУ   keepalive- net.ipv4.tcp_keepalive_intvl = 10 тАУ     keepalive- net.ipv4.tcp_window_scaling = 1 тАУ   TCP- net.ipv4.tcp_mem = 8192 131072 196304 тАУ     TCP- net.ipv4.udp_mem = 8192 131072 196304 тАУ     udp- net.ipv4.tcp_slow_start_after_idle=0 тАУ  Slow-Start Restart net.core.wmem_default = 31457280 тАУ         net.core.wmem_max = 33554432 тАУ        net.core.somaxconn = 65535 тАУ        net.core.netdev_max_backlog = 65535 тАУ          vm.swappiness = 30 тАУ    vm.dirty_ratio = 50 тАУ     50 %  vm.pagecache = 90 тАУ    </code> </pre> <br><h3>  рд╣рдорд▓реЗ рдХреА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ </h3><br><p>  <strong>1. рдбреАрдПрдирдПрд╕ рд╣рдорд▓рд╛</strong> </p><br><p>  рдкрд░реАрдХреНрд╖рдг рдХрд╛ рдПрдХ рдореБрдЦреНрдп рдХрд╛рд░реНрдп DNS рд╕рд░реНрд╡рд░реЛрдВ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рдирд╛ рд╣реИред  рдЕрд░реНрдерд╛рддреН, DNS рд╕рд░реНрд╡рд░ рдХрд┐рд╕реА рд╕рд╛рдЗрдЯ рдХреА рдЧрд▓рддреА рд╕рд╣рд┐рд╖реНрдгреБрддрд╛ рдХреА рдЕрдбрд╝рдЪрди рдмрди рд╕рдХрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ DNS рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛ рд╣реЛрдиреЗ рдкрд░ рднреА рд╕рдмрд╕реЗ рд╕реНрдерд┐рд░ рд╕реЗрд╡рд╛ рдЕрдиреБрдкрд▓рдмреНрдз рд╣реИред  DNS рд╕рд░реНрд╡рд░ рдкрд░ рд▓реЛрдб рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдХрдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ DNS рдХреНрд╡реЗрд░реА рдЙрддреНрдкрдиреНрди рдХрд░реЗрдВрдЧреЗред  рдЕрдиреБрд░реЛрдз рдорд╛рдиреНрдп рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ DNS рд╕рд░реНрд╡рд░ рд╕реЗ рд╕рдмрд╕реЗ рдмрдбрд╝реА рд╕рдВрднрд╡ рдФрд░ рд╕рдмрд╕реЗ рд▓рдВрдмреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред </p><br><p>  <a href="https://www.dns-oarc.net/tools/dnsperf">DNSPerf</a> рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдРрд╕реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИред </p><br><p>  DNSPerf рдПрдХ рд╕рд░рд▓, рд▓рдЪреАрд▓рд╛ рдФрд░ рдореБрдХреНрдд DNS рдкреНрд░рджрд░реНрд╢рди рдкрд░реАрдХреНрд╖рдг рдЙрдкрдХрд░рдг рд╣реИред  рдпрд╣ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ DNS рд╕рд░реНрд╡рд░ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╢рд┐рдВрдЧ рд╕рд░реНрд╡рд░ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдорд╛рдкрдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдзрд┐рдХрд╛рд░рд┐рдХ DNS рд╕рд░реНрд╡рд░ рд▓реЛрдб рдХрд┐рдП рдЧрдП рд╣реИрдВ рдЬреЛ рдПрдХ рдХреНрд╖реЗрддреНрд░ - example.com рдХреА рд╕реЗрд╡рд╛ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  DNSPerf рдХреЗ рд▓рд┐рдП, рд╣рдо рдкрд╣рд▓реЗ <code>dns_queries.txt</code> рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝рд╛рдЗрд▓ рддреИрдпрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ (рдореБрдЦреНрдп рд░реВрдк рд╕реЗ DNS рд╕рд░реНрд╡рд░ рд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╕рдордп рдФрд░ рдЖрдХрд╛рд░ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рднреА): </p><br><pre> <code class="plaintext hljs">#dns_queries.txt example.com ANY www.example.com ANY test.example.com ANY static.example.com ANY example.com  www.example.com  test.example.com MX</code> </pre> <br><p>  рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдЪрд▓рд╛рдиреЗ рдХрд╛ рдЙрджрд╛рд╣рд░рдг: </p><br><pre> <code class="plaintext hljs">dnsperf -s TARGET_IP -d dns_queries.txt -c 100 -n 100 -s =  IP- -d =      .   тАУ stdin -c =   .         -n =  ┬л┬╗   .</code> </pre> <br><p>  <strong>2. рдЖрдИрд╕реАрдПрдордкреА рдкрд░ рд╣рдорд▓рд╛</strong> </p><br><p>  рдкрд░реАрдХреНрд╖рдг рдХрд╛ рдЕрдЧрд▓рд╛ рдЪрд░рдг рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдЖрдИрд╕реАрдПрдордкреА рдпрд╛рддрд╛рдпрд╛рдд рдХреЗ рдкреНрд░рддрд┐рд░реЛрдз рдХрд╛ рдЖрдХрд▓рди рдХрд░рдирд╛ рд╣реИред  рдЪреВрдВрдХрд┐, рддрдХрдиреАрдХреА рдХрд╛рд░рдгреЛрдВ рд╕реЗ, рд╕рд░реНрд╡рд░ рдХреЛ рдЕрдХреНрд╕рд░ рдкрд┐рдВрдЧ-рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдкрд┐рдВрдЧ-рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреАрдбреАрдУрдПрд╕ рд╣рдорд▓реЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╣реЛрддреА рд╣реИред  <code>ping-to-death</code> рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдХреЛ рдмрд╛рд╣рд░ рдХрд░рдиреЗ рд╡рд╛рд▓реА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдкрдХреЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рд╕рд░реНрд╡рд░ рдЖрдИрд╕реАрдПрдордкреА рд▓реЛрдб рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рд░реЛрдзреА рд╣реИрдВред  рдЗрд╕ рддрд░рд╣ рдХреЗ рднрд╛рд░ рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдкреНрд░рд╕рд┐рджреНрдз <a href="https://linux.die.net/man/8/hping3">hping3</a> рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЛ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛, рднрд╛рд╡рдирд╛рдУрдВ рдХреЗ рдмреАрдЪ рдХреЗ рдЕрдВрддрд░рд╛рд▓, рд╕рд╛рде рд╣реА рдкреИрдХреЗрдЯ рдХреЗ рдЖрдХрд╛рд░ рдХреЛ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </p><br><p>  рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдЪрд▓рд╛рдиреЗ рдХрд╛ рдЙрджрд╛рд╣рд░рдг: </p><br><pre> <code class="plaintext hljs">hping3 -i u1000 -d 1500 -c 100000 -1 TARGET_IP -i u100 =     (uX for X microseconds) -d 1500 =    -c 1000000 =     -1 =  ICMP</code> </pre> <br><p>  <strong>3. HTTP рдкрд░ рд╣рдорд▓рд╛</strong> </p><br><p>  рдЕрдм рд╣рдо рддрдирд╛рд╡ рдкреНрд░рддрд┐рд░реЛрдз рдХреА рд╕реЗрд╡рд╛ рдХреА рдореБрдЦреНрдп рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ - HTTP (рдПрд╕) рдХреЗ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреА рдЬрд╛рдБрдЪ рдХрд░рддреЗ рд╣реИрдВред  HTTP рдЯреНрд░реИрдлрд╝рд┐рдХ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рд▓рдЪреАрд▓рд╛ рдФрд░ рдЖрд╕рд╛рди рдЙрдкрдХрд░рдг рд╣реИред  рдШреЗрд░рд╛рдмрдВрджреА рдПрдХ рдУрдкрди-рд╕реЛрд░реНрд╕ рдорд▓реНрдЯреА-рдереНрд░реЗрдбреЗрдб рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╡реЗрдм рд╕рдВрд╕рд╛рдзрди рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><p>  DNSPerf рдХреА рддрд░рд╣, рдШреЗрд░рд╛рдмрдВрджреА рдЖрдкрдХреЛ рд╕рд░реНрд╡рд░ рдХреЛ рджрд┐рдП рдЧрдП рд╡рд░реНрдЪреБрдЕрд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рд╕реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рд╕рд╛рде рд▓реЛрдб рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдЙрддреНрд╕рд░реНрдЬрди рдПрдХ рдЕрд▓рдЧ рдкреЛрд░реНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ), рд╕рд╛рде рд╣реА рд╕рд╛рде рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рдкреВрд░реНрд╡рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╕реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред  рдпрд╣ рдмрд╣реБрдд рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЖрдк рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрд╕рд╛рдзрди-рдЧрд╣рди рдкреНрд░рд╢реНрдиреЛрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдЪрд▓рд╛рдиреЗ рдХрд╛ рдЙрджрд╛рд╣рд░рдг: </p><br><pre> <code class="plaintext hljs">siege -b -c 100 -f test_urls.txt -b =   ( benchmark) -c =   .         -f =   </code> </pre> <br><p>  рд╕рд╛рдордЧреНрд░реА рдкреНрд░рд╛рд░реВрдк <code>test_urls.txt</code> : </p><br><pre> <code class="plaintext hljs">http://example.com/site/login POST login=username&amp;password=test http://example.com/site/client POST useragent=Mozilla&amp;version=123&amp;date=24May http://example.com/site/order POST user=username&amp;company=ooo&amp;phone=812345678</code> </pre> <br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдореБрдЦреНрдп рд░реВрдк рд╕реЗ POST рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдП рдЧрдП рдереЗ рдЬреЛ рд╕рд░реНрд╡рд░ рд╕рд╛рдЗрдб рдкрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдФрд░ рдЕрдиреНрдп рдкреНрд░рдХрд╛рд░ рдХреЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рд╕рдмрд╕реЗ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдкрд░ рдХрдмреНрдЬрд╛ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдХреЛрдИ рднреА рд╡рд┐рдХрд▓реНрдк IP рд╕реНрдкреВрдлрд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЕрдореЗрдЬрд╝рди рдЗрд╕рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИред  рдкреИрдХреЗрдЬ рдореЗрдВ рдЬреЛ рднреА src_IP рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЙрд╕реЗ рдЙрджрд╛рд╣рд░рдг рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдкрд░ рд╕рд╣реА рдореЗрдВ рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рд╕рднреА рдЙрддреНрдкрдиреНрди рдЕрдиреБрд░реЛрдз рд╡реИрдз рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП - рдЕрдореЗрдЬрд╝реЕрди рдХреА рдбреАрдбреАрдУрдПрд╕ рдиреАрддрд┐ рдмрд╣реБрдд рд╕рдЦреНрдд рд╣реЛрдиреЗ рдХреЗ рд╕рд╛рде-рд╕рд╛рде рдирд┐рд╡рд░реНрддрдорд╛рди рдпрд╛рддрд╛рдпрд╛рдд рдХреА рдХреЛрдИ рд▓рд╣рд░ рдирд╣реАрдВ рд╣реИред  рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдПрдХ рд╕рдордиреНрд╡рд┐рдд рддрдирд╛рд╡ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рддрдХрдиреАрдХреА рд╕рд╣рд╛рдпрддрд╛ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рдХреБрдЫ рджрд┐рди рд▓рдЧрддреЗ рд╣реИрдВ, рдФрд░ рдкрд╣рд▓реЗ "рджреБрд░реНрднрд╛рд╡рдирд╛рдкреВрд░реНрдг" рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рджреМрд░рд╛рди рд╣рдореЗрдВ рдЙрд╕ рдмрдВрджрд░рдЧрд╛рд╣ рдХрд╛ рдкреНрд░рддрд┐рдмрдВрдз рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ рдЬрд╣рд╛рдВ рд╕реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдирд┐рдХрд▓рд╛ рдерд╛, рдФрд░ рдЬрд┐рд╕реЗ рддреБрд░рдВрдд рд╕рдордЭрд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><h3>  рд╣рдорд▓реЛрдВ рдХрд╛ рд╢реБрднрд╛рд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рд┐рдкрд┐рдпреЛрдВ </h3><br><p>  рджреВрд░рд╕реНрде рдкрд░реАрдХреНрд╖рдг рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП, рд╣рдо bash рд╕реНрдХреНрд░рд┐рдкреНрдЯ рддреИрдпрд╛рд░ рдХрд░реЗрдВрдЧреЗ (dns.sh, ping.sh, http.sh) рдЬреЛ рд╡рд╛рдВрдЫрд┐рдд рдкреНрд░рдХрд╛рд░ рдХреЗ рд╣рдорд▓реЗ рдХрд╛ рд╢реБрднрд╛рд░рдВрдн рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдкреЗрд▓реЛрдб рдлрд╛рдЗрд▓реЗрдВ (test_urls.txt, valid_dns_queries.txt)ред </p><br><p>  рдЬрдм рд╣рдо рдпрд╣ рд╕рдм рдПрдбрдмреНрд▓реНрдпреВрдПрд╕ рдЫрд╡рд┐ рдкрд░ рдЕрдкрд▓реЛрдб рдХрд░рддреЗ рд╣реИрдВ (рдЬрд┐рд╕рд╕реЗ рд╕рднреА рдЙрджрд╛рд╣рд░рдг рдмрди рдЬрд╛рдПрдВрдЧреЗ), рддреЛ рдкреНрд░рддреНрдпреЗрдХ рдкрд░реАрдХреНрд╖рд╛ рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреНрд░рд╛рд░реВрдк рдХреА рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рджреВрд░рд╕реНрде рд░реВрдк рд╕реЗ рдЪрд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">ssh instance-amazon 'sudo &lt;stress-script&gt;.sh start &lt;params&gt; &amp;&gt;&gt;stress.log &amp;'</code> </pre> <br><p>  рдЖрд╡рд╢реНрдпрдХ рдкреНрд░рдХрд╛рд░ рдХреА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рд╕реНрдЯреНрд░реЗрд╕- script.sh рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рдкрд░рдо рдЗрд╕реА рдЕрдиреБрд░реВрдк рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИрдВред  Stress.log рдлрд╝рд╛рдЗрд▓ рдореЗрдВ, рд╣рдо рдЪрд▓ рд░рд╣реЗ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдЯреНрд░реИрдХ рдХрд░реЗрдВрдЧреЗред  рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП, рд╣рдо рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рд▓реЙрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ: dns.log, ping.log, http.logред </p><br><p>  рдЙрджрд╛рд╣рд░рдг <code>dns.sh</code> рд╕реНрдХреНрд░рд┐рдкреНрдЯ: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash if [[ ! "$1" =~ ^(start|stop|status)$ ]]; then echo "nothing to do: need argument for stop,start or status" exit 1 fi if [[ "$1" = "start" ]]; then shift dnsperf $@ fi if [[ "$1" = "stop" ]]; then kill $(pidof dnsperf) fi if [[ "$1" = "status" ]]; then if [[ ! "$(pidof dnsperf)" = "" ]]; then echo "dnperf is running with PID $(pidof dnsperf)" ps aux | grep dnsperf else echo "dnsperf is not running" fi fi</span></span></code> </pre> <br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдХреЛрдб рд╕реЗ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рд╢реБрд░реВ рдФрд░ рдмрдВрдж рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рд╕рд╛рде рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ (рдЪрд▓ рд░рд╣рд╛ рд╣реИ / рдирд╣реАрдВ рдЪрд▓ рд░рд╣рд╛ рд╣реИ)ред </p><br><p>  ICMP рдФрд░ HTTP рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рд▓рд┐рдП рд▓рд┐рдкрд┐рдпреЛрдВ рдХреЛ рдПрдХ рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдХреНрд░рдорд╢рдГ hping3 рдФрд░ рдШреЗрд░рд╛рдмрдВрджреА рд╢реБрд░реВ рдХрд░рддреЗ рд╣реБрдП, рдкреИрд░рд╛рдореАрдЯрд░ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рддрд░реНрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдЖрджреЗрд╢реЛрдВ рдХреЗ рдЙрджрд╛рд╣рд░рдг: </p><br><pre> <code class="plaintext hljs">ssh instance-amazon 'sudo dns.sh start -s TARGET_IP -d valid_dns_queries.txt -c 1 -n 100 &amp;&gt;&gt;dns.log &amp;' ssh instance-amazon 'sudo ping.sh start -i u1000 -d 1500 -c 100000 -1 TARGET_IP &amp;&gt;&gt;ping.log &amp;' ssh instance-amazon 'sudo http.sh start -b -c 100 -f test_urls.txt &amp;&gt;&gt; http.log &amp;'</code> </pre> <br><h3>  рдореЙрдирд┐рдЯрд░рд┐рдВрдЧ рд╕реНрдХреНрд░рд┐рдкреНрдЯ </h3><br><p>  рдЖрдЙрдЯрдЧреЛрдЗрдВрдЧ рдЯреНрд░реИрдлрд╝рд┐рдХ рдФрд░ рдкрд░реАрдХреНрд╖рдг рдЕрд╡рд╕рдВрд░рдЪрдирд╛ рдХреА рд╕реНрдерд┐рддрд┐ рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдПрдХ рдирд┐рдЧрд░рд╛рдиреА рдЙрдкрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╕рд░рд▓рддрд╛ рдФрд░ рд╕рдВрд╕рд╛рдзрди рдмрдЪрдд рдХреЗ рдХрд╛рд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП, рд╣рдо iptables рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд▓рд┐рдЦреЗрдВрдЧреЗ рдЬреЛ рднреЗрдЬреЗ рдЧрдП рдПрдордмреА рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдЧрд┐рдирддрд╛ рд╣реИ, рдФрд░ рдЗрд╕реЗ рдПрдбрдмреНрд▓реНрдпреВрдПрд╕ рдЫрд╡рд┐ рдкрд░ рдбрд╛рд▓ рджреЗрддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">#iptables.sh sudo iptables -N TRAFFIC_OUT sudo iptables -A TRAFFIC_OUT -p tcp sudo iptables -A TRAFFIC_OUT -p udp sudo iptables -A TRAFFIC_OUT -p icmp sudo iptables -A OUTPUT -j TRAFFIC_OUT sudo iptables-save</code> </pre> <br><p>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдПрдХ рдирдИ рд╢реНрд░реГрдВрдЦрд▓рд╛ TRAFFIC_OUT рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдЖрд╡рд╢реНрдпрдХ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЗ рд▓рд┐рдП рдЗрд╕рдореЗрдВ рдлрд┐рд▓реНрдЯрд░ рдЬреЛрдбрд╝рддрд╛ рд╣реИ: tcp, udp, icmpред </p><br><p>  TRAFFIC_OUT рдХреЗ рд▓рд┐рдП рдЕрдЧреНрд░реЗрд╖рд┐рдд рдкреИрдХреЗрдЯ рдХреЛ OUTPUT рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рд╣рд╕реНрддрд╛рдВрддрд░рд┐рдд рдбреЗрдЯрд╛ рдХреА рдорд╛рддреНрд░рд╛ рдХрдорд╛рдВрдб рджреНрд╡рд╛рд░рд╛ рдкрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИ: </p><br><pre> <code class="plaintext hljs"># iptables -L TRAFFIC_OUT -v -n -x | tail -n 3 | awk '{print $2/1024/1024,"Mb\t\t\t",$3}' : 2.2 Mb tcp 4.4 Mb udp 3.2 Mb icmp</code> </pre> <br><p>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рд╕реЗрд╡рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рдирд┐рдЧрд░рд╛рдиреАред рд╕реЗрд╡рд╛ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ рдФрд░ рдЗрд╕реЗ рд╣рдорд╛рд░реА рдЫрд╡рд┐ рдХреЗ <code>/etc/systemd/system</code> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs"># /etc/systemd/system/monitoring.service [Unit] After=network.target [Service] ExecStart=/usr/local/bin/monitoring.sh [Install] WantedBy=default.target</code> </pre> <br><p>  рдЕрдм рдЖрдк рд╕реЗрд╡рд╛ рдХреЛ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рд╕реЗ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">systemctl enable monitoring.service systemctl start monitoring.service</code> </pre> <br><h2>  рдЙрджрд╛рд╣рд░рдг рдкреНрд░рдмрдВрдзрди </h2><br><p>  рдЕрдм рд╣рдо рд░рд┐рдореЛрдЯ (рдпрдерд╛рд╕рдВрднрд╡ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд) рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдкреНрд░рдмрдВрдзрди рд╕реЗ рдирд┐рдкрдЯрддреЗ рд╣реИрдВред </p><br><p>  рдЗрди рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП, рдЖрдк <a href="https://aws.amazon.com/ru/cli/">AWS CLI</a> рддрдВрддреНрд░ - рдХрдВрд╕реЛрд▓ рдкреНрд░рдмрдВрдзрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдПрдХ <a href="https://console.aws.amazon.com/iam/home%3Fnc2%3Dh_m_sc">рдЧреБрдкреНрдд рдХреБрдВрдЬреА</a> (рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА (рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА рдЖрдИрдбреА рдФрд░ рдЧреБрдкреНрдд рдПрдХреНрд╕реЗрд╕ рдХреБрдВрдЬреА)) рдмрдирд╛рдПрдВ рдФрд░ рдХрдВрд╕реЛрд▓ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред </p><br><p>  рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЦрд╛рддреЗ рдХреА рд╕рднреА рд╕реБрд╡рд┐рдзрд╛рдУрдВ рддрдХ рдкрд╣реБрдВрдЪ рд╣реИред </p><br><p>  AWS рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЦрд╝рд╛рд╕рд┐рдпрдд рдпрд╣ рд╣реИ рдХрд┐ рд╕рднреА рдХреНрд░рд┐рдпрд╛рдПрдВ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХреНрд╖реЗрддреНрд░ рдХреЗ рд▓рд┐рдП рдХреА рдЬрд╛рддреА рд╣реИрдВ рдФрд░ рдпрджрд┐ рдХрдИ рдХреНрд╖реЗрддреНрд░ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ рддреЛ рдЙрдиреНрд╣реЗрдВ рджреЛрд╣рд░рд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдИ рдЧрдИ рдЫрд╡рд┐ рд╕реЗ рдПрдХ рдирдпрд╛ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП (рд╣рдо рдорд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдПрдХ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЕрдореА-рдЖрдИрдбреА рд╣реИ рдЬреЛ рд╣рдо рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ), рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд░реЗрдВрдЧреЗ: </p><br><ul><li>  SSH рдХреБрдВрдЬреА рдмрдирд╛рдПрдВ рдФрд░ рдЙрд╕реЗ AWS рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ: </li></ul><br><pre> <code class="bash hljs">yes n |ssh-keygen -q -t rsa -f <span class="hljs-variable"><span class="hljs-variable">$KEYNAME</span></span> -m pem -N <span class="hljs-string"><span class="hljs-string">""</span></span> &gt; /dev/null chmod 400 <span class="hljs-variable"><span class="hljs-variable">$KEYNAME</span></span> aws ec2 import-key-pair --region <span class="hljs-variable"><span class="hljs-variable">$REGION</span></span> --key-name <span class="hljs-variable"><span class="hljs-variable">$KEYNAME</span></span> --public-key-material file:///$(<span class="hljs-built_in"><span class="hljs-built_in">pwd</span></span>)/<span class="hljs-variable"><span class="hljs-variable">$KEYNAME</span></span>.pub</code> </pre> <br><ul><li>  SSH рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдорд╢реАрди рддрдХ рдкрд╣реБрдБрдЪ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ рд╡рд╛рд▓рд╛ рдПрдХ рд╕реБрд░рдХреНрд╖рд╛-рд╕рдореВрд╣ рдмрдирд╛рдПрдБред  рдЕрдиреНрдпрдерд╛, рдЖрдиреЗ рд╡рд╛рд▓реЗ SSH рдХрдиреЗрдХреНрд╢рди рдХреЛ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: </li></ul><br><pre> <code class="bash hljs">SECURITY=<span class="hljs-string"><span class="hljs-string">"ssh-group"</span></span> aws ec2 create-security-group --region <span class="hljs-variable"><span class="hljs-variable">$REGION</span></span> --group-name <span class="hljs-variable"><span class="hljs-variable">$SECURITY</span></span> --description <span class="hljs-string"><span class="hljs-string">"Just ssh. Nothing more"</span></span> IP_RANGE=<span class="hljs-string"><span class="hljs-string">"0.0.0.0/24"</span></span> aws ec2 authorize-security-group-ingress --region <span class="hljs-variable"><span class="hljs-variable">$REGION</span></span> --group-name <span class="hljs-variable"><span class="hljs-variable">$SECURITY</span></span> --protocol tcp --port 22 --cidr <span class="hljs-variable"><span class="hljs-variable">$IP_RANGE</span></span></code> </pre> <br><ul><li>  рдкрд╣рд▓реЗ рд╕реЗ рдмрдирд╛рдИ рдЧрдИ рдХреБрдВрдЬреА рдФрд░ рд╕реБрд░рдХреНрд╖рд╛-рд╕рдореВрд╣ рдХреЗ рд╕рд╛рде рдПрдХ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдПрдВ рдФрд░ рдЫрд╡рд┐ рдЖрдИрдбреА рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВред  рдПрдХ рд╕рдордп рдореЗрдВ рдирд┐рд░реНрдорд┐рдд рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдордирдорд╛рдиреА рд╣реЛ рд╕рдХрддреА рд╣реИ: </li></ul><br><pre> <code class="bash hljs">IMG=<span class="hljs-string"><span class="hljs-string">'ami-0d0eaed20348a3389'</span></span> NUM=1 aws ec2 run-instances --region <span class="hljs-variable"><span class="hljs-variable">$REGION</span></span> --image-id <span class="hljs-variable"><span class="hljs-variable">$IMG</span></span> --count <span class="hljs-variable"><span class="hljs-variable">$NUM</span></span> --instance-type t2.micro --key-name <span class="hljs-variable"><span class="hljs-variable">$KEYNAME</span></span> --security-groups default <span class="hljs-variable"><span class="hljs-variable">$SECURITY</span></span> &gt; instances.json</code> </pre> <br><ul><li>  рдорд╢реАрди рд╢реБрд░реВ рд╣реЛрдиреЗ рддрдХ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВред  рдЗрд╕рдореЗрдВ рдХреБрдЫ рд╕рдордп рд▓рдЧрддрд╛ рд╣реИ: рдкрд╣рд▓реЗ рд╣рдореЗрдВ рд╕рдлрд▓рддрд╛ рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдорд┐рд▓рддреА рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП)ред рд▓реЗрдХрд┐рди рдЙрд╕ рд╕рдордп рдорд╢реАрди рд╕рд┐рд░реНрдл рдмрдирд╛рдИ рдЧрдИ рдереА, рд▓реЗрдХрд┐рди рдЕрднреА рддрдХ рд╢реБрд░реВ рдирд╣реАрдВ рд╣реБрдИ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЗрд╕реЗ рдЕрднреА рддрдХ рдПрдХ рдЖрдИрдкреА рдкрддрд╛ рдирд╣реАрдВ рд╕реМрдВрдкрд╛ рдЧрдпрд╛ рд╣реИ)ред  рд▓реЙрдиреНрдЪ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдВрддрдЬрд╛рд░ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ (рдЖрдорддреМрд░ рдкрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рдорд┐рдирдЯ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ)ред </li></ul><br><p>  рдпрджрд┐ рдЖрдк рдЖрдИрдкреА рдПрдбреНрд░реЗрд╕ рдЬрд╛рдирддреЗ рд╣реИрдВ рддреЛ рдЖрдк рдПрд╕рдПрд╕рдПрдЪ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬреБрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдмрд╕ рдЙрди рдорд╢реАрдиреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░реЗрдВ рдЬреЛ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдЪрд▓ рд░рд╣реА рд╣реИрдВред  рдЙрдирдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдореЗрдВ рд╣рдо PublicDnsName рдпрд╛ PublicIpAddress рдкрд╛рддреЗ рд╣реИрдВред </p><br><pre> <code class="bash hljs">aws ec2 describe-instances --region</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдмрд╛рдж, рд╣рдо SSH рдХрдорд╛рдВрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рдКрдкрд░ рдмрдирд╛рдИ рдЧрдИ SSH рдХреБрдВрдЬреА рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">ssh -I $KEYNAME -oStrictHostKeyChecking=no ubuntu''+ins_dns echo''O''</code> </pre> <br><p>  рдПрд╕рдПрд╕рдПрдЪ-рдХрдорд╛рдВрдб рдЖрдкрдХреЛ рд╣рдорд▓реЗ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдФрд░ рд╣рдорд▓реЗ рдХреА рд╕реНрдерд┐рддрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рд╣рдордиреЗ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдФрд░ рдЯреВрд▓ рдХреЗ рд╕рд╛рде рдЙрджрд╛рд╣рд░рдг рдкреНрд░рджрд╛рди рдХрд┐рдП рд╣реИрдВред </p><br><p>  рдЖрдкрдХреЛ рдпрд╣ рд╕рдордЭрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рд╕реЗрд╡рд╛ рд╣рдорд▓реЛрдВ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рдЦрд┐рд▓рд╛рдл рдЕрдзрд┐рдХрд╛рдВрд╢ рдмрдЪрд╛рд╡ рдЖрдИрдкреА рдкрддреЗ рдХреЛ рд░реЛрдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕рд╕реЗ рдХрдИ рдЕрдиреБрд░реЛрдз рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреЗ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рд╣рдорд▓реЗ рдХреА рд╢рдХреНрддрд┐ рдХреЛ рдмрдирд╛рдП рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ рдХреЗ рдЖрдИрдкреА рдкрддреЗ рд▓рдЧрд╛рддрд╛рд░ рдмрджрд▓рддреЗ рд░рд╣рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рд░ рдорд╢реАрди рд╢реБрд░реВ рд╣реЛрдиреЗ рдкрд░ AWS рдПрдХ рдирдпрд╛ IP рдкрддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдЖрдИрдкреА рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдорд╢реАрди рдХреЛ рдлрд┐рд░ рд╕реЗ рдЪрд╛рд▓реВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рдЗрд╕реЗ рд╣рдЯрд╛рдиреЗ рдХреА рдХреЛрдИ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ!)ред </p><br><p>  рдмрдВрдж рдХрд░рдиреЗ рдФрд░ рд╣рдЯрд╛рдиреЗ рдХреЗ рдмреАрдЪ рдХрд╛ рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рд╣рдо рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рд┐рдЧреНрдирд▓ рднреЗрдЬрддреЗ рд╣реИрдВред  рдмрдВрдж рдХрд░рдирд╛ - рдмрдВрдж рдХрд░рдирд╛, рд╕рдорд╛рдкреНрдд рдХрд░рдирд╛ - рдмрдВрдж рдХрд░рдирд╛ рдФрд░ рддреБрд░рдВрдд рд╣рдЯрд╛рдирд╛ред </p><br><p>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдкрд░ рдирдЬрд╝рд░ рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдирд┐рдореНрди рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдЖрдИрдбреА рдХреЗ рд╕рд╛рде рдХрд░рддреЗ рд╣реИрдВ: рдЯреНрд░реИрдлрд╝рд┐рдХ рдорд╛рдк рдХрдм рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рдХрдм рд╕рдорд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ, рдХрд┐рд╕ рдЕрд╡рдзрд┐ рдХреЗ рд▓рд┐рдП рдорд╛рдиреЛрдВ рдХреЛ рд╕рд╛рд░рд╛рдВрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: </p><br><pre> <code class="bash hljs">aws cloudwatch get-metric-statistics --region REGION --namespace AWS/EC2 \ --statistics Sum --metric-name NetworkIn --start-time <span class="hljs-variable"><span class="hljs-variable">$STARTTIME</span></span> --end-time <span class="hljs-variable"><span class="hljs-variable">$FINISHTIME</span></span> --period <span class="hljs-variable"><span class="hljs-variable">$PERIOD</span></span> --dimensions Name=InstanceId,Value=<span class="hljs-variable"><span class="hljs-variable">$INCTANCEID</span></span></code> </pre> <br><h1>  рд╕реЗрд╡рд╛ рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреА рдирд┐рдЧрд░рд╛рдиреА </h1><br><p>  рдЗрд╕рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд, рдПрдХ рд╣рдорд▓реЗ рдХрд╛ рд╕рдВрдЪрд╛рд▓рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдпрд╣ рджреЗрдЦрдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рд╣рдо рдЬрд┐рд╕ рд╕реЗрд╡рд╛ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░ рд░рд╣реЗ рд╣реИрдВ рд╡рд╣ рдЬреАрд╡рд┐рдд рд╣реИ рдпрд╛ рдирд╣реАрдВред </p><br><p>  рд╣рдо рд╕рд░рд▓ "рдкрд┐рдВрдЧ" рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдирд╛рддреЗ рд╣реИрдВ рдФрд░ рдЪрд▓рд╛рддреЗ рд╣реИрдВ рдЬреЛ рд▓рдХреНрд╖реНрдп рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдХреА рдЙрдкрд▓рдмреНрдзрддрд╛ (рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ 53 рдФрд░ 80) рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдирдореВрдирд╛ рдкрд╛рдпрдерди рдХреЛрдб рдЬреЛ рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреА рдЬрд╛рдБрдЪ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">http</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(url)</span></span></span><span class="hljs-function">:</span></span> cmd = [<span class="hljs-string"><span class="hljs-string">'curl'</span></span>, <span class="hljs-string"><span class="hljs-string">'-w'</span></span>, <span class="hljs-string"><span class="hljs-string">'"%{time_total}"'</span></span>, <span class="hljs-string"><span class="hljs-string">'-o'</span></span>, <span class="hljs-string"><span class="hljs-string">'/dev/null'</span></span>, <span class="hljs-string"><span class="hljs-string">'-s'</span></span>, url] result = check_output(cmd).decode(<span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>) result = float(json.loads(result)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result * <span class="hljs-number"><span class="hljs-number">1000000</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dns</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ip, domain)</span></span></span><span class="hljs-function">:</span></span> cmd = [<span class="hljs-string"><span class="hljs-string">'dig'</span></span>, <span class="hljs-string"><span class="hljs-string">'any'</span></span>, <span class="hljs-string"><span class="hljs-string">'@'</span></span>+ip, domain ] result = check_output(cmd).decode(<span class="hljs-string"><span class="hljs-string">'utf-8'</span></span>) result = int(result.split(<span class="hljs-string"><span class="hljs-string">'Query time:'</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>].split(<span class="hljs-string"><span class="hljs-string">'msec'</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result</code> </pre> <br><p>  рдкреНрд░рд╛рдкреНрдд рдЬрд╛рдирдХрд╛рд░реА рдПрдХ рд▓реЙрдЧ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХреА рдЬрд╛рддреА рд╣реИ, рдЬрд┐рд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рд╣рдорд▓реЗ рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рд╕рдВрд╕рд╛рдзрди рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреЗ рдЧреНрд░рд╛рдл рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛ред </p><br><p>  рдкрд░реАрдХреНрд╖рдг рдХреЗ рджреМрд░рд╛рди, "рдкрд┐рдВрдЧ" рд▓реЙрдЧ рдХреЛ рд▓рдЧрд╛рддрд╛рд░ рдЬрд╛рдВрдЪрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рддрд╛рдХрд┐ рд╕рдВрд╕рд╛рдзрди рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдФрд░ рдЕрдкрд░рд┐рд╡рд░реНрддрдиреАрдп рд░реВрдк рд╕реЗ рдорд╛рд░ рди рд╕рдХреЗрдВред  рдЬреИрд╕реЗ рд╣реА рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЧрд┐рд░рд╛рд╡рдЯ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИ рдФрд░ рдЕрдиреБрд░реЛрдз рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕рдордп рд▓рдЧрддрд╛ рд╣реИ, рд╣рдорд▓реЗ рдХреЛ рд░реЛрдХрдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдпрджрд┐ рдордВрджреА рд╕реБрд╕реНрдд рд╣реИ, рдФрд░ рд╣рдорд▓реЗ рдХреА рд╢рдХреНрддрд┐ рдЕрдзрд┐рдХрддрдо рд╕реНрдерд╛рдкрд┐рдд рд╣реЛ рдЧрдИ рд╣реИ, рддреЛ рдпрд╣ рдПрдХ рдпрд╛ рджреЛ рдорд┐рдирдЯ рдЗрдВрддрдЬрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИ, рдФрд░ рдпрджрд┐ рд╕реЗрд╡рд╛ рдмрд┐рдирд╛ рдХрд┐рд╕реА рд░реБрдХрд╛рд╡рдЯ рдХреЗ рдХрд╛рдо рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦрддреА рд╣реИ, рддреЛ рдЪреЗрдХ рдХреЛ рд╕рдлрд▓ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><h1>  рд╡рд┐рддреНрддреАрдп рдореБрджреНрджрд╛ </h1><br><p>  рдпрд╣ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд╕рдВрдЧрдарди рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдПрдХ рдФрд░ рдореБрджреНрджреЗ рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рд╣реИ - рдЗрд╕ рдкреВрд░реЗ рдЖрдпреЛрдЬрди рдХреА рд▓рд╛рдЧрддред </p><br><p>  рдЕрдореЗрдЬрд╝реЕрди рд╡рд┐рд╕реНрддреГрдд рдореВрд▓реНрдп рдирд┐рд░реНрдзрд╛рд░рдг рдХреА рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдкрдХреЛ рдпрд╣ рд╕рдордЭрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдЖрдкрдХреЛ рд▓рдЧрднрдЧ рд╣рд░ рдЪреАрдЬ рдХреЗ рд▓рд┐рдП рднреБрдЧрддрд╛рди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдлрд┐рд░ рднреА, рдХрдИ рдЧрдгрдирд╛рдУрдВ рдХреА рдЙрдкреЗрдХреНрд╖рд╛ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рдпрд╛рддрд╛рдпрд╛рдд рдХреА рд▓рд╛рдЧрдд рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ (рдпрд╣ рдХреНрд╖реЗрддреНрд░ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЬрд╛рдирдХрд╛рд░реА рдХреА рдХреБрд▓ рд░рд╛рд╢рд┐ рдкреНрд░реЗрд╖рд┐рдд рдХреА рдЬрд╛рдПрдЧреА) рдФрд░ рдХрд┐рд░рд╛рдП рдкрд░ рджреЗрдиреЗ рдХреА рд▓рд╛рдЧрдд (рдкреНрд░рддрд┐ рдорд┐рдирдЯ рднреБрдЧрддрд╛рди)ред  рдпреЗ рдЖрдЗрдЯрдо рдкреВрд░реЗ рд╣рдорд▓реЗ рдХреА рд▓рд╛рдЧрдд рдХрд╛ рд▓рдЧрднрдЧ 99% рдмрдирд╛рддреЗ рд╣реИрдВред </p><br><p>  рдЗрд╕рд▓рд┐рдП, рд╣рдорд▓реЗ рдХреА рд▓рд╛рдЧрдд рдХреА рдЧрдгрдирд╛ рдкреНрд░рддреНрдпреЗрдХ рдорд╛рдорд▓реЗ рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдХреА рдЬрд╛рддреА рд╣реИ, рдЬреЛ [рд╢рддреНрд░реБрддрд╛ рдХреЗ рдкреИрдорд╛рдиреЗ] рдЕрдзрд┐рдХрддрдо рдЖрдХреНрд░рдордг рд╢рдХреНрддрд┐ рдФрд░ рдирд┐рдпреЛрдЬрд┐рдд рд▓реЙрдиреНрдЪ рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЧрдгрдирд╛ рдХреЗ рд╕рд░рд▓реАрдХрд░рдг рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, рдЕрдореЗрдЬрд╝реЕрди рдЦрд╛рддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИ, рдЬреЛ рдПрдХ рд╕рд╛рд▓ рдкрд╣рд▓реЗ рд╕реЗ рдЕрдзрд┐рдХ рдкрдВрдЬреАрдХреГрдд рдирд╣реАрдВ рдерд╛ред  рдлрд┐рд░ рд╕рдВрдЪрд╛рд▓рди рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдореБрдХреНрдд рд╣реЛ рдЬрд╛рдПрдЧрд╛ред  рдореБрдлреНрдд рдЙрдкрдпреЛрдЧ рд╕реАрдорд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА <a href="https://aws.amazon.com/ru/free/%3Fall-free-tier.sort-by%3Ditem.additionalFields.SortRank%26all-free-tier.sort-order%3Dasc">рдпрд╣рд╛рдБ</a> рдкрдврд╝реЗрдВред </p><br><p>  рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреА рд▓рд╛рдЧрдд рдХреА рдЧрдгрдирд╛ рдХреЛ рд╕реНрдкрд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдорд╛рди рд▓реЗрдВ рдХрд┐ рд╣рдо DNS рд╕рд░реНрд╡рд░ рдХреА рд╕реНрдерд┐рд░рддрд╛ рдХреЛ 10 рдЬреАрдмреА / рдПрд╕ рдХреЗ рд▓реЛрдб рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </p><br><p>  рд╣рдо рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдореБрдВрдмрдИ рдореЗрдВ рд▓реЙрдиреНрдЪ рдХрд┐рдП рдЧрдП рдЙрдкрдХрд░рдг рдФрд░ t3.small рдЙрджрд╛рд╣рд░рдг рдХреА рдХреНрд╖рдорддрд╛рдПрдБ рдЖрдкрдХреЛ рдПрдХ рд░рдирд┐рдВрдЧ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╕реЗ 500 рдПрдордмреА / рдПрд╕ рдЬрд╛рд░реА рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИрдВред  рдПрдХ рдЗрдХрд╛рдИ рдХреЛ рдХрд┐рд░рд╛рдП рдкрд░ рд▓реЗрдиреЗ рдХреА рдХреАрдордд $ 0.0224 рдкреНрд░рддрд┐ рдШрдВрдЯреЗ рд╣реИ, рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЗ рд▓рд┐рдП - 1 рдЬреАрдмреА рдХреЗ рд▓рд┐рдП $ 0.01093ред  рдпрд╣реА рд╣реИ, рд╣рдорд▓реЗ рдХреЗ рд╢рд┐рдЦрд░ рдХрд╛ рдЕрд░реНрде рд╣реИ 20 рд╕рдВрд╕реНрдерд╛рдУрдВ рдХрд╛ рдПрдХ рд╕рд╛рде рд╕рдВрдЪрд╛рд▓рдиред </p><br><p>  рд╣рдо рдзреАрд░реЗ-рдзреАрд░реЗ рд╣рдорд▓реЗ рдХреА рд╢рдХреНрддрд┐ рдмрдврд╝рд╛рдПрдВрдЧреЗ, рдЗрд╕рдХреЗ рд▓рд┐рдП рд╣рдо рдкрд╣рд▓реЗ рдПрдХ рдЗрдХрд╛рдИ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рдлрд┐рд░ рдкреНрд░рддреНрдпреЗрдХ 60 рдПрд╕ рдореЗрдВ рдПрдХ рдФрд░ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред </p><br><p>  рд▓рд╛рдЧрдд рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХрд╛ рдлрд╛рд░реНрдореВрд▓рд╛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: </p><br><pre> <code class="plaintext hljs">60  * (   ) + 60  * 0,5 /c * (  ) =       60 . 1 * (    ) + 2 * (    ) + ... + 20 * (    ) =   </code> </pre> <br><p>  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдПрдХ DNS рд╕рд░реНрд╡рд░ рдХреЗ рд▓рд┐рдП 10 Gb / s рдХреА рдХреНрд╖рдорддрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рд╣рдорд▓реЗ рдХреА рд▓рд╛рдЧрдд рд▓рдЧрднрдЧ $ 70 рд╣реИред  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрд╣ рдПрдХ рдореЛрдЯрд╛ рдЕрдиреБрдорд╛рди рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╛рддрд╛рдпрд╛рдд рдХреА рдорд╛рддреНрд░рд╛ рдХрд╛ рд╕рдЯреАрдХ рдЕрдиреБрдорд╛рди рдирд╣реАрдВ рд▓рдЧрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред      <a href="https://aws.amazon.com/ru/ec2/pricing/on-demand/"></a> .  ,   тАУ    ,     . </p><br><p>       .          . </p><cut></cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi481756/">https://habr.com/ru/post/hi481756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi481746/index.html">рд╕реАрдПрд▓рдЖрдИ рдореЗрдВ рдкрд░реНрдпрд╛рд╡рд░рдг рдХреА рд╕реНрдерд╛рдкрдирд╛ред рдбрдмреНрд▓реВрдПрд╕рдПрд▓ / рд╡рд┐рдВрдбреЛрдЬ рдЯрд░реНрдорд┐рдирд▓</a></li>
<li><a href="../hi481748/index.html">рдЖрд░реНрдореЗрдирд┐рдпрд╛ рдореЗрдВ рд▓рд╛рдн рдкреИрдХреЗрдЬ: рдмреАрдорд╛ рдФрд░ рд░реЗрдлрд░рд▓ рдмреЛрдирд╕ рд╕реЗ рд▓реЗрдХрд░ рдорд╛рд▓рд┐рд╢ рдФрд░ рдЛрдг</a></li>
<li><a href="../hi481750/index.html">рдЯрд╛рд╕реНрдХ рдирдВрдмрд░ 3ред рдбреЗрдЯрд╛ рд░реВрдкрд╛рдВрддрд░рдг рдФрд░ рддреГрддреАрдп-рдкрдХреНрд╖ рд╕реЗрд╡рд╛рдУрдВ рдкрд░ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ</a></li>
<li><a href="../hi481752/index.html">рднрд╛рд╖рд╛ рд╕рд░реНрд╡реЗрдХреНрд╖рдг рдХреЗ рдкрд░рд┐рдгрд╛рдо</a></li>
<li><a href="../hi481754/index.html">рдореБрдЭреЗ рдмреЙрдЯ рдФрд░ рдореЗрд░реЗ awl</a></li>
<li><a href="../hi481758/index.html">рдЖрдИрдПрд╕рдПрд╕ рдХреЗ рдирд┐рд░реНрдорд╛рдг, рдЖрдкреВрд░реНрддрд┐ рдФрд░ рдпрд╛рддреНрд░рд╛рдУрдВ рдХреЗ рдЖрдВрдХрдбрд╝реЗ</a></li>
<li><a href="../hi481762/index.html">рдХреНрд░рд┐рд╕рдорд╕ рдХреЗ рдкреЗрдбрд╝ рдХреЗ рдиреАрдЪреЗ рд░рд╕реЛрдИ рдХреЗ рд▓рд┐рдП рд╕рдореАрдХрд░рдг</a></li>
<li><a href="../hi481764/index.html">рд╣рд░рд┐рдд рдКрд░реНрдЬрд╛ рдХреЗ рдкрд╛рд╕ рдХрдард┐рди рднрд╡рд┐рд╖реНрдп рдХреНрдпреЛрдВ рд╣реИ?</a></li>
<li><a href="../hi481768/index.html">рд╣рдо 1C рдореЗрдВ WebKit рд╕реЗ рдирд┐рдкрдЯрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, TinyMCE рдХрд╛ рдПрдХреАрдХрд░рдг UT 11 рдореЗрдВ рдПрдХ рдкреНрд░рдмрдВрдзрд┐рдд рд░реВрдк рдореЗрдВ</a></li>
<li><a href="../hi481772/index.html">VonmoTrade рдкреНрд░рдпреЛрдЧред рднрд╛рдЧ 2: рдЖрджреЗрд╢ред рдкреНрд░рдХрд╛рд░, рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рд╕реБрд╡рд┐рдзрд╛рдПрдБ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>