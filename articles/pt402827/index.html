<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèª‚Äçüåæ üÜî ü§ö Como usar as ferramentas Twilio, Python e Google para automatizar seu casamento üîí üëÖ ‚úçüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O autor do artigo conta como ele conseguiu aplicar habilidades de programa√ß√£o para automatizar os processos de rotina de seu pr√≥prio evento de casamen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como usar as ferramentas Twilio, Python e Google para automatizar seu casamento</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wirex/blog/402827/">  <i>O autor do artigo conta como ele conseguiu aplicar habilidades de programa√ß√£o para automatizar os processos de rotina de seu pr√≥prio evento de casamento.</i> <br><br>  Para a maioria das pessoas, 3 de setembro de 2016 foi o s√°bado mais comum, mas na minha mem√≥ria essa data permanecer√° para sempre, porque foi nesse dia que eu e minha esposa fizemos um casamento. <br><br><img src="https://habrastorage.org/files/38f/a56/92c/38fa5692cb0b44e5886d66d912a39b87.jpg" alt="imagem"><br><br>  Ao planejar um casamento, voc√™ precisa considerar muitos pontos: comida, decora√ß√£o e decora√ß√£o, lumin√°rias de mesa (sim, separados da decora√ß√£o), flores, acomoda√ß√µes, transporte, entretenimento e a escolha do local.  Em geral, ao planejar um casamento, voc√™ se depara com muitas inc√≥gnitas, mas eu tinha certeza de uma coisa: nenhum casamento pode ficar sem um monte de listas, listas aninhadas que n√£o terminam at√© o fim.  Quanto mais listas flutuavam diante dos meus olhos, mais frequentemente eu come√ßava a pensar em como melhorar o processo de prepara√ß√£o.  Foi dolorosamente ineficiente e todo o trabalho foi realizado manualmente.  Eu tinha certeza de que a tecnologia certamente poderia ajudar a melhorar pelo menos alguns dos pontos. <br><a name="habracut"></a><br>  Voc√™ pode se surpreender ao saber que convidar pessoas para um casamento √© caro (mais de 380 libras por pessoa).  Primeiro, voc√™ precisa enviar convites preliminares com uma data e uma notifica√ß√£o curta, e somente ent√£o - de pleno direito, com uma descri√ß√£o mais detalhada do evento.  Al√©m disso, tudo isso √© enviado por correio, o que significa que √© lento.  As tentativas de "pegar" os convidados e obter uma resposta deles sobre se eles querem vir para o feriado com comida e bebida gratuitas (embora, ao que parece, quem n√£o quer?!) Demorem muito tempo.  E, finalmente, enviar convites n√£o √© ecologicamente correto, porque os cart√µes de papel s√£o uma coisa √∫nica, eles rapidamente esquecem e se tornam in√∫teis para qualquer pessoa. <br><br>  Mas voltando √†s listas.  Dividimos os h√≥spedes em v√°rios grupos: <br><br><ol><li>  Aqueles que voc√™ gostaria de ver no festival </li><li>  Aqueles que responderam ao segundo convite pedindo uma resposta </li><li>  Quem aceitou o convite </li><li>  Quem aceitou o convite e escolheu comida </li></ol><br>  Mas eu gosto das listas: eles t√™m alguns requisitos predefinidos que os transformam em um √≥timo objeto para automa√ß√£o. <br><br><h3>  Mensagem na garrafa </h3><br>  Eu tinha certeza de que todos os h√≥spedes em potencial, independentemente da idade, tinham um telefone celular, o que significava que chegara a hora de Twilio.  O c√≥digo fornecido aqui pode ser ignorado com seguran√ßa, se voc√™ desejar, pois est√° sempre dispon√≠vel no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio GitHub</a> correspondente. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O SMS</a> como um canal de comunica√ß√£o atendeu perfeitamente √†s minhas necessidades.  Eu poderia configurar o envio em massa de mensagens, processando as respostas de maneira r√°pida e eficiente.  Fazendo os primeiros esbo√ßos de trabalho do produto e considerando as op√ß√µes do banco de dados, tentei fazer algo simples que pudesse ser facilmente compartilhado e n√£o quisesse dedicar muito tempo √† apar√™ncia.  No final, me deparei com a biblioteca python gspread, que me permitia ler e escrever nas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tabelas do Google</a> .  Essa n√£o era a op√ß√£o mais r√°pida, mas bastante flex√≠vel, o que tornava f√°cil o acesso a tabelas e a leitura dos resultados. <br><br>  Para o primeiro prompt, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">criei uma tabela</a> com tr√™s colunas: <br><br><ul><li>  Nome </li><li>  N√∫mero de telefone </li><li>  Status da confirma√ß√£o (status de confirma√ß√£o) </li><li>  Status de detalhes do contato </li><li>  Message_count (o n√∫mero de mensagens enviadas ao convidado foi √∫til no futuro) </li></ul><br>  Depois de concluir a entrada de dados b√°sicos, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">executei a</a> lista atrav√©s do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gspread</a> , que enviou um SMS para cada h√≥spede que possui um n√∫mero de celular: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gspread <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> oauth2client.client <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SignedJwtAssertionCredentials <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> twilio.rest <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TwilioRestClient <span class="hljs-comment"><span class="hljs-comment">#      #     json,    json_key = json.load(open('.json')) scope = ['https://spreadsheets.google.com/feeds'] credentials = SignedJwtAssertionCredentials(json_key['client_email'], json_key['private_key'].encode(), scope) gc = gspread.authorize(credentials) wks = gc.open("wedding_guests") #     workbook- wks_attendees = wks.get_worksheet(0) #     ACCOUNT_SID = 'TWILIO_ACCOUNT_SID' AUTH_TOKEN = 'TWILIO_AUTH_TOKEN' client = TwilioRestClient(ACCOUNT_SID, AUTH_TOKEN) #    ,   range    for num in range(2, 60): print "sleeping for 2 seconds" time.sleep(2) #         guest_number = wks_attendees.acell('B'+str(num)).value guest_name = wks_attendees.acell('A'+str(num)).value Message_body = &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2709&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; Save the date! &lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2709&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;Lauren Pang and Thomas Curtis are delighted to invite you to our wedding.&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;Saturday 3rd September 2016. &lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;Colville Hall,&lt;span class="pl-cce"&gt;\n&lt;/span&gt;Chelmsford Road,&lt;span class="pl-cce"&gt;\n&lt;/span&gt;White Roding,&lt;span class="pl-cce"&gt;\n&lt;/span&gt;CM6 1RQ.&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;The Ceremony begins at 2pm.&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;More details will follow shortly!&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;Please text YES if you are saving the date and can join us or text NO if sadly, you won't be able to be with us.&lt;span class="pl-cce"&gt;\n\n&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2B50&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;u&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\u2764&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, if not guest_number: #      print guest_name + ' telephone number empty not messaging' wks_attendees.update_acell('E'+str(num), '0') else: print 'Sending message to ' + guest_name client.messages.create( to="+" + guest_number, #  +   e.164 from_="", #     Twillio body=message_body, ) wks_attendees.update_acell('E'+str(num), int(wks_attendees.acell('E'+str(num)).value) + 1) # increment the message count row else: # else-  print 'finished'</span></span></code> </pre> <br>  E como o texto SMS geralmente parece um pouco chato, eu adicionei um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Unicode</a> para apimentar.  Aqui est√° a apar√™ncia da mensagem para os sortudos convidados: <br><br><img src="https://habrastorage.org/files/f19/36c/7bb/f1936c7bbccd4cb29115c1fa182321f3.png" alt="imagem" width="340"><br><br>  Em seguida, usei o Flask como servidor da Web, fiz minha solicita√ß√£o de URL para o ponto do Twilio Messaging em / messages e adicionei if-checks simples para analisar as respostas: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@app.route("/messages", methods=['GET', 'POST']) def hello_guest():  if "yes" in body_strip:    #      confirmation_status    wks_attendees.update_acell("F"+str(guest_confirmation_cell.row), 'Accepted')  #    ¬´ ¬ª       resp.message(u"\u2665" + "Thanks for confirming, we'll be in touch!" + u"\u2665")  # r ,    elif "no" in from_body.lower():    #    ¬´ ¬ª       wks_attendees.update_acell("F"+str(guest_confirmation_cell.row), 'Declined')    #       resp.message("Sorry to hear that, we still love you though!")  else:  #  ,        resp.message("You sent a different keyword, we need a yes or a no, you sent: "+           from_body)  return str(resp)</span></span></code> </pre><br><img src="https://habrastorage.org/files/e4e/e69/8e9/e4ee698e94b448ef9c8d6c3ac112f51d.png" alt="imagem" align="left" width="340"><img src="https://habrastorage.org/files/85b/422/750/85b42275037c4d16af0e6e2de2cffadf.png" alt="imagem" width="340"><br><br>  A primeira mensagem foi enviada √†s 8:37 da manh√£ de 19 de fevereiro e a primeira confirma√ß√£o foi recebida um pouco depois √†s 8:40.  √Äs 9:38, eu j√° tinha recebido 23 confirma√ß√µes, ou seja, 32% das respostas estavam no meu bolso!  Dois dias ap√≥s o in√≠cio do envio em massa, 58% dos convidados j√° confirmaram sua participa√ß√£o.  Apesar do sucesso √≥bvio, minha futura esposa ainda n√£o ficou 100% impressionada com o meu servi√ßo de SMS para convites de casamento, e decidi adicionar um pouco mais de funcionalidade ao aplicativo. <br><br>  Estat√≠sticas!  Eu poderia criar uma lista de convidados atualizada e fornec√™-la mediante solicita√ß√£o, dando um feedback instant√¢neo √† minha futura noiva.  O c√≥digo acabou sendo bastante simples, pois eu j√° havia configurado alguns dos contadores mais simples da tabela antes e, portanto, tudo se resumia em obter o conte√∫do de c√©lulas individuais e adicion√°-lo ao SMS: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    guest_confirmed = wks_attendees.acell('C70').value guest_unconfirmed = wks_attendees.acell('C71').value guest_no_response = wks_attendees.acell('C72').value guest_acceptance = wks_attendees.acell('C73').value elif "numbers" in from_body.lower():  #   ( - ,   )  resp.message("RSVP update:\n\nTotal Accepted: " + guest_confirmed         "\n\nTotal declined: " guest_unconfirmed "\n\nTotal no response: "+         guest_no_response + "\n\nTotal acceptance rate: " + guest_acceptance)</span></span></code> </pre><br>  Exemplo de SMS enviado por este c√≥digo: <br><br><img src="https://habrastorage.org/files/910/1cc/089/9101cc08985742d58228a005a33271a8.png" alt="imagem" width="340"><br><br>  Pode n√£o parecer muito bonito, mas √© muito informativo. <br><br>  O fato de Lauren poder agora seguir as atualiza√ß√µes autom√°ticas da lista de convidados nos salvou muitas dores de cabe√ßa.  Como resultado, recebi a aprova√ß√£o dela para a ampla integra√ß√£o do SMS, e logo essa ferramenta foi usada em quase todos os processos onde era poss√≠vel.  Algumas das aplica√ß√µes eram √≥bvias, por exemplo, enviar notifica√ß√µes por SMS sobre o lan√ßamento de um site de casamento (feito, ali√°s, no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Heroku</a> ) ou trabalhar com listas de presentes de casamento e muitas outras solu√ß√µes das quais tenho orgulho at√© hoje. <br><br><h3>  Festa gloriosa </h3><br>  Depois de compilar a lista de convidados e coletar respostas, chegou-se √† li√ß√£o, que geralmente √© adiada para mais tarde - descobrindo as prefer√™ncias de gosto dos convidados.  O primeiro passo foi enviar outro SMS informando os convidados sobre a necessidade de visitar o site e selecionar as categorias de alimentos servidos no formul√°rio do Google.  O formul√°rio parecia bastante comum, mas preenchia o mesmo arquivo no qual havia dados sobre os visitantes.  Assim, agora t√≠nhamos uma mesa de visitantes que aceitava convites e uma mesa que preenchia o formul√°rio de sele√ß√£o de alimentos.  Se estiv√©ssemos conversando sobre qualquer ferramenta de automa√ß√£o comum, eu teria que esperar os convidados escolherem lentamente seus pratos, mas meu casamento foi realizado com o apoio do Twillio, e isso significa que eu poderia receber uma resposta dos convidados com o m√≠nimo esfor√ßo. <br><br>  Foi necess√°rio verificar duas tabelas pelo nome dos convidados e atualizar o status dos pratos selecionados ap√≥s o recebimento de novas informa√ß√µes.  Isso exigiu alguns sinos e assobios adicionais no c√≥digo, mas assim que eu terminei com eles, eu poderia executar o script o mais r√°pido poss√≠vel, recebendo um SMS com as informa√ß√µes mais recentes: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gspread <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> oauth2client.client <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SignedJwtAssertionCredentials <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> twilio.rest <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TwilioRestClient <span class="hljs-comment"><span class="hljs-comment">#     json,    json_key = json.load(open('')) scope = ['https://spreadsheets.google.com/feeds'] credentials = SignedJwtAssertionCredentials(json_key['client_email'],                      json_key['private_key'].encode(),                      scope) gc = gspread.authorize(credentials) wks = gc.open("")  #      wks_attendees = wks.get_worksheet(0)  #   wks_food = wks.get_worksheet(1)  #    ACCOUNT_SID = 'TWILIO_ACCOUNT_SID' AUTH_TOKEN = 'TWILIO_AUTH_TOKEN' client = TwilioRestClient(ACCOUNT_SID, AUTH_TOKEN) #   . -       for num in range(2, 60):  food_guest_name = wks_food.acell('B'+str(num)).value  #        if food_guest_name:    attendees_name = wks_attendees.find(val_food_guest_name).value    attendees_name_row = wks_attendees.find(val_food_guest_name).row    menu_status = wks_attendees.acell("G"+str(attendees_name_row)).value    if food_guest_name == attendees_name:      print      if menu_status == 'Y':  #   ,          print('Skipping')      else:  #    ,           print ('Food sheet name ' + food_guest_name + 'Attendees sheet name ' + attendees_name)        #            wks_attendees.update_acell("G"+str(attendees_name_row), 'Y')    else:      print('nothing found, moving on')      wks_attendees.update_acell('E'+str(num), int(wks.acell('E'+str(num)).value) + 1)  #      else:    #           client.messages.create(from_="",  #  Twillio                to="",  #                  body="Finished processing current meal listnnGuest meals confirmed" + guest_meals_confirmed + "\n\nGuest meals unconfirmed: " + guest_meals_unconfirmed)</span></span></code> </pre><br>  Agora que eu tinha uma lista de convidados precisa e uma lista de pratos constantemente atualizada, fazia sentido disponibilizar essas estat√≠sticas publicamente usando o aplicativo principal.  Para isso, foi necess√°rio adicionar apenas o conte√∫do das c√©lulas correspondentes √† resposta do SMS: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#           elif "food" in body_strip.strip():  resp.message("Guest meals decided:" + guest_meals_confirmed + "\nGuest meals undecided: " + guest_meals_unconfirmed + "\n\nMenu breakdown:\n\n" + starter_option_1 +": " + starter_option_1_amount + "\n" + starter_option_2 +": " + starter_option_2_amount + "\n" + starter_option_3 +": " + starter_option_3_amount + "\n" + main_option_1 +": " + main_option_1_amount + "\n" + main_option_2 +": " + main_option_2_amount + "\n" + main_option_3 +": " + main_option_3_amount + "\n" + dessert_option_1 + ": " + dessert_option_1_amount + "\n" + dessert_option_2 + ": " + dessert_option_2_amount)</span></span></code> </pre><br><img src="https://habrastorage.org/files/13c/a50/9dc/13ca509dc74a4dcd9401f68f736fa69c.png" alt="imagem" width="340"><br><br>  Essa medida acabou sendo muito √∫til, pois permitiu que a empresa que estava servindo o feriado estivesse ciente de nosso progresso e forneceu informa√ß√µes muito pr√°ticas daqueles que ainda n√£o haviam feito sua escolha.  O pr√≥ximo candidato √† automa√ß√£o foi o processo de receber respostas dos convidados.  Para isso, bastava percorrer a lista, encontrar nela "violadores" que n√£o escolheram seus pratos e enviar mensagens a eles! <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> num <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">72</span></span>):  <span class="hljs-comment"><span class="hljs-comment">#         print "sleeping for 3 seconds"  time.sleep(3)  #            wedding_guest_number = wks_attendees.acell('B'+str(num)).value  #     wedding_guest_name = wks_attendees.acell('A'+str(num)).value  #     menu_guest = wks_attendees.acell('G'+str(num)).value  if not wedding_guest_number:    print wedding_guest_name+' telephone number empty not messaging'  #   ,     .            wks_attendees.update_acell('H'+str(num), '1')  #         else:    if menu_guest == "N":  #    !      !      print 'Sending message to '+wedding_guest_name      client.messages.create(        to="+" + wedding_guest_number,        from_="",  #   Twillio        body="If you have received this message, you have not chosen your food options for Tom &amp; Lauren's Wedding!\n\nYou can pick your choices via the website, no paper or postage required!\n\nhttp://www.yourwebsitehere.com/food"      )      wks_attendees.update_acell('H'+str(num), int(wks_attendees.acell('H'+str(num)).value) + 1)  #        else:          # else-   print 'finished'</span></span></code> </pre><br><img src="https://habrastorage.org/files/40a/1dd/ed8/40a1dded8a0b4697b34f7698bbc2917b.png" alt="imagem" width="340"><br><br>  O grande dia estava chegando mais r√°pido do que imagin√°vamos.  A √∫nica coisa que resta a fazer √© enviar o √∫ltimo SMS, lembrando aos convidados os detalhes b√°sicos e a necessidade de se armar com um guarda-chuva, o que ajudar√° a proteger contra o ver√£o brit√¢nico tipicamente chuvoso: <br><br><img src="https://habrastorage.org/files/752/007/52e/75200752e7b04a8a8c488b8b923567a7.png" alt="imagem" width="340"><br><br><h3>  Em conclus√£o </h3><br>  Organizar um casamento nunca √© f√°cil.  A qualquer momento, pode parecer que muitos aspectos do evento est√£o fora de seu controle.  A automa√ß√£o definitivamente facilitou minha vida, fornecendo um canal direto de comunica√ß√£o com os h√≥spedes e in√∫meras ferramentas para seguir suas respostas e lembr√°-las de qualquer necessidade de decidir e responder.  Ela nos ajudou a tomar um dos assuntos mais tediosos que acompanha esses eventos em nossas pr√≥prias m√£os, nos permitiu liberar muito tempo e focar em outros componentes importantes de um evento t√£o importante em nossas vidas. <br><br>  Criar solu√ß√µes escal√°veis ‚Äã‚Äãpara tarefas complexas nunca √© f√°cil, e mesmo uma das vers√µes finais do meu aplicativo mal consegue lidar com as tarefas em alguns lugares.  Inicialmente, planejei desenvolver uma solu√ß√£o mais abrangente, com visualiza√ß√£o do progresso, integra√ß√£o de voz, menos dependente dos scripts da CLI, mas o tempo prevaleceu nessa corrida.  Em geral, estou satisfeito com o resultado.  N√£o h√° sistemas de comunica√ß√£o perfeitos.  Voc√™ deve sempre usar o canal mais adequado ao seu p√∫blico, seja <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SMS</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">voz</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bate-papo</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√≠deo</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sem√°foro</a> . <br><br>  Se voc√™ quiser falar sobre automa√ß√£o de casamentos, envie-me um email no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Twitter</a> . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/329/5ba/c7b/3295bac7b7fb4687b452049ac5cec9bc.png" alt="imagem"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt402827/">https://habr.com/ru/post/pt402827/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt402813/index.html">Gadgets do mercado das pulgas: filmadora Toshiba Camileo P10</a></li>
<li><a href="../pt402815/index.html">Cometa Hale-Bopp</a></li>
<li><a href="../pt402817/index.html">Entrela√ßamento qu√¢ntico sem confus√£o - o que √© isso</a></li>
<li><a href="../pt402821/index.html">Tesla Amazing - adesivos de nerd de autores da R√∫ssia que podem ser colados em qualquer lugar</a></li>
<li><a href="../pt402823/index.html">Ind√∫stria de tecnologia de seguros como uma das verticais de fintech de crescimento mais r√°pido</a></li>
<li><a href="../pt402829/index.html">Um pequeno guia para o mundo dos cons√≥rcios de blockchain</a></li>
<li><a href="../pt402831/index.html">Para entender o futuro do setor de servi√ßos financeiros, voc√™ precisa parar de pensar em termos de tecnologia</a></li>
<li><a href="../pt402833/index.html">Como a infraestrutura da Internet funciona</a></li>
<li><a href="../pt402835/index.html">10 Tend√™ncias Insurtech 2017</a></li>
<li><a href="../pt402837/index.html">Por que a realidade virtual √© um aplicativo matador para o blockchain?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>