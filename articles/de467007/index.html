<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•ñ üê≤ üóúÔ∏è FLProg - Unabh√§ngige Integration in das Programm von benutzerdefinierten Controllern üòæ üòè ü•Å</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das FLProg-Projekt wurde in Habr√© lange Zeit nicht behandelt. Dies liegt an dem Zeitmangel beim Schreiben von Artikeln und sogar an meinen pers√∂nliche...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>FLProg - Unabh√§ngige Integration in das Programm von benutzerdefinierten Controllern</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467007/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/m4/sc/xc/m4scxccdteuasxjzm_whvn1bs9q.png"></div><br>  Das FLProg-Projekt wurde in Habr√© lange Zeit nicht behandelt.  Dies liegt an dem Zeitmangel beim Schreiben von Artikeln und sogar an meinen pers√∂nlichen Problemen.  Aber das Projekt ist nicht tot, es lebt und entwickelt sich.  Durchschnittlich einmal im Monat wird die n√§chste Version des Programms ver√∂ffentlicht.  Seit der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">letzten Ver√∂ffentlichung</a> wurde das Rendern der Schaltung vollst√§ndig √ºberarbeitet (dank dessen wurden Friese beim Rendern beseitigt), das Querverweis-System f√ºr das Projekt und ein System zur Analyse des Projekts auf Fehler wurden angezeigt.  Der Programmcode selbst wurde auf eine neuere Version der Programmiersprache portiert.  Aus diesem Grund hat sich die Programmoberfl√§che positiv ver√§ndert (aus meiner Sicht unterst√ºtzen mich nat√ºrlich die Benutzer).  Viele interessante Bl√∂cke wurden hinzugef√ºgt.  Schemaskalierung und Blocksuche implementiert. <br><a name="habracut"></a><br>  Das Hauptproblem des Projekts bleibt jedoch, dass der Entwickler des Programms eine Person ist (das bin ich) und die Anzahl der verschiedenen Controller-Boards, Sensoren, Sensoren und Erweiterungskarten, die sowohl von Chinesen als auch in letzter Zeit von unseren Herstellern hergestellt werden, stetig w√§chst.  Und Benutzer m√∂chten sie ausprobieren oder in ihren Projekten verwenden.  Bei Peripherieger√§ten wurde dieses Problem zu einer Zeit von mir mithilfe eines benutzerdefinierten Blockeditors mehr oder weniger gel√∂st.  Dieser Schritt, wie sie sagen, "Schuss", und jetzt, fast auf den meisten vorhandenen Peripheriekarten, im Internet oder im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Programmforum</a> , finden Sie den entsprechenden Benutzerblock.  Nun, oder im selben Forum (oder in einer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gruppe in Vkontakte</a> ) bitten Sie die lokalen Gurus, eine zu schreiben.  Normalerweise kann man auf die eine oder andere Weise zustimmen. <br><br>  Jetzt ist es Zeit, das zweite Problem zu l√∂sen - das sind Controller-Boards. <br><br>  K√ºrzlich wurde eine Beta-Version des Programms mit der Nummer 6.0 ver√∂ffentlicht.  In dieser Version ist der Editor f√ºr Benutzerbeschreibungen von Steuerungen implementiert.  Wie bei benutzerdefinierten Bl√∂cken k√∂nnen Beschreibungen in Bibliotheken gruppiert, als separate Beschreibungen sowie ganze Bibliotheken als Datei gespeichert und gemeinsam genutzt werden. <br><br>  Mit diesem Beitrag beginne ich eine Reihe von mindestens zwei Beitr√§gen, in denen wir uns √ºberlegen, wie dieser Editor verwendet wird.  Im ersten Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">werde</a> ich mit Erlaubnis von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Shiotiny</a> versuchen, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sein ShIoTiny-Board</a> zu beschreiben <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">.</a>  Im zweiten Artikel werden wir versuchen, virtuell ein Analogon eines echten industriellen Controllers zu finden und es zu beschreiben. <br><br>  Also fangen wir an. <br><br>  √ñffnen Sie das FLProg-Programm.  W√§hlen Sie im Men√º "Extras" den "Editor f√ºr benutzerdefinierte Controller-Beschreibungen". <br><br><img src="https://habrastorage.org/webt/x-/ut/xg/x-utxgu-j-yc6o4bxbij3ortuye.png"><br><br>  Das Beschreibungseditorfenster wird ge√∂ffnet. <br><br>  Benutzerdefinierte Beschreibungen k√∂nnen in der Bibliothek mit jeder Verschachtelungstiefe kombiniert werden.  Daher erstellen wir zun√§chst eine Beschreibungsbibliothek. <br><br><img src="https://habrastorage.org/webt/io/kh/cs/iokhcsgn0qt_kgc6zvf4nhmi8a4.png"><br><br>  Legen Sie den Namen der Bibliothek fest. <br><br><img src="https://habrastorage.org/webt/ir/l1/bd/irl1bdlbht21as-bsinayisfuzi.png"><br><br>  Danach erstellen wir eine Beschreibung des Controllers in der Bibliothek. <br><br><img src="https://habrastorage.org/webt/er/fr/60/erfr60lyicwjbbppzgshkypj6ha.png"><br><br>  Und gib ihm einen Namen: <br><br><img src="https://habrastorage.org/webt/zr/vw/of/zrvwofrlxkqwswrwq149hkmxlti.png"><br><br>  Beim Erstellen einer Controller-Beschreibung gelangen wir sofort zum Zweig der allgemeinen Parameter. <br><br><img src="https://habrastorage.org/webt/t7/u1/ct/t7u1ct8h0myo9vxvfjtapl58vpe.png"><br><br>  Hier k√∂nnen wir den Namen √§ndern, den CPU-Typ einstellen, die Gr√∂√üe des EEPROM einstellen, die Versionsnummer der Beschreibung √§ndern. <br><br>  Da das ShloTiny-Board auf dem ESP8266-Controller basiert, w√§hlen wir ihn aus.  Bei der Auswahl eines Controllers wird automatisch das entsprechende EEPROM-Volume angebracht.  Bei Bedarf kann dieser Wert ge√§ndert werden.  Die Standardversionsnummer f√ºr die neue Beschreibung ist 1. <br><br>  Wenn Sie in Zukunft vorhandene Beschreibungen √§ndern, wird empfohlen, diese in Richtung der Erh√∂hung zu √§ndern.  Wenn Sie diese Beschreibung in einem Projekt verwenden, vergleicht das Programm die Version der Beschreibung im Projekt und in der Bibliothek.  Wenn die Versionsnummer der Beschreibung in der Bibliothek gr√∂√üer als im Projekt ist, wird das Element zum Aktualisieren der Beschreibung im Programm im Men√º "Projekt" des Programms angezeigt.  Wenn umgekehrt, wird ein Element angezeigt, um die Beschreibung in der Bibliothek zu aktualisieren.  Wenn die Beschreibung des im Projekt verwendeten Controllers √ºberhaupt nicht in der Bibliothek gefunden wird, wird das Element zum Eingeben der Beschreibung aus dem Projekt in die Bibliothek im selben Men√º angezeigt. <br><br>  In diesem Thread k√∂nnen Sie auch eine Textbeschreibung des Controllers schreiben, die bei der Auswahl hilft. <br><br>  Klicken Sie auf die Schaltfl√§che "√úbernehmen", um die vorgenommenen √Ñnderungen zu √ºbernehmen, bevor Sie zu einem anderen Zweig der Controller-Parameter wechseln.  Andernfalls werden die √Ñnderungen nicht gespeichert. <br><br>  Betrachten Sie nun den Schaltplan der ShloTiny-Karte. <br><br><img src="https://habrastorage.org/webt/lq/wt/de/lqwtdebl8ssogd2rvcvvxbz9rd0.png"><br><br>  Die Karte verf√ºgt √ºber drei digitale Eing√§nge, drei digitale Ausg√§nge, einen analogen Eingang und einen Eingang f√ºr den Sensor.  Insgesamt acht Schlussfolgerungen des Vorstandes. <br><br>  Gehen Sie im Editor zum Zweig "Controller-Schlussfolgerungen" und legen Sie die Anzahl der Schlussfolgerungen fest. Vergessen Sie nicht, danach auf die Schaltfl√§che "√úbernehmen" zu klicken. <br><br><img src="https://habrastorage.org/webt/ls/wl/lb/lswllbh_hqil-hof8ydl6z7vn9y.png"><br><br>  Das Programm wird die erforderliche Anzahl von Schlussfolgerungen generieren.  Wir gehen zum ersten von ihnen √ºber. <br><br><img src="https://habrastorage.org/webt/4u/d9/ha/4ud9habaghl5ioujfwby0a-08tc.png"><br><br>  In diesem Zweig k√∂nnen Sie einen alternativen Ausgabenamen angeben, der im Programm angezeigt wird.  Wenn es nicht vorhanden ist, zeigt das Programm PinN an, wobei N die Pin-Nummer in der Pin-Liste ist.  Ich empfehle, dass Sie eine Inschrift an die Tafel im Feld f√ºr den alternativen Namen schreiben.  Dies erleichtert das Verst√§ndnis der Schlussfolgerungen.  F√ºr die beschriebene Karte geben wir dort den Wert von Input1 gem√§√ü Schaltplan ein.  In diesem Thread k√∂nnen Sie also eine individuelle Beschreibung der Ausgabe schreiben, um beispielsweise die Funktionen ihrer Anwendung anzugeben.  Bei Bedarf k√∂nnen Sie auch einen Alias ‚Äã‚Äãf√ºr die Ausgabe angeben, der im Programm in Klammern nach dem Namen der Ausgabe angezeigt wird. <br><br>  Vergessen Sie nach dem Vornehmen der √Ñnderungen nicht, auf die Schaltfl√§che "√úbernehmen" zu klicken.  Nennen wir nach dem gleichen Prinzip die verbleibenden Schlussfolgerungen. <br><br><img src="https://habrastorage.org/webt/bp/y6/1u/bpy61u53hnwuttwg6s4ttl7kq2y.png"><br><br>  Im selben Zweig der Hauptausgabeparameter werden die von ihm ausgef√ºhrten Funktionen hinzugef√ºgt. <br><br><img src="https://habrastorage.org/webt/ks/ol/vt/ksolvtqefuyugg0s1aven_efhps.png"><br><br>  Die folgenden Funktionen k√∂nnen jedem Pin zugewiesen werden. <br><br><img src="https://habrastorage.org/webt/y8/04/cd/y804cdepj9pr9qgnji3h9ffan38.png"><br><br><ul><li>  I2C ist eine Funktion eines der I2C-Bus-Pins (SDA oder SCL). </li><li>  SPI ist eine Funktion eines der SPI-Bus-Pins (MISO, MOSI, SCK, SS). </li><li>  UART ist eine Funktion eines der Pins der UART-Schnittstelle (RX oder TX). </li><li>  Analogeingangsfunktion </li><li>  Analoge Ausgangsfunktion (noch nicht in FLProg verwendet, R√ºckstand f√ºr die Zukunft). </li><li>  Digitale Ein- / Ausgabefunktion. </li></ul><br>  Weisen Sie die digitale Eingangs- / Ausgangsfunktion von Pin 1 zu.  Wenn Sie dem Ausgang eine neue Funktion (noch nicht konfiguriert) zuweisen, wird der Zweig ‚ÄûFehler‚Äú im Controller-Baum angezeigt und der gesamte Pfad zum Zweig der falschen Funktion wird rot.  Im Zweig "Fehler" sehen Sie eine Liste der Fehler in der Controller-Beschreibung. <br><br><img src="https://habrastorage.org/webt/fu/c5/l6/fuc5l68t2uqnnb018st1us7kp84.png"><br><br>  In diesem Fall gibt Eingang 1 in der Funktion ‚ÄûDigitaler Ein- / Ausgang‚Äú die Nummer dieses Eingangs nicht als digital an.  Wir wechseln zum Zweig dieser Funktion (in Zukunft plane ich einen direkten √úbergang zum gew√ºnschten Zweig, wenn ich auf einen Fehler klicke). <br><br><img src="https://habrastorage.org/webt/m5/86/hp/m586hpytkvzarwhavx6lf1a2lcm.png"><br><br>  Entsprechend dem Schaltplan der Karte ist der Ausgang ‚ÄûInput1‚Äú mit dem GPIO2-Pin der Steuerung verbunden.  Diesen Wert geben wir in das Feld ‚ÄûDigitale Eingangsnummer‚Äú ein.  Beim Kompilieren eines Projekts wird dieser Wert in den Code eingef√ºgt.  Da die Verwendung dieser Eingabe als Ausgabe nicht vorgesehen ist, entfernen wir das Kontrollk√§stchen "Kann als Ausgabe verwendet werden".  Klicken Sie wie immer auf die Schaltfl√§che "√úbernehmen".  Konfigurieren Sie auf die gleiche Weise die beiden anderen digitalen Eing√§nge.  Gehen Sie dann zum Ausgang des Analogeingangs "ADC1" und f√ºgen Sie die Funktion "Analogeingang" hinzu. <br><br><img src="https://habrastorage.org/webt/i5/vb/6j/i5vb6johktcuk0mym00jifsptqm.png"><br><br>  In den Einstellungen dieser Funktion m√ºssen Sie die Nummer dieses Ausgangs als Analogeingang angeben.  Gem√§√ü dem Schema ist dies 0 (in ESP8266 ist es eins). <br><br><img src="https://habrastorage.org/webt/jh/yl/vs/jhylvsjhmvsl6dbki2nsnmu-aoe.png"><br><br>  Gehen Sie dann zur Ausgabeeinstellung "1WIRE".  Hier f√ºgen wir die digitale Ein- / Ausgabefunktion hinzu, verbieten jedoch die Verwendung von Eingabe und Ausgabe.  Infolgedessen steht es nur in den Sensorbl√∂cken zur Auswahl und ist beim Erstellen von Ein- und Ausg√§ngen nicht verf√ºgbar. <br><br><img src="https://habrastorage.org/webt/5o/s-/3i/5os-3i6f-756ojmbhfn0jrblftm.png"><br><br>  Die Einstellungen der Ausg√§nge ‚ÄûK1‚Äú - ‚ÄûK3‚Äú √§hneln den Einstellungen der Eing√§nge ‚ÄûInput1‚Äú - ‚ÄûInput3‚Äú nur bei Ausg√§ngen, deren Verwendung als Eingang verboten ist. <br><br><img src="https://habrastorage.org/webt/wc/vh/nl/wcvhnl5d42ola1rk3cmcgqltpjy.png"><br><br><img src="https://habrastorage.org/webt/e3/qj/1y/e3qj1yyzrzn36t-plzwu_nl7-sq.png"><br><br>  Gehen Sie zum Zweig "Bilder".  Darin k√∂nnen wir Bilder hinzuf√ºgen, die in die Beschreibung des Controllers geladen wurden, z. B. mit dem Erscheinungsbild des Controllers, der Pinbelegung usw. <br><br>  Bitte beachten Sie, dass Bilder direkt in die Controller-Beschreibung geladen und in einem damit erstellten Projekt gespeichert werden.  Laden Sie daher keine gro√üen Bilder hoch.  Dies f√ºhrt zu einer Vergr√∂√üerung des Projekts und wirkt sich auf die Geschwindigkeit seiner Er√∂ffnung aus. <br><br>  Das Bild wird √ºber die Schaltfl√§che "Bild hinzuf√ºgen" hinzugef√ºgt. <br><br><img src="https://habrastorage.org/webt/f_/ar/so/f_arso1h9wd207bcwxg0yx8rbjm.png"><br><br>  Nach Auswahl und Laden eines Bildes (nur das PNG-Format wird unterst√ºtzt) wird f√ºr jedes Bild im Baum ein separater Zweig erstellt.  In diesem Zweig k√∂nnen Sie einen Namen f√ºr das heruntergeladene Image angeben, der in den Controller-Informationen angezeigt wird. <br><br><img src="https://habrastorage.org/webt/9f/th/jb/9fthjbpdldgi5zzbmye2ior6kyw.png"><br><br>  Bei Bedarf k√∂nnen Sie mehrere Bilder hochladen und in der gew√ºnschten Reihenfolge einstellen. <br><br><img src="https://habrastorage.org/webt/b_/cv/lx/b_cvlxb8-0zaxazygmrj300mkhy.png"><br><br><img src="https://habrastorage.org/webt/ru/wh/nu/ruwhnuvfvcuhntsygr0hpapxed0.png"><br><br>  Wir gehen zum Zweig "Standardbl√∂cke" √ºber. <br><br><img src="https://habrastorage.org/webt/5e/nr/gg/5enrggudk1-qgs36xmh1ryem1f8.png"><br><br>  Dieser Zweig zeigt die Bl√∂cke, die in der Bibliothek der Standardbl√∂cke des Programms gem√§√ü den aktuellen Einstellungen des Programms dargestellt werden k√∂nnen.  Was bedeutet das.  Einige der Bausteine ‚Äã‚Äãdes Programms sind nur f√ºr bestimmte CPU-Typen vorgesehen.  Und ihre Verf√ºgbarkeit h√§ngt vom ausgew√§hlten Prozessor ab.  Au√üerdem werden Bl√∂cke, die f√ºr die Arbeit mit SPI, I2C und UART ausgelegt sind, nur dann in dieser Liste angezeigt, wenn den Controller-Pins die entsprechenden Funktionen hinzugef√ºgt wurden.  Bl√∂cke, die f√ºr die Arbeit mit dem EEPROM ausgelegt sind, werden nur angezeigt, wenn die im Zweig der allgemeinen Controller-Parameter angegebene EEPROM-Gr√∂√üe gr√∂√üer als Null ist oder die I2C-Funktion zu den Controller-Pins hinzugef√ºgt wird.  Standardm√§√üig d√ºrfen nicht alle Bl√∂cke in der Bibliothek verwendet werden (orange markiert).  Sie k√∂nnen die Verwendung eines separaten Blocks oder des gesamten Blockordners zulassen, indem Sie den erforderlichen Zweig markieren und auf die Schaltfl√§che "Zulassen" oder im Kontextmen√º klicken. <br><br><img src="https://habrastorage.org/webt/_g/-f/cc/_g-fccqwf5_0twhukgxs6wfxhwo.png"><br><br>  Wenn Sie zulassen, dass ein Block oder ein Ordner mit Bl√∂cken im Programm angezeigt wird, werden diese schwarz gestrichen. <br><br>  Das Blockieren eines Blocks oder eines separaten Ordners ist in gleicher Weise untersagt. <br><br><img src="https://habrastorage.org/webt/dc/yo/4p/dcyo4p2p6mj8c1zqtj_p_mymupw.png"><br><br>  In einem Ordner, in dem nicht alle Bl√∂cke angezeigt werden d√ºrfen, sind sie vor und nach dem Namen mit drei Sternchen gekennzeichnet. <br><br>  Wir verbieten die Verwendung von Motoren, Echtzeituhren, Displays, IR-Steuerger√§ten, Sensoren (au√üer DS18B20- und DHT22-Sensoren - wie der Board-Entwickler bisher nur ihre Unterst√ºtzung angek√ºndigt hat), Erweiterungs-Chips und einem Piezo-Lautsprecher. <br><br><img src="https://habrastorage.org/webt/co/ip/ji/coipji0n9m9oho6ed6jjpuatuu8.png"><br><br>  Wir werden dasselbe f√ºr die KOP-Sprache tun <br><br><img src="https://habrastorage.org/webt/h9/-u/xe/h9-uxez75k-8pyzyi08vk7z-p4m.png"><br><br>  Vergessen Sie nicht, sie nach √Ñnderungen anzuwenden. <br><br>  Die verbleibenden Zweige der Controller-Beschreibung werden im n√§chsten Beitrag erl√§utert, w√§hrend die aktuellen Einstellungen ausreichen, um diese bestimmte Karte im FLProg-Programm zu verwenden. <br><br>  Im Moment m√∂chte ich nur kurz sagen, dass der Zweig "Spezielle Bl√∂cke" verwendet wird, um benutzerdefinierte Bl√∂cke in die Beschreibung zu laden, die bei Verwendung dieses Controllers in der Bibliothek der Standardbl√∂cke im Programm angezeigt wird.  Der Zweig "Spezialcode" wird verwendet, um den Code aufzuzeichnen, der immer in den kompilierten Code eingef√ºgt wird, und der Zweig "Spezialbibliotheken" wird verwendet, um Bibliotheken in die Beschreibung des Controllers zu laden, die in den Ordner \ library ArduinoIDE hochgeladen werden, mit dem das Programm arbeitet. <br><br>  Speichern Sie nach allen √Ñnderungen die Controller-Beschreibungsbibliothek. <br><br><img src="https://habrastorage.org/webt/x0/oe/d7/x0oed7fkffsba-owxcfxvgchyjm.png"><br><br>  Versuchen wir nun, die von uns erstellte Controller-Beschreibung zu verwenden. <br>  Im FLProg-Programm erstellen wir ein neues Projekt f√ºr den Controller. <br><br><img src="https://habrastorage.org/webt/dx/7w/ya/dx7wyao116azs1a2lwrpoa1tt4i.png"><br><br>  √ñffnen Sie das Controller-Auswahlfenster. <br><br><img src="https://habrastorage.org/webt/l4/5f/wt/l45fwtcbztx_s8w9p71skiimmyo.png"><br><br>  Und w√§hlen Sie die Beschreibung aus, die wir erstellt haben. <br><br><img src="https://habrastorage.org/webt/dq/ly/jp/dqlyjprofstw-fkadjd1jiguzl4.png"><br><br>  Bei der Auswahl eines Controllers k√∂nnen Sie dessen Bilder anzeigen und bei Bedarf die erforderlichen Bilder in einer Datei speichern. <br><br><img src="https://habrastorage.org/webt/ba/ni/gw/banigw8zc9shyyogovawmcvlyxy.png"><br><br><img src="https://habrastorage.org/webt/rh/ra/ss/rhrasshfamvayeljiqnmceepo3g.png"><br><br>  Sie k√∂nnen auch andere Parameter sehen <br><br><img src="https://habrastorage.org/webt/gf/6p/wd/gf6pwdh-67cn9e8cbm0k4utlbw0.png"><br><br>  Best√§tigen Sie nach Auswahl des Controllers dessen Auswahl: <br><br><img src="https://habrastorage.org/webt/d0/7x/fy/d07xfyaacufag5wf1zqmcokjjd8.png"><br><br>  Infolgedessen wird das Hauptarbeitsfenster des Projekts ge√∂ffnet, das gem√§√ü der ausgew√§hlten Steuerung konfiguriert wurde. <br><br><img src="https://habrastorage.org/webt/dz/my/qj/dzmyqjeks591vtjfqnqhqnhvty4.png"><br><br>  Der Zweck dieses Beitrags beinhaltet nicht die Aufgabe der Schulung f√ºr die Arbeit mit dem FLProg-Programm.  Dies ist in meinen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vorherigen Beitr√§gen</a> , auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der Projektwebsite</a> und im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Projektforum</a> ziemlich gut beschrieben.  Dar√ºber hinaus gibt es auf YouTube bereits zahlreiche Kan√§le, in denen Video-Tutorials zur Arbeit mit dem Programm ver√∂ffentlicht werden.  Zum Beispiel f√ºhrt ein sehr guter Kanal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚ÄûKey to Arduino‚Äú</a> gerade eine Reihe von Lektionen mit einer sehr guten Pr√§sentation des Materials durch. <br><br>  Deshalb erstellen wir zum Beispiel einfach ein einfaches Projekt und versuchen es zu kompilieren. <br>  F√ºgen Sie zuerst den Controller-Eingang hinzu. <br><br><img src="https://habrastorage.org/webt/4c/94/wf/4c94wfvporudssfe-mdvmg6fenm.png"><br><br>  Nur die Schlussfolgerungen, dass wir in dieser Funktion arbeiten durften, stehen als Input zur Auswahl. <br><br><img src="https://habrastorage.org/webt/yy/dk/fi/yydkfixeg0aemh73lrqunx1qq_a.png"><br><br>  Erstellen Sie dann einen digitalen Ausgang.  Hier sind auch nur zul√§ssige Schlussfolgerungen verf√ºgbar. <br><br><img src="https://habrastorage.org/webt/mk/cq/qm/mkcqqm7djcs0klswidh2qkm2bt8.png"><br><br>  Wir bauen die Schaltung so zusammen, dass beim Dr√ºcken der Taste an Eingang 1 (Eingang 1) das Relais K1 (Relais 1) eingeschaltet wird. <br>  Wir ziehen das Ger√§t auch zum Lesen von Informationen vom DS18B20-Sensor auf eine Leiterplatte in einer separaten Platine. <br><br><img src="https://habrastorage.org/webt/xn/wa/2p/xnwa2pfpn7em5w2irs5meayndbc.png"><br><br>  Gehen Sie zu den Blockeinstellungen.  Beim Erstellen des neuen OneWire-Busses sehen wir, dass alle digitalen Ein- / Ausg√§nge zur Auswahl stehen.  Dies ist ein Fehler in Version 6.0.  Da diese Version jedoch noch den Beta-Status hat, ist sie entschuldbar.  In Version 6.1 kann die Verwendung eines Stifts als Sensor, Sensor oder f√ºr Erweiterungs-Chips verboten werden.  Dar√ºber hinaus werde ich Ihnen im n√§chsten Beitrag einen anderen Weg zur L√∂sung dieses Problems erl√§utern.  W√§hlen Sie zun√§chst den 1WIRE-Pin. <br><br><img src="https://habrastorage.org/webt/yi/0n/i0/yi0ni02zslfqijbthixnw4yeq_m.png"><br><br>  Wir konfigurieren den Sensor so, dass die Adresse √ºber das Array eingestellt wird. <br><br><img src="https://habrastorage.org/webt/nu/ft/9h/nuft9hg43uwk_toqi1yanem1miq.png"><br><br>  Wir legen eine neue Karte vor die erste und ziehen den Block ‚ÄûOneWire Bus Scan‚Äú heraus. <br><br><img src="https://habrastorage.org/webt/qv/21/r5/qv21r5i9ggwzcovlis6k9kg3f9u.png"><br><br>  Wir konfigurieren es auf demselben OneWire-Bus und auf demselben Array, auf dem die Leseeinheit vom DS18B20-Sensor konfiguriert ist. <br><br><img src="https://habrastorage.org/webt/vm/cm/ri/vmcmrigupgqdmnxfbb8fcwfuluc.png"><br><br>  Wir stellen ein Schema f√ºr einen einzelnen Start eines Bus-Scans zusammen, wenn der Controller startet, indem wir den R-Block des Triggers verwenden (Auswahl der Vorderflanke). <br><br><img src="https://habrastorage.org/webt/vh/xd/2l/vhxd2l7bxk3afyi7obm1kaix9l0.png"><br><br>  Auf einer Platine mit einer Datenleseeinheit vom DS18B20-Sensor bauen wir einen Relais-Ein / Aus-Schaltkreis mit Hysterese zusammen.  Dazu verwenden wir zwei Komparatoren und einen SR-Trigger.  Dank dieses Schemas schaltet sich Relais 2 ein, wenn die Temperatur unter 10 Grad f√§llt, und aus, wenn die Temperatur √ºber 20 Grad steigt. <br><br><img src="https://habrastorage.org/webt/55/nw/3y/55nw3y062rknemyx2c7ouyavwgm.png"><br><br>  Wir starten das Kompilierungsschema. <br><br><img src="https://habrastorage.org/webt/oh/tr/so/ohtrso3_hk9k13yizhsgy8stp0o.png"><br><br>  Infolgedessen wird der resultierende Code in der Arduino IDE ge√∂ffnet.  Als Board w√§hlen wir NodeMCU, auf dem derselbe Chip wie auf ShloTiny installiert ist.  Das √úberpr√ºfen des Codes zeigt, dass er korrekt ist und heruntergeladen werden kann. <br><br><img src="https://habrastorage.org/webt/lv/jy/dc/lvjydc9b531j1inhq5vuumgn0n0.png"><br><br><div class="spoiler">  <b class="spoiler_title">Kompilierter Code</b> <div class="spoiler_text"><pre><code class="plaintext hljs">#include &lt;OneWire.h&gt; extern "C" { #include "user_interface.h"; } OneWire _ow13(13); byte _FLPArray133289689[9]; unsigned long _d18x2x1Tti = 0UL; float _d18x2x1O = 0.00; bool _trgr1 = 0; bool _bounseInputD2S = 0; bool _bounseInputD2O = 0; unsigned long _bounseInputD2P = 0UL; bool _trgrt1 = 0; bool _trgrt1I = 0; bool _sowb1_needScan = 0; bool _sowb1_ost = 0; bool _sowb1_Out_1 = 0; void setup() { pinMode(2, INPUT); pinMode(12, OUTPUT); pinMode(14, OUTPUT); _bounseInputD2O = digitalRead(2); } void loop() { bool _bounceInputTmpD2 = (digitalRead (2)); if (_bounseInputD2S) { if (millis() &gt;= (_bounseInputD2P + 40)) { _bounseInputD2O = _bounceInputTmpD2; _bounseInputD2S = 0; } } else { if (_bounceInputTmpD2 != _bounseInputD2O ) { _bounseInputD2S = 1; _bounseInputD2P = millis(); } } //:1 if (1) { if (_trgrt1I) { _trgrt1 = 0; } else { _trgrt1 = 1; _trgrt1I = 1; } } else { _trgrt1 = 0; _trgrt1I = 0; }; if (_sowb1_needScan) { if ( _oneWireSeach (_FLPArray133289689, _ow13)) { _sowb1_Out_1 = 1; } _ow13.reset_search(); _sowb1_needScan = 0; } if (_trgrt1) { if (! _sowb1_ost) { _sowb1_ost = 1; _sowb1_needScan = 1; _sowb1_Out_1 = 0; } } else { _sowb1_ost = 0; } //:2 digitalWrite(12, !(_bounseInputD2O)); //:3 if (_isTimer(_d18x2x1Tti, 1000)) { _d18x2x1Tti = millis(); _d18x2x1O = _readDS18_ow13(_FLPArray133289689, _FLPArray133289689[8]); } if (((_d18x2x1O)) &gt; (20)) _trgr1 = 0; if (((_d18x2x1O)) &lt; (10)) _trgr1 = 1; digitalWrite(14, _trgr1); } bool _isTimer(unsigned long startTime, unsigned long period ) { unsigned long currentTime; currentTime = millis(); if (currentTime &gt;= startTime) { return (currentTime &gt;= (startTime + period)); } else { return (currentTime &gt;= (4294967295 - startTime + period)); } } float _convertDS18x2xData(byte type_s, byte data[12]) { int16_t raw = (data[1] &lt;&lt; 8) | data[0]; if (type_s) { raw = raw &lt;&lt; 3; if (data[7] == 0x10) { raw = (raw &amp; 0xFFF0) + 12 - data[6]; } } else { byte cfg = (data[4] &amp; 0x60); if (cfg == 0x00) raw = raw &amp; ~7; else if (cfg == 0x20) raw = raw &amp; ~3; else if (cfg == 0x40) raw = raw &amp; ~1; } return (float)raw / 16.0; } float _readDS18_ow13(byte addr[8], byte type_s) { byte data[12]; byte i; _ow13.reset(); _ow13.select(addr); _ow13.write(0xBE); for ( i = 0; i &lt; 9; i++) { data[i] = _ow13.read(); } _ow13.reset(); _ow13.select(addr); _ow13.write(0x44, 1); return _convertDS18x2xData(type_s, data); } bool _oneWireSeach (byte array[], OneWire ow ) { byte temp[8]; byte i; if ( !ow.search(temp)) { return false; } if (OneWire::crc8(temp, 7) != temp[7]) { return false; } switch (temp[0]) { case 0x10: array[8] = 1; break; case 0x28: array[8] = 0; break; case 0x22: array[8] = 0; break; default: return false; } for ( i = 0; i &lt; 8; i++) { array[i] = temp[i]; } return true; }</code> </pre> <br></div></div><br>  ‚Üí <a href="">Beschreibung des ShloTiny-Controllers f√ºr das FLProg-Programm</a> <br><br>  Wir werden diese Lektion beenden. Im n√§chsten Beitrag werden wir versuchen, etwas Ernsthafteres zu beschreiben, das ‚Äûechten‚Äú industriellen Steuerungen n√§her kommt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467007/">https://habr.com/ru/post/de467007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466993/index.html">Konfiguration des Warnings Next Generation Plugins zur Integration in PVS-Studio</a></li>
<li><a href="../de466995/index.html">Konfigurieren des Plugins Warnungen der n√§chsten Generation f√ºr die PVS-Studio-Integration</a></li>
<li><a href="../de466999/index.html">Vergleich g√§ngiger CLI-Bibliotheken f√ºr Python: Klicken, Zementieren, Feuern und andere</a></li>
<li><a href="../de467003/index.html">Schnelles, bequemes und anpassungsf√§higes Men√º f√ºr 1075 Kategorien (36000 Produkte)</a></li>
<li><a href="../de467005/index.html">Wie man Polynome richtig f√§rbt</a></li>
<li><a href="../de467009/index.html">Erstellen einer Heimbibliothek mit Notion und Python</a></li>
<li><a href="../de467011/index.html">Was Sie in Data Science lesen und sehen sollten: B√ºcher, W√∂rterb√ºcher und Kurse</a></li>
<li><a href="../de467015/index.html">JWT: Digital Signature Attack VS MAC Attack</a></li>
<li><a href="../de467017/index.html">Was ist HED / MRSD und wof√ºr ist es?</a></li>
<li><a href="../de467019/index.html">Entwerfen von Dashboards f√ºr die E-Commerce-Website f√ºr Webanalysen. Teil 3: SEO Channel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>