<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≥üèæ üë©üèæ‚Äçüç≥ üë®‚Äçüëß‚Äçüëß Graphismes vraiment simples en R pour la science et le journalisme üë©üèΩ‚Äçü§ù‚Äçüë®üèæ üïì ü§¥üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R est un outil tr√®s puissant pour travailler avec des statistiques: du pr√©traitement √† la construction de mod√®les de toute complexit√© et des graphique...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Graphismes vraiment simples en R pour la science et le journalisme</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486024/"><p>  R est un outil tr√®s puissant pour travailler avec des statistiques: du pr√©traitement √† la construction de mod√®les de toute complexit√© et des graphiques correspondants. </p><br><p>  Une simple demande Google fournira une grande quantit√© de documentation sur la fa√ßon ¬´d'utiliser R facilement et rapidement¬ª. Il y aura d'√©normes livres et de nombreuses notes sur le <a href="https://stackoverflow.com/questions/tagged/r">d√©bordement de pile</a> , qui, √† premi√®re vue, semblent √™tre une mine d'exemples sans fin, chacun en deux chefs d'accusation va collecter le code n√©cessaire pour r√©soudre un probl√®me sp√©cifique.  Cependant, en r√©alit√©, ce n'est pas du tout vrai.  Il y a tr√®s peu de documents qui diraient, par exemple, comment construire un programme simple "√† partir de z√©ro" avec des recettes pr√™tes √† l'emploi pour r√©soudre les difficult√©s qui surgiront au cours de la r√©solution de ce probl√®me. </p><br><p>  Pour r√©soudre des probl√®mes pratiques, des instructions sp√©cifiques √©tape par √©tape sont n√©cessaires, et non une description d√©taill√©e de la pleine puissance d'un package.  De plus, les √©tudes de cas toutes faites (les m√™mes <a href="https://ru.wikipedia.org/wiki/%25D0%2598%25D1%2580%25D0%25B8%25D1%2581%25D1%258B_%25D0%25A4%25D0%25B8%25D1%2588%25D0%25B5%25D1%2580%25D0%25B0">iris</a> ) sont souvent peu utiles, car elles sautent imm√©diatement l'une des √©tapes les plus importantes du travail avec les statistiques - la collecte pr√©liminaire et le traitement des donn√©es elles-m√™mes.  Mais c'est pr√©cis√©ment pour ce travail que presque une grande partie du temps prend souvent!  Un probl√®me distinct est la cr√©ation d'horaires qui correspondent aux normes formelles et plus souvent informelles d'un certain environnement professionnel. </p><br><p>  Mes coll√®gues et moi devons r√©guli√®rement faire de plus en plus de visualisations de statistiques et de mod√®les bas√©s sur eux pour publier des r√©sultats scientifiques.  Comme les √©tudes concernent l'√©conomie, nombre de ces travaux sont similaires au journalisme professionnel. </p><br><p>  √Ä un moment donn√©, il est devenu clair que pour un travail d'√©quipe efficace, une sorte de pipeline de traitement des statistiques √† part enti√®re est n√©cessaire.  Cet article est n√© comme un guide d'introduction pour les coll√®gues et une feuille de triche pour moi-m√™me pour faire fonctionner ce convoyeur.  Il semble que ce mat√©riel puisse √™tre utile √† un public plus large. </p><a name="habracut"></a><br><h1 id="grafika-v-r-bez-boli-poshagovoe-rukovodstvo">  Graphiques sans douleur R: Proc√©dure pas √† pas </h1><br><h2 id="bazovaya-nastroyka-r">  R√©glage de base R </h2><br><p>  Pour fonctionner, vous avez besoin d'un bundle standard: <a href="https://www.r-project.org/">R</a> + <a href="https://rstudio.com/products/rstudio/download/">RStudio</a> .  Ils sont disponibles gratuitement pour toutes les plateformes courantes.  R est install√© en premier, puis RStudio.  Il n'y a g√©n√©ralement aucun probl√®me. </p><br><p>  Avant de travailler, il est pr√©f√©rable d'enregistrer imm√©diatement le nouveau script quelque part dans votre syst√®me de fichiers et d'installer imm√©diatement le r√©pertoire de travail R dans le dossier o√π le script est stock√© (menu Session - D√©finir le r√©pertoire de travail - Vers l'emplacement du fichier source).  La derni√®re note est importante, car sinon, le d√©marrage d'un script externe ou natif apr√®s le red√©marrage de RStudio n'aura pas lieu.  Pour une raison quelconque, RStudio ne le fait pas par d√©faut, ce qui serait logique. </p><br><p>  M√™me dans le package de base R, il existe des outils de visualisation standard (fonction de <em>trac√©</em> ) qui vous permettent de cr√©er de nombreux types de graphiques, mais n√©anmoins, ces fonctionnalit√©s ne sont clairement pas suffisantes pour des illustrations compl√®tes et hautement personnalisables. </p><br><p>  La biblioth√®que de graphiques en R la plus utilis√©e est le paquet <a href="https://ggplot2.tidyverse.org/">ggplot2</a> , que nous utiliserons √©galement. </p><br><p>  Il vaut √©galement la peine d'installer imm√©diatement les packages <em>readxl</em> (pour lire les fichiers .xls, .xlsx) et <em>dplyr</em> (pour travailler avec les tableaux), les <em>√©chelles</em> (pour travailler avec diff√©rentes √©chelles de donn√©es), <em>Cairo</em> (pour dessiner des graphiques de ggplot vers des fichiers).  Tout cela peut √™tre fait avec une seule commande: </p><br><pre><code class="plaintext hljs">install.packages("ggplot2", "readxl", "scales", "dplyr", "Cairo")</code> </pre> <br><h2 id="sbor-i-podgotovka-dannyh">  Collecte et pr√©paration des donn√©es </h2><br><p>  La chose la plus surprenante est que cette √©tape de la litt√©rature, qu'il s'agisse d'un livre th√©orique s√©rieux sur les statistiques th√©oriques appliqu√©es ou de directives pour des progiciels statistiques sp√©cifiques, est consacr√©e √† un espace et √† un temps catastrophiques.  N√©anmoins, selon l'exp√©rience de la recherche ind√©pendante et du leadership des √©tudiants et des coll√®gues juniors, il est connu que c'est √† ce stade que la part du lion du temps et des efforts peut chuter, il est donc tr√®s important de les √©conomiser m√™me lors de la r√©solution de probl√®mes purement techniques. </p><br><p>  Il y a deux questions ici: </p><br><ol><li>  Comment choisir le bon format de fichier? </li><li>  Quelle est la meilleure fa√ßon de structurer les donn√©es? </li></ol><br><p>  Avec le format, le dilemme est simple: CSV contre Microsoft Excel (pas si important, "nouveau" .xlsx ancien .xls).  Beaucoup de gens pensent que CSV b√©n√©ficie de la simplicit√© (en fait, c'est un fichier texte normal dans lequel les valeurs des colonnes sont s√©par√©es par une virgule ou un point-virgule) et de la vitesse.  Mais je choisis Excel pour deux raisons: premi√®rement, dans ce fichier, vous pouvez stocker plusieurs tableaux simultan√©ment sur diff√©rents onglets, et deuxi√®mement, plus important encore, vous n'avez pas √† penser √† choisir le bon s√©parateur de colonnes et la d√©cimale.  Pour CSV, cela doit souvent √™tre √©crit manuellement dans le code R et assurez-vous que le fichier de donn√©es est enregistr√© avec les m√™mes param√®tres. </p><br><p>  La structuration des donn√©es est un probl√®me plus complexe, n√©cessitant une compr√©hension de base de la fa√ßon dont les bases de donn√©es doivent √™tre organis√©es. <del>  Si vous n'entrez pas dans la th√©orie des bases de donn√©es relationnelles sur diff√©rentes formes normales, alors </del>  Le tableau de donn√©es doit √™tre <em>redondant,</em> c'est-√† <em>-</em> dire contenir des colonnes suppl√©mentaires.  Cela est n√©cessaire pour que plus tard dans le script dans R, vous puissiez s√©lectionner de mani√®re flexible certaines informations pour un traitement ult√©rieur.  Par exemple, si nous voulons repr√©senter une s√©rie temporelle primitive, nous devons cr√©er des colonnes qui correspondent √† toutes les caract√©ristiques de regroupement possibles.  Par exemple, s'il s'agit d'une s√©rie d'observations annuelles de la population de la ville conditionnelle de Severovostochinsk, nous aurons besoin des colonnes suivantes: <em>ann√©e</em> (ann√©e), <em>var</em> (nom de l'indicateur), <em>valeur</em> (valeur de l'indicateur). </p><br><div class="scrollable-table"><table><thead><tr><th>  ann√©e </th><th>  var </th><th>  valeur </th></tr></thead><tbody><tr><td>  1990 </td><td>  Taille de la population </td><td>  102 </td></tr><tr><td>  1991 </td><td>  Taille de la population </td><td>  103 </td></tr><tr><td>  1992 </td><td>  Taille de la population </td><td>  104 </td></tr></tbody></table></div><br><p>  Nous fournirons toutes les donn√©es d'entr√©e √† ce style de pr√©sentation des informations. </p><br><h2 id="primer">  Exemple </h2><br><p>  <strong>Objectif:</strong> √©tablir une comparaison de la dynamique des volumes de r√©colte en Russie, dans le district f√©d√©ral de Sib√©rie et dans le territoire de Krasno√Øarsk en 2009-2018. </p><br><p>  L'obtention de donn√©es pour cette t√¢che est assez simple: il suffit de trouver l'indicateur correspondant dans le <a href="https://fedstat.ru/indicator/37848">Syst√®me statistique et d'information interminist√©riel unifi√©</a> .  La subtilit√© vient ensuite.  Vous pouvez imm√©diatement t√©l√©charger les donn√©es au format .xlsx, puis les structurer manuellement comme indiqu√© ci-dessus.  Heureusement, certaines sources d'informations (par exemple, EMISS) vous permettent de le faire avec les capacit√©s du service lui-m√™me, ce qui simplifie consid√©rablement le travail et r√©duit le temps n√©cessaire pour le terminer. </p><br><p>  Ainsi, pour EMISS, il suffit de passer en mode ¬´Param√®tres¬ª (le bouton correspondant dans le coin sup√©rieur droit de la page de donn√©es) et de d√©placer tous les signes, √† l'exception de la ¬´P√©riode¬ª de la colonne ¬´Colonnes¬ª vers la colonne ¬´Lignes¬ª.  Il s'av√®re qu'une table est presque pr√™te pour nos travaux futurs.  De plus, d√©j√† dans Excel (ou tout autre √©diteur appropri√©), il est logique d'amener la structure du tableau sous une forme similaire √† celle pr√©sent√©e ci-dessus et de s'assurer que la premi√®re ligne ne contient que les noms des variables, avec des donn√©es en latin (en principe, R peut fonctionner avec des en-t√™tes en russe) mais cela n'est pas pratique lors de l'√©criture de code).  Le r√©sultat √©tait un tel tableau (un fragment est donn√© sur plusieurs lignes). </p><br><div class="scrollable-table"><table><thead><tr><th>  titre </th><th>  emplacement </th><th>  ann√©e </th><th>  valeur </th></tr></thead><tbody><tr><td>  Bois r√©colt√© </td><td>  La Russie dans son ensemble </td><td>  2009 </td><td>  158868.3 </td></tr><tr><td>  Bois r√©colt√© </td><td>  La Russie dans son ensemble </td><td>  2010 </td><td>  173633.7 </td></tr><tr><td>  Bois r√©colt√© </td><td>  FD sib√©rien </td><td>  2009 </td><td>  47161.58 </td></tr><tr><td>  Bois r√©colt√© </td><td>  Territoire de Krasno√Øarsk </td><td>  2009 </td><td>  12111.48 </td></tr><tr><td>  Bois r√©colt√© </td><td>  Territoire de Krasno√Øarsk </td><td>  2010 </td><td>  12078,6 </td></tr></tbody></table></div><br><p>  Vous pouvez maintenant appeler cette <code>logging</code> feuille, enregistrer l'int√©gralit√© du livre dans le fichier <code>graphs.xlsx</code> et acc√©der √† RStudio. </p><br><p>  Nous connectons les biblioth√®ques n√©cessaires. </p><br><pre> <code class="plaintext hljs">library(ggplot2) library(readxl) library(Cairo) library(scales) library(dplyr)</code> </pre> <br><p>  Si un calendrier est en cours de pr√©paration pour une publication en langue russe, vous devez d√©finitivement configurer les param√®tres r√©gionaux appropri√©s.  L'option la plus moderne qui fonctionnera dans la plupart des cas est, bien s√ªr, l'encodage UTF-8: </p><br><pre> <code class="plaintext hljs">Sys.setlocale("LC_ALL", "ru_RU.UTF-8")</code> </pre> <br><p>  Si le syst√®me est ancien (certains anciens Windows ou Linux), vous devrez d'abord comprendre quel encodage est utilis√© par d√©faut - ce n'est pas une t√¢che aussi simple, ce qui est loin de l'objectif de cet article. </p><br><p>  Vous devez maintenant charger les donn√©es dans R. </p><br><pre> <code class="plaintext hljs">df_logging &lt;- read_excel("graphs.xlsx", sheet ="logging")</code> </pre> <br><p>  L'option de <code>sheet</code> d√©finit ici le nom de la feuille dans le classeur Excel √† partir duquel les donn√©es seront charg√©es. </p><br><p>  Nous construisons la version la plus simple du planning requis. </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value)) + geom_line(aes(linetype=location))</code> </pre> <br><img src="https://habrastorage.org/webt/us/fr/of/usfrof2gizhjlejcid_nvctyf6y.png"><br><p>  En principe, quasiment ¬´pr√™t √† l'emploi¬ª s'est av√©r√© √™tre un calendrier tr√®s digne, ce qui est tout √† fait appropri√© pour une premi√®re analyse du processus √† l'√©tude, mais du point de vue d'une √©ventuelle publication, il n√©cessite encore un raffinement important. </p><br><p>  Tout d'abord, apportons le style graphique √† un style plus acad√©mique.  Le paquet <code>ggplot2</code> a plusieurs <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">th√®mes de</a> base pr√™ts √† l'emploi.  Le th√®me de <code>theme_classic</code> peut √™tre reconnu comme le plus adapt√© √† notre cas.  Dans le cadre de sa configuration, vous pouvez d√©finir imm√©diatement la taille de base de la police et de son casque.  Mes pr√©f√©rences personnelles appartiennent au syst√®me de police moderne <a href="http://rus.paratype.ru/pt-sans-pt-serif">PT Sans, PT Serif, PT Mono</a> .  Mais, bien s√ªr, vous pouvez demander un Times ou Helvetica plus classique.  En outre, la publication dans laquelle la publication est pr√©vue peut avoir des instructions sp√©ciales √† cet √©gard.  Le point de base est d√©termin√© empiriquement √† 12 pt. </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value)) + geom_line(aes(linetype=location)) + theme_classic(base_family = "PT Sans", base_size = 12)</code> </pre> <br><img src="https://habrastorage.org/webt/qi/iu/xo/qiiuxoipgdyjymilgxmuobd1eqm.png"><br><p>  Ensuite, d√©placez la l√©gende du champ droit du graphique vers le bas (en utilisant l'instruction de <code>theme</code> ) et en m√™me temps donnez des noms significatifs aux axes (instruction de <code>labs</code> ).  Le long de l'axe Y, nous √©crivons le nom de l'indicateur avec des unit√©s de mesure ("Volumes d'enregistrement, millions de m√®tres cubes"), et supprimons les √©tiquettes le long de l'axe X, car il est clair que les ann√©es y sont marqu√©es. </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value)) + geom_line(aes(linetype=location)) + theme_classic(base_family = "PT Sans", base_size = 12) + theme(legend.title = element_blank(), legend.position="bottom", legend.spacing.x = unit(0.5, "lines")) + labs(x = "", y = " , . . ", color="")</code> </pre> <br><img src="https://habrastorage.org/webt/ia/lb/ww/ialbww1uazrcpr094vbiivbkw84.png"><br><p>  Pour rendre les unit√©s de mesure plus pratiques pour la perception, nous allons passer de mille m√®tres cubes.  m √† des millions.  Pour ce faire, divisez simplement les valeurs par 1000, c'est-√†-dire ajustez la premi√®re ligne de notre code comme suit: </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value/1000))</code> </pre> <br><p>  En m√™me temps, vous devez changer les unit√©s dans l'inscription: </p><br><pre> <code class="plaintext hljs">labs(x = "", y = " ,  . ", color="")</code> </pre> <br><p>  Et imm√©diatement, nous allons l√©g√®rement am√©liorer le style d'image en ajoutant des points pour indiquer chaque valeur observ√©e, pour lesquels nous ajouterons une instruction: </p><br><pre> <code class="plaintext hljs">geom_point(size=2)</code> </pre> <br><p>  Vous pouvez √©galement d√©finir explicitement le style des lignes elles-m√™mes.  Il est logique de faire de l'indicateur pour la Russie une ligne continue, et pour le district f√©d√©ral sib√©rien et le territoire de Krasno√Øarsk - diff√©rentes versions d'intermittent: </p><br><pre> <code class="plaintext hljs">scale_linetype_manual(values=c("twodash", "solid", "dotted"))</code> </pre> <br><p>  Maintenant, le code g√©n√©ral et le graphique ressemblent √† ceci: </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value/1000)) + geom_line(aes(linetype=location)) + geom_point(size=1) + theme_classic(base_family = "PT Sans", base_size = 12) + theme(legend.title = element_blank(), legend.position="bottom", legend.spacing.x = unit(0.5, "lines")) + scale_linetype_manual(values=c("twodash", "solid", "dotted")) + labs(x = "", y = " ,  . ", color="")</code> </pre> <br><img src="https://habrastorage.org/webt/x_/0i/-q/x_0i-qbvghhild9wwm3jab5kpcc.png"><br><p>  Il reste √† r√©soudre une t√¢che plus substantielle - augmenter le contenu informatif de notre calendrier.  Maintenant, on peut en d√©duire que, en g√©n√©ral, l'indicateur pour tous les objets d'observation a augment√©, d'ailleurs, depuis environ 2014, il est plus fort qu'auparavant.  Mais il serait beaucoup plus clair si nous repr√©sentions directement sur le graphique les valeurs de la premi√®re et de la derni√®re ann√©e et, par exemple, au sommet de 2011.  La nouvelle instruction <code>geom_text</code> aidera: </p><br><pre> <code class="plaintext hljs">geom_text(aes(label=format(value/1000, digits = 3, decimal.mark = ",")), data = subset(df_logging, year == 2009 | year == 2018 | year == 2011), check_overlap = TRUE, vjust=-0.8)</code> </pre> <br><p>  √Ä premi√®re vue, cela a l'air plut√¥t compliqu√©, et je dois dire que ce n'√©tait vraiment pas si facile de l'assembler.  Je vais essayer d'expliquer ce qui se passe ici.  En lui-m√™me, <code>geom_text</code> ajoute des √©tiquettes de texte au graphique.  Pour cette instruction, un ensemble de donn√©es est n√©cessaire.  Si nous sp√©cifions <code>df_logging</code> directement dedans, nous obtiendrions des inscriptions au-dessus de chaque point.  Cela se fait assez souvent, mais pour des s√©ries temporelles assez simples comme la n√¥tre, cette approche ne fera que cr√©er un bruit visuel inutile sans nous fournir de nouvelles informations sur le comportement de l'indicateur observ√©.  Par cons√©quent, nous ne prendrons que les ann√©es qui sont essentielles pour comprendre la dynamique de l'indicateur: 2009 (d√©but des observations), 2011 (pic local), 2018 (fin des observations).  Cela aidera le <code>subset</code> - <code>subset</code> standard. </p><br><p>  Pour l'affichage correct des nombres conform√©ment √† la tradition russophone, nous avons besoin d'une virgule comme s√©parateur des parties enti√®res et d√©cimales ( <code>decimal.mark</code> ), et pour couper le nombre de d√©cimales, l'instruction des chiffres.  Diverses exp√©riences avec elle, y compris l'utilisation de la fonction <code>round</code> , ont conduit au fait que si nous avons besoin d'une d√©cimale, nous devons passer la valeur <code>3</code> aux <code>digits</code> . </p><br><p>  L'option <code>check_overlap</code> n'est pas directement n√©cessaire ici, mais elle peut √™tre utile dans d'autres cas: c'est un contr√¥le automatique des √©tiquettes qui se chevauchent.  L'option vjust contr√¥le le placement vertical des √©tiquettes.  La valeur est s√©lectionn√©e en fonction de consid√©rations gustatives. </p><br><img src="https://habrastorage.org/webt/fk/m2/fb/fkm2fbzy05xdbulnx1rs8mznimu.png"><br><p>  Maintenant, le calendrier est vraiment int√©ressant √† consid√©rer! </p><br><p>  Mais un probl√®me inattendu a √©t√© d√©couvert - la valeur sup√©rieure droite est ¬´coup√©e¬ª par la taille verticale de l'image.  Il existe plusieurs fa√ßons de r√©soudre ce probl√®me.  Je suis sorti avec une l√©g√®re extension de l'√©chelle de l'axe vertical avec une limite sup√©rieure explicite de 250 millions de m√®tres cubes.  m: </p><br><pre> <code class="plaintext hljs">scale_y_continuous(limits = c(0,250))</code> </pre> <br><img src="https://habrastorage.org/webt/nm/sv/il/nmsvilg49qwuzhj3biqrhohepao.png"><br><p>  C'est fait!  Ainsi, le code final ressemble √† ceci: </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value/1000)) + geom_line(aes(linetype=location)) + geom_point(size=1) + theme_classic(base_family = "PT Sans", base_size = 12) + theme(legend.title = element_blank(), legend.position="bottom", legend.spacing.x = unit(0.5, "lines")) + geom_text(aes(label=format(value/1000, digits = 3, decimal.mark = ",")), data = subset(df_logging, year == 2009 | year == 2018 | year == 2011), check_overlap = TRUE, vjust=-0.8) + geom_text(aes(label=format(value/1000, digits = 3, decimal.mark = ",")), data = subset(df_logging, year == 2009 | year == 2018 | year == 2011), check_overlap = TRUE, vjust=-0.8) + scale_linetype_manual(values=c("twodash", "solid", "dotted")) + scale_y_continuous(limits = c(0,250)) + labs(x = "", y = " ,  . ", color="")</code> </pre> <br><blockquote>  L'image r√©sultante est incluse dans la monographie: La modernisation structurelle comme facteur d'augmentation de la comp√©titivit√© de la r√©gion (sur l'exemple du territoire de Krasno√Øarsk) / √©d.  Shishatsky N.G.- Novosibirsk: IEOPP SB RAS, 2020 (sous presse). </blockquote><br><h2 id="eksport">  Exporter </h2><br><p>  Le plug-in d'affichage graphique int√©gr√© √† RStudio vous permet d'exporter des images dans plusieurs formats sans commandes suppl√©mentaires, en quelques clics seulement.  Le probl√®me est que pour des t√¢ches pratiques, ce service est pratiquement inutile.  Lors de l'enregistrement au format raster (.jpg, .png), le param√®tre par d√©faut est tr√®s faible, donc lorsque vous importez une image, par exemple, dans Word, elle sera floue.  Avec le vecteur .eps ou .pdf, la situation est franchement pire: la sauvegarde se produit soit avec des erreurs qui ne permettent alors pas d'ouvrir le fichier, soit est sauvegard√©e sans possibilit√© d'utiliser des inscriptions en russe. </p><br><p>  La solution consiste √† utiliser la fonction <code>ggplot</code> package <code>ggplot</code> . </p><br><p>  Si la sortie n√©cessite un fichier raster standard, par exemple, au format .png, tout est assez simple: </p><br><pre> <code class="plaintext hljs">ggsave("logging.png", width=709, height=549, units="px")</code> </pre> <br><p>  La g√©om√©trie (options <code>width</code> et <code>height</code> ) et les unit√©s de mesure ( <code>units</code> ) peuvent √™tre omises, mais par d√©faut, l'image sera export√©e au carr√©, ce qui n'est gu√®re pratique.  Par cons√©quent, il est pr√©f√©rable de d√©finir votre propre proportion et la taille requise et de d√©finir ces param√®tres manuellement, comme cela est fait dans la ligne de code ci-dessus. </p><br><p>  Pour l'utilisation ult√©rieure de l'image dans des publications papier, il est raisonnable d'exporter l'image au format vectoriel, de sorte que plus tard dans la mise en page, il est possible de modifier librement la g√©om√©trie de l'image.  De nombreux magazines pr√©f√®rent le format .eps - il est √©galement pratique de l'utiliser pour l'exportation vers Word.  Nous aurons besoin du pilote Cairo d√©j√† install√© et connect√©: </p><br><pre> <code class="plaintext hljs">ggsave(filename = "export.eps", width=15, height=11.6, units="cm", device = cairo_ps)</code> </pre> <br><p>  Les fichiers seront enregistr√©s dans le r√©pertoire courant o√π se trouve le script R. </p><br><h1 id="chto-esche-pochitat">  Quoi d'autre √† lire </h1><br><p>  La litt√©rature sur les graphiques en R est assez abondante.  Voici quelques exemples, dont le premier est le travail de l'auteur du paquet ggplot: </p><br><ul><li>  <a href="https://ggplot2-book.org/">Wickham, Hadley.</a>  <a href="https://ggplot2-book.org/">ggplot2: √âl√©gants graphiques pour l'analyse des donn√©es</a> ; </li><li>  <a href="https://r-graphics.org/">Chang, Winston.</a>  <a href="https://r-graphics.org/">R Graphics Cookbook, 2e √©dition</a> ; </li><li>  <a href="http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html">Prabhakaran, Selva.</a>  <a href="http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html">Top 50 des visualisations ggplot2 - La liste principale (avec code R complet)</a> . </li></ul><br><p>  Le livre le plus d√©taill√© et le plus d√©taill√© sur les graphiques en R en russe est probablement le livre de <a href="https://tsamsonov.github.io/r-geo-course/">Timofei Samsonov.</a>  <a href="https://tsamsonov.github.io/r-geo-course/">Visualisation et analyse de donn√©es g√©ographiques en langage R.</a>  Ceci est un excellent guide d√©taill√© de nombreux probl√®mes communs et sp√©cifiques qui peuvent √™tre r√©solus avec R. </p><br><p>  Vous pouvez √©galement recommander un livre en russe sur R en g√©n√©ral: <br>  <a href="https://github.com/ranalytics/data-mining">Shitikov V.K., Mastitsky S.E. Classification, r√©gression, algorithmes d'exploration de donn√©es utilisant R. 2017</a> . </p><br><p>  Un exemple int√©ressant et motivant est une <a href="http://johnburnmurdoch.github.io/slides/r-ggplot/">pr√©sentation puissante sur l'utilisation de ggplot2 dans la pr√©paration de dessins pour le journal influent Financial Times</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr486024/">https://habr.com/ru/post/fr486024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr486000/index.html">ADSM3. Syst√®mes IPAM / DCIM</a></li>
<li><a href="../fr486006/index.html">Stocker l'√©tat du chat sur la pile</a></li>
<li><a href="../fr486010/index.html">Faire une d√©mo pour un vieux t√©l√©phone - AONDEMO</a></li>
<li><a href="../fr486014/index.html">Visite SLAC: Laboratoire national des acc√©l√©rateurs du D√©partement am√©ricain de l'√©nergie √† Stanford</a></li>
<li><a href="../fr486018/index.html">R√©sultats de l'enqu√™te de session</a></li>
<li><a href="../fr486028/index.html">R√©seaux de neurones dans la production de proth√®ses dentaires</a></li>
<li><a href="../fr486030/index.html">TL-SREET 55 5K LED Light Street Review</a></li>
<li><a href="../fr486032/index.html">Comment devenir concepteur de dialogues</a></li>
<li><a href="../fr486034/index.html">Acc√®s rapide √† la gestion des produits via Open source</a></li>
<li><a href="../fr486036/index.html">Analyse de sentiment de texte sur Node.js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>