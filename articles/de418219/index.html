<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📪 💠 ♥️ MIT-Kurs "Computer Systems Security". Vorlesung 6: Chancen, Teil 2 🧕 💭 👨🏿‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Massachusetts Institute of Technology. Vorlesung # 6.858. "Sicherheit von Computersystemen." Nikolai Zeldovich, James Mickens. 2014 Jahr 
 Computer Sy...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MIT-Kurs "Computer Systems Security". Vorlesung 6: Chancen, Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/418219/"><h3>  Massachusetts Institute of Technology.  Vorlesung # 6.858.  "Sicherheit von Computersystemen."  Nikolai Zeldovich, James Mickens.  2014 Jahr </h3><br>  Computer Systems Security ist ein Kurs zur Entwicklung und Implementierung sicherer Computersysteme.  Die Vorträge behandeln Bedrohungsmodelle, Angriffe, die die Sicherheit gefährden, und Sicherheitstechniken, die auf jüngsten wissenschaftlichen Arbeiten basieren.  Zu den Themen gehören Betriebssystemsicherheit, Funktionen, Informationsflussmanagement, Sprachsicherheit, Netzwerkprotokolle, Hardwaresicherheit und Sicherheit von Webanwendungen. <br><br>  Vorlesung 1: „Einführung: Bedrohungsmodelle“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 2: „Kontrolle von Hackerangriffen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 3: „Pufferüberläufe: Exploits und Schutz“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 4: „Trennung von Privilegien“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <br>  Vorlesung 5: „Woher kommen Sicherheitssysteme?“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> <br>  Vorlesung 6: „Chancen“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3</a> <a name="habracut"></a><br><br>  <b>Teilnehmerin:</b> Können wir daraus schließen, dass jede Gelegenheit einen Prozess hat? <br><br>  <b>Professor: Ich</b> bezweifle es.  Sie können so viele Prozesse haben, wie Sie möchten, für eine Möglichkeit können mehrere Prozesse existieren.  Einfach ausgedrückt, Sie benötigen nicht unbedingt einen separaten Prozess für jede Gelegenheit.  Weil es einen <b>fort1-</b> Prozess gibt, der viele Dateien öffnen und viele Funktionen an die privilegierte Komponente von <b>fort übergeben kann</b> . <br><br><img src="https://habrastorage.org/webt/ba/x4/pr/bax4pr8nb9rufhd5_f24v9imtdi.jpeg"><br><br>  Der Grund, warum Sie glauben, dass Sie für jede Gelegenheit, mit der wir uns befassen, einen separaten Prozess benötigen, betrifft diese seltsame Wechselwirkung zwischen Funktionen und externen Berechtigungen. <br><br>  Weil <b>fort1</b> ein externes Privileg hat.  Und was wir tun, ist im Grunde, dieses externe Privileg in diesem <b>Fort1-</b> Prozess in <b>Fähigkeit</b> <b>umzuwandeln</b> .  Wenn Sie also mehrere verschiedene Arten von externen Berechtigungen oder verschiedene Berechtigungen haben, die Sie mit Vorsicht verwenden möchten, möchten Sie wahrscheinlich einen separaten Prozess, der über diese Berechtigungen verfügt.  Wenn Sie einen bestimmten Satz von Berechtigungen verwenden möchten, werden Sie den entsprechenden Prozess zur Durchführung der Trennung auffordern. Wenn dies erfolgreich ist, werden Sie den Prozess <b>auffordern</b> , <b>Capability</b> an Sie zurückzugeben. <br><br>  Tatsächlich gab es ein solches Design des Betriebssystems, das vollständig auf Funktionen basierte und keine externen Berechtigungen hatte.  Und das ist cool, aber für den Einsatz in einem realen System nicht sehr praktisch.  Es stellt sich heraus, dass Sie in Wirklichkeit weniger externe Berechtigungen als vielmehr die Möglichkeit wünschen, ein Objekt zu benennen und jemandem von diesem Objekt zu erzählen, ohne die Rechte auf dieses Objekt zu übertragen. <br><br>  Vielleicht weiß ich nicht, welche Privilegien Sie in Bezug auf ein allgemeines Dokument haben, aber ich möchte Sie darüber informieren, dass wir dieses allgemeine Dokument haben.  Wenn Sie es lesen können, lesen Sie es.  Wenn Sie es hineinschreiben, schreiben Sie.  Ich möchte aber keine Rechte daran übertragen.  Ich möchte dir nur sagen: "Hey, dieses Ding, probier es aus!"  Dies ist also eine Unannehmlichkeit in der Welt der Möglichkeiten, da Sie wirklich gezwungen sind, niemals über Objekte zu sprechen, ohne Rechte an diesem Objekt zu übertragen. <br><br>  Daher ist es wichtig, dies zu wissen und diese Funktion in einigen Teilen des Systems zu verwenden, sich jedoch nicht darauf zu verlassen, dass dies die Lösung für die Sicherheit des Systems darstellt. <br><br><img src="https://habrastorage.org/webt/iu/v8/sg/iuv8sgqyettpxg1oaf1jcuvs-e8.jpeg"><br><br>  <b>Zielgruppe:</b> Angenommen, der Prozess verfügt über die Funktionen, die ihm von einem anderen Prozess zugewiesen wurden. Es stellt sich jedoch heraus, dass er in Bezug auf ein Objekt bereits über hervorragende Funktionen verfügt.  Kann ein Prozess sie vergleichen, um sicherzustellen, dass sie dasselbe Objekt berühren?  Oder wird er die großen Chancen nutzen? <br><br>  <b>Professor:</b> Tatsache ist, dass der Prozess Fähigkeiten nicht implizit verwendet, daher ist dies eine sehr nützliche Eigenschaft von Fähigkeiten.  Sie müssen auf jeden Fall angeben, welche der Optionen Sie verwenden.  Denken Sie also an einen Dateideskriptor.  Angenommen, ich gebe Ihnen einen offenen Dateideskriptor für eine Datei, der schreibgeschützt ist.  Dann gibt Ihnen jemand anderes eine weitere Möglichkeit für andere Dateien, einschließlich dieser Datei.  Mit einer neuen Funktion können Sie Dateien lesen und schreiben. <br><br>  Wenn Sie in diesem Fall versuchen, in die erste Datei zu schreiben, ist dies zweifellos erfolgreich, da ein zusätzlicher Dateideskriptor dafür geöffnet wird, der nicht nur das Lesen, sondern auch das Schreiben ermöglicht.  Das ist also eine coole Sache, wenn Sie keine zusätzlichen externen Berechtigungen benötigen.  Sie haben einfach alle diese Möglichkeiten, weil die Leute solche Bibliotheken tatsächlich gebaut haben und im Prinzip Ihre Fähigkeiten für Sie verwalten.  Sie sammeln sie irgendwie.  Und wenn sie versuchen, eine Operation durchzuführen, suchen sie nach Möglichkeiten und finden diejenigen, die sie funktionieren lassen. <br><br>  Dadurch kehren Sie zur externen Kontrolle der <b>Umgebungsbehörde zurück,</b> die Sie vermeiden wollten.  Ein positives Merkmal der Möglichkeiten ist, dass es sich um ein Software-Design handelt, das Ihr Leben vereinfacht.  Dies ist bei Sicherheitslösungen ungewöhnlich.  Diese Eigenschaft erleichtert Ihnen das Schreiben von Code, der auf die Berechtigungen verweist, die Sie aus Sicherheitsgründen verwenden möchten.  Und das ist ziemlich einfach, Code zu schreiben. <br>  Die <b>Fähigkeit</b> kann jedoch andere Probleme lösen.  Daher treten häufig Probleme bei der Verwaltung von Berechtigungen auf, wenn Sie nicht vertrauenswürdigen Code ausführen müssen.  Weil Sie wirklich kontrollieren möchten, welche Berechtigungen Sie gewähren, da sonst die Gefahr besteht, dass von Ihnen bereitgestellte Berechtigungen missbraucht werden.  Und dies ist eine etwas andere Sichtweise, aus der sich die Autoren des Artikels über <b>Capsicum</b> Möglichkeiten nähern.  Sie sind sich natürlich des Problems der externen Autorität bewusst, aber dies ist ein etwas anderes Problem, das Sie lösen können oder nicht.  Aber im Grunde kümmern sie sich darum, dass sie eine wirklich große privilegierte Anwendung haben, und sie befürchten, dass es Fehler in verschiedenen Teilen des Quellcodes dieser Anwendung geben wird.  Daher möchten sie die Berechtigungen der verschiedenen Komponenten dieser Anwendung reduzieren. <br><br>  In diesem Sinne ist die Geschichte <b>OKWS</b> sehr ähnlich.  Wenn Sie also eine große Anwendung haben, teilen Sie sie in Komponenten auf und beschränken die Berechtigungen für jede Komponente.  Dies ist in <b>OKWS</b> sicherlich sinnvoll.  Gibt es andere Situationen, in denen Sie möglicherweise Bedenken haben, Berechtigungen zu teilen?  Ich denke, dass sie in ihrem Artikel Beispiele beschreiben, die ich versuchen sollte, zum Beispiel <b>tcpdump</b> und andere Anwendungen auszuführen, die Netzwerkdaten analysieren.  Warum sind sie so besorgt über Anwendungen, die Netzwerkeingaben analysieren?  Was passiert in <b>tcpdump</b> ?  Was ist der Grund für ihre Paranoia? <br><br>  <b>Zielgruppe:</b> Ein Angreifer kann steuern, was gesendet wird und was aufgerufen wird, um beispielsweise Pakete auszuführen. <br><br>  <b>Professor:</b> Ja, sie kümmern sich wirklich um Angriffe dieser Art und darum, ob der Angreifer die Eingabedaten wirklich kontrollieren kann?  Weil es ziemlich problematisch ist, wenn Sie <b>C-</b> Code schreiben, der Datenstrukturen verarbeiten soll.  Offensichtlich werden Sie viele Zeiger manipulieren, indem Sie Bytes in Arrays kopieren, die Speicher zuweisen.  Gleichzeitig kann es leicht zu Fehlern bei der Speicherverwaltung kommen, die zu katastrophalen Folgen führen. <br><br>  Dies ist der Grund, warum sie beschlossen haben, die Arbeit ihres Netzwerkprotokolls und anderer Dinge in der Sandbox zu erkennen. <br><br><img src="https://habrastorage.org/webt/qe/74/kp/qe74kpxuvojns1ezini63--mv90.jpeg"><br><br>  Ein weiteres Beispiel für die reale Welt, in der die Freigabe von Berechtigungen erforderlich ist, ist Ihr Browser.  Möglicherweise möchten Sie Ihr Flash-Plugin, Ihre <b>Java-</b> Erweiterung oder etwas anderes isolieren.  Weil sie ein weites Feld für Angriffe darstellen, die ziemlich aggressiv eingesetzt werden. <br><br>  Das scheint also ein kluger Plan zu sein.  Wenn Sie beispielsweise eine Software schreiben, möchten Sie das Verhalten der Komponenten in der Sandbox überprüfen.  Im Allgemeinen bezieht sich dies auf das, was Sie aus dem Internet heruntergeladen haben und mit weniger Berechtigungen ausführen möchten.  Passt der von <b>Capsicum</b> angebotene Isolationsstil <b>dazu</b> ?  Ich könnte einen zufälligen Bildschirmschoner oder ein Spiel aus dem Internet herunterladen.  Und ich möchte sie auf meinem Computer ausführen, aber stellen Sie zuerst sicher, dass sie nicht alles ruinieren, was ich habe.  Würden Sie dafür <b>Capsicum verwenden</b> ? <br><br>  <b>Zielgruppe:</b> Sie können ein Sandbox-Programm schreiben, in dem Sie <b>Capsicum verwenden</b> . <br><br>  <b>Professor:</b> richtig.  Wie würden Sie es verwenden?  Nun, Sie würden einfach mit dem <b>Befehl cap_enter</b> in den Sandbox-Modus <b>wechseln</b> und dann das Programm ausführen.  Erwarten Sie, dass dies funktioniert?  Ich denke, es wird ein Problem geben.  Dies hängt mit der Tatsache zusammen, dass das Programm möglicherweise nicht versucht, die gemeinsam genutzte Bibliothek zu öffnen, wenn es nicht erwartet, dass es von <b>Capsicum</b> isoliert wird. Dies ist jedoch nicht möglich, da es so etwas wie <b>/ lib / ...</b> nicht öffnen kann, da dies nicht der Fall ist im <b>Capability-</b> Modus erlaubt. <br><br>  Daher sollten diese Sandbox-Methoden für die Dinge verwendet werden, für die der Entwickler vorausgesehen hat, dass sie in diesem Modus ausgeführt werden können.  Es gibt wahrscheinlich andere Sandbox-Methoden, die für unveränderten Code verwendet werden können, aber dann können sich die Anforderungen geringfügig ändern.  Daher sind die Entwickler von <b>Capsicum</b> nicht sehr besorgt über die Abwärtskompatibilität.  Wenn wir Dateien anders öffnen müssen, werden wir sie anders öffnen.  Wenn Sie jedoch den vorhandenen Code belassen möchten, benötigen Sie etwas mehr, z. B. eine vollwertige virtuelle Maschine, damit Sie den Code darin ausführen können.  Dies wirft die Frage auf: Sollten wir virtuelle Maschinen für die <b>Capsicum-</b> Sandbox verwenden? <br><br>  <b>Zielgruppe:</b> In diesem Fall ist ein Speicherüberlauf möglich. <br><br>  <b>Professor:</b> Ja, das ist es.  Aber was ist, wenn uns das Gedächtnis egal ist?  Virtuelle Maschinen sind also wahrscheinlich sehr gut und verbrauchen nicht viel Speicher.  Aus welchem ​​anderen Grund sollten wir <b>VM</b> in <b>Capsicum</b> nicht verwenden? <br><br>  <b>Zielgruppe: Es ist</b> schwierig, die Netzwerkaktivität zu steuern. <br><br>  <b>Professor:</b> Richtig!  Es ist schwierig zu steuern, was im Netzwerk geschieht, da Sie entweder der virtuellen Maschine keinen Zugriff auf das Netzwerk gewähren oder eine Verbindung zum Netzwerk über den <b>NAT-</b> Modus oder über die <b>Vorschau</b> oder <b>VMWare herstellen</b> .  Aber dann kann Ihre Sandbox auf das gesamte Internet zugreifen.  Daher müssen Sie das Netzwerk detaillierter verwalten, indem Sie möglicherweise Firewall-Regeln für die virtuelle Maschine festlegen usw.  Das ist nicht so gut. <br><br>  Aber was ist, wenn Sie sich nicht für das Netzwerk interessieren?  Angenommen, Sie haben nur eine Art Video. Was ist, wenn Sie ein einfaches Video verarbeiten oder <b>tcpdump</b> analysieren <b>?</b>  In diesem Fall starten Sie einfach die virtuelle Maschine, sie beginnt mit dem Parsen Ihrer <b>tcpdump-</b> Pakete und wirft Sie nach der Präsentation zurück, die <b>tcpdump</b> an den Benutzer schreiben möchte, da keine echte Netzwerk-E / A vorhanden ist.  Gibt es einen anderen Grund? <br><br><img src="https://habrastorage.org/webt/sy/iu/rs/syiurso7-blsxdvzyhhbwpfia0w.jpeg"><br><br>  <b>Zielgruppe:</b> Weil der Aufwand für die Initialisierung immer noch hoch ist. <br><br>  <b>Professor:</b> Ja, dies kann der anfängliche Aufwand beim Starten einer virtuellen Maschine sein, der die Leistung verringert.  So ist es wahr. <br><br>  <b>Teilnehmerin:</b> Nun, vielleicht möchten Sie immer noch Rechte an einer Datenbank und dergleichen haben. <br><br>  <b>Professor:</b> Ja.  Im Allgemeinen bedeutet dies jedoch, dass Sie über echte Daten verfügen, mit denen Sie arbeiten, und dass es wirklich schwierig ist, diese zu trennen.  Daher sind virtuelle Maschinen in der Tat ein viel größerer Freigabemechanismus, aufgrund dessen Sie Dinge nicht einfach freigeben können.  Dies ist also gut für Situationen, in denen Sie ein vollständig isoliertes Programm haben, das Sie ausführen möchten, und gleichzeitig keine Dateien, Verzeichnisse und Prozesse freigeben und diese einfach separat arbeiten lassen möchten. <br><br>  Das ist also großartig.  Dies ist wahrscheinlich in gewisser Weise eine stärkere Isolation als die von <b>Capsicum</b> , da es weniger Möglichkeiten gibt, dass etwas schief geht.  Diese Isolierung ist jedoch in vielen Situationen nicht anwendbar, wenn Sie <b>Capsicum verwenden</b> möchten.  Denn in <b>Capsicum können</b> Sie Dateien mithilfe der Funktionen der Sandbox mit großer Genauigkeit austauschen. <br><br>  Nehmen wir also <b>tcpdump</b> und sehen, warum es schwierig ist, es mit dem <b>Unix-</b> Mechanismus zu isolieren.  Wenn Sie sich erinnern, funktioniert <b>tcpdump</b> in <b>Capsicum</b> so, dass es einige spezielle Sockets öffnet und dann die Parsing-Logik für Netzwerkpakete ausführt, wonach sie auf Benutzerterminals gedruckt wird.  Was wird also für eine <b>Unix-</b> basierte <b>tcpdump-</b> Sandbox benötigt?  Sind Ihre Privilegien begrenzt?  Das Problem mit <b>Unix</b> ist, dass die einzige Möglichkeit, Berechtigungen wirklich zu ändern, darin besteht, die Eingabe in der Entscheidungsfunktion zu ändern, die entscheidet, ob Sie wirklich auf ein Objekt zugreifen können oder nicht.  Und das einzige, was Sie wirklich ändern können, sind die Privilegien des Prozesses.  Dies bedeutet, dass der Prozess die <b>UID an eine</b> andere Person senden kann. <br><br>  Sie können auch die Berechtigungen für verschiedene Objekte auf Ihrem System ändern.  Tatsächlich können Sie beide Lösungen verwenden. <br><br>  Wenn Sie <b>tcpdump</b> in der Sandbox isolieren möchten, müssen Sie wahrscheinlich eine zusätzliche Benutzer-ID auswählen und während der Arbeit zu dieser wechseln.  Dies ist jedoch kein idealer Plan, da Sie nicht mehrere Instanzen von <b>tcpdump</b> unter derselben Benutzer- <b>ID</b> ausführen werden.  Wenn ich eine <b>tcpdump-</b> Instanz kompromittiere, bedeutet dies nicht, dass ich einem Angreifer erlauben möchte, diesen Faktor zur Steuerung anderer <b>tcpdump-</b> Instanzen zu verwenden, die auf meinem Computer ausgeführt werden.  Dies ist möglicherweise eine schlechte Entscheidung, in diesem Fall <b>uid</b> zu verwenden. <br><br>  Ein weiteres Problem besteht darin, dass Sie unter <b>Unix</b> über Root-Rechte verfügen müssen, um die Benutzer-ID, die Berechtigungen, den Prozess oder etwas anderes zu ändern oder sie auf etwas anderes umzustellen.  Das ist auch schlecht. <br><br>  Ein weiteres Problem ist, dass unabhängig von Ihrer <b>ID</b> Open-Access-Dateien vorhanden sein können.  Ihr System verfügt möglicherweise über eine ganze Gruppe lesbarer oder beschreibbarer Dateien, z. B. eine Kennwortdatei.  Unabhängig von Ihrer <b>ID</b> kann der Prozess dieses Kennwort weiterhin lesen.  Das ist also auch nicht sehr schön. <br><br>  Um eine Sandbox unter <b>Unix</b> zu organisieren, sollten Sie wahrscheinlich beides tun: Ändern Sie die <b>UID</b> und überprüfen Sie sorgfältig die Berechtigungen für alle Objekte, um sicherzustellen, dass Sie keine nicht isolierten geöffneten Dateien haben, die von einem Hacker überschrieben oder gelesen werden können.  Ich denke, dass Sie dabei einen anderen Mechanismus erhalten, den Sie verwenden können.  Wenn Sie es bis zum Ende einreichen, können Probleme beim Freigeben von Dateien oder Verzeichnissen auftreten. <br><br>  Nun wollen wir sehen, wie <b>Capsicum</b> versucht, dieses Problem zu lösen.  Sobald wir in den "Sandbox" -Modus wechseln, ist hier alles nur über Opportunities verfügbar.  Wenn Sie nicht über <b>Capability</b> verfügen, können Sie daher einfach nicht auf Objekte zugreifen. <br><br>  Diese Leute im Artikel machen eine große Wette auf den globalen Namespace.  Was ist dieser globale Namespace und warum sind sie so besorgt darüber? <br><br>  Ihr Dateisystem selbst ist eine Art leuchtendes Beispiel für einen globalen Namespace.  Sie können einen Schrägstrich schreiben und jede gewünschte Datei dahinter auflisten.  Gehen Sie zum Beispiel zu jemandem im Home-Verzeichnis, zum Beispiel <b>/ home / nickolai / ...</b> Warum ist das schlecht?  Warum sind sie gegen den globalen Namespace in <b>Capsicum</b> ?  Was meinen Sie? <br><br><img src="https://habrastorage.org/webt/3h/er/dr/3herdr4fh07qkewmu2rdz02f0tq.jpeg"><br><br>  <b>Zielgruppe:</b> Wenn Sie die falschen Berechtigungen haben, können Sie bei Verwendung von Berechtigungen in Schwierigkeiten geraten. <br><br>  <b>Professor:</b> Ja.  Das Problem ist, dass es immer noch <b>Unix ist</b> .  Daher gibt es immer noch reguläre Dateiberechtigungen.  Wenn Sie also wirklich einen Prozess in der Sandbox isolieren möchten, können Sie möglicherweise nichts im System lesen oder schreiben.  Wenn Sie es jedoch schaffen, eine beschreibbare Datei im Home-Verzeichnis eines dummen Benutzers zu finden, ist dies für den Sandbox-Client eher unangenehm. <br><br>  Im Allgemeinen bestand ihre Idee darin, alle Objekte des Prozesses genau aufzulisten.  Weil Sie einfach alle Features in einer Dateideskriptortabelle oder an einer anderen Stelle auflisten können, an der die Features für Sie gespeichert sind.  Und dies ist das einzige, was der Prozess berühren kann. <br><br>  Wenn Sie jedoch Zugriff auf den globalen Namespace haben, ist dies möglicherweise nicht möglich.  Denn selbst wenn Sie nur über eine begrenzte Anzahl von Funktionen verfügen, können Sie die Zeile mit einem Schrägstrich beginnen und eine neue Datei schreiben, und Sie werden nie wissen, auf welche Operationen oder Objekte dieser Prozess zugreifen kann. <br><br>  Aus diesem Grund sind sie so besorgt über den globalen Namespace, weil dies ihrem Ziel widerspricht, alles genau zu steuern, auf das der Sandbox-Prozess Zugriff haben sollte.  Auf diese Weise versuchten sie, globale Namespaces mit vielen Kerneländerungen in <b>FreeBSD zu entfernen</b> .  In ihrem Fall musste der Kernel sicherstellen, dass alle Vorgänge einige Funktionen durchlaufen, nämlich den Dateideskriptor. <br><br>  Lassen Sie uns prüfen, ob wir wirklich Kerneländerungen benötigen.  Was ist, wenn wir es einfach in der Bibliothek machen?  Immerhin implementieren wir <b>Capsicum</b> , das bereits eine Bibliothek hat.  Wir ändern lediglich alle diese Funktionen, z. B. "Öffnen, Lesen, Schreiben", um ausschließlich <b>Capability-</b> Funktionen zu verwenden.  Dann durchlaufen alle Vorgänge einige Funktionen, suchen sie in der Dateitabelle und so weiter.  Wird das funktionieren? <br><br><img src="https://habrastorage.org/webt/ik/r9/bi/ikr9biwkqpm5t4rhxywr38rp8cg.jpeg"><br><br>  <b>Zielgruppe:</b> Sie können den <b>Syscall-</b> Systemaufruf jederzeit <b>ausführen</b> . <br><br>  <b>Professor:</b> Ja.  Das Problem ist, dass der Kernel eine Reihe von Systemaufrufen akzeptiert hat. Selbst wenn Sie eine gute Bibliothek implementieren, wird die Möglichkeit nicht verhindert, dass ein fehlerhafter oder kompromittierter Prozess einen Systemaufruf direkt ausführt.  Deshalb muss man den Kern irgendwie stärken. <br><br>  Im Compiler befindet sich das Bedrohungsmodell nicht im kompromittierten Compilerprozess und nicht in willkürlichem Code, sondern in der Nachlässigkeit des Programmierers.  Wenn sich der Programmentwickler also nicht irrt und das Richtige tut, reicht die Bibliothek wahrscheinlich aus. <br><br>   ,     ,             ,       .       -  ,       . <br><br>             ?  —   ,    <b>cap_enter</b> .   ,    <b>cap_enter</b> ?  ,       ? <br><br>    ,      ,      .  ,    ,      ,     .   <b>cap_enter</b>      ,           <b>open ()</b> ,       <b>openat</b> . <br><br>  Unix-       ,   ,   <b>open</b>    ,   <b>openat</b> ,       ,      ,    —    : <b>openat (dirfd,“name)</b> .     <b>openat</b>    <b>«name»</b>   ,     . <br><br><img src="https://habrastorage.org/webt/_j/yq/qc/_jyqqcpijlilsu3uerxc8xevlai.jpeg"><br><br>  ,       <b>Capability</b>   <b>open</b> ,      ,   ,        .              .    -   ?   -,    ?  ,   –    .        ,        ? <br><br> <b>:</b> ,       . <br><br> <b>:</b> .   ,          ,     .   ,        ,      .             ,      .       ,   ,     .       -,     . <br><br>   ,       ,   ,   ,    ,     .  ,     ,    .. ,     ,             ,          .    ? <br><br>       .     ?  ,  <b>Unix</b>         <b>PID</b> .  ,    <b>kill (25)</b>    <b>PID = 25</b> .     ,    .     <b>Capsicum</b> ?     ? <br><br> <b>:</b>    . <br><br> <b>:</b> . -,  . ,   <b>Unix</b>   ,  .  ,       <b>PID</b> ,    ,       <b>fork</b> ,   <b>pdfork</b> ,  «  ».     ,            -   . <br><br>     .      ,    .   ,        -   : «    «»  ,      ,   ,     ,   ».          .  ,     ,     -  . <br><br>       , ,    ,   .      ,     .      ,    ,              . <br><br><img src="https://habrastorage.org/webt/nt/rj/8q/ntrj8qi_6_4kplegcl_lao2jyig.jpeg"><br><br>    .     ,        «-»   .    ,       <b>openat</b>   ,      «-». ,               «-»,       . <br><br>     ?         ,    «-»   ? <br><br> <b>:</b>    ,       ,      .     ,      <b>Capability</b>        . <br><br> <b>:</b> ,  . <br><br> <b>:</b>   ,   ,     -    … <br><br> <b>:</b>   . <br><br> <b>:</b>      -  . <br><br> <b>:</b> ,           .     «-»    ?  ,    <b>openat</b>  -        <b>b/c/../..</b> ? <br><br>  ,    , ?      - ,       .  , ,  ,    <b>openat (d, “b/c/../..)</b>  <b>«c»</b>    ,   -    . <br><br><img src="https://habrastorage.org/webt/_l/hx/r5/_lhxr55o7-crnf5egjmgkgikhao.jpeg"><br><br>   .   ,        ,            ,      .            «-»,      .  ,          ,         . ,    ,      .   ,     <b>UID</b>    - ? <br><br> <b>:</b>      ,    . <br><br> <b>:</b> ,     . ,  ,   «» <b>UID</b> ?    :    <b>cap_enter</b>    <b>UID</b>  .    ,   .        ?     ? <br><br> <b>:</b> , <b>UID</b>     ,  , , , ,   - . <br><br> <b>:</b>  ,  .      «» <b>UID</b> . ,        ,      <b>UID</b> . ,         ,     ,   .   <b>UID</b>       . <br><br> 54:14  <br><br> : <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MIT-Kurs "Computer Systems Security".</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> 6: «»,  3</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/MlWK2YbZRZ8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> . <br><br>  Vielen Dank für Ihren Aufenthalt bei uns.  Gefällt dir unser Artikel?  Möchten Sie weitere interessante Materialien sehen?  Unterstützen Sie uns, indem Sie eine Bestellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aufgeben</a> oder sie Ihren Freunden empfehlen. <b>Habr-Benutzer erhalten 30% Rabatt auf ein einzigartiges Analogon von Einstiegsservern, das wir für Sie erfunden haben:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ganze Wahrheit über VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s $ 20 oder wie teilt man den Server?</a>  (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verfügbar). <br><br>  <b>Dell R730xd 2 mal günstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 GB DDR4 6 x 480 GB SSD 1 Gbit / s 100 TV von 249 US-Dollar</a> in den Niederlanden und den USA!</b>  Lesen Sie mehr über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgebäudes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern für 9.000 Euro für einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de418219/">https://habr.com/ru/post/de418219/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de418209/index.html">Wir erhalten Daten von Mercury 203.2T-Zählern auf RS-485</a></li>
<li><a href="../de418211/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 4: „Privilegien teilen“, Teil 3</a></li>
<li><a href="../de418213/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 5: „Woher kommen Sicherheitssysteme?“, Teil 1</a></li>
<li><a href="../de418215/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 5: „Woher kommen Sicherheitssystemfehler?“, Teil 2</a></li>
<li><a href="../de418217/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 6: „Chancen“, Teil 1</a></li>
<li><a href="../de418221/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 6: „Chancen“, Teil 3</a></li>
<li><a href="../de418223/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 7: Die Native Client Sandbox, Teil 1</a></li>
<li><a href="../de418225/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 7: Native Client Sandbox Teil 2</a></li>
<li><a href="../de418227/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 7: Die Native Client Sandbox, Teil 3</a></li>
<li><a href="../de418229/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 8: Netzwerksicherheitsmodell, Teil 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>