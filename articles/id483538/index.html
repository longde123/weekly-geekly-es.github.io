<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤷🏻 🚷 👩🏻‍🌾 Menghubungkan Layar 10 "ER-TFT101-1 ke STM32F429 via FMC 💇🏻 🤺 👨🏿‍🤝‍👨🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hari baik untuk semua Pada artikel ini kita akan menganalisis koneksi layar TFT ER-TFT101-1 (10 inci, driver RA8876) ke papan STM32F429L Discovery mel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menghubungkan Layar 10 "ER-TFT101-1 ke STM32F429 via FMC</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483538/">  Hari baik untuk semua  Pada artikel ini kita akan menganalisis koneksi layar TFT ER-TFT101-1 (10 inci, driver RA8876) ke papan STM32F429L Discovery melalui antarmuka paralel 1680 bit 8080 menggunakan modul FMC (pengendali memori fleksibel). <br><br><img src="https://habrastorage.org/webt/cp/ut/gd/cputgdq9cwztakwkxazqyzraay0.jpeg"><br><img src="https://habrastorage.org/webt/2m/om/jf/2momjfwxhdkw_lmxfx76jxeelpw.jpeg"><br><br><h4>  Tentang unit display </h4><br>  ER-TFT101-1 dari EastRising adalah rakitan matriks 10-inci TFT dengan resolusi 1024x600 dan papan dengan driver RA8876.  Pada motherboard dengan driver, semua daya yang diperlukan dialihkan, ada memori SD-RAM 16 megabyte (bus 16-bit, frekuensi maksimum 166 MHz, kapasitas maksimum 64 MB), ada slot kartu microSD standar.  Ada jejak kaki kosong di bawah EEPROM dengan font eksternal dan di bawah memori flash untuk gambar dengan konektor output untuk pemrograman mereka.  Juga, panel sentuh resistif atau kapasitif secara opsional dapat dipasang pada unit. <br><a name="habracut"></a><br>  On the board adalah driver RAiO RA8876 top-end dengan frekuensi operasi maksimum 120 MHz, yang, jika diinginkan, dapat dengan sendirinya berfungsi sebagai kontrol mikrokontroler.  Anda dapat menulis sebuah program kecil (hanya 12 instruksi) dan memasukkannya ke dalam memori flash eksternal.  Ketika tampilan dimulai, program ini akan mulai berjalan di tempat pertama, pada dasarnya menduplikasi semua opsi kontrol melalui antarmuka eksternal. <br><br><img src="https://habrastorage.org/webt/pf/up/ld/pfupldlxpv0p0xzjk1uliqmypeo.png"><br><br>  RA8876 tidak memiliki RAM sendiri dan karenanya menggunakan memori SD-RAM eksternal.  Ia dapat membaca gambar dari memori flash menggunakan DMA dan memuatnya ke dalam frame buffer-nya dan memiliki konfigurasi yang sangat fleksibel.  Driver terhubung ke matriks itu sendiri menggunakan antarmuka RGB lebar standar 18-bit.  Hanya 6 bit per saluran merah, 6 bit per hijau dan 6 bit saluran biru yang digunakan.  Dua bit yang lebih rendah dari masing-masing saluran tidak digunakan, yang secara teori memberikan 262.144 warna. <br><br>  Modul DMA RA8876 sangat mirip dengan DMA2D STM - modul ini dapat menyalin bagian memori persegi panjang dari satu tempat ke tempat lain, dengan konversi warna, transparansi, dan chip lainnya. <br><br>  RA8876 juga memiliki font Inggris dan Cina bawaan (8x16,12x24,16x32 piksel) dengan pengaturan fleksibel untuk tampilan (rotasi, skala, dll.) Dan antarmuka matriks terpisah (5 x 5) untuk tombol perangkat keras (untuk perangkat yang berdiri sendiri dan tidak hanya digunakan) dengan banyak pengaturan, seperti tekan lama dan pendek, bangun layar dengan menekan tombol dan menekan beberapa tombol secara bersamaan. <br><br>  Ada fungsi gambar-dalam-gambar (tanpa dukungan transparansi) untuk menampilkan sembulan jendela dan menu. <br><br>  Pengemudi itu sendiri dapat menggambar grafik primitif, seperti kotak, lingkaran, kurva, oval, segitiga, kotak bulat, dengan dan tanpa isian.  By the way, di RA8875 dan di RA8876 ada bug kecil untuk mengisi segitiga, dan masing-masing driver memiliki sendiri.  Tetapi RAiO tidak peduli tentang itu dari menara lonceng yang tinggi ... entah bagaimana saya mencoba menulis surat kepada mereka, sehingga mereka bahkan tidak menjawab.  Menggambar primitif seperti itu memungkinkan Anda untuk membuat grafik yang indah bahkan dengan mikrokontroler yang lambat. <br><br>  Dengan dunia luar, RA8876 berkomunikasi melalui antarmuka 8080/6800 8/16 bit, 3/4 kawat SPI dan I2C.  Selain itu, chip driver itu sendiri dapat bertindak sebagai master SPI dan I2C.  Dalam RA8876, ada dua output PWM yang dapat digunakan untuk kontrol lampu latar yang fleksibel.  Frekuensi SPI CLK maksimum dinyatakan pada 66 MHz dengan frekuensi driver 120 MHz, yang secara teori memberikan 6 frame per detik dari pembaruan layar penuh (pada 1024 x 600 x 16 bit).  Koneksi ini diuji oleh saya dan menunjukkan bahwa ia memiliki hak untuk hidup jika kami tidak menampilkan video di layar. <br><br>  Dalam kasus kami, kami akan menghubungkan layar menggunakan protokol 8080 dengan lebar 16 bit ke STM32F429ZIT6 melalui modul FMC (pengontrol memori fleksibel), yang akan memungkinkan kami mendapatkan lebih banyak kecepatan pengisian layar dan lebih sedikit beban pada mikrokontroler. <br><br><h4>  Konfigurasi pin 8080 dan FMC </h4><br>  Kami akan melihat diagram koneksi untuk 8080 di lembar data pada layar: <br><br><img src="https://habrastorage.org/webt/cu/6f/hq/cu6fhqbkgfnugnpjk7pxxy5k5ts.png"><br><br>  Kami melihat pin yang diperlukan untuk menghubungkan ke STM32 di CubeMX.  Kami tertarik dengan bank # 1 (NOR Flash / PSRAM / SRAM / ROM / LDC 1). <br><br><img src="https://habrastorage.org/webt/9u/rr/dt/9urrdt8fmvcz-6d10pblahs24te.png"><br><br>  Mengenai XnWAIT di lembar data, Anda bisa membaca yang berikut: <br><blockquote>  <i>Kecepatan menulis data terus menerus menentukan kecepatan pembaruan tampilan.</i>  <i>Interval siklus-ke-siklus harus lebih besar dari 5 periode jam sistem jika pengguna tanpa mengadopsi XnWait untuk memasukkan status tunggu.</i>  <i>Over spesifikasi dapat menyebabkan kehilangan data atau fungsi gagal jika mekanisme xnwait tidak digunakan.</i> </blockquote>  Secara harfiah, di antara siklus operasi protokol 8080, penundaan 5 sistem cabikan RA8876 harus dimasukkan jika pengguna tidak menggunakan mekanisme XnWAIT untuk menunggu rilis RA8876.  Kami akan menggunakan pin ini sekali lagi, sebagai  dalam praktiknya, saya mencoba memasukkan penundaan lima siklus, dan itu tidak berhasil. <br><br>  Alih-alih bus alamat lengkap untuk unit FMC, kami hanya menggunakan satu pin A16. <br><br><ol><li>  Kami mengonfigurasikan pin data (D0 - D15) sebagai fungsi alternatif # 12, seperti push pool, kecepatan maksimum, dan tanpa suspender. </li><li>  Pin XnWAIT, XnWR, XnRD, XA0 dan XnCS dikonfigurasikan sebagai fungsi alternatif # 12, seperti push-pull dengan lift ke plus (PULL UP). </li><li>  Kami mengonfigurasi XnRST sebagai GPIO biasa tanpa suspender (ada di papan itu sendiri). </li><li>  XnINTR dapat dikonfigurasi sebagai GPIO ke input dengan lift ke plus. </li></ol><br>  Saya juga menghubungkan lampu latar ke 100% tanpa mengendalikannya melalui PWM.  Untuk melakukan ini, pin # 14 pada konektor unit display terhubung ke VDD. <br><br>  Saya tidak memberikan kode konfigurasi untuk pin, karena  Saya menggunakan pustaka konfigurasi saya sendiri, dan konfigurasi GPIO sendiri sudah dikunyah ratusan kali pada hub dan pada sumber lain. <br><br>  <a href="https://github.com/Yoda49/RA8876-Driver-for-STM32F429ZIT6-FMC" rel="nofollow">Pustaka inisialisasi ada di sini</a> . <br><br><h4>  Pengaturan FMC </h4><br>  Tiga bank untuk masing-masing bank bertanggung jawab untuk menyiapkan bank-bank dari modul FMC (NOR Flash / PSRAM / SRAM / ROM / LDC 1).  Ini adalah FMC_BCRx, FMC_BTRx dan FMC_BWTRx.  Dalam definisi STM32F429 MK, register FMC_BCRx dan FMC_BTRx digabungkan menjadi satu array umum yang disebut FMC_BTCR dengan delapan elemen, di mana elemen nol adalah FMC_BCR1, elemen pertama adalah FMC_BTR1, elemen kedua adalah FMC_BCR2, dan seterusnya.  FMC_BWTRx digabungkan menjadi array FMC_BWTR dengan tujuh elemen, meskipun harus ada empat.  Jangan tanya kenapa ... <br><br>  FMC_BCRx berisi pengaturan dasar, FMC_BTRx berisi pengaturan waktu umum, dan FMC_BWTRx berisi pengaturan waktu terpisah untuk membaca, jika perangkat mengharuskannya. <br><br>  Diagram waktu dan pengaturan waktu untuk interaksi STM32F429 dan RA8876. <br><br><img src="https://habrastorage.org/webt/fc/q5/sx/fcq5sxlxvbr0tqg1bz0mthfgzpm.png"><br><br>  Untuk kemudahan konfigurasi, kami akan memasukkan timing protokol 8080 ke dalam konstanta.  Saya memilih timing sendiri secara empiris, mengurangi sedikit nilai, karena  Tabel waktu dengan lembar data lebih seperti kuda bulat dalam ruang hampa. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> ADDSET = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> ADDHLD = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> DATAST = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> BUSTURN = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> CLKDIV = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> DATLAT = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> ACCMOD = <span class="hljs-number"><span class="hljs-number">0</span></span>; RCC-&gt;AHB3ENR |= RCC_AHB3ENR_FMCEN; <span class="hljs-comment"><span class="hljs-comment">//  FMC FMC_Bank1-&gt;BTCR[0] = 0; //    FMC_Bank1-&gt;BTCR[0] |= FMC_BCR1_MWID_0; //    16  FMC_Bank1-&gt;BTCR[0] |= FMC_BCR1_WREN; //    FMC_Bank1-&gt;BTCR[0] |= FMC_BCR1_WAITEN; //   XnWAIT FMC_Bank1-&gt;BTCR[0] |= FMC_BCR1_ASYNCWAIT; // XnWAIT    FMC_Bank1-&gt;BTCR[0] |= FMC_BCR1_WAITCFG; //  XnWAIT FMC_Bank1-&gt;BTCR[1] = 0; //    FMC_Bank1-&gt;BTCR[1] |= (ADDSET &lt;&lt; 0) | (ADDHLD &lt;&lt; 4) | (DATAST &lt;&lt; 8) | (BUSTURN &lt;&lt; 16) | (CLKDIV &lt;&lt; 20) | (DATLAT &lt;&lt; 24) | (ACCMOD &lt;&lt; 28); //   FMC_Bank1-&gt;BTCR[0] |= 1; //   </span></span></code> </pre> <br>  Nilai register FMC_BTCRx setelah reset adalah 0x0FFF FFFF, mis.  pengaturan waktu maksimum ditetapkan.  Jika Anda memiliki tampilan atau memori baru, turunkan pengaturan waktu dan coba jalankan. <br><br><h4>  Inisialisasi tampilan </h4><br>  Bekerja dengan tampilan adalah membaca atau menulis ke area memori tertentu.  FMC menangani sisa pekerjaan.  Untuk mempermudah pekerjaan, kami mendefinisikan dua definisi: <br><br><pre> <code class="plaintext hljs">#define LCD_DATA 0x60020000 #define LCD_REG 0x60000000</code> </pre> <br>  Dan sekarang kami menggambarkan fungsi tingkat rendah: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LCD_CmdWrite</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cmd)</span></span></span><span class="hljs-function"> </span></span>{ *(<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> *)(LCD_REG) = cmd; }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LCD_DataWrite</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> data)</span></span></span><span class="hljs-function"> </span></span>{ *(<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> *)(LCD_DATA)= data; }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LCD_StatusRead</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> data = *(<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> *)(LCD_REG); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data; }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LCD_DataRead</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> data = * (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> *)(LCD_DATA); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>)data; }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LCD_RegisterWrite</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cmd, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> data)</span></span></span><span class="hljs-function"> </span></span>{ *(<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> *)(LCD_REG) = cmd; *(<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> *)(LCD_DATA) = data; }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LCD_RegisterRead</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cmd)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> data = <span class="hljs-number"><span class="hljs-number">0</span></span>; LCD_CmdWrite (cmd); data = LCD_DataRead (); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data; };</code> </pre> <br>  Selanjutnya, fungsi inisialisasi tampilan itu sendiri.  Kode diambil dari penyedia display dan sedikit dirancang ulang agar sesuai dengan kebutuhan Anda.  Subfungsi menempati jumlah yang besar dan dalam artikel ini saya tidak akan memberikannya. <br><br>  <a href="" rel="nofollow">Tautan ke driver di github</a> <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RA8876_Init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ RA8876_PLL_Init (); <span class="hljs-comment"><span class="hljs-comment">//   RA8876  120  RA8876_SDRAM_Init (); //  SDRAM  166  TFT_24bit (); //    24   ??? Host_Bus_16bit (); //   16  RGB_16b_16bpp (); //   16  MemWrite_Left_Right_Top_Down (); //       . Graphic_Mode (); //    Memory_Select_SDRAM (); //   SDRAM /*  RGB     RA8876 */ HSCAN_L_to_R (); VSCAN_T_to_B (); PDATA_Set_RGB (); PCLK_Falling (); DE_High_Active (); HSYNC_High_Active (); VSYNC_High_Active (); LCD_HorizontalWidth_VerticalHeight (1024, 600); LCD_Horizontal_Non_Display (160); LCD_HSYNC_Start_Position (160); LCD_HSYNC_Pulse_Width (70); LCD_Vertical_Non_Display (23); LCD_VSYNC_Start_Position (12); LCD_VSYNC_Pulse_Width (10); //   Frame_Buffer_Start_Address (PAGE0_START_ADDR); Frame_Buffer_Width (1024); Frame_Buffer_Start_XY (0, 0); Frame_Buffer_Color_Mode_16bpp (); //   Canvas_Window_Start_Address (PAGE0_START_ADDR); Canvas_Window_Width (1024); Canvas_Window_Start_XY (0, 0); Canvas_Window_WH (1024, 600); Canvas_Memory_XY_Mode (); Canvas_Window_Color_Mode_16bpp (); }</span></span></code> </pre><br>  Tentang framebuffer dan area aktif sedikit lagi.  Untuk dua pengaturan ini, kami mendefinisikan definisi berikut: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE0_START_ADDR 0 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE1_START_ADDR (1024 * 600 * 2 * 1) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE2_START_ADDR (1024 * 600 * 2 * 2) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE3_START_ADDR (1024 * 600 * 2 * 3) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE4_START_ADDR (1024 * 600 * 2 * 4) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE5_START_ADDR (1024 * 600 * 2 * 5) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE6_START_ADDR (1024 * 600 * 2 * 6) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE7_START_ADDR (1024 * 600 * 2 * 7) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE8_START_ADDR (1024 * 600 * 2 * 8) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE9_START_ADDR (1024 * 600 * 2 * 9) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE10_START_ADDR (1024 * 600 * 2 * 10) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE11_START_ADDR (1024 * 600 * 2 * 11) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PAGE12_START_ADDR (1024 * 600 * 2 * 12)</span></span></code> </pre> <br>  Setiap halaman (PAGEx_START_ADDR) adalah alamat awal di SDRAM.  Dalam memori 16 megabyte, kita dapat menempatkan 13 lapisan penuh dalam ukuran 1228800 byte (1024 * 600 * 2). <br>  Fungsi Frame_Buffer_Start_Address menetapkan area memori awal untuk framebuffer (apa yang saat ini sedang ditampilkan). <br><br>  Fungsi Canvas_Window_Start_Address menetapkan area memori awal untuk kanvas.  Selain itu, kanvas mungkin lebih besar dari framebuffer, sehingga Anda dapat menggulir gambar di layar.  Misalnya, untuk permainan platform, Anda dapat membuat kanvas panjang berukuran 13312 x 600 piksel dan kemudian menggulirnya secara horizontal, menggerakkan framebuffer secara horizontal di atasnya. <br><br>  Jika Anda membandingkan output grafis dengan LTDM dari STM32, maka semuanya tidak begitu cerah di sini.  Pada saat yang sama, driver itu sendiri hanya dapat menampilkan satu lapisan (buffer) akhir, dan LTDC segera dua, mencampurnya, tanpa memerlukan partisipasi Anda dalam proses ini. <br><br><h4>  Menggambar primitif </h4><br>  Kode dari penyedia tampilan dengan fitur yang dibangun sebelumnya: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Line</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Triangle</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Triangle_Fill</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Line_Start_XY</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> WX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HY)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Line_End_XY</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> WX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HY)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Triangle_Point1_XY</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> WX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HY)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Triangle_Point2_XY</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> WX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HY)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Triangle_Point3_XY</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> WX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HY)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Square_Start_XY</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> WX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HY)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Square_End_XY</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> WX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HY)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Circle_or_Ellipse</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Circle_or_Ellipse_Fill</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Left_Down_Curve</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Left_Up_Curve</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Right_Up_Curve</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Right_Down_Curve</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Left_Down_Curve_Fill</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Left_Up_Curve_Fill</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Right_Up_Curve_Fill</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Right_Down_Curve_Fill</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Square</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Square_Fill</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Circle_Square</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start_Circle_Square_Fill</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Circle_Center_XY</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> WX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HY)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ellipse_Center_XY</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> WX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HY)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Circle_Radius_R</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> WX)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ellipse_Radius_RxRy</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> WX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HY)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Circle_Square_Radius_RxRy</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> WX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HY)</span></span></span></span>;</code> </pre> <br>  Misalnya, untuk menggambar segitiga yang diisi, kami menetapkan tiga poin: Triangle_Point1_XY, Triangle_Point2_XY, Triangle_Point2_XY dan menjalankan fungsi Start_Triangle_Fill. <br><br><h4>  Bekerja dengan DMA </h4><br>  Untuk kenyamanan, saya menulis fungsi saya dengan struktur sebagai parameter yang diteruskan: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GFX_BTE_options</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> layer_s0_addr; <span class="hljs-comment"><span class="hljs-comment">//     0 unsigned long layer_s1_addr; //     1 unsigned long layer_d_addr; //     unsigned short layer_s0_width; //    0 unsigned short layer_s1_width; //    1 unsigned short layer_d_width; //    unsigned short layer_s0_start_x; //     0 unsigned short layer_s0_start_y; //   Y  0 unsigned short layer_s1_start_x; //   X  1 unsigned short layer_s1_start_y; //   Y  1 unsigned short layer_d_start_x; //   X   unsigned short layer_d_start_y; //   Y   unsigned short window_size_x; //     unsigned short window_size_y; //     unsigned char rop_code; //  ROP unsigned char operation_code; //   DMA };       DMA: void GFX_BTE_operation (struct GFX_BTE_options options) { BTE_S0_Color_16bpp (); BTE_S0_Memory_Start_Address (options.layer_s0_addr); BTE_S0_Image_Width (options.layer_s0_width); BTE_S0_Window_Start_XY (options.layer_s0_start_x, options.layer_s0_start_y); BTE_S1_Color_16bpp (); BTE_S1_Memory_Start_Address (options.layer_s1_addr); BTE_S1_Image_Width (options.layer_s1_width); BTE_S1_Window_Start_XY (options.layer_s1_start_x, options.layer_s1_start_y); BTE_Destination_Color_16bpp (); BTE_Destination_Memory_Start_Address (options.layer_d_addr); BTE_Destination_Image_Width (options.layer_d_width); BTE_Destination_Window_Start_XY (options.layer_d_start_x, options.layer_d_start_y); BTE_Window_Size (options.window_size_x, options.window_size_y); BTE_ROP_Code (options.rop_code); BTE_Operation_Code (options.operation_code); BTE_Enable (); Check_BTE_Busy (); }</span></span></code> </pre> <br>  <u>Deskripsi kode operasi (KODE OPERASI):</u> <br><br>  0000: Menulis ke memori dengan ROP menggunakan MK. <br>  0001: Baca memori tanpa ROP menggunakan MK. <br>  0010: Menyalin blok memori ke arah maju menggunakan ROP. <br>  0011: Menyalin blok memori ke arah sebaliknya menggunakan ROP. <br>  0100: Menulis ke memori (dengan transparansi) tanpa ROP menggunakan MK. <br>  0101: Menyalin (memindahkan) blok memori (dengan transparansi) ke arah depan tanpa ROP. <br>  0110: Isi dengan pola menggunakan ROP. <br>  0111: Isi templat dengan chromakey. <br>  1000: Ekstensi Warna <br>  1001: Warna yang ditingkatkan dengan transparansi <br>  1010: Memajukan blok memori ke depan dengan alpha blending <br>  1011: Menulis ke memori dengan alpha blending menggunakan MK. <br>  1100: Mengisi area memori dengan warna solid. <br>  1101: Dicadangkan <br>  1110: Dicadangkan <br>  1111: Dicadangkan <br><br>  <u>Deskripsi kode raster (ROP CODE):</u> <br><br>  0000b: 0 (Hitam) <br>  0001b: ~ S0 ・ ~ S1 atau ~ (S0 + S1) <br>  0010b: ~ S0 ・ S1 <br>  0011b: ~ S0 <br>  0100b: S0 ・ ~ S1 <br>  0101b: ~ S1 <br>  0110b: S0 ^ S1 <br>  0111b: ~ S0 + ~ S1 atau ~ (S0 ・ S1) <br>  1000b: S0 ・ S1 <br>  1001b: ~ (S0 ^ S1) <br>  1010b: S1 <br>  1011b: ~ S0 + S1 <br>  1100b: S0 <br>  1101b: S0 + ~ S1 <br>  1110b: S0 + S1 <br>  1111b: 1 (Putih) <br><br>  S0 adalah lapisan nol, S1 adalah lapisan pertama.  Interaksi di antara mereka terjadi menggunakan operasi aritmatika dan bit. <br><br><h4>  Output font sebaris </h4><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GFX_Show_String_TMODE</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *ptr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> charColor, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bkColor)</span></span></span><span class="hljs-function"> </span></span>{ Foreground_color_65k (charColor); Background_color_65k (bkColor); CGROM_Select_Internal_CGROM (); Font_Select_12x24_24x24 (); Text_Mode (); Goto_Text_XY (x, y); LCD_CmdWrite (<span class="hljs-number"><span class="hljs-number">0x04</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (*ptr != <span class="hljs-string"><span class="hljs-string">'\0'</span></span>) { LCD_DataWrite (*ptr); Check_Mem_WR_FIFO_not_Full (); ++ptr; } Check_2D_Busy (); Graphic_Mode (); <span class="hljs-comment"><span class="hljs-comment">//back to graphic mode }</span></span></code> </pre> <br>  <a href="https://github.com/Yoda49/RA8876-Driver-for-STM32F429ZIT6-FMC" rel="nofollow">Versi lengkap driver dapat ditemukan di github di tautan</a> <br><br>  Terima kasih sudah membaca! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id483538/">https://habr.com/ru/post/id483538/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id483526/index.html">Mengelola status aplikasi dengan RxJS / Immer sebagai alternatif sederhana untuk Redux / MobX</a></li>
<li><a href="../id483528/index.html">REST API harus berdasarkan pada hypertext</a></li>
<li><a href="../id483530/index.html">Bagaimana kami melakukan permainan papan. Kenapa dan mengapa?</a></li>
<li><a href="../id483532/index.html">Konferensi DefCon 27: Di Balik Layar Membuat Lencana Elektronik Bagian 1</a></li>
<li><a href="../id483536/index.html">Sejarah mikroprosesor dan komputer pribadi: 1974 - 1980</a></li>
<li><a href="../id483540/index.html">ChaiScript - bahasa scripting untuk C ++</a></li>
<li><a href="../id483542/index.html">Intisari telekomunikasi - materi tentang pekerjaan penyedia</a></li>
<li><a href="../id483544/index.html">Data baru membantah asumsi utama energi gelap</a></li>
<li><a href="../id483550/index.html">Layanan dan Pengembangan IaaS: Kompilasi Awan, Penyimpanan, dan Evolusi 1cloud</a></li>
<li><a href="../id483552/index.html">MVVM dan pemilihan elemen dalam adaptor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>