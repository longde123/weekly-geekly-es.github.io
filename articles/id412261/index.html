<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’ ğŸƒ ğŸš¶ğŸ¾ "Alice, nyalakan lampu." Kontrol suara dari rumah pintar berdasarkan openHAB. Tanpa pemrograman dan SMS ğŸ’‚ğŸ¼ ğŸ˜Ÿ ğŸ‘©ğŸ»â€ğŸ“</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="November 2017, nomor sebelas ditampilkan di kalender. Penjualan pada Aliexpress sedang berjalan lancar, tangannya menggaruk sesuatu untuk dibeli. Pili...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"Alice, nyalakan lampu." Kontrol suara dari rumah pintar berdasarkan openHAB. Tanpa pemrograman dan SMS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412261/"><iframe width="560" height="315" src="https://www.youtube.com/embed/bTpH3pVVMG4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  November 2017, nomor sebelas ditampilkan di kalender.  Penjualan pada Aliexpress sedang berjalan lancar, tangannya menggaruk sesuatu untuk dibeli.  Pilihannya jatuh pada " <i>Lampu LED RGBW Mi-light AC86-265V Remote Control Smart Lighting</i> ."  Akibatnya, dua salinan daya maksimum, pada 9 watt, dan pengontrol hub MiLight WiFi iBox dibeli.  Pengiriman dari Tiongkok tidak lama datang, dan 4 bulan kemudian, pada 13 Maret 2018, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">platform Yandex.Dialogs dibuka</a> (platform yang memungkinkan pengembang pihak ketiga untuk menambah keterampilan pada asisten suara Alice).  Selanjutnya, Alice akan belajar mengendalikan pencahayaan (dan tidak hanya) di apartemen Anda, dan kami akan membantunya dalam hal ini, secara bertahap dan tanpa satu baris kode. <br><a name="habracut"></a><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengaturan lampu pintar Xiaomi</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Instal openHAB</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kontrol cahaya melalui openHAB</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Akses eksternal ke openHAB</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">IFTTT</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Alice</a> </li></ol><br><a name="xiaomi"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/n8/ev/wx/n8evwxli9dh4en3ahsny_kmzn-e.jpeg"></div><br><h3>  1. Menyiapkan lampu pintar dari Xiaomi. </h3><br>  Hal pertama yang harus dilakukan adalah mengatur kontrol lampu, setidaknya menggunakan aplikasi dari Xiaomi.  Jika tahap ini dilewati untuk Anda, jangan ragu untuk melanjutkan lebih jauh dengan menyiapkan server rumah pintar, atau bahkan lebih jauh, langsung ke integrasi Alice dan openHAB.  Tapi, hal pertama yang pertama.  Lampu itu sendiri tidak akan terhubung ke router rumah Anda, untuk ini Anda memerlukan hub iBox yang dapat mengontrol hingga empat kelompok sumber cahaya.  Anda harus menghubungkannya ke jaringan, dan kemudian menghubungkan lampu ke sana. <br><br><ol><li>  Kami memasok daya ke <b>iBox</b> dengan menghubungkannya melalui usb, misalnya, ke pengisi daya untuk telepon. </li><li>  Saat menghubungkan untuk pertama kalinya, Anda perlu mengatur ulang hub, jadi tekan <b>RST</b> . </li><li>  Selanjutnya, instal aplikasi dari <b>Xiaomi</b> untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">iOS</a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Android</a> di telepon.  Pastikan ponsel terhubung ke jaringan Wi-Fi rumah. </li><li>  Buka aplikasi <b>Mi-Light 3.0</b> , klik <b>+</b> .  Di sini kami tertarik pada tab <b>Tautan Cerdas</b> . </li><li>  Masukkan nama dan kata sandi jaringan Wi-Fi rumah tempat ponsel terhubung dan direncanakan untuk menghubungkan <b>iBox</b> . </li><li>  Sekarang <b>iBox</b> Anda harus terhubung ke jaringan, dan indikator <b>SYS</b> dan <b>LINK</b> harus berkedip, perlahan dan cepat, masing-masing.  Jika tidak, tekan <b>RST</b> lagi. </li><li>  Jika indikator berkedip, klik di aplikasi <b>Start Configuration</b> , proses pengaturan koneksi untuk hub akan dimulai. </li><li>  Setelah sekitar sepuluh detik, flashing akan berhenti, maka <b>SYS</b> akan mulai berkedip perlahan lagi, dan <b>LINK</b> akan tetap menyala.  Aplikasi menampilkan <b>Configured</b> .  Hub terhubung ke jaringan.  Jika tidak ada dalam <b>Daftar Perangkat</b> , maka cukup klik <b>Mencari perangkat</b> . </li></ol><br>  Sudah, Anda dapat mengontrol warna dan kecerahan iBox itu sendiri, tetapi kita harus menghubungkan lampu.  Untuk melakukan ini, ikat lampu ke salah satu dari empat zona yang tersedia untuk hub untuk kontrol. <br><br><ol><li>  Kami membuka di aplikasi <b>Mi-Light 3.0</b> dari daftar hub <b>Mi-Light</b> .  Buka bagian <b>Warna</b> . </li><li>  Di bagian atas layar, pilih salah satu zona, biarkan <b>Zone1</b> .  Dan klik pada ikon pemasangan perangkat di sudut kanan atas.  Layar <b>LINK / UNLINK</b> dengan instruksi <b>muncul</b> . </li><li>  Sekarang kita mengkonfigurasi lampu yang ingin kita ikat ke <b>Zone1</b> , manajemen mereka di masa depan akan terjadi secara serempak.  Untuk mengontrol kecerahan dan warna setiap lampu secara terpisah, mereka harus ditugaskan ke zona yang terpisah.  Jadi, nyalakan lampu, dan dalam tiga detik pertama, klik di aplikasi <b>Tautan</b> .  Jika lampu berkedip tiga kali, maka semuanya baik-baik saja, sinkronisasi berhasil.  Anda dapat mengontrol lampu. </li></ol><br><div style="text-align:center;"><img height="400" src="https://habrastorage.org/webt/bj/gf/lj/bjgflj6c_5paymroxvyojr-7qpw.jpeg"></div><br>  Pada dasarnya, pada tahap ini Anda sudah memiliki remote control untuk remote control lampu.  Selain itu, Anda dapat menulis sistem kontrol pencahayaan Anda sendiri, karena protokol untuk berkomunikasi dengan hub telah lama dikenal (dulu pernah tersedia di <i>limitlessled.com/dev</i> ).  Ada pustaka siap pakai di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">php</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">javascript</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">python</a> .  Tetapi manajemen hanya mungkin dari jaringan lokal, yang jelas tidak cukup untuk Alice.  Mari kita coba selesaikan masalah ini. <br><br><a name="openhab"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/hv/t3/5x/hvt35xyvexl22gkkyvfpef3_muw.jpeg"></div><br><h3>  2. Instal openHAB </h3><br>  Secara singkat, apa itu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">openHab</a> .  Ini adalah server manajemen rumah pintar open source.  Dikembangkan oleh komunitas, mendukung pengelolaan sejumlah besar perangkat.  Ada klien seluler, ada kemungkinan mengelola Alexa dari Amazon dan asisten dari Google.  Ditulis dalam java, berdasarkan pada kerangka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Eclipse SmartHome</a> .  Jadi itu bisa dipasang bahkan di kulkas, yang utama adalah bahwa mesin virtual Java berjalan di kulkas ini.  Petunjuk instalasi adalah untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Linux</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Windows</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mac OS</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Raspberry Pi</a> , untuk berbagai penyimpanan jaringan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Synology</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">QNAP</a> .  Buka opsi pertama dengan cepat. <br><br><ol><li>  Tambahkan kunci repositori: <br><br><pre><code class="bash hljs">wget -qO - <span class="hljs-string"><span class="hljs-string">'https://bintray.com/user/downloadSubjectPublicKey?username=openhab'</span></span> | sudo apt-key add - sudo apt-get install apt-transport-https</code> </pre> </li><li>  Tambahkan repositori itu sendiri: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'deb https://dl.bintray.com/openhab/apt-repo2 stable main'</span></span> | sudo tee /etc/apt/sources.list.d/openhab2.list</code> </pre> </li><li>  Kami memperbarui dan menginstal server bersama dengan add-on: <br><br><pre> <code class="bash hljs">sudo apt-get update sudo apt-get install openhab2 sudo apt-get install openhab2-addons sudo apt-get install openhab2-addons-legacy</code> </pre> </li><li>  Kami mengatur mulai otomatis layanan setelah mem-boot ulang perangkat dan memulainya: <br><br><pre> <code class="bash hljs">sudo systemctl start openhab2.service sudo systemctl status openhab2.service sudo systemctl daemon-reload sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> openhab2.service</code> </pre> </li><li>  Sekarang kita menunggu di wilayah <b>15-20 menit</b> (ini tidak berlebihan, ini adalah kenyataan pahit dengan lelucon tentang kecepatan Jawa), sementara itu <code>http://openhab-device:8080</code> antarmuka web muncul di alamat <code>http://openhab-device:8080</code> . </li><li>  Pada halaman ini kami tertarik dengan item <b>Paper UI</b> .  Dengan jenis antarmuka inilah kita akan bekerja di masa depan. </li></ol><br><img src="https://habrastorage.org/webt/t7/7t/4n/t77t4n7ug5blggwf7yyfstz-wd0.png"><br><br><a name="binding"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/hv/t3/5x/hvt35xyvexl22gkkyvfpef3_muw.jpeg"></div><br><h3>  3. Kontrol lampu melalui openHAB </h3><br>  Jadi, kami memiliki server rumah pintar yang berfungsi dan lampu dari Xiaomi dengan kemungkinan kendali jarak jauh.  Perlu untuk menghubungkan mereka.  openHAB mendukung binder (instruksi untuk mengendalikan elektronik yang terhubung) untuk banyak perangkat, termasuk lampu ini. <br><br><ol><li>  Buka <b>Add-on</b> â†’ <b>Binding</b> . </li><li>  Instal <b>Milight Binding</b> . </li><li>  Untuk menambahkan perangkat kami, klik <b>+</b> di bagian <b>Konfigurasi</b> â†’ <b>Hal</b> . </li><li>  Kami memilih <b>Milight Binding</b> , pencarian otomatis untuk perangkat dimulai. </li><li>  Saya tidak menemukan apa pun secara otomatis, jadi saya secara manual menambahkan " <b>Menambahkan secara manual</b> ". </li><li>  Kami memilih hub <b>iBox / iBox2</b> untuk ditambahkan. </li><li>  Pada halaman yang terbuka, Anda perlu mengisi bidang <b>IP</b> dan <b>Bridge ID</b> (alamat mac perangkat yang terhubung), Anda dapat menemukannya, misalnya, di panel kontrol router (hub saya terdaftar di jaringan dengan nama modul HF-LPB100 yang digunakan di dalamnya).  Tambah. </li><li>  Hebat, <b>iBox / iBox2</b> sekarang muncul di daftar perangkat dengan tulisan " <i>Online</i> ". </li><li>  <b>Klik</b> pada <b>+</b> lagi dan pilih <b>Milight Binding</b> , kali ini untuk menambahkan lampu secara langsung. </li><li>  Sekarang Anda tidak perlu menambahkan apa pun dengan tangan, cukup pilih sekelompok lampu dari daftar (dalam kasus saya, ini adalah <b>item Rgbww Warna (Zona 1)</b> ). </li><li>  Item yang dipilih akan muncul dalam daftar hal dengan tulisan " <i>Online</i> ". <br><br><img src="https://habrastorage.org/webt/lo/1u/pf/lo1upfvlh54rsjnxqbgcuxu389i.png"></li><li>  Perangkat dikonfigurasikan, sekarang Anda perlu menambahkan kontrol ke sana.  Untuk melakukan ini, klik pada item yang baru ditambahkan. </li><li>  Daftar parameter lampu yang dapat kita kontrol dari jarak jauh terbuka.  Klik pada lingkaran biru <b>Brightness</b> . </li><li>  Selanjutnya, pilih kontrol yang ingin kita kaitkan dengan parameter perangkat, karena  kami belum memilikinya, klik <b>Buat item baru</b> . </li><li>  Tetapkan nama yang berubah-ubah, misalnya <b>Light_Switcher</b> , dan ubah jenisnya dari <b>Dimmer</b> ke <b>Switch</b> , karena  Saya tidak harus menyesuaikan kecerahan lampu, saya hanya ingin menyalakan dan mematikannya.  Kami cukup mengubah kategori menjadi <b>Cahaya</b> sehingga kontrol ditampilkan dengan ikon di bagian <b>Kontrol</b> .  Klik <b>Tautan</b> . </li><li>  Buka bagian <b>Kontrol</b> dan nikmati pengoperasian sakelar <b>Kecerahan</b> pada perangkat. </li></ol><br><br><a name="myopenhab"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/hv/t3/5x/hvt35xyvexl22gkkyvfpef3_muw.jpeg"></div><br><h3>  4. Akses eksternal ke openHAB </h3><br>  Demi alasan keamanan, setelah manipulasi yang dijelaskan di atas, manajemen server rumah pintar hanya dimungkinkan dari jaringan lokal.  Ini jelas tidak cukup untuk tugas kita.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ada beberapa opsi konfigurasi</a> : konfigurasikan VPN untuk mengakses dari Internet ke jaringan lokal, konfigurasikan proxy terbalik, atau sambungkan server Anda ke layanan Cloud myopenHAB di myopenHAB.org.  Karena di Rusia jumlah karyawan Roskomnadzor berbanding lurus dengan jumlah pengguna VPN dan server proxy, kami akan menggunakan opsi yang terakhir. <br><blockquote>  Jangan melipatgandakan hal-hal yang tidak perlu </blockquote><br><ol><li>  Kami mendaftar di situs web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">myopenHAB</a> , masuk dan pergi ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://myopenhab.org/account</a> .  Pada halaman ini kami tertarik pada dua bidang: <b>openHAB UUID</b> dan <b>openHAB Secret</b> .  Mereka memungkinkan Anda untuk mengatur koneksi server.  Mari kita cari tahu di mana mendapatkannya. </li><li>  Kami pergi ke panel kontrol <b>OpenHAB PaperUI</b> . </li><li>  Buka bagian <b>Konfigurasi</b> â†’ <b>Pengaya</b> â†’ <b>Lain-lain</b> . </li><li>  Instal <b>openHAB Cloud Connector</b> . </li><li>  Dalam <b>Konfigurasi</b> â†’ <b>Layanan</b> , modul <b>OpenHAB Cloud</b> dengan mode " <i>Pemberitahuan &amp; Akses Jarak Jauh</i> " akan muncul. </li><li>  Dalam <b>Konfigurasi</b> â†’ <b>Sistem</b> â†’ <b>Manajemen Add-on,</b> <i>sakelar</i> " <i>Acceess Remote Repository</i> " harus diaktifkan. </li><li>  Setelah menginstal addon, data yang kami <b>cari</b> akan ada di file <b>/ var / lib / openhab2 / uuid</b> dan <b>/ var / lib / openhab2 / openhabcloud / secret</b> ( <i>userdata / uuid</i> dan <i>userdata / openhabcloud / secret</i> , jika Anda tidak <i>menginstalnya</i> dari paket).  Kami memasukkan mereka dalam pengaturan akun di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">myopenHAB</a> dan klik <b>Perbarui</b> .  Jika semuanya dikonfigurasi dengan benar, maka kata " <i>Online</i> " akan muncul di sebelah kiri alamat email Anda.  Ini menunjukkan bahwa akses ke rumah pintar Anda dari Internet terbuka, tetapi <b>Alice</b> tidak akan dapat langsung menggunakannya.  Pertama, Anda perlu membuat perangkat yang sebelumnya dikonfigurasi dapat diakses dari luar. </li><li>  Buka <b>Konfigurasi</b> â†’ <b>Layanan</b> â†’ <b>openHAB Cloud</b> â†’ <b>Konfigurasi</b> . </li><li>  Di <i>Item untuk membuka</i> daftar <i>aplikasi seperti IFTTT,</i> aktifkan kotak centang untuk kontrol kecerahan dan klik <b>Simpan</b> . </li><li>  Setelah beberapa saat, kami memverifikasi bahwa item yang dipilih terdaftar di halaman <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">myopenhab.org/items</a> dengan status " <i>ON</i> ". </li></ol><br><img src="https://habrastorage.org/webt/tf/-a/3g/tf-a3gan7vajtb4qjy_urvu0nim.png"><br><br>  Kontrol lampu sekarang dimungkinkan dari Internet, melalui API OpenHAB Cloud, yang mendukung otorisasi OAuth2.  Namun, sayangnya, pelanggan sudah ditentukan sebelumnya, ini adalah Alexa, Google Assistant dan layanan IFTTT.  Alice belum ada dalam daftar ini.  Tapi ini bukan masalah! <br><br><a name="ifttt"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/3w/q5/0d/3wq50dhkw-rwzok-o3nghgq9ioe.jpeg"></div><br><h3>  5. IFTTT </h3><br><blockquote>  Jika demikian maka. </blockquote><br>  Layanan yang memungkinkan Anda membangun serangkaian tindakan dari beberapa layanan.  Tanggapi secara kondisional dengan tindakan di satu layanan jika pemicu untuk suatu acara di layanan lain telah berfungsi.  IFTTT mendukung sejumlah besar layanan, termasuk myopenHAB yang menarik minat kami.  Tetapi tidak mendukung Alice.  Secara umum, siapa pun dapat membuat modul untuk layanan mereka di sana, pertama-tama, Anda perlu menghubungi departemen penjualan dan mencari tahu ukuran pembayaran tahunan Anda yang mendukung IFTTT.  Tujuan kami adalah menggunakan layanan ini secara gratis agar dapat mengarahkan permintaan dari Alice ke openHAB. <br><br><ol><li>  Kami mendaftar di situs web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ifttt.com</a> dan pergi ke <b>Applet</b> â†’ <b>Applet Baru</b> . </li><li>  Setelah mengklik <b>+ ini</b> , Anda harus memilih layanan yang akan menjadi pemicu acara tersebut.  Karena  <b>Layanan Alice tidak ada</b> dalam daftar, kita perlu memilih sesuatu yang dapat menerima perintah darinya.  Ini adalah layanan <b>Webhooks</b> .  Klik <b>Hubungkan</b> . </li><li>  Selanjutnya, pilih pemicu " <i>terima permintaan web</i> " dari daftar dengan satu item. </li><li>  Tentukan nama acara, misalnya <b>light_on</b> , dan klik <b>Buat</b> . </li><li>  Sekarang kita perlu memilih jawabannya, klik pada <b>+ itu</b> .  <b>OpenHAB</b> pilihan kami, pasang. </li><li>  Di jendela yang terbuka, otorisasi OAuth2 yang disebutkan sebelumnya, klik <b>Izinkan</b> . </li><li>  Satu-satunya respons <i>perintah kirim</i> tersedia. </li><li>  Dari daftar drop-down, pilih kontrol lampu (misalnya, Light_Switcher), dan sebagai perintah untuk menyalakan lampu, tentukan kata " <i>ON</i> ".  Kami menciptakan. </li></ol><br>  Untuk memeriksanya, kita perlu memanggil pemicu pada layanan Webhooks.  Bagaimana cara melakukannya?  Kirim permintaan POST. <br><br><ol><li>  Kami <b>mencari</b> layanan <b>Webhooks di</b> <b>situs web</b> <b>IFTTT</b> dan pergi ke dokumentasi yang terkait dengannya. </li><li>  Pada halaman yang terbuka, ada perintah yang perlu kita jalankan, mengganti <b>{event}</b> dengan <b>light_on</b> . </li><li>  Setelah mengklik <b>Test It</b> , lampu Anda harus menyala. </li></ol><br>  Tetap membuat resep serupa untuk acara light_off, yang akan mengirim perintah OFF ke kontrol lampu.  Dan kemudian ajarkan Alice untuk memanggil pemicu ini atas permintaan kami. <br><br><img src="https://habrastorage.org/webt/ky/z8/yw/kyz8ywf2mn07hfnfjpzj4jy26i4.png"><br><br><a name="alice"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/ba/ta/tn/batatn8tse9dchznkvkvxqgn98s.jpeg"></div><br><h3>  6. Alice </h3><br>  Dalam pesanan saya, dalam keinginan saya, Alice akan menyalakan lampu jika Anda menggunakan platform <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Yandex.Dialogs</a> .  Platform dibuka pada bulan Maret tahun ini dan memungkinkan siapa saja untuk menambah keterampilan ke Alice dengan menulis kode yang sesuai.  Saat ini, sejumlah besar keterampilan sudah disajikan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dalam katalog</a> .  Pengembangan keterampilan adalah topik untuk artikel terpisah tentang HabrÃ©, dan di sini kita memiliki " <i>tanpa satu baris kode</i> ."  Jadi kami akan menggunakan perkembangan yang tersedia. <br><br><ol><li>  Kami memasang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">versi beta aplikasi pencarian Yandex</a> , hanya saja saat ini memiliki dukungan untuk <b>keterampilan pengguna</b> . </li><li>  Kita bilang <b>Alice</b> " <i>nyalakan mantra sihir</i> ."  Ini adalah kemampuan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>mantra sihir</b> / <b>mantra</b> <b>sihir yang</b></a> akan memungkinkan kita untuk melakukan permintaan POST ke server <b>IFTTT</b> . </li><li>  Klik <b>Tambah</b> dan tentukan alamat untuk menyalakan lampu formulir: <br><br><pre> <code class="bash hljs">https://maker.ifttt.com/trigger/light_on/with/key/{user_id}</code> </pre> </li><li>  Langkah selanjutnya adalah ucapan frasa atau kata yang akan ditanggapi Alice dengan menyelesaikan permintaan di alamat yang ditentukan (Alice saya menjawab "nyalakan lampu"). </li></ol><br>  Jika sekarang Anda mengklik tombol yang sesuai atau menyuarakan proposal, permintaan dari server Yandex akan pergi ke server keterampilan, dari sana ke IFTTT, lalu ke myopenHAB, yang akan mentransfer data ke instance lokal Anda dengan akses langsung ke hub lampu dan lampu akan menyala.  Kami akan segera menambahkan perintah serupa untuk mematikan pencahayaan. <br><br><div style="text-align:center;"><img height="400" src="https://habrastorage.org/webt/xr/5e/nb/xr5enbudszmydm0msmidvavxl_g.jpeg"></div><br>  Anda perlu memahami bahwa hanya menyalakan Alice dan mengatakan " <i>nyalakan lampu</i> " tidak cukup.  Yandex tidak tahu apa-apa tentang tim kami untuk rumah pintar, data tentang mereka disimpan dalam database keterampilan " <i>mantra sihir</i> ".  Karena itu, pertama-tama Anda perlu memanggil skill dengan mengatakan " <i>nyalakan mantra sihir</i> ", dan hanya kemudian nyalakan dan matikan suaranya. <br><br><h3>  PS </h3><br>  Pendekatan dengan integrasi Alice dan openHAB melalui IFTTT tidak membatasi imajinasi Anda.  Anda dapat menggunakan kemampuan " <i>mantra sihir</i> " untuk mengontrol segala hal dalam suara rumah pintar Anda.  Misalnya, openHAB memiliki binder untuk Samsung SmartTV, yang memungkinkan Anda untuk mengontrol suara dan saluran TV.  Interaksi Alice dan Webhooks adalah implementasi antarmuka suara untuk semua layanan IFTTT, " <i>mantra sihir</i> " memungkinkan Anda untuk mengeksekusi perintah dari salah satu dari mereka.  Atau Anda tidak dapat menggunakan Alice sama sekali, dan menulis frontend Anda, misalnya, aplikasi seluler yang akan mengeksekusi permintaan IFTTT melalui semua Webhooks yang sama.  Ya, dan IFTTT tidak perlu digunakan, dengan analogi, Anda dapat mengonfigurasi " <i>mantra sihir</i> " untuk memenuhi permintaan ke server Anda. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id412261/">https://habr.com/ru/post/id412261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id412249/index.html">Karya ilmiah sudah ketinggalan zaman; apa yang menanti kita selanjutnya</a></li>
<li><a href="../id412251/index.html">Melarikan diri dari neraka. Pilot Captive Devyatayev membajak sebuah pesawat dari bawah hidung pria roket Jerman</a></li>
<li><a href="../id412253/index.html">Melindungi program melalui Vk.com</a></li>
<li><a href="../id412255/index.html">Seperti foto-foto Honor baru 10. Bandingkan dengan Huawei P20 dan iPhone 7 Plus</a></li>
<li><a href="../id412259/index.html">Di Amerika Serikat akan mengalami metode kematian baru: inhalasi nitrogen</a></li>
<li><a href="../id412263/index.html">Bagaimana Sistem Penilaian Warga Negara Tiongkok Bekerja: Kejahatan dan Hukuman</a></li>
<li><a href="../id412265/index.html">Bagaimana World of Tanks VR dibuat, dan mengapa itu berubah menjadi permainan yang sama sekali berbeda</a></li>
<li><a href="../id412267/index.html">Konsol Game Apple yang Terlupakan</a></li>
<li><a href="../id412269/index.html">Amazon Echo Dot vs. Google Home Mini - asisten mana yang lebih baik?</a></li>
<li><a href="../id412271/index.html">Kemenangan dan tragedi "Buran"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>