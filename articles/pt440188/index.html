<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∏üèª üë®üèº‚Äçüî¨ üï∞Ô∏è Alcan√ßando as estrelas: dominando os operadores respons√°veis ‚Äã‚Äãpelo gerenciamento de aplicativos no Kubernetes üë®üèº üë®üèª‚Äçüíº üíô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vamos ver como usar as fun√ß√µes publicadas no Ansible Galaxy como operadores que gerenciam aplicativos no Kubernetes e veremos como criar um operador q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Alcan√ßando as estrelas: dominando os operadores respons√°veis ‚Äã‚Äãpelo gerenciamento de aplicativos no Kubernetes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/440188/">  Vamos ver como usar as fun√ß√µes publicadas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ansible Galaxy</a> como operadores que gerenciam aplicativos no Kubernetes e veremos como criar um operador que simplesmente instale o aplicativo e ajuste seu comportamento de maneira flex√≠vel, dependendo do ambiente. <br><br><img src="https://habrastorage.org/webt/kk/7j/6q/kk7j6qx0eteemrqiug7iyohofli.jpeg" width="100%"><br><br>  Usaremos o <a href="">Ansible Operator</a> e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">m√≥dulo k8s</a> para mostrar como usar o Ansible para criar aplicativos Kubernetes. <br><a name="habracut"></a><br>  O Operador Ansible faz parte do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SDK</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Operador</a> e permite formular os regulamentos operacionais do aplicativo (como ele deve ser instalado e mantido) no idioma dos pap√©is e manuais do Ansible.  O m√≥dulo k8s, por sua vez, expande a capacidade de gerenciar objetos no Kubernetes ao criar essas fun√ß√µes e playbooks. <br><br>  Um operador √© criado assim assim. <br><br><pre><code class="plaintext hljs">FROM quay.io/operator-framework/ansible-operator RUN ansible-galaxy install djzager.hello_world_k8s RUN echo $'--- \n\ - version: v1alpha1\n\ group: examples.djzager.io\n\ kind: HelloWorld\n\ role: /opt/ansible/roles/djzager.hello_world_k8s' &gt; ${HOME}/watches.yaml</code> </pre> <br><h3>  Tecla Iniciar </h3><br>  Primeiro, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">algumas</a> palavras sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o m√≥dulo Ansible do k8s</a> .  Ele apareceu no Ansible 2.6 e amplia as possibilidades de trabalhar com objetos Kubernetes da Ansible e em qualquer distribui√ß√£o do Kubernetes, incluindo o Red Hat OpenShift.  O blog Ansible tinha um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">post separado</a> sobre esse m√≥dulo e o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cliente Python din√¢mico do Red Hat OpenShift</a> .  Em nossa opini√£o, trabalhar com objetos Kubernetes atrav√©s do Ansible sem usar o m√≥dulo k8s est√° errado.  O mecanismo do operador foi originalmente criado para executar aplicativos no Kubernetes, e o Operator SDK fornece ferramentas para montagem, teste e empacotamento de operadores.  Por sua vez, o Operador Ansible √© necess√°rio para definir os regulamentos operacionais do aplicativo no idioma Ansible.  O fluxo de trabalho correspondente √© organizado de forma simples: primeiro, fazemos o operator-sdk new --type = Ansible para gerar os arquivos necess√°rios para o operador Ansible, depois pintamos o Ansible e, finalmente, fazemos o operator-sdk build para criar o aplicativo para trabalhar no Kubernetes.  Mas se j√° temos um papel no Ansible Galaxy, que controla o aplicativo no Kubernetes, as coisas ficam ainda mais f√°ceis.  Abaixo faremos o seguinte: <br><br><ol><li>  Vamos criar uma fun√ß√£o Ansible para gerenciar o aplicativo Hello World no Kubernetes, o que nos ajudar√° a demonstrar os recursos do m√≥dulo Ansible do k8s. </li><li>  Publicaremos esse papel no Ansible Galaxy. </li></ol><br>  Ent√£o, vamos montar o operador Ansible usando a fun√ß√£o publicada no Ansible Galaxy.  Por que criar um operador usando uma fun√ß√£o do Ansible Galaxy?  Existem dois motivos: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Para n√£o repetir</a> .  Se j√° programamos a fun√ß√£o Ansible para gerenciar o aplicativo Hello World e o publicamos no Ansible Galaxy, √© l√≥gico us√°-lo ao criar o operador Ansible. </li><li>  Devido √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">separa√ß√£o de responsabilidades</a> .  Queremos que a fun√ß√£o Hello World Ansible gerencie o aplicativo com o mesmo nome no Kubernetes e que a l√≥gica operacional (operacional) permane√ßa dentro do operador.  Em nosso exemplo, a l√≥gica operacional √© extremamente simples: ela simplesmente chama a fun√ß√£o djzager.hello_world_k8s toda vez que voc√™ cria ou modifica um recurso personalizado do HelloWorld.  No entanto, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no futuro,</a> essa separa√ß√£o se tornar√° mais significativa, por exemplo, adicionaremos valida√ß√£o ao aplicativo Hello World por meio da fun√ß√£o Ansible e implementaremos o controle de status dos recursos personalizados do HelloWorld por meio da l√≥gica do operador. </li></ol><br><h3>  Ol√° Kubernetes, conhe√ßa Ansible </h3><br><h4>  Do que precisamos </h4><br><ol><li>  Ansible - consulte o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">guia de instala√ß√£o</a> se voc√™ n√£o tiver o Ansible instalado. </li><li>  Cliente Python para OpenShift (opcional).  Necess√°rio apenas para lan√ßamento local.  As instru√ß√µes de instala√ß√£o est√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </li></ol><br>  Vamos come√ßar.  Primeiro, crie um esqueleto de papel usando a gal√°xia ansible: <br><br><pre> <code class="plaintext hljs"># I like clear names on projects. # In meta/main.yml I will make role_name: hello-world-k8s $ ansible-galaxy init ansible-role-hello-world-k8s</code> </pre><br>  Imediatamente ap√≥s a cria√ß√£o de uma nova fun√ß√£o Ansible, definiremos todos os valores padr√£o para, ao mesmo tempo, documentar seus par√¢metros de configura√ß√£o v√°lidos.  Al√©m disso, nosso exemplo do Hello World n√£o √© particularmente complicado nesse sentido.  √â assim que nosso arquivo padr√£o / main.yml se parece: <br><br><pre> <code class="plaintext hljs">--- # NOTE: meta.name(space) comes from CR metadata when run with Ansible Operator # deploy/crds has an example CR for reference name: "{{ meta.name | default('hello-world') }}" namespace: "{{ meta.namespace | default('hello-world') }}" image: docker.io/ansibleplaybookbundle/hello-world:latest # To uninstall from the cluster # state: absent state: present # The size of the hello-world deployment size: 1</code> </pre><br>  Depois de definir os valores padr√£o, √© necess√°rio decidir o que a fun√ß√£o far√°.  O aplicativo Hello World precisar√° fazer o seguinte: <br><br><ol><li>  Obtenha informa√ß√µes sobre as APIs dispon√≠veis no cluster. </li><li>  Crie v√°rios modelos e verifique se eles est√£o presentes ou ausentes no cluster. </li></ol><br>  Portanto, nosso arquivo tasks / main.yml se parece com o seguinte: <br><br><pre> <code class="plaintext hljs">--- - name: "Get information about the cluster" set_fact: api_groups: "{{ lookup('k8s', cluster_info='api_groups') }}" - name: 'Set hello-world objects state={{ state }}' k8s: state: '{{ state }}' definition: "{{ lookup('template', item.name) | from_yaml }}" when: item.api_exists | default(True) loop: - name: deployment.yml.j2 - name: service.yml.j2 - name: route.yml.j2 api_exists: "{{ True if 'route.openshift.io' in api_groups else False }}"</code> </pre><br>  Antes de passar para os modelos, preste aten√ß√£o a esta linha no arquivo de tarefas: <br><br><pre> <code class="plaintext hljs">api_exists: "{{ True if 'route.openshift.io' in api_groups else False }}"</code> </pre><br>  Usando set_fact, obtemos uma lista de todas as APIs dispon√≠veis no cluster para que possamos gerar seletivamente modelos, dependendo da exist√™ncia de uma API - nesse caso, route.openshift.io.  Por padr√£o, no cluster Kubernetes do OpenShift, as rotas n√£o est√£o dispon√≠veis e n√£o precisamos delas, portanto, trabalhamos apenas com o objeto Route quando houver route.openshift.io no cluster. <br><br>  N√£o apenas podemos gerenciar objetos seletivamente no cluster, dependendo da disponibilidade de determinadas APIs, mas tamb√©m usar os modelos Jinja2 para usar o OpenShift DeploymentConfig em nosso modelo de Implanta√ß√£o, se o cluster tiver a API apps.openshift.io.  Aqui est√° a apar√™ncia do nosso arquivo templates / deployment.yml.j2: <br><br><pre> <code class="plaintext hljs">--- {% if 'apps.openshift.io' in api_groups %} apiVersion: apps.openshift.io/v1 kind: DeploymentConfig {% else %} apiVersion: apps/v1 kind: Deployment {% endif %} metadata: name: {{ name }} namespace: {{ namespace }} labels: app: {{ name }} service: {{ name }} spec: replicas: {{ size }} {% if 'apps.openshift.io' in api_groups %} selector: app: {{ name }} service: {{ name }} {% else %} selector: matchLabels: app: {{ name }} service: {{ name }} {% endif %} template: metadata: labels: app: {{ name }} service: {{ name }} spec: containers: - image: {{ image }} name: hello-world ports: - containerPort: 8080 protocol: TCP</code> </pre><br>  Modelos de arquivo / service.yml.j2: <br><br><pre> <code class="plaintext hljs">--- apiVersion: v1 kind: Service metadata: name: {{ name }} namespace: {{ namespace }} labels: app: {{ name }} service: {{ name }} spec: ports: - name: web port: 8080 protocol: TCP targetPort: 8080 selector: app: {{ name }} service: {{ name }}</code> </pre><br>  E, finalmente, o arquivo templates / route.yml.j2: <br><br><pre> <code class="plaintext hljs">--- apiVersion: route.openshift.io/v1 kind: Route metadata: name: {{ name }} namespace: {{ namespace }} labels: app: {{ name }} service: {{ name }} spec: port: targetPort: web to: kind: Service name: {{ name }}</code> </pre><br>  Omitimos o arquivo meta / main.yml, mas ele pode ser encontrado <a href="">aqui</a> . <br><br>  Como resultado, temos a fun√ß√£o Ansible gerenciando o aplicativo Hello World no Kubernetes e podemos usar as APIs dispon√≠veis no cluster.  Em outras palavras, o m√≥dulo k8s e o cliente din√¢mico simplificam o trabalho com objetos no Kubernetes.  Esperamos que, com o exemplo desse papel, possamos mostrar o potencial do Ansible ao trabalhar com o Kubernetes. <br><br><h3>  Ol√° gal√°xia, conhe√ßa o Kubernetes </h3><br>  O Ansible Galaxy possui v√°rias fun√ß√µes para configurar servidores e gerenciar aplicativos, mas n√£o existem muitas fun√ß√µes para gerenciar aplicativos Kubernetes; portanto, faremos uma pequena contribui√ß√£o. <br><br>  Depois que postamos nossa fun√ß√£o no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub</a> , tudo o que restava foi: <br><br><ol><li>  Fa√ßa login no Ansible Galaxy para dar acesso aos nossos reposit√≥rios no GitHub. </li><li>  Importe nosso papel. </li></ol><br>  √â isso a√≠, agora nossa fun√ß√£o hello_world_k8s est√° dispon√≠vel publicamente no Ansible Galaxy, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h3>  Ol√° Operador Ansible, Conhe√ßa o Galaxy </h3><br>  Se voc√™ estudar cuidadosamente nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">projeto Hello World no GitHub</a> , notar√° que adicionamos v√°rias coisas necess√°rias para criar um operador Ansible, a saber: <br><br><ol><li>  <a href="">Um arquivo do Watches</a> que mapeia os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">recursos personalizados do</a> Kubernetes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">para</a> fun√ß√µes ou playbooks Ansible. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dockerfile</a> para criar nosso operador. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Implante o diret√≥rio</a> com os objetos Kubernetes necess√°rios para executar nosso operador. </li></ol><br>  Se voc√™ precisar aprender mais sobre como criar suas pr√≥prias instru√ß√µes Ansible, use o <a href="">Guia</a> do <a href="">Usu√°rio</a> .  Mas como prometemos construir um operador Ansible usando a fun√ß√£o publicada no Ansible Galaxy, tudo o que <b>realmente</b> precisamos √© de um Dockerfile: <br><br><pre> <code class="plaintext hljs">FROM quay.io/operator-framework/ansible-operator RUN ansible-galaxy install djzager.hello_world_k8s RUN echo $'--- \n\ - version: v1alpha1\n\ group: examples.djzager.io\n\ kind: HelloWorld\n\ role: /opt/ansible/roles/djzager.hello_world_k8s' &gt; ${HOME}/watches.yaml</code> </pre><br>  Agora coletamos o operador: <br><br><pre> <code class="plaintext hljs">$ docker build -t hello-world-operator -f Dockerfile . Sending build context to Docker daemon 157.2 kB Step 1/3 : FROM quay.io/operator-framework/ansible-operator latest: Pulling from operator-framework/ansible-operator Digest: sha256:1156066a05fb1e1dd5d4286085518e5ce15acabfff10a8145eef8da088475db3 Status: Downloaded newer image for quay.io/water-hole/ansible-operator:latest ---&gt; 39cc1d19649d Step 2/3 : RUN ansible-galaxy install djzager.hello_world_k8s ---&gt; Running in 83ba8c21f233 - downloading role 'hello_world_k8s', owned by djzager - downloading role from https://github.com/djzager/ansible-role-hello-world-k8s/archive/master.tar.gz - extracting djzager.hello_world_k8s to /opt/ansible/roles/djzager.hello_world_k8s - djzager.hello_world_k8s (master) was installed successfully Removing intermediate container 83ba8c21f233 ---&gt; 2f303b45576c Step 3/3 : RUN echo $'--- \n- version: v1alpha1\n group: examples.djzager.io\n kind: HelloWorld\n role: /opt/ansible/roles/djzager.hello_world_k8s' &gt; ${HOME}/watches.yaml ---&gt; Running in cced495a9cb4 Removing intermediate container cced495a9cb4 ---&gt; 5827bc3c1ca3 Successfully built 5827bc3c1ca3 Successfully tagged hello-world-operator:latest</code> </pre><br>  √â claro que, para <b>usar</b> esse operador, voc√™ precisa do conte√∫do do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">diret√≥rio de implanta√ß√£o</a> do nosso projeto para criar uma Conta de Servi√ßo, Fun√ß√£o e Vincula√ß√£o de Fun√ß√£o, Defini√ß√£o de Recurso Personalizado, bem como implantar o pr√≥prio operador.  E depois de implantar o operador, voc√™ precisar√° criar um Recurso Customizado para obter uma inst√¢ncia do aplicativo Hello World: <br><br><pre> <code class="plaintext hljs">apiVersion: examples.djzager.io/v1alpha1 kind: HelloWorld metadata: name: example-helloworld namespace: default spec: size: 3</code> </pre><br><h3>  Escopos do operador: namespace e cluster </h3><br>  Um pouco mais alto, j√° sugerimos explorar nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">diret√≥rio de implanta√ß√£o</a> e procurar objetos Kubernetes necess√°rios para iniciar o operador.  H√° tr√™s coisas que limitam o escopo do operador ao gerenciar recursos personalizados com o espa√ßo para nome no qual o pr√≥prio operador est√° implantado, a saber: <br><br><ol><li>  A vari√°vel de ambiente WATCH_NAMESPACE no arquivo <a href="">operator.yaml</a> que informa ao operador onde procurar recursos personalizados </li><li>  <a href="">role.yaml</a> </li><li>  <a href="">role_binding</a> </li></ol><br>  Essa limita√ß√£o √© certamente √∫til no desenvolvimento de operadores.  Mas se quisermos que nosso aplicativo seja acess√≠vel a todos os usu√°rios do cluster, precisaremos da ajuda de um administrador.  Eu teria que fazer o seguinte: <br><br><ol><li>  Crie ClusterRole em vez de fun√ß√£o. </li><li>  Crie uma instru√ß√£o ServiceAccount no espa√ßo para nome em que a instru√ß√£o ser√° implantada. </li><li>  Crie um ClusterRoleBinding que associe um ServiceAccount de um espa√ßo de nome espec√≠fico a um ClusterRole. </li><li>  Expanda a instru√ß√£o com uma vari√°vel de ambiente indefinida WATCH_NAMESPACE (ou seja, ""). </li></ol><br>  Se voc√™ fizer tudo isso, o restante dos usu√°rios do cluster poder√° implantar inst√¢ncias do nosso aplicativo Hello World.  Se voc√™ estiver interessado neste t√≥pico, recomendamos que voc√™ estude o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Operator Lifecycle Manager</a> (parte da Estrutura do Operador). <br><br><h3>  Star trek </h3><br>  Mostramos como criar uma fun√ß√£o Ansible para controlar um aplicativo no Kubernetes, publicar essa fun√ß√£o no Ansible Galaxy e us√°-lo no operador Ansible.  Esperamos que voc√™ agora: <br><br><ol><li>  Voc√™ usar√° o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">m√≥dulo Ansible do k8s</a> . </li><li>  Comece a publicar suas fun√ß√µes para gerenciar aplicativos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Kubernetes</a> no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ansible Galaxy</a> . </li><li>  Interesse-se no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SDK</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">operador</a> e assine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nosso boletim informativo da estrutura do operador</a> . </li></ol><br>  Nosso aplicativo Hello World √© intencionalmente simplificado, mas existem coisas que podem ajudar a torn√°-lo ainda mais confi√°vel, e aqui est√£o algumas: <br><br><ol><li>  Usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SDK</a> do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">operador</a> - intencionalmente n√£o fizemos isso em nosso exemplo para enfatizar como √© f√°cil mudar da fun√ß√£o Ansible para o operador.  Mas √© melhor ainda usar essa fun√ß√£o com o SDK (ou seja, operator-sdk new). Al√©m disso, voc√™ pode precisar disso nas pr√≥ximas etapas. </li><li>  Valida√ß√£o - em nossa vers√£o atual, o usu√°rio pode criar um CR com o tamanho: abc, o que inevitavelmente levar√° a um erro no est√°gio de implanta√ß√£o.  Portanto, √© melhor detectar erros no est√°gio de especifica√ß√£o, e n√£o ap√≥s o in√≠cio do trabalho. </li><li>  Ciclo de vida - em exemplos mais complexos, pode ser a mesma atualiza√ß√£o de vers√£o.  Em cen√°rios como o nosso, onde existe apenas uma vers√£o do aplicativo Hello World, podemos determinar se a imagem de um cont√™iner ativo est√° desatualizada comparando-a com as imagens dispon√≠veis no registro de cont√™iner correspondente e, se necess√°rio, atualizar as inst√¢ncias em execu√ß√£o. </li><li>  Teste - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mol√©cula √©</a> muito √∫til ao desenvolver e testar fun√ß√µes Ansible. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Operator Lifecycle Manager</a> √© um kit de ferramentas para gerenciar operadores.  A integra√ß√£o com ele ajudar√° a instalar e atualizar nosso operador. </li><li>  Status - poder√≠amos ativar o sub-recurso de status no nosso Hello World CRD e usar o m√≥dulo k8s_status, que faz parte da imagem do Ansible Operator, para incluir informa√ß√µes de status no recurso personalizado. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt440188/">https://habr.com/ru/post/pt440188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt440176/index.html">Sete tend√™ncias de seguran√ßa cibern√©tica para 2019</a></li>
<li><a href="../pt440178/index.html">Removendo recurs√£o no Python</a></li>
<li><a href="../pt440180/index.html">Concurso de programa√ß√£o Q #: Concurso de codifica√ß√£o Microsoft Q #</a></li>
<li><a href="../pt440182/index.html">IBM Watson Studio - Uma plataforma de desenvolvimento de aplicativos de IA baseada em nuvem</a></li>
<li><a href="../pt440184/index.html">Por que usamos o GraphQL no 8base</a></li>
<li><a href="../pt440190/index.html">Familiaridade com a rede neural mais simples e sua implementa√ß√£o passo a passo</a></li>
<li><a href="../pt440192/index.html">Como fazemos r√°dio corporativo para nossos</a></li>
<li><a href="../pt440196/index.html">Segredos da Mente e da Matem√°tica</a></li>
<li><a href="../pt440198/index.html">Novas impressoras 3D DWS para profissionais</a></li>
<li><a href="../pt440200/index.html">Vamos falar sobre log</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>