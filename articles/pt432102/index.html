<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçü§ù‚Äçüë®üèº üë®üèª‚Äçüî¨ ‚ÑπÔ∏è Recursos expl√≠citos de JavaScript üòé üë©üèø‚Äçüè´ üë∞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quando leio outro artigo sobre os recursos pouco conhecidos da linguagem JavaScript e silenciosamente fa√ßo xixi em algumas solu√ß√µes insanas no console...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Recursos expl√≠citos de JavaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432102/"><p><img src="https://habrastorage.org/webt/f_/vy/_s/f_vy_sw3-w-pyxs4zrpqejzpkq4.jpeg" alt="Imagem"></p><br><p>  Quando leio outro artigo sobre os recursos pouco conhecidos da linguagem <strong>JavaScript</strong> e silenciosamente fa√ßo xixi em algumas solu√ß√µes insanas no console do navegador, muitas vezes digo na minha cabe√ßa que, bem, certamente n√£o √© assim no prod!  Afinal, a l√≠ngua h√° muito tempo adquiriu uma enorme comunidade e tem uma cobertura surpreendentemente ampla do desenvolvimento industrial.  Se sim, ent√£o por que esquecemos com frequ√™ncia sua capacidade de ser compreendida por todos e literalmente propagandizamos todas essas constru√ß√µes espec√≠ficas e "memor√°veis"?  <em>Apenas fa√ßa √≥bvio!</em> </p><a name="habracut"></a><br><h2 id="rassuzhdeniya-na-temu">  Racioc√≠nio sobre o t√≥pico </h2><br><p>  <em>Voc√™ pode pular essa grafomania.</em> </p><br><p> Se falamos de desenvolvimento industrial, na grande maioria dos casos, o requisito de suporte a um c√≥digo √© ainda mais importante do que resolver uma tarefa apresentada por uma empresa.  Para muitos, isso √© √≥bvio, para alguns - em parte (√© claro, raros D'Artagnans tamb√©m s√£o encontrados).  Quanto mais claro for o nosso c√≥digo, menor ser√° o risco de chegarmos √† prateleira empoeirada e para n√≥s e nossos sucessores obtermos problemas com o sistema nervoso. </p><br><p>  N√£o √© segredo que o JavaScript √© incr√≠vel em sua flexibilidade, que √© sua maior virtude e uma maldi√ß√£o irritante.  O caminho do desenvolvedor de JavaScript √© longo e extremamente interessante: absorvemos livro por livro, artigo por artigo e ganhamos uma experi√™ncia √∫nica, mas √†s vezes √© verdadeiramente espec√≠fico do idioma.  A distribui√ß√£o mais ampla da l√≠ngua e, ao mesmo tempo, um rico n√∫mero de n√£o-√≥bvias acumuladas e alimentadas contribuem para a forma√ß√£o de duas frentes: aqueles que quase idolatram essa linguagem e aqueles que a veem como um pateta desajeitada e oscilante. </p><br><p>  E tudo ficaria bem, mas muitas vezes representantes de ambas as frentes est√£o trabalhando no mesmo projeto.  E o habitual, toda pr√°tica aceita √© mal-entendido (falta de vontade de entender e at√© ignorar) o c√≥digo um do outro.  E, de fato, <em>"eu tenho um desenvolvedor Java, e esse n√£o √© o seu!"</em>  .  Os pr√≥prios seguidores de Javascript adicionam combust√≠vel ao fogo, dizendo <em>"ningu√©m realmente sabe JavaScript!"</em>  sim <em>"Eu posso escrever em uma linha em js!"</em>  .  Confesso que eu mesmo estou abusando da programa√ß√£o anormal quando quiser ... </p><br><p>  Voc√™ come√ßa a sentir esse problema quando toma o lugar de um marginal e ganha alguma experi√™ncia trabalhando com pessoas e seu c√≥digo nos dois lados das barricadas.  O planejamento e outras reuni√µes s√£o mais produtivas quando todos os desenvolvedores se entendem, n√£o apenas no n√≠vel das linhas de neg√≥cios, mas pelo menos um pouco no n√≠vel de sua implementa√ß√£o.  O <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fator de baixo</a> not√≥rio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tem um</a> impacto menor no projeto, quando, no caso de uma √∫nica doen√ßa do frontend, o resto da equipe n√£o hesita em corrigir alguma linha do arquivo <em>.js</em> .  O processo de compartilhamento de conhecimento dentro e fora da equipe se torna mais transparente para todos quando todos t√™m uma imagem mais detalhada.  Bem e tudo na mesma linha. </p><br><p>  N√£o exorto ningu√©m a "copo cheio" ou "formato T" (como diz√™-lo agora?), Mas por que n√£o levantamos um pouco essa cortina, mesmo da comunidade JavaScript?  Para fazer isso, basta trazer um pouco de clareza ao nosso c√≥digo, usando a flexibilidade do idioma para n√£o mostrar, mas para ser entendido. </p><br><h2 id="vzroslenie-i-prinyatie-otvetstvennosti">  Crescer e assumir responsabilidade </h2><br><p>  Por sua vez, o JavaScript h√° muito tempo desempenha seu papel, n√£o como uma linguagem para a interatividade das p√°ginas da Internet e "colando" seus recursos, mas como uma ferramenta poderosa e suficiente para criar aplicativos completos entre plataformas e muitas vezes escalon√°veis. </p><br><p>  Originalmente projetada para web designers, essa "linguagem de programa√ß√£o mais incompreendida" tem pisado na √°gua h√° muito tempo, apesar da crescente popularidade e relev√¢ncia.  Nos 13-14 anos anteriores √† edi√ß√£o do ECMAScript 5.1, √© dif√≠cil recordar quaisquer mudan√ßas importantes no padr√£o ou entender o vetor de seu desenvolvimento.  Naquela √©poca, sua comunidade fez uma enorme contribui√ß√£o para a forma√ß√£o do ecossistema da linguagem: Prototype, jQuery, MooTools, etc.  Depois de receber esse feedback dos desenvolvedores, o JavaScript fez um trabalho significativo sobre os bugs: o alto lan√ßamento de 6 anos do ES6 em 2015 e agora os lan√ßamentos anuais do ECMAScript, gra√ßas ao processo redesenhado pelo comit√™ do TC39 de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">introduzir novos recursos</a> nas especifica√ß√µes. </p><br><p>  Bem, quando nossos aplicativos se tornaram grandes o suficiente, o modelo OOP do prot√≥tipo para descrever os tipos de usu√°rios n√£o era mais justificado devido a uma abordagem incomum.  Bem, s√©rio, o que √© isso? </p><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Animal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* Call me via new and I will be the constructor ;) */</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Rabbit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{} Rabbit.prototype = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(Animal.prototype); Rabbit.prototype.constructor = Rabbit;</code> </pre> <br><p>  As aulas n√£o apareceram no idioma, mas sua sintaxe apareceu.  E o c√≥digo ficou dispon√≠vel para os adeptos do paradigma tradicional orientado a classes: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-comment"><span class="hljs-comment">/* Obviously, the constructor is here! */</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rabbit</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> <br><p>  Agora, na fase do candidato √† liberta√ß√£o, est√£o os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">campos particulares da</a> classe.  √â dif√≠cil acreditar que, mais cedo ou mais tarde, paremos de rir uns dos outros com um acordo sobre nomear propriedades privadas por meio de sublinhados. </p><br><p>  Ao mesmo tempo, em uma linguagem em que uma fun√ß√£o √© um objeto de primeira ordem e ocorre um evento constante, √© bastante comum: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> that = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; setTimeout(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ that.n += <span class="hljs-number"><span class="hljs-number">1</span></span>; }, <span class="hljs-number"><span class="hljs-number">1000</span></span>);</code> </pre> <br><p>  E ent√£o come√ßam as explica√ß√µes sobre <em>esses</em> contextos e o fechamento do JavaScript, o que assusta todo segundo desenvolvedor externo.  Mas, em muitos casos, a linguagem evita surpresas desnecess√°rias usando explicitamente <em>Function.prototype.bind</em> ou mesmo assim: </p><br><pre> <code class="javascript hljs">setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.n += <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>);</code> </pre> <br><p>  Tamb√©m temos fun√ß√µes de seta, e essas s√£o realmente fun√ß√µes, n√£o interfaces funcionais (sim, Java?).  Juntamente com um conjunto expandido de m√©todos para trabalhar com uma matriz, eles tamb√©m ajudam a escrever a linha de pagamento declarativa usual dos c√°lculos: </p><br><pre> <code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">-3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>] .filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> x &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) .map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.pow(<span class="hljs-number"><span class="hljs-number">2</span></span>, x)) .reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">s, x</span></span></span><span class="hljs-function">) =&gt;</span></span> s + x, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br><p>  A linguagem corretamente se considera multiparadigm√°tica.  Mas aqui est√° um exemplo simples sobre a assinatura de alguma fun√ß√£o: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ping</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">host, count</span></span></span><span class="hljs-function">) </span></span>{ count = count || <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* send ping to host count times */</span></span> }</code> </pre> <br><p>  Primeiro, uma pessoa que passa far√° uma pergunta dizendo que provavelmente uma fun√ß√£o pode receber apenas o primeiro argumento e depois dizer que diabos, nesse caso, <em>count</em> se torna booleano!  De fato, a fun√ß√£o tem dois usos: com <em>contagem</em> e sem.  Mas isso √© completamente √≥bvio: voc√™ precisa observar a implementa√ß√£o e entender.  O uso do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JSDoc</a> pode ajudar, mas isso n√£o √© uma pr√°tica comum.  E aqui o JavaScript foi adiante, adicionando suporte n√£o para sobrecarga, mas pelo menos para par√¢metros padr√£o: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ping</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">host, count = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> }</code> </pre> <br><p>  Resumindo, o JavaScript tem um grande n√∫mero de coisas familiares: geradores, iteradores, cole√ß√µes de <em>conjuntos</em> e dicion√°rios de <em>mapas</em> , matrizes digitadas e at√© express√µes regulares come√ßaram a agradar com o suporte <em>lookbehind</em> !  A linguagem faz de tudo para se adequar a muitas coisas e se tornar amig√°vel para todos. </p><br><h2 id="blagopriyatnyy-put-k-ochevidnomu">  Caminho favor√°vel ao √≥bvio </h2><br><p>  A linguagem em si √© certamente bem-feita, e √© dif√≠cil argumentar com isso!  Mas o que h√° de errado conosco?  Por que lembramos constantemente ao mundo inteiro que o JavaScript √© de alguma forma diferente?  Vejamos exemplos de algumas t√©cnicas amplamente usadas e perguntemos sobre sua adequa√ß√£o. </p><br><h3 id="privedenie-tipov">  Tipo de fundi√ß√£o </h3><br><p>  Sim, o JavaScript tem um sistema de tipos din√¢mico e fraco e permite que voc√™ execute opera√ß√µes em qualquer coisa, executando implicitamente transforma√ß√µes para n√≥s.  Mas, muitas vezes, a convers√£o expl√≠cita ainda √© necess√°ria para n√≥s, e o seguinte pode ser observado: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bool = !!(expr); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> numb = +(expr); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> str = <span class="hljs-string"><span class="hljs-string">''</span></span>+(expr);</code> </pre> <br><p>  Esses truques s√£o conhecidos de todos os desenvolvedores de JavaScript e s√£o motivados pelo fato de dizerem que voc√™ pode "rapidamente" transformar algo em algo: por velocidade, aqui se entende um registro curto.  Tamb√©m pode escrever <em>falso</em> imediatamente como <em>! 1</em> ?  Se o desenvolvedor estiver t√£o preocupado com os caracteres imprim√≠veis, em seu IDE favorito, voc√™ poder√° configurar facilmente o <em>modelo ativo</em> necess√°rio ou concluir automaticamente.  E se - para o tamanho do c√≥digo publicado, sempre o executamos atrav√©s do ofuscador, que sabe melhor do que o nosso como desumanizar tudo isso.  Porque n√£o: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bool = <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span>(expr); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> numb = <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>(expr); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> str = <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(expr);</code> </pre> <br><p>  O resultado √© o mesmo, claro para todos. </p><br><p>  Para convers√µes de string, temos <em>toString</em> , mas para num√©ricas existe um valor interessante, que tamb√©m pode ser substitu√≠do.  Um exemplo cl√°ssico que introduz o "n√£o iniciado" em um estupor: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> timestamp = +<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>;</code> </pre> <br><p>  Mas o <em>Date</em> tem um m√©todo <em>getTime</em> conhecido, vamos us√°-lo: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> timestamp = (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>()).getTime();</code> </pre> <br><p>  ou fun√ß√£o pronta: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> timestamp = <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now();</code> </pre> <br><p>  N√£o h√° absolutamente nenhuma necessidade de explorar a convers√£o impl√≠cita de tipos. </p><br><h3 id="logicheskie-operatory">  Operadores l√≥gicos </h3><br><p>  √â dada aten√ß√£o especial aos operadores l√≥gicos AND (&amp;&amp;) e OR (||), que n√£o s√£o muito l√≥gicos no JavaScript: eles aceitam e retornam valores de qualquer tipo.  N√£o entraremos em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">detalhes da opera√ß√£o da calculadora de</a> express√µes l√≥gicas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">;</a> consideraremos exemplos.  A op√ß√£o apresentada anteriormente com a fun√ß√£o: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ping</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">host, count</span></span></span><span class="hljs-function">) </span></span>{ count = count || <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> }</code> </pre> <br><p>  Pode ser assim: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ping</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">host, count</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// OR arguments.length? if (typeof count == 'undefined') { count = 5; } /* ... */ }</span></span></code> </pre> <br><p>  Essa verifica√ß√£o √© mais familiar e, em alguns casos, pode ajudar a evitar erros. </p><br><p>  Em vez disso, parece uma selvageria para o desenvolvedor que inicialmente escolheu o caminho do JavaScript.  Mas para a maioria dos outros, esse c√≥digo √© realmente selvagem: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> root = (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> self == <span class="hljs-string"><span class="hljs-string">'object'</span></span> &amp;&amp; self.self === self &amp;&amp; self) || (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> global == <span class="hljs-string"><span class="hljs-string">'object'</span></span> &amp;&amp; global.global === global &amp;&amp; global);</code> </pre> <br><p>  Sim, √© compacto e, sim, as bibliotecas populares podem pagar.  Mas por favor, n√£o vamos abusar, porque nosso c√≥digo n√£o ser√° lido por colaboradores em JavaScript, mas por desenvolvedores que resolverem problemas de neg√≥cios no prazo. </p><br><p>  Esse padr√£o pode ocorrer: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> count = <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> opts == <span class="hljs-string"><span class="hljs-string">'object'</span></span> &amp;&amp; opts.count || <span class="hljs-number"><span class="hljs-number">5</span></span>;</code> </pre> <br><p>  Definitivamente, √© mais curto que o operador tern√°rio usual, mas ao ler esse c√≥digo, a primeira coisa que voc√™ lembra √© das prioridades das opera√ß√µes usadas. </p><br><p>  Se escrevermos uma fun√ß√£o predicada, que passamos para o mesmo <em>Array.prototype.filter</em> , <em>agrupar</em> o valor de retorno em <em>Boolean</em> √© um bom tom.  O objetivo dessa fun√ß√£o imediatamente se torna aparente e n√£o h√° disson√¢ncia entre os desenvolvedores cujas linguagens possuem os operadores l√≥gicos "corretos". </p><br><h3 id="pobitovye-operacii">  Opera√ß√µes bit a bit </h3><br><p>  Um exemplo comum de verifica√ß√£o da presen√ßa de um elemento em uma matriz ou substring em uma string usando NOT bit a bit (NOT), que √© oferecido mesmo por alguns tutoriais: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (~[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].indexOf(<span class="hljs-number"><span class="hljs-number">1</span></span>)) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'yes'</span></span>); }</code> </pre> <br><p>  Que problema isso resolve?  n√£o precisamos verificar <em>! == -1</em> , pois <em>indexOf</em> obter√° o √≠ndice do elemento ou -1, e o til adicionar√° 1 e mudar√° o sinal.  Assim, a express√£o se tornar√° "falsa" no caso do √≠ndice -1. </p><br><p>  Mas a duplica√ß√£o de c√≥digo pode ser evitada de outra maneira: colocar uma verifica√ß√£o em uma fun√ß√£o separada de algum objeto utils, como todo mundo faz, do que usar opera√ß√µes bit a bit para outros fins.  Existe uma fun√ß√£o include no lodash para isso, e n√£o funciona atrav√©s <del>  assfucked </del>  til.  Voc√™ pode se alegrar, porque no ECMAScript 2016, o m√©todo <em>Array.prototype.includes</em> foi <em>corrigido</em> (as linhas tamb√©m t√™m um). </p><br><p>  Mas l√° estava!  Outro til (junto com o XOR) √© usado para arredondar n√∫meros, descartando a parte decimal: </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(~~<span class="hljs-number"><span class="hljs-number">3.14</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 3 console.log(2.72^0); // 2</span></span></code> </pre> <br><p>  Mas h√° <em>parseInt</em> ou <em>Math.floor</em> para esses prop√≥sitos.  As opera√ß√µes bit a bit aqui s√£o convenientes para digitar rapidamente o c√≥digo no console, pois tamb√©m t√™m uma baixa prioridade sobre o restante da aritm√©tica.  Mas em uma revis√£o de c√≥digo, √© melhor n√£o perder. </p><br><h3 id="sintaksis-i-konstrukcii-yazyka">  Constru√ß√µes de sintaxe e idioma </h3><br><p>  √â dif√≠cil atribuir algumas pr√°ticas estranhas a qualquer se√ß√£o em particular.  Por exemplo, eles dizem que colchetes s√£o opcionais ao chamar o construtor e as duas express√µes a seguir s√£o id√™nticas: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rabbit = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rabbit(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rabbit = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rabbit;</code> </pre> <br><p>  E √© mesmo!  mas por que criar uma pergunta do zero?  Nem todo idioma pode se orgulhar de tal "recurso".  E se voc√™ ainda quiser, deixe que seja um acordo em todo o projeto.  Caso contr√°rio, h√° uma falsa sensa√ß√£o de que h√° alguma diferen√ßa. </p><br><p>  Uma situa√ß√£o semelhante ao declarar um conjunto de vari√°veis.  A sintaxe das diretivas <em>var</em> e <em>let</em> permite declarar (e definir) v√°rias vari√°veis ‚Äã‚Äãao mesmo tempo, separadas por v√≠rgulas: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> count = <span class="hljs-number"><span class="hljs-number">5</span></span>, host, retry = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;</code> </pre> <br><p>  Algu√©m usa feeds de linha para facilitar a leitura, mas, de qualquer forma, essa sintaxe n√£o √© comum em idiomas populares.  Ningu√©m vai dar uma m√£o e perguntar se voc√™ escreve assim: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> count = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> retry = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> host;</code> </pre> <br><p>  Novamente, se houver um acordo sobre bom estilo no n√≠vel do projeto / empresa, n√£o haver√° perguntas.  S√≥ que voc√™ n√£o precisa combinar muita sintaxe para o seu humor. </p><br><p>  Existem constru√ß√µes espec√≠ficas no idioma, como IIFE, que permitem chamar uma fun√ß√£o imediatamente no local de sua defini√ß√£o.  O truque √© que o analisador reconhe√ßa uma express√£o funcional, n√£o uma declara√ß√£o de fun√ß√£o.  E isso pode ser feito de v√°rias maneiras diferentes: empacotamento cl√°ssico entre par√™nteses, atrav√©s do <em>void</em> ou de qualquer outro operador un√°rio.  E n√£o h√° nada maravilhoso nisso!  √â necess√°rio escolher a √∫nica op√ß√£o e n√£o deix√°-la sem a necessidade: </p><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> }());</code> </pre> <br><p>  N√£o h√° necessidade de usar operadores para hackear o analisador.  Quando um rec√©m-chegado chega ao projeto, quero mergulh√°-lo na l√≥gica comercial do aplicativo e n√£o aliment√°-lo com explica√ß√µes de onde todos esses pontos de exclama√ß√£o e vazios foram espionados.  H√° tamb√©m uma segunda entrada entre colchetes cl√°ssica e um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">coment√°rio</a> interessante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">de Crockford</a> sobre esse assunto. </p><br><p>  A apar√™ncia da sintaxe de classe no ES6 n√£o foi acompanhada pelos modificadores de acesso usuais.  E √†s vezes o desenvolvedor quer fazer xixi nas aulas e observar a privacidade.  O que leva a esse c√≥digo de Frankenstein: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(name) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> _name = name; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getName = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _name; } } toString() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.getName()}</span></span></span><span class="hljs-string">`</span></span>; } }</code> </pre> <br><p>  Ou seja, os acessadores s√£o criados para a inst√¢ncia no construtor e a privacidade √© alcan√ßada pelo acesso a vari√°veis ‚Äã‚Äãde propriedades locais por meio do fechamento.  Este exemplo parece bastante parecido com o Lacconcino, mas √© uma abordagem completamente escalon√°vel, a menos que voc√™ construa uma solu√ß√£o de estrutura documentada em torno dela.  Senhores, vamos usar as classes dispon√≠veis (e aguardar a padroniza√ß√£o dos campos privados) ou o popular m√≥dulo de padr√µes.  Criar algum tipo de solu√ß√£o intermedi√°ria de mistura aqui √© algo importante para voc√™, j√° que as classes deixam de ser classes e o c√≥digo √© intelig√≠vel. </p><br><p>  Resumindo, ele compartilhar√° seu senso comum com o guia de estilo adotado no projeto, a configura√ß√£o do linter ou simplesmente fragmentos de c√≥digo com colegas que contribuem com seu componente n√£o JavaScript no projeto.  O idioma oferece v√°rias op√ß√µes para literalmente todas as tarefas t√≠picas, portanto, melhorar o entendimento um do outro e cair em um denominador comum n√£o √© dif√≠cil (ou quase). </p><br><h2 id="zloklyuchenie">  Misadventure </h2><br><p>  Este t√≥pico √© certamente hol√≠stico e h√° muito mais exemplos, mas a principal mensagem do artigo √© que voc√™ n√£o deve abusar da n√£o-obviedade no JavaScript, onde isso pode ser evitado.  A natureza do idioma √© √∫nica: permite que voc√™ escreva solu√ß√µes elegantes e expressivas (moderadamente "pontiagudas"), al√©m de compreens√≠vel e acess√≠vel a todos.  Eu discordo fundamentalmente da sabedoria convencional de que o JavaScript "se castigou" ou "enterrado sob uma pilha de boas inten√ß√µes e erros".  Porque agora a maior parte da estranheza √© demonstrada n√£o pela linguagem, mas pela cultura dos desenvolvedores e (n√£o) indiferente formada em torno dela. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt432102/">https://habr.com/ru/post/pt432102/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt432090/index.html">Magento Meetup Kharkiv No. 4 - reportagens em v√≠deo</a></li>
<li><a href="../pt432092/index.html">Erros desagrad√°veis ‚Äã‚Äãao escrever testes de unidade</a></li>
<li><a href="../pt432094/index.html">Hackathon online conjunto da OpenGift e da plataforma Blockchain de cr√©ditos</a></li>
<li><a href="../pt432096/index.html">Guia completo do CMake. Parte Dois: Build System</a></li>
<li><a href="../pt432098/index.html">Pilotos autom√°ticos no transporte rodovi√°rio, como interagir com promo√ß√µes. por transporte?</a></li>
<li><a href="../pt432104/index.html">Resumo dos eventos de TI de dezembro (parte um)</a></li>
<li><a href="../pt432106/index.html">Food Design Digest, novembro de 2018</a></li>
<li><a href="../pt432108/index.html">As inscri√ß√µes intensivas est√£o abertas para os Kubernetes de 1 a 3 de fevereiro em S√£o Petersburgo</a></li>
<li><a href="../pt432110/index.html">Tecnologias web para designers - pagamento de d√≠vidas</a></li>
<li><a href="../pt432112/index.html">Intel XMM 8160 - um modem 5G universal de v√°rios modos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>