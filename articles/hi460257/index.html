<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯПВЁЯП╝ ЁЯРЙ тП╕я╕П рдирдорд╕реНрддреЗ рд╡рд┐рд╢реНрд╡! рдЯрд░реНрдорд┐рдирд▓реЛрдВ рдореЗрдВ рдЧрд╣рд░рд╛ рд╡рд┐рд╕рд░реНрдЬрди ЁЯМ╢я╕П ЁЯзСЁЯП╛ ЁЯФ╣</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдореБрдЭреЗ рдпрд╣ рд▓реЗрдЦ рд╕рд┐рд╢реНрдиреА рдкреНрд░рд┐рдВрдЯрдл рдХреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд░ рдПрдХ рд▓реЗрдЦ рджреНрд╡рд╛рд░рд╛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЗрд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЯрд░реНрдорд┐рдирд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдбреЗрдЯрд╛ рдХрд┐рд╕ рддрд░рд╣ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдирдорд╕реНрддреЗ рд╡рд┐рд╢реНрд╡! рдЯрд░реНрдорд┐рдирд▓реЛрдВ рдореЗрдВ рдЧрд╣рд░рд╛ рд╡рд┐рд╕рд░реНрдЬрди</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460257/"><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><img src="https://habrastorage.org/webt/ha/5f/0v/ha5f0vjiijc9c92bnnt56z7jcpg.jpeg"></a> </p><br><p>  рдореБрдЭреЗ рдпрд╣ рд▓реЗрдЦ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд┐рд╢реНрдиреА рдкреНрд░рд┐рдВрдЯрдл рдХреЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд░ рдПрдХ рд▓реЗрдЦ</a> рджреНрд╡рд╛рд░рд╛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЗрд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЯрд░реНрдорд┐рдирд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдбреЗрдЯрд╛ рдХрд┐рд╕ рддрд░рд╣ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдкрд▓ рдпрд╛рдж рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рдореИрдВ рдЗрд╕ рджреЛрд╖ рдХреЛ рдареАрдХ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдФрд░ рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рдбреЗрдЯрд╛ рдкрде рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред  рд╣рдо рдпрд╣ рднреА рд╕рдордЭреЗрдВрдЧреЗ рдХрд┐ рдЯрд░реНрдорд┐рдирд▓ рд╢реЗрд▓ рд╕реЗ рдЕрд▓рдЧ рдХреИрд╕реЗ рд╣реИ, рд╕реНрдпреВрдбреЛрдЯрд░реНрдорд┐рдирд▓ рдХреНрдпрд╛ рд╣реИ, рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдмрд╣реБрдд рдХреБрдЫред </p><a name="habracut"></a><br><h2 id="osnovy">  рдореВрд▓ рдмрд╛рддреЗрдВ </h2><br><p>  рдЖрдЗрдП рдкрд╣рд▓реЗ рд╕рдордЭрддреЗ рд╣реИрдВ рдХрд┐ рдЯрд░реНрдорд┐рдирд▓, рд╢реЗрд▓, рдХрдВрд╕реЛрд▓ рдХреНрдпрд╛ рд╣реИ, рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рдХреИрд╕реЗ рд╕рд╛рдзрд╛рд░рдг рдЯрд░реНрдорд┐рдирд▓ рд╕реЗ рдЕрд▓рдЧ рд╣реИ, рдФрд░ рдпрд╣ рдХреНрдпреЛрдВ рдирд╛рдо рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдХрд╛рдлреА рдЬрд╛рдирдХрд╛рд░реА рдкрд╣рд▓реЗ рд╣реА рд▓рд┐рдЦреА рдЬрд╛ рдЪреБрдХреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рдпрд╣рд╛рдВ рдХреБрдЫ рднреА рдирдпрд╛ рдирд╣реАрдВ рд╕реБрдирд╛рдИ рджреЗрдЧрд╛ред  рдпрд╣рд╛рдВ рд▓рдЧрднрдЧ рд╕рднреА рдЬрд╛рдирдХрд╛рд░реА рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рд▓реА рдЧрдИ рдереА, рдореИрдВ рд▓реЗрдЦ рдХреЗ рдЕрдВрдд рдореЗрдВ рд▓рд┐рдВрдХ рдкреНрд░рджрд╛рди рдХрд░реВрдВрдЧрд╛ред  рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЬрд╛рдирддрд╛ рд╣реИ рдХрд┐ рдЗрди рд╕рднреА рдЪреАрдЬреЛрдВ рдХрд╛ рдХреНрдпрд╛ рдорддрд▓рдм рд╣реИ, рдЗрд╕ рдЕрдиреБрднрд╛рдЧ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдЫреЛрдбрд╝ рд╕рдХрддрд╛ рд╣реИред </p><br><hr><br><h3 id="terminal">  рдЕрдВрддрд┐рдо </h3><br><p>  <strong>рдПрдХ рдЯрд░реНрдорд┐рдирд▓</strong> рдПрдХ рдбрд┐рд╕реНрдкреНрд▓реЗ рдФрд░ рдПрдХ рдХреАрдмреЛрд░реНрдб рдХрд╛ рд╕рдВрдпреЛрдЬрди рд╣реИ, рдЬреЛ рдПрдХ рднреМрддрд┐рдХ рдЙрдкрдХрд░рдг рд╣реИред  рдЯрд░реНрдорд┐рдирд▓реЛрдВ рдХреЗ рдЗрд╕ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдпреЛрдЬрди рдмрдирдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╡реЗ рдЯреЗрд▓реАрдкреНрд░рд┐рдВрдЯрд░ (рдЯреЗрд▓реЗрдЯрд╛рдЗрдк, рдЯреЗрд▓реЗрдЯрд╛рдЗрдкреНрд░рд┐рдЯрд░ рдпрд╛ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ TTY) рдирд╛рдордХ рдПрдХ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЙрдкрдХрд░рдг рдереЗ, рдпрд╛рдиреА рдкреНрд░рд┐рдВрдЯрд░ рдФрд░ рдХреАрдмреЛрд░реНрдб рдХрд╛ рд╕рдВрдпреЛрдЬрдиред  рдЖрдорддреМрд░ рдкрд░, рдХрдИ рдЯрд░реНрдорд┐рдирд▓ рдПрдХ рд╣реА рдХрдВрдкреНрдпреВрдЯрд░ рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдПрдХ рд╣реА рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рдХрдИ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдХрд░рдирд╛ рд╕рдВрднрд╡ рдерд╛, рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдХрд╛ рдЕрдкрдирд╛ рд╕рддреНрд░ рдерд╛, рджреВрд╕рд░реЛрдВ рд╕реЗ рд╕реНрд╡рддрдВрддреНрд░ред  рдЯрд░реНрдорд┐рдирд▓ рдХрд╛ рдирд╛рдо рдЗрд╕рд▓рд┐рдП рд░рдЦрд╛ рдЧрдпрд╛ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЯрд░реНрдорд┐рдирд▓ рдХреЗрдмрд▓ рдХреЗ рдЕрдВрдд рдореЗрдВ рд╕реНрдерд┐рдд рдерд╛ред </p><br><p>  рдпрд╣ <strong>рдЯреЗрд▓реЗрдЯрд╛рдЗрдк рд╣реИ</strong> : </p><br><img src="https://habrastorage.org/webt/m3/_3/yt/m3_3ytmmoofzwgpr3dpu78w8m7i.jpeg" alt="Teletype" title="рдЯреЗрд▓рд┐рдЯрд╛рдЗрдк" width="430" height="370"><br><br><p>  рдФрд░ рдпрд╣ <strong>рдЯрд░реНрдорд┐рдирд▓ рд╣реИ</strong> : </p><br><img src="https://habrastorage.org/webt/pz/lj/eu/pzljeumccjvqmrunt-pqolnyx-c.jpeg" alt="Terminal" title="рдЕрдВрддрд┐рдо" width="430" height="370"><br><br><hr><br><h3 id="console">  рдХрдВрд╕реЛрд▓ </h3><br><p>  <strong>рдХрдВрд╕реЛрд▓ (рдХрдВрд╕реЛрд▓)</strong> - рдПрдХ рдЯрд░реНрдорд┐рдирд▓ рдЬреЛ рд╕реАрдзреЗ рдХрдВрдкреНрдпреВрдЯрд░ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реЛрддрд╛ рд╣реИред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдЕрдзрд┐рдХрд╛рдВрд╢ рдЯрд░реНрдорд┐рдирд▓реЛрдВ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдХрдо рд╕реЗ рдХрдо рдПрдХ рдХрдВрдкреНрдпреВрдЯрд░ рд╕реЗ рд╕реАрдзреЗ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рдерд╛ред  рдХрдВрд╕реЛрд▓ рдХреЛ рд▓реЛрдЧреЛрдВ рдХреЗ рдХрдбрд╝рд╛рдИ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рд╕рд░реНрдХрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЧрдИ рдереА, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЖрдкрдХреЛ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рдерд╛ред </p><br><hr><br><h3 id="shell">  рдЦреЛрд▓ </h3><br><p>  рдпрджрд┐ рдкрд┐рдЫрд▓реЗ рджреЛ рднреМрддрд┐рдХ рдЙрдкрдХрд░рдг рд╣реИрдВ, рддреЛ рдпрд╣ рдкрд░рд┐рднрд╛рд╖рд╛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддреА рд╣реИред </p><br><p>  <strong>рд╢реЗрд▓</strong> рдПрдХ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рджреБрднрд╛рд╖рд┐рдпрд╛ рд╣реИред  рдЕрдиреНрдп рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреЛ рдЪрд▓рд╛рдиреЗ рдХрд╛ рдореБрдЦреНрдп рдЙрджреНрджреЗрд╢реНрдп рд╣реИред  рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рд╢реИрд▓ рд╣реИрдВред  рд╕рдмрд╕реЗ рдЖрдо рд╣реИ рдмреИрд╢ (рдЕрдВрдЧреНрд░реЗрдЬреА рдмреЙрд░реНрди рдЕрдЧреЗрди рд╢реЗрд▓ рд╕реЗ, рдЬреИрд╕рд╛ рдХрд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рдХрд┐рдкреАрдбрд┐рдпрд╛</a> рд╕реБрдЭрд╛рд╡ рджреЗрддрд╛ рд╣реИ, "рдмреЙрд░реНрди рдЕрдЧреЗрди" рд╢реЗрд▓ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд╛рдХреНрдп рд╣реИ, рдЕрд░реНрдерд╛рдд "рдкреБрдирд░реНрдЬреАрд╡рд┐рдд" рд╢реИрд▓)ред  рдЕрдиреНрдп рдЙрджрд╛рд╣рд░рдг: рдбреИрд╢ (рдПрдХ рд╣рд▓реНрдХрд╛ рд╢реЗрд▓, рдЙрдкрд▓рдмреНрдз рдпрджрд┐ рдЖрдк рдмрд╛рдЗрдирд░реА рдХреЛ / рдмрд┐рди / рд╢) рдкрд░ рдЪрд▓рд╛рддреЗ рд╣реИрдВ, рддреЛ Zshред </p><br><hr><br><p>  рдмреЗрд╢рдХ, рдЯрд░реНрдорд┐рдирд▓ рдФрд░ рдХрдВрд╕реЛрд▓ рджреЛрдиреЛрдВ рдЖрдзреБрдирд┐рдХ рд╕рдордп рдореЗрдВ рдЕрдкрдирд╛ рдкреНрд░рддрд┐рдмрд┐рдВрдм рдирд╣реАрдВ рдЦреЛрдЬ рдкрд╛рдПред  рдЗрд╕рд▓рд┐рдП, рдЖрдЧреЗ рд╣рдо рдРрд╕реА рдЪреАрдЬреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ рдЬреИрд╕реЗ рдХрд┐ <em>рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░</em> рдФрд░ <em>рд╡рд░реНрдЪреБрдЕрд▓ рдХрдВрд╕реЛрд▓</em> ред </p><br><h3 id="terminal-emulator">  рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ </h3><br><p>  <strong>рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░</strong> - рдЕрдЪреНрдЫреЗ рдкреБрд░рд╛рдиреЗ рдЯрд░реНрдорд┐рдирд▓ рдХрд╛ рдПрдХ рдПрдореБрд▓реЗрдЯрд░ред  рдПрдХ рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рдЙрди рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдЬреЛ рдПрдХреНрд╕ рд╡рд┐рдВрдбреЛ рд╕рд┐рд╕реНрдЯрдо - рдмреИрд╢, рд╡рд┐рдо рдФрд░ рдЕрдиреНрдп рдХреЗ рд╕рд╛рде рд╕реАрдзреЗ рдмрд╛рддрдЪреАрдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдЖрдЗрдП рдкрд╣рд▓реЗ рдЯрд░реНрдорд┐рдирд▓ рдХреА рдЬрд┐рдореНрдореЗрджрд╛рд░рд┐рдпреЛрдВ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ: </p><br><ol><li>  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдирдкреБрдЯ рдХреЛ рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реЗрдВ </li><li>  рдбрд┐рд╕реНрдкреНрд▓реЗ рдореЗрдВ рдХрдВрдкреНрдпреВрдЯрд░ рдЖрдЙрдЯрдкреБрдЯ рдХреА рдбрд┐рд▓реАрд╡рд░реА </li></ol><br><p>  рддреЛ рд╣рдорд╛рд░рд╛ рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рдмрд┐рд▓реНрдХреБрд▓ рд╡реИрд╕рд╛ рд╣реА рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ: рдпрд╣ рд░рдирд┐рдВрдЧ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдореЗрдВ рдпреВрдЬрд░ рдЗрдирдкреБрдЯ рджреЗрддрд╛ рд╣реИ, рдФрд░ рдбрд┐рд╕реНрдкреНрд▓реЗ рдкрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд╛ рдЖрдЙрдЯрдкреБрдЯ рднреА рджрд┐рдЦрд╛рддрд╛ рд╣реИред  рдХрд┐рд╕реА рднреА рдорд╛рдорд▓реЗ рдореЗрдВ, рдЕрд░реНрде рд░рд╣рддрд╛ рд╣реИ - рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рдЪрд▓ рд░рд╣реЗ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдмреАрдЪ, рдЗрдирдкреБрдЯ / рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХреА рдкрд░рдд рд╣реЛрддреА рд╣реИред  рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рдХреЗ рдЙрджрд╛рд╣рд░рдг: рд╕реВрдХреНрддрд┐-рдЯрд░реНрдорд┐рдирд▓, рдПрдХреНрд╕рдЯрд░реНрдо, рдХреЛрдиреЛрд▓рд╛ред </p><br><p>  <strong>рдХреГрдкрдпрд╛ рд╢реЗрд▓ рдФрд░ рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рдХреЛ рднреНрд░рдорд┐рдд рди рдХрд░реЗрдВ!</strong> <br>  рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рдПрдХ рдЬреАрдпреВрдЖрдИ рдПрдкреНрд▓реАрдХреЗрд╢рди рд╣реИ, рдЬреЛ рдХрд┐ рдПрдХреНрд╕ рд╡рд┐рдВрдбреЛ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдПрдХ рд╡рд┐рдВрдбреЛ рд╣реИред  рд╢реЗрд▓ рдПрдХ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рджреБрднрд╛рд╖рд┐рдпрд╛ рд╣реИ, рдпрд╛рдиреА рд╕рд┐рд░реНрдл рдПрдХ рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрдХ рд╣реИ, рдЗрд╕рдореЗрдВ рдЧреНрд░рд╛рдлрд┐рдХрд▓ рд╢реЗрд▓ рдирд╣реАрдВ рд╣реИред  рдХрд╛рдлреА рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдмреЛрд▓рддреЗ рд╣реБрдП, рдЖрдк <strong>рдмреИрд╢ рд▓реЙрдиреНрдЪ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ</strong> , рдЖрдк <strong>рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рдЪрд▓рд╛рддреЗ рд╣реИрдВ, рдЬреЛ рдмреИрд╢ рдХреЛ рдЕрдкрдиреЗ рдЕрдВрджрд░ рд▓реЙрдиреНрдЪ рдХрд░рддрд╛ рд╣реИ</strong> ред  рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рдФрд░ рдмреИрд╢ рдмрд┐рд▓реНрдХреБрд▓ 2 рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд╣реИрдВред  рдкрд╣рд▓рд╛ рдЗрдирдкреБрдЯ / рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рд▓рд┐рдП рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ, рджреВрд╕рд░рд╛ - рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдХрдорд╛рдВрдб рдХреЗ рд▓рд┐рдПред </p><br><p>  рд▓реЗрдЦ рдореЗрдВ рдЖрдЧреЗ, рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рд╕рднреА рд╕рдВрджрд░реНрдн рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдХрд░реЗрдВрдЧреЗред </p><br><hr><br><h3 id="virtual-console-virtual-terminal">  рд╡рд░реНрдЪреБрдЕрд▓ рдХрдВрд╕реЛрд▓ (рд╡рд░реНрдЪреБрдЕрд▓ рдЯрд░реНрдорд┐рдирд▓) </h3><br><p>  Ctrl + Alt + FN рджрдмрд╛рдПрдВ, рдЬрд╣рд╛рдВ N рдореЗрдВ рдЖрдорддреМрд░ рдкрд░ 1 рд╕реЗ 6. рддрдХ рдорд╛рди рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдиреЗ рдЕрднреА рджреЗрдЦрд╛ рд╣реИ рдЙрд╕реЗ рд╡рд░реНрдЪреБрдЕрд▓ рдХрдВрд╕реЛрд▓ (рд╡рд░реНрдЪреБрдЕрд▓ рдХрдВрд╕реЛрд▓) рдпрд╛ рд╡рд░реНрдЪреБрдЕрд▓ рдЯрд░реНрдорд┐рдирд▓ (рд╡рд░реНрдЪреБрдЕрд▓ рдЯрд░реНрдорд┐рдирд▓) рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рдЯрд░реНрдорд┐рдирд▓реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛ рдХрд╣рд╛ рдерд╛?  рдХрдИ рдЯрд░реНрдорд┐рдирд▓ рдПрдХ рдХрдВрдкреНрдпреВрдЯрд░ рд╕реЗ рдЬреБрдбрд╝реЗ рдереЗ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдЯрд░реНрдорд┐рдирд▓ рдПрдХ рдЕрд▓рдЧ рд╕рддреНрд░ рдерд╛, рдЬреЛ рджреВрд╕рд░реЛрдВ рд╕реЗ рд╕реНрд╡рддрдВрддреНрд░ рдерд╛ред  рд╡рд░реНрдЪреБрдЕрд▓ рдХрдВрд╕реЛрд▓ рдЗрд╕ рд╡рд┐рдЪрд╛рд░ рдХреЛ рджреЛрд╣рд░рд╛рддрд╛ рд╣реИ: рдЖрдкрдХреЗ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЗ рдЕрдВрджрд░ рдХрдИ рд╕реНрд╡рддрдВрддреНрд░ рд╕рддреНрд░ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ (рд╣рд╛рд▓рд╛рдВрдХрд┐, рдХрдВрдкреНрдпреВрдЯрд░ рд╕рдВрд╕рд╛рдзрди рдЕрднреА рднреА рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕рд╛рдЭрд╛ рдХрд┐рдП рдЧрдП рд╣реИрдВ)ред </p><br><p>  рдЖрдк рдЗрд╕ рдЗрдХрд╛рдИ рдХреЛ рд╡рд░реНрдЪреБрдЕрд▓ рдХрдВрд╕реЛрд▓ рдФрд░ рд╡рд░реНрдЪреБрдЕрд▓ рдЯрд░реНрдорд┐рдирд▓ рджреЛрдиреЛрдВ рдХрд╛ рдирд╛рдо рджреЗ рд╕рдХрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдкрд░рд┐рднрд╛рд╖рд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдХрдВрд╕реЛрд▓ рдПрдХ рдХрдВрдкреНрдпреВрдЯрд░ рд╕реЗ рд╕реАрдзреЗ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рдЯрд░реНрдорд┐рдирд▓ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рднреА рд╡рд░реНрдЪреБрдЕрд▓ рдЯрд░реНрдорд┐рдирд▓ рдПрдХ рдЕрд░реНрде рдореЗрдВ, рд╕реАрдзреЗ рдХрдВрдкреНрдпреВрдЯрд░ рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВред </p><br><hr><br><h3 id="tty-ustroystva">  TTY рдбрд┐рд╡рд╛рдЗрд╕ </h3><br><p>  рдкреНрд░рддреНрдпреЗрдХ рдЯрд░реНрдорд┐рдирд▓ рдХреЛ рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ <em>TTY рдбрд┐рд╡рд╛рдЗрд╕</em> (рдЯрд░реНрдорд┐рдирд▓ рдбрд┐рд╡рд╛рдЗрд╕) рд╕реМрдВрдкрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдХрдВрд╕реЛрд▓ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЯреЗрд▓реЗрдЯрд╛рдЗрдкреНрд╕ рдЖрдкрдХреЛ рдорд┐рд▓рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЯреАрдЯреАрд╡рд╛рдИ рдореЗрдВ рдХрдореА рдЖрдЬ рддрдХ рдмрд░рдХрд░рд╛рд░ рд╣реИред </p><br><p>  TTY рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рджреЛ рдореВрд▓рднреВрдд рдШрдЯрдХ рд╣реЛрддреЗ рд╣реИрдВ: </p><br><ol><li>  <strong>рдбрд┐рд╡рд╛рдЗрд╕ рдбреНрд░рд╛рдЗрд╡рд░</strong>  рд╡рд╣ рдХрд╛рд░реНрдпрдХреНрд░рдо рдореЗрдВ рдХреАрдмреЛрд░реНрдб рдЗрдирдкреБрдЯ рджреЗрдиреЗ рдФрд░ рд╕реНрдХреНрд░реАрди рдкрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдЖрдЙрдЯрдкреБрдЯ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред </li><li>  <strong>TTY рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди</strong> (рд░реВрд╕реА рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди)ред  рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рдбреНрд░рд╛рдЗрд╡рд░ рдПрдХреНрд╕реЗрд╕ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реИ, рдЬреЛ рд╣рд╛рд▓рд╛рдВрдХрд┐, TTY рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рдмрд╣реБрдд рд╕рд╛рд░реЗ рддрд░реНрдХ рд▓рд╛рддрд╛ рд╣реИред  рд╣рдо рдХрд╣ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рдкреНрд░реЙрдХреНрд╕реА рдбреНрд░рд╛рдЗрд╡рд░ рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рдШрдЯрдХ рдХреА рдЬрд┐рдореНрдореЗрджрд╛рд░реА рдХрд╛ рдХреНрд╖реЗрддреНрд░ рдХреНрдпрд╛ рд╣реИ, рд╣рдо рд▓реЗрдЦ рдХреЗ рджреМрд░рд╛рди рдкрддрд╛ рд▓рдЧрд╛рдПрдВрдЧреЗред </li></ol><br><p>  TTY рдбрд┐рд╡рд╛рдЗрд╕ рдмрдирд╛рдПрдБ: </p><br><p><img src="https://habrastorage.org/webt/zn/zw/dy/znzwdyjadyeidyogqoap8kfvgng.jpeg" title="TTY рдбрд┐рд╡рд╛рдЗрд╕ рдмрдирд╛рдПрдБ"></p><br><p>  TTY рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ 3 рдкреНрд░рдХрд╛рд░ рд╣реИрдВ: </p><br><ol><li>  <em>рдХрдВрд╕реЛрд▓ рдбрд┐рд╡рд╛рдЗрд╕</em> - рд╡рд░реНрдЪреБрдЕрд▓ рдХрдВрд╕реЛрд▓ рдСрдкрд░реЗрд╢рди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдЗрдирдкреБрдЯ рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд░реНрдиреЗрд▓ рджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рд┐рдд рд╣реЛрддрд╛ рд╣реИред </li><li>  <em>PTY рдбрд┐рд╡рд╛рдЗрд╕</em> (рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓) - рд╡рд┐рдВрдбреЛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ рдЯрд░реНрдорд┐рдирд▓ рдСрдкрд░реЗрд╢рди рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕ рдЙрдкрдХрд░рдг рдХрд╛ рдЗрдирдкреБрдЯ рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рдПрдХ рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдВрддрд░рд┐рдХреНрд╖ рдореЗрдВ рд╕рдВрдЪрд╛рд▓рд┐рдд рд╣реЛрддрд╛ рд╣реИред </li><li>  <em>рд╕реАрд░рд┐рдпрд▓ рдбрд┐рд╡рд╛рдЗрд╕</em> - рд╕реАрдзреЗ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рдЖрдорддреМрд░ рдкрд░ рд╕реАрдзреЗ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рдЯрд░реНрдорд┐рдирд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдХреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЗ рд╕рдВрдЧрдарди рдореЗрдВ рдирд┐рдореНрдирддрдо рд╕реНрддрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдореМрдЬреВрдж рд╣реИред </li></ol><br><p>  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рд╣рдо рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рджреВрд╕рд░реЗ рдкреНрд░рдХрд╛рд░ рдХреЗ TTY рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реЗрдВрдЧреЗ - рдЫрджреНрдо-рдЯрд░реНрдорд┐рдирд▓ред </p><br><hr><br><h2 id="tty-line-discipline">  TTY рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди </h2><br><p>  рд╣рдо TTY рдбрд┐рд╡рд╛рдЗрд╕ рд▓рд╛рдЗрди рдХреЗ рдЕрдиреБрд╢рд╛рд╕рди рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдПрдХ рдкрдВрдХреНрддрд┐ рдЕрдиреБрд╢рд╛рд╕рди рдХреА рдкрд╣рд▓реА рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд┐рд╢реЗрд╖рддрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ I / O рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред  рдЗрд╕рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдирд┐рдпрдВрддреНрд░рдг рд╡рд░реНрдг ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" title="рдкрд╛рддреНрд░реЛрдВ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рд░рдЦреЗрдВ">рдирд┐рдпрдВрддреНрд░рдг рд╡рд░реНрдг</a> рджреЗрдЦреЗрдВ) рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рд╕реНрд╡рд░реВрдкрдгред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдХрд┐рд╕реА рднреА рдкрд╛рда рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЕрдЪрд╛рдирдХ рдЖрдкрдХреЛ рдПрд╣рд╕рд╛рд╕ рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рдЖрдкрд╕реЗ рдХреБрдЫ рд▓рд┐рдЦрдиреЗ рдореЗрдВ рдЧрд▓рддреА рд╣реБрдИ рдереА рдФрд░ рдЗрд╕реЗ рдорд┐рдЯрд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ - рдпрд╣ рд╡рд╣ рдЬрдЧрд╣ рд╣реИ рдЬрд╣рд╛рдБ рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рдЦреЗрд▓рдиреЗ рдореЗрдВ рдЖрддрд╛ рд╣реИред </p><br><p>  рд╣рдо рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВрдЧреЗ рдХрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ рдЬрдм рд╣рдо рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдмреИрд╢ рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдПрдХ TTY рдбрд┐рд╡рд╛рдЗрд╕ <em>рдЗрдХреЛ рд╕рдХреНрд╖рдо рдХреЗ</em> рд╕рд╛рде рдХреИрдиреЛрдирд┐рдХрд▓ рдореЛрдб рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдПрдХ рдЧреВрдВрдЬ рд╕реНрдХреНрд░реАрди рдкрд░ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рджрд░реНрдЬ рдХрд┐рдП рдЧрдП рд╡рд░реНрдгреЛрдВ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рд╣реИред </p><br><p> рдЬрдм рд╣рдо рдкреНрд░рд╡реЗрд╢ рдХрд░рддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╡рд░реНрдг <code>a</code> , рдпрд╣ рд╡рд░реНрдг TTY рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ TTY рд▓рд╛рдЗрди рдХреЗ рдЕрдиреБрд╢рд╛рд╕рди рд╕реЗ рдмрд╛рдзрд┐рдд рд╣реЛрддрд╛ рд╣реИред  рд╡рд╣ рдЕрдкрдиреЗ рдЖрдВрддрд░рд┐рдХ рдмрдлрд░ рдореЗрдВ рдПрдХ рдЪрд░рд┐рддреНрд░ рдкрдврд╝рддреА рд╣реИ, рджреЗрдЦрддреА рд╣реИ рдХрд┐ <code>echo</code> рдореЛрдб рдЪрд╛рд▓реВ рд╣реИ, рдФрд░ рд╕реНрдХреНрд░реАрди рдкрд░ рдЪрд░рд┐рддреНрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рд╕рдордп, рдЙрд╕ рдХрд╛рд░реНрдпрдХреНрд░рдо рдореЗрдВ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрднреА рднреА рдХреБрдЫ рднреА рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИ рдЬрд┐рд╕ рдкрд░ рдЯрд░реНрдорд┐рдирд▓ рдбрд┐рд╡рд╛рдЗрд╕ рд╕рдВрд▓рдЧреНрди рд╣реИред  рд╣рдореЗрдВ рдХреАрдмреЛрд░реНрдб рдкрд░ <code>backspace</code> рджрдмрд╛рдПрдВред  рдкреНрд░рддреАрдХ <code>^?</code>  рдлрд┐рд░ рд╕реЗ рд▓рд╛рдЗрди рдбрд┐рд╕рд┐рдкреНрд▓рд┐рди рджреНрд╡рд╛рд░рд╛ рдЗрдВрдЯрд░рд╕реЗрдкреНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛, рдФрд░ рдмрд╛рдж рдореЗрдВ, рдпрд╣ рдорд╣рд╕реВрд╕ рдХрд░рддреЗ рд╣реБрдП рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдВрддрд┐рдо рджрд░реНрдЬ рдХрд┐рдП рдЧрдП рдЪрд░рд┐рддреНрд░ рдХреЛ рдорд┐рдЯрд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИ, рдЗрд╕ рдЪрд░рд┐рддреНрд░ рдХреЛ рдЙрд╕рдХреЗ рдЖрдВрддрд░рд┐рдХ рдмрдлрд░ рд╕реЗ рд╣рдЯрд╛ рджреЗрддрд╛ рд╣реИ рдФрд░ рдЗрд╕ рдЪрд░рд┐рддреНрд░ рдХреЛ рднреА рд╕реНрдХреНрд░реАрди рд╕реЗ рдорд┐рдЯрд╛ рджреЗрддрд╛ рд╣реИред  рдЕрдм, рдпрджрд┐ рд╣рдо Enter рджрдмрд╛рддреЗ рд╣реИрдВ, рддреЛ TTY рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рдЕрдВрддрддрдГ рдЯрд░реНрдорд┐рдирд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд░реАрдб рдмрдлрд░ рдХреЛ рд╕рдм рдХреБрдЫ рднреЗрдЬ рджреЗрддрд╛ рд╣реИ рдЬреЛ рдХрд┐ рдПрд▓рдПрдл рд╕рд╣рд┐рдд рдЕрдиреБрд╢рд╛рд╕рди рдХреЗ рдЖрдВрддрд░рд┐рдХ рдмрдлрд░ рдХреЛ рдкрд╣рд▓реЗ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛ред  рдЙрд╕реА рд╕рдордп, рдХрд░реНрд╕рд░ рдХреЛ рдПрдХ рдирдИ рд░реЗрдЦрд╛ рдкрд░ рд▓реЗ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдХреНрд░реАрди рдкрд░ CR рдФрд░ LF рдЕрдХреНрд╖рд░ рджрд┐рдЦрд╛рдИ рджреЗрддреЗ рд╣реИрдВ - рдпрд╣ рдЖрдЙрдЯрдкреБрдЯ рдХрд╛ рд╕реНрд╡рд░реВрдкрдг рд╣реИред </p><br><p>  рдпрд╣ рд╣реИ рдХрд┐ рдХреИрдиреЛрдирд┐рдХрд▓ рдореЛрдб рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ - рдпрд╣ <code>Enter</code> рджрдмрд╛рдиреЗ рдХреЗ рдмрд╛рдж рд╣реА рд╕рднреА рджрд░реНрдЬ рдХрд┐рдП рдЧрдП рд╡рд░реНрдгреЛрдВ рдХреЛ рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдирд┐рдпрдВрддреНрд░рдг рд╡рд░реНрдгреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рд╕реНрд╡рд░реВрдкрд┐рдд рдХрд░рддрд╛ рд╣реИред </p><br><h3 id="tty-line-editing">  TTY рд▓рд╛рдЗрди рд╕рдВрдкрд╛рджрди </h3><br><p>  <strong>TTY рд▓рд╛рдЗрди рдПрдбрд┐рдЯрд┐рдВрдЧ</strong> рд╡рд╣ рдШрдЯрдХ рд╣реИ рдЬреЛ рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рдореЗрдВ рдЗрдирдкреБрдЯ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред  рдпрд╣ рдХрд╣рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ <em>рд▓рд╛рдЗрди рдПрдбрд┐рдЯрд┐рдВрдЧ</em> рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдЕрд╡рдзрд╛рд░рдгрд╛ рд╣реИ рдФрд░ рдЗрдирдкреБрдЯ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдмреИрд╢ рдФрд░ рд╡рд┐рдо рдХрд╛ рдЕрдкрдирд╛ рд▓рд╛рдЗрди рдПрдбрд┐рдЯрд┐рдВрдЧ рд╣реИред </p><br><p>  рд╣рдо <strong>рд╕реНрдЯрдЯреА</strong> рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд░реНрддрдорд╛рди TTY рдбрд┐рд╡рд╛рдЗрд╕ рдХреА рд▓рд╛рдЗрди рдХреА рдЕрдиреБрд╢рд╛рд╕рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдереЛрдбрд╝рд╛ рдкреНрд░рдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдмреИрд╢ рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рд╢реЗрд▓ рдХреЛ рдЦреЛрд▓реЗрдВ рдФрд░ рдЯрд╛рдЗрдк рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">stty icanon -echo</code> </pre> <br><p>  рдЕрдм рдХреБрдЫ рдЯрд╛рдЗрдк рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ рдФрд░ рдЖрдкрдХреЛ рдЕрдкрдирд╛ рдЗрдирдкреБрдЯ рджрд┐рдЦрд╛рдИ рдирд╣реАрдВ рджреЗрдЧрд╛ (рдЖрдк рдЪрд┐рдВрддрд╛ рди рдХрд░реЗрдВ, рдЖрдк рдЕрднреА рднреА рдкреНрд░реЛрдЧреНрд░рд╛рдо рдореЗрдВ рдЗрдирдкреБрдЯ рдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ)ред  рдЖрдкрдиреЗ рд╕рд┐рд░реНрдл рдЗрдХреЛ рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░ рджрд┐рдпрд╛ рд╣реИ - рдЕрд░реНрдерд╛рдд, рд╕реНрдХреНрд░реАрди рдкрд░ рджрд░реНрдЬ рдХрд┐рдП рдЧрдП рд╡рд░реНрдгреЛрдВ рдХрд╛ рдкреНрд░рджрд░реНрд╢рдиред  рдЕрдм рджрд░реНрдЬ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">stty raw echo</code> </pre> <br><p>  рдХреБрдЫ рдЯрд╛рдЗрдк рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВред  рдЖрдк рджреЗрдЦреЗрдВ рдХрд┐ рдирд┐рд╖реНрдХрд░реНрд╖ рдХреИрд╕реЗ рдЯреВрдЯрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЕрдзрд┐рдХ рдкреНрд░рднрд╛рд╡ рдХреЗ рд▓рд┐рдП, рдЖрдЗрдП рдбреИрд╢ - рдЯрд╛рдЗрдк <code>/bin/sh</code> ред  рдЕрдм рд╡рд┐рд╢реЗрд╖ рд╡рд░реНрдг рджрд░реНрдЬ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ (рдХреАрдмреЛрд░реНрдб рдкрд░ рдХреЛрдИ рднреА рдЕрдХреНрд╖рд░ <code>Ctrl</code> ) рдпрд╛ рдмрд╕ Enter рджрдмрд╛рдПрдБред  рдЖрдк рд╣реИрд░рд╛рди рд╣реИрдВ - рд╕реНрдХреНрд░реАрди рдкрд░ рдпреЗ рдЕрдЬреАрдм рдЪрд░рд┐рддреНрд░ рдХреНрдпрд╛ рд╣реИрдВ?  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐, рдЕрдиреБрд╢рд╛рд╕рди рдХреЗ рд▓рд╛рдЗрди рдПрдбрд┐рдЯрд┐рдВрдЧ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдордиреЗ рд╕рдмрд╕реЗ рд╕рд░рд▓ рд╢реЗрд▓ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд┐рдпрд╛ рд╣реИ, рд╣рдордиреЗ рд▓рд╛рдЗрди рдПрдбрд┐рдЯрд┐рдВрдЧ рдмреИрд╢ рдХреЛ рднреА рдЕрдХреНрд╖рдо рдХрд░ рджрд┐рдпрд╛ рд╣реИ, рдФрд░ рдЕрдм рд╣рдо рд▓рд╛рдЗрди рдХреЗ рдЕрдиреБрд╢рд╛рд╕рди рдХреЗ <em>рдХрдЪреНрдЪреЗ</em> рдореЛрдб рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рднрд╛рд╡ рдФрд░ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдореЛрдб рдЗрдирдкреБрдЯ рдХреЛ рдмрд┐рд▓реНрдХреБрд▓ рдкреНрд░реЛрд╕реЗрд╕ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдлреЙрд░реНрдореЗрдЯ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдХрдЪреНрдЪреЗ рдореЛрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реИ?  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <em>рд╡рд┐рдо рдХреЗ рд▓рд┐рдП</em> : рдпрд╣ рд╕рдВрдкреВрд░реНрдг рдЯрд░реНрдорд┐рдирд▓ рд╡рд┐рдВрдбреЛ рдореЗрдВ рдЦреБрд▓рддрд╛ рд╣реИ рдФрд░ рдЗрдирдкреБрдЯ рдХреЛ рд╕реНрд╡рдпрдВ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдХрдо рд╕реЗ рдХрдо рддрд╛рдХрд┐ рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рдХреЗ рд╡рд┐рд╢реЗрд╖ рдкреНрд░рддреАрдХ рд╕реНрд╡рдпрдВ рд╡рд┐рдо рдХреЗ рд╡рд┐рд╢реЗрд╖ рдкреНрд░рддреАрдХреЛрдВ рдХреЗ рд╕рд╛рде рдкреНрд░рддрд┐рдЪреНрдЫреЗрдж рди рдХрд░реЗрдВред </p><br><p>  рдФрд░ рднреА рдЕрдзрд┐рдХ рд╕рдордЭ рдХреЗ рд▓рд┐рдП, рдЖрдЗрдП рдирд┐рдпрдВрддреНрд░рдг рдкрд╛рддреНрд░реЛрдВ рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░рддреЗ рд╣реБрдП рджреЗрдЦреЗрдВред  <code>stty &lt;control-character&gt; &lt;string&gt;</code> рдХрдорд╛рдВрдб рд╣рдореЗрдВ рдЗрд╕рдореЗрдВ рдорджрдж рдХрд░реЗрдЧрд╛ред <br>  рдмреИрд╢ рдореЗрдВ рджрд░реНрдЬ рдХрд░реЗрдВ: </p><br><pre> <code class="bash hljs">stty erase 0</code> </pre> <br><p>  рдЕрдм <code>erase</code> рдХрдВрдЯреНрд░реЛрд▓ рдХреИрд░реЗрдХреНрдЯрд░ <code>0</code> рдХреЛ рд╕реМрдВрдкрд╛ рдЬрд╛рдПрдЧрд╛ред  <code>backspace</code> рдмрдЯрди рдЖрдорддреМрд░ рдкрд░ <code>^?</code> рдорд╛рдпрдиреЗ рд░рдЦрддрд╛ рд╣реИ <code>^?</code>  , рд▓реЗрдХрд┐рди рдЕрдм рдЗрд╕ рд╡рд┐рд╢реЗрд╖ рдЪрд░рд┐рддреНрд░ рдХреЛ рд╢рд╛рдмреНрджрд┐рдХ рд░реВрдк рд╕реЗ рдкреАрдЯреАрдПрд╕ рд░реАрдб рдмрдлрд░ рдореЗрдВ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛ - рдЗрд╕реЗ рд╕реНрд╡рдпрдВ рдЖрдЬрд╝рдорд╛рдПрдВред  рдЕрдм рдЖрдк рдХреАрдмреЛрд░реНрдб рдкрд░ <code>0</code> рдмрдЯрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд░реНрдгреЛрдВ рдХреЛ рдорд┐рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдЖрдкрдиреЗ рд╕реНрд╡рдпрдВ tty рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рд╕реЗ рдПрдХ рдЪрд┐рд╣реНрдирд┐рдд рдирд┐рдпрдВрддреНрд░рдг рд╡рд░реНрдг рдХреЗ рд░реВрдк рдореЗрдВ рджрд░реНрдЬ рдЪрд░рд┐рддреНрд░ рдХреЛ рдкрд╣рдЪрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рд╛ рдерд╛ред  рдЖрдк рдХрдорд╛рдВрдб <code>stty erase ^\?</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реЗрдЯрд┐рдВрдЧ рд╡рд╛рдкрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <code>stty erase ^\?</code>  рдпрд╛ рдмрд╕ рдЯрд░реНрдорд┐рдирд▓ рдХреЛ рдмрдВрдж рдХрд░рдирд╛, рдХреНрдпреЛрдВрдХрд┐ рд╣рдордиреЗ рдХреЗрд╡рд▓ рд╡рд░реНрддрдорд╛рди рдЯрдЯреА рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд┐рдпрд╛ рд╣реИред </p><br><p>  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" title="рдЖрджрдореА рдбрдВрдбрд╛">рдореИрди рд╕реНрдЯреНрдЯреА</a> рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред </p><br><hr><br><h2 id="terminal-emulator-i-pseudoterminal">  рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рдФрд░ рд╕реНрдпреВрдбреЛрдЯрд░реНрдорд┐рдирд▓ </h2><br><p>  рд╣рд░ рдмрд╛рд░ рдЬрдм рд╣рдо X рд╡рд┐рдВрдбреЛ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдПрдХ рдирдпрд╛ рдЯрд░реНрдорд┐рдирд▓ рдЦреЛрд▓рддреЗ рд╣реИрдВ, GNOME рдЯрд░реНрдорд┐рдирд▓ рд╕рд░реНрд╡рд░ рдПрдХ рдирдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЬрдиреНрдо рджреЗрддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд▓реЙрдиреНрдЪ рдХрд░рддрд╛ рд╣реИред  рдЖрдорддреМрд░ рдкрд░, рдпрд╣ рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╢реЗрд▓ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдмреИрд╢) рд╣реИред </p><br><p>  рдЪрд▓ рд░рд╣реЗ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рддрдерд╛рдХрдерд┐рдд <strong>рд╕реНрдпреВрдбреЛрдЯрд░реНрдорд┐рдирд▓</strong> (рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓, рдкреАрдЯреАрд╡рд╛рдИ) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣реЛрддрд╛ рд╣реИред  рдЫрджреНрдо-рдЯрд░реНрдорд┐рдирд▓ рд╕реНрд╡рдпрдВ рдХрд░реНрдиреЗрд▓ рдореЗрдВ рдореМрдЬреВрдж рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рд╕реЗ - рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реНрдерд╛рди рд╕реЗ рдЗрдирдкреБрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рджреЛ <em>рдЖрднрд╛рд╕реА TTY рдЙрдкрдХрд░рдг рд╢рд╛рдорд┐рд▓ рд╣реИрдВ</em> : <br>  1) <strong>PTY рдорд╛рд╕реНрдЯрд░ (PTM)</strong> - рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдХрд╛ рдкреНрд░рдореБрдЦ рд╣рд┐рд╕реНрд╕рд╛ред  рдЧрдиреЛрдо рдЯрд░реНрдорд┐рдирд▓ рд╕рд░реНрд╡рд░ рджреНрд╡рд╛рд░рд╛ рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рдЕрдВрджрд░ рдЪрд▓ рд░рд╣реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдореЗрдВ рдХреАрдмреЛрд░реНрдб рдЗрдирдкреБрдЯ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рдкреНрд░реЛрдЧреНрд░рд╛рдо рдЖрдЙрдЯрдкреБрдЯ рдФрд░ рдбрд┐рд╕реНрдкреНрд▓реЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдПред  рдЧрдиреЛрдо рдЯрд░реНрдорд┐рдирд▓ рд╕рд░реНрд╡рд░, рдмрджрд▓реЗ рдореЗрдВ, рдПрдХреНрд╕ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХреНрд╕ рд╡рд┐рдВрдбреЛ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рдХрд░рддрд╛ рд╣реИред <br>  2) <strong>PTY рдЧреБрд▓рд╛рдо (PTS)</strong> - рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдХрд╛ рдЧреБрд▓рд╛рдо рд╣рд┐рд╕реНрд╕рд╛ред  рд╕реНрдХреНрд░реАрди рдкрд░ рдХреАрдмреЛрд░реНрдб рдЗрдирдкреБрдЯ рдФрд░ рдбрд┐рд╕реНрдкреНрд▓реЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рдЕрдВрджрд░ рдЪрд▓ рд░рд╣реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдХрдо рд╕реЗ рдХрдо, рдХрд╛рд░реНрдпрдХреНрд░рдо рдЦреБрдж рд╣реА рдРрд╕рд╛ рд╕реЛрдЪрддрд╛ рд╣реИ (рдореИрдВ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╕рдордЭрд╛рдКрдВрдЧрд╛, рдереЛрдбрд╝рд╛ рдФрд░ рдЖрдЧреЗ)ред </p><br><p>  рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рджрд░реНрдЬ рдХреЛрдИ рднреА рдбреЗрдЯрд╛ рдкреАрдЯреАрдПрдо рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдЗрдирдкреБрдЯ рд╣реИ, рдпрд╛рдиреА рдпрд╣ рдкреАрдЯреАрдПрдо рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рдЖрд╕рд╛рдиреА рд╕реЗ рдкрдврд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдФрд░ рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд: рдкреАрдЯреАрдПрдо рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рджрд░реНрдЬ рдХреЛрдИ рднреА рдбреЗрдЯрд╛ рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдЗрдирдкреБрдЯ рд╣реИред  рдпрд╣ рдХреИрд╕реЗ рдЧрдиреЛрдо рдЯрд░реНрдорд┐рдирд▓ рд╕рд░реНрд╡рд░ рдФрд░ рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рдЕрдВрджрд░ рдЪрд▓рдиреЗ рд╡рд╛рд▓рд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдкреАрдЯреАрдПрдо рдбрд┐рд╡рд╛рдЗрд╕ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИред </p><br><p>  рдПрдХ рдирдпрд╛ рдЯрд░реНрдорд┐рдирд▓ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреБрдЫ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: <br>  1) GNOME рдЯрд░реНрдорд┐рдирд▓ рд╕рд░реНрд╡рд░ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЙрдкрдХрд░рдг <strong>/ рджреЗрд╡ / ptmx</strong> рдкрд░ рдЦреБрд▓реЗ () рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рдорд╛рд╕реНрдЯрд░ рдФрд░ рджрд╛рд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдмрдирд╛рддрд╛ рд╣реИред  рдЦреБрд▓реЗ () рдХреЙрд▓ рд╕реЗ рдмрдирд╛рдИ рдЧрдИ PTM рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдлрд╛рдЗрд▓ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░ - <em>master_fd рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рддрд╛ рд╣реИ</em> ред <br>  2) GNOME рдЯрд░реНрдорд┐рдирд▓ рд╕рд░реНрд╡рд░ <code>fork()</code> рдХреЙрд▓ рдХрд░рдХреЗ рдПрдХ рдирдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдмрдирд╛рддрд╛ рд╣реИред  рдпрд╣ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдирдпрд╛ рдЯрд░реНрдорд┐рдирд▓ рд╣реЛрдЧрд╛ред <br>  3) рдкреАрдЯреАрдПрд╕ рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ, рдбрд┐рд╡рд╛рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░ 0, 1, 2 (рдХреНрд░рдорд╢рдГ, рд╕реНрдЯрдбрдЖрдЙрдЯ рдФрд░ рд╕реНрдЯрдбрд░,) рдкрд░ рдЦреБрд▓рддрд╛ рд╣реИред  рдЕрдм, рдорд╛рдирдХ рдЯрд░реНрдорд┐рдирд▓ I / O рдЗрд╕ рдЙрдкрдХрд░рдг рдкрд░ рдмрд╣рддрд╛ рд╣реИред <br>  4) <code>exec()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рд╡рд╛рдВрдЫрд┐рдд рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЛ рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдХреБрдЫ рд╢реИрд▓ рдЖрдорддреМрд░ рдкрд░ рд╢реБрд░реВ рд╣реЛрддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдмреИрд╢)ред  рдмрд╛рдж рдореЗрдВ рдмреИрд╢ рд╕реЗ рд▓реЙрдиреНрдЪ рдХрд┐рдП рдЧрдП рдХрд┐рд╕реА рднреА рдкреНрд░реЛрдЧреНрд░рд╛рдо рдореЗрдВ рдмреИрд╢ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд╣реА рдлрд╛рдЗрд▓ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░ рд╣реЛрдЧрд╛, рдпрд╛рдиреА рдкреНрд░реЛрдЧреНрд░рд╛рдо рдлреНрд▓реЛ рдХреЛ рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рдЖрдк рдЕрдкрдиреЗ рд▓рд┐рдП рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ <code>ls -la /proc/self/fd</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдорд╛рдирдХ рдЯрд░реНрдорд┐рдирд▓ рдЖрдЙрдЯрдкреБрдЯ рдкреНрд░рд╡рд╛рд╣ рдХреИрд╕реЗ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ: <br><img src="https://habrastorage.org/webt/nr/dx/97/nrdx97wllflvapnt76p3qqki3fw.jpeg"></p><br><p>  рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдкрде <strong>/ рджреЗрд╡ /</strong> рдкреАрдЯреАрдПрд╕ <strong>/ рдПрди</strong> рдкрд░ рд╕реНрдерд┐рдд рд╣реИ, рдФрд░ рдкреАрдЯреАрдПрдо рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП рдкрде рд╣рдореЗрдВ рдмрд┐рд▓реНрдХреБрд▓ рднреА рд░реБрдЪрд┐ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдЧрдиреЛрдо рдЯрд░реНрдорд┐рдирд▓ рд╕рд░реНрд╡рд░ рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЦреБрд▓реЗ рдкреАрдЯреАрдПрдо рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╛рдЗрд▓ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░ рд╣реИ рдФрд░ рдЗрд╕реЗ рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рдкрде рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдмрдЪреНрдЪреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рд╣рдореЗрдВ <code>open()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рдХреЗ рдорд╛рдирдХ рдЖрдЙрдЯрдкреБрдЯ рдзрд╛рд░рд╛рдУрдВ рдкрд░ рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдЦреЛрд▓рдирд╛ рд╣реЛрдЧрд╛, рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╝рд╛рдЗрд▓ рдкрде рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </p><br><p>  рдпрд╛рдж рд░рдЦреЗрдВ, рдореИрдВрдиреЗ рдХрд╣рд╛ рдХрд┐ рдПрдХ рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдПрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗрд╡рд▓ рдпрд╣ рд╕реЛрдЪрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рд╕рд╛рде рд╕реАрдзреЗ рд╕рдВрд╡рд╛рдж рдХрд░рддрд╛ рд╣реИ?  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдкреАрдЯреАрдПрд╕ рднреА рдПрдХ <em>рдЯрд░реНрдорд┐рдирд▓ рдбрд┐рд╡рд╛рдЗрд╕</em> (рдЯреАрдЯреАрд╡рд╛рдИ рдбрд┐рд╡рд╛рдЗрд╕) рд╣реИ, рд▓реЗрдХрд┐рди рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдФрд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЯреАрдЯреАрд╡рд╛рдИ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдмреАрдЪ рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХреАрдмреЛрд░реНрдб рд╕реЗ рдЗрдирдкреБрдЯ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рдорд╛рд╕реНрдЯрд░ рдбрд┐рд╡рд╛рдЗрд╕ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рдбрд┐рд╕реНрдкреНрд▓реЗ рдореЗрдВ рдирд╣реАрдВ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдорд╛рд╕реНрдЯрд░ рдбрд┐рд╡рд╛рдЗрд╕ред  рдЗрд╕реАрд▓рд┐рдП рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдХреЛ рдЗрд╕ рддрд░рд╣ рдирд╛рдо рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ - рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдХреЗрд╡рд▓ (рдлрд┐рд░ рд╕реЗ ??) рдЯрд░реНрдорд┐рдирд▓ рдХреА рдирдХрд▓ рдХрд░рддрд╛ рд╣реИред  рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рдФрд░ рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рдмреАрдЪ рдХрд╛ рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рдЯрд░реНрдорд┐рдирд▓ рдПрдореБрд▓реЗрдЯрд░ рд╕рд┐рд░реНрдл рдПрдХ рдЧреНрд░рд╛рдлрд┐рдХрд▓ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЯрд░реНрдорд┐рдирд▓ рдХреЛ рд╕реАрдзреЗ рд╡рд┐рдВрдбреЛ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рдЕрдВрджрд░ рдЪрд▓рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╕реБрд╡рд┐рдзрд╛ рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИред </p><br><p>  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ <em>рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдПрдХ TTY рдбрд┐рд╡рд╛рдЗрд╕</em> рд╣реИ рдмрд╣реБрдд рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред  рдпрд╣рд╛рдБ рдХреНрдпреЛрдВ рд╣реИ: </p><br><ol><li>  рдЬрд┐рд╕ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗ рд▓рд┐рдП рдЯрд░реНрдорд┐рдирд▓ рдбрд┐рд╡рд╛рдЗрд╕ рд╕рдВрд▓рдЧреНрди рд╣реИ, рдЙрд╕рдореЗрдВ рдкрд╛рд░рдВрдкрд░рд┐рдХ рдЯрд░реНрдорд┐рдирд▓ рдХреА рд╕рднреА рдХреНрд╖рдорддрд╛рдПрдВ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: рдирд┐рд╖реНрдХреНрд░рд┐рдп рдЧреВрдВрдЬ, рдЕрдХреНрд╖рдо / рд╕рдХреНрд╖рдо рд╡рд┐рд╣рд┐рдд рджреГрд╢реНрдпред </li><li>  рдкреНрд░реЛрдЧреНрд░рд╛рдо, рдпрд╣ рдЬрд╛рдирддреЗ рд╣реБрдП рдХрд┐ рдПрдХ рдЯрд░реНрдорд┐рдирд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдЗрд╕рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ (рдпрд╣ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдореЗрдВ рдПрдХ рдирд┐рдпрдВрддреНрд░рдг рдЯрд░реНрдорд┐рдирд▓ рд╣реИ), рдЕрдВрддрдГрдХреНрд░рд┐рдпрд╛рддреНрдордХ рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рдкреВрдЫ рд╕рдХрддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХреЗ рд▓рд┐рдП рдкреВрдЫреЗрдВред </li><li>  рдЯреАрдЯреАрд╡рд╛рдИ рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рднреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХрд╛рд░реНрдпрдХреНрд░рдо рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдирд┐рдпрдВрддреНрд░рдг рдкрд╛рддреНрд░реЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рд╕рд╛рде рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдкреНрд░рд╛рд░реВрдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВред </li></ol><br><p>  PTM рдбрд┐рд╡рд╛рдЗрд╕ рднреА TTY рдбрд┐рд╡рд╛рдЗрд╕ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдХрд┐рд╕реА рднреА рднреВрдорд┐рдХрд╛ рдХреЛ рдирд╣реАрдВ рдирд┐рднрд╛рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд┐рдпрдВрддреНрд░рдг рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рд░реВрдк рдореЗрдВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, PTM рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рдХрдЪреНрдЪреЗ рдореЛрдб рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП, PTS рд╕реЗ PTM рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рдбреЗрдЯрд╛ рдЯреНрд░рд╛рдВрд╕рдлрд░ рдХрд░рддреЗ рд╕рдордп рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдирд╣реАрдВ рдХреА рдЬрд╛рддреА рд╣реИред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реНрдерд╛рди рд╕реЗ <code>read()</code> рдФрд░ <code>write()</code> рд▓рд┐рдП рдХреЙрд▓ рдЕрднреА рднреА рдкрд╣рд▓реА рдмрд╛рд░ рджреЛрдиреЛрдВ рдЙрдкрдХрд░рдгреЛрдВ рдкрд░ рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рджреНрд╡рд╛рд░рд╛ рдкрд░реЛрд╕рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рдХреНрд╖рдг рдФрд░ рднреА рдмрдбрд╝реА рднреВрдорд┐рдХрд╛ рдирд┐рднрд╛рдПрдЧрд╛, рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рдмрд╛рдж рдореЗрдВ рджреЗрдЦреЗрдВрдЧреЗред </p><br><p>  рдЧрдиреЛрдо рдЯрд░реНрдорд┐рдирд▓ рд╕рд░реНрд╡рд░ рдФрд░ рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рдЕрдВрджрд░ рдЪрд▓ рд░рд╣реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗ рдмреАрдЪ рд╕рдВрдЪрд╛рд░ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/jz/y0/sg/jzy0sg0zjcceaflg6wyg7d5lkti.jpeg" title="рдЧрдиреЛрдо рдЯрд░реНрдорд┐рдирд▓ рд╕рд░реНрд╡рд░ рдФрд░ рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рдЕрдВрджрд░ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЛ рд╕рдВрдкреНрд░реЗрд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛"></p><br><p>  рдпрд╣ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдЬрд╛рдВрдЪрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдПрдХ рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рджреЛрдиреЛрдВ рд╣рд┐рд╕реНрд╕реЛрдВ рдХреЗ рдмреАрдЪ рд╕рдВрдЪрд╛рд░ рдХрд░рдиреЗ рдореЗрдВ рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рдХреА рднреВрдорд┐рдХрд╛ рдХреНрдпрд╛ рд╣реИред  рдпрд╣рд╛рдВ, <em>рдкреАрдЯреАрдПрдо рдбрд┐рд╡рд╛рдЗрд╕ рд╕реЗ рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рдкрд╛рд╕ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ</em> рдбреЗрдЯрд╛ рдХреЗ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рдЬрд┐рдореНрдореЗрджрд╛рд░ <em>рд╣реИ</em> , рд╕рд╛рде рд╣реА рд╕рд╛рде рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рдПрдХ рд╣рд┐рд╕реНрд╕реЗ рд╕реЗ рджреВрд╕рд░реЗ рдореЗрдВ рдбреЗрдЯрд╛ рдХреА рдбрд┐рд▓реАрд╡рд░реА рдХреЗ рд▓рд┐рдПред  рдЬрдм рд╣рдо рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдбреНрд░рд╛рдЗрд╡рд░ рдореЗрдВ рд╣реЛрддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдкреАрдЯреАрдПрдо рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рдХреЛ рдЙрд▓рдЭрд╛ рджреЗрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрддред </p><br><hr><br><h2 id="virtualnye-ustroystva">  рдЖрднрд╛рд╕реА рдЙрдкрдХрд░рдг </h2><br><p>  рдЖрдкрдиреЗ рд╢рд╛рдпрдж рд╕реЛрдЪрд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдЖрдк рдлрд╝рд╛рдЗрд▓ рдХреЛ рдкрде <em>/ рджреЗрд╡ / рдкреАрдЯреАрдПрд╕ / рдПрди рдХреЗ</em> рд╕рд╛рде рдЦреЛрд▓ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдПрдХ рдирд┐рдпрдорд┐рдд рдкрд╛рда рдлрд╝рд╛рдЗрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрд╕рд╕реЗ рдбреЗрдЯрд╛ рд▓рд┐рдЦ тАЛтАЛрдпрд╛ рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ?  рд╣рд╛рдВ, рдпреВрдирд┐рдХреНрд╕ рдЬреИрд╕реЗ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рд╕рднреА рдбрд┐рд╡рд╛рдЗрд╕ рдлрд╛рдЗрд▓реЗрдВ рд╣реИрдВ, рдпреВрдирд┐рдХреНрд╕ рдХреЗ рдореВрд▓ рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдЬреЛ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рд╕рдм рдХреБрдЫ рдПрдХ рдлрд╛рдЗрд▓ рд╣реИред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдбрд┐рд╡рд╛рдЗрд╕ рдлрд╝рд╛рдЗрд▓реЗрдВ (рдЕрдВрдЧреНрд░реЗрдЬрд╝реА - рдбрд┐рд╡рд╛рдЗрд╕ рдлрд╝рд╛рдЗрд▓) рдкрд╛рда рдлрд╝рд╛рдЗрд▓реЗрдВ рдирд╣реАрдВ рд╣реИрдВред  рдРрд╕реЗ рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ <strong>рдЖрднрд╛рд╕реА рдЙрдкрдХрд░рдг</strong> рдХрд╣рд╛ рдЬрд╛рддрд╛ <strong>рд╣реИ</strong> - рдЕрд░реНрдерд╛рдд, рд╡реЗ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдореЗрдореЛрд░реА рдореЗрдВ рдореМрдЬреВрдж рд╣реЛрддреЗ рд╣реИрдВ, рдбрд┐рд╕реНрдХ рдкрд░ рдирд╣реАрдВред </p><br><p>  рдЗрди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдирд┐рдпрдорд┐рдд рдкрд╛рда рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рдЦреЛрд▓рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рди рдХрд░реЗрдВред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЖрдк рдЗрди рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ <code>write()</code> рдФрд░ <code>read()</code> рдСрдкрд░реЗрд╢рдВрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХреА рдХреЙрд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдбреНрд░рд╛рдЗрд╡рд░ рджреНрд╡рд╛рд░рд╛ рджреА рдЬрд╛рдПрдЧреАред  рдЪрд▓реЛ рдЗрд╕реЗ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рджреЛ рдЯрд░реНрдорд┐рдирд▓ рд╡рд┐рдВрдбреЛ рдЦреЛрд▓реЗрдВ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдХрдорд╛рдВрдб рдореЗрдВ <code>tty</code> рджрд░реНрдЬ рдХрд░реЗрдВред  рдпрд╣ рдХрдорд╛рдВрдб рджрд┐рдЦрд╛рдПрдЧрд╛ рдХрд┐ рдХреМрди рд╕реЗ TTY рдбрд┐рд╡рд╛рдЗрд╕ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд╕рдХреНрд░рд┐рдп рдЯрд░реНрдорд┐рдирд▓ рдХреА рд╕реЗрд╡рд╛ рджреЗ рд░рд╣рд╛ рд╣реИред  рдЕрдм <code>echo "Hello, World!" &gt; /dev/pts/N</code> рджрд░реНрдЬ рдХрд░реЗрдВ <code>echo "Hello, World!" &gt; /dev/pts/N</code>  <code>echo "Hello, World!" &gt; /dev/pts/N</code> рдкрд╣рд▓реЗ рдЯрд░реНрдорд┐рдирд▓ рд╡рд┐рдВрдбреЛ рдореЗрдВ <code>echo "Hello, World!" &gt; /dev/pts/N</code> рдкреАрдЯреАрдПрд╕ <code>echo "Hello, World!" &gt; /dev/pts/N</code> , рдЬрд╣рд╛рдВ рдПрди рджреВрд╕рд░реА рд╡рд┐рдВрдбреЛ рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдкреАрдЯреАрдПрд╕ рдЗрдВрдбреЗрдХреНрд╕ рд╣реИ, рджреВрд╕рд░реА рд╡рд┐рдВрдбреЛ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ рдФрд░ рдЖрдк рдкрд╣рд▓реА рд╡рд┐рдВрдбреЛ рд╕реЗ рдЕрдкрдирд╛ рдЗрдирдкреБрдЯ рджреЗрдЦреЗрдВрдЧреЗред  рдЕрдм рдЖрдкрдиреЗ рджреВрд╕рд░реА рд╡рд┐рдВрдбреЛ рдХреЗ рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдбреЗрдЯрд╛ рд▓рд┐рдЦрд╛ рд╣реИ, <em>рдЬреИрд╕реЗ рдХрд┐ рдпрд╣ рдЙрд╕ рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рдЪрд▓ рд░рд╣реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛ</em> ред </p><br><p><img src="https://habrastorage.org/webt/nj/3s/rp/nj3srpuzyahyvukzicfr0b5wnja.png"></p><br><hr><br><h2 id="ustroystvo-psevdoterminala">  рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдбрд┐рд╡рд╛рдЗрд╕ </h2><br><p>  рд╣рдо рд▓реЗрдЦ рдХреЗ рдЕрдВрддрд┐рдо рднрд╛рдЧ рдХреЗ рдХрд░реАрдм рдФрд░ рдХрд░реАрдм рдЖ рд░рд╣реЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рд╣рдо рд▓рд┐рдирдХреНрд╕ рдХреЗ "рд╣реБрдб рдХреЗ рдиреАрдЪреЗ" рдкрд░ рдПрдХ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ - рдХрд░реНрдиреЗрд▓ рд╕реНрддрд░ рдкрд░ рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рдЙрдкрдХрд░рдг рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред  рдмрд╣реБрдд рд╕рд╛рд░реЗ рдХреЛрдб рд╣реЛрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдореИрдВ рдХреЛрдб рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рджрд┐рдП рдЧрдП рдмреНрд▓реЙрдХ рдХреЛ рдпрдерд╛рд╕рдВрднрд╡ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╕рдордЭрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реВрдВрдЧрд╛, рдорд╣рддреНрд╡рд╣реАрди рд╡рд┐рд╡рд░рдгреЛрдВ рдХреЛ рдХрдо рдХрд░реВрдВрдЧрд╛ рдФрд░ рдЕрдиреБрдХреНрд░рдо рдореЗрдВ рдЬрд╛рдКрдВрдЧрд╛ред </p><br><p>  рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рддрдерд╛рдХрдерд┐рдд "рдШрдЯрдХ рдЯреЛрдХрд░реА" рдХрд╛ рдкрд░рд┐рдЪрдп рджреЗрддреЗ рд╣реИрдВред  рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рдХреЛрд░ рдХреЗ рд╕рд╛рде рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВ, рд╣рдо рдЗрд╕рдореЗрдВ рдЕрдзрд┐рдХ рд╕реЗ рдЕрдзрд┐рдХ рдШрдЯрдХ рдЬреЛрдбрд╝реЗрдВрдЧреЗ рдФрд░ рдЙрдирдХреЗ рдмреАрдЪ рдПрдХ рд╕рдВрдмрдВрдз рдЦреЛрдЬреЗрдВрдЧреЗред  рдореБрдЭреЗ рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рдпрд╣ рдЖрдкрдХреЛ рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдмреЗрд╣рддрд░ рдврдВрдЧ рд╕реЗ рд╕рдордЭрдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдЧрд╛ред  рдЪрд▓рд┐рдП рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдЬрдм рд▓рд┐рдирдХреНрд╕ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдбреНрд░рд╛рдЗрд╡рд░реЛрдВ рдХреЛ рд▓реЛрдб рдХрд░рддрд╛ рд╣реИред  рд╣рдорд╛рд░реЗ рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рднреА рдРрд╕рд╛ рдбреНрд░рд╛рдЗрд╡рд░ рд╣реИред  рдЗрд╕рдХрд╛ рдкрдВрдЬреАрдХрд░рдг рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ: </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> __init pty_init(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) { legacy_pty_init(); unix98_pty_init(); <span class="hljs-comment"><span class="hljs-comment">// &lt;- ,    return 0; } device_initcall(pty_init); // ,      </span></span></code> </pre> <br><p>  рд╕рднреА рдЖрдзреБрдирд┐рдХ рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП, <code>unix98_pty_init()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛: </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> __init unix98_pty_init(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>) { ptm_driver = tty_alloc_driver(NR_UNIX98_PTY_MAX, TTY_DRIVER_RESET_TERMIOS | TTY_DRIVER_REAL_RAW | TTY_DRIVER_DYNAMIC_DEV | TTY_DRIVER_DEVPTS_MEM | TTY_DRIVER_DYNAMIC_ALLOC); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IS_ERR(ptm_driver)) panic(<span class="hljs-string"><span class="hljs-string">"Couldn't allocate Unix98 ptm driver"</span></span>); pts_driver = tty_alloc_driver(NR_UNIX98_PTY_MAX, TTY_DRIVER_RESET_TERMIOS | TTY_DRIVER_REAL_RAW | TTY_DRIVER_DYNAMIC_DEV | TTY_DRIVER_DEVPTS_MEM | TTY_DRIVER_DYNAMIC_ALLOC); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IS_ERR(pts_driver)) panic(<span class="hljs-string"><span class="hljs-string">"Couldn't allocate Unix98 pts driver"</span></span>); ptm_driver-&gt;driver_name = <span class="hljs-string"><span class="hljs-string">"pty_master"</span></span>; ptm_driver-&gt;name = <span class="hljs-string"><span class="hljs-string">"ptm"</span></span>; ptm_driver-&gt;major = UNIX98_PTY_MASTER_MAJOR; ptm_driver-&gt;minor_start = <span class="hljs-number"><span class="hljs-number">0</span></span>; ptm_driver-&gt;type = TTY_DRIVER_TYPE_PTY; ptm_driver-&gt;subtype = PTY_TYPE_MASTER; ptm_driver-&gt;init_termios = tty_std_termios; ptm_driver-&gt;init_termios.c_iflag = <span class="hljs-number"><span class="hljs-number">0</span></span>; ptm_driver-&gt;init_termios.c_oflag = <span class="hljs-number"><span class="hljs-number">0</span></span>; ptm_driver-&gt;init_termios.c_cflag = B38400 | CS8 | CREAD; ptm_driver-&gt;init_termios.c_lflag = <span class="hljs-number"><span class="hljs-number">0</span></span>; ptm_driver-&gt;init_termios.c_ispeed = <span class="hljs-number"><span class="hljs-number">38400</span></span>; ptm_driver-&gt;init_termios.c_ospeed = <span class="hljs-number"><span class="hljs-number">38400</span></span>; ptm_driver-&gt;other = pts_driver; tty_set_operations(ptm_driver, &amp;ptm_unix98_ops); pts_driver-&gt;driver_name = <span class="hljs-string"><span class="hljs-string">"pty_slave"</span></span>; pts_driver-&gt;name = <span class="hljs-string"><span class="hljs-string">"pts"</span></span>; pts_driver-&gt;major = UNIX98_PTY_SLAVE_MAJOR; pts_driver-&gt;minor_start = <span class="hljs-number"><span class="hljs-number">0</span></span>; pts_driver-&gt;type = TTY_DRIVER_TYPE_PTY; pts_driver-&gt;subtype = PTY_TYPE_SLAVE; pts_driver-&gt;init_termios = tty_std_termios; pts_driver-&gt;init_termios.c_cflag = B38400 | CS8 | CREAD; pts_driver-&gt;init_termios.c_ispeed = <span class="hljs-number"><span class="hljs-number">38400</span></span>; pts_driver-&gt;init_termios.c_ospeed = <span class="hljs-number"><span class="hljs-number">38400</span></span>; pts_driver-&gt;other = ptm_driver; tty_set_operations(pts_driver, &amp;pty_unix98_ops); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tty_register_driver(ptm_driver)) panic(<span class="hljs-string"><span class="hljs-string">"Couldn't register Unix98 ptm driver"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tty_register_driver(pts_driver)) panic(<span class="hljs-string"><span class="hljs-string">"Couldn't register Unix98 pts driver"</span></span>); <span class="hljs-comment"><span class="hljs-comment">/* Now create the /dev/ptmx special device */</span></span> tty_default_fops(&amp;ptmx_fops); ptmx_fops.open = ptmx_open; cdev_init(&amp;ptmx_cdev, &amp;ptmx_fops); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cdev_add(&amp;ptmx_cdev, <span class="hljs-built_in"><span class="hljs-built_in">MKDEV</span></span>(TTYAUX_MAJOR, <span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>) || register_chrdev_region(<span class="hljs-built_in"><span class="hljs-built_in">MKDEV</span></span>(TTYAUX_MAJOR, <span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"/dev/ptmx"</span></span>) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) panic(<span class="hljs-string"><span class="hljs-string">"Couldn't register /dev/ptmx driver"</span></span>); device_create(tty_class, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">MKDEV</span></span>(TTYAUX_MAJOR, <span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">"ptmx"</span></span>);</code> </pre> <br><p>  рдпрд╣рд╛рдБ рд╣рдо 3 рдЪреАрдЬреЛрдВ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ: </p><br><ol><li>  Pty рдорд╛рд╕реНрдЯрд░ рдбреНрд░рд╛рдЗрд╡рд░ рдФрд░ pty рдЧреБрд▓рд╛рдо рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП <code>tty_set_operatons</code> рдХреЛ рдХреЙрд▓ <code>tty_set_operatons</code> рд╣реИред </li><li>  <code>ptmx_open</code> рдлрд╝рдВрдХреНрд╢рди, рдЬреЛ рд╡рд┐рд╢реЗрд╖ рдЙрдкрдХрд░рдг <em>/ рджреЗрд╡ / ptmx</em> рдЦреЛрд▓рдиреЗ рдкрд░ рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рджреЛрдиреЛрдВ рд╣рд┐рд╕реНрд╕реЛрдВ рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред  рдорд╣рддреНрд╡рдкреВрд░реНрдг: / dev / ptmx рдПрдХ PTM рдбрд┐рд╡рд╛рдЗрд╕ рдирд╣реАрдВ рд╣реИ, рдмрд▓реНрдХрд┐ рдПрдХ рдирдпрд╛ рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реИред </li><li>  рдкреАрдЯреАрдПрдо рдФрд░ рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдбреНрд░рд╛рдЗрд╡рд░реЛрдВ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░реЗрдВред </li></ol><br><p>  рдЖрдЗрдП рдЬрд╛рдиреЗ рдХреНрд░рдо рдореЗрдВ: </p><br><h4 id="1-tty_set_operations">  1. tty_set_operations </h4><br><p>  <strong>Tty_set_operations ()</strong> рдлрд╝рдВрдХреНрд╢рди рд╡рд░реНрддрдорд╛рди рдбреНрд░рд╛рдЗрд╡рд░ рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рди рддрд╛рд▓рд┐рдХрд╛ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> tty_set_operations(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_driver *driver, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_operations *op) { driver-&gt;ops = op; };</code> </pre> <br><p>  <strong>Tty_operations</strong> рд╕рдВрд░рдЪрдирд╛ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рддрд╛рд▓рд┐рдХрд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдбрд┐рд╡рд╛рдЗрд╕ TTY рдбреНрд░рд╛рдЗрд╡рд░ рдлрд╝рдВрдХреНрд╢рди рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдореИрдВ рд╕рдВрд░рдЪрдирд╛рдУрдВ <code>pty_unix98_ops</code> рдФрд░ <code>ptm_unix98_ops</code> рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЪреАрдЬ рдХреЛ рдмрд╛рд╣рд░ рдирд┐рдХрд╛рд▓ <code>ptm_unix98_ops</code> , рдЬреЛ рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рд╕рдВрдмрдВрдзрд┐рдд рднрд╛рдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпреЛрдВ рдХреА рддрд╛рд▓рд┐рдХрд╛ рд╣реИрдВ: </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_operations ptm_unix98_ops = { .install = pty_unix98_install, .remove = pty_unix98_remove, .open = pty_open, .close = pty_close, .write = pty_write, <span class="hljs-comment"><span class="hljs-comment">// ... }; static const struct tty_operations pty_unix98_ops = { .install = pty_unix98_install, .remove = pty_unix98_remove, .open = pty_open, .close = pty_close, .write = pty_write, // ... };</span></span></code> </pre> <br><p>  рдпрд╣рд╛рдВ рдЖрдк pty_write рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЕрд╡рд▓реЛрдХрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, <code>pty_write</code> рдкрд╣рд▓реЗ рд╕реЗ рд╣реА Sishny printf рдХреЗ рд▓реЗрдЦ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реИ - рд╣рдо рдЗрд╕реЗ рдереЛрдбрд╝реА рджреЗрд░ рдмрд╛рдж рд╡рд╛рдкрд╕ рдХрд░ рджреЗрдВрдЧреЗред </p><br><p>  рдЖрдЗрдП рдЗрд╕ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд╣рдорд╛рд░реА рдШрдЯрдХ рдЯреЛрдХрд░реА рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ: <br><img src="https://habrastorage.org/webt/o8/e-/kc/o8e-kcpqestn7f481gcx38qmzuo.jpeg"></p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рджреЛрдиреЛрдВ рдбреНрд░рд╛рдЗрд╡рд░реЛрдВ рдХреЗ рдореБрдЦреНрдп рддрд░реАрдХреЗ рдмрд┐рд▓реНрдХреБрд▓ рдЕрд▓рдЧ рдирд╣реАрдВ рд╣реИрдВред  рд╡реИрд╕реЗ, рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд░реАрдб () рдСрдкрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдлрд╝рдВрдХреНрд╢рди рдирд╣реАрдВ рд╣реИ - <code>pty_read()</code> рдЬреИрд╕рд╛ рдХреБрдЫ рдирд╣реАрдВ рд╣реИред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рд░реАрдбрд┐рдВрдЧ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рджреНрд╡рд╛рд░рд╛ рдкрд░реЛрд╕реА рдЬрд╛рдПрдЧреАред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╣рдо рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рдХреА рджреВрд╕рд░реА рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реАрдЦрддреЗ рд╣реИрдВ - рдПрдХ рдЯреАрдЯреАрд╡рд╛рдИ рдбрд┐рд╡рд╛рдЗрд╕ рд╕реЗ рдбреЗрдЯрд╛ рдкрдврд╝рдирд╛ред </p><br><hr><br><h4 id="2-ptmx_open">  2. ptmx_open </h4><br><p>  рдЕрдм <strong>ptmx_open ()</strong> рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВ: </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ptmx_open(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> inode *inode, <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> file *filp) { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty; <span class="hljs-comment"><span class="hljs-comment">//    -   ! fsi = devpts_acquire(filp); //     devpts index = devpts_new_index(fsi); //       /dev/pts // ... tty = tty_init_dev(ptm_driver, index); // ... devpts_pty_new(fsi, index, tty-&gt;link); //     /dev/pts retval = ptm_driver-&gt;ops-&gt;open(tty, filp); //  PTM ,   }</span></span></code> </pre> <br><p>  рд╣рдо <code>tty_init_dev()</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдВ рдкрд╣рд▓рд╛ рддрд░реНрдХ PTM рдбрд┐рд╡рд╛рдЗрд╕ рдбреНрд░рд╛рдЗрд╡рд░ рд╣реИ, рдФрд░ рджреВрд╕рд░рд╛ рдбрд┐рд╡рд╛рдЗрд╕ рдЗрдВрдбреЗрдХреНрд╕ рд╣реИред  рдпрд╣рд╛рдВ рд╣рдо рдкреАрдЯреАрд╡рд╛рдИ рдЪрд╛рд▓рдХ рдХреА рдЬрд┐рдореНрдореЗрджрд╛рд░реА рдХреЗ рдХреНрд╖реЗрддреНрд░ рдХреЛ рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВ рдФрд░ рдлрд╛рдЗрд▓ рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВ, рдЬреЛ рдХреЗрд╡рд▓ рд╕рд╛рдорд╛рдиреНрдп рдЯреАрдЯреАрд╡рд╛рдИ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ рдФрд░ рд╣рдорд╛рд░реЗ рдЫрджреНрдо рдЯрд░реНрдорд┐рдирд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рднреА рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рд╣реИред </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty_init_dev(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_driver *driver, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> idx) { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty; tty = alloc_tty_struct(driver, idx); retval = tty_driver_install_tty(driver, tty); <span class="hljs-comment"><span class="hljs-comment">/* * Structures all installed ... call the ldisc open routines. */</span></span> retval = tty_ldisc_setup(tty, tty-&gt;link); <span class="hljs-comment"><span class="hljs-comment">//  ,       return tty; }</span></span></code> </pre> <br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо <code>alloc_tty_struct()</code> рдлрд╝рдВрдХреНрд╢рди <code>alloc_tty_struct()</code> рдХрд░реЗрдВрдЧреЗ </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *alloc_tty_struct(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_driver *driver, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> idx) { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty; tty = kzalloc(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(*tty), GFP_KERNEL); <span class="hljs-comment"><span class="hljs-comment">//  tty_struct tty_ldisc_init(tty) //      tty_struct tty-&gt;driver = driver; //       tty_struct tty-&gt;ops = driver-&gt;ops; //        tty_struct.     tty-&gt;index = idx; //   tty  return tty; }</span></span></code> </pre> <br><p>  рдХреЗрд╡рд▓ рдПрдХ рдЪреАрдЬ рдЬреЛ рд╣рдорд╛рд░реЗ рдпрд╣рд╛рдБ рджрд┐рд▓рдЪрд╕реНрдкреА <code>tty_ldisc_init()</code> рд╣реИ рд╡рд╣ рд╣реИ <code>tty_ldisc_init()</code> рдлрд╝рдВрдХреНрд╢рди: </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> tty_ldisc_init(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty) { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_ldisc *ld = tty_ldisc_get(tty, N_TTY); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IS_ERR(ld)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> PTR_ERR(ld); tty-&gt;ldisc = ld; <span class="hljs-comment"><span class="hljs-comment">//        tty_struct return 0; }</span></span></code> </pre> <br><p>  рдЬрд┐рд╕реЗ <code>tty_ldisc_get()</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_ldisc *tty_ldisc_get(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> disc) { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_ldisc *ld; <span class="hljs-comment"><span class="hljs-comment">//    struct tty_ldisc_ops *ldops; //     ldops = get_ldops(disc); //      .   ,       .   - N_TTY ld = kmalloc(sizeof(struct tty_ldisc), GFP_KERNEL | __GFP_NOFAIL); ld-&gt;ops = ldops; //       ld-&gt;tty = tty; //    tty_struct   .          return ld; }</span></span></code> </pre> <br><p>  рдЗрд╕рд▓рд┐рдП, рд╣рдордиреЗ рдХреЙрд▓ рдХреЛ <code>alloc_tty_struct()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдЬрд╛рдВрдЪ рдХреА, рдЬреЛ рд▓рд╛рдЗрди рдЕрдиреБрд╢рд╛рд╕рди рдХреЗ рд╕рд╛рде рдорд┐рд▓рдХрд░ <em>tty_struct</em> рд╕рдВрд░рдЪрдирд╛ рдмрдирд╛рддрд╛ рд╣реИ - <em>tty_ldisc</em> рд╕рдВрд░рдЪрдирд╛ред  рджреЛрдиреЛрдВ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЗ рдПрдХ-рджреВрд╕рд░реЗ рд╕реЗ рд╕рдВрдмрдВрдз рд╣реИрдВред  рдЖрдЗрдП рдЗрди рд╕рдВрд░рдЪрдирд╛рдУрдВ рдкрд░ рдХрд░реАрдм рд╕реЗ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВред </p><br><ul><li>  <strong>tty_struct</strong> TTY рдбрд┐рд╡рд╛рдЗрд╕ рдбреНрд░рд╛рдЗрд╡рд░ рдФрд░ рдХреБрдЫ рдЕрдиреНрдп рдХреНрд╖реЗрддреНрд░реЛрдВ рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрд░рдЪрдирд╛ рд╣реИред  рдпрд╣ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </li></ul><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_driver *driver; <span class="hljs-comment"><span class="hljs-comment">//  TTY  const struct tty_operations *ops; //  .    ,   driver-&gt;ops,       int index; //   struct tty_ldisc *ldisc; //     struct tty_struct *link; //     PTY // ... }</span></span></code> </pre> <br><ul><li>  <strong>tty_ldisc</strong> рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ TTY рд▓рд╛рдЗрди рдХреЗ рдЕрдиреБрд╢рд╛рд╕рди рдХреЗ рд▓рд┐рдП рд╕рдВрд░рдЪрдирд╛ рд╣реИред  рдЗрд╕рдореЗрдВ рдХреЗрд╡рд▓ рджреЛ рдлрд╝реАрд▓реНрдб рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рджрд┐рдЦрд╛рдИ рджреЗрддреЗ рд╣реИрдВ: </li></ul><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_ldisc { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_ldisc_ops *ops; <span class="hljs-comment"><span class="hljs-comment">//    struct tty_struct *tty; //   tty_struct  .       };</span></span></code> </pre> <br><p>  рдпрд╣ рдХреБрдЫ рднреА рдЬрдЯрд┐рд▓ рдирд╣реАрдВ рд▓рдЧрддрд╛ рд╣реИ?  рдЖрдЗрдП рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХреА рдЧрдИ рд╕рднреА рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЛ рд╣рдорд╛рд░реА рдЯреЛрдХрд░реА рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЙрд╕реА рддрд░рд╣ рд╕реЗ рд▓рд┐рдВрдХ рдХрд░реЗрдВ рдЬреИрд╕реЗ рд╡реЗ рдХреЛрдб рдореЗрдВ рдЬреБрдбрд╝реЗ рд╣реБрдП рд╣реИрдВ: <br><img src="https://habrastorage.org/webt/1d/bt/n4/1dbtn4m_6c6i4n7oaohoguci2m0.jpeg" alt=" tty_struct" title="Tty_struct рдмрдирд╛рдПрдБ"></p><br><p>  рд▓реЗрдХрд┐рди рд╣рдордиреЗ рдХреЗрд╡рд▓ PTM рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП tty_struct рдмрдирд╛рдпрд╛ред  рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛?  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо <code>tty_init_dev()</code> рдлрд╝рдВрдХреНрд╢рди рдкрд░ рд╡рд╛рдкрд╕ рд▓реМрдЯрддреЗ рд╣реИрдВ рдФрд░ рдпрд╛рдж рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рд╣рдореЗрдВ рддрдм <code>tty_driver_install_tty()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рдЙрдореНрдореАрдж рд╣реИ: </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">/** * This method is responsible * for ensuring any need additional structures are allocated and configured. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> tty_driver_install_tty(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_driver *driver, <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> driver-&gt;ops-&gt;install ? driver-&gt;ops-&gt;install(driver, tty) : tty_standard_install(driver, tty); }</code> </pre> <br><p>  рдЯрд┐рдкреНрдкрдгреА рд╣рдореЗрдВ рдмрддрд╛рддреА рд╣реИ рдХрд┐ рдпрд╣ рд╡рд┐рдзрд┐ рд╡рд┐рднрд┐рдиреНрди рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред  рдкреАрдЯреАрдПрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдФрд░ рд╣рдорд╛рд░реА рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рдВрд░рдЪрдирд╛ рд╣реЛрдЧреАред  рдореИрдВ рдорд╛рдирддрд╛ рд╣реВрдВ, рдпрд╣ рдореЗрд░реЗ рд▓рд┐рдП рдмреЗрд╣рдж рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рдерд╛, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдирд░реНрдХ рд╣реИ, рдкреВрд░реА рдбрд┐рд╡рд╛рдЗрд╕ рд╣реИ, рди рдХрд┐ рдХрд┐рд╕реА рддрд░рд╣ рдХрд╛ рдЕрддрд┐рд░рд┐рдХреНрдд рдврд╛рдВрдЪрд╛!  рд▓реЗрдХрд┐рди рд╣рдо рд╕рднреА рд╕рдордЭрддреЗ рд╣реИрдВ рдХрд┐ рд╕рднреА рдбрд┐рд╡рд╛рдЗрд╕ рдХрд┐рд╕реА рди рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХреА рд╕рдВрд░рдЪрдирд╛ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝реЗрдВред  рдареАрдХ рд╣реИ, <em>рдбреНрд░рд╛рдЗрд╡рд░</em> рдХреНрдпрд╛ <em>рд╣реИ-&gt; ops-&gt; рдпрд╣рд╛рдБ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ</em> ?  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, PTM рдбреНрд░рд╛рдЗрд╡рд░ рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рди рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рдлрд┐рд░ рд╕реЗ рджреЗрдЦреЗрдВ: </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_operations ptm_unix98_ops = { .install = pty_unix98_install, <span class="hljs-comment"><span class="hljs-comment">// ...</span></span></code> </pre> <br><p>  рдФрд░ рд╣рдо рд╕рдордЭрддреЗ рд╣реИрдВ рдХрд┐ рд╣рдо <code>pty_unix98_install()</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ: </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> pty_unix98_install(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_driver *driver, <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pty_common_install(driver, tty, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); }</code> </pre> <br><p>  рдЬреЛ <code>pty_common_install()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> pty_common_install(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_driver *driver, <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> legacy) { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *o_tty; <span class="hljs-comment"><span class="hljs-comment">// tty_struct    PTY -    PTS  //    ,       install.   ,   PTM     tty_struct,        if (driver-&gt;subtype != PTY_TYPE_MASTER) return -EIO; o_tty = alloc_tty_struct(driver-&gt;other, idx); tty-&gt;link = o_tty; o_tty-&gt;link = tty; }</span></span></code> </pre> <br><p>  ,   PTS       <em>tty_struct</em>   ,       PTS .           .  tty_struct  PTS    . </p><br><hr><br><h4 id="registraciya-drayvera">   </h4><br><p>        ,           TTY  (   -         ?). <br>  тАФ  ,       PTM,   PTS : </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> file_operations tty_fops = { .llseek = no_llseek, .read = tty_read, .write = tty_write, .poll = tty_poll, .unlocked_ioctl = tty_ioctl, .compat_ioctl = tty_compat_ioctl, .open = tty_open, .release = tty_release, .fasync = tty_fasync, .show_fdinfo = tty_show_fdinfo, };</code> </pre> <br><p>         ,                  TTY . </p><br><hr><br><p> .      ,       <em>/dev/ptmx</em> .  ,   PTS ,      ,   PTM ,      : </p><br><p><img src="https://habrastorage.org/webt/5w/aw/rg/5wawrgbqqw1_llmi1r8g2kbwrzc.jpeg" title=" PTY"></p><br><hr><br><h2 id="hello-world">  рдирдорд╕реНрддреЗ рд╡рд┐рд╢реНрд╡! </h2><br><p>        .          "Hello, World!",        . </p><br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;stdio.h&gt;</span></span></span><span class="hljs-meta"> void main() { printf(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Hello, World!\n"</span></span></span><span class="hljs-meta">); }</span></span></code> </pre> <br><p> ,   "Hello, World!"    .   ,    ,  ,       .    ,    .  stdout  <em>/dev/null</em> тАФ       .          ,       Linux. </p><br><p>      Unix        <em>write()</em> , <em>read()</em> , <em>close()</em>  ,    write()  /dev/pts/0         <code>__vfs_write()</code> : </p><br><pre> <code class="objectivec hljs">ssize_t __vfs_write(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> file *file, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> __user *buf, size_t count, loff_t *pos) { ssize_t ret; <span class="hljs-comment"><span class="hljs-comment">//... ret = file-&gt;f_op-&gt;write(file, buf, count, pos); //... return ret; }</span></span></code> </pre> <br><p>     write()      .   ,            : </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> file_operations tty_fops = { <span class="hljs-comment"><span class="hljs-comment">// ... .write = tty_write, // ...</span></span></code> </pre> <br><p>  <code>tty_write()</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> ssize_t tty_write(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> file *file, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> __user *buf, size_t count, loff_t *ppos) { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty = file_tty(file); <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_ldisc *ld; ssize_t ret; ld = tty_ldisc_ref_wait(tty); ret = do_tty_write(ld-&gt;ops-&gt;write, tty, file, buf, count); tty_ldisc_deref(ld); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret; }</code> </pre> <br><p>     <em>tty_struct</em>    TTY ,           write()  .       : </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_ldisc_ops n_tty_ops = { .write = n_tty_write, <span class="hljs-comment"><span class="hljs-comment">// ... };</span></span></code> </pre> <br><p>    <code>n_tty_write()</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">/** * n_tty_write - write function for tty * @tty: tty device * @file: file object * @buf: userspace buffer pointer * @nr: size of I/O */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> ssize_t n_tty_write(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty, <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> file *file, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *buf, size_t nr) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *b = buf; <span class="hljs-comment"><span class="hljs-comment">// b - ,       "Hello, World!".          int c; //    //     PTS ,  write()    0,  ,     while (nr &gt; 0) { c = tty-&gt;ops-&gt;write(tty, b, nr); //  write()       TTY  if (!c) break; b += c; //     nr -= c; //      :  -  -  -  } }</span></span></code> </pre> <br><p> ,  "Hello, World!"    write()   PTS .       : </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_operations pty_unix98_ops = { .write = pty_write, <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p>  <code>pty_write()</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> pty_write(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *buf, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c) { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *to = tty-&gt;link; <span class="hljs-comment"><span class="hljs-comment">//      PTY.    -  PTM  if (c &gt; 0) { //    PTM  c = tty_insert_flip_string(to-&gt;port, buf, c); //     ,       if (c) { tty_flip_buffer_push(to-&gt;port); tty_wakeup(tty); } } return c; }</span></span></code> </pre> <br><p>          : </p><br><pre> <code class="objectivec hljs"> __vfs_write() -&gt; <span class="hljs-comment"><span class="hljs-comment">// 1- :   tty_write() -&gt; do_tty_write() -&gt; n_tty_write() -&gt; // 2- :   pty_write() // 3- : </span></span></code> </pre> <br><p>     . ,       PTM . ,    . </p><br><p>  ,          <em>flip buffer</em> . <strong>Flip buffer</strong> тАФ   ,    .  tty driver   ,      .   ,              .      ,        ,       .     ,      ,            .  -        flip buffer тАФ       (,    -  ,         flip). </p><br><p>          ,       .  <code>tty_insert_flip_string()</code>         <code>tty_insert_flip_string_fixed_flag()</code> ,           PTM : </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> tty_insert_flip_string_fixed_flag(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_port *port, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *chars, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> flag, size_t size) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> copied = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> goal = min_t(size_t, size - copied, TTY_BUFFER_PAGE); <span class="hljs-comment"><span class="hljs-comment">//      int space = __tty_buffer_request_room(port, goal, flags); //     struct tty_buffer *tb = port-&gt;buf.tail; //       if (unlikely(space == 0)) break; memcpy(char_buf_ptr(tb, tb-&gt;used), chars, space); //      tb-&gt;used += space; copied += space; chars += space; /* There is a small chance that we need to split the data over several buffers. If this is the case we must loop */ } while (unlikely(size &gt; copied)); return copied; }</span></span></code> </pre> <br><p>   , flip buffer        ,       ,         .        ,   тАФ        PTM ,             . </p><br><p> ,   "Hello, World!"   PTM .    GNOME Terminal Server    <em>poll()</em> (  I/O)        master .  ,         ?  рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ рдХрд┐ рдХреИрд╕реЗред      ,     ,      тАФ        . </p><br><p>            <code>tty_flip_buffer_push()</code> (   pty_write): </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">/** * tty_flip_buffer_push - terminal * @port: tty port to push * * Queue a push of the terminal flip buffers to the line discipline. * Can be called from IRQ/atomic context. * * In the event of the queue being busy for flipping the work will be * held off and retried later. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> tty_flip_buffer_push(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_port *port) { tty_schedule_flip(port); }</code> </pre> <br><p>  <code>tty_schedule_flip()</code> ,   ,        : </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">/** * tty_schedule_flip - push characters to ldisc * @port: tty port to push from * * Takes any pending buffers and transfers their ownership to the * ldisc side of the queue. It then schedules those characters for * processing by the line discipline. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> tty_schedule_flip(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_port *port) { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_bufhead *buf = &amp;port-&gt;buf; <span class="hljs-comment"><span class="hljs-comment">/* paired w/ acquire in flush_to_ldisc(); ensures * flush_to_ldisc() sees buffer data. */</span></span> smp_store_release(&amp;buf-&gt;tail-&gt;commit, buf-&gt;tail-&gt;used); queue_work(system_unbound_wq, &amp;buf-&gt;work); }</code> </pre> <br><p>   ,     <em>work</em> (,   -       )       ,      тАФ    ,    <code>flush_to_ldisc()</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> flush_to_ldisc(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> work_struct *work) { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_port *port = container_of(work, <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_port, buf.work); <span class="hljs-comment"><span class="hljs-comment">//   tty_port PTM . tty_port -       TTY  struct tty_bufhead *buf = &amp;port-&gt;buf; struct tty_buffer *head = buf-&gt;head; // ... receive_buf(port, head); // ... }</span></span></code> </pre> <br><p>  <code>receive_buf()</code>          <code>__receive_buf()</code> ,      : </p><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> __receive_buf(<span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> tty_struct *tty, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *cp, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *fp, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count) { <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> n_tty_data *ldata = tty-&gt;disc_data; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> preops = I_ISTRIP(tty) || (I_IUCLC(tty) &amp;&amp; L_IEXTEN(tty)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ldata-&gt;real_raw) n_tty_receive_buf_real_raw(tty, cp, fp, count); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ldata-&gt;raw || (L_EXTPROC(tty) &amp;&amp; !preops)) n_tty_receive_buf_raw(tty, cp, fp, count); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tty-&gt;closing &amp;&amp; !L_EXTPROC(tty)) n_tty_receive_buf_closing(tty, cp, fp, count); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ldata-&gt;lnext) { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> flag = TTY_NORMAL; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fp) flag = *fp++; n_tty_receive_char_lnext(tty, *cp++, flag); count--; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!preops &amp;&amp; !I_PARMRK(tty)) n_tty_receive_buf_fast(tty, cp, fp, count); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> n_tty_receive_buf_standard(tty, cp, fp, count); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (read_cnt(ldata)) { kill_fasync(&amp;tty-&gt;fasync, SIGIO, POLL_IN); wake_up_interruptible_poll(&amp;tty-&gt;read_wait, EPOLLIN); } }</code> </pre> <br><p>  ,   <em>n_tty_receive_buf</em> ( ,    _raw)           <strong>read_buf</strong> ,         TTY .      PTM    raw ,           read_buf. ,        PTM  PTS ,     . </p><br><p>       ,   : </p><br><pre> <code class="objectivec hljs"> ... pty_write() -&gt; <span class="hljs-comment"><span class="hljs-comment">// 3- :  PTS  tty_insert_flip_string + tty_flip_buffer_push() -&gt; tty_schedule_flip() -&gt; --- //    PTM  flush_to_ldisc() -&gt; // 2- :   PTM  receive_buf() -&gt; n_tty_receive_buf -&gt; n_tty_receive_buf_common -&gt; __receive_buf()</span></span></code> </pre> <br><p> ,   PTM        тАФ         PTS . </p><br><p>  :       PTM .  GNOME Terminal Server      "Hello, World!",  read()  PTM .  read()    write()    тАФ  <code>n_tty_read()</code> .      ,  ,          тАФ <em>read_buf</em> тАФ   .  GNOME Terminal Server    X Server,     . </p><br><p>  ,   "Hello, World!"   : </p><br><pre> <code class="plaintext hljs"> -&gt; PTY slave -&gt; PTY master -&gt; GNOME-TERMINAl-SERVER -&gt; X Server -&gt; -&gt; </code> </pre> <br><hr><br><h2 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br><p>  .     : </p><br><ol><li>     </li><li>     </li><li>   TTY  </li><li>    </li><li>    ,         </li></ol><br><p>   ,   !     -  тАФ     ,   ! </p><br><h3 id="istochniki">  рд╕реВрддреНрд░реЛрдВ рдХрд╛ рдХрд╣рдирд╛ рд╣реИ </h3><br><ul><li> Linux man pages </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://unix.stackexchange.com/q/96694/346664</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://unix.stackexchange.com/q/93531/346664</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://unix.stackexchange.com/q/117981/346664</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://askubuntu.com/q/506510</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">www.linusakesson.net/programming/tty/</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://spin0r.wordpress.com/2012/12/28/terminally-confused-part-seven/</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://habr.com/ru/company/neobit/blog/330764/</a> </li><li>  Advanced Programming in the UNIX Environment, 3rd Edition </li></ul><cut></cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi460257/">https://habr.com/ru/post/hi460257/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi460241/index.html">рдирд░рдХ рдпрд╛ рдЙрдЪреНрдЪ рдкрд╛рдиреА: рд░реВрд╕реА рд▓реЛрдХрдкреНрд░рд┐рдп рд╡рд┐рдЬреНрдЮрд╛рди рд╕рд╛рд╣рд┐рддреНрдп рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕</a></li>
<li><a href="../hi460247/index.html">рдИрдПрд▓рдПрдл рдХреЗ рд▓рд┐рдП рд╡реНрдпрдВрдЬрди рд╡рд┐рдзрд┐</a></li>
<li><a href="../hi460249/index.html">Pwnable.kr 07 рдХреЗ рд╕рд╛рде рдХрд╛рд░реНрдп рдХрд╛ рд╕рдорд╛рдзрд╛рди - рдЗрдирдкреБрдЯред Pwntools рд╕рдордЭрдирд╛</a></li>
<li><a href="../hi460251/index.html">рдЖрд░реНрдЯрд┐рдлрд┐рд╢рд┐рдпрд▓ рд╕реНрдЯреБрдкрд┐рдбрд┐рдЯреА: рдПрдХ рдмреЙрдЯ рдЬреЛ рдореЗрд░реА рдорджрдж рдирд╣реАрдВ рдХрд░рддрд╛ рдерд╛</a></li>
<li><a href="../hi460255/index.html">Node.js рдкрд░ рдкрд┐рдЫрд▓реЗ рджрд░рд╡рд╛рдЬреЗ: рдХреНрдпреЛрдВ, рдХреНрдпреЛрдВ рдФрд░ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi460259/index.html">рдпреВрдЖрдИ рдФрд░ рдпреВрдПрдХреНрд╕ рдбрд┐рдЬрд╛рдЗрди рдХреНрдпрд╛ рд╣реИ? рдХреНрдпрд╛ рдЖрдо рдФрд░ рдЕрд▓рдЧ рд╣реИ?</a></li>
<li><a href="../hi460261/index.html">рдЕрдореЗрдЬрд╝реЕрди: рдИрдХреЙрдорд░реНрд╕ рд╕рдлрд▓рддрд╛ рдХреЗ 25 рд╕рд╛рд▓</a></li>
<li><a href="../hi460263/index.html">рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╕реНрдорд╛рд░реНрдЯ рдЦреЛрдЬ рдХрд░рдирд╛: рдЪрд░рдг-рджрд░-рдЪрд░рдг рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛</a></li>
<li><a href="../hi460265/index.html">рдПрдХ Xcode рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЯреЗрдореНрдкрд▓реЗрдЯ рдмрдирд╛рдПрдБ</a></li>
<li><a href="../hi460273/index.html">рд╕рдмрд╕реЗ рдЫреЛрдЯреЗ рдХреЗ рд▓рд┐рдП рдПрдкреНрдкрд▓ рд╡реЗрддрди рдореЗрдВ рдкреНрд░рд╛рдзрд┐рдХрд░рдг</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>