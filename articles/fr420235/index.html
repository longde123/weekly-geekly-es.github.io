<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∑ üèáüèΩ üêå Zenject: comment un conteneur IoC peut tuer l'injection de d√©pendance sur votre projet üëáüèø ‚ù§Ô∏è üë©üèæ‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O√π commence le danger? Supposons que vous soyez fermement d√©termin√© √† d√©velopper un projet, en adh√©rant √† un concept ou une approche sp√©cifique. Dans ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Zenject: comment un conteneur IoC peut tuer l'injection de d√©pendance sur votre projet</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420235/">  O√π commence le danger?  Supposons que vous soyez fermement d√©termin√© √† d√©velopper un projet, en adh√©rant √† un concept ou une approche sp√©cifique.  Dans notre situation, c'est DI, bien que la programmation r√©active, par exemple, puisse √©galement √™tre √† sa place.  Il est logique que pour atteindre votre objectif, vous vous tournerez vers des solutions toutes faites (dans notre exemple, le conteneur DI Zenject).  Vous vous familiariserez avec la documentation et commencerez √† construire le cadre d'application en utilisant la fonctionnalit√© principale.  Si, aux premi√®res √©tapes de l'utilisation de la solution, vous n'avez pas de sensations d√©sagr√©ables, il est probable qu'elle persistera sur votre projet pendant toute sa vie.  Lorsque vous travaillez avec les fonctions de base de la solution (conteneur), vous pouvez avoir des questions ou des d√©sirs pour rendre certaines fonctionnalit√©s plus belles ou plus efficaces.  Assur√©ment, vous allez d'abord vous tourner vers les ¬´fonctionnalit√©s¬ª plus avanc√©es de la solution (conteneur) pour cela.  Et √† ce stade, la situation suivante peut se produire: vous connaissez d√©j√† bien et faites confiance √† la solution choisie, en raison de laquelle beaucoup peuvent ne pas penser √† la fa√ßon id√©ologiquement correcte d'utiliser l'une ou l'autre fonction dans la solution, ou la transition vers une autre solution est d√©j√† assez co√ªteuse et inappropri√©e ( par exemple, la date limite approche).  C'est √† ce stade que la situation la plus dangereuse peut survenir - la fonctionnalit√© de la solution est utilis√©e avec peu de soin, ou dans de rares cas, simplement sur la machine (sans r√©fl√©chir). <br><a name="habracut"></a><br><h3>  Qui pourrait √™tre int√©ress√© par cela? </h3><br>  Cet article sera utile √† la fois √† ceux qui connaissent bien les adeptes de DI et aux DI d√©butants.  Pour comprendre suffisamment de connaissances de base sur les mod√®les utilis√©s par DI, le but de DI et les fonctions qu'un conteneur IoC remplit.  Il ne s'agit pas des subtilit√©s de la mise en ≈ìuvre de Zenject, mais de l'application d'une partie de ses fonctionnalit√©s.  L'article s'appuie uniquement sur la documentation Zenject officielle et les exemples de code qui en d√©coulent, ainsi que sur le livre de Mark Siman ¬´Dependency Injection in .NET¬ª, qui est un ouvrage exhaustif classique sur le th√®me de la th√©orie de l'ID.  Toutes les citations de cet article sont des extraits du livre de Mark Siman.  Malgr√© le fait que nous parlerons d'un conteneur sp√©cifique, l'article peut √™tre utile √† ceux qui utilisent d'autres conteneurs. <br><br>  Le but de cet article est de montrer comment un outil dont le but est de vous aider √† impl√©menter DI sur votre projet peut vous conduire dans une direction compl√®tement diff√©rente, vous poussant √† faire des erreurs qui lient votre code, r√©duisent la testabilit√© du code et vous privent g√©n√©ralement de tous les avantages qui peuvent vous donner vous DI. <br><br>  <i><b>Avertissement</b></i> : Le but de cet article n'est pas de critiquer Zenject ou ses auteurs.  Zenject peut √™tre utilis√© conform√©ment √† sa destination et constitue un excellent outil pour impl√©menter DI, √† condition que vous n'utilisiez pas un ensemble complet de ses fonctions, apr√®s avoir d√©fini vous-m√™me certaines limitations. <br><br><h3>  Pr√©sentation </h3><br>  <i>Zenject</i> est un conteneur d'injection de d√©pendance open source destin√© √† utiliser le moteur de jeu Unity3D, qui fonctionne sur la plupart des plates-formes prises en charge par Unity3D.  Il convient de noter que Zenject peut √©galement √™tre utilis√© pour les applications C # d√©velopp√©es sans Unity3D.  Ce conteneur est tr√®s populaire parmi les d√©veloppeurs Unity, est activement pris en charge et d√©velopp√©.  De plus, Zenject poss√®de toutes les fonctionnalit√©s n√©cessaires du conteneur DI. <br><br>  J'ai utilis√© Zenject dans 3 grands projets Unity et j'ai √©galement communiqu√© avec un grand nombre de d√©veloppeurs qui l'ont utilis√©.  La raison de la r√©daction de cet article est la foire aux questions: <br><br><ul><li>  L'utilisation de Zenject est-elle une bonne solution? </li><li>  Quel est le probl√®me avec Zenject? </li><li>  Quelles difficult√©s surviennent lors de l'utilisation de Zenject? </li></ul><br>  Et aussi certains projets dans lesquels l'utilisation de Zenject n'a pas permis de r√©soudre des probl√®mes de forte connectivit√© de code et d'architecture infructueuse, mais au contraire a exacerb√© la situation. <br><br>  Voyons pourquoi les d√©veloppeurs ont de telles questions et probl√®mes.  Vous pouvez r√©pondre comme suit: <br><blockquote>  Ironiquement, les conteneurs DI eux-m√™mes ont tendance √† √™tre des d√©pendances stables.  ... Lorsque vous d√©cidez de d√©velopper votre application √† partir d'un conteneur DI particulier, vous courez le risque d'√™tre limit√© √† ce choix pour l'ensemble du cycle de vie de l'application. </blockquote>  Il convient de noter qu'avec une utilisation correcte et limit√©e du conteneur, le passage √† l'utilisation d'un autre conteneur dans l'application (ou le refus d'utiliser le conteneur en faveur d'une ¬´ <i>mise en ≈ìuvre pour les pauvres</i> ¬ª) est tout √† fait possible et ne prendra pas beaucoup de temps.  Certes, dans une telle situation, il est peu probable que vous en ayez besoin. <br><br>  Avant de commencer √† d√©sassembler les fonctionnalit√©s potentiellement dangereuses de Zenject, il est logique d'actualiser superficiellement plusieurs aspects de base de DI. <br><br>  Le premier aspect est le <i>but des conteneurs DI.</i>  Mark Siman √©crit ce qui suit dans son livre sur ce sujet: <br><blockquote>  Un conteneur DI est une biblioth√®que de logiciels qui peut automatiser la plupart des t√¢ches effectu√©es lors de l'assemblage d'objets et de la gestion de leur cycle de vie. </blockquote><blockquote>  Ne vous attendez pas √† ce que le conteneur DI transforme comme par magie le code fortement coupl√© en code faiblement coupl√©.  Un conteneur peut am√©liorer l'efficacit√© de l'utilisation de DI, mais l'accent dans l'application doit √™tre mis principalement sur l'utilisation de mod√®les et sur l'utilisation de DI. </blockquote>  Le deuxi√®me aspect est les <i>mod√®les DI</i> .  Mark Siman identifie quatre mod√®les principaux, tri√©s par fr√©quence et la n√©cessit√© de leur utilisation: <br><br><ol><li>  Impl√©mentation du constructeur - Comment garantir que la d√©pendance requise sera toujours disponible pour la classe en cours de d√©veloppement? </li><li>  Impl√©mentation de la propri√©t√© - Comment puis-je activer DI en option dans la classe s'il existe une valeur par d√©faut locale appropri√©e? </li><li>  Impl√©mentation de la m√©thode - Comment puis-je injecter des d√©pendances dans une classe si elles sont diff√©rentes pour chaque op√©ration? </li><li>  Contexte ambiant - Comment rendre une d√©pendance disponible dans chaque module sans inclure les aspects transversaux de l'application dans chaque composant API? </li></ol><br>  Les questions indiqu√©es √† c√¥t√© du nom des mod√®les d√©crivent pleinement leur port√©e.  Dans le m√™me temps, l'article ne discutera pas de l'impl√©mentation du constructeur (car il n'y a pratiquement aucune plainte concernant son impl√©mentation dans Zenject) et du contexte ambiant (son impl√©mentation n'est pas dans le conteneur, mais vous pouvez facilement l'impl√©menter en fonction des fonctionnalit√©s existantes). <br>  Vous pouvez maintenant acc√©der directement aux fonctionnalit√©s potentiellement dangereuses de Zenject. <br><br><h3>  Fonctionnalit√© dangereuse. </h3><br><h4>  Impl√©menter les propri√©t√©s </h4><br>  Il s'agit du deuxi√®me mod√®le DI le plus courant, apr√®s l'impl√©mentation du constructeur, mais il est utilis√© beaucoup moins souvent.  Mis en ≈ìuvre dans Zenject comme suit: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Foo</span></span> { [Inject] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IBar Bar { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre> <br>  De plus, Zenject a √©galement un concept tel que ¬´Field Injection¬ª.  Voyons pourquoi dans tous les Zenject cette fonctionnalit√© est la plus dangereuse. <br><br><ul><li>  Un attribut est utilis√© pour montrer au conteneur quel champ int√©grer.  Il s'agit d'une solution tout √† fait compr√©hensible, du point de vue de la simplicit√© et de la logique de mise en ≈ìuvre du conteneur lui-m√™me.  Cependant, nous voyons un attribut (ainsi qu'un espace de noms) dans le code de classe.  C'est, au moins indirectement, mais la classe commence √† savoir d'o√π elle tire la d√©pendance.  De plus, nous commen√ßons √† resserrer le code de classe sur le conteneur.  En d'autres termes, nous ne pouvons plus refuser d'utiliser Zenject sans manipuler le code de classe. </li><li>  Le mod√®le lui-m√™me est utilis√© dans les situations o√π la d√©pendance a une valeur par d√©faut locale.  Autrement dit, il s'agit d'une d√©pendance facultative, et si le conteneur ne peut pas le fournir, il n'y aura aucune erreur dans le projet et tout fonctionnera.  Cependant, en utilisant Zenject, vous obtenez toujours cette d√©pendance - la d√©pendance ne devient pas facultative. </li><li>  √âtant donn√© que la d√©pendance dans ce cas n'est pas facultative, elle commence √† g√¢cher toute la logique de l'impl√©mentation du constructeur, car seules les d√©pendances requises doivent y √™tre introduites.  En impl√©mentant des d√©pendances non facultatives via des propri√©t√©s, vous avez la possibilit√© de cr√©er des d√©pendances circulaires dans le code.  Ils ne seront pas aussi √©vidents, car dans Zenject, l'impl√©mentation du constructeur est d'abord r√©alis√©e, puis l'impl√©mentation de la propri√©t√©, et vous ne recevrez pas d'avertissement du conteneur. </li><li>  L'utilisation du conteneur DI implique l'impl√©mentation du mod√®le Racine de composition, cependant, l'utilisation de l'attribut pour configurer l'impl√©mentation de la propri√©t√© conduit au fait que vous configurez le code non seulement dans la racine de composition, mais aussi selon les besoins dans chaque classe. </li></ul><br><h4>  Usines (et MemoryPool) </h4><br>  La documentation Zenject contient une <a href="">section</a> enti√®re sur les usines.  Cette fonctionnalit√© est impl√©ment√©e au niveau du conteneur lui-m√™me, et il est √©galement possible de cr√©er vos propres usines personnalis√©es.  Jetons un coup d'≈ìil au premier exemple de la documentation: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Enemy</span></span> { DiContainer Container; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enemy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DiContainer container</span></span></span><span class="hljs-function">)</span></span> { Container = container; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> player = Container.Resolve&lt;Player&gt;(); WalkTowards(player.Position); ... etc. } }</code> </pre> <br>  D√©j√† dans cet exemple, il y a une violation flagrante de DI.  Mais c'est plut√¥t un exemple de la fa√ßon de fabriquer une usine enti√®rement personnalis√©e.  Quel est le principal probl√®me ici? <br><blockquote>  Un conteneur DI peut √™tre consid√©r√© √† tort comme un localisateur de services, mais il ne doit √™tre utilis√© que comme m√©canisme de liaison de graphiques d'objets.  Si nous consid√©rons le conteneur de ce point de vue, il est logique de limiter son utilisation uniquement √† la racine de la mise en page.  Cette approche pr√©sente l'avantage important d'√©liminer toute liaison entre le conteneur et le reste du code d'application. </blockquote>  Voyons comment fonctionnent les usines ¬´int√©gr√©es¬ª de Zenject.  Il existe une interface IFactory pour cela, dont l'impl√©mentation nous conduit √† la classe PlaceholderFactory: <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PlaceholderFactory</span></span>&lt;<span class="hljs-title"><span class="hljs-title">TValue</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">IPlaceholderFactory</span></span> { [Inject] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Construct</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IProvider provider, InjectContext injectContext</span></span></span><span class="hljs-function">)</span></span></code> </pre> <br>  On y voit le param√®tre InjectContext qui a de nombreux constructeurs, de la forme: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InjectContext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">DiContainer container, Type memberType</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">this</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Container = container; MemberType = memberType; }</code> </pre> <br>  Et encore une fois, nous obtenons le transfert du conteneur lui-m√™me comme une d√©pendance √† la classe.  Cette approche est une violation flagrante de DI et une transformation partielle du conteneur en un localisateur de services. <br>  De plus, l'inconv√©nient de cette solution est que le conteneur est utilis√© pour cr√©er des d√©pendances √† court terme et ne doit cr√©er que des d√©pendances √† long terme. <br><br>  Pour √©viter de telles violations, les auteurs du conteneur pourraient exclure compl√®tement la possibilit√© de passer le conteneur en tant que d√©pendance √† toutes les classes enregistr√©es.  Il ne serait pas difficile de mettre en ≈ìuvre cela, √©tant donn√© que l'ensemble du conteneur fonctionne au moyen de la r√©flexion et de l'analyse des param√®tres des m√©thodes et des constructeurs pour cr√©er et mettre en page le graphique des objets d'application. <br><br><h4>  Impl√©mentation de la m√©thode </h4><br>  La logique de l'impl√©mentation de la m√©thode dans Zenject est la suivante: d'abord, dans toutes les classes, le constructeur est impl√©ment√©, puis les propri√©t√©s sont impl√©ment√©es, et enfin la m√©thode est impl√©ment√©e.  Consid√©rez l'exemple d'impl√©mentation fourni dans la documentation: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Foo</span></span> { [Inject] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Init</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBar bar, Qux qux</span></span></span><span class="hljs-function">)</span></span> { _bar = bar; _qux = qux; } }</code> </pre> <br>  Quels sont les inconv√©nients ici: <br><br><ul><li>  Vous pouvez √©crire n'importe quel nombre de m√©thodes qui seront impl√©ment√©es dans le cadre d'une classe.  Ainsi, comme dans le cas de l'impl√©mentation de la propri√©t√©, nous avons l'opportunit√© de faire autant de d√©pendances cycliques que possible. </li><li>  Comme l'impl√©mentation d'une propri√©t√©, l'impl√©mentation d'une m√©thode est impl√©ment√©e au moyen d'un attribut, qui associe votre code au code du conteneur lui-m√™me. </li><li>  L'impl√©mentation de la m√©thode dans Zenject n'est utilis√©e que comme une alternative aux constructeurs, ce qui est pratique dans le cas des classes MonoBehavior, mais elle contredit absolument la th√©orie d√©crite par Mark Siman.  L'exemple classique de la mise en ≈ìuvre canonique de la m√©thode peut √™tre consid√©r√© comme l'utilisation d'usines (m√©thodes d'usine). </li><li>  S'il y a plusieurs m√©thodes introduites dans la classe, ou en plus de la m√©thode il y a aussi un constructeur, il s'av√®re que les d√©pendances n√©cessaires pour la classe seront dispers√©es √† diff√©rents endroits, ce qui interf√®rera avec l'image dans son ensemble.  Autrement dit, si la classe 1 a un constructeur, le nombre de ses param√®tres peut clairement montrer s'il y a des erreurs de conception dans la classe et si le principe de la responsabilit√© exclusive est viol√©, et si les d√©pendances sont dispers√©es par plusieurs m√©thodes, par le constructeur, ou peut-√™tre par quelques propri√©t√©s, alors l'image ne sera pas aussi √©vidente qu'elle pourrait l'√™tre. </li></ul><br>  Il s'ensuit que la pr√©sence d'une telle impl√©mentation de l'impl√©mentation de m√©thode dans le conteneur, qui contredit la th√©orie DI, n'a pas un seul plus.  Avec une grosse mise en garde, un plus ne peut √™tre consid√©r√© que la possibilit√© d'utiliser la m√©thode impl√©ment√©e, en tant que constructeur de MonoBehaviour.  Mais c'est un point plut√¥t controvers√©, car du point de vue de la logique du conteneur, des mod√®les DI et du p√©riph√©rique de m√©moire interne Unity3D, tous les objets MonoBehaviour de votre application peuvent √™tre consid√©r√©s comme g√©r√©s par les ressources, et dans ce cas, il sera beaucoup plus efficace de d√©l√©guer la gestion du cycle de vie de ces objets pas un conteneur DI, mais une classe d'assistance (que ce soit Wrapper, ViewModel, Fasade ou autre). <br><br><h4>  Liaisons globales </h4><br>  Il s'agit d'une fonctionnalit√© auxiliaire plut√¥t pratique qui vous permet de d√©finir des classeurs globaux pouvant vivre ind√©pendamment de la transition entre les sc√®nes.  Vous pouvez en lire plus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans la documentation</a> .  Cette fonctionnalit√© est extr√™mement pratique et tr√®s utile.  Il convient de noter qu'il ne viole pas les mod√®les et les principes de DI, cependant, il a une mise en ≈ìuvre peu √©vidente et laide.  L'essentiel est que vous cr√©ez un type sp√©cial de pr√©fabriqu√©, y attachez un script avec la configuration du conteneur (Installer) et l'enregistrez dans un dossier de projet strictement d√©fini, sans possibilit√© de se d√©placer quelque part et sans aucun lien vers celui-ci.  L'inconv√©nient de cet outil r√©side uniquement dans son implicitation.  En ce qui concerne les installateurs ordinaires, tout est assez simple: vous avez un objet sur la sc√®ne, le script d'installation se bloque dessus.  Si un nouveau d√©veloppeur vient au projet, l'installateur devient un excellent point d'immersion dans le projet.  Sur la base d'un seul programme d'installation, un d√©veloppeur peut se faire une id√©e des modules d'un projet et de la fa√ßon dont un graphique d'objets est construit.  Mais avec l'utilisation de classeurs globaux, le programme d'installation sur sc√®ne cesse d'√™tre une source suffisante de ces informations.  Il n'y a pas un seul lien vers la liaison globale dans le code des autres installateurs (pr√©sents sur les sc√®nes) et par cons√©quent, vous ne voyez pas le graphique complet des objets.  Et seulement pendant l'analyse des classes, vous comprenez que certains des classeurs ne sont pas suffisants dans le programme d'installation sur sc√®ne.  Encore une fois, je ferai une r√©serve que cet inconv√©nient est purement cosm√©tique. <br><br><h4>  Identifiants </h4><br>  La possibilit√© de d√©finir une liaison sp√©cifique pour un identifiant afin d'obtenir une certaine d√©pendance √† partir d'un ensemble de d√©pendances similaires dans une classe.  Un exemple: <br><br><pre> <code class="cs hljs">Container.Bind&lt;IFoo&gt;().WithId(<span class="hljs-string"><span class="hljs-string">"foo"</span></span>).To&lt;Foo1&gt;().AsSingle(); Container.Bind&lt;IFoo&gt;().To&lt;Foo2&gt;().AsSingle(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Bar1</span></span> { [Inject(Id = <span class="hljs-string"><span class="hljs-string">"foo"</span></span>)] IFoo _foo; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Bar2</span></span> { [Inject] IFoo _foo; }</code> </pre> <br>  Cette fonctionnalit√© peut vraiment √™tre utile dans certaines situations et constitue une option suppl√©mentaire √† la mise en ≈ìuvre des propri√©t√©s.  Cependant, avec la commodit√©, il h√©rite de tous les probl√®mes identifi√©s dans la section ¬´Impl√©mentation des propri√©t√©s¬ª, ajoutant encore plus de coh√©rence au code en introduisant une certaine constante dont vous devez vous souvenir lors de la configuration de votre code.  Si vous supprimez accidentellement cet identifiant, vous pouvez facilement en obtenir un non fonctionnel √† partir de l'application qui fonctionne. <br><br><h4>  Signaux et ITickable </h4><br>  Les signaux sont un analogue du m√©canisme d'agr√©gateur d'√©v√©nements int√©gr√© au conteneur.  L'id√©e de mettre en ≈ìuvre cette fonctionnalit√© est sans aucun doute noble, car elle vise √† r√©duire le nombre de connexions entre les objets qui communiquent via le m√©canisme des abonnements aux √©v√©nements.  Un exemple assez volumineux peut √™tre trouv√© dans la <a href="">documentation</a> , cependant, il ne sera pas dans l'article, car l'impl√©mentation sp√©cifique n'a pas d'importance. <br><br>  Prise en charge de l'interface ITickable - remplacement des m√©thodes standard Update, LateUpdate et FixedUpdate dans Unity en d√©l√©guant des appels aux m√©thodes de mise √† jour des objets avec l'interface ITickable au conteneur.  Un exemple est √©galement dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> , et sa mise en ≈ìuvre dans le contexte de l'article n'a pas d'importance non plus. <br><br>  Le probl√®me des signaux et ITickable ne concerne pas les aspects de leur mise en ≈ìuvre, sa racine r√©side dans l'utilisation des effets secondaires du conteneur.  √Ä la base, le conteneur conna√Æt presque toutes les classes et leurs instances au sein du projet, mais sa responsabilit√© est de cr√©er un graphique des objets et de g√©rer leur cycle de vie.  En ajoutant des m√©canismes tels que des signaux, ITickable, etc., nous ajoutons plus de responsabilit√©s au conteneur, et de plus en plus nous y attachons le code d'application, ce qui en fait la partie exclusive et irrempla√ßable du code, pratiquement un ¬´objet divin¬ª. <br><br><h3>  Au lieu de la sortie </h3><br><blockquote>  La chose la plus importante √† propos des conteneurs est de comprendre que l'utilisation de DI est ind√©pendante de l'utilisation d'un conteneur DI.  Une application peut √™tre construite √† partir de nombreuses classes et modules faiblement coupl√©s, et aucun de ces modules ne doit rien savoir du conteneur. </blockquote>  Soyez prudent lorsque vous utilisez des solutions pr√™tes √† l'emploi (en bo√Æte) ou de petits plugins.  Utilisez-les judicieusement.  En effet, des choses encore plus grandioses sur lesquelles vous comptez (par exemple, des moteurs de jeu √† l'√©chelle de Unity3D lui-m√™me) peuvent p√©cher avec de telles erreurs th√©oriques et des taches.  Et cela, en fin de compte, n'affectera pas le travail de la solution que vous utilisez, mais la durabilit√©, le travail et la qualit√© de votre produit final.  J'esp√®re que tous ceux qui auront lu jusqu'√† la fin, l'article seront utiles ou, au moins, ne regretteront pas le temps pass√© √† le lire. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr420235/">https://habr.com/ru/post/fr420235/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr420223/index.html">Quelques conseils simples: comment √©viter d'endommager le drone</a></li>
<li><a href="../fr420225/index.html">M√©lodie algorithmique infinie bas√©e sur des nombres premiers</a></li>
<li><a href="../fr420227/index.html">Le pr√©sident turc annonce l'interdiction d'importer de l'√©lectronique aux √âtats-Unis</a></li>
<li><a href="../fr420229/index.html">Les enfants des villages peuvent-ils devenir des programmeurs s'ils se trouvent √† proximit√©, ils n'enseignent qu'aux cheminots. Conversation avec le "Cercle"</a></li>
<li><a href="../fr420233/index.html">UE4 | √âquipement pour multijoueur # 5 | Transfert d'informations entre le serveur et le client</a></li>
<li><a href="../fr420237/index.html">Enveloppe Qt autour du framework gRPC en C ++</a></li>
<li><a href="../fr420239/index.html">D√©veloppement mobile. Swift: le myst√®re des protocoles</a></li>
<li><a href="../fr420243/index.html">Philanthropie r√©volutionnaire: projets de perc√©e humanitaire</a></li>
<li><a href="../fr420245/index.html">Comment emp√™cher le d√©passement de m√©moire lors de l'utilisation de collections Java</a></li>
<li><a href="../fr420251/index.html">Apple affirme que le complexe du si√®ge social de l'entreprise ne co√ªte que 200 $</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>