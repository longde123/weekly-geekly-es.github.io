<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçü§ù‚Äçüë©üèΩ üë®üèª‚Äç‚úàÔ∏è üíÉüèª Python para ayudar a probar productos estructurales üïì üï∫üèΩ ü§≥üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Inspirado por la publicidad de productos estructurales en Habr√© , adapt√≥ el script de pit√≥n para su prueba independiente. La idea principal es que est...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Python para ayudar a probar productos estructurales</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461583/">  Inspirado por la publicidad de productos estructurales en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Habr√©</a> , adapt√≥ el script de pit√≥n para su prueba independiente.  La idea principal es que estos productos ofrecen una protecci√≥n del capital del 100%.  Y dados los 10 a√±os del mercado alcista, el desempe√±o hist√≥rico de tales productos es asombroso con un para√≠so libre de riesgos. <br><br>  Este art√≠culo ser√° interesante para los programadores principiantes de Python que est√©n interesados ‚Äã‚Äãen administrar su dinero.  Bueno, para algunos, esta herramienta puede ser √∫til para construir tales estrategias por su cuenta.  Pero tenga cuidado, los corredores escriben que esto no es para todos. <br><br>  El c√≥digo se publica en GitHub como un bloc de notas Jupyter.  Vamos! <br><a name="habracut"></a><br><h2>  Algunas palabras para presentar </h2><br>  Probar√© en acciones estadounidenses y all√≠ el rendimiento ser√° menor que en rublos.  El mercado ruso en t√©rminos absolutos en las listas es m√°s interesante, pero tiene m√°s riesgos.  La esencia de las pruebas no cambia a partir de esto. <br><br>  Tomamos los datos de las ventajas gratuitas de Alpha, donde primero necesita obtener la clave compartiendo la direcci√≥n de correo electr√≥nico.  Breve instrucci√≥n en un cuaderno.  Puede tomar cotizaciones de valores rusos en Finam. <br><br><h2>  Carisma de producto estructural </h2><br>  Brevemente, su capital est√° seguro y el rendimiento es m√°s alto que el dep√≥sito bancario (bonos del gobierno).  Aqu√≠ hay algunos elementos de la ecuaci√≥n que faltan: <br><br><ul><li>  Siempre hay ingresos en un dep√≥sito bancario, pero existe el riesgo de jugar cero; </li><li>  Obtendr√° ganancias, pero el corredor reclama una porci√≥n significativa del pastel; </li><li>  Existe una restricci√≥n en el uso del dinero invertido; </li><li>  El corredor pr√°cticamente no asume ning√∫n riesgo y solo participa en las ganancias. </li></ul><br><h2>  Estrategia </h2><br>  Considere la estrategia m√°s simple: <br><br><ul><li>  Compramos el 90% del capital en bonos del tesoro a corto plazo; </li><li>  Para el resto, compramos un activo de alto riesgo; </li><li>  Paramos al 10% del precio al comienzo del per√≠odo. </li></ul><br>  En el coraz√≥n de la estrategia: los bonos del tesoro dan 1-3% por a√±o, pr√°cticamente excluyendo la reducci√≥n (si hay un rendimiento).  El 10% de la reducci√≥n de un activo comprado con el 10% del capital ser√° el riesgo de que cubran los bonos.  Durante los per√≠odos del mercado alcista, algunas acciones pueden crecer varias veces, lo que nos dar√° felicidad. <br><br>  Para repetir manualmente esta estrategia, debe realizar los siguientes pasos: <br><br><ul><li>  Compra bonos.  Por ejemplo, en forma de ETF. </li><li>  Compra acciones. </li><li>  Poner una orden de stop. </li></ul><br><h2>  C√≥mo probar </h2><br>  Describir√© brevemente algunas soluciones con extractos de c√≥digo que hicieron que las pruebas sean bastante flexibles y convenientes. <br><br><h3>  Horario </h3><br>  Puede reequilibrar en los siguientes per√≠odos: semana, mes, a√±o.  Y tambi√©n en cualquier d√≠a dentro del per√≠odo: el primero, en√©simo, √∫ltimo.  La clase `Schedule ()` es responsable de esto: <br><br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#         df = pd.DataFrame([], index=pd.date_range(start, end, freq='B')) # ... #      ,   df = df[df.index.isin(dates)].copy() # ... #    # ... elif freq == 'week': groupby = ['year', 'week'] elif freq == 'month': groupby = ['year', 'month'] elif freq == 'year': groupby = ['year'] #      grouped = df.groupby(groupby) for idx, grp in grouped: if len(grp) &gt;= abs(day): df.loc[grp.iloc[day].name, 'allow'] = True</span></span></code> </pre> <br><h3>  Ciclo de datos </h3><br><pre> <code class="python hljs">StructuredProductMill().run()</code> </pre> <br>  Como se describe en uno de los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culos</a> , podemos omitir solo las fechas de reequilibrio en un ciclo y omitir los dem√°s d√≠as.  Pero luego perdemos estad√≠sticas sobre los cambios en los activos dentro del per√≠odo, no veremos rentabilidad y reducciones para cada d√≠a.  Este script, en detrimento de la velocidad, circula todos los d√≠as, lo que le permite ver el valor de mercado de las posiciones abiertas y aplicar un control de orden de detenci√≥n. <br><br><h3>  Reequilibrio </h3><br><pre> <code class="python hljs">StructuredProductMill().rebalance()</code> </pre> <br>  Aqu√≠, los activos que se pueden abrir se asignan al capital disponible.  Despu√©s de comparar el c√°lculo con las posiciones abiertas, las transacciones se ejecutan para el n√∫mero requerido: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#  :       balance = self._cash + self.position_balance(day) #         df = day.merge(self._positions[['quantity']], how='left', left_index=True, right_index=True) # ... #              day.loc[is_allow, 'size_order'] = day[is_allow]['size'] / day[is_allow]['size'].sum() #        day['position_to'] = (balance * day['size_order']) // day['open'] #     day['order'] = day['position_to'] - day['position'] # ... #   for symbol, row in day[fltr].iterrows(): self.trade(row['dt'], symbol, row.order, row.open, 'O' if row.order &gt; 0 else 'C')</span></span></code> </pre><br><h3>  Ofertas </h3><br><pre> <code class="python hljs">StructuredProductMill().trade()</code> </pre> <br>  Y aqu√≠, por velocidad, puede sacrificar detalles y controlar solo el cambio en la rentabilidad de cada posici√≥n.  Pero el script tiene en cuenta las comisiones y el valor de los activos, y tambi√©n mantiene un historial de transacciones, lo que le permite calcular transacciones y ejecutar una orden de detenci√≥n en cualquier d√≠a de la prueba.  Este m√©todo actualiza la posici√≥n y el tama√±o del cach√© libre. <br><br><h3>  Lanzamiento </h3><br>  Para ejecutar, debe especificar un conjunto de activos con recursos compartidos y par√°metros de prueba.  Probaremos los productos estructurales para el a√±o calendario: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   portfolio = {'MINT': 0.9, 'AAPL': 0.1,} #   SYMBOLS = list(portfolio.keys()) df = prices(SYMBOLS) params = { 'benchmark': 'SPY', #     'balance': 100_000, #   'portfolio': portfolio, 'rebalance_day': -1, #      'freq': 'year', #    'stop_loss': 0.1, # -  10% #          'reset_position_prices': True, 'allow_method': allow_default, 'start': pd.to_datetime('2011-01-01'), #   } #  ,      pm = StructuredProductMill(params, prices=prices(SYMBOLS + [params['benchmark']]), show_progress=True) pm.check_params().prepare() #   pm.run() #   pm.print_results(); #   pm.charts()</span></span></code> </pre><br>  En la parte inferior del cuaderno hay gr√°ficos con rentabilidad y reducciones en la fecha de reequilibrio (al final del a√±o), lo que confirma las reducciones extremadamente bajas de capital en el momento del informe y la rentabilidad en constante crecimiento.  Aunque esta rentabilidad pierde con el amplio √≠ndice de las empresas estadounidenses S&amp;P 500. <br><br><h2>  Resultados </h2><br>  Las pruebas incluyeron instrumentos estadounidenses de libre comercio desde 2011: <br><br><ul><li>  BIL - ETF para bonos del Tesoro a corto plazo con un rendimiento del 2% anual al momento de la emisi√≥n.  Recuerde que en el per√≠odo de 2009 a 2017, las tasas fueron cercanas a cero.  Una alternativa es utilizar MINT (un fondo para instrumentos de renta fija a corto plazo). </li><li>  AAPL - Stock de manzana. </li><li>  MSFT: acciones de Microsoft. </li><li>  TSLA - Acciones de Tesla. </li></ul><br><h3>  Aapl </h3><br>  Este dise√±o gener√≥ en 8 a√±os ingresos del 24% (2.6% anual promedio) con una reducci√≥n entre reequilibrios de -6%.  Pero al final de los a√±os, la reducci√≥n es de aproximadamente cero.  La parada no se toc√≥, el mercado con el 180% de los ingresos perdi√≥ el orden. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f3b/02c/db5/f3b02cdb51ee00dee623838a20da0ed5.png" alt="Rentabilidad y reducci√≥n para todos los d√≠as."><br><br>  Rentabilidad y reducci√≥n para cada d√≠a (rentabilidad a la izquierda, reducci√≥n a la derecha). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cf3/606/497/cf36064972efc96716ca5ce9b0408a9e.png" alt="Rentabilidad y reducci√≥n al final de los a√±os."><br><br>  Rentabilidad y reducci√≥n en la uni√≥n de a√±os (rentabilidad a la izquierda, reducci√≥n a la derecha). <br><br><h3>  Msft </h3><br>  Este dise√±o gener√≥ en 8 a√±os ingresos del 26% (promedio anual 2.75%) con una reducci√≥n entre reequilibrios de -2%.  En el cruce de a√±os, no hay reducci√≥n. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2f8/3cd/506/2f83cd5067fa388a85102ae73c8ac3f4.png" alt="Rentabilidad y reducci√≥n para todos los d√≠as."><br><br><img src="https://habrastorage.org/getpro/habr/post_images/4a6/c36/4d5/4a6c364d5fd322ff88688a8a2e63ed14.png" alt="Rentabilidad y reducci√≥n al final de los a√±os."><br><br><h3>  TSLA </h3><br>  Este dise√±o gener√≥ en 8 a√±os ingresos del 45% (4.6% anual promedio) con una reducci√≥n entre reequilibrios de hasta -15%.  Pero todo esto en 2013, cuando Tesla creci√≥ casi 5 veces.  Al final del a√±o, la reducci√≥n es de hasta -2%.  El pasajero m√°s agitado, pero tambi√©n rentable. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1c/e12/0c0/f1ce120c0f705d3346be336bc7b48cc8.png" alt="Rentabilidad y reducci√≥n para todos los d√≠as."><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f10/0e4/f6a/f100e4f6acf5154e8999ffe3a5ca6a4c.png" alt="Rentabilidad y reducci√≥n al final de los a√±os."><br><br><h2>  Conclusi√≥n </h2><br>  El Bloc de notas le permite probar cualquier composici√≥n de cartera.  Estos pueden ser fondos humerales o varias compa√±√≠as.  Aunque generalmente sin un activo de protecci√≥n. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Repositorio de GitHub</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/461583/">https://habr.com/ru/post/461583/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461569/index.html">Nota para el front-end: qu√© verificar antes de probar</a></li>
<li><a href="../461571/index.html">SVG en la vida real. Informe Yandex</a></li>
<li><a href="../461575/index.html">Creaci√≥n de una PBX basada en la nube 3CX en cualquier alojamiento compatible con Openstack</a></li>
<li><a href="../461577/index.html">Parte 5/2 Edif. 1: Crossroads of RocketChip Avenue y pista de instrumentaci√≥n resbaladiza</a></li>
<li><a href="../461579/index.html">WebMoney presenta nuevas billeteras WMP y cambia las reglas del juego</a></li>
<li><a href="../461587/index.html">Localizaci√≥n de la aplicaci√≥n en 10 pasos.</a></li>
<li><a href="../461589/index.html">Tic Tac Toe: Ciclo de contenido</a></li>
<li><a href="../461593/index.html">API en F #. Acceder a m√≥dulos de aplicaci√≥n basados ‚Äã‚Äãen roles</a></li>
<li><a href="../461595/index.html">De la teor√≠a a la pr√°ctica: c√≥mo los estudiantes universitarios de la facultad de fot√≥nica y optoinform√°tica estudian y trabajan</a></li>
<li><a href="../461601/index.html">Lo que un fundador no t√©cnico debe saber sobre el desarrollo de software</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>