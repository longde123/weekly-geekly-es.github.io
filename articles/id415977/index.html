<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ğŸ½ ğŸ‘©â€ğŸ¨ ğŸ“¡ Terowongan dan VPN Tahan DPI ğŸ‘• ğŸš¸ ğŸ‘”</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kita hidup di masa yang menarik. Saya bahkan akan mengatakan dengan cara yang luar biasa. Di satu sisi, kita melihat beberapa orang yang benar-benar i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Terowongan dan VPN Tahan DPI</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415977/"> Kita hidup di masa yang menarik.  Saya bahkan akan mengatakan dengan cara yang luar biasa.  Di satu sisi, kita melihat beberapa orang yang benar-benar ingin tahu apa yang orang lain bicarakan satu sama lain, dan benar-benar ingin memberi tahu mereka apa yang bisa dibaca dan yang tidak bisa dibaca.  Di sisi lain, warga negara yang ingin menegaskan hak mereka atas rahasia korespondensi pribadi dan informasi gratis, dan tidak ingin fakta-fakta korespondensi ini dan penerimaan informasi ini digunakan untuk melawan mereka.  Sejumlah besar situs pihak ketiga, layanan dan bisnis yang terkena "kunci karpet" menderita sebagai bonus. <br><br>  Tapi tidak, artikel ini bukan tentang masyarakat, tetapi tentang teknologi. <br><br><img src="https://habrastorage.org/webt/ai/x5/4v/aix54v5uoghgxq1dmmisvj-brke.jpeg" alt="gambar"><br><a name="habracut"></a><br>  Literasi teknis orang, berkat semua yang terjadi, juga berkembang.  Jika sebelumnya kata-kata "VPN" dan "proksi" hanya akrab dengan spesialis IT, sekarang bahkan ibu rumah tangga mengenal mereka, dan terlebih lagi, mereka menggunakan apa arti kata-kata ini. <br><br>  Secara umum, berita baru-baru ini datang cukup menghibur.  Misalnya, penyediaan layanan VPN dan sejenisnya untuk mengenkripsi lalu lintas dan memotong kunci <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sekarang dapat dihukum</a> , dan di Cina mereka biasanya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">memenjarakan mereka</a> karena hal ini.  Dan belum lama berselang, ILV mulai menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">analisis paket untuk memblokir</a> protokol MTProxy.  Anda juga dapat merujuk pada pengalaman negara-negara sesama yang paling sukses dalam hal-hal seperti: Cina, Iran, Kazakhstan, Venezuela.  Di Venezuela, misalnya, mereka secara langsung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">memblokir</a> koneksi langsung ke Tor dan mengacaukan lalu lintas ke jembatan.  Berdasarkan semua ini, kita dapat mengasumsikan bahwa masa depan menanti kita juga sangat menarik, terutama jika "orang yang bertanggung jawab" berhenti membuat kepura-puraan bodoh berulang-ulang, dan bertindak lebih pintar dan lebih canggih. <br><br>  Pada HabrÃ© berulang kali dalam komentar menyuarakan perkiraan tentang bagaimana perjuangan dengan teknologi enkripsi untuk warga biasa dapat berlanjut.  Menganalisis pemikiran yang disuarakan dan melihat kesaksian dari negara lain, saya mencoba menyarankan ke arah mana langkah-langkah untuk membatasi komunikasi dapat bergerak lebih jauh.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">DistortNeo</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">shifttstas</a> memunculkan beberapa ide yang lebih menarik, dan pada akhirnya saya berjanji pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">el777 untuk</a> menambahkan artikel ini. <br><br>  Dengan filter ACL, semuanya jelas.  Mereka bertindak sekarang, dan dengan berbagai keberhasilan mereka berhasil dan gagal untuk bertarung (walaupun ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ramalan</a> yang cukup <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pesimistis</a> ).  DPI lebih menarik. <br><br>  Metode "menentukan" jenis lalu lintas untuk DPI dapat dibagi menjadi dua kelompok: <br><br><ul><li>  Analisis tanda tangan.  Yaitu, membongkar paket "dengan tulang", membandingkan header dan struktur dengan sampel, dan dengan demikian menentukan tujuannya.  Dengan demikian, banyak terowongan terdeteksi, misalnya, OpenVPN, L2TP / IPSec, SOCKS, dll. </li><li>  Analisis awal dari pola pertukaran lalu lintas, misalnya, rasio aliran masuk / keluar, frekuensi permintaan-respons dan kriteria lainnya akan memungkinkan kita untuk memisahkan "lalu lintas nyata" dari suatu protokol dan terowongan yang hanya menyamar sebagai protokol. </li></ul><br><img src="https://habrastorage.org/webt/xj/a3/ny/xja3nye4iqnsser5zm2gxgbcjbq.jpeg" alt="gambar"><br><br>  Anda dapat memecah lalu lintas menjadi beberapa grup dan menganggap apa yang akan mereka lakukan dengan masing-masing. <br><br><ol><li>  <b>VPN, terowongan, dan proksi "Eksplisit" (OpenVPN, L2TP / IPSec, SOCKS, dll.)</b> VPN dan terowongan biasa mungkin diblokir secara otomatis, seperti, misalnya, ini terjadi di Cina dan Venezuela.  Jika beberapa organisasi atau perusahaan membutuhkannya untuk bekerja, biarkan mereka mendaftar dan memberikan sertifikasi, seperti yang dibicarakan oleh hukum Rusia di atas.  Dengan proxy, bahkan lebih mudah - HTTP itu, bahwa SOCKS mengirimkan alamat dan konten dalam teks yang jelas, yang umumnya tidak menciptakan masalah untuk â€œmemotongâ€ permintaan dan penyadapan informasi transmisi secara selektif. </li><li>  <b>Teknologi penggunaan ganda seperti SSH</b> .  Beberapa saat setelah sesi ditetapkan, kecepatan dipotong menjadi kura-kura, sehingga Anda masih bisa bekerja setidaknya di konsol, tetapi tidak ada lagi selancar dan unduhan.  Fakta bahwa ini menciptakan masalah selama kerja normal tidak mengganggu siapa pun (yang telah ditunjukkan kepada kami oleh ILV lebih dari sekali dalam beberapa kali terakhir). </li><li>  <b>Protokol yang sangat spesifik, seperti messenger, klien game, dll.</b> </li><li>  <b>Senyawa yang tipenya tidak dapat ditentukan</b> . </li></ol><br>  Untuk item 3 dan 4, "daftar putih" sangat mungkin (di mana, misalnya, subnet dari server game resmi atau utusan "yang benar" dimasukkan, dan semua yang ingin dinyatakan dan diatur oleh pemilik server sesuai kebutuhan sehingga tidak disentuh, dengan analogi dengan yang sudah dimiliki ILV untuk domain dan alamat IP).  Dan mereka yang tidak ada dalam daftar ini akan menghadapi nasib yang sama seperti paragraf 1 atau paragraf 2, meskipun sangat mungkin untuk tidak secara blak-blakan memblokir atau memotong kecepatan, tetapi untuk menganalisis pola pertukaran yang disebutkan sebelumnya untuk menentukan apakah lalu lintas â€œmurniâ€ "Atau" curiga. " <br><br>  Artinya, jika Anda ingin menyamarkan diri Anda sebagai protokol khusus, atau mengaburkan koneksi sehingga tidak mungkin untuk menentukan tipenya, Anda juga harus berhati-hati menciptakan "noise" yang mencegah deteksi pola pertukaran riil.  Sejauh ini, perkembangan seperti itu belum sampai ke mata saya. <br><br>  Anda bahkan tidak dapat mengingat tentang terowongan ICMP dan DNS yang berbeda - sejumlah besar lalu lintas "jika tidak diperlukan" secara otomatis juga menimbulkan kecurigaan. <br><br>  5. <b>TLS dan SSL, HTTPS</b> .  Tidak mungkin untuk memotong bersih, karena ini secara otomatis berarti memblokir seluruh Internet.  Analisis pola tidak masuk akal, karena berselancar di web hanyalah tujuan utama menggunakan HTTPS.  Dari semua hal di atas, SSL / TLS pada port 443 sepertinya merupakan opsi yang paling â€œtidak curigaâ€ dan dapat diandalkan.  Karena itu, mari kita coba menyamarkan diri kita sebagai dia. <br><br><img src="https://habrastorage.org/webt/sj/3u/2z/sj3u2zoggi2ofngemk1maytasyw.jpeg" alt="gambar"><br><br><h3>  Menyamarkan diri kita sendiri </h3><br>  Untuk pertimbangan, diputuskan untuk memilih solusi Streisand dan SoftEther. <br><br>  <a href="" rel="nofollow">Streisand</a> - seluruh rangkaian layanan berbeda: OpenConnect / AnyConnect, OpenVPN, stunnel, Shadowsocks, WireGuard.  Semua ini diatur dalam mode "turnkey" otomatis atau semi-otomatis, dan pada output pengguna menerima server yang dikonfigurasi, serta file dan dokumentasi terperinci untuk mengatur klien. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">SoftEther</a> adalah server VPN yang dapat mengangkat L2TP / IPsec, OpenVPN, SSTP, dan protokol lainnya, dan juga memiliki protokol SSL-VPN sendiri, yang, menurut penulis, tidak dapat dibedakan dari lalu lintas HTTPS normal. <br><br>  Jadi ... <br><br>  <b>OpenConnect / AnyConnect.</b>  Implementasi open source dari protokol SSL Cisco AnyConnect.  Ketika koneksi dibuat, tidak hanya paket TLS (TCP), tetapi juga paket DTLS (UDP) terlihat.  DTLS, pada prinsipnya, juga banyak digunakan di mana "untuk tujuan damai", tetapi ini sama sekali tidak seperti "HTTPS normal".  Namun, jika Anda memotong lalu lintas UDP di firewall, AnyConnect segera beralih kembali ke TCP dan dari tampilan luar, sekali lagi, sepenuhnya dan sepenuhnya seperti TLS normal, dan bahkan otentikasi di dalam terowongan terenkripsi hampir seperti di HTTP. <br><br>  <b>Shadowsocks</b> .  Proksi SOCKS terenkripsi.  Tampaknya, jika diinginkan, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">dapat dideteksi</a> , namun, ada plugin yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">menyamarkannya sebagai "HTTPS murni"</a> .  Ada juga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">plugin</a> untuk bekerja melalui soket web, tetapi lebih lanjut tentang itu nanti. <br><br>  <b>Wireguard</b>  Dilihat dari deskripsi, ini memiliki enkripsi yang sangat baik dan mekanisme pengaturan sesi, tetapi semua komunikasi terjadi melalui UDP.  Wireshark mendefinisikan jenis paket sebagai sesuatu yang sama sekali tidak terdengar, dan apa pendapat tentang apa yang terjadi dengan DPI pihak ketiga adalah pertanyaan yang sangat, sangat besar.  <b>Pembaruan:</b> Versi yang lebih baru mendefinisikan Wireguard secara unik sebagai Wireguard, sehingga jawaban atas pertanyaannya jelas. <br><br>  <b>obfs3, obfs4</b> .  Paket akan dikaburkan sehingga dari luar mereka terlihat seperti set nilai yang benar-benar acak.  Artinya, mereka termasuk dalam item 4 dari daftar di atas. <br><br>  <b>SoftEther</b>  Sepertinya HTTPS, tetapi dengan satu tangkapan.  Selain secara langsung TLS melalui TCP, secara aktif mengirimkan paket-paket paket UDP.  Seperti yang ditemukan dalam dokumentasi, UDP dapat digunakan untuk mempercepat transfer data dalam kasus ketika tidak terbunuh di firewall.  Fungsi ini dinonaktifkan dalam konfigurasi, dan setelah dinonaktifkan, semuanya menjadi sebagaimana mestinya. <br><br>  <b>SSTP</b> .  Prokotol VPN dari Microsoft.  Didukung secara asli pada Windows, perangkat lunak pendukung pada GNU / Linux.  Dari luar sepertinya HTTPS, dan Wireshark sepenuhnya mengkonfirmasi ini. <br><br><h3>  Tapi itu belum semuanya </h3><br>  Misalkan Anda menginstal server VPN atau ujung terowongan pada host dan mengkonfigurasinya untuk mendengarkan pada port 443.  Tampaknya semuanya baik-baik saja, tetapi ada satu TETAPI: jika kami menyamarkan diri sebagai HTTPS, Anda dapat memverifikasi bahwa sebenarnya hang pada port 443 hanya dengan mencoba mengubur diri Anda di port ini dengan browser sederhana atau CURL, atau dengan cara lain.  Dalam beberapa artikel, metode seperti ini disebut "koneksi utama", dan, sebagaimana disebutkan, sudah cukup digunakan di Cina. <br><br>  Oleh karena itu, kita perlu bahwa pada port ke-443 kita memiliki server web yang paling biasa dan layak.  Dan di sini muncul masalah yang menarik. <br><br>  Tidak satu pun dari layanan di atas dalam dokumentasi utama yang menemukan deskripsi mekanisme kerja berbagi port.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Opsi SSLH</a> tidak cocok, jika hanya karena sslh tidak dapat berbagi lalu lintas antara HTTPS dan layanan di atas.  Paling tidak, karena jika jenis traffic tanpa dekripsi penuh bisa membedakan sslh, maka DPI akan bisa. <br><br>  Sebagian besar orang, seperti <a href="" rel="nofollow">ini</a> , menyarankan untuk menggunakan Server Name Indication (SNI) - ekstensi TLS yang memungkinkan Anda menentukan nama host, dan kemudian menggunakan HAProxy, sniproxy, dan alat lain untuk menyebarkan koneksi untuk layanan.  Masalahnya adalah bahwa dalam implementasi TLS modern, nama host yang ditentukan ketika menggunakan SNI ditransmisikan dalam teks biasa, yaitu, dalam bentuk tidak terenkripsi, dan, karenanya, juga dapat dimata-matai dan digunakan di masa depan. <br><br>  Karena itu, kami akan berimprovisasi, dan kemudian dua pilihan muncul di benak saya. <br><br><h4>  Mengetuk port </h4><br><img src="https://habrastorage.org/webt/54/_n/v7/54_nv7qxgj4idvoek-ooxn6r6ju.jpeg" alt="gambar"><br><br>  Port knocking hanya dirancang untuk mengaktifkan "layanan tersembunyi" di server.  Misalnya, dengan cara yang serupa, port tempat daemon SSH hang sering ditutup "keluar" untuk menghindari kekerasan dan penggunaan kerentanan 0-hari.  Dalam versi klasik (lihat, misalnya, penerapan daemon knockd), mengetuk biasanya dipahami sebagai upaya untuk membangun koneksi atau mengirim paket ke port host tertentu dalam urutan tertentu, sebagai akibatnya daemon â€œmengenaliâ€ Anda sebagai miliknya dan mengaktifkan aturan firewall yang memungkinkan akses ke port tertentu hanya dari IP Anda. <br><br>  Dalam kasus kami, opsi ini tidak sepenuhnya dapat diterima.  Pertama, port â€œnon-standarâ€ itu sendiri mungkin diblokir di suatu tempat di sepanjang jalan, dan kedua, prosedur itu sendiri, ketika dianalisis dari luar, mungkin terlihat mencurigakan.  Karena kita menyamar sebagai HTTPS, kita perlu â€œmengetukâ€ HTTPS. <br><br>  Anehnya, tidak ada pengetuk HTTP / HTTPS dengan fungsi yang diperlukan, dan karenanya seorang nocker dilahirkan dengan nama romantis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">Labean</a> (hussars, tetap diam!). <br><br>  Diberikan: server kami, tempat Nginx beroperasi pada port 443 dengan sertifikat yang dikonfigurasi dengan benar dan menampilkan beberapa konten yang sama sekali tidak berbahaya, misalnya, GIF dengan kucing, gambar ISO dari distribusi GNU / Linux, atau cermin Wikipedia dan perpustakaan Moshkov. <br><br>  Pada saat yang sama, garis-garis bentuk bersembunyi di konfigurasi Nginx <br><br><pre><code class="nginx hljs"> <span class="hljs-attribute"><span class="hljs-attribute">location</span></span> <span class="hljs-regexp"><span class="hljs-regexp">~ ^/somesecret/(.*)</span></span> {
    <span class="hljs-attribute"><span class="hljs-attribute">auth_basic</span></span>      <span class="hljs-string"><span class="hljs-string">"Administrator Login"</span></span>;
    <span class="hljs-attribute"><span class="hljs-attribute">auth_basic_user_file</span></span>  /var/www/.htpasswd;
    <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span>  X-Real-IP  <span class="hljs-variable"><span class="hljs-variable">$remote_addr</span></span>;
    <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass</span></span> http://127.0.0.1:8080/<span class="hljs-variable"><span class="hljs-variable">$1</span></span>;
  }
</code></pre><br>
      ,       CURL'   <br>
<code>https://ourserver.org/somesecret/vpn/on</code><br>
  ,   ,     ,           IP-,  - <br>
<code>iptables -t nat -A PREROUTING -p tcp -s {clientIP} --dport 443 -j REDIRECT --to-port 4443</code><br>
    .<br>
<br>
  N  (,   )  ,    ,        ,         IP       .<br>
<br>
     ,    ,  URL   ,   /off  .<br>
<br>
       ,     IPv6 (v6-    X-Real-IP  ).<br>
<br>
   Go,    ,   ,    . ,      nginx  init-    Gihub:<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">https://github.com/uprt/labean</a><br>
<br>
<h4>Websockets</h4><br>
<img src="https://habrastorage.org/webt/as/nw/yn/asnwynceu_p8gghmcgf13e3ryiq.jpeg" alt="image"><br>
<br>
     :      HTTPS â€”    .  Web-         TCP    ,    Websocket (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">RFC 6455</a>).    HTTP-,      ,             TCP-.  , ,       HTTPS       .<br>
<br>
      WS  ,  - â€”    ,     CDN, , Cloudflare    .  ,        :    IP  CDN/proxy          CDN,          VPN/proxy   CDN,       .<br>
<br>
 WS-   (    Haskell),     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">wstunnel</a>,   nodejs   ,       .<br>
<br>
       .       wss://-, <br>
<br>
<pre><code class="bash hljs">wstunnel -t 33 wss://server:443</code></pre><br>
   ,  Â«Â» ws-      Â«Â» .   wstunnel,    ,      URI    -  :<br>
<br>
<pre><code class="bash hljs">wstunnel -t 33 wss://ourserver.org:443/hiddenws/</code></pre><br>
  :     <br>
<br>
   ,    443   Nginx c -  . <br>
<br>
    proxy-   Websockets-:<br>
<br>
<pre><code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">location</span></span> /hiddenws {
    <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass</span></span> http://127.0.0.1:8081;
    <span class="hljs-attribute"><span class="hljs-attribute">proxy_http_version</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>;
    <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Upgrade <span class="hljs-variable"><span class="hljs-variable">$http_upgrade</span></span>;
    <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Connection <span class="hljs-string"><span class="hljs-string">"Upgrade"</span></span>;
  }</code></pre><br>
        websockets-.        SOCKS- (, Dante),  OpenVPN, ,   ,    .<br>
<br>
<div class="spoiler"><b class="spoiler_title"> selinux</b><div class="spoiler_text">   RHEL  ,   SELinux,    nginx   <br>
<code>2018/07/05 13:28:03 [crit] 7724#0: *11 connect() to 127.0.0.1:8081 failed (13: Permission denied) while connecting to upstream, client: IP_ADDRES, server: _, request: Â«GET /hiddenws/?dst=localhost:22 HTTP/1.1Â», upstream: Â«127.0.0.1:8081/hiddenws/?dst=localhost:22Â»,</code><br>
<br>
        :<br>
<br>
<pre><code class="bash hljs">semanage port -a -t http_port_t -p tcp 22
semanage port -m -t http_port_t -p tcp 22
semanage port -a -t http_port_t -p tcp 8081</code></pre><br>
<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Renatk</a>        .<br>
</div></div><br>
<br>
    â€”   SOCKS-  VPN-       wstunnel,           Â«Â» .<br>
<br>
 ,   v2ray  shadowcocks,   websockets    shadowsocks.    : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">https://github.com/shadowsocks/v2ray-plugin</a><br>
<br>
<h3> </h3><br>
 â€”   VPN- -   MTU,  1400;<br>
 â€”   VPN- 2 IP-.        VPN/,       ;<br>
 â€”  Â«Â» IP-   ,    ICMP ping;<br>
 â€”     -  reverse DNS ,     -, , gateway-001.somehomeisp.net;<br>
 â€”      VPN/  DNS- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"> OpenNIC</a>;<br>
         (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"> </a>).<br>
<br>
<h3> </h3><br>
<img src="https://habrastorage.org/webt/dz/mp/tf/dzmptf35twb-e_wzib77grk3ksq.jpeg" alt="image"><br>
<br>
      - ,     â€”  .     ,   ,   â€”   ,    ,   . ,   HTTPS      â€” ,     ,    -    Â«   Â»/   /etc.,  ,      Â« Â»,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   </a>. <br>
<br>
 ,  ,   ,            ,     â€”  ,   ,    ,   . <br>
 .</div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id415977/">https://habr.com/ru/post/id415977/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id415965/index.html">Apa yang harus dibaca pada bulan Juli: 19 buku baru untuk para profesional digital</a></li>
<li><a href="../id415967/index.html">SolidFire - Penyimpanan untuk penyimpanan ** cking hate</a></li>
<li><a href="../id415969/index.html">HyperX Pulsefire Surge RGB - pembunuh alami</a></li>
<li><a href="../id415973/index.html">Bagaimana tidak memecah gugus Apache Ignite dari awal</a></li>
<li><a href="../id415975/index.html">Cina memperkenalkan senjata laser dengan jangkauan hampir satu kilometer</a></li>
<li><a href="../id415979/index.html">Security Week 24: Rowhammer di Android dan kerumitan kerentanan perangkat keras</a></li>
<li><a href="../id415981/index.html">Google dan HTTP</a></li>
<li><a href="../id415983/index.html">Early Universe 5. Redshift kosmologis dan dinamika semesta yang mengembang seragam, bagian 1</a></li>
<li><a href="../id415987/index.html">QA-meetup SuperJob</a></li>
<li><a href="../id415989/index.html">Analisis penggunaan tanda tangan digital: 10 dari 15 cryptocurrency teratas tidak menandatangani perangkat lunak</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>