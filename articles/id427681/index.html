<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙇🏿 🧖🏿 📞 Seret dan Geser di RecyclerView. Bagian 1: ItemTouchHelper 🛌🏾 🤛🏾 💌</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ada banyak tutorial, pustaka, dan implementasi seret & lepas dan geser ke untuk mengabaikan di Android menggunakan RecyclerView. Sebagian besar dari m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Seret dan Geser di RecyclerView. Bagian 1: ItemTouchHelper</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427681/"><p><img src="https://habrastorage.org/getpro/habr/post_images/653/3cc/153/6533cc1537bc7458a4d98ac6719eb137.jpg" alt="Seret dan Geser di RecyclerView. Bagian 1: ItemTouchHelper"></p><br><p> Ada banyak tutorial, pustaka, dan <strong>implementasi</strong> <strong>seret &amp; lepas</strong> dan <strong>geser ke untuk mengabaikan</strong> di Android menggunakan RecyclerView.  Sebagian besar dari mereka masih menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">View.OnDragListener yang</a> sudah usang dan pendekatan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SwipeToDismiss yang</a> dikembangkan oleh Roman Nurik.  Meskipun metode baru dan lebih efektif sudah tersedia.  Sangat sedikit yang menggunakan API terbaru, sering mengandalkan <code>GestureDetectors</code> dan <code>onInterceptTouchEvent</code> atau implementasi lebih kompleks lainnya.  Sebenarnya, ada cara yang sangat sederhana untuk menambahkan fungsi-fungsi ini ke <code>RecyclerView</code> .  Ini hanya membutuhkan satu kelas, yang juga merupakan bagian dari Perpustakaan Dukungan Android. </p><a name="habracut"></a><br><h2 id="itemtouchhelper">  ItemTouchHelper </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ItemTouchHelper</a> adalah utilitas tangguh yang menangani semua yang perlu Anda lakukan untuk menambahkan <strong>fungsi</strong> <strong>seret &amp; lepas</strong> dan <strong>gesek ke abaikan</strong> ke <code>RecyclerView</code> .  Utilitas ini adalah subkelas dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RecyclerView.ItemDecoration</a> , membuatnya mudah untuk ditambahkan ke hampir semua <code>LayoutManager</code> dan adaptor yang ada.  Ini juga bekerja dengan animasi elemen dan menyediakan kemampuan untuk menarik dan melepas elemen dari satu jenis ke tempat lain dalam daftar dan banyak lagi.  Pada artikel ini, saya akan menunjukkan implementasi sederhana dari <code>ItemTouchHelper</code> .  Nantinya, sebagai bagian dari seri artikel ini, kami akan memperluas cakupan dan mempertimbangkan opsi lain. </p><br><p>  <strong>Catatan</strong>  Ingin melihat hasilnya segera?  Lihat Github: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Android-ItemTouchHelper-Demo</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Komit pertama</a> berkaitan dengan artikel ini.  File demo <code>.apk</code> dapat diunduh di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4e2/e2e/5a9/4e2e2e5a99d0a21d253abee67a81d033.gif" alt="Contoh"></p><br><h3 id="nastroyka">  Kustomisasi </h3><br><p>  Pertama, kita perlu mengkonfigurasi <code>RecyclerView</code> .  Jika Anda belum melakukannya, tambahkan ketergantungan <code>RecyclerView</code> ke file <code>build.gradle</code> Anda. </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">compile</span></span> <span class="hljs-string"><span class="hljs-string">'com.android.support:recyclerview-v7:22.2.0'</span></span></code> </pre> <br><p>  <code>ItemTouchHelper</code> akan bekerja dengan hampir semua <code>RecyclerView.Adapter</code> dan <code>LayoutManager</code> , tetapi artikel ini didasarkan pada contoh menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">file-file ini</a> . </p><br><h3 id="ispolzovanie-itemtouchhelper-i-itemtouchhelpercallback">  Menggunakan ItemTouchHelper dan ItemTouchHelper.Callback </h3><br><p>  Untuk menggunakan <code>ItemTouchHelper</code> , Anda harus membuat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ItemTouchHelper.Callback</a> .  Ini adalah antarmuka yang memungkinkan Anda melacak tindakan gerakan ( <em>eng.</em> Move) dan swipe ( <em>eng.</em> Swipe).  Selain itu, di sini Anda dapat mengontrol status komponen <code>view</code> dipilih dan mengganti animasi default.  Ada kelas pembantu yang bisa Anda gunakan jika Anda ingin menggunakan implementasi dasar, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SimpleCallback</a> .  Tetapi untuk memahami bagaimana ini bekerja dalam praktiknya, kami akan melakukan semuanya sendiri. </p><br><p>  Fungsi utama antarmuka yang harus kita definisikan ulang untuk memasukkan fungsionalitas dasar <strong>drag &amp; drop</strong> dan <strong>swipe-to-dismiss</strong> : </p><br><pre> <code class="java hljs">getMovementFlags(RecyclerView, ViewHolder) onMove(RecyclerView, ViewHolder, ViewHolder) onSwiped(ViewHolder, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)</code> </pre> <br><p>  Kami juga akan menggunakan beberapa metode pembantu: </p><br><pre> <code class="java hljs">isLongPressDragEnabled() isItemViewSwipeEnabled()</code> </pre> <br><p>  Mari kita pertimbangkan satu per satu. </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMovementFlags</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> dragFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> swipeFlags = ItemTouchHelper.START | ItemTouchHelper.END; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> makeMovementFlags(dragFlags, swipeFlags); }</code> </pre> <br><p>  <code>ItemTouchHelper</code> memudahkan untuk menentukan arah suatu acara.  Anda perlu mengganti metode <code>getMovementFlags()</code> untuk menunjukkan arah mana yang akan didukung dan diseret.  Untuk membuat flag kembali, gunakan metode helper <code>ItemTouchHelper.makeMovementFlags(int, int)</code> .  Dalam contoh ini, kami mengizinkan seret dan lepas di kedua arah. </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isLongPressDragEnabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }</code> </pre> <br><p>  <code>ItemTouchHelper</code> hanya dapat digunakan untuk drag and drop tanpa fungsi swipe (atau sebaliknya), jadi Anda harus menentukan dengan tepat fitur mana yang harus didukung.  Metode <code>isLongPressDragEnabled()</code> harus mengembalikan <code>true</code> untuk mendukung drag and drop setelah mengklik panjang pada elemen <code>RecyclerView</code> .  Atau, Anda dapat memanggil metode <code>ItemTouchHelper.startDrag(RecyclerView.ViewHolder)</code> untuk mulai menyeret secara manual.  Kami akan mempertimbangkan opsi ini nanti. </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isItemViewSwipeEnabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }</code> </pre> <br><p>  Untuk mengaktifkan mencambuk setelah menyentuh di mana saja dalam komponen <code>view</code> , cukup kembalikan <code>true</code> dari metode <code>isItemViewSwipeEnabled()</code> .  Atau, Anda dapat memanggil metode <code>ItemTouchHelper.startSwipe(RecyclerView.ViewHolder)</code> untuk memulai gesek secara manual. </p><br><p>  Dua metode berikut ini, <code>onMove()</code> dan <code>onSwiped()</code> , diperlukan untuk memberi tahu Anda tentang pembaruan data.  Jadi, pertama-tama kita akan membuat antarmuka yang memungkinkan acara-acara ini diteruskan di sepanjang rantai panggilan. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><em>ItemTouchHelperAdapter.java</em></a> </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemTouchHelperAdapter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onItemMove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fromPosition, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> toPosition)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onItemDismiss</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> position)</span></span></span></span>; }</code> </pre> <br><p>  Cara termudah untuk melakukan ini adalah memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RecyclerListAdapter</a> mengimplementasikan pendengar. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RecyclerListAdapter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RecyclerView</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Adapter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemViewHolder</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemTouchHelperAdapter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ...   [](https://gist.github.com/iPaulPro/2216ea5e14818056cfcc#file-recyclerlistadapter-java) @Override public void onItemDismiss(int position) { mItems.remove(position); notifyItemRemoved(position); } @Override public boolean onItemMove(int fromPosition, int toPosition) { if (fromPosition &lt; toPosition) { for (int i = fromPosition; i &lt; toPosition; i++) { Collections.swap(mItems, i, i + 1); } } else { for (int i = fromPosition; i &gt; toPosition; i--) { Collections.swap(mItems, i, i - 1); } } notifyItemMoved(fromPosition, toPosition); return true; }</span></span></code> </pre> <br><p>  Sangat penting untuk memanggil metode <code>notifyItemRemoved()</code> dan <code>notifyItemMoved()</code> sehingga adaptor melihat perubahannya.  Perlu juga dicatat bahwa kita mengubah posisi elemen setiap kali komponen <code>view</code> bergeser ke indeks baru, dan <strong>tidak di akhir gerakan (peristiwa "drop")</strong> . </p><br><p>  Sekarang kita dapat kembali membuat <code>SimpleItemTouchHelperCallback</code> , karena kita masih perlu mengganti metode <code>onMove()</code> dan <code>onSwiped()</code> .  Pertama-tama tambahkan konstruktor dan bidang untuk adaptor: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ItemTouchHelperAdapter mAdapter; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SimpleItemTouchHelperCallback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( ItemTouchHelperAdapter adapter)</span></span></span><span class="hljs-function"> </span></span>{ mAdapter = adapter; }</code> </pre> <br><p>  Kemudian definisikan kembali acara yang tersisa dan laporkan ini ke adaptor: </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target)</span></span></span><span class="hljs-function"> </span></span>{ mAdapter.onItemMove(viewHolder.getAdapterPosition(), target.getAdapterPosition()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSwiped</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(RecyclerView.ViewHolder viewHolder, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> direction)</span></span></span><span class="hljs-function"> </span></span>{ mAdapter.onItemDismiss(viewHolder.getAdapterPosition()); }</code> </pre> <br><p>  Akibatnya, kelas <code>Callback</code> akan terlihat seperti ini: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SimpleItemTouchHelperCallback</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemTouchHelper</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Callback</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ItemTouchHelperAdapter mAdapter; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SimpleItemTouchHelperCallback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ItemTouchHelperAdapter adapter)</span></span></span><span class="hljs-function"> </span></span>{ mAdapter = adapter; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isLongPressDragEnabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isItemViewSwipeEnabled</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMovementFlags</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(RecyclerView recyclerView, ViewHolder viewHolder)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> dragFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> swipeFlags = ItemTouchHelper.START | ItemTouchHelper.END; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> makeMovementFlags(dragFlags, swipeFlags); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(RecyclerView recyclerView, ViewHolder viewHolder, ViewHolder target)</span></span></span><span class="hljs-function"> </span></span>{ mAdapter.onItemMove(viewHolder.getAdapterPosition(), target.getAdapterPosition()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSwiped</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ViewHolder viewHolder, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> direction)</span></span></span><span class="hljs-function"> </span></span>{ mAdapter.onItemDismiss(viewHolder.getAdapterPosition()); } }</code> </pre> <br><p>  Ketika Callback siap, kita dapat membuat <code>ItemTouchHelper</code> dan memanggil metode <code>attachToRecyclerView(RecyclerView)</code> (misalnya, di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MainFragment.java</a> ): </p><br><pre> <code class="java hljs">ItemTouchHelper.Callback callback = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleItemTouchHelperCallback(adapter); ItemTouchHelper touchHelper = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ItemTouchHelper(callback); touchHelper.attachToRecyclerView(recyclerView);</code> </pre> <br><p>  Setelah memulai, Anda harus mendapatkan sesuatu seperti berikut: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/483/3a5/ae8/4833a5ae88e5e309a2b5eec6bc8a2acf.gif" alt="Hasil"></p><br><h2 id="zaklyuchenie">  Kesimpulan </h2><br><p>  Ini adalah implementasi <code>ItemTouchHelper</code> paling disederhanakan.  Namun, Anda mungkin memperhatikan bahwa Anda tidak harus menggunakan pustaka pihak ketiga untuk mengimplementasikan tindakan <strong>seret &amp; lepaskan</strong> standar dan <strong>gesek-ke-abaikan</strong> di <code>RecyclerView</code> .  Di bagian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">selanjutnya,</a> kita akan lebih memperhatikan penampilan elemen pada saat drag and drop. </p><br><h2 id="ishodnyy-kod">  Kode sumber </h2><br><p>  Saya membuat proyek di GitHub untuk menunjukkan apa yang tercakup dalam seri artikel ini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Android-ItemTouchHelper-Demo</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Komit pertama</a> terutama berkaitan dengan bagian ini dan sedikit ke yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kedua</a> . </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">→ Seret dan Gesek di RecyclerView.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 2: pengontrol seret dan lepas, kisi, dan animasi khusus</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id427681/">https://habr.com/ru/post/id427681/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id427669/index.html">Kontrol Rumah KNX: Pencahayaan</a></li>
<li><a href="../id427671/index.html">Sberbank dan Yandex secara resmi meluncurkan platform perdagangan Beru, Amazon versi Rusia</a></li>
<li><a href="../id427673/index.html">Pembelajaran mesin @ booking.com</a></li>
<li><a href="../id427675/index.html">Tolong, makalah. Bagaimana jaringan saraf membantu kami memverifikasi pelanggan dan menangkap scammers</a></li>
<li><a href="../id427679/index.html">Mengabaikan batas pembelian bebas bea akan memakan waktu satu setengah tahun, jika keputusan dibuat</a></li>
<li><a href="../id427683/index.html">Mengapa porting over integer overflow bukanlah ide yang baik</a></li>
<li><a href="../id427685/index.html">FSB terhadap Internet satelit dari operator asing</a></li>
<li><a href="../id427687/index.html">Referensi untuk aplikasi bisnis | Arsitektur DentalTap</a></li>
<li><a href="../id427689/index.html">Bir langsung dari awan</a></li>
<li><a href="../id427691/index.html">Membuat bot obrolan sederhana di VK di Python 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>