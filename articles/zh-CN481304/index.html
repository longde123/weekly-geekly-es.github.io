<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐗 🎬 👩🏾‍🚀 美国国旗排序 👨🏽‍🏫 🌘 👩🏿‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="要了解这种“多波段”分类的操作原理，以带有三个条纹的标志为例比较容易上手。 并且为了轻松处理三色标志，最好先了解一下它在二色示例中的工作方式。 并处理两种颜色...   
 本文是在EDISON的支持下编写的。 

 我们从事软件的移植和迁移 ，以及Android和iOS移动应用程序的开发 。 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>美国国旗排序</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/edison/blog/481304/"><div style="text-align:center;"><img width="690" height="410" src="https://habrastorage.org/webt/3c/qf/bc/3cqfbc2j6t1knu0g3onxuvrgve8.png"></div><br> 要了解这种“多波段”分类的操作原理，以带有三个条纹的标志为例比较容易上手。 并且为了轻松处理三色标志，最好先了解一下它在二色示例中的工作方式。  <s>并处理两种颜色...</s> <a name="habracut"></a><blockquote> <a href="https://www.edsd.ru/" title="EDISON软件-网络开发"><img align="left" width="153" height="75" src="https://habrastorage.org/webt/w0/zl/to/w0zltoxvysbr0yeinstkfvw1wbg.png" alt="EDISON软件-网络开发"></a> <br clear="right"> 本文是在EDISON的支持下编写的。 <br><br> 我们从事<a href="https://www.edsd.ru/ru/uslugi/portirovanie-i-migracija">软件的移植和迁移</a> ，以及<a href="https://www.edsd.ru/ru/proekty/mobilnye_prilozhenija">Android和iOS移动应用程序</a>的<a href="https://www.edsd.ru/ru/proekty/mobilnye_prilozhenija">开发</a> 。 <br><br> 我们喜欢算法理论！  ;-) </blockquote><h2> 两色旗 </h2><br><img align="left" width="210" height="140" src="https://habrastorage.org/webt/rw/ya/rz/rwyarz78jggve0idacvf3k6jxs0.png"><br clear="right"> 首先，考虑排序数组中的数字仅以两位分配的情况。 为了简单起见，我们假设我们有一个零（低阶）和一个（高阶）数组。 <br><br> 因此，我们只有两个“带”：一个将移动最低有效位（零），而另一个将移动最高位（单位）。 任何两个颜色的标志都将进行演示。 例如，乌克兰的国旗。 <br><br><img width="740" height="94" src="https://habrastorage.org/webt/av/g1/6q/avg16qxef8rxv9etteutswrkrke.gif"><br><br> 这是怎么回事 由于在第一阶段尚不知道有多少个零和我们有多少个单位，因此不清楚每个“带”的最终大小。 因此，我们在数组的键上放置了两个指针。 对于低阶，指针设置为数组的开头，对于高阶，指针设置为结尾。 然后，我们从左到右单次遍历数组，并查看每个位元素。 <br><br> 如果在传递过程中某个元素等于最高顺序，则第二个指针会告诉我们该元素的传递位置（我们进行交换）。 插入下一个元素的指针向左移动，高级数字的“条”已扩展。 <br><br> 如果它等于最低有效位，则将其指针向右移动一个元素。 由于我们只有两位数，因此不必转移元素，因为它已经存在。 较年轻类别的“条带”自然变宽了。 <br><br> 结果，两个指向彼此的指针将在一个点上碰撞，并且放电将在其“带”中排序。 同时，您将不需要遍历整个数组-当指针在中间的某个地方相遇时，算法将完成其工作。 <br><br><h2> 荷兰国旗问题::荷兰国旗问题 </h2><br><img align="left" width="210" height="140" src="https://habrastorage.org/webt/qq/cm/rv/qqcmrvjuvvyqo7ihytacypnh1li.png"><br clear="right"> 我们使任务稍微复杂化，不考虑两位数，而是考虑三位数字。 让我们让数组的元素属于最低（零），中间（单位）和高级（两个）数字。 <br><br> 为了演示，我们以<s>法国，</s> <s>俄罗斯</s> <s>卢森堡，</s>荷兰的<s>石勒苏益格-戈尔德斯坦</s>的三向红白蓝旗<s>标为准</s> 。 为什么是荷兰的国旗呢？ 因为Edsger Dijkstra在有关该标志示例的演讲中检查了相应的算法，该算法被称为“荷兰国旗的任务”。 <br><br><img width="735" height="95" src="https://habrastorage.org/webt/yl/hy/b6/ylhyb69kavw2mki9nmk0_idsxcq.gif"><br><br> 如您所见，没有什么特别新的东西。 每个类别都有其自己的指针。 最初，初中和中级的标签占据数组开头的起始位置，并在遇到相应元素时向右移动。 高阶指针首先在数组的末尾，并向左移动。 <br><br> 实际上，通过数组也将是不完整的，如果位或多或少均匀地分布，则该算法将通过数组的2/3，然后将所有元素散布在其“带”中。 <br><br><h2> 美国国旗分类::美国国旗分类 </h2><br><img align="left" width="285" height="150" src="https://habrastorage.org/webt/2u/bb/hq/2ubbhq_rmqqxo6hj9blipmfppnq.png"><br clear="right"> 现在，在我们的解释中，我们可以继续使用多频段美国国旗。 <br><br> 当我们没有两个，不是三个，而是任意数量的数字时，我们确定每个数字应从何处开始（其“带”），并在其“带”中重新绘制元素。 <br><br> 在此算法中，数字通常不视为小数，而是以不同的数字表示，通常是2的幂。 通常，数字256被用作位深度的基础（比128小一些），这使您可以有效地进行排序以排列字符串。 对于位深度的数字，较小的2 <sup>n</sup> （2、4、16等）更方便，它允许您通过按位移位进行比较，而不是在比较十进制数字时提高幂。 <br><br> 动画显示了一个基数为16的位深度的示例： <br><br><img width="740" height="328" src="https://habrastorage.org/webt/tm/mf/lk/tmmflkyrfqa3bqrlucv8y-rzcfk.gif"><br><br><ol><li> 在第一遍-搜索最大值，以便确定阵列中元素之间的最大位数（以便从元素中正确提取从帐户中确定的位数）。 </li><li> 然后发生递归处理。 调用时，将指示子数组和当前处理位的边界。 第一次调用时，整个数组是一个子数组；左侧的第一位被占用。 </li><li> 在子数组的元素中，将执行初始计算-当前类别中每个数字出现多少次。 通过此计数，您可以确定这些数字位数的位置（即，已知要将特定数字中具有下一个数字的元素移至“带”的范围和位置）。 实际上，本地化是指向“带”的指针，在这些带中需要移动相应的元素。 </li><li> 根据本地化指针，将在现场进行交换-类别中的数字显示您要向其发送元素的位置，与之发生交换的另一个元素将发生位置。 该子句将一直执行，直到在下一次交换中不存在从另一个位置到达的元素为止（然后您可以移至子数组的下一个元素，并类似地对其执行此子句）。 </li><li> 作为交换的结果，元素通过下一个数字中的数字重新分配到块中，然后进行递归-将相同的算法作为子数组应用于每个块，下一个作为当前数字。 </li></ol><br> 在关于<a href="https://habr.com/ru/post/478654/">对具有近似分布的排序进行计数</a>的文章中<a href="https://habr.com/ru/post/478654/">，</a>有一种视觉上非常相似的算法- <b>近似排序</b> 。 在那里，我们计算了数组中每个数字出现了多少次-并根据获得的位置重新分配了元素。 在这里，我们考虑子数组元素中类别中的每个数字出现多少次-并根据获得的位置重新分配子数组中的元素。 如果近似值是一种计数排序，则“ American”是计数位排序。 <br><br><div class="spoiler">  <b class="spoiler_title">美国国旗排序-Python实现</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#           def get_radix_val(x, digit, radix) -&gt; int: return int(floor(x / radix**digit)) % radix #             def compute_offsets(a_list, start: int, end: int, digit, radix) -&gt; list: #          counts = [0 for _ in range(radix)] for i in range(start, end): #        #         val = get_radix_val(a_list[i], digit, radix) counts[val] += 1 #       #          offsets = [0 for _ in range(radix)] sum = 0 #         for i in range(radix): offsets[i] = sum sum += counts[i] return offsets #      def swap(a_list, offsets, start: int, end: int, digit, radix) -&gt; None: i = start #          next_free = copy(offsets) #        #   (       ) cur_block = 0 while cur_block &lt; radix-1: # if i &gt;= start + offsets[cur_block+1]: cur_block += 1 continue radix_val = get_radix_val(a_list[i], digit, radix) if radix_val == cur_block: i += 1 continue swap_to = next_free[radix_val] a_list[i], a_list[swap_to] = a_list[swap_to], a_list[i] next_free[radix_val] += 1 #   def american_flag_sort_helper(a_list, start: int, end: int, digit, radix) -&gt; None: #          offsets = compute_offsets(a_list, start, end, digit, radix) #      swap(a_list, offsets, start, end, digit, radix) if digit == 0: #     ? return #   #       for i in range(len(offsets)-1): #      #         american_flag_sort_helper(a_list, offsets[i], offsets[i+1], digit-1, radix) #   def american_flag_sort(a_list, radix) -&gt; None: #,         for x in a_list: assert(type(x) == int) #    max_val = max(a_list) #    (  ) max_digit = int(floor(log(max_val, radix))) #   -     american_flag_sort_helper(a_list, 0, len(a_list), max_digit, radix)</span></span></code> </pre> </div></div><br><h2> 斯卡排序::斯卡排序 </h2><br> 德国程序员Malte Skarupke宣布，他已经开发出一种新的排序算法，该算法是一种经过彻底改进的“美国国旗”，其性能优于<b>std :: sort</b>平均2倍（std :: sort-这种算法也称为<b>自省排序）</b> - <b>快速排序</b>和<b>按堆</b> <b>排序</b>的混合）。 <br><br><ol><li> 递归地对数组进行排序，在递归的第一级，将整个数组作为子数组。 </li><li> 如果子数组少于128个元素，则为其调用std :: sort。 </li><li> 如果子数组包含128到1024个元素，则将对其进行美国国旗排序。 </li><li> 如果子数组中有超过1024个元素，则需要进行ska排序。 </li><li> 另外，为避免最坏的情况，如果递归嵌套太大（超过16个级别），即使子数组中有128个以上的元素，该算法也会切换到<nobr>std :: sort</nobr> 。 </li></ol><br> 显然，它是一种非常有效的算法，同时又非常复杂-其作者的实现几乎需要一行5,000行。 也许有一天我们会考虑进行这种排序，现在我们不再赘述。 有兴趣的人可以点击下面的链接。 <br><br><h2> 参考文献 </h2><br><img width="30" height="30" src="https://habrastorage.org/webt/3y/wq/mh/3ywqmhuo7fv68jggkc416kbzuw4.png">  <a href="https://en.wikipedia.org/wiki/Dutch_national_flag_problem">荷兰国旗问题</a> ， <a href="https://en.wikipedia.org/wiki/American_flag_sort">美国国旗排序</a> <br><br>  <b>ska排序：</b> <img width="30" height="30" src="https://habrastorage.org/webt/-p/f7/fs/-pf7fshzu943ul4yvkrw2f4dv1g.png"> 我编写了一种更快的排序算法（ <a href="https://probablydance.com/2016/12/27/i-wrote-a-faster-sorting-algorithm/">第1</a> <a href="https://probablydance.com/2017/01/17/faster-sorting-algorithm-part-2/">部分</a> ， <a href="https://probablydance.com/2017/01/17/faster-sorting-algorithm-part-2/">第2部分</a> ） <img width="30" height="30" src="https://habrastorage.org/webt/fn/cd/py/fncdpynfktllvkdjtmpif0kd1zc.png">  <a href="https://github.com/skarupke/ska_sort/">Github代码</a> <br><br><h3> 系列文章： </h3><ul><li>  <a href="https://habr.com/post/414447/">Excel应用程序AlgoLab.xlsm</a> </li><li>  <a href="https://habr.com/post/414653/">交换排序</a> </li><li>  <a href="https://habr.com/post/415935/">插入排序</a> </li><li>  <a href="https://habr.com/post/422085/">按选择排序</a> </li><li>  <a href="https://habr.com/ru/post/431964/">合并排序</a> </li><li>  <a href="https://habr.com/ru/post/472466/">按分布排序</a> <ul><li>  <a href="https://habr.com/ru/post/478654/">用近似分布计数排序</a> </li><li>  <b>美国国旗排序</b> </li><li> 后缀树按位排序 </li><li> 按分布比较排序 </li></ul></li><li>  <a href="https://habr.com/ru/post/483786/">混合排序</a> </li></ul><br> 在AlgoLab Excel应用程序中，出现了按两种颜色的标记（将零和一排序），按三种颜色的标记（将零，一和二进位排序），按美国国旗进行排序的排序。 要对“美国国旗”进行排序，可以（在带有算法名称的单元格中的注释中）指定要分配的数字系统-默认值为十六进制。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN481304/">https://habr.com/ru/post/zh-CN481304/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN481288/index.html">Redux Toolkit作为有效Redux开发的工具</a></li>
<li><a href="../zh-CN481290/index.html">专用Hetzner和Mikrotik服务器上的HOW-to /网络和VLAN设置</a></li>
<li><a href="../zh-CN481294/index.html">10种最佳软件测试自动化工具</a></li>
<li><a href="../zh-CN481296/index.html">如何编写将被重用的代码</a></li>
<li><a href="../zh-CN481302/index.html">“关于，是不是集群”或导入DBMS时</a></li>
<li><a href="../zh-CN481306/index.html">werf 1.0 stable简介：GitOps与它，状态和计划有什么关系</a></li>
<li><a href="../zh-CN481312/index.html">圣诞老人的礼物丢失：1月6日的IT任务公告</a></li>
<li><a href="../zh-CN481314/index.html">DIY用于机器人和娱乐的Crawler平台</a></li>
<li><a href="../zh-CN481316/index.html">编写微服务博客-第4部分后期服务</a></li>
<li><a href="../zh-CN481318/index.html">使用Unicode进行黑客攻击（以GitHub为例）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>