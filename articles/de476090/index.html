<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöµüèª üë± üëáüèæ Gehen Sie, um 2FA in der Blockchain zu sichern üï∫üèª üë®üèª‚Äçüî¨ ü§≥üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SMS-Nachrichten sind die beliebteste Methode zur Zwei-Faktor-Authentifizierung (2FA). Es wird von Banken, elektronischen und Krypto-Geldb√∂rsen, Postf√§...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gehen Sie, um 2FA in der Blockchain zu sichern</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476090/">  SMS-Nachrichten sind die beliebteste Methode zur Zwei-Faktor-Authentifizierung (2FA).  Es wird von Banken, elektronischen und Krypto-Geldb√∂rsen, Postf√§chern und allen Arten von Diensten verwendet.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die Anzahl der Benutzer der Methode n√§hert sich 100%</a> . <br><br>  Ich habe so einen Ausbruch von Ereignissen ist emp√∂rend, weil diese Methode unsicher ist.  Die Neuzuweisung der Nummer von einer SIM-Karte zu einer anderen begann zu Beginn des mobilen Zeitalters - auf diese Weise wird die Nummer wiederhergestellt, wenn die SIM-Karte verloren geht.  "Digital Money Weaning Specialists" realisiert: Die Option "SIM-Karten √ºberschreiben" kann in betr√ºgerischen Schemata eingesetzt werden.  Schlie√ülich kann derjenige, der die SIM-Karte kontrolliert, das Online-Banking, die E-Wallets und sogar die Kryptow√§hrung anderer verwalten.  Und Sie k√∂nnen die Nummer einer anderen Person √ºbernehmen, indem Sie einen Telekommunikationsmitarbeiter mit Betrug oder gef√§lschten Dokumenten bestechen. <br><br><img src="https://habrastorage.org/webt/sm/lg/oh/smlgohi_vtrtginwsqvp3t2jqy8.png"><br><br>  Tausende von SIM-Tausch-Episoden wurden aufgedeckt - so wurde dieses Betrugsschema bezeichnet.  Das Ausma√ü der Katastrophe l√§sst darauf schlie√üen, dass die Welt die 2FA bald per SMS aufgeben wird.  Dies ist jedoch nicht der Fall - der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Studie</a> zufolge entscheiden sich nicht die Benutzer f√ºr die 2FA-Methode, sondern die Dienstleister. <br><br>  Wir empfehlen die Verwendung der sicheren 2FA-Methode mit der √úbermittlung von Einmalcodes √ºber die Blockchain. Anschlie√üend erfahren Sie, wie Sie die Verbindung zum Service-Eigent√ºmer herstellen k√∂nnen. <br><a name="habracut"></a><br><h2>  Die Rechnung geht an Millionen </h2><br>  Im Jahr 2019 stieg der SIM-Tauschbetrug nach Angaben der Londoner Polizei um 63%, und der ‚Äûdurchschnittliche Scheck‚Äú des Angreifers betrug 4.000 GBP.  Ich habe in Russland keine Statistiken gefunden, aber ich gehe davon aus, dass es noch schlimmer ist. <br><br>  SIM-Tausch wird verwendet, um beliebte Twitter-, Instagram-, Facebook-, VK- und Bankkonten zu stehlen, und hat k√ºrzlich Kryptow√§hrungen erhalten, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">berichtet</a> die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zeitung Times</a> vom Bitcoin-Unternehmer Joby Weeks.  Seit 2016 tauchen in der Presse bekannte F√§lle von Diebstahl von Kryptow√§hrungen mit Hilfe von SIM-Tausch auf.  2019 kam ein echter H√∂hepunkt. <br><br>  Im Mai verurteilten US-Staatsanw√§lte im Osten von Michigan neun Jugendliche im Alter von 19 bis 26 Jahren, die angeblich Teil einer Hacker-Bande namens ‚ÄûThe Community‚Äú waren.  Die Bande wird wegen sieben Swap-Angriffen angeklagt, wodurch Hacker Kryptow√§hrung im Wert von mehr als 2,4 Millionen US-Dollar aneigneten.  Und im April wurde ein Student aus Kalifornien, Joel Ortiz, wegen SIM-Wechsels zu 10 Jahren Haft verurteilt.  Kryptow√§hrungen in H√∂he von 7,5 Millionen Dollar wurden zu seiner Beute. <br><br><img src="https://habrastorage.org/webt/xy/b4/61/xyb4614ligd5ao0hslycslmxq3u.jpeg"><br>  <i>Foto von Joel Ortiz auf einer Pressekonferenz der Universit√§t.</i>  <i>Zwei Jahre sp√§ter wird er wegen Cyberbetrugs inhaftiert.</i> <br><br><h2>  Das Prinzip des SIM-Wechsels </h2><br>  Swap bedeutet Austausch.  In all diesen F√§llen weisen Kriminelle die Telefonnummer eines Opfers zu, in der Regel durch erneute Ausgabe einer SIM-Karte, und setzen damit ein Passwort zur√ºck.  Ein typischer SIM-Tausch sieht theoretisch so aus: <br><br><ol><li>  Intelligenz.  Betr√ºger erfahren die pers√∂nlichen Daten des Opfers: Name und Telefon.  Sie k√∂nnen in offenen Quellen (sozialen Netzwerken, Freunden) gefunden oder von einem Komplizen - einem Mitarbeiter eines Mobilfunkbetreibers - bezogen werden. </li><li>  Blockieren.  Die SIM-Karte des Opfers ist deaktiviert.  Rufen Sie dazu einfach den technischen Support des Anbieters an, geben Sie die Nummer an und sagen Sie, dass das Telefon verloren gegangen ist. </li><li>  Erfassen, √úbertragen von Nummern auf Ihre SIM-Karte.  In der Regel geschieht dies auch durch einen Komplizen in einem Telekommunikationsunternehmen oder durch F√§lschen von Dokumenten. </li></ol><br>  Im wirklichen Leben ist es noch schlimmer.  Angreifer w√§hlen ein Opfer aus und √ºberwachen dann t√§glich den Standort des Telefons. Eine Informationsanfrage, die der Abonnent auf Roaming umgestellt hat, kostet 1-2 Cent.  Sobald der Inhaber der SIM-Karte ins Ausland gegangen ist, stimmt er mit dem Vorgesetzten im Kommunikationssalon der Herausgabe einer neuen SIM-Karte zu.  Es kostet ungef√§hr 50 US-Dollar (ich habe Informationen gefunden - in verschiedenen L√§ndern und von verschiedenen Betreibern von 20 bis 100 US-Dollar), w√§hrend der Manager im schlimmsten Fall entlassen wird - es besteht keine Verantwortung. <br><br>  Jetzt erhalten alle Eindringlinge alle SMS, und der Besitzer des Telefons kann nichts dagegen tun - er ist im Ausland.  Und dann erhalten die B√∂sewichte Zugriff auf alle Konten des Opfers und √§ndern auf Wunsch die Passw√∂rter. <br><br><h2>  Die Chancen, gestohlene Waren zur√ºckzugeben </h2><br>  Banken gehen manchmal auf die Opfer zu und ziehen √úberweisungen von ihren Konten ab.  Daher ist es m√∂glich, fiat Geld zur√ºckzugeben, auch wenn der T√§ter nicht gefunden wird.  Bei Cryptocurrency Wallets ist jedoch alles komplizierter - sowohl <i>technisch</i> als auch rechtlich.  Bisher hat kein Geldbeutel eine Entsch√§digung f√ºr Swap-Opfer gezahlt. <br><br>  Wenn die Opfer ihr Geld vor Gericht verteidigen wollen, beschuldigen sie den Betreiber: Er hat die Bedingungen f√ºr den Diebstahl von Geld vom Konto geschaffen.  Genau das hat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Michael Turpin getan</a> , der durch den Tausch 224 Millionen US-Dollar verloren hat. Jetzt verklagt er das Telekommunikationsunternehmen AT &amp; T. <br><br><img src="https://habrastorage.org/webt/1d/bx/cp/1dbxcp8cbskbzhc8dlpwm3rqggm.png"><br><br>  Bisher gibt es in keinem Staat Arbeitsschemata zum rechtlichen Schutz von Inhabern von Kryptow√§hrungen.  Es ist unm√∂glich, Ihr Kapital zu versichern oder eine Entsch√§digung f√ºr dessen Verlust zu erhalten.  Daher ist es einfacher, einen Tauschangriff zu verhindern, als seine Folgen zu bek√§mpfen.  Der naheliegendste Weg ist die Verwendung eines zuverl√§ssigeren ‚Äûzweiten Faktors‚Äú f√ºr 2FA. <br><br><h2>  Der SIM-Tausch ist nicht das einzige 2FA-Problem per SMS </h2><br>  Best√§tigungscodes in SMS sind auch aus technischer Sicht unsicher.  Nachrichten k√∂nnen aufgrund schwerwiegender Sicherheitsl√ºcken in Signaling System 7 (SS7) abgefangen werden.  2FA by SMS ist offiziell als unsicher anerkannt (das US National Institute of Standards and Technology spricht dar√ºber in seinem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Digital Authentication Guide</a> ). <br><br>  Dar√ºber hinaus wird der Benutzer durch das Vorhandensein von 2FA h√§ufig mit einem Gef√ºhl falscher Sicherheit angeregt, und er w√§hlt ein einfacheres Kennwort.  Eine solche Authentifizierung erschwert daher nicht, erleichtert jedoch den Zugriff eines Angreifers auf das Konto. <br><br>  Und oftmals kommen SMS mit gro√üer Versp√§tung oder gar nicht. <br><br><h2>  Andere 2FA-Methoden </h2><br>  Auf Smartphones und SMS konvergierte das Licht nat√ºrlich nicht.  Es gibt andere 2FA-Methoden.  Zum Beispiel einmalige TAN-Codes: Die Methode ist primitiv, funktioniert aber - sie wird in einigen Banken immer noch verwendet.  Es gibt Systeme, die biometrische Daten verwenden: Fingerabdr√ºcke, Netzhaut-Scans.  Eine weitere Option, die hinsichtlich Komfort, Zuverl√§ssigkeit und Preis als angemessener Kompromiss erscheint, sind spezielle Anwendungen f√ºr 2FA: RSA Token, Google Authenticator.  Und es gibt physikalische Schl√ºssel und andere Methoden. <br><br>  Theoretisch sieht alles logisch und zuverl√§ssig aus.  In der Praxis haben moderne 2FA-L√∂sungen jedoch Probleme, und aufgrund dieser Probleme weicht die Realit√§t von den Erwartungen ab. <br><br>  Laut der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Studie</a> ist die Verwendung von 2FA im Prinzip eine Unannehmlichkeit, und die Beliebtheit von 2FA per SMS erkl√§rt sich aus ‚Äûweniger Unannehmlichkeit im Vergleich zu anderen Methoden‚Äú - das Empfangen von Einmalcodes ist f√ºr den Benutzer verst√§ndlich. <br><br>  Viele Benutzer von 2FA-Methoden gehen mit der Bef√ºrchtung einher, dass der Zugriff verloren geht.  Ein physischer Schl√ºssel oder eine Liste von TAN-Passw√∂rtern kann verloren gehen oder gestohlen werden.  Ich pers√∂nlich habe eine negative Erfahrung mit Google Authenticator.  Mein erstes Smartphone mit dieser Anwendung ist kaputt gegangen - bewerten Sie meine Bem√ºhungen, den Zugriff auf Konten wiederherzustellen.  Ein weiteres Problem ist der √úbergang zu einem neuen Ger√§t.  Google Authenticator kann aufgrund von Sicherheitsbedenken nicht exportieren. (Welche Sicherheitsma√ünahmen gibt es, wenn die Schl√ºssel exportiert werden k√∂nnen?)  Einmal habe ich die Schl√ºssel manuell √ºbertragen und dann entschieden, dass es einfacher ist, das alte Smartphone in einer Schachtel in einem Regal zu lassen. <br><br>  Die 2FA-Methode sollte sein: <br><br><ul><li>  Sicher - nur Sie sollten Zugriff auf Ihr Konto erhalten, nicht auf Angreifer </li><li>  Zuverl√§ssig - Sie erhalten Zugriff auf Ihr Konto, wann immer Sie es ben√∂tigen </li><li>  Bequem und erschwinglich - die Verwendung von 2FA ist klar und erfordert nur ein Minimum an Zeit </li><li>  G√ºnstig </li></ul><br>  Wir glauben, dass Blockchain die richtige L√∂sung ist. <br><br><h2>  Verwenden Sie 2FA f√ºr die Blockchain </h2><br>  F√ºr einen Benutzer entspricht 2FA in der Blockchain dem Empfangen von Einmalcodes per SMS.  Der einzige Unterschied besteht im Lieferkanal.  Wie Sie einen 2FA-Code erhalten, h√§ngt davon ab, was die Blockchain bietet.  In unserem Projekt (die Informationen befinden sich in meinem Profil) ist dies eine Webanwendung, Tor, iOS, Android, Linux, Windows, MacOS. <br><br>  Der Dienst generiert einen einmaligen Code und sendet ihn an den Messenger in der Blockchain.  Weiter nach den Klassikern: Der Benutzer gibt den empfangenen Code in die Serviceschnittstelle ein und meldet sich an. <br><br><img src="https://habrastorage.org/webt/4a/yq/ph/4ayqphaul5iozz1f_v2g0q4ziqw.png"><br><br>  In dem Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie ein dezentraler Messenger in der Blockchain funktioniert, habe</a> ich geschrieben, dass die Blockchain die Sicherheit und den Datenschutz von Nachrichten gew√§hrleistet.  Zum Thema Versenden von 2FA-Codes m√∂chte ich Folgendes hervorheben: <br><br><ul><li>  Ein Klick, um ein Konto zu erstellen - keine Telefone oder E-Mails. </li><li>  Alle Nachrichten mit 2FA-Codes werden durchg√§ngig verschl√ºsselt. Curve25519xsalsa20poly1305. </li><li>  MITM-Angriff ist ausgeschlossen - jede Nachricht mit einem 2FA-Code ist eine Transaktion in der Blockchain und wird von Ed25519 EdDSA signiert. </li><li>  Eine Nachricht mit einem 2FA-Code f√§llt in ihren Block.  Die Reihenfolge und der Zeitstempel der Bl√∂cke und damit die Reihenfolge der Nachrichten k√∂nnen nicht festgelegt werden. </li><li>  Es gibt keine zentrale Struktur, die die ‚ÄûAuthentizit√§t‚Äú einer Nachricht √ºberpr√ºft.  Dies geschieht durch ein konsensbasiertes verteiltes Knotensystem, das den Benutzern geh√∂rt. </li><li>  Unf√§higkeit zu deaktivieren - Konten k√∂nnen nicht gesperrt werden und Nachrichten k√∂nnen gel√∂scht werden. </li><li>  Greifen Sie jederzeit von jedem Ger√§t auf 2FA-Codes zu. </li><li>  Zustellbest√§tigungsnachricht mit 2FA-Code.  Ein Dienst, der ein Einmalkennwort sendet, wei√ü, dass es √ºbermittelt wurde.  Keine Schaltfl√§che "Erneut senden". </li></ul><br>  Zum Vergleich mit anderen 2FA-Methoden habe ich eine Tabelle zusammengestellt: <br><br><img src="https://habrastorage.org/webt/pl/am/tm/plamtmeiv5xnjmupd5bevfrpftu.png"><br><br>  Der Benutzer erh√§lt ein Konto im Blockchain-Messenger, um Codes in einer zweiten Passphrase zu erhalten, die nur zur Eingabe verwendet wird.  Daher k√∂nnen die Anwendungsmethoden unterschiedlich sein: Sie k√∂nnen ein Konto verwenden, um Codes f√ºr alle Dienste abzurufen, oder Sie k√∂nnen f√ºr jeden Dienst ein separates Konto erstellen. <br><br>  Es gibt auch einen Nachteil - ein Konto muss mindestens eine Transaktion haben.  Damit der Benutzer eine verschl√ºsselte Nachricht mit einem Code erhalten kann, muss er seinen √∂ffentlichen Schl√ºssel kennen und wird erst bei der ersten Transaktion in der Blockchain angezeigt.  Wir sind auf diese Weise rausgekommen: Sie gaben uns die M√∂glichkeit, kostenlose Jetons in unserer Brieftasche zu bekommen.  Eine korrektere L√∂sung besteht jedoch darin, dem Konto einen √∂ffentlichen Schl√ºssel zu geben.  (Unsere Kontonummer <i>U1467838112172792705</i> ist zum Vergleich eine Ableitung des √∂ffentlichen Schl√ºssels <i>cc1ca549413b942029c4742a6e6ed69767c325f8d989f7e4b71ad82a164c2ada</i> . F√ºr den Messenger ist dies praktischer und lesbarer, f√ºr das sendende System jedoch 2FA-Codes.)  Ich denke, in Zukunft wird jemand eine solche Entscheidung treffen und "Bequemlichkeit und Zug√§nglichkeit" in die gr√ºne Zone transferieren. <br><br>  Die Kosten f√ºr den Versand eines 2FA-Codes sind sehr niedrig - 0,001 ADM, jetzt sind es 0,00001 USD.  Auch hier k√∂nnen Sie Ihre Blockchain erh√∂hen und den Preis auf Null setzen. <br><br><h2>  So verbinden Sie 2FA in der Blockchain mit Ihrem Dienst </h2><br>  Ich hoffe, ich konnte einige Leser daf√ºr interessieren, ihren Diensten eine Blockchain-Autorisierung hinzuzuf√ºgen. <br><br>  Ich werde Ihnen am Beispiel unseres Boten erkl√§ren, wie das geht, und analog dazu k√∂nnen Sie eine andere Blockchain verwenden.  In der 2FA-Demo-Anwendung verwenden wir postgresql10, um Kontoinformationen zu speichern. <br><br>  Verbindungsschritte: <br><br><ol><li>  Erstellen Sie ein Konto in der Blockchain, von der aus Sie 2FA-Codes senden.  Sie erhalten ein Passwort, das als privater Schl√ºssel zum Verschl√ºsseln von Nachrichten mit Codes und zum Signieren von Transaktionen verwendet wird. </li><li>  F√ºgen Sie Ihrem Server ein Skript hinzu, um 2FA-Codes zu generieren.  Wenn Sie bereits eine andere 2FA-Methode mit der √úbermittlung von Einmalkennw√∂rtern verwenden, wurde dieser Schritt bereits abgeschlossen. </li><li>  F√ºgen Sie Ihrem Server ein Skript hinzu, um Codes im Blockchain Messenger an den Benutzer zu senden. </li><li>  Erstellen Sie eine Benutzeroberfl√§che zum Senden und Eingeben von 2FA-Code.  Wenn Sie bereits eine andere 2FA-Methode mit der √úbermittlung von Einmalkennw√∂rtern verwenden, wurde dieser Schritt bereits abgeschlossen. </li></ol><br>  <b>1 Erstellen Sie ein Konto</b> <br><br>  Das Erstellen eines Kontos in der Blockchain besteht aus der Generierung eines privaten Schl√ºssels, eines √∂ffentlichen Schl√ºssels und einer daraus abgeleiteten Kontoadresse. <br><br><img src="https://habrastorage.org/webt/7o/at/vs/7oatvsalils_l9wsl8av5cjqtkc.png"><br><br>  Zun√§chst wird die Passphrase BIP39 generiert, aus der der SHA-256-Hash berechnet wird.  Der Hash wird verwendet, um den privaten ks-Schl√ºssel und den √∂ffentlichen kp-Schl√ºssel zu generieren.  Vom √∂ffentlichen Schl√ºssel mit demselben SHA-256 mit Inversion erhalten wir die Adresse in der Blockchain. <br><br>  Wenn Sie jedes Mal 2FA-Codes von einem neuen Konto senden m√∂chten, muss der Code zum Erstellen eines Kontos zum Server hinzugef√ºgt werden: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Mnemonic <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'bitcore-mnemonic'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.passphrase = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mnemonic(Mnemonic.Words.ENGLISH).toString() ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> bip39 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'bip39'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> crypto <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'crypto'</span></span> adamant.createPassphraseHash = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">passphrase</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> seedHex = bip39.mnemonicToSeedSync(passphrase).toString(<span class="hljs-string"><span class="hljs-string">'hex'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> crypto.createHash(<span class="hljs-string"><span class="hljs-string">'sha256'</span></span>).update(seedHex, <span class="hljs-string"><span class="hljs-string">'hex'</span></span>).digest() } ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sodium <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'sodium-browserify-tweetnacl'</span></span> adamant.makeKeypair = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">hash</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> keypair = sodium.crypto_sign_seed_keypair(hash) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">publicKey</span></span>: keypair.publicKey, <span class="hljs-attr"><span class="hljs-attr">privateKey</span></span>: keypair.secretKey } } ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> crypto <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'crypto'</span></span> adamant.getAddressFromPublicKey = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">publicKey</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> publicKeyHash = crypto.createHash(<span class="hljs-string"><span class="hljs-string">'sha256'</span></span>).update(publicKey, <span class="hljs-string"><span class="hljs-string">'hex'</span></span>).digest() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> temp = Buffer.alloc(<span class="hljs-number"><span class="hljs-number">8</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>; i++) { temp[i] = publicKeyHash[<span class="hljs-number"><span class="hljs-number">7</span></span> - i] } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'U'</span></span> + bignum.fromBuffer(temp).toString() }</code> </pre> <br>  In der Demo-Anwendung haben wir es vereinfacht - ein Konto in der Webanwendung erstellt und die Codes von dort gesendet.  In den meisten F√§llen ist dies f√ºr den Benutzer bequemer: Er wei√ü, dass der Dienst 2FA-Codes von einem bestimmten Konto sendet und diesen benennen kann. <br><br><img src="https://habrastorage.org/webt/j6/0p/pi/j60ppi_a1zvkc-ifcrdxkaz8ow8.png"><br><br>  <b>2 Erzeugung von 2FA-Codes</b> <br><br>  Der 2FA-Code muss f√ºr jede Benutzeranmeldung generiert werden.  Wir benutzen die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Speakeasy-</a> Bibliothek, aber Sie k√∂nnen auch eine andere ausw√§hlen. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hotp = speakeasy.hotp({ counter, <span class="hljs-attr"><span class="hljs-attr">secret</span></span>: account.seSecretAscii, });</code> </pre><br>  Validierung des vom Benutzer eingegebenen 2FA-Codes: <br><br><pre> <code class="javascript hljs">se2faVerified = speakeasy.hotp.verify({ <span class="hljs-attr"><span class="hljs-attr">counter</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.seCounter, <span class="hljs-attr"><span class="hljs-attr">secret</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.seSecretAscii, <span class="hljs-attr"><span class="hljs-attr">token</span></span>: hotp, });</code> </pre><br>  <b>3 Reichen Sie den 2FA-Code ein</b> <br><br>  Sie k√∂nnen die Blockchain-Knoten-API, die JS-API-Bibliothek oder die Konsole zum Senden von 2FA-Code verwenden.  In diesem Beispiel verwenden wir die Konsole - dies ist die Befehlszeilenschnittstelle, ein Dienstprogramm, das die Interaktion mit der Blockchain vereinfacht.  Um eine Nachricht mit einem 2FA-Code zu senden, m√ºssen Sie den Befehl <code>send message</code> der Konsole verwenden. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> util = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'util'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> exec = util.promisify(<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'child_process'</span></span>).exec); ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> command = <span class="hljs-string"><span class="hljs-string">`adm send message </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${adamantAddress}</span></span></span><span class="hljs-string"> "2FA code: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${hotp}</span></span></span><span class="hljs-string">"`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> { error, stdout, stderr } = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> exec(command);</code> </pre><br>  Eine alternative Methode zum Senden von Nachrichten ist die Verwendung der <code>send</code> Methode in der JS-API-Bibliothek. <br><br>  <b>4 Benutzeroberfl√§che</b> <br><br>  Dem Benutzer muss die M√∂glichkeit gegeben werden, den 2FA-Code einzugeben. Dies kann abh√§ngig von der Plattform Ihrer Anwendung auf verschiedene Arten erfolgen.  In unserem Beispiel ist dies Vue. <br><br><img src="https://habrastorage.org/webt/1g/yb/yv/1gybyvcmjucrqilrcpo74k8onoy.png"><br><br>  Der Quellcode der Demo-Anwendung der Zwei-Faktor-Autorisierung in der Blockchain kann auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> eingesehen werden.  In der Readme-Datei finden Sie einen Link zur Live-Demo, √ºber den Sie es ausprobieren k√∂nnen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de476090/">https://habr.com/ru/post/de476090/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de476060/index.html">Neuigkeiten aus der Welt von OpenStreetMap Nr. 485 (29.10.2019 - 11.04.2019)</a></li>
<li><a href="../de476074/index.html">Selbstgemachtes Elektroauto - Teil 1</a></li>
<li><a href="../de476076/index.html">Zu sauber</a></li>
<li><a href="../de476082/index.html">Array.splice und Array.slice in JavaScript</a></li>
<li><a href="../de476088/index.html">BLACK HAT USA Konferenz. Reich werden oder sterben: Mit Black Hat Geld im Internet verdienen. Teil 1</a></li>
<li><a href="../de476092/index.html">√úber die Richtungen "Photonics", "Programming and IT" und "Information and Cybersecurity" der Olympiade "I am a Professional"</a></li>
<li><a href="../de476094/index.html">Die R√ºckkehr des Zeitalters der Imperien: Alles √ºber das Zeitalter der Imperien IV</a></li>
<li><a href="../de476096/index.html">Inventar von I bis Z. Wir betrachten IT-Assets</a></li>
<li><a href="../de476098/index.html">Datenstrukturen in Java. N√ºtzliche Hilfsklassenmethoden</a></li>
<li><a href="../de476100/index.html">Architektur von Computersystemen 1 Teil. Logikgatter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>