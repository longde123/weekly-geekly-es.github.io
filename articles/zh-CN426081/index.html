<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤙🏽 🐙 📵 如何组织电子文档的长期归档存储 👩🏿‍🎤 👩🏼‍🔬 💇🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="最近，在《 Inside 》杂志上，我们讨论了通过电子签名（EP）认证的电子文档（ED）的长期归档存储。 本文专门讨论了有关此过程的组织和延长ED的法律意义属性的方法的各种观点。 在其中，我们重点介绍了用于形成单据收据的方法。 它们是包含检查结果以及所有必要属性的元数据，可在验证时确认文档的法律意义...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>如何组织电子文档的长期归档存储</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/gaz-is/blog/426081/"> 最近，在《 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Inside</a> 》杂志上，我们讨论了通过电子签名（EP）认证的电子文档（ED）的长期归档存储。 本文专门讨论了有关此过程的组织和延长ED的法律意义属性的方法的各种观点。 在其中，我们重点介绍了用于形成单据收据的方法。 它们是包含检查结果以及所有必要属性的元数据，可在验证时确认文档的法律意义。 <br><br> 本文更详细地介绍了长期档案存储（DAC）的另一种方法-高级电子签名（UEP）的形成，即归档格式CAdES-A和XAdES-A的数字签名。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gt/av/t5/gtavt5ym6v6ovu5nexepgv_fya4.png"></div><br><a name="habracut"></a> 让我们尝试更详细地了解存档电子文档如何以及为什么可以通过电子文档延长电子文档的生命周期。 让我们从关于数字签名的类型和格式的小型理论教育程序开始，然后在实践中考虑由Gazinformservice开发的产品形成电子签名档案的过程。 <br><br><h3> 一点理论 </h3><br>  <b>CAdES类型电子签名</b> <br><br>  CMS高级电子签名（CAdES）是一种电子签名标准，是加密消息语法（CMS）标准的扩展版本。 描述该标准的主要文件是ETSI TS 101733电子签名和基础设施（ESI）；  CMS高级电子签名（CAdES）。” <br><br>  CAdES是CMS的发展，其中纠正了前辈的基本缺陷，例如缺少创建电子签名的可信时间戳，缺少电子签名的内容类型以及无法长期保存电子信件具有法律意义的属性的问题。 <br><br> 该标准定义了几种CAdES格式，每种格式都包括前一种（按照下面介绍的顺序）并进行了扩展： <br><br><div class="spoiler">  <b class="spoiler_title">CAdES标准格式</b> <div class="spoiler_text">  1. CAdES-BES（基本电子签名）-标准的基本和最简单的格式，提供了数据的基本身份验证和完整性保护。 它包含以下属性： <br><br><ul><li> 签名的用户数据（发送方ED）； </li><li> 一组必需的已签名属性（如果ES生成来自这些属性和用户数据的组合，则该属性称为已签名）； </li><li> 为用户数据和已签名属性计算的ES值； </li><li> 一组附加属性； </li><li> 一组可选的签名属性。 </li></ul><br>  2. CAdES-EPES（基于显式策略的电子签名）是一种包含所选ES规则的显式指示的格式。 在CAdES-EPES中，添加了签名属性signature-policy-identifier，它定义了所选ES规则的标识符。 通过签名此标识符，发件人明确表示他在创建标识符时应用了某些规则。 因此，接收者必须根据相同的规则验证电子签名。 <br><br>  3. CAdES-T（时间戳）是一种CAdES类型的ES格式，在其中添加了一个字段以固定受信时间。 <br><br>  4. CAdES-C（完整）包含一套完整的验证数据。 它与CAdES-T的不同之处在于，它添加了未签名的属性complete-certificate-references和complete-revocation-references。 <br><br> 第一个属性包含用于验证ES的所有证书的标识符。 第二个属性包含已撤销证书列表（证书吊销列表，CRL，SOS）中证书的标识符和/或协议接收的用于检查证书当前状态的响应（在线证书状态协议（OCSP））。 <br><br> 通过包含这些属性，可以更轻松地获取有关ES验证密钥证书的信息，这对于接收者验证ES是必不可少的，因为有效证书和无效证书上的数据将已经包含在ES本身中。 <br><br>  5. CAdES-X（扩展）是一种CAdES类型的ES格式，包括CadES-C类型中包含的以下子格式： <br><br><ul><li>  CAdES-X Long是一种长期扩展的ES格式，它添加了证书值和吊销值属性。 它们代表验证CAdES-C签名所需的证书和SOS的完整数据，即使它们的原始来源不可用，也不排除丢失此信息的可能性。 </li><li>  CAdES-X类型1-添加一个时间戳属性，其中包含整个CAdES-C签名上的时间戳。 这可以确保EA的所有元素中受信任时间的完整性和可用性。 因此，此属性使您可以保护证书，SOS和通过OCSP协议接收的响应，有关这些信息的信息记录在ES中（与破坏证书颁发机构密钥，SOS发布者密钥或OCSP服务密钥有关）。 </li><li>  CAdES-X类型2-为CAdES-C添加时间戳，但不为整个ES添加时间戳，而仅为证书和SOS的完整链接添加时间戳。 </li></ul><br>  6. CAdES-X Long Type 1-此EP格式是CAdES-X Long和CAdES-X Type 1的组合 <br><br>  7. CAdES-X Long Type 2-此EA格式是CAdES-X Long和CAdES-X Type 2格式的组合。 <br><br>  8. CAdES-A（存档）是一种CAdES类型的EP格式，它基于CAdES-X Long类型1或类型2，通过添加一个或多个存档时间戳属性（即存档时间戳）来创建（图1）。 这种EP格式用于存档长期EP并提供DAH，前提是可以在很长一段时间内验证存储的ED的法律意义（所谓的“时间互操作性”）。 </div></div><br>  <b>CAdES-A数字签名的存档形式包含以下元素：</b> <br><br><ul><li> 全套验证数据（CAdES-C）； </li><li> 证书和SOS的值（CAdES-X类型1或CAdES-X类型2）（如果使用）； </li><li> 签名的用户数据，以及应用于所有数据的附加存档时间戳。 </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yx/ef/ig/yxefig_fxyp8hcjrgywishxbspy.png"></div><br>  <i>图1-CAdES-A格式的电子签名的形成图</i> <br><br> 组织DAC的问题不仅与俄罗斯法律在1年3个月建立的用户证书的有效期限有限有关，而且与密码算法的修改有关，这又是由于密码分析方法和计算机行业的发展导致其强度特性下降而引起的。 <br><br> 可以将附加时间戳应用于CAdES-A格式的CA之上，当识别使用的加密哈希函数的漏洞，破坏使用的加密算法以及破坏密钥时，将保护其内容。 不应忘记，时间戳序列可以提供针对电子伪造的保护，前提是这些时间戳是在时间戳服务密钥被泄露之前应用的。 因此，CAdES-A格式的ES允许您在很长一段时间内保持其真实性，并且在更新密码标准时定期放置档案图章将为验证ES提供机会。 <br><br> 还需要注意的是，通过将SignerInfo结构放置在unsignedeAttrs字段中，创建上述存档的ES表单所需的其他数据将作为与单独的ES关联的未签名属性进行传输。 因此，档案EP的所有属性都是未签名的，因此不会违反其数学正确性。 <br><br> 想象一下上面以直观表格形式描述的所有内容： <br><br>  <i>CAdES EP格式的比较分析</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/al/uw/vf/aluwvflgtifg-jdfm20vx6t7img.jpeg"></div><br>  <b>XAdES类型电子签名</b> <br><br>  XML高级电子签名（XAdES）是一种电子签名标准，是XML数字签名（XMLDSig）标准的扩展版本。 描述该标准的主要文档是ETSI EN 319 132-1“电子签名和基础架构（ESI）；  XAdES数字签名。” <br><br> 与CAdES类型的EP相似，为XAdES类型的EP定义了几种格式，每种格式都包括前一个（按照下面介绍的顺序）并进行扩展： <br><br><div class="spoiler">  <b class="spoiler_title">XAdES标准格式</b> <div class="spoiler_text"><ul><li>  XAdES-BES（基本电子签名） </li><li>  XAdES-EPES（显式策略电子签名） </li><li>  XAdES-T（时间戳） </li><li>  XAdES-C（完整） </li><li>  XAdES-X（扩展验证数据） </li><li>  XAdES-XL（长期扩展） </li><li>  XAdES-A（存档） </li></ul><br></div></div><br> 我们将不详细描述列表中的每个后续格式与上一个格式之间的区别，因为它假定对具有相似字段和属性的带符号结构进行了丰富的描述，从而准确地重复了对CAdES的描述。 主要差异立即以表格形式汇总： <br><br>  <i>XAdES ES格式的比较分析</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3m/44/mg/3m44mgdiziy4znz_w-ziyicwga8.jpeg"></div><br><h3> 提供DAH的Litoria产品的新功能 </h3><br>  Gazinformservice公司开发了软件综合库（PC）“ Litoria Desktop 2”，它为用户提供了完全拒绝文书工作并转而使用具有法律意义且机密的电子交互的机会。 从版本2.2.3开始，软件包的用户已经可以使用CAdES-A格式创建和验证UEP。  EP以相同的格式确认收货，并在5.2.2版中由可信第三方服务“ Litoria DVCS”的PC对其进行验证。 <br><br> 考虑基于产品数据形成档案UEP的过程。 <br><br>  1.使用“ Litoria Desktop 2”，我们将为电子文档创建UEP，并将其传输到“ Litoria DVCS” SDTS，以生成收据： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9o/p-/az/9op-azf0f3v9en19p5rapxkrrae.png"></div><br>  <i>图1-使用PC“ Litoria Desktop 2”形成UEP</i> <i><br></i> <br> 可以通过“检查并提取”选项卡查看有关已形成的UEP的详细信息。 我们看到签名者证书的有效期到2018年10月20日（图2），而TSP服务器证书实际上在签名中添加了时间戳并对其进行了改进（图3），直到2032年12月22日。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/44/xw/fl/44xwfl0_kf_ni0euy062ha_1hsk.png"></div><br>  <i>图2-在PC“ Litoria Desktop 2”的界面中显示有关ES的信息（用户证书）</i> <i><br></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eg/7q/ck/eg7qckbni00jw5glulwjel5axm8.png"></div><br>  <i>图3-在PC“ Litoria Desktop 2”的界面中显示有关ES的信息（TSP服务器证书）</i> <i><br></i> <br> 进而，通过时间戳服务器证书的有效期来确定用于ED的UEP的有效性。 但是在这里值得引起您注意的是，对于本文，我们使用了未经认证的测试CA和TSP，并为其颁发了不合格的证书。 在俄罗斯现实中，合格的时间戳服务器证书的有效期不应超过15年。 <br><br> 但是，如果文档应保存15年以上，我们该怎么办？ 收据上的电子签名的存档格式就在这里发挥作用（使用PC“ SDS” Litoria DVCS）。 <br><br>  2.我们将转到SDTS Litoria DVCS个人计算机用户的个人帐户，并发送签名的ED来形成验证收据（图4、5）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gp/os/yz/gposyzblcos7bynrvuf29igkowa.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yc/r6/bf/ycr6bfebap0g2fd2qtauliakhay.png"></div><br>  <i>图4-在“ SDTS” Litoria DVCS PC中为ED形成收据</i> <i><br></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ic/vo/vc/icvovcbaaztsnsaciwazziy5td0.png"></div><br>  <i>图5-PC“ SDTS” Litoria DVCS上的收据上的详细信息</i> <i><br></i> <br> 检查ED完成，形成收据。 现在，综合大楼将自动分析每个存储的收据的有效性，该有效性由时间戳服务证书的有效期确定，一旦发生有效期终止的情况，便会重新发行收据，即 一连串的法律相关文件正在形成：“初始ED-收据1-收据2-...。  -收据n“ <br><br><h3> 使用Litoria Desktop 2 PC以CAdES-A格式签名 </h3><br> 让我们考虑使用Litoria Desktop 2 PC以CAdES-A格式形成ES的第二种到目前为止机械化的方法。 <br><br>  1.我们启动Litoria Desktop 2 PC，以已知方式形成UEP <br><br>  2.我们转到“ Archival storage”目录，将已签名的ED复制到“ edsArch”文件夹中，然后运行Gis.ArchUpgrade实用程序（安装是在用户指定的相应目录中安装组合系统时进行的，图6） <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8s/tb/mo/8stbmodrrrrtlowkmocwm0bxpok.png"></div><br>  <i>图6-准备以CAdES格式生成电子表格的ED</i> <i><br></i> <br>  3.完成该过程后，将在控制台的用户屏幕上显示一条通知（图7）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hc/o3/_c/hco3_cp91z5oewww0ldgcpz3ulm.png"></div><br>  <i>图7-以CAdES-A格式成功形成UEP</i> <br><br> 我们再次强调，CAdES-A签名格式涉及在原始ES上添加未签名的属性，这不会违反原始ES的数学正确性。 <br><br>  4.现在，我们转到“ edsArch”文件夹，并在Litoria Desktop 2 PC上检查由实用程序的工作结果生成的文件（图8、9、10）。 <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/in/ft/rw/inftrwszof9eae74unophhqqozm.png"></div><br>  <i>图8-由Gis.ArchUpgrade实用程序生成的带有存档签名的文件</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5n/vi/da/5nvidah1enrnzd6zun43scl9j0g.png"></div><br>  <i>图9-在Litoria Desktop 2 PC中检查档案ES的结果（用户证书）</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-w/0d/ut/-w0duty_n80ssumltsb6mwfpzku.png"></div><br>  <i>图10-在Litoria Desktop 2 PC中检查档案ES的结果（TSP服务证书）</i> <br><br> 最后-一个代码段ASN.1存档的时间戳记： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nr/ae/vo/nraevopqpwigpabopna_qelpnme.png"></div><br><br> 因此，今天已经有了可行的选择来确保需要长期存储的与法律相关的电子文档的整个生命周期。 您可以在开发公司的网站上找到有关旨在解决指定问题的产品的更多详细信息，或者通过电话8（812）677-20-53，电子邮件：salespo@gaz-is.ru与销售部门联系。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN426081/">https://habr.com/ru/post/zh-CN426081/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN426067/index.html">像两次大火一样移动？ 再次关于人员搬迁</a></li>
<li><a href="../zh-CN426071/index.html">哪些促销吸引服装店？</a></li>
<li><a href="../zh-CN426073/index.html">进口替代，故事继续（续）</a></li>
<li><a href="../zh-CN426077/index.html">新的TeleBots Cyber​​group后门：工业证明和NotPetya链接的首个证明</a></li>
<li><a href="../zh-CN426079/index.html">未经授权授权：我们不会收集个人数据</a></li>
<li><a href="../zh-CN426083/index.html">iOS开发人员需要什么技能才能适应？</a></li>
<li><a href="../zh-CN426085/index.html">如何订购网站开发而不会带来令人惊讶的惊喜：3个专家提示</a></li>
<li><a href="../zh-CN426087/index.html">使用Crypto PRO在JS中签名PDF并在C＃中粘贴签名</a></li>
<li><a href="../zh-CN426089/index.html">美国初创公司开发了眼镜-AdBlock</a></li>
<li><a href="../zh-CN426091/index.html">8台云日志分析仪评估工作环境</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>