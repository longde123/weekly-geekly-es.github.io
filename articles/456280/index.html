<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîπ üë©üèø‚Äç‚öñÔ∏è üçä Comenzar con stm32 o no repetir mis errores üï¥üèº üë®üèø‚Äçüé® üì¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Una breve historia sobre el rastrillo encontrado en la forma de conocer ARM en el ejemplo de stm32f103c8t6 y stm32l151rct6. 


 Mi conocimiento de los...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comenzar con stm32 o no repetir mis errores</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456280/"><p><img src="https://habrastorage.org/getpro/habr/post_images/7af/bf8/34a/7afbf834aacfe9204173342ee1d2787c.jpg" alt="imagen"></p><br><p>  Una breve historia sobre el rastrillo encontrado en la forma de conocer ARM en el ejemplo de stm32f103c8t6 y stm32l151rct6. </p><a name="habracut"></a><br><p>  Mi conocimiento de los microcontroladores comenz√≥ con AVR.  Trabaj√© en ellos durante bastante tiempo, desde los tableros con pistas rayadas y ensamblador en AtmelStudio4 hasta el bot√≠n normal y los makefiles autoescritos para trabajar en el bloc de notas (en mi caso, KWrite) y la l√≠nea de comandos. </p><br><p>  Pero es hora de golpear a sus hermanos mayores: ARM.  La elecci√≥n de una familia espec√≠fica fue larga y pasiva (porque no hab√≠a una necesidad directa, por lo que no ten√≠a prisa), pero al final termin√≥ en stm32f1, ya que era, quiz√°s, la m√°s popular.  ¬øComprar un programador, un tablero de depuraci√≥n como Discovery o una p√≠ldora azul?  ¬°Qu√© eres, soy un maestro en c√°maras AVR!  Cualquier tabla se puede hacer LUT, e incluso cuando lo necesite, sin demasiado kit de cuerpo.  Por lo tanto, compro un stm32f103c8t6 desnudo y empiezo a chamanizar con el rastro de la placa.  ¬øQu√© necesitar√©?  Al menos dos puertos deben llevarse a los peines ... ¬°Uy, es inconveniente mostrar los puertos por completo.  Bueno, obtendr√© 8 patas cada una: del puerto A el m√°s joven (0-7), del B el m√°s viejo (8-15).  A√∫n as√≠, por supuesto, LED y botones, como sin indicaci√≥n y control.  Esto es lo que me sorprende en las placas de depuraci√≥n terminadas es la falta de al menos 2-3 LED y 1-2 botones que no entren en conflicto con nada.  ¬øC√≥mo se imaginan la depuraci√≥n?  Debajo de los botones PA8, se les pregunta a PA9, est√°n ubicados convenientemente.  USB, puentes BOOT0, BOOT1 y un conector de bater√≠a para relojes tambi√©n son √∫tiles.  Y conectores para cuarzo, por lo que es muy hermoso (nunca he usado los conectores para cuarzo despu√©s).  Para la fuente de alimentaci√≥n, el controlador no necesita m√°s de 3.6 V, y con USB viene 5 V. Es necesario instalar un estabilizador.  Le√≠ mucho c√≥mo la gente elige estabilizadores con una baja ca√≠da de voltaje ... ¬øpor qu√©?  La diferencia es de uno y medio voltios, pero hay suficiente roble 78l33.  Y ahora el conector JTAG.  El conector de programaci√≥n de Atmel ten√≠a un ISP10 o ISP6 est√°ndar.  Probablemente JTAG tambi√©n sea una cosa est√°ndar.  Resulta que s√≠ ... pero solo para un solo fabricante o incluso un dispositivo.  Observamos el conector en st-link: hermoso, de 10 pines.  Nos fijamos en alg√∫n programador para AVR: oops, ya de 20 pines.  Buscamos en otro lado: m√°s conectores incompatibles con el dios de los est√°ndares incompatibles.  Bueno, si es as√≠, inventaremos el nuestro.  En todo caso, el adaptador entre ellos no ser√° m√°s complicado que el adaptador ISP-6 a ISP-10.  Todo parece estar listo, puedes hacer una tarifa.  Result√≥ que se puede lograr un paso de 0,5 mm a nivel aficionado, ni siquiera tuve que pintar con un marcador. </p><br><p>  Ahora c√≥mo flashearlo.  Como hay USB, es probable que pueda atravesarlo.  Le√≠ la hoja de datos, s√≠, no puede hacerlo a trav√©s de USB, pero puede hacerlo a trav√©s de UART1.  Vaya, olvid√© retirarlo.  Adem√°s, tambi√©n entra en conflicto con el bot√≥n, con el que se cuelga en PA9.  Bueno, est√° bien, lo mostrar√© en publicaciones, pero todav√≠a hay un bot√≥n m√°s.  Un poco de chamanismo y el tablero est√° listo e incluso definido en stm32flash. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/180/277/876/180277876d736da44658abbce5e5d426.jpg" alt="imagen"></p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4d8/341/8a5/4d83418a5f8bb271a41aefa94fd5d42c.jpg" alt="imagen"></p><br><p>  Parece estar resuelto con hierro, es hora de pasar al c√≥digo.  Despu√©s de leer varios art√≠culos en Internet, encontr√© un archivo listo en gcc-arm-none-eabi.  Descubrir√© exactamente c√≥mo configurar la secuencia de ensamblaje m√°s adelante.  Hasta ahora estoy haciendo hello-worlds en botones y LED.  Dado que esta es mi primera relaci√≥n con esta familia, no hay envoltorios como HAL que son solo trabajos manuales con registros.  Sin embargo, este es un enfoque completamente natural, me parece, uno no podr√≠a mencionarlo.  Me molesta un poco todo el tiempo sacar el poder y BOOT0 en el tablero, pero bueno, alg√∫n d√≠a har√© un programador JTAG.  Por extra√±o que parezca, no pis√© el rastrillo con el reloj apagado.  Record√≥ su juventud cuando escribi√≥ procesamiento 3D en TurboPascal.  Aqu√≠ tengo una pantalla en ili9341 de raspberry pi y un controlador de hasta 72 MHz.  Eso es lo que sucedi√≥: hasta 200 puntos por modelo y 11 fps.  Por supuesto, todas las matrices de transformaci√≥n se cuentan en n√∫meros de punto fijo. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/D9KuP8Q5qTM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  En alg√∫n momento, quer√≠a hacer que un dispositivo port√°til funcionara durante mucho tiempo con la bater√≠a.  Mir√© la hoja de datos y me molest√©: el famoso ARM en consumo es muchas veces peor que el mismo AVR-ok!  Si el √∫ltimo (seleccionado en el primer controlador que result√≥ ser ATmega88p) tuvo un consumo de 0.8 ŒºA, teniendo en cuenta las horas, entonces el primero, incluso en el modo de reposo m√°s econ√≥mico *, ten√≠a 25 ŒºA ¬± 1.4 ŒºA en RTC.  Esto no es bueno  Sin embargo, stm32f103 no se posiciona como una serie econ√≥mica.  Miro el sitio web de STmicroelectronics para otras series de controladores y elijo la serie stm32l1: adem√°s de consumir aproximadamente 1 ŒºA, tambi√©n hay un sensor capacitivo y un controlador LCD.  Es cierto que la frecuencia m√°xima es m√°s baja, solo 36 MHz (o 24 MHz si se usa USB), pero sobrevivir√© de alguna manera.  Se decidi√≥: estoy tomando un par de stm32l151rct6 directamente desde 32 KB de RAM (tambi√©n hay 256 KB de flash, pero dif√≠cilmente puedo imaginar c√≥mo se puede martillar. A menos que sea una mierda absolutamente salvaje o archivos de datos). </p><br><ul><li>  <em>) no confunda los modos de suspensi√≥n (suspensi√≥n, detenci√≥n) con apagado (espera)</em> </li></ul><br><p>  Paralelamente, creo el programador st-link v2 desde el stm32f103 de repuesto, simplemente porque estoy cansado de jugar con BOOT0 y power, y es m√°s r√°pido.  Sin embargo, dejar√© la programaci√≥n de UART; nunca se sabe qu√©.  Tambi√©n hubo un poco de chamanismo, pero nada sobresaliente.  A menos que encontrar la l√≠nea de comando para openocd result√≥ ser un problema.  Para las generaciones futuras la dejar√©: </p><br><pre><code class="plaintext hljs">openocd -f interface/stlink-v2.cfg -f target/stm32f1x.cfg -c "init" -c "reset halt" -c "flash write_image erase "$(firmware).bin" 0x08000000" -c "reset run" -c "exit"</code> </pre> <br><p>  Para stm32l151 es necesario, por supuesto, corregir el objetivo a "target / stm32l1.cfg" </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4e7/20b/8b2/4e720b8b2a7c604796d911ac8c989f2f.jpg" alt="imagen"></p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/6ec/f47/a66/6ecf47a661552fd60fd9fae056b1828c.jpg" alt="imagen"></p><br><p>  Me adelantar√© un poco en cronolog√≠a, pero no volver√©.  Se√±ores, ¬°no ahorren en el grosor de la PCB!  O al menos agregue accesorios, o no use componentes smd.  Sucedi√≥ que en la placa del programador proporcion√© solo dos agujeros de montaje en lugares aleatorios.  Y los lugares estaban bastante lejos del conector JTAG.  Y despu√©s de un tiempo not√© que el programador es inestable.  Eso funciona, luego no, luego a trav√©s de UART tienes que borrar la "v√≠ctima", luego recogerla.  Result√≥ que la resistencia proveniente de la salida del controlador al conector se rompi√≥.  Simplemente se cay√≥ de la almohadilla de contacto del cuerpo.  Solde la resistencia.  Luego soldaba el resto.  Luego se dio cuenta de que incluso esa peque√±a deformaci√≥n de la placa que surgi√≥ durante la extracci√≥n del cable era suficiente para los desafortunados componentes.  Como resultado, pegu√© una copia de seguridad justo al lado del conector.  Mientras lo sostiene. </p><br><p>  Como el lector ya ha adivinado, la programaci√≥n tambi√©n est√° en un editor de texto, mientras que la compilaci√≥n y el firmware est√°n en la consola.  Naturalmente, la compra de una placa de depuraci√≥n para l151 no me inspir√≥ m√°s que cualquier IDE.  Frotando los rastros del rastrillo dejado por el primer tablero, engendro el segundo (contando al programador como el tercero, pero a√∫n no es un tablero de depuraci√≥n).  Como iba a depurar un dispositivo de eficiencia energ√©tica, necesito preocuparme por el poder.  No cambiar√© el estabilizador 78l33, pero romp√≠ su salida con un puente para poder pincharlo con un amper√≠metro (espero que sea igual para un microamper√≠metro, pero ah√≠ est√°).  Deje que los peines sean los mismos que en el tablero anterior: ¬°compatibilidad!  Bueno, un par de LEDs y botones, por supuesto.  El rastrillo con UART1 brilla de manera atractiva, pero todav√≠a pongo su conector y no lo consigo en la frente.  Por supuesto, ya tengo JTAG, pero el seguro no me har√° da√±o.  Al igual que el anterior (y la placa del programador tambi√©n), fue posible separar por un lado, incluso si no hay demasiados puentes. </p><br><p>  Pero cuando el controlador se sell√≥, surgi√≥ un problema.  De alguna manera ingenuamente cre√≠ que deber√≠a haber una llave en el cuerpo del microcircuito que indicara la primera pata.  ¬øQui√©n esperar√≠a que el bien hecho por ST haga DOS llaves, sim√©tricamente?  Entonces, ¬øde qu√© lado soldarlo ahora?  Pensando, decid√≠ que no se trataba de claves, sino de profundizaciones tecnol√≥gicas.  Nunca se sabe, por ejemplo, para posicionar el chip en la fabricaci√≥n.  O presione la base para llenar con pl√°stico.  Entonces necesitas navegar por la inscripci√≥n.  Es l√≥gico que la inscripci√≥n sea legible si el microcircuito se posiciona "est√°ndar", es decir, cuando la primera pata est√° en la esquina superior izquierda.  Entonces comenz√≥ a soldar.  Ya sea un defecto LUT o manos torcidas, pero el microcircuito estaba soldado torcidamente, lo not√© a tiempo antes de soldarlo por completo.  No importa, hay una vieja forma de soldar milpi√©s con una cuchilla de afeitar: no est√° humedecida por soldadura y es lo suficientemente delgada como para no doblarse demasiado.  Result√≥ que las manos todav√≠a no est√°n lo suficientemente rectas, porque las piernas est√°n dobladas.  Pero no hacia arriba, sino hacia los lados, bueno, al menos no muy bien, y lograron enderezarlos de alguna manera.  El segundo intento de soldar ya estaba bajo el microscopio, pero antes decid√≠ corregir las patas.  Y uno de ellos se interrumpi√≥.  ¬øDe qu√© est√°n hechos, que no puedes doblar-doblar una vez?  Los componentes de salida no tienen ese problema.  Bueno, eso es todo, creo que el chip en el matrimonio tendr√° que soldar otro.  ¬øPero de repente esta no es una pierna cr√≠tica?  Bueno, una conclusi√≥n de uso general, o una de las comidas.  Hasta ahora lo he sellado sin √©l, y all√≠ se ver√°.  Esta vez logr√© soldar de manera uniforme, aunque la pierna se meti√≥ en I2C, con el que quer√≠a divertirme, pero al menos no en conectores vitales como USB, JTAG, UART o BOOT.  Lo conecto, no funciona, los programadores no ven la placa.  Durante alg√∫n tiempo, el cham√°n con piernas de soldadura, pero no ayuda.  Un vistazo a la hoja de datos se topa con una imagen del controlador ubicado en alg√∫n lugar del s√≥tano del documento.  ¬°As√≠ es como podr√≠as encontrar la inscripci√≥n BOKOM?!  Es decir, si gira el controlador para que se lea la inscripci√≥n, el primer tramo estar√° en la esquina inferior izquierda.  En el camino, result√≥ que uno de los "recesos tecnol√≥gicos" sigue siendo la clave.  Es cierto que no explica c√≥mo distinguirlo de sim√©trico ... Bueno, al menos alguna pista.  Sueldo el controlador con un secador de cabello para no romper las conclusiones, y esta vez lo hago de lado.  La salida interrumpida va exactamente a la salida TX de UART1, es decir, al conector de programaci√≥n y depuraci√≥n.  Esto es completamente malo, pero antes de cambiar el controlador, al menos debe asegurarse de que con la orientaci√≥n que supuse que al soldar para vivir, no lo mate con una conexi√≥n incorrecta.  Conecto el programador, funciona.  ¬°Hurra!  Quedan peque√±as cosas: suelde los conectores, diodos y otros arneses.  Los comentarios sugirieron otra forma: sonar la tierra: generalmente est√°n conectados dentro de la caja y no est√°n ubicados completamente sim√©tricos.  Es cierto, dado el paso de las conclusiones, llegar a las conclusiones correctas puede ser dif√≠cil.  Sea como fuere, esta es la forma m√°s confiable. </p><br><p>  No quiero trabajar con el controlador sin UART1, y es a√∫n peor que ahora.  Y si lo hace, es lo mismo cambiar, as√≠ que decido interpretar a un cirujano y hacer que el controlador sea una pierna prot√©sica del cabello de MGTF.  Justo a la mano se encuentra un buen pegamento conductor de electricidad, con el cual el cabello se adhiere decisivamente a la plataforma en el cuerpo del chip.  Ese pegamento que se puso en las piernas vecinas se elimina sin piedad con un bistur√≠.  ¬øY qu√© quiere entrar en la plataforma de medio mil√≠metro y no meterse en las patas sobresalientes adyacentes?  Lo compruebo, funciona.  Hasta que se caiga, y para no caerse m√°s tarde, vierta cianoacrilato. </p><br><p>  Tal vez as√≠ es como hubiera usado esta tabla si la pierna no se hubiera ca√≠do nuevamente.  Y est√° cubierto de pegamento.  Sin embargo, es bastante suave y se corta con un bistur√≠, por lo que se limpia con √©xito.  Pero por alguna raz√≥n no quiero usar el mismo adhesivo conductor de electricidad por segunda vez.  Intentar√© soldar la pierna.  La punta habitual del soldador no se meti√≥ dentro, pero el cono se incluy√≥ en el kit (de hecho, el cono era originalmente el √∫nico, pero debido a sus inconvenientes obvios, fue reemplazado por el habitual, con un afilado en forma de cu√±a), que se desliza por completo en √©l.  Por extra√±o que parezca, la "operaci√≥n de trasplante" tuvo √©xito y la pierna funcion√≥ como deber√≠a (una fotograf√≠a de primer plano de la pierna en KDPV). </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/db2/03e/a69/db203ea69ff912c7d012e3f39ab94c17.jpg" alt="imagen"></p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/6ec/f47/a66/6ecf47a661552fd60fd9fae056b1828c.jpg" alt="imagen"></p><br><p>  Entonces, la plancha est√° lista, es hora de ir al c√≥digo.  Ser√≠a bueno encontrar un ejemplo listo en gcc y la biblioteca CMSIS.  ¬øQu√© es mejor para esto que el sitio web oficial del fabricante?  Al final result√≥ que, STmicroelectronics no comparte mi optimismo.  El hecho de que la navegaci√≥n en el sitio se realice a trav√©s de un lugar indecente ya es familiar, ahora es dif√≠cil encontrar un sitio hecho por personas para personas.  ¬°Pero no permiten que se descargue nada del sitio!  Tal vez lo permitir√≠an despu√©s del registro, pero antes de eso no ten√≠a el deseo de registrarme en ning√∫n lado, y despu√©s de tal actitud hacia los desarrolladores, a√∫n m√°s.  ¬øPor qu√© demonios necesitas mi correo o qu√© exiges all√≠?  ¬øRecopilar datos personales, enviar spam?  ¬°Atraviesa el bosque y lo encontrar√© en el dominio p√∫blico!  Por cierto, me sorprendi√≥ un poco que el paquete correspondiente no estuviera en el repositorio, pero tal vez a ST se le ocurri√≥ alg√∫n tipo de hemorroides con licencia.  Por lo tanto, env√≠o los rayos de diarrea a los vendedores que han ideado dicha pol√≠tica, y tambi√©n para un sitio inc√≥modo. </p><br><p>  Sea como fuere, la biblioteca se encontr√≥ perfectamente en Internet (no dar√© ning√∫n enlace, nunca se sabe qu√© pasar√° con el sitio).  Una alternativa es descargar el entorno de desarrollo o CubeMX, donde est√°n incrustadas estas bibliotecas.  Es cierto, descargarlos desde el sitio oficial es igual de imposible, por lo que estamos viendo los de terceros e instal√°ndolos en una m√°quina virtual, por si "sucede algo". </p><br><p>  Descubrimos el hierro, y el tipo tambi√©n.  Es hora de finalmente tratar con el controlador.  La primera sorpresa fue esperar al tratar de usar c√≥digo de terceros en Discovery.  Utilizaron el controlador stm32l152, que a primera vista es casi el mismo que el stm32l151 que instal√©.  Adem√°s de peque√±as diferencias, result√≥ que el m√≥dulo LCD no estaba instalado en el controlador "my".  Un poco decepcionante, pero todav√≠a no pensaba usarlo.  Aunque tal diferencia podr√≠a haberse distinguido m√°s claramente que una nota al pie en la hoja de datos.  Por cierto, en una hoja de datos se recomienda en este caso conectar el pin VLCD a la fuente de alimentaci√≥n, en mi foto la resistencia de 0 ohmios correspondiente no est√° soldada, pero en realidad la instal√© de todos modos.  Sin √©l, tambi√©n funciona, pero no sobrecargue las conexiones internas.  El comportamiento del reloj en tiempo real result√≥ ser m√°s interesante.  Obstinadamente no quer√≠an trabajar, y en Internet escriben simplemente "hazlo, hazlo, funciona".  Pero no funciona.  En algunos lugares, sin embargo, se mencionaron "problemas conocidos con RTC en esta serie".  Sea como fuere, el reloj todav√≠a termin√≥, aunque solo en el generador RC incorporado.  Los intentos de bloquear el reloj de cuarzo llevaron a la espera interminable por el bit de preparaci√≥n LSE.  Trat√© de verificar si las patas del microcircuito se hab√≠an ca√≠do de las pistas en el tablero y las puse en modo GPIO normal.  El cuarzo de alta frecuencia se cay√≥.  WTF?!  En general, estos dos cuarzos no quieren trabajar juntos, pero al menos por separado funcionan como m√≠nimo. </p><br><p>  Y luego adivin√©: el superpegamento, que estaba lleno con la mitad del controlador (es l√≠quido, no se puede aplicar con precisi√≥n, y qui√©n hubiera pensado ...) da una fuga y el cuarzo interfiere con sus puntas.  Bueno, no es dif√≠cil quitar el pegamento del exterior, pero despu√©s de todo est√° adormecido incluso debajo del chip.  Y si hay suficientes fugas para el cuarzo, afectar√° el consumo.  Estoy buscando en Google, que las personas eliminan el cianoacrilato.  Ofrece agua tibia (¬øqu√© ???) y dimetilsulf√≥xido.  No creo en el agua tibia, as√≠ que compro DMSO.  Despu√©s de m√°s de una hora de encontrar una gota de qu√≠mico en la superficie del pegamento, no not√© la diferencia.  Pero notaron el cuarzo y comenzaron a trabajar m√°s o menos normalmente (¬øme pregunto por qu√©? ¬øEl dimexido reemplaz√≥ la humedad absorbida por el pegamento?).  Sin embargo, esto no me convenci√≥, y los restos de pegamento siguen siendo una molestia ... por nada que est√© en la parte inferior del tablero y no sea particularmente visible.  Por cierto, el agua tibia que lav√© con dimexido no afect√≥ el pegamento (no me sorprende).  Descubr√≠ que existe un removedor de pegamento, en el mismo tubo que el pegamento, solo en p√∫rpura.  Bueno, al menos deber√≠a funcionar!  Result√≥ que puede funcionar y funciona, pero su consistencia se asemeja a la crema agria y simplemente no cabe debajo del microcircuito.  Bueno, ¬øde qu√© te sirve, borrador?  Afuera, puedo limpiarlo.  √öltima oportunidad: rara vez se menciona la acetona.  Tengo un poco de miedo por las piezas de pl√°stico, pero reemplazarlas es f√°cil.  Pongo acetona en un frasco de vidrio, tiro una tabla all√≠ y la dejo toda la noche.  A la ma√±ana siguiente result√≥ que la acetona realmente funciona, ¬°y c√≥mo!  No hab√≠a rastro de pegamento.  Adem√°s, el bot√≥n de uno de los botones se disolvi√≥.  Curiosamente, el segundo sobreviviente, probablemente, estaba hecho de pl√°stico m√°s estable.  Me sorprendi√≥ un poco que el otro pl√°stico permaneciera intacto, incluso las inscripciones sobrevivieron.  Bueno, excelente, pero el bot√≥n puede ser reemplazado. </p><br><p>  Ahora logramos lanzar RTC desde el reloj de cuarzo, tocar el modo de suspensi√≥n y comunicarnos con otros perif√©ricos.  Y tambi√©n, para que fuera completamente t√≠mido, aplic√≥ firmas al tablero.  Pero no con un marcador (¬øde repente se ba√±a de nuevo en solventes?) Pero se rasca con un bistur√≠.  ¬°Por siglos! </p><br><p>  Bueno, para las generaciones futuras, dejar√© ejemplos de c√≥digo para ambos controladores, junto con bibliotecas, archivos MAKE y m√°s.  Solo queda instalar gcc-arm-none-eabi, openocd, stm32flash y otras bagatelas. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">stm32f103</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">stm32l151</a> </p><br><p>  En los comentarios, se les aconsej√≥ varias veces que no realizaran LUT y ordenaran la fabricaci√≥n de tableros a profesionales.  Para la creaci√≥n de prototipos, como aqu√≠, no veo ninguna raz√≥n.  Otra cosa es si necesita una placa multicapa, o un paso a√∫n m√°s peque√±o, o un estuche BGA, o algo m√°s que es dif√≠cil de hacer en casa.  Y, por supuesto, en la fabricaci√≥n de la versi√≥n final del dispositivo y la replicaci√≥n.  No es bueno si el cliente desmonta el caso <del>  soldado de PCB, </del>  y descubrir√° una tabla aserrada torcida sin m√°scara y con puentes de MGTF. </p><br><p>  Conclusiones: </p><br><ol><li>  Puede crear tablas de depuraci√≥n para usted si lo desea, no son peores que las compradas.  Pero el programador del depurador es a√∫n mejor comprar si no es demasiado caro.  Por supuesto, puede hacerlo, pero no cambiar√° el esquema y, de ser as√≠, no ser√° mejor que la compra.  M√°s barato, muy probablemente, tambi√©n.  A menos que el controlador superfluo permanezca o con un problema de entrega. </li><li>  No se olvide del conector de programaci√≥n de respaldo UART1, bueno, al mismo tiempo, los puentes BOOT0, BOOT1.  Adem√°s de la programaci√≥n real, es bastante conveniente depurar un programa usando UART. </li><li>  Hay dos claves en el caso LQFP64, una de las cuales es falsa.  Tendr√° que navegar hasta la inscripci√≥n para mirar con los pies a la izquierda. </li><li>  Soldar componentes con un peque√±o paso es solo bajo un microscopio.  De lo contrario, es dif√≠cil determinar si todo ha desaparecido y si hay "mocos".  Bueno, ya sea en equipos "profesionales" como un secador especial, pasta de soldadura, etc.  No s√© aqu√≠, estoy escribiendo sobre tecnolog√≠a de aficionados. </li><li>  No guardar en grosor de PCB.  Se dobla y esto puede ser suficiente para da√±ar las resistencias smd y, probablemente, los condensadores.  Esto no da miedo a la salida, y los componentes con conclusiones dobladas (transistores, microcircuitos) probablemente sobrevivir√°n. </li><li>  Hacer conectores para cuarzo es una p√©rdida de tiempo.  No los cambiar√°, as√≠ que solo suelde en el tablero. </li><li>  Beber un milpi√©s con una cuchilla de afeitar es solo en el caso m√°s extremo, cuando no hay secador de pelo.  De lo contrario, el riesgo de da√±arlo es demasiado grande. </li><li>  ¬°Incluso si la pierna se ha ca√≠do del microcircuito, se puede restaurar!  Incluso cuando el paso es de 0,5 mm.  Lo principal es usar soldadura, no pegamento conductor. </li><li>  ¬°Nunca llene el chip con pegamento de cianoacrilato (s√∫per pegamento)!  No tiene las caracter√≠sticas el√©ctricas y mec√°nicas adecuadas. </li><li>  La acetona es la m√°s adecuada para eliminar el superpegamento de las √°reas dif√≠ciles de alcanzar.  Se disuelve por completo.  Lo principal es asegurarse de que los componentes circundantes no se vean afectados.  Desde lugares no dif√≠ciles de alcanzar se pueden eliminar mec√°nicamente. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/456280/">https://habr.com/ru/post/456280/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../456266/index.html">El resumen de materiales interesantes para el desarrollador m√≥vil # 302 (del 10 al 16 de junio)</a></li>
<li><a href="../456270/index.html">Redis Stream - Fiabilidad y escalabilidad de sus sistemas de mensajer√≠a</a></li>
<li><a href="../456272/index.html">¬øQu√© es Android Lint y c√≥mo te ayuda a escribir c√≥digo compatible?</a></li>
<li><a href="../456274/index.html">Psic√≥logos: los robots sexuales conducir√°n a un aumento en el n√∫mero de personas sin pareja que no necesitan relaciones con otras personas</a></li>
<li><a href="../456276/index.html">¬øQu√© es la informaci√≥n?</a></li>
<li><a href="../456282/index.html">Gr√°ficos multidimensionales en Python: de tridimensional a seis dimensional</a></li>
<li><a href="../456288/index.html">MAM: montaje frontend sin dolor</a></li>
<li><a href="../456290/index.html">Telegrama Unidad de red ilimitada. Gratis</a></li>
<li><a href="../456294/index.html">Diferencias entre LabelEncoder y OneHotEncoder en SciKit Learn</a></li>
<li><a href="../456296/index.html">El mundo de la hiperesfera tridimensional. Trazado de rayos geod√©sicos en un universo cerrado con geometr√≠a esf√©rica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>