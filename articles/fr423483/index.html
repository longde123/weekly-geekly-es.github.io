<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëäüèæ üë©üèº‚Äçüåæ üë©‚Äçüë©‚Äçüë¶‚Äçüë¶ Trouver la bonne fa√ßon de s√©parer le contenu d'un site Web √† l'aide de Webpack üíÜüèΩ üêó üîú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Trouver la meilleure fa√ßon d'organiser le mat√©riel d'un projet Web peut √™tre une t√¢che ardue. Il existe de nombreux sc√©narios diff√©rents permettant au...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Trouver la bonne fa√ßon de s√©parer le contenu d'un site Web √† l'aide de Webpack</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/423483/">  Trouver la meilleure fa√ßon d'organiser le mat√©riel d'un projet Web peut √™tre une t√¢che ardue.  Il existe de nombreux sc√©narios diff√©rents permettant aux utilisateurs de travailler avec des projets, de nombreuses technologies et d'autres facteurs qui doivent √™tre pris en compte. <br><br>  L'auteur du mat√©riel, dont nous publions la traduction aujourd'hui, dit qu'il veut dire ici tout ce que vous devez savoir pour la pr√©paration comp√©tente du mat√©riel de projet Web pour le travail.  Premi√®rement, il s'agira de choisir une strat√©gie de s√©paration des fichiers de site la mieux adapt√©e √† un projet particulier et √† ses utilisateurs.  Deuxi√®mement, les moyens de mettre en ≈ìuvre la strat√©gie choisie seront examin√©s. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/7fe/270/c2c/7fe270c2cd5aad585ca616a6f3704704.jpg" alt="image"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Informations g√©n√©rales</font> </h2><br>  Selon le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">glossaire Webpack</a> , il existe deux strat√©gies de partage de fichiers.  Il s'agit du fractionnement de bundle et du fractionnement de code.  Ces termes peuvent sembler √™tre utilis√©s de mani√®re interchangeable, mais ils ne le sont pas. <br><br><ul><li>  Le fractionnement d'un bundle est une technique pour diviser de gros bundles en plusieurs parties, qui sont des fichiers plus petits.  Ces fichiers, dans tous les cas, comme lorsque vous travaillez avec un seul bundle, seront t√©l√©charg√©s par tous les utilisateurs du site.  La force de cette technique est d'am√©liorer l'utilisation des m√©canismes de mise en cache bas√©s sur un navigateur. </li><li>  La s√©paration de code est une approche qui implique de charger dynamiquement le code selon les besoins.  Cela conduit au fait que l'utilisateur ne t√©l√©charge que le code dont il a besoin pour travailler avec une certaine partie du site √† un certain moment. </li></ul><br>  Le fractionnement de code semble √™tre beaucoup plus int√©ressant que le fractionnement de code.  Et, en fait, on a le sentiment que dans de nombreux articles sur notre sujet, l'accent est mis sur la s√©paration du code, cette technique est consid√©r√©e comme le seul moyen int√©ressant d'optimiser les mat√©riaux du site. <br><br>  Cependant, je voudrais dire que pour de nombreux sites, c'est la premi√®re strat√©gie qui a beaucoup plus de valeur - la s√©paration des bundles.  Et, peut-√™tre, litt√©ralement, tous les projets Web peuvent gagner √† sa mise en ≈ìuvre. <br><br>  Parlons de cela plus en d√©tail. <br><br><h2>  <font color="#3AC1EF">S√©paration des faisceaux</font> </h2><br>  La technique de fractionnement des faisceaux est bas√©e sur une id√©e tr√®s simple.  Si vous avez un gros fichier et que vous y changez une seule ligne de code, l'utilisateur r√©gulier devra t√©l√©charger l'int√©gralit√© du fichier lors de sa prochaine visite sur le site.  Cependant, si vous divisez ce fichier en deux fichiers, le m√™me utilisateur devra t√©l√©charger uniquement celui qui a √©t√© modifi√© et le deuxi√®me fichier sera extrait du cache du navigateur. <br><br>  Il convient de noter que, puisque l'optimisation des mat√©riaux du site en fractionnant les bundles est li√©e √† la mise en cache, les utilisateurs visitant le site pour la premi√®re fois devront de toute fa√ßon t√©l√©charger tous les mat√©riaux, donc cela ne fait aucune diff√©rence pour eux que ces mat√©riaux soient pr√©sent√©s sous la forme d'un fichier unique ou de plusieurs . <br><br>  Il me semble que trop de discussions sur la performance des projets web sont d√©di√©es aux utilisateurs qui visitent le site pour la premi√®re fois.  C'est peut-√™tre le cas, en partie √† cause de l'importance de la premi√®re impression que le projet va donner √† l'utilisateur, ainsi que du fait que la quantit√© de donn√©es transmises aux utilisateurs lors de leur premi√®re visite sur le site est simple et pratique √† mesurer. <br><br>  En ce qui concerne les visiteurs r√©guliers, il peut √™tre difficile de mesurer l'impact des techniques d'optimisation des mat√©riaux qui leur sont appliqu√©es.  Mais nous devons simplement conna√Ætre les cons√©quences de telles optimisations. <br><br>  Pour analyser ces choses, vous avez besoin de quelque chose comme une feuille de calcul.  Vous devrez √©galement cr√©er une liste stricte de conditions dans lesquelles nous pouvons tester chacune des strat√©gies de mise en cache √©tudi√©es. <br><br>  Voici un script qui correspond √† la description g√©n√©rale donn√©e dans le paragraphe pr√©c√©dent: <br><br><ul><li>  Alice visite notre site une fois par semaine pendant 10 semaines. </li><li>  Nous mettons √† jour le site une fois par semaine. </li><li>  Chaque semaine, nous mettons √† jour la page de liste des produits. </li><li>  De plus, nous avons une page avec les d√©tails du produit, mais nous n'y travaillons pas encore. </li><li>  Au cours de la cinqui√®me semaine, nous ajoutons un nouveau package npm aux documents du projet. </li><li>  Au cours de la huiti√®me semaine, nous mettons √† jour l'un des packages npm d√©j√† utilis√©s dans le projet. </li></ul><br>  Il y a des gens (comme moi) qui essaieront de rendre un tel sc√©nario aussi r√©aliste que possible.  Mais vous n'avez pas besoin de faire √ßa.  Le vrai sc√©nario ici n'a pas vraiment d'importance.  Pourquoi en est-il ainsi - nous le saurons bient√¥t. <br><br><h3>  <font color="#3AC1EF">‚ñç Conditions initiales</font> </h3><br>  Supposons que la taille totale de notre package JavaScript soit consid√©rable de 400 Ko et que, dans les conditions actuelles, nous transf√©rons tout cela √† l'utilisateur sous la forme d'un seul fichier <code>main.js</code>  Nous avons une configuration Webpack, qui, en termes g√©n√©raux, est similaire √† la suivante (j'ai supprim√© les choses qui ne sont pas pertinentes pour notre conversation): <br><br><pre> <code class="hljs lua">const <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); module.exports = { entry: <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'src/index.js'</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">output</span></span>: {   <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'dist'</span></span>),   filename: <span class="hljs-string"><span class="hljs-string">'[name].[contenthash].js'</span></span>, }, };</code> </pre> <br>  Webpack nomme le fichier <code>main.js</code> r√©sultant lorsqu'il existe une seule entr√©e dans la configuration. <br><br>  Si vous n'avez pas une tr√®s bonne id√©e de travailler avec le cache, gardez √† l'esprit que chaque fois que j'√©cris <code>main.js</code> ici, je veux dire quelque chose comme <code>main.xMePWxHo.js</code> .  Une s√©quence de caract√®res fous est un hachage du contenu d'un fichier, ce qu'on appelle <code>contenthash</code> dans la configuration.  L'utilisation de cette approche conduit au fait que, lors du changement de code, les noms de fichiers changent √©galement, ce qui oblige le navigateur √† t√©l√©charger de nouveaux fichiers. <br><br>  Conform√©ment au sc√©nario ci-dessus, lorsque nous <code>contenthash</code> des modifications au code du site chaque semaine, la ligne <code>contenthash</code> du package change.  En cons√©quence, visitant chaque semaine notre site, Alice est oblig√©e de t√©l√©charger un nouveau fichier de 400 Ko. <br><br>  Si nous fabriquons une belle tablette (avec une ligne de r√©sultat inutile jusqu'√† pr√©sent) contenant des donn√©es sur le volume hebdomadaire de chargement de donn√©es par ce fichier, alors nous obtenons ce qui suit. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b6/fa6/424/3b6fa6424d43c147b40c5347e4dfa104.png"></div><br>  <i><font color="#999999">La quantit√© de donn√©es t√©l√©charg√©es par l'utilisateur</font></i> <br><br>  En cons√©quence, il appara√Æt que l'utilisateur, en 10 semaines, a t√©l√©charg√© 4,12 Mo de code.  Cet indicateur peut √™tre am√©lior√©. <br><br><h3>  <font color="#3AC1EF">‚ñçS√©paration des packages tiers du code principal</font> </h3><br>  Divisez le grand emballage en deux parties.  Notre propre code sera dans le fichier <code>main.js</code> et le code tiers dans le fichier <code>vendor.js</code> .  C'est facile √† faire, la configuration Webpack suivante nous aidera avec ceci: <br><br><pre> <code class="hljs lua">const <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); module.exports = { entry: <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'src/index.js'</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">output</span></span>: {   <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'dist'</span></span>),   filename: <span class="hljs-string"><span class="hljs-string">'[name].[contenthash].js'</span></span>, }, optimization: {   splitChunks: {     chunks: <span class="hljs-string"><span class="hljs-string">'all'</span></span>,   }, }, };</code> </pre> <br>  Webpack 4 essaie de rendre la vie aussi simple que possible pour le d√©veloppeur, il fait donc tout ce qu'il peut et ne lui demande pas de savoir exactement comment diviser les bundles en parties. <br><br>  Ce type de comportement automatique du programme conduit √† quelques d√©lices, tels que: "Eh bien, quel charme ce Webpack est", et √† de nombreuses questions dans l'esprit: "Qu'est-ce que cela fait avec mes bundles?". <br><br>  Dans tous les cas, l'ajout d' <code>optimization.splitChunks.chunks = 'all'</code> √† la configuration de configuration indique √† Webpack que nous en avons besoin pour tout prendre dans <code>node_modules</code> et le mettre dans le <code>vendors~main.js</code> <br><br>  Apr√®s avoir fait une telle s√©paration de base du bundle, Alice, qui visite r√©guli√®rement notre site chaque semaine, t√©l√©chargera le fichier <code>main.js</code> de 200 Ko √† chaque fois qu'elle visite.  Mais elle ne t√©l√©chargera le fichier <code>vendor.js</code> que trois fois.  Cela se produira lors des visites des premi√®re, cinqui√®me et huiti√®me semaines.  Voici le tableau correspondant, dans lequel, par la volont√© du destin, les tailles des <code>vendor.js</code> <code>main.js</code> et <code>vendor.js</code> au cours des quatre premi√®res semaines co√Øncident et sont √©gales √† 200 Ko. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f52/61f/49f/f5261f49f5f3dba9c34fec5f83a142b2.png"></div><br>  <i><font color="#999999">La quantit√© de donn√©es t√©l√©charg√©es par l'utilisateur</font></i> <br><br>  En cons√©quence, il s'av√®re que la quantit√© de donn√©es t√©l√©charg√©es par l'utilisateur sur 10 semaines √©tait de 2,64 Mo.  Autrement dit, par rapport √† ce qui √©tait avant la s√©paration du faisceau, le volume a diminu√© de 36%.  Pas un si mauvais r√©sultat obtenu en ajoutant quelques lignes au fichier de configuration.  Soit dit en passant, avant de poursuivre la lecture - faites de m√™me dans votre projet.  Et si vous avez besoin de passer de Webpack 3 √† 4 - faites-le et ne vous inqui√©tez pas, car le processus est assez simple et toujours gratuit. <br><br>  Il me semble que l'am√©lioration consid√©r√©e ici semble quelque peu abstraite, puisqu'elle s'√©tale sur 10 semaines.  Cependant, si l'on consid√®re la quantit√© de donn√©es envoy√©es √† un utilisateur fid√®le, il s'agit d'une r√©duction honn√™te de ce volume de 36%.  C'est un tr√®s bon r√©sultat, mais il peut √™tre am√©lior√©. <br><br><h3>  <font color="#3AC1EF">‚ñç Mettez en surbrillance les packages dans des fichiers s√©par√©s</font> </h3><br>  Le fichier <code>vendor.js</code> souffre du m√™me probl√®me que l'original <code>main.js</code>  Il consiste en ce que la modification de tout package inclus dans ce fichier oblige un utilisateur r√©gulier √† t√©l√©charger √† nouveau l'int√©gralit√© du fichier. <br><br>  Pourquoi ne cr√©ons-nous pas des fichiers s√©par√©s pour chaque paquet npm?  Ce n'est pas difficile √† faire, alors d√©composons notre <code>react</code> , <code>lodash</code> , <code>redux</code> , <code>moment</code> , etc. dans des fichiers s√©par√©s.  La configuration Webpack suivante nous aidera avec ceci: <br><br><pre> <code class="hljs markdown">const path = require('path'); const webpack = require('webpack'); module.exports = { entry: path.resolve(<span class="hljs-strong"><span class="hljs-strong">__dirname, 'src/index.js'), plugins: [   new webpack.HashedModuleIdsPlugin(), //        ], output: {   path: path.resolve(__</span></span>dirname, 'dist'),   filename: '[<span class="hljs-string"><span class="hljs-string">name</span></span>].[<span class="hljs-string"><span class="hljs-string">contenthash</span></span>].js', }, optimization: {   runtimeChunk: 'single',   splitChunks: {     chunks: 'all',     maxInitialRequests: Infinity,     minSize: 0,     cacheGroups: {       vendor: {         test: /[<span class="hljs-string"><span class="hljs-string">\\/</span></span>]node<span class="hljs-emphasis"><span class="hljs-emphasis">_modules[\\/]/,         name(module) {           //  ,   node_</span></span>modules/packageName/not/this/part.js           //  node<span class="hljs-emphasis"><span class="hljs-emphasis">_modules/packageName           const packageName = module.context.match(/[\\/]node_</span></span>modules[<span class="hljs-string"><span class="hljs-string">\\/</span></span>](<span class="hljs-link"><span class="hljs-link">.*?</span></span>)([\\/]|$)/)[1];           //  npm- ,   ,           //  URL,        @           return <span class="hljs-code"><span class="hljs-code">`npm.${packageName.replace('@', '')}`</span></span>;         },       },     },   }, }, };</code> </pre> <br>  Dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation,</a> vous pouvez trouver une excellente explication des constructions utilis√©es ici, mais je consacre encore un peu de temps √† raconter certaines choses, car il m'a fallu beaucoup de temps pour les utiliser correctement. <br><br><ul><li>  Webpack a des installations standard tout √† fait raisonnables, qui, en fait, ne sont pas si raisonnables.  Par exemple, le nombre maximal de fichiers de sortie est d√©fini sur 3, la taille de fichier minimale est de 30 Ko (c'est-√†-dire que les fichiers plus petits seront fusionn√©s).  Je l'ai red√©fini. </li><li>  <code>cacheGroups</code> est l'endroit o√π nous d√©finissons les r√®gles de regroupement des donn√©es par Webpack dans les fichiers de sortie.  J'ai un groupe ici, <code>vendor</code> , qui sera utilis√© pour tout module charg√© √† partir de <code>node_modules</code> .  Habituellement, le nom du fichier de sortie est donn√© sous forme de cha√Æne.  Mais j'ai donn√© un <code>name</code> tant que fonction qui sera appel√©e pour chaque fichier trait√©.  Ensuite, je prends le nom du package dans le chemin du module.  En cons√©quence, nous obtenons un fichier pour chaque package.  Par exemple, <code>npm.react-dom.899sadfhj4.js</code> . </li><li>  Les noms de package, afin qu'ils puissent √™tre publi√©s dans npm, doivent √™tre adapt√©s √† une utilisation dans les <a href="">URL</a> , nous n'avons donc pas besoin d'effectuer l'op√©ration <code>encodeURI</code> sur les noms de <code>packageName</code> .  Cependant, je suis tomb√© sur un probl√®me que le serveur .NET refuse de travailler avec des fichiers qui ont le symbole <code>@</code> dans leurs noms (ces noms sont utilis√©s pour les packages avec une port√©e de nom donn√©e, les soi-disant packages de port√©e), donc moi, dans le correspondant fragment de code, je me d√©barrasse de ces caract√®res. </li></ul><br>  La configuration ci-dessus de Webpack est bonne en ce sens que vous pouvez la configurer une fois, puis l'oublier.  Il ne n√©cessite pas de faire r√©f√©rence √† des packages sp√©cifiques par leur nom.Par cons√©quent, apr√®s sa cr√©ation, il reste pertinent, m√™me lors de la modification de la composition des packages. <br><br>  Alice, notre visiteur r√©gulier, <code>main.js</code> toujours <code>main.js</code> 200 kilo-octets chaque semaine, et la premi√®re fois qu'elle visite le site, elle doit t√©l√©charger 200 Ko de packages npm, mais elle n'a pas √† t√©l√©charger les m√™mes packages deux fois. <br><br>  Vous trouverez ci-dessous une nouvelle version du tableau avec des informations sur le volume de t√©l√©chargements de donn√©es hebdomadaires.  Par une √©trange co√Øncidence, la taille de chaque fichier avec les packages npm est de 20 Ko. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f98/787/006/f98787006dc9320ca37b680b23534e71.png"></div><br>  <i><font color="#999999">La quantit√© de donn√©es t√©l√©charg√©es par l'utilisateur</font></i> <br><br>  Maintenant, le volume de donn√©es t√©l√©charg√©es en 10 semaines est de 2,24 Mo.  Cela signifie que nous avons am√©lior√© le taux de base de 44%.  Le r√©sultat est d√©j√† tr√®s d√©cent, mais la question se pose de savoir s'il est possible de le faire pour obtenir un r√©sultat sup√©rieur √† 50%.  Si cela se produit, ce sera tout simplement g√©nial. <br><br><h3>  <font color="#3AC1EF">‚ñç Division du code d'application en fragments</font> </h3><br>  Nous revenons au fichier <code>main.js</code> , que la malheureuse Alice doit constamment t√©l√©charger. <br><br>  Comme je l'ai dit ci-dessus, il y a deux sections distinctes sur notre site Web.  Le premier est une liste de produits, le second est une page avec des informations d√©taill√©es sur le produit.  La taille du code, unique pour chacun d'eux, est de 25 Ko (et 150 Ko de code sont utilis√©s √† la fois l√† et l√†). <br><br>  La page d'information sur le produit n'est pas sujette √† changement, comme nous l'avons d√©j√† perfectionn√©e.  Par cons√©quent, si nous extrayons son code dans un fichier s√©par√©, ce fichier, la plupart du temps utilis√© avec le site, sera t√©l√©charg√© dans le navigateur depuis le cache. <br><br>  De plus, il s'est av√©r√© que nous avons un √©norme fichier SVG int√©gr√© utilis√© pour le rendu des ic√¥nes, qui p√®se jusqu'√† 25 Ko et change rarement. <br><br>  Il faut faire quelque chose avec √ßa. <br><br>  Nous avons cr√©√© manuellement plusieurs points d'entr√©e, indiquant √† Webpack qu'il devait cr√©er un fichier distinct pour chacune de ces entit√©s. <br><br><pre> <code class="hljs markdown">module.exports = { entry: {   main: path.resolve(<span class="hljs-strong"><span class="hljs-strong">__dirname, 'src/index.js'),   ProductList: path.resolve(__</span></span>dirname, 'src/ProductList/ProductList.js'),   ProductPage: path.resolve(<span class="hljs-strong"><span class="hljs-strong">__dirname, 'src/ProductPage/ProductPage.js'),   Icon: path.resolve(__</span></span>dirname, 'src/Icon/Icon.js'), }, output: {   path: path.resolve(<span class="hljs-emphasis"><span class="hljs-emphasis">__dirname, 'dist'),   filename: '[name].[contenthash:8].js', }, plugins: [   new webpack.HashedModuleIdsPlugin(), //        ], optimization: {   runtimeChunk: 'single',   splitChunks: {     chunks: 'all',     maxInitialRequests: Infinity,     minSize: 0,     cacheGroups: {       vendor: {         test: /[\\/]node_</span></span>modules[<span class="hljs-string"><span class="hljs-string">\\/</span></span>]/,         name(module) {           //  ,   node<span class="hljs-emphasis"><span class="hljs-emphasis">_modules/packageName/not/this/part.js           //  node_</span></span>modules/packageName           const packageName = module.context.match(/[<span class="hljs-string"><span class="hljs-string">\\/</span></span>]node_modules[<span class="hljs-string"><span class="hljs-string">\\/</span></span>](<span class="hljs-link"><span class="hljs-link">.*?</span></span>)([\\/]|$)/)[1];           //  npm- ,   ,           //  URL,        @           return <span class="hljs-code"><span class="hljs-code">`npm.${packageName.replace('@', '')}`</span></span>;         },       },     },   }, }, };</code> </pre> <br>  Le Webpack, qui travaille dur, cr√©era en outre des fichiers pour ce qui est courant, par exemple, <code>ProductList</code> et <code>ProductPage</code> , c'est-√†-dire qu'il n'y aura pas de code en double. <br><br>  Ce que nous venons de faire permettra √† Alice d'√©conomiser 50 Ko de trafic presque chaque semaine.  Veuillez noter que nous avons modifi√© le fichier de description des ic√¥nes au cours de la sixi√®me semaine.  Voici notre table traditionnelle. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62f/b9e/8ed/62fb9e8ed563fd4aa7a61fdcec61fc2d.png"></div><br>  <i><font color="#999999">La quantit√© de donn√©es t√©l√©charg√©es par l'utilisateur</font></i> <br><br>  Maintenant, en seulement dix semaines, seulement 1,815 Mo de donn√©es ont √©t√© t√©l√©charg√©es.  Cela signifie que les √©conomies de trafic ont √©t√© impressionnantes de 56%.  Conform√©ment √† notre sc√©nario th√©orique, un utilisateur r√©gulier travaillera toujours avec ce niveau d'√©conomies. <br><br>  Tout cela est d√ª aux modifications apport√©es √† la configuration de Webpack.  Nous n'avons pas modifi√© le code d'application pour obtenir de tels r√©sultats. <br><br>  Plus t√¥t, j'ai parl√© du fait que le sc√©nario sp√©cifique dans lequel un tel test est effectu√©, en fait, ne joue pas un r√¥le sp√©cial.  Cela est d√ª au fait que, quel que soit le sc√©nario utilis√©, la conclusion de tout ce dont nous avons parl√© sera la m√™me: la division de l'application en petits fichiers qui ont du sens lorsqu'elle est appliqu√©e √† son architecture nous permet de r√©duire le volume des donn√©es du site, charg√© par ses utilisateurs r√©guliers. <br><br>  Nous allons bient√¥t commencer √† parler de s√©paration de code, mais je voudrais d'abord r√©pondre √† trois questions auxquelles vous pensez probablement maintenant. <br><br><h3>  <font color="#3AC1EF">‚ñç Question num√©ro 1.</font>  <font color="#3AC1EF">La n√©cessit√© d'effectuer de nombreuses requ√™tes ne nuit-elle pas √† la vitesse de chargement du site?</font> </h3><br>  Vous pouvez donner une r√©ponse courte et simple √† cette question: "Non, cela ne fait pas de mal."  Une situation similaire a entra√Æn√© un probl√®me dans le pass√©, lorsque le protocole HTTP / 1.1 √©tait utilis√©, et lors de l'utilisation de HTTP / 2, ce n'est plus pertinent. <br><br>  Cependant, il convient de noter que dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://medium.com/%40asyncmax/the-right-way-to-bundle-your-assets-for-faster-sites-over-">cet</a> article, publi√© en 2016, et dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=http://engineering.khanacademy.org/posts/js-packaging-">cet</a> article de la Khan Academy 2015, les conclusions sont tir√©es que m√™me en utilisant HTTP / 2, l'utilisation d'un trop grand nombre de fichiers ralentit le t√©l√©chargement.  Mais dans ces deux mat√©riaux, ¬´trop¬ª signifie ¬´plusieurs centaines¬ª.  Par cons√©quent, il convient de se rappeler que si vous devez travailler avec des centaines de fichiers, les restrictions sur le traitement parall√®le des donn√©es peuvent affecter leur vitesse de t√©l√©chargement. <br><br>  Si vous √™tes int√©ress√©, la prise en charge HTTP / 2 est disponible dans IE 11 sur Windows 10. De plus, j'ai fait une √©tude compl√®te parmi ceux qui utilisent des syst√®mes plus anciens.  Ils ont d√©clar√© √† l'unanimit√© que la vitesse de chargement de leur site Web n'√©tait pas particuli√®rement pr√©occupante. <br><br><h3>  <font color="#3AC1EF">‚ñç Question num√©ro 2.</font>  <font color="#3AC1EF">Les bundles Webpack ont ‚Äã‚Äãun code d'assistance.</font>  <font color="#3AC1EF">Cela cr√©e-t-il une charge suppl√©mentaire sur le syst√®me?</font> </h3><br>  Oui. <br><br><h3>  <font color="#3AC1EF">‚ñç Question num√©ro 3.</font>  <font color="#3AC1EF">Lorsque vous travaillez avec de nombreux petits fichiers, leur niveau de compression se d√©t√©riore, non?</font> </h3><br>  Oui, c'est √©galement vrai.  En fait, je voudrais dire ceci: <br><br><ul><li>  Plus de fichiers signifie plus de code d'assistance Webpack. </li><li>  Plus de fichiers signifie moins de compression. </li></ul><br>  Voyons cela pour comprendre √† quel point c'est mauvais. <br><br>  Je viens d'effectuer un test dans lequel le code d'un fichier de 190 Ko a √©t√© divis√© en 19 parties.  Cela a ajout√© environ 2% √† la quantit√© de donn√©es envoy√©es au navigateur. <br><br>  En cons√©quence, il s'av√®re que lors de la premi√®re visite sur le site, l'utilisateur t√©l√©chargera 2% de donn√©es en plus, et lors des visites suivantes - 60% de moins, et cela continuera pendant tr√®s, tr√®s longtemps. <br>  Cela vaut-il la peine de s'inqui√©ter?  Non, √ßa n'en vaut pas la peine. <br><br>  Lorsque j'ai compar√© un syst√®me utilisant 1 fichier et un syst√®me avec 19 fichiers, je l'ai test√© en utilisant diff√©rents protocoles, dont HTTP / 1.1.  Le tableau ci-dessous soutient fortement l'id√©e qu'avoir plus de fichiers signifie mieux. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a85/2fa/47c/a852fa47c36befc2234794c9cae1b9c1.png"></div><br>  <i><font color="#999999">Donn√©es sur l'utilisation de 2 versions d'un site h√©berg√© sur un h√©bergement statique Firebase, dont le code mesure 190 Ko, mais, dans le premier cas, il est regroup√© dans 1 fichier et dans le second, il est divis√© en 19</font></i> <br><br>  Lorsque vous travaillez dans des r√©seaux 3G et 4G, le t√©l√©chargement d'un site avec 19 fichiers a pris 30% moins de temps que le t√©l√©chargement d'un site avec un fichier. <br><br>  Il y a beaucoup de bruit dans les donn√©es pr√©sent√©es dans le tableau.  Par exemple, une session de t√©l√©chargement d'un site par 4G (Ex√©cution 2 dans le tableau) a pris 646 ms, une autre (Ex√©cution 4) - 1116 ms, ce qui est 73% plus long.  Par cons√©quent, il y a un sentiment que dire que HTTP / 2 est "30% plus rapide" est quelque peu malhonn√™te. <br><br>  J'ai cr√©√© ce tableau afin de voir ce que donne l'utilisation de HTTP / 2.  Mais, en fait, la seule chose que l'on puisse dire ici, c'est que l'utilisation de HTTP / 2 n'affecte probablement pas particuli√®rement le chargement des pages. <br><br>  Les deux derni√®res lignes de ce tableau ont √©t√© une v√©ritable surprise.  Voici les r√©sultats pour pas la derni√®re version de Windows avec IE11 et HTTP / 1.1.  Si j'essayais de pr√©dire les r√©sultats du test √† l'avance, je dirais certainement qu'une telle configuration chargerait les mat√©riaux beaucoup plus lentement que les autres.  Certes, une connexion r√©seau tr√®s rapide a √©t√© utilis√©e ici, et moi, pour de tels tests, je devrais probablement utiliser quelque chose de plus lent. <br><br>  Et maintenant je vais vous raconter une histoire.  Pour explorer mon site sur un syst√®me tr√®s ancien, j'ai t√©l√©charg√© la machine virtuelle Windows 7 depuis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le site Web de</a> Microsoft.  IE8 y √©tait install√©, que j'ai d√©cid√© de mettre √† niveau vers IE9.  Pour ce faire, je suis all√© sur la page Microsoft con√ßue pour t√©l√©charger IE 9. Mais je n'ai pas pu le faire. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3b/ee6/529/a3bee65295b45bf2467da37252674cf0.png"></div><br>  <i><font color="#999999">Cette malchance ...</font></i> <br><br>  Soit dit en passant, si nous parlons de HTTP / 2, je tiens √† noter que ce protocole est int√©gr√© dans Node.js.  Si vous voulez exp√©rimenter, vous pouvez utiliser le petit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">serveur HTTP / 2 que</a> j'ai √©crit avec le support du cache de r√©ponse, gzip et brotli. <br><br>  Peut-√™tre, j'ai dit tout ce que je voulais sur la m√©thode de s√©paration des faisceaux.  Je pense que le seul inconv√©nient de cette approche, lors de l'utilisation de laquelle les utilisateurs doivent t√©l√©charger un grand nombre de fichiers, en fait, n'est pas un tel ¬´inconv√©nient¬ª. <br><br>  Parlons maintenant de la s√©paration du code. <br><br><h2>  <font color="#3AC1EF">S√©paration de code</font> </h2><br>  L'id√©e principale de la technique de fractionnement de code est: "Ne t√©l√©chargez pas de code inutile."  On m'a dit que l'utilisation de cette approche n'a de sens que pour certains sites. <br><br>  Je pr√©f√®re, en ce qui concerne la s√©paration de code, utiliser la r√®gle 20/20 que je viens de formuler.  S'il y a une partie du site qui n'est visit√©e que par 20% des utilisateurs, et que sa fonctionnalit√© est fournie par plus de 20% du code JavaScript du site, alors ce code doit √™tre t√©l√©charg√© uniquement sur demande. <br><br>  Bien entendu, ces chiffres ne sont pas absolus, ils peuvent √™tre ajust√©s √† une situation sp√©cifique et, en r√©alit√©, il existe des sc√©narios beaucoup plus complexes que celui d√©crit ci-dessus.  La chose la plus importante ici est l'√©quilibre, et il est tout √† fait normal de ne pas utiliser du tout la s√©paration de code, si cela n'a aucun sens pour votre site. <br><br><h3>  <font color="#3AC1EF">‚ñç S√©par√© ou non?</font> </h3><br>  Comment trouver la r√©ponse √† la question de savoir si vous avez besoin d'une s√©paration de code ou non?  Supposons que vous ayez une boutique en ligne et que vous envisagiez de s√©parer du reste du code le code utilis√© pour recevoir le paiement des clients, car seulement 30% des visiteurs ach√®tent quelque chose chez vous. <br><br>  Que puis-je dire?  Tout d'abord, vous devez travailler √† remplir le magasin et √† vendre quelque chose qui serait int√©ressant pour plus de visiteurs du site.  Deuxi√®mement, vous devez comprendre combien de code est compl√®tement unique pour la section du site o√π le paiement est accept√©.  √âtant donn√© que vous devriez toujours faire un ¬´fractionnement de bundle¬ª avant le ¬´fractionnement de code¬ª, et vous l'esp√©rez, vous savez probablement d√©j√† de quelles tailles le code nous int√©resse. <br><br>  Peut-√™tre que ce code peut s'av√©rer plus petit que vous ne le pensez, donc avant de vous r√©jouir de la nouvelle opportunit√© d'optimiser votre site, vous devez tout calculer en toute s√©curit√©.  Si vous, par exemple, avez un site React, alors le r√©f√©rentiel, les r√©ducteurs, le syst√®me de routage, les actions seront partag√©s par toutes les parties du site.  Unique pour diff√©rentes parties du code du site sera principalement repr√©sent√© par des composants et des fonctions auxiliaires pour eux. <br><br>  Ainsi, vous avez d√©couvert qu'un code compl√®tement unique de la section du site utilis√©e pour payer les achats prend 7 Ko.  La taille du reste du code du site est de 300 Ko.  Dans une telle situation, je ne m'engagerais pas dans la s√©paration de code pour plusieurs raisons: <br><br><ul><li>  Si vous t√©l√©chargez ces 7 Ko √† l'avance, le site ne ralentira pas.  N'oubliez pas que les fichiers sont t√©l√©charg√©s en parall√®le et essayez de mesurer la diff√©rence n√©cessaire pour t√©l√©charger 300 Ko et 307 Ko de code. </li><li>  Si vous t√©l√©chargez ce code plus tard, l'utilisateur devra attendre apr√®s avoir cliqu√© sur le bouton "Payer".  Et c'est le moment m√™me o√π vous avez besoin de tout pour que tout se passe le mieux possible. </li><li>  La s√©paration du code n√©cessite des modifications de l'application.  Dans le code, l√† o√π tout a √©t√© fait de mani√®re synchrone auparavant, la logique asynchrone appara√Æt. ,        ,       , ,   ,           . </li></ul><br>  , ,        ,  . <br><br>        . <br><br><h3> <font color="#3AC1EF">‚ñç</font> </h3><br>      ,   ,    ,       . <br><br>           .     ,     .      : <br><br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'whatwg-fetch'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'intl'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'url-polyfill'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'core-js/web/dom-collections'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'core-js/es6/map'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'core-js/es6/string'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'core-js/es6/array'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'core-js/es6/object'</span></span>);</code> </pre> <br>         <code>index.js</code> ,      : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'./polyfills'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./App/App'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'./index.css'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> render = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { ReactDOM.render(<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">, document.getElementById('root')); } render(); // ,     </span></span></code> </pre> <br>    Webpack   ,        ,        npm-.     25 , 90%    ,      . <br><br>   Webpack 4    <code>import()</code> (      <code>import</code> ),      : <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./App/App'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'./index.css'</span></span>; const render = () =&gt; { ReactDOM.render(&lt;App /&gt;, document.getElementById(<span class="hljs-string"><span class="hljs-string">'root'</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-string"><span class="hljs-string">'fetch'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">window</span></span> &amp;&amp; <span class="hljs-string"><span class="hljs-string">'Intl'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">window</span></span> &amp;&amp; <span class="hljs-string"><span class="hljs-string">'URL'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">window</span></span> &amp;&amp; <span class="hljs-string"><span class="hljs-string">'Map'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">window</span></span> &amp;&amp; <span class="hljs-string"><span class="hljs-string">'forEach'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> NodeList.prototype &amp;&amp; <span class="hljs-string"><span class="hljs-string">'startsWith'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> String.prototype &amp;&amp; <span class="hljs-string"><span class="hljs-string">'endsWith'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> String.prototype &amp;&amp; <span class="hljs-string"><span class="hljs-string">'includes'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> String.prototype &amp;&amp; <span class="hljs-string"><span class="hljs-string">'includes'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Array</span></span>.prototype &amp;&amp; <span class="hljs-string"><span class="hljs-string">'assign'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> &amp;&amp; <span class="hljs-string"><span class="hljs-string">'entries'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> &amp;&amp; <span class="hljs-string"><span class="hljs-string">'keys'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> ) { render(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(<span class="hljs-string"><span class="hljs-string">'./polyfills'</span></span>).<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>(render); }</code> </pre> <br>  ,  ,   ,  ‚Äî     .   ‚Äî        <code>render()</code> .      ,  Webpack     npm-,       ,    <code>render()</code>   . <br><br>  ,   <code>import()</code>    Babel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dynamic-import</a> .  ,      Webpack,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">import()</a>  ,           . <br><br>    ,   .    . <br><br><h3> <font color="#3AC1EF">‚ñç    React,   </font> </h3><br>     . ,          ,      ,    . <br><br>       ,     npm-    .        ,   ,      100 . <br><br>       , ,    URL <code>/admin</code> ,  <code>&lt;AdminPage&gt;</code> . Webpack    ,      <code>import AdminPage from './AdminPage.js'</code>       . <br><br>     .           ,   ,  <code>import('./AdminPage.js')</code> ,   Webpack    ,      . <br><br> ,      . <br><br> ,  ,    <code>AdminPage</code> ,     ,        URL <code>/admin</code> . ,    : <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">React</span></span> from <span class="hljs-symbol"><span class="hljs-symbol">'reac</span></span>t'; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AdminPageLoader</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PureComponent</span></span></span><span class="hljs-class"> </span></span>{ constructor(props) {   <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(props);   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = {     <span class="hljs-type"><span class="hljs-type">AdminPage</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>,   } } componentDidMount() {   <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>('./<span class="hljs-type"><span class="hljs-type">AdminPage</span></span>').then(module =&gt; {     <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-type"><span class="hljs-type">AdminPage</span></span>: module.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span> });   }); } render() {   const { <span class="hljs-type"><span class="hljs-type">AdminPage</span></span> } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state;   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">AdminPage</span></span>     ? &lt;<span class="hljs-type"><span class="hljs-type">AdminPage</span></span> {...<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props} /&gt;     : &lt;div&gt;<span class="hljs-type"><span class="hljs-type">Loading</span></span>...&lt;/div&gt;; } } export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-type"><span class="hljs-type">AdminPageLoader</span></span>;</code> </pre> <br>        .     (,     URL <code>/admin</code> ),    <code>./AdminPage.js</code> ,          . <br><br>   <code>render()</code>   ,   <code>&lt;AdminPage&gt;</code> ,  <code>&lt;div&gt;Loading...&lt;/div&gt;</code> ,   <code>&lt;AdminPage&gt;</code>  ,         . <br><br>        ,       <code>react-loadable</code> ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> React   . <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br> ,   ,   (,  ,      CSS).   : <br><br><ul><li>          ‚Äî      . </li><li>       ,      ‚Äî    . </li></ul><br>  <b>Chers lecteurs!</b>           ? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr423483/">https://habr.com/ru/post/fr423483/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr423469/index.html">Num√©ros √† virgule flottante Far West les plus rapides</a></li>
<li><a href="../fr423475/index.html">Pirater le code du vieillissement: une nouvelle science sur le vieillissement et ce que signifie rester jeune</a></li>
<li><a href="../fr423477/index.html">Soyez un ninja de la s√©curit√©: commencez votre chemin vers les hauteurs de l'IB</a></li>
<li><a href="../fr423479/index.html">"First": s'il faut voler vers Mars</a></li>
<li><a href="../fr423481/index.html">Je dois augmenter le cluster Kubernetes, mais je ne suis qu'un programmeur de code. Il y a un moyen de sortir</a></li>
<li><a href="../fr423485/index.html">Chargement d'images paresseuses √† l'aide d'IntersectionObserver</a></li>
<li><a href="../fr423487/index.html">Node.js sans node_modules</a></li>
<li><a href="../fr423489/index.html">Je suis m√©decin urgentiste et je veux parler du nouvel √©lectrocardiogramme Apple Watch</a></li>
<li><a href="../fr423491/index.html">PHP Digest n ¬∞ 139 (du 3 au 17 septembre 2018)</a></li>
<li><a href="../fr423493/index.html">Android Go est le futur milliard d'appareils et une limite de 50 Mo. Conf√©rence Yandex</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>