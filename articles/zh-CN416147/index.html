<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ—³ï¸ âš™ï¸ ğŸ‘©ğŸ½â€ğŸ¨ ä½¿ç”¨æ ¹æ§åˆ¶å™¨åœ¨iOSåº”ç”¨ç¨‹åºä¸­ç»„ç»‡å¯¼èˆª ğŸ¥” ğŸ¤šğŸ½ ğŸ¤šğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¤§å¤šæ•°ç§»åŠ¨åº”ç”¨ç¨‹åºåŒ…å«åå‡ ä¸ªå±å¹•ï¼Œå¤æ‚çš„è¿‡æ¸¡ä»¥åŠåº”ç”¨ç¨‹åºçš„å„ä¸ªéƒ¨åˆ†ï¼Œå¹¶æŒ‰å«ä¹‰å’Œç›®çš„åˆ†å¼€ã€‚ å› æ­¤ï¼Œéœ€è¦ä¸ºåº”ç”¨ç¨‹åºç»„ç»‡æ­£ç¡®çš„å¯¼èˆªç»“æ„ï¼Œè¯¥ç»“æ„å°†æ˜¯çµæ´»ï¼Œæ–¹ä¾¿ï¼Œå¯æ‰©å±•çš„ï¼Œå¯ä»¥èˆ’é€‚åœ°è®¿é—®åº”ç”¨ç¨‹åºçš„å„ä¸ªéƒ¨åˆ†ï¼Œå¹¶ä¸”è¿˜è¦æ³¨æ„ç³»ç»Ÿçš„èµ„æºã€‚ 

 åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»¥æŸç§æ–¹å¼è®¾è®¡åº”ç”¨ç¨‹åºä¸­çš„å¯¼èˆªï¼Œä»¥é¿å…å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œç ´å...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨æ ¹æ§åˆ¶å™¨åœ¨iOSåº”ç”¨ç¨‹åºä¸­ç»„ç»‡å¯¼èˆª</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416147/"><img src="https://habrastorage.org/webt/uf/0h/3q/uf0h3qqyj6c6tnvj6fbf4089bye.jpeg"><br><br> å¤§å¤šæ•°ç§»åŠ¨åº”ç”¨ç¨‹åºåŒ…å«åå‡ ä¸ªå±å¹•ï¼Œå¤æ‚çš„è¿‡æ¸¡ä»¥åŠåº”ç”¨ç¨‹åºçš„å„ä¸ªéƒ¨åˆ†ï¼Œå¹¶æŒ‰å«ä¹‰å’Œç›®çš„åˆ†å¼€ã€‚ å› æ­¤ï¼Œéœ€è¦ä¸ºåº”ç”¨ç¨‹åºç»„ç»‡æ­£ç¡®çš„å¯¼èˆªç»“æ„ï¼Œè¯¥ç»“æ„å°†æ˜¯çµæ´»ï¼Œæ–¹ä¾¿ï¼Œå¯æ‰©å±•çš„ï¼Œå¯ä»¥èˆ’é€‚åœ°è®¿é—®åº”ç”¨ç¨‹åºçš„å„ä¸ªéƒ¨åˆ†ï¼Œå¹¶ä¸”è¿˜è¦æ³¨æ„ç³»ç»Ÿçš„èµ„æºã€‚ <br><br> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»¥æŸç§æ–¹å¼è®¾è®¡åº”ç”¨ç¨‹åºä¸­çš„å¯¼èˆªï¼Œä»¥é¿å…å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œç ´åä½“ç³»ç»“æ„å¹¶ç ´åå¯¼èˆªç»“æ„çš„æœ€å¸¸è§é”™è¯¯ã€‚ <br><a name="habracut"></a><br> å¤§å¤šæ•°åº”ç”¨ç¨‹åºè‡³å°‘åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šèº«ä»½éªŒè¯ï¼ˆç™»å½•å‰ï¼‰å’Œç§æœ‰éƒ¨åˆ†ï¼ˆç™»å½•åï¼‰ã€‚ æŸäº›åº”ç”¨ç¨‹åºå¯èƒ½å…·æœ‰æ›´å¤æ‚çš„ç»“æ„ï¼Œå…·æœ‰ä¸€æ¬¡ç™»å½•çš„å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨åº”ç”¨ç¨‹åºåçš„æ¡ä»¶è½¬æ¢ï¼ˆæ·±é“¾æ¥ï¼‰ç­‰ã€‚ <br><br> å®é™…ä¸Šï¼Œä¸»è¦ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥å¯¼èˆªåº”ç”¨ç¨‹åºï¼š <br><br><ol><li> æ¼”ç¤ºæ§åˆ¶å™¨ï¼ˆpresentï¼‰å’Œå¯¼èˆªæ§åˆ¶å™¨ï¼ˆpushï¼‰çš„ä¸€ä¸ªå¯¼èˆªå †æ ˆï¼Œæ— æ³•è¿”å›ã€‚ è¿™ç§æ–¹æ³•å¯¼è‡´æ‰€æœ‰ä»¥å‰çš„ViewControllerä¿ç•™åœ¨å†…å­˜ä¸­ã€‚ </li><li> ä½¿ç”¨window.rootViewControlleråˆ‡æ¢ã€‚ ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œä»¥å‰çš„æ‰€æœ‰ViewControlleréƒ½ä¼šåœ¨å†…å­˜ä¸­è¢«ç ´åï¼Œä½†æ˜¯ä»UIçš„è§’åº¦æ¥çœ‹ï¼Œè¿™çœ‹èµ·æ¥å¹¶ä¸æ˜¯æœ€å¥½çš„ã€‚ å¦å¤–ï¼Œå¦‚æœæœ‰å¿…è¦ï¼Œå®ƒä¹Ÿä¸å…è®¸æ‚¨æ¥å›ç§»åŠ¨ã€‚ </li></ol><br> ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ˜“äºç»´æŠ¤çš„ç»“æ„ï¼Œè¯¥ç»“æ„å…è®¸æ‚¨åœ¨åº”ç”¨ç¨‹åºçš„ä¸åŒéƒ¨åˆ†ä¹‹é—´æ— ç¼åˆ‡æ¢ï¼Œè€Œæ— éœ€æ„å¤§åˆ©é¢æ¡å¼ä»£ç å’Œè½»æ¾å¯¼èˆªã€‚ <br><br> å‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ªåŒ…å«ä»¥ä¸‹å†…å®¹çš„åº”ç”¨ç¨‹åºï¼š <br><br><ul><li> ä¸»å±å¹•ï¼ˆ <b>å¯åŠ¨å±å¹•</b> ï¼‰ï¼šè¿™æ˜¯æ‚¨çœ‹åˆ°çš„ç¬¬ä¸€ä¸ªå±å¹•ï¼Œåº”ç”¨ç¨‹åºå¯åŠ¨åï¼Œæ‚¨å¯ä»¥æ·»åŠ ä¾‹å¦‚åŠ¨ç”»æˆ–å‘å‡ºä»»ä½•ä¸»APIè¯·æ±‚ã€‚ </li><li>  <b>è®¤è¯éƒ¨åˆ†</b> ï¼šç™»å½•ï¼Œæ³¨å†Œï¼Œå¯†ç é‡ç½®ï¼Œç”µå­é‚®ä»¶ç¡®è®¤ç­‰ é€šå¸¸ä¼šä¿å­˜ç”¨æˆ·çš„å·¥ä½œä¼šè¯ï¼Œå› æ­¤æ— éœ€åœ¨æ¯æ¬¡åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶éƒ½è¾“å…¥ç™»å½•åã€‚ </li><li>  <b>ä¸»è¦éƒ¨åˆ†</b> ï¼šä¸»è¦åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ </li></ul><br> åº”ç”¨ç¨‹åºçš„æ‰€æœ‰è¿™äº›éƒ¨åˆ†éƒ½ç›¸äº’éš”ç¦»ï¼Œå¹¶ä¸”å„è‡ªå­˜åœ¨äºè‡ªå·±çš„å¯¼èˆªå †æ ˆä¸­ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä»¥ä¸‹è½¬æ¢ï¼š <br><br><ul><li>  <b>åˆå§‹å±å¹•-&gt;è®¤è¯å±å¹•</b> ï¼Œå¦‚æœå½“å‰æ´»åŠ¨ç”¨æˆ·çš„å½“å‰ä¼šè¯ä¸å­˜åœ¨ã€‚ </li><li>  <b>å¯åŠ¨å±å¹•-&gt;ä¸»</b>å±å¹•ï¼Œå¦‚æœç”¨æˆ·å·²ç»è¾ƒæ—©ç™»å½•åˆ°è¯¥åº”ç”¨ç¨‹åºå¹¶ä¸”å­˜åœ¨æ´»åŠ¨ä¼šè¯ã€‚ </li><li>  <b>ä¸»å±å¹•-&gt;èº«ä»½éªŒè¯å±å¹•</b> ï¼Œä»¥é˜²ç”¨æˆ·æ³¨é”€ </li></ul><br><br>  <b>åŸºæœ¬è®¾å®š</b> <br><br> å½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–<i>RootViewController</i> ï¼Œå®ƒå°†é¦–å…ˆè¢«åŠ è½½ã€‚ æ—¢å¯ä»¥ä½¿ç”¨ä»£ç ä¹Ÿå¯ä»¥é€šè¿‡Interface Builderæ¥å®Œæˆã€‚ åœ¨xCodeä¸­åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰è¿™äº›æ“ä½œéƒ½å·²ç»å®Œæˆï¼š <i>main.storyboard</i>å·²ç»‘å®šåˆ°<i>window.rootViewController</i> ã€‚ <br><br> ä½†æ˜¯ï¼Œä¸ºäº†ä¸“æ³¨äºæœ¬æ–‡çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬å°†ä¸åœ¨é¡¹ç›®ä¸­ä½¿ç”¨æƒ…èŠ‚æè¦ã€‚ å› æ­¤ï¼Œåˆ é™¤<i>main.storyboard</i> ï¼Œå¹¶æ¸…é™¤<i>Targets-&gt; General-</i> &gt; Deployment infoä¸‹çš„â€œ Main Interfaceâ€å­—æ®µï¼š <br><br><img src="https://habrastorage.org/webt/kc/ku/cq/kckucqq5vpiklb5p7kyp7rwgqfu.png"><br><br> ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœ¨<i>AppDelegateä¸­</i>æ›´æ”¹<i>didFinishLaunchingWithOptions</i>æ–¹æ³•ï¼Œä½¿å…¶çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre><code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">]?)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> { window = <span class="hljs-type"><span class="hljs-type">UIWindow</span></span>(frame: <span class="hljs-type"><span class="hljs-type">UIScreen</span></span>.main.bounds) window?.rootViewController = <span class="hljs-type"><span class="hljs-type">RootViewController</span></span>() window?.makeKeyAndVisible() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br> ç°åœ¨ï¼Œè¯¥åº”ç”¨ç¨‹åºå°†é¦–å…ˆå¯åŠ¨<i>RootViewController</i> ã€‚ å°†åŸºæœ¬<i>ViewController</i>é‡å‘½åä¸º<i>RootViewController</i> ï¼š <br><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RootViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UIViewController { }</span></span></span></span></code> </pre> <br> è¿™å°†æ˜¯è´Ÿè´£åº”ç”¨ç¨‹åºä¸åŒéƒ¨åˆ†ä¹‹é—´æ‰€æœ‰è½¬æ¢çš„ä¸»è¦æ§åˆ¶å™¨ã€‚ å› æ­¤ï¼Œæ¯æ¬¡æˆ‘ä»¬è¦è¿›è¡Œè¿‡æ¸¡æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ä¸€ä¸ªé“¾æ¥ã€‚ ä¸ºæ­¤ï¼Œå°†æ‰©å±•æ·»åŠ åˆ°<i>AppDelegate</i> ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppDelegate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> shared: <span class="hljs-type"><span class="hljs-type">AppDelegate</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">UIApplication</span></span>.shared.delegate <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">AppDelegate</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rootViewController: <span class="hljs-type"><span class="hljs-type">RootViewController</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> window!.rootViewController <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">RootViewController</span></span> } }</code> </pre> <br>  <i>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¼ºåˆ¶æ£€ç´¢é€‰é¡¹æ˜¯åˆç†çš„ï¼Œå› ä¸ºRootViewControllerä¸ä¼šæ›´æ”¹ï¼Œå¦‚æœè¿™æ˜¯å¶ç„¶å‘ç”Ÿçš„ï¼Œåˆ™åº”ç”¨ç¨‹åºå´©æºƒæ˜¯æ­£å¸¸æƒ…å†µã€‚</i> <i><br></i> <br> å› æ­¤ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä»åº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•åœ°æ–¹é“¾æ¥åˆ°<i>RootViewController</i> ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rootViewController = <span class="hljs-type"><span class="hljs-type">AppDelegate</span></span>.shared.rootViewController</code> </pre> <br> ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºæ›´å¤šæ‰€éœ€çš„æ§åˆ¶å™¨ï¼š <i>SplashViewControllerï¼ŒLoginViewController</i>å’Œ<i>MainViewController</i> ã€‚ <br><br> å¯åŠ¨å±å¹•æ˜¯ç”¨æˆ·å¯åŠ¨åº”ç”¨ç¨‹åºåå°†çœ‹åˆ°çš„ç¬¬ä¸€ä¸ªå±å¹•ã€‚ æ­¤æ—¶ï¼Œé€šå¸¸ä¼šå‘å‡ºæ‰€æœ‰å¿…è¦çš„APIè¯·æ±‚ï¼Œæ£€æŸ¥ç”¨æˆ·ä¼šè¯æ´»åŠ¨ï¼Œç­‰ç­‰ã€‚ è¦æ˜¾ç¤ºæ­£åœ¨è¿›è¡Œçš„åå°æ“ä½œï¼Œè¯·ä½¿ç”¨<i>UIActivityIndiâ€‹â€‹catorView</i> ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SplashViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> activityIndicator = <span class="hljs-type"><span class="hljs-type">UIActivityIndicatorView</span></span>(activityIndicatorStyle: .whiteLarge) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewDidLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.viewDidLoad() view.backgroundColor = <span class="hljs-type"><span class="hljs-type">UIColor</span></span>.white view.addSubview(activityIndicator) activityIndicator.frame = view.bounds activityIndicator.backgroundColor = <span class="hljs-type"><span class="hljs-type">UIColor</span></span>(white: <span class="hljs-number"><span class="hljs-number">0</span></span>, alpha: <span class="hljs-number"><span class="hljs-number">0.4</span></span>) makeServiceCall() } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeServiceCall</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { } }</code> </pre> <br> ä¸ºäº†æ¨¡æ‹ŸAPIè¯·æ±‚ï¼Œè¯·æ·»åŠ <i>DispatchQueue.main.asyncAfter</i>æ–¹æ³•ï¼ˆå»¶è¿Ÿ3ç§’ï¼‰ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeServiceCall</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { activityIndicator.startAnimating() <span class="hljs-type"><span class="hljs-type">DispatchQueue</span></span>.main.asyncAfter(deadline: <span class="hljs-type"><span class="hljs-type">DispatchTime</span></span>.now() + .seconds(<span class="hljs-number"><span class="hljs-number">3</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.activityIndicator.stopAnimating() } }</code> </pre> <br> æˆ‘ä»¬è®¤ä¸ºè¿™äº›è¯·æ±‚ä¸­ä¹Ÿè®¾ç½®äº†ç”¨æˆ·ä¼šè¯ã€‚ åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä¸ºæ­¤ä½¿ç”¨<i>UserDefaults</i> ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeServiceCall</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { activityIndicator.startAnimating() <span class="hljs-type"><span class="hljs-type">DispatchQueue</span></span>.main.asyncAfter(deadline: <span class="hljs-type"><span class="hljs-type">DispatchTime</span></span>.now() + .seconds(<span class="hljs-number"><span class="hljs-number">3</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.activityIndicator.stopAnimating() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-type"><span class="hljs-type">UserDefaults</span></span>.standard.bool(forKey: â€œ<span class="hljs-type"><span class="hljs-type">LOGGED_IN</span></span>â€) { <span class="hljs-comment"><span class="hljs-comment">// navigate to protected page } else { // navigate to login screen } } }</span></span></code> </pre><br>  <i>æ‚¨ç»å¯¹ä¸ä¼šä½¿ç”¨UserDefaultsåœ¨ç¨‹åºçš„å‘è¡Œç‰ˆæœ¬ä¸­ä¿å­˜ç”¨æˆ·ä¼šè¯çš„çŠ¶æ€ã€‚</i>  <i>æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨æœ¬åœ°è®¾ç½®æ¥ç®€åŒ–ç†è§£ï¼Œå¹¶ä¸”ä¸ä¼šè¶…å‡ºæœ¬æ–‡çš„ä¸»è¦ä¸»é¢˜ã€‚</i> <br><br> åˆ›å»ºä¸€ä¸ª<i>LoginViewController</i> ã€‚ å¦‚æœå½“å‰ç”¨æˆ·ä¼šè¯å¤„äºéæ´»åŠ¨çŠ¶æ€ï¼Œå®ƒå°†ç”¨äºéªŒè¯ç”¨æˆ·ã€‚ æ‚¨å¯ä»¥å°†è‡ªå®šä¹‰UIæ·»åŠ åˆ°æ§åˆ¶å™¨ï¼Œä½†æ˜¯æˆ‘å°†åœ¨æ­¤å¤„ä»…åœ¨å¯¼èˆªæ ä¸­æ·»åŠ å±å¹•æ ‡é¢˜å’Œç™»å½•æŒ‰é’®ã€‚ <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoginViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewDidLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.viewDidLoad() view.backgroundColor = <span class="hljs-type"><span class="hljs-type">UIColor</span></span>.white title = <span class="hljs-string"><span class="hljs-string">"Login Screen"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> loginButton = <span class="hljs-type"><span class="hljs-type">UIBarButtonItem</span></span>(title: <span class="hljs-string"><span class="hljs-string">"Log In"</span></span>, style: .plain, target: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, action: #selector(login)) navigationItem.setLeftBarButton(loginButton, animated: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) } <span class="hljs-meta"><span class="hljs-meta">@objc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// store the user session (example only, not for the production) UserDefaults.standard.set(true, forKey: "LOGGED_IN") // navigate to the Main Screen } }</span></span></code> </pre> <br> æœ€åï¼Œåˆ›å»º<i>MainViewController</i>åº”ç”¨ç¨‹åºçš„ä¸»æ§åˆ¶å™¨ï¼š <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MainViewController: UIViewController { override func viewDidLoad() { super.viewDidLoad() <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>.backgroundColor = UIColor.lightGray // <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> visually distinguish the protected part title = â€œMain Screenâ€ let logoutButton = UIBarButtonItem(title: â€œ<span class="hljs-keyword"><span class="hljs-keyword">Log</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Out</span></span>â€, style: .plain, target: self, action: #selector(logout)) navigationItem.setLeftBarButton(logoutButton, animated: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) } @objc private func logout() { // clear the <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-keyword"><span class="hljs-keyword">session</span></span> (example <span class="hljs-keyword"><span class="hljs-keyword">only</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the production) UserDefaults.standard.<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, forKey: â€œLOGGED_INâ€) // navigate <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the Main Screen } }</code> </pre> <br>  <b>æ ¹å¯¼èˆª</b> <br><br> ç°åœ¨å›åˆ°<i>RootViewController</i> ã€‚ <br> å¦‚å‰æ‰€è¿°ï¼Œ <i>RootViewController</i>æ˜¯å”¯ä¸€è´Ÿè´£ä¸åŒç‹¬ç«‹æ§åˆ¶å™¨å †æ ˆä¹‹é—´è½¬æ¢çš„å¯¹è±¡ã€‚ ä¸ºäº†äº†è§£åº”ç”¨ç¨‹åºçš„å½“å‰çŠ¶æ€ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œç”¨äºå­˜å‚¨å½“å‰çš„<i>ViewController</i> ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RootViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> current: <span class="hljs-type"><span class="hljs-type">UIViewController</span></span> }</code> </pre> <br> æ·»åŠ ç±»åˆå§‹åŒ–ç¨‹åºï¼Œå¹¶åˆ›å»ºæˆ‘ä»¬è¦åœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶åŠ è½½çš„ç¬¬ä¸€ä¸ª<i>ViewController</i> ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒå°†æ˜¯<i>SplashViewController</i> ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RootViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> current: <span class="hljs-type"><span class="hljs-type">UIViewController</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.current = <span class="hljs-type"><span class="hljs-type">SplashViewController</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(nibName: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, bundle: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) } }</code> </pre> <br> åœ¨<i>viewDidLoadä¸­ï¼Œ</i>å°†å½“å‰<i>viewController</i>æ·»åŠ åˆ°<i>RootViewControllerä¸­</i> ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RootViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewDidLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.viewDidLoad() addChildViewController(current) <span class="hljs-comment"><span class="hljs-comment">// 1 current.view.frame = view.bounds // 2 view.addSubview(current.view) // 3 current.didMove(toParentViewController: self) // 4 } }</span></span></code> </pre> <br> æ·»åŠ <i>childViewController</i> ï¼ˆ1ï¼‰åï¼Œæˆ‘ä»¬é€šè¿‡å°†<i>current.view.frame</i>è®¾ç½®ä¸º<i>view.bounds</i> ï¼ˆ2ï¼‰æ¥è°ƒæ•´å…¶å¤§å°ã€‚ <br><br> å¦‚æœæˆ‘ä»¬è·³è¿‡è¿™ä¸€è¡Œï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ <i>viewController</i>ä»å°†æ­£ç¡®æ”¾ç½®ï¼Œä½†æ˜¯å¦‚æœ<i>å¸§</i>å¤§å°å‘ç”Ÿæ›´æ”¹ï¼Œåˆ™å¯èƒ½ä¼šå‡ºç°é—®é¢˜ã€‚ <br><br> æ·»åŠ ä¸€ä¸ªæ–°çš„å­è§†å›¾ï¼ˆ3ï¼‰å¹¶è°ƒç”¨didMoveï¼ˆtoParentViewController :)æ–¹æ³•ã€‚ è¿™å°†å®Œæˆæ·»åŠ æ§åˆ¶å™¨æ“ä½œã€‚  <i>RootViewControllerå¯åŠ¨å</i> ï¼Œå°†ç«‹å³æ˜¾ç¤º<i>SplashViewController</i> ã€‚ <br><br> ç°åœ¨ï¼Œæ‚¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­æ·»åŠ å‡ ç§å¯¼èˆªæ–¹æ³•ã€‚ æˆ‘ä»¬å°†æ˜¾ç¤ºæ²¡æœ‰ä»»ä½•åŠ¨ç”»çš„<i>LoginViewController</i> ï¼Œ <i>MainViewController</i>å°†ä½¿ç”¨å…·æœ‰å¹³æ»‘è°ƒå…‰æ•ˆæœçš„åŠ¨ç”»ï¼Œå¹¶ä¸”åœ¨æ–­å¼€ç”¨æˆ·è¿æ¥æ—¶çš„å±å¹•è¿‡æ¸¡å°†å…·æœ‰å¹»ç¯ç‰‡æ•ˆæœã€‚ <br><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RootViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UIViewController</span></span></span><span class="hljs-class"> { ... func showLoginScreen() { let new = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UINavigationController</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rootViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LoginViewController</span></span></span><span class="hljs-class">()) // 1 addChildViewController(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class">) // 2 new.view.frame = view.bounds // 3 view.addSubview(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">view</span></span></span><span class="hljs-class">) // 4 new.didMove(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">toParentViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class">) // 5 current.willMove(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">toParentViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nil</span></span></span><span class="hljs-class">) // 6 current.view.removeFromSuperview()] // 7 current.removeFromParentViewController() // 8 current = new // 9 }</span></span></code> </pre><br> åˆ›å»º<i>LoginViewController</i> ï¼ˆ1ï¼‰ï¼Œæ·»åŠ ä¸ºå­æ§åˆ¶å™¨ï¼ˆ2ï¼‰ï¼Œè®¾ç½®æ¡†æ¶ï¼ˆ3ï¼‰ã€‚ å°†<i>LoginControllerçš„</i>è§†å›¾æ·»åŠ ä¸ºå­è§†å›¾ï¼ˆ4ï¼‰ï¼Œç„¶åè°ƒç”¨didMoveï¼ˆ5ï¼‰æ–¹æ³•ã€‚ æ¥ä¸‹æ¥ï¼Œä½¿ç”¨willMoveï¼ˆ6ï¼‰æ–¹æ³•å‡†å¤‡è¦å¸ä¸‹çš„å½“å‰æ§åˆ¶å™¨ã€‚ æœ€åï¼Œä»è¶…çº§è§†å›¾ï¼ˆ7ï¼‰ä¸­åˆ é™¤å½“å‰è§†å›¾ï¼Œå¹¶ä»<i>RootViewController</i> ï¼ˆ8ï¼‰ä¸­åˆ é™¤å½“å‰æ§åˆ¶å™¨ã€‚ åˆ‡è®°æ›´æ–°å½“å‰æ§åˆ¶å™¨çš„å€¼ï¼ˆ9ï¼‰ã€‚ <br><br> ç°åœ¨è®©æˆ‘ä»¬åˆ›å»º<i>switchToMainScreen</i>æ–¹æ³•ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">switchToMainScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mainViewController = <span class="hljs-type"><span class="hljs-type">MainViewController</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mainScreen = <span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>(rootViewController: mainViewController) ... }</code> </pre> <br> ä¸ºè¿‡æ¸¡è®¾ç½®åŠ¨ç”»éœ€è¦ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">animateFadeTransition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(to new: UIViewController, completion: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span>)? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { current.willMove(toParentViewController: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) addChildViewController(new) transition(from: current, to: new, duration: <span class="hljs-number"><span class="hljs-number">0.3</span></span>, options: [.transitionCrossDissolve, .curveEaseOut], animations: { }) { completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.current.removeFromParentViewController() new.didMove(toParentViewController: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.current = new completion?() <span class="hljs-comment"><span class="hljs-comment">//1 } }</span></span></code> </pre> <br> æ­¤æ–¹æ³•ä¸<i>showLoginScreen</i>éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯æ‰€æœ‰æœ€åçš„æ­¥éª¤éƒ½æ˜¯åœ¨åŠ¨ç”»å®Œæˆåæ‰§è¡Œçš„ã€‚ ä¸ºäº†é€šçŸ¥è½¬æ¢ç»“æŸçš„è°ƒç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨æœ€åè°ƒç”¨äº†é—­åŒ…ï¼ˆ1ï¼‰ã€‚ <br><br> ç°åœ¨ï¼Œ <i>switchToMainScreen</i>æ–¹æ³•çš„æœ€ç»ˆç‰ˆæœ¬å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">switchToMainScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mainViewController = <span class="hljs-type"><span class="hljs-type">MainViewController</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mainScreen = <span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>(rootViewController: mainViewController) animateFadeTransition(to: mainScreen) }</code> </pre> <br> æœ€åï¼Œè®©æˆ‘ä»¬åˆ›å»ºæœ€åä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†è´Ÿè´£ä»<i>MainViewController</i>åˆ°<i>LoginViewController</i>çš„è¿‡æ¸¡ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">switchToLogout</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> loginViewController = <span class="hljs-type"><span class="hljs-type">LoginViewController</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> logoutScreen = <span class="hljs-type"><span class="hljs-type">UINavigationController</span></span>(rootViewController: loginViewController) animateDismissTransition(to: logoutScreen) }</code> </pre> <br>  <i>AnimateDismissTransition</i>æ–¹æ³•æä¾›å¹»ç¯ç‰‡åŠ¨ç”»ï¼š <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">animateDismissTransition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(to new: UIViewController, completion: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">()</span></span></span></span></span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Void</span></span>)? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { new.view.frame = <span class="hljs-type"><span class="hljs-type">CGRect</span></span>(x: -view.bounds.width, y: <span class="hljs-number"><span class="hljs-number">0</span></span>, width: view.bounds.width, height: view.bounds.height) current.willMove(toParentViewController: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) addChildViewController(new) transition(from: current, to: new, duration: <span class="hljs-number"><span class="hljs-number">0.3</span></span>, options: [], animations: { new.view.frame = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view.bounds }) { completed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.current.removeFromParentViewController() new.didMove(toParentViewController: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.current = new completion?() } }</code> </pre><br> è¿™äº›åªæ˜¯åŠ¨ç”»çš„ä¸¤ä¸ªç¤ºä¾‹ï¼Œä½¿ç”¨ç›¸åŒçš„æ–¹æ³•ï¼Œæ‚¨å¯ä»¥åˆ›å»ºæ‰€éœ€çš„ä»»ä½•å¤æ‚åŠ¨ç”» <br><br> è¦å®Œæˆé…ç½®ï¼Œè¯·æ·»åŠ å¸¦æœ‰<i>SplashViewControllerï¼ŒLoginViewController</i>å’Œ<i>MainViewController</i>åŠ¨ç”»çš„æ–¹æ³•è°ƒç”¨ï¼š <br><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SplashViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UIViewController</span></span></span><span class="hljs-class"> { ... private func makeServiceCall() { if </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UserDefaults</span></span></span><span class="hljs-class">.standard.bool(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forKey</span></span></span><span class="hljs-class">: â€œ</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LOGGED_IN</span></span></span><span class="hljs-class">â€) { // navigate to protected page </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppDelegate</span></span></span><span class="hljs-class">.shared.rootViewController.switchToMainScreen() } else { // navigate to login screen </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppDelegate</span></span></span><span class="hljs-class">.shared.rootViewController.switchToLogout() } } } </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LoginViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UIViewController</span></span></span><span class="hljs-class"> { ... @objc private func login() { ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppDelegate</span></span></span><span class="hljs-class">.shared.rootViewController.switchToMainScreen() } } </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MainViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UIViewController</span></span></span><span class="hljs-class"> { ... @objc private func logout() { ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppDelegate</span></span></span><span class="hljs-class">.shared.rootViewController.switchToLogout() } }</span></span></code> </pre><br> ç¼–è¯‘ï¼Œè¿è¡Œåº”ç”¨ç¨‹åºå¹¶é€šè¿‡ä¸¤ç§æ–¹å¼æ£€æŸ¥å…¶è¿è¡Œæƒ…å†µï¼š <br><br>  -å½“ç”¨æˆ·å·²ç»æœ‰ä¸€ä¸ªæ´»åŠ¨çš„å½“å‰ä¼šè¯ï¼ˆå·²ç™»å½•ï¼‰æ—¶ <br>  -æ²¡æœ‰æ´»åŠ¨ä¼šè¯ä¸”éœ€è¦èº«ä»½éªŒè¯æ—¶ <br><br> åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæ‚¨éƒ½åº”è¯¥åœ¨åŠ è½½<i>SplashScreen</i>ä¹‹åç«‹å³çœ‹åˆ°åˆ°æ‰€éœ€å±å¹•çš„è¿‡æ¸¡ã€‚ <br><br><img src="https://habrastorage.org/webt/zq/n5/ss/zqn5ssn9toyzyjhas3wvljnfj9m.gif"><br><br> ç»“æœï¼Œæˆ‘ä»¬åˆ›å»ºäº†è¯¥åº”ç”¨ç¨‹åºçš„å°å‹æµ‹è¯•æ¨¡å‹ï¼Œå¹¶åœ¨å…¶ä¸»è¦æ¨¡å—ä¸­è¿›è¡Œäº†å¯¼èˆªã€‚ å¦‚æœæ‚¨éœ€è¦æ‰©å±•åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ï¼Œæ·»åŠ å…¶ä»–æ¨¡å—å¹¶åœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼Œåˆ™å§‹ç»ˆå¯ä»¥å¿«é€Ÿï¼Œæ–¹ä¾¿åœ°æ‰©å±•å’Œç¼©æ”¾æ­¤å¯¼èˆªç³»ç»Ÿã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN416147/">https://habr.com/ru/post/zh-CN416147/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN416133/index.html">å›½å¤–æ•°æ®ä¸­å¿ƒï¼šEquinix LD8</a></li>
<li><a href="../zh-CN416135/index.html">å°äº1 kbçš„GUIåº”ç”¨ç¨‹åº</a></li>
<li><a href="../zh-CN416137/index.html">Zabbixä½œä¸ºå®‰å…¨æ‰«æç¨‹åº</a></li>
<li><a href="../zh-CN416139/index.html">å¼ºå¤§çš„èº«ä»½éªŒè¯æ˜¯GDPRæˆ˜ç•¥çš„ä¸€éƒ¨åˆ†</a></li>
<li><a href="../zh-CN416143/index.html">è¿™æœ¬ä¹¦â€œå°†è¿›è¡Œå°¸æ£€ï¼â€ å®ç”¨çš„æ¶æ„è½¯ä»¶åˆ†æÂ»</a></li>
<li><a href="../zh-CN416149/index.html">å¯å†ç”Ÿèƒ½æºé—®ç­”ï¼Œç¬¬1éƒ¨åˆ†</a></li>
<li><a href="../zh-CN416151/index.html">æ— é‡çº²çš„æ°”çƒã€‚ åŠŸåˆ©ç»´åº¦åˆ†æé­”æœ¯</a></li>
<li><a href="../zh-CN416153/index.html">é£æœºä¼šå˜å¾—æ›´å¯é å—ï¼Ÿ é£æœºåˆ¶é€ å•†å‘ä¼ä¸šä»‹ç»æœºå™¨äºº</a></li>
<li><a href="../zh-CN416155/index.html">Angularä¸­çš„WebSocketsï¼šåˆ›å»ºAngular Serviceä»¥ä½¿ç”¨Webå¥—æ¥å­—</a></li>
<li><a href="../zh-CN416157/index.html">åœ¨Pythonçš„æ€€æŠ±ä¸­ï¼ˆä»…é™å¥³æ€§ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>