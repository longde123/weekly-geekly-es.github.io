<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•¢ üë®‚ÄçüöÄ üé¨ L'utilisation de polyfills lors de l'√©criture d'applications inter-navigateurs üñ±Ô∏è üéØ üî¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R√©cemment, une histoire dr√¥le m'est arriv√©e. J'ai r√©alis√© un projet web et √©tendu les capacit√©s d'une application existante, que mon personnel utilise...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'utilisation de polyfills lors de l'√©criture d'applications inter-navigateurs</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/475248/">  R√©cemment, une histoire dr√¥le m'est arriv√©e.  J'ai r√©alis√© un projet web et √©tendu les capacit√©s d'une application existante, que mon personnel utilise dans mon organisation.  Tout allait bien, j'√©tais heureux que le projet ait √©t√© lanc√©, dans l'attente de lettres de remerciements. <br><br>  Quelques jours apr√®s la premi√®re sortie, j'ai vraiment commenc√© √† recevoir des lettres.  Mais aucun remerciement n'y a √©t√© observ√©.  Les gestionnaires, les employ√©s des ressources humaines et tous ceux qui ont essay√© d'utiliser mon programme m'ont √©crit.  Tous ont dit que leur application ne fonctionnait pas correctement. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/uh/ra/et/uhraetarp4ufpt8tvdceqkkoi3i.jpeg"></a> <br><br>  Quelle est la question?  Mais le fait est que lorsque j'ai cr√©√© le projet, je l'ai test√© dans Chrome.  Mais les utilisateurs de ce projet utilisent constamment Firefox et IE.  Travailler avec ma candidature n'a pas fait exception.  Au final, j'√©tais compl√®tement triste que le projet, lanc√© il y a quelques jours, ait d√ª √™tre finalis√©. <br><br>  En fait, les polyfills sont venus √† mon aide. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Polyfills</font> </h2><br>  Un polyfill (polyfill ou polyfiller) est un morceau de code (ou un certain plug-in) qui impl√©mente ce que le d√©veloppeur attend parmi les fonctionnalit√©s de navigateur standard.  Les polyfills permettent, pour ainsi dire, de ¬´lisser¬ª les irr√©gularit√©s des API de navigateur. <br><br>  Dans un environnement Web, les polyfills sont g√©n√©ralement repr√©sent√©s par du code JavaScript.  Ce code est utilis√© pour √©quiper les anciens navigateurs de fonctionnalit√©s modernes que ces navigateurs ne prennent pas en charge. <br><br>  Par exemple, √† l'aide de polyfill, vous pouvez simuler la fonctionnalit√© de l'√©l√©ment HTML Canvas dans Microsoft Internet Explorer 7. Pour cela, le plugin Silverlight est utilis√©.  Polyfill peut √™tre utilis√© pour prendre en charge les unit√©s de mesure <code>rem</code> en CSS, ou l'attribut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">text-shadow</a> , ou toute autre chose.  Les raisons pour lesquelles les d√©veloppeurs n'utilisent pas exclusivement des polyfills, sans pr√™ter attention aux capacit√©s int√©gr√©es des navigateurs, sont que les capacit√©s standard des navigateurs offrent de meilleures fonctionnalit√©s et des performances plus √©lev√©es.  Les impl√©mentations de votre propre navigateur de diverses API ont plus de fonctionnalit√©s que les polyfills et fonctionnent plus rapidement. <br><br>  Parfois, les polyfills sont utilis√©s pour r√©soudre des probl√®mes li√©s au fait que diff√©rents navigateurs impl√©mentent les m√™mes fonctionnalit√©s de diff√©rentes mani√®res.  Un tel polyfill interagit avec certains navigateurs, en utilisant leurs fonctionnalit√©s non standard, et donne acc√®s √† d'autres programmes JavaScript √† certains m√©canismes conformes aux normes.  Il convient de noter que de telles raisons d'utiliser des polyfills aujourd'hui ne sont plus aussi pertinentes qu'auparavant.  Les polyfills √©taient particuli√®rement r√©pandus √† l'√©poque d'IE6, Netscape et NNav, lorsque chaque navigateur impl√©mentait les fonctionnalit√©s JavaScript diff√©remment des autres. <br><br><h2>  <font color="#3AC1EF">Exemple</font> </h2><br>  J'ai r√©cemment publi√© un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">guide de</a> d√©veloppement pour une application qui convertit des fichiers CSV et Excel en JSON en utilisant JavaScript.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ici</a> vous pouvez voir l'application termin√©e. <br><br>  Afin de traiter de ce dont nous parlerons plus tard, vous pouvez soit faire tout ce qui est discut√© dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">manuel</a> , soit cloner mon r√©f√©rentiel avec la commande suivante: <br><br><pre> <code class="javascript hljs">git clone https:<span class="hljs-comment"><span class="hljs-comment">//github.com/YannMjl/jsdemo-read-cvs-xls-json cd jsdemo-read-cvs-xls-json</span></span></code> </pre> <br>  Je recommande d'utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VS Code</a> dans le processus.  Vous pouvez lancer l'application Web localement en utilisant l'extension pour VS Code <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Live Server</a> . <br><br>  Modifions cette application Web et examinons les probl√®mes qui se posent lorsque vous travaillez avec elle √† l'aide de diff√©rents navigateurs. <br><br>  Cr√©ez une branche <code>polyfill</code> dans le r√©f√©rentiel et basculez vers celle-ci: <br><br><pre> <code class="javascript hljs">git checkout -b polyfill</code> </pre> <br>  Je vais enqu√™ter sur la situation dans laquelle nous obtenons des donn√©es de deux fichiers CSV ou plus et, apr√®s avoir trait√© les r√©sultats des demandes vers les API correspondantes, nous sortons ces donn√©es dans un tableau HTML. <br><br><h3>  <font color="#3AC1EF">‚ñç Finalisation du projet</font> </h3><br>  Cr√©ez un nouveau fichier CSV ( <code>team2.csv</code> ) dans le r√©pertoire racine du projet, √† la suite de quoi il devrait y avoir deux fichiers.  <a href="">Voici le</a> fichier que j'ai ajout√© au projet. <br><br>  Nous <code>script.js</code> fichier <code>script.js</code> pour qu'il lise les donn√©es de 2 fichiers et affiche toutes les donn√©es dans un tableau HTML.  Voici mon <code>script.js</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ******************************************************************** //                         * //   ,      * // ******************************************************************** var csv_file_API_1 = "./UsersSample.csv"; var csv_file_API_2 = "./team2.csv"; var APIs_array = [csv_file_API_1, csv_file_API_2]; //       $(document).ready(function () {    $("#headerTitle").hide(300).show(1500);    makeAPICalls(); }); // end: document.ready() function makeAPICalls() {    // ,      API    var calls = [];    //  API  CSV-     APIs_array.forEach(function (csv_file_API) {        //             calls.push(new Promise(function (resolve, reject) {            //   API   AJAX            $.ajax({                type: "GET",                url: csv_file_API,                dataType: "text",                cache: false,                error: function (e) {                    alert("An error occurred while processing API calls");                    console.log("API call Failed: ", e);                    reject(e);                },                success: function (data) {                    var jsonData = $.csv.toObjects(data);                    console.log(jsonData);                    resolve(jsonData);                } // end:       API            }); // end: AJAX-        })); // end:         }); // end:   API    //      API    Promise.all(calls).then(function (data) {        //           var flatData = data.map(function (item) {            return item;        }).flat();        console.log(flatData);        dislayData(flatData);    }); } function dislayData(data) {       $.each(data, function (index, value) {        $('#showCSV').append(            '&lt;li class="list-group-item d-flex justify-content-between align-items-center"&gt;' +                '&lt;span style="width: 15%; font-size: 1rem; font-weight: bold; color: #37474F"&gt;' +                    value['FIRST NAME'] +                '&lt;/span&gt;' +                '&lt;span style="width: 15%; font-size: 1rem; color: #37474F"&gt;' +                    value['LAST NAME'] +                '&lt;/span&gt;' +                '&lt;span class="badge warning-color-dark badge-pill"&gt;' +                    value['PHONE NUMBER'] +                '&lt;/span&gt;' +                '&lt;span class="badge success-color-dark badge-pill"&gt;' +                    value['EMAIL ADDRESS'] +                '&lt;/span&gt;' +                '&lt;span class="badge badge-primary badge-pill"&gt;' +                    value.CITY +                '&lt;/span&gt;' +                '&lt;span class="badge badge-primary badge-pill"&gt;' +                    value.STATE +                '&lt;/span&gt;' +            '&lt;/li&gt;'        );    }); }</span></span></code> </pre> <br>  Maintenant, apr√®s avoir copi√© l'adresse de la page, ouvrez le projet dans tous les navigateurs que vous avez.  Dans mon cas, il s'agissait d'Internet Explorer, de Firefox Mozilla, de Microsoft Edge et de Google Chrome.  Il s'est av√©r√© que l'application ne fonctionnait plus normalement dans Internet Explorer et Microsoft Edge.  Seuls les en-t√™tes y √©taient affich√©s. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c91/92b/4a7/c9192b4a7c3904c2cfd54926b0847e4c.png"><br>  <i><font color="#999999">Page de projet Chrome</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bb1/b14/5d0/bb1b145d0b398cf22779245b3a27719d.png"><br>  <i><font color="#999999">Page du projet Microsoft Edge</font></i> <br><br>  Il n'y a pas de donn√©es sur la page affich√©e par certains navigateurs pour deux raisons: <br><br><ol><li>  J'ai utilis√© des promesses et des rappels que tous les navigateurs ne prennent pas en charge.  Par exemple, parmi ces navigateurs se trouvent IE et Edge. </li><li>  J'ai utilis√© la m√©thode du tableau <code>flat()</code> afin de cr√©er un nouveau tableau ¬´plat¬ª √† partir d'un tableau existant.  Cette m√©thode n'est pas prise en charge par certains navigateurs.  Parmi eux, comme dans le cas pr√©c√©dent, IE et Edge. </li></ol><br><h3>  <font color="#3AC1EF">‚ñçApplication de polyfills</font> </h3><br>  Nous corrigeons le probl√®me des promesses et des rappels en utilisant la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bluebird</a> .  Il s'agit d'une impl√©mentation compl√®te de JS de m√©canismes li√©s aux promesses.  La caract√©ristique la plus int√©ressante de la biblioth√®que Bluebird est qu'elle vous permet de ¬´surclasser¬ª d'autres modules Node, en les traitant afin que vous puissiez travailler avec eux de mani√®re asynchrone.  Ce type de traitement peut √™tre appliqu√© au code qui utilise des rappels. <br><br>  T√©l√©chargez la biblioth√®que Bluebird sur la page en utilisant la ressource CDN appropri√©e.  Pour ce faire, mettez ce qui suit dans l'en-t√™te du fichier <code>index.html</code> (dans l'√©l√©ment <code>head</code> ): <br><br><pre> <code class="javascript hljs">&lt;script src=<span class="hljs-string"><span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.7.0/bluebird.min.js"</span></span>&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Afin de r√©soudre le probl√®me concernant la m√©thode du tableau <code>flat()</code> , ajoutez le code suivant en haut du fichier <code>script.js</code> : <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype, <span class="hljs-string"><span class="hljs-string">'flat'</span></span>,    {        <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">depth</span></span></span><span class="hljs-function">) </span></span>{            depth = <span class="hljs-number"><span class="hljs-number">1</span></span>;            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.reduce(                <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">flat, toFlatten</span></span></span><span class="hljs-function">) </span></span>{                    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> flat.concat((<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.isArray(toFlatten) &amp;&amp; (depth &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>)) ? toFlatten.flat(depth - <span class="hljs-number"><span class="hljs-number">1</span></span>) : toFlatten);                }, []            );        },        <span class="hljs-attr"><span class="hljs-attr">configurable</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> });</code> </pre> <br>  Maintenant, l'application devrait fonctionner dans tous les navigateurs comme pr√©vu.  Voici, par exemple, √† quoi cela ressemble maintenant dans Microsoft Edge. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c7f/2ae/6f8/c7f2ae6f88ec375a2a005fd6998f8387.png"><br>  <i><font color="#999999">Page de projet raffin√©e dans Microsoft Edge</font></i> <br><br>  J'ai d√©ploy√© ce projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Vous pouvez en faire l'exp√©rience. <br><br>  Si vous n'avez pas r√©ussi √† faire fonctionner le projet, consultez mon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©f√©rentiel</a> . <br><br>  Et ici - par exemple - quelques polyfills suppl√©mentaires. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   String.prototype.startsWith() if (!String.prototype.startsWith) {    Object.defineProperty(String.prototype, 'startsWith', {        value: function (search, rawPos) {            pos = rawPos &gt; 0 ? rawPos | 0 : 0;            return this.substring(pos, pos + search.length) === search;        }    }); } //   String.prototype.includes() if (!String.prototype.includes) {    String.prototype.includes = function (search, start) {        'use strict';        if (typeof start !== 'number') {            start = 0;        }        if (start + search.length &gt; this.length) {            return false;        } else {            return this.indexOf(search, start) !== -1;        }    }; }</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  Les polyfills √©taient particuli√®rement pertinents auparavant, mais m√™me aujourd'hui, ils peuvent aider au d√©veloppement de projets Web multi-navigateurs.  Nous esp√©rons que l'exemple donn√© ici a permis √† ceux qui ne connaissaient pas le polyfill de poser un nouveau regard sur le probl√®me de la cr√©ation de sites con√ßus pour diff√©rents navigateurs. <br><br>  <b>Chers lecteurs!</b>  Utilisez-vous du polyfill? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/-o/2e/tu/-o2etuqogwhmdnmysb9_vivc9v4.png"></a> </div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr475248/">https://habr.com/ru/post/fr475248/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr475236/index.html">N'ignorez plus jamais l'entra√Ænement de renforcement.</a></li>
<li><a href="../fr475240/index.html">Utilisation de modules stricts dans des projets Python √† grande √©chelle: exp√©rience Instagram. Partie 1</a></li>
<li><a href="../fr475242/index.html">Utilisation de modules stricts dans des projets Python √† grande √©chelle: exp√©rience Instagram. 2e partie</a></li>
<li><a href="../fr475244/index.html">Nouvelles fonctionnalit√©s JavaScript attendues que vous devez conna√Ætre</a></li>
<li><a href="../fr475246/index.html">Programmation asynchrone Python: un bref aper√ßu</a></li>
<li><a href="../fr475250/index.html">Comme Redash l'a remarqu√© et a corrig√© un probl√®me qui provoquait une d√©gradation des performances du code Python</a></li>
<li><a href="../fr475252/index.html">Comment critiquer Microsoft</a></li>
<li><a href="../fr475254/index.html">Architecture AERODISK vAIR ou caract√©ristiques de la construction d'un cluster national</a></li>
<li><a href="../fr475258/index.html">Une repr√©sentation visuelle des √©lections √† Saint-P√©tersbourg - la magie de l'habillage vocal</a></li>
<li><a href="../fr475260/index.html">La diff√©rence entre une fonction asynchrone et une fonction qui renvoie une promesse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>