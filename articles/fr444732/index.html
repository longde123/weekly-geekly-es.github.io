<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì¨ üöô üõí Optimisation des performances apache2 üßëüèº üßöüèª üë©üèæ‚Äçü§ù‚Äçüë®üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beaucoup utilisent apache2 comme serveur Web. Cependant, peu de gens pensent √† optimiser ses performances, ce qui affecte directement la vitesse de ch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Optimisation des performances apache2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444732/">  Beaucoup utilisent apache2 comme serveur Web.  Cependant, peu de gens pensent √† optimiser ses performances, ce qui affecte directement la vitesse de chargement des pages sur le site, la vitesse de traitement des scripts (notamment php), ainsi que l'augmentation de la charge CPU et l'augmentation de la quantit√© de RAM utilis√©e. <br><br>  Ainsi, le manuel suivant devrait aider les utilisateurs d√©butants (et pas seulement). <br>  Tous les exemples ci-dessous ont √©t√© utilis√©s sur Raspberry PI 3, Debian 9, Apache 2.4.38, PHP 7.3. <br><a name="habracut"></a><br>  Commen√ßons donc. <br><br><h3>  1. D√©sactiver les modules inutilis√©s </h3><br>  La premi√®re m√©thode est la d√©sactivation banale des modules que vous n'utilisez pas: <br><br>  La liste des modules actuellement utilis√©s peut √™tre consult√©e avec la commande: <br><br><pre><code class="bash hljs">apache2ctl -M</code> </pre> <br>  Pour d√©sactiver le module, utilisez la commande: <br><br><pre> <code class="bash hljs">a2dismod * *</code> </pre> <br>  En cons√©quence, pour activer le module, utilisez la commande: <br><br><pre> <code class="bash hljs">a2enmod * *</code> </pre> <br>  Veuillez noter que lorsque vous utilisez <i>a2dismod</i> , le nom du module doit √™tre √©crit sans le mot module lui-m√™me. <br><br>  Par exemple, si vous avez vu <i>proxy_module</i> dans la sortie de la <i>commande</i> <i>apache2ctl -M</i> , puis pour le d√©sactiver, utilisez la commande - <i>a2dismod proxy</i> <br><br>  Les modules les plus charg√©s par le syst√®me (par exp√©rience personnelle) sont: <br><br><ul><li>  PHP, Ruby, Perl et autres modules pour diff√©rents langages de script </li><li>  SSL </li><li>  R√©√©crire </li><li>  CGI </li></ul><br>  Donc, dans les cas o√π vous n'avez pas besoin de ces modules, je recommande de d√©sactiver ces modules. <br><br>  De plus, apr√®s avoir d√©sactiv√© un module, je recommande d'utiliser la commande - <i>apache2ctl configtest</i> , qui v√©rifiera la configuration des sites utilis√©s et si l'un des modules d√©sactiv√©s √©tait n√©cessaire pour eux, cela donnera une erreur. <br><br><h3>  2. Modifiez MPM (Multi-Processing Module) et utilisez php-fpm </h3><br>  Par d√©faut, apr√®s l'installation, apache2 utilise MPM Prefork (1 thread pour 1 connexion), ce qui r√©duit consid√©rablement les performances, mais am√©liore en m√™me temps la stabilit√© et la s√©curit√©. <br><br>  Mais pour optimiser les performances, je recommande d'utiliser MPM Worker, qui vous permet d'utiliser plusieurs threads sur une connexion √† la fois. <br><br>  Pour l'activer, utilisez les commandes suivantes: <br><br><pre> <code class="bash hljs">a2dismod mpm_prefork // prefork a2dismod php7.3 //  php,    prefork a2enmod mpm_worker // worker</code> </pre><br>  Cependant, lorsque vous utilisez Worker, vous pouvez rencontrer un probl√®me car  Le module php7.3 d√©pend du module Prefork. <br><br>  Pour r√©soudre ce probl√®me, installez le module php7.3-fpm, qui sera utilis√© pour √©laborer des scripts php: <br><br><pre> <code class="bash hljs">apt-get update &amp;&amp; apt-get install php7.3-fpm // systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> php7.3-fpm &amp;&amp; systemctl start php7.3-fpm //     a2enmod php7.3-fpm &amp;&amp; a2enconf php7.3-fpm.conf //     </code> </pre><br>  Il est √† noter que l'utilisation de php-fpm r√©duira √©galement la quantit√© de RAM utilis√©e par le processus apache2 et acc√©l√©rera l√©g√®rement le traitement des scripts php. <br><br><h3>  3. Conclusion </h3><br>  Ainsi, avec de telles actions simples, nous avons pu optimiser les performances et r√©duire la charge sur la machine (dans ce cas, RPI3). <br><br>  Bien s√ªr, il existe des centaines d'autres options d'optimisation, telles que l'activation de la compression (ce qui est vraiment utile, mais pour la plupart, elle est d√©j√† activ√©e par d√©faut), la modification des param√®tres (fichiers de configuration) de MPM, la d√©sactivation de HostnameLookups, etc., mais dans cet article, j'ai essay√© de r√©fl√©chir ce sont les points qui m'ont le plus aid√© et j'esp√®re qu'ils aideront les autres. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr444732/">https://habr.com/ru/post/fr444732/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr444720/index.html">Ce que l'auteur a fum√©: ajoutez la vieille √©cole √† ce monde fou de jeux</a></li>
<li><a href="../fr444724/index.html">Architecture de runet</a></li>
<li><a href="../fr444726/index.html">Lecteur OBD2 - Diagnostic automobile</a></li>
<li><a href="../fr444728/index.html">Comme j'ai √©crit et publi√© un livre sur l'Universit√© d'√âtat de Moscou, ou 12 erreurs critiques</a></li>
<li><a href="../fr444730/index.html">Pourquoi la technologie sans serveur est une r√©volution dans la gestion des produits</a></li>
<li><a href="../fr444734/index.html">Habraseminar: de vraies histoires sur le marketing de contenu</a></li>
<li><a href="../fr444738/index.html">Pixel art: du brouillon √† l'actif du jeu</a></li>
<li><a href="../fr444742/index.html">Index dans PostgreSQL - 5 (GiST)</a></li>
<li><a href="../fr444744/index.html">Envoi de courrier √† l'aide de PHP</a></li>
<li><a href="../fr444746/index.html">Nous vous invitons au MskDotNet Meetup # 34 √† Raiffeisenbank upd Broadcast</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>