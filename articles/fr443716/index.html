<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìΩÔ∏è üíî ü§Ωüèª "J'ai une sauvegarde sur ma bande." Histoire √† la premi√®re personne ü§üüèª üö∂üèæ üòã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans l' article pr√©c√©dent, nous vous avions parl√© des nouvelles fonctionnalit√©s de la mise √† jour 4 de Veeam Backup & Replication 9.5 (VBR), publi√©e e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"J'ai une sauvegarde sur ma bande." Histoire √† la premi√®re personne</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/veeam/blog/443716/">  Dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article pr√©c√©dent,</a> nous vous avions parl√© des nouvelles fonctionnalit√©s de la mise √† jour 4 de Veeam Backup &amp; Replication 9.5 (VBR), publi√©e en janvier, o√π les sauvegardes sur la bande n'√©taient pas d√©lib√©r√©ment mentionn√©es.  L'histoire de ce domaine m√©rite un article s√©par√©, car il y avait vraiment beaucoup de nouvelles fonctionnalit√©s. <br><br>  <i>- QA les gars, √©crivez un article?</i> <i><br></i>  <i>- Pourquoi pas!</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/no/jg/36/nojg36lajf54g2qfjil2wmnesgm.jpeg"></div><a name="habracut"></a><br><h1>  Les lecteurs de bande au 21e si√®cle </h1><br>  Le stockage de donn√©es sur des bandes magn√©tiques (cassettes, <b>tip</b> , comme nous les appelons en R&amp;D) ne se limite pas √† l'ordinateur ZX-Spectrum, qui √©tait une chose du pass√©, dont un jeu pouvait √™tre charg√© dans 48 Ko de RAM √† partir d'une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cassette de bande</a> pendant plusieurs minutes.  Pendant un quart de si√®cle, la vitesse et la capacit√© des cassettes ont augment√© de 6 √† 7 ordres de grandeur.  Cette comparaison n'est pas enti√®rement correcte et la norme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LTO</a> ne suit pas le rythme de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la loi de Moore</a> .  N√©anmoins, les technologies modernes permettent d'enregistrer 12 t√©raoctets de donn√©es sur un kilom√®tre de bande (jusqu'√† 30 t√©raoctets en mode de compression), de sorte que le lecteur de 160 dollars laisse les concurrents derri√®re le co√ªt du stockage √† long terme d'une grande quantit√© de donn√©es, m√™me en tenant compte des investissements dans le mat√©riel d'enregistrement / lire.  Les donn√©es sur ces bandes sont stock√©es de mani√®re fiable pendant 15 √† 30 ans. <br><br>  Je viendrai de l‚Äôautre c√¥t√©.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les virus Ransomware</a> ont r√©cemment atteint un nouveau niveau.  Ils peuvent attendre leur temps dans l'infrastructure d'une grande entreprise pendant des semaines et des mois, et avec l'av√®nement d'une autre vuln√©rabilit√© zero-day, ils peuvent d√©truire (non sans l'aide humaine, car beaucoup d'argent est en jeu) non seulement toutes les donn√©es, mais aussi toutes les sauvegardes qui peuvent √™tre atteintes .  Voici un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nouvel exemple du</a> moment o√π une entreprise a d√ª payer un ran√ßongiciel.  Le soi-disant <b>entrefer</b> , c'est-√†-dire les sauvegardes qui √©taient physiquement isol√©es de l'infrastructure, est devenu, en fait, le seul salut fiable de ces histoires.  La bande magn√©tique est ici l'une des solutions intemporelles. <br><br><img src="https://habrastorage.org/webt/40/dt/bq/40dtbqtgogepivirfrdlofwocaw.jpeg"><br><br>  Mais une sp√©cification et des nouveaut√©s technologiques en fer et en ferrite-baryum des principaux fabricants (IBM, HPE, Oracle, Dell) pour une protection fiable des donn√©es ne suffisent pas, vous avez besoin d'un bon logiciel.  Chez Veeam, toute notre √©quipe est engag√©e dans les sauvegardes sur bande, environ 10 personnes analysent, planifient, recherchent, d√©veloppent et testent quotidiennement.  Vous pouvez voir les r√©sultats de ce travail dans les articles pr√©c√©dents ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux</a> ).  Qu'est-ce qui a √©t√© fait au cours de la derni√®re ann√©e? <br><br><h1>  Glossaire </h1><br>  Il y a un choix entre les libert√©s par rapport √† la langue maternelle et complique la lisibilit√© du cl√©ricalisme.  Je pr√©f√®re le premier, donc je m'excuse √† l'avance si quelqu'un d'argot des mots de la liste ci-dessous peut blesser l'≈ìil.  Ici, je rappellerai bri√®vement ce que signifie un terme particulier. <br><br><div class="spoiler">  <b class="spoiler_title">Luminaires VBR cette partie peut √™tre saut√©e</b> <div class="spoiler_text">  <b>Joba</b> - t√¢che - t√¢che de sauvegarde.  En fait, l'ensemble du VBR est construit sur le tas.  En plus de la sauvegarde et de la r√©plication, il peut √©galement √™tre copi√© sur bande magn√©tique (sauvegarde sur bande, t√¢che sur bande).  Je ferai une r√©servation que la restauration √† partir d'une copie de sauvegarde (restauration) est √©galement un travail, mais dans cet article, ce mot signifie sauvegarde. <br><br>  <b>Storaj</b> - stockage - nom historiquement √©tabli.  Ce sont des fichiers dans le <b>r√©f√©rentiel</b> (r√©f√©rentiel - stockage), contenant des copies de sauvegarde - <b>compl√®tes</b> et <b>incr√©mentielles</b> .  Dans une histoire, il peut y avoir une ou plusieurs machines virtuelles. <br><br>  <b>Cha√Æne</b> - une cha√Æne est une s√©quence d'histoires connexes.  Pour restaurer les donn√©es du n-i√®me magasin incr√©mentiel, tous les pr√©c√©dents du (n-1) -st au 1er et un magasin complet, auquel le premier incr√©mental fait r√©f√©rence, sont n√©cessaires. <br><br>  <b>Source</b> , <b>cible</b> - source, cible.  La source est l'entit√© d'origine que le travail traite.  Dans le cas des sauvegardes / r√©pliques, il s'agit g√©n√©ralement d'une machine virtuelle dans l'hyperviseur.  Dans le cas d'un travail sur bande, la sauvegarde est le travail de sauvegarde lui-m√™me (enfin, ou des fichiers dans le cas d'un fichier sur des travaux sur bande).  Une cible de t√¢che de sauvegarde est un r√©f√©rentiel dans lequel les sauvegardes sont stock√©es.  Pour le travail sur bande, il s'agit d'un pool de m√©dias. <br><br>  <b>Pool de</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">m√©dias</a> - <b>pool de</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">m√©dias</a> - un pool de supports de stockage, dans notre cas - bandes.  Conteneur logique cr√©√© par l'utilisateur et contenant les cassettes d'une ou plusieurs biblioth√®ques.  Ainsi, le travail sur bande a toujours un pool de m√©dias comme cible, c'est-√†-dire que les donn√©es sont √©crites non pas sur une bande particuli√®re ou sur une bande de la biblioth√®que, mais sur un ensemble sp√©cifique d'entre elles.  Le pool de m√©dias a un param√®tre pour la dur√©e de stockage des donn√©es, apr√®s quoi la cartouche peut √™tre remplac√©e.  L'utilisateur peut cr√©er des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pools</a> standard et des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pools GFS</a> .  Chacune de ces esp√®ces peut maintenant √™tre WORM et non WORM, plus de d√©tails ci-dessous. <br><br>  <b>Ensemble de</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">m√©dias</a> - <b>ensemble de</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">m√©dias</a> - un ensemble de bandes dans le pool de m√©dias dans lequel les sauvegardes / fichiers sont √©crits en continu.  Pour les pools GFS, les jeux de supports sont √©galement li√©s √† un intervalle (par exemple, annuel - annuel), les cassettes ne tournent que dans leur intervalle. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b>Lecteur</b> , <b>changeur</b></a> - √©l√©ments de la biblioth√®que de bandes.  Un lecteur lit et rembobine une cassette; un changeur est un robot qui d√©place les cassettes entre les emplacements de stockage, les emplacements de d√©chargement et le lecteur.  Il existe des <b>lecteurs</b> autonomes (autonomes - autonomes), le r√¥le du changeur est ici jou√© par une personne.  Pour un lecteur, un pilote du fabricant correctement install√© est requis sur la machine Windows √† laquelle la biblioth√®que est connect√©e;  nous pouvons travailler avec un changeur sans pilotes, en utilisant SCSI natif. <br></div></div><br><h1>  Locataire sur bande.  Fournisseur prot√©g√© - Clients prot√©g√©s </h1><br>  Des atouts imm√©diatement sur la table.  La fonctionnalit√© la plus ambitieuse de notre mise √† jour, con√ßue pour les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fournisseurs de cloud</a> qui utilisent VBR dans leur infrastructure.  Le d√©veloppement a commenc√© il y a deux ans.  Bient√¥t, nous avons r√©alis√© que nous n'aurions pas le temps de faire face √† une t√¢che aussi s√©rieuse pour la prochaine version, avons pris une courte pause et avons finalement publi√© une fonctionnalit√© dans 9.5 Update 4. <br><br>  En bref, les fournisseurs ont d√©sormais la possibilit√© de copier les sauvegardes de leurs clients sur des cassettes √† l'aide d'un travail sur bande dans le pool GFS.  Cela donne aux prestataires - et ce sont de tr√®s gros gars chers √† notre c≈ìur et au service commercial - deux possibilit√©s: <br><br><ul><li>  prot√©ger vos clients (locataires, locataire - locataire) contre la perte de donn√©es suite √† une suppression accidentelle ou √† des probl√®mes d'infrastructure ("inondation dans la salle des serveurs"); </li><li>  fournir aux locataires un service suppl√©mentaire pour restaurer les donn√©es d'une ancienne sauvegarde, qui a longtemps √©t√© supprim√©e du r√©f√©rentiel cloud conform√©ment √† la politique de stockage des donn√©es, mais qui reste sur bande. </li></ul><br>  Du point de vue du marketing, la fonctionnalit√© est tr√®s "savoureuse", de la n√¥tre - non moins difficile √† mettre en ≈ìuvre. <br><br><h2>  D√©veloppement </h2><br>  Le principal probl√®me rencontr√© est le cryptage des donn√©es.  La plupart des sauvegardes dans le cloud sont crypt√©es, selon les statistiques, environ les ‚Öî du total.  Pour nous, ce chiffre a √©t√© une surprise, on a suppos√© que presque tout √©tait crypt√©, mais pas - de nombreux clients semblent avoir une confiance inconditionnelle dans leurs fournisseurs. <br><br>  Le paradigme est simple: le fournisseur ne doit pas √™tre en mesure de d√©crypter les donn√©es de ses locataires.  Dans le m√™me temps, dans le cadre de la nouvelle fonctionnalit√©, il est n√©cessaire du c√¥t√© du fournisseur d'ouvrir le stockage avec des sauvegardes.  Cela est n√©cessaire pour transf√©rer des blocs de donn√©es, par exemple, pour cr√©er une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sauvegarde compl√®te virtuelle</a> .  L'essentiel est de le faire quel que soit le locataire, lorsque les cl√©s n√©cessaires ne sont pas transmises au fournisseur lors de l'ex√©cution du travail. <br><br>  La solution √† ce probl√®me, utilis√©e accessoirement dans une autre caract√©ristique majeure du module compl√©mentaire publi√© - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Capacity Tier</a> - consiste √† ajouter une cl√© de chiffrement suppl√©mentaire.  La cl√© d'archive (cl√© d'archive) est stock√©e dans la base de donn√©es du fournisseur sous forme crypt√©e.  Selon un sch√©ma d√©licat du c√¥t√© du fournisseur, il peut √™tre utilis√© pour ouvrir le magasin, d√©placer et rechiffrer les blocs de donn√©es entre les magasins (apr√®s tout, chacun a sa propre cl√©), mais les donn√©es elles-m√™mes ne peuvent pas √™tre d√©crypt√©es. <br><br><img src="https://habrastorage.org/webt/ly/jv/3n/lyjv3ncjo_oymwfosymomr8jqsc.jpeg"><br>  <sup>Sch√©ma d√©licat (version de travail)</sup> <br><br>  J'ajoute que tous les ing√©nieurs en R&amp;D aiment beaucoup le chiffrement de notre produit, cependant, personne ne sait en d√©tail comment cela fonctionne.  (Il y avait encore une blague ¬´et pourquoi √ßa marche du tout¬ª, mais les √©diteurs ne l'ont pas rat√©e.) <br><br><h2>  Test </h2><br>  Des centaines de bugs ont √©t√© enregistr√©s sur la fonctionnalit√©.  Les domaines les plus difficiles sont le cryptage, l'interface utilisateur, les probl√®mes de restauration. <br><br>  Du point de vue des tests, la grande variabilit√© repr√©sentait la ¬´combinatoire¬ª des types et types de jobs de locataires et de r√©f√©rentiels - je veux dire √† la fois source et cible lors de la restauration des sauvegardes dans l'infrastructure.  Tout cela est bas√© sur la logique dans le cadre du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mod√®le GFS</a> (y compris le nouveau - parall√©lisme et ensembles de m√©dias quotidiens, plus √† ce sujet ci-dessous), et, dans l'ensemble, sur les sp√©cificit√©s du cloud qui sont inhabituelles pour les teips.  N'oubliez pas d'assaisonner avec beaucoup de cryptage.  Pour continuer la m√©taphore, nous avons mang√© beaucoup de ce plat - mais nous l'avons √©galement go√ªt√© de tous les c√¥t√©s. <br><br><img src="https://habrastorage.org/webt/oh/0r/td/oh0rtdrrznov74bycbusv3ehjqo.png"><br>  <sup>Fragment du plan de test</sup> <br><br><h2>  En cons√©quence </h2><br>  Une description d√©taill√©e peut √™tre trouv√©e dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le manuel d'utilisation</a> (jusqu'√† pr√©sent en anglais): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sauvegarde</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">restauration</a> .  Je m'attarderai sur les points principaux. <br><br><h3>  Sauvegarde </h3><br>  Le fournisseur ajoute des locataires au travail Teip avec le pool GFS comme cible.  S'il existe une licence cloud dans la deuxi√®me √©tape de l'assistant, l'option <b>Tenants</b> est disponible.  Vous pouvez ajouter tous les locataires en m√™me temps ou s√©par√©ment, ou vous pouvez choisir uniquement un quota distinct (mais pas un sous-quota) d'un locataire individuel.  Vous ne pouvez pas m√©langer des sauvegardes de locataire et des sauvegardes locales r√©guli√®res dans le m√™me travail. <br><br><img src="https://habrastorage.org/webt/l-/cq/6n/l-cq6nkc0caco4speq4accpw8kw.png"><br><br>  Le reste des teintures est presque compl√®tement identique au travail habituel dans le pool GFS. <br><br>  La restauration des donn√©es est possible √† la fois du c√¥t√© du fournisseur et du c√¥t√© du locataire lui-m√™me. <br><br><h3>  R√©cup√©ration c√¥t√© fournisseur </h3><br>  R√©alis√© via un nouvel assistant.  Ici, vous pouvez d√©j√† descendre √† un travail s√©par√©, toute la cha√Æne qui √©tait dans le r√©f√©rentiel un certain jour est restaur√©e. <br><br><img src="https://habrastorage.org/webt/hs/zb/dq/hszbdqv2oy0tnjuiquaoqsocrha.png"><br><br>  Il existe trois options de restauration: <br><br><ol><li>  Dans l'emplacement d'origine.  Dans ce cas, la sauvegarde d'origine, le cas √©ch√©ant, est supprim√©e;  les travaux des locataires sont automatiquement reconfigur√©s dans la cha√Æne restaur√©e.  Il est entendu qu'une telle restauration sera g√©n√©ralement invisible pour le client, mais pendant une courte p√©riode, elle sera d√©connect√©e du r√©f√©rentiel cloud. </li><li>  Dans un nouveau quota / r√©f√©rentiel.  Un fournisseur peut, par exemple, cr√©er un compte temporaire distinct √† cet effet, qu'il supprimera ensuite.  La sauvegarde appara√Æt dans l'infrastructure du locataire apr√®s la synchronisation avec la base de donn√©es du fournisseur. </li><li>  Juste sur un lecteur de serveur Linux ou Windows enregistr√© dans l'infrastructure du fournisseur.  De plus, cette cha√Æne peut √™tre enregistr√©e sur une cl√© USB et envoy√©e au locataire. </li></ol><br><img src="https://habrastorage.org/webt/sl/wt/ln/slwtlntmc4rklwog0bnawpphmsw.png"><br><br><h3>  R√©cup√©ration des locataires </h3><br>  Cette option implique que le client dispose de sa propre infrastructure de tip et d'une grande quantit√© de donn√©es pour le restaurant.  Le fournisseur peut envoyer physiquement la bande avec les sauvegardes enregistr√©es au client par le service de livraison, il la catalogue sur son √©quipement, d√©chiffre les bandes et les sauvegardes et travaille avec les sauvegardes comme s'il les avait lui-m√™me √©crites sur bande.  Voici un hack de vie pour ne pas t√©l√©charger de t√©raoctets sur WAN. <br><br><h1>  Am√©liorations √† grande √©chelle du pool GFS </h1><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les</a> pools de m√©dias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GFS</a> sont apparus dans VBR il y a deux ans, dans la version 9.5.  Dans la derni√®re mise √† jour, √† la fois en rapport avec l'apparition de la fonction de locataire sur bande et √† la demande des utilisateurs, nous avons bien pomp√© cette fonctionnalit√©. <br><br><h2>  Ensembles de supports quotidiens </h2><br>  Un nouvel ensemble de m√©dias <b>quotidiens</b> est apparu.  Maintenant, dans le pool GFS, vous pouvez stocker des sauvegardes pour chaque jour, et non seulement compl√®tes, mais √©galement incr√©mentielles.  Ces derniers prennent beaucoup moins d'espace, ce qui a √©t√© fait afin d'√©conomiser de la bande.  Il est entendu que ces cassettes sont constamment tourn√©es dans la biblioth√®que, et non transport√©es vers un stockage √† distance.  Dans le m√™me temps, pour un restaurant √† partir d'un point incr√©mentiel, vous aurez besoin des bandes de l'un des ensembles de m√©dias seniors (hebdomadaire, mensuel, trimestriel ou annuel).  Il est impossible d'activer le jeu de supports quotidien sans inclure celui hebdomadaire de sorte que dans la plupart des cas, il faudrait des cassettes hebdomadaires pour restaurer √† partir d'une copie incr√©mentielle.  Ils sont soit toujours dans la biblioth√®que, soit stock√©s dans un entrep√¥t moins √©loign√©. <br><br><img src="https://habrastorage.org/webt/hw/89/hb/hw89hbkwt8n5_labggo84mg_jds.png"><br><br>  La logique de travail avec les travaux sur bande dans le pool de m√©dias GFS n'est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pas la plus simple</a> , les r√©dacteurs techniques ne vous laisseront pas mentir.  Si, en r√©sum√©, en omettant les d√©tails, seules les sauvegardes compl√®tes (y compris les sauvegardes compl√®tes virtuelles) sont copi√©es dans les jeux de m√©dias hebdomadaires et sup√©rieurs, une pour chaque date, et dans la sauvegarde quotidienne toutes les sauvegardes qui se trouvent dans le r√©f√©rentiel pour la journ√©e en cours, car la sauvegarde -Le travail peut commencer plus d'une fois par jour. <br><br><h2>  Acc√®s simultan√©, heure de d√©but et attente dans les pools GFS </h2><br>  L'enregistrement parall√®le de plusieurs cha√Ænes ou le travail sur plusieurs lecteurs de biblioth√®que est d√©sormais √©galement possible dans les pools de m√©dias GFS (plus t√¥t - seulement en ordinaire).  Il est inclus dans l'√©tape <b>Options</b> du pool de m√©dias. <br><br><img src="https://habrastorage.org/webt/50/al/mh/50almhfbumzpwdqsxy8zzfgur2w.png"><br><br>  <b>Une pr√©cision importante</b> : le m√™me fichier est toujours √©crit dans le m√™me flux, par cons√©quent, dans le cas de plusieurs grandes machines virtuelles, il est recommand√© d'activer la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">configuration par VM sur le r√©f√©rentiel</a> afin que la sauvegarde se compose de plusieurs cha√Ænes. <br><br>  De plus, il est devenu possible de choisir <b>l'heure de d√©but du travail GFS lui-m√™me</b> .  De nombreux utilisateurs n'aimaient pas commencer √† minuit, puis attendre presque toute la journ√©e jusqu'√† la fin du travail d'approvisionnement.  Cette heure peut maintenant √™tre r√©gl√©e, par exemple, en fin de soir√©e, lorsqu'il y a d√©j√† quelque chose √† copier sur la bande.  De plus, √† la demande des utilisateurs, nous avons mis dans les param√®tres avanc√©s une option qui auparavant ne pouvait √™tre activ√©e qu'√† l'aide de la cl√© de registre.  Il suffit de s√©lectionner <b>Traiter le point de restauration le plus r√©cent au lieu d'attendre</b> - et ce qui se trouve dans le r√©f√©rentiel au moment du d√©but du travail sur bande (le point d'hier, par exemple) est copi√© sur la bande, il n'y a pas du tout d'attente. <br><br><img src="https://habrastorage.org/webt/5c/lw/tr/5clwtrg4ea-h_cinvjj4cbcnwb8.png"><br><br><h1>  Travail am√©lior√© avec plusieurs biblioth√®ques </h1><br>  Il s'agira de la situation lorsque plusieurs biblioth√®ques sont ajout√©es √† un pool de m√©dias.  Nous l'avons soutenu auparavant, mais de temps √† autre, les clients se sont plaints de comportements pas tout √† fait pr√©visibles. <br><br><h2>  √âtait </h2><br><img src="https://habrastorage.org/webt/lm/em/zb/lmemzbkxcz0vs8vjamt2u7xt9xu.png"><br><br>  Par exemple, le travail sur bande a commenc√©, il a fallu deux lecteurs dans la premi√®re biblioth√®que, mais les param√®tres de concurrence lui permettent d'utiliser 4 lecteurs √† la fois.  Ce travail doit-il basculer vers la deuxi√®me biblioth√®que du pool de m√©dias et l'utiliser √©galement, ou s'agit-il d'un gaspillage de ressources? <br><br>  Un autre cas.  Une option a √©t√© s√©lectionn√©e pour passer par la condition ¬´il n'y a pas de cassettes disponibles¬ª, dans la premi√®re biblioth√®que, il n'y a qu'une seule cassette, mais toutes les donn√©es y sont potentiellement plac√©es.  Cependant, les param√®tres vous permettent d'√©crire en parall√®le sur deux cassettes.  La deuxi√®me biblioth√®que doit-elle √™tre impliqu√©e dans ce cas? <br><br>  Nous avons d√©cid√© de mettre cette zone en ordre, ce qui permet de personnaliser explicitement le comportement. <br><br><h2>  Est devenu </h2><br><img src="https://habrastorage.org/webt/jq/wc/0d/jqwc0dneyn9cpqpkwoqq6fzyno4.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les biblioth√®ques du pool de m√©dias</a> sont apparues des r√¥les - <b>actifs</b> et <b>passifs</b> .  Et le pool de m√©dias lui-m√™me a deux modes: s√©curit√© int√©gr√©e ou basculement et mise en <b>parall√®le</b> .  Maintenant, selon les exigences, vous pouvez configurer le pool de m√©dias de diff√©rentes mani√®res. <br><br><ul><li>  Si vous avez plusieurs biblioth√®ques homologues et que vous devez parall√©liser l'enregistrement en elles, activez le mode d'enregistrement parall√®le, pour cela toutes les biblioth√®ques doivent se voir attribuer des r√¥les actifs.  Dans ce cas, les nouvelles bandes et lecteurs seront activ√©s imm√©diatement, d√®s que le besoin s'en fera sentir, quelle que soit la biblioth√®que dans laquelle ils se trouvent.  Il y a toujours une priorit√© - d'abord, nous allons essayer de trouver des ressources dans la biblioth√®que situ√©e plus haut dans la liste. </li><li>  S'il y a une biblioth√®que principale et un lecteur ancien ou autonome en r√©serve, activez le mode feylover en pla√ßant la biblioth√®que principale en haut de la liste et en choisissant un r√¥le passif pour les p√©riph√©riques de sauvegarde.  Le passage √† un tel appareil ne se produira que lorsqu'il est vraiment n√©cessaire que le travail fonctionne au moins d'une mani√®re ou d'une autre.  Cette situation sera consid√©r√©e comme anormale, qui fera l'objet d'une notification par mail. </li></ul><br>  Il y a une situation plus compliqu√©e que nous ne prenons pas encore en charge - plusieurs biblioth√®ques actives avec des biblioth√®ques passives.  La r√©troaction montrera s'il y a un besoin pour de telles configurations et s'il est n√©cessaire de "terminer" la fonctionnalit√© √† l'avenir.  Pratique standard. <br><br><h1>  Support WORM </h1><br>  <b>WORM</b> - Write Once Read Many - les bandes qui ne peuvent pas √™tre effac√©es ou √©cras√©es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">au niveau du fer</a> peuvent uniquement ajouter des donn√©es.  Leur utilisation obligatoire est r√©glement√©e par les r√®gles de certaines organisations, par exemple celles qui travaillent dans le domaine de la m√©decine.  Le principal probl√®me avec de telles bandes auparavant √©tait que VBR lors de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">inventaire</a> ou du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">catalogage</a> enregistrait un en-t√™te qui ne pouvait plus √™tre effac√© √† l'avenir, et les travaux sur bande tombaient avec une erreur lors d'une telle tentative. <br><br>  Dans 9.5 Update 4, la prise en charge compl√®te de ces bandes est impl√©ment√©e.  Ajout de pools de m√©dias WORM, r√©guliers et GFS, o√π vous ne pouvez mettre que des bandes de ce type. <br><br><img src="https://habrastorage.org/webt/jw/xn/kh/jwxnkhju_i7nadbdv3y2nnuubzg.png"><br><br>  Les nouvelles cassettes ont une ic√¥ne bleue ¬´gel√©e¬ª.  Du point de vue de l'utilisateur, travailler avec des cassettes WORM n'est pas diff√©rent de travailler avec des cassettes ordinaires. <br><br>  L '¬´alimentation¬ª des cassettes est initialement d√©termin√©e par le suffixe du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">barres</a> , si le code-barres qu'elles contiennent est r√©gulier ou illisible, le lecteur fournit des informations lors de la premi√®re insertion de la cartouche.  Placez les bandes WORM dans un pool de m√©dias r√©gulier et leur √©crire ne fonctionnera pas.  Du dr√¥le: il y avait d√©j√† des utilisateurs qui avaient coll√© des codes-barres WORM sur des cassettes ordinaires et √©taient surpris des changements dans leur infrastructure apr√®s la mise √† jour. <br><br><h2>  Puce de cartouche </h2><br>  Parall√®lement √† l'introduction de cassettes non r√©inscriptibles, ils ont commenc√© √† travailler avec la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">puce</a> .  Nous n'avions pas utilis√© d'attributs standard dans la puce auparavant, maintenant nous √©crivons et lisons certains d'entre eux, mais nous ne les percevons pas comme la principale source de donn√©es.  La principale ligne directrice est toujours le titre de la cassette.  Cette d√©cision s'est av√©r√©e correcte: un mois apr√®s la sortie, nous voyons comment le ¬´zoo¬ª du fer de l'utilisateur apporte des surprises en termes de travail avec la puce. <br><br><h1>  Sauvegarde sur bande des volumes NDMP </h1><br>  En conclusion, sur la fonctionnalit√© la plus demand√©e par le nombre d'avis de cette mise √† jour.  La sauvegarde des volumes NDMP sur bandes est devenue disponible.  Il est n√©cessaire d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ajouter un serveur NDMP √† l'</a> infrastructure VBR, apr√®s quoi il deviendra possible de s√©lectionner des volumes de cet h√¥te dans le travail de fichier teip.  Ils tombent sur la cassette sous forme de fichiers avec un attribut sp√©cial pour les distinguer du catalogage habituel. <br><br><img src="https://habrastorage.org/webt/de/_q/wn/de_qwns8hgdyko372yoji6jhamq.png"><br><br>  Dans la premi√®re impl√©mentation, il existe certaines limitations: les extensions ne sont pas prises en charge, plus la sauvegarde et la restauration du volume complet, mais pas des fichiers individuels, sont possibles.  La sauvegarde fonctionne via le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vidage</a> (dans le cas de NetApp - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ufsdump</a> ), il y a quelques particularit√©s: le nombre maximum de points incr√©mentiels est de 9, apr√®s quoi une sauvegarde compl√®te est forc√©e. <br><br><h1>  En conclusion </h1><br>               VBR 9.5 Update 4.    : <br><br><ul><li>    -    -; </li><li>   Tape Operator (   ,     ‚Äì    Restore Operator); </li><li>   include/exclude-   - ( NDMP); </li><li>     - (    ,      ,    ,     -      ‚Äì   , ); </li><li>         ; </li><li>       ,  ,      /     ,   ; </li><li>   . </li></ul><br><h1>  Liens utiles </h1><br>         : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">      VBR 9.5 Update 4</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   ¬´     Veeam   ¬ª</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   ¬´7        -¬ª</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  ,    ( .)</a> </li><li>         ¬´  ¬ª (,    ) ‚Äì   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> .      95 ‚Äì 102. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr443716/">https://habr.com/ru/post/fr443716/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr443702/index.html">Comment d√©l√©guer des rapports simples au robot. √âcrire un bot en Python et Google BigQuery</a></li>
<li><a href="../fr443704/index.html">Selon les r√©sultats de l'introduction en bourse de 2019, 5 mille nouveaux millionnaires pourraient appara√Ætre dans la Silicon Valley</a></li>
<li><a href="../fr443708/index.html">La mission Chang'e 4 est le troisi√®me jour lunaire. Rover "Yutu-2" √† la recherche de ... pierres</a></li>
<li><a href="../fr443710/index.html">Java Challengers # 4: Comparaison d'objets avec equals () et hashCode ()</a></li>
<li><a href="../fr443714/index.html">ControlValueAccessor et contenteditable dans Angular</a></li>
<li><a href="../fr443718/index.html">Jeu fantastique avec 300 mille courses</a></li>
<li><a href="../fr443720/index.html">D√©tails</a></li>
<li><a href="../fr443722/index.html">Conception et d√©nomination des files d'attente</a></li>
<li><a href="../fr443724/index.html">AMD Radeon VII: puce haut de gamme (partie 1)</a></li>
<li><a href="../fr443726/index.html">Caract√©ristiques de configuration de Palo Alto Networks: VPN SSL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>