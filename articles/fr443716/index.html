<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📽️ 💔 🤽🏻 "J'ai une sauvegarde sur ma bande." Histoire à la première personne 🤟🏻 🚶🏾 😋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans l' article précédent, nous vous avions parlé des nouvelles fonctionnalités de la mise à jour 4 de Veeam Backup & Replication 9.5 (VBR), publiée e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"J'ai une sauvegarde sur ma bande." Histoire à la première personne</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/veeam/blog/443716/">  Dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article précédent,</a> nous vous avions parlé des nouvelles fonctionnalités de la mise à jour 4 de Veeam Backup &amp; Replication 9.5 (VBR), publiée en janvier, où les sauvegardes sur la bande n'étaient pas délibérément mentionnées.  L'histoire de ce domaine mérite un article séparé, car il y avait vraiment beaucoup de nouvelles fonctionnalités. <br><br>  <i>- QA les gars, écrivez un article?</i> <i><br></i>  <i>- Pourquoi pas!</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/no/jg/36/nojg36lajf54g2qfjil2wmnesgm.jpeg"></div><a name="habracut"></a><br><h1>  Les lecteurs de bande au 21e siècle </h1><br>  Le stockage de données sur des bandes magnétiques (cassettes, <b>tip</b> , comme nous les appelons en R&amp;D) ne se limite pas à l'ordinateur ZX-Spectrum, qui était une chose du passé, dont un jeu pouvait être chargé dans 48 Ko de RAM à partir d'une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cassette de bande</a> pendant plusieurs minutes.  Pendant un quart de siècle, la vitesse et la capacité des cassettes ont augmenté de 6 à 7 ordres de grandeur.  Cette comparaison n'est pas entièrement correcte et la norme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LTO</a> ne suit pas le rythme de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la loi de Moore</a> .  Néanmoins, les technologies modernes permettent d'enregistrer 12 téraoctets de données sur un kilomètre de bande (jusqu'à 30 téraoctets en mode de compression), de sorte que le lecteur de 160 dollars laisse les concurrents derrière le coût du stockage à long terme d'une grande quantité de données, même en tenant compte des investissements dans le matériel d'enregistrement / lire.  Les données sur ces bandes sont stockées de manière fiable pendant 15 à 30 ans. <br><br>  Je viendrai de l’autre côté.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les virus Ransomware</a> ont récemment atteint un nouveau niveau.  Ils peuvent attendre leur temps dans l'infrastructure d'une grande entreprise pendant des semaines et des mois, et avec l'avènement d'une autre vulnérabilité zero-day, ils peuvent détruire (non sans l'aide humaine, car beaucoup d'argent est en jeu) non seulement toutes les données, mais aussi toutes les sauvegardes qui peuvent être atteintes .  Voici un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nouvel exemple du</a> moment où une entreprise a dû payer un rançongiciel.  Le soi-disant <b>entrefer</b> , c'est-à-dire les sauvegardes qui étaient physiquement isolées de l'infrastructure, est devenu, en fait, le seul salut fiable de ces histoires.  La bande magnétique est ici l'une des solutions intemporelles. <br><br><img src="https://habrastorage.org/webt/40/dt/bq/40dtbqtgogepivirfrdlofwocaw.jpeg"><br><br>  Mais une spécification et des nouveautés technologiques en fer et en ferrite-baryum des principaux fabricants (IBM, HPE, Oracle, Dell) pour une protection fiable des données ne suffisent pas, vous avez besoin d'un bon logiciel.  Chez Veeam, toute notre équipe est engagée dans les sauvegardes sur bande, environ 10 personnes analysent, planifient, recherchent, développent et testent quotidiennement.  Vous pouvez voir les résultats de ce travail dans les articles précédents ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux</a> ).  Qu'est-ce qui a été fait au cours de la dernière année? <br><br><h1>  Glossaire </h1><br>  Il y a un choix entre les libertés par rapport à la langue maternelle et complique la lisibilité du cléricalisme.  Je préfère le premier, donc je m'excuse à l'avance si quelqu'un d'argot des mots de la liste ci-dessous peut blesser l'œil.  Ici, je rappellerai brièvement ce que signifie un terme particulier. <br><br><div class="spoiler">  <b class="spoiler_title">Luminaires VBR cette partie peut être sautée</b> <div class="spoiler_text">  <b>Joba</b> - tâche - tâche de sauvegarde.  En fait, l'ensemble du VBR est construit sur le tas.  En plus de la sauvegarde et de la réplication, il peut également être copié sur bande magnétique (sauvegarde sur bande, tâche sur bande).  Je ferai une réservation que la restauration à partir d'une copie de sauvegarde (restauration) est également un travail, mais dans cet article, ce mot signifie sauvegarde. <br><br>  <b>Storaj</b> - stockage - nom historiquement établi.  Ce sont des fichiers dans le <b>référentiel</b> (référentiel - stockage), contenant des copies de sauvegarde - <b>complètes</b> et <b>incrémentielles</b> .  Dans une histoire, il peut y avoir une ou plusieurs machines virtuelles. <br><br>  <b>Chaîne</b> - une chaîne est une séquence d'histoires connexes.  Pour restaurer les données du n-ième magasin incrémentiel, tous les précédents du (n-1) -st au 1er et un magasin complet, auquel le premier incrémental fait référence, sont nécessaires. <br><br>  <b>Source</b> , <b>cible</b> - source, cible.  La source est l'entité d'origine que le travail traite.  Dans le cas des sauvegardes / répliques, il s'agit généralement d'une machine virtuelle dans l'hyperviseur.  Dans le cas d'un travail sur bande, la sauvegarde est le travail de sauvegarde lui-même (enfin, ou des fichiers dans le cas d'un fichier sur des travaux sur bande).  Une cible de tâche de sauvegarde est un référentiel dans lequel les sauvegardes sont stockées.  Pour le travail sur bande, il s'agit d'un pool de médias. <br><br>  <b>Pool de</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">médias</a> - <b>pool de</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">médias</a> - un pool de supports de stockage, dans notre cas - bandes.  Conteneur logique créé par l'utilisateur et contenant les cassettes d'une ou plusieurs bibliothèques.  Ainsi, le travail sur bande a toujours un pool de médias comme cible, c'est-à-dire que les données sont écrites non pas sur une bande particulière ou sur une bande de la bibliothèque, mais sur un ensemble spécifique d'entre elles.  Le pool de médias a un paramètre pour la durée de stockage des données, après quoi la cartouche peut être remplacée.  L'utilisateur peut créer des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pools</a> standard et des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pools GFS</a> .  Chacune de ces espèces peut maintenant être WORM et non WORM, plus de détails ci-dessous. <br><br>  <b>Ensemble de</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">médias</a> - <b>ensemble de</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">médias</a> - un ensemble de bandes dans le pool de médias dans lequel les sauvegardes / fichiers sont écrits en continu.  Pour les pools GFS, les jeux de supports sont également liés à un intervalle (par exemple, annuel - annuel), les cassettes ne tournent que dans leur intervalle. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b>Lecteur</b> , <b>changeur</b></a> - éléments de la bibliothèque de bandes.  Un lecteur lit et rembobine une cassette; un changeur est un robot qui déplace les cassettes entre les emplacements de stockage, les emplacements de déchargement et le lecteur.  Il existe des <b>lecteurs</b> autonomes (autonomes - autonomes), le rôle du changeur est ici joué par une personne.  Pour un lecteur, un pilote du fabricant correctement installé est requis sur la machine Windows à laquelle la bibliothèque est connectée;  nous pouvons travailler avec un changeur sans pilotes, en utilisant SCSI natif. <br></div></div><br><h1>  Locataire sur bande.  Fournisseur protégé - Clients protégés </h1><br>  Des atouts immédiatement sur la table.  La fonctionnalité la plus ambitieuse de notre mise à jour, conçue pour les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fournisseurs de cloud</a> qui utilisent VBR dans leur infrastructure.  Le développement a commencé il y a deux ans.  Bientôt, nous avons réalisé que nous n'aurions pas le temps de faire face à une tâche aussi sérieuse pour la prochaine version, avons pris une courte pause et avons finalement publié une fonctionnalité dans 9.5 Update 4. <br><br>  En bref, les fournisseurs ont désormais la possibilité de copier les sauvegardes de leurs clients sur des cassettes à l'aide d'un travail sur bande dans le pool GFS.  Cela donne aux prestataires - et ce sont de très gros gars chers à notre cœur et au service commercial - deux possibilités: <br><br><ul><li>  protéger vos clients (locataires, locataire - locataire) contre la perte de données suite à une suppression accidentelle ou à des problèmes d'infrastructure ("inondation dans la salle des serveurs"); </li><li>  fournir aux locataires un service supplémentaire pour restaurer les données d'une ancienne sauvegarde, qui a longtemps été supprimée du référentiel cloud conformément à la politique de stockage des données, mais qui reste sur bande. </li></ul><br>  Du point de vue du marketing, la fonctionnalité est très "savoureuse", de la nôtre - non moins difficile à mettre en œuvre. <br><br><h2>  Développement </h2><br>  Le principal problème rencontré est le cryptage des données.  La plupart des sauvegardes dans le cloud sont cryptées, selon les statistiques, environ les ⅔ du total.  Pour nous, ce chiffre a été une surprise, on a supposé que presque tout était crypté, mais pas - de nombreux clients semblent avoir une confiance inconditionnelle dans leurs fournisseurs. <br><br>  Le paradigme est simple: le fournisseur ne doit pas être en mesure de décrypter les données de ses locataires.  Dans le même temps, dans le cadre de la nouvelle fonctionnalité, il est nécessaire du côté du fournisseur d'ouvrir le stockage avec des sauvegardes.  Cela est nécessaire pour transférer des blocs de données, par exemple, pour créer une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sauvegarde complète virtuelle</a> .  L'essentiel est de le faire quel que soit le locataire, lorsque les clés nécessaires ne sont pas transmises au fournisseur lors de l'exécution du travail. <br><br>  La solution à ce problème, utilisée accessoirement dans une autre caractéristique majeure du module complémentaire publié - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Capacity Tier</a> - consiste à ajouter une clé de chiffrement supplémentaire.  La clé d'archive (clé d'archive) est stockée dans la base de données du fournisseur sous forme cryptée.  Selon un schéma délicat du côté du fournisseur, il peut être utilisé pour ouvrir le magasin, déplacer et rechiffrer les blocs de données entre les magasins (après tout, chacun a sa propre clé), mais les données elles-mêmes ne peuvent pas être décryptées. <br><br><img src="https://habrastorage.org/webt/ly/jv/3n/lyjv3ncjo_oymwfosymomr8jqsc.jpeg"><br>  <sup>Schéma délicat (version de travail)</sup> <br><br>  J'ajoute que tous les ingénieurs en R&amp;D aiment beaucoup le chiffrement de notre produit, cependant, personne ne sait en détail comment cela fonctionne.  (Il y avait encore une blague «et pourquoi ça marche du tout», mais les éditeurs ne l'ont pas ratée.) <br><br><h2>  Test </h2><br>  Des centaines de bugs ont été enregistrés sur la fonctionnalité.  Les domaines les plus difficiles sont le cryptage, l'interface utilisateur, les problèmes de restauration. <br><br>  Du point de vue des tests, la grande variabilité représentait la «combinatoire» des types et types de jobs de locataires et de référentiels - je veux dire à la fois source et cible lors de la restauration des sauvegardes dans l'infrastructure.  Tout cela est basé sur la logique dans le cadre du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modèle GFS</a> (y compris le nouveau - parallélisme et ensembles de médias quotidiens, plus à ce sujet ci-dessous), et, dans l'ensemble, sur les spécificités du cloud qui sont inhabituelles pour les teips.  N'oubliez pas d'assaisonner avec beaucoup de cryptage.  Pour continuer la métaphore, nous avons mangé beaucoup de ce plat - mais nous l'avons également goûté de tous les côtés. <br><br><img src="https://habrastorage.org/webt/oh/0r/td/oh0rtdrrznov74bycbusv3ehjqo.png"><br>  <sup>Fragment du plan de test</sup> <br><br><h2>  En conséquence </h2><br>  Une description détaillée peut être trouvée dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le manuel d'utilisation</a> (jusqu'à présent en anglais): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sauvegarde</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">restauration</a> .  Je m'attarderai sur les points principaux. <br><br><h3>  Sauvegarde </h3><br>  Le fournisseur ajoute des locataires au travail Teip avec le pool GFS comme cible.  S'il existe une licence cloud dans la deuxième étape de l'assistant, l'option <b>Tenants</b> est disponible.  Vous pouvez ajouter tous les locataires en même temps ou séparément, ou vous pouvez choisir uniquement un quota distinct (mais pas un sous-quota) d'un locataire individuel.  Vous ne pouvez pas mélanger des sauvegardes de locataire et des sauvegardes locales régulières dans le même travail. <br><br><img src="https://habrastorage.org/webt/l-/cq/6n/l-cq6nkc0caco4speq4accpw8kw.png"><br><br>  Le reste des teintures est presque complètement identique au travail habituel dans le pool GFS. <br><br>  La restauration des données est possible à la fois du côté du fournisseur et du côté du locataire lui-même. <br><br><h3>  Récupération côté fournisseur </h3><br>  Réalisé via un nouvel assistant.  Ici, vous pouvez déjà descendre à un travail séparé, toute la chaîne qui était dans le référentiel un certain jour est restaurée. <br><br><img src="https://habrastorage.org/webt/hs/zb/dq/hszbdqv2oy0tnjuiquaoqsocrha.png"><br><br>  Il existe trois options de restauration: <br><br><ol><li>  Dans l'emplacement d'origine.  Dans ce cas, la sauvegarde d'origine, le cas échéant, est supprimée;  les travaux des locataires sont automatiquement reconfigurés dans la chaîne restaurée.  Il est entendu qu'une telle restauration sera généralement invisible pour le client, mais pendant une courte période, elle sera déconnectée du référentiel cloud. </li><li>  Dans un nouveau quota / référentiel.  Un fournisseur peut, par exemple, créer un compte temporaire distinct à cet effet, qu'il supprimera ensuite.  La sauvegarde apparaît dans l'infrastructure du locataire après la synchronisation avec la base de données du fournisseur. </li><li>  Juste sur un lecteur de serveur Linux ou Windows enregistré dans l'infrastructure du fournisseur.  De plus, cette chaîne peut être enregistrée sur une clé USB et envoyée au locataire. </li></ol><br><img src="https://habrastorage.org/webt/sl/wt/ln/slwtlntmc4rklwog0bnawpphmsw.png"><br><br><h3>  Récupération des locataires </h3><br>  Cette option implique que le client dispose de sa propre infrastructure de tip et d'une grande quantité de données pour le restaurant.  Le fournisseur peut envoyer physiquement la bande avec les sauvegardes enregistrées au client par le service de livraison, il la catalogue sur son équipement, déchiffre les bandes et les sauvegardes et travaille avec les sauvegardes comme s'il les avait lui-même écrites sur bande.  Voici un hack de vie pour ne pas télécharger de téraoctets sur WAN. <br><br><h1>  Améliorations à grande échelle du pool GFS </h1><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les</a> pools de médias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GFS</a> sont apparus dans VBR il y a deux ans, dans la version 9.5.  Dans la dernière mise à jour, à la fois en rapport avec l'apparition de la fonction de locataire sur bande et à la demande des utilisateurs, nous avons bien pompé cette fonctionnalité. <br><br><h2>  Ensembles de supports quotidiens </h2><br>  Un nouvel ensemble de médias <b>quotidiens</b> est apparu.  Maintenant, dans le pool GFS, vous pouvez stocker des sauvegardes pour chaque jour, et non seulement complètes, mais également incrémentielles.  Ces derniers prennent beaucoup moins d'espace, ce qui a été fait afin d'économiser de la bande.  Il est entendu que ces cassettes sont constamment tournées dans la bibliothèque, et non transportées vers un stockage à distance.  Dans le même temps, pour un restaurant à partir d'un point incrémentiel, vous aurez besoin des bandes de l'un des ensembles de médias seniors (hebdomadaire, mensuel, trimestriel ou annuel).  Il est impossible d'activer le jeu de supports quotidien sans inclure celui hebdomadaire de sorte que dans la plupart des cas, il faudrait des cassettes hebdomadaires pour restaurer à partir d'une copie incrémentielle.  Ils sont soit toujours dans la bibliothèque, soit stockés dans un entrepôt moins éloigné. <br><br><img src="https://habrastorage.org/webt/hw/89/hb/hw89hbkwt8n5_labggo84mg_jds.png"><br><br>  La logique de travail avec les travaux sur bande dans le pool de médias GFS n'est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pas la plus simple</a> , les rédacteurs techniques ne vous laisseront pas mentir.  Si, en résumé, en omettant les détails, seules les sauvegardes complètes (y compris les sauvegardes complètes virtuelles) sont copiées dans les jeux de médias hebdomadaires et supérieurs, une pour chaque date, et dans la sauvegarde quotidienne toutes les sauvegardes qui se trouvent dans le référentiel pour la journée en cours, car la sauvegarde -Le travail peut commencer plus d'une fois par jour. <br><br><h2>  Accès simultané, heure de début et attente dans les pools GFS </h2><br>  L'enregistrement parallèle de plusieurs chaînes ou le travail sur plusieurs lecteurs de bibliothèque est désormais également possible dans les pools de médias GFS (plus tôt - seulement en ordinaire).  Il est inclus dans l'étape <b>Options</b> du pool de médias. <br><br><img src="https://habrastorage.org/webt/50/al/mh/50almhfbumzpwdqsxy8zzfgur2w.png"><br><br>  <b>Une précision importante</b> : le même fichier est toujours écrit dans le même flux, par conséquent, dans le cas de plusieurs grandes machines virtuelles, il est recommandé d'activer la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">configuration par VM sur le référentiel</a> afin que la sauvegarde se compose de plusieurs chaînes. <br><br>  De plus, il est devenu possible de choisir <b>l'heure de début du travail GFS lui-même</b> .  De nombreux utilisateurs n'aimaient pas commencer à minuit, puis attendre presque toute la journée jusqu'à la fin du travail d'approvisionnement.  Cette heure peut maintenant être réglée, par exemple, en fin de soirée, lorsqu'il y a déjà quelque chose à copier sur la bande.  De plus, à la demande des utilisateurs, nous avons mis dans les paramètres avancés une option qui auparavant ne pouvait être activée qu'à l'aide de la clé de registre.  Il suffit de sélectionner <b>Traiter le point de restauration le plus récent au lieu d'attendre</b> - et ce qui se trouve dans le référentiel au moment du début du travail sur bande (le point d'hier, par exemple) est copié sur la bande, il n'y a pas du tout d'attente. <br><br><img src="https://habrastorage.org/webt/5c/lw/tr/5clwtrg4ea-h_cinvjj4cbcnwb8.png"><br><br><h1>  Travail amélioré avec plusieurs bibliothèques </h1><br>  Il s'agira de la situation lorsque plusieurs bibliothèques sont ajoutées à un pool de médias.  Nous l'avons soutenu auparavant, mais de temps à autre, les clients se sont plaints de comportements pas tout à fait prévisibles. <br><br><h2>  Était </h2><br><img src="https://habrastorage.org/webt/lm/em/zb/lmemzbkxcz0vs8vjamt2u7xt9xu.png"><br><br>  Par exemple, le travail sur bande a commencé, il a fallu deux lecteurs dans la première bibliothèque, mais les paramètres de concurrence lui permettent d'utiliser 4 lecteurs à la fois.  Ce travail doit-il basculer vers la deuxième bibliothèque du pool de médias et l'utiliser également, ou s'agit-il d'un gaspillage de ressources? <br><br>  Un autre cas.  Une option a été sélectionnée pour passer par la condition «il n'y a pas de cassettes disponibles», dans la première bibliothèque, il n'y a qu'une seule cassette, mais toutes les données y sont potentiellement placées.  Cependant, les paramètres vous permettent d'écrire en parallèle sur deux cassettes.  La deuxième bibliothèque doit-elle être impliquée dans ce cas? <br><br>  Nous avons décidé de mettre cette zone en ordre, ce qui permet de personnaliser explicitement le comportement. <br><br><h2>  Est devenu </h2><br><img src="https://habrastorage.org/webt/jq/wc/0d/jqwc0dneyn9cpqpkwoqq6fzyno4.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les bibliothèques du pool de médias</a> sont apparues des rôles - <b>actifs</b> et <b>passifs</b> .  Et le pool de médias lui-même a deux modes: sécurité intégrée ou basculement et mise en <b>parallèle</b> .  Maintenant, selon les exigences, vous pouvez configurer le pool de médias de différentes manières. <br><br><ul><li>  Si vous avez plusieurs bibliothèques homologues et que vous devez paralléliser l'enregistrement en elles, activez le mode d'enregistrement parallèle, pour cela toutes les bibliothèques doivent se voir attribuer des rôles actifs.  Dans ce cas, les nouvelles bandes et lecteurs seront activés immédiatement, dès que le besoin s'en fera sentir, quelle que soit la bibliothèque dans laquelle ils se trouvent.  Il y a toujours une priorité - d'abord, nous allons essayer de trouver des ressources dans la bibliothèque située plus haut dans la liste. </li><li>  S'il y a une bibliothèque principale et un lecteur ancien ou autonome en réserve, activez le mode feylover en plaçant la bibliothèque principale en haut de la liste et en choisissant un rôle passif pour les périphériques de sauvegarde.  Le passage à un tel appareil ne se produira que lorsqu'il est vraiment nécessaire que le travail fonctionne au moins d'une manière ou d'une autre.  Cette situation sera considérée comme anormale, qui fera l'objet d'une notification par mail. </li></ul><br>  Il y a une situation plus compliquée que nous ne prenons pas encore en charge - plusieurs bibliothèques actives avec des bibliothèques passives.  La rétroaction montrera s'il y a un besoin pour de telles configurations et s'il est nécessaire de "terminer" la fonctionnalité à l'avenir.  Pratique standard. <br><br><h1>  Support WORM </h1><br>  <b>WORM</b> - Write Once Read Many - les bandes qui ne peuvent pas être effacées ou écrasées <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">au niveau du fer</a> peuvent uniquement ajouter des données.  Leur utilisation obligatoire est réglementée par les règles de certaines organisations, par exemple celles qui travaillent dans le domaine de la médecine.  Le principal problème avec de telles bandes auparavant était que VBR lors de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">inventaire</a> ou du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">catalogage</a> enregistrait un en-tête qui ne pouvait plus être effacé à l'avenir, et les travaux sur bande tombaient avec une erreur lors d'une telle tentative. <br><br>  Dans 9.5 Update 4, la prise en charge complète de ces bandes est implémentée.  Ajout de pools de médias WORM, réguliers et GFS, où vous ne pouvez mettre que des bandes de ce type. <br><br><img src="https://habrastorage.org/webt/jw/xn/kh/jwxnkhju_i7nadbdv3y2nnuubzg.png"><br><br>  Les nouvelles cassettes ont une icône bleue «gelée».  Du point de vue de l'utilisateur, travailler avec des cassettes WORM n'est pas différent de travailler avec des cassettes ordinaires. <br><br>  L '«alimentation» des cassettes est initialement déterminée par le suffixe du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">barres</a> , si le code-barres qu'elles contiennent est régulier ou illisible, le lecteur fournit des informations lors de la première insertion de la cartouche.  Placez les bandes WORM dans un pool de médias régulier et leur écrire ne fonctionnera pas.  Du drôle: il y avait déjà des utilisateurs qui avaient collé des codes-barres WORM sur des cassettes ordinaires et étaient surpris des changements dans leur infrastructure après la mise à jour. <br><br><h2>  Puce de cartouche </h2><br>  Parallèlement à l'introduction de cassettes non réinscriptibles, ils ont commencé à travailler avec la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">puce</a> .  Nous n'avions pas utilisé d'attributs standard dans la puce auparavant, maintenant nous écrivons et lisons certains d'entre eux, mais nous ne les percevons pas comme la principale source de données.  La principale ligne directrice est toujours le titre de la cassette.  Cette décision s'est avérée correcte: un mois après la sortie, nous voyons comment le «zoo» du fer de l'utilisateur apporte des surprises en termes de travail avec la puce. <br><br><h1>  Sauvegarde sur bande des volumes NDMP </h1><br>  En conclusion, sur la fonctionnalité la plus demandée par le nombre d'avis de cette mise à jour.  La sauvegarde des volumes NDMP sur bandes est devenue disponible.  Il est nécessaire d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ajouter un serveur NDMP à l'</a> infrastructure VBR, après quoi il deviendra possible de sélectionner des volumes de cet hôte dans le travail de fichier teip.  Ils tombent sur la cassette sous forme de fichiers avec un attribut spécial pour les distinguer du catalogage habituel. <br><br><img src="https://habrastorage.org/webt/de/_q/wn/de_qwns8hgdyko372yoji6jhamq.png"><br><br>  Dans la première implémentation, il existe certaines limitations: les extensions ne sont pas prises en charge, plus la sauvegarde et la restauration du volume complet, mais pas des fichiers individuels, sont possibles.  La sauvegarde fonctionne via le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vidage</a> (dans le cas de NetApp - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ufsdump</a> ), il y a quelques particularités: le nombre maximum de points incrémentiels est de 9, après quoi une sauvegarde complète est forcée. <br><br><h1>  En conclusion </h1><br>               VBR 9.5 Update 4.    : <br><br><ul><li>    -    -; </li><li>   Tape Operator (   ,     –    Restore Operator); </li><li>   include/exclude-   - ( NDMP); </li><li>     - (    ,      ,    ,     -      –   , ); </li><li>         ; </li><li>       ,  ,      /     ,   ; </li><li>   . </li></ul><br><h1>  Liens utiles </h1><br>         : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">      VBR 9.5 Update 4</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   «     Veeam   »</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   «7        -»</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  ,    ( .)</a> </li><li>         «  » (,    ) –   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> .      95 – 102. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr443716/">https://habr.com/ru/post/fr443716/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr443702/index.html">Comment déléguer des rapports simples au robot. Écrire un bot en Python et Google BigQuery</a></li>
<li><a href="../fr443704/index.html">Selon les résultats de l'introduction en bourse de 2019, 5 mille nouveaux millionnaires pourraient apparaître dans la Silicon Valley</a></li>
<li><a href="../fr443708/index.html">La mission Chang'e 4 est le troisième jour lunaire. Rover "Yutu-2" à la recherche de ... pierres</a></li>
<li><a href="../fr443710/index.html">Java Challengers # 4: Comparaison d'objets avec equals () et hashCode ()</a></li>
<li><a href="../fr443714/index.html">ControlValueAccessor et contenteditable dans Angular</a></li>
<li><a href="../fr443718/index.html">Jeu fantastique avec 300 mille courses</a></li>
<li><a href="../fr443720/index.html">Détails</a></li>
<li><a href="../fr443722/index.html">Conception et dénomination des files d'attente</a></li>
<li><a href="../fr443724/index.html">AMD Radeon VII: puce haut de gamme (partie 1)</a></li>
<li><a href="../fr443726/index.html">Caractéristiques de configuration de Palo Alto Networks: VPN SSL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>