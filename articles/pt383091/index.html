<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÆ ‚ú≥Ô∏è ü•ï Rel√≥gio eletr√¥nico caseiro, base de elementos - parte 1, medi√ß√£o de tempo üë¢ ‚èÆÔ∏è ü•ã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Provavelmente, todo nerd que gosta de eletr√¥nicos caseiros, mais cedo ou mais tarde chega √† ideia de criar seu pr√≥prio rel√≥gio. A id√©ia √© muito boa, v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rel√≥gio eletr√¥nico caseiro, base de elementos - parte 1, medi√ß√£o de tempo</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/383091/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Provavelmente, todo nerd que gosta de eletr√¥nicos caseiros, mais cedo ou mais tarde chega √† ideia de criar seu pr√≥prio rel√≥gio. </font><font style="vertical-align: inherit;">A id√©ia √© muito boa, vamos descobrir como e sobre o que √© melhor faz√™-las. </font><font style="vertical-align: inherit;">Como ponto de partida, assumimos que uma pessoa sabe como programar microcontroladores, entende como enviar 2 bytes via i2c ou porta serial e pode soldar v√°rios fios juntos. </font><font style="vertical-align: inherit;">Em princ√≠pio, isso √© suficiente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â claro que a fun√ß√£o principal de um rel√≥gio √© medir o tempo (quem teria pensado, sim?). </font><font style="vertical-align: inherit;">E √© desej√°vel fazer isso com a maior precis√£o poss√≠vel, existem v√°rias op√ß√µes e armadilhas.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, que m√©todos de medir o tempo dispon√≠vel no hardware podemos usar?</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gerador RC incorporado</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A id√©ia mais simples que pode surgir √© simplesmente configurar um cron√¥metro de software e contar os segundos. </font><font style="vertical-align: inherit;">Ent√£o, essa ideia n√£o √© boa. </font><font style="vertical-align: inherit;">O rel√≥gio certamente funcionar√°, mas a precis√£o do gerador embutido n√£o √© regulada de forma alguma e pode "flutuar" dentro de 10% do valor nominal. </font><font style="vertical-align: inherit;">√â improv√°vel que algu√©m precise de horas que desaparecem por m√™s por 15 minutos.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dulo em tempo real DS1307</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma op√ß√£o mais correta, que tamb√©m √© usada na maioria dos produtos "folcl√≥ricos", √© um rel√≥gio em tempo real. O chip √© trocado com o microcontrolador via I2C, requer um m√≠nimo de liga√ß√£o (quartzo e um par de resistores). O pre√ßo de emiss√£o √© de cerca de 100 rublos por microcircuito, ou cerca de US $ 1 por ebee para uma placa acabada com um microcircuito, um m√≥dulo de mem√≥ria e um conector de bateria. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esquema da ficha t√©cnica: </font></font><br>
<br>
<img src="https://habrastorage.org/files/ac0/5f3/3d1/ac05f33d158d4613aef472a1523735b8.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Igualmente importante, o chip est√° dispon√≠vel em um pacote DIP, para que qualquer iniciante possa sold√°-lo. A bateria interna mant√©m o rel√≥gio funcionando mesmo que a energia tenha sido desligada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que est√° tudo bem, se n√£o por um problema - baixa precis√£o. A precis√£o aproximada do rel√≥gio de quartzo √© 20-30ppm. A designa√ß√£o ppm - partes por milh√£o mostra o n√∫mero de partes por milh√£o. Parece que 20 milion√©simos √© super, mas para uma frequ√™ncia de 32768Hz, ocorre 20 * 32768 / 1.000.000 = ¬± 0,65536Hz, ou seja, j√° meio hertz. Por c√°lculos simples, pode-se ver que o gerador com essa diferen√ßa por dia ‚Äúadere‚Äù aos 56 mil ciclos extras (ou ausentes), o que corresponde a 2 segundos por dia. O quartzo pode ser diferente, alguns usu√°rios escreveram sobre um erro de 5 segundos por dia. De alguma forma, n√£o √© muito preciso - em um m√™s esse rel√≥gio desaparecer√° por pelo menos um minuto. Essa j√° √© uma diferen√ßa decente, percept√≠vel a olho nu (quando a s√©rie favorita da av√≥ come√ßar √†s 11h00 e o rel√≥gio mostrar 11,05, o desenvolvedor de um rel√≥gio assim na frente de parentes ficar√° desconfort√°vel).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, como a temperatura na sala √© mais ou menos est√°vel e a frequ√™ncia do quartzo n√£o muda muito, voc√™ pode adicionar a corre√ß√£o do software. </font><font style="vertical-align: inherit;">Outro conselho dado nos f√≥runs √© usar um rel√≥gio de quartzo de placas-m√£e antigas; de acordo com as avalia√ß√µes, elas s√£o bastante precisas.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dulo em tempo real DS3231</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o somos os primeiros a fazer a pergunta da precis√£o, e Dallas, atendendo aos nossos desejos, lan√ßou um m√≥dulo mais avan√ßado - o DS3231. </font><font style="vertical-align: inherit;">√â chamado de "Rel√≥gio de tempo real extremamente preciso", possui um gerador embutido com corre√ß√£o de temperatura. </font><font style="vertical-align: inherit;">A precis√£o √© 10 vezes maior e √© 2ppm. </font><font style="vertical-align: inherit;">O pre√ßo de emiss√£o √© um pouco mais alto, mas a caixa do microcircuito foi projetada para montagem em SMD, a soldagem n√£o √© t√£o conveniente, mas voc√™ pode comprar uma placa pronta. </font></font><br>
<br>
<img src="https://habrastorage.org/files/cbd/4a0/9f3/cbd4a09f3207443b98af2efe90f8a70f.png"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(foto do site do vendedor)</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Precis√£o de 6 segundos por m√™s, esse j√° √© um bom resultado. </font><font style="vertical-align: inherit;">Mas vamos al√©m - idealmente, o rel√≥gio do s√©culo 21 n√£o precisa ser ajustado.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dulo de r√°dio DCF-77</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O m√©todo √© bastante ex√≥tico, mas por ser completo, n√£o pode ser ignorado. Poucas pessoas sabem, mas os sinais de tempo exato s√£o transmitidos pelo r√°dio desde os anos 70. O transmissor DCF-77 est√° localizado na Alemanha, perto de Frankfurt, e na frequ√™ncia SDV de 77,5 KHz, os carimbos de hora s√£o transmitidos (sim, eles j√° tinham um rel√≥gio de parede e de mesa h√° 20 anos que n√£o precisavam ser ajustados). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O m√©todo √© bom, pois o circuito tem baixo consumo de energia; portanto, at√© rel√≥gios de pulso com essa tecnologia est√£o sendo produzidos. O painel de admiss√£o terminado DCF-77 pode ser comprado no ebay, o pre√ßo √© de US $ 20. </font></font><br>
<br>
<img src="https://habrastorage.org/files/8cc/6d3/4ff/8cc6d34ff19c487f9a625229ab10c743.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muitos rel√≥gios e esta√ß√µes meteorol√≥gicas t√™m a capacidade de receber o DCF-77, o √∫nico problema √© que o sinal praticamente n√£o chega √† R√∫ssia. Mapa de cobertura da Wikipedia:</font></font><br>
<br>
<img src="https://habrastorage.org/files/a50/07e/855/a5007e855a5f4372813876e0957e1166.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ pode ver, apenas Moscou e S√£o Petersburgo est√£o na fronteira da √°rea de recep√ß√£o. </font><font style="vertical-align: inherit;">Segundo os propriet√°rios, apenas ocasionalmente um sinal pode ser recebido, o que obviamente n√£o √© adequado para uso pr√°tico.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dulo GPS</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o rel√≥gio n√£o estiver longe da janela, um m√©todo muito real de obter uma hora precisa √© um m√≥dulo GPS. </font><font style="vertical-align: inherit;">Esses m√≥dulos podem ser comprados de maneira barata no ebay (pre√ßo de emiss√£o de US $ 10 a 15). </font><font style="vertical-align: inherit;">Por exemplo, o Ublox NEO-6M se conecta diretamente aos pinos seriais do processador e gera seq√º√™ncias NMEA a uma velocidade de 9600. Os </font></font><br>
<br>
<img src="https://habrastorage.org/files/5ec/69a/d22/5ec69ad22d3d4502bab18741c91eac85.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dados s√£o fornecidos aproximadamente neste formato "$ GPRMC, 040302.663, A, 3939.7, N, 10506.6, W, 0,27,358.86,200804 ,, * 1A ", e n√£o √© dif√≠cil analis√°-los, mesmo para um Arduino fraco. </font><font style="vertical-align: inherit;">Os patriotas, a prop√≥sito, podem comprar o m√≥dulo Ublox NEO-7N mais caro, que suporta (de acordo com as avalia√ß√µes) GPS e Glonass.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, o m√≥dulo GPS n√£o sabe nada sobre fusos hor√°rios diferentes; portanto, o desenvolvedor precisar√° pensar por si mesmo para calcul√°-los e alterar o hor√°rio de ver√£o / inverno. </font><font style="vertical-align: inherit;">Outra desvantagem do uso do GPS √© o seu consumo de energia relativamente alto (no entanto, alguns m√≥dulos podem ser colocados no "modo de suspens√£o" com comandos separados).</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wi-fi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E finalmente, a √∫ltima (e mais √≥bvia no momento) maneira de obter a hora exata √© tir√°-la da Internet. Existem duas abordagens. O primeiro e mais simples √© usar algo como um PI de framboesa com o Linux como placa do rel√≥gio, para que voc√™ n√£o precise fazer nada, tudo funcionar√° imediatamente. Se voc√™ quer "ex√≥tico" - a op√ß√£o mais interessante √© o m√≥dulo esp8266. </font></font><br>
<br>
<img src="https://habrastorage.org/files/208/799/b53/208799b53e7c467598787efd497319e7.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso √© barato (o pre√ßo √© de cerca de 200 r por ebay). O m√≥dulo WiFi pode ser trocado com o servidor atrav√©s da porta serial do processador, se voc√™ desejar, tamb√©m pode ser atualizado (h√° muito firmware de terceiros) e parte da l√≥gica (por exemplo, pesquisar o servidor de hor√°rio) pode ser feita no pr√≥prio m√≥dulo. O firmware de terceiros suporta um monte de tudo, de Lua a C ++, portanto, as op√ß√µes para "esticar seu c√©rebro" s√£o suficientes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse t√≥pico, as medi√ß√µes de tempo provavelmente podem ser fechadas. </font><font style="vertical-align: inherit;">Na pr√≥xima parte, examinaremos mais de perto os processadores e m√©todos para gerar tempo.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt383091/">https://habr.com/ru/post/pt383091/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt383077/index.html">Guerras da informa√ß√£o enfurecem-se em artigos controversos da Wikipedia</a></li>
<li><a href="../pt383081/index.html">Mangalyaan enviou imagens detalhadas da superf√≠cie de Marte</a></li>
<li><a href="../pt383083/index.html">Google come√ßou a promover o Android One na √Åfrica</a></li>
<li><a href="../pt383085/index.html">Espa√ßo em movimento (tr√°fego cuidadoso)</a></li>
<li><a href="../pt383089/index.html">An√°lise do port√°til para jogos ASUS G751JY</a></li>
<li><a href="../pt383093/index.html">O Google apresentou sua vers√£o do roteador dom√©stico OnHub por US $ 200</a></li>
<li><a href="../pt383095/index.html">"Diamantes do c√©u." Qu√≠micos obt√™m nanofibras de carbono do ar (de CO2)</a></li>
<li><a href="../pt383097/index.html">Windows 10 Insider Preview 10525 mata o Google Chrome</a></li>
<li><a href="../pt383099/index.html">O futuro da BMW: √°gua do cilindro e um torpedo na cabine</a></li>
<li><a href="../pt383101/index.html">A BioLite oferece uma fonte de eletricidade ecol√≥gica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>