<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüíª üñäÔ∏è üèîÔ∏è Mrr: FRP total para reaccionar üíÄ üë©‚Äçüë©‚Äçüëß üëÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mrr es una biblioteca funcional-reactiva para React (pido disculpas por la tautolog√≠a imaginaria). 

 La palabra "reactividad" generalmente se refiere...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mrr: FRP total para reaccionar</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428870/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mrr</a> es una biblioteca funcional-reactiva para React (pido disculpas por la tautolog√≠a imaginaria). <br><br>  La palabra "reactividad" generalmente se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">refiere a Rx.js</a> como una referencia FRP.  Sin embargo, una serie de art√≠culos recientes sobre este tema en Habr√© ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[1]</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[2]</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[3]</a> ) mostraron la complejidad de las soluciones en Rx, que en ejemplos simples perdieron en claridad y simplicidad a casi cualquier otro enfoque.  Rx es grande y poderoso, y es perfecto para resolver problemas en los que se sugiere la abstracci√≥n del flujo (en la pr√°ctica, esto es principalmente la coordinaci√≥n de tareas asincr√≥nicas).  ¬øPero escribir√≠a, por ejemplo, una validaci√≥n de forma s√≠ncrona simple en Rx?  ¬øLe ahorrar√≠a tiempo en comparaci√≥n con los enfoques imperativos habituales? <br><br>  mrr es un intento de probar que FRF puede ser una soluci√≥n conveniente y efectiva no solo en problemas espec√≠ficos de "transmisi√≥n", sino tambi√©n en las tareas de front-end de rutina m√°s comunes. <br><a name="habracut"></a><br>  La programaci√≥n reactiva es una abstracci√≥n muy poderosa, en este momento en la interfaz est√° presente de dos maneras: <br><br><ul><li>  variables reactivas (variables calculadas): simples, confiables, intuitivas, pero el potencial del RP est√° lejos de ser completamente revelado </li><li>  bibliotecas para trabajar con flujos, como Rx, Bacon, etc .: potente, pero bastante complicado, el alcance del uso pr√°ctico se limita a tareas espec√≠ficas. </li></ul><br>  Mrr combina las ventajas de estos enfoques.  A diferencia de Rx.js, mrr tiene una API corta, que el usuario puede ampliar con sus adiciones.  En lugar de docenas de m√©todos y operadores: cuatro operadores b√°sicos, en lugar de Observable (caliente y fr√≠o), Asunto, etc.  - una abstracci√≥n: corriente.  Adem√°s, mrr carece de algunos conceptos complejos que pueden complicar significativamente la legibilidad del c√≥digo, por ejemplo, metastreams. <br><br>  Sin embargo, mrr no es un "Rx simplificado de una nueva manera".  Basado en los mismos principios b√°sicos que Rx, mrr afirma ser un nicho m√°s grande: administrar el estado global y local (a nivel de componente) de la aplicaci√≥n.  Aunque el concepto original de programaci√≥n reactiva estaba destinado a trabajar con tareas asincr√≥nicas, mrr ha utilizado con √©xito enfoques de reactividad para tareas sincr√≥nicas ordinarias.  Este es el principio de "FRP total". <br><br>  A menudo, al crear una aplicaci√≥n en React, se utilizan varias tecnolog√≠as diferentes: recomponer (o pronto - ganchos) para el estado del componente, Redux / mobx para el estado global, Rx con redux-observable (o thunk / saga) para gestionar los efectos secundarios y coordinar asincr√≥nico tareas en el editor.  En lugar de tal "ensalada" de diferentes enfoques y tecnolog√≠as dentro de la misma aplicaci√≥n, con mrr puede usar una sola tecnolog√≠a y paradigma. <br><br>  La interfaz mrr tambi√©n es significativamente diferente de Rx y bibliotecas similares: es m√°s declarativa.  Gracias a la abstracci√≥n de reactividad y al enfoque declarativo, mrr le permite escribir c√≥digo expresivo y conciso.  Por ejemplo, el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">est√°ndar TodoMVC</a> en mrr toma menos de 50 l√≠neas de c√≥digo (sin contar la plantilla JSX). <br><br>  Pero suficiente publicidad.  ¬øSe las arregl√≥ para combinar las ventajas del RP "ligero" y "pesado" en una botella? Debe juzgar, pero primero, lea los ejemplos de c√≥digo. <br><br>  TodoMVC ya est√° bastante dolorido, y el ejemplo de descargar datos sobre usuarios de Github es demasiado primitivo para poder sentir las caracter√≠sticas de la biblioteca en √©l.  Consideraremos a mrr como un ejemplo de una aplicaci√≥n condicional para comprar boletos de tren.  En nuestra interfaz de usuario habr√° campos para elegir las estaciones de inicio y finalizaci√≥n, fechas.  Luego, despu√©s de enviar los datos, se devolver√° una lista de trenes disponibles y lugares en ellos.  Despu√©s de seleccionar un tren y un tipo de autom√≥vil espec√≠ficos, el usuario ingresar√° los datos del pasajero y luego agregar√° los boletos a la cesta.  Vamos <br><br>  Necesitamos un formulario con una selecci√≥n de estaciones y fechas: <br><br><img src="https://habrastorage.org/webt/sm/he/aj/smheajucvbemykx4g-fvvqeygrc.gif"><br><br>  Crear campos de autocompletado para ingresar estaciones. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { withMrr } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mrr'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> stations = [ <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>, ... ] <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ <span class="hljs-comment"><span class="hljs-comment">//    $init: { stationFromOptions: [], stationFromInput: '', }, //   - "" stationFromOptions: [str =&gt; stations.filter(s =&gt; s.indexOf(str)===0), 'stationFromInput'], }, (state, props, $) =&gt; { return (&lt;div&gt; &lt;h3&gt;    &lt;/h3&gt; &lt;div&gt;  : &lt;input onChange={ $('stationFromInput') } /&gt; &lt;/div&gt; &lt;ul className="stationFromOptions"&gt; { state.stationFromOptions.map(s =&gt; &lt;li&gt;{ s }&lt;/li&gt;) } &lt;/ul&gt; &lt;/div&gt;); }); export default Tickets;</span></span></code> </pre> <br>  Los componentes MRR se crean utilizando la funci√≥n withMrr, que acepta un diagrama de enlace reactivo (descripci√≥n de flujos) y una funci√≥n de representaci√≥n.  Las funciones de procesamiento se pasan a los accesorios del componente, as√≠ como al estado, que ahora est√° completamente controlado por mrr.  Contendr√° el inicial (bloque $ init) y se calcular√° por los valores de la f√≥rmula de las celdas reactivas. <br><br>  Ahora tenemos dos celdas (o dos flujos, que es lo mismo): <b>stationFromInput</b> , los valores a los que recaen desde la entrada del usuario usando <b>$</b> helper (pasando <b>event.target.value</b> por defecto para los elementos de entrada de datos), y una celda derivada de √©l <b>stationFromOptions</b> , que contiene una matriz de estaciones coincidentes por nombre. <br><br>  El valor de <b>stationFromOptions se</b> calcula autom√°ticamente cada vez que se cambia una celda principal utilizando una funci√≥n (en la terminolog√≠a de MRR llamada " <i>f√≥rmula</i> ", por analog√≠a con las f√≥rmulas de Excel).  La sintaxis de las expresiones mrr es simple: en primer lugar est√° la funci√≥n (u operador), que se usa para calcular el valor de la celda, luego hay una lista de celdas de las que depende esta celda: sus valores se pasan a la funci√≥n.  Una sintaxis tan extra√±a, a primera vista, tiene muchas ventajas, que consideraremos m√°s adelante.  Hasta ahora, la l√≥gica de MRR aqu√≠ se asemeja al enfoque habitual con variables computables utilizadas en Vue, Svelte y otras bibliotecas, con la √∫nica diferencia de que puede utilizar funciones puras. <br><br>  Implementamos la sustituci√≥n de la estaci√≥n seleccionada de la lista en el campo de entrada.  Tambi√©n es necesario ocultar la lista de estaciones despu√©s de que el usuario haga clic en una de ellas. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { <span class="hljs-attr"><span class="hljs-attr">stationFromOptions</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">stationFromInput</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">stationFromOptions</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function"> =&gt;</span></span> stations.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">s</span></span></span><span class="hljs-function"> =&gt;</span></span> str.indexOf(a) === <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>], <span class="hljs-attr"><span class="hljs-attr">stationFrom</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectStationFrom'</span></span>], <span class="hljs-attr"><span class="hljs-attr">optionsShown</span></span>: [<span class="hljs-string"><span class="hljs-string">'toggle'</span></span>, <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectStationFrom'</span></span>], }, (state, props, $) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">  : </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">stationFromInput</span></span></span></span><span class="xml"><span class="hljs-tag">') } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">state.stationFrom</span></span></span></span><span class="xml"><span class="hljs-tag"> }/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { state.optionsShown &amp;&amp; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"stationFromOptions"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { state.stationFromOptions.map(s =&gt; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">selectStationFrom</span></span></span></span><span class="xml"><span class="hljs-tag">', </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">s</span></span></span></span><span class="xml"><span class="hljs-tag">) }&gt;</span></span></span><span class="xml">{ s }</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">) } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">); });</span></span></code> </pre><br>  Un controlador de eventos creado usando $ helper en la lista de estaciones emitir√° valores fijos para cada opci√≥n. <br><br>  MRR es consistente en su enfoque declarativo, ajeno a cualquier mutaci√≥n.  Despu√©s de seleccionar una estaci√≥n, no podemos "forzar" el cambio del valor de la celda.  En su lugar, creamos una nueva celda <b>stationFrom</b> , que, utilizando el operador merge stream <b>merge</b> (un equivalente aproximado en Rx es combineLatest), recopilar√° los valores de dos flujos: entrada del usuario ( <b>stationFromInput</b> ) y selecci√≥n de estaci√≥n ( <b>selectStationFrom</b> ). <br><br>  Debemos mostrar la lista de opciones despu√©s de que el usuario ingrese algo, y ocultarnos despu√©s de haber seleccionado una de las opciones.  La celda <b>optionsShown</b> ser√° responsable de la visibilidad de la lista de opciones, que tomar√° valores booleanos dependiendo de los cambios en otras celdas.  Este es un patr√≥n muy com√∫n para el que existe el az√∫car sint√°ctico: el operador de <b>alternancia</b> .  Establece el valor de la celda en <i>verdadero</i> en cualquier cambio del primer argumento (secuencia), y en <i>falso</i> , el segundo. <br><br>  Agregue un bot√≥n para borrar el texto ingresado. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { <span class="hljs-attr"><span class="hljs-attr">stationFromOptions</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">stationFromInput</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">stationFromOptions</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function"> =&gt;</span></span> stations.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">s</span></span></span><span class="hljs-function"> =&gt;</span></span> str.indexOf(a) === <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>], <span class="hljs-attr"><span class="hljs-attr">clearVal</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'clear'</span></span>], <span class="hljs-attr"><span class="hljs-attr">stationFrom</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectStationFrom'</span></span>, <span class="hljs-string"><span class="hljs-string">'clearVal'</span></span>], <span class="hljs-attr"><span class="hljs-attr">optionsShown</span></span>: [<span class="hljs-string"><span class="hljs-string">'toggle'</span></span>, <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectStationFrom'</span></span>], }, (state, props, $) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">  : </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">stationFromInput</span></span></span></span><span class="xml"><span class="hljs-tag">') } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">state.stationFrom</span></span></span></span><span class="xml"><span class="hljs-tag"> }/&gt;</span></span></span><span class="xml"> { state.stationFrom &amp;&amp; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">clear</span></span></span></span><span class="xml"><span class="hljs-tag">') }&gt;</span></span></span><span class="xml"></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { state.optionsShown &amp;&amp; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"stationFromOptions"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { state.stationFromOptions.map(s =&gt; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">selectStationFrom</span></span></span></span><span class="xml"><span class="hljs-tag">', </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">s</span></span></span></span><span class="xml"><span class="hljs-tag">) }&gt;</span></span></span><span class="xml">{ s }</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">) } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">); });</span></span></code> </pre><br>  Ahora, nuestra celda <b>stationFrom</b> , que es responsable del contenido del texto en el campo de entrada, recopila sus valores no de dos, sino de tres flujos.  Este c√≥digo puede ser simplificado.  La construcci√≥n mrr de la forma [* f√≥rmula *, * ... argumentos de celda *] es similar a las expresiones S en Lisp, y como en Lisp, puede anidar arbitrariamente tales construcciones entre s√≠. <br><br>  Eliminemos la in√∫til celda clearVal y acortemos el c√≥digo: <br><br><pre> <code class="javascript hljs"> stationFrom: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectStationFrom'</span></span>, [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'clear'</span></span>]],</code> </pre><br>  Los programas escritos en un estilo imperativo se pueden comparar con un equipo mal organizado, donde todos constantemente se ordenan algo entre s√≠ (insin√∫o las llamadas a m√©todos y los cambios mutantes), adem√°s, ambos gerentes son subordinados y viceversa.  Los programas declarativos son similares a la imagen ut√≥pica opuesta: un colectivo donde todos saben claramente c√≥mo debe actuar en cualquier situaci√≥n.  No hay necesidad de √≥rdenes en dicho equipo; todos est√°n en sus lugares y trabajando en respuesta a lo que est√° sucediendo. <br><br>  En lugar de describir todas las posibles consecuencias de un evento (l√©ase, para hacer ciertas mutaciones), describimos todos los casos en los que este evento puede ocurrir, es decir.  qu√© valor tomar√° la celda ante cualquier cambio en otras celdas.  En nuestro peque√±o ejemplo hasta ahora, hemos descrito la celda stationFrom y tres situaciones que afectan su valor.  Para un programador acostumbrado al c√≥digo imperativo, este enfoque puede parecer inusual (o incluso una "muleta", una "perversi√≥n").  De hecho, le permite ahorrar esfuerzo debido a la brevedad (y estabilidad) del c√≥digo, como veremos en la pr√°ctica. <br><br>  ¬øQu√© pasa con la asincron√≠a?  ¬øEs posible extraer la lista de estaciones propuestas con ajax?  No hay problema!  En esencia, para mrr no importa si la funci√≥n devuelve un valor o una promesa.  Cuando se devuelve mrr, esperar√° su resoluci√≥n y "empujar√°" los datos recibidos en la secuencia. <br><br><pre> <code class="javascript hljs">stationFromOptions: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function"> =&gt;</span></span> fetch(<span class="hljs-string"><span class="hljs-string">'/get_stations?str='</span></span> + str).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.toJSON()), <span class="hljs-string"><span class="hljs-string">'stationFromInput'</span></span>],</code> </pre><br>  Tambi√©n significa que puede usar funciones asincr√≥nicas como f√≥rmulas.  M√°s adelante se considerar√°n casos m√°s complejos (manejo de errores, estado de promesa). <br><br>  La funcionalidad para elegir una estaci√≥n de salida est√° lista.  No tiene sentido duplicar lo mismo para la estaci√≥n de llegada, vale la pena ponerlo en un componente separado que pueda reutilizarse.  Este ser√° un componente de entrada generalizado con autocompletado, por lo que cambiaremos el nombre de los campos y crearemos la funci√≥n para obtener las opciones adecuadas establecidas en accesorios. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> OptionsInput = withMrr(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { <span class="hljs-attr"><span class="hljs-attr">options</span></span>: [], }, <span class="hljs-attr"><span class="hljs-attr">val</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, <span class="hljs-string"><span class="hljs-string">'valInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectOption'</span></span>, [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'clear'</span></span>]], <span class="hljs-attr"><span class="hljs-attr">options</span></span>: [props.getOptions, <span class="hljs-string"><span class="hljs-string">'val'</span></span>], <span class="hljs-attr"><span class="hljs-attr">optionsShown</span></span>: [<span class="hljs-string"><span class="hljs-string">'toggle'</span></span>, <span class="hljs-string"><span class="hljs-string">'valInput'</span></span>, <span class="hljs-string"><span class="hljs-string">'selectOption'</span></span>], }), (state, props, $) =&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">valInput</span></span></span></span><span class="xml"><span class="hljs-tag">') } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">state.val</span></span></span></span><span class="xml"><span class="hljs-tag"> } /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { state.optionsShown &amp;&amp; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"options"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> { state.options.map(s =&gt; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">selectOption</span></span></span></span><span class="xml"><span class="hljs-tag">', </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">s</span></span></span></span><span class="xml"><span class="hljs-tag">) }&gt;</span></span></span><span class="xml">{ s }</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">) } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } { state.val &amp;&amp; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"clear"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">clear</span></span></span></span><span class="xml"><span class="hljs-tag">') }&gt;</span></span></span><span class="xml"> X </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">)</span></span></code> </pre><br>  Como puede ver, puede especificar la estructura de las celdas mrr en funci√≥n del componente de accesorios (sin embargo, se ejecutar√° solo una vez, luego de la inicializaci√≥n, y no responder√° a los cambios en los accesorios). <br><br><h3>  Comunicaci√≥n entre componentes. </h3><br>  Ahora conecte este componente en el componente principal y vea c√≥mo mrr permite que los componentes relacionados intercambien datos. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getMatchedStations = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function"> =&gt;</span></span> fetch(<span class="hljs-string"><span class="hljs-string">'/get_stations?str='</span></span> + str).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.toJSON()); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ <span class="hljs-attr"><span class="hljs-attr">stationTo</span></span>: <span class="hljs-string"><span class="hljs-string">'selectStationFrom/val'</span></span>, <span class="hljs-attr"><span class="hljs-attr">stationFrom</span></span>: <span class="hljs-string"><span class="hljs-string">'selectStationTo/val'</span></span>, }, (state, props, $, connectAs) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (&lt;div&gt; &lt;OptionsInput { ...connectAs('selectStationFrom') } getOptions={ getMatchedStations } /&gt; - &lt;OptionsInput { ...connectAs('selectStationTo') } getOptions={ getMatchedStations } /&gt; &lt;input type="date" onChange={ $('date') } /&gt; &lt;button onClick={ $('searchTrains') }&gt;&lt;/button&gt; &lt;/div&gt;); });</code> </pre><br>  Para asociar un componente primario con un componente secundario, debemos pasarle par√°metros mediante la funci√≥n <b>connectAs</b> (cuarto argumento de la funci√≥n de representaci√≥n).  En este caso, indicamos el nombre que queremos darle al componente hijo.  Al adjuntar un componente de esta manera, con este nombre podemos acceder a sus celdas.  En este caso, estamos escuchando c√©lulas val.  Tambi√©n es posible lo contrario: escuche desde el componente secundario de la celda principal. <br><br>  Como puede ver, mrr sigue un enfoque declarativo: no se necesitan devoluciones de llamada onChange, solo necesitamos especificar un nombre para el componente hijo en la funci√≥n connectAs, ¬°despu√©s de lo cual tenemos acceso a sus celdas!  En este caso, nuevamente debido a la declaratividad, no hay amenaza de interferencia en el trabajo de otro componente: no tenemos la capacidad de "cambiar" nada en √©l, mutar, solo podemos "escuchar" los datos. <br><br><h3>  Se√±ales y valores </h3><br>  La siguiente etapa es la b√∫squeda de trenes adecuados para los par√°metros seleccionados.  En el enfoque imperativo, probablemente escribir√≠amos un determinado procesador para enviar el formulario onSubmit, que iniciar√≠a otras acciones: una solicitud ajax y la visualizaci√≥n de los resultados.  Pero, como recordar√°, ¬°no podemos "ordenar" nada!  Solo podemos crear otro conjunto de celdas derivadas de las celdas del formulario.  Escribamos una solicitud m√°s. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getTrains = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params">, to, date</span></span></span><span class="hljs-function">) =&gt;</span></span> fetch(<span class="hljs-string"><span class="hljs-string">'/get_trains?from='</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> + <span class="hljs-string"><span class="hljs-string">'&amp;to='</span></span> + to + <span class="hljs-string"><span class="hljs-string">'&amp;date='</span></span> + date).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.toJSON()); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ <span class="hljs-attr"><span class="hljs-attr">stationFrom</span></span>: <span class="hljs-string"><span class="hljs-string">'selectStationFrom/val'</span></span>, <span class="hljs-attr"><span class="hljs-attr">stationTo</span></span>: <span class="hljs-string"><span class="hljs-string">'selectStationTo/val'</span></span>, <span class="hljs-attr"><span class="hljs-attr">results</span></span>: [getTrains, <span class="hljs-string"><span class="hljs-string">'stationFrom'</span></span>, <span class="hljs-string"><span class="hljs-string">'stationTo'</span></span>, <span class="hljs-string"><span class="hljs-string">'date'</span></span>, <span class="hljs-string"><span class="hljs-string">'searchTrains'</span></span>], }, (state, props, $, connectAs) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (&lt;div&gt; &lt;OptionsInput { ...connectAs('selectStationFrom') } getOptions={ getMatchedStations } /&gt; - &lt;OptionsInput { ...connectAs('selectStationTo') } getOptions={ getMatchedStations } /&gt; &lt;input type="date" onChange={ $('date') } /&gt; &lt;button onClick={ $('searchTrains') }&gt;&lt;/button&gt; &lt;/div&gt;); });</code> </pre><br>  Sin embargo, dicho c√≥digo no funcionar√° como se esperaba.  El c√°lculo (rec√°lculo del valor de la celda) se inicia cuando cambia cualquiera de los argumentos, por lo que la solicitud se enviar√°, por ejemplo, inmediatamente despu√©s de seleccionar la primera estaci√≥n, y no simplemente haciendo clic en "Buscar".  Necesitamos, por un lado, que las estaciones y la fecha se pasen a los argumentos de la f√≥rmula, pero por otro lado, no respondan a su cambio.  En mrr hay un mecanismo elegante para esto llamado escucha pasiva. <br><br><pre> <code class="javascript hljs"> results: [getTrains, <span class="hljs-string"><span class="hljs-string">'-stationFrom'</span></span>, <span class="hljs-string"><span class="hljs-string">'-stationTo'</span></span>, <span class="hljs-string"><span class="hljs-string">'-date'</span></span>, <span class="hljs-string"><span class="hljs-string">'searchTrains'</span></span>],</code> </pre><br>  Simplemente agregue un signo menos delante del nombre de la celda y ¬°listo!  Ahora, los <b>resultados</b> solo responder√°n a los cambios en la celda <b>searchTrains</b> . <br><br>  En este caso, la celda <b>searchTrains</b> act√∫a como una "se√±al de celda", y las celdas de <b>stationFrom</b> y otras como "valores de celda".  Para una celda de se√±al, solo es importante el momento en que los valores "fluyen" a trav√©s de ella y qu√© tipo de datos ser√°n, de todos modos: pueden ser verdaderos, "1" o lo que sea (en nuestro caso, ser√°n objetos de Evento DOM) )  Para una celda de valor, lo importante es su valor, pero al mismo tiempo, los momentos de su cambio no son significativos.  Estos dos tipos de celdas no son mutuamente excluyentes: muchas celdas son tanto se√±ales como valores.  En el nivel de sintaxis en mrr, estos dos tipos de celdas no difieren de ninguna manera, pero la comprensi√≥n conceptual de tal diferencia es muy importante al escribir c√≥digo reactivo. <br><br><h3>  Divisi√≥n de corrientes </h3><br>  Una solicitud para buscar asientos en el tren puede llevar alg√∫n tiempo, por lo que debemos mostrar el cargador y tambi√©n responder en caso de error.  Ya hay pocas promesas para este enfoque predeterminado con resoluci√≥n autom√°tica. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ <span class="hljs-attr"><span class="hljs-attr">$init</span></span>: { <span class="hljs-attr"><span class="hljs-attr">results</span></span>: {}, } stationFrom: <span class="hljs-string"><span class="hljs-string">'selectStationFrom/val'</span></span>, <span class="hljs-attr"><span class="hljs-attr">stationTo</span></span>: <span class="hljs-string"><span class="hljs-string">'selectStationTo/val'</span></span>, <span class="hljs-attr"><span class="hljs-attr">searchQuery</span></span>: [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params">, to, date</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, to, date }), <span class="hljs-string"><span class="hljs-string">'-stationFrom'</span></span>, <span class="hljs-string"><span class="hljs-string">'-stationTo'</span></span>, <span class="hljs-string"><span class="hljs-string">'-date'</span></span>, <span class="hljs-string"><span class="hljs-string">'searchTrains'</span></span>], <span class="hljs-attr"><span class="hljs-attr">results</span></span>: [<span class="hljs-string"><span class="hljs-string">'nested'</span></span>, (cb, query) =&gt; { cb({ <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">error</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }); getTrains(query.from, query.to, query.date) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'data'</span></span>, res)) .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, err)) .finally(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> cb(<span class="hljs-string"><span class="hljs-string">'loading'</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>)) }, <span class="hljs-string"><span class="hljs-string">'searchQuery'</span></span>], <span class="hljs-attr"><span class="hljs-attr">availableTrains</span></span>: <span class="hljs-string"><span class="hljs-string">'results.data'</span></span>, }, (state, props, $, connectAs) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;div&gt; &lt;div&gt; &lt;OptionsInput { ...connectAs(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'selectStationFrom'</span></span></span></span></span><span class="hljs-function">) } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getOptions</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getMatchedStations</span></span></span><span class="hljs-function"> } /&gt; - &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OptionsInput</span></span></span><span class="hljs-function"> { ...</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">connectAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'selectStationTo'</span></span></span></span></span><span class="hljs-function">) } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getOptions</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getMatchedStations</span></span></span><span class="hljs-function"> } /&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">input</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">date</span></span></span><span class="hljs-function">" </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onChange</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'date'</span></span></span></span></span><span class="hljs-function">) } /&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">button</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onClick</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'searchTrains'</span></span></span></span></span><span class="hljs-function">) }&gt;&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">button</span></span></span><span class="hljs-function">&gt; &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loading</span></span></span><span class="hljs-function"> &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loading</span></span></span><span class="hljs-function">"&gt;...&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; } { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">"&gt; . ,  .   .&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; } { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">availableTrains</span></span></span><span class="hljs-function"> &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">"&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">availableTrains</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(train</span></span></span><span class="hljs-function">) =&gt;</span></span> &lt;div /&gt;) } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt; } &lt;/</span></span>div&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>); });</code> </pre><br>  El operador <b>anidado le</b> permite "descomponer" los datos en subc√©lulas; para esto, el primer argumento de la f√≥rmula es la devoluci√≥n de llamada, con la que puede "empujar" los datos en la subcelda (una o m√°s).  Ahora tenemos transmisiones separadas que son responsables del error, el estado de la promesa y los datos recibidos.  El operador anidado es una herramienta muy poderosa y uno de los pocos imperativos en mrr (nosotros mismos especificamos en qu√© celdas colocar los datos).  Mientras que el operador de fusi√≥n combina m√∫ltiples subprocesos en uno, anidado divide el subproceso en m√∫ltiples subprocesos, siendo lo contrario. <br><br>  El ejemplo anterior es una forma est√°ndar de trabajar con promesas, en mrr se generaliza como un operador de promesa y le permite acortar el c√≥digo: <br><br><pre> <code class="javascript hljs"> results: [<span class="hljs-string"><span class="hljs-string">'promise'</span></span>, (query) =&gt; getTrains(query.from, query.to, query.date), <span class="hljs-string"><span class="hljs-string">'searchQuery'</span></span>], <span class="hljs-comment"><span class="hljs-comment">//     availableTrains: 'results.data',</span></span></code> </pre><br>  Adem√°s, el operador de la promesa se asegura de que solo se utilicen los resultados de la promesa m√°s reciente. <br><br><img src="https://habrastorage.org/webt/in/ew/2d/inew2diajzwvzh6lzcie3saledw.gif"><br><br>  Componente para mostrar los asientos disponibles (por simplicidad, rechazaremos los diferentes tipos de autom√≥viles) <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> TrainSeats = withMrr({ <span class="hljs-attr"><span class="hljs-attr">selectSeats</span></span>: [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">seatsNumber, { id }</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>(seatsNumber)).fill(<span class="hljs-literal"><span class="hljs-literal">true</span></span>).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">trainId</span></span>: id })), <span class="hljs-string"><span class="hljs-string">'-seatsNumber'</span></span>, <span class="hljs-string"><span class="hljs-string">'-$props'</span></span>, <span class="hljs-string"><span class="hljs-string">'select'</span></span>], <span class="hljs-attr"><span class="hljs-attr">seatsNumber</span></span>: [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'selectSeats'</span></span>], }, (state, props, $) =&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"train"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">  ‚Ññ{ props.num } { props.from } - { props.to }.   : { props.seats || 0 } { props.seats &amp;&amp; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     : </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">seatsNumber</span></span></span></span><span class="xml"><span class="hljs-tag">') } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">state.seatsNumber</span></span></span></span><span class="xml"><span class="hljs-tag"> || </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">0</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">max</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">props.seats</span></span></span></span><span class="xml"><span class="hljs-tag"> } /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">select</span></span></span></span><span class="xml"><span class="hljs-tag">') }&gt;</span></span></span><span class="xml"></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> } </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">);</span></span></code> </pre><br>  Para acceder a los accesorios en una f√≥rmula, puede suscribirse al cuadro especial $ props. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Tickets = withMrr({ ... selectedSeats: <span class="hljs-string"><span class="hljs-string">'*/selectSeats'</span></span>, }, (state, props, $, connectAs) =&gt; { ... &lt;div className=<span class="hljs-string"><span class="hljs-string">"results"</span></span>&gt; { state.availableTrains.map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">train, i</span></span></span><span class="hljs-function">) =&gt;</span></span> &lt;TrainSeats key={i} {...train} {...connectAs(<span class="hljs-string"><span class="hljs-string">'train'</span></span> + i)}/&gt;) } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt; }</span></span></code> </pre><br>  De nuevo, usamos la escucha pasiva para recoger el n√∫mero de lugares seleccionados cuando hace clic en el bot√≥n "Seleccionar".  Asociamos cada componente hijo con el padre utilizando la funci√≥n connectAs.  El usuario puede seleccionar asientos en cualquiera de los trenes propuestos, por lo que escuchamos los cambios en todos los componentes secundarios utilizando la m√°scara "*". <br><br>  Pero aqu√≠ est√° el problema: el usuario puede agregar asientos primero en un tren, luego en otro, para que la nueva informaci√≥n mueva a los anteriores.  ¬øC√≥mo "acumular" datos de flujo?  Para hacer esto, hay un operador de <b>cierre</b> , que, junto con anidado y embudo, forma la base de mrr (todos los dem√°s no son m√°s que az√∫car sint√°ctica basada en estos tres). <br><br><pre> <code class="javascript hljs"> selectedSeats: [<span class="hljs-string"><span class="hljs-string">'closure'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> seats = []; <span class="hljs-comment"><span class="hljs-comment">//     return selectedSeats =&gt; { seats = [...seats, selectedSeats]; return seats; } }, '*/selectSeats'],</span></span></code> </pre><br>  Cuando se usa el <b>cierre</b> primero (en componentDidMount), se crea un cierre que devuelve la f√≥rmula.  Ella tiene as√≠ acceso a las variables de cierre.  Esto le permite guardar datos entre llamadas de manera segura, sin caer en el abismo de las variables globales y el estado mutable compartido.  Por lo tanto, el cierre le permite implementar la funcionalidad de los operadores de Rx, como el escaneo y otros.  Sin embargo, este m√©todo es bueno para casos dif√≠ciles.  Si solo necesitamos guardar el valor de una variable, simplemente podemos usar el enlace al valor anterior de la celda usando el nombre especial "^": <br><br><pre> <code class="javascript hljs"> selectedSeats: [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">seats, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> [...seats, ...prev], <span class="hljs-string"><span class="hljs-string">'*/selectSeats'</span></span>, <span class="hljs-string"><span class="hljs-string">'^'</span></span>]</code> </pre><br>  Ahora el usuario debe ingresar un nombre y apellido para cada boleto seleccionado. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SeatDetails = withMrr({}, (state, props, $) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;div&gt; { props.trainId } &lt;input name=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"name"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value={ props.name } onChange={ $(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'setDetails'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, e =&gt; [</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'name'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, e.target.value, props.i]</span></span></span><span class="hljs-function">) } /&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">input</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">surname</span></span></span><span class="hljs-function">" </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">surname</span></span></span><span class="hljs-function"> } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onChange</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'setDetails'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, e =&gt; [</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'surname'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, e.target.value, props.i]</span></span></span><span class="hljs-function">) }/&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">href</span></span></span><span class="hljs-function">="#" </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onClick</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'removeSeat'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, props.i</span></span></span><span class="hljs-function">) }&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">X</span></span></span><span class="hljs-function">&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a</span></span></span><span class="hljs-function">&gt; &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt;); }) </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Tickets</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">withMrr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ $init: { results: {}, selectedSeats: [], } stationFrom: </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'selectStationFrom/val'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, stationTo: </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'selectStationTo/val'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, searchQuery: [(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params">, to, date</span></span></span><span class="hljs-function">) =&gt;</span></span> ({ <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, to, date }), <span class="hljs-string"><span class="hljs-string">'-stationFrom'</span></span>, <span class="hljs-string"><span class="hljs-string">'-stationTo'</span></span>, <span class="hljs-string"><span class="hljs-string">'-date'</span></span>, <span class="hljs-string"><span class="hljs-string">'searchTrains'</span></span>], <span class="hljs-attr"><span class="hljs-attr">results</span></span>: [<span class="hljs-string"><span class="hljs-string">'promise'</span></span>, (query) =&gt; getTrains(query.from, query.to, query.date), <span class="hljs-string"><span class="hljs-string">'searchQuery'</span></span>], <span class="hljs-attr"><span class="hljs-attr">availableTrains</span></span>: <span class="hljs-string"><span class="hljs-string">'results.data'</span></span>, <span class="hljs-attr"><span class="hljs-attr">selectedSeats</span></span>: [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">seats, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> [...seats, ...prev], <span class="hljs-string"><span class="hljs-string">'*/selectSeats'</span></span>, <span class="hljs-string"><span class="hljs-string">'^'</span></span>] }, (state, props, $, connectAs) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">&lt;div&gt; &lt;div&gt; &lt;OptionsInput { ...connectAs(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'selectStationFrom'</span></span></span></span></span><span class="hljs-function">) } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getOptions</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getMatchedStations</span></span></span><span class="hljs-function"> } /&gt; - &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">OptionsInput</span></span></span><span class="hljs-function"> { ...</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">connectAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'selectStationTo'</span></span></span></span></span><span class="hljs-function">) } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getOptions</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getMatchedStations</span></span></span><span class="hljs-function"> } /&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">input</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">date</span></span></span><span class="hljs-function">" </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onChange</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'date'</span></span></span></span></span><span class="hljs-function">) } /&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">button</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onClick</span></span></span><span class="hljs-function">={ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'searchTrains'</span></span></span></span></span><span class="hljs-function">) }&gt;&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">button</span></span></span><span class="hljs-function">&gt; &lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loading</span></span></span><span class="hljs-function"> &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">loading</span></span></span><span class="hljs-function">"&gt;...&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; } { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">"&gt; . ,  .   .&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function">&gt; } { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">availableTrains</span></span></span><span class="hljs-function"> &amp;&amp; &lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">div</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">className</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">"&gt; { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">availableTrains</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(train, i</span></span></span><span class="hljs-function">) =&gt;</span></span> &lt;TrainSeats key={i} {...train} {...connectAs(<span class="hljs-string"><span class="hljs-string">'train'</span></span> + i)}/&gt;) } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt; } { state.selectedSeats.map((seat, i) =&gt; &lt;SeatDetails key={i} i={i} { ...seat } {...connectAs('seat' + i)}/</span></span>&gt;) } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt; &lt;/</span></span>div&gt;); });</code> </pre><br>  La celda <b>selectedSeats</b> contiene una matriz de ubicaciones seleccionadas.  A medida que el usuario ingresa el nombre y apellido de cada ticket, debemos cambiar los datos en los elementos correspondientes de la matriz. <br><br><pre> <code class="javascript hljs"> selectedSeats: [<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">seats, details, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ??? }, '*/selectSeats', '*/setDetails', '^']</span></span></code> </pre><br>  El enfoque est√°ndar no es adecuado para nosotros: en la f√≥rmula, necesitamos saber qu√© celda ha cambiado y responder en consecuencia.  Una de las formas del operador de fusi√≥n nos ayudar√°. <br><br><pre> <code class="javascript hljs"> selectedSeats: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, { <span class="hljs-string"><span class="hljs-string">'*/selectSeats'</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">seats, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [...prev, ...seats]; }, <span class="hljs-string"><span class="hljs-string">'*/setDetails'</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[field, value, i], prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { prev[i][field] = value; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prev; }, <span class="hljs-string"><span class="hljs-string">'*/removeSeat'</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { prev.splice(i, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prev; }, }, <span class="hljs-string"><span class="hljs-string">'^'</span></span><span class="hljs-comment"><span class="hljs-comment">/*,       */</span></span>],</code> </pre><br>  Esto es un poco como los reductores de Redux, pero con una sintaxis m√°s flexible y potente.  Y no puede tener miedo de mutar la matriz, porque solo la f√≥rmula de una celda tiene control sobre ella, respectivamente, se excluyen los cambios paralelos (pero la mutaci√≥n de matrices que se pasan como argumentos ciertamente no vale la pena). <br><br><h3>  Colecciones reactivas </h3><br>  El patr√≥n cuando la celda almacena y cambia la matriz es muy com√∫n.  Todas las operaciones con la matriz son de tres tipos: insertar, modificar, eliminar.  Para describir esto, hay un elegante operador de <b>coll</b> .  √öselo para simplificar el c√°lculo de los asientos <b>seleccionados</b> . <br><br>  Fue: <br><br><pre> <code class="javascript hljs"> selectedSeats: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, { <span class="hljs-string"><span class="hljs-string">'*/selectSeats'</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">seats, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [...prev, ...seats]; }, <span class="hljs-string"><span class="hljs-string">'*/setDetails'</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[field, value, i], prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { prev[i][field] = value; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prev; }, <span class="hljs-string"><span class="hljs-string">'*/removeSeat'</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i, prev</span></span></span><span class="hljs-function">) =&gt;</span></span> { prev.splice(i, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prev; }, <span class="hljs-string"><span class="hljs-string">'addToCart'</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> [], }, <span class="hljs-string"><span class="hljs-string">'^'</span></span>]</code> </pre><br>  se convirti√≥ en: <br><br><pre> <code class="javascript hljs"> selectedSeats: [<span class="hljs-string"><span class="hljs-string">'coll'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">create</span></span>: <span class="hljs-string"><span class="hljs-string">'*/selectSeats'</span></span>, <span class="hljs-attr"><span class="hljs-attr">update</span></span>: <span class="hljs-string"><span class="hljs-string">'*/setDetails'</span></span>, <span class="hljs-attr"><span class="hljs-attr">delete</span></span>: [<span class="hljs-string"><span class="hljs-string">'merge'</span></span>, <span class="hljs-string"><span class="hljs-string">'*/removeSeat'</span></span>, [<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ({}), <span class="hljs-string"><span class="hljs-string">'addToCart'</span></span>]] }]</code> </pre><br>  sin embargo, el formato de datos en la secuencia setDetails debe modificarse un poco: <br><br><pre> <code class="javascript hljs"> &lt;input name=<span class="hljs-string"><span class="hljs-string">"name"</span></span> onChange={ $(<span class="hljs-string"><span class="hljs-string">'setDetails'</span></span>, e =&gt; [{ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: e.target.value }, props.i]) } /&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"surname"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> $('</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">setDetails</span></span></span></span><span class="xml"><span class="hljs-tag">', </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">e</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> [{ surname: e.target.value }, props.i]) }/&gt;</span></span></code> </pre><br>  Usando el operador <b>coll</b> , describimos tres hilos que afectar√°n nuestra matriz.  En este caso, la secuencia de <b>creaci√≥n</b> debe contener los propios elementos, que deben agregarse a la matriz (generalmente objetos).  La secuencia de <b>eliminaci√≥n</b> acepta los √≠ndices de los elementos que se eliminar√°n (tanto en '* / removeSeat') como las m√°scaras.  La m√°scara {} eliminar√° todos los elementos y, por ejemplo, la m√°scara {nombre: 'Carl'} eliminar√° todos los elementos con el nombre Carl.  La secuencia de <b>actualizaci√≥n</b> acepta pares de valores: el cambio que debe hacerse con el elemento (m√°scara o funci√≥n) y el √≠ndice o m√°scara de los elementos que deben cambiarse.  Por ejemplo, [{apellido: 'Johnson'}, {}] establecer√° el apellido Johnson en todos los elementos de la matriz. <br><br>  El operador coll usa algo as√≠ como un lenguaje de consulta interno, lo que facilita el trabajo con colecciones y lo hace m√°s declarativo. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El c√≥digo completo de</a> nuestra aplicaci√≥n en JsFiddle. <br><br>  Nos familiarizamos con casi todas las funciones b√°sicas necesarias de MRR.  Un tema bastante significativo que se ha mantenido por la borda es la gesti√≥n global de la riqueza, que se discutir√° en futuros art√≠culos.  Pero ahora puede comenzar a usar mrr para administrar el estado dentro de un componente o grupo de componentes relacionados. <br><br><h3>  Conclusiones </h3><br><h4>  ¬øCu√°l es el poder de mrr? </h4><br>  mrr le permite escribir aplicaciones en React en un estilo funcional-reactivo (mrr se puede descifrar como Make React Reactive).  MRR es muy expresivo: pasa menos tiempo escribiendo l√≠neas de c√≥digo. <br><br>  MRR proporciona un peque√±o conjunto de abstracciones b√°sicas, que es suficiente para todos los casos: este art√≠culo describe casi todas las caracter√≠sticas y t√©cnicas principales de MRR.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambi√©n hay herramientas para expandir este conjunto b√°sico (la capacidad de crear operadores personalizados). Podr√° escribir un hermoso c√≥digo declarativo sin leer cientos de p√°ginas del manual y sin siquiera estudiar las profundidades te√≥ricas de la programaci√≥n funcional; es poco probable que tenga que usar, por ejemplo, m√≥nadas, porque MRR es una m√≥nada gigante que separa el c√≥mputo puro de las mutaciones estatales.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mientras que en otras bibliotecas a menudo coexisten enfoques heterog√©neos (imperativo usando m√©todos y declarativo usando aglutinantes reactivos), de los cuales el programador mezcla aleatoriamente "ensalada", en mrr hay una esencia b√°sica √∫nica: una corriente, que contribuye a la homogeneidad y uniformidad del c√≥digo. </font><font style="vertical-align: inherit;">La comodidad, la conveniencia, la simplicidad, el ahorro de tiempo de un programador son las principales ventajas de mrr (a partir de aqu√≠ hay otra decodificaci√≥n de mrr como "mrrrr", es decir, ronronear a un gato que est√° satisfecho con la vida de un gato).</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬øCu√°les son las desventajas? </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La programaci√≥n con "l√≠neas" tiene sus ventajas y desventajas. </font><font style="vertical-align: inherit;">No podr√° completar autom√°ticamente el nombre de la celda ni buscar el lugar donde est√° definida. </font><font style="vertical-align: inherit;">Por otro lado, en mrr siempre hay un √∫nico lugar donde se determina el comportamiento de la celda, y es f√°cil encontrarlo con una simple b√∫squeda de texto, mientras se busca el lugar donde se determina el valor del campo Redux de la tienda, o incluso menos el campo de estado cuando se usa el setState nativo. Puede ser m√°s largo.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬øQui√©n podr√≠a estar interesado en esto? </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En primer lugar, los partidarios de la programaci√≥n funcional son personas para quienes la ventaja de un enfoque declarativo es obvia. </font><font style="vertical-align: inherit;">Por supuesto, las soluciones kosher ClojureScript ya existen, pero siguen siendo un producto de nicho, mientras que React gobierna la pelota. </font><font style="vertical-align: inherit;">Si su proyecto ya usa Redux, puede comenzar a usar mrr para administrar el estado local y, en el futuro, pasar a global. </font><font style="vertical-align: inherit;">Incluso si no planea utilizar nuevas tecnolog√≠as en este momento, puede lidiar con la MRR para ‚Äúestirar su cerebro‚Äù al observar las tareas familiares desde una nueva perspectiva, porque MRR es significativamente diferente de las bibliotecas comunes de administraci√≥n de estado.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬øSe puede usar esto ya? </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En principio, s√≠ :) La biblioteca es joven, hasta ahora se ha utilizado activamente en varios proyectos, pero la API de la funcionalidad b√°sica ya se ha establecido, ahora se est√° trabajando principalmente en diferentes lociones (az√∫car sint√°ctico), dise√±adas para acelerar a√∫n m√°s y facilitar el desarrollo. </font><font style="vertical-align: inherit;">Por cierto, en los principios de MRR no hay nada espec√≠fico para React, se puede adaptar para usar con cualquier biblioteca de componentes (React se eligi√≥ debido a la falta de reactividad incorporada o una biblioteca generalmente aceptada para esto). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Gracias por su atenci√≥n, le agradecer√© sus comentarios y cr√≠ticas constructivas!</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es428870/">https://habr.com/ru/post/es428870/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es428858/index.html">Conferencia DEFCON 17. ¬°R√≠ete de tus virus! Parte 1</a></li>
<li><a href="../es428860/index.html">Conferencia DEFCON 17. ¬°R√≠ete de tus virus! Parte 2</a></li>
<li><a href="../es428864/index.html">Hagamos que la web sea grandiosa nuevamente</a></li>
<li><a href="../es428866/index.html">7 principios de dise√±o, actitud hacia las tendencias de dise√±o, cartera de dise√±adores UX, ...</a></li>
<li><a href="../es428868/index.html">JAR de lanzamiento m√∫ltiple: ¬ømalo o bueno?</a></li>
<li><a href="../es428872/index.html">La historia de un ojo y 20 operaciones (no se puede leer) o quer√≠a ser piloto, pero no se le permiti√≥ volar al cielo</a></li>
<li><a href="../es428876/index.html">No hay vuelta atr√°s: la experiencia personal del probador</a></li>
<li><a href="../es428878/index.html">Pig Flight u optimizaci√≥n de int√©rpretes de bytecode</a></li>
<li><a href="../es428880/index.html">Nuevos m√©todos de autenticaci√≥n: ¬øuna amenaza para la privacidad?</a></li>
<li><a href="../es428882/index.html">Mobile Yandex. Blitz: analizamos tareas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>