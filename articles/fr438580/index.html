<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💂🏼 ♿️ 🦈 Mots de passe générés automatiquement dans iOS 12 🙏🏼 ⛹🏾 👩‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si votre application a une fonction d'enregistrement qui inclut la possibilité ou la nécessité de saisir un nouveau nom d'utilisateur et un nouveau mo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mots de passe générés automatiquement dans iOS 12</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438580/">  Si votre application a une fonction d'enregistrement qui inclut la possibilité ou la nécessité de saisir un nouveau nom d'utilisateur et un nouveau mot de passe, vous serez probablement intéressé par l'innovation dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">iOS 12</a> , que j'aimerais souligner.  Il s'agit d'un service qui invente de nouveaux mots de passe pour l'utilisateur, les substitue automatiquement dans les champs nécessaires et les stocke en toute sécurité dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">trousseau</a> . <br><a name="habracut"></a><br>  Les mots de passe système générés automatiquement sont les plus résistants à la sélection (étant des séquences de caractères générées aléatoirement - ajustées pour les restrictions personnalisées, mais plus à ce sujet plus tard), soulagent les utilisateurs de l'application de la nécessité de créer une séquence qui leur est propre et sont configurées de manière flexible pour les besoins d'une application particulière.  La prise en charge de nouvelles fonctionnalités est assez facile à fournir, cependant, non sans fonctionnalités.  Mais tout d'abord. <br><br><h3>  Droits et obligations </h3><br>  Tout d'abord, l'application doit déclarer sa volonté d'utiliser cette fonctionnalité.  Dans la liste des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">capacités</a> de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cible</a> correspondante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">,</a> vous devez d'abord avoir un domaine dans la liste des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">domaines associés</a> .  Curieusement, l'application doit avoir un «domaine associé» afin de pouvoir utiliser les mots de passe générés et les stocker dans le «trousseau» de l'utilisateur (ces deux fonctions sont interconnectées et la génération ne peut pas être utilisée séparément du stockage). <br><br>  Si l'application prend déjà en charge l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">utilisation de comptes partagés avec votre site (les «informations d'identification partagées»)</a> , cette étape est déjà en retard.  Il peut également être déjà en retard et si l'application prend en charge <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les liens universels</a> ou un autre mécanisme de traitement des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«URL»</a> externes. <br><br>  Quoi qu'il en soit, après avoir ajouté cette compatibilité, l'application aura un nouveau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«droit»</a> . <br><br>  En plus de cette compatibilité plus générale, l'application devrait également avoir la «capacité» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«fournisseur d'informations d'identification de remplissage automatique»</a> - cela permet à l'application, si l'autorisation de l'utilisateur est autorisée, d'utiliser les identifiants et les mots de passe proposés par le système.  L'ajout de cette compatibilité entraînera l'apparition de l'autorisation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Autofill Credential Provider Entitlement</a> . <br><blockquote>  Soit dit en passant, l'ajout de cette fonctionnalité et d'autres fonctionnalités n'est disponible que pour les membres du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">programme pour développeurs Apple</a> . </blockquote>  Le profil d'approvisionnement utilisé par l'application doit également inclure les deux fonctionnalités suivantes. <br><br><h3>  Dépendances utilisées </h3><br>  L'ajout de la compatibilité appropriée entraînera l'apparition du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cadre</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AuthenticationServices</a> dans la liste Frameworks et bibliothèques liés de la cible correspondante.  Ce point a quelques caractéristiques qui méritent d'être mentionnées. <br><br>  Premièrement, l'ajout automatique d'un framework associé peut ne pas «fonctionner» la première fois: lorsque je lance l'application sur un appareil réel à partir de ma copie de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«Xcode»</a> version 10.1, l'application a immédiatement «planté» en raison du manque de «AuthenticationServices».  La suppression manuelle du cadre et son ajout à la liste des composants associés ont résolu le problème. <br><br>  Deuxièmement, l'ajout automatique d'un framework le marque comme «Obligatoire».  Si votre application implique la possibilité de travailler "sous" les versions "iOS" inférieures à 12, cela entraînera également son plantage lors de la phase de démarrage "sous" les systèmes d'exploitation des versions inférieures.  "AuthenticationServices" n'est disponible que pour les systèmes de la version 12.  Ce problème est résolu en marquant le cadre comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«facultatif»</a> . <br><br><h3>  Prise en charge de la zone de texte </h3><br>  Pour prendre en charge la fonctionnalité avec des champs de texte, la variable <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>textContentType</code></a> protocole <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>textContentType</code></a> est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>UITextInputTraits</code></a> .  La classe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>UITextField</code></a> , qui est très probablement utilisée pour entrer le login et le mot de passe dans l'application, implémente déjà les exigences du protocole dont nous avons besoin. <br><br>  <code>textContentType</code> est un champ de type <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>UITextContentType</code></a> contenant uniquement un ensemble de constantes.  Ce dont nous avons besoin pour le moment, c'est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>newPassword</code></a> , utilisé pour entrer un nouveau mot de passe en cours d'invention (à ne pas confondre avec le seul <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>password</code></a> utilisé pour entrer un mot de passe existant). <br><br><pre> <code class="plaintext hljs">let passwordTextField = UITextField() if #available(iOS 12, *) { passwordTextField.textContentType = .newPassword }</code> </pre> <br>  La définition de la valeur de <code>textContentType</code> encapsulée dans une vérification d'accessibilité <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">«API»</a> , car, comme la fonctionnalité générale, cette constante n'est disponible qu'à partir de «iOS 12». <br><br>  En plus du type de contenu, le champ de texte doit fournir une entrée de données sécurisée: <br><br><pre> <code class="plaintext hljs">passwordTextField.isSecureTextEntry = true</code> </pre> <br>  Bien que l'application puisse fournir la fonctionnalité d'afficher et de masquer le mot de passe entré qui est populaire à notre époque, le mot de passe généré ne sera proposé que si le drapeau est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>true</code></a> à ce moment. <br><br>  Un point intéressant est lié au type de contenu du champ de texte: si aucun autre champ n'est présent à l'écran, avec le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>username</code></a> type de contenu, le mot de passe généré automatiquement ne sera pas proposé.  Cela est dû au fait que la fonctionnalité est basée non seulement sur le type spécifié de contenu de champ de texte, mais sur une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">analyse heuristique du contenu de l'écran</a> . <br><br>  Il semble que la génération de mot de passe «casse» la logique des écrans qui nécessitent un nouveau mot de passe pour être vérifié deux fois.  Au moins, je n'ai pas encore trouvé de moyen d'utiliser ces deux fonctionnalités ensemble.  Et il semble que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">je ne suis pas le seul</a> . <br><br>  Il convient de mentionner que si la connexion est sémantiquement une adresse e-mail (et, par conséquent, je veux vraiment avoir le type de clavier approprié), les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">types de clavier</a> et de contenu peuvent être combinés: <br><br><pre> <code class="plaintext hljs">let userNameTextField = UITextField() userNameTextField.keyboardType = .emailAddress userNameTextField.textContentType = .username</code> </pre> <br><h3>  Exigences de mot de passe </h3><br>  Souvent, les mots de passe des utilisateurs doivent suivre certaines règles (avoir une certaine longueur, inclure certains caractères, etc.).  Ces règles peuvent être spécifiées pour que le système les prenne en compte lors de la génération des mots de passe.  Cela se fait via la propriété <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>passwordRules</code></a> du protocole <code>UITextInputTraits</code> .  Par exemple: <br><br><pre> <code class="plaintext hljs">if #available(iOS 12, *) { passwordTextField.passwordRules = UITextInputPasswordRules(descriptor: "required: upper; required: lower; required: digit; minlength: 8;") }</code> </pre> <br>  La propriété est également disponible uniquement à partir de "iOS 12". <br><br>  Le type de la propriété est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>UITextInputPasswordRules</code></a> .  Initialisation - à l'aide d'une chaîne de descripteurs.  Le descripteur a une syntaxe simple et se compose d'exigences de mot de passe simples, répertoriées avec un point-virgule.  Chaque exigence est une paire clé-valeur, séparée par deux points.  La clé est le type de règle (par exemple, "nécessairement inclut" - <code>required</code> ), et la valeur est l'élément qui doit suivre cette règle (par exemple, chiffres - <code>digit</code> ). <br><br>  Dans l'exemple ci-dessus, le descripteur signifie: <br><br><ul><li>  <code>required: upper</code> - la présence d'au moins une majuscule est requise; </li><li>  <code>required: lower</code> - le même pour au moins une lettre minuscule; </li><li>  <code>required: digit</code> - le même pour au moins un chiffre en minuscule; </li><li>  <code>minlength: 8</code> - la longueur minimale est de huit caractères. </li></ul><br>  Une liste détaillée des clés et valeurs possibles peut être trouvée dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bon article publié sur le site Web de NSHipster</a> . <br><br>  Et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Apple</a> propose un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">assistant de compilation de descripteurs</a> plutôt pratique, qui fournit non seulement un moyen pratique de les construire, mais également une vérification des descripteurs compilés sous la forme d'un nombre illimité d'exemples générés.  Vous pouvez y voir quelles règles sont appliquées par défaut. <br><br><h3>  Validation </h3><br>  Au cas où, il convient de préciser que le mécanisme de génération de mot de passe ne permet pas de valider les données saisies par l'utilisateur - vous devez vous en occuper vous-même.  Ce qui, bien sûr, est assez logique, car  l'utilisateur de l'application peut refuser le mot de passe généré automatiquement proposé ou même interdire la génération de mots de passe et l'auto-complétion des champs. <br><br><h3>  Constructeur d'interface </h3><br>  Ce qui est remarquable et dans l'esprit de notre temps, tous les paramètres de champ de texte répertoriés peuvent être définis dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Interface Builder"</a> , jusqu'à la "règle de mot de passe": <br><br><img src="https://habrastorage.org/getpro/habr/post_images/098/29a/2cb/09829a2cb9624b92c8da4b938c424e48.png" alt="image"><br><br><h3>  Vérification de fonctionnalité </h3><br>  La fonctionnalité n'est pas compliquée, mais elle a un certain nombre de nuances: lorsque vous la configurez, vous pouvez facilement oublier quelque chose.  Dans ce cas, dans les assemblys "debug", lorsque le champ de texte correspondant est activé, la raison sera affichée dans la console pour laquelle la fonctionnalité ne fonctionne pas actuellement. <br><br>  Par exemple: <br><br><pre> <code class="plaintext hljs">[AutoFill] Cannot show Automatic Strong Passwords for app bundleID: &lt;...&gt; due to error: Cannot save passwords for this app. Make sure you have set up Associated Domains for your app and AutoFill Passwords is enabled in Settings</code> </pre> <br>  En outre, vous devez toujours garder à l'esprit que ce type de fonctionnalité fait partie des actions pour lesquelles l'autorisation de l'utilisateur est requise.  Dans ce cas, deux sont requis: <br><br>  1. Porte-clés iCloud; <br>  2. Remplissage automatique. <br><br><h3>  Conclusion </h3><br>  Cela semble être tout ce à quoi il faut faire attention tout en fournissant un support pour les nouvelles fonctionnalités.  Si quelqu'un en train de travailler sur cela a rencontré d'autres fonctionnalités intéressantes, je commenterai une fois et, si nécessaire, assurez-vous de compléter l'article. <br><br>  La fonctionnalité est assez intéressante et, si elle est utilisée correctement, est tout à fait capable d'améliorer l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">expérience utilisateur de</a> votre application! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr438580/">https://habr.com/ru/post/fr438580/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr438568/index.html">À propos des ordinateurs quantiques: comment différents pays développent cette technologie</a></li>
<li><a href="../fr438570/index.html">Concours du Nouvel An du CS Center 2018</a></li>
<li><a href="../fr438574/index.html">Bases de l'architecture d'application Flutter: vanille, modèle de portée, BLoC</a></li>
<li><a href="../fr438576/index.html">Open source populaire - troisième partie: 5 outils pour les développeurs</a></li>
<li><a href="../fr438578/index.html">Comment le géant de l'informatique a été «contourné» pour la deuxième fois</a></li>
<li><a href="../fr438582/index.html">AntiRating 2018</a></li>
<li><a href="../fr438584/index.html">Frontend pour développeur backend</a></li>
<li><a href="../fr438588/index.html">Widget googleTranslate personnalisé pour le site</a></li>
<li><a href="../fr438590/index.html">Thunder in Paradise ou pourquoi vous ne devriez pas utiliser FlylinkDC ++</a></li>
<li><a href="../fr438592/index.html">Que rechercher lors du choix d'un lecteur - nous parlons du facteur de forme et de l'affichage</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>