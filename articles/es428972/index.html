<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≤üèæ ü¶Ç üëì Integraci√≥n continua en Yandex üåô üíÖüèª üëø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mantener una gran base de c√≥digo mientras se garantiza una alta productividad para un gran n√∫mero de desarrolladores es un desaf√≠o serio. En los √∫ltim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Integraci√≥n continua en Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/428972/"><p>  Mantener una gran base de c√≥digo mientras se garantiza una alta productividad para un gran n√∫mero de desarrolladores es un desaf√≠o serio.  En los √∫ltimos 5 a√±os, Yandex ha estado desarrollando un sistema especial para la integraci√≥n continua.  En este art√≠culo, hablaremos sobre la escala de la base de c√≥digo Yandex, sobre la transferencia del desarrollo a un √∫nico repositorio con un enfoque de desarrollo basado en troncales, sobre qu√© tareas debe resolver un sistema de integraci√≥n continua para trabajar de manera efectiva en tales condiciones. </p><br><img src="https://habrastorage.org/webt/wb/mt/xc/wbmtxcvurtd6cdv1aomjrtcyfw8.png"><br><p>  Hace muchos a√±os, Yandex no ten√≠a reglas especiales en el desarrollo de servicios: cada departamento pod√≠a usar cualquier idioma, cualquier tecnolog√≠a, cualquier sistema de implementaci√≥n.  Y como la pr√°ctica ha demostrado, esa libertad no siempre ayud√≥ a avanzar m√°s r√°pido.  En ese momento, para resolver los mismos problemas, a menudo hab√≠a varios desarrollos propietarios o de c√≥digo abierto.  A medida que la empresa creci√≥, ese ecosistema funcion√≥ peor.  Al mismo tiempo, quer√≠amos seguir siendo un gran Yandex, y no dividirnos en muchas compa√±√≠as independientes, porque ofrece muchas ventajas: muchas personas hacen las mismas tareas, los resultados de su trabajo pueden reutilizarse.  Comenzando desde una variedad de estructuras de datos, como tablas hash distribuidas y colas sin bloqueo, y terminando con una gran cantidad de c√≥digos especializados diferentes que hemos escrito durante 20 a√±os. </p><a name="habracut"></a><br><p>  Muchas de las tareas que resolvemos no se resuelven en el mundo de c√≥digo abierto.  No hay MapReduce que funcione bien en nuestros vol√∫menes (m√°s de 5000 servidores) y nuestras tareas; no hay un rastreador de tareas que pueda manejar todas nuestras decenas de millones de tickets.  Esto es atractivo en Yandex: puedes hacer cosas realmente geniales. </p><br><p>  Pero estamos perdiendo eficiencia de manera importante cuando resolvemos los mismos problemas de nuevo, rehacemos soluciones ya hechas, lo que dificulta la integraci√≥n entre componentes.  Es bueno y conveniente hacer todo solo por ti mismo en tu propio rinc√≥n, no puedes pensar en los dem√°s por el momento.  Pero tan pronto como el servicio sea lo suficientemente notable, tendr√° dependencias.  Solo parece que varios servicios dependen d√©bilmente entre s√≠, de hecho, hay muchas conexiones entre diferentes partes de la empresa.  Muchos servicios est√°n disponibles a trav√©s de la aplicaci√≥n Yandex / Navegador / etc., o est√°n integrados entre s√≠.  Por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Alice</a> aparece en el navegador, usando Alice puedes pedir un taxi.  Todos usamos componentes comunes: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">YT</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">YQL</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Nirvana</a> . </p><br><p>  El antiguo modelo de desarrollo ten√≠a problemas importantes.  Debido a la presencia de muchos repositorios, es dif√≠cil para un desarrollador ordinario, especialmente un principiante, descubrir: </p><br><ul><li>  donde esta el componente </li><li>  c√≥mo funciona: no hay forma de "tomar y leer" </li><li>  ¬øQui√©n lo est√° desarrollando y apoyando ahora? </li><li>  ¬øC√≥mo empezar a usarlo? </li></ul><br><p>  Como resultado, surgi√≥ el problema del uso mutuo de componentes.  Los componentes casi no pod√≠an usar otros componentes porque representaban "cajas negras" entre s√≠.  Esto afect√≥ negativamente a la empresa, ya que los componentes no solo no se reutilizaron, sino que a menudo no mejoraron.  Muchos componentes se duplicaron, la cantidad de c√≥digo que ten√≠a que ser compatible crec√≠a significativamente.  Generalmente nos mov√≠amos m√°s despacio de lo que pod√≠amos. </p><br><h3 id="edinyy-repozitoriy-i-infrastruktura">  Repositorio √∫nico e infraestructura </h3><br><p>  Hace 5 a√±os, comenzamos un proyecto para transferir el desarrollo a un √∫nico repositorio, con sistemas comunes de ensamblaje, prueba, implementaci√≥n y monitoreo. </p><br><p>  El objetivo principal que quer√≠amos lograr era eliminar los obst√°culos que impiden la integraci√≥n del c√≥digo de otra persona.  El sistema debe proporcionar un acceso f√°cil al c√≥digo de trabajo terminado, un esquema claro para su conexi√≥n y uso, capacidad de recolecci√≥n: los proyectos siempre se recopilan (y pasan las pruebas). </p><br><p>  Como resultado del proyecto, surgi√≥ una sola pila de tecnolog√≠as de infraestructura para la empresa: almacenamiento de c√≥digo fuente, sistema de revisi√≥n de c√≥digo, sistema de construcci√≥n, sistema de integraci√≥n continua, implementaci√≥n, monitoreo. </p><br><p>  Ahora, la mayor parte del c√≥digo fuente para los proyectos de Yandex se almacena en un √∫nico repositorio, o est√° en proceso de pasar a √©l: </p><br><ul><li>  M√°s de 2000 desarrolladores trabajan en proyectos. </li><li>  M√°s de 50,000 proyectos y bibliotecas. </li><li>  El tama√±o del repositorio supera los 25 GB. </li><li>  Ya se han comprometido m√°s de 3.000.000 de confirmaciones en el repositorio. </li></ul><br><p>  Ventajas para la empresa: </p><br><ul><li>  Cualquier proyecto del repositorio recibe una infraestructura preparada: <br><ul><li>  un sistema para ver y navegar el c√≥digo fuente y un sistema de revisi√≥n de c√≥digo. </li><li>  Sistema de montaje y montaje distribuido.  Este es un gran tema separado, y definitivamente lo cubriremos en los siguientes art√≠culos. </li><li>  Sistema de integraci√≥n continua. </li><li>  implementaci√≥n, integraci√≥n con el sistema de monitoreo. </li></ul></li><li>  c√≥digo compartido, interacci√≥n activa del equipo. </li><li>  todo el c√≥digo es com√∫n, puede venir a otro proyecto y hacer los cambios que necesita all√≠.  Esto es especialmente importante en una gran empresa, porque otro equipo del que necesita algo puede no tener los recursos.  Con el c√≥digo com√∫n, tiene la oportunidad de hacer parte del trabajo usted mismo y "ayudar a que suceda" los cambios que necesita. </li><li>  Existe la oportunidad de llevar a cabo una refactorizaci√≥n global.  No necesita admitir versiones antiguas de su API o biblioteca, puede cambiarlas y cambiar los lugares donde se usan en otros proyectos. </li><li>  el c√≥digo se vuelve menos "diverso".  Tiene un conjunto de formas de resolver problemas, y no es necesario agregar otra forma que haga lo mismo, pero con ligeras diferencias. </li><li>  en el proyecto a su lado, lo m√°s probable es que no haya bibliotecas y lenguajes absolutamente ex√≥ticos. </li></ul><br><p>  Tambi√©n debe entenderse que dicho modelo de desarrollo tiene desventajas que deben considerarse: </p><br><ul><li>  Un repositorio compartido requiere una infraestructura separada y espec√≠fica. </li><li>  la biblioteca que necesita puede no estar en el repositorio, pero est√° en c√≥digo abierto.  Hay costos para agregarlo y actualizarlo.  Muy dependiente del idioma y la biblioteca, en alg√∫n lugar casi gratis, en alg√∫n lugar muy costoso. </li><li>  necesita trabajar constantemente en la "salud" del c√≥digo.  Esto incluye al menos la lucha contra las dependencias innecesarias y el c√≥digo muerto. </li></ul><br><p>  Nuestro enfoque hacia un repositorio com√∫n impone reglas generales que todos deben seguir.  En el caso de utilizar un √∫nico repositorio, se imponen restricciones en los idiomas utilizados, las bibliotecas y los m√©todos de implementaci√≥n.  Pero en el proyecto vecino todo ser√° igual o muy similar al tuyo, e incluso puedes arreglar algo all√≠. </p><br><p>  El modelo de un repositorio com√∫n gravita en todas las grandes empresas.  El repositorio monol√≠tico es un tema amplio, bien estudiado y discutido, por lo que ahora no entraremos mucho en √©l.  Si desea saber m√°s, al final del art√≠culo encontrar√° varios enlaces √∫tiles que revelan este tema con m√°s detalle. </p><br><h3 id="usloviya-v-kotoryh-rabotaet-sistema-nepreryvnoy-integracii">  Condiciones en las que opera el sistema de integraci√≥n continua </h3><br><p>  El desarrollo se lleva a cabo de acuerdo con el modelo de desarrollo basado en Trunk.  La mayor√≠a de los usuarios trabajan con HEAD, o la copia m√°s reciente del repositorio, obtenida de la rama principal llamada troncal, en la que se est√° desarrollando.  La confirmaci√≥n de los cambios en el repositorio se realiza de forma secuencial.  Inmediatamente despu√©s de la confirmaci√≥n, el nuevo c√≥digo es visible y puede ser utilizado por todos los desarrolladores.  No se recomienda el desarrollo en ramas separadas, aunque las ramas se pueden usar para lanzamientos. </p><br><p>  Los proyectos dependen del c√≥digo fuente.  Los proyectos y las bibliotecas forman un gr√°fico de dependencia complejo.  Y esto significa que los cambios realizados en un proyecto afectan potencialmente al resto del repositorio. </p><br><p>  Una gran secuencia de confirmaciones va al repositorio: </p><br><ul><li>  M√°s de 2000 confirmaciones por d√≠a. </li><li>  hasta 10 cambios por minuto durante las horas pico. </li></ul><br><p>  La base de c√≥digo contiene m√°s de 500,000 objetivos de compilaci√≥n y pruebas. </p><br><p>  Sin un sistema especial de integraci√≥n continua en tales condiciones, ser√≠a muy dif√≠cil avanzar r√°pidamente. </p><br><h3 id="sistema-nepreryvnoy-integracii">  Sistema de integraci√≥n continua </h3><br><p>  El sistema de integraci√≥n continua lanza ensamblajes y pruebas para cada cambio: </p><br><ul><li>  Verificaciones preliminares.  Permiten verificar el c√≥digo antes de comprometerse y evitar romper las pruebas en el tronco.  Los ensamblajes y las pruebas se ejecutan encima de HEAD.  Por el momento, los controles previos a la auditor√≠a se inician voluntariamente.  Para proyectos cr√≠ticos, se requieren verificaciones previas a la auditor√≠a. </li><li>  Verificaciones posteriores a la confirmaci√≥n despu√©s de confirmar en el repositorio. </li></ul><br><p>  Las compilaciones y las pruebas se ejecutan en paralelo en grandes grupos de cientos de servidores.  Las compilaciones y las pruebas se ejecutan en diferentes plataformas.  Bajo la plataforma principal (Linux), todos los proyectos se ensamblan y todas las pruebas se ejecutan, bajo las otras plataformas, un subconjunto de las configurables por el usuario. </p><br><p>  Despu√©s de recibir y analizar los resultados de los ensamblajes y ejecutar las pruebas, el usuario recibe comentarios, por ejemplo, si los cambios rompen alguna prueba. </p><br><img src="https://habrastorage.org/webt/kr/7s/re/kr7srek9pwwq-88vz8b3orjmtqc.png"><br><br><p>  En caso de nuevas fallas de ensamblaje o pruebas, enviamos una notificaci√≥n a los propietarios de las pruebas y al autor de los cambios.  El sistema tambi√©n almacena y muestra los resultados de las comprobaciones en una interfaz especial.  La interfaz web del sistema de integraci√≥n muestra el progreso y el resultado de la prueba, desglosados ‚Äã‚Äãpor tipo de prueba.  La pantalla con los resultados del an√°lisis ahora puede verse as√≠: </p><br><img src="https://habrastorage.org/webt/c_/p-/p3/c_p-p3pb17bzgmefh0-su2gmrnc.png"><br><br><h3 id="osobennosti-i-vozmozhnosti-sistemy-nepreryvnoy-integracii">  Caracter√≠sticas y capacidades del sistema de integraci√≥n continua. </h3><br><p>  Resolviendo varios problemas que enfrentan los desarrolladores y probadores, desarrollamos nuestro sistema de integraci√≥n continua.  El sistema ya resuelve muchos problemas, pero queda mucho por mejorar. </p><br><h4 id="tipy-i-razmery-testov">  Tipos y tama√±os de pruebas. </h4><br><p>  Hay varios tipos de objetivos que puede activar un sistema de integraci√≥n continua: </p><br><ul><li>  configurar  La fase de configuraci√≥n realizada por el sistema de compilaci√≥n.  La configuraci√≥n incluye un an√°lisis de los archivos de configuraci√≥n del sistema de ensamblaje, determinando las dependencias entre los proyectos y los par√°metros del ensamblaje y ejecutando las pruebas. </li><li>  construir.  Montaje de bibliotecas y proyectos. </li><li>  estilo  En esta etapa, el estilo del c√≥digo coincide con los requisitos especificados. </li><li>  prueba  Las pruebas se dividen en etapas seg√∫n su tiempo de espera para el tiempo de trabajo y los requisitos para los recursos inform√°ticos. <br><ul><li>  peque√±o  &lt;1 min </li><li>  medio  &lt;10 min </li><li>  grande  &gt; 10 min  Adem√°s, puede haber requisitos especiales para los recursos inform√°ticos. </li><li>  extra grande  Este es un tipo especial de prueba.  Dichas pruebas se caracterizan por un conjunto de las siguientes caracter√≠sticas: un tiempo de funcionamiento prolongado, un gran consumo de recursos, una gran cantidad de datos de entrada, pueden requerir accesos especiales y, lo m√°s importante, soporte para los escenarios de prueba complejos que se describen a continuaci√≥n.  Hay menos pruebas de este tipo que otros tipos de pruebas, pero son muy importantes. </li></ul></li></ul><br><h4 id="chastota-zapuska-testov-i-binarnyy-poisk-polomok">  Pruebe la frecuencia de lanzamiento y la detecci√≥n de fallas binarias </h4><br><p>  Se asignan enormes recursos para pruebas en Yandex, cientos de servidores potentes.  Pero incluso con una gran cantidad de recursos, no podemos ejecutar todas las pruebas para cada cambio que los afecte.  Pero al mismo tiempo, es muy importante para nosotros ayudar siempre al desarrollador a localizar el lugar donde se rompe la prueba, especialmente en un repositorio tan grande. </p><br><p>  Que estamos haciendo  Para cada cambio para todos los proyectos afectados, se ejecutan ensamblajes, comprobaciones de estilo y pruebas con tama√±os peque√±os y medianos.  El resto de las pruebas se ejecutan no para cada confirmaci√≥n que influye, sino con cierta periodicidad, si hay confirmaciones que afectan las pruebas.  En algunos casos, los usuarios pueden controlar la frecuencia de inicio; en otros casos, el sistema establece la frecuencia de inicio.  Cuando se detecta una falla de prueba, comienza el proceso de b√∫squeda de una confirmaci√≥n de ruptura de prueba.  Cuanto menos se ejecute la prueba, m√°s tiempo buscaremos una confirmaci√≥n de ruptura despu√©s de detectar una falla. </p><br><img width="700" src="https://habrastorage.org/webt/1b/7r/hg/1b7rhgcpvzuuqnkue2cmn8yytam.png"><br><br><p>  Al iniciar las comprobaciones previas a la auditor√≠a, tambi√©n ejecutamos solo ensamblajes y pruebas ligeras.  Luego, el usuario puede iniciar manualmente el lanzamiento de pruebas pesadas seleccionando de la lista de pruebas afectadas por los cambios proporcionados por el sistema. </p><br><h4 id="obnaruzhenie-migayuschih-testov">  Detecci√≥n de prueba intermitente </h4><br><p>  Las pruebas intermitentes son pruebas cuyos resultados de ejecuci√≥n (Aprobado / Fallido) en el mismo c√≥digo pueden depender de varios factores.  Las causas de las pruebas de flasheo pueden ser diferentes: suspensi√≥n en el c√≥digo de prueba, errores al trabajar con subprocesos m√∫ltiples, problemas de infraestructura (falta de disponibilidad de cualquier sistema), etc.  Las pruebas intermitentes presentan un problema grave: </p><br><ul><li>  Conducen al hecho de que el sistema de integraci√≥n continua env√≠a alertas falsas sobre fallas en las pruebas. </li><li>  Contaminar los resultados de la prueba.  Cada vez es m√°s dif√≠cil decidir sobre el √©xito de los resultados de la verificaci√≥n. </li><li>  Retrasar lanzamientos de productos. </li><li>  Dif√≠cil de detectar.  Las pruebas pueden parpadear muy raramente. <br>  Los desarrolladores pueden ignorar las pruebas parpadeantes al analizar los resultados de las pruebas.  A veces incorrecto <br>  Es imposible eliminar por completo las pruebas de parpadeo, esto debe tenerse en cuenta en un sistema de integraci√≥n continua. </li></ul><br><p>  Actualmente, para cada prueba, ejecutamos todas las pruebas dos veces para detectar pruebas de flasheo.  Tambi√©n tomamos en cuenta las quejas de los usuarios (destinatarios de las notificaciones).  Si detectamos un parpadeo, marcamos la prueba con una bandera especial (silenciada) e informamos al propietario de la prueba.  Despu√©s de esto, solo los propietarios de las pruebas recibir√°n notificaciones de fallas en las pruebas.  A continuaci√≥n, continuamos ejecutando la prueba en modo normal, mientras analizamos el historial de sus lanzamientos.  Si la prueba no parpade√≥ en un per√≠odo de tiempo determinado, la automatizaci√≥n puede decidir que la prueba ha dejado de parpadear y puede borrar la bandera. </p><br><p>  Nuestro algoritmo actual es bastante simple y se planean muchas mejoras en este lugar.  En primer lugar, queremos usar se√±ales mucho m√°s √∫tiles. </p><br><h4 id="avtomaticheskoe-obnovlenie-vhodnyh-dannyh-testov">  Actualizaci√≥n autom√°tica de entrada de prueba </h4><br><p>  Cuando se prueban los sistemas Yandex m√°s complejos, adem√°s de otros m√©todos de prueba, a menudo se utilizan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pruebas de estrategia de caja negra</a> + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pruebas basadas en datos</a> .  Para garantizar una buena cobertura, tales pruebas requieren un gran conjunto de datos de entrada.  Los datos se pueden seleccionar de grupos de producci√≥n.  Pero hay un problema con el hecho de que los datos se vuelven obsoletos r√°pidamente.  El mundo no se detiene, nuestros sistemas est√°n en constante evoluci√≥n.  Los datos de prueba obsoletos a lo largo del tiempo no proporcionar√°n una buena cobertura de prueba, y luego conducir√°n completamente a un desglose de la prueba debido al hecho de que los programas comienzan a usar datos nuevos que no est√°n disponibles en los datos de prueba obsoletos. </p><br><p>  Para que los datos no queden desactualizados, el sistema de integraci√≥n continua puede actualizarlos autom√°ticamente.  Como funciona </p><br><ol><li>  Los datos de prueba se almacenan en un almacenamiento especial de recursos. </li><li>  La prueba contiene metadatos que describen la entrada requerida. </li><li>  La correspondencia entre la entrada de prueba requerida y los recursos se almacena en un sistema de integraci√≥n continua. </li><li>  El desarrollador proporciona la entrega regular de datos nuevos al almac√©n de recursos. </li><li>  El sistema de integraci√≥n continua busca nuevas versiones de datos de prueba en el repositorio de recursos y cambia los datos de entrada. </li></ol><br><p>  Es importante actualizar los datos para que no se realice la prueba falsa.  No puede simplemente tomar y, a partir de una determinada confirmaci√≥n, comenzar a usar nuevos datos, porque  En el caso de un desglose de la prueba, no estar√° claro qui√©n es el culpable: el compromiso o los nuevos datos.  Tambi√©n har√° que las pruebas de diferencias (descritas a continuaci√≥n) no funcionen. </p><br><img width="600" src="https://habrastorage.org/webt/yz/xq/ew/yzxqew6kgfu-irgksx-mbgejtz8.png"><br><p>  Por lo tanto, lo hacemos para que haya un peque√±o intervalo de confirmaciones, en el que la prueba se inicia tanto con la versi√≥n anterior como con la nueva de los datos de entrada. </p><br><img width="700" src="https://habrastorage.org/webt/r1/zr/j8/r1zrj8e-kxo8bmnd0evq6tgzktg.png"><br><br><h4 id="diff-testy">  Diferentes pruebas </h4><br><p>  Las pruebas de diferencia que llamamos un tipo especial de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pruebas basadas en datos</a> , que difieren del enfoque generalmente aceptado en que la prueba no tiene un resultado de referencia, pero al mismo tiempo necesitamos encontrar en qu√© confirmaciones la prueba cambi√≥ su comportamiento. </p><br><p>  El enfoque est√°ndar en las pruebas basadas en datos es el siguiente.  La prueba tiene un resultado de referencia obtenido cuando la prueba se ejecut√≥ por primera vez.  El resultado de referencia se puede almacenar en el repositorio al lado de la prueba.  Las ejecuciones posteriores de la prueba deber√≠an producir el mismo resultado. </p><br><img width="600" src="https://habrastorage.org/webt/gj/bq/gx/gjbqgx1rtrgb1lwxhih01ojki3k.png"><br><p>  Si el resultado difiere de la referencia, el desarrollador debe decidir si este cambio esperado o error.  Si se espera el cambio, el desarrollador debe actualizar el resultado de referencia al mismo tiempo que confirma los cambios en el repositorio. </p><br><p>  Existen dificultades al usar este enfoque en un repositorio grande con grandes flujos de confirmaci√≥n: </p><br><ol><li>  Puede haber muchas pruebas y las pruebas pueden ser muy dif√≠ciles.  El desarrollador no tiene la capacidad de ejecutar todas las pruebas afectadas en un entorno de trabajo. </li><li>  Despu√©s de realizar cambios, la prueba puede interrumpirse si el resultado de referencia no se actualiz√≥ simult√°neamente con los cambios en el c√≥digo.  Luego, otro desarrollador puede hacer cambios en el mismo componente y el resultado de la prueba cambiar√° nuevamente.  Obtenemos la imposici√≥n de un error sobre otro.  Es muy dif√≠cil lidiar con tales problemas, lleva tiempo de los desarrolladores. </li></ol><br><p>  Que estamos haciendo  Las pruebas de diferencias constan de 2 partes: </p><br><ul><li>  Comprobar componente. <br><ul><li>  Comenzamos la prueba y guardamos el resultado en el almacenamiento de recursos. </li><li>  No compare el resultado con la referencia. </li><li>  Podemos detectar algunos de los errores, por ejemplo, el programa no se inicia / no finaliza, se bloquea, el programa no responde.  La validaci√≥n del resultado tambi√©n se puede realizar: la presencia de cualquier campo en la respuesta, etc. </li></ul></li><li>  Componente diferencial. <br><ul><li>  Compare los resultados obtenidos en diferentes lanzamientos y compile diff.  En el caso m√°s simple, esta es una funci√≥n que toma 2 par√°metros y devuelve diff. </li><li>  La apariencia de diff depende de la prueba, pero deber√≠a ser algo comprensible para alguien que lo vea.  diff    html . </li></ul></li></ul><br><p>  check  diff     . </p><br><img width="600" src="https://habrastorage.org/webt/jp/g2/2z/jpg22zjvje4rqvytyy8-qlrf-yo.png"><br><br><p>      diff,        .         diff     ,   :  diff  (     )   / ""  . </p><br><h3 id="prodolzhenie-sleduet">  Para continuar </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>    ,     . </p><br><h3 id="ssylki">  Referencias </h3><br><p>  , Trunk-based development </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Monorepo ‚Äî Wikipedia</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://trunkbaseddevelopment.com</a> </li></ul><br><p> Data-driven testing </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Data-driven testing ‚Äî Wikipedia</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es428972/">https://habr.com/ru/post/es428972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es428954/index.html">C√≥mo nos disparamos en la pierna y tratamos de averiguar qu√© es exactamente</a></li>
<li><a href="../es428956/index.html">Drones en la ISS</a></li>
<li><a href="../es428960/index.html">Informe del Club de Roma 2018, Cap√≠tulo 1.5: Desaf√≠o clim√°tico</a></li>
<li><a href="../es428962/index.html">Reubicaci√≥n en Luxoft: como queda la vida</a></li>
<li><a href="../es428964/index.html">Las vulnerabilidades de SSD cifradas por hardware permiten a los atacantes eludir f√°cilmente las medidas de protecci√≥n</a></li>
<li><a href="../es428974/index.html">Interesante en Interlight 2018</a></li>
<li><a href="../es428976/index.html">Hormiguero o fortaleza? Estoy construyendo una casa por el precio de un apartamento. Parte 2: calentamiento</a></li>
<li><a href="../es428980/index.html">JavaScript Offline Broker</a></li>
<li><a href="../es428982/index.html">C√≥mo escribir D en ARM</a></li>
<li><a href="../es428984/index.html">Julia y retratos de fase de sistemas din√°micos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>