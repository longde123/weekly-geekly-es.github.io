<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏇🏽 🚆 🔘 Smart Home - Sprachsteuerung in drei Schritten. Himbeere + HomeKit 🚝 😰 👎🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sehr geehrte Freunde! 

 Wir haben uns entschlossen, Ihnen eine vorgefertigte Lösung für Ihr Budget zur Verfügung zu stellen. Wir hoffen, Sie werden u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Smart Home - Sprachsteuerung in drei Schritten. Himbeere + HomeKit</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476540/">  Sehr geehrte Freunde! <br><br>  Wir haben uns entschlossen, Ihnen eine vorgefertigte Lösung für Ihr Budget zur Verfügung zu stellen. Wir hoffen, Sie werden unsere Bemühungen zu schätzen wissen.  Die Lösung hat sich bewährt und funktioniert.  Im Anhang können Sie alle Programmdateien und Einstellungen herunterladen.  Wir geben alles kostenlos. <br><br>  Ein Smart Home für den Kunden ist im Grunde ein „Spielzeug“, mit dem Sie Ihren Freunden prahlen können, aber diese Spiele sind die kleinen Anstrengungen der Integratoren nicht wert! <br><br>  Es geht um einige Probleme und Lösungen, die speziell mit der Beleuchtung im Haus als integraler Bestandteil des „Smart Home“ zusammenhängen. <br><br>  <b>Problem 1:</b> Wenn das System zentralisiert ist, kann das Programm bei einem Ausfall der Zentralsteuerung das Einschaltrelais nicht steuern. <br><br>  <b>Lösung</b> : Verwenden Sie dezentrale Steuerungsmodule mit interner Logik. Nach unserer Erfahrung ist das von OWEN hergestellte programmierbare Relais PR200 eines der bewährten Geräte.  Wir empfehlen die Verwendung von Version 220v, as  Haushaltsschalter sind speziell für diese Spannung ausgelegt und es treten weniger Probleme mit der logischen "Einheit" am Digitaleingang auf. <br><br><img src="https://sun9-34.userapi.com/c858324/v858324590/e2770/z4ovfGWcOog.jpg" alt="Bild"><br><br>  Dieses Gerät verfügt über 8 Kanäle (Relais), die mit interner Logik (als verteiltes System) programmiert werden können. Zusätzlich sind 2 Erweiterungsmodule angeschlossen.  Je 8 Kanäle, aber es besteht die Gefahr, dass bei einem Ausfall des PR200 (8 Kanäle gegenüber 24) keine weiteren gesteuerten Leuchten mehr vorhanden sind. Wenn Sie sparen möchten, denken Sie nach! <br><br><img src="https://sun9-24.userapi.com/c858324/v858324590/e2781/5Bbfamak_2o.jpg" alt="Bild"><br><br>  Trotz der Tatsache, dass das Programm einfach aussieht, haben wir es ohne eigenes Verschulden mehrere Jahre lang verwendet. Die Firma Aries hat kürzlich (nach dem Erscheinen von PR200) ​​die Möglichkeit hinzugefügt, eine Netzwerkvariable sowohl von außen als auch von innen zu verwalten. <br><a name="habracut"></a><br>  Mehr zum Programm: <br><br>  I8 ist ein digitaler Eingang mit 8 Schaltern in einem Haus oder Raum <br><br>  RTRIG - Frontdetektor, der zur Bildung eines einzigen Impulses (pro Programmzyklus) erforderlich ist <br><br>  TO INT - Auf die Konvertierung von Bool nach INT konnte verzichtet werden, die Slave-Netzwerkvariable in Owen Logic unterstützt Bool jedoch nicht. <br><br>  XOR - exklusiv oder, wenn an einem Eingang 1, dann an Ausgang 1, wenn an beiden Eingängen 1 Ausgang anliegt, wird das Hauptprogrammelement zurückgesetzt, das entscheidet, das Licht durch Drücken des Schalters ein- oder auszuschalten. <br><br>  Relais8 ist eine Eingangs- und Ausgangs-Netzwerkvariable. Wie ich bereits sagte, können wir diese beiden Variablen mit einem Modbus-Register (Adresse) verwenden. Auf diese Weise können wir den erforderlichen Status sowohl außen als auch innen speichern, ohne unterschiedliche Trigger zu verwenden.  Diese Netzwerkvariablen haben einen nichtflüchtigen Speicher. Wenn die Spannung springt, kehrt die Beleuchtung in den letzten Zustand zurück. <br><br>  TO BOOL - Wandelt INT in BOOL um, da das Ausgangsrelais den Status False / True hat. <br><br>  <b>Schritt 1</b> : Das Programm für 8 Kanäle kann über den Link am Ende des Artikels heruntergeladen und in ein programmierbares Relais heruntergeladen werden. Vergessen Sie nicht, die Zielplattform für Ihre Version von PR200 / 110 zu ändern, da das Gerät sonst nicht blinkt. <br><br>  <b>Problem 2:</b> Standard-Haushaltsschalter haben den Zustand ein- oder ausgeschaltet, was grundsätzlich der Logik der Lichtsteuerung in einem Smart House widerspricht, wir brauchen Knöpfe ohne Befestigung (mit Federn). <br><br>  <b>Lösung 1:</b> Verwenden Sie vorgefertigte Tasten ohne Fixierung, die für die meisten Schalterhersteller wie Shneider, Biticino, ABB usw. erhältlich sind. <br><br>  <b>Lösung 2:</b> Fangen Sie in PR200 / 110 eine Änderung des Eingangszustands ein, wenn Sie einen typischen Haushaltsschalter mit einem Latch verwenden, und senden Sie dann einen Impuls an das oben heruntergeladene Programm. Wenn das Licht an war, erlischt es und umgekehrt (nicht empfehlenswert, da nach einer Weile alle Tasten ausgehen gemischt auf und ab) <br><br>  <b>Problem 3: Das</b> obere Niveau der meisten Hersteller von Smart-Home-Systemen erreicht keine ästhetische und funktionale Perfektion. <br><br>  Lösung: Wir verwenden das HomeKit von Apple, das funktional, praktisch und sprachgesteuert ist. <br><br>  <b>Schritt 2:</b> PR200 / 110 mit HomeKit andocken <br><br>  Dazu werden folgende Tools benötigt: <br><br>  Empfohlene Lösung für Demos: <br><br>  Raspberry Pi 2/3/4 und dazu USB RS485 Konverter (zB mit Alliexpress) <br><br><img src="https://sun9-44.userapi.com/c858324/v858324590/e283a/4-udUu3_Ycg.jpg" alt="Bild"><br><br>  Die empfohlene Lösung für Installationen auf der Basis des Raspberry CM3 + Moduls im Industriedesign mit 2 integrierten RS485-Ports: <br><br><img src="https://antexcloud.ru/wp-content/uploads/AntexGate-.jpg" alt="Bild"><br><br>  Schließen Sie Ihr Raspberry-basiertes Gerät vorzugsweise mit einem Patchkabel und nicht über WLAN an das Strom- und Heimnetzwerk an. <br><br>  Verbinden Sie den RS485-Anschluss Ihres Geräts mit dem PR200 / 110. <br><br>  Bestimmen Sie als Nächstes die IP-Adresse, die Ihr Router ausgegeben hat, und stellen Sie eine Verbindung über SSh her, z. B. über das Programm PUTTY (der Benutzername lautet standardmäßig pi password raspberry). <br><br>  Installieren Sie die knotenrote Software zum Andocken des HomeKit-Protokolls auf der oberen Ebene und von Modbus Rtu auf der unteren Ebene (siehe Installationsanweisungen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier)</a> . <br><br>  Vergessen Sie nicht, Ihren Node-Red-Dienst für den Start zu aktivieren. <br><br>  Installieren Sie das HomeKit- und das Modbus-Paket für Node-Red <br><br><pre><code class="plaintext hljs">cd ~/.node-red npm install node-red-contrib-homekit npm install node-red-contrib-modbus sudo reboot</code> </pre> <br>  Wir warten auf den Neustart und rufen den Browser "YOUR IP" auf: 1880 (zum Beispiel 192.168.1.110:1880) <br><br>  Wir kopieren den nächsten Stream (den Code am Ende des Artikels) und fügen die Node-Red Rules-Engine in die Weboberfläche ein <br><br>  Gehen Sie zu Menü -&gt; Importieren -&gt; Stream-Code einfügen <br><br><img src="https://sun9-62.userapi.com/c858324/v858324590/e27d5/gX_NP9Tcut0.jpg" alt="Bild"><br><br><img src="https://sun9-62.userapi.com/c858324/v858324590/e27dc/sW2lIvuLXFk.jpg" alt="Bild"><br><br><img src="https://sun9-14.userapi.com/c858324/v858324590/e27ed/2YlXvhSyAvE.jpg" alt="Bild"><br><br>  Sie müssen den Stream anwenden, indem Sie auf die Schaltfläche Bereitstellen klicken <br><br>  Im Fehlerfall empfehlen wir Ihnen, den RS485-Port in den Modbus-Einstellungen der Plugins "Modbas Request" und "Write Reset FC6" (Beispiel / dev / ttyUSB0) korrekt anzugeben. <br><br>  Starten Sie zur Authentifizierung Ihr SSH-Gerät à sudo neu <br><br>  <b>Schritt 3</b>  Das Einrichten der Anwendung auf Ihrem Apple-Gerät ist ganz einfach. <br><br><img src="https://sun9-11.userapi.com/c858324/v858324590/e281c/tWFcJA_7AW8.jpg" alt="Bild"><br><br>  Geben Sie unserem Haus nach Belieben einen Namen, in unserem Beispiel PR200 <br><br><img src="https://sun9-25.userapi.com/c858324/v858324590/e2868/21MYun_Ww10.jpg" alt="Bild"><br><br>  Fügen Sie hinzu und stimmen Sie der Verwendung eines nicht zertifizierten Zubehörs zu <br><br><img src="https://sun9-50.userapi.com/c858324/v858324590/e286f/N0JIhEZyKY8.jpg" alt="Bild"><br><br>  Wir geben den Zugangscode ein, in unserem Fall 111 11 111, der in den Node-Red-Einstellungen in jedem HomeKit-Zubehör ersetzt werden kann <br><br><img src="https://sun9-18.userapi.com/c858324/v858324590/e2880/Yx0gxJ739i8.jpg" alt="Bild"><br><br>  Wir fügen alle unsere Lampen in die Räume ein, dies kann später erfolgen. <br><br>  Wir wünschen Ihnen eine angenehme Nutzung eines so günstigen, aber sehr komfortablen Systems. <br><br>  Achtung: <br><br>  Wir rühren die kommerzielle Nutzung des HomeKit-Protokolls nicht an, der Entwickler ergreift gegen die APPLE-Lizenzvereinbarung verstoßende Maßnahmen für die Nutzung des HomeKit-Protokolls! <br><br>  Das Programm für ARIES PR200 und das Skript für NodeRed können hier kostenlos heruntergeladen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">werden</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de476540/">https://habr.com/ru/post/de476540/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de476526/index.html">Slurm Basic in Moskau. Erster Tag. Eine Salve von SocaCola, das Mikrofon wurde dem Moderator weggenommen und die Unterstützung wartet</a></li>
<li><a href="../de476528/index.html">Software-Architekt Neuer Kurs von OTUS</a></li>
<li><a href="../de476532/index.html">Grundlegende UI / UX-Muster</a></li>
<li><a href="../de476534/index.html">Wie man ein effektives Management Accounting aufbaut und Superprofits erzielt</a></li>
<li><a href="../de476538/index.html">Verteilungsprotokolle für asymmetrische kryptografische Schlüssel: Denning - Sacco, DASS, Wu Lama</a></li>
<li><a href="../de476546/index.html">Cloud WebRTC Streaming bei DigitalOcean</a></li>
<li><a href="../de476548/index.html">Was haben Overclocking und Downsizing gemeinsam?</a></li>
<li><a href="../de476550/index.html">Slurm Basic in Moskau. Zweiter Tag Mizaru, Kikazaru, Iwazaru und der technische Support sind immer im Einsatz</a></li>
<li><a href="../de476554/index.html">Cloud-basiertes WebRTC-Streaming auf DigitalOcean</a></li>
<li><a href="../de476556/index.html">Erzählung und "Dungeons": Wie kann ein Game Designer Orte mit einer Handlung verknüpfen?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>