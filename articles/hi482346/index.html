<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯХУ ЁЯдЦ ЁЯдШ ASP.NET MVC - ADO.NET рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ MySQL рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ ЁЯС┤ЁЯП╗ ЁЯОй ЁЯд▓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╡рд┐рд░рд╛рд╕рдд рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА  рдЪреЗрддрд╛рд╡рдиреА: ASP.NET MVC рджреЛрдиреЛрдВ рдкрджрд╛рд╡рдирдд рд╣реИрдВ рдФрд░ ADO.NET рднреАред рдЖрдзреБрдирд┐рдХ ORM рдХреЗ рд╕рд╛рде ASP.NET рдХреЛрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред рд▓реЗрдХрд┐рди рдЕрдЧрд░...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ASP.NET MVC - ADO.NET рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ MySQL рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482346/"><div class="spoiler">  <b class="spoiler_title">рд╡рд┐рд░рд╛рд╕рдд рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХреА</b> <div class="spoiler_text">  <b>рдЪреЗрддрд╛рд╡рдиреА: ASP.NET MVC рджреЛрдиреЛрдВ рдкрджрд╛рд╡рдирдд рд╣реИрдВ рдФрд░ ADO.NET рднреАред</b>  <b>рдЖрдзреБрдирд┐рдХ ORM рдХреЗ рд╕рд╛рде ASP.NET рдХреЛрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред</b>  <b>рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдЖрдк рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рддреЛ рдкрдврд╝реЗрдВред</b> <br></div></div><br>  рдкрд╣рд▓реЗ рд╕реЗ рд╣реА, рд╢рд╛рдпрдж, рддреАрди рдмрд╛рд░ рдореИрдВ ASP.NET MVC рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реВрдВред  ASP.NET WebForms рдХреЗ рд╕рд╛рде рджрд╕ рд╡рд░реНрд╖реЛрдВ рдХреЗ рдмрд╛рдж, MVC рддрдХрдиреАрдХ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдирд╛ рдереЛрдбрд╝рд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдЕрдВрддрд░ рд╣реИрдВ рдЬреЛ рдпрд╣ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ рдХрд┐ рдЗрди рддрдХрдиреАрдХреЛрдВ рдореЗрдВ рдХреНрдпрд╛ рд╕рдорд╛рдирддрд╛ рд╣реИ - .NET рдлреНрд░реЗрдорд╡рд░реНрдХ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЛ рдЫреЛрдбрд╝рдХрд░ред  рдореИрдВ рдпрд╣рд╛рдВ рдирд╣реАрдВ рд▓рд┐рдЦреВрдВрдЧрд╛ - рдПрдорд╡реАрд╕реА рд╡реЗрдмрдлрд╛рд░реНрдо рд╕реЗ рдмреЗрд╣рддрд░ рдпрд╛ рдмрджрддрд░ рд╣реИ, рд╡реЗ рджреЛрдиреЛрдВ рдЕрдЪреНрдЫреЗ рд╣реИрдВ, рдФрд░ рдЖрдк рджреЛрдиреЛрдВ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХрд┐рдпреЛрдВ рдкрд░ рдПрдХ рдЕрдЪреНрдЫрд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдореИрдВ рдЕрдкрдиреЗ рд╕рд╛рде рдЯреАрдбреАрдбреА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдкрд░ рднреА рдЕрдкрдиреЗ рд╡рд┐рдЪрд╛рд░ рдЫреЛрдбрд╝рддрд╛ рд╣реВрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдореЗрд░реЗ рдкрд╛рд╕ рд╣реИред <br><br>  рдФрд░ рдЕрдм рдореИрдВ рд╕рдмрд╕реЗ рдорд╛рдирдХ рдХрд╛рд░реНрдп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛ - рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рд╕рд╛рдорд╛рдиреНрдп рдХрд╛рд░реНрдп: рд╕рд╛рд░рдгреАрдмрджреНрдз рд░реВрдк рдореЗрдВ рд░рд┐рдХреЙрд░реНрдб рдХрд░рдирд╛, рдбреЗрдЯрд╛ рдЬреЛрдбрд╝рдирд╛ (рдЬреЛрдбрд╝рдирд╛ рдФрд░ рдмрджрд▓рдирд╛) рдХреА рд╕реВрдЪреАред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рд▓рдЧрднрдЧ рд╕рднреА рдкреБрд╕реНрддрдХреЛрдВ рдФрд░ ASP.NET MVC рдХреЗ рд▓рд┐рдП рдХрдИ рдЗрдВрдЯрд░рдиреЗрдЯ рд╕рдорд╛рдзрд╛рдиреЛрдВ рдореЗрдВ, рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ, рд╡рд┐рдХрд▓реНрдк рдХреЛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ ORM (рдСрдмреНрдЬреЗрдХреНрдЯ рд░рд┐рд▓реЗрд╢рди рдореИрдкрд┐рдВрдЧ) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ: SQL рдХреЗ рд▓рд┐рдП рдПрдВрдЯрд┐рдЯреА рдлреНрд░реЗрдорд╡рд░реНрдХ (EF) рдпрд╛ LINQред  рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХрд┐рдпрд╛рдВ рдЙрддреНрдХреГрд╖реНрдЯ рд╣реИрдВ, рдЗрд╕рдореЗрдВ рдХреЛрдИ рд╕рдВрджреЗрд╣ рдирд╣реАрдВ рд╣реИ, рдЕрдВрдд рдореЗрдВ, рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рд╕рдордЭ рдирд╣реАрдВ рд╕рдХрддрд╛ рд╣реИ - рд▓реЗрдХрд┐рди рдпрд╣ рдХреИрд╕реЗ рд╕рдВрдмрдВрдзрдкрд░рдХ рдбреАрдмреАрдПрдордПрд╕ (рдЬреЛ рд╡рд╣ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ) рдЖрдорддреМрд░ рдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдПрд╕рдХреНрдпреВрдПрд▓, рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдЕрдм рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИ: рдИрдПрдл рдХреЗ рд░реВрдк рдореЗрдВ рдмрд┐рдЫрд╛рдиреЗ DBMS рдХреЗ рд▓рд┐рдП рдХрдиреЗрдХреНрдЯрд░ рдПрдХ рджреВрд╕рд░реЗ рдХреЛ рд╕рдордЭреЗрдВрдЧреЗред  "рдпрд╣рд╛рдБ рдпрд╣ рдЦреБрд╢реА рд╣реИ - рдЗрд╕рдХреЗ рд▓рд┐рдП рдФрд░ рдЕрдзрд┐рдХ рд╕реМрдВрджрд░реНрдп рдирд╣реАрдВ рд╣реИред"  рд▓реЗрдХрд┐рди рдЙрди рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рд▓рд┐рдП рдЬреЛ ADO.NET рддрдВрддреНрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реАрдзреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рд╕реЗ рдбрд░рддреЗ рдирд╣реАрдВ рд╣реИрдВ, рдпрд╣ рдЕрдХреНрд╕рд░ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ - рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ ASP.NET MVC рдХреЗ рд╕рд╛рде рдХрд╣рд╛рдВ рд╢реБрд░реВ рдХрд░рдирд╛ рд╣реИ рдФрд░ рдХреНрдпрд╛ рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИред <br><a name="habracut"></a><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореЗрд░реЗ рд▓рд┐рдП, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╢реБрд░реБрдЖрдд рдореЗрдВ рдпрд╣ рдЧреНрд░рд┐рдб рдЯреЗрдмрд▓ рдореЗрдВ рдбреЗрдЯрд╛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдШрдЯрдХ рдХреА рдХрдореА рдкрд░ рдЬрдВрдЧрд▓реА рдЯреВрдЯрдиреЗ рдХрд╛ рдХрд╛рд░рдг рдмрдирд╛ред  рдпрд╣ рд╕рдордЭрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдбреЗрд╡рд▓рдкрд░ рдХреЛ рд╕реНрд╡рдпрдВ рдпрд╣ рд╕рдм рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдпрд╛ рдкреИрдХреЗрдЬ рдкреНрд░рдмрдВрдзрдХ рд╕реЗ рдХреБрдЫ рдЙрдкрдпреБрдХреНрдд рд▓реЗрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдпрджрд┐ рдЖрдк, рдореЗрд░реА рддрд░рд╣, ASP.NET WebForms рдореЗрдВ GridView рдШрдЯрдХ рд╕реЗ рдЕрдзрд┐рдХ рдЦреБрд╢ рдереЗ, рддреЛ MVC рдХреЗ рд▓рд┐рдП, Grid.mvc рдХреЛ рдЫреЛрдбрд╝рдХрд░, рдХреБрдЫ рдЕрдзрд┐рдХ рдпрд╛ рдХрдо рддреБрд▓рдиреАрдп рдЦреЛрдЬрдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИред  рд▓реЗрдХрд┐рди рдРрд╕реЗ рдШрдЯрдХреЛрдВ рдореЗрдВ рдореЗрд░рд╛ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдкрд░реНрдпрд╛рдкреНрдд рд░реВрдк рд╕реЗ рдмрдбрд╝реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИред  рдпрджрд┐ рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХрд┐рд╕реА рдЕрдиреНрдп рдбреЗрд╡рд▓рдкрд░ рдкрд░ рдирд┐рд░реНрднрд░ рд╣реЛрдирд╛ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рдХрд┐ рдЗрд╕ рдШрдЯрдХ рдХреЛ рдХреИрд╕реЗ рд▓рд┐рдЦрдирд╛ рд╣реИ (рдХреНрдпрд╛ рдпрд╣ рдЧреБрдгрд╛рддреНрдордХ рд╣реИ?), рдФрд░ рджреВрд╕рд░реА рдмрд╛рдд, рдпрд╣ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЗрд╕реЗ рдХрдм рдФрд░ рдХреИрд╕реЗ рдЕрдВрддрд┐рдо рд░реВрдк рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдпрд╣ рдХрднреА-рдХрднреА рдШрдЯрдХ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рд╕рдВрднрд╡ рд▓рдЧрддрд╛ рд╣реИ рдФрд░ рдЖрдЧреЗ рджреЗрдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди, рдЕрдЧрд░ рдбреЗрд╡рд▓рдкрд░ рдЗрд╕реЗ рдкреВрд░рд╛ рдХрд░рддрд╛ рд╣реИ, рддреЛ рд╣рдореЗрдВ рдЕрдкрдиреЗ рдХреЛрдб рдХреЛ рдлрд┐рд░ рд╕реЗ рдЦреЛрджрдиреЗ рдпрд╛ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдШрдЯрдХ рдЕрдкрдбреЗрдЯ рдХреЛ рдлреНрд░реАрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдФрд░ рдЕрдЧрд░ рдбреЗрд╡рд▓рдкрд░ рдПрдХ рднреЗрджреНрдпрддрд╛ рдХреЛ рдареАрдХ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдЕрднреА рднреА рдирдП рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ MySQL рдХрдиреЗрдХреНрдЯрд░ рдХреЗ рдирдП рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдВрдХреНрд░рдордг рдХреБрдЫ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рдХрд╛рд░рдг рдмрдирддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рдЕрднреА рднреА рдПрдХ рдмрдбрд╝реА рдХрдВрдкрдиреА рджреНрд╡рд╛рд░рд╛ рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдиреБрдЧреЗрдЯ рдкреИрдХреЗрдЬ рдореИрдиреЗрдЬрд░ рдореЗрдВ рдХрдИ "рдмрд╛рдЗрдХ" рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛ рд╣реИ? <br><br>  рдЗрд╕рд▓рд┐рдП, MySQL DBMS рджреНрд╡рд╛рд░рд╛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдП рдЧрдП рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╣реБрдП, ASP.NET MVC рдХреЗ рддрд╣рдд рд▓рд┐рдЦрдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдЬрд╛рдирдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВред  <a href="https://yadi.sk/d/EArrZdGh_iVaJg" rel="nofollow">рдЗрд╕ рдкрддреЗ</a> рдкрд░ рд╕рднреА рдХреЛрдб рдпрд╣рд╛рдВ рд▓рд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдиреАрдЪреЗ рдЗрд╕ рдХреЛрдб рдХреЛ рдЫреЛрдЯреЗ рд▓рд┐рдВрдХ рдФрд░ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдХреЗ рд╕рд╛рде рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдФрд░ <a href="https://example-mvc.azurewebsites.net/" rel="nofollow">рдпрд╣рд╛рдВ</a> рдЖрдк рдПрдкреНрд▓рд┐рдХреЗрд╢рди рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред <br><br><h2>  MySQL рдореЗрдВ рдПрдХ рдбреЗрдЯрд╛рдмреЗрд╕ рдмрдирд╛рдПрдБ </h2><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SCHEMA</span></span> <span class="hljs-string"><span class="hljs-string">`example`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">USE</span></span> <span class="hljs-string"><span class="hljs-string">`example`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`users`</span></span> ( <span class="hljs-string"><span class="hljs-string">`UserID`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT, <span class="hljs-string"><span class="hljs-string">`SupporterTier`</span></span> enum(<span class="hljs-string"><span class="hljs-string">'None'</span></span>,<span class="hljs-string"><span class="hljs-string">'Silver'</span></span>,<span class="hljs-string"><span class="hljs-string">'Gold'</span></span>,<span class="hljs-string"><span class="hljs-string">'Platinum'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'None'</span></span>, <span class="hljs-string"><span class="hljs-string">`Loginname`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`LanguageID`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'2'</span></span>, <span class="hljs-string"><span class="hljs-string">`Email`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`LastLoginDate`</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`UserID`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`i_Loginname`</span></span> (<span class="hljs-string"><span class="hljs-string">`Loginname`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`i_Language_idx`</span></span> (<span class="hljs-string"><span class="hljs-string">`LanguageID`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> <span class="hljs-string"><span class="hljs-string">`i_Language`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FOREIGN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`LanguageID`</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">REFERENCES</span></span> <span class="hljs-string"><span class="hljs-string">`languages`</span></span> (<span class="hljs-string"><span class="hljs-string">`LanguageID`</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span> AUTO_INCREMENT=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`languages`</span></span> ( <span class="hljs-string"><span class="hljs-string">`LanguageID`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT, <span class="hljs-string"><span class="hljs-string">`LanguageName`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">`Culture`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`LanguageID`</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">InnoDB</span></span> AUTO_INCREMENT=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8;</code> </pre> <br>  рдбреЗрдЯрд╛рдмреЗрд╕ (DB) рд╕рд░рд▓ рдФрд░ рдХреЗрд╡рд▓ рджреЛ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рджрд░реНрд╢рд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬрд┐рдирдХреЗ рд╕рд╛рде <code>LanguageID</code> рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдЙрдирдХреЗ рдмреАрдЪ рдПрдХ-рд╕реЗ-рдХрдИ рд╕рдВрдмрдВрдз рд╣реЛрдВрдЧреЗред  рдЗрд╕ рддрд░рд╣ рдореИрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рдЪреБрдирдиреЗ рдХреЗ рд▓рд┐рдП рдбреНрд░реЙрдк-рдбрд╛рдЙрди рд╕реВрдЪреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рд▓рд┐рдП рд╕реНрдерд┐рддрд┐ рдХреЛ рдЬрдЯрд┐рд▓ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣рд╛ рд╣реВрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЬрдЯрд┐рд▓рддрд╛ рдХреЗ рд▓рд┐рдП, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП, рд╣рдо <code>SupporterTier</code> рдХреНрд╖реЗрддреНрд░ рднреА рдкреЗрд╢ рдХрд░реЗрдВрдЧреЗ, рдЬреЛ рдПрдирдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдорд░реНрдерди рдХреЗ рд╕реНрддрд░ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдЧрд╛ред  рдФрд░ рд╣рдорд╛рд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рд▓рдЧрднрдЧ рд╕рднреА рдбреЗрдЯрд╛ рдкреНрд░рдХрд╛рд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо тАЬрджрд┐рдирд╛рдВрдХ / рд╕рдордптАЭ рдкреНрд░рдХрд╛рд░ рдХреЗ <code>LastLoginDate</code> рдлрд╝реАрд▓реНрдб рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рд▓реЙрдЧ рдЗрди рдирд╣реАрдВ рдХрд┐рдП рдЬрд╛рдиреЗ рдкрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рджреНрд╡рд╛рд░рд╛ рд╣реА рднрд░рд╛ рдЬрд╛рдПрдЧрд╛ред <br><br><h2>  рдПрдХ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ </h2><br><img src="https://habrastorage.org/webt/sm/4a/07/sm4a07w8etetdgvtnkhd5i-wjcu.png"><br><br>  "MVC" рдЪреБрдиреЗрдВред  "рдЦрд╛рд▓реА" рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдкреНрд░рд╢рд┐рдХреНрд╖рдг рд╣реИ, рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрд╣ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдЗрд╢рд╛рд░реЛрдВ рдХреЗ рдмрд┐рдирд╛, рддреБрд░рдВрдд рдорджрдж рдХрд░реЗрдЧрд╛, рдмреВрдЯрд╕реНрдЯреНрд░реИрдк рдФрд░ JQuery рдХреЛ рд╣рдорд╛рд░реЗ рдЖрд╡реЗрджрди рдореЗрдВ рдПрдХреАрдХреГрдд рдХрд░реЗрдЧрд╛ред <br><br><img src="https://habrastorage.org/webt/lg/yv/rn/lgyvrneaxmudgq9mx1ijk36jjqs.png"><br><br>  рд╣рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рднрд░реЗ рд╣реБрдП <i>рдХрдВрдЯреЗрдВрдЯ</i> , <i>рдлреЛрдВрдЯ</i> , <i>рд▓рд┐рдкрд┐рдпреЛрдВ рдХреЗ</i> рдлреЛрд▓реНрдбрд░, рд╕рд╛рде рд╣реА рд╕рд╛рде ASP.NET MVC рдмрдВрдбрд▓реЛрдВ рдФрд░ рдлрд┐рд▓реНрдЯрд░ рдкрдВрдЬреАрдХрд░рдгреЛрдВ рдХреЗ рд╕рд╛рде <i>App_Start</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ <i>FilesConfig.cs</i> рдФрд░ <i>FilterConfig.cs рдлрд╛рдЗрд▓реЗрдВ</i> <i>рднрд░реА рд╣реБрдИ рд╣реИрдВ</i> ред  рдХрд┐рд╕реА рд░рд┐рдХреНрдд рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ, <i>рд░реВрдЯрдХреЙрдиреНрдлрд╝рд┐рдЧ.рдПрдХреНрд╕</i> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХреЗрд╡рд▓ рдорд╛рд░реНрдЧреЛрдВ рдХрд╛ рдкрдВрдЬреАрдХрд░рдг <i>рд╣реЛрддрд╛</i> рд╣реИред  <i>Global.asax.cs рдореЗрдВ,</i> рдЗрди рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╡рд┐рдзрд┐ рдХреЙрд▓ рдХреЛ рднреА рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛: <br><br><pre> <code class="cpp hljs">FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters); RouteConfig.RegisterRoutes(RouteTable.Routes); BundleConfig.RegisterBundles(BundleTable.Bundles);</code> </pre> <br><h2>  рд╣рдордиреЗ рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдФрд░ рдкреВрд░реЗ рдмрдВрдбрд▓ рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреА </h2><br>  MySQL DBMS рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <i>MySql.Data</i> рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЬреЛрдбрд╝реЗрдВ: рдпрд╛ рддреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ, рдЕрдЧрд░ <b>mysql-рдХрдиреЗрдХреНрдЯрд░-net-8.0.18 рдХрдиреЗрдХреНрдЯрд░</b> рдкрд╣рд▓реЗ <b>рд╕реЗ</b> рд╣реА рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рд╣реИ, рдпрд╛ Nuget рдкреИрдХреЗрдЬ рдореИрдиреЗрдЬрд░ рд╕реЗ: <br><br><img src="https://habrastorage.org/webt/mk/b_/fh/mkb_fhxg6d8kx2pdnrithceoaf4.png"><br><br>  рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ <i>Web.config</i> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ MySQL DBMS рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="cpp hljs">&lt;connectionStrings&gt; &lt;add name=<span class="hljs-string"><span class="hljs-string">"example"</span></span> providerName=<span class="hljs-string"><span class="hljs-string">"MySql.Data.MySqlClient"</span></span> connectionString=<span class="hljs-string"><span class="hljs-string">"server=localhost;Port=3306;user id=develop;Password=develop;persistsecurityinfo=True;database=example;CharSet=utf8;SslMode=none"</span></span> /&gt; &lt;/connectionStrings&gt;</code> </pre> <br>  рдЬреЛрдбрд╝реЗ рдЧрдП рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд▓рд┐рдВрдХ рдХреЗ рд╕рд╛рде <code>&lt;appSettings&gt;</code> рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдПрдХ рдкрдВрдХреНрддрд┐ рдЬреЛрдбрд╝реЗрдВ: <code>&lt;add key="ConnectionString" value="example" /&gt;</code> <br>  рд╣рдо рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдПрдХ рдирдИ <i>рдбреЛрдореЗрди</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рдЗрд╕рдореЗрдВ рд╣рдо рдПрдХ рдирдпрд╛ рд╕реНрдЯреИрдЯрд┐рдХ <code>Base</code> рдХреНрд▓рд╛рд╕ ( <i>рдмреЗрд╕.рдПрд╕рд╕реА</i> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ) <i>рдмрдирд╛рддреЗ рд╣реИрдВ</i> , рдЬрд┐рд╕рдореЗрдВ рд╣рдо рдЗрди рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдПрдХреНрд╕реЗрд╕ рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> ConnectionString { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> System.Configuration.ConfigurationManager.AppSettings[<span class="hljs-string"><span class="hljs-string">"ConnectionString"</span></span>]; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> strConnect { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> System.Configuration.ConfigurationManager.ConnectionStrings[ConnectionString].ConnectionString; } } }</code> </pre> <br>  рдореИрдВ рдЖрд╡реЗрджрди рдорд╛рдкрджрдВрдбреЛрдВ рдФрд░ рдХреБрдЫ рдорд╛рдирдХ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдВрдХ рдХреЗ рд╕рд╛рде рдЖрд╡реЗрджрди рдореЗрдВ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЖрдзрд╛рд░ рд╡рд░реНрдЧ рд╣реЛрдирд╛ рдкрд╕рдВрдж рдХрд░рддрд╛ рд╣реВрдВ рдЬрд┐рд╕реЗ рдкреВрд░реЗ рдЖрд╡реЗрджрди рд╕реЗ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br>  рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХрд╛ рдирд╛рдо рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддрд╛рдХрд┐ рднрд╡рд┐рд╖реНрдп рдореЗрдВ DBMS рдХреЗ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реЛ рдЬрд╛рдП: рдЬрд▓реНрджреА рд╕реЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдмреАрдЪ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ рдФрд░ рдХрдиреЗрдХреНрд╢рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдмрджрд▓реЗрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, Microsoft Azure рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкреИрд░рд╛рдореАрдЯрд░ рдореЗрдВ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдирд╛рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ - рд╡рд╣рд╛рдВ рдЖрдк рдЙрд╕ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдкреИрд░рд╛рдореАрдЯрд░ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдкреНрд░рдХрд╛рд╢рди рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЗрд╕рдореЗрдВ рд╡рд╛рдВрдЫрд┐рдд рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ <code>&lt;connectionStrings&gt;</code> рдореЗрдВ рдкреВрд░реНрд╡рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╣реИред  рдлрд┐рд░, рдЬрдм рдкреНрд░рдХрд╛рд╢рди, рдЖрдк <i>web.config рдлрд╝рд╛рдЗрд▓</i> рдХреЗ рдкрд░рд┐рд╡рд░реНрддрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред <br><br>  рдореБрдЭреЗ рдкрд╛рда рдореЗрдВ рд╡реИрд╢реНрд╡рд┐рдХ рд╕рдВрд╕рд╛рдзрди рдлрд╝рд╛рдЗрд▓ рд╕реЗ рдорд╛рдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдкрд╕рдВрдж рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдЙрдиреНрд╣реЗрдВ рдХрдИ рд╕реНрдерд╛рдиреЛрдВ рдкрд░ рдЕрдзрд┐рд▓реЗрдЦрд┐рдд рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: <br><br><img src="https://habrastorage.org/webt/rc/8u/qz/rc8uqzdrz9hvnd-y7swirgoh4tm.png"><br><br>  рдкреГрд╖реНрда рд▓реЗрдЖрдЙрдЯ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ <i>_Layout.cshtml</i> (рдпрд╣ рдорд╛рдирдХ рд░реВрдк рд╕реЗ <i>рджреГрд╢реНрдп \ рд╕рд╛рдЭрд╛</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИ рдФрд░ рдмрд╛рдж рдореЗрдВ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд╕рднреА рдкреГрд╖реНрдареЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ), рдЕрдм рдЖрдк рдЗрди рдЪрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>Example_Users.Properties.Resources.Title</code> рджреЗрдЦреЗрдВред <code>Example_Users.Properties.Resources.Title</code> ): <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Content-Type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/html; charset=utf-8"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width, initial-scale=1.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>@ViewBag.Title тАУ @Example_Users.Properties.Resources.Title<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> @Styles.Render("~/Content/css") @Scripts.Render("~/bundles/modernizr") <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container body-content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"page-header"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/"</span></span></span><span class="hljs-tag">&gt;</span></span>@Example_Users.Properties.Resources.Title<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> @RenderBody() <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> @DateTime.Now.Year тАУ @Example_Users.Properties.Resources.Author<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> @Scripts.Render("~/bundles/jquery") @Scripts.Render("~/bundles/bootstrap") @RenderSection("scripts", required: false) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдЗрд╕ рдлрд╛рдЗрд▓ рдореЗрдВ рд╣рдореЗрдВ рдХрдиреЗрдХреНрдЯреЗрдб рдмреВрдЯрд╕реНрдЯреНрд░реИрдк рдФрд░ JQuery рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреА рдХреИрд╕реНрдХреЗрдбрд┐рдВрдЧ рд╕реНрдЯрд╛рдЗрд▓ рд╢реАрдЯ рдХрд╛ рд▓рдЧрд╛рд╡ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИред  рдХреЙрд▓ <code>RenderBody()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕реНрдерд╛рди рдкрд░ рд╕рднреА рджреГрд╢реНрдпреЛрдВ рдХреА рд╕рд╛рдордЧреНрд░реА рдЙрддреНрдкрдиреНрди рдХреА рдЬрд╛рдПрдЧреАред <br><br><h2>  рдПрдо рдХрд╛ рдорддрд▓рдм рдореЙрдбрд▓ рд╣реИ </h2><br>  <i>рдбреЛрдореЗрди</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдлрд╝рд╛рдЗрд▓ <i>UserClass.cs</i> рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="cpp hljs">[DisplayName(<span class="hljs-string"><span class="hljs-string">"User"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserClass</span></span></span><span class="hljs-class"> {</span></span> [Key] [HiddenInput(DisplayValue=<span class="hljs-literal"><span class="hljs-literal">false</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> UserID { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [Required(ErrorMessage=<span class="hljs-string"><span class="hljs-string">"Please enter a login name"</span></span>)] [Display(Name = <span class="hljs-string"><span class="hljs-string">"Login"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> Loginname { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> LanguageClass Language { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [EmailAddress(ErrorMessage = <span class="hljs-string"><span class="hljs-string">"Please enter a valid email"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> Email { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [UIHint(<span class="hljs-string"><span class="hljs-string">"Enum"</span></span>)] [EnumDataType(typeof(Supporter))] [Required(ErrorMessage = <span class="hljs-string"><span class="hljs-string">"Please select supporter tier"</span></span>)] [Display(Name = <span class="hljs-string"><span class="hljs-string">"Supporter"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Supporter SupporterTier { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [HiddenInput(DisplayValue = <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] [ScaffoldColumn(<span class="hljs-literal"><span class="hljs-literal">false</span></span>)] [Display(Name = <span class="hljs-string"><span class="hljs-string">"Last login"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime? LastLoginDate { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [HiddenInput(DisplayValue = <span class="hljs-literal"><span class="hljs-literal">false</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsLastLogin { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> LastLoginDate != null &amp;&amp; LastLoginDate &gt; DateTime.MinValue; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> UserID, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Loginname, LanguageClass Language, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Email, DateTime? LastLoginDate, Supporter SupporterTier)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.UserID = UserID; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Loginname = Loginname; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Language = Language; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Email = Email; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.LastLoginDate = LastLoginDate; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SupporterTier = SupporterTier; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> Supporter { [Display(Name=<span class="hljs-string"><span class="hljs-string">""</span></span>)] None = <span class="hljs-number"><span class="hljs-number">1</span></span>, Silver = <span class="hljs-number"><span class="hljs-number">2</span></span>, Gold = <span class="hljs-number"><span class="hljs-number">3</span></span>, Platinum = <span class="hljs-number"><span class="hljs-number">4</span></span> }</code> </pre> <br>  рдФрд░ рдЙрд╕реА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ <i>LanguageClass.cs</i> рдлрд╝рд╛рдЗрд▓ рднреА: <br><pre> <code class="cpp hljs">[DisplayName(<span class="hljs-string"><span class="hljs-string">"Language"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LanguageClass</span></span></span><span class="hljs-class"> {</span></span> [Key] [HiddenInput(DisplayValue = <span class="hljs-literal"><span class="hljs-literal">false</span></span>)] [Required(ErrorMessage = <span class="hljs-string"><span class="hljs-string">"Please select a language"</span></span>)] [Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue, ErrorMessage = <span class="hljs-string"><span class="hljs-string">"Please select a language"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LanguageID { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } [Display(Name = <span class="hljs-string"><span class="hljs-string">"Language"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> LanguageName { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LanguageClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LanguageClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> LanguageID, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> LanguageName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.LanguageID = LanguageID; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.LanguageName = LanguageName; } }</code> </pre> <br>  рдпрд╣рд╛рдВ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рдЧреБрдг DBMS рдореЗрдВ <code>Users</code> рдФрд░ <code>Languages</code> рддрд╛рд▓рд┐рдХрд╛ рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рджреЛрд╣рд░рд╛рддреЗ рд╣реИрдВред  рдЧрдгрди рдкреНрд░рдХрд╛рд░ рдХреЗ рд▓рд┐рдП рдПрдХ <code>enum Supporter</code> рдмрдирд╛рдпрд╛ <code>enum Supporter</code> рддрд╛рдХрд┐ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдбреЗрдЯрд╛рдмреЗрд╕ рдЯреЗрдмрд▓ рдореЗрдВ рдПрдХ рд╕рдорд╛рди рдХреНрд╖реЗрддреНрд░ рдХреЗ <code>SupporterTier</code> рд╡рд░реНрдЧ рдХреА рд╕рдВрдкрддреНрддрд┐ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред  <code>UserID</code> , <code>LanguageID</code> рдлрд╝реАрд▓реНрдб рдХреЗ рд▓рд┐рдП, рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╡реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреА рддрд░рд╣ рд╣реА рдкреНрд░рд╛рдердорд┐рдХ рдХреБрдВрдЬреА рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╣реИрдВред  <code>[Key]</code> рд╡рд┐рд╢реЗрд╖рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЗрд╕рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЕрдиреНрдп рд╕рднреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ рдЗрд╕ рд╡рд░реНрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╡рд┐рдЪрд╛рд░реЛрдВ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИрдВред  рдФрд░ рдЕрдЧрд░ рд╣рдо рдЗрди рдЧреБрдгреЛрдВ рдХреЗ рд▓рд┐рдП HTML рдЯреИрдЧ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╣рд╛рдпрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ (рдЬреЛ рдореИрдВ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рд╕реБрдЭрд╛рдКрдВрдЧрд╛), рддреЛ рд╣рдореЗрдВ рдЙрди рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рдмрд╣реБрдд рд╕рд╛рд╡рдзрд╛рдиреА рд╕реЗ рд╕реЗрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдЬреЛ рд╣рдореЗрдВ рдЪрд╛рд╣рд┐рдПред  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рдпрд╣рд╛рдБ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рдЖрд╡рд╢реНрдпрдХ рдерд╛: <br><br><ul><li>  <b><code>[DisplayName]</code></b> - рдХрдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рджрд░реНрд╢рди рдирд╛рдо рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдХрднреА-рдХрднреА рдпрд╣ рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдореИрдВрдиреЗ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд▓рд┐рдП <code>Html.DisplayNameForModel</code> рд╕рд╣рд╛рдпрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдЬреЛрдбрд╝рд╛ред </li><li>  <code>Name</code> рд╕рдВрдкрддреНрддрд┐ рдХреЗ рд╕рд╛рде <b><code>[Display]</code></b> - рд╕реНрдХреНрд░реАрди рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╡рд░реНрдЧ рд╕рдВрдкрддреНрддрд┐ рдХреЗ рдирд╛рдо рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдПрдХ рдЙрдкрдпреЛрдЧреА рдСрд░реНрдбрд░ рдкреНрд░реЙрдкрд░реНрдЯреА рднреА рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рд╕рд╣рд╛рдпрдХ рдХреЗ рд░реВрдк рдореЗрдВ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдЬрд┐рд╕ рдХреНрд░рдо рдореЗрдВ рдХреНрд▓рд╛рд╕ рдкреНрд░реЙрдкрд░реНрдЯреАрдЬрд╝ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдСрд░реНрдбрд░ рдкреНрд░реЙрдкрд░реНрдЯреА рдХрд╛ рдЗрд╕ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдХреНрд▓рд╛рд╕ рдЧреБрдгреЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдСрд░реНрдбрд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </li><li>  <b><code>[HiddenInput]</code></b> <code>DisplayValue</code> рд╕рдВрдкрддреНрддрд┐ рдХреЗ рд╕рд╛рдеред  рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЙрди рд╕рдВрдкрддреНрддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рдиреНрд╣реЗрдВ рдпрд╛ рддреЛ рд╕рднреА рд░реВрдкреЛрдВ рдФрд░ рд╕реВрдЪрд┐рдпреЛрдВ рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ ( <code>DisplayValue=false</code> , <code>hidden</code> рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рд╛рде <code>input</code> рдЯреИрдЧ рдХреЗ рд░реВрдк рдореЗрдВ рддреИрдпрд╛рд░ рдХреА рдЬрд╛рддреА рд╣реИрдВ), рдпрд╛ рдЙрди рдЧреБрдгреЛрдВ рдХреЗ рд▓рд┐рдП рдЬрд┐рдиреНрд╣реЗрдВ рдЕрднреА рднреА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдкрд░рд┐рд╡рд░реНрддрдиреАрдп рдкрд╛рда ( <code>DisplayValue=true</code> , рддреИрдпрд╛рд░ рдХреА рдЧрдИ рд╣реИред рд╕реНрд╡рдЪреНрдЫ рдкрд╛рда рдХреА рддрд░рд╣, рдЯреИрдЧ рдХреЗ рдмрд┐рдирд╛) </li><li>  <b><code>[ScaffoldColumn]</code></b> - рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╕рдВрдкрд╛рджрди <code>Html.EditorForModel</code> рдореЗрдВ рдлрд╝реАрд▓реНрдб рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдирд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>Html.EditorForModel</code> )ред  рдпрджрд┐ <code>false</code> , рддреЛ рди рддреЛ рд╡рд░реНрдЧ рд╕рдВрдкрддреНрддрд┐ рдХрд╛ рд╡рд┐рд╡рд░рдг рдФрд░ рди рд╣реА рдЗрд╕рдХреЗ рдореВрд▓реНрдп рдХреЛ рдлреЙрд░реНрдо рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  <code>[HiddenInput(DisplayValue = false)]</code> рдЙрдкрдпреЛрдЧ <code>[HiddenInput(DisplayValue = false)]</code> рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ <code>[HiddenInput(DisplayValue = false)]</code> , рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдЗрд╕ рд╡рд░реНрдЧ рдХреА рд╕рдВрдкрддреНрддрд┐ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рди рдХреЗрд╡рд▓ рд╕реВрдЪрдирд╛ рдЗрдирдкреБрдЯ рд░реВрдкреЛрдВ рдореЗрдВ, рдмрд▓реНрдХрд┐ рдЯреЗрдмрд▓ рдбрд┐рд╕реНрдкреНрд▓реЗ рдореЗрдВ рднреА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, <code>LastLoginDate</code> рд╕рдВрдкрддреНрддрд┐ рдХреЗ рд▓рд┐рдП рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рдерд╛, рдЬрд┐рд╕реЗ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рджрд░реНрдЬ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдХрд╣реАрдВ рди рдХрд╣реАрдВ рднрд░рд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдореЗрдВ рдЕрднреА рднреА рдЗрд╕реЗ рджреЗрдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </li><li>  <b><code>[Required]</code></b> - рдпрд╣ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдХреНрдпрд╛ рдХреЛрдИ рдХреНрд▓рд╛рд╕ рдкреНрд░реЙрдкрд░реНрдЯреА рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдореВрд▓реНрдп рджрд░реНрдЬ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдПрд░рд░ <code>AllowEmptyStrings</code> рдкреНрд░реЙрдкрд░реНрдЯреА рдореЗрдВ рдПрд░рд░ рдореИрд╕реЗрдЬ рдЯреЗрдХреНрд╕реНрдЯ рдФрд░ <code>AllowEmptyStrings</code> рдкреНрд░реЙрдкрд░реНрдЯреА <code>AllowEmptyStrings</code> рдЖрдкрдХреЛ рд░рд┐рдХреНрдд рд▓рд╛рдЗрдиреЛрдВ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </li><li>  <b><code>[EmailAddress]</code></b> - рдбрд╛рдХ рдкрддреЗ рдХреА рд╢реБрджреНрдзрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХреЗ рд▓рд┐рдП рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ рдПрдХ рд╣реА рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИред </li></ul><br>  рдбреЗрдЯрд╛рдмреЗрд╕ рдореЙрдбрд▓ рдХреА рдХрдХреНрд╖рд╛рдПрдВ рддреИрдпрд╛рд░ рд╣реИрдВ, рд╣рдо рдЕрднреНрдпрд╛рд╡реЗрджрди рдХреА рдУрд░ рд░реБрдЦ рдХрд░рддреЗ рд╣реИрдВ (рдЕрднреНрдпрд╛рд╡реЗрджрди рдХреЗ рд▓рд┐рдП рдореЙрдбрд▓реЛрдВ рдХреЗ рд╡рд░реНрдЧ рдиреАрдЪреЗ рд╡рд░реНрдгрд┐рдд рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗ)ред <br><br><h2>  рд╡реА - рдХрд╛ рдЕрд░реНрде рд╣реИ <s>рдкреНрд░рддрд┐рд╢реЛрдз</s> рдкреНрд░рджрд░реНрд╢рди </h2><br>  <i>рджреГрд╢реНрдп</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ, рд╣рдорд╛рд░реЗ рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП <i>рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдмрдирд╛рдПрдВред  рд╣рдорд╛рд░реЗ рд╕рднреА рджреГрд╢реНрдп рдорд╛рдирдХ ( <i>рджреГрд╢реНрдп</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ <i>_ViewStart.cshtml</i> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд) рдХрд╛ <i>рдЙрдкрдпреЛрдЧ</i> рдХрд░рддреЗ рд╣реИрдВ, <i>рджреГрд╢реНрдп \ рд╕рд╛рдЭрд╛</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╕реНрдерд┐рдд <i>_Layout.cshtml</i> рд▓реЗрдЖрдЙрдЯред  рдПрдХ <code>Index</code> рджреГрд╢реНрдп ( <i>рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ <i>Index.cshtml</i> рдлрд╝рд╛рдЗрд▓) рдмрдирд╛рдПрдБ: <br><br><img src="https://habrastorage.org/webt/jh/es/jn/jhesjnicwj2g1acx7yziv4f6wqy.png"><br><br>  рдФрд░ рдХреЛрдб рд▓рд┐рдЦреЗрдВ: <br><br><pre> <code class="xml hljs">@model Example_Users.Models.UsersGrid @{ ViewBag.Title = "Users page"; } @using (@Html.BeginForm()) { <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span>Users list:<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> @if (TempData["message"] != null) {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-success"</span></span></span><span class="hljs-tag">&gt;</span></span>@TempData["message"]<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>} @if (TempData["error"] != null) {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-warning"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"alert"</span></span></span><span class="hljs-tag">&gt;</span></span>ERROR:<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> @TempData["error"]<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>} @Html.Partial("List") <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onNewUser"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"New user"</span></span></span><span class="hljs-tag"> /&gt;</span></span> @*@Html.ActionLink("New user", "New", "Users")*@ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> }</code> </pre> <br>  рдпрджрд┐ рд╣рдо рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рджреГрд╢реНрдп рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдкреНрд░рд╛рд░рдВрдн рд╣реЛ, рддреЛ <i>рдорд╛рд░реНрдЧ</i> рдореЗрдВ <code>Default</code> рд╕реЗ рдПрдХ рдмрджрд▓рд╛рд╡ рдХрд░реЗрдВ <i>редConfig.cs</i> рдлрд╝рд╛рдЗрд▓: <br><br><pre> <code class="cpp hljs">routes.MapRoute(name: <span class="hljs-string"><span class="hljs-string">"Default"</span></span>, url: <span class="hljs-string"><span class="hljs-string">"{controller}/{action}/{id}"</span></span>, defaults: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { controller = <span class="hljs-string"><span class="hljs-string">"Users"</span></span>, action = <span class="hljs-string"><span class="hljs-string">"Index"</span></span>, id = UrlParameter.Optional });</code> </pre> <br>  рджреГрд╢реНрдп рдореЗрдВ рд╣реА, рдЖрдкрдХреЛ <code>Html.Partial("List")</code> рд╕рд╛рде рд▓рд╛рдЗрди рдкрд░ рдзреНрдпрд╛рди рджреЗрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЗрд╕ рдЬрдЧрд╣ рдХреЛ <i>рджрд░реНрд╢рд╛рдиреЗ рдХреЗ</i> рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЕрд▓рдЧ рд╕рд╛рдорд╛рдиреНрдп рдЖрдВрд╢рд┐рдХ рджреГрд╢реНрдп <i>рд╡реНрдпреВ.рд╢рд░реНрдб рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА</i> рдореЗрдВ <i>рд▓рд┐рд╕реНрдЯ.рд╕реА.рдЯреАрдЯреАрдПрдордПрд▓</i> рдлрд╛рдЗрд▓ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реЛред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдпрд╣ рд╣рдорд╛рд░реЗ <code>users</code> рдбреЗрдЯрд╛рдмреЗрд╕ рддрд╛рд▓рд┐рдХрд╛ рд╕реЗ рдбреЗрдЯрд╛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЧреНрд░рд┐рдб рддрд╛рд▓рд┐рдХрд╛ рд╣реИ: <br><br><pre> <code class="xml hljs">@model Example_Users.Models.UsersGrid @using Example_Users.Domain <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"table-responsive"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"table table-bordered table-hover"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().Loginname).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().Loginname).ToString()))) @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().Loginname).ToString()) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().Language.LanguageName).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().Language).ToString()))) @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().Language).ToString()) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().Email).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().Email).ToString()))) @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().Email).ToString()) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().SupporterTier).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().SupporterTier).ToString()))) @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().SupporterTier).ToString()) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.ActionLink(Html.DisplayNameFor(m =&gt; Model.Users.First().LastLoginDate).ToString(), "Index", Request.QueryString.ToRouteValueDictionary("sortOrder", Model.SortingInfo.NewOrder(Html.NameFor(m =&gt; Model.Users.First().LastLoginDate).ToString()))) @Html.SortIdentifier(Model.SortingInfo.currentSort, Html.NameFor(m =&gt; Model.Users.First().LastLoginDate).ToString()) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> @foreach (var item in Model.Users) { <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.ActionLink(item.Loginname, "Edit", "Users", new { UserID = item.UserID }, null)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.DisplayFor(modelitem =&gt; item.Language.LanguageName)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>@Html.DisplayFor(modelitem =&gt; item.Email)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@Html.DisplayFor(modelitem =&gt; item.SupporterTier)"</span></span></span><span class="hljs-tag">&gt;</span></span>@if (item.SupporterTier != Supporter.None) {@Html.DisplayFor(modelitem =&gt; item.SupporterTier);}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>@if (item.IsLastLogin) {@Html.DisplayFor(modelitem =&gt; item.LastLoginDate)}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> } <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> @if (Model.PagingInfo.totalPages &gt; 1) { <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pagination"</span></span></span><span class="hljs-tag">&gt;</span></span> @Html.PageLinks(Model.PagingInfo, x =&gt; Url.Action("Index", new { page = x, sortOrder = Model.SortingInfo.currentSort })) <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> }</code> </pre> <br>  рдпрд╣ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдбреЗрдЯрд╛ рдЯреЗрдмрд▓ рдХреЗ рд╣реЗрдбрд░ рдореЗрдВ, рд╕реНрддрдВрднреЛрдВ рдХреЗ рдирд╛рдо рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>Html.DisplayNameFor</code> рдХрд╛ <code>Html.DisplayNameFor</code> рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдХреНрд▓рд╛рд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреА рд╕рдВрдкрддреНрддрд┐ рдХрд╛ рд╕рдВрджрд░реНрдн рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдЪреВрдВрдХрд┐ рдЯреЗрдмрд▓ рдЯрд╛рдЗрдЯрд▓ рдмрдирд╛рддреЗ рд╕рдордп рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХреЗрд╡рд▓ рдПрдХ <code>Model.Users</code> рдСрдмреНрдЬреЗрдХреНрдЯ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдХрд┐ <code>UserClass</code> рдХреЗ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреА рд╕реВрдЪреА рд╣реИ, рд╣рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛: <code>UserClass</code> рд╡рд░реНрдЧ рдХреЗ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдЗрд╕ рд╕реВрдЪреА рдХреА рдкрд╣рд▓реА рдкрдВрдХреНрддрд┐ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдХреЗ рд▓рд┐рдП: <code>Model.Users.First().Loginname</code> ред  рдЪреВрдВрдХрд┐ <code>Users</code> рд╡рд░реНрдЧ рдХреА <code>Loginname</code> рд╡рд┐рд╢реЗрд╖рддрд╛ рдореЗрдВ <code>[Display(Name = "Login")]</code> рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИ, рдпрд╣ рдХреЙрд▓рдо рдирд╛рдо рдореЗрдВ "рд▓реЙрдЧрд┐рди" рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: <br><br><img src="https://habrastorage.org/webt/hv/kf/dv/hvkfdvojevmzacuid51wurye8ik.png"><br><br>  <code>List</code> рджреГрд╢реНрдп рдореЗрдВ рдФрд░ рдХреНрдпрд╛ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИ?  <code>UserClass</code> рдмреНрд▓реЙрдХ, рдЬрд╝рд╛рд╣рд┐рд░ рд╣реИ, <code>Users</code> рд╡рд░реНрдЧ рдХреА рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдирд┐рдпрдВрддреНрд░рдХ рд╕реЗ рдкреНрд░рд╛рдкреНрдд <code>Users</code> рд╕реВрдЪреА рдореЗрдВ рд╣реИрдВред  рдФрд░ рд╣рдорд╛рд░реЗ <code>UsersGrid</code> рдореЙрдбрд▓ рдореЗрдВ <code>SortingInfo</code> рдФрд░ <code>PagingInfo</code> рдпрд╣рд╛рдВ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИрдВред  рдФрд░ рд╣рдореЗрдВ рдЗрди рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдбреЗрдЯрд╛ рд╕реЙрд░реНрдЯрд┐рдВрдЧ (рддрд╛рд▓рд┐рдХрд╛ рд╢реАрд░реНрд╖рдХ рдореЗрдВ рдкреНрд░рдпреБрдХреНрдд <code>&lt;th&gt;</code> рдЯреИрдЧреНрд╕) рдореЗрдВ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдФрд░ рд╕реВрдЪрдирд╛ рдХреЗ рдкреГрд╖реНрдард╛рдВрдХрди (рдкреЗрдЬ рдХреЗ рдиреАрдЪреЗ, рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рдиреАрдЪреЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ) рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЗрд╕реАрд▓рд┐рдП рд╣рдо рдореЙрдбрд▓ рдХреЗ рд░реВрдк рдореЗрдВ <code>IEnumerable&lt;UserClass&gt;</code> рдкреНрд░рдХрд╛рд░ рдХреА рд╡рд╕реНрддреБрдУрдВ рдХреА рд╢реБрджреНрдз рд╕реВрдЪреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред  рдФрд░ рдПрдХ рдореЙрдбрд▓ рдХреЗ рд░реВрдк рдореЗрдВ, рд╣рдо <code>UsersGrid</code> рд╡рд░реНрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ <i>ModelGrid.cs</i> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ <i>рдореЙрдбрд▓</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИред <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UsersGrid</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IEnumerable&lt;UserClass&gt; Users { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PagingInfo PagingInfo { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> SortingInfo SortingInfo { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } }</code> </pre> <br>  рдФрд░ <code>PagingInfo</code> рдФрд░ <code>SortingInfo</code> рдЦреБрдж рдХреЛ рдЙрд╕реА рд╕реНрдерд╛рди рдкрд░ <code>GridInfo.cs</code> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ <code>GridInfo.cs</code> рдХрд░рддрд╛ рд╣реИред <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PagingInfo</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">//     public int totalItems { get; set; } //     public int itemsPerPage { get; set; } //   public int currentPage { get; set; } //         public int showPages { get; set; } //   public int totalPages { get { return (int)Math.Ceiling((decimal)totalItems / itemsPerPage); } } //           public int pagesSide { get { return (int)Math.Truncate((decimal)showPages / 2); } } } public class SortingInfo { //  ,     public string currentOrder { get; set; } //   public SortDirection currentDirection { get; set; } //      public string currentSort { get { return currentDirection != SortDirection.Descending ? currentOrder : currentOrder + "_desc"; } } //       (      -   ) public string NewOrder(string columnName) { return columnName == currentOrder &amp;&amp; currentDirection != SortDirection.Descending ? columnName + "_desc" : columnName; } }</span></span></code> </pre> <br>  рдФрд░ рд╡рд┐рдЪрд╛рд░реЛрдВ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП, рд╡рд┐рд╢реЗрд╖ рд╕рд╣рд╛рдпрдХреЛрдВ рдХреЛ <i>GridHelpers.cs</i> рдлрд╝рд╛рдЗрд▓ ( <i>HtmlHelpers</i> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛) рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GridHelpers</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">//     1 ... 3 4 5 ... Last public static MvcHtmlString PageLinks(this HtmlHelper html, PagingInfo pagingInfo, Func&lt;int, string&gt; pageUrl) { StringBuilder result = new StringBuilder(); if (pagingInfo.currentPage &gt; pagingInfo.pagesSide + 1) {//   TagBuilder li = new TagBuilder("li"); li.AddCssClass("page-item"); TagBuilder tag = new TagBuilder("a"); tag.MergeAttribute("href", pageUrl(1)); tag.InnerHtml = "1"; li.InnerHtml = tag.ToString(); result.Append(li.ToString()); } int page1 = pagingInfo.currentPage - pagingInfo.pagesSide; int page2 = pagingInfo.currentPage + pagingInfo.pagesSide; if (page1 &lt; 1) { page2 = page2 - page1 + 1; page1 = 1; } if (page2 &gt; pagingInfo.totalPages) page2 = pagingInfo.totalPages; if (page1 &gt; 2) {// ... TagBuilder li = new TagBuilder("li"); li.AddCssClass("page-item"); TagBuilder tag = new TagBuilder("span"); tag.InnerHtml = "..."; tag.AddCssClass("page-item"); tag.AddCssClass("disabled"); li.InnerHtml = tag.ToString(); result.Append(li.ToString()); } for (int i = page1; i &lt;= page2; i++) {//  TagBuilder li = new TagBuilder("li"); li.AddCssClass("page-item"); if (i == pagingInfo.currentPage) li.AddCssClass("active"); TagBuilder tag = new TagBuilder("a"); tag.AddCssClass("page-link"); tag.MergeAttribute("href", pageUrl(i)); tag.InnerHtml = i.ToString(); li.InnerHtml = tag.ToString(); result.Append(li.ToString()); } if (page2 &lt; pagingInfo.totalPages) {// ...    TagBuilder li = new TagBuilder("li"); li.AddCssClass("page-item"); TagBuilder tag = new TagBuilder("span"); tag.InnerHtml = "..."; tag.AddCssClass("page-item"); tag.AddCssClass("disabled"); li.InnerHtml = tag.ToString(); result.Append(li.ToString()); li = new TagBuilder("li"); li.AddCssClass("page-item"); tag = new TagBuilder("a"); tag.MergeAttribute("href", pageUrl(pagingInfo.totalPages)); tag.InnerHtml = pagingInfo.totalPages.ToString(); li.InnerHtml = tag.ToString(); result.Append(li.ToString()); } return MvcHtmlString.Create(result.ToString()); } public static IHtmlString SortIdentifier(this HtmlHelper htmlHelper, string sortOrder, string field) { if (string.IsNullOrEmpty(sortOrder) || (sortOrder.Trim() != field &amp;&amp; sortOrder.Replace("_desc", "").Trim() != field)) return null; string glyph = "glyphicon glyphicon-chevron-up"; if (sortOrder.ToLower().Contains("desc")) { glyph = "glyphicon glyphicon-chevron-down"; } var span = new TagBuilder("span"); span.Attributes["class"] = glyph; return MvcHtmlString.Create(span.ToString()); } public static RouteValueDictionary ToRouteValueDictionary(this NameValueCollection collection, string newKey, string newValue) { var routeValueDictionary = new RouteValueDictionary(); foreach (var key in collection.AllKeys) { if (key == null) continue; if (routeValueDictionary.ContainsKey(key)) routeValueDictionary.Remove(key); routeValueDictionary.Add(key, collection[key]); } if (string.IsNullOrEmpty(newValue)) { routeValueDictionary.Remove(newKey); } else { if (routeValueDictionary.ContainsKey(newKey)) routeValueDictionary.Remove(newKey); routeValueDictionary.Add(newKey, newValue); } return routeValueDictionary; } }</span></span></code> </pre> <br>  рдЪреВрдВрдХрд┐ рдмрд┐рдирд╛ рд╕реВрдЪрдирд╛ рдЫрд╛рдВрдЯреЗ рдФрд░ рдмрд┐рдирд╛ рд╕реВрдЪрдирд╛ рдХреЗ рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рдЧреНрд░рд┐рдб рдПрдХ рдмреЗрдХрд╛рд░ рдЪреАрдЬ рд╣реИ, рдФрд░ ASP.NET MVC рдореЗрдВ рд╕рдВрдкреВрд░реНрдг рдбреЗрдЯрд╛ рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдорд╛рдирдХ рд╕рд╣рд╛рдпрдХ рдирд╣реАрдВ рд╣реИ, рдЖрдкрдХреЛ рдЗрд╕реЗ рд╕реНрд╡рдпрдВ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ (рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдПрдХ рд▓реЗрдирд╛ рд╣реЛрдЧрд╛)ред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдореИрдВрдиреЗ ASP.NET MVC рдкреБрд╕реНрддрдХреЛрдВ рдФрд░ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдкреНрд░рд╕реНрддреБрдд рд╕рдорд╛рдзрд╛рдиреЛрдВ рдореЗрдВ рдХрдИ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреА рдЬрд╛рд╕реВрд╕реА рдХреАред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ, рд╕рдорд╛рдзрд╛рди рдЬреЛ рдХрдо рд╕реЗ рдХрдо рдбреЗрдЯрд╛ рд╕реЙрд░реНрдЯрд┐рдВрдЧ рдФрд░ рдкреЗрдЬрд┐рдВрдЧ рдХреЛ рдорд┐рд▓рд╛рддреЗ рд╣реИрдВ, рдпрд╛ рддреЛ рдмрд┐рд▓реНрдХреБрд▓ рдирд╣реАрдВ рд╣реИрдВ, рдпрд╛ рдореБрдЭреЗ рдирд╣реАрдВ рдорд┐рд▓рд╛ред  рдореБрдЭреЗ рдЗрд╕ рдкреВрд░реА рдмрд╛рдд рдХреЛ рд╕рдордЭрдирд╛ рдерд╛, рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ рдЬреЛрдбрд╝рдирд╛ рдФрд░ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ рдерд╛ред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрди рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрдиреЛрдВ рдореЗрдВ рдкреГрд╖реНрдард╛рдВрдХрди рдЕрдХреНрд╕рд░ рдкреГрд╖реНрдареЛрдВ рдХреА рдЕрдзрд┐рдХ рдпрд╛ рдХрдо рд▓рдВрдмреА рд╕реВрдЪреА рдХреЗ рдЙрддреНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ - рдареАрдХ рд╣реИ, рдЕрдЧрд░ рдХрдИ рд╣рдЬрд╛рд░ рдкреГрд╖реНрда рд╣реЛрдВрдЧреЗ рддреЛ рдХреНрдпрд╛ рд╣реЛрдЧрд╛?  рдореИрдВ рдКрдкрд░ рдкреНрд░рд╕реНрддреБрдд рд╕рдорд╛рдзрд╛рди рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░рджрд░реНрд╢рди рдЙрджрд╛рд╣рд░рдг рджреЗрддрд╛ рд╣реВрдВ: <br><br><img src="https://habrastorage.org/webt/wj/dt/yr/wjdtyrmtbxm5f_5jfj7til_iqy0.png"><br><br>  рд╣рдореЗрдВ рдбреЗрдЯрд╛ рдмрдирд╛рдиреЗ рдФрд░ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛ рдкреНрд░рдХрд╛рд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ <br><br><img src="https://habrastorage.org/webt/0u/80/-i/0u80-itckfou4ciyyxremebrqy8.png"><br><br>  рдФрд░ рд╡реНрдпреВ рдХреЛрдб рдЗрд╕ рддрд░рд╣ рджрд┐рдЦреЗрдЧрд╛: <br><br><pre> <code class="cpp hljs">@model Example_Users.Models.UserModel @{ ViewBag.Title = <span class="hljs-string"><span class="hljs-string">"New "</span></span> + Html.DisplayNameForModel().ToString().ToLower(); } &lt;h2&gt;@ViewBag.Title&lt;/h2&gt; @<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (@Html.BeginForm(<span class="hljs-string"><span class="hljs-string">"New"</span></span>, <span class="hljs-string"><span class="hljs-string">"Users"</span></span>, FormMethod.Post)) { @Html.EditorFor(m =&gt; m.User); @Html.LabelFor(m =&gt; Model.User.Language)&lt;br /&gt; @Html.DropDownListFor(m =&gt; Model.User.Language.LanguageID, Model.SelectLanguages()) &lt;span/&gt;@Html.ValidationMessageFor(m =&gt; Model.User.Language.LanguageID)&lt;br /&gt; &lt;br /&gt; &lt;p&gt;&lt;input type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> name=<span class="hljs-string"><span class="hljs-string">"action"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Add"</span></span> /&gt; &lt;input type=<span class="hljs-string"><span class="hljs-string">"button"</span></span> onclick=<span class="hljs-string"><span class="hljs-string">"history.go(-1)"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Cancel"</span></span> /&gt;&lt;/p&gt; @*&lt;p&gt;@Html.ActionLink(<span class="hljs-string"><span class="hljs-string">"Back to list"</span></span>, <span class="hljs-string"><span class="hljs-string">"Index"</span></span>)&lt;/p&gt;*@ }</code> </pre> <br>  рдпрд╣ рджреГрд╢реНрдп рджрд┐рдЦрд╛рддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>UserClass</code> рд╡рд░реНрдЧ рдореЗрдВ рд╡рд╕реНрддреБрдУрдВ рдХреЗ рд╕рднреА рдЧреБрдгреЛрдВ рдХреЗ рд╕рдВрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдЯреИрдЧ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдзрди рдХреЗ рд░реВрдк рдореЗрдВ <code>Html.EditorFor</code> рд╕рд╣рд╛рдпрдХ рдХрд╛ рдЙрдкрдпреЛрдЧред  рдЗрд╕реЗ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/v-/rz/kw/v-rzkwz4dtui-xhs4lo2vbjyf3s.png"><br><br>  рдпрд╣ рджреГрд╢реНрдп рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдореЙрдбрд▓ рдХреЗ рд░реВрдк рдореЗрдВ <code>UserModel</code> рд╡рд░реНрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдирд╛ рдХрд┐ рд╕реАрдзреЗ <code>UserClass</code> ред  <code>UserModel</code> рд╡рд░реНрдЧ рд╕реНрд╡рдпрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ <i>UserModel.cs</i> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserModel</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> UserClass User { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> IList&lt;LanguageClass&gt; Languages { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UserClass user, IList&lt;LanguageClass&gt; languages)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.User = user; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Languages = languages; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IEnumerable&lt;SelectListItem&gt; SelectLanguages() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Languages != null) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SelectList(Languages, <span class="hljs-string"><span class="hljs-string">"LanguageID"</span></span>, <span class="hljs-string"><span class="hljs-string">"LanguageName"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> null; } }</code> </pre> <br>  <code>UserClass</code> рдСрдмреНрдЬреЗрдХреНрдЯ рд╣реА рдФрд░ <code>UserClass</code> рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреА рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реВрдЪреА рдЗрд╕ рд╡рд░реНрдЧ рдореЗрдВ рд╢рд╛рдорд┐рд▓ <code>LanguageClass</code> ред  рд╣рдореЗрдВ рднрд╛рд╖рд╛рдУрдВ рдХреА рдПрдХ рдбреНрд░реЙрдк-рдбрд╛рдЙрди рд╕реВрдЪреА рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕ рд╕реВрдЪреА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА, рдЬрд┐рд╕рдореЗрдВ рд╡рд░реНрддрдорд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рднрд╛рд╖рд╛ рдХрд╛ рдЪрдпрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛: <code>@Html.DropDownListFor(m =&gt; Model.User.Language.LanguageID, Model.SelectLanguages(), "")</code> <br><br>  рдпрд╣ рд╕рд╣рд╛рдпрдХ рдХреЙрд▓ рдХреЛ <code>SelectLanguages()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рднрд╛рд╖рд╛ рдХреА рд╕реВрдЪреА рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╕реЗрдЯ рдХрд┐рдП рдЧрдП рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдФрд░ рд▓рд╛рдЗрди рдирд╛рдо рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд╕рд╛рде <code>SelectList</code> рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ <code>SelectList</code> ред  рдЗрд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреА рдкреАрдврд╝реА рдХреЛ рджреГрд╢реНрдп рдореЗрдВ рд░рдЦрдирд╛ рдЧрд▓рдд рд╣реЛрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рдЗрди рдирд╛рдореЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрд╖реЗрддреНрд░ рдХреЗ рдирд╛рдореЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрддрд╛ рдирд╣реАрдВ рдерд╛ред  <code>SelectList</code> , рдирд┐рдпрдВрддреНрд░рдХ рдореЗрдВ рд╕реАрдзреЗ рддреИрдпрд╛рд░ <code>SelectList</code> рдЙрддреНрдкрдиреНрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдореБрдЭреЗ рдбреЛрдореЗрди рд╡рд░реНрдЧ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреА рдПрдХ рдирд┐рдЬреА рд╕реВрдЪреА рдФрд░ рдЕрдзрд┐рдХ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рд╛рде рд╡рд┐рдХрд▓реНрдк рдкрд╕рдВрдж рд╣реИред <br><br>  рдбреНрд░реЙрдк-рдбрд╛рдЙрди рд╕реВрдЪреА рдЬреЗрдирд░реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ <code>Html.EditorFor(m =&gt; m.User)</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ <code>Html.EditorFor(m =&gt; m.User)</code> рд╣реЗрд▓реНрдкрд░ рдЯрд╛рдЗрдк <code>LanguageClass</code> рдХреА рдПрдореНрдмреЗрдбреЗрдб рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдПрдбрд┐рдЯрд┐рдВрдЧ рдорд╛рд░реНрдХрдЕрдк рдирд╣реАрдВ <code>Html.EditorFor(m =&gt; m.User)</code> (рдпрд╣ рдбреНрд░реЙрдк-рдбрд╛рдЙрди рд▓рд┐рд╕реНрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдЯреЗрдореНрдкрд▓реЗрдЯ рд▓рд┐рдЦрдХрд░ рдмрд╛рдпрдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рд╣рдо рд╣реИрдВред рд╣рдо рдРрд╕рд╛ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ ...)ред <br><br>  рдФрд░ рдЬрдм рд╕реЗ рд╣рдо рдЕрдкрдиреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдореЗрдВ <code>UserModel</code> рд╡рд░реНрдЧ рдХреА рдПрдХ рд╡рд╕реНрддреБ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ <code>UserClass</code> рд╡рд░реНрдЧ рдХрд╛ рдПрдХ рдЕрдиреНрдп рдСрдмреНрдЬреЗрдХреНрдЯ рд╢рд╛рдорд┐рд▓ рд╣реИ, рддреЛ рд╣рдо <code>Html.EditorForModel()</code> рд╕рд╣рд╛рдпрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реЛрдВрдЧреЗ, рдХреНрдпреЛрдВрдХрд┐ рд╕рд╣рд╛рдпрдХ рдкреБрдирд░рд╛рд╡рд░реНрддреА рдирд╣реАрдВ рд╣реИрдВ рдФрд░ рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП <code>Html.EditorFor()</code> рд╕рд╣рд╛рдпрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <code>Html.EditorFor()</code> <code>User</code> рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдПред <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореИрдВ рдЯрд┐рдкреНрдкрдгреА рдХрд┐рдП рдЧрдП рдЯреИрдЧ </font></font><code>Html.ActionLink("Back to list", "Index")</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░ </font><font style="vertical-align: inherit;">рднреА рдзреНрдпрд╛рди рджреЗрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ: </font><font style="vertical-align: inherit;">рдЖрдорддреМрд░ рдкрд░, рдбреЗрдЯрд╛ рд╕реВрдЪреА рдореЗрдВ рд╡рд╛рдкрд╕ рд╕рдВрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рджреГрд╢реНрдп рд╕реЗ рд╡рд╛рдкрд╕реА рдПрдХ рд╕рдорд╛рди рддрд░реАрдХреЗ рд╕реЗ рд▓рд╛рдЧреВ рдХреА рдЬрд╛рддреА рд╣реИред рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдореЗрд░реА рд░рд╛рдп рдореЗрдВ, рдпрд╣ рдЕрдЬреАрдм рд▓рдЧрддрд╛ рд╣реИ - рдЬрдм рдЖрдк рдПрдХ рдлреЙрд░реНрдо рдореЗрдВ рдЯрд╛рдЗрдк рдмрдЯрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ </font></font><code>button</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдФрд░ рд░рд┐рдЯрд░реНрди рдмрдЯрди рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ рдХрд┐рд╕реА рд▓рд┐рдВрдХ рджреНрд╡рд╛рд░рд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рджреВрд╕рд░реЗ, рдЕрдЧрд░ рд╣рдо рдЫрдБрдЯрд╛рдИ рдФрд░ рдкреГрд╖реНрдард╛рдВрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ - рддреЛ рд╣рдореЗрдВ рдЙрд╕реА рджреГрд╢реНрдп рдореЗрдВ рдПрдХ рд╣реА рдкреГрд╖реНрда рдкрд░ рд▓реМрдЯрдиреЗ рдХреЗ рд╕рд╛рде рдмреБрджреНрдзрд┐рдорд╛рди рд╣реЛрдирд╛ рдкрдбрд╝реЗрдЧрд╛ - рдФрд░ рди рдХреЗрд╡рд▓ рджреГрд╢реНрдп рдХреЗ рд▓рд┐рдП рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдкрд╛рд╕ рдХрд░рдирд╛ </font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдмрд▓реНрдХрд┐ рдкреГрд╖реНрда рдкрд░ рд╡рд╛рдкрд╕ рд▓реМрдЯрдиреЗ рдХреЗ рд▓рд┐рдП рдкреИрд░рд╛рдореАрдЯрд░ рднреАред рдмрд╣реБрдд рд╕рд░рд▓ рддрд░реАрдХрд╛ рд╣реИ - рдПрдХ рдмрдЯрди рдХреЗ рд╕рд╛рде рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдЬреИрд╕реЗ:</font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдЗрддрд┐рд╣рд╛рд╕ рдкреГрд╖реНрда рдкрд░ рд╡рд╛рдкрд╕ рднреЗрдЬ рджреЗрдЧрд╛ред рдпрд╣рд╛рдВ, рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рдмрд╛рд░реАрдХрд┐рдпрд╛рдВ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдкрдиреЗ рдкрд╣рд▓реЗ рд╣реА рдЗрд╕ рдкреГрд╖реНрда рдкрд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдмрдЪрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА рдереА, рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд┐рдпрд╛, рдФрд░ рдЕрдм - рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд░рджреНрдж рдмрдЯрди рдкрд░ рдбрдмрд▓-рдХреНрд▓рд┐рдХ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ), рд▓реЗрдХрд┐рди рдпрд╣ рд╡рд┐рдХрд▓реНрдк рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдПрдХ рдкреНрд░рдХрд╛рд░ рдХреА рд╡рд╕реНрддреБ рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХрд╛ рджреГрд╖реНрдЯрд┐рдХреЛрдг </font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br><br><img src="https://habrastorage.org/webt/a2/eo/xh/a2eoxhk3nzvbvs0h7s_nmjxuems.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЙрд╕рдХрд╛ рдХреЛрдб:</font></font><br><br><pre> <code class="cpp hljs">@model Example_Users.Models.UserModel @{ ViewBag.Title = <span class="hljs-string"><span class="hljs-string">"Edit "</span></span> + Html.DisplayNameForModel().ToString().ToLower(); } &lt;h2&gt;@ViewBag.Title @Model.User.Loginname&lt;/h2&gt; @<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (@Html.BeginForm(<span class="hljs-string"><span class="hljs-string">"Edit"</span></span>, <span class="hljs-string"><span class="hljs-string">"Users"</span></span>, FormMethod.Post)) { @Html.HiddenFor(m =&gt; Model.User.UserID) &lt;div&gt; @Html.LabelFor(m =&gt; Model.User.Loginname) @Html.EditorFor(m =&gt; Model.User.Loginname) @Html.ValidationMessageFor(m =&gt; Model.User.Loginname) &lt;/div&gt; &lt;div&gt; @Html.LabelFor(m =&gt; Model.User.Language) @Html.DropDownListFor(m =&gt; Model.User.Language.LanguageID, Model.SelectLanguages()) @Html.ValidationMessageFor(m =&gt; Model.User.Language.LanguageID) &lt;/div&gt; &lt;div&gt; @Html.LabelFor(m =&gt; Model.User.Email) @Html.EditorFor(m =&gt; Model.User.Email) @Html.ValidationMessageFor(m =&gt; Model.User.Email) &lt;/div&gt; &lt;div&gt; @Html.LabelFor(m =&gt; Model.User.SupporterTier) @Html.EditorFor(m =&gt; Model.User.SupporterTier) @*@Html.EnumDropDownListFor(m =&gt; Model.User.SupporterTier)*@ @*@Html.DropDownListFor(m =&gt; m.Model.User.SupporterTier, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SelectList(Enum.GetNames(typeof(Example_Users.Domain.Supporter))))*@ @Html.ValidationMessageFor(m =&gt; Model.User.SupporterTier) &lt;/div&gt; &lt;br /&gt; &lt;p&gt;&lt;input type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> name=<span class="hljs-string"><span class="hljs-string">"action"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Save"</span></span> /&gt; &lt;input type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> name=<span class="hljs-string"><span class="hljs-string">"action"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Remove"</span></span> onclick=<span class="hljs-string"><span class="hljs-string">"javascript:return confirm('Are you sure?');"</span></span> /&gt; &lt;input type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> name=<span class="hljs-string"><span class="hljs-string">"action"</span></span> value=<span class="hljs-string"><span class="hljs-string">"Cancel"</span></span> /&gt;&lt;/p&gt; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЗрд╕ рджреГрд╢реНрдп рдореЗрдВ, рдХрд┐рд╕реА рд╡рд░реНрдЧ рд╡рд╕реНрддреБ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рд╡рд╛рдВрдЫрд┐рдд рд╕рдВрдкрддреНрддрд┐ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ рд╕реЗ рдЯреИрдЧ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рд╣реЗрд▓реНрдкрд░реНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рд╡рд┐рдХрд▓реНрдк рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдереЛрдбрд╝рд╛ рдЕрд▓рдЧ, рд╕реБрдВрджрд░ рддрд░реАрдХреЗ рд╕реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </font></font><br><br><img src="https://habrastorage.org/webt/3g/ew/as/3gewasn6m2whqy9odk4gvrn2l0c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЗрд╕ рджреГрд╢реНрдп рдореЗрдВ, рд╕реВрдЪреА рдореЗрдВ рд╡рд╛рдкрд╕ рдЖрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдФрд░ рддрд░реАрдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдПрдХ рдмрдЯрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп рдЬреИрд╕реЗ: </font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрд╕реА рдмрдЯрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдЕрдиреНрдп рдХреНрд░рд┐рдпрд╛ рдмрдЯрди ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╣реЗрдЬреЗрдВ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рдХрд╛рд▓реЗрдВ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) рдХреЗ рд░реВрдк </font></font><code>/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">рдФрд░ рд░рд┐рдЯрд░реНрди рдирд┐рдпрдВрддреНрд░рдХ рд╡рд┐рдзрд┐ рдХреЗ рдЕрдВрджрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдЗрди рдмрдЯрди рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИ (рдиреАрдЪреЗ рд╡рд┐рдзрд┐ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рджреЗрдЦреЗрдВ)ред</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> enum </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рддрдм рдПрдХ рд╡рд░реНрдЧ рд╕рдВрдкрддреНрддрд┐ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЙрдкрдпреЛрдЧ рд╕реЗ рдЬреБрдбрд╝реА рдПрдХ рдмрд╛рд░реАрдХрд┐рдпреЛрдВ рдХреА </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧрдгрдирд╛ рдХреА рдЧрдИ рдереА</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдпрджрд┐ рд╣рдо рдХреЗрд╡рд▓ рд╕рд╣рд╛рдпрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ </font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рддреЛ рдкрд╛рда рд╕реВрдЪрдирд╛ рдЗрдирдкреБрдЯ рдлрд╝реАрд▓реНрдб (рдЯрд╛рдЗрдк рдЯреИрдЧ </font></font><code>&lt;input type=тАЭtextтАЭ/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдХреЛ </font><font style="vertical-align: inherit;">рдлреЙрд░реНрдо рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ </font><font style="vertical-align: inherit;">рдЬрд╛рдПрдЧрд╛ </font><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди рд╣рдореЗрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдорд╛рдиреЛрдВ рдХреЗ рдПрдХ рд╕реЗрдЯ рд╕реЗ рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝реАрд▓реНрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ (рдпрд╛рдиреА </font></font><code>&lt;select&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рд╕реЗрдЯ рдХреЗ рд╕рд╛рде рдПрдХ </font><font style="vertical-align: inherit;">рдЯреИрдЧ </font></font><code>&lt;option&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. rectilinearly рд╕рд╣рд╛рдпрдХ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╣рд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </font></font><code>Html.DropDownListFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╛ </font></font><code>Html.ListBoxFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП </font></font><code>@Html.DropDownListFor(m =&gt; m.Model.User.SupporterTier, new SelectList(Enum.GetNames(typeof(Example_Users.Domain.Supporter))))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рджреЛ рдореАрдиреВ рд╣реИрдВ - рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рд░ рдЗрд╕реЗ рд╕рд╣рд╛рдпрдХ рдХреЗ рд▓рд┐рдП рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд </font><font style="vertical-align: inherit;">рдХрд░рдирд╛ рд╣реЛрдЧрд╛ </font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╛ </font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. рдЖрдк рдПрдХ рдХрд╕реНрдЯрдо рдЯрд╛рдЗрдк рдЯреЗрдореНрдкрд▓реЗрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ </font></font><code>Editor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><i><font style="vertical-align: inherit;">Views \ Shared \ EditorTemplates рдлрд╝реЛрд▓реНрдбрд░</font></i><font style="vertical-align: inherit;"> рдореЗрдВ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supporter.cshtml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><pre> <code class="xml hljs">@model Example_Users.Domain.Supporter @Html.DropDownListFor(m =&gt; m, new SelectList(Enum.GetNames(Model.GetType()), Model.ToString()))</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо рдЯрд╛рдЗрдк рдирд╛рдо рд╕реЗ рдореЗрд▓ рдЦрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдпрд╛ рдЖрдкрдХреЛ рд▓рд┐рдЦрдирд╛ рдирд╣реАрдВ рд╣реЛрдЧрд╛ </font></font><code>Html.EditorFor(m =&gt; Model.SupporterTier)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди </font></font><code>Html.EditorFor(m =&gt; Model.SupporterTier, "Supporter")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдпрджрд┐ рдЖрдк рдлрд╝рд╛рдЗрд▓ рдХреЛ рдЕрд▓рдЧ рдирд╛рдо рджреЗрддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдХрдХреНрд╖рд╛ рдореЗрдВ рд╕рдВрдкрддреНрддрд┐ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдПрдХ рд╕рдВрдХреЗрдд рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ </font></font><code>[UIHint("Supporter")]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдФрд░ рдпрд╣ рднреА рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдпрджрд┐ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рд╣реИ </font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдЗрд╕рдХреЗ рд▓рд┐рдП рдлреЙрд░реНрдо рдХрд╛ рд╕рдорд╛рдзрд╛рди </font></font><code>Html.EditorFor(m =&gt; Model.SupporterTier, "Supporter")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореИрдВ рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХреА рддрд░рд╣ рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐, рдЬрдм рдЖрдк рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрдирд╛рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ (рд╢реБрд░реВ рдкреНрд░рд╕реНрддреБрддрд┐ рд╕реЗ рдирд╣реАрдВ рдЖрдпрд╛ рдерд╛ </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╣рд╛рдпрдХреЛрдВ рдХреЗ рд▓рд┐рдП) рдХрд╛рд░реНрдпрдХреНрд░рдо </font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рдмрд╛рд╣рд░ рдЧрд┐рд░ рдЧрдИ: " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрддреНрд╡ рдореЙрдбрд▓ рд╢рдмреНрджрдХреЛрд╢ рдореЗрдВ рдкрд╛рд░рд┐рдд рдХрд░ рджрд┐рдпрд╛, рд╢реВрдиреНрдп рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕ рд╢рдмреНрджрд╛рд╡рд▓реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рддрддреНрд╡ рдкреНрд░рдХрд╛рд░┬л Example_Users рдореЙрдбрд▓ред Domain.Supporter ", рдЕрд╢рдХреНрдд рдирд╣реАрдВред</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">┬╗рдХрд╛рд░рдг рд╕реНрдкрд╖реНрдЯ рд╣реИ - рд▓рд┐рд╕реНрдЯрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдорд╛рди рд░рд┐рдХреНрдд рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рдерд╛ред рдЗрд╕рд▓рд┐рдП, рд╡рд╣ рдЖрдЧреЗ рд╕рдордЭрдиреЗ рд▓рдЧрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. рдЖрдк </font></font><code>Html.EnumDropDownListFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдерд╛рдирд╛рдВрддрд░рдг рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдмрдирд╛рдП рдЧрдП </font><font style="vertical-align: inherit;">рд╕рд╣рд╛рдпрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред рдпрд╣рд╛рдВ рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реИ, рдХреБрдЫ рднреА рдЕрддрд┐рд░рд┐рдХреНрдд рд▓рд┐рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рд╕рдм рдХреБрдЫ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдпрд╣ рд╕рдВрдкрд╛рджрди рдХрд░рддреЗ рд╕рдордп рдФрд░ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рддреЗ рд╕рдордп рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред рдПрдХ "рд▓реЗрдХрд┐рди" рдХреЛ рдЫреЛрдбрд╝рдХрд░: рд╕рд╣рд╛рдпрдХ </font></font><code>Html.EditorForModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рднреА рдЧреБрдгреЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд╣рд╛рдпрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ </font></font><code>Html.EditorFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рддрджрдиреБрд╕рд╛рд░, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ </font></font><code>Html.EnumDropDownListFor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдФрд░, рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВ рдЗрд╕реЗ рд╕рдордЭрддреЗ рд╣реИрдВ, рдпрд╣ рдЧреБрдг рдХреЗ рд╡рд░реНрдЧ рдХреЗ рд▓рд┐рдП рдЧреБрдг рдХреА рдорджрдж рд╕реЗ рдмрдЪрд╛ рдирд╣реАрдВ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ - </font></font><code>[UIHint]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>[DataType]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>[EnumDataType]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрд╕рдХреЗ рдмрд╛рдж рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддреЗред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЧрдгрдирд╛ рдореВрд▓реНрдпреЛрдВ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдВрдЧреА, рдЕрд░реНрдерд╛рддреН, рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рд░рд┐рдХреНрдд рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдирд╛, рдЬреИрд╕рд╛ рдХрд┐ рдЧрдгрдирд╛ рдХреЗ рд╡рд┐рд╡рд░рдг рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ</font></font><code>Supporter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдореИрдВ </font></font><a href="https://odetocode.com/Blogs/scott/archive/2012/08/29/working-with-enums-and-templates-in-asp-net-mvc.aspx" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдкрд╛рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рд╕рдорд╛рдзрд╛рди рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рдЖрдпрд╛ </font><font style="vertical-align: inherit;">: рд╕реНрдерд╛рдирд╛рдиреНрддрд░рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдЯреЗрдореНрдкрд▓реЗрдЯ рдмрдирд╛рдирд╛ред </font><i><font style="vertical-align: inherit;">рджреГрд╢реНрдп \ рд╕рд╛рдЭрд╛ \ EditorTemplates рдлрд╝реЛрд▓реНрдбрд░</font></i><font style="vertical-align: inherit;"> рдореЗрдВ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enum.cshtml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ </font><font style="vertical-align: inherit;">:</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><pre> <code class="xml hljs">@using System.ComponentModel.DataAnnotations @model Enum @{ Func<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">object,</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">string</span></span></span><span class="hljs-tag">&gt;</span></span> GetDisplayName = o =&gt; { var result = null as string; var display = o.GetType() .GetMember(o.ToString()).First() .GetCustomAttributes(false) .OfType<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DisplayAttribute</span></span></span><span class="hljs-tag">&gt;</span></span>() .LastOrDefault(); if (display != null) result = display.GetName(); return result ?? o.ToString(); }; var values = Enum.GetValues(ViewData.ModelMetadata.ModelType).Cast<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">object</span></span></span><span class="hljs-tag">&gt;</span></span>() .Select(v =&gt; new SelectListItem { Selected = v.Equals(Model), Text = GetDisplayName(v), // v.ToString(), Value = v.ToString() }); } @Html.DropDownList("", values)</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ, рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рд╕рдм рдХреБрдЫ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдирд┐рдХрд▓рд╛: рдЯреЗрдореНрдкрд▓реЗрдЯ рдЬрд╣рд╛рдВ рднреА рд╕рдВрднрд╡ рд╣реЛ рдорд╣рд╛рди рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЖрдк </font></font><code>[UIHint("Enum")]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреЛрдбрд╝ </font><font style="vertical-align: inherit;">рднреА </font><font style="vertical-align: inherit;">рдирд╣реАрдВ рд╕рдХрддреЗред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп рдЯреЗрдореНрдкрд▓реЗрдЯ </font></font><code>[Display(Name)]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рд╢реЗрд╖ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдЧрдгрдирд╛ рдореВрд▓реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рд╡рд┐рд╢реЗрд╖рддрд╛ рдкрдврд╝рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C рдХрд╛ рдЕрд░реНрде рд╣реИ рдирд┐рдпрдВрддреНрд░рдХ </font></font></h2><br><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">рдирд┐рдпрдВрддреНрд░рдХреЛрдВ</font></i><font style="vertical-align: inherit;"> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ </font><font style="vertical-align: inherit;">рдореЗрдВ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UsersController.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдлрд╝рд╛рдЗрд▓ рдЬреЛрдбрд╝реЗрдВ </font><font style="vertical-align: inherit;">ред</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UsersController</span></span></span><span class="hljs-class"> :</span></span> Controller { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> pageSize = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> showPages = <span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    public ViewResult Index(string sortOrder, int page = 1) { string sortName = null; System.Web.Helpers.SortDirection sortDir = System.Web.Helpers.SortDirection.Ascending; sortOrder = Base.parseSortForDB(sortOrder, out sortName, out sortDir); UsersRepository rep = new UsersRepository(); UsersGrid users = new UsersGrid { Users = rep.List(sortName, sortDir, page, pageSize, out count), PagingInfo = new PagingInfo { currentPage = page, itemsPerPage = pageSize, totalItems = count, showPages = showPages }, SortingInfo = new SortingInfo { currentOrder = sortName, currentDirection = sortDir } }; return View(users); } [ReferrerHold] [HttpPost] public ActionResult Index(string onNewUser) { if (onNewUser != null) { TempData["referrer"] = ControllerContext.RouteData.Values["referrer"]; return View("New", new UserModel(new UserClass(), Languages())); } return View(); } [ReferrerHold] public ActionResult New() { TempData["referrer"] = ControllerContext.RouteData.Values["referrer"]; return View("New", new UserModel(new UserClass(), Languages())); } [HttpPost] public ActionResult New(UserModel model) { if (ModelState.IsValid) { if (model.User == null || model.User.Language == null || model.User.Language.LanguageID == 0) RedirectToAction("Index"); UsersRepository rep = new UsersRepository(); if (rep.AddUser(model.User)) TempData["message"] = string.Format("{0} has been added", model.User.Loginname); else TempData["error"] = string.Format("{0} has not been added!", model.User.Loginname); if (TempData["referrer"] != null) return Redirect(TempData["referrer"].ToString()); return RedirectToAction("Index"); } else { model = new UserModel(model.User, Languages()); // -          model.Languages,   return View(model); } } [ReferrerHold] public ActionResult Edit(int UserID) { UsersRepository rep = new UsersRepository(); UserClass user = rep.FetchByID(UserID); if (user == null) return HttpNotFound(); TempData["referrer"] = ControllerContext.RouteData.Values["referrer"]; return View(new UserModel(user, Languages())); } [HttpPost] public ActionResult Edit(UserModel model, string action) { if (action == "Cancel") { if (TempData["referrer"] != null) return Redirect(TempData["referrer"].ToString()); return RedirectToAction("Index"); } if (ModelState.IsValid) { if (model.User == null || model.User.Language == null || model.User.Language.LanguageID == 0) RedirectToAction("Index"); UsersRepository rep = new UsersRepository(); if (action == "Save") { if (rep.ChangeUser(model.User)) TempData["message"] = string.Format("{0} has been saved", model.User.Loginname); else TempData["error"] = string.Format("{0} has not been saved!", model.User.Loginname); } if (action == "Remove") { if (rep.RemoveUser(model.User)) TempData["message"] = string.Format("{0} has been removed", model.User.Loginname); else TempData["error"] = string.Format("{0} has not been removed!", model.User.Loginname); } if (TempData["referrer"] != null) return Redirect(TempData["referrer"].ToString()); return RedirectToAction("Index"); } else { model = new UserModel(model.User, Languages()); return View(model); } } public IList&lt;LanguageClass&gt; Languages() { IList&lt;LanguageClass&gt; languages = new List&lt;LanguageClass&gt;(); LanguagesRepository rep = new LanguagesRepository(); languages = rep.List(); return languages; } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдЗрдП рдирд┐рдпрдВрддреНрд░рдХ рд╡рд┐рдзрд┐рдпреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) </font></font><code>Index</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рд╕реВрдЪреА рдХреЗ рд╕рд╛рде рдПрдХ рдкреГрд╖реНрда рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ </font><font style="vertical-align: inherit;">рддрд░реАрдХреЗ </font><font style="vertical-align: inherit;">: </font></font><code>public ViewResult Index(string sortOrder, int page = 1)</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреЛ рдЗрдирдкреБрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИрдВ </font></font><code>sortOrder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>page</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рд╕рд╛рде </font></font><code>page</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рднреА рдХрдо рдпрд╛ рдЬреНрдпрд╛рджрд╛ рд╕реНрдкрд╖реНрдЯ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ </font></font><code>sortOrder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрддрд╛ рдкрдЯреНрдЯреА рд╕реЗ, рдЖрдк рдПрдХ рдордирдорд╛рдирд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реИ, рдЬреЛ рд╣рдо рддреЛ рдПрд╕рдХреНрдпреВрдПрд▓ рдХреНрд╡реЗрд░реА рдореЗрдВ рд░рдЯрдирд╛ рд╣реИ рдФрд░ рдпрд╣ рд╕реАрдзреЗ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рдкрд╛рд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕рд▓рд┐рдП, рд╣рдо рдлрд╝рдВрдХреНрд╢рди рдХреА рд╕рд╣рд╛рдпрддрд╛ рд╕реЗ рдЗрд╕ рд▓рд╛рдЗрди рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рддреЗ рд╣реИрдВ (рдореИрдВ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд╕реНрд╡рдпрдВ рдпрд╣рд╛рдВ рдирд╣реАрдВ рджреВрдВрдЧрд╛, рдЖрдк рдЗрд╕реЗ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмреЗрд╕.рдХреЗрдПрд╕</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">): </font></font><code>sortOrder = Base.parseSortForDB(sortOrder, out sortName, out sortDir);</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрд┐рд░ рд╕рдм рдХреБрдЫ рддреБрдЪреНрдЫ рд╣реИ, рдПрдХ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ </font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдбреАрдмреАрдПрдордПрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЕрдЧрд▓реЗ рдЕрдзреНрдпрд╛рдп рдореЗрдВ рдЪрд░реНрдЪрд╛ рдХреА рдЧрдИ), </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдФрд░ рд╕реВрдЪреА рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font><font style="vertical-align: inherit;">рдХреЛ </font><font style="vertical-align: inherit;">рдХреЙрд▓ рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рдХреНрд▓рд╛рд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдБ</font></font><code>UsersGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕реВрдЪреА рдФрд░ рд╕реВрдЪрдирд╛рдУрдВ рдХреА рдЫрдБрдЯрд╛рдИ рдХреЗ рдЖрдпреЛрдЬрди рдФрд░ рдЫрдБрдЯрд╛рдИ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдЬрд╛рдирдХрд╛рд░реА рд╕реЗред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, TotalItem рдХрд╛ рдорд╛рди рддрдм рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ рдЬрдм рд╡рд┐рдзрд┐ рдХреЛ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рд╕рд╛рде рд╣реА рд╕рд╛рде рдХреНрд▓рд╛рд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд╕рд╛рде </font></font><code>UsersGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдЗрд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХреЗ рд▓рд┐рдП рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрд╕ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рдФрд░ рдЕрдиреБрдХреНрд░рдордгрд┐рдХрд╛ рд╡рд┐рдзрд┐ рднреА рд╣реИ рдЬрд┐рд╕реЗ </font><font style="vertical-align: inherit;">рджреЗрдЦрдиреЗ рдХреЗ </font></font><code>[HttpPost]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓рд┐рдП рд╣рдореЗрдВ рдмрдЯрди рдХреНрд▓рд┐рдХ рдкрд░ рдХрд╛рдо рдХрд░рдирд╛ рд╣реЛрдЧрд╛ </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">рдЗрдирдкреБрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рдореЗрдВ </font><font style="vertical-align: inherit;">рджреГрд╢реНрдп рдореЗрдВ </font><font style="vertical-align: inherit;">рддрддреНрд╡ рдХреЗ рд╕рд╛рде рдХреБрдЫ рд╕рд╛рдорд╛рдиреНрдп рд╣реИ </font><font style="vertical-align: inherit;">рдФрд░ рдЬрдм рд╣рдо рдЗрд╕ рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рддреЗ рд╣реИрдВ рддреЛ рдпрд╣ рдЙрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдорд╛рди рдХреЛ рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдХреА рд╣рдо </font><i><font style="vertical-align: inherit;">null рдХреЗ</font></i><font style="vertical-align: inherit;"> рд╕рд╛рде рддреБрд▓рдирд╛ рдХрд░рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред рдпрджрд┐ рдЯрд╛рдЗрдк рдмрдЯрди </font><font style="vertical-align: inherit;">рджреГрд╢реНрдп рдореЗрдВ рд╣реЛрдЧрд╛</font></font><code>New</code><font style="vertical-align: inherit;"></font><code>Index</code><font style="vertical-align: inherit;"></font><code>public ActionResult Index(string onNewUser)</code> <br><br><font style="vertical-align: inherit;"></font><code>onNewUser</code><font style="vertical-align: inherit;"></font><code>/&gt;</code><font style="vertical-align: inherit;"></font><code>Index</code><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><code>submit</code><font style="vertical-align: inherit;"></font><code>Index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдИ, рдЖрдкрдХреЛ рд╕реНрд╡рдпрдВ рдореВрд▓реНрдп рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреА рд╣реЛрдЧреА (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдореВрд▓реНрдп "рдирдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛" рд╣реЛрдЧрд╛)ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд╛рдБрдЪ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдПрдХ рдХреНрд▓рд╛рд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рддреЗ рд╣реИрдВ </font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдирдИ рдСрдмреНрдЬреЗрдХреНрдЯ </font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рднрд╛рд╖рд╛рдУрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╣реЛрддреА рд╣реИ, рдЬреЛ рдЙрдиреНрд╣реЗрдВ рдбреНрд░реЙрдк-рдбрд╛рдЙрди рд╕реВрдЪреА рд╕реЗ рдЪреБрдирдХрд░ рдкреНрд░рд╕реНрддреБрддрд┐рдХрд░рдг рдХреЗ рд▓рд┐рдП рднреЗрдЬрддреА рд╣реИ </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рднрд╛рд╖рд╛рдУрдВ рдХреА рд╕реВрдЪреА </font></font><code>LanguageRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font><font style="vertical-align: inherit;">рд╕реЗ </font><font style="vertical-align: inherit;">рдХреЙрд▓ рдХрд░рдХреЗ </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдкреНрд░рдХрд╛рд░ </font><font style="vertical-align: inherit;">рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХреА </font><font style="vertical-align: inherit;">рдЬрд╛рддреА рд╣реИ:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IList&lt;LanguageClass&gt; Languages() { LanguagesRepository rep = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LanguagesRepository(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rep.List(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) рддрд░реАрдХреЗ </font><font style="vertical-align: inherit;">рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рдмрд┐рдирд╛ рдПрдХ </font></font><code>New</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛ </font><font style="vertical-align: inherit;">рджреЗрдЦрдиреЗ рдореЗрдВ </font><font style="vertical-align: inherit;">рдПрдХ рдЯрд┐рдкреНрдкрдгреА рдХреА рдЧрдИ рд▓рд╛рдЗрди рдХреЗ рд▓рд┐рдП </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд▓рд┐рдВрдХ рдкрд░ рдПрдХ рдХреНрд▓рд┐рдХ рдкрд░ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред рдХреНрд░рд┐рдпрд╛ (рджреГрд╢реНрдп рдХреЛ рдЦреЛрд▓рдирд╛ </font><font style="vertical-align: inherit;">) рдкрд┐рдЫрд▓реЗ рдПрдХ рдХреЗ рд╕рдорд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдХреЗрд╡рд▓ рджрдмрд╛рдП рдЧрдП рдмрдЯрди рдкрд░ рдХреЛрдИ рдЬрд╛рдВрдЪ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд▓рд┐рдВрдХ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдиреЗ рд╕реЗ рдХрд╛рдо рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font><font style="vertical-align: inherit;">рдкреИрд░рд╛рдореАрдЯрд░ рдореЙрдбрд▓ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рд╛рде </font><font style="vertical-align: inherit;">рднреЗрдЬрдиреЗ рдХреА рдШрдЯрдирд╛рдУрдВ рдХреЗ рдХреНрд░рдо рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдирдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╕рдВрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдлрд╛рд░реНрдо рдбреЗрдЯрд╛ рдХреЗ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП: </font><font style="vertical-align: inherit;">рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдиреНрдпреВ рд╕реНрдЯреЙрдХ рд╡рд░реНрдЧ рд╡рд╕реНрддреБ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">, рдЪреЗрдХ рдбреЗрдЯрд╛ рд╢реБрджреНрдзрддрд╛ (рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ рдореЗрдВ рдмрддрд╛рдИ рдХреЗ рдЕрдиреБрд╕рд╛рд░ </font><font style="vertical-align: inherit;">рдФрд░ </font><font style="vertical-align: inherit;">) рднрдВрдбрд╛рд░ рд╡рд╕реНрддреБ рдмрдирд╛рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдПрдХ рдирдИ рдкрдВрдХреНрддрд┐ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдФрд░ рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛, рдПрдХ рд╕рдорд╛рд░реЛрд╣ рдмреБрд▓рд╛ рд░рд╣рд╛ рд╣реИ</font></font><code>Html.ActionLink("New user", "New", "Users")</code><font style="vertical-align: inherit;"></font><code>Index</code><font style="vertical-align: inherit;"></font><code>New</code><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><code>New</code><font style="vertical-align: inherit;"></font><code>UserModel</code><font style="vertical-align: inherit;"></font><code>public ActionResult New(UserModel model)</code> <br><br><font style="vertical-align: inherit;"></font><code>UserModel</code><font style="vertical-align: inherit;"></font><code>UserClass</code><font style="vertical-align: inherit;"></font><code>LanguageClass</code><font style="vertical-align: inherit;"></font><code>UsersRepository</code><font style="vertical-align: inherit;"></font><code>AddUser(model.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдлрд┐рд░ рдпрд╣ рдкрд┐рдЫрд▓реЗ рдкреГрд╖реНрда рдкрд░ рд▓реМрдЯрддрд╛ рд╣реИ (рдЬрд╣рд╛рдВ рд╕реЗ рджреГрд╢реНрдп рдХреЛ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдФрд░ рд╡рд╣рд╛рдВ рдПрдХ рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдСрдкрд░реЗрд╢рди рдХреА рд╕рдлрд▓рддрд╛ рдпрд╛ рд╡рд┐рдлрд▓рддрд╛ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3) </font></font><code>Edit</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрдирдкреБрдЯ рдкреИрд░рд╛рдореАрдЯрд░ </font></font><code>UserID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЖрдИрдбреА) рдХреЗ </font><font style="vertical-align: inherit;">рд╕рд╛рде </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рдзрд┐ </font><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рдХреЗ рд╕рдВрдкрд╛рджрд┐рдд рджреГрд╢реНрдп рдХреЛ рдЦреЛрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реВрдЪреА рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рддреА рд╣реИ: </font></font><code>public ActionResult Edit(int UserID)</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ рдореЗрдВ, рдПрдХ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдИ рдЬрд╛рддреА рд╣реИ </font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЗрд╕реЗ </font></font><code>FetchByID(UserID)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рдХрд╛рд░ рдХреЗ рдСрдмреНрдЬреЗрдХреНрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ </font></font><code>UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рд╕рдлрд▓рддрд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдХ рдореЙрдбрд▓ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - </font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рд╛рдкреНрдд рд╡рд╕реНрддреБ рдФрд░ рднрд╛рд╖рд╛рдУрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╕реЗ </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд░реНрдЧ </font><font style="vertical-align: inherit;">рд╡рд╕реНрддреБ рдФрд░ </font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рджреГрд╢реНрдп рдореЗрдВ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ </font><font style="vertical-align: inherit;">ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рдХрд╛рд░ </font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдкрдВрдХреНрддрд┐ </font><font style="vertical-align: inherit;">рдореЙрдбрд▓ рдХреЗ рдЗрдирдкреБрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд╕рд╛рде рд╡рд┐рдзрд┐ </font></font><code>action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><code>public ActionResult Edit(UserModel model, string action)</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдЗрд╕ рд╡рд┐рдзрд┐ рдХреЛ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </font></font><code>UserModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдпрд╣ рдХрд╛рд░реНрд░рд╡рд╛рдИ рддрдм рдХрд░рддрд╛ рд╣реИ рдЬрдм рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рджреГрд╢реНрдп рдХреЗ рдбреЗрдЯрд╛ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдШрдЯрдирд╛рдПрдБ) </font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдХреМрди рд╕рд╛ рдмрдЯрди рджрдмрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрдирдкреБрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </font></font><code>action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЬрд┐рд╕реЗ HTML рдкреНрд░рдХрд╛рд░ рдЯреИрдЧ рдХреЗ рдирд╛рдо рд╕реЗ рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдЗрд╕рд▓рд┐рдП, рд╡рд┐рдзрд┐ </font></font><code>value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрди рдмрдЯрди </font><font style="vertical-align: inherit;">рдХреЗ рдкреИрд░рд╛рдореАрдЯрд░ рдореВрд▓реНрдпреЛрдВ рдХреЗ рд╕рд╛рде рдЗрд╕ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреА рддреБрд▓рдирд╛ рдХрд░рддреА рд╣реИ </font><font style="vertical-align: inherit;">ред рд╡реИрдзрддрд╛ рдХреЗ рд▓рд┐рдП рдореЙрдбрд▓ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, </font></font><code>Cancel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдВрдкрд╛рджрди рдХреЛ рд░рджреНрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рдореВрд▓реНрдп рдХреА рдЬрд╛рдВрдЪ рдХреА рдЬрд╛рддреА рд╣реИ </font><font style="vertical-align: inherit;">ред рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдЗрддрд┐рд╣рд╛рд╕ рдореЗрдВ рд╡рд╛рдкрд╕ рд▓реМрдЯрдиреЗ рдХреЗ рдмрдЬрд╛рдп рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧ </font><font style="vertical-align: inherit;">рджреГрд╢реНрдп рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">рдФрд░ рдЙрд╕ рдкреГрд╖реНрда рдХреЗ рдкрддреЗ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдЬрд╣рд╛рдВ рд╕реЗ рджреГрд╢реНрдп рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдпрдВрддреНрд░рдХ рдиреЗ рдЕрдкрдиреА рд╡рд┐рд╢реЗрд╖рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддрдХрдиреАрдХ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХрд┐рдпрд╛ </font></font><code>ActionFilter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font><i><font style="vertical-align: inherit;">ReferrerHoldAttribute.cs</font></i></font><code>ReferrerHoldAttribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ </font><font style="vertical-align: inherit;">рд╡рд░реНрдЧ </font><font style="vertical-align: inherit;">( </font><i><font style="vertical-align: inherit;">HtmlAttribute</font></i><font style="vertical-align: inherit;"> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ </font><font style="vertical-align: inherit;">):</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReferrerHoldAttribute</span></span></span><span class="hljs-class"> :</span></span> ActionFilterAttribute { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnActionExecuting</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ActionExecutingContext filterContext)</span></span></span><span class="hljs-function"> </span></span>{ var referrer = filterContext.RequestContext.HttpContext.Request.UrlReferrer; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (referrer != null) filterContext.RouteData.Values.Add(<span class="hljs-string"><span class="hljs-string">"referrer"</span></span>, referrer); base.OnActionExecuting(filterContext); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЙрд╕ рдкреГрд╖реНрда рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд╣рд╛рдВ рдЖрдкрдХреЛ " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдХреЗ </font><font style="vertical-align: inherit;">рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд▓рд┐рдВрдХ </font><font style="vertical-align: inherit;">рдкрд░ рд▓реМрдЯрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ </font><font style="vertical-align: inherit;">: </font></font><code>TempData["referrer"] = ControllerContext.RouteData.Values["referrer"];</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдореЗрдВ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рд╣рд░ рдмрд╛рд░ рд╣рдо рдПрдХ рд╣реА рдХреЛрдб рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд░реАрдХреЛрдВ рд╕реЗ рди рд▓рд┐рдЦреЗрдВред рдирд┐рдпрдВрддреНрд░рдХ рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рдлрд╝рдВрдХреНрд╢рди рд▓рд┐рдЦрдирд╛ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдпрджрд┐ рдХрдИ рдирд┐рдпрдВрддреНрд░рдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╡рд┐рд╢реЗрд╖ рд╡рд┐рд╢реЗрд╖рддрд╛ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЕрдзрд┐рдХ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдмрд╛рдж, рдЙрд╕ рдкрджреНрдзрддрд┐ рдХреЗ рдореБрдЦреНрдп рднрд╛рдЧ рдореЗрдВ, рдЬреЛ рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреА рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддреА рд╣реИ </font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрдЧреНрд░рд╣реАрдд рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдирд┐рдХрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЙрд╕ рдкреГрд╖реНрда рдкрд░ рд╡рд╛рдкрд╕ рднреЗрдЬ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд╣рд╛рдБ рд╕реЗ рдЗрди рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреЛ рдмреБрд▓рд╛рдпрд╛ рдЧрдпрд╛ рдерд╛: </font></font><code>if (TempData["referrer"] != null) return Redirect(TempData["referrer"].ToString());</code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдХреНрдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╕рд╣реЗрдЬрдиреЗ рдпрд╛ рд╣рдЯрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдкреИрд░рд╛рдореАрдЯрд░ рдХреА рддреБрд▓рдирд╛ </font><i><font style="vertical-align: inherit;">рд╕реЗрд╡</font></i><font style="vertical-align: inherit;"> рдФрд░ рдХреЗ </font></font><code>action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╛рде </font><font style="vertical-align: inherit;">рдХреА рдЬрд╛рддреА рд╣реИ</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рдХрд╛рд▓реЗрдВ,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреНрд░рдорд╢рдГ, рдФрд░ </font></font><code>UsersRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрд╝рдВрдХреНрд╢рди </font></font><code>ChangeUser(model.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font><font style="vertical-align: inherit;">рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╕реЗ рдмреБрд▓рд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ </font></font><code>RemoveUser(model.User)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдлрд┐рд░ рдкрд┐рдЫрд▓реЗ рдкреГрд╖реНрда (рдЬрд╣рд╛рдВ рд╕реЗ рджреГрд╢реНрдп рдХреЙрд▓ рдЖрдпрд╛ рдерд╛ </font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдкрд░ </font><font style="vertical-align: inherit;">рд╡рд╛рдкрд╕реА рд╣реЛрддреА рд╣реИ </font><font style="vertical-align: inherit;">рдФрд░ рд╡рд╣рд╛рдВ рдПрдХ рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдСрдкрд░реЗрд╢рди рдХреА рд╕рдлрд▓рддрд╛ рдпрд╛ рд╡рд┐рдлрд▓рддрд╛ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ADO.NET рдФрд░ MySQL - рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рд╣рдореЗрдВ рдЖрдЦрд┐рд░рдХрд╛рд░ рдбреАрдмреАрдПрдордПрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдкрдбрд╝рд╛ред </font><font style="vertical-align: inherit;">рд╣рдореЗрдВ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдЬреЛрдбрд╝рдиреЗ </font></font><code>Users</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХрд░рдиреЗ, рддрд╛рд▓рд┐рдХрд╛ рд╕реЗ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╣рдЯрд╛рдиреЗ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЖрдИрдбреА рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдФрд░ рддрд╛рд▓рд┐рдХрд╛ рд╕реЗ рднрд╛рд╖рд╛рдУрдВ рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд </font><font style="vertical-align: inherit;">рдХрд░рдиреЗ рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ </font></font><code>Languages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╛рдирдХ рд╡рд░реНрдЧ рдХреЗ рд▓рд┐рдП рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдбрд┐рдЬрд╛рдЗрди рдореЗрдВ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL.Data</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ </font></font><code>MySqlCommand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection connect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection( )) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> sql = <span class="hljs-string"><span class="hljs-string">" "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlCommand cmd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlCommand(sql, connect)) { cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">" "</span></span>,  ).Value =  ; connect.Open(); result = cmd.ExecuteNonQuery() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//        (INSERT, UPDATE, DELETE)   cmd.ExecuteScalar()         SELECT } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╛ </font></font><code>MySqlDataReader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд╡реЗрд░реА рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рддрд╛рд▓рд┐рдХрд╛ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЛ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП:</font></font><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection connect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection( )) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> sql = <span class="hljs-string"><span class="hljs-string">" "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlDataReader dr = cmd.ExecuteReader()) { cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">" "</span></span>,  ).Value =  ; objConnect.Open(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (dr.Read()) {<span class="hljs-comment"><span class="hljs-comment">//       } } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">рдореЙрдбрд▓</font></i><font style="vertical-align: inherit;"> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserRepository.cs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ </font><font style="vertical-align: inherit;">:</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UsersRepository</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UserClass user)</span></span></span><span class="hljs-function"> </span></span>{ user.UserID = AddUser(Name: user.Loginname, LanguageID: user.Language.LanguageID, Email: user.Email, SupporterTier: user.SupporterTier); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> user.UserID &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Name, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> LanguageID, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Email, Supporter SupporterTier)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ID = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection connect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection(Base.strConnect)) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> sql = <span class="hljs-string"><span class="hljs-string">"INSERT INTO `Users` (`Loginname`, `LanguageID`, `Email`, `SupporterTier`) VALUES (@Loginname, @LanguageID, @Email, @SupporterTier)"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlCommand cmd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlCommand(sql, connect)) { cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"Loginname"</span></span>, MySqlDbType.String).Value = Name; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"LanguageID"</span></span>, MySqlDbType.Int32).Value = LanguageID; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>, MySqlDbType.String).Value = Email; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"SupporterTier"</span></span>, MySqlDbType.Int32).Value = SupporterTier; connect.Open(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cmd.ExecuteNonQuery() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { sql = <span class="hljs-string"><span class="hljs-string">"SELECT LAST_INSERT_ID() AS ID"</span></span>; cmd.CommandText = sql; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.TryParse(cmd.ExecuteScalar().ToString(), out ID); } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ID; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UserClass user)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ChangeUser(ID: user.UserID, Name: user.Loginname, LanguageID: user.Language.LanguageID, Email: user.Email, SupporterTier: user.SupporterTier); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ID, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Name, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> LanguageID, </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Email, Supporter SupporterTier)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ID &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection connect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection(Base.strConnect)) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> sql = <span class="hljs-string"><span class="hljs-string">"UPDATE `Users` SET `Loginname`=@Loginname, `LanguageID`=@LanguageID, `Email`=@Email, `SupporterTier`=@SupporterTier WHERE UserID=@UserID"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlCommand cmd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlCommand(sql, connect)) { cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"UserID"</span></span>, MySqlDbType.Int32).Value = ID; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"Loginname"</span></span>, MySqlDbType.String).Value = Name; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"LanguageID"</span></span>, MySqlDbType.Int32).Value = LanguageID; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>, MySqlDbType.String).Value = Email; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"SupporterTier"</span></span>, MySqlDbType.Int32).Value = SupporterTier; connect.Open(); result = cmd.ExecuteNonQuery() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UserClass user)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> RemoveUser(user.UserID); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RemoveUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ID)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection connect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection(Base.strConnect)) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> sql = <span class="hljs-string"><span class="hljs-string">"DELETE FROM `Users` WHERE `UserID`=@UserID"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlCommand cmd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlCommand(sql, connect)) { cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"UserID"</span></span>, MySqlDbType.Int32).Value = ID; connect.Open(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cmd.ExecuteNonQuery() &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> UserClass </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FetchByID</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ID)</span></span></span><span class="hljs-function"> </span></span>{ UserClass user = null; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection objConnect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection(Base.strConnect)) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> strSQL = <span class="hljs-string"><span class="hljs-string">"SELECT u.`UserID`, u.`Loginname`, l.`LanguageID`, l.`LanguageName`, u.`Email`, u.`LastLoginDate`, CAST(u.`SupporterTier` AS UNSIGNED) as `SupporterTier` FROM `Users` u LEFT JOIN `Languages` l ON l.LanguageID=u.LanguageID WHERE `UserID`=@UserID"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlCommand cmd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlCommand(strSQL, objConnect)) { objConnect.Open(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> UserID = <span class="hljs-number"><span class="hljs-number">0</span></span>, LanguageID = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> Loginname = null, LanguageName= null, Email = String.Empty; Supporter SupporterTier = Supporter.None; DateTime? LastLoginDate = null; cmd.Parameters.Add(<span class="hljs-string"><span class="hljs-string">"UserID"</span></span>, MySqlDbType.Int32).Value = ID; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlDataReader dr = cmd.ExecuteReader()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dr.Read()) { UserID = dr.GetInt32(<span class="hljs-string"><span class="hljs-string">"UserID"</span></span>); Loginname = dr.GetString(<span class="hljs-string"><span class="hljs-string">"Loginname"</span></span>).ToString(); LanguageID = dr.GetInt32(<span class="hljs-string"><span class="hljs-string">"LanguageID"</span></span>); LanguageName = dr.GetString(<span class="hljs-string"><span class="hljs-string">"LanguageName"</span></span>).ToString(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>))) Email = dr.GetString(<span class="hljs-string"><span class="hljs-string">"Email"</span></span>).ToString(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string"><span class="hljs-string">"LastLoginDate"</span></span>))) LastLoginDate = dr.GetDateTime(<span class="hljs-string"><span class="hljs-string">"LastLoginDate"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!dr.IsDBNull(dr.GetOrdinal(<span class="hljs-string"><span class="hljs-string">"SupporterTier"</span></span>))) SupporterTier = (Supporter)dr.GetInt32(<span class="hljs-string"><span class="hljs-string">"SupporterTier"</span></span>); } LanguageClass language = null; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (LanguageID &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) language = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LanguageClass(LanguageID: LanguageID, LanguageName: LanguageName); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (UserID &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; language != null &amp;&amp; language.LanguageID &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) user = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserClass(UserID: UserID, Loginname: Loginname, Language: language, Email: Email, LastLoginDate: LastLoginDate, SupporterTier: (Supporter)SupporterTier); } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> user; } <span class="hljs-comment"><span class="hljs-comment">//       ASP.NET WebForms,             ObjectDataSource      //     ,         " "         //public IEnumerable&lt;DataRow&gt; List() //{ // using (MySqlConnection objConnect = new MySqlConnection(Base.strConnect)) // { // string strSQL = "select * from users"; // using (MySqlCommand objCommand = new MySqlCommand(strSQL, objConnect)) // { // objConnect.Open(); // using (MySqlDataAdapter da = new MySqlDataAdapter(objCommand)) // { // DataTable dt = new DataTable(); // da.Fill(dt); // return dt.AsEnumerable(); // } // } // } //} public IList&lt;UserClass&gt; List(string sortOrder, System.Web.Helpers.SortDirection sortDir, int page, int pagesize, out int count) { List&lt;UserClass&gt; users = new List&lt;UserClass&gt;(); using (MySqlConnection objConnect = new MySqlConnection(Base.strConnect)) { //     string sort = " ORDER BY "; //   ,               (inject) // ,  , MySQL        //    ,         (       ) //        ,    if (sortOrder != null &amp;&amp; sortOrder != String.Empty) { sort += "`" + sortOrder + "`"; if (sortDir == System.Web.Helpers.SortDirection.Descending) sort += " DESC"; sort += ","; } sort += "`UserID`"; //   //        ( ) string limit = ""; if (pagesize &gt; 0) { int start = (page - 1) * pagesize; limit = string.Concat(" LIMIT ", start.ToString(), ", ", pagesize.ToString()); } string strSQL = "SELECT SQL_CALC_FOUND_ROWS u.`UserID`, u.`Loginname`, l.`LanguageID`, l.`LanguageName` as `Language`, u.`Email`, u.`LastLoginDate`, CAST(u.`SupporterTier` AS UNSIGNED) as `SupporterTier` FROM `Users` u LEFT JOIN `Languages` l ON l.LanguageID=u.LanguageID" + sort + limit; using (MySqlCommand cmd = new MySqlCommand(strSQL, objConnect)) { objConnect.Open(); cmd.Parameters.Add("page", MySqlDbType.Int32).Value = page; cmd.Parameters.Add("pagesize", MySqlDbType.Int32).Value = pagesize; using (MySqlDataReader dr = cmd.ExecuteReader()) { while (dr.Read()) { LanguageClass language = new LanguageClass(LanguageID: dr.GetInt32("LanguageID"), LanguageName: dr.GetString("Language").ToString()); users.Add(new UserClass( UserID: dr.GetInt32("UserID"), Loginname: dr.GetString("Loginname"), Language: language, Email: dr.IsDBNull(dr.GetOrdinal("Email")) ? String.Empty : dr.GetString("Email"), LastLoginDate: dr.IsDBNull(dr.GetOrdinal("LastLoginDate")) ? (DateTime?) null : dr.GetDateTime("LastLoginDate"), SupporterTier: dr.IsDBNull(dr.GetOrdinal("SupporterTier")) ? (Supporter) Supporter.None : (Supporter)dr.GetInt32("SupporterTier"))); } } } using (MySqlCommand cmdrows = new MySqlCommand("SELECT FOUND_ROWS()", objConnect)) { int.TryParse(cmdrows.ExecuteScalar().ToString(), out count); } } return users; } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рдореЗрдВ </font></font><code>AddUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рдзрд┐ рд╣реИ </font><font style="vertical-align: inherit;">, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ ( </font></font><code>ChangeUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), рд╣рдЯрд╛рдирд╛ ( </font></font><code>RemoveUser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдЦреЛрдЬ ( </font></font><code>FetchByID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдФрд░ </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЫрдБрдЯрд╛рдИ рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рдкреГрд╖реНрдард╛рдВрдХрд┐рдд рд╕реВрдЪреА рдкреНрд░рджрд░реНрд╢рд┐рдд </font><font style="vertical-align: inherit;">рдХрд░рдиреЗ рдХреЗ </font><font style="vertical-align: inherit;">рд▓рд┐рдП </font><font style="vertical-align: inherit;">рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рддрд░реАрдХрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдореИрдВ рдлрд╝рдВрдХреНрд╢рди рдкрд░ рдЕрддрд┐рд░рд┐рдХреНрдд рдЯрд┐рдкреНрдкрдгреА рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рдирд╣реАрдВ рд╣реИ ( </font></font><code>DataTable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдЗрд╕ рддрд░рд╣ - рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рджреГрд╢реНрдп рдореЗрдВ рд╡рд░реНрдЧ рдХреЗ рддрддреНрд╡реЛрдВ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдЦреЛ рджреЗрдВрдЧреЗ рдФрд░ рддрд╛рд▓рд┐рдХрд╛ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдорд╛рдиреЛрдВ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕реНрдерд┐рд░рд╛рдВрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рд╣реЛрдВрдЧреЗред</font></font> рдпрд╛рдиреА          SQL-.       <code>UserClass</code> . </li><li>          <code>LIMIT</code>  SQL- <code>SELECT</code> .  ,  MySQL      ,   <code>LIMIT</code>       .   ,     ,       <code>ORDER BY</code>           . ,         SQL-,     SQL   ,       ,     .       ,      ,          :         . </li><li>           SQL  <code>SELECT FOUND_ROWS()</code> ,          ,     <code>SELECT SQL_CALC_FOUND_ROWS</code>     <code>LIMIT</code> . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреНрдп рд╕рднреА рд╡рд┐рдзрд┐рдпрд╛рдВ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рд╛рдорд╛рдиреНрдп рд╣реИрдВ, рдКрдкрд░ рдХреЗ рдХреИрдирди рдХреЗ рдЕрдиреБрд░реВрдк рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LanguageRepository.cs </font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЙрдбрд▓</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ </font><font style="vertical-align: inherit;">рдлрд╝рд╛рдЗрд▓ </font><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LanguagesRepository</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IList&lt;LanguageClass&gt; List() { List&lt;LanguageClass&gt; languages = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;LanguageClass&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlConnection objConnect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlConnection(Base.strConnect)) { <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> strSQL = <span class="hljs-string"><span class="hljs-string">"SELECT `LanguageID`, `LanguageName` as `Language` FROM `Languages` ORDER BY `LanguageName`"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlCommand cmd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySqlCommand(strSQL, objConnect)) { objConnect.Open(); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (MySqlDataReader dr = cmd.ExecuteReader()) { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (dr.Read()) { LanguageClass language = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LanguageClass(LanguageID: dr.GetInt32(<span class="hljs-string"><span class="hljs-string">"LanguageID"</span></span>), LanguageName: dr.GetString(<span class="hljs-string"><span class="hljs-string">"Language"</span></span>).ToString()); languages.Add(language); } } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> languages; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рднрд╛рд╖рд╛рдУрдВ рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рдПрдХ рд╣реА рдХрд╛рд░реНрдп рд╣реИ, рд╡рд░реНрдЧ рддрддреНрд╡реЛрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛рдирд╛ </font></font><code>LanguageClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╣ рд╕рдм - рдХрд╛рд░реНрдп рд╣рд▓ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдХрдИ рдореБрджреНрджреЛрдВ рдХреЛ рд╕рдВрдмреЛрдзрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛: рдирд┐рд░реНрднрд░рддрд╛ рдЗрдВрдЬреЗрдХреНрд╢рди рдХрдВрдЯреЗрдирд░, рдпреВрдирд┐рдЯ рдкрд░реАрдХреНрд╖рдг, рдореЛрдХрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЙрдкрдХрд░рдг, рд╕реНрдерд╛рдиреАрдпрдХрд░рдг, рдЖрджрд┐ред</font></font> рдЖрджрд┐<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреБрдЫ рдЪреАрдЬреЗрдВ рдЕрд▓рдЧ рдпрд╛ рдмреЗрд╣рддрд░ рддрд░реАрдХреЗ рд╕реЗ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЬреЛ "рдИрдВрдЯ" рдирд┐рдХрд▓рд╛, рд╡рд╣ рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдерд╛ рдХрд┐ ASP.NET MVC рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рдпрд╣ ADO.NET рдФрд░ DBMS рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрддрдирд╛ рдбрд░рд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реИ рдЬреЛ MS SQL рдирд╣реАрдВ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS рдФрд░ рдЕрдВрдд рдореЗрдВ: рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдкреНрд░реЛрдЬреЗрдХреНрдЯ </font></font><a href="http://example-mvc.azurewebsites.net/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдкрддреЗ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдФрд░ </font></font><a href="https://yadi.sk/d/EArrZdGh_iVaJg" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЖрдк рдкреВрд░реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЦреИрд░, рдвреЗрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП - </font></font><a href="https://dukeyusupov.wordpress.com/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЗрд░реЗ рдмреНрд▓реЙрдЧ рдХреЗ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд▓рд┐рдП рдПрдХ рдХрдбрд╝реА </font><font style="vertical-align: inherit;">ред</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi482346/">https://habr.com/ru/post/hi482346/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi482332/index.html">рдХреИрд╕реЗ рдПрдХ рдЙрддреНрд╕рд╛рд╣реА рдиреЗ рдбреЙрд╕ рдХреЗ рддрд╣рдд рд╡рд╛рдИ-рдлрд╛рдИ рдиреЗрдЯрд╡рд░реНрдХ рдЙрдард╛рдпрд╛</a></li>
<li><a href="../hi482336/index.html">рд╡реНрдпрд╛рдкрд╛рд░рд┐рдпреЛрдВ рдХреЛ рдЕрдкрдиреЗ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдкреНрд░рд╕рд╛рд░рдг рд╕реЗ рдкрд╣рд▓реЗ рд╕реЗрдВрдЯреНрд░рд▓ рдмреИрдВрдХ рдСрдл рдЗрдВрдЧреНрд▓реИрдВрдб рдХреЗ рдкреНрд░реЗрд╕ рдХреЙрдиреНрдлреНрд░реЗрдВрд╕ рдХреА рд╕реБрд╡рд┐рдзрд╛ рд╣реИ</a></li>
<li><a href="../hi482338/index.html">Mac рдХреЗ рд▓рд┐рдП Visual Studio: рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдЕрдкрдиреА IDE рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░реЗрдВ</a></li>
<li><a href="../hi482340/index.html">рдЬреВрдирд┐рдпрд░'рдП рд╕реЗ рдорд┐рдбрд▓'рдЖ: рдкрд╛рд░реНрд╕рд░ рддрдХ</a></li>
<li><a href="../hi482344/index.html">рд░реВрд╕ рдореЗрдВ рдПрдХ рд╕рд╛рдорд╛рдЬрд┐рдХ рд░реЗрдЯрд┐рдВрдЧ рдХреА рд╢реБрд░реВрдЖрдд рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реЛ рдЬрд╛рдУ</a></li>
<li><a href="../hi482348/index.html">рдЯреЙрдкрд▓реЗрд╕ рд╡рд┐рдбрд┐рдпреЛ рдЧреЗрдо рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд▓рд┐рдП рдЯреЛрдкреЛрд▓реЙрдЬреА рдФрд░ рд╡реНрдпрд╛рдкрдХ рд╡рд┐рд╢реНрд▓реЗрд╖рдг: рд╕рд┐рдВрдЧрд▓ 3 рдбреА рд╡реИрдХреНрдЯрд░ рдХреЛ рдХрдВрдкреНрд░реЗрд╕ рдХрд░рдирд╛</a></li>
<li><a href="../hi482352/index.html">рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рд▓рдЧрднрдЧ 150k рд╣рд╡рд╛ рдореЗрдВ рдлреЗрдВрдХ рджрд┐рдпрд╛ рдпрд╛ рдЕрдкрд╛рд░реНрдЯрдореЗрдВрдЯ рдореЗрдВ рдордЬрдмреВрд░ рд╡реЗрдВрдЯрд┐рд▓реЗрд╢рди рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕</a></li>
<li><a href="../hi482354/index.html">рдХреЙрдиреНрдлрд╝рд┐рдЧрд░рд╡рд┐рд╣рд┐рдд: рдЕрдХреНрд╕рд░ рдкреВрдЫреЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рд╢реНрди</a></li>
<li><a href="../hi482356/index.html">рдПрдХ рдирд┐рдпрдорд┐рдд рд╡рд┐рдВрдбреЛрдЬ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░ рдХреЗ рдмрд┐рдирд╛ рд╡рд┐рдВрдбреЛрдЬ рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛</a></li>
<li><a href="../hi482358/index.html">рд░рд╕реНрдЯ рдореЗрдВ рдШрдмрд░рд╛рд╣рдЯ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддреА рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>