<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥔 👨🏽‍🎤 🥡 Climatiseur IT. Partie II ♦️ 🆗 👩🏾‍✈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cette partie, je vais vous dire l'option d' intégration «simple» d'un climatiseur (et, en général, de presque tous les appareils contrôlés via IR...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Climatiseur IT. Partie II</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473680/"><img src="https://habrastorage.org/webt/y_/r9/qi/y_r9qi_etxishykvysm5-e6gqem.jpeg" align="left" title="Petite figue noire">  Dans cette partie, je vais vous dire l'option d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">intégration</a> «simple» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d'un climatiseur</a> (et, en général, de presque tous les appareils contrôlés via IR) à l'aide d'une passerelle WiFi &lt;=&gt; IR. <br><br>  Afin de le rendre plus intéressant, j'ai choisi une passerelle populaire (au fait, Yandex l'utilise pour son Alice).  Vous pouvez en acheter un sur Ali, le prix est d'environ 1200 roubles (Yandex est plus cher). <br><br>  L'appareil est assez compact (tient facilement dans la paume de votre main), des organes visibles il y a une petite LED bleue discrète et un bouton pour l'appairage.  Tout le reste est caché derrière un boîtier transparent infrarouge noir.  Vous pouvez utiliser n'importe quel port USB disponible (alimentation, ordinateur, etc.) comme source d'alimentation.  La passerelle y est connectée à l'aide d'un câble microUSB (fourni ou de toute autre manière pratique). <br><br>  La particularité de cet appareil est qu'il est construit sur le "bien connu dans les cercles étroits" esp8266, ce qui signifie qu'il peut être "apprivoisé" assez facilement. <br><a name="habracut"></a><br><h2>  Option "pour les plus petits" </h2><br>  Avant de changer d'appareil, j'ai essayé de l'utiliser normalement: j'ai installé l'application TuyaSmart sur mon téléphone (il existe des versions pour Android et iPhone), et puis tout est simple: <br><br><ul><li>  s'inscrire dans l'application, </li><li>  nous allons passer par un petit assistant pour connecter un nouvel appareil (pour cela, la passerelle doit être connectée à l'alimentation et entrer en mode "appairage" en utilisant un seul bouton dessus, </li><li>  après l'apparition de la passerelle dans l'application, nous créons un nouveau «panneau de contrôle» - un autre petit assistant où vous sélectionnez le type d'appareil (dans mon cas - la climatisation), puis le fabricant est sélectionné (il n'y a pas d'Electrolux dans l'application, mais cela a très bien fonctionné lors du choix de Midea).  Immédiatement, nous trouvons le «nom» de la nouvelle console (j'ai choisi «M. White»). </li></ul><br>  C’est tout.  Après cela, la télécommande suivante apparaît sur le téléphone: <br><br><img src="https://habrastorage.org/webt/e5/ue/u_/e5ueu_qvxtkqvtt6itcpst7gpke.jpeg" align="right">  Avec lui, vous pouvez contrôler les fonctions de base de base: <br><br><ul><li>  marche / arrêt </li><li>  réglage de la température </li><li>  sélection du mode de fonctionnement ("Auto", "Refroidissement", "Chauffage", "Ventilateur"), </li><li>  sélection de la vitesse du ventilateur («Auto», «Low», «Medium», «High»). </li></ul><br>  En général, il est déjà possible d'utiliser pour la télécommande, mais où est la «maison intelligente» et l'intégration? <br><br>  Comme c'est un moyen simple, c'est mauvais avec une maison intelligente, mais avec l'intégration, c'est un peu mieux. <br><br>  Tout d'abord, une mouche dans la pommade - il n'y a pas d'intégration avec Apple HomeKit, donc Siri n'est pas encore disponible, mais avec d'autres plates-formes concurrentes, tout est beaucoup plus amusant: <br><br><ul><li>  Pour Amazon Alexa - il existe une compétence Tuya Smart.  Il suffit de l'activer et d'indiquer en elle votre compte, que vous avez entré lors de l'inscription dans l'application - vous pouvez contrôler vocalement le climatiseur. </li><li>  De même, vous pouvez connecter Tuya Smart à Google Assistant. </li></ul><br>  Dans les deux cas, la langue russe n'est pas prise en charge, mais la voix est contrôlée facilement et simplement.  J'ai trouvé les commandes suivantes: <br>  - Alexa, allume M. White <br>  - Hé, Google, mets M. White à 24 degrés <br>  - Alexa, éteins Mr.White <br><br>  Permettez-moi de vous rappeler que j'ai mis en œuvre la commande vocale à l'aide d'Amazon Echo Dot et de Google Home Mini - les deux appareils fonctionnent de manière identique. <br><br>  Soit dit en passant, quelles commandes vocales vous pouvez contrôler le mode de fonctionnement et le débit d'air - je n'ai pas trouvé.  Si quelqu'un me le dit, je vous en serai reconnaissant. <br><br>  Et puis l'intégration «semi-automatique» avec UD a été effectuée: lorsque la température dans la pièce dépasse le seuil - le contrôleur UD envoie un message demandant d'allumer le climatiseur, et moi, à distance, en utilisant l'application TuyaSmart, j'ai allumé le climatiseur dans le mode requis. <br><br>  La solution est "so-so", bien sûr, mais au moins d'une manière ou d'une autre, vous pouvez l'utiliser. <br><br>  Mais ce n'est pas notre chemin - nous continuons: <br><br><h2>  Jedi Way </h2><br><h3>  Autopsie et préparation </h3><br>  Il existe une option pour flasher l'appareil sans l'ouvrir, la méthode est décrite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Cette méthode me semblait inutilement compliquée (tant de mouvements, lorsque le firmware ne nécessite que 4 fils à souder), et c'était intéressant de regarder à l'intérieur. <br><br>  Malheureusement, au cours du processus, je me suis laissé emporter et j'ai oublié de prendre une photo, donc je vais montrer les photos d'autres personnes: <br><br><img src="https://habrastorage.org/webt/di/wv/bx/diwvbx4obuman2fxbcx9ncpxlhe.jpeg" width="360"><img src="https://habrastorage.org/webt/e3/dv/xd/e3dvxdmwrqauy1rhoqmdzlyolsu.jpeg" width="360"><br>  Plus de photos peuvent être <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vues ici</a> . <br><br>  La photo montre clairement que le module TYWE3S est utilisé (la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fiche technique</a> sur laquelle est très simple dans Google). <br><br>  Vous devez maintenant flasher le module.  Le firmware d'origine est écrasé et ne peut pas être restauré. <br><br>  Le firmware se fait très simplement: on prend l'environnement Arduino (ou Atom, ou autre chose - choisissez à votre goût).  Téléchargez l'esquisse avec le firmware <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tasmota</a> dans l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">environnement de développement</a> .  Ensuite, nous nous connectons sur un module TYWE3S RX, TX, GND, VCC de n'importe quelle série USB (ne pas mélanger - vous avez besoin d'une alimentation de 3,3 V et des niveaux de signal correspondants, s'il y a 5 V, vous devrez commander une nouvelle passerelle).  Avant de mettre sous tension, n'oubliez pas de fermer (de quelque manière que ce soit) le GPIO0 du module à la masse, mettant ainsi le module en mode firmware.  Firmware. <br><br>  Il n'est pas nécessaire de configurer le firmware - tout peut être laissé dans le code «tel quel», il suffit de «dompter» le module. <br><br>  Si tout est fait correctement (après avoir déconnecté les fils du firmware, bien sûr), allumez la passerelle.  Sur votre téléphone ou votre ordinateur, activez la recherche de réseaux WiFi - un nouveau réseau devrait apparaître avec le nom sonoff-xxxx (où xxxx sont des nombres), que notre appareil récupère. <br><br>  Nous nous connectons à ce réseau et allons à l'adresse: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">192.168.4.1</a> - c'est l'interface web de notre passerelle. <br><br>  Tout d'abord, dans les paramètres de la passerelle, spécifiez le réseau WiFi domestique et le mot de passe correspondant (l'appareil redémarrera et se connectera au réseau domestique).  De plus, toutes les actions sont plus faciles à faire.  Naturellement, vous devez trouver de manière pratique l'adresse de la passerelle reçue dans le réseau domestique. <br><br>  Nous allons à la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">page avec les versions du firmware Tasmota</a> .  Téléchargez deux fichiers - sonoff-minimal.bin et sonoff-ir.bin <br><br>  Maintenant, en utilisant l'interface Web de la passerelle, nous mettons à jour le firmware en deux étapes - nous cousons d'abord la version «minimale», et la deuxième étape est sonoff-ir. <br><br>  Après toutes ces actions simples, nous aurons déjà un module avec la version actuelle du firmware en main, il ne reste plus qu'à le configurer comme suit: <br><br><img src="https://habrastorage.org/webt/mr/ti/wh/mrtiwhec5gh-ggeret8rsschi9a.png" align="left" width="350"><br><br>  En fait, c'est la configuration minimale nécessaire - dans l'exemple décrit, nous allons interagir avec le module à l'aide de requêtes GET (bien que cela soit également possible via MQTT). <br><br>  Vous pouvez vérifier le fonctionnement du module, et en même temps trouver quelque chose d'utile dans sa console (un lien vers celui-ci est disponible sur la page principale de l'interface web).  Ouvrez la console et voyez comment le module «vit». <br><br>  Vous pouvez maintenant commencer à apprendre l'interface de contrôle de la climatisation.  Pour ce faire, prenez la télécommande standard du climatiseur et appuyez sur le bouton d'alimentation.  Si tout va bien, alors une ligne comme: <br><br><pre><code class="plaintext hljs">19:24:09 MQT: tele/IRbridge/RESULT = {"IrReceived":{"Protocol":"COOLIX","Bits":24,"Data":"0xB29F70","DataLSB":"0x4DF90E","Repeat":0,"IRHVAC":{"Vendor":"COOLIX","Model":-1,"Power":"on","Mode":"cool","Celsius":"on","Temp":22,"FanSpeed":"min","SwingV":"off","SwingH":"off","Quiet":"off","Turbo":"off","Econo":"off","Light":"on","Filter":"off","Clean":"on","Beep":"off","Sleep":-1}}}</code> </pre> <br>  Le module a reçu et "analysé" la commande IR de la télécommande.  C'est-à-dire  il est immédiatement clair depuis la console quel protocole (dans mon cas c'est COOLIX) est utilisé par l'unité de climatisation standard et quels paramètres sont encodés dans le package. <br><br>  Super, maintenant vous pouvez déjà contrôler la climatisation.  Pour ce faire, il est préférable de vous familiariser avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette</a> description des commandes. <br><br>  Pour vérifier via la console de la passerelle, nous enverrons, par exemple, cette commande (je donnerai toutes les commandes pour mon climatiseur, vous pouvez avoir un protocole de contrôle différent): <br><br><pre> <code class="plaintext hljs">IRhvac{"Protocol":"COOLIX","Power":"On","Mode":"Cool","FanSpeed":"min","Temp":22}</code> </pre> <br>  Miraculeusement, le climatiseur se met en marche immédiatement et dans le mode requis.  Miracle! <br><br>  Éteignez le climatiseur avec la commande suivante: <br><br><pre> <code class="plaintext hljs">IRhvac{"Protocol":"COOLIX","Power":"Off"}</code> </pre> <br>  En général, le module est préparé et testé. <br><br>  Allez à l'intégration! <br><br><h3>  Climatisation + Domoticz = amitié pour toujours! </h3><br>  J'utilise Domoticz comme système d'automatisation principal, nous serons donc «amis» avec ce système particulier. <br><br>  Le plan de travail est le suivant: <br><br><ol><li>  Créez plusieurs appareils virtuels: un interrupteur, deux sélecteurs (pour sélectionner les modes et le débit d'air) et un thermostat. </li><li>  Ajoutez quelques scripts qui, par des actions avec des périphériques virtuels, enverront des commandes à la passerelle. </li><li>  Vérifiez que tout est géré comme il se doit. </li></ol><br><h4>  Appareils virtuels </h4><br>  Lors de la création de périphériques, vous devez spécifier leurs noms.  J'apporte le mien, vous pouvez en choisir d'autres, n'oubliez pas de corriger les scripts pour eux plus tard. <br><br>  Créez un commutateur standard (tapez «Switch») avec le nom «HVAC».  Ce commutateur sera utilisé pour activer / désactiver un bouton. <br><br>  Pour sélectionner les modes de fonctionnement du climatiseur, ajoutez un interrupteur virtuel «HVAC-Mode» (type «Selector Switch») avec les caractéristiques suivantes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t9/fe/dn/t9fednom5tcyxsgs-htc4vi2pkq.png"></div><br>  Veuillez noter qu'ici, je n'ai créé que deux modes - «chauffage» et «refroidissement».  Bien que le climatiseur ait toujours les modes "Auto" et "Fan", ils sont inutiles pour moi - le premier fonctionne d'une manière étrange et inconfortable pour les ménages, et le second n'a jamais été nécessaire du tout.  Si vous utilisez ces modes, vous pouvez simplement les ajouter au sélecteur. <br><br>  De même, créez le sélecteur «HVAC-FanSpeed»: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xj/lj/3x/xjlj3x3mjwt9wtxyh0ve4ucljse.png"></div><br>  Il ne reste plus qu'à créer le thermostat HVAC-Temp (le type d'appareil est Thermostat Setpoint). <br><br><h4>  Scripts </h4><br>  Je suis en quelque sorte plus proche des scripts Domoticz sur Lua (Devices), donc je fais ce qui me convient le mieux. <br><br>  Pour plus de précision - l'adresse IP de la passerelle IR dans mon réseau domestique est 10.40.20.254 et cette adresse apparaît dans l'un des scripts, vous devrez la fixer sur l'adresse de votre passerelle. <br><br>  Créez les trois scripts suivants. <br><br>  HVACauto: <br><br><pre> <code class="lua hljs">commandArray = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> deviceName,deviceValue <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">pairs</span></span>(devicechanged) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (deviceName==<span class="hljs-string"><span class="hljs-string">'HVAC-Temp'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">tonumber</span></span>(deviceValue) &lt; <span class="hljs-built_in"><span class="hljs-built_in">tonumber</span></span>(otherdevices_temperature[<span class="hljs-string"><span class="hljs-string">''</span></span>])) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> commandArray[<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span>] = <span class="hljs-string"><span class="hljs-string">'Set Level: 10'</span></span> <span class="hljs-comment"><span class="hljs-comment">--"Cool" else commandArray['HVAC-Mode'] = 'Set Level: 20' --"Heat" end commandArray['HVAC'] = "On" end end return commandArray</span></span></code> </pre> <br>  Ce script compare la température réglée du climatiseur et la température de la sonde «Pièce» afin de sélectionner le mode correct - «refroidissement» ou «chauffage». <br><br>  CVC: <br><br><pre> <code class="lua hljs">commandArray = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> deviceName,deviceValue <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">pairs</span></span>(devicechanged) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (deviceName == <span class="hljs-string"><span class="hljs-string">'HVAC'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> deviceValue == <span class="hljs-string"><span class="hljs-string">"Off"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">'  '</span></span>) commandArray[<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span>] = <span class="hljs-string"><span class="hljs-string">'Set Level: 0'</span></span> <span class="hljs-comment"><span class="hljs-comment">--"Off" else if (tonumber(otherdevices['HVAC-Temp']) &lt; tonumber(otherdevices_temperature[''])) then commandArray['HVAC-Mode'] = 'Set Level: 10' --"Cool" else commandArray['HVAC-Mode'] = 'Set Level: 20' --"Heat" end end end end return commandArray</span></span></code> </pre> <br>  Ce script surveille l'état de l'interrupteur «général» du climatiseur et sélectionne le mode de fonctionnement souhaité lors de la mise en marche ou de l'arrêt du climatiseur. <br><br>  Et le dernier script HVACmain: <br><br><pre> <code class="lua hljs">commandArray = {} <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> cmnd <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> deviceName,deviceValue <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">pairs</span></span>(devicechanged) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (deviceName==<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> deviceName==<span class="hljs-string"><span class="hljs-string">'HVAC-FanSpeed'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> deviceName==<span class="hljs-string"><span class="hljs-string">'HVAC-Temp'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (otherdevices[<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span>]==<span class="hljs-string"><span class="hljs-string">'Off'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> cmnd = <span class="hljs-string"><span class="hljs-string">'http://10.40.20.254/cm?cmnd=IRhvac{"Protocol":"COOLIX","Power":"Off"}'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> cmnd = <span class="hljs-string"><span class="hljs-string">'http://10.40.20.254/cm?cmnd=IRhvac{"Protocol":"COOLIX","Power":"On","Mode":"'</span></span>..otherdevices[<span class="hljs-string"><span class="hljs-string">'HVAC-Mode'</span></span>]..<span class="hljs-string"><span class="hljs-string">'","FanSpeed":"'</span></span>..otherdevices[<span class="hljs-string"><span class="hljs-string">'HVAC-FanSpeed'</span></span>]..<span class="hljs-string"><span class="hljs-string">'","Temp":'</span></span>..otherdevices[<span class="hljs-string"><span class="hljs-string">'HVAC-Temp'</span></span>]..<span class="hljs-string"><span class="hljs-string">'}'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(cmnd) <span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">execute</span></span>(<span class="hljs-string"><span class="hljs-string">"wget '"</span></span>..cmnd..<span class="hljs-string"><span class="hljs-string">"'"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> commandArray</code> </pre> <br>  Mais ce script est le plus important.  Il génère les commandes correctes avec les paramètres nécessaires et implémente une requête GET à la passerelle.  N'oubliez pas d'y fixer l'adresse IP de votre passerelle. <br><br>  En fait, c'est tout.  Vous pouvez basculer l'interface Domoticz sur les onglets correspondants et «appuyer sur les boutons» pour contrôler la climatisation.  Si tout est fait correctement, le système de climatisation sera contrôlé selon vos besoins. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5r/g0/yn/5rg0yn1zdupf6esyisywno0xck0.png" width="600"></div><br><h4>  CARACTÉRISTIQUES </h4><br>  Cette option via une passerelle IR présente un inconvénient - le manque de rétroaction.  C'est-à-dire  si quelqu'un utilise une télécommande standard, les statuts de Domoticz ne changeront pas et afficheront des informations qui ne sont plus pertinentes. <br><br>  En général, cela n'interfère pas vraiment (surtout si vous n'utilisez pas la télécommande IR, mais utilisez uniquement les capacités de l'UD). <br><br>  Vous pouvez bien sûr surveiller avec la passerelle IR quelles commandes sont envoyées via IR (la passerelle transmet ces informations via MQTT) et programmer un peu plus afin que même en utilisant la télécommande standard, les états et paramètres actuels soient définis dans le système DD. <br><br>  Mais même si je n'ai pas le temps pour ça, et je n'ai pas non plus de besoin particulier (il est plus facile de "regarder" dans le système de vidéosurveillance et de voir si la climatisation est allumée). <br><br><h2>  Et alors? </h2><br>  Naturellement, nous ne nous arrêtons pas là. <br><br>  Au minimum, l'implémentation de gestion actuelle est déjà beaucoup plus fonctionnelle que l'option «pour les plus petits». <br><br>  Après avoir «expédié» le climatiseur à Domoticz, j'ai également pris le contrôle avec Siri: <br><br><img src="https://habrastorage.org/webt/xb/ks/rh/xbksrht6x7oixacm704aq57tixs.png" align="left" width="350">  Après que l'occasion soit apparue de contrôler le système UD (et surtout la voix via Siri), la nécessité d'utiliser une télécommande infrarouge standard a disparu. <br><br>  Dans un avenir proche, nous écrirons un scénario «d'hiver» qui, en l'absence des propriétaires et à une température «extérieure» d'au moins -10, utilisera les ressources du climatiseur pour chauffer la maison (il est plus économe en énergie dans ce mode que les planchers chauffants électriques, mais moins confortable), et à leur retour, les propriétaires passent de nouveau au chauffage au sol. <br><br>  Bien sûr, il y aura un script «été» qui activera automatiquement le mode de refroidissement et maintiendra la température réglée de la maison. <br><br>  Naturellement, tous les cas d'utilisation possibles ne sont limités que par l'imagination.  Ne vous retenez pas;) <br><br><h2>  Partie III? </h2><br>  Pour le moment, le module WiFi annoncé pour le contrôle de la climatisation n'est pas apparu en vente. <br><br>  S'il y a du temps (longues soirées d'hiver), je prendrai une autre approche du module d'interface de climatisation et j'essaierai toujours de "capturer" les commandes internes de climatisation. <br><br>  Alors ... restez à l'écoute! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr473680/">https://habr.com/ru/post/fr473680/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr473668/index.html">Pourquoi Bitrix - Bitrix</a></li>
<li><a href="../fr473670/index.html">Stoloto: comment introduire un mobile à la loterie</a></li>
<li><a href="../fr473672/index.html">Pourquoi, Bitrix? Ou le monde des fées 1C</a></li>
<li><a href="../fr473676/index.html">La vulnérabilité de backport dans RouterOS compromet des centaines de milliers d'appareils</a></li>
<li><a href="../fr473678/index.html">Système pour recevoir une copie de la mémoire dans des appareils fonctionnant sous Android via des canaux sans fil</a></li>
<li><a href="../fr473684/index.html">De la folie des tulipes au commerce électronique: quelles sont les options et comment les investisseurs les utilisent aujourd'hui</a></li>
<li><a href="../fr473692/index.html">Routeur Wi-Fi Ennoble Phicomm K3C</a></li>
<li><a href="../fr473694/index.html">La Russie est un centre mondial de développement CAO. Le saviez-vous?</a></li>
<li><a href="../fr473702/index.html">Qu'est-ce que le sharding dans la blockchain terahash</a></li>
<li><a href="../fr473704/index.html">Bro vs. pas frère</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>