<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💔 👨🏻‍🌾 👵🏿 Unfälle helfen Ihnen beim Lernen 🥓 🔝 😥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In den letzten 3 Jahren ereigneten sich in Contour mehr als tausend Vorfälle mit unterschiedlichem Epos. Die Gründe sind unterschiedlich: Zum Beispiel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unfälle helfen Ihnen beim Lernen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/458924/">  In den letzten 3 Jahren ereigneten sich in Contour mehr als tausend Vorfälle mit unterschiedlichem Epos.  Die Gründe sind unterschiedlich: Zum Beispiel werden 36% durch Freisetzung von schlechter Qualität und 14% durch die Wartung von Eisen im Rechenzentrum verursacht.  Woher kommen die Statistiken?  Nach jedem Vorfall wird ein Obduktionsbericht verfasst.  Sie werden von den diensthabenden Ingenieuren verfasst, die auf die Meldung des Unfalls reagiert haben und als erste die Ursachen verstanden haben.  Post-mortem werden analysiert, identifiziert und die Ursachen von Vorfällen beseitigt, so dass solche Vorfälle in Zukunft nicht mehr auftreten.  Das war aber nicht immer der Fall. <br><br>  <strong>Alexey Kirpichnikov</strong> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">BeeVee</a> ) programmiert seit 2008 in Yandex.  Staus, die an speziellen Sportprojekten arbeiteten, waren Teamleiter des Yandex.Taxi-Backends.  Seit 2014 beschäftigt er sich mit DevOps und Infrastruktur in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kontur</a> - er entwickelt Tools, die Entwicklern aus Produktteams das Leben erleichtern.  Die Idee, Post-Mortem-Themen zu schreiben und zu analysieren, entstand vor fünf Jahren, und während dieser Zeit wurden Post-Mortem-Themen mit Vorlagen, einem Glossar, Memos, Screenshots und Analysen überwachsen.  Dies ist jedoch nicht das Schwierigste - <strong>es war schwieriger, die Trägheit, Ängste und Missverständnisse über die Bedeutung von Ereignisberichten unter Ingenieuren zu überwinden</strong> .  Was letztendlich passiert ist und welchen irreparablen Nutzen die "Sofa-Analyse" haben kann, ist die Entschlüsselung von Alexeys Bericht. <br><br><img src="https://habrastorage.org/webt/ur/pv/rw/urpvrwxzfruc7xv3b7vzpmn-eqc.jpeg"><br>  <i>Bitte beachten Sie, dass sich unter den unterschiedlich langen Tischbeinen die Bücher „Metrics“, „Tests“ und „Deploy“ befinden.</i> <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/tuSZq4rW8TQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  In Kontur geben sie nach der Einstellung eine Reihe von Souvenirs: einen Stift, einen Becher, ein Notizbuch.  Ich bin vor 5 Jahren zu SKB Kontur zu einem neuen Infrastruktur-Team gekommen, als das Unternehmen 25 Jahre alt wurde. <br><br><img src="https://habrastorage.org/webt/5l/-o/ov/5l-oovwyznszo5q4di-2zjn4cp0.jpeg"><br><br>  Die Kontur jener Zeit und auch heute ist ein Produktunternehmen, in dem mehrere Dutzend Produkte die gleiche Anzahl von Teams entwickelten, unabhängig von der Auswahl der Technologien und Werkzeuge. <br><br>  Zu dieser Zeit las ich zum ersten Mal „Project '' Phoenix ''“ und ließ mich von den neuen Ideen der DevOps-Praktiken inspirieren.  Ich fing an, meine Verbesserungsvorschläge in ein Notizbuch zu schreiben, und jetzt ist es ein Artefakt mit Kaffeeflecken und historischen Aufzeichnungen. <br><br><ul><li>  „ <strong>Überwachung!</strong>  Lassen Sie uns Grafana setzen, Metriken sammeln und Diagramme erstellen.  Wir werden besser verstehen, was in der Produktion passiert. "  Für 2014 ist dies eine ziemlich frische, neue Idee und eine solide DevOps-Praxis. “ </li><li>  " <strong>Autounfall!"</strong>  Wie viele Zip-Dateien können in den freigegebenen Ordner hochgeladen, auf dem Server entpackt und exe im Taskplaner unter Windows ausgeführt werden?  "Lassen Sie uns ein industrielles Bereitstellungssystem einführen und Releases darüber veröffentlichen, CI!" </li><li>  „ <strong>Obduktion</strong> !  Wenn es in der Produktion einen Unfall gibt, lassen Sie uns alle herausfinden, was es war, den Grund finden, einen Bericht schreiben und unsere Entwicklungs-, Test- und CI-Prozesse so ändern, dass es in Zukunft keine derartigen Vorfälle mehr gibt. “ </li></ul><br>  Seit 5 Jahren sind wir in all diesen Bereichen vorangekommen.  Wir haben unser eigenes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Moira-</a> Warnsystem, ein Anwendungs-Orchestrierungssystem und eine Reihe von Tools.  Aus all diesen <strong>Gründen erwies sich das Schreiben von Ereignisberichten als die am schwierigsten zu implementierende technische Praxis</strong> .  Ingenieure lieben alle Arten von Tools - befestigen Sie eine Art Hosting-System oder CI, schreiben Sie etwas, automatisieren Sie und schreiben Sie keine Berichte, obwohl diese Vorgehensweise von großem Nutzen ist. <br><br>  Ich werde Ihnen sagen, wie wir Post-Mortem-Systeme implementiert haben und welche Vorteile wir erhalten.  Vielleicht hilft unser Rechen dabei, diesen Weg schneller zu gehen und weniger Zapfen zu füllen.  Bevor wir über Post-Mortem sprechen, werden wir die Definition verstehen. <br><br><h2>  Was ist ein Vorfall? </h2><br>  Welches davon ist der Vorfall? <br><br><ul><li>  Beispiel Nr. 1.  Auf einer Blog-Plattform mit einer Million Benutzern gehen aufgrund eines Fehlers alle Einträge eines Benutzers verloren. </li><li>  Beispiel Nr. 2.  Der Service für Büromitarbeiter arbeitet wochentags von 9 bis 6 Uhr, zu anderen Zeiten sind keine Benutzer darin.  Der Dienst war in der Nacht von Samstag auf Sonntag zwei Stunden hintereinander nicht verfügbar, niemand bemerkte es. </li><li>  Beispiel Nr. 3.  Grafana mit Produktionsmetriken fiel um 15 Minuten.  In der Produktion ist nichts kaputt gegangen, aber die Grafiken waren nicht verfügbar. </li></ul><br>  Um zu verstehen, was von dieser Fakapy ist, wenden wir uns der Erfahrung der Gurus zu - Google, Atlassian, PagerDuty.  Gurus wissen, wie man Schichten und Bereitschaftsingenieure vorbereitet und wie man Berichte schreibt, um sie zu verstehen.  Ihre Online-Anleitungen enthalten Definitionen für Vorfälle. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Definition</a> von PagerDuty. <br><blockquote>  Ein Vorfall ist eine ungeplante Dienstunterbrechung oder -verschlechterung eines Dienstes, die sich auf die Verfügbarkeit des Dienstes für Benutzer auswirkt.  Ein schwerwiegender Vorfall ist ein Vorfall, der eine koordinierte Reaktion mehrerer Teams erfordert. </blockquote><br>  Klingt logisch, ist aber vage definiert.  In der Praxis hilft es wenig zu verstehen, was ein Vorfall ist und was nicht. <br><br>  Das Google <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Site Reliability Engineering-</a> Buch enthält klare Kriterien: <br><br><ul><li>  Benutzer bemerkten die Verschlechterung des Dienstes. </li><li>  Alle Daten gingen verloren. </li><li>  Es bedurfte beispielsweise der Intervention des diensthabenden Ingenieurs, um die Freigabe manuell zurückzusetzen. </li><li>  Die Lösung des Problems dauerte zu lange.  Wenn ein Problem in 2 Stunden gelöst wurde und dann eine Woche dafür aufgewendet wurde, ist dies ein Vorfall, der untersucht werden muss. </li><li>  Die Überwachung hat nicht funktioniert.  Sie haben beispielsweise von Benutzern von einem Problem erfahren. </li></ul><br>  Contour hat keine veröffentlichte Definition eines Fakap, aber wir haben unsere eigenen Kriterien formuliert, um zu bestimmen, was einen Vorfall darstellt. <br><br>  <strong>Externe oder interne Benutzer haben eine Verschlechterung des Dienstes festgestellt</strong> .  Beispiel Nr. 3 mit Grafana, das lag, ist ein klarer Vorfall.  Die Produktion wurde nicht unterbrochen und externe Benutzer haben dies nicht bemerkt, aber trotzdem ist es für Contour eine Fälschung, da interne Tools nicht funktionierten. <br><br>  <strong>Glück</strong> .  In Beispiel Nr. 2 lag der Dienst für Büroangestellte 2 Stunden nachts - es war ein Glück, dass er nachts fiel.  Das nächste Mal kann es unglücklich sein, und daher muss der nächtliche Vorfall auch vor Gericht gestellt werden, als ob er tagsüber passiert wäre. <br><br>  <strong>Der Vorfall betrifft mehrere Teams</strong> .  Wir übernehmen diese Definition von PagerDuty.  Das Parsen eines Vorfalls ist ein guter Grund für die Zusammenarbeit mehrerer Teams.  Die Kultur „Unsererseits ist die Kugel herausgeflogen, aber etwas ist für Sie kaputt gegangen - es ist Ihre Schuld“ wird durch eine gemeinsame Analyse beseitigt. <br><br>  <strong>Mindestens ein Ingenieur betrachtet dies als Vorfall</strong> .  Die vage, aber auch die wichtigste Definition.  Eine einfache Regel: Wenn der Ingenieur glaubt, dass es den Bericht wert ist, dann ist es den Bericht wert.  Wenn es Ihnen Angst macht, dass Ingenieure anfangen, Berichte für irgendjemanden zu schreiben und eine Kleinigkeit als Unfall bezeichnen, ist dies nicht der Fall.  <strong>Ingenieure sind vernünftige Leute, vertrauen Sie ihnen.</strong> <br><br>  Mit der Definition und verschiedenen Arten von Schaden aussortiert.  Fahren wir fort mit der Frage, wie Sie von Vorfällen profitieren können. <br><br><h2>  Was nützt Fakap? </h2><br>  Die einfachen Anweisungen, die ich weiter geben werde, können Sie selbst beantragen, ohne den Artikel bis zum Ende durchzugehen.  Aber noch bis zum Ende lesen. <br><br><h3>  Klassischer Unterricht </h3><br>  Finden Sie zuerst die Schuldigen.  Dann machen Sie die „pädagogische“ Arbeit mit den Ingenieuren. <br><br><ul><li>  Bitten Sie darum, beim nächsten Mal vorsichtiger zu sein. </li><li>  Wenn es nicht hilft, senden Sie es an Umschulungskurse.  Vielleicht lernen sie dort vorsichtiger zu sein. </li><li>  Wenn dies nicht hilft, entfernen Sie die Täter von der Arbeit mit kritischen Teilen des Systems.  Hören Sie auf, Entwickler in die Produktion zu lassen, wenn sie es dort vermasseln. </li><li>  Wenn nichts hilft, feuern Sie die schlechten und stellen Sie kompetente ein. </li></ul><br><blockquote>  Wenn Sie die Anweisung stört, sind dies gute Nachrichten. </blockquote><br>  Dieser Ansatz gilt als traditionell für klassische vertikal ausgerichtete Unternehmen mit einem Chef, der jeden schimpft und ihn entlassen kann.  Eine der Grundlagen der DevOps-Bewegung und der DevOps-Ideologie ist die Abkehr von vertikal integrierten zu horizontalen Organisationen mit größerem Vertrauen in die Mitarbeiter. <br><br>  Ich werde diesen Paradigmenwechsel mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anweisungen von</a> John Alspaw veranschaulichen, einem der Führer der DevOps-Bewegung, der zuvor für CTO bei Etsy gearbeitet hat.  Die Anweisung stammt aus seinem kanonischen Artikel von 2013, Blameless Post Mortem und eine gerechte Kultur. <br><br>  Fragen Sie die Ingenieure: <br><br><ul><li>  welche Ereignisse sie beobachteten; </li><li>  wann und welche Maßnahmen ergriffen wurden; </li><li>  Welches Ergebnis wurde von diesen Maßnahmen erwartet? </li><li>  aus welchen Annahmen kam; </li><li>  wie durch die Abfolge der aufgetretenen Ereignisse verstanden. </li></ul><br><blockquote>  Ingenieure müssen ohne Androhung einer Bestrafung gefragt werden. </blockquote><br>  Dies ist die Hauptsache in Johns Empfehlung. <br><br>  Die Gefahr der Bestrafung: Umschulung, Ausschluss aus der Produktion oder Entlassung, motiviert die Menschen zum Lügen.  Und die Wahrheit ist uns wichtig.  Ereignisbericht - Dies ist der sehr fehlende Feedback-Link bei der Entwicklung und Bereitstellung von Funktionen in der Produktion. <br><br>  Im alten Paradigma entwickelten die Entwickler das Fahrzeug, warfen es den Betriebsingenieuren über den Zaun und versuchten irgendwie, es zum Laufen zu bringen.  Sie ärgern sich über jedes Update, weil es alles kaputt machen kann, und die Ingenieure haben alles mit solchen Schwierigkeiten gestartet. <br><br><img src="https://habrastorage.org/webt/vu/l6/lo/vul6locumgejop93bd_wec32vgu.jpeg"><br><br><blockquote>  Der Feedback-Prozess hilft dabei, den Prozess, die Infrastruktur, die Tools und den Entwicklungsansatz so zu ändern, dass weniger Abstürze in der Produktion auftreten. </blockquote><br>  Dies wird Teamleiter und Entwicklungsmanager von der Nützlichkeit von Post-Mortem überzeugen.  Aber der Haken ist, dass es schwierig ist, Ingenieure dazu zu bringen, das zu tun, was sie für sinnlos und nutzlos halten.  Wir haben eine Ingenieurkultur in unserem Unternehmen, und ich kann nicht einfach kommen, das Dekret des CEO winken lassen und verlangen, dass jeder post mortem schreibt.  Ich muss die Ingenieure davon überzeugen. <br><br><img src="https://habrastorage.org/webt/r_/bx/z6/r_bxz6wh5wxshbqejunizuaspxk.jpeg"><br><br>  Wie kann man die Idee von Post-Mortem-Ingenieuren an Ingenieure "verkaufen"?  Um die Einwände zu umgehen, um zu zeigen, warum Post-Mortem cool ist, um den Nutzen der Berichte zu demonstrieren, dass dies nicht nur eine Abmeldung ist, wenn nur der Chef im Rückstand ist. <br><br><h2>  Einwand Nr. 1: Einmal </h2><br>  Dies ist das erste Problem des Ingenieurs, der die Fakap zerlegt - der Krieg wird enden, dann werden wir reden!  Wenn ein Fakap auftritt, möchte ich ihn schnell beheben, aber keine unverständlichen, langweiligen und langen Berichte schreiben. <br><br>  Um das Problem zu lösen, gibt es einen Life-Hack, wie man während eines Unfalls etwas richtig schreibt.  Er wurde von Artemy Lebedev populär gemacht: <br><blockquote>  „Es gibt eine einfache Möglichkeit, die Zeit zu organisieren - die„ progressive Jeepeg “-Methode.  In jeder Sekunde ist jedes Projekt zu 100% fertig, obwohl es möglicherweise um 4% weiterentwickelt ist.  Abhängig von der verfügbaren Zeit kann das Projekt bis zu einem Pixel ausgearbeitet oder in der Phase des konzeptionellen Skizzierens belassen werden. “ </blockquote><br>  Ich werde die progressive Jeepeg-Methode anhand eines Bildes veranschaulichen.  In einem langsamen Internet wird ein Bild nicht sofort, sondern schrittweise heruntergeladen. <br><br><img src="https://habrastorage.org/webt/ug/af/nu/ugafnukcgr0qse0ffzyd1_og898.jpeg"><br><br>  Während eines Feuers müssen Sie keinen kühlen und langen Bericht schreiben.  Es reicht Ihnen in der oberen linken Ecke.  Es reicht aus, die Dinge zu markieren, die sich nur schwer aus dem Gedächtnis wiederherstellen lassen.  Versuchen Sie nicht, einen zusammenhängenden literarischen Text zu einem Zeitpunkt zu schreiben, an dem bei der Produktion alles kaputt geht. <br><br><blockquote>  Führen Sie eine einfache Aktion aus - notieren Sie die Chronologie der Ereignisse. </blockquote><br><h3>  Zeitleiste </h3><br>  Die Zeitleiste ist dann sehr schwer wiederherzustellen, wenn sie nicht sofort aufgezeichnet wird.  Ein Beispiel für eine Aufnahme von einem echten Post-Mortem in der Schaltung. <br><br><pre><code class="plaintext hljs">15.01.18 17:25 YEKT    PrefixSearch  50   . ,     .</code> </pre> <br>  Dies ist eine kurze und einfache Beobachtung mit Zeitstempel.  Nach dieser Chronologie ist es später einfach, die Abfolge der Ereignisse wiederherzustellen und die Ursache für den Zusammenbruch zu finden.  Wenn Sie jedoch während eines Brandes nichts direkt aufzeichnen, ist es schwierig oder unmöglich, Ereignisse später wiederherzustellen. <br><br><h3>  Screenshots </h3><br>  Eine praktische Sache, insbesondere wenn Sie mit einer Website oder einer Desktop-Anwendung arbeiten.  Die Situation ist manchmal schwer in Worten zu beschreiben, und ein Screenshot ist nur ein Klick auf einen Hotkey. <br><br><img src="https://habrastorage.org/webt/a5/vw/ek/a5vwektoqktqkzwwatkfkirlbdk.jpeg"><br><br>  Der erste Einwand hat geklappt.  Ein kleiner Bericht während des Vorfalls ist nicht schwierig und nimmt keine wertvolle Zeit in Anspruch.  Wenn alles vorbei ist, muss es in einem verständlichen und kohärenten Dokument ausgefüllt und ausgeführt werden. <br><br><h2>  Einwand Nr. 2: Faulheit </h2><br>  Sie haben zwei Tage lang nicht geschlafen und einen schweren Unfall behoben, der bei all den Aufgaben, die Sie diese Woche erledigen wollten, tödlich zurückgeblieben ist.  Es stellt sich jedoch heraus, dass noch etwas getan werden muss, aber das Feuer wurde bereits gelöscht!  In diesem Moment holt unvorstellbare Faulheit auf. <br><br>  Das Problem vollständig zu besiegen wird nicht funktionieren.  Sie können Ihre Arbeit jedoch im Voraus erleichtern. <br><br><h3>  Muster </h3><br>  Dies ist in erster Linie.  Es besteht große Angst vor einem leeren Dokument, das mit aussagekräftigem Text ausgefüllt werden muss.  Es ist viel einfacher, wenn die Vorlage vorbereitet ist.  Normalerweise besteht es aus Abschnitten und Fragen in ihnen.  Wir geben die Antworten auf die Fragen in jedem Abschnitt ein und die Vorlage wird ausgefüllt. <br><br>  Vorlagen für Ereignisberichte sind groß.  Lesen Sie mit dem Guru ausführlich darüber.  Alle Dokumente und Bücher, auf die ich mich beziehe, enthalten Vorfallmuster, die von Unternehmen verwendet werden.  Nach unserer Erfahrung kann ich Folgendes hinzufügen. <br><br><h3>  Erstellen Sie ein Memo mit Beispielen </h3><br>  Unsere Vorlage enthält einen Abschnitt "Schaden" mit Unterabschnitten. <br><br>  <strong>Abschnitt "Qualitative Bewertung".</strong>  Es beschreibt, was der Ingenieur vor sich sieht, wenn er diesen Teil der Vorlage ausfüllt: <br><br><ul><li>  Welche Funktionalität hat nicht funktioniert, wie lange und für wen? </li><li>  ob es einen Verlust oder eine Beschädigung von Daten gab. </li></ul><br>  Nachdem der Ingenieur diese Stelle in der Vorlage erreicht hat, schreibt er: „Unsere Blog-Plattform enthält eine Million Benutzer. Wir haben alle Einträge eines von ihnen verloren.“  Dies ist viel einfacher als das Schreiben eines Aufsatzes von Grund auf neu, wie in einer Literaturstunde. <br><br>  <strong>Abschnitt "Quantifizierung":</strong> <br><br><ul><li>  wie viele Anfragen sind verschwunden; </li><li>  Wie viel Latenz ist bei den Metriken für Anwendungen und Clientanwendungen gestiegen? </li><li>  Wie viele Anrufe gehen verloren? </li><li>  Die Größe der Warteschlange für den technischen Support des Benutzers für das Problem. </li></ul><br>  Eine Reihe solcher Fragen ist das Muster. <br><br>  Ein Beispiel für eine der fertigen Vorlagen. <br><br><img src="https://habrastorage.org/webt/kv/4o/yq/kv4oyqs_2ukhu-o1hdrxgtc01s8.jpeg"><br><br><h3>  Fügen Sie ein Glossar hinzu </h3><br>  Ein weiterer Lebenshack für Unfallberichte, den ich im Buch mit dem Guru nicht gesehen habe.  Wenn Sie einen Bericht schreiben, ist es praktisch, Begriffe zu verwenden, die Sie gut kennen.  Wenn ich beispielsweise mit Graphite arbeite, in dem Metriken gespeichert sind, weiß ich genau, was „Relais“ ist.  Der Ingenieur, der den Bericht in einem Jahr lesen wird, ist möglicherweise nicht mit dem Begriff vertraut.  Es ist unwahrscheinlich, dass er den Bericht lesen kann, der aus unbekannten Wörtern besteht.  Wenn andererseits jeder Begriff und jede Definition im Bericht ständig gekaut wird, wird sie durch Faulheit einfach abgeschreckt und der Bericht wird nicht fertiggestellt. <br><br><blockquote>  Schreiben Sie ein kleines Glossar, in dem alle im Bericht verwendeten Begriffe beschrieben werden. </blockquote><br><img src="https://habrastorage.org/webt/it/fm/6z/itfm6zuhzxdahe90n6fqvaifhz0.jpeg"><br><br><h3>  Kopieren Sie alle Artefakte </h3><br>  Wenn Sie dem Bericht Artefakte hinzufügen: Schnappschüsse in Grafana, erstellt der Verlauf der Nachrichten im Chat, in dem der Vorfall mit anderen Ingenieuren analysiert wurde, Kopien.  Metriken können „verrotten“ und Chats ändern sich.  Vor einem Jahr waren Sie in Slack, jetzt in Telegram - der Chat-Link ist veraltet und funktioniert nicht, und die Aufbewahrungsmetriken fallen ab - sie werden ein Jahr lang gespeichert. <br><br><blockquote>  Artefakte kopieren - dieser Life-Hack erleichtert das Ausfüllen von Berichten. </blockquote><br><h2>  Einwand Nr. 3: Niemand wird lesen </h2><br>  Die größte und unverständliche Frage der Ingenieure lautet: „Wer wird diese Berichte lesen?“  Angenommen, ich habe die Faulheit überwunden und eine Chronologie der Ereignisse während des Unfalls geschrieben.  Dann sammelte er seine Kräfte und fügte einen mehrseitigen Bericht über das Geschehen und die Ursachen des Unfalls hinzu.  Wenn es jedoch kein Verständnis dafür gibt, wer all dies lesen und wer davon profitieren wird, besteht kein Wunsch, Berichte auszufüllen. <br><br><blockquote>  Post-mortem ist ein Feedback im Prozess der kontinuierlichen Verbesserung von Entwicklungsprozessen. </blockquote><br>  In jedem Guru-Buch, zum Beispiel im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Atlassian Incident Handbook</a> , steht, dass es gemäß den Ergebnissen jedes Post-Mortem erforderlich ist: <br><br><ul><li>  Aufgaben in der Entwicklung formulieren; </li><li>  Erstellen Sie Aufgaben im Bugtracker, von denen Ihre Entwickler sie übernehmen werden. </li><li>  Setzen Sie Links von Post-Mortem zu diesen Aufgaben. </li></ul><br>  <strong>Das Feedback ist geschlossen</strong> : Hier ist eine Obduktion, hier darin <strong>Aktionselemente</strong> - Aufgaben, die erledigt werden müssen, damit der Unfall nicht erneut auftritt.  Aufgaben fallen in den Rückstand des Teams, das Team entwickelt sie, rollt aus - wieder das Fakap und Post-Mortem.  Das Rad von Samsara hat sich geschlossen. <br><br>  Darauf laufen alle Gurus zusammen.  Es gibt nichts zu streiten - die Vorteile liegen auf der Hand. <br><br>  Ein Beispiel für Aufgaben mit Aktionselementen aus einer echten Obduktion. <br><br><img src="https://habrastorage.org/webt/bi/rh/-u/birh-ug-du80xmxqt3eqvdrdst8.jpeg"><br><br>  Aber wir bei Kontur haben dem einen Analysten hinzugefügt. <br><br><h2>  Sofa Analytics </h2><br>  Wir haben den Vorfall isoliert analysiert.  Der Fehler trat alleine in einem Team, in einem Hosting-System auf - etwas ist kaputt gegangen, wir haben es behoben. <br><br>  Aber es gibt viele Zwischenfälle.  In den letzten drei Jahren haben sich mehr als 1.000 Ereignisberichte in der Rennstrecke angesammelt.  Ich würde gerne wissen, ob es möglich ist, von der gesamten Masse der gesammelten Berichte zu profitieren, und nicht nur von jedem einzelnen.  Ist es möglich, auf ihrer Grundlage die Statistiken des Systems zu berechnen und zu sehen, was im gesamten System verbessert werden kann? <br><br>  In Kontur arbeitet ein spezielles Infrastruktur-Team, das sich mit der Analyse von Obduktionen befasst und die Ergebnisse und Schlussfolgerungen auf der Grundlage der gesamten Masse der gesammelten Berichte veröffentlicht.  Wir nennen dies "Sofaanalyse".  Ich werde Fragmente eines Artikels des Teams geben, der in unserem internen Netzwerk für Mitarbeiter veröffentlicht wird. <br><br>  Was analysieren wir in der Sofaanalyse? <br><br><h3>  Fakap Dauer </h3><br><br><img src="https://habrastorage.org/webt/2b/yq/wz/2byqwzifhia0nzxypk0eqmqrdh8.jpeg"><br><br>  <em>Im Diagramm gibt es neben der letzten Spalte, in der die Zeit unbekannt ist, zwei weitere offensichtliche Peaks.</em> <br><br>  <strong>Dauer in der Größenordnung von einer Stunde</strong> - orange und rote Balken.  Die meiste Zeit wurde damit verbracht, Informationen darüber zu übermitteln, was passiert ist, vom Ingenieur, der den Unfall bemerkt hat, an den Ingenieur, der weiß, wie man ihn repariert.  <strong>Das Problem ist die Kommunikation</strong> . <br><br>  Wenn wir unsere Werkzeuge so reparieren, dass der Techniker, der das Problem behebt, schneller Informationen erhält, werden die Dauer der Fakaps und der Schaden durch sie erheblich reduziert.  Dies ist etwas, das wir nicht erkennen würden, wenn wir einen Fakap einzeln betrachten würden. <br><br>  <strong>Dauer ca. 12 Stunden</strong> - eine gelbe Säule.  Die Erklärung für die Tatsache, dass es viele Fakaps gibt, die länger als 12 Stunden dauern, ist einfach: Sie haben die Veröffentlichung am Abend eingeführt, und am Morgen kamen Benutzer und alles brach zusammen.  Die Schlussfolgerung, was zu tun ist, um die Anzahl solcher Fakaps zu verringern, liegt auf der Hand. <br><br><h3>  Qualitätsschaden </h3><br><img src="https://habrastorage.org/webt/js/l0/i9/jsl0i9hoqlos7n2uloqh0nnki_y.jpeg"><br><br>  Qualitativer Schaden wird in mehrere Kategorien unterteilt.  Top 3 beinhaltet: <br><br><ul><li>  Unzugänglichkeit, Fehler; </li><li>  Bremsen, erhöhte Latenz; </li><li>  sichtbar falsches Verhalten. </li></ul><br>  Laut Analytik ist die überwiegende Mehrheit dieser Fehler.  Einerseits sind dies gute Nachrichten.  Drei Arten der häufigsten Fehler sind leicht zu erkennen: Wir passen die Metriken an die Latenz und die Anzahl der Fehler an und bemerken solche Dinge schnell. <br><br>  Die schlechte Nachricht ist, dass es die meisten dieser Fehler gibt.  Dies sind einfache technische Fehler, was bedeutet, dass wir bei den Pipeline-Tests etwas verbessern, mehr Stresstests durchführen und das Überwachungssystem verbessern können. <br><br><h3>  Auslöser </h3><br>  Dies führte direkt zum Zusammenbruch, das heißt nicht zur Grundursache des Unfalls, sondern zum „letzten Strohhalm“: Die Protokolle füllten die Festplatte und aus diesem Grund brach alles, wurde freigegeben - alles explodierte. <br><br><img src="https://habrastorage.org/webt/vi/u5/iy/viu5iyoxhj_ykvpg9itnr-7qy0u.jpeg"><br><br>  An erster Stelle steht die „Update-Installation“.  Dieser Grund ermöglicht es uns zu verstehen, in was wir als Infrastruktur-Team investieren sollten.  Zum Beispiel, um das Bereitstellungssystem zu verbessern und eine kanarische Bereitstellung einzuführen.  Dies ist der Punkt der Anstrengung, der den größten Einfluss auf die Qualität unserer Systeme hat. <br><br><blockquote>  Dies ist der Punkt aller Analysen - um zu verstehen, wo ein kleines Infrastruktur-Team derzeit in die Bedingungen begrenzter Ressourcen investieren sollte. </blockquote><br>  Was kann verbessert werden - Alarm oder Bereitstellung?  Was tun - Hosting oder die Schönheit von Grafiken? <br><br>  Hier ist ein weiterer guter Einblick.  An zweiter Stelle steht "die Ursache ist unbekannt".  Dies ist ein Indikator für eine schlechte Berichterstattung über Vorfallberichte. <br><br><h3>  Mögliche "Pillen" </h3><br>  Dies ermöglicht eine einfache technische Lösung, um die Anzahl der Unfälle eines bestimmten Typs zu reduzieren.  Zum Beispiel wissen wir, dass die wichtigsten Dinge, die die Anzahl der Fakaps reduzieren, Benachrichtigungen vom Überwachungssystem sind.  Wenn es mehr Warnungen bei der Überwachung dieser Ereignisse gäbe, wie viele Vorfälle könnten wir verhindern?  Der Prozentsatz gibt an, wie viel: <br><br><ul><li>  auf die Anzahl der HTTP-Fehler vom Client - 10%; </li><li>  zum Auftreten neuer Arten von Fehlern in den Protokollen: Installation, Benachrichtigungseinstellungen - 8%; </li><li>  auf Systemressourcen: CPU, Speicher, Festplatte, Threads, GC - 6%. </li></ul><br>  Wenn die Warnung korrekt konfiguriert wurde und der gewünschte Techniker rechtzeitig eine Benachrichtigung erhielt, würden 24% der Vorfälle entweder nicht auftreten oder eine viel kürzere Dauer haben.  Diese Schlussfolgerung kann auf der Grundlage der Analyse der gesamten Masse der Vorfälle gezogen werden. <br><br>  Hier werde ich noch einmal für unser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Moira-</a> Warnsystem werben, das sich in Open Source befindet. <br><br><img src="https://habrastorage.org/webt/fz/yu/tb/fzyutbmpcgj2xnarmqhxwnqbrjk.jpeg"><br><br>  Wenn Sie Graphit haben, können Sie es herunterladen und verwenden.  Ich hoffe, es wird weniger Zwischenfälle geben. <br><br><h3>  Empfehlungen </h3><br>  Organisatorische Empfehlungen, denen das Team folgen kann, und die Anzahl der Unfälle reduzieren.  Unsere Top 3. <br><br><ul><li>  <strong>Die Ähnlichkeit der Test- und Kampfstätten</strong> .  5% der Vorfälle ereigneten sich aufgrund der Tatsache, dass die Teststelle der Kampfstelle nicht ähnlich genug war. </li><li>  <strong>Abwärtskompatibilität in Releases</strong> .  Die Version wurde entleert, war nicht abwärtskompatibel mit der vorherigen, es traten Datenmigrationen auf - 4% der Fehler. </li><li>  <strong>Ablehnung von Nachtfreigaben</strong> .  Wenn Sie aufhören, Veröffentlichungen zu verbreiten, die brechen, verschwinden am Abend weitere 4% der Vorfälle. </li></ul><br>  Ich betone, dass dies keine Anweisung ist, sondern eine Geschichte darüber, wie wir Analysen gesammelt haben.  Ihre Analysen können unterschiedlich sein. <br><br><h2>  Wie schreibe ich? </h2><br>  Wenn Sie feststellen, dass Incident Analytics eine coole Sache ist und Sie Berichte schreiben müssen, erkläre ich Ihnen, wie es geht. <br><br><h3>  Post-Mortem und Aufgaben in einem Bug-Tracker </h3><br>  Im Bugtracker gibt es im Gegensatz zu Google Text &amp; Tabellen oder Wiki feste Felder, für die Sie eine Reihe von Werten festlegen können.  Dies erleichtert die spätere Analyse von Grafikstatistiken. <br><br>  Im SRE-Buch stellt Google eine Vorlage in Google Text &amp; Tabellen bereit, in der Berichte in das interne Dokument geschrieben werden.  Ich kann mir nicht vorstellen, wie wir die Analysen sammeln können, die wir aus unstrukturierten Google-Dokumenten sammeln. <br><br>  Wir schreiben Berichte im selben Bug-Tracker wie die Hauptaufgaben, da wir die Aufgabe mit dem Post-Mortem verbinden können.  Schauen wir uns das Post-Mortem an und sehen sofort, welche Aufgaben geschlossen sind, welche nicht und welche noch zu erledigen sind. <br><br><h3>  Erstellen Sie spezielle Felder </h3><br>  Ich habe bereits über spezielle Bereiche gesprochen.  Wir haben folgendes. <br><br><ul><li>  Der Anfang und das Ende des Fakaps können automatisch analysiert werden.  Wenn Sie maschinenlesbare Zeitstempel einfügen, können Sie die Dauer des Fakaps darstellen. </li><li>  Beginn und Ende der Untersuchung. </li><li>  Auslöser  Richten Sie eine Dropdown-Liste mit Triggern ein. </li><li>  Wie bereits erwähnt. </li><li>  Quantitativer und qualitativer Schaden. </li><li>  Betroffene Teams und Dienste. </li></ul><br>  Mit allen Daten aus speziellen Feldern können Sie verstehen, wie Ihre Infrastruktur funktioniert. <br><br>  Ein Beispiel für unseren vollständigen Vorfallbericht. <br><br><img src="https://habrastorage.org/webt/2r/dk/c3/2rdkc3flemuokdisdblhr6ls0cg.jpeg"><br><br>  Die Felder der rechten Spalte werden nur durch die Auswahl aus den Dropdown-Listen ausgefüllt. <br><br><h3>  Stellen Sie ein Team von Ingenieuren zusammen, denen Qualität am Herzen liegt </h3><br>  Um Berichte zu erhalten, die Ihnen helfen, die Entwicklung Ihrer Infrastruktur zu verstehen, benötigen Sie Mitarbeiter, die sich um die Qualität Ihrer Dienste kümmern.  Nicht unbedingt sind es Ingenieure, die sich ausschließlich mit der Vollzeitanalyse von Obduktionen befassen.  Es ist wichtig, dass dies Menschen sind, die sehr besorgt darüber sind, was passiert.  Von Zeit zu Zeit sammeln sie sich, analysieren die gesamte Masse der Vorfälle, schreiben große Artikel und bringen Vorteile - schließen Sie den Feedback-Ring. <br><br>  Unser Team heißt Q-Team - vom Wort "Qualität".  Es hat 3 Mitarbeiter - einer der talentiertesten Ingenieure des Unternehmens, die in der Infrastruktur arbeiten. <br><br><h2>  Insgesamt </h2><br>  <strong>Lesen Sie den Guru -</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">John Allspaws Artikel</a> und Incident Management-Bücher: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Site Reliability Engineering</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PagerDuty Post-Mortem-Prozess</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Atlassian Incident Handbook</a> . <br><br>  Und wenn Sie morgen zur Arbeit kommen, machen Sie einfach <strong>die ersten Schritte</strong> : <br><br><ul><li>  Starten Sie ein Projekt für Fakaps im Bugtracker, in dem Sie Aufgaben ausführen. </li><li>  Nehmen Sie eine Vorlage - versuchen Sie nicht, Ihre eigene, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">unsere</a> oder Google in SRE zu schreiben. </li><li>  Wenn etwas explodiert, schreibe einfach. </li></ul><br>  In dem Moment, in dem Sie den ersten, zweiten und dritten Bericht schreiben, werden Sie keine schönen Analysen mit mehrfarbigen Spalten haben.  Aber nach ein oder zwei Jahren, wenn sich die Daten angesammelt haben, blicken Sie zurück und bedanken sich für den ersten Schritt. <br><br><blockquote>  Wir hoffen, dann werden Sie sich an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Alexei</a> erinnern und ihm für die Geschichte einer solchen Erfahrung danken.  Und wir werden wiederum versuchen, neue nützliche Berichte in das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DevOpsConf-</a> Programm aufzunehmen, Empfehlungen, von denen aus Sie sich bewerben können.  Die Konferenz findet vom <strong>30.</strong> bis 1. <strong>September 2019 statt</strong> . Bis zum 20. August warten wir noch auf Bewerbungen von DevOps-Unterstützern, aber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">12</a> wurden bereits genehmigt, dh der Wettbewerb wird näher an der Frist höher sein. <br><br>  Wenn Sie Ihre Erfahrungen teilen möchten, entscheiden Sie sich und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">senden Sie Ihre Abstracts</a> .  Wenn Sie Programmnachrichten erhalten möchten, abonnieren Sie unseren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Newsletter</a> und unseren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Telegrammkanal</a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de458924/">https://habr.com/ru/post/de458924/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de458914/index.html">Was (nicht) Sie wissen müssen, um Spiele auf Unity zu erstellen</a></li>
<li><a href="../de458916/index.html">Unter der Haube von React. Wir schreiben unsere Implementierung von Grund auf neu</a></li>
<li><a href="../de458918/index.html">Was Sie aus dem Design von Hyper-Casual-Spielen lernen können</a></li>
<li><a href="../de458920/index.html">Konferenz für DevOps-Fans</a></li>
<li><a href="../de458922/index.html">So wechseln Sie von ESXi zu KVM / LXD und verlieren nicht den Verstand</a></li>
<li><a href="../de458926/index.html">Die Tragödie kommt nicht allein</a></li>
<li><a href="../de458928/index.html">XLNet gegen BERT</a></li>
<li><a href="../de458930/index.html">Wie Perm-Studenten das Finale der internationalen Datenanalyse-Meisterschaft des Data Mining Cup 2019 erreichten</a></li>
<li><a href="../de458932/index.html">Yota - oder wie Sie alles herausfinden können</a></li>
<li><a href="../de458934/index.html">Bereitstellen von Anwendungen auf mehreren Kubernetes-Clustern mit Helm</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>