<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤ğŸ» ğŸš´ğŸ¾ ğŸ‘‰ğŸ¾ Repositori npm lokal (offline) ğŸ˜« âš’ï¸ ğŸ“°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Latar belakang 


 Memutuskan untuk menjual dengan harga tinggi, saya berakhir di majikan, di mana tidak ada Internet tidak hanya di sirkuit industri,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Repositori npm lokal (offline)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453614/"><p><img src="https://habrastorage.org/webt/39/e0/id/39e0idv0ornzrz6n09uxnwpvf3m.png"></p><br><h3>  Latar belakang </h3><br><p>  Memutuskan untuk menjual dengan harga tinggi, saya berakhir di majikan, di mana tidak ada Internet tidak hanya di sirkuit industri, tetapi juga di perdananya (situasinya sebenarnya tidak jarang di banyak, sehingga untuk berbicara, perusahaan).  Ada IE di konsol tempat Anda, pembaca saya yang terkasih, tentu saja dapat melihat Habr atau stackoverflow, tetapi tidak lebih.  Secara umum, saya ulangi, situasinya tidak luar biasa, Anda dapat hidup dengannya - ini dia, laptop pribadi saya di mana saya menulisnya, ada di atas meja ... apakah wifi diangkat oleh banyak karyawan, apakah seluler sebagai modem, secara umum, jika itu bukan pertahanan / layanan apa pun dari tiga huruf (di sini saya menyarankan Anda untuk pergi dengan cara resmi-mahal, seperti yang akan menjadi beberapa kata di bawah) dan tidak ada layanan pemantauan radio, maka Anda bebas untuk melakukan apa pun dengan laptop pribadi Anda (dalam diperbolehkan :)), yah, setidaknya begitulah yang terlihat dengan kita.  Ada kemungkinan menyeret file ke lingkungan dev, tapi saya benar-benar tidak suka keputusan untuk menyimpan node_modules dalam basis kode dan saya menggulung lengan baju saya (saya menggulung lengan baju saya berkali-kali baik tentang pindah dari TFS ke git, dan tentang repo nuget lokal, tetapi ini adalah cerita yang terpisah, juga bukan tanpa drama, tetapi tentang mereka entah bagaimana lain kali).  Ada beberapa solusi yang agak mahal untuk masalah ini, adalah mungkin bahwa saya bahkan dapat mendorong beberapa Artifactory, tetapi ketika saya membayangkan berapa banyak ini akan mengambil dan yang paling penting, berapa lama itu akan diputuskan, dikoordinasikan dan diimplementasikan, diputuskan untuk bertindak dengan murah dan marah. </p><br><p>  <i>Penafian: karena saya memiliki lingkungan windows, saya menjelaskan secara rinci pekerjaan di konsol Windows, namun, pada dasarnya, perbedaan hanya akan ada di akhir ketika Anda ingin meningkatkan hasil akhir sebagai layanan / daemon.</i> </p><br><h3>  Bukan Tomi, belahan jiwa, bagaimana? </h3><a name="habracut"></a><br><p>  Dalam aksi yang terlibat: </p><br><ul><li>  Komputer dengan akses internet - sebut <i>sumbernya</i> </li><li>  Komputer tanpa akses, di jaringan perusahaan - sebut saja <i>mesin target</i> </li></ul><br><p>  Harus ada node.js pada sumber dan pada mesin target (cara termudah adalah jika satu atau versi serupa). </p><br><p>  Buat ayah di sumbernya, di suatu tempat dan sebut saja, misalnya, verdaccio: </p><br><pre><code class="bash hljs">mkdir verdaccio <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> verdaccio</code> </pre> <br><p>  Setelah menginstal Verdaccio secara lokal, ini adalah hal yang sangat berguna, berdasarkan proyek sinopia lama.  Baca lebih lanjut di sini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://verdaccio.org/</a> . </p><br><p>  Singkatnya, ini adalah proksi untuk npm, yang dapat melakukan cache.  Untuk begitu banyak pengguna paket ini, peluang utama adalah kemampuan untuk mempublikasikan secara pribadi, tetapi kasus saya sedikit berbeda, saya ingin menyimpan semua yang saya butuhkan untuk bekerja dan sedikit lagi, dan kemudian mentransfer semuanya ke mesin target.  Ke depan, saya akan mengatakan bahwa semuanya berjalan tanpa rasa sakit, kecuali untuk transfer node-sass.  Itu adalah akar dari tarbalnya yang saya habiskan satu setengah hari (ada bagian asli yang dimuat dari github selama instalasi atau akan gyp, jika tidak berhasil, pikirkan, itu akan dibangun pada setiap mesin pengembangan lokal, yang benar-benar tidak nyaman), tetapi mungkin cerita lain juga. </p><br><p>  Semuanya sederhana di sini: </p><br><pre> <code class="bash hljs">npm i verdaccio</code> </pre> <br><p>  Secara umum, manual ini merekomendasikan untuk menginstal secara global, tetapi pada kenyataannya ini tidak diperlukan sama sekali, terlebih lagi, kami ingin melokalisasi semua aib ini dalam satu folder, sehingga nantinya dapat dengan mudah disalin.  Karena begitu ... </p><br><p>  Jalankan paket, itu akan membuat penyimpanan dan konfigurasi default: </p><br><pre> <code class="bash hljs">.\node_modules\.bin\verdaccio.cmd</code> </pre> <br><p><img src="https://habrastorage.org/webt/qg/pe/w2/qgpew2ztbix-dqcfmdgb7t0rcq8.png"></p><br><p>  Lalu, semua orang memberi tahu kami di mana konfigurasi itu, di mana kami tergantung. </p><br><p>  Pada prinsipnya, Anda sudah dapat pergi ke alamat yang ditentukan dan melihat sesuatu seperti ini: </p><br><p><img src="https://habrastorage.org/webt/7l/-g/cm/7l-gcmf6yzdnr9lxfmkksuxckla.png"></p><br><p>  Sekarang kita perlu melakukan beberapa hal: </p><br><ul><li><p>  Kosongkan npm-cache ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lebih detail di sini</a> , singkatnya, bunuh konten <em>% AppData% / npm-cache</em> ) </p><br></li><li><p>  Lari </p><br><pre> <code class="bash hljs">npm <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> registry http://localhost:4873/</code> </pre> <br></li><li><p>  Salin config.yaml ke folder verdaccio kami yang nyaman </p><br></li><li><p>  Pastikan bagian uplink dari file ini terlihat seperti ini: </p><br><pre> <code class="plaintext hljs">uplinks: npmjs: url: https://registry.npmjs.org/ cache: true</code> </pre> <br></li><li><p>  Di akhir konfigurasi tambahkan: </p><br><pre> <code class="plaintext hljs">listen: - 0.0.0.0:4873</code> </pre> <br><p>  Jika ini tidak dilakukan, maka Anda tidak akan dapat mencapai alamat lokal nanti di mesin target. </p><br></li><li><p>  Sebenarnya kita sudah siap, sekarang semua paket yang kita ambil melalui instalasi npm akan menetap di ./storage, itulah yang kita butuhkan.  Kami mengembalikan proyek target, menetapkan tambahan: </p><br></li></ul><br><pre> <code class="bash hljs">npm i node-windows</code> </pre> <br><p>  Itu saja, setelah itu kami mengambil folder dan mengirimkannya ke mesin target dengan cara apa pun yang memungkinkan untuk Anda (hak <strong>admin</strong> diperlukan di sana, ya).  Anda sudah dapat di sana, Anda dapat langsung membuat file di root folder installservice.js: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Service = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'node-windows'</span></span>).Service; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> svc = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Service({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'VerdaccioSvc'</span></span>, <span class="hljs-attr"><span class="hljs-attr">description</span></span>: <span class="hljs-string"><span class="hljs-string">'Verdaccio - npm local repository'</span></span>, <span class="hljs-attr"><span class="hljs-attr">script</span></span>: <span class="hljs-string"><span class="hljs-string">' &lt;   &gt;\\node_modules\\verdaccio\\bin\\verdaccio'</span></span>, <span class="hljs-attr"><span class="hljs-attr">nodeOptions</span></span>: [] }); svc.on(<span class="hljs-string"><span class="hljs-string">'install'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{svc.start();}); svc.install();</code> </pre> <br><p>  Kami meluncurkan: </p><br><pre> <code class="bash hljs">node installservice.js</code> </pre> <br><p>  <strong>Selamat menikmati!</strong> </p><br><p>  Secara umum, kami berhasil mendapatkan repositori lokal dengan sedikit darah, membangun membangun, pengembang mengembangkan segala sesuatu di dunia ini di tempat mereka.  Dan ya, sinkronisasi selanjutnya dilakukan untuk menyalin konten <em>./storage</em> . </p><br><p>  Semua ini ditulis sebagian sebagai memo, dan sebagian untuk menghemat waktu untuk Anda (tugas tidak mungkin diselesaikan terlalu sering), karena jika bunga batu tidak keluar, jangan ragu untuk menulis, ada kemungkinan saya lupa untuk menggambarkan semacam detail, dan jika saya tidak lupa, tiba-tiba, maka saya akan membantu ... </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id453614/">https://habr.com/ru/post/id453614/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id453598/index.html">Jepang: negara dengan akal sehat sehingga di beberapa tempat itu tidak rasional</a></li>
<li><a href="../id453602/index.html">Apakah basis data tinggal di Kubernetes?</a></li>
<li><a href="../id453608/index.html">Pythonhosted.org secara keliru diblokir oleh Roskomnadzor</a></li>
<li><a href="../id453610/index.html">Cara menjual bisnis SD-WAN</a></li>
<li><a href="../id453612/index.html">Sepak bola di awan - mode atau kebutuhan?</a></li>
<li><a href="../id453616/index.html">Apa yang salah dengan hukum federal "On Electronic Signatures" (63-FZ), dan cara memperbaikinya</a></li>
<li><a href="../id453618/index.html">Bagaimana kami bekerja dengan ide-ide dan bagaimana LANBIX lahir</a></li>
<li><a href="../id453622/index.html">Programmer Chip G-Shield: Menulis Sertifikat Digital ke Chips pada Tahap Produksi</a></li>
<li><a href="../id453626/index.html">Petualangan di aliran yang terpisah. Laporan Yandex</a></li>
<li><a href="../id453628/index.html">Apa yang akan Anda bayar dalam 20 tahun?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>