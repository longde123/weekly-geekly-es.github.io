<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî∑ üôèüèø üçÇ Verringern der Konnektivit√§t mithilfe von DI zur Verbesserung der Codetestbarkeit, Implementierungsbeispiel ‚úãüèº üê∫ ü•ü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Am Anfang des Artikels m√∂chte ich sofort darauf hinweisen, dass ich nicht vorgebe, neu zu sein, sondern nur eine Gelegenheit wie IoC DI teilen / zur√ºc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Verringern der Konnektivit√§t mithilfe von DI zur Verbesserung der Codetestbarkeit, Implementierungsbeispiel</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422161/"><p>  Am Anfang des Artikels m√∂chte ich sofort darauf hinweisen, dass ich nicht vorgebe, neu zu sein, sondern nur eine Gelegenheit wie IoC DI teilen / zur√ºckrufen m√∂chte. </p><br><p>  Au√üerdem habe ich fast keine Erfahrung mit dem Schreiben von Artikeln, dies ist meine erste.  Ich habe mein Bestes versucht, wenn Sie nicht streng urteilen. </p><br><h2 id="o-chem-voobsche-rech">  Wor√ºber reden wir? </h2><br><p>  Die meisten Rails-Projekte, auf die ich gesto√üen bin, haben ein gro√ües Problem.  Entweder haben sie √ºberhaupt keine Tests oder ihre Tests √ºberpr√ºfen einen unbedeutenden Teil, w√§hrend die Qualit√§t dieser Tests zu w√ºnschen √ºbrig l√§sst. </p><br><p>  Der Hauptgrund daf√ºr ist, dass der Entwickler einfach nicht wei√ü, wie er den Code schreiben soll, so dass in Komponententests nur der von ihm geschriebene Code getestet wird und nicht der Code, der beispielsweise in einem anderen Dienstobjekt oder einer anderen Bibliothek enthalten ist. </p><br><p>  Au√üerdem bildet sich im Kopf des Programmierers eine logische Kette. Warum sollte ich den Gesch√§ftslogikcode √ºberhaupt in eine andere Ebene einf√ºgen, f√ºge ich hier nur ein paar Zeilen hinzu und alles wird den Anforderungen des Kunden entsprechen. </p><br><p>  Und das ist sehr schlecht, weil Unit-Tests ihre Resistenz gegen Refactoring verlieren und die Verwaltung von √Ñnderungen in einem solchen Code schwierig wird.  Die Entropie nimmt allm√§hlich zu.  Und wenn Sie bereits Angst haben, Ihren Code umzugestalten, sind die Dinge sehr schlecht. </p><br><p>  Um solche Probleme in der Java-Welt zu l√∂sen, gibt es seit langem eine Reihe von Bibliotheken, und es ist wenig sinnvoll, das Rad neu zu erfinden, obwohl zu beachten ist, dass diese L√∂sungen sehr umst√§ndlich sind und es nicht immer einen Grund gibt, sie zu verwenden.  Rubististen scheinen solche Probleme irgendwie anders zu l√∂sen, aber ehrlich gesagt habe ich immer noch nicht verstanden, wie.  Deshalb habe ich mich entschlossen zu teilen, wie ich mich dazu entschlossen habe. </p><a name="habracut"></a><br><h2 id="obschaya-ideya-kak-reshat-eto-v-ruby-proektah">  Die allgemeine Idee, wie dies in Ruby-Projekten gel√∂st werden kann </h2><br><p>  Die Grundidee ist, dass wir Objekte mit Abh√§ngigkeiten verwalten k√∂nnen sollten. </p><br><p>  Betrachten Sie ein Beispiel: </p><br><pre><code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserService</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initialize</span></span></span><span class="hljs-class">() @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">notification_service</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NotificationService</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">block_user</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">user</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">user</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">block!</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">notification_service</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">send</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">user</span></span></span><span class="hljs-class">, '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">you</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">have</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">been</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">blocked</span></span></span><span class="hljs-class">') </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  Um die block_user-Methode zu testen, befinden wir uns in einem unangenehmen Moment, da die Benachrichtigung von NotificationService f√ºr uns funktioniert und wir gezwungen sind, einen minimalen Teil dieser Methode zu verarbeiten. <br>  Inversion erm√∂glicht es uns, einfach aus dieser Situation herauszukommen, wenn wir beispielsweise einen UserService wie folgt implementieren: </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserService</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initialize</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">notification_service</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NotificationService</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class">) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">notification_service</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">notification_service</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">block_user</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">user</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">user</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">block!</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">notification_service</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">send</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">user</span></span></span><span class="hljs-class">, '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">you</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">have</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">been</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">blocked</span></span></span><span class="hljs-class">') </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  Beim Testen √ºbergeben wir nun ein Objekt als NotificationService-Mock und stellen sicher, dass block_user die Methoden notification_service in der richtigen Reihenfolge und mit den richtigen Argumenten abruft. </p><br><pre> <code class="ruby hljs">RSpec.describe UserService, <span class="hljs-symbol"><span class="hljs-symbol">type:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:service</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> let (<span class="hljs-symbol"><span class="hljs-symbol">:notification_service</span></span>) { instance_double(NotificationService) } let (<span class="hljs-symbol"><span class="hljs-symbol">:service</span></span>) { UserService.new(notification_service) } describe <span class="hljs-string"><span class="hljs-string">".block_user"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> let (<span class="hljs-symbol"><span class="hljs-symbol">:user</span></span>) { instance_double(User) } it <span class="hljs-string"><span class="hljs-string">"should block user and send notification"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> expect(user).to receive <span class="hljs-symbol"><span class="hljs-symbol">:block!</span></span> expect(notification_service).to receive(<span class="hljs-symbol"><span class="hljs-symbol">:send</span></span>).with(user, <span class="hljs-string"><span class="hljs-string">"you have been blocked"</span></span>) service.block_user(user) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><h2 id="konkretnyy-primer-dlya-rails">  Fallstudie f√ºr Schienen </h2><br><p>  Wenn das System viele Serviceobjekte enth√§lt, wird es schwierig, alle Abh√§ngigkeiten selbst zu erstellen. Der Code w√§chst mit zus√§tzlichen Codezeilen, die die Lesbarkeit beeintr√§chtigen. </p><br><p>  In diesem Zusammenhang kam mir der Gedanke, ein kleines Modul zu schreiben, das das Abh√§ngigkeitsmanagement automatisiert. </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Services</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Injector</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">included</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">base</span></span></span><span class="hljs-class">) </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment"># </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> check base, should be controller or service base.extend ClassMethods end module ClassMethods def inject_service(name) service = Services::Helpers::Service.new(name) attr_writer service.to_s define_method service.to_s do instance_variable_get("@#{service.to_s}").tap { |s| return s if s } instance_variable_set("@#{service.to_s}", service.instance) end end end end module Helpers class Service def initialize(name) raise ArgumentError, 'name of service should be a Symbol' unless name.is_a? Symbol </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@name</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> = name.to_s.downcase </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@class</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> = "#{</span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@name</span></span></span></span><span class="hljs-class"><span class="hljs-comment">.camelcase}Service".constantize unless </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@class</span></span></span></span><span class="hljs-class"><span class="hljs-comment">.respond_to? :instance raise ArgumentError, "#{</span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@name</span></span></span></span><span class="hljs-class"><span class="hljs-comment">.to_s} should be singleton (respond to instance method)" end end def to_s "#{</span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@name</span></span></span></span><span class="hljs-class"><span class="hljs-comment">}_service" end def instance if Rails.env.test? if defined? RSpec::Mocks::ExampleMethods extend RSpec::Mocks::ExampleMethods instance_double </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@class</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> else nil end else </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@class</span></span></span></span><span class="hljs-class"><span class="hljs-comment">.instance end end end end end</span></span></span></span></code> </pre> <br><p>  Es gibt eine Einschr√§nkung: Der Dienst sollte Singleton sein, d. H.  habe eine Instanzmethode.  Der einfachste Weg, dies zu tun, besteht darin, <code>include Singleton</code> in die Serviceklasse aufzunehmen. </p><br><p>  Jetzt im ApplicationController hinzuf√ºgen </p><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'services'</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationController</span></span></span><span class="hljs-class"> &lt; ActionController::Base </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">include</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Services::Injector</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  Und jetzt k√∂nnen wir dies in den Controllern tun </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WelcomeController</span></span></span><span class="hljs-class"> &lt; ApplicationController </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">inject_service</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">welcome</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">index</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">render</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">plain</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">welcome_service</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  In der Spezifikation dieses Controllers erhalten wir automatisch instance_double (WelcomeService) als Abh√§ngigkeit. </p><br><pre> <code class="ruby hljs">RSpec.describe WelcomeController, <span class="hljs-symbol"><span class="hljs-symbol">type:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:controller</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> describe <span class="hljs-string"><span class="hljs-string">"index"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> it <span class="hljs-string"><span class="hljs-string">"should render text from test service"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> allow(controller.welcome_service).to receive(<span class="hljs-symbol"><span class="hljs-symbol">:text</span></span>).and_return <span class="hljs-string"><span class="hljs-string">"OK"</span></span> get <span class="hljs-symbol"><span class="hljs-symbol">:index</span></span> expect(response).to have_attributes <span class="hljs-symbol"><span class="hljs-symbol">body:</span></span> <span class="hljs-string"><span class="hljs-string">"OK"</span></span> expect(response).to have_http_status <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><h2 id="chto-mozhno-uluchshit">  Was kann verbessert werden </h2><br><p>  Stellen Sie sich zum Beispiel vor, dass es in unserem System verschiedene M√∂glichkeiten gibt, wie wir Benachrichtigungen senden k√∂nnen, zum Beispiel nachts, wenn es sich um einen Anbieter und tags√ºber um einen anderen handelt.  Gleichzeitig haben Anbieter v√∂llig unterschiedliche Sendeprotokolle. </p><br><p>  Im Allgemeinen bleibt die NotificationService-Schnittstelle dieselbe, es gibt jedoch zwei spezifische Implementierungen. </p><br><pre> <code class="hljs ruby"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NightlyNotificationService</span></span></span><span class="hljs-class"> &lt; NotificationService </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DailyNotificationService</span></span></span><span class="hljs-class"> &lt; NotificationService </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  Jetzt k√∂nnen wir eine Klasse schreiben, die eine bedingte Zuordnung von Diensten durchf√ºhrt </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NotificationServiceMapper</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">include</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Singleton</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">take</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">now</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Time</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">now</span></span></span><span class="hljs-class"> ((</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">now</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">hour</span></span></span><span class="hljs-class"> &gt;= 00) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">and</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">now</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">hour</span></span></span><span class="hljs-class"> &lt;= 8)) ? </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NightlyNotificationService</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DailyNotificationService</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  Wenn wir nun die Dienstinstanz in Services :: Helpers :: Service.instance verwenden, m√ºssen wir √ºberpr√ºfen, ob ein * Mapper-Objekt vorhanden ist. Wenn ja, nehmen Sie die Klassenkonstante durch take. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de422161/">https://habr.com/ru/post/de422161/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de422147/index.html">Erh√∂hen Sie Ihren Speedtest-Knoten</a></li>
<li><a href="../de422149/index.html">Wie ist es - Flugbegleiter zu sein</a></li>
<li><a href="../de422151/index.html">Online-Checks im Bundesnetz durch RabbitMQ, 1C und Black Magic</a></li>
<li><a href="../de422155/index.html">Geheime Phrase des Auditors</a></li>
<li><a href="../de422157/index.html">CPE - Zahlungsmodell f√ºr den am mobilen Retargeting beteiligten Benutzer</a></li>
<li><a href="../de422163/index.html">Entwicklung eines 264 to avi Videokonverters f√ºr die QCM-08DL Dashcam</a></li>
<li><a href="../de422165/index.html">Welchen Microsoft-Client sollte ich auf Dynamics 365 aktualisieren?</a></li>
<li><a href="../de422167/index.html">Digitale Veranstaltungen in Moskau vom 3. bis 9. September</a></li>
<li><a href="../de422169/index.html">Was hat das Ada Lovelace-Programm eigentlich gemacht?</a></li>
<li><a href="../de422171/index.html">Als h√§tte ich eine leitungsinteraktive USV gemacht. Teil 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>