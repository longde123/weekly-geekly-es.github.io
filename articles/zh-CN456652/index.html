<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤙🏻 👧🏻 👨🏽‍🎤 时间不等了：比Windows 10时间线对犯罪分子有用 🥒 🧥 ⏰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在调查事件和病毒攻击以重建用户计算机上发生的事件时，取证通常会使用不同类型的时间轴。 通常，时间线是一个巨大的文本文件或表格，其中按时间顺序提供有关计算机上发生的事件的信息。 

 处理时间线准备过程的媒体（例如，使用Plaso）是一个耗时的过程。 因此，计算机取证人员很高兴得知Windows 10...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>时间不等了：比Windows 10时间线对犯罪分子有用</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/group-ib/blog/456652/"><img src="https://habrastorage.org/webt/rs/m9/qr/rsm9qrmzazmrujmdgzwct315rem.png"><br><br> 在调查事件和病毒攻击以重建用户计算机上发生的事件时，取证通常会使用不同类型的时间轴。 通常，时间线是一个巨大的文本文件或表格，其中按时间顺序提供有关计算机上发生的事件的信息。 <br><br> 处理时间线准备过程的媒体（例如，使用Plaso）是一个耗时的过程。 因此，计算机取证人员很高兴得知Windows 10的下一个更新中有一项新功能-Windows 10时间轴。 <br><br>  “当我第一次发现有关Windows的新功能时，我想：”太好了！ 现在，您不必浪费时间来生成时间表。” 但是，事实证明，我的喜悦还为时过早，” IB计算机取证实验室的专家Igor Mikhailov说。 尤其是对Habr读者来说，Igor讲述了Windows 10时间轴（一种新型的Windows 10工件）如何与传统类型的时间轴以及其中包含的信息有关。 <a name="habracut"></a><br><br>  IB计算机取证小组实验室专家<b>Igor Mikhailov</b>发布。 <br><br> 如前所述，在Windows 10的2018年4月更新中，出现了一个新功能，称为``任务视图''（Windows 10时间轴或简称为时间轴）。 它使您可以查看计算机用户的活动，并快速返回到以前打开的文档和程序，以前查看过的视频和图片以及网站。 为了打开Windows 10时间线，请单击以下图标： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0s/hh/xt/0shhxtjw-bndinbdzfjlkhcxo8o.png"></div><br> 之后，将提供当天或不久前打开的程序，文档和站点的缩略图： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zr/jh/il/zrjhillys0v3vyewqong9pn2mtu.png"></div><br> 研究人员指出了新功能的两个功能： <br><br><ol><li> 某些应用程序的打开未出现在时间轴中 </li><li> 时间轴中的某些数据（早期数据）已传输到Microsoft Cloud </li></ol><br> 因此，使用Windows 10时间轴分析可获得的信息不同于通常的时间轴类型，后者包含有关所分析计算机上发生的事件的更完整信息。 <br><br>  Windows 10时间线不应与<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">取证工具</a>创建的时间线混淆。 例如，与Windows 10时间线相比，由Autopsy，Belkasoft证据中心，AXIOM创建的时间线包含有关被研究计算机用户的各种操作的大量记录。 <br><br> 要激活Windows 10时间轴，计算机用户需要转到操作系统的“设置”部分，选择“隐私”类别和“活动日志”子类别，然后选中相反的框： <br><br><ul><li> 允许Windows从这台计算机上收集我的操作 </li><li> 允许Windows将我的操作从这台计算机同步到云 </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/id/hs/tf/idhstf54aqzyepruefwurs7pxaw.png"></div><br><h2>  Windows 10时间线取证工件位置 </h2><br> 在<b>Users \％配置文件名称％\ AppData \ Local \ ConnectedDevicesPlatform \</b> <b>目录中</b> ，有一个扩展名为<b>.cpd</b>的文件，其中包含有关上次Windows 10时间线与云的同步时间（ <b>CNCNotificationUriLastSynced</b> ）和用户ID的信息（在该图中为<b>0b5569b899437c21</b> ）。 <br><br><div class="spoiler">  <b class="spoiler_title">目录视图</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ya/tp/gx/yatpgxkrmtusa2himnzi7jvsdns.png"><br></div></div><br>  Windows 10时间轴中有关用户活动的信息沿以下路径存储在<b>ActivitiesCache.db</b>文件中： <b>\ Users \％配置文件名称％\ AppData \ Local \ ConnectedDevicesPlatform \ L.％配置文件名称％\</b> 。 <br><br><h3>  ActivitiesCache.db文件 </h3><br>  <b>ActivitiesCache.db</b>文件是一个SQLite数据库（版本3）。 与任何SQLite数据库一样，它的特点是存在两个辅助文件<b>ActivitiesCache.db-shm</b>和<b>ActivitiesCache.db-wal</b> 。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fw/sn/rw/fwsnrwev5aefxssbv6nwdwdllia.png"></div><br> 有关已删除记录的其他信息可能包含在未使用的表空间，空闲列表和wal文件中。 <br><br><h3>  Windows 10时间轴剖析 </h3><br>  <b>ActivitiesCache.db</b>包含以下表格： <b>Activity</b> ， <b>Activity_PackageId</b> ， <b>ActivityAssetCache</b> ， <b>ActivityOperation</b> ， <b>AppSettings</b> ， <b>ManualSequence</b> ， <b>Metadata</b> 。 研究人员最感兴趣的是表格<b>Activity_PackageId</b>和<b>Activity</b> 。 <br><br><div class="spoiler">  <b class="spoiler_title">Activity_PackageId表</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/z4/2f/nw/z42fnw-dum9yliaznfc6ptlpc9o.png"></div><br></div></div><br>  <b>Activity_PackageId</b>表包含应用程序的条目，这些应用程序包括可执行文件的路径（例如<b>... c：\ programdata \ firefly studios的tronghold王国\ 2.0.32.1 \ strongholdkingdoms.exe ...</b> ），可执行文件的名称以及到期时间这些条目。  “ <b>到期时间”</b>列中的值以“纪元时间”格式存储。 <br><br>  <b>Activity_PackageId</b>表中的条目存储30天，其中可能包含有关正在调查的硬盘驱动器上已经缺少的可执行文件或文档的信息。 <br><br><div class="spoiler">  <b class="spoiler_title">活动表</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/pm/nc/im/pmncim6fy1hdnehllcfogghpx4s.png"></div></div><br> 在<b>活动</b>表包含以下字段：ID，的AppId，PackageIdHash，AppActivityId ，ActivityType，ActivityStatus，ParentActivityId，标签，集团，MatchId，最后修改时间，ExpirationTime，有效载荷，优先级，IsLocalOnly，PlatformDeviceId，CreatedInCloud，开始时间，结束时间，LastModifiedOnClient，GroupAppActivityId，ClipboardPayload ，EnterpriseId，OriginalLastModifiedOnClient，ETag。 <br><br> 它包含多达五个时间戳字段：LastModifiedTime，ExpirationTime，StartTime，EndTime，LastModifiedOnClient（此字段可以为空-如果计算机用户已修改此表项中有问题的文件，则将其填充）。 <br><br> 您也可以在此表中找到可执行文件的路径： <b>...“ F：\\ NirSoft \\ x64 \\ USBDeview.exe ...</b> <br> 文章“ Windows 10时间线-法医文物的初步复习”中的Gary Hunter（pr3cur50r）表示未更改已删除文件的时间戳记值。 对于修改后的文档，时间戳记值不会立即更改，而是在24小时内更改。 <br><br><h2> 学习Windows 10时间轴 </h2><br> 查看<b>ActivityCache.db</b>文件中包含的数据的最简单方法是使用SQLite数据库查看器。 例如，免费的SQLite数据库浏览器实用程序。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vc/cc/9n/vccc9nwz5imcpub3lx92uqwxwk0.png"></div><br> 浏览“浏览数据”选项卡中的表，您可以查看它们的内容并记录在特定研究期间可能会感兴趣的信息。 <br><br> 我们推荐的第二个实用程序是WxTCmd（Windows 10时间线数据库解析器）。 该实用程序从命令行运行。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9h/cf/vw/9hcfvwnheyrd0lfxp3nwzrfbbje.png"></div><br> 作为其工作的结果，创建了一个csv文件，其中包含对<b>ActivityCache.db</b>文件的分析结果。 <br><br><div class="spoiler">  <b class="spoiler_title">在Excel中打开此文件的视图</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/lh/ui/tl/lhuitlddi44_k2sw7lmuqhblt7a.png"></div></div><br> 我们推荐的第三个实用程序是Magnet Forensics的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">AXIOM</a> 。 <br><br> 为了使程序能够分析此工件，您必须在“选择要包含的工件以防万一”部分中告诉程序进行此操作。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9b/zu/cj/9bzucjj4tzztowj3cjnqqnmhnp8.png"></div><br> 可以在Magnet AXIOM检查器中查看文件分析结果。 <br><br><div class="spoiler">  <b class="spoiler_title">AXIOM从ActivitiesCache.db提取数据的结果</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/7t/tq/gn/7ttqgnis2sdeu4owfnlwoq3ufn0.png"></div></div></div><br> 我们建议用于分析此类文件的第四个实用程序是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Belkasoft的Belkasoft证据中心</a> 。 <br><br> 在“ <b>添加数据源”</b>窗口中<b>添加</b>数据源（硬盘，逻辑驱动器，目录或文件）后，在“ <b>系统文件”</b>部分中，选择“ <b>Windows时间线”</b> 。 <br><br><img src="https://habrastorage.org/webt/ry/vs/ru/ryvsruju2irdvalxsfu0zkbn2mg.png"><br><br> 数据提取完成后， <b>Windows时间轴</b>类别将出现在“ <b>概述”</b>选项卡中，其中将显示从<b>ActivityCache.db</b>文件提取数据的结果。 <br><br><div class="spoiler">  <b class="spoiler_title">数据检索是什么样的</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/1a/mm/rc/1ammrcmoxizaawidvtld8wmtup0.png"></div></div><br><h2>  Windows 10时间轴在计算机取证中：付诸实践 </h2><br>  Windows 10时间轴中包含的数据可用于调查事件或数据泄漏。 <br><br> 举例来说，我们将显示来自被黑客攻击的计算机上的<b>ActivitiesCache.db</b>文件中的一段数据： <br><br><img src="https://habrastorage.org/webt/kz/zl/1t/kzzl1tsx_cnsmgvlttkoz1m-so8.png"><br><br> 从屏幕截图中可以看到，攻击者将TeamViewer受害者从文件共享sendspace.com Mimikatz中下载到计算机上。 对Windows 10时间轴中保存的事件的分析表明，攻击者使用记事本打开了记事本（文件<b>notepad.exe</b> ），Teamviewer日志（文件<b>TeamViewer14_Logfile.log</b> ）。 也许为了删除或修改此文件中的信息。 <br><br> 这是另一个例子。 显然，计算机上启动了非常不寻常的文件。 可能有人试图收集有关计算机用户的信息。 <br><br><img src="https://habrastorage.org/webt/mu/ta/aq/mutaaql4cqi0eocbbwgtmtcycgc.png"><br><br> 因此，Windows 10中出现的一种新的工件类别，即Windows 10时间线，可以简化研究人员在重建过去30天在研究中的计算机上发生的事件时的工作。 此外，Windows 10时间轴可以提供有关正在研究中的计算机上运行的文件的其他信息，包括已删除的文件。 在调查事件或数据泄漏时，这一点尤其重要。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN456652/">https://habr.com/ru/post/zh-CN456652/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN456640/index.html">PHDays 9的竞争情报竞赛分析</a></li>
<li><a href="../zh-CN456642/index.html">JetBrains企业硕士课程和ITMO大学的首届毕业</a></li>
<li><a href="../zh-CN456644/index.html">更长的低成本3D照片聚合物打印机出现在Kickstarter上</a></li>
<li><a href="../zh-CN456646/index.html">放纵-如何摆脱债务负担</a></li>
<li><a href="../zh-CN456650/index.html">选择预算袖珍示波器</a></li>
<li><a href="../zh-CN456654/index.html">没有那么可怕的ERP项目</a></li>
<li><a href="../zh-CN456656/index.html">SDL 2课：第4课-拉伸PNG</a></li>
<li><a href="../zh-CN456658/index.html">成长：我们如何评估团队技能</a></li>
<li><a href="../zh-CN456662/index.html">如何使用测试驱动的开发为治疗师省钱</a></li>
<li><a href="../zh-CN456664/index.html">机器人赔钱时该向谁起诉</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>