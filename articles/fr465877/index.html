<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçΩÔ∏è ü§û üëàüèª S√©curit√© des informations √† partir du cloud: fonctionnement de la plateforme de services de cybers√©curit√© unifi√©e üôÖüèΩ üñ§ üëçüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="√Ä la fin de l'ann√©e derni√®re, apr√®s un accord avec Rostelecom, nous avons re√ßu √† notre disposition une plate-forme SD-WAN / SDN bas√©e sur le cloud pou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>S√©curit√© des informations √† partir du cloud: fonctionnement de la plateforme de services de cybers√©curit√© unifi√©e</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/solarsecurity/blog/465877/"><img src="https://habrastorage.org/webt/up/fe/po/upfepor6uo1ei64ske5ajymh0gq.jpeg" alt="image"><br>  √Ä la fin de l'ann√©e derni√®re, apr√®s un accord avec Rostelecom, nous avons re√ßu √† notre disposition une plate-forme SD-WAN / SDN bas√©e sur le cloud pour fournir des services IB aux clients.  Nous nous sommes connect√©s aux fournisseurs de projets fournissant leurs solutions sous une forme virtualis√©e, et nous avons obtenu un √©norme colosse, que nous avons appel√© la plate-forme de services de cybers√©curit√© unifi√©e, ou EPSC.  Sa principale caract√©ristique est la fourniture de technologies de s√©curit√© √† partir du cloud avec la possibilit√© d'une gestion centralis√©e: le d√©ploiement et la modification d'une fonction r√©seau unique ou d'une transformation globale dans tous les bureaux desservis ne prennent que quelques minutes.  Aujourd'hui, nous vous en dirons plus sur son architecture et son "bourrage". <br><a name="habracut"></a><br>  Mais avant de vous mettre sous le capot, quelques mots sur ce que l'EPSC sait r√©ellement.  La plate-forme comprend des services: protection des e-mails (Secure Email Gateway, SEG) et applications Web (Web Application Firewall, WAF), pr√©vention des intrusions sur le r√©seau (Unified Threat Management, UTM) et Anti-DDoS.  Tous peuvent √™tre utilis√©s simultan√©ment et s√©par√©ment - ici √† chacun selon ses besoins. <br><br><h2>  Enveloppez-moi de trafic, s'il vous pla√Æt.  Principes de travail </h2><br>  En g√©n√©ral: des dispositifs de routage CPE (Customer Premises Equipment) sont install√©s sur tous les sites clients.  CPE fournit un tunnel s√©curis√© √† nos centres de donn√©es - √† la plate-forme EPSC.  Ainsi, seul le trafic d√©gag√© sur notre √©quipement de s√©curit√© p√©rim√©trique parvient au client.  Dans le m√™me temps, gr√¢ce au SD-WAN et √† la tunnellisation, le processus d'acheminement du trafic vers notre plateforme ne d√©pend pas du r√©seau de quel fournisseur le client utilise. <br><br><img src="https://habrastorage.org/webt/pz/b4/d0/pzb4d097koq__lisd7bcasadzau.jpeg" alt="image"><br><br><h3>  Architecture de plateforme </h3><br>  L'infrastructure physique de l'EPSC est constitu√©e de serveurs x86 ordinaires avec des machines virtuelles d√©ploy√©es sur eux, des commutateurs et des routeurs.  Le fait est que vous pouvez g√©rer cette richesse de mani√®re flexible et centralis√©e.  Et ici, deux mots magiques viennent √† notre aide - VNF et MANO. <br><br>  VNF (Virtualized Network Function) sont des fonctions r√©seau fournies aux utilisateurs finaux (UTM, SEG et WAF).  MANO (Management and Orchestration) - un ensemble d'outils pour g√©rer le cycle de vie des fonctions virtualis√©es.  Ces outils offrent simplement cette centralisation et une orchestration flexible, ce qui vous permet d'apporter des modifications √† une vitesse fondamentalement diff√©rente. <br><br>  Et maintenant plus en d√©tail. <br><br>  Au bord de chaque centre de donn√©es se trouve un routeur Nokia 7750 SR-12 avec un d√©bit de 400 Gb / s - il fournit un routage sur le p√©rim√®tre et √† l'int√©rieur du cloud.  √Ä un niveau inf√©rieur se trouvent les commutateurs Juniper 5100 Spine avec des ports 40 Gb / s, regroupant tous les composants r√©seau des couches inf√©rieures. <br><br>  Un r√©seau virtuel comprend deux segments: SD-WAN, qui connecte l'environnement cloud aux sites clients, et SDN DC, un r√©seau d√©fini par logiciel √† l'int√©rieur du cloud lui-m√™me, via lequel les ports, l'adressage IP, etc. sont configur√©s.  lors de la cr√©ation d'une cha√Æne de services. <br><br>  La partie serveur comprend les serveurs de gestion de plateforme cloud CloudBand, les serveurs de gestion SDN, les serveurs de gestion SD-WAN (VSD, VSC) et NSG-BR (routeurs virtuels qui terminent IPsec sur les tunnels clients VXLAN) ou VXLAN, selon le si le cryptage IPsec. <br><br>  L'adressage IP blanc pour le trafic client est impl√©ment√© sur la base de 2 sous-r√©seaux avec un masque / 22 (1018 adresses dans chaque sous-r√©seau): l'un d'eux est rout√© vers Internet, l'autre vers RSNet. <br><br><h3>  Tol√©rance aux pannes </h3><br>  Toute l'infrastructure cloud est r√©serv√©e sur la base de deux centres de donn√©es g√©ographiquement distants √† Moscou, qui fonctionnent en mode actif-veille.  De plus, toute cha√Æne de services (un ensemble de fonctions pour un client particulier) est d√©ploy√©e dans chacun d'eux en tant que cluster.  En cas d'urgence, lors du passage d'un n≈ìud √† un autre, seuls 10 paquets environ sont perdus.  √âtant donn√© que des personnes stupides ont cr√©√© TCP, la perte ne sera pas perceptible. <br><br><img src="https://habrastorage.org/webt/hz/m3/gg/hzm3gg-czupkjo99f-mizurxyam.jpeg" alt="image"><br><br>  √Ä l'avenir, nous pr√©voyons une expansion g√©ographique au-del√† de l'Oural afin de r√©duire les d√©lais de transmission des donn√©es pour les r√©gions.  Cependant, pour aujourd'hui, m√™me pour Khabarovsk, les retards ne sont que d'environ 200 ms - les clients jouent assez bien sur Steam et regardent des vid√©os de YouTube (√† partir d'un v√©ritable avis sur le service ÔÅä). <br><br>  Dans un avenir proche, il sera possible de connecter un CPE √† deux WAN ind√©pendants.  Le canal peut √™tre MPLS, Ethernet (cuivre ou optique selon le CPE utilis√©), modem USB LTE, etc.  Par exemple, le canal principal peut √™tre √† fibre optique et le canal de secours peut √™tre sans fil (car personne n'est √† l'abri de l'excavatrice du destin et des fils endommag√©s).  Actuellement, il est possible d'utiliser deux WAN, mais uniquement lors de l'utilisation de deux CPE dans un cluster HA. <br><br><h3>  Cha√Ænes de service </h3><br>  Le client s√©lectionne les param√®tres de base via le LC et commence la formation de la cha√Æne de service: les interfaces r√©seau sont automatiquement augment√©es, les adresses IP sont attribu√©es et les images VNF sont pomp√©es, en fonction de la bande passante s√©lectionn√©e.  Par exemple, si vous avez command√© FortiGate Firewall pour 300 Mbit, 4 c≈ìurs, 8 Go de RAM vous seront automatiquement allou√©s, une certaine quantit√© d'espace disque et l'image sera automatiquement d√©ploy√©e dans une configuration de 0 jour. <br><br>  Les performances de notre plate-forme sont d√©sormais con√ßues pour 160 cha√Ænes de service de 1 Gbit chacune, et il est pr√©vu d'√©tendre jusqu'√† 1000 cha√Ænes de service de 50 Mbit chacune (car les cha√Ænes de 1 Gbit seront beaucoup moins populaires, selon notre √©valuation du march√©). <br><br><h2>  CPE - mieux mince, oui plus? </h2><br>  En fait, pour notre service, nous avons choisi des CPE ¬´minces¬ª bas√©s sur Nokia NSG-C et NSG-E200.  Ils sont subtils uniquement parce qu'ils ne peuvent pas ex√©cuter de VNF tiers, mais sinon ils ont toutes les fonctionnalit√©s n√©cessaires pour √©tablir une communication entre les sites, un tunnel (IPsec et VPN), cependant, des solutions d'autres fabricants peuvent √™tre utilis√©es pour cette t√¢che.  Il existe √©galement des listes de contr√¥le d'acc√®s (ACL) pour le filtrage: une partie du trafic peut √™tre lib√©r√©e localement, et une partie peut √™tre envoy√©e pour un nettoyage fin au centre de donn√©es EPSC, o√π les fonctions virtuelles WAF, UTM et SEG sont impl√©ment√©es. <br><br>  En outre, l'appareil peut effectuer un routage adapt√© aux applications (AAR), c'est-√†-dire  hi√©rarchiser la bande passante en fonction du type de trafic √† l'aide des m√©canismes Deep Packet Inspection (DPI).  Dans le m√™me temps, les r√©seaux fixes et mobiles ou leur combinaison pour un trafic diff√©rent peuvent √™tre utilis√©s comme canaux de communication. <br><br>  L'activation CPE est bas√©e sur le principe du provisionnement sans contact.  Autrement dit, tout est √©l√©mentaire: nous connectons le CPE √† Internet, nous connectons un ordinateur portable √† partir de l'interface Ethernet interne, cliquez sur le lien d'activation, puis allumez notre LAN au lieu de l'ordinateur portable et tout fonctionne.  De plus, dans notre cloud, le tunnel IPsec sur VXLAN augmente par d√©faut (c'est-√†-dire que l'espace d'adressage est d'abord isol√©, puis tunnel√©). <br><br>  En g√©n√©ral, l'option avec un CPE fin nous semble plus pratique.  Avec cette approche, le client est √©pargn√© d'un √©ventuel blocage du fournisseur et peut adapter la solution √† tout moment, sans buter sur l'√©paisseur du CPE (50 Mbps). <br><br>  Dans le cas d'un CPE √©pais, il impl√©mente √©galement, entre autres, les fonctions virtuelles s√©lectionn√©es par le client, et dans le centre de donn√©es EPCC il n'y a que la gestion de la cha√Æne de service.  L'avantage de cette approche est que tout le trafic est trait√© localement.  Dans le m√™me temps, le co√ªt d'un tel appareil est beaucoup plus √©lev√©, et vous ne pouvez pas faire plus d'un service sp√©cifique sur celui-ci - vous devez acheter des CPE suppl√©mentaires.  Oui, et vous pouvez oublier les fournisseurs multiples. <br><br>  Mais si le client a une plate-forme assez grande (bureau, agence) qui passe beaucoup de trafic √† travers lui-m√™me (plus de 200 Mbit / s), et qu'il veut tout filtrer localement, alors il est logique de pr√™ter attention √† la s√©rie CPE Nokia NSG E300 (et plus) c Bande passante de 1 √† 10 Gbit / s prenant en charge la virtualisation (VNF). <br><br>  Par d√©faut, SD-WAN rassemble tous les sites du client dans un r√©seau maill√© complet, c'est-√†-dire qu'il les connecte ensemble selon le principe ¬´chacun avec chacun¬ª sans filtrage suppl√©mentaire.  Cela r√©duit les retards dans le p√©rim√®tre interne.  Cependant, il est possible de construire des topologies plus complexes (√©toile, √©toile complexe, grilles multi-rangs, etc.). <br><br><h2>  Fonctionnement </h2><br>  Tous les VNF qui sont dans le cloud sont actuellement disponibles dans la doctrine MSSP classique, c'est-√†-dire qu'ils sont sous notre contr√¥le.  √Ä l'avenir, les clients auront la possibilit√© de g√©rer ces services de mani√®re ind√©pendante, mais il est important d'√©valuer judicieusement leurs comp√©tences. <br>  Certaines fonctions simples sont d√©sormais partiellement automatis√©es.  Par exemple, dans Secure Mail Gateway, une strat√©gie est configur√©e par d√©faut, dans laquelle l'utilisateur re√ßoit une liste de messages potentiellement li√©s au spam une fois par jour et peut d√©cider lui-m√™me de son sort. <br><br>  Certains probl√®mes et vuln√©rabilit√©s globaux surveill√©s par notre JSOC seront rapidement ferm√©s, y compris pour les clients de l'EPSC.  Et ici, la possibilit√© d'une gestion centralis√©e des politiques et des signatures est exactement ce dont nous avons besoin - cela prot√©gera les clients contre les infections comme Petya, NotPetya et d'autres. <br><br><h2>  Des r√©ponses honn√™tes √† des questions d√©licates </h2><br>  En fait, bien que nous croyions beaucoup aux avantages du mod√®le de service, il est clair que pour beaucoup le concept du syst√®me de courrier √©lectronique est trop inhabituel.  Ce qu'on nous demande le plus souvent: <br><br>  <b>- FortiGate se trouve dans votre centre de donn√©es, c'est-√†-dire, verrez-vous notre trafic?</b> <br><br>  - Non, nous ne voyons pas de trafic.  FortiGate le re√ßoit sous forme crypt√©e, le d√©chiffre avec la cl√© du client, le v√©rifie et le traite avec un antivirus de flux, le recrypte avec la m√™me cl√©, puis l'envoie √† votre r√©seau.  Nous n'avons aucune option √† caler dans ce processus (√† moins de s'engager dans la r√©tro-ing√©nierie des solutions infobases dures, mais c'est trop cher ). <br><br>  <b>- Est-il possible de sauvegarder notre segmentation r√©seau lors du passage au cloud?</b> <br><br>  - Et ici, il y a une limitation.  La segmentation du r√©seau n'est pas une histoire trouble.  UTM est un pare-feu de limite du r√©seau d'un client sur lequel la segmentation ne peut pas √™tre effectu√©e, c'est-√†-dire que vos donn√©es vont vers l'ext√©rieur sur un seul canal.  Dans un sens, vous pouvez segmenter le r√©seau √† l'int√©rieur de l'ACL sur le CPE en d√©finissant diff√©rentes restrictions pour diff√©rents sites.  Mais si vous avez des applications m√©tier qui doivent interagir diff√©remment les unes avec les autres via le pare-feu, vous devrez toujours utiliser un FW distinct pour la segmentation interne. <br><br>  <b>- Qu'adviendra-t-il de nos adresses IP lors du passage au cloud?</b> <br><br>  - Dans la plupart des cas, vous devrez remplacer vos adresses IP blanches par les n√¥tres.  Une exception est possible si vous avez un fournisseur de syst√®me autonome non ind√©pendant (PI AS), qui vous est attribu√©, qui peut √™tre annonc√© de nouveau par nous. <br><br>  Parfois, il est plus logique de choisir une option complexe - par exemple, laisser le trafic utilisateur via UTM et lib√©rer d'autres segments de r√©seau directement sur Internet. <br><br>  <b>- Et si vous avez besoin de prot√©ger un site h√©berg√© par un fournisseur externe?</b> <br><br>  - CPE n'y met pas.  Vous pouvez connecter WAF en modifiant l'enregistrement ADNS: changez l'IP du site en IP de la cha√Æne de service, puis le trafic passera par notre cloud sans l'aide de CPE. <br><br>  Si vous avez d'autres questions, √©crivez dans les commentaires, et nous essaierons d'y r√©pondre </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr465877/">https://habr.com/ru/post/fr465877/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr465861/index.html">"Cloud" confidentiel. Nous recherchons une alternative aux solutions ouvertes</a></li>
<li><a href="../fr465863/index.html">Comment utiliser MIDI pour le Web en bref</a></li>
<li><a href="../fr465867/index.html">Nous reprogrammons le caissier et imprimons dessus Keanu Reeves</a></li>
<li><a href="../fr465869/index.html">Conversion de mod√®les polygonaux en repr√©sentation des limites: exemples d'algorithmes et de codes</a></li>
<li><a href="../fr465873/index.html">Le probl√®me que vous r√©solvez est plus important que le code que vous √©crivez</a></li>
<li><a href="../fr465879/index.html">Et les berceaux?</a></li>
<li><a href="../fr465885/index.html">Comment devenir un Scrum Master de premier plan et faire vibrer l'√©quipe?</a></li>
<li><a href="../fr465889/index.html">Comment nous avons abord√© l'efficacit√© √©nerg√©tique</a></li>
<li><a href="../fr465891/index.html">Comment trouver un produit ou un nom d'entreprise en utilisant Vepp comme exemple</a></li>
<li><a href="../fr465893/index.html">Summ3r de h4ck 2019. D√©partement d'analyse de la s√©curit√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>