<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêª üö£üèº üëèüèº El libro "Unidad para el desarrollador. Juegos m√≥viles multiplataforma ¬ª ‚úäüèø üí¢ üë©üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este libro est√° dirigido a todos los que quieran crear juegos, pero que no tengan experiencia previa en desarrollo. Unity admite varios lenguajes de p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El libro "Unidad para el desarrollador. Juegos m√≥viles multiplataforma ¬ª</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/413531/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/jb/cp/nf/jbcpnfxk76conc21ro289_v4fse.jpeg" align="left" alt="imagen"></a>  Este libro est√° dirigido a todos los que quieran crear juegos, pero que no tengan experiencia previa en desarrollo.  Unity admite varios lenguajes de programaci√≥n.  En este libro, usaremos C #.  Antes de comenzar a crear juegos, debe comprender los conceptos b√°sicos de su dise√±o, as√≠ como el motor del juego Unity, por lo que en la primera parte del libro estudiaremos estos temas.  En la segunda y tercera parte, consideraremos el proceso de creaci√≥n de juegos bidimensionales y tridimensionales, respectivamente, y en la cuarta parte hablaremos sobre otras caracter√≠sticas de Unity, cuyo conocimiento ser√° √∫til para usted. <br><a name="habracut"></a><br><h3>  6. La implementaci√≥n del juego con trampas y objetivos. </h3><br>  <b>Trampas simples</b> <br><br>  La mayor parte de este juego consiste en manejar los toques de varios objetos: trampas, tesoros, puntos de salida, etc.  Teniendo en cuenta lo importante que es determinar cu√°ndo tocar objetos espec√≠ficos, crearemos un script com√∫n que genere un Evento de Unidad cuando cualquier objeto con la etiqueta "Jugador" los toque.  Este evento se configurar√° de manera diferente para diferentes objetos: las trampas informar√°n al administrador del juego que el gnomo ha recibido da√±os, el tesoro informar√° que el gnomo ha recogido el tesoro y el punto de salida es que el gnomo ha llegado a la salida. <br><br>  Ahora cree una nueva secuencia de comandos C # en un archivo llamado SignalOnTouch.cs y agregue el siguiente c√≥digo: <br><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.Events;  //  UnityEvent,     "Player"  //  . [RequireComponent (typeof(Collider2D))] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SignalOnTouch : MonoBehaviour {  // UnityEvent      .  //     . <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> UnityEvent onTouch;   //    <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>,      AudioSource. <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">bool</span></span> playAudioOnTouch = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;  //       ,  //  SendSignal. <span class="hljs-type"><span class="hljs-type">void</span></span> OnTriggerEnter2D(Collider2D collider) {  SendSignal (collider.gameObject); }   //      , //  SendSignal. <span class="hljs-type"><span class="hljs-type">void</span></span> OnCollisionEnter2D(Collision2D collision) {   SendSignal (collision.gameObject);  }    //    "Player"      //  UnityEvent,    .  <span class="hljs-type"><span class="hljs-type">void</span></span> SendSignal(GameObject objectThatHit) {   //    "Player"? <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (objectThatHit.CompareTag("Player")) {     //    ,     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (playAudioOnTouch) {  var audio = GetComponent&lt;AudioSource&gt;();   //     //     ,  //    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (audio &amp;&amp;     audio.gameObject.activeInHierarchy) audio.Play();   }   //      onTouch.Invoke();     }   }  }</code> </pre> <br>  La base de la clase SignalOnTouch es el m√©todo SendSignal, que se llama mediante los m√©todos OnCollisionEnter2D y OnTriggerEnter2D.  El motor de Unity llama a los dos √∫ltimos m√©todos cuando el objeto toca el colisionador o cuando el objeto cae dentro del alcance del disparador.  El m√©todo SendSignal verifica la etiqueta del objeto y, si almacena la cadena "Player", genera un evento Unity. <br>  Ahora que tiene la clase SignalOnTouch, puede agregar la primera trampa. <br><br>  1. Importar sprites de objetos.  Importe el contenido de la carpeta Sprites / Objects al proyecto. <br><br>  2. Agregue las espigas marrones.  Encuentra el sprite SpikesBrown y arr√°stralo a la escena. <br><br>  3. Configure el objeto con p√∫as.  Agregue los componentes PolygonCollider2D y SignalOnTouch al objeto claveteado. <br><br>  Agregue una nueva funci√≥n al evento SignalOnTouch.  Arrastre el Game Manager al campo de objeto y seleccione la funci√≥n GameManager.TrapTouched, como se muestra en la Fig.  6.1. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l9/en/37/l9en37qkgc1vqd2-rnj3ykvk88u.png" alt="imagen"></div><br>  4. Convierta el objeto claveteado en una plantilla.  Arrastre el objeto SpikesBrown desde el panel Jerarqu√≠a a la carpeta Nivel.  Como resultado, se crear√° una plantilla con la que podr√° crear varias copias del objeto. <br><br>  5. Pru√©balo.  Lanza el juego.  Haz que el gnomo golpee las espinas.  ¬°Este gnomo debe caer y reaparecer! <br><br><h3>  Tesoro y salida </h3><br>  Despu√©s de agregar con √©xito la trampa que mata al gnomo, es hora de agregar la oportunidad de ganar el juego.  Para hacer esto, agregue dos elementos nuevos: un tesoro y un punto de salida. <br><br>  Un tesoro es un sprite en el fondo de un pozo que detecta el toque de un gnomo y env√≠a una se√±al al Game Manager.  Cuando esto sucede, el administrador del juego le dice al gnomo que tom√≥ el tesoro, despu√©s de lo cual el sprite con la imagen de la mano vac√≠a del gnomo es reemplazado por el sprite con la imagen de la mano que sostiene el tesoro. <br><br>  Un punto de salida es otro sprite ubicado en la parte superior del pozo.  Como un tesoro, detecta un toque del gnomo y lo notifica al administrador del juego.  Si en este momento el gnomo posee el tesoro, el jugador recibe la victoria en el juego. <br><br>  El trabajo principal en estos dos objetos lo realiza el componente SignalOnTouch: cuando el gnomo llega al punto de salida, se debe llamar al m√©todo ExitReached del administrador del juego, y cuando el gnomo toca el tesoro, se debe llamar al m√©todo TreasureCollected. <br><br>  Comencemos creando un punto de salida y luego agreguemos un tesoro. <br><br><h3>  Crear punto de salida </h3><br>  En primer lugar, importamos sprites. <br><br>  1. Importar sprites de fondo de nivel.  Copie la carpeta Sprites / Background del paquete descargado con recursos en la carpeta Sprites del proyecto. <br><br>  2. Agregue un sprite Top.  Col√≥quelo justo debajo del objeto Cuerda.  Este sprite servir√° como punto de salida. <br><br>  3. Configurar el sprite.  Agregue el componente 2D Box Collider al sprite y marque la casilla Is Trigger.  Haga clic en el bot√≥n Editar colisionador y cambie el tama√±o del colisionador para que sea corto y ancho, como se muestra en la Fig.  6.2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/30/rq/t6/30rqt6u6hfxppu6uexa1n0uewwg.png" alt="imagen"></div><br>  4. Configure el env√≠o de una se√±al al administrador del juego en el momento de tocar el sprite.  Agregue el componente SignalOnTouch al sprite.  Agregue un elemento a la lista de eventos del componente y con√©ctelo al Game Manager.  Seleccione la funci√≥n GameManager.ExitReached.  Ahora tocando el gnomo de salida llamar√° al m√©todo ExitReached del Game Manager. <br>  Ahora agrega el tesoro. <br><br>  El tesoro funciona as√≠: de forma predeterminada, el objeto Treasure muestra un sprite con la imagen del tesoro.  Cuando el gnomo lo toca, se llama al m√©todo TreasureCollected del Game Manager y se muestra otro sprite en lugar del tesoro, que muestra que el tesoro ha sido recogido.  Cuando el gnomo muere, el objeto Treasure regresa a su estado original y muestra el sprite con la imagen del tesoro nuevamente. <br><br>  Dado que el cambio de sprites en el juego se realizar√° con bastante frecuencia, lo ver√°s cuando mejoremos los gr√°ficos, tiene sentido crear una clase universal para cambiar sprites y usarlo en el objeto del tesoro. <br><br>  Cree un nuevo script de C # llamado SpriteSwapper.cs.  Agregue el siguiente c√≥digo: <br><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/     . ,    /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   ' '   ' '. public class SpriteSwapper : MonoBehaviour { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ,   . public Sprite spriteToUse; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ,    /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    . public SpriteRenderer spriteRenderer; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  .    ResetSprite. private Sprite originalSprite; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  . public void SwapSprite() { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      ... if (spriteToUse != spriteRenderer.sprite) { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    originalSprite originalSprite = spriteRenderer.sprite;  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    . spriteRenderer.sprite = spriteToUse; } } /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   . public void ResetSprite() { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     ... if (originalSprite != null) {  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ...  . spriteRenderer.sprite = originalSprite; }  } }</span></span></code> </pre> <br>  La clase SpriteSwapper est√° dise√±ada para dos operaciones: cuando se llama al m√©todo SwapSprite, se pasa otro Sprite al visualizador SpriteRenderer conectado al objeto del juego para su visualizaci√≥n.  En este caso, el sprite original se almacena en una variable.  Cuando se llama al m√©todo ResetSprite, el visualizador recibe el sprite original para mostrar. <br>  Ahora puedes crear y personalizar el objeto Treasure. <br><br>  1. Agregue un sprite con una imagen del tesoro.  Encuentra el sprite TreasurePresent y agr√©galo a la escena.  Col√≥quelo cerca del fondo, pero de tal manera que el gnomo pueda atraparlo. <br><br>  2. Agregue un colisionador para el tesoro.  Seleccione el sprite con la imagen del tesoro y agregue el componente Box Collider 2D.  Marque la casilla Es Trigger. <br><br>  3. Agregue y configure un script para cambiar el sprite.  Agregue el componente SpriteSwapper.  Arrastre el sprite con la imagen del tesoro al campo Sprite Renderer de este componente.  Luego busca el sprite TreasureAbsent y arr√°stralo al campo Sprite To Use del cambiador de sprites. <br><br>  4. Agregue y configure el componente de env√≠o de se√±al en respuesta a un toque.  Agregue el componente SignalOnTouch.  Agregue dos elementos a la lista On Touch: <br><br><ul><li>  primer enlace al objeto Game Manager y seleccione el m√©todo GameManager.TreasureCollected; </li><li>  asocie el segundo con el sprite del tesoro (es decir, con el objeto que est√° configurando actualmente) y seleccione el m√©todo SpriteSwapper.SwapSprite. </li></ul><br>  5. Agregue y configure el componente Resettable.  Agregue un componente reiniciable al objeto.  Agregue un solo elemento a la lista On Touch, seleccione el m√©todo SpriteSwapper.ResetSprite y as√≥cielo con el objeto Treasure. <br><br>  Como resultado, la configuraci√≥n en el panel del inspector debe verse como se muestra en la Fig.  6.3. <br><br>  6. Prueba el juego.  Inicia el juego y toca el tesoro.  En ese momento, el tesoro desaparecer√°;  si despu√©s de eso el gnomo muere, el tesoro reaparecer√° en su lugar despu√©s de la creaci√≥n del nuevo gnomo. <br><br><h3>  Agregar fondo </h3><br>  Actualmente, el juego se desarrolla contra un fondo azul opaco establecido por defecto en Unity.  En esta secci√≥n, agregaremos un fondo temporal, que reemplazaremos con un sprite de fondo cuando comencemos a mejorar el dise√±o gr√°fico del juego. <br><br>  1. Agregue un rect√°ngulo de fondo.  Abra el men√∫ GameObject y seleccione 3D ObjectÔÄ¥Quad (3D ObjectÔÄ¥Rectangle).  Nombra el nuevo objeto Fondo. <br><br>  2. Mueva el fondo al fondo.  Para evitar la situaci√≥n en la que se dibujar√° un fondo rectangular en la parte superior de los sprites del juego, mu√©valo al fondo, lejos de la c√°mara.  Para hacer esto, establezca la coordenada Z del rect√°ngulo en 10. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/__/ge/jp/__gejpqg6oyv_6qaf04vmhytn9a.png" alt="imagen"></div><br>  3. Establezca el ancho y la altura del rect√°ngulo de fondo.  Encienda la herramienta Rect presionando la tecla T, y luego use las manijas para establecer las dimensiones del rect√°ngulo.  El borde superior del fondo debe estar al mismo nivel que el sprite en la parte superior de la escena y el fondo con el tesoro (Fig. 6.4). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ef/sk/qf/efskqficuea12yni_biknneonqi.png" alt="imagen"></div><br>  4. Prueba el juego.  Despu√©s de comenzar, el fondo del campo de juego debe volverse gris oscuro. <br><br>  ¬ªSe puede encontrar m√°s informaci√≥n sobre el libro en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el sitio web del editor</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Contenidos</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Extracto</a> <br><br>  Cup√≥n de 20% de descuento para vendedores ambulantes - <b>Unity</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es413531/">https://habr.com/ru/post/es413531/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es413519/index.html">Prueba comparativa de dispositivos de control de mosquitos.</a></li>
<li><a href="../es413523/index.html">Descripci√≥n general del trabajo con Universal Links: pros y contras</a></li>
<li><a href="../es413525/index.html">Ens√©√±ame a entrevistar</a></li>
<li><a href="../es413527/index.html">Tres variantes de la palabra "hide" en ingl√©s y otras series sin√≥nimos</a></li>
<li><a href="../es413529/index.html">¬øPor qu√© los nuevos dispositivos i-SENSYS pueden llamarse revolucionarios?</a></li>
<li><a href="../es413539/index.html">Un controlador simple basado en l√≥gica difusa. Creaci√≥n y personalizaci√≥n.</a></li>
<li><a href="../es413543/index.html">Angular cli 6: por qu√© lo necesitas y c√≥mo usarlo</a></li>
<li><a href="../es413545/index.html">Humor en la marca: por qu√© no siempre es bueno</a></li>
<li><a href="../es413547/index.html">Experimenta 2 millones de sesiones sin cabeza</a></li>
<li><a href="../es413549/index.html">Curso de conferencia sobre desarrollo web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>