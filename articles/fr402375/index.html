<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëî üò∏ ‚ÄºÔ∏è Commutateur ca √† 4 canaux de 8 kilowatts avec mesure de la consommation. Partie 1 üõÅ üëÆ üôÜüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pour automatiser une grande maison, la t√¢che d'activer / d√©sactiver des charges puissantes est apparue - pompes de piscine, chaudi√®res et m√™me chambre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Commutateur ca √† 4 canaux de 8 kilowatts avec mesure de la consommation. Partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402375/">  Pour automatiser une grande maison, la t√¢che d'activer / d√©sactiver des charges puissantes est apparue - pompes de piscine, chaudi√®res et m√™me chambres d'h√¥tes dans leur ensemble (lorsque personne n'y vit), et je voulais √©galement conna√Ætre la quantit√© d'√©nergie consomm√©e.  Mais il n'y avait pas d'appareils pr√™ts √† l'emploi avec les caract√©ristiques n√©cessaires (et m√™me proches d'eux).  J'ai d√ª l'inventer moi-m√™me.  La premi√®re version s'est av√©r√©e peu utilisable, mais a montr√© qu'un peu de travail et que vous obtenez un appareil compl√®tement fini. <br><br><img src="https://habrastorage.org/files/c86/90c/f0b/c8690cf0bdc94db1a40ef1717b5f3143.JPG"><br><a name="habracut"></a><br>  Franchement, je n'ai pratiquement aucune exp√©rience dans la cr√©ation de puissants appareils CA.  Par cons√©quent, lors du d√©veloppement de cet appareil, j'ai essay√© de le jouer en toute s√©curit√© - des parafoudres, des chemins larges con√ßus pour souder des pneus en cuivre puissants, un blindage dans les couches interm√©diaires de la planche.  Dans la premi√®re version, il y avait des exc√®s et des erreurs (par exemple, dans la fiche technique du module d'alimentation Tension de sortie 1 et Vout1 - se sont av√©r√©es √™tre diff√©rentes, j'ai donc d√ª couper les pistes, et j'ai simplement rout√© le connecteur microUSB pour que le port ne soit pas travaux). <br><br>  Pour la commutation, des relais bistables EW80 de 80 amp√®res ont √©t√© choisis.  Je dois dire que le choix n'est pas tr√®s r√©ussi - le bo√Ætier fuit et dans des conditions locales d'humidit√© √©lev√©e peut ne pas convenir.  Malheureusement, le choix de relais bistables puissants des fournisseurs disponibles n'est pas trop grand, vous devrez donc sceller chaque relais s√©par√©ment ou le bo√Ætier entier.  En tant que touches de contr√¥le, j'ai pris en main les pilotes mosfet ADP3624 (un pour chaque paire de relais), qui permettent d'appliquer une tension aux enroulements dans les deux polarit√©s et de les d√©connecter apr√®s le d√©clenchement.  Les capteurs √† effet Hall ACS759-100 mesurent la consommation et la tension de ligne via un transformateur basse consommation.  Comme l'ADC et le microcontr√¥leur de contr√¥le est STM32F373CBT6. <br><br>  Pour simplifier la connexion de l'appareil fini, la tension d'entr√©e est fournie √† un connecteur et les bus en cuivre 7x3 mm soud√©s sur les pistes de la carte seront √©tir√©s sur tous les canaux de commutation.  Dans des conditions de fils √©ventuellement tr√®s longs √† la charge (plusieurs dizaines de m√®tres), il a √©t√© d√©cid√© de commuter √† la fois le z√©ro et la phase pour √©viter les probl√®mes d'interf√©rences, les distorsions et juste pour la s√©curit√©.  √âtant donn√© que la carte n'est pas con√ßue pour fonctionner sans dispositifs de protection externes (¬´fiches¬ª, RCD), elle ne contient aucun √©l√©ment de s√©curit√©, il n'y a que des parafoudres pour la protection contre les impulsions √† haute tension.  Chaque canal a une LED indicatrice, il y a aussi un circuit de signalisation (¬´tweeter¬ª et un relais pour 10 amp√®res de charge externe), mais leur utilisation en logiciel n'a pas encore √©t√© mise en place. <br><br>  L'appareil est contr√¥l√© via un port s√©rie avec isolation galvanique (th√©oriquement il est possible d'utiliser un port USB), avec un protocole simple similaire √† celui utilis√© dans mon variateur.  Je le remplacerai par MQTT-over-serial plus tard. <br><br> <a href=""><img src="https://habrastorage.org/files/bc0/071/29b/bc007129bfb145578c9ee966b0ce0dcd.png"></a> <br><br>  Je dois dire tout de suite que le circuit s'est av√©r√© peu efficace et changera un peu dans la prochaine version - la stabilit√© de la tension de 3,3 volts pour alimenter les capteurs de courant et le contr√¥leur ne r√©siste pas aux critiques, ce qui entra√Æne des erreurs de mesure de la puissance en quelques dizaines de watts (m√™me sans charge) tr√®s probablement, je fournirai des sources stables de tension de r√©f√©rence 3,3 v pour chaque capteur s√©par√©ment.  Il peut √©galement √™tre utile d'utiliser un ADC 16 bits dans le contr√¥leur, mais, malheureusement, sa vitesse n'est pas trop √©lev√©e - maintenant le courant et la tension sont mesur√©s environ 5000 fois par seconde, ce qui peut th√©oriquement √™tre fait avec 16 bits, mais je n'ai pas r√©ussi √† obtenir une stabilit√© son travail avec de nombreux canaux via DMA. <br><br>  Le micrologiciel du contr√¥leur affiche toutes les dix secondes des donn√©es sur la consommation de charge sur chaque canal et la tension secteur, recevant des commandes pour activer et d√©sactiver les canaux.  Le logiciel est tr√®s grossier, il devra √©galement √™tre refait dans l'ordre et ajouter diverses fonctions de contr√¥le (par exemple, surtension dans le r√©seau, surcharge, surchauffe de la carte, etc.). <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Code sur github</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr402375/">https://habr.com/ru/post/fr402375/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr402361/index.html">Agence spatiale europ√©enne: la surface d'Encelade se r√©chauffe √† l'int√©rieur</a></li>
<li><a href="../fr402363/index.html">Un professeur d'√©cole am√©ricain d√©chiffre un cryptogramme l√©ger du dernier √©tage du bureau Adobe</a></li>
<li><a href="../fr402367/index.html">Comment arr√™ter de payer pour l'itin√©rance, ou avec un seul num√©ro partout dans le monde</a></li>
<li><a href="../fr402369/index.html">Comment mesurer la vitesse d'une imprimante 3D - son extr√©mit√© chaude. Et pas seulement la vitesse</a></li>
<li><a href="../fr402373/index.html">Ce qui donne la "G√©n√©tique du Microbiote"</a></li>
<li><a href="../fr402377/index.html">Que pensent vos smartphones de la charge USB de la voiture</a></li>
<li><a href="../fr402379/index.html">Ce que les chercheurs en IA pensent des risques possibles associ√©s</a></li>
<li><a href="../fr402381/index.html">Comment recruter des astronautes</a></li>
<li><a href="../fr402383/index.html">Saw, Shura: comment nous avons con√ßu l'application mobile de suivi des chiens Mishiko</a></li>
<li><a href="../fr402385/index.html">Pourquoi vous devriez vous attendre √† un boom dans le domaine de la cr√©ation de robots pour les locaux commerciaux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>