<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📉 🍴 🔛 简直太复杂了。 第2部分，创建无线“智能家居”。 基于Linux技术，Z-Wave和MajorDoMo软件 🐲 🤷🏼 ❎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="第2部分。继续创建智能家居 
 在这一部分中，我们将Z-Wave控制器安装在Smart Home系统中，对其进行定义并熟悉* Nix操作系统，并在终端上工作（PuTTY程序），我将对此做些解释。 



 让我提醒您我对“智能家居”（UD）的要求： 


1. 该地方是公寓（不计划对某事物进行实质性...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>简直太复杂了。 第2部分，创建无线“智能家居”。 基于Linux技术，Z-Wave和MajorDoMo软件</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416369/"><h3> 第2部分。继续创建智能家居 </h3><br> 在这一部分中，我们将Z-Wave控制器安装在Smart Home系统中，对其进行定义并熟悉* Nix操作系统，并在终端上工作（PuTTY程序），我将对此做些解释。 <br><br><img src="https://habrastorage.org/webt/ee/s0/ni/ees0nixk2pmcne1z53llyakap5c.jpeg" alt="图片"><br><br><h4> 让我提醒您我对“智能家居”（UD）的要求： </h4><br><ol><li> 该地方是公寓（不计划对某事物进行实质性的改动）。 </li><li> 能够将所有解决方案集成到单个开源UD系统中。 </li><li> 逐步扩展（扩展）功能的能力。 </li><li> 如果可能的话，最小的成本。 </li><li> 如果可能，请在白俄罗斯或俄罗斯联邦购买系统组件，而无需从国外站点订购。 来了，看了看，买了。 </li><li> 如果可能的话，提供俄语界面，文档，支持。 </li></ol><br> 在第一部分中，我们已经创建了一个可启动的存储卡，配置并了解了Raspberry板的IP地址，了解了一些如何使用PuTTY并通过SSH连接进行连接。 <br><br> 现在，我们采取以下步骤：扩展存储卡上的空间，在系统中安装RaZberry控制器，对Z-Wave和MajorDoMo的界面有所了解/ <a name="habracut"></a><br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第一部分“：几乎是困难的。创建无线“智能家居”的开始。基于Linux技术，Z-Wave和MajorDoMo软件”</a> <br><br> 电源关闭时，请安装我们的Razzbery控制器。 打开我们的小型计算机，然后使用PuTTY连接到它。 建议电源使用2A。但是我使用1.5A。 <br><br><h3> 小提示 </h3><br> 如果您使用Windows操作系统，并且不经常使用* nix，那么以下提示可能会对您有所帮助： <br><br> 您完全不必键入任何命令，将命令复制到剪贴板，然后在PuTTY窗口中右键单击，然后将其粘贴到带有光标的行中。 <br><br> 最后的命令的枚举用↑，↓键进行。 <br><br> 附加[Tab]键-如果输入文件名，命令或路径的前几个字母，然后按[Tab]键，则bash将显示文件名或路径的其余部分。 <br><br> 使用PuTTY时，如果您不小心忘记设置正确的设置，编码，则显示字符时会遇到问题，您无法关闭窗口，只需右键单击程序顶部面板并调用程序的上下文菜单即可。 接下来，选择项目：更改设置... <br><br><img src="https://habrastorage.org/webt/zr/4c/jp/zr4cjph7a9camj3lspjqtw2run4.png" alt="图片"><br><br> 另外，当连接丢失（重新启动远程PC）时，“重新启动会话”项将出现在上下文菜单中。 <br><br><h3> 扩展存储卡上的可用空间 </h3><br> 我要做的第一件事是扩展存储卡。 安装后，将磁盘映像复制到该磁盘映像，并且无论卡的容量如何，内存均为16 GB。 如果您安装了16 GB的存储卡，则可以跳过此步骤。 <br><br> 通常，在执行此操作期间，我建议您保存备用图片，但是由于我们那里只有裸机，而且还没有做任何事情，所以我不明白这一点。 <br><br> 输入命令： <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">df</span></span> –h</code> </pre> <br><img src="https://habrastorage.org/webt/mu/yo/nt/muyont6ggtggi7zajft6b3u99oq.png" alt="图片"><br><br> 启动Raspberry配置实用程序 <br><br><pre> <code class="hljs lua">sudo raspi-<span class="hljs-built_in"><span class="hljs-built_in">config</span></span></code> </pre> <br> 选择项目7“高级选项”，然后选择项目A1“扩展文件系统”： <br><br><img src="https://habrastorage.org/webt/dd/hb/3m/ddhb3mdfe54n2cd6ugl-llxo6ew.png" alt="图片"><br><br> 在执行Raspberry reboot命令之后，以新的方式连接到它，然后重复以下命令： <br><br><pre> <code class="hljs powershell">df<span class="hljs-literal"><span class="hljs-literal">-h</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/dy/nm/-w/dynm-ws-d4dyknilt1vd9q5hjw8.png" alt="图片"><br><br> 如您所见，存储卡上的空间已增加。 <br><br><h3> 安装RaZberry控制器： </h3><br> 使用RaZberry控制器时，提供了英语和德语的小型使用说明书。 <br> 俄语版本可以在这里阅读： <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">俄语版本的RaZberry手册</a> <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">完整的英语手册。</a> <br><br> 该说明的俄语版本简短（就安装而言，它与完整的手册相对应），因此我将对其进行完整介绍： <br><br><ol><li> 从Raspberry Pi项目官方网站下载Raspbian wheezy映像（使用常规Raspbian wheezy，而不是Soft-Float版本）。 </li><li> 将映像刻录到SD卡（Raspbian下载站点上详细介绍了此过程）。 </li><li> 如下图所示，将RaZberry扩展板连接到Raspberry Pi计算机。 注意！ 切勿将RaZberry连接到正在运行的Raspberry Pi-在安装扩展卡之前，请务必先关闭电源！ </li><li> 将SD卡插入Raspberry Pi </li><li> 通过SSH或通过屏幕和键盘启动并连接到Raspberry Pi </li><li> 打开一个终端并运行以下命令： <br> <code>wget -q -O - http://razberry.z-wave.me/install | sudo bash</code> </li> <li> 成功完成安装后，在浏览器中打开页面<code>http://IP_OF_YOUR_RASPBERRY:8083</code> </li><li>  Z-Way for Razberry已成功安装！ </li></ol><br> 我们已经在第一部分中完成了第1-5点，但是随后我遇到了问题： <br><br> 我将给出程序： <br><br> 经营团队 <br><br><pre> <code class="hljs powershell">wget <span class="hljs-literal"><span class="hljs-literal">-q</span></span> <span class="hljs-literal"><span class="hljs-literal">-O</span></span> - http://razberry.z<span class="hljs-literal"><span class="hljs-literal">-wave</span></span>.me/install | sudo bash</code> </pre> <br> 我们同意许可协议，文件的安装和下载正在进行中。 <br><br> 我们看到猫鼬服务的启动，并且有一个建议从Z-wave项目接收新闻。 <br><br> 我们同意，因此输入您的电子邮件： <br><br><img src="https://habrastorage.org/webt/_8/86/m5/_886m5v2kqj3pmmnkbjmnxbqpku.png" alt="图片"><br><br> 似乎一切都已安装并启动。 <br><br> 我们在浏览器页面中输入倒数第二段 <br><br><pre> <code class="hljs objectivec">http:<span class="hljs-comment"><span class="hljs-comment">//IP_OF_YOUR_RASPBERRY:8083</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/gd/14/5t/gd145tk-oj6naabukbbze_rwrfs.png" alt="图片"><br> 此时，我什至无法打开页面，因为我没有尝试，如果没有其他操作，z-wave不会启动。 <br><br> 我们可以通过运行以下命令来查看正在运行的进程： <br><br><pre> <code class="hljs">pstree</code> </pre> <br><img src="https://habrastorage.org/webt/op/s_/qg/ops_qgh3njpzs-6rnrchkddbpfk.png" alt="图片"><br><br> 多亏了论坛，MajorDoMo（也看到了其他非俄语发言者的解决方案）找到了解决该问题的方法： <br><br> 您必须从文件夹中删除所有内容：/ opt“ z-way-server”。 然后执行以下命令： <br><br><pre> <code class="hljs powershell">wget <span class="hljs-literal"><span class="hljs-literal">-q</span></span> <span class="hljs-literal"><span class="hljs-literal">-O</span></span> - support.zwave.eu/libs | sudo bash wget <span class="hljs-literal"><span class="hljs-literal">-q</span></span> <span class="hljs-literal"><span class="hljs-literal">-O</span></span> - http://razberry.z<span class="hljs-literal"><span class="hljs-literal">-wave</span></span>.me/install | sudo bash wget <span class="hljs-literal"><span class="hljs-literal">-q</span></span> <span class="hljs-literal"><span class="hljs-literal">-O</span></span> - support.zwave.eu/libs | sudo bash</code> </pre> <br> 为了不手动键入文件删除命令，我习惯了使用Midnight Commander文件管理器或简称MC。 <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Wiki Midnight Commander上的说明</a> <br><br> 我已经在映像中安装了（但是如果某些突然改变，那么我们将执行安装命令）： <br><br><pre> <code class="hljs swift">sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> install mc</code> </pre> <br> 我们从管理员启动它，然后发现自己在迷你PC的主文件夹中 <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sudo</span></span> mc</code> </pre> <br> 转到目录：/ opt / z-way-server /通过突出显示插入并按F8删除内容。 <br><br> 我没有删除文件夹本身。 要退出，请按F10“从指挥官退出”。 分配功能键的提示-在程序窗口底部，以绿色突出显示。 <br><br><img src="https://habrastorage.org/webt/0l/3e/df/0l3edfhofxqzkfpymkj_xkvzca4.png" alt="图片"><br><br> 接下来，我们交替执行以下三个命令： <br><br><pre> <code class="hljs powershell">wget <span class="hljs-literal"><span class="hljs-literal">-q</span></span> <span class="hljs-literal"><span class="hljs-literal">-O</span></span> - support.zwave.eu/libs | sudo bash wget <span class="hljs-literal"><span class="hljs-literal">-q</span></span> <span class="hljs-literal"><span class="hljs-literal">-O</span></span> - http://razberry.z<span class="hljs-literal"><span class="hljs-literal">-wave</span></span>.me/install | sudo bash wget <span class="hljs-literal"><span class="hljs-literal">-q</span></span> <span class="hljs-literal"><span class="hljs-literal">-O</span></span> - support.zwave.eu/libs | sudo bash</code> </pre><br> 重载Raspberry： <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Sudo</span></span> reboot</code> </pre> <br> 我们重新启动PuTTY会话（如您所记得，右键单击，当连接断开时，将出现重新启动sesshion）。 <br><br> 再次执行pstree命令后，我们看到Z-Way服务正在运行。 <br><br><img src="https://habrastorage.org/webt/e8/7e/6w/e87e6wrhyuztl56nxorkv6ezj8u.png" alt="图片"><br><br> 通过在浏览器中输入<code>http://IP_OF_YOUR_RASPBERRY:8083</code>我们进入初始设置页面。 您必须设置密码，您将具有管理员登录名和管理员访问权限。 我们还可以更改语言，从默认的英语更改为俄语，这可以在设置页面上完成。 <br><br><img src="https://habrastorage.org/webt/is/6g/ig/is6gig2wffvfyj9h29hpqpjlsa8.png" alt="图片"><br><br> 通过输入<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">IP_OF_YOUR_RASPBERRY</a> ：8083 / expert，我们切换到专家模式。 通过转到设备-采访选项卡，我们可以看到控制器的状态。 <br><br> <code>http://IP_OF_YOUR_RASPBERRY:8083/expert/#/configuration/interview/1</code> <br> <br><img src="https://habrastorage.org/webt/uy/ij/zo/uyijzoq02le7f8f4rueuqtatwau.png" alt="图片"><br><br> 如果仅基于Z-Wave技术构建“智能家居”（公寓自动化），这可能就足够了，但是如果您使用多种技术并计划扩展系统，那么我认为这还不够。 <br><br> 因此，在MajorDoMo中安装另一个Z-Wave模块： <br><br> 我们转到MajorDomo的主页：在浏览器中打开IP_OF_YOUR_RASPBERRY（未指定端口），我们看到一个熟悉的界面： <br><br><img src="https://habrastorage.org/webt/nr/3q/t4/nr3qt4amkcixk1d7aajxsaleeao.png" alt="图片"><br><br> 转到“ <b><i>控制面板”</i></b> ，然后： <i><b>系统市场更新-设备</b></i> <br><br><img src="https://habrastorage.org/webt/lt/75/wr/lt75wrebbfyhawdx4dz_ol10qu0.png" alt="图片"><br><br> 在列表的最后，是Z-Wave的附加组件。 <br><br> 也许这会停止。 <br><br> 我唯一要添加的内容是： <br><br> 一些信息：我们的Raspberry在基于Debian9的Raspbian GNU / Linux操作系统上运行。 您可以使用以下命令找出操作系统版本： <br><br><pre> <code class="hljs powershell">cat /etc/*<span class="hljs-literal"><span class="hljs-literal">-release</span></span> lsb_release <span class="hljs-literal"><span class="hljs-literal">-a</span></span></code> </pre> <br> 针对Raspbian wheezy（Debian 7）版本描述的安装说明，该版本自2016年2月以来已经停止支持和相关性。 <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Wiki上有关Debian的更多信息</a> <br><br><h3> 资料来源： </h3><br> 为了不按文本搜索，我将重复一小段来源： <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Z-wave.ru</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Z-wave.by</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">开发人员网站MajorDoMo</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MajorDoMo论坛</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">俄语版本的RaZberry手册</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">完整的英语手册。</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第一部分“：几乎是困难的。创建无线“智能家居”的开始。基于Linux技术，Z-Wave和MajorDoMo软件”</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN416369/">https://habr.com/ru/post/zh-CN416369/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN416359/index.html">Web开发人员的快速工作环境（Vagrant和PHPStorm）</a></li>
<li><a href="../zh-CN416361/index.html">如何在不使用库的情况下在React应用程序中组织一般状态（以及为什么需要mobx）</a></li>
<li><a href="../zh-CN416363/index.html">淘宝在俄罗斯正式开业</a></li>
<li><a href="../zh-CN416365/index.html">收集愿望并投票支持Vivaldi浏览器的新功能</a></li>
<li><a href="../zh-CN416367/index.html">我们使用本节的BTRFS启动ReactOS</a></li>
<li><a href="../zh-CN416371/index.html">模拟野营灯</a></li>
<li><a href="../zh-CN416375/index.html">初学者的JavaScript基础</a></li>
<li><a href="../zh-CN416377/index.html">我们成为编程向导。 第一部分</a></li>
<li><a href="../zh-CN416379/index.html">神经虫。 我们如何比斯坦福大学早一年教神经网络发明模因</a></li>
<li><a href="../zh-CN416381/index.html">2018年罗马俱乐部报告，第3.13章：慈善事业，投资，众包和区块链</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>