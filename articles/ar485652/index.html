<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤦🏿 🎽 ⚠️ التقاء مضمنة إحصاءات التعليقات 👨🏽‍🌾 🗝️ 🥂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="كيفية جمع إحصاءات تعليق الصفحة في التقاء؟ 

 نعم ، ولماذا قد تكون هناك حاجة لهذا؟ 



 لماذا ولماذا 
 في المشروع الذي صادفت فيه العمل ، ولدت العملية ا...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>التقاء مضمنة إحصاءات التعليقات</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485652/" style=";text-align:right;direction:rtl">  كيفية جمع إحصاءات تعليق الصفحة في التقاء؟ <br><br>  نعم ، ولماذا قد تكون هناك حاجة لهذا؟ <br><br><img src="https://habrastorage.org/webt/c6/7x/uo/c67xuo6sop9dd7mpzxty_i7wj7s.png"><br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  لماذا ولماذا </h2><br>  في المشروع الذي صادفت فيه العمل ، ولدت العملية التالية لإعداد المتطلبات والموافقة عليها: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  تم استخدام التقاء للتوثيق. </li><li style=";text-align:right;direction:rtl">  أعد فريق المورد وصفًا لعمليات الأعمال وخطواتها في شكل صفحات منفصلة وفقًا للقالب. </li><li style=";text-align:right;direction:rtl">  مرة واحدة في الأسبوع ، تم تسليم مجموعة من الأوصاف المعدة للعميل لتصحيحها. </li><li style=";text-align:right;direction:rtl">  ترك فريق العملاء جميع الأسئلة والإضافات على الصفحة المقابلة في شكل تعليقات مدمجة. </li><li style=";text-align:right;direction:rtl">  واستكمل فريق المورد المحتوى ، ورد على التعليقات والأسئلة الثابتة لمزيد من الدراسة. </li><li style=";text-align:right;direction:rtl">  إذا تمت الإجابة عن السؤال وتم تحديث المحتوى أو تم إصلاح مهمة الدراسة ، فيجب على فريق العميل إغلاق التعليق. </li><li style=";text-align:right;direction:rtl">  يجب إغلاق الأسئلة المتعلقة بدفعة من المستندات من الأسبوع الحالي بحلول وقت نقل الدفعة التالية الأسبوع المقبل. </li></ul><br>  كل أسبوع ، على مديري المشاريع مهمة لفهم مقدار عمل مجموعة المستندات التي تم تسليمها وما الذي يمكن اعتباره جاهزًا بشكل مشروط منه.  ويحتاج المشاركون في فريق المورد بشكل دوري إلى التحقق من حالة التعليقات على مستنداتهم والعمل بشكل هادف مع البقية.  ولكن كيف يمكن العثور عليها؟  يمكنك فتح كل صفحة ، والبحث عن أول تعليق عليها بعينيك (أو بمساعدة <a href="https://community.atlassian.com/t5/Confluence-questions/Search-for-unresolved-inline-comments/qaq-p/971424">خدعة صغيرة</a> ) ، ثم النقر فوق كل التعليقات ،  لا يتعجل فريق العميل إغلاقها والتفكير في كل منها والتحقق من الإجابة. <br><br>  تحتوي الدُفعة الأسبوعية على 50-100 صفحة منفصلة ، وللقيام بذلك بيديك ، هناك قدر كبير من العمل.  وإذا كنت لا تزال تحاول جمع الحجج لإقناع الجانب الآخر ، فستصبح حزينة للغاية.  وهناك أيضًا تعليقات متدلية تنتج عن التحرير غير الدقيق للصفحة عندما يتم حذف النص المصدر بطريق الخطأ.  يكون هذا التعليق مرئيًا في التعليقات التي تم حلها ، لكن لا يمكن إعادة فتحها (يمكنك ، إذا قمت بإعادة إنشاء علامة غير مرئية في نص الصفحة). <br><br>  البحث عن الأدوات لم ينجح.  بالإضافة إلى ذلك ، يتم نشر التقاء على جانب العميل ، لا يمكنك تثبيت المكونات الإضافية ، ناهيك عن شراء.  لا خبرة في تطوير الاقتصاد الكلي. <br><br>  في مرحلة ما ، تذكرت <a href="https://docs.atlassian.com/ConfluenceServer/rest/7.1.0/">API</a> Confluence <a href="https://docs.atlassian.com/ConfluenceServer/rest/7.1.0/">REST</a> والخبرة السابقة في استخدام <a href="https://docs.atlassian.com/software/jira/docs/api/REST/7.6.1/">واجهة برمجة تطبيقات Jira</a> المشابهة.  أظهر البحث والتجارب مع وظائف الاتصال من المستعرض أنه يمكنك الوصول إلى التعليقات وخصائصها.  بعد ذلك ، كان عليك اختيار أداة للتشغيل الآلي ، ويمكنك البدء في حلها.  لدي بعض الخبرة في إنشاء برامج نصية على أدوات أقرب إلى المسؤولين مثل Bash و Perl و JScript.  لست مطورًا ، ولم يكن لدي أي أدوات مألوفة أو مألوفة.  أردت أن أجرب شيئًا أكثر شيوعًا أو مناسبًا.  ثم اكتشفت <a href="https://atlassian-python-api.readthedocs.io/en/latest/">غلافاً لبيثون API</a> وقررت تجربته. <br><br><h2 style=";text-align:right;direction:rtl">  المبدأ العام </h2><br>  تم صياغة المشكلة على النحو التالي.  تحتاج إلى العثور على جميع الصفحات المتعلقة بتسليم أسبوعي محدد.  اجمع التعليقات عليها في قائمة: صفحة ، رابط للتعليق ، مؤلف وتاريخ التعليق ، نص مصدر في الصفحة ، تعليق وإجابات ، مؤلف وتاريخ آخر رد ، حالة تعليق.  بالإضافة إلى ذلك ، جمع إحصائيات لكل صفحة ، وعدد التعليقات في المجموع ، وعدد المخاطر ، وعدد الصفحات المفتوحة.  احفظ كل شيء على صفحة إحصائيات خاصة. <br><br>  أضع بيثون ، انظر إلى أساسيات العمل معها ، ودعنا نذهب.  أولاً ، قم بإنشاء اتصال: <br><br><pre style=";text-align:right;direction:rtl"><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> atlassian <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Confluence UserLogin = <span class="hljs-string"><span class="hljs-string">'xxxxxx'</span></span> <span class="hljs-comment"><span class="hljs-comment"># input("Login: ") UserPwd = 'xxxxxx' # input("Password: ") confluenceURL = 'http://wiki.xxxxxx' confluence = Confluence( url=confluenceURL, username=UserLogin, password=UserPwd)</span></span></code> </pre> <br>  للبحث عن صفحات من مجموعة أسبوعية ، قررت استخدام العلامات.  كيفية إيصالها بشكل جماعي هي مهمة منفصلة. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">page_label = <span class="hljs-string"><span class="hljs-string">'week123'</span></span> cql = <span class="hljs-string"><span class="hljs-string">'space.key={} and label = "{}" and type = page '</span></span> <span class="hljs-string"><span class="hljs-string">'ORDER BY title '</span></span>.format(<span class="hljs-string"><span class="hljs-string">'YYY'</span></span>, page_label) pages = confluence.cql(cql, expand=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, start=<span class="hljs-number"><span class="hljs-number">0</span></span>, limit=<span class="hljs-number"><span class="hljs-number">200</span></span>)</code> </pre><br>  لذلك لدينا قائمة الصفحات للتحقق.  بعد ذلك ، نبدأ في معالجة كل صفحة على حدة.  نحن نجمع من بياناتها على التعليقات مع المعلمات الخاصة بهم.  بناءً على هذه البيانات ، نقوم ببناء إحصائيات حول عدد التعليقات الموجودة على الصفحة وفي أي ظروف.  بعد ذلك ، نطرق النتيجة لجميع الصفحات ونبدأ في تنسيق النتيجة.  نقوم بإنشاء نص الصفحة والنتيجة في شكل جدول إحصائيات وقائمة مفصلة بالتعليقات المفتوحة. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">معالجة قائمة الصفحات</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs">statistics = [] open_comments = [] <span class="hljs-comment"><span class="hljs-comment">#  - ? if pages is not None: #    ? if pages['size'] &gt; 0: for page in pages['results']: print(page['title']) #       , #  page_comments = page_comments_data(page['content']['id']) #     statistics.append(page_statistics(page_comments)) #        #    . for comment in page_comments: if comment['Result'] not in ['resolved', 'nocomment']: if not (comment['Result'] == 'dangling' and comment['Author'] in excludeNames): open_comments.append(comment) #       . statistics.append(total_statistics(statistics)) #     page_id = confluence.get_page_id(space='YYY', title=page_title) #     ,    . page_body = ('&lt;p&gt;&lt;ac:structured-macro ac:name="toc" ac:schema-version="1"' '/&gt;&lt;/p&gt;' '&lt;h1&gt;Comments Statistics&lt;/h1&gt;{}' '&lt;h1&gt;Open Comments List&lt;/h1&gt;{}' ).format(create_table(statistics), create_table(open_comments)) #  if page_id is not None: status = confluence.update_page( page_id=page_id, title=page_title, body=page_body, representation='storage' )</span></span></code> </pre></div></div><br><h2 style=";text-align:right;direction:rtl">  ميزات API </h2><br>  الآن دعونا نتعرف على كيفية معالجة الصفحة.  بشكل افتراضي ، تقوم واجهة برمجة التطبيقات بإرجاع المعلومات الأساسية فقط ، مثل المعرف أو اسم الصفحة.  يجب تحديد جميع الخصائص الإضافية بشكل صريح.  يمكن رؤيتها من خلال تحليل نتيجة المكالمة.  يمكن العثور على بيانات إضافية في أقسام أو أقسام فرعية من _expandable.  نضيف العنصر المطلوب للتوسع وننظر إلى أبعد من ذلك حتى نعثر على البيانات اللازمة. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">مثال المشكلة</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="json hljs">http://wiki.xxxxxx/rest/api/content/<span class="hljs-number"><span class="hljs-number">101743895</span></span>?expand=body,children.comment { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"97517865"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"page"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"current"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"w2019-47 comments status"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"comment"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"results"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"start"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"limit"</span></span>: <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-attr"><span class="hljs-attr">"size"</span></span>: <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: {} }, <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"_expandable"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"attachment"</span></span>: <span class="hljs-string"><span class="hljs-string">"/rest/api/content/97517865/child/attachment"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"page"</span></span>: <span class="hljs-string"><span class="hljs-string">"/rest/api/content/97517865/child/page"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"body"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"_expandable"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"editor"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"view"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"export_view"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"styled_view"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"storage"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"anonymous_export_view"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"extensions"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"position"</span></span>: <span class="hljs-string"><span class="hljs-string">"none"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"_links"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"_expandable"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"metadata"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"operations"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"restrictions"</span></span>: <span class="hljs-string"><span class="hljs-string">"/rest/api/content/97517865/restriction/byOperation"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"history"</span></span>: <span class="hljs-string"><span class="hljs-string">"/rest/api/content/97517865/history"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ancestors"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"descendants"</span></span>: <span class="hljs-string"><span class="hljs-string">"/rest/api/content/97517865/descendant"</span></span>, } }</code> </pre></div></div><br>  وهناك أيضا قيود على عدد النتائج الصادرة ، ترقيم الصفحات.  تم تكوينه على جانب الخادم (API؟) وفي حالتنا هو 25. بالنسبة لبعض الطلبات ، يمكن تغييره عن طريق تحديد صراحة ، لكنه لن يعمل إلا للمستوى العلوي.  وكشف التعليقات على الصفحة ، نحصل على نفس الشيء فقط 25 ، بينما الحجم مزيف أيضًا.  في المثال كان هناك 29 في الواقع.  تمكنا من التحايل على ترقيم الصفحات من التعليقات باستخدام وظيفة منفصلة في وحدة التقاء - get_page_comments مع القدرة على تحديد حجم الصفحة. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    import re #      XML def replace_chars2(in_text): text = re.sub(r'&amp;', '&amp;', in_text) text = re.sub(r'\'', ''', text) text = re.sub(r'&lt;', '&lt;', text) text = re.sub(r'&gt;', '&gt;', text) text = re.sub(r'"', '"', text) return text</span></span></code> </pre><br>  وكان المأزق التالي ينتظر في ميزات الحفاظ على إصدار أحرف خاصة وإصدارها.  يمكن الحصول على نص الصفحة أو التعليق في عدة طرق عرض: XML داخلي - تخزين ، HTML وسيط بدون إخراج الماكرو - عرض و HTML مع إخراج الماكرو - export_view.  لكن عنوان عنوان الصفحة ونص التعليق الأصلي الأصلي حدد دائمًا في شكل مناسب للقراءة.  لأن  في المستقبل ، تقع هذه البيانات في صلب الصفحة مع الإحصاءات ، ثم أدت بعض الأحرف إلى حدوث أخطاء في التحويل.  كان علي أن أكتب إجراء استبدال أعلاه. <br><br><h2 style=";text-align:right;direction:rtl">  تعليقات الصفحة </h2><br>  الآن لتحليل الصفحة.  هذا أحد الإجراءات التي تقوم بتحميل الصفحة ، وجمع بياناتها ، ثم تسحب قائمة بالتعليقات مع الإجابات وتجميعها في المراسلات.  والنتيجة هي قائمة من القواميس ، حيث يتوافق كل عنصر من عناصر القائمة مع تعليق واحد مع الإجابات.  وجميع سمات هذا التعليق تكمن في الحقول المقابلة من القاموس. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">معالجة صفحة واحدة</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">page_comments_data</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(page_identifier)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#,      ,  , #   , #  ,    ,    #   (). expand_text = ('body.storage,extensions.inlineProperties' ',extensions.resolution,version,children.comment' ',children.comment.version,children.comment.body.storage' ) #    .     . conf_page = confluence.get_page_by_id(page_identifier, expand='body.storage') page_title = replace_chars2(conf_page['title']) #   . link_base = conf_page['_links']['base'] page_link = link_base + conf_page['_links']['webui'] page_code = '&lt;a href="{}"&gt;{}&lt;/a&gt;'.format(page_link, page_title) #   page_comments = confluence.get_page_comments(content_id=page_identifier, start=0, limit=1000, comments = [] #    for comment in page_comments['results']: #      - . if comment['extensions']['location'] == 'footer': continue #  comment_text = comment['body']['storage']['value'] comment_result = comment['extensions']['resolution']['status'] comment_link = '&lt;a href="{}"&gt;{}&lt;/a&gt;'\ .format(link_base + comment['_links']['webui'], 'link') #  comment_link = re.sub(r'&amp;focusedCommentId=', '&amp;focusedCommentId=', comment_link) #  created_when = re.sub(r'\.000\+', ' GMT+', re.sub(r'T', ' ', comment['version']['when'])) created_by = comment['version']['by']['displayName'] orig_text = replace_chars2(comment['extensions'] ['inlineProperties']['originalSelection']) #    /. thread = '&lt;b&gt;To text: &lt;/b&gt;{}&lt;br/&gt;&lt;b&gt;At: &lt;/b&gt;{}&lt;br/&gt;&lt;b&gt;By: ' '&lt;/b&gt;{}&lt;br/&gt;{}'.format(orig_text, created_when, created_by, comment_text) last_by = '' last_when = '' #  answers = comment['children']['comment']['size'] if answers &gt; 0: for message in comment['children']['comment']['results']: #  last_when = re.sub(r'\.000\+', ' GMT+', re.sub(r'T', ' ', message['version']['when'])) last_by = message['version']['by']['displayName'] #  thread += ('&lt;br/&gt;===next===&lt;br/&gt;&lt;b&gt;At: &lt;/b&gt;{}&lt;br/&gt;&lt;b&gt;By: ' '&lt;/b&gt;{}&lt;br/&gt;{}'.format(last_when, last_by, message['body']['storage']['value']) ) #  . row_comm = {"Page": page_code, "Comment": comment_link, "Thread": thread, "Result": comment_result, "Answers count": answers, "Creation Date": created_when, "Author": created_by, "Last Date": last_when, "Last Author": last_by} comments.append(row_comm) #   ,   , #     . if len(comments) == 0: row_comm = {"Page": page_code, "Comment": 'nolink', "Thread": 'nocomment', "Result": 'nocomment', "Answers count": 0, "Creation Date": 'never', "Author": 'nobody', "Last Date": 'never', "Last Author": 'nobody'} comments.append(row_comm) return comments</span></span></code> </pre></div></div><br><h2 style=";text-align:right;direction:rtl">  الإحصاءات والجداول </h2><br>  من أجل وضوح عرض البيانات ، نجمع إحصاءات عنها ونرتبها في شكل جداول. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">نعالج الإحصاءات</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">page_statistics</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(comments_data)</span></span></span><span class="hljs-function">:</span></span> open_count = <span class="hljs-number"><span class="hljs-number">0</span></span> dang_count = <span class="hljs-number"><span class="hljs-number">0</span></span> comment_count = len(comments_data) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> comment_count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> comment <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> comments_data: <span class="hljs-comment"><span class="hljs-comment">#     if comment['Result'] not in ['resolved', 'nocomment']: if comment['Result'] in ['open', 'reopened']: open_count += 1 if comment['Result'] == 'dangling' and comment['Author'] not in excludeNames: dang_count += 1 res_dict = {'Page': comments_data[0]['Page'], 'Total': comment_count, 'Resolved': comment_count - open_count - dang_count, 'Dangling': dang_count, 'Open': open_count} return res_dict #   def total_statistics(stat_data): total_comment = 0 total_resolved = 0 total_open = 0 total_dangling = 0 for statRow in stat_data: total_comment += statRow['Total'] total_resolved += statRow['Resolved'] total_open += statRow['Open'] total_dangling += statRow['Dangling'] res_dict = {'Page': 'All Pages Total', 'Type': '', 'Jira': '', 'Status': '', 'Total': total_comment, 'Resolved': total_resolved, 'Dangling': total_dangling, 'Open': total_open} return res_dict</span></span></code> </pre></div></div><br>  لجعل البيانات في شكل جداول ، سنفعل إجراء آخر.  إنها تشكل كود HTML للجدول من قائمة القواميس ، حيث تضيف العناوين سطرًا من أسماء مفاتيح القاموس وتضيف عمودًا يحتوي على أرقام الأسطر. <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_table</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(tab_data)</span></span></span><span class="hljs-function">:</span></span> tab_start = <span class="hljs-string"><span class="hljs-string">'&lt;table style="width: 100.00%;"&gt;&lt;colgroup&gt;&lt;col /&gt;'</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;col /&gt;&lt;/colgroup&gt;&lt;tbody&gt;'</span></span> tab_end = <span class="hljs-string"><span class="hljs-string">'&lt;/tbody&gt;&lt;/table&gt;'</span></span> tab_code = tab_start + <span class="hljs-string"><span class="hljs-string">'&lt;tr&gt;'</span></span> row_num = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(tab_data) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>: tab_code += <span class="hljs-string"><span class="hljs-string">'&lt;th&gt;Num&lt;/th&gt;'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tab_data[<span class="hljs-number"><span class="hljs-number">0</span></span>].keys(): tab_code += <span class="hljs-string"><span class="hljs-string">'&lt;th&gt;{}&lt;/th&gt;'</span></span>.format(key) tab_code += <span class="hljs-string"><span class="hljs-string">'&lt;/tr&gt;'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> row <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tab_data: tab_code += <span class="hljs-string"><span class="hljs-string">'&lt;tr&gt;&lt;td&gt;{}&lt;/td&gt;'</span></span>.format(row_num) row_num += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> field <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> row.values(): tab_code += <span class="hljs-string"><span class="hljs-string">'&lt;td&gt;{}&lt;/td&gt;'</span></span>.format(field) tab_code += <span class="hljs-string"><span class="hljs-string">'&lt;/tr&gt;'</span></span> tab_code += tab_end + <span class="hljs-string"><span class="hljs-string">'\n'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tab_code</code> </pre><br>  الآن كل شيء جاهز.  بعد تصنيف البرنامج النصي وتشغيله ، نحصل على صفحة تبدو كما يلي: <br><br><img src="https://habrastorage.org/webt/-1/if/af/-1ifafmgt3mqvbayphkq7opy4mq.png"><br><br><h2 style=";text-align:right;direction:rtl">  PS </h2>  بالطبع ، هذا ليس كل ما ظهر في النهاية.  كان هناك تحليل للصفحات والبحث عن ماكرو مع رقم المهمة في جيرا.  كان هناك تصنيف تلقائي بواسطة أرقام المهام في جيرا وروابط منها إلى التقاء.  كان هناك مقارنة والتحقق من قوائم التسليم الأسبوعية.  كان هناك حفظ للتعليقات في Excel وجمع البيانات الشائعة من عدة ملفات Excel أسبوعية.  ومؤخرًا تحليل التعليقات من Word تمت إضافته. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar485652/">https://habr.com/ru/post/ar485652/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar485636/index.html">تقوم الفيروسات المقاومة لـ CRISPR ببناء ملاجئ لحماية الجينومات من الإنزيمات التي تخترق الحمض النووي</a></li>
<li><a href="../ar485640/index.html">طرق إخفاء صفحة الويب</a></li>
<li><a href="../ar485646/index.html">نصائح مفيدة لبيثون لم تقابلها من قبل. الجزء 2</a></li>
<li><a href="../ar485648/index.html">طريقة pythonic لـ: نطاق () وتعداد () حلقات</a></li>
<li><a href="../ar485650/index.html">تقنيات تقليص صورة عامل الميناء</a></li>
<li><a href="../ar485654/index.html">فكرة مأخوذة من الفيزياء تساعد الذكاء الاصطناعي على العمل في أبعاد أعلى.</a></li>
<li><a href="../ar485660/index.html">شركة حماية DDoS نفسها شنت هجمات DDoS ، واعترف مؤسسها</a></li>
<li><a href="../ar485664/index.html">إنشاء معلمات ديناميكية في مهمة Jenkins ، أو كيفية جعل مهمتك سهلة الاستخدام</a></li>
<li><a href="../ar485672/index.html">أفضل ممارسات Redis ، الجزء الأول</a></li>
<li><a href="../ar485682/index.html">إدارة الوقت لن تساعد: المماطلة هي مشكلة تنظيم العواطف ، وليس الوقت</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>