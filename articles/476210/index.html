<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   Estaci贸n de trabajo criptogr谩fica basada en est谩ndares de clave p煤blica. Configuraci贸n de tokens PKCS # 11   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Una vez m谩s, mirando la funcionalidad de la utilidad cryptoarmpkcs , not茅 que, principalmente trabajando con tokens / tarjetas inteligentes criptogr谩f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Estaci贸n de trabajo criptogr谩fica basada en est谩ndares de clave p煤blica. Configuraci贸n de tokens PKCS # 11</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476210/"><img src="https://habrastorage.org/webt/ak/4_/mh/ak4_mhyj16_mq5k5h9zd05dnor0.png" align="left">  Una vez m谩s, mirando la funcionalidad de la utilidad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cryptoarmpkcs</a> , not茅 que, principalmente trabajando con tokens / tarjetas inteligentes criptogr谩ficas PKCS # 11, no tiene una funcionalidad incorporada para su configuraci贸n.  Estamos hablando de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">inicializar tokens</a> , establecer c贸digos PIN, etc.  Y se decidi贸 agregar esta funcionalidad.  El primer paso fue expandir la funcionalidad del paquete <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">TclPKCS11</a> , cuya biblioteca est谩 escrita en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C.</a> <br><br><h3>  <font color="blue">Nuevas caracter铆sticas de TclPKCS11</font> </h3><br>  Tres nuevas caracter铆sticas aparecieron en el paquete: <br><br><pre><code class="plaintext hljs">::pki::pkcs11::inittoken &lt;handle&gt; &lt;slotId&gt; &lt;SO-pin&gt; &lt;label for token&gt;</code> </pre> <br><pre> <code class="plaintext hljs">::pki::pkcs11::inituserpin &lt;handle&gt; &lt;slotId&gt; &lt;SO-pin&gt; &lt;USER-pin&gt;</code> </pre> <br><pre> <code class="plaintext hljs">::pki::pkcs11::setpin &lt;handle&gt; &lt;slotId&gt; &lt;so | user&gt; &lt;oldpin&gt; &lt;newpin&gt;</code> </pre> <a name="habracut"></a><br>  La primera funci贸n :: pki :: pkcs11 :: inittoken es inicializar el token.  Debe tenerse en cuenta que si esta funci贸n se aplica a un token de trabajo, todos los objetos en 茅l ser谩n destruidos. <br><br>  La segunda funci贸n :: pki :: pkcs11 :: inituserpin es para inicializar un PIN de usuario (PIN DE USUARIO). <br><br>  Despu茅s de la inicializaci贸n inicial del c贸digo PIN del usuario, debe cambiarse inmediatamente al c贸digo PIN que se utilizar谩 en el futuro, y debe almacenarse, al igual que el SO-PIN, lejos de miradas indiscretas.  Por razones de seguridad, los tokens, por regla general, no le permiten iniciar sesi贸n con el c贸digo PIN inicial. <br><br>  Para cambiar los c贸digos PIN, se utiliza una tercera funci贸n, a saber :: pki :: pkcs11 :: setpin.  Esta funci贸n le permite cambiar tanto un PIN de usuario como un SO-PIN. <br><br>  Tambi茅n se debe tener en cuenta que los tokens, por regla general, no permiten restaurar el SO-PIN original (predeterminado).  Pero si reinicializa el token, nuevamente obtendr谩 el SO-PIN predeterminado.  La implementaci贸n del paquete TclPKCS11 se puede ver en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> . <br><br>  Ahora, teniendo a mano el paquete TclPKCS11 con nuevas funciones, no fue dif铆cil implementar una GUI para estas funciones: <br><br><img src="https://habrastorage.org/webt/kf/tz/br/kftzbrb15wxmo6z31ei2wl9aa7c.png"><br><br><h3>  <font color="blue">Fichas de entrenamiento</font> </h3><br>  Pero antes de usarlos, prestemos atenci贸n al hecho de que se ha agregado otro bot贸n "Crear tokens" a la funcionalidad de la utilidad. <br><br>  Esto se debe al hecho de que no todos tienen el token de hardware PKCS # 11 con soporte para la criptograf铆a rusa, y si es as铆, da miedo usarlo con fines educativos.  Y solo para que la utilidad pueda usarse f谩cilmente con fines educativos, en primer lugar, apareci贸 el bot贸n "Crear tokens".  Al hacer clic en este bot贸n, ver谩 instrucciones sobre c贸mo obtener software o tokens en la nube: <br><br><img src="https://habrastorage.org/webt/0g/gr/y8/0ggry8mqbsx-jrhuv9r0xkky3go.png"><br><br>  Estos tokens implementan las 煤ltimas recomendaciones <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">TK-26</a> para PKCS # 11 v.2.40. <br><br>  Discutiremos brevemente c贸mo obtener un token en la nube.  Descargue el paquete de distribuci贸n necesario, descompr铆malo si es necesario y ejec煤telo.  Si no tenemos un token en la nube, recibiremos el siguiente mensaje: <br><br><img src="https://habrastorage.org/webt/b1/3j/of/b13jofvep6tfa2ubmxxvgq0xite.png"><br><br>  Como todav铆a no tenemos un token en la nube, haga clic en el bot贸n "Registrarse en la nube": <br><br><img src="https://habrastorage.org/webt/vh/l1/em/vhl1emb5c_osrid40cykaz-srcc.png"><br><br>  Despu茅s de completar los campos, haga clic en el bot贸n "Finalizar": <br><br><img src="https://habrastorage.org/webt/2s/sy/jn/2ssyjneg9ioqrn91pr84rthwi-4.png"><br><br>  Dado que estamos hablando principalmente de capacitaci贸n, podemos guardar una contrase帽a para acceder a la nube (pero no al token) en el lugar de trabajo: <br><br><img src="https://habrastorage.org/webt/mr/7i/xx/mr7ixxhx7odzwumrhvnenak_nri.png"><br><br><h3>  <font color="blue">Inicializaci贸n de token</font> </h3><br>  Ahora que estamos registrados en la nube, salimos de la utilidad guils11cloud_conf y regresamos a la utilidad cryptoarmpkcs para configurar el token de la nube.  Cabe se帽alar aqu铆 que la biblioteca de tokens en la nube se guardar谩 en la carpeta ls11cloud creada en el directorio de inicio del usuario.  Es esta biblioteca la que deber谩 seleccionarse como la biblioteca PKCS # 11 para el token de la nube.  Despu茅s de elegir una biblioteca, puede ver los mecanismos criptogr谩ficos compatibles: <br><br><img src="https://habrastorage.org/webt/yi/om/ss/yiomssfq9j5d0l7dhda6ji6h7ck.png"><br><br>  Volvemos a inicializar el token de la nube haciendo clic en el bot贸n "Configuraci贸n de token".  Seleccionamos la operaci贸n "Inicializar el token", completamos los campos (recuerde que el SO-PIN predeterminado es 87654321) y hacemos clic en el bot贸n "Realizar operaci贸n": <br><br><img src="https://habrastorage.org/webt/sx/7t/mm/sx7tmmjsjqkwucovlkvhhsw6t04.png"><br><br>  Todos los tokens est谩n listos para funcionar.  Pero no olvide cambiar el PIN del SO y cambiar peri贸dicamente el PIN del usuario.  Usando un esquema similar, puede crear un token de software.  Los interesados pueden probar: <br><br><img src="https://habrastorage.org/webt/_8/3i/za/_83izagmlgyw9obbk0uamo4zee4.png"><br><br>  Ahora podemos almacenar nuestros certificados personales en ellos, firmar documentos, hacer todo lo que se escribi贸 en esta serie de art铆culos. <br><br><h3>  <font color="blue">Pr贸ximas innovaciones en PKI / PKI</font> </h3><br>  El 7 de noviembre de 2019, la Duma del Estado adopt贸 en primera lectura las enmiendas a la ley "Sobre firmas electr贸nicas".  Esta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enmienda se</a> aplica a todas las organizaciones y empresarios individuales, ya que las reglas para la emisi贸n de firmas electr贸nicas cambiar谩n. <br><br>  Si entend铆 todo correctamente, las personas jur铆dicas y los empresarios individuales podr谩n recibir certificados calificados solo en el Servicio de Impuestos Federales y organizaciones financieras en el Banco Central de la Federaci贸n de Rusia.  Y solo usando estos certificados se puede configurar <br>  Firma electr贸nica calificada mejorada (Cades-XLT1). <br><br>  Los centros de certificaci贸n (CA) acreditados por el Ministerio de Telecomunicaciones y Comunicaciones Masivas podr谩n emitir dichos certificados solo a individuos. <br><br>  Adem谩s, los requisitos para las AC cambiar谩n significativamente: la equidad debe aumentarse de 7 millones a 500 millones - 1 bill贸n, el monto de la responsabilidad del seguro aumenta de 30 millones a 300-500 millones de rublos, el per铆odo de acreditaci贸n se reduce de 5 a帽os a 3 a帽os. <br><br>  El proyecto de ley ya ha provocado fuertes cr铆ticas.  Las principales quejas son que los cambios conducir谩n al cierre de la gran mayor铆a de las AC comerciales, requieren gastos presupuestarios significativos para expandir y mantener las capacidades del Servicio de Impuestos Federales de California, as铆 como la concentraci贸n de todo tipo de riesgos en una sola infraestructura, que se convertir谩 en un objetivo conveniente para los ataques cibern茅ticos. <br><br>  Hay una enmienda m谩s: la obligaci贸n de firmar los documentos de la compa帽铆a no por uno sino por dos firmas calificadas mejoradas al mismo tiempo.  El jefe de la organizaci贸n tendr谩 que poner en el documento la firma de la entidad legal y una firma digital personal como individuo. <br><br>  Y aqu铆 la utilidad cryptoarmpkcs ser谩 muy, muy 煤til, porque su funcionalidad le permite colocar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">varias firmas</a> debajo del documento, as铆 como ver qui茅n y cu谩ndo firm贸 el documento: <br><br><img src="https://habrastorage.org/webt/uy/tq/yl/uytqylilmmhwhzbvpto85vljcwq.png"><br><br>  PD: para aquellos que desean obtener utilidades por primera vez, esto todav铆a se puede hacer aqu铆: <br><div class="spoiler">  <b class="spoiler_title">Distribuciones para Linux, OS X y Windows</b> <div class="spoiler_text"><ul><li>  <a href="">Linux32</a> </li><li>  <a href="">Linux64</a> </li><li>  <a href="">OS X</a> </li><li>  <a href="">WIN32</a> </li><li>  <a href="">WIN64</a> </li></ul><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/476210/">https://habr.com/ru/post/476210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../476192/index.html">Un importante tweet de extensi贸n de vida</a></li>
<li><a href="../476194/index.html">Habr Weekly # 27 / Chromebooks vs Macbooks, c贸mo escribir curr铆culums geniales, qu茅 salario pedir, puntos AR por $ 3500</a></li>
<li><a href="../476198/index.html">C贸mo cre茅 mi primer sitio web y qu茅 surgi贸</a></li>
<li><a href="../476206/index.html">Copias de seguridad incrementales de Postgresql con pgbackrest: un curso de luchador joven del desarrollador</a></li>
<li><a href="../476208/index.html">Web Almanac 2019: Disponibilidad</a></li>
<li><a href="../476212/index.html">Probado en la pr谩ctica: Veeam Backup & Replication 9.5 Actualizaci贸n 4 capacidades para trabajar con cinta magn茅tica</a></li>
<li><a href="../476214/index.html">El nacimiento de la mascota Slurm</a></li>
<li><a href="../476216/index.html">Web Resoluci贸n de problemas con r0ot-mi. Parte 2</a></li>
<li><a href="../476220/index.html">驴Qu茅 tiene de malo la validaci贸n de datos y qu茅 tiene que ver con el principio de sustituci贸n de Liskov?</a></li>
<li><a href="../476222/index.html">Introducci贸n a los sistemas de recomendaci贸n.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>