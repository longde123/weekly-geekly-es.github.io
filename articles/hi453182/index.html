<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЬНЁЯП┐ ЁЯФн ЁЯСК рдкреВрд░реА рджреБрдирд┐рдпрд╛ рдЖрдкрдХреА рдЬреЗрдм рдореЗрдВ рдпрд╛ рдПрдХ рджреЛ рджрд┐рди рдореЗрдВ рдореЛрдмрд╛рдЗрд▓ рдХрд╛рд░реНрдб рдХреИрд╕реЗ рдмрдирд╛ рд╕рдХрддреА рд╣реИ ЁЯЪв ЁЯШм ЁЯСБя╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдореЗрдВ, рдореИрдВрдиреЗ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХреА рдереА рдХрд┐ рд╡реЗрдм-рдбрд╛рдпрд▓рд░ рдХреЛ рдЬрд▓реНрджреА рд╕реЗ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдПред рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдЕрдЧрд░ рдЖрдк рдПрдХ рдЕрдзрд┐рдХ рдорд╣рддреНрд╡рд╛рдХрд╛рдВрдХреНрд╖реА рдХрд╛рд░реНрдп рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдкреВрд░реА рджреБрдирд┐рдпрд╛ рдЖрдкрдХреА рдЬреЗрдм рдореЗрдВ рдпрд╛ рдПрдХ рджреЛ рджрд┐рди рдореЗрдВ рдореЛрдмрд╛рдЗрд▓ рдХрд╛рд░реНрдб рдХреИрд╕реЗ рдмрдирд╛ рд╕рдХрддреА рд╣реИ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/2gis/blog/453182/"><img src="https://habrastorage.org/webt/a7/rk/wq/a7rkwqzwhfuc8lhtdpm1egxuwmm.jpeg"><br><p><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдореЗрдВ,</a> рдореИрдВрдиреЗ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХреА рдереА рдХрд┐ рд╡реЗрдм-рдбрд╛рдпрд▓рд░ рдХреЛ рдЬрд▓реНрджреА рд╕реЗ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдПред  рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдЕрдЧрд░ рдЖрдк рдПрдХ рдЕрдзрд┐рдХ рдорд╣рддреНрд╡рд╛рдХрд╛рдВрдХреНрд╖реА рдХрд╛рд░реНрдп рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ - рдПрдХ рдХрд╛рд░реНрдб рдХреЗ рд╕рд╛рде, рд╡рд┐рдЬреНрдЮрд╛рдкрдиреЛрдВ рдХреЗ рдмрд┐рдирд╛ рдФрд░ рд▓рд╛рдареА рдХреЗ рд╕рд╛рде рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдЖрд╡реЗрджрди рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП?  рдФрд░ рдЕрдЧрд░ рд╕рд┐рд░реНрдл рдХреБрдЫ рджрд┐рдиреЛрдВ рдореЗрдВ? </p><br><p>  рдЪрд▓реЛ рдпрд╣ рдХрд░рддреЗ рд╣реИрдВ!  рдореИрдВ рдмрд┐рд▓реНрд▓реА рдорд╛рдБрдЧрддрд╛ рд╣реВрдБред </p><a name="habracut"></a><br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдЗрдП рдЬрд╛рдиреЗрдВ рдХрд┐ рд╣рдореЗрдВ рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИред  рдЖрдЙрдЯрдкреБрдЯ рдкрд░, рд╣рдо рд╕рдВрджрд░реНрдн рдбреЗрдЯрд╛ рдФрд░ рдПрдХ рдорд╛рдирдЪрд┐рддреНрд░ рдХреЗ рд╕рд╛рде рдПрдХ рдЖрд╡реЗрджрди рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рдФрд░ рдСрдлрд╝рд▓рд╛рдЗрди рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред  рдПрдХ рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд░реВрдк рдореЗрдВ, рдореБрдЭреЗ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рд╕рд┐рд░реНрдл рдирдХреНрд╢реЗ рдореЗрдВ рджрд┐рд▓рдЪрд╕реНрдкреА рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рдВрджрд░реНрдн рдбреЗрдЯрд╛ рджрд┐рдЦрд╛рдирд╛ рдЬрд╛рдирддреЗ рд╣реИрдВред  рдФрд░ рдСрдлрд╝рд▓рд╛рдЗрди рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдПрдХ рдмрд╣реБрдд рдордЬрдмреВрдд рд╕реАрдорд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдСрдлрд╝рд▓рд╛рдЗрди рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдХрдИ рдЕрдЪреНрдЫреЗ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдирд╣реАрдВ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рд▓реЗрдЦ рдореЗрдВ рд╣рдо рдирдХреНрд╢реЗ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░реЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдЖрдЗрдП рдкрд╛рд░рд┐рдд рд╣реЛрдиреЗ рдореЗрдВ рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВред </p><br><h2 id="vybiraem-dvizhok-karty">  рдПрдХ рдорд╛рдирдЪрд┐рддреНрд░ рдЗрдВрдЬрди рдЪреБрдиреЗрдВ </h2><br><p>  рдкрд╣рд▓реА рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдЖрд╡реЗрджрди рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред  рдмрд╛рдЬрд╛рд░ рдкрд░ рдХрдИ рд╕реНрд░реЛрдд рд╣реИрдВ, рдореБрдлреНрдд рдФрд░ рдмрд╣реБрдд рдирд╣реАрдВред  рдПрдХ рд╢реБрд░реБрдЖрдд рдХреЗ рд▓рд┐рдП, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">OpenStreetMap</a> рдорд╛рдирдЪрд┐рддреНрд░ рдбреЗрдЯрд╛ рдХреЗ рдПрдХ рдЦреБрд▓реЗ рд╕реНрд░реЛрдд рдХреЗ рд░реВрдк рдореЗрдВ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдХрд╛рдлреА рдЙрдкрдпреБрдХреНрдд рд╣реИред  рд╡рд╣рд╛рдВ рдЖрдк рд╣рдорд╛рд░реА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗ рд▓рд┐рдП рдирд┐рд╢реНрдЪрд┐рдд рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">POI</a> рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдЕрдЧрд▓рд╛ рдХрджрдо рдХрд╛рд░реНрдб рдЗрдВрдЬрди рдЪреБрдирдирд╛ рд╣реИред  рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░, рдЙрдирдореЗрдВ рд╕реЗ рдмрд╣реБрдд рдХрдо рд╣реИрдВ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдХрдо рдореБрдлреНрдд рд╡рд╛рд▓реЗ рднреА рд╣реИрдВ, рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдСрдлрд╝рд▓рд╛рдЗрди рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде, рдХреЗрд╡рд▓ рдХреБрдЫ рд╣реА рд╣реИрдВред  рдореИрдВ рдПрдХ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджреЗрддрд╛ рд╣реВрдВ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">mapforge / vtm</a> ред  рдпрд╣ рдПрдХ рд╡реЗрдХреНрдЯрд░ OpenGL рдЗрдВрдЬрди рд╣реИ, рдЬреЛ рдмрд╣реБрдд рддреЗрдЬрд╝ рд╣реИ, рдСрдлрд╝рд▓рд╛рдЗрди, Android, iOS, рд╡рд┐рднрд┐рдиреНрди рдбреЗрдЯрд╛ рд╕реНрд░реЛрддреЛрдВ, рдХрд╕реНрдЯрдо рд╕реНрдЯрд╛рдЗрд▓, рдУрд╡рд░рд▓реЗ, рдорд╛рд░реНрдХрд░, 3D рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ 3D рдореЙрдбрд▓ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ!  рдмрд╣реБрдд, рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ред </p><br><p>  рддреНрд╡рд░рд┐рдд рд╢реБрд░реБрдЖрдд рдХреЗ рд▓рд┐рдП рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЗ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдЙрджрд╛рд╣рд░рдг рд╣реИрдВ, рддреИрдпрд╛рд░ рдХрд┐рдП рдЧрдП рдирдХреНрд╢реЗ рд╣реИрдВ, рдПрдХ рдкреНрд▓рдЧ-рдЗрди рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдУрдПрд╕рдПрдо рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдбреЗрдЯрд╛ рд╕реЗ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдорд╛рдирдЪрд┐рддреНрд░ рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рддреЛ, рдЪрд▓рд┐рдП рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ! </p><br><pre><code class="java hljs">MapView mapView = findViewById(R.id.map_view); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map = mapView.map(); File baseMapFile = getMapFile(<span class="hljs-string"><span class="hljs-string">"cyprus.map"</span></span>); MapFileTileSource tileSource = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MapFileTileSource(); tileSource.setMapFile(baseMapFile.getAbsolutePath()); VectorTileLayer layer = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.setBaseMap(tileSource); MapInfo info = tileSource.getMapInfo(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (info != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { MapPosition pos = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MapPosition(); pos.setByBoundingBox(info.boundingBox, Tile.SIZE * <span class="hljs-number"><span class="hljs-number">4</span></span>, Tile.SIZE * <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.setMapPosition(pos); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.setTheme(VtmThemes.DEFAULT); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.layers().add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BuildingLayer(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map, layer)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.layers().add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LabelLayer(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map, layer));</code> </pre> <br><p>  MapFileTileSource рдбреЗрдЯрд╛ рд╕реНрд░реЛрдд рдмрдирд╛рдПрдВ, рдореИрдк рдлрд╝рд╛рдЗрд▓ рдХрд╛ рд╕реНрдерд╛рди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рдЦреБрдж рдХреЛ рдЙрд╕ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕ рдХреЗ рдХреЗрдВрджреНрд░ рдореЗрдВ рд░рдЦрддреЗ рд╣реИрдВ рдЬреЛ рд╣рдореЗрдВ рд░реБрдЪрд┐рдХрд░ рдмрдирд╛рддрд╛ рд╣реИ, рддрд╛рдХрд┐ рдЖрд╡реЗрджрди рд╢реБрд░реВ рд╣реЛрдиреЗ рдкрд░ рдЪрдпрдирд┐рдд рд╕реНрдерд╛рди рдХреЗ рдмрд╛рд╣рд░ рдХрд╣реАрдВ рди рд╣реЛред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡рд┐рд╖рдп рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред  рдШрд░реЛрдВ рдХреА рдПрдХ рдкрд░рдд рдФрд░ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдХреА рдПрдХ рдкрд░рдд рдЬреЛрдбрд╝реЗрдВред  рд╡рд╣ рд╕рдм рд╣реИред  рд╣рдо рд▓реЙрдиреНрдЪ рдХрд░рддреЗ рд╣реИрдВ - рдЪрдорддреНрдХрд╛рд░! </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/id/lw/c5/idlwc5xexfimjwcgh6lvug6ncna.png" width="375" height="667"></div><br><p>  рдпрд╣ рддреЗрдЬ рдФрд░ рдЖрд╕рд╛рди рд▓рдЧрддрд╛ рд╣реИ рдФрд░ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </p><br><h2 id="delaem-geokoding">  рд╣рдо рдЬрд┐рдпреЛрдХреЛрдбрд┐рдВрдЧ рдХрд░рддреЗ рд╣реИрдВ </h2><br><p>  рдЕрдЧрд▓рд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдХрджрдо рдЬрд┐рдпреЛрдХреЛрдбрд┐рдВрдЧ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣реИред  рдХрд╛рд░реНрдб рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЕрдЪреНрдЫрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдиреНрддрд░рдХреНрд░рд┐рдпрд╛рд╢реАрд▓рддрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╣рдо рдорд╛рдирдЪрд┐рддреНрд░ рдореЗрдВ рдЯреИрдк рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдФрд░ рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рд╣рд┐рдЯ рдХреА рдЧрдИ рд╡рд╕реНрддреБ рдкрд░ рдЬрд╛рдирдХрд╛рд░реА рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рдФрд░ рдХреБрдЫ рдХрдард┐рдирд╛рдИ рд╣реИред  рд╣рдорд╛рд░реЗ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдореЗрдВ рдкреВрд░реНрдг рд░реВрдк рд╕реЗ рдЬрд┐рдпреЛрдХреЛрдбрд┐рдВрдЧ рдирд╣реАрдВ рд╣реИред  рдпрд╣ рд╢рд╛рдпрдж рдЗрд╕рдХрд╛ рд╕рдмрд╕реЗ рдмрдбрд╝рд╛ рдорд╛рдЗрдирд╕ рд╣реИред  рдпрджрд┐ рдХреБрдЫ рднреА рдЖрд╡рд┐рд╖реНрдХрд╛рд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рд╣рдо рдореМрдЬреВрджрд╛ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рд▓рд╛рдн рдЙрдард╛ рд╕рдХрддреЗ рд╣реИрдВред </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//          float touchRadius = TOUCH_RADIUS * CanvasAdapter.getScale(); long mapSize = MercatorProjection.getMapSize((byte) mMap.getMapPosition().getZoomLevel()); double pixelX = MercatorProjection.longitudeToPixelX(p.getLongitude(), mapSize); double pixelY = MercatorProjection.latitudeToPixelY(p.getLatitude(), mapSize); int tileXMin = MercatorProjection.pixelXToTileX(pixelX - touchRadius, (byte) mMap.getMapPosition().getZoomLevel()); int tileXMax = MercatorProjection.pixelXToTileX(pixelX + touchRadius, (byte) mMap.getMapPosition().getZoomLevel()); int tileYMin = MercatorProjection.pixelYToTileY(pixelY - touchRadius, (byte) mMap.getMapPosition().getZoomLevel()); int tileYMax = MercatorProjection.pixelYToTileY(pixelY + touchRadius, (byte) mMap.getMapPosition().getZoomLevel()); Tile upperLeft = new Tile(tileXMin, tileYMin, (byte) mMap.getMapPosition().getZoomLevel()); Tile lowerRight = new Tile(tileXMax, tileYMax, (byte) mMap.getMapPosition().getZoomLevel()); //   ,        MapDatabase mapDatabase = ((MapDatabase) ((OverzoomTileDataSource) tileSource.getDataSource()).getDataSource()); MapReadResult mapReadResult = mapDatabase.readLabels(upperLeft, lowerRight); StringBuilder sb = new StringBuilder(); //   POI     sb.append("*** POI ***"); for (PointOfInterest pointOfInterest : mapReadResult.pointOfInterests) { Point layerXY = new Point(); mMap.viewport().toScreenPoint(pointOfInterest.position, false, layerXY); Point tapXY = new Point(e.getX(), e.getY()); if (layerXY.distance(tapXY) &gt; touchRadius) { continue; } sb.append("\n"); List&lt;Tag&gt; tags = pointOfInterest.tags; for (Tag tag : tags) { sb.append("\n").append(tag.key).append("=").append(tag.value); } } //  ,     sb.append("\n\n").append("*** WAYS ***"); for (Way way : mapReadResult.ways) { if (way.geometryType != GeometryBuffer.GeometryType.POLY || !GeoPointUtils.contains(way.geoPoints[0], p)) { continue; } sb.append("\n"); List&lt;Tag&gt; tags = way.tags; for (Tag tag : tags) { sb.append("\n").append(tag.key).append("=").append(tag.value); } }</span></span></code> </pre> <br><p>  рдпрд╣ рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рдХреНрд░рд┐рдпрд╛рддреНрдордХ рдирд┐рдХрд▓рд╛ред  рдЖрдкрдХреЛ рдПрдХ рдЯрд╛рдЗрд▓ рдЦреЛрдЬрдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рд╣реИ, рддрд░реАрдХреЗ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ (рдУрдПрд╕рдПрдо рд╢рдмреНрджрд╛рд╡рд▓реА рдореЗрдВ, рдпрд╣ рдПрдХ рд░реИрдЦрд┐рдХ рд╡рд╕реНрддреБ рд╣реИ), рдФрд░ рдЖрдк рдЙрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рдирд┐рдХрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВред  рддрд░реАрдХреЛрдВ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдкреАрдУрдЖрдИ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдм рдХреБрдЫ рд╣реИред  рдЖрдкрдХреЛ рдмрд╛рдХреА рд╕рд╛рд░реЗ рддрд░реНрдХ рдЦреБрдж рд╣реА рд╣рд╡рд╛ рджреЗрдиреЗ рд╣реЛрдВрдЧреЗ: рдХреНрд▓рд┐рдХ рд╣рд┐рдЯ, рдлрд╝рд┐рд▓реНрдЯрд░ рдХреЛ рдЬрд╝реВрдо рд╕реНрддрд░ рд╕реЗ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдкреВрд░реЗ рд╕реЗрдЯ рд╕реЗ "рд╕рд╣реА" рдЪреБрдиреЗрдВред  рдФрд░ рдПрдХ рдмрд╛рддред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╣рдо рдореВрд▓ рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдЦреЛ рджреЗрддреЗ рд╣реИрдВ рдФрд░ рдЦреЛрдЬ рдХреЗ рдЬрд╡рд╛рдм рдореЗрдВ рд▓рд╛рдЗрдиреЛрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред  рдпрджрд┐ рдЖрдк рднреА рднреВ-рд╕рдВрдкрд╛рджрдХ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрдЧрд╛ред </p><br><p>  рд▓реЗрдХрд┐рди рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╕рдм рдХреБрдЫ рд╣рдорд╛рд░реЗ рдЕрдиреБрд░реВрдк рд╣реИред </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p9/9t/m_/p99tm_xdj7tdnnjewpzovvsmqjm.png" width="375" height="667"></div><br><p><br></p><br><h2 id="prodvinutyy-geokoding">  рдЙрдиреНрдирдд рдЬрд┐рдпреЛрдХреЛрдбрд┐рдВрдЧ </h2><br><p>  рд╕рд╛рдорд╛рдиреНрдпрддрдпрд╛, рдПрдХ рдЕрдзрд┐рдХ рдЙрдиреНрдирдд рд╡рд┐рдХрд▓реНрдк рд╣реИред  рдЗрд╕рдХреЗ рд▓рд┐рдП рд╣рдореЗрдВ рдЕрдкрдирд╛ рдЖрдзрд╛рд░ рдЪрд╛рд╣рд┐рдПред  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рдЖрдк SQLite рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╕рдЪ рд╣реИ, рдорд╛рдирдХ SQLite рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрдЧрд╛, рдФрд░ рд╣рдореЗрдВ рднреВ-рдЦреЛрдЬ рдХреЗ рд▓рд┐рдП RTree рдкреНрд▓рдЧрдЗрди рдХреЛ рдЬреЛрдбрд╝рдХрд░ рдЕрдкрдирд╛ рд╕реНрд╡рдпрдВ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдпрд╣ рдХреИрд╕реЗ рдХрд░рдирд╛ рд╣реИ, рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рд╣реА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓реЗрдЦ</a> рдореЗрдВ рдХрд╣рд╛ рдерд╛, рдЕрдиреБрднрд╛рдЧ "рдПрдХ рдЕрдЪреНрдЫреА рдЦреЛрдЬ рдХрд░реЗрдВред" <br>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдореЗрдВ рдбреЗрдЯрд╛ рдкрд░ рдкреВрд░реНрдг рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ, рд╣рдо рд╡рд╣ рд╕рдм рдХреБрдЫ рдмрдЪрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдФрд░ рд╕рд╣реА рдкреНрд░рд╛рд░реВрдк рдореЗрдВред  рд╣рдо рдлреБрд▓ рдЯреЗрдХреНрд╕реНрдЯ рд╕рд░реНрдЪ рдХреЛ рдлрд╛рд╕реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЕрдкрдиреА рдЬрд┐рдпреЛ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдФрд░ рдХрдВрдкрдирд┐рдпреЛрдВ рдХреЗ рдирд╛рдо, рдкрддреЗ рдФрд░ рдЕрдиреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЦреЛрдЬ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рджрд┐рд╢рд╛ рд╣реИ: </p><br><ol><li>  рд╣рдо рдЯреЗрдмрд▓ рдмрдирд╛рддреЗ рд╣реИрдВ: <br><ul><li>  рднреВ рд╡рд╕реНрддреБрдУрдВ (рдЖрдИрдбреА, рдкреНрд░рдХрд╛рд░, рдЬреНрдпрд╛рдорд┐рддрд┐, рдЧреБрдг) </li><li>  рдЬрд┐рд╕ рднрд╡рди рдореЗрдВ рдпрд╣ рд╕реНрдерд┐рдд рд╣реИ, рдЙрд╕рдХреА рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдлрд░реНрдо (рдЖрдИрдбреА, рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ, рдЬрд┐рдпреЛ_рдЖрдИрдбреА) </li><li>  rtree <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">geoindex</a> рдЗрд╕ рддрд░рд╣: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">VIRTUAL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> geo_index <span class="hljs-keyword"><span class="hljs-keyword">USING</span></span> rtree( <span class="hljs-keyword"><span class="hljs-keyword">id</span></span>, <span class="hljs-comment"><span class="hljs-comment">-- Integer primary key minX, maxX, -- Minimum and maximum X coordinate minY, maxY -- Minimum and maximum Y coordinate );</span></span></code> </pre> </li></ul></li><li>  рд╣рдо рд╕рдм рдХреБрдЫ рдбреЗрдЯрд╛ рд╕реЗ рднрд░рддреЗ рд╣реИрдВред </li><li>  рдЬрдм рдЖрдк рдорд╛рдирдЪрд┐рддреНрд░ рдореЗрдВ рдЯреИрдк рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ рдЬрд┐рдпреЛрдкреНрд╡рд╛рдЗрдВрдЯ рдорд┐рд▓рддрд╛ рд╣реИ рдФрд░ рдЕрдиреБрд░реЛрдз рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрддрд╛ рд╣реИ: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> geo_index <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> minX&gt;=<span class="hljs-number"><span class="hljs-number">-81.08</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> maxX&lt;=<span class="hljs-number"><span class="hljs-number">-80.58</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> minY&gt;=<span class="hljs-number"><span class="hljs-number">35.00</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> maxY&lt;=<span class="hljs-number"><span class="hljs-number">35.44</span></span></code> </pre> </li><li>  рдЕрдВрддрд┐рдо рдЪрд░рдг: рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░реЗрдВ рдФрд░ рдЙрдЪрд┐рдд рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВред </li></ol><br><p>  рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╡рд┐рдХрд▓реНрдкреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ <a href="">рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА</a> рдореЗрдВ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ <a href="">рд╣реИ</a> ред </p><br><p>  рдирддреАрдЬрддрди, рд╣рдо рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдирдХреНрд╢реЗ рдХреЛ рдХреИрд╕реЗ рджрд┐рдЦрд╛рдирд╛ рд╣реИ рдФрд░ рдХреНрд▓рд┐рдХ рдХреЛ рдХреИрд╕реЗ рд╕рдВрднрд╛рд▓рдирд╛ рд╣реИред  рдмреБрд░рд╛ рдирд╣реАрдВ рд╣реИред </p><br><h2 id="dobavlyaem-vazhnye-melochi">  рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЫреЛрдЯреА рдЪреАрдЬреЗрдВ рдЬреЛрдбрд╝реЗрдВред </h2><br><p>  рдЖрдЗрдП рдХреБрдЫ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред </p><br><p>  рдЪрд▓рд┐рдП рд╡рд░реНрддрдорд╛рди рд╕реНрдерд╛рди рд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред  Mapforge / vtm рдореЗрдВ рдЗрд╕рдХреЗ рд▓рд┐рдП рдмрд╕ рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╣реИред  рд╕реНрдерд╛рди рдкрд░рддред  рдЙрдкрдпреЛрдЧ рдЕрддреНрдпрдВрдд рд╕рд░рд▓ рд╣реИред </p><br><pre> <code class="java hljs">LocationLayer locationLayer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LocationLayer(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map); locationLayer.setEnabled(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-comment"><span class="hljs-comment">//       , ,     GPS GeoPoint initialGeoPoint = this.map.getMapPosition().getGeoPoint(); locationLayer.setPosition(initialGeoPoint.getLatitude(), initialGeoPoint.getLongitude(), 1); this.map.layers().add(locationLayer);</span></span></code> </pre> <br><p>  рдХреЗрд╡рд▓ рдПрдХ рдЦрд╛рдореА рд╣реИ - рдпрд╣ рд╕реНрдХреНрд░реАрди рдХреА рд╕реАрдорд╛ рдкрд░ "рдмреНрд▓реВ рдбреЙрдЯ" рдХрд╛ рдирд┐рд░рдВрддрд░ рддрд░рдВрдЧ рд╣реИ рдЬрдм рд╡рд░реНрддрдорд╛рди рд╕реНрдерд╛рди рдорд╛рдирдЪрд┐рддреНрд░ рдХреЗ рдмрд╛рд╣рд░ рд╣реЛрддрд╛ рд╣реИред  рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ, рдЙрдкрдпреЛрдЧ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рдЖрдк рд╢рд╛рдпрдж рд╣реА рдХрднреА рдРрд╕реА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЦреБрдж рдХреЛ рдкрд╛рдПрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдпрд╣ рд▓рдЧрд╛рддрд╛рд░ рдкреБрди: рдкреНрд░рддрд┐рдкрд╛рджрди рдХрд╛ рдХрд╛рд░рдг рдмрдирддрд╛ рд╣реИ, рддрджрдиреБрд╕рд╛рд░, рдпрд╣ рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЛ рдереЛрдбрд╝рд╛ рд▓реЛрдб рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдереЛрдбрд╝рд╛ рдФрд░ рдореБрд╢реНрдХрд┐рд▓ рд╣реИ, рдЖрдкрдХреЛ рдЫрд╛рдпрд╛ рдореЗрдВ рдЖрдиреЗ рдФрд░ рдЗрд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреВрд░реНрдгрддрд╛рд╡рд╛рджрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╣реИред  рдХреИрд╕реЗ рдХрд░реЗрдВ - рдЖрдк <a href="">рдпрд╣рд╛рдВ</a> рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рддреЛ, рд╕реНрдерд┐рддрд┐ рдпрд╣ рд╣реИ  рдиреЗрд╡рд┐рдЧреЗрд╢рди рдмрдЯрди рдХреЛ рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХрд╛ рд╕рдордп рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рд╕рднреА рд╕реНрд╡рд╛рднрд┐рдорд╛рдиреА рдореИрдкрд┐рдВрдЧ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдореЗрдВ рд╣реИред </p><br><pre> <code class="java hljs">View vLocation = findViewById(R.id.am_location); vLocation.setOnClickListener(v -&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.animator().animateTo(initialGeoPoint));</code> </pre> <br><p>  рд╣рдореЗрдВ рдЬрд╝реВрдо рдмрдЯрди рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><pre> <code class="javascript hljs">View vZoomIn = findViewById(R.id.am_zoom_in); vZoomIn.setOnClickListener(v -&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.animator().animateZoom(<span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)); View vZoomOut = findViewById(R.id.am_zoom_out); vZoomOut.setOnClickListener(v -&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.animator().animateZoom(<span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>));</code> </pre><br><p>  рдФрд░ рдХреЗрдХ рдкрд░ рдЪреЗрд░реА рдПрдХ рдХрдореНрдкрд╛рд╕ рд╣реИред </p><br><pre> <code class="javascript hljs">View vCompass = findViewById(R.id.am_compass); vCompass.setVisibility(View.GONE); vCompass.setOnClickListener(v -&gt; { MapPosition mapPosition = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.getMapPosition(); mapPosition.setBearing(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.animator().animateTo(<span class="hljs-number"><span class="hljs-number">500</span></span>, mapPosition); vCompass.animate().setListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animator.AnimatorListener() { @Override public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> onAnimationStart(Animator animation) { } @Override public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> onAnimationEnd(Animator animation) { vCompass.setVisibility(View.GONE); } @Override public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> onAnimationCancel(Animator animation) { } @Override public <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> onAnimationRepeat(Animator animation) { } }).setDuration(<span class="hljs-number"><span class="hljs-number">500</span></span>).rotation(<span class="hljs-number"><span class="hljs-number">0</span></span>).start(); }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map.events.bind((e, mapPosition) -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e == <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>.ROTATE_EVENT) { vCompass.setRotation(mapPosition.getBearing()); vCompass.setVisibility(View.VISIBLE); } });</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lw/hp/cq/lwhpcqipt5bo-nirjiiz676gpo8.png" width="375" height="667"></div><br><p><br></p><br><h2 id="zahvatyvaem-mir">  рджреБрдирд┐рдпрд╛ рдкрд░ рдХрдмреНрдЬрд╛ </h2><br><p>  рджреЛрд╕реНрддреЛрдВ, рд╣рдо рдлрд┐рдирд┐рд╢ рд▓рд╛рдЗрди рдкрд░ рд╣реИрдВред  рдпрд╣ рдЕрдВрддрд┐рдо рд╕реНрдкрд░реНрд╢ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдиреА рд╣реБрдИ рд╣реИред  рд╣рдо рджреБрдирд┐рдпрд╛ рдкрд░ рдХрдмреНрдЬрд╛ рдХрд░рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛ рд░рд╣реЗ рд╣реИрдВ, рдЬрд┐рд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╣рдореЗрдВ рдХрд┐рд╕реА рддрд░рд╣ рд╕реЗ рдЗрд╕реЗ рдЕрдкрдиреЗ рдЖрд╡реЗрджрди рдореЗрдВ рд╕рдореЗрдЯрдирд╛ рд╣реЛрдЧрд╛ред </p><br><p>  рдФрд░ рдЪреАрдЬреЗрдВ рдРрд╕реА рд╣реИрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рдЗрдВрдЬрди рдХреЗ рд╕рд╛рде рдпрд╣ рдЬрд┐рддрдирд╛ рд▓рдЧрддрд╛ рд╣реИ рдЙрд╕рд╕реЗ рдХрд╣реАрдВ рдЬреНрдпрд╛рджрд╛ рдЖрд╕рд╛рди рд╣реИред <br>  рд╣рдореЗрдВ рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ MultyMapTileSource рдЬреЛрдбрд╝рдХрд░ рдорд╛рдирдЪрд┐рддреНрд░ рд▓реЛрдб рдХрд░рдиреЗ рдХреА рд╡рд┐рдзрд┐ рдХреЛ рдереЛрдбрд╝рд╛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдпрд╣ рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ рдХрд┐рд╕реА рднреА рдЕрдиреНрдп рдЯрд╛рдЗрд▓ рд╕реНрд░реЛрддреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрд╡рд░рдг рд╣реИ, рдЬреЛ рдЖрдкрдХреЛ рдорд╛рдирдЪрд┐рддреНрд░ рдкрд░ рдПрдХ рдмрд╛рд░ рдореЗрдВ рдЬреЛрдбрд╝реЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА рдЪреАрдЬреЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдмрд╕ рдПрдХ рд╣рддреНрдпрд╛рд░рд╛ рд╕реБрд╡рд┐рдзрд╛ред  рдирддреАрдЬрддрди, рдпрд╣ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдиреНрдпреВрдирддрдо рд╡рд┐рд╕реНрддрд╛рд░ рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд┐рд╢реНрд╡ рдорд╛рдирдЪрд┐рддреНрд░ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдирд╛ рд╣реБрдЖ рд╣реИ, рдЗрд╕реЗ рдкрд╣рд▓реЗ рд╣рдорд╛рд░реЗ рдЖрд╡рд░рдг рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ, рдФрд░ рдмрд╛рдХреА рдХреЛ рд╢реАрд░реНрд╖ рдкрд░ рдЦреАрдВрдЪреЗрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рддреБрд░рдВрдд рдЙрди рд╕рднреА рдХрд╛рд░реНрдбреЛрдВ рдХреЛ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рдирдХреНрд╢реЗ рдХреЗ рд╕рд╛рде рдХреИрдЯрд▓реЙрдЧ рдореЗрдВ рд╣реИрдВ!  рднрд╡реНрдп, рд╕рд┐рд░реНрдл рднрд╡реНрдпред  рдФрд░ рдпрд╣ рдордд рднреВрд▓реЛ рдХрд┐ рдпрд╣ рдСрдлрд╝рд▓рд╛рдЗрди рд╣реИ :) </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  - MultiMapFileTileSource mmtilesource = new MultiMapFileTileSource(); File baseMapFile = getMapFile("cyprus.map"); MapFileTileSource tileSource = new MapFileTileSource(); tileSource.setMapFile(baseMapFile.getAbsolutePath()); mmtilesource.add(tileSource); //     MultiMapFileTileSource MapFileTileSource worldTileSource = new MapFileTileSource(); File worldMapFile = getMapFile("world.map"); worldTileSource.setMapFile(worldMapFile.getAbsolutePath()); mmtilesource.add(worldTileSource); //      - VectorTileLayer layer = this.map.setBaseMap(mmtilesource);</span></span></code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/9pdshe1mg7Q" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  рд╢рд╛рдпрдж рд╣рдо рд░рд┐рд▓реАрдЬ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВред  рд╣рдо рдмрд┐рд▓реНрдб рдЗрдХрдЯреНрдард╛ рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕реЗ рдмрд╛рдЬрд╛рд░ рдореЗрдВ рдбрд╛рд▓рддреЗ рд╣реИрдВ рдФрд░ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдпреЛрдЧреНрдп рд╕рд┐рддрд╛рд░реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ :) </p><br><h2 id="para-lozhek-dyogtya-v-ogromnoy-bochke-myoda">  рд╢рд╣рдж рдХреЗ рдПрдХ рд╡рд┐рд╢рд╛рд▓ рдмреИрд░рд▓ рдореЗрдВ рдЯрд╛рд░ рдХреЗ рдЪрдореНрдордЪ рдХреЗ рдПрдХ рдЬреЛрдбрд╝реЗ </h2><br><p>  рдУрдкрди рд╕реЛрд░реНрд╕ рдЗрдВрдЬрди рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛ рд░рд╣рд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЙрдирдХреА рдЯреАрдо, рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ, рдмрд▓реНрдХрд┐ рдорд╛рдореВрд▓реА рд╣реИред  рджреНрд╡рд╛рд░рд╛ рдФрд░ рдмрдбрд╝реЗ, рдпрд╣ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">devemux86</a> рдирд╛рдо рд╕реЗ рдПрдХ рд╡реНрдпрдХреНрддрд┐ рд╣реИред  рдФрд░ рд╕рдордп-рд╕рдордп рдкрд░ рдХреБрдЫ рдФрд░ рд▓реЛрдЧред </p><br><p>  рдХрднреА-рдХрднреА рд░реЗрдВрдбрд░рд┐рдВрдЧ рдореЗрдВ рдХрд▓рд╛рдХреГрддрд┐рдпрд╛рдВ рд╣реЛрддреА рд╣реИрдВ, рдХреБрдЫ рдирд┐рдорд┐рд╖ рдФрд░ рдЪрд┐рдХреЛрдЯреАред  рд▓реЗрдХрд┐рди рдореБрдЭреЗ рдХрднреА рднреА рдХреЛрдИ рдЧрдВрднреАрд░ рд╕рдорд╕реНрдпрд╛ рдФрд░ рд╕рднреА рдЕрдзрд┐рдХ рджреБрд░реНрдШрдЯрдирд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдирд╣реАрдВ рдХрд░рдирд╛ рдкрдбрд╝рд╛, рдЬреЛ рдЖрдирдиреНрджрд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред </p><br><p>  рд╡рд╣рд╛рдБ рдПрдХ рдФрд░ рдЕрддрд┐ рд╕реВрдХреНрд╖реНрдо рдЕрдВрддрд░ рд╣реИ рдЬреЛ рд╕реБрдЦрдж рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рдлрд╝рд┐рд▓рд▓реЗрдЯреНрд╕ рдФрд░ рд╕рд░реНрдХрд▓ рдХрд╛ рдПрдХ рдбреНрд░рд╛рдЗрдВрдЧ рд╣реИред  рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ рдореЗрдВ рдпрд╣ рдХреИрд╕реЗ рджрд┐рдЦрддрд╛ рд╣реИ, рдЗрд╕рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qc/37/lo/qc37lomxbxd2ln7r_2zngp6repo.png" width="375" height="667"></div><br><p><br></p><br><p>  рдпрджрд┐ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЬреНрдпрд╛рдорд┐рддрд┐ рдореЗрдВ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдмрд┐рдВрджреБ рд╣реИрдВ (рдЧреЛрд▓рд╛рдИ рдЪрд┐рдХрдиреА рд╣реИ), рддреЛ рдорд╛рдирдЪрд┐рддреНрд░ рдкрд░ рдЖрдк рдХрдИ рдЫреЛрдЯреЗ рдЙрднрд╛рд░реЛрдВ рдФрд░ рдЕрд╡рдзрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ "рдХреЛрдгреАрдп" рд╕рд░реНрдХрд▓ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред  рдЬрд╛рд╣рд┐рд░ рд╣реИ, рдпрд╣ рдкреНрд░рджрд░реНрд╢рди рдФрд░ рдорд╛рдирдЪрд┐рддреНрд░-рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЖрдХрд╛рд░ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рдирд╣реАрдВ рд▓рдЧрддрд╛ рд╣реИред </p><br><p>  рдЖрдЬ рдХреЗ рд▓рд┐рдП рд╢рд╛рдпрдж рдпрд╣реА рд╕рдмрдХреБрдЫ рд╣реИред  рдЖрдк рддрдп рдХрд░реЗрдВ рдХрд┐ рдЖрдк рдЙрдирдХреЗ рд╕рд╛рде рд░рд╣ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдирд╣реАрдВред  рдЗрд╕ рдмреАрдЪ, рд╣рдо 1.5 рд╕реЗ рдЕрдзрд┐рдХ рд╡рд░реНрд╖реЛрдВ рд╕реЗ рдЗрд╕ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЙрдбрд╝рд╛рди рдЙрддреНрдХреГрд╖реНрдЯ рд╣реИ, рдХрдо рд╕реЗ рдХрдо рдПрдВрдбреНрд░реЙрдЗрдб рдкрд░ред </p><br><h2 id="itogi">  рдкрд░рд┐рдгрд╛рдо </h2><br><p>  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рдореИрдВрдиреЗ рджрд┐рдЦрд╛рдпрд╛ рд╣реИ рдХрд┐ рдЗрд╕ рддрд░рд╣ рдХреА рдЧреИрд░-рддреБрдЪреНрдЫ рд╕рдорд╕реНрдпрд╛ рднреА рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рдЬрд▓реНрджреА рд╣рд▓ рд╣реЛ рд╕рдХрддреА рд╣реИред  рдЖрдкрдХреЛ рдПрдХ рддреИрдпрд╛рд░ рдХрдВрдХрд╛рд▓ рдорд┐рд▓рд╛, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдЖрдк рдХрд┐рд╕реА рднреА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рдиреНрдпреВрдирддрдо рд╕рдордп рдореЗрдВ рдСрдлрд╝рд▓рд╛рдЗрди рдорд╛рдирдЪрд┐рддреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рд╢рд╛рдорд┐рд▓ рд╣реИред </p><br><p>  рдпрджрд┐ рд░реБрдЪрд┐ рд╣реИ, рддреЛ рдЕрдЧрд▓реЗ рд▓реЗрдЦ рдореЗрдВ рдореИрдВ рджрд┐рдЦрд╛рдКрдВрдЧрд╛ рдХрд┐ рдХреИрд╕реЗ рдлрд░реНрд╢ рдХреЛ рд▓рд╛ 2 рдЬреАрдЖрдИрдПрд╕ рдмрдирд╛рдпрд╛ рдЬрд╛рдПред  рдФрд░ рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд▓рдЧрддрд╛ рд╣реИ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИ :) </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi453182/">https://habr.com/ru/post/hi453182/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi453168/index.html">рдЕрдиреБрд╕рдВрдзрд╛рди: рдЧреЗрдо рдереНрдпреЛрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдПрдХ рдЕрд╡рд░реБрджреНрдз рдкреНрд░реЙрдХреНрд╕реА рд╕реЗрд╡рд╛ рдмрдирд╛рдирд╛</a></li>
<li><a href="../hi453170/index.html">рдмреБрджреНрдзрд┐рд╢реАрд▓рддрд╛: рдПрдХ рдЕрд▓рдЧ рдХреЛрдг рд╕реЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдХреИрд╕реЗ рджреЗрдЦреЗрдВ</a></li>
<li><a href="../hi453174/index.html">рдирдП рдпрд╛рдВрдбреЗрдХреНрд╕ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдиреЗ рдХреЗ рдЖрда рдХрд╛рд░рдгред рдХреИрд╢рд┐рдпрд░ рдПрдкреАрдЖрдИ</a></li>
<li><a href="../hi453178/index.html">рдбреЗрд╡рд▓рдкрд░ рдХрд╛ рдореБрдЦреНрдп рдХреМрд╢рд▓ рдЬреЛ рдЖрдкрдХреЗ рдХреЛрдб рдХреЛ рдмреЗрд╣рддрд░ рдмрдирд╛ рджреЗрдЧрд╛</a></li>
<li><a href="../hi453180/index.html">рд╡рд┐рддрд░рд┐рдд рдкреЗрдкрд░рд▓реЗрд╕ рддреНрд░реИрдорд╛рд╕рд┐рдХ рдпреЛрдЬрдирд╛ рдХрд╛ рд╕рдВрдЪрд╛рд▓рди рдХреИрд╕реЗ рдХрд░реЗрдВ рдФрд░ рдЗрд╕реЗ рдЦрд░рд╛рдм рди рдХрд░реЗрдВ?</a></li>
<li><a href="../hi453188/index.html">рдЧреИрд░-рдЖрдИрдЯреА рдкреНрд░рдмрдВрдзрдХреЛрдВ рдХреЛ рджреЛрд╖-рд╕рд╣рд┐рд╖реНрдгреБ рдЖрдИрдЯреА рдЕрд╡рд╕рдВрд░рдЪрдирд╛ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреА рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХреИрд╕реЗ рдХрд░реЗрдВ</a></li>
<li><a href="../hi453190/index.html">RoR рдФрд░ рд░рд┐рдПрдХреНрдЯрд┐рд╡ рдиреЗрдЯрд┐рд╡ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ ANPR</a></li>
<li><a href="../hi453192/index.html">рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди рдФрд░ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХрддрд╛</a></li>
<li><a href="../hi453194/index.html">рд╣рдо PHDays 9 рдХреЗ рд╕рд╛рде рд╕рд░реНрд╡рд╢реНрд░реЗрд╖реНрда рд░рд┐рд╡рд░реНрд╕рд▓ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рдорд╛рдзрд╛рди рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi453196/index.html">рдлреЙрд░реЗрд╕реНрдЯрд░ рд░рд┐рд╕рд░реНрдЪ: рдЯреЗрди рдЯреЙрдк рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХрдореНрдкреЛрдЬрд╝рд┐рд╢рди рдПрдирд╛рд▓рд┐рд╕рд┐рд╕ рд╡реЗрдВрдбрд░реНрд╕ рдХреА рддреБрд▓рдирд╛</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>