<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ” ğŸ‘©ğŸ½â€ğŸ’» ğŸƒ ç”¨1009å­—èŠ‚çš„JavaScripté€‚åº”WebGLä¸Šçš„ç¹æ˜Ÿç‚¹ç‚¹çš„å¤©ç©º ğŸ–¼ï¸ ğŸ¤¢ â•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä¸¤ä»¶äº‹æ€»æ˜¯è®©çµé­‚å……æ»¡æ–°çš„ï¼Œè¶Šæ¥è¶Šå¼ºçƒˆçš„æƒŠå–œå’Œå´‡æ•¬ï¼Œæˆ‘ä»¬å¯¹å®ƒä»¬çš„æ€è€ƒè¶Šæ¥è¶Šé¢‘ç¹å’Œæ¼«é•¿-è¿™æ˜¯æˆ‘å¤´é¡¶çš„æ˜Ÿç©ºå’Œæˆ‘çš„é“å¾·å¾‹ã€‚ ä¼Šæ›¼çº½å°”Â·åº·å¾· 

 JS1kæ˜¯ä¸€é¡¹å¹´åº¦ç«èµ›ï¼Œæ‚¨éœ€è¦åœ¨JavaScriptä¸­ä»¥1024ä¸ªå­—ç¬¦å®¹çº³æ¼”ç¤ºï¼Œæ¸¸æˆæˆ–ä»»ä½•å…¶ä»–å†…å®¹ã€‚ ä»Šå¹´ï¼Œæˆ‘çš„æ¼”ç¤ºååˆ—ç¬¬å››ï¼ˆç›´åˆ°ç¬¬ä¸‰åå¾—åˆ†ä¸è¶³ä¸¤åˆ†ï¼‰ã€‚ æ‚¨å¯ä»¥åœ¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ç”¨1009å­—èŠ‚çš„JavaScripté€‚åº”WebGLä¸Šçš„ç¹æ˜Ÿç‚¹ç‚¹çš„å¤©ç©º</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462115/"><blockquote> ä¸¤ä»¶äº‹æ€»æ˜¯è®©çµé­‚å……æ»¡æ–°çš„ï¼Œè¶Šæ¥è¶Šå¼ºçƒˆçš„æƒŠå–œå’Œå´‡æ•¬ï¼Œæˆ‘ä»¬å¯¹å®ƒä»¬çš„æ€è€ƒè¶Šæ¥è¶Šé¢‘ç¹å’Œæ¼«é•¿-è¿™æ˜¯æˆ‘å¤´é¡¶çš„æ˜Ÿç©ºå’Œæˆ‘çš„é“å¾·å¾‹ã€‚  <em>ä¼Šæ›¼çº½å°”Â·åº·å¾·</em> </blockquote><p>  JS1kæ˜¯ä¸€é¡¹å¹´åº¦ç«èµ›ï¼Œæ‚¨éœ€è¦åœ¨JavaScriptä¸­ä»¥1024ä¸ªå­—ç¬¦å®¹çº³æ¼”ç¤ºï¼Œæ¸¸æˆæˆ–ä»»ä½•å…¶ä»–å†…å®¹ã€‚ ä»Šå¹´ï¼Œæˆ‘çš„æ¼”ç¤ºååˆ—ç¬¬å››ï¼ˆç›´åˆ°ç¬¬ä¸‰åå¾—åˆ†ä¸è¶³ä¸¤åˆ†ï¼‰ã€‚ æ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨JS1kç½‘ç«™</a>ä¸Šè§‚çœ‹æ¼”ç¤ºã€‚ è°ä¸å¼€æ”¾æˆ–ä¸å·¥ä½œï¼Œåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/jsUlPMq-GVI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p> å®Œæ•´è€Œå®Œæ•´çš„æºä»£ç <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½äºgithubä¸Š</a> ã€‚ é‡ç‚¹æ˜¯åˆ†æå¦‚ä½•åœ¨æ­¤ç±»ç«èµ›ä¸­æœ€å°åŒ–JavaScriptã€‚ </p><a name="habracut"></a><br><h2 id="diskalaymer"> å…è´£å£°æ˜ </h2><br><p>è¯¥æ¼”ç¤ºçš„ä¸»è¦ä¼˜ç‚¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ˜¯</a> Pablo Roman Andrioliåˆ¶ä½œçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç‰‡æ®µç€è‰²å™¨</a> ã€‚  Pabloæ˜¯ä¸€ä½ä»äº‹åˆ†å½¢å·¥ä½œçš„è‰ºæœ¯å®¶ï¼Œåœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">fractalforums</a>è®ºå›ä¸Šï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»–</a>æä¾›äº†ä¸€äº›è®¡ç®—ç»†èŠ‚ã€‚ æˆ‘çš„ä»»åŠ¡æ˜¯æ‰“åŒ…ä¸€ä¸ª1024å­—èŠ‚çš„ç€è‰²å™¨å’ŒWebGLä»£ç ã€‚ </p><br><h2 id="inicializaciya-webgl">  WebGLåˆå§‹åŒ– </h2><br><p> æ¼”ç¤ºå¼€å§‹æ—¶çš„JS1kåŒ…è£…å™¨åœ¨å…¨å±€å˜é‡<strong>gä¸­</strong>æä¾›äº†WebGLä¸Šä¸‹æ–‡ã€‚ å°½ç®¡å¦‚æ­¤ï¼Œä½¿ç”¨WebGLè¿˜æ˜¯å¾ˆå†—é•¿çš„ã€‚ ä¾‹å¦‚ï¼Œè¦å°†é¡¶ç‚¹ç€è‰²å™¨æ·»åŠ åˆ°ç¨‹åºä¸­ï¼Œéœ€è¦159ä¸ªå­—ç¬¦ï¼š </p><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Define a new program p=g.createProgram(); // Basic vertex shader s=g.createShader(VERTEX_SHADER); g.shaderSource(s,"attribute vec2 p;void main(){gl_Position=vec4(p,0,1);}"); // Compile and attach it to the program g.compileShader(s); g.attachShader(p,s);</span></span></code> </pre> <br><p> ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€è¿‘å‡ å¹´çš„æ‰€æœ‰JS1kè§£å†³æ–¹æ¡ˆéƒ½ä½¿ç”¨äº†å¸¦æœ‰å‡½æ•°åŒä¹‰è¯çš„æŠ€å·§ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> g){ g[i[<span class="hljs-number"><span class="hljs-number">0</span></span>] + i[<span class="hljs-number"><span class="hljs-number">6</span></span>]] = g[i]; }</code> </pre> <br><p> å¾ªç¯ä¸ºWebGLä¸Šä¸‹æ–‡çš„æ¯ä¸ªåŠŸèƒ½ï¼ˆä»¥åŠä»»ä½•æˆå‘˜ï¼‰æ·»åŠ äº†åŒä¹‰è¯ï¼Œè¯¥åŒä¹‰è¯ç”±é¦–å­—æ¯å’Œ7ä¸ªå­—æ¯ç»„æˆã€‚ ä¾‹å¦‚ï¼Œåˆ›å»ºé¡¹ç›®å°†å˜æˆ<strong>cP</strong> ï¼Œæ›´é«˜çº§çš„æºä»£ç ç­‰ã€‚ å¦å¤–ï¼Œ <code>with(g)</code>æ„é€ ï¼ˆåœ¨è¿™äº›é¡¹ç›®ä¸­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸èƒ½</a>ä½¿ç”¨<code>with(g)</code>æ„é€ æ‰€æœ‰ä»£ç ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span>(g){ p=cP(); sS(s=cS(<span class="hljs-number"><span class="hljs-number">35633</span></span>),<span class="hljs-string"><span class="hljs-string">'attribute vec2 p;void main(){gl_Position=vec4(p,1,1);}'</span></span>); ce(s); aS(p,s); }</code> </pre> <br><h2 id="minifikaciya-sheydera"> ç€è‰²å™¨ç¼©å° </h2><br><p> åŸå§‹ç€è‰²å™¨éœ€è¦1100ä¸ªå­—ç¬¦ã€‚ ä¸»è¦ç¼©å†™ï¼šåˆ é™¤ä¸å¿…è¦çš„å˜é‡ï¼Œå¹¶ç»„åˆç›¸ä¼¼çš„ç‰‡æ®µã€‚ æ¯•ç«Ÿï¼Œæˆ‘æ˜¯é€šè¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨çº¿minifier</a>ä¼ é€’ä»£ç çš„ã€‚ ç»“æœï¼Œç€è‰²å™¨ä»…å‰©500å¤šä¸ªå­—èŠ‚ã€‚ </p><br><h2 id="jscrush">  JSCrush </h2><br><p>  JSCrushæ˜¯åœ¨æ­¤ç±»æ¯”èµ›ä¸­å‹ç¼©ä»£ç çš„äº‹å®æ ‡å‡†ã€‚ è¯¥å®ç”¨ç¨‹åºå°†ä»£ç è½¬æ¢ä¸ºå¤§çº¦ä»¥ä¸‹é¡ºåºï¼š </p><br><div class="spoiler">  <b class="spoiler_title">_ ='ï¼ˆi a.style = ...</b> <div class="spoiler_text"><pre> <code class="javascript hljs">_=<span class="hljs-string"><span class="hljs-string">'(i a.style="widMj%;hEjvh;:left",g)g[i[0]+i[6]]=g[i];wiMO.u=g.G1f,x=y=k=g)p=cP(35633"tribute 2 p gl_Posit=4?FN"precis mediump ;G Zt,a,x,y Uf`ord.rg/64!-.f.=a;Zc=+xz,v=+yz;m2 m$cc-cc)s$vv-vv)fJf#Ur`Q,,r+`t*2.,t,-2.rJr#Zg=.1,b=Q;Ui`!Kl=Rl&lt;2Rl++){Uo=r+f*;oQ)-mod(o,2.))Ze,n=e=!;Kd=Rd&lt;2Rd++)oo)/dot(o,o)-3,n+o)-ee=oif(l&gt;6)Q-max(!,.3-i+=b+g,g,g)*n*5*b;.73;g+=.1;}i=mix(i)i,.85lor=4(i*.01.lo?ug?bfO=34962,cB()eV(0vA(2,5120bDO,Tw Int8Array([|,|]35044o=,(Lt@-oa@TrHE/TrWidMx@xy@ydr(6,3requestAnimFrame(L)})(down=upk^=1},movek&amp;&amp;(xX,yY)};),3=funct(e){uOf?,"flo}@ce(saS?,slengM(onmouse ;void ma(){Tw De/1e5);incos(for=abs(gl_FragCo,1g*(sS(s=cS(n*n*.001at.5vecionb*=s(=e.page0,!0.#.r=s;$=m2(?(p@"EeightGunimJ.rm;K(t MthO(gQ1.R0;TneU Z `=j:100z/50!|-3'</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(Y <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $=<span class="hljs-string"><span class="hljs-string">'|zj`ZUTRQOMKJGE@?$#! '</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>(_.split($[Y]))_=join(pop());<span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(_)</code> </pre> </div></div><br><p>  JSCrushçš„åŸç†å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç”¨äºåå‘ä»£ç è½¬æ¢</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å·¥å…·ä¸­</a>ç›´è§‚åœ°æŸ¥çœ‹ã€‚ æˆ–åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡ç« </a>ä¸­è¯¦ç»†é˜…è¯»ã€‚ é€šå¸¸ï¼Œè¿™æ˜¯ä½¿ç”¨å­—å…¸è¿›è¡Œç¼–ç çš„ï¼š </p><br><ol><li> æˆ‘ä»¬å‘ç°ä»£ç ä¸­æœªä½¿ç”¨çš„å­—ç¬¦ </li><li> æˆ‘ä»¬åœ¨ä»£ç ä¸­å‘ç°é‡å¤çš„ç‰‡æ®µï¼Œå¹¶å°†å…¶æ›¿æ¢ä¸ºç¬¬ä¸€æ®µä¸­çš„å­—ç¬¦ </li><li> ç”¨å­—ç¬¦æ›¿æ¢å­—ç¬¦ä¸² </li><li> é‡å¤1-3ï¼Œç›´åˆ°ç»“æœå°äºæºä»£ç ã€‚ </li></ol><br><h2 id="optimizaciya"> æœ€ä½³åŒ– </h2><br><p> å®Œæˆæ‰€æœ‰æ“ä½œåï¼Œæˆ‘ä»ç„¶å‰©ä¸‹å¤§çº¦30ä¸ªå­—ç¬¦ï¼Œå¯ä»¥ç”¨æ¥ä¼˜åŒ–æ€§èƒ½ã€‚ åŠ è½½æ¼”ç¤ºæ—¶ï¼Œæ‚¨å¯ä»¥æŒ‡å®šç”»å¸ƒå¤§å°ï¼šå…¨å±æˆ–å›ºå®šå¤§å°ã€‚ å…¨å±å¯åŠ¨å¾ˆæ¼‚äº®ï¼Œä½†æ˜¯ç‰‡æ®µç€è‰²å™¨ä¼šä¸ºæ¯ä¸ªåƒç´ è°ƒç”¨ï¼Œå¹¶ä¸”è¿è¡Œç¼“æ…¢ã€‚ è§£å†³æ–¹æ¡ˆæ˜¯ä»JS1k canvasè¯·æ±‚å›ºå®šå¤§å°ï¼ˆæˆ‘é€‰æ‹©640x640ï¼‰ï¼Œç„¶ååœ¨ä»£ç ä¸­å°†å…¶å¢åŠ åˆ°å…¨å±æ˜¾ç¤ºï¼š </p><br><pre> <code class="javascript hljs">a.style=<span class="hljs-string"><span class="hljs-string">'width:100%;height:100vh;float:left'</span></span>;</code> </pre> <br><p> ç„¶åï¼Œå›¾åƒå æ®äº†æ•´ä¸ªå±å¹•ï¼Œä½†æ˜¯ä»…å¯¹åŸå§‹ç”»å¸ƒå¤§å°çš„æ¯ä¸ªåƒç´ æ‰§è¡Œç€è‰²å™¨ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN462115/">https://habr.com/ru/post/zh-CN462115/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN462101/index.html">Javaè™šæ‹Ÿæœºè¯­è¨€å³°ä¼š2019çš„æŠ¥å‘Š</a></li>
<li><a href="../zh-CN462107/index.html">å…è´¹é©¬æ‹‰æ¾èµ›â€œå¤§æ•°æ®å’Œè¶…çº§è‹±é›„ï¼šæ‚¨çš„é¦–æ¬¡æ•°æ®åˆ†æç»éªŒâ€</a></li>
<li><a href="../zh-CN462109/index.html">çœ‹åˆ°å‡ ä¹ä¸å¯è§çš„é¢œè‰²ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°ï¼šé€šè¿‡æ¼«å°„å™¨å¯è§†åŒ–å¯¹è±¡çš„æŠ€æœ¯</a></li>
<li><a href="../zh-CN462111/index.html">æˆ‘ä»¬å¦‚ä½•æµ‹è¯•å‡ ä¸ªæ—¶é—´åºåˆ—æ•°æ®åº“</a></li>
<li><a href="../zh-CN462113/index.html">æ— æ‡ˆå¯å‡»çš„ç¯å¢ƒï¼šæ²¡æœ‰äººåº”è¯¥ç¼–å†™é«˜è´¨é‡çš„ä»£ç </a></li>
<li><a href="../zh-CN462117/index.html">å¦‚ä½•æœ€å¤§åŒ–äº§å“ç§¯å‹æ•´ç†çš„ä»·å€¼ï¼Ÿ</a></li>
<li><a href="../zh-CN462119/index.html">è¾¾ç¾æ™ºæ…§åŸå¸‚è§£å†³æ–¹æ¡ˆï¼šæ‚¨æ˜¯å¦æƒ³çŸ¥é“ç”µå½±é™¢èƒ½åšåˆ°å¤šç»¿è‰²ï¼Ÿ</a></li>
<li><a href="../zh-CN462121/index.html">åŠŸèƒ½è¿…æ·</a></li>
<li><a href="../zh-CN462125/index.html">Yaml Zençš„10ä¸ªæ­¥éª¤</a></li>
<li><a href="../zh-CN462127/index.html">ç ”è®¨ä¼šâ€œè‡´å®¡è®¡å‘˜ï¼šæ•°æ®ä¸­å¿ƒé¡¹ç›®çš„å®¡è®¡å’ŒéªŒæ”¶æµ‹è¯•â€ï¼Œè«æ–¯ç§‘ï¼Œ8æœˆ15æ—¥</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>