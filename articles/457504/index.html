<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游뱆游낖 游놎游 游꿠 쯇or qu칠 escribir su cuadr칤cula de datos de reacci칩n en 2019? 游놄 游똁游낖 游</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! Estoy involucrado en el desarrollo de un sistema ECM. Y en una breve serie de art칤culos quiero compartir nuestra experiencia y la historia ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>쯇or qu칠 escribir su cuadr칤cula de datos de reacci칩n en 2019?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457504/"><p>  Hola Habr!  Estoy involucrado en el desarrollo de un sistema ECM.  Y en una breve serie de art칤culos quiero compartir nuestra experiencia y la historia del desarrollo de mi React Data Grid (en adelante, simplemente una grilla), a saber: </p><br><ul><li>  por qu칠 abandonamos los componentes terminados </li><li>  쯈u칠 problemas y tareas encontramos al desarrollar nuestra grilla? </li><li>  쯈u칠 beneficio da el desarrollo de su red? </li></ul><br><h3 id="predystoriya">  Antecedentes </h3><br><p>  Nuestro sistema tiene una aplicaci칩n web en la que los usuarios trabajan con listas de documentos, resultados de b칰squeda, directorios.  Adem치s, las listas pueden ser peque침as (10 empleados) o muy grandes (50,000 contratistas).  Para mostrar estas listas, desarrollamos nuestra propia cuadr칤cula: </p><br><p><img src="https://habrastorage.org/webt/1m/v3/py/1mv3pyhnf7emxc6xs2h8lcv8dis.png" alt="imagen"></p><a name="habracut"></a><br><p>  Cuando comenzamos a desarrollar una aplicaci칩n web, quer칤amos encontrar una biblioteca preparada para mostrar una cuadr칤cula que pueda hacer todo lo que necesitamos: ordenar y agrupar registros, arrastrar y soltar columnas, trabajar con m칰ltiples selecciones, filtrar y calcular totales de columnas, en porciones Descargue datos del servidor y muestre decenas de miles de registros. </p><br><p>  Explicar칠 el 칰ltimo requisito "mostrar decenas de miles de registros".  En las cuadr칤culas, este requisito se implementa de varias maneras: paginaci칩n, desplazamiento infinito, desplazamiento virtual. </p><br><p>  Los enfoques de paginaci칩n y desplazamiento infinito son comunes en los sitios web, los usa todos los d칤as.  Por ejemplo, paginaci칩n en Google: </p><br><p><img src="https://habrastorage.org/webt/v5/5q/vz/v55qvz8wjlhqmp-jfzievdnjvxe.png" alt="imagen"></p><br><p>  O desplazarse al infinito en el mismo Google en im치genes, donde se carga la siguiente porci칩n de im치genes cuando se desplaza a trav칠s de la primera porci칩n hasta el final: </p><br><p><img src="https://habrastorage.org/webt/bs/r7/qk/bsr7qkhgokj6ezk3qlagzkkgdaq.png" alt="imagen"></p><br><p>  Pero el desplazamiento virtual (en lo sucesivo denominado desplazamiento virtual) rara vez se usa en la web, su principal diferencia con el desplazamiento infinito es la capacidad de desplazarse r치pidamente por listas muy grandes en cualquier lugar.  En este caso, solo se descargar치n y mostrar치n los datos visibles para el usuario. </p><br><p><img src="https://habrastorage.org/webt/wf/j8/ct/wfj8ctaao00cbfi1txsytvpqwae.png" alt="imagen"></p><br><p>  Para nuestra aplicaci칩n web, quer칤a usar el desplazamiento virtual.  Estoy de acuerdo en que desplazarse a cualquier lugar en la lista de 10,000 entradas es un caso bastante inventado.  Sin embargo, el desplazamiento aleatorio dentro de 500-1000 registros es un caso en vivo. </p><br><p>  Cuando implementan el desplazamiento virtual, a menudo implementan la API de software para administrar este desplazamiento.  Esta es una caracter칤stica muy importante.  El desplazamiento de software se utiliza, por ejemplo, para colocar el registro seleccionado en el medio de la pantalla al abrir el directorio: </p><br><p><img src="https://habrastorage.org/webt/ny/up/na/nyupnajuldvlpnb294u203xvy-w.png" alt="imagen"></p><br><p>  De vuelta a los requisitos.  쯈u칠 m치s necesit치bamos? </p><br><ul><li>  API de gesti칩n de desplazamiento virtual </li><li>  Personalizaci칩n de la apariencia de la cuadr칤cula (filas, columnas, men칰 contextual) para que la cuadr칤cula no se vea extra침a en nuestra aplicaci칩n </li><li>  Soporte para las tecnolog칤as que utilizamos: react, redux y flexbox </li><li>  Que la cuadr칤cula funcion칩 en ie11 </li></ul><br><p>  En general, hab칤a muchos requisitos. </p><br><h3 id="popytka-pervaya-2016-god-devextreme-javascript-data-grid">  El primer intento (2016).  DevExtreme JavaScript Data Grid </h3><br><p>  Sin explorar mucho las bibliotecas existentes, nos topamos con la cuadr칤cula de datos de JavaScript DevExtreme.  Por requisitos funcionales, esta red cubr칤a todas nuestras necesidades y ten칤a una apariencia muy presentable.  Sin embargo, no era adecuado para requisitos tecnol칩gicos (no reaccionar, no redux, no flexbox).  En ese momento, DevExtreme no ten칤a una grilla de reacci칩n. </p><br><p>  Bueno, dejemos que no reaccione, decidimos, porque la cuadr칤cula es hermosa y funcional, la usaremos.  Y agregaron la biblioteca a su proyecto.  Result칩 que agregamos 3 MB de scripts. </p><br><p>  Durante un par de semanas, integramos la cuadr칤cula en nuestra aplicaci칩n web y aumentamos la funcionalidad b치sica: </p><br><ul><li>  Envolvi칩 una cuadr칤cula para hacer amigos con react y redux </li><li>  Desplazamiento virtual elevado y carga de porciones de datos desde nuestro servidor web </li><li>  Implementaci칩n de clasificaci칩n y selecci칩n </li></ul><br><p>  En el proceso de atornillar la red, se aclararon dos problemas serios y un mont칩n de problemas menos serios. </p><br><h3 id="pervaya-sereznaya-problema">  Primer problema grave </h3><br><p>  Hacer que DevExtreme JavaScript Data Grid con redux sea muy dif칤cil.  Logramos controlar la configuraci칩n de las columnas y resaltar los registros a trav칠s de redux, pero almacenar datos cargados en porciones en redux y realizar operaciones CRUD en ellos a trav칠s de redux; esto no es realista.  Tuve que hacer una muleta que, sin pasar por redux, manipulara los datos de la cuadr칤cula.  La muleta result칩 ser compleja y fr치gil.  Esta fue la primera alarma que la red no nos conven칤a, pero continuamos atornill치ndola. </p><br><h3 id="vtoraya-sereznaya-problema">  Segundo problema serio </h3><br><p>  No hay una API de gesti칩n de desplazamiento virtual.  No pudimos rechazar el control de desplazamiento del software, tuvimos que rehacer las fuentes DevExtreme y encontrar la API de control de desplazamiento interno.  Por supuesto, esta API ten칤a una monta침a de limitaciones, porque fue dise침ada para uso interno.  Como resultado, logramos hacer que la API interna funcione m치s o menos en nuestros casos, pero nuevamente, evitando redux, y nuevamente un mont칩n de muletas. </p><br><h3 id="menee-sereznye-problemy">  Problemas menos serios </h3><br><p>  Surgieron problemas menos serios todo el tiempo, porque la funcionalidad est치ndar de DevExtreme JavaScript Data Grid no era completamente adecuada para nosotros, e intentamos corregirla: </p><br><ol><li>  Estirar la cuadr칤cula DevExtreme en altura no funciona.  Tuve que escribir un truco para ense침arle a DevExtreme c칩mo hacer esto (tal vez no haya ning칰n problema con esto en versiones recientes). </li><li>  Cuando el foco no est치 en la cuadr칤cula, es imposible controlar la selecci칩n de l칤neas a trav칠s del teclado (y lo necesit치bamos).  Tuve que escribir el control de mi teclado. </li><li>  Al cambiar la composici칩n de las columnas y los datos, tuvimos el problema de parpadear los datos (con el desplazamiento virtual habilitado). </li><li>  El problema de una gran cantidad de solicitudes cuando se muestra la cuadr칤cula por primera vez.  Fue especialmente notable cuando controlamos el desplazamiento a trav칠s de la API interna. </li><li>  Es dif칤cil personalizar algunas partes de la cuadr칤cula de la interfaz de usuario.  Por ejemplo, hab칤a un deseo sobre la l칤nea de cuadr칤cula seleccionada para dibujar acciones de administraci칩n de l칤nea (eliminar una l칤nea, copiar, abrir una tarjeta).  Pero c칩mo atornillar esto en DevExtreme no estaba claro, e incluso usando react: <br><img src="https://habrastorage.org/webt/yo/zv/9b/yozv9boc174n-rxmbdsxoham4g8.png" alt="imagen"></li><li>  Es dif칤cil clasificar ordenadamente (quer칤amos ordenar por datos que no se muestran en la cuadr칤cula y no se asignan en columnas). </li><li>  Se requieren muletas para atornillar el componente de reacci칩n en las celdas de la rejilla (despu칠s de todo, la rejilla no est치 en la reacci칩n). </li><li>  No se debe escribir c칩digo DevExtreme (flujo / mecanografiado). </li><li>  Problema de velocidad con desplazamiento virtual largo. </li><li>  Problema de velocidad al estirar / reorganizar columnas (despu칠s de un desplazamiento virtual prolongado). </li><li>  El tama침o de los scripts de cuadr칤cula es de 3 Mb. </li></ol><br><p>  Aunque la cuadr칤cula de funcionalidad DevExtreme conten칤a todo lo que necesit치bamos, quer칤a reescribir casi toda la funcionalidad est치ndar.  Durante su uso, se agregaron cientos de l칤neas de c칩digo que eran dif칤ciles de entender que intentaban resolver los problemas de interacci칩n con redux y reaccionar, era dif칤cil usar una cuadr칤cula sin reacci칩n en una aplicaci칩n de reacci칩n. </p><br><h3 id="otkaz-ot-devextreme-poisk-alternativ">  Denegaci칩n de DevExtreme.  Busca alternativas </h3><br><p>  Despu칠s de alg칰n tiempo usando DevExtreme, se decidi칩 abandonarlo.  Deseche todos los hacks, c칩digo complejo, as칤 como 3 MB de scripts DevExtreme.  Y busca o escribe una nueva cuadr칤cula. </p><br><p>  Esta vez, estamos m치s atentos al estudio de las redes existentes.  MS Fabric DetailsList, ReactVirtualized Grid, DevExtreme React Grid, Telerik Grid, KendoUI Grid fueron estudiados. <br>  Los requisitos segu칤an siendo los mismos, pero ya se concretaron en una lista que nos qued칩 clara. </p><br><p>  Requerimientos tecnol칩gicos: </p><br><ul><li>  reaccionar </li><li>  redux </li><li>  flexbox </li></ul><br><p>  Requerimientos Funcionales: </p><br><ul><li>  Desplazamiento virtual (con la capacidad de mostrar decenas de miles de registros) </li><li>  API de gesti칩n de desplazamiento </li><li>  Almacenamiento de datos y configuraciones de cuadr칤cula en redux </li><li>  Carga de datos por lotes desde un servidor web </li><li>  Gesti칩n de columnas (estiramiento / reorganizaci칩n / control de visibilidad) </li><li>  Clasificaci칩n de columnas + filtrado </li><li>  Selecci칩n m칰ltiple </li><li>  Me gusta-b칰squeda con luz de fondo </li><li>  Desplazamiento horizontal </li><li>  Teclado </li><li>  Men칰 contextual (en una l칤nea, en un 치rea vac칤a, en columnas) </li><li>  Soporte ie11, edge, chrome, ff, safari </li></ul><br><p>  En este punto, la primera versi칩n de DevExtreme React Grid ya hab칤a aparecido, pero de inmediato la descartamos por las siguientes razones: </p><br><ul><li>  El desplazamiento virtual no es compatible con ie11 </li><li>  El desplazamiento virtual no funciona junto con la descarga por lotes de datos del servidor (aunque parece haber algunas soluciones). </li><li>  Y lo m치s importante, no quer칤a pisar el mismo rastrillo cuando quer칤a reescribir la mitad de la funcionalidad est치ndar de una grilla de terceros. </li></ul><br><p>  El an치lisis de las soluciones existentes mostr칩 que no existe una "bala de plata".  No existe una cuadr칤cula que cubra todos nuestros requisitos.  Se decidi칩 escribir nuestra propia cuadr칤cula, que en t칠rminos de funcionalidad desarrollaremos en la direcci칩n que necesitamos, y seremos amigos de las tecnolog칤as que necesita nuestro producto. </p><br><h3 id="razrabotka-svoego-react-data-grid">  Desarrollando su cuadr칤cula de datos de reacci칩n </h3><br><p>  El desarrollo de la red comenz칩 con prototipos, donde probaron los temas m치s dif칤ciles para nosotros: </p><br><ul><li>  desplazamiento virtual </li><li>  almacenamiento de todos los datos de la red en Redux </li></ul><br><h3 id="virtual-scrolling">  Desplazamiento virtual </h3><br><p>  El m치s dif칤cil result칩 ser el desplazamiento virtual.  En su mayor parte, se realiza en una de 3 formas: </p><br><p>  <strong>1. Virtualizaci칩n de p치gina</strong> <br>  Los datos se dibujan en porciones - p치ginas.  Al desplazarse, se agregan p치ginas visibles, se eliminan las invisibles.  La p치gina consta de 20-60 l칤neas (generalmente el tama침o es personalizable).  Aqu칤 es donde fueron los productos: DevExtreme JavaScript Data Grid, MS Fabric DetailsList. </p><br><p><img src="https://habrastorage.org/webt/h7/tf/5l/h7tf5lynlgmje6wunlcowkeabqa.png" alt="imagen"></p><br><p>  <strong>2. Virtualizaci칩n l칤nea por l칤nea</strong> <br>  Solo se dibujan l칤neas visibles.  Tan pronto como una l칤nea sale de la pantalla, se elimina de inmediato.  Los productos fueron as칤: ReactVirtualized Grid, DevExtreme React Grid, Telerik Grid. </p><br><p><img src="https://habrastorage.org/webt/9j/zs/bh/9jzsbhqw0_up5gnkt2g7cw3uth0.png" alt="imagen"></p><br><p>  <strong>3. Lienzo</strong> <br>  Todas las l칤neas y sus contenidos se dibujan con Canvas.  Esto es lo que hizo Google Docs. </p><br><p><img src="https://habrastorage.org/webt/12/f_/hd/12f_hdydog5ponrdm9filxne_1u.png" alt="imagen"></p><br><p>  Al desarrollar la cuadr칤cula, creamos prototipos para las tres opciones de virtualizaci칩n (incluso para Canvas).  Y eligieron la virtualizaci칩n p치gina por p치gina. </p><br><h3 id="pochemu-otkazalis-ot-drugih-variantov">  쯇or qu칠 abandon칩 otras opciones? </h3><br><p>  La virtualizaci칩n l칤nea por l칤nea tuvo problemas con la velocidad de representaci칩n en el prototipo.  Tan pronto como el contenido de las l칤neas se volvi칩 m치s complicado (mucho texto, resaltado, recorte, 칤conos, una gran cantidad de columnas y flexbox en todas partes), se volvi칩 costoso agregar / quitar l칤neas varias veces por segundo.  Por supuesto, los resultados tambi칠n dependen del navegador (hicimos soporte, incluido ie11, edge): </p><br><p><img src="https://habrastorage.org/webt/fe/4v/xh/fe4vxhw7r5zjwqqezc7rmxubmmm.png" alt="imagen"></p><br><p>  La opci칩n de Canvas era muy seductora en la velocidad de renderizado, pero laboriosa.  Se propuso dibujar todo: texto, ajuste de texto, recorte de texto, resaltado, iconos, l칤neas divisorias, resaltado, sangr칤a.  Haga una reacci칩n al hacer clic en el bot칩n del mouse en el Lienzo, resaltando las l칤neas cuando pasa el cursor sobre.  Al mismo tiempo, algunos elementos Dom (que muestran sugerencias, "acciones emergentes" en la l칤nea) deben aplicarse sobre Canvas.  Todav칤a era necesario resolver el problema de difuminar texto e 칤conos en Canvas.  Todo esto es largo y dif칤cil de hacer.  Aunque dominamos el prototipo.  Al mismo tiempo, cualquier personalizaci칩n de filas y celdas en el futuro resultar칤a en una gran laboriosidad para nosotros. </p><br><h4 id="plyusy-postranichnoy-virtualizacii">  Los beneficios de la paginaci칩n </h4><br><p>  La virtualizaci칩n seleccionada p치gina por p치gina ten칤a ventajas en comparaci칩n con l칤nea por l칤nea, lo que determin칩 su elecci칩n: </p><br><ul><li>  Si la p치gina ya est치 representada, el desplazamiento dentro de la p치gina es barato (el 치rbol DOM no cambia al desplazarse).  La virtualizaci칩n l칤nea por l칤nea con cualquier desplazamiento menor requiere cambiar el 치rbol DOM, y esto es costoso cuando el 치rbol DOM es complejo y flexbox se usa en todas partes. </li><li>  Para listas peque침as (&lt;200 entradas) las p치ginas no se pueden eliminar, solo agregue.  Tarde o temprano, se construir치n todas las p치ginas y el desplazamiento ser치 completamente gratuito (en t칠rminos de tiempo de representaci칩n). </li></ul><br><h4 id="vybor-razmera-stranicy">  Selecci칩n de tama침o de p치gina </h4><br><p>  Un tema aparte es la elecci칩n del tama침o de p치gina.  Escrib칤 anteriormente que el tama침o es personalizable y generalmente es de 20-60 l칤neas.  Se dibuja una p치gina grande durante mucho tiempo, una peque침a lleva a una visualizaci칩n frecuente de una "pantalla blanca" al desplazarse.  Experimentalmente, se seleccion칩 un tama침o de p치gina de 25 l칤neas.  Sin embargo, para ie11 el tama침o se ha reducido a 5 l칤neas.  Siente que la interfaz en IE responde mejor si dibuja muchas p치ginas peque침as con retrasos peque침os que una grande con un retraso grande. </p><br><h4 id="react-i-virtual-scrolling">  Reaccionar y desplazamiento virtual </h4><br><p>  La virtualizaci칩n de la p치gina tuvo que implementarse usando react.  Para hacer esto, se deben resolver varias tareas: </p><br><p>  <strong>Tarea 1. 쮺칩mo agregar / eliminar p치ginas mediante reaccionar al desplazarse?</strong> </p><br><p>  Para resolver este problema, se introdujeron los siguientes conceptos: </p><br><ul><li>  modelo de p치gina </li><li>  vista de p치gina </li></ul><br><p>  Un modelo es informaci칩n sobre la cual construir una vista.  Una vista es un componente Reaccionar. </p><br><p><img src="https://habrastorage.org/webt/ud/da/qi/uddaqigdtketfoh6cwk6lnklcpo.png" alt="imagen"></p><br><p>  De hecho, la tarea de virtualizaci칩n despu칠s de esto se redujo a manipular modelos de p치gina: almacenar una lista de modelos de p치gina, agregar y quitar modelos al desplazarse.  Y ya desde la lista de modelos a trav칠s de reaccionar construir / reconstruir la pantalla: </p><br><p><img src="https://habrastorage.org/webt/4m/sr/g0/4msrg0gy9qwsv9u-8ljjqhzllwa.png" alt="imagen"></p><br><p>  En el curso de la implementaci칩n, se formaron las reglas para trabajar con modelos de p치gina: </p><br><ul><li>  Las p치ginas deben agregarse una a la vez.  Despu칠s de cada adici칩n, d칠 tiempo para dibujar.  Es aceptable agregar 1 p치gina cada 300-500 ms; esta es una situaci칩n de desplazamiento r치pido.  Si agrega, por ejemplo, 5 p치ginas a la vez, la interfaz del usuario se bloquea en su construcci칩n. </li><li>  Las p치ginas no necesitan estar en docenas.  Un ejemplo de una situaci칩n problem치tica: se muestran 20 p치ginas, el usuario va a otra lista y las 20 p치ginas deben eliminarse a la vez.  Eliminar una gran cantidad de p치ginas es una operaci칩n costosa; limpiar el 치rbol DOM tomar치 1 segundo.  Para evitar esto, es mejor no guardar m치s de 10 p치ginas a la vez. </li><li>  Para cualquier manipulaci칩n de columna (reorganizaci칩n, adici칩n, eliminaci칩n, estiramiento) es mejor eliminar p치ginas que no son visibles para el usuario de antemano.  Esto evitar치 la costosa reconstrucci칩n de todas las p치ginas renderizadas. </li></ul><br><p>  <strong>Tarea 2. 쮺칩mo mostrar la barra de desplazamiento?</strong> </p><br><p>  El desplazamiento virtual supone que hay una barra de desplazamiento disponible, que tiene en cuenta el tama침o de la lista y le permite desplazarse a cualquier lugar: </p><br><p><img src="https://habrastorage.org/webt/lo/rc/ut/lorcutgz7bcopbjltcnziudkgks.png" alt="imagen"></p><br><p>  쮺칩mo mostrar esa barra de desplazamiento?  La soluci칩n m치s simple es dibujar un div invisible del tama침o requerido en lugar de datos reales.  Y ya encima de este div mostramos las p치ginas visibles: </p><br><p><img src="https://habrastorage.org/webt/pp/_x/vg/pp_xvgowd1qtrnyigxnszou0xnw.png" alt="imagen"></p><br><p>  <strong>Tarea 3. 쮺칩mo controlar el tama침o de la ventana gr치fica?</strong> </p><br><p>  Viewport es el 치rea de datos visible de la cuadr칤cula.  쯇or qu칠 vigilar su tama침o?  Para calcular la cantidad de p치ginas que deben mostrarse al usuario.  Supongamos que tenemos un tama침o de p치gina peque침o (5 l칤neas) y una resoluci칩n de pantalla grande (1920x1080).  쮺u치ntas p치ginas debe mostrar el usuario para cerrar toda la ventana gr치fica? </p><br><p><img src="https://habrastorage.org/webt/tt/g3/sx/ttg3sxfvvuf320ydcwe6esbukp4.png" alt="imagen"></p><br><p>  Puede resolver este problema si conoce la altura de la ventana gr치fica y la altura de una p치gina.  Ahora vamos a complicar la tarea, supongamos que el usuario cambia la escala bruscamente en el navegador - establece 50%: </p><br><p><img src="https://habrastorage.org/webt/s8/47/mt/s847mtipiappdqe0qqsli_yvj14.png" alt="imagen"></p><br><p>  La situaci칩n con la escala muestra que no es suficiente averiguar el tama침o de la ventana gr치fica una vez, debe controlar el tama침o.  Y ahora complicaremos la tarea por completo: los elementos html no tienen un evento de cambio de tama침o, al que puede suscribirse y controlar el tama침o.  Solo el objeto de la ventana ha cambiado de tama침o. </p><br><p>  Lo primero que viene a la mente es usar un temporizador y sondear constantemente la altura del elemento html.  Pero hay una soluci칩n a칰n mejor que vimos en DevExtreme JavaScript Data Grid: cree un iframe invisible, est칤relo al tama침o de la cuadr칤cula y suscr칤base al evento de cambio de tama침o de iframe.contentWindow: </p><br><p><img src="https://habrastorage.org/webt/fa/gi/ta/fagitaw870f5ahtworjownk__mk.png" alt="imagen"></p><br><p><img src="https://habrastorage.org/webt/dd/m9/tq/ddm9tqblgsmpwepcc7_gq7g32sm.png" alt="imagen"></p><br><h3 id="rezyume">  Resumen </h3><br><p>  PD: este no es el final.  En el pr칩ximo art칤culo contar칠 c칩mo nos hicimos amigos de redux. </p><br><p>  Para obtener un desplazamiento virtual completo, muchas otras tareas tuvieron que ser resueltas.  Pero los descritos anteriormente fueron los m치s interesantes.  Aqu칤 hay algunas otras tareas que tambi칠n aparecen: </p><br><ul><li>  Tenga en cuenta la direcci칩n y la velocidad de desplazamiento al agregar / eliminar p치ginas. </li><li>  Tenga en cuenta los cambios de datos para minimizar la reconstrucci칩n de los modelos de p치gina.  Por ejemplo, elimin칩 una l칤nea o agreg칩 una l칤nea, 쯤u칠 hacer con las p치ginas ya renderizadas?  쮻esechar todo o dejar un poco?  Hay espacio para la optimizaci칩n. </li><li>  Al cambiar la selecci칩n, reorganice el n칰mero m칤nimo requerido de p치ginas. </li></ul><br><p>  Si tiene preguntas sobre la implementaci칩n, puede escribirlas en los comentarios. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/457504/">https://habr.com/ru/post/457504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457480/index.html">Crear una aplicaci칩n de escucha para ver el tr치fico MMORPG m칩vil</a></li>
<li><a href="../457490/index.html">Aisioshechka de Zuckerberg - brevemente y en el caso de Libra</a></li>
<li><a href="../457494/index.html">"Y si no s칠 matem치ticas, 쯘stoy desesperado?" - especialistas responden preguntas frecuentes sobre profesiones en ciencia de datos</a></li>
<li><a href="../457496/index.html">"Encuentra las cinco diferencias". Diferencia escalable y generacional: nuevo lote de pruebas</a></li>
<li><a href="../457500/index.html">C칩mo hicimos el piloto autom치tico para una estaci칩n de servicio</a></li>
<li><a href="../457508/index.html">Parenting vs Machine Learning: compara una madre joven</a></li>
<li><a href="../457510/index.html">Use mcrouter para escalar memcached horizontalmente</a></li>
<li><a href="../457512/index.html">Replicaci칩n l칩gica entre versiones de PostgreSQL</a></li>
<li><a href="../457514/index.html">Nevanger</a></li>
<li><a href="../457516/index.html">Escribir un modelo de amenaza</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>