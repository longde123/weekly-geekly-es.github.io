<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎥 🏫 ✋🏼 Aufbau einer serviceorientierten Architektur auf Schienen + Kafka 😳 🙌🏼 🐡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Ich präsentiere Ihnen den Beitrag, der eine Textadaption der Leistung von Stella Cotton auf der RailsConf 2018 und eine Übersetzung des Ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aufbau einer serviceorientierten Architektur auf Schienen + Kafka</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450028/">  Hallo Habr!  Ich präsentiere Ihnen den Beitrag, der eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Textadaption</a> der Leistung von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Stella Cotton auf der RailsConf 2018</a> und eine Übersetzung des Artikels <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Aufbau einer serviceorientierten Architektur mit Rails und Kafka"</a> von Stella Cotton ist. <br><br>  In jüngster Zeit ist der Übergang von der monolithischen Architektur zu Mikrodiensten deutlich sichtbar.  In diesem Handbuch lernen wir die Grundlagen von Kafka kennen und wie ein ereignisgesteuerter Ansatz Ihre Rails-Anwendung verbessern kann.  Wir werden auch über die Probleme der Überwachung und Skalierbarkeit von Diensten sprechen, die durch einen ereignisorientierten Ansatz arbeiten. <br><a name="habracut"></a><br><h2>  Was ist Kafka? </h2><br>  Ich bin sicher, dass Sie Informationen darüber haben möchten, wie Ihre Benutzer zu Ihrer Plattform gekommen sind oder welche Seiten sie besuchen, auf welche Schaltflächen sie klicken usw.  Eine wirklich beliebte Anwendung kann Milliarden von Ereignissen generieren und eine große Datenmenge an Analysedienste senden, was eine ernsthafte Herausforderung für Ihre Anwendung sein kann. <br><br>  Ein wesentlicher Bestandteil von Webanwendungen ist in der Regel der sogenannte <i>Echtzeitdatenfluss</i> .  Kafka bietet eine fehlertolerante Verbindung zwischen <b>Produzenten</b> , denen, die Ereignisse erzeugen, und <b>Verbrauchern</b> , denen, die diese Ereignisse erhalten.  Es kann sogar mehrere Hersteller und Verbraucher in einer Anwendung geben.  In Kafka existiert jedes Ereignis für eine bestimmte Zeit, sodass mehrere Verbraucher immer wieder dasselbe Ereignis lesen können.  Der Kafka-Cluster umfasst mehrere Broker, die Kafka-Instanzen sind. <br><br><img src="https://habrastorage.org/webt/ql/j1/uy/qlj1uyapeg_3fmswgflqauwmd7q.png"><br><br>  Ein wesentliches Merkmal von Kafka ist die hohe Geschwindigkeit der Ereignisverarbeitung.  Herkömmliche Warteschlangensysteme wie AMQP verfügen über eine Infrastruktur, die die verarbeiteten Ereignisse für jeden Verbraucher überwacht.  Wenn die Anzahl der Verbraucher auf ein anständiges Niveau ansteigt, beginnt das System kaum, mit der Last fertig zu werden, da es eine zunehmende Anzahl von Bedingungen überwachen muss.  Es gibt auch große Probleme mit der Konsistenz zwischen Verbraucher- und Ereignisverarbeitung.  Lohnt es sich beispielsweise, eine Nachricht sofort als gesendet zu markieren, sobald sie vom System verarbeitet wird?  Und wenn ein Verbraucher am anderen Ende fällt, ohne eine Nachricht zu erhalten? <br><br>  Kafka hat auch eine ausfallsichere Architektur.  Das System wird als Cluster auf einem oder mehreren Servern ausgeführt, die durch Hinzufügen neuer Computer horizontal skaliert werden können.  Alle Daten werden auf die Festplatte geschrieben und an mehrere Broker kopiert.  Um die Möglichkeiten der Skalierbarkeit zu verstehen, sollten Sie sich Unternehmen wie Netflix, LinkedIn und Microsoft ansehen.  Alle senden täglich Billionen von Nachrichten über ihre Kafka-Cluster! <br><br><h2>  Kafka in Rails einrichten </h2><br>  Heroku bietet ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kafka-Cluster-Add-On</a> , das für jede Umgebung verwendet werden kann.  Für <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rubinanwendungen</a> empfehlen wir die Verwendung des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rubin-Kafka-Edelsteins</a> .  Die minimale Implementierung sieht ungefähr so ​​aus: <br><br><pre><code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># config/initializers/kafka_producer.rb require "kafka" # Configure the Kafka client with the broker hosts and the Rails # logger. $kafka = Kafka.new(["kafka1:9092", "kafka2:9092"], logger: Rails.logger) # Set up an asynchronous producer that delivers its buffered messages # every ten seconds: $kafka_producer = $kafka.async_producer( delivery_interval: 10, ) # Make sure to shut down the producer when exiting. at_exit { $kafka_producer.shutdown }</span></span></code> </pre> <br>  Nach dem Konfigurieren der Konfiguration können Sie mit dem Gem Nachrichten senden.  Dank des asynchronen Sendens von Ereignissen können wir Nachrichten von überall senden: <br><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OrdersController</span></span></span><span class="hljs-class"> &lt; ApplicationController </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">create</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">comment</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Order</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">create!</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">params</span></span></span><span class="hljs-class">) $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">kafka_producer</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">produce</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">order</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">to_json</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">topic</span></span></span><span class="hljs-class">: "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">user_event</span></span></span><span class="hljs-class">", </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">partition_key</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">user</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br>  Wir werden im Folgenden über Serialisierungsformate sprechen, aber im Moment verwenden wir den guten alten JSON.  Das <code>topic</code> Argument bezieht sich auf das Protokoll, in das Kafka dieses Ereignis schreibt.  Die Themen sind in verschiedene Abschnitte unterteilt, sodass Sie die Daten für ein bestimmtes Thema für eine bessere Skalierbarkeit und Zuverlässigkeit in verschiedene Broker aufteilen können.  Und es ist wirklich eine gute Idee, zwei oder mehr Abschnitte für jedes Thema zu haben, denn wenn einer der Abschnitte fällt, werden Ihre Ereignisse trotzdem aufgezeichnet und verarbeitet.  Kafka stellt sicher, dass Ereignisse in der Reihenfolge der Warteschlange innerhalb des Abschnitts, jedoch nicht innerhalb des gesamten Themas geliefert werden.  Wenn die Reihenfolge der Ereignisse wichtig ist, wird durch das Senden von partition_key sichergestellt, dass alle Ereignisse eines bestimmten Typs auf derselben Partition gespeichert werden. <br><br><h2>  Kafka für Ihre Dienste </h2><br>  Einige der Funktionen, die Kafka zu einem nützlichen Tool machen, machen es auch zu einem Failover-RPC zwischen Diensten.  Schauen Sie sich ein Beispiel für eine E-Commerce-Anwendung an: <br><br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_order</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_order_record</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">charge_credit_card</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment"># call to Payments Service send_confirmation_email # call to Email Service end</span></span></span></span></code> </pre> <br>  Wenn der Benutzer eine Bestellung <code>create_order</code> , wird die Funktion <code>create_order</code> .  Dadurch wird eine Bestellung im System erstellt, Geld von der Karte abgezogen und eine E-Mail mit Bestätigung gesendet.  Wie Sie sehen können, werden die letzten beiden Schritte in separaten Diensten ausgeführt. <br><br><img src="https://habrastorage.org/webt/i8/_y/tr/i8_ytruescd639f48vmelrmsfu4.png"><br><br>  Eines der Probleme bei diesem Ansatz besteht darin, dass der übergeordnete Dienst in der Hierarchie für die Überwachung der Verfügbarkeit des nachgeschalteten Dienstes verantwortlich ist.  Wenn sich herausstellte, dass der Dienst zum Versenden von Briefen ein schlechter Tag war, muss der höhere Dienst darüber Bescheid wissen.  Wenn der sendende Dienst nicht verfügbar ist, müssen Sie eine Reihe von Aktionen wiederholen.  Wie kann Kafka in dieser Situation helfen? <br><br>  Zum Beispiel: <br><br><img src="https://habrastorage.org/webt/i1/dh/a8/i1dha8zycj6ibxydaxja9y8bp10.png"><br><br>  Bei diesem ereignisgesteuerten Ansatz kann ein übergeordneter Service ein Ereignis in Kafka aufzeichnen, bei dem ein Auftrag erstellt wurde.  Aufgrund des sogenannten <i>mindestens einmaligen</i> Ansatzes wird das Ereignis mindestens einmal in Kafka aufgezeichnet und steht den nachgeschalteten Verbrauchern zum Lesen zur Verfügung.  Wenn der Dienst zum Senden von Briefen lügt, wartet das Ereignis auf der Festplatte, bis der Verbraucher aufsteht und es liest. <br><br>  Ein weiteres Problem bei der RPC-orientierten Architektur besteht in schnell wachsenden Systemen: Das Hinzufügen eines neuen Downstream-Dienstes führt zu Änderungen im Upstream.  Beispielsweise möchten Sie nach dem Erstellen einer Bestellung einen weiteren Schritt hinzufügen.  In einer ereignisgesteuerten Welt müssen Sie einen weiteren Verbraucher hinzufügen, um einen neuen Ereignistyp zu verarbeiten. <br><br><img src="https://habrastorage.org/webt/ox/ic/ka/oxickaiivr5j6hey5fahjkcvsxc.png"><br><br><h2>  Integration von Ereignissen in serviceorientierte Architektur </h2><br>  In einem Beitrag mit dem Titel „ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Was meinst du mit„ ereignisgesteuert</a> “von Martin Fowler <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">?</a> “ Wird die Verwirrung um ereignisgesteuerte Anwendungen erörtert.  Wenn Entwickler solche Systeme diskutieren, sprechen sie tatsächlich über eine große Anzahl verschiedener Anwendungen.  Um ein allgemeines Verständnis der Natur solcher Systeme zu vermitteln, definierte Fowler mehrere Architekturmuster. <br><br>  Werfen wir einen Blick auf diese Muster.  Wenn Sie mehr wissen möchten, empfehle ich Ihnen, seinen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bericht</a> auf der GOTO Chicago 2017 zu lesen. <br><br><h3>  Ereignisbenachrichtigung </h3><br>  Das erste Fowler-Muster heißt <i>Ereignisbenachrichtigung</i> .  In diesem Szenario benachrichtigt der Produzentendienst die Verbraucher über das Ereignis mit einer Mindestmenge an Informationen: <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"event"</span></span>: <span class="hljs-string"><span class="hljs-string">"order_created"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"published_at"</span></span>: <span class="hljs-string"><span class="hljs-string">"2016-03-15T16:35:04Z"</span></span> }</code> </pre> <br>  Wenn Verbraucher weitere Informationen über die Veranstaltung benötigen, stellen sie eine Anfrage an den Hersteller und erhalten weitere Daten. <br><br><h3>  Ereignisübertragene Zustandsübertragung </h3><br>  Die zweite Vorlage heißt <i>Event-Carried State Transfer</i> .  In diesem Szenario stellt der Hersteller zusätzliche Informationen zum Ereignis bereit, und der Verbraucher kann eine Kopie dieser Daten speichern, ohne zusätzliche Anrufe zu tätigen: <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"event"</span></span>: <span class="hljs-string"><span class="hljs-string">"order_created"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"order"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"order_id"</span></span>: <span class="hljs-number"><span class="hljs-number">98765</span></span>, <span class="hljs-attr"><span class="hljs-attr">"size"</span></span>: <span class="hljs-string"><span class="hljs-string">"medium"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"color"</span></span>: <span class="hljs-string"><span class="hljs-string">"blue"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"published_at"</span></span>: <span class="hljs-string"><span class="hljs-string">"2016-03-15T16:35:04Z"</span></span> }</code> </pre> <br><h3>  Event-bezogen </h3><br>  Fowler nannte die dritte Vorlage <i>Event-Sourced</i> und sie ist eher architektonisch.  Die Freigabe der Vorlage beinhaltet nicht nur die Kommunikation zwischen Ihren Diensten, sondern auch die Wahrung der Präsentation der Veranstaltung.  Auf diese Weise wird sichergestellt, dass Sie den Status der Anwendung auch dann wiederherstellen können, wenn Sie die Datenbank verlieren, indem Sie einfach den gespeicherten Ereignisstrom ausführen.  Mit anderen Worten, jedes Ereignis speichert einen bestimmten Status der Anwendung zu einem bestimmten Zeitpunkt. <br><br>  Das große Problem bei diesem Ansatz ist, dass sich der Anwendungscode immer ändert und sich damit das Format oder die Datenmenge, die der Hersteller angibt, ändern kann.  Dies macht das Wiederherstellen des Status der Anwendung problematisch. <br><br><h3>  Verantwortlichkeitstrennung für Befehlsabfragen </h3><br>  Die letzte Vorlage ist <i>Command Query Responsibility Segregation</i> (CQRS).  Die Idee ist, dass die Aktionen, die Sie auf das Objekt anwenden, z. B. Erstellen, Lesen, Aktualisieren, in verschiedene Domänen unterteilt werden sollten.  Dies bedeutet, dass ein Dienst für die Erstellung, ein anderer für das Update usw. verantwortlich sein sollte.  In objektorientierten Systemen wird häufig alles in einem Dienst gespeichert. <br><br><img src="https://habrastorage.org/webt/xb/5b/mx/xb5bmxasal6md3bq2xsdgnhfhgg.png"><br><br>  Ein Dienst, der in die Datenbank schreibt, liest den Ablauf von Ereignissen und verarbeitet Befehle.  Anforderungen treten jedoch nur in der schreibgeschützten Datenbank auf.  Die Aufteilung der Lese- und Schreiblogik in zwei verschiedene Dienste erhöht die Komplexität, ermöglicht es Ihnen jedoch, die Leistung für diese Systeme separat zu optimieren. <br><br><h2>  Die Probleme </h2><br>  Lassen Sie uns über einige Probleme sprechen, die bei der Integration von Kafka in Ihre serviceorientierte Anwendung auftreten können. <br><br>  Das erste Problem könnten langsame Verbraucherprobleme sein.  In einem ereignisorientierten System sollten Ihre Dienste Ereignisse sofort verarbeiten können, wenn sie von einem übergeordneten Dienst empfangen werden.  Andernfalls hängen sie einfach ohne Benachrichtigungen über das Problem oder Zeitüberschreitungen.  Der einzige Ort, an dem Sie Zeitüberschreitungen definieren können, ist eine Socket-Verbindung mit Kafka-Brokern.  Wenn der Dienst das Ereignis nicht schnell genug verarbeitet, kann die Verbindung durch eine Zeitüberschreitung unterbrochen werden. Die Wiederherstellung des Dienstes erfordert jedoch zusätzliche Zeit, da das Erstellen solcher Sockets teuer ist. <br><br>  Wie können Sie die Geschwindigkeit der Ereignisverarbeitung erhöhen, wenn der Verbraucher langsam ist?  In Kafka können Sie die Anzahl der Verbraucher in einer Gruppe erhöhen, sodass mehr Ereignisse parallel verarbeitet werden können.  Für einen Service sind jedoch mindestens 2 Verbraucher erforderlich: Im Falle eines Sturzes können beschädigte Abschnitte neu zugewiesen werden. <br><br>  Es ist auch sehr wichtig, Metriken und Warnungen zu haben, um die Geschwindigkeit der Ereignisverarbeitung zu überwachen.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ruby-kafka</a> kann mit ActiveSupport-Warnungen arbeiten und verfügt außerdem über StatsD- und Datadog-Module, die standardmäßig aktiviert sind.  Darüber hinaus enthält das Juwel eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Liste</a> empfohlener Metriken für die Überwachung. <br><br>  Ein weiterer wichtiger Aspekt beim Bauen von Systemen mit Kafka ist das Design von Verbrauchern, die in der Lage sind, Fehler zu behandeln.  Kafka wird garantiert mindestens einmal eine Veranstaltung senden.  schloss den Fall aus, dass die Nachricht überhaupt nicht gesendet wurde.  Es ist jedoch wichtig, dass die Verbraucher auf wiederkehrende Ereignisse vorbereitet sind.  Eine Möglichkeit, dies zu tun, besteht darin, immer <code>UPSERT</code> zu verwenden, um der Datenbank neue Datensätze hinzuzufügen.  Wenn der Datensatz bereits mit denselben Attributen vorhanden ist, ist der Aufruf im Wesentlichen inaktiv.  Darüber hinaus können Sie jedem Ereignis eine eindeutige Kennung hinzufügen und Ereignisse, die bereits zuvor verarbeitet wurden, einfach überspringen. <br><br><h2>  Datenformate </h2><br>  Eine der Überraschungen bei der Arbeit mit Kafka ist möglicherweise die einfache Einstellung zum Datenformat.  Sie können alles in Bytes senden und die Daten werden ohne Überprüfung an den Verbraucher gesendet.  Einerseits bietet es Flexibilität und ermöglicht es Ihnen, sich nicht um das Datenformat zu kümmern.  Wenn der Hersteller hingegen beschließt, die gesendeten Daten zu ändern, besteht die Möglichkeit, dass ein Verbraucher irgendwann kaputt geht. <br><br>  Wählen Sie vor dem Erstellen einer ereignisorientierten Architektur ein Datenformat aus und analysieren Sie, wie es in Zukunft helfen wird, Schemata zu registrieren und zu entwickeln. <br><br>  Eines der zur Verwendung empfohlenen Formate ist natürlich JSON.  Dieses Format ist für Menschen lesbar und wird von allen bekannten Programmiersprachen unterstützt.  Aber es gibt Fallstricke.  Beispielsweise kann die Größe der endgültigen Daten in JSON erschreckend groß werden.  Das Format ist erforderlich, um Schlüssel-Wert-Paare zu speichern, was flexibel genug ist, aber die Daten werden bei jedem Ereignis dupliziert.  Das Ändern des Schemas ist ebenfalls eine schwierige Aufgabe, da es keine integrierte Unterstützung für das Überlagern eines Schlüssels mit einem anderen gibt, wenn Sie das Feld umbenennen müssen. <br><br>  Das Team, das Kafka erstellt hat, berät <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Avro</a> als Serialisierungssystem.  Daten werden in binärer Form gesendet, und dies ist nicht das am besten lesbare Format, aber im Inneren gibt es eine zuverlässigere Unterstützung für Schaltkreise.  Die letzte Entität in Avro enthält sowohl Schema als auch Daten.  Avro unterstützt sowohl einfache Typen wie Zahlen als auch komplexe Typen: Datumsangaben, Arrays usw. Darüber hinaus können Sie Dokumentation in das Schema aufnehmen, wodurch Sie den Zweck eines bestimmten Felds im System verstehen und viele andere integrierte Tools für die Arbeit mit dem Schema enthalten. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">avro-builder</a> ist ein Juwel von Salsify, das ein rubinartiges DSL zum Erstellen von Schemas bietet.  Weitere <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Informationen zu</a> Avro finden Sie in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem Artikel</a> . <br><br><h2>  Weitere Informationen </h2><br>  Wenn Sie daran interessiert sind, wie Kafka gehostet wird oder wie es in Heroku verwendet wird, gibt es mehrere Berichte, die für Sie von Interesse sein können. <br><br>  Jeff Chao bei DataEngConf SF '17 „ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Jenseits von 50.000 Partitionen: Wie Heroku arbeitet und die Grenzen von Kafka im Maßstab</a> überschreitet“ <br><br>  Pavel Pravosud auf der Dreamforce '16 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">-Konferenz</a> „ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dogfooding Kafka: Wie wir Herokus Echtzeit-Plattform-Event-Stream aufgebaut haben</a> “ <br><br>  Schöne Aussicht! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de450028/">https://habr.com/ru/post/de450028/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de450016/index.html">Erstellung eines formalen Verifizierungssystems von Grund auf neu. Teil 1: Virtuelle Zeichenmaschine in PHP und Python</a></li>
<li><a href="../de450018/index.html">Ein Mathe-Duo kartierte ein endloses Gebiet mit minimalen Oberflächen</a></li>
<li><a href="../de450020/index.html">Silicon Valley kam zu Schulkindern aus Kansas. Dies führte zu Protesten.</a></li>
<li><a href="../de450024/index.html">Informationen zu Open-Source-Implementierungen der Hash-Funktion GOST R 34.11-2012 und deren Auswirkungen auf die elektronische Signatur von GOST R 34.10-2012</a></li>
<li><a href="../de450026/index.html">Beschleunigungsverschlüsselung: Wir untersuchen den Beschleunigungsmesser eines Android-Geräts am Beispiel der Aufgabe NeoQUEST-2019</a></li>
<li><a href="../de450030/index.html">Ich kann Rift S nicht verwenden und Sie werden es auch nicht schaffen</a></li>
<li><a href="../de450032/index.html">So erstellen Sie ein dunkles Thema, ohne Dinge zu beschädigen: Lernen Sie mit dem Yandex Mail-Team</a></li>
<li><a href="../de450034/index.html">Warum sollten Sie an Hackathons teilnehmen?</a></li>
<li><a href="../de450036/index.html">Summ3r 0f h4ck: Praktikum Digital Security 2019</a></li>
<li><a href="../de450040/index.html">Neues Unternehmen wird OpenJDK 8 und 11 unterstützen - wir verstehen die Situation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>