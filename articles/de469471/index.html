<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßôüèΩ üîù üõÄüèΩ "5 Cent", um √ºber Sorten zu sprechen üíì üêπ ‚ôâÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In Fortsetzung des Themas m√∂chte ich meinen Code teilen, der std::sort() aus den aktuellen Versionen der GNU C ++ Library √ºberholt und (ungef√§hr gibt ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"5 Cent", um √ºber Sorten zu sprechen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469471/"><p> In Fortsetzung des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Themas</a> m√∂chte ich meinen Code teilen, der <code>std::sort()</code> aus den aktuellen Versionen der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GNU C ++ Library</a> √ºberholt und (ungef√§hr gibt es keine genauen Daten) das Ergebnis von "Sort Alexandrescu" mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CppCon 2019 wiederholt</a> . </p><a name="habracut"></a><br><h3 id="usloviya-vozniknoveniya-zadachi">  Aufgabenbedingungen </h3><br><p>  In <code></code> Code (nicht in <code>C++</code> ) war ein angemessener Aufwand erforderlich, um die Sortierung nicht schlechter als <code>std::sort()</code> zu machen, um den Aufwand f√ºr die Verwendung der Bibliothek <code>qsort()</code> .  Verwenden Sie daher Makros anstelle von Vorlagen. <br>  Wenn Sie wiederum die "M√§use" und nicht die "Elefanten" sortieren, sind die Kosten f√ºr <code>qsort()</code> ziemlich hoch: zus√§tzliche Adressarithmetik und ein indirekter Aufruf der Komparatorfunktion. </p><br><h3 id="rezultat">  Ergebnis </h3><br><p>  Nach den verf√ºgbaren Informationen ist <a href="">diese Kombination aus</a> Algorithmen und Implementierungsfunktionen im praktischen Sinne schneller als viele andere Optionen: </p><br><ul><li>  durch die Anzahl der Vergleiche und Verschiebungen (gemessen durch Ersetzen der <code>C++</code> Klasse zum Z√§hlen von Vergleichen und Zuweisungen). </li><li>  durch das Volumen des Maschinencodes (nimmt wenig Platz im Cache ein). </li><li>  durch das Volumen des Quellcodes und seine Transparenz. </li><li>  Bei langen Zufallssequenzen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">betr√§gt</a> die Verst√§rkung je nach <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SORT_THRESHOLD</a> 3-5%. </li><li>  Bis zu 1,5-2-3 mal schneller mit bestellten oder √ºberwiegend geordneten Daten. </li><li>  ein leichter Verlust nur bei sehr kurzen Sequenzen in umgekehrter Reihenfolge. </li></ul><br><p>  Es ist sehr wahrscheinlich, dass diese Option etwas schneller und / oder etwas langsamer ist als die allermeisten Arten, aber herauszufinden, dass dies buchst√§blich eine titanische Arbeit ist, die ich mir nicht leisten kann. </p><br><p>  Es ist interessant, wenn jemand diese Option mit den aktuellen Optionen in Tarantool, PostgreSQL, SQLite und MySQL vergleicht.  Ich hoffe, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Kaamos</a> wird mit seiner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SysBench</a> nicht <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vorbeikommen k√∂nnen</a> . </p><br><h3 id="kak-tam-aleksandresku">  Wie geht es Alexandrescu? </h3><br><p>  Im ersten Kommentar von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">RPG18</a> gab es einen Link zu einem k√ºrzlich erschienenen Auftritt von Andrei Alexandrescu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚ÄûGeschwindigkeit liegt</a> in den K√∂pfen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der Menschen‚Äú</a> , in dem er zu einer ziemlich √§hnlichen Idee f√ºhrt, aber n√§her an das Finale zu heap_sort geht. </p><br><p>  Die Auff√ºhrung schien mir etwas l√§nger zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">dauern</a> (wenn <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Olegbunin</a> mindestens einmal 90 Minuten gegeben h√§tte ...), aber die Zahlen reichen nicht aus.  Insbesondere m√∂chte ich das Sortierverhalten mit zunehmendem <code>N</code> , da eine Erh√∂hung des QuickSort-Abschlussschwellenwerts bei gro√üen Gr√∂√üen zu einer Beschleunigung und bei kleinen zu einer Verz√∂gerung usw. f√ºhrt. </p><br><p>  Nach den von Alexandrescu angef√ºhrten Zahlen ergibt die beschriebene Option jedoch pl√∂tzlich eine √§hnliche Beschleunigung.  Bis ich jedoch den Code gefunden habe, der Alexandrescu in seiner fertigen Form gezeigt wurde, um "zu nehmen und zu vergleichen", und es keine Zeit gibt, per Video zu codieren (schreiben, wenn Sie ihn finden oder tun). </p><br><h3 id="ideynaya-storona">  Ideologische Seite </h3><br><p>  Die theoretische und ideologische Seite des "Algorithmus" ist recht einfach: </p><br><ol><li>  F√ºr nicht kurze Sequenzen verwenden wir QuickSort mit allen akzeptablen Optimierungen: <br><ul><li>  Nicht rekursiv unter Verwendung des internen Positionsstapels auf Zeigern. </li><li>  Als unterst√ºtzendes Element verwenden wir den Median des ersten, mittleren und letzten Elements. </li><li>  Wir sortieren keine kleinen Portionen, wir √ºberlassen es ShellSort. </li><li>  Nach dem Teilen legen wir immer den gr√∂√üten Teil auf den Stapel, daher kann der Stapel nicht tiefer als <code>Log2(N)</code> . </li></ul></li><li>  Daten mit ShellSort hinzuf√ºgen und sortieren: <br><ul><li>  Mindestanzahl von Durchg√§ngen. </li><li>  Der Schritt beim ersten Durchgang korreliert mit der maximalen Gr√∂√üe des unsortierten Segments. </li><li>  Insgesamt nur zwei Durchg√§nge mit den Schritten 8 und (unweigerlich) 1. </li></ul></li><li>  Mit ShellSort k√∂nnen Sie den Exit-Schwellenwert f√ºr QuckSort relativ sicher erh√∂hen.  Als Ergebnis haben wir eine Kombination aus einer der besten QuickSort-Optionen mit Einsparungen aufgrund eines fr√ºheren Exits und einer etwas schnelleren Vorsortierung. </li></ol><br><p>  Es ist zu beachten, dass Sie abh√§ngig von der Prozessorarchitektur und den Anwendungsbedingungen die Verst√§rkung bei langen Sequenzen um bis zu 10-15% erh√∂hen k√∂nnen, indem Sie <code>SORT_THRESHOLD</code> innerhalb von <code>SORT_THRESHOLD</code> w√§hlen.  Dies verlangsamt jedoch die Verarbeitung von Sequenzen in umgekehrter Reihenfolge und in deren N√§he. <br>  Dies ist jedoch ein guter Bonus, wenn Sie verstehen, dass die umgekehrte Reihenfolge in Ihren Daten unwahrscheinlich ist, oder wenn Sie solche F√§lle kosteng√ºnstig erkennen und eine Verzweigung mit einem kleinen <code>SORT_THRESHOLD</code> ausf√ºhren <code>SORT_THRESHOLD</code> . </p><br><blockquote>  PS <br>  Die beschriebene <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sortieroption wurde</a> f√ºr mein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">libmdbx-</a> Projekt (schnell eingebettete Schl√ºsselwertdatenbank mit ACID) " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√ºberarbeitet</a> ", in dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">neulich die README-</a> und API-Beschreibung aktualisiert (tats√§chlich neu geschrieben) wurden.  Daher bin ich sowohl f√ºr die Korrektur von Tippfehlern als auch f√ºr Ratschl√§ge und Vorschl√§ge dankbar.  Selbst ist in der Regel kein sichtbarer Mangel an Informationen. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de469471/">https://habr.com/ru/post/de469471/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de469459/index.html">Anschlie√üen von IoT-Ger√§ten in der Smart City</a></li>
<li><a href="../de469461/index.html">"Zu den Sternen": Anti-Kosmische "Apokalypse heute"</a></li>
<li><a href="../de469463/index.html">Trends und Prognosen in der Verarbeitung nat√ºrlicher Sprache</a></li>
<li><a href="../de469465/index.html">Initialisierung in modernem C ++</a></li>
<li><a href="../de469467/index.html">C ++ vs C #</a></li>
<li><a href="../de469475/index.html">Der Aufstieg und Fall von Flash, dem nervigen Plugin, das das moderne Web gepr√§gt hat</a></li>
<li><a href="../de469477/index.html">Apple ist an der Zeit, den Vergleich von iPad und PC einzustellen</a></li>
<li><a href="../de469479/index.html">Woher kommt die Quantenwahrscheinlichkeit?</a></li>
<li><a href="../de469491/index.html">Interaktion mit dem Asterisk-Server √ºber eine Java-Anwendung</a></li>
<li><a href="../de469493/index.html">Machen Sie C ++ wieder gro√üartig! .. in Tula</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>