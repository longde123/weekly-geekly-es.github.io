<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöö üòø ‚ùÑÔ∏è Segundo lugar en la historia de la Copa AI de Rusia 2018: CodeBall ü§∞üèª üßëüèª üßïüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos! 

 Soy un estudiante de tercer a√±o, y al comienzo de mis estudios en la universidad aprend√≠ sobre la Copa Ai de Rusia , y m√°s tarde la M...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Segundo lugar en la historia de la Copa AI de Rusia 2018: CodeBall</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/440924/"><img src="https://habrastorage.org/webt/af/ae/ow/afaeownubljxqa1m35toussj7si.jpeg" align="left" width="220">  Hola a todos! <br><br>  Soy un estudiante de tercer a√±o, y al comienzo de mis estudios en la universidad aprend√≠ sobre la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Copa Ai de Rusia</a> , y m√°s tarde la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mini Copa Ai</a> , competiciones de inteligencia artificial, y comenc√© a participar activamente en ellas, mostrando buenos resultados.  Esta vez, RAIC entr√≥ directamente en la sesi√≥n, por lo que nada podr√≠a detenerme :) Y hoy quiero contarles c√≥mo logr√© tomar el segundo lugar. <br><br>  Las reglas de la competencia se pueden encontrar en el sitio web de la competencia, as√≠ como en este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> .  Enlace a mi perfil: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">russianaicup.ru/profile/TonyK</a> . <br><a name="habracut"></a><br>  Por un lado, la tarea de este a√±o fue similar a las tareas de a√±os anteriores, y parec√≠a que la soluci√≥n ideol√≥gica ser√≠a muy similar a las anteriores (Agar IO y Mad Cars);  despu√©s de aproximadamente una semana me aburrir√© y me cansar√© de participar. <br><br>  Por otro lado, entend√≠ que hab√≠a aprendido mucho en competencias anteriores con f√≠sica y ahora puedo aplicar esta experiencia, no pisar el viejo rastrillo y, al final, mostrar un mejor resultado. <br><br>  En cuanto a la visualizaci√≥n, decid√≠ que tendr√≠a suficientes proyecciones en diferentes ejes, o mostrar√≠a en cierto √°ngulo.  Pero estaba muy equivocado, y si no fuera por el visualizador m√°gico integrado en Local Runner, que los organizadores agregaron m√°s tarde, tendr√≠a que tomar prestados visualizadores 3D de los amables participantes que pasaron la fase de prueba beta escribi√©ndolos y ponerlos en el dominio p√∫blico. <br><br>  Esta vez, el pseudoc√≥digo del simulador estaba disponible, lo que igualaba las posibilidades de aquellos que sab√≠an revertir la f√≠sica y escribir un bot genial, y aquellos que no pod√≠an revertir la f√≠sica, pero que tambi√©n pod√≠an escribir un bot fuerte.  Creo que fue una buena decisi√≥n de los organizadores. <br><br>  Lo primero que hice fue reescribir el c√≥digo del simulador de la documentaci√≥n en C ++, y luego med√≠ el tiempo del simulador en mi computadora anterior y en el servidor.  En el segundo caso, result√≥ el doble de r√°pido, aunque esto era de esperar.  Calcul√© cu√°ntas veces y a qu√© profundidad podr√≠a simular.  Inmediatamente qued√≥ claro que uno tendr√≠a que olvidarse de la simulaci√≥n honesta de 100 microtics (en el servidor, una marca de f√≠sica se dividi√≥ en 100 "microtics"), y ser√≠a necesario resolver problemas con precisi√≥n en formas indirectas. <br><br>  Debido al hecho de que el caparaz√≥n se organiz√≥ de tal manera que la solicitud de acci√≥n para cada robot se llama por separado en cada tic, implement√© una l√≥gica simple: en el momento en que se le solicita una acci√≥n al primer robot, el programa encuentra acciones para todos los robots, recuerda y da la acci√≥n del primero, y cuando la acci√≥n se le pide al resto de los robots, devuelve lo que recordaba. <br><br>  Estaba impaciente por enviar el bot a la batalla pronto.  Decid√≠ generar trayectorias aleatorias y elegir la mejor.  Al mismo tiempo, quer√≠a que el conjunto generado hiciera posible realizar algunas acciones complejas, por ejemplo, rodear la pelota desde el lado derecho y luego golpear. <br><br>  Una trayectoria es un plan de acci√≥n.  Inicialmente, la trayectoria fue esta: <br><br><ul><li>  establecer la acci√≥n en un √°ngulo aleatorio; </li><li>  en un tic aleatorio de la trayectoria, cambie el √°ngulo a otro aleatorio; </li><li>  saltar una vez a un tic aleatorio de la trayectoria. </li></ul><br>  Tal espacio de trayectorias era una buena opci√≥n para la b√∫squeda aleatoria con el n√∫mero de simulaciones que yo (y, probablemente, todos en ese momento) pod√≠a pagar con el simulador en bruto de la documentaci√≥n.  A menudo se adivinaron buenas trayectorias, y dado que se conserv√≥ la mejor trayectoria de la marca anterior, la b√∫squeda se extendi√≥ en el tiempo. <br><br>  Todos los objetos fueron colocados en el simulador: mis robots, los robots del oponente y la pelota.  La evaluaci√≥n fue la m√°s simple: la suma de las distancias desde la pelota hasta la porter√≠a enemiga en todos los puntos de la trayectoria y los grandes valores para la porter√≠a para alguien.  Profundidad de simulaci√≥n 200 ticks.  Los enemigos se predicen a su √∫ltima velocidad. <br><br><img src="https://habrastorage.org/webt/6p/n1/-f/6pn1-ft3htl0ohqjsqkcb3dvcfm.png"><br><br>  Inmediatamente agregu√© una acci√≥n separada para el segundo robot, as√≠ como la cancelaci√≥n forzada del salto, si durante el vuelo no hubo contacto con la pelota, para no saltar en vano.  Al mismo tiempo, mis robots superaron la mitad del tiempo y conoc√≠an la mejor trayectoria del otro.  Ahora han comenzado los primeros <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">goles</a> para oponentes fuertes, que ya ten√≠an un portero y una l√≥gica m√°s complicada. <br><br>  Result√≥ que no consider√© la distancia a las puertas enemigas, sino hasta el punto del centro del campo (mezclado <code>x</code> <code>z</code> ), pero esto no afect√≥ la estrategia de ninguna manera.  Es bueno que despu√©s de la correcci√≥n no haya empeorado.  Esto sucede a menudo cuando escribes un bot. <br><br>  Luego agreg√≥ al portero cambiando el marcador: impuso una penalizaci√≥n por el bal√≥n en mi mitad del campo y por el gol para m√≠, y tambi√©n calcul√≥ la distancia del portero a mi gol.  Ahora el portero se par√≥ en la porter√≠a y noque√≥ la pelota.  Una optimizaci√≥n importante fue que si el bal√≥n no est√° en mi mitad del campo, el 90% del tiempo se le da al atacante y el 10% del portero, de lo contrario, el 50%. <br><br>  La evaluaci√≥n de las trayectorias de los robots en cada punto se multiplic√≥ por 0.9 ¬∞ de profundidad, deduje este coeficiente emp√≠ricamente, como todo el puntaje.  Los valores de los coeficientes no cambiaron durante mucho tiempo seg√∫n el principio de "funciona, est√° bien". <br><br>  Comenz√≥ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">a ganar</a> los primeros puestos y a subir r√°pidamente en el ranking.  La fase beta ha terminado. <br><br>  Durante mucho tiempo no tuve ideas sobre la estrategia, las versiones fueron notables para ediciones menores, correcciones de errores (result√≥ que consider√© la fuerza de rebote promedio como <code>(MAX_HIT_E - MIN_HIT_E) / 2</code> ), y tambi√©n <code>(MAX_HIT_E - MIN_HIT_E) / 2</code> el simulador.  El n√∫mero de trayectorias que logr√© resolver por tick jug√≥ un papel importante, as√≠ que me concentr√© en la optimizaci√≥n.  Se quitaron los senos paranasales y las ra√≠ces cuadradas.  Se agreg√≥ una velocidad cero improbable en la trayectoria antes o despu√©s de cambiar el √°ngulo.  Puntaje ligeramente cambiado. <br><br>  La versi√≥n 16 se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mantuvo durante</a> mucho tiempo en la parte superior de la tabla, pero una semana despu√©s del final de las pruebas beta, como se esperaba, muchos comenzaron <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">a ganar</a> . <br><br><img src="https://habrastorage.org/webt/nd/mi/1v/ndmi1vn6qa2rshoih_ufarabuj0.jpeg" align="left">  Trat√© de ajustar la trayectoria con la suma de las distancias m√°s cercanas del enemigo a la pelota, y obtuve un comportamiento muy interesante.  Mis robots, cuando no pod√≠an golpear de manera rentable, a menudo comenzaron a bloquear enemigos, rompiendo sus trayectorias y evitando que corrieran hacia la pelota, a veces result√≥ con mucho √©xito e insidiosa. <br><br>  Luego, arregl√© la precisi√≥n mientras saltaba.  Si alguien salta sobre la marca actual, primero hacemos 1 microtik dos veces, y luego los 98 microtics restantes, y luego prob√© el coeficiente heur√≠stico para compensar la p√©rdida de precisi√≥n en el caso cuando en algunos de los microtics se alcanza la velocidad m√°xima.  Las mejoras fueron de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gran</a> ayuda y hubo resultados m√°s precisos y precalculados. <br><br>  Tambi√©n en este momento comenc√© a mostrar en el sitio, entre la informaci√≥n de depuraci√≥n, el n√∫mero de iteraciones que logr√© completar.  Hubo 250 de ellos en 200 ticks, en total tuve 50,000 ticks de simulaciones durante el tiempo asignado para mi estrategia por tick. <br><br>  Luego encend√≠ las trayectorias de mutaci√≥n.  Esto mejor√≥ enormemente la estrategia.  En aproximadamente la mitad de todas las iteraciones, no se utiliz√≥ la nueva trayectoria, sino la mejor con valores ligeramente modificados, lo que permiti√≥ converger en alg√∫n lugar, por ejemplo, a un m√°ximo local.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Result√≥</a> ser una estrategia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">s√≥lida</a> en ese momento, que decid√≠ dejar hasta la primera ronda, aunque todav√≠a faltaban dos semanas para que finalizara.  Pero despu√©s de un par de d√≠as dej√≥ de dominar la cima. <br><br>  Pas√© un tiempo alej√°ndome de la aleatoriedad completa, por ejemplo, intent√© con una b√∫squeda ternaria para encontrar el √°ngulo en el que el robot necesita acelerar para golpear la pelota.  Pero esto no siempre funcion√≥, y no descubr√≠ c√≥mo desarrollar m√°s esta idea. <br><br>  Mis robots sab√≠an c√≥mo saltar solo una vez por trayectoria, pero cuando estaban en el suelo y quer√≠an saltar, y luego golpear la pelota en el aire, no sab√≠an que cuando tocas la pelota puedes saltar una segunda vez, golpeando as√≠ la pelota con fuerza, y no solo empuj√°ndolo. <br><br>  Esto se solucion√≥, y ahora el simulador, cuando not√≥ que alguien pod√≠a golpear la pelota con el tic actual, hizo retroceder un tic y oblig√≥ al robot a saltar con la m√°xima fuerza.  Ahora, parado en el suelo, el robot sab√≠a que empujar√≠a del suelo y no solo empujar√≠a, sino que golpear√≠a la pelota con un segundo salto. <br><br>  Entend√≠ que cuando se agregaban nitro y otro robot, todo se doblar√≠a debido a la falta de iteraciones.  Tambi√©n en diferentes lugares tuve grandes problemas con la precisi√≥n, que no sab√≠a c√≥mo resolver.  No vi ninguna <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">soluci√≥n anal√≠tica</a> ni ninguna forma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">inteligente de gesti√≥n</a> . <br><br>  Necesitaba una estrategia completamente nueva o un simulador m√°gico que combine precisi√≥n y velocidad, y en la etapa final me proporcionar√° suficientes trayectorias para repetir.  No se me ocurri√≥ una nueva estrategia (sorprendentemente), y comenc√© a trabajar en un simulador. <br><br><h2>  "Simulador inteligente" </h2><br>  Lo primero que quer√≠a tratar con precisi√≥n. <br><br>  Simul√© 100 Mikrotiks a la vez, aunque se produjo una colisi√≥n, o alg√∫n otro evento, en uno de estos cien Mikrotiks.  Si ignora esto, los objetos colisionan m√°s tarde que en la realidad (siempre en el cent√©simo microtics) y, por lo tanto, rebotan de manera diferente.  Hacia el final de la trayectoria, este peque√±o error puede convertirse en una gran inexactitud.  Por ejemplo, creemos que la pelota golpea la porter√≠a enemiga, pero en realidad rebotar√° <s>en la nuestra</s> desde el poste. <br><br>  Es f√°cil ver que en una situaci√≥n en la que se produce una colisi√≥n en el <code>i</code> √©simo microtics, en lugar de contar los 100 microtics, es suficiente contar los primeros <code>i - 1</code> microtics a la vez (de hecho, el paso de f√≠sica se considera durante un cierto tiempo <code>dt</code> , y ahora este tiempo ser√° <code>t * (i - 1)</code> , donde <code>t</code> es el tiempo correspondiente a un Mikrotik).  Ahora necesita simular 1 micr√≥tico ( <code>dt = t</code> ) y los restantes <code>100 - i</code> microtics.  Obtenemos exactamente el mismo resultado en solo tres simulaciones en lugar de cien.  El √∫nico problema es que no sabemos en qu√© microtics se producir√° la colisi√≥n. <br><br>  Al estar en un tic fijo de la simulaci√≥n, podemos hacer cualquier n√∫mero de microtics de 1 a 100 en una simulaci√≥n y ver si hay una colisi√≥n o no.  En este caso, la imagen ser√° as√≠: al principio no hay toque, pero a partir de un cierto n√∫mero de micr√≥fonos y hasta cien hay un toque.  Excepto en casos muy raros, cuando no hay contacto al principio, luego hay un toque en alg√∫n segmento de los microtics, y luego nuevamente no hay contacto. <br><br>  Por lo tanto, es posible encontrar el Mikrotik en el que ocurri√≥ la colisi√≥n utilizando una b√∫squeda binaria de 10 simulaciones en el peor de los casos.  Y como se describi√≥ anteriormente, para tres simulaciones, puede obtener el estado del mundo a trav√©s de 100 microtics con perfecta precisi√≥n. <br><br>  De hecho, hubo varios otros tipos de eventos adem√°s de una colisi√≥n, y varios podr√≠an ocurrir durante un tic, por lo que solo el primer evento se localiz√≥ con una dicotom√≠a, luego el segundo evento se ubic√≥ en el sufijo restante de la dicotom√≠a del tic, y as√≠ sucesivamente.  Por lo tanto, se consider√≥ una marca como segmentos de varias microtics por simulaci√≥n, hasta que se contaron todos los eventos. <br><br>  Entonces los problemas se resolvieron con precisi√≥n.  Pero debido al hecho de que hab√≠a 5 objetos en la simulaci√≥n, y seg√∫n las reglas finales, deber√≠a haber habido 7, y todos ellos a menudo se bloquearon, en promedio las dicotom√≠as fueron llamadas con demasiada frecuencia, y esto funcion√≥ prohibitivamente por mucho tiempo.  Por lo tanto, proced√≠ a la segunda etapa del desarrollo del simulador: optimizaci√≥n. <br><br>  Obviamente, cuando se supera la trayectoria de uno de los robots, todos los dem√°s objetos en los que este robot no se estrella se mueven siempre de la misma manera.  Est√° claro que no es necesario volver a calcular sus estados con un simulador, por ejemplo, calcular colisiones pesadas con la arena. <br><br>  Antes de ordenar las trayectorias para un robot en particular, es suficiente simular honestamente y recordar para los objetos restantes sus estados en todo momento, y luego simplemente tomar estos estados de la memoria.  Llamamos a tales objetos est√°ticos, y un robot para el que se ordena la trayectoria es din√°mico. <br><br>  Si de repente alg√∫n objeto din√°mico influye (tiene una colisi√≥n) con uno est√°tico, agregamos este objeto est√°tico a los din√°micos hasta el final de la simulaci√≥n de la trayectoria actual.  De hecho, en la etapa de almacenamiento de estados para objetos est√°ticos, se construye un gr√°fico de influencias entre s√≠ y luego se utiliza para transferir correctamente objetos est√°ticos a objetos din√°micos.  Por ejemplo, un robot enemigo golpe√≥ la pelota, y generamos un camino donde derribamos al robot enemigo antes de que golpee la pelota.  Ahora la pelota volar√° m√°s lejos, y durante la simulaci√≥n, cuando se agregue el robot enemigo a los objetos din√°micos, es necesario tener en cuenta que la pelota se debe agregar a los objetos din√°micos un poco m√°s tarde, en la marca en la que el robot enemigo golpear√≠a la pelota si no interfiri√©ramos con ella. .  En el caso general, esto se hace de forma recursiva de acuerdo con el gr√°fico de influencia. <br><br><img src="https://habrastorage.org/webt/ey/fr/cj/eyfrcjzg0s28o3fjqgberru64bm.jpeg"><br><br>  Ahora el simulador no calcula todos los objetos, sino solo los din√°micos, y esto, en promedio, es un objeto y medio en lugar de siete, y las dicotom√≠as largas se usan con mucha menos frecuencia.  Result√≥ muy r√°pido y ya no tiene que sufrir en la final con robots adicionales, ¬°genial! <br><br>  La 26¬™ versi√≥n con un nuevo simulador y una profundidad de simulaci√≥n reducida de 200 a 100 se envi√≥ a jugar en la primera ronda.  Pero conten√≠a algunos errores, y no hab√≠a una ventaja obvia. <br><br>  El √∫ltimo problema con la precisi√≥n permaneci√≥: movimiento a lo largo del redondeo de la arena.  En este caso, para lograr una precisi√≥n absoluta, es necesario contar honestamente 100 microtics.  La soluci√≥n fue sorprendentemente simple: saltar siempre desde todas las superficies excepto el piso.  Sin redondeo, no hay problema. <br><br>  Adem√°s, durante alg√∫n tiempo optimic√©, debat√≠ y, al mirar juegos con estrategias m√°s inteligentes, recog√≠ nuevas constantes de puntuaci√≥n.  Se ha vuelto mucho mejor, la estrategia se ha elevado en el ranking y la versi√≥n 37 ha logrado el mejor resultado de todas mis estrategias en el sandbox todo el tiempo antes de la final. <br><br>  A partir de este momento, alquil√© una m√°quina de 32 n√∫cleos en un servicio en la nube para ejecutar mis estrategias entre s√≠, y comenc√© a experimentar mucho con todo en una fila.  Cambi√≥ las constantes.  Trat√© de usar mi propia estrategia para predecir las acciones del enemigo, pero esto no ayud√≥ incluso en juegos contra mi estrategia. <br><br>  Al resolver la ecuaci√≥n, aprendi√≥ a calcular la √∫ltima acci√≥n del enemigo y comenz√≥ a predecir su comportamiento posterior.  Se agreg√≥ soporte para nitro: se selecciona un punto aleatorio en la superficie de la esfera para la acci√≥n.  Hizo muchas ediciones menores.  Pero no hubo mucho progreso.  Al comienzo de la segunda ronda, 4-5 tops me estaban ganando constantemente <br><br>  A√∫n as√≠, no me desespere.  Ten√≠a dos mejoras que planeaba implementar antes de la final, y esperaba que mejorar√≠an enormemente la estrategia.  Decid√≠ no abordarlos hasta que el sandbox comenzara de acuerdo con las reglas finales, y en su lugar pas√© un tiempo depurando y optimizando lo que ya se hizo para minimizar las posibilidades de errores malignos en la √∫ltima semana, cuando cada minuto cuenta. <br><br>  La √∫ltima semana antes de que comenzara la final. <br><br>  La primera mejora que hice fue esta.  En los partidos, en el caso general, la mayor√≠a de mis problemas, y cualquier otra estrategia surge cuando el oponente toma posesi√≥n de la pelota.  De alguna manera lo golpea, pasa, en general, controles.  Predecir la trayectoria de la pelota y planificar m√°s acciones rentables en este caso es imposible, queda por hacer "lo que sea" hasta que el oponente cometa un error y transfiera el control de la pelota a mis robots.  Y despu√©s de esto, debes tratar de no realizar acciones que puedan conducir al hecho de que la pelota volver√° a estar con el enemigo. <br><br>  En otras palabras, al momento de planificar la trayectoria, quiero tener en cuenta las posibles posiciones de los oponentes y tratar de no golpear la pelota all√≠.  Decid√≠ usar un campo potencial de cuatro dimensiones (las primeras tres dimensiones son las coordenadas, el lado de los cubos es igual al di√°metro del robot y la cuarta dimensi√≥n es el tiempo), que completar√©, generando trayectorias enemigas aleatorias. <br><br>  M√°s tarde, al evaluar la trayectoria de mi robot, calcul√© la suma en todos los cubos que cruzaron la pelota en los puntos correspondientes en el tiempo, y la multipliqu√© por un coeficiente que supera todos los dem√°s valores en la puntuaci√≥n.  Es decir, el campo potencial se tuvo en cuenta con la m√°xima prioridad despu√©s del objetivo.  Tambi√©n permiti√≥ eliminar enemigos de la simulaci√≥n despu√©s de los primeros 30 tics (el enemigo pod√≠a hacer cualquier cosa durante este tiempo mientras estaba en el suelo, y tales pron√≥sticos distantes e inexactos solo interfer√≠an) si no estaban en el aire (parec√≠a que nadie estar√≠a en el aire aire para cambiar la trayectoria de una manera compleja usando nitro). <br><br>  Al generar trayectorias aleatorias para el enemigo, fue posible averiguar el tiempo m√≠nimo que le tom√≥ golpear la pelota.  Este valor fue √∫til para resolver el problema con los primeros saltos de mi portero fuera de la puerta.  Me marcaron muchos goles porque mi portero salt√≥ temprano y se volvi√≥ incontrolable en el aire.  Despu√©s de eso, el enemigo predijo f√°cilmente c√≥mo volar√≠a mi portero y, si pod√≠a, cambi√≥ la trayectoria del bal√≥n antes de que mi portero lo alcanzara.  Ahora cancel√© el salto del portero si el enemigo puede golpear la pelota antes de lo que planea hacer mi portero. <br><br><img src="https://habrastorage.org/webt/00/p5/e5/00p5e59dlcqljg9ags7vttdyohy.jpeg"><br><br>  Result√≥ que, sin un da√±o significativo a la estrategia, es posible calcular la trayectoria no con cada tic, sino a trav√©s de una.  Al reducir a la mitad el tiempo de ejecuci√≥n, dupliqu√© el n√∫mero promedio de iteraciones.  Un poco de magia sucede aqu√≠.  Parece que si contamos las trayectorias de cada segundo tic y duplicamos el n√∫mero de iteraciones, entonces el n√∫mero promedio de iteraciones no cambiar√°.  Pero, de hecho, el simulador contar√° dos ticks (200 microtiks) por simulaci√≥n en lugar de uno.  Y las trayectorias ya ser√°n 50, no 100 de profundidad, por eso el n√∫mero promedio de iteraciones se duplicar√°. <br><br>  Permaneci√≥ un par de d√≠as antes de la final.  Aunque mi estrategia comenz√≥ a conceder menos goles debido al buen control del bal√≥n, no comenc√© a anotar mejor.  Por lo tanto, tuve que motivarla con un coeficiente cuando pronto para el gol de un oponente.  Cuanto m√°s r√°pido se marque un gol, mayor ser√° la proporci√≥n.  Y este coeficiente est√° creciendo mucho para superar el resto de la puntuaci√≥n y no tener miedo del campo potencial, cuando, por ejemplo, quedan 10 marcas antes de la puntuaci√≥n. <br><br>  Se agreg√≥ un c√°lculo de d√≥nde el enemigo est√° enviando nitro.  Esto se hizo usando la fuerza bruta con un cierto paso.  Adem√°s, el portero comenz√≥ a reponer las reservas de nitro, cuando nada amenaza mi objetivo. <br><br>  La segunda mejora importante fue usar minimax.  Si el uso de diferentes fuerzas de impacto para el enemigo durante la construcci√≥n de trayectorias est√°ticas afecta el vuelo de la pelota, entonces durante la b√∫squeda se consideraron ambas opciones, con la fuerza de impacto m√°xima y m√≠nima del enemigo, y se tom√≥ el m√≠nimo de las estimaciones. <br><br>  En la final, tuve 7 opciones para trayectorias cuando el robot estaba en el suelo: <br><br><ul><li>  2 esquinas sin salto; </li><li>  2 esquinas con un salto; </li><li>  2 √°ngulos con salto y velocidad nitro codireccional; </li><li>  2 √°ngulos con un salto y nitro compensa la gravedad; </li><li>  1 esquina con un salto; </li><li>  1 √°ngulo con salto y velocidad nitro codireccional; </li><li>  1 esquina con un salto y nitro compensa la gravedad (no se usa debido a un error, se nota al escribir un art√≠culo). </li></ul><br>  y dos opciones cuando el robot est√° en el aire: <br><br><ul><li>  nitro a un punto aleatorio en la superficie de la esfera y fuerza de impacto aleatorio; </li><li>  Fuerza de impacto aleatorio. </li></ul><br>  Hubo competencia unas horas antes de la final, pero mi estrategia fue claramente mejor.  Parec√≠a que todo ya estaba hecho, que no hab√≠a dormido m√°s de un d√≠a y que nada depend√≠a de m√≠.  Quedaba por ver.  Dos horas antes de la final, Andrei envi√≥ su grial reci√©n horneado y gan√≥ con √©xito el primer lugar.  La historia de su participaci√≥n se puede encontrar aqu√≠: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">habr.com/en/post/440398</a> . <br><br>  En el intervalo entre las etapas de la final, agregu√© un campo potencial empujando el bal√≥n lejos de mi objetivo, independientemente de todo lo dem√°s, y esto, como me pareci√≥, me igualaba con Andrei.  Pero ya era tarde, porque perd√≠ 7 puntos en la primera mitad, e incluso 3/3 victorias en la segunda mitad no fueron suficientes. <br><br>  RAIC es una competencia dif√≠cil y se otorgan premios a los participantes muy, muy dif√≠cil.  Cuando un participante est√° en la cima de la mesa, para √©l esto no es solo entretenimiento, es una lucha.  Hay muchas cosas peque√±as a tener en cuenta al escribir una estrategia s√≥lida.  Cada decisi√≥n tomada puede afectar significativamente el resultado. <br><br>  El c√≥digo fuente de la estrategia estar√° disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/440924/">https://habr.com/ru/post/440924/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../440914/index.html">Perd√≠ la fe en la industria, me quem√©, pero el culto a la herramienta me salv√≥</a></li>
<li><a href="../440916/index.html">Radiaci√≥n: unidades</a></li>
<li><a href="../440918/index.html">Semana de la seguridad 08: pirateo de VFEMail en vivo</a></li>
<li><a href="../440920/index.html">Implementaci√≥n de la interfaz de usuario en iOS: mejor, m√°s r√°pido y escala</a></li>
<li><a href="../440922/index.html">C√≥mo funciona Level Flow en Uncharted 4 y The Last Of Us</a></li>
<li><a href="../440928/index.html">Determine su edad biol√≥gica en el perfil</a></li>
<li><a href="../440930/index.html">Realic√© cien entrevistas, me negu√© a cientos de personas, y solo entonces aprend√≠ a entrevistar</a></li>
<li><a href="../440932/index.html">Un poco sobre inteligencia empresarial de TI</a></li>
<li><a href="../440938/index.html">¬øPor qu√© Google necesitaba un gr√°fico de conocimiento?</a></li>
<li><a href="../440940/index.html">Redux: revisi√≥n de la l√≥gica y acciones del reductor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>