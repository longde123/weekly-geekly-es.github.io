<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí® ‚õ≤Ô∏è üõ°Ô∏è Das einfachste Arduino-Spiel mit einem 1602-Display - Teil 1 üó®Ô∏è üçß üÜì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das ist es, was wir bekommen m√ºssen, nun, er wei√ü immer noch, wie man springt, geht und die b√∂sen Kakteen schl√§gt, die ihn angreifen, aber wir werden ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Das einfachste Arduino-Spiel mit einem 1602-Display - Teil 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424859/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ad/t5/fh/adt5fhpeoqsk4ulxwnrx-lihi60.gif"></div><br>  Das ist es, was wir bekommen m√ºssen, nun, er wei√ü immer noch, wie man springt, geht und die b√∂sen Kakteen schl√§gt, die ihn angreifen, aber wir werden Schritt f√ºr Schritt dazu kommen :) <br><br><h1>  TEIL 1 Grundlagen </h1><br>  Ich bestellte mir ein Arduino, "so lala Spielzeug", dachte ich, ein kleines Kit (zum Testen), das ich sp√§ter bereute.  Ich wollte das Potenzial freisetzen, aber aufgrund des Mangels an zus√§tzlichen Modulen funktionierte dies nicht. Ich musste experimentieren, das Arduino in das Sicherheitssystem zerhacken und beobachten, wie die Sensoren ihre Arbeit erledigen. Dann entschied ich mich, einen akustischen Alarm auszul√∂sen (mit dem praktischen Quietscher aus dem Kit), also entw√∂hnte ich die Hunde laut oder pl√∂tzlich bellen :) und dann erreichten meine H√§nde das Display 1602. "Hmm ... das ist ein echtes Display", dachte ich, aber ich war entt√§uscht herauszufinden, dass er fast die H√§lfte aller Kontakte auf dem Arduino selbst isst.  Ich kramte herum und fand ein seltsames Board im "i2C" -Kit und es war sehr verd√§chtig!  Dass die Anzahl der L√∂cher mit der Anzahl der Zuh√§lter auf dem Display √ºbereinstimmte.  "Hmm, nicht einfach ...", dachte ich und beschloss, sie zu l√∂ten.  Wenig sp√§ter stellte ich fest, dass ich das Richtige getan hatte und mein Display nur noch zwei Kan√§le frisst.  Er begann zu studieren, was f√ºr ein Display es war und was er tun konnte.  Nachdem ich genug Material studiert hatte, fand ich heraus, dass die Anzeige rein textuell ist, aber siehe da!  Es kann 8 neue Zeichen mit Abmessungen von 5 x 8 Pixel verarbeiten.  Dann lass uns anfangen, ein Spiel zu schreiben!  Zuerst musst du herausfinden, was f√ºr ein Spiel es sein wird. Ich habe beschlossen, es wie ein Dinosaurier-Gugl-Chrom aussehen zu lassen, aber mit ein paar Chips sozusagen f√ºr den Anfang denke ich, dass es funktionieren wird :) <a name="habracut"></a>  Aber Sie m√ºssen immer noch etwas verwalten, und Multi-Button musste nicht lange nachdenken.  Ich habe die IR-Fernbedienung aus dem Kit genommen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1cc/b5e/3ea/1ccb5e3ea03b39d52759980be2176c40.jpg" alt="Bild"><br><br>  ‚ÄûDas ist der Joystick‚Äú, murmelte ich misstrauisch und dachte √ºber die Verz√∂gerung der Fernbedienung, die Klarheit des IR-Sensors und allgemein √ºber die Angemessenheit dieser Idee nach, aber es gab nichts zu tun, ich konnte Arduino trainieren, mit der Tastatur f√ºr den Computer zu arbeiten, aber es war wirklich faul um es zu tun.  Also begann ich, die Fernbedienungscodes aufzuschreiben, damit ich in Zukunft damit arbeiten konnte.  Der Code f√ºr den Mikrocontroller ist hier am einfachsten: <br><br><pre><code class="hljs pgsql">"--------------------------------------------------------------------------" //   IRremote #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;IRremote.h&gt; decode_results results; IRrecv irrecv (A0); //      <span class="hljs-type"><span class="hljs-type">void</span></span> setup () { <span class="hljs-type"><span class="hljs-type">Serial</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">begin</span></span>(<span class="hljs-number"><span class="hljs-number">9600</span></span>); //   com  irrecv.enableIRIn(); //    } <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> () { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (irrecv.decode( &amp;results )) //      ,    { <span class="hljs-type"><span class="hljs-type">Serial</span></span>.println( results.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>, HEX ); //          irrecv.resume(); //            } } "--------------------------------------------------------------------------"</code> </pre> <br>  Der Signalcode der Fernbedienung sieht folgenderma√üen aus: ‚ÄûFF18E7‚Äú Ihre Codes werden nat√ºrlich anders sein, aber Sie sollten das Wesentliche verstehen. Wenn Sie diesen Code ansprechen, f√ºgen wir am Anfang ‚Äû0x‚Äú hinzu und erhalten (0xFF18E7). <br><br>  Nachdem Sie dies in Arduino gef√ºllt und wie gew√ºnscht angeschlossen haben, k√∂nnen Sie die Aufzeichnung √ºber den Protokollport des Tsiforka starten, nachdem Sie auf die Schaltfl√§chen des IR-Ger√§ts geklickt haben.  Aber hier m√∂chte ich Ihnen nur erkl√§ren, wie Sie den IR-Sensor anschlie√üen. <br><br>  Wenn wir auf den Sensor schauen, sehen wir drei Beine, links (analoges Signal), mittel (Masse), rechts (plus 5 V). <br><br><img src="https://arduino-info.wikispaces.com/file/view/IR-pinout.jpg/264668350/IR-pinout.jpg" alt="Bild"><br><br>  Da ich noch keine Ahnung hatte, wie das √ºberhaupt funktionieren w√ºrde, begann ich mit Experimenten.  Zuerst habe ich den Skizzencode Schritt f√ºr Schritt gemacht, durch (Verz√∂gerung (Zeit)) zuerst habe ich nicht vermutet, dass dies eine schlechte Idee war :) <br>  Was ist der Hauptpfosten?  Dieser Mikrocontroller kann kein Multitasking ausf√ºhren.  Er betrachtet den Code von oben nach unten, durchl√§uft alle Zweige und Funktionen und beginnt nach Abschluss erneut.  Und jetzt, wenn wir viele dieser ‚ÄûVerz√∂gerungen‚Äú im Code haben, bemerken wir offensichtliche Verz√∂gerungen.  √úbrigens, ja, warum brauchen wir √ºberhaupt viel ‚ÄûVerz√∂gerung‚Äú.  Wenn wir ein Spiel machen, beginnt die Anzahl der Pr√ºfungen und Interaktionen zu wachsen.  Zum Beispiel bewegt sich ein Feind auf uns zu und ich m√∂chte dar√ºber springen, ich dr√ºcke den "Sprung" und nach Plan muss ich zum Beispiel 0,8 f Sekunden in der Luft in der Luft h√§ngen, und dies ist das ganze Spiel und friert f√ºr diese 0,8 f Sekunden ein.  "Cant" dachte ich und begann √ºber eine L√∂sung nachzudenken.  Die L√∂sung wurde schnell gefunden.  Der Mikrocontroller selbst kann den Code schnell von Anfang bis Ende lesen (wenn es ihn nicht st√∂rt) und er wei√ü auch, wie man die Zeit vom Beginn seiner Aufnahme an z√§hlt.  Das brauchen wir.  Jetzt erstellen wir nur Variablen, die die Zeit f√ºr diese oder jene Aktion speichern, und eine Variable, die den Unterschied zwischen der aktuellen Zeit und dem Zeitaufwand f√ºr die Aktivierung des Codes vergleicht.  Arduino pro Sekunde dauert 1000 Millisekunden, sehr praktisch.  Hier ist ein Ausschnitt, wenn es klarer wird: <br><br><pre> <code class="hljs ruby"><span class="hljs-string"><span class="hljs-string">"--------------------------------------------------------------------------"</span></span> /<span class="hljs-regexp"><span class="hljs-regexp">/    ,  ,        /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  long ClearTime = 150; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ 150 = 0.15f   ~6    long ClearTimeCheck = 0; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ,       long currentMillis = 0; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   void loop () { currentMillis = millis(); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   =    } void clearscreen () /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ if (currentMillis - ClearTimeCheck &gt;= ClearTime) /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  (  -     0.15f    { ClearTimeCheck = currentMillis; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/       lcd.clear(); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   ,     } } "--------------------------------------------------------------------------"</span></span></code> </pre> <br>  Nicht schwer, oder? <br><br>  Nachdem ich den gesamten Code neu geschrieben hatte, begann das Spiel schnell und klar zu funktionieren, um Multitasking-Aktionen zu simulieren :) Ich habe einen langen Weg zur√ºckgelegt.  Schlie√ülich m√ºssen wir noch einen Charakter, eine Art Schnittstelle und Animation erstellen.  Da wir nur acht neue Charaktere erstellen k√∂nnen, m√ºssen wir alles irgendwie durcheinander bringen.  Ich habe bisher nicht vor, viele Objekte auf dem Display zu bearbeiten. Daher kann dies so erfolgen, dass in einer Codeverarbeitung nur acht aktive Objekte auf dem Bildschirm angezeigt werden.  Was wird es sein?  Nun, nat√ºrlich die Hauptfigur, ein Schlag, ein B√∂sewicht, ein Herz und ein Indikator f√ºr Gesundheit.  F√ºr den Anfang ist dies genug.  Ja, und ich habe drei weitere einzigartige Objekte auf Lager. <br><br>  Die Hauptfigur wird so aussehen: <br><br><img src="https://habrastorage.org/webt/ea/rk/ha/earkhaarqwcke8t6qmgvuhtxhhw.jpeg"><br><br>  Den Vorgang der Eingabe eines neuen Zeichens produziere ich im Bin√§rcode (ich f√ºhle mich so wohl) <br>  es wird so aussehen: <br><br>  01110 <br>  01110 <br>  00100 <br>  01110 <br>  10101 <br>  00100 <br>  01110 <br>  01010 <br><br>  Wenn Sie genau hinschauen, werden wir von einem aus unseren Charakter sehen, aber damit er nicht unt√§tig bleibt, machen wir ihn zu einer Animation. <br><br><img src="https://habrastorage.org/webt/lm/zy/s-/lmzys-m1civhaydvisjrsomhtiy.jpeg"><br><br>  Nun wird unserem Code ein weiterer Satz von Bin√§rzahlen hinzugef√ºgt, n√§mlich dieser: <br><br>  00000 <br>  01110 <br>  01110 <br>  00100 <br>  11111 <br>  00100 <br>  01110 <br>  01010 <br><br>  Wie man eine Animation auf diesem Display erstellt, habe ich die obige Logik angegeben. Lassen Sie uns nun √ºben, sie in der Mitte des Bildschirms zu platzieren und sie einfach stillstehen zu lassen. Denken Sie daran, dass unsere Aufgabe darin besteht, nur eine Speicherzelle f√ºr zwei Animations-Sprites zu verwenden.  Das ist einfacher als es sich anh√∂rt: <br><br><pre> <code class="hljs pgsql">"--------------------------------------------------------------------------" #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;Wire.h&gt; #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;LiquidCrystal_I2C.h&gt; LiquidCrystal_I2C lcd(<span class="hljs-number"><span class="hljs-number">0x3F</span></span>,<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); //   long AnimatedTime = <span class="hljs-number"><span class="hljs-number">300</span></span>; //     long AnimatedTimeCheck = <span class="hljs-number"><span class="hljs-number">0</span></span>; //   (    ) <span class="hljs-type"><span class="hljs-type">int</span></span> AnimPlayer = <span class="hljs-number"><span class="hljs-number">1</span></span>; //    <span class="hljs-type"><span class="hljs-type">int</span></span> GGpozX = <span class="hljs-number"><span class="hljs-number">8</span></span>; //   <span class="hljs-type"><span class="hljs-type">int</span></span> GGpozY = <span class="hljs-number"><span class="hljs-number">1</span></span>; //   <span class="hljs-number"><span class="hljs-number">1</span></span>  <span class="hljs-number"><span class="hljs-number">2</span></span>   <span class="hljs-number"><span class="hljs-number">0</span></span>    long currentMillis = <span class="hljs-number"><span class="hljs-number">0</span></span>; //   //   ,     ,    :) enum { SYMBOL_HEIGHT = <span class="hljs-number"><span class="hljs-number">8</span></span> }; byte Player_1[SYMBOL_HEIGHT] = {B01110,B01110,B00100,B01110,B10101,B00100,B01110,B01010,}; //  <span class="hljs-number"><span class="hljs-number">1</span></span> byte Player_2[SYMBOL_HEIGHT] = {B00000,B01110,B01110,B00100,B11111,B00100,B01110,B01010,}; //  <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> setup() { lcd.init(); lcd.backlight();//    <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>(); PlAn(); } <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (AnimPlayer != <span class="hljs-number"><span class="hljs-number">50</span></span>) { //    ,       :) // <span class="hljs-comment"><span class="hljs-comment">--------------------------- Animated -&gt; // -------------------- Player -&gt; if (AnimPlayer == 1){lcd.createChar(0, Player_1);} //  1   1 //(lcd.createChar(    0  7,   )) if (AnimPlayer == 2){lcd.createChar(0, Player_2);} //  2   2 } // --------------------------- &lt;- Animated currentMillis = millis(); //   =    PlAn(); } void PlAn () { if (AnimPlayer == 1) //   1  { lcd.setCursor(GGpozX, GGpozY); //  ""      lcd.write(0); //          "" } if (AnimPlayer == 2) //  ‚Ññ1 { lcd.setCursor(GGpozX, GGpozY); lcd.write(0); } if (currentMillis - AnimatedTimeCheck &gt;= AnimatedTime) //       { AnimatedTimeCheck = currentMillis; //     if (AnimPlayer == 2){AnimPlayer = 1; return;} //  2   1      if (AnimPlayer == 1){AnimPlayer = 2;} // 1  2           ,         } } "--------------------------------------------------------------------------"</span></span></code> </pre> <br>  Nach dem Start sehen wir den kleinen Mann, der sich in der Mitte des Bildschirms befindet, in der 2. Zeile und schwankt sozusagen. <br><br>  Fazit: Heute habe ich dar√ºber gesprochen, wie man Daten √ºber den Infrarotanschluss herausfindet, wie man die Verz√∂gerung des Mikrocontroller-Codes umgeht und wie man die erste Animation erstellt. <br><br>  Der Rest kommt bald :) Ich habe noch viel zu schreiben, also werde ich mir ansehen, wie interessant es f√ºr dich √ºberhaupt sein wird, und wenn ja, werde ich morgen anfangen, eine Fortsetzung zu schreiben. <br><br>  Vielen Dank f√ºr Ihre Aufmerksamkeit, Ciao Kakao! <br><br>  Der zweite Teil des Artikels -&gt; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">habr.com/post/425367</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de424859/">https://habr.com/ru/post/de424859/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de424849/index.html">Was macht den neuen UCS C480 ML M5 interessant - Server f√ºr maschinelles Lernen von Cisco</a></li>
<li><a href="../de424851/index.html">Was ist falsch daran, IT einzustellen?</a></li>
<li><a href="../de424853/index.html">Die Geschichte eines View Controllers, der sich gut pr√§sentieren wollte</a></li>
<li><a href="../de424855/index.html">Maschinelles Lernen: Scramble mit einem Raumelefanten</a></li>
<li><a href="../de424857/index.html">CloudFlare implementiert verschl√ºsselte SNI-Unterst√ºtzung</a></li>
<li><a href="../de424861/index.html">Eine Schlange in der Mailbox und was macht F #</a></li>
<li><a href="../de424865/index.html">Elementare Designpartikel entdeckt</a></li>
<li><a href="../de424867/index.html">Hexapod-Entwicklung von Grund auf neu (Teil 1) - Design</a></li>
<li><a href="../de424869/index.html">Wie mich die neue iOS 12-Funktion daran erinnerte, dass es Zeit ist, zu heilen</a></li>
<li><a href="../de424871/index.html">Elon Musk und Tesla l√∂sen Rechtsstreitigkeiten mit der US-amerikanischen B√∂rsenaufsichtsbeh√∂rde</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>