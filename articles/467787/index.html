<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíè üï¥üèª üîß C√≥mo configurar la b√∫squeda de direcciones por coordenadas (y d√≥nde obtener el directorio necesario) üëÜüèæ ‚öΩÔ∏è üì∑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En primavera, agregamos la caracter√≠stica "Geocodificaci√≥n inversa" a la API DaData.ru, que tambi√©n se llama " Direcci√≥n por coordenadas ". El nombre ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo configurar la b√∫squeda de direcciones por coordenadas (y d√≥nde obtener el directorio necesario)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hflabs/blog/467787/"><img src="https://habrastorage.org/webt/_w/mf/y5/_wmfy5eag0qfwexxhm4qerr0-64.jpeg"><br><br>  En primavera, agregamos la caracter√≠stica "Geocodificaci√≥n inversa" a la API DaData.ru, que tambi√©n se llama " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Direcci√≥n por coordenadas</a> ".  El nombre sugiere: el m√©todo toma geocoordenadas y proporciona datos sobre la direcci√≥n. <br><br>  Un producto s√≥lido con la misma funcionalidad ofrece Yandex: se llama <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Geocoder</a> .  Pero el servicio Yandex es gratuito solo para proyectos abiertos no comerciales.  La tarifa est√°ndar, de 120 000 ‚ÇΩ por a√±o, no es adecuada para todos. <br><br>  Pensamos que si realiza una alternativa gratuita o econ√≥mica a "Geocoder", los desarrolladores probablemente le dar√°n las gracias.  Y lo hicieron.  En el art√≠culo, le dir√© c√≥mo funciona la estructura "Direcci√≥n por coordenadas": c√≥mo configuramos la b√∫squeda, armamos un directorio y lo empaquetamos en un m√©todo listo para usar. <br><a name="habracut"></a><br><h2>  ¬øD√≥nde obtenemos los datos y c√≥mo buscamos la direcci√≥n? </h2><br>  Al abordar la tarea, estudiamos soluciones ya preparadas: d√≥nde obtener el directorio de coordenadas con direcciones y c√≥mo buscar objetos geogr√°ficos desde este directorio.  Result√≥ que ni siquiera tiene que ir muy lejos para obtener las herramientas adecuadas. <br><br>  <b>Tomamos los objetos de direcci√≥n en FIAS</b> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sistema de direcciones de informaci√≥n federal</a> .  Este es el m√°s completo de los directorios de direcciones abiertos y oficiales.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ya escribimos al</a> respecto en detalle sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Habr√©</a> , y ahora cuatro hechos son importantes: <br><br><ul><li>  FIAS almacena todos los objetos direccionables del pa√≠s, desde regiones y m√°s abajo, hasta edificios y territorios adicionales; </li><li>  el directorio est√° disponible gratuitamente en formatos DBF y XML; </li><li>  FIAS no es perfecto: carece de decenas de miles de casas y muchas calles, especialmente nuevas; </li><li>  Cada objeto de direcci√≥n en el directorio corresponde a un ID √∫nico: c√≥digo FIAS.  El c√≥digo objeto a veces se cambia, pero para nuestro art√≠culo esto no es tan importante. </li></ul><br>  Los objetos de direcci√≥n descargados de FIAS junto con la ID son la base de nuestro directorio para la geocodificaci√≥n inversa. <br><br>  <b>Descargar coordenadas de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OpenStreetMap</a> (OSM).</b>  OSM es un proyecto con una licencia gratuita: los entusiastas recopilan las coordenadas de varios objetos y las publican para todos. <br><br>  En t√©rminos simples, OSM es un conjunto de puntos, l√≠neas y pol√≠gonos en un mapa.  Cada objeto tiene su propia descripci√≥n, tipo y conjunto de coordenadas.  Los datos de OSM para Rusia se encuentran en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">needgeo.com</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">osm.sbin.ru/osm_dump/</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">osmosis.svimik.com/latest/</a> . <br><br><img src="https://habrastorage.org/webt/ws/p6/hy/wsp6hyjy8brd4qmc11clfyoulic.png"><br>  <sub>La lista de fuentes se publica <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en una p√°gina especial en el "Wiki" del proyecto.</a></sub> <br><br>  La descarga consiste en archivos PBF: este formato se usa en lugar de XML como uno m√°s compacto.  Convertir PBF en OSM XML no cuesta nada, un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mont√≥n de utilidades aprobadas por la comunidad pueden</a> manejar esto. <br><br>  Para nuestro propio directorio, tomamos los objetos de direcci√≥n de FIAS y luego buscamos sus coordenadas en OSM.  Si se encuentra, guarde los datos combinados.  Resulta una intersecci√≥n de FIAS y OSM. <br><br>  Y todo esto es maravilloso, pero hay un problema: las cosas no son f√°ciles con la calidad de los datos en OSM.  Las coordenadas de los objetos a menudo no corresponden a la realidad.  Por ejemplo, los pol√≠gonos para regiones y distritos son adecuados.  Pero para las ciudades y m√°s abajo, no tanto. <br><br><img src="https://habrastorage.org/webt/dc/hn/uh/dchnuhisbetq44m1uyd8sniuy20.png"><br>  <sub>Los pol√≠gonos son pol√≠gonos que delimitan √°reas en un mapa.</sub>  <sub>Consisten en un conjunto vinculado de puntos con coordenadas.</sub>  <sub>Los pol√≠gonos indican los l√≠mites de regiones, distritos, ciudades e incluso edificios.</sub> <br><br>  El trabajo principal, y por un amplio margen, es recopilar datos adecuados de OSM y eliminar el matrimonio.  La tarea es tan voluminosa que le dediqu√© una secci√≥n separada en el art√≠culo. <br><br>  <b>Tambi√©n descargamos casas que no est√°n en FIAS desde OSM.</b>  Como dije anteriormente, hay decenas de miles de hogares en FIAS.  Esto ni siquiera es un problema, sino simplemente una realidad, un trasfondo.  Por lo tanto, reponemos nuestro directorio con casas de OSM.  Pero solo aquellos para los que hay una calle en FIAS.  Los edificios que provienen de OSM no tienen una identificaci√≥n FIAS, por lo que los identificamos como el <i>c√≥digo FIAS + n√∫mero de casa de</i> los <i>padres</i> . <br><br>  <b>En el directorio que buscamos con la ayuda de la bella <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Lucene</a></b> , nuestra asistente a largo plazo.  Gracias por el consejo, a un indio bien versado que escribi√≥ la publicaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Indexaci√≥n de datos geogr√°ficos con Lucene</a> (una buena adici√≥n es el material <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ad espacial en algoritmos de b√∫squeda espacial</a> , sobre los √°rboles kd en los que se basa el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">algoritmo de b√∫squeda</a> ). <br><br>  Tan pronto como nos enteramos de Lucene, el problema de b√∫squeda se resolvi√≥ casi por s√≠ solo.  Los negocios permanecen - ve por papel de lija <br><br><ol><li>  Cargamos en Lucene su directorio de coordenadas y direcciones, obtuvimos un √≠ndice de b√∫squeda.  Para mayor facilidad, se elimin√≥ casi todo, dejando solo las ID y coordenadas de la direcci√≥n. </li><li>  Configuramos una b√∫squeda por √≠ndice: entrada - coordenadas, salida - ID de los objetos de direcci√≥n encontrados.  La b√∫squeda no devuelve otra informaci√≥n, ya que el √≠ndice se acort√≥ por completo. </li><li>  Satisfecho la emisi√≥n, cargando datos de las FIAS "grandes" por los ID encontrados.  Agregamos mucho de todo, desde la direcci√≥n que todos necesitan en una l√≠nea hasta el letrero de la capital regional de las ciudades. </li><li>  Descubrimos c√≥mo ordenar y entregar los objetos recibidos. </li></ol><br>  Hasta ahora, todo parece simple, pero esto es solo una peque√±a parte del trabajo.  Ninguna b√∫squeda de la direcci√≥n por coordenadas hubiera funcionado si no hubi√©ramos compilado un directorio decente. <br><br><h2>  C√≥mo recopilar la base de coordenadas y direcciones </h2><br>  Para comenzar, tendr√© el equipaje: despu√©s de leer el art√≠culo, hacer r√°pidamente tal manual no funciona.  Lo hemos estado recolectando desde 2014, complet√°ndolo constantemente.  Hablar√© de este maldito largo camino. <br><br>  La parte m√°s dif√≠cil al compilar un directorio es ordenar las coordenadas que provienen de OSM.  Al principio, los verificamos lo mejor que pudimos, incluso con nuestras manos.  El objetivo principal era obtener puntos de referencia en las grandes ciudades y hacer una gu√≠a de referencia de ellos.  Ahora que hay muchos de esos puntos, casi no hay necesidad de verificar manualmente si hay nuevos datos.  A la vez, agregamos 200,000-300,000 direcciones con coordenadas al directorio de referencia, y as√≠ es como lo hacemos. <br><br>  <b>Formamos direcciones completas a partir de etiquetas OSM.</b>  En las cargas de OSM, las partes componentes de las direcciones est√°n dispersas por diferentes etiquetas: <br><br><ul><li>  <i>addr: ciudad - pueblo Bulatnikovo</i> ; </li><li>  <i>addr: street - Calle central</i> ; </li><li>  <i>addr: n√∫mero de vivienda - 103</i> . </li></ul><br>  Revisamos las etiquetas y recopilamos la direcci√≥n completa de ellos: <i>pueblo de Bulatnikovo, 103 Central Street</i> . <br><br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ejecutamos</a> cada nueva direcci√≥n a trav√©s de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">API de estandarizaci√≥n de Dadat</a> .</b>  El servicio convierte las direcciones a un formato √∫nico "Me gusta en FIAS": <br><br><ul><li>  corrige errores tipogr√°ficos; </li><li>  decodifica abreviaturas como "NiNo" y "Msk"; </li><li>  cambia los nombres antiguos a los nuevos; </li><li>  encuentra la ciudad que falta en la direcci√≥n por √≠ndice; </li><li>  define un c√≥digo FIAS. </li></ul><br>  Las direcciones de la API est√°n limpias, aunque ahora est√°n enviando una carta o un paquete. <br><div class="scrollable-table"><table><tbody><tr><th>  Antes de la estandarizaci√≥n </th><th>  Despues </th></tr><tr><td>  <i>Pueblo Bulatnikovo, Calle Central, 103</i> </td><td><p>  <i>142718, regi√≥n de Mosc√∫, distrito de Leninsky, con Bulatnikovo, Central St., 103.</i> </p><br><p>  C√≥digo FIAS - <i>a8b6a52f-e96d-4ec3-a0ff-641013ab0445</i> </p></td></tr></tbody></table></div>  Almacenamos casas estandarizadas, calles y asentamientos como un punto.  Para la calle y el pueblo, este punto es el centro.  Como resultado, todos los objetos de direcci√≥n est√°n en la misma tabla, en el interior: la direcci√≥n, el ID de FIAS, la latitud y la longitud. <br><div class="scrollable-table"><table><tbody><tr><th>  La direccion </th><th>  ID FIAS </th><th>  Latitud </th><th>  Longitud </th></tr><tr><td>  <i>142718, regi√≥n de Mosc√∫, distrito de Leninsky, con Bulatnikovo, Central St., 103</i> </td><td>  <i>a8b6a52f-e96d-4ec3-a0ff-641013ab0445</i> </td><td>  <i>55.558773</i> </td><td>  <i>37.667103</i> </td></tr><tr><td>  <i>119034, Mosc√∫, carril Turchaninov, d 6 bldg.2</i> </td><td>  <i>8c925e61-9173-48b3-999e-dc85c86d89e7</i> </td><td>  <i>55,737096</i> </td><td>  <i>37.597190</i> </td></tr></tbody></table></div>  <b>Analizamos direcciones que Dadata no estandariz√≥.</b>  Las direcciones que no pueden coincidir con FIAS est√°n marcadas con una bandera por el servicio.  Los revisamos manualmente, hay varias opciones. <br><br><ol><li>  La direcci√≥n no vino en las etiquetas de carga OSM adecuadas, pero el diablo sabe d√≥nde.  Etiquetas de direcci√≥n cumplidas y no completadas, y la etiqueta de la ciudad en la calle, y mucho m√°s. </li><li>  En OSM se encuentra un objeto ex√≥tico como un parque infantil, un campo de f√∫tbol americano universitario o incluso un cementerio.  No hay nada como esto en FIAS, y para nuestros prop√≥sitos estos resultados no son adecuados.  Tales objetos son simplemente apantallados. </li><li>  Un error, y no un error en absoluto.  Por ejemplo, un distrito de una ciudad que no existe en FIAS proviene de OSM.  O en OSM, el objeto se encuentra en un asentamiento, pero en FIAS este asentamiento se adjunt√≥ a la ciudad y se elimin√≥.  Luego terminamos el algoritmo para los datos cargados y lo ejecutamos nuevamente. </li></ol><br><img src="https://habrastorage.org/webt/_u/yc/1u/_uyc1uds-xef7yiwtpu01vgk7ju.png"><br>  <sub>Parse descarga, y all√≠ - confusi√≥n en las etiquetas</sub> <br><br>  <b>Verificamos cu√°n adecuadas son las coordenadas cargadas.</b>  Para hacer esto, observamos con una utilidad especial si las coordenadas del nuevo objeto caen en el pol√≠gono de la regi√≥n o distrito principal.  Si la direcci√≥n informa que el objeto se encuentra en la regi√≥n de Omsk, tenga la amabilidad de entrar en su vertedero.  No es necesario ingresar a la ciudad: no todas las ciudades est√°n cubiertas con precisi√≥n en OSM, para muchos, los datos no se actualizan. <br><br>  Cargamos pol√≠gonos de referencia desde OSM y lo almacenamos como est√°, en formato <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GeoJSON</a> .  Para elegir qu√© pol√≠gono probar en un punto, busque en una tabla separada.  En √©l, comparamos los prefijos de los c√≥digos CLADR y las ID de pol√≠gono: encuentra el c√≥digo CLADR para la direcci√≥n y ve qu√© pol√≠gono elegir. <br><br><img src="https://habrastorage.org/webt/f_/ud/tt/f_udtt5i_rael-f2i8exqc-4k0g.png"><br>  <sub>El c√≥digo KLADR es un identificador √∫nico que se utiliz√≥ antes de FIAS.</sub>  <sub>Un mill√≥n de servicios pueden encontrar este c√≥digo para una direcci√≥n</sub> <br><br>  La utilidad permite que el objeto se encuentre a 1.700 metros del vertedero.  Esta regla se agreg√≥ debido a las carreteras que a menudo van m√°s all√° de las fronteras de la regi√≥n.  Pero una distancia mayor a 1,700 metros es una se√±al de error, seg√∫n las estad√≠sticas. <br><br>  En esto para ciudades y calles, el cheque termina. <br><br>  <b>Una vez m√°s, m√°s estrictamente, verificamos las coordenadas cargadas de las casas.</b>  La utilidad mencionada nuevamente entra en juego, y esto es lo que hace. <br><br><ol><li>  Toma la direcci√≥n de la nueva casa y encuentra vecinos para √©l en el directorio de referencia. </li><li>  Seg√∫n las coordenadas, considera la distancia entre la nueva casa no verificada y los vecinos confiables. </li></ol><br><img src="https://habrastorage.org/webt/sx/vx/y-/sxvxy-u2l54hlaggzda0zx8u-tw.jpeg"><br>  <sub>Es f√°cil encontrar vecinos: 1. Tomamos una casa nueva y encontramos la ID de FIAS del padre.</sub>  <sub>2. Seleccionamos del directorio de referencia casas cuyos padres tienen la misma ID de FIAS</sub> <br><br>  La inspecci√≥n se lleva a cabo solo en el hogar, a no m√°s de 150 metros de colegas confiables.  Adem√°s, consideramos cada nueva casa aprobada cuando analizamos lo siguiente.  As√≠ es como funciona. <br><br>  Supongamos que, en la gu√≠a de referencia, las casas <i>No. 1, 2 y 3</i> est√°n almacenadas a lo <i>largo de la calle Kommunarov</i> .  En los nuevos datos llegaron las casas <i>No. 5, 6 y 7</i> en la misma calle.  A juzgar por las coordenadas, las nuevas casas est√°n cerca.  La utilidad ve que la casa <i>n√∫mero 5</i> est√° al lado de las casas <i>n√∫mero 1, 2 y 3</i> y la agrega al directorio de referencia.  Entonces, las casas <i>n√∫mero 6 y 7</i> tambi√©n se est√°n probando. <br><br>  Y luego se decide el destino de los datos que provienen de OSM: <br><br><ul><li>  casas que han pasado ambos controles: para vertederos y vecinos, agregamos al directorio de referencia; </li><li>  Si el objeto no cae en el pol√≠gono, los nuevos datos no son adecuados.  Lo mismo si la distancia entre la casa y los vecinos es demasiado grande; </li><li>  casas que no tienen vecinos, estamos posponiendo.  Se encuentran en una base de datos separada, alg√∫n d√≠a analizaremos. </li></ul><br>  <b>Dividimos los objetos probados en dos partes.</b>  Ir√°n a diferentes platos de nuestro manual de referencia. <br><br><img src="https://habrastorage.org/webt/60/mh/30/60mh30nzsamn2rv_gegjgooqusy.png"><br>  <sub>En la primera tabla, todos los objetos con identificaci√≥n FIAS para casas: regiones, asentamientos, calles.</sub>  <sub>En el segundo - en casa y un enlace a los padres desde la primera tabla</sub> <br><br>  Se necesitan dos tablas para asignar claves a las casas que faltan en FIAS.  No tienen su propio c√≥digo FIAS, as√≠ que as√≠ es como: <br><br><ul><li>  recopilamos objetos de direcci√≥n de la casa en una tabla, cada uno de ellos tiene su propio c√≥digo FIAS; </li><li>  en el segundo, solo en casa, mientras se refiere al padre en la primera tabla. </li></ul><br>  Como resultado de un edificio sin un c√≥digo FIAS, identificamos el <i>ID + n√∫mero de casa</i> del <i>padre</i> utilizando la clave <i>FIAS</i> . <br><br>  <b>La referencia est√° lista, queda por probar.</b>  Ejecutamos un servicio de prueba funcional durante la noche y probamos el rendimiento.  Verificamos la velocidad en Mosc√∫, solicitando todas las casas en un radio de tres kil√≥metros.  Para estar seguro  Por supuesto, superpusieron todo con autotest. <br><br>  Lo principal despu√©s de la actualizaci√≥n es no empeorar. <br><br><h2>  Geocodificaci√≥n inversa a trav√©s de los ojos del usuario </h2><br>  El m√©todo de entrada toma tres par√°metros: coordenadas, n√∫mero de resultados y radio de b√∫squeda.  El radio predeterminado es de 100 metros, el m√°ximo es un kil√≥metro.  El valor exacto se establece en la configuraci√≥n. <br><br><pre><code class="java hljs">curl -X POST \ -H <span class="hljs-string"><span class="hljs-string">"Content-Type: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Accept: application/json"</span></span> \ -H <span class="hljs-string"><span class="hljs-string">"Authorization: Token ${API_KEY}"</span></span> \ -d <span class="hljs-string"><span class="hljs-string">'{ "lat": 55.878, "lon": 37.653, "radius_meters": 50 }'</span></span> \ https:<span class="hljs-comment"><span class="hljs-comment">//suggestions.dadata.ru/suggestions/api/4_1/rs/geolocate/address</span></span></code> </pre> <br>  El m√©todo devuelve los objetos encontrados: casas, calles y asentamientos.  Los ordena en orden descendente de precisi√≥n. <br><br><ol><li>  En casa </li><li>  Las calles </li><li>  Asentamientos </li><li>  Ciudades </li></ol><br>  Luego se ordena de nuevo, por distancia desde las coordenadas dadas.  Si el m√©todo ha encontrado cuatro casas y una calle, las casas se colocar√°n primero en orden de distancia desde un punto dado.  Detr√°s de ellos est√° la calle. <br><br>  Despu√©s de todos estos castillos, el m√©todo finalmente devuelve los objetos que encontr√≥. <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"suggestions"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">" ,  ,  11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"unrestricted_value"</span></span>: <span class="hljs-string"><span class="hljs-string">" ,  ,  11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"data"</span></span>: {...} }, { <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">" ,  ,  11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"unrestricted_value"</span></span>: <span class="hljs-string"><span class="hljs-string">" ,  ,  11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"data"</span></span>: {...} } ] }</code> </pre> <br>  En el interior: hay muchas cosas diferentes sobre los objetos encontrados: l√≠neas con la direcci√≥n completa y abreviada, nombres actuales y obsoletos, c√≥digo postal, c√≥digo FIAS del objeto principal, etc. <br><br><img src="https://habrastorage.org/webt/c5/_4/8i/c5_48iyueonoygc22saytynllr4.png"><br>  <sub>Todos los datos que proporciona el m√©todo est√°n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en la documentaci√≥n.</a></sub> <br><br>  La cobertura por coordenadas para diferentes regiones es diferente, como esta con las casas: <br><br><ul><li>  Mosc√∫ - 96%, </li><li>  San Petersburgo - 88%, </li><li>  otras ciudades de m√°s de un mill√≥n - 74%, </li><li>  El resto de Rusia es del 47%. </li></ul><br>  Y aqu√≠ est√°, cubriendo las calles: <br><br><ul><li>  Mosc√∫ - 92% </li><li>  San Petersburgo - 79%, </li><li>  otras ciudades millonarias - 75%, </li><li>  El resto de Rusia es del 67%. </li></ul><br>  No consideraron las ciudades: en la escala de Rusia, incluso el hecho de pertenecer al orgulloso t√≠tulo de la ciudad era inestable.  Por ejemplo, la <i>regi√≥n de Yaroslavl, el distrito de Poshekhonsky, s / o Fedorkovsky</i> es una ciudad, seg√∫n el directorio oficial de FIAS.  Pero, de hecho, y en la direcci√≥n: el distrito rural.  F√≠sicamente, el distrito rural se asemeja a la uni√≥n de varias aldeas en una gran mancha.  Es dif√≠cil no solo determinar el centro, sino incluso encontrar el asentamiento en el mapa. <br><br>  Ya estamos pensando qu√© agregar al m√©todo: permitir el filtrado por tipo de objeto, devolver la distancia a un punto dado, algo m√°s.  Monitoreamos la demanda y decidimos si invertir. <br><br>  De lo contrario, todo ya est√° en la producci√≥n.  Hasta 10,000 solicitudes por d√≠a, de forma gratuita, m√°s, por suscripci√≥n de 5 000 ‚ÇΩ por a√±o.  Si necesita direcciones por coordenadas para un proyecto comercial y Geocoder es demasiado costoso, pruebe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la API de Dadati</a> . <br><br>  <i>El art√≠culo original se publica <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en el blog de HFLabs</a> .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/467787/">https://habr.com/ru/post/467787/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../467775/index.html">5 mitos sobre los negocios: por qu√© el cliente est√° equivocado y c√≥mo superar a Apple</a></li>
<li><a href="../467779/index.html">Acerca de Godot, GLSL y WebGL, sombreadores utilizados en el minijuego</a></li>
<li><a href="../467781/index.html">Curso C ++ en CS centre, primera parte</a></li>
<li><a href="../467783/index.html">¬øC√≥mo puede un profesional de TI trabajar y vivir en Suiza?</a></li>
<li><a href="../467785/index.html">C√≥mo optimizar pandas cuando se trabaja con grandes conjuntos de datos (ensayo)</a></li>
<li><a href="../467789/index.html">Acaba de llegar Java 13. ZGC ha comenzado a compartir memoria, el propio CDS recuerda las clases y otras maravillas t√©cnicas.</a></li>
<li><a href="../467791/index.html">An√°lisis de desplazamiento de p√°gina en Google Data Studio</a></li>
<li><a href="../467793/index.html">Pila de tecnolog√≠a aburrida de la compa√±√≠a de internet de un solo hombre</a></li>
<li><a href="../467795/index.html">Nota sobre criptomonedas y regulaci√≥n estatal</a></li>
<li><a href="../467797/index.html">"R√≠ete por el bien de": ¬øpor qu√© podr√≠as necesitar herramientas de software que no tienen una aplicaci√≥n de "combate"?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>