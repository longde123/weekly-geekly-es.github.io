<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõÄüèΩ üë©üèº‚Äçüöí üë¶üèæ PWA mudah. Halo joomla üö¢ üç® üëà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Melanjutkan mempelajari Aplikasi Web Progresif. Setelah bagian teoritis pertama dan contoh praktis sederhana dari Hello Habr, bagian kedua, kami akan ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PWA mudah. Halo joomla</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419879/">  Melanjutkan mempelajari Aplikasi Web Progresif.  Setelah bagian teoritis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pertama</a> dan contoh praktis sederhana dari Hello Habr, bagian <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kedua,</a> kami akan mencoba untuk mentransfer situs web PWA ke CMS Joomla. <br><br>  Jenis kerangka kerja server tidak penting.  Tujuan artikel ini adalah untuk menunjukkan terjemahan situs reguler di PWA sebagai konsep yang berlaku untuk situs sewenang-wenang pada kerangka apa pun. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e3e/d50/eff/e3ed50eff39c7b5659a6e465bc2315fb.png"><a name="habracut"></a><br><br>  Untuk memulai, unduh dan instal Joomla.  Selama instalasi, kami menunjukkan bahwa perlu mengisi situs dengan data demo - pilih opsi "Blog".  Kami sampai di sini situs seperti itu - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://tetta.nut.cc/habr/hello-joomla/original/</a> .  Kemudian salin semua file situs ke direktori <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://tetta.nut.cc/habr/hello-joomla/</a> - sekarang kita memiliki dua contoh kerja situs Joomla pada database yang sama.  Kami akan meninggalkan yang pertama apa adanya, dan yang kedua kami akan transfer ke versi PWA. <br><br>  Kode sumber untuk contoh artikel ini dapat dilihat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub-e</a> <br><br><div class="spoiler">  <b class="spoiler_title">Sedikit tentang struktur Joomla</b> <div class="spoiler_text"><blockquote>  Joomla memiliki konsep templat - sekumpulan sumber daya web yang bertanggung jawab atas tingkat presentasi.  Template terletak di direktori / template, standar kami "di luar kotak" disebut protostar. <br><br>  Dalam kasus umum, setelah menerima permintaan browser, Joomla menghidupkan mesin, melakukan hal sendiri, dan kemudian mentransfer eksekusi permintaan ke /templates/protostar/index.php, yang sudah menghasilkan HTML ke klien.  File ini adalah file PHP sederhana, di mana penggunaan dua arahan juga dimungkinkan: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jdoc:include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"component"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jdoc:include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modules"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"position-id"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..."</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  Yang pertama memasukkan bahan utama yang sesuai dengan URL yang diminta (komponen), yang kedua - modul yang ditentukan oleh administrator untuk posisi yang ditentukan.  Setiap halaman di Joomla terdiri dari komponen dan modul. <br><br>  Jika Anda melihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">templat situs</a> , Anda dapat melihat blok materi utama di bagian tengah halaman, dan tidak ada modul di sekitarnya.  Menu teratas adalah posisi-1, kolom kanan dengan dua modul "Posting Lama" dan "Tulisan Paling Banyak Dibaca" adalah posisi-7, dan seterusnya. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ba6/52d/6db/ba652d6dbdb81582843279fe01832c53.png" alt="gambar"><br><br>  Joomla memiliki kekhasan - jika ada parameter <i>tmpl</i> dalam permintaan GET yang <i>diterima</i> dengan nilai <i>SomePage</i> , maka Joomla tidak mengirimkan eksekusi permintaan ke index.php ke file template, tetapi ke somePage.php, jika ada.  Kami menggunakannya di bawah ini. </blockquote><br></div></div><br><h2>  Shell aplikasi </h2><br>  Sekarang kita perlu mengisolasi dari shell aplikasi situs - shell aplikasi yang sedang dibuat.  Ketika mengembangkan situs PWA dari awal, mungkin ada strategi yang berbeda untuk ini, tetapi pada situs yang sudah selesai lebih mudah menggunakan divisi ini menjadi bagian statis dan dinamisnya. <br><br>  Statika adalah sesuatu yang jarang berubah dan dapat menjadi bagian dari shell aplikasi.  Misalnya, menu teratas di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs kami</a> dapat dianggap statis - hanya diubah oleh administrator, dan ia dapat secara eksplisit memesan pembaruan shell aplikasi pada browser klien setelah mengeditnya. <br><br>  Pada saat yang sama, konten itu sendiri, serta modul di posisi-7 dan modul Breadcrumbs di posisi-2, menunjukkan di mana pengguna saat ini di situs, bersifat dinamis.  Mereka harus dimuat ke browser klien. <br><br><h3>  1. Perubahan pada server </h3><br>  Ganti semua blok dinamis dengan placeholder.  Dalam file index.php dari templat, ubah arahan: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jdoc:include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"component"</span></span></span><span class="hljs-tag"> /&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main-content"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jdoc:include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modules"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"position-id"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..."</span></span></span><span class="hljs-tag"> /&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"module-id"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Kami juga menghubungkan file javascript kami hello-joomla.js di index.php di samping skrip template. <br><br>  Buat file main-content.php dengan konten berikut: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jdoc:include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"component"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  File Module-2.php: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jdoc:include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modules"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"position-2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"none"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Dan file module-7.php: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jdoc:include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modules"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"position-7"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"well"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br><br>  Arti dari apa yang dilakukan adalah ketika Anda meminta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://tetta.nut.cc/habr/hello-joomla/index.php/5-your-modules?tmpl=module-7</a> kita hanya akan mendapatkan kode modul yang terletak di posisi- 7.  Hal yang sama dengan konten. <br><br>  Ini <b>semua</b> adalah perubahan di bagian "server" dari situs.  Dalam kerangka kerja lain, operasi ini (menyoroti shell aplikasi) mungkin akan sedikit lebih rumit, tetapi di sini kita beruntung. <br><br><h3>  2. Sisi klien </h3><br>  Di hello-joomla.js, kita perlu menerapkan pemuatan konten dan modul yang dinamis.  Selain itu, Anda perlu mengubah perilaku semua tag &lt;A&gt; sehingga mengklik tautan akan memicu pemuatan dinamis data halaman.  Modul kolom kanan akan dimuat sekali ketika situs dibuka di browser, dan remah roti dan konten akan dimuat setiap kali Anda mengklik tautan internal. <br>  Ini juga mudah: <br><br><div class="spoiler">  <b class="spoiler_title">halo-joomla.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   url  HTML  el function loadData(el, url){ url.indexOf("?") &gt;= 0 ? url += "&amp;" : url += "?"; url = url + 'mode=nocache&amp;tmpl=' + el; fetch(url) .then( function(response) { if (response.status == 200) { response.text().then(function(data) { document.getElementById(el).innerHTML = data; }); } }) .catch(); return false; } //    &lt;a&gt;    function handleLinks() { var links = document.querySelectorAll('a'); for (var i = 0; i &lt; links.length; ++i) { links[i].removeEventListener("click", handleLink); links[i].addEventListener("click", handleLink); } } //   function handleLink(e) { e.preventDefault(); loadData("main-content", this.href); loadData("module-2", this.href); handleLinks(); return false; } //      function DOMLoaded() { loadData("main-content", location.pathname); loadData("module-2", location.pathname); loadData("module-7", location.pathname); handleLinks(); } document.addEventListener('DOMContentLoaded', DOMLoaded, true);</span></span></code> </pre> <br></div></div><br>  Saat ini, kami telah membuat ulang situs kami menjadi SPA lengkap - aplikasi satu halaman - aplikasi.  Ada pemolesan kiri - tautan "Kembali ke Atas", gaya menu atas, formulir pencarian, prapemuat animasi, dll. <br>  Salinan situs dalam mode SPA tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://tetta.nut.cc/habr/hello-joomla/spa/</a> . <br><br><h3>  3. SPA -&gt; PWA </h3><br>  Kami menghubungkan manifes dan sw.js dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">contoh sebelumnya</a> di index.php.  Untuk mencegah Pekerja Layanan dari caching permintaan dinamis, tambahkan <i>"mode = nocache"</i> ke url di hello-joomla.js dalam fungsi loadData. <br><br>  Itu saja.  Dapat diperbaiki ke layar beranda. <br><br><h2>  Kesimpulan </h2><br>  Seperti yang Anda lihat, untuk mengubah situs web menjadi aplikasi PWA, tidak diperlukan kerangka kerja dan toolkit.  Semuanya dilakukan dengan tangan, dan kode tetap bersih dan jelas. <br><br>  Pada artikel selanjutnya, dalam bentuk tips yang bermanfaat, kami secara fungsional akan membawa situs ke tingkat rilis dalam produksi.  Ada peningkatan standar SPA yang tersisa - judul halaman di browser, Google Analitics, verifikasi bahwa tidak ada yang berharga keluar untuk mesin pencari.  Kami akan membuat manajemen caching yang nyaman untuk Pekerja Layanan-untuk memperbarui elemen shell aplikasi dengan cepat.  Selain itu, editor dan komentator situs ingin dapat memasukkan gambar dari Internet ke dalam materi situs, termasuk melalui protokol http. <br><br><blockquote>  Salah satu fitur hebat dari konsep PWA adalah bahwa ia menghidupkan paradigma MVC yang telah lama hilang di berbagai kerangka server dan browser.  "View" sekarang tinggal di klien, dan browser mengakses server untuk <i>data</i> , bukan untuk <i>presentasinya</i> . <br><br>  Dan, tidak seperti SPA konvensional, PWA membangun "Tampilan" ini bukan dengan kerangka kerja javascript yang berat, tetapi dengan html + css lama yang cepat dan jelas. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id419879/">https://habr.com/ru/post/id419879/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id419869/index.html">Revolusi AI tidak akan dibuat oleh droid, tetapi oleh pemanggang roti</a></li>
<li><a href="../id419871/index.html">Bagaimana Google mencoba mengembangkan mesin pencari yang disensor untuk China</a></li>
<li><a href="../id419873/index.html">Pengujian hanya melalui metode publik itu buruk</a></li>
<li><a href="../id419875/index.html">Sekali lagi tentang keterlambatan dalam kode sumber proyek FPGA atau pertanyaan sederhana untuk wawancara untuk pekerjaan pengembang FPGA</a></li>
<li><a href="../id419877/index.html">Bagaimana kami menemukan "rumah pintar" lagi</a></li>
<li><a href="../id419883/index.html">Dapatkan perbedaan antara file biner menggunakan vcdiff</a></li>
<li><a href="../id419885/index.html">Terjemahan buku Andrew Un, Passion for Machine Learning, Bab 15-19</a></li>
<li><a href="../id419893/index.html">Cara melakukan pencarian pengguna di Github menggunakan VanillaJS</a></li>
<li><a href="../id419895/index.html">Mesin baru akan memungkinkan microsatellites untuk melakukan tugas "dewasa"</a></li>
<li><a href="../id419897/index.html">"Machine Sound": synthesizer berdasarkan pada jaringan saraf</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>