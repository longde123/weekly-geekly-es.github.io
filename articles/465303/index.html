<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî´ ü§≥üèø üçª Trenes de Mosc√∫ (y no solo): lo que ha cambiado y gracias a quienes ayudaron üìº üêõ üçΩÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="600 mil personas ven el horario en nuestro d√≠a, por lo que cada peque√±o cambio tiene un efecto a gran escala. Quiero informar un poco sobre el hecho d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Trenes de Mosc√∫ (y no solo): lo que ha cambiado y gracias a quienes ayudaron</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tuturu/blog/465303/"><img src="https://habrastorage.org/webt/qd/bu/_m/qdbu_m6dbbi_jetuirp_v3tjnug.jpeg"><br><br>  600 mil personas ven el horario en nuestro d√≠a, por lo que cada peque√±o cambio tiene un efecto a gran escala.  Quiero informar un poco sobre el hecho de que agregamos trenes el√©ctricos a la aplicaci√≥n a solicitud de la comunidad.  Y para agradecer a todos los que nos dieron su opini√≥n y para mostrar lo que cambiamos. <br><br>  La primera caracter√≠stica importante es el modo fuera de l√≠nea.  No lo presentamos durante mucho tiempo, porque el significado del programa est√° precisamente en cambios constantes.  Y si ya ha superado la cobertura celular, es mejor actualizar para no llegar al tren cancelado. <br><br>  Al final result√≥ que, no hacerlo es una idea m√°s o menos, porque: <br><br><ol><li>  Muchas personas quieren ver el calendario como un todo, y no de acuerdo con la situaci√≥n actual. </li><li>  Se ha abierto una forma completamente inusual de usar la aplicaci√≥n: desde una escalera mec√°nica.  Y en las escaleras mec√°nicas, generalmente alg√∫n tipo de interconexi√≥n 3G-LTE o simplemente un cambio de estaci√≥n base.  En la hora pico, tambi√©n se "estira" entre los suscriptores celulares.  En general, en el metro a menudo sucede que Internet est√° de alguna manera all√≠, pero de hecho no hay conexi√≥n. </li></ol><br><img src="https://habrastorage.org/webt/8v/5w/bu/8v5wbu4-psyzni-cv-pruq1ypjq.jpeg" width="360"><br><br>  Gracias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">OVAV</a> : comenzamos a detectar tales situaciones.  Ahora el modelo de acci√≥n es este: si hay una conexi√≥n r√°pida, la programaci√≥n actual siempre se carga.  Si no hay conexi√≥n, se muestra la versi√≥n fuera de l√≠nea (esto es en realidad de la memoria cach√© local), en ella est√° la marca de tiempo cuando era relevante.  Mientras navegamos, podemos lograr obtener una actualizaci√≥n (los paquetes son muy livianos) e inmediatamente mostrarla directamente en la interfaz sobre la marcha.  Luego se eliminar√° la marca sobre el modo fuera de l√≠nea. <br><br><img src="https://habrastorage.org/webt/fp/ib/53/fpib53vxjl7mxevx82ejj0sddqy.jpeg" width="360"><br><br>  El modo sin conexi√≥n agrega autom√°ticamente las rutas seleccionadas y los horarios vistos (historial).  Adem√°s, no se trata de una descarga manual y no solo de un cach√©: revisamos todas sus rutas despu√©s de acceder a nuestros servidores y actualizamos todo para el modo sin conexi√≥n.  No puede abrir sus rutas favoritas durante a√±os, pero siempre habr√° una versi√≥n nueva desde el √∫ltimo momento en que tuvo Internet con la aplicaci√≥n abierta.  El historial se almacena en cach√© para esos d√≠as en los que ya mir√≥ el calendario. <br><br>  Como los paquetes son muy livianos (hay datos XML para un par de kilobytes por ruta), todo esto es muy r√°pido. <br><br><h3>  Predicci√≥n tard√≠a </h3><br>  Los trenes el√©ctricos que utilizan la API del sistema de transporte dan un estado con un retraso de un paso gr√°fico (10 minutos), y el estado estar√° en los √∫ltimos 10 minutos.  Es decir, a las 14:22 puede obtener una imagen real del movimiento de los trenes a las 14:12.  Y a las 14:12 se ensamblar√° con un marco de 10 minutos, es decir, en el peor de los casos, el retraso ser√° de 19-20 minutos, en el mejor de los casos - 10. Jugamos un poco con los modelos modelo y los datos hist√≥ricos y aprendimos a reducir esta ventana a dos minutos para predecir el movimiento del resto. trenes  Es decir, si el tren llega tarde no debido a un accidente repentino, sino debido a un cambio t√°ctico en el horario, entonces lo descubriremos de manera muy confiable 8-18 minutos antes de los datos reales. <br><br><h3>  Usabilidad </h3><br>  Sobre todo ten√≠amos preguntas sobre usabilidad.  S√≠, hace un a√±o, no abrimos de inmediato la pantalla que necesitabas: queda un clic adicional en el calendario.  Gracias a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">airy</a> por el boleto elevado. <br><br>  <b>Ahora la √∫ltima b√∫squeda se abre inmediatamente en la pantalla de inicio.</b>  Adem√°s, supervisamos la mitad del d√≠a: si abre la aplicaci√≥n despu√©s del almuerzo, reorganizamos las estaciones de salida y destino en algunos lugares. <br><br>  <b>Encontraron un insecto muy hermoso,</b> que ellos mismos colocaron hace varios a√±os.  Y result√≥ que la misma persona que lo trajo lo estaba buscando.  En general, √©rase una vez, necesit√°bamos un momento cuando ma√±ana llegara el ferrocarril.  La medianoche no encaja.  El hecho es que el d√≠a del planeta termina a medianoche y la gente, en otro momento.  Y cuando veas trenes el√©ctricos para hoy, esperas que despu√©s del de las 23:50, se muestre 00:20 sin cambiar las fechas. <br><br>  La pregunta era d√≥nde establecer el l√≠mite: ¬øaparecer hasta la una de la ma√±ana, hasta las dos, hasta las tres, antes de las cinco de la ma√±ana? <br><br>  Como somos matem√°ticos, modelamos flujos y tomamos en cuenta la distribuci√≥n de vuelos.  Como no hab√≠a grandes datos en ese momento, se limitaban a constantes.  Se present√≥ el tiempo m√°gico para Mosc√∫: 2:52, fue en este momento que fue m√°s conveniente cambiar el d√≠a. <br><br>  Durante unos cinco a√±os, se profundiz√≥ cada vez m√°s en el c√≥digo.  Luego hubo un par de boletos sobre el hecho de que los trenes est√°n desapareciendo por hoy: estas son ciertas consultas de b√∫squeda entre las 00:00 y las 2:52 (pensaron que hoy era ayer).  Y ayer se fueron todos los trenes. <br><br>  Como resultado, nos dividimos en categor√≠as m√°s comprensibles, como deber√≠amos haber hecho inicialmente si no hubi√©ramos estado persiguiendo la optimizaci√≥n en esos a√±os (y est√°bamos persiguiendo). <br><br>  <b>Llovieron quejas sobre un tema brillante:</b> dicen que es imposible ver el horario por la noche.  Oscurecieron, ahora est√° de moda.  Lo que es caracter√≠stico: hasta que se puso de moda, nadie escribi√≥ tales boletos. <br><br>  <b>A veces, los boletos se vierten en el sentido de que "ha perdido trenes el√©ctricos".</b>  No desaparecen aqu√≠, sino en el CPPK y otros transportistas (en el calendario).  El modelo de comportamiento est√°ndar es que cuando un tren abandona el horario, simplemente se disuelve en el aire.  Los usuarios que lo recordaron, piensan que de alguna manera est√°n buscando algo mal y est√°n nerviosos.  Siente la p√©rdida de control.  Ahora hemos creado el fantasma del tren: una l√≠nea en el horario con la etiqueta "Cancelado".  La gente se volvi√≥ m√°s tranquila, pero no se nos considera desarrolladores malvados que roban trenes de ciudadanos honestos. <br><br>  <b>Echo de menos la estaci√≥n.</b>  Hay varios lugares donde los trenes el√©ctricos en una estaci√≥n de ferrocarril est√°n en dos lugares diferentes.  Por ejemplo, en el backend del horario de Mosc√∫ Kursk hay dos piezas: una: Kursky, la segunda: direcciones de Gorki.  Estas son dos estaciones independientes con coordenadas comunes.  El problema result√≥ ser que puede construir una ruta desde uno de ellos a un punto familiar directamente, o puede perder la interfaz y seleccionar otro punto de partida, construir una ruta con cuatro transferencias durante dos horas m√°s, pero al mismo punto.  La gente se quej√≥.  Conectamos dichos lugares en un punto y corregimos autom√°ticamente las entradas en varios casos. <br><br>  <b>La segunda caracter√≠stica similar</b> : hay muchas estaciones con nombres similares.  Le preguntamos expl√≠citamente al usuario qu√© quiere decir exactamente cuando la probabilidad de colisi√≥n es alta. <br><br><img src="https://habrastorage.org/webt/tu/od/w8/tuodw8fxp8myk4guy_xdgzf4k6s.jpeg" width="360"><br><br>  <b>Muchas mejoras menores con la geolocalizaci√≥n:</b> ahora el aviso para ingresar a la estaci√≥n depende de su posici√≥n aproximada, le mostramos las m√°s cercanas. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Karpion</a> escribi√≥ muchos deseos sobre c√≥mo deber√≠a verse la aplicaci√≥n junto con otros modos de transporte.  Pensamos que lo hab√≠amos completado, luego nos enfrentamos con dificultades computacionales, y nuevamente pensamos que lo hab√≠amos completado ... En general, result√≥ en un lugar completamente diferente, en alg√∫n lugar mejor, pero en alg√∫n lugar hay callejones sin salida.  Despu√©s de una versi√≥n estable, mis colegas lo contar√°n con m√°s detalle. <br><br>  Mientras tanto, puedo decir que realizamos un estudio sobre cu√°nto es necesario para cruzar los autobuses con trenes el√©ctricos.  Result√≥ que la correcta.  Pero, dado que amamos los datos, surgi√≥ otra cosa importante en el proceso de investigaci√≥n.  Comparamos las direcciones en Mosc√∫, donde es m√°s conveniente en autob√∫s y d√≥nde, en tren. <br><br>  Mire, hemos identificado las direcciones donde importa (o donde puede ir directamente en autob√∫s donde se necesitan trenes de cercan√≠as).  Ordenar por popularidad de destino.  Entonces, si tiene familiares que viven en estas ciudades, entonces quiz√°s esta comparaci√≥n les resulte interesante. <br><p><br></p><div class="scrollable-table"><table><tbody><tr><td><br><p>  <b>Direcci√≥n</b> </p><br></td><td><br><p>  <b>Precio, autob√∫s</b> </p><br></td><td><br><p>  <b>Precio, tren</b> </p><br></td><td><br><p>  <b>Traslado en tren</b> </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Mozhaysk </p><br></td><td><br><p>  257 </p><br></td><td><br><p>  276 </p><br></td><td><br><p>  no </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Obninsk </p><br></td><td><br><p>  269 </p><br></td><td><br><p>  284 </p><br></td><td><br><p>  no </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Stupino </p><br></td><td><br><p>  264 </p><br></td><td><br><p>  279 </p><br></td><td><br><p>  no </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Volokolamsk </p><br></td><td><br><p>  273 </p><br></td><td><br><p>  322 </p><br></td><td><br><p>  no </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Egorievsk </p><br></td><td><br><p>  275 </p><br></td><td><br><p>  276 </p><br></td><td><br><p>  no </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Pereslavl-Zalessky </p><br></td><td><br><p>  285 </p><br></td><td><br><p>  - </p><br></td><td><br><p>  - </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Kubinka </p><br></td><td><br><p>  94 </p><br></td><td><br><p>  161 </p><br></td><td><br><p>  no </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Petushki </p><br></td><td><br><p>  253 </p><br></td><td><br><p>  337 </p><br></td><td><br><p>  no </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Voskresensk </p><br></td><td><br><p>  213 </p><br></td><td><br><p>  230 </p><br></td><td><br><p>  no </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Suzdal </p><br></td><td><br><p>  605 </p><br></td><td><br><p>  - </p><br></td><td><br><p>  - </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Riaz√°n </p><br></td><td><br><p>  379 </p><br></td><td><br><p>  462 </p><br></td><td><br><p>  no </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Zaraysk </p><br></td><td><br><p>  336 </p><br></td><td><br><p>  - </p><br></td><td><br><p>  - </p><br></td></tr><tr><td><br><p>  Nizhny Novgorod - Murom </p><br></td><td><br><p>  591 </p><br></td><td><br><p>  - </p><br></td><td><br><p>  - </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Aleksin </p><br></td><td><br><p>  484 </p><br></td><td><br><p>  658 </p><br></td><td><br><p>  si </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Ozyory </p><br></td><td><br><p>  286 </p><br></td><td><br><p>  368 </p><br></td><td><br><p>  si </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Gus-Khrustalny </p><br></td><td><br><p>  517 </p><br></td><td><br><p>  701 </p><br></td><td><br><p>  si </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Yasnogorsk </p><br></td><td><br><p>  385 </p><br></td><td><br><p>  388 </p><br></td><td><br><p>  no </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Zubtsov </p><br></td><td><br><p>  436 </p><br></td><td><br><p>  - </p><br></td><td><br><p>  - </p><br></td></tr><tr><td><br><p>  Mosc√∫ - Lakinsk </p><br></td><td><br><p>  275 </p><br></td><td><br><p>  421 </p><br></td><td><br><p>  no </p><br></td></tr><tr><td><br><p>  Veliky Novgorod - Soltsy </p><br></td><td><br><p>  200 </p><br></td><td><br><p>  - </p><br></td><td><br><p>  - </p><br></td></tr></tbody></table></div><br><br>  En general, aproximadamente el 50% de las direcciones de los trenes (en las cuales ambas estaciones tienen conexi√≥n con la ciudad) tienen una alternativa al horario del autob√∫s.  Al mismo tiempo, la intersecci√≥n con los trenes de larga distancia es peque√±a, alrededor del 7%. <br><br>  <b>Hicieron algo muy bueno (para nosotros): la caracter√≠stica "plataforma y ruta".</b>  Es en las 50 estaciones m√°s populares donde comenzamos a predecir d√≥nde se servir√° el tren el√©ctrico en funci√≥n de la historia de su suministro y los movimientos del tren.  Al mismo tiempo, los pasajeros de la aplicaci√≥n pueden votar por la plataforma de salida.  Es decir, usted vino, se subi√≥ a su tren y hizo clic de esta manera: <br><br><img src="https://habrastorage.org/webt/pt/pd/69/ptpd69bodyu-iab6j7x0rip_ygs.png" width="360"><br><br>  Si hay suficientes votos, el camino y la plataforma se muestran a todos los pasajeros.  Si confiamos en usted (y confiamos despu√©s de unos pocos votos correctos), tendr√° una voz m√°s poderosa.  Hace quince a√±os, desconocidos nos llamaron para decir que en alg√∫n lugar hubo una cancelaci√≥n, y lo pusimos en un horario (porque solo hab√≠a papel).  Incluso entonces, recordamos que los pasajeros estaban felices de ayudarse mutuamente.  Creo que ahora entenderemos c√≥mo hacerlo mejor y seguiremos mirando en esta direcci√≥n. <br><br>  Bueno, y aunque vimos diferentes caracter√≠sticas para mayor comodidad, tambi√©n hicimos un modelo de la poblaci√≥n de trenes.  Ayuda a predecir si viajar√° en diferentes trenes de pie o sentado.  Mientras lo ejecutamos, probablemente te cuente m√°s sobre c√≥mo termin√≥. <br><br>  Continuamos viendo el horario m√°s preciso en Runet, nos mantenemos en contacto y estamos listos para que usted diga qu√© m√°s puede y debe hacerse.  No siempre hacemos las cosas necesarias r√°pidamente, pero siempre escuchamos.  Por lo tanto, rega√±arnos o alabarnos, por favor: esto es √∫til. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/465303/">https://habr.com/ru/post/465303/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465293/index.html">C√≥mo abandonamos el gran hackathon y comenzamos a hacer viajes para equipos individuales</a></li>
<li><a href="../465295/index.html">C√≥mo trabaj√© en Turqu√≠a y conoc√≠ el mercado local</a></li>
<li><a href="../465297/index.html">"Lo mejor que he hecho en mi carrera es enviar el trabajo al infierno". Chris Dancy acerca de convertir la vida en datos</a></li>
<li><a href="../465299/index.html">Apache NIFI: una breve descripci√≥n general de las caracter√≠sticas en la pr√°ctica</a></li>
<li><a href="../465301/index.html">C√≥mo construir un proceso de dise√±o de comercio electr√≥nico para obtener todos los datos que necesita</a></li>
<li><a href="../465309/index.html">Soy el mayor malvado en el desarrollo de juegos indie</a></li>
<li><a href="../465311/index.html">Sistema de monitoreo de veh√≠culos de bricolaje</a></li>
<li><a href="../465315/index.html">Kafka y microservicios: una visi√≥n general</a></li>
<li><a href="../465319/index.html">Malentendidos del pasado</a></li>
<li><a href="../465321/index.html">En el futuro, los cient√≠ficos pueden aprender a predecir exactamente lo que recordar√°.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>