<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤝 👨‍✈️ 🛸 Station de travail cryptographique basée sur des normes de clé publique. Configuration des jetons PKCS # 11 👨🏼‍💻 👩🏻‍🎨 🤾🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En examinant à nouveau les fonctionnalités de l'utilitaire cryptoarmpkcs , j'ai remarqué que celui-ci, fonctionnant principalement avec les jetons cry...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Station de travail cryptographique basée sur des normes de clé publique. Configuration des jetons PKCS # 11</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476210/"><img src="https://habrastorage.org/webt/ak/4_/mh/ak4_mhyj16_mq5k5h9zd05dnor0.png" align="left">  En examinant à nouveau les fonctionnalités de l'utilitaire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cryptoarmpkcs</a> , j'ai remarqué que celui-ci, fonctionnant principalement avec les jetons cryptographiques / cartes à puce PKCS # 11, n'a pas de fonctionnalité intégrée pour leur configuration.  Nous parlons d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">initialiser des jetons</a> , de définir des codes PIN, etc.  Et il a été décidé d'ajouter cette fonctionnalité.  La première étape a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">consisté</a> à étendre les fonctionnalités du package <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TclPKCS11</a> , dont la bibliothèque est écrite en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">C.</a> <br><br><h3>  <font color="blue">Nouvelles fonctionnalités TclPKCS11</font> </h3><br>  Trois nouvelles fonctionnalités sont apparues dans le package: <br><br><pre><code class="plaintext hljs">::pki::pkcs11::inittoken &lt;handle&gt; &lt;slotId&gt; &lt;SO-pin&gt; &lt;label for token&gt;</code> </pre> <br><pre> <code class="plaintext hljs">::pki::pkcs11::inituserpin &lt;handle&gt; &lt;slotId&gt; &lt;SO-pin&gt; &lt;USER-pin&gt;</code> </pre> <br><pre> <code class="plaintext hljs">::pki::pkcs11::setpin &lt;handle&gt; &lt;slotId&gt; &lt;so | user&gt; &lt;oldpin&gt; &lt;newpin&gt;</code> </pre> <a name="habracut"></a><br>  La première fonction :: pki :: pkcs11 :: inittoken est d'initialiser le jeton.  Il faut garder à l'esprit que si cette fonction est appliquée à un jeton de travail, tous les objets qu'il contient seront détruits. <br><br>  La deuxième fonction :: pki :: pkcs11 :: inituserpin est pour initialiser un PIN utilisateur (PIN UTILISATEUR). <br><br>  Après l'initialisation initiale du code PIN utilisateur, il doit être immédiatement remplacé par le code PIN, qui sera utilisé à l'avenir, et le stocker, comme le SO-PIN, à l'abri des regards indiscrets.  Pour des raisons de sécurité, les jetons, en règle générale, ne vous permettent pas de vous y connecter avec le code PIN initial. <br><br>  Pour changer les codes PIN, une troisième fonction est utilisée, à savoir :: pki :: pkcs11 :: setpin.  Cette fonction vous permet de modifier à la fois un code PIN utilisateur et un code SO-PIN. <br><br>  Il convient également de garder à l'esprit que les jetons, en règle générale, ne permettent pas de restaurer le SO-PIN d'origine (par défaut).  Mais si vous réinitialisez le jeton, vous obtiendrez à nouveau le SO-PIN par défaut.  L'implémentation du package TclPKCS11 peut être visualisée sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github</a> . <br><br>  Maintenant, ayant sous la main, le package TclPKCS11 avec de nouvelles fonctions, il n'était pas difficile d'implémenter une interface graphique pour ces fonctions: <br><br><img src="https://habrastorage.org/webt/kf/tz/br/kftzbrb15wxmo6z31ei2wl9aa7c.png"><br><br><h3>  <font color="blue">Jetons d'entraînement</font> </h3><br>  Mais avant de les utiliser, faisons attention au fait qu'un autre bouton «Créer des jetons» a été ajouté à la fonctionnalité de l'utilitaire. <br><br>  Cela est dû au fait que tout le monde n'a pas le jeton matériel PKCS # 11 avec prise en charge de la cryptographie russe, et si c'est le cas, il est effrayant de l'utiliser à des fins éducatives.  Et juste pour que l'utilitaire puisse être facilement utilisé à des fins éducatives, tout d'abord, le bouton «Créer des jetons» est apparu.  En cliquant sur ce bouton, vous verrez des instructions sur la façon d'obtenir des jetons logiciels ou cloud: <br><br><img src="https://habrastorage.org/webt/0g/gr/y8/0ggry8mqbsx-jrhuv9r0xkky3go.png"><br><br>  Ces jetons implémentent les dernières recommandations <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TK-26</a> pour PKCS # 11 v.2.40. <br><br>  Nous verrons brièvement comment obtenir un jeton cloud.  Téléchargez le package de distribution nécessaire, décompressez-le si nécessaire et exécutez-le.  Si nous n'avons pas de jeton cloud, nous recevrons le message suivant: <br><br><img src="https://habrastorage.org/webt/b1/3j/of/b13jofvep6tfa2ubmxxvgq0xite.png"><br><br>  Comme nous n'avons pas encore de jeton cloud, cliquez sur le bouton "S'inscrire dans le cloud": <br><br><img src="https://habrastorage.org/webt/vh/l1/em/vhl1emb5c_osrid40cykaz-srcc.png"><br><br>  Après avoir rempli les champs, cliquez sur le bouton "Terminer": <br><br><img src="https://habrastorage.org/webt/2s/sy/jn/2ssyjneg9ioqrn91pr84rthwi-4.png"><br><br>  Puisque nous parlons principalement de formation, nous pouvons enregistrer un mot de passe pour accéder au cloud (mais pas le token) sur le lieu de travail: <br><br><img src="https://habrastorage.org/webt/mr/7i/xx/mr7ixxhx7odzwumrhvnenak_nri.png"><br><br><h3>  <font color="blue">Initialisation du jeton</font> </h3><br>  Maintenant que nous sommes enregistrés dans le cloud, nous quittons l'utilitaire guils11cloud_conf et retournons à l'utilitaire cryptoarmpkcs pour configurer le jeton cloud.  Il convient de noter ici que la bibliothèque de jetons cloud sera enregistrée dans le dossier ls11cloud créé dans le répertoire personnel de l'utilisateur.  C'est cette bibliothèque qui devra être sélectionnée comme bibliothèque PKCS # 11 pour le jeton cloud.  Après avoir choisi une bibliothèque, vous pouvez voir les mécanismes cryptographiques pris en charge: <br><br><img src="https://habrastorage.org/webt/yi/om/ss/yiomssfq9j5d0l7dhda6ji6h7ck.png"><br><br>  Nous revenons à l'initialisation du token cloud en cliquant sur le bouton "Token Configuration".  Nous sélectionnons l'opération «Initialisation du token», remplissons les champs (rappelez-vous que le SO-PIN par défaut est 87654321) et cliquez sur le bouton «Effectuer l'opération»: <br><br><img src="https://habrastorage.org/webt/sx/7t/mm/sx7tmmjsjqkwucovlkvhhsw6t04.png"><br><br>  Tous les jetons sont prêts à fonctionner.  Mais n'oubliez pas de changer le SO-PIN et de changer périodiquement le PIN de l'utilisateur.  En utilisant un schéma similaire, vous pouvez créer un jeton logiciel.  Les personnes intéressées peuvent essayer: <br><br><img src="https://habrastorage.org/webt/_8/3i/za/_83izagmlgyw9obbk0uamo4zee4.png"><br><br>  Maintenant, nous pouvons y stocker nos certificats personnels, signer des documents, faire tout ce qui a été écrit dans cette série d'articles. <br><br><h3>  <font color="blue">Innovations à venir dans PKI / PKI</font> </h3><br>  Le 7 novembre 2019, la Douma a adopté en première lecture des amendements à la loi «Sur les signatures électroniques».  Cet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">amendement</a> s'applique à toutes les organisations et aux entrepreneurs individuels, car les règles de délivrance des signatures électroniques vont changer. <br><br>  Si j'ai tout compris correctement, les personnes morales et les entrepreneurs individuels ne pourront recevoir de certificats qualifiés qu'au Service fédéral des impôts et aux organisations financières de la Banque centrale de la Fédération de Russie.  Et seule l'utilisation de ces certificats peut être définie <br>  Signature électronique qualifiée améliorée (Cades-XLT1). <br><br>  Les centres de certification (CA) accrédités par le Ministère des télécommunications et des communications de masse ne pourront délivrer de tels certificats qu'à des particuliers. <br><br>  En outre, les exigences pour les CA changeront considérablement: les fonds propres devraient être augmentés de 7 millions à 500 millions - 1 milliard, le montant de la responsabilité d'assurance passe de 30 millions à 300-500 millions de roubles, la période d'accréditation est réduite de 5 à 3 ans. <br><br>  Le projet de loi a déjà suscité de vives critiques.  Les principales plaintes sont que les changements entraîneront la fermeture de la grande majorité des autorités de certification commerciales, nécessiteront des dépenses budgétaires importantes pour étendre et maintenir les capacités du service fédéral des impôts des autorités compétentes, ainsi que la concentration de tous les types de risques sur une seule infrastructure, qui deviendra une cible pratique pour les cyberattaques. <br><br>  Il y a un autre amendement - l'obligation de signer les documents de l'entreprise non pas par un mais par deux signatures qualifiées renforcées en même temps.  Le chef de l'organisation devra apposer sur le document la signature de la personne morale et une signature numérique personnelle à titre individuel. <br><br>  Et ici, l'utilitaire cryptoarmpkcs sera très, très utile, car sa fonctionnalité vous permet de mettre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plusieurs signatures</a> sous le document, ainsi que de voir qui et quand a signé le document: <br><br><img src="https://habrastorage.org/webt/uy/tq/yl/uytqylilmmhwhzbvpto85vljcwq.png"><br><br>  PS Pour ceux qui veulent obtenir des utilitaires pour la première fois, cela peut encore être fait ici: <br><div class="spoiler">  <b class="spoiler_title">Distributions pour Linux, OS X et Windows</b> <div class="spoiler_text"><ul><li>  <a href="">Linux32</a> </li><li>  <a href="">Linux64</a> </li><li>  <a href="">OS X</a> </li><li>  <a href="">WIN32</a> </li><li>  <a href="">WIN64</a> </li></ul><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr476210/">https://habr.com/ru/post/fr476210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr476192/index.html">Un tweet d'extension de vie important</a></li>
<li><a href="../fr476194/index.html">Habr Weekly # 27 / Chromebooks vs Macbooks, comment rédiger des CV sympas, quel salaire demander, AR-points pour 3500 $</a></li>
<li><a href="../fr476198/index.html">Comment j'ai créé mon premier site Web et ce qui en est sorti</a></li>
<li><a href="../fr476206/index.html">Sauvegardes incrémentielles postgresql avec pgbackrest - un cours pour les jeunes combattants du développeur</a></li>
<li><a href="../fr476208/index.html">Web Almanac 2019: disponibilité</a></li>
<li><a href="../fr476212/index.html">Prouvé en pratique: Veeam Backup & Replication 9.5 Update 4 pour travailler avec une bande magnétique</a></li>
<li><a href="../fr476214/index.html">La naissance de la mascotte Slurm</a></li>
<li><a href="../fr476216/index.html">Web Résolution de problèmes avec r0ot-mi. 2e partie</a></li>
<li><a href="../fr476220/index.html">Quel est le problème avec la validation des données et qu'est-ce que le principe de substitution de Liskov a à voir avec cela?</a></li>
<li><a href="../fr476222/index.html">Introduction aux systèmes de recommandation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>