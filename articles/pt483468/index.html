<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🔧 👩🏼‍💻 👨🏻‍💻 Testes de integração de vibração - é fácil 🙆🏿 🐈 💛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Acho que muitas pessoas já estão familiarizadas com o Flutter e, pelo menos por interesse, começaram aplicativos simples nele. Chegou a hora de garant...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Testes de integração de vibração - é fácil</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483468/"><p>  Acho que muitas pessoas já estão familiarizadas com o Flutter e, pelo menos por interesse, começaram aplicativos simples nele.  Chegou a hora de garantir que tudo funcione conforme necessário e os testes de integração nos ajudarão nisso. <br><img src="https://habrastorage.org/webt/rc/uh/yo/rcuhyopuvni8ghulnrotc1hfiru.png"></p><a name="habracut"></a><br><p>  Os testes de integração no Flutter são escritos usando o Flutter Driver, para o qual existe um <a href="https://flutter.dev/docs/cookbook/testing/integration/introduction" rel="nofollow">tutorial simples e compreensível no site oficial</a> .  Em sua estrutura, esses testes são semelhantes ao <a href="https://developer.android.com/training/testing/espresso" rel="nofollow">Espresso</a> do mundo Android.  Primeiro, você precisa encontrar os elementos da interface do usuário na tela: </p><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SerializableFinder button = find.byValueKey(<span class="hljs-string"><span class="hljs-string">"button"</span></span>);</code> </pre> <br><p>  em seguida, execute algumas ações com eles: </p><br><pre> <code class="java hljs">driver = await FlutterDriver.connect(); ... await driver.tap(button);</code> </pre> <br><p>  e verifique se os elementos de interface do usuário necessários estão no estado desejado: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SerializableFinder text = find.byValueKey(<span class="hljs-string"><span class="hljs-string">"text"</span></span>); expect(await driver.getText(text), <span class="hljs-string"><span class="hljs-string">"some text"</span></span>);</code> </pre> <br><p>  Com um exemplo simples, é claro, tudo parece elementar.  Mas com o crescimento do aplicativo em teste e o aumento no número de testes, não quero duplicar a pesquisa de elementos da interface do usuário antes de cada teste.  Além disso, você precisará estruturar esses elementos da interface do usuário, pois pode haver muitas telas.  Para fazer isso, torne os testes de escrita mais convenientes. </p><br><h2 id="screen-objects">  Objetos de tela </h2><br><p>  No Android ( <a href="https://github.com/agoda-com/Kakao" rel="nofollow">Kakao</a> ), esse problema é resolvido agrupando elementos da interface do usuário de cada tela em Screen (Page-Object).  Uma abordagem semelhante pode ser aplicada aqui, com a exceção de que no Flutter, para executar ações com elementos da interface do usuário, você precisa não apenas do <code>Finder</code> (para procurar um elemento da interface do usuário), mas também do <code>FlutterDriver</code> (para executar uma ação); portanto, é necessário armazenar um link para o <code>FlutterDriver</code> no <code>Screen</code> . </p><br><p>  Para definir cada elemento da interface do usuário, adicionamos a classe <a href="" rel="nofollow"><code>DWidget</code></a> (neste caso, D - da palavra Dart).  Para criar um <code>DWidget</code> precisará do <code>FlutterDriver</code> , com o qual as ações serão executadas nesse elemento da interface do usuário, bem como do <code>ValueKey</code> , que coincide com o Flutter do <code>ValueKey</code> do widget do aplicativo com o qual queremos interagir: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> FlutterDriver _driver; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SerializableFinder _finder; DWidget(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._driver, dynamic valueKey) : _finder = find.byValueKey(valueKey); ...</code> </pre> <br><p>  <code>find.byValueKey(…)</code> ao criar manualmente cada <code>DWidget</code> inconveniente; portanto, é melhor passar o valor <code>ValueKey</code> para o <code>ValueKey</code> , e o próprio <code>DWidget</code> obterá o <code>SerializableFinder</code> desejado.  Também não é muito conveniente transmitir manualmente o <code>FlutterDriver</code> ao criar cada <code>DWidget</code> , para que você possa armazenar o <code>FlutterDriver</code> no <a href="" rel="nofollow"><code>BaseScreen</code></a> e transferi-lo para o <code>DWidget</code> , além de adicionar um novo método ao <code>BaseScreen</code> para criar o <code>BaseScreen</code> : </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseScreen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> FlutterDriver _driver; BaseScreen(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._driver); <span class="hljs-function"><span class="hljs-function">DWidget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dWidget</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dynamic key)</span></span></span><span class="hljs-function"> </span></span>=&gt; DWidget(_driver, key); ...</code> </pre> <br><p>  Assim, criar classes de telas e obter elementos de interface do usuário nelas será muito mais fácil: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseScreen</span></span></span><span class="hljs-class"> </span></span>{ MainScreen(FlutterDriver driver) : <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(driver); DWidget get button =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'button'</span></span>); DWidget get textField =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'text_field'</span></span>); ... }</code> </pre> <br><h2 id="izbavlyaemsya-ot-await">  Livrar-se de <code>await</code> </h2><br><p>  Outra coisa não muito conveniente ao escrever testes com o <code>FlutterDriver</code> é a necessidade de <code>await</code> antes de cada ação: </p><br><pre> <code class="java hljs">await driver.tap(button); await driver.scrollUntilVisible(list, checkBox); await driver.tap(checkBox); await driver.tap(text); await driver.enterText(<span class="hljs-string"><span class="hljs-string">"some text"</span></span>);</code> </pre> <br><p>  Esquecer a <code>await</code> é fácil e, sem ela, os testes não funcionarão corretamente, porque os métodos do <code>driver</code> retornam <code>Future&lt;void&gt;</code> e, quando são chamados sem <code>await</code> são executados até a primeira <code>await</code> dentro do método, e o restante do método é "adiado para mais tarde". </p><br><p>  Você pode <a href="" rel="nofollow"><code>TestAction</code></a> isso criando um <a href="" rel="nofollow"><code>TestAction</code></a> que "encapsulará" o <code>Future</code> para que possamos esperar até que uma ação seja concluída antes de passar para a próxima: </p><br><pre> <code class="java hljs">typedef TestAction = <span class="hljs-function"><span class="hljs-function">Future&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;</code> </pre> <br><p>  (essencialmente, <code>TestAction</code> é qualquer função (ou lambda) que retorna um <code>Future&lt;void&gt;</code> ) </p><br><p>  Agora você pode executar facilmente a sequência <code>TestAction</code> sem espera desnecessária: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">Future&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runTestActions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Iterable&lt;TestAction&gt; actions)</span></span></span><span class="hljs-function"> async </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">final</span></span> action in actions) { <span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } }</code> </pre> <br><h2 id="ispolzuem-testaction-v-dwidget">  Usando <code>TestAction</code> em um <code>DWidget</code> </h2><br><p>  <code>DWidget</code> usado para interagir com os elementos da interface do usuário e será muito conveniente se essas ações forem <code>TestAction</code> para que possam ser usadas no método <code>runTestAction</code> .  Para fazer isso, a classe <code>DWidget</code> terá métodos de ação: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> FlutterDriver _driver; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SerializableFinder _finder; ... <span class="hljs-function"><span class="hljs-function">TestAction </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">({Duration timeout})</span></span></span><span class="hljs-function"> </span></span>=&gt; () =&gt; _driver.tap(_finder, timeout: timeout); <span class="hljs-function"><span class="hljs-function">TestAction </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String text, {Duration timeout})</span></span></span><span class="hljs-function"> </span></span>=&gt; () async { await _driver.tap(_finder, timeout: timeout); await _driver.enterText(text ?? <span class="hljs-string"><span class="hljs-string">""</span></span>, timeout: timeout); }; ... }</code> </pre> <br><p>  Agora você pode escrever testes da seguinte maneira: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseScreen</span></span></span><span class="hljs-class"> </span></span>{ MainScreen(FlutterDriver driver) : <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(driver); DWidget get field_1 =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'field_1'</span></span>); DWidget get field_2 =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'field_2'</span></span>); <span class="hljs-function"><span class="hljs-function">DWidget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">field2Variant</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i)</span></span></span><span class="hljs-function"> </span></span>=&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'variant_$i'</span></span>); DWidget get result =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'result'</span></span>); } … <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> mainScreen = MainScreen(driver); <span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runTestActions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([ mainScreen.result.hasText(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"summa = 0"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, mainScreen.field_1.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"3"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, mainScreen.field_2.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">, mainScreen.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">field2Variant</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">, mainScreen.result.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"summa = 5"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, ])</span></span>;</code> </pre> <br><p>  Se você precisar executar alguma ação em <code>runTestActions</code> que não esteja relacionada ao <code>DWidget</code> , será necessário criar uma lambda que retorne um <code>Future&lt;void&gt;</code> : </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runTestActions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([ mainScreen.result.hasText(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"summa = 0"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>=&gt; driver.requestData(<span class="hljs-string"><span class="hljs-string">"some_message"</span></span>), () async =&gt; print(<span class="hljs-string"><span class="hljs-string">"some_text"</span></span>), mainScreen.field_1.setText(<span class="hljs-string"><span class="hljs-string">"3"</span></span>), ]);</code> </pre> <br><h2 id="flutterdriverhelper">  FlutterDriverHelper </h2><br><p>  <code>FlutterDriver</code> possui vários métodos para interagir com elementos da interface do usuário (pressionar, receber e inserir texto, rolagem etc.) e, para esses métodos, o <code>DWidget</code> possui métodos correspondentes que retornam <code>TestAction</code> . </p><br><p>  Por conveniência, todo o código descrito neste artigo é publicado como a biblioteca <a href="https://pub.dev/packages/flutter_driver_helper" rel="nofollow">FlutterDriverHelper em pub.dev</a> . </p><br><p>  Para rolar pelas listas nas quais os elementos são criados dinamicamente (por exemplo, <code>ListView.builder</code> ), o <code>FlutterDriver</code> possui um método <code>scrollUntilVisible</code> : </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">Future&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scrollUntilVisible</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( SerializableFinder scrollable, SerializableFinder item, { </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> alignment = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dxScroll = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dyScroll = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Duration timeout, })</span></span></span><span class="hljs-function"> async </span></span>{ ... }</code> </pre> <br><p>  Esse método rola o widget rolável na direção especificada até que o widget de <code>item</code> apareça na tela (ou até que <code>timeout</code> um <code>timeout</code> ).  Para não passar <code>scrollable</code> em cada rolagem, a classe DScrollItem foi adicionada, que herda um <code>DWidget</code> e representa um item da lista.  Ele contém um link para <code>scrollable</code> ; portanto, ao rolar, resta apenas especificar <code>dyScroll</code> ou <code>dxScroll</code> : </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SecondScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseScreen</span></span></span><span class="hljs-class"> </span></span>{ SecondScreen(FlutterDriver driver) : <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(driver); DWidget get list =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">"list"</span></span>); <span class="hljs-function"><span class="hljs-function">DScrollItem </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">item</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span><span class="hljs-function"> </span></span>=&gt; dScrollItem(<span class="hljs-string"><span class="hljs-string">'item_$index'</span></span>, list); } ... <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> secondScreen = SecondScreen(driver); <span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runTestActions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([ secondScreen.item(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">42</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scrollUntilVisible</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dyScroll: </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">-300</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, ... ])</span></span>;</code> </pre> <br><p>  Durante os testes, você pode capturar imagens do aplicativo e o <code>FlutterDriverHelper</code> possui um <code>FlutterDriverHelper</code> <a href="" rel="nofollow"><code>Screenshoter</code></a> que salva as capturas de tela na pasta desejada com o horário atual e pode trabalhar com o <code>TestAction</code> . </p><br><h2 id="drugie-problemy-i-ih-resheniya">  Outros problemas e suas soluções </h2><br><ul><li>  Não consegui encontrar uma maneira padrão de clicar nos botões nas caixas de diálogo de hora / data - tenho que usar o <a href="" rel="nofollow"><code>TestHooks</code></a> .  <code>TestHooks</code> também pode ser útil para alterar a hora / data atual durante o teste. </li><li>  Na lista suspensa de <code>DropdownButtonFormField</code> você precisa especificar a <code>key</code> não para <code>DropdownMenuItem</code> , mas para o <code>child</code> desse <code>DropdownMenuItem</code> ; caso contrário, o <code>Flutter Driver</code> não poderá encontrá-lo.  Além disso, a rolagem na lista suspensa ainda não funciona ( <a href="https://github.com/flutter/flutter/issues/37903" rel="nofollow">problema no github.com</a> ). </li><li>  o método <code>FlutterDriver.getCenter</code> retorna <code>Future&lt;DriverOffset&gt;</code> , mas <code>DriverOffset</code> não faz parte da API pública ( <a href="https://github.com/flutter/flutter/issues/44367" rel="nofollow">problema no github.com</a> ) </li><li>  Existem algumas coisas mais problemáticas e não óbvias que já existem.  Você pode ler sobre eles em um <a href="https://medium.com/flutter-community/blazingly-fast-flutter-driver-tests-5e375c833aa" rel="nofollow">artigo maravilhoso</a> .  Particularmente útil foi a capacidade de executar testes na área de trabalho e redefinir o estado do aplicativo antes do início de cada teste. </li><li>  Você pode executar testes usando as ações do Github.  Mais detalhes <a href="https://medium.com/flutter-community/run-flutter-driver-tests-on-github-actions-13c639c7e4ab" rel="nofollow">aqui</a> . </li></ul><br><h2 id="todo">  Todo </h2><br><p>  Os futuros <code>FlutterDriverHelper</code> do <code>FlutterDriverHelper</code> incluem: </p><br><ul><li>  rolagem automática para o item da lista desejado se, no momento do acesso, não estiver visível na tela (como é feito na biblioteca <a href="https://github.com/KasperskyLab/Kaspresso" rel="nofollow">Kaspresso</a> para Android).  Se possível, mesmo nas duas direções. </li><li>  interceptores para ações executadas com um <code>Dwidget</code> ou <code>DscrollItem</code> . </li></ul><br><p>  <em>Comentários e feedback construtivo são bem-vindos.</em> </p><br><p>  <strong>Atualização (15/01/2020)</strong> : na versão <a href="https://pub.dev/packages/flutter_driver_helper" rel="nofollow">1.1.0,</a> <code>TestAction</code> se tornou uma classe, com o campo <code>String name</code> da <code>String name</code> .  E, graças a isso, foi <code>runTestActions</code> log de todas as ações executadas no método <code>runTestActions</code> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt483468/">https://habr.com/ru/post/pt483468/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt483454/index.html">Mudando de Mercurial para GIT no Atlassian Bitbucket com salvando arquivos em cirílico</a></li>
<li><a href="../pt483458/index.html">Assistente de Banco de Dados GreenPig</a></li>
<li><a href="../pt483460/index.html">HowTo SQL: construindo cadeias usando funções de janela</a></li>
<li><a href="../pt483462/index.html">Cale a boca e pegue meu dinheiro</a></li>
<li><a href="../pt483466/index.html">Introduzindo o método de retropropagação</a></li>
<li><a href="../pt483470/index.html">Coloque blocos de forma eficiente (Pro CSS, SVG, padrão e muito mais)</a></li>
<li><a href="../pt483472/index.html">Exclua tudo: como apagar dados e restaurar o NVMe SSD para as configurações de fábrica</a></li>
<li><a href="../pt483476/index.html">A moral do transporte robótico: o problema do carrinho, riscos e consequências</a></li>
<li><a href="../pt483478/index.html">Sol, vento e água ver 0.1</a></li>
<li><a href="../pt483480/index.html">Palavras cruzadas "Sinta-se como um analista de SOC"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>