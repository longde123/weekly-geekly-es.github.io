<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêøÔ∏è ‚õ∞Ô∏è üöº Desarrollo de Docker en el subsistema de Windows para Linux (WSL) üí∑ üèõÔ∏è üõë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Para trabajar completamente con el proyecto en Docker en WSL, debe instalar WSL 2. Al momento de escribir, solo puede usarlo como parte del Programa W...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desarrollo de Docker en el subsistema de Windows para Linux (WSL)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474346/"><img src="https://habrastorage.org/webt/mi/k4/kf/mik4kfb2_bof3_fhmouttfkx_h8.jpeg"><br><br><br><p>  Para trabajar completamente con el proyecto en Docker en WSL, debe instalar WSL 2. Al momento de escribir, solo puede usarlo como parte del Programa Windows Insider (WSL 2 est√° disponible en las versiones 18932 y posteriores).  Tambi√©n vale la pena mencionar por separado que se requiere una versi√≥n de Windows 10 Pro para instalar y configurar Docker Desktop. </p><br><p>  <b>Importante!</b>  WSL 2 ya no ha necesitado Docker Desktop para Windows 10. La forma de hacerlo sin ella se describe en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">secci√≥n Docker Pro en Ubuntu</a> . </p><br><a name="habracut"></a><br><h3>  Primeros pasos </h3><br><p>  Despu√©s de ingresar al programa de evaluaci√≥n preliminar e instalar las actualizaciones, debe instalar la distribuci√≥n de Linux (en este ejemplo, se utiliza Ubuntu 18.04) y Docker Desktop con WSL 2 Tech Preview: </p><br><ol><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Vista previa t√©cnica de Docker Desktop WSL 2</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ubuntu 18.04 de la Tienda Windows</a> </li></ol><br><p>  En ambos p√°rrafos, seguimos todas las instrucciones de instalaci√≥n y configuraci√≥n. </p><br><h3>  Instalar la distribuci√≥n Ubuntu 18.04 </h3><br><p>  Antes de iniciar Ubuntu 18.04, debe habilitar Windows WSL y Windows Virtual Machine Platform ejecutando dos comandos en PowerShell: </p><br><ol><li> <code>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</code> (requiere reiniciar la computadora) </li><li> <code>Enable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform</code> </li> </ol><br><p>  Despu√©s de que necesite asegurarse de que usaremos WSL v2.  Para hacer esto, en el terminal WSL o PowerShell, ejecute los siguientes comandos secuencialmente: </p><br><ul><li>  <code>wsl -l -v</code> : ver qu√© versi√≥n est√° instalada actualmente.  Si es 1, entonces mu√©vase m√°s abajo </li><li>  <code>wsl --set-version ubuntu 18.04 2</code> - para actualizar a la versi√≥n 2 </li><li>  <code>wsl -s ubuntu 18.04</code> - instala Ubuntu 18.04 como la distribuci√≥n predeterminada </li></ul><br><p>  Ahora puede iniciar Ubuntu 18.04, configurar (especificar un nombre de usuario y contrase√±a). </p><br><h3>  Instalar Docker Desktop </h3><br><p>  <b>Importante!</b>  WSL 2 ya no ha necesitado Docker Desktop para Windows 10. La forma de hacerlo sin ella se describe en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">secci√≥n Docker Pro en Ubuntu</a> . </p><br><p>  Durante la instalaci√≥n, siga las instrucciones.  La computadora requerir√° un reinicio despu√©s de la instalaci√≥n y al principio comenzar a encender Hyper-V (debido a qu√© soporte, se requiere una versi√≥n de Windows 10 Pro). </p><br><p>  <b>Importante!</b>  Si Docker Desktop informa que est√° bloqueado por el firewall, vaya a la configuraci√≥n del antivirus y realice los siguientes cambios en las reglas del firewall (en este ejemplo, Kaspersky Total Security se utiliza como antivirus): </p><br><ul><li>  Vaya a Configuraci√≥n -&gt; Protecci√≥n -&gt; Firewall -&gt; Configurar reglas de paquetes -&gt; Servicio local (TCP) -&gt; Cambiar </li><li>  Elimine el puerto 445 de la lista de puertos locales </li><li>  Guardar </li></ul><br><p>  Despu√©s de iniciar Docker Desktop, en su men√∫ contextual, seleccione el elemento WSL 2 Tech Preview. </p><br><img src="https://habrastorage.org/webt/gq/qw/4_/gqqw4_qmfbmg442aifauzeqmoj4.png"><br><br><p>  En la ventana que se abre, haga clic en el bot√≥n Inicio. </p><br><img src="https://habrastorage.org/webt/r7/nv/1y/r7nv1ybig58t2tnug8cpynlftiw.png"><br><br><p>  Ahora docker y docker-compose est√°n disponibles dentro de la distribuci√≥n WSL. </p><br><p>  <b>Importante!</b>  El Docker Desktop actualizado ahora tiene una pesta√±a con WSL dentro de la ventana de configuraci√≥n.  Incluye soporte para WSL. </p><br><img src="https://habrastorage.org/webt/64/w-/la/64w-laartjbmpdfm8dgi_l3uf1c.png"><br><br><p>  <b>Importante!</b>  Adem√°s de la casilla de verificaci√≥n de activaci√≥n WSL, tambi√©n debe activar su distribuci√≥n WSL en la pesta√±a Recursos-&gt; Integraci√≥n WSL. </p><br><img src="https://habrastorage.org/webt/au/zw/h8/auzwh8dmjxla7p5qnunliik1dji.png"><br><br><h3>  Lanzamiento </h3><br><p>  Lo inesperado fueron los muchos problemas que ocurrieron al intentar elevar los contenedores de proyectos ubicados en el directorio de usuarios de Windows. </p><br><p>  Los errores de varios tipos relacionados con la ejecuci√≥n de scripts de bash (que generalmente comienzan al construir contenedores para instalar las bibliotecas y distribuciones necesarias) y otras cosas comunes para el desarrollo de Linux nos hicieron pensar en colocar proyectos directamente en el directorio de usuarios de Ubuntu 18.04. </p>  . <br><p>  De la soluci√≥n al problema anterior, se sigue lo siguiente: c√≥mo trabajar con archivos de proyecto a trav√©s del IDE instalado en Windows.  Como "mejor pr√°ctica", encontr√© solo una opci√≥n para m√≠: trabajar a trav√©s de VSCode (aunque soy fan√°tico de PhpStorm). </p><br><p>  Despu√©s de descargar e instalar VSCode, lo instalamos en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">paquete de extensi√≥n de Desarrollo remoto</a> . </p><br><p>  Despu√©s de instalar la extensi√≥n anterior, simplemente ejecute el comando de <code>code .</code>  en el directorio del proyecto con VSCode ejecut√°ndose. </p><br><p>  En este ejemplo, se requiere nginx para acceder a los contenedores a trav√©s de un navegador.  Instalarlo a trav√©s de <code>sudo apt-get install nginx</code> no fue tan simple.  Para comenzar, era necesario actualizar la distribuci√≥n de WSL haciendo <code>sudo apt update &amp;&amp; sudo apt dist-upgrade</code> , y solo entonces iniciar la instalaci√≥n de nginx. </p><br><p>  <b>Importante!</b>  Todos los dominios locales est√°n registrados no en el archivo / etc / hosts de la distribuci√≥n de Linux (ni siquiera est√° all√≠), sino en el archivo de hosts (generalmente ubicado C: \ Windows \ System32 \ drivers \ etc \ hosts) en Windows 10. </p><br><h3><a name="without-dd"></a>  Acerca de Docker en Ubuntu </h3><br><p>  Como lo indicaron los usuarios expertos en los comentarios a la nota, la ventana acoplable dentro de la distribuci√≥n WSL 2 es absolutamente funcional.  Esto le permite no instalar Docker Desktop en Windows 10 y resuelve el problema de tener una versi√≥n de Windows 10 Pro (la necesidad de Pro surge precisamente en relaci√≥n con el uso de Docker Desktop).  Se instala de acuerdo con las instrucciones del sitio de inicio: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://docs.docker.com/install/linux/linux-postinstall/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://docs.docker.com/compose/install/</a> </li></ul><br><p>  Si la ventana acoplable comienza a maldecir al demonio cuando ejecuta el comando, verifique el estado del servicio; en mi caso, como nginx, no se inicia autom√°ticamente.  Ejec√∫telo con el <code>sudo service docker start</code> . </p><br><p>  Si en el momento del ensamblaje se produce el error "Error al construir el servicio: cgroups: no se puede encontrar el destino de montaje de cgroup: desconocido", intente la siguiente soluci√≥n (no la m√≠a, encontr√© el enlace en las fuentes): <code>sudo mkdir /sys/fs/cgroup/systemd</code> ;  <code>sudo mount -t cgroup -o none,name=systemd cgroup /sys/fs/cgroup/systemd</code> . </p><br><h3>  Trabaja con el proyecto a trav√©s de PhpStorm </h3><br><p>  Para proporcionar la capacidad de trabajar con un proyecto en WSL a trav√©s de PhpStorm, debe hacer lo siguiente: </p><br><ul><li>  Ejecute el s√≠mbolo del sistema de Windows 10 como administrador; </li><li>  En el s√≠mbolo del sistema de Windows 10, ejecute el comando <code>mklink /DC:\project_directory \\wsl$\Ubuntu\home\user\project_directory</code> , que crear√° un enlace simb√≥lico a la carpeta del proyecto. </li></ul><br><p>  Despu√©s de eso, en el IDE, puede abrir el proyecto a lo largo de la ruta C: \ project_directory </p><br><p>  PD <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dmitry Simagin</a> , gracias por la decisi√≥n. </p><br><h4>  Fuentes </h4><br><p>  Puede encontrar una descripci√≥n m√°s detallada de cada paso aqu√≠: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://code.visualstudio.com/docs/remote/wsl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://docs.docker.com/docker-for-windows/wsl-tech-preview/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://docs.docker.com/docker-for-windows/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://docs.microsoft.com/ru-ru/windows/wsl/wsl2-install</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://docs.docker.com/install/linux/linux-postinstall/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://docs.docker.com/compose/install/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://github.com/docker/for-linux/issues/219</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/474346/">https://habr.com/ru/post/474346/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../474334/index.html">Segunda parte C√≥mo obtener la revisi√≥n del c√≥digo de revisi√≥n de Google</a></li>
<li><a href="../474336/index.html">Lagos con desechos radiactivos en Rusia y la experiencia de su eliminaci√≥n</a></li>
<li><a href="../474338/index.html">Sinopsis del aprendizaje autom√°tico. An√°lisis matem√°tico Descenso de gradiente</a></li>
<li><a href="../474342/index.html">Acelerar escenas en un video usando una vista de tabla</a></li>
<li><a href="../474344/index.html">Internet de las cosas en la industria: ¬øC√≥mo funcionan las plantas inteligentes?</a></li>
<li><a href="../474352/index.html">Destrucci√≥n de enemigos por un salto, como en "Mario" Unity 2D</a></li>
<li><a href="../474354/index.html">Hogar inteligente en contenedores (ioBroker + Zigbee en Docker)</a></li>
<li><a href="../474356/index.html">ThingJS v1.0-alpha</a></li>
<li><a href="../474358/index.html">Duerma lo suficiente el fin de semana: c√≥mo el ruido blanco ayuda a los adultos a relajarse y controla la calidad del sue√±o de los ni√±os</a></li>
<li><a href="../474360/index.html">Mejora tu CSS con estos 5 principios.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>