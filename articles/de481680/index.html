<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖖🏼 📰 😒 TodoMVC auf dap schreiben. Teil 2 🚒 🚵🏼 👩‍👦‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dies ist der zweite, letzte Teil des Tutorials, in dem wir den TodoMVC-Client unter Verwendung des minimalistischen reaktiven ds js-Frameworks schreib...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>TodoMVC auf dap schreiben. Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481680/"> Dies ist der zweite, letzte Teil des Tutorials, in dem wir den TodoMVC-Client unter Verwendung des minimalistischen reaktiven <a href="https://dap.js.org/" rel="nofollow">ds</a> js-Frameworks schreiben. <br><br>  Zusammenfassung des <a href="https://habr.com/en/post/480912/">ersten Teils</a> : Wir haben vom Server eine Aufgabenliste im JSON-Format erhalten, daraus eine HTML-Liste erstellt, die Möglichkeit hinzugefügt, den Namen und das Abschlusszeichen für jeden Fall zu bearbeiten, und eine Serverbenachrichtigung über diese Änderungen implementiert. <br><br>  Es bleibt abzuwarten: Löschen beliebiger Fälle, Hinzufügen neuer Fälle, Masseninstallation / Zurücksetzen und Filtern von Fällen nach Fertigstellung und die Funktion zum Löschen aller abgeschlossenen Fälle.  Das werden wir tun.  Die endgültige Version des Clients, auf die wir in diesem Artikel eingehen, finden Sie <a href="https://dap.js.org/samples/tutorial/16.html" rel="nofollow">hier</a> . <br><br><a name="habracut"></a><br><br>  Die Option, die wir letztes Mal gewählt haben, kann hier aufgefrischt <a href="https://dap.js.org/samples/tutorial/7-3.html" rel="nofollow">werden</a> . <br><br>  Hier ist sein Code: <br><br><pre><code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'#todoapp'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span> ,<span class="hljs-string"><span class="hljs-string">'#header'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span> ,<span class="hljs-string"><span class="hljs-string">'H1'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span>) ,<span class="hljs-string"><span class="hljs-string">'INPUT#new-todo placeholder="What needs to be done?" autofocus'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span>) ) ,<span class="hljs-string"><span class="hljs-string">'#main'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span> ,<span class="hljs-string"><span class="hljs-string">'#toggle-all type=checkbox'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span>) ,<span class="hljs-string"><span class="hljs-string">'UL#todo-list'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"*@ todos:query"</span></span> ,<span class="hljs-string"><span class="hljs-string">'LI'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"$completed=.completed $editing= $patch=; a!"</span></span> ,<span class="hljs-string"><span class="hljs-string">'INPUT.toggle type=checkbox'</span></span> .d(<span class="hljs-string"><span class="hljs-string">"#.checked=.completed"</span></span>) .ui(<span class="hljs-string"><span class="hljs-string">"$patch=($completed=#.checked)"</span></span>) ,<span class="hljs-string"><span class="hljs-string">'LABEL.view'</span></span> .d(<span class="hljs-string"><span class="hljs-string">"? $editing:!; ! .title"</span></span>) .e(<span class="hljs-string"><span class="hljs-string">"dblclick"</span></span>,<span class="hljs-string"><span class="hljs-string">"$editing=`yes"</span></span>) ,<span class="hljs-string"><span class="hljs-string">'INPUT.edit'</span></span> .d(<span class="hljs-string"><span class="hljs-string">"? $editing; !! .title@value"</span></span>) .ui(<span class="hljs-string"><span class="hljs-string">"$patch=(.title=#.value)"</span></span>) .e(<span class="hljs-string"><span class="hljs-string">"blur"</span></span>,<span class="hljs-string"><span class="hljs-string">"$editing="</span></span>) ,<span class="hljs-string"><span class="hljs-string">'BUTTON.destroy'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span>) ) .a(<span class="hljs-string"><span class="hljs-string">"!? $completed $editing"</span></span>) .u(<span class="hljs-string"><span class="hljs-string">"? $patch; (@method`PATCH .url:dehttp headers $patch@):query $patch="</span></span>) ) ) ,<span class="hljs-string"><span class="hljs-string">'#footer'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span> ,<span class="hljs-string"><span class="hljs-string">'#todo-count'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span>) ,<span class="hljs-string"><span class="hljs-string">'UL#filters'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span> ,<span class="hljs-string"><span class="hljs-string">'LI'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span>) ) ,<span class="hljs-string"><span class="hljs-string">'#clear-completed'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span>) ) ) .DICT({ <span class="hljs-attr"><span class="hljs-attr">todos</span></span> : <span class="hljs-string"><span class="hljs-string">"//todo-backend-express.herokuapp.com/"</span></span>, <span class="hljs-attr"><span class="hljs-attr">headers</span></span>: {<span class="hljs-string"><span class="hljs-string">"Content-type"</span></span>:<span class="hljs-string"><span class="hljs-string">"application/json"</span></span>} }) .FUNC({ <span class="hljs-attr"><span class="hljs-attr">convert</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">dehttp</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url</span></span></span><span class="hljs-function">=&gt;</span></span>url.replace(<span class="hljs-regexp"><span class="hljs-regexp">/^https?\:/</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>) } }) .RENDER()</code> </pre> <br><br>  Jetzt gibt es hier nur noch fünfzig Zeilen, aber am Ende des Artikels werden es doppelt so viele sein - bis zu 100. Es werden viele HTTP-Anfragen an den Server gesendet. Öffnen Sie daher bitte die Entwicklertools (in Chrome, wie Sie sich erinnern, Strg + Umschalt + I) Erstens ist die Registerkarte Netzwerk interessant, und zweitens die Konsole.  Vergessen Sie auch nicht, den Code für jede Version unserer Seite anzuzeigen - in Chrome ist dies Strg + U. <br><br>  Hier muss ich einen kleinen Exkurs machen.  Wenn Sie den <a href="https://habr.com/en/post/480912/">ersten Teil des</a> Tutorials nicht gelesen haben, würde ich dennoch empfehlen, damit zu beginnen.  Wenn Sie es gelesen haben, aber nichts verstanden haben, ist es besser, es erneut zu lesen.  Wie die Kommentare zu meinen beiden vorherigen Artikeln zeigen, werden die Syntax und das Prinzip von dap von einem unvorbereiteten Leser nicht immer sofort verstanden.  Ein anderer Artikel ist nicht zum Lesen für Personen zu empfehlen, denen das Auftreten einer nicht si-ähnlichen Syntax unangenehm ist. <br><br><img src="https://habrastorage.org/webt/wj/-n/br/wj-nbrh5eflirkcich69glgnooo.jpeg"><br><br>  Dieser zweite Teil des Tutorials ist etwas komplizierter und interessanter als der erste.  <i>[TODO: Bitten Sie <a href="https://habr.com/en/users/token/" class="user_link">Token,</a> einen Schüler <a href="https://habr.com/en/users/token/" class="user_link">zu</a> finden, der im Internet ein Gehirnbild explodiert]</i> . <br><br>  Mit Ihrer Erlaubnis werde ich die Kapitel mit Teil 1 weiter nummerieren.  Dort haben wir bis 7 gezählt. Also, <br><br><h2>  8. Erstellen einer Aufgabenliste für die Statusvariable </h2><br>  Um einen Fall aus der Liste zu entfernen, gibt es eine Schaltfläche <code>BUTTON.destroy</code> .  Das Entfernen besteht darin, eine DELETE-Anforderung an den Server zu senden und das entsprechende <code>UL#todo-list &gt; LI</code> Element <code>UL#todo-list &gt; LI</code> mit dem gesamten Inhalt tatsächlich aus dem Blickfeld zu entfernen.  Mit dem Senden einer DELETE-Anfrage ist alles klar: <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'BUTTON.destroy'</span></span>.ui(<span class="hljs-string"><span class="hljs-string">"(@method`DELETE .url:dehttp):query"</span></span>)</code> </pre><br><br>  Mit dem Entfernen eines Elements vom Bildschirm sind jedoch Optionen möglich.  Man könnte einfach eine andere Statusvariable einführen, beispielsweise <code>$deleted</code> , und das Element mit CSS ausblenden, einschließlich der <code>deleted</code> CSS-Klasse <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'LI'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"$completed=.completed $editing= $patch= $deleted=; a!"</span></span> <span class="hljs-comment"><span class="hljs-comment">//  $deleted   "" ... ,'BUTTON.destroy'.d("(@method`DELETE .url:dehttp):query $deleted=`yes") //  $deleted -     ) .a("!? $completed $editing $deleted") //   CSS  .deleted{display:none}</span></span></code> </pre><br><br>  Und es würde funktionieren.  Aber es wäre Betrug.  Darüber hinaus werden wir weiter unten Filter und Zähler für aktive und abgeschlossene Fälle haben (was in <code>#footer</code> ).  Daher ist es besser, das Objekt sofort „physisch“ von der To-Do-Liste zu entfernen.  Das heißt, wir müssen das Array selbst ändern können, das wir ursprünglich vom Server erhalten haben. Das bedeutet, dass dieses Array auch eine Statusvariable werden muss.  Nennen wir sie <code>$todos</code> . <br><br>  Der Bereich der Variablen <code>$todos</code> besteht darin, den gemeinsamen Vorfahren aller Elemente auszuwählen, die auf diese Variable zugreifen.  Und es wird durch <code>INPUT#new-todo</code> von <code>#header</code> und Zähler von <code>#footer</code> und tatsächlich <code>UL#todo-list</code> <code>#footer</code> .  Der gemeinsame Vorfahr von allen ist das Wurzelelement der Vorlage, <code>#todoapp</code> .  Daher definieren wir in seiner D-Regel die Variable <code>$todos</code> .  An derselben Stelle laden wir die Daten sofort vom Server auf den Server hoch.  Und um die Liste <code>UL#todo-list</code> zu erstellen, werden wir jetzt auch davon sein: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'#todoapp'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"$todos=todos:query"</span></span> <span class="hljs-comment"><span class="hljs-comment">//   $todos      ... ,'UL#todo-list'.d("*@ $todos" //     $todos</span></span></code> </pre><br><br>  <b>Es ist wichtig.</b>  Wenn beim Testen plötzlich die To-Do-Liste nicht geladen wird - ist es gut möglich, dass jemand sie alle gelöscht hat (dies ist ein öffentlicher Server, und dort kann alles passieren). <br>  In diesem Fall gehen Sie bitte zu einem <a href="https://dap.js.org/samples/tutorial/16.html" rel="nofollow">vollständigen Beispiel</a> und erstellen Sie einige Fälle, mit denen Sie experimentieren können. <br><br>  <a href="https://dap.js.org/samples/tutorial/8-1.html" rel="nofollow">Wir schauen</a>  Hier wird <code>$todos</code> in der d-Regel des <code>#todoapp</code> Elements <code>#todoapp</code> und sofort <i>mit den</i> erforderlichen Daten <i>initialisiert</i> .  Alles scheint zu funktionieren, aber eine unangenehme Eigenschaft ist aufgetreten.  Wenn der Server längere Zeit auf die Anfrage reagiert (in Chrome können Sie diese Situation simulieren: Auf der Registerkarte "Netzwerk" der Entwicklertools können Sie verschiedene Modi zum Simulieren langsamer Netzwerke auswählen), sieht unsere neue Version der Anwendung bis zur Fertigstellung der Anfrage ein wenig traurig aus - es gibt nur CSS Artefakte.  Ein solches Bild wird den Benutzer definitiv nicht begeistern.  Obwohl die Vorgängerversion nicht darunter litt - bis die Daten auf der Seite eingingen, fehlte nur die Liste selbst, aber andere Elemente tauchten sofort auf, ohne auf die Daten zu warten. <br><br>  Hier ist das Ding.  Wie Sie sich erinnern, ist der <code>:query</code> asynchron.  Diese Asynchronität drückt sich darin aus, dass bis zum Abschluss der Anforderung nur die Ausführung der aktuellen Regel blockiert ist, dh die Generierung des Elements, das die angeforderten Daten tatsächlich benötigt (was logisch ist).  Die Erzeugung anderer Elemente wird nicht blockiert.  Daher wurde beim Zugriff von <code>UL#todo-list</code> auf den Server nur dieser blockiert, nicht jedoch <code>#header</code> und <code>#footer</code> , die sofort gezeichnet wurden.  Nun wartet die gesamte <code>#todoapp</code> auf die Fertigstellung der Anfrage. <br><br><h2>  9. Verzögertes Laden der Daten </h2><br>  Um die Situation zu korrigieren und nicht beteiligte Elemente nicht zu blockieren, verschieben wir das erstmalige Laden der Daten, bis alles bereits gezeichnet ist.  Dazu laden wir die Daten nicht sofort in die Variable <code>$todos</code> , sondern initialisieren sie zunächst einfach mit „nichts“. <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'#todoapp'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"$todos="</span></span> <span class="hljs-comment"><span class="hljs-comment">//   $todos    ""</span></span></code> </pre><br><br>  Sie wird also nichts blockieren und die gesamte Vorlage wird funktionieren - allerdings vorerst mit einer leeren „To-Do-Liste“.  Mit einem langweiligen Einstiegsbildschirm können Sie <code>$todos</code> jetzt sicher <i>ändern,</i> indem Sie eine To-Do-Liste hochladen.  <code>#todoapp</code> Sie dazu diesen Nachkommen zu <code>#todoapp</code> <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'loader'</span></span> .u(<span class="hljs-string"><span class="hljs-string">"$todos=todos:query"</span></span>) <span class="hljs-comment"><span class="hljs-comment">//  $todos,       .d("u") //   (u-)   </span></span></code> </pre><br><br>  Dieses Element hat eine U-Regel, die genau so aussieht wie die Blockierungsregel, die wir abgelehnt haben, aber es gibt einen grundlegenden Unterschied. <br>  Lassen Sie mich daran erinnern, dass die D-Regel (von <i>unten</i> ) die Elementgenerierungsregel ist, die ausgeführt wird, wenn die Vorlage von oben nach <i>unten erstellt wird</i> , vom übergeordneten Element bis zu den <i>untergeordneten</i> Elementen.  und U-Regeln (von <i>oben</i> ) sind Reaktionsregeln, die als Reaktion auf ein Ereignis ausgeführt werden, das von unten nach <i>oben</i> und von Kind zu Eltern auftaucht. <br>  Wenn also <b>einer</b> Variablen <b>in der D-Regel</b> etwas (einschließlich „nichts“) zugewiesen ist, bedeutet dies, dass sie im Gültigkeitsbereich dieses Elements <i>deklariert und initialisiert wird</i> und ihre Nachkommen (verschachtelte Gültigkeitsbereiche werden wie in JS in DAP implementiert) )  Zuweisung <b>in up-rules</b> bedeutet eine <i>Änderung einer</i> Variablen, die zuvor im Gültigkeitsbereich deklariert wurde.  Die Deklaration und Initialisierung von Variablen in der d-Regel ermöglicht es dem übergeordneten Element, die für die Konstruktion erforderlichen Informationen an die untergeordneten Elemente in der Hierarchie weiterzugeben, und die Änderung ermöglicht es dem übergeordneten Element, Aktualisierungen an diese Informationen weiterzugeben und so eine angemessene Umstrukturierung aller davon abhängigen Elemente einzuleiten. <br><br>  Das <code>loader</code> Element, das ein Abkömmling von <code>#todoapp</code> , <code>#todoapp</code> in seiner U-Regel <b>die</b> Variable <code>$todos</code> und lädt Daten vom Server hinein, wodurch alle Consumer-Elemente dieser Variablen (und nur diese, was wichtig ist!) Automatisch neu <code>#todoapp</code> .  Verbraucher einer Variablen sind Elemente, deren D-Regeln diese Variable als einen Wert enthalten, d.h.  Diejenigen, <b>die</b> diese Variable (unter Berücksichtigung des Gültigkeitsbereichs) beim Erstellen <b>lesen</b> . <br><br>  Wir haben jetzt einen Konsumenten der Variablen <code>$todos</code> - die eigentliche <code>UL#todo-list</code> , die dementsprechend nach dem Laden der Daten neu erstellt wird. <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'UL#todo-list'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"*@ $todos"</span></span> <span class="hljs-comment"><span class="hljs-comment">//  ,   $todos</span></span></code> </pre><br><br>  <a href="https://dap.js.org/samples/tutorial/9.html" rel="nofollow">Jetzt haben</a> wir also eine <code>#todoapp</code> , die eine Statusvariable in <code>#todoapp</code> , ohne das anfängliche Rendern der Vorlage zu blockieren. <br><br><h2>  10. Löschen und Hinzufügen von Aufgaben </h2><br>  Jetzt können wir <code>$todos</code> jeder Hinsicht ändern.  Beginnen wir mit dem Entfernen der Elemente.  Wir haben bereits einen Button-Cross <code>BUTTON.destroy</code> , der die Server-Entfernungsanfragen bisher einfach sendet <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'BUTTON.destroy'</span></span>.ui(<span class="hljs-string"><span class="hljs-string">"(@method`DELETE .url:dehttp):query"</span></span>)</code> </pre><br><br>  Es muss sichergestellt werden, dass das entsprechende Objekt auch aus der Variablen <code>$todos</code> gelöscht wird. Da dies eine Änderung ist, wird <code>UL#todo-list</code> als Consumer dieser Variablen automatisch neu erstellt, jedoch ohne das gelöschte Element. <br><br>  Dap bietet an sich keine speziellen Möglichkeiten zur Manipulation von Daten.  Manipulationen können perfekt in Funktionen in JS geschrieben werden, und DAP-Regeln liefern ihnen einfach Daten und nehmen das Ergebnis auf.  Wir schreiben eine JS-Funktion, um ein Objekt aus einem Array zu entfernen, ohne seine Nummer zu kennen.  Zum Beispiel das: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> remove = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arr,tgt</span></span></span><span class="hljs-function">)=&gt;</span></span> arr.filter( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">obj</span></span></span><span class="hljs-function"> =&gt;</span></span> obj!=tgt );</code> </pre><br><br>  Sie können wahrscheinlich etwas effektiveres schreiben, aber darum geht es jetzt nicht.  Es ist unwahrscheinlich, dass unsere Anwendung mit Aufgabenlisten von Millionen von Elementen arbeiten muss.  Wichtig ist, dass die Funktion ein neues Array-Objekt zurückgibt und nicht nur das Element von dem entfernt, was es ist. <br><br>  Um diese Funktion über DAP-Regeln zugänglich zu machen, müssen Sie sie dem Abschnitt <code>.FUNC</code> hinzufügen, aber vorher entscheiden, wie wir sie aufrufen möchten.  In diesem Fall besteht die einfachste Möglichkeit darin, sie vom Konverter aufzurufen, der das Objekt <code>{ todos, tgt }</code> akzeptiert und ein gefiltertes Array zurückgibt <br><br><pre> <code class="javascript hljs">.FUNC({ <span class="hljs-attr"><span class="hljs-attr">convert</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">dehttp</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url</span></span></span><span class="hljs-function"> =&gt;</span></span> url.replace(<span class="hljs-regexp"><span class="hljs-regexp">/^https?\:/</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>), <span class="hljs-comment"><span class="hljs-comment">//        remove: x =&gt; remove(x.todos,x.tgt) //     } })</span></span></code> </pre><br><br>  Aber nichts <code>.FUNC</code> Sie daran, diese Funktion direkt in <code>.FUNC</code> (Ich habe bereits gesagt, dass <code>.FUNC</code> eine reguläre JS-Methode ist und das Argument ein reguläres JS-Objekt.) <br><br><pre> <code class="javascript hljs">.FUNC({ <span class="hljs-attr"><span class="hljs-attr">convert</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">dehttp</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url</span></span></span><span class="hljs-function"> =&gt;</span></span> url.replace(<span class="hljs-regexp"><span class="hljs-regexp">/^https?\:/</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>), <span class="hljs-attr"><span class="hljs-attr">remove</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> x.todos.filter( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todo</span></span></span><span class="hljs-function"> =&gt;</span></span> todo!=x.tgt ) } })</code> </pre><br><br>  Jetzt können wir über die DAP-Regeln auf diesen Konverter zugreifen <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'BUTTON.destroy'</span></span> .ui(<span class="hljs-string"><span class="hljs-string">"$todos=($todos $@tgt):remove (@method`DELETE .url:dehttp):query"</span></span>)</code> </pre><br><br>  Hier bilden wir zuerst ein Objekt, das in der JS-Notation mit <code>{ todos, tgt:$ }</code> , übergeben es an den in <code>.FUNC</code> beschriebenen <code>:remove</code> Konverter und geben das gefilterte Ergebnis an <code>$todos</code> , wodurch es <code>.FUNC</code> wird.  Hier ist <code>$</code> der <i>Datenkontext des</i> Elements, des Geschäftsobjekts aus dem Array <code>$todos</code> auf dem die Vorlage basiert.  Nach dem <code>@</code> -Symbol wird der Alias ​​des Arguments angezeigt.  Wenn <code>@</code> fehlt, wird der eigene Name des Arguments verwendet.  Dies ähnelt der kürzlichen <a href="http://es6-features.org/" rel="nofollow">Abkürzung von</a> ES6 Innovation - <a href="http://es6-features.org/" rel="nofollow">Property</a> . <br><br>  In ähnlicher Weise fügen wir der Liste einen neuen Fall hinzu, indem wir das Element <code>INPUT#new-todo</code> und die POST-Anforderung verwenden <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'INPUT#new-todo placeholder="What needs to be done?" autofocus'</span></span> .ui(<span class="hljs-string"><span class="hljs-string">"$=(#.value@title) (@method`POST todos@url headers $):query $todos=($todos $@tgt):insert #.value="</span></span>) ... .FUNC({ <span class="hljs-attr"><span class="hljs-attr">convert</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">dehttp</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url</span></span></span><span class="hljs-function"> =&gt;</span></span> url.replace(<span class="hljs-regexp"><span class="hljs-regexp">/^https?\:/</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>), <span class="hljs-attr"><span class="hljs-attr">remove</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> x.todos.filter( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todo</span></span></span><span class="hljs-function"> =&gt;</span></span> todo!=x.tgt ), <span class="hljs-comment"><span class="hljs-comment">//     insert: x =&gt; x.todos.concat( [x.tgt] ) //     } })</span></span></code> </pre><br><br>  Die Reaktionsregel des <code>INPUT#new-todo</code> Elements auf ein Standard-UI-Ereignis (für die <code>INPUT</code> Elemente wird das <code>change</code> Ereignis als Standard-DAP betrachtet) umfasst Folgendes: Lesen von Benutzereingaben aus der <code>value</code> Eigenschaft dieses Elements, Bilden eines lokalen <code>$</code> <code>.title</code> mit diesem Wert als <code>.title</code> Feld, Senden von <code>$</code> <code>.title</code> Ändern Sie mit der POST-Methode das Array <code>$todos</code> indem Sie den Kontext <code>$</code> als neues Element hinzufügen und schließlich die <code>value</code> Eigenschaft des <code>INPUT</code> Elements <code>INPUT</code> . <br><br>  Hier könnte ein junger Leser fragen: Warum sollte <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" rel="nofollow"><code>concat()</code></a> wenn ein Element zu einem Array hinzugefügt wird, wenn dies mit <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/concat" rel="nofollow"><code>concat()</code></a> <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/push" rel="nofollow"><code>push()</code></a> ?  Ein erfahrener Leser wird sofort verstehen, was los ist, und seine Antwort in die Kommentare schreiben. <br><br>  Wir schauen uns an, was <a href="https://dap.js.org/samples/tutorial/10-1.html" rel="nofollow">passiert ist:</a> Fälle werden normal hinzugefügt und gelöscht, die entsprechenden Anfragen werden korrekt an den Server gesendet (Sie lassen die Registerkarte Netzwerk die ganze Zeit geöffnet, oder?).  Aber was ist, wenn wir den Namen oder Status eines neu hinzugefügten Falls ändern möchten?  Das Problem besteht darin, dass wir zum Benachrichtigen des Servers über diese Änderungen <code>.url</code> benötigen, mit der der Server diesem Unternehmen <code>.url</code> wird.  Als wir das Geschäft erstellt haben, kannten <code>.url</code> die <code>.url</code> bzw. wir können nicht die richtige PATCH-Änderungsanforderung erstellen. <br><br>  Tatsächlich sind alle erforderlichen Informationen zu dem Fall in der Antwort des Servers auf die POST-Anforderung enthalten. Es wäre richtiger, ein neues Geschäftsobjekt nicht nur aus Benutzereingaben, sondern auch aus der Antwort des Servers zu erstellen und dieses Objekt mit allen bereitgestellten Informationen zu <code>$todos</code> hinzuzufügen Serverinformationen, einschließlich des <code>.url</code> <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'INPUT#new-todo placeholder="What needs to be done?" autofocus'</span></span> .ui(<span class="hljs-string"><span class="hljs-string">"$todos=($todos (@method`POST todos@url headers (#.value@title)):query@tgt ):insert #.value="</span></span>)</code> </pre><br><br>  Wir sehen aus - okay, jetzt wird alles richtig ausgearbeitet.  Benachrichtigungen an den Server über die Bearbeitung von neu erstellten Fällen sind in Ordnung. <br><br>  Man könnte damit aufhören, aber ... Wenn Sie genau hinschauen, können Sie immer noch eine leichte Verzögerung zwischen der Eingabe des Namens des neuen Falls und dem Moment feststellen, in dem er in der Liste erscheint.  Diese Verzögerung ist deutlich sichtbar, wenn Sie ein simuliertes langsames Netzwerk einschalten.  Wie Sie vielleicht erraten haben, handelt es sich um eine Anfrage an den Server: Zuerst fordern wir Daten für einen neuen Fall vom Server an, und erst nach Erhalt ändern wir <code>$todos</code> .  Im nächsten Schritt werden wir versuchen, diese Situation zu korrigieren, aber zuerst werde ich Ihre Aufmerksamkeit auf einen anderen interessanten Punkt lenken.  Wenn wir ein wenig zur <a href="https://dap.js.org/samples/tutorial/10-1.html" rel="nofollow">vorherigen Version zurückkehren</a> , stellen wir fest: Obwohl die Anforderung auch vorhanden ist, wird die neue Groß- / Kleinschreibung sofort zur Liste hinzugefügt, ohne auf das Ende der Anforderung zu warten <br><br><pre> <code class="javascript hljs"> <span class="hljs-comment"><span class="hljs-comment">//    , :query   .ui("$=(#.value@title) (@method`POST todos@url headers $):query $todos=($todos $@tgt):insert #.value=")</span></span></code> </pre><br><br>  Dies ist ein weiteres Merkmal beim Ausarbeiten von Asynchronkonvertern in dap: Wenn das Ergebnis des Asynchronkonverters nicht verwendet wird (d. H., Es ist keiner Zuordnung zugeordnet), können Sie nicht auf seinen Abschluss warten - und die Ausführung der Regel wird nicht blockiert.  Dies ist häufig hilfreich: Sie haben möglicherweise bemerkt, dass beim Löschen von Fällen aus der Liste diese sofort vom Bildschirm verschwinden, ohne auf das Ergebnis der DELETE-Anforderung zu warten.  Dies macht sich insbesondere dann bemerkbar, wenn Sie schnell mehrere Fälle hintereinander löschen und Anforderungen im Netzwerkfenster nachverfolgen. <br><br>  Da wir jedoch das Ergebnis der POST-Anforderung verwenden - es dem <code>$</code> -Kontext zuweisen - müssen wir warten, bis der Vorgang abgeschlossen ist.  Daher müssen Sie einen anderen Weg finden, um <code>$todos</code> zu ändern, bevor Sie die POST-Anforderung ausführen.  Lösung: Erstellen Sie dennoch zuerst ein neues Geschäftsobjekt und fügen Sie es sofort zu <code>$todos</code> , lassen Sie die Liste zeichnen, und führen Sie erst dann nach dem Rendern eine POST-Anforderung aus, wenn das Geschäft <code>.url</code> ( <code>.url</code> das Geschäft wurde gerade erstellt) Das Ergebnis wird dem Datenkontext dieses Falls auferlegt. <br><br>  Als erstes fügen wir der <code>.title</code> ein Leerzeichen hinzu, das nur <code>.title</code> enthält <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'INPUT#new-todo placeholder="What needs to be done?" autofocus'</span></span> .ui(<span class="hljs-string"><span class="hljs-string">"$todos=($todos (#.value@title)@tgt):insert #.value="</span></span>)</code> </pre><br><br>  <code>UL#todo-list &gt; LI</code> Regel zur Erzeugung von <code>UL#todo-list &gt; LI</code> Elementen enthält bereits <code>a!</code>  Starten einer A-Regel nach dem erstmaligen Zeichnen des Elements.  Dort können wir den Start einer POST-Anfrage in Abwesenheit von <code>.url</code> .  Um zusätzliche Felder in den Kontext einzufügen, hat dap den Operator <code>&amp;</code> <br><br><pre> <code class="javascript hljs"> .a(<span class="hljs-string"><span class="hljs-string">"!? $completed $editing; ? .url:!; &amp; (@method`POST todos@url headers $):query"</span></span>)</code> </pre><br><br>  <a href="https://dap.js.org/samples/tutorial/10-3.html" rel="nofollow">Wir schauen</a>  Eine andere Sache!  Selbst in einem langsamen Netzwerk wird die Aufgabenliste sofort aktualisiert und die Serverbenachrichtigung und das Laden fehlender Daten erfolgt nach dem Zeichnen der aktualisierten Liste im Hintergrund. <br><br><h2>  11. Daw jeder! </h2><br>  Im Element <code>#header</code> befindet sich für alle Fälle in der Liste eine Schaltfläche zum Masseninstallieren / Zurücksetzen des Abschlusszeichens.  Für die Massenzuweisung von Werten zu den Feldern der Elemente des Arrays schreiben wir einfach einen anderen Konverter <code>:assign</code> und auf <code>$todos</code> anwenden, indem Sie auf <code>INPUT#toggle-all</code> klicken <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'INPUT#toggle-all type=checkbox'</span></span> .ui(<span class="hljs-string"><span class="hljs-string">"$todos=($todos (#.checked@completed)@src):assign"</span></span>) ... assign: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> x.todos &amp;&amp; x.todos.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todo</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign(todo,x.src))</code> </pre><br><br>  In diesem Fall interessiert uns nur das Feld <code>.completed</code> , aber es ist leicht zu erkennen, dass Sie mit einem solchen Konverter die Werte aller Felder der Array-Elemente massiv ändern können. <br>  Ok, im <code>$todos</code> Array sind die <code>$todos</code> umgeschaltet, jetzt müssen wir den Server über die vorgenommenen Änderungen informieren.  Im ursprünglichen Beispiel erfolgt dies durch Senden von PATCH-Anfragen für jeden Fall - keine sehr effektive Strategie, aber es hängt nicht mehr von uns ab.  Ok, für jeden Fall senden wir eine PATCH-Anfrage <br><br><pre> <code class="javascript hljs"> .ui(<span class="hljs-string"><span class="hljs-string">"*@ $todos=($todos (#.checked@completed)@src):assign; (@method`PATCH .url:dehttp headers (.completed)):query"</span></span>)</code> </pre><br><br>  <a href="https://dap.js.org/samples/tutorial/11.html" rel="nofollow">Wir schauen</a> : Ein Klick auf eine gemeinsame Daw richtet alle einzelnen Daws aus und der Server wird durch entsprechende PATCH-Anfragen benachrichtigt.  Norm <br><br><h2>  12. Fälle nach Fertigstellung filtern </h2><br>  Neben der eigentlichen Aufgabenliste sollte die Anwendung auch in der Lage sein, Fälle nach dem Abschlusszeichen zu filtern und Zähler für abgeschlossene und nicht abgeschlossene Aufgaben anzuzeigen.  Natürlich ist es für das Filtern trivial, dieselbe <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" rel="nofollow"><code>filter()</code></a> -Methode zu verwenden, die von JS selbst bereitgestellt wird. <br><br>  Aber zuerst müssen Sie sicherstellen, dass das Feld " <code>.completed</code> für jeden Fall immer "true" ist, und wenn Sie auf die einzelne Tagesordnung des Falls klicken, wird diese zusammen mit der Variablen " <code>$completed</code> aktualisiert.  Bisher war uns das nicht wichtig, aber jetzt wird es so sein. <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'INPUT.toggle type=checkbox'</span></span> .d(<span class="hljs-string"><span class="hljs-string">"#.checked=.completed"</span></span>) .ui(<span class="hljs-string"><span class="hljs-string">"$patch=(.completed=$completed=#.checked) $recount=()"</span></span>) <span class="hljs-comment"><span class="hljs-comment">//  .completed       </span></span></code> </pre><br><br>  Der wichtige Punkt hierbei ist, dass der Datenkontext jedes Falls das Case-Objekt selbst ist, das im Array <code>$todos</code> .  Keine einzige Kopie oder verwandte Konstruktion, sondern das Objekt selbst.  Und alle Aufrufe der Felder <code>.title</code> , <code>.completed</code>  <code>url</code> - sowohl Lese- als auch Schreibzugriff - gilt direkt für dieses Objekt.  Damit die Filterung des <code>$todos</code> Arrays ordnungsgemäß funktioniert, muss die Vervollständigung des Falls nicht nur in der Morgendämmerung auf dem Bildschirm, sondern auch im <code>.completed</code> Feld des <code>.completed</code> Objekts <code>.completed</code> werden. <br><br>  Um nur Fälle mit dem erforderlichen Vollständigkeitszeichen in der Liste <code>.completed</code> , filtern wir <code>$todos</code> einfach nach dem ausgewählten Filter.  Der ausgewählte Filter ist, Sie haben es erraten, eine weitere Zustandsvariable unserer Anwendung, und wir werden ihn <code>$filter</code> .  Um <code>$todos</code> nach dem ausgewählten <code>$filter</code> gehen wir die Miniaturansicht entlang und fügen einfach einen weiteren Konverter der Form <i>{list, filter} =&gt; der gefilterten Liste hinzu</i> , und wir werden die Namen und Filterfunktionen aus dem "assoziativen Array" (d. H. Gewöhnlichen JS) übernehmen object) <code>todoFilters</code> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> todoFilters={ <span class="hljs-string"><span class="hljs-string">"All"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Active"</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todo</span></span></span><span class="hljs-function"> =&gt;</span></span> !todo.completed, <span class="hljs-string"><span class="hljs-string">"Completed"</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todo</span></span></span><span class="hljs-function"> =&gt;</span></span> !!todo.completed }; <span class="hljs-string"><span class="hljs-string">'#todoapp'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"$todos= $filter="</span></span> <span class="hljs-comment"><span class="hljs-comment">//   $filter ... ,'UL#todo-list'.d("* ($todos $filter):filter" ... ,'UL#filters'.d("* filter" //  filter      .DICT ,'LI' .d("! .filter") .ui("$filter=.") //    "$filter=.filter" ) ... .DICT({ ... filter: Object.keys(todoFilters) //["All","Active","Completed"] }) .FUNC({ convert:{ ... filter: x =&gt;{ const a = x.todos, f = x.filter &amp;&amp; todoFilters[x.filter]; return a&amp;&amp;f ? a.filter(f) : a; } } })</span></span></code> </pre><br><br>  <a href="https://dap.js.org/samples/tutorial/12-1.html" rel="nofollow">Wir prüfen</a> .  Filter funktionieren einwandfrei.  Eine Nuance besteht darin, dass die Namen der Filter zusammen angezeigt werden, weil  Hier haben wir uns ein wenig von der DOM-Struktur des Originals entfernt und sind aus CSS herausgekommen.  Aber wir werden später darauf zurückkommen. <br><br><h2>  13. Zähler abgeschlossener und aktiver Fälle. </h2><br>  Um die Zähler abgeschlossener und aktiver Fälle anzuzeigen, filtern Sie einfach <code>$todos</code> mit den entsprechenden Filtern und zeigen die Längen der resultierenden Arrays an <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'#footer'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"$active=($todos @filter`Active):filter $completed=($todos @filter`Completed):filter"</span></span> ,<span class="hljs-string"><span class="hljs-string">'#todo-count'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"! (active $active.length)format"</span></span>) <span class="hljs-comment"><span class="hljs-comment">//  length    active ... ,'#clear-completed'.d("! (completed $completed.length)format") ) ... .DICT({ ... active: "{length} items left", completed: "Clear completed items ({length})" })</span></span></code> </pre><br><br>  In <a href="https://dap.js.org/samples/tutorial/13-1.html" rel="nofollow">diesem Formular</a> zeigen die Leistungsindikatoren beim Booten die korrekten Werte an, reagieren jedoch nicht auf spätere Änderungen beim Abschluss von Vorgängen (wenn Sie auf die Tagesordnung klicken).  Tatsache ist, dass Klicks auf Dohlen, die den Status jedes einzelnen Falls ändern, den Status von <code>$todos</code> nicht ändern - eine Änderung eines Array-Elements ist keine Änderung des Arrays.  Daher benötigen wir ein zusätzliches Signal für die Notwendigkeit, Fälle neu zu registrieren.  Ein solches Signal kann eine zusätzliche Zustandsvariable sein, die jedes Mal geändert wird, wenn ein erneutes Zählen erforderlich ist.  Nennen wir es <code>$recount</code> .   d-  ,      ,   <code>#footer</code>    —          d- <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'#todoapp'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"$todos= $filter= $recount="</span></span> <span class="hljs-comment"><span class="hljs-comment">//  $recount     ... ,'INPUT.toggle type=checkbox' .d("#.checked=.completed") .ui("$patch=(.completed=$completed=#.checked) $recount=()") //  $recount    ... ,'#footer'.d("$active=($todos @filter`Active):filter $completed=($todos @filter`Completed):filter $recount" //  $recount</span></span></code> </pre><br><br> <a href="https://dap.js.org/samples/tutorial/13-2.html" rel="nofollow"></a>    ,   . <br><br><h2> 14.    . </h2><br>     TodoMVC    ,     —  .   , ,  ,    DELETE-     —         <code>$completed</code> . ,  <code>$todos</code>       ,     <code>$active</code> <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'#clear-completed'</span></span> .d(<span class="hljs-string"><span class="hljs-string">"! (completed $completed.length)format"</span></span>) .ui(<span class="hljs-string"><span class="hljs-string">"$todos=$active; *@ $completed; (@method`DELETE .url:dehttp):query"</span></span>)</code> </pre><br><br> <a href="https://dap.js.org/samples/tutorial/14.html" rel="nofollow"></a> :    ,     .  Network        . <br><br><h2> 15.     </h2><br>    .           #.   #-        —    .        URL     . <br><br>   <code>location.hash</code>   <code>urlhash</code> , ,  a-  <code>#todoapp</code> (   ),       <code>$filter</code> <br><br><pre> <code class="javascript hljs">.a(<span class="hljs-string"><span class="hljs-string">"urlhash $filter"</span></span>)</code> </pre><br><br>    <code>$filter</code>          <i>hashchange</i>    - <code>:urlhash</code> ,     <code>location.hash</code> ( #) <br><br><pre> <code class="javascript hljs">.d(<span class="hljs-string"><span class="hljs-string">"$todos= $filter=:urlhash $recount="</span></span> .e(<span class="hljs-string"><span class="hljs-string">"hashchange"</span></span>,<span class="hljs-string"><span class="hljs-string">"$filter=:urlhash"</span></span>)</code> </pre><br><br>  <i>hashchange</i>     #-   . , -  <code>window</code>  <code>document.body</code>    .       <code>#todoapp</code> ,     d-  <code>listen</code> ,         <code>window</code> <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'#todoapp'</span></span> .a(<span class="hljs-string"><span class="hljs-string">"urlhash $filter"</span></span>) .e(<span class="hljs-string"><span class="hljs-string">"hashchange"</span></span>,<span class="hljs-string"><span class="hljs-string">"$filter=:urlhash"</span></span>) .d(<span class="hljs-string"><span class="hljs-string">"$todos= $filter=:urlhash $recount=; listen @hashchange"</span></span></code> </pre><br><br> <a href="https://dap.js.org/samples/tutorial/15-1.html" rel="nofollow"></a> :  ,     ,     <a href="https://dap.js.org/samples/tutorial/15-1.html" rel="nofollow">#Active</a> , <a href="https://dap.js.org/samples/tutorial/15-1.html" rel="nofollow">#All</a> , <a href="https://dap.js.org/samples/tutorial/15-1.html" rel="nofollow">#Completed</a> .  Alles arbeitet.    . , ,      —   .      ,       —    <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'UL#filters'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"* filter"</span></span> ,<span class="hljs-string"><span class="hljs-string">'LI'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span> ,<span class="hljs-string"><span class="hljs-string">'A'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"!! (`# .filter)concat@href .filter@"</span></span>) ) )</code> </pre><br><br>     ,     <code>!?</code> ,     CSS- <code>selected</code> ,     <code>.filter</code>      <code>$filter</code> <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'A'</span></span>.d(<span class="hljs-string"><span class="hljs-string">"!! (`# .filter)concat@href .filter@; !? (.filter $filter)eq@selected"</span></span>)</code> </pre><br><br>  <a href="https://dap.js.org/samples/tutorial/15-2.html" rel="nofollow"> </a>   dap-   (   )  ,   <a href="https://todo-backend-express.herokuapp.com/" rel="nofollow"></a> . <br><br><h2> 16.    </h2><br>    ,          ,    <code>head</code>  HTML-   <br><br><pre> <code class="javascript hljs"> [ui=click]{<span class="hljs-attr"><span class="hljs-attr">cursor</span></span>:pointer}</code> </pre><br><br>      ,   . <br><br> , !       «todos».   , ,   -     ,    «todos»  «dap todos» <br><br><pre> <code class="javascript hljs"> ,<span class="hljs-string"><span class="hljs-string">'H1'</span></span>.d(<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"dap todos"</span></span>)</code> </pre><br><br> .  <a href="https://dap.js.org/samples/tutorial/16.html" rel="nofollow"> </a>   ,    (      ). <br><br><h2>  Abschließend </h2><br> ,      ,  dap-      —    «,  », « ,   »  ..      .          .   ,        ,            ,   . <br><br> ,  , . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481680/">https://habr.com/ru/post/de481680/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481670/index.html">Erstellen Sie einen Aktionsplan mit dem AWS Cloud Adoption Framework</a></li>
<li><a href="../de481672/index.html">Mobilfunkautomaten im Browser</a></li>
<li><a href="../de481674/index.html">Autoverkaufstrichter oder wie man Kunden nicht zusammenführt und sogar mit denen zusammenarbeitet, die Ihre Dienste verweigert haben?</a></li>
<li><a href="../de481676/index.html">Sicherheitswoche 52: Sicherheit für intelligente Lautsprecher und IP-Kameras</a></li>
<li><a href="../de481678/index.html">Pre-Holiday Review: N6IIT01 Player und YB04 Armature Headphones - Hi-Fi aus Südchina</a></li>
<li><a href="../de481684/index.html">Ein Laptop von Powerbank?</a></li>
<li><a href="../de481688/index.html">Warum Java lernen und wie man es effizient macht. Yandex-Bericht</a></li>
<li><a href="../de481692/index.html">Verwenden von Intel Processor Trace zur Verfolgung des Systemverwaltungsmoduscodes</a></li>
<li><a href="../de481694/index.html">Mein Weg zur Partitionierung in PostgreSQL</a></li>
<li><a href="../de481696/index.html">Regelwächter: Dynamische Prüfungen für Go</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>