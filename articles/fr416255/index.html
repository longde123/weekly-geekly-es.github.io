<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗿 🐹 ☪️ La mise en cache Web comme exemple d'achat de lait dans un magasin 🧚🏿 💄 🎙️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si vous avez acheté du lait au magasin, vous pouvez comprendre comment fonctionne la mise en cache côté serveur et côté navigateur. 

 Si vous êtes un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La mise en cache Web comme exemple d'achat de lait dans un magasin</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/alconost/blog/416255/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/g1/n3/ou/g1n3ou0kugfon0ruqtm_s8qtjgo.jpeg"></a> <br>  <b>Si vous avez acheté du lait au magasin, vous pouvez comprendre comment fonctionne la mise en cache côté serveur et côté navigateur.</b> <br><br>  Si vous êtes un utilisateur Internet actif (et c'est très probablement le cas), vous utilisez constamment la mise en cache, mais vous ne connaissez peut-être pas les «coulisses»: quand et comment cela fonctionne. <br><br>  Du point de vue d'un développeur, la mise en cache facilite la création d'applications Web et de serveurs Web hautes performances: vous n'avez pas besoin d'optimiser constamment les serveurs surchargés de milliers de demandes - vous implémentez simplement des protocoles de mise en cache et la vie devient beaucoup plus facile. <br><br>  Lors de la mise en cache, le temps de chargement des pages passe de 2 secondes à 1 seconde ... ce qui n'est pas très impressionnant, non?  Mais vous ne pouvez pas vous en passer lorsque vous devez traiter les demandes d'un grand nombre d'utilisateurs. <br><br>  En utilisant la mise en cache dans l'une de mes applications Web, j'ai réalisé que le simple fait de parcourir les termes n'est pas la meilleure façon d'expliquer cette approche.  Il m'est venu à l'esprit qu'une bonne analogie serait le chemin du lait de la ferme au réfrigérateur. <br><br>  Pour comprendre mon explication, vous devez en savoir un peu sur les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bases du fonctionnement des serveurs Web</a> .  Commençons! <br><br>  <b>Traduit en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Alconost</a></b> <br><a name="habracut"></a><br><h2>  À quoi ressemblerait Internet sans mise en cache? </h2><br>  Avant de passer à la mise en cache, réfléchissons à ce qu'Internet aurait sans lui.  Imaginez un instant que vous vivez aux XVIIIe et XIXe siècles.  à la campagne.  Vous avez une ferme mais pas de réfrigérateur.  Vous gardez plusieurs vaches, mais leur lait se gâte rapidement, et il est donc très difficile d'en tirer profit. <br><br>  Soit dit en passant, dans certains endroits, les gens n'ont toujours pas de réfrigérateur: ils boivent du lait frais immédiatement, ou le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mélangent avec du grain et le font fermenter</a> - une approche intéressante, non? <br><br>  En général, vous souhaitez vendre du lait à d'autres villageois.  Mais ils devront le boire très rapidement.  Supposons qu'une vache puisse produire dix litres de lait par jour.  Cela signifie que si trop de gens viennent soudainement à la ferme pour obtenir du lait, vous devrez leur demander de revenir le lendemain. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/576/bc0/840/576bc0840350454bab067fda50047048.png"><br><br>  Et ce n'est pas le cas lorsque vous pouvez simplement obtenir quelques vaches supplémentaires et vous développer, car vous avez une clientèle limitée: seuls les habitants d'un village achètent du lait.  Il y a donc des limites assez certaines. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/33a/8bf/1ef/33a8bf1efe0c7d3844dcc47992763ff1.png"><br><br>  Sans mise en cache, la puissance de traitement des serveurs vous limite.  La mise en cache est utilisée pour charger des ressources statiques telles que: <br><br><ul><li>  des images <br></li><li>  CSS <br></li><li>  fichiers html statiques <br></li><li>  Fichiers JavaScript. <br></li></ul><br>  Par défaut, pour chaque demande entrante, le serveur doit envoyer une nouvelle réponse.  Mais une demande de chargement de page peut en fait signifier quatre demandes distinctes - une pour chacune des catégories ci-dessus.  Étant donné que les fichiers image sont généralement assez volumineux, un grand nombre d'utilisateurs du monde entier surchargeront facilement vos serveurs et le chargement des pages prendra plus de temps. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/008/e26/924/008e2692490ff8fe8d94d4b373c8e60e.png"><br><br>  Idéalement, je voudrais réduire la charge sur les serveurs, en préservant en quelque sorte les réponses aux demandes courantes.  Le serveur n'a pas à traiter chaque nouvelle demande distincte - la réponse sera reçue du cache.  Bien sûr, vous pouvez toujours débourser et ajouter plus de serveurs, mais cela peut entraîner des augmentations de coûts incontrôlées. <br><br><h2>  Mise en cache côté serveur </h2><br>  Revenons à nos vaches.  Savez-vous ce qui faciliterait le travail de notre ferme laitière? <br><br>  Achetez avec un frigo! <br><br>  Les résidents n'auront plus besoin de venir à la ferme et de boire immédiatement du lait, car il peut être stocké en toute sécurité pendant plusieurs semaines. <br><br>  Le magasin retire la charge de la ferme: désormais les vaches n'ont plus besoin d'être dérangées pour chaque acheteur.  Le magasin répond à la demande et vous n'avez qu'à traire vos vaches quotidiennement.  Et un autre plus: les habitants des villages voisins pourront désormais acheter du lait conservé au réfrigérateur. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a1a/385/13f/a1a38513fdecf151232b0df353cd4d9f.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b1/793/a88/4b1793a88037c9e7078ea85230e2d915.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.digitalocean.com/community/tutorials/web-caching-basics-terminology-">Le cache côté serveur</a> , comme un magasin, traitera les demandes populaires et fournira le contenu beaucoup plus rapidement et de manière plus fiable. <br><br>  L'image ci-dessus montre un <b>serveur proxy de mise en cache</b> : il stocke des fichiers statiques qui sont utilisés pour répondre aux demandes courantes.  Ce serveur intercepte ces demandes et donne rapidement une réponse, ce qui vous permet de supprimer la charge correspondante des principaux serveurs Web. <br><br>  À ce stade, vous avez peut-être déjà des questions: <br><br><ol><li>  Comment définir une requête «populaire»? <br></li><li>  Combien de temps les réponses sont-elles stockées dans le cache proxy? <br></li></ol><br>  Pour expliquer cela, il faudra des indications plus détaillées sur la mise en place du cache, mais maintenant il est important d'être conscient d'un concept important - la <b>fraîcheur.</b>  Il y aura différents fichiers sur le proxy de mise en cache, mis en cache à des moments différents, et il doit décider de toujours émettre ces fichiers.  Cela dépendra de la <b>politique de cache</b> . <br><br>  Ce qui ressemble aussi au stockage de lait dans un magasin.  Le directeur du magasin doit décider de la durée du lait avant d'être jeté.  Les proxys de mise en cache mesurent leurs performances par le <b>pourcentage d'</b> accès au <b>cache</b> - le pourcentage de contenu qui peut être fourni via le serveur de mise en cache. <br><br><h2>  Réseau de diffusion de contenu </h2><br>  Donc, nous avons une épicerie qui vend votre lait.  Déjà pas mal, mais les résidents ne peuvent acheter du lait que dans un magasin local, et il est peu probable que quelqu'un vienne de loin.  Pour augmenter la production, vous devez vendre du lait dans plus de magasins. <br><br>  Ainsi, vous commencez à livrer du lait à d'autres magasins et ainsi à satisfaire la demande dans une région géographique beaucoup plus large.  Ceci est similaire à un réseau de distribution de contenu (CDN) - des mandataires situés dans le monde entier (tels que ceux décrits ci-dessus). <br><br>  En tant qu'utilisateur final, vous pourriez penser que l'Internet haut débit vous permet de charger la plupart des sites très rapidement.  Cependant, cela est principalement possible grâce à l'utilisation de CDN pour la livraison rapide de fichiers statiques. <br><br>  Si vous êtes en Angleterre et que vous essayez de télécharger un fichier mis en cache sur un serveur à Khabarovsk, la réponse viendra avec un certain retard: le signal prendra du temps pour parcourir des milliers de kilomètres de câbles.  Par conséquent, un serveur proxy de mise en cache local au Royaume-Uni vous permettra de charger le site plus rapidement. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/97c/30f/4e6/97c30f4e69dcfb47c096bf6ec0f9fd82.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/13f/e13/f58/13fe13f581fa22e7761da2be7f8f990b.png"><br><br>  Ainsi, vos serveurs peuvent envoyer une copie des ressources statiques à chaque serveur proxy sur le CDN afin qu'ils traitent les requêtes locales jusqu'à ce que les ressources ne soient plus «fraîches».  Les fournisseurs de services CDN populaires sont Rackspace, Akamai et Amazon Web Services. <br><br><h2>  Mise en cache côté navigateur </h2><br>  Ainsi, maintenant, des gens de tout le pays (et même du monde) peuvent ramener à la maison le lait froid produit dans votre ferme.  Il y avait un problème: ils ne peuvent pas stocker le lait à la maison, donc après l'achat, vous devez le boire rapidement, et aller à nouveau au magasin pour une nouvelle portion.  Il s'avère qu'un tel système n'est toujours pas très pratique pour les acheteurs. <br><br>  Le réfrigérateur nous sauvera! <br><br>  Ayant un réfrigérateur, vous pouvez stocker du lait à la maison et ne pas courir chaque fois au magasin.  En termes de mise en cache, c'est un endroit complètement différent pour stocker des ressources statiques, car il est situé côté client (en d'autres termes, sur l'ordinateur où le navigateur s'exécute), et notre serveur proxy était dans un endroit distant. <br><br>  Cette approche est non seulement pratique pour l'utilisateur dans le cas de sites fréquemment visités, tels que Facebook ou Amazon, mais permet également à ces sites d'économiser sur les coûts du serveur en raison du nombre réduit de demandes traitées. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4c2/76d/0ca/4c276d0ca2761fc3d8013b5f113f6714.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d2/2f8/1c1/5d22f81c150440db90057c724df7caba.png"><br><br>  Et ici, il est important de noter que le lait dans le réfrigérateur N'APPARAÎT PAS!  Quoi qu'il en soit, vous devez effectuer la demande initiale, qui atteindra le serveur ou le serveur proxy, et seulement après cela, vous pouvez mettre en cache certains fichiers localement. <br><br>  Comment le navigateur sait-il quand demander de nouveaux fichiers au serveur?  Après tout, vous devez en quelque sorte mettre à jour les fichiers locaux. <br><br>  Tout comme les producteurs de lait mettent des dates d'expiration sur l'emballage, les serveurs ajoutent un identifiant spécifique à l'en-tête de réponse HTTP.  Il existe en fait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://betterexplained.com/articles/how-to-optimize-your-site-with-">quatre systèmes différents</a> pour la mise en cache HTTP.  Le scénario décrit ci-dessus est très similaire à la méthode d'expiration.  Cependant, dans le cas de certaines autres méthodes, avant d'émettre le fichier mis en cache, une demande au serveur doit être envoyée. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e38/e72/2a7/e38e722a78a2600596b8e03ea2be2051.png"><br><br><h2>  Quand commencer à utiliser la mise en cache </h2><br>  Supposons que vous créez votre première application Web.  Tant que vous n'avez pas des milliers d'utilisateurs, vous n'avez probablement pas à vous soucier des protocoles de mise en cache: le coût de fonctionnement d'un serveur sera suffisamment faible sans lui.  Cependant, avec la croissance de la base d'utilisateurs, la mise en cache devra également être implémentée - si vous voulez que l'application se charge rapidement. <br><br>  Prenez Heroku, par exemple, un excellent outil pour déployer votre première application Web.  Cependant, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://devcenter.heroku.com/articles/">pour implémenter la mise en cache, vous devrez utiliser un service distinct</a> - par exemple, CloudFront d'Amazon ou CloudFlare - et cela prendra plus de temps pour l'apprendre. <br><br>  Vous pouvez remarquer la mise en cache côté navigateur lorsque vous essayez de recharger la page et d'obtenir de nouvelles ressources statiques, mais la page ne change pas, quel que soit le nombre de fois que vous l'actualisez. <br><br>  En règle générale, la raison en est le protocole de mise en cache côté navigateur.  Pour contourner le cache du navigateur et demander de nouvelles ressources au serveur, vous pouvez appuyer sur <b>Cmd + Shift + R</b> (si vous avez un Mac) ou <b>Ctrl + Shift + R</b> (sur un PC). <br><br>  <b>À propos du traducteur</b> <br><br>  L'article a été traduit par Alconost. <br><br>  Alconost <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">localise des jeux</a> , des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">applications et des sites</a> en 68 langues.  Traducteurs en langue maternelle, tests linguistiques, plateforme cloud avec API, localisation continue, chefs de projet 24/7, tout format de ressources de chaîne. <br><br>  Nous réalisons également <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des vidéos de publicité et de formation</a> - pour les sites qui vendent, présentent des images, de la publicité, des formations, des teasers, des explicateurs, des bandes-annonces pour Google Play et l'App Store. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Plus de détails</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416255/">https://habr.com/ru/post/fr416255/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416243/index.html">Alternatives au cobalt, ce diamant sanglant des piles</a></li>
<li><a href="../fr416245/index.html">Nous créons un bot sur Aimylogic pour automatiser la boutique en ligne</a></li>
<li><a href="../fr416247/index.html">Comment préparer un voyage d'affaires? Conseils de ISPsystem bizdedev</a></li>
<li><a href="../fr416251/index.html">Impression 3D sur t-shirts</a></li>
<li><a href="../fr416253/index.html">Sketchfab, Unity, Blend4Web, PlayCanvas et maintenant Verge3D</a></li>
<li><a href="../fr416259/index.html">Nuage de supernova Zyxel Nebula - un moyen économique de sécurité?</a></li>
<li><a href="../fr416261/index.html">Comment transférer du courrier de votre serveur de messagerie vers Zimbra?</a></li>
<li><a href="../fr416265/index.html">Le Parlement européen rejette la directive sur le droit d'auteur sur Internet</a></li>
<li><a href="../fr416269/index.html">Courbes de développement du programmeur et un peu sur l'effet Dunning - Krueger</a></li>
<li><a href="../fr416271/index.html">Impression 3D de pièces miniatures en plastique ABS ou PLA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>