<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñêüèæ ü§∏üèæ üïí Neujahr IMaskjs 6 - Reagieren Sie Native, Pipes, ESM üì∞ üßôüèæ üé¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! 


 Ich habe gerade die sechste Version von imaskjs library ver√∂ffentlicht. Nach jeder Hauptversion scheint mir dies die neueste Ver...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Neujahr IMaskjs 6 - Reagieren Sie Native, Pipes, ESM</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481922/"><p><img src="https://habrastorage.org/webt/ef/f1/eb/eff1ebw3d7h1yebue3fuxq76vns.png"><br>  Hallo allerseits! </p><br><p>  Ich habe gerade die sechste Version von <a href="https://imask.js.org/">imaskjs</a> library ver√∂ffentlicht.  Nach jeder Hauptversion scheint mir dies die neueste Version zu sein.  Die Bibliothek ist mehr als ein Jahr alt, stabil und in der Gemeinde sehr beliebt.  Was kann man dort und auch in der Hauptversion noch tun?  In all meinen Projekten versuche ich, Aufgaben zu erledigen, damit ich im aktuellen Kontext nicht zu ihnen zur√ºckkehre.  Was kann sich in der Maske √§ndern?  - Browser √§ndern ihre APIs nicht, Javascript ist gleich, Gesch√§ftsaufgaben sind gleich - Telefone, Karten, Nummern.  Warum kannst du nicht aufh√∂ren, dich erinnern und nicht mehr ber√ºhren? </p><a name="habracut"></a><br><p>  Nat√ºrlich m√ºssen Sie es von Zeit zu Zeit nach unten dr√ºcken, damit das Projekt anscheinend am Leben ist und das Datum des letzten Commits auf Github aktualisiert wird.  Ich bin nicht die einzige, die sie ansieht, wenn ich eine Bibliothek ausw√§hle? </p><br><p>  Es scheint jedoch keinen ernsthaften Grund f√ºr die √Ñnderungen zu geben.  Eigentlich gibt es.  In meinem Fall mit der Maske betreffen die wichtigsten √Ñnderungen das Javascript-√ñkosystem: Die Sprache selbst ist l√§ngst √ºber den Browser hinausgegangen und verbreitet sich dort, wo zuvor native Tools verwendet wurden, was neue Anforderungen an die Tools stellt.  Es entstehen auch neue UI-Frameworks, die angepasst werden m√ºssen.  Obwohl mir die Oberfl√§che der Bibliothek so einfach und bequem wie m√∂glich zu sein scheint, gibt es und kann es keine Probleme mit der Integration von irgendetwas geben, auf jeden Fall im Browser.  Aber dann habe ich angefangen an einem Plugin f√ºr React Native zu arbeiten. </p><br><h2 id="lezem-v-trubu-na-react-native">  Wir steigen auf React Native in die Pipe </h2><br><p>  Soweit ich wei√ü, handelt es sich bei React Native um ein gro√ües Projekt, das sehr lange gelebt hat und bei dem sogar ernsthafte Leute zum Einsatz kommen.  Vor ein paar Jahren habe ich versucht, RN in einem kleinen Testprojekt zu verwenden, und das war das Ende meiner √úbung - ich bin ins Internet gegangen.  Ungef√§hr zur gleichen Zeit habe ich ein Plug-In f√ºr die Maske auf RN erstellt und mich sehr bem√ºht, dass es so funktioniert, wie ich es m√∂chte, aber nicht konnte.  Ich habe <a href="https://github.com/uNmAnNeR/imaskjs/issues/12">einige Fehler</a> im RN-Repository bei der Verarbeitung von Eingaben und der Cursorpositionierung gefunden, mich beruhigt und beschlossen, ein bisschen zu warten. </p><br><p>  Mehr als ein Jahr ist vergangen und ich dachte, es w√§re Zeit zur√ºckzukehren und das Plugin bereits loszuwerden.  Es stellte sich heraus, dass sich in dieser Zeit praktisch nichts ge√§ndert hat: Die alten Bugs wurden wegen mangelnder Aktivit√§t geschlossen, die Cursorpositionierungsoberfl√§che hat sich ein wenig ge√§ndert, und das ist alles.  Ich w√ºrde gerne denken, dass das Problem in meiner Bibliothek liegt, ich werde alles reparieren und es wird funktionieren.  Leider hat die Maske meiner Meinung nach bereits die einfachste Schnittstelle - der gr√∂√üte Teil der Logik wird in den Kernel √ºbernommen, f√ºr die Verarbeitung der Eingabe werden nur zwei Zust√§nde ben√∂tigt - der Cursor und der Wert vor und nach der √Ñnderung.  Meiner Meinung nach ist es nirgendwo einfacher, aber ich konnte immer noch keine RN bekommen. </p><br><p>  Eine der Schwierigkeiten besteht darin, dass sich die Reihenfolge der Eingabeereignisse in RN von der im Browser unterscheidet.  Beispielsweise befindet sich der Cursor im Browser f√ºr das <em>Eingabeereignis</em> bereits an der neuen Position, aber in RN gibt es ein separates <em>onSelectionChange-</em> Ereignis, das nach dem √Ñndern des Werts auftritt, und im Gegensatz dazu nur unter iOS und Android.  Und der zweite Punkt: Sie k√∂nnen den Wert im Feld im Ereignishandler der Wert√§nderung auf RN nicht √§ndern, genau wie bei der Cursorpositionierung.  Daher sind Verz√∂gerungen bei der √Ñnderung unvermeidlich und infolgedessen ruckeln der Text und der Cursor.  Diese Bugs sind bereits fast drei Jahre alt, daher sehe ich keinen Grund, l√§nger zu warten. Ich habe das Plugin so wie es ist herausgebracht, aber ich rate davon ab, es zu verwenden.  Eher habe ich es getan, um die Aufmerksamkeit der Gesellschaft auf sich zu ziehen: Vielleicht werden Fehler in RN behoben, oder vielleicht verbindet jemand die Ereignisverarbeitung in nativem Code mit IMask, wo solche Probleme vermieden werden k√∂nnen. </p><br><h2 id="svoya-truba">  Eigene Pfeife </h2><br><p>  Nun ein wenig √ºber das Gute.  Die Maske kann nun zum Formatieren und Konvertieren verwendet werden: </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> numberPipe = IMask.createPipe({ <span class="hljs-attr"><span class="hljs-attr">mask</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>, <span class="hljs-attr"><span class="hljs-attr">scale</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">thousandsSeparator</span></span>: <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-attr"><span class="hljs-attr">normalizeZeros</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">padFractionalZeros</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }); <span class="hljs-comment"><span class="hljs-comment">// `numberPipe` -    numberPipe('1'); // "1,00"</span></span></code> </pre> <br><p>  Sie k√∂nnen eine Maske zum Arbeiten mit Eingaben und zum Formatieren wiederverwenden, z. B. in einem Formular: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     const mask = IMask(el, { mask: Number, scale: 2, thousandsSeparator: ' ', normalizeZeros: true, padFractionalZeros: true, }); //   pipe    , //     IMask.pipe( 1, //  mask.masked, //     IMask.PIPE_TYPE.TYPED, //     IMask.PIPE_TYPE.UNMASKED //     ) // 1.00</span></span></code> </pre> <br><p>  Im Angular-Plugin, der Einfachheit halber in einer lokalen Pipe verpackt. <br>  Auch hier ist die Implementierung von buchst√§blich 5 Codezeilen ein Indikator f√ºr erfolgreiche Architektur, und zwar so einfach und funktional wie m√∂glich.  Trotzdem wurden 5 Codezeilen mehr als einmal hinzugef√ºgt, und die Gr√∂√üe der gesamten Bibliothek ist bereits sehr ernst. </p><br><h2 id="esm-moduli">  ESM-Module </h2><br><p>  Vor ein paar Jahren, als die Maske ungef√§hr 30 Kb gro√ü war, sagte ich allen, dass dies f√ºr eine Maske nicht viel ist.  Jetzt ist es fast 60 Kb und selbst mir kam es ein bisschen viel vor.  Es gibt eine einfache L√∂sung - <del>  gzip </del>  nimm nur was du brauchst.  Im Idealfall sollte der Kollektor die Abh√§ngigkeiten automatisch analysieren und alles verwerfen, was nicht verwendet wird.  Obwohl ESM-Module schon lange in der Maske sind, hat das Treeshaking fast nicht funktioniert, weil  Verweise auf interne Entit√§ten befanden sich im Stamm-IMask-Objekt.  Dies geschah aufgrund des Vorhandenseins von zyklischen Abh√§ngigkeiten in der Maske und auch, weil ich wollte, dass die Maske in der Lage ist, sowohl ein Stammobjekt als auch separat in Teilen zu importieren.  Dies geschieht zum Beispiel in React: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; React.Component === Component; <span class="hljs-comment"><span class="hljs-comment">// true</span></span></code> </pre> <br><p>  In IMask 6.0 wurde die feste Verbindung zwischen den Modulen unterbrochen und es wurde m√∂glich, einzelne Module zu importieren: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    // import IMask from 'imask'; //      import IMask from 'imask/esm/imask'; //   ,   //    import 'imask/esm/masked/number'; //      ,       const numberMask = IMask(element, { mask: Number });</span></span></code> </pre> <br><p>  In diesem Fall k√∂nnen Sie den alten Ansatz weiter verwenden, und es wird nichts kaputt gehen, aber das Treeshaking funktioniert auch nicht. </p><br><p>  Nun, f√ºr den Anfang: Die neue Version unterst√ºtzt <em>inhaltsbearbeitbare</em> und Web-Komponenten!  Vielen Dank an die Community f√ºr das Feedback und die Poolanfragen. </p><br><p>  Mit jedem neuen Release werden die Bugs d√ºnner und die W√ºnsche exotischer.  Auch hier scheint die Sache ein Ende zu haben.  Und so sieht es so aus, als ob es unendlich sein wird, bis das Projekt stirbt oder etwas Besseres auftaucht.  Oder vielleicht √§ndert sich die Plattform und es erscheinen neue Benutzeroberfl√§chen.  Aber anscheinend sind Browser jetzt irgendwo zwischen Jugend und Reife, und nach dem Tod der Textmaske gibt es keine funktionalen Alternativen f√ºr IMask, und ich kann immer noch einen Tropfen Zeit auf Open Source finden, also sollte es eine Maske geben. </p><br><p>  Alles Erfolg und Inspiration im neuen Jahr, mit dem Kommen! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481922/">https://habr.com/ru/post/de481922/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481906/index.html">Chinesisches Gehirn oder zur Verteidigung des Fr√ºhlings</a></li>
<li><a href="../de481910/index.html">Flexible VerticalSwipeBehavior schreiben</a></li>
<li><a href="../de481912/index.html">Ich war eine Woche lang Praktikant bei SRE-engineer. Beobachten Sie mit den Augen eines Software-Ingenieurs</a></li>
<li><a href="../de481914/index.html">Spring Boot vs Spring MVC vs Spring - Wie vergleichen sie?</a></li>
<li><a href="../de481916/index.html">Woran hat sich das Jahr 2019 in der Entwicklung erinnert?</a></li>
<li><a href="../de481924/index.html">Apache Spark, Lazy Evaluation und mehrseitige SQL-Abfragen</a></li>
<li><a href="../de481926/index.html">Lernen Sie die neue Veeam Backup for AWS-L√∂sung kennen</a></li>
<li><a href="../de481930/index.html">Entwicklungskultur: Wie Leistung und Effizienz bewertet werden</a></li>
<li><a href="../de481932/index.html">Bereitstellung und Datenbanken ohne Ausfallzeiten</a></li>
<li><a href="../de481934/index.html">Analyse: Warum der Kurs der Tesla-Aktie steigt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>