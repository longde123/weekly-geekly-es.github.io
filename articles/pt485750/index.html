<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôéüèº üïô üì¢ APIs para as quais finalmente vale a pena atualizar do Java 8. Parte 1 üë®üèø‚Äçüè≠ ü¶ç üö≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O Java 8 √© de longe a vers√£o mais popular do Java e permanecer√° com ele por algum tempo. No entanto, cinco novas vers√µes do Java j√° foram lan√ßadas des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>APIs para as quais finalmente vale a pena atualizar do Java 8. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485750/"><p>  O Java 8 √© de longe a vers√£o mais popular do Java e permanecer√° com ele por algum tempo.  No entanto, cinco novas vers√µes do Java j√° foram lan√ßadas desde ent√£o (9, 10, 11, 12, 13), e em breve outro Java 14 ser√° lan√ßado. Um grande n√∫mero de novos recursos apareceu nessas novas vers√µes.  Por exemplo, se voc√™ contar nos JEPs, 141 no total foram implementados: </p><br><ul><li>  99 no <a href="https://openjdk.java.net/projects/jdk9/" rel="nofollow">JDK 9</a> </li><li>  12 no <a href="https://openjdk.java.net/projects/jdk/10/" rel="nofollow">JDK 10</a> </li><li>  17 no <a href="https://openjdk.java.net/projects/jdk/11/" rel="nofollow">JDK 11</a> </li><li>  8 no <a href="https://openjdk.java.net/projects/jdk/12/" rel="nofollow">JDK 12</a> </li><li>  5 no <a href="https://openjdk.java.net/projects/jdk/13/" rel="nofollow">JDK 13</a> </li><li>  (+14 a <a href="https://openjdk.java.net/projects/jdk/14/" rel="nofollow">JDK 14</a> ) </li></ul><br><p>  No entanto, nesta s√©rie de artigos, n√£o haver√° uma lista seca de PEC.  Em vez disso, s√≥ quero falar sobre APIs interessantes que apareceram em novas vers√µes.  Cada artigo conter√° 10 APIs.  Na escolha e ordem dessas APIs, n√£o haver√° l√≥gica e regularidade espec√≠ficas.  Ser√£o apenas 10 APIs aleat√≥rias, n√£o TOP 10 e sem classifica√ß√£o da API mais importante para a menos importante.  Vamos come√ßar. </p><a name="habracut"></a><br>
<h3>  1. M√©todos <code>Objects.requireNonNullElse()</code> e <code>Objects.requireNonNullElseGet()</code> </h3><br><h4>  Introduzido em: Java 9 </h4><br><p>  Come√ßamos nossa lista com dois m√©todos muito simples, mas muito √∫teis, na classe <code>java.util.Objects</code> : <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Objects.html" rel="nofollow">requireNonNullElse()</a></code> e <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Objects.html" rel="nofollow">requireNonNullElseGet()</a></code> .  Esses m√©todos permitem retornar o objeto transmitido, se n√£o for <code>null</code> e, se for <code>null</code> , retorne o objeto por padr√£o.  Por exemplo: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyCoder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Charset charset; MyCoder(Charset charset) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.charset = Objects.requireNonNullElse( charset, StandardCharsets.UTF_8); } }</code> </pre> <br><p>  <code>requireNonNullElseGet()</code> nada mais √© do que uma vers√£o lenta do <code>requireNonNullElse()</code> .  Pode ser √∫til se o c√°lculo do argumento padr√£o for caro: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyCoder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Charset charset; MyCoder(Charset charset) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.charset = Objects.requireNonNullElseGet( charset, MyCoder::defaultCharset); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Charset </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">defaultCharset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// long operation... } }</span></span></code> </pre> <br><p>  Sim, √© claro, em ambos os casos, √© poss√≠vel facilmente passar sem essas fun√ß√µes, por exemplo, usando o operador tern√°rio usual ou <code>Optional</code> , mas ainda assim usar uma fun√ß√£o especial torna o c√≥digo um pouco mais curto e mais limpo.  E se voc√™ usar a importa√ß√£o est√°tica e a grava√ß√£o, basta <code>requireNonNullElse()</code> vez de <code>Objects.requireNonNullElse()</code> , o c√≥digo poder√° ser reduzido ainda mais. </p><br><br><h3>  2. M√©todos de f√°brica retornando cole√ß√µes imut√°veis </h3><br><h4>  Introduzido em: Java 9 </h4><br><p>  Se os dois m√©todos anteriores forem apenas cosm√©ticos, os m√©todos de f√°brica de coleta est√°tica podem realmente reduzir bastante o c√≥digo e at√© melhorar sua seguran√ßa.  Estes s√£o os seguintes m√©todos <a href="https://openjdk.java.net/jeps/269" rel="nofollow">introduzidos</a> no Java 9: </p><br><ul><li>  <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/List.html" rel="nofollow">List.of(E... elements)</a></code> (e sobrecargas) </li><li>  <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Set.html" rel="nofollow">Set.of(E... elements)</a></code> (e sobrecargas) </li><li>  <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Map.html" rel="nofollow">Map.of(K k1, V v1, K k2, V v2, ...)</a></code> (e sobrecargas) </li><li> <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Map.html" rel="nofollow">Map.ofEntries(Entry&lt;? extends K, ? extends V&gt;... entries)</a></code> </li> </ul><br><p>  Na mesma lista, voc√™ pode adicionar o <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Map.html" rel="nofollow">Map.entry(K k, V v)</a></code> que acompanha, que cria <code>Entry</code> partir da chave e do valor, bem como m√©todos para copiar cole√ß√µes que <a href="https://minijug.ru/unmodifiable_collections_enhancements_in_java_10.html" rel="nofollow">apareceram</a> no Java 10: </p><br><ul><li> <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/List.html" rel="nofollow">List.copyOf(Collection&lt;? extends E&gt; coll)</a></code> </li> <li> <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Set.html" rel="nofollow">Set.copyOf(Collection&lt;? extends E&gt; coll)</a></code> </li> <li> <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Map.html" rel="nofollow">Map.copyOf(Map&lt;? extends K,‚Äã? extends V&gt; map)</a></code> </li> </ul><br><p>  Os m√©todos est√°ticos de f√°brica permitem criar uma cole√ß√£o imut√°vel e inicializ√°-la em uma a√ß√£o: </p><br><pre> <code class="java hljs">List&lt;String&gt; imageExtensions = List.of(<span class="hljs-string"><span class="hljs-string">"bmp"</span></span>, <span class="hljs-string"><span class="hljs-string">"jpg"</span></span>, <span class="hljs-string"><span class="hljs-string">"png"</span></span>, <span class="hljs-string"><span class="hljs-string">"gif"</span></span>);</code> </pre> <br><p>  Se voc√™ n√£o usar bibliotecas de terceiros, c√≥digo semelhante no Java 8 parecer√° muito mais complicado: </p><br><pre> <code class="java hljs">List&lt;String&gt; imageExtensions = Collections.unmodifiableList( Arrays.asList(<span class="hljs-string"><span class="hljs-string">"bmp"</span></span>, <span class="hljs-string"><span class="hljs-string">"jpg"</span></span>, <span class="hljs-string"><span class="hljs-string">"png"</span></span>, <span class="hljs-string"><span class="hljs-string">"gif"</span></span>));</code> </pre> <br><p>  E no caso de <code>Set</code> ou <code>Map</code> ainda √© mais triste, porque n√£o h√° an√°logos de <code>Arrays.asList()</code> para <code>Set</code> e <code>Map</code> . </p><br><p>  Essa complexidade leva muitas pessoas que escrevem no Java 8 a abandonar completamente as cole√ß√µes imut√°veis ‚Äã‚Äãe sempre usam o habitual <code>ArrayList</code> , <code>HashSet</code> e <code>HashMap</code> , e mesmo onde o significado de cole√ß√µes imut√°veis ‚Äã‚Äã√© necess√°rio.  Como resultado, isso quebra o conceito de imut√°vel por padr√£o e reduz a seguran√ßa do c√≥digo. </p><br><p>  Se voc√™ finalmente atualizar do Java 8, o trabalho com cole√ß√µes imut√°veis ‚Äã‚Äãse tornar√° muito mais f√°cil e agrad√°vel, gra√ßas aos m√©todos de f√°brica. </p><br><br><h3>  3. <code>Files.readString()</code> e <code>Files.writeString()</code> </h3><br><h4>  Introduzido em: Java 11 </h4><br><p>  O Java sempre foi conhecido por sua introdu√ß√£o lenta de m√©todos prontos para opera√ß√µes frequentes.  Por exemplo, para uma das opera√ß√µes mais populares em programa√ß√£o, a leitura de um arquivo, por muito tempo, n√£o havia m√©todo pronto.  Apenas 15 anos ap√≥s o lan√ßamento do Java 1.0, o NIO apareceu, onde o m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/nio/file/Files.html" rel="nofollow">Files.readAllBytes()</a></code> foi introduzido para ler o arquivo em uma matriz de bytes. </p><br><p>  Mas isso ainda n√£o foi suficiente, porque as pessoas geralmente precisam trabalhar com arquivos de texto e, para isso, √© necess√°rio ler as strings do arquivo, n√£o bytes.  Portanto, no Java 8, o m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/nio/file/Files.html" rel="nofollow">Files.readAllLines()</a></code> foi adicionado, retornando uma <code>List&lt;String&gt;</code> . </p><br><p>  No entanto, isso n√£o foi suficiente, pois as pessoas perguntaram como era f√°cil ler o arquivo inteiro como uma √∫nica linha.  Como resultado, para concluir a imagem no Java 11, o t√£o esperado m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/nio/file/Files.html" rel="nofollow">Files.readString()</a></code> foi <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/nio/file/Files.html" rel="nofollow">Files.readString()</a></code> , encerrando finalmente esta quest√£o.  Surpreendentemente, se um m√©todo semelhante estava presente em muitas outras linguagens desde o in√≠cio, o Java levou mais de 20 anos para fazer isso. </p><br><p>  Juntamente com <code>readString()</code> claro, o m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/nio/file/Files.html" rel="nofollow">writeString()</a></code> sim√©trico tamb√©m foi introduzido.  Esses m√©todos tamb√©m possuem sobrecargas que permitem especificar um conjunto de caracteres.  Juntos, tudo isso torna o trabalho com arquivos de texto extremamente conveniente.  Um exemplo: </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/**        */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reencodeFile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Path path, Charset from, Charset to)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ String content = Files.readString(path, from); Files.writeString(path, content, to); }</code> </pre> <br><br><h3>  4. <code>Optional.ifPresentOrElse()</code> e <code>Optional.stream()</code> </h3><br><h4>  Introduzido em: Java 9 </h4><br><p>  Quando o <code>Optional</code> apareceu no Java 8, eles n√£o possu√≠am uma maneira conveniente de executar duas a√ß√µes diferentes, dependendo se ele possui ou n√£o um valor.  Como resultado, as pessoas precisam recorrer √† cadeia usual <code>isPresent()</code> e <code>get()</code> : </p><br><pre> <code class="java hljs">Optional&lt;String&gt; opt = ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (opt.isPresent()) { log.info(<span class="hljs-string"><span class="hljs-string">"Value = "</span></span> + opt.get()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { log.error(<span class="hljs-string"><span class="hljs-string">"Empty"</span></span>); }</code> </pre> <br><p>  Ou voc√™ ainda pode se esquivar dessa maneira: </p><br><pre> <code class="java hljs">Optional&lt;String&gt; opt = ... opt.ifPresent(str -&gt; log.info(<span class="hljs-string"><span class="hljs-string">"Value = "</span></span> + str)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (opt.isEmpty()) { log.error(<span class="hljs-string"><span class="hljs-string">"Empty"</span></span>); }</code> </pre> <br><p>  Ambas as op√ß√µes n√£o s√£o perfeitas.  Mas, come√ßando no Java 9, isso pode ser feito de maneira elegante usando o m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Optional.html" rel="nofollow">Optional.ifPresentOrElse()</a></code> : </p><br><pre> <code class="java hljs">Optional&lt;String&gt; opt = ... opt.ifPresentOrElse( str -&gt; log.info(<span class="hljs-string"><span class="hljs-string">"Value = "</span></span> + str), () -&gt; log.error(<span class="hljs-string"><span class="hljs-string">"Empty"</span></span>));</code> </pre> <br><p>  Outro novo m√©todo interessante no Java 9 √© o <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Optional.html" rel="nofollow">Optional.stream()</a></code> , que retorna um <code>Stream</code> de um elemento se o valor estiver presente e um <code>Stream</code> vazio, se n√£o estiver.  Esse m√©todo pode ser muito √∫til em cadeias com <code>flatMap()</code> .  Por exemplo, neste exemplo, √© muito simples obter uma lista de todos os n√∫meros de telefone de uma empresa: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">Optional&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPhoneNumber</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Department</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">List&lt;Employee&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getEmployees</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Company</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">List&lt;Department&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDepartments</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-function"><span class="hljs-function">Set&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAllPhoneNumbers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getDepartments() .stream() .flatMap(d -&gt; d.getEmployees().stream()) .flatMap(e -&gt; e.getPhoneNumber().stream()) .collect(Collectors.toSet()); } }</code> </pre> <br><p>  No Java 8, voc√™ teria que escrever algo como: </p><br><pre> <code class="plaintext hljs">e -&gt; e.getPhoneNumber().map(Stream::of).orElse(Stream.empty())</code> </pre> <br><p>  Parece volumoso e n√£o muito leg√≠vel. </p><br><br><h3>  5. <code>Process.pid()</code> , <code>Process.info()</code> e <code>ProcessHandle</code> </h3><br><h4>  Introduzido em: Java 9 </h4><br><p>  Se voc√™ ainda puder gerenciar sem as APIs anteriores, a substitui√ß√£o do m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Process.html" rel="nofollow">Process.pid()</a></code> no Java 8 ser√° bastante problem√°tica, especialmente entre plataformas.  Este m√©todo retorna o ID do processo nativo: </p><br><pre> <code class="java hljs">Process process = Runtime.getRuntime().exec(<span class="hljs-string"><span class="hljs-string">"java -version"</span></span>); System.out.println(process.pid());</code> </pre> <br><p>  Usando o m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Process.html" rel="nofollow">Process.info()</a></code> , voc√™ tamb√©m pode encontrar informa√ß√µes √∫teis adicionais sobre o processo.  Retorna um objeto do tipo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/ProcessHandle.Info.html" rel="nofollow">ProcessHandle.Info</a></code> .  Vamos ver o que ele nos retorna para o processo acima: </p><br><pre> <code class="java hljs">Process process = Runtime.getRuntime().exec(<span class="hljs-string"><span class="hljs-string">"java -version"</span></span>); ProcessHandle.Info info = process.info(); System.out.println(<span class="hljs-string"><span class="hljs-string">"PID = "</span></span> + process.pid()); System.out.println(<span class="hljs-string"><span class="hljs-string">"User = "</span></span> + info.user()); System.out.println(<span class="hljs-string"><span class="hljs-string">"Command = "</span></span> + info.command()); System.out.println(<span class="hljs-string"><span class="hljs-string">"Args = "</span></span> + info.arguments().map(Arrays::toString)); System.out.println(<span class="hljs-string"><span class="hljs-string">"Command Line = "</span></span> + info.commandLine()); System.out.println(<span class="hljs-string"><span class="hljs-string">"Start Time = "</span></span> + info.startInstant()); System.out.println(<span class="hljs-string"><span class="hljs-string">"Total Time = "</span></span> + info.totalCpuDuration());</code> </pre> <br><p>  Conclus√£o: </p><br><pre> <code class="plaintext hljs">PID = 174 User = Optional[orionll] Command = Optional[/usr/lib/jvm/java-13-openjdk-amd64/bin/java] Args = Optional[[-version]] Command Line = Optional[/usr/lib/jvm/java-13-openjdk-amd64/bin/java -version] Start Time = Optional[2020-01-24T05:54:25.680Z] Total Time = Optional[PT0.01S]</code> </pre> <br><p>  E se o processo n√£o foi iniciado a partir do atual processo Java?  Para isso, <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/ProcessHandle.html" rel="nofollow">ProcessHandle</a></code> vem em <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/ProcessHandle.html" rel="nofollow">ProcessHandle</a></code> .  Por exemplo, vamos obter todas as mesmas informa√ß√µes para o processo atual usando o m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/ProcessHandle.html" rel="nofollow">ProcessHandle.current()</a></code> : </p><br><pre> <code class="java hljs">ProcessHandle handle = ProcessHandle.current(); ProcessHandle.Info info = handle.info(); System.out.println(<span class="hljs-string"><span class="hljs-string">"PID = "</span></span> + handle.pid()); System.out.println(<span class="hljs-string"><span class="hljs-string">"User = "</span></span> + info.user()); System.out.println(<span class="hljs-string"><span class="hljs-string">"Command = "</span></span> + info.command()); System.out.println(<span class="hljs-string"><span class="hljs-string">"Args = "</span></span> + info.arguments().map(Arrays::toString)); System.out.println(<span class="hljs-string"><span class="hljs-string">"Command Line = "</span></span> + info.commandLine()); System.out.println(<span class="hljs-string"><span class="hljs-string">"Start Time = "</span></span> + info.startInstant()); System.out.println(<span class="hljs-string"><span class="hljs-string">"Total Time = "</span></span> + info.totalCpuDuration());</code> </pre> <br><p>  Conclus√£o: </p><br><pre> <code class="plaintext hljs">PID = 191 User = Optional[orionll] Command = Optional[/usr/lib/jvm/java-13-openjdk-amd64/bin/java] Args = Optional[[Main.java]] Command Line = Optional[/usr/lib/jvm/java-13-openjdk-amd64/bin/java Main.java] Start Time = Optional[2020-01-24T05:59:17.060Z] Total Time = Optional[PT1.56S]</code> </pre> <br><p>  Para obter um <code>ProcessHandle</code> para qualquer processo por seu PID, voc√™ pode usar o m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/ProcessHandle.html" rel="nofollow">ProcessHandle.of()</a></code> (ele retornar√° <code>Optional.empty</code> se o processo n√£o existir). </p><br><p>  Tamb√©m no <code>ProcessHandle</code> existem muitos outros m√©todos interessantes, por exemplo, <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/ProcessHandle.html" rel="nofollow">ProcessHandle.allProcesses()</a></code> . </p><br><br><h3>  6. M√©todos de <code>String</code> : <code>isBlank()</code> , <code>strip()</code> , <code>stripLeading()</code> , <code>stripTrailing()</code> , <code>repeat()</code> e <code>lines()</code> </h3><br><h4>  Introduzido em: Java 11 </h4><br><p>  Uma montanha inteira de m√©todos √∫teis para strings apareceu no Java 11. </p><br><p>  O m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/String.html" rel="nofollow">String.isBlank()</a></code> permite descobrir se uma sequ√™ncia consiste apenas em espa√ßo em branco: </p><br><pre> <code class="java hljs">System.out.println(<span class="hljs-string"><span class="hljs-string">" \n\r\t"</span></span>.isBlank()); <span class="hljs-comment"><span class="hljs-comment">// true</span></span></code> </pre> <br><p>  Os <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/String.html" rel="nofollow">String.stripLeading()</a></code> , <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/String.html" rel="nofollow">String.stripTrailing()</a></code> e <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/String.html" rel="nofollow">String.strip()</a></code> removem caracteres de espa√ßo em branco no in√≠cio de uma linha, no final de uma linha ou nas duas extremidades: </p><br><pre> <code class="java hljs">String str = <span class="hljs-string"><span class="hljs-string">" \tHello, world!\t\n"</span></span>; String str1 = str.stripLeading(); <span class="hljs-comment"><span class="hljs-comment">// "Hello, world!\t\n" String str2 = str.stripTrailing(); // " \tHello, world!" String str3 = str.strip(); // "Hello, world!"</span></span></code> </pre> <br><p>  Observe que <code>String.strip()</code> n√£o <code>String.strip()</code> o mesmo que <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/String.html" rel="nofollow">String.trim()</a></code> : o segundo remove apenas caracteres cujo c√≥digo √© menor ou igual a U + 0020 e o primeiro tamb√©m remove espa√ßos do Unicode: </p><br><pre> <code class="java hljs">System.out.println(<span class="hljs-string"><span class="hljs-string">"str\u2000"</span></span>.strip()); <span class="hljs-comment"><span class="hljs-comment">// "str" System.out.println("str\u2000".trim()); // "str\u2000"</span></span></code> </pre> <br><br><p>  O m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/String.html" rel="nofollow">String.repeat()</a></code> concatena a pr√≥pria sequ√™ncia <code>n</code> vezes: </p><br><pre> <code class="java hljs">System.out.print(<span class="hljs-string"><span class="hljs-string">"Hello, world!\n"</span></span>.repeat(<span class="hljs-number"><span class="hljs-number">3</span></span>));</code> </pre> <br><p>  Conclus√£o: </p><br><pre> <code class="plaintext hljs">Hello, world! Hello, world! Hello, world!</code> </pre> <br><p>  Finalmente, o m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/String.html" rel="nofollow">String.lines()</a></code> divide a string em linhas.  Adeus <code>String.split()</code> , com a qual as pessoas confundem constantemente, qual argumento usar para isso, <code>"\n"</code> ou <code>"\r"</code> ou <code>"\n\r"</code> (na verdade, √© melhor usar regularmente express√£o <code>"\R"</code> , que abrange todas as combina√ß√µes).  Al√©m disso, <code>String.lines()</code> geralmente pode ser mais eficiente, pois retorna linhas lentamente. </p><br><pre> <code class="java hljs">System.out.println(<span class="hljs-string"><span class="hljs-string">"line1\nline2\nline3\n"</span></span> .lines() .map(String::toUpperCase) .collect(Collectors.joining(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>)));</code> </pre> <br><p>  Conclus√£o: </p><br><pre> <code class="plaintext hljs">LINE1 LINE2 LINE3</code> </pre> <br><br><h3>  7. <code>String.indent()</code> </h3><br><h4>  Apareceu em: Java 12 </h4><br><p>  Vamos diluir nossa hist√≥ria com algo novo que apareceu recentemente.  Meet: o m√©todo <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/String.html" rel="nofollow">String.indent()</a></code> , que aumenta (ou diminui) a indenta√ß√£o de cada linha em uma determinada linha pelo valor especificado.  Por exemplo: </p><br><pre> <code class="java hljs">String body = <span class="hljs-string"><span class="hljs-string">"&lt;h1&gt;Title&lt;/h1&gt;\n"</span></span> + <span class="hljs-string"><span class="hljs-string">"&lt;p&gt;Hello, world!&lt;/p&gt;"</span></span>; System.out.println(<span class="hljs-string"><span class="hljs-string">"&lt;html&gt;\n"</span></span> + <span class="hljs-string"><span class="hljs-string">" &lt;body&gt;\n"</span></span> + body.indent(<span class="hljs-number"><span class="hljs-number">4</span></span>) + <span class="hljs-string"><span class="hljs-string">" &lt;/body&gt;\n"</span></span> + <span class="hljs-string"><span class="hljs-string">"&lt;/html&gt;"</span></span>);</code> </pre> <br><p>  Conclus√£o: </p><br><pre> <code class="plaintext hljs">&lt;html&gt; &lt;body&gt; &lt;h1&gt;Title&lt;/h1&gt; &lt;p&gt;Hello, world!&lt;/p&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre> <br><p>  Observe que, para a √∫ltima linha, o pr√≥prio <code>String.indent()</code> inseriu o feed da linha, portanto n√£o precisamos adicionar <code>'\n'</code> ap√≥s o <code>body.indent(4)</code> . </p><br><p>  Obviamente, esse m√©todo ser√° de maior interesse em combina√ß√£o com <a href="https://minijug.ru/text_blocks.html" rel="nofollow">blocos de texto</a> quando eles se tornarem est√°veis, mas nada nos impede de us√°-lo agora sem nenhum bloco de texto. </p><br><br><h3>  8. M√©todos de <code>Stream</code> : <code>takeWhile()</code> , <code>dropWhile()</code> , <code>iterate()</code> com um predicado e <code>ofNullable()</code> </h3><br><h4>  Introduzido em: Java 9 </h4><br><p>  <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/stream/Stream.html" rel="nofollow">Stream.takeWhile()</a></code> √© semelhante a <code>Stream.limit()</code> , mas restringe o <code>Stream</code> n√£o por quantidade, mas por predicado.  Essa necessidade de programa√ß√£o surge com muita frequ√™ncia.  Por exemplo, se precisarmos obter todas as entradas do di√°rio para o ano atual: </p><br><pre> <code class="plaintext hljs">[ { "date" : "2020-01-27", "text" : "..." }, { "date" : "2020-01-25", "text" : "..." }, { "date" : "2020-01-22", "text" : "..." }, { "date" : "2020-01-17", "text" : "..." }, { "date" : "2020-01-11", "text" : "..." }, { "date" : "2020-01-02", "text" : "..." }, { "date" : "2019-12-30", "text" : "..." }, { "date" : "2019-12-27", "text" : "..." }, ... ]</code> </pre> <br><p>  <code>Stream</code> registros √© quase infinito; portanto, <code>filter()</code> n√£o pode ser usado.  Ent√£o <code>takeWhile()</code> vem ao <code>takeWhile()</code> : </p><br><pre> <code class="plaintext hljs">getNotesStream() .takeWhile(note -&gt; note.getDate().getYear() == 2020);</code> </pre> <br><p>  E se queremos obter registros para 2019, podemos usar <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/stream/Stream.html" rel="nofollow">dropWhile()</a></code> : </p><br><pre> <code class="plaintext hljs">getNotesStream() .dropWhile(note -&gt; note.getDate().getYear() == 2020) .takeWhile(note -&gt; note.getDate().getYear() == 2019);</code> </pre> <br><p>  No Java 8, <code>Stream.iterate()</code> poderia gerar apenas um <code>Stream</code> infinito.  Mas no Java 9, esse m√©todo possui uma <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/stream/Stream.html" rel="nofollow"></a></code> que requer um predicado.  Gra√ßas a isso, muitos loops agora podem ser substitu√≠dos pelo <code>Stream</code> : </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Java 8 for (int i = 1; i &lt; 100; i *= 2) { System.out.println(i); }</span></span></code> </pre> <br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Java 9+ IntStream .iterate(1, i -&gt; i &lt; 100, i -&gt; i * 2) .forEach(System.out::println);</span></span></code> </pre> <br><p>  Ambas as vers√µes imprimem todos os graus de empate que n√£o excedem <code>100</code> : </p><br><pre> <code class="plaintext hljs">1 2 4 8 16 32 64</code> </pre> <br><p>  A prop√≥sito, o √∫ltimo c√≥digo pode ser reescrito usando <code>takeWhile()</code> : </p><br><pre> <code class="plaintext hljs">IntStream .iterate(1, i -&gt; i * 2) .takeWhile(i -&gt; i &lt; 100) .forEach(System.out::println);</code> </pre> <br><p>  No entanto, a op√ß√£o com a <code>iterate()</code> tr√™s argumentos <code>iterate()</code> ainda √© mais limpa (e o IntelliJ IDEA <a href="https://youtrack.jetbrains.com/issue/IDEA-214960" rel="nofollow">sugere</a> corrigi-la novamente). </p><br><p>  Por fim, <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/stream/Stream.html" rel="nofollow">Stream.ofNullable()</a></code> retorna um <code>Stream</code> com um elemento se n√£o for <code>null</code> e um <code>Stream</code> vazio se for <code>null</code> .  Este m√©todo √© perfeito no exemplo acima com os telefones da empresa, se <code>getPhoneNumber()</code> retornar uma <code>String</code> anul√°vel em vez de <code>Optional&lt;String&gt;</code> : </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPhoneNumber</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Department</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">List&lt;Employee&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getEmployees</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Company</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">List&lt;Department&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDepartments</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-function"><span class="hljs-function">Set&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAllPhoneNumbers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getDepartments() .stream() .flatMap(d -&gt; d.getEmployees().stream()) .flatMap(e -&gt; Stream.ofNullable(e.getPhoneNumber())) .collect(Collectors.toSet()); } }</code> </pre> <br><br><h3>  9. <code>Predicate.not()</code> </h3><br><h4>  Apareceu em: Java 11 </h4><br><p>  Este m√©todo n√£o introduz nada fundamentalmente novo e √© mais cosm√©tico do que fundamental.  No entanto, a capacidade de encurtar um pouco o c√≥digo √© sempre muito agrad√°vel.  Usando <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/function/Predicate.html" rel="nofollow">Predicate.not()</a></code> lambdas com nega√ß√£o podem ser substitu√≠das por refer√™ncias de m√©todo: </p><br><pre> <code class="plaintext hljs">Files.lines(path) .filter(str -&gt; !str.isEmpty()) .forEach(System.out::println);</code> </pre> <br><p>  E agora usando <code>not()</code> : </p><br><pre> <code class="plaintext hljs">Files.lines(path) .filter(not(String::isEmpty)) .forEach(System.out::println);</code> </pre> <br><p>  Sim, a economia n√£o √© t√£o grande e, se voc√™ usar <code>s -&gt; !s.isEmpty()</code> , o n√∫mero de caracteres, pelo contr√°rio, se tornar√° maior.  Mas, mesmo neste caso, ainda prefiro a segunda op√ß√£o, pois √© mais declarativa e n√£o usa uma vari√°vel nela, o que significa que o espa√ßo para nome n√£o est√° confuso. </p><br><br><h3>  10. Limpador </h3><br><h4>  Apareceu em: Java 9 </h4><br><p>  Quero encerrar a hist√≥ria de hoje com uma nova API interessante que apareceu no Java 9 e serve para limpar os recursos antes que eles sejam descartados pelo coletor de lixo.  <code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/ref/Cleaner.html" rel="nofollow">Cleaner</a></code> √© um substituto seguro para o m√©todo <code>Object.finalize()</code> , que foi descontinuado no Java 9. </p><br><p>  Usando o <code>Cleaner</code> voc√™ pode registrar uma limpeza de recursos que ocorrer√° se voc√™ se esquecer de faz√™-lo explicitamente (por exemplo, se esqueceu de chamar o m√©todo <code>close()</code> ou se n√£o usou o <code>try-with-resources</code> ).  Aqui est√° um exemplo de um recurso abstrato para o qual uma a√ß√£o de limpeza √© registrada no construtor: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Resource</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Closeable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Cleaner CLEANER = Cleaner.create(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Cleaner.Cleanable cleanable; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Resource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ cleanable = CLEANER.register(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, () -&gt; { <span class="hljs-comment"><span class="hljs-comment">//   // (,  ) }); } @Override public void close() { cleanable.clean(); } }</span></span></code> </pre> <br><p>  De uma maneira boa, os usu√°rios devem criar esse recurso no bloco <code>try</code> : </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> resource = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Resource()) { <span class="hljs-comment"><span class="hljs-comment">//   }</span></span></code> </pre> <br><p>  No entanto, pode haver usu√°rios que se esquecem de fazer isso e escrevem simplesmente <code>var resource = new Resource()</code> .  Nesses casos, a limpeza n√£o ser√° realizada imediatamente, mas ser√° chamada posteriormente em um dos seguintes ciclos de coleta de lixo.  √â melhor que nada. </p><br><p>  Se voc√™ deseja estudar melhor o <code>Cleaner</code> e descobrir por que voc√™ nunca deve usar <code>finalize()</code> , recomendo que voc√™ ou√ßa <a href="https://www.youtube.com/watch%3Fv%3DK5IctLPem0c" rel="nofollow">minha palestra</a> sobre este t√≥pico. </p><br><br><h3>  Conclus√£o </h3><br><p>  Java n√£o fica parado e est√° se desenvolvendo gradualmente.  Enquanto voc√™ est√° no Java 8, em cada vers√£o, h√° mais e mais novas APIs interessantes.  Hoje analisamos 10 dessas APIs.  E voc√™ pode us√°-los todos se finalmente decidir migrar do Java 8. </p><br><p>  Da pr√≥xima vez, veremos mais 10 novas APIs. </p><br>  <i>Se voc√™ n√£o quiser pular a pr√≥xima parte, recomendo que voc√™ assine <a href="https://tlg.name/miniJUG" rel="nofollow">meu canal Telegram</a> , onde tamb√©m publico not√≠cias sobre Java.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt485750/">https://habr.com/ru/post/pt485750/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt485740/index.html">O impasse na PHDays: participe da batalha de anivers√°rio de hackers e defensores</a></li>
<li><a href="../pt485742/index.html">Como criamos o diret√≥rio de endere√ßos da Rostelecom</a></li>
<li><a href="../pt485744/index.html">Intelig√™ncia - a capacidade de um objeto de adaptar seu comportamento ao meio ambiente para preservar (sobreviver)</a></li>
<li><a href="../pt485746/index.html">A 4¬™ plataforma parte do servidor usado</a></li>
<li><a href="../pt485748/index.html">Encadeamento opcional, uni√£o com nulo e como eles mudam nossa abordagem para escrever c√≥digo</a></li>
<li><a href="../pt485758/index.html">Gigante modular com controle on-line, bem como teclados t√™xteis e de malha Joe Paradiso</a></li>
<li><a href="../pt485760/index.html">Extens√µes em Kotlin. Atavismo perigoso ou uma ferramenta √∫til?</a></li>
<li><a href="../pt485764/index.html">Reagir autentica√ß√£o de token</a></li>
<li><a href="../pt485766/index.html">Regras de alimenta√ß√£o</a></li>
<li><a href="../pt485768/index.html">Tend√™ncias da Web para 2020 que vale a pena experimentar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>