<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ô£Ô∏è üåí üëäüèº Erfahrung der Rambler Group: Wie wir damit begannen, die Bildung und das Verhalten von Front-End-React-Komponenten vollst√§ndig zu kontrollieren üëÇüèº üëë üë®‚Äçüöí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es gibt viele M√∂glichkeiten, eine moderne Webanwendung zu erstellen, aber jedes Team steht unweigerlich vor denselben Fragen: Wie verteilt man die Ver...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erfahrung der Rambler Group: Wie wir damit begannen, die Bildung und das Verhalten von Front-End-React-Komponenten vollst√§ndig zu kontrollieren</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rambler-co/blog/417023/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/qx/mz/rd/qxmzrd_ehgvjx1pimjk_fuelvgk.jpeg"></div><br>  Es gibt viele M√∂glichkeiten, eine moderne Webanwendung zu erstellen, aber jedes Team steht unweigerlich vor denselben Fragen: Wie verteilt man die Verantwortlichkeiten f√ºr Vorder- und R√ºckseite, wie minimiert man das Auftreten doppelter Logik - zum Beispiel bei der Validierung von Daten, welche Bibliotheken f√ºr die Arbeit verwendet werden sollen, wie man Zuverl√§ssigkeit gew√§hrleistet und transparenter Transport zwischen Vorder- und R√ºckseite und Dokumentation des Codes. <br><br>  Unserer Meinung nach ist es uns gelungen, ein gutes Beispiel f√ºr eine in Komplexit√§t und Gewinn ausgewogene L√∂sung zu implementieren, die wir erfolgreich in der Produktion auf der Basis von Symfony und React einsetzen. <a name="habracut"></a><br><br>  Welche Art von Datenaustauschformat k√∂nnen wir w√§hlen, wenn wir die Entwicklung der Backend-API in einem aktiv entwickelten Webprodukt planen, das dynamische Formulare mit verwandten Feldern und komplexer Gesch√§ftslogik enth√§lt? <br><br><ul><li>  SWAGGER ist eine gute Option, es gibt Dokumentation und praktische Debugging-Tools.  Dar√ºber hinaus gibt es Bibliotheken f√ºr Symfony, die den Prozess automatisieren. Leider hat sich das JSON-Schema als vorzuziehen erwiesen. </li><li>  JSON-Schema - Diese Option wurde von Front-End-Entwicklern angeboten.  Sie hatten bereits Bibliotheken, in denen sie Formulare anzeigen konnten.  Dies bestimmte unsere Wahl.  Mit dem Format k√∂nnen Sie die primitiven √úberpr√ºfungen beschreiben, die im Browser durchgef√ºhrt werden k√∂nnen.  Es gibt auch eine Dokumentation, die alle m√∂glichen Optionen f√ºr das Schema beschreibt. </li><li>  GraphQL ist ziemlich jung.  Nicht so viele serverseitige und Frontend-Bibliotheken.  Zum Zeitpunkt der Erstellung des Systems wurde dies in Zukunft nicht ber√ºcksichtigt. Der beste Weg, eine API zu erstellen, wird in einem separaten Artikel dazu ver√∂ffentlicht. </li><li>  SOAP - hat eine strikte Typisierung von Daten, die F√§higkeit, Dokumentation zu erstellen, aber es ist nicht so einfach, sich mit der React-Front anzufreunden.  SOAP hat auch einen h√∂heren Overhead f√ºr dieselbe nutzbare Menge √ºbertragener Daten. </li></ul><br>  Alle diese Formate deckten unsere Bed√ºrfnisse nicht vollst√§ndig ab, so dass ich meinen eigenen Harvester schreiben musste.  Ein √§hnlicher Ansatz kann hochwirksame L√∂sungen f√ºr eine bestimmte Anwendung bieten, birgt jedoch Risiken: <br><br><ul><li>  hohe Wahrscheinlichkeit von Fehlern; </li><li>  oft nicht 100% Dokumentation und Testabdeckung; </li><li>  geringe "Modularit√§t" aufgrund der Schlie√üung der Software-API.  In der Regel werden solche L√∂sungen unter einem Monolithen geschrieben und implizieren keine gemeinsame Nutzung zwischen Projekten in Form von Komponenten, da dies eine spezielle architektonische Konstruktion erfordert (lesen Sie die Entwicklungskosten). </li><li>  hohes Einstiegsniveau neuer Entwickler.  Es kann lange dauern, bis man die K√ºhle eines Fahrrads verstanden hat. </li></ul><br>  Daher empfiehlt es sich, nach der Regel g√§ngige und stabile Bibliotheken (wie das linke Pad von npm) zu verwenden. Der beste Code ist der, den Sie nie geschrieben, aber das Gesch√§ftsproblem gel√∂st haben.  Die Entwicklung des Webanwendungs-Backends in den Werbetechnologien der Rambler Group wird bei Symfony durchgef√ºhrt.  Wir werden nicht auf alle verwendeten Komponenten des Frameworks eingehen, sondern im Folgenden auf den Hauptteil eingehen, auf dessen Grundlage die Arbeit implementiert wird - das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Symfony-Formular</a> .  Das Frontend verwendet React und die entsprechende Bibliothek, die das JSON-Schema f√ºr WEB-Besonderheiten erweitert - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">React JSON Schema Form</a> . <br><br>  Allgemeines Arbeitsschema: <br><br><img src="https://habrastorage.org/webt/fk/ym/pf/fkympfjqrjcrpzb2u04mc5lsera.png"><br><br>  Dieser Ansatz hat viele Vorteile: <br><br><ul><li>  Die Dokumentation wird sofort generiert, ebenso wie die M√∂glichkeit, automatische Tests zu erstellen - wiederum gem√§√ü dem Schema. </li><li>  Alle √ºbertragenen Daten werden eingegeben. </li><li>  Es ist m√∂glich, Informationen √ºber die grundlegenden Validierungsregeln zu √ºbertragen. <br>  Schnelle Integration der Transportschicht in React - dank der Mozilla React JSON-Schemabibliothek; </li><li>  die F√§higkeit, Front-End-Webkomponenten aus der Box durch Bootstrap-Integration zu generieren; </li><li>  Die logische Gruppierung, eine Reihe von Validierungen und m√∂glichen Werten von HTML-Elementen sowie die gesamte Gesch√§ftslogik werden an einem einzigen Punkt gesteuert. Im Backend gibt es keine Duplizierung von Code. </li><li>  Es ist so einfach wie m√∂glich, die Anwendung auf andere Plattformen zu portieren. Der Ansichtsteil ist vom Steuerelement getrennt (siehe vorherigen Absatz). Anstelle von React und dem Browser kann die Android- oder iOS-Anwendung Benutzeranforderungen rendern und verarbeiten. </li></ul><br>  Schauen wir uns die Komponenten und das Schema ihrer Interaktion genauer an. <br><br>  Mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JSON Schema</a> k√∂nnen Sie zun√§chst primitive √úberpr√ºfungen beschreiben, die auf dem Client durchgef√ºhrt werden k√∂nnen, z. B. das Binden oder Eingeben verschiedener Teile des Schemas: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> schema = { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"A registration form"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"A simple form example."</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, <span class="hljs-string"><span class="hljs-string">"required"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"firstName"</span></span>, <span class="hljs-string"><span class="hljs-string">"lastName"</span></span> ], <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"firstName"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"First name"</span></span> }, <span class="hljs-string"><span class="hljs-string">"lastName"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Last name"</span></span> }, <span class="hljs-string"><span class="hljs-string">"password"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Password"</span></span>, <span class="hljs-string"><span class="hljs-string">"minLength"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> }, <span class="hljs-string"><span class="hljs-string">"telephone"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Telephone"</span></span>, <span class="hljs-string"><span class="hljs-string">"minLength"</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span> } } }</code> </pre> <br>  F√ºr die Arbeit mit Front-End-Schemata gibt es die beliebte Bibliothek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">React JSON Schema Form</a> , die die f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">JSON Schema</a> f√ºr die Webentwicklung erforderlichen Add-Ons bereitstellt: <br><br>  <b>uiSchema</b> - Das JSON-Schema selbst bestimmt die Art der zu √ºbergebenden Parameter. Dies reicht jedoch nicht aus, um eine Webanwendung zu erstellen.  Beispielsweise kann ein Feld vom Typ String als &lt;Eingabe ... /&gt; oder als &lt;Textbereich ... /&gt; dargestellt werden. Dies sind wichtige Nuancen, die ber√ºcksichtigen, dass Sie ein Diagramm f√ºr den Client korrekt zeichnen m√ºssen.  UiSchema dient auch dazu, diese Nuancen zu vermitteln. Beispielsweise k√∂nnen Sie f√ºr das oben dargestellte JSON-Schema die visuelle Webkomponente des folgenden uiSchema angeben: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> uiSchema = { <span class="hljs-string"><span class="hljs-string">"firstName"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:autofocus"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:emptyValue"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-string"><span class="hljs-string">"age"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"updown"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Age of person"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:description"</span></span>: <span class="hljs-string"><span class="hljs-string">"(earthian year)"</span></span> }, <span class="hljs-string"><span class="hljs-string">"bio"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"textarea"</span></span> }, <span class="hljs-string"><span class="hljs-string">"password"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"password"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"Hint: Make it strong!"</span></span> }, <span class="hljs-string"><span class="hljs-string">"date"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"alt-datetime"</span></span> }, <span class="hljs-string"><span class="hljs-string">"telephone"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:options"</span></span>: { <span class="hljs-string"><span class="hljs-string">"inputType"</span></span>: <span class="hljs-string"><span class="hljs-string">"tel"</span></span> } } }</code> </pre><br>  Ein Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">f√ºr einen</a> Live-Spielplatz <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">finden Sie hier</a> . <br><br>  Mit dieser Verwendung des Schemas wird das Front-End-Rendering von den Standard-Bootstrap-Komponenten in mehreren Zeilen implementiert: <br><br><pre> <code class="javascript hljs">render(( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Form</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">schema</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{schema}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">uiSchema</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{uiSchema}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> ), document.getElementById("app"));</span></span></code> </pre><br>  Wenn die mit Bootstrap gelieferten Standard-Widgets nicht zu Ihnen passen und Sie eine Anpassung ben√∂tigen, k√∂nnen Sie f√ºr einige Datentypen Ihre eigenen Vorlagen in uiSchema angeben. Zum Zeitpunkt des Schreibens werden <i>Zeichenfolge</i> , <i>Zahl</i> , <i>Ganzzahl</i> und <i>Boolescher</i> Wert unterst√ºtzt. <br><br>  <b>FormData</b> - enth√§lt Formulardaten, zum Beispiel: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"firstName"</span></span>: <span class="hljs-string"><span class="hljs-string">"Chuck"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lastName"</span></span>: <span class="hljs-string"><span class="hljs-string">"Norris"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"age"</span></span>: <span class="hljs-number"><span class="hljs-number">78</span></span>, <span class="hljs-attr"><span class="hljs-attr">"bio"</span></span>: <span class="hljs-string"><span class="hljs-string">"Roundhouse kicking asses since 1940"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"password"</span></span>: <span class="hljs-string"><span class="hljs-string">"noneed"</span></span> }</code> </pre><br>  Nach dem Rendern werden die Widgets mit diesen Daten gef√ºllt - n√ºtzlich zum Bearbeiten von Formularen sowie f√ºr einige benutzerdefinierte Mechanismen, die wir f√ºr verwandte Felder und komplexe Formulare hinzugef√ºgt haben, mehr dazu weiter unten. <br><br>  In den oben beschriebenen Abschnitten auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Plugin-Seite erfahren</a> Sie mehr √ºber alle Nuancen beim Einrichten und Verwenden der Abschnitte. <br><br>  Standardm√§√üig k√∂nnen Sie in der Bibliothek nur mit diesen drei Abschnitten arbeiten. F√ºr eine vollwertige Webanwendung m√ºssen Sie jedoch eine Reihe von Funktionen hinzuf√ºgen: <br><br>  <b>Fehler</b> - Es ist auch erforderlich, Fehler verschiedener Backend-Pr√ºfungen zum Rendern an den Benutzer √ºbertragen zu k√∂nnen, und Fehler k√∂nnen entweder einfache Validierungsfehler sein - zum Beispiel die Eindeutigkeit der Anmeldung bei der Registrierung des Benutzers oder komplexere Fehler basierend auf der Gesch√§ftslogik - d. H.  Wir m√ºssen in der Lage sein, ihre (Fehler-) Anzahl und Texte der angezeigten Benachrichtigungen anzupassen.  Zu diesem Zweck wurde zus√§tzlich zu den oben beschriebenen der Abschnitt Fehler zum Satz der √ºbertragenen Daten hinzugef√ºgt. F√ºr jedes Feld wird hier eine Liste der Fehler f√ºr das Rendern definiert <br><br>  <b>Aktion</b> , <b>Methode</b> - Zum Senden der vom Benutzer vorbereiteten Daten an das Backend wurden zwei Attribute hinzugef√ºgt, die die URL des Backends des Controllers, der die Verarbeitung durchf√ºhrt, und die HTTP-√úbermittlungsmethode enthalten <br><br>  Als Ergebnis haben wir f√ºr die Kommunikation zwischen Vorder- und R√ºckseite json mit den folgenden Abschnitten erhalten: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"action"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://..."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"method"</span></span>: <span class="hljs-string"><span class="hljs-string">"POST"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"errors"</span></span>:{}, <span class="hljs-attr"><span class="hljs-attr">"schema"</span></span>:{}, <span class="hljs-attr"><span class="hljs-attr">"formData"</span></span>:{}, <span class="hljs-attr"><span class="hljs-attr">"uiSchema"</span></span>:{} }</code> </pre><br>  Aber wie werden diese Daten im Backend generiert?  Zum Zeitpunkt der Erstellung des Systems gab es keine vorgefertigten Bibliotheken, mit denen Sie Symfony Form in ein JSON-Schema konvertieren konnten.  Jetzt sind sie bereits erschienen, haben aber ihre Nachteile - zum Beispiel interpretiert das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LiformBundle</a> das JSON-Schema ziemlich frei und √§ndert den Standard nach eigenem Ermessen, so dass ich leider meine eigene Implementierung schreiben musste. <br><br>  Als Grundlage f√ºr die Generierung wird das Standard- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Symfony-Formular verwendet</a> .  Es reicht aus, den Builder zu verwenden und die erforderlichen Felder hinzuzuf√ºgen: <br><div class="spoiler">  <b class="spoiler_title">Formularbeispiel</b> <div class="spoiler_text"><pre> <code class="php hljs">$builder -&gt;add(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, TextType::class, [ <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.title'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.title'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'description'</span></span>, TextareaType::class, [ <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.description'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.description'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'year'</span></span>, ChoiceType::class, [ <span class="hljs-string"><span class="hljs-string">'choices'</span></span> =&gt; range(<span class="hljs-number"><span class="hljs-number">1981</span></span>, <span class="hljs-number"><span class="hljs-number">1990</span></span>), <span class="hljs-string"><span class="hljs-string">'choice_label'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($val)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $val; }, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.year'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.year'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'genre'</span></span>, ChoiceType::class, [ <span class="hljs-string"><span class="hljs-string">'choices'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'fantasy'</span></span>, <span class="hljs-string"><span class="hljs-string">'thriller'</span></span>, <span class="hljs-string"><span class="hljs-string">'comedy'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'choice_label'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($val)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'genre.choice.'</span></span>.$val; }, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.genre'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.genre'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'available'</span></span>, CheckboxType::class, [ <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.available'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.available'</span></span>, ], ]);</code> </pre><br></div></div><br>  Am Ausgang wird diese Form in eine Schaltung der Form umgewandelt: <br><div class="spoiler">  <b class="spoiler_title">JsonSchema-Beispiel</b> <div class="spoiler_text"><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"action"</span></span>: <span class="hljs-string"><span class="hljs-string">"//localhost/create.json"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"method"</span></span>: <span class="hljs-string"><span class="hljs-string">"POST"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"schema"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"properties"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"maxLength"</span></span>: <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-attr"><span class="hljs-attr">"minLength"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.title"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.description"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"year"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"1981"</span></span>, <span class="hljs-string"><span class="hljs-string">"1982"</span></span>, <span class="hljs-string"><span class="hljs-string">"1983"</span></span>, <span class="hljs-string"><span class="hljs-string">"1984"</span></span>, <span class="hljs-string"><span class="hljs-string">"1985"</span></span>, <span class="hljs-string"><span class="hljs-string">"1986"</span></span>, <span class="hljs-string"><span class="hljs-string">"1987"</span></span>, <span class="hljs-string"><span class="hljs-string">"1988"</span></span>, <span class="hljs-string"><span class="hljs-string">"1989"</span></span>, <span class="hljs-string"><span class="hljs-string">"1990"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"1981"</span></span>, <span class="hljs-string"><span class="hljs-string">"1982"</span></span>, <span class="hljs-string"><span class="hljs-string">"1983"</span></span>, <span class="hljs-string"><span class="hljs-string">"1984"</span></span>, <span class="hljs-string"><span class="hljs-string">"1985"</span></span>, <span class="hljs-string"><span class="hljs-string">"1986"</span></span>, <span class="hljs-string"><span class="hljs-string">"1987"</span></span>, <span class="hljs-string"><span class="hljs-string">"1988"</span></span>, <span class="hljs-string"><span class="hljs-string">"1989"</span></span>, <span class="hljs-string"><span class="hljs-string">"1990"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.year"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"genre.choice.fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.comedy"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.genre"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"available"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.available"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"required"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>, <span class="hljs-string"><span class="hljs-string">"year"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>, <span class="hljs-string"><span class="hljs-string">"available"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"formData"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"year"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"uiSchema"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.title"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"text"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.description"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"textarea"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"year"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.year"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.genre"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"available"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.available"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"checkbox"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"mainForm"</span></span> } }</code> </pre><br></div></div><br>  Der gesamte Code, der Formulare in JSON konvertiert, ist geschlossen und wird nur in der Rambler-Gruppe verwendet. Wenn die Community Interesse an diesem Thema hat, werden wir ihn im Bundle-Format in unserem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Repository umgestalten</a> . <br><br>  Schauen wir uns einige weitere Aspekte an, ohne die es schwierig ist, eine moderne Webanwendung zu erstellen: <br><br><h3>  Feldvalidierung </h3><br>  Die Einstellung erfolgt mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Symfony-Validator</a> , der die Regeln f√ºr die Validierung eines Objekts beschreibt. Ein Beispiel f√ºr einen Validator: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"title"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">constraint</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Length"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"min"</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"max"</span></span></span><span class="hljs-tag">&gt;</span></span>255<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"minMessage"</span></span></span><span class="hljs-tag">&gt;</span></span>title.min<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"maxMessage"</span></span></span><span class="hljs-tag">&gt;</span></span>title.max<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">constraint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">constraint</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"NotBlank"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"message"</span></span></span><span class="hljs-tag">&gt;</span></span>title.not_blank<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">constraint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  In diesem Beispiel √§ndert eine Einschr√§nkung vom Typ NotBlank das Schema, indem dem Feld der erforderlichen Felder des Schemas ein Feld hinzugef√ºgt wird, und eine Einschr√§nkung vom Typ L√§nge f√ºgt die Attribute Schema-&gt; Eigenschaften-&gt; Titel-&gt; maxLength und Schema-&gt; Eigenschaften-&gt; Titel-&gt; minLength hinzu, die bei der Validierung bereits ber√ºcksichtigt werden sollten am vorderen Ende. <br><br><h3>  Elemente gruppieren </h3><br>  Im wirklichen Leben sind einfache Formen eher eine Ausnahme von der Regel.  Zum Beispiel kann ein Projekt ein Formular mit einer gro√üen Anzahl von Feldern haben und es ist nicht die beste Option, alles in einer soliden Liste anzugeben - wir m√ºssen uns um die Benutzer unserer Anwendung k√ºmmern: <br><img src="https://habrastorage.org/webt/ez/wo/w3/ezwow3h3t7sgngwhcujbv-b93vw.png"><br>  Die offensichtliche Entscheidung besteht darin, das Formular in logische Gruppen von Steuerelementen zu unterteilen, damit der Benutzer leichter navigieren und weniger Fehler machen kann: <br><img src="https://habrastorage.org/webt/o3/z2/w-/o3z2w-uxh-gqpzd1sjsynspzltu.png"><br>  Wie Sie wissen, sind die Funktionen des sofort einsatzbereiten Symfony-Formulars recht umfangreich. Beispielsweise k√∂nnen Formulare von anderen Formularen geerbt werden. Dies ist praktisch, in unserem Fall gibt es jedoch Nachteile.  In der aktuellen Implementierung bestimmt die Reihenfolge im JSON-Schema die Reihenfolge, in der das Formularelement im Browser gezeichnet wird. Die Vererbung kann gegen diese Reihenfolge versto√üen.  Eine M√∂glichkeit bestand darin, Elemente zu gruppieren, zum Beispiel: <br><br><div class="spoiler">  <b class="spoiler_title">Beispiel f√ºr eine verschachtelte Form</b> <div class="spoiler_text"><pre> <code class="php hljs">$info = $builder -&gt;create(<span class="hljs-string"><span class="hljs-string">'info'</span></span>,FormType::class,[<span class="hljs-string"><span class="hljs-string">'inherit_data'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, TextType::class, [ <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.title'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.title'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'description'</span></span>, TextareaType::class, [ <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.description'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.description'</span></span>, ], ]); $builder -&gt;add($info) -&gt;add(<span class="hljs-string"><span class="hljs-string">'year'</span></span>, ChoiceType::class, [ <span class="hljs-string"><span class="hljs-string">'choices'</span></span> =&gt; range(<span class="hljs-number"><span class="hljs-number">1981</span></span>, <span class="hljs-number"><span class="hljs-number">1990</span></span>), <span class="hljs-string"><span class="hljs-string">'choice_label'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($val)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $val; }, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.year'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.year'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'genre'</span></span>, ChoiceType::class, [ <span class="hljs-string"><span class="hljs-string">'choices'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'fantasy'</span></span>, <span class="hljs-string"><span class="hljs-string">'thriller'</span></span>, <span class="hljs-string"><span class="hljs-string">'comedy'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'choice_label'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($val)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'genre.choice.'</span></span>.$val; }, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.genre'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.genre'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'available'</span></span>, CheckboxType::class, [ <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.available'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.available'</span></span>, ], ]);</code> </pre><br></div></div><br>  Dieses Formular wird in eine Schaltung des Formulars umgewandelt: <br><br><div class="spoiler">  <b class="spoiler_title">Beispiel f√ºr ein verschachteltes JsonSchema</b> <div class="spoiler_text"><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"schema"</span></span>: { <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"info"</span></span>: { <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.title"</span></span> }, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.description"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"required"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span> }, <span class="hljs-string"><span class="hljs-string">"year"</span></span>: { <span class="hljs-string"><span class="hljs-string">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"1981"</span></span>, <span class="hljs-string"><span class="hljs-string">"1982"</span></span>, <span class="hljs-string"><span class="hljs-string">"1983"</span></span>, <span class="hljs-string"><span class="hljs-string">"1984"</span></span>, <span class="hljs-string"><span class="hljs-string">"1985"</span></span>, <span class="hljs-string"><span class="hljs-string">"1986"</span></span>, <span class="hljs-string"><span class="hljs-string">"1987"</span></span>, <span class="hljs-string"><span class="hljs-string">"1988"</span></span>, <span class="hljs-string"><span class="hljs-string">"1989"</span></span>, <span class="hljs-string"><span class="hljs-string">"1990"</span></span> ], <span class="hljs-string"><span class="hljs-string">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"1981"</span></span>, <span class="hljs-string"><span class="hljs-string">"1982"</span></span>, <span class="hljs-string"><span class="hljs-string">"1983"</span></span>, <span class="hljs-string"><span class="hljs-string">"1984"</span></span>, <span class="hljs-string"><span class="hljs-string">"1985"</span></span>, <span class="hljs-string"><span class="hljs-string">"1986"</span></span>, <span class="hljs-string"><span class="hljs-string">"1987"</span></span>, <span class="hljs-string"><span class="hljs-string">"1988"</span></span>, <span class="hljs-string"><span class="hljs-string">"1989"</span></span>, <span class="hljs-string"><span class="hljs-string">"1990"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.year"</span></span> }, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>: { <span class="hljs-string"><span class="hljs-string">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> ], <span class="hljs-string"><span class="hljs-string">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"genre.choice.fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.comedy"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.genre"</span></span> }, <span class="hljs-string"><span class="hljs-string">"available"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.available"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"required"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"info"</span></span>, <span class="hljs-string"><span class="hljs-string">"year"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>, <span class="hljs-string"><span class="hljs-string">"available"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span> }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">und entsprechendes uiSchema</b> <div class="spoiler_text"><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"uiSchema"</span></span>: { <span class="hljs-string"><span class="hljs-string">"info"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.title"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"text"</span></span> }, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.description"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"textarea"</span></span> }, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"form"</span></span> }, <span class="hljs-string"><span class="hljs-string">"year"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.year"</span></span> }, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.genre"</span></span> }, <span class="hljs-string"><span class="hljs-string">"available"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.available"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"checkbox"</span></span> }, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"group"</span></span> }</code> </pre><br></div></div><br>  Diese Gruppierungsmethode passte nicht zu uns, da das Formular f√ºr die Daten von der Pr√§sentation abh√§ngt und beispielsweise nicht in der API oder anderen Formularen verwendet werden kann.  Es wurde beschlossen, zus√§tzliche Parameter in uiSchema zu verwenden, ohne den aktuellen JSON-Schema-Standard zu verletzen.  Infolgedessen wurden dem Symphonieformular zus√§tzliche Optionen des folgenden Typs hinzugef√ºgt: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'fieldset'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'groups'</span></span> =&gt; [ [ <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'base'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'info'</span></span>, <span class="hljs-string"><span class="hljs-string">'fields'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-string"><span class="hljs-string">'description'</span></span>], <span class="hljs-string"><span class="hljs-string">'order'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-string"><span class="hljs-string">'description'</span></span>] ] ], <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'base'</span></span> ]</code> </pre><br>  Dies wird in das folgende Schema konvertiert: <br><br><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"ui:group"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"base"</span></span>, <span class="hljs-string"><span class="hljs-string">"groups"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"group"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"info"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"legend.info"</span></span>, <span class="hljs-string"><span class="hljs-string">"fields"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> ], <span class="hljs-string"><span class="hljs-string">"order"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> ] } ], <span class="hljs-string"><span class="hljs-string">"order"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"info"</span></span> ] },</code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">Vollversion von Schema und uiSchema</b> <div class="spoiler_text"><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"schema"</span></span>: { <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: { <span class="hljs-string"><span class="hljs-string">"maxLength"</span></span>: <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-string"><span class="hljs-string">"minLength"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.title"</span></span> }, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.description"</span></span> }, <span class="hljs-string"><span class="hljs-string">"year"</span></span>: { <span class="hljs-string"><span class="hljs-string">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"1989"</span></span>, <span class="hljs-string"><span class="hljs-string">"1990"</span></span> ], <span class="hljs-string"><span class="hljs-string">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"1989"</span></span>, <span class="hljs-string"><span class="hljs-string">"1990"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.year"</span></span> }, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>: { <span class="hljs-string"><span class="hljs-string">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> ], <span class="hljs-string"><span class="hljs-string">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"genre.choice.fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.comedy"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.genre"</span></span> }, <span class="hljs-string"><span class="hljs-string">"available"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"boolean"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.available"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"required"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>, <span class="hljs-string"><span class="hljs-string">"year"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>, <span class="hljs-string"><span class="hljs-string">"available"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span> }</code> </pre><br><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"uiSchema"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.title"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"text"</span></span> }, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.description"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"textarea"</span></span> }, <span class="hljs-string"><span class="hljs-string">"year"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.year"</span></span> }, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.genre"</span></span> }, <span class="hljs-string"><span class="hljs-string">"available"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.available"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"checkbox"</span></span> }, <span class="hljs-string"><span class="hljs-string">"ui:group"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"base"</span></span>, <span class="hljs-string"><span class="hljs-string">"groups"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"group"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"info"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"legend.info"</span></span>, <span class="hljs-string"><span class="hljs-string">"fields"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> ], <span class="hljs-string"><span class="hljs-string">"order"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> ] } ], <span class="hljs-string"><span class="hljs-string">"order"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"info"</span></span> ] }, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"fieldset"</span></span> }</code> </pre><br></div></div><br>  Da die von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">uns verwendete React-Bibliothek</a> auf der Front-End-Seite dies nicht <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sofort</a> unterst√ºtzt, musste ich diese Funktionalit√§t selbst hinzuf√ºgen.  Durch das Hinzuf√ºgen eines neuen Elements ‚Äûui: group‚Äú erhalten wir die M√∂glichkeit, den Prozess der Gruppierung von Elementen und Formularen mithilfe der aktuellen API vollst√§ndig zu steuern. <br><br><h3>  Dynamische Formen </h3><br>  Was ist, wenn ein Feld von einem anderen abh√§ngt? Eine Dropdown-Liste mit Unterkategorien h√§ngt beispielsweise von der ausgew√§hlten Kategorie ab. <br><br><img src="https://habrastorage.org/webt/4p/6c/-t/4p6c-tgimotfkxkvhfrvglduxlw.gif"><br><br>  Symfony FORM bietet uns die M√∂glichkeit, mithilfe von Ereignissen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dynamische Formulare</a> zu erstellen. Leider wurde diese Funktion zum Zeitpunkt der Implementierung von JSON Schema nicht unterst√ºtzt, obwohl <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diese Funktion</a> in neueren Versionen verf√ºgbar war.  Urspr√ºnglich bestand die Idee darin, die gesamte Liste einem Enum- und EnumNames-Objekt zuzuweisen, basierend darauf, welche Werte gefiltert werden sollen: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"properties"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"genre.choice.fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.comedy"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.genre"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"sgenre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"eccentric"</span></span>, <span class="hljs-string"><span class="hljs-string">"romantic"</span></span>, <span class="hljs-string"><span class="hljs-string">"grotesque"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"enumNames"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"sgenre.choice.eccentric"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"sgenre.choice.romantic"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"sgenre.choice.grotesque"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.genre"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span> }</code> </pre><br>  Bei diesem Ansatz ist es jedoch erforderlich, f√ºr jedes dieser Elemente eine eigene Verarbeitung in das Front-End zu schreiben, ganz zu schweigen von der Tatsache, dass alles sehr kompliziert wird, wenn mehrere dieser Objekte vorhanden sind oder ein Element von mehreren Listen abh√§ngt.  Dar√ºber hinaus nimmt die an das Frontend gesendete Datenmenge f√ºr die korrekte Verarbeitung und Darstellung aller Abh√§ngigkeiten erheblich zu.  Stellen Sie sich zum Beispiel eine Zeichnung eines Formulars vor, das aus drei miteinander verbundenen Feldern besteht - L√§ndern, St√§dten, Stra√üen.  Die Menge an Anfangsdaten, die an das Backend an das Frontend gesendet werden muss, kann Thin Clients ver√§rgern, und wie Sie sich erinnern, m√ºssen wir uns um unsere Benutzer k√ºmmern.  Daher wurde beschlossen, die Dynamik durch Hinzuf√ºgen benutzerdefinierter Attribute zu implementieren: <br><br><ul><li>  SchemaID - Ein Attribut des Schemas, enth√§lt die Adresse des Controllers zum Verarbeiten der aktuell eingegebenen FormData und zum Aktualisieren des Schemas des aktuellen Formulars, falls dies von der Gesch√§ftslogik gefordert wird. </li><li>  Neu laden - Ein Attribut, das dem Frontend mitteilt, dass eine √Ñnderung in diesem Feld eine Aktualisierung der Schaltung durch Senden von Formulardaten an das Backend initiiert. </li></ul><br>  Das Vorhandensein einer <i>SchemaID</i> mag wie eine Duplizierung erscheinen - schlie√ülich gibt es ein <i>Aktionsattribut</i> , aber hier geht es um die Aufteilung der Verantwortung - der <i>SchemaID-</i> Controller <i>ist</i> f√ºr die Zwischenaktualisierung des <i>Schemas</i> und des <i>UISchema verantwortlich</i> , und der <i>Aktionscontroller</i> f√ºhrt die erforderliche Gesch√§ftsaktion aus - erstellt oder aktualisiert beispielsweise ein Objekt und l√§sst nicht zu, dass ein Teil des Formulars als gesendet wird erzeugt Validierungspr√ºfungen. Mit diesen Erg√§nzungen sieht das Schema folgenderma√üen aus: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"schemaId"</span></span>: <span class="hljs-string"><span class="hljs-string">"//localhost/schema.json"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"properties"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"genre.choice.fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.comedy"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.genre"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"sgenre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enum"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"enumNames"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.sgenre"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"uiSchema"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:options"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"reload"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.genre"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"sgenre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.sgenre"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"mainForm"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span> }</code> </pre><br>  Wenn Sie das Feld "Genre" √§ndern, sendet das Frontend das gesamte Formular mit den aktuellen Daten an das Backend und erh√§lt als Antwort eine Reihe von Abschnitten, die zum Rendern des Formulars erforderlich sind: <br><br><pre> <code class="hljs css">{ <span class="hljs-attribute"><span class="hljs-attribute">action</span></span>: ‚Äúhttps://...‚Äù, method: <span class="hljs-string"><span class="hljs-string">"POST"</span></span>, schema:{} <span class="hljs-selector-tag"><span class="hljs-selector-tag">formData</span></span>:{} <span class="hljs-selector-tag"><span class="hljs-selector-tag">uiSchema</span></span>:{} }</code> </pre><br>  und rendern anstelle des aktuellen Formulars.  Was sich nach dem Senden genau √§ndert, h√§ngt von der R√ºckseite ab, die Zusammensetzung oder Anzahl der Felder kann sich √§ndern usw.  - jede √Ñnderung, die die Gesch√§ftslogik der Anwendung erfordert. <br><br><h3>  Fazit </h3><br>  Aufgrund einer kleinen Erweiterung des Standardansatzes haben wir eine Reihe zus√§tzlicher Funktionen erhalten, mit denen wir die Bildung und das Verhalten von Front-End-React-Komponenten vollst√§ndig steuern, dynamische Schaltkreise auf der Grundlage der Gesch√§ftslogik erstellen, einen einzigen Punkt f√ºr die Bildung von Validierungsregeln festlegen und schnell und flexibel neue VIEW-Teile erstellen k√∂nnen - beispielsweise f√ºr Mobilger√§te oder Desktops Anwendungen.  Wenn Sie in solch k√ºhne Experimente einsteigen, m√ºssen Sie sich an den Standard erinnern, auf dessen Grundlage Sie arbeiten, und die Abw√§rtskompatibilit√§t mit ihm aufrechterhalten.  Anstelle von React kann jede andere Bibliothek im Frontend verwendet werden. Hauptsache, Sie schreiben einen Transportadapter in das JSON-Schema und verbinden eine Formular-Rendering-Bibliothek.  Bootstrap hat mit React gut funktioniert, da wir Erfahrung mit diesem Technologie-Stack hatten, aber der Ansatz, √ºber den wir gesprochen haben, schr√§nkt Sie bei der Auswahl der Technologien nicht ein.  Anstelle von Symfony kann es auch ein anderes Framework geben, mit dem Sie Formulare in das JSON-Schema-Format konvertieren k√∂nnen. <br><br>  Update: Sie k√∂nnen unseren Bericht √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Symfony Moscow Meetup # 14</a> dar√ºber ab 1:15:00 Uhr sehen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de417023/">https://habr.com/ru/post/de417023/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de417009/index.html">So implementieren Sie Technologie f√ºr maschinelles Lernen in Ihrem Unternehmen</a></li>
<li><a href="../de417011/index.html">TOP 10 neue Blockchain-Projekte von 2018 - Forbes</a></li>
<li><a href="../de417013/index.html">Plutos ‚ÄûSandd√ºnen‚Äú bestehen nicht aus Sand - dies sind Granulate aus gefrorenem Methan</a></li>
<li><a href="../de417015/index.html">Wir verstehen, welche Aufzeichnungen die Burger King-Anwendung aufzeichnen und welche nicht</a></li>
<li><a href="../de417017/index.html">Wie ein fehlgeschlagenes Kernexperiment versehentlich die Neutrinoastronomie erzeugte</a></li>
<li><a href="../de417027/index.html">Wie habe ich die Standard-C ++ 11-Bibliothek geschrieben oder warum ist Boost so be√§ngstigend? Einf√ºhrung</a></li>
<li><a href="../de417029/index.html">Code Profiling mit LLVM</a></li>
<li><a href="../de417031/index.html">Mobile OAuth 2.0-Sicherheit</a></li>
<li><a href="../de417033/index.html">QIWI Kitchen am 7. Juni - Video der Reden unserer Redner</a></li>
<li><a href="../de417035/index.html">UnnyWorld: Obduktion</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>