<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüî¨ üßëüèæ‚Äçü§ù‚Äçüßëüèº üíæ Pourquoi Kubernetes est-il si compliqu√© avec les r√©f√©rentiels? üë®üèæ‚Äçüè≠ üë®‚Äç‚ù§Ô∏è‚Äçüë® ü¶ê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque les orchestrateurs de conteneurs comme Kubernetes sont arriv√©s, l'approche du d√©veloppement et du d√©ploiement d'applications a radicalement ch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pourquoi Kubernetes est-il si compliqu√© avec les r√©f√©rentiels?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/441222/"><p><img src="https://habrastorage.org/webt/3w/v4/sh/3wv4sha9sfamx7elh4imtocvesm.jpeg"></p><br><p>  Lorsque les orchestrateurs de conteneurs comme Kubernetes sont arriv√©s, l'approche du d√©veloppement et du d√©ploiement d'applications a radicalement chang√©.  Des microservices sont apparus, et pour le d√©veloppeur, la logique applicative n'est plus connect√©e √† l'infrastructure: cr√©ez des applications pour vous et offrez de nouvelles fonctions. </p><br><p>  Kubernetes r√©sume les ordinateurs physiques qu'il contr√¥le.  Dites-lui simplement la quantit√© de m√©moire et de puissance de traitement dont vous avez besoin - et vous obtiendrez tout.  Infrastructure?  Non, pas entendu. </p><br><p>  La gestion des images Docker, Kubernetes et des applications le rend portable.  Apr√®s avoir d√©velopp√© des applications de conteneur avec Kubernetes, vous pouvez les d√©ployer n'importe o√π: dans un cloud ouvert, localement ou dans un environnement hybride - sans changer le code. </p><br><p>  Nous aimons Kubernetes pour l'√©volutivit√©, la portabilit√© et la g√©rabilit√©, mais il ne stocke pas l'√©tat.  Mais nous avons presque toutes les applications avec √©tat, c'est-√†-dire qu'elles ont besoin d'un stockage externe. </p><a name="habracut"></a><br><p>  Kubernetes a une architecture tr√®s dynamique.  Les conteneurs sont cr√©√©s et d√©truits en fonction de la charge et des instructions des d√©veloppeurs.  Les gousses et les conteneurs sont auto-r√©parateurs et se r√©pliquent.  Ils sont essentiellement √©ph√©m√®res. </p><br><p>  <strong>Le stockage externe est trop difficile pour une telle variabilit√©.</strong>  <strong>Il n'ob√©it pas aux r√®gles de cr√©ation et de destruction dynamiques.</strong> </p><br><p> Il suffit de d√©ployer une application avec √©tat dans une autre infrastructure: dans un autre cloud, localement ou dans un mod√®le hybride - comment elle a des probl√®mes de portabilit√©.  Le stockage externe peut √™tre li√© √† un cloud sp√©cifique. </p><br><p>  Mais ce n'est que dans ces stockages pour les applications cloud que le diable lui-m√™me se cassera la jambe.  Et allez comprendre les significations fictives et les significations de <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la terminologie</a></strong> du <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">stockage dans Kubernetes</a></strong> .  Et il existe des r√©f√©rentiels propres √† Kubernetes, des plateformes open source, des services g√©r√©s ou payants ... </p><br><p>  Voici quelques exemples <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de stockage cloud CNCF</a></strong> : </p><br><p><img src="https://habrastorage.org/webt/cm/wl/ov/cmwlovlr6qt3qcicg0sm5acufvw.png"></p><br><p>  Il semblerait que d√©ployer la base de donn√©es dans Kubernetes - il vous suffit de s√©lectionner la solution appropri√©e, de l'emballer dans un conteneur pour travailler sur le disque local et de la d√©ployer sur le cluster en tant que charge de travail suivante.  Mais la base de donn√©es a ses propres particularit√©s, donc penser n'est pas une glace. </p><br><p>  Conteneurs - ils sont tellement pav√©s qu'ils ne pr√©servent pas leur √©tat.  C'est pourquoi ils sont si faciles √† d√©marrer et √† arr√™ter.  Et comme il n'y a rien √† sauvegarder et √† transf√©rer, le cluster ne se soucie pas des op√©rations de lecture et de copie. </p><br><p>  Vous devrez stocker l'√©tat dans la base de donn√©es.  Si une base de donn√©es d√©ploy√©e sur un cluster dans un conteneur ne migre nulle part et ne d√©marre pas trop souvent, la physique du stockage de donn√©es entre en jeu.  Id√©alement, les conteneurs qui utilisent des donn√©es devraient √™tre dans le m√™me foyer que la base de donn√©es. </p><br><p>  Dans certains cas, la base de donn√©es peut bien s√ªr √™tre d√©ploy√©e dans un conteneur.  Dans un environnement de test ou dans des t√¢ches o√π il y a peu de donn√©es, les bases de donn√©es vivent confortablement dans des clusters. </p><br><p>  <strong>La production n√©cessite g√©n√©ralement un stockage externe.</strong> </p><br><p>  Kubernetes communique avec le r√©f√©rentiel via des interfaces de plan de contr√¥le.  Ils lient Kubernetes au stockage externe.  Le stockage externe attach√© √† Kubernetes est appel√© plugins de volume.  Avec eux, vous pouvez r√©sumer le stockage et transf√©rer le stockage. </p><br><p>  <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les plugins de volume √©taient auparavant cr√©√©s</a></strong> , li√©s, compil√©s et fournis √† l'aide de la base de code Kubernetes.  Cela limitait consid√©rablement les d√©veloppeurs et n√©cessitait une maintenance suppl√©mentaire: si vous souhaitez ajouter de nouveaux r√©f√©rentiels, veuillez modifier la base de code de Kubernetes. </p><br><p>  D√©ployez maintenant des plugins de volume sur le cluster - je ne veux pas.  Et vous n'avez pas besoin de creuser dans la base de code.  Merci √† CSI et Flexvolume. </p><br><p><img src="https://habrastorage.org/webt/ug/r7/m4/ugr7m4uco1skczyasqf7xf3op3y.png"></p><br><h3 id="sobstvennoe-hranilische-kubernetes">  Stockage natif Kubernetes </h3><br><p>  Comment Kubernetes r√©sout-il les probl√®mes de stockage?  Il existe plusieurs solutions: options √©ph√©m√®res, stockage persistant dans des volumes persistants, requ√™tes de revendication de volume persistant, classes de stockage ou StatefulSets.  Allez le comprendre, en g√©n√©ral. </p><br><p>  Les volumes persistants (PV) sont des unit√©s de stockage pr√©par√©es par l'administrateur.  Ils ne d√©pendent pas des foyers et de leur vie √©ph√©m√®re. </p><br><p>  Les revendications de volume persistantes (PVC) sont des demandes de stockage, c'est-√†-dire PV.  Avec PVC, vous pouvez lier le stockage √† un n≈ìud et ce n≈ìud l'utilisera. </p><br><p>  Vous pouvez travailler avec le stockage de mani√®re statique ou dynamique. </p><br><p>  Avec une approche statique, l'administrateur pr√©pare les PV, qui sont cens√©s √™tre n√©cessaires √† l'avance, avant les demandes, et ces PV sont li√©s manuellement √† des pods sp√©cifiques √† l'aide de PVC explicites. </p><br><p>  Dans la pratique, les PV sp√©cialement d√©finis ne sont pas compatibles avec la structure portable Kubernetes - le stockage d√©pend de l'environnement, comme AWS EBS ou un lecteur permanent GCE.  Pour lier manuellement, vous devez pointer vers un r√©f√©rentiel sp√©cifique dans le fichier YAML. </p><br><p>  L'approche statique contredit g√©n√©ralement la philosophie de Kubernetes: les processeurs et la m√©moire ne sont pas allou√©s √† l'avance et ne sont pas li√©s √† des pods ou des conteneurs.  Ils sont √©mis dynamiquement. </p><br><p>  Pour l'approvisionnement dynamique, nous utilisons des classes de stockage.  L'administrateur de cluster n'a pas besoin de cr√©er le PV √† l'avance.  Il cr√©e plusieurs profils de stockage, comme des mod√®les.  Lorsqu'un d√©veloppeur fait une demande PVC, au moment de la demande, l'un de ces motifs est cr√©√© et attach√© au foyer. </p><br><p><img src="https://habrastorage.org/webt/id/9q/mj/id9qmjxqf7tqnki0xc_1a710seg.png"></p><br><p>  Donc, dans les termes les plus g√©n√©raux, Kubernetes fonctionne avec un stockage externe.  Il existe de nombreuses autres options. </p><br><h3 id="csi--container-storage-interface">  CSI - Interface de stockage de conteneurs </h3><br><p>  Il y a une telle chose - <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Interface de stockage de conteneurs</a></strong> .  Le CSI a √©t√© cr√©√© par le groupe de travail du coffre-fort de la CNCF, qui a d√©cid√© de d√©finir une interface de stockage de conteneurs standard afin que les pilotes du coffre-fort fonctionnent avec n'importe quel orchestre. </p><br><p>  Les sp√©cifications CSI sont d√©j√† adapt√©es pour Kubernetes, et il existe des <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tonnes de plugins de pilotes</a></strong> pour les d√©ploiements dans le cluster Kubernetes.  Vous devez acc√©der au r√©f√©rentiel via un pilote de volume compatible CSI - utilisez le <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">type de</a></strong> volume <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">csi</a></strong> dans Kubernetes. </p><br><p>  Avec CSI, le stockage peut √™tre consid√©r√© comme une autre charge de travail pour la conteneurisation et le d√©ploiement sur le cluster Kubernetes. </p><br><p>  Pour plus de d√©tails, √©coutez <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Jie Yu parler de CSI dans notre podcast</a></strong> . </p><br><h3 id="opensors-proekty">  Projets open source </h3><br><p>  Les outils et projets pour les technologies cloud se multiplient rapidement, et une bonne partie des projets open source - ce qui est logique - r√©sout l'un des principaux probl√®mes de production: travailler avec le stockage dans l'architecture cloud. </p><br><p>  Les plus populaires d'entre eux sont Ceph et Rook. </p><br><p>  <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ceph</a></strong> est un cluster de stockage distribu√© g√©r√© dynamiquement avec une mise √† l'√©chelle horizontale.  Ceph fournit une abstraction logique pour les ressources de stockage.  Il n'a pas de point de d√©faillance unique, il se g√®re lui-m√™me et fonctionne sur la base d'un logiciel.  Ceph fournit des interfaces pour stocker simultan√©ment des blocs, des objets et des fichiers pour un seul cluster de stockage. </p><br><p>  Ceph a une architecture tr√®s complexe avec RADOS, librados, RADOSGW, RDB, algorithme CRUSH et divers composants (moniteurs, OSD, MDS).  Nous n'entrerons pas dans les d√©tails de l'architecture, il suffit de comprendre que Ceph est un cluster de stockage distribu√© qui simplifie l'√©volutivit√©, √©limine un point de d√©faillance unique sans sacrifier les performances et fournit un stockage unique avec acc√®s aux objets, blocs et fichiers. </p><br><p>  Naturellement, Ceph est adapt√© au cloud.  Vous pouvez d√©ployer un cluster Ceph de diff√©rentes mani√®res, par exemple, en utilisant Ansible ou dans un cluster Kubernetes via CSI et PVC. </p><br><p><img src="https://habrastorage.org/webt/g9/kn/ft/g9knft3jj1y3hw8u2v-4jzoa26k.png"><br>  <em>Architecture de Ceph</em> </p><br><p>  Rook est un autre projet int√©ressant et populaire.  Il combine Kubernetes avec son informatique et Ceph avec ses r√©f√©rentiels en un seul cluster. </p><br><p>  <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rook</a></strong> est un orchestrateur de stockage cloud qui compl√®te Kubernetes.  Ils emballent Ceph dans des conteneurs avec lui et utilisent la logique de gestion de cluster pour un fonctionnement fiable de Ceph dans Kubernetes.  Rook automatise le d√©ploiement, l'amor√ßage, le r√©glage, la mise √† l'√©chelle, le r√©√©quilibrage - en g√©n√©ral, tout ce que l'administrateur du cluster fait. </p><br><p>  Avec Rook, un cluster Ceph peut √™tre d√©ploy√© √† partir de yaml, comme Kubernetes.  Dans ce fichier, l'administrateur d√©crit ce dont il a besoin dans le cluster.  Rook lance un cluster et commence √† surveiller activement.  C'est quelque chose comme un op√©rateur ou un contr√¥leur - cela garantit que toutes les exigences de yaml sont remplies.  Rook fonctionne avec des cycles de synchronisation - il voit l'√©tat et prend des mesures s'il y a des √©carts. </p><br><p>  Il n'a pas son √©tat permanent et n'a pas besoin d'√™tre contr√¥l√©.  C'est dans l'esprit de Kubernetes. </p><br><p><img src="https://habrastorage.org/webt/ep/qx/qk/epqxqk5iecbwcekk88ac8tjxih4.png"></p><br><p>  Rook, combinant Ceph et Kubernetes, est l'une des solutions de stockage cloud les plus populaires: 4000 √©toiles sur Github, 16,3 millions de t√©l√©chargements et plus d'une centaine de contributeurs. <br>  Le projet Rook a d√©j√† √©t√© accept√© √† la CNCF <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">et s'est r√©cemment retrouv√© dans un incubateur</a></strong> . </p><br><p>  <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bassam Tabara</a></strong> vous en dira plus sur Rook <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans notre √©pisode du r√©f√©rentiel Kubernetes</a></strong> . <br>  Si l'application a un probl√®me, vous devez conna√Ætre les exigences et cr√©er un syst√®me ou prendre les outils n√©cessaires.  Cela s'applique √©galement au stockage dans le cloud.  Et bien que le probl√®me ne soit pas simple, les outils et les approches ont √©chou√©.  La technologie cloud continue d'√©voluer et de nouvelles solutions nous attendront s√ªrement. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr441222/">https://habr.com/ru/post/fr441222/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr441212/index.html">Travailler avec la protection des informations cryptographiques et les supports de cl√©s mat√©rielles sous Linux</a></li>
<li><a href="../fr441214/index.html">Guide de l'utilisateur Kibana. Visualisation. Partie 1</a></li>
<li><a href="../fr441216/index.html">Miroir noir ou pub Picooc?</a></li>
<li><a href="../fr441218/index.html">OpenAI Gym + ROS + Gazebo: entra√Ænez un robot autonome √† la maison. Partie 1</a></li>
<li><a href="../fr441220/index.html">Analyse des r√©centes attaques de masse avec capture DNS</a></li>
<li><a href="../fr441224/index.html">Cr√©er un exemple ARCore de visages augment√©s dans Unity</a></li>
<li><a href="../fr441226/index.html">Forbes a publi√© une liste des soci√©t√©s Internet russes les plus ch√®res en 2019</a></li>
<li><a href="../fr441234/index.html">Effets de filtrage SVG. Partie 6. Cr√©er des textures avec feTurbulence</a></li>
<li><a href="../fr441236/index.html">Habraiting 2018: les meilleurs mat√©riaux pour 2018</a></li>
<li><a href="../fr441238/index.html">Programmation de l'anglais</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>