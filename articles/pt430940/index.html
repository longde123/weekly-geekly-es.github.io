<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíü üëåüèº üå¥ SDK para voc√™, SDK para mim, SDK para todos! Como criar um SDK e por que √© necess√°rio üë©üèº‚Äç‚öïÔ∏è üè® ü§¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal! 


 Nossa empresa presta servi√ßos de armazenamento e processamento de dados de dispositivos industriais (bombas, brocas e outros equipame...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SDK para voc√™, SDK para mim, SDK para todos! Como criar um SDK e por que √© necess√°rio</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430940/"><p><img src="https://habrastorage.org/webt/pk/ur/nt/pkurntejpmw1zarvuwn67jvh61k.jpeg"></p><br><p>  Ol√° pessoal! </p><br><p>  Nossa empresa presta servi√ßos de armazenamento e processamento de dados de dispositivos industriais (bombas, brocas e outros equipamentos industriais).  Armazenamos os dados de nossos clientes e fornecemos funcionalidade para suas an√°lises: cria√ß√£o de relat√≥rios, gr√°ficos e muito mais. </p><br><p> E, no decorrer do trabalho, percebemos que a integra√ß√£o de cada novo cliente √© bastante atrasada e o n√∫mero de v√°rios erros aumenta constantemente.  Ent√£o ficou claro que era hora de lidar com isso.  Como uma an√°lise da situa√ß√£o mostrou, o departamento de TI de cada um de nossos clientes desenvolveu sua pr√≥pria solu√ß√£o para coletar dados localmente dos dispositivos e envi√°-los para o nosso servi√ßo.  Isso complica o fato de que, considerando as especificidades do setor, nem sempre h√° acesso √† Internet e √© necess√°rio armazenar dados localmente e envi√°-los o mais r√°pido poss√≠vel.  E h√° um n√∫mero suficientemente grande dessas nuances, o que leva a um aumento no n√∫mero de erros. </p><br><p>  E ent√£o percebemos que a melhor solu√ß√£o nessa situa√ß√£o seria desenvolver um SDK e fornec√™-lo ao cliente.  Imediatamente comecei a procurar as melhores pr√°ticas e considera√ß√µes sobre o desenvolvimento do SDK e fiquei muito surpreso - praticamente n√£o h√° nada sobre isso no RuNet, mas h√° muito pouca informa√ß√£o na Internet Basurmani e ela est√° espalhada.  Bem, a tarefa √© clara, pensada e implementada. </p><br><p>  Mas foi a falta de informa√ß√µes sobre esse t√≥pico que criou o desejo de informar a comunidade sobre os pensamentos, decis√µes tomadas e conclus√µes sobre o desenvolvimento do SDK.  Este artigo discute uma solu√ß√£o para .NET, mas √© um conceito, portanto ser√° interessante para muitos.  Detalhes sob o corte! </p><a name="habracut"></a><br><h2 id="pora-opredelyatsya">  √â hora de ser determinado </h2><br><p>  Vamos come√ßar definindo o que √© o SDK e por que ele pode ser necess√°rio. </p><br><blockquote>  O SDK (do kit de desenvolvimento de software em ingl√™s) √© um conjunto de ferramentas de desenvolvimento que permite que especialistas em software criem aplicativos para um pacote de software espec√≠fico, software de desenvolvimento b√°sico, plataforma de hardware, sistema de computador, consoles de jogos, sistemas operacionais e outras plataformas.  O SDK tira proveito de cada plataforma e reduz o tempo de integra√ß√£o. <br>  ... <br>  Um engenheiro de software geralmente recebe um SDK do desenvolvedor do sistema de destino. </blockquote><p>  Bem, isso √© l√≥gico.  Em palavras simples, o SDK √© um pacote de bibliotecas, para que o cliente possa come√ßar f√°cil e rapidamente a trabalhar com seu sistema (neste artigo, falaremos sobre nosso servi√ßo, mas tudo descrito no artigo se aplica a outros tipos de SDKs) ou executar as mesmas a√ß√µes. </p><br><p>  Mas, como qualquer abordagem, o SDK Path tem vantagens e desvantagens. </p><br><h3 id="preimuschestva">  Os benef√≠cios </h3><br><p>  <strong>Integra√ß√£o de alta velocidade de um novo cliente</strong> - seus clientes precisam escrever menos c√≥digo. </p><br><p>  <strong>Reutiliza√ß√£o de c√≥digo</strong> - o mesmo c√≥digo √© usado em v√°rios locais ao mesmo tempo.  Podemos dizer que √© uma duplica√ß√£o do par√°grafo anterior, mas estamos falando sobre o fato de que a l√≥gica do trabalho est√° em toda parte solit√°ria, o que implica </p><br><p>  <strong>Previsibilidade de comportamento</strong> - o uso das mesmas bibliotecas eleva o comportamento dos sistemas a um determinado padr√£o, o que facilita muito a pesquisa e a elimina√ß√£o de erros e vulnerabilidades. </p><br><p>  <strong>A qualidade do c√≥digo</strong> √© onde muitas pessoas gostam de economizar nos testes (desculpe pelo or√ßamento, prazos e outros motivos).  √â claro que, no mundo real, testar todas as se√ß√µes do projeto com testes √© uma tarefa muito trabalhosa.  Por√©m, testar qualitativamente todos os m√≥dulos do SDK e us√°-los √© uma maneira de aumentar a porcentagem de cobertura do teste, o que levar√° a uma redu√ß√£o no n√∫mero de erros. </p><br><p>  <strong>A documenta√ß√£o</strong> √© o mesmo cen√°rio dos testes.  Documentar todo o projeto √© bastante problem√°tico.  A reutiliza√ß√£o de SDKs aumenta a porcentagem de cobertura da documenta√ß√£o, o que reduz o limite de entrada de novos funcion√°rios no projeto e geralmente ajuda na vida. </p><br><p>  Todas as vantagens, de fato, s√£o as conseq√º√™ncias da coisa mais importante - <strong>escrevemos o c√≥digo de alt√≠ssima qualidade uma vez e depois o reutilizamos</strong> . </p><br><h3 id="nedostatki">  Desvantagens </h3><br><p>  <strong>Os requisitos de alta qualidade do c√≥digo SDK</strong> s√£o o resultado da principal vantagem.  Um erro no SDK ir√° gerar erros em todos os sistemas que o utilizam. </p><br><p>  <strong>Definindo restri√ß√µes</strong> - O SDK √© um conjunto de bibliotecas para implementar scripts <strong>padr√£o</strong> .  √Äs vezes, os desenvolvedores do SDK acreditam que, al√©m de implementar um dos cen√°rios fornecidos, o cliente n√£o precisa de nada, √© mais f√°cil fazer tudo sozinho do que criar um pedestal de muletas para o SDK. </p><br><p>  <strong>Inferno e atualiza√ß√µes de depend√™ncia</strong> - ao expandir a funcionalidade (por exemplo, personalizar uma solu√ß√£o para um cliente espec√≠fico), voc√™ lan√ßar√° uma nova vers√£o da biblioteca.  Por√©m, existem depend√™ncias, conjuntos diferentes de vers√µes de bibliotecas para diferentes clientes e voc√™ precisa monitorar cuidadosamente a compatibilidade com vers√µes anteriores ou o controle de vers√£o estrito. </p><br><h3 id="kogda-sdk-deystvitelno-nuzhen">  Quando o SDK √© realmente necess√°rio </h3><br><p>  <strong>Voc√™ tem v√°rios cen√°rios padr√£o que s√£o implementados novamente de tempos em tempos</strong> - na verdade, nosso caso. </p><br><p>  <strong>Desenvolvimento interno</strong> - em diferentes projetos voc√™ usa sistemas de log, configura√ß√µes de sistema, trabalhando com HttpRequest, bancos de dados, arquivos?  Crie um <strong>SDK interno</strong> - um conjunto de bibliotecas para uso interno.  Voc√™ pode expandir a funcionalidade do SDK a qualquer momento, mas a velocidade do desenvolvimento de novos projetos, a porcentagem de cobertura com testes e documenta√ß√£o aumentar√° e o limite para a entrada de novos desenvolvedores diminuir√°. </p><br><h3 id="kogda-sdk-skoree-vsego-budet-lishnim">  Quando √© prov√°vel que o SDK seja redundante </h3><br><p>  <strong>Os cen√°rios de uso n√£o s√£o definidos ou est√£o em constante mudan√ßa</strong> - deixe a implementa√ß√£o de solu√ß√µes personalizadas para os clientes e ajude-os.  N√£o h√° necessidade de fazer um prod√≠gio de wunderwaffle, que s√≥ ir√° interferir.  Muito relevante para empresas jovens e startups. </p><br><p>  <strong>Voc√™ n√£o sabe como faz√™-lo qualitativamente</strong> - tenho m√°s not√≠cias para voc√™: √© hora de aprender.  Mas dar uma decis√£o errada a um cliente √© muito, muito errado.  Afinal, os clientes devem ser respeitados. </p><br><p>  Ent√£o, decidimos o que √© o SDK, com suas vantagens e desvantagens, e quando precisamos dele.  Se, depois disso, voc√™ percebeu que o SDK √© realmente necess√°rio - convido voc√™ a embarcar no "caminho do SDK" e descobrir o que deveria ser e como diabos faz√™-lo? </p><br><h2 id="a-vy-lyubite-lego---modulnost">  "Voc√™ ama Lego?"  - Modularidade </h2><br><p>  Imagine todos os cen√°rios poss√≠veis para usar o SDK (voc√™ j√° decidiu por que precisa, certo?) E crie um script para a biblioteca.  O que n√£o √© uma op√ß√£o?  Mas essa √© uma abordagem ruim e, portanto, n√£o faremos isso.  E seremos assim: </p><br><ul><li>  divida todos os scripts em etapas </li><li>  identificar etapas comuns </li><li>  crie uma lista de <strong>m√≥dulos</strong> que implementam todas as etapas poss√≠veis (um m√≥dulo √© respons√°vel por implementar algo espec√≠fico, por exemplo, trabalhar com configura√ß√µes) </li></ul><br><p>  Por exemplo, levando em considera√ß√£o as especificidades da tarefa, precisamos que toda a l√≥gica seja definida em configs.  Implementamos o m√≥dulo para trabalhar com configura√ß√µes (ler, escrever, atualizar, validar e processar configura√ß√µes) e o usaremos em todos os outros m√≥dulos. </p><br><p>  E para a implementa√ß√£o de cen√°rios padr√£o, realmente criaremos m√≥dulos - esses m√≥dulos de "controle", cada um dos quais implementa um cen√°rio espec√≠fico, usando outros m√≥dulos do mesmo SDK.  Assim, para a implementa√ß√£o de cen√°rios padr√£o, o cliente precisa apenas conectar o m√≥dulo de controle do script (e ele exibir√° todas as depend√™ncias) e, para a implementa√ß√£o de fora do padr√£o, usamos os m√≥dulos base, tamb√©m reutilizando o c√≥digo. </p><br><p>  Essa √© precisamente a raz√£o pela qual o SDK n√£o deve ser uma biblioteca (embora eu realmente queira, eu entendo. Afinal, quando todo o SDK est√° em uma biblioteca, voc√™ pode esquecer as depend√™ncias e tudo o que est√° conectado a elas), mas ser um conjunto de bibliotecas.  Uma vantagem adicional dessa abordagem ser√° a redu√ß√£o no "peso" do programa do cliente - ele puxar√° um SDK pesado e puxar√° apenas os m√≥dulos necess√°rios. </p><br><p>  Mas voc√™ n√£o deve produzir m√≥dulos de qualquer maneira, porque quanto mais m√≥dulos, mais dor de cabe√ßa por suas depend√™ncias!  I.e.  √â importante dividir corretamente a l√≥gica em m√≥dulos, mantendo um equil√≠brio entre a decis√£o "tudo em um" e "cada m√≥dulo tem seu pr√≥prio m√≥dulo". </p><br><h2 id="a-chto-tak-mozhno-bylo---universalnost">  "E assim foi poss√≠vel ?!"  - versatilidade </h2><br><p>  Forne√ßa ao cliente v√°rias interfaces para trabalhar com sua biblioteca.  Vou dar um exemplo: </p><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadConfiguration</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> filename</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadConfigurationAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> filename</span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br><p>  Se voc√™ fornecer apenas uma vers√£o s√≠ncrona, ao implementar um aplicativo ass√≠ncrono, o cliente ser√° for√ßado a executar inv√≥lucros ass√≠ncronos do seu m√©todo s√≠ncrono.  Se voc√™ fornecer apenas a vers√£o ass√≠ncrona, a situa√ß√£o ser√° semelhante.  D√™ ao cliente ambos e ele agradecer√°. </p><br><p>  Os gen√©ricos ser√£o uma boa vantagem.  Por exemplo, temos uma classe para trabalhar com configura√ß√µes que implementam m√©todos para empacotar uma configura√ß√£o em uma string, carregar uma configura√ß√£o de um arquivo etc.  A configura√ß√£o de um m√≥dulo espec√≠fico ser√° herdada de nossa classe base, mas, para trabalhar com a nova classe, tamb√©m precisamos fornecer m√©todos de desempacotamento. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BaseConfiguration</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BaseConfiguration </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FromString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> source</span></span></span><span class="hljs-function">)</span></span>{...} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BaseConfiguration </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FromString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> source,Type configurationType</span></span></span><span class="hljs-function">)</span></span>{...} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> T FromString&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> source) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T:BaseConfiguration } <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CustomConfiguration</span></span> : <span class="hljs-title"><span class="hljs-title">BaseConfiguration</span></span>{}</code> </pre> <br><p>  Assim, fornecemos ao cliente tr√™s implementa√ß√µes que ele pode usar.  Os gen√©ricos s√£o muito convenientes, mas ao trabalhar com tipos din√¢micos, eles podem ser chamados apenas atrav√©s da reflex√£o, o que n√£o √© rent√°vel.  O princ√≠pio geral da universalidade, espero, √© claro. </p><br><h2 id="roditel-1-roditel-2-deti----imenovanie">  "Pai 1, Pai 2, Filhos []" - Nomea√ß√£o </h2><br><blockquote>  Qual √© a parte mais dif√≠cil em um programador?  Invente nomes para vari√°veis. </blockquote><p>  No entanto ... A nomea√ß√£o adequada de m√≥dulos, classes, propriedades e m√©todos ajudar√° bastante aqueles que trabalhar√£o com seu SDK.  Exemplo que n√£o requer coment√°rios: </p><br><p>  <strong>Exemplo do SDK do Kinect 2.0</strong> </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> skeletons = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Skeleton[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> skeletonFrame = e.OpenSkeletonFrame()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (skeletonFrame != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { skeletons = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Skeleton[skeletonFrame.SkeletonArrayLength]; skeletonFrame.CopySkeletonDataTo(skeletons); } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (skeletons.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> skel = skeletons.FirstOrDefault(x =&gt; x.TrackingState == SkeletonTrackingState.Tracked); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (skel == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rightHand = skel.Joints[JointType.WristRight]; XValueRight.Text = rightHand.Position.X.ToString(CultureInfo.InvariantCulture); YValueRight.Text = rightHand.Position.Y.ToString(CultureInfo.InvariantCulture); ZValueRight.Text = rightHand.Position.Z.ToString(CultureInfo.InvariantCulture);</code> </pre> <br><p>  Tudo est√° claro a partir dos nomes de classes e m√©todos.  E se houver a conclus√£o do c√≥digo no seu IDE, muitas vezes √© poss√≠vel n√£o procurar na documenta√ß√£o se tudo j√° estiver claro. </p><br><h2 id="uveren-esli-by-smert-znala-chto-takoe-byurokratiya-lyudi-by-nikogda-ne-umirali-vechno-stoya-v-ocheredi---dokumentaciya">  "Estou certo de que se a Morte soubesse o que era burocracia, as pessoas nunca morreriam, sempre na fila ..." - Documenta√ß√£o </h2><br><p>  Mas mesmo que todos os m√≥dulos, classes, m√©todos e propriedades sejam nomeados de maneira muito bonita e urgente, voc√™ ainda precisar√° escrever a documenta√ß√£o.  Em primeiro lugar, isso poupar√° bastante os nervos (o n√∫mero de perguntas dos clientes √© reduzido em uma ordem de grandeza. Tudo est√° na documenta√ß√£o) e, em segundo lugar, sempre fica claro por que voc√™ fez isso e n√£o o contr√°rio. </p><br><blockquote>  A documenta√ß√£o no SDK √© geralmente simples e concisa.  Geralmente, √© dividido em duas partes: Tutorial - um curso passo a passo no estilo de ‚ÄúConstrua uma cidade em 10 minutos‚Äù e a se√ß√£o Refer√™ncia - uma refer√™ncia a tudo o que pode ser feito usando este SDK. </blockquote><p>  Escolhemos a maneira mais f√°cil - resumo + artigos.  Adicionamos atributos XML para m√©todos e classes que brilham no intellisense como dicas de ferramentas.  Usando o Docfx, criamos documenta√ß√£o sobre esses atributos e obtemos documenta√ß√£o detalhada e conveniente, complementada por artigos que descrevem casos de uso e exemplos. </p><br><h2 id="-chtoby-chisto-bylo--kak-ya-budu-vilkoy-to-chistit---testirovanie">  "- Para mant√™-lo limpo! - Como vou limp√°-lo com um garfo?"  - Teste </h2><br><p>  O que se pode dizer sobre os testes como parte da discuss√£o do SDK ... Precisa ter!  A melhor solu√ß√£o seria o TDD (apesar de eu ter uma atitude negativa em rela√ß√£o a essa abordagem, neste caso, decidi us√°-la).  Sim, h√° muito tempo.  Sim, chato.  Mas, no futuro, voc√™ n√£o se enforcar√° com as constantes quedas do SDK do lado e com as conseq√º√™ncias dessa queda. </p><br><p>  O principal motivo da situa√ß√£o √© que, ao perder o controle do SDK para o cliente, voc√™ n√£o pode corrigir rapidamente o erro, √© dif√≠cil encontrar esse erro e parecer√° est√∫pido o suficiente em tal situa√ß√£o.  Portanto - teste.  Teste melhor.  E mais uma vez.  E, por precau√ß√£o, teste seus testes.  E testar testes.  Ent√£o, algo que me empolguei, mas espero que a import√¢ncia de testar o SDK seja clara. </p><br><h2 id="zhertva-kotoraya-ne-mogla-protivostoyat-svoemu-proshlomu-byla-pogloschena-im---logi">  ‚ÄúUma v√≠tima que n√£o resistiu ao passado foi consumida por ele‚Äù - Logi </h2><br><p>  Como voc√™ entrega o SDK a uma empresa terceirizada, como resultado da perda de controle sobre a situa√ß√£o, no caso de um erro (no est√°gio de teste, todos voc√™s decidem que "o far√°", certo?), Um processo bastante longo e doloroso est√° aguardando voc√™ procurar esse mesmo erro.  √â aqui que os logs s√£o √∫teis. </p><br><p>  <strong>Registre tudo</strong> , absolutamente tudo, e se ocorrer um erro, solicite logs ao seu cliente.  Dessa forma, voc√™ economizar√° muito tempo e n√£o poder√° esfregar o rosto na frente do cliente. </p><br><h2 id="alarm-achtung-attention---oshibki">  "Alarme! Achtung! Aten√ß√£o!"  - Erros </h2><br><p><img src="https://habrastorage.org/webt/au/2d/b0/au2db0fwmmfbfxrtkw4kqmexht4.gif"><br>  Embora tenha pensado muito sobre erros, cheguei a uma conclus√£o interessante - <strong>nem um √∫nico m√©todo no seu SDK deve apresentar um erro que n√£o esteja descrito na documenta√ß√£o</strong> .  Voc√™ deve admitir que √© muito desagrad√°vel quando voc√™ conecta uma biblioteca de terceiros para trabalhar com o HttpRequest e lan√ßa alguns NullPointerException e StackTrace em voc√™, o que leva voc√™ √†s entranhas da biblioteca.  E voc√™ precisa mergulhar nessas "entranhas", tentando entender a profundidade da toca do coelho e qual √© o problema. </p><br><p>  Portanto, proponho a seguinte solu√ß√£o - declare uma lista fechada de poss√≠veis exce√ß√µes e documente-as.  Mas porque  voc√™ n√£o pode ter certeza de ter fornecido tudo, agrupar o m√©todo em um try-catch e o erro detectado no declarado.  Por exemplo, um ConfigurationException que conter√° um InnerException √© um erro detectado.  Isso permitir√° que um desenvolvedor de terceiros capture todos os erros poss√≠veis, mas se algo acontecer, descubra rapidamente qual √© o problema. </p><br><h2 id="versii-ili-kak-ne-ukusit-sebya-za-hvost">  Vers√µes ou "como n√£o morder o rabo" </h2><br><p>  Para evitar problemas futuros, eu recomendo o uso de vers√£o estrita.  Escolha o sistema de vers√£o que mais lhe agrada e use-o.  Mas se a nova vers√£o da biblioteca n√£o tiver compatibilidade com vers√µes anteriores, isso dever√° ser indicado.  Como resolv√™-lo - voc√™ pensa.  Mas voc√™ definitivamente deveria pensar sobre isso. </p><br><h2 id="parovozik-kotoryy-smog---deploy">  "Um trem que poderia" - implantar </h2><br><p>  A necessidade de relev√¢ncia da documenta√ß√£o e das vers√µes gera o requisito para a corre√ß√£o da implanta√ß√£o.  Em nossa decis√£o, usamos a seguinte solu√ß√£o (muletas, mas elas funcionam). <br>  Quando √© necess√°rio lan√ßar uma nova vers√£o, o desenvolvedor puxa o bat'nik com o n√∫mero da vers√£o e, em seguida, o arquivo em lote: </p><br><ul><li>  vers√£o de compila√ß√£o </li><li>  coloca todas as bibliotecas no arquivo </li><li>  compile a vers√£o mais recente da documenta√ß√£o (docfx) </li><li>  indica a vers√£o do release na documenta√ß√£o e no nome do arquivo </li><li>  coloca tudo de mais fresco no reposit√≥rio git </li><li>  O WebApp no ‚Äã‚ÄãMS Azure obt√©m uma nova confirma√ß√£o de gancho git e publica altera√ß√µes </li></ul><br><p>  Na sa√≠da, temos uma vers√£o atualizada do site com documenta√ß√£o, de onde voc√™ pode baixar o arquivo com a vers√£o mais recente do SDK. <br>  Os planos futuros incluem compactar tudo nos pacotes Nuget e public√°-lo no reposit√≥rio local do Nuget. </p><br><p>  Eu recomendo prestar aten√ß√£o a este ponto, porque voc√™ pode reduzir significativamente a quantidade de dor de cabe√ßa causada pela falta de informa√ß√µes relevantes sobre a nova vers√£o da biblioteca. </p><br><h2 id="-a-tak-mozhesh---fignya-smotri-kak-nado---primery--toolkit">  "-E assim voc√™ pode? - Besteira. Olha como deveria!"  - Exemplos e kit de ferramentas </h2><br><p>  Um ponto importante na documenta√ß√£o s√£o exemplos de uso.  Al√©m disso, muitas vezes √© necess√°rio fornecer n√£o uma biblioteca, mas um aplicativo que implemente os cen√°rios mais padr√£o.  Eu recomendo fazer esses aplicativos com c√≥digo-fonte aberto e bem comentado, o que permitir√° que voc√™ mate dois coelhos com uma cajadada - forne√ßa um aplicativo funcional e um exemplo de uso do SDK. </p><br><h2 id="zaklyuchenie">  Conclus√£o </h2><br><p>  O desenvolvimento do SDK tornou-se uma nova tarefa interessante para mim, que levantou muitos problemas importantes de arquitetura.  Muitas das coisas descritas no artigo s√£o √≥bvias (para mim), mas considero importante anunciar at√© as √≥bvias para obter uma imagem clara e abrangente. </p><br><h2 id="ps">  PS </h2><br><p>  Obrigado pela leitura, terei prazer em seus coment√°rios.  Espero que este artigo seja √∫til para voc√™. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430940/">https://habr.com/ru/post/pt430940/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430930/index.html">Sobre gr√°ficos 3D em palavras simples</a></li>
<li><a href="../pt430932/index.html">Hackers roubaram mais de 21 milh√µes de rublos de um banco russo</a></li>
<li><a href="../pt430934/index.html">Asterisk dialplan extension mask generator</a></li>
<li><a href="../pt430936/index.html">DEFCON 21. A confer√™ncia DNS pode ser perigosa para sua sa√∫de. Parte 2</a></li>
<li><a href="../pt430938/index.html">Como obter os primeiros pedidos em design quando n√£o h√° portf√≥lio e experi√™ncia</a></li>
<li><a href="../pt430942/index.html">Julia. Scripts e argumentos de linha de comando de an√°lise</a></li>
<li><a href="../pt430944/index.html">A NASA decidiu os participantes para sua competi√ß√£o de mini-moon rover</a></li>
<li><a href="../pt430948/index.html">Minist√©rio das Comunica√ß√µes prop√µe refor√ßar o controle sobre dados pessoais</a></li>
<li><a href="../pt430950/index.html">Fazendo a Constru√ß√£o Moderna</a></li>
<li><a href="../pt430952/index.html">Carros el√©tricos e carros h√≠bridos ter√£o que emitir sons adicionais: por que isso √© necess√°rio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>