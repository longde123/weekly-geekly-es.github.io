<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯМЦ ЁЯЪР ЁЯСйЁЯП╝тАНЁЯПн рдХреНрдпрд╛ рднрдВрдбрд╛рд░рдг рдЧрддрд┐ рдЖрджрд┐ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИ? рдлрд┐рдпреЛ рд╕реЗ рдкреВрдЫреЛ тПл ЁЯШ╛ ЁЯН▒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдлрд┐рдпреЛ рдФрд░ etcd рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдЫреЛрдЯреА рдХрд╣рд╛рдиреА 


 Etcd рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХрд╛рдлреА рд╣рдж рддрдХ рдЗрд╕рдХреЗ рднрдВрдбрд╛рд░рдг рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред рд╡рдЧреИрд░рд╣ рдиреЗ рднрдВрдбрд╛рд░рдг рдкреНрд░рджрд░реНрд╢рди рдХреЗ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдХреНрдпрд╛ рднрдВрдбрд╛рд░рдг рдЧрддрд┐ рдЖрджрд┐ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИ? рдлрд┐рдпреЛ рд╕реЗ рдкреВрдЫреЛ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/450892/"><p><img src="https://habrastorage.org/webt/6g/sf/kx/6gsfkx6hm7bcpebreyfrtw3kpps.jpeg"></p><br><h3 id="korotkaya-istoriya-o-fio-i-etcd">  рдлрд┐рдпреЛ рдФрд░ etcd рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдЫреЛрдЯреА рдХрд╣рд╛рдиреА </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Etcd</a> рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХрд╛рдлреА рд╣рдж рддрдХ рдЗрд╕рдХреЗ рднрдВрдбрд╛рд░рдг рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред  рд╡рдЧреИрд░рд╣ рдиреЗ рднрдВрдбрд╛рд░рдг рдкреНрд░рджрд░реНрд╢рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░реЛрдореЗрдерд┐рдпрд╕</a> рдХреЛ рдХреБрдЫ рдореИрдЯреНрд░рд┐рдХреНрд╕ рдирд┐рд░реНрдпрд╛рдд рдХрд┐рдПред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдореАрдЯреНрд░рд┐рдХ wal_fsync_duration_secondsред  <a href="">Etcd рдХреЗ рд▓рд┐рдП рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг рдХрд╣рддрд╛ рд╣реИ</a> : рднрдВрдбрд╛рд░рдг рдХреЗ рд▓рд┐рдП рддреЗрдЬреА рд╕реЗ рдкрд░реНрдпрд╛рдкреНрдд рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕ рдореАрдЯреНрд░рд┐рдХ рдХрд╛ 99 рд╡рд╛рдВ рдкреНрд░рддрд┐рд╢рдд 10 рдПрдордПрд╕ рд╕реЗ рдХрдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдпрджрд┐ рдЖрдк рд▓рд┐рдирдХреНрд╕ рдорд╢реАрдиреЛрдВ рдкрд░ etcd рдХреНрд▓рд╕реНрдЯрд░ рдЪрд▓рд╛рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рддреЗ рд╣реИрдВ рдФрд░ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдХреНрдпрд╛ рдЖрдкрдХрд╛ рд╕реНрдЯреЛрд░реЗрдЬ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, SSDs), рддреЛ рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">fio рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, I / O рд╕рдВрдЪрд╛рд▓рди рдХреЗ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд▓реЛрдХрдкреНрд░рд┐рдп рдЙрдкрдХрд░рдгред  рдирд┐рдореНрди рдЖрджреЗрд╢ рдЪрд▓рд╛рдПрдБ, рдЬрд╣рд╛рдБ рдкрд░реАрдХреНрд╖рдг-рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣рдг рдорд╛рдЙрдВрдЯ рдмрд┐рдВрджреБ рдХреЗ рдиреАрдЪреЗ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╣реИ: </p><br><pre><code class="plaintext hljs">fio --rw=write --ioengine=sync --fdatasync=1 --directory=test-data --size=22m --bs=2300 --name=mytest</code> </pre> <br><p>  рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рджреЗрдЦрдиреЗ рдФрд░ рдпрд╣ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">fdatasync</a> рдЕрд╡рдзрд┐ рдХрд╛ 99 рд╡рд╛рдВ рдкреНрд░рддрд┐рд╢рдд 10 рдПрдордПрд╕ рд╕реЗ рдХрдо рд╣реИред  рдпрджрд┐ рд╣рд╛рдВ, рддреЛ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХрд╛рдлреА рддреЗрдЬ рднрдВрдбрд╛рд░рдг рд╣реИред  рдпрд╣рд╛рдБ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ: </p><br><pre> <code class="plaintext hljs"> sync (usec): min=534, max=15766, avg=1273.08, stdev=1084.70 sync percentiles (usec): | 1.00th=[ 553], 5.00th=[ 578], 10.00th=[ 594], 20.00th=[ 627], | 30.00th=[ 709], 40.00th=[ 750], 50.00th=[ 783], 60.00th=[ 1549], | 70.00th=[ 1729], 80.00th=[ 1991], 90.00th=[ 2180], 95.00th=[ 2278], | 99.00th=[ 2376], 99.50th=[ 9634], 99.90th=[15795], 99.95th=[15795], | 99.99th=[15795]</code> </pre> <a name="habracut"></a><br><p>  <strong>рдиреЛрдЯ</strong> </p><br><ul><li>  рд╣рдордиреЗ рдЕрдкрдиреЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд░рд┐рджреГрд╢реНрдп рдХреЗ рд▓рд┐рдП --size рдФрд░ --bs рд╡рд┐рдХрд▓реНрдк рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рд╣реИрдВред  рдлрд┐рдпреЛ рд╕реЗ рдПрдХ рдЙрдкрдпреЛрдЧреА рдкрд░рд┐рдгрд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЕрдкрдиреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рджрд░реНрдЬ рдХрд░реЗрдВред  рдЙрдиреНрд╣реЗрдВ рдХрд╣рд╛рдБ рд╕реЗ рд▓рд╛рдПрдБ?  рдкрдврд╝реЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд┐ рд╣рдордиреЗ рдХреИрд╕реЗ рдПрдлрдЖрдИрдУ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╕реАрдЦрд╛</a> ред </li><li>  рдкрд░реАрдХреНрд╖рдг рдХреЗ рджреМрд░рд╛рди, рд╕рдВрдкреВрд░реНрдг I / O рд▓реЛрдб рдлрд┐рдпреЛ рд╕реЗ рдЖрддрд╛ рд╣реИред  рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкрд░рд┐рджреГрд╢реНрдп рдореЗрдВ, рдпрд╣ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рдЕрдиреНрдп рд▓реЗрдЦрди рдЕрдиреБрд░реЛрдз рднрдВрдбрд╛рд░ рдкрд░ рдЖрдПрдВрдЧреЗ, рдХреЗрд╡рд▓ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЛ рдЫреЛрдбрд╝рдХрд░, рдЬреЛ рд╡реЙрд▓_рдПрдлрд╝реНрдлрд╝реНрдлрд╝реНрдлрд╝реНрдлрд╝реНрдлрд╝реНрдлрд╝реНрдлрд╝реНрдлрд╝реНрдлрд╝реНрдлрд╝реНрдлрд╝реНрдлрд╝реНрдлрд╝реНрд╕реНрдиреНрдиреНрджреНрд╕реНреН itреН itреНрдЧреНрдЫреНрдЫреНрдареНрдареНрдареНрдареНрдареНрдареНрдареНрдареНрдареНрдареНрдареНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдврдврдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдврдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреНрдвреЗ рдореЗрдВ, рдЗрд╕рдореЗрдВ рдЬреЛ рдХреБрдЫ рднреА рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рд╡рд╣ рд╣реЛрдЧрд╛ред  рдЕрддрд┐рд░рд┐рдХреНрдд рд▓реЛрдб рд╕реЗ wal_fsync_duration_seconds рдХрд╛ рдорд╛рди рдмрдврд╝ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕рд▓рд┐рдП рдпрджрд┐ 99 рдкреНрд░рддрд┐рд╢рдд рдкреНрд░рддрд┐рд╢рдд рд▓рдЧрднрдЧ 10 рдПрдордПрд╕ рддрдХ рдкрд╣реБрдВрдЪ рдЧрдпрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЗ рднрдВрдбрд╛рд░рдг рдореЗрдВ рдкрд░реНрдпрд╛рдкреНрдд рдЧрддрд┐ рдирд╣реАрдВ рд╣реЛрдЧреАред </li><li>  <strong>3.5 рд╕реЗ рдХрдо рдХреЛрдИ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">fio</a> рд╕рдВрд╕реНрдХрд░рдг рд▓реЗрдВ</strong> (рдкрд┐рдЫрд▓реЗ рд╡рд╛рд▓реЗ fdatasync рдЕрд╡рдзрд┐ рдХрд╛ рдкреНрд░рддрд┐рд╢рдд рдкреНрд░рджрд░реНрд╢рд┐рдд рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ)ред </li><li>  рдЗрд╕рдХреЗ рдмрд╛рдж рдХреЗ рд╕рдВрд╕реНрдХрд░рдг fio рд╕реЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХрд╛ рдХреЗрд╡рд▓ рдПрдХ рдЯреБрдХрдбрд╝рд╛ рд╣реИред </li></ul><br><h3 id="dlinnaya-istoriya-o-fio-i-etcd">  рдлрд┐рдпреЛ рдФрд░ рдХреЙрд░реНрдб рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рд▓рдВрдмреА рдХрд╣рд╛рдиреА </h3><br><p>  <strong>рд╡реЙрд░реНрдб рдореЗрдВ рдХреНрдпрд╛ рд╣реИ?</strong> </p><br><p>  рдбреЗрдЯрд╛рдмреЗрд╕ рдЖрдорддреМрд░ рдкрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд░рд╛рдЗрдЯ-рдлреЙрд░рд╡рд░реНрдб рд▓реЙрдЧ рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ;  etcd рдЗрд╕рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдпрд╣рд╛рдВ рд╣рдо рд░рд╛рдЗрдЯ-рдлреЙрд░рд╡рд░реНрдб рд▓реЙрдЧ (рд╡рд╛рд▓) рд▓реЙрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдЪрд░реНрдЪрд╛ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред  рд╣рдореЗрдВ рдХреЗрд╡рд▓ рдпрд╣ рдЬрд╛рдирдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ рдХрд┐ Incd рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рдкреНрд░рддреНрдпреЗрдХ рд╕рджрд╕реНрдп рдЗрд╕реЗ рдирд┐рд░рдВрддрд░ рднрдВрдбрд╛рд░рдг рдореЗрдВ рд░рдЦрддрд╛ рд╣реИред  рд╡реЙрдХ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╡рд╛рд▓ рдХреЛ рдкреНрд░рддреНрдпреЗрдХ рдХреА-рд╡реИрд▓реНрдпреВ рдкреЗрдпрд░ рдСрдкрд░реЗрд╢рди (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛) рд▓рд┐рдЦрддреЗ рд╣реИрдВред  рдпрджрд┐ рд╕реНрдиреИрдкрд╢реЙрдЯ рдореЗрдВ рд╕реЗ рдХреЛрдИ рдПрдХ рд╕рдВрдЧреНрд░рд╣рдг рд╕рджрд╕реНрдп рдХреНрд░реИрд╢ рдФрд░ рдкреБрдирд░рд╛рд░рдВрдн рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рд╡рд╛рд▓ рд╕рд╛рдордЧреНрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдЕрдВрддрд┐рдо рд╕реНрдиреИрдкрд╢реЙрдЯ рд╕реЗ рд▓реЗрдирджреЗрди рдХреЛ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдЬрдм рдХреЛрдИ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреБрдВрдЬреА-рдореВрд▓реНрдп рд╡рд╛рд▓реЗ рдЬреЛрдбрд╝реЗ рдХреЗ рд╕реНрдЯреЛрд░ рдореЗрдВ рдПрдХ рдХреБрдВрдЬреА рдЬреЛрдбрд╝рддрд╛ рд╣реИ рдпрд╛ рдХрд┐рд╕реА рдореМрдЬреВрджрд╛ рдХреБрдВрдЬреА рдХреЗ рдореВрд▓реНрдп рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддрд╛ рд╣реИ, рддреЛ etc рд╡рд╛рд▓ рдореЗрдВ рдЗрд╕ рдСрдкрд░реЗрд╢рди рдХреЛ рд░рд┐рдХреЙрд░реНрдб рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рд▓рдЧрд╛рддрд╛рд░ рднрдВрдбрд╛рд░рдг рдореЗрдВ рдПрдХ рдирд┐рдпрдорд┐рдд рдлрд╝рд╛рдЗрд▓ рд╣реИред  рдЖрдЧреЗ рдмрдврд╝рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, etcd MUST рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдпрдХреАрди рд╣реИ рдХрд┐ рд╡рд╛рд▓ рдХреЛ рд▓рд┐рдЦрдирд╛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╣реБрдЖ рдерд╛ред  рд▓рд┐рдирдХреНрд╕ рдкрд░, рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рдПрдХрд▓ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓реЗрдЦрди</a> рдкреНрд░рдгрд╛рд▓реА рдХреЙрд▓ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рднреМрддрд┐рдХ рднрдВрдбрд╛рд░рдг рдореЗрдВ рд▓рд┐рдЦрдиреЗ рдореЗрдВ рджреЗрд░реА рд╣реЛ рд╕рдХрддреА рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреБрдЫ рд╕рдордп рдХреЗ рд▓рд┐рдП рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рдореЗрдореЛрд░реА рдореЗрдВ рдХреИрд╢ рдореЗрдВ рд╡рд╛рд▓ рд░рд┐рдХреЙрд░реНрдб рд╕реНрдЯреЛрд░ рдХрд░ рд╕рдХрддрд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреЗрдЬ рдХреИрд╢)ред  рдФрд░ рдбреЗрдЯрд╛ рдХреЛ рд▓рдЧрд╛рддрд╛рд░ рд╕реНрдЯреЛрд░реЗрдЬ рдкрд░ рд╕рдЯреАрдХ рд░реВрдк рд╕реЗ рд▓рд┐рдЦреЗ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рдмрд╛рдж fdatasync рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдФрд░ etcd рдмрд╕ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ (рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рд╕реНрдЯреНрд░реЗрд╕ рд╕реЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдВ 8 рд╡рд╛рд▓ рдлрд╛рдЗрд▓ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░ рд╣реИ): </p><br><pre> <code class="plaintext hljs">21:23:09.894875 lseek(8, 0, SEEK_CUR) = 12808 &lt;0.000012&gt; 21:23:09.894911 write(8, ".\0\0\0\0\0\0\202\10\2\20\361\223\255\266\6\32$\10\0\20\10\30\26\"\34\"\r\n\3fo"..., 2296) = 2296 &lt;0.000130&gt; 21:23:09.895041 fdatasync(8) = 0 &lt;0.008314&gt;</code> </pre> <br><p>  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рд▓рдЧрд╛рддрд╛рд░ рднрдВрдбрд╛рд░рдг рдХреЗ рд▓рд┐рдП рд▓реЗрдЦрди рддреБрд░рдВрдд рдирд╣реАрдВ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ fdatasync рдХреЙрд▓ рдзреАрдорд╛ рд╣реИ, рддреЛ etcd рд╕рд┐рд╕реНрдЯрдо рдкреНрд░рджрд░реНрд╢рди рдбреНрд░реЙрдк рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  <a href="">Etcd рдХреЗ рд▓рд┐рдП рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг рдХрд╣рддрд╛ рд╣реИ</a> рдХрд┐ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреЛ рдХрд╛рдлреА рддреЗрдЬ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдЕрдЧрд░ 99 рд╡рд╛рдБ рдкреНрд░рддрд┐рд╢рдд fdatasync рдХреЙрд▓ рдореЗрдВ рдЗрд╕реЗ 10 рд╕реЗ рдХрдо ms рддрдХ рдЪрд▓рдиреЗ рдХреЗ рд▓рд┐рдП WAL рдлрд╝рд╛рдЗрд▓ рдХреЛ рд▓рд┐рдЦрдирд╛ рдкрдбрд╝рддрд╛ рд╣реИред  рднрдВрдбрд╛рд░рдг рдХреЗ рд▓рд┐рдП рдЕрдиреНрдп рдЙрдкрдпреЛрдЧреА рдореАрдЯреНрд░рд┐рдХ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрд╕ рдкреЛрд╕реНрдЯ рдореЗрдВ рд╣рдо рдХреЗрд╡рд▓ рдЗрд╕ рдореАрдЯреНрд░рд┐рдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВред </p><br><h3 id="ocenka-hranilischa-s-pomoschyu-fio">  рдлрд┐рдпреЛ рдХреЗ рд╕рд╛рде рднрдВрдбрд╛рд░рдг рдХрд╛ рдЖрдХрд▓рди рдХрд░реЗрдВ </h3><br><p>  рдпрджрд┐ рдЖрдкрдХреЛ рдпрд╣ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдЖрдкрдХрд╛ рднрдВрдбрд╛рд░ рд╡рдЧреИрд░рд╣ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИ, рддреЛ рдлрд┐рдпреЛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдПрдХ рдмрд╣реБрдд рд╣реА рд▓реЛрдХрдкреНрд░рд┐рдп I / O рд▓реЛрдб рдкрд░реАрдХреНрд╖рдг рдЙрдкрдХрд░рдгред  рдпрд╣ рдпрд╛рдж рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдбрд┐рд╕реНрдХ рд╕рдВрдЪрд╛рд▓рди рдмрд╣реБрдд рдЕрд▓рдЧ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ: рд╕рд┐рдВрдХреНрд░реЛрдирд╕ рдФрд░ рдПрд╕рд┐рдВрдХреНрд░реЛрдирд╕, рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдХреЗ рдХрдИ рд╡рд░реНрдЧ, рдЖрджрд┐ред рдирддреАрдЬрддрди, рдлрд┐рдпреЛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓ рд╣реИред  рдЗрд╕рдХреЗ рдХрдИ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИрдВ, рдФрд░ рдЙрдирдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рд╕рдВрдпреЛрдЬрди рдкреВрд░реА рддрд░рд╣ рд╕реЗ рднрд┐рдиреНрди I / O рд╡рд░реНрдХрд▓реЛрдб рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд░рддреЗ рд╣реИрдВред  рд╡рдЧреИрд░рд╣ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╕рдВрдЦреНрдпрд╛ рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдлрд┐рдпреЛ рд╕реЗ рдкрд░реАрдХреНрд╖рдг рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рд▓реЛрдб рдЙрддрдирд╛ рд╣реА рдХрд░реАрдм рд╣реЛ рдЬрд┐рддрдирд╛ рдХрд┐ рд╡реАрд▓ рд╕реЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд▓реЛрдб рд╣реЛ рд╕рдХреЗ рдЬрдм рд╡рд╛рд▓ рдлрд╛рдЗрд▓реЗрдВ рд▓рд┐рдЦреА рдЬрд╛рдПрдВред </p><br><p>  рдирддреАрдЬрддрди, рдлрд┐рдпреЛ рдХреЛ рдХрдо рд╕реЗ рдХрдо рдлрд╛рдЗрд▓ рдореЗрдВ рдЕрдиреБрдХреНрд░рдорд┐рдХ рд▓рд┐рдЦрдиреЗ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреА рдПрдХ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд▓реЛрдб рдмрдирд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдкреНрд░рддреНрдпреЗрдХ рд░рд┐рдХреЙрд░реНрдб рдореЗрдВ рдПрдХ fdatasync рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдХреЗ рдмрд╛рдж рдПрдХ рд▓реЗрдЦрди рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рд╢рд╛рдорд┐рд▓ рд╣реЛрдЧрд╛ред  рдХреНрд░рдорд┐рдХ рд▓реЗрдЦрди рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП, fio рдХреЛ --rw = рд▓рд┐рдЦрдиреЗ рдХреЗ рд╡рд┐рдХрд▓реНрдк рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдХреЗ рджреМрд░рд╛рди рд▓рд┐рдЦрдиреЗ рдХреЗ рдмрдЬрд╛рдп рд▓рд┐рдЦрдиреЗ рдХреА рдкреНрд░рдгрд╛рд▓реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">fio рдХреЗ рд▓рд┐рдП</a> , рдпрд╣ --ioengine = рд╕рд┐рдВрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИред  рдЕрдВрдд рдореЗрдВ, рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХреЗ рдмрд╛рдж рдХреЙрд▓ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ fdatasync рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ --fdatasync = 1 рдкреИрд░рд╛рдореАрдЯрд░ рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ред  рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдЕрдиреНрдп рджреЛ рд╡рд┐рдХрд▓реНрдк (--рд╕рд╛рдЗрдЬ рдФрд░ --рдмреАрдПрд╕) рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реИрдВред  рдЕрдЧрд▓реЗ рднрд╛рдЧ рдореЗрдВ, рд╣рдо рдЖрдкрдХреЛ рджрд┐рдЦрд╛рдПрдВрдЧреЗ рдХрд┐ рдЙрдиреНрд╣реЗрдВ рдХреИрд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛рдПред </p><br><h3 id="pochemu-imenno-fio-i-kak-my-nauchilis-ego-nastraivat">  рдлрд┐рдпреЛ рдХреНрдпреЛрдВ рдФрд░ рдХреИрд╕реЗ рд╣рдордиреЗ рдЗрд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рд╕реАрдЦрд╛ </h3><br><p>  рдЗрд╕ рдкреЛрд╕реНрдЯ рдореЗрдВ рд╣рдо рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдорд╛рдорд▓реЗ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╣реИрдВред  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕</a> v1.13 рдХреНрд▓рд╕реНрдЯрд░ рдерд╛, рдЬрд┐рд╕реЗ рд╣рдордиреЗ рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдореЙрдирд┐рдЯрд░ рдХрд┐рдпрд╛ рдерд╛ред  etcd v3.2.24 рдХреЛ рдПрдХ SSD рдкрд░ рд╣реЛрд╕реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  Etcd рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдиреЗ fdatasync рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╡рд┐рд▓рдВрдмрддрд╛рдПрдВ рджрд┐рдЦрд╛рдИрдВ, рддрдм рднреА рдЬрдм рдХреНрд▓рд╕реНрдЯрд░ рдХреБрдЫ рднреА рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛ рдерд╛ред  рдореИрдЯреНрд░рд┐рдХреНрд╕ рдЕрдЬреАрдм рдереЗ, рдФрд░ рд╣рдо рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рдереЗ рдХрд┐ рдЙрдирдХрд╛ рдХреНрдпрд╛ рдорддрд▓рдм рд╣реИред  рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рд╢рд╛рдорд┐рд▓ рдереА, рдЖрдкрдХреЛ рдпрд╣ рд╕рдордЭрдирд╛ рдерд╛ рдХрд┐ рд╕рдорд╕реНрдпрд╛ рдХреНрдпрд╛ рдереА: рднреМрддрд┐рдХ SSDs рдореЗрдВ рдпрд╛ рд╡рд░реНрдЪреБрдЕрд▓рд╛рдЗрдЬреЗрд╢рди рдкрд░рдд рдореЗрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдордиреЗ рдЕрдХреНрд╕рд░ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдФрд░ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ рдмрджрд▓рд╛рд╡ рдХрд┐рдП, рдФрд░ рд╣рдореЗрдВ рдЙрдирдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рдореВрд▓реНрдпрд╛рдВрдХрди рдХреЗ рд▓рд┐рдП рдПрдХ рддрд░реАрдХреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереАред  рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ etcd рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдХреЛ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рдмрд╣реБрдд рддрдХрд▓реАрдлрджреЗрд╣ рд╣реИред  рд╣рдо рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╡рд┐рдиреНрдпрд╛рд╕ рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рдлреА рд╕рд░рд▓ рддрд░реАрдХреЗ рдХреА рддрд▓рд╛рд╢ рдХрд░ рд░рд╣реЗ рдереЗред  рд╣рдо рдпрд╣ рдЬрд╛рдВрдЪрдирд╛ рдЪрд╛рд╣рддреЗ рдереЗ рдХрд┐ рдХреНрдпрд╛ рд╣рдордиреЗ рд╡рд░реНрде рд╕реЗ рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕рдордЭрд╛ рд╣реИред </p><br><p>  рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рд▓рд┐рдП рджреЛ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рдерд╛ред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдИ / рдУ рд▓реЛрдб рдХреНрдпрд╛ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдХрд┐ рд╡рд╛рд▓реНрдб рдХреЛ рд▓рд┐рдЦрддреЗ рд╕рдордп рд╡рдЧреИрд░рд╣ рдмрдирд╛рддрд╛ рд╣реИ?  рдХрд┐рд╕ рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?  рдЕрднрд┐рд▓реЗрдЦреЛрдВ рдХрд╛ рдЖрдХрд╛рд░ рдХреНрдпрд╛ рд╣реИ?  рджреВрд╕рд░реЗ, рдЕрдЧрд░ рд╣рдо рдЗрди рд╕рд╡рд╛рд▓реЛрдВ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрддреЗ рд╣реИрдВ, рддреЛ рдореИрдВ рдлрд┐рдпреЛ рдХреЗ рд╕рд╛рде рд╕рдорд╛рди рдХрд╛рд░реНрдпрднрд╛рд░ рдХреЛ рдХреИрд╕реЗ рдкреБрди: рдкреЗрд╢ рдХрд░реВрдВ?  рдпрд╣ рдордд рднреВрд▓реЛ рдХрд┐ рдХрдИ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рд╕рд╛рде рдлрд┐рдпреЛ рдПрдХ рдмрд╣реБрдд рд╣реА рд▓рдЪреАрд▓рд╛ рдЙрдкрдХрд░рдг рд╣реИред  рд╣рдордиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">lsof</a> рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрдЯреНрд░реЗрд╕</a> рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рджреЛрдиреЛрдВ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдПрдХ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рд╣рд▓ рдХрд┐рдпрд╛ред  lsof рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдФрд░ рдЗрд╕рдХреЗ рд╕рдВрдмрдВрдзрд┐рдд рдлрд╛рдЗрд▓реЛрдВ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА рдлрд╝рд╛рдЗрд▓ рд╡рд┐рд╡рд░рдгреЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдФрд░ рд╕реНрдЯреНрд░реЗрд╕ рдХреЗ рд╕рд╛рде, рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рдЪрд▓ рд░рд╣реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╕реНрдЯреНрд░реЗрд╕ рдЕрдзреНрдпрдпрди рдХреА рдЬрд╛ рд░рд╣реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ (рдФрд░ рдЙрд╕рдХреЗ рдмрдЪреНрдЪреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛) рд╕реЗ рд╕рднреА рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЙрддреНрддрд░рд╛рд░реНрджреНрдз рдмрд╣реБрдд рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ etcd рдмрд╕ рдПрдХ рд╕рдорд╛рди рджреГрд╖реНрдЯрд┐рдХреЛрдг рд▓реЗрддрд╛ рд╣реИред </p><br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдордиреЗ рдХреНрд▓рд╕реНрдЯрд░ рдкрд░ рд▓реЛрдб рдирд╣реАрдВ рд╣реЛрдиреЗ рдкрд░ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдЗрдВрдХрдб рд╕рд░реНрд╡рд░ рд╕реАрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреНрд░реЗрд╕ рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ред  рд╣рдордиреЗ рджреЗрдЦрд╛ рдХрд┐ рд▓рдЧрднрдЧ рд╕рднреА рд╡рд╛рд▓ рд░рд┐рдХреЙрд░реНрдб рдПрдХ рд╣реА рдЖрдХрд╛рд░ рдХреЗ рдереЗ: 2200-2400 рдмрд╛рдЗрдЯреНрд╕ред  рдЗрд╕рд▓рд┐рдП, рдкреЛрд╕реНрдЯ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдХрдорд╛рдВрдб рдореЗрдВ, рд╣рдордиреЗ рдкреИрд░рд╛рдореАрдЯрд░ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рд╣реИ --рдмреАрдПрд╕ = 2300 (bs рдХрд╛ рдЕрд░реНрде рдкреНрд░рддреНрдпреЗрдХ рдлрд┐рдпреЛ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХреЗ рд▓рд┐рдП рдмрд╛рдЗрдЯреНрд╕ рдореЗрдВ рдЖрдХрд╛рд░ рд╣реИ)ред  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ etcd рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХрд╛ рдЖрдХрд╛рд░ etcd, рд╡рд┐рддрд░рдг, рдкреИрд░рд╛рдореАрдЯрд░ рдорд╛рди рдЖрджрд┐ рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ, рдФрд░ fdatasync рдХреА рдЕрд╡рдзрд┐ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╕рдорд╛рди рдкрд░рд┐рджреГрд╢реНрдп рд╣реИ, рддреЛ рд╕рдЯреАрдХ рд╕рдВрдЦреНрдпрд╛рдУрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреНрд░реЗрдЪ рдХреЗ рд╕рд╛рде рдЕрдкрдиреЗ рд╡рдХреНрд╖ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВред </p><br><p>  рдлрд┐рд░, рдЖрджрд┐ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдПрдХ рдЕрдЪреНрдЫрд╛ рд╡рд┐рдЪрд╛рд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ рдЗрд╕реЗ рд╕реНрдЯреНрд░реЗрд╕ рдХреЗ рд╕рд╛рде рдФрд░ -ffttT рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд┐рдпрд╛ред  рдЗрд╕рд▓рд┐рдП рд╣рдордиреЗ рдмрдЪреНрдЪреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдФрд░ рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдПрдХ рдЕрд▓рдЧ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд▓рд┐рдЦрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдХреА рд╢реБрд░реБрдЖрдд рдФрд░ рдЕрд╡рдзрд┐ рдкрд░ рд╡рд┐рд╕реНрддреГрдд рд░рд┐рдкреЛрд░реНрдЯ рднреА рдкреНрд░рд╛рдкреНрдд рдХреАред  рд╕реНрдЯреНрд░реЗрд╕ рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рд╣рдорд╛рд░реЗ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдордиреЗ lsof рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рдХрд┐рд╕ рдЙрджреНрджреЗрд╢реНрдп рдХреЗ рд▓рд┐рдП рдХрд┐рд╕ рдлрд╛рдЗрд▓ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЗрд╕рд▓рд┐рдП рд╕реНрдЯреНрд░реЗрд╕ рдХреЗ рд╕рд╛рде рд╣рдореЗрдВ рдКрдкрд░ рджрд┐рдЦрд╛рдП рдЧрдП рдкрд░рд┐рдгрд╛рдо рдорд┐рд▓реЗред  рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝реЗрд╢рди рдЯрд╛рдЗрдо рдХреЗ рдЖрдВрдХрдбрд╝реЛрдВ рдиреЗ рдкреБрд╖реНрдЯрд┐ рдХреА рдХрд┐ рд╡реЗрдВрдб рд╕реЗ рдШрд╛рддрд╛рдВрдХ рд╡рд╛рд▓_рдлрд┐рдХреНрд╕реБ_рдбреНрдпреВрд░реЗрд╢рди_рд╕реЙрдиреНрдбреНрд╕ рд╡рд╛рд▓ рдлрд╛рдЗрд▓ рдбрд┐рд╕реНрдХреНрд░рд┐рдкреНрдЯрд░ рдХреЗ рд╕рд╛рде fdatasync рдХреЙрд▓реНрд╕ рд╕реЗ рдореЗрд▓ рдЦрд╛рддреА рд╣реИред </p><br><p>  рд╣рдордиреЗ рдлрд┐рдУ рдбреЙрдХреНрдпреВрдореЗрдВрдЯреЗрд╢рди рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд┐рдпрд╛ рдФрд░ рдЕрдкрдиреА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рд▓рд┐рдП рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рдЪрдпрди рдХрд┐рдпрд╛ рддрд╛рдХрд┐ рдлрд┐рдпреЛ рдЖрджрд┐ рдХреЗ рд╕рдорд╛рди рд▓реЛрдб рдЙрддреНрдкрдиреНрди рд╣реЛред  рд╣рдордиреЗ рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдФрд░ рдЙрдирдХреА рдЕрд╡рдзрд┐ рдХреА рдЬрд╛рдВрдЪ рд╕реНрдЯреНрд░реАрдб рд╕реЗ Fio рдЪрд▓рд╛рдХрд░ рдХреА рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ etcdред </p><br><p>  рд╣рдордиреЗ рдзреНрдпрд╛рди рд╕реЗ --рд╕рд╛рдЗрдЬ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рдорд╛рди рдХрд╛ рдЪрдпрди рдХрд┐рдпрд╛, рдЬреЛ рдлрд┐рдпреЛ рд╕реЗ рд╕рдВрдкреВрд░реНрдг I / O рд▓реЛрдб рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддрд╛ рд╣реИред  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ рд╕реНрдЯреЛрд░реЗрдЬ рдХреЛ рд▓рд┐рдЦреЗ рдЧрдП рдмрд╛рдЗрдЯреНрд╕ рдХреА рдХреБрд▓ рд╕рдВрдЦреНрдпрд╛ рд╣реИред  рдпрд╣ рд▓рд┐рдЦрдиреЗ рдХреА рд╕рдВрдЦреНрдпрд╛ (рдФрд░ fdatasync) рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдХреА рд╕реАрдзреЗ рдЖрдиреБрдкрд╛рддрд┐рдХ рдирд┐рдХрд▓рд╛ред  рд╡рд┐рд╢рд┐рд╖реНрдЯ bs рдорд╛рди рдХреЗ рд▓рд┐рдП, fdatasync = size / bs рдкрд░ рдХреЙрд▓ рдХреА рд╕рдВрдЦреНрдпрд╛ред  рдЪреВрдВрдХрд┐ рд╣рдо рдкреНрд░рддрд┐рд╢рдд рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рдереЗ, рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдирдореВрдиреЗ рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдП рдереЗ, рдФрд░ рд╣рдордиреЗ рдЧрдгрдирд╛ рдХреА рдХрд┐ 10 ^ 4 рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реЛрдЧрд╛ (рд╣рдореЗрдВ 22 mebibytes рдорд┐рд▓рддреЗ рд╣реИрдВ)ред  рдпрджрд┐ - рдЖрдХрд╛рд░ рдЫреЛрдЯрд╛ рд╣реИ, рддреЛ рдЖрдЙрдЯрд▓реЗрдпрд░ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрдИ fdatasync рдХреЙрд▓ рд╕рд╛рдорд╛рдиреНрдп рд╕реЗ рдЕрдзрд┐рдХ рд╕рдордп рддрдХ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ рдФрд░ 99 рд╡реЗрдВ рдкреНрд░рддрд┐рд╢рдд рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддреЗ рд╣реИрдВ)ред </p><br><h3 id="poprobuyte-sami">  рдЗрд╕реЗ рд╕реНрд╡рдпрдВ рдЖрдЬрдорд╛рдПрдВ </h3><br><p>  рд╣рдордиреЗ рджрд┐рдЦрд╛рдпрд╛ рдХрд┐ рдлрд┐рдпреЛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░реЗрдВ рдФрд░ рдпрд╣ рдкрддрд╛ рдХрд░реЗрдВ рдХрд┐ рдЙрдЪреНрдЪ рдкреНрд░рджрд░реНрд╢рди рд╡рдЧреИрд░рд╣ рдХреЗ рд▓рд┐рдП рднрдВрдбрд╛рд░рдг рдХреА рдкрд░реНрдпрд╛рдкреНрдд рдЧрддрд┐ рд╣реИ рдпрд╛ рдирд╣реАрдВред  рдЕрдм рдЖрдк рдЗрд╕реЗ рдЕрдкрдиреЗ рджрдо рдкрд░ рдЕрднреНрдпрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЖрдИрдмреАрдПрдо рдХреНрд▓рд╛рдЙрдб</a> рдореЗрдВ рдПрд╕рдПрд╕рдбреА рд╕реНрдЯреЛрд░реЗрдЬ рдХреЗ рд╕рд╛рде рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиред </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi450892/">https://habr.com/ru/post/hi450892/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi450878/index.html">рдЕрдЧрд░ рддреБрдо рдХрд░ рд╕рдХрддреЗ рд╣реЛ рдореБрдЭреЗ рдкрдХрдбрд╝реЛ</a></li>
<li><a href="../hi450880/index.html">рдЬрдЯрд┐рд▓ рдЖрдХрд╛рд░ рдХреЗ рдврд╛рд▓реЗ рднрд╛рдЧреЛрдВ рдХреЛ рдорд╛рдкреЗрдВ? рдмрдЪрд╛рд╡ рдХреЗ рд▓рд┐рдП рдореЗрдЯреНрд░рд╛рд╕реНрдХреИрди 3 рдбреА</a></li>
<li><a href="../hi450886/index.html">рдкреГрд╖реНрдарднреВрдорд┐: рд╣рд╛рдЗрдбреНрд░реЛрдЬрди рдХрд╛рд░реЗрдВ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддреА рд╣реИрдВ рдФрд░ рдЬрдм рд╡реЗ рд╕рдбрд╝рдХреЛрдВ рдкрд░ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИрдВ</a></li>
<li><a href="../hi450888/index.html">рд╕реНрд╡рд┐рдлреНрдЯ: рдПрд╡рд░реЛрд╕реНрдЯреЛрдиреЗрд╕ рдХреА рдЫрд▓рдиреА</a></li>
<li><a href="../hi450890/index.html">Google I / O News 2019: Pixel 3a, Android Q, Kotlin рдФрд░ рдмрд╣реБрдд рдХреБрдЫ</a></li>
<li><a href="../hi450894/index.html">рд╕рдмрд╕реЗ рдЫреЛрдЯреЗ рдХреЗ рд▓рд┐рдП рдПрдВрдЯреЗрдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</a></li>
<li><a href="../hi450896/index.html">рд▓реИрдм: lvm рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛, linux рдкрд░ рдЫрд╛рдкрд╛</a></li>
<li><a href="../hi450898/index.html">рдХрдИ рд╕реНрдХреНрд░реАрди рдкрд░ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рд╡рд┐рдХрд╛рд╕ред рдР рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрджрдо</a></li>
<li><a href="../hi450902/index.html">рд╡рдлрд╛рджрд╛рд░ рдХрд░реНрдордЪрд╛рд░реА рдЪрд╛рд╣рддреЗ рд╣реИрдВ - рдЕрдкрдиреЗ рдЖрдк рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ</a></li>
<li><a href="../hi450904/index.html">рд╣рд░рдХреЛрдХреЛ рдХреЛ рдПрдПрд╕рдкреА рдбреЙрдЯ рдХреЛрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рддреИрдирд╛рдд рдХрд░рдиреЗ рдХреА рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХрддрд╛</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>