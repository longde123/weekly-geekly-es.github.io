<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚óÄÔ∏è üïµüèª üïî 50 Schattierungen von Token üë®üèΩ‚Äçü§ù‚Äçüë®üèª ü§≥üèº üë™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Morgen um 12:00 Uhr Moskauer Zeit wird ein neues Penetrationstestlabor Test Lab 12 gestartet, das eine Kopie eines echten Unternehmensnetzwerks mit se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>50 Schattierungen von Token</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pentestit/blog/432940/"><img src="https://habrastorage.org/webt/fb/38/jx/fb38jx-mcoeneaf9dywo819gh2w.png"><br><br>  Morgen um 12:00 Uhr Moskauer Zeit wird ein neues Penetrationstestlabor Test Lab 12 gestartet, das eine Kopie eines echten Unternehmensnetzwerks mit seinen inh√§renten Schwachstellen und Konfigurationsfehlern ist.  Auf der Laborwebsite wurden bereits 25.000 Teilnehmer registriert, darunter f√ºhrende Experten auf dem Gebiet der Informationssicherheit der gr√∂√üten russischen und internationalen Unternehmen. <br><br>  Nachfolgend finden Sie Informationen zur Zusammensetzung des neuen Labors, Beispiele f√ºr die Suche und Ausnutzung von Sicherheitsl√ºcken sowie Schulungsmaterial. <br><a name="habracut"></a><br><blockquote>  Das Hauptaugenmerk in Labors liegt auf Realismus: Die IT-Struktur ist in Analogie zu Unternehmensnetzwerken von Unternehmen konzipiert, um die Aktionen von Angreifern dem echten Hacking n√§her zu bringen.  Teilnehmer, die als Eindringlinge fungieren, versuchen, die Sicherheitsl√ºcken auszunutzen, und erhalten bei Erfolg Zugriff auf einzelne Knoten des Labors, von denen jeder ein Token enth√§lt.  Der Gewinner ist der Teilnehmer, der zuerst alle <b>Token</b> gesammelt hat, <b>dh</b> tats√§chlich die volle Kontrolle √ºber das virtuelle Unternehmensnetzwerk erhalten hat. <br><br>  Unabh√§ngig von der F√§higkeitsstufe kann jeder Penetrationstestf√§higkeiten unter Bedingungen testen, die den tats√§chlichen Bedingungen so nahe wie m√∂glich kommen, ohne gegen das Gesetz zu versto√üen. </blockquote><br>  Das neue Labor wird aus einem verteilten Computernetzwerk bestehen, das in Form mehrerer Perimeter mit unterschiedlicher Penetrationskomplexit√§t dargestellt wird.  Der erste (externe) Umfang ist am einfachsten zu ‚Äûdurchbrechen‚Äú, dann wird der Fortschritt komplizierter.  Im komplexesten Sektor platzieren wir Schwachstellen, deren Ausnutzung bei einer gro√üen Anzahl von Teilnehmern schwierig ist.  Dieser Ansatz erm√∂glicht es uns, zwei Probleme gleichzeitig zu l√∂sen: <br><br><ul><li>  jedem erlauben, seine F√§higkeiten im Labor zu bewerten und dabei seinen Realismus beizubehalten; </li><li>  Beseitigen Sie eine Situation, in der sich die Teilnehmer gegenseitig st√∂ren, wenn sie bestimmte Arten von Sicherheitsl√ºcken ausnutzen oder einen Angriff ausf√ºhren. </li></ul><br><img src="https://habrastorage.org/webt/4j/-e/lt/4j-elt3zy2rgfwyeoe6gdzfseie.png"><br><br>  <s>Dargestellt in dem Film</s> im verwendeten Labor: <br><br><ul><li>  Verschiedene Netzwerkdienste (Mail, DNS, AD und VPN usw.), SIEM und DBMS; </li><li>  WebApp und API (PHP, Python, Django, Java); </li><li>  Selbstgeschriebene Desktop-Anwendungen; </li><li>  Zus√§tzliche Unterst√ºtzungsdienste f√ºr Realismus. </li></ul><br>  Um das Labor zu bestehen, ben√∂tigen Sie: <br><br><ul><li>  Arbeitsf√§higkeiten mit verschiedenen Netzwerkprotokollen; </li><li>  die F√§higkeit, Daten aus dem SIEM-System zu analysieren, Korrelationsfilter zu konfigurieren und vieles mehr; </li><li>  Reverse Engineering-Erfahrung; </li><li>  Erfahrung in der Suche nach Schwachstellen in Netzwerkdiensten und Webanwendungen. </li></ul><br><h4>  Private Lab Penetrationstests </h4><br><blockquote>  Wir haben uns entschlossen, die Erf√ºllung mehrerer Aufgaben des vergangenen privaten Labors zu planen, das diesen Sommer entwickelt wurde, um unerfahrenen Spezialisten zu helfen, schnell Grundkompetenzen zu erlangen. <br><br>  Alle Informationen bez√ºglich der Zusammensetzung des Labors (Systeme, Benutzer usw.) sind fiktiv und dienen nur dazu, ein realistisches Bild zu erstellen. <br><br>  Die im Artikel beschriebenen Penetrationstesttechniken sind p√§dagogischer Natur.  Versto√üe nicht gegen das Gesetz. </blockquote><br>  Die gesamte Struktur der fiktiven Organisation ‚ÄûUNIONSEC‚Äú, bestehend aus 15 Servern, befand sich hinter dem Gateway 192.168.102.10, auf das nach dem Aufbau der VPN-Verbindung zugegriffen werden konnte.  Die Teilnehmer erhielten die Aufgabe, das Unternehmensnetzwerk des Labors zu gef√§hrden.  Das Ergebnis der Operation jeder der Schwachstellen war ein Token, das √ºber das Formular auf der Seite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">lab.pentestit.ru √ºbertragen werden musste</a> . <br><br><img src="https://habrastorage.org/webt/0r/7q/xi/0r7qxi79horuh7ej9nqz5smneke.png"><br><br>  Das Labor wurde von 7 Teams mit zwei Teilnehmern angegriffen, aber niemand konnte das gesamte Netzwerk gef√§hrden.  Trotzdem zeigten einige Teams ein anst√§ndiges Ergebnis. <br><br><img src="https://habrastorage.org/webt/sy/qy/v9/syqyv9zvqhiu3ejefv4hqi6iyka.png"><br><br>  Die Arbeit im Labor erforderte Erfahrung mit verschiedenen Werkzeugen und F√§higkeiten bei der Durchf√ºhrung von Penetrationstests. Dar√ºber hinaus konnten einige Aufgaben ohne Kenntnisse auf dem Gebiet der Entwicklung und des Reverse Engineering nicht erledigt werden.  Angesichts der begrenzten Zeit, die den Teilnehmern f√ºr die Erledigung von Aufgaben zur Verf√ºgung stand, ist es unserer Meinung nach ein w√ºrdiges Ergebnis, fast die H√§lfte der Aufgaben zu erledigen. <br><br><hr><br><h4>  Intelligenz </h4><br>  Mit dem Dienstprogramm nmap erhalten wir eine Liste der offenen Ports: <br><br> <code>nmap 192.168.102.10 -sV</code> <br> <br><img src="https://habrastorage.org/webt/mf/bw/d_/mfbwd_gapske6ktqjii1e2gc6tc.png"><br><br><hr><br><h4>  Unternehmenswebsite </h4><br>  Unter der Adresse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">192.168.102.10</a> im Abschnitt "Kontakt" sehen wir eine Liste der E-Mail-Adressen: <br><img src="https://habrastorage.org/webt/14/j7/wf/14j7wfm3pfdh-u937ksiqzfxcc4.png"><br><br>  Entsprechend dem HTML-Code der Anwendung k√∂nnen wir davon ausgehen, dass sie das WordPress-CMS verwendet und das Plugin wp-symposium-15.1 enth√§lt. <br><br>  √úber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.exploit-db.com stellen wir</a> fest, dass das Plugin f√ºr SQL-Injection anf√§llig ist.  √úber den URI <code>192.168.102.10/wp-content/plugins/wp-symposium-15.1/get_album_item.php?size=</code> "versuchen wir, die Sicherheitsanf√§lligkeit mithilfe des BASH-Skripts auszunutzen: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash for ((i=0; i&lt;= 10; i++)) do wget --no-proxy -q -O- "http://192.168.102.10/wp-content/plugins/wp-symposium-15.1/get_album_item.php?size=SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA limit 1 offset $i; --" echo "" done</span></span></code> </pre><br>  Wir bekommen die Liste der Datenbanken: <br><br> <code>information_schema <br> wp_db</code> <br> <br>  und nach dem Ausnutzen der Sicherheitsanf√§lligkeit - das Token: <br><br> <code>wget -q -O- 192.168.102.10/wp-content/plugins/wp-symposium-15.1/get_album_item.php?size=* from token; --"</code> <br> <br><img src="https://habrastorage.org/webt/qi/h4/pb/qih4pbyl5kf6j-y3s4pblrygujw.png"><br><br><hr><br><h4>  Mail </h4><br>  Wir z√§hlen Passw√∂rter mit hydra auf: <br><br> <code>hydra smtp://192.168.101.10 -s 25 -L /tmp/emails -P /tmp/pass</code> <br> <br><img src="https://habrastorage.org/webt/1m/et/ti/1mettilfi94s4k7jjsbdmdv_nso.png"><br><br>  Mit den empfangenen Daten autorisieren wir die WUI des Mailservers und erhalten das Token: <br><br><img src="https://habrastorage.org/webt/vz/w9/ja/vzw9jav772ho_5_zakgyzedpmly.png"><br><hr><br><h4>  Openvpn </h4><br>  <b>Verbindung</b> <br><br>  Aus dem Web Nord <code>http://192.168.102.10:88</code> laden <code>http://192.168.102.10:88</code> die Datei "openvpn.conf".  Nach dem Scannen des Servers (z. B. mit dem Dienstprogramm DirBuster) finden wir <code>.bash_history</code> : <br><br> <code>-bash: generating new OpenVPN password for user admin: command not found <br> -bash: generating: command not found <br> -bash: date +%F: command not found <br> -bash: echo "admin:`date +%F | md5sum | sed -s 's/ -//'`" &gt; /etc/openvpn/user.pass: command not found <br> cat /etc/openvpn/user.pass <br> service openvpn restart <br> exit</code> <br> <br>  Hier finden Sie den Benutzernamen sowie den Algorithmus zur Kennwortgenerierung.  Verwenden Sie das genaue Erstellungsdatum der Datei, um das zuvor erstellte Kennwort wiederzugeben: <br><br><img src="https://habrastorage.org/webt/x9/cp/z7/x9cpz7dwrs41x2guq_6yn4syli4.png"><br><br>  und f√ºhren Sie die Konvertierung gem√§√ü der Geschichte der Teams durch.  Das resultierende Kennwort wird f√ºr die VPN-Authentifizierung verwendet. <br><br>  <b>Server-Scan</b> <br><br>  Nachdem wir eine Verbindung zum VPN hergestellt haben, scannen wir die Server-Ports: <br><br><img src="https://habrastorage.org/webt/ih/f3/os/ihf3osp2mpm3h7xhnwvs-dypv0q.png"><br><br>  Wir erhalten den Token unter <code>http://10.255.0.1:8080</code> : <br><br><img src="https://habrastorage.org/webt/po/to/yk/potoykgfqytcp-qq9bjzndvs_ay.png"><br><br><hr><br><h4>  TERMINAL </h4><br>  Der VPN-Server sendet uns mehrere Routings an interne Netzwerke. Nach dem Scannen finden wir mehrere Hosts mit einem offenen 22-Port.  Wir versuchen uns unter dem <code>dev</code> Account anzumelden.  Nachdem wir eine Verbindung zu einem der Server hergestellt haben, finden wir das Verzeichnis / home / support und versuchen, ein Kennwort f√ºr das gleichnamige Konto auszuw√§hlen: <br><br> <code>patator ssh_login host=192.168.11.5 user=support password=FILE0 0=usr/share/wordlists/rockyou.txt -x ignore:fgrep='Authentication failed'</code> <br> <br><img src="https://habrastorage.org/webt/vi/ow/p5/viowp5ozuathyig5war1rmiyfgk.png"><br><br>  Nachdem wir das Passwort erhalten haben, erhalten wir das Token im Home-Verzeichnis: <br><br><img src="https://habrastorage.org/webt/2o/fh/fv/2ofhfvjycgf3uzl8-osbun_wnta.png"><br><br><h4>  Reverse Engineering </h4><br>  Auf dem TERMINAL-Server finden wir die <code>admin.bin</code> , deren Aktion endet, wenn das Kennwort angefordert wird.  Auf der R√ºckseite erhalten wir das Passwort <code>fv34cm3cm</code> , das ein Token ist.  Wenn Sie es eingeben, erhalten wir <code>SSH PRIVATE KEY</code> . <br><br>  Aus dem privaten Schl√ºssel authentifizieren wir uns auf dem Server <code>192.168.11.2</code> , auf dem wir die Datei <code>dump.pcap</code> im <code>dump.pcap</code> <code>/opt/</code> .  Wir analysieren den Netzwerkverkehrs-Dump aus der Datei und extrahieren das Token sowie das Kennwort f√ºr die BASIC-Autorisierung auf dem Webserver <code>192.168.11.3</code> : <br><br> <code>tcpdump -r /tmp/dump.pcap -A | grep token</code> <br> <br><img src="https://habrastorage.org/webt/mr/an/zs/mranzsddm4yyomwniy2sg8twq_s.png"><br><br><hr><br><h4>  API </h4><br>  Am <code>192.168.11.3</code> befindet sich die API, auf die vom Administrator-PC aus zugegriffen werden kann.  Mit der Port-√úbersetzung (zum Beispiel √ºber SSH) beginnen wir mit dem Studium. <br><br>  Nachdem wir die in der API entdeckte Sicherheitsanf√§lligkeit ausgenutzt haben, erhalten wir ein Token, das Teil des <code>admin</code> : <br><br><img src="https://habrastorage.org/webt/ef/qz/rk/efqzrkkfdflkxw0qqg37dqzfxcu.png"><br><br>  Eine Webanwendung ist unter <code>http://172.16.0.4</code> verf√ºgbar, die sich in der Entwicklung befindet.  Aus der Datei <code>readme.html</code> wir eine Liste der entwickelten Seiten: <br><br><img src="https://habrastorage.org/webt/_i/hz/r6/_ihzr6hve03n1-00isl6yhsurny.png"><br><br>  Beim √ñffnen von <code>http://172.16.0.4/availability.php</code> eine Fehlermeldung <code>http://172.16.0.4/availability.php</code> .  Wir versuchen, die Aktion mit dem <code>REFERRER http://172.16.0.4/index.html</code> Parameter <code>REFERRER http://172.16.0.4/index.html</code> zu wiederholen. <code>REFERRER http://172.16.0.4/index.html</code> wird das Formular mit der <code>ping</code> Schaltfl√§che verf√ºgbar: <br><br><img src="https://habrastorage.org/webt/pq/tv/mw/pqtvmwh04n3oaucrzn2re7owqho.png"><br><br>  Nachdem wir sichergestellt haben, dass das Eingabefeld nicht gefiltert ist, erhalten wir das Token: <br><br><img src="https://habrastorage.org/webt/97/ct/0p/97ct0psdkhv5kg5nqucixmo9e8s.png"><br>  Wir sind √ºber <code>SSH</code> mit dem Server <code>172.16.0.1</code> .  Nach der Autorisierung werden wir von einem Skript empfangen, das einen PIN-Code (5 Ziffern) anfordert: <br><br><img src="https://habrastorage.org/webt/a7/su/cx/a7sucxpliswwxkr3hoihr9eltqg.png"><br><br>  Mit einem selbst geschriebenen Skript zum Erraten von Passw√∂rtern erhalten wir vollen Zugriff auf die Konsole und finden die Datei mit dem Token im Ordner des Benutzers: <br><br><img src="https://habrastorage.org/webt/0n/lg/sf/0nlgsfv6nxs5rk4abobt0fobits.png"><br><hr><br><h4>  Zur√ºck in die Zukunft </h4><br>  Um uns schnell an das neue 12. Labor zu gew√∂hnen, haben wir eine kurze Liste von Materialien und Werkzeugen erstellt: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kali Linux f√ºr Anf√§nger</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OWASP Testing Guide √úbersetzung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Passage "Test Lab 11"</a> von seinem Gewinner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">alexeystoletny</a> </li><li>  Toolkit: Nmap, SQLmap, Burp Suite, WPScan, Nikto / DirBuster / w3af, Dig, Patator / Hydra, IDA Pro </li></ul><br>  Wir sehen uns in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">‚ÄûTest Lab 12‚Äú</a> und lassen die St√§rksten gewinnen! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de432940/">https://habr.com/ru/post/de432940/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de432928/index.html">Was passiert bei Intel und warum wird Amazon AWS trotz lauter Schlagzeilen nicht vollst√§ndig auf seine Chips √ºbertragen?</a></li>
<li><a href="../de432930/index.html">Exploit Mittwoch Dezember 2018: Um die neuen Zeitabschnitte zu testen, fuhren sie ...</a></li>
<li><a href="../de432932/index.html">√ñkosystem der digitalen Beschaffungswelt (um weniger zu stehlen)</a></li>
<li><a href="../de432934/index.html">Leicht zug√§ngliche Levitation im Ultraschall</a></li>
<li><a href="../de432936/index.html">Webinar Group-IB ‚ÄûIntelligenzgetriebener SOC und ist es m√∂glich, darauf zu verzichten?‚Äú</a></li>
<li><a href="../de432942/index.html">Corutin-Muster und Antimuster in Kotlin</a></li>
<li><a href="../de432944/index.html">Erzwungene PostgreSQL-Abfrageoptimierung</a></li>
<li><a href="../de432946/index.html">Einheit - Fallstricke der 2D-Spieleentwicklung</a></li>
<li><a href="../de432948/index.html">Intelligente Clouds, intelligente Unternehmen: Wie KI die Cloud-Computing-Branche ver√§ndert</a></li>
<li><a href="../de432954/index.html">Und wieder ins All: wie das Einhorn Stellarium besuchte</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>