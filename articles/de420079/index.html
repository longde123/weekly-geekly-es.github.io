<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕟 👨🏽‍🤝‍👨🏻 🧚🏽 Erstellen von interaktivem Gras in Unreal Engine 👵🏻 🚣🏾 🤶🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bis vor kurzem wurde Gras in Spielen normalerweise durch eine Textur auf dem Boden angezeigt, anstatt durch das Rendern einzelner Stängel. Mit zunehme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen von interaktivem Gras in Unreal Engine</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420079/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/d_/sg/dgd_sg8pss1hh54majrmgysw5fi.gif"></div><br>  Bis vor kurzem wurde Gras in Spielen normalerweise durch eine Textur auf dem Boden angezeigt, anstatt durch das Rendern einzelner Stängel.  Mit zunehmender Eisenleistung wurde es jedoch möglich, Gras zu rendern.  Gute Beispiele für dieses Rendering sind in Spielen wie <i>Horizon Zero Dawn</i> und <i>The Legend of Zelda: Der Atem der Wildnis zu sehen</i> .  In diesen Spielen kann der Spieler die Graswiesen durchstreifen, und was noch wichtiger ist, das Gras <i>reagiert</i> auf die Aktionen des Spielers. <br><br>  Glücklicherweise ist die Erstellung eines solchen Systems nicht sehr schwierig.  In der Tat wird der Artikel Ihnen genau das beibringen!  In diesem Tutorial lernen Sie Folgendes: <br><br><ul><li>  Erstellen Sie ein Vektorfeld mit einem Szenenerfassungs- und Partikelsystem </li><li>  Biegen Sie Gras von einem Spieler basierend auf einem Vektorfeld </li></ul><a name="habracut"></a><blockquote>  <em>Hinweis: In</em> diesem Lernprogramm wird davon ausgegangen, dass Sie die Grundlagen der Arbeit mit Unreal Engine bereits kennen.  Wenn Sie Unreal Engine noch nicht kennen, lesen Sie unsere zehnteilige Reihe von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unreal Engine-</a> Tutorials <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">für Anfänger</a> .  Lesen Sie insbesondere das Tutorial zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Partikelsystemen</a> , um zu erfahren, wie Sie Cascade in diesem Tutorial verwenden. </blockquote><blockquote>  <em>Hinweis:</em> Dieses Lernprogramm ist Teil einer Reihe von drei Lernprogrammen zum Arbeiten mit Renderzielen: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1: Zeichnen mit Renderzielen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2: Verformbarer Schnee</a> </li><li>  Teil 3: Interaktives Gras </li></ul></blockquote><h2>  An die Arbeit gehen </h2><br>  Beginnen wir mit dem Herunterladen der Materialien für dieses Tutorial (Sie können sie <a href="">hier</a> herunterladen).  Entpacken Sie sie, gehen Sie zu <em>InteractiveGrassStarter</em> und öffnen Sie <em>InteractiveGrass.uproject</em> .  Sie sehen ein kleines Grasfeld, das das Thema dieses Tutorials sein wird.  Ich habe auch ein Widget erstellt, um das Renderziel der Szenenaufnahme anzuzeigen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8fa/004/60f/8fa00460f2e914dedb752443b566d226.gif"></div><br><br>  Bevor Sie beginnen, sollten Sie das Tutorial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zum Erstellen von Fußabdrücken im Schnee lesen</a> , da ich einige Informationen überspringen werde.  Es ist zu beachten, dass in diesem Tutorial auch Erfassung und Projektion verwendet werden.  Um Zeit zu sparen, habe ich eine Blaupausenerfassung vorbereitet, ähnlich der Blaupause aus dem Tutorial auf den Spuren im Schnee. <br><br>  Schauen wir uns zunächst einen anderen Weg an, um interaktives Gras zu erstellen.  Am häufigsten werden die Koordinaten des Spielers auf das Grasmaterial übertragen und das Gras mit einer Kugelmaske in einem bestimmten Radius vom Spieler gebogen. <br><br>  Obwohl dieser Ansatz recht gut ist, lässt er sich nicht gut skalieren, wenn wir dem Gras mehr Akteure hinzufügen möchten.  Für jeden hinzugefügten Akteur müssen Sie dem Material einen weiteren Koordinatenparameter und eine sphärische Maske hinzufügen.  Eine skalierbarere Methode ist die Verwendung eines <em>Vektorfeldes</em> . <br><br><h2>  Was ist ein Vektorfeld? </h2><br>  Ein Vektorfeld ist nur eine Textur, von der jedes Pixel einer Richtung entspricht.  Wenn Sie früher mit Stream-Maps gearbeitet haben, sind diese ähnlich.  Anstatt UV zu verschieben, verwenden wir den Kontakt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Weltpositionsversatz</a> , um die Scheitelpunkte zu verschieben.  Im Gegensatz zur Lösung mit einer sphärischen Maske reicht es für die Materialien aus, das Vektorfeld nur <i>einmal</i> abzutasten, um die Biegerichtung zu erhalten. <br><br>  Lassen Sie uns herausfinden, wie Sie Anweisungen in einer Textur speichern können.  Schauen Sie sich dieses Raster an: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/553/651/6d2/5536516d26f67d5e2e5928db30b1608a.jpg"></div><br>  Angenommen, der rote Punkt ist das Objekt, das wir verschieben möchten.  Wenn wir es in die untere rechte Ecke verschieben, welcher Vektor bezeichnet dann diese Bewegung?  Wenn Sie geantwortet haben <em>(1, 1)</em> , dann haben Sie Recht!  Wie Sie wahrscheinlich wissen, können Sie Vektoren auch als Blumen darstellen und sie so in der Textur speichern.  Fügen wir diesen Vektor in den unwirklichen Farbwähler ein und sehen, welche Farbe er zurückgibt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b21/5d6/59b/b215d659be2f7f813add96b32fcabae4.jpg"></div><br>  Wie Sie sehen können, kehrt die Richtung <em>(1, 1)</em> gelb zurück.  Das heißt, wenn wir das Gras in Richtung der positiven XY-Achsen biegen wollen, müssen wir diese Texturfarbe verwenden.  Schauen wir uns nun die Farben aller Vektoren an. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fbf/302/8bd/fbf3028bd6456dac8ca27a9c1bf2146d.jpg"></div><br>  Das untere rechte Quadrat sieht ziemlich gut aus, da es auf beiden Achsen Farbverläufe aufweist.  Dies bedeutet, dass wir jeden Vektor in diesem Quadranten als Farbe speichern können, da jeder Vektor eine eindeutige Farbe hat. <br><br>  Bei den anderen drei Quadranten gibt es jedoch ein Problem.  Wir haben nur einen Gradienten entlang einer Achse oder überhaupt keinen Gradienten.  Dies bedeutet, dass mehrere Vektoren dieselbe Farbe haben.  Zum Beispiel können wir nicht zwischen den Vektoren <em>(-1, 1)</em> und <em>(0, 1) unterscheiden</em> . <br><br>  Diese drei Quadranten haben nicht für jeden Vektor eindeutige Farben, da wir Farben nur mit Werten von 0 bis 1 darstellen können. Diese drei Quadranten verwenden jedoch negative Werte außerhalb dieses Bereichs. <br><br>  Die Lösung besteht darin, die Vektoren so zu verteilen, dass sie alle in das Intervall von 0 bis 1 passen. Dies kann durch Multiplizieren des Vektors mit <em>0,5</em> und Addieren von <em>0,5 erfolgen</em> .  Hier ist eine Visualisierung dessen, was wir bekommen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c6/334/31a/1c633431aa88cde88b2f2af01ede9f89.gif"></div><br>  Jetzt hat jeder Vektor eine eindeutige Farbe.  Wenn wir es für Berechnungen verwenden müssen, verteilen wir es einfach wieder auf das Intervall von -1 bis 1. Hier sind einige Farben und die entsprechenden Anweisungen nach der Umverteilung: <br><br><ul><li>  <em>(0, 0):</em> negatives X und Y. </li><li>  <em>(0,5, 0,5):</em> keine Bewegung </li><li>  <em>(0, 1):</em> negatives X und positives Y. </li><li>  <em>(1, 0):</em> positives X und negatives Y. </li></ul><br>  Lassen Sie uns nun lernen, wie Sie in Unreal ein Vektorfeld erstellen. <br><br><h3>  Erstellen eines Vektorfeldes </h3><br>  Im Gegensatz zum Erstellen von Spuren im Schnee werden wir die Erfassung der Form von Objekten nicht durchführen.  Stattdessen malen wir mit Pinseln auf das Renderziel.  Dies sind nur Bilder des ausgewählten Vektorfeldes.  Ich werde sie <em>Richtungsbürsten</em> nennen. <br><br>  Anstatt mit Blunts auf ein Renderziel zu zeichnen, können wir <em>Partikel verwenden</em> .  Die Partikel zeigen einen Richtungspinsel an, der vom Player ausgegeben wird.  Um ein Vektorfeld zu erstellen, müssen wir nur die Szenenerfassung verwenden und nur Partikel erfassen.  Der Vorteil dieser Methode ist, dass das Erstellen von Traces sehr einfach ist.  Darüber hinaus können Sie auf einfache Weise Eigenschaften wie die Speicherdauer von Tracks und deren Größe verwalten.  Darüber hinaus erzeugen Partikel vorübergehend dauerhafte Spuren, da sie vorhanden sind, nachdem sie den Erfassungsbereich verlassen und dorthin zurückgekehrt sind. <br><br>  Im Folgenden finden Sie einige Beispiele für Richtungsbürsten, die wir verwenden können, sowie deren Auswirkungen auf Gras.  Beachten Sie, dass im folgenden Beispiel die Partikel unsichtbar sind. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/06a/7ac/976/06a7ac9766e63da84aec88bca2338b9a.gif"></div><br>  Erstellen Sie zunächst ein Material, das einen Richtungspinsel anzeigt. <br><br><h2>  Material für Anweisungen erstellen </h2><br>  Es gibt zwei Möglichkeiten, einen Richtungspinsel zu erstellen: <br><br><ol><li>  <em>Mathematisch:</em> Richtungen und Form sind im Material festgelegt.  Der Vorteil besteht darin, dass keine Software von Drittanbietern erforderlich ist und sich für einfache Formulare eignet. </li><li>  <em>Normale</em> Kartenkonvertierung <em>:</em> Erstellen Sie eine normale Karte mit den gewünschten Richtungen und Formen.  Um die Karte in ein geeignetes Vektorfeld umzuwandeln, reicht es aus, den blauen Kanal zu entfernen.  Der Vorteil dieser Methode ist, dass Sie sehr einfach komplexe Formen erstellen können.  Unten finden Sie ein Beispiel für einen Pinsel, der sich nur schwer mathematisch erstellen lässt. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddd/e44/0e5/ddde440e52ce5e3bbc6cdece65815265.jpg"></div><br>  Für dieses Tutorial erstellen wir einen Pinsel mathematisch.  Gehen Sie zum Ordner <em>Materialien</em> und öffnen Sie <em>M_Direction</em> .  Beachten Sie, dass für dieses Material das Schattierungsmodell <em>Unlit</em> ausgewählt ist.  Dies ist wichtig, da die Erfassung einer Szene Partikel erfassen kann, ohne sie zu beeinflussen. <br><br>  Um dies nicht zu komplizieren, erstellen wir ein Material, das bewirkt, dass sich das Gras vom Zentrum des Partikels wegbewegt.  Erstellen Sie dazu das folgende Schema: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/826/06f/fc1/82606ffc1df0425a75ef17c334a23470.jpg"></div><br>  Jetzt müssen wir neu verteilen.  Fügen Sie dazu die ausgewählten Knoten hinzu und verbinden Sie alles wie folgt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02b/eb0/98a/02beb098a304fb3b9ff13a3852c664cd.jpg"></div><br>  Geben wir dem Pinsel nun eine runde Form.  Fügen Sie dazu die ausgewählten Knoten hinzu: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b97/4bf/702/b974bf7024f3487a8161e279ad3fb350.jpg"></div><br>  <em>RadialGradientExponential</em> steuert die Größe und Schärfe des Kreisumfangs.  Durch Multiplizieren mit der <em>Partikelfarbe</em> können Sie die Opazität von Partikeln aus dem Partikelsystem steuern.  Ich werde dies im nächsten Abschnitt genauer diskutieren. <br><br>  So sieht der Pinsel aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/529/d6e/349/529d6e34937588676b1a20d03fdac107.jpg"></div><br>  Klicken Sie auf <em>Übernehmen</em> und schließen Sie das Material.  Nachdem wir das Material erstellt haben, ist es Zeit, sich auf ein System von Partikelspuren einzulassen. <br><br><h2>  Erstellen eines Systems von Partikelspuren </h2><br>  Gehen Sie zum Ordner " <em>ParticleSystems</em> " und öffnen Sie <em>PS_GrassTrail</em> .  Um Zeit zu sparen, habe ich bereits alle notwendigen Module erstellt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6aa/008/5ee/6aa0085ee0867456e29f574511b43ec2.jpg"></div><br>  So wirkt sich jedes Modul auf die Grasabdrücke aus: <br><br><ul><li>  <em>Spawn: Die</em> Häufigkeit der Erstellung beeinflusst die Glätte der Tracks.  Wenn die Spuren intermittierend aussehen, sollten Sie die Häufigkeit der Erstellung erhöhen.  In diesem Tutorial behalten wir den Standardwert (20) bei. </li><li>  <em>Lebensdauer:</em> Die Lebensdauer des Pfades, bis das Gras wieder in seinen ursprünglichen Zustand zurückkehrt </li><li>  <em>Anfangsgröße:</em> Trace-Größe </li><li>  <em>Farbe über die Lebensdauer:</em> Da wir im Material Partikelfarbe verwenden, können Sie hier die Deckkraft steuern.  Sie können auch die Alpha-Kurve ändern, um das Verschwinden der Spur zu steuern.  Sie können beispielsweise das lineare Verschwinden, das Ein- und / oder Aussteigen auswählen.  In diesem Tutorial behalten wir die Standardeinstellung bei, d. H. Den linearen Verlust. </li><li>  <em>Sperrachse:</em> Dient zum Richten von Partikeln auf die Szenenaufnahme </li><li>  <em>Anfangsrotation: Wird</em> verwendet, um sicherzustellen, dass die Partikel entlang der richtigen Achsen ausgerichtet sind (mehr dazu weiter unten). </li></ul><br>  Zuerst müssen wir das Material einstellen.  Wählen Sie das <em>erforderliche</em> Modul aus und setzen Sie <em>Material</em> auf <em>M_Direction</em> .  <em>Stellen Sie</em> den <em>Sortiermodus auch</em> auf <em>PSORTMODE Age Newest First</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb0/a43/fa3/bb0a43fa369abea85bc7a9ff6a80b06e.jpg"></div><br>  In diesem Sortiermodus können Sie neue Partikel über alte rendern.  Wenn dies nicht getan wird, wirken sich keine neuen, sondern alte Partikel auf das Gras aus. <br><br>  Als nächstes folgt die Dauer der Ablaufverfolgung.  Wählen Sie das <em>Lifetime-</em> Modul aus und setzen Sie <em>Constant</em> auf <em>5</em> .  Dank dessen verschwindet die Spur innerhalb von fünf Sekunden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/505/d9d/b73/505d9db732f69d4b68b4079bd330553c.jpg"></div><br>  Kommen wir nun zur Größe der Spur.  Wählen Sie das Modul <em>Anfangsgröße</em> und setzen Sie die <em>Konstante</em> auf <em>(150, 150, 0)</em> .  Aus diesem Grund bedeckt jedes Partikel eine Fläche von 150 × 150. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/231/dba/9c5/231dba9c5421f8bdd79aba23f8def0cd.jpg"></div><br>  Jetzt müssen wir dafür sorgen, dass die Szene erfasst wird.  Da die Szene von oben aufgenommen wird, sollten die Partikel in Richtung der positiven Z-Achse schauen. Wählen Sie dazu das Modul <em>Lock Axis</em> und setzen Sie die <em>Lock Axis Flags</em> auf <em>Z.</em> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b74/b2b/69c/b74b2b69c7d38785c7ad78d8ec6f250e.jpg"></div><br>  Schließlich müssen wir die Rotation der Partikel einstellen.  Derzeit sind die Pinselfarben nicht an der Richtung ausgerichtet, die sie darstellen.  Dies geschah, weil das Partikelsystem standardmäßig mit einer Drehung von 90 Grad angewendet wird.  Um dies zu beheben, wählen Sie das Modul <em>Initial Rotation aus</em> und setzen Sie den Wert <em>Constant</em> auf <em>-0,25</em> .  Dadurch werden die Partikel um 90 Grad gegen den Uhrzeigersinn gedreht. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/41d/a09/000/41da09000032c1023438b15a3a74f341.jpg"></div><br>  Und das ist alles, was wir für das Partikelsystem brauchen. Schließen wir es also. <br><br>  Als nächstes müssen wir ein Partikelsystem an das anhängen, was Spuren erzeugen soll.  In unserem Fall müssen wir es dem Charakter des Spielers hinzufügen. <br><br><h3>  Anbringen des Partikelsystems </h3><br>  Gehen Sie zu <em>Characters \ Mannequin</em> und öffnen Sie <em>BP_Mannequin</em> .  Erstellen Sie als Nächstes die <em>Partice System-</em> Komponente und nennen Sie sie <em>GrassParticles</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b72/9e0/811/b729e08111d25a301682968f1d878da0.jpg"></div><br>  Als nächstes müssen wir ein Partikelsystem definieren.  Gehen Sie zum <em>Detailfenster</em> und setzen Sie <em>Partikel \ Vorlage</em> auf <em>PS_GrassTrail</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/491/45d/7d3/49145d7d362eb92443a8cfe93bd8a023.jpg"></div><br>  Es wäre seltsam, wenn der Spieler den Titel im Spiel sehen könnte. Es lohnt sich also, ihn zu verstecken.  Aktivieren Sie dazu <em>Rendering \ Owner No See</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad4/de5/7a8/ad4de57a8d9f0eeee254a58c0de8e8d6.jpg"></div><br>  Da das Partikelsystem an den Spieler (Besitzer) angeschlossen ist, sieht der Spieler es nicht, aber es ist für alles andere sichtbar. <br><br>  Klicken Sie auf <em>Kompilieren</em> und dann auf <em>Wiedergabe</em> .  Beachten Sie, dass Partikel nicht für die Kamera des Players angezeigt werden, sondern auf dem Renderziel angezeigt werden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c9d/4d5/4ac/c9d4d54ac998a6aa80da5887dc199b23.gif"></div><br>  Bisher ist die Szenenaufnahme so eingestellt, dass <i>alles</i> erfasst wird.  Dies passt natürlich nicht zu uns, da nur Partikel das Gras beeinflussen.  Im nächsten Abschnitt erfahren Sie, wie Sie nur Partikel erfassen. <br><br><h2>  Partikelerfassung </h2><br>  Wenn wir jetzt Partikel einfangen, werden wir in Bereichen ohne Partikel unnötige Biegungen durchführen.  Dies liegt daran, dass die Hintergrundfarbe des Renderziels schwarz ist.  Biegung tritt auf, weil Schwarz eine Bewegung in Richtung der negativen XY-Achsen bezeichnet (nach Umverteilung).  Damit die leeren Bereiche keine Bewegung enthalten, müssen wir das Hintergrundziel rendern <em>(0,5, 0,5, 0)</em> .  Der einfachste Weg, dies zu tun, besteht darin, ein riesiges Flugzeug zu erstellen und es am Player zu befestigen. <br><br>  Erstellen Sie zunächst Material für den Hintergrund.  <em>Kehren</em> Sie zum Inhaltsbrowser zurück und öffnen Sie <em>Materials \ M_Background</em> .  Verbinden Sie dann die Konstante <em>(0,5, 0,5, 0)</em> mit <em>Emissive Color</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31b/46f/306/31b46f306ba4f2a0df310d36e54a000b.jpg"></div><br><blockquote>  <em>Hinweis:</em> Wie bei Partikelmaterial muss jedes Material, das wir erfassen, ein <em>unbeleuchtetes Shader-</em> Modell haben. </blockquote><br>  Klicken Sie auf <em>Übernehmen</em> und schließen Sie das Material.  Gehen Sie zurück zu <em>BP_Mannequin</em> und erstellen Sie eine neue <em>Ebenenkomponente</em> .  Nennen Sie es <em>Hintergrund</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bc4/0aa/1ff/bc40aa1ffbb655e576ce999318f4342b.jpg"></div><br>  Legen Sie als Nächstes die folgenden Eigenschaften fest: <br><br><ul><li>  <em>Ort:</em> (0, 0, -5000).  Wir platzieren die Ebene so niedrig, dass sie keine Partikel überlappt. </li><li>  <em>Maßstab:</em> (100, 100, 1).  Wir skalieren also auf eine Größe, die ausreicht, um den gesamten Erfassungsbereich abzudecken. </li><li>  <em>Material:</em> M_Background </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e6d/824/d3b/e6d824d3b427cff5e136a2861eb02bed.jpg"></div><br>  Wie bei Partikeln wäre es seltsam, wenn der Spieler ein riesiges gelbes Flugzeug darunter sehen würde.  Um es auszublenden, aktivieren Sie <em>Rendering \ Owner No See</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cad/164/7df/cad1647dfe62bb1e29733ac8e6d6b712.jpg"></div><br>  Nachdem wir den Hintergrund eingerichtet haben, ist es Zeit, die Partikel einzufangen.  Wir können dies tun, indem wir der <em>Nur-Show-Liste</em> der Szenenaufnahme ein Partikelsystem hinzufügen.  Dies ist eine Liste von Komponenten, die die Szenenaufnahme erfassen. <br><br><h3>  Verwenden der Nur-Show-Liste </h3><br>  Bevor wir zur Nur-Show-Liste hinzufügen können, müssen wir einen Weg finden, um alle Akteure zu finden, die das Gras beeinflussen.  Eine Möglichkeit, sie zu erhalten, ist die Verwendung von <em>Tags</em> .  Tags sind einfache Zeichenfolgen, die Akteuren und Komponenten zugewiesen werden können.  Anschließend können Sie den Knoten <em>Alle Akteure mit Tag</em> abrufen verwenden, um alle Akteure mit dem entsprechenden Tag abzurufen. <br><br>  Da der Schauspieler des Spielers das Gras beeinflussen muss, benötigt er ein Tag.  Klicken Sie zum Hinzufügen eines Tags auf die Schaltfläche <em>Class Defaults</em> .  Erstellen Sie dann ein neues Tag in <em>Actor \ Tags</em> und nennen Sie es <em>GrassAffector</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/759/df5/711/759df57115fd0a2172f9c9c4c5b0505d.jpg"></div><br>  Da nur <i>Komponenten</i> in die Nur-Show-Liste übertragen werden können, müssen wir den <i>Komponenten</i> , die sich auf das Gras auswirken, Tags hinzufügen.  Wählen Sie die <em>GrassParticles-</em> Komponente aus und fügen Sie ein neues Tag im Abschnitt <em>Tags hinzu</em> .  <em>Nennen</em> Sie es auch <em>GrassAffector</em> (dieses Tag muss nicht verwendet werden).  Wiederholen Sie dies für die <em>Hintergrundkomponente</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f4/3f4/05a/8f43f405a8cf96083d5df56e54d21576.jpg"></div><br>  Jetzt müssen wir grasbeeinflussende Komponenten zur Nur-Show-Liste der Szenenerfassung hinzufügen.  Klicken Sie auf <em>Kompilieren</em> und schließen Sie <em>BP_Mannequin</em> .  Öffnen Sie dann <em>Blueprints \ BP_Capture</em> .  Gehen Sie zu <em>Event BeginPlay</em> und fügen Sie die markierten Knoten hinzu.  Stellen Sie außerdem sicher, dass die markierten Stifte angeschlossen sind. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7d9/e82/3cf/7d9e823cffefede4f0273a81b9363ecb.jpg"></div><br>  Diese Schaltung durchläuft alle Akteure mit dem <em>GrassAffector-</em> Tag.  Danach prüft sie, ob der Schauspieler Komponenten mit diesem Tag hat, und fügt sie der Nur-Show-Liste hinzu. <br><br>  Als nächstes müssen wir der Szenenaufnahme mitteilen, dass nur die Nur-Show-Liste verwendet werden soll.  Wählen Sie die <em>SceneCapture-</em> Komponente aus und gehen Sie zum Abschnitt <em>Scene Capture</em> .  <em>Stellen</em> Sie den <em>primitiven</em> <em>Rendermodus</em> auf <em>ShowOnly List ein</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/675/ecd/6eb/675ecd6eb2a1c867734b920bbeaeedd4.jpg"></div><br>  Klicken Sie auf <em>Kompilieren</em> und schließen Sie den Entwurf.  Wenn Sie auf <em>Wiedergabe</em> klicken, sehen Sie, dass das Renderziel jetzt nur Partikel und die Hintergrundebene erfasst. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee0/a1f/3d7/ee0a1f3d7bb9687f81ec2e7d0faaf61b.gif"></div><br>  Im nächsten Abschnitt kommen wir zu dem, was wir erwartet haben.  Es ist Zeit, dem Gras das Biegen beizubringen! <br><br><h2>  Biegen Sie das Gras </h2><br>  Zuerst müssen wir das Renderziel auf das Gras projizieren.  Gehen Sie zum Ordner <em>Materialien</em> und öffnen Sie <em>M_Grass</em> .  Erstellen Sie dann die unten gezeigten Knoten.  Setzen Sie die Textur auf <em>RT_Capture</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ec0/fd7/4e6/ec0fd74e6e18c21da2d9b647c878613c.jpg"></div><br>  Da wir die Farben im Intervall von 0 bis 1 neu verteilt haben, müssen wir vor der Verwendung die Farben im Intervall von -1 bis 1 neu verteilen. Fügen Sie dazu die hervorgehobenen Knoten hinzu: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/25d/dc7/0be/25ddc70be17e726bd3089c21ee5be21e.jpg"></div><br>  Jetzt, da wir die Biegerichtung haben, brauchen wir eine Möglichkeit, das Gras in diese Richtung zu drehen.  Glücklicherweise gibt es dafür einen Knoten namens <em>RotateAboutAxis</em> .  Lass es uns schaffen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a92/4a0/127/a924a0127868686cf2616c8d994e9b5a.jpg"></div><br>  Beginnen wir mit dem Kontakt <em>NormalizedRotationAxis</em> .  Wie der Name schon sagt, ist dies die Achse, um die sich der Scheitelpunkt dreht.  Zur Berechnung benötigen wir nur ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vektorprodukt</a> der Biegerichtung um <em>(0, 0, -1)</em> .  Dazu müssen wir die ausgewählten Knoten hinzufügen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5c3/898/ece/5c3898ecee9d7a4fd9ea75e53072acd1.jpg"></div><br>  Wir müssen auch den <em>Rotationswinkel</em> angeben, <em>dh</em> den Betrag der Rotation des Scheitelpunkts relativ zum Rotationspunkt.  Standardmäßig sollte der Wert zwischen 0 und 1 liegen, wobei 0 0 Grad und 1 360 Grad beträgt.  Um den Drehwinkel zu erhalten, können wir die Länge der Biegerichtung multipliziert mit der maximalen Drehung verwenden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d4/171/800/6d417180067018db8df09f878251f6e8.jpg"></div><br>  Das Multiplizieren mit einer maximalen Drehung von <em>0,2</em> bedeutet, dass der maximale Drehwinkel <em>72</em> Grad beträgt. <br><br>  Die Berechnung von <em>PivotPoint</em> ist etwas schwieriger, da ein einzelnes <em>Grasnetz</em> mehrere Stängel enthält.  Dies bedeutet, dass wir so etwas wie den Knoten <em>Objektposition</em> nicht verwenden können, da er für alle Grashalme einen einzelnen Punkt zurückgibt. <br><br>  Idealerweise sollten Sie einen 3D-Editor eines Drittanbieters verwenden, um Drehpunkte in UV-Kanälen zu speichern.  In diesem Tutorial nähern wir uns jedoch nur dem Drehpunkt.  Dies kann durch Bewegen von oben nach <em>unten</em> bis zu einem bestimmten Versatz erfolgen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f47/6ac/cdf/f476accdf57bca37d5bd7994f53b6b47.jpg"></div><br>  Fügen Sie dazu die ausgewählten Knoten hinzu: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/05a/1bd/208/05a1bd2082b7044a1535aaf38cf33264.jpg"></div><br>  In diesem Tutorial ist Gras ungefähr <em>80</em> Einheiten hoch, daher habe ich diesen Wert für <em>PivotOffset festgelegt</em> . <br><br>  Als nächstes müssen wir zwei Masken ausführen.  Die erste Maske stellt sicher, dass sich die Wurzel des Stiels nicht bewegt.  Die zweite Maske stellt sicher, dass kein Vektorfeld auf Gras außerhalb des Erfassungsbereichs wirkt. <br><br><h3>  Maskierung </h3><br>  In diesem Tutorial habe ich die Farben der Grasoberseiten so eingestellt, dass die unteren Scheitelpunkte schwarz und die oberen Scheitelpunkte weiß sind. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/199/0ff/45b/1990ff45be26b99bf5330a0d2817e102.jpg"></div><br>  Um die Wurzeln zu maskieren, multiplizieren wir einfach das Ergebnis von <em>RotateAboutAxis</em> mit dem <em>Vertex Color-</em> Knoten. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/522/568/0fc/5225680fcb4fd4bedf2f7ec7a49ebb58.jpg"></div><br>  Um Gras außerhalb des Erfassungsbereichs zu maskieren, multiplizieren wir das vorherige Ergebnis mit dem ausgewählten Knoten: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37b/da2/e95/37bda2e954f8e160ab3b0c80d5269acf.jpg"></div><br>  Klicken Sie auf <em>Übernehmen</em> und schließen Sie das Material.  Klicken Sie auf " <em>Spielen"</em> und rennen Sie durch das Gras, um Fußspuren zu hinterlassen! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1dc/058/185/1dc058185c158d1ef243b04f5d041174.gif"></div><br><h2>  Wohin als nächstes? </h2><br>  Das fertige Projekt kann hier heruntergeladen <a href="">werden</a> . <br><br>  Obwohl die im Lernprogramm gezeigte Methode für einfache Objekte wie Gras hervorragend geeignet ist, reicht sie nicht aus, wenn Objekte verwendet werden, die mehr Dynamik erfordern.  Eine Teillösung des Problems besteht darin, die physischen Versionen des Laubes zu verwenden.  Weitere Informationen finden Sie in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem Beitrag</a> über interaktives Laub. <br><br>  Abschließend möchte ich Deathrey von der Unreal Engine-Community für den Tipp dieser Partikelmethode danken! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de420079/">https://habr.com/ru/post/de420079/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de420069/index.html">Richard Hamming: Kapitel 20. Modellierung - III</a></li>
<li><a href="../de420071/index.html">Unterschiedliche Preise für Lager in mehreren Lagern. Verfeinerung 1C-Bitrix</a></li>
<li><a href="../de420073/index.html">Die Kunst des Managements: Ein Rückblick auf die besten Berichte mit Teamlead Conf 2018. Teil 2</a></li>
<li><a href="../de420075/index.html">Diese geniale Karte erklärt, wie alles in der Physik zusammenpasst.</a></li>
<li><a href="../de420077/index.html">Neue Online-Handelsmöglichkeiten</a></li>
<li><a href="../de420081/index.html">Installieren Sie Archlinux mit vollständiger Systemverschlüsselung und LVM auf LUKS</a></li>
<li><a href="../de420083/index.html">Ideale Aktion für Google Assistant - 8 Lektionen des Moskauer Hackathons</a></li>
<li><a href="../de420085/index.html">Erkennen von Objekten und menschlichen Emotionen mit dem Firebase ML Kit</a></li>
<li><a href="../de420087/index.html">Dies ist ein Beitrag mit Berichten und Videos zu MS SQL Server.</a></li>
<li><a href="../de420089/index.html">Robomobile: Zug und bayerische Würste</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>