<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👵🏻 📌 ⚽️ 玩z-index 👋 👂🏻 🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="网页上的元素主要并排放置或位于彼此下方。 但是有时设计需要重叠的元素。 例如，下拉菜单，悬停预览面板，无用的Cookie标语，当然还有无数弹出式窗口需要您立即注意。 

 在这些情况下，浏览器必须以某种方式决定“从上方”显示哪些元素，以及完全或部分关闭的背景中保留哪些元素。 CSS标准中的一组相对复...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>玩z-index</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459374/"><img src="https://habrastorage.org/webt/gw/hr/gr/gwhrgrkb83dfpny3pil--unlo3s.gif" align="left"> 网页上的元素主要并排放置或位于彼此下方。 但是有时设计需要重叠的元素。 例如，下拉菜单，悬停预览面板，无用的Cookie标语，当然还有无数弹出式窗口需要您立即注意。 <br><br> 在这些情况下，浏览器必须以某种方式决定“从上方”显示哪些元素，以及完全或部分关闭的背景中保留哪些元素。  CSS标准中的一组相对复杂的规则定义了每个页面元素的默认<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">混合顺序</a> （可能世界上的所有内容都可以称为“相对复杂”，但是立即担心该标准附带一个名为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">“混合上下文的详细描述”</a>的特殊应用程序）。 <br><br> 如果默认顺序不合适，则开发人员将使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>z-index</code></a>属性：它可以控制虚拟z轴（深度），该轴在概念上通过页面。 因此， <code>z-index</code>较高的元素将向用户“更近”显示，即，将其绘制在索引较低的元素上方。 <br><a name="habracut"></a><br>  <code>z</code>轴的一个有趣特性是它没有自然边界。 水平和垂直轴通常受显示器预期尺寸的限制。 我们不希望任何项目被推到“左侧1,000,000px”或“顶部-3000em”：它们将变得不可见或引起不愉快的滚动。  （除非您是在显示器具有数百万个像素的宽度时阅读本文，否则，我敦促您停止阅读并启动一个价值数万亿美元的网页项目）。 <br><br> 但是<code>z-index</code>值是无量纲的，并且仅在相对方面起作用：如果<code>z</code>索引为<code>1</code>和<code>2</code>或<code>−10</code>和<code>999</code>则包含两个元素的页面将看起来相同。 结合页面通常是由隔离设计的组件组装而成的事实，这导致了选择适当的z索引的奇怪技巧。 <br><br> 如果您不知道弹出框的多少，谁编写的以及想放在顶部的多少，如何确保您烦人的弹出窗口恰好出现在页面上所有元素的顶部？ 那是当您将z-index设置为100或999，或以防万一时，将其设置为99999以确保您的z-index一定会赢。 <br><br> 至少这就是我编写CSS的方式。 在本文的其余部分，我们将研究数百万个z索引，并查看其他Web开发人员正在做什么。 <br><br><h1> 资料检索 </h1><br> 第一步是从现有网页中收集大量z-index值。 为此，我转向了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Common Crawl</a> ，这是一个公共的，非常大的，很棒的Internet页面存储库。 数据托管在S3上，因此您可以从AWS集群高效地请求数据。 幸运的是，Internet上有几本教程演示了如何执行此操作。 <br><br> 我先进的z-index提取器涉及在每个页面上搜索以下正则表达式的所有匹配项： <br><br><pre> <code class="plaintext hljs">re.compile(b'z-index *: *(-?[0-9]+|auto|inherit|initial|unset)')</code> </pre> <br> 确定值后，将保留标准的map-reduce任务以保留出现次数。 幸运的是，我不是第一个想要计算样本中各种事物的发生率的人，这足以适应<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">许多示例之一</a> 。  （我的几乎所有个人代码都在顶部是一个正则表达式）。 <br><br> 感谢一篇<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">非常详尽的博客文章，</a>我能够在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Elastic Map Reduce</a>集群上部署代码，并且我开始扫描<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2019年3月</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">页面存档</a> 。 这个特定的档案分为56,000个部分，我随机选择了2,500个，约占4.4％。 这个数字没什么特别的，除了它可以大致转化为我准备在此实验中投资的价格。 经过一个可怕的夜晚，希望我不能正确地进行预测，我得到了1.127亿页的结果。  （我必须指出，这些都是HTML页面。我并没有过多地研究这个问题，但是Common Crawl似乎没有索引外部样式表，因此，我仅从内嵌CSS中提取值。我将其作为练习供读者确定结果分布是否与您从外部样式表中获得的匹配）。 <br><br><h1> 最常见的价值观 </h1><br> 我的扫描产生了总计约1.765亿的z索引值，其中36.2千是唯一的。 <br><br> 那么最常见的是什么？ <br><br> 该图显示了前50名。 注意， <i>y</i>轴是对数的，并且显示相对频率。 例如，最常见的值1是样本中发现的所有事件的14.6％。 通常，前50名大约是所有收集值的80％。 <br><br><img src="https://habrastorage.org/webt/ql/zx/is/qlzxisrudeqtkxjdpm7opfq5fxe.png"><br><br> 第一个观察结果是正值占主导地位。 前50名中唯一的负数是<code>−1</code> （第二常见的<code>−2</code>在第70位）。 也许这告诉我们，人们通常对把东西放在楼上比将它们隐藏在后台更感兴趣。 <br><br> 通常，大多数最高值具有以下属性之一： <br><br><ul><li> 它们很小：例如，从0到12的所有数字均位于前50位。 <br></li><li> 这些是十或多个数字的度：10、100、1000、2000，... <br></li><li> 它们接近“十”的幂：1001、999、10001，... </li></ul><br> 这些模式与人们选择较大的“熟悉”值（十度），然后也许要调整组件内部的相对深度这一事实相吻合-值略高或略低。 <br><br> 查看不适合这些模式的最常见值也很有趣： <br><br> 在第36位，我们看到2147483647。许多程序员立即将这个数字识别为<code>INT_MAX</code> ，即2 <sup>31</sup> -1。 人们可能会这样争论：由于这是一个（有符号）整数的最大值，因此z-index不会更高，因此索引为INT_MAX的元素将始终位于顶部。 但是，MDN对CSS中的整数说<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">以下几点</a> ： <br><br><blockquote> 没有类型为<code>&lt;integer&gt;</code>正式值范围。  Opera 12.1支持的值最大为2 <sup>15</sup> -1，IE最多为2 <sup>20</sup> -1，其他浏览器甚至更高。 在存在CSS3值的整个过程中，已经就建立最小支持范围进行了多次讨论：最后决定是在2012年4月的LC阶段做出的，然后采用了该范围[-2 <sup>27</sup> -1;  2 <sup>27</sup> -1]，但建议使用其他值，例如2 <sup>24</sup> -1和2 <sup>30</sup> -1。 但是，当前最新规范不再指示该数据类型的范围。 </blockquote><br> 因此，不仅没有商定的最大值，而且在每个记录的规范或标准条款中， <code>INT_MAX</code>实际上都超出范围。 <br><br> 在第39位，我们有8675309，在我个人看来，没有什么特别的。 但是显然，对于超过一百万的开发人员而言，这是有道理的。 我怀疑您是立即意识到这个数字，还是根本不了解它的含义，具体取决于您成长的时间和地点。 我不会说破坏者，答案只是隐藏在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">一个搜索</a>后面。 <br><br> 最后两个数字似乎不太合适，分别是1030和1050，分别位于第42和第45位。 另一个快速的外观显示，这些<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">是</a> Bootstrap中<code>navbar-fixed</code>和<code>modal</code>类<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的默认z-index值</a> 。 <br><br><h1> 价值分布 </h1><br> 尽管所有<code>z-index</code>值中的绝大多数都来自少数选项，但查看编译集的更广泛分布可能会很有趣。 例如，图2显示了-120至260之间所有值的频率。 <br><br><img src="https://habrastorage.org/webt/hs/_k/dc/hs_kdcbfrpc9pv7a4mhgdq0hfm8.png"><br><br> 除了四舍五入的数字占主导地位，我们还在几个层次上看到了几乎分形的图案质量。 例如，两个局部最大值之间的中间点本身通常是一个（较小的）局部最大值：在1和10之间是5，在10和20之间是15，在1和100之间是50，依此类推。 <br><br> 我们可以在更广的范围内确认这种影响：下图显示了从-1200到2600的所有值的频率，并且将较小的模数舍入为十，即，将356和359之类的数字计为350。该图与上一个非常相似。 如您所见，当考虑值大一个数量级时，主要保留该结构。 <br><br><img src="https://habrastorage.org/webt/ab/-k/y0/ab-ky0_xjy1l_onxvw7fonxnaas.png"><br><br> 最后，在最后一个图中，从1到9999999999的所有正<code>z-index</code>值都按第一位数字（水平轴）和位数（垂直轴）分组。 <br><br><img src="https://habrastorage.org/webt/tp/yk/q3/tpykq3iqyoitqj-iauuovwwysry.png"><br>  <i><font color="gray">正<code>z-index</code>值按第一位数和位数分组。</font></i>  <i><font color="gray">尺寸与组的整体频率成比例。</font></i>  <i><font color="gray"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">单击组</a>以获取更多信息。</font></i> <br><br> 我们可以直观地将每个组显示为值的模板，例如，以3开头的所有四位数字的值为<code>3xxx</code> 。每个组显示为一个矩形，其大小与模式的频率成比例。 该图显示，例如，对于每个数量级，即多个组，频率遵循相似的趋势，并且从1开始的值是最常见的，然后是9，然后是5。 <br><br> 每个组的色调都是基于其熵来确定的。 黄色组的熵最高，而蓝色组的熵最低。 这有助于突出显示开发人员倾向于选择相同值或分布值更均匀的模式（请注意，整个数据集的熵为6.51位）。 <br><br><h1> 结论 </h1><br> 尽管收集和研究此数据集绝对很有趣，但我确信有更好的统计信息，可视化效果和解释等待生产和展示。 如果您想尝试，请随时下载和分发<a href="">z-index-data.csv文件</a> 。 <br><br> 也许您会在我失败的地方成功，并找到一种方法在图中包含我找到的最高<code>z-index</code>值，即10 <sup>1242</sup> -1。 <br><br> 是的，数字9重复了1242次。 我真的希望他们最终能够在顶部显示他们的&lt;div&gt;。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN459374/">https://habr.com/ru/post/zh-CN459374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN459354/index.html">数据研究人员和统计学家有什么区别？</a></li>
<li><a href="../zh-CN459360/index.html">“经验结果仅供发布，作品的真正动机是美学。” 迈克尔·斯科特的精彩采访</a></li>
<li><a href="../zh-CN459364/index.html">如何预测应用程序中的用户行为</a></li>
<li><a href="../zh-CN459368/index.html">智能CPaaS：行业新闻以及AI / ML给了她什么</a></li>
<li><a href="../zh-CN459370/index.html">停止使用RSA</a></li>
<li><a href="../zh-CN459378/index.html">编写用于React组件的API，第2部分：为行为命名，而非交互</a></li>
<li><a href="../zh-CN459380/index.html">为React组件编写API，第3部分：道具的顺序很重要</a></li>
<li><a href="../zh-CN459384/index.html">关于雅罗斯拉夫纳哭泣的另一个问题</a></li>
<li><a href="../zh-CN459388/index.html">星球大战：旧共和国骑士</a></li>
<li><a href="../zh-CN459392/index.html">重新考虑微软开发部门的面试流程</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>