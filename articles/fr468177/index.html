<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè¨ üóÇÔ∏è üë©üèø‚Äçüè≠ Git dedans et dehors üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø üöÑ ü§öüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La capacit√© de travailler √† l'int√©rieur d'un syst√®me de contr√¥le de version est une comp√©tence dont chaque programmeur a besoin. Souvent, il peut semb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Git dedans et dehors</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/468177/">  La capacit√© de travailler √† l'int√©rieur d'un syst√®me de contr√¥le de version est une comp√©tence dont chaque programmeur a besoin.  Souvent, il peut sembler que creuser dans Git et comprendre ses composants internes est une perte de temps suppl√©mentaire et les t√¢ches de base peuvent √™tre r√©solues gr√¢ce √† un ensemble de commandes de base. <br><br>  L'√©quipe AppsCast, bien s√ªr, voulait en savoir plus, et pour des conseils sur l'application pratique de toutes les fonctionnalit√©s de Git, les gars se sont tourn√©s vers <b>Yegor Andreyevich</b> de Square. <br><br><img src="https://habrastorage.org/webt/wx/nd/kg/wxndkg7_giwgsbmreljpv-0h5l4.jpeg"><br><a name="habracut"></a><br>  <b>Daniil Popov</b> : Bonjour √† tous.  Aujourd'hui, Yegor Andreyevich de Square s'est joint √† nous. <br><br>  <b>Egor Andreyevich</b> : Bonjour √† tous.  Je vis au Canada et je travaille pour Square, une entreprise de logiciels et de mat√©riel informatique pour l'industrie financi√®re.  Nous avons commenc√© avec des terminaux pour accepter les paiements par carte de cr√©dit, maintenant nous offrons des services aux propri√©taires d'entreprise.  Je travaille sur un produit Cash App.  Il s'agit d'une banque mobile qui vous permet d'√©changer de l'argent avec des amis, de commander une carte de d√©bit pour le paiement en magasin.  L'entreprise poss√®de de nombreux bureaux dans le monde et le bureau canadien compte environ 60 programmeurs. <br><br>  <b>Daniil Popov</b> : Dans l'environnement des d√©veloppeurs Android, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Square est</a> connu pour ses projets open source qui sont devenus les standards de l'industrie: OkHttp, Picasso, Retrofit.  Il est logique qu'en d√©veloppant de tels outils ouverts √† tous, vous travaillez beaucoup avec Git.  Nous aimerions en parler. <br><br><h2>  Qu'est-ce que Git </h2><br>  <b>Egor Andreevich</b> : J'utilise Git depuis longtemps comme outil, et √† un moment donn√©, il est devenu int√©ressant pour moi d'en savoir plus. <br><br><blockquote>  Git est un syst√®me de fichiers simplifi√©, au-dessus duquel se trouve un ensemble d'op√©rations pour travailler avec le contr√¥le de version. <br></blockquote><br>  Git vous permet d'enregistrer des fichiers dans un format sp√©cifique.  Chaque fois que vous √©crivez un fichier, Git renvoie la cl√© de votre objet - <b>hachage</b> . <br><br>  <b>Daniil Popov</b> : Beaucoup de gens ont remarqu√© que le r√©f√©rentiel a un r√©pertoire cach√© magique <b>.git</b> .  Pourquoi est-il n√©cessaire?  Puis-je le supprimer ou le renommer? <br><br>  <b>Egor Andreevich</b> : La cr√©ation d'un r√©f√©rentiel est possible via la commande <b>git init</b> .  Il cr√©e le r√©pertoire <b>.git</b> que Git utilise pour contr√¥ler les fichiers.  <b>.Git</b> stocke tout ce que vous faites dans votre projet, uniquement dans un format compress√©.  Par cons√©quent, vous pouvez restaurer le r√©f√©rentiel √† partir de ce r√©pertoire. <br><br>  <b>Alexei Kudryavtsev</b> : Il s'av√®re que votre dossier de projet est l'une des versions du dossier Git d√©velopp√©? <br><br>  <b>Egor Andreevich</b> : Selon la branche sur laquelle vous vous trouvez, git restaure un projet avec lequel vous pouvez travailler. <br><br>  <b>Alexei Kudryavtsev</b> : Que contient le dossier? <br><br>  <b>Egor Andreevich</b> : Git cr√©e des dossiers et fichiers sp√©cifiques.  Le dossier le plus important est .git / objects, o√π tous les objets sont stock√©s.  L'objet le plus simple est un blob, essentiellement le m√™me qu'un fichier, mais dans un format que git comprend.  Lorsque vous souhaitez enregistrer un fichier texte dans le r√©f√©rentiel, Git le compresse, l'archive, ajoute des donn√©es et cr√©e un blob. <br><br>  Il existe des r√©pertoires - ce sont des dossiers avec des sous-dossiers, c'est-√†-dire  Git a un type d'objet <b>arbre</b> qui contient des r√©f√©rences √† blob, √† d'autres arbres. <br><br><blockquote>  Fondamentalement, une arborescence est un instantan√© qui d√©crit l'√©tat de votre r√©pertoire √† un certain point. </blockquote><br>  Lors de la cr√©ation d'un commit, un lien vers le r√©pertoire de travail est √† arborescence fixe. <br><br>  Un commit est un lien vers une arborescence avec des informations sur qui l'a cr√©√©: email, nom, heure de cr√©ation, lien vers le parent (branche parent) et message.  Git compresse et √©crit √©galement les validations dans le r√©pertoire des objets. <br><br>  Pour voir comment tout cela fonctionne, vous devez r√©pertorier les sous-r√©pertoires √† partir de la ligne de commande. <br><br><h2>  Avantages de travailler avec Git </h2><br>  <b>Daniil Popov</b> : Comment fonctionne Git?  Pourquoi l'algorithme d'action est-il si compliqu√©? <br><br>  <b>Egor Andreevich</b> : Si vous comparez Git avec Subversion (SVN), alors dans le premier syst√®me il y a un certain nombre de fonctions que vous devez comprendre.  Je vais commencer par la <b>zone de transfert</b> , qui ne doit pas √™tre consid√©r√©e comme une limitation de Git, mais plut√¥t des fonctionnalit√©s. <br><br>  Il est bien connu que lorsque vous travaillez avec du code, tout ne se passe pas tout de suite: quelque part, vous devez changer la mise en page, quelque part pour corriger les bugs.  Par cons√©quent, apr√®s une session de travail, un certain nombre de fichiers affect√©s apparaissent qui ne sont pas interconnect√©s.  Si vous effectuez toutes les modifications en une seule validation, cela ne sera pas pratique, car les modifications sont de nature diff√©rente.  Ensuite, une s√©rie de validations arrive √† la sortie, qui peut √™tre cr√©√©e simplement gr√¢ce √† la zone de transfert.  Par exemple, toutes les modifications apport√©es au fichier de disposition sont envoy√©es √† une s√©rie, par exemple, fixent les tests unitaires √† une autre.  Nous prenons plusieurs fichiers, les d√©pla√ßons vers la zone de transit et cr√©ons un commit uniquement avec leur participation.  Les autres fichiers du r√©pertoire de travail n'y entrent pas.  Ainsi, vous d√©composez tout le travail effectu√© dans le r√©pertoire de travail en plusieurs validations, chacune repr√©sentant un travail sp√©cifique. <br><br>  <b>Alexei Kudryavtsev</b> : En quoi Git est-il diff√©rent des autres syst√®mes de contr√¥le de version? <br><br>  <b>Egor Andreevich</b> : Personnellement, j'ai commenc√© avec SVN, puis je suis imm√©diatement pass√© √† Git.  Surtout, Git est un syst√®me de contr√¥le de version d√©centralis√©.  Toutes les copies du r√©f√©rentiel Git sont exactement les m√™mes.  Chaque entreprise a un serveur o√π se trouve la version principale, mais il n'est pas diff√©rent de celui que le d√©veloppeur a sur l'ordinateur. <br><br>  SVN poss√®de un r√©f√©rentiel central et des copies locales.  Cela signifie que tout d√©veloppeur peut interrompre seul le r√©f√©rentiel central. <br><br>  √Ä Git, cela ne se produira pas.  Si le serveur central perd les donn√©es du r√©f√©rentiel, elles peuvent √™tre restaur√©es √† partir de n'importe quelle copie locale.  Git est con√ßu diff√©remment et offre les avantages de la vitesse. <br><br>  <b>Daniil Popov</b> : Git est c√©l√®bre pour sa ramification, qui fonctionne sensiblement plus vite que SVN.  Comment le fait-il? <br><br>  <b>Egor Andreevich</b> : Dans SVN, une branche est une copie compl√®te de la branche pr√©c√©dente.  Il n'y a pas de repr√©sentation physique de branche dans Git.  Il s'agit d'un lien vers le dernier commit d'une ligne de d√©veloppement particuli√®re.  Lorsque Git enregistre des objets, lors de la cr√©ation d'un commit, il cr√©e un fichier avec des informations sp√©cifiques sur le commit.  Git cr√©e un fichier symbolique - un lien symbolique avec un lien vers un autre fichier.  Lorsque vous avez plusieurs branches, vous faites r√©f√©rence √† diff√©rentes validations dans le r√©f√©rentiel.  Pour suivre l'historique d'une branche, vous devez passer de chaque commit en utilisant le lien vers le commit parent. <br><br><h2>  Branches de Merjim </h2><br>  <b>Daniil Popov</b> : Il y a deux fa√ßons de fusionner deux branches en une - c'est fusionner et rebaser.  Comment les utilisez-vous? <br><br>  <b>Egor Andreevich</b> : Chaque m√©thode a ses avantages et ses inconv√©nients.  <b>La fusion</b> est l'option la plus simple.  Par exemple, il existe deux branches: ma√Ætre et l'entit√© s√©lectionn√©e dans celui-ci. <br><br>  Pour la fusion, vous pouvez utiliser l'avance rapide.  Cela est possible si, √† partir du moment o√π le travail a commenc√© dans la branche de fonction, aucune nouvelle validation n'a √©t√© effectu√©e dans master.  Autrement dit, la premi√®re fonctionnalit√© de validation dans est la derni√®re validation dans le ma√Ætre. <br><br>  Dans ce cas, le pointeur est fix√© sur la branche principale et passe au commit le plus r√©cent dans la branche de fonction.  Ainsi, la ramification est √©limin√©e en connectant la branche de fonctionnalit√© au thread principal principal et en supprimant la branche inutile.  Il se r√©v√®le une histoire lin√©aire o√π tous les commits se succ√®dent.  Dans la pratique, cette option se produit rarement, car en permanence quelqu'un fusionne les commits en master. <br><br>  Il peut en √™tre autrement.  Git cr√©e un nouveau commit - merge commit, qui a deux liens vers les commit parents: un en master, l'autre en feature.  Avec le nouveau commit, deux branches sont connect√©es et la fonctionnalit√© peut √™tre supprim√©e √† nouveau. <br><br>  Apr√®s le commit de fusion, vous pouvez regarder l'histoire et voir qu'elle est bifurqu√©e.  Si vous utilisez un outil qui rend graphiquement des validations, il ressemblera visuellement √† un arbre de No√´l.  Cela ne casse pas Git, mais il est difficile pour un d√©veloppeur de regarder une telle histoire. <br><br>  Un autre outil est le <b>rebasage</b> .  Conceptuellement, vous prenez toutes les modifications de la branche de fonction et les retournez sur la branche principale.  La premi√®re validation de fonctionnalit√© devient la nouvelle validation en plus de la derni√®re validation principale. <br><br>  Il y a un hic - Git ne peut pas changer les commits.  Il y avait une validation dans la fonctionnalit√© et nous ne pouvons pas simplement envelopper le master, car chaque validation a un horodatage. <br><br>  Dans le cas d'un rebase, Git lit toutes les validations dans la fonctionnalit√©, l'enregistre temporairement, puis le recr√©e dans le m√™me ordre dans master.  Apr√®s le rebase, les validations initiales disparaissent et de nouvelles validations avec le m√™me contenu apparaissent en haut de master.  Il y a des probl√®mes.  Lorsque vous essayez de rebaser une branche avec laquelle d'autres personnes travaillent, vous pouvez casser le r√©f√©rentiel.  Par exemple, si quelqu'un a d√©marr√© sa branche √† partir d'une validation qui figurait dans la fonctionnalit√© et que vous avez d√©truit et recr√©√© cette validation.  Rebase est plus adapt√© aux succursales locales. <br><br>  <b>Daniil Popov</b> : Si vous introduisez des restrictions selon lesquelles strictement une personne travaille sur une branche de fonctionnalit√©, convenez que vous ne pouvez pas jumeler une branche de fonctionnalit√© d'une autre, alors ce probl√®me ne se pose pas.  Mais quelle approche pratiquez-vous? <br><br>  <b>Egor Andreevich</b> : Nous n'utilisons pas de branches de fonction au sens direct de ce terme.  Chaque fois que nous apportons un changement, cr√©ons une nouvelle branche, y travaillons et la versons imm√©diatement dans master.  Il n'y a pas de branches qui jouent depuis longtemps. <br><br>  Cela r√©sout un grand nombre de probl√®mes de fusion et de rebase, en particulier les conflits.  Les succursales existent pendant une heure et il y a une forte probabilit√© d'utiliser l'avance rapide, car personne n'a ajout√© quoi que ce soit √† ma√Ætriser.  Lorsque nous fusionnons dans la demande de tirage, fusionnons uniquement avec la cr√©ation d'un commit de fusion <br><br>  <b>Daniil Popov</b> : Comment n'avez-vous pas peur de fusionner une fonction principale inactive, car la d√©composition d'une t√¢che en intervalles horaires est souvent irr√©aliste? <br><br>  <b>Egor Andreevich</b> : Nous utilisons l'approche des <b>indicateurs de fonctionnalit√©</b> .  Ce sont des indicateurs dynamiques, une caract√©ristique sp√©cifique avec diff√©rents √©tats.  Par exemple, la fonction d'envoi de paiements entre eux est activ√©e ou d√©sactiv√©e.  Nous avons un service qui fournit dynamiquement cet √©tat aux clients.  Vous, du serveur, obtenez ou non la fonction de valeur.  Vous pouvez utiliser cette valeur dans le code - d√©sactivez le bouton qui va √† l'√©cran.  Le code lui-m√™me est dans l'application, et il peut √™tre publi√©, mais il n'y a pas acc√®s √† cette fonctionnalit√©, car il est derri√®re l'indicateur de fonctionnalit√©. <br><br>  <b>Daniil Popov</b> : Souvent, les nouveaux arrivants √† Git sont inform√©s qu'apr√®s le rebase, vous devez pousser avec force.  D'o√π vient-il? <br><br>  <b>Egor Andreevich</b> : Lorsque vous poussez simplement, un autre r√©f√©rentiel peut g√©n√©rer une erreur: vous essayez d'ex√©cuter une branche, mais vous avez des commits compl√®tement diff√©rents sur cette branche.  Git v√©rifie toutes les informations afin de ne pas casser accidentellement le r√©f√©rentiel.  Lorsque vous dites <b>git push force</b> , d√©sactivez cette v√©rification, croyant que vous savez mieux que lui, et exigez de r√©√©crire la branche. <br><br>  Pourquoi est-ce n√©cessaire apr√®s le rebase?  Rebase recr√©e les commits.  Il s'av√®re que la branche est √©galement appel√©e, mais s'y engage avec d'autres hachages, et Git vous jure.  Dans cette situation, il est tout √† fait normal de faire une pouss√©e de force, puisque vous contr√¥lez la situation. <br><br>  <b>Daniil Popov</b> : Il y a toujours le concept de <b>rebase interactif</b> , et beaucoup en ont peur. <br><br>  <b>Egor Andreevich</b> : Il n'y a rien de terrible.  Du fait que Git recr√©e l'histoire pendant le rebase, il la stocke temporairement avant de la lancer.  Lorsqu'il dispose d'un stockage temporaire, il peut tout faire avec les validations. <br><br>  Rebase en mode interactif suppose que Git avant rebase jette une fen√™tre d'un √©diteur de texte dans laquelle vous pouvez sp√©cifier ce qui doit √™tre fait avec chaque commit individuel.  Il ressemble √† plusieurs lignes de texte, o√π chaque ligne est l'un des commits qui se trouvent dans la branche.  Avant chaque validation, il y a une indication de l'op√©ration qui m√©rite d'√™tre effectu√©e.  L'op√©ration par d√©faut la plus simple est <b>pick</b> , c'est-√†-dire  √† prendre et √† inclure dans le rebasage.  Le plus courant est le <b>squash</b> , puis Git prendra les modifications de ce commit et les fusionnera avec les changements du pr√©c√©dent. <br><br>  Il existe souvent un tel sc√©nario.  Vous avez travaill√© localement dans votre branche et cr√©√© des commits pour la sauvegarde.  Le r√©sultat est une longue histoire de commits, ce qui est int√©ressant pour vous, mais de la m√™me mani√®re il ne faut pas le verser dans l'histoire principale.  Ensuite, vous donnez squash √† renommer le commit g√©n√©ral. <br><br>  La liste des √©quipes est longue.  Vous pouvez lancer le commit - <b>drop</b> et il dispara√Æt, vous pouvez changer le message de commit, etc. <br><br>  <b>Alexei Kudryavtsev</b> : Lorsque vous avez des conflits dans le rebase interactif, vous traversez tous les cercles de l'enfer. <br><br>  <b>Egor Andreevich</b> : Je suis tr√®s loin de comprendre toute la sagesse du rebase interactif, mais c'est un outil puissant et complexe. <br><br><h2>  Application Git pratique </h2><br>  <b>Daniil Popov</b> : Passons √† la pratique.  Lors de l'entretien, je demande souvent: ¬´Vous avez mille commits.  Sur le premier tout va bien, sur le milli√®me test a √©clat√©.  Comment trouver le changement qui a conduit √† cela √† l'aide d'une gita? ¬ª <br><br>  <b>Egor Andreevich</b> : Dans cette situation, vous devez utiliser la <b>bissecte</b> , bien qu'il soit plus facile de bl√¢mer. <br><br>  Commen√ßons par l'int√©ressant.  Git bisect est applicable √† une situation o√π vous avez une r√©gression - c'√©tait fonctionnel, cela a fonctionn√©, mais il s'est soudainement arr√™t√©.  Pour savoir quand la fonctionnalit√© est cass√©e, vous pouvez th√©oriquement revenir al√©atoirement √† la version pr√©c√©dente de l'application, regardez le code, mais il existe un outil qui vous permettra d'approcher de mani√®re structur√©e le probl√®me. <br><br>  Git bisect est un outil interactif.  Il existe une commande git bisect bad par laquelle vous signalez la pr√©sence d'un commit rompu et git bisect good - pour un commit qui fonctionne.  Chaque fois que l'application est publi√©e, nous nous souvenons du hachage du commit √† partir duquel la lib√©ration a √©t√© effectu√©e.  Ce hachage peut √©galement √™tre utilis√© pour indiquer de bons et de mauvais commits.  Bisect re√ßoit des informations sur l'intervalle pendant lequel l'un des validations a interrompu la fonctionnalit√© et d√©marre la session de <b>recherche binaire</b> , o√π il √©met progressivement des validations pour v√©rifier si elles fonctionnent ou non. <br><br>  Vous avez d√©marr√© la session, Git passe √† l'une des validations de l'intervalle, signale cela.  Dans le cas de mille commits, il n'y aura pas beaucoup d'it√©rations. <br><br>  La v√©rification devra √™tre effectu√©e manuellement: via des tests unitaires ou ex√©cutez l'application et cliquez manuellement.  Git bisect est facilement scriptable.  Chaque fois qu'il √©met un commit, vous lui donnez un script pour v√©rifier que le code fonctionne. <br><br>  Blame est un outil plus simple qui, d'apr√®s son nom, vous permet de trouver le ¬´coupable¬ª d'une d√©faillance fonctionnelle.  En raison de cette d√©finition n√©gative, de nombreux membres de la communaut√© du bl√¢me ne l'aiment pas. <br><br>  Que fait-il?  Si vous bl√¢mez git pour un fichier sp√©cifique, alors il montrera lin√©airement dans ce fichier quel commit a chang√© telle ou telle ligne.  Je n'ai jamais utilis√© git blame depuis la ligne de commande.  En r√®gle g√©n√©rale, cela se fait dans IDEA ou Android Studio - cliquez et voyez qui a chang√© quelle ligne du fichier et dans quel commit. <br><br>  <b>Daniil Popov</b> : Au fait, dans Android Studio, cela s'appelait Annotate.  La connotation n√©gative de bl√¢me a √©t√© supprim√©e. <br><br>  <b>Alexei Kudryavtsev</b> : Exactement, dans xCode, ils l'ont renomm√© Auteurs. <br><br>  <b>Egor Andreevich</b> : J'ai √©galement lu qu'il y a une louange utilitaire git - pour trouver celui qui a √©crit cet excellent code. <br><br>  <b>Daniil Popov</b> : Il convient de noter que sur le bl√¢me des suggestions des examinateurs sur le travail de demande de traction.  Il regarde qui a touch√© le plus un fichier particulier et sugg√®re que cette personne pourra bien r√©viser votre code. <br>  Dans le cas de l'exemple d'un millier de commits, le bl√¢me dans 99% des cas montrera ce qui a mal tourn√©.  Bisect est d√©j√† le dernier recours. <br><br>  <b>Egor Andreevich</b> : Oui, je recourt tr√®s rarement √† la bissecte, mais j'utilise r√©guli√®rement l'annotation.  Bien qu'il soit parfois impossible de comprendre pourquoi il est v√©rifi√© par la ligne de code, il est clair tout au long de la validation ce que l'auteur voulait faire. <br><br><h2>  Comment travailler avec des RP empil√©s? </h2><br>  <b>Daniil Popov</b> : J'ai entendu dire que Square utilise les demandes d'extraction empil√©es (PR). <br><br>  <b>Egor Andreevich</b> : Au moins dans notre √©quipe Android, nous les utilisons souvent. <br>  Nous consacrons beaucoup de temps √† rendre chaque demande de tirage facile √† examiner.  Parfois, il y a une tentation de nourrir, de nourrir rapidement et de faire comprendre aux examinateurs.  Nous essayons de cr√©er de petites demandes de tirage et une courte description - le code devrait parler de lui-m√™me.  Lorsque les demandes de tirage sont petites, il est facile et rapide de brailler. <br><br>  C'est l√† que le probl√®me se pose.  Vous travaillez sur une fonctionnalit√© qui n√©cessitera un grand nombre de modifications dans la base de code.  Que pouvez-vous faire?  Vous pouvez le mettre en une seule requ√™te, mais ce sera √©norme.  Vous pouvez travailler en cr√©ant progressivement une demande de tirage, mais le probl√®me sera que vous avez cr√©√© une branche, ajout√© quelques modifications et soumis une demande de tirage, retourn√© au ma√Ætre et le code que vous aviez dans la demande de tirage n'est pas disponible dans le ma√Ætre jusqu'√† la fusion n'aura pas lieu.  Si vous d√©pendez des modifications de ces fichiers, il est difficile de continuer √† travailler car il n'existe pas de code de ce type. <br><br>  Comment contourner cela?  Apr√®s avoir cr√©√© la premi√®re demande d'extraction, nous continuons √† travailler, √† cr√©er une nouvelle branche √† partir de la branche existante, que nous avons utilis√©e avant la demande d'extraction.  Chaque branche ne provient pas du ma√Ætre, mais de la branche pr√©c√©dente.  Lorsque nous avons termin√© de travailler sur cette fonctionnalit√©, nous soumettons une autre demande d'extraction et indiquons √† nouveau qu'avec la fusion, elle ne fusionne pas dans le ma√Ætre, mais dans la branche pr√©c√©dente.  Il s'av√®re qu'une telle cha√Æne de demandes de tirage - des prs empil√©s.  Lorsqu'une personne r√©vise, elle voit les modifications qui ont √©t√© apport√©es uniquement par cette fonctionnalit√©, mais pas la pr√©c√©dente. <br><br>  La t√¢che consiste √† rendre chaque demande d'extraction aussi petite et claire que possible afin qu'il n'y ait pas besoin de la modifier.  Parce que si vous devez changer le code dans les branches qui sont au milieu de la pile, tout ce qui se trouve en haut se cassera, car vous devez faire un rebase.  Si les demandes de tirage sont petites, nous essayons de les geler d√®s que possible, puis toutes les fusionnements empil√©s √©tape par √©tape dans le ma√Ætre. <br><br>  <b>Daniil Popov</b> : Je comprends bien qu'√† la fin, il y aura une derni√®re demande d'extraction contenant toutes les petites demandes d'extraction.  Vous versez ce fil sans regarder? <br><br>  <b>Egor Andreevich</b> : La fusion vient de la source empil√©e: premi√®rement, la toute premi√®re demande de pull est fusionn√©e dans master, dans la suivante, la base passe de la branche √† master et, en cons√©quence, Git calcule qu'il y a d√©j√† quelques changements dans master, moins de snapshot. <br><br>  <b>Alexei Kudryavtsev</b> : Avez-vous une condition de course lorsque la premi√®re branche s'est d√©j√† arr√™t√©e, et seulement apr√®s que la seconde s'est arr√™t√©e dans la premi√®re parce qu'elle n'a pas √©t√© chang√©e de cible en ma√Ætre? <br><br>  <b>Egor Andreevich</b> : Nous le tenons √† la main, il n'y a donc pas de telles situations.  J'ouvre une demande de tirage, note les coll√®gues dont je veux obtenir un avis, et lorsqu'ils sont pr√™ts, allez sur bitbucket, appuyez sur fusion. <br><br>  <b>Alexei Kudryavtsev</b> : Mais qu'en est-il des contr√¥les sur CI que rien n'est cass√©? <br><br>  <b>Egor Andreevich</b> : Nous ne faisons pas cela.  CI s'ex√©cute sur la branche, qui est la base de la demande d'extraction, et apr√®s v√©rification, nous changeons la base.  Techniquement, cela ne change pas, puisque vous ciblez √©galement le nombre de changements. <br><br>  <b>Daniil Popov</b> : <b>Poussez</b> -vous directement au master ou d√©veloppez-vous?  Et lorsque vous rel√¢chez, indiquez explicitement le commit √† partir duquel collecter? <br><br>  <b>Egor Andreevich</b> : Nous n'avons pas de d√©veloppement, seulement ma√Ætre.  Nous sortirons certainement toutes les deux semaines.  Lorsque nous commen√ßons √† pr√©parer une version, nous ouvrons une branche de version et quelques derniers correctifs vont √† la fois au master et √† cette branche.  Nous utilisons des balises - des liens permanents vers un commit sp√©cifique, √©ventuellement avec quelques informations.  Si une sorte de commit est une release release, alors ce serait bien de garder dans l'historique que nous avons fait une release √† partir de ce commit.  Une balise est cr√©√©e, Git enregistre les informations de version et vous pourrez y revenir plus tard. <br><br>  <b>Alexei Kudryavtsev</b> : O√π enseigner Git, que lire? <br><br>  <b>Egor Andreevich</b> : Git a un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">livre officiel</a> .  J'aime la fa√ßon dont il est √©crit, il y a de bons exemples.  Il y a un chapitre sur l'int√©rieur, vous pouvez l'√©tudier √† fond.  Vous pouvez trouver de nombreuses situations et solutions √©sot√©riques sur StackOverflow.  Ils peuvent √©galement √™tre utilis√©s. <br><br><blockquote>  Nous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">n'allons</a> pas parler de Git lors du prochain <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Saint AppsConf</a> .  Mais d'un autre c√¥t√©, nous avons d√©cid√© d'une exp√©rience et ajout√© des rapports d'introduction au programme de conf√©rence mouvement√©, dans lequel des conf√©renciers d'industries de d√©veloppement connexes partagent leurs connaissances pour √©largir les horizons d'un d√©veloppeur mobile.  Nous vous conseillons de faire attention <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√† la pr√©sentation de Nikolai Golov d'Avito sur les bases de donn√©es</a> : comment ne pas se tromper et choisir la bonne base de donn√©es, comment se pr√©parer √† la croissance et ce qui est pertinent en 2019. <br><br>  AppsCast sort toutes les deux semaines le mercredi, et si vous pr√©f√©rez la version audio √† la version texte, abonnez-vous √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SoundCloud</a> , aimez et discutez des sujets <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans notre chat</a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468177/">https://habr.com/ru/post/fr468177/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468157/index.html">Point de vue d'EcmaScript sur la th√©orie g√©n√©rale de la POO</a></li>
<li><a href="../fr468163/index.html">Oracle VM Server for SPARC for Dummies (How-to)</a></li>
<li><a href="../fr468167/index.html">Vivez et apprenez. Partie 4. √âtudier en travaillant?</a></li>
<li><a href="../fr468169/index.html">JQuery histoire et patrimoine</a></li>
<li><a href="../fr468175/index.html">Blogs de d√©veloppement frontend √† lire</a></li>
<li><a href="../fr468179/index.html">Analyse: comment fonctionne l'infrastructure du march√© russe des valeurs mobili√®res</a></li>
<li><a href="../fr468181/index.html">Silent Trinity: explorer une nouvelle version du cadre de post-exploitation</a></li>
<li><a href="../fr468185/index.html">Service AWS EC2 et collaboration avec lui</a></li>
<li><a href="../fr468189/index.html">Boostez les comp√©tences de d√©bogage JavaScript √† l'aide d'astuces de console</a></li>
<li><a href="../fr468191/index.html">RubyRussia 2019: Nikolay Sverchkov √† propos du serveur sans serveur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>