<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚å®Ô∏è üèéÔ∏è ‚öõÔ∏è Aprendizagem do Ranking Ativo üéóÔ∏è üë©üèø‚Äçü§ù‚Äçüë©üèΩ üòÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Com este post, estou abrindo uma s√©rie em que meus colegas e eu lhe diremos como o ML √© usado no Mail.ru Search. Hoje vou explicar como a classifica√ß√£...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aprendizagem do Ranking Ativo</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/461927/">  Com este post, estou abrindo uma s√©rie em que meus colegas e eu lhe diremos como o ML √© usado no Mail.ru Search.  Hoje vou explicar como a classifica√ß√£o √© organizada e como usamos as informa√ß√µes sobre as intera√ß√µes do usu√°rio com nosso mecanismo de pesquisa para melhorar o mecanismo de pesquisa. <br><br><h2>  Tarefa de classifica√ß√£o </h2><br>  O que se entende por tarefa de classifica√ß√£o?  Imagine que na amostra de treinamento haja algum conjunto de consultas para as quais a ordem dos documentos por relev√¢ncia √© conhecida.  Por exemplo, voc√™ sabe qual documento √© o mais relevante, qual √© o segundo mais relevante etc.  E voc√™ precisa restaurar esse pedido para toda a popula√ß√£o.  Ou seja, para todos os pedidos da popula√ß√£o em geral, o primeiro lugar √© o documento mais relevante e o √∫ltimo - o mais irrelevante. <br><br>  Vamos ver como esses problemas s√£o resolvidos nos grandes mecanismos de pesquisa. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f7/a52/6c3/7f7a526c333c1e49c186b045e8dc86f6.png" width="600"></div><a name="habracut"></a><br>  Temos um √≠ndice de pesquisa - este √© um banco de dados de muitos bilh√µes de documentos.  Quando uma solicita√ß√£o chega, primeiro geramos uma lista de candidatos para classifica√ß√£o final usando modelos de texto simples.  A op√ß√£o mais f√°cil √© pegar documentos que, em princ√≠pio, contenham palavras da solicita√ß√£o.  Por que essa etapa √© necess√°ria?  O fato √© que √© imposs√≠vel para todos os documentos dispon√≠veis criar sinais e formar previs√µes do modelo final.  Depois j√° calculamos os sinais.  Que sinais podemos tomar?  Por exemplo, o n√∫mero de ocorr√™ncias de palavras de uma consulta em um documento ou o n√∫mero de cliques em um determinado documento.  Voc√™ pode usar fatores complexos treinados por m√°quina: na Pesquisa usando redes neurais prevemos a relev√¢ncia do documento sob demanda e inserimos essa previs√£o com uma nova coluna em nosso espa√ßo de recursos. <br><br>  Por que estamos fazendo tudo isso?  Queremos maximizar as m√©tricas do usu√°rio para que os usu√°rios encontrem os resultados relevantes em nossos resultados o mais facilmente poss√≠vel e retornem para n√≥s o mais r√°pido poss√≠vel. <br><br>  Nosso modelo final usa um conjunto de √°rvores de decis√£o constru√≠das usando o aumento de gradiente.  Existem duas op√ß√µes para criar uma m√©trica de destino para o treinamento: <br><br><ul><li>  Estamos criando um departamento de assessores - pessoas especialmente treinadas para quem prestamos consultas e dizemos: "Pessoal, avalie a relev√¢ncia da nossa emiss√£o".  Eles responder√£o com n√∫meros que medem a relev√¢ncia.  Por que essa abordagem √© ruim?  Nesse caso, maximizaremos o modelo em rela√ß√£o √†s opini√µes de pessoas que n√£o s√£o nossos usu√°rios.  N√£o otimizaremos a m√©trica que realmente queremos otimizar. <br></li><li>  Por esse motivo, usamos a segunda abordagem para a vari√°vel de destino: mostramos aos usu√°rios os resultados, observamos para quais documentos eles passam e quais pulam.  E ent√£o usamos esses dados para treinar o modelo final. <br></li></ul><br><h2>  Como o problema de classifica√ß√£o √© resolvido? </h2><br>  Existem tr√™s abordagens para resolver o problema de classifica√ß√£o: <br><br><ul><li>  <b>Pointwise</b> , √© pointwise.  Consideraremos a relev√¢ncia como uma medida absoluta e multaremos o modelo pela diferen√ßa absoluta entre a relev√¢ncia prevista e a que conhecemos na amostra de treinamento.  Por exemplo, o avaliador atribuiu ao documento uma classifica√ß√£o de 3, e dir√≠amos 2, ent√£o multamos o modelo em 1. <br></li><li>  <b>Em pares</b> , em pares.  Vamos comparar documentos entre si.  Por exemplo, na amostra de treinamento, existem dois documentos e sabemos qual deles √© mais relevante para esta solicita√ß√£o.  Depois, multaremos o modelo se a previs√£o for menor que a menos relevante, ou seja, o par estiver incorretamente organizado. <br></li><li>  <b>Listwise</b> .  Tamb√©m se baseia na relev√¢ncia relativa, mas n√£o dentro dos pares: classificamos toda a quest√£o pelo modelo e avaliamos o resultado - se o documento mais relevante n√£o estiver em primeiro lugar, receberemos uma multa grande. <br></li></ul><br>  Qual abordagem √© melhor usar para nossa vari√°vel de destino?  Para isso, vale a pena discutir uma quest√£o importante: ‚Äúos cliques podem ser usados ‚Äã‚Äãcomo uma medida da absoluta relev√¢ncia de um documento?‚Äù  √â imposs√≠vel, porque eles dependem da posi√ß√£o do documento na edi√ß√£o.  Ap√≥s receber o problema, voc√™ provavelmente clica no documento que ser√° mais alto, porque parece que os primeiros documentos s√£o mais relevantes. <br><br>  Como essa hip√≥tese pode ser verificada?  Pegamos dois documentos na parte superior da edi√ß√£o e os trocamos.  Se os cliques fossem uma medida absoluta de relev√¢ncia, seu n√∫mero dependeria apenas do pr√≥prio documento, e n√£o da posi√ß√£o.  Mas isso n√£o √© verdade.  O documento acima sempre recebe mais cliques.  Portanto, os cliques nunca podem ser usados ‚Äã‚Äãcomo uma medida de relev√¢ncia absoluta.  Portanto, voc√™ pode usar em pares ou em lista. <br><br><h2>  Coletamos um conjunto de dados </h2><br>  Agora, extra√≠mos os dados para o conjunto de treinamento.  Tivemos esta sess√£o: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a9e/3c4/81c/a9e3c481c03dfce37e71ffc73485afc3.png" width="200"></div><br>  Dos quatro documentos, houve um clique no segundo e quarto.  Como regra, as pessoas assistem aos resultados de cima para baixo.  Voc√™ olhou para o primeiro documento, n√£o gostou, clicou no segundo.  Ent√£o eles voltaram para a busca, olharam para o terceiro e clicaram no quarto.  Obviamente, voc√™ gostou do segundo mais que o primeiro e do quarto mais que do primeiro e do terceiro.  Esses s√£o os pares que geramos para todas as solicita√ß√µes e usamos modelos para treinamento. <br><br>  Tudo parece estar bem, mas h√° um problema: as pessoas s√≥ clicam nos documentos desde o in√≠cio da quest√£o.  Portanto, se voc√™ fizer a amostra de treinamento apenas dessa maneira, a distribui√ß√£o nela ser√° exatamente a mesma que na amostra de teste.  √â necess√°rio alinhar de alguma forma a distribui√ß√£o.  Fazemos isso adicionando exemplos negativos: esses s√£o documentos que estavam na parte inferior do ranking, o usu√°rio definitivamente n√£o os viu, mas sabemos que eles s√£o ruins. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fc4/a4e/993/fc4a4e993e6c5611ffb36af4385fed7b.png" width="300"></div><br>  Portanto, criamos um esquema para o treinamento de classifica√ß√£o: mostramos aos usu√°rios os resultados, coletamos cliques deles, adicionamos exemplos negativos para alinhar a distribui√ß√£o e treinamos novamente o modelo de classifica√ß√£o.  Assim, levamos em conta a rea√ß√£o dos usu√°rios √† sua classifica√ß√£o atual, levamos em conta os erros e melhoramos a classifica√ß√£o.  Repetimos esses procedimentos v√°rias vezes at√© a converg√™ncia.  √â importante observar que pesquisamos n√£o apenas pela web, mas tamb√©m por v√≠deo, por imagens, e o esquema descrito funciona perfeitamente em qualquer tipo de pesquisa.  Como resultado, as m√©tricas comportamentais crescem muito.  Na segunda itera√ß√£o, √© um pouco menor, na terceira itera√ß√£o √© ainda menor e, como resultado, converge para um √≥timo local. <br><br>  Vamos pensar por que convergimos para um √≥timo local, e n√£o para um √≥timo global. <br><br>  Suponha que voc√™ √© um f√£ de futebol e √† noite n√£o teve tempo de assistir √† partida do seu time favorito.  Acorde de manh√£ e digite o nome da equipe na barra de pesquisa para descobrir o resultado da partida.  Veja os tr√™s primeiros documentos - estas s√£o as p√°ginas oficiais do clube, n√£o h√° informa√ß√µes √∫teis.  Voc√™ n√£o folhear√° a edi√ß√£o inteira, n√£o receber√° outra solicita√ß√£o.  Talvez voc√™ at√© clique em algum documento irrelevante.  Mas, como resultado, fique chateado, feche o SERP e abra outro mecanismo de pesquisa. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1f2/fdf/388/1f2fdf3881703461703e82dd9881c673.png"><br><br>  Embora esse problema n√£o seja encontrado apenas na pesquisa, √© especialmente relevante aqui.  Imagine uma loja on-line, que √© uma fita grande sem a capacidade de dizer qual categoria espec√≠fica de produtos voc√™ deseja ver.  √â exatamente isso que acontece com os resultados da pesquisa: ap√≥s o envio da solicita√ß√£o, voc√™ n√£o pode mais explicar o que realmente precisa: informa√ß√µes sobre o time de futebol ou o placar da √∫ltima partida. <br><br>  Imagine que um homem brutal foi a uma loja on-line t√£o estranha, consistindo de uma fita de recomenda√ß√µes, e nas recomenda√ß√µes dele ele v√™ apenas produtos tipicamente femininos.  Talvez ele at√© clique em algum vestido, porque √© usado em uma garota bonita.  Enviaremos esse clique para o conjunto de treinamento e decidiremos que o homem gosta mais desse vestido do que de esponja.  Quando ele voltar ao nosso sistema, ele j√° ver√° alguns vestidos.  Inicialmente, n√£o t√≠nhamos produtos v√°lidos para o usu√°rio. Portanto, essa abordagem n√£o nos permite corrigir esse erro.  Est√°vamos em um √≥timo local, no qual a pessoa pobre n√£o pode mais nos dizer que n√£o gosta de esponjas ou vestidos.  Muitas vezes, esse problema √© chamado de problema de feedback positivo. <br><br><h2>  Melhoria adicional </h2><br>  Como melhorar um mecanismo de pesquisa?  Como sair de um local ideal?  Novos fatores precisam ser adicionados.  Suponha que tenhamos feito um fator muito bom que, mediante solicita√ß√£o com o nome do time de futebol, apresentar√° um documento relevante, ou seja, os resultados da √∫ltima partida.  Qual poderia ser o problema aqui?  Se voc√™ treinar o modelo em dados antigos, offline, pegue o conjunto de dados antigo com cliques e adicione esse atributo.  Pode ser relevante, mas voc√™ n√£o o usou na classifica√ß√£o antes e, portanto, as pessoas n√£o clicaram nos documentos para os quais esse atributo √© v√°lido.  Ele n√£o se correlaciona com sua vari√°vel de destino; portanto, simplesmente n√£o ser√° usado pelo modelo. <br><br>  Nesses casos, costumamos usar esta solu√ß√£o: ignorando o modelo final, for√ßamos nossa classifica√ß√£o a usar esse recurso.  N√≥s mostramos √† for√ßa o resultado da √∫ltima partida, mediante solicita√ß√£o, com o nome da equipe e, se o usu√°rio clicou nela, essas s√£o as informa√ß√µes que nos permitem entender que o sinal √© bom. <br><br>  Vejamos um exemplo.  Recentemente, fizemos belas fotos para documentos do Instagram: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/229/b9f/da0/229b9fda0570937619fc62b946ff81cb.png"><br><br>  Parece que fotos t√£o bonitas devem satisfazer nossos usu√°rios o m√°ximo poss√≠vel.  Obviamente, precisamos fazer um sinal de que o documento tem essa imagem.  Adicionamos ao conjunto de dados, treinamos novamente o modelo de classifica√ß√£o e vemos como esse recurso √© usado.  E ent√£o analisamos a mudan√ßa nas m√©tricas comportamentais.  Eles melhoraram um pouco, mas essa √© a melhor solu√ß√£o? <br><br>  N√£o, porque para muitos pedidos voc√™ n√£o mostra fotos bonitas.  Voc√™ n√£o deu ao usu√°rio a oportunidade de mostrar como ele gosta dele.  Para resolver esse problema, para algumas solicita√ß√µes que envolvem a exibi√ß√£o de documentos do Instagram, ignorando √† for√ßa o modelo, mostramos belas fotos e verificamos se elas clicavam nelas.  Assim que os usu√°rios apreciaram a inova√ß√£o, come√ßaram a treinar novamente o modelo em conjuntos de dados, nos quais os usu√°rios tiveram a oportunidade de mostrar a import√¢ncia desse fator.  Ap√≥s esse procedimento, em um novo conjunto de dados, o fator come√ßou a ser usado muitas vezes com mais frequ√™ncia e aumentou significativamente as m√©tricas do usu√°rio. <br><br><hr><br>  Portanto, examinamos a formula√ß√£o do problema de classifica√ß√£o e discutimos as armadilhas que o aguardam ao obter feedback dos usu√°rios.  A principal coisa que voc√™ deve tirar deste artigo: usando o feedback como alvo de treinamento, lembre-se de que o usu√°rio pode deixar esse feedback apenas onde o modelo atual o permitir.  Esse feedback pode ser um truque quando voc√™ tenta criar um novo modelo de aprendizado de m√°quina. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt461927/">https://habr.com/ru/post/pt461927/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt461907/index.html">An√°lise de produto em um est√∫dio de ciclo completo</a></li>
<li><a href="../pt461913/index.html">Usabilidade m√≥vel no com√©rcio eletr√¥nico: an√°lise das 20 principais lojas online da R√∫ssia</a></li>
<li><a href="../pt461919/index.html">Reutilizando formul√°rios no React</a></li>
<li><a href="../pt461921/index.html">HDMI-LVDS. Desenvolvimento em TSUMV59 de MStar</a></li>
<li><a href="../pt461923/index.html">Dia Aberto do JetBrains em S√£o Petersburgo: v√≠deo</a></li>
<li><a href="../pt461929/index.html">Monitorando e Verificando o Status do SSD no Linux</a></li>
<li><a href="../pt461935/index.html">Como trabalhar com o Postgres in Go: pr√°ticas, recursos, nuances</a></li>
<li><a href="../pt461937/index.html">A lei de Parkinson e como quebr√°-la</a></li>
<li><a href="../pt461939/index.html">Ano de aventura com grafeno-python</a></li>
<li><a href="../pt461941/index.html">Massageie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>