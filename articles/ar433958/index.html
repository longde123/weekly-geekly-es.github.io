<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฌ๏ธ ๐จ๐ฟโ๐คโ๐จ๐พ ๐ฟ ุชุทุจููุงุช TDD ุนูู Spring Spring: ุงูุนูู ูุน ูุงุนุฏุฉ ุจูุงูุงุช ๐ง๐ผ ๐บ โ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูููุงูุฉ ุงูุซุงููุฉ ูู ุณูุณูุฉ "ุชุทููุฑ ุงูุชุทุจููุงุช ุงูุชู ุชุนุชูุฏ ุนูู ุงูุงุฎุชุจุงุฑ ุนูู Spring Spring" ููุฐู ุงููุฑุฉ ุณุฃุชุญุฏุซ ุนู ุงุฎุชุจุงุฑ ุงููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ููู ุฌุงูุจ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุทุจููุงุช TDD ุนูู Spring Spring: ุงูุนูู ูุน ูุงุนุฏุฉ ุจูุงูุงุช</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433958/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุงูููุงูุฉ ุงูุซุงููุฉ ูู ุณูุณูุฉ "ุชุทููุฑ ุงูุชุทุจููุงุช ุงูุชู ุชุนุชูุฏ ุนูู ุงูุงุฎุชุจุงุฑ ุนูู Spring Spring" ููุฐู ุงููุฑุฉ ุณุฃุชุญุฏุซ ุนู ุงุฎุชุจุงุฑ ุงููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ููู ุฌุงูุจ ูุงู ูู ุฌูุงูุจ ุงุฎุชุจุงุฑ ุงูุชูุงูู.  ุณูู ุฃุฎุจุฑู ุจููููุฉ ุชุญุฏูุฏ ูุงุฌูุฉ ุฎุฏูุฉ ูุณุชูุจููุฉ ูููุตูู ุฅูู ุงูุจูุงูุงุช ูู ุฎูุงู ุงูุงุฎุชุจุงุฑุงุช ุ ูููููุฉ ุงุณุชุฎุฏุงู ููุงุนุฏ ุงูุจูุงูุงุช ุงููุฏูุฌุฉ ูู ุงูุฐุงูุฑุฉ ููุงุฎุชุจุงุฑ ุ ูุงูุนูู ูุน ุงููุนุงููุงุช ุ ูุชุญููู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ุฃูุง ูุง ุฃุชุญุฏุซ ูุซูุฑูุง ุนู TDD ูุงูุงุฎุชุจุงุฑ ุจุดูู ุนุงู ุ ูุฃุฏุนู ุงูุฌููุน ุฅูู ูุฑุงุกุฉ ุงูููุงู ุงูุฃูู - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููููุฉ ุจูุงุก ูุฑู ูู ุชุทููุฑ ุชุทุจููุงุช ุฌุฐุน ุฃู ูุญุฑููุง ุงูุงุฎุชุจุงุฑ ูู ูุฌูุฉ Spring Boot / geek</a> </p><br><p style=";text-align:right;direction:rtl">  ุณุฃุจุฏุฃ ุ ูุขุฎุฑ ูุฑุฉ ุ ุจุฌุฒุก ูุธุฑู ุตุบูุฑ ุ ูุงูุชูู ุฅูู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู. </p><br><h1 id="piramida-testirovaniya" style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุงููุฑู </h1><br><p style=";text-align:right;direction:rtl">  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุตู ุตุบูุฑ ููููู ุถุฑูุฑู ููุซู ูุฐุง ุงูููุงู ุงูููู ูู ุงูุงุฎุชุจุงุฑ ูุซู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฑู ุงูุงุฎุชุจุงุฑ</a> ุฃู <em>ูุฑู ุงูุงุฎุชุจุงุฑ</em> . </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f6c/930/f2d/f6c930f2d4ae8a6068696ace34e9566e.png" alt="ุงูุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  (ูุฃุฎูุฐุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฑู ุงูุงุฎุชุจุงุฑ ุงูุนููู</a> ) </p><br><p style=";text-align:right;direction:rtl">  ูุฑู ุงูุงุฎุชุจุงุฑ ูู ุงูููุฌ ุนูุฏ ุชูุธูู ุงูุงุฎุชุจุงุฑุงุช ุนูู ุนุฏุฉ ูุณุชููุงุช. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑุงุช <strong>ูุงุฌูุฉ ุงููุณุชุฎุฏู</strong> (ุฃู ูู ุงูุจุฏุงูุฉ ุฅูู ุงูููุงูุฉ ุ <strong>E2E</strong> ) ููููุฉ ููู ุจุทูุฆุฉ ุ ููููุง ุชุฎุชุจุฑ ุงูุชุทุจูู ุงูุญูููู - ูุง ุชุณุฎุฑ ูู ุงููุธุฑุงุก ูุงูุงุฎุชุจุงุฑ.  ุบุงูุจูุง ูุง ูููุฑ ุฑุฌุงู ุงูุฃุนูุงู ูู ูุฐุง ุงููุณุชูู ูุชุนูุด ุฌููุน ุฃุทุฑ BDD ููุง (ุงูุธุฑ ุงูุฎูุงุฑ ูู ููุงูุฉ ุณุงุจูุฉ). </li><li style=";text-align:right;direction:rtl">  ูุชูููุง <strong>ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู</strong> (ุงูุฎุฏูุฉ ุ ุงููููู - ูู ูุงุญุฏ ูู ูุตุทูุญุงุชู ุงูุฎุงุตุฉ) ุ ูุงูุชู ุชุฑูุฒ ุจุงููุนู ุนูู ูููู ูุนูู (ุงูุฎุฏูุฉ) ูู ุงููุธุงู ุ ูุนุฒูู ุนู ุงูููููุงุช ุงูุฃุฎุฑู ูู ุฎูุงู moki / ุงูุฒูุฌู ุ ูููู ูุง ูุฒุงู ุงูุชุญูู ูู ุงูุชูุงูู ูุน ุฃูุธูุฉ ุฎุงุฑุฌูุฉ ุญููููุฉ - ุชุฑุชุจุท ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุฅุฑุณุงู ุทูุจุงุช REST ุ ูุฃูุง ุฃุนูู ูุน ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฑุณุงุฆู.  ูู ุงููุงูุน ุ ูุฐู ุงุฎุชุจุงุฑุงุช ุชุชุญูู ูู ุชูุงูู ููุทู ุงูุนูู ูุน ุงูุนุงูู ุงูุฎุงุฑุฌู. </li><li style=";text-align:right;direction:rtl">  ูู ุงูุฌุฒุก ุงูุณููู ููุบุงูุฉ ุ ุชูุฌุฏ <strong>ุงุฎุชุจุงุฑุงุช</strong> ุณุฑูุนุฉ <strong>ูููุญุฏุฉ</strong> ุชุฎุชุจุฑ ุงููุชู ุงูุฏููุง ูู ุงูููุฏ (ุงููุฆุงุช ุ ุงูุทุฑู) ุจูุนุฒู ุชุงู. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุณุงุนุฏ Spring ูู ูุชุงุจุฉ ุงุฎุชุจุงุฑุงุช ููู ูุณุชูู - <em>ุญุชู ุจุงููุณุจุฉ ูุงุฎุชุจุงุฑุงุช ุงููุญุฏุงุช</em> ุ ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ูุฏ ูุจุฏู ุบุฑูุจุงู ุ ูุฃูู ูู ุนุงูู ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ ุ ูุฌุจ ุฃูุง ุชููู ููุงู ูุนุฑูุฉ ุนูู ุงูุฅุทูุงู ุจุงูุฅุทุงุฑ.  ุจุนุฏ ูุชุงุจุฉ ุงุฎุชุจุงุฑ E2E ุ ุณุฃูุถุญ ููุท ููู ุฃู Spring ูุณูุญ ุญุชู ุจุฃุดูุงุก "ุชูุงูู" ุจุญุชุฉ ูุซู ูุญุฏุงุช ุงูุชุญูู ูู ุงูุงุฎุชุจุงุฑ ุจูุนุฒู ุนู ุบูุฑูุง. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุณุฃุจุฏุฃ ูู ููุฉ ุงููุฑู - ุงุฎุชุจุงุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุจุทูุก ุ ูุงูุฐู ูุจุฏุฃ ููุฎุชุจุฑ ุชุทุจูููุง ูุงููุงู. </p><br><h1 id="end-to-end-test" style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ููุงูุฉ ุฅูู ููุงูุฉ </h1><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ููุฒุฉ ุฌุฏูุฏุฉ: </p><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">Feature: A list of available cakes Background: catalogue is updated Given the following items are promoted | Title | Price | | Red Velvet | 3.95 | | Victoria Sponge | 5.50 | Scenario: a user visiting the web-site sees the list of items Given a new user, Alice When she visits Cake Factory web-site Then she sees that "Red Velvet" is available with price ยฃ3.95 And she sees that "Victoria Sponge" is available with price ยฃ5.50</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  ูููุง ุฌุงูุจ ูุซูุฑ ููุงูุชูุงู ุนูู ุงูููุฑ - ูุง ูุฌุจ ุงูููุงู ุจู ูุน ุงูุงุฎุชุจุงุฑ ุงูุณุงุจู ุ ุญูู ุงูุชุญูุฉ ุนูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉุ  ูุจุฏู ุฃูู ูู ูุนุฏ ุฐุง ุตูุฉ ุ ุจุนุฏ ุฅุทูุงู ุงููููุน ุนูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุณูููู ููุงู ุจุงููุนู ุฏููู ุ ูููุณ ุชุญูุฉ.  ูุง ููุฌุฏ ุฅุฌุงุจุฉ ูุงุญุฏุฉ ุ ุฃูุฏ ุฃู ุฃููู - ูุฐุง ูุนุชูุฏ ุนูู ุงููุถุน.  ููู ุงููุตูุญุฉ ุงูุฑุฆูุณูุฉ - ูุง ุชุนูู ุนูู ุงูุงุฎุชุจุงุฑุงุช!  ุงุญุฐููุง ุนูุฏูุง ุชููุฏ ุฃูููุชูุง ุ ูุฃุนุฏ ูุชุงุจุชูุง ูุชุณููู ูุฑุงุกุชูุง.  ูุง ุณููุง ุงุฎุชุจุงุฑุงุช E2E - ูุฌุจ ุฃู ูููู ุ ูู ุงููุงูุน ุ <strong>ููุงุตูุงุช ุญูุฉ ูุญุงููุฉ</strong> .  ูู ุญุงูุชู ุ ููุช ููุท ุจุญุฐู ุงูุงุฎุชุจุงุฑุงุช ุงููุฏููุฉ ุ ูุงุณุชุจุฏูุช ุจูุง ุจุฃุฎุฑู ุฌุฏูุฏุฉ ุ ุจุงุณุชุฎุฏุงู ุจุนุถ ุงูุฎุทูุงุช ุงูุณุงุจูุฉ ูุฅุถุงูุฉ ุฃุฎุฑู ุบูุฑ ููุฌูุฏุฉ. </blockquote><p style=";text-align:right;direction:rtl">  ููุฏ ูุตูุช ุงูุขู ุฅูู ููุทุฉ ูููุฉ - ุงุฎุชูุงุฑ ุงูุชูููููุฌูุง ูุชุฎุฒูู ุงูุจูุงูุงุช.  ููููุง ููููุฌ <em>ุงููุฒูู</em> ุ ุฃูุฏ ุชุฃุฌูู ุงูุงุฎุชูุงุฑ ุญุชู ุขุฎุฑ ูุญุธุฉ - ุนูุฏูุง ุฃุนุฑู ุนูู ูุฌู ุงููููู ูุง ุฅุฐุง ูุงู ุงููููุฐุฌ ุงูุนูุงุฆูู ุฃู ูุง ุ ูุง ูู ูุชุทูุจุงุช ุงูุงุชุณุงู ูุงููุนุงููุฉ.  ุจุดูู ุนุงู ุ ุชูุฌุฏ ุญููู ููุฐุง - ุนูู ุณุจูู ุงููุซุงู ุ ุฅูุดุงุก <strong>ุชูุงุฆู ุงุฎุชุจุงุฑ ููุฎุงุฒู</strong> ูุชููุนุฉ <strong>ุฏุงุฎู ุงูุฐุงูุฑุฉ</strong> ุ ููู ุญุชู ุงูุขู ูุง ุฃุฑูุฏ ุชุนููุฏ ุงูููุงูุฉ ูุงุฎุชูุงุฑ ููุงุนุฏ ุงูุจูุงูุงุช ุฐุงุช ุงูุตูุฉ ุนูู ุงูููุฑ.  ูููู ูู ุฃุฌู ุงูุญูุงุธ ุนูู ุจุนุถ ุงูุงุญุชูุงูุงุช ุนูู ุงูุฃูู ูุงุฎุชูุงุฑ ูุงุนุฏุฉ ุจูุงูุงุช ุ ุณุฃุถูู ูุฌููุนุฉ ุชุฌุฑูุจูุฉ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Spring Data JPA</a> .  JPA ููุณูุง ูู ููุงุตูุงุช ูุฌุฑุฏุฉ ุฅูู ุญุฏ ูุง ูููุตูู ุฅูู ููุงุนุฏ ุงูุจูุงูุงุช ุงูุนูุงุฆููุฉ ุ ู Spring Data ูุฌุนู ุงุณุชุฎุฏุงููุง ุฃุณูู. </p><br><blockquote style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู Spring Data JPA Hibernate ููููุฑ ุงูุชุฑุงุถููุง ุ ููููู ูุฏุนู ุฃูุถูุง ุงูุชูููุงุช ุงูุฃุฎุฑู ุ ูุซู EclipseLink ู MyBatis.  ููุฃุดุฎุงุต ุงูุฐูู ููุณูุง ุนูู ุฏุฑุงูุฉ ุจูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช Java Persistence - ูุดุจู JPA ูุงุฌูุฉ ุ ู Hibernate ูู ูุฆุฉ ุชููุฐูุง. </blockquote><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ูุฅุถุงูุฉ ุฏุนู JPA ุ ุฃุถูุช ุจุนุถ ุงูุชุจุนูุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">implementation('org.springframework.boot:spring-boot-starter-data-jpa') runtime('com.h2database:h2')</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงุนุฏุฉ ุจูุงูุงุช ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณุฃุณุชุฎุฏู H2</a> - ูุงุนุฏุฉ ุจูุงูุงุช ูุฏูุฌุฉ ููุชูุจุฉ ุจูุบุฉ Java ุ ูุน ุงููุฏุฑุฉ ุนูู ุงูุนูู ูู ูุถุน ุงูุฐุงูุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู Spring Data JPA ุ ุฃููู ุนูู ุงูููุฑ ุจุชุนุฑูู ูุงุฌูุฉ ูููุตูู ุฅูู ุงูุจูุงูุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CakeRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CrudRepository</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CakeEntity</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงูุฌููุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@Builder</span></span> <span class="hljs-meta"><span class="hljs-meta">@AllArgsConstructor</span></span> <span class="hljs-meta"><span class="hljs-meta">@Table</span></span>(name = <span class="hljs-string"><span class="hljs-string">"cakes"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CakeEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CakeEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue</span></span>(strategy = GenerationType.IDENTITY) Long id; <span class="hljs-meta"><span class="hljs-meta">@NotBlank</span></span> String title; <span class="hljs-meta"><span class="hljs-meta">@Positive</span></span> BigDecimal price; <span class="hljs-meta"><span class="hljs-meta">@NotBlank</span></span> <span class="hljs-meta"><span class="hljs-meta">@NaturalId</span></span> String sku; <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> promoted; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object o)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == o) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (o == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || getClass() != o.getClass()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; CakeEntity cakeEntity = (CakeEntity) o; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Objects.equals(title, cakeEntity.title); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hashCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Objects.hash(title); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงู ุจุถุนุฉ ุฃุดูุงุก ุฃูู ูุถูุญูุง ูู ูุตู ุงูููุงู. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>@NaturalId</code>  ูุณุชุฎุฏู ูุฐุง ุงูุญูู ูู "ูุนุฑูู ุทุจูุนู" ููุชุญูู ูู <code>equals</code> ุงูููุงูุงุช - ุจุงุณุชุฎุฏุงู ุฌููุน ุงูุญููู ุฃู ุญููู <code>@Id</code> ูู ุฃุณุงููุจ <code>equals</code> / <code>hashCode</code> ูู ุจุงูุฃุญุฑู ููุท ูุถุงุฏ.  ููุชูุจ ุจุดูู ุฌูุฏ ุญูู ููููุฉ ุงูุชุญูู ุจุดูู ุตุญูุญ ูู ุงููุณุงูุงุฉ ุจูู ุงูููุงูุงุช ุ ุนูู ุณุจูู ุงููุซุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . </li><li style=";text-align:right;direction:rtl">  ูุชุฎููุถ ุดูุฑุฉ ุงูุบููุงู ููููุงู ุ ุฃุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Project Lombok</a> - anotation processor for Java.  ูุชูุญ ูู ุฅุถุงูุฉ ุฃุดูุงุก ูููุฏุฉ <code>@Builder</code> ุ ูุซู <code>@Builder</code> - ูุฅูุดุงุก ููุดุฆ ุชููุงุฆููุง ูููุฆุฉ ู <code>@AllArgsConstructor</code> ูุฅูุดุงุก ูููุดุฆ ูุฌููุน ุงูุญููู. </li></ul><br><p style=";text-align:right;direction:rtl">  ุณูุชู ุชูููุฑ ุชุทุจูู ูุงุฌูุฉ ุชููุงุฆููุง ุจูุงุณุทุฉ Spring Data. </p><br><h1 id="vniz-po-piramide" style=";text-align:right;direction:rtl">  ุฃุณูู ุงููุฑู </h1><br><p style=";text-align:right;direction:rtl">  ููุฏ ุญุงู ุงูููุช ูููุฒูู ุฅูู ุงููุณุชูู ุงูุชุงูู ูู ุงููุฑู.  ููุงุนุฏุฉ ุนุงูุฉ ุ ุฃูุตู ุจุฃู <strong>ุชุจุฏุฃ ุฏุงุฆููุง ูู ุงุฎุชุจุงุฑ e2e</strong> ุ ูุฃู ูุฐุง ุณูุชูุญ ูู ุชุญุฏูุฏ "ุงููุฏู ุงูููุงุฆู" ูุญุฏูุฏ ุงูููุฒุฉ ุงูุฌุฏูุฏุฉ ุ ูููู ูุง ุชูุฌุฏ ููุงุนุฏ ุตุงุฑูุฉ ุฃุฎุฑู.  ููุณ ูู ุงูุถุฑูุฑู ูุชุงุจุฉ ุงุฎุชุจุงุฑ ุงูุชูุงูู ุฃููุงู ุ ูุจู ุงูุงูุชูุงู ุฅูู ูุณุชูู ุงููุญุฏุฉ.  ุบุงูุจูุง ูุง ูููู ุงูุฃูุฑ ุฃูุซุฑ ููุงุกูุฉ ูุจุณุงุทุฉ - ููู ุงูุทุจูุนู ุฌุฏูุง ุงููุฒูู. </p><br><p style=";text-align:right;direction:rtl">  ููู ุนูู ูุฌู ุงูุชุญุฏูุฏ ุงูุขู ุ ุฃูุฏ ูุณุฑ ูุฐู ุงููุงุนุฏุฉ ุนูู ุงูููุฑ ููุชุงุจุฉ ุงุฎุชุจุงุฑ ูุญุฏุฉ ูู ุดุฃููุง ุฃู ุชุณุงุนุฏ ูู ุชุญุฏูุฏ ูุงุฌูุฉ ูุนูุฏ ูููู ุฌุฏูุฏ ุบูุฑ ููุฌูุฏ ุญุชู ุงูุขู.  ูุฌุจ ุฃู ุชููู ูุญุฏุฉ ุงูุชุญูู ุจุฅุฑุฌุงุน ูููุฐุฌ ูุชู ููุคู ูู ูููู X ูุนูู ุ ููุฏ ูุชุจุช ูุฐุง ุงูุงุฎุชุจุงุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ExtendWith</span></span>(MockitoExtension.class) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IndexControllerTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Mock</span></span> CakeFinder cakeFinder; <span class="hljs-meta"><span class="hljs-meta">@InjectMocks</span></span> IndexController indexController; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Set&lt;Cake&gt; cakes = Set.of(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cake(<span class="hljs-string"><span class="hljs-string">"Test 1"</span></span>, <span class="hljs-string"><span class="hljs-string">"ยฃ10"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cake(<span class="hljs-string"><span class="hljs-string">"Test 2"</span></span>, <span class="hljs-string"><span class="hljs-string">"ยฃ10"</span></span>)); <span class="hljs-meta"><span class="hljs-meta">@BeforeEach</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ when(cakeFinder.findPromotedCakes()).thenReturn(cakes); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldReturnAListOfFoundPromotedCakes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ModelAndView index = indexController.index(); assertThat(index.getModel()).extracting(<span class="hljs-string"><span class="hljs-string">"cakes"</span></span>).contains(cakes); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ุงุฎุชุจุงุฑ ูุญุฏุฉ ุฎุงูุตุฉ - ูุง ุณูุงูุงุช ุ ูุง ุชูุฌุฏ ููุงุนุฏ ุจูุงูุงุช ููุง ุ ููุท <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Mockito</a> ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">mok</a> .  ููุฐุง ุงูุงุฎุชุจุงุฑ ูู ูุฌุฑุฏ ุนุฑุถ ุฌูุฏ ูููููุฉ ูุณุงุนุฏุฉ Spring ูู ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ - <em>ูุญุฏุฉ ุงูุชุญูู ูู Spring MVC ูู ูุฌุฑุฏ ูุฆุฉ ุชุฏุฑุณ ุฃุณุงููุจูุง ุงููุนููุงุช ุงูุฎุงุตุฉ ุจุงูุฃููุงุน ุงูุนุงุฏูุฉ ูุชุนูุฏ ูุงุฆูุงุช POJO - ุนุฑุถ ุงูููุงุฐุฌ</em> .  ูุง ุชูุฌุฏ ุทูุจุงุช HTTP ุ ูุง ุชูุฌุฏ ุฑุฏูุฏ ุ ุฑุคูุณ ุ JSON ุ XML - ูู ูุฐุง ุณูู ูุชู ุชุทุจููู ุชููุงุฆููุง ุนูู ุงูููุฏุณ ูู ุดูู ูุญููุงุช ููุณูุณูุงุช.  ูุนู ุ ููุงู "ุชูููุญ" ุตุบูุฑ ุฅูู Spring ูู ุดูู <code>ModelAndView</code> ุ ูููู ูุฐุง POJO ููุชุธู ูููููู ุญุชู ุงูุชุฎูุต ููู ุฅุฐุง ููุช ุชุฑุบุจ ูู ุฐูู ุ ููุงู ุญุงุฌุฉ ุฎุงุตุฉ ููุญุฏุงุช ุงูุชุญูู UI. </p><br><blockquote style=";text-align:right;direction:rtl">  ูู ุฃุชุญุฏุซ ูุซูุฑุง ุนู ููููุชู ุ ููููู ูุฑุงุกุฉ ูู ุดูุก ูู ุงููุซุงุฆู ุงูุฑุณููุฉ.  ุนูู ูุฌู ุงูุชุญุฏูุฏ ุ ููุงู ููุงุท ูุซูุฑุฉ ููุงูุชูุงู ููุท ูู ูุฐุง ุงูุงุฎุชุจุงุฑ - ูููููู ุงุณุชุฎุฏุงู <code>MockitoExtension.class</code> ููุงุฎุชุจุงุฑ ุ ูุณูุคุฏู ุชููุงุฆููุง ุฅูู ุฅูุดุงุก mokas ููุญููู <code>@Mock</code> ุจูุงุณุทุฉ <code>@Mock</code> ุซู ุญูู ูุฐู mokas ูุชุจุนูุงุช ูู ูููุดุฆ ุงููุงุฆู ูู ุงูุญูู ุงููุญุฏุฏ ุจู <code>@InjectMocks</code> .  ููููู ุงูููุงู ุจูู ูุฐุง ูุฏูููุง ุจุงุณุชุฎุฏุงู ุงูุฃุณููุจ <code>Mockito.mock()</code> ุซู ุฅูุดุงุก ูุตู <code>Mockito.mock()</code> . </blockquote><p style=";text-align:right;direction:rtl">  ููุณุงุนุฏ ูุฐุง ุงูุงุฎุชุจุงุฑ ูู ุชุญุฏูุฏ ุทุฑููุฉ ุงููููู ุงูุฌุฏูุฏ - <code>findPromotedCakes</code> ุ ููู ูุงุฆูุฉ ุจุงููุนู ุงูุชู ูุฑูุฏ ุนุฑุถูุง ุนูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ.  ูุง ูุญุฏุฏ ูุง ูู ุนููู ุ ุฃู ููู ูุฌุจ ุฃู ูุนูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ูุณุคูููุฉ ูุญุฏุฉ ุงูุชุญูู ูู ุฃุฎุฐ ูุง ุชู ูููู ุฅููู ูุฅุฑุฌุงุน ุงูููุงุฐุฌ ("ุงููุนู") ูู ุญูู ูุนูู.  ููุน ุฐูู ุ ูุฅู <code>CakeFinder</code> ูุฏูู ุจุงููุนู ุงูุทุฑููุฉ ุงูุฃููู ูู <code>CakeFinder</code> ุ ููุง ูุนูู ุฃูู ููููู ูุชุงุจุฉ ุงุฎุชุจุงุฑ ุชูุงูู ูู. </p><br><blockquote style=";text-align:right;direction:rtl">  ููุฏ ููุช ุนูุฏุงู ุจุฌุนู ุฌููุน ุงููุตูู ุฏุงุฎู <strong>ุญุฒูุฉ</strong> <code>cakes</code> <strong>ุฎุงุตุฉ</strong> ุญุชู ูุง ูููู ูุฃู ุดุฎุต ุฎุงุฑุฌ ุงูุญุฒูุฉ ุงุณุชุฎุฏุงููุง.  ุงูุทุฑููุฉ ุงููุญูุฏุฉ ููุญุตูู ุนูู ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ูู ุฎูุงู ูุงุฌูุฉ CakeFinder ุ ูุงูุชู ูู "ุงููููู ุงูุนุงุดุฑ" ูููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ูุตุจุญ "ููุตููุง" ุทุจูุนููุง ุ ูููููู ูููู ุจุณูููุฉ ุฅุฐุง ุงุญุชุฌุช ุฅูู ุงุฎุชุจุงุฑ ุดูุก ุจูุนุฒู ุนู ุนุฏู ููุณ ุงููุงุนุฏุฉ.  ูุชูููุฐูุง ุงููุญูุฏ ูู JpaCakeFinder.  ูุฅุฐุง ุชุบูุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃู ูุตุฏุฑ ุงูุจูุงูุงุช ูู ุงููุณุชูุจู ุ ูุณุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุชุทุจูู ููุงุฌูุฉ <code>CakeFinder</code> ุฏูู ุชุบููุฑ ุงูููุฏ ุงูุฐู ูุณุชุฎุฏูู. </blockquote><br><h1 id="integracionnyy-test-dlya-jpa-ispolzuya-datajpatest" style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุงูุชูุงูู ู JPA ุจุงุณุชุฎุฏุงูDataJpaTest </h1><br><p style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู ูู ุฎุจุฒ ุงูุฑุจูุน ูุงูุฒุจุฏุฉ.  ูู ุงููุงูุน ุ ุชู ุฅุฌุฑุงุก ูู ุดูุก ุฌูุฏูุง ูุงุฎุชุจุงุฑ ุงูุชูุงูู ุ ุญูุซ ูุง ูุฑุบุจ ุงููุทูุฑูู ูู ุจุนุถ ุงูุฃุญูุงู ูู ุงูุงูุชูุงู ุฅูู ูุณุชูู ุงููุญุฏุฉ ุฃู ุฅููุงู ูุณุชูู ูุงุฌูุฉ ุงููุณุชุฎุฏู.  ูุฐุง ููุณ ุณูุฆูุง ููุง ุฌูุฏูุง - ูุฃูุฑุฑ ุฃู ุงููุฏู ุงูุฑุฆูุณู ููุงุฎุชุจุงุฑุงุช ูู ุงูุซูุฉ.  ููุฏ ุชููู ูุฌููุนุฉ ูู ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู ุงูุณุฑูุนุฉ ูุงููุนุงูุฉ ูุงููุฉ ูุชูููุฑ ูุฐู ุงูุซูุฉ.  ููุน ุฐูู ุ ููุงู ุฎุทุฑ ุฃูู ุจูุฑูุฑ ุงูููุช ุ ุณุชููู ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุฅูุง ุฃุจุทุฃ ุฃู ุฃุจุทุฃ ุ ุฃู ุจุจุณุงุทุฉ ุชุจุฏุฃ ูู ุงุฎุชุจุงุฑ ุงูููููุงุช ุจูุนุฒู ุ ุจุฏูุงู ูู ุงูุชูุงูู. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุฃู ุชุนูู ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู ุนูู ุชุดุบูู ุงูุชุทุจูู ููุง ูู ( <code>@SpringBootTest</code> ) ุ ุฃู <code>@SpringBootTest</code> ุงููููุตู (JPA ุ ุงูููุจ).  ูู ุญุงูุชู ุ ุฃุฑูุฏ ุฃู ุฃูุชุจ ุงุฎุชุจุงุฑูุง ูุฑููุฒูุง ูู JPA - ูุฐูู ูุณุช ุจุญุงุฌุฉ ุฅูู ุชูููู ูุญุฏุงุช ุงูุชุญูู ุฃู ุฃู ููููุงุช ุฃุฎุฑู.  ูุนุฏ ุงูุชุนููู ุงูุชูุถูุญู <code>@DataJpaTest</code> ูุณุคููุงู ุนู ุฐูู ูู ุงุฎุชุจุงุฑ ุงุฎุชุจุงุฑ ุงูุชูููุฏ ุงูุฑุจูุนู.  ูุฐุง ุชุนููู ุชูุถูุญู ุ ุนูู ุณุจูู ุงููุซุงู  ููู ูุฌูุน ุจูู ุงูุนุฏูุฏ ูู ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ุงููุฎุชููุฉ ุงูุชู ุชููู ุจุชูููู ุฌูุงูุจ ูุฎุชููุฉ ูู ุงูุงุฎุชุจุงุฑ. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุถููู ุงูุชุบุฑูุฏุฉ </li><li style=";text-align:right;direction:rtl">  AutoConfigureTestDatabase </li><li style=";text-align:right;direction:rtl">  ุชุถููู ุงูุชุบุฑูุฏุฉ </li><li style=";text-align:right;direction:rtl">  ุฑุฏูุง ุนููAutoConfigureTestEntityManager </li><li style=";text-align:right;direction:rtl">  ุชุถููู ุงูุชุบุฑูุฏุฉ </li></ul><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ุณุฃุฎุจุฑู ุนู ูู ูุงุญุฏุฉ ุนูู ุญุฏุฉ ุ ุซู ุณุฃุนุฑุถ ูู ุงูุงุฎุชุจุงุฑ ุงูููุงุฆู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุชุถููู ุงูุชุบุฑูุฏุฉ</strong> <br>  ูููู ุจุชุญููู ูุฌููุนุฉ ูุงููุฉ ูู ุงูุชููููุงุช ูุฅุนุฏุงุฏ ูุณุชูุฏุนุงุช ( <code>CrudRepositories</code> ุงูุฎุงุตุฉ ุจู <code>CrudRepositories</code> ) ุ ูุฃุฏูุงุช ุงูุชุฑุญูู ูููุงุนุฏ ุจูุงูุงุช FlyWay ู Liquibase ุ ูุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู DataSource ุ ููุฏูุฑ ุงููุนุงููุงุช ุ ูุฃุฎูุฑุง Hibernate.  ูู ุงููุงูุน ุ ูุฐู ูุฌุฑุฏ ูุฌููุนุฉ ูู ุงูุชููููุงุช ุฐุงุช ุงูุตูุฉ ูููุตูู ุฅูู ุงูุจูุงูุงุช - ูุง ูุชู ุชุถููู <code>DispatcherServlet</code> ูู Web MVC ุ ุฃู ุงูููููุงุช ุงูุฃุฎุฑู ููุง. </p><br><p style=";text-align:right;direction:rtl">  <strong>AutoConfigureTestDatabase</strong> <br>  ูุฐุง ูู ูุงุญุฏ ูู ุฃูุซุฑ ุงูุฌูุงูุจ ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ุงุฎุชุจุงุฑ JPA.  <em>ูุจุญุซ</em> ูุฐุง ุงูุชูููู <em>ูู classpath ุนู ุฅุญุฏู ููุงุนุฏ ุงูุจูุงูุงุช ุงููุฏูุฌุฉ ุงููุถููุฉ ููุนูุฏ ุชูููู ุงูุณูุงู ุจุญูุซ ูุดูุฑ ูุตุฏุฑ ุงูุจูุงูุงุช ุฅูู ูุงุนุฏุฉ ุจูุงูุงุช ูู ุงูุฐุงูุฑุฉ ุชู ุฅูุดุงุคูุง ุนุดูุงุฆููุง</em> .  ูุธุฑูุง ูุฃููู ุฃุถูุช ุงูุชุจุนูุฉ ุฅูู ูุงุนุฏุฉ H2 ุ ูุฃูุง ูุณุช ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุฃู ุดูุก ุขุฎุฑ ุ ููุท ุจุนุฏ ุชูุฏูู ูุฐุง ุงูุชุนููู ุงูุชูุถูุญู ุชููุงุฆููุง ููู ุชุดุบูู ุชุฌุฑูุจู ุณูููุฑ ูุงุนุฏุฉ ูุงุฑุบุฉ ุ ููุฐุง ุจุจุณุงุทุฉ ููุงุณุจ ุจุดูู ูุง ูุตุฏู. </p><br><p style=";text-align:right;direction:rtl">  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ูุฐู ุงููุงุนุฏุฉ ุณุชููู ูุงุฑุบุฉ ุชูุงููุง ุ ุจุฏูู ูุฎุทุท.  ูุชูููุฏ ุงูุฏุงุฆุฑุฉ ุ ููุงู ุจุถุนุฉ ุฎูุงุฑุงุช. </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏู ููุฒุฉ <strong>DDL ุงูุชููุงุฆูุฉ</strong> ูู ุงูุฅุณุจุงุช.  ุณูููู Spring Boot Test ุชููุงุฆููุง ุจุชุนููู ูุฐู ุงููููุฉ ุนูู <code>create-drop</code> ุจุญูุซ ููุดุฆ ุงูุฅุณุจุงุช ูุฎุทุทูุง ูู ูุตู ุงูููุงู ูุญุฐูู ูู ููุงูุฉ ุงูุฌูุณุฉ.  ูุฐู ูู ููุฒุฉ ูููุฉ ุจุดูู ูุง ูุตุฏู ูู ุงูุณุจุงุช ุ ููู ูููุฏ ุฌุฏุง ููุงุฎุชุจุงุฑุงุช. </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู ุงููุฌุฑุงุช ุงูุชู ุฃูุดุฃุชูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Flyway</a> ุฃู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Liquibase</a> . </li></ol><br><p style=";text-align:right;direction:rtl">  ููููู ูุฑุงุกุฉ ุงููุฒูุฏ ุญูู ุงูุทุฑู ุงููุฎุชููุฉ ูุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุซุงุฆู</a> . </p><br><p style=";text-align:right;direction:rtl">  <strong>ุชุถููู ุงูุชุบุฑูุฏุฉ</strong> <br>  ูููู ููุท ุจุชูููู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุงุณุชุฎุฏุงู NoOpCacheManager - ุฃู  ูุง ุชุฎุจุฆ ุฃู ุดูุก.  ูุฐุง ูููุฏ ูุชุฌูุจ ุงูููุงุฌุขุช ูู ุงูุงุฎุชุจุงุฑุงุช. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุฑุฏูุง ุนููAutoConfigureTestEntityManager</strong> <br>  ูุถูู ูุงุฆู <code>TestEntityManager</code> ุฎุงุตูุง ุฅูู <code>TestEntityManager</code> ุ ููู ุจุญุฏ ุฐุงุชู ูุญุด ูุซูุฑ ููุงูุชูุงู.  <code>EntityManager</code> ูู ุงููุฆุฉ ุงูุฑุฆูุณูุฉ ูู JPA ุ ุงููุณุคููุฉ ุนู ุฅุถุงูุฉ ููุงูุงุช ุฅูู ุงูุฌูุณุฉ ูุญุฐููุง ูุฃุดูุงุก ููุงุซูุฉ.  ููุท ุนูุฏูุง ูุชู ุชุดุบูู Hibernate ุ ุนูู ุณุจูู ุงููุซุงู - ูุง ูุนูู ุฅุถุงูุฉ ููุงู ุฅูู ุงูุฌูุณุฉ ุฃูู ุณูุชู ุชูููุฐ ุทูุจ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ููุง ูุนูู ุงูุชุญููู ูู ุฌูุณุฉ ุฃูู ุณูุชู ุชูููุฐ ุทูุจ ุชุญุฏูุฏ.  ูุธุฑูุง ููุขููุงุช ุงูุฏุงุฎููุฉ ูู Hibernate ุ ุณูุชู ุชูููุฐ ุนูููุงุช ุญููููุฉ ุจุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุงูููุช ุงูููุงุณุจ ุ ูุงูุชู ูุญุฏุฏูุง ุงูุฅุทุงุฑ ููุณู.  ูููู ูู ุงูุงุฎุชุจุงุฑุงุช ุ ูุฏ ูููู ูู ุงูุถุฑูุฑู ุฅุฑุณุงู ุดูุก ุจููุฉ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุฃู ุงูุบุฑุถ ูู ุงูุงุฎุชุจุงุฑุงุช ูู ุงุฎุชุจุงุฑ ุงูุชูุงูู.  ู <code>TestEntityManager</code> ูู ูุฌุฑุฏ ุงููุณุงุนุฏ ุงูุฐู ุณูุณุงุนุฏ ุจุนุถ ุงูุนูููุงุช ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุชู ุณูุชู ุชูููุฐูุง ุจุงูููุฉ - ุนูู ุณุจูู ุงููุซุงู ุ ุณูู <code>persistAndFlush()</code> ูุฑุถ ุฅุณุจุงุช ูุชูููุฐ ุฌููุน ุงูุทูุจุงุช. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุชุถููู ุงูุชุบุฑูุฏุฉ</strong> <br>  ูุฐุง ุงูุดุฑุญ ูุฌุนู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูู ุงููุนุงููุงุช ุงูุตููุฉ ุ ูุน ุงูุชุฑุงุฌุน ุงูุชููุงุฆู ูููุนุงููุฉ ุนูุฏ ุงูุงูุชูุงุก ูู ุงูุงุฎุชุจุงุฑ.  ูุฐู ูุฌุฑุฏ ุขููุฉ "ูุชูุธูู" ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจู ูู ุงุฎุชุจุงุฑ ุ ูุฃูู ูุฅูุง ูุณูุชุนูู ุนููู ุญุฐู ุงูุจูุงูุงุช ูุฏูููุง ูู ูู ุฌุฏูู. </p><br><blockquote style=";text-align:right;direction:rtl">  ูุง ุฅุฐุง ูุงู ุงูุงุฎุชุจุงุฑ ูุฌุจ ุฃู ูุฏูุฑ ูุนุงููุฉ ูุง ุ ููุฐุง ููุณ ุณุคุงููุง ุจุณูุทูุง ููุงุถุญูุง ููุง ูุฏ ูุจุฏู.  ุนูู ุงูุฑุบู ูู ุฑุงุญุฉ ุงูุญุงูุฉ "ุงููุธููุฉ" ููุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูููู ุฃู ูููู ูุฌูุฏ <code>@Transactional</code> ูู ุงูุงุฎุชุจุงุฑุงุช ููุงุฌุฃุฉ ุบูุฑ ุณุงุฑุฉ ุฅุฐุง ูู ูุจุฏุฃ ุฑูุฒ "ุงููุนุฑูุฉ" ูู ุงููุนุงููุฉ ุจููุณู ุ ููููู ูุชุทูุจ ูุฌูุฏูุง <code>@Transactional</code> .  ูููู ุฃู ูุคุฏู ูุฐุง ุฅูู ุญูููุฉ ุฃู ุงุฎุชุจุงุฑ ุงูุชูุงูู ููุฑ ุ ูููู ุนูุฏูุง ูุชู ุชูููุฐ ุงูููุฏ ุงูุญูููู ูู ูุญุฏุฉ ุงูุชุญูู ุ ูููุณ ูู ุงูุงุฎุชุจุงุฑ ุ ูู ูููู ููุฎุฏูุฉ ูุนุงููุฉ ูุดุทุฉ ูุณุชุชุฎูุต ุงูุทุฑููุฉ ูู ุฐูู.  ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ูุจุฏู ุฎุทูุฑูุง ุ ุฅูุง ุฃู ุงุฎุชุจุงุฑุงุช ุงููุนุงููุงุช ููุณุช ุณูุฆุฉ ููุบุงูุฉ ูุน ุงูุงุฎุชุจุงุฑุงุช ุนุงููุฉ ุงููุณุชูู ูุงุฎุชุจุงุฑุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู.  ูู ุชุฌุฑุจุชู ุ ุฑุฃูุช ูุฑุฉ ูุงุญุฏุฉ ููุท ุ ุนูุฏูุง ุชุนุทู ุงุฎุชุจุงุฑ ุงูุงูุฏูุงุฌ ุงููุงุฌุญ ุฑูุฒ ุงูุฅูุชุงุฌ ุ ุงูุฃูุฑ ุงูุฐู ุชุทูุจ ุจูุถูุญ ูุฌูุฏ ูุนุงููุฉ ููุฌูุฏุฉ.  ูููู ุฅุฐุง ููุช ูุง ุชุฒุงู ุจุญุงุฌุฉ ุฅูู ุงูุชุญูู ูู ุฃู ุงูุฎุฏูุงุช ูุงูููููุงุช ููุณูุง ุชุฏูุฑ ุงููุนุงููุงุช ุจุดูู ุตุญูุญ ุ ูููููู "ุญุธุฑ" ุงูุชุนููู ุงูุชูุถูุญู ุนูู <code>@Transactional</code> ูู ุงูุงุฎุชุจุงุฑ <code>@Transactional</code> ุงููุฑุบูุจ ููู (ุนูู ุณุจูู ุงููุซุงู ุ ูุง ุชุจุฏุฃ ุงููุนุงููุฉ). </blockquote><br><h1 id="integracionnyy-test-so-springboottest" style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุงูุชูุงูู ูุนSpringBootTest </h1><br><p style=";text-align:right;direction:rtl">  ุฃุฑูุฏ ุฃูุถูุง ุฃู <code>@DataJpaTest</code> ุฅูู ุฃู <code>@DataJpaTest</code> ููุณ ูุซุงููุง ูุฑูุฏูุง ุนูู ุงุฎุชุจุงุฑ ุงูุชูุงูู ุงูุจุคุฑู ุ ูููุงู <code>@WebMvcTest</code> ู <code>@DataMongoTest</code> ูุงูุนุฏูุฏ ุบูุฑูุง.  ูููู ูุจูู ุฃุญุฏ ุฃูู ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ ููุงุฎุชุจุงุฑ ูู <code>@SpringBootTest</code> ุ ุงูุฐู ูููู ุจุชุดุบูู ุงูุชุทุจูู <em>"ููุง ูู"</em> ููุงุฎุชุจุงุฑุงุช - ูุน ุฌููุน ุงูููููุงุช ูุงูุชูุงููุงุช ุงูุชู ุชู ุชูููููุง.  ูุทุฑุญ ุณุคุงู ููุทูู - ุฅุฐุง ูุงู ููููู ุชุดุบูู ุงูุชุทุจูู ุจุงููุงูู ุ ูููุงุฐุง ุงุฎุชุจุงุฑุงุช DataJpa ุงููุญูุฑูุฉ ุ ุนูู ุณุจูู ุงููุซุงูุ  ุฃูุฏ ุฃู ุฃููู ุฃูู ูุง ุชูุฌุฏ ููุงุนุฏ ุตุงุฑูุฉ ููุง ูุฑุฉ ุฃุฎุฑู. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู <em>ูู ุงููููู</em> ุชุดุบูู ุงูุชุทุจููุงุช ูู ูู ูุฑุฉ ุ ููู ุจุนุฒู ุงูุฃุนุทุงู ูู ุงูุงุฎุชุจุงุฑุงุช ุ ููุง ุชูุฑุท ูู ุงูุชุญููู ููุง ุชูู ุจุฅุนุงุฏุฉ ุฅุนุฏุงุฏ ุจุฑูุงูุฌ ุงูุฅุนุฏุงุฏ ููุงุฎุชุจุงุฑ ุ ุซู ููููู ุจุงูุทุจุน ุงุณุชุฎุฏุงูSpringBootTest. </p><br><p style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ูู ุงูุญูุงุฉ ุงููุงูุนูุฉ ุ ูููู ุฃู ุชุชุทูุจ ุงูุชุทุจููุงุช ุงูุนุฏูุฏ ูู ุงูุฅุนุฏุงุฏุงุช ุงููุฎุชููุฉ ุ ูุงูุงุชุตุงู ุจุฃูุธูุฉ ูุฎุชููุฉ ุ ููุง ุฃุฑูุฏ ุฃู ุชุณูุท ุงุฎุชุจุงุฑุงุช ุงููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุ ูุฃู  ูู ูุชู ุชูููู ุงูุงุชุตุงู ุฅูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฑุณุงุฆู.  ูุฐูู ุ ูู ุงูููู ุงุณุชุฎุฏุงู ุงููุทุฑุฉ ุงูุณูููุฉ ุ ูุฅุฐุง ููุช ุชุฑุบุจ ูู ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ูุน ุงูุชุนููู ุงูุชูุถูุญูSpringBootTest ููุนูู ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ููู ูุตู ุงููุธุงู - ูู ูู ุงูููุทูู ุฅุฐู ุนูู ุงูุฅุทูุงู ููSpringBootTestุ </p><br><h1 id="podgotovka-dannyh-dlya-testa" style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ุงูุจูุงูุงุช ููุงุฎุชุจุงุฑ </h1><br><p style=";text-align:right;direction:rtl">  ูุงุญุฏุฉ ูู ุงูููุงุท ุงูุฑุฆูุณูุฉ ููุงุฎุชุจุงุฑ ูู ุฅุนุฏุงุฏ ุงูุจูุงูุงุช.  ูุฌุจ ุฅุฌุฑุงุก ูู ุงุฎุชุจุงุฑ ุจูุนุฒู ุ ูุฅุนุฏุงุฏ ุงูุจูุฆุฉ ูุจู ุงูุจุฏุก ุ ูุจุฐูู ูุตู ุงููุธุงู ุฅูู ุญุงูุชู ุงูุฃุตููุฉ ุงููุทููุจุฉ.  ุงูุฎูุงุฑ ุงูุฃุณูู ููููุงู ุจุฐูู ูู ุงุณุชุฎุฏุงู ุงูุชุนูููุงุช ุงูุชูุถูุญูุฉ <code>@BeforeAll</code> / <code>@BeforeAll</code> ูุฅุถุงูุฉ ุฅุฏุฎุงูุงุช ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุงู ุจุงุณุชุฎุฏุงู ุงููุณุชูุฏุน ุฃู <code>TestEntityManager</code> ุฃู <code>TestEntityManager</code> .  ูููู ููุงู ุฎูุงุฑ ุขุฎุฑ ูุณูุญ ูู ุจุชุดุบูู ุจุฑูุงูุฌ ูุตู ููุนุฏ ุฃู ุชูููุฐ ุงุณุชุนูุงู SQL ุงููุทููุจ ุ ููู ุชุนููู ุชูุถูุญู <code>@Sql</code> .  ูุจู ุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑ ุ ุณูุนูู ุงุฎุชุจุงุฑ ุชูููุฏ ุงูุชูููุฏ ุชููุงุฆููุง ุนูู ุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู ุงููุญุฏุฏ ุ ููุง ููุบู ุงูุญุงุฌุฉ ุฅูู ุฅุถุงูุฉ <code>@BeforeAll</code> block ุ <code>@Transactional</code> ุงูุนูุงูุฉ <code>@Transactional</code> ุงูุจูุงูุงุช. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@DataJpaTest</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JpaCakeFinderTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String PROMOTED_CAKE = <span class="hljs-string"><span class="hljs-string">"Red Velvet"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String NON_PROMOTED_CAKE = <span class="hljs-string"><span class="hljs-string">"Victoria Sponge"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> CakeFinder finder; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> CakeRepository cakeRepository; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> TestEntityManager testEntityManager; <span class="hljs-meta"><span class="hljs-meta">@BeforeEach</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.testEntityManager.persistAndFlush(CakeEntity.builder().title(PROMOTED_CAKE) .sku(<span class="hljs-string"><span class="hljs-string">"SKU1"</span></span>).price(BigDecimal.TEN).promoted(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>).build()); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.testEntityManager.persistAndFlush(CakeEntity.builder().sku(<span class="hljs-string"><span class="hljs-string">"SKU2"</span></span>) .title(NON_PROMOTED_CAKE).price(BigDecimal.ONE).promoted(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>).build()); finder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JpaCakeFinder(cakeRepository); } ... }</code> </pre> <br><h1 id="red-green-refactor-cikl" style=";text-align:right;direction:rtl">  ุฏูุฑุฉ ุงูุฃุญูุฑ ูุงูุฃุฎุถุฑ ุฑููุงูุชูุฑ </h1><br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฑุบู ูู ูุฐุง ุงููุฏุฑ ูู ุงููุต ุ ุจุงููุณุจุฉ ูููุทูุฑ ุ ูุง ูุฒุงู ุงูุงุฎุชุจุงุฑ ูุจุฏู ูุตู ุฏุฑุงุณู ุจุณูุท ูุน ุงูุชุนููู ุงูุชูุถูุญูDataJpaTest ุ ููููู ุขูู ุฃู ุฃุชููู ูู ุฅุธูุงุฑ ููุฏุงุฑ ุงูุฃุดูุงุก ุงููููุฏุฉ ุงูุชู ุชุญุฏุซ ุชุญุช ุงูุบุทุงุก ุ ูุงูุชู ูุง ูุณุชุทูุน ุงููุทูุฑ ุงูุชูููุฑ ูููุง.  ุงูุขู ูููููุง ุงูุงูุชูุงู ุฅูู ุฏูุฑุฉ TDD ููุฐู ุงููุฑุฉ ุณุฃุนุฑุถ ุจุถุน ุชูุฑุงุฑุงุช TDD ุ ูุน ุฃูุซูุฉ ูุฅุนุงุฏุฉ ุงูุชุฌููุฒ ูุงูุญุฏ ุงูุฃุฏูู ูู ุงูููุฏ.  ูุฌุนูู ุฃูุซุฑ ูุถูุญูุง ุ ุฃูุตู ุจุดุฏุฉ ุฃู ุชูุธุฑ ุฅูู ุงูุณุฌู ูู ุฌูุช ุ ุญูุซ ูููู ูู ุงูุชุฒุงู ุฎุทูุฉ ูููุตูุฉ ููุงูุฉ ูุน ูุตู ููุง ูููู ูููู. </p><br><h2 id="podgotovka-dannyh" style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ุงูุจูุงูุงุช </h2><br><p style=";text-align:right;direction:rtl">  ูููููู ุงุณุชุฎุฏุงู ุงูููุฌ ูุน <code>@BeforeAll</code> / <code>@BeforeEach</code> ูุฅูุดุงุก ุฌููุน ุงูุณุฌูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฏูููุง.  ูุชู ููู ุงููุซุงู ูุน ุงูุชุนููู ุงูุชูุถูุญู <code>@Sql</code> ุฅูู ูุฆุฉ ูููุตูุฉ <code>JpaCakeFinderTestWithScriptSetup</code> ุ ููู ููุฑุฑ ุงูุงุฎุชุจุงุฑุงุช ุ ุงูุชู ุ ุจุงูุทุจุน ุ ูุง ููุจุบู ุฃู ุชููู ุ ูููุฌูุฏุฉ ูุบุฑุถ ูุญูุฏ ูู ุชูุถูุญ ุงูููุฌ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุญุงูุฉ ุงูุฃูููุฉ ูููุธุงู - ููุงู ุฅุฏุฎุงูุงู ูู ุงููุธุงู ุ ูุนูุฉ ูุงุญุฏุฉ ุชุดุงุฑู ูู ุงูุนุฑุถ ุงูุชุฑููุฌู ููุฌุจ ุชุถููููุง ูู ุงููุชูุฌุฉ ุงูุชู ูุชู ุฅุฑุฌุงุนูุง ุจูุงุณุทุฉ ุงูุทุฑููุฉ ุ ูุงูุซุงููุฉ - ูุง. </p><br><h2 id="pervyy-test-integracionnyy-test" style=";text-align:right;direction:rtl">  ุฃูู ุงุฎุชุจุงุฑ ุงูุชูุงูู ุงูุงุฎุชุจุงุฑ </h2><br><p style=";text-align:right;direction:rtl">  ุงูุงุฎุชุจุงุฑ ุงูุฃูู ูู ุฃุจุณุท - <code>findPromotedCakes</code> ูุฌุจ ุฃู ูุชุถูู ูุตูุง ูุณุนุฑ ุงููุนูุฉ ุงููุดุงุฑูุฉ ูู ุงูุนุฑุถ. </p><br><h3 id="red" style=";text-align:right;direction:rtl">  ุงุญูุฑ </h3><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldReturnPromotedCakes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Iterable&lt;Cake&gt; promotedCakes = finder.findPromotedCakes(); assertThat(promotedCakes).extracting(Cake::getTitle).contains(PROMOTED_CAKE); assertThat(promotedCakes).extracting(Cake::getPrice).contains(<span class="hljs-string"><span class="hljs-string">"ยฃ10.00"</span></span>); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุงุฎุชุจุงุฑ ุ ุจุงูุทุจุน ุ ุชุนุทู - ุฅุฑุฌุงุน ุงูุชุทุจูู ุงูุงูุชุฑุงุถู ูุฌููุนุฉ ูุงุฑุบุฉ. </p><br><h3 id="green" style=";text-align:right;direction:rtl">  ุงูุฃุฎุถุฑ </h3><br><p style=";text-align:right;direction:rtl">  ุจุทุจูุนุฉ ุงูุญุงู ุ ููุฏ ูุชุงุจุฉ ุงูุชุตููุฉ ุนูู ุงูููุฑ ุ ูุชูุฏูู ุทูุจ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุน <code>where</code> ูููู ุฌุฑุง.  ูููู ุจุนุฏ ููุงุฑุณุฉ TDD ุ ูุง ุจุฏ ูู ูู ูุชุงุจุฉ <em>ุงูุญุฏ ุงูุฃุฏูู ูู ุฑูุฒ ููุงุฎุชุจุงุฑ ูุงุฌุชูุงุฒ</em> .  ููุฐุง ุงูุฑูุฒ ุงูุญุฏ ุงูุฃุฏูู ูู ุฅุฑุฌุงุน ุฌููุน ุงูุณุฌูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ูุนู ุ ุจุณูุท ุฌุฏุง ููุฑูุญ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Set&lt;Cake&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findPromotedCakes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Spliterator&lt;CakeEntity&gt; cakes = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.cakeRepository.findAll() .spliterator(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> StreamSupport.stream(cakes, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>).map( cakeEntity -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cake(cakeEntity.title, formatPrice(cakeEntity.price))) .collect(Collectors.toSet()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">formatPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BigDecimal price)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"ยฃ"</span></span> + price.setScale(<span class="hljs-number"><span class="hljs-number">2</span></span>, RoundingMode.DOWN).toPlainString(); }</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  ุฑุจูุง ูุฌุงุฏู ุงูุจุนุถ ุจุฃูู ููููู ููุง ุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑ ุจุงูููู ุงูุฃุฎุถุฑ ุญุชู ุจุฏูู ูุฌูุฏ ูุงุนุฏุฉ - ููุท ูู ุจุชุตุญูุญ ุงููุชูุฌุฉ ุงููุชููุนุฉ ูู ุงูุงุฎุชุจุงุฑ.  ุฃุณูุน ุฃุญูุงููุง ูุซู ูุฐู ุงูุญุฌุฉ ุ ููููู ุฃุนุชูุฏ ุฃู ุงูุฌููุน ูููู ุฃู TDD ููุณ ุนููุฏุฉ ุฃู ุฏูุงูุฉ ุ ูููุณ ูู ุงูููุทูู ุฅูุตุงู ุฐูู ุฅูู ุญุฏ ุงูุนุจุซูุฉ.  ูููู ุฅุฐุง ููุช ุชุฑุบุจ ุญููุง ูู ุฐูู ุ ูููููู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฌุฑุงุก ุนูููุฉ ุนุดูุงุฆูุฉ ุนูู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุนูู ุงูุชุซุจูุช ุจุญูุซ ูุง ูุชู ุชุฑููุฒูุง. </blockquote><br><h3 id="refactor" style=";text-align:right;direction:rtl">  ุฑููุงูุชูุฑ </h3><br><p style=";text-align:right;direction:rtl">  ูุง ุฃุฑู ุงููุซูุฑ ูู ุฅุนุงุฏุฉ ุงูุจูุงุก ููุง ุ ูุฐูู ูููู ุชุฎุทู ูุฐู ุงููุฑุญูุฉ ููุฐุง ุงูุงุฎุชุจุงุฑ ุงููุญุฏุฏ.  ููููู ูุง ุฒูุช ูุง ุฃูุตู ุจุชุฌุงูู ูุฐู ุงููุฑุญูุฉ ุ ููู ุงูุฃูุถู ุงูุชููู ูุงูุชูููุฑ ูู ูู ูุฑุฉ ูู ุงูุญุงูุฉ "ุงูุฎุถุฑุงุก" ูููุธุงู - ูู ูู ุงููููู ุฅุนุงุฏุฉ ุชุดููู ุดูุก ูุฌุนูู ุฃูุถู ูุฃุณููุ </p><br><h2 id="vtoroy-test" style=";text-align:right;direction:rtl">  ุงูุงุฎุชุจุงุฑ ุงูุซุงูู </h2><br><p style=";text-align:right;direction:rtl">  ููู ุงูุงุฎุชุจุงุฑ ุงูุซุงูู ุณูู ูุชุญูู ุจุงููุนู ูู ุนุฏู ูุฌูุฏ ูุนูุฉ ุชูุช ุชุฑููุชูุง ุถูู ุงููุชูุฌุฉ ุงูุชู ูุชู ุฅุฑุฌุงุนูุง ุจูุงุณุทุฉ <code>findPromotedCakes</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldNotReturnNonPromotedCakes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Iterable&lt;Cake&gt; promotedCakes = finder.findPromotedCakes(); assertThat(promotedCakes).extracting(Cake::getTitle) .doesNotContain(NON_PROMOTED_CAKE); }</code> </pre> <br><h3 id="red-1" style=";text-align:right;direction:rtl">  ุงุญูุฑ </h3><br><p style=";text-align:right;direction:rtl">  ุงูุงุฎุชุจุงุฑ ุ ููุง ูู ูุชููุน ุ ุชุนุทู - ููุงู ุณุฌูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุฑูุฒ ุจุจุณุงุทุฉ ุฅุฑุฌุงุน ูู ูููู. </p><br><h3 id="green-1" style=";text-align:right;direction:rtl">  ุงูุฃุฎุถุฑ </h3><br><p style=";text-align:right;direction:rtl">  ููุฑุฉ ุฃุฎุฑู ููููู ุงูุชูููุฑ - ููุง ูู ุงูุญุฏ ุงูุฃุฏูู ููููุฏ ุงูุฐู ููููู ูุชุงุจุชู ูุงุฌุชูุงุฒ ุงูุงุฎุชุจุงุฑุ  ูุธุฑูุง ููุฌูุฏ ุฏูู ูุชุฌููุนู ุจุงููุนู ุ ููููู ุจุจุณุงุทุฉ ุฅุถุงูุฉ ูุชูุฉ <code>filter</code> ููุงู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Set&lt;Cake&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findPromotedCakes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Spliterator&lt;CakeEntity&gt; cakes = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.cakeRepository.findAll() .spliterator(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> StreamSupport.stream(cakes, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) .filter(cakeEntity -&gt; cakeEntity.promoted) .map(cakeEntity -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cake(cakeEntity.title, formatPrice(cakeEntity.price))) .collect(Collectors.toSet()); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุจุฅุนุงุฏุฉ ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช - ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู ุฃุตุจุญุช ุงูุขู ุฎุถุฑุงุก.  ููุฏ ุญุงู ูุญุธุฉ ูููุฉ - ูุธุฑูุง ููุฌูุน ุจูู ุงุฎุชุจุงุฑ ุงููุญุฏุฉ ููุญุฏุฉ ุงูุชุญูู ูุงุฎุชุจุงุฑ ุงูุชูุงูู ููุนูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ุฃุตุจุญุช ุงูููุฒุฉ ุฌุงูุฒุฉ - ูููุฑ ุงุฎุชุจุงุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุขู! </p><br><h3 id="refactor-1" style=";text-align:right;direction:rtl">  ุฑููุงูุชูุฑ </h3><br><p style=";text-align:right;direction:rtl">  ูุจูุง ุฃู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุฎุถุฑุงุก - ููุฏ ุญุงู ููุช ุฅุนุงุฏุฉ ุงูุชูุงุนู.  ุฃุนุชูุฏ ุฃูู ููุณุช ููุงู ุญุงุฌุฉ ูุชูุถูุญ ุฃู ุงูุชุตููุฉ ูู ุงูุฐุงูุฑุฉ ููุณุช ููุฑุฉ ุฌูุฏุฉ ุ ููู ุงูุฃูุถู ุงูููุงู ุจุฐูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.  ููููุงู ุจุฐูู ุ ุฃุถูุช ุทุฑููุฉ ุฌุฏูุฏุฉ ูู <code>CakesRepository</code> - <code>findByPromotedIsTrue</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CakeRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CrudRepository</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CakeEntity</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-function">Iterable&lt;CakeEntity&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findByPromotedIsTrue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุฐู ุงูุทุฑููุฉ ุ ูุงูุช Spring Data ุชููุงุฆููุง ุจุฅูุดุงุก ุทุฑููุฉ ูู ุดุฃููุง ุชูููุฐ ุงุณุชุนูุงู ูู ุงููููุฐุฌ <code>select from cakes where promoted = true</code> .  ุงูุฑุฃ ุงููุฒูุฏ ุญูู ุฅูุดุงุก ุงูุงุณุชุนูุงู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุซุงุฆู</a> Spring Data. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Set&lt;Cake&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findPromotedCakes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Spliterator&lt;CakeEntity&gt; cakes = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.cakeRepository.findByPromotedIsTrue() .spliterator(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> StreamSupport.stream(cakes, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>).map( cakeEntity -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cake(cakeEntity.title, formatPrice(cakeEntity.price))) .collect(Collectors.toSet()); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐุง ูุซุงู ุฌูุฏ ุนูู ุงููุฑููุฉ ุงูุชู ูููุฑูุง ุงุฎุชุจุงุฑ ุงูุชูุงูู ูููุฌ ุงูุตูุฏูู ุงูุฃุณูุฏ.  ุฅุฐุง ุชู ุชุฃููู ุงููุณุชูุฏุน ุ ููู ูููู ูู ุงููุณุชุญูู ุฅุถุงูุฉ ุทุฑููุฉ ุฌุฏูุฏุฉ ุฏูู ุชุบููุฑ ุงูุงุฎุชุจุงุฑุงุช. </p><br><h1 id="podklyuchenie-k-production-baze" style=";text-align:right;direction:rtl">  ุงุชุตุงู ุฅูู ูุงุนุฏุฉ ุงูุฅูุชุงุฌ </h1><br><p style=";text-align:right;direction:rtl">  ูุฅุถุงูุฉ ุงููููู ูู "ุงููุงูุนูุฉ" ูุฅุธูุงุฑ ููู ููููู ูุตู ุงูุชูููู ููุงุฎุชุจุงุฑุงุช ูุงูุชุทุจูู ุงูุฑุฆูุณู ุ ุณุฃุถูู ุชูููู ูุตูู ุฅูู ุงูุจูุงูุงุช ูุชุทุจูู "ุงูุฅูุชุงุฌ". </p><br><p style=";text-align:right;direction:rtl">  ุชุชู ุฅุถุงูุฉ ูู ุดูุก ุชูููุฏููุง ุจูุงุณุทุฉ ุงููุณู ุงูููุฌูุฏ ูู <code>application.yml</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">datasource: url: jdbc:h2:./data/cake-factory</code> </pre><br><p style=";text-align:right;direction:rtl">  ุณูุคุฏู ูุฐุง ุชููุงุฆููุง ุฅูู ุญูุธ ุงูุจูุงูุงุช ูู ูุธุงู ุงููููุงุช ุฅูู ูุฌูุฏ <code>./data</code> .  ุฃูุงุญุธ ุฃูู ูู ูุชู ุฅูุดุงุก ูุฐุง ุงููุฌูุฏ ูู ุงูุงุฎุชุจุงุฑุงุช - <code>@DataJpaTest</code> ุชููุงุฆููุง ูุญู ุงุชุตุงู ูุงุนุฏุฉ ุจูุงูุงุช ุงูููู ุจูุงุนุฏุฉ ุจูุงูุงุช ุนุดูุงุฆูุฉ ูู ุงูุฐุงูุฑุฉ ุจุณุจุจ ูุฌูุฏ ุชุนููู ุชูุถูุญู <code>@AutoConfigureTestDatabase</code> . </p><br><blockquote style=";text-align:right;direction:rtl">   ,    โ   <code>data.sql</code>  <code>schema.sql</code> .   , Spring Boot             .          ,   , ,    . </blockquote><br><h1 id="zaklyuchenie" style=";text-align:right;direction:rtl">  ุงูุฎุงุชูุฉ </h1><br><p style=";text-align:right;direction:rtl"> ,               ,    ,       TDD . </p><br><p style=";text-align:right;direction:rtl">      Spring Security โ                Spring,       . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar433958/">https://habr.com/ru/post/ar433958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar433946/index.html">ูุฑูุฉ ุงูุบุด ููุฐูุงุก ุงูุงุตุทูุงุนู - ุงูุชุฎูุต ูู ุงููุงุฆุถ ุ ูุชุนููู ุงูุดูุก ุงูุฑุฆูุณู. ุชูููุฉ ูุนุงูุฌุฉ ุชุณูุณู ุงูุชุฏุฑูุจ</a></li>
<li><a href="../ar433948/index.html">ููููุฉ ุฌุนู ุงูุฏูุน ุฃูุซุฑ ููุงุกูุฉ: ุชุฌุฑุจุฉ ูุฒูุฏ ุฎุฏูุฉ IaaS</a></li>
<li><a href="../ar433952/index.html">10 ุฃุณุจุงุจ ูุงุฎุชูุงุฑ ุญู SAP HANA ูู HPE. ุงูุฌุฒุก 2</a></li>
<li><a href="../ar433954/index.html">ุซูุงููุฉ ุชูููุงุช ุตูุชูุฉ ูุฃุฏูุงุช ุตูุชูุฉ ุณุชุฏุฎู ูุงุนุฉ ูุดุงููุฑ TECnology ูู ุนุงู 2019</a></li>
<li><a href="../ar433956/index.html">ุงุณุชุฎุฏู Modders AI ูุชุญุณูู ุงููููุณ ูู ุงูุฃูุนุงุจ</a></li>
<li><a href="../ar433964/index.html">ูุญุฏุงุช ECMAScript ูู Node.js: ุฎุทุฉ ุฌุฏูุฏุฉ</a></li>
<li><a href="../ar433966/index.html">ุจุทุงูุฉ ุนูุฏ ุงููููุงุฏ ูู ุงููุฑูุฎ. ุฃุธูุฑุช ููุงูุฉ ุงููุถุงุก ุงูุฃูุฑูุจูุฉ ุชุฑุงูููุง ูุจูุฑูุง ููุฌููุฏ ุนูู ุณุทุญ ุงููููุจ ุงูุฃุญูุฑ</a></li>
<li><a href="../ar433968/index.html">ูุนุจุฉ ุงูุชูุงุตู ุงูุฃูุซุฑ ุชุฏููุฑุง</a></li>
<li><a href="../ar433972/index.html">HolyJS 2018 ููุณูู ูู ุฎูุงู ุนููู ุงููุดุงุฑู</a></li>
<li><a href="../ar433974/index.html">Chatbot ูุญุตู ุนูู ุงูุณูุน ุ ุฃู ูุนุงูุงุฉ ุงูููุงุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>