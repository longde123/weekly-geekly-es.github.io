<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüíª ü¶ñ ü§§ Presentamos Python para camaradas que superan el "lenguaje A vs. V" lenguaje B "y otros prejuicios üèπ üåÉ üôÜüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Para todos los residentes de Habrach que tienen la sensaci√≥n de deja vu: el art√≠culo "Introducci√≥n a Python" me inst√≥ a escribir esta publicaci√≥n y co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Presentamos Python para camaradas que superan el "lenguaje A vs. V" lenguaje B "y otros prejuicios</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450724/"><p>  Para todos los residentes de Habrach que tienen la sensaci√≥n de deja vu: el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Introducci√≥n a Python"</a> me inst√≥ a escribir esta publicaci√≥n y comentarla.  Desafortunadamente, la calidad de este ejem de "introducci√≥n" ... no hablemos de cosas tristes.  Pero fue a√∫n m√°s triste observar disputas en los comentarios, de la categor√≠a "C ++ es m√°s r√°pido que Python", "Rust es a√∫n m√°s r√°pido que C ++", "Python no es necesario", etc.  ¬°Es sorprendente que no recordaran a Ruby! </p><br><p>  Como dijo Bjarn Stroustrup: </p><br><blockquote>  "Solo hay dos tipos de lenguajes de programaci√≥n: los que la gente jura todo el tiempo y los que nadie usa". </blockquote><p>  ¬°Bienvenido a todos los que deseen familiarizarse con Python sin caer en maldiciones sucias! </p><a name="habracut"></a><br><p> La ma√±ana en las monta√±as del C√°ucaso Oriental estuvo marcada por gritos.  Dos j√≥venes se sentaron en una gran roca y discutieron vigorosamente sobre algo, haciendo un gesto activo.  Un minuto despu√©s, comenzaron a empujarse entre s√≠, y luego lucharon y cayeron de una roca en (como result√≥) un arbusto de ortiga.  Aparentemente, este arbusto creci√≥ all√≠ por una raz√≥n: inmediatamente apacigu√≥ a los luchadores y trajo una tregua a su insaciable disputa.  Como probablemente habr√°s adivinado, yo fui uno de los debatientes, el otro fue mi mejor amigo (¬°hola, Quaker_t!), Pero el tema de nuestra peque√±a charla fue <strong>Visual Basic vs.</strong>  <strong>Delphi</strong> ! </p><br><p>  ¬øTe reconoces a ti mismo?  ¬°A veces convertimos nuestros lenguajes de programaci√≥n favoritos en un culto y estamos listos para defenderlo hasta el final!  Pero pasan los a√±os y llega el momento en que "A vs. B" del tema de las disputas se convierte en "Me siento m√°s c√≥modo trabajando con A, pero si es necesario aprender√© a trabajar con B, C, D, E <em>y, en general, con cualquier cosa</em> ".  Eso es solo cuando nos encontramos con nuevos lenguajes de programaci√≥n, los viejos h√°bitos y la cultura pueden no dejarnos ir por mucho tiempo. </p><br><p>  Me gustar√≠a presentarle Python y ayudarlo a transferir su experiencia a una nueva direcci√≥n.  Como cualquier tecnolog√≠a, tiene sus propias fortalezas y debilidades.  Python, como C ++, Rust, Ruby, JS y todos los dem√°s, es una herramienta.  Se adjuntan instrucciones a cualquier instrumento y debe aprender a usar cualquier instrumento <em>correctamente</em> . </p><br><p>  "Autor, no tienes cerebro, ¬øibas a presentarnos a Python?"  ¬°Vamos a conocernos! </p><br><p>  Python es un lenguaje de programaci√≥n din√°mico y de alto nivel para prop√≥sitos generales.  Python es un lenguaje de programaci√≥n <strong>maduro</strong> con un rico ecosistema y tradici√≥n.  Aunque el lenguaje fue lanzado en 1991, su aspecto moderno comenz√≥ a tomar forma a principios de la d√©cada de 2000.  Python es un lenguaje <strong>cargado</strong> , en su biblioteca est√°ndar hay soluciones para muchas ocasiones.  Python es un lenguaje de programaci√≥n <strong>popular</strong> : Dropbox, Reddit, Instagram, Disqus, YouTube, Netflix, maldita sea, incluso Eve Online y muchos otros usan Python activamente. </p><br><p>  ¬øCu√°l es la raz√≥n de esta popularidad?  Con su permiso, presentar√© mi propia versi√≥n. </p><br><p>  Python es un lenguaje de programaci√≥n <strong>simple</strong> .  Escritura din√°mica  Recolector de basura.  Funciones de orden superior.  Sintaxis simple para trabajar con diccionarios, conjuntos, tuplas y listas (incluso para obtener rebanadas).  Python es ideal para principiantes: permite comenzar con la programaci√≥n de procedimientos, cambiar lentamente a OOP y probar la programaci√≥n funcional.  Pero esta simplicidad es como la punta de un iceberg.  Vale la pena sumergirse en las profundidades cuando se encuentra con la filosof√≠a de Python: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Zen Of Python</a> .  Sum√©rgete a√∫n m√°s, y te encontrar√°s en un conjunto de reglas claras para el dise√±o de c√≥digos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Gu√≠a de estilo para Python Code</a> .  Buceo, el programador profundiza gradualmente en el concepto de "Python way" o "Pythonic".  En esta sorprendente etapa de aprendizaje de idiomas, comienzas a entender por qu√© los buenos programas de Python se escriben de esta manera y no de otra manera.  Por qu√© el lenguaje ha evolucionado en esta direcci√≥n, y no en otra.  Python no tuvo √©xito en la velocidad.  Pero tuvo √©xito en el aspecto m√°s importante de nuestro trabajo: la legibilidad.  "Escribir c√≥digo para personas, no para autom√≥viles": esta es la base de los conceptos b√°sicos de Python. </p><br><p>  Un buen c√≥digo de Python se ve hermoso.  Y para escribir un c√≥digo hermoso, ¬øqu√© no es una ocupaci√≥n agradable? </p><br><p>  <strong>Consejo 0:</strong> <em>Antes de seguir leyendo, eche un vistazo a una esquina de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Zen Python</a> .</em>  <em>El lenguaje se basa en estos postulados y nuestra comunicaci√≥n ser√° mucho m√°s agradable si est√° familiarizado con ellos.</em> </p><br><h3 id="kakoy-umnik-dodumalsya-do-otstupov">  ¬øA qu√© hombre inteligente se le ocurri√≥ la sangr√≠a? </h3><br><p>  El primer shock para aquellos que nunca han visto el c√≥digo en Python es la sangr√≠a del cuerpo de instrucciones: </p><br><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> ins = input(<span class="hljs-string"><span class="hljs-string">'Please say something'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ins.split(<span class="hljs-string"><span class="hljs-string">' '</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> w == <span class="hljs-string"><span class="hljs-string">'hello'</span></span>: print(<span class="hljs-string"><span class="hljs-string">'world!'</span></span>)</code> </pre> <br><p>  Recuerdo las noches en el albergue del Polit√©cnico de San Petersburgo cuando mi vecino, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">VlK</a> , con ojos ardientes me dijo que hab√≠a descubierto algo nuevo en Python.  "¬øCuerpo de indentaci√≥n? ¬øEn serio?"  - Fue mi reacci√≥n.  De hecho, para una persona que pas√≥ de Visual Basic ( <code>if ... end if</code> ) a C # (llaves) a trav√©s de C, C ++ y Java, este enfoque parec√≠a, por decirlo suavemente, extra√±o.  "¬øEst√° formateando el c√≥digo con sangr√≠a?", Pregunt√≥ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">VlK</a> .  Por supuesto que lo formate√©.  M√°s precisamente, el espiral Studio Visual lo hizo por m√≠.  Ella lo hizo muy bien.  Nunca pens√© en formatear y sangrar: aparecieron en el c√≥digo por s√≠ mismos y parec√≠an ser algo ordinario y familiar.  Pero no hab√≠a nada que ocultar: el c√≥digo siempre estaba formateado con sangr√≠a.  "Entonces, ¬øpor qu√© necesitas llaves? Si el cuerpo de las instrucciones se desplaza hacia la derecha?" </p><br><p>  Esa noche me sent√© con Python.  Mirando hacia atr√°s, puedo decir con certeza qu√© ayud√≥ exactamente a absorber r√°pidamente el material nuevo.  Era un editor de c√≥digo.  Influenciado por el mismo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">VlK</a> , poco antes de los eventos descritos anteriormente, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">cambi√©</a> de Windows a Ubuntu y Emacs como editor (en el patio de 2007, a PyCharm, Atom, VS Code y otros, muchos a√±os m√°s).  "Bueno, ahora Emacs PR ..." - usted dice.  Solo un poco :) Tradicionalmente, la tecla <code>&lt;tab&gt;</code> en Emacs no agrega pesta√±as, pero sirve para alinear la l√≠nea de acuerdo con las reglas de este modo.  Presion√≥ <code>&lt;tab&gt;</code> - y la l√≠nea de c√≥digo se desplaz√≥ a la siguiente posici√≥n apropiada: </p><br><p><img src="https://habrastorage.org/webt/p_/8g/jm/p_8gjmuqid2ffw7ixile3wkjz74.gif"></p><br><p>  De esta manera, nunca tendr√° que pensar si aline√≥ el c√≥digo correctamente. </p><br><p>  <strong>Consejo 1:</strong> <em>Cuando conozca Python, use un editor que se encargue de la sangr√≠a.</em> </p><br><p>  ¬øSabes qu√© efecto secundario tiene toda esta desgracia?  El programador intenta evitar construcciones largas.  Tan pronto como el tama√±o de la funci√≥n va m√°s all√° de los bordes verticales de la pantalla, se hace m√°s dif√≠cil distinguir a qu√© dise√±o pertenece el bloque de c√≥digo dado.  Y cuantas m√°s inversiones, m√°s dif√≠cil.  Como resultado, intenta escribir de la manera m√°s concisa posible, separando los cuerpos largos de funciones, bucles, transiciones condicionales, etc. </p><br><h3 id="da-nu-vashu-dinamicheskuyu-tipizaciyu">  Oh bueno tu escritura din√°mica </h3><br><p>  ¬°Oh, esta discusi√≥n existe casi mientras exista el concepto de "programaci√≥n"!  La escritura din√°mica no es mala ni buena.  La escritura din√°mica tambi√©n es nuestra herramienta.  En Python, la escritura din√°mica proporciona una tremenda libertad de acci√≥n.  Y donde hay una mayor libertad de acci√≥n, es m√°s probable que te dispares en el pie. </p><br><p>  Vale la pena aclarar que escribir en Python es <strong>estricto</strong> y agregar un n√∫mero a una cadena no funciona: </p><br><pre> <code class="python hljs"><span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-string"><span class="hljs-string">'1'</span></span> &gt;&gt;&gt; TypeError: unsupported operand type(s) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> +: <span class="hljs-string"><span class="hljs-string">'int'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-string"><span class="hljs-string">'str'</span></span></code> </pre> <br><p>  Python tambi√©n verifica la firma de la funci√≥n cuando se llama y lanzar√° una excepci√≥n si la firma de la llamada no es verdadera: </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y sum(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>) &gt;&gt;&gt; TypeError: sum() takes <span class="hljs-number"><span class="hljs-number">2</span></span> positional arguments but <span class="hljs-number"><span class="hljs-number">3</span></span> were given</code> </pre> <br><p>  Pero al cargar un script, Python no le dir√° que la funci√≥n espera un n√∫mero y no una cadena que le pase.  Y solo lo aprendes en tiempo de ejecuci√≥n: </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y sum(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'10'</span></span>) &gt;&gt;&gt; TypeError: can only concatenate str (<span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-string"><span class="hljs-string">"int"</span></span>) to str</code> </pre> <br><p>  Cuanto m√°s fuerte es el desaf√≠o para el programador, <em>especialmente al escribir proyectos grandes</em> .  Modern Python ha respondido a este desaf√≠o con un motor de anotaci√≥n y una biblioteca de tipos, y la comunidad ha desarrollado programas que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">realizan la verificaci√≥n de tipos est√°ticos</a> .  Como resultado, el programador se entera de tales errores antes de ejecutar el programa: </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># main.py: def sum(x: int, y: int) -&gt; int: return x + y sum(10, '10') $ mypy main.py tmp.py:5: error: Argument 2 to "sum" has incompatible type "str"; expected "int"</span></span></code> </pre> <br><p>  Python no otorga ninguna importancia a las anotaciones, aunque las almacena en el atributo <code>__annotations__</code> .  La √∫nica condici√≥n es que las anotaciones deben ser valores v√°lidos en t√©rminos de lenguaje.  Desde su aparici√≥n en la versi√≥n 3.0 (¬°que fue hace m√°s de diez a√±os!), Fueron los esfuerzos de la comunidad los que comenzaron a usar anotaciones para el marcado tipeado de variables y argumentos. </p><br><div class="spoiler">  <b class="spoiler_title">Otro ejemplo, m√°s complicado.</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#      , :   :) from typing import TypeVar, Iterable Num = TypeVar('Num', int, float) def sum(items: Iterable[Num]) -&gt; Num: accum = 0 for item in items: accum += item return accum sum([1, 2, 3]) &gt;&gt;&gt; 6</span></span></code> </pre> </div></div><br><p>  <strong>Consejo 2:</strong> <em>en la pr√°ctica, la mayor√≠a de los tipos din√°micos causan problemas al leer y depurar c√≥digo.</em>  <em>Especialmente si este c√≥digo se escribi√≥ sin anotaciones y tiene que pasar mucho tiempo descubriendo los tipos de variables.</em>  <em>¬°No tiene que indicar y documentar los tipos de todo y todo, pero el tiempo dedicado a una descripci√≥n detallada de las interfaces p√∫blicas y las secciones m√°s cr√≠ticas del c√≥digo se recompensar√° por cien!</em> </p><br><h3 id="krya-utinaya-tipizaciya">  Quack!  Pato escribiendo </h3><br><p>  A veces, los entusiastas de Python fingen ser misteriosos y hablan sobre "Mecanograf√≠a pato". <br>  La escritura de pato es el uso de la prueba de pato en la programaci√≥n: </p><br><blockquote>  Si un objeto grazna como un pato, vuela como un pato y camina como un pato, entonces lo m√°s probable es que sea un pato. </blockquote><p>  Considere un ejemplo: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RpgCharacter</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, weapon)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">self</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">weapon</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">weapon</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">battle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.weapon.attack()</code> </pre> <br><p>  Aqu√≠ est√° la inyecci√≥n de dependencia cl√°sica.  La clase <code>RpgCharacter</code> recibe el objeto de <code>weapon</code> en el constructor y m√°s tarde, en el m√©todo <code>battle()</code> , llama a <code>weapon.attack()</code> .  Pero <code>RpgCharacter</code> no depende de la implementaci√≥n espec√≠fica del <code>weapon</code> .  Puede ser una espada, un BFG 9000 o una ballena con una maceta, lista para aterrizar en la cabeza del enemigo en cualquier momento.  Es importante que el objeto tenga un m√©todo de <code>attack()</code> , Python no est√° interesado en todo lo dem√°s. </p><br><p></p><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img width="400" src="https://habrastorage.org/webt/l8/ld/yz/l8ldyzcgtvlj3ifvbpnswr2k7ws.png"></a> </div><p></p><br><p>  Estrictamente hablando, la escritura de patos no es √∫nica.  Est√° presente en todos los lenguajes din√°micos (familiares para m√≠) que implementan OOP. </p><br><p>  Este es otro ejemplo de c√≥mo programar cuidadosamente en el mundo de la escritura din√°mica.  M√©todo mal nombrado?  Ambiguamente llamado una variable?  Su colega, o usted mismo, despu√©s de aproximadamente medio a√±o, estar√° feliz de descifrar dicho c√≥digo :) </p><br><div class="spoiler">  <b class="spoiler_title">¬øQu√© pasar√≠a si utilizamos Java condicional?</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IWeapon</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attack</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sword</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IWeapon</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attack</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//... } } public class RpgCharacter { IWeapon weapon; public RpgCharacter(IWeapon weapon) { this.weapon = weapon; } public void battle() { weapon.attack(); } }</span></span></code> </pre> <br><p>  Y habr√≠a una tipificaci√≥n est√°tica cl√°sica, con verificaci√≥n de tipo en la etapa de compilaci√≥n.  Precio: la incapacidad de usar un objeto que tiene un m√©todo de <code>attack()</code> , pero no implementa expl√≠citamente la interfaz <code>IWeapon</code> . </p></div></div><br><p>  <strong>Consejo 3</strong> : <em>si lo desea, puede describir la interfaz creando su propia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clase abstracta con m√©todos y propiedades</a> .</em>  <em>Mejor a√∫n, pase tiempo probando y escribiendo documentaci√≥n para usted y sus usuarios de c√≥digo.</em> </p><br><h3 id="procedurnyy-podhod-i-__specialnye_metody__">  Enfoque de procedimiento y __ m√©todos_ especiales __ () </h3><br><p>  Python es un lenguaje orientado a objetos y la clase de <code>object</code> est√° en la ra√≠z de la jerarqu√≠a de herencia: </p><br><pre> <code class="python hljs">isinstance(<span class="hljs-string"><span class="hljs-string">'abc'</span></span>, object) &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> isinstance(<span class="hljs-number"><span class="hljs-number">10</span></span>, object) &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre> <br><p>  Pero donde se <code>obj.ToString()</code> en Java y C #, habr√° una llamada a <code>str(obj)</code> en Python.  O, por ejemplo, en lugar de <code>myList.length</code> , Python tendr√° <code>len(my_list)</code> .  El creador del lenguaje, Guido van Rossum, explic√≥ esto de la siguiente manera: </p><br><blockquote>  Cuando leo el c√≥digo que dice <code>len(x)</code> , s√© que se solicita la longitud de algo.  Esto inmediatamente me dice que el resultado ser√° un n√∫mero entero, y el argumento es alg√∫n tipo de contenedor.  Por el contrario, cuando leo <code>x.len()</code> , necesito saber que <code>x</code> es alg√∫n tipo de contenedor que implementa una interfaz espec√≠fica o hereda de una clase que tiene el m√©todo <code>len()</code> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[Fuente]</a> </blockquote><p>  Sin embargo, dentro de s√≠ mismo, las funciones <code>len()</code> , <code>str()</code> y algunas otras invocar√°n <strong>ciertos</strong> m√©todos del objeto: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, name, last_name)</span></span></span><span class="hljs-function">:</span></span> self.name = name self.last_name = last_name <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__str__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">f"Honourable </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{self.name}</span></span></span><span class="hljs-string"> </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{self.last_name}</span></span></span><span class="hljs-string">"</span></span> u = User(<span class="hljs-string"><span class="hljs-string">'Alex'</span></span>, <span class="hljs-string"><span class="hljs-string">'Black'</span></span>) label = str(u) print(label) &gt;&gt;&gt; Honourable Alex Black</code> </pre> <br><p>  Los operadores de lenguaje, tanto matem√°ticos como booleanos, tambi√©n usan m√©todos especiales, as√≠ como <code>for ... in ...</code> operadores de bucle, <code>with</code> operador de contexto, operador de √≠ndice <code>[]</code> , etc. <br>  Por ejemplo, un protocolo iterador consta de dos m√©todos: <code>__iter__()</code> y <code>__next__()</code> : </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#  Iterable, IEnumerable, std::iterator  .. class InfinitePositiveIntegers: def __init__(self): self.counter = 0 def __iter__(self): """      .    iter(). """ return self def __next__(self): """  .    next(). """ self.counter += 1 return self.counter for i in InfinitePositiveIntegers(): print(i) &gt;&gt;&gt; 1 &gt;&gt;&gt; 2 &gt;&gt;&gt; ... #  ,  Ctrl + C</span></span></code> </pre> <br><p>  Bueno, digamos m√©todos especiales.  ¬øPero por qu√© se ven tan retorcidos?  Guido explic√≥ esto por el hecho de que ten√≠an los nombres habituales sin subrayar, los programadores mismos no los redefinir√≠an, al menos tarde o temprano.  Es decir  <code>____()</code> es un tipo de protecci√≥n contra el tonto.  Como ha demostrado el tiempo, la protecci√≥n es efectiva :) </p><br><p>  <strong>Consejo 4:</strong> <em>Observe de cerca las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">funciones integradas</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">los m√©todos de objetos especiales</a> .</em>  <em>Son una parte integral del lenguaje, sin el cual es imposible hablarlo completamente.</em> </p><br><h3 id="gde-inkapsulyaciya-gde-moy-private-gde-moya-skazochka">  ¬øD√≥nde est√° la encapsulaci√≥n?  ¬øD√≥nde est√° mi privado?  ¬øD√≥nde est√° mi cuento de hadas? </h3><br><p>  Python no tiene modificadores de acceso para los atributos de clase.  Los interiores de los objetos est√°n abiertos para acceder sin restricciones.  Sin embargo, existe una convenci√≥n seg√∫n la cual los atributos con el prefijo <code>_</code> se consideran privados, por ejemplo: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyFile</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#    _os_handle = None def __init__(self, path: str): self._open(path) #    def _open(self, path): # os.open() - **    . #      open(). #   os.open()    . self._os_handle = os.open(path, os.O_RDWR | os.O_CREAT) #      def close(self): if self._os_handle is not None: os.close(self._os_handle) f = MyFile('/tmp/file.txt') print(f._os_handle) #    ""    ! f.close()</span></span></code> </pre> <br><p>  Por qu√© </p><br><blockquote>  No hay nada privado en Python.  Ni la clase ni su instancia te ocultar√°n lo que hay dentro (gracias a lo cual es posible la introspecci√≥n m√°s profunda).  Python conf√≠a en ti.  √âl dice: "Amigo, si quieres hurgar en rincones oscuros, no hay problema. Creo que hay buenas razones para esto y espero que no rompas nada. <br><br>  Al final, todos somos adultos aqu√≠. <br><br>  - Karl Fast <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">[Fuente]</a> . </blockquote><br><div class="spoiler">  <b class="spoiler_title">Pero, ¬øc√≥mo evitar las colisiones de nombres durante la herencia?</b> <div class="spoiler_text"><p>  ¬°Python tiene un mecanismo especial para destrozar el nombre de los atributos que comienzan con un gui√≥n bajo doble y no terminan con un gui√≥n bajo doble ( <code>__my_attr</code> )!  Esto se hace para evitar colisiones de nombres durante la herencia.  Para llamar a los m√©todos de clase fuera del cuerpo, Python agrega el prefijo <code>___</code> .  Pero para el acceso interno, nada cambia: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.__x = <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.__x c = C() c.__x &gt;&gt;&gt; <span class="hljs-string"><span class="hljs-string">'C'</span></span> object has no attribute <span class="hljs-string"><span class="hljs-string">'__x'</span></span> print(c.get_x()) &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">10</span></span> print(c._C__x) &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br><p>  Veamos una aplicaci√≥n pr√°ctica.  Por ejemplo, para la clase <code>File</code> , que lee archivos del sistema de archivos local, queremos agregar capacidades de almacenamiento en cach√©.  Nuestro colega logr√≥ escribir una clase mixin para estos fines.  Pero para aislar m√©todos y atributos de <strong>posibles</strong> conflictos, un colega agreg√≥ el prefijo <code>__</code> a sus nombres: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseFile</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, path)</span></span></span><span class="hljs-function">:</span></span> self.path = path <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocalMixin</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read_from_local</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(self.path) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> f.read() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CachedMixin</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CacheMissError</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Exception)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># Tepe,         #   __cache,   __from_cache(), # ,     ! self.__cache = {} def __from_cache(self): return self.__cache[self.path] def read_from_cache(self): try: return self.__from_cache() except KeyError as e: raise self.CacheMissError() from e def store_to_cache(self, data): self.__cache[self.path] = data class File(CachedMixin, LocalMixin, BaseFile): def __init__(self, path): CachedMixin.__init__(self) BaseFile.__init__(self, path) def read(self): try: return self.read_from_cache() except CachedMixin.CacheMissError: data = self.read_from_local() self.store_to_cache(data) return data</span></span></code> </pre> <br><p>  Si est√° interesado en ver la implementaci√≥n de este mecanismo en CPython, por favor, en <a href="">Python / compile.c</a> </p></div></div><br><p>  Finalmente, debido a la presencia de propiedades en el lenguaje, no tiene sentido escribir getters y setters en el estilo Java: <code>getX(), setX()</code> .  Por ejemplo, en la clase originalmente escrita <code>Coordinates</code> , </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinates</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, x, y)</span></span></span><span class="hljs-function">:</span></span> self.x = x self.y = y c = Coordinates(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>) print(cx, cy) &gt;&gt;&gt; (<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)</code> </pre> <br><p>  Necesitaba controlar el acceso al atributo <code>x</code> .  El enfoque correcto ser√≠a reemplazarlo con <code>property</code> , manteniendo as√≠ un contrato con el mundo exterior. </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Coordinates</span></span></span><span class="hljs-class">:</span></span> _x = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, x, y)</span></span></span><span class="hljs-function">:</span></span> self.x = x self.y = y @property <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self._x @x.setter <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, val)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> val &gt; <span class="hljs-number"><span class="hljs-number">10</span></span>: self._x = val <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> ValueError(<span class="hljs-string"><span class="hljs-string">'x should be greater than 10'</span></span>) c = Coordinates(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>) cx = <span class="hljs-number"><span class="hljs-number">5</span></span> &gt;&gt;&gt; ValueError: x should be greater than <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br><p>  <strong>Consejo 5:</strong> <em>Al igual que en Python, el concepto de campos privados y m√©todos de clase se basa en una convenci√≥n establecida.</em>  <em>No se ofenda por los autores de las bibliotecas si "todo ha dejado de funcionar" por el hecho de que ha utilizado activamente los campos privados de sus clases.</em>  <em>Al final, todos somos adultos aqu√≠ :)</em> . </p><br><h3 id="nemnogo-ob-isklyucheniyah">  Un poco sobre excepciones </h3><br><p>  La cultura Python tiene un enfoque √∫nico para las excepciones.  Adem√°s de la intercepci√≥n y el procesamiento habituales a la C ++ / Java, encontrar√° el uso de excepciones en el contexto </p><br><blockquote>  "Es m√°s f√°cil pedir perd√≥n que un permiso: EAFP". </blockquote><p>  Parafraseando, no escriba demasiado <code>if</code> , en la mayor√≠a de los casos, la ejecuci√≥n se realizar√° en esta rama.  En cambio, envuelva la l√≥gica en <code>try..except</code> . </p><br><p>  Ejemplo: imagine un controlador de solicitud POST que crea un usuario en una base de datos condicional.  En la entrada de la funci√≥n hay un diccionario (diccionario) de tipo clave-valor: </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_user_handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data: Dict[str, str])</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: database.user.persist( username=data[<span class="hljs-string"><span class="hljs-string">'username'</span></span>], password=data[<span class="hljs-string"><span class="hljs-string">'password'</span></span>] ) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> KeyError: print(<span class="hljs-string"><span class="hljs-string">'There was a missing field in data passed for user creation'</span></span>)</code> </pre> <br><p>  No contaminamos el c√≥digo con verificaciones "si el <code>username</code> o la <code>password</code> est√°n contenidos en los <code>data</code> ".  Esperamos que probablemente est√©n all√≠.  No pedimos "permiso" para usar estos campos, sino que nos "disculpamos" cuando el pr√≥ximo kulhacker publica un formulario con datos faltantes. </p><br><div class="spoiler">  <b class="spoiler_title">¬°Simplemente no lo lleves al punto del absurdo!</b> <div class="spoiler_text"><p>  Por ejemplo, le gustar√≠a comprobar si el apellido del usuario est√° presente en los datos y, si no, establecerlo en un valor vac√≠o.  <code>if</code> aqu√≠ fuera mucho m√°s apropiado: </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_user_handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">'last_name'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data: data[<span class="hljs-string"><span class="hljs-string">'last_name'</span></span>] = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: database.user.persist( username=data[<span class="hljs-string"><span class="hljs-string">'username'</span></span>], password=data[<span class="hljs-string"><span class="hljs-string">'password'</span></span>], last_name=data[<span class="hljs-string"><span class="hljs-string">'last_name'</span></span>] ) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> KeyError: print(<span class="hljs-string"><span class="hljs-string">'There was a missing field in data passed for user creation'</span></span>)</code> </pre> </div></div><br><p>  <strong>Los errores nunca deben pasar en silencio.</strong>  ¬°No ignore las excepciones!  Modern Python tiene un <code>raise from</code> maravilloso <code>raise from</code> construcci√≥n que le permite mantener el contexto de la cadena de excepci√≥n.  Por ejemplo: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyProductError</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Exception)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> super().__init__(<span class="hljs-string"><span class="hljs-string">'There has been a terrible product error'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> / x <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> ZeroDivisionError <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> e: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> MyProductError() <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> e</code> </pre> <br><p>  Sin <code>raise from e</code> cadena de excepci√≥n se rompe en <code>MyProductError</code> y no podemos averiguar cu√°l fue exactamente la causa de este error.  Con el <code>raise from X</code> , la raz√≥n (es decir, <code>X</code> ) de la excepci√≥n lanzada se almacena en el atributo <code>__cause__</code> : </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: calculate(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> MyProductError <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> e: print(e.__cause__) &gt;&gt;&gt; division by zero</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Pero hay un peque√±o matiz en el caso de la iteraci√≥n: StopIteration</b> <div class="spoiler_text"><p>  En el caso de una iteraci√≥n, lanzar una excepci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">StopIteration</a> es la forma oficial de indicar que el iterador est√° completo. </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PositiveIntegers</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, limit)</span></span></span><span class="hljs-function">:</span></span> self.counter = <span class="hljs-number"><span class="hljs-number">0</span></span> self.limit = limit <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__iter__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__next__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.counter += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.counter == self.limit: <span class="hljs-comment"><span class="hljs-comment">#  hasNext()  moveNext(), #  ,   raise StopIteration() return self.counter for i in PositiveIntegers(5): print(i) &gt; 1 &gt; 2 &gt; 3 &gt; 4</span></span></code> </pre> </div></div><br><p>  <strong>Consejo 6:</strong> <em>Pagamos el manejo de excepciones solo en situaciones excepcionales.</em>  <em>¬°No los descuides!</em> </p><br><h3 id="there-should-be-one---and-preferably-only-one---obvious-way-to-do-it">  Debe haber uno, y preferiblemente solo uno, la forma anterior de hacerlo. </h3><br><p>  <code>switch</code> o coincidencia de patrones?  - use <code>if</code> y diccionarios.  <code>do-</code> ?  - Para esto hay un <code>while</code> y <code>for</code> .  <code>goto</code> ?  Creo que t√∫ mismo lo has adivinado.  Lo mismo se aplica a algunas t√©cnicas de dise√±o y patrones que parecen darse por sentado en otros idiomas.  Lo m√°s sorprendente es que no hay restricciones t√©cnicas en su implementaci√≥n, es solo "no lo aceptamos". </p><br><p>  Por ejemplo, en Python no suele ver el patr√≥n "Generador".  En cambio, utiliza la capacidad de pasar y solicitar expl√≠citamente argumentos de nombre a la funci√≥n.  En cambio </p><br><pre> <code class="python hljs">human = HumanBuilder.withName(<span class="hljs-string"><span class="hljs-string">"Alex"</span></span>).withLastName(<span class="hljs-string"><span class="hljs-string">"Black"</span></span>).ofAge(<span class="hljs-number"><span class="hljs-number">20</span></span>).withHobbies([<span class="hljs-string"><span class="hljs-string">'tennis'</span></span>, <span class="hljs-string"><span class="hljs-string">'programming'</span></span>]).build()</code> </pre> <br><p>  ser√° </p><br><pre> <code class="python hljs">human = Human( name=<span class="hljs-string"><span class="hljs-string">"Alex"</span></span> last_name=<span class="hljs-string"><span class="hljs-string">"Black"</span></span> age=<span class="hljs-number"><span class="hljs-number">20</span></span> hobbies=[<span class="hljs-string"><span class="hljs-string">'tennis'</span></span>, <span class="hljs-string"><span class="hljs-string">'programming'</span></span>] )</code> </pre> <br><p>  La biblioteca est√°ndar no utiliza cadenas de m√©todos para trabajar con <em>colecciones</em> .  Recuerdo c√≥mo un colega que vino del mundo de Kotlin me mostr√≥ el c√≥digo del siguiente sentido (tomado de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n oficial</a> de Kotlin): </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> shortGreetings = people .filter { it.name.length &lt; <span class="hljs-number"><span class="hljs-number">10</span></span> } .map { <span class="hljs-string"><span class="hljs-string">"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${it.name}</span></span></span><span class="hljs-string">!"</span></span> }</code> </pre> <br><p>  En Python, <code>map()</code> , <code>filter()</code> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">muchos otros</a> son funciones, no m√©todos de recopilaci√≥n.  Reescribiendo este c√≥digo uno por uno, obtenemos: </p><br><pre> <code class="python hljs">short_greetings = map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> h: <span class="hljs-string"><span class="hljs-string">f"Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{h.name}</span></span></span><span class="hljs-string">"</span></span>, filter(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> h: len(h.name) &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>, people))</code> </pre> <br><p>  En mi opini√≥n, se ve horrible.  Por lo tanto, para paquetes largos como <code>.takewhile().filter().map().reduce()</code> es mejor usar el llamado  <em>inclusi√≥n</em> (comprensiones), o buenos viejos ciclos.  Por cierto, el mismo ejemplo en Kotlin se da en forma de la comprensi√≥n de la lista correspondiente.  Y en Python se ve as√≠: </p><br><pre> <code class="python hljs">short_greetings = [ <span class="hljs-string"><span class="hljs-string">f"Hello </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{h.name}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> h <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> people <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(h.name) &lt; <span class="hljs-number"><span class="hljs-number">10</span></span> ]</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Para los que extra√±an las cadenas.</b> <div class="spoiler_text"><p>  Hay bibliotecas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pipe</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">py_linq</a> ! </p></div></div><br><p>  Las cadenas de m√©todos se usan donde son m√°s eficientes que las herramientas est√°ndar.  Por ejemplo, en el marco web de Django, las cadenas se utilizan para construir un objeto de consulta de base de datos: </p><br><pre> <code class="python hljs">query = User.objects \ .filter(last_visited__gte=<span class="hljs-string"><span class="hljs-string">'2019-05-01'</span></span>) \ .order_by(<span class="hljs-string"><span class="hljs-string">'username'</span></span>) \ .values(<span class="hljs-string"><span class="hljs-string">'username'</span></span>, <span class="hljs-string"><span class="hljs-string">'last_visited'</span></span>) \ [:<span class="hljs-number"><span class="hljs-number">5</span></span>]</code> </pre> <br><p>  <strong>Consejo 7:</strong> <em>Antes de hacer algo muy familiar de la experiencia pasada, pero no familiar en Python, preg√∫ntese qu√© decisi√≥n tomar√≠a un pitonista experimentado.</em> </p><br><h3 id="piton-medlennyy">  Python lento </h3><br><p>  Si </p><br><p>  S√≠, cuando se trata de la velocidad de ejecuci√≥n en comparaci√≥n con los idiomas compilados y tipados est√°ticamente. </p><br><p>  ¬øPero parece querer una respuesta detallada? </p><br><p>  La implementaci√≥n de referencia de Python (CPython) est√° lejos de ser su implementaci√≥n m√°s efectiva.  Una de las razones importantes es el deseo de los desarrolladores de no complicarlo.  Y la l√≥gica es comprensible: el c√≥digo no demasiado abstruso significa menos errores, una mejor oportunidad para realizar cambios y, al final, m√°s personas que desean leer, comprender y complementar este c√≥digo. </p><br><p>  Jake VanderPlas en su blog analiza <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lo que sucede en CPython debajo del cap√≥</a> al agregar dos variables que contienen valores enteros: </p><br><pre> <code class="python hljs">a = <span class="hljs-number"><span class="hljs-number">1</span></span> b = <span class="hljs-number"><span class="hljs-number">2</span></span> c = a + b</code> </pre> <br><p>  Incluso si no profundizamos en la jungla de CPython, podemos decir que para almacenar las variables <code>a</code> , <code>c</code> , el int√©rprete tendr√° que crear tres objetos en el mont√≥n, en los que se almacenar√°n los valores de tipo y (punteros a);  Vuelva a determinar el tipo y los valores durante la operaci√≥n de suma para llamar a algo como <code>binary_add&lt;int, int&gt;(a-&gt;val, b-&gt;val)</code> ;  escriba el resultado en <code>c</code> . <br>  Esto es terriblemente ineficiente en comparaci√≥n con un programa C similar. </p><br><p>  Otro problema con CPython es el llamado  Global Interpreter Lock (GIL).  Este mecanismo, esencialmente un valor booleano encerrado por un mutex, se utiliza para sincronizar la ejecuci√≥n de bytecode.  GIL simplifica el desarrollo del c√≥digo que se ejecuta en un entorno multiproceso: CPython no necesita pensar en sincronizar el acceso a variables o puntos muertos.  Debe pagar esto porque solo un hilo obtiene acceso y <em>ejecuta el c√≥digo</em> de <em>bytes</em> en un momento dado: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rw/od/if/rwodifh_niof7jaf5bvmagg4ypy.gif"></div><br><p>  <strong>UPD: ¬°</strong> Pero esto no significa que el programa en Python funcionar√° m√°gicamente en un entorno multiproceso!  ¬°El c√≥digo en Python no se transfiere al bytecode uno por uno y no hay garant√≠as sobre la compatibilidad del bytecode entre versiones!  Por lo tanto, a√∫n tiene que sincronizar los hilos en el c√≥digo.  Afortunadamente, aqu√≠ Python tiene un rico conjunto de herramientas, por ejemplo, que le permite cambiar entre un modelo de ejecuci√≥n multiproceso y multiproceso. </p><br><div class="spoiler">  <b class="spoiler_title">Si tiene curiosidad sobre qu√© esfuerzos se est√°n haciendo para erradicar el GIL</b> <div class="spoiler_text"><p>    Anthony Shaw " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Has the Python GIL been slain?</a> ". </p></div></div><br><p>    ? </p><br><ol><li>      .    ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CFFI</a> )              .           API    (extensions)  C/C++.    ,      Rust, Go   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kotlin Native</a> ! </li><li>    , : <br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PyPy</a> ,   JIT-.    ,     ,          ? </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cython</a> ‚Äî      Python    C. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IronPython</a> ‚Äî ,   .NET framework. </li></ul></li></ol><br><p> <strong> 8:</strong> <em>     ,              .      ,   IO (, ,  )   ,    ,      ,    ,     :)</em> </p><br><h3 id="osnovnye-instrumenty">   </h3><br><p>      ?      Linux  MacOS,   95%      .      ,      3.,       2.7.    Windows   .   :  Docker, Windows Subsystem for Linux, Cygwin, ,     . </p><br><p> <strong> 9:</strong> <em>     .  ,   ‚Äî       -   .</em> </p><br><p>    "Hello world"   ?  Genial      machine learning-    -    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Python Package Index</a> (PyPI). </p><br><p>        (packages),    ..   (virtual environments).        ,      .     -    .   <code>pip</code>    .     <code>pip</code>      .      ,  <code>pipenv</code>  <code>poetry</code> ‚Äî  npm, bundler, cargo  .. </p><br><p> <strong> 0xA:</strong> <em>      ‚Äî  <code>pip</code>  <code>virtualenv</code> .   ‚Äî  , ,  .  ,      ‚Äî   <code>sys.path</code> ‚Äî  ,        .</em> </p><br><h3 id="chto-zhe-dalshe">   ? </h3><br><p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> ?       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   </a> .     : </p><br><blockquote>      Dive into python... </blockquote><p> ,               .              , ,     :) </p><br><p> , ! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/450724/">https://habr.com/ru/post/450724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../450710/index.html">Reconstrucci√≥n de Midi a partir de videos de Synthesia (y similares)</a></li>
<li><a href="../450712/index.html">DotNetRu en DotNext 2019 Piter</a></li>
<li><a href="../450716/index.html">Anuncio de habilidades de Windows Vision (Vista previa)</a></li>
<li><a href="../450718/index.html">Qu√© hay de nuevo en RxJS v6.5</a></li>
<li><a href="../450720/index.html">C√≥mo desarrollar una aplicaci√≥n f√°cil de usar</a></li>
<li><a href="../450726/index.html">Creaci√≥n de una herramienta para escribir de forma r√°pida y eficiente autotests en Selenium</a></li>
<li><a href="../450728/index.html">NLog: reglas y filtros</a></li>
<li><a href="../450730/index.html">ok.tech: encuentro frontend</a></li>
<li><a href="../450732/index.html">Ya veo, significa que existo: una revisi√≥n de Deep Learning in Computer Vision (parte 1)</a></li>
<li><a href="../450734/index.html">Fuzzing es un paso importante en el desarrollo seguro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>