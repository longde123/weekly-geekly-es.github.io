<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¿â€ğŸ¨ ğŸ–•ğŸ¼ ğŸ‘¨ğŸ¼â€ğŸ« Acerca de los problemas de Python Translator y repensar el lenguaje ğŸ˜§ ğŸ‘œ ğŸ’µ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="- Â¿CuÃ¡ntos arquitectos necesitas para implementar un lenguaje de programaciÃ³n? 
 - cien. Uno escribirÃ¡ la implementaciÃ³n y 99 dirÃ¡ quÃ© pueden hacer me...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Acerca de los problemas de Python Translator y repensar el lenguaje</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481782/"><p>  - <em>Â¿CuÃ¡ntos arquitectos necesitas para implementar un lenguaje de programaciÃ³n?</em> <br>  - <em>cien.</em>  <em>Uno escribirÃ¡ la implementaciÃ³n y 99 dirÃ¡ quÃ© pueden hacer mejor.</em> </p><br><p>  En este artÃ­culo, quiero cubrir no tanto el lenguaje en sÃ­ como los detalles de la implementaciÃ³n de CPython y su biblioteca estÃ¡ndar, que aseguran que no tendrÃ¡ formas fÃ¡ciles de hacer que la aplicaciÃ³n Python sea multiproceso, rÃ¡pida o fÃ¡cil de soportar, y por quÃ© se creÃ³ tanto implementaciones alternativas (PyPy, Cython, Jython, IronPython, Python para .NET, Parakeet, Nuitka, Stackless, Unladen Swallow), la mitad de las cuales ya han muerto;  y pocos entendieron por quÃ© las alternativas no tenÃ­an posibilidades de ganar la lucha por la supervivencia contra otros idiomas.  SÃ­, hay GDScript, que estÃ¡ diseÃ±ado para resolver problemas de rendimiento, estÃ¡ Nim, que estÃ¡ diseÃ±ado para resolver todos los problemas en general, sin requerir que el usuario declare tipos explÃ­citamente.  Sin embargo, dada la enorme inercia de la industria, me doy cuenta de que en los prÃ³ximos 10 aÃ±os, los nuevos idiomas definitivamente no ocuparÃ¡n un nicho significativo.  Sin embargo, <strong>creo</strong> que Python puede hacerse efectivo cambiando el estilo de escritura del cÃ³digo, en su mayor parte conservando la sintaxis original y preservando completamente la posibilidad de interacciÃ³n entre el cÃ³digo nuevo y el antiguo.  Me centrarÃ© en los problemas de CPython, no en su competidor mÃ¡s cercano, PyPy, ya que PyPy en realidad salta alrededor de los mismos problemas de CPython. </p><a name="habracut"></a><br><p>  Soy un programador con siete aÃ±os de experiencia, principalmente dedicado al desarrollo de aplicaciones de escritorio, con cierto Ã©nfasis en la web y bases de datos multiproceso.  Usted pregunta, "espere un minuto, pero Â¿quÃ© tiene Python en comÃºn con la interfaz de usuario, los frentes web y el subprocesamiento mÃºltiple?".  Y responderÃ© "eso es todo, nada".  UsÃ© C, Delphi, JavaScript y SQL para mis tareas.  No estaba muy satisfecho con esta situaciÃ³n, y hace un tiempo intentÃ© participar en el proyecto de Eric Snow para implementar el soporte para mÃºltiples intÃ©rpretes en CPython: <br>  <a href="https://www.python.org/dev/peps/pep-0554/" rel="nofollow">https://www.python.org/dev/peps/pep-0554/</a> <br>  <a href="https://github.com/ericsnowcurrently/multi-core-python" rel="nofollow">https://github.com/ericsnowcurrently/multi-core-python</a> </p><br><p>  Desafortunadamente, el entendimiento llegÃ³ rÃ¡pidamente que: </p><br><ul><li>  CPython tiene un soporte bastante pobre para un proyecto tan popular, y tiene un montÃ³n de viejos problemas que surgen al intentar volver a dibujar la implementaciÃ³n.  Como resultado, Eric ha estado eligiendo al intÃ©rprete con progreso variable durante varios aÃ±os; </li><li>  incluso despuÃ©s de la implementaciÃ³n exitosa de mÃºltiples intÃ©rpretes, no estÃ¡ claro cÃ³mo organizar aÃºn mÃ¡s la ejecuciÃ³n paralela.  PEP sugiere usar canales simples, pero esta herramienta se vuelve peligrosa a medida que la tarea se vuelve mÃ¡s compleja, con amenazas de congelamiento y comportamiento impredecible; </li><li>  el lenguaje en sÃ­ tiene grandes problemas que impiden que los intÃ©rpretes intercambien datos directamente y brindan cierta garantÃ­a de comportamiento predecible. </li></ul><br><p>  Ahora con mÃ¡s detalle sobre los problemas. </p><br><h4 id="izmenyaemye-opredeleniya-klassov">  Definiciones de clase modificables </h4><br><p>  SÃ­, entiendo que una clase en python se declara en tiempo de ejecuciÃ³n.  Pero maldita sea, Â¿por quÃ© poner variables en Ã©l?  Â¿Por quÃ© agregar nuevos mÃ©todos a objetos antiguos?  No puede declarar funciones y variables fuera de las clases en ningÃºn Java, pero no existe tal restricciÃ³n en python (y python se creÃ³ antes de Java).  AdemÃ¡s, le pido que preste atenciÃ³n a cÃ³mo necesita doblegarse con cÃ¡ncer para agregar mÃ©todos similares al objeto en sÃ­, y no a la clase, esto requiere tipos.MethodType, function .__ get__, functools.partial, etc. <br>  Para empezar, me gustarÃ­a hacer una pregunta extraÃ±a: Â¿por quÃ© las pitones necesitan mÃ©todos?  No funciones, como en JavaScript cercano, sino mÃ©todos de clase.  Uno de los factores: Guido no encontrÃ³ mejores formas de hacer nombres cortos de funciones (para que no haya gtk_button_set_focus_on_click), ya que no estÃ¡ claro cÃ³mo seleccionar las funciones necesarias para este objeto especÃ­fico de un conjunto de funciones similares con un nombre corto.  Sin embargo, len, iter, next, isinstance, slice, dict, dir, str, repr, hash, type aparecieron en python; ahora estos son envoltorios sobre los mÃ©todos de clase correspondientes con guiones bajos en el nombre, y una vez incorporados, los tipos simples no eran clases y trabajÃ³ solo a travÃ©s de estas funciones.  Personalmente, no veo mucha diferencia entre la grabaciÃ³n del mÃ©todo (objeto) y el mÃ©todo object.method, especialmente si el mÃ©todo es una funciÃ³n estÃ¡tica, que, en general, no le importa quÃ© primer argumento (self) aceptar. <br>  Definiciones de clase dinÃ¡mica en el caso general: </p><br><ul><li>  No realice <strong>pruebas</strong> modulares.  Un cÃ³digo correctamente elaborado en la prueba puede dar un error cuando todo el sistema estÃ¡ funcionando, y no estarÃ¡ protegido de esto dentro de CPython; </li><li>  Crear grandes dificultades de <strong>optimizaciÃ³n</strong> .  Una declaraciÃ³n de clase no le garantiza el funcionamiento real de la clase.  Por esta razÃ³n, el Ãºnico proyecto optimizador exitoso de PyPy utiliza el rastreo para detectar la secuencia real de acciones realizadas por el mÃ©todo de la sonda; </li><li>  No acople con ejecuciÃ³n de cÃ³digo <strong>paralelo</strong> .  Por ejemplo, el mismo multiprocesamiento funciona con copias de las definiciones de clase y, si Dios no lo permite, cambie la descripciÃ³n de las clases en una de las copias, entonces su aplicaciÃ³n corre el riesgo de desmoronarse. </li></ul><br><p>  Una versiÃ³n mÃ¡s sutil de las clases dinÃ¡micas estÃ¡ anulando el acceso a los atributos a travÃ©s de __getattribute__, __getattr__ y otros.  A menudo se usan como getter-setters regulares, para delegar funciones a un objeto de campo y ocasionalmente para organizar un <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B5%25D0%25B4%25D0%25BC%25D0%25B5%25D1%2582%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D0%25B9_%25D1%258F%25D0%25B7%25D1%258B%25D0%25BA" rel="nofollow">DSL</a> .  Todas estas funciones pueden implementarse de una manera mÃ¡s civilizada, sin convertir la clase en un basurero de descripciones, cuyo comportamiento a veces es difÃ­cil de garantizar.  Por cierto, en el caso de getters / setters, dicho mecanismo ya existe; estos son los descriptores de atributos: <a href="https://www.python.org/dev/peps/pep-0252/" rel="nofollow">https://www.python.org/dev/peps/pep-0252/#id5</a> </p><br><p>  El intercambio en caliente de clases es necesario para la depuraciÃ³n y la codificaciÃ³n comÃºn, pero aÃºn asÃ­ debe ser una herramienta especializada para el desarrollador, y no un artefacto en tiempo de ejecuciÃ³n que no pueda eliminarse. </p><br><p>  Las clases compiladas son solo un pequeÃ±o paso que Cython y Nuitka ya han dado, pero este paso solo sin otros cambios no es suficiente para obtener un efecto significativo incluso en tÃ©rminos de velocidad de ejecuciÃ³n, porque, por ejemplo, python hace un uso extensivo de la vinculaciÃ³n de variables dinÃ¡micas, que no estÃ¡ en ninguna parte no desaparece en cÃ³digo compilado. </p><br><h4 id="mnozhestvennoe-nasledovanie">  Herencia mÃºltiple </h4><br><p>  Creo que este es el lÃ­der del desfile de sombreros.  Ni siquiera estÃ¡ al nivel de las funciones C en la implementaciÃ³n de Python y sus extensiones.  "Â¿Pero quÃ© pasa con las interfaces?" Usted objeta.  Se necesitan interfaces en C ++ y Java en la funciÃ³n de declarar protocolos para llamar a mÃ©todos de un objeto con el propÃ³sito de verificaciÃ³n posterior estÃ¡tica de estos protocolos en la compilaciÃ³n, asÃ­ como para generar tablas de mÃ©todos que serÃ¡n utilizados en tiempo de ejecuciÃ³n por otro cÃ³digo que no sabe nada sobre el objeto fuente.  Estos roles se pierden casi por completo en Python, por lo tanto, no existe justificaciÃ³n para su existencia.  Me gusta la forma en que se hacen las interfaces en Go: es muy similar a Python ABC: <a href="https://www.python.org/dev/peps/pep-3119" rel="nofollow">https://www.python.org/dev/peps/pep-3119</a> </p><br><p>  La herencia mÃºltiple no es un problema directo para la paralelizaciÃ³n y la optimizaciÃ³n, pero complica la legibilidad y la facilidad de mantenimiento del cÃ³digo: este es el llamado cÃ³digo de lasaÃ±a (similar al cÃ³digo de espagueti). </p><br><h4 id="generatory">  Generadores </h4><br><p>  Este es un caso realmente descuidado de GoTo, cuando la ejecuciÃ³n no solo salta incontrolablemente sobre el cÃ³digo, sino que salta sobre las pilas.  Un juego particularmente feroz ocurre cuando los generadores se cruzan con los administradores de contexto (hola PEP 567).  Si hay una tendencia general en Python a enredar la aplicaciÃ³n en una bola estrecha de estados variables conectados que no dan lugar a pruebas, paralelizaciÃ³n y optimizaciÃ³n del programa, entonces los generadores son una guinda en este pastel. </p><br><p>  Â¿CuÃ¡l crees que serÃ¡ el resultado del programa? </p><br><pre><code class="python">import contextlib
@contextlib.contextmanager
def context_manager():
    try:
        print('')
        yield
    finally:
        print('')

def gen_in_manager():
    m = context_manager()
    with m:
        for i in range(5):
            yield i

g1 = gen_in_manager()
next(g1)
print('')</code></pre><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><p>     <a href="https://stackoverflow.com/questions/41881731/is-it-safe-to-combine-with-and-yield-in-python" rel="nofollow">stackoverflow</a><br>
<br>
<br>
 â€”        </p></div></div><br>
<p>      ,           :</p><br>
<pre><code class="python">import contextlib
@contextlib.contextmanager
def context_manager():
    try:
        print('')
        yield
    finally:
        print('')

def gen_in_manager():
    m = context_manager()
    with m:
        for i in range(5):
            yield i

def test():
    g1 = gen_in_manager()
    next(g1)

test()
print('')</code></pre><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><p><br>
<br>
</p></div></div><br>
<p>        .<br>
  ,         ,    :        async/await,          . </p><br>
<p> :  RPython    -.  ,       .             <strong></strong>, <strong></strong>,  <strong></strong>.</p><br>
<h4 id="izmenyaemye-znacheniya"> </h4><br>
<p><a href="https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines" rel="nofollow">https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines</a></p><br>
<pre><code class="python">&gt;&gt;&gt; a = ([42],)
&gt;&gt;&gt; a[0] += [43, 44]
TypeError: 'tuple' object does not support item assignment
&gt;&gt;&gt; a
([42, 43, 44],)
&gt;&gt;&gt; a = ([42],)
&gt;&gt;&gt; b = a[0]
&gt;&gt;&gt; b += [43, 44]
&gt;&gt;&gt; a
([42, 43, 44],)

&gt;&gt;&gt; x = y = [1,2,3]
&gt;&gt;&gt; x = x + [4]
&gt;&gt;&gt; x == y
False
&gt;&gt;&gt; x = y = [1,2,3]
&gt;&gt;&gt; x += [4]
&gt;&gt;&gt; x == y
True

&gt;&gt;&gt; x = [[]]*5
&gt;&gt;&gt; x
[[], [], [], [], []]
&gt;&gt;&gt; x[0].append(0)
&gt;&gt;&gt; x
[[0], [0], [0], [0], [0]]</code></pre><br>
<p>      ,      Â«'tuple' object does not support item assignmentÂ»     :        .    ,      ,     , , .  ,   , x[0].append(0)                 ,   CPython        ,     .         ,          .</p><br>
<p>        â€”  [] ?   , ,             .  ,  Clojure     ,       -  partial-copy-on-write      .        ,         .</p><br>
<p>    ?  , ,      . ,   copy-on-write  ,         : b.append.., b[].., b +=â€¦ :     ,     ,    â€”  <strong>, , </strong>.  ,  ,       ,   ,  //      ,         .</p><br>
<p>       copy-on-write?               ,  ,        (),          (  ),        ,    .</p><br>
<p>  -                  .  ? ,       copy-on-write,      Â«({'first': 1, 'second': 2},)Â»,  ,   ,     ,  ,      ,      Â«{'first': 1, 'second': 2}Â».</p><br>
<h4 id="polimorfizm-i-mnozhestvennaya-dispetcherizaciya">   </h4><br>
<p><a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D0%25B8%25D0%25BC%25D0%25BE%25D1%2580%25D1%2584%25D0%25B8%25D0%25B7%25D0%25BC_(%25D0%25B8%25D0%25BD%25D1%2584%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B0" rel="nofollow">https://ru.wikipedia.org/wiki/_(</a>)<br>
Â«       â€”      Â»</p><br>
<p>: <a href="https://en.wikipedia.org/wiki/Multiple_dispatch" rel="nofollow">https://en.wikipedia.org/wiki/Multiple_dispatch#Use_in_practice</a><br>
 ,     13â€“32%       (a.k.a.  ),  2.7â€“6.5%  â€”    .      :         ,    ,    ,      .   ,  ,            .</p><br>
<p>,     â€”    ,     .      ,  ,      . ,      double    char,     ,        double        .</p><br>
<pre><code class="cpp">float a = 2.0;
float *src = &amp;a;
char *dest = malloc(sizeof(float));
memcpy(dest, src, sizeof(float));
printf("%f", *(double*)dest);</code></pre><br>
<p> ,       (, , )    â€”           -   ,     , ,  .</p><br>
<p>   ,       (     )   .             :      Â«a = b + cÂ»,     ,     .      ?</p><br>
<ul>
<li>    : Â«if (Py_TYPE(obj) == &amp;PyLong_Type) {long val = PyLong_AsLong...}Â»        type();</li>
<li>     : Â«PyArg_ParseTuple()Â»        ,  Â«this.number = int(param1); this.text = str(param2)Â» â€”          ,       .      , ,           (   ,         );</li>
<li>//    .               â€”            .</li>
</ul><br>
<p>,    .     ,      ?         CPython, ,  ,     ,    ,      .  ,   :             . ,       ?   :  ,        /     ,     /   . C Â«a = b + cÂ»    ( ,     ):</p><br>
<pre><code class="python">def PyNumber_Add(b, c):
  slotb = b.__add__
  if not type(b) is type(c) and c.__add__:
    slotc = c.__add__
    if slotc is slotb:
      slotc = None
  if slotb:
    if slotc and isinstance(c, b.__class__):
      return slotc(b, c)
    else:
      return slotb(b, c)
  else:
    return slotb(b, c)

if isinstance(b, str) and isinstance(c, str):
  a = unicode_concatenate(b, c)
else:
  a = PyNumber_Add(b, c)</code></pre><br>
<p>    ,         ,    . Â«  Â»     â€”  ,   , , ,     .   ,       ,   ,       Â«  Â», Â«Â», Â«Â»,   ;   â€”           .</p><br>
<p>   :   ,    .  ,       .    :    ,          .  ,        ,       â€”    .</p><br>
<p>           ,            .     ,       ,  <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D1%2581%25D0%25B5%25D1%2582%25D0%25B8%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)" rel="nofollow"> </a>.  ,     -       ,        .</p><br>
<p>      ,             ,     (     ),       (     ),        .     ,                 ,       (  ).   ,   ,           â€”       , ?                 <strong> </strong>  <strong>  </strong>.</p><br>
<p>         â€”   :        ,         .  ,    ,       . ,       ,     - ,     , :       .         ,    ,     â€”     MRO:<br>
<a href="https://www.python.org/download/releases/2.3/mro/" rel="nofollow">https://www.python.org/download/releases/2.3/mro/</a><br>
<a href="https://ru.wikipedia.org/wiki/C3-%25D0%25BB%25D0%25B8%25D0%25BD%25D0%25B5%25D0%25B0%25D1%2580%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F" rel="nofollow">https://ru.wikipedia.org/wiki/C3-</a> </p><br>
<p>   ,    3.4      Â« Â» ( <a href="https://www.youtube.com/watch%3Fv%3DohDB5gbtaEQ" rel="nofollow">Argument â€” Monty Python</a> ),             .   Â«    Â»â€¦  ,  : 3.4   2014,       1991.</p><br>
<p>          .                 ,      (trait)  Rust ( ,   ,   , ,       ):<br>
<a href="https://doc.rust-lang.org/1.8.0/book/traits.html" rel="nofollow">https://doc.rust-lang.org/1.8.0/book/traits.html</a><br>
 ,        ,     ,      ,  ,           .        Â«Â».       ,     ,           . ,  -  , ,  Rust-. ,   __iter__ â€”      Â«Â». ,       ,     ,       ,      .       ,  Â«     - ,    Â».   ,           ,    <a href="" rel="nofollow">C++ ranges</a>,       ,    ,    .<br>
  :</p><br>
<pre><code class="python">from collections.abc import Iterable, Container
from itertools import filterfalse

class MyList(Trait, Iterable, Container):
  pass

def __sub__(a: MyList, b: object):
  return list(filterfalse(lambda x: x == b, a))

def __sub__(a: MyList, b: Container):
  return list(filterfalse(lambda x: x in b, a))

a = MyList([1, 2, 3, 4, 5])
print(a - [2, 5]) #  , print(__sub__(a, b))
# : [1, 3, 4]
print(a - 3)
# : [1, 2, 4, 5]</code></pre><br>
<p>        MyList,     Iterable (  __iter__)  Container ( __contains__),    list,   list      MyList,   MyList    list,  list    MyList.        :</p><br>
<pre><code class="python">from collections.abc import Container
from itertools import filterfalse

class MyList(list):
  def __sub__(self, b):
    if isinstance(b, Container):
      return list(filterfalse(lambda x: x in b, a))
    else:
      return list(filterfalse(lambda x: x == b, a))

a = MyList([1, 2, 3, 4, 5])
print(a - [2, 5])
# : [1, 3, 4]
print(a - 3)
# : [1, 2, 4, 5]</code></pre><br>
<p>   :        ,          Â«aÂ»,          .    Â« Â»,       -,       .</p><br>
<p>,             â€” ,            ,              ,   .   ,      ,        .</p><br>
<h4 id="operator-prisvoeniya-i-staticheskaya-tipizaciya">    </h4><br>
<p> ,         ,         . ,         ,      ,        ,     , ,    .          - ,      â€”     -  ,      . :</p><br>
<pre><code class="python">&gt;&gt;&gt; a = [1, 2, 3]
...
&gt;&gt;&gt; a = '15'
...
&gt;&gt;&gt; for i in map(lambda x: x*2, a):
&gt;&gt;&gt;    print(i)
11
55</code></pre><br>
<p> </p><br>
<pre><code class="plaintext">2
4
6</code></pre><br>
<p>          .</p><br>
<p>,            ,           .   None â€”    , NoneType.  ,     â€”   ,      -   ,         .        :</p><br>
<pre><code class="python">&gt;&gt;&gt; class A():
&gt;&gt;&gt;   def __init__(self, value):
&gt;&gt;&gt;     self.val = value
&gt;&gt;&gt;
&gt;&gt;&gt; a = A('2')
&gt;&gt;&gt; a.val = []
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: can only assign str (not "list") to str
&gt;&gt;&gt; a.myattr = []
&gt;&gt;&gt; a.myattr = 2</code></pre><br>
<p>   A     val,      . , -          (myattr) â€”         ,          ,      .</p><br>
<p>,          .        â€”   ,    ,       .    ,       :</p><br>
<pre><code class="python">&gt;&gt;&gt; class A():
&gt;&gt;&gt;   def __init__(self, value):
&gt;&gt;&gt;     self.val = value
&gt;&gt;&gt;
&gt;&gt;&gt; def func():
&gt;&gt;&gt;   a = A(None)
&gt;&gt;&gt;   a.val = 2
&gt;&gt;&gt;   print(a.__dict__)
&gt;&gt;&gt;
&gt;&gt;&gt; func()
{'val': 2}</code></pre><br>
<p>      A&lt;None or Int&gt;,      . ,         ,         .</p><br>
<p>       :  ,              :   , ,            ,          Â«-Â»,     Â«Â».    â€”   ,    ; - ,  ,     ,          ,      .    , ,        Â«listÂ»,  ,   ,  list comprehension,  ,   ,  BUILD_LIST  LIST_APPEND ( CPython) â€”          ?   ,      Â«  Â», Â«  - Â».</p><br>
<p> ,  - ()        ,  Â«a.val = int(newval)Â». ,     ,          ,         .          ,  __setattr__  __setattribute__,   c 2.2       __set__ ( <a href="https://www.python.org/dev/peps/pep-0252/" rel="nofollow">https://www.python.org/dev/peps/pep-0252/</a> ).    :     ,           ,      â€”    C++/Java/C#.  ,            :        __set__, __get__, __delete__,           , :</p><br>
<pre><code class="python">&gt;&gt;&gt; a = StrictDict({'first': 1 })
&gt;&gt;&gt; a = { 'dummy': 666 }
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
StrictDictError: "first" key is missing in the assignment source</code></pre><br>
<p> ,          (  Â« Â»):     copy-on-write ,     ,        -,   copy-on-write    :</p><br>
<pre><code class="python">&gt;&gt;&gt; a = COWList([1, 2, 3])
&gt;&gt;&gt; b = a
&gt;&gt;&gt; a.append(4)
&gt;&gt;&gt; b.append(5)
&gt;&gt;&gt; a
[1, 2, 3, 4]
&gt;&gt;&gt; b
[1, 2, 3, 5]</code></pre><br>
<p>,    CPython         ,    Â«Â»:<br>
<a href="" rel="nofollow">https://github.com/python/cpython/blob/master/Objects/typeobject.c#L5074</a><br>
   ,  __slots__  .        ,        ,             ,       ,  ,        ,   ,     ,  .     (  )        .       ,     :   __slots__ ,    PyHeapTypeObject-&gt;ht_slots,  __dict__,         PyTypeObject-&gt;tp_dictoffset.   ,        .</p><br>
<h4 id="vyvod-tipov"> </h4><br>
<p> ,      ,         .           ,      ,     ,       ,      ,  Â« ,       ;     â€”      "",      ""Â»,             . ,     ,      .   <a href="https://twitter.com/tproger/status/1084801082084212736" rel="nofollow">  </a> Â«&lt;&gt;  = new &lt;&gt;()Â»,          Â«var  = new &lt;&gt;()Â». ,        ReasonML ,    ,     â€”    JS ,        ,        .</p><br>
<p>PyPy,    V8  JavaScript  LuaJIT,        ,         .       -    ,   ,          .        AOT ,   asm.js, WebAssembly,     PNaCl.</p><br>
<p>        : </p><br>
<ol>
<li>Bauer, A.M. and Saal, H.J. (1974). Does APL really need run-time checking? Software â€” Practice and Experience 4: 129â€“138. </li>
<li>Kaplan, M.A. and Ullman, J.D. (1980). A scheme for the automatic inference of variable types. J. A CM 27(1): 128â€“145. </li>
<li>Borning, A.H. and Ingalls, D.H.H. (1982). A type declaration and inference system for Smalltalk. In Conference Record of the Ninth Annual ACM Symposium on Principles of Programming Languages (pp. 133â€“141) </li>
<li><a href="https://ru.wikipedia.org/wiki/Standard_ML" rel="nofollow">https://ru.wikipedia.org/wiki/Standard_ML</a> â€” 1984 . </li>
</ol><br>
<p>  , Standard ML   ,      ,        .<br>
,   -          ,               .  ,    ,   â€”      ,          ,     (      ),        : </p><br>
<ol>
<li>Frank Pfenning. (1988). Partial polymorphic type inference and higher-order unification. In Proceedings of the 1988 ACM Conference on Lisp and Functional Programming, pp. 153â€“163 </li>
<li>Cardelli, Luca; Martini, Simone; Mitchell, John C.; Scedrov, Andre (1994). An extension of system F with subtyping. Information and Computation, vol. 9. North Holland, Amsterdam. pp. 4â€“56 </li>
<li>Benjamin C. Pierce, and David N. Turner. (1997). Local type inference. Indiana University CSCI Technical Report #493, pp. 1-25<br>
  <br>
(1998) Local type inference. POPL '98 Proceedings of the 25th ACM SIGPLAN-SIGACT symposium on Principles of programming languages, pp. 252-265<br>
<br>
(2000). Local type inference. ACM Transactions on Programming Languages and Systems (TOPLAS). Vol. 22(1), pp. 1-44 </li>
</ol><br>
<p>    â€”   ,    Scala,     2001 .</p><br>
<p> 1991   ,  1994 â€” ,  1995 â€”  Â«MatzÂ»,         .    ,        ,       . ,   ,        â€” ,        ,   ,   ,        ,  ZeroMQ, RabbitMQ, Kafka.            ,        ,        ,                   ,       ,                      .             ,         ?  .  -     ,     Crystal,       ,   .</p><br>
<h4 id="itog"></h4><br>
<p> â€”    .         ,  ,      .</p></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/481782/">https://habr.com/ru/post/481782/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../481772/index.html">Experimento VonmoTrade. Parte 2: Ã“rdenes. Tipos, caracterÃ­sticas de procesamiento</a></li>
<li><a href="../481774/index.html">Hojas de trucos de seguridad: parches virtuales</a></li>
<li><a href="../481776/index.html">Servicios 5G y de juegos en la nube: pruebe cÃ³mo funciona en MoscÃº</a></li>
<li><a href="../481778/index.html">AnÃ¡lisis de malware Skeleton Key</a></li>
<li><a href="../481780/index.html">MyOffice tiene mÃ¡s de 200 nuevas funciones.</a></li>
<li><a href="../481784/index.html">CÃ³mo se hizo realidad Kafka</a></li>
<li><a href="../481786/index.html">Google entierra la extensiÃ³n PHP IMAP</a></li>
<li><a href="../481788/index.html">AnÃ¡lisis para resolver problemas reales de la industria (salvar lechones y otros)</a></li>
<li><a href="../481790/index.html">CÃ³mo las trampas estÃ¡n cambiando la comunidad speedrunner</a></li>
<li><a href="../481792/index.html">CÃ³mo PVS-Studio celebrÃ³ la segunda mitad de las conferencias de 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>