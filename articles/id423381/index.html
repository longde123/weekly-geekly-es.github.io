<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüíª ü§∫ ‚è´ Kontrol Sumberdaya. Kustomisasi SwiftGen ü§∑üèΩ ‚å®Ô∏è üëßüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mungkin, di setiap proyek iOS besar, proyek yang tahan lama dapat menemukan ikon yang tidak digunakan di mana pun, atau akses ke kunci pelokalan yang ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kontrol Sumberdaya. Kustomisasi SwiftGen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/423381/"><p>  Mungkin, di setiap proyek iOS besar, proyek yang tahan lama dapat menemukan ikon yang tidak digunakan di mana pun, atau akses ke kunci pelokalan yang sudah tidak ada sejak lama.  Paling sering, situasi seperti itu muncul dari kurangnya perhatian, dan otomatisasi adalah obat terbaik untuk kekurangan perhatian. </p><br><p>  Di tim iOS HeadHunter, kami memberikan perhatian besar untuk mengotomatisasi tugas-tugas rutin yang mungkin dihadapi pengembang.  Dengan artikel ini kami ingin memulai siklus cerita tentang alat dan pendekatan yang menyederhanakan pekerjaan kami sehari-hari. </p><br><p>  Beberapa waktu lalu, kami berhasil mengendalikan sumber daya aplikasi menggunakan utilitas SwiftGen.  Tentang cara mengkonfigurasinya, bagaimana hidup dengannya, dan bagaimana utilitas ini membantu menggeser cek untuk relevansi sumber daya dengan kompiler, dan kita akan berbicara tentang cat. </p><br><p><img src="https://habrastorage.org/webt/dl/sy/-c/dlsy-cocqhwmu02tsyr4aoukf-y.jpeg"></p><a name="habracut"></a><br><p>  SwiftGen adalah utilitas yang memungkinkan Anda menghasilkan kode Swift untuk mengakses berbagai sumber daya proyek Xcode, di antaranya: </p><br><ul><li>  font </li><li>  warna </li><li>  papan cerita; </li><li>  string lokalisasi; </li><li>  aset. </li></ul><br><p>  Setiap orang dapat menulis kode serupa untuk menginisialisasi gambar atau string pelokalan: </p><br><pre><code class="swift hljs">logoImageView.image = <span class="hljs-type"><span class="hljs-type">UIImage</span></span>(named: <span class="hljs-string"><span class="hljs-string">"Swift"</span></span>) nameLabel.text = <span class="hljs-type"><span class="hljs-type">String</span></span>( format: <span class="hljs-type"><span class="hljs-type">NSLocalizedString</span></span>(<span class="hljs-string"><span class="hljs-string">"languages.swift.name"</span></span>, comment: <span class="hljs-string"><span class="hljs-string">""</span></span>), locale: <span class="hljs-type"><span class="hljs-type">Locale</span></span>.current )</code> </pre> <br><p>  Untuk menunjukkan nama gambar atau kunci lokalisasi, kami menggunakan string literal.  Apa yang ditulis di antara tanda kutip ganda tidak divalidasi oleh kompiler atau lingkungan pengembangan (Xcode).  Di situlah letak serangkaian masalah berikut: </p><br><ul><li>  Anda dapat membuat kesalahan ketik; </li><li>  Anda mungkin lupa memperbarui penggunaan dalam kode setelah mengedit atau menghapus kunci / gambar. </li></ul><br><p>  Mari kita lihat bagaimana kita dapat meningkatkan kode ini dengan SwiftGen. </p><br><p>  Untuk tim kami, generasi hanya relevan untuk string dan aset, dan mereka akan dibahas dalam artikel.  Generasi untuk jenis sumber daya lainnya serupa dan, jika diinginkan, mudah dikuasai secara mandiri. </p><br><h2 id="vnedrenie-v-proekt">  Implementasi Proyek </h2><br><p>  Pertama, Anda perlu menginstal SwiftGen.  Kami memilih untuk menginstalnya melalui CocoaPods sebagai cara mudah untuk mendistribusikan utilitas di antara semua anggota tim.  Tapi ini bisa dilakukan dengan cara lain, yang dijelaskan secara rinci dalam <a href="">dokumentasi</a> .  Dalam kasus kami, semua yang perlu dilakukan adalah menambahkan <code>pod 'SwiftGen'</code> , dan kemudian menambahkan fase build baru ( <code>Build Phase</code> ) yang akan meluncurkan SwiftGen sebelum membangun proyek. </p><br><pre> <code class="plaintext hljs">"$PODS_ROOT"/SwiftGen/bin/swiftgen</code> </pre> <br><p>  Penting untuk menjalankan SwiftGen sebelum memulai fase <code>Compile Sources</code> untuk menghindari kesalahan saat mengkompilasi proyek. </p><br><p><img src="https://habrastorage.org/webt/gx/1t/xw/gx1txw1lfcxmghilpakndv_wnck.png"></p><br><p>  Sekarang kami siap untuk mengadaptasi SwiftGen ke proyek kami. </p><br><h2 id="nastroyka-swiftgen">  Konfigurasikan SwiftGen </h2><br><p>  Pertama-tama, Anda perlu mengonfigurasi templat yang dengannya kode untuk mengakses sumber daya akan dihasilkan.  Utilitas sudah berisi seperangkat templat untuk menghasilkan kode, semuanya dapat dilihat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github</a> dan, pada prinsipnya, mereka siap digunakan.  Template ditulis dalam bahasa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Stensil</a> , Anda mungkin akrab dengannya jika Anda menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sourcery</a> atau dimainkan dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kitura</a> .  Jika diinginkan, masing-masing templat dapat disesuaikan dengan panduan masing-masing. <br>  Misalnya, ambil templat yang dibuat <code>enum</code> untuk mengakses string pelokalan.  Tampak bagi kami bahwa standar itu terlalu berlebihan dan dapat disederhanakan.  Contoh sederhana dengan komentar penjelasan ada di bawah spoiler. </p><br><div class="spoiler">  <b class="spoiler_title">Contoh template</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">{#      #} {% set accessModifier %}{% if param.publicAccess %}public{% else %}internal{% endif %}{% endset %} {#    #} {% macro parametersBlock types %}{% filter removeNewlines:"leading" %} {% for type in types %} _ p{{forloop.counter}}: {{type}}{% if not forloop.last %}, {% endif %} {% endfor %} {% endfilter %}{% endmacro %} {% macro argumentsBlock types %}{% filter removeNewlines:"leading" %} {% for type in types %} p{{forloop.counter}}{% if not forloop.last %}, {% endif %} {% endfor %} {% endfilter %}{% endmacro %} {#       enum        #} {% macro recursiveBlock table item sp %} {{sp}}{% for string in item.strings %} {{sp}}{% if not param.noComments %} {{sp}}/// {{string.translation}} {{sp}}{% endif %} {{sp}}{% if string.types %} {{sp}}{{accessModifier}} static func {{string.name|swiftIdentifier:"pretty"|lowerFirstWord|escapeReservedKeywords}}({% call parametersBlock string.types %}) -&gt; String { {{sp}} return localize("{{string.key}}", {% call argumentsBlock string.types %}) {{sp}}} {{sp}}{% else %} {{sp}}{{accessModifier}} static let {{string.name|swiftIdentifier:"pretty"|lowerFirstWord|escapeReservedKeywords}} = localize("{{string.key}}") {{sp}}{% endif %} {{sp}}{% endfor %} {{sp}}{% for child in item.children %} {{sp}}{{accessModifier}} enum {{child.name|swiftIdentifier:"pretty"|escapeReservedKeywords}} { {{sp}}{% set sp2 %}{{sp}} {% endset %} {{sp}}{% call recursiveBlock table child sp2 %} {{sp}}} {{sp}}{% endfor %} {% endmacro %} import Foundation {#   enum #} {% set enumName %}{{param.enumName|default:"L10n"}}{% endset %} {{accessModifier}} enum {{enumName}} { {% if tables.count &gt; 1 %} {% for table in tables %} {{accessModifier}} enum {{table.name|swiftIdentifier:"pretty"|escapeReservedKeywords}} { {% call recursiveBlock table.name table.levels " " %} } {% endfor %} {% else %} {% call recursiveBlock tables.first.name tables.first.levels " " %} {% endif %} } {#  enum Localization         #} extension Localization { fileprivate static func localize(_ key: String, _ args: CVarArg...) -&gt; String { return String( format: NSLocalizedString(key, comment: ""), locale: Locale.current, arguments: args ) } }</code> </pre> </div></div><br><p>  Lebih mudah untuk menyimpan file template itu sendiri di root proyek, misalnya, di folder <code>SwiftGen/Templates</code> sehingga template ini tersedia untuk semua orang yang bekerja di proyek. <br>  Utilitas ini mendukung konfigurasi melalui file YAML <code>swiftgen.yml</code> , di mana Anda dapat menentukan jalur ke file sumber, templat, dan parameter tambahan.  Buat di root proyek di folder <code>Swiftgen</code> , dan kemudian kelompokkan file lain yang terkait dengan skrip ke folder yang sama. <br>  Untuk proyek kami, file ini mungkin terlihat seperti ini: </p><br><pre> <code class="plaintext hljs">xcassets: - paths: ../SwiftGenExample/Assets.xcassets templatePath: Templates/ImageAssets.stencil output: ../SwiftGenExample/Image.swift params: enumName: Image publicAccess: 1 noAllValues: 1 strings: - paths: ../SwiftGenExample/en.lproj/Localizable.strings templatePath: Templates/LocalizableStrings.stencil output: ../SwiftGenExample/Localization.swift params: enumName: Localization publicAccess: 1 noComments: 0</code> </pre> <br><p>  Bahkan, jalur ke file dan template ditunjukkan di sana, serta parameter tambahan yang diteruskan ke konteks template. <br>  Karena file tersebut bukan di root proyek, kita perlu menentukan path ke sana ketika memulai Swiftgen.  Ubah skrip startup kami: </p><br><pre> <code class="plaintext hljs">"$PODS_ROOT"/SwiftGen/bin/swiftgen config run --config SwiftGen/swiftgen.yml</code> </pre> <br><p>  Sekarang proyek kami dapat dirakit.  Setelah perakitan, dua file <code>Localization.swift</code> dan <code>Image.swift</code> akan muncul di folder proyek di sepanjang jalur yang ditentukan dalam <code>Image.swift</code> .  Mereka perlu ditambahkan ke proyek Xcode.  Dalam kasus kami, file yang dihasilkan berisi yang berikut ini: </p><br><div class="spoiler">  <b class="spoiler_title">Untuk string:</b> <div class="spoiler_text"><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Localization</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Languages</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectiveC</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/// General-purpose, object-oriented programming language that adds Smalltalk-style messaging to the C programming language public static let description = localize("languages.objective-c.description") /// https://en.wikipedia.org/wiki/Objective-C public static let link = localize("languages.objective-c.link") /// Objective-C public static let name = localize("languages.objective-c.name") } public enum Swift { /// General-purpose, multi-paradigm, compiled programming language developed by Apple Inc. for iOS, macOS, watchOS, tvOS, and Linux public static let description = localize("languages.swift.description") /// https://en.wikipedia.org/wiki/Swift_(programming_language) public static let link = localize("languages.swift.link") /// Swift public static let name = localize("languages.swift.name") } } public enum MainScreen { /// Language public static let title = localize("main-screen.title") public enum Button { /// View in Wikipedia public static let title = localize("main-screen.button.title") } } } extension Localization { fileprivate static func localize(_ key: String, _ args: CVarArg...) -&gt; String { return String( format: NSLocalizedString(key, comment: ""), locale: Locale.current, arguments: args ) } }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Untuk gambar:</b> <div class="spoiler_text"><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Image</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logos</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> objectiveC: <span class="hljs-type"><span class="hljs-type">UIImage</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> image(named: <span class="hljs-string"><span class="hljs-string">"ObjectiveC"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> swift: <span class="hljs-type"><span class="hljs-type">UIImage</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> image(named: <span class="hljs-string"><span class="hljs-string">"Swift"</span></span>) } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(named name: String)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">UIImage</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bundle = <span class="hljs-type"><span class="hljs-type">Bundle</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: <span class="hljs-type"><span class="hljs-type">BundleToken</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> image = <span class="hljs-type"><span class="hljs-type">UIImage</span></span>(named: name, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: bundle, compatibleWith: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">fatalError</span></span>(<span class="hljs-string"><span class="hljs-string">"Unable to load image named \(name)."</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> image } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BundleToken</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> </div></div><br><p>  Sekarang Anda dapat mengganti semua penggunaan string pelokalan dan inisialisasi gambar dari bentuk <code>UIImage(named: "")</code> dengan apa yang kami hasilkan.  Ini akan memudahkan kita untuk melacak perubahan atau menghapus kunci string pelokalan.  Dalam setiap kasus ini, proyek tidak akan berkumpul sampai semua kesalahan yang terkait dengan perubahan telah diperbaiki. <br>  Setelah perubahan, kode kami terlihat seperti ini: </p><br><pre> <code class="swift hljs"> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> logos = <span class="hljs-type"><span class="hljs-type">Image</span></span>.<span class="hljs-type"><span class="hljs-type">Logos</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> localization = <span class="hljs-type"><span class="hljs-type">Localization</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupWithLanguage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> language: ProgrammingLanguage)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> language { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .<span class="hljs-type"><span class="hljs-type">Swift</span></span>: logoImageView.image = logos.swift nameLabel.text = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">Swift</span></span>.name descriptionLabel.text = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">Swift</span></span>.description wikiUrl = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">Swift</span></span>.link.toURL() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .<span class="hljs-type"><span class="hljs-type">ObjectiveC</span></span>: logoImageView.image = logos.objectiveC nameLabel.text = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">ObjectiveC</span></span>.name descriptionLabel.text = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">ObjectiveC</span></span>.description wikiUrl = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">ObjectiveC</span></span>.link.toURL() } }</code> </pre> <br><h2 id="nastroyka-proekta-v-xcode">  Menyiapkan proyek dalam Xcode </h2><br><p>  Ada satu masalah dengan file yang dihasilkan: mereka dapat diubah secara manual oleh kesalahan, dan karena mereka ditimpa dari awal dengan setiap kompilasi, perubahan ini mungkin hilang.  Untuk menghindari hal ini, Anda dapat mengunci file untuk ditulis setelah <code>SwiftGen</code> skrip <code>SwiftGen</code> . <br>  Ini dapat dicapai dengan menggunakan <code>chmod</code> .  Kami menulis ulang <code>Build Phase</code> kami dengan meluncurkan SwiftGen sebagai berikut: </p><br><pre> <code class="plaintext hljs">PODSROOT="$1" OUTPUT_FILES=() COUNTER=0 while [ $COUNTER -lt ${SCRIPT_OUTPUT_FILE_COUNT} ]; do tmp="SCRIPT_OUTPUT_FILE_$COUNTER" OUTPUT_FILES+=(${!tmp}) COUNTER=$[$COUNTER+1] done for file in "${OUTPUT_FILES[@]}" do if [ -f $file ] then chmod a=rw "$file" fi done $PODSROOT/SwiftGen/bin/swiftgen config run --config SwiftGen/swiftgen.yml for file in "${OUTPUT_FILES[@]}" do chmod a=r "$file" done</code> </pre> <br><p>  Skripnya cukup sederhana.  Sebelum memulai pembuatan, jika file ada, kami memberi mereka izin menulis.  Setelah menjalankan skrip, kami memblokir kemampuan untuk memodifikasi file. <br>  Untuk kemudahan mengedit dan memeriksa skrip untuk ditinjau, lebih mudah untuk menempatkannya di file <code>runswiftgen.sh</code> terpisah.  Versi final skrip dengan modifikasi kecil dapat ditemukan di <a href="">sini</a> .  Sekarang <code>Build Phase</code> kami akan terlihat seperti ini: kami meneruskan path ke folder Pods ke input skrip: </p><br><pre> <code class="plaintext hljs">"$SRCROOT"/SwiftGen/runswiftgen.sh "$PODS_ROOT"</code> </pre> <br><p>  Kami membangun kembali proyek, dan sekarang ketika Anda mencoba untuk memodifikasi file yang dihasilkan secara manual, peringatan muncul: </p><br><p><img src="https://habrastorage.org/webt/-n/ly/km/-nlykmdjarer-97mhderydx5psq.png"></p><br><p>  Jadi, folder dengan Swiftgen sekarang berisi file konfigurasi, skrip untuk mengunci file dan meluncurkan <code>Swiftgen</code> dan folder dengan template yang disesuaikan.  Lebih mudah untuk menambahkannya ke proyek untuk pengeditan lebih lanjut jika perlu. </p><br><p><img src="https://habrastorage.org/webt/yw/dk/kq/ywdkkqfdjws_a32syu94hscr4cm.png"></p><br><p>  Dan karena file <code>Localization.swift</code> dan <code>Image.swift</code> dihasilkan secara otomatis, Anda dapat menambahkannya ke .gitignore sehingga Anda tidak perlu menyelesaikan konflik setelah <code>git merge</code> lagi. </p><br><p>  Saya juga ingin menarik perhatian pada kebutuhan untuk menentukan File Input / Output untuk fase SwiftGen jika proyek Anda menggunakan Xcode New Build System (ini adalah sistem build default dengan Xcode 10).  Dalam daftar File Input, Anda harus menentukan semua file berdasarkan kode yang dihasilkan.  Dalam kasus kami, ini adalah file skrip itu sendiri, konfigurasi, templat, .strings, dan .xcassets: </p><br><pre> <code class="plaintext hljs">$(SRCROOT)/SwiftGen/runswiftgen.sh $(SRCROOT)/SwiftGen/swiftgen.yml $(SRCROOT)/SwiftGen/Templates/ImageAssets.stencil $(SRCROOT)/SwiftGen/Templates/LocalizableStrings.stencil $(SRCROOT)/SwiftGenExample/en.lproj/Localizable.strings $(SRCROOT)/SwiftGenExample/Assets.xcassets</code> </pre> <br><p>  Dalam File Output kami menempatkan file di mana SwiftGen menghasilkan kode: </p><br><pre> <code class="plaintext hljs">$(SRCROOT)/SwiftGenExample/Image.swift $(SRCROOT)/SwiftGenExample/Localization.swift</code> </pre> <br><p>  Indikasi file-file ini diperlukan agar sistem build dapat memutuskan apakah akan menjalankan skrip, tergantung pada ada atau tidaknya perubahan pada file, dan pada tahap apa dalam perakitan proyek skrip ini harus dieksekusi. </p><br><h2 id="itogi">  Ringkasan </h2><br><p>  SwiftGen adalah alat yang baik untuk melindungi dari kecerobohan kami saat bekerja dengan sumber daya proyek.  Dengan itu, kami dapat secara otomatis menghasilkan kode untuk mengakses sumber daya aplikasi dan mengalihkan sebagian pekerjaan untuk memeriksa relevansi sumber daya dengan penyusun, yang berarti menyederhanakan pekerjaan kami sedikit.  Selain itu, kami menyiapkan proyek Xcode sehingga pekerjaan lebih lanjut dengan alat ini lebih mudah. </p><br><p>  <strong>Pro:</strong> </p><br><ol><li>  Lebih mudah untuk mengontrol sumber daya proyek. </li><li>  Kesalahan kesalahan ketik dikurangi, menjadi mungkin untuk menggunakan penggantian otomatis. </li><li>  Kesalahan diperiksa pada tahap kompilasi. </li></ol><br><p>  <strong>Cons:</strong> </p><br><ol><li>  Tidak ada dukungan untuk Localizable.stringsdict. </li><li>  Sumber daya yang tidak digunakan tidak diperhitungkan. </li></ol><br><p>  Contoh lengkapnya bisa dilihat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id423381/">https://habr.com/ru/post/id423381/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id423371/index.html">Volvo memperkenalkan truk listrik otonom tanpa kabin</a></li>
<li><a href="../id423373/index.html">Alasan buatan tanpa cacat fatal tanpa jaringan saraf</a></li>
<li><a href="../id423375/index.html">Ilmuwan Korea telah menemukan cara untuk menghindari kerusakan pada dinding tokamak karena ketidakstabilan plasma</a></li>
<li><a href="../id423377/index.html">Perakitan PgModeler</a></li>
<li><a href="../id423379/index.html">Mengapa pengabaian uang tunai bisa terlalu mahal bagi negara-negara berkembang</a></li>
<li><a href="../id423383/index.html">Ajax js modifikasi untuk ajax Asp .net mvc</a></li>
<li><a href="../id423385/index.html">Kursus "Dasar-Dasar Pemrograman"</a></li>
<li><a href="../id423391/index.html">CLRium # 4: Pertemuan Komunitas .Net</a></li>
<li><a href="../id423393/index.html">Jaringan saraf berbasis aturan</a></li>
<li><a href="../id423395/index.html">Tesla mencetak rekor triwulanan untuk mobil listrik yang diproduksi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>