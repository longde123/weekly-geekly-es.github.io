<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÖ üßö üë≥üèø Sin un minuto sin conexi√≥n: elegir un enrutador LTE industrial üë©üèæ‚Äçü§ù‚Äçüë®üèΩ üéì üõê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En muchos sistemas, la conexi√≥n a Internet es cr√≠tica, e incluso unos pocos minutos de tiempo de inactividad pueden ser costosos, por ejemplo, en caje...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sin un minuto sin conexi√≥n: elegir un enrutador LTE industrial</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443196/"><img alt="Enrutador industrial LTE Termit CR41P, con antenas Triad MA-2697" src="https://habrastorage.org/webt/qg/ns/hi/qgnshie5u3t0apgwhslrve0tan8.jpeg"><br><br>  En muchos sistemas, la conexi√≥n a Internet es cr√≠tica, e incluso unos pocos minutos de tiempo de inactividad pueden ser costosos, por ejemplo, en cajeros autom√°ticos, alarmas, sistemas de monitoreo y control de acceso. <br>  Tales sistemas usualmente usan varias conexiones a Internet y cambian autom√°ticamente entre diferentes canales si el canal principal no est√° disponible. <br><br>  Estaba cansado de inventar yo mismo la <abbr title="funci√≥n de cambio autom√°tico al canal de respaldo, en caso de accidente en el canal principal">conmutaci√≥n</abbr> por <abbr title="funci√≥n de cambio autom√°tico al canal de respaldo, en caso de accidente en el canal principal">error</abbr> en m√≥dems USB, y quer√≠a delegar esto en una pieza de hardware inteligente separada.  Decid√≠ comparar varios enrutadores industriales para averiguar si est√°n a la altura de su nombre y cu√°nto mejor que mis muletas.  El art√≠culo comparar√° los enrutadores de los fabricantes iRZ, Termit, Robustel. <br><br>  Requisitos b√°sicos para enrutadores: <br><br><ul><li>  <b>2 tarjetas SIM y conmutaci√≥n autom√°tica entre operadores</b> : el enrutador debe detectar autom√°ticamente la p√©rdida de comunicaci√≥n en un operador y cambiar a la copia de seguridad.  Esto es especialmente importante para los sistemas m√≥viles cuando la cobertura celular no es perfecta. </li><li>  <b>Conexi√≥n Ethernet</b> : el sistema principal debe ver solo la puerta de enlace predeterminada y no debe conocer el subsistema del m√≥dem en el lado del enrutador y la conmutaci√≥n de canales, por lo tanto, no tiene USB. </li><li>  <b>Soporte para protocolos VPN modernos: IKEv2 y OpenVPN</b> : para facilitar la administraci√≥n y para no depender de direcciones IP reales, los enrutadores deben ser capaces de VPN.  Al mismo tiempo, admite no solo PPTP y L2TP obsoletos, sino tambi√©n protocolos modernos. </li><li>  <b>(Opcional) Soporte de GPS, la disponibilidad de GPIO, interfaces seriales RS-232/485</b> : estas funciones no son necesarias para nuestras tareas, pero tambi√©n las consideraremos como una ventaja, que puede ser √∫til para alguien. </li></ul><a name="habracut"></a><br><h2>  El problema de las muletas caseras. </h2><br><img alt="Enrutador Zyxel con dos m√≥dems USB, montados en la pared. Los cables de antenas externas est√°n conectados al m√≥dem." src="https://habrastorage.org/webt/hx/cs/r7/hxcsr7imx1mue6ba45gotbl1lsq.jpeg">  <font color="99999">Enrutador Wi-Fi con dos m√≥dems USB (Foto: Dmitry Bevza dgl.ru)</font> <br><br>  <b>Conmutaci√≥n por error</b> : conmutaci√≥n de emergencia del canal de Internet a la copia de seguridad, en caso de inaccesibilidad del canal principal. <br><br>  Por lo general, para reservar canales de Internet, utilic√© un enrutador Wi-Fi dom√©stico con firmware OpenWRT y el paquete <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mwan3</a> .  Le permite configurar la copia de seguridad autom√°tica y el equilibrio entre varios canales de Internet, incluso entre una conexi√≥n por cable y un m√≥dem USB. <br><br>  El principal inconveniente de este enfoque es el equipo heterog√©neo y el dise√±o endeble de los m√≥dems USB externos.  Me gustaron los m√≥dems Huawei E3372h con firmware HiLink (emulaci√≥n Ethernet).  Estos m√≥dems son bastante estables y baratos, pero cuando se conectan antenas externas, toda la estructura se vuelve muy d√©bil.  Los cables duros de la antena crean una palanca, y los m√≥dems salen del puerto USB, y el conector de antena CRC9 en s√≠ no es tan confiable como el SMA, ya que no tiene un montaje de tornillo. <br><br><img alt="M√≥dem Huawei E3372h. El conector de antena en m√≥dems USB no permite la fijaci√≥n confiable de antenas externas. Son f√°ciles de tirar" src="https://habrastorage.org/webt/ro/xo/0f/roxo0fopuzd4u-7llqo3-zvmqvc.jpeg"><br>  <font color="99999">Los conjuntos en m√≥dems USB externos son muy fr√°giles: los conectores de antena no son fijos, los m√≥dems se caen de los puertos</font> <br><br>  El dise√±o de dos m√≥dems USB con antenas externas ten√≠a que ser muy dif√≠cil de arreglar, pero el da√±o f√≠sico y la ca√≠da de los puertos segu√≠an siendo el principal problema.  Esta soluci√≥n es adecuada para la instalaci√≥n est√°tica en lugares de dif√≠cil acceso, pero no es absolutamente adecuada para la instalaci√≥n en un autom√≥vil o en un panel el√©ctrico en un riel DIN. <br><br>  A veces, el subsistema USB colgaba en los enrutadores y los m√≥dems dejaban de estar disponibles.  Tuve que escribir un <abbr title="watchdog: un script de watchdog que reinicia el dispositivo en caso de bloqueo u otros problemas">script de vigilancia</abbr> que supervisar√≠a por separado la disponibilidad de m√≥dems, adem√°s de mwan3, que supervisa la disponibilidad de Internet.  En alg√∫n momento, estaba cansado de eso, y comenc√© a buscar una soluci√≥n en una caja, donde todos los problemas ya hab√≠an sido resueltos por m√≠. <br><br><h2>  Cuadro de comparaci√≥n de modelos </h2><br>  Los enrutadores industriales son m√°s caros que los enrutadores dom√©sticos, incluso con la compra por separado de m√≥dems.  Por lo tanto, el criterio principal para elegir modelos para la revisi√≥n fue el costo.  En nuestro caso, no se necesitan funciones adicionales como Wi-Fi, pines GPIO y GPS, pero a√∫n as√≠ los compararemos como opciones que afectan el costo. <br><br><div class="scrollable-table"><table><tbody><tr><th>  Modelo </th><th>  2 SIM </th><th>  WAN cableada </th><th>  Puertos LAN </th><th>  Wifi </th><th>  GPS </th><th>  Precio </th></tr><tr><td>  <b>Termit CR41P</b> <div style="text-align:center;"><img width="70" src="https://habrastorage.org/webt/x9/wg/dw/x9wgdwh45lcy28q7-sdqpfdouv4.jpeg"></div></td><td align="center">  <b><font color="green">‚Å£‚Å£‚Å¢‚Å¢ ‚úì</font></b> </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  4 4 </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  00013 000 ‚ÇΩ </td></tr><tr><td>  <b>Robustel r2000</b> <div style="text-align:center;"><img width="70" src="https://habrastorage.org/webt/ut/it/4y/utit4yd9chibkuq-sca7wthlh5w.jpeg"></div></td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  2 </td><td align="center">  <b><font color="red">X</font></b> </td><td align="center">  <b><font color="red">X</font></b> </td><td align="center">  00012 000 ‚ÇΩ </td></tr><tr><td>  <b>iRZ RU22W</b> <div style="text-align:center;"><img width="70" src="https://habrastorage.org/webt/zj/gw/fq/zjgwfqzulchzwdwbxpp3hwnnlg4.jpeg"></div></td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  4 4 </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  00015 000 ‚ÇΩ </td></tr></tbody></table></div><br><h2>  Metodolog√≠a de prueba </h2><br>  La tarea principal de los enrutadores comparados es proporcionar Internet ininterrumpida en cualquier condici√≥n, por lo tanto, compararemos qu√© tan bien el enrutador cambia al canal de respaldo en caso de problemas en el principal.  Para hacer esto, simularemos una p√©rdida de comunicaci√≥n y mediremos en el lado del servidor la rapidez con la que el enrutador pudo volver a conectarse. <br><br>  Como host de destino, se conectar√° un peque√±o enrutador TP-Link MR3020 a cada enrutador probado, que actuar√° como una computadora con una carga √∫til.  Ejecutar√° OpenVPN conectado al servidor.  El monitoreo se iniciar√° en el servidor, monitoreando la disponibilidad de la direcci√≥n dentro del t√∫nel VPN. <br><br>  Es decir, en el lado del servidor, se supervisar√° una direcci√≥n IP fija asignada a mr3020 a trav√©s de un t√∫nel VPN.  Independientemente del canal por el que pase el tr√°fico en el enrutador, el servidor de supervisi√≥n interactuar√° con una direcci√≥n.  En consecuencia, si la direcci√≥n est√° disponible, esto significa que el enrutador ha cambiado el canal con √©xito y que hay Internet en la red detr√°s de NAT. <br>  Para restaurar el t√∫nel OpenVPN lo m√°s r√°pido posible, en el lado del servidor, establezca la opci√≥n de mantenimiento en los valores m√≠nimos y desactive el cifrado: <br><br><pre><code class="plaintext hljs">cipher none ping 1 ping-restart 4</code> </pre> <br>  Tenga en cuenta que lleva tiempo volver a conectar la VPN y, en realidad, Internet se est√° recuperando m√°s r√°pido de lo que se puede ver en los gr√°ficos.  Sin embargo, dicha prueba permite una evaluaci√≥n m√°s honesta del hecho de la conmutaci√≥n de canales, ya que muestra que los clientes detr√°s del enrutador pudieron restaurar las conexiones TCP y volver a la operaci√≥n normal. <br><br><img alt="Dise√±o de banco de pruebas. El enrutador MR3020 act√∫a como una computadora con un cliente VPN en ejecuci√≥n. El servidor remoto est√° monitoreando la direcci√≥n IP del cliente VPN." src="https://habrastorage.org/webt/6r/c3/qg/6rc3qgexexinb7dyzxrn57fva4u.jpeg"><br>  <font color="99999">Un TP-Link MR3020 est√° conectado a cada enrutador, con un t√∫nel VPN en ejecuci√≥n.</font>  <font color="99999">Se considera que Internet en funcionamiento es la disponibilidad de la direcci√≥n IP 10.0.0.1 en el lado del servidor</font> <br><br><h3>  PingPlotter - programa de monitoreo </h3><br>  El programa de monitoreo y el servidor OpenVPN est√°n ubicados en la misma computadora f√≠sica que el servidor VPN.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Monitorear√© la</a> utilidad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MultiPing</a> usando solicitudes de eco ICMP regulares.  El intervalo de solicitud es de 1 segundo; esto le permite ver en el gr√°fico incluso la inaccesibilidad a corto plazo del host. <br><br><img alt="Programa PingPlotter para monitorear la disponibilidad del host. Consola anal√≥gica MTR." src="https://habrastorage.org/webt/xl/jo/hr/xljohrfhzsbcqlkvxibmyg9r5oi.jpeg"><br>  <font color="99999">PingPlotter dibuja gr√°ficos de ping convenientes que muestran retraso y p√©rdida de paquetes</font> <br><br>  Lo admito, intent√© durante mucho tiempo elegir un sistema de monitoreo.  Prob√© los scripts zabbix, cacti, bash + rrdtool, pero todo parec√≠a demasiado complicado para mis tareas.  Como resultado, encontr√© el excelente programa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PingPlotter</a> y su versi√≥n simplificada sin rastreo de ruta: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MultiPing</a> .  El programa permite el monitoreo en tiempo real de un grupo de hosts con una resoluci√≥n de hasta 1 segundo y dibujar gr√°ficos detallados. <br><br><h3>  Antena </h3><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/rp/zb/-n/rpzb-ng9kxn09dwutarnwi3lke8.jpeg"></div><br>  <font color="99999">Antena de banda ancha Triad MA-2697, adecuada para los rangos b√°sicos de comunicaciones celulares</font> <br><br>  Para excluir diferentes calidades de recepci√≥n debido a diferentes antenas, las mismas antenas <b>Triad MA-2697</b> se conectar√°n a todos los enrutadores.  Seg√∫n el fabricante, la antena es de banda ancha y funciona en las bandas GSM-900 \ 1800 MHz, 3G-2100 MHz, Wi-Fi-2400 MHz y 4G WiMAX-2600 MHz.  No comprobar√© la calidad de la antena.  Incluso si es malo, todos los enrutadores funcionar√°n en las mismas condiciones de recepci√≥n. <br><br><h3>  Operadores m√≥viles </h3><br>  Las tarjetas SIM MegaFon y MTS se instalar√°n en cada enrutador, con la tarifa habitual para individuos.  El meg√°fono se seleccionar√° como el principal, MTS en espera.  No hay l√≥gica en tal prioridad, la elecci√≥n es aleatoria.  En el sitio de prueba, ambos operadores tienen una cobertura LTE igualmente buena. <br><br><h3>  Desventajas del banco de pruebas. </h3><br><img alt="Todos los enrutadores conectados a la vez en la mesa. Un mont√≥n de cables y antenas." src="https://habrastorage.org/webt/ws/hh/0x/wshh0xrb4btuvtynh7i1nvgc4tw.jpeg"><br>  <font color="99999">Banco de pruebas desplegado sobre una mesa</font> <br><br>  Como el banco de pruebas es estacionario en interiores, la calidad de la cobertura de la red celular no cambia.  En tales condiciones, es imposible simular artificialmente una cobertura deficiente cuando hay una se√±al de red celular, pero las p√©rdidas de paquetes son demasiado grandes.  En el buen sentido, era necesario colocar un soporte en un tren o autom√≥vil, y llevarlo a lugares lejos de la ciudad.  Entonces ser√≠a posible comparar qu√© tan bien funcionan los m√≥dems integrados con una mala se√±al. <br>  En nuestro caso, solo podemos recrear una p√©rdida completa de comunicaci√≥n en el canal principal y ver qu√© tan r√°pido el enrutador cambia al respaldo. <br><br><h2>  Termit CR41P </h2><br>  El enrutador es proporcionado por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Digital Angel (digitalangel.ru)</a> <br><img src="https://habrastorage.org/webt/02/jr/46/02jr46l9ppy9zhzhxft4difgzqw.jpeg"><br><br>  <b>SoC</b> : Atheros AR9344 rev.  3 <br>  <b>RAM:</b> 128 MB <br>  <b>Memoria Flash:</b> 16 MB <br>  <b>Wi-Fi:</b> 802.11n (2.4GHz) <br>  <b>M√≥dem</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Quectel EC25-E</a> (LTE Cat 4) <br>  <b>Firmware</b> : basado en OpenWRT 15/05/1 <br>  <b>Host USB</b> <br>  <b>MicroSD</b> <br>  <b>Montaje en riel DIN</b> <br>  <b>GPS / GLONASS:</b> antena activa de 3V <br>  <b>Interfaces seriales:</b> RS-232/485 <br>  <b>Conclusiones de E / S:</b> 2 entradas digitales (0-3V / 0-30V, aisladas galv√°nicamente), 1 entrada anal√≥gica (0-24V), 1 salida digital (30V, colector abierto de 250 mA), 1 salida de rel√© (40V, 4A SPST ) <br><br><img src="https://habrastorage.org/webt/ng/xk/nj/ngxknj3_9ngbozqpdctv0toxxiq.jpeg"><br><br>  Para instalar la tarjeta SIM, debe desenroscar los cuatro tornillos y quitar la cubierta posterior. <br><br>  Bueno, esta es una ocasi√≥n para considerar el interior con m√°s detalle. <br><br> <a href=""><img width="200" src="https://habrastorage.org/webt/ks/9n/gw/ks9ngwqzqrk8cdyteyryts03rps.jpeg"></a> <a href=""><img width="200" src="https://habrastorage.org/webt/sx/fq/xw/sxfqxwf0yj8weghadcmgm2zzzly.jpeg"></a> <a href=""><img width="200" src="https://habrastorage.org/webt/9u/bc/ex/9ubcexugw11vsq7ijtqmf4jh8xa.jpeg"></a> <a href=""><img width="130" src="https://habrastorage.org/webt/fp/uu/r8/fpuur8zzgn5_xr_js_zerdo1bus.jpeg"></a>  <font color="99999">clicable</font> <br><br>  La parte del m√≥dem est√° hecha en forma de escudo, que se usa en el tablero principal. <br>  En la esquina puede ver el rel√© para una salida de carga potente a los pines de E / S. <br><br>  El enrutador con m√°s funciones en la revisi√≥n.  Tiene una WAN cableada y tambi√©n le permite usar Wi-Fi en el modo estaci√≥n (cliente), como una WAN separada.  Es decir, puede tener cuatro canales de respaldo de Internet. <br><br><img src="https://habrastorage.org/webt/xg/ct/vx/xgctvxwfg5i2_knyago4zpuxidq.png"><br><br>  La interfaz web emite inmediatamente LuCI desde OpenWRT.  Esto se puede ver tanto en el dise√±o, que no intentaron disfrazar, como en las rutas en la URL.  En mi opini√≥n, esto es m√°s bien una ventaja, ya que facilita terminar el sistema por s√≠ mismo.  Funciones industriales agregadas al firmware: Modbus, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">VRRP</a> , MQTT.  A trav√©s de Modbus y MQTT, puede controlar las funciones b√°sicas, obtener el estado de la red, las coordenadas GPS, la temperatura, cambiar los perfiles, reiniciar el enrutador, administrar los pines de E / S. <br><br>  El monitoreo de los canales de Internet se realiza a trav√©s del paquete <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">multiwan</a> , que se llama obsoleto en la wiki de OpenWRT.  En cambio, se recomienda mwan3. <br><br><div class="spoiler">  <b class="spoiler_title">Descripci√≥n general de la interfaz web y caracter√≠sticas adicionales</b> <div class="spoiler_text"><h3>  Conclusiones de E / S </h3><br>  Los pines de E / S se administran a trav√©s de la interfaz web, puede ver inmediatamente el estado y cambiar el nombre de cada pin.  Esto no reemplazar√° un microcontrolador completo, pero puede ser adecuado para una automatizaci√≥n simple.  Por ejemplo, abra la puerta o levante la barrera por SMS, MQTT o solicitud HTTP, realice una acci√≥n cuando se active el sensor y env√≠e una notificaci√≥n al respecto.  Funcionalidad bastante interesante que le permite sobrevivir con un solo dispositivo. <br><br><img width="700" alt="Interfaz de configuraci√≥n de disparo para la entrada anal√≥gica del enrutador Termit CR41P" src="https://habrastorage.org/webt/v6/v6/zg/v6v6zgacpsc0cur47tedyaeppvc.png"><br>  <font color="99999">Interfaz de configuraci√≥n de disparo para entrada anal√≥gica.</font>  <font color="99999">Puede especificar el rango de voltaje en el que funcionar√° el disparador o configurarlo para que se dispare cuando salga del rango</font> <br><br><h3>  Interfaces seriales RS-232/485 </h3><br>  F√≠sicamente, la interfaz RS-232 est√° hecha en forma de un conector DB9 (puerto COM), y RS-485 est√° en forma de un bloque de terminales extra√≠ble.  En la interfaz web, puede seleccionar cuatro modos de operaci√≥n de puerto: <br><br><ul><li>  <b>Consola del sistema</b> : acceso SSH </li><li>  <b>Serie sobre IP</b> : reenv√≠o de un puerto serie a trav√©s de Internet </li><li>  <b>Modbus Gateway</b> - <b>Modbus</b> TCP &lt;-&gt; Convertidor RTU </li><li>  <b>Cliente NTRIP</b> - transmisi√≥n de datos desde GPS </li></ul><br><img alt="Selecci√≥n del modo de funcionamiento de los puertos serie en el enrutador Termit CR41P" src="https://habrastorage.org/webt/gu/3w/sw/gu3wswygt6lcqwfryyxmafu66ps.png"><br>  <font color="99999">Elegir un modo de funcionamiento del puerto serie</font> <br><br><h3>  GPS </h3><br>  El m√≥dulo GPS est√° integrado en el chip del m√≥dem y est√° disponible como dispositivo USB.  Le permite rastrear las coordenadas del dispositivo y sincronizar el reloj del sistema a trav√©s de GPS, mientras que el enrutador puede ser un servidor NTP y proporcionar una hora precisa para los dispositivos en la red, incluso sin Internet.  Hay una funci√≥n de <abbr title="Funci√≥n de zonificaci√≥n geogr√°fica">Geofencing</abbr> que le permite establecer un √°rea geogr√°fica como un disparador que se dispara cuando visita o abandona una zona.  Puede ser √∫til para roaming al salir de su regi√≥n de origen.  Solo se puede definir una zona, y solo dentro de un radio de un punto, es decir, la zona siempre es un c√≠rculo. <br><br><img src="https://habrastorage.org/webt/iu/f5/qu/iuf5qu-jiyfxqoddzb-pnsmkviw.png"><br>  <font color="99999">Establecer el √°rea geogr√°fica para que se dispare el gatillo</font> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Salida Dmesg</b> <div class="spoiler_text">  [0.000000] Linux versi√≥n 3.18.44 (gediminas @ gediminas-H110M-S2H) (gcc versi√≥n 4.8.3 (OpenWrt / Linaro GCC 4.8-2014.04 r40569)) # 14 viernes 25 de mayo 15:09:41 EEST 2018 <br>  [0.000000] MyLoader: sysp = 30fe861a, boardp = 21046795, partes = 5c8953fe <br>  [0.000000] bootconsole [early0] habilitado <br>  [0.000000] La revisi√≥n de CPU0 es: 0001974c (MIPS 74Kc) <br>  [0.000000] SoC: Atheros AR9344 rev 3 <br>  [0.000000] Mapa RAM f√≠sico determinado: <br>  [0.000000] memoria: 08000000 @ 00000000 (utilizable) <br>  [0.000000] Initrd no encontrado o vac√≠o - deshabilitando initrd <br>  [0.000000] Rangos de zona: <br>  [0.000000] Normal [mem 0x00000000-0x07ffffff] <br>  [0.000000] Inicio de zona m√≥vil para cada nodo <br>  [0.000000] Rangos de nodos de memoria temprana <br>  [0.000000] nodo 0: [mem 0x00000000-0x07ffffff] <br>  [0.000000] Nodo de configuraci√≥n de Initmem 0 [mem 0x00000000-0x07ffffff] <br>  [0.000000] En el nodo 0 p√°ginas totales: 32768 <br>  [0.000000] free_area_init_node: nodo 0, pgdat 803802b0, node_mem_map 81000000 <br>  [0.000000] Zona normal: 256 p√°ginas utilizadas para memmap <br>  [0.000000] Zona normal: 0 p√°ginas reservadas <br>  [0.000000] Zona normal: 32768 p√°ginas, lote LIFO: 7 <br>  [0.000000] Cach√© de instrucciones primarias 64kB, VIPT, 4 v√≠as, tama√±o de l√≠nea 32 bytes. <br>  [0.000000] Cach√© de datos primarios 32kB, 4 v√≠as, VIPT, alias de cach√©, tama√±o de l√≠nea 32 bytes <br>  [0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc = 1 * 32768 <br>  [0.000000] pcpu-alloc: [0] 0 <br>  [0.000000] Construy√≥ 1 listas de zonas en orden de Zona, agrupando la movilidad.  P√°ginas totales: 32512 <br>  [0.000000] L√≠nea de comando del n√∫cleo: placa = TLT-RUT900 consola = ttyS0,115200 rootfstype = squashfs, jffs2 noinitrd lpj = 1370112 quiet loglevel = 3 <br>  [0.000000] Entradas de tabla hash PID: 512 (orden: -1, 2048 bytes) <br>  [0.000000] Entradas de la tabla hash de cach√© de dentry: 16384 (orden: 4, 65536 bytes) <br>  [0.000000] Entradas de la tabla hash de Inode-cache: 8192 (orden: 3, 32768 bytes) <br>  [0.000000] Escribiendo registro ErrCtl = 00000000 <br>  [0.000000] Readback ErrCtl register = 00000000 <br>  [0.000000] Memoria: 125728K / 131072K disponible (c√≥digo de kernel 2611K, 155K rwdata, 552K rodata, 256K init, 189K bss, 5344K reservado) <br>  [0.000000] SLUB: HWalign = 32, Order = 0-3, MinObjects = 0, CPUs = 1, Nodes = 1 <br>  [0.000000] NR_IRQS: 83 <br>  [0.000000] Relojes: CPU: 550,000MHz, DDR: 400,000MHz, AHB: 200,000MHz, Ref: 40,000MHz <br>  [0.000000] Calibraci√≥n del valor predeterminado del bucle de retardo (omitido) ... 274.02 BogoMIPS (lpj = 1370112) <br>  [0.000000] pid_max: predeterminado: 32768 m√≠nimo: 301 <br>  [0.000000] Entradas de la tabla hash Mount-cache: 1024 (orden: 0, 4096 bytes) <br>  [0.000000] Entradas de la tabla hash de Mountpoint-cache: 1024 (orden: 0, 4096 bytes) <br>  [0.000000] NET: protocolo registrado familia 16 <br>  [0.000000] MIPS: la m√°quina es TELTONIKA TLT-RUT900 <br>  [0.450000] pca953x 0-0074: soporte de interrupci√≥n no compilado en <br>  [0.450000] i2c-gpio i2c-gpio.0: usando los pines 17 (SDA) y 16 (SCL) <br>  [0.450000] Cambi√≥ a clocksource MIPS <br>  [0.450000] NET: protocolo registrado familia 2 <br>  [0.450000] TCP estableci√≥ entradas en la tabla hash: 1024 (orden: 0, 4096 bytes) <br>  [0.450000] Entradas de tabla hash de enlace TCP: 1024 (orden: 0, 4096 bytes) <br>  [0.450000] TCP: Tablas hash configuradas (establecido 1024 enlace 1024) <br>  [0.450000] TCP: reno registrado <br>  [0.450000] Entradas de tabla hash UDP: 256 (orden: 0, 4096 bytes) <br>  [0.450000] Entradas de tabla hash UDP-Lite: 256 (orden: 0, 4096 bytes) <br>  [0.450000] NET: protocolo registrado familia 1 <br>  [0.450000] PCI: CLS 0 bytes, predeterminado 32 <br>  [0.460000] entradas de la tabla hash futex: 256 (orden: -1, 3072 bytes) <br>  [0.460000] squashfs: versi√≥n 4.0 (31/01/2009) Phillip Lougher <br>  [0.460000] jffs2: versi√≥n 2.2 (NAND) (RESUMEN) (LZMA) (RTIME) (CMODE_PRIORITY) ¬© 2001-2006 Red Hat, Inc. <br>  [0.460000] msgmni se ha establecido en 245 <br>  [0.460000] io planificador noop registrado <br>  [0.460000] Fecha l√≠mite del planificador io registrada (predeterminado) <br>  [0.460000] Serie: controlador 8250/16550, 1 puertos, uso compartido de IRQ deshabilitado <br>  [0.460000] consola [ttyS0] deshabilitada <br>  [0.480000] serial8250.0: ttyS0 en MMIO 0x18020000 (irq = 11, base_baud = 2500000) es un 16550A <br>  [0.480000] consola [ttyS0] habilitada <br>  [0.480000] bootconsole [early0] deshabilitado <br>  [0.480000] ar934x-hs-uart.0: ttyATH0 en MMIO 0x18500000 (irq = 14, base_baud = 2500000) es un UART AR934X <br>  [0.500000] m25p80 spi0.0: encontrado gd25q128, esperado m25p80 <br>  [0.500000] m25p80 spi0.0: gd25q128 (16384 Kbytes) <br>  [0.500000] 7 particiones teltonika encontradas en el dispositivo MTD spi0.0 <br>  [0.500000] Creaci√≥n de 7 particiones MTD en "spi0.0": <br>  [0.500000] 0x000000000000-0x000000020000: "u-boot" <br>  [0.500000] 0x000000020000-0x000000030000: "config" <br>  [0.500000] 0x000000030000-0x000000040000: "arte" <br>  [0.500000] 0x000000040000-0x0000001630ac: "n√∫cleo" <br>  [0.500000] 0x0000001630ac-0x000000f70000: "rootfs" <br>  [0.500000] mtd: dispositivo 4 (rootfs) configurado para ser el sistema de archivos ra√≠z <br>  [0.510000] Se encontraron 1 particiones divididas en squashfs en los rootfs del dispositivo MTD <br>  [0.510000] 0x000000b30000-0x000000f70000: "rootfs_data" <br>  [0.510000] 0x000000040000-0x000000f70000: "firmware" <br>  [0.510000] 0x000000f70000-0x000001000000: "registro de eventos" <br>  [0.520000] libphy: ag71xx_mdio: sondeado <br>  [1.110000] ag71xx-mdio.1: Se encontr√≥ un conmutador incorporado AR934X <br>  [1.140000] eth0: Atheros AG71xx en 0xba000000, irq 5, modo: GMII <br>  [1.730000] ag71xx ag71xx.0: conectado a PHY en ag71xx-mdio.1: 04 [uid = 004dd042, driver = PHY gen√©rico] <br>  [1.730000] eth1: Atheros AG71xx en 0xb9000000, irq 4, modo: MII <br>  [1.740000] TCP: c√∫bico registrado <br>  [1.740000] NET: protocolo registrado familia 17 <br>  [1.740000] puente: el filtrado autom√°tico a trav√©s de arp / ip / ip6tables ha quedado en desuso.  Actualice sus scripts para cargar br_netfilter si necesita esto. <br>  [1.740000] Registro de firewall registrado <br>  [1.740000] 8021q: Soporte de VLAN 802.1Q v1.8 <br>  [1.750000] VFS: ra√≠z montada (sistema de archivos squashfs) de solo lectura en el dispositivo 31: 4. <br>  [1.750000] Liberaci√≥n de memoria de kernel no utilizada: 256K (803a0000 - 803e0000) <br>  [5.030000] usbcore: nuevo controlador de interfaz usbfs registrado <br>  [5.030000] usbcore: nuevo concentrador de controladores de interfaz registrado <br>  [5.030000] usbcore: nuevo controlador de dispositivo usb registrado <br>  [5.050000] Subsistema SCSI inicializado <br>  [5.050000] ehci_hcd: Controlador de host USB 2.0 'mejorado' (EHCI) <br>  [5.050000] ehci-platform: controlador de plataforma gen√©rico EHCI <br>  [5.050000] ehci-platform ehci-platform: EHCI Host Controller <br>  [5.050000] ehci-platform ehci-platform: nuevo bus USB registrado, bus asignado n√∫mero 1 <br>  [5.060000] ehci-platform ehci-platform: TX-TX IDP arreglado habilitado <br>  [5.060000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000 <br>  [5.080000] ehci-platform ehci-platform: USB 2.0 iniciado, EHCI 1.00 <br>  [5.080000] concentrador 1-0: 1.0: concentrador USB encontrado <br>  [5.080000] concentrador 1-0: 1.0: 1 puerto detectado <br>  [5.080000] uhci_hcd: controlador de interfaz de controlador de host universal USB <br>  [5.090000] usbcore: nuevo controlador de interfaz registrado usb-storage <br>  [5.400000] usb 1-1: nuevo dispositivo USB de alta velocidad n√∫mero 2 utilizando ehci-platform <br>  [5.550000] concentrador 1-1: 1.0: concentrador USB encontrado <br>  [5.550000] concentrador 1-1: 1.0: 3 puertos detectados <br>  [5.830000] usb 1-1.1: nuevo dispositivo USB de velocidad completa n√∫mero 3 usando ehci-platform <br>  [6.620000] ra√≠z_montaje: carga de kmods desde la superposici√≥n interna <br>  [7.080000] jffs2: aviso: (339) jffs2_build_xattr_subsystem: completar el subsistema xattr de construcci√≥n, 0 de xdatum (0 sin marcar, 0 hu√©rfano) y 0 de xref (0 muertos, 0 hu√©rfanos) encontrados. <br>  [7.080000] bloque: intentando cargar / tmp / jffs_cfg / upper / etc / config / fstab <br>  [7.130000] bloque: extroot: no configurado <br>  [7.240000] jffs2: aviso: (336) jffs2_build_xattr_subsystem: completar el subsistema xattr de construcci√≥n, 0 de xdatum (0 sin marcar, 0 hu√©rfano) y 0 de xref (0 muertos, 0 hu√©rfanos) encontrados. <br>  Bloque [7.430000]: intentando cargar / tmp / jffs_cfg / upper / etc / config / fstab <br>  [7.480000] bloque: extroot: no configurado <br>  [7.480000] ra√≠z_montaje: cambio a superposici√≥n jffs2 <br>  [9.980000] aleatorio: lectura urandom ubusd con 18 bits de entrop√≠a disponibles <br>  [11.260000] NET: protocolo registrado familia 10 <br>  [11.410000] ntfs: controlador 2.1.31 [Banderas: M√ìDULO R / O]. <br>  [11.430000] Inicializando el conector XFRM netlink <br>  [11.430000] NET: protocolo registrado familia 15 <br>  [11.440000] tun: controlador de dispositivo TUN / TAP universal, 1.6 <br>  [11.440000] tun: ¬© 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt; <br>  [11.500000] l2tp_core: controlador principal L2TP, V2.0 <br>  [11.500000] l2tp_netlink: interfaz de enlace de red L2TP <br>  [11.510000] gre: controlador de demultiplexor GRE sobre IPv4 <br>  [11.510000] ip_gre: controlador de t√∫nel GRE sobre IPv4 <br>  [11.540000] ip6_tables: ¬© 2000-2006 Netfilter Core Team <br>  [11.580000] nf_conntrack versi√≥n 0.5.0 (1968 cubos, 7872 m√°x.) <br>  [12.110000] lp: controlador cargado pero no se encontraron dispositivos <br>  [12.130000] ppdev: controlador de puerto paralelo de espacio de usuario <br>  [12.290000] clasificador u32 <br>  [12.290000] verificaci√≥n del dispositivo de entrada en <br>  [12.290000] Acciones configuradas <br>  [12.330000] Acci√≥n espejo / redireccionamiento en <br>  [12.460000] cdc_acm 1-1.1: 1.0: este dispositivo no puede hacer llamadas por s√≠ solo.  No es un m√≥dem. <br>  [12.460000] cdc_acm 1-1.1: 1.0: ttyACM0: dispositivo USB ACM <br>  [12.460000] usbcore: nuevo controlador de interfaz registrado cdc_acm <br>  [12.460000] cdc_acm: controlador del modelo de control abstracto USB para m√≥dems USB y adaptadores ISDN <br>  [12.470000] usbcore: nuevo controlador de interfaz registrado cdc_wdm <br>  [12.500000] Carga de m√≥dulos con respaldo de la versi√≥n de Linux v4.4-rc5-1913-gc8fdf68 <br>  [12.500000] Backport generado por backports.git backports-20151218-0-g2f58d9d <br>  [12.690000] Ebtables v2.0 registrado <br>  [12.730000] ip_tables: ¬© 2000-2006 Netfilter Core Team <br>  [12.820000] Mensajes de Netfilter a trav√©s de NETLINK v0.30. <br>  [12.850000] usbcore: nuevo controlador de interfaz registrado usblp <br>  [12.890000] usbcore: nuevo controlador de interfaz registrado usbserial <br>  [12.890000] usbcore: nuevo controlador de interfaz registrado usbserial_generic <br>  [12.890000] usbserial: soporte serie USB registrado para gen√©ricos <br>  [12.960000] xt_coova: listo <br>  [13.050000] xt_time: la zona horaria del n√∫cleo es -0000 <br>  [13.050000] usbcore: nuevo controlador de interfaz registrado ark3116 <br>  [13.050000] usbserial: soporte serie USB registrado para ark3116 <br>  [13.060000] usbcore: nuevo controlador de interfaz registrado belkin_sa <br>  [13.060000] usbserial: soporte serie USB registrado para el adaptador serie USB Belkin / Peracom / GoHubs <br>  [13.090000] usbcore: nuevo controlador de interfaz registrado cdc_ether <br>  [13.170000] usbcore: nuevo controlador de interfaz registrado cdc_ncm <br>  [13.860000] usbcore: nuevo controlador de interfaz registrado ch341 <br>  [13.860000] usbserial: soporte serie USB registrado para ch341-uart <br>  [13.860000] usbcore: nuevo controlador de interfaz registrado cp210x <br>  [13.860000] usbserial: soporte serie USB registrado para cp210x <br>  [13.860000] usbcore: nuevo controlador de interfaz registrado cypress_m8 <br>  [13.860000] usbserial: soporte serie USB registrado para DeLorme Earthmate USB <br>  [13.860000] usbserial: soporte serie USB registrado para HID-&gt; COM RS232 Adapter <br>  [13.860000] usbserial: soporte serie USB registrado para el adaptador Nokia CA-42 V2 <br>  [13.880000] usbcore: nuevo controlador de interfaz registrado ftdi_sio <br>  [13.880000] usbserial: soporte serie USB registrado para el dispositivo serie USB FTDI <br>  [13.880000] usbcore: nuevo controlador de interfaz registrado huawei_cdc_ncm <br>  [13.900000] usbcore: nueva clave de controlador de interfaz registrada <br>  [13.900000] usbserial: soporte serie USB registrado para Keyspan - (sin firmware) <br>  [13.900000] usbserial: soporte serie USB registrado para el adaptador de puerto Keyspan 1 <br>  [13.900000] usbserial: soporte serie USB registrado para el adaptador de puerto Keyspan 2 <br>  [13.900000] usbserial: soporte serie USB registrado para el adaptador de puerto Keyspan 4 <br>  [13.990000] ctnetlink v0.93: registro con nfnetlink. <br>  [14.020000] usbcore: nuevo controlador de interfaz registrado pl2303 <br>  [14.020000] usbserial: soporte serie USB registrado para pl2303 <br>  [14.030000] Controlador gen√©rico PPP versi√≥n 2.4.2 <br>  [14.040000] M√≥dulo de compresi√≥n PPP MPPE registrado <br>  [14.040000] NET: protocolo registrado familia 24 <br>  [14.040000] Controlador PPTP versi√≥n 0.8.5 <br>  [14.050000] usbcore: nuevo controlador de interfaz registrado qmi_wwan <br>  [14.140000] l2tp_ppp: controlador del n√∫cleo PPPoL2TP, V2.0 <br>  [14.140000] usbcore: nueva opci√≥n de controlador de interfaz registrada <br>  [14.140000] usbserial: soporte serie USB registrado para m√≥dem GSM (1 puerto) <br>  [14.160000] usbcore: nuevo controlador de interfaz registrado qcserial <br>  [14.160000] usbserial: soporte serie USB registrado para el m√≥dem USB Qualcomm <br>  [14.200000] ath: dominio de EEPROM: 0x0 <br>  [14.200000] ath: EEPROM indica que se debe usar el c√≥digo de pa√≠s predeterminado <br>  [14.200000] ath: haciendo EEPROM country-&gt; regdmn map search <br>  [14.200000] ath: mapas de pa√≠ses al c√≥digo regdmn: 0x3a <br>  [14.200000] ath: Pa√≠s alpha2 en uso: EE. UU. <br>  [14.200000] ath: Reparaci√≥n utilizada: 0x3a <br>  [14.210000] ieee80211 phy0: Algoritmo de control de velocidad seleccionado 'minstrel_ht' <br>  [14.210000] ieee80211 phy0: Atheros AR9340 Rev: 3 mem = 0xb8100000, irq = 47 <br>  [14.280000] mmc_spi spi0.1: ASUMIR una potencia de ranura de 3.2-3.4 V <br>  [17.330000] mmc_spi spi0.1: SD / MMC host mmc0, sin DMA, sin WP, sin apagado <br>  [17.330000] mmc_spi spi0.1: no es compatible con los voltios de la tarjeta <br>  [17.330000] mmc0: error -22 al inicializar la tarjeta SDIO <br>  [17.330000] mmc_spi spi0.1: no es compatible con los voltios de la tarjeta <br>  [17.330000] mmc0: error -22 al inicializar la tarjeta SD <br>  [17.340000] mmc_spi spi0.1: no es compatible con los voltios de la tarjeta <br>  [17.340000] mmc0: error -22 al inicializar la tarjeta MMC <br>  [20.700000] usb 1-1.3: nuevo dispositivo USB de alta velocidad n√∫mero 4 usando ehci-platform <br>  [20.920000] opci√≥n 1-1.3: 1.0: convertidor de m√≥dem GSM (1 puerto) detectado <br>  [20.920000] usb 1-1.3: convertidor de m√≥dem GSM (1 puerto) ahora conectado a ttyUSB0 <br>  [20.930000] opci√≥n 1-1.3: 1.1: convertidor de m√≥dem GSM (1 puerto) detectado <br>  [20.940000] usb 1-1.3: convertidor de m√≥dem GSM (1 puerto) ahora conectado a ttyUSB1 <br>  [20.950000] opci√≥n 1-1.3: 1.2: convertidor de m√≥dem GSM (1 puerto) detectado <br>  [20.950000] usb 1-1.3: convertidor de m√≥dem GSM (1 puerto) ahora conectado a ttyUSB2 <br>  [20.960000] opci√≥n 1-1.3: 1.3: convertidor de m√≥dem GSM (1 puerto) detectado <br>  [20.970000] usb 1-1.3: convertidor de m√≥dem GSM (1 puerto) ahora conectado a ttyUSB3 <br>  [21.000000] qmi_wwan 1-1.3: 1.4: cdc-wdm0: dispositivo USB WDM <br>  [21.000000] qmi_wwan 1-1.3: 1.4: Quectel EC21 y EC25 y EC20 R2.0 funcionan en modo RawIP <br>  [21.010000] qmi_wwan 1-1.3: 1.4 wwan0: registre 'qmi_wwan' en usb-ehci-platform-1.3, dispositivo WWAN / QMI, 3a: a9: 1d: 1a: 9e: d9 <br>  [25.600000] jffs2: aviso: (1621) jffs2_build_xattr_subsystem: subsistema xattr de construcci√≥n completo, 0 de xdatum (0 sin marcar, 0 hu√©rfano) y 0 de xref (0 muertos, 0 hu√©rfanos) encontrados. <br>  [28.880000] dispositivo eth0 entr√≥ en modo promiscuo <br>  [28.890000] br-lan: el puerto 1 (eth0) ingres√≥ al estado de reenv√≠o <br>  [28.890000] br-lan: el puerto 1 (eth0) ingres√≥ al estado de reenv√≠o <br>  [30.010000] br-lan: el puerto 1 (eth0) entr√≥ en estado deshabilitado <br>  [34.410000] dispositivo wlan0 entr√≥ en modo promiscuo <br>  [34.420000] br-lan: el puerto 2 (wlan0) ingres√≥ al estado de reenv√≠o <br>  [34.420000] br-lan: el puerto 2 (wlan0) ingres√≥ al estado de reenv√≠o <br>  [34.460000] br-lan: el puerto 2 (wlan0) entr√≥ en estado deshabilitado <br>  [41.530000] br-lan: el puerto 2 (wlan0) ingres√≥ al estado de reenv√≠o <br>  [41.530000] br-lan: el puerto 2 (wlan0) ingres√≥ al estado de reenv√≠o <br>  [43.530000] br-lan: el puerto 2 (wlan0) ingres√≥ al estado de reenv√≠o <br>  [51.350000] Puertos leds ON <br>  [54.390000] aleatorio: el grupo sin bloqueo se inicializa <br></div></div><br><h3>  Configuraci√≥n WAN </h3><br>  Interfaz de configuraci√≥n de prioridad para canales de Internet.  Puede seleccionar una primaria y dos de respaldo.  En nuestro caso, el m√≥dem se selecciona como primario y la WAN cableada como respaldo. <br><br><img src="https://habrastorage.org/webt/aw/v-/0f/awv-0fbsj-uhrbujobbdf1ajvju.png"><br>  <font color="99999">Priorizaci√≥n de canales de Internet.</font>  <font color="99999">Puede seleccionar primario y respaldo</font> <br><br>  Debe tenerse en cuenta que solo hay un m√≥dem (m√≥dulo de radio) en el enrutador, y solo una tarjeta SIM puede estar simult√°neamente en la red.  El sistema de monitoreo verifica la disponibilidad de Internet en cada canal mediante solicitudes de ping a un host determinado.  Al mismo tiempo, no puede verificar cu√°l de las dos tarjetas SIM tiene acceso a Internet, solo puede cambiar a otro canal: cableado o Wi-Fi.  Las condiciones para cambiar las tarjetas SIM se configuran por separado y no dependen de la supervisi√≥n general. <br><br><img src="https://habrastorage.org/webt/ac/sp/0i/acsp0ir4dzg4nn9scyraczlfx2e.png"><br>  <font color="99999">Configuraci√≥n de monitoreo de la disponibilidad del canal de Internet.</font>  <font color="99999">Puede especificar el host que se va a verificar, verificar los intervalos y la cantidad de intentos</font> <br><br>  Dado que el monitoreo de accesibilidad (paquete multiwan de openwrt) percibe al m√≥dem como una interfaz, no puede iniciar el cambio de SIM si Internet no est√° disponible en el m√≥dem.  El paquete multiwan solo puede cambiar la interfaz de red principal.  Las condiciones para cambiar la tarjeta SIM se establecen por separado, y solo se puede seleccionar lo siguiente entre las condiciones: se√±al d√©bil, l√≠mite de tr√°fico, roaming, sin red, sin conexi√≥n PPP.  Es decir, en algunos casos, el m√≥dem puede no cambiar la tarjeta SIM, incluso si no tiene internet.  Por ejemplo, si el operador tiene una falla en la red, mientras el m√≥dem tiene una direcci√≥n IP, o si el operador bloque√≥ el acceso a la red por falta de pago, y redirige la solicitud de un tal√≥n con una interfaz de pago.  En este caso, no se cumplir√° una sola condici√≥n para cambiar la tarjeta SIM, ya que existe una conexi√≥n formal con el operador. <br><br><img src="https://habrastorage.org/webt/z4/fn/_v/z4fn_v_hkzzwdmtt8v8zbqmstmy.png"><br>  <font color="99999">Establecer las condiciones para cambiar entre tarjetas SIM no funciona junto con el monitoreo de la disponibilidad de Internet</font> <br><br><h3>  Simulaci√≥n de choque </h3><br>  No pudimos encontrar una manera de simular mediante programaci√≥n las condiciones para cambiar la tarjeta SIM a la de respaldo en este enrutador, por lo que verificaremos el cambio al canal cableado de respaldo.  Para hacer esto, desconecte las antenas del enrutador y mire el gr√°fico.  El tiempo de conmutaci√≥n es un promedio de 12-15 segundos, teniendo en cuenta la restauraci√≥n de la conexi√≥n VPN.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puede reducir este tiempo reduciendo el intervalo de comprobaciones y la cantidad de paquetes perdidos para cambiar la activaci√≥n, pero las configuraciones de monitoreo demasiado agresivas a menudo causar√°n falsos positivos cuando la conexi√≥n se pierda por solo un par de segundos. </font></font><br><br><img src="https://habrastorage.org/webt/ld/x7/ky/ldx7kyt_jneacpbnn7k8bwnbtpm.png"><br> <font color="99999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El tiempo de conmutaci√≥n al canal de respaldo es de aproximadamente 15 segundos.</font></font></font> <br><br><h3>  Conclusi√≥n </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un enrutador con muchas caracter√≠sticas adicionales. </font><font style="vertical-align: inherit;">Se realiz√≥ un trabajo interesante con el m√≥dulo de E / S: hay salidas anal√≥gicas y digitales, un rel√© de potencia. </font><font style="vertical-align: inherit;">Puede controlar los pines de forma remota y configurar disparadores. </font><font style="vertical-align: inherit;">Esto le permite construir una automatizaci√≥n simple con perif√©ricos externos en un solo enrutador. </font><font style="vertical-align: inherit;">Por ejemplo, gestione un invernadero o calefacci√≥n de espacios.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pros </font></font></h3><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Muchas caracter√≠sticas adicionales </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Plataforma OpenWRT </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Soporte LTE Cat 4 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tres tipos de WAN: m√≥dem, Ethernet, WiFi </font></font></li></ul><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Contras </font></font></h3><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> No puede especificar diferentes direcciones de monitoreo para cada tarjeta SIM </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Las condiciones para cambiar a una tarjeta SIM de respaldo son independientes de monitorear la accesibilidad a Internet </font></font></li></ul><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Robustel r2000 </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El enrutador es proporcionado por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Euromobile (euromobile.ru) </font></font></a> <br><br><img src="https://habrastorage.org/webt/n1/qj/yl/n1qjyl7k6qlzchb-xrfvodxmzq8.jpeg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SoC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Atheros 533MHz </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 64MB </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memoria flash:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 16MB </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Huawei ME909s-120 (LTE Cat 4) </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firmware</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enrutador </font><font style="vertical-align: inherit;">cerrado basado en Linux </font><font style="vertical-align: inherit;">con dos puertos Ethernet y un m√≠nimo de funciones. </font><font style="vertical-align: inherit;">Solo uno de los puertos LAN puede actuar como WAN. </font><font style="vertical-align: inherit;">El firmware est√° cerrado, no hay acceso ra√≠z a trav√©s de SSH. </font><font style="vertical-align: inherit;">La consola est√° limitada a su int√©rprete con varios comandos (como dispositivos Ubiquiti).</font></font><br><br><img src="https://habrastorage.org/webt/fr/dy/xt/frdyxt3ne19neo2alb3jnlrhaks.png"><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descripci√≥n general de la interfaz de usuario web</font></font></b> <div class="spoiler_text"><h3> VPN </h3><br>    OpenVPN  IPsec IKEv2. <br><br><img src="https://habrastorage.org/webt/tc/ui/94/tcui94qphqqtsiobuqim33ex75w.png"><br> <font color="99999">  IPsec-</font> <br><br><img src="https://habrastorage.org/webt/wy/5y/tc/wy5ytcup64mukqbx7cwus-s5j2y.png"><br> <font color="99999">  OpenVPN-</font> <br><br><h3>  </h3><br>      syslog <br><br><img src="https://habrastorage.org/webt/qe/bm/wb/qebmwbndt6houxtpz_wmn0ruwiu.png"><br><br>           email  SMS <br><br><img src="https://habrastorage.org/webt/5n/rp/de/5nrpdefpw527-oaiomtkojtdufw.png"><br><br><h3> User LED </h3><br>         . ,   VPN  . <br><br><img src="https://habrastorage.org/webt/yx/or/ds/yxordsyltko7ccvnoryjzllsjmq.png"><br></div></div><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Configuraci√≥n WAN </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hay varios modos de copia de seguridad y equilibrio. </font><font style="vertical-align: inherit;">La segunda opci√≥n puede ser √∫til para cambiar r√°pidamente entre canales.</font></font><br><br><ul><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Respaldo en fr√≠o:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> solo el canal principal est√° activo, los canales de respaldo est√°n deshabilitados</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copia de seguridad en caliente:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> los canales de copia de seguridad est√°n activos, solo se usa el principal (es imposible activar dos SIM al mismo tiempo)</font></font><br></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Equilibrio de carga:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ambos canales se utilizan simult√°neamente.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la configuraci√≥n predeterminada, por alguna raz√≥n, el retorno al canal principal despu√©s de cambiar al canal de respaldo est√° desactivado. Esto se establece en el intervalo de reversi√≥n, cuando se establece en cero, el canal nunca volver√° a cambiar despu√©s de cambiar a la copia de seguridad. </font></font><br><br><img src="https://habrastorage.org/webt/l8/mg/q0/l8mgq0me4l9-kuc_s6cnp_xbnca.png"><br> <font color="99999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuraci√≥n de prioridades y modos de WAN</font></font></font> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cada tarjeta SIM est√° configurada como una interfaz separada: WWAN1 y WWAN2. Para cada interfaz, puede configurar por separado la direcci√≥n para verificar la disponibilidad de Internet y sus propios intervalos. Este es el √∫nico enrutador en la revisi√≥n donde puede especificar dos hosts a la vez para la verificaci√≥n. Esto es √∫til para protegerse contra falsos positivos cuando el host de prueba falla, pero hay acceso a Internet. </font></font><br><br><img src="https://habrastorage.org/webt/ib/bq/mw/ibbqmwpnvmirmzjpn24y7w_ri7s.png"><br> <font color="99999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada tarjeta SIM se puede configurar para verificar la disponibilidad de Internet.</font></font></font> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El firmware del enrutador no implica acceso de ra√≠z al sistema, por lo que sin abrir la carcasa, no podr√≠a averiguar en qu√© chipset se hizo el dispositivo. </font><font style="vertical-align: inherit;">En consecuencia, no se pueden instalar scripts y paquetes caseros en el enrutador, toda la funcionalidad est√° estrictamente limitada por las capacidades del firmware nativo. </font><font style="vertical-align: inherit;">Es posible instalar varios paquetes adicionales desde el repositorio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">robustel.com/products/app-center/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero esto no se compara con el conjunto de paquetes del repositorio OpenWRT. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por otro lado, un sistema cerrado de este tipo puede ser √∫til para proteger contra cambios incontrolados en el firmware, que luego no se pueden ver en la interfaz web.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Simulaci√≥n de choque </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dado que podemos especificar diferentes hosts para verificar la disponibilidad de cada tarjeta SIM, para simular un accidente, indicaremos nuestro servidor controlado como la primera tarjeta SIM y lo apagaremos en alg√∫n momento. Para la pureza del experimento, estableceremos los intervalos de prueba al mismo que para el primer enrutador en la revisi√≥n. </font></font><br><br><img src="https://habrastorage.org/webt/q9/_y/wf/q9_ywfjronuxvlvxfexwleqvnxu.png"><br> <font color="99999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cambiar a la segunda tarjeta SIM lleva entre 15 y 30 segundos.</font></font></font> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En promedio, el enrutador cambia a la segunda tarjeta SIM en 15-30 segundos. Creo que el registro de la red del segundo operador lleva m√°s tiempo. Dado que todos nuestros enrutadores usan un solo m√≥dem, solo una tarjeta SIM puede estar en la red a la vez. Hay enrutadores industriales con dos m√≥dems independientes que se conectan simult√°neamente a dos operadores m√≥viles. En este caso, el cambio de canal es m√°s r√°pido.</font></font><br><br><h3>  Conclusi√≥n </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enrutador compacto y simple con un m√≠nimo de funciones, f√°cil de configurar. </font><font style="vertical-align: inherit;">Una plataforma cerrada y la falta de acceso a la ra√≠z pueden interferir con alguien. </font><font style="vertical-align: inherit;">Se puede recomendar para casos donde la facilidad de configuraci√≥n es m√°s importante.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pros </font></font></h3><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Configuraci√≥n de conmutaci√≥n por error separada para cada tarjeta SIM </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Soporte LTE Cat 4 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Modo de respaldo c√°lido, en el que el canal de respaldo no se apaga </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Configuraci√≥n f√°cil </font></font></li></ul><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Contras </font></font></h3><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Plataforma cerrada, sin acceso root </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Consola SSH truncada </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Solo un puerto Ethernet puede funcionar como WAN </font></font></li></ul><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> iRZ RU22W </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El enrutador es proporcionado por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digital Angel (digitalangel.ru) </font></font></a> <br><br><img src="https://habrastorage.org/webt/fb/9a/9p/fb9a9pe15uw7yi4nat3ubroxjqe.jpeg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SoC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : MediaTek MT7620A ver: 2 eco: 6 </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 64 </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memoria flash:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 16 </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wi-Fi:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 802.11n (2.4GHz) </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Huawei MU709s-2 </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soporte de tarjeta MicroSD </font></font></b> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPS </font></font></b> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firmware</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : encendido base OpenWRT 15.05</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El enrutador no es compatible con LTE, solo los est√°ndares 3G HSPA + / UMTS (900/2100 MHz) y 2G GSM / GPRS (850/900/1800/1900 MHz) son compatibles, aunque son los m√°s caros. </font><font style="vertical-align: inherit;">Hay soporte para GPS, Wi-Fi e interfaces seriales. </font><font style="vertical-align: inherit;">De manera predeterminada, todos los puertos Ethernet se combinan en un solo conmutador; si lo desea, cada puerto puede asignarse a una VLAN separada y usarse como una WAN. </font><font style="vertical-align: inherit;">Wi-Fi puede funcionar en el modo de estaci√≥n (cliente) y tambi√©n ser WAN. </font><font style="vertical-align: inherit;">En total, con dos tarjetas SIM, esto le permite obtener 7 interfaces WAN.</font></font> No esta mal. <br><br><img src="https://habrastorage.org/webt/ac/i4/as/aci4asvfbkhr1pd7eephyr5vnpe.jpeg"><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descripci√≥n general de la interfaz de usuario web</font></font></b> <div class="spoiler_text"><h3> - </h3><br><img src="https://habrastorage.org/webt/ba/rt/lg/bartlgh67o5nyeibyrwpecwgesg.png"><br> <i> ,   ,   ,  , IMEI,    .</i> <br><br><img src="https://habrastorage.org/webt/ji/1g/jn/ji1gjnngxube3lbfcbvqhsaj-pg.png"><br> <i>Wi-Fi-       (AP)   (Station).   ,    SSID .</i> <br><br><h3> VPN </h3><br> OpenVPN  ,   IPSec ‚Äî .   Cisco IPSec,    IKEv2. <br><br><img src="https://habrastorage.org/webt/y1/zq/94/y1zq94hbklflhtuqyflb8atrn-e.png"> <font color="99999">  Cisco IPSec    IKEv2</font> <br><br>   Ethernet over IP <br><br><img src="https://habrastorage.org/webt/v_/ek/vo/v_ekvopdlr-tiqakeuicqi3ktec.png"><br><br><h3> RS-232/485 </h3><br>        serial over ip   modbus TCP&lt;-&gt;RTU.  AT-    . <br><br><img src="https://habrastorage.org/webt/hb/c4/cc/hbc4ccxc66tnvtdtfurop90yxcy.png"><br><br><h2> GPIO </h2><br>  c GPIO  .      -,     ,    . ,  - API,    ,  .     .      . <br><br><img src="https://habrastorage.org/webt/4a/9h/g0/4a9hg0vn4x4mecqxomblllawwi8.png"><br></div></div><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Configuraci√≥n WAN </font></font></h3><br><img src="https://habrastorage.org/webt/4u/rn/13/4urn13ydfvfgndltxscieamvkf0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las prioridades de la interfaz se seleccionan en el men√∫ Rutas. </font><font style="vertical-align: inherit;">Puede elegir uno de los dos modos: conmutaci√≥n por error y equilibrio. </font><font style="vertical-align: inherit;">El primero cambiar√° el canal a la interfaz de respaldo en caso de que el primario no est√© disponible, y el segundo distribuir√° el tr√°fico por igual entre las interfaces, a nivel NAT. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La supervisi√≥n de la disponibilidad y la conmutaci√≥n por error de la interfaz se realizan utilizando los scripts de bash caseros de iRZ. </font><font style="vertical-align: inherit;">Por ejemplo, el servicio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ usr / bin / pinger</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> env√≠a pings, conmuta interfaces y controla LED. </font><font style="vertical-align: inherit;">Bashism bastante duro :)</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Configuraci√≥n de la tarjeta SIM </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para cada tarjeta SIM, puede configurar su propio host de verificaci√≥n de conexi√≥n. </font><font style="vertical-align: inherit;">Esto es conveniente para los casos en que queremos elegir diferentes servidores, dependiendo del proveedor de servicios. </font><font style="vertical-align: inherit;">Por ejemplo, en roaming usamos un servidor, y en la regi√≥n de origen otro. </font></font><br><br><img src="https://habrastorage.org/webt/-n/in/vj/-ninvjs0j3otmg5b1crc551cct0.png"><br> <font color="99999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puede configurar diferentes hosts para los cuales se verificar√° la comunicaci√≥n para cada tarjeta SIM</font></font></font> <br><br><h2>  GPS </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No encontr√© la capacidad de usar de alguna manera el m√≥dulo GPS, excepto a trav√©s de gpsctl desde la consola. </font><font style="vertical-align: inherit;">La interfaz web no lo menciona en absoluto. </font><font style="vertical-align: inherit;">Creo que se activa a trav√©s de servicios nativos en la nube para la administraci√≥n centralizada de enrutadores. </font><font style="vertical-align: inherit;">La imposibilidad de usar la API de GPS por mi cuenta se considera un inconveniente.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Simulaci√≥n de choque </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para cada tarjeta SIM, indicamos diferentes hosts para verificar la accesibilidad a Internet, para que podamos simular f√°cilmente un accidente. </font><font style="vertical-align: inherit;">Para hacer esto, bloquearemos el host de la primera tarjeta SIM en el firewall y veremos c√≥mo responder√° el enrutador. </font><font style="vertical-align: inherit;">Para la pureza del experimento, estableceremos los mismos intervalos de prueba y el n√∫mero de intentos que el primer enrutador. </font></font><br><br><img src="https://habrastorage.org/webt/pa/mz/qr/pamzqr3gicp5tt1rtat2mmyqkdg.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De varios intentos, el tiempo de conmutaci√≥n promedio es de 30 segundos, a veces la segunda tarjeta SIM se registra durante mucho tiempo y el cambio se demora un minuto. </font><font style="vertical-align: inherit;">No estoy seguro de si esto se debe al m√≥dem o las caracter√≠sticas del operador de telefon√≠a m√≥vil.</font></font><br><br><h2>  Conclusi√≥n </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Me gust√≥ la oportunidad de obtener hasta 4 WAN cableadas y configuraciones de conmutaci√≥n por error separadas para cada tarjeta SIM. </font><font style="vertical-align: inherit;">El prop√≥sito del m√≥dulo GPS segu√≠a siendo incomprensible; su uso sin software de terceros no funcion√≥.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pros </font></font></h3><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Plataforma abierta basada en OpenWRT </font></font></li><li>   failover   SIM- </li><li>  LAN-    WAN </li></ul><br><h3>  </h3><br><ul><li>   IPsec IKEv2 </li><li> ,   GPS   GPIO    </li></ul><br><hr><br><h2>  Conclusi√≥n </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En mi opini√≥n, las soluciones industriales especializadas son mucho m√°s convenientes que las estructuras caseras basadas en un enrutador SOHO. </font><font style="vertical-align: inherit;">Aunque en la mayor√≠a de los casos se usa el mismo firmware OpenWRT, todos los matices ya se tienen en cuenta, el ajuste se reduce a establecer varios par√°metros en la interfaz web, y no es necesario que escribas muletas como scripts de vigilancia, todo ya est√° listo para usar. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las funciones adicionales como el m√≥dulo GPIO y GPS permiten, en muchos casos, administrar un dispositivo en lugar de dos, para tareas simples de automatizaci√≥n y recopilaci√≥n de datos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los tres fabricantes tienen su propio software para la gesti√≥n centralizada de enrutadores. </font><font style="vertical-align: inherit;">En el marco de este art√≠culo, no lo consideramos. </font><font style="vertical-align: inherit;">Es √∫til para una gran cantidad de instalaciones y le permite administrar todos los enrutadores desde un panel de control. </font><font style="vertical-align: inherit;">Puede valer la pena explorar este software tambi√©n.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/443196/">https://habr.com/ru/post/443196/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443186/index.html">El soporte t√©cnico de 3CX responde: 5 reglas de seguridad de IP PBX</a></li>
<li><a href="../443188/index.html">Tres ojos cuelgan de un pilar, o la historia de que cinco patas de ATtiny13 son suficientes</a></li>
<li><a href="../443190/index.html">Introducci√≥n a las pol√≠ticas de red de Kubernetes para profesionales de la seguridad</a></li>
<li><a href="../443192/index.html">M√©todos privados sin guiones bajos e interfaces en Python</a></li>
<li><a href="../443194/index.html">Los ingenieros de WFIRM inventaron una bioimpresora que imprime la piel directamente sobre una herida</a></li>
<li><a href="../443198/index.html">Mark Zuckerberg dice que Facebook est√° trabajando en una interfaz neuronal para leer pensamientos</a></li>
<li><a href="../443200/index.html">Los piratas inform√°ticos iran√≠es roban terabytes de datos de Citrix</a></li>
<li><a href="../443202/index.html">Rally contra el aislamiento de Runet</a></li>
<li><a href="../443204/index.html">Resumen semanal de frontend (4-10 de marzo de 2019)</a></li>
<li><a href="../443206/index.html">Las minas bajo rendimiento est√°n esperando en las alas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>