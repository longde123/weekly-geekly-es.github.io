<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§° üò≤ üßëüèΩ Sobre a estrutura da computa√ß√£o paralela ou os argumentos contra o operador "Go" üê£ üßúüèø üõ∑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cada idioma que suporta computa√ß√£o paralela (competitiva, ass√≠ncrona) precisa de uma maneira de executar o c√≥digo em paralelo. Aqui est√£o exemplos de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sobre a estrutura da computa√ß√£o paralela ou os argumentos contra o operador "Go"</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479186/"><p><img src="https://habrastorage.org/getpro/habr/post_images/85d/e9d/a9e/85de9da9eebff2dc7806d48e9b71706e.png"></p><br><p>  Cada idioma que suporta computa√ß√£o paralela (competitiva, ass√≠ncrona) precisa de uma maneira de executar o c√≥digo em paralelo.  Aqui est√£o exemplos de diferentes APIs: </p><br><pre><code class="plaintext hljs">go myfunc(); // Golang pthread_create(&amp;thread_id, NULL, &amp;myfunc); /* C with POSIX threads */ spawn(modulename, myfuncname, []) % Erlang threading.Thread(target=myfunc).start() # Python with threads asyncio.create_task(myfunc()) # Python with asyncio</code> </pre> <br><p>  Existem muitas op√ß√µes para nota√ß√£o e terminologia, mas uma sem√¢ntica √© executar o <code>myfunc</code> em paralelo com o programa principal e continuar o <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D1%2582%25D0%25BE%25D0%25BA_%25D0%25B2%25D1%258B%25D0%25BF%25D0%25BE%25D0%25BB%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F" rel="nofollow">encadeamento</a> pai <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D1%2582%25D0%25BE%25D0%25BA_%25D0%25B2%25D1%258B%25D0%25BF%25D0%25BE%25D0%25BB%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F" rel="nofollow">de execu√ß√£o</a> (Eng. "Fluxo de Controle") </p><a name="habracut"></a><br><p>  Outra op√ß√£o s√£o os <a href="https://ru.wikipedia.org/wiki/Callback_(%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5)" rel="nofollow">retornos de chamada</a> : </p><br><pre> <code class="plaintext hljs">QObject::connect(&amp;emitter, SIGNAL(event()), // C++ with Qt &amp;receiver, SLOT(myfunc())) g_signal_connect(emitter, "event", myfunc, NULL) /* C with GObject */ document.getElementById("myid").onclick = myfunc; // Javascript promise.then(myfunc, errorhandler) // Javascript with Promises deferred.addCallback(myfunc) # Python with Twisted future.add_done_callback(myfunc) # Python with asyncio</code> </pre> <br><p>  E, novamente, a nota√ß√£o muda, mas todos os exemplos fazem com que, a partir do momento atual, se e quando um determinado evento acontecer, o <code>myfunc</code> iniciado.  Depois que o retorno de chamada √© definido, o controle retorna e a fun√ß√£o de chamada continua.  (√Äs vezes, os retornos de chamada s√£o agrupados em <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise/all" rel="nofollow">convenientes</a> fun√ß√µes de <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise/race" rel="nofollow">combina√ß√£o</a> ou <a href="https://twistedmatrix.com/documents/current/core/howto/servers.html" rel="nofollow">protocolos no estilo Twisted</a> , mas a id√©ia b√°sica √© inalterada.) </p><br><p>  E ... isso √© tudo.  Pegue qualquer linguagem de prop√≥sito geral de concorr√™ncia popular e provavelmente descobrir√° que ela se enquadra em um desses paradigmas (√†s vezes ambos, ass√≠ncrono). </p><br><p>  Mas n√£o minha nova e estranha biblioteca <a href="https://trio.readthedocs.io/" rel="nofollow">Trio</a> .  Ela n√£o usa essas abordagens.  Em vez disso, se quisermos executar <code>myfunc</code> e <code>anotherfunc</code> em paralelo, escrevemos algo como isto: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> trio.open_nursery() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> nursery: nursery.start_soon(myfunc) nursery.start_soon(anotherfunc)</code> </pre> <br><blockquote>  viveiro - viveiro, viveiro </blockquote><p>  Pela primeira vez diante do design do "ber√ß√°rio", as pessoas est√£o perdidas.  Por que existe <a href="https://pythonworld.ru/osnovy/with-as-menedzhery-konteksta.html" rel="nofollow">um gerenciador de contexto</a> (com bloco)?  O que √© esse ber√ß√°rio e por que √© necess√°rio executar uma tarefa?  As pessoas entendem que o ber√ß√°rio interfere com as abordagens usuais em outras estruturas e ficam com raiva.  Tudo parece bizarro, espec√≠fico e de alto n√≠vel para ser um primitivo b√°sico.  Todas essas s√£o rea√ß√µes compreens√≠veis!  Mas aguente um pouco. </p><br><p>  <strong>Neste artigo, quero convenc√™-lo de que os viveiros n√£o s√£o uma moda passageira, mas uma nova primitiva para controlar o fluxo de execu√ß√£o, t√£o fundamental quanto loops e chamadas de fun√ß√£o.</strong>  <strong>Al√©m disso, as abordagens discutidas acima (criando threads e registrando retornos de chamada) precisam ser descartadas e substitu√≠das por viveiros.</strong> </p><br><p>  Parece muito ousado?  Mas isso j√° aconteceu: uma vez que o <code>goto</code> amplamente usado para controlar o comportamento de um programa.  Agora, esta √© uma ocasi√£o para rir: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c37/12a/b90/c3712ab9028c26f7ff089f3ff14e9071.png"></p><br><p>  V√°rios idiomas ainda possuem o chamado <code>goto</code> , mas suas capacidades s√£o muito mais limitadas do que o <code>goto</code> original.  E na maioria dos idiomas n√£o √© de todo.  O que aconteceu com ele?  Esta hist√≥ria √© surpreendentemente relevante, embora n√£o seja familiar para a maioria por causa de sua antiguidade.  Vamos lembrar a n√≥s mesmos o que <code>goto</code> e depois ver como isso pode ajudar na programa√ß√£o ass√≠ncrona. </p><br><h1 id="oglavlenie">  Sum√°rio </h1><br><ul><li>  O que √© ir? </li><li>  O que √© ir? </li><li>  O que aconteceu com o goto? <br><ul><li>  goto destr√≥i abstra√ß√£o </li><li>  Admir√°vel mundo novo sem ir </li><li>  Chega de ir </li></ul></li><li>  Sobre os perigos das express√µes do tipo "Go" <br><ul><li>  express√µes ir quebram abstra√ß√µes. </li><li>  As express√µes go quebram a limpeza autom√°tica de recursos abertos. </li><li>  As express√µes ir quebram o tratamento de erros. </li><li>  Chega de ir </li></ul></li><li>  O ber√ß√°rio como um substituto estrutural para o go <br><ul><li>  O ber√ß√°rio mant√©m a abstra√ß√£o de fun√ß√µes. </li><li>  Suporte de ber√ß√°rio din√¢mico adicionando tarefas. </li><li>  Voc√™ ainda pode deixar o ber√ß√°rio. </li><li>  Voc√™ pode identificar novos tipos que charlatanham como ber√ß√°rio. </li><li>  N√£o, no entanto, os viveiros est√£o sempre aguardando a conclus√£o de todas as tarefas internas. </li><li>  Trabalha limpeza autom√°tica de recursos. </li><li>  Trabalhos de cria√ß√£o de bugs. </li><li>  Admir√°vel mundo novo sem ir </li></ul></li><li>  Viveiros na pr√°tica </li><li>  Conclus√µes </li><li>  Coment√°rios </li><li>  Agradecimentos </li><li>  Notas de rodap√© </li><li>  Sobre o autor </li><li>  Continua√ß√£o </li></ul><br><h1 id="chto-takoe-goto">  O que √© <code>goto</code> ? </h1><br><p>  Os primeiros computadores foram programados usando <a href="https://ru.wikipedia.org/wiki/%25D0%25AF%25D0%25B7%25D1%258B%25D0%25BA_%25D0%25B0%25D1%2581%25D1%2581%25D0%25B5%25D0%25BC%25D0%25B1%25D0%25BB%25D0%25B5%25D1%2580%25D0%25B0" rel="nofollow">assembler</a> , ou ainda mais primitivamente.  Isso n√£o √© muito conveniente.  Ent√£o, na d√©cada de 1950, pessoas como <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D1%258D%25D0%25BA%25D1%2583%25D1%2581,_%25D0%2594%25D0%25B6%25D0%25BE%25D0%25BD" rel="nofollow">John Backus,</a> da IBM, e <a href="https://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25BE%25D0%25BF%25D0%25BF%25D0%25B5%25D1%2580,_%25D0%2593%25D1%2580%25D0%25B5%25D0%25B9%25D1%2581" rel="nofollow">Grace Hopper,</a> de <a href="https://ru.wikipedia.org/wiki/Remington_Rand" rel="nofollow">Remington Rand,</a> come√ßaram a desenvolver idiomas como <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25BE%25D1%2580%25D1%2582%25D1%2580%25D0%25B0%25D0%25BD" rel="nofollow">FORTRAN</a> e <a href="https://en.wikipedia.org/wiki/FLOW-MATIC" rel="nofollow">FLOW-MATIC</a> (mais conhecido por seu descendente direto <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25B1%25D0%25BE%25D0%25BB" rel="nofollow">COBOL</a> ). </p><br><p>  O FLOW-MATIC era muito ambicioso na √©poca.  Voc√™ pode pensar nisso como o tatarav√¥ do Python - foi a primeira linguagem desenvolvida principalmente para as pessoas e a segunda para os computadores.  Ele ficou assim: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/620/bfd/d70/620bfdd7076dd6c0536f75a0dd187cd4.png"></p><br><p>  Observe que, diferentemente das linguagens modernas, n√£o h√° condicionais <code>if</code> blocos, loops ou chamadas de fun√ß√£o - na verdade, n√£o h√° blocos ou recuos.  Esta √© apenas uma lista sequencial de express√µes.  N√£o porque este programa seja muito curto para exigir <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580_(%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5)" rel="nofollow">instru√ß√µes de</a> controle (al√©m de <code>JUMP TO</code> ) - apenas essa sintaxe ainda n√£o foi inventada! </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/eaa/d88/f7b/eaad88f7b6d97d7140f33cf48bb52a55.png"></p><br><p>  Em vez disso, o FLOW-MATIC tinha duas op√ß√µes para controlar o fluxo de execu√ß√£o.  Geralmente o fluxo era consistente - comece de cima e des√ßa, uma express√£o de cada vez.  Mas se voc√™ executar a express√£o <code>JUMP TO</code> especial, ela poder√° assumir o controle em outro lugar.  Por exemplo, a express√£o (13) salta para a express√£o (2): </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/753/de0/ae9/753de0ae91dc198fa867707d441fc511.png"></p><br><p>  Assim como aconteceu com as primitivas do paralelismo desde o in√≠cio do artigo, n√£o havia acordo sobre o que chamar de opera√ß√£o "dar um salto de m√£o √∫nica".  Na lista, isso √© <code>JUMP TO</code> , mas <code>goto</code> historicamente <code>goto</code> ra√≠zes (como "v√° l√°"), que eu uso aqui. </p><br><p>  Aqui est√° o conjunto completo de saltos de <code>goto</code> neste pequeno programa: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/32a/127/4f4/32a1274f45c48110468e47083437bf29.png"></p><br><p>  Isso parece confuso n√£o apenas para voc√™!  O FLOW-MATIC herdou esse estilo de programa√ß√£o baseado em salto diretamente do assembler.  √â poderoso, bem pr√≥ximo de como o hardware do computador realmente funciona, mas √© muito dif√≠cil trabalhar diretamente com ele.  Essa bola de flechas √© a raz√£o da inven√ß√£o do termo "c√≥digo de espaguete". </p><br><p>  Mas por que <code>goto</code> causar esse problema?  Por que algumas declara√ß√µes de controle s√£o boas e outras n√£o?  Como escolher os bons?  Naquela √©poca, era completamente incompreens√≠vel e, se voc√™ n√£o entende o problema, √© dif√≠cil resolv√™-lo. </p><br><h1 id="chto-takoe-go">  O que √© <code>go</code> ? </h1><br><p>  Vamos desviar da nossa hist√≥ria.  Todo mundo sabe que foi ruim, mas o que isso tem a ver com assincronia?  Veja a famosa express√£o <code>go</code> do Golang, usada para gerar a nova "goroutine" (fluxo leve): </p><br><pre> <code class="plaintext hljs">// Golang go myfunc();</code> </pre> <br><p>  √â poss√≠vel desenhar um diagrama de seu fluxo de execu√ß√£o?  √â um pouco diferente do diagrama acima, porque aqui o fluxo √© dividido.  Vamos desenhar assim: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/7b4/5ed/524/7b45ed524dc3bcd7625f5aaf60497607.png"></p><br><p>  As cores aqui servem para mostrar que os <em>dois</em> caminhos s√£o escolhidos.  Do ponto de vista da goroutine principal (linha verde) - o <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D1%2582%25D0%25BE%25D0%25BA_%25D0%25B2%25D1%258B%25D0%25BF%25D0%25BE%25D0%25BB%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F" rel="nofollow">fluxo de controle √©</a> executado seq√ºencialmente: come√ßa de cima e depois desce imediatamente.  Enquanto isso, do ponto de vista da fun√ß√£o descendente (linha lil√°s), o fluxo vem de cima e depois salta para o corpo de <code>myfunc</code> .  Diferente de uma chamada de fun√ß√£o regular, h√° um salto unidirecional - a partir do <code>myfunc</code> funcionamento, <code>myfunc</code> para uma <em>pilha</em> completamente nova e o <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B0_%25D0%25B2%25D1%258B%25D0%25BF%25D0%25BE%25D0%25BB%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F" rel="nofollow">tempo de execu√ß√£o</a> esquece imediatamente de onde viemos. </p><br><blockquote>  aparentemente eu quero dizer <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D0%25B5%25D0%25BA_%25D0%25B2%25D1%258B%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B2" rel="nofollow">a pilha de chamadas</a> </blockquote><p>  Mas isso n√£o se aplica apenas a Golang.  Este diagrama √© v√°lido para <em>todas as</em> primitivas (controles) listadas no in√≠cio do artigo: </p><br><ul><li>  As bibliotecas de encadeamento geralmente retornam algum tipo de objeto de controle que lhes permitir√° ingressar no encadeamento posteriormente - mas esta √© uma opera√ß√£o independente sobre a qual a pr√≥pria linguagem n√£o sabe nada.  A primitiva para criar um novo encadeamento tem o diagrama mostrado acima. </li><li>  O registro de retorno de chamada √© semanticamente equivalente √† cria√ß√£o de um encadeamento em segundo plano (embora seja √≥bvio que a implementa√ß√£o √© diferente), que: <br>  a) √© bloqueado at√© que um evento ocorra e, em seguida, <br>  b) lan√ßa uma fun√ß√£o de retorno de chamada <br>  Portanto, em termos de operadores de controle de alto n√≠vel, o registro de retorno de chamada √© uma express√£o id√™ntica √† anterior. </li><li>  Com <code>Futures</code> e <code>Promises</code> a mesma coisa - quando voc√™ executa a fun√ß√£o e ela retorna <code>Promise</code> , significa que planejou trabalhar em segundo plano e retorna um objeto de controle para obter o resultado mais tarde (se voc√™ desejar).  Do ponto de vista da sem√¢ntica de gerenciamento, √© o mesmo que criar um fluxo.  Depois disso, voc√™ passa o retorno de chamada para a Promis e depois como no par√°grafo anterior. </li></ul><br><p>  Esse mesmo padr√£o se mostra de v√°rias formas - a principal semelhan√ßa √© que, em todos esses casos, o fluxo de controle √© dividido - √© feito um salto no novo encadeamento, mas o pai retorna para quem o chamou.  Sabendo o que olhar, voc√™ o ver√° em todos os lugares!  Este √© um jogo interessante (pelo menos para alguns tipos de pessoas)! </p><br><p>  Ainda assim, me incomoda que n√£o haja um nome padr√£o para esta categoria de declara√ß√µes de controle.  Eu uso a express√£o <strong>"go"</strong> para cham√°-los, assim como <strong>"goto"</strong> se tornou um termo gen√©rico para todas <code>goto</code> express√µes do <code>goto</code> .  Porque <code>go</code>  Uma raz√£o √© que Golang nos d√° um exemplo muito claro dessa sintaxe.  E o outro √©: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/1ad/41c/8e1/1ad41c8e1896e247183cd25d08b353f5.png"></p><br><p>  Observe a semelhan√ßa?  √â isso mesmo - <strong><code>go</code> √© uma das formas de <code>goto</code> .</strong> </p><br><p>  Programas ass√≠ncronos s√£o not√≥rios pela dificuldade de escrever e analisar.  Bem como programas baseados em <code>goto</code> .  Os problemas causados ‚Äã‚Äãpelo <code>goto</code> resolvidos principalmente em idiomas modernos.  Se aprendermos a corrigir o <code>goto</code> , isso ajudar√° a criar APIs ass√≠ncronas mais convenientes?  Vamos descobrir! </p><br><h1 id="chto-sluchilos-s-goto">  O que aconteceu com o <code>goto</code> ? </h1><br><p>  Ent√£o, o que h√° de errado com o <code>goto</code> que causa tantos problemas?  No final dos anos 60, <a href="https://ru.wikipedia.org/wiki/%25D0%2594%25D0%25B5%25D0%25B9%25D0%25BA%25D1%2581%25D1%2582%25D1%2580%25D0%25B0,_%25D0%25AD%25D0%25B4%25D1%2581%25D0%25B3%25D0%25B5%25D1%2580_%25D0%2592%25D0%25B8%25D0%25B1%25D0%25B5" rel="nofollow">Edsger Wieb Dijkstra</a> escreveu algumas obras agora conhecidas que ajudaram a entender isso muito mais claramente: os <a href="http://khpi-iip.mipk.kharkiv.edu/library/extent/dijkstra/pp/ewd215.html" rel="nofollow">argumentos contra o operador goto</a> e o <a href="http://khpi-iip.mipk.kharkiv.edu/library/extent/dijkstra/ewd249/index.html" rel="nofollow">Notes sobre programa√ß√£o estrutural</a> . </p><br><h2 id="goto-razrushaet-abstrakcii">  <code>goto</code> destr√≥i abstra√ß√£o </h2><br><p>  Nesses trabalhos, Dijkstra se preocupou com a forma como escrevemos programas n√£o triviais e garantimos sua corre√ß√£o.  Existem muitos pontos interessantes.  Por exemplo, voc√™ provavelmente ouviu esta frase: </p><br><blockquote>  Os programas de teste podem mostrar a presen√ßa de erros, mas nunca a aus√™ncia deles. </blockquote><p>  Sim, isso √© das <em>Notas de programa√ß√£o estruturais</em> .  Mas sua principal preocupa√ß√£o era <em>abstra√ß√£o</em> .  Ele queria escrever programas grandes demais para mant√™-los na cabe√ßa.  Para fazer isso, voc√™ deve tratar as partes do programa como caixas pretas - por exemplo, voc√™ v√™ este programa em Python: </p><br><pre> <code class="python hljs">print(<span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span>)</code> </pre> <br><p>  e voc√™ n√£o precisa conhecer todos os detalhes de como a <code>print</code> (formata√ß√£o da linha, buffer, diferen√ßas entre plataformas etc.).  Tudo o que voc√™ precisa saber √© que <code>print</code> alguma forma imprime o texto que voc√™ passou, e voc√™ pode se concentrar no que deseja fazer neste peda√ßo de c√≥digo.  Dijkstra queria que os idiomas suportassem esse tipo de abstra√ß√£o. </p><br><p>  Nesse ponto, a sintaxe do bloco foi inventada e linguagens como o ALGOL acumularam ~ 5 tipos diferentes de instru√ß√µes de controle: eles ainda tinham um encadeamento seq√ºencial de execu√ß√£o e <code>goto</code> : </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/eaa/d88/f7b/eaad88f7b6d97d7140f33cf48bb52a55.png"></p><br><p>  E tamb√©m adquiriu condi√ß√µes, ciclos e chamadas de fun√ß√£o: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0d8/de3/a21/0d8de3a217a61b13b2c1f6869f706d6b.png"></p><br><p>  Voc√™ pode implementar essas constru√ß√µes de alto n√≠vel usando <code>goto</code> , e √© assim que as pessoas pensavam nelas antes: como um atalho conveniente.  Mas Dijkstra apontou a grande diferen√ßa entre o <code>goto</code> e o restante dos operadores de controle.  Para tudo, exceto <code>goto</code> , o fio da execu√ß√£o </p><br><ul><li>  vem de cima =&gt; [algo acontece] =&gt; o fluxo vem de baixo </li></ul><br><p>  Podemos chamar isso de ‚Äúregra da caixa preta‚Äù - se a estrutura de controle (operador de controle) tiver esse formato, em uma situa√ß√£o em que voc√™ n√£o esteja interessado nos detalhes internos, poder√° ignorar a parte ‚Äúalgo acontece‚Äù e tratar o bloco como um seq√ºencial regular equipe.  Melhor ainda, isso √© verdade para qualquer c√≥digo que √© composto desses blocos.  Quando olho para: </p><br><pre> <code class="python hljs">print(<span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span>)</code> </pre> <br><p>  N√£o preciso ler as fontes de <code>print</code> e todas as suas depend√™ncias para entender para onde o thread de execu√ß√£o ir√°.  Talvez dentro da <code>print</code> exista um loop, e nele haja uma condi√ß√£o na qual existe uma chamada para outra fun√ß√£o ... isso n√£o √© importante - eu sei que o encadeamento ser√° <code>print</code> , a fun√ß√£o far√° seu trabalho e, eventualmente, o encadeamento retornar√° ao c√≥digo que eu Eu leio </p><br><p>  Mas se voc√™ tem uma linguagem com <code>goto</code> - uma linguagem em que fun√ß√µes e tudo o mais s√£o constru√≠das com base em <code>goto</code> , e <code>goto</code> pode pular para qualquer lugar, a qualquer momento -, essas estruturas n√£o s√£o caixas pretas!  Se voc√™ tem uma fun√ß√£o com um loop, dentro do qual existe uma condi√ß√£o e dentro dela h√° <code>goto</code> ... ent√£o esse <code>goto</code> pode passar a execu√ß√£o em qualquer lugar.  Talvez o controle repentinamente retorne completamente de outra fun√ß√£o que voc√™ nem chamou!  Voc√™ n√£o sabe! </p><br><p>  E isso quebra a abstra√ß√£o - <em>qualquer fun√ß√£o pode ter um potencial de <code>goto</code> dentro, e a √∫nica maneira de descobrir se esse √© o caso √© manter em mente todo o c√≥digo fonte do seu sistema.</em>  Depois que o idioma for <code>goto</code> , voc√™ n√£o poder√° prever o fluxo de execu√ß√£o.  √â <em>por isso que o</em> <code>goto</code> leva ao c√≥digo do espaguete. </p><br><p>  E assim que Dijkstra entendeu o problema, ele foi capaz de resolv√™-lo.  Aqui est√° sua suposi√ß√£o revolucion√°ria - n√£o devemos pensar em condi√ß√µes / loops / chamadas de fun√ß√£o como abrevia√ß√µes para <code>goto</code> , mas como primitivas fundamentais de nossos direitos - e devemos remover completamente <code>goto</code> de nossas l√≠nguas. </p><br><p>  A partir de 2018, isso parece bastante √≥bvio.  Mas como os programadores reagem quando voc√™ tenta pegar seus brinquedos inseguros?  Em 1969, a proposta de Dijkstra parecia incrivelmente d√∫bia.  <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BD%25D1%2583%25D1%2582,_%25D0%2594%25D0%25BE%25D0%25BD%25D0%25B0%25D0%25BB%25D1%258C%25D0%25B4_%25D0%25AD%25D1%2580%25D0%25B2%25D0%25B8%25D0%25BD" rel="nofollow">Donald Knuth</a> <a href="https://scholar.google.com/scholar%3Fcluster%3D17147143327681396418%26hl%3Den%26as_sdt%3D0,5" rel="nofollow">defendeu</a> <code>goto</code> .  As pessoas que se tornaram especialistas em codifica√ß√£o com <code>goto</code> estavam justamente indignadas por terem que reaprender a expressar suas id√©ias em termos novos e mais restritivos.  E, claro, foi preciso criar linguagens completamente novas. </p><br><p>  Como resultado, as l√≠nguas modernas s√£o um pouco menos rigorosas do que as palavras originais de Dijkstra. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/385/9c2/6dc/3859c26dcf65e23a85415a039974645f.jpg"></p><br><blockquote>  Esquerda: <code>goto</code> tradicional.  Direita: <code>goto</code> domesticado, como em C, C #, Golang, etc.  N√£o cruzar os limites de uma fun√ß√£o significa que ele ainda pode fazer xixi nos sapatos, mas √© improv√°vel que voc√™ se rasgue. </blockquote><p>  Eles permitem que voc√™ pule os n√≠veis de aninhamento de instru√ß√µes de controle estrutural usando instru√ß√µes de <code>break</code> , <code>continue</code> ou <code>return</code> .  Mas, em um n√≠vel b√°sico, todos eles s√£o constru√≠dos em torno da ideia de Dijkstra e podem interromper o fluxo seq√ºencial de execu√ß√£o de maneira estritamente limitada.  Em particular, fun√ß√µes - uma ferramenta fundamental para envolver um segmento de execu√ß√£o em uma caixa preta - s√£o indestrut√≠veis.  Voc√™ n√£o pode executar o comando <code>break</code> de uma fun√ß√£o para outra e o <code>return</code> n√£o pode retornar voc√™ al√©m da fun√ß√£o atual.  Nenhuma manipula√ß√£o do encadeamento de execu√ß√£o dentro da fun√ß√£o afetar√° outras fun√ß√µes. </p><br><p>  E os idiomas que preservavam o operador <code>goto</code> (C, C #, Golang, ...) o limitavam severamente.  No m√≠nimo, eles n√£o permitem que voc√™ pule do corpo de uma fun√ß√£o para outra.  Se voc√™ n√£o estiver usando o Assembler [2], o <code>goto</code> cl√°ssico e ilimitado √© coisa do passado.  Dijkstra venceu. </p><br><h2 id="divnyy-novyy-mir-bez-goto">  Admir√°vel mundo novo sem ir </h2><br><p>  Algo interessante aconteceu com o desaparecimento do <code>goto</code> - os criadores da linguagem puderam come√ßar a adicionar novos recursos com base em um fluxo estruturado de execu√ß√£o. </p><br><p>  Por exemplo, o Python tem uma sintaxe legal para limpar automaticamente os recursos - <a href="https://pythonworld.ru/osnovy/with-as-menedzhery-konteksta.html" rel="nofollow">um gerenciador de contexto</a> .  Voc√™ pode escrever: </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># Python with open("my-file") as file_handle: some code</span></span></code> </pre> <br><p>  e isso garante que o arquivo seja aberto em tempo de execu√ß√£o <code>some code</code> mas depois disso - imediatamente fechado.  A maioria das linguagens modernas possui equivalentes ( <a href="https://rurust.github.io/rust-by-example-ru/scope/raii.html" rel="nofollow">RAII</a> , <code>using</code> , try-with-resource, <code>defer</code> , ...).  E todos assumem que o fluxo de controle est√° em ordem.  E o que acontece se pularmos no bloco <code>with</code> usando <code>goto</code> ?  O arquivo est√° aberto ou n√£o?  E se pularmos de l√° em vez de sairmos como de costume? </p><br><blockquote>  ap√≥s a conclus√£o do c√≥digo dentro do bloco, inicia o <code>__exit__()</code> que fecha recursos abertos, como arquivos e conex√µes. </blockquote><p>  O arquivo ser√° fechado?  Al√©m disso, os gerentes de contexto simplesmente n√£o funcionam de maneira clara. </p><br><p>  O mesmo problema com o tratamento de erros - quando algo d√° errado, o que o c√≥digo deve fazer?  Frequentemente - envie uma descri√ß√£o do erro na pilha (de chamadas) para o c√≥digo de chamada e deixe-o decidir o que fazer.  As linguagens modernas t√™m constru√ß√µes espec√≠ficas para isso, como exce√ß√µes ou outras formas de gera√ß√£o <a href="https://doc.rust-lang.ru/stable/rust-by-example/error/result/enter_question_mark.html" rel="nofollow">autom√°tica de erros</a> .  Mas essa ajuda s√≥ est√° dispon√≠vel se o idioma tiver uma pilha de chamadas e um conceito robusto de "chamada".  Lembre-se do espaguete no exemplo de fluxo no exemplo FLOW-MATIC e imagine a exce√ß√£o lan√ßada no meio.  Onde isso pode vir? </p><br><h2 id="bolshe-nikakih-goto">  Chega de <code>goto</code> </h2><br><p>  Portanto, o <code>goto</code> tradicional - que ignora os limites das fun√ß√µes - √© ruim n√£o apenas porque √© dif√≠cil de usar corretamente.  Se apenas isso, <code>goto</code> poderia ter ficado - muitas constru√ß√µes de linguagem ruim permaneceram. </p><br><p>  Mas at√© o pr√≥prio recurso de <code>goto</code> para o idioma torna <em>tudo</em> mais complicado.  Bibliotecas de terceiros n√£o podem ser consideradas uma caixa preta - sem conhecer a fonte, voc√™ n√£o consegue descobrir quais fun√ß√µes s√£o normais e quais imprevisivelmente controlam o fluxo de execu√ß√£o.  Este √© um grande obst√°culo para prever o comportamento do c√≥digo local.  Recursos poderosos, como gerenciadores de contexto e pop-ups autom√°ticos de erros, tamb√©m s√£o perdidos.  √â melhor remover o <code>goto</code> completamente, em favor dos operadores de controle que suportam a regra da caixa preta. </p><br><h1 id="o-vrede-vyrazheniy-tipa-go">  Sobre os perigos de express√µes como "Go" </h1><br><p>  Ent√£o, vimos a hist√≥ria do <code>goto</code> .  Mas √© aplic√°vel ao operador <code>go</code> ?  Bem ... apesar de tudo!  A analogia √© chocantemente precisa. </p><br><h2 id="go-vyrazheniya-lomayut-abstrakcii">  express√µes ir quebram abstra√ß√µes. </h2><br><p>  Lembre-se de como dissemos que, se a linguagem permitir <code>goto</code> , qualquer fun√ß√£o pode ocultar <code>goto</code> em si mesma?  Na maioria das estruturas ass√≠ncronas, as express√µes <code>go</code> levam ao mesmo problema - qualquer fun√ß√£o pode (ou n√£o) executar a tarefa em segundo plano.  Parece que a fun√ß√£o retornou o controle, mas ainda funciona em segundo plano?  E n√£o h√° como descobrir sem ler a fonte da fun√ß√£o e tudo o que ela chama.  E quando isso vai acabar?  Dif√≠cil dizer.  Se voc√™ <code>go</code> seus an√°logos, as fun√ß√µes n√£o ser√£o mais caixas negras que respeitam o fluxo de execu√ß√£o.  No meu primeiro artigo sobre <a href="https://vorpus.org/blog/some-thoughts-on-asynchronous-api-design-in-a-post-asyncawait-world/" rel="nofollow">APIs ass√≠ncronas</a> , chamei isso de ‚Äúviola√ß√£o de causalidade‚Äù e descobri que essa √© a causa raiz de muitos problemas reais e comuns em programas que usam <code>asyncio</code> e Twisted, como problemas de controle de fluxo, problemas com desligamentos adequados etc. </p><br><blockquote>  Isso se refere ao controle do fluxo de dados que entra e sai do programa.  Por exemplo, o programa recebe dados a uma velocidade de 3 MB / s e sai a uma velocidade de 1 MB / s, e, portanto, o programa consome cada vez mais mem√≥ria, consulte <a href="https://vorpus.org/blog/some-thoughts-on-asynchronous-api-design-in-a-post-asyncawait-world/" rel="nofollow">outro artigo do autor</a> </blockquote><br><h2 id="go-vyrazheniya-lomayut-avtoochistku-otkrytyh-resursov">  As express√µes go quebram a limpeza autom√°tica de recursos abertos. </h2><br><p>  Vamos dar uma olhada em um exemplo <code>with</code> instru√ß√£o novamente: </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># Python with open("my-file") as file_handle: some code</span></span></code> </pre> <br><p>  Anteriormente, dissemos que est√°vamos "garantidos" de que o arquivo seria aberto enquanto <code>some code</code> funcionando e fechado depois.  Mas e se <code>some code</code> iniciar uma tarefa em segundo plano?    : ,  <em></em> ,     <code>with</code> ,      <em></em>   <code>with</code> ,   ,    ,      .  ,       ;   ,       ,   <code>some code</code> . </p><br><p>   ,     ,   -      ,   ,        . </p><br><blockquote>       ,   Python  <code>threading</code> ‚Äî       ,        ,          ‚Äî   ,    <code>with</code> </blockquote><p>  ,    ,     ,     (       ).     ,        .     ,     . </p><br><h2 id="go-vyrazheniya-lomayut-obrabotku-oshibok"> go-   . </h2><br><p>    ,     ,    (exceptions),          .        " ".         ,   .  ,      ,  .      ,       ,   ‚Ä¶      ,      .   ,   -  . (   ,   ,   " -   "     ‚Äî     ;      .)  Rust ‚Äî , ,        -     ‚Äî    .     (thread) , Rust <a href="https://doc.rust-lang.org/std/thread/" rel="nofollow">     </a> . </p><br><p> ,  <em></em>      ,  join         ,   <a href="https://twistedmatrix.com/documents/current/core/howto/defer.html" rel="nofollow">errbacks  Twisted</a>  <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch" rel="nofollow">Promise.catch  Javascript</a> .     ,   ,     .     ,  Traceback  .       <code>Promise.catch</code>       . </p><br><p>      ,       . </p><br><h2 id="bolshe-nikakih-go">   <code>go</code> </h2><br><p> ,  <code>goto</code>        , go-         ‚Äî    ,    ,   ,      .  ,   <code>goto</code> ,     ,     <code>go</code>        . </p><br><p>    ,     ,     !  : </p><br><ul><li>    <code>go</code> -,    ,   "  ", </li><li>        ,    <code>go</code> -. </li></ul><br><p>   ,   <a href="https://trio.readthedocs.io/en/stable/" rel="nofollow">Trio</a> . </p><br><h1 id="pitomnik-kak-strukturnaya-zamena-go">     <code>go</code> </h1><br><p>   :  ,        ,   ,    . ,       ,       : </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b13/280/671/b13280671e22430f5417a99dde464344.png"></p><br><p> ,      ,     ,     "  " . </p><br><p>         ?     " " ,  </p><br><p> )      ,   ,    (      ),  <br> )       ,             . </p><br><p>       .   ,        - .      ,       .. [3] </p><br><p>     : ,  ,        ,     <strong>""</strong> ,    .  Trio   ,    <code>async with</code> : </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/22b/0fe/266/22b0fe2660255eede7befcff37f099b9.png"></p><br><p>       ,   <code>as nursery</code>     <code>nursery</code> .      <code>nursery.start_soon()</code> ,    () :      <code>myfunc</code>  <code>anotherfunc</code> .     <em></em> .     ,   ,    () ,   ,   . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/cbb/a00/adc/cbba00adc39a2f528626284bbf4a7e55.png"></p><br><p>  ,    ,        ‚Äî        ,    ,       .   ,   . </p><br><blockquote> ,     . </blockquote><p>              : </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/017/9df/9f1/0179df9f11831897e5e231edc5d43a20.png"></p><br><p>     ,     .  Aqui est√£o alguns deles: </p><br><h2 id="pitomnik-sohranyaet-abstrakciyu-funkciy">    . </h2><br><p>   go- ‚Äî    , ,      ,      .         ‚Äî          ,      ,     .      ,  ,    . </p><br><h2 id="pitomnik-podderzhivayut-dinamicheskoe-dobavlenie-zadach">     . </h2><br><p>    ,        .         : </p><br><pre> <code class="go hljs">run_concurrently([myfunc, anotherfunc])</code> </pre> <br><blockquote> async.gather  Python, Promise.all  Javascript,  .. </blockquote><p>    ,        ,    ,    . ,       <code>accept</code> ,             . <br>   <code>accept</code>   Trio: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> trio.open_nursery() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> nursery: <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: incoming_connection = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> server_socket.accept() nursery.start_soon(connection_handler, incoming_connection)</code> </pre> <br><p>    ,   ,  <code>run_concurrently</code>    .   ,    <code>run_concurrently</code>    ‚Äî    ,     ,   <code>run_concurrently</code> ,     . </p><br><h2 id="iz-pitomnika-vsyo-eschyo-mozhno-vyyti">      . </h2><br><p>     .      ,    ,      ? :      .  ,    <code>async with open_nursery()</code>   <code>nursery.start_soon()</code> , ‚Äî    [4], ,     ,      .       ,    ,  . </p><br><p>    ,     ,  " ",    : </p><br><ul><li>     ,     ,      ,     ,    ,    . </li><li>         ,   . </li><li>        ,    . </li></ul><br><p>          ,              . </p><br><p>    ,    ,  go-,       . </p><br><h2 id="vy-mozhete-opredelit-novye-tipy-kotorye-kryakayut-kak-pitomnik">     ,    . </h2><br><p>      ,     - .                ,    ,   .            : </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> my_supervisor_library.open_supervisor() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> nursery_alike: nursery_alike.start_soon(...)</code> </pre> <br><p>       ,       ,     .  . </p><br><p>  Trio     ,  <code>asyncio</code>    : <code>start_soon()</code>   ,     <code>Future</code> (     ,       <code>Future</code> ).  ,        ( ,   Trio   <code>Future</code> !),       . </p><br><h2 id="net-pravda-pitomniki-vsegda-zhdut-okonchaniya-vseh-zadach-vnutri"> , ,  <em></em>     . </h2><br><p>           ,     ,   ‚Äî     ‚Äî   . </p><br><p>  Trio,          .     ,   ,    " " ( <a href="https://trio.readthedocs.io/en/latest/reference-core.html" rel="nofollow"></a> ),   <code>Cancelled</code> .  ,        ,    <em></em> ‚Äî   - ,      " ",        ,    ..   ,   ,    .  <em></em>   ,       ,   <em></em>        ,      . </p><br><h2 id="rabotaet-avtomaticheskaya-ochistka-resursov">    . </h2><br><p>     "  ",  <code>with</code>  . ,      <code>with</code>     ,      . </p><br><h2 id="rabotaet-podnyatie-oshibok">   . </h2><br><p>   ,    ,       .      . </p><br><p>  Trio,     ,         ‚Ä¶    -    .      ,      .   ,   ‚Äî     " " ‚Äî     ,     <code>myfunc</code>  <code>anotherfunc</code> ,       .         ,  ,       . </p><br><p> ,    :    (re-raise)    ,    .    ,       </p><br><blockquote>  " " ,  ,      ,     ,   ,   . </blockquote><p>    ,       ,      .    ? </p><br><p>  ‚Äî    ( )   ,                .   ,      ,            ,      ,   . </p><br><p>   ,         ,    -          ( <a href="https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/task-cancellation" rel="nofollow">task cancellation</a> ).        C#  Golang,                ‚Äî       . </p><br><h2 id="divnyy-novyy-mir-bez-go">     <code>go</code> </h2><br><p>  <code>goto</code>           ,        <code>with</code>  ;  <code>go</code> -   .  Por exemplo: </p><br><ul><li>        ,   ,   ,       . ( : <a href="https://vorpus.org/blog/timeouts-and-cancellation-for-humans/" rel="nofollow">    -</a> ) </li><li>  ‚Äî  Python    ,  <code>ctrl-C</code>    ( <a href="https://vorpus.org/blog/control-c-handling-in-python-and-trio/" rel="nofollow"></a> ).    ,         . </li></ul><br><h1 id="pitomniki-na-praktike">    </h1><br><p> ,   .      ? </p><br><p> ‚Ä¶   :     ! ,     ,     .       ,          , ,         <code>break</code>  <code>continue</code> . </p><br><p>        ,      .   <a href="https://stackoverflow.com/questions/48282841/in-trio-how-can-i-have-a-background-task-that-lives-as-long-as-my-object-does" rel="nofollow">     </a> ‚Äî  ,   1970   ,     <code>goto</code> . </p><br><p>      .    (Knuth, 1974, .275): </p><br><blockquote>   ,         <code>goto</code> ,  ,  " "            <code>goto</code> .  <code>goto</code>   !    ,       ,        <code>goto</code> ,          . ,     ,      . ,      ‚Äî ,     ‚Äî    "goto" . </blockquote><p>        :    .    ,   ,         .     ,     ,      .  ,    ,     . </p><br><p> ,    Happy Eyeballs ( <a href="https://tools.ietf.org/html/rfc8305" rel="nofollow">RFC 8305</a> ),       TCP . ,   ‚Äî     ,   ,     .     <a href="https://github.com/twisted/twisted/compare/trunk...glyph:statemachine-hostnameendpoint" rel="nofollow"> Twisted </a> ‚Äî   600    Python       <a href="https://twistedmatrix.com/trac/ticket/9345" rel="nofollow">  </a> .      15 .  ,        ,  ,       .           ,   ,       .    ,  <a href="https://www.youtube.com/watch%3Fv%3Di-R704I8ySE" rel="nofollow"> </a> .    ?  .   . </p><br><h1 id="vyvody">  Conclus√µes </h1><br><p>     ‚Äî  <code>go</code> ,   , , <code>Futures</code> , <code>Promises</code> ,‚Ä¶   ‚Äî   <code>goto</code> ,    .      <code>goto</code> ,    -- <code>goto</code> ,    .   ,      ,                 ;      ,        . ,   <code>goto</code> ,       . </p><br><p>      ,      ,    (         <code>CTRL+C</code> )        ,    . </p><br><p>  ,     ,     ,  ,        ‚Äî  ,   <code>goto</code>    .       FLOW-MATIC   ,    ,     - .   ,       ,  <a href="https://trio.readthedocs.io/en/stable/" rel="nofollow">Trio</a> ,      ,   . </p><br><h1 id="kommentarii">  Coment√°rios </h1><br><p>   <a href="https://trio.discourse.group/t/discussion-thread-notes-on-structured-concurrency-or-go-statement-considered-harmful/25" rel="nofollow">     Trio</a> . </p><br><blockquote>       : <br><ul><li>    "What colour is your function?", <a href="https://habr.com/ru/post/466337/"></a> </li><li>     : <a href="https://lukasa.co.uk/2016/07/The_Function_Colour_Myth/" rel="nofollow">The Function Colour Myth</a> </li></ul><br><br>   Trio  : <a href="https://trio.discourse.group/" rel="nofollow">https://trio.discourse.group/</a> </blockquote><br><h1 id="blagodarnosti">  Agradecimentos </h1><br><p>   Graydon Hoare, Quentin Pradet, and Hynek Schlawack      .   ,  ,    . </p><br><blockquote>    <a href="https://habr.com/users/berez/">berez</a>     . </blockquote><p>  :  FLOW-MATIC   <a href="http://archive.computerhistory.org/resources/text/Remington_Rand/Univac.Flowmatic.1957.102646140.pdf" rel="nofollow"> </a> (PDF),  <a href="http://www.computerhistory.org/collections/catalog/102646140" rel="nofollow">  </a> . </p><br><p> Wolves in Action,  Martin Pannier,   <a href="https://creativecommons.org/licenses/by-nc-sa/2.0/" rel="nofollow">CC-BY-SA 2.0</a> , . <br> <a href="https://pixabay.com/en/french-bulldog-pet-dog-funny-2427629/" rel="nofollow"> </a> ,  Daniel Borker,   <a href="https://creativecommons.org/publicdomain/zero/1.0/" rel="nofollow">CC0 public domain dedication</a> . </p><br><h1 id="snoski">  </h1><br><p> [2]  WebAssembly  ,          <code>goto</code> : <a href="https://www.w3.org/TR/wasm-core-1/" rel="nofollow"></a> , <a href="" rel="nofollow"></a> </p><br><p> [3]  ,        ,   ,       ,       : <br> The "parallel composition" operator in Cooperating/Communicating Sequential Processes and Occam, the fork/join model, Erlang supervisors,  Martin S√∫strik's  <a href="http://250bpm.com/blog:71" rel="nofollow"> </a>    <a href="https://github.com/sustrik/libdill" rel="nofollow">libdill</a> ,  <a href="https://docs.rs/crossbeam/0.3.2/crossbeam/struct.Scope.html" rel="nofollow">crossbeam::scope</a> / <a href="https://docs.rs/rayon/1.0.1/rayon/fn.scope.html" rel="nofollow">rayon::scope</a>  Rust.         <a href="https://godoc.org/golang.org/x/sync/errgroup" rel="nofollow">golang.org/x/sync/errgroup</a>  <a href="https://godoc.org/github.com/oklog/run" rel="nofollow">github.com/oklog/run</a>  Golang. <br>   ,    - . </p><br><p> [4]   <code>start_soon()</code>  ,   ,  <code>start_soon</code>  ,    ,    ,     .       ,         . </p><br><h1 id="ob-avtore">   </h1><br><p> <a href="https://vorpus.org/" rel="nofollow">Nathaniel J. Smith</a> , Ph.D.,   UC Berkeley   <code>numpy</code> ,        Python    .  Nathaniel                . </p><br><h1 id="prodolzhenie">  </h1><br><p>             : </p><br><ul><li> <a href="https://habr.com/ru/post/466337/">   </a> ,  Bob Nystrom      </li><li> <a href="https://habr.com/ru/post/466337/"></a>        ,  <a href="https://habr.com/ru/post/466337/"></a>  golang </li><li>  <a href="https://habr.com/ru/post/469441/"> </a> ,   <a href="https://habr.com/ru/users/PsyHaSTe/">PsyHaSTe</a>       Haskell, Golang  C# </li><li>          : <a href="https://habr.com/ru/post/469441/">Go</a> , <a href="https://habr.com/ru/post/469441/">Go</a> , <a href="https://habr.com/ru/post/469441/">python</a> , <a href="https://habr.com/ru/post/469441/">C#</a> (,     JS) </li></ul><br><p>  ,  ,   ,  Haskell      ,      ,           . </p><br><p>       ( <a href="https://habr.com/ru/users/yourock/"> </a> , <a href="https://habr.com/ru/users/0xd34df00d/"> 0xd34df00d</a> , <a href="https://habr.com/ru/users/PsyHaSTe/"></a> )    ,       ( <a href="https://tools.ietf.org/html/rfc8305" rel="nofollow">Happy Eyeballs</a> ),         . </p><br><p>  ,  Trio  ?   Haskell  Golang    ? </p><br><p> <strong> :</strong> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt479186/">https://habr.com/ru/post/pt479186/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt479176/index.html">Modders passou 15 anos consertando Cavaleiros da Rep√∫blica Velha 2</a></li>
<li><a href="../pt479178/index.html">Deanonymizing transa√ß√µes de conjunto de dados el√≠pticas</a></li>
<li><a href="../pt479180/index.html">Cria√ß√£o do Discord - bot no .NET Core com implanta√ß√£o no servidor VPS</a></li>
<li><a href="../pt479182/index.html">A pr√°tica de preparar palavras estrangeiras com dublagem para memoriza√ß√£o no programa Anki</a></li>
<li><a href="../pt479184/index.html">Solu√ß√£o de problemas com pwnable.kr 26 - ascii_easy. Lidamos com gadgets ROP do zero de uma vez por todas</a></li>
<li><a href="../pt479188/index.html">A soma de todos os n√∫meros naturais: 1 + 2 + 3 + 4 + .... Parte 2</a></li>
<li><a href="../pt479192/index.html">Hypervisor ester√≥ide: FreeBSD + ZFS + cbsd</a></li>
<li><a href="../pt479196/index.html">A maioria dos supercomputadores executa Linux - discuta a situa√ß√£o</a></li>
<li><a href="../pt479200/index.html">Compacta√ß√£o de imagem fractal</a></li>
<li><a href="../pt479202/index.html">C ++ e m√©todos num√©ricos: integra√ß√£o aproximada de Newton-Cotes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>