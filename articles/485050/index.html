<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•Å üë® üë©üèæ‚Äçüîß Hipercubo C√≥mo proporcionamos a los desarrolladores dispositivos de prueba y no los perdimos üõåüèæ üëú üëßüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es imposible probar y depurar completamente las aplicaciones m√≥viles sin dispositivos de prueba. Deber√≠a haber muchos de estos dispositivos, porque el...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hipercubo C√≥mo proporcionamos a los desarrolladores dispositivos de prueba y no los perdimos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/485050/"><p>  Es imposible probar y depurar completamente las aplicaciones m√≥viles sin dispositivos de prueba.  Deber√≠a haber muchos de estos dispositivos, porque el mismo c√≥digo en diferentes modelos se comporta de manera diferente.  Pero, ¬øc√≥mo organizar la contabilidad del dispositivo?  ¬øC√≥mo hacer que los desarrolladores y probadores r√°pidamente y sin burocracia obtengan un tel√©fono inteligente espec√≠fico en la configuraci√≥n necesaria? </p><br><p>  Me llamo Alexey Lavrenyuk.  Puede conocerme como uno de los autores de <a href="https://github.com/yandex/yandex-tank">Yandex.Tank</a> y un orador sobre el tema de <a href="https://www.youtube.com/watch%3Fv%3Dgws7L3EaeC0">las pruebas</a> de <a href="https://www.youtube.com/watch%3Fv%3Dgws7L3EaeC0">carga</a> .  Luego med√≠ el consumo de energ√≠a de los tel√©fonos m√≥viles.  Ahora hago Yandex.Rover en un equipo de veh√≠culos no tripulados (y a veces a la luz de la luna como <a href="https://www.youtube.com/watch%3Fv%3DBZgpMC5ORW0">Santa Claus</a> ).  Y entre los tel√©fonos y el Rover estaba Hypercube. </p><br><p>  Hace un par de a√±os, el jefe de desarrollo m√≥vil lleg√≥ a nuestro departamento de pruebas de carga y se quej√≥ de la situaci√≥n con los dispositivos de prueba.  Los tel√©fonos deambulaban de mano en mano, elegir y encontrar r√°pidamente el tel√©fono era un problema.  Ya ten√≠amos experiencia con dispositivos m√≥viles: construimos un amper√≠metro digital para medir su consumo de energ√≠a.  Por lo tanto, decidimos ayudar a los colegas y r√°pidamente hacer algo genial: parec√≠a funcionar solo durante tres meses.  Me r√≠o de m√≠ mismo, ingenuo, desde 2020 y cuento lo que realmente nos esperaba. </p><br><img src="https://habrastorage.org/webt/-k/hz/b2/-khzb2ut0-y7ljuehz1f_8virf0.jpeg"><br><br><a name="habracut"></a><h2>  Concepto de servicio y primeras ideas. </h2><br><p>  Fuimos uno de los pocos en Yandex que ensamblaron dispositivos de hierro.  Adem√°s, est√°bamos versados ‚Äã‚Äãen dispositivos m√≥viles.  Para m√≠, la idea del servicio estaba en la superficie: debe conectar los tel√©fonos al concentrador y rastrear su disponibilidad y movimiento en la oficina a trav√©s de USB.  El dise√±o cabe en un gabinete de servidor. </p><br><p>  As√≠ es como imagin√© el proceso: </p><br><ol><li> <b>Mantenemos registros de tel√©fonos a trav√©s de USB.</b>  Todos los tel√©fonos en el gabinete est√°n conectados a trav√©s de USB.  El tel√©fono se est√° cargando y vemos informaci√≥n al respecto, incluida la ID del dispositivo, un identificador √∫nico (de hecho, para algunos dispositivos chinos no siempre es √∫nico), por el cual puede distinguir un tel√©fono de otro.  Por cierto, por el identificador, que cualquier dispositivo USB tiene en general, puede realizar un seguimiento de cualquier cosa: conecte una unidad flash USB normal a las llaves de su autom√≥vil, por ejemplo, y mantenga un registro autom√°tico de llaves. </li><li>  <b>Leemos a los usuarios en una insignia.</b>  Identificamos a todos los que sacan el tel√©fono del armario con una credencial (un pase por el cual puede reconocer a cualquier empleado de Yandex).  Despu√©s de que un empleado abre el gabinete, se cree que hizo todos los movimientos de los tel√©fonos en el gabinete. </li><li>  <b>Toda la informaci√≥n de movimiento se almacena centralmente en el servicio.</b>  Vemos d√≥nde y con qui√©n se encuentra cada tel√©fono m√≥vil.  Podemos rastrear estad√≠sticas: qu√© modelos son m√°s populares, qu√© tel√©fonos faltan. </li></ol><br><p>  Puede haber muchos de estos gabinetes, pero la informaci√≥n sobre todos los dispositivos m√≥viles en ellos se encuentra en un solo lugar.  Todos los cubos (gabinetes) est√°n combinados y conectados l√≥gicamente, y juntos forman un gran hipercubo (de ah√≠ el nombre interno del servicio). </p><br><p>  A todos les gust√≥ la idea, comenzamos a trabajar. </p><br><h2>  Hipercubo  Inicio </h2><br><p>  Tomamos un servicio de asistencia del lector RFID y la mini computadora Intel NUC.  Compramos un arduino, una cerradura el√©ctrica, un gabinete para equipo de red (era m√°s peque√±o que un gabinete de servidor, pero con los mismos "rieles" para arreglar el equipo). </p><br><img width="600" src="https://habrastorage.org/webt/gf/d4/i8/gfd4i8d6nytgx9c7efxnotiiynk.jpeg"><br><br><p>  Por supuesto, no nos dieron TK y la lista de compras.  No sab√≠amos exactamente qu√© modelo de gabinete encajar√≠a, cu√°ntos pernos y metros de cable se necesitan.  Los requisitos para el gabinete cambiaron sobre la marcha de acuerdo con los deseos de los equipos.  Acordamos, por ejemplo, que almacenaremos 40 tel√©fonos m√≥viles en un gabinete, y lo colocaremos en la mesita de noche, porque es peque√±o e inc√≥modo inclinarse hacia √©l. </p><br><img src="https://habrastorage.org/webt/xm/pp/b5/xmppb5zuu2hmopkmxjagfwmsaxy.jpeg"><br><br><h3>  Estantes para tel√©fonos </h3><br><p>  Pensamos durante mucho tiempo c√≥mo hacer que los estantes sean c√≥modos.  Yandex ten√≠a bastidores para demostrar tel√©fonos o probar interfaces.  Pensamos reutilizar los bastidores, pero no nos quedaban muy bien: los tel√©fonos all√≠ ponen la pantalla al usuario, como en un escaparate, no la necesitamos.  Quer√≠amos optimizar el espacio en el armario, por lo que decidimos hacer estanter√≠as nosotros mismos. </p><br><p>  Hubo una idea de poner los tel√©fonos dentro, como libros.  Para hacer esto, buscamos divisores en papeler√≠as, tratamos de usar soportes para CD-ROM, estantes de las tiendas, todo de una vez.  De manera experimental, las esquinas de pl√°stico de un separador de un conducto de cable se pegaron a un estante con adhesivo termofusible.  El "dise√±o del libro" result√≥ ser muy exitoso y nos gust√≥. </p><br><img src="https://habrastorage.org/webt/uy/f6/se/uyf6sey2q9tpuwgv-wlfxtrkpfw.jpeg"><br><br><h3>  Pocos lugares y muchos centros </h3><br><p>  En la parte inferior del gabinete hab√≠a poco espacio para cuatro concentradores de 10 puertos e Intel NUC; est√°bamos lejos del primer intento de llevarlos all√≠.  La puerta del gabinete no estaba dise√±ada para cerrar la cerradura: utilizamos mucho pegamento caliente, bloques de madera y una sierra para metales.  Perm√≠tame recordarle: el proyecto fue realizado por un grupo de prueba de carga, ninguno de nosotros ten√≠a experiencia con un molinillo en un punto de caf√©. </p><br><img src="https://habrastorage.org/webt/uv/yy/oc/uvyyoc8ilf6w6apxjmoxfc26kys.jpeg"><br><br><h3>  Prototipo de servicio </h3><br><p>  R√°pidamente nos ocupamos de esto: creamos una p√°gina que mostraba la ubicaci√≥n de los tel√©fonos y la colocamos directamente en nuestro servicio de prueba de carga.  Solo porque te permiti√≥ probar r√°pida y casi sin esfuerzo lo que sucedi√≥. </p><br><h2>  El primer prototipo de trabajo. </h2><br><p>  Recolectamos el primer hipercubo en tres semanas.  Se ve√≠a as√≠: </p><br><img src="https://habrastorage.org/webt/0s/3j/10/0s3j10s6n8gk4ryxw4tyxrq3xte.jpeg"><br><br><p>  Al principio, decidimos probar el prototipo en nuestra oficina de Yandex en Mosc√∫ (el cliente estaba en Ekaterimburgo).  Fue por un encuentro con el equipo m√≥vil Yandex.Browser: ya la conoc√≠amos del proyecto <a href="https://habr.com/ru/company/yandex/blog/311046/">Yandex Volta</a> (una versi√≥n m√°s reciente del informe est√° <a href="https://www.youtube.com/watch%3Fv%3DFRWvJpwyYrU">aqu√≠</a> ).  Estos tipos est√°n bien versados ‚Äã‚Äãen consumo de energ√≠a. </p><br><h2>  Primera prueba </h2><br><h3>  Estantes de nuevo </h3><br><p>  Result√≥ que el pegamento caliente no retiene bien las esquinas de pl√°stico en los estantes de metal.  Volvemos a la idea de los soportes para tel√©fonos.  Durante mucho tiempo pens√© en c√≥mo deber√≠a verse el estante ideal en el armario.  Ahora parece que fue posible dibujarlo en 15 minutos.  Al final, result√≥ no exactamente como en el primer boceto, pero esto es lo que dibuj√© entonces: </p><br><img src="https://habrastorage.org/webt/60/it/1c/60it1cg57quzpzegy-wshqqwb9o.jpeg"><br><br><p>  Tomamos los estantes comprados para gabinetes de servidores, y encima colocamos los divisores fresados ‚Äã‚Äãhechos de l√°minas de pl√°stico, que hicimos por encargo.  Este dise√±o ha sobrevivido hasta nuestros d√≠as. </p><br><img src="https://habrastorage.org/webt/wo/gp/r9/wogpr9zec43uihz89v1icn6wrnu.jpeg"><br><br><h3>  Hubs inconvenientes </h3><br><p>  Los centros para los primeros gabinetes estaban con un interruptor de encendido, botones sin bloqueo, apagados por defecto.  Por lo tanto, despu√©s de cada reinicio, tuve que encender los cuatro concentradores con las manos.  Conectamos Yandex SpeechKit para que el cubo se pronuncie si los hubs salen volando: "No estoy bien, por favor llame a la persona responsable".  Cuando entra una persona, la voz le dice que revise los centros.  Y el asistente de voz comenz√≥ a llamar a los empleados por su nombre y voz, quienes tomaron cu√°ntos tel√©fonos. </p><br><h3>  Problema de bloqueo </h3><br><p>  Hubo varias iteraciones con el castillo.  Cuando estaba buscando cerraduras para el prototipo desde el principio, encontr√© la √∫nica opci√≥n que me conven√≠a: "Sheriff": peque√±o, fuerte y muy ingenioso (todav√≠a no he visto ning√∫n an√°logo).  Se cerr√≥ perfectamente, pero para abrir el armario, era necesario presionar ligeramente la puerta.  No todos los usuarios entendieron esto, por lo que decidimos cambiar el bloqueo. </p><br><p>  Se llevaron al "Sheriff" con un resorte que empuj√≥ la puerta.  El gabinete se abri√≥ perfectamente, pero comenz√≥ a cerrarse mal y permaneci√≥ abierto (y se consider√≥ cerrado).  Esto se debi√≥ a que el sensor de cierre se instal√≥ por separado de la cerradura, la puerta ten√≠a una reacci√≥n violenta y el sensor a veces funcionaba hasta que se cerr√≥ la puerta.  Configurarlo no fue realista. </p><br><p>  Una vez m√°s, cambiamos la cerradura al siguiente "Sheriff", que ya no ten√≠a un dise√±o tan ingenioso, pero por otro lado, un sensor de cierre fue incorporado directamente en √©l.  La cerradura funcion√≥ en el prototipo, pero despu√©s de ponerlo en funcionamiento en el primer gabinete, comenz√≥ a agarrotarse.  Tuve que bailar con una pandereta: desmontar, lubricar, archivar con un archivo.  Con el dolor a la mitad, termin√≥. </p><br><p>  Despu√©s de las primeras pruebas, qued√≥ claro: a los desarrolladores y probadores les gusta el gabinete, lo usan activamente.  Esto es conveniente: puede monitorear los dispositivos y buscar el correcto en el servicio web, en lugar de preguntar a sus colegas: "¬øQui√©n tiene este tel√©fono ahora?".  Identificamos los problemas m√°s importantes: concentradores USB inconvenientes que necesita encender con las manos, cables USB largos de baja calidad (los conectores se rompieron y los cables se enredaron), un bloqueo defectuoso y divisores de estante poco confiables que se cayeron todo el tiempo.  El trabajo continu√≥. </p><br><h2>  Expansi√≥n hiperespacial </h2><br><p>  El gerente del departamento de gesti√≥n de proyectos, tambi√©n nos ayud√≥ a organizar la subcontrataci√≥n para los estantes, particip√≥ activamente en relaciones p√∫blicas internas en Yandex: fue a diferentes equipos y habl√≥ sobre nuestro maravilloso servicio.  Nos reunimos con representantes de otros departamentos e inesperadamente comenzamos a recibir pedidos internos de varias docenas de gabinetes.  Surgi√≥ una imagen sombr√≠a: probadores de carga durante semanas con todo el equipo ensamblar manualmente los gabinetes de lo que est√° a la mano. </p><br><p>  Nos dimos cuenta de que necesit√°bamos ayuda con la asamblea.  Antes de eso, era necesario optimizar el costo de una instancia del gabinete y su dise√±o para la producci√≥n a peque√±a escala. </p><br><h3>  Aprendiz </h3><br><p>  Durante un mes y medio de verano logramos encontrar un interno que supiera soldar, perforar y codificar un poco.  Con √©l, rehicimos el viejo gabinete en la Raspberry Pi (para deshacernos del costoso e innecesario Intel NUC) y ensamblamos un gabinete m√°s para la instalaci√≥n en los mostradores de ayuda en Mosc√∫ y San Petersburgo (hay personas inteligentes que ayudar√°n a nuestros usuarios a hacer frente al prototipo y dar√°n Comentarios √∫tiles). </p><br><h3>  Alternativas presupuestarias </h3><br><p>  Para optimizar el costo, reemplazamos los componentes m√°s irrazonablemente caros del prototipo: la mini computadora Intel NUC (25 mil rublos) y el lector RFID (5 mil).  Encontraron un lector alternativo en Ali Express por 150 rublos, y desde una mini computadora se mudaron a Raspberry Pi por 3,5 mil rublos. </p><br><p>  En la nueva plataforma, nos encontramos con varios problemas.  Al principio result√≥ que el rel√© para las cerraduras no cambia, porque RPi da 3.3 V, y los rel√©s mec√°nicos est√°n dise√±ados para 5 V. Tuve que cambiar a estado s√≥lido.  Luego descubrimos que no hay reloj en el tablero, y no podr√° tomarse el tiempo usando NTP: no puede autenticarse en la red de la oficina sin la hora correcta (encontramos una placa de extensi√≥n especial con un reloj para RPi). </p><br><p>  El problema m√°s encantador fue con los iPhones.  Tan pronto como se insert√≥ el sexto iPhone en el RPi, dej√≥ de estar disponible en la red.  Un gerente de proyecto que pasaba (y en el pasado un administrador duro) nos ayud√≥ a resolver esto.  Result√≥ que la tarjeta de red en el RPi se divorci√≥ a trav√©s de USB, y los iPhones provocaron un servicio defectuoso para terminar el bus USB.  Este problema apareci√≥ por primera vez en la oficina de Minsk, los chicos pudieron reproducirlo r√°pidamente y dar su opini√≥n, lo que nos ayud√≥ mucho.  Resolvieron el problema cuando demolieron la interfaz gr√°fica (si no recuerdo mal), porque el servicio estaba integrado en ella. </p><br><h3>  Los gabinetes est√°n creciendo </h3><br><p>  Hubo debate sobre el tama√±o del gabinete.  Alguien pens√≥ que era necesario poner el doble de tel√©fonos en un armario, alguien, que los gabinetes grandes eran inconvenientes para usar en la oficina.  Y luego descubrimos que ya hab√≠amos comprado todos los peque√±os gabinetes de las tiendas de Mosc√∫, y la pr√≥xima entrega ser√≠a solo en tres meses.  El debate termin√≥ por s√≠ solo. </p><br><p>  Decidieron agrandar todos los siguientes gabinetes.  Mirando hacia el futuro, dir√©: result√≥ ser la decisi√≥n correcta.  Sobre la base de un gran gabinete, se ha vuelto m√°s f√°cil colocar dispositivos electr√≥nicos; ya no se colocaron 80 tel√©fonos.  En √©l entre los rieles hab√≠a un servidor est√°ndar de 19 pulgadas.  En un gabinete peque√±o, la distancia entre los rieles no era suficiente. </p><br><img src="https://habrastorage.org/webt/yr/zt/x4/yrztx4px9jzm3937az12pj0yjli.jpeg"><br><br><h3>  Desarrollo web y UX </h3><br><p>  Pusimos nuestra varita en uno de los marcos internos de desarrollo web, nos dimos cuenta de que era bueno y arrastramos la placa del tel√©fono de Django a React.  Pero estaba claro que solo una tableta no ser√≠a adecuada para nadie.  El departamento de servicios geogr√°ficos pens√≥ y amaneci√≥ la tarea en varias pantallas. </p><br><p>  Tuve que conectar un equipo de desarrollo web.  Nos asignaron un dise√±ador de producto que pens√≥ completamente en la interacci√≥n de los usuarios con el servicio.  Hizo calcoman√≠as convenientes en los gabinetes, coloc√≥ los gabinetes en el mapa de la oficina, estudi√≥ el chat de soporte para comprender mejor lo que los usuarios quieren.  En resumen, tom√© el proyecto bajo mi ala en t√©rminos de experiencia de usuario. </p><br><p>  Los desarrolladores web tomaron la delantera e implementaron r√°pidamente dise√±os de dise√±o.  Tenemos algo similar a Yandex.Market en una escala m√°s peque√±a: entras, eliges un tel√©fono, vas a recogerlo en un armario.  El sue√±o es simple. </p><br><img src="https://habrastorage.org/webt/ve/ip/7s/veip7sfanydchkpd_jmd4su5fe8.png"><br><br><p>  En alg√∫n lugar aqu√≠ nos dimos cuenta de que el proyecto tendr√≠a que extenderse a todo el Yandex.  Acordamos los gastos para corregir errores y mejorar seriamente la calidad del servicio: hab√≠a un presupuesto general para la compra de gabinetes, repuestos y herramientas.  Con la ayuda de Pasha Melnikov, el jefe del grupo de proyectos de hierro RnD (en ese momento, y ahora est√° involucrado en Yandex.Station), logramos llegar a un acuerdo con una compa√±√≠a externa sobre la producci√≥n de gabinetes en serie teniendo en cuenta nuestros requisitos. </p><br><h3>  Nueva versi√≥n de hubs </h3><br><p>  Compramos otra versi√≥n de los hubs, sin botones de encendido.  Ahora no hab√≠a necesidad de subir dentro del gabinete y encender los cubos despu√©s de un reinicio.  Armamos un prototipo manualmente, funcion√≥ perfectamente.  Pero cuando lo enviamos a Ekaterimburgo, inmediatamente comenzamos a recibir quejas de que el gabinete no ve algunos tel√©fonos.  Entend√≠ esto solo en el acto.  Result√≥ que los nuevos centros tienen una topolog√≠a diferente (incluso para el mismo modelo de centro en diferentes series, la topolog√≠a puede variar). </p><br><p>  Tanto el viejo como el nuevo concentrador de 10 puertos en el interior consta de tres chips USB con cuatro puertos.  Pero en el viejo hub con el bot√≥n de encendido, dos chips est√°n atascados en uno, y en el nuevo est√°n conectados por una "guirnalda".  El n√∫mero de puertos es el mismo, pero la profundidad de anidamiento es diferente.  No se detectaron tel√©fonos viejos en puertos con una gran profundidad de anidaci√≥n.  Es bueno que fueran viejos y no muy necesarios.  Resolvimos el problema de un dolor de cabeza cortando la cabeza: simplemente tomamos modelos de tel√©fono m√°s nuevos para el gabinete, bueno, est√°bamos esperando la implementaci√≥n de nuestros propios centros.  Es cierto que el software ten√≠a que permitir establecer diferentes configuraciones de topolog√≠a USB para diferentes gabinetes. </p><br><h2>  Centros propios </h2><br><p>  Junto con Pasha, comenzamos a desarrollar nuestro propio hub USB externo.  Fue necesario para resolver el problema de los hubs comprados, y tambi√©n para resaltar los dispositivos para los que el usuario vino y acelerar la carga de los tel√©fonos modernos: para esto tomamos fuentes de alimentaci√≥n potentes y admitimos los √∫ltimos est√°ndares.  Los centros ten√≠an la capacidad de conectar sensores de temperatura externos, por lo que podemos controlarlo en cada estante.  Se eligieron los tama√±os para que dos tarjetas de concentrador instaladas en una caja encajen exactamente en el rack del servidor de 19 pulgadas.  Los cubos tienen un perfil bajo para ahorrar espacio entre los estantes; en general, resultaron geniales y modernos.  Pasha contar√° con m√°s detalle sobre este proyecto en Habr√©. </p><br><img src="https://habrastorage.org/webt/fr/ou/uh/frouuhq7yr0jweypbpumfd0tpqq.jpeg"><br><br><h2>  Asamblea </h2><br><p>  El ensamblaje de componentes basados ‚Äã‚Äãen gabinetes comprados tambi√©n se subcontrat√≥.  Seg√∫n nuestros c√°lculos, se supon√≠a que el equipo de ensamblaje deb√≠a hacer frente por un par de noches, pero debido a la abundancia de trabajo manual, dur√≥ un par de semanas.  Los cables que est√°n conectados de una manera no est√°ndar de acuerdo con los esquemas dibujados con un bol√≠grafo en un folleto, soldadura manual, falta de asientos prefabricados para componentes y componentes terminados en s√≠ mismos ... Los gabinetes se terminaron en el sentido literal de la palabra: se perforaron agujeros para las cerraduras y se cort√≥ con un molinillo para otros componentes. </p><br><h2>  M√°s cerca de la producci√≥n </h2><br><p>  Ya hemos so√±ado con dar gabinetes a la producci√≥n.  Decidimos que para acelerar es necesario simplificar la producci√≥n y aumentar la participaci√≥n en el outsourcing. </p><br><h3>  Tablero perif√©rico </h3><br><p>  Dise√±√© la placa perif√©rica y actualic√© los componentes.  Ahora se conecta a la Raspberry Pi con un solo cable y todos los dem√°s componentes con conectores est√°ndar. </p><br>  Configuramos un reloj para RPi en el tablero: antes, colocamos un componente listo para usar, comprado en una tienda.  Tambi√©n colocamos un convertidor DC / DC (sol√≠a haber una unidad de fuente de alimentaci√≥n separada) y una interfaz RS-485: esto nos permiti√≥ deshacernos de la red de cables.  Anteriormente, los conectamos manualmente de punto a punto soldando o pegando en uno de los pines RPi.  Verificamos el diagrama, miramos el punto de entrada del cable, buscamos el agujero deseado, y as√≠ con cada cable por turno.  Fue muy lento y provoc√≥ errores de ensamblaje.  La nueva placa utilizaba tomas telef√≥nicas. <br><br><img src="https://habrastorage.org/webt/bu/u5/11/buu5119817wci7cc-9mk2vderl8.jpeg"><br><br><p>  Result√≥ m√°s tarde: al realizar el cableado, no tuve en cuenta que necesita conectar el chip RS-485 a patas RPi bien definidas.  Tuve que actualizar la versi√≥n del tablero.  Cuando dibuj√© el componente de desacoplamiento de energ√≠a RS-485, no prest√© atenci√≥n al hecho de que la hoja de datos muestra el microchip desde la parte inferior, no desde la parte superior, y cuando lo encend√≠ por primera vez, hizo "¬°Bang!" Con un olor caracter√≠stico.  Tuve que volver a soldar el chip en la parte posterior de la placa para toda la primera serie de placas. </p><br><img src="https://habrastorage.org/webt/ob/7g/vf/ob7gvfrtpjy-iqvwg9dttukakwg.png"><br><br><h3>  Nueva versi√≥n de gabinete </h3><br><p>  Los gabinetes comprados han dejado de satisfacernos.  Parec√≠an extra√±os, porque estaban destinados al servidor, y no a la oficina, y tambi√©n deb√≠an modificarse a mano.  Tom√≥ mucho tiempo y el resultado fue artesanal.  Decidimos hacer nuestros propios gabinetes en la f√°brica de Arzamas. </p><br><p>  Le pedimos a la f√°brica que ensamblara un gabinete modificado basado en su gabinete de servidor est√°ndar: cambie el tama√±o, instale la cerradura, saque los conectores necesarios, haga agujeros para fijar los elementos.  Dibujaron bocetos de los estantes, hicieron un estuche para la unidad electr√≥nica (RPi y sus amigos), un estuche para el centro.  Cuando se trataba del castillo, el ingeniero de dise√±o de la f√°brica modific√≥ ligeramente la opci√≥n comprada, y comenz√≥ a funcionar mejor.  Se envi√≥ un informe de error con una solicitud de extracci√≥n para finalizar el hierro a los autores del Sheriff. </p><br><p>  Es muy conveniente que toda la electr√≥nica de control del gabinete est√© ahora concentrada en una carcasa, que est√° montada en cuatro pernos.  Se puede ensamblar por separado del gabinete, es f√°cil de quitar y reemplazar todo cuando est√° roto. </p><br><img src="https://habrastorage.org/webt/2o/1c/48/2o1c48-sruzbyqc-w-flwjh9x_w.png"><br><img src="https://habrastorage.org/webt/h9/az/i7/h9azi7um8ew9v8pj1buv2aqnd8g.png"><br><img src="https://habrastorage.org/webt/6_/yu/vb/6_yuvbuqop_0bxooqjwithyojie.png"><br><br><p>  En los gabinetes de prueba, los cables estaban confundidos, los conectores salieron volando del centro y se rompieron, y algunas veces los empleados se llevaron los cables con ellos.  Decidimos unir firmemente los cables a los estantes, dejando la capacidad de cambiar los cables.  Dibuj√© un boceto, y la f√°brica nos lo vendi√≥ en hierro. </p><br><img src="https://habrastorage.org/webt/be/qs/80/beqs80_1wvnvkexl2sjwadxrads.jpeg"><br><img src="https://habrastorage.org/webt/uu/gx/zj/uugxzj-rzbqpjeh5rhlrj0dso0c.jpeg"><br><br><p>  Por supuesto, fuimos a Arzamas varias veces: para negociar, para establecer la producci√≥n, para aceptar el resultado.  Como resultado, preparamos los gabinetes casi por completo, quedaba por ponerlos en funcionamiento.  Pero esta es otra historia. </p><br><img src="https://habrastorage.org/webt/y_/fb/lj/y_fbljom5cnrcjj9e2gn218rjwq.jpeg"><br><br><p>  Por cierto, si visitas Arzamas, ve a la hamburguesa en el centro: es genial. </p><br><h2>  En la proxima serie </h2><br><p>  Ahora nuestros cubos se utilizan activamente en la empresa.  Incluso se nos ocurrieron los nombres: Stanley Cube, Maggi Cube, Arnie Cube (Arnold Schwarzenegger, seis piezas), etc. </p><br><p>  En un futuro cercano, sus colegas compartir√°n historias con usted sobre el destino del servicio.  Por ejemplo, sobre c√≥mo se desarroll√≥ Yandex.Hub.  O sobre c√≥mo algunos puertos de los centros comenzaron a "entumecerse".  En el puerto "adormecido" no puede ver la desconexi√≥n de los dispositivos USB, incluso en los mensajes del n√∫cleo no hay nada.  Pero todo se normaliza si retira el tel√©fono del puerto y lo vuelve a pegar.  Mientras tanto, los muchachos est√°n escribiendo art√≠culos para ti. Intenta adivinar por qu√© es posible. </p></div></div><p>Source: <a href="https://habr.com/ru/post/485050/">https://habr.com/ru/post/485050/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../485034/index.html">Automatizar la compilaci√≥n de un proyecto Qt en Windows en Travis CI</a></li>
<li><a href="../485036/index.html">¬øPor qu√© necesito soporte instrumental para la paginaci√≥n clave?</a></li>
<li><a href="../485042/index.html">Debido al soporte obligatorio 5G, los tel√©fonos inteligentes con Snapdragon 865 ser√°n peores en 2020</a></li>
<li><a href="../485044/index.html">Desmontamos el reloj digital de la nave espacial Soyuz</a></li>
<li><a href="../485046/index.html">C√≥mo planificar una estrategia de producto ganadora</a></li>
<li><a href="../485052/index.html">¬øQui√©n es un buen control de calidad?</a></li>
<li><a href="../485056/index.html">Divide y vencer√°s</a></li>
<li><a href="../485058/index.html">"Verificar el reloj": lo que se sabe sobre el nuevo protocolo de sincronizaci√≥n de hora del servidor</a></li>
<li><a href="../485068/index.html">C√≥digo limpio para TypeScript - Parte 2</a></li>
<li><a href="../485070/index.html">Andrew Eun "Pasi√≥n por el aprendizaje autom√°tico". Traducci√≥n de los cap√≠tulos 36-46</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>