<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∏ ü§∂üèæ üö∂üèª Novos recursos planejados no C # 8.0 üññüèª üë®‚Äçüîß üòΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todas as ferramentas introduzidas anteriormente nas vers√µes secund√°rias do C # foram projetadas para n√£o alterar muito o idioma. S√£o mais como aprimor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Novos recursos planejados no C # 8.0</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413065/"><p><img src="https://habrastorage.org/webt/ta/4h/d5/ta4hd5nyoa--cjkunjyjjqhpam0.jpeg"></p><br><p>  Todas as ferramentas introduzidas anteriormente nas vers√µes secund√°rias do C # foram projetadas para n√£o alterar muito o idioma.  S√£o mais como aprimoramentos de sintaxe e pequenas adi√ß√µes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aos novos recursos do C # 7.0</a> . </p><br><p>  Essa abordagem foi deliberada e permanece v√°lida. </p><br><p>  Mudan√ßas mais s√©rias, que exigem mais trabalho em todas as etapas do desenvolvimento (design, implementa√ß√£o e teste), continuar√£o a ser lan√ßadas apenas nas principais vers√µes do idioma.  Embora a vers√£o menor final do C # 7 ainda n√£o tenha sido lan√ßada, a equipe j√° est√° trabalhando ativamente na pr√≥xima vers√£o principal do idioma: C # 8.0. </p><br><p> Neste artigo, pretendo apresentar uma sele√ß√£o de recursos atualmente planejados que provavelmente estar√£o no release final.  Todos eles est√£o em um est√°gio inicial de desenvolvimento e est√£o sujeitos a altera√ß√µes. </p><a name="habracut"></a><br><h2 id="nullable-reference-types">  Tipos de refer√™ncia anul√°veis </h2><br><p>  Essa ferramenta j√° foi oferecida nos est√°gios iniciais do desenvolvimento do C # 7.0, mas foi atrasada at√© a pr√≥xima vers√£o principal.  Seu objetivo √© ajudar o desenvolvedor a evitar NullReferenceException sem tratamento. </p><br><p>  A id√©ia principal √© permitir que voc√™ especifique ao determinar o tipo de uma vari√°vel se ela pode ser nula ou n√£o: </p><br><pre><code class="cs">IWeapon? canBeNull;
IWeapon cantBeNull;</code></pre><br>
<p> null  ,     null  -null ,      (   ,       ,    ):</p><br>
<pre><code class="cs">canBeNull = null;       //  
cantBeNull = null;      // 
cantBeNull = canBeNull; // </code></pre><br>
<p>,      nullable-      null:</p><br>
<pre><code class="cs">canBeNull.Repair();       // 
cantBeNull.Repair();      //  
if (canBeNull != null) {
    cantBeNull.Repair();  //  
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><p> ,        ‚Äì     ,  -     ?</p></div></div><br>
<p>    ,        :  ,            null.     ,     null-        .</p><br>
<p>    nullability ,         .    ,         .</p><br>
<p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  Visual Studio 2017 15.6 update</a>.</p><br>
<h2 id="records">Records</h2><br>
<p>  ,   -  C#      ,            -.</p><br>
<p>          :</p><br>
<pre><code class="cs">public class Sword(int Damage, int Durability);</code></pre><br>
<p>    :</p><br>
<pre><code class="cs">public class Sword : IEquatable&lt;Sword&gt;
{
    public int Damage { get; }
    public int Durability { get; }

    public Sword(int Damage, int Durability)
    {
        this.Damage = Damage;
        this.Durability = Durability;
    }

    public bool Equals(Sword other)
    {
        return Equals(Damage, other.Damage) 
            &amp;&amp; Equals(Durability, other.Durability);
    }

    public override bool Equals(object other)
    {
        return (other as Sword)?.Equals(this) == true;
    }

    public override int GetHashCode()
    {
        return (Damage.GetHashCode() * 17 + Durability.GetHashCode());
    }

    public void Deconstruct(out int Damage, out int Durability)
    {
        Damage = this.Damage;
        Durability = this.Durability;
    }

    public Sword With(int Damage = this.Damage, int Durability 
        = this.Durability) =&gt; new Sword(Damage, Durability);
}</code></pre><br>
<p>  ,    ,         .         GetHashCode    -  Dictionary  Hashtable.    Deconstruct          :</p><br>
<pre><code class="cs">var (damage, durability) = sword;</code></pre><br>
<p>, ,   ,     .    ,        ,   . ,  ,     With,         :</p><br>
<pre><code class="cs">var strongerSword = sword.With(Damage: 8);</code></pre><br>
<p>,         :</p><br>
<pre><code class="cs">var strongerSword = sword with { Damage = 8 };</code></pre><br>
<h2 id="recursive-patterns">Recursive Patterns</h2><br>
<p>        C# 7.0.   8.0     :</p><br>
<p>         .           Deconstruct():</p><br>
<pre><code class="cs">if (sword is Sword(10, var durability)) {
    //  ,  Damage = 10
    // durability   sword.Durability
}</code></pre><br>
<p>  (tuple)          :</p><br>
<pre><code class="cs">switch (state, transition)
{
    case (State.Running, Transition.Suspend):
        state = State.Suspended;
        break;
}</code></pre><br>
<p> switch    ,          .     ,     :</p><br>
<pre><code class="cs">state = (state, transition) switch {
    (State.Running, Transition.Suspend) =&gt; State.Suspended,
    (State.Suspended, Transition.Resume) =&gt; State.Running,
    (State.Suspended, Transition.Terminate) =&gt; State.NotRunning,
    (State.NotRunning, Transition.Activate) =&gt; State.Running,
    _ =&gt; throw new InvalidOperationException()
};</code></pre><br>
<h2 id="default-interface-methods">Default Interface Methods</h2><br>
<p>  , C#      ,   :</p><br>
<pre><code class="cs">interface ISample
{
    void M1();                                    // 
    void M2() =&gt; Console.WriteLine("ISample.M2"); // 
}</code></pre><br>
<p>   ,       :</p><br>
<pre><code class="cs">abstract class SampleBase
{
    public abstract void M1();
    public void M2() =&gt; Console.WriteLine("SampleBase.M2");
}</code></pre><br>
<p>  ,  C# 8       ,      .     ,    .</p><br>
<p>           .       ,       .       ,       .     ,    .         ,    .</p><br>
<p>    C#,           . </p><br>
<p> ,     .        ,          ‚Äì     trait      .</p><br>
<p>    ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a>,             .   C# 8.0 ,            :</p><br>
<ul>
<li>         ,     ,    ,     .</li>
<li>            ,     ,        .  ,   .</li>
</ul><br>
<h2 id="asynchronous-streams">Asynchronous Streams</h2><br>
<p>C#       .  C# 8.0,       .        IEnumerable  IEnumerator:</p><br>
<pre><code class="cs">public interface IAsyncEnumerable&lt;out T&gt;
{
    IAsyncEnumerator&lt;T&gt; GetAsyncEnumerator();
}

public interface IAsyncEnumerator&lt;out T&gt; : IAsyncDisposable
{
    Task&lt;bool&gt; MoveNextAsync();
    T Current { get; }
}</code></pre><br>
<p>,          IDisposable:</p><br>
<pre><code class="cs">public interface IAsyncDisposable
{
    Task DisposeAsync();
}</code></pre><br>
<p>        :</p><br>
<pre><code class="cs">var enumerator = enumerable.GetAsyncEnumerator();
try
{
    while (await enumerator.WaitForNextAsync())
    {
        while (true)
        {
            Use(enumerator.Current);
        }
    }
}
finally
{
    await enumerator.DisposeAsync();
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><p>  ‚Äì  ,    while(true).   -  ,     . ,    ,   . ,    ,        .</p></div></div><br>
<p>     ,          .   ,        foreach.        :</p><br>
<pre><code class="cs">foreach await (var item in enumerable)
{
    Use(item);
}</code></pre><br>
<p> ,    foreach ,      .</p><br>
<p>     ,    yield.     ,      :</p><br>
<pre><code class="cs">async IAsyncEnumerable&lt;int&gt; AsyncIterator()
{
    try
    {
        for (int i = 0; i &lt; 100; i++)
        {
            yield await GetValueAsync(i);
        }
    }
    finally
    {
        await HandleErrorAsync();
    }
}</code></pre><br>
<p>      LINQ.</p><br>
<h2 id="ranges">Ranges</h2><br>
<p>      :</p><br>
<pre><code class="cs">var range = 1..5;</code></pre><br>
<p>    ,  :</p><br>
<pre><code class="cs">struct Range : IEnumerable&lt;int&gt;
{
    public Range(int start, int end);
    public int Start { get; }
    public int End { get; }
    public StructRangeEnumerator GetEnumerator();
    // overloads for Equals, GetHashCode...
}</code></pre><br>
<p>          :</p><br>
<ul>
<li>      ,        :</li>
</ul><br>
<pre><code class="cs">Span&lt;T&gt; this[Range range]
{
    get
    {
        return ((Span&lt;T&gt;)this).Slice(start: range.Start, 
            length: range.End - range.Start);
    }
}</code></pre><br>
<ul>
<li>     IEnumerable,            :</li>
</ul><br>
<pre><code class="cs">foreach (var index in min..max)
{
    //  
}</code></pre><br>
<ul>
<li>        ,      :</li>
</ul><br>
<pre><code class="cs">switch (value)
{
    case 1..5:
        //   
        break;
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><p>         step  ‚Äì      ,  .   ‚Äì   (    ).         Python,       .</p></div></div><br>
<p>   ,       , ..,       . ,    .</p><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><p>      ,     ,   , ..:</p><br>
<pre><code class="python">a[start:end] #   start  end-1
a[:end]      # items    end-1</code></pre><br>
<p>,         .</p></div></div><br>
<h2 id="generic-attributes">Generic Attributes</h2><br>
<p>          .   ,     ,   :</p><br>
<pre><code class="cs">public class TypedAttribute : Attribute
{
    public TypedAttribute(Type type)
    {
        // ...
    }
}</code></pre><br>
<p>  ,       :</p><br>
<pre><code class="cs">public class TypedAttribute&lt;T&gt; : Attribute
{
    public TypedAttribute()
    {
        // ...
    }
}</code></pre><br>
<p> ,     ,         :</p><br>
<pre><code class="cs">public TypedAttribute(T value)
{
    // ...
}</code></pre><br>
<h2 id="default-literal-in-deconstruction">Default Literal in Deconstruction</h2><br>
<p>         C# 7,     :</p><br>
<pre><code class="cs">(int x, int y) = (default, default);</code></pre><br>
<p>     default,       :</p><br>
<pre><code class="cs">(int x, int y) = default;</code></pre><br>
<h2 id="caller-argument-expression">Caller Argument Expression</h2><br>
<p>  C# 5,   CallerMemberName, CallerFilePath  CallerLineNumber)           .</p><br>
<p> CallerMemberName        INotifyPropertyChanged:</p><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PropertyChanged.Fody</a>  .</p></div></div><br>
<pre><code class="cs">class ViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName));
    }

    private int property;

    public int Property
    {
        get { return property; }
        set
        {
            if (value != property)
            {
                property = value;
                OnPropertyChanged();
            }
        }
    }
}</code></pre><br>
<p>C# 8       CallerArgumentExpression,         ,            :</p><br>
<pre><code class="cs">public Validate(int[] array, [CallerArgumentExpression("array")] string arrayExpression = null)
{
    if (array == null)
    {
        throw new ArgumentNullException(nameof(array), $"{arrayExpression} was null.");
    }
    if (array.Length == 0)
    {
        throw new ArgumentException($"{arrayExpression} was empty.", nameof(array));
    }
}</code></pre><br>
<p> ,       ,           .</p><br>
<h2 id="target-typed-new-expression">Target-typed new Expression</h2><br>
<p>   ,   var      ( )    :</p><br>
<pre><code class="cs">Dictionary&lt;string, string&gt; dictionary = new Dictionary&lt;string, string&gt;(); //  var
var dictionary = new Dictionary&lt;string, string&gt;(); //  var</code></pre><br>
<p>         (),   ,     :</p><br>
<pre><code class="cs">class DictionaryWrapper
{
    private Dictionary&lt;string, string&gt; dictionary = new Dictionary&lt;string, string&gt;();
    // ...
}</code></pre><br>
<p>  C# 8,     new,       :</p><br>
<pre><code class="cs">class DictionaryWrapper
{
    private Dictionary&lt;string, string&gt; dictionary = new();
    // ...
}</code></pre><br>
<p> ,  ,     .       ,      .</p><br>
<div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"><p>    Type/typedef,               ,      !         ,  /    .</p></div></div><br>
<h2 id="ordering-of-ref-and-partial-modifiers-on-type-declarations">Ordering of ref and partial Modifiers on Type Declarations</h2><br>
<p>C#    ,    partial       struct  class.</p><br>
<p>    ref       C# 7.2,    partial   ,    ,   ref       struct,     partial    partial,   . </p><br>
<p>,     :</p><br>
<pre><code class="cs">public ref struct NonPartialStruct { }
public ref partial struct PartialStruct { }</code></pre><br>
<p> C# 8,    ,      :</p><br>
<pre><code class="cs">public partial ref struct PartialStruct { }</code></pre><br>
<h2 id="zaklyuchenie"></h2><br>
<p> C# 8    .        .<br>
,        C# 8.0,       .      ,   ,      .   ,     ,       .</p><br>
<p>,          ,    .              .</p><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C# 7.1, 7.2 and 7.3 ‚Äî New Features (Updated)</a>. </p><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><p> ,       C#.          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C# ‚Äî   - ?</a>   ,       :</p><br>
<ol>
<li> var .         .    . ,   .</li>
<li> Go  .    .        -.     ,  ,     (  )   .</li>
<li> C#      .         (   .Net Framework 1.1),       (  ¬´¬ª  LINQ     ‚Äì  ,   SQL,      ).   ,     .</li>
<li>    -  typedef,            ,      ,       (var     ).     new(),       (         ).</li>
</ol><br>
<p>    ,    ,      . GO  C#      .       ,       .      C# ,         ‚Äì       . </p><br>
<p>  ?       .         .   C#    ‚Äì Common Language Infrastructure (CLI). CLI        ,        ,        .         Java/Kotlin. ,    ?</p><br>
<p>           (    Nullable Reference Types).      ,    .</p></div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt413065/">https://habr.com/ru/post/pt413065/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt413051/index.html">DBMS baseado em coluna versus min√∫scula, que tal um compromisso?</a></li>
<li><a href="../pt413055/index.html">Como criar uma comunidade global de inicializa√ß√£o em torno do conte√∫do de TI: uma hist√≥ria resumida da Techstars</a></li>
<li><a href="../pt413059/index.html">Como criar prote√ß√£o corporativa contra fraudes Palestra no YaC 2018</a></li>
<li><a href="../pt413061/index.html">Como come√ßar a escrever o c√≥digo Lisp?</a></li>
<li><a href="../pt413063/index.html">Testando uma caneca t√©rmica caseira em uma transi√ß√£o de fase</a></li>
<li><a href="../pt413069/index.html">Pesquisa de √°udio, SEO de √°udio e ajuda para podcasts - Especialistas do Google j√° est√£o trabalhando nisso</a></li>
<li><a href="../pt413071/index.html">A DeepMind ensinou a IA a jogar videogame no YouTube</a></li>
<li><a href="../pt413073/index.html">Como trabalhar com a nuvem: 30 materiais, guias pr√°ticos e dicas sobre o t√≥pico PD, IS e IaaS</a></li>
<li><a href="../pt413075/index.html">Pesquisa de texto completo: recursos espec√≠ficos do Elasticsearch para tarefas complexas</a></li>
<li><a href="../pt413077/index.html">Resumo de materiais interessantes para o desenvolvedor de dispositivos m√≥veis # 255 (28 de maio a 3 de junho)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>