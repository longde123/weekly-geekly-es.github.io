<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë≤üèº üßìüèæ üóûÔ∏è Sicherheit von Clientanwendungen: Praktische Tipps f√ºr einen Front-End-Entwickler ‚å®Ô∏è üë®üèΩ‚Äç‚úàÔ∏è üñºÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wie Sie wissen, zielen die meisten Angriffe von BlackHat-Hackern darauf ab, die Serverdaten von Webanwendungen und -diensten zu gef√§hrden. Gleichzeiti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sicherheit von Clientanwendungen: Praktische Tipps f√ºr einen Front-End-Entwickler</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445932/"><p>  Wie Sie wissen, zielen die meisten Angriffe von BlackHat-Hackern darauf ab, die Serverdaten von Webanwendungen und -diensten zu gef√§hrden.  Gleichzeitig wird der Client-Teil zumindest heute angegriffen.  Nach der trockenen Definition ist jeder Angriff eine Reihe von Ma√ünahmen eines Hackers, die auf die Netzwerk- und Daten√ºbertragung, die Daten und deren Substitution, die Infrastruktur und die technischen Merkmale der Implementierung der Webanwendung abzielen.  Aus diesem Grund verlangen internationale Unternehmen von Entwicklungsingenieuren einen verantwortungsbewussteren und gr√ºndlicheren Umgang mit der Sicherheit von Clientanwendungen. </p><br><p>  Am Beispiel meines Projekts werde ich dar√ºber sprechen, wie Clientanwendungen heute angreifen und wie Sie diese Bedrohungen vermeiden k√∂nnen. </p><a name="habracut"></a><br><img alt="Top 10 Bedrohungen von 2013 - 2017" src="https://habrastorage.org/webt/ys/zg/d7/yszgd7tqw75npl5bx9pliitikte.jpeg"><br>  <i>Top 10 Bedrohungen f√ºr 2013 - 2017.</i> <br><br><p>  Wie Sie sehen, stehen unter den Hauptbedrohungen Injektion, Fehlerausl√∂sung, Umgehung der Authentifizierung und unsichere vertrauliche Daten an erster Stelle.  Die Gefahr der Verwendung von Komponenten mit bekannten Sicherheitsl√ºcken ist weiterhin relevant.  Es traten auch neue Bedrohungen auf: Hacking des Zugriffskontrollmechanismus, unsichere Deserialisierung und Serialisierung von Daten, unzureichend detaillierte Protokollierung und √úberwachung. </p><br><p>  Im Jahr 2001 gr√ºndeten Mark Curfy und Dennis Groves das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OWASP</a> (Open Web Application Security Project).  Dies ist ein internationales OpenSource-Projekt f√ºr den Erfahrungsaustausch zur Bek√§mpfung von Schwachstellen in Clientanwendungen, an dem eine gro√üe Anzahl von Anwendungssicherheitsingenieuren teilnimmt.  Die OWASP-Community f√ºllt das Portal mit einer Vielzahl von Artikeln mit Informationen zu Sicherheitsl√ºcken, Schulungsmaterialien, Tools zum Testen und Abwehr von Angriffen.  Echte Angriffe werden beschrieben, ihre Aspekte werden aufgedeckt und es wird beschrieben, was getan werden muss, um Bedrohungen zu verhindern. </p><br><p>  Um zu verstehen, welche Bedrohungen f√ºr ein Projekt gef√§hrlich sind, m√ºssen Sie es gr√ºndlich testen.  Zu diesem Zweck verf√ºgt das Netzwerk √ºber Anwendungen, Frameworks und Onlinedienste, die bestimmte Schwachstellen automatisch identifizieren.  F√ºr lokale Tests empfehle ich die Verwendung von Anwendungen und Frameworks. F√ºr das Testen von Projekten im Betrieb ist es sehr n√ºtzlich, auch Onlinedienste hinzuzuf√ºgen. </p><br><img src="https://habrastorage.org/webt/zh/c7/ll/zhc7lln_b43msp-lkz7ah0iapmw.jpeg"><br><br><p>  Aber auch wenn die Testtools Sie in Berichten nicht √ºber signifikante Schwachstellen informiert haben (was unwahrscheinlich ist), sollten Sie dennoch darauf achten, vertrauliche Daten im Versionskontrollsystem zu speichern, die Anwendung, den Authentifizierungsmechanismus, den Kennwort-Hashing-Algorithmus, die Verschl√ºsselung vertraulicher Daten sowie Protokollierungssysteme zu erstellen und √úberwachen der gesamten Webanwendung.  In diesem Fall ist es besser, auf Nummer sicher zu gehen und nicht blind auf Automatisierung zu vertrauen. </p><br><h2>  Git </h2><br><p>  Lassen Sie uns zun√§chst √ºber vertrauliche Daten in Git sprechen.  Im Idealfall wird ein separates Repository mit Geheimnissen zum Speichern vertraulicher Daten zugewiesen.  W√§hrend der Montage zur Inbetriebnahme werden vertrauliche Daten abgerufen und in die Anwendung eingen√§ht.  Heute sind Hashicorp Vault, Keywhiz, Docker-Geheimnisse, Azure Key Vault und eine Reihe anderer beliebt. </p><br><p>  Aber was ist, wenn Sie keinen solchen Speicher haben?  Sie k√∂nnen Tools verwenden, um Dateien mit Geheimnissen zu verschl√ºsseln und auszublenden, wodurch die Funktionen von Versionskontrollsystemen erweitert werden. </p><br><p> Das erste, was mir in den Sinn kommt, ist die universelle BlackBox-L√∂sung.  Es kann mit jedem Versionskontrollsystem verwendet werden, z. B. Mercurial, Git usw.  Dar√ºber hinaus gibt es zwei Erweiterungen f√ºr Git: git-crypt und git-secret.  Ich empfehle die Verwendung der zweiten, da sie mir am bequemsten zu verwenden und in Bezug auf die Beschreibung in der offiziellen Dokumentation verst√§ndlicher erscheint.  Nach der Installation von git-secret m√ºssen Sie es im Git-Repository initialisieren.  Denken Sie daran, die zu verwendende Erweiterung in der <b>.gitattributes-</b> Datei <b>anzugeben</b> .  Konfigurieren Sie als N√§chstes die Zug√§nglichkeit von Geheimnissen: Identifizieren Sie die Benutzer, denen Sie Zugriff auf vertrauliche Daten gew√§hren m√∂chten.  F√ºgen Sie dann Dateien mit vertraulichen Daten hinzu und <code>git-secret-hide</code> sie √ºber <code>git-secret-hide</code> .  Sie k√∂nnen versteckte Dateien durch <code>git-secret-reveal.</code> </p><br> <code>brew install git-secret              //  <br> git secret init                      //  <br> git secret tell your@gpg.email       &amp;nbsp//   <br> git secret add &lt;files...&gt;             //   <br> git secret hide                      &amp;nbsp//   <br> git secret reveal                    &amp;nbsp//    <br></code> <br><h2>  Webpack </h2><br><p>  Eine andere M√∂glichkeit, Bedrohungen zu beseitigen, besteht darin, das Webpack korrekt zu konfigurieren.  Zum Schutz vor XSS-, XEE- und √§hnlichen Angriffen m√ºssen Sie die Richtlinien CORS (Cross-Origin Resource Sharing) und CSP (Content Security Policy) einhalten.  In beiden F√§llen ist es wichtig, den √úberschriften zu folgen, um die Richtigkeit bestimmter im Projekt verwendeter Skripte zu √ºberpr√ºfen.  Browser verf√ºgen √ºber Mechanismen zum √úberpr√ºfen der Zuverl√§ssigkeit einer bestimmten Quelle. Safari gibt beispielsweise bei jedem Schritt Warnungen aus, wenn CORS und CSP falsch konfiguriert sind. </p><br><p>  Es gibt zwei M√∂glichkeiten, CORS und CSP einzuhalten.  Die erste besteht darin, die Header f√ºr die Beantwortung von Anforderungen auf der Serverseite zu konfigurieren.  Die zweite besteht darin, beide Richtlinien √ºber Meta-Tags und Attribute zu registrieren.  Die letztere Methode wird empfohlen, wenn Sie faule Back-End-Entwickler haben, diese immer besch√§ftigt sind und kein Interesse an Sicherheitsrichtlinien haben.  Meta-Tags k√∂nnen sofort beim Erstellen der Anwendung registriert werden.  Plugins wie das HTML-Webpack-Plugin, das HTML-Webpack-Exclude-Assets-Plugin, das Script-Ext-HTML-Webpack-Plugin, das csp-HTML-Webpack-Plugin und Crypto helfen uns dabei.  Wenn Sie in Ihrem Projekt Ressourcen von Drittanbietern haben (z. B. Links zu externen Schriftarten, die in CSS verwendet werden; von CDN geladene Ressourcen usw.), empfehle ich au√üerdem, das Webpack-Subresource-Integrity-Plugin zu verwenden.  Auf diese Weise werden Sie den Browser dar√ºber informieren, dass die im Skript geladenen Ressourcen zuverl√§ssig sind, keine Injektionen enthalten, vollst√§ndig und unber√ºhrt sind.  Und selbst wenn jemand sch√§dliche Daten in die Ressource eingef√ºgt hat und Sie diese hochgeladen haben, m√ºssen Sie darauf vorbereitet sein und Ihr Projekt vor solchen Bedrohungen sch√ºtzen. </p><br><p>  Ich m√∂chte <b>besonders</b> auf die Reihenfolge <b>achten</b> , in der die Klasseninstanzen f√ºr die Plugins erstellt werden.  Die Reihenfolge sollte genau so sein: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SHA256 = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function">) =&gt;</span></span> CRYPTO.createHash(<span class="hljs-string"><span class="hljs-string">'sha256'</span></span>).update( str, <span class="hljs-string"><span class="hljs-string">'utf8'</span></span>).digest(<span class="hljs-string"><span class="hljs-string">'base64'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sha256Str = SHA256( <span class="hljs-string"><span class="hljs-string">''</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() ); [‚Ä¶] <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackPlugin({   <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'index.html'</span></span>,   <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'public/index.html'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScriptExtHtmlWebpackPlugin({    <span class="hljs-attr"><span class="hljs-attr">custom</span></span>: [{           <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.js$/</span></span>,           <span class="hljs-attr"><span class="hljs-attr">attribute</span></span>: <span class="hljs-string"><span class="hljs-string">'nonce'</span></span>,           <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-string"><span class="hljs-string">'nonce-'</span></span> + sha256Str    }] }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackExcludeAssetsPlugin(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CspHtmlWebpackPlugin({    <span class="hljs-string"><span class="hljs-string">'base-uri'</span></span>: <span class="hljs-string"><span class="hljs-string">'\'self\''</span></span>,    <span class="hljs-string"><span class="hljs-string">'object-src'</span></span>: <span class="hljs-string"><span class="hljs-string">'\'none\''</span></span>,    <span class="hljs-string"><span class="hljs-string">'script-src'</span></span>: [<span class="hljs-string"><span class="hljs-string">'\'self\''</span></span>, <span class="hljs-string"><span class="hljs-string">'\'unsafe-eval\''</span></span>, <span class="hljs-string"><span class="hljs-string">'\'nonce-'</span></span> + sha256Str + <span class="hljs-string"><span class="hljs-string">'\''</span></span>],    <span class="hljs-string"><span class="hljs-string">'style-src'</span></span>: [<span class="hljs-string"><span class="hljs-string">'\'unsafe-inline\''</span></span>, <span class="hljs-string"><span class="hljs-string">'\'self\''</span></span>] }, {    <span class="hljs-attr"><span class="hljs-attr">devAllowUnsafe</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,    <span class="hljs-attr"><span class="hljs-attr">enabled</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,    <span class="hljs-attr"><span class="hljs-attr">hashingMethod</span></span>: <span class="hljs-string"><span class="hljs-string">'sha256'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SriPlugin({    <span class="hljs-attr"><span class="hljs-attr">hashFuncNames</span></span>: [<span class="hljs-string"><span class="hljs-string">'sha256'</span></span>, <span class="hljs-string"><span class="hljs-string">'sha384'</span></span>],    <span class="hljs-attr"><span class="hljs-attr">enabled</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }), [‚Ä¶]</code> </pre><br><p>  W√§hrend der Montage zeigt das <code>&lt;hed&gt;</code> dann das Meta-Tag <code>http-equiv=content-security-policy</code> .  Anweisungen werden in das <code>content</code> , das angibt, welchen Skripten und Ressourcen vertraut werden kann. </p><br><p>  Die <code>base-uri</code> Direktive zeigt an, welche Basis-URL zum Laden von Skripten, CSS, Bildern und mehr verwendet wird. </p><br><p>  Objekte werden normalerweise nicht geladen, setzen Sie also <code>none</code> auf die Anweisung <code>object-sr</code> c. </p><br><p>  Die Anweisung <code>script-src</code> gilt f√ºr JS-Skripte. </p><br><p>  Vergessen Sie nicht, jedes Mal ein Attribut vom Typ <code>nnce-&lt;hshVlue&gt;</code> zu registrieren.  Dar√ºber hinaus muss der Hash mit dem SHA256- oder SHA512-Algorithmus berechnet werden. </p><br><p>  Was die <code>style-src</code> Direktive <code>style-src</code> , hat unser Projekt eine Besonderheit: Wir verwenden styled-Komponenten, um CSS f√ºr jede Komponente zu schreiben und sie voneinander zu isolieren.  Und deshalb muss angegeben werden, dass in uns <code>style-src</code> <code>unsafe-inline</code> und <code>self</code> in <code>style-src</code> , andernfalls fallen gestylte Komponenten ab. </p><br><br><img src="https://habrastorage.org/webt/9x/di/ny/9xdinyh5msrmdszkkdayka1tqya.jpeg"><br><br><p>  Das <code>script</code> Tag wird automatisch auf <code>nnce-&lt;hshVlue&gt;</code> , <code>integrity</code> und <code>cross-origin</code> .  Sie teilen dem Browser mit, dass Ressourcen aus zuverl√§ssigen Quellen abgerufen werden.  Wenn der Browser andernfalls feststellt, dass die Ressource nicht mit CSP oder CORS √ºbereinstimmt, wird dieses Skript oder die CSS-Datei einfach nicht geladen, und es wird Folgendes in die Konsole geschrieben: <i>"Achten Sie auf dieses Skript in dieser Zeile, in der Sie initialisieren." ihn.</i>  <i>Schau, du hast etwas falsch gemacht! "</i>  . </p><br><p>  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MDN-</a> , OWASP- und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">W3C-</a> Dokumentation enth√§lt Richtlinien zum Durchsetzen von CSP- und CORS-Richtlinien.  Dar√ºber hinaus melden alle Penetrationstest-Tools die Einhaltung der CORS- und CSP-Regeln im Projekt.  Jedes Framework oder Tool, das automatische Tests eines Projekts durchf√ºhrt, weist auf M√§ngel hin. </p><br><h2>  Benutzerauthentifizierung </h2><br><p>  Wir verwenden OpenID Connect und das Kerberos-Protokoll.  Ein ziemlich verbreiteter OpenID-Standard wird verwendet, um externe Benutzer zu authentifizieren. </p><br><p>  Kerberos eignet sich besser f√ºr das interne Netzwerk, in der Bank wird es zur automatischen Authentifizierung von Mitarbeitern verwendet.  Angenommen, es gibt einen lokalen Computer, auf dem ein Mitarbeiter der Organisation arbeitet.  Er hat sich einmal auf diesem Computer authentifiziert und muss dann nirgendwo den Login und das Passwort erneut eingeben: Der Mitarbeiter meldet sich bei einer Anwendung an und das System authentifiziert sie sofort.  Kerberos verf√ºgt √ºber subtile Einstellungen f√ºr den lokalen Computer. Dies ist schwierig, da es f√ºr <b>jeden Computer und jeden Browser</b> konfiguriert werden muss <b>.</b>  Wenn Internet Explorer normalerweise die Standardeinstellungen und Chrome die IE-Einstellungen aufruft, muss Firefox diese separat konfigurieren.  Safari unter MacOS X findet die Einstellungen selbst, aber f√ºr Safari unter Windows m√ºssen Sie sie manuell angeben. </p><br><p>  Sie m√ºssen Ihre Anwendung in allen Browsern √ºberpr√ºfen, ob sie √ºberall ordnungsgem√§√ü funktioniert.  Wenn ich beispielsweise unter Windows arbeite, installiere ich Safari lokal und teste mein Projekt darin. Wenn ich unter Mac arbeite, rufe ich Windows in einer virtuellen Maschine auf, um die Anwendung auf den entsprechenden Browserversionen auszuf√ºhren. </p><br><p>  Die Authentifizierung kann in modernen Anwendungen mithilfe von Passport.js und Express-Session-Paketen sowie des Auth0-SDK implementiert werden. </p><br><p>  Wenn Sie keinen Authentifizierungsdienst √ºber OpenID Connect oder ein anderes Protokoll entwickeln k√∂nnen, verwenden Sie eine Proxy-Schicht wie Auth0 und dergleichen, sodass die Authentifizierung √ºber ein Drittunternehmen erfolgt, das darauf spezialisiert ist, Benutzern einen sicheren Zugriff auf Internetressourcen zu erm√∂glichen. </p><br><p>  Wenn wir eine Anwendung auf Node.js aktualisieren, empfehlen wir die Verwendung von Passport.js-, Express-Session- usw. Paketen auf dem Server.  Um die Sicherheit auf dem Client zu gew√§hrleisten, erh√∂hen wir die Komponente unabh√§ngig f√ºr die Authentifizierung.  Vergessen Sie nicht, das Attribut "Autocomplete off" im Authentifizierungsformular anzugeben, um die automatische Vervollst√§ndigung der Formularfelder auszuschlie√üen. </p><br><h2>  Passwort-Hashing </h2><br><p>  Auf der OWASP-Website wird empfohlen, keine in die Datenbank integrierten Kennwort-Hashing-Mechanismen zu verwenden.  Hierzu ist es besser, Pakete wie Argon2, PBKDF2, ccrypt und bcrypt zu verwenden.  In meiner Praxis verwende ich Argon2 - dies ist ein Wrapper f√ºr GCC-, PGP / GPG-Algorithmen usw., aber Sie m√ºssen zuerst das GCC-Paket installieren.  Argon2-Verwendungsschema: </p><br><br><pre> <code class="bash hljs">1.  GCC &gt;= 4.8 install $ brew install gcc</code> </pre> <br><pre> <code class="bash hljs">2.     - $ npm install -g node-gyp</code> </pre> <br><pre> <code class="bash hljs">3.   Argon2 $ npm install argon2</code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">4.</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ARGON <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'argon2'</span></span>; ARGON.generateSalt().then( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">salt: string</span></span></span><span class="hljs-function">) =&gt;</span></span> {  ARGON.hash(<span class="hljs-string"><span class="hljs-string">'some-user-password'</span></span>, salt)    .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">hash : string</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Successfully created Argon2 hash:'</span></span>, hash);       <span class="hljs-comment"><span class="hljs-comment">// </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> store the hash in the user database  }); }); argon2.verify( 'previously-created-argon-hash-here', 'some-user-password').then(() =&gt; {  console.log('Successful password supplied!');  // </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> log the user in }).catch(() =&gt; {  console.log('Invalid password supplied!'); });</span></span></code> </pre> <br><h2>  Verschleierung </h2><br><p>  Durch die Verschleierung k√∂nnen Sie den Code so √§ndern, dass er nicht in Komponenten analysiert werden kann.  Schlie√ülich verwenden Angreifer - und nicht nur sie - sehr oft Reverse Engineering: Der Programmierer nimmt eine JS-Datei und beginnt mit der Analyse der Quellen.  Auf diese Weise kann er die verwendeten Methoden erlernen oder den Arbeitsmechanismus eines bestimmten Skripts verstehen, um sch√§dlichen Code zu implementieren.  Oder verwenden Sie diese Mechanismen, um eine Webanwendung zu hacken und einen Stealth-Angriff durchzuf√ºhren. </p><br><p>  Hacker geraten nicht in Schwierigkeiten.  Zun√§chst untersuchen sie die Ressource, ermitteln die Schwachstellen und den Angriffsvektor.  Beispielsweise manipulieren sie Daten oder nutzen Schwachstellen in Transportprotokollen aus.  Der Angriffsvektor kann auf die Schwachstellen eines bestimmten Betriebssystems abzielen, von denen es in jedem UNIX-System viele gibt.  Sicherheitsl√ºcken k√∂nnen jedoch nur verwendet werden, wenn der Administrator schlecht konfigurierte Sicherheitsrichtlinien hat, z. B. falsch festgelegte URLs, die nach drau√üen gehen. </p><br><p>  Zur Aufkl√§rung wird also Reverse Engineering verwendet.  Es ist unm√∂glich, es vollst√§ndig auszuschlie√üen, aber es kann sehr schwierig sein.  Daf√ºr werden in meinem Fall verschiedene Obfuscatoren verwendet - Javascript-Obfuscator.  Darauf aufbauend wird ein Plugin f√ºr Webpack erstellt - Webpack-Obfuscator.  Auch f√ºr Webpack erstellt Obfuscator-Loader.  Dieses Paket enth√§lt empfohlene Einstellungen f√ºr verschiedene paranoide Ebenen: niedrig, mittel und hoch. Sie finden sie auf der offiziellen Website.  Wenn Sie diesen Verschleierer verwenden, denken Sie daran, dass er mit dem in das Webpack integrierten Minifizierungsmechanismus sehr schlecht funktioniert.  Verwenden Sie Minifizierung und Verschleierung nicht zusammen, da der Verschleierer sonst den Skriptcode vollst√§ndig besch√§digen kann. </p><br><p>  Dar√ºber hinaus erh√∂ht der Obfuscator die Lautst√§rke des Skripts und dessen Laden.  Hier m√ºssen Sie selbst entscheiden: Entweder Sie verbessern die Sicherheit, Stabilit√§t und Zuverl√§ssigkeit, verlieren aber an Komfort und Geschwindigkeit.  Achten Sie entweder auf die Geschwindigkeit, aber vergessen Sie die Sicherheit und befolgen Sie die Richtlinien. </p><br><h2>  Bedrohungsprotokollierung und -√ºberwachung </h2><br><p>  Es besteht eine solche Bedrohung wie die Verwendung von Paketen mit bereits bekannten Sicherheitsl√ºcken.  Bedrohungsanalysatoren wie npm audit, Snyk und LGTM helfen in solchen Situationen.  Npm Audit ist ein Standarddienstprogramm, das in npm integriert ist. Sie m√ºssen diesen Befehl jedoch st√§ndig aufrufen oder Kr√ºcken entwickeln.  Daher rate ich Ihnen, Snyk zu verwenden.  Dieses Projekt verf√ºgt √ºber eine eigene Datenbank mit Schwachstellen.  Wenn Sie den Test starten, greift Snyk auf diese Datenbank zu und l√§dt den Bericht vertraulich in Ihr Snyk-Projekt hoch, auf das Au√üenstehende keinen Zugriff haben.  Sie k√∂nnen Ihr Projekt zwar nur 300 Mal kostenlos √ºberpr√ºfen, und wenn Sie jedes Pre-Commit √ºberpr√ºfen, werden diese 300 kostenlosen Versuche sehr schnell beendet.  Daher ist es besser, einen Test f√ºr Pre-Push- oder Pre-Merge-Hooks durchzuf√ºhren. </p><br><p>  Der Mensch ist die wichtigste Verwundbarkeit eines Systems.  √úberpr√ºfen Sie daher unbedingt das Projekt, bevor Sie mit dem Erstellen der Anwendung beginnen, da selbst der Quellcode m√∂glicherweise etwas B√∂sartiges enth√§lt.  Es ist gut, wenn nur eine Person Zugriff auf das Projekt hat, aber normalerweise arbeiten wir als Teams.  Was w√§re, wenn eine Art ‚ÄûWohlt√§ter‚Äú auftauchte, der sich entschied, das Unternehmen ‚Äûwundersch√∂n‚Äú zu verlassen und Spuren zu hinterlassen?  Dies muss auch ber√ºcksichtigt werden. </p><br><p>  Ich empfehle, das Snyk-Paket von Anfang an zu verwenden und den Scan von der Konsole aus zu starten.  Hier ist alles einfach: Legen Sie nach der Installation das Login und das Passwort f√ºr das Konto fest, und der Test selbst kann folgenderma√üen durchgef√ºhrt werden: </p><br><ul><li>  Nach der Installation von npm i snyk ‚ÄîD Abh√§ngigkeit und Angabe von "snyk": true in package.json, f√ºhren Sie Folgendes aus: </li></ul><br><pre> <code class="bash hljs">./node_modules/.bin/snyk wizard --dev</code> </pre> <br><ul><li>  F√ºgen Sie in package.json Skripte und Einstellungen hinzu: </li></ul><br><pre> <code class="javascript hljs">{ ... <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: {  ...  <span class="hljs-string"><span class="hljs-string">"test"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run test:snyk &amp;&amp; npm run test:jest"</span></span>,  ...  <span class="hljs-string"><span class="hljs-string">"test:snyk"</span></span>: <span class="hljs-string"><span class="hljs-string">"snyk test --dev"</span></span>,  ...  <span class="hljs-string"><span class="hljs-string">"prepare"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run prepare:snyk"</span></span>,  <span class="hljs-string"><span class="hljs-string">"prepare:snyk"</span></span>: <span class="hljs-string"><span class="hljs-string">"snyk protect"</span></span> }, <span class="hljs-string"><span class="hljs-string">"husky"</span></span>: {  <span class="hljs-string"><span class="hljs-string">"hooks"</span></span>: {   <span class="hljs-string"><span class="hljs-string">"commit-msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"commitlint -E HUSKY_GIT_PARAMS"</span></span>,   <span class="hljs-string"><span class="hljs-string">"pre-commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run test:snyk &amp;&amp; npm run lint &amp;&amp; npm run test:jest"</span></span>,   <span class="hljs-string"><span class="hljs-string">"pre-push"</span></span>: [    <span class="hljs-string"><span class="hljs-string">"npm run test:snyk"</span></span>,    <span class="hljs-string"><span class="hljs-string">"npm run lint"</span></span>,    <span class="hljs-string"><span class="hljs-string">"npm run test:jest"</span></span>,    <span class="hljs-string"><span class="hljs-string">"npm run build:production"</span></span>   ],   ...  } }, <span class="hljs-string"><span class="hljs-string">"snyk"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><p>  Oben haben wir uns eine lokale √úberpr√ºfung auf Sicherheitsbedrohungen angesehen.  Um Pakete auf bekannte Bedrohungen zu √ºberpr√ºfen, empfehle ich au√üerdem die Verwendung von LGTM.  Verwenden Sie dieses Projekt in Verbindung mit GitHub oder Bitbucket (bis Sie es ausprobiert haben, war es nicht erforderlich), und der Code wird bei jedem Push sofort √ºberpr√ºft. </p><br><h2>  Anwendungs√ºberwachung </h2><br><p>  Im Bereich Front-End sind die Tools bereits gut etabliert. F√ºr die Protokollierung und √úberwachung des Client-Teils stehen Tools f√ºr jeden Geschmack zur Verf√ºgung.  Die bekanntesten sind Sentry, TrackJS und InsightOps.  Sentry Server kann auf seinen physischen Servern bereitgestellt werden.  In unseren beiden Projekten haben wir beispielsweise einen separaten Server verwendet, der vollst√§ndig f√ºr die Protokollierung des Betriebs von Anwendungen konfiguriert wurde.  Wir gingen zur URL und legten dort alle Protokolle ab.  Wenn in der Anwendung ein Fehler auftritt, wird dieser in einen try catch-Block eingeschlossen und √ºber die Raven-Paketmethoden an den Sentry-Server gesendet.  Alles ist einfach und bequem.  Wenn in Sentry undurchsichtige URLs angezeigt werden, die Sie nicht registriert haben, wenn Sie Einbettungen oder undurchsichtige Nachrichten sehen, versuchen diese, Sie zu hacken.  In meiner Praxis passierte dies regelm√§√üig.  Zum Beispiel versuchte eines der Projekte - ein Dienst zur Umgehung von Werbeblockern und Antivirenprogrammen - st√§ndig, dem entgegenzuwirken und es zu knacken. </p><br><p>  Zur √úberwachung empfehle ich auch die Verwendung von Grafana.  Es ist wichtig, ein System von Kriterien und Indikatoren zu ber√ºcksichtigen, die vom System √ºberwacht werden.  Wir haben den Datenverkehr, die R√ºckgabe von Werbung, den Grad der Anzeigenwiedergabe, die Anzahl der von Yandex stammenden Banner usw. eingestellt.  (Projekte in der Rambler Group).  Wir mussten verstehen, wie Yandex mit unseren Anfragen arbeitet, da es sich um einen Drittanbieter-Service handelt. Dies bedeutet, dass er √ºberwacht werden muss. Wenn dies fehlschl√§gt, kann das gesamte Projekt vollst√§ndig zusammenbrechen. </p><br><p>  Wenn Sie die gesamte Kommunikation mit Diensten von Drittanbietern √ºberwachen, werden Sie sehr schnell einen Fehler finden.  Die Geschichte stammt aus meiner Praxis: Wir haben gesehen, dass bei Yandex die Werbeantworten scharf aufgeh√∂rt haben.  Es stellte sich heraus, dass sie technische St√∂rungen hatten und das gesamte Werbenetzwerk eng zusammenbrach.  Und es war nicht Yandex, der uns zuerst informierte, sondern wir riefen sie an und fragten sie, was mit ihren Diensten geschah. </p><br><p>  Was ist der beste Weg, um zu √ºberwachen?  Nehmen Sie eine kleine URL, schreiben Sie die GET-Parameter und senden Sie eine GET-Anfrage an diese URL.  Verarbeiten Sie diese URL auf der Serverseite, schreiben Sie das Protokoll in die Datenbank und erh√∂hen Sie die √úberwachung auf Grafana.  Alles ist einfach. </p><br><p>  Das ist alles  In Zukunft werde ich versuchen, weiter √ºber das Thema des Schutzes von Webanwendungen vor Bedrohungen zu schreiben.  An alle, die bis zum Ende gelesen haben - ich w√ºnsche Sicherheit f√ºr Ihre Projekte))) </p><br><h3>  Liste der Quellen zum Lesen zum Thema: </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.owasp.org/index.php/Main_Page</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">tproger.ru/translations/webapp-security</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">S. Hawks.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Noch schnellere Einzelseitenanwendung: Sicherheit</a> </p><br><p>  Seacord, Robert C. Der CERT C-Standard f√ºr sichere Codierung / Robert C. Seacord.  - 2008 </p><br><p>  Chetan Karande.  Sichern von Knotenanwendungen - 2017 </p><br><p>  Steven Palmer.  Sicherheitsanf√§lligkeiten in Webanwendungen erkennen, ausnutzen, verhindern - 2011 </p><br><p>  Robert Shimonski, Sean-Philip Oriyano.  Clientseitige Angriffe und Verteidigung - 2012 </p><br><p>  Marcus Pinto, Dafydd Stuttard.  Das Handbuch f√ºr Hacker von Webanwendungen: Auffinden und Ausnutzen von Sicherheitsl√ºcken, 2. Ausgabe - 2011 </p><br><p>  Karl Duuna.  Sichern Sie Ihre Node.js-Webanwendung - 2015 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de445932/">https://habr.com/ru/post/de445932/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de445920/index.html">Live: Wie Sie die iOS-Entwicklung in gro√üen Teams eind√§mmen k√∂nnen</a></li>
<li><a href="../de445922/index.html">Warum Online-Sendungen ansehen, wenn Sie Habr lesen k√∂nnen?</a></li>
<li><a href="../de445924/index.html">SCH√ÑTZE: Wenn intelligente Uhren komisch werden</a></li>
<li><a href="../de445926/index.html">Das US-amerikanische UFO-Geheimprogramm hat auch Wurml√∂cher und zus√§tzliche Dimensionen untersucht.</a></li>
<li><a href="../de445928/index.html">Wie wir die Produktivit√§t des Tensorflow-Dienstes um 70% steigern konnten</a></li>
<li><a href="../de445936/index.html">Elektronikentwicklung. √úber Mikrocontroller an den Fingern</a></li>
<li><a href="../de445940/index.html">AMA mit Habr, v 7.0. Zitrone, Donuts und Nachrichten</a></li>
<li><a href="../de445946/index.html">MWC: Gebrauchsanweisung</a></li>
<li><a href="../de445948/index.html">Vererbung in C ++: Anf√§nger, Mittelstufe, Fortgeschrittene</a></li>
<li><a href="../de445952/index.html">Eine Billion kleiner Singles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>