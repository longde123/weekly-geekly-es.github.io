<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👶🏽 🍃 🔬 Portar Lode Runner de BC a UKNC 🙏🏾 🤲 🤾🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En marzo-mayo de este año, pasé varias semanas (por las tardes y los fines de semana) transportando el juguete Lode Runner de BK-0010 al UKSC. 
 Captu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Portar Lode Runner de BC a UKNC</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/383497/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En marzo-mayo de este año, pasé varias semanas (por las tardes y los fines de semana) transportando el juguete Lode Runner de BK-0010 al UKSC. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Captura de pantalla del menú portado:</font></font><br>
<img src="https://habrastorage.org/files/1d3/d35/f41/1d3d35f4111c4f4c9e4324d8e285ea26.png"><br>
<a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pantalla de juego de la versión portada: </font></font><br>
<img src="https://habrastorage.org/files/4f0/798/b1f/4f0798b1ff524bcab9d1a8039ccd8473.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BK-0010 es una computadora doméstica de finales de los 80 y principios de los 90, y en parte una computadora de la escuela (clases KUVT-86). </font><font style="vertical-align: inherit;">UKSC es una computadora escolar de la década de 1990. </font><font style="vertical-align: inherit;">BC y UKSC son parcialmente compatibles en arquitectura y sistema de comando: ambas computadoras se remontan a la familia PDP-11.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selección de juego</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta este año, no escribí nada serio bajo el UKSC, pero tenía que entender el código de la máquina. </font><font style="vertical-align: inherit;">Hubo un deseo de escribir algo, pero generalmente tengo grandes problemas con el tiempo libre, por lo que difícilmente funcionaría desde cero. </font><font style="vertical-align: inherit;">Y para empezar, es mejor hacer la tarea más fácil. </font><font style="vertical-align: inherit;">Al portar, la cantidad de trabajo suele ser mucho menor que cuando se escribe desde cero: se encuentran principalmente problemas de incompatibilidad entre los dos sistemas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el foro zx.pk.ru (uno de los lugares donde los fanáticos de la retrocomputación en general y las máquinas compatibles con PDP-11 en particular pasan el rato), el participante de Hobot </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elogió la implementación de Lode Runner en el BC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : esta fue la razón, para empezar intenté "mirar" el código del juguete Bueno, me involucré. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menú de versión original:</font></font><br>
<img src="https://habrastorage.org/files/8ba/13b/271/8ba13b271f1c441e9f561d6dd4998e0b.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La pantalla del juego de la versión original (en el monitor a color):</font></font><br>
<img src="https://habrastorage.org/files/e7a/798/d50/e7a798d5016f47129bc81b51ddfa59bb.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ingeniería inversa</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un par de semanas en las tardes y fines de semana pasé tiempo analizando y desarmando. </font><font style="vertical-align: inherit;">En el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">emulador, BKBTL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> agregó la capacidad de recopilar </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">una traza</font></a><font style="vertical-align: inherit;"> , es decir, cada instrucción se desmonta y se guarda en un archivo de texto. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hago un recorrido por la sección que me interesa registrar la traza, luego colapso la traza (sort &amp; uniq): obtengo fragmentos de la lógica. </font><font style="vertical-align: inherit;">Agrego comentarios a esto, gradualmente obtengo un archivo común.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suena simple, pero de hecho es un trabajo bastante complicado basado en conjeturas y su confirmación o refutación. Por ejemplo, consideramos que la dirección 001756 antes del comienzo del juego obtiene el valor 10, luego se disminuye, cuando llega a 0, el juego termina, aparentemente, este es el número de vidas. Encontramos confirmación de esto, colocamos comentarios en el texto donde aparece esta dirección. Este es un ejemplo bastante simple, en casos más complejos pasé mucho tiempo descubriendo lo que estaba sucediendo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando el volumen recibido se hizo lo suficientemente grande (más de 40 KB de texto, más de 1,500 líneas) y descubrí, al menos en términos generales, lo que estaba sucediendo, cómo se almacenaba y mostraba, comencé a pensar cómo traducirlo al UKSC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí puede ver el listado final resultante del desmontaje:</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/nzeemin/uknc-loderunner/blob/master/original/loderunner.lst</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laberinto</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada laberinto tiene 20 líneas de 30 bloques, un total de 600 bloques. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tipo de bloque está codificado por un número del 0 al 7: tres bits, triplete. </font><font style="vertical-align: inherit;">Para una palabra de 16 bits, se obtienen 5 tripletes completos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando se trabaja con máquinas similares a PDP-11, se usa ampliamente un sistema de 8 decimales, por lo tanto, es bastante conveniente usar tripletas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, cada laberinto cabe en 240 bytes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tipos de bloque:</font></font><br>
<pre><code class="hljs haskell">;	<span class="hljs-number">0</span> <span class="hljs-comment">-- </span>
;	<span class="hljs-number">1</span> <span class="hljs-comment">--  </span>
;	<span class="hljs-number">2</span> <span class="hljs-comment">--  </span>
;	<span class="hljs-number">3</span> <span class="hljs-comment">-- </span>
;	<span class="hljs-number">4</span> <span class="hljs-comment">-- </span>
;	<span class="hljs-number">5</span> <span class="hljs-comment">-- </span>
;	<span class="hljs-number">6</span> <span class="hljs-comment">-- </span>
;	<span class="hljs-number">7</span> <span class="hljs-comment">-- </span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los sprites de estos objetos están dispuestos en el orden de numeración de los tipos de bloque. </font><font style="vertical-align: inherit;">Cuando se decodifica un laberinto, al mismo tiempo se crea una "imagen de laberinto" en la memoria (byte por bloque), y el estado inicial del laberinto se dibuja en la pantalla.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organización de la pantalla</font></font></h3><br>
       ,     ,    «framebuffer»,        —     .   — 256  , 64   .   ,    ,       :<br>
  - ,   512 /    (1   , 8   ),<br>
    ,   256     (2   , 4   ).<br>
<br>
      ,    .      ,  «».      ,      —  8 .        — 640 × 288, 320 × 288, 160 × 288, ,     288          ,     .    ()     ,     . ,        .<br>
<br>
       320 × 288 —    320    80      .    ,      —    .<br>
<br>
<h3></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzó a escribir ejemplos en ensamblador del UKSC y estaba un poco deprimido, porque el ciclo "compilado - vinculado - lanzado" es bastante lento. El problema está en las herramientas. Hay un ensamblador cruzado MACRO11, aunque es algo defectuoso. Pero no hay un reticulador. Pero afortunadamente, no hace mucho tiempo, Patron publicó la consola RT-11: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zx-pk.ru/showthread.php?t=24755</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; de hecho, es un emulador de una máquina compatible con PDP11 que interactúa con la línea de comandos del sistema operativo como con un terminal. Por lo tanto, se hizo posible compilar y vincular los medios nativos de RT-11. Esto lo considero un gran avance, aceleró dramáticamente el trabajo.</font></font><br>
<br>
   ,     ,  ,        (     C#),             .     ,     , RT11- DUMP    .<br>
<br>
      ,     .     . ..     --,        .            (  AI ),      —   .<br>
<br>
 ,    (     )   ,    .<br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Foto de un juego en funcionamiento en una máquina real (gracias hobot):</font></font><br>
<img src="https://habrastorage.org/files/08e/a17/867/08ea17867ee7451794d3f5c7d099c698.jpg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Referencias</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zx-pk.ru/showthread.php?t=24886</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - tema sobre este tema en zx.pk.ru</font></font></li>
</ul></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es383497/">https://habr.com/ru/post/es383497/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es383485/index.html">The Void: un parque de atracciones en realidad virtual</a></li>
<li><a href="../es383489/index.html">Plataforma de música SoundCloud atacada por titulares de derechos de autor</a></li>
<li><a href="../es383491/index.html">Un servidor en la nube en los Países Bajos y los EE. UU. Hasta 2 meses es gratis para usuarios registrados</a></li>
<li><a href="../es383493/index.html">Petición para otorgar a los ciudadanos el derecho de distribuir independientemente sus propios impuestos</a></li>
<li><a href="../es383495/index.html">La supervivencia en Rusia. "Perros esquimales, reposts, tweets: cómo no violar la legislación anti-extremista"</a></li>
<li><a href="../es383499/index.html">Notch está pasando por tiempos difíciles</a></li>
<li><a href="../es383501/index.html">En los Estados Unidos lanzó un experimento para simular un vuelo a Marte que dura 365 días</a></li>
<li><a href="../es383503/index.html">Fotocélulas de perovskita: cinco gramos por metro cuadrado</a></li>
<li><a href="../es383505/index.html">EJTAG: atracción para hackers-2</a></li>
<li><a href="../es383507/index.html">Proyectos de la base lunar: historia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>