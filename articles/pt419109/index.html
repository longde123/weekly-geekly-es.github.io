<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👐🏾 🧑🏼‍🤝‍🧑🏼 ⬜️ Explique a franja no Android P. O que fazer com o Android Cutout? 👩🏻‍🤝‍👨🏿 🙊 😨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Queimado em setembro de 2007. Em setembro de 2017, a Apple voltou a moda, introduzindo o iPhone X. Não é de surpreender que nossos amigos da China, se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Explique a franja no Android P. O que fazer com o Android Cutout?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/419109/"> <s>Queimado em setembro de 2007.</s>  Em setembro de 2017, a Apple voltou a moda, introduzindo o iPhone X. Não é de surpreender que nossos amigos da China, sem pensar duas vezes, tenham copiado esse design da Apple (embora a primeira mini-franja ainda estivesse no Essential Phone, que não decolou).  Mas o que vemos agora?  Huawei P20, Asus Zenfone 5, OnePlus 6, Motorola One Power, Xiaomi Redmi 6 e outros fabricantes mais ou menos conhecidos já produzem ou anunciam telefones com franja.  Samsung e Google foram as últimas fortalezas nesta <s>corrida pela</s> luta pelo <s>hype</s> pela falta de moldura.  Ou não?  Segundo rumores, o Google Pixel 3 XL também estará <s>com essa porcaria</s> com um decote gracioso.  Bem, nós, como desenvolvedores, só podemos otimizar seus aplicativos para esse recorte para que os usuários possam continuar a usá-los confortavelmente.  Peço detalhes sob gato. <br><br><img src="https://habrastorage.org/webt/vc/za/ep/vczaephxhgg4entua42pcfj4rxa.png"><br><a name="habracut"></a><br>  Primeiro, precisamos descobrir se o aplicativo precisa de alguma otimização? <br>  Se você tiver um aplicativo de tela cheia ou o <code>windowActionBarOverlay = true</code> presente no tema, provavelmente será necessário. <br><br>  Quase todos os aplicativos estão longe de uma única tela, e você pode não perceber como o layout será executado em um deles.  Especialmente se o aplicativo tiver um código legado volumoso.  Portanto, você ainda deve percorrer todas as telas principais e verificar novamente.  Vamos descobrir o que precisa ser feito para isso. <br><br><h4>  1. Prepare um dispositivo / emulador de teste </h4><br>  Para testar seu aplicativo com franja, você precisa (obrigado, cap!) Android P. Atualmente, o Android P Preview 5 está disponível para os seguintes dispositivos (graças ao Project Treble): <br>  Telefone Essencial <br>  Google Pixel 2; <br>  Google Pixel 2 XL; <br>  Google Pixel <br>  Google Pixel XL <br>  Nokia 7 plus; <br>  OnePlus 6; <br>  Oppo R15 Pro; <br>  Sony Xperia XZ2; <br>  Vivo X21UD; <br>  Vivo X21; <br>  Xiaomi Mi Mix 2S <br><br>  Para instalar o Android P no seu dispositivo, basta ir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> e clicar em "Get Beta" para o seu dispositivo.  Obtendo-o pelo ar ou rolando você mesmo - a escolha é sua.  As instruções no site estão anexadas. <br>  Mas se você não pode ou não deseja instalar o Android P no dispositivo, ninguém cancelou o emulador.  Instruções de instalação <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h4>  2. Ligue o estrondo por meio de programação (se não houver hardware) </h4><br>  Tudo é simples aqui: vá para Sistema -&gt; Opções do desenvolvedor -&gt; Simular uma exibição com um recorte. <br>  Existem 3 opções para escolher: <br><ul><li>  Corner </li><li>  Duplo </li><li>  Alto </li></ul><br><img src="https://habrastorage.org/webt/cz/oo/pw/czoopw-4xddmw5l5f9k9-obslpa.png" width="300"><br>  Eles têm a seguinte aparência: <br><table><tbody><tr><th>  Corner </th><th>  Duplo </th><th>  Alto </th></tr><tr><td><img src="https://habrastorage.org/webt/hs/x2/4b/hsx24b9mdq9bf3i1wl50vycxpru.png"></td><td><img src="https://habrastorage.org/webt/pq/ta/hj/pqtahjumpjjnulq24ir5deudl0m.png"></td><td><img src="https://habrastorage.org/webt/i0/he/f9/i0hef98an6wlx95vlg71evri_9s.png"></td></tr></tbody></table><br><h4>  3. Percorra as telas principais </h4><br>  Obviamente, este caso será diferente para todos.  Alguém tem lógica simples, alguém não.  Vou dar alguns exemplos de telas com layout percorrido que encontrei em nosso aplicativo. <br><table><tbody><tr><th>  Explorar </th><th>  Perfil </th></tr><tr><td><img src="https://habrastorage.org/webt/br/8w/nb/br8wnbapotdaxbd9gwevvq7gqgq.png" width="300"></td><td><img src="https://habrastorage.org/webt/lq/th/bm/lqthbm55j1rexitpvdjhbwmtvla.png" width="300"></td></tr></tbody></table><br>  Agora vamos ver quais são as maneiras de eliminar falhas de layout. <br><br><h4>  Sem aumentar o compileSdkVersion </h4>  Começando com a API 20, a classe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WindowInsets</a> apareceu, que é um objeto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Rect</a> que descreve as partes acessíveis e inacessíveis da tela.  Juntamente com eles, esses métodos apareceram no modo de exibição que podemos usar para processar as coordenadas de partes inacessíveis da tela: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">WindowInsets </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispatchApplyWindowInsets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(WindowInsets)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">WindowInsets </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onApplyWindowInsets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(WindowInsets)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">requestApplyInsets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setOnApplyWindowInsetsListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(OnApplyWindowInsetsListener)</span></span></span></span>;</code> </pre> <br>  Detalhes sobre como usá-los estão <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Existem duas maneiras de usar esses métodos: <br>  a) coloque a tag <code>android:fitsSystemWindows="true"</code> no layout do seu layout ou visualização; <br>  b) faça isso a partir do código: <br><br><pre> <code class="java hljs">layout.setFitsSystemWindows(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); layout.requestApplyInsets();</code> </pre> <br><table><tbody><tr><th>  Was </th><th>  Tornou-se </th></tr><tr><td><img src="https://habrastorage.org/webt/fw/8e/ne/fw8ene_z6sxphxdncb9yzcxjdu4.png" width="300"></td><td><img src="https://habrastorage.org/webt/hv/ml/jm/hvmljmblq51npqv32f7o_lcjnj8.png" width="300"></td></tr></tbody></table><br><h4>  Atualize o compileSdkVersion para a versão 28 </h4>  Em um futuro próximo, você terá que mudar para esta versão. Por que não se preparar para isso agora?  Mas tenha cuidado se você tiver testes de unidade em seu projeto (e espero que você os tenha), o pacote JUnit foi movido.  Como conectá-lo é descrito <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Então, quais opções o Android P agora nos fornece? <br><br>  A. WindowManager.LayoutParams possui 3 novos sinalizadores: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LAYOUT_IN_DISPLAY_CUTOUT_MODE_DEFAULT</a> - com esta bandeira, a franja estará no topo da tela do aplicativo apenas no modo retrato, na paisagem haverá apenas uma barra preta; <br><img src="https://habrastorage.org/webt/lq/th/bm/lqthbm55j1rexitpvdjhbwmtvla.png" width="300"><br><img src="https://habrastorage.org/webt/6r/uc/ne/6rucneby85bjrq9wt5uc9n6rpbw.png" height="300"></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LAYOUT_IN_DISPLAY_CUTOUT_MODE_NEVER</a> - não haverá <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">franja na</a> moda com esta bandeira, ela se fundirá com uma faixa preta; <br><img src="https://habrastorage.org/webt/qh/1s/nb/qh1snbun-pzldcfc9hotrbwfsms.png" width="300"><br><img src="https://habrastorage.org/webt/-d/at/s2/-dats2qzjrvzs-nhyxgwcngaf7q.png" height="300"></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES</a> - ao usar esse sinalizador, a franja está sempre em qualquer orientação. <br><img src="https://habrastorage.org/webt/ow/7w/my/ow7wmyne6fan2tkiu9skhw-fhqg.png" width="300"><br><img src="https://habrastorage.org/webt/--/us/i2/--usi2coxgmmtdja8wzb8lapbqe.png" height="300"></li></ul><br>  Como se inscrever? <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.attributes.layoutInDisplayCutoutMode = WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES</code> </pre> <br>  B. Se a opção A não é adequada para você e você precisa levar em consideração a localização do recorte incorreto (por exemplo, algo é exibido diretamente na barra de status, como uma mensagem de conexão no Telegram), nesse caso, a nova classe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DisplayCutout</a> ajudará. <br>  Considere seus métodos: <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">getBoundingRects ()</a> retorna uma lista de objetos Rect, cada um dos quais indica uma área inacessível da tela; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">getSafeInsetLeft ()</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">getSafeInsetRight ()</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">getSafeInsetTop ()</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">getSafeInsetBottom ()</a> retorna a indentação esquerda, direita, superior e inferior sem um corte em pixels, respectivamente. </li></ul><br>  Com eles, você já pode fazer tudo o que é suficiente para a imaginação.  Você quer - mova a <code>margin</code> no código neles.  <code>OnApplyWindowInsetsListener</code> desejar, trate-o em <code>OnApplyWindowInsetsListener</code> e <code>consumeDisplayCutout()</code> .  Talvez você precise de manipulações mais complexas.  Vou dar um exemplo simples de como denotar um estrondo. <br><br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SampleFragment</span></span></span><span class="hljs-class">() : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Fragment</span></span></span><span class="hljs-class">() { private lateinit var root: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewGroup</span></span></span><span class="hljs-class"> override fun onCreateView(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">inflater</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LayoutInflater</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">container</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewGroup</span></span></span><span class="hljs-class">?, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">savedInstanceState</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bundle</span></span></span><span class="hljs-class">?): </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">? { return inflater.inflate(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">layout</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sample_fragment</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">container</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">false</span></span></span><span class="hljs-class">) } override fun onViewCreated(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">view</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">savedInstanceState</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bundle</span></span></span><span class="hljs-class">?) { super.onViewCreated(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">view</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">savedInstanceState</span></span></span><span class="hljs-class">) root = view.findViewById(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">root</span></span></span><span class="hljs-class">) addArrowsToCutout() } private fun addArrowsToCutout() { // ,      attach  window,    null' val cutoutList = root.rootWindowInsets?.displayCutout?.boundingRects cutoutList?.forEach { addArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">!!.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getDrawable</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">drawable</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">left</span></span></span><span class="hljs-class">), it.left.toFloat(), it.top + (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bottom</span></span></span><span class="hljs-class"> - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">top</span></span></span><span class="hljs-class">).toFloat() / 2, ::calculateLeftArrow) addArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">!!.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getDrawable</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">drawable</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">right</span></span></span><span class="hljs-class">), it.right.toFloat(), it.top + (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bottom</span></span></span><span class="hljs-class"> - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">top</span></span></span><span class="hljs-class">).toFloat() / 2, ::calculateRightArrow) addArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">!!.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getDrawable</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">drawable</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">top</span></span></span><span class="hljs-class">), it.left + (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">right</span></span></span><span class="hljs-class"> - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">left</span></span></span><span class="hljs-class">).toFloat() / 2, it.top.toFloat(), ::calculateTopArrow) addArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">!!.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getDrawable</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">R</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">drawable</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bottom</span></span></span><span class="hljs-class">), it.left + (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">right</span></span></span><span class="hljs-class"> - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">left</span></span></span><span class="hljs-class">).toFloat() / 2, it.bottom.toFloat(), ::calculateBottomArrow) } } private fun addArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowIcon</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drawable</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">y</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">calculation</span></span></span><span class="hljs-class">: (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">) -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Unit</span></span></span><span class="hljs-class">) { val arrowView = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ImageView</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">context</span></span></span><span class="hljs-class">) arrowView.setImageDrawable(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowIcon</span></span></span><span class="hljs-class">) arrowView.layoutParams = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewGroup</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LayoutParams</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewGroup</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LayoutParams</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WRAP_CONTENT</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewGroup</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LayoutParams</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WRAP_CONTENT</span></span></span><span class="hljs-class">) root.addView(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowView</span></span></span><span class="hljs-class">) arrowView.post { calculation(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowView</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">y</span></span></span><span class="hljs-class">) } } private fun calculateLeftArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowView</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">y</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">) { arrowView.x = x - arrowView.width arrowView.y = y - arrowView.height / 2 } private fun calculateRightArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowView</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">y</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">) { arrowView.x = x arrowView.y = y - arrowView.height / 2 } private fun calculateTopArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowView</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">y</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">) { arrowView.x = x - arrowView.width / 2 arrowView.y = y - arrowView.height } private fun calculateBottomArrow(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">arrowView</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">View</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">y</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Float</span></span></span><span class="hljs-class">) { arrowView.x = x - arrowView.width / 2 arrowView.y = y } }</span></span></code> </pre> <br><h4>  Retrato </h4><br><table><tbody><tr><th>  Corner </th><th>  Duplo </th><th>  Alto </th></tr><tr><td><img src="https://habrastorage.org/webt/l2/kn/kr/l2knkrhjztwt4-gol5kv3lhl9fc.png"></td><td><img src="https://habrastorage.org/webt/ok/wd/9z/okwd9zs9neutlmyxurbsg2dggzc.png"></td><td><img src="https://habrastorage.org/webt/zy/d8/z-/zyd8z-0amk-izvnypdvyyhqbpkc.png"></td></tr></tbody></table><br><br><h4>  Paisagem </h4><br><table><tbody><tr><th>  Corner </th></tr><tr><td><img src="https://habrastorage.org/webt/bw/ex/ii/bwexii25tezwsfe6zv98rai8xrw.png" height="300"></td></tr><tr><th>  Duplo </th></tr><tr><td><img src="https://habrastorage.org/webt/a9/dp/qo/a9dpqomfrbf7tp8tuv4oqaii8ac.png" height="300"></td></tr><tr><th>  Alto </th></tr><tr><td><img src="https://habrastorage.org/webt/tc/cp/qj/tccpqj2m8eh2kshlsu_o-q2-kda.png" height="300"></td></tr></tbody></table><br>  Então, como vemos, a margem nos trará alguns inconvenientes e nos fará gestos extras / manipulações adicionais.  Em princípio, tudo está resolvido.  O principal é começar a eliminar as deficiências de layout o mais rápido possível, a fim de ter tempo suficiente para a preparação.  Lide com suas edições com sucesso.  Que o Google não quebre seu jogo! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt419109/">https://habr.com/ru/post/pt419109/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt419099/index.html">WebSockets em Angular. Parte 2. Soluções de produtos</a></li>
<li><a href="../pt419101/index.html">Criar jogo durante o hackathon noturno</a></li>
<li><a href="../pt419103/index.html">Escrevendo um tradutor simples em Lisp - I</a></li>
<li><a href="../pt419105/index.html">Link para a transmissão Slurm (Kubernetes Intensivo)</a></li>
<li><a href="../pt419107/index.html">Exemplos de visão geral e configuração de peças de arquivo do Dell EMC Unity</a></li>
<li><a href="../pt419111/index.html">Food Design Digest Julho 2018</a></li>
<li><a href="../pt419115/index.html">CD inicializável e jogo retrô em um tweet</a></li>
<li><a href="../pt419117/index.html">“É difícil para mim entender a motivação de um cientista de dados que não vê beleza na matemática” - Kirill Danilyuk, cientista de dados</a></li>
<li><a href="../pt419119/index.html">A caneta inteligente premium Montblanc é a caneta inteligente mais cara até hoje</a></li>
<li><a href="../pt419123/index.html">As desvantagens do freelancer. Experiência pessoal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>