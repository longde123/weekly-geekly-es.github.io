<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ∂ üêæ üßòüèæ Base de l√°mpara inteligente REDMOND - agregue a la casa inteligente üò™ üë©üèæ‚Äçüç≥ ü§¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En esta revisi√≥n, hablaremos sobre la base inteligente de la marca REDMOND: SkySocket 202S. Un art√≠culo sobre los circuitos de este z√≥calo me llam√≥ la...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Base de l√°mpara inteligente REDMOND - agregue a la casa inteligente</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450740/"><p>  En esta revisi√≥n, hablaremos sobre la base inteligente de la marca REDMOND: SkySocket 202S.  Un art√≠culo sobre los circuitos de este z√≥calo me llam√≥ la atenci√≥n, despu√©s de leer me di cuenta de que el cerebro de este dispositivo es un chip de la compa√±√≠a Nordic Semiconductor 51 series (nRF51822). <a name="habracut"></a></p><br><p>  Mi hobby principal en este momento es construir una casa inteligente.  Lentamente estoy construyendo una red de radio desde dispositivos que usan el protocolo MySensors.  Si se trata brevemente de este protocolo, entonces quiz√°s podamos decir que este es un protocolo muy simple y conveniente basado en el que en una hora en el IDE de Ardunno puede ensamblar un par de dispositivos a partir de m√≥dulos arduino y lanzar su primera red de sensores de radio.  Recientemente, he estado haciendo dispositivos para mi red MySensors en los m√≥dulos de radio nRF51822 y nRF52832, por lo que not√© esta base. </p><br><img src="https://habrastorage.org/webt/t9/sl/d7/t9sld7yqaw2s3ndeevi2mhsaofg.jpeg"><br><img src="https://habrastorage.org/webt/4j/1k/kt/4j1kktrzln-mfgwy5r-mvt4tdls.jpeg"><br><p> Despu√©s de haberlo comprado en una tienda en l√≠nea (por bastante dinero en la regi√≥n de 700 rublos) y haberlo examinado, vi que 4 contactos para la programaci√≥n se muestran convenientemente en el tablero.  Sin pensarlo dos veces, saqu√© mi programador y mult√≠metro chino ST-LINK y tom√© el cableado de la placa para delinear el diagrama del dispositivo.  En el proceso de elaboraci√≥n del diagrama del dispositivo, qued√≥ claro que solo se usan 4 pines en el m√≥dulo, un bot√≥n en el pin p0.27, un bus en el pin p0.26, un rel√© triac en el pin p0.16 y un circuito detector de cero en el pin p0.00.  Durante 20 minutos, bosquej√© el programa en el IDE de Arduino (fue muy simple y r√°pido escribir con MySensors arriba), conect√© el programador ST-LINK y, he aqu√≠, compilaci√≥n, carga, el programador dej√≥ de parpadear y se volvi√≥ verde, lo que significa que el firmware se carg√≥.  Inmediatamente abr√≠ el navegador, abr√≠ Majordomo, en el m√≥dulo MySensors ya se mostraba un nuevo dispositivo en la red: REDMOND nRF51 1.0.  Solo queda crear objetos, hacer botones, lo que hice inmediatamente.  Entonces, despu√©s de una hora y media, ya control√© la bombilla en esta base de acuerdo con el protocolo MySensors. </p><br><img src="https://habrastorage.org/webt/ui/2l/qf/ui2lqfsifojtavv2c2nwtezk_pq.png"><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ApcpM_Oh7uE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Telegram chat de nuestra comunidad de mysensors, donde todos contar√°n y ayudar√°n: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://t.me/mysensors_rus</a> </p><br><p>  C√≥digo Arduino (parece que la luz de fondo no es compatible): </p><br><pre><code class="plaintext hljs">#define BUTTON_PIN 27 #define BIZZER_PIN 26 #define ZERO_CROSS_PIN 0 #define RELAY_PIN 16 boolean iswitch = 1; boolean flag_button = 0; static uint32_t previousMillis; //#define MY_DEBUG #define MY_DISABLED_SERIAL #define MY_RADIO_NRF5_ESB //#define MY_PASSIVE_NODE #define MY_NODE_ID 200 #define MY_PARENT_NODE_ID 0 #define MY_PARENT_NODE_IS_STATIC //#define MY_TRANSPORT_UPLINK_CHECK_DISABLED #define MY_REPEATER_FEATURE #define RELAY_ID 1 #include &lt;MySensors.h&gt; MyMessage lMsg(RELAY_ID, V_STATUS); void preHwInit() { pinMode(BUTTON_PIN, INPUT_PULLUP); pinMode(BIZZER_PIN, OUTPUT); pinMode(ZERO_CROSS_PIN, INPUT); pinMode(RELAY_PIN, OUTPUT); } void before() { //delay(2000); while (digitalRead(ZERO_CROSS_PIN) != 0) { //digitalWrite(RELAY_PIN, iswitch); //wait(200); } digitalWrite(RELAY_PIN, iswitch); } void presentation() { sendSketchInfo("REDMOND nRF51", "1.0"); wait(100); present(RELAY_ID, S_BINARY, "LIGHT SWITCH"); } void setup() { myTone(800, 50); delay(70); myTone(1500, 150); delay(30); wait(500); send(lMsg.set(iswitch)); wait(100); } void loop() { if (digitalRead(BUTTON_PIN) == LOW &amp;&amp; flag_button == 0) { flag_button = 1; previousMillis = millis(); wait(20); myTone(800, 50); delay(100); //myTone(1500, 200); //delay(30); } if (digitalRead(BUTTON_PIN) == LOW &amp;&amp; flag_button == 1) { } if (digitalRead(BUTTON_PIN) == HIGH &amp;&amp; flag_button == 1) { if ((millis() - previousMillis &gt; 0) &amp;&amp; (millis() - previousMillis &lt;= 3000)) { flag_button = 0; myTone(800, 50); delay(70); myTone(1500, 150); delay(30); iswitch = !iswitch; while (digitalRead(ZERO_CROSS_PIN) != 0) { //iswitch = !iswitch; } digitalWrite(RELAY_PIN, iswitch); myTone(1500, 150); delay(30); wait(100); send(lMsg.set(iswitch)); wait(300); } if (millis() - previousMillis &gt; 3000) { flag_button = 0; wait(100); } } } void receive(const MyMessage &amp; message) { if (message.type == V_STATUS) { if (message.sensor == RELAY_ID) { if (mGetCommand(message) == 1) { if (message.isAck()) { //AckG = 1; } else { // iswitch = !iswitch; while (digitalRead(ZERO_CROSS_PIN) != 0) { //iswitch = !iswitch; } digitalWrite(RELAY_PIN, iswitch); wait(200); myTone(800, 50); delay(70); myTone(1500, 150); delay(30); wait(100); send(lMsg.set(iswitch)); wait(1000); } } if (mGetCommand(message) == 2) { } } } /* if (message.isAck()) { (message.sensor == LIGHT_SENS_ID) { } (message.sensor == TEMP_INT_ID) { } } */ } void myTone(uint32_t j, uint32_t k) { j = 500000 / j; k += millis(); while (k &gt; millis()) { digitalWrite(BIZZER_PIN, HIGH); delayMicroseconds(j); digitalWrite(BIZZER_PIN, LOW ); delayMicroseconds(j); } } void playSound() { }</code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Continuaci√≥n - Smart socket REDMOND</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/450740/">https://habr.com/ru/post/450740/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../450730/index.html">ok.tech: encuentro frontend</a></li>
<li><a href="../450732/index.html">Ya veo, significa que existo: una revisi√≥n de Deep Learning in Computer Vision (parte 1)</a></li>
<li><a href="../450734/index.html">Fuzzing es un paso importante en el desarrollo seguro</a></li>
<li><a href="../450736/index.html">"Aislar Internet es mucho m√°s f√°cil y m√°s barato que proporcionarle un bloqueo externo".</a></li>
<li><a href="../450738/index.html">Robots en el centro de datos: ¬øc√≥mo puede ser √∫til la inteligencia artificial?</a></li>
<li><a href="../450744/index.html">Infraestructura de bicicletas de Minsk para un expatriado de TI</a></li>
<li><a href="../450746/index.html">Introduciendo CLI Builder</a></li>
<li><a href="../450748/index.html">Certificaci√≥n ISTQB. Parte 1: ¬øser o no ser?</a></li>
<li><a href="../450752/index.html">‚ÄúSolo tengo un m√©todo de ense√±anza: solo trabajo‚Äù - entrevista con Ryan Dahl (Node.js, Deno)</a></li>
<li><a href="../450754/index.html">Carreras de sillas de ruedas: el piloto ruso gana el campeonato CYBATHLON en Tokio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>