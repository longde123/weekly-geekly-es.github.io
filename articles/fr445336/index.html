<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèöÔ∏è üë®üèæ‚Äçüåæ üíÖüèΩ FlexiRemap¬Æ vs RAID üíÜüèø üåà ü§æüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les algorithmes RAID ont √©t√© pr√©sent√©s au public en 1987. √Ä ce jour, ils restent la technologie la plus populaire pour prot√©ger et acc√©l√©rer l'acc√®s a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>FlexiRemap¬Æ vs RAID</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/accelstor/blog/445336/"><p> Les algorithmes RAID ont √©t√© pr√©sent√©s au public en 1987.  √Ä ce jour, ils restent la technologie la plus populaire pour prot√©ger et acc√©l√©rer l'acc√®s aux donn√©es dans le domaine du stockage de l'information.  Mais l'√¢ge de la technologie informatique, qui a franchi une √©tape de 30 ans, n'est pas la maturit√©, mais la vieillesse.  La raison en est le progr√®s, porteur inexorablement de nouvelles opportunit√©s.  √Ä une √©poque o√π il n'y avait pratiquement pas d'autres disques en plus du disque dur, les algorithmes RAID ont permis d'utiliser les ressources de stockage disponibles de la mani√®re la plus efficace.  Cependant, avec l'av√®nement du SSD, la situation a fondamentalement chang√©.  D√©sormais, le RAID lorsque vous travaillez avec des SSD est d√©j√† un "noeud coulant" sur leurs performances.  Par cons√©quent, pour lib√©rer tout le potentiel des caract√©ristiques de vitesse des SSD, une approche compl√®tement diff√©rente de leur utilisation est simplement n√©cessaire. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/xz/ny/fl/xznyflcrmta9iytkfrt6azk6ttq.jpeg"></div><a name="habracut"></a><br><p>  En plus des diff√©rences √©videntes entre le disque dur et le SSD dans les principes de fonctionnement, ces types de supports ont une caract√©ristique plus importante: tout disque dur peut √©craser toutes les donn√©es avec granularit√© dans un bloc (maintenant c'est le plus souvent 4K).  Pour les SSD, le processus de r√©√©criture est une proc√©dure beaucoup plus compliqu√©e: </p><br><ul><li>  Les donn√©es modifi√©es sont copi√©es vers un nouvel emplacement.  En m√™me temps, la granularit√© est le m√™me bloc, mais compos√© de plusieurs pages et ayant une taille de 256 Ko - 4 Mo.  C'est-√†-dire  lors de la modification du m√™me 4KB, il est n√©cessaire de copier en incluant toutes les pages voisines, formant un seul bloc. </li><li>  Marquez les "anciens" blocs comme inutilis√©s, puis essuyez-les avec le garbage collector. </li></ul><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/wc/e4/6m/wce46mqg4-y_gaq_j91juzk0bg0.png"></div><br><p>  <i>√âcriture / √âcrasement s√©quentiel sur SSD</i> </p><br><p>  Dans le cas d'un enregistrement / doublage s√©quentiel, cette fonctionnalit√© du SSD ne joue pas un grand r√¥le en termes de performances, car  les blocs sont situ√©s √† proximit√© et le ramasse-miettes fait son travail en arri√®re-plan.  Mais dans la vie r√©elle, et plus encore dans le segment Entreprise pour SSD, l'acc√®s al√©atoire aux donn√©es est le plus souvent utilis√©.  Et ces donn√©es sont √©crites √† des endroits arbitraires sur les disques. </p><br><p>  Plus les donn√©es sont √©crites sur le SSD, plus il est difficile pour le garbage collector de fonctionner, car la fragmentation augmente rapidement.  En cons√©quence, le moment vient o√π le processus de nettoyage du lecteur cesse d'√™tre ¬´en arri√®re-plan¬ª: les performances du SSD chutent consid√©rablement, car  une partie importante est prise par le garbage collector. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/9m/by/hx/9mbyhx6cjjeorfmu1rsohmcyq28.png"></div><br><p>  <i>Disposition r√©elle des donn√©es sur SSD pour une utilisation quotidienne</i> </p><br><p>  Pour illustrer l'effet de l'impact du ramasse-miettes, en fonction du mode d'enregistrement sur le lecteur, on peut effectuer des tests simples: enregistrement s√©quentiel et al√©atoire en blocs de 4K sur un lecteur de 100 Go.  (Source - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Micron</a> ) </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/my/bk/u4/mybku4ccwioysxazxa27eacj1yq.png"></div><br><p>  <i>Performances d'√©criture s√©quentielle</i> </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ds/nc/p6/dsncp6gfnotass9g9g1ork7atcu.png"></div><br><p>  <i>Performances d'√©criture al√©atoire</i> </p><br><p>  Comme vous pouvez le voir sur les tests, la baisse des performances peut atteindre plus de deux fois.  Et ce n'est qu'un seul lecteur.  Dans le cas de l'utilisation de SSD dans le cadre d'un groupe RAID, le nombre d'op√©rations de r√©√©criture augmente consid√©rablement, gr√¢ce au travail avec parit√©. </p><br><p>  En g√©n√©ral, gr√¢ce √† ces caract√©ristiques du SSD, il existe pour eux un param√®tre tel qu'un coefficient d'√©criture (amplification d'√©criture).  Il s'agit du rapport entre la quantit√© de donn√©es √©crites sur le lecteur et la quantit√© de donn√©es r√©ellement envoy√©es par l'h√¥te.  Et pour le RAID5 le plus populaire, ce rapport est de ~ 3,5. </p><br><p>  En cons√©quence, les syst√®mes avec RAID classique n'utilisent essentiellement que des SSD ~ 10% de leur vitesse r√©elle et √©voluent mal en termes de performances avec une augmentation du nombre de disques de plus d'une douzaine. </p><br><p>  Nous notons √©galement que des op√©rations d'√©criture excessives non seulement r√©duisent les performances des SSD, mais r√©duisent √©galement leur ressource loin d'√™tre sans fin, r√©duisant ainsi la dur√©e de vie du lecteur. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La technologie FlexiRemap¬Æ</a> , qui est au c≈ìur de tous les produits AccelStor, a √©t√© d√©velopp√©e comme une alternative aux algorithmes RAID classiques pour travailler avec des SSD.  L'innovation de la technologie a √©t√© not√©e √† la fois par divers brevets et r√©compenses (y compris au Flash Memory Summit 2016), et par les r√©sultats de tests ind√©pendants (par exemple, SPC1). </p><br><p>  L'essence de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FlexiRemap¬Æ</a> est de convertir toutes les demandes d'√©criture entrantes, et principalement de type al√©atoire, en un ensemble de blocs qui est aussi similaire que possible √† l'enregistrement s√©quentiel du point de vue du lecteur.  En cons√©quence, l'enregistrement sur le SSD a lieu dans le mode le plus confortable pour eux, et les performances finales d√©passent tout syst√®me dot√© d'un RAID classique. </p><br><p>  Tous les SSD des syst√®mes AccelStor sont divis√©s en deux groupes FlexiRemap¬Æ sym√©triques.  La taille du groupe d√©pend du mod√®le et est de 5 √† 11 disques.  Pour la r√©silience au sein d'un groupe, la parit√© est utilis√©e comme RAID5.  Les deux groupes sont utilis√©s ensemble pour former un espace de stockage commun.  Par cons√©quent, la tol√©rance aux pannes qui en r√©sultera sera similaire √† une matrice RAID50 compos√©e de deux groupes: le syst√®me est capable de r√©sister √† une d√©faillance de jusqu'√† deux SSD, mais pas plus d'un dans chaque groupe FlexiRemap¬Æ. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/qx/xy/ij/qxxyijh0huqx3civilqtwanvzdk.png"></div><br><p>  Toutes les demandes d'√©criture entrantes sont divis√©es en blocs 4K, qui en mode round robin sont √©crits dans les deux groupes FlexiRemap¬Æ.  De plus, le syst√®me suit en permanence la demande de blocs enregistr√©s, en essayant d'enregistrer ces blocs aussi pr√®s que possible les uns des autres.  Il se r√©v√®le un analogue virtuel de d√©chirure, s'il est exprim√© en termes de stockage.  Dans ce cas, le travail du ramasse-miettes est grandement facilit√©: apr√®s tout, les blocs inutilis√©s seront toujours √† proximit√©. </p><br><p>  Il convient de noter que les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">syst√®mes AccelStor</a> , contrairement aux produits concurrents, n'utilisent pas la fonctionnalit√© de mise en cache des demandes entrantes dans la RAM du contr√¥leur.  Tous les blocs de donn√©es entrants sont imm√©diatement √©crits sur le SSD.  L'h√¥te ne re√ßoit la confirmation de l'enregistrement r√©ussi qu'apr√®s le placement physique des donn√©es sur les disques.  Seules les tables d'allocation de blocs sur le SSD sont stock√©es dans la RAM pour acc√©l√©rer l'acc√®s et d√©terminer o√π √©crire le prochain bloc de donn√©es.  Bien entendu, pour des raisons de fiabilit√©, des copies de ces tableaux se trouvent √©galement sur les supports eux-m√™mes.  En cons√©quence, les syst√®mes AccelStor ne n√©cessitent aucune protection de cache sous la forme d'une batterie / d'un condensateur (cependant, il est possible d'√©tablir une connexion avec l'onduleur pour un arr√™t ¬´en douceur¬ª en cas de probl√®me d'alimentation). </p><br><p>  Gr√¢ce √† cette approche de l'organisation des enregistrements, le garbage collector est vraiment capable de travailler en arri√®re-plan sans affecter de mani√®re significative la vitesse des disques, ce qui permet finalement d'utiliser jusqu'√† 90% des performances SSD dans le syst√®me.  C'est exactement ce qu'est l'IOPS dans les syst√®mes AccelStor contre All Flash, bas√© sur des algorithmes RAID. </p><br><p>  Une autre caract√©ristique importante de la technologie FlexiRemap¬Æ est la r√©duction significative des op√©rations d'√©criture redondantes sur les SSD.  Ainsi, le coefficient d'amplification d'√©criture pour les syst√®mes AccelStor n'est que de 1,3, ce qui, traduit dans le langage commun, signifie une augmentation de la dur√©e de vie des disques de plus de 2,5 fois par rapport au RAID5! </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/qe/zm/kf/qezmkfb5nltjqdh1xsqrqgsnaxm.png"></div><br><p>  Gr√¢ce √† la surveillance constante par le syst√®me de la politique de placement des donn√©es sur le SSD, tous les disques s'usent de la m√™me mani√®re.  Cette approche nous permet de pr√©dire leur dur√©e de vie et de signaler √† l'avance √† l'administrateur l'√©puisement de la ressource d'enregistrement. </p><br><p>  Il est clair que les SSD peuvent √©chouer.  Dans ce cas, le syst√®me commencera imm√©diatement la reconstruction sur l'un des disques de secours.  Dans ce cas, le groupe FlexiRemap¬Æ, qui est dans un √©tat d√©grad√©, passe en mode lecture seule et toutes les demandes d'√©criture sont envoy√©es au deuxi√®me groupe.  Un tel m√©canisme de protection est pr√©vu pour acc√©l√©rer l'op√©ration de reconstruction et r√©duire la probabilit√© de d√©faillance d'un autre disque au sein du m√™me groupe.  Ce n'est un secret pour personne que pendant la reconstruction, tous les disques du groupe subissent une charge accrue en raison des interf√©rences des op√©rations de lecture, d'√©criture et de restauration sur disque de secours.  Cela augmente la probabilit√© de d√©faillance d'un autre lecteur.  Et plus il y a d'op√©rations d'enregistrement, plus la reconstruction prendra du temps. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/qi/nv/mo/qinvmor3hiqo8133beft0yirjfe.png"></div><br><p>  Une fois le processus de r√©cup√©ration termin√© et le groupe FlexiRemap¬Æ revenu √† son √©tat normal, il y aura un l√©ger biais dans la ressource d'enregistrement entre les deux groupes.  Par cons√©quent, pour l'aligner, les op√©rations d'enregistrement suivantes tomberont souvent sur le groupe restaur√© (bien s√ªr, de telle sorte que les performances finales du syst√®me ne souffrent pas beaucoup). </p><br><blockquote>  Il est impossible d'augmenter les performances de tous les syst√®mes Flash bas√©s sur des algorithmes RAID au-dessus de certaines valeurs (~ 280K IOPS @ √©criture al√©atoire 4K) m√™me lors de l'utilisation de syst√®mes de mise en cache complexes.  La technologie FlexiRemap¬Æ, gr√¢ce √† une approche compl√®tement diff√©rente de l'organisation de l'espace de stockage, permet non seulement de surmonter facilement cet obstacle, mais augmente √©galement simultan√©ment la dur√©e de vie des SSD.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les</a> syst√®mes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AccelStor</a> pr√©sentent donc de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nombreux</a> avantages parmi les baies All Flash sur de nombreux fronts (IOPS / $, GB / $, TCO, ROI), ce qui en fait des candidats id√©aux pour des postes cl√©s dans les centres de donn√©es clients pour r√©soudre des t√¢ches exigeantes en ressources. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445336/">https://habr.com/ru/post/fr445336/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445322/index.html">Grand choix de ressources utiles pour les chefs de produit</a></li>
<li><a href="../fr445326/index.html">Automatisation impitoyable. Coupure du r√©alisateur</a></li>
<li><a href="../fr445328/index.html">Repenser la robotique pour enfants</a></li>
<li><a href="../fr445330/index.html">Cryptographie en Java. Classe de signature</a></li>
<li><a href="../fr445334/index.html">Nous avons DevOps. Tirons tous les testeurs</a></li>
<li><a href="../fr445338/index.html">Serveur DHCP + Mysql en Python</a></li>
<li><a href="../fr445340/index.html">Augmentez la s√©curit√© du r√©seau en utilisant un analyseur cloud</a></li>
<li><a href="../fr445344/index.html">Plateforme de communications unifi√©es OpenVox</a></li>
<li><a href="../fr445346/index.html">Comment √©crire une mauvaise API</a></li>
<li><a href="../fr445348/index.html">SNA Hackathon 2019: Simplify Architecture - Simplify Features</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>