<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíª üè∫ ‚õ∞Ô∏è El libro "Java en la nube. Spring Boot, Spring Cloud, Cloud Foundry ¬ª ü•ò üë®‚Äçüéì üë©üèº‚Äç‚öïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos! Este libro est√° destinado principalmente a desarrolladores de m√°quinas Java y JVM que buscan formas de crear un mejor software en poco t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El libro "Java en la nube. Spring Boot, Spring Cloud, Cloud Foundry ¬ª</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/425109/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/g5/vp/gz/g5vpgzgoyh2hlalmrajcysuwvwo.jpeg" align="left" alt="imagen"></a>  Hola a todos!  Este libro est√° destinado principalmente a desarrolladores de m√°quinas Java y JVM que buscan formas de crear un mejor software en poco tiempo utilizando Spring Boot, Spring Cloud y Cloud Foundry.  Es para aquellos que ya han escuchado el ruido que aumenta alrededor de los microservicios.  Es posible que ya se haya dado cuenta de la altura estratosf√©rica que ha arrancado Spring Boot, y le sorprende que las empresas de hoy utilicen la plataforma Cloud Foundry.  Si es as√≠, entonces este libro es para ti. <br><br><h3>  Extracto  3. Estilo de configuraci√≥n de la aplicaci√≥n de doce factores </h3><br>  Este cap√≠tulo discutir√° c√≥mo implementar la configuraci√≥n de la aplicaci√≥n. <br><a name="habracut"></a><br>  Definir varios t√©rminos de vocabulario.  Cuando se trata de la configuraci√≥n en Spring, a menudo me refiero a ingresar en el entorno Spring varias implementaciones del contexto de la aplicaci√≥n: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ApplicationContext</a> , que ayuda al contenedor a comprender c√≥mo conectar los componentes de bean.  Esta configuraci√≥n se puede representar como un archivo XML que se debe servir en un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ClassPathXmlApplicationContext</a> , o clases Java anotadas de una manera que se puede proporcionar a un objeto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AnnotationConfigApplicationContext</a> .  Y, por supuesto, al estudiar la √∫ltima opci√≥n, nos referiremos a <i>la configuraci√≥n de Java.</i> <br><br>  Pero en este cap√≠tulo, vamos a ver la configuraci√≥n en la forma en que se define en el manifiesto de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aplicaci√≥n de 12 factores</a> .  En este caso, se trata de valores literales que pueden cambiar de un entorno a otro: estamos hablando de contrase√±as, puertos y nombres de host, o de indicadores de propiedad.  La configuraci√≥n ignora las constantes m√°gicas integradas en el c√≥digo.  El manifiesto incluye un criterio excelente para la configuraci√≥n correcta: ¬øpuede la base de c√≥digo de la aplicaci√≥n ser de c√≥digo abierto en cualquier momento sin revelar y comprometer credenciales importantes?  Este tipo de configuraci√≥n se refiere exclusivamente a aquellos valores que var√≠an de un entorno a otro y no se aplica, por ejemplo, a la conexi√≥n de Spring beans o la configuraci√≥n de rutas Ruby. <br><br><h3>  Apoyo en el marco de Spring </h3> <br>  En Spring, se ha admitido un estilo de configuraci√≥n de 12 factores desde el advenimiento de la clase <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PropertyPlaceholderConfigurer</a> .  Una vez que se define su instancia, reemplaza los literales en la configuraci√≥n XML con los valores extra√≠dos del archivo con la extensi√≥n .properties.  En el entorno Spring, la clase <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PropertyPlaceholderConfigurer</a> se ofrece desde 2003.  Spring 2.5 introdujo soporte para el espacio de nombres XML, y al mismo tiempo soporte para la sustituci√≥n de propiedades en este espacio.  Esto permite la sustituci√≥n en la configuraci√≥n XML de valores literales para las definiciones de componentes de bean con los valores asignados a las claves en el archivo de propiedades externo (en este caso, en el archivo simple.properties, que puede aparecer en la ruta de clase o ser externo a la aplicaci√≥n). <br><br>  La configuraci√≥n en el estilo de 12 factores tiene como objetivo eliminar la falta de confiabilidad de las cadenas m√°gicas existentes, es decir, valores como las direcciones de las bases de datos y las cuentas para conectarse a ellas, puertos, etc., codificadas en la aplicaci√≥n compilada.  Si la configuraci√≥n se mueve fuera de la aplicaci√≥n, se puede reemplazar sin recurrir a un nuevo conjunto de c√≥digo. <br><br><h3>  Class PropertyPlaceholderConfigurer </h3><br>  Veamos un ejemplo de uso de la clase PropertyPlaceholderConfigurer, definiciones XML de componentes de Spring bean y un archivo con una extensi√≥n de .properties fuera de los l√≠mites de la aplicaci√≥n.  Solo necesitamos imprimir el valor disponible en este archivo de propiedades.  Esto ayudar√° a hacer el c√≥digo que se muestra en el ejemplo 3.1. <br><br>  Ejemplo 3.1  Archivo de propiedades: some.properties <br><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>.projectName=Spring Framework</code> </pre> <br>  Esta es la clase ClassPathXmlApplicationContext de Spring, por lo que utilizamos el espacio de nombres XML del contexto Spring y apuntamos a nuestro archivo some.properties.  Luego usamos literales en forma de $ {configuration.projectName} en las definiciones de componentes de bean, y Spring los reemplazar√° con los valores de nuestro archivo de propiedades durante la ejecuci√≥n (ejemplo 3.2). <br><br>  Ejemplo 3.2.  Archivo XML de configuraci√≥n de Spring <br><br><pre> <code class="hljs pgsql">&lt;context:property-placeholder <span class="hljs-keyword"><span class="hljs-keyword">location</span></span>="classpath:some.properties"/&gt; (<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt;bean <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="classic.Application"&gt; &lt;property <span class="hljs-type"><span class="hljs-type">name</span></span>="configurationProjectName" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="${configuration.projectName}"/&gt; &lt;/bean&gt;</code> </pre> <br>  (1) classpath: ubicaci√≥n que se refiere al archivo en el bloque de c√≥digo compilado actual (.jar, .war, etc.).  Spring admite muchas alternativas, incluido file: y url :, que permiten que el archivo exista aparte del bloque de c√≥digo. <br><br>  Finalmente, veamos c√≥mo se ve la clase Java, gracias a la cual es posible reunir todo esto (Ejemplo 3.3). <br><br>  Ejemplo 3.3  La clase Java que debe configurarse con el valor de la propiedad <br>  paquete cl√°sico; <br><br><pre> <code class="hljs actionscript"><span class="hljs-meta"><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">import</span></span></span><span class="hljs-meta"> org.apache.commons.logging.LogFactory;</span></span> <span class="hljs-meta"><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">import</span></span></span><span class="hljs-meta"> org.springframework.context.support.ClassPathXmlApplicationContext;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> main(String[] args) { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClassPathXmlApplicationContext(<span class="hljs-string"><span class="hljs-string">"classic.xml"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> setConfigurationProjectName(String pn) { LogFactory.getLog(getClass()).info(<span class="hljs-string"><span class="hljs-string">"the configuration project name is "</span></span> + pn); } }</code> </pre> <br>  El primer ejemplo utiliza el formato XML de configuraci√≥n de Spring Bean.  En Spring 3.0 y 3.1, la situaci√≥n para los desarrolladores que usan la configuraci√≥n de Java ha mejorado significativamente.  La anotaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">valor</a> y la abstracci√≥n del entorno se introdujeron en estas versiones. <br><br><h3>  Ambiente abstracto y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">valor</a> </h3><br>  La abstracci√≥n del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">entorno</a> representa, durante la ejecuci√≥n del c√≥digo, su relaci√≥n indirecta con el entorno del entorno en el que se ejecuta, y permite que la aplicaci√≥n plantee la pregunta ("¬øQu√© separador de l√≠nea es line.separator en esta plataforma?") Sobre las propiedades del entorno.  Una abstracci√≥n act√∫a como un mapeo de claves y valores.  Al configurar PropertySource en el entorno, puede configurar desde d√≥nde se leer√°n estos valores.  Por defecto, Spring carga las claves del sistema y los valores del entorno, como line.separator.  Puede indicar a Spring que cargue las claves de configuraci√≥n de un archivo en el mismo orden que podr√≠a usarse en versiones anteriores de la soluci√≥n de sustituci√≥n de propiedades de Spring utilizando la anotaci√≥n @PropertySource. <br><br>  La anotaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Value</a> proporciona una forma de incrustar valores de entorno en constructores, setters, campos, etc. Estos valores se pueden calcular utilizando Spring Expression Language o la sintaxis de sustituci√≥n de propiedades siempre que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PropertySourcesPlaceholderConfigurer est√©</a> registrado, como en el Ejemplo 3.4. <br><br>  Ejemplo 3.4.  Registrar PropertySourcesPlaceholderConfigurer <br>  paquete env; <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.LogFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.InitializingBean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Autowired; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Value; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.AnnotationConfigApplicationContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Bean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Configuration; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.PropertySource; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.support.PropertySourcesPlaceholderConfigurer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.core.env.Environment; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.PostConstruct; (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-meta"><span class="hljs-meta">@PropertySource(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"some.properties"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Log log = LogFactory.getLog(getClass()); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> static void main(String[] args) throws Throwable { new AnnotationConfigApplicationContext(Application.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>); } (<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> static PropertySourcesPlaceholderConfigurer pspc() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new PropertySourcesPlaceholderConfigurer(); } (<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String fieldValue; (<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> Application(<span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> String pn) { log.info(<span class="hljs-string"><span class="hljs-string">"Application constructor: "</span></span> + pn); } (<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> void setProjectName(String projectName) { log.info(<span class="hljs-string"><span class="hljs-string">"setProjectName: "</span></span> + projectName); } (<span class="hljs-number"><span class="hljs-number">6</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> void setEnvironment(Environment env) { log.info(<span class="hljs-string"><span class="hljs-string">"setEnvironment: "</span></span> + env.getProperty(<span class="hljs-string"><span class="hljs-string">"configuration.projectName"</span></span>)); } (<span class="hljs-number"><span class="hljs-number">7</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> InitializingBean both(Environment env, <span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> String projectName) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () -&gt; { log.info(<span class="hljs-string"><span class="hljs-string">"@Bean with both dependencies (projectName): "</span></span> + projectName); log.info(<span class="hljs-string"><span class="hljs-string">"@Bean with both dependencies (env): "</span></span> + env.getProperty(<span class="hljs-string"><span class="hljs-string">"configuration.projectName"</span></span>)); }; } <span class="hljs-meta"><span class="hljs-meta">@PostConstruct</span></span> void afterPropertiesSet() throws Throwable { log.info(<span class="hljs-string"><span class="hljs-string">"fieldValue: "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fieldValue); } }</code> </pre> <br>  (1) Anotaci√≥n @PropertySource es una abreviatura similar a un marcador de posici√≥n de propiedad, que configura un PropertySource a partir de un archivo con la extensi√≥n .properties. <br><br>  (2) PropertySourcesPlaceholderConfigurer debe registrarse como un bean est√°tico, ya que es una implementaci√≥n de BeanFactoryPostProcessor y debe llamarse en una etapa temprana del ciclo de vida de inicializaci√≥n en Spring bean.  Cuando se utilizan componentes de bean en la configuraci√≥n Spring XML, este matiz no es visible. <br><br>  (3) Puede decorar los campos con la anotaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Value</a> (pero no haga esto, ¬°de lo contrario, el c√≥digo no pasar√° la prueba!) ... <br><br>  (4) ... o la anotaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Value</a> puede decorar los par√°metros del constructor ... <br><br>  (5) ... o utilice m√©todos de instalaci√≥n ... <br><br>  (6) ... o incrustar un objeto Spring Environment y realizar la resoluci√≥n clave manualmente. <br><br>  (7) Los par√°metros con la anotaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Value</a> tambi√©n se pueden usar en el proveedor de argumentos del m√©todo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Bean</a> en la configuraci√≥n Spring Spring. <br><br>  En este ejemplo, los valores se cargan desde el archivo simple.properties, y luego tiene el valor configuration.projectName, proporcionado de varias maneras. <br><br><h3>  Perfiles </h3><br>  Entre otras cosas, la abstracci√≥n del entorno introduce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">perfiles</a> .  Esto le permite asignar etiquetas (perfiles) para agrupar componentes de bean.  Los perfiles deben usarse para describir los componentes de frijol y los gr√°ficos de frijol que var√≠an de un entorno a otro.  Se pueden activar varios perfiles simult√°neamente.  Los beans que no tienen perfiles asignados siempre est√°n activados.  Los beans que tienen un perfil predeterminado solo se activan si no tienen otros perfiles activos.  El atributo de perfil se puede especificar en la definici√≥n del componente de bean en XML o en clases de etiqueta, clases de configuraci√≥n, componentes de bean individuales o en los m√©todos del proveedor de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Bean</a> que utiliza <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Profile</a> . <br><br>  Los perfiles le permiten describir conjuntos de componentes de bean que deben crearse en un entorno de forma algo diferente que en otro.  En un perfil de desarrollo de desarrollo local, por ejemplo, puede usar la fuente de datos H2 incorporada javax.sql.DataSource, y luego, cuando el perfil prod est√© activo, cambie a la fuente de datos javax.sql.DataSource obtenida usando la b√∫squeda JNDI o leyendo propiedades de una variable de entorno en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cloud Foundry</a> .  En ambos casos, su c√≥digo funcionar√°: obtendr√° javax.sql.DataSource, pero la decisi√≥n sobre qu√© instancia particular usar se toma activando uno o varios perfiles (ejemplo 3.5). <br><br>  Ejemplo 3.5  Demostraci√≥n de que las clases de @Configuration pueden cargar varios archivos de configuraci√≥n y proporcionar diferentes beans basados ‚Äã‚Äãen <br>  perfil activo <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> profiles; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.LogFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.InitializingBean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.Value; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.<span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span>.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.support.PropertySourcesPlaceholderConfigurer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.core.env.Environment; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.util.StringUtils; <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Log log = LogFactory.getLog(getClass()); <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> static PropertySourcesPlaceholderConfigurer pspc() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new PropertySourcesPlaceholderConfigurer(); } (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-meta"><span class="hljs-meta">@Profile(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"prod"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-meta"><span class="hljs-meta">@PropertySource(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"some-prod.properties"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> static <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProdConfiguration</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> InitializingBean <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () -&gt; LogFactory.getLog(getClass()).info(<span class="hljs-string"><span class="hljs-string">"prod InitializingBean"</span></span>); } } <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-meta"><span class="hljs-meta">@Profile({ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"default"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"dev"</span></span></span><span class="hljs-meta"> })</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-meta"><span class="hljs-meta">@PropertySource(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"some.properties"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> static <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefaultConfiguration</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> InitializingBean <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () -&gt; LogFactory.getLog(getClass()).info(<span class="hljs-string"><span class="hljs-string">"default InitializingBean"</span></span>); } } (<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> InitializingBean which(Environment e, <span class="hljs-meta"><span class="hljs-meta">@Value(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"</span></span><span class="hljs-subst"><span class="hljs-meta"><span class="hljs-meta-string"><span class="hljs-subst">${configuration.projectName}</span></span></span></span><span class="hljs-meta"><span class="hljs-meta-string">"</span></span></span><span class="hljs-meta">)</span></span> String projectName) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> () -&gt; { log.info(<span class="hljs-string"><span class="hljs-string">"activeProfiles: '"</span></span> + StringUtils.arrayToCommaDelimitedString(e.getActiveProfiles()) + <span class="hljs-string"><span class="hljs-string">"'"</span></span>); log.info(<span class="hljs-string"><span class="hljs-string">"configuration.projectName: "</span></span> + projectName); }; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> static void main(String[] args) { AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(); ac.getEnvironment().setActiveProfiles(<span class="hljs-string"><span class="hljs-string">"dev"</span></span>); (<span class="hljs-number"><span class="hljs-number">4</span></span>) ac.register(Application.<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>); ac.refresh(); } }</code> </pre> <br>  (1) Esta clase de configuraci√≥n y todas las definiciones de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Bean</a> contenidas en ella se calcular√°n solo si el perfil de producci√≥n est√° activo. <br><br>  (2) Esta clase de configuraci√≥n y todas las definiciones de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Bean</a> contenidas en ella se calcular√°n solo si el perfil de desarrollo est√° activo o no hay ning√∫n perfil activo, incluido el desarrollo. <br><br>  (3) Este componente InitializingBean simplemente registra el perfil actualmente activo e ingresa el valor que finalmente se ingres√≥ en el archivo de propiedades. <br><br>  (4) Activar un perfil (o perfiles) mediante programaci√≥n es bastante simple. <br><br>  Spring responde a varios otros m√©todos de activaci√≥n de perfil utilizando el token spring_profiles_active o spring.profiles.active.  Se puede establecer un perfil utilizando una variable de entorno (por ejemplo, SPRING_PROFILES_ACTIVE), una propiedad JVM (-Dspring.profiles.active = ...), un par√°metro de inicializaci√≥n de la aplicaci√≥n de servlet o mediante programaci√≥n. <br><br><h3>  Configuraci√≥n Bootiful </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Spring Boot</a> mejora significativamente la situaci√≥n.  El entorno inicialmente cargar√° autom√°ticamente las propiedades de una jerarqu√≠a de ubicaciones predefinidas.  Los argumentos de la l√≠nea de comando anulan los valores de propiedad derivados de JNDI, que anulan las propiedades obtenidas de System.getProperties (), etc. <br><br>  - Argumentos de l√≠nea de comando. <br>  - Atributos JNDI de java: comp / env. <br>  - Propiedades de System.getProperties (). <br>  - Variables de entorno del sistema operativo. <br>  - Archivos de propiedades externas en el sistema de archivos: (config /)? Aplicaci√≥n. (Yml.properties). <br>  - Archivos de propiedades internas en el archivo (config /)? Aplicaci√≥n. (Yml.properties). <br>  - Anotaci√≥n @PropertySource en clases de configuraci√≥n. <br>  - Propiedades de origen de SpringApplication.getDefaultProperties (). <br><br>  Si el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">perfil est√° activo, los</a> datos de los archivos de configuraci√≥n basados ‚Äã‚Äãen el nombre del perfil se leer√°n autom√°ticamente, por ejemplo, de un archivo como src / main / resources / application-foo.properties, donde foo es el perfil actual. <br><br>  Si la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SnakeYAML se</a> menciona en los classpaths, los archivos YAML tambi√©n se cargar√°n autom√°ticamente, siguiendo b√°sicamente la misma convenci√≥n. <br><br><blockquote>  La p√°gina de especificaciones de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">YAML</a> establece que "YAML es un est√°ndar legible por humanos para serializar datos para todos los lenguajes de programaci√≥n".  YAML es una representaci√≥n jer√°rquica de valores.  En los archivos normales con la extensi√≥n .properties, la jerarqu√≠a se indica con un punto ("."), Y en los archivos YAML, se utiliza una nueva l√≠nea y un nivel de sangr√≠a adicional.  Ser√≠a bueno usar estos archivos para evitar la necesidad de especificar ra√≠ces comunes en presencia de √°rboles de configuraci√≥n altamente ramificados. </blockquote><br>  El contenido de un archivo con la extensi√≥n .yml se muestra en el ejemplo 3.6. <br><br>  Ejemplo 3.6  Archivo de propiedades de la aplicaci√≥n.yml.  Los datos se presentan en orden jer√°rquico. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>: projectName : Spring Boot management: <span class="hljs-keyword"><span class="hljs-keyword">security</span></span>: enabled: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span></code> </pre> <br>  Adem√°s, el entorno Spring Boot hace que sea mucho m√°s f√°cil obtener el resultado correcto en casos generales.  Convierte los argumentos -D en variables de entorno de proceso y java disponibles como propiedades.  Incluso lleva a cabo su normalizaci√≥n, en la que la variable de entorno $ CONFIGURATION_PROJECTNAME (PROJECT_NAME CONFIGURATION) o el argumento -D en la forma ‚ÄìDconfiguration.projectName (configuration.project_name) est√°n disponibles utilizando la clave configuration.projectName (configuration.project_name) como antes el token spring_profiles_active est√° disponible. <br><br>  Los valores de configuraci√≥n son cadenas y, si son suficientes, pueden volverse ilegibles al intentar asegurarse de que dichas claves no se conviertan en cadenas m√°gicas en el c√≥digo.  Spring Boot presenta el tipo de componente @ConfigurationProperties.  Al anotar un POJO - Objeto Java simple y antiguo - usando @ConfigurationProperties y especificando un prefijo, Spring intentar√° asignar todas las propiedades que comienzan con este prefijo a las propiedades POJO.  En el siguiente ejemplo, el valor de configuration.projectName se asignar√° a una instancia de POJO, que todo el c√≥digo puede inyectar y desreferenciar para leer valores de tipo seguro.  Como resultado, solo tendr√° una asignaci√≥n de la tecla (Cadena) en un lugar (Ejemplo 3.7). <br><br>  Ejemplo 3.7.  Resoluci√≥n autom√°tica de propiedades de src / main / resources / application.yml <br>  paquete de arranque; <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.apache.commons.logging.LogFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.beans.factory.annotation.Autowired; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.SpringApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.autoconfigure.SpringBootApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.context.properties.ConfigurationProperties; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.context.properties.EnableConfigurationProperties; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.stereotype.Component; (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-meta"><span class="hljs-meta">@EnableConfigurationProperties</span></span> <span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Log log = LogFactory.getLog(getClass()); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(Application.class); } <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Application</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ConfigurationProjectProperties cp)</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"configurationProjectProperties.projectName = "</span></span> + cp.getProjectName()); } } (<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-meta"><span class="hljs-meta">@ConfigurationProperties</span></span>(<span class="hljs-string"><span class="hljs-string">"configuration"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConfigurationProjectProperties</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String projectName; (<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getProjectName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> projectName; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setProjectName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String projectName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.projectName = projectName; } }</code> </pre> <br>  (1) La anotaci√≥n @EnableConfigurationProperties le dice a Spring que asigne propiedades a POJO anotados con @ConfigurationProperties. <br><br>  (2) La anotaci√≥n @ConfigurationProperties muestra a Spring que este bean debe usarse como ra√≠z para todas las propiedades que comienzan con la configuraci√≥n., Seguido de tokens que se asignan a las propiedades del objeto. <br><br>  (3) El campo projectName finalmente tendr√° el valor asignado a la clave de propiedad configuration.projectName. <br><br>  Spring Boot utiliza activamente el mecanismo @ConfigurationProperties para dar a los usuarios la capacidad de anular los componentes elementales del sistema.  Puede observar que las claves de propiedad le permiten realizar cambios, por ejemplo, agregando la dependencia org.springframework.boot: spring-boot-starter-actuator a la aplicaci√≥n web Spring Boot, y luego visitando la p√°gina <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">127.0.0.1</a> : 8080 / configprops. <br><br><blockquote>  Los puntos finales del actuador se analizar√°n con m√°s detalle en el Cap√≠tulo 13. Est√°n bloqueados y requieren un nombre de usuario y contrase√±a predeterminados.  Las medidas de seguridad se pueden deshabilitar (pero solo para echar un vistazo a estos puntos) especificando management.security.enabled = false en el archivo application.properties (o en application.yml). </blockquote><br>  Obtendr√° una lista de propiedades de configuraci√≥n compatibles en funci√≥n de los tipos presentados en los classpaths en tiempo de ejecuci√≥n.  A medida que crece el n√∫mero de tipos de Spring Boot, se mostrar√°n propiedades adicionales.  Este punto final tambi√©n mostrar√° las propiedades exportadas por sus POJO que tienen la anotaci√≥n @ConfigurationProperties. <br><br><h3>  Configuraci√≥n registrada centralizada con Spring Cloud Configuration Server </h3><br>  Hasta ahora, todo est√° bien, pero las cosas deben ser a√∫n m√°s exitosas.  Todav√≠a no hemos respondido preguntas sobre casos de uso com√∫n: <br><br><ul><li>  Despu√©s de los cambios realizados en la configuraci√≥n de la aplicaci√≥n, se requiere un reinicio; </li><li>  sin trazabilidad: ¬øc√≥mo determinar los cambios que se ponen en funcionamiento y, si es necesario, revertirlos? </li><li>  la configuraci√≥n est√° descentralizada;  no est√° claro de inmediato d√≥nde se deben hacer los cambios para cambiar uno u otro aspecto; </li><li>  sin soporte de instalaci√≥n para codificaci√≥n y decodificaci√≥n por motivos de seguridad. </li></ul><br><h3>  Servidor de configuraci√≥n de Spring Cloud </h3><br>  El problema de centralizar la configuraci√≥n se puede resolver guardando la configuraci√≥n en un directorio y se√±alando todas las aplicaciones.  Tambi√©n puede instalar el control de versiones de este directorio utilizando Git o Subversion.  Luego se recibir√° el soporte necesario para la verificaci√≥n y el registro.  Pero los dos √∫ltimos requisitos a√∫n no se cumplir√°n, por lo que se necesita algo m√°s sofisticado.  Dir√≠jase al servidor de configuraci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Spring Cloud</a> .  La plataforma Spring Cloud ofrece un servidor de configuraci√≥n y un cliente para este servidor. <br><br>  El servidor Spring Cloud Config es una API REST a la que nuestros clientes se conectar√°n para recuperar su configuraci√≥n.  El servidor tambi√©n gestiona el repositorio de configuraci√≥n de control de versiones.  Es un intermediario entre nuestros clientes y el repositorio de configuraci√≥n y, por lo tanto, est√° en una posici√≥n favorable para implementar herramientas de seguridad para conectar las conexiones de los clientes al servicio y las conexiones del servicio al repositorio de configuraci√≥n con control de versiones.  El cliente Spring Cloud Config proporciona a las aplicaciones cliente un nuevo alcance, actualizaci√≥n, que le permite configurar los componentes Spring nuevamente sin tener que reiniciar la aplicaci√≥n. <br><br><blockquote>  Las tecnolog√≠as como el servidor Spring Cloud Config juegan un papel importante, pero conllevan una sobrecarga adicional.  Idealmente, esta responsabilidad deber√≠a transferirse a la plataforma y automatizarse.  Al usar Cloud Foundry, puede encontrar el servicio del Servidor de configuraci√≥n en el cat√°logo de servicios, cuyas acciones se basan en el uso del servidor Spring Cloud Config. </blockquote><br>  Considere un ejemplo simple.  Primero, configure el servidor Spring Cloud Config.  Se puede acceder a uno de estos servicios mediante varias aplicaciones Spring Boot a la vez.  Necesitas hacer que funcione en alg√∫n lugar y de alguna manera.  Entonces solo queda notificar a todos nuestros servicios sobre d√≥nde encontrar el servicio de configuraci√≥n.  Funciona como una especie de intermediario para las claves de configuraci√≥n y los valores que lee del almacenamiento de Git a trav√©s de la red o del disco.  Agregue la cadena org.springframework.cloud: spring-cloud-config-server al ensamblaje de su aplicaci√≥n Spring Boot para ingresar al servidor Spring Cloud Config (ejemplo 3.8). <br><br>  Ejemplo 3.8.  Para incrustar un servidor de configuraci√≥n en el ensamblado, use la anotaci√≥n @EnableConfigServer <br><br><pre> <code class="hljs java"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> demo; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.SpringApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.boot.autoconfigure.SpringBootApplication; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.cloud.config.server.EnableConfigServer; (<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-meta"><span class="hljs-meta">@EnableConfigServer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ SpringApplication.run(Application.class, args); } }</code> </pre> <br>  (1) El uso de la anotaci√≥n @EnableConfigServer hace que se instale el servidor Spring Cloud Config. <br><br>  El ejemplo 3.9 muestra la configuraci√≥n para el servicio de configuraci√≥n. <br><br>  Ejemplo 3.9.  Configuraci√≥n del servidor de configuraci√≥n Src / main / resources / application.yml <br><br>  server.port = 8888 <br>  spring.cloud.config.server.git.uri = \ <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/cloud-native-java/config-server-configuration-repository</a> (1) <br><br>  (1) Una indicaci√≥n de un repositorio Git en funcionamiento que es de naturaleza local o accesible a trav√©s de la red (por ejemplo, en GitHub (https://github.com/)) y utilizado por el servidor Spring Cloud Config. <br><br>  Aqu√≠, el servicio de configuraci√≥n de Spring Cloud tiene instrucciones de buscar archivos de configuraci√≥n para clientes individuales en el repositorio de Git en GitHub.  Se√±alamos este repositorio, pero un enlace a cualquier Git URI v√°lido ser√≠a suficiente.  Por supuesto, ni siquiera tiene que aplicar al sistema Git, puede usar Subversion o incluso directorios no administrados (aunque recomendamos encarecidamente no hacerlo).  En este caso, el URI de almacenamiento est√° codificado, pero no hay nada que evite que se obtenga del argumento -D, del argumento o de una variable de entorno. <br><br>  ¬ªSe puede encontrar m√°s informaci√≥n sobre el libro en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el sitio web del editor</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Contenidos</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Extracto</a> <br><br>  20% de descuento en cupones para fermentadores de <b>Java</b> - <b>Java</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es425109/">https://habr.com/ru/post/es425109/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es425099/index.html">Lo que entend√≠ y los problemas que encontr√© al crear un clon de Hacker News</a></li>
<li><a href="../es425101/index.html">Docker + Laravel = ‚ù§</a></li>
<li><a href="../es425103/index.html">Detener a los depredadores de Google que persiguen a sus hijos</a></li>
<li><a href="../es425105/index.html">Modo de fabricaci√≥n Intel ME: una amenaza oculta, o lo que est√° detr√°s de la vulnerabilidad CVE-2018-4251 en el MacBook</a></li>
<li><a href="../es425107/index.html">Fintech digest: problemas de biometr√≠a en dispositivos m√≥viles, arrendamiento de tel√©fonos Samsung, valores en blockchain</a></li>
<li><a href="../es425111/index.html">Trucos publicitarios que pueden costarle dinero y reputaci√≥n</a></li>
<li><a href="../es425113/index.html">"Tipograf√≠a digital" o mi experiencia en digitalizaci√≥n m√≥vil de libros</a></li>
<li><a href="../es425115/index.html">DevOps en toda regla: tragedia griega en tres actos</a></li>
<li><a href="../es425117/index.html">Dos bits por transistor: ROM de alta densidad en un chip Intel 8087 de punto flotante</a></li>
<li><a href="../es425123/index.html">El misterioso coraz√≥n de la caja de ritmos Roland TR-808</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>