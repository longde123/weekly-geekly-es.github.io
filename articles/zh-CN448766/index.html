<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’§ ğŸš¹ ğŸ˜ ä½¿ç”¨lernaï¼†yarnå·¥ä½œåŒºåˆ›å»ºä¸€ä¸ªå•ä¸€å­˜å‚¨åº“ ğŸ¤µğŸ¿ âœğŸ½ ğŸŒ°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨è¿‡å»çš„å‡ å¹´ä¸­ï¼Œ å•ä¸€å­˜å‚¨åº“çš„æ¦‚å¿µå·²æˆåŠŸç¡®ç«‹ï¼Œå› ä¸ºå®ƒå¯ä»¥å¤§å¤§ç®€åŒ–å¼€å‘æ¨¡å—åŒ–è½¯ä»¶é¡¹ç›®ï¼ˆä¾‹å¦‚åŸºäºå¾®æœåŠ¡çš„åŸºç¡€ç»“æ„ï¼‰çš„è¿‡ç¨‹ã€‚ è¿™ç§æ¶æ„æ–¹æ³•çš„ä¸»è¦ä¼˜ç‚¹åœ¨å®è·µä¸­æ˜¾è€Œæ˜“è§ï¼Œå› æ­¤ï¼Œæˆ‘å»ºè®®ä»å¤´å¼€å§‹åˆ›å»ºè‡ªå·±çš„æµ‹è¯•å•ä¸€å­˜å‚¨åº“ ï¼ŒåŒæ—¶äº†è§£ä½¿ç”¨çº±çº¿å·¥ä½œåŒºå’Œlernaçš„ç»†å¾®å·®åˆ«ã€‚ å¥½å§ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼ 

 è€ƒè™‘æˆ‘ä»¬é¡¹ç›®çš„ç»“...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨lernaï¼†yarnå·¥ä½œåŒºåˆ›å»ºä¸€ä¸ªå•ä¸€å­˜å‚¨åº“</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448766/"><img src="https://habrastorage.org/webt/ka/j9/hb/kaj9hbw5yqq7pouoa9ad-aqhdio.jpeg" alt="å­¦ä¹ ä¸å­¦ä¹ "><br><br> åœ¨è¿‡å»çš„å‡ å¹´ä¸­ï¼Œ <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å•ä¸€å­˜å‚¨åº“</a></b>çš„æ¦‚å¿µ<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å·²</a></b>æˆåŠŸç¡®ç«‹ï¼Œå› ä¸ºå®ƒå¯ä»¥å¤§å¤§ç®€åŒ–å¼€å‘æ¨¡å—åŒ–è½¯ä»¶é¡¹ç›®ï¼ˆä¾‹å¦‚åŸºäºå¾®æœåŠ¡çš„åŸºç¡€ç»“æ„ï¼‰çš„è¿‡ç¨‹ã€‚ è¿™ç§æ¶æ„æ–¹æ³•çš„ä¸»è¦ä¼˜ç‚¹åœ¨å®è·µä¸­æ˜¾è€Œæ˜“è§ï¼Œå› æ­¤ï¼Œæˆ‘å»ºè®®ä»å¤´å¼€å§‹åˆ›å»ºè‡ªå·±çš„æµ‹è¯•<b>å•ä¸€å­˜å‚¨åº“</b> ï¼ŒåŒæ—¶äº†è§£ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çº±çº¿å·¥ä½œåŒº</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">lerna</a>çš„ç»†å¾®å·®åˆ«ã€‚ å¥½å§ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼ <br><br> è€ƒè™‘æˆ‘ä»¬é¡¹ç›®çš„ç»“æ„ï¼Œè¿™å°†æ˜¯ä½äº<i>packages /</i>æ–‡ä»¶å¤¹ä¸­çš„ä¸‰ä¸ªåº“ä»¥åŠæ ¹ç›®å½•ä¸­çš„<i>package.json</i> ã€‚ <br><br><pre><code class="bash hljs">â”œâ”€â”€ package.json â””â”€â”€ packages â”œâ”€â”€ app â”‚  â”œâ”€â”€ index.js â”‚  â””â”€â”€ package.json â”œâ”€â”€ first â”‚  â”œâ”€â”€ index.js â”‚  â””â”€â”€ package.json â””â”€â”€ second â”œâ”€â”€ index.js â””â”€â”€ package.json</code> </pre> <br> å¯ä»¥ç†è§£ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªç‹¬ç«‹çš„åº“<i>first</i>å’Œ<i>second</i> ï¼Œè¿˜æœ‰ä¸€ä¸ª<i>åº”ç”¨ç¨‹åº</i>åº“ï¼Œå®ƒå°†ä»å‰ä¸¤ä¸ªåº“å¯¼å…¥å‡½æ•°ã€‚ ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå°†æ‰€æœ‰ä¸‰ä¸ªè½¯ä»¶åŒ…éƒ½æ”¾åœ¨<i>packages</i>ç›®å½•ä¸­ã€‚ æ‚¨å¯ä»¥å°†å®ƒä»¬ä¿ç•™åœ¨æ ¹æ–‡ä»¶å¤¹ä¸­ï¼Œä¹Ÿå¯ä»¥å°†å…¶æ”¾ç½®åœ¨ä»»ä½•å…¶ä»–åç§°çš„ç›®å½•ä¸­ï¼Œä½†æ˜¯ä¸ºäº†éµå¾ªæ™®éæ¥å—çš„çº¦å®šï¼Œæˆ‘ä»¬å°†ä»¥è¿™ç§æ–¹å¼æ”¾ç½®å®ƒä»¬ã€‚ <br><a name="habracut"></a><br> ä¸ºäº†ç®€åŒ–å®éªŒï¼Œ <i>ç¬¬ä¸€ä¸ª</i>åº“å’Œ<i>ç¬¬äºŒä¸ª</i>åº“åœ¨<i>index.jsä¸­</i>ä»…åŒ…å«ä¸€ä¸ªå‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°éƒ½ä»£è¡¨æ¨¡å—è¿”å›ä¸€ä¸ªhelloå­—ç¬¦ä¸²ã€‚ å¯¹äºç¬¬<i>ä¸€ä¸ª</i>ç¤ºä¾‹ï¼Œå®ƒå°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/first/index.js const first = () =&gt; 'Hi from the first module'; module.exports = first;</span></span></code> </pre> <br> åœ¨<i>åº”ç”¨ç¨‹åº</i>æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤º<i>æ¥è‡ªåº”ç”¨ç¨‹åº</i>çš„æ¶ˆæ¯<i>Hi</i> ï¼Œä»¥åŠæ¥è‡ªå…¶ä»–ä¸¤ä¸ªè½¯ä»¶åŒ…çš„é—®å€™ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/app/index.js const first = require('@monorepo/first'); const second = require('@monorepo/second'); const app = () =&gt; 'Hi from the app'; const main = () =&gt; { console.log(app()); console.log(first()); console.log(second()); }; main(); module.exports = { app, main };</span></span></code> </pre> <br> ä¸ºäº†ä½¿<i>ç¬¬ä¸€ä¸ª</i>å’Œ<i>ç¬¬äºŒä¸ª</i>åœ¨<i>åº”ç”¨ç¨‹åº</i>ä¸­å¯ç”¨ï¼Œæˆ‘ä»¬å°†å®ƒä»¬è¡¨ç¤ºä¸ºä¾èµ–é¡¹ä¸­çš„<i>ä¾èµ–é¡¹</i> ã€‚ <br><br> å¦å¤–ï¼Œå¯¹äºæ¯ä¸ªåº“ï¼Œæˆ‘ä»¬åœ¨åŒ…çš„ä¸»è¦åç§°å‰é¢çš„å€¼<i>åç§°</i>ä¸­å°†å‰ç¼€<i>@ monorepo /</i>æ·»åŠ åˆ°æœ¬åœ°<i>package.json</i> ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/app/package.json { "name": "@monorepo/app", "version": "1.0.0", "main": "index.js", "license": "MIT", "dependencies": { "@monorepo/first": "^1.0.0", "@monorepo/second": "^1.0.0" } }</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">ä¸ºä»€ä¹ˆåœ¨è½¯ä»¶åŒ…åç§°npmï¼ˆ@ monorepo /ï¼‰å‰é¢éœ€è¦å¸¦æœ‰ç‹—å½¢å›¾æ ‡çš„å‰ç¼€ï¼Ÿ</b> <div class="spoiler_text"> æ·»åŠ å‰ç¼€æ˜¯å¯é€‰çš„ï¼Œä½†è¿™æ°æ°æ˜¯è®¸å¤šå•ä¸€å­˜å‚¨åº“éµå¾ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„</a>è½¯ä»¶åŒ…å‘½å<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çº¦å®š</a> ï¼š <a href="">babel</a> ï¼Œ <br>  <a href="">æè´¨ui</a> ï¼Œ <a href="">è§’</a>ç­‰ã€‚ äº‹å®æ˜¯ï¼Œæ¯ä¸ªç”¨æˆ·æˆ–ç»„ç»‡åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">npm</a>ç½‘ç«™ä¸Šéƒ½æœ‰è‡ªå·±çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½œç”¨åŸŸ</a> ï¼Œå› æ­¤å¯ä»¥ä¿è¯æ‰€æœ‰å¸¦æœ‰<i>@ somescope /</i> postfixçš„æ¨¡å—éƒ½æ˜¯ç”±<i>somescope</i>å›¢é˜Ÿåˆ›å»ºçš„ï¼Œè€Œä¸æ˜¯ç”±æ”»å‡»è€…åˆ›å»ºçš„ã€‚ æ­¤å¤–ï¼Œå¯ä»¥è°ƒç”¨å·²ä½¿ç”¨çš„æ¨¡å—åç§°ã€‚ ä¾‹å¦‚ï¼Œæ‚¨ä¸èƒ½ä»…ä»…é‡‡ç”¨å¹¶åˆ›å»ºè‡ªå·±çš„<i>utils</i>æ¨¡å—ï¼Œå› ä¸ºè¿™æ ·çš„åº“<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å·²ç»å­˜åœ¨</a> ã€‚ ä½†æ˜¯ï¼Œæ·»åŠ åç¼€<i>@ myscopename /</i>æˆ‘ä»¬å¯ä»¥ä¸äºŒåä¸€ç‚¹å’Œå¹´è½»å¥³å£«ä¸€èµ·è·å¾—utilsï¼ˆ <i>@ myscopename / utils</i> ï¼‰ã€‚ <br></div></div><br> å¯¹äºæˆ‘ä»¬çš„æµ‹è¯•é¡¹ç›®ï¼Œç°å®ç”Ÿæ´»ä¸­çš„ç±»ä¼¼ç‰©å¯ä»¥æ˜¯ç”¨äºå¤„ç†æ•°æ®ï¼ŒéªŒè¯å·¥å…·ï¼Œåˆ†ææˆ–ä»…ä¸€ç»„UIç»„ä»¶çš„å„ç§åº“ã€‚ å¦‚æœæˆ‘ä»¬å‡è®¾è¦å¼€å‘ä¸€ä¸ª<i>Web</i>å’Œ<i>ç§»åŠ¨</i>åº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚ï¼Œåˆ†åˆ«ä½¿ç”¨<i>React</i>å’Œ<i>React Native</i> ï¼‰ï¼Œå¹¶ä¸”æˆ‘ä»¬æ‹¥æœ‰é‡ç”¨é€»è¾‘çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆå¯èƒ½å€¼å¾—å°†å…¶æ”¾å…¥å•ç‹¬çš„ç»„ä»¶ä¸­ï¼Œä»¥ä¾›ä»¥ååœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨ã€‚ å°†å…¶æ·»åŠ åˆ°<i>Node.js</i>ä¸Šçš„æœåŠ¡å™¨ï¼Œæ‚¨å°†è·å¾—ä¸€ä¸ªçœŸå®çš„æ¡ˆä¾‹ã€‚ <br><br><h3> çº±çº¿å·¥ä½œåŒº </h3><br> åˆ›å»ºå®Œæ•´çš„mono- <b>å­˜å‚¨åº“</b>ä¹‹å‰çš„æœ€å<i>ä¸€æ­¥æ˜¯</i>åœ¨å­˜å‚¨åº“æ ¹ç›®å½•ä¸­è®¾è®¡<i>package.json</i> ã€‚ æ³¨æ„<i>å·¥ä½œç©ºé—´</i>å±æ€§-æˆ‘ä»¬æŒ‡å®šäº†<i>packages / *</i>çš„å€¼ï¼Œè¿™æ„å‘³ç€â€œ <i>packages</i>æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å­é¡¹â€ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™æ˜¯<i>app</i> ï¼Œ <i>ç¬¬ä¸€</i> ï¼Œ <i>ç¬¬äºŒ</i> ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// package.json { "name": "monorepo", "version": "1.0.0", "main": "packages/app/index.js", "license": "MIT", "private": true, "workspaces": [ "packages/*" ] }</span></span></code> </pre> <br> å¦å¤–ï¼Œå¿…é¡»åœ¨<i>package.jsonä¸­</i>æŒ‡å®š<i>â€œ privateâ€ï¼štrue</i> ï¼Œå› ä¸º<i>å·¥ä½œç©ºé—´</i>ä»…åœ¨ç§æœ‰é¡¹ç›®ä¸­å¯ç”¨ã€‚ <br><br> ä¸ºäº†ä½¿ä¸€åˆ‡é¡ºåˆ©ï¼Œè¯·ä»æ ¹ç›®å½•ä¸­æ‰§è¡Œ<i>yarn</i>å‘½ä»¤ï¼ˆç±»ä¼¼äº<i>yarn install</i>æˆ–<i>npm install</i> ï¼‰ã€‚ å®é™…ä¸Šï¼Œç”±äº<i>app</i>æ¨¡å—ä¸­å­˜åœ¨çš„ä¾èµ–é¡¹è¢«å®šä¹‰ä¸ºæ ¹<i>package.jsonä¸­çš„</i> <i>å·¥ä½œåŒº</i> ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä¸ä¼šä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">npm-registry</a>ä¸‹è½½ä»»ä½•å†…å®¹ï¼Œè€Œåªæ˜¯ç»‘å®šï¼ˆâ€œé“¾æ¥â€ï¼‰æˆ‘ä»¬çš„åŒ…ã€‚ <br><br><pre> <code class="bash hljs">yarn</code> </pre> <br><img src="https://habrastorage.org/webt/hp/sz/m6/hpszm6bs8xrdmb1fguwl9pzx4zg.png" alt="å›¾ç‰‡"><br><br> ç°åœ¨æˆ‘ä»¬å¯ä»¥æ‰§è¡Œ<i>node</i>å‘½ä»¤<i>ã€‚</i> ä»æ ¹ç›®å½•è¿è¡Œï¼Œè¯¥æ ¹ç›®å½•å°†ä»<i>packages / app / index.jsæ–‡ä»¶</i>è¿è¡Œè„šæœ¬ã€‚ <br><br><pre> <code class="bash hljs">node .</code> </pre> <br><img src="https://habrastorage.org/webt/xe/xl/2c/xexl2cpgenqejsz7kbusvpsn0_i.png" alt="å›¾ç‰‡"><br><br> è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚  <i>é€šè¿‡</i>è°ƒç”¨<i>yarn</i> ï¼Œæˆ‘ä»¬åœ¨<i>node_modulesä¸­</i>åˆ›å»ºäº†<i>æŒ‡å‘</i> <i>packages</i>æ–‡ä»¶å¤¹ä¸­ç›®å½•çš„ç¬¦å·é“¾æ¥ã€‚ <br><br><img src="https://habrastorage.org/webt/y2/y-/sj/y2y-sjr7-7blo6ddwgi41ijvvuq.png" alt="å›¾ç‰‡"><br><br> ç”±äºä¾èµ–å…³ç³»ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬è·å¾—äº†ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜åŠ¿-ç°åœ¨ï¼Œå½“åœ¨ç¬¬<i>ä¸€ä¸ª</i>å’Œ<i>ç¬¬äºŒä¸ª</i>æ¨¡å—ä¸­è¿›è¡Œæ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬çš„<i>åº”ç”¨ç¨‹åº</i>å°†æ”¶åˆ°è¿™äº›ç¨‹åºåŒ…çš„å½“å‰ç‰ˆæœ¬ï¼Œè€Œæ— éœ€é‡å»ºã€‚ å®é™…ä¸Šï¼Œè¿™éå¸¸æ–¹ä¾¿ï¼Œå› ä¸º æˆ‘ä»¬å¯ä»¥è¿›è¡Œè½¯ä»¶åŒ…çš„æœ¬åœ°å¼€å‘ï¼Œä½†ä»å°†å®ƒä»¬å®šä¹‰ä¸ºç¬¬ä¸‰æ–¹ä¾èµ–é¡¹ï¼ˆå®ƒä»¬æœ€ç»ˆå°†æˆä¸ºç¬¬ä¸‰æ–¹ä¾èµ–é¡¹ï¼‰ã€‚ <br><br> ä»<i>çº±çº¿å·¥ä½œåŒº</i>è·å¾—çš„ä¸‹ä¸€ä¸ªé‡è¦ä¼˜ç‚¹æ˜¯å­˜å‚¨ç¬¬ä¸‰æ–¹ä¾èµ–é¡¹çš„ç»„ç»‡ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">äº†è§£æœ‰å…³åœ¨é¡¶å±‚å­˜å‚¨ä¾èµ–é¡¹çš„æ›´å¤šä¿¡æ¯ã€‚</b> <div class="spoiler_text"> å‡è®¾æˆ‘ä»¬è¦åœ¨<i>ç¬¬ä¸€</i>å’Œ<i>ç¬¬äºŒä¸ªä¸­</i>ä½¿ç”¨<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">lodash</a></i>åº“ã€‚  <i>é€šè¿‡</i>ä»é€‚å½“çš„ç›®å½•ä¸­<i>æ‰§è¡Œyarn add lodashå‘½ä»¤</i> ï¼Œæˆ‘ä»¬å°†æ”¶åˆ°å¯¹æœ¬åœ°<i>package.json</i>çš„æ›´æ–°-è½¯ä»¶åŒ…çš„å½“å‰ç‰ˆæœ¬å°†æ˜¾ç¤ºåœ¨<i>dependenciesä¸­</i> ã€‚ <br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"lodash"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.17.11"</span></span> }</code> </pre> <br> è‡³äº<i>lodash</i>è½¯ä»¶åŒ…<i>æœ¬èº«</i> -å®é™…ä¸Šï¼Œè¯¥åº“å°†åœ¨æ ¹çº§åˆ«ä¸€æ¬¡å®‰è£…åœ¨<i>node_modules</i>ä¸­ã€‚ <br> å¦‚æœå¤–éƒ¨è½¯ä»¶åŒ…çš„æ‰€éœ€ç‰ˆæœ¬ï¼ˆåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ä¸º<i>lodash</i> ï¼‰åœ¨<i>ç¬¬ä¸€</i>å’Œç¬¬äºŒä¸ªä¸åŒï¼ˆä¾‹å¦‚ï¼Œ <i>é¦–å…ˆæ‚¨</i>éœ€è¦<i>lodash v3.0.0</i> ï¼Œåœ¨<i>ç¬¬äºŒä¸ªv4.0.0ä¸­</i> ï¼‰ï¼Œåˆ™å…·æœ‰è¾ƒä½ç‰ˆæœ¬ï¼ˆ <i>3.0.0</i> ï¼‰çš„è½¯ä»¶åŒ…å°†åˆ°è¾¾æ ¹<i>node_modules</i> ï¼Œ <i>ç¬¬äºŒä¸ª</i>æ¨¡å—çš„<i>lodash</i>ç‰ˆæœ¬å°†å­˜å‚¨åœ¨æœ¬åœ°<i>åŒ…/ second / node_modulesä¸­</i> ã€‚ <br> é™¤äº†ä¼˜ç‚¹ä¹‹å¤–ï¼Œè¯¥æ–¹æ³•è¿˜å¯ä»¥å…·æœ‰è¾ƒå°çš„ç¼ºç‚¹ï¼Œè¯¥<i>çº±çº¿</i>å…è®¸åœ¨é™„åŠ æ ‡å¿—çš„å¸®åŠ©ä¸‹ç»•è¿‡<i>çº±çº¿</i> ã€‚ æ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®˜æ–¹æ–‡æ¡£ä¸­</a>äº†è§£æœ‰å…³æ­¤ç±»ç»†å¾®å·®åˆ«çš„æ›´å¤šä¿¡æ¯ã€‚ <br></div></div><br><h2> æ·»åŠ è±å¨œ </h2><br> ä½¿ç”¨<i>lernaçš„ç¬¬ä¸€æ­¥</i>æ˜¯å®‰è£…è½¯ä»¶åŒ…ã€‚ é€šå¸¸ï¼Œä»–ä»¬æ‰§è¡Œå…¨å±€å®‰è£…ï¼ˆ <i>yarn global add lerna</i>æˆ–<i>npm i -g lerna</i> ï¼‰ï¼Œä½†æ˜¯å¦‚æœä¸ç¡®å®šæ˜¯å¦è¦ä½¿ç”¨æ­¤åº“ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<i>npx</i>è¿›è¡Œè°ƒç”¨ã€‚ <br><br> æˆ‘ä»¬å°†ä»æ ¹ç›®å½•åˆå§‹åŒ–<i>lerna</i> ï¼š <br><br><pre> <code class="bash hljs">lerna init</code> </pre> <br><img src="https://habrastorage.org/webt/xx/0z/pe/xx0zpe3xfvy1msih3a63tjxiu5o.png" alt="å›¾ç‰‡"><br><br> å®é™…ä¸Šï¼Œæˆ‘ä»¬å€ŸåŠ©ä¸€ä¸ªå‘½ä»¤ä¸€æ¬¡æ‰§è¡Œäº†å¤šä¸ªæ“ä½œï¼šåˆ›å»ºäº†ä¸€ä¸ªgitå­˜å‚¨åº“ï¼ˆå¦‚æœä¹‹å‰æœªåˆå§‹åŒ–è¿‡ï¼‰ï¼Œåˆ›å»ºäº†<i>lerna.json</i>æ–‡ä»¶å¹¶æ›´æ–°äº†æ ¹<i>package.json</i> ã€‚ <br><br> ç°åœ¨ï¼Œåœ¨æ–°åˆ›å»ºçš„<i>lerna.json</i>æ–‡ä»¶ä¸­<i>ï¼Œ</i>æ·»åŠ ä¸¤è¡Œ- <i>â€œ npmClientâ€ï¼šâ€œ yarnâ€</i>å’Œ<i>â€œ useWorkspacesâ€ï¼štrue</i> ã€‚ æœ€åä¸€è¡Œè¯´æˆ‘ä»¬å·²ç»åœ¨ä½¿ç”¨<i>yarnå·¥ä½œåŒº</i> ï¼Œä¸éœ€è¦åˆ›å»º<i>app / node_modulesæ–‡ä»¶å¤¹ï¼Œ</i>å…¶ä¸­æœ‰æŒ‡å‘<i>ç¬¬ä¸€ä¸ª</i>å’Œ<i>ç¬¬äºŒä¸ªçš„</i>ç¬¦å·é“¾æ¥ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// lerna.json { "npmClient": "yarn", "packages": [ "packages/*" ], "version": "1.0.0", "useWorkspaces": true }</span></span></code> </pre> <br><h3>  Lernaæµ‹è¯• </h3><br> ä¸ºäº†æ˜¾ç¤ºä½¿ç”¨<i>lerna</i>çš„ä¾¿åˆ©æ€§ï¼Œ <i>è¯·</i>ä¸ºæˆ‘ä»¬çš„åº“æ·»åŠ æµ‹è¯•ã€‚ <br> ä»æ ¹ç›®å½•ï¼Œæˆ‘ä»¬å®‰è£…ç”¨äºæµ‹è¯•çš„è½¯ä»¶åŒ…<i>-jest</i> ã€‚ è¿è¡Œå‘½ä»¤ï¼š <br><br><pre> <code class="bash hljs">yarn add -DW jest</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">ä¸ºä»€ä¹ˆéœ€è¦-DWæ ‡å¿—ï¼Ÿ</b> <div class="spoiler_text"> éœ€è¦-Dï¼ˆ-devï¼‰æ ‡å¿—ï¼Œä»¥ä¾¿å°†<i>jest</i>è½¯ä»¶åŒ…ä½œä¸ºdevä¾èµ–é¡¹å®‰è£…ï¼Œè€Œ-Wæ ‡å¿—ï¼ˆ-ignore-workspace-root-checkï¼‰å…è®¸åœ¨æ ¹çº§åˆ«è¿›è¡Œå®‰è£…ï¼ˆè¿™æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼‰ã€‚ <br></div></div><br> ä¸‹ä¸€æ­¥æ˜¯å°†ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶æ·»åŠ åˆ°æˆ‘ä»¬çš„è½¯ä»¶åŒ…ä¸­ã€‚ ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†ä½¿æ‰€æœ‰æµ‹è¯•ç›¸ä¼¼ã€‚ å¯¹äºç¬¬<i>ä¸€ä¸ª</i>ç¤ºä¾‹ï¼Œæµ‹è¯•æ–‡ä»¶å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/first/test.js const first = require('.'); describe('first', () =&gt; { it('should return correct message', () =&gt; { const result = first(); expect(result).toBe('Hi from the first module'); }); });</span></span></code> </pre> <br> æˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ ä¸€ä¸ªè„šæœ¬æ¥åœ¨æ¯ä¸ªåº“çš„<i>package.jsonä¸­</i>è¿è¡Œæµ‹è¯•ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/*/package.json ... "scripts": { "test": "../../node_modules/.bin/jest --colors" }, ...</span></span></code> </pre><br> æœ€å<i>ä¸€æ­¥</i>æ˜¯æ›´æ–°æ ¹<i>package.json</i> ã€‚ æ·»åŠ ä¸€ä¸ª<i>æµ‹è¯•</i>è„šæœ¬ï¼Œè¯¥è„šæœ¬å°†è°ƒç”¨<i>lerna run test --stream</i> ã€‚  <i>lerna runä¹‹å</i>çš„å‚æ•°å®šä¹‰äº†å°†åœ¨<i>package /</i>æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸ªè½¯ä»¶åŒ…ä¸­è°ƒç”¨çš„å‘½ä»¤ï¼Œå¹¶ä¸”<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">--stream</a></i>æ ‡å¿—å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ç»ˆç«¯ä¸­æŸ¥çœ‹ç»“æœçš„è¾“å‡ºã€‚ <br><br> ç»“æœï¼Œæ ¹ç›®å½•ä¸­çš„<i>package.json</i>å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// package.json { "name": "monorepo", "version": "1.0.0", "main": "packages/app/index.js", "license": "MIT", "private": true, "workspaces": [ "packages/*" ], "scripts": { "test": "lerna run test --stream" }, "devDependencies": { "jest": "^24.7.1", "lerna": "^3.13.2" } }</span></span></code> </pre> <br> ç°åœ¨ï¼Œè¦è¿è¡Œæµ‹è¯•ï¼Œæˆ‘ä»¬åªéœ€è¦ä»é¡¹ç›®çš„æ ¹ç›®å½•è¿è¡Œå‘½ä»¤ï¼š <br><br><pre> <code class="bash hljs">yarn <span class="hljs-built_in"><span class="hljs-built_in">test</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/hs/8x/ti/hs8xtihl1ig7fkcxdgpum82otqy.png" alt="å›¾ç‰‡"><br><br><h3>  Lernaçš„ç‰ˆæœ¬å‡çº§ </h3><br>  <i>lerna</i>å¯ä»¥åº”ä»˜çš„ä¸‹ä¸€ä¸ªæµè¡Œä»»åŠ¡æ˜¯æ›´æ–°è½¯ä»¶åŒ…ç‰ˆæœ¬ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨å®æ–½æµ‹è¯•ä¹‹åï¼Œæˆ‘ä»¬å†³å®šå°†åº“ä»1.0.0å‡çº§åˆ°2.0.0ã€‚ ä¸ºæ­¤ï¼Œåªéœ€åœ¨æ ¹<i>package.json</i>çš„<i>è„šæœ¬</i>å­—æ®µä¸­æ·»åŠ <i>â€œ updateï¼šversionâ€ï¼šâ€œ lerna version --no-pushâ€</i>è¡Œï¼Œç„¶åä»æ ¹ç›®å½•ä¸­è¿è¡Œ<i>yarnæ›´æ–°ï¼šversion</i> ã€‚ æ·»åŠ äº†<i>--no-push</i>æ ‡å¿—ï¼Œä»¥ä¾¿åœ¨æ›´æ–°ç‰ˆæœ¬åï¼Œæ›´æ”¹ä¸ä¼šå‘é€åˆ°è¿œç¨‹å­˜å‚¨åº“ï¼Œè€Œ<i>lerna</i>é»˜è®¤æƒ…å†µä¸‹ä¼šæ‰§è¡Œæ­¤æ“ä½œï¼ˆä¸å¸¦æ­¤æ ‡å¿—ï¼‰ã€‚ <br><br> ç»“æœï¼Œæˆ‘ä»¬çš„æ ¹<i>package.json</i>å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// package.json { "name": "monorepo", "version": "1.0.0", "main": "packages/app/index.js", "license": "MIT", "private": true, "workspaces": [ "packages/*" ], "scripts": { "test": "lerna run test --stream", "update:version": "lerna version --no-push" }, "devDependencies": { "jest": "^24.7.1", "lerna": "^3.13.2" } }</span></span></code> </pre> <br> è¿è¡Œç‰ˆæœ¬æ›´æ–°è„šæœ¬ï¼š <br><br><pre> <code class="bash hljs">yarn update:version</code> </pre> <br> æ¥ä¸‹æ¥ï¼Œå°†è¦æ±‚æˆ‘ä»¬é€‰æ‹©è¦åˆ‡æ¢åˆ°çš„ç‰ˆæœ¬ï¼š <br><br><img src="https://habrastorage.org/webt/yh/9u/_q/yh9u_q_xoiokycczph0iwzpzuqo.png" alt="å›¾ç‰‡"><br><br> é€šè¿‡å•å‡»<i>Enterï¼Œ</i>æˆ‘ä»¬å°†è·å¾—æ›´æ–°ç‰ˆæœ¬çš„è½¯ä»¶åŒ…åˆ—è¡¨ã€‚ <br><br><img src="https://habrastorage.org/webt/os/p4/2p/osp42ptsjd5vkf1wm_ja7nbb1lq.png" alt="å›¾ç‰‡"><br><br> æˆ‘ä»¬è¾“å…¥<i>y</i>ç¡®è®¤æ›´æ–°ï¼Œå¹¶æ”¶åˆ°æœ‰å…³æ›´æ–°æˆåŠŸçš„æ¶ˆæ¯ã€‚ <br><br><img src="https://habrastorage.org/webt/5k/ll/6b/5kll6bkqmeejvzn9f6zzy4xopzs.png" alt="å›¾ç‰‡"><br><br> å¦‚æœæˆ‘ä»¬å°è¯•è¿è¡Œ<i>git status</i>å‘½ä»¤ï¼Œåˆ™è¯¥æ¶ˆæ¯<i>ä»€ä¹ˆä¹Ÿæ²¡æœ‰æäº¤ï¼Œå·¥ä½œæ ‘ä¸ºclean</i> ï¼Œå› ä¸º  <i>lerna version</i>ä¸ä»…ä¼šæ›´æ–°è½¯ä»¶åŒ…ç‰ˆæœ¬ï¼Œè¿˜ä¼šåˆ›å»ºä¸€ä¸ªgit commitå’Œæ ‡è®°æ¥æŒ‡ç¤ºæ–°ç‰ˆæœ¬ï¼ˆæœ¬ä¾‹ä¸­ä¸ºv2.0.0ï¼‰ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ä¸lernaç‰ˆæœ¬å›¢é˜Ÿåˆä½œçš„åŠŸèƒ½</b> <div class="spoiler_text"> å¦‚æœåœ¨æ ¹<i>package.json</i>çš„<i>è„šæœ¬</i>å­—æ®µä¸­æ·»åŠ <i>â€œ versionâ€ï¼šâ€œ lerna version --no-pushâ€è¡Œï¼Œ</i>è€Œä¸æ˜¯<i>â€œ updateï¼šversionâ€ï¼šâ€œ lerna version --no-pushâ€è¡Œ</i> ï¼Œåˆ™å¾ˆå¯èƒ½ä¼šé‡åˆ°æ„å¤–è¡Œä¸ºï¼Œå¹¶ä¸”çº¢è‰²æ§åˆ¶å°ã€‚ äº‹å®æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">npm-scripts</a>åœ¨æ›´æ–°è½¯ä»¶åŒ…ç‰ˆæœ¬åç«‹å³è°ƒç”¨<i>version</i>å‘½ä»¤ï¼ˆä¿ç•™è„šæœ¬ï¼‰ï¼Œä»è€Œå¯¼è‡´é€’å½’è°ƒç”¨<i>lerna version</i> ã€‚ ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œåªéœ€ä¸ºè„šæœ¬æŒ‡å®šå…¶ä»–åç§°å³å¯ï¼Œä¾‹å¦‚<i>updateï¼šversion</i> ï¼Œå°±åƒæˆ‘ä»¬åœ¨ç¤ºä¾‹ä¸­æ‰€åšçš„é‚£æ ·ã€‚ <br></div></div><br><h3> ç»“è®º </h3><br> è¿™äº›ç¤ºä¾‹æ˜¾ç¤ºäº†<i>lerna</i>ä¸<i>çº±çº¿å·¥ä½œåŒº</i>ç»“åˆçš„æ‰€æœ‰å¯èƒ½æ€§çš„ç™¾åˆ†ä¹‹ä¸€ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘è¿˜æ²¡æœ‰æ‰¾åˆ°æœ‰å…³ä½¿ç”¨ä¿„è¯­çš„å•ä¸€å­˜å‚¨åº“çš„è¯¦ç»†è¯´æ˜ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å‡è®¾è¿™å·²ç»å¼€å§‹äº†ï¼ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é“¾æ¥</a>åˆ°æµ‹è¯•é¡¹ç›®å­˜å‚¨åº“ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN448766/">https://habr.com/ru/post/zh-CN448766/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN448754/index.html">è°æ˜¯å¼€æºä¸­çš„è°ï¼šæå®¢ä¼ è®°</a></li>
<li><a href="../zh-CN448758/index.html">åœ¨ç‰©ç†æœº6502ä¸Šä½¿ç”¨BASICçš„æ™ºèƒ½æ‰‹è¡¨</a></li>
<li><a href="../zh-CN448760/index.html">äº‘ä¸­çš„å¼€å‘ï¼Œä¿¡æ¯å®‰å…¨æ€§å’Œä¸ªäººæ•°æ®ï¼šæ‘˜è¦ï¼Œä¾›å‘¨æœ«ä»1cloudé˜…è¯»</a></li>
<li><a href="../zh-CN448762/index.html">Picabaæš´åŠ¨ã€‚ ç”¨æˆ·å¤§é‡å‰å¾€Reddit</a></li>
<li><a href="../zh-CN448764/index.html">åœ¨ATtiny13ä¸Šè§‚çœ‹</a></li>
<li><a href="../zh-CN448768/index.html">å¤šçº§ç…§æ˜æ§åˆ¶ï¼šè§£å†³æ–¹æ¡ˆå’Œäº§å“çš„å¼¹æ€§</a></li>
<li><a href="../zh-CN448770/index.html">æ›´æ–°äº†Visual Studio Codeä¸­çš„Razoræ”¯æŒã€‚ ç°åœ¨æœ‰äº†çƒˆç„°</a></li>
<li><a href="../zh-CN448774/index.html">ä½¿ç”¨DBMS_SQLçš„SQLè‡³CSV</a></li>
<li><a href="../zh-CN448776/index.html">RxVMS-é€‚ç”¨äºFlutteråº”ç”¨ç¨‹åºçš„å®ç”¨æ¶æ„</a></li>
<li><a href="../zh-CN448778/index.html">ä¸ºVisual Studio Enterprise 2019å¼•å…¥æ—¶é—´æ—…è¡Œè°ƒè¯•</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>