<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥅 🖐🏻 🚝 从A到Z在Android上进行A / B测试 👞 👉🏿 🙋🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="关于A / B测试的大多数文章都致力于Web开发，尽管该工具与其他平台相关，但移动开发仍然不公平。 我们将通过描述主要步骤并揭示在移动平台上进行A / B测试的功能和行为，来消除这种不公正现象。 

 A / B测试概念 
 需要使用A / B测试来测试旨在改善关键应用程序指标的假设。 在最简单的情...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>从A到Z在Android上进行A / B测试</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redmadrobot/blog/425501/"><img src="https://habrastorage.org/webt/cq/42/wq/cq42wqcgx57pez1vopo3r18wkfu.png" alt="图片"><br><br> 关于A / B测试的大多数文章都致力于Web开发，尽管该工具与其他平台相关，但移动开发仍然不公平。 我们将通过描述主要步骤并揭示在移动平台上进行A / B测试的功能和行为，来消除这种不公正现象。 <br><a name="habracut"></a><br><h3>  A / B测试概念 </h3><br> 需要使用A / B测试来测试旨在改善关键应用程序指标的假设。 在最简单的情况下，用户分为两组（对照组）（A）和实验组（B）。 实现该假设的功能仅向实验组推出。 此外，基于对每个组的指标指标的比较分析，得出了该功能的相关性的结论。 <br><br><h3> 实作 </h3><br><h4>  1.将用户分组 </h4><br> 首先，我们需要了解如何将用户按正确的百分比进行分组，并具有动态更改用户的能力。 如果突然发现一项新功能将转化率提高了146％，并且仅推出了5％的用户，则这种机会将特别有用！ 当然，我们将希望立即将其推广给所有用户-而不更新商店中的应用程序和相关的时间成本。 <br><br> 当然，您可以在服务器上组织故障，每当您需要更改某些内容时，请拉后端开发人员。 但是在现实生活中，支持通常是在客户方面或由第三方公司开发的，并且服务器开发人员有足够的事情要做，因此并非总是可以与第三方合作快速调整故障，或者几乎永远不会，因此这种选择不适合我们。 然后，Firebase Remote Config可以解救！ <br><br><p><img align="right" src="https://habrastorage.org/webt/w6/is/h8/w6ish8xridf-ipil3gg2xfivjgs.png" alt="图片" width="25%"> 在Firebase控制台的“增长”组中，有一个“远程配置”选项卡，您可以在其中创建自己的配置，Firebase会将其交付给您的应用程序用户。 <br><br><br>  config是一个映射&lt;parameter key，parameter value&gt;，可以根据条件分配参数值。 例如，对于具有特定版本应用程序的用户，该值为X，对于其他所有用户，该值为Y。有关配置的更多信息，请参见<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文档</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">相应部分</a> 。 <br><br><img src="https://habrastorage.org/webt/lb/ak/io/lbakiovs_ehjmm10rvmxd1llghy.png" alt="图片"><br><br> 同样在“增长”组中，有一个选项卡“ A / B测试”。 在这里，我们可以对所有上述包子进行测试。 来自远程配置的键用作参数。 从理论上讲，您可以直接在A / B测试中创建新参数，但这只会增加不必要的混乱，因此您不应该这样做，将相应的参数添加到配置中比较容易。 传统上，其中的值是默认值，并且与对照组相对应，除默认值外，参数的实验值是实验性的。 <br><br><img src="https://habrastorage.org/webt/hn/8z/_w/hn8z_weebxd8zyihtzhhghzwvgu.png" alt="图片" width="80%"><br><br> 注意事项 对照组通常称为A组，实验组称为B。如屏幕截图所示，在Firebase中，默认实验组称为“变体A”，这引起了一些混淆。 但是没有什么可以改变其名称的。 <br><br> 接下来，运行A / B测试，Firebase将用户分为与参数的不同值相对应的组，在客户端上收到配置后，我们从中提取必要的参数，并根据该值应用新功能。 传统上，该参数的名称与功能名称对应，并且有2个值：True-应用了功能，False-不应用。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在文档</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">相应部分中</a>阅读有关A / B测试设置的更多信息。 <br><br></p><h4>  2.代码 </h4><br> 我们不会直接讨论与Firebase Remote Config的集成- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>将对其进行详细描述。 <br><br> 让我们弄清楚如何组织用于A / B测试的代码。 如果我们只是更改按钮的颜色，那么谈论组织是没有意义的，因为组织没有什么特别的地方。 我们将考虑一种变体，其中根据远程配置中的参数，显示当前（用于对照组）或新（用于实验）屏幕。 <br><br> 您需要了解，在A / B测试到期之后，将需要删除其中一个屏幕选项，在这方面，代码的组织方式必须尽量减少当前实现中的更改。 与新屏幕关联的所有文件都应使用前缀AB调用，并放在具有相同前缀的文件夹中。 <br><br> 如果我们在Presentation层中谈论MVP，它将看起来像这样： <br><br><img src="https://habrastorage.org/webt/ce/u0/du/ceu0du0gem2ca39h_-belwhhp5w.png" alt="图片" width="50%"><br><br> 最灵活和透明的类层次结构似乎是： <br><br><img src="https://habrastorage.org/webt/vk/ux/ct/vkuxcttiwhxzhkf0twzclvokcx0.png" alt="图片"><br><br>  BaseOrderStatusFragment将包含当前实现的所有功能，但由于架构限制而无法放置在抽象类中的方法除外。 它们将位于OrderStatusFragment中。 <br><br>  AbOrderStatusFragment将覆盖实现不同的方法，并包含必要的其他方法。 因此，在当前的实现中，只有将一类分解为两类的情况才会发生变化，并且基类中的某些方法将变为受保护的开放而不是私有的。 <br><br> 注意：如果体系结构和特定情况允许，您可以不创建基类而直接从OrderStatusFragment继承AbOrderStatusFragment。 <br><br> 在这样的组织中，最有可能偏离所采用的CodeStyle，在这种情况下是允许的，因为在完成A / B测试后，相应的代码将被删除或重构（但是，当然，在违反CodeStyle的地方，您应该发表评论）。 <br><br> 如果事实如此，这样的组织将使我们能够迅速而轻松地删除一项新功能，因为与该功能相关的所有文件都易于通过前缀查找，并且其实现不会影响当前功能。 如果该功能改进了关键指标并决定放弃该指标，那么我们仍然必须努力削减当前的功能，这将影响新功能的代码。 <br><br> 要获取配置，值得创建一个单独的存储库并在应用程序级别注入它，以便可以在任何地方访问它，因为我们不知道应用程序的哪些部分会影响以后的A / B测试。 出于相同的原因，值得尽快提出要求，例如，以及应用程序正常工作所需的基本信息（通常这样的请求是在启动期间发生的，尽管这是一个整体主题，但重要的是它们必须存在于某处）。 <br><br> 好吧，当然，重要的是不要忘记将配置中的参数值放入分析事件参数中，以便您可以比较指标 <br><br><h3> 结果分析 </h3><br> 例如，有许多文章详细介绍了如何分析A / B测试的结果。 为了不重复自己，我们只说明本质。 您需要了解，对照组和实验组中指标的差异是随机变量，并且我们不能仅基于实验组中的指标更好而得出结论该功能是相关的。 必须为上述随机变量建立一个置信区间（可靠性水平的选择应委托分析人员选择）并进行实验，直到该区间完全在正或负半平面内-然后才能得出统计上有效的结论。 <br><br><h4> 陷阱 </h4><br>  <b>1.获取远程配置时出错</b> <br><br> 对新用户进行比较分析，因为具有相同用户体验的用户以及只有看到过唯一实现选项的用户才应参与实验。 回想一下，接收配置是网络请求，并且可能会失败，在这种情况下，将应用默认值，该默认值通常等于控制组的值。 <br><br> 考虑以下情况：我们有一个将Firebase分配给实验组的用户。 用户首次启动该应用程序，并且“远程配置”请求返回错误-用户看到旧屏幕。 在下一次启动时，将正确处理“远程配置”请求，并且用户会看到一个新屏幕。 重要的是要了解此类用户与实验无关，因此您需要弄清楚如何在分析系统方面过滤掉此类用户，或证明此类用户的数量可以忽略不计。 <br><br> 实际上，此类错误的确很少发生，并且后一种选择很可能适合您，但是从本质上讲，这是一个类似但更紧急的问题-获取配置的时间。 如上所述，最好将Remote Config请求粘贴在会话开始时，但是如果该请求花费的时间太长，则用户将不耐烦等待并且退出应用程序。 因此，您需要解决一个不平凡的任务-选择一个超时来重置Remote Config请求。 如果太小，则可能有很大一部分用户与测试无关。如果太大，则冒着激怒用户的风险。 我们已经收集了有关接收配置时间的统计信息： <br><br><img src="https://habrastorage.org/webt/7u/rd/m6/7urdm6xz3vmapou0xwzgdqp_blg.png" alt="图片" width="80%"><br><br> 注意事项 最近<i>30</i>天的数据。 请求总数<i>673529</i> 。 除了网络请求外，第一列还包含来自缓存的配置的接收，因此将其从常规分发形式中剔除。 <br><br><div class="spoiler">  <b class="spoiler_title">图形数据：</b> <div class="spoiler_text"><p></p><br><table><tbody><tr><td><p> 毫秒 </p><br></td><td><p> 请求数 </p><br></td></tr><tr><td><p>  200 </p><br></td><td><p>  227485 </p><br></td></tr><tr><td><p>  400 </p><br></td><td><p>  51038 </p><br></td></tr><tr><td><p>  600 </p><br></td><td><p>  59249 </p><br></td></tr><tr><td><p>  800 </p><br></td><td><p>  84516 </p><br></td></tr><tr><td><p>  1000 </p><br></td><td><p>  63891 </p><br></td></tr><tr><td><p>  1200 </p><br></td><td><p>  39115 </p><br></td></tr><tr><td><p>  1400 </p><br></td><td><p>  24889 </p><br></td></tr><tr><td><p>  1600 </p><br></td><td><p>  16763 </p><br></td></tr><tr><td><p>  1800 </p><br></td><td><p>  12410 </p><br></td></tr><tr><td><p>  2000 </p><br></td><td><p>  9502 </p><br></td></tr><tr><td><p>  2200 </p><br></td><td><p>  7636 </p><br></td></tr><tr><td><p>  2400 </p><br></td><td><p>  6357 </p><br></td></tr><tr><td><p>  2600 </p><br></td><td><p>  5409 </p><br></td></tr><tr><td><p>  2800 </p><br></td><td><p>  4545 </p><br></td></tr><tr><td><p>  3000 </p><br></td><td><p>  3963 </p><br></td></tr><tr><td><p>  3200 </p><br></td><td><p>  2699 </p><br></td></tr><tr><td><p>  3400 </p><br></td><td><p>  3184 </p><br></td></tr><tr><td><p>  3600 </p><br></td><td><p>  2755 </p><br></td></tr><tr><td><p>  3800 </p><br></td><td><p>  2431 </p><br></td></tr><tr><td><p>  4000 </p><br></td><td><p>  2176 </p><br></td></tr><tr><td><p>  4200 </p><br></td><td><p>  1950年 </p><br></td></tr><tr><td><p>  4400 </p><br></td><td><p>  1804 </p><br></td></tr><tr><td><p>  4600 </p><br></td><td><p>  1607 </p><br></td></tr><tr><td><p>  4800 </p><br></td><td><p>  1470 </p><br></td></tr><tr><td><p>  5000 </p><br></td><td><p>  1310 </p><br></td></tr><tr><td><p>  &gt; 5000 </p><br></td><td><p>  35375 </p><br></td></tr></tbody></table><br></div></div><br>  <b>2.滚花更新远程配置</b> <br><br> 您必须了解Firebase会缓存“远程配置”请求。 默认的缓存生存期是12小时。 时间可以调整，但是Firebase限制了请求的频率，如果超出了限制，Firebase将禁止我们执行，并会在配置请求中返回错误。可能只适用于数量有限的设备）。 <br><br> 因此，例如，如果我们要完成A / B测试并以100％的比例推出新功能，则需要了解过渡只会在12小时内发生，但这不是主要问题。 考虑以下情况：我们进行了A / B测试，完成了测试并准备了新版本，其中还有另一个具有相应配置的A / B测试。 我们已经发布了该应用程序的新版本，但是我们的用户已经从以前的A / B测试中缓存了配置，并且如果缓存尚未过期，则配置请求不会提取新参数，我们将再次将用户分配给实验组，它将在第一个请求时接收配置的默认值，并在以后破坏新实验的数据。 <br><br> 这个问题的解决方案非常简单-您需要通过重置缓存生存期来在更新应用程序版本时强制执行config请求： <br><br><pre><code class="hljs pgsql">val cacheExpiration = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isAppNewVersion) <span class="hljs-number"><span class="hljs-number">0</span></span>L <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> TWELVE_HOURS_IN_SECONDS FirebaseRemoteConfig.getInstance().<span class="hljs-keyword"><span class="hljs-keyword">fetch</span></span>(cacheExpiration)</code> </pre> <br> 由于更新的发布频率不高，因此我们不会超出限制 <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在此处</a>阅读有关这些问题的更多信息。 <br><br><h3> 结论 </h3><br>  Firebase提供了应该使用的非常便捷，简单的A / B测试工具，尤其要注意上述瓶颈。 在进行与A / B测试周期相关的更改时，建议的代码组织将最大程度地减少错误数量。 <br><br> 祝大家好运，A / B测试成功，转换率提高100.5％。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN425501/">https://habr.com/ru/post/zh-CN425501/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN425487/index.html">Waymo全自动出租车将于今年亮相</a></li>
<li><a href="../zh-CN425489/index.html">自动化：夸大的机器人威胁</a></li>
<li><a href="../zh-CN425493/index.html">为IPTV Beeline配置MikroTik hAP mini</a></li>
<li><a href="../zh-CN425497/index.html">Tutu PHP聚会＃2：现场直播</a></li>
<li><a href="../zh-CN425499/index.html">HyperX Impact DDR4-可以的SO-DIMM！ 还是为什么在笔记本电脑中以3200 MHz的频率存储64 GB内存？</a></li>
<li><a href="../zh-CN425503/index.html">Cassandra Sink用于Spark结构化流</a></li>
<li><a href="../zh-CN425505/index.html">Linux内核启动过程分析</a></li>
<li><a href="../zh-CN425507/index.html">Parsim Wikipedia负责4个团队的NLP任务</a></li>
<li><a href="../zh-CN425511/index.html">Rotativa应用程序的非显而易见的功能，用于在ASP.NET MVC应用程序中生成PDF</a></li>
<li><a href="../zh-CN425515/index.html">Apple阻止对新MacBook型号进行独立维修</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>