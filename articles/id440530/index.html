<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👴🏻 👨🏾‍🏭 🛤️ Fitur lainnya dengan pola dalam C # 8.0 👠 👨‍👨‍👦 👂🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Baru-baru ini, Visual Studio 2019 Preview 2 dirilis. Dan dengan itu, beberapa fitur C # 8.0 tambahan siap untuk Anda coba. Ini terutama merupakan perb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fitur lainnya dengan pola dalam C # 8.0</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/440530/"><p>  Baru-baru ini, Visual Studio 2019 Preview 2 dirilis. Dan dengan itu, beberapa fitur C # 8.0 tambahan siap untuk Anda coba.  Ini terutama merupakan perbandingan dengan sampel, meskipun pada akhirnya saya akan menyentuh beberapa berita dan perubahan lainnya. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Artikel ini dalam bahasa Inggris.</a> </p><br><img src="https://habrastorage.org/webt/_p/dm/49/_pdm493ww_lspasjjtw5abi-eoa.jpeg"><a name="habracut"></a><br><br>  Terima kasih telah menerjemahkan MSP kami, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lev Bulanov</a> . <br><br><h2></h2><p>  Lebih banyak pola di lebih banyak tempat </p><br><p>  Ketika pencocokan pola muncul di C # 7.0, kami mencatat bahwa peningkatan jumlah pola di lebih banyak tempat diharapkan di masa depan.  Waktunya telah tiba!  Kami menambahkan apa yang kami sebut pola rekursif, serta bentuk ekspresi <strong>saklar yang</strong> lebih ringkas yang disebut (Anda tebak). </p><br><p>  Untuk memulai, berikut adalah contoh sederhana pola C # 7.0: </p><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Point</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> X { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Y { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Point</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y</span></span></span><span class="hljs-function">)</span></span> =&gt; (X, Y) = (x, y); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Deconstruct</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y</span></span></span><span class="hljs-function">)</span></span> =&gt; (x, y) = (X, Y); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Display</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> o</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (o) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Point p when pX == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; pY == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"origin"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Point p: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">$"(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{pX}</span></span></span><span class="hljs-string">, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{pY}</span></span></span><span class="hljs-string">)"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"unknown"</span></span>; } }</code> </pre> <br><p></p><h2>  Alihkan ekspresi </h2><br><p>  Pertama, perhatikan bahwa banyak ekspresi <strong>switch</strong> , pada kenyataannya, tidak melakukan banyak pekerjaan yang menarik dalam <strong>kasus</strong> tubuh.  Seringkali semuanya hanya membuat nilai, baik dengan menetapkannya ke variabel atau dengan mengembalikannya (seperti yang ditunjukkan di atas).  Dalam semua situasi ini, peralihan tampaknya tidak pada tempatnya.  Ini mirip dengan fitur bahasa lima puluh tahun. </p><br><p>  Kami memutuskan sudah waktunya untuk menambahkan formulir <strong>pernyataan beralih</strong> .  Ini berlaku untuk contoh di bawah ini: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Display</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> o</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> o <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> { Point p when pX == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; pY == <span class="hljs-number"><span class="hljs-number">0</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"origin"</span></span>, Point p =&gt; <span class="hljs-string"><span class="hljs-string">$"(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{pX}</span></span></span><span class="hljs-string">, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{pY}</span></span></span><span class="hljs-string">)"</span></span>, _ =&gt; <span class="hljs-string"><span class="hljs-string">"unknown"</span></span> }; }</code> </pre> <br><p>  Ada beberapa hal yang telah berubah dibandingkan dengan beralih pernyataan.  Mari kita daftar mereka: </p><br><ul><li>  Kata kunci <strong>sakelar</strong> adalah “infix” antara nilai yang diuji dan daftar case <strong>{...}</strong> .  Ini membuatnya lebih komposisional dengan ekspresi lain, dan juga lebih mudah untuk secara visual membedakan dari pernyataan switch. </li><li>  Kata kunci dan simbol <strong>kasus</strong> : telah diganti dengan panah lambda <strong>=&gt;</strong> singkatnya. </li><li>  <strong>Default</strong> untuk singkatnya telah diganti oleh pola reset. </li><li>  Tubuh adalah ekspresi.  Hasil dari body yang dipilih menjadi hasil dari pernyataan switch. </li></ul><br><p>  Karena ekspresi harus penting atau melempar pengecualian, ekspresi pilih yang berakhir tanpa kecocokan akan melempar pengecualian.  Kompiler akan memperingatkan Anda ketika ini bisa terjadi, tetapi itu tidak akan memaksa Anda untuk mengakhiri semua pernyataan pilih dengan fungsi catch-all. </p><br><p>  Karena metode <strong>Tampilan</strong> kami sekarang terdiri dari pernyataan pengembalian tunggal, kami dapat menyederhanakannya untuk ekspresi: </p><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Display</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> o</span></span></span><span class="hljs-function">)</span></span> =&gt; o <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> { Point p when pX == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; pY == <span class="hljs-number"><span class="hljs-number">0</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"origin"</span></span>, Point p =&gt; <span class="hljs-string"><span class="hljs-string">$"(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{pX}</span></span></span><span class="hljs-string">, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{pY}</span></span></span><span class="hljs-string">)"</span></span>, _ =&gt; <span class="hljs-string"><span class="hljs-string">"unknown"</span></span> };</code> </pre> <br><p>  Apa pun rekomendasi pemformatan yang diberikan, mereka harus sangat jelas dan ringkas.  Singkatnya memungkinkan Anda untuk memformat sakelar dengan cara "tabular", seperti dijelaskan di atas, dengan pola dan bod pada baris yang sama, dan <strong>=&gt;</strong> berbaris di bawah satu sama lain. </p><br><p>  Ngomong-ngomong, kami berencana untuk mengizinkan penggunaan koma setelah kasus terakhir sesuai dengan semua "daftar yang dipisahkan oleh koma dalam kurung keriting" di C #, tetapi ini belum diizinkan dalam Pratinjau 2. </p><br><h2></h2><p>  Properti Pola </p><br><p>  Berbicara tentang singkatnya, pola tiba-tiba menjadi elemen tersulit dari ekspresi pilihan.  Mari kita lakukan sesuatu. </p><br><p>  Perhatikan bahwa ekspresi pilih menggunakan pola tipe <strong>Point p</strong> (dua kali), serta <strong>kapan</strong> menambahkan kondisi tambahan dalam <strong>kasus</strong> pertama. </p><br><p>  Dalam C # 8.0, kami menambahkan elemen opsional tambahan ke jenis pola, yang memungkinkan pola itu sendiri masuk lebih dalam ke nilai yang cocok dengan pola.  Anda dapat menjadikannya pola properti dengan menambahkan <strong>{...} yang</strong> berisi pola bersarang, menerapkan nilai ke properti atau bidang yang tersedia.  Ini memungkinkan kami untuk menulis ulang ekspresi switch sebagai berikut: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Display</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> o</span></span></span><span class="hljs-function">)</span></span> =&gt; o <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> { Point { X: <span class="hljs-number"><span class="hljs-number">0</span></span>, Y: <span class="hljs-number"><span class="hljs-number">0</span></span> } p =&gt; <span class="hljs-string"><span class="hljs-string">"origin"</span></span>, Point { X: <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x, Y: <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y } p =&gt; <span class="hljs-string"><span class="hljs-string">$"(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{x}</span></span></span><span class="hljs-string">, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{y}</span></span></span><span class="hljs-string">)"</span></span>, _ =&gt; <span class="hljs-string"><span class="hljs-string">"unknown"</span></span> };</code> </pre> <br><p>  Kedua kasus masih memverifikasi bahwa <strong>o</strong> adalah <strong>Point</strong> .  Dalam kasus pertama, pola konstanta <strong>0 secara</strong> rekursif diterapkan pada properti <strong>X</strong> dan <strong>Y dari</strong> variabel <strong>p</strong> , memeriksa apakah mereka memiliki nilai ini.  Dengan demikian, kita dapat menghilangkan kondisi <strong>saat</strong> ini dan kasus serupa lainnya. </p><br><p>  Dalam kasus kedua, pola <strong>var</strong> diterapkan ke masing-masing <strong>X</strong> dan <strong>Y.</strong>  Ingat bahwa pola <strong>var</strong> di C # 7.0 selalu berhasil dan cukup mendeklarasikan variabel baru untuk menyimpan nilai.  Jadi <strong>x</strong> dan <strong>y</strong> berisi nilai int untuk <strong>pX</strong> dan <strong>pY</strong> . </p><br><p>  Kami tidak pernah menggunakan <strong>p</strong> dan benar-benar dapat melewatkannya di sini: </p><br><pre> <code class="cs hljs"> Point { X: <span class="hljs-number"><span class="hljs-number">0</span></span>, Y: <span class="hljs-number"><span class="hljs-number">0</span></span> } =&gt; <span class="hljs-string"><span class="hljs-string">"origin"</span></span>, Point { X: <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x, Y: <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y } =&gt; <span class="hljs-string"><span class="hljs-string">$"(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{x}</span></span></span><span class="hljs-string">, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{y}</span></span></span><span class="hljs-string">)"</span></span>, _ =&gt; <span class="hljs-string"><span class="hljs-string">"unknown"</span></span></code> </pre> <br><p>  Satu hal yang tetap sama untuk semua jenis pola, termasuk pola properti, ini adalah persyaratan bahwa nilainya tidak nol.  Ini membuka kemungkinan untuk menggunakan pola "kosong" <strong>{}</strong> pola sebagai pola "non-nol" kompak.  Sebagai contoh.  kita bisa mengganti fallback dengan dua kasus berikut: </p><br><pre> <code class="cs hljs"> {} =&gt; o.ToString(), <span class="hljs-literal"><span class="hljs-literal">null</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"null"</span></span></code> </pre> <br><p>  <strong>{}</strong> Berurusan dengan objek non-nol yang tersisa, dan <strong>nol</strong> mendapat nol, sehingga sakelar ini lengkap, dan kompiler tidak akan mengeluh tentang nilai yang hilang. </p><br><h2></h2><p>  Pola posisi </p><br><p>  Pola properti tidak memperpendek kasus <strong>Poin</strong> kedua <strong>.</strong>  Tidak perlu khawatir tentang ini, Anda dapat melakukan lebih banyak lagi. </p><br><p>  Perhatikan bahwa kelas <strong>Point</strong> memiliki metode <strong>Dekonstruksi</strong> , yang disebut dekonstruktor.  Dalam C # 7.0, dekonstruktur memungkinkan Anda untuk "mendekonstruksi" nilai ketika ditugaskan, sehingga Anda dapat menulis, misalnya: </p><br><pre> <code class="cs hljs">(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y) = GetPoint(); <span class="hljs-comment"><span class="hljs-comment">// split up the Point according to its deconstructor</span></span></code> </pre> <br><p>  C # 7.0 tidak mengintegrasikan dekonstruksi dengan pola.  Ini berubah dengan pola posisi, yang merupakan cara tambahan untuk memperluas jenis pola di C # 8.0.  Jika jenis yang cocok adalah tipe tuple atau memiliki dekonstruktor, kita dapat menggunakan pola posisi sebagai cara ringkas untuk menerapkan pola rekursif tanpa harus menyebutkan properti: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Display</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> o</span></span></span><span class="hljs-function">)</span></span> =&gt; o <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> { Point(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) =&gt; <span class="hljs-string"><span class="hljs-string">"origin"</span></span>, Point(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x, <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y) =&gt; <span class="hljs-string"><span class="hljs-string">$"(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{x}</span></span></span><span class="hljs-string">, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{y}</span></span></span><span class="hljs-string">)"</span></span>, _ =&gt; <span class="hljs-string"><span class="hljs-string">"unknown"</span></span> };</code> </pre> <br><p>  Setelah mencocokkan objek dengan <strong>Point</strong> , dekonstruktor diterapkan, dan pola bersarang diterapkan ke nilai yang dihasilkan. </p><br><p>  Dekonstruksi tidak selalu tepat.  Mereka harus ditambahkan hanya pada tipe-tipe yang benar-benar jelas nilainya.  Misalnya, untuk kelas <strong>Point</strong> , Anda dapat mengasumsikan bahwa nilai pertama adalah <strong>X</strong> dan yang kedua adalah <strong>Y</strong> , sehingga ekspresi switch di atas jelas dan mudah dibaca. </p><br><h2></h2><p>  Pola Tuple </p><br><p>  Kasus khusus pola pola posisi yang sangat berguna adalah aplikasi mereka untuk tupel.  Jika pernyataan sakelar diterapkan langsung ke ekspresi tupel, kami bahkan mengizinkan untuk menghilangkan set kurung tambahan, seperti pada <strong>sakelar (x, y, z)</strong> alih-alih <strong>sakelar ((x, y, z))</strong> . </p><br><p>  Pola Tuple bagus untuk menguji beberapa input sekaligus.  Berikut ini adalah implementasi sederhana dari mesin negara: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> State </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeState</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">State current, Transition transition, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hasKey</span></span></span><span class="hljs-function">)</span></span> =&gt; (current, transition) <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> { (Opened, Close) =&gt; Closed, (Closed, Open) =&gt; Opened, (Closed, Lock) when hasKey =&gt; Locked, (Locked, Unlock) when hasKey =&gt; Closed, _ =&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidOperationException(<span class="hljs-string"><span class="hljs-string">$"Invalid transition"</span></span>) };</code> </pre> <br><p>  Tentu saja, kita dapat memasukkan <strong>hasKey</strong> dalam tuple daripada menggunakan <strong>ketika</strong> klausa - ini adalah masalah selera: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> State </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeState</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">State current, Transition transition, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hasKey</span></span></span><span class="hljs-function">)</span></span> =&gt; (current, transition, hasKey) <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> { (Opened, Close, _) =&gt; Closed, (Closed, Open, _) =&gt; Opened, (Closed, Lock, <span class="hljs-literal"><span class="hljs-literal">true</span></span>) =&gt; Locked, (Locked, Unlock, <span class="hljs-literal"><span class="hljs-literal">true</span></span>) =&gt; Closed, _ =&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidOperationException(<span class="hljs-string"><span class="hljs-string">$"Invalid transition"</span></span>) };</code> </pre> <br><p>  Secara umum, Anda melihat bahwa pola rekursif dan beralih ekspresi dapat mengarah pada logika program yang lebih jelas dan deklaratif. </p><br><h2></h2><p>  Fitur lain dari C # 8.0 di Pratinjau 2 </p><br><p>  Terlepas dari kenyataan bahwa dalam VS 2019 Pratinjau 2 fungsi utama untuk bekerja dengan pola adalah yang paling penting, ada beberapa yang lebih kecil yang, saya harap, Anda juga akan menemukan yang berguna dan menarik.  Saya tidak akan merinci, cukup berikan deskripsi singkat masing-masing. </p><br><h4></h4><p>  Menggunakan Iklan </p><br><p>  Dalam <strong>menggunakan</strong> C # <strong>,</strong> operator selalu meningkatkan tingkat sarang, yang bisa sangat mengganggu dan mudah dibaca.  Dalam kasus sederhana, ketika Anda hanya perlu menghapus sumber daya di akhir cakupan, gunakan deklarasi yang digunakan.  Menggunakan deklarasi hanyalah deklarasi variabel lokal dengan <strong>menggunakan</strong> kata kunci di depannya, dan isinya ditempatkan di akhir blok instruksi saat ini.  Karena itu, alih-alih: </p><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> options = Parse(args)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (options[<span class="hljs-string"><span class="hljs-string">"verbose"</span></span>]) { WriteLine(<span class="hljs-string"><span class="hljs-string">"Logging..."</span></span>); } ... } <span class="hljs-comment"><span class="hljs-comment">// options disposed here }</span></span></code> </pre> <br><p>  Anda bisa menulis </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> options = Parse(args); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (options[<span class="hljs-string"><span class="hljs-string">"verbose"</span></span>]) { WriteLine(<span class="hljs-string"><span class="hljs-string">"Logging..."</span></span>); } } <span class="hljs-comment"><span class="hljs-comment">// options disposed here</span></span></code> </pre> <br><h4></h4><p>  Struct ref sekali pakai </p><br><p>  Referensi struct diperkenalkan di C # 7.2, dan tampaknya tidak ada tempat untuk mengulanginya di sini.  Tapi tetap saja, ada baiknya diperhatikan sesuatu: mereka memiliki beberapa keterbatasan, seperti ketidakmungkinan mengimplementasikan antarmuka.  Struct Ref sekarang dapat digunakan tanpa mengimplementasikan antarmuka <strong>IDisposable</strong> , cukup menggunakan metode <strong>Buang</strong> di dalamnya. </p><br><h4></h4><p>  Fungsi lokal statis </p><br><p>  Jika Anda ingin memastikan bahwa fungsi lokal Anda tidak menimbulkan biaya runtime yang terkait dengan variabel "menangkap" (referensi) dari ruang lingkup, Anda dapat mendeklarasikannya sebagai statis.  Maka kompiler akan mencegah tautan ke segala sesuatu yang dideklarasikan dalam fungsi terlampir - kecuali untuk fungsi lokal statis lainnya! </p><br><h4></h4><p>  Perubahan dari Pratinjau 1 </p><br><p>  Fungsi utama dari Pratinjau 1 adalah jenis referensi yang dapat dibatalkan dan aliran asinkron.  Kedua fitur telah sedikit berubah di Pratinjau 2, jadi jika Anda mulai menggunakannya, ada baiknya untuk mengetahui hal berikut. </p><br><h4></h4><p>  Jenis Referensi yang Tidak Dapat Diabaikan </p><br><p>  Kami telah menambahkan lebih banyak opsi untuk mengelola peringatan yang dapat <strong>dibatalkan</strong> baik di sumbernya (melalui <strong>arahan #nullable</strong> dan <strong>#pragma warning</strong> ) dan di tingkat proyek.  Kami juga mengubah langganan ke file proyek ke <strong>&lt;NullableContextOptions&gt; aktifkan &lt;/ NullableContextOptions&gt;</strong> . </p><br><h4></h4><p>  Utas asinkron </p><br><p>  Kami mengubah bentuk antarmuka <strong>IAsyncEnumerable &lt;T&gt; yang diharapkan oleh</strong> kompiler.  Ini mengarah pada fakta bahwa kompiler tidak disinkronkan dengan antarmuka yang disediakan di .NET Core 3.0 Preview 1, yang dapat menyebabkan beberapa masalah.  Namun, .NET Core 3.0 Preview 2 akan segera dirilis dan ini akan mengembalikan sinkronisasi. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id440530/">https://habr.com/ru/post/id440530/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id440520/index.html">Cara mendapatkan Sertifikasi Google Developers: Spesialis Web Seluler</a></li>
<li><a href="../id440522/index.html">Pengalaman dalam mengimplementasikan PBX virtual. Komunikasi dan perangkat lunak dalam keranjang yang berbeda</a></li>
<li><a href="../id440524/index.html">Timpa atau reduksi Level 80: jalur dari sakelar ke kelas</a></li>
<li><a href="../id440526/index.html">Kota Jepang beralih ke teknologi digital setelah salju lebat melanda</a></li>
<li><a href="../id440528/index.html">“Tunjukkan sepatu Anda dan saya akan memberi tahu Anda siapa Anda”: ​​podcast baru pada proyek media tematik</a></li>
<li><a href="../id440534/index.html">Terjemahan dari kosa kata yang benar secara politis dari bahasa Inggris ke bahasa Rusia</a></li>
<li><a href="../id440536/index.html">Bagaimana Facebook Project Infer membantu menemukan bug dalam aplikasi seluler sebelum penyebaran</a></li>
<li><a href="../id440540/index.html">Kapitalisasi Reddit mencapai $ 3 miliar setelah menarik investasi $ 300 juta</a></li>
<li><a href="../id440542/index.html">Vuex - penggunaan berlebihan getter dalam aplikasi. Kesalahan saat menguraikan</a></li>
<li><a href="../id440544/index.html">Rilis eksperimental Blazor 0.8.0 sekarang tersedia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>