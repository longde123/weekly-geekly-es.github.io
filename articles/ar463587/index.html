<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ๏ธ ๐ ๐ฆ๐ฝ ConfigureAwait ุ ุนูู ูู ููุน ุงูููู ููุงุฐุง ููุนูุ ๐ ๐ค โจ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ููุงุฑุณุชู ุ ุบุงูุจูุง ูุง ุฃุฌุฏ ุ ูู ุจูุฆุฉ ูุฎุชููุฉ ุ ุฑูุฒูุง ูุซู ุงูุฑูุฒ ุฃุฏูุงู: 


[1] var x = FooWithResultAsync(/*...*/).Result; // [2] FooAsync(/*...*/).Wait(...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ConfigureAwait ุ ุนูู ูู ููุน ุงูููู ููุงุฐุง ููุนูุ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/clrium/blog/463587/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูู ููุงุฑุณุชู ุ ุบุงูุจูุง ูุง ุฃุฌุฏ ุ ูู ุจูุฆุฉ <em>ูุฎุชููุฉ</em> ุ ุฑูุฒูุง ูุซู ุงูุฑูุฒ ุฃุฏูุงู: </p><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">[1] var x = FooWithResultAsync(/*...*/).Result; // [2] FooAsync(/*...*/).Wait(); // [3] FooAsync(/*...*/).GetAwaiter().GetResult(); // [4] FooAsync(/*...*/) .ConfigureAwait(false) .GetAwaiter() .GetResult(); // [5] await FooAsync(/*...*/).ConfigureAwait(false) //  [6] await FooAsync(/*...*/)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงูุชูุงุตู ูุน ูุคููู ูุฐู ุงูุฎุทูุท ุ ุฃุตุจุญ ูู ุงููุงุถุญ ุฃููู ูููุณููู ุฅูู ุซูุงุซ ูุฌููุนุงุช: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุฌููุนุฉ ุงูุฃููู ูู ุฃููุฆู ุงูุฐูู ูุง ูุนุฑููู ุดูุฆูุง ุนู ุงููุดุงูู ุงููุญุชููุฉ ุนูุฏ ุงุณุชุฏุนุงุก <code>Result/Wait/GetResult</code> .  ุงูุฃูุซูุฉ (1-3) ูุฃุญูุงููุง (6) ูููุฐุฌูุฉ ูููุจุฑูุฌูู ูู ูุฐู ุงููุฌููุนุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุชุชุถูู ุงููุฌููุนุฉ ุงูุซุงููุฉ ูุจุฑูุฌูู ูุฏุฑููู ูููุดุงูู ุงููุญุชููุฉ ุ ููููู ูุง ูุนุฑููู ุฃุณุจุงุจ ุญุฏูุซูุง.  ูุญุงูู ุงููุทูุฑูู ูู ูุฐู ุงููุฌููุนุฉ ุ ูู ูุงุญูุฉ ุ ุชุฌูุจ ุฎุทูุท ูุซู (1-3 ู 6) ุ ูููู ุ ูู ูุงุญูุฉ ุฃุฎุฑู ุ ุฑูุฒ ุงูุฅุณุงุกุฉ ูุซู (4-5) ุ </li><li style=";text-align:right;direction:rtl">  ุงููุฌููุนุฉ ุงูุซุงูุซุฉ ุ ูู ุชุฌุฑุจุชู ุงูุฃุตุบุฑ ุ ูู ุฃููุฆู ุงููุจุฑูุฌูู ุงูุฐูู ูุนุฑููู ููููุฉ ุนูู ุงูููุฏ (1-6) ุ ูุจุงูุชุงูู ูููููู ุงุชุฎุงุฐ ูุฑุงุฑ ูุณุชููุฑ. </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ุงูุฎุทุฑ ูููู ุ ููู ูู ูุจูุฑ ุ ุนูุฏ ุงุณุชุฎุฏุงู ุงูููุฏ ุ ููุง ูู ุงูุฃูุซูุฉ ุฃุนูุงู ุ ูุนุชูุฏ ุ ููุง ุฃุดุฑุช ุณุงุจููุง ุ ุนูู <em>ุงูุจูุฆุฉ</em> . </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/j6/dr/vl/j6drvl4thcu_8wzj5t7qe8o0oew.jpeg"></p><a name="habracut"></a><br><h2 id="riski-i-ih-prichiny" style=";text-align:right;direction:rtl">  ุงููุฎุงุทุฑ ูุฃุณุจุงุจูุง </h2><br><p style=";text-align:right;direction:rtl">  ุชููุณู ุงูุฃูุซูุฉ (1-6) ุฅูู ูุฌููุนุชูู.  ุงููุฌููุนุฉ ุงูุฃููู ูู ุฑูุฒ ูููุน ุณูุณูุฉ ุงูุงุณุชุฏุนุงุก.  ูุฐู ุงููุฌููุนุฉ ุชุถู (1-4). <br>  ุบุงูุจูุง ูุง ูููู ุญุธุฑ ุณูุณูุฉ ุงูุฑุณุงุฆู ููุฑุฉ ุณูุฆุฉ.  ููุงุฐุงุ  ูู ุฃุฌู ุงูุจุณุงุทุฉ ุ ููุชุฑุถ ุฃู ุฌููุน ุณูุงุณู ุงูุนูููุงุช ูุฏ ุชู ุชุฎุตูุตูุง ูู ูุฌููุนุฉ ูุคุดุฑุงุช ุงูุชุฑุงุจุท.  ุฅุฐุง ูุงู ุงูุจุฑูุงูุฌ ูุฏูู ููู ุ ูุฅู ูุฐุง ูููู ุฃู ูุคุฏู ุฅูู ุงุฎุชูุงุฑ ุฌููุน ุงูููุงุถูุน ูู ุงูุชุฌูุน.  ูู ุฃูุถู ุงูุฃุญูุงู ุ ุณูุคุฏู ุฐูู ุฅูู ุฅุจุทุงุก ุงูุจุฑูุงูุฌ ููุคุฏู ุฅูู ุงุณุชุฎุฏุงู ุบูุฑ ูุนุงู ููููุงุฑุฏ.  ูู ุฃุณูุฃ ุงูุญุงูุงุช ุ ูููู ุฃู ูุคุฏู ูุฐุง ุฅูู ุญุงูุฉ ุชููู ุชุงู ุ ุนูุฏูุง ุชููู ููุงู ุญุงุฌุฉ ุฅูู ูุคุดุฑ ุชุฑุงุจุท ุฅุถุงูู ูุฅููุงู ุจุนุถ ุงูููุงู ุ ูููู ูุชุนุฐุฑ ุนูู ุงูุชุฌูุน ุชุฎุตูุตูุง. <br>  ูุจุงูุชุงูู ุ ุนูุฏูุง ููุชุจ ุงููุทูุฑ ุฑูุฒูุง ูุซู (1-4) ุ ูุฌุจ ุฃู ูููุฑ ูู ูุฏู ุงุญุชูุงู ุงููููู ุงูููุตูู ุฃุนูุงู. </p><br><p style=";text-align:right;direction:rtl">  ููู ุงูุฃููุฑ ุชุฒุฏุงุฏ ุณูุกูุง ุนูุฏูุง ูุนูู ูู ุจูุฆุฉ ูููู ูููุง ุณูุงู ุงูุชุฒุงูู ูุฎุชูููุง ุนู ุงููุนูุงุฑ.  ุฅุฐุง ูุงู ููุงู ุณูุงู ูุฒุงููุฉ <em>ุฎุงุต</em> ุ ูุฅู ุญุธุฑ ูุคุดุฑ ุชุฑุงุจุท ุงูุงุณุชุฏุนุงุก ูุฒูุฏ ูู ุงุญุชูุงู ุญุฏูุซ ุญุงูุฉ ุชููู ุชุงู ุนุฏุฉ ูุฑุงุช.  ูุฐูู ุ ูุชู ุถูุงู ุฑูุฒ ูู ุงูุฃูุซูุฉ (1-3) ุ ุฅุฐุง ุชู ุชูููุฐู ูู ูุคุดุฑ ุชุฑุงุจุท ูุงุฌูุฉ ุงููุณุชุฎุฏู WinForms ุ ูุฅูุดุงุก ุญุงูุฉ ุชููู ุชุงู.  ุฃูุง ุฃูุชุจ "ุนูููุง" ู  ููุงู ุฎูุงุฑ ุนูุฏูุง ูุง ูููู ุงูุฃูุฑ ูุฐูู ุ ูููู ุงููุฒูุฏ ุนู ุฐูู ูุงุญููุง.  ุฅู ุฅุถุงูุฉ <code>ConfigureAwait(false)</code> ุ ููุง ูู (4) ุ ูู ูููุฑ ุถูุงููุง ุจูุณุจุฉ 100ูช ููุญูุงูุฉ ูู ุญุงูุฉ ุชููู ุชุงู.  ูููุง ููู ูุซุงู ูุชุฃููุฏ ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[7] //   /  . async Task FooAsync() { // Delay   .     . await Task.Delay(5000); //       RestPartOfMethodCode(); } //  ""  ,   ,  WinForms . private void button1_Click(object sender, EventArgs e) { FooAsync() .ConfigureAwait(false) .GetAwaiter() .GetResult(); button1.Text = "new text"; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชููุฑ ุงูููุงูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุงูุญูุณุจุฉ ุงููุชูุงุฒูุฉ - ูู ุดูุก ุนู SynchronizationContext"</a> ูุนูููุงุช ุญูู ุณูุงูุงุช ุงูุชุฒุงูู ุงููุฎุชููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุณุจุจ ุญุงูุฉ ุชููู ุชุงู ุ ุชุญุชุงุฌ ุฅูู ุชุญููู ุฑูุฒ ุฌูุงุฒ ุงูุญุงูุฉ ุงูุฐู ูุชู ุชุญููู ุงูุงุณุชุฏุนุงุก ุฅูู ุทุฑููุฉ ุงููุฒุงููุฉ ููู ุ ุซู ุฑูุฒ ูุฆุงุช MS.  ุชููุฑ ููุงูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Async Await ู Generated StateMachine</a> ูุซุงููุง ุนูู ูุซู ูุฐู ุงูุญุงูุฉ. <br>  ูู ุฃุนุทู ุงูุดูุฑุฉ ุงููุตุฏุฑูุฉ ุงููุงููุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุนูู ุณุจูู ุงููุซุงู (7) ุ ุงูุฃูุชููุงุชูู ุ ุณุฃุนุฑุถ ููุท ุงูุฎุทูุท ุงููููุฉ ููุฒูุฏ ูู ุงูุชุญููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">//  MoveNext. //... //  taskAwaiter    . taskAwaiter = Task.Delay(5000).GetAwaiter(); if(tasAwaiter.IsCompleted != true) { _awaiter = taskAwaiter; _nextState = ...; _builder.AwaitUnsafeOnCompleted&lt;TaskAwaiter, ThisStateMachine&gt;(ref taskAwaiter, ref this); return; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุชูููุฐ ุงููุฑุน if ุฅุฐุง ูู ูุชู ุฅููุงู ุงูุงุณุชุฏุนุงุก ุบูุฑ ุงููุชุฒุงูู ( <code>Delay</code> ) ูุจุงูุชุงูู ุ ูููู ุชุญุฑูุฑ ุณูุณูุฉ ุงูุฑุณุงุฆู ุงูุญุงููุฉ. <br>  ูุฑุฌู ููุงุญุธุฉ ุฃูู ูู <code>AwaitUnsafeOnCompleted</code> ุ ูุชู ุงุณุชูุงู <code>FooAsync</code> ููุงููุฉ ุบูุฑ ูุชุฒุงููุฉ <strong>ุฏุงุฎููุฉ</strong> (ูุณุจุฉ ุฅูู <code>FooAsync</code> ) ( <code>Delay</code> ). </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง <code>AwaitUnsafeOnCompleted</code> ูู ุบุงุจุฉ ูุตุงุฏุฑ MS ุงููุฎููุฉ ูุฑุงุก ุงุณุชุฏุนุงุก <code>AwaitUnsafeOnCompleted</code> ุ ุซู ุ ูู ุงูููุงูุฉ ุ <code>AwaitUnsafeOnCompleted</code> ุฅูู ูุฆุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">SynchronizationContextAwaitTaskContinuation</a> ุ ููุฆุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">AwaitTaskContinuation ุงูุฎุงุตุฉ ุจู</a> ุ ุญูุซ ุชูุฌุฏ ุงูุฅุฌุงุจุฉ ุนูู ุงูุณุคุงู. </p><br><p style=";text-align:right;direction:rtl">  ุฑูุฒ ูุฐู ุงููุฆุงุช ูุงููุฆุงุช ุฐุงุช ุงูุตูุฉ ูุฑุจูุฉ ุฅูู ุญุฏ ูุง ุ ูุจุงูุชุงูู ุ ูุชุณููู ุงูุฅุฏุฑุงู ุ ุฃุณูุญ ูููุณู ุจูุชุงุจุฉ "ุชูุงุธุฑูุฉ" ูุจุณุทุฉ ุฌุฏูุง ููุง ูุชุญูู ุฅููู ุงููุซุงู (7) ุ ูููู ุจุฏูู ุฌูุงุฒ ุฏููุฉ ุ ููููุง ูุชุนูู ุจู TPL: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[8] Task FooAsync() { //  methodCompleted    ,  , //    ,     " ". //    ,   methodCompleted.WaitOne()  , //   SetResult  AsyncTaskMethodBuilder, //       . var methodCompleted = new AutoResetEvent(false); SynchronizationContext current = SynchronizationContext.Current; return Task.Delay(5000).ContinueWith( t=&gt; { if(current == null) { RestPartOfMethodCode(methodCompleted); } else { current.Post(state=&gt;RestPartOfMethodCode(methodCompleted), null); methodCompleted.WaitOne(); } }, TaskScheduler.Current); } // // void RestPartOfMethodCode(AutoResetEvent methodCompleted) // { //      FooAsync. // methodCompleted.Set(); // }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุซุงู (8) ุ ูู ุงูููู ุงูุงูุชุจุงู ุฅูู ุญูููุฉ ุฃูู ูู ุญุงูุฉ ูุฌูุฏ ุณูุงู ุงูุชุฒุงูู ุ ูุชู ุชูููุฐ ุฌููุน ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจุงูุทุฑููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุงูุชู ุชุฃุชู ุจุนุฏ ุฅุชูุงู ุงูุงุณุชุฏุนุงุก ุงูุฏุงุฎูู ุบูุฑ ุงููุชุฒุงูู ูู <strong>ุฎูุงู ูุฐุง ุงูุณูุงู</strong> (ุงุณุชุฏุนุงุก <code>current.Post(...)</code> ).  ูุฐู ุงูุญูููุฉ <strong>ูู ุณุจุจ</strong> ุงูุฌููุฏ.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุง ูุชุญุฏุซ ุนู ุชุทุจูู WinForms ุ ูุฅู ุณูุงู ุงููุฒุงููุฉ ููู ูุฑุชุจุท ุจุฏูู ูุงุฌูุฉ ุงููุณุชุฎุฏู.  ุฅุฐุง ุชู ุญุธุฑ ูุคุดุฑ ุชุฑุงุจุท ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ูู ุงููุซุงู (7) ูุญุฏุซ ุฐูู ูู ุฎูุงู ุงุณุชุฏุนุงุก <code>.GetResult()</code> ุ ููุง ูููู ุชูููุฐ ุจุงูู ููุฏ ุงูุทุฑููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุ ููุง ูุนูู ุฃูู ูุง ูููู ุฅููุงู ุงูุทุฑููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุ ููุง ูููู ุชุญุฑูุฑ ูุคุดุฑ ุชุฑุงุจุท ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ููู ุทุฑูู ูุณุฏูุฏ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุซุงู (7) ุ ุชู ุชูููู ุงุณุชุฏุนุงุก <code>FooAsync</code> ุนุจุฑ <code>ConfigureAwait(false)</code> ุ ููู ูุฐุง ูู ูุณุงุนุฏ.  ุงูุญูููุฉ ูู ุฃูู ุชุญุชุงุฌ ุฅูู ุชูููู ูุงุฆู ุงูุงูุชุธุงุฑ ุงูุฐู ุณูุชู ุชูุฑูุฑู ุฅูู <code>AwaitUnsafeOnCompleted</code> ุ ูู ูุซุงููุง ุ ูุฐุง ูู ูุงุฆู ุงูุงูุชุธุงุฑ ูู ุงุณุชุฏุนุงุก <code>Delay</code> .  ุจูุนูู ุขุฎุฑ ุ ูู ูุฐู ุงูุญุงูุฉ ุ ุงุณุชุฏุนุงุก <code>ConfigureAwait(false)</code> ูู ุฑูุฒ ุงูุนููู ุบูุฑ ููุทูู.  ููููู ุญู ุงููุดููุฉ ุฅุฐุง ูุงู ูุทูุฑ ุฃุณููุจ <code>FooAsync</code> ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[9] async Task FooAsync() { await Task.Delay(5000).ConfigureAwait(false); //       RestPartOfMethodCode(); } private void button1_Click(object sender, EventArgs e) { FooAsync().GetAwaiter().GetResult(); button1.Text = "new text"; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃุนูุงู ุ ูููุง ุจูุญุต ุงููุฎุงุทุฑ ุงูุชู ุชูุดุฃ ูุน ุฑูุฒ ุงููุฌููุนุฉ ุงูุฃููู - ุงูููุฏ ูุน ุงูุญุธุฑ (ุงูุฃูุซูุฉ 1-4).  ุงูุขู ุนู ุงููุฌููุนุฉ ุงูุซุงููุฉ (ุงููุซุงูุงู 5 ู 6) - ุฑูุฒ ุจุฏูู ุฃููุงู.  ูู ูุฐู ุงูุญุงูุฉ ุ ูููู ุงูุณุคุงู ูู: ูุชู ูุชู ุชุจุฑูุฑ ุงูุฏุนูุฉ ุฅูู <code>ConfigureAwait(false)</code> ุ  ุนูุฏ ุชุญููู ุงููุซุงู (7) ุ ุงูุชุดููุง ุจุงููุนู ุฃููุง ุจุญุงุฌุฉ ุฅูู ุชูููู ูุงุฆู ุงูุงูุชุธุงุฑ ุงูุฐู ุณูุชู ุจูุงุก ุนููู ุงุณุชูุฑุงุฑ ุงูุชูููุฐ.  ุฃู  ุงูุชูููู ูุทููุจ (ุฅุฐุง ุงุชุฎุฐุช ูุฐุง ุงููุฑุงุฑ) ููุท ููููุงููุงุช ุบูุฑ ุงููุชุฒุงููุฉ <strong>ุงูุฏุงุฎููุฉ</strong> . </p><br><h2 id="kto-vinovat" style=";text-align:right;direction:rtl">  ุนูู ูู ููุน ุงููููุ </h2><br><p style=";text-align:right;direction:rtl">  ููุง ูู ุงูุญุงู ุฏุงุฆููุง ุ ูุฅู ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูู "ูู ุดูุก".  ููุจุฏุฃ ูุน ุงููุจุฑูุฌูู ูู MS.  ูู ูุงุญูุฉ ุ ูุฑุฑ ูุทูุฑู Microsoft ุฃูู ูู ุญุงูุฉ ูุฌูุฏ ุณูุงู ุงูุชุฒุงูู ุ ูุฌุจ ุชูููุฐ ุงูุนูู ูู ุฎูุงูู.  ููุฐุง ููุทูู ุ ูุฅูุง ููุงุฐุง ูุง ุชุฒุงู ููุงู ุญุงุฌุฉ ุฅููู.  ูููุง ุฃุนุชูุฏ ุ ุชููุนูุง ุฃูุง ูููู ูุทูุฑู ุฑูุฒ "ุงูุนููู" ุจููุน ุงูุฎูุท ุงูุฑุฆูุณู ุ ุฎุงุตุฉู ุฅุฐุง ูุงู ุณูุงู ุงูุชุฒุงูู ูุฑุชุจุทูุง ุจู.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ุฃุนุทูุง ุฃุฏุงุฉ ุจุณูุทุฉ ุฌุฏูุง "ูุฅุทูุงู ุงููุงุฑ ุนูู ูุฏูู" - ุฅููุง ุจุณูุทุฉ ููุฑูุญุฉ ููุบุงูุฉ ููุญุตูู ุนูู ุงููุชูุฌุฉ ูู ุฎูุงู ุงูุญุธุฑ <code>.Result/.GetResult</code> ุ ุฃู ุญุธุฑ ุงูุฏูู ุ ูู ุงูุชุธุงุฑ ุงูุชูุงุก ุงูููุงููุฉ ุ ูู ุฎูุงู <code>.Wait</code> .  ุฃู  ุฌุนู ูุทูุฑู MS ูู ุงููููู ุฃู ุงูุงุณุชุฎุฏุงู "ุงูุฎุงุทุฆ" (ุฃู ุงูุฎุทูุฑ) ูููุชุจุงุชูู ูุง ูุณุจุจ ุฃู ุตุนูุจุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูููู ููุงู ุฃูุถุง ุงูููู ุนูู ูุทูุฑู ููุฏ "ุงูุนููู".  ูุชููู ุฐูู ูู ุญูููุฉ ุฃู ุงููุทูุฑูู ูุง ูุญุงูููู ูู ุฃุบูุจ ุงูุฃุญูุงู ููู ุฃุฏุงุชูู ูุฅููุงู ุงูุชุญุฐูุฑุงุช.  ููุฐุง ุทุฑูู ูุจุงุดุฑ ููุฃุฎุทุงุก. </p><br><h2 id="chto-delat" style=";text-align:right;direction:rtl">  ูุง ูุฌุจ ุงูููุงู ุจู </h2><br><p style=";text-align:right;direction:rtl">  ุฃุฏูุงู ุฃุนุทู ุชูุตูุงุชู. </p><br><h3 id="dlya-razrabotchikov-klientskogo-koda" style=";text-align:right;direction:rtl">  ููุทูุฑู ููุฏ ุงูุนููู </h3><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุฐู ูุตุงุฑู ุฌูุฏู ูุชุฌูุจ ุงูุญุฌุจ.  ุจูุนูู ุขุฎุฑ ุ ูุง ุชุฎูุท ุงูููุฏ ุงููุชุฒุงูู ูุบูุฑ ุงููุชุฒุงูู ุฏูู ุงูุญุงุฌุฉ ุงูุฎุงุตุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ุนููู ุงูููุงู ุจููู ุ ูุนููู ุชุญุฏูุฏ ุงูุจูุฆุฉ ุงูุชู ูุชู ูููุง ุชูููุฐ ุงูุฑูุฒ: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ููุฌุฏ ุณูุงู ุงูุชุฒุงููุ  ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ุฃู ูุงุญุฏุ  ูุง ูู ุงูููุฒุงุช ุงูุชู ูุฎูููุง ูู ุนูููุ </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ููู ููุงู ุณูุงู ุงูุชุฒุงูู ุ ุซู: ูุงุฐุง ุณูููู ุงูุญููุ  ูุง ูู ุงุญุชูุงู ุฃู ุชุคุฏู ูุชูุฉ ุงูุฎุงุต ุจู ุฅูู "ุชุณุฑุจ" ูู ุงูููุงุถูุน ูู ุงูุชุฌูุนุ  ูู ุณูููู ุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุงูุจุฏุงูุฉ ูุงููุงู ุจุดูู ุงูุชุฑุงุถู ุ ุฃู ูู ููุจุบู ุนูู ุชุฎุตูุต ุงููุฒูุฏุ </li></ul></li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ุงูุดูุฑุฉ ุบูุฑ ูุชุฒุงููุฉ ุ ููู ุชุญุชุงุฌ ุฅูู ุชูููู ุงูุงุชุตุงู ุบูุฑ ุงููุชุฒุงูู ูู ุฎูุงู <code>ConfigureAwait</code> ุ </li></ol><br><p style=";text-align:right;direction:rtl">  ุงุชุฎุงุฐ ูุฑุงุฑ ุจูุงุก ุนูู ุฌููุน ุงููุนูููุงุช ุงููุงุฑุฏุฉ.  ูุฏ ุชุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ุงูุชูููุฑ ูู ููุฌ ุงูุชูููุฐ ุงูุฎุงุต ุจู.  ุฑุจูุง ุณูู ูุณุงุนุฏู <code>ConfigureAwait</code> ุ ุฃู ุฑุจูุง ูุง ุชุญุชุงุฌูุง. </p><br><h3 id="dlya-razrabotchikov-bibliotek" style=";text-align:right;direction:rtl">  ููุทูุฑู ุงูููุชุจุฉ </h3><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุนุชูุฏ ุฃูู ูููู ุงุณุชุฏุนุงุก ุงูุดูุฑุฉ ุงูุฎุงุตุฉ ุจู ูู "ูุชุฒุงูู" ุ ูุชุฃูุฏ ูู ุชุทุจูู API ูุชุฒุงูู.  ูุฌุจ ุฃู ูููู ูุชุฒุงูููุง ุญููุง ุ ุฃู  ูุฌุจ ุนููู ุงุณุชุฎุฏุงู API ุงููุชุฒุงูู ูููุชุจุงุช ุงูุฌูุงุช ุงูุฎุงุฑุฌูุฉ. </li><li style=";text-align:right;direction:rtl">  <code>ConfigureAwait(true / false)</code> . </li></ol><br><p style=";text-align:right;direction:rtl">  ููุง ุ ูู ูุฌูุฉ ูุธุฑู ุ ููุงู ุญุงุฌุฉ ุฅูู ููุฌ ุฃูุซุฑ ุฏูุฉ ูู ุงูููุตู ุจู ุนุงุฏุฉ.  ุชููู ุงูุนุฏูุฏ ูู ุงูููุงูุงุช ุฃูู ูู ุฑูุฒ ุงูููุชุจุฉ ุ ูุฌุจ ุชูููู ุฌููุน ุงูููุงููุงุช ุบูุฑ ุงููุชุฒุงููุฉ ูู ุฎูุงู <code>ConfigureAwait(false)</code> .  ูุง ุฃุณุชุทูุน ุฃู ุฃุชูู ูุน ุฐูู.  ุฑุจูุง ุ ูู ูุฌูุฉ ูุธุฑ ุงููุคูููู ุ ุงุชุฎุฐ ุฒููุงุก ูู Microsoft ุงููุฑุงุฑ ุงูุฎุทุฃ ุนูุฏ ุงุฎุชูุงุฑ ุงูุณููู "ุงูุงูุชุฑุงุถู" ูููุง ูุชุนูู ุจุงูุนูู ูุน ุณูุงู ุงูุชุฒุงูู.  ููููู (MS) ุ ูุน ุฐูู ุ ุชุฑููุง ุงููุฑุตุฉ ููุทูุฑู ููุฏ "ุงูุนููู" ูุชุบููุฑ ูุฐุง ุงูุณููู.  ุชููู ุงูุฅุณุชุฑุงุชูุฌูุฉ ุ ุนูุฏูุง ูุชู ุชุบุทูุฉ ุฑูุฒ ุงูููุชุจุฉ ุจุงููุงูู ุจูุงุณุทุฉ <code>ConfigureAwait(false)</code> ุ ุจุชุบููุฑ ุงูุณููู ุงูุงูุชุฑุงุถู ุ ูุงูุฃูู ูู ุฐูู ุ ุฃู ูุฐุง ุงูุฃุณููุจ ูุญุฑู ุงููุทูุฑูู ูู ุฑูุฒ "ุงูุนููู" ุงูููุถู. </p><br><p style=";text-align:right;direction:rtl">  ุงูุฎูุงุฑ ุงูุฎุงุต ุจู ูู ุ ุนูุฏ ุชุทุจูู API ุบูุฑ ุงููุชุฒุงูู ุ ุฅุถุงูุฉ ูุนููุชูู ุฅุถุงููุชูู ุฅุถุงููุชูู ุฅูู ูู ุทุฑููุฉ ูู ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช: <code>CancellationToken token</code> and <code>bool continueOnCapturedContext</code> .  ูุชูููุฐ ุงูููุฏ ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">public async Task&lt;string&gt; FooAsync( /*  */, CancellationToken token, bool continueOnCapturedContext) { // ... await Task.Delay(30, token).ConfigureAwait(continueOnCapturedContext); // ... return result; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงููุนููุฉ ุงูุฃููู ุ <code>token</code> ุ ุชุฎุฏู ุ ููุง ุชุนูููู ุ ุฅููุงููุฉ ุงูุฅูุบุงุก ุงูููุณู (ูุทูุฑู ุงูููุชุจุงุช ูููููู ูุฐู ุงูููุฒุฉ ุฃุญูุงููุง).  ุงูุซุงูู ุ <code>continueOnCapturedContext</code> onCapturedContext - ูุณูุญ ูู ุจุชูููู ุงูุชูุงุนู ูุน ุณูุงู ุงูุชุฒุงูู ููููุงููุงุช ุบูุฑ ุงููุชุฒุงููุฉ ุงูุฏุงุฎููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุช ููุณู ุ ุฅุฐุง ูุงูุช ุทุฑููุฉ ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุบูุฑ ุงููุชุฒุงููุฉ ูู ููุณูุง ุฌุฒุก ูู ุทุฑููุฉ ุฃุฎุฑู ุบูุฑ ูุชุฒุงููุฉ ุ ูุณุชุชููู ุดูุฑุฉ "ุงูุนููู" ูู ุชุญุฏูุฏ ููููุฉ ุชูุงุนููุง ูุน ุณูุงู ุงูุชุฒุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">//     : async Task ClientFoo() { // ""  ClientFoo   ,     //   FooAsync   . await FooAsync( /*  */, ancellationToken.None, false); //     . await FooAsync( /*  */, ancellationToken.None, false).ConfigureAwait(false); //... } // ,  . private void button1_Click(object sender, EventArgs e) { FooAsync( /*  */, _source.Token, false).GetAwaiter().GetResult(); button1.Text = "new text"; }</code> </pre> <br><h2 id="v-kachestve-zaklyucheniya" style=";text-align:right;direction:rtl">  ูู ุงูุฎุชุงู </h2><br><p style=";text-align:right;direction:rtl">  ุงูุงุณุชูุชุงุฌ ุงูุฑุฆูุณู ูู ูุง ุชูุฏู ูู ุงูุฃููุงุฑ ุงูุซูุงุซุฉ ุงูุชุงููุฉ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฃููุงู ูู ูู ูุนุธู ุงูุฃุญูุงู ุฃุตู ูู ุงูุดุฑูุฑ.  ุฅูู ูุฌูุฏ ุงูุฃููุงู ุงูุชู ูููู ุฃู ุชุคุฏู ุ ูู ุฃูุถู ุงูุฃุญูุงู ุ ุฅูู ุชุฏููุฑ ุงูุฃุฏุงุก ูุงูุงุณุชุฎุฏุงู ุบูุฑ ุงููุนุงู ููููุงุฑุฏ ุ ูู ุฃุณูุฃ ุงูุฃุญูุงู - ุฅูู ุทุฑูู ูุณุฏูุฏ.  ูุจู ุงุณุชุฎุฏุงู ุงูุฃููุงู ุ ููุฑ ูููุง ุฅุฐุง ูุงู ูุฐุง ุถุฑูุฑููุงุ  ุฑุจูุง ููุงู ุทุฑููุฉ ุฃุฎุฑู ูููุฒุงููุฉ ููุจููุฉ ูู ุญุงูุชู ุ </li><li style=";text-align:right;direction:rtl">  ุชุนูู ุงูุฃุฏุงุฉ ุงูุชู ุชุนูู ุจูุง ุ </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุจุชุตููู ููุชุจุงุช ุ ูุญุงูู ุฃู ุชุชุฃูุฏ ูู ุฃู ุงุณุชุฎุฏุงููุง ุงูุตุญูุญ ุณูู ูุจุฏููู ุ ูุฃู ุงูุงุณุชุฎุฏุงู ุงูุฎุงุทุฆ ูุญููู ุจุงูุชุนููุฏ. </li></ol><br><p style=";text-align:right;direction:rtl">  ุญุงููุช ุฃุจุณุท ูุง ูููู ุฃู ุฃุดุฑุญ ุงููุฎุงุทุฑ ุงููุฑุชุจุทุฉ ุจุงููุชูุงุฒูุฉ / ุงูุงูุชุธุงุฑ ุ ูุฃุณุจุงุจ ุญุฏูุซูุง.  ููุฐูู ุ ูุฏูุช ุฑุคูุชู ูุญู ูุฐู ุงููุดุงูู.  ุขูู ุฃู ุฃููู ูุฏ ูุฌุญุช ุ ูุณูู ุชููู ุงููุงุฏุฉ ูููุฏุฉ ูููุงุฑุฆ.  ูู ุฃุฌู ููู ููููุฉ ุนูู ูู ุดูุก ุจุดูู ุฃูุถู ุ ูุฌุจ ุนููู ุจุงูุทุจุน ุงูุฑุฌูุน ุฅูู ุงููุตุฏุฑ.  ูููู ุงูููุงู ุจุฐูู ูู ุฎูุงู ูุณุชูุฏุนุงุช MS ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GitHub</a> ุฃู ุ ุจุดูู ุฃูุซุฑ ููุงุกูุฉ ุ ูู ุฎูุงู ูููุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">MS</a> ุงูุฅููุชุฑููู ููุณู. </p><br><p style=";text-align:right;direction:rtl">  <em>ุณูุฑุชูุฑ ุฎุงุต</em> ุณุฃููู ููุชูุง ููููุฏ ุงูุจูุงุก. </p><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/getpro/habr/branding/e54/4c4/1ba/e544c41ba712b412e5347191ba90d0c8.png"></a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar463587/">https://habr.com/ru/post/ar463587/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar463577/index.html">ุงููุฏููุฉ ูุงูููุฉ: ุชุตูุจ intermetallic ุฏูู ุงูุชุดุฏูุฏ ุนูู ุงูุฎูุน</a></li>
<li><a href="../ar463579/index.html">ูููุฏูุฒ: ูุนุฑูุฉ ูู ุงูุฐู ูุงู ุจุชุณุฌูู ุงูุฏุฎูู ุญูุซ</a></li>
<li><a href="../ar463581/index.html">ุชุฏุฑูุจ Cisco 200-125 CCNA v3.0. ููู 23. ุชูููุงุช ุงูุชูุฌูู ุงููุชูุฏูุฉ</a></li>
<li><a href="../ar463583/index.html">ููุญูุงุช ุฑุงุฆุนุฉ ุ ุงููุฌูุฏ. 1. ุงููุธุฑูุฉ</a></li>
<li><a href="../ar463585/index.html">ุชุฏุฑูุจ Cisco 200-125 CCNA v3.0. ุงูููู 24. IPv6</a></li>
<li><a href="../ar463591/index.html">BlueKeep-2 - ุฃุตุจุญุช ุฌููุน ุงูุฅุตุฏุงุฑุงุช ุงูุฌุฏูุฏุฉ ูู Windows ุนุฑุถุฉ ููุฎุทุฑ ุงูุขู</a></li>
<li><a href="../ar463595/index.html">ูุญู ูุณูุทุฑ ุนูู ุงูุชุฑููุฒ ุฃู ูุฑุตุฉ ูู C # ู STM32 ููุงููุฑุง ููุจ</a></li>
<li><a href="../ar463597/index.html">ุงุณุชุฎุฏุงู API Context ูู React ูุฅูุดุงุก ุชุตููู ุงุณุชุฌุงุจุฉ ุณุฑูุน</a></li>
<li><a href="../ar463599/index.html">"ูุฐุง ูุงุจูุณ": ูุดุงุฑู ุฑูุงุฏ ุงููุถุงุก ุงูุขุฑุงุก ุญูู ุงูุฃุฎุทุงุก ุงูุชู ุชุฑุชูุจูุง ูููููุฏ ุนูุฏ ุชุตููุฑ ุงูุฃููุงู ุนู ุงููุถุงุก</a></li>
<li><a href="../ar463601/index.html">ุทุฑููุฉ ูููุตูุฉ ุชุณุฌูู ูู ุฌุงูุง / logback</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>