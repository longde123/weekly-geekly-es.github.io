<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úãüèª üß§ üñáÔ∏è Chatbot RASA: Exp√©rience Parallels üîú ü§© üóùÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'industrie du chatbot est en plein essor. Au d√©but, ils √©taient assez stupides et pouvaient mener un dialogue avec l'utilisateur, √©tant leader et off...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Chatbot RASA: Exp√©rience Parallels</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/parallels/blog/470754/"><img src="https://habrastorage.org/webt/v-/c5/a0/v-c5a0h7xtstdf2m4u5ivyr1gli.jpeg"><br><br>  L'industrie du chatbot est en plein essor.  Au d√©but, ils √©taient assez stupides et pouvaient mener un dialogue avec l'utilisateur, √©tant leader et offrant des r√©ponses possibles.  Ensuite, les robots sont devenus un peu plus intelligents et ont commenc√© √† exiger la saisie de texte de l'utilisateur afin d'obtenir des mots cl√©s des r√©ponses.  Le d√©veloppement de l'apprentissage automatique a conduit √† l'√©mergence de la capacit√© de communiquer avec le bot √©galement en voix.  Cependant, la plupart des solutions ne sont pas all√©es tr√®s loin de la m√™me construction du graphe de dialogue et de la transition entre ses n≈ìuds par mots-cl√©s. <a name="habracut"></a><br><br>  R√©cemment, chez Parallels, nous avons d√©cid√© d'optimiser un certain nombre de processus internes et de cr√©er un bot pour nos propres besoins en tant qu'exp√©rience.  Apr√®s une courte recherche, nous avons d√©cid√© de tenter notre chance sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projet</a> open source <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RASA</a> .  Selon les d√©veloppeurs eux-m√™mes, ils ont cr√©√© un bot de discussion de troisi√®me g√©n√©ration.  Autrement dit, ce bot ne fait pas que faire le tour du graphe d'√©tat, mais est capable d'enregistrer et d'utiliser le contexte de la bo√Æte de dialogue pr√©c√©dente.  √Ä ce jour, la meilleure illustration pour les robots de discussion modernes ressemble √† ceci: <br><br><img src="https://habrastorage.org/webt/wi/d6/ks/wid6ksu-v47injjfrc2gvccl2uw.png"><br><br>  Autrement dit, les robots de discussion ne sont qu'un ensemble de r√®gles v√©rifi√©es pour passer d'un point du graphique √† un autre.  Si vous regardez les solutions existantes des g√©ants du march√©, en fait, il n'y a rien de tr√®s diff√©rent de l'ensemble des r√®gles.  En gros, cet ensemble ressemble √† ceci: <br><br>  Dialogue au point XXX. <br>  Si l'utilisateur a entr√© une offre avec les mots ['acheter', 'ticket'], allez au point "DEMANDER OERE" <br>  Si l'utilisateur a entr√© une offre avec les mots ['acheter', 'c√¥telette'], allez au point "DEMANDER DE QUOI" <br><br>  Il est imm√©diatement √©vident que ce sont des ordures ici, si l'utilisateur entre: "Je voudrais acheter un billet pour Porto", ils lui demanderont quand m√™me, "O√π voulez-vous aller?"  Pour rendre le dialogue plus humain, vous devrez ajouter de nouvelles r√®gles sur ce qu'il faut faire s'il y a une indication du lieu. <br>  Ajoutez ensuite des r√®gles sur ce qu'il faut faire s'il y a une indication du lieu et de l'heure, etc. <br><br>  Cet ensemble de r√®gles se d√©veloppera assez rapidement, mais ce n'est pas la pire des choses, toutes les ¬´bonnes¬ª mani√®res peuvent √™tre d√©crites, am√©lior√©es et l√©ch√©es. <br><br>  La chose la plus d√©sagr√©able est qu'une personne est une cr√©ature impr√©visible, contrairement √† un bot, et peut √† tout moment commencer √† demander compl√®tement diff√©rente.  Autrement dit, au moment o√π le bot est d√©j√† pr√™t √† r√©server un billet, une personne peut demander "au fait, qu'en est-il de la m√©t√©o?"  ou "bien que non, je voudrais monter dans ma voiture, combien de temps prend la route?" <br><br>  Cependant, il peut le demander √©galement au moment apr√®s avoir choisi une ville, mais avant de choisir une heure de d√©part ou m√™me de choisir un endroit o√π il veut aller.  Le bot, bas√© sur des machines √† √©tats, va se bloquer et ses pseudopodes m√©caniques se contracteront malheureusement, et l'utilisateur sera frustr√©. <br><br>  Ici, vous pouvez (et devez) utiliser l'apprentissage automatique.  Mais de nouveaux probl√®mes surgissent: par exemple, si vous utilisez la formation par renforcement pour pr√©dire les transitions vers les points du graphique, des questions se posent: o√π obtenir des donn√©es pour cette formation et qui notera la qualit√© des r√©ponses? <br><br>  Il est peu probable que les utilisateurs acceptent d'enseigner votre bot et, comme le montre la pratique, une communaut√© d'utilisateurs peut enseigner √† un bot pas du tout ce que vous voulez et ce que la soci√©t√© consid√®re comme d√©cent.  De plus, le bot au stade initial r√©pondra compl√®tement √† sa place, ce qui rendra les utilisateurs nerveux et ne jouera pas avec un tel support en principe. <br><br>  Apr√®s avoir analys√© et r√©fl√©chi √† toutes les lacunes des robots existants, les d√©veloppeurs de RASA ont essay√© de r√©soudre les probl√®mes comme suit: <br><br><ul><li>  Toute entr√©e de l'utilisateur passe par la ¬´d√©termination de l'intention¬ª, c'est-√†-dire que le texte saisi √† l'aide de l'apprentissage automatique est mapp√© sur une (ou plusieurs) intention.  De plus, si n√©cessaire, les entit√©s sont isol√©es du texte et ajout√©es √† la m√©moire du bot. </li><li>  Ce processus est similaire √† d'autres robots, √† l'exception du mod√®le de d√©termination d'intention utilis√©. </li><li>  La prochaine action du bot est pr√©dite √† l'aide de l'apprentissage automatique bas√© sur le contexte, c'est-√†-dire les actions pr√©c√©dentes, les intentions et l'√©tat de la m√©moire du bot. </li><li>  Dans le m√™me temps, il n'y a pas beaucoup de donn√©es n√©cessaires pour la formation initiale, et le bot peut tr√®s bien pr√©dire quelle action effectuer m√™me sans exemples et r√®gles sp√©cifiques. </li></ul><br>  Examinez plus en d√©tail les m√©canismes de travail. <br><br><h3>  <font color="#cc0000">RASA NLU</font> </h3><br>  Commen√ßons par la premi√®re baleine sur laquelle repose le bot.  Il s'agit d'une compr√©hension du langage naturel, qui se compose de deux parties principales: la d√©termination de l'intention et la reconnaissance des entit√©s. <br><br>  <b>D√©tection d'intention</b> <br>  La d√©termination de l'intention est bas√©e sur un algorithme modifi√© appel√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">StarSpace</a> de Facebook, impl√©ment√© sur Tensorflow.  Dans ce cas, les mod√®les pr√©-form√©s de repr√©sentations vectorielles de mots ne sont pas utilis√©s, ce qui vous permet de contourner les limites de ces repr√©sentations. <br><br>  Par exemple, la d√©termination de l'intention dans les algorithmes RASA fonctionnera bien pour n'importe quelle langue, ainsi qu'avec les mots sp√©cifiques que vous sp√©cifiez dans les exemples de formation.  Lorsqu'elle est impl√©ment√©e via des repr√©sentations vectorielles pr√©-form√©es comme GloVe ou word2vec, la localisation du bot et son application dans des domaines hautement sp√©cialis√©s apporteront suffisamment de maux de t√™te. <br><br>  L'algorithme fonctionne sur la base de la vectorisation des phrases par sac de mots et de la comparaison de leur ¬´similitude¬ª.  Des exemples d'intentions et d'intentions elles-m√™mes sont convertis en vecteurs √† l'aide d'un sac de mots et aliment√©s √† l'entr√©e des r√©seaux neuronaux correspondants.  A la sortie du r√©seau neuronal, un vecteur est obtenu pour cet ensemble particulier de mots (le m√™me plongement). <br><br>  La formation se d√©roule de mani√®re √† minimiser la fonction de perte sous la forme de la somme des distances par paires (cosinus ou produits vectoriels) entre deux vecteurs similaires et k-dissemblables.  Ainsi, apr√®s l'entra√Ænement, un certain vecteur sera associ√© √† chaque intention. <br><br>  D√®s r√©ception de la contribution de l'utilisateur, la proposition est √©galement vectoris√©e et ex√©cut√©e √† travers le mod√®le form√©.  Apr√®s cela, la distance entre le vecteur r√©sultant et tous les vecteurs d'intention est calcul√©e.  Le r√©sultat est class√©, mettant en √©vidence les intentions les plus probables et supprimant les valeurs n√©gatives, c'est-√†-dire compl√®tement diff√©rentes. <br><br>  En plus des petits pains ci-dessus, cette approche vous permet de distinguer automatiquement plus d'une intention de la proposition.  Par exemple: ¬´oui, j'ai compris cela.  Mais comment puis-je rentrer maintenant? "  Reconnu comme "intent_confirm + intent_how_to_drive", ce qui vous permet de construire des dialogues plus humains avec le bot. <br><br>  Soit dit en passant, avant la formation, vous pouvez cr√©er des phrases artificielles √† partir d'exemples en m√©langeant les phrases existantes pour augmenter le nombre d'exemples de formation. <br><br><h3>  <font color="#cc0000">Reconnaissance d'entit√© RASA</font> </h3><br>  La deuxi√®me partie de la NLU est l'extraction d'entit√©s du texte.  Par exemple, un utilisateur √©crit: ¬´Je veux aller dans un restaurant chinois avec deux amis¬ª, le bot doit mettre en √©vidence non seulement l'intention, mais aussi les donn√©es qui lui correspondent.  Autrement dit, remplissez votre m√©moire que les plats du restaurant doivent √™tre chinois et que le nombre de visiteurs est de trois. <br><br>  Pour cela, une approche bas√©e sur les champs al√©atoires conditionnels est utilis√©e, qui a d√©j√† √©t√© d√©crite quelque part sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Habr√©</a> , donc je ne la r√©p√©terai pas.  Ceux qui le souhaitent peuvent lire cet algorithme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur le site Web de Stanford</a> . <br><br>  De plus, je note que vous pouvez obtenir des entit√©s √† partir de texte bas√© sur des mod√®les, des textes (par exemple, les noms de villes), ainsi que vous connecter √† un service Facebook Duckling s√©par√©, ce qui serait √©galement agr√©able d'√©crire un jour. <br><br><h3>  <font color="#cc0000">Histoires RASA</font> </h3><br>  La deuxi√®me baleine bleue sur laquelle RASA Core est bas√©, ce sont les histoires.  L'essence g√©n√©rale des histoires sont des exemples de conversations r√©elles avec le bot, format√©es en intention-r√©action.  Sur la base de ces histoires, un r√©seau neuronal r√©current (LSTM) est form√©, qui mappe l'historique des messages pr√©c√©dents √† l'action souhait√©e.  Cela vous permet de ne pas d√©finir les graphiques des bo√Ætes de dialogue de mani√®re rigide, ainsi que de ne pas d√©terminer tous les √©tats et transitions possibles entre eux. <br><br>  Avec un nombre suffisant d'exemples, le r√©seau pr√©dira de mani√®re ad√©quate le prochain √©tat de la transition, quelle que soit la pr√©sence d'un exemple sp√©cifique.  Malheureusement, le nombre exact d'histoires pour cela est inconnu, et tout ce qui peut √™tre guid√© par la phrase des d√©veloppeurs: "plus, mieux c'est". <br><br>  Pour entra√Æner le syst√®me, et pas seulement pour y enregistrer des dialogues invent√©s, vous pouvez utiliser une formation interactive. <br><br>  Il y a deux options: <br>  1.Faites engager un certain nombre d'ing√©nieurs dans des conversations avec le bot, corrigeant des pr√©dictions incorrectes, une d√©finition incorrecte d'entit√©s et des prises avec des actions de pr√©diction sur des histoires. <br><br>  2. Enregistrez les conversations dans la base de donn√©es, puis continuez √† utiliser des ing√©nieurs sp√©cialement form√©s pour examiner les bo√Ætes de dialogue o√π l'utilisateur n'a pas pu r√©soudre son probl√®me, c'est-√†-dire qu'il est pass√© √† une personne ou que le bot a reconnu son impuissance et n'a pas pu r√©pondre. <br><br>  Afin de comprendre le m√©canisme des histoires, il est plus facile d'analyser un exemple simple.  Disons une r√©servation de table dans un restaurant, un exemple fourni par les d√©veloppeurs dans la section des exemples de code source.  D'abord, nous d√©terminerons nos intentions, puis nous ferons quelques histoires. <br><br>  Intentions et leurs exemples: <br><br>  Intent_hello <br><ul><li>  Salut </li><li>  Bonjour </li><li>  Aloha </li><li>  Bonjour </li></ul><br>  ... <br>  Intent_thanks <br><ul><li>  Merci </li><li>  Nice </li><li>  Je vous remercie </li></ul><br>  ... <br>  Intent_request <br><ul><li>  Au revoir sauter </li></ul><br>  Intent_inform <br><ul><li>  Au revoir sauter </li></ul><br>  Ensuite, vous devez cr√©er la m√©moire du bot, c'est-√†-dire d√©terminer les emplacements dans lesquels les besoins de l'utilisateur seront enregistr√©s.  D√©finissez les emplacements: <br><br>  cuisine: <br>  type: non caract√©ris√© <br>  auto_fill: false <br>  num_people: <br>  type: non caract√©ris√© <br>  auto_fill: false <br><br>  Et maintenant, nous allons montrer des exemples (une petite partie) des intentions omises ci-dessus.  Les crochets dans les exemples sont les donn√©es pour la formation Ner_CRF, au format [entit√©] (nom de variable pour le stockage: ce que nous stockons). <br><br>  intent_request_restaurant <br><ul><li>  Je cherche un restaurant </li><li>  puis-je obtenir de la nourriture [su√©doise] (cuisine) pour [six personnes] (num_people: 6) </li><li>  un restaurant qui sert des plats [des Cara√Øbes] (cuisine) </li><li>  id comme un restaurant </li><li>  Je cherche un restaurant qui sert de la nourriture (m√©diterran√©enne) (cuisine) </li></ul><br>  intent_inform <br><ul><li>  [2] (num_people) personnes </li><li>  pour [trois] (num_people: 3) personnes </li><li>  juste [une] (num_people: 1) personne </li><li>  how bout [asian oriental] (cuisine) </li><li>  qu'en est-il de la nourriture [indienne] (cuisine) </li><li>  euh que diriez-vous du type de nourriture [turc] (cuisine) </li><li>  um [anglais] (cuisine) </li></ul><br>  Maintenant, nous d√©terminons l'histoire du chemin principal: <br><br>  * saluer <br>  - utter_greet <br>  * Intent_request <br>  - restaurant_form <br>  - formulaire {"nom": "restaurant_form"} <br>  - formulaire {"nom": null} <br>  - action_book_restaurant <br>  * merci <br>  - utter_noworries <br><br>  C'est le bot parfait pour un monde parfait.  Si l'utilisateur a imm√©diatement indiqu√© toutes les donn√©es n√©cessaires dans la premi√®re phrase, un tableau sera r√©serv√©.  Par exemple, il √©crit ¬´je veux r√©server une table dans un restaurant espagnol pour cinq personnes¬ª.  Dans ce cas, num_people sera 5, et la cuisine - espagnol, ce qui est suffisant pour le bot pour d'autres actions sur la r√©servation. <br><br>  Cependant, si vous regardez les exemples, vous pouvez voir que les donn√©es ne sont pas toujours pr√©sentes dans la quantit√© requise, et parfois elles ne le sont pas du tout.  Des dialogues non essentiels apparaissent donc. <br><br>  Supposons qu'il n'y ait pas de donn√©es sur la cuisine dans la demande, c'est-√†-dire quelque chose comme cette bo√Æte de dialogue: <br>  Bonjour <br>  Salut <br>  Je veux r√©server un restaurant pour cinq personnes <br>  ... <br><br>  Pour qu'il se termine correctement, vous devez d√©terminer l'historique du formulaire suivant: <br>  * saluer <br>  - utter_greet <br>  * Intent_request <br>  - restaurant_form <br>  - formulaire {"nom": "restaurant_form"} <br>  - emplacement {"required_slot": "num_people"} <br>  - utter_ask_coven <br>  * formulaire: informer {"cuisine": "mexicain"} <br>  - emplacement {"cuisine": "mexicain"} <br>  - forme: restaurant_form <br>  ... <br><br>  Et la meilleure partie est que si vous cr√©ez des histoires pour plusieurs cuisines, alors, en rencontrant un inconnu, le bot pr√©dira lui-m√™me la prochaine action, bien qu'il ne soit pas tr√®s s√ªr.  Dans le m√™me temps, si vous cr√©ez une histoire similaire, mais o√π l'emplacement "cuisine" est rempli, et non l'emplacement "num_people", le bot ne se souciera absolument pas de l'ordre dans lequel les informations sur les param√®tres de r√©servation de table seront fournies. <br><br>  Il y a deux fa√ßons d'arr√™ter toute tentative de mener un bot du bon chemin: identifier les histoires possibles pour ne parler de "rien", ou √† toutes les tentatives pour entamer une telle conversation - pour r√©pondre qu'il vaut la peine de reprendre les affaires. <br><br>  √âtant donn√© que notre entreprise est au d√©but d'un voyage incroyable dans le monde des chatbots, il y a une chance qu'il y ait de nouveaux articles sur ce r√¢teau que nous avons collect√© et ce que nous avons fait.  Restez √† l'√©coute! <br><br><img src="https://habrastorage.org/webt/23/uz/eq/23uzeqjeu53ummt2ywqdlaiubmi.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr470754/">https://habr.com/ru/post/fr470754/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr470742/index.html">√âquation de Navier-Stokes et simulation des fluides sur CUDA</a></li>
<li><a href="../fr470744/index.html">Les math√©matiques r√©v√®lent les secrets de la r√©troaction des cellules en direct</a></li>
<li><a href="../fr470746/index.html">Facebook fait de la conversation la prochaine interface populaire</a></li>
<li><a href="../fr470750/index.html">Amazon a attrap√© les meilleurs produits</a></li>
<li><a href="../fr470752/index.html">Analyse des paiements Wechat</a></li>
<li><a href="../fr470756/index.html">Cr√©ation d'une application backend pour le chat en ligne Apollo, Node.js</a></li>
<li><a href="../fr470758/index.html">Aper√ßu de l'activit√© virale en septembre 2019</a></li>
<li><a href="../fr470772/index.html">TON: recommandations et bonnes pratiques</a></li>
<li><a href="../fr470774/index.html">Nouvelles annotations de type dans Python 3.8 (protocole, final, TypedDict, litt√©ral)</a></li>
<li><a href="../fr470778/index.html">Revue du disque Seagate ST2000DM008: ¬´deux¬ª rapides sans surprix</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>