<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÉ üë©‚ÄçüöÄ üåí Monitoring + stress tests = pr√©vision et pas d'√©checs ü§ôüèª üë®üèæ‚Äçüé® üëÉüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le d√©partement informatique de VTB a d√ª faire face √† plusieurs reprises √† des situations d'urgence dans les syst√®mes, lorsque leur charge a augment√© √†...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Monitoring + stress tests = pr√©vision et pas d'√©checs</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vtb/blog/472062/">  Le d√©partement informatique de VTB a d√ª faire face √† plusieurs reprises √† des situations d'urgence dans les syst√®mes, lorsque leur charge a augment√© √† plusieurs reprises.  Par cons√©quent, il est devenu n√©cessaire de d√©velopper et de tester un mod√®le qui pr√©dirait la charge de pointe sur les syst√®mes critiques.  Pour cela, les informaticiens de la banque ont mis en place un suivi, analys√© les donn√©es et appris √† automatiser les pr√©visions.  Quels outils ont aid√© √† pr√©voir la charge et s'il √©tait possible d'optimiser le travail avec leur aide, nous le dirons dans un court article. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b84/d49/7f4/b84d497f418f150e1cadeefa985dee7c.jpg"><br><a name="habracut"></a><br>  Des probl√®mes de services tr√®s charg√©s se posent dans presque tous les secteurs, mais ils sont critiques pour le secteur financier.  √Ä l'heure X, toutes les unit√©s de combat doivent √™tre pr√™tes, et il √©tait donc n√©cessaire de savoir √† l'avance ce qui pourrait arriver et m√™me de d√©terminer le jour o√π la charge saute, et quels syst√®mes la rencontreront.  Les √©checs doivent √™tre combattus et √©vit√©s, de sorte que la n√©cessit√© de mettre en ≈ìuvre un syst√®me d'analyse pr√©dictive n'a m√™me pas √©t√© discut√©e.  Il √©tait n√©cessaire de mettre √† niveau les syst√®mes sur la base des donn√©es de surveillance. <br><br><h2>  Analytics sur le genou </h2><br>  Un projet de paie est l'un des plus sensibles en cas d'√©chec.  C'est plus compr√©hensible pour les pr√©visions, nous avons donc d√©cid√© de commencer par cela.  En raison de la connectivit√© √©lev√©e au moment des pics de charge, d'autres sous-syst√®mes, y compris les services bancaires √† distance (RBS), pourraient rencontrer des probl√®mes.  Par exemple, les clients, ravis par SMS de la r√©ception d'argent, ont commenc√© √† les utiliser activement.  La charge pourrait bondir de plus d'un ordre de grandeur. <br><br>  Le premier mod√®le de pr√©vision a √©t√© cr√©√© manuellement.  Nous avons pris le d√©chargement de l'ann√©e derni√®re et calcul√© sur quels jours les pics maximums sont attendus: par exemple les 1er, 15 et 25, ainsi que les derniers jours du mois.  Ce mod√®le a n√©cessit√© un travail s√©rieux et n'a pas donn√© de pr√©visions pr√©cises.  N√©anmoins, elle a identifi√© des goulots d'√©tranglement o√π il √©tait n√©cessaire d'ajouter du mat√©riel, et a permis d'optimiser le processus de transfert d'argent en convenant avec les clients d'ancrage: afin de ne pas verser les salaires en une seule gorg√©e, les transactions de diff√©rentes r√©gions √©taient r√©parties dans le temps.  Nous les traitons maintenant en plusieurs parties que l'infrastructure informatique de la banque est capable de m√¢cher sans faute. <br><br>  Apr√®s avoir obtenu le premier r√©sultat positif, nous sommes pass√©s √† l'automatisation des pr√©visions, une dizaine de sections critiques attendaient notre tour. <br><br><h2>  Approche int√©gr√©e </h2><br>  Chez VTB, ils ont pr√©sent√© le syst√®me de surveillance MicroFocus.  De l√†, nous avons pris la collecte de donn√©es de pr√©vision, un syst√®me de stockage et un syst√®me de reporting.  En fait, il y avait d√©j√† du monitoring, il ne restait plus qu'√† ajouter des m√©triques, un module de pr√©diction et cr√©er de nouveaux rapports.  Cette d√©cision est prise en charge par un entrepreneur externe, Technoserv, de sorte que le travail principal sur le projet a √©t√© effectu√© par ses sp√©cialistes, mais nous avons construit le mod√®le nous-m√™mes.  Le syst√®me de pr√©vision a √©t√© cr√©√© sur la base de Prophet - ce produit open source a √©t√© d√©velopp√© sur Facebook.  Il est facile √† utiliser et √† int√©grer avec nos outils complets de surveillance et Vertica.  En gros, le syst√®me analyse le programme de charge et, sur la base de la s√©rie de Fourier, l'extrapole.  Il est √©galement possible d'ajouter certains coefficients par jours, tir√©s de notre mod√®le.  Les mesures sont prises sans intervention humaine, une fois par semaine, les pr√©visions sont recalcul√©es automatiquement, de nouveaux rapports sont envoy√©s aux destinataires. <br><br>  Cette approche r√©v√®le les principaux cycles, par exemple, annuel, mensuel, trimestriel et hebdomadaire.  Paiements de salaires et d'avances, p√©riodes de vacances, cong√©s et ventes - tout cela affecte le nombre d'appels vers les syst√®mes.  Il s'est av√©r√©, par exemple, que certains cycles se chevauchent et le District f√©d√©ral central donne la principale charge (75%) aux syst√®mes.  Les entit√©s juridiques et les individus se comportent diff√©remment.  Si la charge de travail des ¬´physiciens¬ª est r√©partie de mani√®re relativement homog√®ne sur les jours de la semaine (c'est beaucoup de petites transactions), alors les entreprises repr√©sentent 99,9% du temps de travail, de plus, les transactions peuvent √™tre courtes et peuvent √™tre trait√©es en quelques minutes voire quelques heures. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/70e/6ef/010/70e6ef0108827fad2870f63aa380e575.jpg"><br><br>  Sur la base des donn√©es obtenues, des tendances √† long terme sont d√©termin√©es.  Le nouveau syst√®me a r√©v√©l√© que les gens partent massivement pour le RB.  Cela est connu de tous, mais nous ne nous attendions pas √† une telle ampleur et nous n'y avons pas cru au d√©but: le nombre d'appels aux bureaux de la banque diminue extr√™mement rapidement et le nombre de transactions √† distance augmente exactement du m√™me montant.  Par cons√©quent, la charge sur le syst√®me augmente √©galement et continuera de cro√Ætre.  Nous pr√©voyons maintenant la charge jusqu'en f√©vrier 2020.  Les jours normaux peuvent √™tre pr√©dits avec une erreur de 3% et les jours de pointe avec une erreur de 10%.  C'est un bon r√©sultat. <br><br><h2>  Pi√®ges </h2><br>  Comme d'habitude, il y a eu quelques difficult√©s.  Le m√©canisme d'extrapolation utilisant la s√©rie de Fourier passe mal par z√©ro - nous savons que le week-end, les entit√©s juridiques g√©n√®rent peu de transactions, mais le module de pr√©diction produit des valeurs loin de z√©ro.  Il a √©t√© possible de les corriger par la force, mais les b√©quilles ne sont pas notre m√©thode.  En outre, il √©tait n√©cessaire de r√©soudre le probl√®me de la collecte indolore de donn√©es √† partir des syst√®mes sources.  La collecte r√©guli√®re d'informations n√©cessite des ressources informatiques importantes, nous avons donc cr√©√© des caches rapides √† l'aide de la r√©plication, nous obtenons d√©j√† des donn√©es commerciales √† partir des r√©pliques.  L'absence de charge suppl√©mentaire sur les syst√®mes ma√Ætres dans de tels cas est une condition de blocage. <br><br><h2>  De nouveaux d√©fis </h2><br>  La t√¢che de pr√©diction des pics a √©t√© r√©solue: il n'y a eu aucune d√©faillance bancaire li√©e √† la surcharge depuis mai de cette ann√©e, et le nouveau syst√®me de pr√©vision a jou√© un r√¥le important √† cet √©gard.  Oui, cela ne suffisait pas, et maintenant la banque veut comprendre √† quel point les pics sont dangereux pour elle.  Nous avons besoin de pr√©visions √† l'aide de mesures issues des tests de charge, et pour environ 30% des syst√®mes critiques, cela fonctionne d√©j√†, les autres sont en train d'obtenir des pr√©visions.  √Ä l'√©tape suivante, nous allons pr√©dire la charge sur les syst√®mes non pas dans les transactions commerciales, mais en termes d'infrastructure informatique, c'est-√†-dire que nous descendrons une couche en dessous.  De plus, nous devons automatiser enti√®rement la collecte de m√©triques et construire des pr√©visions en fonction de celles-ci, afin de ne pas engager de d√©chargement.  Il n'y a rien d'exceptionnel √† cela - nous effectuons simplement des contr√¥les crois√©s et des tests de r√©sistance conform√©ment aux meilleures pratiques mondiales. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr472062/">https://habr.com/ru/post/fr472062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr472044/index.html">Pr√©sentation d'ISPmanager - panneaux de contr√¥le d'h√©bergement et de site</a></li>
<li><a href="../fr472046/index.html">Conf√©rences: le d√©but du chemin</a></li>
<li><a href="../fr472052/index.html">Conception orient√©e donn√©es (ou pourquoi, en utilisant la POO, vous vous tirez probablement une balle dans le pied)</a></li>
<li><a href="../fr472054/index.html">Organisateurs et assistants p√©dagogiques sur les programmes en ligne du CS Center</a></li>
<li><a href="../fr472060/index.html">La police allemande a pris d'assaut un bunker militaire, qui abritait le centre de donn√©es nouvellement d√©clar√©</a></li>
<li><a href="../fr472064/index.html">Ansible + auto git pull in virtual machine cluster in the cloud</a></li>
<li><a href="../fr472068/index.html">Utilisation du SSD NVME en tant que lecteur syst√®me sur les ordinateurs dot√©s d'un ancien BIOS et d'un syst√®me d'exploitation Linux</a></li>
<li><a href="../fr472072/index.html">PG12: une douzaine de patchs de Postgres Professional</a></li>
<li><a href="../fr472076/index.html">Le livre "Java pour tous"</a></li>
<li><a href="../fr472078/index.html">Risques bancaires ouverts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>