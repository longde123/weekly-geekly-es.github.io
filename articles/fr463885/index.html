<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🤝‍👨🏼 🔐 🧚🏾 Problème avec la mise à jour de MikroTik RouterOS sur des routeurs avec 16 Mo de FLASH 👩🏽 🤐 👨🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Récemment, les gars de MikroTik ont ​​foiré (encore?) Et mon "hAP lite" préféré a cessé de se mettre à jour. De la version 6.45.1 à 6.45.2 elle n'a pa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Problème avec la mise à jour de MikroTik RouterOS sur des routeurs avec 16 Mo de FLASH</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463885/"><img src="https://habrastorage.org/webt/rx/_7/pa/rx_7paqmrywn1hefmvoxoxoc9o0.jpeg"><br><br>  Récemment, les gars de MikroTik ont ​​foiré (encore?) Et mon "hAP lite" préféré a cessé de se mettre à jour.  De la version 6.45.1 à 6.45.2 elle n'a pas été mise à jour, il a écrit qu'il n'y avait pas assez d'espace.  Le montant a été remarqué et dans la version 6.45.3 pour l'architecture SMIPS, ils ont réduit la taille du paquet, en <i>supprimant</i> le "supplément" ( <i>smips - taille réduite du paquet principal RouterOS (modem LTE désactivé, prise en charge dot1x et SwOS)</i> ).  Maintenant, le package est téléchargé, il y a suffisamment d'espace pour cela, mais ... Après le redémarrage, la version reste 6.45.1 et dans le journal, nous voyons le message «pas assez d'espace pour la mise à niveau».  <i>Le fakir était ivre et l'astuce a échoué.</i> <br><a name="habracut"></a><br>  <i>Ok, google, mikrotik pas assez d'espace pour la mise à jour</i> <br>  Sur forum.mikrotik.com, nous découvrons que le problème est ancien, la première mention en 2017 selon la version 6.40.4.  Il semble que l'entreprise ait malheureusement des problèmes avec les tests. <br>  Nous trouvons la recommandation d'utiliser <a href="">fix_space.npk</a> , de le télécharger, de le <a href="">déposer</a> sur le routeur, de le redémarrer et ... Cela ne m'a pas aidé. <br><br>  De plus, enfin, nous trouvons un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> utile.  En bref: <br><br><ul><li>  les mises à jour sont regroupées </li><li>  par défaut, les paquets sont hérités du méta-package (dans mon cas, "routeros-smips") </li><li>  vous ne pouvez pas supprimer (désinstaller) les packages hérités, car les informations les concernant sont contenues dans un méta-package </li><li>  lors de la mise à jour, le méta-package et ses héritiers, même handicapés, sont mis à jour </li><li>  la mémoire constante du routeur est divisée en sections - système caché et accessible à l'utilisateur </li><li>  pour la mise à jour, le package / méta-package nécessaire doit être déposé dans la section utilisateur et redémarré </li><li>  si vous mettez à jour depuis winbox, interface web ou terminal, le méta-package nécessaire est automatiquement téléchargé dans la section utilisateur et le routeur redémarre </li><li>  au redémarrage, s'il y a des packages dans la partition utilisateur, <b>tous les packages installés sont supprimés de la partition système et ceux qui se trouvent sur la partition utilisateur sont installés</b> , après quoi ils sont supprimés de la partition utilisateur </li></ul><br>  De ce qui précède, il s'ensuit que si vous déposez uniquement les packages nécessaires dans la section utilisateur et redémarrez, le méta-package avec tous les héritiers sera supprimé, seuls les packages nécessaires seront livrés et, en raison de la suppression des packages inutiles, un peu d'espace sera libéré, si nécessaire pour les mises à jour ultérieures.  Voyons ça. <br><br><img src="https://habrastorage.org/webt/rm/ko/cg/rmkocgi0tp3qdu7cx0yclezdnga.png"><br><br>  Le routeur est budgétaire, il est donc principalement utilisé à la maison ou dans les petits bureaux, ce qui signifie que nous n'avons guère besoin des outils avancés, hotspot, ipv6, mpls, packages de routage.  En savoir plus sur les packages sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">wiki officiel</a> , choisissez ceux dont vous avez besoin et ceux qui n'en ont pas.  Par exemple, ipv6 est désactivé sur ce routeur, mais à la maison je l'utilise.  Soyez prudent, si vous oubliez de mettre le bon package, la <i>mise à jour du routeur distant est pour un long voyage</i> . <br><br><img src="https://habrastorage.org/webt/t9/k0/0p/t9k00plocwiczrilkcd_kxcphny.png"><br><br>  Comme vous pouvez le voir, la section utilisateur est vide, seulement 8,5 Mo sont occupés <br><br><img src="https://habrastorage.org/webt/e-/um/o8/e-umo8inqnlhywxobvj_w9imhfg.png"><br><br>  Lorsque vous essayez de mettre à jour, jure d'un manque d'espace.  En fait, la capture d'écran a été «dessinée», maudissant la version 6.45.2, avec la version 6.45.3, il y avait suffisamment d'espace pour le chargement, nous avons donc dû tricher, mais dans ce cas, nous émulons simplement une situation similaire. <br><br><img src="https://habrastorage.org/webt/dt/ud/7a/dtud7ajduj0eabwg71bxhgh3h4q.png"><br><br>  Nous téléchargeons à partir des packages Extra <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">hors site</a> pour l'architecture souhaitée, pour SMIPS, car le problème semble être uniquement là-dessus.  Nous déballons et déposons les packages nécessaires sur la section utilisateur.  Redémarrez. <br><br><img src="https://habrastorage.org/webt/gw/bc/1o/gwbc1or1c8myttkuoc1lv9kixrg.png"><br><br><img src="https://habrastorage.org/webt/9c/le/pm/9clepmyomfuhhu4d-_26wxxbxww.png"><br><br>  Voila!  La mise à jour a réussi, le méta-package avec tous les héritiers a été supprimé, seuls les packages nécessaires ont été installés. <br><br><img src="https://habrastorage.org/webt/i2/ju/vc/i2juvck3gg0yvdwzxlednsa8nac.png"><br><br>  La section utilisateur est vide, seulement 8 Mo sont occupés, c'est-à-dire  0,5 Mo que nous avons publié. <br><br>  Les mises à jour automatiques fonctionneront-elles maintenant?  Sera.  Pour vérifier, sur un autre routeur, j'ai mis à jour manuellement vers la version 6.45.2 puis automatiquement mis à jour vers 6.45.3 <br><br>  Les gars de MikroTik aimeraient être plus attentifs, mais qui n'est pas sans péché. <br>  <sub>avec des erreurs et des commentaires que je demande dans PM</sub> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr463885/">https://habr.com/ru/post/fr463885/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr463873/index.html">Lauréat du prix Nobel Carey Mullis - inventeur de la réaction en chaîne de l'ADN polymérase</a></li>
<li><a href="../fr463875/index.html">Intel Ice Lake. 10 nm - aux masses</a></li>
<li><a href="../fr463877/index.html">Comme nous recherchions un remplaçant pour MS Word, nous avons introduit un nouveau processus de gestion des documents</a></li>
<li><a href="../fr463879/index.html">Bootcamp dans Yandex: comment un développeur peut-il choisir une équipe</a></li>
<li><a href="../fr463881/index.html">Photos prises en otage. Le premier piratage d'appareils photo numériques via WiFi (protocole PTP / IP)</a></li>
<li><a href="../fr463889/index.html">Comment faire des applications pour les téléphones handicapés</a></li>
<li><a href="../fr463891/index.html">Systèmes immunitaires artificiels dans la sécurité de l'information</a></li>
<li><a href="../fr463895/index.html">Arrivé dans l'étagère des projecteurs compacts: Epson EF-100 - la première hirondelle d'une série de projecteurs laser portables brillants</a></li>
<li><a href="../fr463897/index.html">Audit de sécurité de la plateforme cloud MCS</a></li>
<li><a href="../fr463899/index.html">Pourquoi attendons-nous l'invention du vélo depuis si longtemps?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>