<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍⚕️ 🙏🏿 🔲 Bekerja dengan antarmuka di Google Maps SDK untuk Android 🏡 👩🏿‍🚀 🤽🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini akan bermanfaat bagi mereka yang sebelumnya tidak menggunakan Google Maps SDK dalam pekerjaan mereka. 

 Di bawah pemotong, metode dasar b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bekerja dengan antarmuka di Google Maps SDK untuk Android</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484100/">  Artikel ini akan bermanfaat bagi mereka yang sebelumnya tidak menggunakan Google Maps SDK dalam pekerjaan mereka. <br><br>  Di bawah pemotong, metode dasar bekerja dengan peta dijelaskan, seperti menambahkan dan mengelola spidol, cara memindahkan kamera di atas peta, mengendalikan zoom, membangun rute dan geocoding.  Serta keterbatasan dan cara untuk menghindarinya. <br><br><div style="text-align:center;"><img width="70%" src="https://habrastorage.org/webt/z7/k_/wx/z7k_wx4u1gl4-usgjpfpbussyew.jpeg" alt="gambar"></div> <a href="https://www.nationalgeographic.com/" rel="nofollow"><i>Sumber</i></a> <br><a name="habracut"></a><br>  Untuk menulis artikel, saya terinspirasi oleh pengalaman saya sendiri, yang saya peroleh saat menulis <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.e.courierassistant" rel="nofollow">aplikasi untuk kurir</a> menggunakan peta Google dalam pekerjaan mereka.  Jadi semua tangkapan layar dan kemungkinan penyebutan logika bisnis akan terjadi dalam konteks membangun antarmuka kurir. <br><br>  Sayangnya, Google Maps SDK untuk Android tidak memungkinkan Anda untuk mengubah posisi tombol kontrol, yang disebut  Kontrol UI, ini termasuk: IndoorLevelPicker - menampilkan denah bangunan, Kompas - kompas, tombol Lokasiku - buka peta di lokasi saat ini, bilah alat Peta - tombol untuk membangun rute dan membuka peta, serta ZoomControls - menambah dan mengurangi skala peta. <br><br>  Dengan menggunakan bilah alat Peta dan ZoomControls sebagai contoh, mari kita lihat kesulitan apa yang dapat timbul karena ketidakmampuan untuk mengubah posisi kontrol dan cara menyiasatinya. <br><br><img width="70%" src="https://habrastorage.org/webt/ep/7v/e-/ep7ve-bkgkw8lfu0dqhu62rd8li.png" alt="gambar"><br>  <i>Masalah menampilkan kontrol UI dari SDK (disorot dalam warna oranye) dan rekanan khusus mereka (disorot dalam warna hijau)</i> <br><br>  Dalam hal ini, kami memiliki tombol di sudut kanan bawah (tombol aksi mengambang) untuk masuk ke daftar alamat pesanan pengiriman, pada gambar di sebelah kiri Anda dapat melihat bahwa ZoomControls berada di bawahnya dan secara praktis tidak dapat diakses untuk mengklik.  Pada gambar di sebelah kanan, ketika Anda mengklik penanda, tombol dari bilah alat Peta muncul, mereka juga muncul di bawah tombol untuk pergi ke daftar pesanan. <br><br>  <b>Solusi</b> <br><br>  Hal pertama yang perlu kita lakukan adalah menyembunyikan tampilan tombol asli.  Anda dapat melakukan ini dengan mengganti metode onMapReady, ini dipanggil saat kartu siap digunakan. <br><br><div class="spoiler">  <b class="spoiler_title">Jangan tampilkan tombol Kontrol zoom dan jangan tampilkan tombol membangun rute dari SDK</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GoogleMap mMap; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UiSettings uiSettings; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMapReady</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GoogleMap googleMap)</span></span></span><span class="hljs-function"> </span></span>{ mMap = googleMap; uiSettings = mMap.getUiSettings(); <span class="hljs-comment"><span class="hljs-comment">//   Zoom uiSettings.setZoomControlsEnabled(false); //         SDK uiSettings.setMapToolbarEnabled(false); }</span></span></code> </pre> <br></div></div><br>  Kami menambahkan tombol yang diperlukan ke tata letak, di mana mereka harus sesuai dengan desain kami: <br><br><img width="80%" src="https://habrastorage.org/webt/ya/1f/1s/ya1f1s6himpftesuq8jcf1bfsco.png" alt="gambar"><br>  <i>Lokasi tombol kontrol peta khusus</i> <br><br>  Kemudian, dalam metode onCreateView, tentukan tindakan yang harus terjadi ketika tombol kita diklik: <br><br><div class="spoiler">  <b class="spoiler_title">Penangan untuk tombol untuk menambah dan mengurangi skala, serta membangun rute</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton imageButtonZoomIn; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton imageButtonZoomOut; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton imageButtonRoute; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GoogleMap mMap; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> View </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  imageButtonZoomIn = view.findViewById(R.id.imageButtonZoomIn); imageButtonZoomIn.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { mMap.animateCamera(CameraUpdateFactory.zoomIn()); } }); //  imageButtonZoomOut = view.findViewById(R.id.imageButtonZoomOut); imageButtonZoomOut.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { mMap.animateCamera(CameraUpdateFactory.zoomOut()); } }); //      imageButtonRoute = view.findViewById(R.id.imageButtonRoute); imageButtonRoute.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { String latitude = String.valueOf(activMarker.getPosition().latitude); String longitude = String.valueOf(activMarker.getPosition().longitude); Uri gmmIntentUri = Uri.parse("google.navigation:q=" + latitude + "," + longitude); Intent mapIntent = new Intent(Intent.ACTION_VIEW, gmmIntentUri); mapIntent.setPackage("com.google.android.apps.maps"); try{ if (mapIntent.resolveActivity(Objects.requireNonNull(getActivity()).getPackageManager()) != null) { startActivity(mapIntent); } }catch (NullPointerException e){ Log.e(TAG, "onClick: NullPointerException: Couldn't open map." + e.getMessage() ); Toast.makeText(getActivity(), "Couldn't open map", Toast.LENGTH_SHORT).show(); } } }); }</span></span></code> </pre><br></div></div><br>  Kekhasan metode <b>animateCamera</b> adalah bahwa skala berubah dengan lancar, dan tidak secara instan, dan jika, misalnya, Anda perlu mematikan animasi tombol zoom tertentu ketika skala maksimum atau minimum tercapai, Anda perlu mendefinisikan kembali metode <b>onCameraIdle</b> , yang disebut ketika skala peta berubah. <br><br><div class="spoiler">  <b class="spoiler_title">Mengaktifkan dan menonaktifkan tombol zoom</b> <div class="spoiler_text"><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCameraIdle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mMap.getCameraPosition().zoom == mMap.getMinZoomLevel()){ <span class="hljs-comment"><span class="hljs-comment">//  ,     imageButtonZoomOut.setEnabled(false); imageButtonZoomIn.setEnabled(true); }else if (mMap.getCameraPosition().zoom == mMap.getMaxZoomLevel()){ //  ,     imageButtonZoomOut.setEnabled(true); imageButtonZoomIn.setEnabled(false); }else { //       imageButtonZoomOut.setEnabled(true); imageButtonZoomIn.setEnabled(true); } }</span></span></code> </pre><br></div></div><br>  Untuk melakukan tindakan apa pun dengan marker (kecuali untuk menyeret dan menjatuhkan), misalnya, buat pesanan baru, hapus penanda yang ditempatkan secara acak, buka pesanan yang ada atau panggil telepon seperti ditunjukkan dalam pesanan, tambahkan tombol kontrol yang sesuai ke tata letak dan daftarkan penangannya. <br><br><img width="40%" src="https://habrastorage.org/webt/eh/9v/yf/eh9vyfwdun36kqaqirzvhwudxsq.png" alt="gambar"><br>  <i>Tombol Kontrol Penanda</i> <br><br><div class="spoiler">  <b class="spoiler_title">Memproses klik pada peta untuk menambahkan penanda dan menampilkan tombol kontrol khusus</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GoogleMap mMap; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton imageButtonRoute; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMapReady</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GoogleMap googleMap)</span></span></span><span class="hljs-function"> </span></span>{ mMap = googleMap; mMap.setOnMapClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GoogleMap.OnMapClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMapClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LatLng latLng)</span></span></span><span class="hljs-function"> </span></span>{ imageButtonRoute.setVisibility(View.GONE); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myMarker !=<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>){ <span class="hljs-comment"><span class="hljs-comment">//   myMarker.remove(); } //    myMarker = mMap.addMarker(new MarkerOptions() .position(latLng) //   .title(Objects.requireNonNull(getContext()).getString(R.string.title_on_marker_to_new_order)) // true ,         .draggable(true)); myMarker.setTag(null); //    imageButtonAddMarker.setVisibility(View.VISIBLE); imageButtonRemoveMarker.setVisibility(View.VISIBLE); } }); }</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Kami menunjukkan apa yang ingin kami lakukan dengan marker ketika kami mengklik tombol add order</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton imageButtonAddMarker; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Marker myMarker; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> View </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ imageButtonAddMarker = view.findViewById(R.id.imageButtonAddMarker); imageButtonAddMarker.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View v)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myMarker !=<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; myMarker.getTag()==<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    imageButtonAddMarker.setVisibility(View.GONE); imageButtonRemoveMarker.setVisibility(View.GONE); //  ,          listener.openOrderContentsFragmentFromMap(null, myMarker); //   ,     myMarker.remove(); } } }); }</span></span></code> </pre><br></div></div><br>  Fitur lain adalah bahwa tidak ada tombol di SDK untuk menghapus penanda pada kartu.  Untuk melakukan ini, kami juga membuat tombol sendiri: <br><br><div class="spoiler">  <b class="spoiler_title">Tentukan apa yang ingin kita lakukan dengan marker ketika kita mengklik tombol delete marker</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ImageButton imageButtonRemoveMarker; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Marker myMarker; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> View </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ imageButtonRemoveMarker = view.findViewById(R.id.imageButtonRemoveMarker); imageButtonRemoveMarker.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View v)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (myMarker !=<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; myMarker.getTag()==<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>){ <span class="hljs-comment"><span class="hljs-comment">//   imageButtonAddMarker.setVisibility(View.GONE); imageButtonRemoveMarker.setVisibility(View.GONE); //    myMarker.remove(); } } }); }</span></span></code> </pre><br></div></div><br>  Ketika mengklik penanda, judulnya terbuka, mengklik yang juga dapat digunakan untuk melakukan tindakan apa pun, ketika saya mengklik judul penanda baru, saya membuat pesanan baru untuk pengiriman ke kurir, dan pada penanda pesanan yang ada saya membuka informasi pengiriman rinci, termasuk daftar barang <br><br><div class="spoiler">  <b class="spoiler_title">Tetapkan tindakan saat mengklik pada jendela info penanda</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> GoogleMap mMap; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onMapReady</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GoogleMap googleMap)</span></span></span><span class="hljs-function"> </span></span>{ mMap = googleMap; mMap.setOnInfoWindowClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GoogleMap.OnInfoWindowClickListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onInfoWindowClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Marker marker)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (marker.getTag()==<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    : //      listener.openOrderContentsFragmentFromMap(null, marker); if (myMarker != null) { //   ,     myMarker.remove(); } } else { //     : //         listener.openOrderContentsFragment((Long) marker.getTag()); } } }); }</span></span></code> </pre><br></div></div><br>  Proses mengeluarkan beberapa marker (baca daftar pesanan) ke kartu pada prinsipnya tidak berbeda dengan output satu marker.  Marker terdiri dari koordinat (posisi), judul (title), teks kecil di bawah judul (snippet) dan tag (setTag) - itu dapat digunakan untuk mengidentifikasi banyak penanda pada peta. <br><br><img width="70%" src="https://habrastorage.org/webt/za/jk/6r/zajk6r8nidla3duqdwtkxzr2ht0.png" alt="gambar"><br>  <i>Beberapa penanda peta</i> <br><br><div class="spoiler">  <b class="spoiler_title">Menggambar banyak marker dengan koordinat yang diberikan</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawListMarker</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;InfoMarker&gt; latLngList)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (latLngList == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || latLngList.size() == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-comment"><span class="hljs-comment">//    mMap.clear(); LatLngBounds.Builder builder = new LatLngBounds.Builder(); boolean fiarstGreean = true; int count = 1; for (InfoMarker latLng : latLngList) { BitmapDescriptor icon; if (fiarstGreean){ //      //..           icon = BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_GREEN); fiarstGreean = false; } else { icon = latLng.getIcon(); } //      mMap.addMarker(new MarkerOptions().position(latLng.getLatLng()).title(String.valueOf(count)).snippet(latLng.getTitle()).icon(icon)).setTag(latLng.getIdOrder()); builder.include(latLng.getLatLng()); count++; } //       CameraUpdate cameraUpdate; if (loaded) { cameraUpdate = CameraUpdateFactory .newLatLngBounds(builder.build(), 100); } else { cameraUpdate = CameraUpdateFactory.newLatLng(builder.build().getCenter()); } mMap.moveCamera(cameraUpdate); mMap.animateCamera(CameraUpdateFactory.zoomIn()); mMap.animateCamera(CameraUpdateFactory.zoomTo(10), 1000, null); }</span></span></code> </pre><br></div></div><br>  <b>Beberapa kata tentang geocoder</b> <br><br>  Geocoder digunakan untuk mendapatkan alamat berdasarkan koordinat.  Menempatkan penanda di peta dan mengklik tombol tambah pesanan, kita mendapatkan koordinat geografis dari titik yang diinginkan, yaitu  lintang dan bujur.  Tetapi untuk kenyamanan pengguna, akan menyenangkan untuk menunjukkan alamat dalam bentuk yang dapat dibaca manusia, mis., Misalnya, negara, kota, jalan, rumah. <br><br>  Google Maps SDK berisi kelas <b>Geocoder</b> , dengan memanggil metode <b>getFromLocation Anda</b> bisa mendapatkan array alamat pada koordinat yang ditentukan. <br><br>  Agar tidak memblokir utas UI terlalu lama, terutama jika Internet lambat atau tidak dapat diakses, melalui panggilan - kami akan menggunakan RxJava: <br><br><img width="40%" src="https://habrastorage.org/webt/rq/4f/yx/rq4fyxaic3amyaksci8egy2tvzy.png" alt="gambar"><br>  <i>Alamat titik yang dihasilkan pada peta berdasarkan koordinat geografis</i> <br><br><div class="spoiler">  <b class="spoiler_title">Menggunakan Java RX untuk mengakses Google geocoder</b> <div class="spoiler_text"><pre> <code class="java hljs">LatLng position = myMarker.getPosition(); Location location = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Location(<span class="hljs-string"><span class="hljs-string">"new"</span></span>); location.setLatitude(position.latitude); location.setLongitude(position.longitude); LocationRepostiory locationRepostiory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LocationRepostiory(context, location); locationRepostiory.getLastLocation(). observeOn(SchedulerProvider.getInstance().ui()). subscribeOn(SchedulerProvider.getInstance().computation()). subscribe(locationString -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(editTextAddress.length()==<span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-comment"><span class="hljs-comment">//       ,      editTextAddress.setText(locationString); } }, throwable -&gt; { });</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Teks kelas LocationRepostiory di mana geocoding terbalik terjadi</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocationRepostiory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Context context; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Location location; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LocationRepostiory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Location location)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.context = context; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.location = location; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Single&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLastLocation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Single.create(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::subscribeOnLocation); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribeOnLocation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SingleEmitter&lt;String&gt; e)</span></span></span><span class="hljs-function"> </span></span>{ Geocoder geocoder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Geocoder(context, Locale.getDefault()); String errorMessage = <span class="hljs-string"><span class="hljs-string">""</span></span>; List&lt;Address&gt; addresses = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//     addresses = geocoder.getFromLocation( location.getLatitude(), location.getLongitude(), // In this sample, get just a single address. 1); } catch (IOException ioException) { //,      I/O. errorMessage = context.getString(R.string.service_not_available); Log.e(TAG, errorMessage, ioException); } catch (IllegalArgumentException illegalArgumentException) { // ,       errorMessage = context.getString(R.string.invalid_lat_long_used); Log.e(TAG, errorMessage + ". " + "Latitude = " + location.getLatitude() + ", Longitude = " + location.getLongitude(), illegalArgumentException); } //  ,     if (addresses == null || addresses.size() == 0) { if (errorMessage.isEmpty()) { errorMessage = context.getString(R.string.no_address_found); Log.e(TAG, errorMessage); } } else { Address address = addresses.get(0); ArrayList&lt;String&gt; addressFragments = new ArrayList&lt;String&gt;(); //      . for (int i = 0; i &lt;= address.getMaxAddressLineIndex(); i++) { e.onSuccess(address.getAddressLine(i)); } } } }</span></span></code> </pre><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id484100/">https://habr.com/ru/post/id484100/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id484088/index.html">Kata sandi hit parade (analisis ~ 5 miliar kata sandi dari kebocoran)</a></li>
<li><a href="../id484090/index.html">Infrastruktur TI baru untuk Pusat Data Pos Rusia</a></li>
<li><a href="../id484092/index.html">Agak berpakaian pangeran dan bangsawan</a></li>
<li><a href="../id484094/index.html">Buat penembak zombie orang ketiga dengan DOTS</a></li>
<li><a href="../id484096/index.html">Pertempuran dua Yakozun, atau Cassandra vs HBase. Pengalaman tim Sberbank</a></li>
<li><a href="../id484102/index.html">PHP vs Python vs Ruby on Rails: Perbandingan Lengkap</a></li>
<li><a href="../id484106/index.html">MVCC di PostgreSQL-6. Vakum</a></li>
<li><a href="../id484108/index.html">Etherblade.net Encapsulator dan Substitusi Impor untuk Komponen Jaringan (Bagian Dua)</a></li>
<li><a href="../id484112/index.html">Apakah mungkin untuk meretas pesawat</a></li>
<li><a href="../id484114/index.html">Pilihan 143 terjemahan esai Paul Graham (dari 184)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>