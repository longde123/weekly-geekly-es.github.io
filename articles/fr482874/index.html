<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüëß‚Äçüë¶ üõãÔ∏è üïû La mort de Koshchei dans la liste des recommandations (pouvez-vous rendre YouTube confortable et s√ªr?) üë©‚Äçüë¶ üïµüèø üë©üèø‚Äçüíº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'introduction est courte: je veux parler du lecteur en ligne YouTube pour Android avec des listes de lecture, des cha√Ænes et des recommandations loca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La mort de Koshchei dans la liste des recommandations (pouvez-vous rendre YouTube confortable et s√ªr?)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482874/"><p>  L'introduction est courte: je veux parler du lecteur en ligne YouTube pour Android avec des listes de lecture, des cha√Ænes et des recommandations locales. </p><br><p><img src="https://habrastorage.org/webt/v6/gi/jr/v6gijredqlwmps9caerjcock7hi.png"></p><br><h4 id="vstuplenie-razvernutoe">  L'introduction est d√©taill√©e </h4><br><p>  Il y a quelque temps, j'ai rencontr√© exactement le m√™me probl√®me que l'auteur de la merveilleuse application <a href="https://habr.com/ru/post/421451/">Channel Whitelist</a> , et j'ai d√©termin√© exactement la m√™me attitude √† son √©gard: je veux pouvoir donner √† mon enfant une tablette ou un smartphone avec des dessins anim√©s de temps en temps, mais je ne suis pas du tout content, o√π en 2-3 clics, l'enfant obtient une liste de recommandations dans les applications standard - clients YouTube. </p><br><p>  Malheureusement, apr√®s avoir install√© l'application Channel Whitelist, il a d√©j√† d√©couvert une autre faille plus prosa√Øque, mais toujours fatale - <s>NIH</s> (et, surtout, son fils) n'a pas trouv√© son interface tr√®s pratique, surtout apr√®s avoir l'habitude d'utiliser le lecteur YouTube Kids. </p><br><p>  En g√©n√©ral, apr√®s un certain temps, j'ai m√ªri pour faire ma mise en ≈ìuvre.  Apr√®s un certain temps, il est devenu possible de mettre le tag sur la premi√®re version. </p><br><p>  Caract√©ristiques cl√©s: </p><br><ul><li>  Ajoutez vos cha√Ænes et listes de lecture pr√©f√©r√©es - elles seront enregistr√©es et index√©es dans la base de donn√©es locale </li><li>  D√©sactivez les vid√©os suppl√©mentaires dans les listes de lecture ajout√©es si vous n'en avez pas besoin </li><li>  La liste des recommandations est g√©n√©r√©e al√©atoirement uniquement √† partir des cha√Ænes et des listes de lecture ajout√©es √† l'application. </li></ul><br><p>  Les sources sont ouvertes, licence GPLv3: <a href="https://github.com/sadr0b0t/yashlang/">https://github.com/sadr0b0t/yashlang/</a> </p><br><p>  D√©couvrez plus en d√©tail les principales fonctionnalit√©s, ainsi que quelques d√©tails techniques sur la fa√ßon de lire des vid√©os YouTube dans votre application Android sans utiliser les API Google et les wrappers Web. </p><a name="habracut"></a><br><h3 id="na-glavnom-ekrane-i-na-ekrane-pleera-sluchaynye-rekomendacii-iz-nesluchaynyh-kanalov">  Sur l'√©cran principal et sur l'√©cran du lecteur: recommandations al√©atoires de canaux non al√©atoires </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/xm/4a/xq/xm4axqnezlqjwvp9wvli8jqwzlg.png" width="600"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ty/zu/p2/tyzup21qm5fqylfdbeusvaksfts.png" width="600"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/o9/ot/xv/o9otxvwiwfps_acte3fjlw-yzao.png" width="600"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/w2/tc/ko/w2tckomrdku1pbpcp0owbwlwnbq.png" width="600"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/q7/xq/nc/q7xqncnblxcnqg2mkvg2s_pfb_o.png" width="600"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/nf/vw/lx/nfvwlx-kkiwjzshn4qimtjiq65c.png" width="600"></a> </p><br><h3 id="mgnovennyy-poisk-po-lokalnoy-baze">  Recherche de base de donn√©es locale instantan√©e </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/nv/p8/ga/nvp8gak5tcomv-ybxxnumk3-wfo.png" width="190"></a>  =&gt; <a href=""><img src="https://habrastorage.org/webt/v6/gi/jr/v6gijredqlwmps9caerjcock7hi.png" width="560"></a> </p><br><h3 id="dobavit-novyy-kanal-ili-pleylist">  Ajouter une nouvelle cha√Æne ou liste de lecture </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/qc/1e/p6/qc1ep6rpukdgrbfmiwaivprjx1w.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/3c/y3/qm/3cy3qmvnqncbg-cmxfdll7xtgog.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/u8/ki/xf/u8kixf0ygibuyaahrbjjfl0obcq.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/x8/c0/kx/x8c0kx1f8tbsqov0fgu4lpejzbs.png" width="190"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/mr/er/it/mreritulfhtlbskcxchxzh-4qti.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/vo/ao/jn/voaojnv-b7kfdperixfcm618_tg.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/hu/ad/3t/huad3tbkk36d3udfwpfhgozfhfu.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/fe/2x/1p/fe2x1pyha_ccukl_mvweghasmqy.png" width="190"></a> </p><br><p>  Recherchez par nom en ligne ou ins√©rez une adresse connue.  La liste des clips de cha√Æne ou de playlist est enregistr√©e dans la base de donn√©es locale, les ic√¥nes ne sont pas mises en cache. </p><br><h3 id="dinamicheskiy-pleylist--igrat-rezultaty-poiska">  Liste de lecture dynamique - lecture des r√©sultats de recherche </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/mw/bb/su/mwbbsuevmg76hrqojuw_hy25rrk.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/zq/wi/bd/zqwibdvjxb-lu8wgkmz96mhjsye.png" width="200"></a>  =&gt; <a href=""><img src="https://habrastorage.org/webt/av/du/mq/avdumqw_ak4pjgiqpjpseqpluky.png" width="200"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/yp/u_/8h/ypu_8hv-3avu1eodjuckeuat-sg.png" width="600"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ka/lq/f7/kalqf78l73h7fraeb8lh3z5vtbe.png" width="600"></a> </p><br><p>  Dans les recommandations ci-dessous, la vid√©o ne contiendra que des vid√©os r√©pondant √† la requ√™te de recherche. </p><br><p>  De m√™me, si vous ouvrez une vid√©o √† partir des param√®tres de la liste de lecture, seuls les clips de la m√™me liste de lecture seront dans la liste des recommandations. </p><br><h3 id="pleylisty-i-kanaly-mozhno-vremenno-vyklyuchat-i-snova-vklyuchat">  Les listes de lecture et les cha√Ænes peuvent √™tre temporairement d√©sactiv√©es puis r√©activ√©es </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/tz/64/9z/tz649zfck92hi9jtpd1lbln4u1k.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/p5/om/38/p5om38mwyx6kil7qufh9jzqjbf0.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/1x/zo/n6/1xzon61-sbzhypdbvfvspnmrgsm.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/af/3d/lw/af3dlwczwlmfjkbvacyombog0fa.png" width="190"></a> </p><br><p>  <em>Remarque: les vid√©os de la liste de lecture d√©sactiv√©e dispara√Ætront √©galement des r√©sultats de recherche, de l'historique de navigation et de votre liste de favoris.</em>  <em>Mais ne vous inqui√©tez pas, ils r√©appara√Ætront imm√©diatement apr√®s la r√©activation de la liste de lecture.</em> </p><br><h3 id="vnesti-rolik-v-chernyy-spisok">  Liste noire </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/de/yg/fa/deygfamvxtgx4vexzp4b7rvclwg.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/pc/p9/_0/pcp9_0bp_zsgfaaf9q6wetmh988.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/go/k0/26/gok026tul7xfp8y76jtb8_ay9a0.png" width="200"></a> </p><br><p>  Un clip bloqu√© n'appara√Ætra pas dans les recommandations, dans les r√©sultats de recherche, dispara√Ætra de votre liste de favoris et de votre historique de navigation.  La vid√©o sera toujours visible dans les param√®tres de la playlist. </p><br><p>  Affichez la liste noire et r√©activez les √©l√©ments bloqu√©s par erreur: <br>  <em>Param√®tres&gt; menu d'en-t√™te&gt; Liste noire</em> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/6t/ew/-r/6tew-rtkldkr8wb2ps0tf9co3qk.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/kn/6v/ke/kn6vke96-92lpkwopb58z0tlmyo.png" width="200"></a> </p><br><h3 id="lyubimye-roliki-i-istoriya-prosmotrov">  Vid√©os favorites et historique des vid√©os regard√©es </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/qp/iy/9m/qpiy9mzysnj_q9yxcuohsochhh0.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/f-/ka/vz/f-kavza5992wz030cq0ef6rodjk.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/r-/wz/za/r-wzza9nzhzez17vzkbubiel528.png" width="200"></a> </p><br><p>  Les vid√©os favorites sur l'√©cran du lecteur sont marqu√©es d'un ast√©risque dans le coin sup√©rieur droit. </p><br><h3 id="kontekstnye-menyu-v-zagolovke-ekrana-i-po-dolgomu-kliku-v-galereyah-i-spiskah">  Menus contextuels dans le titre de l'√©cran et clic long dans les galeries et les listes </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/3f/pg/4a/3fpg4a-zqgn0h10pft56x6p_-fi.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/ju/zg/-a/juzg-a9o97kykwzriroe_lnukt4.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/ie/fb/-7/iefb-7yqxaym3ristff37huzz4s.png" width="190"></a> <a href=""><img src="https://habrastorage.org/webt/nl/uf/-w/nluf-w464pfo-fmle_qn0xm9gpk.png" width="190"></a> </p><br><p>  Copiez le nom ou l'adresse de la vid√©o ou de la liste de lecture sur l'√©cran de visualisation ou dans n'importe quelle liste. </p><br><h2 id="bystryy-start--dobavit-rekomendovannye-kanaly-i-pleylisty">  D√©marrage rapide - Ajouter des cha√Ænes et des listes de lecture recommand√©es </h2><br><p> <a href=""><img src="https://habrastorage.org/webt/bb/82/_y/bb82_ydj_6j9qrkwqhdmakps-hc.png" width="200"></a> <a href=""><img src="https://habrastorage.org/webt/nt/6m/hm/nt6mhmnlggxi3n1z43rhprgidh4.png" width="200"></a>  =&gt; <a href=""><img src="https://habrastorage.org/webt/mg/pz/by/mgpzbyxxq2u2ioeqmr2nlkuf_qg.png" width="200"></a> </p><br><p>  L'application ressemblera imm√©diatement aux captures d'√©cran ci-dessus. </p><br><p>  Les cha√Ænes et listes de lecture inutiles peuvent √™tre d√©sactiv√©es ou supprim√©es dans les param√®tres. </p><br><h2 id="ustanovka">  L'installation </h2><br><p>  Page du projet: <a href="https://github.com/sadr0b0t/yashlang/">https://github.com/sadr0b0t/yashlang/</a> <br>  en anglais: <a href="">https://github.com/sadr0b0t/yashlang/blob/master/README.en.md</a> <br>  versions: <a href="https://github.com/sadr0b0t/yashlang/releases">https://github.com/sadr0b0t/yashlang/releases</a> </p><br><ul><li>  Il n'y a pas de Google sur et bient√¥t (Google interdit les applications qui contournent l'API analysant leur site, y compris le Channel Whitelist ou le lecteur NewPipe mentionn√©) </li><li>  Collecter depuis la source: <a href="https://github.com/sadr0b0t/yashlang/">https://github.com/sadr0b0t/yashlang/</a> </li><li>  T√©l√©chargez l'apk depuis la section des versions: <a href="https://github.com/sadr0b0t/yashlang/releases">https://github.com/sadr0b0t/yashlang/releases</a> </li><li>  J'esp√®re qu'apr√®s un certain temps, il appara√Ætra dans le catalogue <a href="https://f-droid.org/">F-Droid</a> (la <a href="https://gitlab.com/fdroid/rfp/issues/1162">demande d'ajout semble √™tre approuv√©e</a> , mais n'a pas √©volu√© depuis pr√®s d'un mois), mais pas </li></ul><br><p>  Gardez √† l'esprit que le basculement entre diff√©rentes versions de diff√©rentes sources sur le m√™me appareil ne fonctionnera pas en raison de signatures diff√©rentes du fichier apk, avant d'installer la version √† partir d'une nouvelle source, vous devrez d'abord supprimer la version install√©e avec les donn√©es - cache de playlist et historique de navigation (ou comprendre comment ceux-ci transfert de donn√©es). </p><br><h2 id="tehnicheskie-detali">  D√©tails techniques </h2><br><p>  Ne n√©cessite pas de compte Google / YouTube, seul Internet est n√©cessaire, utilise des biblioth√®ques: </p><br><ul><li>  <a href="https://github.com/TeamNewPipe/NewPipeExtractor/">NewPipeExtractor</a> pour recevoir des donn√©es du service YouTube et </li><li>  <a href="https://exoplayer.dev/">ExoPlayer</a> pour lire des vid√©os. </li></ul><br><p>  Open source, licence GPLv3 gratuite. </p><br><p>  <em>Question: Est-il l√©gal d'analyser des sites sans la permission (ou avec une interdiction explicite) des auteurs?</em>  <em><a href="https://channelwhitelist.tilda.ws/">Google supprime les applications de Google</a> qui n'utilisent pas leurs API, mais analysent leurs sites, car</em>  <em>ils violent leur accord d'utilisation.</em> <br>  <em>r√©ponse: bien s√ªr, l√©galement, c'est √† vous de d√©cider quel outil utiliser pour lire les informations accessibles au public.</em>  <em>De plus: le <a href="https://habr.com/ru/company/globalsign/blog/466911/">tribunal am√©ricain a compl√®tement l√©galis√© le grattage de sites Web et a interdit qu'il soit techniquement g√™n√©</a> , mais Gul peut avoir une opinion diff√©rente, je n'ai personnellement pas envie d'aller devant le tribunal am√©ricain pour les convaincre.</em> </p><br><h2 id="nemnogo-koda">  Du code </h2><br><p>  La biblioth√®que <a href="https://github.com/TeamNewPipe/NewPipeExtractor/">NewPipeExtractor</a> est un projet auxiliaire du lecteur <a href="https://github.com/TeamNewPipe/NewPipe">NewPipe</a> qui vous permet de t√©l√©charger une liste de clips pour une cha√Æne ou une liste de lecture sp√©cifi√©e, de t√©l√©charger des informations d√©taill√©es sur une vid√©o connue (ce qui est visible sur la page Web de la vid√©o), de recevoir l'adresse de l'ic√¥ne vid√©o et √©galement de recevoir l'adresse du flux vid√©o. </p><br><p>  Le code pour t√©l√©charger la playlist est un peu lourd, donc je ne le donnerai pas ici, √† quiconque est int√©ress√© - regardez la source, en gros c'est la classe <a href="">ContentLoader</a> . </p><br><p>  Voyons comment obtenir l'adresse du flux vid√©o √† l'adresse de la page publique de la vid√©o et la lire dans le lecteur. </p><br><p>  Connectez la biblioth√®que √† <br>  <a href="https://github.com/sadr0b0t/yashlang/blob/master/app/build.gradle">app / build.gradle</a> </p><br><pre><code class="json hljs">dependencies { ... // NewPipe: youtube parser // https://github.com/TeamNewPipe/NewPipeExtractor implementation <span class="hljs-string"><span class="hljs-string">"com.github.TeamNewPipe:NewPipeExtractor:v0.17.4"</span></span> ... }</code> </pre> <br><p>  Il est curieux qu‚Äôapr√®s cela, il ne puisse plus √™tre utilis√©, car  les exemples ne jurent que par la classe Downloader manquante.  Il peut √™tre copi√© dans le projet √† partir du catalogue de tests automatiques <a href="">NewPipeExtractor / extractor / src / test / java / org / schabi / newpipe / Downloader.java</a> - fonctionne pour la version 0.17.4 (il semble que dans la nouvelle version de la biblioth√®que, cette partie a √©t√© refaite, mais encore besoin de v√©rifier). </p><br><p>  Obtenez l'adresse du flux vid√©o √† l'adresse de la page vid√©o sur le site YouTube: </p><br><p>  <a href="">app / src / main / java / su / sadrobot / yashlang / controller / ContentLoader.java</a> </p><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extractYtStreamUrl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String ytVidUrl)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ExtractionException, IOException </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// https://github.com/TeamNewPipe/NewPipeExtractor/blob/dev/extractor/src/test/java/org/schabi/newpipe/extractor/services/youtube/YoutubeStreamExtractorDefaultTest.java NewPipe.init(Downloader.getInstance(), new Localization("GB", "en")); final YoutubeStreamExtractor extractor = (YoutubeStreamExtractor) YouTube .getStreamExtractor(ytVidUrl); extractor.fetchPage(); final String streamUrl = extractor.getVideoStreams().size() &gt; 0 ? extractor.getVideoStreams().get(0).getUrl() : null; // for (final VideoStream stream : extractor.getVideoStreams()) { // stream.getUrl(); // } return streamUrl; }</span></span></code> </pre> <br><p>  L'adresse vid√©o de ytVidUrl peut √™tre l'adresse publique de la page de n'importe quelle vid√©o sur le site Web YouTube, par exemple <a href="https://www.youtube.com/watch%3Fv%3Dpd2RlatmNRk">https://www.youtube.com/watch?v=pd2RlatmNRk</a> </p><br><p>  Le joueur sera <a href="https://exoplayer.dev/">ExoPlayer</a> de Google lui-m√™me.  Ce n'est pas un wrapper Web sur YouTube, mais un v√©ritable lecteur int√©gr√© pour lire toutes les vid√©os, assez flexible et personnalisable.  Y compris la possibilit√© de lire des flux vid√©o √† partir de YouTube, si vous sp√©cifiez l'adresse correcte.  Nous venons de recevoir l'adresse du flux, nous allons donc voir comment l'envoyer au lecteur. </p><br><p>  Connectez la biblioth√®que au <a href="https://github.com/sadr0b0t/yashlang/blob/master/app/build.gradle">projet app / build.gradle</a> : </p><br><pre> <code class="json hljs">dependencies { ... // google Exoplayer // https://github.com/google/ExoPlayer // https://exoplayer.dev/ implementation 'com.google.android.exoplayer:exoplayer:<span class="hljs-number"><span class="hljs-number">2.10</span></span><span class="hljs-number"><span class="hljs-number">.8</span></span>' ... }</code> </pre> <br><p>  Nous ne prendrons pas en compte toutes les nuances du placement du composant lecteur sur l'√©cran de l'application (vous pouvez consulter les exemples sur le site Web du projet ou dans le code), nous verrons uniquement comment commencer √† lire des vid√©os √† partir de YouTube dans le lecteur √† l'adresse ci-dessus: </p><br><p>  <a href="">app / src / main / java / su / sadrobot / yashlang / WatchVideoActivity.java</a> </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">playVideoStream</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String streamUrl, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> seekTo)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (streamUrl == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    ,    videoPlayerView.getPlayer().stop(true); } else { // https://exoplayer.dev/ // https://github.com/google/ExoPlayer final Uri mp4VideoUri = Uri.parse(streamUrl); final MediaSource videoSource = new ProgressiveMediaSource.Factory(videoDataSourceFactory) .createMediaSource(mp4VideoUri); //     ,    if (videoPlayerView.getPlayer().getPlaybackState() != Player.STATE_ENDED) { //       ,      ,  //  ,     STATE_ENDED,     //  . //    getPlayWhenReady()  true,    . // https://github.com/google/ExoPlayer/issues/2272 videoPlayerView.getPlayer().setPlayWhenReady(false); } // Prepare the player with the source. ((SimpleExoPlayer) videoPlayerView.getPlayer()).prepare(videoSource); //        // (  -  -  ,      //  seek  , ,    -   seek   ) // Exoplayer plays new Playlist from the beginning instead of provided position // https://github.com/google/ExoPlayer/issues/4375 // How to load stream in the desired position? #2197 // https://github.com/google/ExoPlayer/issues/2197 //     duration   ,     //if(seekTo &gt; 0 &amp;&amp; seekTo &lt; videoPlayerView.getPlayer().getDuration()) { if (seekTo &gt; 0) { //  5   videoPlayerView.getPlayer().seekTo(seekTo - 5000 &gt; 0 ? seekTo - 5000 : 0); } videoPlayerView.getPlayer().setPlayWhenReady(true); } }</span></span></code> </pre> <br><h2 id="izvestnye-problemy">  Probl√®mes connus </h2><br><ul><li>  Ne lira pas les vid√©os avec des restrictions d'√¢ge qui n√©cessitent une connexion √† votre compte Google / YouTube </li></ul><br><p>  par exemple: <a href="https://www.youtube.com/watch%3Fv%3DhooaKxdXbfM">Ilya Muromets, Mosfilm Film Concern</a> , <a href="https://www.youtube.com/watch%3Fv%3D2UoO2t536Ko">Ruslan et Lyudmila film series 1 / Ruslan et Lyudmila film 1, Mosfilm Film Concern</a> </p><br><p>  <em>astuce: ajoutez de telles vid√©os √† la liste noire ou demandez √† l'auteur de la vid√©o de supprimer la restriction d√©finie par erreur.</em> </p><br><ul><li>  Certaines vid√©os diffus√©es pour lesquelles le service renvoie une dur√©e nulle ne seront pas lues (pour ces vid√©os, la dur√©e dans les listes et la galerie est marqu√©e comme "[dur undef]") </li></ul><br><p>  Par exemple: <a href="https://www.youtube.com/watch%3Fv%3DfwzpCVt2ExY">attendez une minute!</a>  <a href="https://www.youtube.com/watch%3Fv%3DfwzpCVt2ExY">Tous les num√©ros Soyuzmultfilm HD (Dessins anim√©s pour enfants), Dessins anim√©s Soyuzmultfilm Studios</a> , <a href="https://www.youtube.com/watch%3Fv%3DXK1_9fw5CwA">Meilleurs dessins anim√©s Soyuzmultfilm, Dessins anim√©s Studios Soyuzmultfilm</a> </p><br><p>  <em>Astuce: ajoutez ces vid√©os √† la liste noire.</em> </p><br><ul><li>  Les vid√©os accessibles uniquement via des liens directs peuvent ne pas entrer dans la liste de lecture locale, m√™me si vous t√©l√©chargez toutes les vid√©os de l'utilisateur </li></ul><br><p>  par exemple: <a href="https://www.youtube.com/watch%3Fv%3DvwBKEKqLOLY">Taming of Fire 1 series, Mosfilm Film Concern</a> </p><br><ul><li><p>  Si vous voyez une vid√©o publique qui ne n√©cessite pas de connexion, joue dans le navigateur, mais ne joue pas dans le lecteur, envoyez un rapport de bogue (il est fort possible que le probl√®me ait d√©j√† √©t√© corrig√© dans la nouvelle version de <em>NewPipeExtractor</em> et vous avez seulement besoin de mettre √† jour l'assembly avec cette version, <a href="https://github.com/sadr0b0t/yashlang/issues/1">par exemple</a> ). </p><br></li><li><p>  L'interface peut ralentir lorsque Internet est lent (mais pas d√©sactiv√©) </p><br></li></ul><br><h2 id="v-itoge">  En fin de compte </h2><br><p>  Le fils est pass√© d'une tablette √† un t√©l√©viseur intelligent Samsung, qui ne sait pas comment ex√©cuter les applications Android.  Par cons√©quent, le meilleur contr√¥le parental est toujours personnel. </p><br><p>  Mais l'application s'est av√©r√©e assez pratique pour que je puisse commencer √† l'utiliser moi-m√™me.  La premi√®re impression des premi√®res versions de travail - est entr√©e dans un autre monde.  Tout le contenu est t√©l√©charg√© depuis YouTube, mais ce n'est plus YouTube, mais quelque chose d'autre, s√ªr et contr√¥l√©, comme s'il enlevait un scolopendre de l'≈ìil et le mettait dans un bocal en verre.  Et c'est dans les recommandations. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr482874/">https://habr.com/ru/post/fr482874/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr482862/index.html">Y a-t-il un GameDev √† Sakhaline? 1.V</a></li>
<li><a href="../fr482864/index.html">Vid√©o surveillance √† domicile. Sch√©ma de maintenance d'une archive vid√©o sans registraire √† domicile</a></li>
<li><a href="../fr482866/index.html">Vaut-il la peine d'acheter du Bitcoin l'ann√©e prochaine et combien cela co√ªtera</a></li>
<li><a href="../fr482870/index.html">Comment j'ai achet√© un ordinateur portable verrouill√© sur eBay et essay√© de faire mon AntiTheft bas√© sur IntelAMT</a></li>
<li><a href="../fr482872/index.html">Des polygones dans un autre monde</a></li>
<li><a href="../fr482876/index.html">Calcul du co√ªt de production d'√©lectricit√© solaire pour les besoins propres d'un m√©nage dans le centre de l'Europe</a></li>
<li><a href="../fr482878/index.html">Comment j'ai recherch√© la d√©finition de ¬´produit¬ª</a></li>
<li><a href="../fr482882/index.html">Le moteur comme frein √©lectromagn√©tique</a></li>
<li><a href="../fr482884/index.html">Le√ßon du soir: √©criture de la coloration syntaxique</a></li>
<li><a href="../fr482886/index.html">Analyse Habra: la dur√©e de publication est-elle importante?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>