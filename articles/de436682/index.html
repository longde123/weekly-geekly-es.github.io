<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò≠ üîà üé• Erstellen Sie kein eigenes JL (DSL), um die Funktionalit√§t der Anwendung zu erweitern üç≤ üë®üèº‚Äçüîß üßìüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn Sie dem Benutzer die M√∂glichkeit geben m√∂chten, Plugins f√ºr Ihre Anwendung zu schreiben, stehen Sie vor der Wahl, wie die API bereitgestellt werd...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen Sie kein eigenes JL (DSL), um die Funktionalit√§t der Anwendung zu erweitern</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436682/"><p>  Wenn Sie dem Benutzer die M√∂glichkeit geben m√∂chten, Plugins f√ºr Ihre Anwendung zu schreiben, stehen Sie vor der Wahl, wie die API bereitgestellt werden soll.  Unter dem Schnitt werde ich zeigen, warum die schlechteste L√∂sung daf√ºr darin besteht, Ihre eigene Programmiersprache zu erfinden und Quellcodes sowie M√∂bel zu analysieren. </p><br><p><img src="https://habrastorage.org/webt/mm/z3/fl/mmz3flzbwecfpjejtazzand6dfs.png" alt="CPAP"></p><a name="habracut"></a><br><h2 id="yap--eto-ne-osnovnaya-funkciya-prilozheniya">  PL ist nicht die Hauptfunktion der Anwendung </h2><br><p> Stellen Sie sich vor, wir h√§tten die Produktion von modularen M√∂beln er√∂ffnet.  Es gibt einige Grundelemente: Arbeitsplatten, Untersetzer, Nachttische usw.  Mit der Holzverarbeitung ist eine Produktionslinie verbunden: Werkzeugmaschinen, S√§gen, Lacke, alle mit der neuesten Technologie.  Aber das alles muss irgendwie zusammengehalten werden.  Wir wissen, dass es 100.500 Unternehmen gibt, die sich auf die Herstellung von Hardware und Schrauben spezialisiert haben. Es gibt einige Standards f√ºr M√∂belbefestigungen, die von einer Gemeinschaft von Fachleuten erfunden wurden, um ihren Kunden das Leben zu erleichtern.  Wie weitsichtig wird die Entscheidung sein, eine zus√§tzliche Linie f√ºr die Herstellung eigener Schrauben, Muttern und Winkel einzusetzen? </p><br><p>  Was k√∂nnen wir gewinnen? </p><br><ul><li>  Auf diese Weise k√∂nnen wir <abbr title="Wenn Ihr Steinway-Klavier mindestens einen Teil hat, der nicht von Steinway stammt, ist es nicht Steinway">unser Produkt</abbr> so <abbr title="Wenn Ihr Steinway-Klavier mindestens einen Teil hat, der nicht von Steinway stammt, ist es nicht Steinway">brandmarken</abbr> , dass der Hamster seine "Originalit√§t" sp√ºrt und mehr Geld tr√§gt. </li><li>  Vielleicht k√∂nnen wir dadurch f√ºr keine der Schrauben das Urheberrecht bezahlen oder das Logistikproblem l√∂sen. </li><li>  Wir k√∂nnen in einen neuen Markt f√ºr Schrauben und Muttern eintreten und unseren eigenen Standard setzen, der <abbr title="Wo ist jetzt der 2,5 mm TRS (Jack)?">schneller, besser und h√∂her ist.</abbr> </li></ul><br><p>  Aber lass uns sauber sein. </p><br><ul><li>  Ilitismus ist die Arbeit von Verk√§ufern.  Der Verk√§ufer wird die Marke mit oder ohne neue Produktionslinie zur Elite machen oder nicht. </li><li>  Das Urheberrecht ist in der Regel (nat√ºrlich nicht immer) billiger als die Entwicklung von Grund auf neu.  Wenn Sie das Problem der Bereitstellung eines Elements durch die Bereitstellung einer neuen Produktionslinie l√∂sen, versch√§rfen Sie es nur. </li><li>  Wenn wir ein neues T√§tigkeitsfeld f√ºr uns selbst ausprobieren m√∂chten, m√ºssen wir es nicht mit dem verbinden, in dem wir bereits Profis sind.  Es mag scheinen, dass es einfacher ist, die Schrauben mit den M√∂beln zu dr√ºcken, aber wenn die Schrauben nicht hochfliegen, ziehen sie die M√∂bel mit sich.  Zumindest das, was bei Kunden schon kostet. </li></ul><br><p>  Zur√ºck zu unseren Schafen: Wenn Sie ein √ñkosystem f√ºr die Erweiterungen Ihrer Anwendung erstellen, haben Sie eine <strong>Anwendung</strong> .  Es tut etwas Gutes, etwas, in dem du gut bist. </p><br><h2 id="ksp--kontakt-script-processor-ili-liniya-proizvodstva-boltov-v-mire-digital-audio">  KSP - Kontakt Script Processor oder Bolzenproduktionslinie in der digitalen Audiowelt </h2><br><p><img src="https://habrastorage.org/webt/e1/ky/8h/e1ky8heowpw6mhn41blmegpt6os.png" alt="Kontakt"></p><br><p>  Ich erz√§hle Ihnen eine Geschichte √ºber eine solche Sprache: </p><br><p>  <strong>Kontakt</strong> ist ein Strampler (Sampler) der √∂sterreichischen Firma <strong>Native Instruments</strong> .  Es ist derzeit sehr schwierig, ein Projekt mit virtuellen Tools zu finden, in denen es nicht verwendet wird.  In den letzten 10 Jahren hat Kontakt den gr√∂√üten Teil des Marktes f√ºr gesampelte Instrumente besetzt.  Das Geheimnis ist einfach: Kontakt schlug einmal zwei Innovationen vor, die den Weg f√ºr die Entwicklung gesampelter virtueller Instrumente ebneten. </p><br><p>  Die erste Neuerung stand in direktem Zusammenhang mit ihrer Hauptfunktion: Sie handhabte den Speicher sehr sorgf√§ltig (und die Samples in WAV sind der gleiche Esser, sowohl Festplatte als auch RAM).  <strong>NI</strong> hat ein <em>verlustfreies</em> Komprimierungsformat mit schneller Dekodierung erstellt und f√ºr seine Zeit ein revolution√§res Audiopuffersystem geschrieben. </p><br><h3 id="vtoroy-innovaciey-stal-ksp">  Die zweite Neuerung war KSP </h3><br><p>  Vor dem Kontakt gab es zwei M√∂glichkeiten, aufgenommene Samples funktional in einem MIDI-gesteuerten Instrument zu organisieren: </p><br><ul><li>  Schreiben Sie Ihre eigene Engine von Grund auf in C ++ oder in einer anderen Sprache, die Steinbergs VST SDK verwenden kann (und es gibt andere Plugin-Formate, z. B. AAX). </li><li>  Verwenden Sie einen vorgefertigten Sampler f√ºr Musiker, die nicht mit Programmierung vertraut sind, aber Sounds haben, die in einem System organisiert werden m√ºssen.  Sagen wir <strong>Giga Studio</strong> .  Aber solche Strampler waren in der Regel entweder geschlossen, oder um ihre Arbeit zu beenden, ben√∂tigten sie nicht weniger Personal als die blo√üe Entwicklung im Rahmen des VST SDK. </li></ul><br><p>  Der Kontakt freute sich sowohl dar√ºber als auch dar√ºber: F√ºr das schnelle Prototyping gibt es eine praktische Benutzeroberfl√§che, die f√ºr jeden Musiker, der das Handbuch gelesen hat, verst√§ndlich ist, und zur weiteren Verfeinerung gibt es nicht weniger <strong>eine Programmiersprache</strong> mit Bedingungen, Funktionen (ab Version 4) und einer Standardbibliothek, die die API darstellt zu den meisten Funktionen, die √ºber die GUI implementiert wurden, sowie zu den Parametern f√ºr das direkte Abspielen von Samples.  Unter anderem wurde es ab Version 2 m√∂glich, die Benutzeroberfl√§che mit allen m√∂glichen Pfeifen und F√§lschungen anzupassen, wodurch es m√∂glich wurde, ihre Einzigartigkeit in nahezu unbegrenztem Ma√üstab zu zeigen.  Und der Entwicklercode ist zweimal nicht sichtbar: Verschleierung und Schutz vor <abbr title="Ja, in der Warez-Version funktioniert es nicht">Werkzeugwechsel</abbr> . </p><br><p>  Angesichts der wachsenden Popularit√§t des Motors sowie einer beeindruckenden Phase der aktiven Entwicklung des Stramplers ist Kontakt heute eine Art Kalaschnikow-Sturmgewehr in der Welt von Digital Audio.  Es ist leicht zu erlernen, zuverl√§ssig wie ein Panzer, hat die F√§higkeit, innerhalb angemessener Grenzen f√ºr sich selbst zu dopilka, Geliebte, und bietet einen riesigen Markt f√ºr zufriedene Benutzer. </p><br><h3 id="ne-vse-tak-raduzhno">  Nicht alles ist so rosig </h3><br><p>  Das Unvermeidliche geschah: Innovation in Form von KSP ist zu einer Gei√üel geworden.  Um die Syntax f√ºr Dummies, die Musiker sind, zug√§nglich zu machen, anstatt die Implementierung der API in menschlicher Sprache zu l√∂sen, schrieb Nativs einen eigenen Interpreter f√ºr ihre eigene Sprache, dessen Architektur zun√§chst keinen derart st√ºrmischen Flug der Vorstellungskraft von Werkzeugentwicklern voraussetzte, den wir jetzt beobachten.  Bereits in Version 3 verloren Natives die Hoffnung, mit dem Appetit der Benutzer Schritt zu halten, und begannen einfach, die neuen Funktionen der Standardbibliothek zu nutzen, sodass Benutzer die Codeentwicklungsumgebung selbst herausfinden konnten. </p><br><p> Dar√ºber hinaus erschien schon damals <strong>Nils Lieberg KScriptEditor</strong> , <strong>gespalten</strong> mit <strong>Scintilla</strong> , das seit langem als Haupt-IDE f√ºr KSP dient.  Es ist l√§cherlich zu sagen, aber als die Nativees erkannten, dass der Kontakt nicht mit der Gr√∂√üe der eingespeisten Quelle fertig werden konnte, f√ºhrten sie Funktionen in die Sprache ein, ohne sich auch nur darum k√ºmmern zu m√ºssen, ihnen Argumente zu √ºbergeben.  Einen Monat sp√§ter erschien in <code>taskfunc</code> eine Taskfunktion, die Argumente an Funktionen √ºbergab, die keine Argumente annehmen. </p><br><p>  Nach einer Weile erkannte Niels, dass er auf den Rechen der Eingeborenen trat: Es machte keinen Sinn, eine eigene IDE zu entwickeln.  Er portierte den Compiler und implementierte die IDE-Funktionalit√§t nach SublimeText2 und winkte.  Im Moment werden die Z√ºgel von SublimeKSP anscheinend vom Entwickler von <abbr title="Kontakt Tool Development Company">Fluffy Audio getragen</abbr> . </p><br><p><img src="https://habrastorage.org/webt/6j/fg/yx/6jfgyxlkmajwlnkdxnibbd-f8zg.png" alt="Das dritte Mal auf dem gleichen Rechen"></p><br><h3 id="nu-vy-ponyali">  Nun, du verstehst) </h3><br><p>  Und wieder, bereits ein Codegenerator, der nicht weniger als eine Sprache ist, mit einem Importsystem, einem Parser, einem Compiler und einer anderen Syntax als KSP, der jedoch aus wissenschaftlich unbekannten Gr√ºnden die Abw√§rtskompatibilit√§t unterst√ºtzt, stellt sich heraus, dass es sich um einen schrecklichen Berg von Kr√ºcken handelt, der nicht weggeworfen werden kann aufgrund der Abw√§rtskompatibilit√§t von Projekten von Bibliotheksentwicklern, die ihre KSP-Engines seit Jahren entwickeln. </p><br><p>  Angenommen, das Importsystem arbeitet global in Bezug auf die Datei, aus der die Kompilierung gestartet wird. Um ein Modul in einem Unterordner zu kompilieren, m√ºssen die Pfade in den Importen entsprechend seiner Position in der Projektstruktur vollst√§ndig ge√§ndert werden.  Und der Typ, der ihn unterst√ºtzt, w√ºrde das gerne √§ndern, aber dann wird er die Projekte des gleichen <abbr title="ein anderes Unternehmen, das Tools f√ºr Kontakt entwickelt">Spitfire Audio</abbr> weit und lange brechen.  Und diese Tatsache allein erschwert das modulare Testen (sagen wir nichts √ºber Unit-Tests) zur H√∂lle. </p><br><p>  Es scheint, dass die L√∂sung des Problems darin besteht, Symlinks zu verwenden, aber irgendwo funktioniert es nicht wie erwartet, und Symlinks funktionieren nur teilweise.  Diese Art von Problem ist nicht eine Sache.  Nach Niels wurde die Entwicklung unter anderem nicht durch Modifizieren des Compilers selbst durchgef√ºhrt, der bereits analysierten Code empf√§ngt.  Aus Gr√ºnden der Abw√§rtskompatibilit√§t werden Plug-Ins mit erweiterter Syntax hinzugef√ºgt, von denen jede die urspr√ºnglich in Zeilen geschnittenen Quellen empf√§ngt, sie selbst analysiert und √Ñnderungen vornimmt. </p><br><p>  Angesichts der Tatsache, dass der gr√∂√üte Teil der Pr√§prozessorlogik auf Makros und Inline-Funktionen beruht, die den Code auf einer riesigen Zeichenfl√§che bereitstellen, auf der 80% der immer wahren oder immer falschen Bedingungen gespeichert sind (indem die Eingabe der Bedingung durch Konstanten ersetzt wird), die auf der B√ºhne reduziert werden Beim Parsen von AST ist die Kompilierungszeit der "richtigen" Quelle vergleichbar mit Bei Projekten ist dies eine interpretierte Sprache f√ºr Dummies. </p><br><p>  Zu sagen, dass KSP f√ºr Entwickler zu einem Schmerz geworden ist, bedeutet nichts zu sagen. </p><br><h3 id="ne-kontaktom-edinym">  Kein einziger Kontakt. </h3><br><p>  Ich kann keine Beispiele aus anderen Bereichen nennen, aber hier aus dem Bereich von DigitalAudio: </p><br><ul><li>  <strong>Lemur</strong> ist eine Schaufelanwendung mit einem Desktop-Editor, mit dem Sie schnell sch√∂ne Schnittstellen f√ºr die Kommunikation von Schaufeln mithilfe des <abbr title="Open Sound Control ist ein Protokoll zur Steuerung von Ger√§ten und Programmen, das MIDI im Bereich der Automatisierung von Audioparametern ersetzt hat: zum Beispiel Lautst√§rkeregler und Panoramen.">OSC-</abbr> Protokolls erstellen k√∂nnen.  Es verf√ºgt √ºber einen eigenen PL, der in speziellen <em>Skriptobjekten</em> verwendet werden kann, die im gesamten Projektbaum verteilt sind.  Es gibt keine M√∂glichkeit, einen Compiler daf√ºr zu erstellen, wie er f√ºr KSP erstellt wurde. </li><li>  <strong>Reaper</strong> - <abbr title="Digitale Workstation. Das Hauptwerkzeug f√ºr Toningenieure und Arrangeure">DAW</abbr> mit einem entwickelten √ñkosystem der Erweiterungsentwicklung.  Daher habe ich, wo immer m√∂glich, meinen <abbr title="abgeschnittene Version von JavaScript (anscheinend f√ºr die Analysegeschwindigkeit)"><em>JSFX-Sprachcode (ReaScript)</em></abbr> als API f√ºr C ++, Lua und Python dupliziert. </li><li>  <strong>HISE</strong> ist ein junger <abbr title="Von Steinberg entwickeltes universelles DAW-Plugin-Format">VST \ VSTi-</abbr> Autor und <em>-Bauer, der</em> fr√ºher oder sp√§ter Kontakt des schwedischen Entwicklers <em>Christoph Haart</em> t√∂ten wird.  Im Editor selbst k√∂nnen Sie in modifiziertem JavaScript schreiben, das von C ++ - Objekten analysiert und in die Bin√§rdatei kompiliert wird.  Die Idee mit Ihrem eigenen Parser zur Einf√ºhrung zus√§tzlicher Entit√§ten (z. B. Registervariablen, wenn ich richtig √ºbersetzt habe) funktionierte, bis Benutzer ihren Code aus dem HISE-Editor mit Syntaxhervorhebung, statischer Analyse und <em>JsPrettier-</em> Formatierungswerkzeugen auf ihre bevorzugten IDEs <em>√ºbertragen haben</em> .  Jetzt skizzierte Christophe einige Header-Dateien zum Kompilieren statischer Bibliotheken in C ++, die dann als Module im Editor verwendet werden k√∂nnen.  Parallel dazu erg√§nzt er HISEScript (weil JavaScript nicht mehr als solches bezeichnet werden kann) weiterhin mit neuen Funktionen, aber wir wissen, dass ... </li></ul><br><h1 id="vyvod">  Fazit </h1><br><p>  Schreiben Sie Ihre eigene Anwendung und widmen Sie sich der Hauptfunktionalit√§t. Verschwenden Sie keine Zeit mit Parser, Semantik und Syntax.  Dies ist interessant, w√§hrend Sie beginnen, f√ºhrt aber mit hoher Wahrscheinlichkeit zu einer Sackgasse.  Die Programmiersprache kann nicht Teil der Anwendung sein: Es handelt sich um eine Art separate Produktionslinie, die viel Zeit ben√∂tigt, um die Community zu warten, zu √§ndern und zu unterst√ºtzen.  Wenn Sie wiederum hoffen, den Schwellenwert f√ºr Dummies zu senken, lassen Sie ihn fallen.  Eine echte Teekanne hat in der Regel Angst, √ºberhaupt etwas zu drucken, und k√ºmmert sich nicht um Ihre einfache Syntax. </p><br><p>  Gleichzeitig k√∂nnen Sie f√ºr Anf√§nger-Plug-In-Entwickler f√ºr Ihr Programm einfach einen kleinen <em>QuickStartGuide erstellen</em> , der sie in die Grundkonzepte Ihres gew√§hlten PL einf√ºhrt, um die Funktionalit√§t zu erweitern und ihm langsam Ihre API zuzuf√ºhren, die Teil des √ñkosystems dieser Sprache ist. </p><br><p>  <em>PS Nein, es ist auch eine schlechte Idee, einen eigenen Parser f√ºr einen vorgefertigten PL zu schreiben.</em> </p><br><p>  Ich freue mich √ºber jede Kritik an dem Artikel, dem ersten Pfannkuchen und allem. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de436682/">https://habr.com/ru/post/de436682/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de436664/index.html">Einf√ºhrung in die .NET Community Standup-Serie</a></li>
<li><a href="../de436668/index.html">K√∂nnen Statistiken mit einer kleinen Datenmenge gelesen werden?</a></li>
<li><a href="../de436670/index.html">So rollen Sie Updates in der Produktion automatisch</a></li>
<li><a href="../de436674/index.html">Reverse Engineering Fantastic Dizzy</a></li>
<li><a href="../de436676/index.html">Wie man das ganze Land DDoS</a></li>
<li><a href="../de436684/index.html">Jubil√§um Android 10 (Q). Was ist jetzt bekannt?</a></li>
<li><a href="../de436686/index.html">JPEG aus der 3D-Welt. Was ist glTF?</a></li>
<li><a href="../de436688/index.html">Der IT-Riese verl√§sst den Markt f√ºr Chips f√ºr Rechenzentren - sagen Sie uns, was dies f√ºr die Branche bedeutet</a></li>
<li><a href="../de436690/index.html">[Fragen - Antworten] zu geistigem Eigentum und Datenschutz</a></li>
<li><a href="../de436692/index.html">(in) Endlicher Krieg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>