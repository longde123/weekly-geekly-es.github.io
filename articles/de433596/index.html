<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ô®Ô∏è üéá üàÇÔ∏è Magellans Fehler: Puffer√ºberlauf oder Expedition um die Welt mit SQLite FTS üèÇ üßõ üë©üèº‚Äçüöí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich habe den j√ºngsten Magellan- Fehler bei Habr√© und die damit verbundenen Schwachstellen irgendwie umgangen. Ich werde versuchen, diese L√ºcke zu schl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Magellans Fehler: Puffer√ºberlauf oder Expedition um die Welt mit SQLite FTS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433596/"><p>  Ich habe den j√ºngsten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Magellan-</a> Fehler bei Habr√© und die damit verbundenen Schwachstellen irgendwie umgangen. Ich werde versuchen, diese L√ºcke zu schlie√üen. </p><br><h4 id="nemnogo-istorii">  Ein bisschen Geschichte </h4><br><ul><li>  Am 1. November 2018 flog ein Fehlerbericht mit der Nummer 900910 in Chromium ein: "Mehrere Probleme in SQLite √ºber WebSQL."  Der Fehler wird von Wenxiang Qian vom Tencent Blade Team gemeldet. </li><li>  Am 5. November 2018 wird der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fehler</a> im Kern der SQLite-Bibliothek (FTS3) geschlossen, wo er tats√§chlich fast ab dem Zeitpunkt der Erstellung des Moduls lebt, d. H.  seit November 2009. </li><li>  28. November 2018 geht es in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Chrom √ºber</a> </li><li>  Wenig sp√§ter ver√∂ffentlicht das Tencent Blade-Team eine Fehlermeldung mit dem Namen Magellan, insbesondere ohne Details preiszugeben, und weist darauf hin, dass die Ver√∂ffentlichung von vorgefertigten Exploits und PoC noch nicht geplant ist. </li><li> Eine Woche sp√§ter ist das Internet voll von PoC, abst√ºrzendem Chrome, Electron Dev-Framework usw.  Beweise und andere Informationen, dass die Sicherheitsanf√§lligkeit f√ºr b√∂swillige Zwecke verwendet wurde, sind immer noch nicht vorhanden. </li><li>  <abbr title="Dr. D. Richard Hipp, Ersteller von SQLite und Autor des Fixes">DRH</abbr> best√§tigte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bei Hacker News</a> den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verdacht,</a> dass die Sicherheitsanf√§lligkeit besteht (zumindest wenn die Ausf√ºhrung einer ‚Äûfremden‚Äú SQL-Abfrage oder eine SQL-Injektion eines √§hnlichen Szenarios zul√§ssig ist). </li></ul><br><h4 id="chto-mozhet-byt-podverzheno-uyazvimosti">  Was k√∂nnte anf√§llig sein? </h4><br><p>  M√∂glicherweise alle Ger√§te und Programme, die SQLite (mit aktiviertem FTS) verwenden oder darauf basierende Anwendungen (z. B. Chromium) verwenden oder darauf basieren.  Inwieweit sie betroffen sein k√∂nnen und wie sich ein m√∂glicher ‚ÄûVerlust‚Äú auswirkt, h√§ngt davon ab, ob ein geeigneter Angriffsvektor gefunden wird. </p><br><h4 id="nemnogo-podrobnee-o-magellan-sqlite-bughttpsbladetencentcommagellanindex_enhtml">  Ein bisschen mehr √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Magellan SQLite BUG</a> </h4><a name="habracut"></a><br><p>  Der Fehler h√§ngt mit dem √úberlauf der Summe von Ganzzahlen, auch als <abbr title="Bei der Programmierung kann die Summe der beiden Terme pl√∂tzlich kleiner sein als die gr√∂√üere">Ganzzahl√ºberlauf bezeichnet, zusammen</abbr> , der im <abbr title="integriertes SQLite-Volltextindexmodul">FTS3 / 4-</abbr> Subsystem durch √Ñndern des Index der FTS-Tabelle verursacht werden kann, was wiederum mit einer Ausnahme zum Umschreiben des Speichers oder zum Beenden f√ºhren kann. </p><br><p>  Die gezielte k√ºnstliche Anwendung dieses ganzzahligen √úberlaufs durch kompetentes "Trimmen" von Schreibpuffern f√ºhrt zu einem Speicher√ºberlauf und kann in Zukunft von speziell erstellten SQL-Abfragen verwendet werden. </p><br><p>  Theoretisch k√∂nnen daher <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">viele Anwendungen</a> , die SQLite (mit virtuellen FTS-Tabellen) verwenden, und insbesondere g√§ngige Browser, die SQLite basierend auf SQLite mit aktiviertem FTS unterst√ºtzen (z. B. Google Chrome, Chromium, Opera, Slimjet-Browser, SRWare Iron, Torch, anf√§llig sein). Comodo Dragon, CoolNovo, Yandex Browser, Vivaldi usw.). </p><br><p>  SQLite-Datenbanken sind im Allgemeinen sehr beliebt. Sie werden mithilfe von mehr als einem Dutzend Programmiersprachen, Toolchain, Frameworks usw. bereitgestellt, werden von Anwendungen sowohl f√ºr mobile Ger√§te als auch f√ºr vollwertige Computer verwendet und sind h√§ufig sogar in Serverl√∂sungen zu finden.  So speichern beispielsweise beliebte Webbrowser wie Google Chrome, Mozilla Firefox und Yandex Browser, viele Instant Messenger (z. B. WhatsApp, Viber, WeChat und andere) Daten in diesem Format usw.  usw. </p><br><p>  Derselbe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fossil SCM verwendet</a> beispielsweise die SQLite-Datenbank zum Speichern des Revisionsverlaufs und erm√∂glicht die Verwendung der Volltextindizierung √ºber FTS (und bietet Zugriff √ºber die Benutzeroberfl√§che / Web-M√ºndung, wobei beispielsweise die M√∂glichkeit besteht, eigene SQL-Abfragen zu erstellen, z. B. benutzerdefinierte Ticketberichte usw.). </p><br><p>  <em>Update: DRH, Mitautor und Entwickler von Fossil, dachte anscheinend dasselbe und schloss bereits <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die L√ºcke,</a> indem er SQLite auf 3.26.0 aktualisierte</em> </p><br><p>  Ein solcher ‚Äûvorhersehbarer‚Äú √úberlauf ist an sich keine sehr angenehme Sache, aber wenn Sie sich daran erinnern, was genau in der Bank selbst gespeichert werden kann (vom Inhalt der Magazine bis zu den Tischen selbst) ... <br>  Seien Sie also keine faulen Kameraden ... und werden aktualisiert, aktualisiert. </p><br><h4 id="gde-vzyat-fiks">  Woher bekomme ich das Update? </h4><br><p>  Der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Patch [940f2adc8541a838] wird</a> im Rahmen des SQLite 3.25.3-Updates bereitgestellt (auf das Chromium und Co. ebenfalls aktualisiert wurden, z. B. Chrome in Version 71.0.3578.80). </p><br><p>  SQLite Version 3.26 bietet au√üerdem zus√§tzliche Sicherheitsfunktionen f√ºr FTS-Container, z. B.: </p><blockquote>  Unterst√ºtzung f√ºr schreibgesch√ºtzte Schattentabellen, wenn die Option SQLITE_DBCONFIG_DEFENSIVE aktiviert ist </blockquote><br><h4 id="kakova-opasnost-etoy-uyazvimosti">  Was ist die Gefahr dieser Sicherheitsanf√§lligkeit? </h4><br><p>  Kritisch.  Erm√∂glicht die Remotecodeausf√ºhrung.  Ein Speicherverlust und ein Programmabsturz sind ebenfalls wahrscheinlich. </p><br><h4 id="est-li-primery-gotovyh-exploit-ov-pozvolyayuschie-ispolzovat-uyazvimost">  Gibt es Beispiele f√ºr vorgefertigte Exploits, um die Sicherheitsanf√§lligkeit auszunutzen? </h4><br><p>  Ja </p><br><p>  Insbesondere behauptet das Tencent Blade-Team, dass es mit dieser Sicherheitsanf√§lligkeit einen Angriff auf Google Home erfolgreich ausgef√ºhrt hat (der Zugriff auf die Beschreibung des Problems im Google Bug Tracker ist geschlossen). Wie oben erw√§hnt, ist derzeit keine Ver√∂ffentlichung des Exploit-Codes geplant. </p><br><h4 id="usloviya-ispolzovaniya-uyazvimosti">  Nutzungsbedingungen der Sicherheitsanf√§lligkeit? </h4><br><p>  Die Sicherheitsanf√§lligkeit kann remote ausgef√ºhrt werden, z. B. wenn eine bestimmte Webseite in einem Browser aufgerufen wird, oder in einem √§hnlichen Szenario, z. B. wenn SQL-Anweisungen ausgef√ºhrt werden k√∂nnen (wenn FTS nicht deaktiviert ist, wenn ein m√∂glicher Angriffsvektor erkannt wird und / oder wenn andere Faktoren vorhanden sind, die der Ausnutzung f√∂rderlich sind Schwachstellen). </p><br><p>  Dies ist √ºbrigens nicht der erste Fehler des Typs √úberlauf &amp; Puffer√ºberlauf in SQLite speziell und insbesondere im FTS-Modul (zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">[56be976859294027]</a> ), aber es ist wahrscheinlich der gr√∂√üte seiner Art in Bezug auf Bedeutung, theoretische Auswirkung und relative ‚ÄûSkalierung‚Äú in Bezug auf die m√∂gliche Anwendung und Bewertung von Konsequenzen davon. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de433596/">https://habr.com/ru/post/de433596/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de433580/index.html">Roskomnadzor plant die Einf√ºhrung eines neuen Schleusensystems im Wert von 20 Milliarden Rubel</a></li>
<li><a href="../de433582/index.html">Was ist, wenn die Gewinnbeteiligung 30/70 nicht mehr der Standard f√ºr Spieleentwickler ist?</a></li>
<li><a href="../de433586/index.html">Wie wir den Hackathon nicht gewonnen haben</a></li>
<li><a href="../de433588/index.html">Erstaunliche Leistung paralleler C ++ 17-Algorithmen. Mythos oder Wirklichkeit?</a></li>
<li><a href="../de433592/index.html">Information: Yandex.Phone</a></li>
<li><a href="../de433598/index.html">Wie LLVM die Funktion optimiert</a></li>
<li><a href="../de433600/index.html">Pixel 3 lernt, wie man die Tiefe von Fotos bestimmt</a></li>
<li><a href="../de433602/index.html">Mathematische Einfachheit kann der Geschwindigkeit der Evolution zugrunde liegen.</a></li>
<li><a href="../de433604/index.html">Komfortable Arbeit mit Android Studio</a></li>
<li><a href="../de433606/index.html">SIEM-Tiefen: Out-of-Box-Korrelationen. Teil 3.2. Ereignisnormalisierungsmethode</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>