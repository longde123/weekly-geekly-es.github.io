<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âï¸ ğŸ‘¨ğŸ» ğŸš¹ ä½¿ç”¨Either monadè¿›è¡Œä¼˜é›…çš„JavaScripté”™è¯¯å¤„ç† ğŸ‘©ğŸ»â€ğŸ”¬ ğŸ“± ğŸ³ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è®©æˆ‘ä»¬è°ˆè°ˆå¦‚ä½•å¤„ç†é”™è¯¯ã€‚ åœ¨JavaScriptä¸­ï¼Œæˆ‘ä»¬å…·æœ‰ç”¨äºå¤„ç†å¼‚å¸¸çš„å†…ç½®è¯­è¨€åŠŸèƒ½ã€‚ æˆ‘ä»¬å°†æœ‰é—®é¢˜çš„ä»£ç åŒ…å«åœ¨try...catchæ„é€ ä¸­ã€‚ è¿™ä½¿æ‚¨å¯ä»¥åœ¨tryéƒ¨åˆ†ä¸­æŒ‡å®šæ­£å¸¸çš„æ‰§è¡Œè·¯å¾„ï¼Œç„¶ååœ¨catchéƒ¨åˆ†ä¸­å¤„ç†æ‰€æœ‰å¼‚å¸¸ã€‚ ä¸é”™çš„é€‰æ‹©ã€‚ è¿™ä½¿æ‚¨å¯ä»¥ä¸“æ³¨äºå½“å‰ä»»åŠ¡ï¼Œè€Œä¸å¿…è€ƒè™‘æ¯ä¸ªå¯èƒ½çš„é”™è¯¯ã€‚ ç»å¯¹...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨Either monadè¿›è¡Œä¼˜é›…çš„JavaScripté”™è¯¯å¤„ç†</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457098/">è®©æˆ‘ä»¬è°ˆè°ˆå¦‚ä½•å¤„ç†é”™è¯¯ã€‚ åœ¨JavaScriptä¸­ï¼Œæˆ‘ä»¬å…·æœ‰ç”¨äºå¤„ç†å¼‚å¸¸çš„å†…ç½®è¯­è¨€åŠŸèƒ½ã€‚ æˆ‘ä»¬å°†æœ‰é—®é¢˜çš„ä»£ç åŒ…å«åœ¨<code>try...catch</code>æ„é€ ä¸­ã€‚ è¿™ä½¿æ‚¨å¯ä»¥åœ¨<code>try</code>éƒ¨åˆ†ä¸­æŒ‡å®šæ­£å¸¸çš„æ‰§è¡Œè·¯å¾„ï¼Œç„¶ååœ¨<code>catch</code>éƒ¨åˆ†ä¸­å¤„ç†æ‰€æœ‰å¼‚å¸¸ã€‚ ä¸é”™çš„é€‰æ‹©ã€‚ è¿™ä½¿æ‚¨å¯ä»¥ä¸“æ³¨äºå½“å‰ä»»åŠ¡ï¼Œè€Œä¸å¿…è€ƒè™‘æ¯ä¸ªå¯èƒ½çš„é”™è¯¯ã€‚ ç»å¯¹æ¯”æ— ä¼‘æ­¢çš„ifé˜»å¡ä»£ç æ›´å¥½ã€‚ <br><br> å¦‚æœæ²¡æœ‰<code>try...catch</code>åˆ™å¾ˆéš¾æ£€æŸ¥æ¯ä¸ªå‡½æ•°è°ƒç”¨çš„ç»“æœæ˜¯å¦æœ‰æ„å¤–çš„å€¼ã€‚ è¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„è®¾è®¡ã€‚ ä½†æ˜¯å¥¹æœ‰æŸäº›é—®é¢˜ã€‚ è¿™ä¸æ˜¯å¤„ç†é”™è¯¯çš„å”¯ä¸€æ–¹æ³•ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä½¿ç”¨<b>Either monad</b>ä½œä¸º<code>try...catch</code>çš„æ›¿ä»£æ–¹æ³•ã€‚ <br><br> åœ¨ç»§ç»­ä¹‹å‰ï¼Œæˆ‘è¦æ³¨æ„å‡ ç‚¹ã€‚ æœ¬æ–‡å‡å®šæ‚¨å·²ç»äº†è§£å‡½æ•°ç»„æˆå’Œcurryingã€‚ å¹¶è­¦å‘Šã€‚ å¦‚æœæ‚¨ä»¥å‰ä»æœªé‡åˆ°è¿‡å•å­ï¼Œå®ƒä»¬ä¼¼ä¹çœŸçš„å¾ˆå¥‡æ€ªã€‚ ä½¿ç”¨æ­¤ç±»å·¥å…·éœ€è¦æ”¹å˜æ€ç»´æ–¹å¼ã€‚ é¦–å…ˆï¼Œè¿™å¯èƒ½å¾ˆéš¾ã€‚ <br><br> å¦‚æœæ‚¨ç«‹å³æ„Ÿåˆ°å›°æƒ‘ï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚ æ¯ä¸ªäººéƒ½æœ‰ã€‚ åœ¨æ–‡ç« çš„ç»“å°¾ï¼Œæˆ‘åˆ—å‡ºäº†ä¸€äº›å¯èƒ½æœ‰ç”¨çš„é“¾æ¥ã€‚ ä¸è¦æ”¾å¼ƒã€‚ è¿™äº›ä¸œè¥¿ä¸€æ—¦æ¸—å…¥å¤§è„‘å°±ä¼šè¢«é™¶é†‰ã€‚ <br><a name="habracut"></a><br><h1> é—®é¢˜ä¾‹å­ </h1><br> åœ¨è®¨è®ºå¼‚å¸¸é—®é¢˜ä¹‹å‰ï¼Œè®©æˆ‘ä»¬è°ˆè°ˆä¸ºä»€ä¹ˆå®ƒä»¬ç”šè‡³å­˜åœ¨ä»¥åŠä¸ºä»€ä¹ˆ<code>try...catch</code>å—å‡ºç°ã€‚ ä¸ºæ­¤ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªæˆ‘è¯•å›¾è‡³å°‘éƒ¨åˆ†å®ç°çš„é—®é¢˜ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ªæ˜¾ç¤ºé€šçŸ¥åˆ—è¡¨çš„å‡½æ•°ã€‚ æˆ‘ä»¬å·²ç»è®¾æ³•ï¼ˆä»¥æŸç§æ–¹å¼ï¼‰ä»æœåŠ¡å™¨è¿”å›æ•°æ®ã€‚ ä½†æ˜¯ç”±äºæŸç§åŸå› ï¼Œåç«¯å·¥ç¨‹å¸ˆå†³å®šä»¥CSVæ ¼å¼ï¼ˆè€Œä¸æ˜¯JSONï¼‰å‘é€å®ƒã€‚ åŸå§‹æ•°æ®å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> æ—¶é—´æˆ³ï¼Œå†…å®¹ï¼Œå·²æŸ¥çœ‹ï¼Œhref
 2018-10-27T05ï¼š33ï¼š34 + 00:00ï¼Œ@ madhatteré‚€è¯·æ‚¨å–èŒ¶ï¼Œæœªè¯»ï¼Œhttpsï¼š//example.com/invite/tea/3801
 2018-10-26T13ï¼š47ï¼š12 + 00ï¼š00ï¼Œ@ Queenofheartsåœ¨``é—¨çƒé”¦æ ‡èµ›''è®¨è®ºä¸­æåˆ°äº†æ‚¨ï¼ŒæŸ¥çœ‹è¿‡ï¼Œhttpsï¼š//example.com/discussions/croquet/1168
 2018-10-25T03ï¼š50ï¼š08 + 00:00ï¼Œ@ cheshirecatç»™æ‚¨å’§å˜´ç¬‘ï¼Œæœªè¯»ï¼Œhttpsï¼š//example.com/interactions/grin/88 </pre><br> æˆ‘ä»¬è¦ä»¥HTMLæ ¼å¼æ˜¾ç¤ºã€‚ å®ƒå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MessageList"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Message Message--viewed"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://example.com/invite/tea/3801"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Message-link"</span></span></span><span class="hljs-tag">&gt;</span></span>@madhatter invited you to tea<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">datetime</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2018-10-27T05:33:34+00:00"</span></span></span><span class="hljs-tag">&gt;</span></span>27 October 2018<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Message Message--viewed"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://example.com/discussions/croquet/1168"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Message-link"</span></span></span><span class="hljs-tag">&gt;</span></span>@queenofhearts mentioned you in 'Croquet Tournament' discussion<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">datetime</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2018-10-26T13:47:12+00:00"</span></span></span><span class="hljs-tag">&gt;</span></span>26 October 2018<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Message Message--viewed"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://example.com/interactions/grin/88"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Message-link"</span></span></span><span class="hljs-tag">&gt;</span></span>@cheshirecat sent you a grin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">datetime</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2018-10-25T03:50:08+00:00"</span></span></span><span class="hljs-tag">&gt;</span></span>25 October 2018<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">time</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> ä¸ºäº†ç®€åŒ–ä»»åŠ¡ï¼Œç°åœ¨ä»…å…³æ³¨å¤„ç†CSVæ•°æ®çš„æ¯ä¸€è¡Œã€‚ è®©æˆ‘ä»¬ä»ä¸€äº›ç®€å•çš„å‡½æ•°å¼€å§‹å¤„ç†å­—ç¬¦ä¸²ã€‚ ç¬¬ä¸€ä¸ªå°†æ–‡æœ¬å­—ç¬¦ä¸²åˆ†ä¸ºå‡ ä¸ªå­—æ®µï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">splitFields</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">row</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> row.split(<span class="hljs-string"><span class="hljs-string">'","'</span></span>); }</code> </pre> <br> è¯¥åŠŸèƒ½åœ¨è¿™é‡Œå¾—åˆ°äº†ç®€åŒ–ï¼Œå› ä¸ºå®ƒæ˜¯æ•™æã€‚ æˆ‘ä»¬å¤„ç†é”™è¯¯å¤„ç†ï¼Œè€Œä¸æ˜¯CSVåˆ†æã€‚ å¦‚æœå…¶ä¸­ä¸€æ¡æ¶ˆæ¯åŒ…å«é€—å·ï¼Œé‚£ä¹ˆæ‰€æœ‰è¿™äº›éƒ½å°†æ˜¯é”™è¯¯çš„ã€‚ è¯·ä¸è¦ä½¿ç”¨æ­¤ä»£ç æ¥åˆ†æçœŸå®çš„CSVæ•°æ®ã€‚ å¦‚æœæ‚¨æ›¾ç»å¿…é¡»åˆ†æCSVæ•°æ®ï¼Œè¯·ä½¿ç”¨ç»è¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è‰¯å¥½æµ‹è¯•çš„CSVè§£æåº“</a> ã€‚ <br><br> æ‹†åˆ†æ•°æ®åï¼Œæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚ è¿™æ ·æ¯ä¸ªå±æ€§åç§°éƒ½ä¸CSVæ ‡å¤´åŒ¹é…ã€‚ å‡è®¾æˆ‘ä»¬å·²ç»ä»¥æŸç§æ–¹å¼åˆ†æäº†æ ‡é¢˜æ ï¼ˆç¨åä¼šè¿›è¡Œè¯¦ç»†ä»‹ç»ï¼‰ã€‚ æˆ‘ä»¬å·²ç»åˆ°äº†å¯èƒ½å‡ºé—®é¢˜çš„åœ°æ­¥ã€‚ æˆ‘ä»¬åœ¨å¤„ç†æ—¶å‡ºé”™ã€‚ å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦ä¸æ ‡é¢˜æ ä¸åŒ¹é…ï¼Œåˆ™ä¼šå¼•å‘é”™è¯¯ã€‚  ï¼ˆ <code>_.zipObject</code>æ˜¯<a href="">lodashå‡½æ•°</a> ï¼‰ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zipRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFields, fieldData</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (headerFields.length !== fieldData.length) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">"Row has an unexpected number of fields"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _.zipObject(headerFields, fieldData); }</code> </pre> <br> ä¹‹åï¼Œåœ¨è¯¥å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªæ˜“äºç†è§£çš„æ—¥æœŸï¼Œä»¥ä¾¿å°†å…¶æ˜¾ç¤ºåœ¨æˆ‘ä»¬çš„æ¨¡æ¿ä¸­ã€‚ ç»“æœå˜å¾—æœ‰äº›å†—é•¿ï¼Œå› ä¸ºJavaScriptæ²¡æœ‰å¯¹æ—¥æœŸæ ¼å¼çš„å®Œç¾å†…ç½®æ”¯æŒã€‚ åŒæ ·ï¼Œæˆ‘ä»¬é¢ä¸´æ½œåœ¨çš„é—®é¢˜ã€‚ å¦‚æœé‡åˆ°æ— æ•ˆçš„æ—¥æœŸï¼Œæˆ‘ä»¬çš„å‡½æ•°å°†å¼•å‘é”™è¯¯ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addDateStr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">messageObj</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> errMsg = <span class="hljs-string"><span class="hljs-string">'Unable to parse date stamp in message object'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> months = [ <span class="hljs-string"><span class="hljs-string">'January'</span></span>, <span class="hljs-string"><span class="hljs-string">'February'</span></span>, <span class="hljs-string"><span class="hljs-string">'March'</span></span>, <span class="hljs-string"><span class="hljs-string">'April'</span></span>, <span class="hljs-string"><span class="hljs-string">'May'</span></span>, <span class="hljs-string"><span class="hljs-string">'June'</span></span>, <span class="hljs-string"><span class="hljs-string">'July'</span></span>, <span class="hljs-string"><span class="hljs-string">'August'</span></span>, <span class="hljs-string"><span class="hljs-string">'September'</span></span>, <span class="hljs-string"><span class="hljs-string">'October'</span></span>, <span class="hljs-string"><span class="hljs-string">'November'</span></span>, <span class="hljs-string"><span class="hljs-string">'December'</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> d = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(messageObj.datestamp); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">isNaN</span></span>(d)) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(errMsg); } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> datestr = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${d.getDate()}</span></span></span><span class="hljs-string"> </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${months[d.getMonth()]}</span></span></span><span class="hljs-string"> </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${d.getFullYear()}</span></span></span><span class="hljs-string">`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {datestr, ...messageObj}; }</code> </pre> <br> æœ€åï¼Œè·å–å¯¹è±¡å¹¶å°†å…¶é€šè¿‡<a href="">æ¨¡æ¿å‡½æ•°</a>ä¼ é€’ä»¥è·å¾—HTMLå­—ç¬¦ä¸²ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rowToMessage = _.template(<span class="hljs-string"><span class="hljs-string">`&lt;li class="Message Message--&lt;%= viewed %&gt;"&gt; &lt;a href="&lt;%= href %&gt;" class="Message-link"&gt;&lt;%= content %&gt;&lt;/a&gt; &lt;time datetime="&lt;%= datestamp %&gt;"&gt;&lt;%= datestr %&gt;&lt;/time&gt; &lt;li&gt;`</span></span>);</code> </pre> <br> å¦‚æœé‡åˆ°é”™è¯¯ï¼Œä¹Ÿå¯ä»¥æ‰“å°ä¸€ä¸ªé”™è¯¯ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> showError = _.template(<span class="hljs-string"><span class="hljs-string">`&lt;li class="Error"&gt;&lt;%= message %&gt;&lt;/li&gt;`</span></span>);</code> </pre> <br> ä¸€åˆ‡å°±ç»ªåï¼Œæ‚¨å¯ä»¥ç»„åˆä¸€ä¸ªå‡½æ•°æ¥å¤„ç†æ¯ä¸€è¡Œã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFieldNames, row</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { fields = splitFields(row); rowObj = zipRow(headerFieldNames, fields); rowObjWithDate = addDateStr(rowObj); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rowToMessage(rowObj); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(e) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> showError(e); } }</code> </pre> <br> è¿™æ ·åŠŸèƒ½å°±å‡†å¤‡å¥½äº†ã€‚ è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹å®ƒå¦‚ä½•å¤„ç†å¼‚å¸¸ã€‚ <br><br><h1> ä¾‹å¤–ï¼šå¥½éƒ¨åˆ† </h1><br> é‚£ä¹ˆ<code>try...catch</code>ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ åº”å½“æ³¨æ„ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ <code>try</code>å—ä¸­çš„ä»»ä½•æ­¥éª¤éƒ½å¯èƒ½å¯¼è‡´é”™è¯¯ã€‚ åœ¨<code>zipRow()</code>å’Œ<code>addDateStr()</code>æˆ‘ä»¬æ•…æ„æŠ›å‡ºé”™è¯¯ã€‚ å¦‚æœå‡ºç°é—®é¢˜ï¼Œåªéœ€æ•è·é”™è¯¯å¹¶åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºä»»ä½•æ¶ˆæ¯å³å¯ã€‚ æ²¡æœ‰è¿™ç§æœºåˆ¶ï¼Œä»£ç å°†å˜å¾—éå¸¸ä¸‘é™‹ã€‚ è¿™æ˜¯å®ƒçš„å¤–è§‚ã€‚ å‡å®šå‡½æ•°ä¸å¼•å‘é”™è¯¯ï¼Œä½†è¿”å›<code>null</code> ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRowWithoutExceptions</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFieldNames, row</span></span></span><span class="hljs-function">) </span></span>{ fields = splitFields(row); rowObj = zipRow(headerFieldNames, fields); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rowObj === <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> showError(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Encountered a row with an unexpected number of items'</span></span>)); } rowObjWithDate = addDateStr(rowObj); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rowObjWithDate === <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> showError(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Unable to parse date in row object'</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rowToMessage(rowObj); }</code> </pre> <br> å¦‚æ‚¨æ‰€è§ï¼Œå¤§é‡æ¨¡æ¿<code>if</code> ã€‚ ä»£ç æ›´åŠ å†—é•¿ã€‚ è€Œä¸”å¾ˆéš¾éµå¾ªåŸºæœ¬é€»è¾‘ã€‚ å¦å¤–ï¼Œ <code>null</code>å¹¶ä¸èƒ½å‘Šè¯‰æˆ‘ä»¬å¤ªå¤šã€‚ æˆ‘ä»¬çœŸçš„ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸Šä¸€ä¸ªå‡½æ•°è°ƒç”¨å¤±è´¥ã€‚ æˆ‘ä»¬ä¸å¾—ä¸çŒœæµ‹ã€‚ æˆ‘ä»¬åˆ›å»ºä¸€æ¡é”™è¯¯æ¶ˆæ¯å¹¶è°ƒç”¨<code>showError()</code> ã€‚ è¿™æ ·çš„ä»£ç æ›´åŠ è‚®è„å’Œæ··ä¹±ã€‚ <br><br> å†æ¬¡æŸ¥çœ‹å¼‚å¸¸å¤„ç†ç‰ˆæœ¬ã€‚ å®ƒæ¸…æ¥šåœ°å°†ç¨‹åºçš„æˆåŠŸè·¯å¾„ä¸å¼‚å¸¸å¤„ç†ä»£ç åˆ†å¼€ã€‚  <code>try</code>åˆ†æ”¯æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œè€Œ<code>catch</code>åˆ†æ”¯æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ æ‰€æœ‰å¼‚å¸¸å¤„ç†éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹å‘ç”Ÿã€‚ å¹¶ä¸”å„ä¸ªåŠŸèƒ½å¯èƒ½ä¼šæŠ¥å‘Šå®ƒä»¬å¤±è´¥çš„åŸå› ã€‚ æ€»è€Œè¨€ä¹‹ï¼Œè¿™ä¼¼ä¹å¾ˆä¸é”™ã€‚ æˆ‘è®¤ä¸ºå¤§å¤šæ•°äººè®¤ä¸ºç¬¬ä¸€ä¸ªç¤ºä¾‹éå¸¸åˆé€‚ã€‚ ä¸ºä»€ä¹ˆé‡‡ç”¨ä¸åŒçš„æ–¹æ³•ï¼Ÿ <br><br><h1> å¤„ç†å¼‚å¸¸çš„é—®é¢˜å°è¯•...æŠ“ä½ </h1><br> è¿™ç§æ–¹æ³•ä½¿æ‚¨å¯ä»¥å¿½ç•¥è¿™äº›çƒ¦äººçš„é”™è¯¯ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œ <code>try...catch</code>åšå¾—å¾ˆå¥½ã€‚ æ‚¨åªæ˜¯æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ç„¶åç»§ç»­å‰è¿›ã€‚ æˆ‘ä»¬å¾…ä¼šå„¿å†è§ã€‚ å®é™…ä¸Šï¼Œæ¯ä¸ªäººéƒ½æ‰“ç®—å§‹ç»ˆæ”¾ç½®æ­¤ç±»éšœç¢ã€‚ ä½†æ˜¯é”™è¯¯å¹¶ä¸æ€»æ˜¯å¾ˆæ˜æ˜¾ã€‚ è€Œä¸”è¯¥å—å¤ªå®¹æ˜“å¿˜è®°äº†ã€‚ åœ¨æ„è¯†åˆ°è¿™ä¸€ç‚¹ä¹‹å‰ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå´©æºƒäº†ã€‚ <br><br> å¦å¤–ï¼Œå¼‚å¸¸ä¼šæ±¡æŸ“ä»£ç ã€‚ æˆ‘ä»¬å°†ä¸åœ¨è¿™é‡Œè¯¦ç»†è®¨è®ºåŠŸèƒ½çº¯åº¦ã€‚ ä½†æ˜¯ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹åŠŸèƒ½çº¯åº¦çš„ä¸€ä¸ªå°æ–¹é¢ï¼šå‚ç…§é€æ˜æ€§ã€‚ é“¾æ¥é€æ˜å‡½æ•°å§‹ç»ˆä¸ºç‰¹å®šè¾“å…¥è¿”å›ç›¸åŒçš„ç»“æœã€‚ ä½†æ˜¯å¯¹äºå¸¦æœ‰å¼‚å¸¸çš„å‡½æ•°ï¼Œæˆ‘ä»¬ä¸èƒ½è¿™ä¹ˆè¯´ã€‚ ä»–ä»¬å¯ä»¥éšæ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæ— éœ€è¿”å›å€¼ã€‚ è¿™ä½¿é€»è¾‘å¤æ‚åŒ–ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æ‰¾åˆ°åŒèµ¢çš„é€‰æ‹©â€”ä¸€ç§å¤„ç†é”™è¯¯çš„å¹²å‡€æ–¹æ³•ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ <br><br><h1> æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆ </h1><br> çº¯å‡½æ•°æ€»æ˜¯è¿”å›ä¸€ä¸ªå€¼ï¼ˆå³ä½¿è¯¥å€¼ä¸¢å¤±ï¼‰ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬çš„é”™è¯¯å¤„ç†ä»£ç åº”å‡å®šæˆ‘ä»¬æ€»æ˜¯è¿”å›ä¸€ä¸ªå€¼ã€‚ å› æ­¤ï¼Œä½œä¸ºç¬¬ä¸€æ¬¡å°è¯•ï¼Œå¦‚æœå¤±è´¥ï¼Œæˆ‘ä»¬è¿”å›Errorå¯¹è±¡ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— è®ºæˆ‘ä»¬åœ¨å“ªé‡Œå‡ºé”™ï¼Œéƒ½å°†è¿”å›è¿™æ ·çš„å¯¹è±¡ã€‚ å®ƒå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRowReturningErrors</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFieldNames, row</span></span></span><span class="hljs-function">) </span></span>{ fields = splitFields(row); rowObj = zipRow(headerFieldNames, fields); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rowObj <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> showError(rowObj); } rowObjWithDate = addDateStr(rowObj); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rowObjWithDate <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> showError(rowObjWithDate); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rowToMessage(rowObj); }</code> </pre> <br> è¿™ä¸æ˜¯æ¯«æ— ä¾‹å¤–çš„ç‰¹æ®Šå‡çº§ã€‚ ä½†æ˜¯æ›´å¥½ã€‚ æˆ‘ä»¬å·²å°†é”™è¯¯æ¶ˆæ¯çš„è´£ä»»è½¬ç§»å›å„ä¸ªåŠŸèƒ½ã€‚ ä½†æ˜¯æˆ‘ä»¬ä»ç„¶æ‹¥æœ‰æ‰€æœ‰è¿™äº›å‡è®¾ã€‚ æœ€å¥½ä»¥æŸç§æ–¹å¼å°è£…æ¨¡æ¿ã€‚ æ¢å¥è¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬æœ‰ä¸€ä¸ªé”™è¯¯ï¼Œè¯·ä¸è¦æ‹…å¿ƒå…¶ä½™çš„ä»£ç ã€‚ <br><br><h1> å¤šæ€æ€§ </h1><br> æ€ä¹ˆåšï¼Ÿ è¿™æ˜¯ä¸€ä¸ªéš¾é¢˜ã€‚ ä½†è¿™å¯ä»¥å€ŸåŠ©<i>å¤šæ€</i>é­”æœ¯æ¥è§£å†³ã€‚ å¦‚æœæ‚¨ä»¥å‰ä»æœªé‡åˆ°è¿‡å¤šæ€ï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚ æœ¬è´¨ä¸Šï¼Œå®ƒæ˜¯â€œä¸ºä¸åŒç±»å‹çš„å®ä½“æä¾›å•ä¸€æ¥å£â€ï¼ˆStraustrupï¼ŒBã€‚â€œBjÃ¶rnStraustrupçš„C ++æœ¯è¯­è¡¨â€ï¼‰ã€‚ åœ¨JavaScriptä¸­ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬åˆ›å»ºå…·æœ‰ç›¸åŒå‘½åæ–¹æ³•å’Œç­¾åçš„å¯¹è±¡ã€‚ ä½†æ˜¯è¡Œä¸ºä¸åŒã€‚ ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯åº”ç”¨ç¨‹åºæ—¥å¿—è®°å½•ã€‚ æˆ‘ä»¬å¯ä»¥æ ¹æ®æˆ‘ä»¬æ‰€å¤„çš„ç¯å¢ƒå°†æ‚å¿—å‘é€åˆ°ä¸åŒçš„åœ°æ–¹ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªè®°å½•å™¨å¯¹è±¡æ€ä¹ˆåŠï¼Ÿ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> consoleLogger = { <span class="hljs-attr"><span class="hljs-attr">log</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">msg</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'This is the console logger, logging:'</span></span>, msg); } }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ajaxLogger = { <span class="hljs-attr"><span class="hljs-attr">log</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">msg</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fetch(<span class="hljs-string"><span class="hljs-string">'https://example.com/logger'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">'POST'</span></span>, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: msg}); } };</code> </pre> <br> è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½å®šä¹‰äº†ä¸€ä¸ªæœŸæœ›å•ä¸ªå­—ç¬¦ä¸²å‚æ•°çš„æ—¥å¿—å‡½æ•°ã€‚ ä½†æ˜¯ä»–ä»¬çš„è¡Œä¸ºæœ‰æ‰€ä¸åŒã€‚ è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæ— è®ºä½¿ç”¨å“ªä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç¼–å†™è°ƒç”¨<code>.log()</code>ä»£ç ã€‚ å®ƒå¯ä»¥æ˜¯<code>consoleLogger</code>æˆ–<code>ajaxLogger</code> ã€‚ ä¸€åˆ‡æ­£å¸¸ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å°†å¯¹ä»»ä½•å¯¹è±¡åŒæ ·é€‚ç”¨ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">logger, message</span></span></span><span class="hljs-function">) </span></span>{ logger.log(message); }</code> </pre> <br> å¦ä¸€ä¸ªç¤ºä¾‹æ˜¯æ‰€æœ‰JSå¯¹è±¡çš„<code>.toString()</code>æ–¹æ³•ã€‚ æˆ‘ä»¬å¯ä»¥ä¸ºæˆ‘ä»¬åˆ›å»ºçš„ä»»ä½•ç±»ç¼–å†™<code>.toString()</code>æ–¹æ³•ã€‚ æ¥ä¸‹æ¥ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸¤ä¸ªä»¥ä¸åŒæ–¹å¼å®ç°<code>.toString()</code>æ–¹æ³•çš„ç±»ã€‚ æˆ‘ä»¬å°†å®ƒä»¬å‘½åä¸º<code>Left</code>å’Œ<code>Right</code> ï¼ˆç¨åæˆ‘å°†è§£é‡Šåç§°ï¼‰ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Left</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(val) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val = val; } toString() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> str = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val.toString(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`Left(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${str}</span></span></span><span class="hljs-string">)`</span></span>; } }</code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Right</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(val) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val = val; } toString() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> str = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val.toString(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`Right(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${str}</span></span></span><span class="hljs-string">)`</span></span>; } }</code> </pre> <br> ç°åœ¨åˆ›å»ºä¸€ä¸ªåœ¨è¿™ä¸¤ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨<code>.toString()</code>çš„å‡½æ•°ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trace</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">val</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val.toString()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> val; } trace(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Left(<span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// â¦˜ Left(Hello world) trace(new Right('Hello world')); // â¦˜ Right(Hello world);</span></span></code> </pre> <br> æˆ‘çŸ¥é“ä¸æ˜¯å‡ºè‰²çš„ä»£ç ã€‚ ä½†æ˜¯äº‹å®æ˜¯ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§ä½¿ç”¨åŒä¸€æ¥å£çš„ä¸åŒç±»å‹çš„è¡Œä¸ºã€‚ è¿™æ˜¯å¤šæ€æ€§ã€‚ ä½†æ˜¯è¯·æ³¨æ„ä¸€äº›æœ‰è¶£çš„äº‹æƒ…ã€‚ æˆ‘ä»¬ä½¿ç”¨äº†å¤šå°‘ä¸ªifè¯­å¥ï¼Ÿ é›¶ æ²¡æœ‰ä¸€ä¸ªã€‚ æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ç§ä¸åŒç±»å‹çš„è¡Œä¸ºï¼Œè€Œæ²¡æœ‰ä¸€æ¡ifè¯­å¥ã€‚ ä¹Ÿè®¸è¿™æ ·çš„äº‹æƒ…å¯ä»¥ç”¨æ¥å¤„ç†é”™è¯¯... <br><br><h1> å·¦å³ </h1><br> å›åˆ°æˆ‘ä»¬çš„é—®é¢˜ã€‚ æœ‰å¿…è¦ä¸ºæˆ‘ä»¬çš„ä»£ç ç¡®å®šæˆåŠŸå’Œå¤±è´¥çš„è·¯å¾„ã€‚ åœ¨ä¸€ä¸ªå¥½çš„è·¯å¾„ä¸Šï¼Œæˆ‘ä»¬åªæ˜¯ç»§ç»­å†·é™åœ°è¿è¡Œä»£ç ï¼Œç›´åˆ°å‘ç”Ÿé”™è¯¯æˆ–å®Œæˆå®ƒã€‚ å¦‚æœå‘ç°è‡ªå·±èµ°é”™äº†è·¯ï¼Œæˆ‘ä»¬å°†ä¸å†å°è¯•è¿è¡Œä»£ç ã€‚ æˆ‘ä»¬å¯ä»¥å°†è¿™äº›è·¯å¾„å‘½åä¸ºHappyå’ŒSadï¼Œä½†æ˜¯å°è¯•éµå¾ªå…¶ä»–ç¼–ç¨‹è¯­è¨€å’Œåº“ä½¿ç”¨çš„å‘½åçº¦å®šã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†é”™è¯¯çš„è·¯å¾„ç§°ä¸ºâ€œå·¦â€ï¼Œå°†æˆåŠŸçš„è·¯å¾„ç§°ä¸ºâ€œå³â€ã€‚ <br><br> è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬èµ°çš„å¾ˆå¥½ï¼Œåˆ™å¯ä»¥è¿è¡Œè¯¥å‡½æ•°ï¼Œä½†æ˜¯å¦‚æœèµ°çš„ä¸å¥½ï¼Œåˆ™å¯ä»¥å¿½ç•¥å®ƒï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Left represents the sad path. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Left</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(val) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val = val; } runFunctionOnlyOnHappyPath() { <span class="hljs-comment"><span class="hljs-comment">// Left is the sad path. Do nothing } toString() { const str = this._val.toString(); return `Left(${str})`; } }</span></span></code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Right represents the happy path. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Right</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(val) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val = val; } runFunctionOnlyOnHappyPath(fn) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fn(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val); } toString() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> str = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val.toString(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`Right(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${str}</span></span></span><span class="hljs-string">)`</span></span>; } }</code> </pre> <br> åƒè¿™æ ·ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> leftHello = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Left(<span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rightHello = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Right(<span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>); leftHello.runFunctionOnlyOnHappyPath(trace); <span class="hljs-comment"><span class="hljs-comment">// does nothing rightHello.runFunctionOnlyOnHappyPath(trace); // â¦˜ Hello world // ï¿© "Hello world"</span></span></code> </pre> <br><h4> å¹¿æ’­èŠ‚ç›® </h4><br> æˆ‘ä»¬æ­£åœ¨å°è¯•ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•ï¼Œä½†è¿˜ä¸æ˜¯å¾ˆæœ‰æ•ˆã€‚ æˆ‘ä»¬çš„<code>.runFunctionOnlyOnHappyPath()</code>æ–¹æ³•è¿”å›<code>_val</code>å±æ€§ã€‚ ä¸€åˆ‡éƒ½å¾ˆå¥½ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦è¿è¡Œå¤šä¸ªåŠŸèƒ½ï¼Œé‚£ä¹ˆä¼šå¾ˆä¸æ–¹ä¾¿ã€‚ æ€ä¹ˆäº† å› ä¸ºæˆ‘ä»¬ä¸å†çŸ¥é“æˆ‘ä»¬èµ°çš„è·¯æ˜¯å¯¹è¿˜æ˜¯é”™ã€‚ ä¸€æ—¦æˆ‘ä»¬å°†å€¼å–åˆ°Leftå’ŒRightä¹‹å¤–ï¼Œä¿¡æ¯å°±ä¼šæ¶ˆå¤±ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åšçš„æ˜¯è¿”å›å¸¦æœ‰æ–°<code>_val</code>çš„Leftæˆ–Rightè·¯å¾„ã€‚ å› ä¸ºæˆ‘ä»¬åœ¨è¿™é‡Œï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ç®€ç§°ã€‚ æˆ‘ä»¬è¦åšçš„æ˜¯å°†ä¸€ä¸ªå‡½æ•°ä»ç®€å•å€¼çš„ä¸–ç•Œè½¬æ¢ä¸ºå·¦å’Œå³ä¸–ç•Œã€‚ å› æ­¤ï¼Œæˆ‘ä»¬è°ƒç”¨<code>map()</code>æ–¹æ³•ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Left represents the sad path. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Left</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(val) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val = val; } map() { <span class="hljs-comment"><span class="hljs-comment">// Left is the sad path // so we do nothing return this; } toString() { const str = this._val.toString(); return `Left(${str})`; } }</span></span></code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Right represents the happy path */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Right</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(val) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val = val; } map(fn) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Right( fn(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val) ); } toString() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> str = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val.toString(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`Right(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${str}</span></span></span><span class="hljs-string">)`</span></span>; } }</code> </pre> <br> æˆ‘ä»¬æ’å…¥æ­¤æ–¹æ³•ï¼Œå¹¶åœ¨è‡ªç”±è¯­æ³•ä¸­ä½¿ç”¨Leftæˆ–Rightï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> leftHello = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Left(<span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rightHello = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Right(<span class="hljs-string"><span class="hljs-string">'Hello world'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> helloToGreetings = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function"> =&gt;</span></span> str.replace(<span class="hljs-regexp"><span class="hljs-regexp">/Hello/</span></span>, <span class="hljs-string"><span class="hljs-string">'Greetings,'</span></span>); leftHello.map(helloToGreetings).map(trace); <span class="hljs-comment"><span class="hljs-comment">// Doesn't print any thing to the console // ï¿© Left(Hello world) rightHello.map(helloToGreetings).map(trace); // â¦˜ Greetings, world // ï¿© Right(Greetings, world)</span></span></code> </pre> <br> æˆ‘ä»¬åˆ›å»ºäº†ä¸¤æ¡æ‰§è¡Œè·¯å¾„ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨<code>new Right()</code>å°†æ•°æ®æ”¾ç½®åœ¨æˆåŠŸçš„è·¯å¾„ä¸Šï¼Œæˆ–è€…é€šè¿‡è°ƒç”¨<code>new Left()</code>å°†æ•°æ®æ”¾ç½®åœ¨å¤±è´¥çš„è·¯å¾„ä¸Šã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/36a/2ee/cf6/36a2eecf61c554e388c5723b0b5cbd02.svg"><br>  <i><font color="gray">æ¯ä¸ªç±»éƒ½ä»£è¡¨ä¸€æ¡è·¯å¾„ï¼šæˆåŠŸæˆ–ä¸æˆåŠŸã€‚</font></i>  <i><font color="gray">æˆ‘ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Scott Vlaschina</a>çªƒå–äº†è¿™ä¸ªé“è·¯éšå–»</font></i> <br><br> å¦‚æœ<code>map</code>æ²¿æ­£ç¡®çš„è·¯å¾„å·¥ä½œï¼Œè¯·ç»§ç»­å¤„ç†å¹¶å¤„ç†æ•°æ®ã€‚ å¦‚æœæˆ‘ä»¬å‘ç°è‡ªå·±ä¸æˆåŠŸï¼Œå°†ä¸ä¼šå‘ç”Ÿä»»ä½•äº‹æƒ…ã€‚ åªæ˜¯ç»§ç»­ä¼ é€’ä»·å€¼ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å°†Erroræ”¾åœ¨è¿™ä¸ªä¸æˆåŠŸçš„è·¯å¾„ä¸Šï¼Œæˆ‘ä»¬å°†å¾—åˆ°ä¸<code>tryâ€¦catch</code>éå¸¸ç›¸ä¼¼çš„ä¸œè¥¿ã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/17c/3e6/09d/17c3e609d306efc1bee111077456b9ab.svg"><br>  <i><font color="gray">ä½¿ç”¨<code>.map()</code>æ²¿è·¯å¾„ç§»åŠ¨</font></i> <br><br> éšç€æ‚¨çš„è¿›æ­¥ï¼Œç¼–å†™â€œå·¦â€æˆ–â€œå³â€ä¸€ç›´éƒ½å¾ˆå›°éš¾ï¼Œå› æ­¤æˆ‘ä»¬å°†æ­¤ç»„åˆç®€ç§°ä¸ºâ€œä»»ä¸€ä¸ªâ€ï¼ˆâ€œä¸¤ä¸ªâ€ï¼‰ã€‚ å·¦æˆ–å³ã€‚ <br><br><h4> åˆ›å»ºä»»ä¸€å¯¹è±¡çš„å¿«æ·æ–¹å¼ </h4><br> å› æ­¤ï¼Œä¸‹ä¸€æ­¥æ˜¯é‡å†™ç¤ºä¾‹å‡½æ•°ï¼Œä»¥ä¾¿å®ƒä»¬è¿”å›Eitherã€‚ å‘å·¦è¡¨ç¤ºé”™è¯¯ï¼Œå‘å³è¡¨ç¤ºå€¼ã€‚ ä½†æ˜¯åœ¨æˆ‘ä»¬è¿™æ ·åšä¹‹å‰ï¼Œè¯·å…ˆæ‰¾ç‚¹ä¹å­ã€‚ è®©æˆ‘ä»¬å†™ä¸€äº›æ·å¾„ã€‚ ç¬¬ä¸€ä¸ªæ˜¯ç§°ä¸º<code>.of()</code>çš„é™æ€æ–¹æ³•ã€‚ å®ƒåªæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„Leftæˆ–Rightã€‚ ä»£ç å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> <code class="javascript hljs">Left.of = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">of</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Left(x); }; Right.of = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">of</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Right(x); };</code> </pre> <br> è€å®è¯´ï¼Œå³ä½¿<code>Left.of()</code>å’Œ<code>Right.of()</code>å¾ˆ<code>Right.of()</code> ã€‚ å› æ­¤ï¼Œæˆ‘å€¾å‘äºä½¿ç”¨æ›´çŸ­çš„<code>left()</code>å’Œ<code>right()</code>æ ‡ç­¾ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">left</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Left.of(x); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">right</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Right.of(x); }</code> </pre> <br> ä½¿ç”¨è¿™äº›å¿«æ·æ–¹å¼ï¼Œæˆ‘ä»¬å¼€å§‹é‡å†™åº”ç”¨ç¨‹åºåŠŸèƒ½ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zipRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFields, fieldData</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lengthMatch = (headerFields.length == fieldData.length); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (!lengthMatch) ? left(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">"Row has an unexpected number of fields"</span></span>)) : right(_.zipObject(headerFields, fieldData)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addDateStr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">messageObj</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> errMsg = <span class="hljs-string"><span class="hljs-string">'Unable to parse date stamp in message object'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> months = [ <span class="hljs-string"><span class="hljs-string">'January'</span></span>, <span class="hljs-string"><span class="hljs-string">'February'</span></span>, <span class="hljs-string"><span class="hljs-string">'March'</span></span>, <span class="hljs-string"><span class="hljs-string">'April'</span></span>, <span class="hljs-string"><span class="hljs-string">'May'</span></span>, <span class="hljs-string"><span class="hljs-string">'June'</span></span>, <span class="hljs-string"><span class="hljs-string">'July'</span></span>, <span class="hljs-string"><span class="hljs-string">'August'</span></span>, <span class="hljs-string"><span class="hljs-string">'September'</span></span>, <span class="hljs-string"><span class="hljs-string">'October'</span></span>, <span class="hljs-string"><span class="hljs-string">'November'</span></span>, <span class="hljs-string"><span class="hljs-string">'December'</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> d = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(messageObj.datestamp); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">isNaN</span></span>(d)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> left(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(errMsg)); } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> datestr = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${d.getDate()}</span></span></span><span class="hljs-string"> </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${months[d.getMonth()]}</span></span></span><span class="hljs-string"> </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${d.getFullYear()}</span></span></span><span class="hljs-string">`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> right({datestr, ...messageObj}); }</code> </pre> <br> ä¿®æ”¹åçš„åŠŸèƒ½ä¸æ—§åŠŸèƒ½æ²¡æœ‰å¤ªå¤§ä¸åŒã€‚ æˆ‘ä»¬ç®€å•åœ°å°†è¿”å›å€¼åŒ…è£…åœ¨Leftæˆ–Rightä¸­ï¼Œå…·ä½“å–å†³äºæ˜¯å¦å­˜åœ¨é”™è¯¯ã€‚ <br><br> ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å¤„ç†å¤„ç†ä¸€è¡Œçš„ä¸»è¦åŠŸèƒ½ã€‚ é¦–å…ˆï¼Œä½¿ç”¨<code>right()</code>å°†å­—ç¬¦ä¸²æ”¾åœ¨Eitherä¸­ï¼Œç„¶åè½¬æ¢<code>splitFields</code>è¿›è¡Œæ‹†åˆ†ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFields, row</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fieldsEither = right(row).map(splitFields); <span class="hljs-comment"><span class="hljs-comment">// â€¦ }</span></span></code> </pre> <br> è¿™å·¥ä½œå¾—å¾ˆå¥½ï¼Œä½†æ˜¯å¦‚æœå°è¯•ä½¿ç”¨<code>zipRow()</code>è¿›è¡Œç›¸åŒçš„æ“ä½œï¼Œ <code>zipRow()</code>å‘ç”Ÿéº»çƒ¦ï¼š <br><br><pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFields, row</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fieldsEither = right(row).map(splitFields); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rowObj = fieldsEither.map(zipRow <span class="hljs-comment"><span class="hljs-comment">/* wait. this isn't right */</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br> äº‹å®æ˜¯<code>zipRow()</code>éœ€è¦ä¸¤ä¸ªå‚æ•°ã€‚ ä½†æ˜¯ï¼Œä¼ é€’ç»™<code>.map()</code>çš„å‡½æ•°<code>._val</code>å±æ€§è·å¾—ä¸€ä¸ªå€¼ã€‚ å¯ä»¥ä½¿ç”¨<code>zipRow()</code>çš„<code>zipRow()</code>ç‰ˆæœ¬æ¥çº æ­£è¿™ç§æƒ…å†µã€‚ å®ƒå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zipRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFields</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zipRowWithHeaderFields</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fieldData</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> lengthMatch = (headerFields.length == fieldData.length); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (!lengthMatch) ? left(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">"Row has an unexpected number of fields"</span></span>)) : right(_.zipObject(headerFields, fieldData)); }; }</code> </pre> <br> è¿™ä¸ªå°çš„æ›´æ”¹ç®€åŒ–äº†<code>zipRow</code>çš„è½¬æ¢ï¼Œå› æ­¤å¯ä»¥ä¸<code>.map()</code>ä¸€èµ·å¾ˆå¥½åœ°å·¥ä½œï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFields, row</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fieldsEither = right(row).map(splitFields); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rowObj = fieldsEither.map(zipRow(headerFields)); <span class="hljs-comment"><span class="hljs-comment">// ... But now we have another problem ... }</span></span></code> </pre> <br><h4> åŠ ç›Ÿ </h4><br> ä½¿ç”¨<code>.map()</code>è¿è¡Œ<code>splitFields()</code>å¾ˆå¥½ï¼Œå› ä¸º<code>.splitFields()</code>ä¸ä¼šè¿”å›Eitherã€‚ ä½†æ˜¯ï¼Œå½“æ‚¨å¿…é¡»è¿è¡Œ<code>zipRow()</code> ï¼Œä¼šå‡ºç°é—®é¢˜ï¼Œå› ä¸ºå®ƒè¿”å›Eitherã€‚ å› æ­¤ï¼Œä½¿ç”¨<code>.map()</code>æˆ‘ä»¬æœ€ç»ˆä¼šåœ¨Eitherå†…éƒ¨ç¢°åˆ°Eitherã€‚ å¦‚æœæˆ‘ä»¬èµ°å¾—æ›´è¿œï¼Œé‚£ä¹ˆå°±ä¼šé™·å…¥å›°å¢ƒï¼Œç›´åˆ°æˆ‘ä»¬åœ¨<code>.map()</code>è¿è¡Œ<code>.map()</code>ä¸ºæ­¢ã€‚ é‚£ä¹Ÿä¸è¡Œã€‚ æˆ‘ä»¬éœ€è¦æŸç§æ–¹å¼æ¥ç»„åˆè¿™äº›åµŒå¥—çš„Eitherã€‚ å› æ­¤ï¼Œè®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸º<code>.join()</code> ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** *Left represents the sad path. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Left</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(val) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val = val; } map() { <span class="hljs-comment"><span class="hljs-comment">// Left is the sad path // so we do nothing return this; } join() { // On the sad path, we don't // do anything with join return this; } toString() { const str = this._val.toString(); return `Left(${str})`; } }</span></span></code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Right represents the happy path */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Right</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(val) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val = val; } map(fn) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Right( fn(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val) ); } join() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Left) || (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Right)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } toString() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> str = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val.toString(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`Right(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${str}</span></span></span><span class="hljs-string">)`</span></span>; } }</code> </pre> <br> ç°åœ¨æˆ‘ä»¬å¯ä»¥â€œè§£åŒ…â€æˆ‘ä»¬çš„èµ„äº§ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFields, row</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fieldsEither = right(row).map(splitFields); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rowObj = fieldsEither.map(zipRow(headerFields)).join(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rowObjWithDate = rowObj.map(addDateStr).join(); <span class="hljs-comment"><span class="hljs-comment">// Slowly getting better... but what do we return? }</span></span></code> </pre> <br><h4> é“¾æ¡ </h4><br> æˆ‘ä»¬å·²ç»èµ°äº†å¾ˆé•¿ä¸€æ®µè·¯ã€‚ ä½†æ˜¯æ‚¨å¿…é¡»å§‹ç»ˆè®°ä½<code>.join()</code>è°ƒç”¨ï¼Œè¿™å¾ˆçƒ¦äººã€‚ ä½†æ˜¯ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé€šç”¨çš„è¿ç»­è°ƒç”¨æ¨¡å¼<code>.map()</code>å’Œ<code>.join()</code> ï¼Œå› æ­¤è®©æˆ‘ä»¬ä¸ºå…¶åˆ›å»ºä¸€ä¸ªå¿«é€Ÿè®¿é—®æ–¹æ³•ã€‚ æˆ‘ä»¬ç§°å®ƒä¸º<code>chain()</code> ï¼Œå› ä¸ºå®ƒå°†è¿”å›å·¦æˆ–å³çš„å‡½æ•°ç»‘å®šåœ¨ä¸€èµ·ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** *Left represents the sad path. */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Left</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(val) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val = val; } map() { <span class="hljs-comment"><span class="hljs-comment">// Left is the sad path // so we do nothing return this; } join() { // On the sad path, we don't // do anything with join return this; } chain() { // Boring sad path, // do nothing. return this; } toString() { const str = this._val.toString(); return `Left(${str})`; } }</span></span></code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Right represents the happy path */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Right</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(val) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val = val; } map(fn) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Right( fn(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val) ); } join() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Left) || (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Right)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } chain(fn) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fn(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val); } toString() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> str = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._val.toString(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`Right(</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${str}</span></span></span><span class="hljs-string">)`</span></span>; } }</code> </pre> <br> å›åˆ°é“è·¯ç±»æ¯”ï¼Œå¦‚æœé‡åˆ°é”™è¯¯ï¼Œ <code>.chain()</code>å°†åˆ‡æ¢è½¨é“ã€‚ ä½†æ˜¯ï¼Œåœ¨å›¾ä¸­æ›´å®¹æ˜“æ˜¾ç¤ºã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1bc/279/530/1bc2795304c211004070da858179fcfc.svg"><br>  <i><font color="gray">å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œ.chainï¼ˆï¼‰æ–¹æ³•å¯è®©æ‚¨åˆ‡æ¢åˆ°å·¦ä¾§è·¯å¾„ã€‚</font></i>  <i><font color="gray">è¯·æ³¨æ„ï¼Œå¼€å…³åªèƒ½ä»¥ä¸€ç§æ–¹å¼å·¥ä½œã€‚</font></i> <br><br> ä»£ç å˜å¾—æ›´åŠ ç®€æ´ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFields, row</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fieldsEither = right(row).map(splitFields); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rowObj = fieldsEither.chain(zipRow(headerFields)); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rowObjWithDate = rowObj.chain(addDateStr); <span class="hljs-comment"><span class="hljs-comment">// Slowly getting better... but what do we return? }</span></span></code> </pre> <br><h4> ç”¨ä»·å€¼åšæŸäº‹ </h4><br>  <code>processRow()</code>å‡½æ•°çš„é‡æ„å‡ ä¹å®Œæˆã€‚ ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬è¿”å›å€¼æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ æœ€åï¼Œæˆ‘ä»¬è¦æ ¹æ®æˆ‘ä»¬é‡åˆ°çš„æƒ…å†µé‡‡å–ä¸åŒçš„æ“ä½œï¼šå·¦æˆ–å³ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªå°†é‡‡å–é€‚å½“æªæ–½çš„å‡½æ•°ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">either</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">leftFunc, rightFunc, e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (e <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Left) ? leftFunc(e._val) : rightFunc(e._val); }</code> </pre> <br>        Left  Right.   ,     .     : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFields, row</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fieldsEither = right(row).map(splitFields); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rowObj = fieldsEither.chain(zipRow(headerFields)); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rowObjWithDate = rowObj.chain(addDateStr); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> either(showError, rowToMessage, rowObjWithDate); }</code> </pre> <br>       ,      : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFields, row</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rowObjWithDate = right(row) .map(splitFields) .chain(zipRow(headerFields)) .chain(addDateStr); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> either(showError, rowToMessage, rowObjWithDate); }</code> </pre> <br>    .   <code>try...catch</code> .   if-    .     -  ,        .   ,   <code>processRow()</code>   Left  Right     ,   <code>right()</code> .      <code>.map()</code>  <code>.chain()</code>    . <br><br><h4> ap  lift </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çœ‹èµ·æ¥ä¸é”™ï¼Œä½†è¿˜æœ‰æœ€åä¸€ç§æƒ…å†µéœ€è¦è€ƒè™‘ã€‚</font><font style="vertical-align: inherit;">æŒ‰ç…§æˆ‘ä»¬çš„ç¤ºä¾‹ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å¤„ç†æ‰€æœ‰CSVæ•°æ®ï¼Œè€Œä¸ä»…ä»…æ˜¯å•ä¸ªè¡Œã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†éœ€è¦ä¸€ä¸ªæˆ–ä¸‰ä¸ªè¾…åŠ©åŠŸèƒ½ï¼š</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">splitCSVToRows</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">csvData</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// There should always be a header row... so if there's no // newline character, something is wrong. return (csvData.indexOf('\n') &lt; 0) ? left('No header row found in CSV data') : right(csvData.split('\n')); } function processRows(headerFields, dataRows) { // Note this is Array map, not Either map. return dataRows.map(row =&gt; processRow(headerFields, row)); } function showMessages(messages) { return `&lt;ul class="Messages"&gt;${messages.join('\n')}&lt;/ul&gt;`; }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å› æ­¤ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå°†CSVåˆ†æˆå‡ è¡Œçš„åŠ©æ‰‹ã€‚</font><font style="vertical-align: inherit;">ç„¶åï¼Œä½¿ç”¨Eitherè¿”å›è¯¥é€‰é¡¹ã€‚</font><font style="vertical-align: inherit;">ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨</font></font><code>.map()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€äº›lodashå‡½æ•°ä»æ•°æ®è¡Œä¸­æå–æ ‡é¢˜æ ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯æˆ‘ä»¬å‘ç°è‡ªå·±å¤„äºä¸€ç§æœ‰è¶£çš„æƒ…å†µä¸‹...</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">csvToMessages</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">csvData</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> csvRows = splitCSVToRows(csvData); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> headerFields = csvRows.map(_.head).map(splitFields); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dataRows = csvRows.map(_.tail); <span class="hljs-comment"><span class="hljs-comment">// What's next? }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½ä»¥æ˜¾ç¤ºæ ‡é¢˜å­—æ®µå’Œæ•°æ®è¡Œ</font></font><code>processRows()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è€Œä¸”</font></font><code>headerFields</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿˜</font></font><code>dataRows</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒ…è£¹åœ¨Eitherä¸­ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬éœ€è¦æŸç§æ–¹å¼æ¥è½¬æ¢</font></font><code>processRows()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºå¯ä»¥ä¸Eitherä¸€èµ·ä½¿ç”¨çš„å‡½æ•°ã€‚</font><font style="vertical-align: inherit;">é¦–å…ˆï¼Œæˆ‘ä»¬è¿›è¡Œcurrying </font></font><code>processRows</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRows</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">headerFields</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processRowsWithHeaderFields</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dataRows</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Note this is Array map, not Either map. return dataRows.map(row =&gt; processRow(headerFields, row)); }; }</span></span></code> </pre> <br>     .   <code>headerFields</code> ,    Either,   .  ,    <code>headerFields</code>     <code>.map()</code>  <code>processRows()</code> ? <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">csvToMessages</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">csvData</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> csvRows = splitCSVToRows(csvData); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> headerFields = csvRows.map(_.head).map(splitFields); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dataRows = csvRows.map(_.tail); <span class="hljs-comment"><span class="hljs-comment">// How will we pass headerFields and dataRows to // processRows() ? const funcInEither = headerFields.map(processRows); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨.mapï¼ˆï¼‰ï¼Œæ­¤å¤„å°†è°ƒç”¨å¤–éƒ¨å‡½æ•°</font></font><code>processRows()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè€Œä¸æ˜¯å†…éƒ¨</font><font style="vertical-align: inherit;">å‡½æ•°</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ¢å¥è¯è¯´ï¼Œ</font></font><code>processRows()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚</font><font style="vertical-align: inherit;">ä»é‚£ä»¥å</font></font><code>.map()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è®©Eitherå›æ¥ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œç»“æœæ˜¯Eitherå†…éƒ¨çš„ä¸€ä¸ªå‡½æ•°ï¼Œç§°ä¸º</font></font><code>funcInEither</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å®ƒéœ€è¦ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œå¹¶è¿”å›å…¶ä»–å­—ç¬¦ä¸²æ•°ç»„ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬éœ€è¦ä»¥æŸç§æ–¹å¼é‡‡ç”¨æ­¤å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªå†…éƒ¨å€¼è°ƒç”¨å®ƒ</font></font><code>dataRows</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä¸ºæ­¤ï¼Œå‘æˆ‘ä»¬çš„Leftå’ŒRightç±»æ·»åŠ å¦ä¸€ä¸ªæ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†</font></font><code>.ap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‰ç…§</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ‡å‡†è¿›è¡Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç§°å‘¼</font><font style="vertical-align: inherit;">ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸å¾€å¸¸ä¸€æ ·ï¼Œè¯¥æ–¹æ³•åœ¨Leftè½¨é“ä¸Šä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼š</font></font><br><br><pre> <code class="javascript hljs"> <span class="hljs-comment"><span class="hljs-comment">// In Left (the sad path) ap() { return this; }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å¯¹äºRightç±»ï¼Œæˆ‘ä»¬å¸Œæœ›å¦ä¸€ä¸ªEtherå…·æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼š </font></font><br><br><pre> <code class="javascript hljs"> <span class="hljs-comment"><span class="hljs-comment">// In Right (the happy path) ap(otherEither) { const functionToRun = otherEither._val; return this.map(functionToRun); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç°åœ¨æˆ‘ä»¬å¯ä»¥å®Œæˆæˆ‘ä»¬çš„ä¸»è¦åŠŸèƒ½ï¼š </font></font><br><br><pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">csvToMessages</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">csvData</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> csvRows = splitCSVToRows(csvData); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> headerFields = csvRows.map(_.head).map(splitFields); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dataRows = csvRows.map(_.tail); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> funcInEither = headerFields.map(processRows); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> messagesArr = dataRows.ap(funcInEither); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> either(showError, showMessages, messagesArr); }</code> </pre> <br>   <code>.ap()</code>    ( Fantasy Land   ,        ).    ,   : Â«   ,      .      ,    EitherÂ».   <code>.ap()</code>    ,     .   <code>liftA2()</code> ,       .    ,   ,  Â«Â» (lift)     Â«Â». ( ,     <code>.ap()</code> ,   <code>.of()</code> ). , liftA2    Â« lift,  Â». <br><br>  ,  <code>liftA2</code>    : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">liftA2</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">func</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runApplicativeFunc</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b.ap(a.map(func)); }; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æˆ‘ä»¬çš„é¡¶çº§å‡½æ•°å°†æŒ‰ä»¥ä¸‹æ–¹å¼ä½¿ç”¨å®ƒï¼š </font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">csvToMessages</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">csvData</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> csvRows = splitCSVToRows(csvData); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> headerFields = csvRows.map(_.head).map(splitFields); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dataRows = csvRows.map(_.tail); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> processRowsA = liftA2(processRows); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> messagesArr = processRowsA(headerFields, dataRows); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> either(showError, showMessages, messagesArr); }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CodePenä¸Šçš„ä»£ç </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹ä¸å¯¹ </font><font style="vertical-align: inherit;">è¿™å°±æ˜¯å…¨éƒ¨å—ï¼Ÿ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨å¯èƒ½ä¼šé—®ï¼Œæœ‰ä»€ä¹ˆæ¯”ç®€å•çš„ä¾‹å¤–æ›´å¥½ï¼Ÿ</font><font style="vertical-align: inherit;">åœ¨æˆ‘çœ‹æ¥è¿™ä¸æ˜¯è§£å†³ä¸€ä¸ªç®€å•é—®é¢˜çš„æ–¹æ³•å¤ªå¤æ‚äº†å—ï¼Ÿ</font><font style="vertical-align: inherit;">é¦–å…ˆè€ƒè™‘ä¸€ä¸‹ä¸ºä»€ä¹ˆæˆ‘ä»¬å–œæ¬¢ä¾‹å¤–ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ²¡æœ‰ä¾‹å¤–ï¼Œæ‚¨å°†ä¸å¾—ä¸åœ¨å„å¤„ç¼–å†™è®¸å¤šifè¯­å¥ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†å§‹ç»ˆæŒ‰ç…§â€œå¦‚æœåè€…èµ·ä½œç”¨ï¼Œè¯·ç»§ç»­ï¼Œå¦åˆ™å¤„ç†é”™è¯¯â€çš„åŸåˆ™ç¼–å†™ä»£ç ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å¿…é¡»åœ¨æ•´ä¸ªä»£ç ä¸­å¤„ç†è¿™äº›é”™è¯¯ã€‚</font><font style="vertical-align: inherit;">è¿™ä½¿å¾—å¾ˆéš¾ç†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚</font><font style="vertical-align: inherit;">å¦‚æœå‡ºç°é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å¼‚å¸¸é€€å‡ºç¨‹åºã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œæ‚¨æ— éœ€ç¼–å†™æ‰€æœ‰è¿™äº›ifsã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥ä¸“æ³¨äºæˆåŠŸçš„æ‰§è¡Œè·¯å¾„ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½†æ˜¯æœ‰ä¸€ä¸ªéšœç¢ã€‚å¼‚å¸¸éšè—å¾—å¤ªå¤šäº†ã€‚å¼•å‘å¼‚å¸¸æ—¶ï¼Œä¼šå°†é”™è¯¯å¤„ç†é—®é¢˜è½¬ç§»åˆ°å…¶ä»–å‡½æ•°ã€‚å¿½ç•¥å°†å¼¹å‡ºåˆ°æœ€é«˜çº§åˆ«çš„å¼‚å¸¸å¤ªå®¹æ˜“äº†ã€‚ Eitherçš„å¥½å¤„æ˜¯ï¼Œå®ƒå…è®¸æ‚¨è·³å‡ºä¸»ç¨‹åºæµï¼Œå°±åƒæœ‰ä¾‹å¤–ä¸€æ ·ã€‚å®ƒè¯šå®åœ°å·¥ä½œã€‚æ‚¨å¾—åˆ°å³æˆ–å·¦ã€‚æ‚¨ä¸èƒ½å‡è£…â€œå·¦â€é€‰é¡¹æ˜¯ä¸å¯èƒ½çš„ã€‚æœ€åï¼Œæ‚¨å¿…é¡»é€šè¿‡è°ƒç”¨æ¥æå–å€¼</font></font><code>either()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘çŸ¥é“è¿™å¬èµ·æ¥æœ‰äº›å¤æ‚ã€‚ä½†æ˜¯ï¼Œè¯·çœ‹ä¸€ä¸‹æˆ‘ä»¬ç¼–å†™çš„ä»£ç ï¼ˆä¸æ˜¯ç±»ï¼Œè€Œæ˜¯ä½¿ç”¨å®ƒä»¬çš„å‡½æ•°ï¼‰ã€‚æ²¡æœ‰å¤ªå¤šçš„å¼‚å¸¸å¤„ç†ä»£ç ã€‚å®ƒå‡ ä¹ä¸å­˜åœ¨ï¼Œé™¤äº†</font></font><code>either()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“å°¾å¤„çš„</font><font style="vertical-align: inherit;">é€šè¯</font></font><code>csvToMessages()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><code>processRow()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è¿™å°±æ˜¯é‡ç‚¹ã€‚</font><font style="vertical-align: inherit;">ä½¿ç”¨Eitherï¼Œæ‚¨å°†æ‹¥æœ‰å¹²å‡€çš„é”™è¯¯å¤„ç†ï¼Œä¸ä¼šè¢«æ„å¤–é—å¿˜ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ²¡æœ‰ï¼Œåˆ™éå†ä»£ç å¹¶åœ¨å„å¤„æ·»åŠ å¡«å……ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™å¹¶ä¸æ„å‘³ç€æ‚¨æ°¸è¿œä¸è¦ä½¿ç”¨å®ƒ</font></font><code>try...catch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æœ‰æ—¶å€™ï¼Œè¿™æ˜¯æ­£ç¡®çš„å·¥å…·ï¼Œè€Œä¸”å¾ˆæ­£å¸¸ã€‚</font><font style="vertical-align: inherit;">ä½†è¿™ä¸æ˜¯å”¯ä¸€çš„å·¥å…·ã€‚</font><font style="vertical-align: inherit;">ä¸¤è€…éƒ½ä¼šç»™æ‚¨å¸¦æ¥ä¸€äº›æ‚¨æ²¡æœ‰çš„å¥½å¤„</font></font><code>try...catch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ‰€ä»¥ç»™è¿™ä¸ªå•å­ä¸€ä¸ªæœºä¼šã€‚</font><font style="vertical-align: inherit;">å³ä½¿ä¸€å¼€å§‹å¾ˆéš¾ï¼Œæˆ‘æƒ³æ‚¨ä¹Ÿä¼šå–œæ¬¢ã€‚</font><font style="vertical-align: inherit;">è¯·ï¼Œè¯·ä¸è¦ä½¿ç”¨æœ¬æ–‡ä¸­çš„å®ç°ã€‚</font><font style="vertical-align: inherit;">å°è¯•å…¶ä¸­ä¸€ä¸ªè‘—åçš„å›¾ä¹¦é¦†ï¼Œä¾‹å¦‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crocks</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sanctuary</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Folktale</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä»–ä»¬æ›´å¥½åœ°æœåŠ¡ã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™é‡Œï¼Œä¸ºç®€å•èµ·è§ï¼Œæˆ‘é”™è¿‡äº†ä¸€äº›ä¸œè¥¿ã€‚</font></font><br><br><blockquote><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å…¶ä»–èµ„æº </font></font></h1><br><ul><li> Â« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">       </a> Â», <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a> ( .) <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> Fantasy Land</a> <br></li><li> Â« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">    JavaScript: Either</a> Â», <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a> <br></li><li> Â« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  JavaScript: </a> Â», <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">  </a> </li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN457098/">https://habr.com/ru/post/zh-CN457098/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN457086/index.html">â€œ Swiftâ€å’Œâ€œ iOSâ€ /â€œ macOSâ€é¢†åŸŸä¸­çš„å»ºç­‘æ¨¡å¼â€œ Builderâ€</a></li>
<li><a href="../zh-CN457090/index.html">å®‰å…¨å©´å„¿åºŠï¼šJWT</a></li>
<li><a href="../zh-CN457092/index.html">æˆ‘ä»¬ç ”ç©¶MITRE ATTï¼†CKã€‚ ç§»åŠ¨çŸ©é˜µï¼šè®¾å¤‡è®¿é—®æƒé™ã€‚ ç¬¬5éƒ¨åˆ†</a></li>
<li><a href="../zh-CN457094/index.html">ExcelåŠ è½½é¡¹ï¼Œä½¿ç”¨å¤šç»´æ•°æ®é›†ï¼ˆVBAï¼‰æ—¶å¯ä»¥è½»æ¾è®¾ç½®è¿‡æ»¤å™¨</a></li>
<li><a href="../zh-CN457096/index.html">æˆ‘ä»¬å°†ç²¾åŠ›åˆ†é…ç»™äº†å‡ ä½åˆ†æå¸ˆï¼šAPI Livyï¼Œç”¨äºå®ç°å…¸å‹é“¶è¡Œä¸šåŠ¡çš„è‡ªåŠ¨åŒ–</a></li>
<li><a href="../zh-CN457100/index.html">AWS Lambda-ç†è®ºï¼Œç›¸è¯†</a></li>
<li><a href="../zh-CN457102/index.html">QVDæ–‡ä»¶-å†…éƒ¨å†…å®¹ï¼Œç¬¬3éƒ¨åˆ†</a></li>
<li><a href="../zh-CN457106/index.html">ç¾å›½è‡ªåŠ¨ç”µè¯å¤§æˆ˜-è°è·èƒœï¼Œä¸ºä»€ä¹ˆè·èƒœ</a></li>
<li><a href="../zh-CN457108/index.html">WWDC19ï¼šXCTestçš„æµ‹è¯•è®¡åˆ’å…¥é—¨</a></li>
<li><a href="../zh-CN457110/index.html">ä½¿ç”¨ç‰¹æ€§å¯¹C ++å’Œæ¨¡æ‹Ÿæ³¨å…¥æ¨¡å¼è¿›è¡Œå•å…ƒæµ‹è¯•</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>