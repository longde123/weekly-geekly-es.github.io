<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™Œ âš°ï¸ ğŸ‘› Jupyterå…è®¸ä»€ä¹ˆï¼Ÿ ğŸ‘ŠğŸ» ğŸ“‡ ğŸ‘¨ğŸ¿â€ğŸ³</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘ä»¬çš„æ•…äº‹å§‹äºä¸€é¡¹çœ‹ä¼¼ç®€å•çš„ä»»åŠ¡ã€‚ å¿…é¡»ä¸ºæ•°æ®ç§‘å­¦ä¸“å®¶å’Œæ•°æ®åˆ†æå¸ˆå»ºç«‹åˆ†æå·¥å…·ã€‚ é›¶å”®é£é™©å’ŒCRMéƒ¨é—¨çš„åŒäº‹å·²å°†è¿™é¡¹ä»»åŠ¡äº¤ç»™äº†æˆ‘ä»¬ï¼Œåœ¨è¯¥éƒ¨é—¨ä¸­ï¼Œæ•°æ®ç§‘å­¦ä¸“å®¶çš„é›†ä¸­åº¦ä¸€ç›´å¾ˆé«˜ã€‚ å®¢æˆ·æœ‰ä¸€ä¸ªç®€å•çš„æ„¿æœ›-ç¼–å†™Pythonä»£ç ï¼Œå¯¼å…¥é«˜çº§åº“ï¼ˆxgboostï¼Œpytorchï¼Œtensorflowç­‰ï¼‰ï¼Œå¹¶å¯¹ä»hd...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jupyterå…è®¸ä»€ä¹ˆï¼Ÿ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vtb/blog/443294/"> æˆ‘ä»¬çš„æ•…äº‹å§‹äºä¸€é¡¹çœ‹ä¼¼ç®€å•çš„ä»»åŠ¡ã€‚ å¿…é¡»ä¸ºæ•°æ®ç§‘å­¦ä¸“å®¶å’Œæ•°æ®åˆ†æå¸ˆå»ºç«‹åˆ†æå·¥å…·ã€‚ é›¶å”®é£é™©å’ŒCRMéƒ¨é—¨çš„åŒäº‹å·²å°†è¿™é¡¹ä»»åŠ¡äº¤ç»™äº†æˆ‘ä»¬ï¼Œåœ¨è¯¥éƒ¨é—¨ä¸­ï¼Œæ•°æ®ç§‘å­¦ä¸“å®¶çš„é›†ä¸­åº¦ä¸€ç›´å¾ˆé«˜ã€‚ å®¢æˆ·æœ‰ä¸€ä¸ªç®€å•çš„æ„¿æœ›-ç¼–å†™Pythonä»£ç ï¼Œå¯¼å…¥é«˜çº§åº“ï¼ˆxgboostï¼Œpytorchï¼Œtensorflowç­‰ï¼‰ï¼Œå¹¶å¯¹ä»hdfsé›†ç¾¤ä¸­è·å¾—çš„æ•°æ®è¿è¡Œç®—æ³•ã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/793/c16/22e/793c1622e8423e8cae171263790ab234.png"><br><br> ä¸€åˆ‡ä¼¼ä¹éƒ½å¾ˆç®€å•æ˜äº†ã€‚ ä½†æ˜¯æœ‰å¾ˆå¤šé™·é˜±ï¼Œæˆ‘ä»¬å†³å®šå†™ä¸€ç¯‡å…³äºå®ƒçš„æ–‡ç« ï¼Œå¹¶åœ¨GitHubä¸Šå‘å¸ƒç°æˆçš„è§£å†³æ–¹æ¡ˆã€‚ <br><a name="habracut"></a><br> é¦–å…ˆï¼Œæœ‰å…³æºåŸºç¡€ç»“æ„çš„ä¸€äº›è¯¦ç»†ä¿¡æ¯ï¼š <br><br><ul><li>  HDFSæ•°æ®ä»“åº“ï¼ˆ12ä¸ªOracle Big Data ApplianceèŠ‚ç‚¹ï¼ŒClouderaåˆ†å‘ï¼‰ã€‚ ä»“åº“æ€»å…±æœ‰æ¥è‡ªé“¶è¡Œå„ç§å†…éƒ¨ç³»ç»Ÿçš„130 TBæ•°æ®ï¼›ä¹Ÿæœ‰æ¥è‡ªå¤–éƒ¨æºçš„å¼‚æ„ä¿¡æ¯ã€‚ <br></li><li> å‡å®šåœ¨å…¶ä¸Šéƒ¨ç½²åˆ†æå·¥å…·çš„ä¸¤ä¸ªåº”ç”¨ç¨‹åºæœåŠ¡å™¨ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸ä»…é«˜çº§åˆ†æä»»åŠ¡åœ¨è¿™äº›æœåŠ¡å™¨ä¸Šâ€œæ—‹è½¬â€ï¼Œå› æ­¤è¦æ±‚ä¹‹ä¸€æ˜¯ä½¿ç”¨å®¹å™¨åŒ–å·¥å…·ï¼ˆDockerï¼‰æ¥ç®¡ç†æœåŠ¡å™¨èµ„æºï¼Œä½¿ç”¨å„ç§ç¯å¢ƒå¹¶å¯¹å…¶è¿›è¡Œé…ç½®ã€‚ <br></li></ul><br> ä½œä¸ºåˆ†æå¸ˆå·¥ä½œçš„ä¸»è¦ç¯å¢ƒï¼Œä»–ä»¬å†³å®šé€‰æ‹©JupyterHubï¼Œè€ŒJupyterHubå®é™…ä¸Šå·²ç»æˆä¸ºå¤„ç†æ•°æ®å’Œå¼€å‘æœºå™¨å­¦ä¹ æ¨¡å‹çš„æ ‡å‡†ä¹‹ä¸€ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„</a>äº†è§£æ›´å¤šä¿¡æ¯ã€‚ å°†æ¥ï¼Œæˆ‘ä»¬å·²ç»æƒ³åˆ°äº†JupyterLabã€‚ <br><br> ä¼¼ä¹ä¸€åˆ‡éƒ½å¾ˆç®€å•ï¼šæ‚¨éœ€è¦é‡‡ç”¨å¹¶é…ç½®ä¸€å †Python + Anaconda + Sparkã€‚ åœ¨åº”ç”¨ç¨‹åºæœåŠ¡å™¨ä¸Šå®‰è£…Jupyter Hubï¼Œä¸LDAPé›†æˆï¼Œä»¥ä»»ä½•å…¶ä»–æ–¹å¼è¿æ¥Sparkæˆ–è¿æ¥åˆ°hdfsä¸­çš„æ•°æ®ï¼Œç„¶åç»§ç»­-æ„å»ºæ¨¡å‹ï¼ <br> å¦‚æœæ‚¨æ·±å…¥ç ”ç©¶æ‰€æœ‰æºæ•°æ®å’Œéœ€æ±‚ï¼Œé‚£ä¹ˆè¿™é‡Œæ˜¯æ›´è¯¦ç»†çš„åˆ—è¡¨ï¼š <br><br><ul><li> åœ¨Dockerä¸­è¿è¡ŒJupyterHubï¼ˆåŸºæœ¬æ“ä½œç³»ç»Ÿ-Oracle Linux 7ï¼‰ <br></li><li>  Cloudera CDH 5.15.1 +å…·æœ‰Active Directoryé…ç½®ä¸­çš„Kerberosèº«ä»½éªŒè¯çš„Spark 2.3.0é›†ç¾¤+é›†ç¾¤ä¸­çš„ä¸“ç”¨Kerberos MIT MITï¼ˆè¯·å‚è§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…·æœ‰Active Directoryçš„é›†ç¾¤ä¸“ç”¨MIT KDC</a> ï¼‰ï¼ŒOracle Linux 6 <br></li><li>  Active Directoryæ•´åˆ <br></li><li>  Hadoopå’ŒSparkä¸­çš„é€æ˜èº«ä»½éªŒè¯ <br></li><li>  Python 2å’Œ3æ”¯æŒ <br></li><li>  Spark 1å’Œ2ï¼ˆå…·æœ‰ä½¿ç”¨é›†ç¾¤èµ„æºæ¥è®­ç»ƒæ¨¡å‹å’Œä½¿ç”¨pysparkå¹¶è¡ŒåŒ–æ•°æ®å¤„ç†çš„åŠŸèƒ½ï¼‰ <br></li><li> é™åˆ¶ä¸»æœºèµ„æºçš„èƒ½åŠ› <br></li><li> å›¾ä¹¦é¦†å¥—è£… <br></li></ul><br> è¿™ç¯‡æ–‡ç« æ˜¯ä¸ºéœ€è¦è§£å†³æ­¤ç±»é—®é¢˜çš„ITä¸“ä¸šäººå‘˜è€Œè®¾è®¡çš„ã€‚ <br><br><h2> è§£å†³æ–¹æ¡ˆè¯´æ˜ </h2><br><h3> åœ¨Docker + Clouderaé›†ç¾¤é›†æˆä¸­å¯åŠ¨ </h3><br> è¿™é‡Œæ²¡æœ‰å¼‚å¸¸ã€‚  JupyterHubå’ŒClouderaäº§å“å®¢æˆ·ç«¯å®‰è£…åœ¨å®¹å™¨ä¸­ï¼ˆå¦‚ä¸‹æ‰€ç¤ºï¼‰ï¼Œé…ç½®æ–‡ä»¶ä»ä¸»æœºå®‰è£…ï¼š <br><br>  <b>start-hub.sh</b> <br><br><pre><code class="plaintext hljs">VOLUMES="-v/var/run/docker.sock:/var/run/docker.sock:Z -v/var/lib/pbis/.lsassd:/var/lib/pbis/.lsassd:Z -v/var/lib/pbis/.netlogond:/var/lib/pbis/.netlogond:Z -v/var/jupyterhub/home:/home/BANK/:Z -v/u00/:/u00/:Z -v/tmp:/host/tmp:Z -v${CONFIG_DIR}/krb5.conf:/etc/krb5.conf:ro -v${CONFIG_DIR}/hadoop/:/etc/hadoop/conf.cloudera.yarn/:ro -v${CONFIG_DIR}/spark/:/etc/spark/conf.cloudera.spark_on_yarn/:ro -v${CONFIG_DIR}/spark2/:/etc/spark2/conf.cloudera.spark2_on_yarn/:ro -v${CONFIG_DIR}/jupyterhub/:/etc/jupyterhub/:ro" docker run -p0.0.0.0:8000:8000/tcp ${VOLUMES} -e VOLUMES="${VOLUMES}" -e HOST_HOSTNAME=`hostname -f` dsai1.2</code> </pre> <br><br><h3>  Active Directoryæ•´åˆ </h3><br> ä¸ºäº†ä¸Active Directory / Kerberos Ironï¼ˆä¸æ˜¯å¾ˆä¸»æœºï¼‰é›†æˆï¼Œæˆ‘ä»¬å…¬å¸çš„æ ‡å‡†æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PBIS Open</a>äº§å“ã€‚ ä»æŠ€æœ¯ä¸Šè®²ï¼Œè¯¥äº§å“æ˜¯ä¸€ç»„ä¸Active Directoryé€šä¿¡çš„æœåŠ¡ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è¿™äº›æœåŠ¡é€šè¿‡UNIXåŸŸå¥—æ¥å­—è¿›è¡Œå·¥ä½œã€‚ è¯¥äº§å“ä¸Linux PAMå’ŒNSSé›†æˆã€‚ <br><br> æˆ‘ä»¬ä½¿ç”¨äº†æ ‡å‡†çš„Dockeræ–¹æ³•-ä¸»æœºæœåŠ¡çš„unixåŸŸå¥—æ¥å­—è¢«å®‰è£…åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ï¼ˆå¥—æ¥å­—æ˜¯é€šè¿‡ä½¿ç”¨lsofå‘½ä»¤çš„ç®€å•æ“ä½œå‡­ç»éªŒæ‰¾åˆ°çš„ï¼‰ï¼š <br><br>  <b>start-hub.sh</b> <br><br><pre> <code class="plaintext hljs">VOLUMES="-v/var/run/docker.sock:/var/run/docker.sock:Z -v/var/lib/pbis/.lsassd:/var/lib/pbis/.lsassd:Z &lt;b&gt;-v/var/lib/pbis/.netlogond:/var/lib/pbis/.netlogond:Z -v/var/jupyterhub/home:/home/BANK/:Z -v/u00/:/u00/:Z -v/tmp:/host/tmp:Z -v${CONFIG_DIR}/krb5.conf:/etc/krb5.conf:ro &lt;/b&gt; -v${CONFIG_DIR}/hadoop/:/etc/hadoop/conf.cloudera.yarn/:ro -v${CONFIG_DIR}/spark/:/etc/spark/conf.cloudera.spark_on_yarn/:ro -v${CONFIG_DIR}/spark2/:/etc/spark2/conf.cloudera.spark2_on_yarn/:ro -v${CONFIG_DIR}/jupyterhub/:/etc/jupyterhub/:ro" docker run -p0.0.0.0:8000:8000/tcp ${VOLUMES} -e VOLUMES="${VOLUMES}" -e HOST_HOSTNAME=`hostname -f` dsai1.2</code> </pre><br> åè¿‡æ¥ï¼ŒPBISè½¯ä»¶åŒ…å°†å®‰è£…åœ¨å®¹å™¨å†…ï¼Œä½†ä¸æ‰§è¡Œå®‰è£…åéƒ¨åˆ†ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬åªæ”¾ç½®å¯æ‰§è¡Œæ–‡ä»¶å’Œåº“ï¼Œè€Œä¸åœ¨å®¹å™¨ä¸­å¯åŠ¨æœåŠ¡-è¿™å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯å¤šä½™çš„ã€‚  PAMå’ŒNSS Linuxé›†æˆå‘½ä»¤æ˜¯æ‰‹åŠ¨è¿è¡Œçš„ã€‚ <br><br>  <b>Dockerfileï¼š</b> <br><br><pre> <code class="plaintext hljs"># Install PAM itself and standard PAM configuration packages. RUN yum install -y pam util-linux \ # Here we just download PBIS RPM packages then install them omitting scripts. # We don't need scripts since they start PBIS services, which are not used - we connect to the host services instead. &amp;&amp; find /var/yum/localrepo/ -type f -name 'pbis-open*.rpm' | xargs rpm -ivh --noscripts \ # Enable PBIS PAM integration. &amp;&amp; domainjoin-cli configure --enable pam \ # Make pam_loginuid.so module optional (Docker requirement) and add pam_mkhomedir.so to have home directories created automatically. &amp;&amp; mv /etc/pam.d/login /tmp \ &amp;&amp; awk '{ if ($1 == "session" &amp;&amp; $2 == "required" &amp;&amp; $3 == "pam_loginuid.so") { print "session optional pam_loginuid.so"; print "session required pam_mkhomedir.so skel=/etc/skel/ umask=0022";} else { print $0; } }' /tmp/login &gt; /etc/pam.d/login \ &amp;&amp; rm /tmp/login \ # Enable PBIS nss integration. &amp;&amp; domainjoin-cli configure --enable nsswitch</code> </pre><br> äº‹å®è¯æ˜ï¼ŒPBISå®¹å™¨çš„å®¢æˆ·ç«¯ä¸PBISä¸»æœºæœåŠ¡è¿›è¡Œé€šä¿¡ã€‚  JupyterHubä½¿ç”¨PAMèº«ä»½éªŒè¯å™¨ï¼Œå¹¶ä¸”åœ¨ä¸»æœºä¸Šé…ç½®äº†æ­£ç¡®çš„PBISä¹‹åï¼Œä¸€åˆ‡éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ <br><br> ä¸ºäº†é˜²æ­¢æ‰€æœ‰ç”¨æˆ·è¿›å…¥ADï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å°†ç”¨æˆ·é™åˆ¶ä¸ºç‰¹å®šADç»„çš„è®¾ç½®ã€‚ <br><br>  <b>config-example / jupyterhub / jupyterhub_config.py</b> <br><br><pre> <code class="plaintext hljs">c.DSAIAuthenticator.group_whitelist = ['COMPANY\\domain^users']</code> </pre><br><h3>  Hadoopå’ŒSparkä¸­çš„é€æ˜èº«ä»½éªŒè¯ </h3><br> ç™»å½•åˆ°JupyterHubæ—¶ï¼ŒPBISå°†ç”¨æˆ·çš„Kerberosç¥¨è¯ç¼“å­˜åœ¨/ tmpç›®å½•ä¸­çš„ç‰¹å®šæ–‡ä»¶ä¸­ã€‚ å¯¹äºä»¥è¿™ç§æ–¹å¼è¿›è¡Œé€æ˜èº«ä»½éªŒè¯ï¼Œå°†ä¸»æœºçš„/ tmpç›®å½•æŒ‚è½½åœ¨å®¹å™¨ä¸­å¹¶å°†KRB5CCNAMEå˜é‡è®¾ç½®ä¸ºæ‰€éœ€å€¼å°±è¶³å¤Ÿäº†ï¼ˆè¿™åœ¨æˆ‘ä»¬çš„authenticatorç±»ä¸­å®Œæˆï¼‰ã€‚ <br><br>  <b>start-hub.sh</b> <br><br><pre> <code class="plaintext hljs">VOLUMES="-v/var/run/docker.sock:/var/run/docker.sock:Z -v/var/lib/pbis/.lsassd:/var/lib/pbis/.lsassd:Z -v/var/lib/pbis/.netlogond:/var/lib/pbis/.netlogond:Z -v/var/jupyterhub/home:/home/BANK/:Z -v/u00/:/u00/:Z -v/tmp:/host/tmp:Z -v${CONFIG_DIR}/krb5.conf:/etc/krb5.conf:ro -v${CONFIG_DIR}/hadoop/:/etc/hadoop/conf.cloudera.yarn/:ro -v${CONFIG_DIR}/spark/:/etc/spark/conf.cloudera.spark_on_yarn/:ro -v${CONFIG_DIR}/spark2/:/etc/spark2/conf.cloudera.spark2_on_yarn/:ro -v${CONFIG_DIR}/jupyterhub/:/etc/jupyterhub/:ro" docker run -p0.0.0.0:8000:8000/tcp ${VOLUMES} -e VOLUMES="${VOLUMES}" -e HOST_HOSTNAME=`hostname -f` dsai1.2</code> </pre> <br>  <b>èµ„äº§/ jupyterhub / dsai.py</b> <br><br><pre> <code class="plaintext hljs">env['KRB5CCNAME'] = '/host/tmp/krb5cc_%d' % pwd.getpwnam(self.user.name).pw_uid</code> </pre> <br> ç”±äºä¸Šé¢çš„ä»£ç ï¼ŒJupyterHubç”¨æˆ·å¯ä»¥ä»Jupyterç»ˆç«¯æ‰§è¡Œhdfså‘½ä»¤å¹¶è¿è¡ŒSparkä½œä¸šï¼Œè€Œæ— éœ€å…¶ä»–èº«ä»½éªŒè¯æ­¥éª¤ã€‚ å°†ä¸»æœºçš„æ•´ä¸ª/ tmpç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­æ˜¯ä¸å®‰å…¨çš„-æˆ‘ä»¬çŸ¥é“æ­¤é—®é¢˜ï¼Œä½†å…¶è§£å†³æ–¹æ¡ˆä»åœ¨å¼€å‘ä¸­ã€‚ <br><br><h3>  Pythonç‰ˆæœ¬2å’Œ3 </h3><br> åœ¨è¿™é‡Œï¼Œä¼¼ä¹ä¸€åˆ‡éƒ½å¾ˆç®€å•ï¼šæ‚¨éœ€è¦å®‰è£…å¿…è¦çš„Pythonç‰ˆæœ¬å¹¶å°†å…¶ä¸Jupyteré›†æˆï¼Œä»¥åˆ›å»ºå¿…è¦çš„å†…æ ¸ã€‚ è¿™ä¸ªé—®é¢˜å·²ç»åœ¨è®¸å¤šåœ°æ–¹è®¨è®ºè¿‡äº†ã€‚  Condaç”¨äºç®¡ç†Pythonç¯å¢ƒã€‚ ä¸‹ä¸€èŠ‚å°†é˜æ˜ä¸ºä»€ä¹ˆæ‰€æœ‰ç®€å•æ€§ä»…æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚  Python 3.6çš„å†…æ ¸ç¤ºä¾‹ï¼ˆæ­¤æ–‡ä»¶ä¸åœ¨gitä¸­-æ‰€æœ‰å†…æ ¸æ–‡ä»¶å‡ç”±ä»£ç ç”Ÿæˆï¼‰ï¼š <br><br>  <b>/opt/cloudera/parcels/Anaconda-5.3.1-dsai1.0/envs/python3.6.6/share/jupyter/kernels/python3.6.6/kernel.json</b> <br><br><pre> <code class="plaintext hljs">{   "argv": [      "/opt/cloudera/parcels/Anaconda-5.3.1-dsai1.0/envs/python3.6.6/bin/python",       "-m",       "ipykernel_launcher",       "-f",      "{connection_file}"   ],   "display_name": "Python 3",   "language": "python" }</code> </pre><br><h3> ç«èŠ±1å’Œ2 </h3><br> è¦ä¸SPARKå®¢æˆ·é›†æˆï¼Œè¿˜éœ€è¦åˆ›å»ºå†…æ ¸ã€‚  Python 3.6å’ŒSPARK 2çš„å†…æ ¸ç¤ºä¾‹ã€‚ <br><br>  <b>/opt/cloudera/parcels/Anaconda-5.3.1-dsai1.0/envs/python3.6.6/share/jupyter/kernels/python3.6.6-pyspark2/kernel.json</b> <br><br><pre> <code class="plaintext hljs">{   "argv": [       "/opt/cloudera/parcels/Anaconda-5.3.1-dsai1.0/envs/python3.6.6/bin/python",       "-m",       "ipykernel_launcher",       "-f",      "{connection_file}"   ],   "display_name": "Python 3 + PySpark 2",   "language": "python",   "env": {       "JAVA_HOME": "/usr/java/default/",       "SPARK_HOME": "/opt/cloudera/parcels/SPARK2/lib/spark2/",       "PYTHONSTARTUP": "/opt/cloudera/parcels/SPARK2/lib/spark2/python/pyspark/shell.py",       "PYTHONPATH": "/opt/cloudera/parcels/SPARK2/lib/spark2/python/:/opt/cloudera/parcels/SPARK2/lib/spark2/python/lib/py4j-0.10.7-src.zip",       "PYSPARK_PYTHON": "/opt/cloudera/parcels/Anaconda-5.3.1-dsai1.0/envs/python3.6.6/bin/python"   } }</code> </pre><br> åªéœ€æ³¨æ„ï¼Œå…·æœ‰Spark 1æ”¯æŒçš„è¦æ±‚åœ¨å†å²ä¸Šå°±å·²å‘å±•ã€‚ ä½†æ˜¯ï¼ŒæŸäººå¯èƒ½ä¼šé¢ä¸´ç±»ä¼¼çš„é™åˆ¶-ä¾‹å¦‚ï¼Œæ‚¨æ— æ³•åœ¨é›†ç¾¤ä¸­å®‰è£…Spark 2ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæè¿°åœ¨å®æ–½è¿‡ç¨‹ä¸­é‡åˆ°çš„é™·é˜±ã€‚ <br> é¦–å…ˆï¼ŒSpark 1.6.1 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸é€‚</a>ç”¨äºPython 3.6ã€‚ æœ‰è¶£çš„æ˜¯ï¼Œåœ¨CDH 5.12.1ä¸­ï¼Œæ­¤é—®é¢˜å·²ä¿®å¤ï¼Œä½†åœ¨5.15.1ä¸­å·²ä¿®å¤-å‡ºäºæŸç§åŸå› æœªè§£å†³ï¼‰ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬æƒ³é€šè¿‡ç®€å•åœ°åº”ç”¨é€‚å½“çš„è¡¥ä¸æ¥è§£å†³æ­¤é—®é¢˜ã€‚ ä½†æ˜¯ï¼Œå°†æ¥å¿…é¡»æ”¾å¼ƒè¿™ç§æƒ³æ³•ï¼Œå› ä¸ºè¿™ç§æ–¹æ³•éœ€è¦åœ¨é›†ç¾¤ä¸­å®‰è£…ç»è¿‡ä¿®æ”¹çš„Sparkï¼Œè¿™å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯ä¸å¯æ¥å—çš„ã€‚ åœ¨ä½¿ç”¨Python 3.5åˆ›å»ºå•ç‹¬çš„Condaç¯å¢ƒæ—¶æ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆã€‚ <br><br> ç¬¬äºŒä¸ªé—®é¢˜é˜»æ­¢Spark 1åœ¨Dockerå†…éƒ¨è¿è¡Œã€‚  Sparké©±åŠ¨ç¨‹åºæ‰“å¼€ä¸€ä¸ªç‰¹å®šçš„ç«¯å£ï¼ŒWorkeré€šè¿‡è¯¥ç«¯å£è¿æ¥åˆ°é©±åŠ¨ç¨‹åº-ä¸ºæ­¤ï¼Œé©±åŠ¨ç¨‹åºå‘å…¶å‘é€å…¶IPåœ°å€ã€‚ å¯¹äºDocker Workerï¼Œå®ƒä¼šå°è¯•é€šè¿‡å®¹å™¨çš„IPè¿æ¥åˆ°é©±åŠ¨ç¨‹åºï¼Œè€Œå½“ä½¿ç”¨network = bridgeæ—¶ï¼Œå®ƒå¹¶ä¸æ˜¯å¾ˆè‡ªç„¶åœ°å·¥ä½œã€‚ <br><br> æ˜¾è€Œæ˜“è§çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸å‘é€å®¹å™¨çš„IPï¼Œè€Œæ˜¯å‘é€ä¸»æœºçš„IPï¼Œè¿™æ˜¯åœ¨Spark 2ä¸­é€šè¿‡æ·»åŠ é€‚å½“çš„é…ç½®è®¾ç½®å®ç°çš„ã€‚ è¯¥ä¿®è¡¥ç¨‹åºç»è¿‡åˆ›é€ æ€§åœ°é‡æ–°è®¾è®¡ï¼Œå¹¶åº”ç”¨äºSpark1ã€‚ä»¥è¿™ç§æ–¹å¼ä¿®æ”¹çš„Sparkä¸éœ€è¦æ”¾ç½®åœ¨ç¾¤é›†ä¸»æœºä¸Šï¼Œå› æ­¤ä¸ä¼šå‡ºç°ä¸Python 3.6ä¸å…¼å®¹çš„é—®é¢˜ã€‚ <br><br> ä¸ç®¡Sparkçš„ç‰ˆæœ¬æ˜¯ä»€ä¹ˆï¼Œå°±å…¶åŠŸèƒ½è€Œè¨€ï¼Œç¾¤é›†ä¸­å¿…é¡»å…·æœ‰ä¸å®¹å™¨ä¸­ç›¸åŒçš„Pythonç‰ˆæœ¬ã€‚ è¦ç›´æ¥ç»•è¿‡Cloudera Managerå®‰è£…Anacondaï¼Œæˆ‘ä»¬å¿…é¡»å­¦ä¹ åšä¸¤ä»¶äº‹ï¼š <br><br><ul><li> ä½¿ç”¨Anacondaå’Œæ‰€æœ‰åˆé€‚çš„ç¯å¢ƒæ„å»ºåŒ…è£¹ <br></li><li> å°†å…¶å®‰è£…åœ¨Dockerä¸­ï¼ˆå‡ºäºä¸€è‡´æ€§è€ƒè™‘ï¼‰ <br></li></ul><br><h3> ç»„è£…åŒ…è£¹èŸ’è›‡ </h3><br> åŸæ¥è¿™æ˜¯ä¸€ä¸ªç›¸å½“ç®€å•çš„ä»»åŠ¡ã€‚ æ‚¨éœ€è¦åšçš„æ˜¯ï¼š <br><br><ol><li> é€šè¿‡å®‰è£…æ‰€éœ€ç‰ˆæœ¬çš„Anacondaå’ŒPythonç¯å¢ƒæ¥å‡†å¤‡åŒ…è£¹å†…å®¹ <br></li><li> åˆ›å»ºå…ƒæ•°æ®æ–‡ä»¶å¹¶å°†å…¶æ”¾åœ¨metaç›®å½•ä¸­ <br></li><li> ç”¨ç®€å•çš„taråˆ›å»ºåŒ…è£¹ <br></li><li> ä»ClouderaéªŒè¯å®—åœ°å®ç”¨ç¨‹åº <br></li></ol><br> è¯¥è¿‡ç¨‹åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHubä¸Š</a>æœ‰æ›´è¯¦ç»†çš„æè¿°ï¼Œé‚£é‡Œè¿˜æœ‰ä¸€ä¸ªéªŒè¯å™¨ä»£ç ã€‚ æˆ‘ä»¬åœ¨Clouderaå®˜æ–¹Anacondaå®˜æ–¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åŒ…è£¹ä¸­</a>å€Ÿç”¨äº†å…ƒæ•°æ®ï¼Œå¯¹å®ƒè¿›è¡Œäº†åˆ›é€ æ€§çš„é‡æ–°åˆ¶ä½œã€‚ <br><br><h3> åœ¨Dockerä¸­å®‰è£…åŒ…è£¹ </h3><br> äº‹å®è¯æ˜ï¼Œè¿™ç§åšæ³•å¾ˆæœ‰ç”¨ï¼ŒåŸå› æœ‰ä¸¤ä¸ªï¼š <br><br><ul><li> ç¡®ä¿Sparkçš„å¯æ“ä½œæ€§-æ— æ³•å°†Anacondaæ”¾åœ¨æ²¡æœ‰åŒ…è£¹çš„é›†ç¾¤ä¸­ <br></li><li>  Spark 2ä»…ä»¥åŒ…è£¹å½¢å¼åˆ†å‘-æ‚¨å½“ç„¶å¯ä»¥å°†å…¶å®‰è£…ä¸ºä»¥jaræ–‡ä»¶çš„å½¢å¼åœ¨å®¹å™¨ä¸­ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•è¢«æ‹’ç»äº† <br></li></ul><br> ä½œä¸ºè§£å†³ä¸Šè¿°é—®é¢˜çš„ä¸€é¡¹å¥–åŠ±ï¼Œæˆ‘ä»¬æ”¶åˆ°äº†ï¼š <br><br><ul><li> è½»æ¾è®¾ç½®Hadoopå’ŒSparkå®¢æˆ·ç«¯-åœ¨Dockerå’Œé›†ç¾¤ä¸­å®‰è£…ç›¸åŒçš„åŒ…è£¹æ—¶ï¼Œé›†ç¾¤å’Œå®¹å™¨ä¸­çš„è·¯å¾„ç›¸åŒ <br></li><li> æ˜“äºåœ¨å®¹å™¨å’Œç¾¤é›†ä¸­ç»´æŠ¤ç»Ÿä¸€çš„ç¯å¢ƒ-æ›´æ–°ç¾¤é›†æ—¶ï¼Œä»…ä½¿ç”¨ä¸ç¾¤é›†ä¸­å®‰è£…çš„ç›¸åŒå®—åœ°é‡æ–°æ„å»ºDockeræ˜ åƒã€‚ <br></li></ul><br> è¦åœ¨Dockerä¸­å®‰è£…åŒ…è£¹ï¼Œé¦–å…ˆè¦ä»RPMè½¯ä»¶åŒ…ä¸­å®‰è£…Cloudera Managerã€‚ å¯¹äºå®é™…çš„åŒ…è£¹å®‰è£…ï¼Œä½¿ç”¨Javaä»£ç ã€‚  Javaä¸­çš„å®¢æˆ·ç«¯çŸ¥é“Pythonä¸­çš„å®¢æˆ·ç«¯æ— æ³•æ‰§è¡Œçš„æ“ä½œï¼Œå› æ­¤æˆ‘ä¸å¾—ä¸ä½¿ç”¨Javaå¹¶å¤±å»ä¸€äº›ç»Ÿä¸€æ€§ï¼‰ï¼Œè¿™ä¼šè°ƒç”¨APIã€‚ <br><br>  <b>èµ„äº§/ install-parcels / src / InstallParcels.java</b> <br><br><pre> <code class="plaintext hljs">ParcelsResourceV5 parcels = clusters.getParcelsResource(clusterName); for (int i = 1; i &lt; args.length; i += 2) {   result = installParcel(api, parcels, args[i], args[i + 1], pause);   if (!result) {       System.exit(1);   } }</code> </pre><br><h3> ä¸»æœºèµ„æºé™åˆ¶ </h3><br> ä¸ºäº†ç®¡ç†ä¸»æœºèµ„æºï¼Œä½¿ç”¨äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">DockerSpawner</a>çš„ç»„åˆï¼ˆä¸€ä¸ªåœ¨å•ç‹¬çš„Dockerå®¹å™¨ä¸­è¿è¡ŒJupyteræœ€ç»ˆç”¨æˆ·çš„ç»„ä»¶ï¼‰å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">cgroups</a> ï¼ˆä¸€ç§Linuxä¸­çš„èµ„æºç®¡ç†æœºåˆ¶ï¼‰ã€‚  DockerSpawnerä½¿ç”¨Docker APIï¼Œè¯¥APIå…è®¸æ‚¨è®¾ç½®å®¹å™¨çš„çˆ¶cgroupã€‚ å¸¸è§„DockerSpawnerä¸­æ²¡æœ‰è¿™ç§å¯èƒ½æ€§ï¼Œå› æ­¤æˆ‘ä»¬ç¼–å†™äº†ç®€å•çš„ä»£ç ï¼Œä½¿æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®ä¸­è®¾ç½®ADå®ä½“å’Œçˆ¶cgroupä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚ <br><br>  <b>èµ„äº§/ jupyterhub / dsai.py</b> <br><br><pre> <code class="plaintext hljs">def set_extra_host_config(self):       extra_host_config = {}       if self.user.name in self.user_cgroup_parent:           cgroup_parent = self.user_cgroup_parent[self.user.name]       else:           pw_name = pwd.getpwnam(self.user.name).pw_name           group_found = False           for g in grp.getgrall():               if pw_name in g.gr_mem and g.gr_name in self.group_cgroup_parent:                   cgroup_parent = self.group_cgroup_parent[g.gr_name]                   group_found = True                   break           if not group_found:               cgroup_parent = self.cgroup_parent extra_host_config['cgroup_parent'] = cgroup_parent</code> </pre><br> è¿˜å¼•å…¥äº†ä¸€ä¸ªå°çš„ä¿®æ”¹ï¼Œè¯¥ä¿®æ”¹ä»å¯åŠ¨JupyterHubçš„åŒä¸€æ˜ åƒå¯åŠ¨Jupyterã€‚ å› æ­¤ï¼Œä¸éœ€è¦ä½¿ç”¨å¤šä¸ªå›¾åƒã€‚ <br><br>  <b>èµ„äº§/ jupyterhub / dsai.py</b> <br><br><pre> <code class="plaintext hljs">current_container = None host_name = socket.gethostname() for container in self.client.containers():   if container['Id'][0:12] == host_name:       current_container = container       break self.image = current_container['Image']</code> </pre><br> åœ¨å®¹å™¨è„šæœ¬ï¼ˆJupyteræˆ–JupyterHubï¼‰ä¸­ç¡®åˆ‡è¿è¡Œçš„å†…å®¹ç”±å¯åŠ¨è„šæœ¬ä¸­çš„ç¯å¢ƒå˜é‡ç¡®å®šï¼š <br><br>  <b>èµ„äº§/ jupyterhub / dsai.py</b> <br><br><pre> <code class="plaintext hljs">#!/bin/bash ANACONDA_PATH="/opt/cloudera/parcels/Anaconda/" DEFAULT_ENV=`cat ${ANACONDA_PATH}/envs/default` source activate ${DEFAULT_ENV} if [ -z "${JUPYTERHUB_CLIENT_ID}" ]; then   while true; do       jupyterhub -f /etc/jupyterhub/jupyterhub_config.py   done else   HOME=`su ${JUPYTERHUB_USER} -c 'echo ~'`   cd ~   su ${JUPYTERHUB_USER} -p -c "jupyterhub-singleuser --KernelSpecManager.ensure_native_kernel=False --ip=0.0.0.0" fi</code> </pre><br> ä»JupyterHub Dockerå®¹å™¨å¯åŠ¨Jupyter Dockerå®¹å™¨çš„èƒ½åŠ›æ˜¯é€šè¿‡å°†Dockerå®ˆæŠ¤è¿›ç¨‹å¥—æ¥å­—å®‰è£…åœ¨JupyterHubå®¹å™¨ä¸­æ¥å®ç°çš„ã€‚ <br><br>  <b>start-hub.sh</b> <br><br><pre> <code class="plaintext hljs">VOLUMES="-&lt;b&gt;v/var/run/docker.sock:/var/run/docker.sock:Z -v/var/lib/pbis/.lsassd:/var/lib/pbis/.lsassd:Z&lt;/b&gt; -v/var/lib/pbis/.netlogond:/var/lib/pbis/.netlogond:Z -v/var/jupyterhub/home:/home/BANK/:Z -v/u00/:/u00/:Z -v/tmp:/host/tmp:Z -v${CONFIG_DIR}/krb5.conf:/etc/krb5.conf:ro -v${CONFIG_DIR}/hadoop/:/etc/hadoop/conf.cloudera.yarn/:ro -v${CONFIG_DIR}/spark/:/etc/spark/conf.cloudera.spark_on_yarn/:ro -v${CONFIG_DIR}/spark2/:/etc/spark2/conf.cloudera.spark2_on_yarn/:ro -v${CONFIG_DIR}/jupyterhub/:/etc/jupyterhub/:ro" docker run -p0.0.0.0:8000:8000/tcp ${VOLUMES} -e VOLUMES="${VOLUMES}" -e HOST_HOSTNAME=`hostname -f` dsai1.2</code> </pre><br> å°†æ¥ï¼Œè®¡åˆ’æ”¾å¼ƒè¯¥å†³å®šï¼Œè€Œæ¨èä½¿ç”¨sshã€‚ <br><br> å½“å°†DockerSpawnerä¸Sparkç»“åˆä½¿ç”¨æ—¶ï¼Œä¼šå‡ºç°å¦ä¸€ä¸ªé—®é¢˜ï¼šSparké©±åŠ¨ç¨‹åºæ‰“å¼€éšæœºç«¯å£ï¼ŒWorkersé€šè¿‡è¿™äº›ç«¯å£å»ºç«‹å¤–éƒ¨è¿æ¥ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨Sparké…ç½®ä¸­è®¾ç½®ç«¯å£å·çš„èŒƒå›´æ¥æ§åˆ¶ä»ä¸­é€‰æ‹©éšæœºç«¯å£å·çš„èŒƒå›´ã€‚ ä½†æ˜¯ï¼Œè¿™äº›èŒƒå›´å¯¹äºä¸åŒçš„ç”¨æˆ·å¿…é¡»æ˜¯ä¸åŒçš„ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•ä½¿ç”¨ç›¸åŒçš„å·²å‘å¸ƒç«¯å£è¿è¡ŒJupyterå®¹å™¨ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¼–å†™äº†ä»£ç ï¼Œè¯¥ä»£ç ä»…é€šè¿‡JupyterHubæ•°æ®åº“ä¸­çš„ç”¨æˆ·IDç”Ÿæˆç«¯å£èŒƒå›´ï¼Œå¹¶ä½¿ç”¨é€‚å½“çš„é…ç½®å¯åŠ¨Dockerå®¹å™¨å’ŒSparkï¼š <br><br>  <b>èµ„äº§/ jupyterhub / dsai.py</b> <br><br><pre> <code class="plaintext hljs">def set_extra_create_kwargs(self):       user_spark_driver_port, user_spark_blockmanager_port, user_spark_ui_port, user_spark_max_retries = self.get_spark_ports()       if user_spark_driver_port == 0 or user_spark_blockmanager_port == 0 or user_spark_ui_port == 0 or user_spark_max_retries == 0:           return       ports = {}       for p in range(user_spark_driver_port, user_spark_driver_port + user_spark_max_retries):           ports['%d/tcp' % p] = None       for p in range(user_spark_blockmanager_port, user_spark_blockmanager_port + user_spark_max_retries):           ports['%d/tcp' % p] = None       for p in range(user_spark_ui_port, user_spark_ui_port + user_spark_max_retries):           ports['%d/tcp' % p] = None self.extra_create_kwargs = { 'ports' : ports }</code> </pre><br> è¯¥è§£å†³æ–¹æ¡ˆçš„ç¼ºç‚¹æ˜¯ï¼Œå½“æ‚¨ä½¿ç”¨JupyterHubé‡æ–°å¯åŠ¨å®¹å™¨æ—¶ï¼Œç”±äºæ•°æ®åº“ä¸¢å¤±ï¼Œä¸€åˆ‡éƒ½ä¼šåœæ­¢å·¥ä½œã€‚ å› æ­¤ï¼Œå½“æ‚¨é‡æ–°å¯åŠ¨JupyterHubä»¥è¿›è¡Œä¾‹å¦‚é…ç½®æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬ä¸ä¼šè§¦æ‘¸å®¹å™¨æœ¬èº«ï¼Œè€Œåªä¼šé‡æ–°å¯åŠ¨å…¶ä¸­çš„JupyterHubè¿›ç¨‹ã€‚ <br><br>  <b>é‡æ–°å¯åŠ¨-hub.sh</b> <br><br><pre> <code class="plaintext hljs">#!/bin/bash docker ps | fgrep 'dsai1.2' | fgrep -v 'jupyter-' | awk '{ print $1; }' | while read ID; do docker exec $ID /bin/bash -c "kill \$( cat /root/jupyterhub.pid )"; done</code> </pre><br>  Cgroupæœ¬èº«æ˜¯ç”±æ ‡å‡†Linuxå·¥å…·åˆ›å»ºçš„ï¼Œé…ç½®ä¸­ADå®ä½“å’Œcgroupä¹‹é—´çš„å¯¹åº”å…³ç³»å¦‚ä¸‹æ‰€ç¤ºã€‚ <br><br><pre> <code class="plaintext hljs">&lt;b&gt;config-example/jupyterhub/jupyterhub_config.py&lt;/b&gt; c.DSAISpawner.user_cgroup_parent = {   'bank\\user1'    : '/jupyter-cgroup-1', # user 1   'bank\\user2'    : '/jupyter-cgroup-1', # user 2   'bank\\user3'    : '/jupyter-cgroup-2', # user 3 } c.DSAISpawner.cgroup_parent = '/jupyter-cgroup-3'</code> </pre><br><h3>  Gitä»£ç  </h3><br> æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆå¯åœ¨GitHubä¸Šå…¬å¼€è·å¾—ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https</a> ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">//github.com/DS-AI/dsai/</a> ï¼ˆDSAI-æ•°æ®ç§‘å­¦å’Œäººå·¥æ™ºèƒ½ï¼‰ã€‚ æ‰€æœ‰ä»£ç éƒ½æŒ‰é¡ºåºæ’åˆ—åœ¨ç›®å½•ä¸­-æ¯ä¸ªåç»­ç›®å½•ä¸­çš„ä»£ç éƒ½å¯ä»¥ä½¿ç”¨ä¸Šä¸€ä¸ªç›®å½•ä¸­çš„å·¥ä»¶ã€‚ æ¥è‡ªæœ€åä¸€ä¸ªç›®å½•çš„ä»£ç ç»“æœå°†æ˜¯Dockeræ˜ åƒã€‚ <br><br> æ¯ä¸ªç›®å½•åŒ…å«æ–‡ä»¶ï¼š <br><br><ul><li>  asset.sh-åˆ›å»ºç»„è£…æ‰€éœ€çš„å·¥ä»¶ï¼ˆä»Internetä¸‹è½½æˆ–ä»å…ˆå‰æ­¥éª¤çš„ç›®å½•å¤åˆ¶ï¼‰ <br></li><li>  build.sh-æ„å»º <br></li><li>  clean.sh-ç»„è£…æ‰€éœ€çš„æ¸…æ´å·¥ä»¶ <br></li></ul><br> ä¸ºäº†å®Œå…¨é‡å»ºDockeræ˜ åƒï¼Œæœ‰å¿…è¦æ ¹æ®ç›®å½•çš„åºåˆ—å·è¿è¡Œclean.shï¼Œassets.shï¼Œbuild.shã€‚ <br><br> ä¸ºäº†è¿›è¡Œç»„è£…ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€å°è£…æœ‰Linux RedHat 7.4ï¼ŒDocker 17.05.0-ceçš„æœºå™¨ã€‚ è¯¥è®¡ç®—æœºå…·æœ‰8ä¸ªå†…æ ¸ï¼Œ32GB RAMå’Œ250GBç£ç›˜ç©ºé—´ã€‚ å¼ºçƒˆå»ºè®®ä¸è¦ä½¿ç”¨RAMå’ŒHDDè®¾ç½®æœ€å·®çš„ä¸»æœºæ¥æ„å»ºå®ƒã€‚ <br><br> è¿™æ˜¯æ‰€ç”¨åç§°çš„å¸®åŠ©ï¼š <br><br><ul><li>  01-spark-patched-RPM Spark 1.6.1ï¼Œåº”ç”¨äº†ä¸¤ä¸ªè¡¥ä¸SPARK-4563å’ŒSPARK-19019ã€‚ <br></li><li>  02-éªŒè¯ç¨‹åº-åŒ…è£¹éªŒè¯ç¨‹åº <br></li><li>  03-anaconda-dsai-parcel-1.0-å¸¦æœ‰æ­£ç¡®Pythonï¼ˆ2ã€3.5å’Œ3.6ï¼‰çš„AnacondaåŒ…è£¹ <br></li><li>  04-cloudera-manager-api-Cloudera Manager APIåº“ <br></li><li>  05-dsai1.2-offline-æœ€ç»ˆå›¾åƒ <br></li></ul><br>  ï¼Œç¨‹åºé›†å¯èƒ½ç”±äºæ— æ³•ä¿®å¤çš„åŸå› è€Œå´©æºƒï¼ˆä¾‹å¦‚ï¼Œåœ¨ç»„è£…ç¨‹åºåŒ…è¿‡ç¨‹ä¸­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">taræ‰è½</a>äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šå¸¸ï¼Œæ‚¨åªéœ€è¦é‡æ–°å¯åŠ¨ç¨‹åºé›†å³å¯ï¼Œä½†è¿™å¹¶ä¸èƒ½æ€»æ˜¯æœ‰å¸®åŠ©ï¼ˆä¾‹å¦‚ï¼ŒSparkç¨‹åºé›†å–å†³äºå¤–éƒ¨èµ„æºï¼‰ Clouderaï¼Œå¯èƒ½ä¸å†å¯ç”¨ç­‰ï¼‰ã€‚ <br><br> å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯åŒ…è£¹ç»„ä»¶æ— æ³•å¤åˆ¶ã€‚ ç”±äºåº“æ˜¯ä¸æ–­æ›´æ–°çš„ï¼Œå› æ­¤é‡å¤æ‰§è¡Œç¨‹åºé›†å¯èƒ½ä¼šå¾—åˆ°ä¸å‰ä¸€ä¸ªç»“æœä¸åŒçš„ç»“æœã€‚ <br><br><h2> å¤§ç»“å±€ </h2><br> ç°åœ¨ï¼Œç”¨æˆ·å·²ç»æˆåŠŸä½¿ç”¨äº†è¿™äº›å·¥å…·ï¼Œå…¶æ•°é‡å·²ç»è¶…è¿‡å‡ åä¸ªï¼Œå¹¶ä¸”è¿˜åœ¨ç»§ç»­å¢é•¿ã€‚ å°†æ¥ï¼Œæˆ‘ä»¬è®¡åˆ’å°è¯•JupyterLabå¹¶è€ƒè™‘å°†GPUè¿æ¥åˆ°ç¾¤é›†ï¼Œå› ä¸ºç°åœ¨ä¸¤ä¸ªåŠŸèƒ½å¼ºå¤§çš„åº”ç”¨ç¨‹åºæœåŠ¡å™¨çš„è®¡ç®—èµ„æºå·²ä¸å†è¶³å¤Ÿã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN443294/">https://habr.com/ru/post/zh-CN443294/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN443284/index.html">PostgreSQLä¸­çš„ç´¢å¼•-4ï¼ˆBtreeï¼‰</a></li>
<li><a href="../zh-CN443286/index.html">TDMSèˆªé“ã€‚ è‡ªåŠ¨å¡«å……æœºåˆ¶ï¼Œç”¨äºå›¾çº¸ä¸Šçš„ä¸»è¦é“­æ–‡å’Œæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯</a></li>
<li><a href="../zh-CN443288/index.html">åœ¨å¤šæ¨¡å—é¡¹ç›®ä¸­å¯¼èˆª</a></li>
<li><a href="../zh-CN443290/index.html">Zen Erlang [å’ŒElixir-å¤§çº¦ è¯‘è€…]</a></li>
<li><a href="../zh-CN443292/index.html">æˆ‘ä»¬ä»¥â€œçµæ´»çš„é¢„åŠ è½½å™¨çš„å¸ƒå±€â€â€‹â€‹ä¸ºä¾‹ç ”ç©¶ç”µç£å•å…ƒçš„å·¥ä½œåŸç†</a></li>
<li><a href="../zh-CN443298/index.html">æ— çº¿å……ç”µã€‚ åœ¨å®è·µä¸­å¦‚ä½•è¿ä½œ</a></li>
<li><a href="../zh-CN443300/index.html">United Tradersçš„å‘å±•å¦‚ä½•</a></li>
<li><a href="../zh-CN443302/index.html">è‹¹æœå¦‚ä½•ä¸ºiPhoneä¹‹åçš„æ—¶ä»£åšå‡†å¤‡</a></li>
<li><a href="../zh-CN443304/index.html">å³ä½¿å­˜åœ¨æŠ€æœ¯ææƒ§ç—‡ï¼Œå¯¹æŠ€æœ¯ææƒ§ç—‡ä¹Ÿæ²¡æœ‰æ„ä¹‰</a></li>
<li><a href="../zh-CN443308/index.html">ç°ä»£ç‰©ç†å­¦çš„ç¥è¯ã€‚ å…»æŠ¤æ³•</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>