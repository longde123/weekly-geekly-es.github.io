<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¥üèº üî≥ üëçüèª Como as especificidades do trabalho com servidores de aplicativos est√£o mudando usando o exemplo OpenLiberty üçù üöΩ üç¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! 

 O discurso de Sebastian Dashner em um encontro em Java no escrit√≥rio da IBM em Moscou (encontrou um registro de desempenho semelhante) me...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como as especificidades do trabalho com servidores de aplicativos est√£o mudando usando o exemplo OpenLiberty</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ibm/blog/464999/"><img src="https://habrastorage.org/webt/nj/e7/va/nje7vacjsvcyzzj52ul6jnobdak.png"><br><br>  Ol√° Habr! <br><br>  O discurso de Sebastian Dashner em um encontro em Java no escrit√≥rio da IBM em Moscou (encontrou um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">registro de</a> desempenho semelhante) me levou a come√ßar a conhecer meus servidores de aplicativos leves, em particular o OpenLiberty.  E ent√£o eu pensei: <br><br><ol><li>  Quais s√£o os benef√≠cios de um servidor de aplicativos leve? </li><li>  Como a especificidade do trabalho muda ao us√°-los? </li><li>  Por que empacotar um servidor de aplicativos em um cont√™iner? </li></ol><br>  Respondendo a essas perguntas, notei que h√° pouca informa√ß√£o p√∫blica sobre esse t√≥pico, ent√£o decidi colet√°-las e sistematiz√°-las aqui. <br><br>  Eu posto os resultados sob o corte. <br><a name="habracut"></a><br><h3>  Quais s√£o os benef√≠cios de um servidor de aplicativos leve? </h3><br>  Anteriormente, os servidores de aplicativos Java EE corporativos (como JBoss AS, Oracle WebLogic e IBM WebSphere AS) eram considerados um design pesado e pesado, especialmente quando falamos sobre tempos de inicializa√ß√£o e implanta√ß√£o.  Mas a tecnologia em nuvem est√° capturando uma parte cada vez maior do setor e os requisitos do servidor de aplicativos est√£o mudando. <br><br>  E agora, no lugar de servidores de aplicativos corporativos completos, v√™m servidores de aplicativos pequenos, r√°pidos e modulares, focados em uma tarefa espec√≠fica: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Thorntail</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Payara Micro</a> - os irm√£os mais novos WildFly e Payara;  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Meecrowave</a> √© um servidor JAX-RS + CDI + JSON <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">leve</a> , o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">KumuluzEE</a> √© um servidor que permite estender o Java EE usando Node.js, Go e outros. <br><br>  Esta lista tamb√©m inclui o OpenLiberty - um servidor de aplicativos de c√≥digo aberto (distribu√≠do de acordo com EPL-1.0) que suporta os mais recentes padr√µes Java EE / Microprofile, nos quais o WebSphere Liberty √© executado. <br><br><div class="spoiler">  <b class="spoiler_title">Resumo dos Recursos do EPL-1.0 (Licen√ßa P√∫blica Eclipse Vers√£o 1.0)</b> <div class="spoiler_text"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O EPL 1.0</a> √© baseado na CPL e n√£o √© compat√≠vel com a GPL, permite que voc√™ cumpra outras licen√ßas e patentes usadas no trabalho e fornece o direito de licenciar o produto sob qualquer outra licen√ßa, uma c√≥pia da licen√ßa deve ser inclu√≠da em todas as c√≥pias do programa. <br><br>  As adi√ß√µes ao produto principal podem ser licenciadas separadamente e at√© sob uma licen√ßa comercial.  No entanto, altera√ß√µes e adi√ß√µes que s√£o trabalhos derivados devem ser licenciadas sob a mesma licen√ßa EPL, o que exige que voc√™ abra o c√≥digo-fonte. <br><br>  A associa√ß√£o de um projeto de software ao c√≥digo protegido pela licen√ßa EPL (por exemplo, usando esse c√≥digo como uma biblioteca), em geral, n√£o torna este projeto um trabalho derivado e n√£o imp√µe obriga√ß√µes correspondentes. <br><br>  Um Membro que inclua o Programa em uma cota√ß√£o deve faz√™-lo para evitar uma poss√≠vel responsabilidade por outros Membros.  (renuncia expressamente a qualquer garantia ou responsabilidade em nome de todos os autores) <br><br>  Por exemplo: Um participante pode incluir o Programa em uma cota√ß√£o, produto X. Ent√£o, esse participante √© um participante Comercial.  Se este comerciante fizer reivindica√ß√µes sobre velocidade ou oferecer garantias de produto para X, essas reivindica√ß√µes e ofertas s√£o de responsabilidade pessoal do comerciante.  Sob esta se√ß√£o, o Membro Comercial deve proteger outros Membros de reclama√ß√µes relacionadas a desempenho e garantias, e se o tribunal exigir que qualquer outro Membro pague qualquer dano resultante, o Membro Comercial dever√° pagar essas perdas. <br></div></div><br>  Vamos ver quais benef√≠cios podemos obter ao implantar o aplicativo em um cont√™iner com o OpenLiberty.  (Voc√™ deve ter qualquer vers√£o do java instalada, etapas adicionais devem ser executadas enquanto estiver no diret√≥rio wlp) <br><br><h4>  Velocidade: </h4><br>  A velocidade √© o indicador mais importante para um aplicativo em nuvem, porque, para que um aplicativo em nuvem seja escalado, gerencie e lide rapidamente com a carga crescente, ele deve ser iniciado em segundos.  Um servidor de aplicativos leve pode fazer isso.  Para verificar, fa√ßa o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">download do servidor OpenLiberty</a> e execute bin / server run ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">lista completa de comandos</a> ): <br><br><pre><code class="bash hljs">$ bin/server run  defaultServer (Open Liberty 19.0.0.6/wlp-1.0.29.cl190620190617-1530)  Java HotSpot(TM) 64-Bit Server VM  1.8.0_212-b10 (ru_US) [AUDIT ] CWWKE0001I:  defaultServer . [AUDIT ] CWWKZ0058I:   dropins  . [AUDIT ] CWWKF0012I:     : [el-3.0, jsp-2.3, servlet-3.1]. [AUDIT ] CWWKF0011I:  defaultServer      .  defaultServer   1,709 .</code> </pre> <br><h4>  Modularidade e flexibilidade </h4><br>  A maioria dos aplicativos n√£o precisa do Java EE como um todo, mas requer um conjunto dedicado de padr√µes, usado com mais freq√º√™ncia em aplicativos corporativos.  Gra√ßas √† OSGI, podemos escolher o conjunto de padr√µes Java EE e / ou MicroProfile que precisamos, ignorando todo o resto. <br><br>  Por exemplo, declare JAX-RS do Java EE e mpHealth do Microprofile adicionando algumas linhas ao featureManager bloqueie usr / servers / <b>serverName</b> / <b>serverName</b> /server.xml <br><br><pre> <code class="json hljs">&lt;?xml version=<span class="hljs-string"><span class="hljs-string">"1.0"</span></span> encoding=<span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>?&gt; &lt;server description=<span class="hljs-string"><span class="hljs-string">"new server"</span></span>&gt; &lt;!-- Enable features --&gt; &lt;featureManager&gt; &lt;feature&gt;jsp<span class="hljs-number"><span class="hljs-number">-2.3</span></span>&lt;/feature&gt; &lt;feature&gt;mpHealth<span class="hljs-number"><span class="hljs-number">-1.0</span></span>&lt;/feature&gt; &lt;feature&gt;jaxrs<span class="hljs-number"><span class="hljs-number">-2.1</span></span>&lt;/feature&gt; &lt;/featureManager&gt; &lt;!-- To access this server from a remote client add a host attribute to the following element, eg host=<span class="hljs-string"><span class="hljs-string">"*"</span></span> --&gt; &lt;httpEndpoint id=<span class="hljs-string"><span class="hljs-string">"defaultHttpEndpoint"</span></span> httpPort=<span class="hljs-string"><span class="hljs-string">"9080"</span></span> httpsPort=<span class="hljs-string"><span class="hljs-string">"9443"</span></span> /&gt; &lt;!-- Automatically expand WAR files and EAR files --&gt; &lt;applicationManager autoExpand=<span class="hljs-string"><span class="hljs-string">"true"</span></span>/&gt; &lt;/server&gt;</code> </pre><br><h4>  Atualiza√ß√£o din√¢mica </h4><br>  Durante o desenvolvimento, o c√≥digo e a configura√ß√£o do programa mudam constantemente. <br>  O servidor de aplicativos est√° configurado para monitorar altera√ß√µes e, se necess√°rio, reconfigura e implanta o aplicativo rapidamente.  Por exemplo, uma rea√ß√£o a mudan√ßas recentes: <br><br><pre> <code class="bash hljs">[AUDIT ] CWWKG0016I:    . [AUDIT ] CWWKG0017I:      0,475 . [AUDIT ] CWWKF0012I:     : [cdi-2.0, jaxrs-2.1, jaxrsClient-2.1, jndi-1.0, json-1.0, jsonp-1.1, mpHealth-1.0, servlet-4.0]. [AUDIT ] CWWKF0013I:     : [servlet-3.1]. [AUDIT ] CWWKF0008I:     0,476 .</code> </pre> <br><h4>  Tamanho e montagem da imagem </h4><br>  Os tamanhos dos servidores de aplicativos diminu√≠ram significativamente e agora permitem implantar <br>  cada aplicativo em um servidor de aplicativos separado para embal√°-los em cont√™ineres, oferecendo a maior flexibilidade.  Al√©m disso, desde  a imagem consiste em camadas, ao remontar e distribuir artefatos, apenas a camada do aplicativo √© copiada, o SO, o tempo de execu√ß√£o e o servidor de aplicativos s√£o armazenados em cache. <br><br>  O Dockerhub possui imagens pr√©-constru√≠das que cont√™m um servidor OpenLiberty pr√©-configurado.  Usaremos um deles e criaremos um Dockerfile: <br><br><pre> <code class="json hljs">FROM open-liberty COPY usr/servers/defaultServer /opt/ol/wlp/usr/servers/defaultServer ENTRYPOINT [<span class="hljs-string"><span class="hljs-string">"/opt/ol/wlp/bin/server"</span></span>, <span class="hljs-string"><span class="hljs-string">"run"</span></span>] CMD [<span class="hljs-string"><span class="hljs-string">"defaultServer"</span></span>]</code> </pre><br>  Vamos montar a imagem: <br><br><pre> <code class="bash hljs">docker build -t app .</code> </pre> <br>  Execute-o como um cont√™iner: <br><br><pre> <code class="bash hljs">docker run -d --name app -p 9080:9080 app</code> </pre> <br>  Verifique o resultado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">http: // localhost: 9080 / health /</a> <br><br><img src="https://habrastorage.org/webt/ra/jc/py/rajcpyeatsc8yna1bfoxgaez2e8.png"><br><br>  Para parar o cont√™iner: <br><br><pre> <code class="bash hljs">docker stop app</code> </pre> <br>  Existem muitos outros cen√°rios para o uso do cont√™iner e, em geral, esta √© uma ocasi√£o para artigos individuais, portanto, voltemos √†s perguntas. <br><br><h3>  Como a especificidade do trabalho est√° mudando? </h3><br><h4>  Pacote </h4><br>  A imagem do cont√™iner deve ser coletada apenas uma vez e, em seguida, executada em todos os ambientes.  Portanto, √© recomend√°vel coletar cada aplicativo junto com o servidor de aplicativos.  Isso simplifica o ciclo de vida e a implanta√ß√£o de aplicativos e se encaixa perfeitamente no mundo moderno da tecnologia de cont√™ineres. <br><br><h4>  Assembl√©ia </h4><br>  Agora n√£o √© mais necess√°rio agrupar blocos t√©cnicos diferentes em arquivos separados.  Toda a l√≥gica de neg√≥cios, juntamente com servi√ßos da Web e funcionalidade de ponta a ponta, √© compactada em um √∫nico arquivo de guerra.  Isso simplifica bastante a instala√ß√£o do projeto, bem como o procedimento de montagem.  Voc√™ n√£o precisa mais compactar o aplicativo em v√°rios n√≠veis hier√°rquicos e descompact√°-lo novamente em uma inst√¢ncia do servidor. <br><br><h4>  Lan√ßamento </h4><br>  O servidor de aplicativos e o pr√≥prio aplicativo s√£o adicionados √† imagem durante o processo de constru√ß√£o.  A configura√ß√£o potencial de fontes de dados, unidades ou m√≥dulos de servidor tamb√©m √© especificada durante o processo de constru√ß√£o, adicionando arquivos de configura√ß√£o especializados.  Todas as diferen√ßas na configura√ß√£o devem ser gerenciadas n√£o de dentro do aplicativo, mas de fora.  Portanto, o aplicativo n√£o deve ser implantado em um cont√™iner j√° em execu√ß√£o, mas deve ser adicionado a ele no est√°gio de montagem da imagem no diret√≥rio de implanta√ß√£o autom√°tica para inici√°-lo quando o cont√™iner for iniciado. <br><br><h4>  Extens√£o de funcionalidade </h4><br>  Cont√™ineres, sistemas de implanta√ß√£o e dimensionamento, servi√ßos de monitoramento e grades de servi√ßo nos deram a oportunidade de configurar a detec√ß√£o, o monitoramento, o gerenciamento, a autentica√ß√£o, o dimensionamento, o rastreamento, a estabilidade no topo do aplicativo, transferindo de forma transparente uma grande quantidade de l√≥gica para outro n√≠vel, facilitando o aplicativo e simplificando seu desenvolvimento. <br><br><h3>  Por que empacotar um servidor de aplicativos em um cont√™iner? </h3><br>  Primeiro, ao empacotar um servidor de aplicativos em um cont√™iner, voc√™ oferece a cada equipe a oportunidade de configurar independentemente seu servidor de aplicativos e se concentrar na implementa√ß√£o de fun√ß√µes, economizando tempo dos desenvolvedores em opera√ß√µes manuais, middleware e v√°rias aprova√ß√µes. <br><br>  Como b√¥nus, voc√™ tem a oportunidade de desfrutar plenamente dos benef√≠cios dos cont√™ineres e de todas as ferramentas criadas em torno deles.  O aplicativo √© f√°cil de gerenciar e dimensionar, atualizar e automatizar a montagem e a implanta√ß√£o de artefatos com tempo de inatividade zero. <br><br><div class="spoiler">  <b class="spoiler_title">Voc√™ encontrar√° mais pr√°tica aqui.</b> <div class="spoiler_text">  Al√©m da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> , o site do projeto possui um grande n√∫mero de tutoriais: como criar aplicativos da web com maven / gradle, empacotar e implantar aplicativos, implantar e configurar microsservi√ßos no kubernetes, gerenciar o tr√°fego com istio e implantar no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IBM Cloud</a> de outros provedores de nuvem populares e muito mais <br><br>  Sebastian Dashner (entusiasta de Java e OSS, Java Champion, IBMer, membro do JCP, colaborador do Jakarta EE) publica artigos √∫teis sobre como usar o OpenLiberty, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">monitorar o Open Liberty com Prometheus e Grafana</a> , em seu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">blog</a> e em seu livro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Architecting Modern Java Aplica√ß√µes EE foram</a> usadas na prepara√ß√£o deste artigo. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Liberty-maven-plugin</a> (alternativa ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gradle</a> ) pode simplificar bastante o seu trabalho.  A prop√≥sito, os manuais t√™m bons exemplos de seu uso. <br><br>  Voc√™ tamb√©m pode contribuir para o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">projeto</a> . <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt464999/">https://habr.com/ru/post/pt464999/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt464989/index.html">Contexto da extravag√¢ncia</a></li>
<li><a href="../pt464991/index.html">Projetos que n√£o decolaram</a></li>
<li><a href="../pt464993/index.html">Construindo um pacote RPM para o Rosa Linux na pr√°tica</a></li>
<li><a href="../pt464995/index.html">Quebrar sequ√™ncias no Swift</a></li>
<li><a href="../pt464997/index.html">Sobre o desenvolvimento de tecnologias de RV: onde elas s√£o usadas, por que os neg√≥cios de RV e quais dispositivos usam</a></li>
<li><a href="../pt465001/index.html">Amazon Prime Day 2019 - tecnologia da AWS</a></li>
<li><a href="../pt465003/index.html">Interesses para o g√™nero ARPG</a></li>
<li><a href="../pt465007/index.html">Digitando Django e DRF</a></li>
<li><a href="../pt465009/index.html">Vis√£o interna: RFID no mundo moderno. Parte 1: RFID em casa</a></li>
<li><a href="../pt465011/index.html">Ratings banc√°rios. A participa√ß√£o n√£o pode ser fixada</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>