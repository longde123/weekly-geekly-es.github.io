<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö´ ‚è∫Ô∏è üëßüèø WebAssembly: quoi et comment üë©üèº‚Äçüé® ü§î ‚õ¥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article est bas√© sur ma pr√©sentation √† la conf√©rence ITSubbotnik, tenue le 2 novembre 2019 √† Moscou. 


 En g√©n√©ral, je suis programmeur backend, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>WebAssembly: quoi et comment</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475778/"><p><img src="https://habrastorage.org/webt/ss/-n/ix/ss-nixhppesfhxvizle2xwcd7sa.png"></p><br><p>  Cet article est bas√© sur ma pr√©sentation √† la conf√©rence ITSubbotnik, tenue le 2 novembre 2019 √† Moscou. </p><br><p> En g√©n√©ral, je suis programmeur backend, mais j'√©tais int√©ress√© par cette technologie, elle me permet d'utiliser mes connaissances backend en front. </p><br><h2 id="problema">  Le probl√®me </h2><br><p>  Commen√ßons par le probl√®me qui est r√©solu par cette technologie (relativement nouvelle).  Ce probl√®me consiste √† <strong>ex√©cuter rapidement du code dans un navigateur</strong> .  Rapide - cela signifie ¬´plus rapide que JavaScript¬ª, id√©alement aussi rapide que le permet notre processeur actuel. <a name="habracut"></a><br>  De plus, historiquement, d'importantes exigences suppl√©mentaires sont progressivement apparues autour de ce probl√®me: </p><br><ul><li>  <strong>Configuration z√©ro</strong> - ce devrait √™tre une solution "pr√™te √† l'emploi", rien qu'un navigateur. </li><li>  <strong>S√ªr</strong> - la nouvelle technologie ne doit pas cr√©er de nouvelles menaces, nous avons d√©j√† quelque chose √† voir avec la s√©curit√©. </li><li>  <strong>Multiplateforme</strong> - les navigateurs fonctionnent sur tous les principaux processeurs, y compris les plates-formes mobiles. </li><li>  <strong>Pratique pour les d√©veloppeurs</strong> - c'est-√†-dire pour nous. </li></ul><br><h2 id="istoriya-do-wasm">  L'histoire avant Wasm </h2><br><p>  Nous avons vu de nombreuses options pour ex√©cuter du code dans un navigateur.  On peut dire qu'il y a des gagnants et des perdants dans ce domaine. </p><br><p><img src="https://habrastorage.org/webt/24/cd/be/24cdbepmn1xputvkq2jbwuz7n64.png"></p><br><p>  Gagnants: Il s'agit d√©finitivement de JavaScript;  le moteur V8 qui a rendu JS si rapide;  ainsi que HTML5. </p><br><p>  Losers: ActiveX - si vous vous souvenez, cette technologie vous a permis de faire n'importe quoi avec la machine en g√©n√©ral, c'est-√†-dire  la s√©curit√© √©tait tr√®s mauvaise;  Flash - nous assistons maintenant √† l'√®re du d√©clin de Flash, bien qu'ActionScript fonctionne √† l'int√©rieur, essentiellement le m√™me JavaScript;  Silverlight - il doit √™tre apparu trop tard pour occuper une niche s√©rieuse. <br>  En cons√©quence, tous les plugins ont √©t√© perdus, notamment en raison de probl√®mes de s√©curit√©. </p><br><p>  Il y a eu d'autres tentatives pour r√©soudre le probl√®me, d√©j√† dans le navigateur: </p><br><ul><li>  NaCl - Native Client propos√© par Google;  code natif directement dans le navigateur, ce qui convient bien s√ªr pour les plates-formes multiples;  Mozilla n'a pas soutenu cette initiative, par cons√©quent, la mise en ≈ìuvre √©tait uniquement dans Chrome. </li><li>  PNaCl - Portable Native Client - un sous-ensemble de LLVM IR a √©t√© utilis√© comme code portable;  √©galement n'√©tait pas pris en charge dans Mozilla, encore une fois seulement Chrome.  En cons√©quence, Google a refus√© de prendre en charge PNaCl en mai 2017. </li></ul><br><h2 id="asmjs">  asm.js </h2><br><p>  <strong>asm.js</strong> est une autre initiative int√©ressante, d√©j√† de la Fondation Mozilla, qui nous rapproche du sujet de WebAssembly.  Il est apparu en 2010 et en 2013, il est devenu accessible au public. </p><br><p>  asm.js est un sous-ensemble de JavaScript, vous pouvez compiler du code √† partir de C et C ++ √† l'aide du compilateur Emscripten. </p><br><p>  Comme il s'agit √©galement de JavaScript, ce code sera ex√©cut√© dans n'importe quel navigateur.  De plus, les principaux navigateurs modernes sont depuis longtemps capables de reconna√Ætre rapidement asm.js et de le compiler efficacement dans le code natif du processeur.  Compar√© au code natif obtenu directement √† partir de C / C ++, le code obtenu √† partir de asm.js est plus lent de 1,5 √† 2 fois (50 √† 67%). </p><br><p><img src="https://habrastorage.org/webt/mk/--/i-/mk--i-r7f1ionj80by3qbies0ks.png"></p><br><p> √Ä gauche se trouve le code de la fonction la plus simple en C / C ++, √† droite, il montre ce qu'il transforme apr√®s compilation en asm.js.  Tout d'abord, nous voyons ici la ligne <code>'use asm'</code> , c'est un marqueur, qui indique clairement que le code pour asm.js va ensuite.  Et dans ce code, nous voyons des constructions de la forme <code>|0</code> , il s'agit d'une op√©ration OR au niveau du bit avec une valeur nulle.  Selon la sp√©cification, le r√©sultat de cette op√©ration est un entier sign√© 32 bits.  Mais ce type n'est m√™me pas en JavaScript.  Cependant, ce type r√©sulte de cette op√©ration, c'est-√†-dire  il s'agit essentiellement d'une conversion vers un type donn√©. </p><br><p>  En g√©n√©ral, asm.js est l'utilisation de notre connaissance de la fa√ßon dont le moteur de navigation compile JS afin d'optimiser ce travail. </p><br><h2 id="chto-zhe-takoe-webassembly">  Qu'est-ce que WebAssembly? </h2><br><p><img src="https://habrastorage.org/webt/h2/f-/be/h2f-beaumjejbndrbscr3e6-n3s.png"></p><br><p>  <strong>WebAssembly</strong> (ou <strong>Wasm</strong> ) est un format binaire ex√©cut√© dans un navigateur, une machine virtuelle et le r√©sultat d'une compilation √† partir d'un langage de haut niveau. </p><br><p>  Wasm n'est pas un langage de programmation, tout comme le bytecode Java n'est pas un langage de programmation, mais un r√©sultat de compilation et un bloc de code en cours d'ex√©cution. </p><br><p>  Quelqu'un de tr√®s intelligent a dit que le nom <strong>d'assemblage Web</strong> (c'est-√†-dire ¬´assembleur pour le Web¬ª) est compl√®tement incorrect, car il ne s'agit pas d'un assembleur (pas d'un langage de programmation) et cela n'a rien √† voir avec le Web (car ce n'est qu'une machine virtuelle). </p><br><p>  Les cr√©ateurs de WebAssembly ont √©t√© guid√©s par les objectifs et limitations suivants - voir la vid√©o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Evolving Wasm en un mauvais nom: Andreas Rossberg</a> . </p><br><p><img src="https://habrastorage.org/webt/hx/qg/xc/hxqgxczg-vl7wds82p5rk9-_lku.png"></p><br><p>  En fait, ils se r√©sument √† trois choses: multiplateforme, compacte, vitesse.  Mais il y avait une autre exigence importante, c'√©tait la ¬´vendabilit√©¬ª - les d√©veloppeurs des principaux navigateurs auraient d√ª prendre et prendre l'initiative.  En cons√©quence, il a √©t√© possible de "vendre", des repr√©sentants de Google, Mozilla, Microsoft et Apple ont particip√© √† l'√©laboration de la sp√©cification. </p><br><p>  Voyons ce qu'est Wasm comme une machine virtuelle. </p><br><p><img src="https://habrastorage.org/webt/tn/yx/7j/tnyx7j12olss0rbvec5stpaajwc.png"></p><br><p>  C'est un tel "processeur fictif", mais sans registres, tout se fait via la pile.  Seulement quatre types de donn√©es: deux entiers, deux flottants.  Ensemble d'op√©rations relativement simple - voir la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sp√©cification</a> et le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tableau interactif</a> . </p><br><p><img src="https://habrastorage.org/webt/ux/ch/dj/uxchdjjzisdir4nnsgrwvo9k70a.png"></p><br><p>  Mod√®le de m√©moire plate: un seul bloc est allou√© pour la m√©moire, dont la taille est un multiple de 64 Ko.  Voici le code, les donn√©es, les constantes, les variables globales, la pile qui grandit, le tas qui grandit.  Vous pouvez augmenter automatiquement le segment de m√©moire si n√©cessaire, tandis que le bloc de m√©moire se d√©veloppe par un multiple de 64 Ko. </p><br><p>  Les pointeurs ne sont pas utilis√©s (cela est fait pour des raisons de s√©curit√©), un index est utilis√© √† la place.  L'index est de 32 bits, il traite donc jusqu'√† 4 Go de m√©moire. </p><br><p>  Toute la m√©moire WebAssembly est enti√®rement accessible √† partir de JavaScript, √† la fois pour la lecture et l'√©criture. </p><br><p><img src="https://habrastorage.org/webt/3f/_x/2e/3f_x2ekh3ggdky_m1ip-8ezhzim.png"></p><br><p>  Jetons un coup d'≈ìil au mod√®le d'ex√©cution WebAssembly.  Wasm est toujours charg√© et appel√© UNIQUEMENT √† partir de JavaScript.  De plus, JS et Wasm fonctionnent dans le m√™me bac √† sable et sont ex√©cut√©s par le m√™me moteur. </p><br><p>  Notez que vous pouvez √©galement appeler JS depuis Wasm.  Il peut s'agir d'un appel de fonction avec passage d'arguments et retour d'une valeur, ou il peut simplement √™tre en train d'ex√©cuter une cha√Æne arbitraire en tant que code JS. </p><br><h2 id="probuem-webassembly">  Essayer WebAssembly </h2><br><p>  Afin de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">commencer</a> avec WebAssembly, je recommande d'utiliser le site Web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WasmFiddle</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WebAssembly Studio</a> - c'est un moyen simple et visuel de comprendre par vous-m√™me ce qu'est vraiment Wasm. </p><br><p><img src="https://habrastorage.org/webt/1q/hz/8z/1qhz8z55kl1qrnkrfsjnbro4hmm.png"></p><br><p>  Ici, le code source en C / C ++ est en haut √† gauche (dans ce cas, la fonction r√©cursive pour calculer le nombre de Fibonacci), en haut √† droite est le code JS pour charger le Wasm, instancier le module Wasm et appeler la fonction <code>fib()</code> depuis celui-ci.  Lorsque nous appuyons sur le bouton Build, nous obtenons un bloc de code Wasm (fichier .wasm), que nous pouvons toujours d√©velopper en une repr√©sentation textuelle (fichier .wat). </p><br><p>  Cette repr√©sentation textuelle avec un ensemble de crochets est essentiellement un arbre de syntaxe abstraite (AST).  Eh bien, en fait avec un crochet, il ressemble au langage Lisp.  En th√©orie, nous pouvons √©diter le code sous forme de repr√©sentation textuelle, puis le r√©duire √† nouveau dans un format binaire - cela rappelle la programmation en langage assembleur.  Mais g√©n√©ralement, nous obtenons du Wasm binaire √† la suite de la compilation √† partir d'un langage de haut niveau. </p><br><h2 id="2017-god-production-ready">  2017: Pr√™t pour la production </h2><br><p>  En novembre 2017, WebAssembly a √©t√© d√©clar√© ¬´pr√™t √† l'emploi en production¬ª.  La sp√©cification pour toutes les parties principales de Wasm a √©t√© pr√©par√©e, l'impl√©mentation de Wasm a √©t√© publi√©e dans tous les principaux navigateurs.  Ainsi, pour WebAssembly, MVP a √©t√© publi√© - Minimum Viable Product, version 1.0, dont nous traitons maintenant. </p><br><h2 id="podderzhka-v-brauzerah">  Prise en charge du navigateur </h2><br><p>  Fin 2017, les versions de tous les principaux navigateurs prenant en charge WebAssembly ont √©t√© publi√©es: </p><br><p><img src="https://habrastorage.org/webt/wf/jv/1v/wfjv1vfutkgfezhoallogkapcaq.png"></p><br><p>  L'exception est IE11, il n'est pas pris en charge et il est probable qu'il dispara√Ætra.  Il a √©t√© suppos√© que pour les navigateurs plus anciens, il y aura un polyfill - la possibilit√© de convertir Wasm en asm.js;  il y a de tels prototypes, mais √† ce que je sache, ces projets sont abandonn√©s, apparemment, la communaut√© n'est pas √† la hauteur. </p><br><p>  D√©sormais, parmi tous les navigateurs install√©s, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">~ 88% prennent en charge Wasm</a> . </p><br><p><img src="https://habrastorage.org/webt/ci/w0/6_/ciw06_js_cfccf9gmcy_o8qo0cw.png"></p><br><h2 id="podderzhka-yazykov">  Prise en charge linguistique </h2><br><p>  Pour que votre langue pr√©f√©r√©e compile dans Wasm, vous avez besoin du compilateur pour fournir cet objectif de compilation.  Maintenant, plusieurs langues prennent en charge Wasm, et il y en a de plus en plus chaque mois.  Voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">appcypher / awesome-wasm-langs</a> . </p><br><ul><li>  C / C ++ - via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Emscripten</a> , tr√®s bon support. </li><li>  Rust - Le support de Wasm est apparu il y a longtemps, l'√©cosyst√®me autour de Wasm est construit en grande partie sur la base de Rust. </li><li>  Java - via TeaVM, JWebAssembly, Bytecoder - √† un niveau exp√©rimental. </li><li>  Kotlin - il y a un support dans Kotlin / Native via le backend LLVM - exp√©rimental. </li><li>  Allez </li><li>  C # - via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Blazor</a> (mono) et √† l'avenir sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Uno Platform</a> . </li><li>  TypeScript - via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AssemblyScript</a> . </li></ul><br><p>  Il n'y a pas si longtemps, il y avait des nouvelles que LLVM supporte maintenant Wasm comme cible de compilation.  Cela permet aux d√©veloppeurs de langages de programmation d'obtenir plus de langages de compilation dans Wasm. </p><br><h2 id="scenarii-ispolzovaniya">  Cas d'utilisation </h2><br><p>  C'est probablement l'une des principales questions - "Comment puis-je utiliser Wasm?" </p><br><p>  WebAssembly utilise d√©j√† activement: </p><br><ul><li>  Jeux, moteurs de jeux, moteurs physiques, VR / AR - par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Godot</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Doom 3</a> </li><li>  √âmulateurs, machines virtuelles - par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DOSBox</a> </li><li>  √âditeurs graphiques / 3D - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Figma</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AutoCAD</a> </li><li>  Clients Web pour les plateformes de trading financier - J'ai vu des pr√©sentations sur deux de ces clients </li><li>  Codecs et filtres audio / vid√©o - par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ffmpeg</a> </li><li>  Bases de donn√©es - par exemple sqlite </li></ul><br><p>  Autres sc√©narios possibles: </p><br><ul><li>  Applications Web progressives (PWA) </li><li>  Reconnaissance par un r√©seau neuronal form√© </li></ul><br><h2 id="proizvoditelnost">  Performances </h2><br><p>  La performance de Wasm √©tait l'un de ses principaux facteurs de vente, mais que se passe-t-il vraiment? </p><br><p>  Par rapport √† JavaScript, il s'av√®re qu'en moyenne, Wasm est plus rapide, mais dans chaque cas particulier, vous devez faire une comparaison JS / Wasm, car il peut s'av√©rer √™tre beaucoup mieux et plusieurs fois pire.  Il peut √©galement d√©pendre fortement du navigateur utilis√©. </p><br><p>  En fait, les performances de pointe de JS et Wasm sont les m√™mes, car les deux finissent par se transformer en code processeur natif.  Mais JS est beaucoup plus facile √† perdre en performances, et Wasm propose une approche plus "uniforme". </p><br><p>  En r√®gle g√©n√©rale, Wasm fonctionne bien en calcul volum√©trique.  L√† o√π il y a beaucoup d'op√©rations de m√©moire, Wasm perd.  Eh bien, le principal probl√®me dans les applications r√©elles est l'interop√©rabilit√© lente de JS &lt;-&gt; Wasm.  Voir par exemple un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">benchmark</a> . </p><br><p><img src="https://habrastorage.org/webt/ii/61/oa/ii61oac4klecbtbae8ydzpymba8.png"></p><br><p>  En juillet 2019, l'article scientifique <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´Pas si vite: analyse des performances de WebAssembly vs.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Code natif</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"</a>  Les auteurs ont mis en ≈ìuvre la possibilit√© d'ex√©cuter des utilitaires de console Linux sous WebAssembly pour ex√©cuter des tests de performance et ont utilis√© des tests de performance SPEC pour √©valuer les performances de Wasm par rapport aux m√™mes tests sur asm.js et le code natif. </p><br><p>  Les r√©sultats sont les suivants: </p><br><ul><li>  Wasm 30% plus rapide que JavaScript (moyenne pour ces tests) </li><li>  Wasm est 50% plus lent que le code natif (en moyenne dans ces tests) </li></ul><br><p>  Les auteurs de l'article ont √©galement analys√© les raisons pour lesquelles Wasm ¬´ralentit¬ª: </p><br><ul><li>  environ deux fois plus d'op√©rations de chargement / sauvegarde de donn√©es par rapport au code natif; </li><li>  plus de branches - caus√©es par la n√©cessit√© de contr√¥les suppl√©mentaires lors de l'acc√®s √† la m√©moire; </li><li>  plus de rat√©s apr√®s le cache L1. </li></ul><br><p>  En g√©n√©ral, en fait, les performances ne sont pas si mauvaises.  De plus, cette analyse permettra aux d√©veloppeurs de navigateurs de rendre Wasm encore plus rapide. </p><br><p>  √Ä l'avenir, Wem acc√©l√©rera non seulement en raison d'une meilleure optimisation des navigateurs, mais √©galement en raison de nouvelles fonctionnalit√©s, telles que: les op√©rations de blocage sur la m√©moire, la prise en charge des instructions SIMD, la prise en charge des threads. </p><br><h2 id="chto-budet-dalshe">  Que se passera-t-il ensuite? </h2><br><p>  Comment se d√©veloppe WebAssembly? </p><br><p>  Premi√®rement, l'√©quipe de sp√©cification de Wasm poursuit son travail.  Les sp√©cifications sont √† diff√©rents stades (phases), il existe une certaine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´feuille de route¬ª pour</a> ce travail. </p><br><p>  En particulier, dans un proche avenir, nous nous attendons √† voir de telles fonctionnalit√©s plus loin: </p><br><ul><li>  <strong>Conversions float-to-int sans recouvrement</strong> - d√©sormais la conversion d'une valeur flottante en un entier dans certaines conditions peut provoquer une exception;  Pour un programmeur, c'est assez inattendu, donc toutes ces conversions doivent √™tre encapsul√©es, ce qui r√©duit les performances √† ce sujet.  Cette fonctionnalit√© r√©sout le probl√®me. </li><li>  <strong>Multi-valeur</strong> - la possibilit√© de renvoyer plus d'une valeur √† partir d'une fonction, la possibilit√© de cr√©er de nouvelles instructions qui renvoient plus d'une valeur - par exemple, le r√©sultat de la division et le reste de la division, ou le r√©sultat de l'addition et du bit de retenue. </li><li>  <strong>Les types de r√©f√©rence</strong> sont une introduction du type anyref, qui signifie ¬´lien vers quelque chose sur le tas JS¬ª, la premi√®re √©tape pour acc√©l√©rer l'interaction avec JS. </li></ul><br><p>  Deuxi√®mement, les d√©veloppeurs de navigateurs mettent en ≈ìuvre ces sp√©cifications, c'est-√†-dire  progressivement de nouvelles fonctionnalit√©s sont ajout√©es √† Wasm, d'abord cach√©es ¬´sous le drapeau¬ª dans les param√®tres, puis activ√©es par d√©faut. </p><br><p>  Par exemple, voici une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">liste des fonctionnalit√©s de Chrome li√©es √† WebAssembly</a> . <br>  Pour Firefox, une liste similaire peut √™tre trouv√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </p><br><h2 id="webassembly-vne-brauzera">  WebAssembly en dehors du navigateur </h2><br><p>  Comme mentionn√© ci-dessus, Wasm n'est essentiellement pas connect√© au Web, c'est juste une machine virtuelle.  Cela signifie qu'il peut √©galement √™tre utilis√© en dehors du Web. </p><br><p>  Il existe maintenant plusieurs sc√©narios d'utilisation de Wasm en dehors du navigateur: </p><br><ul><li>  Node.js - Node.js est bas√© sur le moteur V8 qui prend en charge Wasm. </li><li>  Une application console distincte, le code d'application est ex√©cut√© dans Wasm VM - exemples d'un tel runtime: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">wasmtime</a> , wasmer. </li><li>  Wasm VM est utilis√© comme biblioth√®que √† partir d'autres langues - par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">wasmer vous</a> permet de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vous</a> appeler √† partir d'une douzaine de langues diff√©rentes. </li></ul><br><p>  Pour Wasm travaillant en dehors du navigateur, les restrictions sandbox ne sont plus n√©cessaires, au contraire, l'acc√®s aux fonctions syst√®me est n√©cessaire - le syst√®me de fichiers et les fichiers, les E / S de la console, etc.  Cela a conduit √† la cr√©ation de l'interface syst√®me WebAssembly (WASI), une sp√©cification d'API multiplateforme similaire √† POSIX.  Voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WebAssembly / WASI</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">wasi.dev</a> . </p><br><p><img src="https://habrastorage.org/webt/rw/w9/qz/rww9qzljwdtjnkvolzwjckiik4c.png"></p><br><p>  L'√©tape suivante consistait √† cr√©er un gestionnaire de packages - <strong>Wasm Package Manager</strong> (WAPM) - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">wapm.io.</a>  Ici, vous pouvez prendre le fichier .wasm termin√© et l'utiliser dans votre application.  Habituellement, nous parlons des versions Wasm de certaines biblioth√®ques bien connues.  Certains packages sont √©tiquet√©s avec la balise WASI, ce qui signifie qu'ils ne peuvent √™tre utilis√©s que dans des sc√©narios en dehors du navigateur. </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  Ainsi, WebAssembly est tout √† fait possible √† utiliser, il est ¬´pr√™t pour la production¬ª depuis maintenant deux ans. <br>  L'utilisation de Wasm peut bien donner une acc√©l√©ration par rapport √† un code JavaScript similaire, mais vous devriez toujours v√©rifier si vous obtenez un boost de vitesse. <br>  Le support Wasm des langages de programmation est en constante √©volution. </p><br><p>  Eh bien et surtout, WebAssembly a quelque peu ¬´chang√© le paysage¬ª du Web - nous a fourni de nouveaux sc√©narios d'utilisation que nous pouvons impl√©menter dans nos applications. </p><br><h2 id="ssylki">  Les r√©f√©rences </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">webassembly.org</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/webassembly</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">developer.mozilla.org/en-US/docs/WebAssembly</a> </li></ul><br><p>  Super listes: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mbasso / awesome-wasm</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">appcypher / awesome-wasm-langs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">appcypher / awesome-wasm-runtimes</a> </li></ul><br><p>  Vid√©o: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WebAssembly pour les d√©veloppeurs Web (Google I / O '19)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Qu'est-ce que WebAssembly?</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Par certains de ses cr√©ateurs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Faire √©voluer Wasm en un mauvais nom: Andreas Rossberg</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">C ++ Russia 2018: Pavel Bulatov, transition vers WebAssembly: le jeu en vaut-il la chandelle?</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Andrey Nagikh - D√©veloppement pour WebAssembly: v√©ritable r√¢teau et exemples</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sergey Rubanov - Comprendre l'assemblage Web</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">WebAssembly dans le navigateur et au-del√† par Dan Callahan |</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mozilla Developer Roadshow EU 2019</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr475778/">https://habr.com/ru/post/fr475778/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr475768/index.html">Kotlin: En quoi est-ce un excellent choix pour le d√©veloppement d'applications Android?</a></li>
<li><a href="../fr475770/index.html">Universit√© de Stanford - Visite et examen</a></li>
<li><a href="../fr475772/index.html">6 points d'application pour l'Internet des objets industriel</a></li>
<li><a href="../fr475774/index.html">¬´Ce sont des r√®gles idiotes qui agacent tout le monde¬ª: discussion sur les pratiques de champ de mot de passe</a></li>
<li><a href="../fr475776/index.html">Do-it-yourself stand pour trois guitares</a></li>
<li><a href="../fr475782/index.html">Tests tautologiques, bons et mauvais</a></li>
<li><a href="../fr475784/index.html">Mesurer la qualit√© du code d'application Android avec Sonarqube et Jacoco en 2019</a></li>
<li><a href="../fr475788/index.html">"Apparemment, il y a une grande bataille √† venir." Ce qui attend l'industrie informatique dans un avenir proche</a></li>
<li><a href="../fr475790/index.html">Des startups qui peuvent surprendre</a></li>
<li><a href="../fr475792/index.html">√Ä quelle recherche m√©dicale cette ann√©e m√©rite-t-elle attention?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>