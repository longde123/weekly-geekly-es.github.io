<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≥üèª üë∫ üï¥Ô∏è Rastreamento e monitoramento Istio: microsservi√ßos e o princ√≠pio da incerteza üôá ü§úüèΩ üé≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O princ√≠pio da incerteza de Heisenberg afirma que √© imposs√≠vel medir simultaneamente a posi√ß√£o de um objeto e sua velocidade. Se um objeto se mover, e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rastreamento e monitoramento Istio: microsservi√ßos e o princ√≠pio da incerteza</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/485136/">  O princ√≠pio da incerteza de Heisenberg afirma que √© imposs√≠vel medir simultaneamente a posi√ß√£o de um objeto e sua velocidade.  Se um objeto se mover, ele n√£o ter√° um local.  E se a localiza√ß√£o √©, isso significa que ele n√£o tem velocidade. <br><br><img src="https://habrastorage.org/webt/sl/dx/7l/sldx7l5gkazjrjsrzplh02uzfhk.png" width="100%"><br><br>  Quanto aos microsservi√ßos na plataforma Red Hat OpenShift (e executando o Kubernetes), gra√ßas ao software de c√≥digo aberto correspondente, eles podem relatar simultaneamente seu desempenho e integridade.  Obviamente, isso n√£o refuta o antigo Heisenberg, mas elimina a incerteza ao trabalhar com aplicativos em nuvem.  O Istio facilita a organiza√ß√£o de rastreamento (rastreamento) e monitoramento desses aplicativos para manter tudo sob controle. <br><a name="habracut"></a><br><h3>  Definir terminologia </h3><br>  <b>Rastreando</b> , entendemos a atividade do sistema de registro.  Parece bastante geral, mas na verdade uma das principais regras aqui √© despejar dados de rastreamento no armazenamento apropriado sem se preocupar em format√°-los.  E todo o trabalho de busca e an√°lise de dados √© confiado ao consumidor.  O Istio usa o sistema de rastreamento Jaeger, que implementa o modelo de dados OpenTracing. <br><br>  <b>Por tra√ßos</b> (Tra√ßos, e a palavra "tra√ßos" √© usada aqui no significado de "tra√ßos", como, por exemplo, em um exame bal√≠stico), queremos dizer dados que descrevem completamente a passagem de uma solicita√ß√£o ou unidade de trabalho, como se costuma dizer, "de e para".  Por exemplo, tudo o que acontece desde o momento em que o usu√°rio pressiona um bot√£o em uma p√°gina da Web at√© o momento em que os dados s√£o retornados, incluindo todos os microsservi√ßos envolvidos nisso.  Podemos dizer que um rastreio descreve completamente (ou simula) a passagem da solicita√ß√£o para frente e para tr√°s.  Na interface do Jaeger, as trilhas s√£o decompostas em componentes ao longo do eixo do tempo, como a forma como uma cadeia pode ser decomposta em links separados.  Somente em vez de links, a trilha consiste nos chamados v√£os. <br><br>  <b>Span</b> √© o intervalo desde o in√≠cio de uma unidade de trabalho at√© sua conclus√£o.  Continuando a analogia, podemos dizer que cada per√≠odo √© um elo separado na cadeia.  Um per√≠odo pode ou n√£o ter um ou mais per√≠odos filhos.  Como resultado, o per√≠odo de n√≠vel superior (per√≠odo raiz) ter√° a mesma dura√ß√£o total que o rastreamento ao qual ele pertence. <br><br>  <b>O monitoramento</b> √©, de fato, a pr√≥pria observa√ß√£o do seu sistema - atrav√©s dos olhos, atrav√©s de uma interface do usu√°rio ou por meio de automa√ß√£o.  O monitoramento √© baseado em dados de rastreamento.  No Istio, o monitoramento √© implementado usando as ferramentas do Prometheus e possui uma interface de usu√°rio correspondente.  O Prometheus suporta o monitoramento autom√°tico usando alertas de alertas e gerenciadores de alerta. <br><br><h3>  Deixe os cortes </h3><br>  Para que o rastreamento seja poss√≠vel, o aplicativo deve criar uma cole√ß√£o de extens√µes.  Em seguida, eles devem ser exportados para Jaeger, para que ele, por sua vez, crie uma representa√ß√£o visual do rastreamento.  Entre outras coisas, esses per√≠odos marcam o nome da opera√ß√£o, bem como os registros de data e hora de seu in√≠cio e fim.  Os spans s√£o enviados encaminhando cabe√ßalhos de solicita√ß√£o HTTP espec√≠ficos do Jaeger de solicita√ß√µes recebidas para solicita√ß√µes de sa√≠da.  Dependendo da linguagem de programa√ß√£o usada, isso pode exigir uma pequena modifica√ß√£o no c√≥digo fonte do aplicativo.  A seguir, √© apresentado um exemplo de c√≥digo Java (ao usar a estrutura Spring Boot) que adiciona cabe√ßalhos B3 (estilo Zipkin) √† sua solicita√ß√£o na classe de configura√ß√£o Spring: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9y/mo/yd/9ymoydbpezhtbvshfg2tgpewnk8.png"></div><br>  As seguintes configura√ß√µes de cabe√ßalho s√£o usadas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uy/e-/yg/uye-yg-mezone3fs_1o-vquryvu.png"></div><br>  Se voc√™ usa Java, pode deixar o c√≥digo intocado, basta adicionar algumas linhas ao arquivo POM do Maven e definir vari√°veis ‚Äã‚Äãde ambiente.  Aqui est√£o as linhas que voc√™ precisa adicionar ao arquivo POM.XML para implementar o Jaeger Tracer Resolver: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kr/np/vj/krnpvjjnx-6r-icjjttenmdaq-4.png"></div><br>  E as vari√°veis ‚Äã‚Äãde ambiente correspondentes s√£o definidas no Dockerfile: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b8/2a/lh/b82alhxdifmkgfiv3q3hdq1o05m.png"></div><br>  √â isso, agora est√° tudo configurado e nossos microsservi√ßos come√ßar√£o a gerar dados de rastreamento. <br><br><h3>  N√≥s olhamos em termos gerais </h3><br>  O Istio inclui um painel de controle simples baseado no Grafana.  Quando tudo est√° configurado e em execu√ß√£o na plataforma Red Hat OpenShift PaaS (em nosso exemplo, o Red Hat OpenShift e o Kubernetes s√£o implementados no minishift), esse painel √© iniciado com o seguinte comando: <br><br><pre><code class="plaintext hljs">open "$(minishift openshift service grafana -u)/d/1/istio-dashboard?refresh=5‚©ùId=1"</code> </pre> <br>  O painel Grafana permite avaliar rapidamente o sistema.  Um fragmento deste painel √© mostrado na figura abaixo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zh/jj/lr/zhjjlrilmbtgrdo08lkopbnwh1u.png"></div><br>  Aqui voc√™ pode ver que o cliente de microsservi√ßo chama a prefer√™ncia de microsservi√ßo v1 e, por sua vez, chama a recomenda√ß√£o de microsservi√ßos v1 e v2.  O painel Grafana possui um bloco Dashboard Row para m√©tricas de alto n√≠vel, como o n√∫mero total de solicita√ß√µes (volume global de solicita√ß√µes), porcentagem de solicita√ß√µes bem-sucedidas (taxas de √™xito) e erros 4xx.  Al√©m disso, h√° uma exibi√ß√£o de malha do servidor com gr√°ficos para cada servi√ßo e um bloco de linha de servi√ßos para exibir informa√ß√µes detalhadas de cada cont√™iner para cada servi√ßo. <br><br><h3>  Agora cavar mais fundo </h3><br>  Com um rastreamento configurado corretamente, o Istio, como eles dizem, logo ap√≥s a instala√ß√£o permite que voc√™ mergulhe na an√°lise do desempenho do sistema.  Na interface do usu√°rio do Jaeger, √© poss√≠vel visualizar os rastreamentos e ver at√© que ponto eles s√£o profundos, al√©m de localizar visualmente gargalos de desempenho.  Ao usar o Red Hat OpenShift na plataforma minishift, inicie a Jaeger UI usando o seguinte comando: <br><br><pre> <code class="plaintext hljs">minishift openshift service jaeger-query --in-browser</code> </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lz/8j/x1/lz8jx118ortdebrs6nlmv8-kwws.png"></div><br>  O que pode ser dito sobre o rastreamento nesta tela: <br><br><ul><li>  √â dividido em 7 extens√µes. </li><li>  O tempo total de execu√ß√£o √© 6,99 ms. </li><li>  A recomenda√ß√£o de microsservi√ßo, que √© a √∫ltima da cadeia, leva 0,69 ms. </li></ul><br>  Diagramas desse tipo permitem descobrir rapidamente uma situa√ß√£o em que o desempenho de todo o sistema √© prejudicado devido a um √∫nico servi√ßo com mau funcionamento. <br><br>  Agora vamos complicar a tarefa e ativar duas inst√¢ncias do microsservi√ßo de recomenda√ß√£o: v2 com o comando oc scale --replicas = 2 deployment / recomenda√ß√£o-v2.  Aqui est√£o os pods que teremos depois disso: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ew/ly/tp/ewlytpvsmyay1m7aai46a5xcono.png"></div><br>  Se agora voltarmos para Jaeger e implantarmos a extens√£o do servi√ßo de recomenda√ß√£o, veremos para quais solicita√ß√µes de pod s√£o roteadas.  Assim, podemos localizar facilmente os freios no n√≠vel espec√≠fico do pod.  Voc√™ deve olhar para o campo node_id: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/o6/ag/rj/o6agrj_goch7itiy27nxkpckmxy.png"></div><br><h3>  Onde e como tudo vai </h3><br>  Agora vamos para a interface do Prometheus e esperamos ver que as solicita√ß√µes entre a segunda e a primeira vers√£o do servi√ßo de recomenda√ß√£o s√£o divididas em uma propor√ß√£o de 2: 1, estritamente pelo n√∫mero de pods em funcionamento.  Al√©m disso, este gr√°fico ser√° alterado dinamicamente ao dimensionar os pods para cima e para baixo, o que ser√° especialmente √∫til com o Canary Deployment (examinaremos esse esquema de implanta√ß√£o com mais detalhes na pr√≥xima vez). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ri/vg/ja/rivgjapmewz2mfhfll7bydezpyo.png"></div><br><h3>  √â s√≥ o come√ßo </h3><br>  De fato, hoje, como eles dizem, tocamos apenas um dep√≥sito de informa√ß√µes √∫teis sobre Jaeger, Grafana e Prometeu.  Em geral, esse era o nosso objetivo - gui√°-lo na dire√ß√£o certa e abrir as perspectivas do Istio. <br><br>  E lembre-se, tudo isso j√° est√° embutido no Istio.  Ao usar determinadas linguagens de programa√ß√£o (por exemplo, Java) e estruturas (por exemplo, Spring Boot), tudo isso pode ser realizado sem tocar completamente no pr√≥prio c√≥digo do aplicativo.  Sim, o c√≥digo precisar√° ser ligeiramente modificado se voc√™ usar outros idiomas, principalmente Nodejs ou C #.  Mas como a rastreabilidade (leitura, ‚Äúrastreamento‚Äù) √© um dos pr√©-requisitos para a cria√ß√£o de sistemas em nuvem confi√°veis, em qualquer caso, voc√™ precisar√° editar o c√≥digo, independentemente de possuir ou n√£o o Istio.  Ent√£o, por que n√£o gastar o esfor√ßo com mais lucro? <br><br>  Pelo menos, para sempre responder √†s perguntas ‚Äúonde?‚Äù E ‚Äúcom que rapidez?‚Äù Com 100% de certeza. <br><br><h3>  Engenharia do caos no Istio: foi concebida </h3><br><h3>  A capacidade de quebrar as coisas ajuda a garantir que elas n√£o quebrem </h3><br>  O teste de software n√£o √© apenas uma coisa complicada, mas tamb√©m importante.  Ao mesmo tempo, testar a corre√ß√£o (por exemplo, se uma fun√ß√£o retorna o resultado correto) √© uma coisa, e testar em uma rede n√£o confi√°vel √© uma tarefa completamente diferente (acredita-se frequentemente que a rede sempre funcione sem falhas, e esse √© o primeiro dos oito conceitos err√¥neos sobre distribui√ß√£o computa√ß√£o).  Uma das dificuldades na solu√ß√£o desse problema √© como simular falhas no sistema ou apresent√°-las intencionalmente, executando a chamada inje√ß√£o de falha.  Isso pode ser feito modificando o c√≥digo fonte do pr√≥prio aplicativo.  Mas voc√™ n√£o testar√° seu c√≥digo original, mas sua vers√£o, que simula especificamente falhas.  Como resultado, voc√™ corre o risco de entrar em um abra√ßo fatal da inje√ß√£o de falhas e colidir com os heisenbags - falhas que desaparecem quando voc√™ tenta detect√°-los. <br><br>  E agora mostraremos como o Istio ajuda a lidar com essas dificuldades individualmente. <br><br><h3>  Como fica quando est√° tudo bem </h3><br>  Considere o seguinte cen√°rio: temos dois pods para o nosso microsservi√ßo de recomenda√ß√£o, retirados do tutorial do Istio.  Um pod √© marcado como v1 e o outro como v2.  Como voc√™ pode ver, enquanto tudo funciona bem: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kn/yp/ku/knypkuxns77xf9hyiqtmmnl2qtm.png"></div><br>  (A prop√≥sito, o n√∫mero √† direita √© apenas um contador de chamadas para cada pod) <br><br>  Mas n√£o precisamos disso, n√£o √©?  Bem, vamos tentar quebrar tudo sem tocar no c√≥digo fonte. <br><br><h3>  Organizamos interrup√ß√µes no trabalho do microsservi√ßo </h3><br>  Abaixo est√° o arquivo yaml da regra de roteamento Istio, que pela metade dos casos falhar√° (erro 503 do servidor): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l7/kw/xm/l7kwxmggkngarcusz4sy00epmcc.png"></div><br>  Observe que prescrevemos explicitamente que na metade dos casos o erro 503 deve ser retornado. <br><br>  E aqui est√° uma captura de tela do comando curl lan√ßado no loop depois que ativamos essa regra para simular falhas.  Como voc√™ pode ver, metade das solicita√ß√µes retorna o erro 503 e, independentemente de qual pod - v1 ou v2 - elas acessam: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/t5/-6/62/t5-6620-bhqwlupwj_eevq7ud6s.png"></div><br>  Para restaurar a opera√ß√£o normal, basta remover esta regra; no nosso caso, o comando istioctl delete routerule recommend-503 -n tutorial.  Aqui Tutorial √© o nome do projeto Red Hat OpenShift que executa o tutorial do Istio. <br><br><h3>  Fazendo atrasos artificiais </h3><br>  Os erros artificiais 503 ajudam a testar a toler√¢ncia a falhas do sistema, mas a capacidade de prever e lidar com atrasos deve impression√°-lo ainda mais.  E atrasos na vida real acontecem com mais frequ√™ncia do que falhas.  Um microsservi√ßo de execu√ß√£o lenta √© o veneno de que todo o sistema sofre.  Gra√ßas ao Istio, voc√™ pode testar o c√≥digo relacionado ao atraso no processamento sem alter√°-lo.  Para come√ßar, mostraremos como fazer isso no caso de atrasos de rede introduzidos artificialmente. <br><br>  Observe que, ap√≥s esse teste, voc√™ pode precisar (ou querer) refinar seu c√≥digo.  A boa not√≠cia √© que, neste caso, voc√™ agir√° proativamente, n√£o reativamente.  √â assim que o ciclo de desenvolvimento deve ser constru√≠do: coding-testing-feedback-coding-testing ... <br><br>  √â assim que a regra se parece ... Embora voc√™ saiba o que?  O Istio √© t√£o simples, e esse arquivo yaml √© t√£o claro que tudo neste exemplo fala por si s√≥, basta dar uma olhada: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/au/2p/92/au2p92jsexrmthvsbjmfkbyh05c.png"></div><br>  Na metade dos casos, teremos um atraso de 7 segundos.  E isso n√£o √© o mesmo, como se inser√≠ssemos o comando sleep no c√≥digo-fonte, pois o Istio realmente atrasa a solicita√ß√£o por 7 segundos.  Como o Istio suporta o rastreamento de Jaeger, esse atraso √© excelente na interface do usu√°rio distorcida de Jaeger, como mostra a captura de tela abaixo.  Preste aten√ß√£o √† solicita√ß√£o longa no canto superior direito do diagrama - sua dura√ß√£o √© de 7.02 segundos: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1h/xo/4l/1hxo4lzzbyzue3isyckez6ez4fo.png"></div><br>  Este cen√°rio permite testar o c√≥digo em condi√ß√µes de lat√™ncia da rede.  E √© claro que, ao remover esta regra, removeremos o atraso artificial.  Repetimos, mas novamente fizemos tudo isso sem tocar no c√≥digo fonte. <br><br><h3>  N√£o recue e n√£o desista </h3><br>  Outro recurso do Istio que √© √∫til para a engenharia do caos s√£o as chamadas repetidas para o servi√ßo um n√∫mero especificado de vezes.  O ponto aqui √© n√£o parar de tentar, quando a primeira solicita√ß√£o terminar com o erro 503 - e, talvez, pela d√©cima primeira vez que tivermos sorte.  Talvez o servi√ßo seja suspenso por um curto per√≠odo de tempo por um motivo ou outro.  Sim, esse motivo deve ser desenterrado e eliminado.  Mas isso √© mais tarde, mas por enquanto vamos tentar fazer o sistema continuar funcionando. <br><br>  Portanto, queremos que o servi√ßo cometa um erro 503 de tempos em tempos, e depois disso o Istio tentar√° entrar em contato com ele novamente.  E aqui claramente precisamos de uma maneira de gerar o erro 503, sem tocar no pr√≥prio c√≥digo ... <br><br>  Pare de esperar!  N√≥s apenas fizemos isso. <br><br>  Este arquivo far√° com que o servi√ßo recomenda√ß√£o-v2 gere um erro 503 na metade do caso: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ot/6x/s4/ot6xs4clozb273bdfk32ct1gcvy.png"></div><br>  Obviamente, parte dos pedidos falhar√°: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pu/jd/90/pujd90d9qf7tslucey3184dnvik.png"></div><br>  E agora vamos usar a fun√ß√£o Repetir Istio: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lq/nh/2y/lqnh2yeuargpzyskjb6o9ptsstu.png"></div><br>  Essa regra de roteamento realiza tr√™s tentativas com um intervalo de dois segundos e deve reduzir (e, idealmente, remover completamente do radar) os erros 503: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wp/ed/jy/wpedjyfo8jskkadpnonzppc3wgu.png"></div><br>  Resumimos: fizemos isso para que o Istio, em primeiro lugar, gerasse um erro 503 para metade das solicita√ß√µes.  Al√©m disso, o mesmo Istio faz tr√™s tentativas de reconectar-se ao servi√ßo se ocorrer um erro 503. Como resultado, tudo funciona bem.  Assim, usando a fun√ß√£o Repetir, cumprimos nossa promessa de n√£o desistir e desistir. <br><br>  E sim, fizemos novamente sem tocar no c√≥digo.  Tudo o que precis√°vamos eram duas regras de roteamento do Istio: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/g2/hu/9a/g2hu9aiyuemt8qq7ugn1x14lekq.png"></div><br><h3>  Como n√£o decepcionar um usu√°rio ou sete, n√£o espere </h3><br>  E agora reviramos a situa√ß√£o e consideramos o cen√°rio em que voc√™ n√£o precisa recuar e desistir apenas de um tempo fixo.  E ent√£o voc√™ s√≥ precisa parar de tentar processar a solicita√ß√£o para n√£o for√ßar todo mundo a esperar por um servi√ßo de frenagem.  Em outras palavras, n√£o protegeremos a posi√ß√£o perdida, mas passaremos para a linha de reserva para n√£o decepcionar o usu√°rio do site e n√£o for√ß√°-lo a definhar na ignor√¢ncia. <br><br>  No Istio, voc√™ pode definir o tempo limite da solicita√ß√£o.  Se o servi√ßo exceder esse tempo limite, o erro 504 (Tempo limite do gateway) √© retornado - novamente, tudo isso √© feito atrav√©s da configura√ß√£o do Istio.  Mas teremos que adicionar o comando sleep ao c√≥digo fonte do servi√ßo (e, √© claro, executar a reconstru√ß√£o e a reimplanta√ß√£o) para simular a opera√ß√£o lenta do servi√ßo.  Infelizmente, n√£o funcionar√° de outra maneira. <br><br>  Portanto, inserimos um sono de tr√™s segundos no c√≥digo de servi√ßo da recomenda√ß√£o v2, reconstru√≠mos a imagem correspondente e fizemos um modo de cont√™iner novamente e agora adicionaremos um tempo limite usando a seguinte regra de roteamento do Istio: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6y/5v/z7/6y5vz7wmsbnnvjb-vv5brcsdp5o.png"></div><br>  A captura de tela acima mostra que estamos tentando entrar em contato com o servi√ßo de recomenda√ß√£o se n√£o recebermos uma resposta dentro de um segundo, ou seja, antes da ocorr√™ncia do erro 504. Ap√≥s aplicar esta regra de roteamento (e adicionar um per√≠odo de suspens√£o de tr√™s segundos ao c√≥digo do servi√ßo de recomenda√ß√£o) : v2), obtemos o seguinte: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ok/eq/ii/okeqiihvoiw5hbwur5l4c3ggibe.png"></div><br>  Repetimos novamente, mas o tempo limite pode ser definido sem tocar no c√≥digo fonte.  E o b√¥nus adicional aqui √© que agora voc√™ pode modificar seu c√≥digo para responder a um tempo limite e √© f√°cil testar essas melhorias usando o Istio. <br><br><h3>  E agora todos juntos </h3><br>  Fazer um pouco de caos com o Istio √© uma √≥tima maneira de testar seu c√≥digo e a confiabilidade do seu sistema como um todo.  Padr√µes de fallback, anteparos e disjuntores, mecanismos de falhas e atrasos artificiais e tamb√©m chamadas e tempos limite repetidos ser√£o muito √∫teis ao criar sistemas em nuvem tolerantes a falhas.  Combinadas com o Kubernetes e o Red Hat OpenShift, essas ferramentas ajudam voc√™ a enfrentar o futuro com confian√ßa. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt485136/">https://habr.com/ru/post/pt485136/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt485122/index.html">O cabe√ßalho "Leia artigos para voc√™". Outubro - dezembro de 2019</a></li>
<li><a href="../pt485124/index.html">Testes puros em PHP e PHPUnit</a></li>
<li><a href="../pt485126/index.html">Mu-mu, woof-woof, quack-quack: evolu√ß√£o da comunica√ß√£o ac√∫stica</a></li>
<li><a href="../pt485128/index.html">Economize nas licen√ßas Mikrotik CHR</a></li>
<li><a href="../pt485132/index.html">Participe do Festival de jogos independentes do Google Play</a></li>
<li><a href="../pt485138/index.html">Localiza√ß√£o de aplicativos: como fizemos amigos tradu√ß√£o e desenvolvimento</a></li>
<li><a href="../pt485144/index.html">Como consertei uma base quebrada e o que veio dela</a></li>
<li><a href="../pt485146/index.html">Sal√°rios em TI no segundo semestre de 2019: de acordo com a calculadora Habr Career</a></li>
<li><a href="../pt485148/index.html">Esse ador√°vel Unicode</a></li>
<li><a href="../pt485152/index.html">Est√°gio de primavera para desenvolvedores m√≥veis da Redmadrobot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>