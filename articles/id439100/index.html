<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¼â€ğŸ“ ğŸ‘¨ğŸ¿â€ğŸ’» ğŸ”º Cara mengadaptasi UX / UI di bawah izin ğŸš£ğŸ¾ ğŸº ğŸ‘¸ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Banyak proyek memiliki proses autentikasi (sampai tingkat tertentu). Banyak praktik terbaik telah ditulis dalam semua teknologi yang dikenal, dll. dll...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara mengadaptasi UX / UI di bawah izin</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439100/"><p>  Banyak proyek memiliki proses autentikasi (sampai tingkat tertentu).  Banyak praktik terbaik telah ditulis dalam semua teknologi yang dikenal, dll.  dll. </p><br><p>  Tetapi pengguna membuat login dan?  Toh, dia tidak bisa melakukan semuanya.  Cara menentukan apa yang bisa dia lihat dan apa yang tidak.  Tombol mana yang berhak untuk ditekan, yang dapat mengubah apa yang harus dibuat atau dihapus. </p><br><p>  Pada artikel ini saya ingin mempertimbangkan pendekatan untuk menyelesaikan masalah ini pada aplikasi web. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/5c7/fbf/618/5c7fbf6189a80d53e873ce0138546c1b.gif" alt="gambar"></p><a name="habracut"></a><br><p> Untuk memulainya, otorisasi nyata / efektif hanya dapat terjadi di server.  Di Front End, kami hanya dapat meningkatkan antarmuka pengguna (hmm, bahasa Rusia kuat, tetapi tidak selalu ...), itu juga Pengalaman Pengguna di luar UX.  Kami dapat menyembunyikan tombol di mana pengguna tidak memiliki hak untuk mengklik, atau mencegahnya mengakses halaman, atau menunjukkan pesan bahwa ia tidak memiliki hak untuk tindakan ini atau itu. </p><br><p>  Dan di sini muncul pertanyaan, bagaimana melakukannya seakurat mungkin. </p><br><p>  Mari kita mulai dengan mendefinisikan masalahnya. </p><br><p>  Kami menciptakan Aplikasi Todo dan memiliki berbagai jenis pengguna: </p><br><p>  <b>USER</b> - dapat melihat semua tugas dan mengubahnya (mengatur dan menghapus V), tetapi tidak dapat menghapus atau membuat dan tidak melihat statistik. </p><br><p>  <b>ADMIN</b> - dapat melihat semua tugas dan membuat yang baru, tetapi tidak melihat statistik. </p><br><p>  <b>SUPER_ADMIN</b> - dapat melihat semua tugas, membuat yang baru dan menghapus, juga dapat melihat statistik. </p><br><table><thead><tr><th></th><th>  lihat tugas </th><th>  Buat tugas </th><th>  centang / hapus centang tugas (perbarui) </th><th>  hapus tugas </th><th>  lihat statistik </th></tr></thead><tbody><tr><td>  PENGGUNA </td><td>  V </td><td>  X </td><td>  V </td><td>  X </td><td>  X </td></tr><tr><td>  Admin </td><td>  V </td><td>  V </td><td>  V </td><td>  X </td><td>  X </td></tr><tr><td>  SUPER_ADMIN </td><td>  V </td><td>  V </td><td>  V </td><td>  V </td><td>  V </td></tr></tbody></table><br><p>  Dalam situasi seperti itu, kita dapat dengan mudah bertahan dengan perannya.  Namun, situasinya dapat berubah banyak.  Bayangkan bahwa ada pengguna yang harus memiliki hak yang sama dengan <strong>ADMIN</strong> plus menghapus tugas.  Atau hanya <strong>PENGGUNA</strong> dengan kemampuan untuk melihat statistik. </p><br><p>  Solusi sederhana adalah menciptakan peran baru. <br>  Tetapi pada sistem besar, dengan jumlah pengguna yang relatif besar, kami akan dengan cepat tersesat dalam sejumlah besar peran ... Dan di sini kita mengingat <em>izin</em> "hak pengguna".  Untuk manajemen yang lebih mudah, kami dapat membuat grup dengan beberapa izin dan melampirkannya ke pengguna.  Selalu ada peluang untuk menambahkan izin khusus ke pengguna tertentu. </p><br><p>  Solusi serupa dapat ditemukan di banyak layanan hebat.  AWS, Google Cloud, SalesForce, dll. <br>  Juga, solusi serupa sudah diterapkan di banyak kerangka kerja, misalnya, Django (python). </p><br><p>  Saya ingin memberikan contoh implementasi untuk aplikasi Angular.  (Pada contoh Aplikasi ToDo yang sama). </p><br><p>  Pertama, Anda perlu menentukan semua izin yang mungkin. </p><br><p>  Dibagi menjadi beberapa fitur </p><br><ol><li>  Kami memiliki tugas dan statistik. </li><li>  Kami menentukan tindakan yang mungkin dilakukan untuk masing-masing tindakan tersebut. <br><ul><li>  Tugas: membuat, membaca, memperbarui, menghapus </li><li>  Statistik: baca (dalam contoh kami, hanya lihat) </li></ul></li><li>  Buat peta (MAP) peran dan izin </li></ol><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> permissionsMap = { <span class="hljs-attr"><span class="hljs-attr">todos</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">create</span></span>:<span class="hljs-string"><span class="hljs-string">'*'</span></span>, <span class="hljs-attr"><span class="hljs-attr">read</span></span>:<span class="hljs-string"><span class="hljs-string">'*'</span></span>, <span class="hljs-attr"><span class="hljs-attr">update</span></span>:<span class="hljs-string"><span class="hljs-string">'*'</span></span>, <span class="hljs-attr"><span class="hljs-attr">delete</span></span>:<span class="hljs-string"><span class="hljs-string">'*'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">stats</span></span>:<span class="hljs-string"><span class="hljs-string">'*'</span></span> }</code> </pre> <br><p>  Menurut pendapat saya ini adalah pilihan terbaik, tetapi dalam banyak kasus server akan mengembalikan sesuatu seperti ini: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> permissions = [ <span class="hljs-string"><span class="hljs-string">'todos_create'</span></span>, <span class="hljs-string"><span class="hljs-string">'todos_read'</span></span>, <span class="hljs-string"><span class="hljs-string">'todos_update'</span></span>, <span class="hljs-string"><span class="hljs-string">'todos_delete'</span></span>, <span class="hljs-string"><span class="hljs-string">'stas'</span></span> ]</code> </pre> <br><p>  Kurang mudah dibaca, tetapi juga sangat bagus. </p><br><p>  Seperti inilah tampilan aplikasi kita jika pengguna memiliki semua izin yang memungkinkan. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f90/e2a/bdf/f90e2abdf79074b0d7951b769421cb3d.gif" alt="gambar"></p><br><p>  Mari kita mulai dengan USER, seperti inilah perizinannya: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> USERpermissionsMap = { <span class="hljs-attr"><span class="hljs-attr">todos</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">read</span></span>:<span class="hljs-string"><span class="hljs-string">'*'</span></span>, <span class="hljs-attr"><span class="hljs-attr">update</span></span>:<span class="hljs-string"><span class="hljs-string">'*'</span></span>, } }</code> </pre> <br><p>  1) USER tidak dapat melihat statistik, yaitu, pada prinsipnya, itu tidak dapat pergi ke halaman statistik. </p><br><p>  Untuk situasi seperti itu, Angular memiliki Pengawal, yang terdaftar di tingkat Rute ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> ). </p><br><p>  Dalam kasus kami, tampilannya seperti ini: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> routes: Routes = [ <span class="hljs-comment"><span class="hljs-comment">// {...Other routes}, { path: 'stats', component: TodoStatisticsComponent, canActivate: [ PermissionsGuardService ], data: { permission: 'stats' }, } ];</span></span></code> </pre> <br><p>  Anda harus memperhatikan objek dalam data. </p><br><p>  peremissions = 'stats', ini adalah izin yang harus dimiliki pengguna untuk memiliki akses ke halaman ini. </p><br><p>  Berdasarkan pada data.permissions yang diperlukan dan izin yang diberikan oleh server PermissionsGuardService, ia akan memutuskan apakah akan membiarkan USER membuka laman '/ stats'. </p><br><pre> <code class="javascript hljs">@Injectable({ <span class="hljs-attr"><span class="hljs-attr">providedIn</span></span>: <span class="hljs-string"><span class="hljs-string">'root'</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PermissionsGuardService</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CanActivate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>( private store: Store&lt;any&gt;) { } canActivate(route: ActivatedRouteSnapshot, <span class="hljs-attr"><span class="hljs-attr">state</span></span>: RouterStateSnapshot): Observable&lt;boolean&gt; | boolean { <span class="hljs-comment"><span class="hljs-comment">// Required permission to continue navigation const required = route.data.permission; // User permissions that we got from server const userPerms = this.getPermissions(); // verification const isPermitted = checkPermissions(required, userPerms); if (!isPermitted) { alert('ROUTE GUARD SAYS: \n You don\'t have permissions to see this page'); } return isPermitted; } getPermissions() { return localStorage.get('userPermissions') } }</span></span></code> </pre> <br><p>  Fungsi ini berisi logika keputusan - apakah ada izin yang tidak tergantikan (wajib) ada di antara semua izin PENGGUNA (userPerms). </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkPermissions</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">required: string, userPerms</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// 1) Separate feature and action const [feature, action] = required.split('_'); // 2) Check if user have any type of access to the feature if (!userPerms.hasOwnProperty(feature)) { return false; } // 3) Check if user have permission for required action if (!userPerms[feature].hasOwnProperty(action)) { return false; } return true; }</span></span></code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/38f/a3c/7ea/38fa3c7ea79c42b5c245c347223be1f7.gif" alt="gambar"></p><br><p>  Dan begitulah.  USER kami tidak dapat membuka halaman statistik.  Namun, ia masih dapat membuat tugas dan menghapusnya. </p><br><p>  Agar USER tidak dapat menghapus tugas, itu akan cukup untuk menghapus merah (X) dari baris tugas. <br>  Untuk tujuan ini kita akan menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Petunjuk Struktural</a> . </p><br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- Similar to other Structural Directives in angular (*ngIF, *ngFor..) we have '*' in directive name Input for directive is a required permission to see this btn. --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">appPermissions</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'todos_delete'"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"delete-button"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"removeSingleTodo()"</span></span></span><span class="hljs-tag">&gt;</span></span> X <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="javascript hljs">@Directive({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'[appPermissions]'</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PermissionsDirective</span></span></span><span class="hljs-class"> </span></span>{ private _required: string; private _viewRef: EmbeddedViewRef&lt;any&gt; | <span class="hljs-literal"><span class="hljs-literal">null</span></span> = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; private _templateRef: TemplateRef&lt;any&gt; | <span class="hljs-literal"><span class="hljs-literal">null</span></span> = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; @Input() set appPermissions(permission: string) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._required = permission; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._viewRef = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.init(); } <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(private templateRef: TemplateRef&lt;any&gt;, private viewContainerRef: ViewContainerRef) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._templateRef = templateRef; } init() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isPermitted = checkPermissions(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._required, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getPermissions()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isPermitted) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._viewRef = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.viewContainerRef.createEmbeddedView(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.templateRef); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'PERMISSIONS DIRECTIVE says \n You don\'t have permissions to see it'</span></span>); } } getPermissions() { localStorage.get(<span class="hljs-string"><span class="hljs-string">'userPermissions'</span></span>) } }</code> </pre> <br><p><img src="https://habrastorage.org/getpro/habr/post_images/50b/11c/e52/50b11ce5206ba632dbc272f8c5a7ca0b.gif" alt="gambar"></p><br><p>  Sekarang USER tidak melihat tombol DELETE tetapi masih bisa menambahkan tugas baru. </p><br><p>  Untuk menghapus bidang input - akan merusak semua jenis aplikasi kita.  Solusi yang benar dalam situasi ini adalah <code>disable</code> bidang input. </p><br><p>  Kami akan menggunakan pipa. </p><br><pre> <code class="javascript hljs">&lt;!-- <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> a value <span class="hljs-string"><span class="hljs-string">`permissions`</span></span> pipe will get required permissions <span class="hljs-string"><span class="hljs-string">`permissions`</span></span> pipe <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> or <span class="hljs-literal"><span class="hljs-literal">false</span></span>, that<span class="hljs-string"><span class="hljs-string">'s why we have !('</span></span>todos_create<span class="hljs-string"><span class="hljs-string">' | permissions) to set disable=true if pipe returns false --&gt; &lt;input class="centered-block" [disabled]="!('</span></span>todos_create<span class="hljs-string"><span class="hljs-string">' | permissions)" placeholder="What needs to be done?" autofocus/&gt;</span></span></code> </pre> <br><pre> <code class="javascript hljs">@Pipe({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'permissions'</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PermissionsPipe</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PipeTransform</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(private store: Store&lt;any&gt;) { } transform(required: any, args?: any): any { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isPermitted = checkPermissions(required, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getPermissions()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isPermitted) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'[PERMISSIONS PIPE] You don\'t have permissions'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } getPermissions() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> localStorage.get(<span class="hljs-string"><span class="hljs-string">'userPermissions'</span></span>) } }</code> </pre> <br><p>  Dan sekarang USER hanya bisa melihat tugas dan mengubahnya (V / X).  Namun, kami masih memiliki satu tombol lagi yang disebut 'Hapus selesai'. </p><br><p>  Misalkan kita memiliki persyaratan Manajer Produk berikut: </p><br><ol><li>  Tombol 'Clear Completed' harus terlihat oleh semua orang dan selalu. </li><li>  Itu juga harus bisa diklik. </li><li>  Jika USER tanpa izin yang sesuai menekan tombol, sebuah pesan akan muncul. </li></ol><br><p>  Arahan konstruksi tidak akan membantu kita, juga pipa. <br>  Juga sangat tidak nyaman untuk menulis izin yang memeriksa fungsi komponen. </p><br><p>  Yang kita butuhkan adalah melakukan pemeriksaan izin antara klik dan eksekusi fungsi terikat. </p><br><p>  Menurut pendapat saya, layak menggunakan dekorator. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Permissions</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">required</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">classProto, propertyKey, descriptor</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> originalFunction = descriptor.value; descriptor.value = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...args: any[]</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> userPerms = localStorage.get(<span class="hljs-string"><span class="hljs-string">'userPermissions'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isPermitted = checkPermissions(required, userPerms); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isPermitted) { originalFunction.apply(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, args); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { alert(<span class="hljs-string"><span class="hljs-string">'you have no permissions \n [PERMISSIONS DECORATOR]'</span></span>); } }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> descriptor; }; }</code> </pre> <br><pre> <code class="javascript hljs">@Component({ <span class="hljs-attr"><span class="hljs-attr">selector</span></span>: <span class="hljs-string"><span class="hljs-string">'app-actions'</span></span>, <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'./actions.component.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">styleUrls</span></span>: [<span class="hljs-string"><span class="hljs-string">'./actions.component.css'</span></span>] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActionsComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ @Output() deleteCompleted = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EventEmitter(); <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { } @Permissions(<span class="hljs-string"><span class="hljs-string">'todos_delete'</span></span>) public deleteCompleted() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.deleteCompleted.emit(); } }</code> </pre> <br><p>  Pembicara berhak mendapatkan artikel terpisah. </p><br><p>  Hasil akhir kami: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f90/e2a/bdf/f90e2abdf79074b0d7951b769421cb3d.gif" alt="gambar"></p><br><p>  Hasilnya: </p><br><p>  Pendekatan ini memungkinkan kami untuk dengan mudah dan dinamis menyesuaikan UX kami sesuai dengan izin yang dimiliki pengguna. </p><br><p>  Dan yang paling penting, untuk ini kita tidak perlu mendorong layanan ke semua komponen atau palu di templat '* ngIf'. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Seluruh aplikasi selesai</a> . </p><br><p>  Saya akan senang berkomentar. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id439100/">https://habr.com/ru/post/id439100/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id439086/index.html">Penyebab PPA dan cara menghindarinya</a></li>
<li><a href="../id439090/index.html">IBM 5150. Di mana monopoli dimulai</a></li>
<li><a href="../id439094/index.html">Para ilmuwan telah menemukan vertebrata tertua yang masih hidup di Bumi</a></li>
<li><a href="../id439096/index.html">Buildbot: kisah dengan contoh-contoh sistem integrasi berkelanjutan lainnya</a></li>
<li><a href="../id439098/index.html">Sasha Memus, Chatfuel: Bagaimana membangun karier dalam produk setelah berkonsultasi, apakah berbahaya untuk bermeditasi dan bagaimana mengubah perilaku</a></li>
<li><a href="../id439102/index.html">Rusia 20% lebih mungkin mengalami penghinaan di Internet</a></li>
<li><a href="../id439104/index.html">Redux Sederhana seperti garu</a></li>
<li><a href="../id439108/index.html">Pengukuran radio amatir: ketika tidak ada pengukur frekuensi</a></li>
<li><a href="../id439110/index.html">Videogame monster: cara menabur ketakutan</a></li>
<li><a href="../id439112/index.html">Pencipta Kate Mobile ditangkap karena pedofil menggunakan layanannya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>