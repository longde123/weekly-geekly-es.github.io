<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÉ üë©üèæ‚Äçüåæ üí∫ Wie kann man schnell interessante Warnungen des PVS-Studio-Analysators f√ºr C- und C ++ - Code √ºberpr√ºfen? üò° üåí üëäüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hin und wieder fragen mich Programmierer, die sich mit dem PVS-Studio Code Analyzer vertraut machen: "Gibt es eine Liste von Warnungen, die Fehler gen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie kann man schnell interessante Warnungen des PVS-Studio-Analysators f√ºr C- und C ++ - Code √ºberpr√ºfen?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/457330/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df3/c29/8f2/df3c298f21cb71d0c7c699b7e27269d3.png"></div><br>  Hin und wieder fragen mich Programmierer, die sich mit dem PVS-Studio Code Analyzer vertraut machen: "Gibt es eine Liste von Warnungen, die Fehler genau anzeigen?"  Es gibt keine solche Liste, da uninteressante (falsche) Warnungen in einem Projekt in einem anderen sehr wichtig und n√ºtzlich sind.  Aus den aufregendsten Warnungen kann man jedoch definitiv anfangen, in den Analysator zu graben.  Schauen wir uns dieses Thema genauer an. <br><a name="habracut"></a><br>  Das Problem ist in der Regel, dass ein Programmierer zun√§chst in einer Vielzahl von Warnungen ertrinkt, die er erh√§lt.  Nat√ºrlich m√∂chte er die interessantesten Warnungen √ºberpr√ºfen, um zu verstehen, ob er seine Zeit damit verbringen sollte, all dies zu kl√§ren.  Gut, hier sind drei einfache Schritte, mit denen er die aufregendsten Warnungen √ºberpr√ºfen kann. <br><br><h2>  Schritt 1 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/648/436/d98/648436d98521380495f1c9f8ee384646.png"></div><br><br>  Deaktivieren Sie alle Arten von Warnungen mit Ausnahme der allgemeinen (GA).  Ein h√§ufiger Fehler besteht darin, alle Arten von Warnungen zu aktivieren.  Unerfahrene Benutzer denken, je mehr zu aktivieren, desto besser.  Das ist nicht der Fall.  Es gibt Diagnoses√§tze wie 64-Bit-Pr√ºfungen und MISRA-Regeln, die nur verwendet werden sollten, wenn man genau wei√ü, was sie sind und wie man mit ihnen arbeitet.  Wenn Sie beispielsweise die MISRA-Diagnose f√ºr ein gew√∂hnliches Anwendungsprogramm aktivieren, ertrinken Sie in Zehntausenden oder Hunderttausenden von Warnungen, wie z. <ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V2506</a> .  Misra.  Eine Funktion sollte am Ende einen einzigen Austrittspunkt haben. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V2507</a> .  Misra.  Der Hauptteil einer Anweisung loop \ conditional sollte in geschweiften Klammern stehen. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V2523</a> .  Misra.  Alle Ganzzahlkonstanten vom Typ ohne Vorzeichen sollten das Suffix 'u' oder 'U' haben. </li></ul><br>  Die meisten MISRA-Warnungen weisen nicht auf Fehler hin, sondern auf Codeger√ºche.  Nat√ºrlich beginnt ein Programmierer, Fragen zu stellen.  Wie finden Sie etwas Interessantes im Stapel all dieser Warnungen?  Welche Zahlen sollte er sehen?  Das sind die falschen Fragen.  Sie m√ºssen nur das MISRA-Set deaktivieren.  Dies ist der Standard zum Schreiben von Qualit√§tscode f√ºr eingebettete Ger√§te.  Der Zweck des Standards besteht darin, den Code √§u√üerst einfach und verst√§ndlich zu machen.  Versuchen Sie nicht, es dort anzuwenden, wo es unangemessen ist. <br><br>  Hinweis  Ja, MISRA hat Regeln, mit denen echte Fehler identifiziert werden k√∂nnen.  Beispiel: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V2538</a> - Der Wert der nicht initialisierten Variablen sollte nicht verwendet werden.  Aber haben Sie keine Angst, den MISRA-Standard zu deaktivieren.  Du wirst nichts verlieren.  Die tats√§chlichen Fehler werden weiterhin im Rahmen der Allgemeinen Diagnose (GA) gefunden.  Beispielsweise wird eine nicht initialisierte Variable von der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V614-</a> Diagnose gefunden. <br><br><h2>  Schritt 2 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f30/9c1/d2f/f309c1d2fed7a2736170dad987cd4460.png"></div><br><br>  Jeder statische Analysator gibt bei den ersten L√§ufen Fehlalarme aus und erfordert einige Konfigurationen.  Es kann nichts dagegen unternommen werden, aber es ist nicht so be√§ngstigend, wie es scheinen mag.  Selbst eine einfache Schnelleinstellung erm√∂glicht es Ihnen, die meisten Fehlalarme zu entfernen und einen recht relevanten Bericht anzuzeigen.  Ich werde nicht mehr dar√ºber sprechen, wie ich zum Beispiel in diesem Artikel oft dar√ºber geschrieben habe: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eigenschaften von PVS-Studio Analyzer am Beispiel von EFL-Kernbibliotheken, 10-15% der falsch positiven Ergebnisse</a> ". <br><br>  Verbringen Sie ein wenig Zeit damit, offensichtlich irrelevante Warnungen zu deaktivieren und gegen falsch positive Ergebnisse im Zusammenhang mit Makros zu k√§mpfen.  Im Allgemeinen sind Makros der Hauptgrund f√ºr Fehlalarme, da in allen F√§llen eine Warnung angezeigt wird, wenn ein schlecht implementiertes Makro verwendet wird.  Um Warnungen in Makros zu unterdr√ºcken, k√∂nnen Sie Kommentare eines bestimmten Typs neben deren Deklaration schreiben.  Das Format f√ºr mehr Kommentare wird in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation behandelt</a> . <br><br>  Ja, die anf√§ngliche Einstellung dauert etwas, verbessert jedoch die Wahrnehmung des Berichts drastisch, indem das st√∂rende Rauschen beseitigt wird.  Nehmen Sie sich etwas Zeit daf√ºr.  Bei Schwierigkeiten oder Fragen stehen wir Ihnen jederzeit mit Rat und Tat zur Verf√ºgung, um den Analysator optimal einzurichten.  F√ºhlen Sie sich frei zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">schreiben</a> und uns Fragen zu stellen. <br><br><h2>  Schritt 3 </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f87/0ec/c49/f870ecc49989743ae8caea3c745e602e.png"></div><br><br>  Beginnen Sie mit der Anzeige von Warnungen ab Stufe 1. Erst nachdem Sie 2 und 3 gesehen haben. Warnstufen sind nichts anderes als die Richtigkeit einer Warnung.  Warnungen der Stufe 1 weisen eher auf einen tats√§chlichen Fehler hin als Warnungen der Stufe 2. <br><br>  Sie k√∂nnen sagen, wenn Sie "Level 1 ansehen" w√§hlen, dr√ºcken Sie die Schaltfl√§che "Die interessantesten Fehler beobachten". <br><br>  Ausf√ºhrlicher wird die Klassifizierung von PVS-Studio-Warnungen nach Ebenen im Artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie statische Analyseger√§te gegen falsch positive Ergebnisse k√§mpfen und warum sie dies tun</a> " beschrieben. <br><br><h2>  Warum gibt es keine Liste? </h2><br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df2/95f/70b/df295f70b19562c12916ec578022829f.png"></div><br><br>  Die Idee, eine Liste der n√ºtzlichsten Warnungen zu haben, mag jedoch immer noch vern√ºnftig erscheinen.  Lassen Sie mich Ihnen an einem praktischen Beispiel zeigen, dass der Nutzen einer Diagnose relativ ist und vom Projekt abh√§ngt. <br><br>  Betrachten wir die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V550-</a> Warnung.  Die Warnung erkennt einen m√∂glichen Fehler, der damit zusammenh√§ngt, dass zum Vergleichen von Zahlen mit einem Gleitkomma die Operatoren == oder! = Verwendet werden. <br><br>  Die meisten Entwickler, mit denen ich gesprochen habe, halten diese Diagnose f√ºr nutzlos und deaktivieren sie, da alle Ausl√∂ser f√ºr ihr Projekt falsch sind.  Aus diesem Grund weist diese Diagnose ein geringes Ma√ü an Sicherheit auf und bezieht sich auf Stufe 3. <br><br>  In der Tat werden in den meisten Anwendungen Float / Double-Typen in sehr einfachen Algorithmen verwendet.  Oft wird der Vergleich mit der Konstante nur verwendet, um zu √ºberpr√ºfen, ob ein bestimmter Wert standardm√§√üig festgelegt ist oder ob er sich ge√§ndert hat.  In diesem Fall ist die genaue Pr√ºfung durchaus angebracht.  Ich werde es mit Pseudocode erkl√§ren. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> value = <span class="hljs-number"><span class="hljs-number">1.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsUserInputNewValue()) value = GetUserValue(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value == <span class="hljs-number"><span class="hljs-number">1.0f</span></span>) DefaultBehavior(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Foo(value);</code> </pre> <br>  Hier ist der Vergleich <i>(Wert von 1.0f)</i> korrekt und sicher. <br><br>  Bedeutet dies, dass die V550-Diagnose uninteressant ist?  Nein, nein.  Es h√§ngt alles vom Projekt ab.  Lassen Sie mich einen Ausschnitt aus dem von unserem Benutzer verfassten Artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie wir die statische Analyse in unserem Trainingssimulatorprojekt f√ºr endovaskul√§re R√∂ntgenchirurgie versucht haben</a> " zitieren. <br><br>  Worauf unser statischer Analysator hier achtet: <br><br>  V550 Ein ungerader genauer Vergleich: t! = 0. Es ist wahrscheinlich besser, einen Vergleich mit definierter Genauigkeit zu verwenden: fabs (A - B)&gt; Epsilon.  objectextractpart.cpp 3401 <br><br><pre> <code class="cpp hljs">D3DXVECTOR3 N = VectorMultiplication( VectorMultiplication(V-VP, VN), VN); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t = Qsqrt(Scalar(N, N)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t!=<span class="hljs-number"><span class="hljs-number">0</span></span>) { N/=t; V = V - N * DistPointToSurface(V, VP, N); }</code> </pre> <br>  Fehler dieser Art wiederholen sich in dieser Bibliothek h√§ufig.  Ich kann nicht sagen, dass es mich √ºberrascht hat.  Zuvor habe ich in diesem Projekt einen falschen Umgang mit Zahlen mit einem Gleitkomma festgestellt.  Es gab jedoch keine Ressourcen, um die Quellen systematisch zu √ºberpr√ºfen.  Als Ergebnis der √úberpr√ºfung wurde klar, dass es notwendig war, dem Entwickler etwas zu geben, um seinen Horizont in Bezug auf die Arbeit mit Gleitkommazahlen zu erweitern.  Er wurde mit ein paar guten Artikeln verlinkt.  Wir werden sehen, wie sich die Dinge entwickeln.  Es ist schwer sicher zu sagen, ob dieser Fehler echte Programmst√∂rungen verursacht.  Die aktuelle L√∂sung stellt eine Reihe von Anforderungen an das urspr√ºngliche polygonale Netz von Arterien, das die Ausbreitung von R√∂ntgenkontrastmaterial simuliert.  Wenn die Anforderungen nicht erf√ºllt sind, kann das Programm fallen oder die Arbeit ist eindeutig falsch.  Einige dieser Anforderungen werden analytisch und andere empirisch ermittelt.  Es ist m√∂glich, dass diese empirische Reihe von Anforderungen nur aufgrund der falschen Behandlung von Zahlen mit einem Gleitkomma w√§chst.  Es ist zu beachten, dass nicht alle gefundenen F√§lle eines pr√§zisen Vergleichs von Zahlen mit einem Gleitkomma ein Fehler waren. <br><br>  Wie Sie sehen, ist das, was bei einigen Projekten nicht interessant ist, f√ºr andere von Interesse.  Dies macht es unm√∂glich, eine Liste der "interessantesten" zu erstellen. <br><br>  Hinweis  Sie k√∂nnen die Warnstufe auch mithilfe der Einstellungen festlegen.  Wenn Sie beispielsweise der Meinung sind, dass die V550-Diagnose besondere Aufmerksamkeit verdient, k√∂nnen Sie sie von Stufe 3 auf Stufe 1 verschieben.  Diese Art von Einstellungen wird in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation beschrieben</a> (siehe "So stellen Sie Ihren Pegel f√ºr bestimmte Diagnosen ein"). <br><br><h2>  Fazit </h2><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37d/d9e/ecd/37dd9eecd44e33d66c2993ad552e11f7.png"></div><br>  Jetzt wissen Sie, wie Sie mit dem Studium der Warnungen des Analysators beginnen k√∂nnen, indem Sie sich die interessantesten ansehen.  Vergessen Sie nicht, in die Dokumentation zu schauen, um eine detaillierte Beschreibung der Warnungen zu erhalten.  Manchmal kommt es vor, dass hinter einem unscheinbaren auf den ersten Blick Warnung die H√∂lle steckt.  Ein Beispiel f√ºr eine solche Diagnose: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V597</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V1026</a> .  Vielen Dank f√ºr Ihre Aufmerksamkeit. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de457330/">https://habr.com/ru/post/de457330/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de457312/index.html">Einf√ºhrung in die Mengenlehre</a></li>
<li><a href="../de457316/index.html">Wie das Rollenspiel in der realen Welt f√ºr G√§ste Armeniens mit Reisen durch die H√§lfte des Landes arrangiert wird</a></li>
<li><a href="../de457324/index.html">Digitale Veranstaltungen in Moskau vom 24. bis 30. Juni</a></li>
<li><a href="../de457326/index.html">Failover-Cluster PostgreSQL + Patroni. Implementierungserfahrung</a></li>
<li><a href="../de457328/index.html">Kategorien anstelle von Verzeichnissen oder das semantische Dateisystem f√ºr Linux</a></li>
<li><a href="../de457332/index.html">Wie kann man schnell interessante Warnungen sehen, die vom PVS-Studio Analyzer f√ºr C- und C ++ - Code generiert wurden?</a></li>
<li><a href="../de457334/index.html">TacacsGUI, Konfigurationsmanager</a></li>
<li><a href="../de457336/index.html">Die Folgen einer vorzeitigen Entfernung von Weisheitsz√§hnen</a></li>
<li><a href="../de457338/index.html">Blitz mit Ilya Krasinsky: Wie man schlechte Hypothesen aufstellt, warum ein Produkt ablehnt und wie man mit einem Minimum an Action w√§chst?</a></li>
<li><a href="../de457340/index.html">10 PostCSS-Plugins, die Ihre Layoutzeit sparen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>