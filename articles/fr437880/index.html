<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîñ ‚úåüèø üåÑ Jeu de Blockchain VR utilisant le jeton ERC-1155: React 360 ou Unity? üíÜ üëåüèº ‚õ¥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les jeux VR ont toujours √©t√© une admiration pour nous. C'est une sorte de magie dans une coque num√©rique, le plein effet de l'immersion dans un autre ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jeu de Blockchain VR utilisant le jeton ERC-1155: React 360 ou Unity?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437880/"><p> Les jeux VR ont toujours √©t√© une admiration pour nous.  C'est une sorte de magie dans une coque num√©rique, le plein effet de l'immersion dans un autre monde.  √Ä toutes les conf√©rences, les projets VR re√ßoivent le plus d'attention, des stands √† grande √©chelle, des centaines de spectateurs faisant la queue pour plonger dans un univers fra√Æchement cr√©√©.  √âtant donn√© que notre entreprise ne concerne pas principalement le divertissement, mais plut√¥t l'√©volution et les approches progressives, nous avons examin√© en d√©tail la question de savoir comment la blockchain peut √™tre utile dans un genre de d√©veloppement de jeu aussi jeune que la r√©alit√© virtuelle. </p><br><p>  La r√©ponse est venue tout de suite: des contrats intelligents et la derni√®re norme de jeton de r√©seau Ethereum ERC1155, con√ßue sp√©cifiquement pour cr√©er des ressources de jeu / num√©riques.  ERC1155 est un jeton qui combine les meilleures fonctionnalit√©s des populaires ERC20 et ERC721 (les d√©tails techniques peuvent √™tre trouv√©s dans le <a href="">fichier Lisez-moi du r√©f√©rentiel github</a> ).  Imaginez une situation classique - vous avez √©limin√© un objet ou un skin rare et cher.  Comment le vendre pour que vous ne soyez pas tromp√© par l'acheteur ou que vous-m√™me n'ayez pas pu prendre librement l'argent des autres sans donner l'objet?  La bonne r√©ponse est des contrats intelligents.  Et le jeton ERC1155 est exactement ce dont vous avez besoin pour impl√©menter une telle fonctionnalit√©.  Un article peut avoir ses propres caract√©ristiques - sous la forme de r√©sistance, de d√©g√¢ts, de durabilit√©, de protection, de dommages suppl√©mentaires (caract√©ristique du jeton ERC721) et de sa valeur (caract√©ristique du jeton ERC20) dans une seule coque - cela ne semble-t-il pas inspirant?  Tous les jeux peuvent devenir s√ªrs et faciles √† stocker, transf√©rer et vendre leurs actifs num√©riques.  Essayons de r√©soudre ce probl√®me en utilisant l'exemple d'un jouet que nous avons con√ßu. </p><br><p>  Nous avons trouv√© le concept assez rapidement - un analogue du jeu de cartes populaire ¬´Munchkin¬ª, transf√©r√© dans l'univers VR, avec des contrats intelligents pour √©changer tous les objets, armures et armes qui ont √©t√© √©limin√©s pendant le jeu.  Le choix de la technologie d'impl√©mentation pour nos d√©veloppeurs ind√©pendants n'a pas √©t√© facile, mais nous voulons vous en dire plus sur cette exp√©rience. </p><a name="habracut"></a><br><p>  <b>React 360</b> </p><br><p>  √âtant donn√© que la plupart de l'√©quipe avait une vaste exp√©rience de d√©veloppement sur React, il y avait un d√©sir d'essayer React-360 pour r√©soudre la t√¢che.  La description de l'outil semblait assez fonctionnelle, nous avons donc fait un choix dans sa direction. </p><br><p>  <b>Installation et description</b> </p><br><p>  L'installation de React-360 commence par l'installation de sa CLI avec npm, qui vous aide √† initialiser, d√©marrer et cr√©er rapidement et facilement un projet √† partir de la ligne de commande. </p><br><p>  Apr√®s l'initialisation du projet, nous avons re√ßu un mod√®le de projet pr√™t √† l'emploi dans lequel les deux fichiers principaux sont client.js et index.js, ainsi que le dossier static_assets, o√π tous les fichiers aset pour le rendu, index.html et d'autres fichiers de configuration sont stock√©s. </p><br><p>  <b>Rendu</b> </p><br><p>  Le premier fichier (client.js) contient le code de rendu et fonctionne avec la classe React360 principale.  React360 a deux types d'objets de rendu: renderToLocation, qui est responsable du rendu d'un objet 3D, et renderToSurface, qui est responsable du rendu d'un objet 2D.  Nous avons √©galement d√©fini un contr√¥leur pour la cam√©ra, qui d√©crit son comportement: dans notre cas, le mouvement de la cam√©ra (en tant que personnage principal) en appuyant sur certains boutons du clavier est d√©crit.  Ensuite, nous avons d√©fini l'arri√®re-plan par d√©faut pour l'ensemble du projet et dans la derni√®re ligne, nous avons √©crit React360 dans l'objet fen√™tre (qui est un objet global pour les applications de navigateur). </p><br><p><img src="https://habrastorage.org/webt/9o/f_/1_/9of_1_t50ihyw89xz7h2ukfemb0.png" alt="image"></p><br><p>  Par la suite, la m√©thode init de React360 est appel√©e dans le fichier index.html comme suit: </p><br><p><img src="https://habrastorage.org/webt/p4/fi/gt/p4figtiael1vnulddyfp-z_ercc.png" alt="image"></p><br><p>  Dans le deuxi√®me fichier (index.js), les composants sont enregistr√©s dans l'application, en vue de leur utilisation ult√©rieure pour le rendu dans le fichier client.js. </p><br><p><img src="https://habrastorage.org/webt/pf/ut/si/pfutsittizddjkex_obmcxbohac.png" alt="image"></p><br><p>  Ainsi, le rendu de flux du composant (objet) se pr√©sente comme suit: </p><br><p>  a) Cr√©ation dans un fichier s√©par√©; <br>  b) Enregistrement dans index.js; <br>  c) Rendu dans client.js. </p><br><p>  <b>Positionnement</b> </p><br><p>  Le moment suivant consiste √† positionner un objet dans un plan 3D.  Dans React-360, lors du positionnement, comme dans le rendu, il existe des diff√©rences entre les objets 3D et 2D.  Les objets 3D peuvent √™tre positionn√©s de deux mani√®res. </p><br><ol><li>  Via l'emplacement lors du rendu. </li><li>  Via Transform dans l'objet lui-m√™me. </li></ol><br><p>  Nous avons choisi Transformer √† l'emplacement par d√©faut, comme le conseille le site officiel React-360.  Translate est responsable du positionnement dans le plan 3D. </p><br><p><img src="https://habrastorage.org/webt/ci/p2/mw/cip2mwze4ylkkpdksvhhtoyiclc.png" alt="image"></p><br><p>  Les objets 2D sont positionn√©s √† l'aide du syst√®me flex, comme dans React Native, ce qui dans notre cas √©tait assez g√™nant: </p><br><p><img src="https://habrastorage.org/webt/g6/my/4r/g6my4ry1w96rbkpqqjlcnzdtyho.png" alt="image"></p><br><p>  Pour positionner le bouton √† droite de la cam√©ra, vous avez d√ª cr√©er une vue, comme dans React Native, et d√©finir sa largeur correspondant √† la distance du point le plus √† gauche de l'√©cran √† l'endroit o√π l'objet devrait √™tre, et la hauteur correspondant √† la distance entre le point haut de l'√©cran et la zone, o√π doit √™tre l'objet.  Il √©tait √©galement n√©cessaire de d√©finir certains styles afin que le contenu interne se trouve en bas √† droite de la vue.  En cons√©quence, tout cela semble lourd et peu pratique, il est plus facile d'utiliser la m√™me traduction pour placer ces objets, en les pr√©sentant comme des objets 3D avec une profondeur de 0. </p><br><p>  <b>Importer des objets</b> </p><br><p>  L'√©l√©ment suivant est l'importation d'objets 3D dans React-360.  Et ici, √† premi√®re vue, tout est simple et clair.  Il existe un composant mod√®le standard qui a une source d'accessoires qui accepte un objet JS du chemin d'acc√®s aux fichiers .obj (le fichier de l'objet lui-m√™me) et .mtl (le fichier mat√©riel de cet objet): </p><br><p><img src="https://habrastorage.org/webt/ci/p2/mw/cip2mwze4ylkkpdksvhhtoyiclc.png" alt="image"></p><br><p>  Mais m√™me ici, il y avait des pi√®ges int√©ressants.  En fin de compte, le fichier .mtl a une texture de carte par d√©faut au format .tga et le chemin prescrit sur le disque de la personne qui l'a d√©velopp√©.  Nous avons non seulement d√ª modifier manuellement le chemin d'acc√®s aux fichiers, mais √©galement les modifier en .png, car les fichiers au format .tga n'√©taient pas affich√©s dans le navigateur.  Le format .png nous a permis de rendre correctement les textures. </p><br><p>  <b>Eclairage</b> </p><br><p>  Comme le syst√®me d'√©clairage n'√©tait pas du tout d√©crit dans la documentation, j'ai d√ª aller dans le code source de react-360 et y trouver quelque chose concernant Lights, puis regarder des exemples de qui faisait quoi et comment travailler avec ce zoo.  Par essais et erreurs, nous l'avons compris et l'avons appliqu√© aux mod√®les AmbientLight, SpotLight et PointLight.  Leur positionnement est le m√™me que celui des objets 3D, mais il y a aussi un angle: </p><br><p><img src="https://habrastorage.org/webt/aw/tr/b3/awtrb3bxjsgrlniywnq2ohxikr0.png" alt="image"></p><br><p>  La lumi√®re ne s'appliquait pas √† l'objet, mais nous ne nous sommes pas retir√©s, et, apr√®s une longue recherche et contourner divers probl√®mes dans le r√©f√©rentiel react-360, nous sommes tomb√©s sur la n√©cessit√© de mettre les accessoires allum√©s vrai, et ce n'est qu'apr√®s que la lumi√®re a commenc√© √† agir sur l'objet. </p><br><p>  <b>Mouvement</b> </p><br><p>  Nous avons pris la cam√©ra principale comme acteur principal avec lequel nous effectuons des mouvements et des actions.  Pour ce faire, ils ont √©crit Controller pour la cam√©ra, o√π ils ont initialis√© la fonction principale de l'interface: </p><br><p><img src="https://habrastorage.org/webt/3l/mq/xw/3lmqxwpgihssmspqpojjdj6bwtc.png" alt="image"></p><br><p>  qui transmet la position actuelle de la cam√©ra et sa rotation.  Vous pouvez travailler avec eux dans la cam√©ra pour changer en fonction d'un √©v√©nement, nous avons appuy√© sur les boutons WASD en tant qu'√©v√©nement (comme d'habitude), plus tard, nous avons voulu les remplacer en appuyant sur le bouton et en se d√©pla√ßant sur les coordonn√©es auxquelles le bouton a √©t√© enfonc√©, de sorte que puis remplacez-le par VR Controller.  Pour un bonbon, ils ont r√©gl√© la vitesse de d√©placement et la distance avec laquelle ils ont travaill√©.  Nous avons eu un mouvement avec des secousses et un manque total de physique: nous avons travers√© les textures, vol√© hors des limites, etc.  Dans la documentation, le physicien n'est pas d√©crit √† partir du mot ¬´en g√©n√©ral¬ª (et en principe, un semblable n'est pas ¬´amical de jeu¬ª √† ce stade de l'immersion devient habituelle). </p><br><p>  <b>Conclusion</b> </p><br><p>  Bien que React-360 fonctionne avec Three.js et WebGL, il ne convient absolument pas pour r√©soudre de tels probl√®mes, de plus, il n'√©tait probablement pas destin√© au d√©veloppement de jeux.  React-360 fait un excellent travail avec des pr√©sentations 3D, des visites virtuelles d'objets, la visualisation de panoramas, etc. </p><br><p>  Mais m√™me si vous vous engagez √† faire de telles choses dans cette pile technologique, vous rencontrerez des difficult√©s sous la forme d'une mauvaise documentation, ce qui vous obligera √† passer des heures √† r√©soudre une t√¢che petite et apparemment simple. </p><br><pre><code class="plaintext hljs">     JS,   React,     JSX,       ( ), ,  ,     React,     React Native.   -    .</code> </pre> <br><p>  <b>Unit√©</b> </p><br><p>  Apr√®s tous les tourments, nous avons d√©cid√© d'utiliser le deuxi√®me outil dans le cadre de nos comp√©tences.  Cette fois, le choix s'est port√© sur Unity, car l'√©quipe a des d√©veloppeurs C #. </p><br><p>  <b>Installation et description</b> </p><br><p>  L'installation est assez simple - t√©l√©chargement et d√©ballage banals du kit de distribution depuis le site officiel.  Il y a un ¬´mais¬ª: jusqu'√† pr√©sent, Unity ne fonctionne que sur Windows et Mac (depuis la version 10).  Par cons√©quent, nous avons d√ª transf√©rer d'Ubuntu vers Mac. </p><br><p>  √âtant donn√© que Unity est un moteur de jeu qui comprend une interface utilisateur bonne et pratique, le projet est cr√©√© avec un simple clic sur le bouton, apr√®s quoi vous obtenez un mod√®le complet des fichiers n√©cessaires.  Fondamentalement, tout se trouve dans le dossier Actifs. </p><br><p>  <b>Rendu</b> </p><br><p>  √âtant donn√© que le moteur lui-m√™me est en cours de rendu, vous n'avez pas besoin d'enregistrer quoi que ce soit. </p><br><p>  <b>Positionnement</b> </p><br><p>  Le positionnement est aussi simple que le rendu.  Il suffit de faire glisser l'objet dans le champ et de travailler soit avec les curseurs sous la forme appropri√©e, soit dans une interface graphique pratique.  Comme pour le rendu, la situation est telle que rien n'√©tait requis pour √™tre enregistr√©. </p><br><p>  <b>Importer des objets</b> </p><br><p>  Un simple Drag'n'Drop, initialement √† l'int√©rieur de l'actif dans le dossier appropri√©, puis une op√©ration similaire sur le champ GUI.  Il n'y a pas de code. </p><br><p>  <b>Eclairage</b> </p><br><p>  Travailler avec l'√©clairage est aussi simple qu'avec les paragraphes pr√©c√©dents.  La cr√©ation d'un nouvel √©clairage a lieu dans l'onglet appropri√© du projet.  Le syst√®me est √©galement d√©crit de mani√®re suffisamment d√©taill√©e dans la documentation. </p><br><p>  <b>Mouvement</b> </p><br><p>  C'est le premier point o√π vous devez coder quelque chose.  √Ä savoir, le comportement du joueur et de la cam√©ra lors du d√©placement.  Pour le syst√®me de mouvement, nous avons utilis√© le syst√®me de NavMesh et ses agents.  Nous avons d√©crit la zone o√π vous pouvez vous promener dans l'interface graphique, identifi√© la cam√©ra et le mod√®le en tant qu'agent dans le syst√®me de navigation.  Ensuite, nous avons cr√©√© un script, cela se fait tr√®s simplement dans l'interface graphique: </p><br><ul><li>  L'objet est s√©lectionn√©; </li><li>  Le bouton Ajouter des composants est enfonc√©; </li><li>  S√©lectionne un nouveau script; </li><li>  Le nom est √©crit. </li></ul><br><p>  Et le tour est jou√© - un mod√®le de script standard dans le dossier racine est cr√©√©.  Nous avions juste besoin de le transf√©rer dans le dossier Scripts et de l'ouvrir (il s'ouvre par d√©faut dans VS, ce qui est tr√®s pratique).  Le mod√®le de script standard poss√®de une interface intuitive sous la forme de deux fonctions: </p><br><ul><li>  D√©marrer - utilis√© lors de la configuration des composants; </li><li>  Mise √† jour - appel√©e sur chaque image. </li></ul><br><p>  Dans la fonction D√©marrer, nous avons verrouill√© le curseur au centre de l'√©cran et enregistr√© notre composant dans la propri√©t√© correspondante de la classe, et √©galement d√©clar√© les param√®tres par d√©faut pour les propri√©t√©s restantes. </p><br><p>  Dans la fonction Update, nous avons √©crit la logique de rotation de l'objet derri√®re le curseur, ainsi que le mouvement de l'objet par clic: </p><br><p><img src="https://habrastorage.org/webt/cs/ov/e0/csove0ay8yjktshjs30yarw8omk.png" alt="image"></p><br><p>  <b>Conclusion</b> </p><br><p>  En plus de la conclusion assez √©vidente sur la commodit√© d'Unity, je voudrais noter que pour travailler sur Unity, vous ne pouvez pas du tout √™tre programmeur.  Unity propose un grand nombre de didacticiels pour les d√©butants, tr√®s simples et directs, ainsi qu'une documentation compl√®te de haute qualit√© et une communaut√© dynamique et active. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr437880/">https://habr.com/ru/post/fr437880/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr437868/index.html">Semaine de la s√©curit√© 05: imprimantes, appareils photo, 7zip et √©thique</a></li>
<li><a href="../fr437870/index.html">Comment Resident Evil 2 s'est effondr√©, mais a pu devenir le plus grand succ√®s de Capcom</a></li>
<li><a href="../fr437872/index.html">Cordonnier sans bottes. Comment les √©l√®ves ont √©crit des e-mails de phishing</a></li>
<li><a href="../fr437876/index.html">"Clouds": quel est l'avantage sur le serveur d'entreprise</a></li>
<li><a href="../fr437878/index.html">Tendances de cybers√©curit√© de BI.ZONE</a></li>
<li><a href="../fr437882/index.html">ASML reprend Mapper Lithography apr√®s la faillite</a></li>
<li><a href="../fr437884/index.html">Modification du jeu bas√©e sur dll-wrapper'a</a></li>
<li><a href="../fr437888/index.html">Capturer le signal d'activit√© musculaire dans un syst√®me d'apprentissage automatique</a></li>
<li><a href="../fr437890/index.html">CNC dans un atelier de bricolage (partie 1)</a></li>
<li><a href="../fr437892/index.html">Pr√©sentation du scanner 3D Shining 3D FreeScan X7 / X7 +</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>