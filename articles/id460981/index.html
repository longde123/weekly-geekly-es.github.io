<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚭 👩🏽‍🚒 🐒 Implementasi MVVM dari konfigurasi aplikasi WPF dibangun berdasarkan kerangka kerja Catel 👓 👩🏿‍💻 ⏭️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Menerapkan pengaturan pengaturan perangkat lunak mungkin merupakan salah satu hal yang diterapkan secara berbeda di hampir setiap aplikasi. Sebagian b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Implementasi MVVM dari konfigurasi aplikasi WPF dibangun berdasarkan kerangka kerja Catel</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460981/"><p>  Menerapkan pengaturan pengaturan perangkat lunak mungkin merupakan salah satu hal yang diterapkan secara berbeda di hampir setiap aplikasi.  Sebagian besar kerangka kerja dan tambahan lainnya biasanya menyediakan alat mereka sendiri untuk menyimpan / memuat nilai dari beberapa nilai kunci penyimpanan parameter. </p><br><p>  Namun, dalam kebanyakan kasus, penerapan jendela pengaturan khusus dan banyak hal terkait diserahkan kepada kebijaksanaan pengguna.  Dalam artikel ini saya ingin membagikan pendekatan yang berhasil saya lakukan.  Dalam kasus saya, saya perlu mengimplementasikan pekerjaan dengan pengaturan dalam gaya yang ramah-MVVM dan menggunakan spesifikasi kerangka kerja Catel yang digunakan dalam kasus ini. </p><br><p> <strong>Penafian</strong> : dalam catatan ini tidak akan ada kesulitan teknis yang lebih sulit daripada refleksi dasar.  Ini hanya deskripsi dari pendekatan untuk memecahkan masalah kecil yang saya dapatkan selama akhir pekan.  Saya ingin berpikir tentang cara menyingkirkan kode boilerplate standar dan salin-rekat yang terkait dengan pengaturan aplikasi penyimpanan / pemuatan.  Solusi itu sendiri ternyata agak sepele berkat alat .NET / Catel yang mudah digunakan, tetapi mungkin seseorang akan menghemat beberapa jam waktu atau menyarankan pemikiran yang berguna. </p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Ikhtisar Kerangka Catel</b> <div class="spoiler_text"><p>  Seperti kerangka kerja WPF lainnya (Prism, MVVM Light, Caliburn.Micro, dll.), Catel menyediakan alat yang mudah digunakan untuk membangun aplikasi dalam gaya MVVM. <br>  Komponen utama: </p><br><ul><li>  IoC (terintegrasi dengan komponen MVVM) </li><li>  ModelBase: kelas dasar yang menyediakan implementasi otomatis PropertyChanged (terutama dalam hubungannya dengan Catel.Fody), serialisasi, dan BeginEdit / CancelEdit / EndEdit (klasik "berlaku" / "batal"). </li><li>  ViewModelBase, dapat mengikat ke model, membungkus propertinya. </li><li>  Bekerja dengan tampilan, yang dapat secara otomatis membuat dan mengikat ke ViewModel.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kontrol bersarang</a> didukung. </li></ul></div></div><br><h2 id="trebovaniya">  Persyaratan </h2><br><p>  Kami akan melanjutkan dari fakta bahwa kami menginginkan yang berikut dari alat konfigurasi: </p><br><ul><li> Akses ke konfigurasi dengan cara terstruktur yang sederhana.  Sebagai contoh <br> <code>CultureInfo culture = settings.Application.PreferredCulture;</code> <br> <code>TimeSpan updateRate = settings.Perfomance.UpdateRate;</code>  . <br><ul><li>  Semua parameter disajikan sebagai properti normal.  Metode penyimpanan diringkas di dalam.  Untuk tipe sederhana, semuanya harus terjadi secara otomatis, untuk tipe yang lebih kompleks, harus dimungkinkan untuk mengonfigurasi serialisasi nilai ke dalam string. </li></ul></li><li>  Kesederhanaan dan keandalan.  Saya tidak ingin menggunakan alat yang rapuh seperti membuat serialisasi seluruh model konfigurasi seluruhnya atau beberapa Kerangka Entitas.  Pada level yang lebih rendah, konfigurasi tetap merupakan repositori sederhana dari pasangan parameter-nilai. </li><li>  Kemampuan untuk membuang perubahan yang dilakukan pada konfigurasi, misalnya, jika pengguna mengklik "batal" di jendela pengaturan. </li><li>  Kemampuan untuk berlangganan pembaruan konfigurasi.  Misalnya, kami ingin memperbarui bahasa aplikasi segera setelah konfigurasi diubah. </li><li>  Migrasi antar versi aplikasi.  Seharusnya dimungkinkan untuk mengatur tindakan saat beralih di antara versi aplikasi (ganti nama parameter, dll.). </li><li>  Kode boilerplate minimum, kesalahan ketik minimum.  Idealnya, kami hanya ingin mengatur properti-otomatis dan tidak memikirkan bagaimana itu akan disimpan, di bawah kunci string mana, dll ... Kami tidak ingin menyalin secara manual setiap properti dalam model tampilan dari jendela pengaturan, semuanya harus bekerja secara otomatis. </li></ul><br><h2 id="standartnye-sredstva">  Alat Standar </h2><br><p>  Catel menyediakan layanan IConfigurationService, yang memungkinkan penyimpanan dan pemuatan nilai kunci string dari penyimpanan lokal (file pada disk dalam implementasi standar). </p><br><p>  Jika kita ingin menggunakan layanan ini dalam bentuknya yang murni, kita harus mendeklarasikan kunci-kunci ini sendiri, misalnya, dengan menetapkan konstanta seperti itu: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Application</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> String PreferredCulture = <span class="hljs-string"><span class="hljs-string">"Application.PreferredCulture"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> String PreferredCultureDefaultValue = Thread.CurrentThread.CurrentUICulture.ToString(); }</code> </pre> <br><p>  Maka kita bisa mendapatkan parameter ini seperti ini: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> preferredCulture = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CultureInfo(configurationService.GetRoamingValue( Application.PreferredCulture, Application.PreferredCultureDefaultValue));</code> </pre> <br><p>  Banyak dan membosankan untuk menulis, mudah untuk membuat kesalahan ketik ketika ada banyak pengaturan.  Selain itu, layanan hanya mendukung jenis sederhana, misalnya <code>CultureInfo</code> tidak dapat disimpan tanpa transformasi tambahan. </p><br><p>  Untuk mempermudah pekerjaan dengan layanan ini, pembungkus yang terdiri dari beberapa komponen diperoleh. </p><br><p>  Kode sampel lengkap tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori GitHub</a> .  Ini berisi aplikasi paling sederhana dengan kemampuan untuk mengedit beberapa parameter dalam pengaturan dan memastikan semuanya bekerja.  Saya tidak repot dengan pelokalan, parameter "Bahasa" dalam pengaturan digunakan hanya untuk menunjukkan konfigurasi.  Jika tertarik, Catel memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mekanisme lokalisasi yang</a> nyaman, termasuk di tingkat WPF.  Jika Anda tidak suka file sumber daya, Anda dapat membuat implementasi sendiri bekerja dengan GNU gettext, misalnya. </p><br><p>  Agar mudah dibaca, dalam contoh kode dalam teks publikasi ini, semua komentar xml-doc telah dihapus. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_9/js/i_/_9jsi_xxzbfegcuhavmkyluowni.png"></div><br><h2 id="servis-konfiguracii">  Layanan konfigurasi </h2><br><p>  Layanan yang dapat disematkan melalui IoC dan memiliki akses untuk bekerja dengan pengaturan dari mana saja di aplikasi. </p><br><p>  Tujuan utama dari layanan ini adalah untuk menyediakan model pengaturan, yang pada gilirannya menyediakan cara yang sederhana dan terstruktur untuk mengaksesnya. </p><br><p>  Selain model pengaturan, layanan ini juga menyediakan kemampuan untuk membatalkan atau menyimpan perubahan yang dilakukan pada pengaturan. </p><br><p>  Antarmuka: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IApplicationConfigurationProviderService</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> TypedEventHandler&lt;IApplicationConfigurationProviderService&gt; ConfigurationSaved; ConfigurationModel Configuration { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadSettingsFromStorage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SaveChanges</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; }</code> </pre> <br><p>  Implementasi: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ApplicationConfigurationProviderService</span></span> : <span class="hljs-title"><span class="hljs-title">IApplicationConfigurationProviderService</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IConfigurationService _configurationService; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplicationConfigurationProviderService</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfigurationService configurationService</span></span></span><span class="hljs-function">)</span></span> { _configurationService = configurationService; Configuration = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConfigurationModel(); LoadSettingsFromStorage(); ApplyMigrations(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> TypedEventHandler&lt;IApplicationConfigurationProviderService&gt; ConfigurationSaved; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ConfigurationModel Configuration { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadSettingsFromStorage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Configuration.LoadFromStorage(_configurationService); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SaveChanges</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Configuration.SaveToStorage(_configurationService); ConfigurationSaved?.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplyMigrations</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentVersion = <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(ApplicationConfigurationProviderService).Assembly.GetName().Version; String currentVersionString = currentVersion.ToString(); String storedVersionString = _configurationService.GetRoamingValue(<span class="hljs-string"><span class="hljs-string">"SolutionVersion"</span></span>, currentVersionString); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (storedVersionString == currentVersionString) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-comment"><span class="hljs-comment">//Either migrations were already applied or we are on fresh install var storedVersion = new Version(storedVersionString); foreach (var migration in _migrations) { Int32 comparison = migration.Version.CompareTo(storedVersion); if (comparison &lt;= 0) continue; migration.Action.Invoke(); } _configurationService.SetRoamingValue("SolutionVersion", currentVersionString); } }</span></span></code> </pre> <br><p>  Implementasinya sepele, isi <code>ConfigurationModel</code> dijelaskan di bagian berikut.  Satu-satunya hal yang mungkin menarik perhatian adalah metode <code>ApplyMigrations</code> . </p><br><p>  Dalam versi baru program, sesuatu dapat berubah, misalnya, metode penyimpanan beberapa parameter kompleks atau namanya.  Jika kami tidak ingin kehilangan pengaturan setelah setiap pembaruan yang mengubah parameter yang ada, kami memerlukan mekanisme migrasi.  Metode <code>ApplyMigrations</code> dukungan yang sangat sederhana untuk melakukan tindakan apa pun selama transisi antar versi. </p><br><p>  Jika ada sesuatu yang berubah di versi baru aplikasi, kami cukup menambahkan tindakan yang diperlukan (misalnya, menyimpan parameter dengan nama baru) di versi baru ke daftar migrasi yang terdapat dalam file tetangga: </p><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IReadOnlyCollection&lt;Migration&gt; _migrations = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Migration[] { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Migration(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Version(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>), () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//... }) } .OrderBy(migration =&gt; migration.Version) .ToArray(); private class Migration { public readonly Version Version; public readonly Action Action; public Migration(Version version, Action action) { Version = version; Action = action; } }</span></span></code> </pre> <br><h2 id="model-nastroek">  Model Pengaturan </h2><br><p>  Otomasi operasi rutin adalah sebagai berikut.  Konfigurasi digambarkan sebagai model reguler (data-objek).  Catel menyediakan <code>ModelBase</code> kelas dasar yang nyaman, yang merupakan inti dari semua alat MVVM-nya, seperti binding otomatis antara ketiga komponen MVVM.  Secara khusus, ini memungkinkan Anda untuk dengan mudah mengakses properti model yang ingin kami simpan. </p><br><p>  Dengan mendeklarasikan model seperti itu, kita dapat memperoleh propertinya, memetakan kunci-kunci string kepada mereka, membuatnya dari nama properti, dan kemudian secara otomatis memuat dan menyimpan nilai dari konfigurasi.  Dengan kata lain, ikat properti dan nilai dalam konfigurasi. </p><br><h3 id="obyavlenie-parametrov-konfiguracii">  Mendeklarasikan opsi konfigurasi </h3><br><p>  Ini adalah model root: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ConfigurationModel</span></span> : <span class="hljs-title"><span class="hljs-title">ConfigurationGroupBase</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigurationModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Application = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ApplicationConfiguration(); Performance = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PerformanceConfiguration(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ApplicationConfiguration Application { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PerformanceConfiguration Performance { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre> <br><p>  <code>ApplicationConfiguration</code> dan <code>PerfomanceConfiguration</code> adalah subclass yang menjelaskan grup pengaturan mereka: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ConfigurationModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PerformanceConfiguration</span></span> : <span class="hljs-title"><span class="hljs-title">ConfigurationGroupBase</span></span> { [DefaultValue(<span class="hljs-number"><span class="hljs-number">10</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Int32 MaxUpdatesPerSecond { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } }</code> </pre> <br><p>  Di bawah tenda, properti ini akan mengikat ke parameter <code>"Performance.MaxUpdatesPerSecond"</code> , yang namanya dihasilkan dari nama tipe <code>PerformanceConfiguration</code> . </p><br><p>  Perlu dicatat bahwa kemampuan untuk mendeklarasikan properti ini sangat ringkas berkat penggunaan <a href="">Catel.Fody</a> , sebuah plug-in ke generator kode .NET <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Fody yang terkenal</a> .  Jika karena alasan tertentu Anda tidak ingin menggunakannya, properti harus dideklarasikan seperti biasa, sesuai dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> (mirip secara visual dengan DependencyProperty dari WPF). </p><br><p>  Jika diinginkan, tingkat bersarang dapat ditingkatkan. </p><br><h3 id="realizaciya-svyazyvaniya-svoystv-s-iconfigurationservice">  Terapkan Properti Binding dengan IConfigurationService </h3><br><p>  Binding terjadi di kelas dasar <code>ConfigurationGroupBase</code> , yang pada gilirannya diwarisi dari ModelBase.  Pertimbangkan isinya secara lebih rinci. </p><br><p>  Pertama-tama, kami membuat daftar properti yang ingin kami simpan: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ConfigurationGroupBase</span></span> : <span class="hljs-title"><span class="hljs-title">ModelBase</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IReadOnlyCollection&lt;ConfigurationProperty&gt; _configurationProperties; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IReadOnlyCollection&lt;PropertyData&gt; _nestedConfigurationGroups; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigurationGroupBase</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> properties = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GetDependencyResolver() .Resolve&lt;PropertyDataManager&gt;() .GetCatelTypeInfo(GetType()) .GetCatelProperties() .Select(property =&gt; property.Value) .Where(property =&gt; property.IncludeInBackup &amp;&amp; !property.IsModelBaseProperty) .ToArray(); _configurationProperties = properties .Where(property =&gt; !property.Type.IsSubclassOf(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(ConfigurationGroupBase))) .Select(property =&gt; { <span class="hljs-comment"><span class="hljs-comment">// ReSharper disable once PossibleNullReferenceException String configurationKeyBase = GetType() .FullName .Replace("+", ".") .Replace(typeof(ConfigurationModel).FullName + ".", string.Empty); configurationKeyBase = configurationKeyBase.Remove(configurationKeyBase.Length - "Configuration".Length); String configurationKey = $"{configurationKeyBase}.{property.Name}"; return new ConfigurationProperty(property, configurationKey); }) .ToArray(); _nestedConfigurationGroups = properties .Where(property =&gt; property.Type.IsSubclassOf(typeof(ConfigurationGroupBase))) .ToArray(); } ... private class ConfigurationProperty { public readonly PropertyData PropertyData; public readonly String ConfigurationKey; public ConfigurationProperty(PropertyData propertyData, String configurationKey) { PropertyData = propertyData; ConfigurationKey = configurationKey; } } }</span></span></code> </pre> <br><p>  Di sini kita cukup beralih ke analog refleksi untuk model Catel, dapatkan properti (dengan memfilter utilitas atau yang kami tandai secara eksplisit dengan atribut <code>[ExcludeFromBackup]</code> ) dan buat kunci string <code>[ExcludeFromBackup]</code> .  Properti yang bertipe <code>ConfigurationGroupBase</code> dicantumkan dalam daftar terpisah. </p><br><p>  Metode <code>LoadFromStorage()</code> menulis nilai dari konfigurasi ke properti yang diperoleh sebelumnya, atau nilai standar, jika sebelumnya tidak disimpan.  Untuk subkelompok, <code>LoadFromStorage()</code> disebut: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadFromStorage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfigurationService configurationService</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> property <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _configurationProperties) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { LoadPropertyFromStorage(configurationService, property.ConfigurationKey, property.PropertyData); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { Log.Error(ex, <span class="hljs-string"><span class="hljs-string">"Can't load from storage nested configuration group {Name}"</span></span>, property.PropertyData.Name); } } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> property <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _nestedConfigurationGroups) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> configurationGroup = GetValue(property) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ConfigurationGroupBase; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (configurationGroup == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Log.Error(<span class="hljs-string"><span class="hljs-string">"Can't load from storage configuration property {Name}"</span></span>, property.Name); <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } configurationGroup.LoadFromStorage(configurationService); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadPropertyFromStorage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfigurationService configurationService, String configurationKey, PropertyData propertyData</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> objectConverterService = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GetDependencyResolver().Resolve&lt;IObjectConverterService&gt;(); Object <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = configurationService.GetRoamingValue(configurationKey, propertyData.GetDefaultValue()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> String stringValue) <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = objectConverterService.ConvertFromStringToObject(stringValue, propertyData.Type, CultureInfo.InvariantCulture); SetValue(propertyData, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); }</code> </pre> <br><p>  Metode <code>LoadPropertyFromStorage</code> menentukan bagaimana nilai ditransfer dari konfigurasi ke properti.  Ini virtual dan dapat didefinisikan ulang untuk properti non-sepele. </p><br><p>  Sebuah fitur kecil dari operasi internal layanan <code>IConfigurationService</code> : Anda dapat melihat penggunaan <code>IObjectConverterService</code> .  Ini diperlukan karena <code>IConfigurationService.GetValue</code> dalam kasus ini dengan parameter generik dari tipe <code>Object</code> dan dalam kasus ini ia tidak akan mengonversi string yang dimuat ke angka, misalnya, jadi Anda perlu melakukan ini sendiri. </p><br><p>  Demikian pula dengan parameter penyimpanan: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SaveToStorage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfigurationService configurationService</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> property <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _configurationProperties) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { SavePropertyToStorage(configurationService, property.ConfigurationKey, property.PropertyData); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { Log.Error(ex, <span class="hljs-string"><span class="hljs-string">"Can't save to storage configuration property {Name}"</span></span>, property.PropertyData.Name); } } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> property <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _nestedConfigurationGroups) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> configurationGroup = GetValue(property) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ConfigurationGroupBase; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (configurationGroup == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Log.Error(<span class="hljs-string"><span class="hljs-string">"Can't save to storage nested configuration group {Name}"</span></span>, property.Name); <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } configurationGroup.SaveToStorage(configurationService); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SavePropertyToStorage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfigurationService configurationService, String configurationKey, PropertyData propertyData</span></span></span><span class="hljs-function">)</span></span> { Object <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = GetValue(propertyData); configurationService.SetRoamingValue(configurationKey, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); }</code> </pre> <br><p>  Perlu dicatat bahwa di dalam model konfigurasi, Anda harus mengikuti konvensi penamaan sederhana untuk mendapatkan kunci string parameter yang seragam: </p><br><ul><li>  Jenis-jenis grup pengaturan (kecuali root) adalah subkelas dari grup "induk" dan namanya berakhir di Konfigurasi. </li><li>  Untuk setiap jenis seperti itu ada properti yang sesuai dengannya.  Misalnya, grup <code>ApplicationSettings</code> dan properti <code>Application</code> .  Nama properti tidak memengaruhi apa pun, tetapi ini adalah opsi yang paling logis dan diharapkan. </li></ul><br><h3 id="nastroyka-sohraneniya-otdelnyh-svoystv">  Pengaturan simpan properti individual </h3><br><p>  <code>IConfigurationService</code> otomatis Catel.Fody dan <code>IConfigurationService</code> (penghematan langsung nilai dalam <code>IConfigurationService</code> dan atribut <code>[DefaultValue]</code> ) hanya akan berfungsi untuk tipe sederhana dan nilai default konstan.  Untuk properti kompleks, Anda harus melukis sedikit lebih otentik: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ConfigurationModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ApplicationConfiguration</span></span> : <span class="hljs-title"><span class="hljs-title">ConfigurationGroupBase</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> CultureInfo PreferredCulture { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [DefaultValue(<span class="hljs-string"><span class="hljs-string">"User"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String Username { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadPropertyFromStorage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfigurationService configurationService, String configurationKey, PropertyData propertyData</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (propertyData.Name) { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">case</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nameof</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PreferredCulture</span></span></span><span class="hljs-function">): String preferredCultureDefaultValue</span></span> = CultureInfo.CurrentUICulture.ToString(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (preferredCultureDefaultValue != <span class="hljs-string"><span class="hljs-string">"en-US"</span></span> || preferredCultureDefaultValue != <span class="hljs-string"><span class="hljs-string">"ru-RU"</span></span>) preferredCultureDefaultValue = <span class="hljs-string"><span class="hljs-string">"en-US"</span></span>; String <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = configurationService.GetRoamingValue(configurationKey, preferredCultureDefaultValue); SetValue(propertyData, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CultureInfo(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.LoadPropertyFromStorage(configurationService, configurationKey, propertyData); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SavePropertyToStorage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfigurationService configurationService, String configurationKey, PropertyData propertyData</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (propertyData.Name) { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">case</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nameof</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PreferredCulture</span></span></span><span class="hljs-function">): Object </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">value</span></span></span></span> = GetValue(propertyData); configurationService.SetRoamingValue(configurationKey, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.ToString()); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.SavePropertyToStorage(configurationService, configurationKey, propertyData); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } }</code> </pre> <br><p>  Sekarang kita dapat, misalnya, di jendela pengaturan mengikat ke salah satu properti model: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Configuration.Application.Username}"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Masih harus diingat untuk mengganti operasi saat menutup jendela pengaturan ViewModel: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> Task&lt;Boolean&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SaveAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _applicationConfigurationProviderService.SaveChanges(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.SaveAsync(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> Task&lt;Boolean&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CancelAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _applicationConfigurationProviderService.LoadSettingsFromStorage(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.CancelAsync(); }</code> </pre> <br><p>  Dengan peningkatan jumlah parameter dan, karenanya, kompleksitas antarmuka, Anda dapat dengan mudah membuat View dan ViewModel terpisah untuk setiap bagian pengaturan. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id460981/">https://habr.com/ru/post/id460981/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id460967/index.html">Troy Hunt: 10 pelajaran keuangan pribadi untuk profesional teknologi informasi</a></li>
<li><a href="../id460969/index.html">Margaret Hamilton: “Mereka khawatir pria akan memberontak; tapi itu tidak terjadi ”</a></li>
<li><a href="../id460971/index.html">NVIDIA Jetson Nano: Tes dan Kesan Pertama - Bagian 2, Tes AI</a></li>
<li><a href="../id460973/index.html">Hubungi pengelasan untuk 18650 baterai</a></li>
<li><a href="../id460979/index.html">Peremajaan bioteknologi adalah nyata dan tidak terhindarkan</a></li>
<li><a href="../id460983/index.html">Saya tidak nyata</a></li>
<li><a href="../id460985/index.html">14 Alat Kanban Terbaik di 2019</a></li>
<li><a href="../id460987/index.html">"Mode Dewa untuk Internet": melacak pengguna melalui ekstensi Chrome dan Firefox</a></li>
<li><a href="../id460989/index.html">Bahasa mana - D, Go atau Rust yang memiliki prospek lebih baik untuk menggantikan C dan mengapa?</a></li>
<li><a href="../id460991/index.html">Tic Tac Toe, Bagian 5: C ++ Backend Boost.Beast, HTTP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>