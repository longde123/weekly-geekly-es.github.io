<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§§ üõåüèæ üëàüèø O que est√° escrito nisso? Nos bastidores dos objetos JavaScript ‚úãüèæ üï∫üèæ üõ¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="JavaScript √© uma linguagem de paradigmas m√∫ltiplos que suporta programa√ß√£o orientada a objetos e liga√ß√£o din√¢mica de m√©todos - um conceito poderoso qu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O que est√° escrito nisso? Nos bastidores dos objetos JavaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/455527/"> JavaScript √© uma linguagem de paradigmas m√∫ltiplos que suporta programa√ß√£o orientada a objetos e liga√ß√£o din√¢mica de m√©todos - um conceito poderoso que permite que a estrutura do c√≥digo JavaScript seja alterada durante a execu√ß√£o do programa.  Isso oferece aos desenvolvedores s√©rias oportunidades, torna o idioma flex√≠vel, mas voc√™ precisa pagar por tudo.  Nesse caso, voc√™ deve pagar com a compreensibilidade do c√≥digo.  Uma contribui√ß√£o significativa para esse pre√ßo √© feita pela <code>this</code> , em torno do comportamento do qual muitas coisas foram coletadas que podem confundir o programador. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/ii/kt/pk/iiktpkrhqof7akjucnspeywzs0e.png"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Vincula√ß√£o de m√©todo din√¢mico</font> </h2><br>  A liga√ß√£o din√¢mica permite especificar, durante a execu√ß√£o do programa, e n√£o durante a compila√ß√£o, o m√©todo que deve ser chamado ao executar um determinado comando.  Em JavaScript, esse mecanismo √© implementado usando a <code>this</code> e a cadeia de prot√≥tipos.  Em particular, o valor espec√≠fico <code>this</code> dentro do m√©todo √© determinado em tempo de execu√ß√£o, e as regras para determinar esse valor variam dependendo de como o m√©todo foi declarado. <br><br>  Vamos jogar um jogo.  Eu chamo de "O que est√° escrito nisso?".  Aqui est√° sua primeira op√ß√£o - c√≥digo do m√≥dulo ES6: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a = { <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-string"><span class="hljs-string">'a'</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> obj = { <span class="hljs-attr"><span class="hljs-attr">getThis</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, getThis2 () {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } }; obj.getThis3 = obj.getThis.bind(obj); obj.getThis4 = obj.getThis2.bind(obj); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> answers = [ obj.getThis(), obj.getThis.call(a), obj.getThis2(), obj.getThis2.call(a), obj.getThis3(), obj.getThis3.call(a), obj.getThis4(), obj.getThis4.call(a) ];</code> </pre> <br>  Antes de ler mais, pense sobre o que cair√° na matriz de respostas e anote as respostas.  Depois de fazer isso, teste-se <code>answers</code> matriz de <code>answers</code> usando <code>console.log()</code> .  Voc√™ conseguiu descriptografar corretamente o valor <code>this</code> em cada um dos casos? <br><br>  Vamos analisar esse problema, come√ßando com o primeiro exemplo.  A constru√ß√£o <code>obj.getThis()</code> retorna <code>undefined</code> .  Porque  Esta fun√ß√£o de seta n√£o pode ser vinculada.  Tais fun√ß√µes usam <code>this</code> de seu escopo lexical circundante.  O m√©todo √© chamado no m√≥dulo ES6; em seu escopo lexical, <code>this</code> ser√° <code>undefined</code> .  Pelo mesmo motivo, <code>undefined</code> retornar√° uma chamada para <code>obj.getThis.call(a)</code> .  O valor <code>this</code> ao trabalhar com fun√ß√µes de seta n√£o pode ser reatribu√≠do mesmo com <code>.call()</code> ou <code>.bind()</code> .  Esse valor sempre corresponder√° a <code>this</code> do escopo lexical, no qual essas fun√ß√µes est√£o localizadas. <br><br>  O comando <code>obj.getThis2()</code> demonstra como trabalhar com <code>this</code> ao usar m√©todos de objeto regulares.  Se <code>this</code> n√£o <code>this</code> vinculado a um m√©todo semelhante e desde que esse m√©todo n√£o seja uma fun√ß√£o de seta, ou seja, ele suporte <code>this</code> liga√ß√£o, a palavra-chave <code>this</code> ser√° vinculada ao objeto para o qual o m√©todo √© chamado usando a sintaxe de acesso √†s propriedades do objeto por meio de ponto ou usando colchetes. <br><br>  A constru√ß√£o <code>obj.getThis2.call(a)</code> j√° √© um pouco mais dif√≠cil de descobrir.  O m√©todo <code>call()</code> permite chamar uma fun√ß√£o com um determinado valor <code>this</code> , que √© indicado como um argumento opcional.  Em outras palavras, nesse caso, <code>this</code> √© obtido do par√¢metro <code>.call()</code> ; como resultado, a chamada para <code>obj.getThis2.call(a)</code> retorna o objeto <code>a</code> . <br><br>  Usando o comando <code>obj.getThis3 = obj.getThis.bind(obj);</code>  estamos tentando vincular a <code>this</code> m√©todo, que √© uma fun√ß√£o de seta.  Como j√° descobrimos, isso n√£o pode ser feito.  Como resultado, as chamadas para <code>obj.getThis3()</code> e <code>obj.getThis3.call(a)</code> retornam <code>undefined</code> . <br><br>  M√©todos que s√£o fun√ß√µes comuns podem ser anexados a <code>this</code> , ent√£o <code>obj.getThis4()</code> , como esperado, retorna <code>obj</code> .  Uma chamada para <code>obj.getThis4.call(a)</code> retorna <code>obj</code> , e n√£o, como <code>obj.getThis4.call(a)</code> esperar, <code>a</code> .  O fato √© que, antes de chamar esse comando, j√° o vinculamos ao <code>obj.getThis4 = obj.getThis2.bind(obj);</code>  .  Como resultado, ao executar <code>obj.getThis4.call(a)</code> , o estado do m√©todo em que estava ap√≥s a primeira liga√ß√£o ter sido levada em considera√ß√£o √© levado em considera√ß√£o. <br><br><h2>  <font color="#3AC1EF">Usando isso nas classes</font> </h2><br>  Aqui est√° a segunda vers√£o do nosso jogo - a mesma tarefa, mas agora baseada em classes.  Aqui, usamos a sintaxe para declarar campos de classe p√∫blica (no momento, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">proposta</a> para essa sintaxe est√° no terceiro est√°gio de aprova√ß√£o, ela est√° dispon√≠vel por padr√£o no Chrome, voc√™ pode us√°-la com <code>@babel/plugin-proposal-class-properties</code> ). <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Obj</span></span></span><span class="hljs-class"> </span></span>{ getThis = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> getThis2 () {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> obj2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Obj(); obj2.getThis3 = obj2.getThis.bind(obj2); obj2.getThis4 = obj2.getThis2.bind(obj2); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> answers2 = [ obj2.getThis(), obj2.getThis.call(a), obj2.getThis2(), obj2.getThis2.call(a), obj2.getThis3(), obj2.getThis3.call(a), obj2.getThis4(), obj2.getThis4.call(a) ];</code> </pre> <br>  Antes de continuar lendo, pense no c√≥digo e escreva sua vis√£o do que ser√° inserido no array <code>answers2</code> . <br><br>  Voc√™ terminou? <br><br>  Aqui, todas as chamadas de m√©todo, exceto <code>obj2.getThis2.call(a)</code> , retornar√£o uma refer√™ncia √† inst√¢ncia do objeto.  A mesma chamada retornar√° o objeto <code>a</code> .  As fun√ß√µes de seta ainda levam <code>this</code> do escopo lexical.  A diferen√ßa entre este exemplo e o anterior √© a diferen√ßa no escopo do qual <code>this</code> √© tirado. <br><br>  Ou seja, aqui trabalhamos com propriedades de classe, que determinam o comportamento desse c√≥digo. <br><br>  O fato √© que, durante a prepara√ß√£o do c√≥digo para execu√ß√£o, os valores s√£o gravados nas propriedades das classes assim: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Obj</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getThis = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } ...</code> </pre> <br>  Em outras palavras, verifica-se que a fun√ß√£o de seta √© declarada dentro do contexto da fun√ß√£o de construtor.  Como estamos trabalhando com uma classe, a √∫nica maneira de instanciar √© usar a <code>new</code> palavra-chave (se voc√™ esquecer essa palavra-chave, uma mensagem de erro ser√° exibida). <br><br>  As tarefas mais importantes resolvidas pela <code>new</code> palavra-chave s√£o criar uma nova inst√¢ncia do objeto e vincul√°- <code>this</code> ao construtor.  Esse recurso, levando em conta o que j√° falamos na se√ß√£o anterior, deve ajud√°-lo a entender o que est√° acontecendo. <br><br><h2>  <font color="#3AC1EF">Sum√°rio</font> </h2><br>  Voc√™ concluiu as tarefas descritas neste artigo?  Um bom entendimento de como <code>this</code> palavra <code>this</code> chave se comporta no JavaScript economizar√° muito tempo durante a depura√ß√£o, ao procurar raz√µes n√£o √≥bvias para erros obscuros.  Se voc√™ respondeu algumas das perguntas incorretamente, significa que ser√° √∫til para voc√™ praticar. <br><br>  Experimente o c√≥digo de exemplo e tente novamente, e assim por diante, at√© poder responder a todas as perguntas corretamente.  Depois de descobrir voc√™ mesmo, encontre algu√©m pronto para ouvi-lo e diga a ele por que os m√©todos das tarefas retornam exatamente o que eles retornam. <br><br>  Se tudo isso lhe parece mais complicado do que o esperado, saiba que voc√™ n√£o est√° sozinho nisso.  Testei alguns desenvolvedores para conhecer os recursos <code>this</code> e acho que apenas um deles foi absolutamente preciso em todas as suas respostas. <br><br>  Esse subsistema da linguagem, que no in√≠cio parecia uma pesquisa din√¢mica de m√©todos que podiam ser influenciados usando <code>.call()</code> , <code>.bind()</code> ou <code>.apply()</code> , come√ßou a parecer muito mais complicado ap√≥s o aparecimento das fun√ß√µes e classes das setas. <br><br>  Aparentemente, ser√° √∫til observar os principais recursos de classes e fun√ß√µes de seta em termos de uso <code>this</code> .  Lembre-se de que as fun√ß√µes de seta sempre usam <code>this</code> de seu escopo lexical, e a <code>this</code> nas classes est√°, de fato, vinculada √† fun√ß√£o construtora da classe.  E se voc√™ sentir que n√£o sabe exatamente o que <code>this</code> aponta, use o depurador para verificar suas suposi√ß√µes sobre isso. <br><br>  Al√©m disso, lembre-se de que voc√™ pode fazer muito em JavaScript sem us√°- <code>this</code> em seu c√≥digo.  A experi√™ncia me diz que quase qualquer c√≥digo JS pode ser reescrito na forma de fun√ß√µes puras que aceitam todos os argumentos com os quais trabalham, na forma de uma lista explicitamente especificada de par√¢metros ( <code>this</code> pode ser interpretado como um par√¢metro implicitamente especificado com um estado mut√°vel).  A l√≥gica contida nas fun√ß√µes puras √© determin√≠stica, o que melhora sua testabilidade.  Tais fun√ß√µes n√£o t√™m efeitos colaterais, o que significa que, ao trabalhar com elas, ao contr√°rio de manipular <code>this</code> , √© improv√°vel que voc√™ ‚Äúquebre‚Äù qualquer coisa fora dela.  Sempre que voc√™ altera <code>this</code> , voc√™ se depara com um problema em potencial, que √© o de que algo que depende <code>this</code> pode parar de funcionar corretamente. <br><br>  Apesar do exposto, note-se que <code>this</code> √© um conceito √∫til.  Por exemplo, ele pode ser aplicado para organizar o compartilhamento de um determinado m√©todo por uma infinidade de objetos.  Mesmo na programa√ß√£o funcional, <code>this</code> pode ser √∫til para chamar outros m√©todos a partir de um m√©todo de um objeto, o que permite criar algo novo com base nas constru√ß√µes existentes. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/a09/9e4/5a8/a099e45a81c9dafd3a3673edd5ea415b.jpg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt455527/">https://habr.com/ru/post/pt455527/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt455515/index.html">Como reverter e invadir o disco r√≠gido externo auto-criptografado do Aigo. Parte 1: Dissecando em partes</a></li>
<li><a href="../pt455517/index.html">Formado no curso de Netologia ‚ÄúData Science‚Äù sobre seu trabalho no setor banc√°rio</a></li>
<li><a href="../pt455519/index.html">Como implementamos a integra√ß√£o de novos desenvolvedores</a></li>
<li><a href="../pt455523/index.html">Implementa√ß√£o da interface do usu√°rio do OpenStack LBaaS</a></li>
<li><a href="../pt455525/index.html">Zimbra e Mail Bomb Defense</a></li>
<li><a href="../pt455529/index.html">Como reverter e invadir o disco r√≠gido externo auto-criptografado do Aigo. Parte 2: Despejando com Cypress PSoC</a></li>
<li><a href="../pt455533/index.html">F√≠sica da bolha: uma busca pelo mecanismo de destrui√ß√£o da espuma</a></li>
<li><a href="../pt455535/index.html">Gerenciando certificados SSL / TLS nas nuvens e cont√™ineres - n√£o no trabalho humano</a></li>
<li><a href="../pt455537/index.html">Otimiza√ß√£o de pesquisa ampla: como processar um gr√°fico com 10 bilh√µes de estados</a></li>
<li><a href="../pt455539/index.html">Videntes m√≥veis: 10 fatos novos sobre como os dispositivos vest√≠veis est√£o observando voc√™</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>