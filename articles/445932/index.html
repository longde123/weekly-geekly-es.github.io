<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöΩ üå≠ üç∂ Seguridad de la aplicaci√≥n del cliente: consejos pr√°cticos para un desarrollador front-end ‚ôàÔ∏è üëâüèª üé∞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como saben, la mayor√≠a de los ataques de los piratas inform√°ticos de BlackHat est√°n destinados a comprometer los datos del servidor de las aplicacione...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Seguridad de la aplicaci√≥n del cliente: consejos pr√°cticos para un desarrollador front-end</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445932/"><p>  Como saben, la mayor√≠a de los ataques de los piratas inform√°ticos de BlackHat est√°n destinados a comprometer los datos del servidor de las aplicaciones y servicios web.  Al mismo tiempo, la parte del cliente es atacada al menos hoy.  Seg√∫n la definici√≥n en seco, cualquier ataque es un conjunto de medidas por parte de un hacker dirigido a la red y la transferencia de datos, los datos y su sustituci√≥n, infraestructura y caracter√≠sticas t√©cnicas de la implementaci√≥n de la aplicaci√≥n web.  Por lo tanto, las compa√±√≠as internacionales requieren que los ingenieros de desarrollo adopten un enfoque m√°s responsable y exhaustivo para la seguridad de las aplicaciones del cliente. </p><br><p> En el ejemplo de mi proyecto, hablar√© sobre c√≥mo las aplicaciones cliente atacan hoy y c√≥mo puede evitar estas amenazas. </p><a name="habracut"></a><br><img alt="Las 10 principales amenazas de 2013 a 2017" src="https://habrastorage.org/webt/ys/zg/d7/yszgd7tqw75npl5bx9pliitikte.jpeg"><br>  <i>Las 10 principales amenazas para 2013-2017.</i> <br><br><p>  Como puede ver, entre las principales amenazas, la inyecci√≥n, la activaci√≥n de errores, la omisi√≥n de autenticaci√≥n y los datos confidenciales inseguros ocupan el primer lugar.  La amenaza de usar componentes con vulnerabilidades conocidas sigue siendo relevante.  Tambi√©n aparecieron nuevas amenazas: pirater√≠a del mecanismo de control de acceso, deserializaci√≥n y serializaci√≥n inseguras de datos, registro y monitoreo insuficientemente detallados. </p><br><p>  En 2001, Mark Curfy y Dennis Groves fundaron el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OWASP</a> (Open Web Application Security Project).  Este es un proyecto internacional de c√≥digo abierto para el intercambio de experiencias sobre el combate de vulnerabilidades en aplicaciones cliente, en el que participan una gran cantidad de ingenieros de seguridad de aplicaciones.  La comunidad OWASP llena el portal con una multitud de art√≠culos con informaci√≥n de vulnerabilidad, materiales de capacitaci√≥n, herramientas para probar y repeler ataques.  Se describen ataques reales, se revelan sus aspectos y se describe lo que hay que hacer para prevenir amenazas. </p><br><p>  Para comprender qu√© amenazas son peligrosas para un proyecto, debe probarlo a fondo.  Para hacer esto, la red tiene aplicaciones, marcos y servicios en l√≠nea que identifican autom√°ticamente ciertas vulnerabilidades.  Para las pruebas locales, recomiendo usar aplicaciones y marcos, y para probar proyectos en funcionamiento, tambi√©n es muy √∫til agregar servicios en l√≠nea. </p><br><img src="https://habrastorage.org/webt/zh/c7/ll/zhc7lln_b43msp-lkz7ah0iapmw.jpeg"><br><br><p>  Pero incluso si las herramientas de prueba no le informaron en informes sobre vulnerabilidades significativas (lo cual es poco probable), a√∫n preste atenci√≥n al almacenamiento de datos confidenciales en el sistema de control de versiones, la creaci√≥n de la aplicaci√≥n, el mecanismo de autenticaci√≥n, el algoritmo de hash de contrase√±a, el cifrado de datos confidenciales y los sistemas de registro y monitoreando toda la aplicaci√≥n web.  En este caso, es mejor ir a lo seguro y no confiar en la automatizaci√≥n ciega. </p><br><h2>  Git </h2><br><p>  Primero, hablemos de datos confidenciales en Git.  Idealmente, se asigna un dep√≥sito separado de secretos para almacenar datos confidenciales.  A partir de √©l, durante el ensamblaje para la puesta en marcha, los datos confidenciales se extraen y se cosen a la aplicaci√≥n.  Hoy, Hashicorp Vault, Keywhiz, Docker secrets, Azure Key Vault y muchos otros son populares. </p><br><p>  Pero, ¬øqu√© pasa si no tienes ese almacenamiento?  Puede usar herramientas para codificar y ocultar archivos con secretos que ampliar√°n las capacidades de los sistemas de control de versiones. </p><br><p> Lo primero que viene a la mente es la soluci√≥n universal BlackBox.  Se puede usar con cualquier sistema de control de versiones, por ejemplo, Mercurial, Git, etc.  Adem√°s, hay dos extensiones para Git: git-crypt y git-secret.  Recomiendo usar el segundo, porque me pareci√≥ el m√°s conveniente de usar y m√°s comprensible en t√©rminos de descripci√≥n en la documentaci√≥n oficial.  Despu√©s de instalar git-secret, debe inicializarlo en el repositorio de Git.  Recuerde especificar la extensi√≥n a usar en el archivo <b>.gitattributes</b> .  A continuaci√≥n, configure la accesibilidad de los secretos: identifique los usuarios a los que desea proporcionar acceso a datos confidenciales.  Luego agregue archivos con datos confidenciales y <code>git-secret-hide</code> a trav√©s de <code>git-secret-hide</code> .  Puede obtener archivos ocultos a trav√©s de <code>git-secret-reveal.</code> </p><br> <code>brew install git-secret              //  <br> git secret init                      //  <br> git secret tell your@gpg.email       &amp;nbsp//   <br> git secret add &lt;files...&gt;             //   <br> git secret hide                      &amp;nbsp//   <br> git secret reveal                    &amp;nbsp//    <br></code> <br><h2>  Paquete web </h2><br><p>  Otra forma de eliminar amenazas es configurar el paquete web correctamente.  Para protegerse contra XSS, XEE y ataques similares, debe considerar adherirse a las pol√≠ticas CORS (Intercambio de recursos de origen cruzado) y CSP (Pol√≠tica de seguridad de contenido).  En ambos casos, es importante seguir los encabezados para verificar la autenticidad de ciertos scripts que se utilizan en el proyecto.  Los navegadores tienen mecanismos para verificar la confiabilidad de una fuente en particular, por ejemplo, Safari emitir√° advertencias en cada paso si CORS y CSP est√°n configurados incorrectamente. </p><br><p>  Hay dos formas de cumplir con CORS y CSP.  El primero es configurar los encabezados para responder a las solicitudes en el lado del servidor.  El segundo es registrar ambas pol√≠ticas a trav√©s de metaetiquetas y atributos.  Se recomienda este √∫ltimo m√©todo si tiene desarrolladores de back-end perezosos, siempre est√°n ocupados y no est√°n interesados ‚Äã‚Äãen las pol√≠ticas de seguridad.  Las metaetiquetas se pueden registrar de inmediato al crear la aplicaci√≥n.  Los complementos como html-webpack-plugin, html-webpack-exclude-assets-plugin, script-ext-html-webpack-plugin, csp-html-webpack-plugin y crypto nos ayudar√°n con esto.  Adem√°s, si tiene recursos de terceros en su proyecto (por ejemplo, enlaces a fuentes externas utilizadas en CSS; recursos cargados desde CDN, etc.), entonces tambi√©n recomiendo usar el complemento webpack-subresource-INTEGMENT-INTEGRITY.  Por lo tanto, informar√° al navegador que los recursos cargados en el script son confiables, no hay inyecciones en ellos, son completos y est√°n intactos.  E incluso si alguien inyect√≥ datos maliciosos en el recurso, y usted lo carg√≥, debe estar preparado para esto y proteger su proyecto de tales amenazas. </p><br><p>  Quiero prestar <b>especial atenci√≥n</b> al orden en que se crean las instancias de clase para los complementos.  El orden deber√≠a ser as√≠: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SHA256 = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function">) =&gt;</span></span> CRYPTO.createHash(<span class="hljs-string"><span class="hljs-string">'sha256'</span></span>).update( str, <span class="hljs-string"><span class="hljs-string">'utf8'</span></span>).digest(<span class="hljs-string"><span class="hljs-string">'base64'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sha256Str = SHA256( <span class="hljs-string"><span class="hljs-string">''</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() ); [‚Ä¶] <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackPlugin({   <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'index.html'</span></span>,   <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'public/index.html'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScriptExtHtmlWebpackPlugin({    <span class="hljs-attr"><span class="hljs-attr">custom</span></span>: [{           <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.js$/</span></span>,           <span class="hljs-attr"><span class="hljs-attr">attribute</span></span>: <span class="hljs-string"><span class="hljs-string">'nonce'</span></span>,           <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-string"><span class="hljs-string">'nonce-'</span></span> + sha256Str    }] }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackExcludeAssetsPlugin(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CspHtmlWebpackPlugin({    <span class="hljs-string"><span class="hljs-string">'base-uri'</span></span>: <span class="hljs-string"><span class="hljs-string">'\'self\''</span></span>,    <span class="hljs-string"><span class="hljs-string">'object-src'</span></span>: <span class="hljs-string"><span class="hljs-string">'\'none\''</span></span>,    <span class="hljs-string"><span class="hljs-string">'script-src'</span></span>: [<span class="hljs-string"><span class="hljs-string">'\'self\''</span></span>, <span class="hljs-string"><span class="hljs-string">'\'unsafe-eval\''</span></span>, <span class="hljs-string"><span class="hljs-string">'\'nonce-'</span></span> + sha256Str + <span class="hljs-string"><span class="hljs-string">'\''</span></span>],    <span class="hljs-string"><span class="hljs-string">'style-src'</span></span>: [<span class="hljs-string"><span class="hljs-string">'\'unsafe-inline\''</span></span>, <span class="hljs-string"><span class="hljs-string">'\'self\''</span></span>] }, {    <span class="hljs-attr"><span class="hljs-attr">devAllowUnsafe</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,    <span class="hljs-attr"><span class="hljs-attr">enabled</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,    <span class="hljs-attr"><span class="hljs-attr">hashingMethod</span></span>: <span class="hljs-string"><span class="hljs-string">'sha256'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SriPlugin({    <span class="hljs-attr"><span class="hljs-attr">hashFuncNames</span></span>: [<span class="hljs-string"><span class="hljs-string">'sha256'</span></span>, <span class="hljs-string"><span class="hljs-string">'sha384'</span></span>],    <span class="hljs-attr"><span class="hljs-attr">enabled</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }), [‚Ä¶]</code> </pre><br><p>  Luego, durante el ensamblaje, la <code>&lt;hed&gt;</code> mostrar√° la <code>&lt;hed&gt;</code> <code>http-equiv=content-security-policy</code> .  Las directivas se escribir√°n en el atributo de <code>content</code> , que dice en qu√© scripts y recursos se puede confiar. </p><br><p>  La directiva <code>base-uri</code> muestra qu√© URL base se usa para cargar scripts, CSS, im√°genes y m√°s. </p><br><p>  Los objetos generalmente no se cargan, por lo tanto, <code>none</code> configure <code>none</code> en la directiva <code>object-sr</code> c. </p><br><p>  La directiva <code>script-src</code> aplica a los scripts JS. </p><br><p>  No olvide registrar un atributo de tipo <code>nnce-&lt;hshVlue&gt;</code> cada vez.  Adem√°s, el hash debe calcularse utilizando el algoritmo SHA256 o SHA512. </p><br><p>  En cuanto a la directiva <code>style-src</code> , nuestro proyecto tiene una peculiaridad: utilizamos componentes con estilo para escribir CSS para cada componente y aislarlos unos de otros.  Y, por lo tanto, es necesario especificar que en us <code>style-src</code> <code>unsafe-inline</code> y <code>self</code> se usan en <code>style-src</code> , de lo contrario los componentes con estilo se caer√°n. </p><br><br><img src="https://habrastorage.org/webt/9x/di/ny/9xdinyh5msrmdszkkdayka1tqya.jpeg"><br><br><p>  La etiqueta del <code>script</code> se establecer√° autom√°ticamente en <code>nnce-&lt;hshVlue&gt;</code> , <code>integrity</code> y <code>cross-origin</code> .  Le dicen al navegador que los recursos se obtienen de fuentes confiables.  De lo contrario, si el navegador ve que el recurso no coincide con CSP o CORS, simplemente no cargar√° este script o archivo CSS, y escribir√° algo en la consola como: <i>"Presta atenci√≥n a este script, a esta l√≠nea donde inicializas el.</i>  <i>¬°Mira, tienes algo mal!</i>  . </p><br><p>  La documentaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">MDN</a> , OWASP y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">W3C</a> proporciona pautas para hacer cumplir las pol√≠ticas de CSP y CORS.  Adem√°s, cualquier herramienta de prueba de penetraci√≥n informar√° el cumplimiento de las normas CORS y CSP en el proyecto.  Cualquier marco o herramienta que realice pruebas autom√°ticas de un proyecto se√±alar√° fallas. </p><br><h2>  Autenticaci√≥n de usuario </h2><br><p>  Utilizamos OpenID Connect y el protocolo Kerberos.  Se utiliza un est√°ndar OpenID bastante com√∫n para autenticar usuarios externos. </p><br><p>  Kerberos es m√°s adecuado para la red interna, en el banco se usa para la autenticaci√≥n autom√°tica de los empleados.  Supongamos que hay una m√°quina local en la que trabaja un empleado de la organizaci√≥n.  Se autentic√≥ una vez en esta m√°quina y ya no necesitar√° ingresar nuevamente el nombre de usuario y la contrase√±a: el empleado inicia sesi√≥n en cualquier aplicaci√≥n y el sistema la autentica de inmediato.  Kerberos tiene configuraciones sutiles para la m√°quina local, y esto es dif√≠cil porque tiene que configurarse para <b>cada computadora y cada navegador.</b>  Si Internet Explorer normalmente muestra la configuraci√≥n predeterminada y Chrome muestra la configuraci√≥n de IE, entonces Firefox tiene que configurarla por separado.  Safari en MacOS X encontrar√° la configuraci√≥n en s√≠, pero para Safari en Windows deber√° especificarlos manualmente. </p><br><p>  Debe verificar su aplicaci√≥n en todos los navegadores, ya sea que funcione en todas partes como deber√≠a.  Por ejemplo, si trabajo en Windows, instalo Safari localmente y pruebo mi proyecto en √©l, y si trabajo en Mac, levanto Windows en una m√°quina virtual para ejecutar la aplicaci√≥n en las versiones correspondientes de los navegadores. </p><br><p>  La autenticaci√≥n se puede implementar en aplicaciones modernas utilizando Passport.js y paquetes de sesi√≥n r√°pida, as√≠ como el SDK Auth0. </p><br><p>  Si no puede desarrollar un servicio de autenticaci√≥n a trav√©s de OpenID Connect o cualquier otro protocolo, utilice una capa proxy, como Auth0 y similares, para que la autenticaci√≥n se realice a trav√©s de una empresa externa que se especialice en proporcionar a los usuarios acceso seguro a los recursos de Internet. </p><br><p>  Cuando actualizamos alguna aplicaci√≥n a Node.js, recomendamos utilizar los paquetes Passport.js, express-session, etc. en el servidor.  Para garantizar la seguridad del cliente, elevamos de forma independiente el componente para la autenticaci√≥n.  No olvide especificar el atributo de autocompletar en el formulario de autenticaci√≥n para excluir la finalizaci√≥n autom√°tica de los campos del formulario. </p><br><h2>  Hashing de contrase√±a </h2><br><p>  El sitio web de OWASP recomienda que no utilice mecanismos de hash de contrase√±a integrados en la base de datos.  Para esto, es mejor usar paquetes como Argon2, PBKDF2, ccrypt y bcrypt.  En mi pr√°ctica, uso Argon2: este es un contenedor para algoritmos GCC, PGP / GPG, etc., pero requiere que primero instale el paquete GCC.  Esquema de uso de Argon2: </p><br><br><pre> <code class="bash hljs">1.  GCC &gt;= 4.8 install $ brew install gcc</code> </pre> <br><pre> <code class="bash hljs">2.     - $ npm install -g node-gyp</code> </pre> <br><pre> <code class="bash hljs">3.   Argon2 $ npm install argon2</code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">4.</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ARGON <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'argon2'</span></span>; ARGON.generateSalt().then( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">salt: string</span></span></span><span class="hljs-function">) =&gt;</span></span> {  ARGON.hash(<span class="hljs-string"><span class="hljs-string">'some-user-password'</span></span>, salt)    .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">hash : string</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Successfully created Argon2 hash:'</span></span>, hash);       <span class="hljs-comment"><span class="hljs-comment">// </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> store the hash in the user database  }); }); argon2.verify( 'previously-created-argon-hash-here', 'some-user-password').then(() =&gt; {  console.log('Successful password supplied!');  // </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> log the user in }).catch(() =&gt; {  console.log('Invalid password supplied!'); });</span></span></code> </pre> <br><h2>  Ofuscaci√≥n </h2><br><p>  La ofuscaci√≥n le permite modificar el c√≥digo para que no se pueda analizar en componentes.  Despu√©s de todo, los atacantes, y no solo ellos, a menudo usan ingenier√≠a inversa: el programador toma un archivo JS y comienza a analizar las fuentes.  Por lo tanto, puede aprender los m√©todos utilizados o comprender el mecanismo de trabajo de un script en particular para implementar c√≥digo malicioso.  O utilice estos mecanismos para hackear una aplicaci√≥n web y realizar un ataque sigiloso. </p><br><p>  Los hackers no se meten en problemas.  Primero, realizan una exploraci√≥n del recurso, determinan las vulnerabilidades y atacan el vector.  Por ejemplo, manipulan datos o explotan vulnerabilidades contenidas en protocolos de transporte.  El vector de ataque puede estar dirigido a las vulnerabilidades de un sistema operativo en particular; hay muchas de ellas en cualquier sistema UNIX.  Pero las vulnerabilidades solo se pueden usar si el administrador tiene pol√≠ticas de seguridad mal configuradas, por ejemplo, establece incorrectamente las URL que salen. </p><br><p>  Entonces, para el reconocimiento, se usa ingenier√≠a inversa.  Es imposible excluirlo por completo, pero puede ser muy dif√≠cil.  Para esto, se utilizan varios ofuscadores, en mi caso, javascript-ofuscador.  En base a ello, se crea un complemento para webpack: webpack-ofuscador.  Tambi√©n para webpack creado ofuscator-loader.  Este paquete tiene configuraciones recomendadas para diferentes niveles de paranoico: bajo, medio y alto, se pueden encontrar en el sitio web oficial.  Si usa este ofuscador, recuerde que funciona muy mal con el mecanismo de minificaci√≥n integrado en el paquete web.  No use la minificaci√≥n y la ofuscaci√≥n juntas, de lo contrario, el ofuscador puede romper completamente el c√≥digo del script. </p><br><p>  Adem√°s, el ofuscador aumenta el volumen del script y su carga.  Aqu√≠ debe decidir por s√≠ mismo: o mejora la seguridad, la estabilidad y la confiabilidad, pero pierde en comodidad y velocidad;  o se preocupan por la velocidad, pero olv√≠date de la seguridad, de seguir cualquier gu√≠a </p><br><h2>  Registro de amenazas y monitoreo </h2><br><p>  Existe una amenaza tal como el uso de paquetes con vulnerabilidades ya conocidas.  Los analizadores de amenazas como npm audit, Snyk y LGTM ayudar√°n en tales situaciones.  Npm audit es una utilidad est√°ndar que est√° integrada en npm, pero debe llamar constantemente a este comando o crear muletas.  Por lo tanto, le aconsejo que use Snyk.  Este proyecto tiene su propia base de datos con vulnerabilidades.  Cuando comienza la prueba, Snyk accede a esta base de datos y carga confidencialmente el informe a su proyecto Snyk, al que no pueden acceder personas externas.  Es cierto, puede verificar su proyecto de forma gratuita solo 300 veces, y cuando verifica cada confirmaci√≥n previa, estos 300 intentos gratuitos terminan muy r√°pidamente.  Por lo tanto, es mejor ejecutar una prueba para los ganchos de pre-inserci√≥n o pre-fusi√≥n. </p><br><p>  El hombre es la vulnerabilidad m√°s importante de cualquier sistema.  Por lo tanto, aseg√∫rese de verificar el proyecto antes de comenzar a compilar la aplicaci√≥n, ya que incluso el c√≥digo fuente puede contener algo malicioso.  Es bueno cuando solo una persona tiene acceso al proyecto, pero generalmente trabajamos en equipo.  ¬øQu√© pasar√≠a si apareciera alg√∫n tipo de "simpatizante" que decidiera dejar la empresa "maravillosamente" y dejar una marca?  Esto tambi√©n debe tenerse en cuenta. </p><br><p>  Recomiendo usar el paquete Snyk desde el comienzo del proyecto e iniciar el escaneo desde la consola.  Aqu√≠ todo es simple: despu√©s de la instalaci√≥n, configure el inicio de sesi√≥n y la contrase√±a para la cuenta, y la prueba en s√≠ se puede realizar de esta manera: </p><br><ul><li>  Despu√©s de instalar la dependencia npm i snyk ‚ÄîD y especificar "snyk": verdadero en package.json, ejecute: </li></ul><br><pre> <code class="bash hljs">./node_modules/.bin/snyk wizard --dev</code> </pre> <br><ul><li>  En package.json agregue scripts y configuraciones: </li></ul><br><pre> <code class="javascript hljs">{ ... <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: {  ...  <span class="hljs-string"><span class="hljs-string">"test"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run test:snyk &amp;&amp; npm run test:jest"</span></span>,  ...  <span class="hljs-string"><span class="hljs-string">"test:snyk"</span></span>: <span class="hljs-string"><span class="hljs-string">"snyk test --dev"</span></span>,  ...  <span class="hljs-string"><span class="hljs-string">"prepare"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run prepare:snyk"</span></span>,  <span class="hljs-string"><span class="hljs-string">"prepare:snyk"</span></span>: <span class="hljs-string"><span class="hljs-string">"snyk protect"</span></span> }, <span class="hljs-string"><span class="hljs-string">"husky"</span></span>: {  <span class="hljs-string"><span class="hljs-string">"hooks"</span></span>: {   <span class="hljs-string"><span class="hljs-string">"commit-msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"commitlint -E HUSKY_GIT_PARAMS"</span></span>,   <span class="hljs-string"><span class="hljs-string">"pre-commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run test:snyk &amp;&amp; npm run lint &amp;&amp; npm run test:jest"</span></span>,   <span class="hljs-string"><span class="hljs-string">"pre-push"</span></span>: [    <span class="hljs-string"><span class="hljs-string">"npm run test:snyk"</span></span>,    <span class="hljs-string"><span class="hljs-string">"npm run lint"</span></span>,    <span class="hljs-string"><span class="hljs-string">"npm run test:jest"</span></span>,    <span class="hljs-string"><span class="hljs-string">"npm run build:production"</span></span>   ],   ...  } }, <span class="hljs-string"><span class="hljs-string">"snyk"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><p>  Arriba, miramos un cheque local para amenazas de seguridad.  Para verificar paquetes de amenazas conocidas, tambi√©n recomiendo usar LGTM.  Use este proyecto junto con GitHub o Bitbucket (hasta que lo haya probado, no era necesario), y el c√≥digo se verificar√° inmediatamente con cada pulsaci√≥n. </p><br><h2>  Monitoreo de la aplicaci√≥n </h2><br><p>  En el √°mbito de Front-end, las herramientas ya est√°n bien establecidas; las herramientas para todos los gustos est√°n disponibles para registrar y monitorear la parte del cliente.  Los m√°s famosos son Sentry, TrackJS e InsightOps.  Sentry Server se puede implementar en sus servidores f√≠sicos.  Por ejemplo, en nuestros dos proyectos utilizamos un servidor separado, que estaba completamente configurado para registrar el funcionamiento de las aplicaciones.  Fuimos a la URL y soltamos todos los registros all√≠.  Si se produce un error en la aplicaci√≥n, se envuelve en un bloque try catch y se env√≠a al servidor Sentry a trav√©s de los m√©todos del paquete raven.  Todo es simple y conveniente.  Si ve URL oscuras en Sentry que no registr√≥, si ve incrustaciones o mensajes oscuros, entonces est√°n tratando de hackearlo.  En mi pr√°ctica, esto sucedi√≥ regularmente.  Por ejemplo, uno de los proyectos, un servicio para evitar los bloqueadores de anuncios y los antivirus, intentaba constantemente contrarrestarlo, descifrarlo. </p><br><p>  Para el monitoreo, tambi√©n recomiendo usar Grafana.  Es importante considerar un sistema de criterios e indicadores que ser√°n monitoreados por el sistema.  Nos sintonizamos en el tr√°fico, en el retorno de la publicidad, en el grado de presentaci√≥n de anuncios, en la cantidad de pancartas que proven√≠an de Yandex, etc.  (proyectos en Rambler Group).  Necesit√°bamos entender c√≥mo funciona Yandex con nuestras solicitudes, porque es un servicio de terceros, lo que significa que debe ser monitoreado, porque si falla, todo el proyecto puede colapsar por completo. </p><br><p>  Si supervisa todas las comunicaciones con servicios de terceros, encontrar√° r√°pidamente cualquier error.  La historia es de mi pr√°ctica: vimos que desde Yandex, las respuestas publicitarias dejaron de llegar.  Result√≥ que ten√≠an fallas t√©cnicas y que toda la red de publicidad cay√≥ con fuerza.  Y no fue Yandex quien nos inform√≥ primero, pero los llamamos y les pedimos que vieran qu√© estaba pasando con sus servicios. </p><br><p>  ¬øCu√°l es la mejor manera de monitorear?  Tome una URL peque√±a, escriba los par√°metros GET y env√≠e una solicitud GET a esta URL.  En el lado del servidor, procese esta URL, escriba el registro en la base de datos y aumente la supervisi√≥n a Grafana.  Todo es simple </p><br><p>  Eso es todo  En el futuro intentar√© seguir escribiendo sobre el tema de proteger las aplicaciones web de las amenazas.  A todos los que han le√≠do hasta el final: deseo seguridad para sus proyectos))) </p><br><h3>  Lista de fuentes para leer sobre el tema: </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.owasp.org/index.php/Main_Page</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tproger.ru/translations/webapp-security</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">S. Hawks.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aplicaci√≥n de p√°gina √∫nica incluso m√°s r√°pida: seguridad</a> </p><br><p>  Seacord, Robert C. El est√°ndar de codificaci√≥n segura CERT C / Robert C. Seacord.  - 2008 </p><br><p>  Chetan Karande.  Asegurar aplicaciones de nodo - 2017 </p><br><p>  Steven Palmer.  Detecci√≥n, explotaci√≥n, prevenci√≥n de vulnerabilidades de aplicaciones web: 2011 </p><br><p>  Robert Shimonski, Sean-Philip Oriyano.  Ataques y defensa del lado del cliente - 2012 </p><br><p>  Marcus Pinto, Dafydd Stuttard.  El Manual del hacker de aplicaciones web: Encontrar y explotar fallas de seguridad, 2¬™ edici√≥n - 2011 </p><br><p>  Karl Duuna  Asegure su aplicaci√≥n web Node.js - 2015 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/445932/">https://habr.com/ru/post/445932/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445920/index.html">Live: c√≥mo frenar el desarrollo de iOS en equipos grandes</a></li>
<li><a href="../445922/index.html">¬øPor qu√© ver transmisiones en l√≠nea si puedes leer a Habr?</a></li>
<li><a href="../445924/index.html">TESOROS: cuando los relojes inteligentes se vuelven raros</a></li>
<li><a href="../445926/index.html">El Programa secreto de ovnis de EE. UU. Tambi√©n ha estado investigando agujeros de gusano y dimensiones adicionales.</a></li>
<li><a href="../445928/index.html">C√≥mo aumentamos la productividad de servicio de Tensorflow en un 70%</a></li>
<li><a href="../445936/index.html">Desarrollo de electr√≥nica. Sobre microcontroladores en los dedos</a></li>
<li><a href="../445940/index.html">AMA con Habr, v 7.0. Lim√≥n, Donuts y Noticias</a></li>
<li><a href="../445946/index.html">MWC: instrucciones de uso</a></li>
<li><a href="../445948/index.html">Herencia en C ++: principiante, intermedio, avanzado</a></li>
<li><a href="../445952/index.html">Un trill√≥n de solteros</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>