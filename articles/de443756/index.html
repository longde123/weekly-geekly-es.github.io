<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÜò üöö üêß Klassendesign: Was ist gut? ‚õ©Ô∏è üë®üèº‚Äçüè´ üèñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gepostet von Denis Tsyplakov , Solution Architect, DataArt 

 Im Laufe der Jahre habe ich festgestellt, dass Programmierer von Zeit zu Zeit dieselben ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Klassendesign: Was ist gut?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/443756/"><img src="https://habrastorage.org/webt/rg/pn/co/rgpncowcmrekbk3lgzzkg1qcl-4.jpeg"><br><br>  <i>Gepostet von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Denis Tsyplakov</a> , Solution Architect, DataArt</i> <br><br>  Im Laufe der Jahre habe ich festgestellt, dass Programmierer von Zeit zu Zeit dieselben Fehler wiederholen.  Leider helfen B√ºcher √ºber theoretische Aspekte der Entwicklung nicht, sie zu vermeiden: B√ºcher haben normalerweise keine konkreten praktischen Ratschl√§ge.  Und ich denke sogar warum ... <br><br>  Die erste Empfehlung, die mir zum Beispiel beim <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Protokollieren</a> oder beim Klassendesign einf√§llt, ist sehr einfach: "Machen Sie keinen v√∂lligen Schwachsinn."  Aber die Erfahrung zeigt, dass es definitiv nicht genug ist.  Nur die Gestaltung von Klassen in diesem Fall ist ein gutes Beispiel - ein ewiger Kopfschmerz, der sich aus der Tatsache ergibt, dass jeder dieses Thema auf seine eigene Weise betrachtet.  Aus diesem Grund habe ich beschlossen, grundlegende Tipps in einem Artikel zusammenzufassen, um eine Reihe typischer Probleme zu vermeiden und vor allem Ihre Kollegen vor ihnen zu bewahren.  Wenn Ihnen einige Prinzipien banal erscheinen (weil sie wirklich banal sind!) - nun, dann haben sie sich bereits in Ihrem Subkortex niedergelassen, und Ihr Team kann begl√ºckw√ºnscht werden. <br><br>  Ich werde eine Reservierung machen, in der Tat werden wir uns nur der Einfachheit halber auf den Unterricht konzentrieren.  Fast das Gleiche gilt f√ºr die Funktionen oder andere Bausteine ‚Äã‚Äãder Anwendung. <a name="habracut"></a><br>  Wenn die Anwendung funktioniert und die Aufgabe ausf√ºhrt, ist ihr Design gut.  Oder nicht?  H√§ngt von der objektiven Funktion der Anwendung ab;  Was f√ºr eine mobile Anwendung gut geeignet ist, die einmal auf der Messe gezeigt werden muss, ist m√∂glicherweise nicht f√ºr die Handelsplattform geeignet, die eine Bank seit Jahren entwickelt.  Bis zu einem gewissen Grad kann die Antwort auf diese Frage als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SOLID-</a> Prinzip bezeichnet werden, ist aber zu allgemein - ich m√∂chte einige spezifischere Anweisungen, auf die in einem Gespr√§ch mit Kollegen Bezug genommen werden kann. <br><br><h2>  Zielanwendung </h2><br>  Da es keine universelle Antwort geben kann, schlage ich vor, den Anwendungsbereich einzuschr√§nken.  Nehmen wir an, wir schreiben eine Standard-Gesch√§ftsanwendung, die Anforderungen √ºber HTTP oder eine andere Schnittstelle akzeptiert, eine Logik dar√ºber implementiert und dann entweder eine Anforderung an den n√§chsten Dienst in der Kette sendet oder die empfangenen Daten irgendwo speichert.  Nehmen wir der Einfachheit halber an, dass wir das Spring IoC Framework verwenden, da es mittlerweile weit verbreitet ist und der Rest der Frameworks ihm ziemlich √§hnlich ist.  Was k√∂nnen wir √ºber eine solche Anwendung sagen? <br><br><ul><li>  Die Zeit, die der Prozessor f√ºr die Verarbeitung einer Anforderung ben√∂tigt, ist wichtig, aber nicht kritisch - eine Erh√∂hung des Wetters um 0,1% wird dies nicht tun. </li><li>  Es stehen uns keine Terabyte Speicher zur Verf√ºgung. Wenn die Anwendung jedoch zus√§tzliche 50 bis 100 KByte ben√∂tigt, ist dies keine Katastrophe. </li><li> Je k√ºrzer die Startzeit, desto besser.  Es gibt jedoch keinen grundlegenden Unterschied zwischen 6 Sekunden und 5,9 Sekunden. </li></ul><br><h2>  Optimierungskriterien </h2><br>  Was ist uns in diesem Fall wichtig? <br><br>  Der Projektcode wird wahrscheinlich mehrere, m√∂glicherweise mehr als zehn Jahre lang vom Unternehmen verwendet. <br><br>  Der Code wird zu unterschiedlichen Zeiten von mehreren Entwicklern ge√§ndert, die sich nicht auskennen. <br>  Es ist m√∂glich, dass Entwickler in einigen Jahren die neue LibXYZ-Bibliothek oder das FrABC-Framework verwenden m√∂chten. <br><br>  Irgendwann kann ein Teil des Codes oder das gesamte Projekt mit der Codebasis eines anderen Projekts zusammengef√ºhrt werden. <br><br>  Inmitten von Managern wird allgemein angenommen, dass solche Probleme mithilfe von Dokumentation gel√∂st werden.  Die Dokumentation ist nat√ºrlich gut und n√ºtzlich, da sie zu Beginn der Arbeit an einem Projekt so gro√üartig ist, dass f√ºnf offene Tickets an Ihnen h√§ngen. Der Projektmanager fragt Sie, wie Sie Fortschritte gemacht haben, und Sie m√ºssen etwa 150 lesen (und sich daran erinnern) Textseiten, die weit entfernt von brillanten Schriftstellern geschrieben wurden.  Nat√ºrlich hatten Sie ein paar Tage oder sogar ein paar Wochen Zeit, um in das Projekt einzusteigen, aber wenn Sie einfache Arithmetik verwenden, einerseits 5.000.000 Byte Code, andererseits beispielsweise 50 Arbeitsstunden.  Es stellt sich heraus, dass im Durchschnitt 100 KB Code pro Stunde injiziert werden mussten.  Und hier h√§ngt alles sehr stark von der Qualit√§t des Codes ab.  Wenn es sauber ist: einfach zu montieren, gut strukturiert und vorhersehbar, scheint das Eingie√üen in ein Projekt ein merklich weniger schmerzhafter Prozess zu sein.  Nicht die letzte Rolle spielt dabei das Klassendesign.  Nicht der letzte. <br><br><h2>  Was wir vom Klassendesign wollen </h2><br>  Aus all dem k√∂nnen viele interessante Schlussfolgerungen √ºber die allgemeine Architektur, den Technologie-Stack, den Entwicklungsprozess usw. gezogen werden. Aber von Anfang an haben wir uns entschlossen, √ºber Klassendesign zu sprechen. Lassen Sie uns sehen, welche n√ºtzlichen Dinge wir aus dem lernen k√∂nnen, was zuvor dazu gesagt wurde. <br><br><ul><li>  Ich m√∂chte, dass ein Entwickler, der mit dem Anwendungscode nicht gr√ºndlich vertraut ist, verstehen kann, was diese Klasse tut, wenn er sich eine Klasse ansieht.  Und umgekehrt - wenn ich eine funktionale oder nicht funktionale Anforderung betrachte, k√∂nnte ich schnell erraten, wo sich die Anwendung in den daf√ºr verantwortlichen Klassen befindet.  Nun, es ist w√ºnschenswert, dass die Implementierung der Anforderungen nicht √ºber die gesamte Anwendung verteilt ist, sondern sich auf eine Klasse oder eine kompakte Gruppe von Klassen konzentriert.  Lassen Sie mich anhand eines Beispiels erkl√§ren, welche Art von Antimuster ich meine.  Angenommen, wir m√ºssen √ºberpr√ºfen, ob 10 Anforderungen eines bestimmten Typs nur von Benutzern ausgef√ºhrt werden k√∂nnen, die mehr als 20 Punkte in ihrem Konto haben (unabh√§ngig davon, was dies bedeutet).  Eine schlechte M√∂glichkeit, eine solche Anforderung zu implementieren, besteht darin, zu Beginn jeder Anforderung eine Pr√ºfung einzuf√ºgen.  Dann wird die Logik auf 10 Methoden in verschiedenen Controllern verteilt.  Eine gute M√∂glichkeit besteht darin, einen Filter oder WebRequestInterceptor zu erstellen und alles an einem Ort zu √ºberpr√ºfen. </li><li>  Ich m√∂chte, dass die √Ñnderungen in einer Klasse, die sich nicht auf den Klassenvertrag auswirken, sich nicht auf andere Klassen auswirken (zumindest seien wir realistisch!).  Mit anderen Worten, ich m√∂chte die Implementierung eines Klassenvertrags zusammenfassen. </li><li>  Ich m√∂chte, dass es m√∂glich ist, beim √Ñndern des Klassenvertrags durch die Anrufkette zu gehen und Verwendungen zu finden und die Klassen zu finden, die von dieser √Ñnderung betroffen sind.  Das hei√üt, ich m√∂chte, dass Klassen keine indirekten Abh√§ngigkeiten haben. </li><li>  Wenn m√∂glich, w√ºrde ich gerne sehen, dass Anforderungsverarbeitungsprozesse, die aus mehreren einstufigen Schritten bestehen, nicht durch den Code mehrerer Klassen verschmiert werden, sondern auf derselben Ebene beschrieben werden.  Es ist sehr gut, wenn der Code, der einen solchen Verarbeitungsprozess beschreibt, auf einen Bildschirm innerhalb einer Methode mit einem eindeutigen Namen passt.  Zum Beispiel m√ºssen wir alle W√∂rter in einer Zeile finden, f√ºr jedes Wort einen Drittanbieter anrufen, eine Beschreibung des Wortes abrufen, die Beschreibung formatieren und die Ergebnisse in der Datenbank speichern.  Dies ist eine Abfolge von Aktionen in 4 Schritten.  Es ist sehr praktisch, den Code zu verstehen und seine Logik zu √§ndern, wenn es eine Methode gibt, bei der diese Schritte nacheinander ausgef√ºhrt werden. </li><li>  Ich m√∂chte wirklich, dass die gleichen Dinge im Code auf die gleiche Weise implementiert werden.  Wenn wir beispielsweise sofort vom Controller aus auf die Datenbank zugreifen, ist es besser, dies √ºberall zu tun (obwohl ich ein solches Design nicht als bew√§hrte Methode bezeichnen w√ºrde).  Und wenn wir bereits die Ebenen der Services und Repositorys eingegeben haben, ist es besser, die Datenbank nicht direkt vom Controller aus zu kontaktieren. </li><li>  Ich m√∂chte, dass die Anzahl der Klassen / Schnittstellen, die nicht direkt f√ºr funktionale und nicht funktionale Anforderungen verantwortlich sind, nicht sehr gro√ü ist.  Die Arbeit mit einem Projekt, in dem es f√ºr jede Klasse zwei Schnittstellen mit Logik gibt, eine komplexe Hierarchie der Vererbung von f√ºnf Klassen, einer Klassenfabrik und einer abstrakten Klassenfabrik, ist ziemlich schwierig. </li></ul><br><h2>  Praktische Empfehlungen </h2><br>  Nachdem wir W√ºnsche formuliert haben, k√∂nnen wir spezifische Schritte skizzieren, mit denen wir unsere Ziele erreichen k√∂nnen. <br><br><h3>  Statische Methoden </h3><br>  Zum Aufw√§rmen beginne ich mit einer relativ einfachen Regel.  Sie sollten keine statischen Methoden erstellen, es sei denn, sie sind f√ºr den Betrieb einer der verwendeten Bibliotheken erforderlich (z. B. m√ºssen Sie einen Serializer f√ºr einen Datentyp erstellen). <br><br>  Grunds√§tzlich ist die Verwendung statischer Methoden nichts Falsches.  Wenn das Verhalten einer Methode vollst√§ndig von ihren Parametern abh√§ngt, warum nicht wirklich statisch machen?  Sie m√ºssen jedoch ber√ºcksichtigen, dass wir Spring IoC verwenden, mit dem die Komponenten unserer Anwendung gebunden werden.  Spring IoC befasst sich mit den Konzepten der Bohnen und ihrem Umfang.  Dieser Ansatz kann mit statischen Methoden gemischt werden, die in Klassen gruppiert sind. Es kann jedoch sehr schwierig sein, eine solche Anwendung zu verstehen und sogar etwas darin zu √§ndern (wenn Sie beispielsweise einen globalen Parameter an eine Methode oder Klasse √ºbergeben m√ºssen). <br><br>  Gleichzeitig bieten statische Methoden im Vergleich zu IoC-Bins einen sehr unbedeutenden Vorteil in der Geschwindigkeit des Methodenaufrufs.  Und damit enden vielleicht die Vorteile. <br><br>  Wenn Sie keine Gesch√§ftsfunktion erstellen, die eine gro√üe Anzahl ultraschneller Aufrufe zwischen verschiedenen Klassen erfordert, ist es besser, keine statischen Methoden zu verwenden. <br><br>  Hier kann der Leser fragen: "Aber was ist mit den Klassen StringUtils und IOUtils?"  In der Java-Welt hat sich in der Tat eine Tradition entwickelt: Hilfsfunktionen f√ºr die Arbeit mit Strings und Input-Output-Streams in statische Methoden zu integrieren und unter dem Dach von SomethingUtils-Klassen zu sammeln.  Aber diese Tradition scheint mir eher moosig.  Wenn Sie es befolgen, wird nat√ºrlich kein gro√üer Schaden erwartet - alle Java-Programmierer sind daran gew√∂hnt.  Aber eine solche rituelle Handlung hat keinen Sinn.  Einerseits, warum nicht die StringUtils-Bean machen, andererseits, wenn Sie die Bean und alle Hilfsmethoden nicht statisch machen, lassen Sie uns bereits die statischen Dachklassen StockTradingUtils und BlockChainUtils machen.  Es ist schwierig, Logik in statische Methoden einzuf√ºgen, einen Rand zu zeichnen und anzuhalten.  Ich rate Ihnen, nicht zu beginnen. <br><br>  Vergessen Sie nicht, dass mit Java 11 viele der Hilfsmethoden, die die Entwickler jahrzehntelang von Projekt zu Projekt gef√ºhrt hatten, entweder Teil der Standardbibliothek wurden oder beispielsweise in Google Guava zu Bibliotheken zusammengef√ºhrt wurden. <br><br><h3>  Atomic, kompakter Klassenvertrag </h3><br>  Es gibt eine einfache Regel, die f√ºr die Entwicklung eines Softwaresystems gilt.  Wenn Sie sich eine Klasse ansehen, sollten Sie in der Lage sein, schnell und kompakt zu erkl√§ren, was diese Klasse tut, ohne auf lange Ausgrabungen zur√ºckgreifen zu m√ºssen.  Wenn es unm√∂glich ist, die Erkl√§rung in einen Absatz einzuf√ºgen (es ist jedoch nicht notwendig, in einem Satz ausgedr√ºckt), k√∂nnte es sich lohnen, √ºber diese Klasse nachzudenken und sie in mehrere Atomklassen zu unterteilen.  Zum Beispiel die Klasse "Sucht nach Textdateien auf einer Festplatte und z√§hlt die Anzahl der Buchstaben Z in jeder von ihnen" - ein guter Kandidat f√ºr die Zerlegung "sucht auf einer Festplatte" + "z√§hlt die Anzahl der Buchstaben". <br><br>  Machen Sie andererseits keine zu kleinen Klassen, von denen jede f√ºr eine Aktion ausgelegt ist.  Aber wie gro√ü sollte die Klasse dann sein?  Die Grundregeln lauten wie folgt: <br><br><ul><li>  Idealerweise, wenn der Klassenvertrag mit der Beschreibung der Gesch√§ftsfunktion (oder Unterfunktion, je nachdem, wie die Anforderungen angeordnet sind) √ºbereinstimmt.  Dies ist nicht immer m√∂glich: Wenn der Versuch, diese Regel einzuhalten, zur Erstellung eines umst√§ndlichen, nicht offensichtlichen Codes f√ºhrt, ist es besser, die Klasse in kleinere Teile zu unterteilen. </li><li>  Eine gute Messgr√∂√üe f√ºr die Beurteilung der Qualit√§t eines Klassenvertrags ist das Verh√§ltnis seiner intrinsischen Komplexit√§t zur Komplexit√§t des Vertrags.  Zum Beispiel kann ein sehr guter (wenn auch fantastischer) Klassenvertrag folgenderma√üen aussehen: ‚ÄûDie Klasse hat eine Methode, die am Eingang eine Zeile mit einer Beschreibung des Themas in russischer Sprache erh√§lt und als Ergebnis eine Qualit√§tsgeschichte oder sogar eine Geschichte zu einem bestimmten Thema verfasst.‚Äú  Hier ist der Vertrag einfach und allgemein verst√§ndlich.  Die Implementierung ist √§u√üerst komplex, aber die Komplexit√§t ist in der Klasse verborgen. </li></ul><br>  Warum ist diese Regel wichtig? <br><br><ul><li>  Erstens ist die F√§higkeit, sich selbst klar zu erkl√§ren, was jede der Klassen tut, immer n√ºtzlich.  Leider kann dies bei weitem nicht jeder Projektentwickler tun.  Man kann oft so etwas h√∂ren wie: ‚ÄûNun, das ist so ein Wrapper √ºber die Path-Klasse, die wir irgendwie gemacht haben und manchmal anstelle von Path verwenden.  Sie hat auch eine Methode, die alle File.separator-Pfade verdoppeln kann. Wir ben√∂tigen diese Methode, um Berichte in der Cloud zu speichern, und aus irgendeinem Grund ist sie in der Path-Klasse gelandet. " </li><li>  Das menschliche Gehirn kann gleichzeitig mit nicht mehr als f√ºnf bis zehn Objekten arbeiten.  Die meisten Menschen haben nicht mehr als sieben.  Wenn ein Entwickler mit mehr als sieben Objekten arbeiten muss, um ein Problem zu l√∂sen, wird er entweder etwas √ºbersehen oder gezwungen sein, mehrere Objekte unter einem logischen ‚ÄûDach‚Äú zu packen.  Und wenn Sie es noch packen m√ºssen, warum tun Sie es nicht sofort bewusst und geben Sie diesem Regenschirm einen aussagekr√§ftigen Namen und einen klaren Vertrag. </li></ul><br>  Wie kann man √ºberpr√ºfen, ob alles granular genug ist?  Bitten Sie einen Kollegen, Ihnen 5 (f√ºnf) Minuten Zeit zu geben.  Nehmen Sie den Teil der Anwendung, an dem Sie gerade arbeiten.  Erkl√§ren Sie f√ºr jede Klasse einem Kollegen, was genau diese Klasse tut.  Wenn Sie nicht in 5 Minuten passen oder ein Kollege nicht verstehen kann, warum diese oder jene Klasse ben√∂tigt wird, sollten Sie vielleicht etwas √§ndern.  Nun, oder nicht, um das Experiment mit einem anderen Kollegen zu √§ndern und erneut durchzuf√ºhren. <br><br><h3>  Klassenabh√§ngigkeiten </h3><br>  Angenommen, wir m√ºssen verkn√ºpfte Textabschnitte mit einer L√§nge von mehr als 100 Byte f√ºr eine in ein ZIP-Archiv gepackte PDF-Datei ausw√§hlen und in der Datenbank speichern.  Ein beliebtes Antimuster sieht in solchen F√§llen folgenderma√üen aus: <br><br><ul><li>  Es gibt eine Klasse, die ein ZIP-Archiv √∂ffnet, darin nach einer PDF-Datei sucht und diese als InputStream zur√ºckgibt. </li><li>  Diese Klasse enth√§lt einen Link zu einer Klasse, die in PDF-Textabschnitten sucht. </li><li>  Die Klasse, die mit PDF arbeitet, hat wiederum einen Link zu der Klasse, die Daten in der Datenbank speichert. </li></ul><br>  Einerseits sieht alles logisch aus: empfangene Daten, die direkt als n√§chste Klasse in der Kette bezeichnet werden.  Gleichzeitig mischen sich die Vertr√§ge der Klasse an der Spitze der Kette in die Vertr√§ge und Abh√§ngigkeiten aller Klassen, die in der Kette dahinter stehen.  Es ist viel korrekter, diese Klassen atomar und unabh√§ngig voneinander zu machen und eine weitere Klasse zu erstellen, die die Verarbeitungslogik tats√§chlich implementiert, indem diese drei Klassen miteinander verbunden werden. <br><br>  <b>Wie man es nicht macht:</b> <br><br><img src="https://habrastorage.org/webt/aj/tc/dm/ajtcdmr07qxyy_6wao0mfffczkq.png"><br><br>  Was ist hier falsch?  Die Klasse, die mit ZIP-Dateien arbeitet, √ºbergibt Daten an die Klasse, die das PDF verarbeitet, und die Daten wiederum an die Klasse, die mit der Datenbank arbeitet.  Dies bedeutet, dass die Klasse, die mit ZIP arbeitet, aus irgendeinem Grund von den Klassen abh√§ngt, die mit der Datenbank arbeiten.  Au√üerdem ist die Verarbeitungslogik auf drei Klassen verteilt, und um sie zu verstehen, m√ºssen wir alle drei Klassen durchgehen.  Was ist, wenn Sie Textabschnitte aus PDF ben√∂tigen, um √ºber einen REST-Aufruf an einen Drittanbieter weitergeleitet zu werden?  Sie m√ºssen die Klasse √§ndern, die mit PDF funktioniert, und sie auch mit REST zeichnen. <br><br>  <b>Wie es geht:</b> <br><br><img src="https://habrastorage.org/webt/lu/1k/1f/lu1k1fpwvjc8w660lk9ww295p8s.png"><br><br>  Hier haben wir vier Klassen: <br><br><ul><li>  Eine Klasse, die nur mit einem ZIP-Archiv funktioniert und eine Liste von PDF-Dateien zur√ºckgibt (man kann argumentieren - das Zur√ºckgeben von Dateien ist schlecht - sie sind gro√ü und brechen die Anwendung. Aber lassen Sie uns das Wort "return" in diesem Fall im weitesten Sinne lesen. Zum Beispiel gibt es Stream von InputStream zur√ºck ) </li><li>  Die zweite Klasse ist f√ºr die Arbeit mit PDF verantwortlich. </li><li>  Die dritte Klasse wei√ü nichts und kann nichts anderes tun, als Abs√§tze in der Datenbank zu speichern. </li><li>  Und die vierte Klasse, die buchst√§blich aus mehreren Codezeilen besteht, enth√§lt die gesamte Gesch√§ftslogik, die auf einen Bildschirm passt. </li></ul><br>  Ich betone noch einmal, dass es 2019 in Java mindestens zwei gute (und etwas weniger) gibt <br>  gute) M√∂glichkeiten, keine Dateien zu √ºbertragen und eine vollst√§ndige Liste aller Abs√§tze als Objekte im Speicher.  Das: <br><br><ol><li>  Java Stream API </li><li>  R√ºckrufe  Das hei√üt, eine Klasse mit einer Gesch√§ftsfunktion √ºbertr√§gt Daten nicht direkt, sondern sagt ZIP Extractor: Hier ist ein R√ºckruf f√ºr Sie, suchen Sie nach PDF-Dateien in einer ZIP-Datei, erstellen Sie einen InputStream f√ºr jede Datei und rufen Sie den √ºbertragenen R√ºckruf damit auf. </li></ol><br><h3>  Implizites Verhalten </h3><br>  Wenn wir nicht versuchen, ein v√∂llig neues Problem zu l√∂sen, das zuvor von niemandem gel√∂st wurde, sondern etwas tun, das andere Entwickler bereits mehrere hundert (oder hunderttausende) Mal getan haben, haben alle Teammitglieder einige Erwartungen hinsichtlich der zyklomatischen Komplexit√§t und Ressourcenintensit√§t der L√∂sung .  Wenn wir beispielsweise alle W√∂rter, die mit dem Buchstaben z beginnen, in einer Datei finden m√ºssen, ist dies ein sequentielles, einmaliges Lesen der Datei in Bl√∂cken von der Festplatte.  Das hei√üt, wenn Sie sich auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://gist.github.com/jboner/2841832</a> konzentrieren, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dauert ein</a> solcher Vorgang mehrere Mikrosekunden pro 1 MB, m√∂glicherweise mehrere zehn oder sogar hundert Mikrosekunden, je nach Programmierumgebung und Systemlast √ºberhaupt keine Sekunde.  Es werden mehrere zehn Kilobyte Speicher ben√∂tigt (wir lassen die Frage weg, was wir mit den Ergebnissen machen, dies ist das Anliegen einer anderen Klasse), und der Code wird h√∂chstwahrscheinlich etwa einen Bildschirm belegen.  Gleichzeitig erwarten wir, dass keine anderen Systemressourcen verwendet werden.  Das hei√üt, der Code erstellt keine Threads, schreibt keine Daten auf die Festplatte, sendet keine Pakete √ºber das Netzwerk und speichert keine Daten in der Datenbank. <br><br>  Dies ist die √ºbliche Erwartung eines Methodenaufrufs: <br><br><pre><code class="java hljs">zWordFinder.findZWords(inputStream). ...</code> </pre> <br>  Wenn der Code Ihrer Klasse diese Anforderungen aus einem vern√ºnftigen Grund nicht erf√ºllt, z. B. um ein Wort in z und nicht in z zu klassifizieren, m√ºssen Sie jedes Mal die REST-Methode aufrufen (ich wei√ü nicht, warum dies erforderlich sein k√∂nnte, aber stellen wir uns das vor). Es ist notwendig, sehr sorgf√§ltig in den Klassenvertrag zu schreiben, und es ist sehr gut, wenn der Name der Methode anzeigt, dass die Methode irgendwo ausgef√ºhrt wird, um sie zu konsultieren. <br><br>  Wenn Sie keinen vern√ºnftigen Grund f√ºr implizites Verhalten haben, schreiben Sie die Klasse neu. <br><br>  Wie kann man die Erwartungen an die Komplexit√§t und Ressourcenintensit√§t der Methode verstehen?  Sie m√ºssen auf eine dieser einfachen M√∂glichkeiten zur√ºckgreifen: <br><br><ol><li>  Gewinnen Sie mit Erfahrung einen ziemlich weiten Horizont. </li><li>  Fragen Sie einen Kollegen - das geht immer. </li><li>  Sprechen Sie vor Beginn der Entwicklung mit den Teammitgliedern √ºber den Implementierungsplan. </li><li>  Um sich die Frage zu stellen: "Aber verwende ich bei dieser Methode nicht zu viele redundante Ressourcen?"  Das reicht normalerweise aus. </li></ol><br>  Sie m√ºssen sich auch nicht auf die Optimierung einlassen - das Einsparen von 100 Byte bei Verwendung durch die Klasse 100.000 ist f√ºr die meisten Anwendungen nicht sehr sinnvoll. <br><br>  Diese Regel √∂ffnet ein Fenster in die Welt des Overengineering und verbirgt Antworten auf Fragen wie ‚ÄûWarum sollten Sie nicht einen Monat damit verbringen, 10 Byte Speicher in einer Anwendung zu sparen, die 10 GB ben√∂tigt, um zu funktionieren?‚Äú.  Aber ich werde dieses Thema hier nicht weiterentwickeln.  Sie verdient einen separaten Artikel. <br><br><h3>  Implizite Methodennamen </h3><br>  In der Java-Programmierung gibt es derzeit mehrere implizite Konventionen bez√ºglich Klassennamen und deren Verhalten.  Es gibt nicht viele von ihnen, aber es ist besser, sie nicht zu brechen.  Ich werde versuchen, diejenigen aufzulisten, die mir in den Sinn kommen: <br><br><ul><li>  Konstruktor - Erstellt eine Instanz der Klasse, kann einige ziemlich verzweigte Datenstrukturen erstellen, funktioniert jedoch nicht mit der Datenbank, schreibt nicht auf die Festplatte und sendet keine Daten √ºber das Netzwerk (ich sage, der integrierte Logger kann dies alles, aber dies ist eine andere Geschichte in jedem Fall liegt es am Gewissen des Protokollierungskonfigurators). </li><li>  Getter - getSomething () - gibt eine Art Speicherstruktur aus den Tiefen des Objekts zur√ºck.  Auch hier schreibt es nicht auf die Festplatte, f√ºhrt keine komplexen Berechnungen durch, sendet keine Daten √ºber das Netzwerk, funktioniert nicht mit der Datenbank (au√üer wenn dies ein verz√∂gertes ORM-Feld ist und dies nur einer der Gr√ºnde ist, warum verz√∂gerte Felder mit gro√üer Sorgfalt verwendet werden sollten). . </li><li>  Setter - setSomething (Something Something) - legt den Wert der Datenstruktur fest, f√ºhrt keine komplexen Berechnungen durch, sendet keine Daten √ºber das Netzwerk und funktioniert nicht mit der Datenbank.  In der Regel wird vom Setter nicht erwartet, dass er das Verhalten oder den Verbrauch wesentlicher Rechenressourcen impliziert. </li><li>  equals () und hashcode () - es wird √ºberhaupt nichts erwartet, au√üer einfachen Berechnungen und Vergleichen in einer Menge, die linear von der Gr√∂√üe der Datenstruktur abh√§ngt.  Das hei√üt, wenn wir Hashcode f√ºr ein Objekt aus drei primitiven Feldern aufrufen, wird erwartet, dass N * 3 einfache Rechenanweisungen ausgef√ºhrt werden. </li><li>  toSomething () - Es wird auch erwartet, dass diese Methode einen Datentyp in einen anderen konvertiert und f√ºr die Konvertierung nur eine Speichergr√∂√üe ben√∂tigt, die mit der Gr√∂√üe der Strukturen und der Prozessorzeit vergleichbar ist, die linear von der Gr√∂√üe der Strukturen abh√§ngt.  Hierbei ist zu beachten, dass die Typkonvertierung nicht immer linear erfolgen kann. Beispielsweise kann die Konvertierung eines Pixelbilds in ein SVG-Format eine nicht triviale Aktion sein. In diesem Fall ist es jedoch besser, die Methode anders zu benennen.  Zum Beispiel sieht der Name computeAndConvertToSVG ‚Äã‚Äã() etwas umst√§ndlich aus, deutet jedoch sofort darauf hin, dass einige wichtige Berechnungen im Inneren stattfinden. </li></ul><br>  Ich werde ein Beispiel geben.  Ich habe k√ºrzlich ein Anwendungsaudit durchgef√ºhrt.  Durch die Logik der Arbeit wei√ü ich, dass die Anwendung irgendwo im Code die RabbitMQ-Warteschlange abonniert.  Ich gehe den Code durch - ich kann diesen Ort nicht finden.  Ich bin direkt auf der Suche nach einem Appell an Kaninchen, ich fange an zu klettern, ich gehe zu dem Ort im Gesch√§ftsfluss, an dem das Abonnement tats√§chlich stattfindet - ich fange an zu schw√∂ren.  Wie es im Code aussieht: <br><br><ol><li>  Die Methode service.getQueueListener (tickerName) wird aufgerufen - das zur√ºckgegebene Ergebnis wird ignoriert.  Dies k√∂nnte eine Warnung sein, aber ein solcher Code, bei dem die Ergebnisse der Methode ignoriert werden, ist nicht der einzige in der Anwendung. </li><li>  Im Inneren wird tickerName auf null gepr√ºft und eine andere Methode getQueueListenerByName (tickerName) aufgerufen. </li><li>  Darin wird eine Instanz der QueueListener-Klasse mit dem Namen des Tickers aus dem Hash entnommen (falls dies nicht der Fall ist, wird sie erstellt), und die Methode getSubscription () wird darauf aufgerufen. </li><li>  Und jetzt, innerhalb der Methode getSubscription (), findet das Abonnement tats√§chlich statt.  Und es passiert irgendwo in der Mitte einer Methode von der Gr√∂√üe von drei Bildschirmen. </li></ol><br>  Ich werde es Ihnen ehrlich sagen - ohne die gesamte Kette zu durchlaufen und ohne ein aufmerksames Dutzend Code-Bildschirme zu lesen, war es unrealistisch zu erraten, wo sich das Abonnement befindet.  Wenn die Methode subscribeToQueueByTicker (tickerName) hei√üen w√ºrde, w√ºrde ich viel Zeit sparen. <br><br><h3>  Dienstprogrammklassen </h3><br>  Es gibt ein wundervolles Buch Design Patterns: Elements of Reusable Object-Oriented Software (1994), das oft als GOF (Gang of Four, nach Anzahl der Autoren) bezeichnet wird.  Der Vorteil dieses Buches besteht haupts√§chlich darin, dass Entwickler aus verschiedenen L√§ndern eine einzige Sprache zur Beschreibung von Klassenentwurfsmustern erhalten.  Anstelle von "Die Klasse existiert garantiert nur in einer Instanz und hat einen statischen Zugriffspunkt" k√∂nnen wir jetzt "Singleton" sagen.  Das gleiche Buch verursachte zerbrechlichen K√∂pfen sp√ºrbaren Schaden.  Dieser Schaden wird durch ein Zitat aus einem der Foren gut beschrieben. "Kollegen, ich muss einen Webshop erstellen und mir sagen, mit welchen Vorlagen ich beginnen soll."  Mit anderen Worten, einige Programmierer neigen dazu, Entwurfsmuster zu missbrauchen, und wo immer Sie mit einer Klasse umgehen k√∂nnen, erstellen sie manchmal f√ºnf oder sechs gleichzeitig - nur f√ºr den Fall, "f√ºr mehr Flexibilit√§t". <br><br>  Wie kann man entscheiden, ob man eine abstrakte Klassenfabrik (oder ein anderes Muster, das komplizierter als eine Schnittstelle ist) ben√∂tigt oder nicht?  Es gibt einige einfache √úberlegungen: <br><br><ol><li>  Wenn Sie im Fr√ºhjahr eine Bewerbung schreiben, werden 99% der Zeit nicht ben√∂tigt.  Der Fr√ºhling bietet Ihnen √ºbergeordnete Bausteine, verwenden Sie diese.  Das Maximum, das Sie m√∂glicherweise n√ºtzlich finden, ist eine abstrakte Klasse. </li><li>  Wenn Punkt 1 Ihnen immer noch keine klare Antwort gab, denken Sie daran, dass jede Vorlage +1000 Punkte f√ºr die Komplexit√§t der Anwendung betr√§gt.  Analysieren Sie sorgf√§ltig, ob die Vorteile der Verwendung der Vorlage den Schaden √ºberwiegen.  Denken Sie an eine Metapher und denken Sie daran, dass jedes Arzneimittel nicht nur heilt, sondern auch leicht schadet.  Trinken Sie nicht alle Pillen auf einmal. </li></ol><br><br>  Ein gutes Beispiel daf√ºr, wie Sie es nicht brauchen, finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br><h2>  Fazit </h2><br>  Zusammenfassend m√∂chte ich darauf hinweisen, dass ich die grundlegendsten Empfehlungen aufgelistet habe.  Ich w√ºrde sie nicht einmal in Form eines Artikels ausmachen - sie sind so offensichtlich.  Aber im letzten Jahr bin ich zu oft auf Anwendungen gesto√üen, bei denen viele dieser Empfehlungen verletzt wurden.  Schreiben wir einfachen Code, der leicht zu lesen und zu warten ist. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de443756/">https://habr.com/ru/post/de443756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de443744/index.html">Encyclopedia of Lighting von Naughty Dog</a></li>
<li><a href="../de443746/index.html">Spielemarkt, Trends und Vorhersagen - Gro√üartige Analysen von App Annie</a></li>
<li><a href="../de443748/index.html">Tesla Model Y Pr√§sentation - was Sie erwartet und wo Sie suchen m√ºssen</a></li>
<li><a href="../de443752/index.html">Kotlin als Zukunft der Android App-Entwicklung</a></li>
<li><a href="../de443754/index.html">Informationen zur Angemessenheit von Selenium WebDriverWait</a></li>
<li><a href="../de443758/index.html">Quick Draw Doodle Recognition: So machen Sie Freunde R, C ++ und Neuronale Gitter</a></li>
<li><a href="../de443764/index.html">Was der Designer geraucht hat: eine ungew√∂hnliche Waffe</a></li>
<li><a href="../de443766/index.html">Probieren Sie jetzt C ++ 20 Contract Programming aus</a></li>
<li><a href="../de443768/index.html">Monolith f√ºr Hunderte von Client-Versionen: Wie wir Tests schreiben und unterst√ºtzen</a></li>
<li><a href="../de443772/index.html">Antiquit√§ten: IBM ThinkPad T40, das erste drahtlose Ger√§t</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>