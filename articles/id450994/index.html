<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âš«ï¸ ğŸ›€ ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨ Citymobil - manual untuk meningkatkan ketersediaan di tengah pertumbuhan bisnis untuk startup. Bagian 5 â¡ï¸ ğŸ˜¶ ğŸ’¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ini adalah bagian terakhir dari seri yang menggambarkan bagaimana kami meningkatkan ketersediaan layanan kami di Citymobil (Anda dapat membaca bagian ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Citymobil - manual untuk meningkatkan ketersediaan di tengah pertumbuhan bisnis untuk startup. Bagian 5</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/450994/"><img src="https://habrastorage.org/getpro/habr/post_images/69d/ea9/db3/69dea9db332a69e8d7f992ab82102329.png"><br><br>  Ini adalah bagian terakhir dari seri yang menggambarkan bagaimana kami meningkatkan ketersediaan layanan kami di Citymobil (Anda dapat membaca bagian sebelumnya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> ).  Sekarang saya akan berbicara tentang satu jenis pemadaman lagi dan kesimpulan yang kami buat tentang mereka, bagaimana kami memodifikasi proses pengembangan, otomatisasi apa yang kami perkenalkan. <br><a name="habracut"></a><br><h2>  1. Rilis buruk: bug </h2><br>  Ini adalah jenis pemadaman dan insiden yang paling tidak menyenangkan.  Satu-satunya jenis yang tidak memiliki gejala yang terlihat selain keluhan pengguna akhir atau pengguna bisnis.  Itu sebabnya insiden seperti itu, terutama yang kecil, dapat tetap tidak diperhatikan dalam produksi untuk sementara waktu. <br><br>  Semua jenis pemadaman lainnya kurang lebih mirip dengan "Rilis buruk: 500 kesalahan server internal".  Satu-satunya hal adalah mereka tidak dipicu oleh rilis, melainkan beban kerja, operasi manual atau masalah layanan eksternal. <br><br>  Untuk menjelaskan metode mengatasi gangguan seperti ini, kita harus mengingat lelucon lama: <br><br><blockquote>  Seorang ahli matematika dan ahli fisika diberikan tugas yang sama: merebus air.  Mereka diberi beberapa alat bantu: kompor, ketel, keran dengan air, korek api.  Keduanya bergiliran mengisi ketel dengan air, menyalakan gas dan mulai memanaskan ketel.  Kemudian tugas disederhanakan: mereka diberi ketel, diisi dengan air dan kompor yang sudah menyala.  Tugasnya sama - merebus air.  Fisikawan meletakkan ketel di atas kompor.  Matematikawan mengosongkan ketel, mematikan gas dan berkata: "Masalahnya berkurang menjadi yang sudah dipecahkan."  Â© anekdotov.net </blockquote><br>  Jenis pemadaman ini harus dikurangi menjadi "Rilis buruk: 500 kesalahan server internal" di semua biaya.  Idealnya, bug harus dicatat dengan cara yang sama seperti 500 kesalahan.  Namun, tentu saja, Anda tidak dapat mencatat peristiwa bug karena jika Anda bisa, Anda tidak akan membuat bug sejak awal. <br><br>  Salah satu ide untuk melacak bug adalah mencari jejak di database.  Jejak ini memungkinkan kami untuk melihat bahwa ada bug dan mengirimkan peringatan.  Bagaimana kita bisa membantu ini?  Kami mulai menyelidiki setiap bug besar dan menghasilkan solusi: jenis pemantauan / peringatan SMS apa yang dapat dibuat untuk membuat bug ini langsung terungkap sebagai kesalahan 500?  Berikut ini beberapa contohnya. <br><br><h4>  1.1.  Contoh gangguan yang disebabkan oleh bug </h4><br>  Tiba-tiba kami menerima sejumlah besar keluhan dari pengguna kami: pesanan yang dibayarkan melalui Apple Pay tidak dapat ditutup.  Kami memulai penyelidikan kami;  masalahnya direproduksi di lingkungan uji.  Akar penyebabnya ditemukan: kami memperbarui format tanggal kedaluwarsa untuk kartu kredit karena diubah oleh layanan pemrosesan pembayaran, tetapi kami tidak melakukannya dengan benar untuk pembayaran melalui Apple Pay;  karena itu, semua pembayaran Apple Pay ditolak.  Kami memperbaikinya segera setelah kami tahu tentang masalah tersebut, menyebarkannya dan masalahnya hilang.  Namun, masalah ini hidup selama 45 menit. <br><br>  Setelah masalah ini, kami memantau sejumlah pembayaran Apple Pay yang gagal dan membuat SMS dan peringatan IVR dengan beberapa ambang batas yang tidak nol (karena beberapa pembayaran yang gagal dianggap normal oleh layanan; misalnya, jika klien tidak memiliki uang di akunnya) atau kartu kreditnya diblokir).  Sejak saat itu, kami segera mencari tahu tentang penyeberangan ambang batas.  Jika rilis baru membawa masalah ke dalam pemrosesan Apple Pay, kami akan segera mengetahui hal itu karena memantau dan mengembalikannya dalam 3 menit (proses rollback manual dijelaskan dalam salah satu artikel sebelumnya).  Jadi dulu 45 menit downtime parsial, dan sekarang 3 menit.  Untung! <br><br><h4>  1.2.  Contoh lainnya </h4><br>  Bug dalam daftar pesanan.  Kami menerapkan optimalisasi daftar pesanan di aplikasi driver.  Kode memiliki bug.  Akibatnya, terkadang pengemudi melihat daftar pesanan kosong.  Kami mengetahui tentang bug ini secara kebetulan: salah satu insinyur sedang bermain dengan aplikasi driver dan menemukan masalah ini.  Kami dengan cepat mengidentifikasi rilis buruk dan segera diluncurkan kembali.  Akibatnya, kami membuat grafik jumlah pesanan rata-rata dalam daftar berdasarkan info dari basis data.  Kemudian kami melihat grafik ini secara retrospektif dari bulan ke bulan.  Kami melihat jurang baru-baru ini yang disebabkan oleh bug itu dan membuat peringatan SMS melalui kueri SQL.  Itu membangun grafik ini ketika jumlah rata-rata pesanan dalam daftar melewati ambang yang lebih rendah yang ditetapkan berdasarkan minimum untuk bulan berjalan. <br><br>  Bug dalam cachback.  Kami mengubah logika pemberian uang kembali pengguna.  Antara lain, kami mengirimkannya ke grup klien yang salah.  Masalahnya telah diperbaiki, grafik uang kembali yang diberikan telah dibuat;  kami melihat peningkatan drastis di dalamnya dan juga memperhatikan bahwa ini belum pernah terjadi sebelumnya, dan menciptakan peringatan SMS dengan ambang batas yang sesuai. <br><br>  Sekali lagi bug dalam pembayaran.  Rilis baru menyebabkan bug - butuh selamanya untuk melakukan pemesanan, pembayaran kartu tidak bekerja, pengemudi meminta klien untuk membayar tunai.  Kami menemukan masalah melalui keluhan call center.  Kami mengerahkan perbaikan dan membuat peringatan untuk waktu penutupan untuk pesanan dengan ambang batas, ditemukan melalui analisis grafik historis. <br><br>  Seperti yang Anda tahu, kami menggunakan pendekatan yang sama untuk menangani semua insiden semacam ini: <br><br><ol><li>  Kami mencari tahu tentang masalah. </li><li>  Kami memecahkan masalah itu dan menemukan bug dalam kode. </li><li>  Kami memperbaikinya. </li><li>  Kami mencari jejak di basis data (juga jejak dapat ditemukan di log server web atau Kibana) yang dapat menunjukkan tanda-tanda masalah. </li><li>  Kami membuat grafik jejak ini. </li><li>  Kami kembali ke masa lalu dan melihat naik turunnya grafik. </li><li>  Kami memilih ambang batas yang baik untuk lansiran. </li><li>  Ketika masalah muncul lagi, kami segera mengetahuinya melalui peringatan SMS. </li></ol><br>  Apa yang baik tentang metode ini: satu grafik dan satu lansiran menyelesaikan seluruh kelompok besar masalah (contoh kelompok bermasalah: pesanan tidak dapat ditutup, bonus tambahan, pembayaran Apple Pay tidak melalui, dll.) <br><br>  Akhirnya, kami menerapkan peringatan dan pemantauan untuk setiap bug besar sebagai bagian dari budaya rekayasa kami.  Agar tidak kehilangan budaya ini, kami memformalkannya sedikit.  Kami mulai memaksa diri untuk membuat laporan untuk setiap pemadaman.  Laporan ini adalah formulir yang diisi dengan jawaban untuk pertanyaan-pertanyaan berikut: akar penyebab, bagaimana kami memperbaikinya, dampak bisnis, takeaways.  Semua bidang wajib diisi.  Jadi, kami harus menyimpulkan apakah kami menyukainya atau tidak.  Perubahan proses ini jelas ditulis ke dalam Do's and Don't's. <br><br><h2>  2. Kotan </h2><br>  Tingkat otomatisasi proses kami meningkat, dan kami memutuskan bahwa sudah waktunya untuk membuat antarmuka web yang akan menunjukkan status proses pengembangan saat ini.  Kami menyebut antarmuka web ini "Kotan" (dari kata Rusia "roll", "to roll out" :-) <br><br>  "Kotan" memiliki fungsi berikut: <br><br>  <b>Daftar insiden</b> .  Ini berisi daftar semua yang dipicu dalam peringatan sebelumnya - yang mana membutuhkan reaksi manusia segera.  Untuk setiap kejadian, kami mendaftarkan waktu dimulainya, waktu berakhir (jika sudah selesai), tautan ke laporan (jika insiden selesai dan ada laporan), dan tautan panduan lansiran untuk melihat jenis lansiran kejadian ini milik. <br><br>  <b>Direktori peringatan</b> .  Ini sebenarnya daftar semua peringatan.  Untuk membuatnya lebih jelas, perbedaan antara peringatan dan insiden adalah sebagai berikut: lansiran seperti kelas, sedangkan insiden - adalah objek.  Misalnya, "jumlah 500 kesalahan lebih besar dari 1" adalah peringatan.  Dan "jumlah 500 kesalahan lebih besar dari 1 dan mereka terjadi pada tanggal ini, saat ini, berlangsung selama ini" - adalah sebuah insiden.  Setiap peringatan ditambahkan ke sistem secara manual melalui proses yang dijelaskan di atas setelah beberapa masalah khusus yang belum pernah terdeteksi oleh sistem peringatan sebelum diselesaikan.  Pendekatan berulang seperti itu menjamin risiko peringatan positif palsu yang rendah (yang tidak memerlukan tindakan).  Direktori berisi riwayat laporan lengkap untuk setiap jenis lansiran;  yang membantu mendiagnosis masalah lebih cepat: Anda menerima peringatan, Anda pergi ke "Kotan", klik pada Direktori, periksa semua sejarah dan dapatkan ide tentang tempat menyelam.  Kunci untuk pemecahan masalah yang berhasil adalah memiliki semua informasi yang ada.  Tautan ke kode sumber lansiran (untuk mengetahui dengan pasti situasi apa yang disiagakan oleh lansiran ini).  Deskripsi tertulis tentang metode terbaik saat ini untuk memerangi peringatan ini. <br><br>  <b>Laporan</b>  Ini semua adalah laporan dalam sejarah.  Setiap laporan memiliki tautan untuk semua insiden yang terkait (kadang-kadang insiden datang dalam kelompok; akar penyebabnya sama, dan kami membuat satu laporan untuk seluruh kelompok), tanggal laporan ini ditulis, bendera konfirmasi solusi masalah, dan sebagian besar penting: penyebab utama, bagaimana hal itu diperbaiki, berdampak pada bisnis, takeaways. <br><br>  <b>Daftar takeaways</b> .  Setiap takeaway memiliki catatan yang menyatakan apakah itu telah dilaksanakan, implementasi masih akan datang, atau tidak diperlukan (dengan penjelasan mengapa tidak). <br><br><h2>  3. Apa yang berubah dalam proses pengembangan perangkat lunak? </h2><br>  Komponen penting dari peningkatan ketersediaan adalah proses pengembangan perangkat lunak.  Prosesnya terus berubah.  Tujuan dari perubahan tersebut adalah mengurangi peluang terjadinya insiden.  Keputusan untuk mengubah proses tidak harus dibuat secara abstrak, tetapi lebih didasarkan pada pengalaman, fakta dan angka.  Proses tidak boleh dibangun secara langsung ke bawah, tetapi dari bawah ke atas dengan semua anggota tim berpartisipasi aktif, karena banyak kepala seluruh tim lebih baik daripada satu kepala manajer.  Proses harus diikuti dan dipantau;  jika tidak, tidak masuk akal untuk memilikinya.  Anggota tim harus saling mengoreksi jika ada perbedaan: siapa lagi yang akan melakukannya untuk mereka?  Harus ada otomatisasi maksimum untuk menjaga fungsi-fungsi utama, karena manusia membuat kesalahan terus-menerus, terutama pada pekerjaan kreatif. <br><br>  Untuk memastikan bahwa setiap kejadian memiliki takeaways, kami telah melakukan hal berikut: <br><br><ul><li>  Setiap peringatan secara otomatis memblokir rilis. </li><li>  Saat kami menerima peringatan penutupan (pesan teks yang menyatakan bahwa insiden telah berakhir), kami tidak segera membebaskan rilisnya, tetapi kami ditawari untuk membuat laporan tentang kecelakaan. </li><li>  Laporan harus berisi informasi berikut: akar penyebab kecelakaan, cara memperbaikinya, dampak bisnis, takeaways. </li><li>  Laporan ini ditulis oleh tim yang mengacaukan kecelakaan.  Mereka yang dipersenjatai dengan informasi lengkap tentang kecelakaan itu. </li><li>  Rilis secara otomatis diblokir sampai laporan tersebut dibuat dan disetujui.  Itu memotivasi tim untuk cepat berkonsentrasi dan membuat laporan tepat setelah kecelakaan diperbaiki. </li><li>  Laporan harus disetujui oleh seseorang yang tidak ada di tim, untuk memastikan bahwa laporan tersebut berisi semua informasi yang diperlukan untuk memahaminya. </li></ul><br>  Dengan melakukan itu, kami, di satu sisi, mencapai disiplin diri dalam menyelamatkan setiap kejadian dalam sejarah, dan di sisi lain - memberikan kontrol otomatis.  Sekarang tidak mungkin untuk tidak menarik kesimpulan atau tidak menulis laporan. <br><br><h2>  4. Sebagai pengganti epilog </h2><br>  Sebagai pengganti epilog, izinkan saya dengan cepat merangkum apa yang kami ubah dalam proses pengembangan perangkat lunak untuk mengurangi sejumlah perjalanan yang hilang. <br><br><div class="scrollable-table"><table><tbody><tr><th>  Apa yang kita ubah? <br></th><th>  Mengapa kami mengubahnya? <br></th></tr><tr><td>  Kami mulai menyimpan log kecelakaan. <br></td><td>  Untuk memiliki takeaways dan mencegah kecelakaan di masa depan. <br></td></tr><tr><td>  Kami membuat post-mortem untuk setiap pemadaman besar (yang dengan banyak perjalanan hilang). <br></td><td>  Untuk mempelajari cara memecahkan masalah dengan cepat dan memperbaiki pemadaman di masa mendatang. <br></td></tr><tr><td>  Kami membuat file Do dan Dont. <br></td><td>  Untuk berbagi nugget kebijaksanaan dengan semua insinyur. <br></td></tr><tr><td>  Hanya satu rilis per lima menit. <br></td><td>  Untuk mengurangi durasi pemecahan masalah. <br></td></tr><tr><td>  Pertama, kami menyebarkan kode pada satu server web prioritas rendah dan hanya pada saat itu - pada semua yang lain. <br></td><td>  Untuk mengurangi dampak rilis yang buruk. <br></td></tr><tr><td>  Rollback rilis buruk otomatis. <br></td><td>  Untuk mengurangi dampak rilis yang buruk. <br></td></tr><tr><td>  Tidak ada penyebaran selama pemadaman. <br></td><td>  Untuk mempercepat pemecahan masalah. <br></td></tr><tr><td>  Kami menulis tentang rilis dan kecelakaan di obrolan grup. <br></td><td>  Untuk mempercepat pemecahan masalah. <br></td></tr><tr><td>  Kami memantau grafik selama 3 menit setelah setiap rilis. <br></td><td>  Untuk mempercepat pemecahan masalah. <br></td></tr><tr><td>  Peringatan SMS dan IVR tentang masalah. <br></td><td>  Untuk mempercepat pemecahan masalah. <br></td></tr><tr><td>  Setiap bug (terutama yang besar) diikuti dengan melakukan pemantauan dan peringatan. <br></td><td>  Untuk mempercepat pemecahan masalah situasi serupa di masa mendatang. <br></td></tr><tr><td>  Ulasan optimasi kode. <br></td><td>  Untuk mengurangi kemungkinan kecelakaan karena kelebihan basis data. <br></td></tr><tr><td>  Optimasi kode reguler (dengan MySQL slow.log sebagai input). <br></td><td>  Untuk mengurangi sejumlah kecelakaan karena "telur Paskah". <br></td></tr><tr><td>  Setiap kecelakaan pasti memiliki takeaway. <br></td><td>  Ini mengurangi kemungkinan kecelakaan semacam itu di masa depan. <br></td></tr><tr><td>  Setiap kecelakaan harus memiliki peringatan. <br></td><td>  Ini mengurangi durasi pemecahan masalah dan perbaikan untuk kecelakaan semacam itu di masa depan. <br></td></tr><tr><td>  Pemblokiran otomatis rilis baru setelah kecelakaan sebelum laporan ditulis dan disetujui. <br></td><td>  Ini meningkatkan kemungkinan memiliki takeaways yang tepat, sehingga mengurangi kemungkinan kecelakaan seperti itu di masa depan. <br></td></tr><tr><td>  "Kotan" - alat peningkatan layanan otomatis. <br></td><td>  Ini mengurangi durasi pemadaman;  mengurangi kemungkinan terjadinya pemadaman. <br></td></tr><tr><td>  Direktori insiden. <br></td><td>  Ini mengurangi durasi pemecahan masalah <br></td></tr></tbody></table></div><br>  Terima kasih sudah membaca sampai akhir.  Semoga sukses untuk bisnis Anda!  Saya harap Anda tidak kehilangan pesanan, transaksi, pembelian, perjalanan, dan apa pun yang penting bagi Anda! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id450994/">https://habr.com/ru/post/id450994/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id450984/index.html">Kami mengundang Anda ke acara UPD Broadcast Camunda BPM Raiffeisenbank</a></li>
<li><a href="../id450986/index.html">Nama panjang terlalu panjang</a></li>
<li><a href="../id450988/index.html">JavaScript Shortcuts: Panduan Dasar</a></li>
<li><a href="../id450990/index.html">Jembatan dari dunia .NET ke dunia JavaScript</a></li>
<li><a href="../id450992/index.html">Bagaimana cara mengunduh JDK 12? 7 penjelasan karakter</a></li>
<li><a href="../id450996/index.html">Kerangka kerja game: Tren JavaScript pada tahun 2019</a></li>
<li><a href="../id450998/index.html">Sejarah singkat tekstur 3D dalam game</a></li>
<li><a href="../id451002/index.html">Perakitan Komputer Kustom, Bagian 1</a></li>
<li><a href="../id451004/index.html">Technosphere. Kursus perkuliahan â€œProyek TI dan manajemen produkâ€</a></li>
<li><a href="../id451006/index.html">Intisari acara untuk profesional SDM di bidang TI untuk Mei 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>