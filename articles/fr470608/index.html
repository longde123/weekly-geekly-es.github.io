<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÉè üåÜ üöÜ Optimisation de l'interface utilisateur Unity üç™ üîù üò™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article traite de l'optimisation des √©l√©ments d'interface utilisateur des projets r√©alis√©s dans Unity. Sur la base d'informations issues de la doc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Optimisation de l'interface utilisateur Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/470608/"><p><img src="https://habrastorage.org/webt/zc/iw/5s/zciw5sbh_cn-pp5gmmxwu5rznm0.png" alt="image"></p><br><p>  Cet article traite de l'optimisation des √©l√©ments d'interface utilisateur des projets r√©alis√©s dans Unity.  Sur la base d'informations issues de la documentation officielle et de mon exp√©rience personnelle, j'ai essay√© d'expliquer clairement les principes de fonctionnement des √©l√©ments de l'interface utilisateur.  Vous trouverez √©galement ici des conseils pratiques qui vous aideront √† am√©liorer les performances de votre projet en ce qui concerne l'interface utilisateur. </p><a name="habracut"></a><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Terminologie</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Introduction</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rendu de l'interface utilisateur Unity</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Refonte de l'interface utilisateur</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Maillage</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conseils g√©n√©raux d'optimisation de l'interface utilisateur</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Travailler avec du texte et son optimisation</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Atlas de sprites</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R√©sumer les m√©thodes d'optimisation</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les sources</a> </li></ul><br><h3 id="anchorthermsanchorterminologiya"><a name="therms"></a>  Terminologie </h3><br><p> <strong>Les √©l√©ments d'interface utilisateur</strong> sont tous les √©l√©ments d'Unity li√©s √† la cr√©ation d'une interface utilisateur.  Cela inclut, par exemple: bouton, texte, image, menu d√©roulant, etc. <br>  <strong>Canvas (canvas)</strong> - l'√©l√©ment de base de l'interface utilisateur, qui est un conteneur pour le reste des √©l√©ments. <br>  <strong>Mesh</strong> - un ensemble de param√®tres d√©crivant un mod√®le 3D. <br>  <strong>Un quad</strong> est un maillage qui est un quadrilat√®re. <br>  <strong>Batching</strong> - combinaison de maillages d'objets en un seul grand maillage pour un rendu plus rapide. <br>  <strong>Draw-call</strong> - une commande pour dessiner du moteur vers l'API graphique (par exemple, OpenGL ou Direct3D). <br>  <strong>File d'attente transparente</strong> - une file d'attente pour le rendu d'objets transparents. <br>  <strong>Alpha blending</strong> (Alpha blending) - un algorithme pour m√©langer les pixels sur le canal alpha pour obtenir une image avec transparence. <br>  <strong>Atlas</strong> est un type de ressource qui combine plusieurs textures en une seule. </p><br><h3 id="anchorenteranchorvvodnaya"><a name="enter"></a>  Introduction </h3><br><p>  Dans l'optimisation de l'interface utilisateur, il n'y a pas de r√®gles universelles qui fonctionnent dans n'importe quelle situation.  Tout se r√©sume √† trouver un √©quilibre entre le co√ªt du traitement par lots et le nombre d'appels de tirage.  On peut distinguer quatre probl√®mes principaux: </p><br><ul><li>  Charge GPU trop √©lev√©e (surcharge sur le rendu); </li><li>  trop de charge CPU lors de la reconstruction du canevas; </li><li>  trop d'√©l√©ments changeants conduisant √† la reconstruction de la toile; </li><li>  La charge du processeur est trop importante pour la g√©n√©ration de maillage (g√©n√©ralement associ√©e au texte). </li></ul><br><h3 id="anchordrawanchorotrisovka-unity-ui"><a name="draw"></a>  Rendu de l'interface utilisateur Unity </h3><br><p>  L'√©l√©ment de base de l'interface utilisateur Unity est le canevas.  Il est responsable de la g√©n√©ration, du tri et du rendu des maillages des √©l√©ments d'interface enfant.  Tous les √©l√©ments de l'interface utilisateur doivent √™tre des enfants de n'importe quel canevas, sinon ils ne seront pas affich√©s dans le jeu. <br><img src="https://habrastorage.org/webt/_o/tl/ym/_otlymxpp3b04alh9902hx3w9fu.png" alt="image"><br>  Le rendu se produit de l'objet le plus √©loign√© √† l'objet le plus √©loign√© de l'appareil photo <strong>(de l'arri√®re vers l'avant)</strong> dans la <strong>file</strong> d' <strong>attente transparente</strong> avec un m√©lange alpha. </p><br><p>  Par ailleurs, il convient de noter que la transparence des √©l√©ments de l'interface utilisateur <strong>n'affecte PAS</strong> les performances.  M√™me si l'√©l√©ment est enti√®rement constitu√© de pixels ¬´opaques¬ª, il sera toujours rendu en utilisant le m√©lange alpha. </p><br><p>  Il est √©galement important de comprendre que lors du rendu, tous les pixels de tous les √©l√©ments actifs sont trait√©s.  Cela ne d√©pend pas qu‚Äôils soient visibles, bloqu√©s par d‚Äôautres objets ou m√™me compl√®tement transparents. </p><br><h3 id="anchorrebuildanchorperestroenie-interfeysa-polzovatelya"><a name="rebuild"></a>  Refonte de l'interface utilisateur </h3><br><p>  La refonte de l'interface utilisateur est un processus en plusieurs √©tapes, comprenant la construction des maillages de chaque √©l√©ment de l'interface utilisateur et la tentative de patcher ces maillages afin de minimiser le nombre d' <strong>appels</strong> de <strong>tirage</strong> . </p><br><p>  La reconstruction se d√©roule en quatre √©tapes: </p><br><ol><li>  Les structures des √©l√©ments sont analys√©es. </li><li>  Les maillages de tous les √©l√©ments actifs, y compris les √©l√©ments avec une transparence nulle, sont reconstruits. </li><li>  Reconstruit les mat√©riaux pour le maillage des maillages d'√©l√©ments. </li><li>  Tous les √©l√©ments sont dessin√©s selon leur ordre. </li></ol><br><p>  Le canevas reconstruit est mis en cache et r√©utilis√© jusqu'√† ce que l'un des √©l√©ments du canevas soit marqu√© comme modifi√©. <br>  <strong>Les</strong> objets <strong>sales</strong> sont marqu√©s qui ont √©t√© activ√©s ou d√©sactiv√©s;  qui ont chang√© de mati√®re, de position, d'√©chelle, de rotation;  la valeur du texte du composant texte a chang√©;  r√©affectation du parent, etc. </p><br><p>  Dans ce cas, la reconstruction du canevas contient √† nouveau au moins un √©l√©ment modifi√©.  Certes, cela s'applique uniquement au canevas dans lequel se trouve l'√©l√©ment.  En d'autres termes, les modifications apport√©es aux √©l√©ments dans les toiles enfants n'affectent pas celles des parents. </p><br><p>  Plus il y a d'√©l√©ments dans le canevas, plus le co√ªt d'analyse et de tri des objets est √©lev√©. </p><br><h3 id="anchorbatchanchorbatching-meshey"><a name="batch"></a>  Maillage </h3><br><p>  La fusion de maillages ou de lots permet de r√©duire la charge sur le GPU en r√©duisant le nombre d'appels de tirage.  Au cours du processus de traitement par lots, les mailles sont tri√©es par profondeur et v√©rifi√©es pour le chevauchement.  Lors du passage d'un √©l√©ment distant √† un √©l√©ment proche (ou de l'√©l√©ment sup√©rieur √† l'√©l√©ment inf√©rieur dans la hi√©rarchie), les objets avec les m√™mes mat√©riaux ou textures sont combin√©s en un maillage au sein du m√™me canevas.  Pour cela, il ne doit pas y avoir d'objets avec d'autres mat√©riaux entre eux.  En outre, les objets avec d'autres mat√©riaux ne doivent pas chevaucher les objets cuits au four avec leurs conteneurs globaux.  L'op√©ration de traitement par lots est multi-thread, ses performances varient consid√©rablement en fonction du nombre de c≈ìurs dans le processeur. </p><br><p>  Le texte peut flotter avec d'autres textes s'ils ont la m√™me police.  Peu importe que les param√®tres et les styles de police soient identiques ou diff√©rents.  Si les polices sont diff√©rentes, le texte ne roulera pas. </p><br><p>  Il convient √©galement de garder √† l'esprit que le texte peut chevaucher un objet avec son conteneur global, et un tel chevauchement peut √™tre facilement ignor√©. <br><img src="https://habrastorage.org/webt/hp/25/q6/hp25q6lnrkta2lfzglksyejea34.png" alt="image"></p><br><p>  Prenons un exemple.  Il y a trois objets A, B et C dispos√©s dans une hi√©rarchie de cette fa√ßon: <br><img src="https://habrastorage.org/webt/iq/s-/7e/iqs-7ev081f2-yspnchyfhu7ejy.png" alt="image"><br><img src="https://habrastorage.org/webt/-x/xi/4o/-xxi4olr9aexg7rk2sic-4vntrw.png" alt="image"><br>  Dans l'image de gauche, les objets A et C seront fusionn√©s, car  ont le m√™me mat√©riau et ne se croisent pas avec l'objet B. Dans l'image de droite, les objets A et C ne seront pas combin√©s, car  il y a une intersection avec l'objet B. </p><br><h3 id="anchorcommonanchorobschie-sovety-po-optimizacii-ui"><a name="common"></a>  Conseils g√©n√©raux d'optimisation de l'interface utilisateur </h3><br><p>  Avant de commencer l'optimisation, il est fortement recommand√© de profiler l'interface utilisateur.  Cela aidera √† identifier les goulots d'√©tranglement entra√Ænant une perte de performances (le cas √©ch√©ant).  Pour le profilage, il existe de nombreux outils, √† la fois int√©gr√©s √† Unity (Unity Profiler) et √† des outils tiers.  Mais nous ne discuterons pas des probl√®mes de profilage de l'interface utilisateur dans cet article. </p><br><p>  Voici quelques suggestions pour optimiser votre interface utilisateur dans Unity: </p><br><ol><li>  D√©sactivez les objets invisibles.  Si un √©l√©ment est superpos√© par un √©l√©ment opaque, vous devez d√©sactiver son GameObject ou le GameObject parent de l'√©l√©ment superpos√©.  Dans le m√™me temps, les √©l√©ments d'interface avec alpha d√©fini sur 0 seront toujours dessin√©s.  Pour de tels objets, vous devez activer Cull Transparent Mesh dans le composant Canvas Renderer ou tout simplement d√©sactiver les objets invisibles. <br><img src="https://habrastorage.org/webt/gq/mf/hb/gqmfhb92x6wbpjgs3imcclryb8m.png" alt="image"></li><li>  D√©sactivez les objets du monde cach√©s par une interface opaque.  Si l'interface ne couvre pas le monde entier, vous pouvez l'enregistrer dans la texture de rendu et d√©sactiver la cam√©ra mondiale. </li><li>  Minimisez le nombre de pixels √† dessiner.  Combinez autant d'images que possible en une seule.  Par exemple, il est logique de faire des boutons un sprite unique, plut√¥t que des calques s√©par√©s avec un arri√®re-plan, un trait, un corps de bouton, etc.  Cela r√©duira la flexibilit√© de travailler avec de tels √©l√©ments et peut entra√Æner un colmatage des ressources, donc un compromis doit √™tre recherch√©. <br><img src="https://habrastorage.org/webt/sh/o8/q-/sho8q-hlftycczgnzevncmx1hoa.png" alt="image"></li><li>  √âvitez les √©l√©ments vides qui servent uniquement √† organiser la structure (n'utilisez pas les √©l√©ments comme noms de ¬´dossiers¬ª dans la hi√©rarchie des documents). </li><li>  √âvitez de croiser des objets qui ne peuvent pas cuire les uns avec les autres.  Si possible, il est pr√©f√©rable de modifier la position dans la hi√©rarchie, la taille du conteneur ou la position des √©l√©ments qui se chevauchent et qui n'agglom√®rent pas. </li><li>  Utilisez un canevas s√©par√© ou imbriqu√© pour les √©l√©ments dynamiques.  Vous minimisez ainsi le co√ªt du tri et de la reconstruction de la structure du canevas contenant un grand nombre d'√©l√©ments.  Les toiles imbriqu√©es sont plus pratiques, car  h√©rite des param√®tres du canevas parent.  Dans le m√™me temps, lors du changement du canevas parent, tous ceux imbriqu√©s seront √©galement reconstruits.  C'est assez rare, mais cela arrive (par exemple, lors du changement de la r√©solution d'√©cran).  Gardez √† l'esprit que les objets provenant de diff√©rentes toiles ou de toiles imbriqu√©es NE sont PAS cuits pour le rendu conjoint.  Il est recommand√© de diviser les toiles selon la r√©gularit√© des √©l√©ments de mise √† jour.  Les √©l√©ments statiques doivent √™tre plac√©s dans un canevas s√©par√©, puis ils ne seront dessin√©s qu'une seule fois.  S'il y a des √©l√©ments qui changent constamment, il est pr√©f√©rable de les combiner dans un autre canevas, car  ils continueront √† se reconstruire.  Les objets changeants peuvent √©galement √™tre divis√©s en plusieurs toiles par le taux de rafra√Æchissement.  Par exemple, les √©l√©ments mis √† jour √† chaque cadre sont plac√©s dans un canevas et les √©l√©ments mis √† jour moins souvent dans un autre. </li><li>  La d√©sactivation de Pixel Perfect augmentera consid√©rablement la productivit√©.  Cela est particuli√®rement vrai pour les objets constamment mis √† jour avec un grand nombre d'√©l√©ments (par exemple, un inventaire d√©filant). <br><img src="https://habrastorage.org/webt/0d/zg/xi/0dzgxi_azqoacbfsdarrgr7nejo.png" alt="image"><br>  La toile <br><img src="https://habrastorage.org/webt/jv/qt/31/jvqt315ookagmhaiftexsaguz0g.png" alt="image"><br>  Toile imbriqu√©e </li><li>  Si vous devez d√©sactiver le canevas, ne d√©sactivez pas l'objet qui le contient (via la fonction <strong>SetActive</strong> ).  La prochaine fois que vous activerez les √©l√©ments de ce canevas, ils seront marqu√©s comme modifi√©s et tous les √©l√©ments seront reconstruits.  Il est pr√©f√©rable de d√©sactiver le composant de canevas lui-m√™me, alors la structure enti√®re et les donn√©es cuites ne changeront pas et la prochaine fois que vous activerez le composant de canevas, ils commenceront simplement leur dessin. <br><img src="https://habrastorage.org/webt/pr/qo/-s/prqo-stitn0evgzxrddr54ncqwk.png"></li><li>  Pour les toiles avec <strong>Screen Space - Camera</strong> ou <strong>World Space</strong> s√©lectionn√© dans le param√®tre <strong>Render Mode</strong> , installez toujours une cam√©ra.  Si vous ne l'installez pas, le syst√®me d'interface utilisateur dans chaque cadre le recherchera via <strong>Object.FindObjectWithTag</strong> pour trouver <strong>Camera.main</strong> , et cela affectera les performances. </li><li>  Afin de ne pas cr√©er plusieurs textures identiques, vous pouvez en cr√©er une en nuances de gris et la ¬´peindre¬ª via le composant Image en s√©lectionnant la couleur souhait√©e. <br><img src="https://habrastorage.org/webt/o7/tj/jr/o7tjjrk1hyt5a1rqbukrw-upsh0.png"></li><li>  Ne laissez l' <strong>indicateur Raycast Target</strong> que sur les √©l√©ments qui n√©cessitent des √©v√©nements d'entr√©e et supprimez le reste.  Par d√©faut, la <strong>cible Raycast est</strong> activ√©e sur de nombreux √©l√©ments (image, texte, etc.).  Cela complique et ralentit le travail du composant <strong>Raycaster</strong> , qui g√®re les √©v√©nements d'entr√©e dans Unity UI.  Lorsque vous cliquez ou appuyez sur, il parcourt toute la hi√©rarchie des √©l√©ments et recherche tous les composants graphiques avec l' <strong>indicateur Raycast Target d√©fini,</strong> puis les v√©rifie pour la possibilit√© d'√©v√©nements d'entr√©e et, apr√®s avoir pass√© les v√©rifications avec succ√®s, les ajoute √† la liste des r√©sultats.  Apr√®s cela, la liste des r√©sultats est tri√©e par profondeur, les objets en dehors de l'√©cran sont supprim√©s.  En cons√©quence, il donne la liste finale des r√©sultats. <br>  Dans Unity UI, de nombreux composants (Image, Texte, etc.) ont l' <strong>indicateur Raycast Target</strong> . </li></ol><br><p><img src="https://habrastorage.org/webt/vp/k8/ce/vpk8cecf2dr_svrostszl-hkeeo.png" alt="image"><br>  <strong>Raycast Target</strong> sur le composant image. </p><br><p><img src="https://habrastorage.org/webt/lx/z9/3o/lxz93oxpurdfign10vwpuf8mnv0.png" alt="image"><br>  <strong>TextMeshPro l'a</strong> cach√© dans l'onglet <strong>Param√®tres suppl√©mentaires</strong> . </p><br><p><img src="https://habrastorage.org/webt/k_/63/09/k_6309bflccv61qqzc9g_rpu3u4.png" alt="image"><br>  Pour <strong>TextMeshPro,</strong> vous pouvez d√©finir le <strong>param√®tre Cible Raycast</strong> par d√©faut dans <strong>Param√®tres du lecteur -&gt; TextMest Pro -&gt; Param√®tres -&gt; Activer la cible Raycast</strong> . </p><br><p>  Les √©l√©ments sont test√©s lorsque: </p><br><ul><li>  Raycast Target activ√© </li><li>  l'√©l√©ment lui-m√™me est allum√© et activ√©; </li><li>  le point d'insertion est √† l'intersection avec RectTransform. </li></ul><br><p>  Il est √©galement judicieux de supprimer l'indicateur Raycast Target des enfants si l'objet racine le poss√®de d√©j√† et chevauche compl√®tement les enfants avec sa g√©om√©trie.  Par exemple, le bouton d'interface utilisateur Unity standard. </p><br><img src="https://habrastorage.org/webt/q7/6i/cz/q76iczyqwjxw6slf9ji6bgu1vqa.png"><br><p>  L'image chevauche compl√®tement le texte avec sa forme, dans ce cas, vous pouvez supprimer la <strong>cible Raycast</strong> du composant texte. </p><br><img src="https://habrastorage.org/webt/vf/oy/la/vfoylaklhkozlwt0dzboxd8r5vy.png"><br><p>  Si tous les √©l√©ments du canevas n'attendent pas les √©v√©nements d'entr√©e, vous pouvez supprimer le composant <strong>Graphic Raycaster</strong> du canevas / canevas imbriqu√©. </p><br><h3 id="anchortextanchorrabota-s-tekstom-i-ego-optimizaciya"><a name="text"></a>  Travailler avec du texte et son optimisation </h3><br><p>  Le texte de l'interface Unity est constitu√© de grilles dans lesquelles chaque symbole est cr√©√© son propre quad.  Le maillage est reconstruit √† chaque fois que la valeur du texte change.  La reconstruction se produit √©galement si le composant texte ou son parent a √©t√© d√©sactiv√© puis r√©activ√©. </p><br><p>  Par d√©faut, les polices dans Unity sont ajout√©es en tant que dynamiques.  Pour chaque police dynamique utilis√©e dans le composant texte de la sc√®ne, un atlas est cr√©√©.  Seuls les personnages utilis√©s sont inclus dans cet atlas.  Par exemple, si le champ de texte contient le texte ¬´Nouveau texte¬ª, l'atlas cr√©√© pour lui contiendra les caract√®res ¬´N¬ª, ¬´e¬ª, ¬´w¬ª, ¬´T¬ª, ¬´x¬ª et ¬´t¬ª.  Pour chaque personnage de taille ou de style diff√©rent, une repr√©sentation sera cr√©√©e dans l'atlas. </p><br><img src="https://habrastorage.org/webt/ze/pw/jx/zepwjxjnaa7nk2qxvenmvt3flc4.png"><br><p>  Texte sur sc√®ne </p><br><img src="https://habrastorage.org/webt/d0/1j/un/d01jun9sehx1lhs6wdrfwhyfn8q.png"><br><p>  Atlas des polices </p><br><p>  Si pendant l'ex√©cution du programme le contenu du composant texte change et qu'il appara√Æt des caract√®res qui ne sont pas dans l'atlas, l'atlas entier sera reconstruit.  S'il y a de l'espace libre dans la texture de l'atlas, les symboles n√©cessaires y seront simplement ajout√©s.  Dans le m√™me temps, les caract√®res qui ne sont pas actuellement utilis√©s ne seront pas supprim√©s.  S'il n'y a pas assez d'espace dans l'atlas pour de nouveaux caract√®res, sa taille sera doubl√©e et remplie √† nouveau en fonction des caract√®res utilis√©s dans les composants de texte actifs. </p><br><p>  Si un nombre strictement d√©fini de caract√®res est d√©fini pour un projet, par exemple, uniquement l'alphabet latin, alors il vaut la peine d'utiliser des polices statiques qui sont stock√©es en permanence en m√©moire.  Si votre projet autorise un grand nombre de caract√®res, il vaut mieux s'attarder sur les polices dynamiques. <br>  Vous pouvez √©galement am√©liorer les performances en rempla√ßant le composant texte par un sprite.  Par exemple, les nombres apparaissant dans le jeu (score) peuvent √™tre cr√©√©s √† l'aide de sprites d'un atlas contenant uniquement un ensemble de caract√®res n√©cessaires.  Dans ce cas, il n'y aura aucun frais pour reconstruire la toile et l'atlas de la police. </p><br><p>  L'utilisation de polices de secours, r√©pertori√©es dans le champ <strong>Noms</strong> des polices des param√®tres de police, augmente la m√©moire utilis√©e.  Cela est particuli√®rement visible dans les polices pictographiques. </p><br><p>  Il n'est pas recommand√© d'utiliser <strong>Best Fit</strong> , car  cette option entra√Æne un d√©bordement rapide de l'atlas et provoque sa restructuration. <br>  <strong>Le meilleur ajustement</strong> ignore les param√®tres de taille de police et essaie d'ajuster le texte dans le rectangle de contour du composant texte. </p><br><p>  Maintenant, <strong>quelques</strong> mots sur <strong>TextMeshPro (TMP)</strong> , un remplacement populaire pour le composant texte Unity standard.  TextMeshPro reconstruit √©galement sa grille √† chaque fois que la valeur du texte change.  Cependant, le texte TMP n'utilise pas de polices dynamiques.  Pour cela, des atlas de polices sont g√©n√©r√©s √† l'avance, qui incluent tous les caract√®res n√©cessaires.  Si, pour certains textes de la sc√®ne, aucun caract√®re de la police n'est affect√© √† son composant, alors TMP commence la recherche dans les polices de sauvegarde.  S'il n'y a rien, alors TMP essaiera de trouver ce caract√®re dans toutes les polices t√©l√©charg√©es. </p><br><p>  <strong>Best Fit in</strong> <strong>TMP</strong> ne cr√©e pas de probl√®mes comme un composant de texte normal, il peut donc √™tre utilis√©. </p><br><p>  Un grand nombre de polices avec diff√©rentes localisations ou de grands atlas de polices peuvent occuper beaucoup de m√©moire.  Par cons√©quent, il est pr√©f√©rable d'utiliser le pr√©chargement uniquement les polices n√©cessaires √† une localisation sp√©cifique. </p><br><p>  <strong>World Space</strong> recommande d'utiliser <strong>TextMeshPro</strong> au lieu de <strong>TextMeshProUGUI</strong> . <br>  <strong>TextMeshProUGUI est</strong> utilis√© dans les toiles. </p><br><h3 id="anchoratlasanchoratlasy-spraytov"><a name="atlas"></a>  Atlas de sprites </h3><br><p>  <strong>Les atlas de sprites</strong> sont un type de ressource qui combine plusieurs textures en une seule.  Ils vous permettent de r√©duire le nombre de tirages ( <strong>appels de tirage</strong> ) et d'augmenter la productivit√©. </p><br><p>  Cr√©ation d'atlas. <br>  Cr√©ez un atlas: <strong>Actif&gt; Cr√©er&gt; Sprite Atlas</strong> . <br>  S√©lectionnez l'atlas et placez le sprite n√©cessaire dans <strong>Objects for Packing</strong> . <br><img src="https://habrastorage.org/webt/bs/dl/8n/bsdl8nc2krqqx0hj7kwdckcatzc.png" alt="image"><br>  Cliquez sur <strong>Aper√ßu du pack</strong> pour pr√©visualiser l'atlas. <br><img src="https://habrastorage.org/webt/z2/ct/l1/z2ctl1uykvlwq_xelfoc3gezmdc.png" alt="image"><br>  Gardez √† l'esprit que m√™me si un ou plusieurs sprites de l'atlas sont utilis√©s sur la sc√®ne, l'atlas sera toujours charg√© dans son int√©gralit√©.  Par cons√©quent, cela n'a aucun sens d'essayer d'incorporer toutes les images dans un atlas g√©ant, qui sur les appareils avec une petite RAM peut prendre sa partie tangible.  Il vaut mieux percer quelques atlas plus petits, par exemple, l'atlas de l'interface utilisateur du menu du jeu et l'atlas de l'interface du mode jeu. </p><br><p>  √âvitez les grands espaces vides dans l'atlas, afin de ne pas occuper trop d'espace m√©moire.  Pour ce faire, vous pouvez redimensionner l'atlas ou ajouter des images suppl√©mentaires pour remplir autant que possible l'espace vide. <br><img src="https://habrastorage.org/webt/vc/4n/f5/vc4nf5zljiikgjg83qau04b022q.png" alt="image"><br><img src="https://habrastorage.org/webt/r7/k2/w0/r7k2w0csvrfxsevgjw2nop0_zb8.png" alt="image"><br>  Pour les images qui ne sont pas dans l'atlas, vous devez s√©lectionner les param√®tres corrects. <br>  Pour chaque format de compression, il existe des exigences en vertu desquelles il fonctionnera efficacement.  Les exigences d'image les plus courantes: </p><br><ul><li>  la largeur et la hauteur doivent √™tre un multiple de la puissance de deux; </li><li>  la largeur et la hauteur doivent √™tre un multiple de 4; </li><li>  les deux paragraphes pr√©c√©dents ensemble. <br>  Sinon, la texture ne sera pas compress√©e et des co√ªts suppl√©mentaires de m√©moire de p√©riph√©rique se produiront. </li></ul><br><p>  Lors du choix d'un format de compression, Unity vous indiquera si les exigences pour le format s√©lectionn√© ne sont pas remplies. <br><img src="https://habrastorage.org/webt/_s/tq/0c/_stq0cqnfhbnoczd2yrqm0d1iic.png" alt="image"></p><br><p>  N'oubliez pas non plus que les formats sont diff√©rents de l'appareil cible.  Pour plus d'informations et de recommandations sur les formats, consultez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation officielle</a> : </p><br><h3 id="anchorresumeanchorrezyumiruem-sposoby-optimizacii"><a name="resume"></a>  R√©sumer les m√©thodes d'optimisation </h3><br><ul><li>  D√©sactiver les objets invisibles et transparents </li><li>  Minimisez le nombre d'articles </li><li>  √âvitez de traverser des objets qui ne peuvent pas cuire les uns avec les autres </li><li>  Distribuer des √©l√©ments par toile en fonction du taux de rafra√Æchissement </li><li>  Pour les toiles avec des √©l√©ments fr√©quemment mis √† jour, d√©sactivez Pixel Perfect </li><li>  D√©sactiver Raycast Target sur les √©l√©ments non cliquables </li><li>  Supprimez le composant Graphic Raycaster du canevas pour lequel tous les √©l√©ments ne sont pas cliquables </li><li>  Pour les composants de texte normaux, n'utilisez pas Best Fit </li><li>  Pour TextMeshPro Dans World Space, utilisez TextMeshPro au lieu de TextMeshProUGUI.  TextMeshProUGUI utilis√© dans les toiles </li><li>  R√©glez l'appareil photo dans les param√®tres du canevas, si n√©cessaire </li><li>  D√©sactivez le canevas en d√©sactivant le composant canevas </li><li>  Utilisez des sprites en niveaux de gris et colorisez les param√®tres du composant d'image </li><li>  Utilisez des atlas de sprites </li><li>  Utilisez la taille et le format de compression corrects pour les textures absentes de l'atlas </li></ul><br><h3 id="anchorlinksanchoristochniki"><a name="links"></a>  Sources: </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Informations compl√®tes sur l'optimisation de l'interface utilisateur Unity</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Une autre source officielle sur ce sujet contient des informations sous une forme plus concise.</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Livres blancs Atlas</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Informations suppl√©mentaires sur les formats de compression de texture</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr470608/">https://habr.com/ru/post/fr470608/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr470596/index.html">Caract√©ristiques de Q et KDB + sur l'exemple d'un service en temps r√©el</a></li>
<li><a href="../fr470598/index.html">Le livre "Java moderne. Expressions Lambda, flux et programmation fonctionnelle ¬ª</a></li>
<li><a href="../fr470600/index.html">√Ä propos des consoles noVNC s√©curis√©es, de la mise √† l'√©chelle automatique dans Kubernetes, de Haproxy dans Ostrovka et du travail des administrateurs avec les programmeurs</a></li>
<li><a href="../fr470602/index.html">√Ä quoi ressemblerait le m√©tro de Moscou dans un monde en trois dimensions</a></li>
<li><a href="../fr470604/index.html">Vitesse de chargement des sites dans le commerce √©lectronique: analyse des 48 meilleurs magasins en ligne en Russie</a></li>
<li><a href="../fr470610/index.html">Un jour dans la vie d'un d√©veloppeur</a></li>
<li><a href="../fr470612/index.html">Ce qu'un voltm√®tre montre, ou des prises math√©matiques</a></li>
<li><a href="../fr470614/index.html">Comment les graphiques NES ont-ils √©t√© organis√©s?</a></li>
<li><a href="../fr470616/index.html">Une nouvelle solution au paradoxe de Fermi (pourquoi nous sommes seuls dans l'univers)</a></li>
<li><a href="../fr470618/index.html">Mod√©lisation th√©matique de l'actualit√© √† l'aide de l'analyse factorielle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>