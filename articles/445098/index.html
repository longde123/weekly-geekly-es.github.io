<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèª‚Äçü§ù‚Äçüë®üèæ ‚õ∫Ô∏è üö± DynamicData: colecciones cambiantes, patr√≥n de dise√±o MVVM y extensiones reactivas ü¶í üëë üîå</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En febrero de 2019, se lanz√≥ ReactiveUI 9 , un marco multiplataforma para crear aplicaciones GUI en la plataforma Microsoft .NET. ReactiveUI es una he...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DynamicData: colecciones cambiantes, patr√≥n de dise√±o MVVM y extensiones reactivas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445098/"> En febrero de 2019, se lanz√≥ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ReactiveUI 9</a> , un marco multiplataforma para crear aplicaciones GUI en la plataforma Microsoft .NET.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ReactiveUI</a> es una herramienta para integrar estrechamente las extensiones reactivas con el patr√≥n de dise√±o MVVM.  El conocimiento del marco puede iniciarse con una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">serie de art√≠culos sobre Habr√©</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desde la portada de la documentaci√≥n</a> .  La actualizaci√≥n ReactiveUI 9 incluye muchas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">correcciones y mejoras</a> , pero quiz√°s el cambio m√°s interesante y significativo es la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estrecha integraci√≥n con el marco DynamicData</a> , que permite trabajar con colecciones cambiantes en un estilo reactivo.  ¬°Intentemos averiguar en qu√© casos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> puede ser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">√∫til</a> y c√≥mo este poderoso marco reactivo est√° organizado dentro! <br><a name="habracut"></a><br><h3>  Antecedentes </h3><br>  Primero, definimos el rango de tareas que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData resuelve</a> y descubrimos por qu√© las herramientas est√°ndar para trabajar con conjuntos de datos cambiantes desde el espacio de nombres <code>System.Collections.ObjectModel</code> no nos convienen. <br><br>  La plantilla MVVM, como saben, implica la divisi√≥n de la responsabilidad entre las capas del modelo, la presentaci√≥n y el modelo de presentaci√≥n de la aplicaci√≥n.  La capa del modelo est√° representada por entidades de dominio y servicios, y no sabe nada sobre el modelo de presentaci√≥n.  La capa del modelo encapsula toda la l√≥gica de la aplicaci√≥n compleja, y el modelo de presentaci√≥n delega las operaciones del modelo, dando a la vista acceso a informaci√≥n sobre el estado actual de la aplicaci√≥n a trav√©s de propiedades, comandos y colecciones observables.  La herramienta est√°ndar para trabajar con propiedades cambiantes es la interfaz <code>INotifyPropertyChanged</code> , <code>INotifyPropertyChanged</code> para trabajar con acciones del usuario e <code>INotifyCollectionChanged</code> implementar colecciones e implementar <code>ObservableCollection</code> y <code>ReadOnlyObservableCollection</code> . <br><br><img width="500" src="https://habrastorage.org/getpro/habr/post_images/504/c83/ab0/504c83ab04fe2e2d1eed037317b8aa2c.jpg"><br><br>  La implementaci√≥n de <code>INotifyPropertyChanged</code> e <code>ICommand</code> generalmente permanece en la conciencia del desarrollador y el marco MVVM utilizado, ¬°pero el uso de <code>ObservableCollection</code> impone una serie de restricciones!  Por ejemplo, no podemos cambiar una colecci√≥n de un subproceso en segundo plano sin <code>Dispatcher.Invoke</code> o una llamada similar, y esto podr√≠a ser √∫til en caso de trabajar con matrices de datos que alguna operaci√≥n en segundo plano sincroniza con el servidor.  Cabe se√±alar que en el MVVM idiom√°tico, la capa del modelo no necesita conocer la arquitectura de la aplicaci√≥n GUI utilizada, y ser compatible con el modelo de MVC o MVP, y es por eso que numerosos <code>Dispatcher.Invoke</code> permiten el acceso al control de la interfaz de usuario desde el hilo de fondo en ejecuci√≥n en un servicio de dominio, viola el principio de compartir la responsabilidad entre las capas de la aplicaci√≥n. <br><br>  Por supuesto, en un servicio de dominio ser√≠a posible declarar un evento y, como argumento de un evento, pasar un fragmento con los datos modificados.  Luego suscr√≠base al evento, envuelva el <code>Dispatcher.Invoke</code> llamada en una interfaz para que no dependa del marco GUI utilizado, mueva <code>Dispatcher.Invoke</code> al modelo de presentaci√≥n y cambie la <code>ObservableCollection</code> sea ‚Äã‚Äãnecesario, sin embargo, hay una manera mucho m√°s simple y elegante de resolver el rango de tareas indicado sin tener que escribir una bicicleta .  ¬°Comencemos el estudio! <br><br><h2>  Extensiones reactivas.  Administrar flujos de datos </h2><br>  Para una comprensi√≥n completa de las abstracciones introducidas por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> y los principios de trabajar con conjuntos de datos reactivos cambiantes, recordemos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">qu√© es la programaci√≥n reactiva y c√≥mo aplicarla en el contexto de la plataforma Microsoft .NET y el patr√≥n de dise√±o MVVM</a> .  Una forma de organizar la interacci√≥n entre los componentes del programa puede ser interactiva y reactiva.  En la interacci√≥n interactiva, la funci√≥n del consumidor recibe sincr√≥nicamente datos de la funci√≥n del proveedor (enfoque basado en extracci√≥n, <code>T</code> , <code>IEnumerable</code> ), y en la interacci√≥n reactiva, la funci√≥n del consumidor entrega datos asincr√≥nicamente a la funci√≥n del consumidor (enfoque basado en inserci√≥n, <code>Task</code> , <code>IObservable</code> ). <br><br><img width="500" src="https://habrastorage.org/webt/mb/ts/mj/mbtsmjfyhjqeeb4tv8ynotvkdms.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La programaci√≥n reactiva</a> es la programaci√≥n usando flujos de datos as√≠ncronos, y las extensiones reactivas son un caso especial de su implementaci√≥n, basada en las <code>IObserver</code> <code>IObservable</code> e <code>IObserver</code> del espacio de nombres del sistema, que define una serie de operaciones similares a LINQ en la interfaz <code>IObservable</code> , llamada LINQ over Observable.  Las extensiones reactivas son compatibles con .NET Standard y funcionan donde sea que funcione la plataforma Microsoft .NET. <br><br><img src="https://habrastorage.org/webt/ue/qe/80/ueqe80neq0ufivj-bq5hipdrldo.gif"><br><br>  El marco ReactiveUI invita a los desarrolladores de aplicaciones a aprovechar la implementaci√≥n reactiva de <code>ICommand</code> e <code>INotifyPropertyChanged</code> , proporcionando herramientas poderosas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>ReactiveCommand&lt;TIn, TOut&gt;</code></a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>WhenAnyValue</code></a> .  <code>WhenAnyValue</code> permite convertir una propiedad de una clase que implementa INotifyPropertyChanged en una secuencia de eventos de tipo <code>IObservable&lt;T&gt;</code> , lo que simplifica la implementaci√≥n de propiedades dependientes. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ExampleViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">ReactiveObject</span></span> { [Reactive] <span class="hljs-comment"><span class="hljs-comment">//  ReactiveUI.Fody,  // -  // OnPropertyChanged   Name. public string Name { get; set; } public ExampleViewModel() { //  OnPropertyChanged("Name"). this.WhenAnyValue(x =&gt; x.Name) //   IObservable&lt;string&gt; .Subscribe(Console.WriteLine); } }</span></span></code> </pre><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>ReactiveCommand&lt;TIn, TOut&gt;</code></a> permite trabajar con el comando, como con un evento de tipo <code>IObservable&lt;TOut&gt;</code> , que se publica cada vez que el comando completa la ejecuci√≥n.  Adem√°s, cualquier comando tiene una propiedad <code>ThrownExceptions</code> de tipo <code>IObservable&lt;Exception&gt;</code> . <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// ReactiveCommand&lt;Unit, int&gt; var command = ReactiveCommand.Create(() =&gt; 42); command //   IObservable&lt;int&gt; .Subscribe(Console.WriteLine); command .ThrownExceptions //   IObservable&lt;Exception&gt; .Select(exception =&gt; exception.Message) //   IObservable&lt;string&gt; .Subscribe(Console.WriteLine); command.Execute().Subscribe(); // : 42</span></span></code> </pre><br>  Todo este tiempo trabajamos con <code>IObservable&lt;T&gt;</code> , como con un evento que publica un nuevo valor de tipo <code>T</code> cada vez que cambia el estado del objeto que se est√° monitoreando.  En pocas palabras, <code>IObservable&lt;T&gt;</code> es una secuencia de eventos, una secuencia que se extiende a lo largo del tiempo. <br><br>  Por supuesto, podr√≠amos trabajar de manera igual y f√°cil con colecciones: cada vez que cambie una colecci√≥n, publique una nueva colecci√≥n con elementos modificados.  En este caso, el valor publicado ser√≠a del tipo <code>IEnumerable&lt;T&gt;</code> o m√°s especializado, y el evento en s√≠ ser√≠a del tipo <code>IObservable&lt;IEnumerable&lt;T&gt;&gt;</code> .  Pero, como se√±ala correctamente el lector cr√≠tico, esto est√° plagado de serios problemas con el rendimiento de la aplicaci√≥n, especialmente si no hay una docena de elementos en nuestra colecci√≥n, ¬°sino cien, o incluso varios miles! <br><br><h2>  Introducci√≥n a DynamicData </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> es una biblioteca que le permite utilizar todo el poder de las extensiones reactivas cuando trabaja con colecciones.  Las extensiones reactivas listas para usar no proporcionan formas √≥ptimas de trabajar con conjuntos de datos cambiantes, y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el trabajo de DynamicData</a> es solucionarlo.  En la mayor√≠a de las aplicaciones, existe la necesidad de actualizar din√°micamente las colecciones; por lo general, una colecci√≥n se llena con algunos elementos cuando se inicia la aplicaci√≥n, y luego se actualiza de forma as√≠ncrona, sincronizando la informaci√≥n con un servidor o una base de datos.  Las aplicaciones modernas son bastante complejas y, a menudo, es necesario crear proyecciones de colecciones: filtrar, transformar u ordenar elementos.  DynamicData fue dise√±ado solo para deshacerse del c√≥digo incre√≠blemente complejo que necesitar√≠amos para administrar conjuntos de datos que cambian din√°micamente.  La herramienta se desarrolla y finaliza activamente, y ahora se admiten m√°s de 60 operadores para trabajar con colecciones. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/hn/7j/v3/hn7jv3fv1qgfxlhqrd9g6dokkao.gif"></a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> no es una implementaci√≥n alternativa de <code>ObservableCollection&lt;T&gt;</code> .  La arquitectura <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData se</a> basa principalmente en los conceptos de programaci√≥n espec√≠fica del dominio.  La ideolog√≠a de uso se basa en el hecho de que administra una fuente de datos, una colecci√≥n a la que tiene acceso el c√≥digo responsable de sincronizar y cambiar los datos.  A continuaci√≥n, aplica varios operadores a la fuente, con los que puede transformar los datos de forma declarativa, sin la necesidad de crear y modificar manualmente otras colecciones.  De hecho, con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> separa las operaciones de lectura y escritura, y solo puede leer de manera reactiva; por lo tanto, las colecciones heredadas siempre se sincronizar√°n con la fuente. <br><br>  En lugar del cl√°sico <code>IObservable&lt;T&gt;</code> , DynamicData define operaciones en <code>IObservable&lt;IChangeSet&lt;T&gt;&gt;&gt;</code> y <code>IObservable&lt;IChangeSet&lt;TValue, TKey&gt;&gt;</code> , donde <code>IChangeSet</code> es un fragmento que contiene informaci√≥n sobre el cambio de colecci√≥n: el tipo de cambio y los elementos que se vieron afectados.  Este enfoque puede mejorar significativamente el rendimiento del c√≥digo para trabajar con colecciones escritas en un estilo reactivo.  Al mismo tiempo, <code>IObservable&lt;IChangeSet&lt;T&gt;&gt;</code> siempre se puede transformar en un <code>IObservable&lt;IEnumerable&lt;T&gt;&gt;</code> si es necesario procesar todos los elementos de la colecci√≥n a la vez.  Si suena complicado, ¬°no se alarme, a partir de los ejemplos de c√≥digo todo se volver√° claro y transparente! <br><br><h2>  Ejemplo de DynamicData </h2><br>  Veamos una serie de ejemplos para comprender mejor c√≥mo funciona DynamicData, c√≥mo se diferencia de <code>System.Reactive</code> y qu√© tareas pueden resolver los desarrolladores comunes de software de aplicaciones con una GUI.  Comencemos con un ejemplo completo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">publicado por DynamicData en GitHub</a> .  En el ejemplo, la fuente de datos es <code>SourceCache&lt;Trade, long&gt;</code> , que contiene una colecci√≥n de transacciones.  La tarea es mostrar solo transacciones activas, transformar modelos en objetos proxy, ordenar la colecci√≥n. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//    System.Collections.ObjectModel, //       . ReadOnlyObservableCollection&lt;TradeProxy&gt; list; //   ,   . //   Add, Remove, Insert   . var source = new SourceCache&lt;Trade, long&gt;(trade =&gt; trade.Id); var cancellation = source //      . //   IObservable&lt;IChangeSet&lt;Trade, long&gt;&gt; .Connect() //       . .Filter(trade =&gt; trade.Status == TradeStatus.Live) //    -. //   IObservable&lt;IChangeSet&lt;TrandeProxy, long&gt;&gt; .Transform(trade =&gt; new TradeProxy(trade)) //    . .Sort(SortExpressionComparer&lt;TradeProxy&gt; .Descending(trade =&gt; trade.Timestamp)) //  GUI    . .ObserveOnDispatcher() //    - //    System.Collections.ObjectModel. .Bind(out list) // ,       //    . .DisposeMany() .Subscribe();</span></span></code> </pre><br>  En el ejemplo anterior, cuando cambia el <code>SourceCache</code> , que es el origen de datos, <code>ReadOnlyObservableCollection</code> tambi√©n cambiar√° en consecuencia.  En este caso, al eliminar elementos de la colecci√≥n, se llamar√° al m√©todo <code>Dispose</code> , la colecci√≥n siempre se actualizar√° solo en la secuencia de la GUI y permanecer√° ordenada y filtrada.  Genial, sin <code>Dispatcher.Invoke</code> y c√≥digo complicado! <br><br><h2>  Fuentes de datos SourceList y SourceCache </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> proporciona dos colecciones especializadas que pueden usarse como fuente de datos mutable.  Estas colecciones son de los tipos <code>SourceList</code> y <code>SourceCache&lt;TObject, TKey&gt;</code> .  Se recomienda usar <code>SourceCache</code> siempre que <code>TObject</code> tenga una clave √∫nica; de lo contrario, use <code>SourceList</code> .  Estos objetos proporcionan la conocida API de desarrolladores de .NET para modificar datos: <code>Add</code> , <code>Remove</code> , <code>Insert</code> y similares.  Para convertir fuentes de datos a <code>IObservable&lt;IChangeSet&lt;T&gt;&gt;</code> o <code>IObservable&lt;IChangeSet&lt;T, TKey&gt;&gt;</code> , use el operador <code>.Connect()</code> .  Por ejemplo, si tiene un servicio que actualiza la colecci√≥n de elementos en segundo plano, puede sincronizar f√°cilmente la lista de estos elementos con la GUI, sin <code>Dispatcher.Invoke</code> y excesos arquitect√≥nicos: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BackgroundService</span></span> : <span class="hljs-title"><span class="hljs-title">IBackgroundService</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    . private readonly SourceList&lt;Trade&gt; _trades; //     . //  ,     , //    Publish()  Rx. public IObservable&lt;IChangeSet&lt;Trade&gt;&gt; Connect() =&gt; _trades.Connect(); public BackgroundService() { _trades = new SourceList&lt;Trade&gt;(); _trades.Add(new Trade()); //    ! //    . } }</span></span></code> </pre><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> utiliza tipos .NET integrados para asignar datos al mundo exterior.  Usando los poderosos operadores DynamicData, podemos transformar el <code>IObservable&lt;IChangeSet&lt;Trade&gt;&gt;</code> en <code>ReadOnlyObservableCollection</code> nuestro modelo de vista. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TradesViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">ReactiveObject</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ReadOnlyObservableCollection&lt;TradeVm&gt; _trades; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReadOnlyObservableCollection&lt;TradeVm&gt; Trades =&gt; _trades; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TradesViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBackgroundService background</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//   ,  ,  //     System.Collections.ObjectModel. background.Connect() .Transform(x =&gt; new TradeVm(x)) .ObserveOn(RxApp.MainThreadScheduler) .Bind(out _trades) .DisposeMany() .Subscribe(); } }</span></span></code> </pre><br>  Adem√°s de <code>Transform</code> , <code>Filter</code> y <code>Sort</code> , DynamicData incluye una gran cantidad de otros operadores, admite agrupaci√≥n, operaciones l√≥gicas, suavizar una colecci√≥n, usar funciones de agregaci√≥n, excluir elementos id√©nticos, contar elementos e incluso virtualizar a nivel del modelo de presentaci√≥n.  Lea m√°s sobre todos los operadores en el <a href="">proyecto README en GitHub</a> . <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/jy/6-/4a/jy6-4azw__6rou9alucffpjhkrq.gif"></a> <br><br><h2>  Colecciones de un solo hilo y seguimiento de cambios </h2><br>  Adem√°s de <code>SourceList</code> y <code>SourceCache</code> , la biblioteca DynamicData tambi√©n incluye una implementaci√≥n de subproceso √∫nico de una colecci√≥n mutable: <code>ObservableCollectionExtended</code> .  Para sincronizar dos colecciones en su modelo de vista, declare una como <code>ObservableCollectionExtended</code> y la otra como <code>ReadOnlyObservableCollection</code> y use el operador <code>ToObservableChangeSet</code> , que se comporta igual que <code>Connect</code> pero est√° dise√±ado para funcionar con <code>ObservableCollection</code> . <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   . ReadOnlyObservableCollection&lt;TradeVm&gt; _derived; //    -. var source = new ObservableCollectionExtended&lt;Trade&gt;(); source.ToObservableChangeSet(trade =&gt; trade.Key) .Transform(trade =&gt; new TradeProxy(trade)) .Filter(proxy =&gt; proxy.IsChecked) .Bind(out _derived) .Subscribe();</span></span></code> </pre><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> tambi√©n admite el seguimiento de cambios en las clases que implementan la interfaz <code>INotifyPropertyChanged</code> .  Por ejemplo, si desea que se le notifique un cambio de colecci√≥n cada vez que cambie una propiedad de un elemento, use la <code>AutoRefresh</code> y pase el selector de la propiedad deseada con el argumento.  <code>AutoRefesh</code> y otros operadores DynamicData le permitir√°n validar de manera f√°cil y natural la gran cantidad de formularios y <code>AutoRefesh</code> muestran en la pantalla! <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//  IObservable&lt;bool&gt; var isValid = databases .ToObservableChangeSet() //      IsValid. .AutoRefresh(database =&gt; database.IsValid) //       . .ToCollection() // ,    . .Select(x =&gt; x.All(y =&gt; y.IsValid)); //   ReactiveUI, IObservable&lt;bool&gt; //     ObservableAsProperty. _isValid = isValid .ObserveOn(RxApp.MainThreadScheduler) .ToProperty(this, x =&gt; x.IsValid);</span></span></code> </pre><br>  Basado en la funcionalidad DynamicData, puede crear r√°pidamente interfaces bastante complejas, esto es especialmente cierto para los sistemas que muestran una gran cantidad de datos en tiempo real, sistemas de mensajer√≠a instant√°nea y sistemas de monitoreo. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/98/nh/ws/98nhws7gl4yzk8kgcovbpvvozoi.gif"></a> <br><br><h2>  Conclusi√≥n </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Las extensiones reactivas</a> son una herramienta poderosa que le permite trabajar de manera declarativa con los datos y la interfaz de usuario, escribir c√≥digo port√°til y compatible, y resolver problemas complejos de una manera simple y elegante.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ReactiveUI</a> permite a los desarrolladores de .NET integrar estrechamente las extensiones reactivas en sus proyectos utilizando la arquitectura MVVM al proporcionar implementaciones reactivas de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>INotifyPropertyChanged</code></a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>ICommand</code></a> , mientras que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData</a> se encarga de la sincronizaci√≥n de la colecci√≥n al implementar <code>INotifyCollectionChanged</code> , ampliando las capacidades de las extensiones reactivas y cuidando el rendimiento. <br><br>  Las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">bibliotecas</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ReactiveUI</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData son</a> compatibles con los marcos de GUI m√°s populares de la plataforma .NET, incluidas Windows Presentation Foundation, Universal Windows Platform, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Avalonia</a> , Xamarin.Android, Xamarin Forms, Xamarin.iOS.  Puede comenzar a aprender DynamicData desde la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">p√°gina de documentaci√≥n de ReactiveUI correspondiente</a> .  Tambi√©n aseg√∫rese de revisar el proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DynamicData Snippets</a> , que contiene ejemplos del uso de DynamicData para todas las ocasiones. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/445098/">https://habr.com/ru/post/445098/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445086/index.html">Misi√≥n lunar "Bereshit": el primer video de la c√°mara a bordo y nuevas fotos en el espacio exterior</a></li>
<li><a href="../445088/index.html">¬øHan sido las aventuras en tu vida m√°s interesantes que en los juegos de computadora?</a></li>
<li><a href="../445090/index.html">¬øYouTube se mantendr√° como lo conocemos?</a></li>
<li><a href="../445092/index.html">Problema de enlace profundo de HATEOAS</a></li>
<li><a href="../445094/index.html">Acceso centralizado a firmas digitales y otras claves de protecci√≥n electr√≥nica mediante hardware USB sobre IP</a></li>
<li><a href="../445100/index.html">Anycubic: Photon S, 4Max Pro y cambio de nombre grande</a></li>
<li><a href="../445102/index.html">Animaci√≥n flash en Unity3D desde cero. Primera parte, l√≠rica</a></li>
<li><a href="../445104/index.html">Una breve historia de la marca de audio Klipsch</a></li>
<li><a href="../445106/index.html">Mesa redonda: tecnolog√≠a aditiva como alternativa a la fabricaci√≥n tradicional</a></li>
<li><a href="../445108/index.html">Ni un halc√≥n: proyectos reutilizables de ESA y ULA fundamentalmente diferentes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>