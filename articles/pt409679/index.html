<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüî¨ ‚¨ÜÔ∏è üîß Hist√≥rico de participa√ß√£o no Game Jam. Snowbox üôéüèª ‚ôìÔ∏è ü§∏üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No final de 2017, tive a oportunidade de testar minha for√ßa e entusiasmo como participante de um dos muitos Game Jams mundiais. 

 Como essa foi minha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hist√≥rico de participa√ß√£o no Game Jam. Snowbox</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/409679/"><img src="https://habrastorage.org/webt/co/5g/n7/co5gn7mngh3htc0x51kcvywi6o8.png" alt="imagem" align="left">  No final de 2017, tive a oportunidade de testar minha for√ßa e entusiasmo como participante de um dos muitos Game Jams mundiais. <br><br>  Como essa foi minha primeira experi√™ncia em um projeto como esse, aprendi algumas li√ß√µes √∫teis e algumas surpresas agrad√°veis.  Bem, eu tamb√©m ganhei um brinquedo que eu poderia brincar com meus colegas nas f√©rias de sexta-feira. <br><br>  Sob o gato, uma descri√ß√£o de qu√£o intensos 30 dias de desenvolvimento e 20 dias lentos de espera por resultados foram. <br><br>  <i>Nota: o artigo √© de natureza narrativa, com poucos detalhes t√©cnicos.</i> <br><a name="habracut"></a><br><h3>  Pr√≥logo </h3><br>  H√° muito tempo eu queria me testar como desenvolvedor de jogos e, no √∫ltimo ano, esse desejo se tornou cada vez mais intrusivo e intrusivo.  No final do ano, decidi come√ßar a fazer alguma coisa - participar de reuni√µes sobre desenvolvimento de jogos, ler livros e at√© fazer um pequeno prot√≥tipo do jogo. <br><br>  E ent√£o, um dia, Selim, meu colega, se ofereceu para participar de um dos muitos Game Jam e pensei que essa era a melhor oportunidade para estudar a cozinha de jogos sem obriga√ß√µes de longo prazo.  Este n√£o √© um prot√≥tipo, mas ainda n√£o √© um projeto de longa dura√ß√£o.  Al√©m disso, prazos apertados s√£o frequentemente alguns dos melhores motivadores.  E a principal vantagem √© que, em qualquer caso, o resultado √© algo hol√≠stico e completo, que sempre inspira novas conquistas. <br><br>  Ent√£o decidimos participar.  Dois desenvolvedores de Java, com absolutamente nenhuma experi√™ncia em cria√ß√£o de jogos.  Mas quando √© preciso come√ßar? <br><br><h3>  Prepara√ß√£o </h3><br>  O Game Jam escolhido era tem√°tico, e os organizadores tiveram que anunciar o t√≥pico estritamente antes do in√≠cio do desenvolvimento.  Os competidores receberam 1 m√™s para criar o jogo. <br><br>  Registramos uma semana antes do in√≠cio e, devido √† falta de um t√≥pico, passamos um tempo em l√¢nguida antecipa√ß√£o e ina√ß√£o.  Talvez fosse melhor gastar esse tempo escolhendo um g√™nero e uma mec√¢nica de jogo.  Em seguida, envolva-o em um estilo adequado. <br><br>  Na hora X, os organizadores anunciaram o tema do concurso - Retrocesso (retorno) e a contagem regressiva come√ßou. <br><br>  Selim tinha o √∫nico desejo para o jogo - a presen√ßa de um servidor de jogo e necessariamente em tempo real.  Ele estava interessado em conhecer as del√≠cias e dificuldades do desenvolvimento do lado do servidor.  Al√©m disso, o jogo deveria ter sido simples, caso contr√°rio, talvez n√£o tenhamos tempo para conclu√≠-lo. <br><br>  A respeito do t√≥pico, a princ√≠pio, os pensamentos eram sobre tempos retr√¥ ou pr√©-hist√≥ricos.  O tema retr√¥ n√£o √© interessante para mim, ent√£o tentei criar algo sobre dinossauros ou pessoas antigas.  No entanto, n√£o consegui criar algo simples e multiusu√°rio sobre esse t√≥pico. <br><br>  E ent√£o tive a id√©ia de fazer um jogo de sandbox, no sentido literal - uma refer√™ncia ao entretenimento infantil na praia.  Constru√≠mos castelos, corremos e jogamos areia em nossos rivais (espero que nem todos tenham tido uma inf√¢ncia t√£o dif√≠cil), mas pais insatisfeitos s√£o punidos por isso.  Tudo isso em 2D com uma vista superior. <br><br>  Selim considerou que a areia √© muito cruel aos olhos e sugeriu a substitui√ß√£o de areia por neve e castelos por fortalezas de gelo.  Nesta op√ß√£o, paramos.  Para o melhor de nossa capacidade e tempo, poder√≠amos adicionar novas funcionalidades e variedade. <br><br><h3>  Desenvolvimento.  Semana 1 </h3><br>  Nossos pap√©is no projeto foram divididos por eles mesmos.  Como eu disse, Selim estava interessado apenas no desenvolvimento de servidores.  E eu estava interessado em experimentar o desenvolvimento da interface do usu√°rio, porque, na minha opini√£o, √© mais diferente do desenvolvimento de aplicativos de neg√≥cios.  A interface do jogo foi planejada na web. <br><br><div class="spoiler">  <b class="spoiler_title">Breve descri√ß√£o das tecnologias utilizadas</b> <div class="spoiler_text">  A intera√ß√£o cliente-servidor foi completamente criada em soquetes da Web, porque precis√°vamos enviar mensagens do servidor para o cliente de forma ass√≠ncrona e regular.  As mensagens do cliente tamb√©m foram transmitidas pelo soquete da Web, mas simplesmente pelo motivo "por que n√£o".  Todas as mensagens estavam no formato Json. <br><br>  Para trabalhar com soquetes da Web no servidor, foi utilizada a micro-estrutura Spark.  E como um mecanismo f√≠sico, o box2d foi usado, como um dos mais populares.  Ele foi respons√°vel pelo c√°lculo da f√≠sica no servidor. <br><br>  O cliente foi escrito em JS puro, sem usar nenhuma estrutura, j√° que n√£o sou forte com eles e, al√©m disso, isso faz pouco sentido para um projeto pequeno.  Como mecanismo de jogo, o Phaser 2 foi usado - um mecanismo JS jovem e promissor.  Ao contr√°rio do mecanismo f√≠sico no servidor, seu principal objetivo era gr√°ficos e c√°lculos f√≠sicos simples.  KnockoutJS tamb√©m foi usado para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">liga√ß√£o de dados</a> . <br><br>  Os produtos JetBrains foram usados ‚Äã‚Äãcomo o IDE: Intellij IDEA e uma vers√£o de avalia√ß√£o do WebStorm (apenas uma vers√£o de 30 dias, no momento do Game Jam). <br></div></div><br>  O desenvolvimento come√ßou com uma reuni√£o conjunta no dia de folga.  Nas primeiras 2 horas, eu peguei sprites "tempor√°rios" e percebi um garoto correndo que sabia jogar bolas de neve.  Poderia ter havido uma imagem de ‚Äúera / se tornou‚Äù, mas √© desprovida de qualquer significado - visualmente o que era, ent√£o permanece. <br><br>  Com uma interface de trabalho, restava <i>apenas</i> refor√ßar a intera√ß√£o do servidor.  Portanto, o resto do dia foi dedicado √† integra√ß√£o: discuss√£o da API, configura√ß√£o da conex√£o, implementa√ß√£o da intera√ß√£o.  No final do dia, nosso homenzinho poderia mover 1 pixel para o lado pressionando uma tecla.  Foi modesto, mas ainda bem sucedido. <br><br>  O desenvolvimento continuou apenas no tempo livre do trabalho, com 6 dias por semana separadamente para resid√™ncias e um dia de folga juntos.  Isso foi suficiente gra√ßas a uma API simples e a uma distribui√ß√£o r√≠gida de fun√ß√µes. <br><br>  Para repetir o sucesso do primeiro dia (correr e jogar bolas de neve), mas j√° atrav√©s do servidor, levamos uma semana.  Isso foi afetado igualmente por muitos fatores t√©cnicos, incluindo problemas com ferramentas mal projetadas para o nosso modelo de intera√ß√£o cliente-servidor.  Eu gostaria de me debru√ßar sobre esse modelo com mais detalhes. <br><br><h3>  Modelo de Intera√ß√£o Cliente-Servidor </h3><br>  Inicialmente, foi decidido que o servidor seria respons√°vel por qualquer movimento e o cliente enviaria apenas comandos, como pressionar uma tecla, e desenharia o que veio do servidor.  Mais tarde, essa filosofia foi ligeiramente modificada, mas o servidor at√© o final permaneceu o elo central. <br><br>  Na primeira implementa√ß√£o, o servidor enviou atualiza√ß√µes para o cliente a cada tick.  I.e.  por exemplo, se uma tecla for pressionada, a posi√ß√£o do jogador mudar√° a cada poucos milissegundos e uma nova posi√ß√£o ser√° enviada ao cliente. <br><br>  Usando um algoritmo t√£o simples, implementamos o movimento do jogador.  Mas buscar o melhor nos levou a alterar o algoritmo para um evento: apenas eventos importantes suficientes para sincroniza√ß√£o s√£o enviados ao servidor e ao cliente. <br><br>  Por exemplo, para mover um jogador no mapa, voc√™ precisa de 4 eventos: <br><br><ol><li>  <i>Cliente</i> : tecla para cima pressionada; </li><li>  <i>Servidor</i> : o jogador come√ßou a se mover do ponto [x, <b>y1</b> ], em um √¢ngulo Œ±, com velocidade ŒΩ; </li><li>  <i>Cliente</i> : tecla para cima pressionada; </li><li>  <i>Servidor</i> : o jogador terminou de se mover no ponto [x, <b>y2</b> ]. </li></ol><br>  Essa abordagem tem pr√≥s e contras. <br><br>  <b>Contras</b> <br><br><ul><li>  muito mais l√≥gica no cliente: o pr√≥prio cliente deve calcular o movimento, colis√µes, etc. </li><li>  a l√≥gica no cliente deve repetir com precis√£o a l√≥gica no servidor, caso contr√°rio, s√£o obtidos saltos no movimento dos objetos.  Al√©m disso, no artigo, haver√° v√°rios exemplos sobre esse assunto; </li><li>  em caso de problemas de rede, receber eventos posteriormente pode levar a estados incorretos (sair dos limites, passar por objetos etc.); </li><li>  em geral, √© muito mais f√°cil obter o estado fora de sincronia no servidor e no cliente. </li></ul><br>  <b>Pr√≥s</b> <br><br><ul><li>  muito menos carga em E / S; </li><li>  l√≥gica adicional pode ser pendurada em eventos.  Por exemplo, no in√≠cio / fim de um movimento, voc√™ pode iniciar / parar a anima√ß√£o; </li><li>  problemas de rede afetam menos a suavidade do movimento.  Enquanto a bola de neve estiver voando, um atraso de at√© um segundo n√£o afetar√° nada, pois o servidor n√£o deve enviar nada; </li><li>  A API e a pr√≥pria intera√ß√£o se tornam mais transparentes. </li></ul><br>  A partir dessas listas, fica claro que, se voc√™ trabalhar duro na implementa√ß√£o do cliente, haver√° quase uma vantagem.  Em nosso projeto, conseguimos isso e a intera√ß√£o cliente-servidor funcionou perfeitamente.  Mas devemos prestar homenagem, foi preciso muita for√ßa e nervosismo. <br><br><h3>  Desenvolvimento.  Semanas 2 e 3 </h3><br>  Uma semana depois, quando conseguimos dominar a integra√ß√£o, no m√≠nimo, e dar suporte a v√°rios tipos de mensagens entre o servidor e o cliente, era hora de adicionar mais ao jogo do que apenas um garoto em execu√ß√£o. <br><br>  Portanto, decidimos adicionar uma garota correndo!  No caminho, para a garota, tive que fazer uma janela de sele√ß√£o de personagens.  E como a janela ainda precisava ser feita, √© um pecado n√£o adicionar um nome tamb√©m.  Al√©m disso, tive que esticar as imagens, semelhante √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">abordagem de 9 patches</a> . <br><br><img src="https://habrastorage.org/webt/cf/q_/0u/cfq_0ujfj7vseg_hu5istudnaec.png" alt="imagem"><br>  <i>Parecia a primeira vers√£o da janela de login</i> <br><br>  Por tudo isso, uma tarefa t√£o simples e importante de adicionar uma garota levou algumas noites, mas claramente valeu a pena.  E ent√£o veio a vida cotidiana cinzenta com as mesmas tarefas: novas fun√ß√µes simples, corre√ß√µes de bugs, pequenas melhorias visuais. <br><br>  √Ä medida que meu progresso progredia no lado do cliente, surgia o problema de velocidade de desenvolvimento desigual do servidor e da interface do usu√°rio.  E como o servidor √© uma parte central de qualquer intera√ß√£o, sem a funcionalidade final e operacional do servidor, o desenvolvimento do cliente foi interrompido. <br><br>  Portanto, implementei um servidor simulado simples diretamente no cliente.  Muitas coisas nele foram implementadas de maneira desajeitada, incluindo  atrav√©s do uso do estado global do mundo do jogo.  Isso foi suficiente para desenvolver uma interface do usu√°rio completamente independente do servidor e me poupou muito tempo. <br><br>  O servidor simulado tinha outra vantagem definitiva.  Havia bots nele que n√£o sabiam atirar, ent√£o havia pelo menos uma chance de algu√©m vencer. <br><br>  Ao mesmo tempo, Selim lutou com o servidor.  No servidor, ele conectou o mecanismo de f√≠sica box2d para simular a f√≠sica no jogo.  Esse mecanismo tem muitas nuances e o estudo deles levou muito tempo.  A maior dificuldade no desenvolvimento foi a falta de visualiza√ß√£o do mundo do jogo.  Nosso cliente processou apenas o necess√°rio.  E alguns elementos do "mundo dos servidores" foram ocultados do lado do cliente.  Al√©m disso, n√£o havia garantias completas de que o cliente renderize tudo corretamente. <br><br>  Uma das subtarefas importantes que Selim teve que resolver foi verificar colis√µes de objetos.  No cliente, as colis√µes foram verificadas apenas para elementos fixos.  No servidor, era necess√°rio fazer tudo honestamente para n√£o violar os direitos dos objetos em movimento. <br><br>  Durante o desenvolvimento de colis√µes, lembrei-me de um bug engra√ßado que poderia fingir uma funcionalidade especial: quando um jogador jogava uma bola de neve, ele era jogado para tr√°s com um ‚Äúrecuo‚Äù.  Isso aconteceu porque no box2d, por padr√£o, todos podem colidir com todos, e a repulsa sempre acontece. <br><br>  Esse problema foi resolvido com a introdu√ß√£o de m√°scaras, ou seja, especificando classes de objetos que n√£o podem colidir entre si.  Por exemplo, para um jogador e suas bolas de neve, a m√°scara era igual. <br><br>  Selim decidiu n√£o perder tempo lidando com colis√µes especiais de bolas de neve e comentou sobre essa colis√£o: <br><br> <code>// for the <b>unlikely</b> event that we collide with a sibling snowball</code> <br> <br>  Como a pr√°tica demonstrou, a frequ√™ncia desse evento "improv√°vel" tende √† frequ√™ncia do lan√ßamento de bolas de neve, porque quando voc√™ fica em frente um do outro, as trajet√≥rias das bolas de neve coincidem.  Por causa disso, bolas de neve alien√≠genas constantemente se destacam.  Nossas opini√µes sobre esse comportamento divergiram, ent√£o deixamos como est√°. <br><br>  Enquanto Selim estava se divertindo com colis√µes, depurei o movimento s√≠ncrono de objetos no servidor e no cliente.  Houve pequenos bugs em nossa pr√≥pria implementa√ß√£o, mas a Phaser apresentou a maior surpresa.  Em seu mecanismo de f√≠sica, a velocidade real dos objetos √© ajustada para o FPS e para o mundo.  Isso √© feito para aumentar a suavidade.  Infelizmente, esse comportamento inteligente n√£o era consistente com a opera√ß√£o s√≠ncrona em rela√ß√£o ao servidor, e eu tive que fazer minha pr√≥pria implementa√ß√£o de objetos em movimento. <br><br><div class="spoiler">  <b class="spoiler_title">Descri√ß√£o das especificidades da velocidade em Phaser ou "corrida com sombra"</b> <div class="spoiler_text">  Para verificar e depurar a velocidade, adicionei o objeto de outro jogador ao mapa, que se movia com a mesma velocidade, mas por perto.  Esse jogador sombra e jogador normal usavam algoritmos de movimento diferentes.  Organizei competi√ß√µes e comparei a estabilidade da velocidade. <br><br>  No come√ßo, tentei resolver o problema da velocidade irregular usando as configura√ß√µes do motor e a f√≠sica que usamos.  Mas, pelo que entendi, esse comportamento n√£o pode ser alterado de forma alguma.  Era poss√≠vel mudar para uma implementa√ß√£o mais complexa da f√≠sica, mas eu n√£o queria fazer isso apenas por uma quest√£o de velocidade.  Al√©m disso, essa implementa√ß√£o tamb√©m n√£o deu uma velocidade absolutamente est√°vel. <br><br>  O pr√≥ximo passo tentei implementar o movimento de objetos, mas a partir do mecanismo assumi o controle e o delta de tempo entre cada ciclo do mundo.  Existem v√°rios modelos de tempo na Phaser e a implementa√ß√£o da velocidade padr√£o √© baseada em um deles.  Mas, por alguma raz√£o desconhecida, nenhum desses momentos tem estabilidade e eles n√£o podem fornecer velocidade constante.  Esse √© um problema conhecido que n√£o est√° planejado para ser corrigido na vers√£o 2: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github.com/photonstorm/phaser/issues/798</a> . <br><br>  Passei 2 dias na "competi√ß√£o" do jogador e na sombra e n√£o encontrei uma op√ß√£o de trabalho.  Ent√£o, no final, eu fiz todo o meu processamento de velocidade com base no tempo padr√£o em JS.  √â muito surpreendente que uma fun√ß√£o t√£o importante tenha recebido um apoio t√£o estranho no motor e tenha que implementar sua pr√≥pria bicicleta. <br></div></div><br>  Com essas piadas e piadas, passamos silenciosamente a segunda e a terceira semana.  Al√©m disso, a cada semana come√ßava com a frase "bem, na pr√≥xima semana somos obrigados a preparar uma vers√£o jog√°vel" - cada vez que nos parecia que est√°vamos prestes a estar prontos.  A completa falta de experi√™ncia e a presen√ßa de um tremendo otimismo √© a pior maneira de avaliar o prazo. <br><br>  Uma semana antes da entrega, na reuni√£o de desenvolvedores, nem conseguimos mostrar a vers√£o normal e tivemos que mostrar o servidor simulado. <br><br>  √â claro que, com essa velocidade de desenvolvimento, n√£o havia o que sonhar com uma lista de funcionalidades inicialmente concebida, e ainda mais com o prazer de ter coisas.  Portanto, tivemos que esquecer a "caixa de areia" e parar no mais simples jogo de tiro em 2D. <br><br><h3>  Desenvolvimento.  Semana 4, √∫ltima </h3><br>  Na √∫ltima semana de desenvolvimento, focamos na corre√ß√£o de bugs.  √â melhor ter algo modesto e funcional do que multifuncional, mas desmoronando.  Havia muitos problemas, e a maioria deles dizia respeito √† integra√ß√£o infeliz.  Aqui e ali, pequenas falhas apareciam, piorando bastante a impress√£o do jogo. <br><br>  Al√©m de corrigir bugs, eu tamb√©m trouxe o brilho final para a interface do usu√°rio: adicionando m√∫sicas e sons, tocando com fontes e melhorando pequenos detalhes. <br><br>  De todas as funcionalidades, nesta semana, apenas o sistema de pontos foi adicionado, al√©m da limita√ß√£o do estoque de bolas de neve e sua restaura√ß√£o. <br><br>  No √∫ltimo dia do Game Jam, fomos capazes de brincar um pouco com os colegas.  Apesar das cr√≠ticas positivas em geral, esta sess√£o de jogo n√£o teve √™xito devido a um bug cr√≠tico - as bolas de neve voaram no servidor e no cliente em velocidades diferentes.  Por causa disso, entrar em outros jogadores era mais prov√°vel que fosse um acidente. <br><br><div class="spoiler">  <b class="spoiler_title">Descri√ß√£o da causa e corre√ß√£o do erro</b> <div class="spoiler_text">  Cometemos esse bug no √∫ltimo momento, reduzindo o n√∫mero de FPS no servidor de 1000 experimental para 100. <br><br>  Deve-se observar que, at√© o momento, n√£o √©ramos capazes de obter movimentos totalmente s√≠ncronos no cliente e no servidor - ocasionalmente havia saltos em movimento.  Ao alterar o FPS, tentamos aumentar a capacidade de resposta do servidor. <br><br>  Quando comecei a pesquisar esse bug, descobri dois padr√µes: <br><br><ul><li>  o movimento do jogador funcionou corretamente e de forma est√°vel; </li><li>  O movimento das bolas de neve no cliente sempre foi mais r√°pido que no servidor. </li></ul><br>  O valor da velocidade dos objetos chega ao cliente a partir do servidor, ou seja, n√£o pode ser uma incompatibilidade banal de valores.  Al√©m disso, um aumento inverso no FPS para 1000 melhorou a situa√ß√£o. <br><br>  Passei muito tempo tentando corrigir esse erro.  Mas nada ajudou.  E no final, o motivo foi encontrado usando o Google - o box2d indiretamente limita a velocidade m√°xima movendo o objeto em n√£o mais de 2 pixels em uma etapa do mundo.  I.e.  a 100 FPS, a velocidade m√°xima √© de 200 pixels / s (p / s) e a 1000 FPS - 2000 p / s.  Este valor √© especificado em uma constante e n√£o pode ser alterado dinamicamente.  Isso explicava completamente o motivo da desacelera√ß√£o de nossas bolas de neve, porque sua velocidade deveria ter sido de 700 p / s, o que exigia um FPS est√°vel acima de 350. <br><br>  Para corrigir esse problema, aumentei o FPS para 500, mas por um motivo.  No box2d, voc√™ precisa passar para a fun√ß√£o step do mundo quanto tempo se passou desde a etapa anterior.  Antes da minha altera√ß√£o, sempre calcul√°vamos essa diferen√ßa antes de chamar a fun√ß√£o.  Mas agora, sabendo a frequ√™ncia desejada, sempre era poss√≠vel indicar um delta constante de 2ms.  Com o mundo ficando para tr√°s do real, os passos precisavam ser repetidos um ap√≥s o outro, at√© que o tempo do mundo alcan√ßasse o atraso.  Ent√£o, um pouco de sono e tudo √© novo. <br><br>  Essa corre√ß√£o, como esperado, resolveu o problema de velocidade das bolas de neve.  Al√©m disso, o problema com o movimento n√£o s√≠ncrono no servidor e no cliente finalmente desapareceu.  Naquela √©poca, essa cura milagrosa era uma surpresa completa para n√≥s, mas agora eu entendi o motivo: apesar dos 1000 FPS m√°ximos, ningu√©m cancelou a opera√ß√£o lenta do servidor e, especialmente, a coleta de lixo.  I.e.  em alguns momentos, o FPS poderia cair livremente abaixo dos 350 FPS necess√°rios, o que levou a saltos arbitr√°rios na velocidade. <br></div></div><br>  Ent√£o, felizes com um bug fechado e um brinquedo funcional, duas horas antes do prazo, est√°vamos prontos para nos render.  Restava apenas enviar o jogo para o site do projeto. <br><br>  Eu esperava que lan√ßar o jogo fosse tranquilo e em v√£o.  Era necess√°rio criar uma p√°gina de projeto, fazer uma descri√ß√£o, fazer upload de capturas de tela e muito mais.  N√≥s nos conhecemos, como esperado, de ponta a ponta.  Embora mais tarde, os organizadores ainda aceitassem projetos atrasados ‚Äã‚Äãindividualmente. <br><br><img src="https://habrastorage.org/webt/vk/er/sf/vkersfkvr9qzg0atrqywh1jgk4w.png" alt="imagem"><br>  <i>Captura de tela da vers√£o final do jogo</i> <br><br><h3>  Vota√ß√£o </h3><br>  De acordo com os termos da competi√ß√£o, imediatamente ap√≥s a conclus√£o do desenvolvimento, foi aberta uma vota√ß√£o de 20 dias.  Durante esse per√≠odo, todos puderam ver os projetos conclu√≠dos, dos quais mais de 200 foram acumulados, e apenas os participantes tiveram permiss√£o para votar nos projetos.  Cada jogo pode ser classificado nas seguintes categorias: geral, gr√°ficos, som, jogabilidade, capacidade de inova√ß√£o e relev√¢ncia para o tema. <br><br>  A fase de vota√ß√£o nos preparou uma surpresa ruim relacionada √† natureza multiplayer do nosso jogo.  Havia relativamente poucas pessoas assistindo aos jogos e a chance de encontrar o inimigo estava tendendo a zero.  I.e.  as pessoas foram para um cart√£o vazio, jogaram algumas bolas de neve, correram alguns metros e sa√≠ram desapontadas. <br><br>  Tentamos organizar sess√µes de jogos atrav√©s do f√≥rum do projeto.  Al√©m disso, Selim e eu entramos periodicamente no jogo, na esperan√ßa de divertir um andarilho entediado e solit√°rio.  Tudo isso quase n√£o produziu resultados. <br><br>  Eu estava interessado em assistir algumas pessoas testando o jogo.  Lembro-me especialmente do caso em que um jogador digitou v√°rios caracteres ao mesmo tempo e construiu um pentagrama de meninos.  N√£o sei o que o autor quis dizer, mas ainda tenho uma captura de tela do processo de cria√ß√£o. <br><br><img src="https://habrastorage.org/webt/cq/rn/yh/cqrnyhjzfmc5xzvzhllkon2gcs0.png" alt="imagem"><br><br>  Outro jogador "invadiu" o nosso jogo.  Temos uma verifica√ß√£o de tamanho de nome, mas apenas no lado do cliente.  Consequentemente, ele contornou essa defesa e come√ßou a se corresponder dessa maneira, cada vez que entrava em um novo personagem e entrava em sua frase em nome de um homem. <br><br>  Junto com a vota√ß√£o, meus colegas e eu jogamos novamente, nos vingando pelo jogo mal sucedido no dia em que o projeto foi conclu√≠do.  Desta vez, tudo correu muito bem e tivemos v√°rias id√©ias para novas fun√ß√µes, que, no entanto, era muito tarde para adicionar. <br><br>  Na minha opini√£o, a qualidade do jogo, principalmente em rela√ß√£o √† intera√ß√£o com o servidor, resultou em um n√≠vel muito bom.  Quantas vezes jogamos, n√£o percebemos nenhum problema, nem os ouvimos de outros jogadores.  Para mim, pessoalmente, isso foi uma surpresa, dada a qualidade e o n√∫mero de erros alguns dias antes da entrega. <br><br>  Os 20 dias dados para a avalia√ß√£o dos jogos duraram muito tempo, mas no final eles terminaram e chegou o t√£o esperado tempo de resultados. <br><br><img src="https://habrastorage.org/webt/l5/pq/uo/l5pquotx-kdt6onfu_kcdnl_d6y.png" alt="imagem"><br><br>  Assim, ocupamos o 36¬∫ lugar entre pouco mais de 200 participantes.  O que, por um lado, n√£o √© ruim para o primeiro projeto, mas, por outro lado, √© um tanto desagrad√°vel para o orgulho.  Especialmente considerando que o top 10 conseguiu bons jogos, mas nem todos mereciam aten√ß√£o especial. <br><br><h3>  Li√ß√µes aprendidas </h3><br>  A fim de obter li√ß√µes em condi√ß√µes de semi-estufa, tudo isso foi iniciado.  Tentamos inventar muitas coisas sozinhos e nos limitamos a um conjunto m√≠nimo de ferramentas para sentir os problemas e experimentar m√°s abordagens em nossa pr√≥pria pele.  Mas agora, tendo conhecimento sobre como faz√™-lo e por que, estudar a teoria ser√° mais f√°cil. <br><br>  <b>A necessidade de um artista</b> .  Como a pr√°tica demonstrou (n√£o apenas a nossa), voc√™ pode fazer um bom jogo sem bons gr√°ficos.  No entanto, a sele√ß√£o das figuras, fontes e elementos da interface do usu√°rio corretos ocupa a maior parte do tempo.  E o pior √© que, no final, eles n√£o coincidem.  Com isso, a atmosfera do tubo quente √© perdida e o jogo n√£o parece hol√≠stico. <br><br>  <b>Testes de jogo s√£o muito importantes</b> .  Devido a problemas com a velocidade de desenvolvimento, n√£o conseguimos testar a jogabilidade de nossa implementa√ß√£o na maioria das vezes.  Quando conseguimos jogar normalmente, havia muito pouco tempo para consertar as √°reas problem√°ticas.  E tivemos muita sorte por n√£o haver tantos problemas assim. <br>  Na minha opini√£o, para jogos, esses testes em usu√°rios reais s√£o muito mais importantes do que em aplicativos de neg√≥cios, porque, al√©m de conveni√™ncia e resolu√ß√£o de problemas do usu√°rio, ainda √© necess√°rio manter um certo n√≠vel de emo√ß√µes e envolvimento. <br><br>  <b>Nem todas as bibliotecas s√£o igualmente √∫teis</b> .  Quase ningu√©m desenvolve jogos em seu pr√≥prio mecanismo, e existem mecanismos no mercado para todas as ocasi√µes.  No quintal era 2017, e seria de esperar sua alta qualidade.  Eu escolhi a Phaser como um dos mecanismos JS mais jovens e recomendados.  Depois de todos os problemas que tivemos com ele, tenho medo de imaginar como os motores parecem piores.  N√£o, em geral, as impress√µes de trabalhar com a Phaser s√£o bastante positivas, especialmente considerando a boa documenta√ß√£o e exemplos.  Mas trabalhar com ele sem conhecer um grande n√∫mero de nuances √© muito dif√≠cil.  Na primavera, uma nova vers√£o ser√° lan√ßada e espero uma melhoria significativa.  E tamb√©m nos meus planos h√° um miniprojeto em outro mecanismo para comparar. <br>  E lembrarei desse problema com velocidade m√°xima no box2d por um longo tempo. <br><br>  <b>No processo do Game Jam, √© bem poss√≠vel aprender</b> .  Iniciando este projeto, n√£o sab√≠amos quase nada sobre o desenvolvimento de jogos, nem sobre as bibliotecas que usamos.  E a maior parte do tempo era gasta estudando essas coisas.  Apesar disso, ainda conseguimos levar o jogo a um estado completo. <br><br>  <b>N√£o √© necess√°ria muita funcionalidade</b> .  Estou um pouco surpreso que muitas pessoas gostaram do nosso jogo.  Sim, eles n√£o ficam sentados todas as noites, mas desfrutam de uma ou duas pequenas sess√µes.  Mas em nosso jogo n√£o h√° uma id√©ia original, nem uma grande quantidade de funcionalidades, nem qualquer hist√≥ria.  O mesmo pode ser dito da maioria dos jogos no Game Jam que receberam classifica√ß√µes positivas. <br><br>  <b>(Jogo) Jam √© um √≥timo motivo para tentar</b> .  N√£o importa o que: uma ideia, uma nova biblioteca, seus pr√≥prios pontos fortes.  Quando existe um objetivo claro e outras pessoas veem seu resultado, √© muito motivador n√£o ficar mole e dar o melhor de si.  E mesmo que o resultado seja pior do que o esperado, n√£o ser√° uma pena jog√°-lo fora, aprender li√ß√µes por si mesmo e seguir em frente! <br><br><h4>  Links para recursos: </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">selim.co/snowbox</a> - o jogo em si.  N√£o pressionamos o teste de estresse, por isso estou longe de ter certeza de que ele resistir√° a todos os que chegam.  Se o servidor mentir, voc√™ pode tentar uma simula√ß√£o - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">selim.co/snowbox/#mock</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github.com/wowselim/gameserver</a> - reposit√≥rio de c√≥digos do servidor </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github.com/bugy/snowbox-ui</a> - reposit√≥rio do cliente </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">itch.io/jam/game-off-2017</a> - P√°gina Game Jam </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">itch.io/jam/game-off-2017/rate/199650</a> - p√°gina de vota√ß√£o do jogo </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">opengameart.org</a> - a principal fonte de recursos do jogo </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">freesound.org</a> - sons de jogos foram retirados daqui </li></ul><br>  <i>Obrigado a todos pelo seu tempo e bom humor!</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt409679/">https://habr.com/ru/post/pt409679/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt409669/index.html">O que os inovadores de pagamento podem aprender com os macacos</a></li>
<li><a href="../pt409671/index.html">O que √© minera√ß√£o e por que √© minera√ß√£o em placas de v√≠deo</a></li>
<li><a href="../pt409673/index.html">Como estabelecer o controle de qualidade dos servi√ßos m√©dicos: a experi√™ncia da equipe DOC +</a></li>
<li><a href="../pt409675/index.html">A assimetria da natureza</a></li>
<li><a href="../pt409677/index.html">Cura enzim√°tica ou como se levantar rapidamente ap√≥s uma les√£o</a></li>
<li><a href="../pt409681/index.html">Pergunte a Ethan: Os Nonstars ainda podem se tornar estrelas?</a></li>
<li><a href="../pt409683/index.html">An√°lise do ultrabook ASUS ZenBook 13</a></li>
<li><a href="../pt409687/index.html">Formato sexta-feira: Mulheres na m√∫sica eletr√¥nica - Wendy Carlos e Susan Chani</a></li>
<li><a href="../pt409689/index.html">Os sortudos e perdedores do mundo do bitcoin: 7 hist√≥rias v√™m de 2017</a></li>
<li><a href="../pt409691/index.html">M√≠dia: EUA deixar√£o de financiar a ISS em 2025</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>