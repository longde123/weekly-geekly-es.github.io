<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïë üë©üèª‚Äçüé® üöà Commutateurs Insight Extreme Networks Ou pourquoi sur les commutateurs une machine virtuelle üêª üé≥ üåé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les gammes de commutateurs Extreme Networks SLX, VSP et EXOS incluent des mod√®les dot√©s d'une architecture mat√©rielle sp√©ciale, appel√©s collectivement...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Commutateurs Insight Extreme Networks Ou pourquoi sur les commutateurs une machine virtuelle</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/extremenetworks/blog/456860/">  Les gammes de commutateurs Extreme Networks SLX, VSP et EXOS incluent des mod√®les dot√©s d'une architecture mat√©rielle sp√©ciale, appel√©s collectivement ¬´Insight¬ª.  Contrairement √† la version standard, lorsque le contr√¥leur et le plan de donn√©es du commutateur sont connect√©s uniquement par le bus PCIe (avec toutes les limitations de bande passante qui en r√©sultent), les commutateurs ¬´Insight¬ª ont plusieurs interfaces de plan de donn√©es directement connect√©es aux machines virtuelles qui sont d√©ploy√©es sur le plan de contr√¥le.  Consid√©rez comment cela fonctionne et quelles ressources sont utilis√©es: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hv/fw/m_/hvfwm_k30novt0smnk42dyetzqa.jpeg"></div><br><a name="habracut"></a><br>  Les interfaces ¬´Insight¬ª sont g√©n√©ralement plusieurs liaisons 10GE d√©di√©es qui sont connect√©es de l'ASIC via le multiplexeur au plan de contr√¥le.  L√†, ils sont mont√©s en tant qu'interfaces Ethernet d'une machine virtuelle Ubuntu Linux 16.04 isol√©e, bri√®vement appel√©e TPVM (Third Party Virtual Machine).  Cette s√©paration physique vous permet de transf√©rer de grandes quantit√©s de trafic avec un minimum de retard, sans provoquer de d√©gradation des performances du contr√¥le ou du plan de donn√©es.  La virtualisation elle-m√™me est construite sur la base de KVM.  Ensemble, cela permet d'ex√©cuter des outils et des services tels que tcpdump, p0f, snort, DPI distribu√© ou des analyses, ainsi que de nombreux autres services directement sur l'appareil, sans d√©ployer d'infrastructure r√©seau suppl√©mentaire.  Pour acc√©l√©rer le d√©ploiement du TVPM lui-m√™me, l'image dispose de nombreux packages n√©cessaires pr√©d√©finis: <br><br><ul><li>  essentiel √† la construction </li><li>  checkinstall </li><li>  iperf </li><li>  mtools </li><li>  netperf </li><li>  qemu-guest-agent </li><li>  tshark </li><li>  valgrind </li><li>  vim-gnome </li><li>  Wirehark </li><li>  xterm </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/r_/tv/gh/r_tvghlnu_iz4grq0j7aoyddgeg.jpeg" width="480" height="640"></div><br><br>  √Ä bord des commutateurs ¬´Insight¬ª, un processeur Intel XEON x86, une RAM accrue et un lecteur SSD sont install√©s, ce qui vous permet d'allouer des ressources en cas de d√©ploiement de plusieurs machines virtuelles.  Les ressources elles-m√™mes sont d√©di√©es et isol√©es afin de ne pas perturber le syst√®me d'exploitation du commutateur lui-m√™me. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nb/xy/-1/nbxy-1_uzzie2ct4psuyql0mrys.jpeg" width="480" height="360"></div><br>  Pour utiliser TPVM conform√©ment √† sa destination, vous devez effectuer seulement quatre √©tapes: <br><br><ol><li>  T√©l√©chargez et installez TVPM </li><li>  Configurer les interfaces Insight </li><li>  Ajouter des ACL ou une mise en miroir du trafic √† ces interfaces </li><li>  Lancer les applications TPVM </li></ol><br>  Ci-dessous est en fait un petit exemple de la fa√ßon dont tout se d√©roule et fonctionne.  Une fois l'image TPVM t√©l√©charg√©e via scp2, vous devez ex√©cuter plusieurs commandes pour installer la machine virtuelle: <br><br><pre><code class="plaintext hljs">slx# show tpvm status TPVM is not installed slx# tpvm install Installation starts. To check the status use 'show tpvm status' command slx# show tpvm status TPVM is being installed now</code> </pre> <br>  Lorsque le TPVM a d√©j√† d√©marr√©, il existe plusieurs fa√ßons d'y acc√©der.  Par d√©faut, la machine virtuelle tentera d'obtenir l'adresse via DCHP, ou elle peut attribuer une adresse IPv6 de liaison locale, apr√®s quoi il sera possible d'obtenir un acc√®s SSH.  Il existe √©galement une connexion de console au TPVM via TTY. <br><br><pre> <code class="plaintext hljs">slx# show tpvm ip-address IPv4: eth0 192.168.2.249 docker0 172.17.0.1 IPv6:2a02:0000:c000:0:da80:00ff:f00b:8800 eth0: fe80::da80:00ff:f00b:8800 slx# ssh 192.168.2.249 -l admin vrf mgmt-vrf admin@192.168.2.249's password: Welcome to Ubuntu 16.04.4 LTS (GNU/Linux 4.4.0‚Äì128-generic x86_64) Last login: Tue Apr 2 12:12:46 2019 admin@TPVM:~$ sudo -s [sudo] password for admin: root@TPVM:~# id uid=0(root) gid=0(root) groups=0(root)</code> </pre> <br>  L'interface eth0 est notre gestion, et eth1 est le ¬´Insight¬ª que nous devons configurer. <br><br><pre> <code class="plaintext hljs">root@TPVM:~# ip -4 link 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000 link/ether d8:00:00:00:00:04 brd ff:ff:ff:ff:ff:ff 3: eth1: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000 link/ether d8:00:00:00:00:02 brd ff:ff:ff:ff:ff:ff 4: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default link/ether 02:42:28:2d:60:b9 brd ff:ff:ff:ff:ff:ff</code> </pre> <br>  Par analogie avec la technologie d'empilement, les derniers ports sur le panneau avant du commutateur ont un double objectif et nous devons les transf√©rer en mode Insight, apr√®s quoi le transfert de donn√©es √† travers eux sera temporairement impossible. <br><br><pre> <code class="plaintext hljs">slx# conf t slx(config)# hardware slx(config-hardware)#connector 0/48 slx(config-connector-0/48)# no breakout slx(config-connector-0/48)# insight mode</code> </pre> <br>  Le syst√®me va cr√©er une interface 0/125 que nous utiliserons <br><br><pre> <code class="plaintext hljs">slx(config)# interface Port-channel 22 slx(config-Port-channel-22)# insight enable slx(config-Port-channel-22)# no shutdown slx(config)# interface Ethernet 0/125 slx(conf-if-eth-0/125)# channel-group 22 mode on type standard slx(conf-if-eth-0/125)# no shutdown</code> </pre><br>  V√©rifiez les interfaces sur le commutateur: <br><br><pre> <code class="plaintext hljs">slx(conf-if-eth-0/125)# do show interface ethernet 0/125 Ethernet 0/125 is up, line protocol is up (connected) slx(conf-if-eth-0/125)# do show interface port-channel 22 Port-channel 22 is up, line protocol is up</code> </pre> <br>  et sur TPVM <br><br><pre> <code class="plaintext hljs">root@TPVM:~#dmesg [ 2172.748418] ixgbe 0000:00:09.0 eth1: NIC Link is Up 10 Gbps [ 2172.748508] IPv6: eth1: link becomes ready</code> </pre> <br>  Vous pouvez maintenant raccrocher les ACL sur Insight, configurer un VLAN (ou plusieurs) et inspecter le trafic. <br><br><pre> <code class="plaintext hljs">root@TPVM:~# tcpdump -i eth1 -n -v tcpdump: listening on eth1, link-type EN10MB (Ethernet), capture size 262144 bytes 02:38:38.107923 IP6 fe80::8802 &gt; ff02::16: HBH ICMP6, multicast listener report v2, 1 group record(s), length 28 02:38:39.059939 IP6 fe80::8802 &gt; ff02::16: HBH ICMP6, multicast listener report v2, 1 group record(s), length 28 02:38:39.119922 LLDP, length 111: slx 02:38:40.120076 LLDP, length 111: slx</code> </pre> <br>  Une utilisation ult√©rieure n'est limit√©e que par les exigences ou l'imagination du client.  Les ing√©nieurs, partenaires et clients d'Extreme Networks ont test√© de nombreuses applications diff√©rentes telles que: <br><br><ul><li>  Serveur vnc </li><li>  Serveur DHCP </li><li>  Serveur AAA (Radius et TACACS) </li><li>  Serveur DNS </li><li>  Ostinato - Cr√©ateur de paquets Ostinato, g√©n√©rateur et analyseur de trafic r√©seau avec interface graphique. </li><li>  R√©cepteur d'interruption SNMP </li><li>  Surricata - D√©tection d'intrusion en temps r√©el (IDS), pr√©vention des intrusions en ligne (IPS), surveillance de la s√©curit√© du r√©seau (NSM) et traitement PCAP hors ligne. </li><li>  Serveur Syslog </li><li>  Google-chrome et cURL </li><li>  Arpsponge </li><li>  Perfsonar </li><li>  Marionnette </li><li>  Logstash </li><li>  Docker-Container (version prise en charge: docker-1.13.0) </li></ul><br>  Si vous avez des questions, veuillez contacter notre repr√©sentant local <a href="">Extreme Networks.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456860/">https://habr.com/ru/post/fr456860/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456850/index.html">¬´Yeux de chiot¬ª: 30 000 ans de co-√©volution chien et humain</a></li>
<li><a href="../fr456852/index.html">Simplifiez le dessin des drapeaux Enum dans Unity</a></li>
<li><a href="../fr456854/index.html">Du kit d'interface utilisateur au syst√®me de conception</a></li>
<li><a href="../fr456856/index.html">Comment choisir le meilleur endroit pour ouvrir une succursale et visualiser les r√©sultats sur les cartes</a></li>
<li><a href="../fr456858/index.html">Ansible: mises √† jour des solutions cl√©s pour automatiser votre monde</a></li>
<li><a href="../fr456862/index.html">Ce que j'ai appris de mon am√®re exp√©rience (plus de 30 ans dans le d√©veloppement de logiciels)</a></li>
<li><a href="../fr456866/index.html">Quand ils fabriqueront des ¬´cheburnet¬ª √† partir d'Internet: aper√ßu du projet</a></li>
<li><a href="../fr456868/index.html">Nouveau gestionnaire de connexion √† distance 3CX SBC dans la version b√™ta de la mise √† jour 2 V16</a></li>
<li><a href="../fr456870/index.html">Comment gagner de l'argent sur des actions sans sp√©culation: 5 entreprises avec des dividendes √©lev√©s</a></li>
<li><a href="../fr456872/index.html">Contr√¥le des appareils √©lectroniques √† la fronti√®re - un besoin ou une violation des droits de l'homme?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>