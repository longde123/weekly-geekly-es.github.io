<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯЖХ ЁЯО╖ ЁЯП│я╕П рд╢рд╛рдирджрд╛рд░ рдкреНрд▓рдЧрдЗрдиреНрд╕, рд╡реЙрд▓реНрдпреВрдоред 2. рдЕрднреНрдпрд╛рд╕ тЧ╜я╕П ЁЯС╗ ЁЯей</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдпрд╣рд╛рдВ рдЖрдк рдкреНрд▓рдЧ-рдЗрди рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рд╕рд╛рде рдкрд╣рд▓рд╛ рд▓реЗрдЦ рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред 


 рдФрд░ рдЗрд╕ рднрд╛рдЧ рдореЗрдВ рдореИрдВ рдЖрдкрдХреЛ рдмрддрд╛рдКрдВрдЧрд╛ рдХрд┐ рдкреНрд▓рдЧрдЗрди рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рджреМрд░рд╛рди рд╣рдореЗрдВ рдХрд┐рди рд╕рдорд╕реНрдпрд╛...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╢рд╛рдирджрд╛рд░ рдкреНрд▓рдЧрдЗрдиреНрд╕, рд╡реЙрд▓реНрдпреВрдоред 2. рдЕрднреНрдпрд╛рд╕</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/463611/"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рдЖрдк рдкреНрд▓рдЧ-рдЗрди рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рд╕рд╛рде рдкрд╣рд▓рд╛ рд▓реЗрдЦ рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдФрд░ рдЗрд╕ рднрд╛рдЧ рдореЗрдВ рдореИрдВ рдЖрдкрдХреЛ рдмрддрд╛рдКрдВрдЧрд╛ рдХрд┐ рдкреНрд▓рдЧрдЗрди рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рджреМрд░рд╛рди рд╣рдореЗрдВ рдХрд┐рди рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рд╛ рдФрд░ рд╣рдордиреЗ рдЙрдиреНрд╣реЗрдВ рдХреИрд╕реЗ рд╣рд▓ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреАред <br><img src="https://habrastorage.org/webt/db/cn/c-/dbcnc-m5gfz68a0hpvnt2qjdcgw.png" alt="рдЫрд╡рд┐"></p><a name="habracut"></a><br><h1 id="o-chem-budu-govorit">  рдореИрдВ рдХрд┐рд╕ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реВрдВрдЧрд╛? </h1><br><ul><li>  рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рднрд╛рдЧ <br><ul><li>  рдмрд╣реБ рдпреВрдЖрдИ </li><li>  рдкреНрд▓рдЧрдЗрдиреНрд╕ рдореЗрдВ рдбрд┐ </li><li>  рдХреЛрдб рдЬрдирд░реЗрд╢рди </li><li>  рдХреЛрдб рд╕рдВрд╢реЛрдзрди </li></ul></li><li>  рдЖрдЧреЗ рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИ? <br><ul><li>  рдЯрд┐рдкреНрд╕ </li><li>  рдкреВрдЫреЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рд╢реНрди </li></ul></li></ul><br><h2 id="mnogostranichnyy-ui">  рдмрд╣реБ рдпреВрдЖрдИ </h2><br><p>  рдкрд╣рд▓реА рдЪреАрдЬрд╝ рдЬреЛ рд╣рдореЗрдВ рдХрд░рдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рдереА рд╡рд╣ рдереА рдПрдХ рдорд▓реНрдЯреА-рдкреЗрдЬ UIред  рд╣рдордиреЗ рдкрд╣рд▓реЗ рдЬрдЯрд┐рд▓ рдлреЙрд░реНрдо рдХреЛ рдЪреЗрдХрдорд╛рд░реНрдХ, рдЗрдирдкреБрдЯ рдлрд╝реАрд▓реНрдб рдХреЗ рдПрдХ рд╕рдореВрд╣ рдХреЗ рд╕рд╛рде рдмрдирд╛рдпрд╛ред  рдереЛрдбрд╝реА рджреЗрд░ рдмрд╛рдж, рд╣рдордиреЗ рдореЙрдбреНрдпреВрд▓ рдХреА рдПрдХ рд╕реВрдЪреА рдХрд╛ рдЪрдпрди рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдЬрд┐рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирдП рдореЙрдбреНрдпреВрд▓ рд╕реЗ рдЬреЛрдбрд╝ рд╕рдХрддрд╛ рд╣реИред  рдФрд░ рд╣рдо рдЙрд╕ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЙрдбреНрдпреВрд▓ рдХреЛ рднреА рдЪреБрдирдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП рд╣рдо рдирд┐рд░реНрдорд┐рдд рдореЙрдбреНрдпреВрд▓ рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рддреЗ рд╣реИрдВред </p><br><p>  рдПрдХ рд░реВрдк рдкрд░ рдЗрддрдиреЗ рд╕рд╛рд░реЗ рдирд┐рдпрдВрддреНрд░рдг рд░рдЦрдирд╛ рдмрд╣реБрдд рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЙрдиреНрд╣реЛрдВрдиреЗ рддреАрди рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреГрд╖реНрда, рддреАрди рдЕрд▓рдЧ-рдЕрд▓рдЧ рдХреБрдХреА рдХрдЯрд░ рдмрдирд╛рдПред  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдЬрд╛рджреВрдЧрд░ рд╕рдВрд╡рд╛рджред </p><br><p><img src="https://habrastorage.org/webt/hd/jw/wf/hdjwwfojlb6w7gj_sacdswi802g.png" alt="рдЫрд╡рд┐"></p><br><p>  рд▓реЗрдХрд┐рди рдкреНрд▓рдЧрдЗрдиреНрд╕ рдореЗрдВ рдорд▓реНрдЯреА-рдкреЗрдЬ рдпреВрдЖрдИ рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж рд╕реЗ рдмрд╣реБрдд рджрд░реНрджрдирд╛рдХ рд╣реИ, рдореИрдВ рдХреБрдЫ рддреИрдпрд╛рд░ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛ред  рдФрд░ IDEA рдХреЗ рдЖрдВрддреЛрдВ рдореЗрдВ, рд╣рдордиреЗ <em>рд╡рд┐рдЬрд╛рд░реНрдбрдбрд╛рдпрд▓реЙрдЧ</em> рдирд╛рдордХ рдПрдХ рд╡рд░реНрдЧ рдХреА рдЦреЛрдЬ рдХреАред </p><br><p><img src="https://habrastorage.org/webt/tl/gr/6z/tlgr6ztp3yro6-yyyqyhjsd55ky.png" alt="рдЫрд╡рд┐"></p><br><p>  рдпрд╣ рдПрдХ рдирд┐рдпрдорд┐рдд рд╕рдВрд╡рд╛рдж рдкрд░ рдПрдХ рдЖрд╡рд░рдг рд╡рд░реНрдЧ рд╣реИ, рдЬреЛ рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рд╡рд┐рдЬрд╝рд╛рд░реНрдб рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдкреНрд░рдЧрддрд┐ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░ рд░рд╣рд╛ рд╣реИ, рдФрд░ рдЖрд╡рд╢реНрдпрдХ рдмрдЯрди (рдкрд┐рдЫрд▓рд╛, рдЕрдЧрд▓рд╛, рд╕рдорд╛рдкреНрдд, рдЖрджрд┐) рджрд┐рдЦрд╛ рд░рд╣рд╛ рд╣реИред  рдПрдХ рд╡рд┐рд╢реЗрд╖ <em>WizardModel, рд╡рд┐рдЬрд╝рд╛рд░реНрдбрдбрд╛рдпрд▓реЙрдЧ рд╕реЗ</em> рдЬреБрдбрд╝рд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡рд┐рдЬрд╝рд╛рд░реНрдбрд╕реНрдЯреЗрдкреНрд╕ рдЬреЛрдбрд╝реЗ рдЧрдП рд╣реИрдВред  рдкреНрд░рддреНрдпреЗрдХ <em>рд╡рд┐рдЬрд╝рд╛рд░реНрдбрд╕реНрдЯреЗрдк</em> рдПрдХ рдЕрд▓рдЧ рд░реВрдк рд╣реИред </p><br><p>  рдЕрдкрдиреЗ рд╕рд░рд▓рддрдо рд░реВрдк рдореЗрдВ, рд╕рдВрд╡рд╛рдж рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИ: </p><br><div class="spoiler">  <b class="spoiler_title">WizardDialog</b> <div class="spoiler_text"><pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyWizardDialog</span></span></span></span>( model: MyWizardModel, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> onFinishButtonClickedListener: (MyWizardModel) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> ): WizardDialog&lt;MyWizardModel&gt;(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, model) { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onWizardGoalAchieved</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onWizardGoalAchieved() onFinishButtonClickedListener.invoke(myModel) } }</code> </pre> </div></div><br><p>  <em>рд╣рдо WizardDialog</em> рд╡рд░реНрдЧ рд╕реЗ <em>рдЗрдирд╣реЗрд░рд┐рдЯ рдХрд░реЗрдВрдЧреЗ</em> , рд╣рдорд╛рд░реЗ <em>WizardModel</em> рдХреЗ рд╡рд░реНрдЧ рдХреЗ рд╕рд╛рде рдкреИрд░рд╛рдореАрдЯрд░ рдХрд░реЗрдВред  рдЗрд╕ рд╡рд░реНрдЧ рдореЗрдВ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдХреЙрд▓рдмреИрдХ ( <em>onWizardGoalAchieve</em> ) рд╣реИ, рдЬреЛ рд╣рдореЗрдВ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╡рд┐рдЬрд╝рд╛рд░реНрдб рд╕реЗ рдЕрдВрдд рддрдХ рдЧрдпрд╛ рдФрд░ "рдлрд┐рдирд┐рд╢" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд┐рдпрд╛ред <br>  рдпрд╣ рдзреНрдпрд╛рди рд░рдЦрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдЗрд╕ рд╡рд░реНрдЧ рдХреЗ рднреАрддрд░ рд╕реЗ рдХреЗрд╡рд▓ <em>рд╡рд┐рдЬрд╝рд╛рд░реНрдбрдореЙрдбрд▓</em> рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рд╣реИред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рд╡рд┐рдЬрд╝рд╛рд░реНрдб рдХреЗ рдкрд╛рд░рд┐рдд рд╣реЛрдиреЗ рдХреЗ рджреМрд░рд╛рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдПрдХрддреНрд░ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА рдбреЗрдЯрд╛, рдЖрдкрдХреЛ рд╡рд┐рдЬрд╝рд╛рд░реНрдбрдореЙрдбрд▓ рдореЗрдВ рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ред </p><br><div class="spoiler">  <b class="spoiler_title">WizardModel</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyWizardModel</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WizardModel</span></span></span></span>(<span class="hljs-string"><span class="hljs-string">"Title for my wizard"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add(MyWizardStep1()) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add(MyWizardStep2()) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add(MyWizardStep3()) } }</code> </pre> </div></div><br><p>  рдореЙрдбрд▓ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИ: рд╣рдо <em>рд╡рд┐рдЬрд╝рд╛рд░реНрдбрдореЙрдбрд▓</em> рд╡рд░реНрдЧ рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдмрд┐рд▓реНрдЯ-рдЗрди <em>рдРрдб</em> рдореЗрдердб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <em>рдбрд╛рдпрд▓</em> рдХрд░рдиреЗ рдХреЗ <em>рд▓рд┐рдП</em> рдЕрд▓рдЧ <em>рд╡рд┐рдЬрд╛рд░реНрдбрд╕реНрдЯреЗрдкреНрд╕</em> <em>рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ</em> ред </p><br><div class="spoiler">  <b class="spoiler_title">WizardStep</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyWizardStep1</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WizardStep</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MyWizardModel</span></span></span><span class="hljs-class">&gt;</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentPanel: JPanel <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(state: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">WizardNavigationState</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: JComponent { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> contentPanel } }</code> </pre> </div></div><br><p>  <em>рд╡рд┐рдЬрд╛рд░реНрдбрд╕реНрдЯреЗрдкреНрд╕</em> рднреА рд╕рд░рд▓ рд╣реИрдВ: <em>рд╡рд┐рдЬрд╛рд░реНрдбрд╕реНрдЯреЗрдк</em> рд╡рд░реНрдЧ рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ <em>рдорд┐рд▓рд╛</em> , рдЗрд╕реЗ рд╣рдорд╛рд░реЗ рдореЙрдбрд▓ рд╡рд░реНрдЧ рдХреЗ рд╕рд╛рде <em>рдорд╛рдирдХреАрдХреГрдд рдХрд░реЗрдВ</em> , рдФрд░, рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд, рддреИрдпрд╛рд░ рд╡рд┐рдзрд┐ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░реЗрдВ, рдЬреЛ рдЖрдкрдХреЗ рднрд╡рд┐рд╖реНрдп рдХреЗ рд░реВрдк рдХреЗ рдореВрд▓ рдШрдЯрдХ рдХреЛ рд▓реМрдЯрд╛рддрд╛ рд╣реИред </p><br><p>  рд╕рд░рд▓ рд╢рдмреНрджреЛрдВ рдореЗрдВ, рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдРрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡рд┐рдХ рджреБрдирд┐рдпрд╛ рдореЗрдВ, рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рдЖрдкрдХрд╛ рд░реВрдк рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рдХрд╛ рд╣реЛрдЧрд╛: </p><br><p><img src="https://habrastorage.org/webt/as/6d/mc/as6dmcznqssdt7zwhdz7ndebuv8.png" alt="рдЫрд╡рд┐"></p><br><p>  рдпрд╣рд╛рдВ рдЖрдк рдЙрди рд╕рдордп рдХреЛ рдпрд╛рдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрдм рд╣рдо рдПрдВрдбреНрд░реЙрдЗрдб рдХреА рджреБрдирд┐рдпрд╛ рдореЗрдВ рдЕрднреА рддрдХ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рдереЗ рдХрд┐ рдХреНрд▓реАрди рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░, рдПрдорд╡реАрдкреА рдХреНрдпрд╛ рд╣реИ рдФрд░ рд╕рднреА рдХреЛрдб рдПрдХ рдЧрддрд┐рд╡рд┐рдзрд┐ рдореЗрдВ рд▓рд┐рдЦреЗ рд╣реИрдВред  рд╡рд╛рд╕реНрддреБрд╢рд┐рд▓реНрдк рд▓рдбрд╝рд╛рдИ рдХреЗ рд▓рд┐рдП рдПрдХ рдирдпрд╛ рдХреНрд╖реЗрддреНрд░ рд╣реИ, рдФрд░ рдпрджрд┐ рдЖрдк рднреНрд░рдорд┐рдд рд╣реЛрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдкреНрд▓рдЧ рдЗрди рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА рдЦреБрдж рдХреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><h3 id="vyvod">  рдирд┐рд╖реНрдХрд░реНрд╖ </h3><br><p>  рдпрджрд┐ рдЖрдкрдХреЛ рдПрдХ рдмрд╣реБ-рдкреГрд╖реНрда UI рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ <em>рд╡рд┐рдЬрд╝рд╛рд░реНрдбрдбрд╛рдпрд▓реЙрдЧ рдХрд╛</em> рдЙрдкрдпреЛрдЧ <em>рдХрд░реЗрдВ</em> - рдпрд╣ рдЖрд╕рд╛рди рд╣реЛрдЧрд╛ред </p><br><p>  рд╣рдо рдЕрдЧрд▓реЗ рд╡рд┐рд╖рдп рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВ - рдкреНрд▓рдЧ рдЗрди рдореЗрдВ DIред </p><br><h2 id="di-v-plaginah">  рдкреНрд▓рдЧрдЗрдиреНрд╕ рдореЗрдВ рдбрд┐ </h2><br><p>  рдПрдХ рдкреНрд▓рдЧрдЗрди рдХреЗ рдЕрдВрджрд░ рдирд┐рд░реНрднрд░рддрд╛ рдЗрдВрдЬреЗрдХреНрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реЛ рд╕рдХрддреА рд╣реИ? <br>  рдкрд╣рд▓рд╛ рдХрд╛рд░рдг рдкреНрд▓рдЧрдЗрди рдХреЗ рдЕрдВрджрд░ рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХрд╛ рд╕рдВрдЧрдарди рд╣реИред </p><br><p>  рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ, рдЖрдорддреМрд░ рдкрд░ рдкреНрд▓рдЧрдЗрди рдХреЗ рдЕрдВрджрд░ рдХрд┐рд╕реА рддрд░рд╣ рдХреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХреНрдпреЛрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?  рдПрдХ рдкреНрд▓рдЧ-рдЗрди рдПрдХ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдЪреАрдЬ рд╣реИ, рдПрдХ рдмрд╛рд░ рдЬрдм рдореИрдВрдиреЗ рдЗрд╕реЗ рд▓рд┐рдЦрд╛ рдерд╛, рдФрд░ рдореИрдВ рд╕рдм рдХреБрдЫ рднреВрд▓ рдЧрдпрд╛ рдерд╛ред <br>  рд╣рд╛рдВ, рд▓реЗрдХрд┐рди рдирд╣реАрдВред <br>  рдЬрдм рдЖрдкрдХрд╛ рдкреНрд▓рдЧрдЗрди рдмрдврд╝рддрд╛ рд╣реИ, рдЬрдм рдЖрдк рдмрд╣реБрдд рд╕рд╛рд░реЗ рдХреЛрдб рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рддреЛ рд╕рдВрд░рдЪрд┐рдд рдХреЛрдб рдХрд╛ рд╕рд╡рд╛рд▓ рдЕрдкрдиреЗ рдЖрдк рдЙрдарддрд╛ рд╣реИред  рдпрд╣рд╛рдВ DI рдХрд╛рдо рдЖ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рджреВрд╕рд░рд╛, рдЕрдзрд┐рдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдХрд╛рд░рдг - DI рдХреА рдорджрдж рд╕реЗ рдЖрдк рдЕрдиреНрдп рдкреНрд▓рдЧрдЗрдиреНрд╕ рдХреЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рд▓рд┐рдЦреЗ рдЧрдП рдШрдЯрдХреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдЗрд╡реЗрдВрдЯ рдмрд╕реЗрдВ, рд▓реЙрдЧрд░ рдФрд░ рдмрд╣реБрдд рдХреБрдЫ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдЗрд╕ рддрдереНрдп рдХреЗ рдмрд╛рд╡рдЬреВрдж рдХрд┐ рдЖрдк рдЗрдВрдЯреЗрд▓реАрдЬреЗ рдЖрдИрдбреАрдИрдП рдХреЗ рдЕрдВрджрд░ рдХрд┐рд╕реА рднреА рдбреАрдЖрдИ рдлреНрд░реЗрдорд╡рд░реНрдХ (рд╕реНрдкреНрд░рд┐рдВрдЧ, рдбреИрдЧрд░, рдЖрджрд┐) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рд╣реИрдВ, рдЖрдкрдХрд╛ рдЕрдкрдирд╛ рдбреАрдЖрдИ рдлреНрд░реЗрдорд╡рд░реНрдХ рд╣реИ, рдЬреЛ рдЕрдореВрд░реНрдд рдХреЗ рдкрд╣рд▓реЗ рддреАрди рд╕реНрддрд░реЛрдВ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ, рдЬрд┐рд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рд╣реА рдмрд╛рдд рдХреА рдереА: <em>рдПрдкреНрд▓рд┐рдХреЗрд╢рди</em> , <em>рдкреНрд░реЛрдЬреЗрдХреНрдЯ</em> рдФрд░ <em>рдореЙрдбреНрдпреВрд▓</em> ред </p><br><p><img src="https://habrastorage.org/webt/ix/kh/dk/ixkhdkerqkc0sapkdvgj5qsg_44.png" alt="рдЫрд╡рд┐"></p><br><p>  рдЗрди рд╕реНрддрд░реЛрдВ рдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХрд╛ рдЕрдкрдирд╛ рдЕрдореВрд░реНрддрди рд╣реИ рдЬрд┐рд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><em>рдШрдЯрдХ</em></a> рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЖрд╡рд╢реНрдпрдХ рд╕реНрддрд░ рдХреЗ рдШрдЯрдХ рдХреЛ рдЗрд╕ рд╕реНрддрд░ рдХреА рд╡рд╕реНрддреБ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдкреНрд░рддрд┐ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП <em>ApplicationComponent</em> рдХреЛ <em>рдЕрдиреБрдкреНрд░рдпреЛрдЧ</em> рд╡рд░реНрдЧ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдПрдХ рдмрд╛рд░ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ <em>Project</em> Instances рдХреЗ рд▓рд┐рдП <em>ProjectComponent рдХреЗ</em> рд╕рдорд╛рди рд╣реИ, рдФрд░ рдЗрд╕реА рддрд░рд╣ред </p><br><p>  DI рдврд╛рдВрдЪреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ? </p><br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдПрдХ рд╡рд░реНрдЧ рдмрдирд╛рдПрдВ рдЬреЛ рдЖрд╡рд╢реНрдпрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдШрдЯрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ - рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рд╡рд░реНрдЧ рдЬреЛ <em>рдЕрдиреБрдкреНрд░рдпреЛрдЧрдХрдВрдкреНрд▓реЗрдВрдЯ</em> , рдпрд╛ <em>рдкреНрд░реЛрдЬреЗрдХреНрдЯрдХрдВрдкреЛрдиреЗрдВрдЯ</em> , рдпрд╛ <em>рдореЙрдбреНрдпреВрд▓рдХрдВрдкреНрд▓реЗрдВрдЯ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ</em> ред  рдЙрд╕реА рд╕рдордп, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЙрд╕ рд╕реНрддрд░ рдХреА рдПрдХ рд╡рд╕реНрддреБ рдХреЛ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣рдо рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рдпрд╣, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <em>ProjectComponent рдореЗрдВ</em> рдЖрдк <em>Project</em> рд╡рд░реНрдЧ рдХреЗ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдШрдЯрдХ рдХрдХреНрд╖рд╛рдПрдВ рдмрдирд╛рдирд╛</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAppComponent</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> application: Application, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> anotherApplicationComponent: AnotherAppComponent ): ApplicationComponent <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyProjectComponent</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> project: Project, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> anotherProjectComponent: AnotherProjectComponent, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myAppComponent: MyAppComponent ): ProjectComponent <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyModuleComponent</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> module: Module, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> anotherModuleComponent: AnotherModuleComponent, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myProjectComponent: MyProjectComponent, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myAppComponent: MyAppComponent ): ModuleComponent</code> </pre> </div></div><br><p>  рджреВрд╕рд░реЗ, рд╕рдорд╛рди рд╕реНрддрд░ рдпрд╛ рдЙрдЪреНрдЪрддрд░ рдХреЗ рдЕрдиреНрдп рдШрдЯрдХреЛрдВ рдХреЛ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <em>ProjectComponent рдореЗрдВ</em> рдЖрдк рдЕрдиреНрдп <em>ProjectComponent</em> рдпрд╛ <em>ApplicationComponent</em> рдХреЛ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рд╡рд╣ рдЬрдЧрд╣ рд╣реИ рдЬрд╣рд╛рдВ рдЖрдк "рдПрд▓рд┐рдпрди" рдШрдЯрдХреЛрдВ рдХреЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдЙрд╕реА рд╕рдордп, IDEA рдЧрд╛рд░рдВрдЯреА рджреЗрддрд╛ рд╣реИ рдХрд┐ рд╕рдВрдкреВрд░реНрдг рдирд┐рд░реНрднрд░рддрд╛ рдЧреНрд░рд╛рдл рдХреЛ рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдЗрдХрдЯреНрдард╛ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд╕рднреА рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рд╕рд╣реА рдХреНрд░рдо рдореЗрдВ рдмрдирд╛рдП рдЬрд╛рдПрдВрдЧреЗ рдФрд░ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕рдВрд╢реЛрдзрд┐рдд рд╣реЛрдВрдЧреЗред </p><br><p>  рдЕрдЧрд▓реА рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><em>plugin.xml</em></a> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдШрдЯрдХ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░реЗрдВред  рдЬреИрд╕реЗ рд╣реА рдЖрдк рдШрдЯрдХ рдШрдЯрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <em>рдЕрдиреБрдкреНрд░рдпреЛрдЧрдХрдВрдкреЛрдиреЗрдВрдЯ</em> ), IDEA рддреБрд░рдВрдд plugin.xml рдореЗрдВ рдЕрдкрдиреЗ рдШрдЯрдХ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдХреА рдкреЗрд╢рдХрд╢ рдХрд░реЗрдЧрд╛ред </p><br><div class="spoiler">  <b class="spoiler_title">Plugin.xml рдореЗрдВ рдШрдЯрдХ рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░реЗрдВ</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project-components</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">component</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">interface-class</span></span></span><span class="hljs-tag">&gt;</span></span> com.experiment.MyProjectComponent <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">interface-class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">implementation-class</span></span></span><span class="hljs-tag">&gt;</span></span> com.experiments.MyProjectComponentImpl <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">implementation-class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">component</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project-components</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  рдпрд╣ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?  рдПрдХ рд╡рд┐рд╢реЗрд╖ <em>&lt;рдкреНрд░реЛрдЬреЗрдХреНрдЯ-рдШрдЯрдХ&gt;</em> рдЯреИрдЧ рдкреНрд░рдХрдЯ рд╣реЛрддрд╛ рд╣реИ ( <em>&lt;рдПрдкреНрд▓рд┐рдХреЗрд╢рди-рдШрдЯрдХ&gt;</em> , <em>&lt;рдореЙрдбреНрдпреВрд▓-рдШрдЯрдХ&gt;</em> - рд╕реНрддрд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░)ред  рдЗрд╕рдХреЗ рдЕрдВрджрд░ рдПрдХ рдЯреИрдЧ рд╣реИ <em>, рдЗрд╕рдореЗрдВ рджреЛ рдФрд░ рдЯреИрдЧ рд╣реИрдВ: <em>&lt;рдЗрдВрдЯрд░рдлрд╝реЗрд╕-рдХреНрд▓рд╛рд╕&gt;</em> , рдЬрд╣рд╛рдВ рдЖрдкрдХреЗ рдШрдЯрдХ рдХрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдирд╛рдо рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ <em>&lt;рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди-рд╡рд░реНрдЧ&gt;</em> , рдЬрд╣рд╛рдВ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╡рд░реНрдЧ рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред</em>  <em>рдПрдХ рдФрд░ рдПрдХ рд╣реА рд╡рд░реНрдЧ рдПрдХ рдШрдЯрдХ рдпрд╛ рдЗрд╕рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд╛ рдПрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдк рдПрдХрд▓ <em>&lt;рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди-рд╡рд░реНрдЧ&gt; рдЯреИрдЧ рдХреЗ</em> рд╕рд╛рде рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред</em> <br></p><p>  рдЕрдВрддрд┐рдо рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдШрдЯрдХ рдХреЛ рд╕рдВрдмрдВрдзрд┐рдд рд╡рд╕реНрддреБ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рдд, рд╣рдореЗрдВ <em>рдПрдкреНрд▓рд┐рдХреЗрд╢рди</em> рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╕реЗ <em>ApplicationComponent</em> рдорд┐рд▓рддрд╛ рд╣реИ, <em>ProjectComponent</em> <em>рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗ рдорд┐рд▓рддрд╛ рд╣реИ</em> , рдЖрджрд┐ред </p><br><div class="spoiler">  <b class="spoiler_title">рдШрдЯрдХ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myAppComponent = application.getComponent(MyAppComponent::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">myProjectComponent</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">project</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getComponent</span></span></span></span>(MyProjectComponent::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">myModuleComponent</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getComponent</span></span></span></span>(MyModuleComponent::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">)</span></span></code> </pre> </div></div><br><h3 id="vyvody">  рдирд┐рд╖реНрдХрд░реНрд╖ </h3><br><ol><li>  рдЖрдИрдбреАрдИрдП рдХреЗ рдЕрдВрджрд░ рдПрдХ рдбреАрдЖрдИ рдлреНрд░реЗрдорд╡рд░реНрдХ рд╣реИ - рдЕрдкрдиреЗ рджрдо рдкрд░ рдХреБрдЫ рднреА рдЦреАрдВрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ: рди рддреЛ рдбреИрдЧрд░ рдФрд░ рди рд╣реА рд╕реНрдкреНрд░рд┐рдВрдЧред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЬрд╝рд╛рд╣рд┐рд░ рд╣реИ, рдЖрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </li><li>  рдЗрд╕ DI рдХреЗ рд╕рд╛рде, рдЖрдк рддреИрдпрд╛рд░ рдХрд┐рдП рдЧрдП рдШрдЯрдХреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдпрд╣ рд░рд╕ рд╣реА рд╣реИред </li></ol><br><p>  рддреАрд╕рд░реЗ рдХрд╛рд░реНрдп - рдХреЛрдб рдЬрдирд░реЗрд╢рди рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВред </p><br><h2 id="generaciya-koda">  рдХреЛрдб рдЬрдирд░реЗрд╢рди </h2><br><p>  рдпрд╛рдж рд░рдЦреЗрдВ, рдЪреЗрдХрд▓рд┐рд╕реНрдЯ рдореЗрдВ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдмрд╣реБрдд рд╕рд╛рд░реА рдлрд╛рдЗрд▓реЗрдВ рдмрдирд╛рдиреЗ рдХрд╛ рдХрд╛рдо рдерд╛?  рд╣рд░ рдмрд╛рд░ рдЬрдм рд╣рдо рдПрдХ рдирдпрд╛ рдореЙрдбреНрдпреВрд▓ рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рдмрдирд╛рддреЗ рд╣реИрдВ: рдЗрдВрдЯрд░реЗрдХреНрдЯрд░реНрд╕, рдкреНрд░реЗрдЬреЗрдВрдЯрд░реНрд╕, рдЯреБрдХрдбрд╝реЗред  рдПрдХ рдирдпрд╛ рдореЙрдбреНрдпреВрд▓ рдмрдирд╛рддреЗ рд╕рдордп, рдпреЗ рдШрдЯрдХ рдПрдХ-рджреВрд╕рд░реЗ рд╕реЗ рдмрд╣реБрдд рдорд┐рд▓рддреЗ-рдЬреБрд▓рддреЗ рд╣реИрдВ, рдФрд░ рдореИрдВ рдпрд╣ рд╕реАрдЦрдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ рдХрд┐ рдЗрд╕ рдврд╛рдВрдЪреЗ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдХреИрд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЬрд╛рдПред </p><br><h3 id="shablony">  рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ </h3><br><p>  рдПрдХ рд╕рдорд╛рди рдХреЛрдб рдХрд╛ рдПрдХ рдЯрди рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рддрд░реАрдХрд╛ рдХреНрдпрд╛ рд╣реИ?  рдкреИрдЯрд░реНрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред  рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдХреЛ рджреЗрдЦрдиреЗ рдФрд░ рд╕рдордЭрдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ рдХрд┐ рдХреЛрдб рдЬрдирд░реЗрдЯрд░ рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдмрд┐рд▓реНрдб.рдЧреНрд░реЗрдбрд▓ рдлрд╝рд╛рдЗрд▓ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХрд╛ рдПрдХ рдЯреБрдХрдбрд╝рд╛</b> <div class="spoiler_text"><pre> <code class="java hljs">apply plugin: <span class="hljs-string"><span class="hljs-string">'com.android.library'</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isKotlinProject) { apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-kapt'</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isModuleWithUI) { apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android-extensions'</span></span> }&gt; }&gt; ... android { ... &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isMoxyEnabled) { kapt { arguments { arg(<span class="hljs-string"><span class="hljs-string">"moxyReflectorPackage"</span></span>, <span class="hljs-string"><span class="hljs-string">'&lt;include var="packageName"&gt;'</span></span>) } } }&gt; ... } ... dependencies { <span class="hljs-function"><span class="hljs-function">compileOnly </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">':common'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> compileOnly </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">':core-utils'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> &lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(moduleName in enabledModules)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-function"><span class="hljs-function">compileOnly </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'&lt;include var="moduleName"&gt;'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> }&gt; ... }</span></span></code> </pre> </div></div><br><p>  рдкрд╣рд▓рд╛: рд╣рдо рдЗрди рдкреИрдЯрд░реНрдиреЛрдВ рдХреЗ рдЕрдВрджрд░ рдХреА рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рддреЗ рдереЗред  рдореИрдВ рдПрдХ рдЙрджрд╛рд╣рд░рдг рджреЗрддрд╛ рд╣реВрдВ: рдпрджрд┐ рдкреНрд▓рдЧрдЗрди рдХрд┐рд╕реА рддрд░рд╣ рдпреВрдЖрдИ рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ, рддреЛ рд╣рдо рд╡рд┐рд╢реЗрд╖ <em>рдЧреНрд░реЗрдбрд▓-</em> рдкреНрд▓рдЧрдЗрди <em>рдХреЛрдЯрд▓рд┐рди-рдПрдВрдбреНрд░реЙрдЗрдб-рдПрдХреНрд╕рдЯреЗрдВрд╢рди</em> рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЗ рдЕрдВрджрд░ рдХреА рд╕реНрдерд┐рддрд┐</b> <div class="spoiler_text"><pre> <code class="java hljs">&lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isKotlinProject) { apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-kapt'</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isModuleWithUI) { apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android-extensions'</span></span> }&gt; }&gt;</code> </pre> </div></div><br><p>  рджреВрд╕рд░реА рдЪреАрдЬ рдЬреЛ рд╣рдо рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рд╡рд╣ рдЗрд╕ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЗ рдЕрдВрджрд░ рдПрдХ рдЪрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЬрдм рд╣рдо Moxy рдХреЗ рд▓рд┐рдП kapt рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдПрдиреЛрдЯреЗрд╢рди рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдкреИрдХреЗрдЬ рдХрд╛ рдирд╛рдо рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдХреЗ рдЕрдВрджрд░ рдЪрд░ рдХреЗ рдореВрд▓реНрдп рдХреЛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ</b> <div class="spoiler_text"><pre> <code class="java hljs">kapt { arguments { arg(<span class="hljs-string"><span class="hljs-string">"moxyReflectorPackage"</span></span>, <span class="hljs-string"><span class="hljs-string">'&lt;include var="packageName"&gt;'</span></span>) } }</code> </pre> </div></div><br><p>  рдПрдХ рдФрд░ рдЪреАрдЬ рдЬреЛ рд╣рдореЗрдВ рдЪрд╛рд╣рд┐рдП рд╡рд╣ рд╣реИ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЗ рдЕрдВрджрд░ рд▓реВрдк рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ред  рдЙрд╕ рдлреЙрд░реНрдо рдХреЛ рдпрд╛рдж рд░рдЦреЗрдВ рдЬрд╣рд╛рдВ рд╣рдордиреЗ рдЙрди рдореЙрдбреНрдпреВрд▓ рдХреА рд╕реВрдЪреА рдХрд╛ рдЪрдпрди рдХрд┐рдпрд╛ рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рд╣рдо рдирдП рдореЙрдбреНрдпреВрд▓ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?  рд╣рдо рдПрдХ рд▓реВрдк рдореЗрдВ рдЙрдирдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдЬрд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдФрд░ рдПрдХ рд╣реА рдкрдВрдХреНрддрд┐ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдЯреЗрдореНрдкрд▓реЗрдЯ рдореЗрдВ рд▓реВрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред</b> <div class="spoiler_text"><pre> <code class="java hljs">&lt;<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (moduleName in enabledModules) { <span class="hljs-function"><span class="hljs-function">compileOnly </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'&lt;include var="moduleName"&gt;'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> }&gt;</span></span></code> </pre> </div></div><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╣рдордиреЗ рдХреЛрдб рдЬрдирд░реЗрдЯрд░ рдХреЗ рд▓рд┐рдП рддреАрди рд╢рд░реНрддреЗрдВ рд╕рд╛рдордиреЗ рд░рдЦреАрдВ: </p><br><ul><li>  рд╣рдо рд╢рд░реНрддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ </li><li>  рдкрд░рд┐рд╡рд░реНрддрдиреАрдп рдореВрд▓реНрдпреЛрдВ рдХреЛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ </li><li>  рд╣рдореЗрдВ рдкреИрдЯрд░реНрди рдореЗрдВ рдЫреЛрд░реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ </li></ul><br><h3 id="generatory-koda">  рдХреЛрдб рдЬрдирд░реЗрдЯрд░ </h3><br><p>  рдХреЛрдб рдЬрдирд░реЗрдЯрд░ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рдХрд▓реНрдк рдХреНрдпрд╛ рд╣реИрдВ?  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдЕрдкрдирд╛ рд╕реНрд╡рдпрдВ рдХрд╛ рдХреЛрдб рдЬрдирд░реЗрдЯрд░ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрдмреЗрд░ рдХреЗ рд▓реЛрдЧреЛрдВ рдиреЗ рдРрд╕рд╛ рдХрд┐рдпрд╛: рдЙрдиреНрд╣реЛрдВрдиреЗ рдЕрдкрдиреА рдЦреБрдж рдХреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд▓рдЧ-рдЗрди рд░рд┐рдмрд▓реНрд╕</a> (рддрдерд╛рдХрдерд┐рдд рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░рд▓ рдпреВрдирд┐рдЯреНрд╕) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рд┐рдЦреА</a> ред  рд╡реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдкрдиреА рд╕реНрд╡рдпрдВ рдХреА рдЯреЗрдореНрдкрд▓реЗрдЯ рднрд╛рд╖рд╛ рдХреЗ</a> рд╕рд╛рде рдЖрдП, рдЬрд┐рд╕рдореЗрдВ рдЙрдиреНрд╣реЛрдВрдиреЗ рдХреЗрд╡рд▓ рдЪрд░ рдбрд╛рд▓рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ред  рдЙрдиреНрд╣реЛрдВрдиреЗ <a href="">рдЬрдирд░реЗрдЯрд░</a> рдХреЗ <a href="">рд╕реНрддрд░ рдкрд░</a> рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЛ рд▓рд╛рдпрд╛ред  рд▓реЗрдХрд┐рди рд╣рдордиреЗ рд╕реЛрдЪрд╛ рдХрд┐ рд╣рдо рдРрд╕рд╛ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред </p><br><p>  рджреВрд╕рд░рд╛ рд╡рд┐рдХрд▓реНрдк IDEA рдореЗрдВ рдирд┐рд░реНрдорд┐рдд FileTemplateManager рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╡рд░реНрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВ рдРрд╕рд╛ рдХрд░рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛ред  рдХреНрдпреЛрдВрдХрд┐ рдЙрд╕рдХреЗ рдкрд╛рд╕ рдПрдХ рдЗрдВрдЬрди рдХреЗ рд░реВрдк рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡реЗрд▓реЛрд╕рд┐рдЯреА рд╣реИ</a> , рдЬрд┐рд╕рдореЗрдВ рдЬрд╛рд╡рд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдореЗрдВ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдХреБрдЫ рд╕рдорд╕реНрдпрд╛рдПрдВ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, <em>FileTemplateManager</em> рдмреЙрдХреНрд╕ рд╕реЗ рдЬрд╛рд╡рд╛ рдпрд╛ XML рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдЕрдиреНрдп рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЙрддреНрдкрдиреНрди рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдФрд░ рд╣рдореЗрдВ рдЧреНрд░реВрд╡реА рдлрд╛рдЗрд▓реЗрдВ, рдХреЛрдЯрд▓рд┐рди, рдкреНрд░реЛрдЧрд╛рд░реНрдб рдФрд░ рдЕрдиреНрдп рдкреНрд░рдХрд╛рд░ рдХреА рдлрд╛рдЗрд▓реЗрдВ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереАред </p><br><p>  рддреАрд╕рд░рд╛ рд╡рд┐рдХрд▓реНрдк рдерд╛ ... <em>FreeMarker</em> ред  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ <em>рдлреНрд░реА</em> - <em>рдореЗрдХрд░</em> рдЯреЗрдореНрдкрд▓реЗрдЯ рд╣реИрдВ, рддреЛ рдЙрдиреНрд╣реЗрдВ рдлреЗрдВрдХрдиреЗ рдореЗрдВ рдЬрд▓реНрджрдмрд╛рдЬреА рди рдХрд░реЗрдВ - рд╡реЗ рдкреНрд▓рдЧрдЗрди рдХреЗ рдЕрдВрджрд░ рдЖрдкрдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдХреНрдпрд╛ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдкреНрд▓рдЧрдЗрди рдХреЗ рдЕрдВрджрд░ <em>FreeMarker</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИ?  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдлрд╝рд╛рдЗрд▓ рдЯреЗрдореНрдкрд▓реЗрдЯ рдЬреЛрдбрд╝реЗрдВред  рдЖрдк <em>/ рд░рд┐рд╕реЛрд░реНрд╕</em> рдлрд╝реЛрд▓реНрдбрд░ рдХреЗ рдЕрдВрджрд░ <em>/ рдЯреЗрдореНрдкреНрд▓реЗрдЯ</em> рдлрд╝реЛрд▓реНрдбрд░ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╣рдорд╛рд░реЗ рд╕рднреА рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдХреЛ рд╕рднреА рдлрд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ - рдкреНрд░реЗрдЬреЗрдВрдЯреЗрдЯрд░, рдЯреБрдХрдбрд╝реЗ рдЖрджрд┐ред </p><br><p><img src="https://habrastorage.org/webt/gk/ww/fe/gkwwfelyl443hdze6vd6a99ecmw.png" alt="рдЫрд╡рд┐"></p><br><p>  рдЙрд╕рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ FreeMarker рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдкрд░ рдирд┐рд░реНрднрд░рддрд╛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред  рдЪреВрдВрдХрд┐ рдкреНрд▓рдЧрдЗрди рдЧреНрд░реИрдбрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдПрдХ рдирд┐рд░реНрднрд░рддрд╛ рдЬреЛрдбрд╝рдирд╛ рд╕реАрдзрд╛ рд╣реИред </p><br><div class="spoiler">  <b class="spoiler_title">FreeMarker рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдкрд░ рдирд┐рд░реНрднрд░рддрд╛ рдЬреЛрдбрд╝реЗрдВ</b> <div class="spoiler_text"><pre> <code class="java hljs">dependencies { ... compile <span class="hljs-string"><span class="hljs-string">'org.freemarker:freemarker:2.3.28'</span></span> }</code> </pre> </div></div><br><p>  рдЙрд╕рдХреЗ рдмрд╛рдж, рд╣рдорд╛рд░реЗ рдкреНрд▓рдЧрдЗрди рдХреЗ рдЕрдВрджрд░ FreeMarker рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВред  рдореИрдВ рдЖрдкрдХреЛ рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рдЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдпрд╣рд╛рдВ рдХреЙрдкреА рдХрд░реЗрдВ - рдпрд╣ рдЕрддреНрдпрд╛рдЪрд╛рд░, рдкреАрдбрд╝рд╛, рдЗрд╕реЗ рдХреЙрдкреА рдХрд░реЗрдВ рдФрд░ рд╕рдм рдХреБрдЫ рдмрд╕ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </p><br><div class="spoiler">  <b class="spoiler_title">FreeMarker рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TemplatesFactory</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> project: Project) : ProjectComponent { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> freeMarkerConfig <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> lazy { Configuration(Configuration.VERSION_2_3_28).apply { setClassForTemplateLoading( TemplatesFactory::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">"/templates" ) defaultEncoding = Charsets.UTF_8.name</span></span></span></span>() templateExceptionHandler = TemplateExceptionHandler.RETHROW_HANDLER logTemplateExceptions = <span class="hljs-literal"><span class="hljs-literal">false</span></span> wrapUncheckedExceptions = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } ...</code> </pre> </div></div><br><p>  рдпрд╣ <em>FreeMarker</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлрд╝рд╛рдЗрд▓реЗрдВ рдмрдирд╛рдиреЗ рдХрд╛ рд╕рдордп рд╣реИред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдЗрд╕рдХреЗ рдирд╛рдо рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реЗ рдПрдХ рдЯреЗрдореНрдкрд▓реЗрдЯ рдорд┐рд▓рддрд╛ рд╣реИ рдФрд░ рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ <em>FileWriter</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбрд┐рд╕реНрдХ рдкрд░ рд╕реАрдзреЗ рд╡рд╛рдВрдЫрд┐рдд рдкрд╛рда рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">FileWriter рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдирд╛</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TemplatesFactory</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> project: Project) : ProjectComponent { ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( pathToFile: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, templateFileName: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">data</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Map</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Any&gt; )</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> template = freeMarkerConfig.getTemplate(templateFileName) FileWriter(pathToFile, <span class="hljs-literal"><span class="hljs-literal">false</span></span>).use { writer -&gt; template.process(<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>, writer) } } }</code> </pre> </div></div><br><p>  рдФрд░ рдХрд╛рд░реНрдп рд╣рд▓ рдХрд░рдиреЗ рд▓рдЧрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдирд╣реАрдВред  рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рднрд╛рдЧ рдореЗрдВ, рдореИрдВрдиреЗ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдХрд┐ рдкреВрд░реЗ рдЖрдИрдбреАрдИрдП рдХреЛ рдкреАрдПрд╕рдЖрдИ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рд╕рд╛рде рдЕрдиреБрдорддрд┐ рджреА рдЧрдИ рд╣реИ, рдФрд░ рдЗрд╕реЗ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдпрджрд┐ рдЖрдк PSI рд╕рдВрд░рдЪрдирд╛ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, FileWriter рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ) рдХреЛ рджрд░рдХрд┐рдирд╛рд░ рдХрд░рдХреЗ рдлрд╝рд╛рдЗрд▓реЗрдВ рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ IDEA рдиреЗ рдХреЗрд╡рд▓ рдпрд╣ рдирд╣реАрдВ рд╕рдордЭрд╛ рдХрд┐ рдЖрдкрдиреЗ рдХреБрдЫ рдмрдирд╛рдпрд╛ рд╣реИ рдФрд░ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЯреНрд░реА рдореЗрдВ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред  рд╣рдордиреЗ IDEA рдХреЛ рдЕрдиреБрдХреНрд░рдорд┐рдд рдХрд░рдиреЗ рдФрд░ рдмрдирд╛рдИ рдЧрдИ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рджреЗрдЦрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд▓рдЧрднрдЧ рд╕рд╛рдд рдорд┐рдирдЯ рдЗрдВрддрдЬрд╛рд░ рдХрд┐рдпрд╛ред </p><br><p>  рдирд┐рд╖реНрдХрд░реНрд╖ - рдпрд╣ рд╕рд╣реА рд╣реИ, рдлрд╝рд╛рдЗрд▓реЗрдВ рдмрдирд╛рдПрдБ, рдкреАрдПрд╕рдЖрдИ рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдПред </p><br><h3 id="sozdaem-psi-strukturu-dlya-faylov">  рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ PSI рд╕рдВрд░рдЪрдирд╛ рдмрдирд╛рдПрдБ </h3><br><p>  рдЖрд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <a href="">рдЪрд▓реЛ PsiDirectory</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлрд╝реЛрд▓реНрдбрд░ рд╕рдВрд░рдЪрдирд╛ рдХреЛ <a href="">рджреЗрдЦрд╛</a> ред  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреА рдЖрд░рдВрдн рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЛ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдлрд╝рдВрдХреНрд╢рдВрд╕ <em>рдЕрдиреБрдорд╛рдирдкреНрд░рдпреЛрдЧрджрд┐рд░</em> рдФрд░ <em>toPsiDirectory</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><div class="spoiler">  <b class="spoiler_title">PsiDirectory Project рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> projectPsiDirectory = project.guessProjectDir()?.toPsiDirectory(project)</code> </pre> </div></div><br><p>  рдмрд╛рдж рдХреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЛ рдпрд╛ рддреЛ <em>PsiDirectory</em> <em>findSubdirectory</em> рд╡рд░реНрдЧ рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╛ <em>createSubdirectory</em> рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдпрд╛ рдЬрд╛ <em>рд╕рдХрддрд╛</em> рд╣реИред </p><br><div class="spoiler">  <b class="spoiler_title">рдЦреЛрдЬреЗрдВ рдФрд░ PsiDirectory рдмрдирд╛рдПрдВ</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> coreModuleDir = projectPsiDirectory.findSubdirectory(<span class="hljs-string"><span class="hljs-string">"core"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newModulePsiDir = coreModuleDir.createSubdirectory(config.mainParams.moduleName)</code> </pre> </div></div><br><p>  рдореИрдВ рдпрд╣ рднреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рдПрдХ рдРрд╕рд╛ <em>рдорд╛рдирдЪрд┐рддреНрд░</em> рдмрдирд╛рдПрдВ рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рдЖрдк рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рднреА <em>PsiDirectory</em> рдлрд╝реЛрд▓реНрдбрд░ рд╕рдВрд░рдЪрдирд╛рдПрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рдЗрдирдореЗрдВ рд╕реЗ рдХрд┐рд╕реА рднреА рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдмрдирд╛рдИ рдЧрдИ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдПрдХ рдлрд╝реЛрд▓реНрдбрд░ рд╕рдВрд░рдЪрдирд╛ рдирдХреНрд╢рд╛ рдмрдирд╛рдПрдБ</b> <div class="spoiler_text"><p>  рд╡рд╛рдкрд╕реА mutableMapOf &lt;рд╕реНрдЯреНрд░рд┐рдВрдЧ, PsiDirectory?&gt; () рд▓рд╛рдЧреВ рдХрд░реЗрдВред * <br>  рдпрд╣ ["рд░реВрдЯ"] = рдореЙрдбреНрдпреВрд▓рдкрд╕реАрдбрд┐рд░ <br>  рдпрд╣ ["src"] = рдореЙрдбреНрдпреВрд▓PsiDir.createSubdirectory ("src") <br>  рдпрд╣ ["рдореБрдЦреНрдп"] = рдпрд╣ ["src"]? createSubdirectory ("рдореБрдЦреНрдп") <br>  рдпрд╣ ["рдЬрд╛рд╡рд╛"] = рдпрд╣ ["рдореБрдЦреНрдп"]? createSubdirectory ("рдЬрд╛рд╡рд╛") <br>  рдпрд╣ ["рд░реЗрд╕"] = рдпрд╣ ["рдореБрдЦреНрдп"]? createSubdirectory ("рд░реЗрд╕") </p><br><pre> <code class="plaintext hljs">//   PsiDirectory   package name: // ru.hh.feature_worknear тЖТ ru / hh / feature_worknear createPackageNameFolder(config) // data this["data"] = this["package"]?.createSubdirectory("data") // ...</code> </pre> <br><p>  } </p></div></div><br><p>  рдлреЛрд▓реНрдбрд░ рдмрдирд╛рдпрд╛ред  рд╣рдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">PsiFile</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <a href="">PsiFiles рдмрдирд╛рдПрдВрдЧреЗ</a> ред  рдЗрд╕ рд╡рд░реНрдЧ рдореЗрдВ рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╡рд┐рдзрд┐ рд╣реИ, рдЬрд┐рд╕реЗ <em>createFileFromText</em> рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╡рд┐рдзрд┐ рдЗрдирдкреБрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рддреАрди рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддреА рд╣реИ: рдирд╛рдо (рд╕реНрдЯреНрд░рд┐рдВрдЧ рдлрд╝рд╛рдЗрд▓рдирд╛рдо), рдкрд╛рда (рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкрд╛рда) рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдкреНрд░рдХрд╛рд░ (рдлрд╝рд╛рдЗрд▓ рдЯрд╛рдЗрдк рдлрд╝рд╛рдЗрд▓ рдЯрд╛рдЗрдк)ред  рддреАрди рдорд╛рдкрджрдВрдбреЛрдВ рдореЗрдВ рд╕реЗ рджреЛ рд╕реНрдкрд╖реНрдЯ рд╣реИрдВ рдХрд┐ рдЗрд╕реЗ рдХрд╣рд╛рдБ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рдП: рд╣рдо рд╕реНрд╡рдпрдВ рдирд╛рдо рдЬрд╛рдирддреЗ рд╣реИрдВ, рд╣рдореЗрдВ рдлреНрд░реАрдорд╛рд░реНрдХрд░ рд╕реЗ рдкрд╛рда рдорд┐рд▓рддрд╛ рд╣реИред  рдФрд░ рдХрд╣рд╛рдБ <em>FileType</em> рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП?  рдФрд░ рдпрд╣ рд╕рдм рдХреНрдпрд╛ рд╣реИ? </p><br><h3 id="filetype">  рдлрд╝рд╛рдЗрд▓-рдкреНрд░рдХрд╛рд░ </h3><br><p>  <a href=""><em>FileType</em></a> рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╡рд░реНрдЧ рд╣реИ рдЬреЛ рдлрд╝рд╛рдЗрд▓ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред  "рдмреЙрдХреНрд╕" рд╕реЗ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХреЗрд╡рд▓ рджреЛ FileType рдЙрдкрд▓рдмреНрдз рд╣реИрдВ: Java-files рдФрд░ XML-files рдХреЗ рд▓рд┐рдП рдХреНрд░рдорд╢рдГ JavaFileType рдФрд░ XmlFileTypeред  рд▓реЗрдХрд┐рди рд╕рд╡рд╛рд▓ рдпрд╣ рдЙрдарддрд╛ рд╣реИ: <em>рдмрд┐рд▓реНрдб рдХреЗ</em> рд▓рд┐рдП рдкреНрд░рдХрд╛рд░ рдХрд╣рд╛рдБ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред <em>рдХреЛрдЯрд▓рд┐рди</em> рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП, <em>рдХреЛрд╕реНрдЯрдЧрд┐рд▓</em> рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП, <em>рдкреНрд░рд┐рдЯрдЧреЙрд░</em> рдХреЗ рд▓рд┐рдП, рдЖрдЦрд┐рд░рдХрд╛рд░ <em>!?</em> </p><br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЗрдирдореЗрдВ рд╕реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ <em>рдлрд╝рд╛рдЗрд▓ рдЯрд╛рдЗрдк</em> рдХреЛ рдЕрдиреНрдп рдкреНрд▓рдЧрдЗрдиреНрд╕ рд╕реЗ рд▓рд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХрд┐рд╕реА рдХреЗ рджреНрд╡рд╛рд░рд╛ рд▓рд┐рдЦреЗ рдЧрдП рд╣реИрдВред  GroovyFileType рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Groovy plugin</a> , KotlinFileType рд╕реЗ Kotlin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд▓рдЧрдЗрди</a> , рдПрдВрдбреНрд░реЙрдЗрдб <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд▓рдЧрдЗрди</a> рд╕реЗ рдкреНрд░реЛрдЧрд╛рд░реНрдб рд╕реЗ рд▓рд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рд╣рдо рдЕрдкрдиреЗ рд▓рд┐рдП рджреВрд╕рд░реЗ рдкреНрд▓рдЧрдЗрди рдХреА рдирд┐рд░реНрднрд░рддрд╛ рдХреИрд╕реЗ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ?  рд╣рдо <em>gradle-intellij-plugin рдХрд╛</em> рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣ рдкреНрд▓рдЧрдЗрди рдХреЗ build.gradle рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЗрдВрдЯреЗрд▓реАрдЬ рдмреНрд▓реЙрдХ рдЬреЛрдбрд╝рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдЕрдВрджрд░ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЧреБрдг рд╣реИ - <em>рдкреНрд▓рдЧрдЗрдиреНрд╕</em> ред  рдЗрд╕ рд╕рдВрдкрддреНрддрд┐ рдореЗрдВ, рдЖрдк рдкреНрд▓рдЧрдЗрди рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛рдУрдВ рдХреА рд╕реВрдЪреА рд╕реВрдЪреАрдмрджреНрдз рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд┐рд╕ рдкрд░ рд╣рдо рдирд┐рд░реНрднрд░ рд░рд╣рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдЕрдиреНрдп рдкреНрд▓рдЧрдЗрдиреНрд╕ рдкрд░ рдирд┐рд░реНрднрд░рддрд╛ рдЬреЛрдбрд╝реЗрдВ</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// build.gradle  intellij { тАж plugins = ['android', 'Groovy', 'kotlin'] }</span></span></code> </pre> </div></div><br><p>  рд╣рдо рдЖрдзрд┐рдХрд╛рд░рд┐рдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">JetBrains рдкреНрд▓рдЧрдЗрди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА</a> рд╕реЗ рдЪрд╛рдмреА рд▓реЗрддреЗ рд╣реИрдВред  рдЖрдИрдбреАрдИрдП (рдЬреЛ рдЧреНрд░реВрд╡реА, рдХреЛрдЯрд▓рд┐рди рдФрд░ рдПрдВрдбреНрд░реЙрдЗрдб рд╣реИрдВ) рдореЗрдВ рдирд┐рд░реНрдорд┐рдд рдкреНрд▓рдЧрдЗрдиреНрд╕ рдХреЗ рд▓рд┐рдП, рдЖрдИрдбреАрдИрдП рдХреЗ рдЕрдВрджрд░ рдкреНрд▓рдЧрдЗрди рдлрд╝реЛрд▓реНрдбрд░ рдХрд╛ рдирд╛рдо рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред  рдмрд╛рдХреА рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ JetBrains рдкреНрд▓рдЧрдЗрди рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд▓рдЧрдЗрди рдХреЗ рдкреГрд╖реНрда рдкрд░ рдЬрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, <em>рдкреНрд▓рдЧрдЗрди рдПрдХреНрд╕рдПрдордПрд▓ рдЖрдИрдбреА</em> рд╕рдВрдкрддреНрддрд┐ рдХреЛ рд╡рд╣рд╛рдВ рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд╕рд╛рде рд╣реА рд╕рдВрд╕реНрдХрд░рдг (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрд╣рд╛рдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреЙрдХрд░ рдкреНрд▓рдЧрдЗрди рдХрд╛ рдкреЗрдЬ рд╣реИ</a> )ред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">GitHub рдкрд░</a> рдЕрдиреНрдп рдкреНрд▓рдЧрдЗрдиреНрд╕ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЛ</a> рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдкрдврд╝реЗрдВред </p><br><p>  рджреВрд╕рд░реЗ, рдЖрдкрдХреЛ <em>plugin.xml</em> рдлрд╝рд╛рдЗрд▓ рдкрд░ рдирд┐рд░реНрднрд░рддрд╛ рд╡рд┐рд╡рд░рдг рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ред  рдпрд╣ рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ <em>ред</em> <br></p><div class="spoiler">  <b class="spoiler_title">рд╣рдо plugin.xml рдореЗрдВ рдкреНрд▓рдЧрдЗрдиреНрд╕ рдХрдиреЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span>org.intellij.groovy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  рд╣рдо рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдЕрдиреНрдп рдкреНрд▓рдЧрдЗрдиреНрд╕ рд╕реЗ рдирд┐рд░реНрднрд░рддрд╛ рдХреЛ рдХрд╕ рд▓реЗрдВрдЧреЗ, рдФрд░ рд╣рдо рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдВрдЧреЗред </p><br><p>  рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдЕрдЧрд░ рд╣рдо рдЕрдиреНрдп рдкреНрд▓рдЧрдЗрдиреНрд╕ рдкрд░ рдирд┐рд░реНрднрд░ рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдЬрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХреА рдлрд╝рд╛рдЗрд▓ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЙрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдЯрдм рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдкрд╣рд▓реЗ рдПрдХ рд╡рд░реНрдЧ рдмрдирд╛рдПрдВ рдЬреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><em>рднрд╛рд╖рд╛</em></a> рд╡рд░реНрдЧ рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдЖрдПрдЧрд╛ред  рд╣рдорд╛рд░реА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд▓реИрдВрдЧреНрд╡реЗрдЬ рдХреА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЛ рдЗрд╕ рд╡рд░реНрдЧ (рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ - <strong>"ru.hh.plugins.Ignore</strong> ) рдкрд░ рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <strong>"</strong> </p><br><div class="spoiler">  <b class="spoiler_title">GitIgnore рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рднрд╛рд╖рд╛ рдмрдирд╛рдПрдБ</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IgnoreLanguage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">private</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">constructor</span></span></span></span>() : Language(<span class="hljs-string"><span class="hljs-string">"ru.hh.plugins.Ignore"</span></span>, <span class="hljs-string"><span class="hljs-string">"ignore"</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>), InjectableLanguage { <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> INSTANCE = IgnoreLanguage() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDisplayName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Ignore() (</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$id</span></span></span><span class="hljs-string">)"</span></span> } }</code> </pre> </div></div><br><p>  рдпрд╣рд╛рдВ рдПрдХ рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИ: рдХреБрдЫ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рдЧреИрд░-рдЕрджреНрд╡рд┐рддреАрдп рд░реЗрдЦрд╛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рдХрд╛рд░рдг, рдЕрдиреНрдп рдкреНрд▓рдЧрдЗрдиреНрд╕ рдХреЗ рд╕рд╛рде рдЖрдкрдХреЗ рдкреНрд▓рдЧрдЗрди рдХрд╛ рдПрдХреАрдХрд░рдг рдЯреВрдЯ рд╕рдХрддрд╛ рд╣реИред  рд╣рдо рдорд╣рд╛рди рд╣реИрдВ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдЕрдиреЛрдЦреА рд░реЗрдЦрд╛ рд╣реИред </p><br><p>  <em>рднрд╛рд╖рд╛</em> рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж рдЕрдЧрд▓реА рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рд╣рдо рдПрдХ <em>рдлрд╝рд╛рдЗрд▓ рдЯрд╛рдЗрдк</em> рдмрдирд╛рдПрдБред  рд╣рдо <em>LanguageFileType</em> рд╡рд░реНрдЧ рд╕реЗ рдЗрдирд╣реЗрд░рд┐рдЯ рдХрд░рддреЗ рд╣реИрдВ, рднрд╛рд╖рд╛ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ рд╣рдордиреЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдерд╛, рдХреБрдЫ рдмрд╣реБрдд рд╣реА рд╕рд░рд▓ рддрд░реАрдХреЛрдВ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд┐рдпрд╛ред  рд╣реЛ рдЧрдпрд╛ред  рдЕрдм рд╣рдо рдирдИ рдмрдирд╛рдИ рдЧрдИ <em>рдлрд╝рд╛рдЗрд▓ рдЯрд╛рдЗрдк рдХрд╛</em> рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">.Gitignore рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА рдЦреБрдж рдХреА FileType рдмрдирд╛рдПрдБ</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IgnoreFileType</span></span></span></span>(language: Language) : LanguageFileType(language) { <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> INSTANCE = IgnoreFileType(IgnoreLanguage.INSTANCE) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String = <span class="hljs-string"><span class="hljs-string">"gitignore file"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDescription</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String = <span class="hljs-string"><span class="hljs-string">"gitignore files"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDefaultExtension</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String = <span class="hljs-string"><span class="hljs-string">"gitignore"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getIcon</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Icon? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> }</code> </pre></div></div><br><h3 id="zavershaem-sozdanie-fayla">  рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдирд╛ рд╕рдорд╛рдкреНрдд рдХрд░реЗрдВ </h3><br><p>  рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ <em>рдлрд╝рд╛рдЗрд▓ рдЯрд╛рдЗрдк</em> рдЦреЛрдЬрдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдХрдВрдЯреЗрдирд░ рдмрдирд╛рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ, рдЬрд┐рд╕реЗ <em>рдЯреЗрдореНрдкреНрд▓реЗрдЯрдбреЗрдЯрд╛</em> рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ - рдЗрд╕рдореЗрдВ рдЙрд╕ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рднреА рдбреЗрдЯрд╛ рд╣реЛрдВрдЧреЗ рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рдЖрдк рдХреЛрдб рдЬрдирд░реЗрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рдЗрд╕рдореЗрдВ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо, <em>рдЖрдЙрдЯрдкреБрдЯ</em> рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдирд╛рдо рд╣реЛрдЧрд╛ рдЬреЛ рдЖрдкрдХреЛ рдХреЛрдб, рд╡рд╛рдВрдЫрд┐рдд <em>рдлрд╝рд╛рдЗрд▓ рдЯрд╛рдЗрдк,</em> рдФрд░ рдЕрдВрдд рдореЗрдВ <em>PsiDirectory</em> , рдЬрд╣рд╛рдВ рдЖрдк рдмрдирд╛рдИ рдЧрдИ рдлрд╝рд╛рдЗрд▓ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рдХреЗ рдмрд╛рдж <em>рдорд┐рд▓рддреА рд╣реИ</em> ред </p><br><div class="spoiler">  <b class="spoiler_title">TemplateData</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TemplateData</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> templateFileName: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> outputFileName: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> outputFileType: FileType, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> outputFilePsiDirectory: PsiDirectory? )</code> </pre> </div></div><br><p>  рдлрд┐рд░ рд╣рдо <em>FreeMarker</em> рдкрд░ <em>рд▓реМрдЯрддреЗ рд╣реИрдВ</em> - рд╣рдо рдЗрд╕реЗ рд╕реЗ рдЯреЗрдореНрдкрд▓реЗрдЯ рдлрд╝рд╛рдЗрд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ, <em>StringWriter</em> рдХрд╛ рдЙрдкрдпреЛрдЧ <em>рдХрд░рдХреЗ</em> рд╣рдо рдкрд╛рда рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ, <em>PsiFileFactory рдореЗрдВ рд╣рдо</em> рд╡рд╛рдВрдЫрд┐рдд рдкрд╛рда рдФрд░ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рд╛рде <em>PsiFile</em> рдЙрддреНрдкрдиреНрди рдХрд░рддреЗ рд╣реИрдВред  рдмрдирд╛рдИ рдЧрдИ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╡рд╛рдВрдЫрд┐рдд рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><div class="spoiler">  <b class="spoiler_title">рдЗрдЪреНрдЫрд┐рдд рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ PsiFile рдмрдирд╛рдПрдБ</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createFromTemplate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">data</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">FileTemplateData</span></span></span></span><span class="hljs-function"><span class="hljs-params">, properties: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Map</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Any&gt;)</span></span></span></span>: PsiFile { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> template = freeMarkerConfig.getTemplate(<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>.templateFileName) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> text = StringWriter().use { writer -&gt; template.process(properties, writer) writer.buffer.toString() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> psiFileFactory.createFileFromText(<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>.outputFileName, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span>.outputFileType, text) }</code> </pre> </div></div><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдкреАрдПрд╕рдЖрдИ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЖрдИрдбреАрдИрдП, рд╕рд╛рде рд╣реА рдЕрдиреНрдп рдкреНрд▓рдЧрдЗрдиреНрд╕, рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рд╣рдордиреЗ рдХреНрдпрд╛ рдХрд┐рдпрд╛ рд╣реИред  рдЗрд╕рд╕реЗ рдПрдХ рд▓рд╛рдн рд╣реЛ рд╕рдХрддрд╛ рд╣реИ: рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ Git рдХреЗ рд▓рд┐рдП рдкреНрд▓рдЧрдЗрди рджреЗрдЦрддрд╛ рд╣реИ рдХрд┐ рдЖрдкрдиреЗ рдПрдХ рдирдИ рдлрд╝рд╛рдЗрд▓ рдЬреЛрдбрд╝реА рд╣реИ, рддреЛ рдпрд╣ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдПрдХ рдбрд╛рдпрд▓реЙрдЧ рдмреЙрдХреНрд╕ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдЧрд╛ рдЬрд┐рд╕рдореЗрдВ рдкреВрдЫрд╛ рдЬрд╛рдПрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдЖрдк рдЗрди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ Git рдореЗрдВ рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ? </p><br><h3 id="vyvody-pro-generaciyu-koda">  рдХреЛрдб рдкреАрдврд╝реА рдХреЗ рдирд┐рд╖реНрдХрд░реНрд╖ </h3><br><ul><li>  рдкрд╛рда рдлрд╝рд╛рдЗрд▓реЗрдВ FreeMarker рджреНрд╡рд╛рд░рд╛ рдЙрддреНрдкрдиреНрди рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВред  рдмрд╣реБрдд рд╕рд╣рдЬ рд╣реИред </li><li>  рдлрд╛рдЗрд▓реЗрдВ рдмрдирд╛рддреЗ рд╕рдордп, рдЖрдкрдХреЛ рдкреАрдПрд╕рдЖрдИ рд╕рдВрд░рдЪрдирд╛ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЕрдиреНрдпрдерд╛ рд╕рдм рдХреБрдЫ рдЧрд▓рдд рд╣реЛ рдЬрд╛рдПрдЧрд╛ред </li><li>  рдпрджрд┐ рдЖрдк PsiFileFactory рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлрд╝рд╛рдЗрд▓реЗрдВ рдЬрдирд░реЗрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдХрд╣реАрдВ-рдХрд╣реАрдВ FileType рдвреВрдВрдврдирд╛ рд╣реЛрдЧрд╛ред </li></ul><br><p>  рдЦреИрд░, рдЕрдм рд╣рдо рдЖрдЦрд┐рд░реА, рд╕рдмрд╕реЗ рд╕реНрд╡рд╛рджрд┐рд╖реНрдЯ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рднрд╛рдЧ рдХреА рдУрд░ рдореБрдбрд╝рддреЗ рд╣реИрдВ - рдпрд╣ рдХреЛрдб рдХрд╛ рдПрдХ рд╕рдВрд╢реЛрдзрди рд╣реИред </p><br><h2 id="modifikaciya-koda">  рдХреЛрдб рд╕рдВрд╢реЛрдзрди </h2><br><p>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдХреЗрд╡рд▓ рдХреЛрдб рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд▓рдЧрдЗрди рдмрдирд╛рдирд╛ рдмрдХрд╡рд╛рд╕ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЖрдк рдЕрдиреНрдп рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рдХреЛрдб рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдПрдХ рд╣реА <em>FreeMarker</em> ред  рд▓реЗрдХрд┐рди <em>FreeMarker</em> рдХреНрдпрд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рдХреЛрдб рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рддрд╛ рд╣реИред </p><br><p>  рд╣рдорд╛рд░реА рдЪреЗрдХрд▓рд┐рд╕реНрдЯ рдореЗрдВ рдХреЛрдб рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдХрдИ рдХрд╛рд░реНрдп рд╣реИрдВ, рдЖрдЗрдП рд╕рдмрд╕реЗ рд╕рд░рд▓ рдПрдХ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ - <em>settings.gradle</em> рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВред </p><br><h3 id="modifikaciya-settingsgradle">  рд╕рдВрд╢реЛрдзрди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ </h3><br><p>  рдореИрдВ рдЖрдкрдХреЛ рдпрд╛рдж рджрд┐рд▓рд╛рддрд╛ рд╣реВрдВ рдХрд┐ рд╣рдо рдХреНрдпрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ: рд╣рдореЗрдВ рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХреБрдЫ рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ рдирдП рдмрдирд╛рдП рдЧрдП рдореЙрдбреНрдпреВрд▓ рдХреЗ рд▓рд┐рдП рдкрде рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВрдЧреЗ: </p><br><div class="spoiler">  <b class="spoiler_title">рдореЙрдбреНрдпреВрд▓ рдХреЗ рдкрде рдХрд╛ рд╡рд┐рд╡рд░рдг</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// settings.gradle include ':analytics project(':analytics').projectDir = new File(settingsDir, 'core/framework-metrics/analytics) ... include ':feature-worknear' project(':feature-worknear').projectDir = new File(settingsDir, 'feature/feature-worknear')</span></span></code> </pre> </div></div><br><p>  рдореИрдВрдиреЗ рдЖрдкрдХреЛ рдереЛрдбрд╝рд╛ рдкрд╣рд▓реЗ рдбрд░рд╛ рджрд┐рдпрд╛ рдерд╛ рдХрд┐ рдЖрдкрдХреЛ рдлрд╛рдЗрд▓реЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп рд╣рдореЗрд╢рд╛ рдкреАрдПрд╕рдЖрдИ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЕрдиреНрдпрдерд╛ <del>  рд╕рдм рдХреБрдЫ рдЬрд▓ рдЬрд╛рдПрдЧрд╛ </del>  рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╕рд░рд▓ рдХрд╛рд░реНрдпреЛрдВ рдореЗрдВ, рдЬреИрд╕реЗ рдХрд┐рд╕реА рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрдВрдд рдореЗрдВ рдХреБрдЫ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдирд╛, рдЗрд╕реЗ рдЫреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЖрдк рд╕рд╛рдорд╛рдиреНрдп <em>java.io.File</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХреБрдЫ рд▓рд╛рдЗрдиреЗрдВ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдкрде <em>рдвреВрдВрдврддреЗ</em> рд╣реИрдВ, <em>java.io.File</em> рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рддреЗ рд╣реИрдВ, рдФрд░ рдХреЛрдЯрд▓рд┐рди <em>рдПрдХреНрд╕рдЯреЗрдВрд╢рди</em> рдлрд╝рдВрдХреНрд╢рди рдХреА рдорджрдж рд╕реЗ рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрдВрдд рдореЗрдВ рджреЛ рд▓рд╛рдЗрдиреЗрдВ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред  рдЖрдк рдРрд╕рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, IDEA рдЖрдкрдХреЗ рдмрджрд▓рд╛рд╡реЛрдВ рдХреЛ рджреЗрдЦреЗрдЧрд╛ред </p><br><div class="spoiler">  <b class="spoiler_title">Settings.gradle рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд▓рд╛рдЗрдиреЗрдВ рдЬреЛрдбрд╝рдирд╛</b> <div class="spoiler_text"><p>  val projectBaseDirPath = project.basePath ?: рд╡рд╛рдкрд╕реА <br>  рд╡реИрд▓ рд╕реЗрдЯрд┐рдВрдЧреНрд╕рдкрдердлрд╛рдЗрд▓ = рдкреНрд░реЛрдЬреЗрдХреНрдЯрдмреЗрд╕ рдбреАрдкрдкреИрде + "/ рд╕реЗрдЯрд┐рдВрдЧреНрд╕.рдЧреНрд░реЗрдб" </p><br><p>  рд╡реИрд▓ рд╕реЗрдЯрд┐рдВрдЧреНрд╕рдлрд╝рд┐рд▓ = рдлрд╝рд╛рдЗрд▓ (рд╕реЗрдЯрд┐рдВрдЧреНрд╕рдкрд╛рдк рдлрд╝рд╛рдЗрд▓) </p><br><p>  settingsFile.appendText ("рд╢рд╛рдорд┐рд▓ рдХрд░реЗрдВ: $ рдореЙрдбреНрдпреВрд▓рдирд╛рдо" ") <br>  settingsFile.appendText ( <br>  "рдкреНрд░реЛрдЬреЗрдХреНрдЯ (': $ рдореЙрдбреНрдпреВрд▓рдирд╛рдо')ред рдкреНрд░реЛрдЬреЗрдХреНрдЯрдбрд┐рд░ = рдирдИ рдлрд╝рд╛рдЗрд▓ (рд╕реЗрдЯрд┐рдВрдЧреНрд╕рдбрд╛рдпрд░, '$ рдлреЛрд▓реНрдбрд░рдкрд╛рде)" <br>  ) </p></div></div><br><p>  рдЦреИрд░, рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ, рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рдпрд╣ рдкреАрдПрд╕рдЖрдИ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдмреЗрд╣рддрд░ рд╣реИ - рдпрд╣ рдЕрдзрд┐рдХ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╣реИред </p><br><h3 id="donastroyka-kapt-a-dlya-toothpick">  рдЯреВрдердкрд┐рдХ рдХреЗ рд▓рд┐рдП рдХреЗрдкреНрдЯ рдЯреНрдпреВрдирд┐рдВрдЧ </h3><br><p>  рдПрдХ рдмрд╛рд░ рдлрд┐рд░, рдореИрдВ рдЖрдкрдХреЛ рд╕рдорд╕реНрдпрд╛ рдХреА рдпрд╛рдж рджрд┐рд▓рд╛рддрд╛ рд╣реВрдВ: рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЙрдбреНрдпреВрд▓ рдореЗрдВ <em>рдмрд┐рд▓реНрдб.рдЧреНрд░реЗрдб</em> рдлрд╝рд╛рдЗрд▓ рд╣реИ, рдФрд░ рдЗрд╕рдХреЗ рдЕрдВрджрд░ рдПрдиреЛрдЯреЗрд╢рди рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рд╣реИрдВред  рдФрд░ рд╣рдо рдЕрдкрдиреЗ рдмрдирд╛рдП рдЧрдП рдореЙрдбреНрдпреВрд▓ рдХреЗ рдкреИрдХреЗрдЬ рдХреЛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реНрдерд╛рди рдкрд░ рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдХрд╣рд╛рдБ рд╕реЗ рдХрд╣рд╛рдБ рддрдХ? редред</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/jt/hv/1b/jthv1bxuiigvexnvwnrvzs41wh8.png" alt="рдЫрд╡рд┐"></p></div></div><br><p>  рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖реНрдп рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ <em>PsiElement рдХреА рдЦреЛрдЬ рдХрд░рдирд╛ рд╣реИ</em> , рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рд╣рдо рдЕрдкрдиреА рд▓рд╛рдЗрди рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рддреЗ рд╣реИрдВред  рддрддреНрд╡ рдХреА рдЦреЛрдЬ <em>PsiFile рдХреЗ</em> рд▓рд┐рдП рдЦреЛрдЬ рд╕реЗ рд╢реБрд░реВ рд╣реЛрддреА рд╣реИ, рдЬреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЙрдбреНрдпреВрд▓ рдХреА <em>рдмрд┐рд▓реНрдб.рдЧреНрд░реЗрдб</em> рдлрд╝рд╛рдЗрд▓ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред  рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЙрд╕ рдореЙрдбреНрдпреВрд▓ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рдЕрдВрджрд░ рд╣рдо рдлрд╝рд╛рдЗрд▓ рдХреА рддрд▓рд╛рд╢ рдХрд░реЗрдВрдЧреЗред </p><br><div class="spoiler">  <b class="spoiler_title">рд╣рдо рдирд╛рдо рд╕реЗ рдПрдХ рдореЙрдбреНрдпреВрд▓ рдХреА рддрд▓рд╛рд╢ рдХрд░ рд░рд╣реЗ рд╣реИрдВ</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = ModuleManager.getInstance(project) .modules.toList() .first { it.name == <span class="hljs-string"><span class="hljs-string">"headhunter-applicant"</span></span> }</code> </pre> </div></div><br><p>  рдЕрдЧрд▓рд╛, рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╡рд░реНрдЧ <em>FilenameIndex</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <em>,</em> рдЖрдк рдЦреЛрдЬ рдХреНрд╖реЗрддреНрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рдП рдЧрдП рдореЙрдбреНрдпреВрд▓ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реБрдП, рдЗрд╕рдХреЗ рдирд╛рдо рд╕реЗ <em>PsiFile</em> рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред </p><br><div class="spoiler">  <b class="spoiler_title">рдирд╛рдо рд╕реЗ PsiFile рдХреА рддрд▓рд╛рд╢ рд╣реИ</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> buildGradlePsiFile = FilenameIndex.getFilesByName( appModule.project, <span class="hljs-string"><span class="hljs-string">"build.gradle"</span></span>, appModule.moduleContentScope ).first()</code> </pre> </div></div><br><p>  рд╣рдо PsiFile рдЦреЛрдЬрдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо PsiElement рдХреА рдЦреЛрдЬ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред   ,      тАУ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">PSI Viewer</a> .     IDEA  ,    PSI-  . </p><br><p><img src="https://habrastorage.org/webt/sd/nl/ac/sdnlac9nrqcqqt14wtrhohr9pf8.png" alt="рдЫрд╡рд┐"></p><br><p>    -  (, build.gradle)        ,      PSI-   . </p><br><p><img src="https://habrastorage.org/webt/gt/et/xo/gtetxo8_4hbk0gzzfty7p_zmawu.png" alt="рдЫрд╡рд┐"></p><br><p>    тАУ   ,        <em>PsiFile</em> -. </p><br><p>    .   <em>PsiFile</em> .            . </p><br><div class="spoiler"> <b class="spoiler_title">  PsiElement</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> toothpickRegistryPsiElement = buildGradlePsiFile.originalFile .collectDescendantsOfType&lt;GrAssignmentExpression&gt;() .firstOrNull { it.text.startsWith(<span class="hljs-string"><span class="hljs-string">"arguments"</span></span>) } ?.lastChild ?.children?.firstOrNull { it.text.startsWith(<span class="hljs-string"><span class="hljs-string">"toothpick_registry_children_package_names"</span></span>) } ?.collectDescendantsOfType&lt;GrListOrMap&gt;() ?.first() ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span></code> </pre> </div></div><br><p><del>  ?.. </del>   ?          PSI-.        <em>GrAssignmentExpression</em> ,   ,    <em>arguments = [ тАж ]</em> .      ,      <em>toothpick_registry_children_package_names = [...]</em> ,       Groovy-. </p><br><p>    <em>PsiElement</em> ,   .            .      . </p><br><p>     PSI- ,       <em>PsiElementFactory</em>   ,    .  Java-?    Java-.   Groovy?  <em>GroovyPsiElementFactory</em> .  рдФрд░ рдЗрд╕реА рддрд░рд╣ред </p><br><p>  <em>PsiElementFactory</em>       .       Groovy  Kotlin ,        . </p><br><div class="spoiler"> <b class="spoiler_title"> PsiElement  package name</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> factory = GroovyPsiElementFactory.getInstance(buildGradlePsiFile.project) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> packageName = config.mainParams.packageName <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newArgumentItem = factory.createStringLiteralForReference(packageName)</code> </pre> </div></div><br><p>         <em>PsiElement</em> . </p><br><div class="spoiler"> <b class="spoiler_title">   Map-</b> <div class="spoiler_text"><pre> <code class="kotlin hljs">targetPsiElement.add(newArgumentItem)</code> </pre> </div></div><br><h3 id="donastroyka-kapt-a-dlya-moxy-v-application-module">  kapt-  Moxy  application  </h3><br><p>    -,    , тАУ  kapt-  Moxy  application .  :          <em>@RegisterMoxyReflectorPackages</em> . </p><br><div class="spoiler"> <b class="spoiler_title">-?</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/us/17/in/us17inlvgteb4k9pmegkurtl7y8.png" alt="рдЫрд╡рд┐"></p></div></div><br><p>         ,  :  <em>PsiFile</em> ,  <em>PsiElement</em> ,  тАж      ,         <em>PsiElement</em> -. </p><br><p>     :  ,    <em>@RegisterMoxyReflectorPackages</em> ,       <em>value</em>  ,          . </p><br><p>    ,       . ,     <em>PsiManager</em> ,   <em>PsiClass</em>  . </p><br><div class="spoiler"> <b class="spoiler_title"> PsiClass  @RegisterMoxyReflectorPackages</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = ModuleManager.getInstance(project) .modules.toList() .first { it.name == <span class="hljs-string"><span class="hljs-string">"headhunter-applicant"</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> psiManager = PsiManager.getInstance(appModule.project) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> annotationPsiClass = ClassUtil.findPsiClass( psiManager, <span class="hljs-string"><span class="hljs-string">"com.arellomobile.mvp.RegisterMoxyReflectorPackages"</span></span> ) ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span></code> </pre> </div></div><br><p>     <em>AnnotatedMembersSearch</em>   ,      . </p><br><div class="spoiler"> <b class="spoiler_title"> ,  </b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> annotatedPsiClass = AnnotatedMembersSearch.search( annotationPsiClass, appModule.moduleContentScope ).findAll() ?.firstOrNull() ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span></code> </pre> </div></div><br><p>  ,  <em>PsiElement</em>  ,        value.     ,      . </p><br><div class="spoiler"> <b class="spoiler_title">      </b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> annotationPsiElement = (annotatedPsiClass .annotations .first() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> KtLightAnnotationForSourceEntry ).kotlinOrigin <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> packagesPsiElements = annotationPsiElement .collectDescendantsOfType&lt;KtValueArgumentList&gt;() .first() .collectDescendantsOfType&lt;KtValueArgument&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> updatedPackagesList = packagesPsiElements .mapTo(mutableListOf()) { it.text } .apply { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> += <span class="hljs-string"><span class="hljs-string">"\"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${config.packageName}</span></span></span><span class="hljs-string">\""</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newAnnotationValue = updatedPackagesList.joinToString(separator = <span class="hljs-string"><span class="hljs-string">",\n"</span></span>)</code> </pre> </div></div><br><p>   <em>KtPsiFactory</em>   <em>PsiElement</em> тАУ          . </p><br><div class="spoiler"> <b class="spoiler_title">      </b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kotlinPsiFactory = KtPsiFactory(project) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newAnnotationPsiElement = kotlinPsiFactory.createAnnotationEntry( <span class="hljs-string"><span class="hljs-string">"@RegisterMoxyReflectorPackages(\n</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$newAnnotationValue</span></span></span><span class="hljs-string">\n)"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> replaced = annotationPsiElement.replace(newAnnotationPsiElement)</code> </pre> </div></div><br><p>  . </p><br><p>     ?    code style.  ,      IDEA    : CodeStyleManager. </p><br><div class="spoiler"> <b class="spoiler_title"> code style</b> <div class="spoiler_text"><pre> <code class="kotlin hljs">CodeStyleManager.getInstance(module.project).reformat(replacedElement)</code> </pre> </div></div><br><p>    -  ,     . </p><br><h3 id="vyvody-1">  </h3><br><ul><li>     ,      PSI-,      . </li><li> ,  PSI     ,    ,    PsiElement-. </li></ul><br><h1 id="chto-delat-dalshe">   ? </h1><br><p>   . </p><br><ul><li>      тАУ    ,       . </li><li>       .       .   :            . </li><li>     ?      .  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">   IDEA</a>   ,   .       ,        . тАФ   -  ,    GitHub  .  ,    ,  . </li><li>    -   тАУ    IntelliJ IDEA   .  ,   <em>Util</em>  <em>Manager</em> ,  ,    ,    . </li><li>   :     .  ,  <em>runIde</em> ,     IDEA,   .   ,           hh.ru,       . </li></ul><br><p>  рд╡рд╣ рд╕рдм рд╣реИред <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">  </a> ,  ,   тАУ . </p><br><h2 id="faq">  рдкреВрдЫреЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рд╢реНрди </h2><br><ul><li>       ? </li></ul><br><p>       ,       .      ,   2  3 . </p><br><ul><li>       IDEA   ,   -  ? </li></ul><br><p> ,    IDEA   IDEA SDK ,   deprecated,   ,  .   SDK-   ,   ,     . </p><br><ul><li>         ? </li></ul><br><p>    тАУ    gitignore .   -   . </p><br><ul><li>          ? </li></ul><br><p>      Android Studio  Mac OS,    Ubuntu,   . ,     Windows,    . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi463611/">https://habr.com/ru/post/hi463611/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi463599/index.html">"рдпрд╣ рдПрдХ рдмреБрд░рд╛ рд╕рдкрдирд╛ рд╣реИ": рдЕрдВрддрд░рд┐рдХреНрд╖ рдпрд╛рддреНрд░реА рдлрд┐рд▓реНрдореЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд░рд╛рдп рд╕рд╛рдЭрд╛ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдЕрдВрддрд░рд┐рдХреНрд╖ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдлрд┐рд▓реНрдореЛрдВ рдХреА рд╢реВрдЯрд┐рдВрдЧ рдХреЗ рджреМрд░рд╛рди рд╣реЙрд▓реАрд╡реБрдб рдХреНрдпрд╛ рдЧрд▓рддреА рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi463601/index.html">рдЬрд╛рд╡рд╛ / рд▓реЙрдЧрдмреИрдХ рдореЗрдВ рдЕрд▓рдЧ рд╡рд┐рдзрд┐ рд▓реЙрдЧрд┐рдВрдЧ</a></li>
<li><a href="../hi463605/index.html">рддрдХрдиреАрдХреА рдмреБрджреНрдзрд┐рдЬреАрд╡реА - рдЧрд╣рд░реЗ рд╕реНрдерд╛рди рд╕реЗ</a></li>
<li><a href="../hi463607/index.html">Redux рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рд░рд┐рдПрдХреНрдЯ рд╕рдВрджрд░реНрдн рдФрд░ рд╣реБрдХ рдХреЗ рд╕рд╛рде рд╡реИрдХрд▓реНрдкрд┐рдХ</a></li>
<li><a href="../hi463609/index.html">рдбрд╛рдпрд░реЗрдХреНрдЯрдо рдХреНрд▓рдм рдХреЗ рд▓рд┐рдП рд╕рд┐рдлрд╛рд░рд┐рд╢ рдкреНрд░рдгрд╛рд▓реАред рднрд╛рдЧ рдПрдХ, рд╕рд╣рдпреЛрдЧреА</a></li>
<li><a href="../hi463613/index.html">рдбреЙрдХ рдЪрд┐рддреНрд░ рднреА рд╕рд╛рдорд╛рдиреНрдп рдбреЙрдХрдлрд╛рдЗрд▓ рдХреЗ рдЙрдкрдпреЛрдЧ рд╕реЗ рд╡реЗрдпрд░рдл рдореЗрдВ рдмрдирд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi463617/index.html">рдкрд░реАрдХреНрд╖рдг рдореЛрдмрд╛рдЗрд▓ MMO рдХреА рд╕реБрд╡рд┐рдзрд╛рдПрдБ</a></li>
<li><a href="../hi463619/index.html">рджреВрд░ рд╕реЗ рдХрд╛рдо рдХрд░реЗрдВ: рд╣рдорд╛рд░рд╛ рдЕрдиреБрднрд╡</a></li>
<li><a href="../hi463623/index.html">рд╣рдореЗрдВ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рдЬрдВрдЧрд▓ рд╕реЗ рдЪреБрдирд╛ рдЧрдпрд╛ рд╣реИ: рд╣рдо рдЬреБрдбрд╝рдирд╛рд░ рд╕реЗ рдкрд░реАрдХреНрд╖рдг рддрдХ рдПрдХ рдЫреЛрдЯрд╛ рд░рд╛рд╕реНрддрд╛ рдмрдирд╛ рд░рд╣реЗ рд╣реИрдВ</a></li>
<li><a href="../hi463625/index.html">рдиреЗрдЯрд╡рд░реНрдХ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдФрд░ рдлрд╝реНрд▓реЛрдореЛрди рдиреЗрдЯрд╡рд░реНрдХ рд╕рдорд╛рдзрд╛рдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрд╕рд╛рдорд╛рдиреНрдп рдиреЗрдЯрд╡рд░реНрдХ рдЧрддрд┐рд╡рд┐рдзрд┐ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдирд╛</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>