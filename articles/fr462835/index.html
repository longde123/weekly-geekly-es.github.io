<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòå üçë üìΩÔ∏è Mise en page automatique et styles Unity: notre nouveau pipeline et outils pour l'interface utilisateur ü¶ñ ü§ú ü§´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je vais commencer par l'essentiel: nous avons cr√©√© un outil de mise en page pratique et chang√© le pipeline de travail. Maintenant en ordre. 

 Il exis...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mise en page automatique et styles Unity: notre nouveau pipeline et outils pour l'interface utilisateur</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pixonic/blog/462835/"><img src="https://habrastorage.org/webt/py/zj/bi/pyzjbiha5nept3fqmkkpoezrbms.gif"><br><br>  Je vais commencer par l'essentiel: nous avons cr√©√© un outil de mise en page pratique et chang√© le pipeline de travail.  Maintenant en ordre. <br><br>  Il existe de nombreuses interfaces diff√©rentes dans les jeux mobiles, y compris HUD et un grand nombre d'√©crans de m√©ta.  Les concepteurs UX les con√ßoivent, les concepteurs UI dessinent, et pour que tout cela apparaisse dans le moteur, il y a des personnes sp√©cialement form√©es - les concepteurs UI techniques.  Eh bien, ou simplement des concepteurs de mise en page.  Une partie de leur travail consiste √† transf√©rer minutieusement tout, de la disposition PSD au pr√©fabriqu√©, num√©ro apr√®s num√©ro.  Ils sont √©galement engag√©s dans des animations d'interface utilisateur, remplissent des sprites, adaptent la disposition, organisent les cl√©s de localisation, etc. <br><br>  Et nous nous sommes fix√© plusieurs objectifs: <br><br><ul><li>  acc√©l√©rer le travail du concepteur de mise en page et le sauver de la routine; </li><li>  rationaliser l'interaction entre les d√©partements de conception et de d√©veloppement de l'interface utilisateur; </li><li>  apporter l'uniformit√© dans l'interface utilisateur: cr√©er des lignes directrices et former des actifs Unity sur leur base; </li><li>  fournir l'extensibilit√© et la polyvalence de l'interface utilisateur, la r√©utilisation des actifs, la r√©sistance aux modifications et une optimisation facile. </li></ul><br>  C'est comme √ßa que √ßa s'est pass√©. <a name="habracut"></a><br><br>  Nous avons essay√© de cr√©er une sorte de syst√®me de conception √† partir du moteur Unity et d'Adobe Photoshop (qui, √† l'exception d'un d√©veloppeur de jeu, n'est gu√®re utilis√© pour cr√©er des interfaces).  En gros, nous √©tions confront√©s √† la t√¢che de nous faire des amis Photoshop et Unity. <br><br><img src="https://habrastorage.org/webt/ew/ze/6i/ewze6ipw85qpsvsdfdnlwvvzky8.jpeg"><br><br>  Tout d'abord, il a fallu projeter l'ensemble du ¬´langage visuel¬ª dans Unity.  Pour ce faire, nous avons choisi des styles et les avons adapt√©s √† nos propres besoins.  Il s'agit d'une pratique assez courante dans les entreprises.  Ainsi, un ensemble de polices est devenu un style de police, un ensemble de mises en page est devenu un style avec des sprites de ces dispositions, un ensemble de couleurs est devenu un style avec des couleurs, etc.  Il suffisait de cr√©er tout cela une fois, puis de simplement r√©utiliser et compl√©ter avec l'extension psd avec les directives.  Ainsi, le concepteur d'interface utilisateur est oblig√© d'abandonner 1001 substrats sur diff√©rents √©crans et d'en cr√©er plusieurs universels. <br><br>  Les styles actuels qui sont: <br><br><ol><li>  <b>Style de couleur</b> &lt;nom, couleur&gt; </li><li>  <b>Style de texte</b> &lt;Nom, police, taille de police, mat√©riau de police, interligne&gt; </li><li>  <b>Style de police</b> &lt;Titre, police, mat√©riau de police&gt; </li><li>  <b>Style de bouton</b> &lt;Nom, Param√®tres des boutons&gt; </li><li>  <b>Style de mise en page</b> &lt;nom, image-objet, indentation&gt; </li><li>  <b>Style de sprite</b> &lt;Nom, Sprite&gt; </li><li>  <b>Style de localisation</b> &lt;nom, cl√©&gt; </li><li>  <b>Style d'ic√¥ne</b> &lt;Nom, Sprite&gt; </li></ol><br>  Et en g√©n√©ral, vous pouvez cr√©er des styles facilement et simplement, en l'h√©ritant de la base.  Par exemple: <br><br><pre><code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">CreateAssetMenu(menuName = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"UIStyles/ColorStyle"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ColorStyle</span></span> : <span class="hljs-title"><span class="hljs-title">BaseStyle</span></span>&lt;<span class="hljs-title"><span class="hljs-title">Color</span></span>&gt; { }</code> </pre> <br>  Seule limitation: le type doit √™tre s√©rialisable.  Ainsi, m√™me le typographe fera face √† la cr√©ation de son propre type de style. <br><br><img src="https://habrastorage.org/webt/ap/-u/7g/ap-u7gb-mj4d4jl8ngy3wt3wkb0.jpeg"><br><br>  Certains styles sont n√©cessaires pour modifier l'√©tat de l'interface utilisateur.  Par exemple, Style de couleur, Style de texte, Style de sprite, Style de bouton, Style de localisation.  Tous affectent diff√©rents objets de jeu.  Les images sont peintes de diff√©rentes couleurs, diff√©rents sprites y sont substitu√©s, etc. <br><br>  Jusqu'√† pr√©sent, il n'√©tait pas clair comment utiliser tout cela.  Je vais donner un exemple simple.  Disons que nous avons un bouton d'offres de diff√©rentes couleurs.  La couleur du bouton d√©pend de l'offre elle-m√™me.  Et ils ressemblent √† ceci: <br><br><img src="https://habrastorage.org/webt/_y/8h/bv/_y8hbvtkew9spcztt21fjn_af5s.jpeg"><br><br>  Ensuite, nous cr√©ons un pr√©fabriqu√© avec Image, sur lequel nous accrochons le ColorStyleComponent, y ins√©rons le style ColorStyle, o√π toutes les couleurs que le bouton peut √™tre repeint seront stock√©es, puis appliquer des styles en fonction de l'offre √† l'int√©rieur du code. <br><br><img src="https://habrastorage.org/webt/4z/mz/wp/4zmzwp5ptez9lika0pydr7dzata.jpeg"><br><br>  Les styles FontStyle, IconStyle et LayoutStyle sont utilis√©s pour l'auto-constructeur.  Il s'agit d'une biblioth√®que de toutes les polices, ic√¥nes et calques sous-jacents du projet. <br><br>  Un syst√®me avec des styles pr√©sente un grand nombre d'avantages (seul un groupe d'actifs dans un projet peut √™tre ennuyeux): <br><br><ul><li>  r√©utilisation; </li><li>  lors du changement de style, le pr√©fabriqu√© ne change pas, mais si quelque chose doit √™tre chang√©, cela affectera tous les pr√©fabriqu√©s; </li><li>  les typographes cr√©ent eux-m√™mes les styles, les changent et les suppriment, ce qui permet aux programmeurs d'oublier le tas de champs en monobekh avec des fleurs; </li><li>  les styles peuvent √™tre appliqu√©s directement dans l'√©diteur, car pour l'√©diteur BaseStyleComponent &lt;T, TStyle&gt; son propre √©diteur est √©crit. </li></ul><br>  Pour modifier l'√©tat d'un grand widget, plusieurs styles peuvent √™tre utilis√©s, diff√©rents objets peuvent √™tre activ√©s / d√©sactiv√©s.  Pour ce faire, le StateStyleComponent a √©t√© cr√©√© dans le projet, qui collecte tous les styles et objets qui doivent √™tre activ√©s / d√©sactiv√©s.  Ensuite, directement dans le widget, tous ses √©tats possibles sont cr√©√©s et commut√©s.  Cela sauve les programmeurs d'un tas du m√™me code pour changer les couleurs / polices / textes / sprites. <br><br><img src="https://habrastorage.org/webt/ob/oz/6z/oboz6zrkayuamm0ew9bq7nzzcto.png"><br><br><img src="https://habrastorage.org/webt/e0/1e/kx/e01ekxz1euufcifycetldyvgbyg.gif"><br><br>  Ensuite, nous avons cr√©√© un constructeur automobile.  Il s'agit d'un outil dans lequel vous collez le psd, et sur la sortie un pr√©fabriqu√© brut est cr√©√©, dans lequel certains sprites sont d√©j√† ins√©r√©s, les positions, les noms, les polices, les tailles, les alias sont enregistr√©s - tout ce qui est si soigneusement copi√© du psd par les concepteurs de mise en page avec des stylos.  Il ancre m√™me grossi√®rement et maintient une hi√©rarchie.  Et il le fait en quelques secondes, ce qui √©conomise finalement des heures de copie minutieuse. <br><br><img src="https://habrastorage.org/webt/xk/tr/mt/xktrmt-ytwtagbt7hdyolid9ou4.jpeg"><br><br>  La fen√™tre de l'ordinateur automatique elle-m√™me semble maigre sur les param√®tres.  Pendant l'utilisation, ces param√®tres seront ajout√©s. <br><br><img src="https://habrastorage.org/webt/f3/me/uy/f3meuyl1gwvet3kostin0yvheci.png"><br><br>  Pour obtenir toutes les donn√©es, l'analyseur psd a √©t√© √©crit sp√©cifiquement pour ces besoins en fonction de la sp√©cification psd.  C'est un processus plut√¥t ennuyeux, vous pouvez prendre des biblioth√®ques pr√™tes √† l'emploi.  Mais comme nous voulions tout faire avec un seul bouton, j'ai d√ª √©crire √† partir de z√©ro. <br><br>  Le constructeur automobile copie toute la hi√©rarchie dans Photoshop.  Tout d'abord, un objet racine est cr√©√© avec le nom du pr√©fabriqu√©, qui est ancr√© aux bords de l'√©cran.  √Ä l'int√©rieur, les objets sont cr√©√©s selon le principe d√©crit ci-dessus - l'objet est cr√©√© dans l'objet racine, puis un vrai parent lui est affect√© tout en conservant la position globale.  Les ancres sont plac√©es selon le principe - √† quel bord ou centre l'objet est situ√© le plus pr√®s duquel il est clou√©, s√©par√©ment le long des axes OX et OY.  Toutes les positions et tailles sont rendues enti√®res.  Le constructeur automobile ignore les objets cach√©s. <br><br><img src="https://habrastorage.org/webt/pe/id/cq/peidcqq35yq5dnw-ohma-pdbw0s.jpeg"><br><br>  Dans Photoshop, il existe 5 types de calques: groupes, pixels, formes, textes et objets intelligents. <br><br><ol><li>  <b>Les groupes (couche de groupe)</b> dans le constructeur automatique se transforment en un objet de jeu vide, de sorte qu'un grand composant d'interface tel que had, slot, groupe de slots et ainsi de suite peut √™tre facilement combin√© en un groupe. </li><li>  <b>La couche de pixels</b> devient simplement une image de couleur blanche.  Il peut s'agir d'ic√¥nes, de dos, d'images, de lucioles.  Ensuite, ils sont ajout√©s manuellement au projet, comme des sprites, et ins√©r√©s dans Image. </li><li>  <b>Les formes (couche de forme)</b> deviennent une image avec la couleur de <b>forme</b> .  Il peut s'agir de n'importe quel √©l√©ment vectoriel: mises en page, ic√¥nes et autres. </li><li>  <b>Les textes</b> de l'ordinateur automatique deviennent TextMeshProUGUI et h√©ritent du texte, de la police, de la couleur, du trait, de l'ombre, du d√©grad√©, de la taille de la police, du positionnement (droite, centre, gauche). </li><li>  <b>Les objets intelligents</b> deviennent des <b>objets de jeu</b> vides ordinaires.  Il est logique d'utiliser des objets intelligents pour faire ce qui a d√©j√† √©t√© impos√© en tant que pr√©fabriqu√©s imbriqu√©s (par exemple, la barre sup√©rieure, qui est la m√™me partout) </li></ol><br>  L'encapsuleur automatique sait √©galement comment collecter des couleurs de tous les endroits (par exemple, couleur de forme, couleur de police, effet de couleur, couche de couleur) et les convertir en un hex.  De m√™me avec la transparence. <br><br>  S√©par√©ment, le concepteur d'interface utilisateur met imm√©diatement des options dans les noms des couches et des groupes (comme dans Zeplin). <br><br><div class="spoiler">  <b class="spoiler_title">Exemples d'options dans le tableau</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><th>  Option </th><th>  Arguments </th><th>  Valeur </th><th>  Exemple </th><th>  Objet dans l'unit√© </th></tr><tr><td>  -l </td><td>  Nom de la ligne directrice √† partir des lignes directrices (sans espaces) </td><td>  Ajout d'un sprite √† l'image </td><td>  Disposition Hud -l rose228 </td><td>  Image_HudLayout avec le composant Image avec un sprite de mise en page pink228 ins√©r√© √† partir des directives </td></tr><tr><td>  -cs </td><td>  Style_name.  Facultatif (sans espaces) </td><td>  Ajoute un ColorStyleComponent avec le style StyleName. </td><td>  Hud Layout -cs HudLayoutColors <br>  Disposition Hud -cs </td><td>  Image_HudLayout avec composant ColorStyleComponent avec style dans HudLayoutColors <br>  Image_HudLayout avec le composant ColorStyleComponent </td></tr><tr><td>  -ts </td><td>  Style_name.  Facultatif (sans espaces) </td><td>  Ajoute un TextStyleComponent avec le style StyleName. </td><td>  Ability -tsAbilityColors <br>  Capacit√© -ts </td><td>  Text_Ability avec le composant TextStyle avec un style dans AbilityColors <br>  Text_Ability avec le composant TextStyle </td></tr><tr><td>  -bs </td><td>  Style_name. <br>  Facultatif (sans espaces) </td><td>  Ajoute ButtonStyleComponent avec le style StyleName </td><td>  Jouer -b -bs </td><td></td></tr><tr><td>  -b </td><td></td><td>  Voici le bouton. </td><td>  Jouer -b <br>  Jouer -b -l 1 </td><td>  Button_Play avec bouton et image <br>  Button_Play avec le composant Button et Image avec l'image-objet 1 ins√©r√©e dans les instructions </td></tr><tr><td>  En option </td><td></td><td></td><td></td><td></td></tr><tr><td>  -hg </td><td></td><td>  Groupe horizontal (exclusivement sur le groupe) </td><td>  Boutons du module - hg </td><td>  ModuleButtons avec composant Groupe de disposition horizontale </td></tr><tr><td>  -vg </td><td></td><td>  Groupe vertical (exclusivement sur le groupe) </td><td>  Boutons du module - vg </td><td>  ModuleButtons avec composant <br>  Groupe de disposition verticale </td></tr></tbody></table></div><br></div></div><br>  Avantages de l'outil: mise en page rapide, sauvegarde de la hi√©rarchie, ajout des composants n√©cessaires, unification des noms des objets de jeu, ajout automatique de styles par nom, d√©sactivation des rakecasts l√† o√π il n'est pas n√©cessaire, apposition approximative. <br><br>  Mais l'approche a ses inconv√©nients: si la disposition psd est compos√©e de 1000 couches pour un seul bouton, elle sera pratiquement inutile, dans ce cas, il est recommand√© d'ajouter le bouton √† l'objet intelligent.  De plus, l'outil n√©cessite une d√©nomination normale et correcte du concepteur d'interface utilisateur - il ne sera plus possible de nommer les couches "Rectangle_copy_21_1005".  D'un autre c√¥t√©, cela rend les mises en page plus lisibles pour les autres concepteurs d'interface utilisateur. <br><br>  Les plans sont de proposer un syst√®me qui permettrait d'√©conomiser de l'exportation des sprites de substrat. <br><br>  La mise en page avec la fen√™tre contextuelle auto-maker de cet article a pris 3 minutes 13 secondes (sauf pour lancer des sprites dans le projet).  Les stylos prennent 18 minutes 32 secondes.  Dans le m√™me temps, il y a aussi des probl√®mes dans la mise en page avec des stylos - √† certains endroits, des positions incorrectes que l'≈ìil attentif du concepteur d'interface utilisateur remarquera et devront √™tre refaites.  Par cons√©quent, la mise en page automatique est √©galement bonne car elle √©limine le facteur humain. <br><br>  Et quelques critiques sur le constructeur automobile: <br><blockquote>  <i>¬´Le constructeur automobile acc√©l√®re consid√©rablement le travail, mais jusqu'√† pr√©sent, il semble qu'il soit n√©cessaire de simplifier le seuil d'entr√©e, d'installation et de configuration¬ª</i> </blockquote><blockquote>  <i>"Je pense que si vous configurez des styles pour le typographe, ce n'est pas beaucoup de diff√©rence dans le temps, mais les concepteurs et les programmeurs gagneront du temps et des nerfs √† coup s√ªr"</i> </blockquote><blockquote>  <i>"La chose est tr√®s cool))"</i> </blockquote><blockquote>  <i>¬´Styles - le sujet est tr√®s cool, cela ne suffit pas dans notre projet, car ils aiment repeindre les boutons sur les mises en page, les textes, etc.</i>  <i>C'est formidable que maintenant cela puisse √™tre corrig√© dans le styliste et il n'y a pas de maux de t√™te, que vous ayez diff√©rentes couleurs ou diff√©rents sprites dans des endroits uniformes "</i> </blockquote><blockquote>  <i>¬´Les concepteurs d'interface doivent eux-m√™mes faire la mise en page, car seuls ils connaissent les caract√©ristiques de leurs mises en page.</i>  <i>Et le concepteur de mise en page automatique est une excellente chose pour ceux qui ne veulent pas comprendre les subtilit√©s de la mise en page.</i>  <i>Si l'instrument a une interface intuitive et apprend de Figma, il sera tout simplement luxueux. ¬ª</i> </blockquote>  Personnellement, je pense que tout ce qui peut √™tre automatis√© devrait l'√™tre, et les gens devraient avoir la possibilit√© de s'engager dans un travail plus cr√©atif et inventif. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462835/">https://habr.com/ru/post/fr462835/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462821/index.html">Comment √©valuer les ordinateurs qui n'existent pas encore</a></li>
<li><a href="../fr462825/index.html">Rapports vid√©o du Summer Droid Meetup</a></li>
<li><a href="../fr462827/index.html">La vie et le succ√®s de Larry Ellison, fondateur d'Oracle</a></li>
<li><a href="../fr462831/index.html">Ride the Web 3.0 Wave</a></li>
<li><a href="../fr462833/index.html">Le livre "La mod√©lisation pr√©dictive en pratique"</a></li>
<li><a href="../fr462837/index.html">Test de la bo√Æte noire</a></li>
<li><a href="../fr462843/index.html">Limitations des jeux 8 bits et leur recr√©ation exacte dans Unity</a></li>
<li><a href="../fr462845/index.html">Massage pour votre cerveau: parlez d'ASMR</a></li>
<li><a href="../fr462847/index.html">Webinaires Hewlett Packard Enterprise en ao√ªt-octobre 2019</a></li>
<li><a href="../fr462849/index.html">Quelque chose √† propos de l'inode</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>