<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßê üîú üõ£Ô∏è Casa inteligente con Xiaomi en el ejemplo de una sauna üßñüèø üèµÔ∏è üíó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hay bastantes rese√±as y videos en Internet sobre la construcci√≥n de casas inteligentes. Existe la opini√≥n de que todo esto es bastante costoso y probl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Casa inteligente con Xiaomi en el ejemplo de una sauna</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484372/">  Hay bastantes rese√±as y videos en Internet sobre la construcci√≥n de casas inteligentes.  Existe la opini√≥n de que todo esto es bastante costoso y problem√°tico en la organizaci√≥n, es decir, en general, el destino de los geeks.  Pero el progreso no se detiene.  Los dispositivos se est√°n volviendo m√°s baratos y m√°s funcionales, y el dise√±o y la instalaci√≥n son bastante simples.  Sin embargo, las revisiones se centran principalmente en 1-2 ejemplos de uso, pr√°cticamente no cubren los matices y no crean una imagen completa.  Por lo tanto, en este art√≠culo quiero hacer una descripci√≥n general del proyecto terminado, demostrar los casos de uso y las dificultades encontradas en la construcci√≥n de una casa inteligente con dispositivos Xiaomi en el ejemplo de una sauna.  Las ideas descritas con peque√±as variaciones tambi√©n se pueden aplicar a la automatizaci√≥n del apartamento. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9h/lb/tj/9hlbtjf6rdghf--lzwsq-5bysk8.jpeg" alt="imagen"></div><br><h2>  Antecedentes o por qu√© todo esto es necesario </h2><br>  Para empezar, un poco de historia para que se pueda entender el contexto.  A principios del oto√±o de 2018, la sauna se termin√≥ y se puso en funcionamiento.  La sauna es una estructura de capital aut√≥noma con calefacci√≥n y suministro de agua durante todo el a√±o. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ns/wd/o5/nswdo5svyprgue1sgxhojmb83kk.jpeg" alt="imagen"></div><a name="habracut"></a><br>  Por razones comprensibles, nadie vive permanentemente en la casa de ba√±os y no controla el estado de las instalaciones.  Por mucho que quisiera, visitar la casa de ba√±os tampoco es algo muy frecuente.  En consecuencia, los pensamientos sobre la creaci√≥n de un ba√±o "inteligente" estuvieron presentes desde el comienzo del proyecto.  En primer lugar, por razones de seguridad (incendio, inundaci√≥n, control de acceso).  Por ejemplo, apagar la calefacci√≥n a -35 grados afuera (vivo en Novosibirsk) es una situaci√≥n muy peligrosa.  Sin embargo, a diferencia de la casa principal, no pens√© en el proyecto de automatizaci√≥n del ba√±o desde el principio y no hice cableado adicional en los lugares correctos.  Por otro lado, el ba√±o se llev√≥ a cabo por Internet, y la apariencia de los otros dos edificios es videovigilancia (puede evaluar lo que est√° sucediendo visualmente). <br><br>  De regreso de un viaje de negocios en noviembre de 2019, por la noche fui a la casa de ba√±os, abr√≠ la puerta principal y me sorprendi√≥ lo que vi.  Los LED del punto WiFi parpadeaban desde la oscuridad y una corriente de agua ca√≠a por mis pies.  As√≠ que hubo inundaciones y no se cort√≥ la electricidad.  El agua en la casa de ba√±os se organiza con la ayuda de su propio pozo, una bomba sumergible y un sistema de automatizaci√≥n que controla el proceso.  Al final result√≥ que, uno de los accesorios en la uni√≥n del inodoro fue derribado y todas las habitaciones se inundaron.  Nunca supe por qu√© la automatizaci√≥n era compasiva y todav√≠a se apagaba, pero logr√≥ bombear 15 cm de agua por cuadrado 30. Fue -14 grados afuera ese d√≠a.  El piso c√°lido logr√≥ mantener la temperatura ambiente en el nivel correcto, pero hab√≠a un 100% de humedad.  No podr√≠a colarse en la organizaci√≥n de una casa inteligente, debe comenzar a hacerlo. <br><br><h2>  Elecci√≥n de dispositivos </h2><br>  Durante la construcci√≥n de la casa principal adquir√≠ experiencia trabajando con dispositivos Eldes (se cre√≥ el cableado apropiado).  Parte de la automatizaci√≥n se realiza en <a href="https://www.raspberrypi.org/">Raspberry PI</a> .  Otra parte est√° hecha en <a href="https://www.aqara.com/us/home.html">dispositivos Xiaomi Aqara</a> .  La variante con Raspberry PI fue la que m√°s me gust√≥ e inicialmente la consider√© para el ba√±o.  Pero, desafortunadamente, requiere mucho m√°s esfuerzo organizarse.  No es un dispositivo plug-and-play despu√©s de todo, desde ejercicios con hierro hasta software de escritura para sus propias necesidades.  Por ciertas razones, MajorDoMo no estaba contento con eso.  Cruzar Raspberry PI, el adaptador ZigBee (para usar sensores inal√°mbricos Xiaomi) y Apple HomeKit requiri√≥ aprendizaje (y la interfaz de Apple HomeKit no es muy feliz en este momento).  No hubo mucho tiempo (no quer√≠a que la situaci√≥n se repitiera) y no hab√≠a cableado para cada punto necesario, as√≠ que decid√≠ hacer todo en los dispositivos Xiaomi. <br><br>  El dispositivo principal en esta situaci√≥n es el hub.  En el caso de Xiaomi, hay dos versiones del hub: Xiaomi Mi Smart Home Gateway 2 y Xiaomi Aqara Gateway.  Este √∫ltimo es aproximadamente el doble de caro, m√°s adecuado para el mercado local y capaz de integrar dispositivos en Apple HomeKit.  Sin embargo, si instala la aplicaci√≥n Aqara Home y selecciona la regi√≥n "Rusia", al momento de escribir estas l√≠neas, solo estar√°n disponibles 13 dispositivos diferentes (interruptores, enchufes, sensores).  Si instala la aplicaci√≥n Xiaomi Home, seleccione la regi√≥n "China continental", entonces habr√° cientos de dispositivos disponibles para la conexi√≥n.  Sin embargo, si selecciona la regi√≥n "China continental", no podr√° conectar el z√≥calo europeo y viceversa.  La selecci√≥n de la regi√≥n "China continental" dentro de la aplicaci√≥n Aqara Home no proporciona la integridad de los dispositivos que est√°n presentes dentro de Xiaomi Home con la misma regi√≥n.  Temiendo incompatibilidades, decid√≠ parar en el centro Xiaomi Mi Smart Home Gateway 2.  Por cierto, el centro en s√≠ es una l√°mpara, esto se puede tener en cuenta durante la instalaci√≥n. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vs/ul/kx/vsulkxlnghjjindbwwmxw9aemxq.jpeg" alt="imagen"></div><br>  Otra pregunta interesante es cu√°nto tiempo va a funcionar esto.  Ni siquiera se trata de sensores y bater√≠as, sino de sincronizaci√≥n y almacenamiento de datos en la nube.  Por el momento, la cuenta es gratuita.  Toda la informaci√≥n se almacena en los servidores de Xiaomi.  Si ma√±ana los chicos deciden que los usuarios de Rusia no deber√≠an almacenar datos en la regi√≥n "China continental" o Roskomnadzor por alguna raz√≥n desterrar√°n sus servidores, toda la casa inteligente corre el riesgo de convertirse en una calabaza.  Decid√≠ por m√≠ mismo que en este caso los sensores permanecer√°n, y el concentrador ser√° reemplazado por el adaptador Raspberri PI + ZigBee. <br><br><h2>  Monitoreo y prevenci√≥n de fugas. </h2><br>  El primer y m√°s importante escenario de automatizaci√≥n fue una continuaci√≥n natural del problema: cuando se produce una fuga, el suministro de agua, es decir, la bomba, debe cerrarse y debe enviarse una alerta de problema al tel√©fono.  Hab√≠a dos ubicaciones de fugas potencialmente peligrosas. <br><br>  Adem√°s del concentrador, este escenario requer√≠a dos detectores de fugas y un enchufe inteligente montado en la pared.  Los sensores de fugas son aut√≥nomos, funcionan con bater√≠as.  El fabricante afirma que una bater√≠a ser√° suficiente durante 2 a√±os. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bt/d3/q2/btd3q2gftpvfsf_drdszmsisfwm.jpeg" alt="imagen"></div><br>  La instalaci√≥n de un enchufe inteligente fue un poco complicada por el hecho de que debajo de los enchufes chinos necesita enchufes cuadrados, que no se venden en nuestras tiendas regulares (pero puede traerlos por pedido). <br><br>  Perforar agujeros cuadrados sigue siendo un placer.  Adem√°s, necesita un adaptador en el buen sentido, aunque tambi√©n hay una salida para el enchufe europeo.  La versi√≥n de Aqara para el mercado local actualmente no tiene un enchufe montado en la pared, lo que nos une a la regi√≥n de "China continental".  Alternativamente, puede instalar un enchufe de pared normal y enchufar un enchufe inteligente Xiaomi en √©l, pero esto requerir√≠a dos adaptadores adicionales.  Otra alternativa era un relevo.  Pero me detuve en un enchufe montado en la pared. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qe/rg/pg/qergpgrjkaqqosy5xr2pqc_hli8.jpeg" alt="imagen"></div><br>  En la aplicaci√≥n Xiaomi Home, se agregaron un z√≥calo y un sensor.  A continuaci√≥n, se escribe un escenario de "en caso de fuga" para dos acciones: apagar el z√≥calo y enviar una alerta. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p7/pj/ub/p7pjubzhpjzb6tt_aoxrdd20_fs.jpeg" alt="imagen"></div><br>  El primer sensor de fugas se instal√≥ al lado de la bomba (y, de hecho, al lado del cubo).  Para la prueba, se verti√≥ agua en una placa peque√±a y se baj√≥ el sensor.  Hice toda la acci√≥n directamente en el lugar donde se instal√≥ el sensor para acercar la situaci√≥n a la realidad lo m√°s posible.  La prueba fue exitosa: se desconect√≥ el enchufe, se activ√≥ la alarma en el tel√©fono y el concentrador parpade√≥ en modo de emergencia. <br><br>  Se plane√≥ instalar el segundo detector de fugas en el inodoro cerca de la uni√≥n de la tuber√≠a.  Pero con su instalaci√≥n hubo matices: el concentrador no vio el sensor, aunque la distancia era peque√±a.  El fallo fue la configuraci√≥n del local. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ce/33/gb/ce33gbivdrkzwq2f4t-vghi69ki.jpeg" alt="imagen"></div><br>  Entre el lugar de instalaci√≥n del cubo (sala de descanso) y el lugar de instalaci√≥n del segundo sensor de fugas (inodoro) hab√≠a una sala de vapor.  En las mejores tradiciones, la sala de vapor estaba cosida en un c√≠rculo de aluminio, creando problemas con el paso de la se√±al. <br><br>  El fabricante afirma que los dispositivos pueden formar una red de malla, es decir, un dispositivo puede transmitir datos al concentrador a trav√©s de otro dispositivo.  He visto informaci√≥n en alg√∫n lugar que solo los dispositivos que est√°n conectados a la red (y no alimentados por bater√≠a) pueden actuar como tales transmisores en la red de malla.  Sin embargo, fue suficiente para m√≠ instalar un sensor de temperatura en la esquina del ba√±o para que la se√±al del sensor de fugas ya no se perdiera.  Tal vez sea una coincidencia porque se instal√≥ un rel√© de control de alumbrado p√∫blico debajo del techo en la sala de lavado (tal vez act√∫a como un transmisor en la red de malla).  Sin embargo, el problema con la p√©rdida de se√±al del detector de fugas en el inodoro se ha resuelto.  Adem√°s, la conexi√≥n del instrumento al concentrador se puede verificar presionando el sensor centralmente.  Si todo est√° bien, escuchar√° la informaci√≥n del concentrador en chino puro (en el caso del concentrador Aqara, la comunicaci√≥n es en ingl√©s agradable). <br><br>  Una comprobaci√≥n para ver si se ha desconectado la alimentaci√≥n y luego se ha activado mediante la m√°quina muestra que el enchufe inteligente se apaga.  Hay una configuraci√≥n adecuada para que contin√∫e cuando se enciende: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7m/mp/rv/7mmprvrfrwirqrveigp5hk5rbna.jpeg" alt="imagen"></div><br>  Una se√±al adicional de inundaci√≥n fue un aumento de la humedad al 100%.  Consulte la siguiente secci√≥n sobre el control de este signo. <br><br><h2>  Control de humo y temperatura. </h2><br>  Una sauna es una sala de peligro de incendio, por lo que el siguiente escenario fue determinar los signos de incendio.  Para este escenario, se requirieron dos detectores de temperatura (y humedad) y de humo. <br><br>  El sensor de humo se mont√≥ en el techo del corredor en el ba√±o (en realidad cerca de la estufa y la salida de la sala de vapor).  Adem√°s, se agreg√≥ un dispositivo a la aplicaci√≥n Xiaomi Home y se cre√≥ un script "en caso de detecci√≥n de humo", seguido de una notificaci√≥n al tel√©fono.  La prueba se realiz√≥ con un f√≥sforo de chimenea.  El sensor hizo frente con √©xito a la prueba.  El centro estaba congelando la alarma, adem√°s estaba funcionando una alerta audible.  El sensor en s√≠ tambi√©n era muy desagradable y emiti√≥ un pitido fuerte, advirtiendo de un problema. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zg/ej/jg/zgejjg01wv9ayueq8tzptcumzs8.jpeg" alt="imagen"></div><br>  Otro signo de fuego es un aumento de la temperatura.  Se instalaron dos sensores para controlar la temperatura: uno en la sala de descanso y el otro en la sala de lavado.  A continuaci√≥n, se configur√≥ un escenario de "en caso de temperatura por encima del punto de ajuste" en la aplicaci√≥n con una notificaci√≥n correspondiente en el tel√©fono.  Por el momento, he establecido el umbral de activaci√≥n para el ba√±o en 30 grados (en verano, probablemente ser√° necesario reconfigurarlo). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nq/0w/pj/nq0wpjrfwe3nsl6hfpnjxwsuzhq.jpeg" alt="imagen"></div><br>  Adem√°s, se configur√≥ el escenario "en caso de temperatura por debajo de un valor predeterminado" con un umbral de activaci√≥n de 18 grados y una advertencia en el tel√©fono.  Si por alguna raz√≥n la calefacci√≥n deja de funcionar, me gustar√≠a saberlo lo antes posible.  Del mismo modo, se han creado los escenarios "en caso de aumento de la humedad" para ambos sensores con un umbral de activaci√≥n del 70%, una advertencia en el tel√©fono y el apagado de la bomba de agua. <br><br>  De las bonificaciones de los sensores de temperatura y humedad, los gr√°ficos hist√≥ricos est√°n disponibles en la aplicaci√≥n.  Puede, por ejemplo, determinar en qu√© momentos se us√≥ el ba√±o para su prop√≥sito previsto (picos de temperatura en el gr√°fico a continuaci√≥n) o comparar si la temperatura actual es anormal. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cf/tb/av/cftbaviejmlpp8nndfwizm6un60.jpeg" alt="imagen"></div><br><h2>  Control de ventilaci√≥n </h2><br>  La sala de vapor tiene una campana extractora forzada.  Despu√©s de completar los procedimientos, es conveniente ventilar la habitaci√≥n.  La ventilaci√≥n se enciende mediante un interruptor de llave, y la ventilaci√≥n en s√≠ misma toma al menos 30 minutos.  Sin embargo, a menudo la sauna termina a la primera o segunda hora de la noche.  No siempre es posible hacer todo con anticipaci√≥n, y sentarse al final de otros 30 minutos y esperar a que la sala de vapor se ventile; el placer est√° por debajo del promedio porque ya desea dormir. <br><br>  Para este escenario, necesit√°bamos un interruptor de llave de Xiaomi con l√≠nea cero y montaje en pared.  El precio de la pregunta es aproximadamente 1900 p.  Los interruptores est√°n disponibles en la versi√≥n de Aqara para el mercado local. <br><br>  En mi caso, no solo puede reemplazar un interruptor normal por uno inteligente: se requiere una l√≠nea de alimentaci√≥n.  En consecuencia, era necesario tirar de una l√≠nea cero a la abertura de instalaci√≥n para el interruptor, esta era una buena oportunidad.  En el caso de un interruptor autom√°tico sin l√≠nea cero, la instalaci√≥n habr√≠a sido m√°s f√°cil. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/q0/k2/p-/q0k2p-qvozvt_zk3e-i407jprhk.jpeg" alt="imagen"></div><br>  Despu√©s de la instalaci√≥n, el interruptor inteligente se agreg√≥ a la aplicaci√≥n como dispositivo y se prob√≥ el rendimiento.  La configuraci√≥n del interruptor tiene un temporizador y puede configurar el tiempo de apagado.  Es decir, el temporizador de apagado ahora est√° configurado para 30 minutos adicionales de ventilaci√≥n antes de salir de la sauna, y puede irse a la cama en paz. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9e/4c/5g/9e4c5gckmsp0dsiekxkbvhk5imk.jpeg" alt="imagen"></div><br>  Otra opci√≥n es posible para automatizar el proceso.  Despu√©s de completar los procedimientos de ba√±o, la puerta de la sala de vapor se abre completamente adem√°s de la ventilaci√≥n.  Esto da como resultado un aumento de la temperatura en la sala de lavado, donde est√° instalado un sensor de temperatura.  Sobre la base de las lecturas de este sensor, es posible crear escenarios de ventilaci√≥n de encendido / apagado.  Pero todav√≠a no he ejecutado esta opci√≥n.  Adem√°s, puede experimentar con el sensor para abrir la puerta de la sala de vapor.  Pero me temo que morir√° o se caer√° r√°pidamente, porque la puerta est√° hecha de vidrio y la sala de vapor puede estar a 120 grados. <br><br><h2>  Control de la luz de la calle </h2><br>  Otra tarea que quer√≠amos automatizar era controlar la luz de la calle en la terraza.  Uno de los escenarios t√≠picos es encender la luz de la terraza cuando no est√° lejos del edificio y est√° oscuro afuera.  La sauna est√° cerrada, el interruptor de la luz de la calle est√° dentro de la habitaci√≥n.  Ten√≠as que seguir la llave para abrir la puerta y encender la luz.  Apagar las luces requiri√≥ un procedimiento similar.  Otro escenario que ocurr√≠a regularmente era encender o apagar las luces en la terraza cuando estabas en la casa principal.  A menudo olvid√© apagar las luces de la terraza cuando sal√≠ de la sauna y descubr√≠ que ya estaba en la casa: ya fuera mirando por la ventana o mirando las c√°maras de seguridad.  En ese momento, por lo general, me resist√≠a a ir a cualquier parte, por lo que las luces permanec√≠an encendidas toda la noche. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/tg/ex/cctgexbilx-hsr-tomjp9cs0gl8.jpeg" alt="imagen"></div><br>  Se compr√≥ un rel√© de dos canales para implementar esta idea.  El precio de la pregunta es de aproximadamente 2000 p.  Por el momento, no hay retransmisores en la versi√≥n de Aqara para el mercado local.  Pero puede ser reemplazado por un interruptor de llave (est√° claro que instalarlo en la caja del distribuidor es un proceso m√°s problem√°tico). <br><br>  Inicialmente, se supon√≠a que deb√≠a montar el rel√© detr√°s del interruptor de llave, pero fue muy dif√≠cil llegar a la l√≠nea de alimentaci√≥n (el rel√© nuevamente necesita alimentaci√≥n).  El lugar ideal es la caja de conexiones donde convergen la l√≠nea de alimentaci√≥n, la l√≠nea del interruptor autom√°tico y la l√≠nea de las luces de la calle.  Estaba bajo un falso techo, por lo que tuvo que desmontar algunos de los rieles del autom√≥vil.  Era deseable pensar en este punto de antemano.  Sin embargo, la instalaci√≥n fue exitosa.  El diagrama de cableado es mucho m√°s complicado que para enchufes e interruptores (en mi caso, cuatro cables de 3 n√∫cleos y 8 terminales en el rel√©).  Para no tenerlo en mi cabeza y no mezclar nada, pint√© el diagrama del circuito en papel antes de montarlo.  A continuaci√≥n, hice un montaje de prueba para verificar todo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bz/n5/gd/bzn5gdba_obeh-ja73lxl2fdvjc.jpeg" alt="imagen"></div><br>  El dispositivo se conect√≥ a la aplicaci√≥n y comenz√≥ la fase de prueba.  Las luces de la calle ten√≠an que encenderse / apagarse tanto con el interruptor de llave anterior como con la aplicaci√≥n.  Hay dos farolas, una a la izquierda y otra a la derecha.  El rel√© tiene dos canales, pero no ten√≠a sentido encenderlos por separado.  Por otro lado, tampoco quer√≠a activarlos alternativamente con dos clics en la aplicaci√≥n.  Entonces el control se realiz√≥ en un canal del rel√©.  Por una extra√±a coincidencia, esta opci√≥n no funcion√≥ normalmente: hubo un bloqueo en una u otra posici√≥n.  No hab√≠a tiempo para experimentos, porque el d√≠a de la luz hab√≠a terminado y quer√≠amos montar el auto en el techo.  As√≠ que simplemente enganch√© las linternas paralelas a ambos canales y todo funcion√≥ seg√∫n lo deseado.  Para que el conmutador f√≠sico y de software funcione como un conmutador de puerta de enlace, se habilit√≥ la opci√≥n Interbloqueo en la configuraci√≥n del rel√©. <br><br>  Tambi√©n ser√≠a posible organizar el encendido / apagado de las luces por temporizador.  Pero este escenario a√∫n no era interesante. <br><br><h2>  Control de acceso a la sala </h2><br>  Otro momento curioso fue el control de la apertura de la puerta de la calle.  En primer lugar, determinar y notificar que alguien hab√≠a olvidado esta puerta que normalmente se cerr√≥ de golpe o la dej√≥ abierta. <br><br>  Para este escenario, se requer√≠a un sensor de ventana / puerta abierta.  El precio de la pregunta es de aproximadamente 1000 p.  Hay sensores en la versi√≥n Aqara para el mercado local (tienen bordes menos redondeados). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pb/fy/id/pbfyidivjmpgggpxrwxowgeq-h8.jpeg" alt="imagen"></div><br>  La instalaci√≥n es muy simple: los sensores se montan en cinta de doble cara.  Antes de montar, es mejor conectar el sensor en la aplicaci√≥n para ver a qu√© distancia se activa el sensor.  Las instrucciones dicen hasta 20 mm de espacio libre, pero eso no es cierto para decir lo menos: el sensor y el im√°n de respuesta tienen que montarse casi de manera estrecha.  En la casa principal, la puerta del garaje tiene un sensor similar.  Hay un sello de 1 cm de ancho entre el riel de gu√≠a y la puerta.  A esta distancia, el sensor mostr√≥ una posici√≥n "abierta" y el im√°n de respuesta tuvo que incrementarse. <br><br>  Una vez que se ha agregado un nuevo dispositivo a la aplicaci√≥n, puede pasar a la automatizaci√≥n.  Configure el escenario "si la puerta est√° abierta durante m√°s de 1 minuto" con una alarma en el tel√©fono.  En la localizaci√≥n en ingl√©s no puede ver la parte de la frase aproximadamente 1 minuto, pero el umbral para la activaci√≥n es este.  En la variante del sensor Aqara y la aplicaci√≥n Aqara Home puede configurar otros intervalos de activaci√≥n.  En la aplicaci√≥n Xiaomi Home, desafortunadamente, a√∫n no es posible hacerlo.  Pero la pr√°ctica ha demostrado que el intervalo de 1 minuto es m√°s que suficiente: no hay falsas alarmas, todas las alarmas estaban en el caso.  Tambi√©n puede mirar los registros por sensores.  Este sensor tampoco es una excepci√≥n.  Puede, por ejemplo, desde el registro para determinar cu√°ndo lleg√≥ el ba√±o (la primera vez que abri√≥ la puerta en un d√≠a determinado) y cu√°ndo sali√≥ (la √∫ltima vez que cerr√≥ la puerta), calculando as√≠ el tiempo total que pas√≥ en la habitaci√≥n. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wk/uv/ry/wkuvryxsyoah4u-7dwoj0yct9a4.jpeg" alt="imagen"></div><br><h2>  Impresiones de uso </h2><br>  La experiencia general de la explotaci√≥n es puramente positiva.  Por supuesto, hay algunos matices menores, pero se logra el objetivo principal de la automatizaci√≥n.  En primer lugar, es la tranquilidad mental psicol√≥gica, confirmada por los resultados de las pruebas.  Tambi√©n importante y c√≥modo: se recibi√≥ el control remoto del alumbrado p√∫blico, la campana extractora, hay una luz nocturna adicional.  Despu√©s de irse de vacaciones, es posible recordar y desconectar remotamente el agua. <br><br>  A continuaci√≥n se muestran los costos de todos los dispositivos anteriores en forma aproximada (sin referencia a una tienda en particular).  Al realizar el pedido con AliExpress, los precios diferir√°n en una direcci√≥n m√°s peque√±a. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i9/ij/pf/i9ijpffhxd2i-jaq00ieo58eupo.png" alt="imagen"></div><br>  Al elegir un conjunto de equipos, debe considerar la compatibilidad (para qu√© regi√≥n se fabric√≥ el equipo y a qu√© familia pertenece).  No ser√° posible crear un escenario dentro de la aplicaci√≥n que, por ejemplo, controle un enchufe para una regi√≥n europea de acuerdo con un evento de alarma de humo (para la regi√≥n continental de China).  Si no necesita el tipo de sensor de humo ex√≥tico, es mejor mirar los dispositivos Aqara para el mercado local.  Despu√©s de todo, el rel√© se puede reemplazar, por ejemplo, con un interruptor de dos teclas.  Algunas tiendas que venden dispositivos Xiaomi parecen importarlos en gris (estos dispositivos son para la regi√≥n china).  Pero, por ejemplo, Svyaznoy, hay dispositivos dise√±ados para nuestro mercado.  Adem√°s de la compatibilidad de los mismos enchufes, tambi√©n tendr√°n instrucciones en ingl√©s y ruso.  A continuaci√≥n se muestran fotos de dos sensores id√©nticos, pero para diferentes regiones: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uw/ph/x_/uwphx_titz3r1-hhwlduqxmzlwg.jpeg" alt="imagen"></div><br>  La capacidad de respuesta del control a trav√©s de una aplicaci√≥n no siempre es buena.  Por ejemplo, a veces puede encontrar una situaci√≥n en la que aparece un error de "solicitud fallida" en lugar de encender la luz una tras otra.  El tratamiento detectado experimentalmente (descargar la aplicaci√≥n de la memoria y reiniciarlo) resuelve este problema m√°s r√°pido que esperar una respuesta en el pr√≥ximo intento.  A veces tambi√©n hay retrasos notables (hasta 20-30 segundos) con la actualizaci√≥n del estado de un sensor en particular.  En estos momentos es mejor no presionar los botones de encendido / apagado nuevamente, sino simplemente esperar la actualizaci√≥n de estado.  Al iniciar la aplicaci√≥n, en algunas situaciones puede ver una lista en blanco en lugar de la lista de dispositivos.  No hay necesidad de entrar en p√°nico, por lo general aparece en los pr√≥ximos segundos.  Las alertas al tel√©fono no est√°n localizadas y guardan los nombres correctos de los eventos mismos.  Adem√°s, los autores de la aplicaci√≥n utilizan peri√≥dicamente el canal push-alert para publicidad (nuevamente en chino).  Por supuesto, no me gusta, pero no tengo muchas opciones. <br><br>  Espero que este art√≠culo haya ayudado a tener una buena idea de las capacidades de varios dispositivos Xiaomi para construir un hogar inteligente y escenarios para su aplicaci√≥n pr√°ctica.  Si a√∫n tiene preguntas, correcciones y adiciones, me complacer√° analizarlas en los comentarios. </div></div><p>Source: <a href="https://habr.com/ru/post/484372/">https://habr.com/ru/post/484372/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../484356/index.html">¬øUn proyecto interesante en un equipo amigable o cu√°nto cuesta el empleado adecuado?</a></li>
<li><a href="../484358/index.html">Gesti√≥n de cartera en R</a></li>
<li><a href="../484364/index.html">A los 26 a√±os, Yana Harlan lidera el desarrollo de un motor espacial. El a√±o que viene planean lanzarlo.</a></li>
<li><a href="../484368/index.html">C√≥mo hice un motor de b√∫squeda para Telegram</a></li>
<li><a href="../484370/index.html">Slurm SRE: aprenda a garantizar la felicidad del usuario</a></li>
<li><a href="../484374/index.html">Viaje al centro ... imagen del acoplador. O c√≥mo descargar una imagen del registro sin docker</a></li>
<li><a href="../484376/index.html">Samsung Moscow Center for Artificial Intelligence en historias de empleados</a></li>
<li><a href="../484378/index.html">SwayWM - UnixPorn usted mismo</a></li>
<li><a href="../484380/index.html">Mudanza - el siglo pasado! Alternativas a std :: mover en "C ++ del futuro"</a></li>
<li><a href="../484382/index.html">Algoritmo de Bellman-Ford</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>