<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíª üîÇ üë©üèª‚Äçüöí Servicios unificados goszakup.gov.kz - Versi√≥n 2 üöµüèΩ üë®üèΩ‚Äç‚öñÔ∏è üí™üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Trabajo como desarrollador en la empresa Center for Electronic Finance JSC. 
 Uno de nuestros proyectos es el Portal de Contrataci√≥n P√∫blica de la Rep...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Servicios unificados goszakup.gov.kz - Versi√≥n 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441438/"> Trabajo como desarrollador en la empresa Center for Electronic Finance JSC. <br>  Uno de nuestros proyectos es el Portal de Contrataci√≥n P√∫blica de la Rep√∫blica de Kazajst√°n: goszakup.gov.kz. <br><br>  Hace un a√±o, lanzamos un gran proyecto: Servicios Unificados (OpenData). <br>  Para la implementaci√≥n, se utiliz√≥ la metodolog√≠a RestAPI. <br><br>  Hoy hablar√© sobre la nueva versi√≥n de nuestros servicios y la nueva interfaz para trabajar con ellos. <br><br><img src="https://habrastorage.org/webt/pt/bj/mx/ptbjmxtr9jqrdj0suzdnoztmabu.png"><br><a name="habracut"></a><br>  Hemos desarrollado y lanzado 6 servicios de datos abiertos: <br><br><ul><li>  Registro de participantes </li><li>  Registro de proveedores sin escr√∫pulos </li><li>  Registro de planes anuales. </li><li>  Anuncios de estado.  adquisici√≥n </li><li>  Registro de lote </li><li>  Registro de contratos </li></ul><br>  Muchas empresas en Kazajst√°n ya est√°n conectando y recibiendo datos sobre estos servicios. <br>  El lanzamiento de Open Data nos permiti√≥ reducir la carga de la base de datos en aproximadamente un 40% debido al hecho de que las empresas no necesitan escribir diferentes analizadores para recopilar datos sobre Contrataci√≥n P√∫blica.  Es suficiente pasar por una b√∫squeda dif√≠cil :) <br><br><ol><li>  escribir una solicitud para un token de acceso </li><li>  lea la documentaci√≥n de servicios en nuestro portal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">goszakup.gov.kz/ru/developer/ows</a> </li><li>  escribe tu cliente RestAPI </li></ol><br><h4>  Servicios unificados: un nuevo enfoque </h4><br>  RestAPI hace posible obtener datos de manera m√°s conveniente y r√°pida que analizar un sitio, pero el RestAPI est√°ndar no brinda flexibilidad a las empresas y para construir una conexi√≥n con objetos, primero debe obtener todos los datos y solo luego crear los enlaces entre ellos. <br>  Para recibir datos en un anuncio, RestAPI necesita solicitar primero el registro de anuncios, luego el registro de lotes y finalmente el registro de planes.  Esto significa que para recibir un anuncio, es necesario completar al menos 3 solicitudes, y si necesita recibir datos sobre 50 anuncios, necesitar√° al menos 101 solicitudes para RestAPI, siempre que cada anuncio tenga 1 lote (1 para recibir 50 anuncios, 50 para recibir lotes, 50 para recibo de puntos del plan). <br><br>  ¬°Hemos encontrado una manera de reducir esta cantidad a una sola solicitud! <br><br>  Estamos lanzando la segunda versi√≥n de Unified Services: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ows.goszakup.gov.kz/v2</a> . <br>  Adem√°s de expandir los conjuntos de datos, estamos ampliando la capacidad de trabajar con nuestra API. <br><br>  Ahora los datos se pueden obtener a trav√©s de RestAPI y la nueva interfaz: GraphQL. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ows.goszakup.gov.kz/v2/graphql</a> <br><br><img src="https://habrastorage.org/webt/jm/q-/tb/jmq-tbqg_fuph_g2mvshivb-gas.png"><br><br>  No describir√© qu√© es GraphQL, para esto puede leer el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">aliksend</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øQu√© es GraphQL?</a> <br><br>  Te dir√© qu√© ventajas obtuvimos despu√©s de iniciar GraphQL: <br><br><ul><li>  Solicitar flexibilidad; </li><li>  Obteniendo objetos relacionados; </li><li>  Escritura completa de solicitudes y respuestas; </li><li>  Nueva interfaz de b√∫squeda de datos. </li></ul><br><h4>  Solicitar flexibilidad </h4><br>  Con una simple solicitud RestAPI, obtienes el formato de datos que se estableci√≥ por adelantado. <br>  Cuando consulta GraphQL, obtiene los datos en el formato que necesita. <br><br>  Al solicitar datos, usted mismo determina el formato de los datos que necesita, por ejemplo, la ID y <br><br>  N√∫mero de contrato <br><br><pre><code class="javascript hljs">{ contract { id contract_number_sys } }</code> </pre> <br>  En respuesta, solo obtenemos estos datos: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"data"</span></span>: { <span class="hljs-string"><span class="hljs-string">"contract"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"contract_number_sys"</span></span>: <span class="hljs-string"><span class="hljs-string">"_"</span></span> } ] } }</code> </pre><br>  Bueno, tales consultas son las m√°s f√°ciles de implementar GraphQL.  Las empresas tienen la oportunidad de elegir qu√© datos desean recibir, mientras que no necesitamos hacer ning√∫n ajuste como si se tratara de trabajar con RestAPI.  Solo obtiene el conjunto de campos que se necesita. <br><br><img src="https://habrastorage.org/webt/95/cr/jw/95crjwjr7wikz8fhajv-lh6w9iq.gif"><br><br><h4>  Recuperando objetos relacionados </h4><br>  No nos detuvimos en repetir la funcionalidad de RestAPI simplemente haciendo posible seleccionar parcialmente los datos. <br><br>  Hemos implementado la segunda caracter√≠stica de GraphQL - relaciones de objeto. <br><br>  Si recibe datos de acuerdo con RestAPI, para recibir datos sobre el contrato y sobre la compa√±√≠a, el cliente en el contrato primero necesitar√≠a obtener datos del <b>Registro de participantes</b> , y solo luego recibir datos del <b>Registro de contratos</b> y construir la conexi√≥n entre los objetos mismos. <br><br>  Ahora, cuando trabaje con GraphQL, no necesita recibir completamente los datos del Registro de participantes, solo solicite los datos en el formato que le interese: <br><br><pre> <code class="javascript hljs">{ contract { id contract_number_sys customer { name_ru } } }</code> </pre><br>  Por lo tanto, con una solicitud, obtenemos datos del contrato y de la empresa para el cliente: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"data"</span></span>: { <span class="hljs-string"><span class="hljs-string">"contract"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"contract_number_sys"</span></span>: <span class="hljs-string"><span class="hljs-string">"_"</span></span>, <span class="hljs-string"><span class="hljs-string">"customer"</span></span> : { <span class="hljs-string"><span class="hljs-string">"name_ru"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> } } ] } }</code> </pre><br><img src="https://habrastorage.org/webt/9t/q6/_i/9tq6_ixwkyzzqnplhf2gpdfjd2e.gif"><br><br>  Y hay muchas relaciones de este tipo que se han implementado, ahora las empresas que recibir√°n datos requerir√°n significativamente menos solicitudes para recibir datos.  Al mismo tiempo, ya no es necesario adivinar exactamente c√≥mo se relacionan los objetos entre s√≠, para recibir conjuntos de datos completos para conectarlos entre s√≠. <br><br>  Trat√© de demostrar parcialmente la estructura de conexi√≥n que logr√© lograr. <br><br><img src="https://habrastorage.org/webt/iv/db/sw/ivdbsw9gyxmh7cugosffdj6wcjy.png"><br><br><h4>  Escribir solicitudes y respuestas </h4><br>  Muchos defensores de las solicitudes SOAP siempre han puesto la ventaja m√°s importante: la tipificaci√≥n de datos. <br>  RestAPI, a diferencia de SOAP, no tiene una descripci√≥n de su estructura y no sabe de antemano qu√© tipo de datos.  Pero GraphQL lo cambia todo. <br><br>  Ahora puede solicitar datos de GraphQL en todo el esquema de datos y recibir√°: <br><br><ul><li>  Descripci√≥n completa de la estructura de datos; </li><li>  Descripci√≥n de qu√© campo tiene un tipo de datos (Int, String, Boolean); </li><li>  Descripci√≥n de objetos anidados y estructura de campo de objetos anidados; </li><li>  Descripci√≥n detallada, por ejemplo, en ruso para cada campo; </li><li>  Reciba una notificaci√≥n de que alg√∫n campo ha recibido el indicador Desaprobado con una descripci√≥n. </li></ul><br>  Uso el programa Insomnia REST Client - insomnia.rest para trabajar con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GraphQL</a> <br>  Cuando trabaja con GraphQL, recibe toda la estructura de objetos y avisos al crear una consulta. <br><br>  Dar√© algunas capturas de pantalla como ejemplo. <br><br>  1. Ayuda en la construcci√≥n de consultas desde  el programa recibi√≥ una estructura completa de objetos <br><br><img src="https://habrastorage.org/webt/xl/jj/fb/xljjfbpgh2j1xata_orj0aurhqi.png"><br><br>  2. Sugerencia para la descripci√≥n de cada campo con su tipo de datos y descripci√≥n <br><br><img src="https://habrastorage.org/webt/6v/ep/93/6vep93hfz0ynsplgm9_kraaktky.png"><br><br>  3. Sugerencia si alg√∫n campo recibi√≥ una bandera: en desuso <br><br><img src="https://habrastorage.org/webt/vg/rx/lt/vgrxlti7nowou4kqq1gsr6ov138.png"><br><br>  Y esta caracter√≠stica de GraphQL le permite tener una imagen completa de los campos y objetos con los que trabaja. <br><br><img src="https://habrastorage.org/webt/4f/lg/ux/4flguxg9ruc1mgbvyif7ffcwr9e.gif"><br><br><h4>  Nueva interfaz de recuperaci√≥n de datos. </h4><br>  Y dej√© lo m√°s interesante al final. <br><br>  Todo parece estar bien, es posible construir su propia estructura de datos, hay una conexi√≥n con otros objetos, todos los datos est√°n escritos.  Pero a√∫n falta algo ... <br><br>  No hay suficientes oportunidades para buscar en estos datos. <br><br>  Desde el principio, se implement√≥ un formato de b√∫squeda con los par√°metros en la solicitud misma: <br><br><pre> <code class="javascript hljs">{ trd_buy(ref_buy_status_id: <span class="hljs-number"><span class="hljs-number">1</span></span>) { name_kz name_ru } }</code> </pre><br>  Pero aqu√≠ me encontr√© con una serie de problemas: <br><br><ol><li>  con una gran cantidad de criterios de b√∫squeda, la consulta se vuelve simplemente ilegible; </li><li>  Es imposible determinar la matriz cuando se buscan datos para buscar varias variantes del mismo campo. </li></ol><br>  Para simplificar la construcci√≥n de consultas y ampliar la capacidad de b√∫squeda, implement√© objetos anidados para filtrar datos. <br><br>  Definimos una variable en la solicitud que indica el objeto de filtrado. <br><br><pre> <code class="javascript hljs">query($filter: TrdBuyFiltersInput){ trd_buy(filters: $filter) { name_kz name_ru } }</code> </pre><br>  Describimos los propios par√°metros de b√∫squeda de datos: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"filter"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ref_buy_status_id"</span></span>: [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>] } }</code> </pre><br>  Y como resultado, recibiremos todos los anuncios que tengan los estados 1 y 2. <br><br>  En la solicitud en s√≠, indicamos solo la estructura de datos, y todos los par√°metros de b√∫squeda entran en la transmisi√≥n de par√°metros donde ya podemos transferir matrices de datos para filtrar de acuerdo con varios criterios. <br><br><img src="https://habrastorage.org/webt/cl/gl/di/clgldijd6pe0y7evhlw0k37eawg.gif"><br><br>  Adem√°s, en el esquema GraphQL, todos tenemos una descripci√≥n de dicho objeto de b√∫squeda: <br><br><img src="https://habrastorage.org/webt/t5/ns/i1/t5nsi1rf4yy4ubvk3cxakvmqmci.png"><br><br><h4>  Servicios unificados - Versi√≥n 2.0: </h4><br>  Servicios de trabajo: <br><br><ul><li>  Registro de participantes </li><li>  Registro de anuncios. </li><li>  Registro de contratos </li><li>  Registro de actos </li><li>  Registro de lote </li><li>  Registro de planes anuales. </li><li>  Registro de proveedores sin escr√∫pulos </li></ul><br>  Lanzamos una nueva funcionalidad que simplifica enormemente el trabajo con nuestra API, tiene una estructura de consulta flexible y la capacidad de buscar datos de acuerdo con criterios espec√≠ficos. <br><br>  No hemos perdido la velocidad de obtenci√≥n de datos, sino que solo reducimos debido a esto el n√∫mero de solicitudes necesarias para obtener datos. <br><br>  Pudimos advertir en el esquema de datos sobre campos deshabilitados o renombrados. <br><br>  Planeamos desarrollar a√∫n m√°s la API y permitir la b√∫squeda morfol√≥gica de datos en los servicios tambi√©n. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/441438/">https://habr.com/ru/post/441438/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../441424/index.html">C√≥mo protegerse de los trolls de marca</a></li>
<li><a href="../441426/index.html">El alto gerente de Apple fue acusado de abuso de informaci√≥n privilegiada. Tuvo que luchar contra ella</a></li>
<li><a href="../441428/index.html">Conceptos b√°sicos de PowerShell: definici√≥n del final de una l√≠nea con un car√°cter espec√≠fico</a></li>
<li><a href="../441430/index.html">La primera vez que probamos App Center y contamos nuestra experiencia</a></li>
<li><a href="../441436/index.html">Los cient√≠ficos han cultivado c√©lulas madre universales utilizando ingenier√≠a CRISPR</a></li>
<li><a href="../441442/index.html">YouTube ha deshabilitado los anuncios antivacunas</a></li>
<li><a href="../441444/index.html">En los dedos: tipos asociados en Rust y cu√°l es su diferencia con los argumentos de tipo</a></li>
<li><a href="../441446/index.html">Aprendiendo a la computadora: c√≥mo adquirir una nueva habilidad</a></li>
<li><a href="../441448/index.html">Imposible pan y otros azulejos de Penrose gana</a></li>
<li><a href="../441450/index.html">Pentesting Azure: pensamientos sobre seguridad en la computaci√≥n en la nube</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>