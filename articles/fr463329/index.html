<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¢ ‚èèÔ∏è üíÖüèø D√©veloppement de diagrammes d'arbres dynamiques √† l'aide de SVG et Vue.js ‚õ™Ô∏è ü§òüèΩ üôâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le mat√©riel, dont nous publions la traduction aujourd'hui, est consacr√© au processus de d√©veloppement d'un syst√®me de visualisation pour les diagramme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©veloppement de diagrammes d'arbres dynamiques √† l'aide de SVG et Vue.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/463329/">  Le mat√©riel, dont nous publions la traduction aujourd'hui, est consacr√© au processus de d√©veloppement d'un syst√®me de visualisation pour les diagrammes d'arbres dynamiques.  Pour dessiner des courbes de B√©zier cubiques, la technologie SVG (Scalable Vector Graphics, scalable vector graphics) est utilis√©e ici.  Le travail r√©actif avec les donn√©es est organis√© par Vue.js. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici une</a> version de d√©monstration du syst√®me avec laquelle vous pouvez exp√©rimenter. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/917/18f/9bb/91718f9bbe30a79beeeb537f7b49b07e.png"></div><br>  <i><font color="#999999">Graphique d'arbre interactif</font></i> <br><a name="habracut"></a><br>  La combinaison des puissantes fonctionnalit√©s de SVG et du cadre Vue.js nous a permis de cr√©er un syst√®me de construction de diagrammes bas√©s sur des donn√©es, interactifs et personnalisables. <br><br>  Un diagramme est un ensemble de courbes de B√©zier cubiques commen√ßant √† un point.  Les courbes se terminent en diff√©rents points √©quidistants les uns des autres.  Leur position finale d√©pend des donn√©es saisies par l'utilisateur.  En cons√©quence, le graphique est capable de r√©agir de mani√®re r√©active aux changements de donn√©es. <br><br>  Tout d'abord, nous parlerons de la fa√ßon dont les courbes cubiques de B√©zier sont form√©es, puis nous verrons comment les repr√©senter dans le syst√®me de coordonn√©es de l'√©l√©ment <code>&lt;svg&gt;</code> , et parler de la cr√©ation de masques pour les images. <br><br>  L'auteur du document dit qu'elle a pr√©par√© de nombreuses illustrations pour lui, en essayant de le rendre compr√©hensible et int√©ressant.  Le but du mat√©riel est d'aider chacun √† acqu√©rir les connaissances et les comp√©tences n√©cessaires pour d√©velopper ses propres syst√®mes de sch√©mas. <br><br><h2>  <font color="#3AC1EF">Svg</font> </h2><br><h3>  <font color="#3AC1EF">‚ñç Comment se forment les courbes de B√©zier cubiques?</font> </h3><br>  Les courbes utilis√©es dans ce projet sont appel√©es Cubic Bezier Curve.  La figure suivante montre les √©l√©ments cl√©s de ces courbes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6f5/36f/6b1/6f536f6b1bf9ce9198e78640a17e49e6.png"></div><br>  <i><font color="#999999">√âl√©ments cl√©s d'une courbe cubique de B√©zier</font></i> <br><br>  La courbe est d√©crite par quatre paires de coordonn√©es.  La premi√®re paire <code>(x0, y0)</code> est le point d'ancrage de d√©part de la courbe.  La derni√®re paire de coordonn√©es <code>(x3, y3)</code> est le point de r√©f√©rence final. <br><br>  Entre ces points, vous pouvez voir les soi-disant points de contr√¥le.  C'est le point <code>(x1, y1)</code> et le point <code>(x2, y2)</code> . <br><br>  L'emplacement des points de contr√¥le par rapport aux points de contr√¥le d√©termine la forme de la courbe.  Si la courbe n'√©tait d√©finie que par les points de d√©but et de fin, les coordonn√©es <code>(x0, y0)</code> et <code>(x3, y3)</code> , alors cette courbe ressemblerait √† un segment droit situ√© en diagonale. <br><br>  Nous allons maintenant utiliser les coordonn√©es des quatre points d√©crits ci-dessus pour tracer la courbe √† l'aide de l'√©l√©ment <code>&lt;path&gt;</code> SVG.  Voici la syntaxe utilis√©e dans l'√©l√©ment <code>&lt;path&gt;</code> pour construire des courbes de B√©zier cubiques: <br><br><pre> <code class="javascript hljs">&lt;path D=<span class="hljs-string"><span class="hljs-string">"M x0,y0 C x1,y1 x2,y2 x3,y3"</span></span> /&gt;</code> </pre> <br>  La lettre <code></code> , visible dans le code, est l'abr√©viation de Cubic Bezier Curve.  La lettre minuscule ( <code>c</code> ) signifie l'utilisation de valeurs relatives, la majuscule ( <code>C</code> ) signifie l'utilisation de valeurs absolues.  J'utilise des valeurs absolues pour construire le diagramme, cela est indiqu√© par la lettre majuscule utilis√©e dans l'exemple. <br><br><h3>  <font color="#3AC1EF">‚ñçCr√©ation d'un diagramme sym√©trique</font> </h3><br>  La sym√©trie est un aspect cl√© de ce projet.  Pour construire un diagramme sym√©trique, j'ai utilis√© une seule variable, recevant sur sa base des valeurs telles que la hauteur, la largeur ou les coordonn√©es du centre d'un certain objet. <br><br>  Appelons cette <code>size</code> variable.  √âtant donn√© que le graphique est orient√© horizontalement, la variable de <code>size</code> peut √™tre consid√©r√©e comme l'ensemble de l'espace horizontal disponible pour le graphique. <br><br>  Attribuez √† cette variable une valeur r√©aliste.  Nous utiliserons cette valeur pour calculer les coordonn√©es des √©l√©ments du graphique. <br><br><pre> <code class="javascript hljs">size = <span class="hljs-number"><span class="hljs-number">1000</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Recherche des coordonn√©es des √©l√©ments du graphique</font> </h2><br>  Avant de pouvoir trouver les coordonn√©es n√©cessaires pour construire le diagramme, nous devons traiter avec le syst√®me de coordonn√©es SVG. <br><br><h3>  <font color="#3AC1EF">‚ñçSyst√®me coordonn√© et viewBox</font> </h3><br>  L'attribut de l' <code>&lt;svg&gt; viewBox</code> tr√®s important dans notre projet.  Le fait est qu'il d√©crit le syst√®me de coordonn√©es utilisateur de l'image SVG.  Autrement dit, la <code>viewBox</code> d√©termine la position et la taille de l'espace dans lequel l'image SVG visible √† l'√©cran sera cr√©√©e. <br><br>  L'attribut <code>viewBox</code> compose de quatre nombres qui sp√©cifient les param√®tres du syst√®me de coordonn√©es et les suivants dans cet ordre: <code>min-x</code> , <code>min-y</code> , <code>width</code> , <code>height</code> .  Les param√®tres <code>min-x</code> et <code>min-y</code> d√©finissent l'origine du syst√®me de coordonn√©es utilisateur, les param√®tres <code>width</code> et <code>height</code> d√©finissent la largeur et la hauteur de l'image affich√©e.  Voici √† quoi pourrait ressembler l'attribut <code>viewBox</code> : <br><br><pre> <code class="javascript hljs">&lt;svg viewBox=<span class="hljs-string"><span class="hljs-string">"min-x min-y width height"</span></span>&gt;...&lt;<span class="hljs-regexp"><span class="hljs-regexp">/svg&gt;</span></span></code> </pre> <br>  La variable de <code>size</code> que nous avons d√©crite ci-dessus sera utilis√©e pour contr√¥ler les param√®tres de <code>width</code> et de <code>height</code> de ce syst√®me de coordonn√©es. <br><br>  Plus tard, dans la section sur Vue.js, nous <code>viewBox</code> le <code>viewBox</code> √† une propri√©t√© calcul√©e pour sp√©cifier les valeurs de <code>width</code> et de <code>height</code> .  De plus, dans notre projet, les propri√©t√©s <code>min-x</code> et <code>min-y</code> seront toujours mises √† 0. <br><br>  Notez que nous n'utilisons pas les attributs de <code>height</code> et de <code>width</code> de l'√©l√©ment <code>&lt;svg&gt;</code> lui-m√™me.  Nous allons les r√©gler sur <code>width: 100%</code> et <code>height: 100%</code> utilisant CSS.  Cela nous permettra de cr√©er une image SVG qui s'adapte de mani√®re flexible √† la taille de la page. <br><br>  Maintenant que le syst√®me de coordonn√©es utilisateur est pr√™t √† dessiner un graphique, parlons de l'utilisation de la variable de <code>size</code> pour calculer les coordonn√©es des √©l√©ments du graphique. <br><br><h3>  <font color="#3AC1EF">‚ñç Coordonn√©es invariables et dynamiques</font> </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/efc/a82/d19/efca82d1952a08d5c3582acf7fcab49e.png"></div><br>  <i><font color="#999999">Concept graphique</font></i> <br><br>  Le cercle dans lequel le dessin est affich√© fait partie du diagramme.  C'est pourquoi il est important de l'inclure dans les calculs d√®s le d√©but.  √Ä partir de l'illustration ci-dessus, recherchons les coordonn√©es du cercle et d'une courbe exp√©rimentale. <br><br>  La hauteur du graphique est divis√©e en deux parties.  Ce sont <code>topHeight</code> (20% de la <code>size</code> ) et <code>bottomHeight</code> (les 80% restants de la <code>size</code> ).  La largeur totale du diagramme est divis√©e en 2 parties - la longueur de chacune d'entre elles est de 50% de la <code>size</code> . <br><br>  Cela rend la conclusion des param√®tres du cercle ne n√©cessitant pas d'explications sp√©ciales (ici, les indicateurs <code>halfSize</code> et <code>topHeight</code> sont utilis√©s).  Le param√®tre <code>radius</code> est d√©fini sur la moiti√© de la valeur de <code>topHeight</code> .  Gr√¢ce √† cela, le cercle s'int√®gre parfaitement dans l'espace disponible. <br><br>  Voyons maintenant les coordonn√©es des courbes. <br><br><ul><li>  Les coordonn√©es <code>(x0, y0)</code> d√©finissent le point de r√©f√©rence de d√©part de la courbe.  Ces coordonn√©es restent constantes tout le temps.  La coordonn√©e <code>x0</code> est le centre du graphique (la moiti√© de la <code>size</code> ) et <code>y0</code> est la coordonn√©e √† laquelle se termine le bas du cercle.  Par cons√©quent, dans la formule de calcul de cette coordonn√©e, le rayon du cercle est utilis√©.  Par cons√©quent, les coordonn√©es de ce point peuvent √™tre trouv√©es par la formule suivante <code>: (50% size, 20% size + radius)</code> . </li><li>  Les coordonn√©es <code>(x1, y1)</code> sont le premier point de contr√¥le de la courbe.  Il reste √©galement inchang√© pour toutes les courbes.  Si nous n'oublions pas que les courbes doivent √™tre sym√©triques, il s'av√®re que les valeurs de <code>x1</code> et <code>y1</code> toujours √©gales √† la moiti√© de la valeur de <code>size</code> .  D'o√π la formule de leur calcul: <code>(50% size, 50% size)</code> . </li><li>  Les coordonn√©es <code>(x2, y2)</code> repr√©sentent le deuxi√®me point de contr√¥le de la courbe de B√©zier.  Ici, <code>x2</code> indique la forme de la courbe.  Cet indicateur est calcul√© dynamiquement pour chaque courbe.  Et l'indicateur <code>y2</code> , comme pr√©c√©demment, sera de moiti√©.  D'o√π la formule suivante pour calculer ces coordonn√©es: <code>(x2, 50% size)</code> . </li><li>  Les coordonn√©es <code>(x3, y3)</code> sont le point de r√©f√©rence final de la courbe.  Cette coordonn√©e indique o√π vous souhaitez terminer le trac√© de la ligne.  Ici, la valeur de <code>x3</code> , comme <code>x2</code> , est calcul√©e dynamiquement.  Et <code>y3</code> prend une valeur √©gale √† 80% de la <code>size</code> .  En cons√©quence, nous obtenons la formule suivante: <code>(x3, 80% size)</code> . </li></ul><br>  Nous r√©√©crivons, en termes g√©n√©raux, le code de l'√©l√©ment <code>&lt;path&gt;</code> , en tenant compte des formules que nous venons de d√©river.  Les pourcentages utilis√©s ci-dessus sont pr√©sent√©s ici en les divisant par 100. <br><br><pre> <code class="javascript hljs">&lt;path d=<span class="hljs-string"><span class="hljs-string">"M size*0.5, (size*0.2) + radius          C size*0.5, size*0.5           x2,    size*0.5           x3,    size*0.8"</span></span> &gt;</code> </pre> <br>  Veuillez noter qu'√† premi√®re vue, l'utilisation de pourcentages dans nos formules peut sembler facultative, bas√©e uniquement sur mon propre avis.  Cependant, ces valeurs ne sont pas appliqu√©es sur un coup de t√™te, mais parce que leur utilisation aide √† atteindre la sym√©trie et les proportions correctes du diagramme.  Apr√®s avoir senti leur r√¥le dans la repr√©sentation graphique, vous pouvez essayer vos propres valeurs de pourcentage et examiner les r√©sultats obtenus en les appliquant. <br><br>  Parlons maintenant de la fa√ßon dont nous chercherons les coordonn√©es <code>x2</code> et <code>x3</code> .  Ils vous permettent de cr√©er dynamiquement de nombreuses courbes en fonction de l' <code>index</code> √©l√©ments dans le tableau correspondant. <br><br>  La division de l'espace horizontal disponible du graphique en parties √©gales est bas√©e sur le nombre d'√©l√©ments dans le tableau.  Par cons√©quent, chaque pi√®ce re√ßoit le m√™me espace le long de l'axe x. <br><br>  La formule que nous d√©rivons devrait ensuite fonctionner avec n'importe quel nombre d'√©l√©ments.  Mais ici, nous allons exp√©rimenter avec un tableau contenant 5 √©l√©ments: <code>[0,1,2,3,4]</code> .  La visualisation d'un tel tableau signifie qu'il est n√©cessaire de tracer 5 courbes. <br><br><h3>  <font color="#3AC1EF">‚ñçTrouver des coordonn√©es dynamiques (x2 et x3)</font> </h3><br>  Tout d'abord, j'ai divis√© la <code>size</code> par le nombre d'√©l√©ments, c'est-√†-dire par la longueur du tableau.  J'ai appel√© cette <code>distance</code> variable.  Il repr√©sente la distance entre deux √©l√©ments. <br><br><pre> <code class="javascript hljs">distance = size/arrayLength <span class="hljs-comment"><span class="hljs-comment">// distance = 1000/5 = 200</span></span></code> </pre> <br>  Puis j'ai parcouru le tableau et multipli√© l'index de chacun de ses √©l√©ments ( <code>index</code> ) par la <code>distance</code> .  Pour simplifier, j'appelle simplement <code>x</code> √† la fois le param√®tre <code>x2</code> et le param√®tre <code>x3</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  x2  x3 x = index * distance</span></span></code> </pre> <br>  Si vous appliquez les valeurs obtenues lors de la construction du diagramme, c'est-√†-dire utilisez la valeur <code>x</code> calcul√©e ci-dessus pour <code>x2</code> et <code>x3</code> , cela aura l'air un peu √©trange. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/311/f53/1c6/311f531c60f80f01f519f0a128cfc164.png"></div><br>  <i><font color="#999999">Le diagramme est asym√©trique</font></i> <br><br>  Comme vous pouvez le voir, les √©l√©ments sont situ√©s dans la zone o√π ils devraient √™tre, mais le diagramme s'est r√©v√©l√© asym√©trique.  Il semble que dans sa partie gauche il y ait plus d'√©l√©ments qu'√† droite. <br><br>  Maintenant, je dois <code>x3</code> valeur <code>x3</code> au centre des segments correspondants, dont la longueur est d√©finie √† l'aide de la variable de <code>distance</code> . <br><br>  Afin d'amener le diagramme √† la forme dont j'ai besoin, j'ai simplement ajout√© √† <code>x</code> moiti√© de la valeur de la <code>distance</code> . <br><br><pre> <code class="javascript hljs">x = index * distance + (distance * <span class="hljs-number"><span class="hljs-number">0.5</span></span>)</code> </pre> <br>  En cons√©quence, j'ai trouv√© le centre du segment de <code>distance</code> et y ai plac√© la coordonn√©e <code>x3</code> .  De plus, j'ai apport√© √† la forme que nous avons besoin de la coordonn√©e <code>x2</code> pour la courbe n ¬∞ 2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e80/f69/f9d/e80f69f9d18b790c7634a9b12b2afc53.png"></div><br>  <i><font color="#999999">Diagramme sym√©trique</font></i> <br><br>  L'ajout de la moiti√© de la valeur de la <code>distance</code> aux coordonn√©es <code>x2</code> et <code>x3</code> rendu la formule de calcul de ces coordonn√©es appropri√©e pour visualiser des tableaux contenant un nombre pair et impair d'√©l√©ments. <br><br><h3>  <font color="#3AC1EF">‚ñç Masquage d'image</font> </h3><br>  Nous avons besoin qu'une certaine image soit affich√©e en haut du diagramme, dans le cercle.  Pour r√©soudre ce probl√®me, j'ai cr√©√© un masque d'√©cr√™tage contenant un cercle. <br><br><pre> <code class="javascript hljs">&lt;defs&gt;  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">mask</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"svg-mask"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">circle</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:r</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"radius"</span></span></span></span><span class="xml"><span class="hljs-tag">             </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:cx</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"halfSize"</span></span></span></span><span class="xml"><span class="hljs-tag">             </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:cy</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"topHeight"</span></span></span></span><span class="xml"><span class="hljs-tag">             </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"white"</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml">  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">mask</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">defs</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Ensuite, en utilisant la <code>&lt;image&gt;</code> de l'√©l√©ment <code>&lt;image&gt;</code> <code>&lt;svg&gt;</code> <code>&lt;image&gt;</code> pour afficher l'image, j'ai li√© l'image √† l'√©l√©ment <code>&lt;mask&gt;</code> cr√©√© ci-dessus en utilisant l'attribut <code>mask</code> de l'√©l√©ment <code>&lt;image&gt;</code> . <br><br><pre> <code class="javascript hljs">&lt;image mask=<span class="hljs-string"><span class="hljs-string">"url(#svg-mask)"</span></span>      :x=<span class="hljs-string"><span class="hljs-string">"(halfSize-radius)"</span></span>      :y=<span class="hljs-string"><span class="hljs-string">"(topHeight-radius)"</span></span> ... &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">image</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Puisque nous essayons d'ajuster une image carr√©e dans une ¬´fen√™tre¬ª ronde, j'ai ajust√© la position de l'√©l√©ment en soustrayant le param√®tre de <code>radius</code> param√®tres correspondants.  En cons√©quence, l'image est visible √† travers un masque r√©alis√© sous la forme d'un cercle. <br><br>  Rassemblons tout ce dont nous avons parl√© dans un dessin.  Cela nous aidera √† voir le tableau d'ensemble de l'avancement des travaux. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/38b/27e/37f/38b27e37ff2a7da017e0f67b7ac68b7e.png"></div><br>  <i><font color="#999999">Donn√©es utilis√©es dans le calcul des param√®tres du graphique</font></i> <br><br><h2>  <font color="#3AC1EF">Cr√©ation d'une image SVG dynamique √† l'aide de Vue.js</font> </h2><br>  √Ä ce stade, nous avons d√©termin√© les courbes de B√©zier cubiques et effectu√© les calculs n√©cessaires pour former le diagramme.  Par cons√©quent, nous pouvons maintenant cr√©er des diagrammes SVG statiques.  Si nous combinons les capacit√©s de SVG et Vue.js, nous pouvons cr√©er des diagrammes pilot√©s par les donn√©es.  Les diagrammes statiques deviendront dynamiques. <br><br>  Dans cette section, nous r√©visons le diagramme SVG, le pr√©sentant comme un ensemble de composants Vue.  Nous attacherons √©galement des attributs SVG aux propri√©t√©s calcul√©es et ferons en sorte que le graphique r√©ponde aux modifications des donn√©es. <br><br>  De plus, √† la fin du projet, nous allons cr√©er un composant qui est un panneau de configuration.  Ce composant sera utilis√© pour saisir les donn√©es qui seront transmises √† la carte. <br><br><h3>  <font color="#3AC1EF">‚ñçLier des donn√©es aux param√®tres viewBox</font> </h3><br>  Commen√ßons par ajuster le syst√®me de coordonn√©es.  Sans cela, nous ne pourrons pas dessiner d'images SVG.  La propri√©t√© <code>viewbox</code> calcul√©e <code>viewbox</code> ce dont nous avons besoin en utilisant la variable de <code>size</code> .  Il y aura quatre valeurs s√©par√©es par des espaces.  Tout cela deviendra la valeur de l'attribut <code>viewBox</code> de l'√©l√©ment <code>&lt;svg&gt;</code> . <br><br><pre> <code class="javascript hljs">viewbox() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"0 0 "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.size + <span class="hljs-string"><span class="hljs-string">" "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.size; }</code> </pre> <br>  En SVG, le nom de l'attribut <code>viewBox</code> d√©j√† √©crit en utilisant le style camel. <br><br><pre> <code class="javascript hljs">&lt;svg viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 1000 1000"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Par cons√©quent, afin de lier correctement cet attribut √† la propri√©t√© calcul√©e, j'ai not√© le nom de l'attribut dans le style kebab et mis le modificateur <code>.camel</code> apr√®s.  Avec cette approche, il est possible de "tromper" le HTML et d'impl√©menter correctement la liaison d'attribut. <br><br><pre> <code class="javascript hljs">&lt;svg :view-box.camel=<span class="hljs-string"><span class="hljs-string">"viewbox"</span></span>&gt;   ... &lt;<span class="hljs-regexp"><span class="hljs-regexp">/svg&gt;</span></span></code> </pre> <br>  Maintenant, lorsque vous modifiez la <code>size</code> graphique est reconfigur√© ind√©pendamment.  Nous n'avons pas besoin de modifier manuellement la mise en page. <br><br><h3>  <font color="#3AC1EF">‚ñçCalcul des param√®tres de courbe</font> </h3><br>  √âtant donn√© que la plupart des valeurs n√©cessaires pour construire les courbes sont calcul√©es sur la base d'une seule variable ( <code>size</code> ), j'ai utilis√© pour trouver toutes les coordonn√©es fixes par les propri√©t√©s calcul√©es.  Ce que nous appelons ici "coordonn√©es fixes" est calcul√© sur la base de la <code>size</code> , et apr√®s cela, il ne change pas et ne d√©pend pas du nombre de courbes que le diagramme inclura. <br><br>  Si vous changez la <code>size</code> - "les coordonn√©es fixes" seront recompt√©es.  Apr√®s cela, ils ne changeront pas avant le prochain changement de <code>size</code> .  Compte tenu de ce qui pr√©c√®de, voici cinq valeurs dont nous avons besoin pour tracer des courbes de B√©zier: <br><br><ul><li> <code>topHeight ‚Äî size * 0.2</code> </li> <li> <code>bottomHeight ‚Äî size * 0.8</code> </li> <li> <code>width ‚Äî size</code> </li> <li> <code>halfSize ‚Äî size * 0.5</code> </li> <li> <code>distance ‚Äî size/arrayLength</code> </li> </ul><br>  Il ne nous reste plus que deux valeurs inconnues - <code>x2</code> et <code>x3</code> .  La formule de calcul que nous avons d√©j√† d√©riv√©e: <br><br><pre> <code class="javascript hljs">x = index * distance + (distance * <span class="hljs-number"><span class="hljs-number">0.5</span></span>)</code> </pre> <br>  Pour trouver des valeurs sp√©cifiques, nous devons remplacer les indices des √©l√©ments du tableau dans cette formule. <br><br>  Maintenant, demandons-nous si la propri√©t√© calcul√©e nous convient pour trouver <code>x</code> .  R√©pondez bri√®vement √† cette question, alors - non, cela ne suffira pas. <br><br>  Impossible de transmettre des param√®tres √† la propri√©t√© calcul√©e.  Le fait est que c'est une propri√©t√©, pas une fonction.  De plus, la n√©cessit√© d'utiliser un param√®tre pour calculer quelque chose signifie qu'il n'y a aucun avantage tangible √† utiliser des propri√©t√©s calcul√©es en termes de mise en cache. <br><br>  Veuillez noter qu'il existe une exception concernant le principe ci-dessus.  Il s'agit de Vuex.  Si vous utilisez des getters Vuex qui renvoient des fonctions, vous pouvez leur transmettre des param√®tres. <br><br>  Dans ce cas, nous n'utilisons pas Vuex.  Mais m√™me dans cette situation, nous avons deux fa√ßons de r√©soudre ce probl√®me. <br><br><h3>  <font color="#3AC1EF">‚ñç Num√©ro d'option 1</font> </h3><br>  Vous pouvez d√©clarer une fonction √† laquelle l' <code>index</code> pass√© en argument et qui renvoie le r√©sultat dont nous avons besoin.  Cette approche semble plus propre si nous allons utiliser la valeur renvoy√©e par une fonction similaire √† plusieurs endroits du mod√®le. <br><br><pre> <code class="javascript hljs">&lt;g v-<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>=<span class="hljs-string"><span class="hljs-string">"(item, i) in itemArray"</span></span>&gt;  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">path</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"'M' + halfSize + ','     + (topHeight+r) +' '+            'C' + halfSize + ','     + halfSize +' '+                     calculateXPos(i) + ',' + halfSize +' '+                  calculateXPos(i) + ',' + bottomHeight"</span></span></span></span><span class="xml"><span class="hljs-tag">  /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  La m√©thode <code>calculateXPos()</code> effectuera des calculs √† chaque appel.  Cette m√©thode prend comme argument l'indice de l'√©l√©ment - <code>i</code> . <br><br><pre> <code class="javascript hljs">&lt;script&gt;  methods: {    calculateXPos (i)    {      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> distance * i + (distance * <span class="hljs-number"><span class="hljs-number">0.5</span></span>)    }  } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici</a> un exemple sur CodePen qui utilise cette solution. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/28e/dd6/b8c/28edd6b8cb97d3352108946cfb50a9cd.png"></div><br>  <i><font color="#999999">√âcran de la premi√®re variante d'application</font></i> <br><br><h3>  <font color="#3AC1EF">‚ñç Option num√©ro 2</font> </h3><br>  Cette option est meilleure que la premi√®re.  Nous pouvons extraire le petit balisage SVG n√©cessaire pour construire la courbe dans un petit composant enfant s√©par√© et lui passer l' <code>index</code> comme l'une des propri√©t√©s. <br><br>  Avec cette approche, vous pouvez m√™me utiliser la propri√©t√© calcul√©e pour trouver <code>x2</code> et <code>x3</code> . <br><br><pre> <code class="javascript hljs">&lt;g v-<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>=<span class="hljs-string"><span class="hljs-string">"(item, i) in items"</span></span>&gt;    <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">cubic-bezier</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:index</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"i"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:half-size</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"halfSize"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:top-height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"topHeight"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:bottom-height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"bottomHeight"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:r</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"radius"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"distance"</span></span></span></span><span class="xml"><span class="hljs-tag">     &gt;</span></span></span><span class="xml">     </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">cubic-bezier</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Cette option nous donne la possibilit√© de mieux organiser le code.  Par exemple, nous pouvons cr√©er un autre composant enfant pour le masque: <br><br><pre> <code class="javascript hljs">&lt;clip-mask :title=<span class="hljs-string"><span class="hljs-string">"title"</span></span>           :half-size=<span class="hljs-string"><span class="hljs-string">"halfSize"</span></span>           :top-height=<span class="hljs-string"><span class="hljs-string">"topHeight"</span></span>                               :r=<span class="hljs-string"><span class="hljs-string">"radius"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">clip-mask</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç Panneau de configuration</font> </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d04/7e6/54f/d047e654fc2c1cda88bb618db3668fda.png"></div><br>  <i><font color="#999999">Panneau de configuration</font></i> <br><br>  Vous avez probablement d√©j√† vu le panneau de configuration, appel√© par le bouton situ√© dans le coin sup√©rieur gauche de l'√©cran de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">exemple</a> ci-dessus.  Ce panneau facilite l'ajout d'√©l√©ments au tableau et leur suppression.  En suivant les id√©es discut√©es dans la section "Option # 2", j'ai cr√©√© un composant enfant pour le panneau de configuration.  Gr√¢ce √† cela, le composant de niveau sup√©rieur est propre et bien lisible.  En cons√©quence, notre petite arborescence de composants Vue ressemble √† celle ci-dessous. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5af/fe8/172/5affe817227430e34e81425910a2b525.png"></div><br>  <i><font color="#999999">Arborescence des composants du projet</font></i> <br><br>  Vous voulez jeter un ≈ìil au code qui impl√©mente cette version du projet?  Si oui, jetez un ≈ìil <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e4e/f1a/18b/e4ef1a18b00c15730adfc48077994608.png"></div><br>  <i><font color="#999999">√âcran de la deuxi√®me variante d'application</font></i> <br><br><h2>  <font color="#3AC1EF">D√©p√¥t de projets</font> </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici</a> le r√©f√©rentiel GitHub du projet ("Option # 2" est impl√©ment√©e ici).  Je pense qu'il vous sera utile de l'examiner avant de passer √† la section suivante. <br><br><h2>  <font color="#3AC1EF">Devoirs</font> </h2><br>  Essayez de cr√©er le m√™me diagramme que nous avons d√©crit ici, mais faites-le orient√© verticalement.  Profitez des id√©es d√©crites dans cet article. <br><br>  Si vous pensez que c'est une t√¢che facile, que pour construire un tel diagramme il suffit d'√©changer les coordonn√©es <code>x</code> et <code>y</code> , alors vous avez raison.  √âtant donn√© que le projet consid√©r√© ici n'a pas √©t√© cr√©√© comme universel, apr√®s avoir modifi√© les coordonn√©es l√† o√π vous en avez besoin, vous devrez √©galement modifier le code en renommant certaines variables et m√©thodes. <br><br>  Gr√¢ce √† Vue.js, notre graphique simple peut √™tre √©quip√© de fonctionnalit√©s suppl√©mentaires.  Par exemple, les √©l√©ments suivants: <br><br><ul><li>  Vous pouvez cr√©er un m√©canisme qui vous permet de basculer entre les modes de graphique horizontal et vertical. </li><li>  Les courbes peuvent essayer d'animer.  Par exemple, utiliser GSAP. </li><li>  Vous pouvez ajuster les propri√©t√©s des courbes (disons - couleur et largeur de ligne) depuis le panneau de configuration. </li><li>  Vous pouvez utiliser une biblioth√®que externe pour organiser l'enregistrement des diagrammes dans n'importe quel format graphique ou sous forme de fichier PDF.  Ces documents peuvent √™tre t√©l√©charg√©s pour ceux qui travaillent avec le graphique. </li></ul><br>  Essayez ces devoirs.  Et si vous avez des probl√®mes - ci-dessous sera donn√© un lien vers sa solution. <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br>  L'√©l√©ment <code>&lt;path&gt;</code> est l'une des puissantes fonctionnalit√©s de SVG.  Cet √©l√©ment vous permet de cr√©er diverses images avec une grande pr√©cision.  Ici, nous avons compris comment les courbes de B√©zier sont structur√©es et comment les mettre en pratique pour cr√©er vos propres diagrammes. <br><br>       ,  ,   JavaScript-.  Vue.js     .  ,   ,         , ,    DOM.        ,  ‚Äî        . <br><br> ,    ,   ,  ,   ,      Vue.js  SVG.      ‚Äî   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,      Vue.js.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ‚Äî   . <br><br>   ,       - ,   ,        ,   ‚Äî . <br><br>  <b>Chers lecteurs!</b>      ? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr463329/">https://habr.com/ru/post/fr463329/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr463313/index.html">Une approche alternative pour vous abonner √† des √©v√©nements, ou EventObject est-il vraiment n√©cessaire?</a></li>
<li><a href="../fr463317/index.html">D√©tails techniques du piratage de Capital One Bank sur AWS</a></li>
<li><a href="../fr463321/index.html">Paniers et caisses de convivialit√©: analyse des 20 meilleurs magasins de niche russes en ligne</a></li>
<li><a href="../fr463325/index.html">R√©flexion de Game Designer: Personnages pour un jeu qui n'est pas sorti</a></li>
<li><a href="../fr463327/index.html">Vue.js: 3 anti-patterns</a></li>
<li><a href="../fr463331/index.html">Client Apollo. Maintenant avec des crochets React</a></li>
<li><a href="../fr463333/index.html">Choisir un syst√®me de gestion des tests en 2019</a></li>
<li><a href="../fr463335/index.html">Utilisation de l'analyseur statique PVS-Studio dans le d√©veloppement de syst√®mes embarqu√©s en C et C ++</a></li>
<li><a href="../fr463337/index.html">Utilisation d'Immer pour g√©rer l'√©tat de l'application React</a></li>
<li><a href="../fr463347/index.html">Ouverture d'un ensemble de formations conjointes Groupe-IB et Belkasoft en informatique l√©gale</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>