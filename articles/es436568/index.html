<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ö üêâ üéâ Plataforma de video propia o c√≥mo tomar muchos recursos inform√°ticos. Parte 1 üéñÔ∏è üè§ ü¶ë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la foto, la primera bicicleta voladora de cuatro ruedas. Fuente 

 Hoy, debido a la disponibilidad de los servicios necesarios, publicar videos en ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plataforma de video propia o c√≥mo tomar muchos recursos inform√°ticos. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436568/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/il/db/l0/ildbl0rgeufxd3tgzdstzyosr5a.jpeg" width="500"></div>  <sub>En la foto, la primera bicicleta voladora de cuatro ruedas.</sub>  <sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuente</a></sub> <br><br>  Hoy, debido a la disponibilidad de los servicios necesarios, publicar videos en la red no es una tarea dif√≠cil.  Sin embargo, no hay tantos materiales sobre la estructura interna de tales sistemas, especialmente en el segmento de idioma ruso. <br><br>  He estado involucrado en el dise√±o y desarrollo de una plataforma de video de alta calidad por alg√∫n tiempo.  En este art√≠culo quiero describir esos momentos que a m√≠ mismo me gustar√≠a conocer al comienzo del desarrollo. <br><br>  El art√≠culo no reclama el estado de liderazgo, en √©l tratar√© de describir solo puntos interesantes o no obvios que afectan el procesamiento y la entrega de contenido de video basado en HTML5. <br>  El material est√° dise√±ado para aquellos que ya est√°n en el tema, o est√° listo para buscar un desglose de abreviaturas, t√©rminos y conceptos. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La segunda parte</a> <br><a name="habracut"></a><br><h3>  Formato </h3><br>  H264 High-profile, a pesar de su popularidad, resulta que no funciona en todas partes, algunos navegadores no incluyen su soporte.  Afortunadamente, en dispositivos modernos, en casi todas partes donde no se admite H264, VP8 / 9 funciona.  Es preferible usar VP9, ‚Äã‚Äãya que  No he visto versiones anteriores de decodificadores que puedan VP8, pero no VP9 o H264.  VP9 ofrece una calidad de imagen comparable a H264 con una tasa de bits de ~ 30% menor; esto es importante para reducir la carga en los canales.  Adem√°s, si el uso del c√≥dec MPEG puede tener reclamos legales (una historia muy complicada), entonces VP9 est√° bien con esto.  Es cierto que la velocidad de codificaci√≥n de VP9 es aproximadamente un orden de magnitud menor, por lo tanto, se deben asignar m√°s recursos para su procesamiento. <br><br>  Si es necesario admitir equipos antiguos que no pueden hacer frente a H264 High, puede agregar 480p H264 Main con una tasa de bits m√°s baja como tercer formato. <br><br>  Hi10P es enormemente mejor no usarlo debido a la mala compatibilidad de decodificaci√≥n de hardware. <br>  El H265 obviamente requerir√° tarifas de licencia, lo cual no es para todos. <br><br><h3>  Suave vs duro </h3><br>  Los codificadores de hardware no utilizan la mayor√≠a de las funciones avanzadas de los c√≥decs (ahorrando espacio en chips), produciendo archivos codificados sub√≥ptimos.  La elecci√≥n del formato es limitada, no todos los par√°metros de codificaci√≥n se pueden configurar: a menudo, de los valores que realmente afectan el resultado, solo hay una tasa de bits, e incluso eso se percibe de manera muy peculiar.  Si todo se hace como deber√≠a, entonces en chips normales puede obtener un resultado completamente sano con un lineal (efecto en escenas din√°micas) y una tasa de bits un poco m√°s alta. <br><br>  Y, por supuesto, para que el codificador de hardware funcione, necesita un dispositivo: una tarjeta de video o procesador con un n√∫cleo de video, que no todos los servidores tienen. <br><br>  Pero ellos son r√°pidos.  Muy  En comparaci√≥n con el procesamiento de software, la velocidad puede crecer un par de cientos de veces, hasta un nivel en el que la E / S del disco puede no ser suficiente. <br><br>  El procesamiento por m√©todos de hardware depende mucho del proveedor de la soluci√≥n: cada proveedor tiene su propio conjunto de bibliotecas y utilidades para esto, y hay mucho para elegir: Intel Quick Sync, NVenc, AMD VCE. <br><br>  Con el procesamiento de software, no existen tales restricciones, y con una tasa de bits equivalente, el resultado es mejor.  Para trabajar con varios formatos y c√≥decs hay ffmpeg;  Los "apparatchiks" no tienen ese lujo (con reservas). <br><br><h3>  Criterios de calidad de video </h3><br>  Para determinar la calidad objetivo, es m√°s f√°cil leer en bits por p√≠xel, BPP.  Esta configuraci√≥n es independiente de la resoluci√≥n, la velocidad de fotogramas y la duraci√≥n.  A partir de eso, considere la tasa de bits seg√∫n la f√≥rmula <br><pre><code class="plaintext hljs">BPP * Framerate * Width * Height</code> </pre>  Los mejores valores de BPP se eligen mejor mediante experimentos independientes para el video que planea procesar.  Un buen valor inicial para H264 es de alrededor de 0.09 bps.  Para c√≥decs de alto rendimiento, como H265 y VP9, ‚Äã‚Äãeste par√°metro se puede reducir en proporci√≥n a la relaci√≥n de compresi√≥n comparativa.  Adem√°s, BPP se puede reducir ligeramente para video de alta resoluci√≥n, ya que  la eficacia de los c√≥decs aumenta ligeramente con la resoluci√≥n, pero para esta correcci√≥n debe tener en cuenta la resoluci√≥n de la secci√≥n de codificaci√≥n (cortes, una caracter√≠stica de los c√≥decs que le permite codificar video con bloques de resoluci√≥n fraccional semiindependiente). <br><br>  Para la tasa de bits obtenida por la f√≥rmula anterior, es aconsejable predeterminar los valores m√°ximos en funci√≥n de la velocidad de Internet esperada para el cliente: pocas personas se sentir√°n c√≥modas viendo un video de muy alta calidad, pero constantemente almacenado. <br><br>  Es por eso que es inconveniente usar par√°metros Q de c√≥decs (loros de calidad): los valores fijos dan una tasa de bits final impredecible. <br><br>  maxRate se hace mejor con un margen, porque  los c√≥decs pueden no mantener con precisi√≥n los valores requeridos, incluso con codificaci√≥n de dos pasos. <br><br>  Para mantener la calidad de las escenas din√°micas, es mejor habilitar el modo VBR de los c√≥decs, sin embargo, minRate es mejor establecer al menos el 90% de la velocidad de bits total para que los picos de velocidad no conduzcan a la falta de memoria intermedia. <br><br>  Las utilidades como Intel VPA, ffprobe y Python son √∫tiles en el control de calidad.  Usando este √∫ltimo, es conveniente hacer comparaciones de la fuente y el video convertido, leer m√©tricas arbitrarias, como la desviaci√≥n promedio de p√≠xeles. <br><br>  El c√°lculo de PSNR y SSIM en la pr√°ctica es extremadamente ineficiente debido a las optimizaciones psicovisuales, que se incluyen en los c√≥decs de forma predeterminada.  Si desea calcular estas m√©tricas de manera m√°s o menos adecuada, puede desactivar las optimizaciones a trav√©s de <pre> <code class="plaintext hljs">-tune [psnr|ssim]</code> </pre>  Sin embargo, el archivo final, por supuesto, ser√° diferente del creado sin estas banderas. <br><br><h3>  Vista previa </h3><br>  El principal problema de generar im√°genes en miniatura es una fuente difusa.  La definici√≥n y b√∫squeda de im√°genes claras es una tarea muy poco trivial y que requiere muchos recursos.  Afortunadamente, la soluci√≥n a este problema en la mayor√≠a de los c√≥decs se incluye en el proceso de codificaci√≥n de video.  Puede tomar el fotograma clave m√°s cercano a una determinada posici√≥n; de todos los fotogramas que lo rodean, ser√° el m√°s claro.  En ffmpeg, esto se puede hacer as√≠: <br><br><pre> <code class="plaintext hljs">-ss [] -vf \"select='eq(pict_type,PICT_TYPE_I)'\" -vsync vfr</code> </pre> <br>  Los codificadores est√°ndar no se comprimen de la mejor manera, por lo que despu√©s de recibir la imagen, es mejor apretarla con algo como optipng, ahorrando un promedio de 500kB en las vistas previas de FHD. <br><br>  Las im√°genes de alta resoluci√≥n se hacen mejor entrelazadas.  Por lo tanto, aumentaremos ligeramente el tama√±o (en un 5-10%), pero reduciremos considerablemente el tiempo de visualizaci√≥n en la p√°gina de carga. <br><br>  El art√≠culo ya ha resultado ser denso, y tengo dudas de que toda la informaci√≥n necesite ser empaquetada en un texto enorme.  Si est√° interesado en continuar con este tema, escriba los comentarios o marque en la encuesta. <br><br>  La plataforma est√° cerrada, pero puedes ver su trabajo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  <sub>* No tengo ninguna relaci√≥n con los autores de los sitios respectivos y no puedo compartir sus puntos de vista y opiniones.</sub>  <sub>No puedo comentar sobre las decisiones sobre qui√©n y c√≥mo se otorga el acceso al c√≥digo.</sub> <br><br>  Listo para responder preguntas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es436568/">https://habr.com/ru/post/es436568/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es436554/index.html">Transfiera 30,000 l√≠neas de c√≥digo de Flow a TypeScript</a></li>
<li><a href="../es436556/index.html">Empleos en una empresa alemana: ¬øc√≥mo presentar una solicitud y no obtener un rechazo?</a></li>
<li><a href="../es436558/index.html">Feliz 18 cumplea√±os, Wikipedia; celebrando la mayor√≠a de edad de un buen proyecto</a></li>
<li><a href="../es436560/index.html">Protocolos criptogr√°ficos para votaci√≥n electr√≥nica.</a></li>
<li><a href="../es436564/index.html">C√≥mo funciona ProGuard</a></li>
<li><a href="../es436570/index.html">Programador Exorcismo</a></li>
<li><a href="../es436572/index.html">Skolkovo Cybersecurity Challenge 2019 Concurso del Proyecto de Ciberseguridad</a></li>
<li><a href="../es436578/index.html">Precio de seguridad personal para directores de grandes empresas de TI por a√±o</a></li>
<li><a href="../es436584/index.html">Ley de gesti√≥n de runet: implementaci√≥n de disposiciones y √°reas de responsabilidad</a></li>
<li><a href="../es436586/index.html">JS battle: como escrib√≠ mi eval ()</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>