<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👰🏻 🌘 👨🏿‍🔧 Business Intelligence in Russisch - Quintette 👦🏻 😢 ℹ️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In einem unserer Blog-Notizen haben wir den Ansatz zur Speicherung und Verarbeitung von Daten behandelt , über den wir einige durchaus erwartete Frage...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Business Intelligence in Russisch - Quintette</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/neoflex/blog/451218/"><p> In einem unserer Blog-Notizen haben wir den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ansatz zur Speicherung und Verarbeitung von Daten behandelt</a> , über den wir einige durchaus erwartete Fragen zu einem solchen Plan erhalten haben: „Im Allgemeinen warten wir auf die Implementierung, jetzt fliegt es ...“.  Basierend auf den Ergebnissen mehrerer Implementierungen werde ich am Beispiel einer unserer Entwicklungen über die Vor- und Nachteile dieses Ansatzes sprechen. </p><br><p>  Wir bieten unseren Kunden normalerweise ein ziemlich leistungsfähiges und flexibles BI-Tool, das alle ihre Probleme lösen kann. Dies ist jedoch ein ausländisches Handelsprodukt, und die Kunden interessieren sich zunehmend für das Thema Importsubstitution.  Um unsere diesbezüglichen Perspektiven zu untersuchen, haben wir begonnen, unser eigenes BI-Toolset mit Open-Source-Lösungen und einer quintettbasierten Entwicklungsplattform zu testen. </p><br><img src="https://habrastorage.org/webt/u9/pk/5e/u9pk5ewq1x1ri6jrggrn9e38qu0.png"><br><br><p>  Wir haben unser bestehendes kommerzielles Produkt als Referenz genommen und werden, wann immer möglich, einen Vergleich damit durchführen. </p><a name="habracut"></a><br><p>  Die Aufgabe bestand darin, folgende Komponenten zu erstellen: </p><br><ul><li>  eine Datenbank zum Speichern von Data Marts und Serviceinformationen (Benutzer, Einstellungen usw.); </li><li>  Webschnittstelle des Systems und seines ORM; </li><li>  BI-Funktionalität - Laden von Daten, benutzerdefinierte Berichte, Diagramme, Pivot-Tabellen. </li></ul><br><p>  Als Grundlage haben wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eine Entwicklungsplattform verwendet</a> , die ein Datenmodell, einen Abfrage-Designer und eine Vorlagen-Engine enthält und ein Vorbild für die Benutzerzugriffskontrolle unterstützt. </p><br><blockquote><p>  Gegenstand der Bestellung ist die Abstimmung von Kontoauszügen und die Analyse der in den letzten 7 Jahren gesammelten Daten.  Die Quelldaten werden in HDFS gespeichert, die Berichte selbst werden an derselben Stelle berechnet und ihre Ergebnisse fallen in das Fenster der relationalen Datenbank.  Storefronts enthalten etwa 300 GB Daten für mehrere Dutzend verschiedene Berichtsformulare und mehrere hundert verwandte Berichte.  Das System sollte 20 Benutzer bei Spitzenlast bedienen, die Antwortzeit der Schnittstelle sollte innerhalb von 1 Sekunde liegen. </p></blockquote><br><p>  Das Erstellen einer Datenstruktur hat nicht viel Zeit in Anspruch genommen: Mit dem Plattformtyp-Editor können Sie Geschäftsobjekte unverändert erstellen und beschreiben, ohne die Benutzeranforderungen an die Besonderheiten der Umgebung anpassen zu müssen (Datentypen und -dimensionen, Schlüssel, Einschränkungen, Datenfeldnamen, Bezeichner usw.).  Dies ist das erste Plus der Quintette, die wir reparieren können. </p><br><p>  So entsteht die Datenstruktur - wir definieren die notwendigen Begriffe und bilden daraus die Objekte unseres Themenbereichs: </p><br><img src="https://habrastorage.org/webt/ca/xm/ow/caxmowlcuib8qxvoeferzoit26y.gif"><br><p>  Nach einigen Minuten Aktivität im Copy / Paste-Format haben wir die erforderliche Datenstruktur für ein Formular und mehrere Hilfsverzeichnisse dafür erhalten.  Die Struktur der Formulardaten (nach Zerlegung durch den Analytiker) sieht folgendermaßen aus: </p><br><img src="https://habrastorage.org/webt/ok/gd/9d/okgd9dlwt9nkiaet4nhee488nl4.png"><br><br><p>  Ein Analyst, der mit dem Geschäftssinn der hier präsentierten Daten vertraut ist, lautet wie folgt: Jede F110-Instanz (Formular 110 in der CB-Terminologie) hat eine bestimmte Genauigkeit (sie kann „genau“ oder „gerundet“ sein) und enthält eine Reihe von Codes, für die jeweils Beträge in Rubel und Währung sind angegeben. </p><br><p>  Im Datennavigator, in dem die Daten gemäß der angegebenen Struktur dargestellt werden, sehen wir eine solche Tabelle über die im System vorhandenen Formularinstanzen: </p><br><img src="https://habrastorage.org/webt/ro/n6/ft/ron6ftlagq_rqj5tz8c_ghxdkzk.png"><br><br><p>  Der identifizierende Wert des Formulars ist sein Berichtsdatum. Die Berichtscodes werden in Form eines untergeordneten Arrays gespeichert, dessen Größe in Klammern angegeben ist. </p><br><p>  Wie bereits erwähnt, haben wir die Daten im Vergleich zur ursprünglichen Struktur ein wenig zerlegt, um keine langen Zeilen sich wiederholender Werte in der Datenbank zu speichern, wie dies ein Programmierer oder Datenbankadministrator sieht: </p><br>  Tabelle mit Daten im Referenzsystem: <br><img src="https://habrastorage.org/webt/nr/4m/k3/nr4mk3p6jfxs-ejr8upnxi1vbns.png"><br><br><p>  Aus diesem Grund positionieren wir die Plattform (im Folgenden Integral genannt) als Entwicklungswerkzeug für den Analysten und nicht für den Programmierer. </p><br><p>  Die Hilfsdatenstruktur ist nicht wesentlich größer, da sie alle Anfangsdaten, Berichtseinstellungen, Regeln zur Überprüfung der Integrität der Daten im Bericht und in den zugehörigen Berichten, den Verlauf der Berechnungen und Abstimmungen sowie einige Regeln für die Datengeschäftstransformation während der Berichtserstellung speichert: </p><br><img src="https://habrastorage.org/webt/5-/ty/xy/5-tyxyaidwomjswea4rpn8sibhs.png"><br><p>  (Die Struktur ist nicht vollständig angegeben) </p><br><p>  Wenn die Datenstruktur fertig ist, können Sie Daten in sie laden.  Am einfachsten ist es, eine im Integral-Format erstellte Datei hochzuladen (analog zu .csv, jedoch mit Typ-Markup).  Dieses Format enthält eine Beschreibung der Daten und der Daten selbst. </p><br><div class="spoiler">  <b class="spoiler_title">Datei anzeigen</b> <div class="spoiler_text"><p>  Im folgenden Beispiel beschreiben die ersten drei Zeilen der Datei die Struktur des Formulars (wenn es nicht im System vorhanden ist, wird es erstellt) und dann die Daten selbst - die Formularparameter und die Parameter der ihm untergeordneten Berichtsobjekte. </p><br><pre><code class="plaintext hljs">268:110:DATE;277;270; 277::SHORT; 270:  :SHORT;  :SIGNED;   :SIGNED; 268::20121231;281;; 270::A/5.2;1233682389.47;; 277:281:; 270::A/5.3;622836720.22;; 270::A/6.4;19800;; 270::A/9.2;27125165.14;; 270::S16203/1.2;608607846.309999;; 270::S16305/4;2727510994.84;; 270::S16305/4.1;32049069.51;; 270::S16305/14;2737711.65;; 270::S25302/4;2725748122.98999;; 270::S25302/4.1;40952511.36;; 270::IL/2;87429694.5699999;62717458.21; 270::IL/4;33517212.95;; 270::IL/9;1423281.69;8278.24; 270::IL/11;86433534.5699999;519956.63; 270::IA/1;147792224.509999;4517060.94; 270::IA/2;737704.92;; 270::IA/3;27099836.07;2637.79; 270::IA/6;5607868.86;408410.4; 270::IA/8;103837028.49;48841202.69; 270::IA/10;112302573.56;; 268::20121231;280;; 270::A/5.2;1233682;; 277:280:; 270::A/5.3;622837;; 270::A/6.4;20;; 270::A/9.2;27125;; 270::S16203/1.2;608608;;</code> </pre> </div></div><br>  Für dieses Formular verfügt die Datenbank über 4470 Berichtsdaten, die beim Entladen in eine flache Datei etwas mehr als 1 MB benötigen.  In der ursprünglichen Datenbank (Oracle) belegen sie 3,1 MB (ohne Indizes) in normalisierter Form und 4,2 MB in einer denormalisierten Storefront, die wir als Quintette wiederholen möchten.  Quintette werden indiziert und normalisiert, und in ihrem Format belegen diese Daten bereits 10 MB. <br><a name="volumes"></a><br><br>  Die zu vergleichenden Datenmengen sind in der Tabelle (in Megabyte) zusammengefasst: <br><div class="scrollable-table"><table><tbody><tr><th></th><th align="center">  Text </th><th align="center">  RDBMS </th><th align="center">  Quintette </th></tr><tr><td>  Daten </td><td align="right">  1.1 </td><td align="right">  3.1 </td><td align="right">  5.1 </td></tr><tr><td>  Denormalisiert </td><td></td><td align="right">  4.2 </td><td></td></tr><tr><td>  Indizes </td><td></td><td align="right">  6.2 </td><td align="right">  5.1 </td></tr><tr><td>  Daten + Indizes </td><td></td><td align="right">  9.3 </td><td align="right">  10.2 </td></tr></tbody></table></div><br><p>  An dieser Stelle sollte auf die Größe geachtet werden, die die Grundlagen für die verglichenen Ansätze einnehmen.  Aufgrund der zusätzlichen Normalisierung von Quintetten und Ausgaben für zusammengesetzte Indizes in der Referenzbasis ist die Gesamtgröße der Datenbanken nahezu gleich. </p><br>  Referenzbasis: <br><img src="https://habrastorage.org/webt/07/ue/vu/07uevub4nkj0qnbgctmpqfho9pe.png"><br><br>  Quintette: <br><img src="https://habrastorage.org/webt/cq/_e/d2/cq_ed2rliwl4gkwnxgp_pqsjlvy.png"><br><br><p>  Darüber hinaus haben wir in Integral sofort alle Felder der Tabelle und im Referenzsystem indiziert - nur Datum, Code und Menge in Rubel, was zusätzliche Kosten erfordert, wenn neue Anforderungen auftreten. </p><br><p>  <i>Als Referenz: In der Datenbank beträgt die Gesamtgröße dieses Formulars, einschließlich unterstützender Berichte und Einstellungen, ca. 400 MB (es ist relativ klein).</i> </p><br><p>  Die Daten werden also hochgeladen und der schwierigste Teil des Projekts liegt vor uns - die Erstellung einer Schnittstelle.  Über die Schnittstelle des Referenzsystems können Sie die Daten von Formularen, unterstützenden Berichten, Einstellungen und den Lebenszyklus von Formularen anzeigen.  Um den Zugriff zu verwalten und mit der Datenbank zu kommunizieren, haben wir die grundlegenden Funktionen unserer Plattform verwendet - ein Vorbild und einen Berichtsdesigner. </p><br><p>  Die Liste der Benutzer mit ihren Rollen sieht folgendermaßen aus: </p><br><img src="https://habrastorage.org/webt/ie/v1/g5/iev1g5bfej66iarj8prm4rxeen4.png"><br><br><p>  Wenn Sie auf den Rollennamen klicken (in der Abbildung oben mit einem roten Oval markiert), können Sie sich dessen Inhalt ansehen: </p><br><img src="https://habrastorage.org/webt/g1/8x/4w/g18x4wxhcqn-ybvo_fxrocan-s4.png"><br><br><p>  Rollenobjekte können auf 3 Zugriffsebenen eingestellt werden, Maske kann verwendet werden: </p><br><img src="https://habrastorage.org/webt/dv/e4/tr/dve4trqzpgdl84uijgfbn_1lcds.png"><br><br><p>  Die Datenbearbeitung erfolgt ebenfalls über die Basisschnittstelle.  Hier ist zum Beispiel ein Benutzerbearbeitungsformular: </p><br><img src="https://habrastorage.org/webt/jd/vt/xz/jdvtxzhmaylnkg-zhv0swxwefqa.png"><br><br><p>  Wir haben das spezifische Menü unserer Anwendung und ihrer Arbeitsplätze in einer kompakten Datei angeordnet, da sie alle vom gleichen Typ sind: ein Anforderungsformular mit 2-3 Elementen und eine Tabelle mit den Ergebnissen der Anforderungen. </p><br><img src="https://habrastorage.org/webt/up/el/pr/upelprt0of7_mecdtpk_mqgxvd4.png"><br><br><h4>  Die Architektur erwies sich als sehr einfach: Wir haben viele Datenanforderungen (Ansichten) erstellt und ein Plug-In geschrieben, das beliebige Datenbeispiele in den in diesen Ansichten enthaltenen Tabellen und Feldern implementiert. </h4><br><p>  Zum Beispiel haben wir einen sogenannten Entschlüsselungsbericht zu Form 110, der nicht aggregierte Daten enthält, auf denen er aufgebaut ist.  So sieht dieser Bericht aus: </p><br><img src="https://habrastorage.org/webt/jd/zm/fc/jdzmfcrujmetvb_w2vqrkfa6g-y.png"><br><br><p>  Um die Richtigkeit des Formulars zu überprüfen, sollte der Benutzer in der Lage sein, eine Auswahl zu treffen, zu sortieren, zu filtern, zu gruppieren, zu transponieren sowie eigene berechnete Felder zu erstellen.  Unser Plugin wird über die Schaltfläche "Aktionen" oben in der Tabelle aufgerufen. </p><br><img src="https://habrastorage.org/webt/n4/kx/ni/n4kxnicwdqq4y6_ykf06x-pnhi0.png"><br><br><p>  Das Plugin wiederholt die Funktionalität des Integral Query Builder, kann aber nicht nur Daten abrufen, sondern auch Diagramme und Pivot-Tabellen zeichnen.  Zum Beispiel müssen wir nach Abschnitt filtern, ein Paar berechneter Spalten hinzufügen und eine Auswahl der nach ihnen gruppierten Beträge treffen.  Wir setzen das alles: </p><br><img src="https://habrastorage.org/webt/zd/hi/rx/zdhirxamjgonu9xzepqwike0cqe.png"><br><br><p>  Neue Spalten werden der Liste über den gleichnamigen Link hinzugefügt.  Mit der Schaltfläche „Berechnungen“ legen wir die Formeln für sie mit einem einfachen Konstruktor fest: </p><br><img src="https://habrastorage.org/webt/d6/tu/fc/d6tufcwrz1qaxfhca1fwiokqdjo.png"><br><br><p>  Wir legen eine neue Spaltenreihenfolge fest und klicken auf "Übernehmen". Unser Bericht wird nach Bedarf geändert. Anstelle von 7 Basisspalten werden drei angezeigt, von denen zwei gerade erstellt wurden: </p><br><img src="https://habrastorage.org/webt/4t/sp/1a/4tsp1arr8uu8nbz7zeut6qd0foi.png"><br><br><div class="spoiler">  <b class="spoiler_title">Wie funktioniert es unter der Haube?</b> <div class="spoiler_text"><p>  Das Plugin kommuniziert mit dem Webdienst der Anwendung über die API und hat die folgende Anfrage ausgeführt: </p><br><pre> <code class="plaintext hljs">api/neo/report/1392573?FR_date=20181231&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=&amp;SELECT=LEFT(\:1392578\:\,5),SUBSTRING(\:1392578\:\,6\,3),1392617:SUM&amp;ORDER=1392617&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=1&amp;TOTALS=1392617:SUM&amp;LIMIT=10</code> </pre><br><p>  Und ich habe diese Antwort bekommen: </p><br><pre> <code class="json hljs">{ «columns»: [ «LEFT(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,<span class="hljs-number"><span class="hljs-number">5</span></span>)», «SUBSTRING(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>)», «<span class="hljs-number"><span class="hljs-number">1392617</span></span>» ], «formats»: [ «SHORT», «SHORT», «SIGNED» ], «data»: { «LEFT(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,5)»: [ «<span class="hljs-number"><span class="hljs-number">60324</span></span>», «<span class="hljs-number"><span class="hljs-number">40817</span></span>», «<span class="hljs-number"><span class="hljs-number">47425</span></span>», «<span class="hljs-number"><span class="hljs-number">47404</span></span>», «<span class="hljs-number"><span class="hljs-number">60302</span></span>», «<span class="hljs-number"><span class="hljs-number">47404</span></span>» ], «SUBSTRING(:<span class="hljs-number"><span class="hljs-number">1392578</span></span>:,6,3)»: [ «<span class="hljs-number"><span class="hljs-number">810</span></span>», «<span class="hljs-number"><span class="hljs-number">810</span></span>», «<span class="hljs-number"><span class="hljs-number">810</span></span>», «<span class="hljs-number"><span class="hljs-number">840</span></span>», «<span class="hljs-number"><span class="hljs-number">810</span></span>», «<span class="hljs-number"><span class="hljs-number">978</span></span>» ], «  »: [ «<span class="hljs-number"><span class="hljs-number">153</span></span> <span class="hljs-number"><span class="hljs-number">825.71</span></span>», «<span class="hljs-number"><span class="hljs-number">527</span></span> <span class="hljs-number"><span class="hljs-number">901.11</span></span>», «<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">415</span></span> <span class="hljs-number"><span class="hljs-number">189.23</span></span>», «<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000.02</span></span>», «<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">588</span></span> <span class="hljs-number"><span class="hljs-number">330.88</span></span>», «<span class="hljs-number"><span class="hljs-number">58</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000.00</span></span>» ] }, «totals»: [ «„, “», «<span class="hljs-number"><span class="hljs-number">69</span></span> <span class="hljs-number"><span class="hljs-number">685</span></span> <span class="hljs-number"><span class="hljs-number">246.95</span></span>» ] }</code> </pre><br><p>  Wenn jemand daran interessiert ist, welche echte SQL-Abfrage in der Quintett-Datenbank ausgeführt wurde, dann ist es hier: </p><br><div class="spoiler">  <b class="spoiler_title">SQL anzeigen</b> <div class="spoiler_text"><h4>  Der Analyst sieht diese SQL nicht und verwendet den unten beschriebenen Abfrage-Generator. </h4><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span>(a182088.val, <span class="hljs-number"><span class="hljs-number">5</span></span>) v13, <span class="hljs-keyword"><span class="hljs-keyword">SUBSTRING</span></span>(a182088.val, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) v14, <span class="hljs-keyword"><span class="hljs-keyword">SUM</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">round</span></span>(a182090.val, <span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-string"><span class="hljs-string">'  '</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> neo a182081 <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182083 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182083.up=a182081.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182083.t=<span class="hljs-number"><span class="hljs-number">182083</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182088 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182088.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182088.t=<span class="hljs-number"><span class="hljs-number">182088</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182090 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182090.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182090.t=<span class="hljs-number"><span class="hljs-number">182090</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182091 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182091.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182091.t=<span class="hljs-number"><span class="hljs-number">182091</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182092 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182092.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182092.t=<span class="hljs-number"><span class="hljs-number">182092</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a299 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a299.t=<span class="hljs-number"><span class="hljs-number">299</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182083.val=a299.val <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a328 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a328.up=a299.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a328.t=<span class="hljs-number"><span class="hljs-number">328</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a303 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a303.up=a299.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a303.t=<span class="hljs-number"><span class="hljs-number">303</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a304 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a304.up=a299.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a304.t=<span class="hljs-number"><span class="hljs-number">304</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> neo a182089 <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> a182089.up=a182083.id <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182089.t=<span class="hljs-number"><span class="hljs-number">182089</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> a182081.up!=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-keyword"><span class="hljs-keyword">length</span></span>(a182081.val)!=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182081.t=<span class="hljs-number"><span class="hljs-number">182081</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a182081.val=<span class="hljs-string"><span class="hljs-string">'20181231′ AND a328.val ='</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>′ <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a303.val&gt;=<span class="hljs-string"><span class="hljs-string">'19000101′ AND a303.val&lt;='</span></span><span class="hljs-number"><span class="hljs-number">20181231</span></span>′ <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> a304.val&gt;=<span class="hljs-string"><span class="hljs-string">'20181231′ AND a304.val&lt;='</span></span><span class="hljs-number"><span class="hljs-number">20991231</span></span>′ <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> v13, v14 <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CAST</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">SUM</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">round</span></span>(a182090.val, <span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> SIGNED) <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> </div></div><br><p>  Die Anforderung erscheint möglicherweise etwas komplizierter als erwartet, da die aktuellen Daten der Berichtscodes anhand ihrer Gültigkeit ausgewählt werden.  Im Integral Report Builder besteht diese Abfrage bei Bedarf aus Berichtsspalten, Parametern und Tabellenverknüpfungsbedingungen. </p><br><img src="https://habrastorage.org/webt/ro/mx/tw/romxtw85qjp94yfrzqmf47vnvsm.png"><br><br><p>  Das Integral selbst kann Tabellenverbindungsbedingungen generieren, da alle durch Quintettbeziehungen bestimmt werden. Bei der Versionierung mussten wir die Tabellen jedoch manuell kombinieren und die Bedingung für JOIN explizit angeben.  Codes in der ON-Klausel sind Bezeichner für Spalten- und Abfrageobjekte. </p><br><p>  Die Abfrage kombiniert drei Tabellen und wählt aus ihnen die folgenden Datenfelder aus (erforderliche "Abfragespalten"): </p><br><img src="https://habrastorage.org/webt/_a/f3/cs/_af3cspclqx4lkhvfasksxbchxg.png"><br>  <a href="">(Bild in voller Größe)</a> <br><br><p>  Hier werden die Berichtsspalten, berechneten Felder, Filter usw. aufgelistet, aus denen die SQL-Abfrage besteht.  Mit dem Berichts-Generator können Sie nahezu jedes Design der SQL-Sprache implementieren, einschließlich des Verbindens von Abfragen und verschachtelten Abfragen. </p><br></div></div><br><p>  Zusätzlich zur Auswahl mit Gruppierungen kann der Benutzer den Mechanismus von Pivot-Tabellen verwenden.  Wir haben unser Plugin um das beliebte Tabellen-Tool <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">pivottable.js.org erweitert</a> . <br>  Wählen Sie die für uns interessanten Spalten aus und wechseln Sie in den Pivot-Tabellenmodus: </p><br><img src="https://habrastorage.org/webt/5n/wb/du/5nwbduykd19ryanqanvvtaymp4g.png"><br><br><p>  Hier können wir mit drag'n'drop die Daten analysieren, die von der von uns konfigurierten Stichprobe empfangen wurden, einschließlich unserer beliebigen Felder.  Außerdem können Sie hier zusätzlich Daten nach beliebigen Feldern filtern. </p><br><img src="https://habrastorage.org/webt/y6/dg/tg/y6dgtgwvwf4yprzf6qvp2dijbss.gif"><br><br><p>  Wir haben das kostenlose Produkt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.amcharts.com verwendet,</a> um Grafiken zu zeichnen.  Wie bei Pivottable ist auch hier alles ganz einfach: Wir wählen den Diagrammtyp aus und initialisieren die Komponente mit unserem von Integral erhaltenen Datenarray: </p><br><img src="https://habrastorage.org/webt/j3/zt/eu/j3zteutdk8xhxddxikns8nr12fo.gif"><br><br><p>  Damit haben wir die Aufgabe tatsächlich so weit erledigt, dass die Benutzer des vorhandenen Produkts zufrieden sind.  Jetzt haben wir ein System, das die Anforderungen der Importsubstitution erfüllt: Alle Produkte sind kostenlos und austauschbar.  Ja, wir haben bei weitem nicht alle Möglichkeiten erkannt, die das bestehende System bietet, sondern nur diejenigen, die für <i>diesen</i> Kunden notwendig sind.  Aber wir haben gerade erst angefangen! </p><br><a name="tests"></a><br><h2>  Also geflogen oder nicht? </h2><br><p>  Wir sollten auch die Leistung des resultierenden Systems diskutieren.  Bei diesem Problem wirken sich die Stichproben bei einer ausreichend großen Datenmenge (Hunderte von Gigabyte) auf kleine Fragmente aus, deren Quintette immer mithilfe von Indizes erfasst werden.  Dies führt dazu, dass Abfragen bei jeder Größe der Datenbank mit einer akzeptablen Geschwindigkeit verarbeitet werden, ohne dass es zu einer Lawinen-ähnlichen Leistungsverschlechterung kommt. </p><br><p>  Wir haben 20 Benutzeraktionen in einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Testskript</a> aufgezeichnet und auf dem Dienst <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">loadimpact.com ausgeführt</a> .  Es stellte sich heraus, dass 27 verschiedene Anforderungen vorliegen, da einige Aktionen in zwei Anforderungen an den Server ausgeführt werden (z. B. zum Erstellen einer Seitenanzeige). </p><br><div class="spoiler">  <b class="spoiler_title">Das Testskript stellte sich so heraus</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { group, sleep } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'k6′; import http from '</span></span>k6/http<span class="hljs-string"><span class="hljs-string">'; // Version: 1.3 // Creator: Load Impact URL test analyzer export let options = { stages: [ { «duration»: «3m0s», «target»: 25 } ], maxRedirects: 0, discardResponseBodies: true, }; export default function() { group("page_1 — https://*****.ru/neo/dict«, function() { let req, res; req = [{ «method»: «get», «url»: «https://*****.ru/neo/info», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «upgrade-insecure-requests»: «1», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8» } } }]; res = http.batch(req); sleep(0.62); req = [{ «method»: «get», «url»: «https://*****.ru/neo/info», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «upgrade-insecure-requests»: «1», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392573?FR_date=20181231&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392573?FR_date=20181130&amp;ORDER=1392617&amp;LIMIT=10&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392573?FR_date=20181031», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392573?FR_date=20180930&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «*/*», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1387723?&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «*/*», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1387723?&amp;LIMIT=10&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «*/*», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392741?», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392757?&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392768?&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_dropdown_arrow.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_detailed_report.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_classifiers.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_launch_report.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_manage_form_status.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_quality_management.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/img/nav_download.svg», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «image/webp,image/apng,image/*,*/*;q=0.8», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/download/neo/css/variables.css», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392779?&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392538?&amp;LIMIT=10&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/edit_obj/1392129», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/edit_obj/1390552», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/object/18», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1387723?&amp;LIMIT=140,10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1387723?&amp;LIMIT=140,10&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392573?FR_date=20180731&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=&amp;SELECT=1392576,1392617:SUM,1392589&amp;LIMIT=100», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392678?FR_date=20180831&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392678?FR_date=20180630&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=10&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392678?FR_date=20180531&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=500», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=2&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=500», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=4&amp;SELECT=1392698,1392685,1392690,1392694&amp;LIMIT=20», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=4&amp;SELECT=1392698,1392685,1392690,1392694&amp;LIMIT=20&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/neo/info», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/api/neo/report/1392678?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;SELECT=1392698,1392685,1392715&amp;LIMIT=50», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/api/neo/report/1392678?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;SELECT=1392698,1392685,1392715&amp;LIMIT=50&amp;RECORD_COUNT», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/api/neo/report/1392573?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=A60302/9&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://*****.ru/api/neo/report/1392573?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;ORDER=1392617&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=A60302/9&amp;LIMIT=10», «params»: { «headers»: { «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «text/css,*/*;q=0.1», «referer»: «https://*****.ru/neo/dict» } } },{ «method»: «get», «url»: «https://fonts.gstatic.com/s/roboto/v19/KFOmCnqEu92Fr1Mu4mxP.ttf», «params»: { «headers»: { «origin»: «https://*****.ru», «accept-encoding»: «gzip, deflate», «accept-language»: «en-US», «user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36», «accept»: «*/*», «referer»: «https://fonts.googleapis.com/css?family=Roboto» } } }]; res = http.batch(req); // Random sleep between 5s and 10s sleep(Math.floor(Math.random()*5+5)); }); }</span></span></code> </pre> <br></div></div><br><p>  Folgendes haben wir gesehen, als wir das Skript ausgeführt haben: Der Lastgenerator hat unserer Anwendung eine zunehmende Anzahl von Anforderungen pro Sekunde gesendet. Wir haben eine klassische Leiter, um nach maximaler / maximaler Leistung zu suchen: </p><br><img src="https://habrastorage.org/webt/ig/a_/xt/iga_xtu0manyadhs8cz_ytmj3k4.png"><br><br><p>  Dieser Generator sendet Anforderungen stapelweise und nicht gleichmäßig, wie dies bei gleichzeitigen Benutzern der Fall wäre.  Daher zeigt das Diagramm Lastspitzen, und die Gesamtleistung sieht in diesem Modus ebenfalls schlechter aus. </p><br><p>          : </p><br><img src="https://habrastorage.org/webt/zn/an/je/znanjexiyp3mkguce5d0ycw0ulc.png"><br><br><p>       ,   -      SQL-.   ,   ,   8  33 SQL-     :       ,  -,  SQL- (   ,  )      . </p><br><p>   ,  20-25    (    20 ),       — 1   .     ,     : 1  2.4   1   . </p><br><p>    ( 10   )      0.1-0.3 ,     . </p><br><h4>  ,                  . </h4></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de451218/">https://habr.com/ru/post/de451218/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de451208/index.html">"Topologische" Sortierung eines Graphen mit Zyklen</a></li>
<li><a href="../de451210/index.html">Jira Integration mit GitLab</a></li>
<li><a href="../de451212/index.html">Lichtbogenschutzsystem mit der Fähigkeit, mit einem Stromsignal zu arbeiten</a></li>
<li><a href="../de451214/index.html">Grundlagen der modernen künstlichen Intelligenz: Wie funktioniert sie und wird sie in diesem Jahr unsere Gesellschaft zerstören?</a></li>
<li><a href="../de451216/index.html">So deaktivieren Sie Windows Defender unter Windows 10 vollständig</a></li>
<li><a href="../de451220/index.html">Technische Details des jüngsten Firefox-Erweiterungsabsturzes</a></li>
<li><a href="../de451222/index.html">Ich bin kein Ingenieur bei Mama</a></li>
<li><a href="../de451224/index.html">Nachrichten der Woche: Sammler wollen Zugang zu russischen Handys, neuem Linux 5.1-Kernel, Samsung-Datenleck</a></li>
<li><a href="../de451226/index.html">Neues Leben alter Spiele: das offenste Quellverzeichnis der Quellports (Java + PHP)</a></li>
<li><a href="../de451230/index.html">Fünf Fehler, die Menschen bei der Vorbereitung auf die US-Arbeitsmigration machen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>