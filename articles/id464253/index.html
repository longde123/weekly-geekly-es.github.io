<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛷️ 👩🏻‍🌾 💇🏼 Berhenti menggunakan datetime ⏺️ 🤛 🤽🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Khusus untuk siswa kursus "Pengembang PHP Backend", mereka menyiapkan terjemahan artikel yang menarik tentang efek samping alat populer. 




 Bekerja...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Berhenti menggunakan datetime</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/464253/">  <i>Khusus untuk siswa kursus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Pengembang PHP Backend", mereka</a> menyiapkan terjemahan artikel yang menarik tentang efek samping alat populer.</i> <br><br><img src="https://habrastorage.org/webt/3f/bc/2i/3fbc2i9itnrkv7ac4dt2102doxa.png"><br><br><hr><br>  Bekerja dengan tanggal dan waktu dalam PHP kadang-kadang menjengkelkan karena menyebabkan bug yang tidak terduga dalam kode: <br><br><pre><code class="php hljs">$startedAt = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DateTime(<span class="hljs-string"><span class="hljs-string">'2019-06-30 10:00:00'</span></span>); $finishedAt = $startedAt-&gt;add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DateInterval(<span class="hljs-string"><span class="hljs-string">'PT3M'</span></span>)); var_dump($startedAt-&gt;format(<span class="hljs-string"><span class="hljs-string">'Ymd H:i:s'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">//2019-06-30 10:03:00 var_dump($finishedAt-&gt;format('Ymd H:i:s')); //2019-06-30 10:03:00</span></span></code> </pre> <br>  Baik fungsi <code>$startdate</code> dan <code>$finishdate</code> terburu-buru selama tiga menit, karena metode seperti <code>add ()</code> , <code>sub()</code> atau <code>modify()</code> juga memodifikasi objek DateTime yang dipanggil sebelum mengembalikannya.  Contoh di atas, tentu saja, menunjukkan perilaku yang tidak diinginkan. <br><br>  Kami dapat memperbaiki kesalahan ini dengan menyalin objek yang dirujuk sebelum berinteraksi dengannya, misalnya: <a name="habracut"></a><br><br><pre> <code class="php hljs">$startedAt = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DateTime(<span class="hljs-string"><span class="hljs-string">'2019-06-30 10:00:00'</span></span>); $finishedAt = <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> $startedAt; $finishedAt-&gt;add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DateInterval(<span class="hljs-string"><span class="hljs-string">'PT3M'</span></span>));</code> </pre> <br>  Setiap kali saya menemukan klon dalam kode PHP, baunya seperti retas arsitektur kode gagal seseorang.  Dalam hal ini, kami menggunakan kloning untuk menghindari perubahan perilaku, tetapi pada saat yang sama, kode menjadi jelek dan memperoleh banyak suara yang tidak perlu. <br><br>  Atau, masalah dapat diatasi dengan mengonversi instance <code>DateTime</code> asli ke <code>DateTimeImmutable</code> : <br><br><pre> <code class="php hljs">$startedAt = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DateTime(<span class="hljs-string"><span class="hljs-string">'2019-06-30 10:00:00'</span></span>); $finishedAt = DateTimeImmutable::createFromMutable($startedAt)-&gt;add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DateInterval(<span class="hljs-string"><span class="hljs-string">'PT3M'</span></span>));</code> </pre> <br>  Mengapa tidak menggunakan <code>DateTimeImmutable</code> dari awal? <br><br><h3>  Penggunaan DateTimeImmutable tanpa kompromi </h3><br>  Alih-alih menerapkan metode keamanan secara manual untuk mencegah perubahan tak terduga saat melewati objek tanggal / waktu, gunakan <code>DateTimeImmutable</code> , yang merangkum metode, membuat kode Anda lebih dapat diandalkan. <br><br><pre> <code class="php hljs">$startedAt = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DateTimeImmutable(<span class="hljs-string"><span class="hljs-string">'2019-06-30 10:00:00'</span></span>); $finishedAt = $startedAt-&gt;add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DateInterval(<span class="hljs-string"><span class="hljs-string">'PT3M'</span></span>)); var_dump($startedAt-&gt;format(<span class="hljs-string"><span class="hljs-string">'Ymd H:i:s'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">//2019-06-30 10:00:00 var_dump($finishedAt-&gt;format('Ymd H:i:s')); //2019-06-30 10:03:00</span></span></code> </pre> <br>  Dalam kebanyakan kasus, konsep tanggal dianggap sebagai nilai, kami membandingkan tanggal dengan nilainya, dan ketika kami mengubah tanggal, itu menjadi tanggal yang berbeda.  Semua ini berkorelasi sempurna dengan konsep <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Object Value</a> , dan salah satu karakteristik penting dari objek value adalah mereka tidak dapat diubah. <br><br><h3>  Gaya pengkodean terperinci </h3><br>  Immutability memaksa Anda untuk secara eksplisit menetapkan kembali objek <code>DateTimeImmutable</code> setiap kali Anda berinteraksi dengannya, karena itu tidak pernah mengubah nilainya, alih-alih mengembalikan salinan.  Setelah bertahun-tahun bekerja dengan DateTime dan karena mutabilitas adalah default di banyak bahasa pemrograman imperatif, sulit untuk menghilangkan kebiasaan menggunakannya dan menyesuaikan dengan gaya penulisan kode baru yang mempromosikan pemetaan ulang: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;expiresAt = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;expiresAt-&gt;modify(<span class="hljs-string"><span class="hljs-string">'+1 week'</span></span>);</code> </pre> <br>  Alat analisis statistik, seperti <i>PHPStan</i> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">salah satu ekstensinya</a> , dapat memperingatkan kita jika kita mengabaikan tugas dan menggunakan <code>DateTimeImmutable</code> salah. <br><br>  Namun, bias kognitif terhadap variabilitas ditekan ketika kita melakukan operasi aritmatika pada nilai-nilai primitif, misalnya: <code>$a + 3;</code>  .  Dalam dirinya sendiri, ini dianggap sebagai pernyataan tidak berarti yang jelas tidak memiliki penugasan kembali: <code>$a = $a + 3;</code>  atau <code>$A += 3;</code>  .  Akan lebih baik menggunakan sesuatu seperti ini dalam kasus objek nilai, bukan? <br><br>  Beberapa bahasa pemrograman memiliki gula sintaksis yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">operator</a> overloading, yang memungkinkan Anda untuk mengimplementasikan operator dalam tipe dan kelas yang ditentukan pengguna sehingga mereka berperilaku seperti tipe data primitif.  Saya tidak keberatan jika PHP meminjam trik ini dari beberapa bahasa pemrograman lain, dan kita dapat menulis sebagai berikut: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;expiresAt += <span class="hljs-string"><span class="hljs-string">'1 week'</span></span>;</code> </pre> <br><h3>  Perhitungan satu kali </h3><br>  Beberapa orang berpendapat bahwa dalam hal kinerja, lebih baik menggunakan <code>DateTime</code> , karena perhitungan dilakukan dalam area eksekusi yang sama.  Namun ini dapat diterima, jika Anda tidak perlu melakukan ratusan operasi, dan Anda ingat bahwa tautan ke objek <code>DateTimeImmutable</code> lama akan dikumpulkan oleh pengumpul sampah, dalam banyak kasus dalam praktiknya, konsumsi memori tidak akan menjadi masalah. <br><br><h3>  Perpustakaan tanggal / waktu </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Carbon</a> adalah pustaka yang sangat populer yang memperluas API Tanggal / Waktu dalam PHP, menambahkan serangkaian fitur yang kaya.  Lebih tepatnya, ia memperluas API dari kelas yang bisa berubah <code>DateTime</code> , penggunaannya yang bertentangan dengan topik artikel ini. <br><br>  Oleh karena itu, jika Anda menikmati bekerja dengan Karbon tetapi lebih memilih kekekalan, saya sarankan Anda membiasakan diri dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Chronos</a> .  Ini adalah pustaka mandiri, yang pada awalnya berbasiskan Carbon, memberikan perhatian khusus untuk menyediakan objek tanggal / waktu default yang tidak dapat diubah, tetapi juga mencakup opsi yang bisa berubah jika diperlukan. <br><blockquote>  <i>Diedit (07/05/2019): Ternyata Carbon memiliki opsi tanggal / waktu yang tidak dapat diubah, yang merupakan nilai tambah besar.</i>  <i>Namun, alasan saya lebih suka Chronos adalah bahwa, tidak seperti Carbon, ini mendorong dan mempromosikan ketidakmampuan standar, baik dalam kode dan dalam dokumentasi, dan ini adalah faktor penentu dalam konteks artikel ini.</i> </blockquote><br><h3>  Pemikiran terakhir </h3><br>  <code>DateTimeImmutable</code> pertama kali diperkenalkan kembali di PHP 5.5 kuno, tetapi yang mengejutkan saya, banyak pengembang baru menemukannya.  Gunakan <code>DateTimeImmutable</code> secara default bila memungkinkan, tetapi perlu diingat beberapa pertukaran yang saya bicarakan yang saya pikir lebih merupakan masalah kebiasaan dan perubahan pola pikir. <br><br>  Itu saja.  Secara tradisi, kami menunggu komentar Anda, teman-teman. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id464253/">https://habr.com/ru/post/id464253/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id464233/index.html">Konstruksi Chaos 2019 Hadir ...</a></li>
<li><a href="../id464235/index.html">"Slurm" sangat adiktif. Bagaimana mengubah komplotan rahasia menjadi proyek global</a></li>
<li><a href="../id464237/index.html">Pascal Tanchiki: bagaimana anak-anak diajarkan pemrograman pada tahun 90-an dan apa yang salah dengan itu</a></li>
<li><a href="../id464245/index.html">Mengkonfigurasi Pembunuh Kehabisan Memori di Linux untuk PostgreSQL</a></li>
<li><a href="../id464249/index.html">Pekerjaan jarak jauh dalam mode penuh waktu: harus mulai dari mana jika Anda belum senior</a></li>
<li><a href="../id464255/index.html">NX JAVA meetup # 14: penelitian kinerja pada pro, pro dan kontra dari Spark dalam solusi berdasarkan Cassandra</a></li>
<li><a href="../id464257/index.html">Ringkasan UX: Reboot</a></li>
<li><a href="../id464259/index.html">Cloud games: penilaian langsung atas kemampuan layanan untuk bermain di PC yang lemah</a></li>
<li><a href="../id464261/index.html">Apa itu API?</a></li>
<li><a href="../id464265/index.html">Tirani berpikir positif mengancam kesehatan dan kebahagiaan Anda</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>