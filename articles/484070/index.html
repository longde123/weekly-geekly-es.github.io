<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòú ü§¥üèæ ‚ûø C√≥mo escribimos un sistema antifraude en cuatro manos y tres cabezas üñïüèø üé£ üéç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un art√≠culo sobre la creaci√≥n de una soluci√≥n interna para detectar y prevenir transacciones fraudulentas realizadas en la banca por Internet de un ba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo escribimos un sistema antifraude en cuatro manos y tres cabezas</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484070/"><p>  Un art√≠culo sobre la creaci√≥n de una soluci√≥n interna para detectar y prevenir transacciones fraudulentas realizadas en la banca por Internet de un banco peque√±o pero muy orgulloso en Tatarst√°n.  En el art√≠culo aprender√° por qu√© y qui√©n necesita antifraude, por qu√© el desarrollo interno result√≥ ser m√°s barato que comprar una soluci√≥n preparada y a qu√© conducen un par de l√≠neas de c√≥digo antes del a√±o nuevo. </p><a name="habracut"></a><br><p>  Unas pocas palabras sobre usted: un especialista en seguridad de la informaci√≥n en una empresa de TI que accidentalmente (o quiz√°s no) result√≥ ser un Propietario del producto en el equipo para el desarrollo de soluciones antifraude.  La propia empresa de TI se dedica al desarrollo de software de banca por Internet. </p><br><h3 id="s-chego-voobsche-vse-nachalos">  ¬øC√≥mo empez√≥ todo? </h3><br><p>  Para el propio banco, todo comenz√≥ con el hecho de que el Banco Central de la Federaci√≥n de Rusia carg√≥ un borrador de <a href="http://www.cbr.ru/queries/unidbquery/file/50883%3Ffileid%3D607" rel="nofollow">enmiendas y adiciones al Reglamento N ¬∞ 382-P</a> , que dec√≠a que el banco deber√≠a evitar la transferencia de fondos sin el consentimiento del cliente.  Adem√°s, de acuerdo con la <a href="http://xn----7sbab5ahcba1bkm0aw8azb1b.su/zakonodatelstvo/normativnye-dokumenty-banka-rossii/2831-U.pdf/at_download/file" rel="nofollow">orden del Banco de Rusia No. 2831-U</a> , el banco est√° obligado a informar al Banco Central sobre todos los incidentes, incluidas las acciones de los estafadores. </p><br><p>  Para m√≠, la historia comenz√≥ con una solicitud de ayuda para la formaci√≥n de requisitos funcionales y el estudio de la integraci√≥n con el servicio de banca remota existente (en adelante, RBS).  Y lejos nos vamos ... </p><br><h3 id="vvodnye-dannye">  Datos de entrada </h3><br><p>  Antes del desarrollo, es necesario investigar el tema, estudiar desarrollos listos para usar. <del>  rastrillo </del>  navegar por el mercado. <br>  Durante el estudio, result√≥: </p><br><ul><li>  Las formas m√°s comunes de robar dinero de RBS: ingenier√≠a social y phishing </li><li>  utilizando la ingenier√≠a social, piratean el sistema bancario u obligan al cliente a transferir dinero voluntariamente </li><li>  la cantidad robada por los estafadores durante el a√±o no es tan grande, el banco gasta en la investigaci√≥n y la compensaci√≥n de aproximadamente el 10% de esta cantidad </li><li>  El costo de una soluci√≥n antifraude ya preparada excede la cantidad involucrada en el fraude entre 5 y 10 veces (sobre el costo de integrar el discurso a√∫n no ha desaparecido ...) </li><li>  es necesario informar a FinCERT, aseg√∫rese </li><li>  puedes destacar un par de casos muy frecuentes e importantes </li></ul><br><p>  Al analizar el tema del antifraude, los art√≠culos de <a href="https://habr.com/ru/users/codezombie/" class="user_link">codezombie</a> me ayudaron mucho.  Hace 4 a√±os, escribi√≥ sobre el antifraude utilizado en el comercio electr√≥nico, sobre su experiencia.  En mi caso, los detalles eran diferentes, pero la informaci√≥n era muy valiosa. </p><br><p>  En base a estas condiciones, se decidi√≥ entregar el proyecto al equipo de desarrollo involucrado en integraciones y resoluci√≥n de problemas de otros equipos, ya que este equipo inclu√≠a a los desarrolladores m√°s experimentados y geniales.  Desafortunadamente, en el equipo de 3 desarrolladores a lo largo del tiempo, solo quedaron dos.  Estaba comprometido con el trabajo atrasado, la formaci√≥n de requisitos, la documentaci√≥n y la organizaci√≥n de reuniones (trabajamos en scrum, pero de qu√© otra manera).  Dio la casualidad de que en el equipo 4 manos escribieron el c√≥digo y 3 cabezas resolvieron el problema. </p><br><h4 id="keysy-s-kotorymi-borolis">  Casos que se pelearon </h4><br><p>  No pienses que el banco no luch√≥ antes <del>  con maldad </del>  con estafadores  Luch√≥ con medios asequibles.  Sin embargo, hubo una tendencia a que el n√∫mero de incidentes relacionados con la pirater√≠a de RBS comenz√≥ a crecer.  Un esquema popular de 2018 fue el divorcio en los espacios abiertos de Avito: los estafadores que utilizan m√©todos de ingenier√≠a social reconocieron el n√∫mero de tarjeta y, en el di√°logo, reconocieron los SMS para ingresar al RB.  Por lo tanto, recibieron acceso completo a la banca por Internet de un cliente en particular.  En 2019, los estafadores comenzaron a llamar a los clientes en nombre de los servicios de seguridad del banco, amenazando con perder todo el dinero, descubrieron los detalles de inicio de sesi√≥n o los instaron a transferir todos los fondos a una "cuenta segura". </p><br><p>  El objetivo principal del equipo de desarrollo era crear un mecanismo para identificar nuevos dispositivos de clientes y detener transacciones financieras sospechosas.  ¬øPor qu√© exactamente nuevos dispositivos?  Los an√°lisis han demostrado que la mayor√≠a de las veces obtienen acceso a la banca remota a trav√©s de un tel√©fono inteligente para recibir c√≥digos de confirmaci√≥n a trav√©s de notificaciones PUSH, en lugar de mensajes SMS. </p><br><p>  Adem√°s, FinCERT comenz√≥ a enviar listas de detalles involucrados en operaciones fraudulentas, es decir, tuvieron que ser bloqueados. </p><br><h3 id="razrabotka-i-integraciya-v-antifrode">  Desarrollo e integraci√≥n en antifraude </h3><br><p><img src="https://habrastorage.org/webt/ek/k5/du/ekk5duwhsj_9eifm2q5dmaudvx8.jpeg"></p><br><blockquote>  Ten√≠amos 2 programadores .NET geniales, una arquitectura de microservicio de RBS, una API REST, una docena de listas negras de varias formas y muchas integraciones de todo tipo y colores, y no hab√≠a probadores ni un ingeniero devops.  No es que fuera una reserva necesaria para protegerse de todos los estafadores.  Pero si a√∫n necesita hacerlo, no se detendr√°.  Lo √∫nico que me caus√≥ preocupaci√≥n fueron los falsos positivos.  No hay nada m√°s indefenso, irresponsable y mimado que el operador antifraude que vol√≥ 20 boletos en 5 minutos.  Sab√≠a que tarde o temprano nos encontrar√≠amos con esto. </blockquote><p>  En general, no hab√≠a nada malo con la integraci√≥n.  SLA ha establecido un l√≠mite de 3 segundos para responder a las solicitudes.  Por el momento, el tiempo de respuesta promedio es de 0.3 segundos.  La arquitectura de microservicios facilit√≥ la integraci√≥n con la soluci√≥n existente al agregar tres l√≠neas para enviar una solicitud al microservicio antifraude.  La verificaci√≥n se lleva a cabo antes de la confirmaci√≥n por SMS o notificaci√≥n PUSH. </p><br><p>  <em>Un peque√±o boceto de la arquitectura de la soluci√≥n:</em> <br><img src="https://habrastorage.org/webt/5l/p1/0s/5lp10stholmhp8004vfq82weurw.jpeg"></p><br><p>  En la primera etapa de desarrollo, se estableci√≥ el objetivo: verificar dos condiciones importantes.  En primer lugar, el dispositivo desde el que se intenta la transacci√≥n es nuevo para el cliente o es de confianza.  En segundo lugar, si los accesorios no est√°n en las listas negras.  Estas dos condiciones son suficientes para bloquear el 70% de los incidentes, por lo dem√°s, se requiere m√°s informaci√≥n, por ejemplo, si hubo inicio de sesi√≥n por nombre de usuario / contrase√±a, o por n√∫mero de tarjeta, desde qu√© pa√≠s ingres√≥ el RBS, etc. </p><br><p>  Para aplicar la verificaci√≥n, no necesita tantos datos: un identificador √∫nico del cliente, un identificador de su dispositivo (creado en los propios clientes - aplicaciones m√≥viles y bibliotecas JS en el sitio), la cantidad de transferencia, detalles de transferencia.  En base a estos datos, se toma la decisi√≥n de permitir o bloquear la operaci√≥n.  Tan pronto como todo el sistema funcion√≥ correctamente en la operaci√≥n industrial, el equipo pas√≥ a la siguiente etapa.  Hay listas blancas y carga autom√°tica de listas de FinCERT.  Por el momento, el env√≠o de informes sobre incidentes al propio FinCERT a trav√©s de la API se depura (esta es una larga historia separada). </p><br><p>  En la actualidad, se han verificado los siguientes pagos en el sistema antifraude: pagos P2P por n√∫mero de tarjeta, reposici√≥n de un n√∫mero de tel√©fono, transferencia por detalles, reposici√≥n de billeteras electr√≥nicas.  Los estafadores a menudo transfieren 2,000-3,000 rublos a n√∫meros telef√≥nicos o billeteras.  En el caso de las tarjetas, generalmente las cantidades son cercanas a la suma de todos los fondos disponibles del cliente.  Adem√°s de las comprobaciones, se cre√≥ una p√°gina para operadores antifraude, es imposible hacer que un sistema sea completamente aut√≥nomo: se necesita una persona para monitorear eventos, investigar incidentes, bloquear / desbloquear, crear informes sobre el sistema.  Es dif√≠cil crear un sitio cuando hay dos desarrolladores de back-end en un equipo.  Sin embargo, nunca es demasiado tarde para aprender (¬°es genial cuando hay especialistas en forma de T en el equipo!). </p><br><p>  Al principio, al planificar y analizar, hab√≠a muchas ideas sobre la introducci√≥n del aprendizaje autom√°tico, las reglas din√°micas y los antivirus dentro del cliente RBS.  Sin embargo, a juzgar por la experiencia de los proveedores y otros bancos, m√°s de la mitad de los casos pueden cerrarse aplicando reglas est√°ticas.  Todos los dem√°s m√©todos requieren grandes recursos y no son tan efectivos.  Por eso, un equipo de dos desarrolladores y un analista (que considero que soy) es suficiente para implementar las medidas m√≠nimas de protecci√≥n y los requisitos de los reguladores. </p><br><h3 id="bol">  Dolor </h3><br><p>  La regla b√°sica en el desarrollo de antifraude: no hacer da√±o.  Cualquier cambio y nuevos m√©todos deben probarse primero en la prueba, luego en la batalla en el modo de monitoreo para asegurarse de que no haya problemas.  En el peor de los casos, los errores pueden conducir a p√©rdidas financieras y p√©rdida de la lealtad del cliente.  En nuestro caso, el error provoc√≥ el sufrimiento de los operadores que investigan y administran el sistema antifraude. </p><br><p>  Era tarde, en la v√≠spera de A√±o Nuevo.  El sistema implement√≥ la verificaci√≥n no solo de dispositivos m√≥viles, sino tambi√©n de navegadores de clientes.  Usando <a href="https://habr.com/ru/post/104725/">EverCookie</a> .  Los desarrolladores incluyeron la funci√≥n, pero no la probaron, ya que la biblioteca no se introdujo en los frentes.  Solo el √∫ltimo d√≠a h√°bil de 2019, el programador front-end decidi√≥ verter la rama en el producto (bueno, ¬°no deje lo mismo para el pr√≥ximo a√±o!).  Debido a esto, durante el fin de semana de A√±o Nuevo, los operadores antifraude acumularon mucho trabajo en forma de falsos positivos del sistema.  Esto no se puede decir que fue cr√≠tico, sin embargo, los operadores lamentan un poco ... despu√©s de todo, el trabajo se hizo 5 veces m√°s de lo que era antes de que se vertiera el cambio. </p><br><h3 id="itogi">  Resumen </h3><br><p>  En menos de un a√±o, un equipo muy peque√±o implement√≥ el sistema antifraude para la banca por Internet.  Desafortunadamente, todav√≠a hay mucho trabajo.  Despu√©s de hablar con representantes de bancos y proveedores en el foro Antifraud Russia, qued√≥ claro que los estafadores encuentran nuevas formas cada a√±o, no puede relajarse en esta √°rea. </p><br><p>  Si es interesante, escribir√© m√°s sobre soluciones de software, an√°lisis de mercado y c√≥mo implementar Scrum en un equipo de 3 personas. </p></div></div><p>Source: <a href="https://habr.com/ru/post/484070/">https://habr.com/ru/post/484070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../484056/index.html">¬øSu proyecto realmente necesita pruebas?</a></li>
<li><a href="../484062/index.html">Aprendiendo ingl√©s por MEMASICS</a></li>
<li><a href="../484064/index.html">¬øC√≥mo preparar un juego para la localizaci√≥n? 10 reglas b√°sicas</a></li>
<li><a href="../484066/index.html">Dinero vs equipo. No son los aspectos m√°s obvios de la relaci√≥n de empresarios, fundadores e inversores.</a></li>
<li><a href="../484068/index.html">gRPC como protocolo de comunicaci√≥n entre servicios. Informe Yandex</a></li>
<li><a href="../484072/index.html">5. Fortinet Getting Started v6.0. NAT</a></li>
<li><a href="../484076/index.html">D√≥nde almacenar la criptomoneda: impuestos de las criptomonedas en diferentes pa√≠ses</a></li>
<li><a href="../484084/index.html">1C-Bitrix y un intento de presentarlo</a></li>
<li><a href="../484088/index.html">Desfile de contrase√±as (an√°lisis de ~ 5 mil millones de contrase√±as de fugas)</a></li>
<li><a href="../484090/index.html">Nueva infraestructura de TI para el centro de datos de correos de Rusia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>