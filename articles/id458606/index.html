<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏢 ✌🏽 🤛🏻 Jalankan OpenVPN di Docker dalam 2 detik 🤦🏿 🏂🏿 🐨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, warga Habrovsk! Pernahkah Anda mengalami situasi di mana Anda benar-benar ingin melakukan perjalanan ke kota, negara, atau benua lain? Saya memi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jalankan OpenVPN di Docker dalam 2 detik</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458606/">  Halo, warga Habrovsk!  Pernahkah Anda mengalami situasi di mana Anda benar-benar ingin melakukan perjalanan ke kota, negara, atau benua lain?  Saya memiliki kebutuhan seperti itu cukup sering, sehingga kesempatan untuk memiliki server VPN saya sendiri, yang dapat dimulai di mana saja, dalam beberapa detik, cukup akut.Pada artikel ini saya ingin berbicara tentang proyek saya, yang saya rencanakan ketika saya mencari solusi yang sudah jadi, dalam hal ini, buruh pelabuhan sebuah gambar yang memungkinkan Anda untuk dengan cepat meningkatkan server OpenVPN, dengan pengaturan minimum dan tingkat keamanan yang dapat diterima. <p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/118/940/919/11894091908f95b1d8f42980f553fa10.png"></div><p></p><br><a name="habracut"></a><h3>  Latar belakang </h3> Kemampuan untuk menjalankan layanan pada mesin apa pun: apakah itu server fisik, atau server pribadi virtual, atau, secara umum, ruang kontainer di dalam sistem manajemen wadah lain - sangat penting.  Pandangan saya langsung jatuh pada Docker.  Pertama, layanan ini semakin populer, dan karena itu, semakin banyak penyedia menyediakan solusi turnkey dengan pra-instalasinya;  kedua - ada repositori terpusat dari gambar, dari mana Anda dapat mengunduh dan memulai layanan dengan satu perintah di terminal.  Gagasan bahwa proyek seperti itu seharusnya sudah ada, mengunjungi saya dan saya terus mencari.  Tetapi, sebagian besar proyek yang saya temukan terlalu rumit (perlu membuat wadah untuk penyimpanan data permanen dan menjalankan wadah beberapa kali dengan aplikasi dengan parameter yang berbeda), baik tanpa dokumentasi yang waras, atau benar-benar ditinggalkan. Tidak menemukan apa pun yang dapat diterima, saya mulai kerjakan proyek Anda.  Menjelang malam tanpa tidur mempelajari dokumentasi, menulis kode dan debugging, tetapi pada akhirnya, layanan saya melihat cahaya dan bermain dalam semua warna panel LED monokrom pada router.  Jadi, tolong cinta dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">nikmatilah</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Docker-OpenVPN</a> .  Saya bahkan datang dengan logo (di atas, di depan potongan), tetapi jangan menilai dengan ketat, karena saya bukan seorang desainer (sudah). Ketika saya mengimplementasikan proyek ini, saya fokus pada kecepatan penyebaran, pengaturan minimum dan tingkat keamanan yang dapat diterima.  Dengan coba-coba, saya menemukan keseimbangan optimal kriteria ini, meskipun di beberapa tempat saya harus mengorbankan kecepatan penyebaran untuk keamanan, dan saya harus membayar portabilitas untuk pengaturan minimum: dalam konfigurasi saat ini, wadah yang pernah dibuat pada satu server tidak dapat ditransfer dan dijalankan pada yang lain.  Misalnya, semua sertifikat klien dan server dihasilkan ketika layanan dimulai dan ini membutuhkan waktu sekitar 2 detik.  Namun, pembuatan file Defy Hellman harus dihapus dalam waktu pembuatan: dibuat selama pembuatan gambar buruh pelabuhan dan dapat bertahan hingga 10 menit.  Saya ingin sekali menerima audit keamanan dari solusi semacam itu dari komunitas yang dihormati. <h3>  Luncurkan </h3>  Untuk memulai layanan kami memerlukan beberapa hal: <ol><li>  Server: fisik atau virtual.  Secara teoritis, Anda dapat berjalan dalam mode docker-in-docker, tetapi saya belum melakukan pengujian ekstensif terhadap opsi ini; </li><li>  Sebenarnya buruh pelabuhan.  Banyak penyedia hosting menyediakan solusi siap pakai dengan Docker "on board"; </li><li>  Alamat IP publik. </li></ol>  Jika semua detail sudah ada, maka kami tetap menjalankan perintah berikut di konsol server Anda: <pre><code class="bash hljs">docker run --<span class="hljs-built_in"><span class="hljs-built_in">cap</span></span>-add=NET_ADMIN \ -it -p 1194:1194/udp -p 80:8080/tcp \ -e HOST_ADDR=$(curl -s https://api.ipify.org) \ alekslitvinenk/openvpn</code> </pre>  Pembaca yang penuh perhatian dapat memperhatikan fakta bahwa alamat IP server secara otomatis ditentukan menggunakan <i>ipify.org</i> .  Jika karena alasan tertentu ini tidak berhasil, maka Anda dapat menentukan alamat secara manual. Jika semua langkah sebelumnya selesai dengan benar, maka kita akan melihat sesuatu yang serupa di konsol: <pre> <code class="bash hljs">Sun Jun 9 08:56:11 2019 Initialization Sequence Completed Sun Jun 9 08:56:12 2019 Client.ovpn file has been generated Sun Jun 9 08:56:12 2019 Config server started, download your client.ovpn config at http://example.com/ Sun Jun 9 08:56:12 2019 NOTE: After you download you client config, http server will be shut down!</code> </pre>  Kami dekat dengan tujuannya: sekarang kami perlu menyalin <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">example.com</a></i> (dalam kasus Anda akan ada alamat server Anda) dan menempelkannya ke bilah alamat browser.  Setelah Anda menekan Enter, file client.ovpn akan diunduh, dan server http itu sendiri akan dilupakan.  Jika solusi ini diragukan, maka Anda dapat menggunakan trik berikut: jalankan perintah sebelumnya dan tambahkan flag dan kata sandi <i>zp</i> .  Sekarang, jika Anda menempelkan tautan yang dibuat ke jendela browser, Anda akan menerima arsip zip dengan kata sandi. Ketika Anda memiliki file dengan konfigurasi klien, Anda dapat menggunakan klien yang sesuai.  Saya menggunakan Tunnelblick untuk Mac. <h3>  Video tutorial </h3>  Video tutorial ini berisi instruksi terperinci untuk menggunakan layanan ke DigitalOcean. <iframe width="560" height="315" src="https://www.youtube.com/embed/y5Dwakc6hMs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>  <b>NB</b> Jika Anda menganggap proyek ini bermanfaat, maka beri asterisk pada GitHub, bercabang dan beri tahu teman-teman Anda.  Kontributor dan audit keamanan juga diterima secara luas.  <b>PPS</b> Jika artikel ini mengenai Habr, maka saya berencana untuk menulis yang berikut tentang bagaimana saya meluncurkan buruh pelabuhan di pelabuhan dan buruh pelabuhan di pelabuhan, untuk apa yang saya lakukan dan apa yang terjadi. <br>  <b>EDIT1:</b> <ol><li>  Kesalahan yang diperbaiki dalam publikasi, </li><li>  Menanggapi komentar, saya memutuskan untuk menaruh informasi ini di sini: - bendera pribadi diperlukan untuk bekerja dengan iptables </li></ol><br>  <b>EDIT2:</b> <ol><li>  Perintah peluncuran gambar yang ditingkatkan: sekarang tidak memerlukan flag --privileged </li><li>  Menambahkan tautan ke panduan video berbahasa Rusia: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">youtu.be/A8zvrHsT9A0</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id458606/">https://habr.com/ru/post/id458606/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id458594/index.html">Jangan lupa untuk meningkatkan kemungkinan respons terhadap klien menggunakan permintaan berulang dalam penyeimbangan L7</a></li>
<li><a href="../id458596/index.html">Petty little joy # 6: OpenAI Gym - mainkan game dan kendalikan robot</a></li>
<li><a href="../id458598/index.html">Pengakuan sumber cahaya pada peta lingkungan</a></li>
<li><a href="../id458602/index.html">Bagaimana kami menembus Great Chinese Firewall (Bagian 1)</a></li>
<li><a href="../id458604/index.html">Mengapa dua produsen elektronik terbesar bergabung dalam proyek GPU baru</a></li>
<li><a href="../id458608/index.html">Alat Pengembang Node.js Antrian pekerjaan</a></li>
<li><a href="../id458612/index.html">Kosmos 7 tahun</a></li>
<li><a href="../id458614/index.html">Membuat hook UsePosition () reaktif untuk mendapatkan dan melacak koordinat browser</a></li>
<li><a href="../id458622/index.html">Otomasi Untuk Yang Terkecil. Bagian satu (yang setelah nol). Virtualisasi jaringan</a></li>
<li><a href="../id458624/index.html">Bagaimana kami belajar menggambar teks di atas kanvas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>