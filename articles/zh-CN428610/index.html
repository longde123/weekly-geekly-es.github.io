<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛈️ 🧜🏿 👩🏾‍🍳 等候时间的悖论，或者为什么我的公共汽车总是迟到？ 🤴🏿 👩‍👩‍👧‍👧 ✉️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="来源 ：Wikipedia许可CC-BY-SA 3.0 

 如果您经常乘坐公共交通工具旅行，您可能会遇到这种情况： 

 你停下来。 据记载，公交车每10分钟运行一次。 注意时间...终于，在11分钟后，公交车到达了，并产生了一个想法：为什么我总是不走运？ 
 从理论上讲，如果公交车每10分钟到达...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>等候时间的悖论，或者为什么我的公共汽车总是迟到？</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428610/"><img src="https://habrastorage.org/getpro/habr/post_images/349/844/4f8/3498444f856e32a0b6fbdb7877ac5610.jpg"><br>  <i><font color="gray"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">来源</a> ：Wikipedia许可CC-BY-SA 3.0</font></i> <br><br> 如果您经常乘坐公共交通工具旅行，您可能会遇到这种情况： <br><br><blockquote> 你停下来。 据记载，公交车每10分钟运行一次。 注意时间...终于，在11分钟后，公交车到达了，并产生了一个想法：为什么我总是不走运？ </blockquote><br> 从理论上讲，如果公交车每10分钟到达一次，而您是随机到达的，则平均等待时间应为5分钟左右。 但实际上，公交车无法按时到达，因此您可以等待更长的时间。 事实证明，通过一些合理的假设，可以得出一个惊人的结论： <br><br>  <b>当您等待平均每10分钟一班的公共汽车时，您的平均等待时间将为10分钟。</b> <br><br> 这就是有时所说<font color="red">的等待时间悖论</font> 。 <br><a name="habracut"></a><br> 我以前有一个主意，我一直想知道这是否真的是……这种“合理的假设”与现实有多少对应？ 在本文中，我们从建模和概率论的角度研究了延迟悖论，然后看了一些真实的西雅图巴士数据，以（希望）彻底解决这一悖论。 <br><br><h1> 悖论检查 </h1><br> 如果公交车恰好每十分钟一班，那么平均等待时间将是5分钟。 可以很容易地理解为什么增加公交车间隔的间隔会增加平均等待时间。 <br><br> 等待时间悖论是一种更普遍的现象的特殊情况- <i>检查悖论</i> ，在艾伦·唐尼<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">（</a> Allen Downey <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">）的</a>明智文章<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">“我们周围的检查悖论”</a>中进行了详细讨论。 <br><br> 简而言之，每当观察数量的概率与观察到的数量相关时，就会出现检查悖论。 艾伦举了一个关于大学生平均班级规模的调查示例。 尽管学校确实说出了一组中30名学生的平均人数， <i>但从学生的角度来看</i> ，平均组人数要大得多。 原因是在大班中（自然地）有更多的学生，这在他们的调查中显示出来。 <br><br> 对于声明的10分钟间隔的公交时刻表，有时到达之间的间隔大于10分钟，有时更短。 而且，如果您在随机的时间停下来，那么遇到间隔的时间要比间隔的时间短。 因此，合乎逻辑的是， <i>等待</i>时间间隔之间的平均时间间隔要比总线之间的平均时间间隔长，因为更长的时间间隔在样本中更为常见。 <br><br> 但是延迟悖论提出了一个更强有力的声明：如果平均总线间隔为 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhgBw2pp34Wf_2XkL46iPjOVNvxjNQ#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> N </script> 分钟， <i>旅客</i>平均等待时间<i>为</i> <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mn" id="MJXp-Span-4">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.226ex" height="2.057ex" viewBox="0 -780.1 1389 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhgBw2pp34Wf_2XkL46iPjOVNvxjNQ#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhgBw2pp34Wf_2XkL46iPjOVNvxjNQ#MJMATHI-4E" x="500" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> 2N </script> 分钟。 这是真的吗？ <br><br><h1> 延迟模拟 </h1><br> 为了使自己信服，我们首先模拟了平均在10分钟内到达的公交车流量。 为了提高准确性，请抽样：一百万辆公交车（或大约19年的全天候10分钟流量）： <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np N = <span class="hljs-number"><span class="hljs-number">1000000</span></span> <span class="hljs-comment"><span class="hljs-comment"># number of buses tau = 10 # average minutes between arrivals rand = np.random.RandomState(42) # universal random seed bus_arrival_times = N * tau * np.sort(rand.rand(N))</span></span></code> </pre> <br> 检查平均间隔是否接近 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-6"><span class="MJXp-mtext" id="MJXp-Span-7">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">u</span><span class="MJXp-mo" id="MJXp-Span-11" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-12">10</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.403ex" height="1.937ex" viewBox="0 -728.2 4048.6 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhgBw2pp34Wf_2XkL46iPjOVNvxjNQ#MJMATHI-74" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhgBw2pp34Wf_2XkL46iPjOVNvxjNQ#MJMATHI-61" x="611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhgBw2pp34Wf_2XkL46iPjOVNvxjNQ#MJMATHI-75" x="1141" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhgBw2pp34Wf_2XkL46iPjOVNvxjNQ#MJMAIN-3D" x="1991" y="0"></use><g transform="translate(3047,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhgBw2pp34Wf_2XkL46iPjOVNvxjNQ#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/post/428610/&amp;usg=ALkJrhgBw2pp34Wf_2XkL46iPjOVNvxjNQ#MJMAIN-30" x="500" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-3"> \ tau = 10 </script>  ： <br><br><pre> <code class="python hljs">intervals = np.diff(bus_arrival_times) intervals.mean()</code> </pre> <br> <code>9.9999879601518398</code> <br> <br> 现在，我们可以模拟这段时间内大量乘客到达公交车站的路程，并计算每个乘客所经历的等待时间。 将代码封装在函数中以供以后使用： <br><br><pre> <code class="hljs vhdl">def simulate_wait_times(arrival_times, rseed=<span class="hljs-number"><span class="hljs-number">8675309</span></span>, # Jenny<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> random seed n_passengers=<span class="hljs-number"><span class="hljs-number">1000000</span></span>): rand = np.random.RandomState(rseed) arrival_times = np.asarray(arrival_times) passenger_times = arrival_times.max() * rand.rand(n_passengers) # find the index <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">next</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bus</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> each simulated passenger i = np.searchsorted(arrival_times, passenger_times, <span class="hljs-literal"><span class="hljs-literal">side</span></span>=<span class="hljs-symbol"><span class="hljs-symbol">'right</span></span>') <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> arrival_times[i] - passenger_times</code> </pre> <br> 然后我们模拟等待时间并计算平均值： <br><br><pre> <code class="python hljs">wait_times = simulate_wait_times(bus_arrival_times) wait_times.mean()</code> </pre> <br> <code>10.001584206227317</code> <br> <br> 矛盾的是，平均等待时间接近10分钟。 <br><br><h1> 深入研究：概率和泊松过程 </h1><br> 如何模拟这种情况？ <br><br> 实际上，这是检验悖论的一个示例，其中观察值的概率与值本身有关。 表示为 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-13"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14">p</span><span class="MJXp-mrow" id="MJXp-Span-15"><span class="MJXp-mo" id="MJXp-Span-16" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17">T</span><span class="MJXp-mrow" id="MJXp-Span-18"><span class="MJXp-mo" id="MJXp-Span-19" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-4"> p（T）</script> 间距 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-20"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-5"> T </script> 到达巴士站时在巴士之间。 在这样的记录中，到达时间的期望值为： <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-22"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">E</span><span class="MJXp-mo" id="MJXp-Span-24" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">T</span><span class="MJXp-mo" id="MJXp-Span-26" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-28">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30">n</span><span class="MJXp-msubsup" id="MJXp-Span-31"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-34">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-33">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40">T</span><span class="MJXp-mrow" id="MJXp-Span-41"><span class="MJXp-mo" id="MJXp-Span-42" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">p</span><span class="MJXp-mrow" id="MJXp-Span-44"><span class="MJXp-mo" id="MJXp-Span-45" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46">T</span><span class="MJXp-mrow" id="MJXp-Span-47"><span class="MJXp-mo" id="MJXp-Span-48" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mrow" id="MJXp-Span-49"><span class="MJXp-mo" id="MJXp-Span-50" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52">T</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> E [T] = \ int_0 ^ \ infty T〜p（T）〜dT </script></p><br> 在先前的模拟中，我们选择了 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-53"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54">E</span><span class="MJXp-mo" id="MJXp-Span-55" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">T</span><span class="MJXp-mo" id="MJXp-Span-57" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-58" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-59">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">u</span><span class="MJXp-mo" id="MJXp-Span-63" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-64">10</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-7"> E [T] = \ tau = 10 </script> 分钟。 <br><br> 当乘客随时到达公交车站时，等待时间的可能性不仅取决于 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-65"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66">p</span><span class="MJXp-mrow" id="MJXp-Span-67"><span class="MJXp-mo" id="MJXp-Span-68" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">T</span><span class="MJXp-mrow" id="MJXp-Span-70"><span class="MJXp-mo" id="MJXp-Span-71" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-8"> p（T）</script> 而且来自 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-72"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9"> T </script>  ：间隔越大，其中的乘客越多。 <br><br> 因此，我们可以从乘客的角度写出到达时间的分布： <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-74"><span class="MJXp-msubsup" id="MJXp-Span-75"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-76" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-77" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">p</span></span></span><span class="MJXp-mrow" id="MJXp-Span-81"><span class="MJXp-mo" id="MJXp-Span-82" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-83">T</span><span class="MJXp-mrow" id="MJXp-Span-84"><span class="MJXp-mo" id="MJXp-Span-85" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mtext" id="MJXp-Span-86" style="color: red;">\原</span><span class="MJXp-mrow" id="MJXp-Span-87"><span class="MJXp-mo" id="MJXp-Span-88" style="margin-left: 0.278em; margin-right: 0.278em;">始</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">T</span><span class="MJXp-mrow" id="MJXp-Span-90"><span class="MJXp-mo" id="MJXp-Span-91" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-92">p</span><span class="MJXp-mrow" id="MJXp-Span-93"><span class="MJXp-mo" id="MJXp-Span-94" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">T</span><span class="MJXp-mrow" id="MJXp-Span-96"><span class="MJXp-mo" id="MJXp-Span-97" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-10"> p_ {exp}（T）\原始T〜p（T）</script></p><br> 比例常数由分布的归一化得出： <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-98"><span class="MJXp-msubsup" id="MJXp-Span-99"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-100" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-101" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">p</span></span></span><span class="MJXp-mrow" id="MJXp-Span-105"><span class="MJXp-mo" id="MJXp-Span-106" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">T</span><span class="MJXp-mrow" id="MJXp-Span-108"><span class="MJXp-mo" id="MJXp-Span-109" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mo" id="MJXp-Span-110" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-111">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">c</span><span class="MJXp-mrow" id="MJXp-Span-116"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">T</span><span class="MJXp-mrow" id="MJXp-Span-118"><span class="MJXp-mo" id="MJXp-Span-119" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">p</span><span class="MJXp-mrow" id="MJXp-Span-121"><span class="MJXp-mo" id="MJXp-Span-122" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">T</span><span class="MJXp-mrow" id="MJXp-Span-124"><span class="MJXp-mo" id="MJXp-Span-125" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span><span class="MJXp-mrow" id="MJXp-Span-126"><span class="MJXp-mtext" id="MJXp-Span-127">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">n</span><span class="MJXp-msubsup" id="MJXp-Span-130"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-133">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-132">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">T</span><span class="MJXp-mrow" id="MJXp-Span-140"><span class="MJXp-mo" id="MJXp-Span-141" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">p</span><span class="MJXp-mrow" id="MJXp-Span-143"><span class="MJXp-mo" id="MJXp-Span-144" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">T</span><span class="MJXp-mrow" id="MJXp-Span-146"><span class="MJXp-mo" id="MJXp-Span-147" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mrow" id="MJXp-Span-148"><span class="MJXp-mo" id="MJXp-Span-149" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">T</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> p_ {exp}（T）= \ frac {T〜p（T）} {\ int_0 ^ \ infty T〜p（T）〜dT} </script></p><br> 它简化为 <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-152"><span class="MJXp-msubsup" id="MJXp-Span-153"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-155" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-156">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">p</span></span></span><span class="MJXp-mrow" id="MJXp-Span-159"><span class="MJXp-mo" id="MJXp-Span-160" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">T</span><span class="MJXp-mrow" id="MJXp-Span-162"><span class="MJXp-mo" id="MJXp-Span-163" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mo" id="MJXp-Span-164" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-165">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">c</span><span class="MJXp-mrow" id="MJXp-Span-170"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-171">T</span><span class="MJXp-mrow" id="MJXp-Span-172"><span class="MJXp-mo" id="MJXp-Span-173" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">p</span><span class="MJXp-mrow" id="MJXp-Span-175"><span class="MJXp-mo" id="MJXp-Span-176" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">T</span><span class="MJXp-mrow" id="MJXp-Span-178"><span class="MJXp-mo" id="MJXp-Span-179" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span><span class="MJXp-mrow" id="MJXp-Span-180"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">E</span><span class="MJXp-mo" id="MJXp-Span-182" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">T</span><span class="MJXp-mo" id="MJXp-Span-184" style="margin-left: 0em; margin-right: 0em;">]</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-12"> p_ {exp}（T）= \ frac {T〜p（T）} {E [T]} </script></p><br> 然后等待时间 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-185"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">E</span><span class="MJXp-mo" id="MJXp-Span-187" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">W</span><span class="MJXp-mo" id="MJXp-Span-189" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-13"> E [W] </script> 将是乘客预期间隔的一半，因此我们可以记录 <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-190"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">E</span><span class="MJXp-mo" id="MJXp-Span-192" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">W</span><span class="MJXp-mo" id="MJXp-Span-194" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-195" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-196">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">c</span><span class="MJXp-mrow" id="MJXp-Span-201"><span class="MJXp-mn" id="MJXp-Span-202">1</span></span><span class="MJXp-mrow" id="MJXp-Span-203"><span class="MJXp-mn" id="MJXp-Span-204">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-205"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206" style="margin-right: 0.05em;">E</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-207" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">p</span></span></span><span class="MJXp-mo" id="MJXp-Span-211" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">T</span><span class="MJXp-mo" id="MJXp-Span-213" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-214" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-215">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-216">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">c</span><span class="MJXp-mrow" id="MJXp-Span-220"><span class="MJXp-mn" id="MJXp-Span-221">1</span></span><span class="MJXp-mrow" id="MJXp-Span-222"><span class="MJXp-mn" id="MJXp-Span-223">2</span></span><span class="MJXp-mtext" id="MJXp-Span-224">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">n</span><span class="MJXp-msubsup" id="MJXp-Span-227"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-230">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-229">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-231">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">T</span><span class="MJXp-mrow" id="MJXp-Span-237"><span class="MJXp-mo" id="MJXp-Span-238" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-msubsup" id="MJXp-Span-239"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-241" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">p</span></span></span><span class="MJXp-mrow" id="MJXp-Span-245"><span class="MJXp-mo" id="MJXp-Span-246" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-247">T</span><span class="MJXp-mrow" id="MJXp-Span-248"><span class="MJXp-mo" id="MJXp-Span-249" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mrow" id="MJXp-Span-250"><span class="MJXp-mo" id="MJXp-Span-251" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-253">T</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-14"> E [W] = \ frac {1} {2} E_ {exp} [T] = \ frac {1} {2} \ int_0 ^ \ infty T〜p_ {exp}（T）〜dT </script></p><br> 可以用更容易理解的方式重写它： <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-254"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-255">E</span><span class="MJXp-mo" id="MJXp-Span-256" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">W</span><span class="MJXp-mo" id="MJXp-Span-258" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-259" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-260">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-261">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-263">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">c</span><span class="MJXp-mrow" id="MJXp-Span-265"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-266">E</span><span class="MJXp-mo" id="MJXp-Span-267" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-268"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269" style="margin-right: 0.05em;">T</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-270" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-271" style="margin-left: 0em; margin-right: 0em;">]</span></span><span class="MJXp-mrow" id="MJXp-Span-272"><span class="MJXp-mn" id="MJXp-Span-273">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">E</span><span class="MJXp-mo" id="MJXp-Span-275" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276">T</span><span class="MJXp-mo" id="MJXp-Span-277" style="margin-left: 0em; margin-right: 0em;">]</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-15"> E [W] = \ frac {E [T ^ 2]} {2E [T]} </script></p><br> 现在只剩下选择一种形式了 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-278"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">p</span><span class="MJXp-mrow" id="MJXp-Span-280"><span class="MJXp-mo" id="MJXp-Span-281" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">T</span><span class="MJXp-mrow" id="MJXp-Span-283"><span class="MJXp-mo" id="MJXp-Span-284" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-16"> p（T）</script> 并计算积分。 <br><br><h3>  <i>p（T）</i>的选择 </h3><br> 收到正式模型后，什么是合理的分配 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-285"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">p</span><span class="MJXp-mrow" id="MJXp-Span-287"><span class="MJXp-mo" id="MJXp-Span-288" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-289">T</span><span class="MJXp-mrow" id="MJXp-Span-290"><span class="MJXp-mo" id="MJXp-Span-291" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> p（T）</script>  ？ 我们将绘制分布图 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-292"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">p</span><span class="MJXp-mrow" id="MJXp-Span-294"><span class="MJXp-mo" id="MJXp-Span-295" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-296">T</span><span class="MJXp-mrow" id="MJXp-Span-297"><span class="MJXp-mo" id="MJXp-Span-298" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> p（T）</script> 通过绘制两次到达间隔的直方图，在我们的模拟到达范围内： <br><br><pre> <code class="python hljs">%matplotlib inline <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt plt.style.use(<span class="hljs-string"><span class="hljs-string">'seaborn'</span></span>) plt.hist(intervals, bins=np.arange(<span class="hljs-number"><span class="hljs-number">80</span></span>), density=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) plt.axvline(intervals.mean(), color=<span class="hljs-string"><span class="hljs-string">'black'</span></span>, linestyle=<span class="hljs-string"><span class="hljs-string">'dotted'</span></span>) plt.xlabel(<span class="hljs-string"><span class="hljs-string">'Interval between arrivals (minutes)'</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">'Probability density'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/webt/ht/ed/mh/htedmhiish0h3xwpaggpgbfqr30.png"><br><br> 在此，垂直虚线表示大约10分钟的平均间隔。 这非常类似于指数分布，并非偶然：我们以均匀随机数形式对公交车到达时间的仿真非常接近<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">泊松过程</a> ，对于这种过程，间隔的分布是指数的。 <br><br>  （注意：在我们的例子中，这只是一个近似指数；实际上，间隔 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-299"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> T </script> 介于 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-301"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> N </script> 在一个时间段内均匀选择的点 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-303"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304">N</span><span class="MJXp-mtext" id="MJXp-Span-305">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-306">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308">u</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> N \ tau </script> 符合<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Beta版本</a> <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-309"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310">T</span><span class="MJXp-mrow" id="MJXp-Span-311"><span class="MJXp-mo" id="MJXp-Span-312" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-313"><span class="MJXp-mo" id="MJXp-Span-314" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">N</span><span class="MJXp-mtext" id="MJXp-Span-316">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">u</span><span class="MJXp-mrow" id="MJXp-Span-320"><span class="MJXp-mo" id="MJXp-Span-321" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mtext" id="MJXp-Span-322">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">m</span><span class="MJXp-mtext" id="MJXp-Span-326">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">m</span><span class="MJXp-mrow" id="MJXp-Span-333"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">B</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">a</span></span><span class="MJXp-mo" id="MJXp-Span-338" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-339">1</span><span class="MJXp-mrow" id="MJXp-Span-340"><span class="MJXp-mo" id="MJXp-Span-341" style="margin-left: 0.278em; margin-right: 0.278em;">，</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">N</span><span class="MJXp-mo" id="MJXp-Span-343" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> T /（N \ tau）\ sim \ mathrm {Beta} [1，N] </script> 这是最大的 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-344"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-345">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> N </script> 接近 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-346"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347">T</span><span class="MJXp-mtext" id="MJXp-Span-348">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-350">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">m</span><span class="MJXp-mtext" id="MJXp-Span-352">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-354">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-358">m</span><span class="MJXp-mrow" id="MJXp-Span-359"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-360">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-361">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-362">p</span></span><span class="MJXp-mo" id="MJXp-Span-363" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-364">1</span><span class="MJXp-mrow" id="MJXp-Span-365"><span class="MJXp-mo" id="MJXp-Span-366" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-367"><span class="MJXp-mo" id="MJXp-Span-368" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-369">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-371">u</span><span class="MJXp-mo" id="MJXp-Span-372" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> T \ sim \ mathrm {Exp} [1 / / tau] </script>  。 有关更多信息，您可以阅读例如<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">StackExchange上</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">帖子</a>或<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Twitter上的该</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">主题</a> 。 <br><br> 间隔的指数分布意味着到达时间遵循泊松过程。 为了验证这种推理，我们检查了泊松过程的另一个属性的存在：在固定时间段内到达的次数是泊松分布。 为此，我们将模拟的到达时间划分为多个时间段： <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.stats <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> poisson <span class="hljs-comment"><span class="hljs-comment"># count the number of arrivals in 1-hour bins binsize = 60 binned_arrivals = np.bincount((bus_arrival_times // binsize).astype(int)) x = np.arange(20) # plot the results plt.hist(binned_arrivals, bins=x - 0.5, density=True, alpha=0.5, label='simulation') plt.plot(x, poisson(binsize / tau).pmf(x), 'ok', label='Poisson prediction') plt.xlabel('Number of arrivals per hour') plt.ylabel('frequency') plt.legend();</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/pv/y8/re/pvy8re5_x-m7h7rhivve1gbesaw.png"><br><br> 经验值和理论值的紧密对应关系使我们相信我们的解释的正确性： <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-373"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-374">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> N </script> 泊松过程很好地描述了模拟的到达时间，这意味着指数分布的间隔。 <br><br> 这意味着概率分布可以写成： <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-375"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376">p</span><span class="MJXp-mrow" id="MJXp-Span-377"><span class="MJXp-mo" id="MJXp-Span-378" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">T</span><span class="MJXp-mrow" id="MJXp-Span-380"><span class="MJXp-mo" id="MJXp-Span-381" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mo" id="MJXp-Span-382" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-383">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">c</span><span class="MJXp-mrow" id="MJXp-Span-388"><span class="MJXp-mn" id="MJXp-Span-389">1</span></span><span class="MJXp-mrow" id="MJXp-Span-390"><span class="MJXp-mtext" id="MJXp-Span-391">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-392">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">u</span></span><span class="MJXp-msubsup" id="MJXp-Span-395"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-397" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-398">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">T</span><span class="MJXp-mrow" id="MJXp-Span-400"><span class="MJXp-mo" id="MJXp-Span-401">/</span></span><span class="MJXp-mtext" id="MJXp-Span-402">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-405">u</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-26"> p（T）= \ frac {1} {\ tau} e ^ {-T / \ tau} </script></p><br> 如果将结果替换为先前的公式，我们将找到车站的乘客平均等待时间： <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-406"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-407">E</span><span class="MJXp-mo" id="MJXp-Span-408" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409">W</span><span class="MJXp-mo" id="MJXp-Span-410" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-411" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-412">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-413">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-414">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-415">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-416">c</span><span class="MJXp-mrow" id="MJXp-Span-417"><span class="MJXp-mtext" id="MJXp-Span-418">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-420">n</span><span class="MJXp-msubsup" id="MJXp-Span-421"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-422" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-424">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-423">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-427">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-429">y</span><span class="MJXp-msubsup" id="MJXp-Span-430"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431" style="margin-right: 0.05em;">T</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-432" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-433"><span class="MJXp-mo" id="MJXp-Span-434" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-msubsup" id="MJXp-Span-435"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-437" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-438">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439">T</span><span class="MJXp-mrow" id="MJXp-Span-440"><span class="MJXp-mo" id="MJXp-Span-441">/</span></span><span class="MJXp-mtext" id="MJXp-Span-442">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-443">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-444">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">u</span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-446"><span class="MJXp-mn" id="MJXp-Span-447">2</span><span class="MJXp-mtext" id="MJXp-Span-448">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-449">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450">n</span><span class="MJXp-msubsup" id="MJXp-Span-451"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-452" style="margin-right: 0.05em;">t</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mtext" id="MJXp-Span-454">&nbsp;</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mn" id="MJXp-Span-453">0</span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-455">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-456">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-459">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460">T</span><span class="MJXp-mrow" id="MJXp-Span-461"><span class="MJXp-mo" id="MJXp-Span-462" style="margin-left: 0.278em; margin-right: 0.278em;">〜</span></span><span class="MJXp-msubsup" id="MJXp-Span-463"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-464" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-465" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-466">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467">T</span><span class="MJXp-mrow" id="MJXp-Span-468"><span class="MJXp-mo" id="MJXp-Span-469">/</span></span><span class="MJXp-mtext" id="MJXp-Span-470">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-471">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473">u</span></span></span></span><span class="MJXp-mo" id="MJXp-Span-474" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-475">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-476">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-477">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-478">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479">c</span><span class="MJXp-mrow" id="MJXp-Span-480"><span class="MJXp-mn" id="MJXp-Span-481">2</span><span class="MJXp-mtext" id="MJXp-Span-482">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-483">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-484">a</span><span class="MJXp-msubsup" id="MJXp-Span-485"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-486" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-487" style="vertical-align: 0.5em;">3</span></span></span><span class="MJXp-mrow" id="MJXp-Span-488"><span class="MJXp-mn" id="MJXp-Span-489">2</span><span class="MJXp-mrow" id="MJXp-Span-490"><span class="MJXp-mo" id="MJXp-Span-491" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mtext" id="MJXp-Span-492">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-493">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-494">a</span><span class="MJXp-msubsup" id="MJXp-Span-495"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-496" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-497" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mrow" id="MJXp-Span-498"><span class="MJXp-mo" id="MJXp-Span-499" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span><span class="MJXp-mo" id="MJXp-Span-500" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-501">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-502">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-503">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-504">u</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-27"> E [W] = \ frac {\ int_0 ^ \ infty T ^ 2〜e ^ {-T / \ tau}} {2 \ int_0 ^ \ infty T〜e ^ {-T / \ tau}} = \ frac {2 \ tau ^ 3} {2（\ tau ^ 2）} = \ tau </script></p><br> 对于通过泊松过程到达的航班，预期的等待时间等于两次到达之间的平均间隔。 <br><br> 这个问题可以说是：泊松过程是一个<i>没有记忆</i>的过程，也就是说，事件的历史与下一个事件的预期时间无关。 因此，到达公共汽车站时，公共汽车的平均等待时间始终是相同的：在我们的示例中，这是10分钟，无论自上次公共汽车经过了多长时间！ 您等待了多长时间都没有关系：到下一班车的预期时间总是恰好是10分钟：在泊松过程中，您所花费的等待时间不会得到“积分”。 <br><br><h1> 现实超时 </h1><br> 如果真正的公交车到站实际上是由Poisson过程描述的，那么上面的方法很好，但是是这样吗？ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/779/e4c/2c7/779e4c2c71ede6d1e7708035d37b3fd4.png"><br>  <i><font color="gray">资料来源： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">西雅图公共交通计划</a></font></i> <br><br> 让我们尝试确定等待时间的悖论如何与现实保持一致。 为此，我们<a href="">将</a>在此处检查一些可下载的数据： <a href="">arrival_times.csv</a> （3 MB CSV文件）。 该数据集包含西雅图市中心第3和派<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">克巴士站的RapidRide</a>巴士C，D和E的计划到达时间和实际到达时间。 该数据记录在2016年第二季度（非常感谢华盛顿州运输中心的Mark Hallenback提供了此文件！）。 <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd df = pd.read_csv(<span class="hljs-string"><span class="hljs-string">'arrival_times.csv'</span></span>) df = df.dropna(axis=<span class="hljs-number"><span class="hljs-number">0</span></span>, how=<span class="hljs-string"><span class="hljs-string">'any'</span></span>) df.head()</code> </pre> <br><table border="1"><thead><tr><th></th><th>  OPD_DATE </th><th>  VEHICLE_ID </th><th>  RTE </th><th> 目录 </th><th>  TRIP_ID </th><th>  STOP_ID </th><th>  STOP_NAME </th><th>  SCH_STOP_TM </th><th>  ACT_STOP_TM </th></tr></thead><tbody><tr><th>  0 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td> 小号 </td><td>  30908177 </td><td>  431 </td><td>  3RD AVE＆PIKE ST（431） </td><td>  01:11:57 </td><td>  01:13:19 </td></tr><tr><th>  1个 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td> 小号 </td><td>  30908033 </td><td>  431 </td><td>  3RD AVE＆PIKE ST（431） </td><td>  23:19:57 </td><td>  23:16:13 </td></tr><tr><th>  2 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td> 小号 </td><td>  30908028 </td><td>  431 </td><td>  3RD AVE＆PIKE ST（431） </td><td>  21:19:57 </td><td>  21:18:46 </td></tr><tr><th>  3 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td> 小号 </td><td>  30908019 </td><td>  431 </td><td>  3RD AVE＆PIKE ST（431） </td><td>  19:04:57 </td><td>  19:01:49 </td></tr><tr><th>  4 </th><td>  2016-03-26 </td><td>  6201 </td><td>  673 </td><td> 小号 </td><td>  30908252 </td><td>  431 </td><td>  3RD AVE＆PIKE ST（431） </td><td>  16:42:57 </td><td>  16:42:39 </td></tr></tbody></table><br> 我选择了RapidRide数据，包括因为在一天中大部分时间里公交车以10-15分钟的固定间隔运行，更不用说我是C线的常客。 <br><br><h3> 数据清理 </h3><br> 首先，我们将进行一些数据清理以将其转换为方便的视图： <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># combine date and time into a single timestamp df['scheduled'] = pd.to_datetime(df['OPD_DATE'] + ' ' + df['SCH_STOP_TM']) df['actual'] = pd.to_datetime(df['OPD_DATE'] + ' ' + df['ACT_STOP_TM']) # if scheduled &amp; actual span midnight, then the actual day needs to be adjusted minute = np.timedelta64(1, 'm') hour = 60 * minute diff_hrs = (df['actual'] - df['scheduled']) / hour df.loc[diff_hrs &gt; 20, 'actual'] -= 24 * hour df.loc[diff_hrs &lt; -20, 'actual'] += 24 * hour df['minutes_late'] = (df['actual'] - df['scheduled']) / minute # map internal route codes to external route letters df['route'] = df['RTE'].replace({673: 'C', 674: 'D', 675: 'E'}).astype('category') df['direction'] = df['DIR'].replace({'N': 'northbound', 'S': 'southbound'}).astype('category') # extract useful columns df = df[['route', 'direction', 'scheduled', 'actual', 'minutes_late']].copy() df.head()</span></span></code> </pre> <br><table border="1"><thead><tr><th></th><th> 路线 </th><th> 方向 </th><th> 图表 </th><th> 事实 到达 </th><th> 迟滞（分钟） </th></tr></thead><tbody><tr><th>  0 </th><td>  ç </td><td> 南边 </td><td>  2016-03-26 01:11:57 </td><td>  2016-03-26 01:13:19 </td><td>  1.366667 </td></tr><tr><th>  1个 </th><td>  ç </td><td> 南边 </td><td>  2016-03-26 23:19:57 </td><td>  2016-03-26 23:16:13 </td><td>  -3.733333 </td></tr><tr><th>  2 </th><td>  ç </td><td> 南边 </td><td>  2016-03-26 21:19:57 </td><td>  2016-03-26 21:18:46 </td><td>  -1.183333 </td></tr><tr><th>  3 </th><td>  ç </td><td> 南边 </td><td>  2016-03-26 19:04:57 </td><td>  2016-03-26 19:01:49 </td><td>  -3.133333 </td></tr><tr><th>  4 </th><td>  ç </td><td> 南边 </td><td>  2016-03-26 16:42:57 </td><td>  2016-03-26 16:42:39 </td><td>  -0.300000 </td></tr></tbody></table><br><h1> 公共汽车多晚？ </h1><br> 该表中有6个数据集：每个路线C，D和E的南北方向。为了了解它们的特性，让我们为这6个路线中的每一个建立实际减去计划到达时间的直方图： <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> seaborn <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> sns g = sns.FacetGrid(df, row=<span class="hljs-string"><span class="hljs-string">"direction"</span></span>, col=<span class="hljs-string"><span class="hljs-string">"route"</span></span>) g.map(plt.hist, <span class="hljs-string"><span class="hljs-string">"minutes_late"</span></span>, bins=np.arange(<span class="hljs-number"><span class="hljs-number">-10</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>)) g.set_titles(<span class="hljs-string"><span class="hljs-string">'{col_name} {row_name}'</span></span>) g.set_axis_labels(<span class="hljs-string"><span class="hljs-string">'minutes late'</span></span>, <span class="hljs-string"><span class="hljs-string">'number of buses'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/webt/0o/2e/rn/0o2ernq4wvnrkfbmz3si2ryup7q.png"><br><br> 合理的假设是，公交车在路线的起点更接近时间表，而在路线终点则偏离更多。 数据证实了这一点：我们在南部路线C以及在北部D和E处的停靠站靠近路线的起点，并且方向相反，距离最终目的地不远。 <br><br><h3> 计划和观察间隔 </h3><br> 查看这六个路线的已观察到的和计划的公交车间隔。 让我们从Pandas中的<code>groupby</code>函数开始计算这些间隔： <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compute_headway</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(scheduled)</span></span></span><span class="hljs-function">:</span></span> minute = np.timedelta64(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'m'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> scheduled.sort_values().diff() / minute grouped = df.groupby([<span class="hljs-string"><span class="hljs-string">'route'</span></span>, <span class="hljs-string"><span class="hljs-string">'direction'</span></span>]) df[<span class="hljs-string"><span class="hljs-string">'actual_interval'</span></span>] = grouped[<span class="hljs-string"><span class="hljs-string">'actual'</span></span>].transform(compute_headway) df[<span class="hljs-string"><span class="hljs-string">'scheduled_interval'</span></span>] = grouped[<span class="hljs-string"><span class="hljs-string">'scheduled'</span></span>].transform(compute_headway)</code> </pre> <br><pre> <code class="python hljs">g = sns.FacetGrid(df.dropna(), row=<span class="hljs-string"><span class="hljs-string">"direction"</span></span>, col=<span class="hljs-string"><span class="hljs-string">"route"</span></span>) g.map(plt.hist, <span class="hljs-string"><span class="hljs-string">"actual_interval"</span></span>, bins=np.arange(<span class="hljs-number"><span class="hljs-number">50</span></span>) + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) g.set_titles(<span class="hljs-string"><span class="hljs-string">'{col_name} {row_name}'</span></span>) g.set_axis_labels(<span class="hljs-string"><span class="hljs-string">'actual interval (minutes)'</span></span>, <span class="hljs-string"><span class="hljs-string">'number of buses'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/webt/ke/ny/ao/kenyaoyjnxeppoyligelobkrud8.png"><br><br> 已经很明显，结果与我们的模型的指数分布并不十分相似，但这仍然没有说明什么：分布可能受到图中不一致间隔的影响。 <br><br> 让我们以计划的而不是观察的到达间隔重复图的构造： <br><br><pre> <code class="python hljs">g = sns.FacetGrid(df.dropna(), row=<span class="hljs-string"><span class="hljs-string">"direction"</span></span>, col=<span class="hljs-string"><span class="hljs-string">"route"</span></span>) g.map(plt.hist, <span class="hljs-string"><span class="hljs-string">"scheduled_interval"</span></span>, bins=np.arange(<span class="hljs-number"><span class="hljs-number">20</span></span>) - <span class="hljs-number"><span class="hljs-number">0.5</span></span>) g.set_titles(<span class="hljs-string"><span class="hljs-string">'{col_name} {row_name}'</span></span>) g.set_axis_labels(<span class="hljs-string"><span class="hljs-string">'scheduled interval (minutes)'</span></span>, <span class="hljs-string"><span class="hljs-string">'frequency'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/webt/sy/fl/78/syfl78sw0-kq5yvdddbhiquueyi.png"><br><br> 这表明公交车在一周中以不同的间隔运行，因此我们无法使用公交车站的实际信息来估算等待时间悖论的准确性。 <br><br><h3> 建立统一的时间表 </h3><br> 尽管官方时间表没有给出统一的时间间隔，但是有一些特定的时间间隔，其中有大量的公交车：例如，向北行驶的大约2000辆E线公交车，计划的间隔时间为10分钟。 为了找出延迟悖论是否适用，让我们将数据分组为路线，方向和计划的时间间隔，然后将它们重新堆叠，就好像它们是顺序发生的一样。 这应保留源数据的所有相关特征，同时便于与潜伏期悖论的预测进行直接比较。 <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stack_sequence</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># first, sort by scheduled time data = data.sort_values('scheduled') # re-stack data &amp; recompute relevant quantities data['scheduled'] = data['scheduled_interval'].cumsum() data['actual'] = data['scheduled'] + data['minutes_late'] data['actual_interval'] = data['actual'].sort_values().diff() return data subset = df[df.scheduled_interval.isin([10, 12, 15])] grouped = subset.groupby(['route', 'direction', 'scheduled_interval']) sequenced = grouped.apply(stack_sequence).reset_index(drop=True) sequenced.head()</span></span></code> </pre> <br><table border="1"><thead><tr><th></th><th> 路线 </th><th> 方向 </th><th> 日程安排 </th><th> 事实 到达 </th><th> 迟滞（分钟） </th><th> 事实 间隔 </th><th> 预定间隔 </th></tr></thead><tbody><tr><th>  0 </th><td>  ç </td><td> 北 </td><td>  10.0 </td><td>  12.400000 </td><td>  2,400,000 </td><td>  N </td><td>  10.0 </td></tr><tr><th>  1个 </th><td>  ç </td><td> 北 </td><td>  20.0 </td><td>  27.150000 </td><td>  7.150000 </td><td>  0.183333 </td><td>  10.0 </td></tr><tr><th>  2 </th><td>  ç </td><td> 北 </td><td>  30.0 </td><td>  26.966667 </td><td>  -3.033333 </td><td>  14.566667 </td><td>  10.0 </td></tr><tr><th>  3 </th><td>  ç </td><td> 北 </td><td>  40.0 </td><td>  35.516667 </td><td>  -4.483333 </td><td>  8.366667 </td><td>  10.0 </td></tr><tr><th>  4 </th><td>  ç </td><td> 北 </td><td>  50.0 </td><td>  53.583333 </td><td>  3.583333 </td><td>  18.066667 </td><td>  10.0 </td></tr></tbody></table><br> 在清除的数据上，您可以绘制公交车沿每个路线和方向的实际外观分布图，并以到达频率为单位： <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> route <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-string"><span class="hljs-string">'C'</span></span>, <span class="hljs-string"><span class="hljs-string">'D'</span></span>, <span class="hljs-string"><span class="hljs-string">'E'</span></span>]: g = sns.FacetGrid(sequenced.query(<span class="hljs-string"><span class="hljs-string">f"route == '</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{route}</span></span></span><span class="hljs-string">'"</span></span>), row=<span class="hljs-string"><span class="hljs-string">"direction"</span></span>, col=<span class="hljs-string"><span class="hljs-string">"scheduled_interval"</span></span>) g.map(plt.hist, <span class="hljs-string"><span class="hljs-string">"actual_interval"</span></span>, bins=np.arange(<span class="hljs-number"><span class="hljs-number">40</span></span>) + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) g.set_titles(<span class="hljs-string"><span class="hljs-string">'{row_name} ({col_name:.0f} min)'</span></span>) g.set_axis_labels(<span class="hljs-string"><span class="hljs-string">'actual interval (min)'</span></span>, <span class="hljs-string"><span class="hljs-string">'count'</span></span>) g.fig.set_size_inches(<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>) g.fig.suptitle(<span class="hljs-string"><span class="hljs-string">f'</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{route}</span></span></span><span class="hljs-string"> line'</span></span>, y=<span class="hljs-number"><span class="hljs-number">1.05</span></span>, fontsize=<span class="hljs-number"><span class="hljs-number">14</span></span>)</code> </pre> <br><img src="https://habrastorage.org/webt/mb/ag/op/mbagopldum2pixrhjwxcphdhpyg.png"><br><br><img src="https://habrastorage.org/webt/6k/xv/fv/6kxvfv4xzngoy2rhphq71rcpgei.png"><br><br><img src="https://habrastorage.org/webt/vq/nh/wp/vqnhwpza9or7dnazjcd07zjcm40.png"><br><br> 我们看到，对于每条路线，观察到的间隔的分布几乎都是高斯分布。 它在计划的时间间隔附近达到峰值，标准差在路线开始时较小（C为南，D / E为北）在结束时更大。 即使从视觉上看，实际到达间隔也绝对不对应于指数分布，这是等待时间悖论的主要假设。 <br><br> 我们可以使用上面使用的等待时间模拟功能来找到每条公交路线，方向和时间表的平均等待时间： <br><br><pre> <code class="python hljs">grouped = sequenced.groupby([<span class="hljs-string"><span class="hljs-string">'route'</span></span>, <span class="hljs-string"><span class="hljs-string">'direction'</span></span>, <span class="hljs-string"><span class="hljs-string">'scheduled_interval'</span></span>]) sims = grouped[<span class="hljs-string"><span class="hljs-string">'actual'</span></span>].apply(simulate_wait_times) sims.apply(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> times: <span class="hljs-string"><span class="hljs-string">"{0:.1f} +/- {1:.1f}"</span></span>.format(times.mean(), times.std()))</code> </pre> <br><pre> 路线方向预定时间间隔
 C北10.0 7.8 +/- 12.5
                       12.0 7.4 +/- 5.7
                       15.0 8.8 +/- 6.4
         南10.0 6.2 +/- 6.3
                       12.0 6.8 +/- 5.2
                       15.0 8.4 +/- 7.3
 D北10.0 6.1 +/- 7.1
                       12.0 6.5 +/- 4.6
                       15.0 7.9 +/- 5.3
         南10.0 6.7 +/- 5.3
                       12.0 7.5 +/- 5.9
                       15.0 8.8 +/- 6.5
 E北10.0 5.5 +/- 3.7
                       12.0 6.5 +/- 4.3
                       15.0 7.9 +/- 4.9
         南10.0 6.8 +/- 5.6
                       12.0 7.3 +/- 5.2
                       15.0 8.7 +/- 6.0
名称：实际，dtype：对象 </pre><br> 平均等待时间，可能是一分钟或两分钟，是计划间隔的一半以上，但不等于计划间隔，正如等待时间悖论所暗示的那样。 换句话说，确认了检查悖论，但是等待时间悖论不成立。 <br><br><h1> 结论 </h1><br> 潜伏期悖论是包括建模，概率论以及将统计假设与现实进行比较的讨论的有趣起点。 尽管我们已经确认在现实世界中，公交路线遵循某种检查悖论，但以上分析却非常令人信服：等待时间悖论的主要假设-公交车的到来遵循泊松过程的统计数据-是不合理的。 <br><br> 回想起来，这并不奇怪：泊松过程是一种无记忆的过程，它假设到达的概率完全独立于自上一次到达以来的时间。 实际上，一个管理良好的公共交通系统具有专门安排的时间表来避免这种情况：公交车在白天不会随机发车，而是根据为提高乘客运输效率而选择的时间表发车。 <br><br> 更为重要的一课是要谨慎对待任何数据分析任务的假设。 有时，泊松过程可以很好地描述到达时间数据。 但是，仅仅因为一种数据类型听起来像另一种数据类型，并不意味着一种允许的假设对于另一种肯定是有效的。 似乎正确的假设通常会得出不正确的结论。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN428610/">https://habr.com/ru/post/zh-CN428610/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN428600/index.html">特殊效果SSD或改装缺少的东西-HyperX FURY RGB驱动器评论</a></li>
<li><a href="../zh-CN428602/index.html">学习对抗策略，技巧和常识（ATT @ CK）。 企业策略。 第4部分</a></li>
<li><a href="../zh-CN428604/index.html">在线数据科学冠军</a></li>
<li><a href="../zh-CN428606/index.html">“了解系统的工作方式会导致大量黑客入侵”：Roy Beniosef在Android开发中</a></li>
<li><a href="../zh-CN428608/index.html">媒体控股与Yandex达成协议，同意删除盗版材料</a></li>
<li><a href="../zh-CN428612/index.html">JavaScript中的高阶函数：这是什么？</a></li>
<li><a href="../zh-CN428614/index.html">星期五 程序员的狂欢4.2</a></li>
<li><a href="../zh-CN428616/index.html">使用Google Apps脚本将XLS文件转换为Google Spreadsheet</a></li>
<li><a href="../zh-CN428620/index.html">如何创建Roguelike</a></li>
<li><a href="../zh-CN428624/index.html">Jeffrey Richter，Pavel Yosifovich，Greg Young和所有人。 DotNext 2018莫斯科的硬核和建筑</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>