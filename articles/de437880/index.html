<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏾‍🤝‍🧑🏼 🛳️ 🔈 Blockchain VR-Spiel mit ERC-1155-Token: Reagieren Sie 360 ​​oder Unity? 🕋 👁️ 👨🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="VR-Spiele waren für uns schon immer eine Bewunderung. Dies ist eine Art Magie in einer digitalen Hülle, die volle Wirkung des Eintauchens in eine ande...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Blockchain VR-Spiel mit ERC-1155-Token: Reagieren Sie 360 ​​oder Unity?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437880/"><p> VR-Spiele waren für uns schon immer eine Bewunderung.  Dies ist eine Art Magie in einer digitalen Hülle, die volle Wirkung des Eintauchens in eine andere Welt.  Auf allen Konferenzen erhalten VR-Projekte die größte Aufmerksamkeit, große Stände, Hunderte von Zuschauern, die in der Schlange stehen, um in ein frisch geschaffenes Universum einzutauchen.  Da es in unserem Unternehmen größtenteils nicht um Unterhaltung geht, sondern um Evolution und fortschrittliche Ansätze, haben wir uns eingehend mit der Frage befasst, wie Blockchain in einem so jungen Spieleentwickler-Genre wie VR nützlich sein kann. </p><br><p>  Die Antwort kam sofort - intelligente Verträge und der neueste Netzwerk-Token-Standard ERC1155 von Ethereum, der speziell für die Erstellung von Spielen / digitalen Assets entwickelt wurde.  ERC1155 ist ein Token, das die besten Funktionen des beliebten ERC20 und ERC721 kombiniert (technische Details finden Sie in der <a href="">Readme-Datei des Github-Repositorys</a> ).  Stellen Sie sich eine klassische Situation vor - Sie haben einen seltenen und teuren Gegenstand oder eine Haut ausgeknockt.  Wie kann man es verkaufen, damit man nicht vom Käufer getäuscht wird oder selbst nicht in der Lage ist, das Geld anderer Leute frei zu nehmen, ohne den Gegenstand zu verschenken?  Die richtige Antwort sind intelligente Verträge.  Und das ERC1155-Token ist genau das, was Sie benötigen, um solche Funktionen zu implementieren.  Ein Gegenstand kann seine eigenen Eigenschaften haben - in Form von Stärke, Schaden, Haltbarkeit, Schutz, zusätzlichem Schaden (charakteristisch für den ERC721-Token) und seinem Wert (charakteristisch für den ERC20-Token) in einer Schale - klingt dies nicht inspirierend?  Alle Spiele können sicher und einfach gespeichert, übertragen und ihre digitalen Assets verkauft werden.  Versuchen wir, dieses Problem am Beispiel eines von uns konzipierten Spielzeugs zu lösen. </p><br><p>  Wir kamen ziemlich schnell auf das Konzept - ein Analogon zum beliebten Brettspiel „Munchkin“, das in das VR-Universum übertragen wurde und intelligente Verträge für den Handel mit Gegenständen, Rüstungen und Waffen enthält, die während des Spiels ausgeschlagen wurden.  Die Wahl der Implementierungstechnologie für unsere Indie-Entwickler war nicht einfach, aber wir möchten Ihnen mehr über diese Erfahrung erzählen. </p><a name="habracut"></a><br><p>  <b>Reagiere 360</b> </p><br><p>  Da der größte Teil des Teams über umfangreiche Entwicklungserfahrung mit React verfügte, bestand der Wunsch, React-360 zur Lösung der Aufgabe auszuprobieren.  Die Beschreibung des Werkzeugs schien ziemlich funktional zu sein, daher haben wir eine Wahl in seine Richtung getroffen. </p><br><p>  <b>Installation und Beschreibung</b> </p><br><p>  Die Installation von React-360 beginnt mit der Installation der CLI mit npm, mit der Sie ein Projekt schnell und bequem über die Befehlszeile initialisieren, starten und erstellen können. </p><br><p>  Nach der Initialisierung des Projekts haben wir eine vorgefertigte Projektvorlage erhalten, in der die beiden Hauptdateien client.js und index.js sowie der Ordner static_assets sind, in dem alle aset-Dateien zum Rendern, index.html und andere Konfigurationsdateien gespeichert sind. </p><br><p>  <b>Rendern</b> </p><br><p>  Die erste Datei (client.js) enthält den Rendercode und arbeitet mit der Hauptklasse React360.  React360 verfügt über zwei Arten von Rendering-Objekten: renderToLocation, das für das Rendern eines 3D-Objekts verantwortlich ist, und renderToSurface, das für das Rendern eines 2D-Objekts verantwortlich ist.  Wir haben auch einen Controller für die Kamera definiert, der ihr Verhalten beschreibt: In unserem Fall wird die Bewegung der Kamera (als Hauptfigur) durch Drücken bestimmter Tastaturtasten beschrieben.  Dann haben wir den Standardhintergrund für das gesamte Projekt festgelegt und in der letzten Zeile React360 in das Fensterobjekt geschrieben (das ein globales Objekt für Browseranwendungen ist). </p><br><p><img src="https://habrastorage.org/webt/9o/f_/1_/9of_1_t50ihyw89xz7h2ukfemb0.png" alt="Bild"></p><br><p>  Anschließend wird die init-Methode von React360 in der Datei index.html wie folgt aufgerufen: </p><br><p><img src="https://habrastorage.org/webt/p4/fi/gt/p4figtiael1vnulddyfp-z_ercc.png" alt="Bild"></p><br><p>  In der zweiten Datei (index.js) werden die Komponenten in der Anwendung registriert, um sie zum Rendern in der Datei client.js weiter zu verwenden. </p><br><p><img src="https://habrastorage.org/webt/pf/ut/si/pfutsittizddjkex_obmcxbohac.png" alt="Bild"></p><br><p>  Das Flow-Rendering der Komponente (des Objekts) sieht also folgendermaßen aus: </p><br><p>  a) Erstellung in einer separaten Datei; <br>  b) Registrierung in index.js; <br>  c) Rendern in client.js. </p><br><p>  <b>Positionierung</b> </p><br><p>  Der nächste Moment ist die Positionierung eines Objekts in einer 3D-Ebene.  In React-360 gibt es beim Positionieren wie beim Rendern Unterschiede zwischen 3D- und 2D-Objekten.  3D-Objekte können auf zwei Arten positioniert werden. </p><br><ol><li>  Über den Ort beim Rendern. </li><li>  Über Transformieren Sie das Objekt selbst. </li></ol><br><p>  Wir haben Transform am Standardspeicherort ausgewählt, wie auf der offiziellen React-360-Website empfohlen.  Translate ist für die Positionierung in der 3D-Ebene verantwortlich. </p><br><p><img src="https://habrastorage.org/webt/ci/p2/mw/cip2mwze4ylkkpdksvhhtoyiclc.png" alt="Bild"></p><br><p>  2D-Objekte werden mithilfe des Flex-Systems wie in React Native positioniert, was in unserem Fall recht unpraktisch war: </p><br><p><img src="https://habrastorage.org/webt/g6/my/4r/g6my4ry1w96rbkpqqjlcnzdtyho.png" alt="Bild"></p><br><p>  Um die Schaltfläche rechts von der Kamera zu positionieren, mussten Sie wie in React Native eine Ansicht erstellen und ihre Breite entsprechend dem Abstand vom linken Punkt des Bildschirms zum Ort, an dem sich das Objekt befinden sollte, und die Höhe entsprechend dem Abstand vom oberen Punkt des Bildschirms zum Bereich festlegen. Wo soll das Objekt sein?  Es war auch erforderlich, bestimmte Stile so festzulegen, dass sich der interne Inhalt unten rechts in der Ansicht befand.  Infolgedessen sieht alles umständlich und unpraktisch aus. Es ist einfacher, die gleiche Übersetzung zum Platzieren solcher Objekte zu verwenden und sie als 3D-Objekte mit einer Tiefe von 0 darzustellen. </p><br><p>  <b>Objekte importieren</b> </p><br><p>  Das nächste Element ist der Import von 3D-Objekten in React-360.  Und hier ist auf den ersten Blick alles einfach und klar.  Es gibt eine Standardmodellkomponente mit einer Requisitenquelle, die ein JS-Objekt des Pfads zu den OBJ-Dateien (die Datei des Objekts selbst) und .mtl (die Materialdatei dieses Objekts) akzeptiert: </p><br><p><img src="https://habrastorage.org/webt/ci/p2/mw/cip2mwze4ylkkpdksvhhtoyiclc.png" alt="Bild"></p><br><p>  Aber auch hier gab es interessante Fallstricke.  Unter dem Strich hat die .mtl-Datei standardmäßig eine Kartentextur im .tga-Format und den vorgeschriebenen Pfad auf der Festplatte der Person, die sie entwickelt hat.  Wir mussten den Pfad zu den Dateien nicht nur manuell ändern, sondern auch in .png, da Dateien im TGA-Format nicht im Browser gerendert wurden.  Das PNG-Format ermöglichte es uns, Texturen korrekt zu rendern. </p><br><p>  <b>Beleuchtung</b> </p><br><p>  Da das Beleuchtungssystem in der Dokumentation überhaupt nicht beschrieben wurde, musste ich in den React-360-Quellcode gehen und dort etwas über Lichter finden und mir dann Beispiele ansehen, wer was tat und wie man mit diesem Zoo arbeitet.  Durch Versuch und Irrtum haben wir es herausgefunden und auf die Modelle AmbientLight, SpotLight und PointLight angewendet.  Ihre Positionierung entspricht der von 3D-Objekten, es gibt jedoch auch einen Winkel: </p><br><p><img src="https://habrastorage.org/webt/aw/tr/b3/awtrb3bxjsgrlniywnq2ohxikr0.png" alt="Bild"></p><br><p>  Das Licht traf nicht auf das Objekt zu, aber wir zogen uns nicht zurück. Nach einer langen Suche und einem Umgehen verschiedener Probleme im React-360-Repository stießen wir auf die Notwendigkeit, Requisiten richtig zu beleuchten, und erst danach begann das Licht auf das Objekt zu wirken. </p><br><p>  <b>Bewegung</b> </p><br><p>  Wir haben die Hauptkamera als Hauptdarsteller genommen, mit dem wir Bewegungen und Aktionen ausführen.  Zu diesem Zweck haben sie Controller für die Kamera geschrieben und dort die Hauptfunktion der Schnittstelle initialisiert: </p><br><p><img src="https://habrastorage.org/webt/3l/mq/xw/3lmqxwpgihssmspqpojjdj6bwtc.png" alt="Bild"></p><br><p>  die die aktuelle Position der Kamera und ihre Drehung überträgt.  Sie können mit ihnen in der Kamera arbeiten, um sie je nach Ereignis zu ändern. Wir hatten die WASD-Tasten als solches Ereignis gedrückt (wie üblich). Später wollten wir sie ersetzen, indem wir die Taste drücken und zu der Koordinate gehen, an der die Taste gedrückt wurde Ersetzen Sie es dann durch den VR-Controller.  Für eine Süßigkeit stellen sie die Bewegungsgeschwindigkeit und die Distanz ein, mit der sie arbeiten.  Wir haben eine Bewegung mit Zuckungen und einem völligen Mangel an Physik: Wir sind durch Texturen getreten, sind aus dem Rahmen geflogen usw.  In der Dokumentation wird der Physiker nicht mit dem Wort "allgemein" beschrieben (und im Prinzip wird ein ähnliches nicht "spielfreundlich" in dieser Phase des Eintauchens bekannt). </p><br><p>  <b>Fazit</b> </p><br><p>  Obwohl React-360 mit Three.js und WebGL funktioniert, ist es für die Lösung solcher Probleme völlig ungeeignet. Außerdem war es wahrscheinlich nicht für Spieleentwickler gedacht.  React-360 leistet hervorragende Arbeit mit 3D-Präsentationen, virtuellen Objekttouren, Betrachtungspanoramen usw. </p><br><p>  Aber selbst wenn Sie sich dazu verpflichten, solche Dinge in diesem technologischen Stapel zu tun, werden Sie auf Schwierigkeiten in Form einer schlechten Dokumentation stoßen, die Sie dazu zwingen wird, Stunden damit zu verbringen, eine kleine und scheinbar einfache Aufgabe zu lösen. </p><br><pre><code class="plaintext hljs">     JS,   React,     JSX,       ( ), ,  ,     React,     React Native.   -    .</code> </pre> <br><p>  <b>Einheit</b> </p><br><p>  Nach all den Qualen haben wir uns entschlossen, das zweite Werkzeug innerhalb unserer Kompetenzen einzusetzen.  Diesmal fiel die Wahl auf Unity, da das Team C # -Entwickler hat. </p><br><p>  <b>Installation und Beschreibung</b> </p><br><p>  Die Installation ist ganz einfach - banales Herunterladen und Entpacken des Distributionskits von der offiziellen Website.  Es gibt ein "aber": Unity funktioniert bisher nur unter Windows und Mac (ab Version 10).  Deshalb mussten wir von Ubuntu auf Mac umsteigen. </p><br><p>  Da Unity eine Spiel-Engine ist, die eine gute und bequeme Benutzeroberfläche enthält, wird das Projekt mit einem einfachen Klick auf die Schaltfläche erstellt. Anschließend erhalten Sie eine vollständige Vorlage der erforderlichen Dateien.  Grundsätzlich liegt alles im Ordner Assets. </p><br><p>  <b>Rendern</b> </p><br><p>  Da die Engine selbst gerendert wird, müssen Sie nichts registrieren. </p><br><p>  <b>Positionierung</b> </p><br><p>  Das Positionieren ist so einfach wie das Rendern.  Es reicht aus, das Objekt in das Feld zu ziehen und mit den Schiebereglern in der entsprechenden Form oder in einer praktischen Benutzeroberfläche zu arbeiten.  Wie beim Rendern ist die Situation so, dass nichts registriert werden musste. </p><br><p>  <b>Objekte importieren</b> </p><br><p>  Ein einfaches Drag'n'Drop, zunächst im Asset im entsprechenden Ordner, und dann eine ähnliche Operation im GUI-Feld.  Es gibt keinen Code. </p><br><p>  <b>Beleuchtung</b> </p><br><p>  Das Arbeiten mit Beleuchtung ist so einfach wie in den vorherigen Absätzen.  Das Erstellen einer neuen Beleuchtung erfolgt auf der entsprechenden Registerkarte des Projekts.  Das System wird auch in der Dokumentation ausführlich beschrieben. </p><br><p>  <b>Bewegung</b> </p><br><p>  Dies ist der erste Punkt, an dem Sie etwas codieren müssen.  Das Verhalten des Players und der Kamera während der Bewegung.  Für das Bewegungssystem haben wir das System von NavMesh und seinen Agenten verwendet.  Wir haben den Bereich umrissen, in dem Sie in der GUI gehen können, die Kamera und das Modell als Agent im Navigationssystem identifiziert.  Dann haben wir ein Skript erstellt, dies geschieht sehr einfach in der GUI: </p><br><ul><li>  Das Objekt ist ausgewählt; </li><li>  Die Schaltfläche Komponenten hinzufügen wird gedrückt. </li><li>  Wählt neues Skript aus; </li><li>  Der Name ist geschrieben. </li></ul><br><p>  Und voila - eine Standard-Skriptvorlage im Stammordner wird erstellt.  Wir mussten es nur in den Skriptordner übertragen und öffnen (standardmäßig wird es in VS geöffnet, was sehr praktisch ist).  Die Standard-Skriptvorlage verfügt über eine intuitive Benutzeroberfläche in Form von zwei Funktionen: </p><br><ul><li>  Start - wird beim Konfigurieren von Komponenten verwendet. </li><li>  Update - wird bei jedem Frame aufgerufen. </li></ul><br><p>  In der Startfunktion haben wir den Cursor in der Mitte des Bildschirms gesperrt und unsere Komponente in der entsprechenden Eigenschaft der Klasse aufgezeichnet sowie Standardparameter für die verbleibenden Eigenschaften deklariert. </p><br><p>  In der Funktion Aktualisieren haben wir die Rotationslogik des Objekts hinter dem Cursor sowie die Bewegung des Objekts per Klick geschrieben: </p><br><p><img src="https://habrastorage.org/webt/cs/ov/e0/csove0ay8yjktshjs30yarw8omk.png" alt="Bild"></p><br><p>  <b>Fazit</b> </p><br><p>  Zusätzlich zu der ziemlich offensichtlichen Schlussfolgerung über die Bequemlichkeit von Unity möchte ich darauf hinweisen, dass Sie, um an Unity zu arbeiten, überhaupt kein Programmierer sein können.  Unity bietet eine Vielzahl von Tutorials für Anfänger, die sehr einfach und übersichtlich sind, sowie eine qualitativ hochwertige, umfangreiche Dokumentation und eine lebendige, aktive Community. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de437880/">https://habr.com/ru/post/de437880/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de437868/index.html">Sicherheitswoche 05: Drucker, Kameras, 7zip und Ethik</a></li>
<li><a href="../de437870/index.html">Wie Resident Evil 2 auseinander fiel, aber Capcoms größter Hit werden konnte</a></li>
<li><a href="../de437872/index.html">Schuhmacher ohne Stiefel. Wie Schüler Phishing-E-Mails geschrieben haben</a></li>
<li><a href="../de437876/index.html">"Clouds": Was ist der Vorteil gegenüber dem Unternehmensserver?</a></li>
<li><a href="../de437878/index.html">Cybersicherheitstrends von BI.ZONE</a></li>
<li><a href="../de437882/index.html">ASML übernimmt nach dem Konkurs Mapper Lithography</a></li>
<li><a href="../de437884/index.html">Änderung des Spiels basierend auf dll-wrapper'a</a></li>
<li><a href="../de437888/index.html">Erfassen des Muskelaktivitätssignals im maschinellen Lernsystem</a></li>
<li><a href="../de437890/index.html">CNC in einer Hobbywerkstatt (Teil 1)</a></li>
<li><a href="../de437892/index.html">Übersicht über den 3D-Scanner Shining 3D FreeScan X7 / X7 +</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>