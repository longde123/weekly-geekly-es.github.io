<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßíüèæ ‚õìÔ∏è üï≥Ô∏è Automatisation pour les plus petits. Premi√®re partie (qui est apr√®s z√©ro). Virtualisation du r√©seau üçè üíØ üå§Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans la version pr√©c√©dente, j'ai d√©crit le cadre d'automatisation du r√©seau. Selon les critiques de certaines personnes, m√™me cette premi√®re approche ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Automatisation pour les plus petits. Premi√®re partie (qui est apr√®s z√©ro). Virtualisation du r√©seau</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458622/">  Dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">version pr√©c√©dente,</a> j'ai d√©crit le cadre d'automatisation du r√©seau.  Selon les critiques de certaines personnes, m√™me cette premi√®re approche du probl√®me a d√©j√† pos√© quelques questions sur les √©tag√®res.  Et cela me fait tr√®s plaisir, car notre objectif dans le cycle n'est pas de couvrir l'ansible avec des scripts Python, mais de construire un syst√®me. <br><br>  Le m√™me cadre fixe l'ordre dans lequel nous traiterons la question. <br>  Et la virtualisation du r√©seau, √† laquelle ce num√©ro est d√©di√©, ne rentre pas vraiment dans le th√®me ADSM, o√π nous analysons l'automatisation. <br><br>  Mais regardons-le sous un angle diff√©rent. <br><br>  Depuis longtemps d√©j√†, de nombreux services utilisent un m√™me r√©seau.  Dans le cas d'un op√©rateur, ce sont par exemple 2G, 3G, LTE, large bande et B2B.  Dans le cas de DC: connectivit√© pour diff√©rents clients, Internet, stockage en bloc, stockage d'objets. <br><br>  Et tous les services doivent √™tre isol√©s les uns des autres.  Il est donc apparu des r√©seaux de superposition. <br><br>  Et tous les services ne veulent pas attendre qu'une personne les configure manuellement.  Il y a donc eu des orchestrateurs et SDN. <br><br>  La premi√®re approche de l'automatisation syst√©matique du r√©seau, ou plut√¥t de certaines parties de celui-ci, a longtemps √©t√© adopt√©e et a √©t√© mise en ≈ìuvre dans de nombreux endroits: VMWare, OpenStack, Google Compute Cloud, AWS, Facebook. <br><br>  Ici, nous traitons avec lui aujourd'hui. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/b14/278/742/b142787424b1da02432df0291faaca95.jpg" width="800"></a> <br><a name="habracut"></a><br><h1>  Table des mati√®res </h1><br><ul><li>  <b>Raisons</b> </li><li>  <b>Terminologie</b> </li><li>  <b>Sous-couche - R√©seau physique</b> </li><li>  <b>Superposition - r√©seau virtuel</b> <br><br><ul><li>  Superposition avec ToR </li><li>  Superposition de l'h√¥te </li><li>  √âtude de cas: tissu de tungst√®ne <br><br><ul><li>  Communication au sein d'une machine physique </li><li>  Communication entre machines virtuelles situ√©es sur diff√©rentes machines physiques </li><li>  Sortie sur le monde ext√©rieur </li></ul><br></li></ul><br></li><li>  <b>FAQ</b> </li><li>  <b>Conclusion</b> </li><li>  <b>Liens utiles</b> </li></ul><br><hr><br><br><h1>  Raisons </h1><br>  Et puisque nous en avons parl√©, il convient de mentionner les conditions pr√©alables √† la virtualisation du r√©seau.  En fait, ce processus n'a pas commenc√© hier. <br><br>  Vous avez probablement entendu plus d'une fois que le r√©seau a toujours √©t√© la partie la plus inerte de tout syst√®me.  Et cela est vrai dans tous les sens.  Un r√©seau est la base sur laquelle tout est bas√©, et y apporter des modifications est assez difficile - les services ne tol√®rent pas lorsque le r√©seau se trouve.  Souvent, la mise hors service d'un seul n≈ìud peut ajouter la plupart des applications et affecter de nombreux clients.  C'est en partie pourquoi l'√©quipe du r√©seau peut r√©sister √† tout changement - parce que maintenant cela fonctionne ( <i>nous ne savons m√™me pas comment</i> ), mais ici nous devons configurer quelque chose de nouveau, et on ne sait pas comment cela affectera le r√©seau. <br><br>  Afin de ne pas attendre que les fournisseurs de r√©seau passent les VLAN et de ne pas enregistrer de services sur chaque n≈ìud de r√©seau, les gens ont d√©cid√© d'utiliser des superpositions - r√©seaux superpos√©s - dont il existe une grande vari√©t√©: GRE, IPinIP, MPLS, MPLS L2 / L3VPN, VXLAN, GENEVE, MPLSoverUDP, MPLSoverGRE, etc. <br><br>  Leur attrait r√©side dans deux choses simples: <br><br><ul><li>  Seuls les n≈ìuds d'extr√©mit√© sont configur√©s - vous n'avez pas besoin de toucher les n≈ìuds de transit.  Cela acc√©l√®re consid√©rablement le processus et vous permet m√™me parfois d'exclure le service d'infrastructure r√©seau du processus d'introduction de nouveaux services. </li><li>  La charge est cach√©e profond√©ment √† l'int√©rieur des en-t√™tes - les n≈ìuds de transit n'ont besoin de rien savoir √† ce sujet, sur l'adressage sur les h√¥tes, les routes du r√©seau impos√©.  Et cela signifie que vous devez stocker moins d'informations dans les tableaux, alors prenez un appareil plus simple / moins cher. </li></ul><br>  Dans ce probl√®me pas tout √† fait √† part enti√®re, je ne pr√©vois pas d'analyser toutes les technologies possibles, mais plut√¥t de d√©crire le cadre de fonctionnement des r√©seaux de superposition dans les DC. <br><br>  La s√©rie enti√®re d√©crira un centre de donn√©es, compos√© de rang√©es de racks similaires dans lesquels le m√™me √©quipement serveur est install√©. <br><br>  Cet √©quipement ex√©cute des machines virtuelles / conteneurs / sans serveur qui mettent en ≈ìuvre des services. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f03/525/54b/f0352554b58d82955bd7c08f3034cd4f.jpg" width="600" title="Dataline nord dc"><br><br><hr><br><br><h1>  Terminologie </h1><br>  Dans la boucle, j'appellerai le <b>serveur un</b> programme qui impl√©mente le c√¥t√© serveur de la communication client-serveur. <br><br>  Les machines physiques dans les racks <b>ne</b> seront <b>pas</b> appel√©es serveurs. <br><br>  <b>La machine physique</b> est un ordinateur mont√© en rack x86.  Le plus souvent, nous utilisons le terme <b>h√¥te</b> .  Nous l'appellerons donc " <b>machine</b> " ou <b>h√¥te</b> . <br><br>  <b>Un hyperviseur</b> est une application ex√©cut√©e sur une machine physique qui √©mule les ressources physiques sur lesquelles les machines virtuelles s'ex√©cutent.  Parfois, dans la litt√©rature et le r√©seau, le mot "hyperviseur" est utilis√© comme synonyme de "h√¥te". <br><br>  <b>Une machine virtuelle</b> est un syst√®me d'exploitation ex√©cut√© sur une machine physique au-dessus d'un hyperviseur.  Pour nous, dans le cadre de ce cycle, peu importe qu'il s'agisse en fait d'une machine virtuelle ou simplement d'un conteneur.  Nous l'appellerons " <b>VM</b> " <br><br>  <b>Le locataire</b> est un concept large que je d√©finirai dans cet article comme un service distinct ou un client distinct. <br><br>  <b>Multi-tenancy</b> ou multi-tenancy - l'utilisation de la m√™me application par diff√©rents clients / services.  Dans le m√™me temps, l'isolation des clients les uns des autres est r√©alis√©e en raison de l'architecture de l'application et non des instances ex√©cut√©es s√©par√©ment. <br><br>  <b>ToR - Top of the Rack switch</b> - un commutateur mont√© en rack auquel toutes les machines physiques sont connect√©es. <br><blockquote>  En plus de la topologie ToR, diff√©rents fournisseurs pratiquent End of Row (EoR) ou Middle of Row (bien que ce dernier soit une raret√© d√©daigneuse et que je n'ai pas vu les abr√©viations MoR). <br></blockquote>  <b>R√©seau</b> sous-jacent ou <b>r√©seau</b> sous-jacent ou sous-couche - infrastructure de r√©seau physique: commutateurs, routeurs, c√¢bles. <br><br>  <b>R√©seau de</b> superposition ou <b>r√©seau de</b> superposition ou superposition - un r√©seau virtuel de tunnels qui s'ex√©cute au-dessus d'un r√©seau physique. <br><br>  <b>L3-factory ou IP-factory</b> est une formidable invention de l'humanit√©, qui permet aux interviews de ne pas r√©p√©ter STP et de ne pas apprendre TRILL.  Un concept dans lequel l'int√©gralit√© du r√©seau jusqu'au niveau d'acc√®s est exclusivement L3, sans VLAN et en cons√©quence de vastes domaines de diffusion √©tendus.  D'o√π vient le mot ¬´usine¬ª dans la partie suivante. <br><br>  <b>SDN</b> - R√©seau d√©fini par logiciel.  A √† peine besoin d'une introduction.  Une approche de la gestion du r√©seau lorsque les modifications apport√©es au r√©seau ne sont pas effectu√©es par une personne, mais par un programme.  Cela signifie g√©n√©ralement d√©placer le plan de contr√¥le au-del√† des p√©riph√©riques r√©seau finaux vers le contr√¥leur. <br><br>  <b>NFV</b> - Network Function Virtualization - virtualisation des p√©riph√©riques r√©seau, qui suppose qu'une partie des fonctions r√©seau peut √™tre lanc√©e sous la forme de machines virtuelles ou de conteneurs pour acc√©l√©rer la mise en ≈ìuvre de nouveaux services, organiser le cha√Ænage des services et une √©volutivit√© horizontale plus facile. <br><br>  <b>VNF</b> - Fonction de r√©seau virtuel.  P√©riph√©rique virtuel sp√©cifique: routeur, commutateur, pare-feu, NAT, IPS / IDS, etc. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ca9/501/33c/ca950133ca98bd1e2ca613342432c535.png" width="700"><br><blockquote>  Je simplifie maintenant d√©lib√©r√©ment la description d'une impl√©mentation sp√©cifique afin de ne pas trop d√©router le lecteur.  Pour une lecture plus r√©fl√©chie, envoyez-la √† la section <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Liens</a> .  De plus, Roma Gorge, qui critique cet article pour des inexactitudes, promet d'√©crire un num√©ro s√©par√© sur les technologies de virtualisation des serveurs et des r√©seaux, plus approfondi et plus attentif aux d√©tails. </blockquote><br><hr><br>  Aujourd'hui, la plupart des r√©seaux peuvent √™tre clairement divis√©s en deux parties: <br><br>  <b>Underlay</b> - un r√©seau physique avec une configuration stable. <br>  <b>Overlay</b> - Abstraction over Underlay pour isoler les locataires. <br><br>  Cela est vrai √† la fois pour le cas de DC (que nous analyserons dans cet article) et pour ISP (que nous n'analyserons pas, car il √©tait d√©j√† dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SDSM</a> ).  Avec les r√©seaux d'entreprise, bien s√ªr, la situation est quelque peu diff√©rente. <br><br>  Image de focus r√©seau: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/133/b41/5f8/133b415f8b32264e2fa877f4a4139267.png" width="800"><br><br><hr><br><br><h1>  Sous-couche </h1><br>  La sous-couche est un r√©seau physique: commutateurs et c√¢bles mat√©riels.  Les appareils sous-jacents savent comment acc√©der aux machines physiques. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/117/d04/880/117d04880232fa2c00ef303cf5f059a0.png" width="800"><br><br>  Il s'appuie sur des protocoles et des technologies standard.  Notamment parce que les p√©riph√©riques mat√©riels fonctionnent toujours sur des logiciels propri√©taires qui ne permettent ni la programmation des puces ni la mise en ≈ìuvre de leurs protocoles, respectivement, la compatibilit√© avec d'autres fournisseurs et la normalisation sont n√©cessaires. <br><blockquote>  Mais quelqu'un comme Google peut se permettre de d√©velopper ses propres commutateurs et d'abandonner les protocoles g√©n√©ralement accept√©s.  Mais LAN_DC n'est pas Google. <br></blockquote>  Le calque sous-jacent est relativement rarement modifi√©, car sa t√¢che est la connectivit√© IP de base entre les machines physiques.  Underlay ne sait rien des services qui s'ex√©cutent dessus, des clients, des locataires - il n'a besoin que de livrer un package d'une machine √† une autre. <br>  La sous-couche peut √™tre comme ceci: <br><br><ul><li>  IPv4 + OSPF </li><li>  IPv6 + ISIS + BGP + L3VPN </li><li>  L2 + TRILL </li><li>  L2 + STP </li></ul><br>  Le r√©seau Underlay est configur√© de mani√®re classique: CLI / GUI / NETCONF. <br><br>  Manuellement, scripts, utilitaires propri√©taires. <br><br>  Plus en d√©tail, le prochain article de la s√©rie sera consacr√© √† la sous-couche. <br><br><hr><br><h1>  Superposition </h1><br>  Overlay - un r√©seau de tunnels virtuels s'√©tendant sur Underlay, il permet aux machines virtuelles d'un client de communiquer entre elles, tout en assurant l'isolement des autres clients. <br><br>  Les donn√©es client sont encapsul√©es dans tous les en-t√™tes de tunneling pour la transmission sur un r√©seau partag√©. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9c1/3ed/8d2/9c13ed8d2e6cec8f1b9fe500660f1c47.png" width="800"><br><br>  Ainsi, les machines virtuelles d'un client (un service) peuvent communiquer entre elles via Overlay, sans m√™me savoir ce que le paquet va r√©ellement. <br><br>  La superposition peut √™tre par exemple la m√™me que celle que j'ai mentionn√©e ci-dessus: <br><br><ul><li>  Tunnel GRE </li><li>  VXLAN </li><li>  EVPN </li><li>  L3VPN </li><li>  GENEVE </li></ul><br>  Un r√©seau de superposition est g√©n√©ralement configur√© et entretenu via un contr√¥leur central.  √Ä partir de l√†, la configuration, le plan de contr√¥le et le plan de donn√©es sont fournis aux p√©riph√©riques qui acheminent et encapsulent le trafic client.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ci-dessous,</a> nous analyserons cela avec des exemples. <br><br>  <b>Oui, c'est du pur SDN.</b> <br><br>  Il existe deux approches fondamentalement diff√©rentes pour organiser un r√©seau Overlay: <br><br><ol><li>  Superposition avec ToR </li><li>  Superposition de l'h√¥te </li></ol><br><br><h2>  Superposition avec ToR </h2><br>  La superposition peut commencer sur un commutateur d'acc√®s mont√© en rack (ToR), comme c'est le cas, par exemple, dans le cas d'une usine VXLAN. <br><br>  Il s'agit d'un m√©canisme √©prouv√© sur les r√©seaux ISP et tous les fournisseurs d'√©quipement r√©seau le prennent en charge. <br><br>  Cependant, dans ce cas, le commutateur ToR doit √™tre en mesure de partager diff√©rents services, respectivement, et l'administrateur r√©seau doit dans une certaine mesure coop√©rer avec les administrateurs des machines virtuelles et apporter des modifications (quoique automatiquement) √† la configuration du p√©riph√©rique. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5e3/0a1/87d/5e30a187dd5796e2a4232cb4e9db0b97.png" width="600"><br><br>  Ici, je vais renvoyer le lecteur √† un article sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VxLAN sur le hub de</a> notre vieil ami <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@bormoglotx</a> . <br>  Dans cette <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pr√©sentation avec ENOG</a> , les approches de la construction d'un r√©seau DC avec une usine EVPN VXLAN sont d√©crites en d√©tail. <br><br>  Et pour une immersion plus compl√®te dans les r√©alit√©s, vous pouvez lire le livre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Un tissu moderne, ouvert et √©volutif: VXLAN EVPN</a> . <br><blockquote>  Je note que VXLAN n'est qu'une m√©thode d'encapsulation et la terminaison de tunnel peut se produire non pas sur ToR, mais sur l'h√¥te, comme c'est le cas avec OpenStack, par exemple. <br><br>  Cependant, l'usine VXLAN o√π la superposition commence sur ToR est l'une des conceptions de r√©seau de superposition bien √©tablies. <br></blockquote><br><h2>  Superposition de l'h√¥te </h2><br>  Une autre approche consiste √† d√©marrer et √† terminer les tunnels sur les h√¥tes finaux. <br>  Dans ce cas, le r√©seau (Underlay) reste aussi simple et statique que possible. <br>  Et l'h√¥te lui-m√™me fait toute l'encapsulation n√©cessaire. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d7/400/c60/5d7400c60036ba0b6666bb0f733c172f.png" width="600"><br><br>  Pour ce faire, vous devrez certainement ex√©cuter une application sp√©ciale sur les h√¥tes, mais cela en vaut la peine. <br><br>  Tout d'abord, ex√©cuter un client sur une machine Linux est plus simple, ou, disons, g√©n√©ralement possible, tandis que sur le commutateur, vous devrez probablement vous tourner vers des solutions SDN propri√©taires pour le moment, ce qui tue l'id√©e de multi-fournisseurs. <br><br>  Deuxi√®mement, le commutateur ToR dans ce cas peut √™tre laiss√© aussi simple que possible, √† la fois du point de vue du plan de contr√¥le et du plan de donn√©es.  En effet - alors il n'a pas besoin de communiquer avec le contr√¥leur SDN, et de stocker les r√©seaux / ARP de tous les clients connect√©s - aussi - il suffit de conna√Ætre l'adresse IP de la machine physique, ce qui simplifie grandement les tables de commutation / routage. <br><br><hr><br>  Dans la s√©rie ADSM, je choisis l'approche de superposition de l'h√¥te - alors nous n'en parlons que et nous ne reviendrons pas √† l'usine VXLAN. <br><br><hr><br>  La fa√ßon la plus simple de consid√©rer les exemples.  Et comme sujet de test, nous prendrons la plate-forme OpenSource SDN OpenContrail, maintenant connue sous le nom de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tungsten Fabric</a> . <br><blockquote>  √Ä la fin de l'article, je donnerai quelques r√©flexions sur l'analogie avec OpenFlow et OpenvSwitch. <br></blockquote><br><h2>  √âtude de cas: tissu de tungst√®ne </h2><br>  Chaque machine physique a un <b>vRouter</b> - un routeur virtuel qui conna√Æt les r√©seaux qui lui sont connect√©s et √† quels clients ils appartiennent - en fait - un routeur PE.  Pour chaque client, il maintient une table de routage isol√©e (lire VRF).  Et en fait, vRouter fait du tunnelage par superposition. <br><br>  Un peu plus sur vRouter se trouve √† la fin de l'article. <br><br>  Chaque machine virtuelle situ√©e sur l'hyperviseur est connect√©e au vRouter de cette machine via l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">interface TAP</a> . <br><br>  <b>TAP</b> - Terminal Access Point - une interface virtuelle dans le noyau linux qui permet la mise en r√©seau. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a2/fc4/20f/7a2fc420f086b1588236ddc7d4f1c97e.png" width="500"><br><br>  S'il y a plusieurs r√©seaux derri√®re le vRouter, une interface virtuelle est cr√©√©e pour chacun d'eux, √† laquelle une adresse IP est affect√©e - ce sera l'adresse de passerelle par d√©faut. <br>  Tous les r√©seaux d'un client sont plac√©s dans un <b>VRF</b> (une table), diff√©rent - dans diff√©rent. <br>  <i>Je ferai ici une r√©serve que ce n'est pas si simple, et enverrai le lecteur curieux √† la fin de l'article</i> . <br><br>  Pour que vRouter'y communique entre eux et, par cons√©quent, les machines virtuelles situ√©es derri√®re eux, ils √©changent des informations de routage via un <b>contr√¥leur SDN</b> . <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/3cd/6c5/c73/3cd6c5c7399e314b779a4b9ecf18e17e.png" width="900"></a> <br><br>  Pour entrer dans le monde ext√©rieur, il y a un point de sortie de la matrice - la passerelle de r√©seau virtuel <b>VNGW</b> - Virtual Network GateWay ( <i>mon terme</i> ). <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/4d8/75f/a55/4d875fa552a4f144fb9338fa0093235c.png" width="900"></a> <br><br><hr><br>  Examinons maintenant les exemples de communications - et il y aura de la clart√©. <br><br><br><h3>  Communication au sein d'une machine physique </h3><br>  VM0 veut envoyer un paquet √† VM2.  Supposons pour l'instant qu'il s'agit d'une machine virtuelle cliente unique. <br><br><h4>  Plan de donn√©es </h4><br><ol><li>  VM-0 a une route par d√©faut dans son interface eth0.  Le paquet y est envoy√©. <br>  Cette interface eth0 est en fait virtuellement connect√©e au routeur virtuel vRouter via l'interface tap0 TAP. </li><li>  vRouter analyse √† quelle interface le paquet est arriv√©, c'est-√†-dire √† quel client (VRF) il appartient, v√©rifie l'adresse du destinataire avec la table de routage de ce client. </li><li>  Apr√®s avoir d√©couvert que le r√©cepteur sur la m√™me machine se trouve derri√®re un port diff√©rent, vRouter lui envoie simplement le paquet sans en-t√™tes suppl√©mentaires - dans ce cas, le vRouter a d√©j√† un enregistrement ARP. </li></ol><br><img src="https://habrastorage.org/getpro/habr/post_images/6be/2e5/1f0/6be2e51f0530a6fc7e9f2c6370c6e0d2.png" width="700"><br><br>  Dans ce cas, le paquet n'entre pas dans le r√©seau physique - il est rout√© √† l'int√©rieur de vRouter. <br><br><br><h4>  Avion de contr√¥le </h4><br>  Lorsque la machine virtuelle d√©marre, l'hyperviseur lui dit: <br><br><ul><li>  Sa propre adresse IP. </li><li>  La route par d√©faut passe par l'adresse IP du vRouter sur ce r√©seau. </li></ul><br>  Gr√¢ce √† une API sp√©ciale, l'hyperviseur rend compte √† vRouter: <br><br><ul><li>  Ce dont vous avez besoin pour cr√©er une interface virtuelle. </li><li>  Laquelle (VM) doit cr√©er un r√©seau virtuel. </li><li>  √Ä quel VRF le lier (VN). </li><li>  L'enregistrement ARP statique pour cette machine virtuelle est quelle interface a son adresse IP et √† quelle adresse MAC elle est attach√©e. </li></ul><br><blockquote>  Et encore une fois, la v√©ritable proc√©dure d'interaction est simplifi√©e afin de comprendre le concept. <br></blockquote><img src="https://habrastorage.org/getpro/habr/post_images/e14/f52/d49/e14f52d4935eb6d5fd5213c1bd3baeec.png" width="800"><br><br>  Ainsi, toutes les machines virtuelles d'un client sur une machine donn√©e, vRouter consid√®re comme des r√©seaux directement connect√©s et peut router entre eux lui-m√™me. <br><br><hr><br>  Mais VM0 et VM1 appartiennent √† des clients diff√©rents, respectivement, sont dans des tables diff√©rentes vRouter'a. <br><br>  Leur capacit√© √† communiquer directement entre eux d√©pend des param√®tres du vRouter et de la conception du r√©seau. <br>  Par exemple, si les machines virtuelles des deux clients utilisent des adresses publiques ou si NAT se produit sur le vRouter lui-m√™me, le routage direct vers vRouter peut √©galement √™tre effectu√©. <br><br>  Dans le cas contraire, il est possible de traverser des espaces d'adressage - vous devez passer par un serveur NAT pour obtenir une adresse publique - cela est similaire √† l'acc√®s √† des r√©seaux externes, qui sont d√©crits ci-dessous. <br><br><hr><br><br><h3>  Communication entre machines virtuelles situ√©es sur diff√©rentes machines physiques </h3><br><h4>  Plan de donn√©es </h4><br><ol><li>  Le d√©but est exactement le m√™me: VM-0 envoie un paquet avec la destination VM-7 (172.17.3.2) par d√©faut. </li><li>  vRouter le re√ßoit et cette fois voit que la destination est sur une autre machine et est accessible via le tunnel Tunnel0. </li><li>  Tout d'abord, il raccroche l'√©tiquette MPLS identifiant l'interface distante, de sorte qu'√† l'arri√®re de vRouter, il puisse d√©terminer o√π placer ce paquet sans crochets suppl√©mentaires. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/322/f94/328/322f943287f0e8956acc02654bdae580.png" width="1000"></a> <br></li><li>  Tunnel0 a une source de 10.0.0.2, le r√©cepteur: 10.0.1.2. <br>  vRouter ajoute des en-t√™tes GRE (ou UDP) et une nouvelle adresse IP au paquet d'origine. </li><li>  La table de routage vRouter a une route par d√©faut via l'adresse ToR1 10.0.0.1.  L√† et envoie. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b9a/696/b8a/b9a696b8a0e97aba81107a3ad112f001.png" width="700"><br><br></li><li>  ToR1 en tant que membre du r√©seau Underlay sait (par exemple, via OSPF) comment acc√©der √† 10.0.1.2 et envoie un paquet le long de l'itin√©raire.  Veuillez noter que l'ECMP est inclus ici.  Dans l'illustration, il y a deux nexsthops, et diff√©rents flux y seront dispos√©s par hachage.  Dans le cas d'une v√©ritable usine, il y aura vraisemblablement 4 prochaines op√©rations. <br><br>  En m√™me temps, il n'a pas besoin de savoir ce qui se trouve sous l'en-t√™te IP externe.  En fait, sous IP, il peut y avoir un sandwich entre IPv6 sur MPLS sur Ethernet sur MPLS sur GRE sur sur grec. </li><li>  En cons√©quence, c√¥t√© r√©ception, vRouter supprime GRE et, √† l'aide de l'√©tiquette MPLS, comprend √† quelle interface ce paquet doit √™tre transmis, le supprime et l'envoie au destinataire dans sa forme d'origine. </li></ol><br><br><h4>  Avion de contr√¥le </h4><br>  Lorsque vous d√©marrez la machine, tout ce qui se passe est d√©crit ci-dessus. <br><br>  Et en plus de ce qui suit: <br><br><ul><li>  Pour chaque client, vRouter alloue une balise MPLS.  Il s'agit de l'√©tiquette de service L3VPN o√π les clients seront r√©partis sur la m√™me machine physique. <br><blockquote>  En fait, la balise MPLS est toujours allou√©e par le vRouter'om toujours - car on ne sait pas √† l'avance que la machine n'interagira qu'avec d'autres machines derri√®re le m√™me vRouter'om et ce n'est probablement m√™me pas le cas. <br></blockquote></li><li>  vRouter √©tablit une connexion avec le contr√¥leur SDN via BGP (ou similaire - dans le cas de TF, il s'agit de XMPP 0_o). </li><li>  √Ä travers cette session, vRouter indique au contr√¥leur SDN les routes vers les r√©seaux connect√©s: <br><br><ul><li>  Adresse r√©seau </li><li>  M√©thode d'encapsulation (MPLSoGRE, MPLSoUDP, VXLAN) </li><li>  √âtiquette MPLS client </li><li>  Votre adresse IP comme nexthop </li></ul><br></li><li>  Le contr√¥leur SDN re√ßoit ces routes de tous les vRouter'ov connect√©s et les renvoie aux autres.  Autrement dit, il agit comme un r√©flecteur de route. </li></ul><br>  La m√™me chose se produit dans la direction oppos√©e. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/5aa/e3a/b17/5aae3ab177a4ed58279e4c767618f770.png" width="1000"></a> <br><br>  La superposition peut changer au moins toutes les minutes.  Quelque chose comme cela se produit dans les clouds publics, lorsque les clients d√©marrent et √©teignent r√©guli√®rement leurs machines virtuelles. <br><br>  Le contr√¥leur central assume toutes les difficult√©s de maintenance de la configuration et de contr√¥le des tables de commutation / routage sur vRouter. <br><br>  En gros, le contr√¥leur s'arr√™te avec tous les vRouter via BGP (ou un protocole similaire) et transmet simplement les informations de routage.  BGP, par exemple, poss√®de d√©j√† une famille d'adresses pour transmettre la m√©thode d'encapsulation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MPLS-in-GRE</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MPLS-in-UDP</a> . <br><br>  Dans le m√™me temps, la configuration du r√©seau Underlay ne change en rien, ce qui, incidemment, est beaucoup plus difficile √† automatiser, et il est plus facile de rompre avec un mouvement maladroit. <br><br><hr><br><br><h3>  Sortie sur le monde ext√©rieur </h3><br>  Quelque part, la simulation devrait se terminer, et √† partir du monde virtuel, vous devez entrer dans le vrai.  Et vous avez besoin d'une passerelle de <s>t√©l√©phones payants</s> . <br><br>  Deux approches sont pratiqu√©es: <br><br><ol><li>  Un routeur mat√©riel est install√©. </li><li>  Une appliance est lanc√©e qui impl√©mente les fonctions d'un routeur (oui, nous avons fait face √† VNF apr√®s SDN).  Appelons cela une passerelle virtuelle. </li></ol><br><blockquote>        ‚Äî    ‚Äî      .    ,     , ,  ,   ,  , , , ,         . <br><br>       ,           ,   ,      ,    ( <i></i> ).     ,  -   ,   ,          ‚Äî    . <br></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avec un pied, la passerelle regarde le r√©seau virtuel Overlay, comme une machine virtuelle normale, et peut interagir avec toutes les autres machines virtuelles. </font><font style="vertical-align: inherit;">En m√™me temps, il peut terminer sur lui-m√™me les r√©seaux de tous les clients et, en cons√©quence, effectuer le routage entre eux. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avec l'autre pied, la passerelle regarde d√©j√† le r√©seau f√©d√©rateur et sait comment acc√©der √† Internet.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/930/3d2/d1a/9303d2d1a6777510d3bc87bc19349da2.png" width="800"><br><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Plan de donn√©es </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Autrement dit, le processus ressemble √† ceci: </font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> VM-0, ayant par d√©faut tous dans le m√™me vRouter, envoie un paquet avec une destination dans le monde ext√©rieur (185.147.83.177) √† l'interface eth0. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vRouter re√ßoit ce paquet et effectue une recherche d'adresse de destination dans la table de routage - il trouve la route par d√©faut via la passerelle VNGW1 via le tunnel 1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il voit √©galement qu'il s'agit d'un tunnel GRE avec SIP 10.0.0.2 et DIP 10.0.255.2, et raccroche d'abord MPLS- L'√©tiquette de ce client que VNGW1 attend.</font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vRouter emballe le paquet d'origine dans le MPLS, GRE et les nouveaux en-t√™tes IP et l'envoie √† ToR1 10.0.0.1 par d√©faut. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Un r√©seau sous-jacent livre le paquet √† la passerelle VNGW1. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La passerelle VNGW1 supprime les en-t√™tes de tunnel GRE et MPLS, voit l'adresse de destination, consulte sa table de routage et comprend qu'elle est dirig√©e vers Internet - cela signifie par le biais de la vue compl√®te ou par d√©faut. </font><font style="vertical-align: inherit;">Si n√©cessaire, effectue la traduction NAT.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De VNGW √† la fronti√®re, il peut y avoir un r√©seau IP r√©gulier, ce qui est peu probable. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il peut s'agir d'un r√©seau MPLS classique (IGP + LDP / RSVP TE), il peut s'agir d'un retour d'usine avec un BGP LU, ou d'un tunnel GRE de VNGW √† la fronti√®re via le r√©seau IP. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quoi qu'il en soit, VNGW1 effectue les encapsulations n√©cessaires et envoie le paquet d'origine vers la fronti√®re.</font></font></li></ol><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/d9e/49b/c01/d9e49bc0141200d07b7dbd6710495c83.png" width="1000"></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Le trafic en sens inverse passe par les m√™mes √©tapes dans l'ordre inverse. </font></font><br><br><ol><li>     VNGW1 </li><li>   ,      ,      Tunnel1 (MPLSoGRE  MPLSoUDP). </li><li> ,   MPLS,  GRE/UDP   IP     ToR3 10.0.255.1. <br>    ‚Äî IP- vRouter',      ‚Äî 10.0.0.2. </li><li>       vRouter'. </li><li>  vRouter  GRE/UDP,  MPLS-      IP-   TAP-,   eth0 . </li></ol><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/d4d/f49/892/d4df4989216a42c06343ba883b8f5db2.png" width="1000"></a> <br><br><br><h4> Control Plane </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VNGW1 √©tablit un voisinage BGP avec le contr√¥leur SDN, √† partir duquel il re√ßoit toutes les informations de routage sur les clients: quelle adresse IP (vRouter'om) est quel client et avec quelle √©tiquette MPLS il s'identifie. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De m√™me, il indique lui-m√™me au contr√¥leur SDN l'itin√©raire par d√©faut avec l'√©tiquette de ce client, en se d√©signant comme nexthop. Et puis ce d√©faut vient √† vRouter'y. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les VNGW acheminent g√©n√©ralement l'agr√©gation ou la traduction NAT. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et dans la direction oppos√©e, il donne exactement cette route agr√©g√©e √† une session avec des pensionnaires ou des r√©flecteurs de route. Et d'eux re√ßoit un itin√©raire par d√©faut ou Full-View, ou autre chose. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En termes d'encapsulation et d'√©change de trafic, VNGW n'est pas diff√©rent de vRouter.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous √©tendez un peu la zone, vous pouvez ajouter d'autres p√©riph√©riques r√©seau √† VNGW et vRouter, tels que des pare-feu, des batteries de purification ou d'enrichissement du trafic, IPS, etc. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et avec l'aide de la cr√©ation successive de VRF et de l'annonce correcte des itin√©raires, vous pouvez faire une boucle de trafic comme vous le souhaitez, ce qui est appel√© Service Chaining. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autrement dit, ici, le contr√¥leur SDN agit comme un r√©flecteur de route entre VNGW, vRouter'ami et d'autres p√©riph√©riques r√©seau. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais en fait, le contr√¥leur publie √©galement des informations sur les ACL et les PBR (Policy Based Routing), for√ßant les flux de trafic individuels √† aller diff√©remment que l'itin√©raire leur indique.</font></font><br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/917/7f6/97a/9177f697a1ff4a7560153286ac04f287.png" width="1000"></a> <br><br><hr><br><br><h1>  FAQ </h1><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi faites-vous toujours une remarque GRE / UDP?</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eh bien, en g√©n√©ral, on peut dire qu'il est sp√©cifique au tissu de tungst√®ne - vous pouvez l'ignorer compl√®tement. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais si vous le prenez, TF lui-m√™me, tout en √©tant un OpenContrail, supportait les deux encapsulations: MPLS en GRE et MPLS en UDP. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UDP est bon car dans le port source dans son en-t√™te, il est tr√®s facile de coder une fonction de hachage √† partir du port IP + Proto + d'origine, ce qui permettra l'√©quilibrage. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le cas de GRE, h√©las, il n'y a que des en-t√™tes IP et GRE externes qui sont les m√™mes pour tout le trafic encapsul√© et il n'est pas question d'√©quilibrer - peu de personnes peuvent regarder si profond√©ment √† l'int√©rieur du paquet.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jusqu'√† un certain temps, les routeurs, s'ils savaient utiliser des tunnels dynamiques, uniquement dans MPLSoGRE, et tr√®s r√©cemment, ont appris dans MPLSoUDP. Par cons√©quent, vous devez toujours faire une remarque sur la possibilit√© de deux encapsulations diff√©rentes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En toute honn√™tet√©, il convient de noter que TF prend enti√®rement en charge la connectivit√© L2 √† l'aide de VXLAN. </font></font><br><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous avez promis d'√©tablir des parall√®les avec OpenFlow.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ils mendient vraiment. vSwitch dans le m√™me OpenStack fait des choses tr√®s similaires en utilisant VXLAN, qui, incidemment, a √©galement un en-t√™te UDP. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le plan de donn√©es, ils fonctionnent approximativement de la m√™me mani√®re, le plan de contr√¥le diff√®re consid√©rablement. Tungsten Fabric utilise XMPP pour fournir des informations de route √† vRouter, tandis que Openflow fonctionne dans OpenStack. </font></font><br><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puis-je en savoir un peu plus sur vRouter?</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il est divis√© en deux parties: vRouter Agent et vRouter Forwarder. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le premier est lanc√© dans l'espace utilisateur du syst√®me d'exploitation h√¥te et communique avec le contr√¥leur SDN, √©changeant des informations sur les routes, VRF et ACL. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le second impl√©mente Data Plane - g√©n√©ralement dans Kernel Space, mais peut √©galement √™tre lanc√© sur SmartNIC - des cartes r√©seau avec un processeur et une puce de commutation programmable s√©par√©e, ce qui vous permet de supprimer la charge du processeur de la machine h√¥te et de rendre le r√©seau plus rapide et plus pr√©visible. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un autre sc√©nario est possible lorsque vRouter est une application DPDK dans l'espace utilisateur. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vRouter Agent supprime les param√®tres de vRouter Forwarder. </font></font><br><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce que le r√©seau virtuel?</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai mentionn√© au d√©but de l'article sur VRF que chaque locataire est attach√© √† son VRF. Et si cela suffisait pour une compr√©hension superficielle du travail du r√©seau de superposition, alors d√©j√† √† la prochaine it√©ration, il est n√©cessaire de clarifier. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Habituellement, dans les m√©canismes de virtualisation, l'entit√© Virtual Network (vous pouvez la prendre comme un nom propre) est introduite s√©par√©ment des clients / locataires / machines virtuelles - c'est une chose assez ind√©pendante. Et ce r√©seau virtuel √† travers les interfaces peut d√©j√† √™tre connect√© dans un locataire, dans l'autre, dans deux, mais au moins o√π. Ainsi, par exemple, le cha√Ænage de services est impl√©ment√©, lorsque le trafic doit √™tre pass√© par certains n≈ìuds dans la s√©quence souhait√©e, cr√©ant et appelant simplement des r√©seaux virtuels dans la s√©quence correcte. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par cons√©quent, en tant que tel, il n'y a pas de correspondance directe entre le r√©seau virtuel et le locataire.</font></font><br><br><hr><br><br><h1>  Conclusion </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il s'agit d'une description tr√®s superficielle du fonctionnement d'un r√©seau virtuel avec une superposition de l'h√¥te et du contr√¥leur SDN. Mais quelle que soit la plateforme de virtualisation que vous utilisez aujourd'hui, elle fonctionnera de la m√™me mani√®re, que ce soit VMWare, ACI, OpenStack, CloudStack, Tungsten Fabric ou Juniper Contrail. Ils diff√®rent par les types d'encapsulation et les en-t√™tes, les protocoles pour fournir des informations aux p√©riph√©riques r√©seau finaux, mais le principe d'un r√©seau de superposition r√©gl√© par logiciel fonctionnant au-dessus d'un r√©seau de sous-couche relativement simple et statique restera le m√™me.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On peut dire que dans les domaines de la cr√©ation d'un cloud priv√© √† ce jour, le SDN bas√© sur le r√©seau de superposition a gagn√©. </font><font style="vertical-align: inherit;">Cependant, cela ne signifie pas qu'Openflow n'a pas sa place dans le monde moderne - il est utilis√© dans OpenStacke et dans le m√™me VMWare NSX, √† ma connaissance, Google l'utilise pour configurer le r√©seau de sous-couches. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ci-dessous, j'ai donn√© des liens vers des documents plus d√©taill√©s, si vous souhaitez √©tudier la question plus en profondeur. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et quelle est notre sous-couche? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais en g√©n√©ral, rien. </font><font style="vertical-align: inherit;">Il n'a pas compl√®tement chang√©. </font><font style="vertical-align: inherit;">Tout ce qu'il doit faire en cas de superposition de l'h√¥te est de mettre √† jour les routes et les ARP lorsque vRouter / VNGW appara√Æt et dispara√Æt et de faire glisser les paquets entre eux. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formulons une liste d'exigences pour un r√©seau Underlay.</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pour pouvoir un certain protocole de routage, dans notre situation - BGP. </font></font></li><li>   ,   ,     - . </li><li>  ECMP ‚Äî   . </li><li>   QoS,     ,  ECN. </li><li>  NETCONF ‚Äî   . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai consacr√© tr√®s peu de temps ici au travail du r√©seau Underlay lui-m√™me. </font><font style="vertical-align: inherit;">En effet, plus tard dans la s√©rie, je me concentrerai dessus et nous ne toucherons √† Overlay qu'en passant. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âvidemment, je nous limite s√©v√®rement tous, en utilisant comme exemple le r√©seau DC construit √† l'usine Klose avec un routage IP pur et une superposition de l'h√¥te. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cependant, je suis s√ªr que tout r√©seau qui a une conception peut √™tre d√©crit en termes formels et automatis√©. </font><font style="vertical-align: inherit;">C'est juste que je poursuis l'objectif de comprendre les approches de l'automatisation, et de ne pas confondre tout le monde, de r√©soudre le probl√®me d'une mani√®re g√©n√©rale. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le cadre de l'ADSM, Roman Gorge et moi pr√©voyons de publier un num√©ro distinct sur la virtualisation de la puissance de calcul et son interaction avec la virtualisation de r√©seau. </font><font style="vertical-align: inherit;">Restez en contact.</font></font><br><br><br><h1>  Liens utiles </h1><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archvitecture de tissu de tungst√®ne</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√† propos de: cloud</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">6 heures sur Yandex.Cloud, o√π le r√©seau virtuel sur TF est √©galement affect√©.</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Qu'est-ce qu'Open vSwitch?</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Introduction √† VxLAN</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RFC 7348. R√©seau local virtuel extensible (VXLAN): un cadre pour superposer des r√©seaux virtualis√©s de couche 2 sur des r√©seaux de couche 3.</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Approche Scaleway √† VXLAN EVPN Fabric</a> .  Il d√©crit l'ensemble du r√©seau de contr√¥leurs de domaine, y compris les sous-couches, les superpositions, les approches du multi-h√©bergement et de la gestion. </li></ul><br><h5>  Merci </h5><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Roman Gorge</a> , ancien h√©bergeur principal du podcast linkmeup, et maintenant expert dans le domaine des plateformes cloud.  Pour commentaires et modifications.  Eh bien, nous attendons avec impatience un article plus approfondi sur la virtualisation dans un proche avenir. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Alexander Shalimov</a> , mon coll√®gue et expert dans le d√©veloppement de r√©seaux virtuels.  Pour commentaires et modifications. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Valentina Sinitsyna</a> , ma coll√®gue et experte en tissu de tungst√®ne.  Pour commentaires et modifications. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Artyom Chernobay</a> - maillage illustrateur.  Pour KDPV. </li><li>  Alexander Limonov.  Pour le m√®me "automate". </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr458622/">https://habr.com/ru/post/fr458622/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr458604/index.html">Pourquoi les deux plus grands fabricants d'√©lectronique ont uni leurs forces dans un nouveau projet de GPU</a></li>
<li><a href="../fr458606/index.html">Ex√©cutez OpenVPN dans Docker en 2 secondes</a></li>
<li><a href="../fr458608/index.html">Outils de d√©veloppement Node.js File d'attente des travaux</a></li>
<li><a href="../fr458612/index.html">Cosmos. 7 ans</a></li>
<li><a href="../fr458614/index.html">Cr√©ation d'un hook Reactive UsePosition () pour obtenir et suivre les coordonn√©es du navigateur</a></li>
<li><a href="../fr458624/index.html">Comment nous avons appris √† dessiner des textes sur toile</a></li>
<li><a href="../fr458626/index.html">StealthWatch: concepts de base et exigences minimales. Partie 1</a></li>
<li><a href="../fr458630/index.html">Un peu d'histoire de d√©veloppement de votre jeu sur Windows Forms + C # pur dans mes 16 ans</a></li>
<li><a href="../fr458632/index.html">Vue vraiment typ√©e</a></li>
<li><a href="../fr458634/index.html">¬´DÃ∂oÃ∂nÃ∂'Ã∂t be evil¬ª ou ce que Facebook nous cache</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>