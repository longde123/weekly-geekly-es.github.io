<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äç‚öñÔ∏è üë¶üèΩ ü§öüèª No es otro lenguaje de programaci√≥n. Parte 3: F√≠sica ‚òùüèø ü§æüèΩ üöì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La tercera y √∫ltima parte de una serie de art√≠culos sobre lsFusion (enlaces a la primera y segunda parte) 

 Se centrar√° en el modelo f√≠sico: todo lo ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>No es otro lenguaje de programaci√≥n. Parte 3: F√≠sica</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lsfusion/blog/460887/"><img src="https://habrastorage.org/webt/4i/rl/y5/4irly5rc9xjxdf1v-zdadc_ijgg.png"><br><br>  La tercera y √∫ltima parte de una serie de art√≠culos sobre lsFusion (enlaces a la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">primera</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">segunda</a> parte) <br><br>  Se centrar√° en el modelo f√≠sico: todo lo que no est√° conectado con la funcionalidad del sistema, pero est√° asociado con su desarrollo y optimizaci√≥n del rendimiento, cuando hay demasiados datos. <br><br>  Este art√≠culo, como los anteriores, no es muy adecuado para la lectura entretenida, pero, a diferencia de los otros, habr√° m√°s detalles t√©cnicos y temas "candentes" (como mecanograf√≠a o metaprogramaci√≥n), adem√°s de este art√≠culo dar√° una parte de las respuestas a la pregunta, ¬øc√≥mo es todo? trabaja adentro. <br><a name="habracut"></a><br>  En este art√≠culo, prescindiremos de una imagen (no hay una pila como esta), pero haremos una tabla de contenido, como se solicit√≥ en art√≠culos anteriores: <br><br><div class="spoiler">  <b class="spoiler_title">Tabla de contenidos</b> <div class="spoiler_text"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Desarrollo de grandes proyectos.</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Identificaci√≥n del art√≠culo</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Espacios de nombres</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Escritura expl√≠cita</a> </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Modularidad</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Extensiones</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M√≥dulos</a> </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Metaprogramaci√≥n</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Integraci√≥n</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Apelar a un sistema externo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Apelar desde un sistema externo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Apelar al sistema interno</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Apelaci√≥n del sistema interno</a> </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La migracion</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Internacionalizacion</a> </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Optimizar el rendimiento de grandes proyectos de datos</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Materializaci√≥n</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">√çndices</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mesas</a> </li></ul></li></ul></div></div><br><a name="id"></a><h2>  Identificaci√≥n del art√≠culo </h2><br>  Si el proyecto consta de varios archivos peque√±os, generalmente no surgen problemas con la denominaci√≥n de elementos.  Todos los nombres est√°n a la vista y son lo suficientemente f√°ciles como para asegurarse de que no se superpongan.  Si el proyecto, por el contrario, consta de muchos m√≥dulos desarrollados por un gran n√∫mero de personas diferentes, y las abstracciones en estos m√≥dulos de un dominio de dominio, los conflictos de nombres se vuelven mucho m√°s probables.  LsFusion tiene dos mecanismos para resolver estos problemas: <br><br><ul><li>  Espacios de nombres: separaci√≥n de un nombre en completo y corto, y la capacidad de usar solo un nombre corto al acceder a un elemento </li><li>  Escritura expl√≠cita (para ser m√°s precisos, sobrecarga de funciones): la capacidad de nombrar propiedades (y acciones) de la misma manera, y luego, al acceder a ellas, dependiendo de las clases de argumentos, determina autom√°ticamente a qu√© propiedad pertenece la llamada </li></ul><br><a name="namespace"></a><h3>  Espacios de nombres </h3><br>  Cualquier proyecto complejo generalmente consta de una gran cantidad de elementos que deben nombrarse.  Y, si los dominios de dominio se cruzan, muy a menudo es necesario usar el mismo nombre en diferentes contextos.  Por ejemplo, tenemos el nombre de una clase o formulario Factura (factura), y queremos usar este nombre en varios bloques de funciones, por ejemplo: Compra (Compra), Venta (Venta), Devoluci√≥n de compra (PurchaseReturn), Devoluci√≥n de venta (SaleReturn).  Est√° claro que puede llamar a clases / formularios PurchaseInvoice, SaleInvoice, etc.  Pero, en primer lugar, tales nombres en s√≠ mismos ser√°n demasiado voluminosos.  Y en segundo lugar, en un bloque funcional, las llamadas, por regla general, van a los elementos del mismo bloque funcional, lo que significa que cuando se desarrolla, por ejemplo, el bloque de funci√≥n Compra a partir de una repetici√≥n constante de la palabra Compra, simplemente se ondular√° en sus ojos.  Para evitar que esto suceda, la plataforma tiene un concepto como un espacio de nombres.  Funciona de la siguiente manera: <br><br><ul><li>  cada elemento en la plataforma se crea en alg√∫n espacio de nombres <br></li><li>  Si se accede a otros elementos durante la creaci√≥n del elemento, los elementos creados en el mismo espacio de nombres tienen prioridad <br></li></ul><div class="scrollable-table"><table><tbody><tr><td><code><font color="#a626a4">MODULE</font> PurchaseInvoice; <br> <font color="#a626a4">NAMESPACE</font> Purchase; <br> <font color="#a626a4">CLASS</font> Invoice <font color="#50a14f">' ()'</font> ; <br></code> </td></tr></tbody></table></div><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">MODULE</font> SaleInvoice; <br> <font color="#a626a4">NAMESPACE</font> Sale; <br> <font color="#a626a4">CLASS</font> Invoice <font color="#50a14f">' ()'</font> ; <br></code> </td></tr></tbody></table></div><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">MODULE</font> PurchaseShipment; <br> <font color="#a626a4">REQUIRE</font> PurchaseInvoice, SaleInvoice; <br> <font color="#a626a4">NAMESPACE</font> Purchase; <br> <font color="#808080"><i>//   Invoice    Purchase.Invoice,   Sale.invoice</i></font> <br> <font color="#808080"><i>//   namespace   Purchase    namespace Purchase </i></font> <br> shipment(Invoice invoice) = <font color="#a626a4">AGGR</font> ShipmentInvoce <font color="#a626a4">WHERE</font> createShipment(invoice); <br></code> </td></tr></tbody></table></div>  Los espacios de nombres en la versi√≥n de idioma actual se establecen para todo el m√≥dulo inmediatamente en el encabezado del m√≥dulo.  Por defecto, si no se especifica un espacio de nombres, se crea impl√≠citamente con un nombre igual al nombre del m√≥dulo.  Si necesita acceder a un elemento desde un espacio de nombres no prioritario, puede hacerlo especificando el nombre completo del elemento (por ejemplo, Sale.Invoice). <br><br><a name="exptype"></a><h3>  Escritura expl√≠cita </h3><br>  Los espacios de nombres son importantes, pero no son la √∫nica forma de hacer que el c√≥digo sea m√°s corto y m√°s legible.  Adem√°s de ellos, al buscar propiedades (y acciones), tambi√©n es posible tener en cuenta las clases de argumentos que se les pasan en la entrada.  Entonces, por ejemplo: <br><div class="scrollable-table"><table><tbody><tr><td> <code>sum = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">10</font> , <font color="#986801">2</font> ] (OrderDetail); <br> sum = <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> sum(OrderDetail od) <font color="#a626a4">BY</font> order(od); <br> <font color="#808080"><i>//     ,        Order</i></font> <br> <font color="#808080"><i>//             OrderDetail</i></font> <br> <font color="#a626a4">CONSTRAINT</font> sum(Order o) &lt; <font color="#986801">0</font> <font color="#a626a4">MESSAGE</font> <font color="#50a14f">'    '</font> ; <br></code> </td></tr></tbody></table></div>  Aqu√≠, por supuesto, puede surgir la pregunta: ¬øqu√© suceder√° si el espacio de nombres de la propiedad deseada no es una prioridad, pero es m√°s adecuado para las clases?  De hecho, el algoritmo de b√∫squeda general es bastante complicado (su descripci√≥n completa est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> ) y hay muchos casos "ambiguos", por lo que en caso de incertidumbre, se recomienda especificar expl√≠citamente espacios de nombres / clases de la propiedad deseada, o verificar dos veces en el IDE (usando Ir a la Declaraci√≥n) CTRL + B) que la propiedad encontrada es exactamente lo que se quiso decir. <br><br>  Adem√°s, vale la pena se√±alar que generalmente no es necesario escribir expl√≠citamente en lsFusion.  Las clases de par√°metros pueden omitirse, y si la plataforma tiene suficiente informaci√≥n para encontrar la propiedad deseada, lo har√°.  Por otro lado, en proyectos realmente complejos, todav√≠a se recomienda establecer clases de par√°metros expl√≠citamente, no solo desde el punto de vista de la brevedad del c√≥digo, sino tambi√©n desde el punto de vista de varias caracter√≠sticas adicionales, tales como: diagn√≥stico temprano de errores, autocompletado inteligente desde el IDE, etc.  Ten√≠amos una amplia experiencia trabajando tanto con la mecanograf√≠a impl√≠cita (los primeros 5 a√±os) como con la expl√≠cita (tiempo restante), y debo decir que los tiempos de la mecanograf√≠a impl√≠cita ahora se recuerdan con un escalofr√≠o (aunque puede que simplemente "no supi√©ramos c√≥mo cocinarlo"). <br><br><a name="moduleness"></a><h2>  Modularidad </h2><br>  La modularidad es una de las propiedades m√°s importantes del sistema, lo que permite garantizar su extensibilidad, reutilizaci√≥n de c√≥digo, as√≠ como la interacci√≥n efectiva del equipo de desarrollo. <br><br>  LsFusion proporciona modularidad con los dos mecanismos siguientes: <br><br><ul><li>  Extensiones: la capacidad de expandir (cambiar) elementos del sistema despu√©s de que se crean. <br></li><li>  M√≥dulos: la capacidad de agrupar algunas funciones para su posterior reutilizaci√≥n. <br></li></ul><br><a name="extend"></a><h3>  Extensiones </h3><br>  lsFusion admite la capacidad de extender clases y formas, as√≠ como propiedades y acciones, a trav√©s del mecanismo de polimorfismo descrito en el primer art√≠culo. <br><div class="scrollable-table"><table><tbody><tr><td> <code>sum = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">10</font> , <font color="#986801">2</font> ] (OrderDetail); <br> sum = <font color="#a626a4">GROUP</font> <font color="#a626a4">SUM</font> sum(OrderDetail od) <font color="#a626a4">BY</font> order(od); <br> <font color="#808080"><i>//     ,        Order</i></font> <br> <font color="#808080"><i>//             OrderDetail</i></font> <br> <font color="#a626a4">CONSTRAINT</font> sum(Order o) &lt; <font color="#986801">0</font> <font color="#a626a4">MESSAGE</font> <font color="#50a14f">'    '</font> ; <br> <font color="#a626a4">CLASS</font> <font color="#a626a4">ABSTRACT</font> Shape; <br> <font color="#a626a4">CLASS</font> Box : Shape; <br> <br> <font color="#a626a4">CLASS</font> Quadrilateral; <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">CLASS</font> Box : Quadrilateral; <font color="#808080"><i>//  </i></font> <br> <br> <font color="#a626a4">CLASS</font> ShapeType { <br> point <font color="#50a14f">''</font> , <br> segment <font color="#50a14f">''</font> <br> } <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">CLASS</font> ShapeType { <font color="#808080"><i>//   </i></font> <br> circle <font color="#50a14f">''</font> <br> } <br> <br> <font color="#a626a4">CLASS</font> ItemGroup; <br> name = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">100</font> ] (ItemGroup); <br> <br> itemGroup = <font color="#a626a4">DATA</font> ItemGroup (Item); <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> items <br> <font color="#a626a4">PROPERTIES</font> (i) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">DELETE</font> <font color="#808080"><i>//     </i></font> <br> <br> <font color="#a626a4">OBJECTS</font> g = ItemGroup <font color="#a626a4">BEFORE</font> i <font color="#808080"><i>//        </i></font> <br> <font color="#a626a4">PROPERTIES</font> (g) <font color="#a626a4">READONLY</font> name <br> <font color="#a626a4">FILTERS</font> itemGroup(i) == g <font color="#808080"><i>//         ,       ,    </i></font> <br> ; <br></code> </td></tr></tbody></table></div>  Adem√°s, observamos que casi todos los dem√°s dise√±os de plataforma (por ejemplo, navegador, dise√±o de formularios) son extensibles por definici√≥n, por lo tanto, no hay una l√≥gica de extensi√≥n separada para ellos. <br><br><a name="module"></a><h3>  M√≥dulos </h3><br>  Un m√≥dulo es una parte funcionalmente completa de un proyecto.  En la versi√≥n actual de lsFusion, un m√≥dulo es un archivo separado que consiste en el encabezado y el cuerpo de un m√≥dulo.  El t√≠tulo del m√≥dulo, a su vez, consiste en: el nombre del m√≥dulo, as√≠ como, si es necesario, una lista de los m√≥dulos utilizados y el nombre del espacio de nombres de este m√≥dulo.  El cuerpo del m√≥dulo consta de declaraciones y / o extensiones de elementos del sistema: propiedades, acciones, restricciones, formularios, metac√≥digos, etc. <br><br>  T√≠picamente, los m√≥dulos usan elementos de otros m√≥dulos para declarar sus propios / expandir elementos existentes.  En consecuencia, si el m√≥dulo B usa elementos del m√≥dulo A, entonces es necesario indicar en el m√≥dulo B que depende de A. <br><br>  En funci√≥n de sus dependencias, todos los m√≥dulos del proyecto est√°n organizados en un cierto orden en el que se inicializan (este orden desempe√±a un papel importante cuando se utiliza el mecanismo de extensi√≥n mencionado anteriormente).  Se garantiza que si el m√≥dulo B depende del m√≥dulo A, entonces la inicializaci√≥n del m√≥dulo A ocurrir√° antes que la inicializaci√≥n del m√≥dulo B. Las dependencias c√≠clicas entre los m√≥dulos en el proyecto no est√°n permitidas. <br><br>  Las dependencias entre m√≥dulos son transitivas.  Es decir, si el m√≥dulo C depende del m√≥dulo B y el m√≥dulo B depende del m√≥dulo A, entonces se considera que el m√≥dulo C tambi√©n depende del m√≥dulo A. <br><br>  Cualquier m√≥dulo siempre depende autom√°ticamente del m√≥dulo del sistema Sistema, independientemente de si se indica expl√≠citamente o no. <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">MODULE</font> EmployeeExample; <font color="#808080"><i>//   </i></font> <br> <br> <font color="#a626a4">REQUIRE</font> Authentication, Utils; <font color="#808080"><i>//  ,     Employee</i></font> <br> <font color="#a626a4">NAMESPACE</font> Employee; <font color="#808080"><i>//   </i></font> <br> <br> <font color="#a626a4">CLASS</font> Employee <font color="#50a14f">''</font> ; <font color="#808080"><i>//  </i></font> <br> <font color="#a626a4">CLASS</font> Position <font color="#50a14f">''</font> ; <font color="#808080"><i>//    </i></font> <br> <br> employeePosition(employee) = <font color="#a626a4">DATA</font> Position (Employee); <font color="#808080"><i>//  </i></font> <br></code> </td></tr></tbody></table></div><br><a name="meta"></a><h3>  Metaprogramaci√≥n </h3><br>  La metaprogramaci√≥n es un tipo de programaci√≥n asociada con la escritura de c√≥digo de programa, que como resultado genera otro c√≥digo de programa.  LsFusion utiliza los llamados metac√≥digos para la metaprogramaci√≥n. <br><br>  El metac√≥digo consta de: <br><br><ul><li>  nombre del metac√≥digo </li><li>  par√°metros de metac√≥digo </li><li>  cuerpo de un metac√≥digo: un bloque de c√≥digo que consta de declaraciones y / o extensiones de elementos del sistema (propiedades, acciones, eventos, otros metac√≥digos, etc.) </li></ul><br>  En consecuencia, antes de comenzar el procesamiento principal del c√≥digo, la plataforma lo prepara, reemplaza todos los usos de metacodes con los cuerpos de estos metacodes.  En este caso, todos los par√°metros de metac√≥digo utilizados en identificadores / literales de cadena se reemplazan con los argumentos pasados ‚Äã‚Äãa este metac√≥digo: <br><br>  Anuncio: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">META</font> addActions(formName) <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> formName <br> <font color="#a626a4">PROPERTIES</font> () showMessage, closeForm <br> ; <br> <font color="#a626a4">END</font> <br></code> </td></tr></tbody></table></div>  Uso: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#4078f2">@addActions</font> (documentForm); <br> <font color="#4078f2">@addActions</font> (orderForm); <br></code> </td></tr></tbody></table></div>  C√≥digo resultante: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> documentForm <br> <font color="#a626a4">PROPERTIES</font> () showMessage, closeForm <br> ; <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> orderForm <br> <font color="#a626a4">PROPERTIES</font> () showMessage, closeForm <br> ; <br></code> </td></tr></tbody></table></div>  Adem√°s de simplemente sustituir los par√°metros del metac√≥digo, la plataforma tambi√©n le permite combinar estos par√°metros con identificadores / literales de cadena existentes (o entre s√≠), por ejemplo: <br><br>  Anuncio: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">META</font> objectProperties(object, caption) <br> object <font color="#4078f2">##</font> Name <font color="#50a14f">' '</font> <font color="#4078f2">##</font> caption = <font color="#a626a4">DATA</font> <font color="#a626a4">BPSTRING</font> [ <font color="#986801">100</font> ](object); <br> object <font color="#4078f2">##</font> Type <font color="#50a14f">' '</font> <font color="#4078f2">##</font> caption = <font color="#a626a4">DATA</font> Type (object); <br> object <font color="#4078f2">##</font> Value <font color="#50a14f">' '</font> <font color="#4078f2">##</font> caption = <font color="#a626a4">DATA</font> <font color="#a626a4">INTEGER</font> (object); <br> <font color="#a626a4">END</font> <br></code> </td></tr></tbody></table></div>  Uso: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#4078f2">@objectProperties</font> (document, <font color="#50a14f">''</font> ); <br></code> </td></tr></tbody></table></div>  C√≥digo resultante: <br><div class="scrollable-table"><table><tbody><tr><td> <code>DocumentName <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">BPSTRING</font> [ <font color="#986801">100</font> ](Document); <br> DocumentType <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> Type (Document); <br> DocumentValue <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">INTEGER</font> (Document); <br></code> </td></tr></tbody></table></div>  Los metac√≥digos son muy similares a las macros en C, pero, a diferencia de este √∫ltimo, no funcionan a nivel de texto (por ejemplo, no pueden pasar palabras clave en el par√°metro), sino solo a nivel de identificadores / literales de cadena (esta restricci√≥n, en particular, permite analizando el cuerpo del metac√≥digo en el IDE). <br><br>  En lsFusion, los metac√≥digos resuelven problemas similares a los gen√©ricos en Java (pasando clases como par√°metros) y lambda en FP (pasando funciones como par√°metros), sin embargo, no lo hacen muy bien.  Pero, por otro lado, lo hacen en un caso mucho m√°s general (es decir, con la posibilidad de combinar identificadores, usar en cualquier construcci√≥n sint√°ctica: formas, dise√±os, navegador, etc.) <br><br>  Tenga en cuenta que el "despliegue" de metac√≥digos es compatible no solo en la plataforma en s√≠, sino tambi√©n en el IDE.  Entonces, en el IDE hay un modo especial Habilitar meta, que genera el c√≥digo resultante directamente en las fuentes y, por lo tanto, permite que este c√≥digo generado participe en la b√∫squeda de usos, autocompletado, etc.  En este caso, si el cuerpo del metac√≥digo cambia, el IDE actualiza autom√°ticamente todos los usos de este metac√≥digo. <br><br><img src="https://habrastorage.org/webt/_x/3p/xo/_x3pxoomnmxrrrxk7qinrjkmca4.gif"><br><br>  Adem√°s, los metac√≥digos se pueden usar no solo para la generaci√≥n autom√°tica de c√≥digos, sino tambi√©n para la generaci√≥n manual de c√≥digos (como plantillas).  Para hacer esto, es suficiente escribir @@ en lugar de uno @ e inmediatamente despu√©s de que la cadena de uso del metac√≥digo se haya ingresado por completo (hasta el punto y coma), el IDE reemplazar√° este uso del metac√≥digo con el c√≥digo generado por este metac√≥digo: <br><br><img src="https://habrastorage.org/webt/bd/jr/lv/bdjrlvo5a2fkwgyosx07rg56-20.gif"><br><br><a name="integration"></a><h3>  Integraci√≥n </h3><br>  La integraci√≥n incluye todo lo relacionado con la interacci√≥n del sistema lsFusion con otros sistemas.  Desde el punto de vista de la direcci√≥n de esta interacci√≥n, la integraci√≥n se puede dividir en: <br><br><ul><li>  Accediendo al sistema lsFusion desde otro sistema. </li><li>  Acceso desde el sistema lsFusion a otro sistema. </li></ul><br>  Desde el punto de vista del modelo f√≠sico, la integraci√≥n se puede dividir en: <br><br><ul><li>  Interacci√≥n con sistemas que se ejecutan en el "mismo entorno" que el sistema lsFusion (es decir, en la m√°quina virtual Java (JVM) del servidor lsFusion y / o que utilizan el mismo servidor SQL que el sistema lsFusion). </li><li>  Interacci√≥n con sistemas remotos a trav√©s de protocolos de red. </li></ul><br>  En consecuencia, los primeros sistemas se llamar√°n internos, el segundo, externos. <br><br>  Por lo tanto, hay cuatro tipos diferentes de integraci√≥n en la plataforma: <br><br><ul><li>  Apelar a un sistema externo </li><li>  Apelar desde un sistema externo </li><li>  Apelar al sistema interno </li><li>  Apelaci√≥n del sistema interno </li></ul><br><a name="toext"></a><h3>  Apelar a un sistema externo </h3><br>  El acceso a sistemas externos en lsFusion en la mayor√≠a de los casos se implementa utilizando el operador especial EXTERNO.  Este operador ejecuta el c√≥digo dado en el lenguaje / en el paradigma del sistema externo dado.  Adem√°s, este operador le permite transferir objetos de tipos primitivos como par√°metros de dicha llamada, as√≠ como escribir los resultados de la llamada en las propiedades especificadas (sin par√°metros). <br><br>  Actualmente, la plataforma admite los siguientes tipos de interacciones / sistemas externos: <br><br>  <b>HTTP: realiza una solicitud http desde un servidor web.</b> <br><br>  Para este tipo de interacci√≥n, debe especificar una cadena de consulta (URL), que determina simult√°neamente la direcci√≥n del servidor y la solicitud que debe ejecutarse.  Los par√°metros se pueden transferir tanto en la l√≠nea de consulta (para acceder al par√°metro, se utilizan el car√°cter especial $ y el n√∫mero de este par√°metro, a partir de 1), como en su cuerpo (BODY).  Se supone que todos los par√°metros no utilizados en la cadena de consulta se pasan a BODY.  Si hay m√°s de un par√°metro en BODY, el tipo de contenido BODY durante la transmisi√≥n se establece en multiparte / mixto, y los par√°metros se transfieren como componentes de este BODY. <br><br>  Al procesar par√°metros de clases de archivo (FILE, PDFFILE, etc.) en BODY, el tipo de contenido del par√°metro se determina en funci√≥n de la extensi√≥n del archivo (de acuerdo con la siguiente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tabla</a> ).  Si la extensi√≥n del archivo no est√° en esta tabla, el tipo de contenido se establece en application / &lt;file extension&gt;. <br><br>  Si es necesario, utilizando la opci√≥n especial (HEADERS), puede configurar los encabezados de la solicitud ejecutada.  Para hacer esto, debe especificar una propiedad con exactamente un par√°metro de la clase de cadena en la que se almacenar√° el t√≠tulo, y el valor de la clase de cadena en la que se almacenar√° el valor de este encabezado. <br><br>  El resultado de la solicitud http se procesa de la misma manera que sus par√°metros, solo en la direcci√≥n opuesta: por ejemplo, si el tipo de contenido del resultado est√° presente en la siguiente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tabla</a> o es igual a application / *, se considera que el resultado obtenido es un archivo y debe escribirse en una propiedad con el valor FILE .  Los encabezados del resultado de la solicitud http se procesan por analog√≠a con los encabezados de esta solicitud (con la √∫nica diferencia de que la opci√≥n se llama HEADERSTO, no HEADERS). <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTERNAL</font> <font color="#a626a4">HTTP</font> <font color="#a626a4">GET</font> <font color="#50a14f">'https://www.cs.cmu.edu/~chuck/lennapg/len_std.jpg'</font> <font color="#a626a4">TO</font> exportFile; <br> open(exportFile()); <br> <br> <font color="#a626a4">LOCAL</font> headers = <font color="#a626a4">STRING</font> ( <font color="#a626a4">STRING</font> ); <br> headers( <font color="#50a14f">'Authentication : Bearer'</font> ) &lt;- <font color="#50a14f">'d43ks43ds343dd233'</font> '; <br> <font color="#a626a4">EXTERNAL</font> <font color="#a626a4">HTTP</font> <font color="#50a14f">'http://tryonline.lsfusion.org/exec?action=getExamples'</font> <br> <font color="#a626a4">HEADERS</font> headers <br> <font color="#a626a4">HEADERSTO</font> headers <br> <font color="#a626a4">PARAMS</font> <font color="#a626a4">JSONFILE</font> ( <font color="#50a14f">'\{"mode"=1\}'</font> ) <br> <font color="#a626a4">TO</font> exportFile; <br> <br> <font color="#a626a4">IMPORT</font> <font color="#a626a4">FROM</font> exportFile() <font color="#a626a4">FIELDS</font> () <font color="#a626a4">STRING</font> caption, <font color="#a626a4">STRING</font> code <font color="#a626a4">DO</font> <br> <font color="#a626a4">MESSAGE</font> <font color="#50a14f">'Example : '</font> + caption + <font color="#50a14f">', code : '</font> + code; <br> <font color="#a626a4">FOR</font> v = headers( <font color="#a626a4">STRING</font> s) <font color="#a626a4">DO</font> <br> <font color="#a626a4">MESSAGE</font> <font color="#50a14f">'Result Header is : Key - '</font> + s + <font color="#50a14f">', Value - '</font> + v; <br></code> </td></tr></tbody></table></div>  <b>SQL: ejecutar un comando del servidor SQL.</b> <br><br>  Para este tipo de interacci√≥n, se especifican la cadena de conexi√≥n y los comandos SQL que se ejecutar√°n.  Los par√°metros se pueden pasar tanto en la cadena de conexi√≥n como en el comando SQL.  Para acceder al par√°metro, se utilizan el car√°cter especial $ y el n√∫mero de este par√°metro (a partir de 1). <br><br>  Los par√°metros de las clases de archivo (FILE, PDFFILE, etc.) solo se pueden usar en el comando SQL.  Adem√°s, si alguno de los par√°metros durante la ejecuci√≥n es un archivo TABLE (TABLEFILE o FILE con la extensi√≥n de tabla), este par√°metro tambi√©n se considera una tabla en este caso: <br><br><ul><li>  antes de ejecutar el comando SQL, el valor de cada par√°metro se carga en el servidor en una tabla temporal <br></li><li>  al sustituir par√°metros, no se sustituye el valor del par√°metro en s√≠, sino el nombre de la tabla temporal creada <br></li></ul><br>  Los resultados de la ejecuci√≥n son: para consultas DML - n√∫meros iguales al n√∫mero de registros procesados, para consultas SELECT - archivos en formato TABLE (ARCHIVO con la extensi√≥n de tabla) que contienen los resultados de estas consultas.  El orden de estos resultados coincide con el orden de ejecuci√≥n de las consultas correspondientes en el comando SQL. <br><div class="scrollable-table"><table><tbody><tr><td> <code>externalSQL ()  { <br> <font color="#a626a4">EXPORT</font> <font color="#a626a4">TABLE</font> <font color="#a626a4">FROM</font> bc=barcode(Article a) <font color="#a626a4">WHERE</font> name(a) <font color="#a626a4">LIKE</font> <font color="#50a14f">'%%'</font> ; <font color="#808080"><i>//   -    </i></font> <br> <font color="#a626a4">EXTERNAL</font> <font color="#a626a4">SQL</font> <font color="#50a14f">'jdbc:mysql://$1/test?user=root&amp;password='</font> <br> <font color="#a626a4">EXEC</font> <font color="#50a14f">'select price AS pc, articles.barcode AS brc from $2 x JOIN articles ON x.bc=articles.barcode'</font> <br> <font color="#a626a4">PARAMS</font> <font color="#50a14f">'localhost'</font> ,exportFile() <br> <font color="#a626a4">TO</font> exportFile; <font color="#808080"><i>//     -</i></font> <br> <br> <font color="#808080"><i>//      -  </i></font> <br> <font color="#a626a4">LOCAL</font> price = <font color="#a626a4">INTEGER</font> ( <font color="#a626a4">INTEGER</font> ); <br> <font color="#a626a4">LOCAL</font> barcode = <font color="#a626a4">STRING</font> [ <font color="#986801">30</font> ] ( <font color="#a626a4">INTEGER</font> ); <br> <font color="#a626a4">IMPORT</font> <font color="#a626a4">FROM</font> exportFile() <font color="#a626a4">TO</font> price=pc,barcode=brc; <br> <font color="#a626a4">FOR</font> barcode(Article a) = barcode( <font color="#a626a4">INTEGER</font> i) <font color="#a626a4">DO</font> <br> price(a) &lt;- price(i); <br> } <br></code> </td></tr></tbody></table></div>  <b>LSF: una llamada a la acci√≥n de otro servidor lsFusion.</b> <br><br>  Para este tipo de interacci√≥n, se establece la cadena de conexi√≥n al servidor lsFusion (o su servidor web, si corresponde), la acci√≥n a realizar, as√≠ como una lista de propiedades (sin par√°metros), en cuyos valores se escribir√°n los resultados de la llamada.  Los par√°metros a transferir deben coincidir en n√∫mero y clase con los par√°metros de la acci√≥n que se realiza. <br><br>  El m√©todo de establecer la acci√≥n en este tipo de interacci√≥n es totalmente consistente con el m√©todo de establecer la acci√≥n cuando se accede desde un sistema externo (sobre este tipo de acceso en la siguiente secci√≥n). <br><div class="scrollable-table"><table><tbody><tr><td> <code>externalLSF()  { <br> <font color="#a626a4">EXTERNAL</font> <font color="#a626a4">LSF</font> <font color="#50a14f">'http://localhost:7651'</font> <font color="#a626a4">EXEC</font> <font color="#50a14f">'System.testAction[]'</font> ; <br> } <br></code> </td></tr></tbody></table></div>  Por defecto, este tipo de interacci√≥n se implementa usando el protocolo HTTP usando las interfaces apropiadas para acceder a / desde un sistema externo. <br><br>  En el caso de que necesite acceder al sistema utilizando un protocolo diferente al anterior, siempre puede hacerlo creando una acci√≥n en Java e implementando esta llamada all√≠ (pero m√°s sobre eso m√°s adelante en la secci√≥n "Acceso a sistemas internos") <br><br><a name="fromext"></a><h3>  Apelar desde un sistema externo </h3><br>  La plataforma permite que los sistemas externos accedan al sistema desarrollado en lsFusion utilizando el protocolo de red HTTP.  La interfaz de esta interacci√≥n es llamar a alguna acci√≥n con los par√°metros dados y, si es necesario, devolver los valores de algunas propiedades (sin par√°metros) como resultados.  Se supone que todos los objetos de par√°metros y resultados son objetos de tipos primitivos. <br><br>  La acci√≥n llamada se puede establecer de tres maneras: <br><br><ul><li>  / exec? action = &lt;nombre de acci√≥n&gt;: establece el nombre de la acci√≥n llamada. </li><li>  / eval? script = &lt;code&gt;: establece el c√≥digo en lsFusion.  Se supone que en este c√≥digo hay una declaraci√≥n de una acci√≥n con el nombre ejecutado, es esta acci√≥n la que se llamar√°.  Si no se especifica el par√°metro de script, se supone que el c√≥digo se pasa como el primer par√°metro BODY. </li><li>  / eval / action? script = &lt;c√≥digo de acci√≥n&gt;: establece el c√≥digo de acci√≥n en lsFusion.  Para acceder a los par√°metros, puede usar el car√°cter especial $ y el n√∫mero de par√°metro (a partir de 1). </li></ul><br>  En el segundo y tercer caso, si no se especifica el par√°metro de secuencia de comandos, se supone que el primer par√°metro BODY pasa el c√≥digo. <br><br>  El procesamiento de par√°metros y resultados es sim√©trico para acceder a sistemas externos utilizando el protocolo HTTP (con la √∫nica diferencia de que los par√°metros se procesan como resultados y, por el contrario, los resultados se procesan como par√°metros), por lo que no nos repetiremos mucho. <br><br>  Por ejemplo, si tenemos una acci√≥n: <br><div class="scrollable-table"><table><tbody><tr><td> <code>importOrder( <font color="#a626a4">INTEGER</font> no, <font color="#a626a4">DATE</font> date, <font color="#a626a4">FILE</font> detail) { <br> <font color="#a626a4">NEW</font> o = FOrder { <br> no(o) &lt;- no; <br> date(o) &lt;- date; <br> <font color="#a626a4">LOCAL</font> detailId = <font color="#a626a4">INTEGER</font> ( <font color="#a626a4">INTEGER</font> ); <br> <font color="#a626a4">LOCAL</font> detailQuantity = <font color="#a626a4">INTEGER</font> ( <font color="#a626a4">INTEGER</font> ); <br> <font color="#a626a4">IMPORT</font> <font color="#a626a4">FROM</font> detail <font color="#a626a4">TO</font> detailId, detailQuantity; <br> <font color="#a626a4">FOR</font> imported( <font color="#a626a4">INTEGER</font> i) <font color="#a626a4">DO</font> { <br> <font color="#a626a4">NEW</font> od = FOrderDetail { <br> id(od) &lt;- detailId(i); <br> quantity(od) &lt;- detailQuantity(i); <br> price(od) &lt;- <font color="#986801">5</font> ; <br> order(od) &lt;- o; <br> } <br> } <br> <font color="#a626a4">APPLY</font> ; <br> <font color="#a626a4">EXPORT</font> <font color="#a626a4">JSON</font> <font color="#a626a4">FROM</font> price = price(FOrderDetail od), id = id(od) <font color="#a626a4">WHERE</font> order(od) = o; <br> <font color="#a626a4">EXPORT</font> <font color="#a626a4">FROM</font> orderPrice(o), exportFile(); <br> } <br> } <br></code> </td></tr></tbody></table></div>  Luego puede acceder a √©l utilizando una solicitud POST que: <br><ul><li>  URL: http: // server_address / exec? Action = importOrder &amp; p = 123 &amp; p = 2019-01-01 </li><li>  BODY - archivo json con cadenas de consulta </li></ul><br><div class="spoiler">  <b class="spoiler_title">Ejemplo de llamada de Python</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> requests_toolbelt.multipart <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> decoder lsfCode = (<span class="hljs-string"><span class="hljs-string">"run(INTEGER no, DATE date, FILE detail) {\n"</span></span> <span class="hljs-string"><span class="hljs-string">" NEW o = FOrder {\n"</span></span> <span class="hljs-string"><span class="hljs-string">" no(o) &lt;- no;\n"</span></span> <span class="hljs-string"><span class="hljs-string">" date(o) &lt;- date;\n"</span></span> <span class="hljs-string"><span class="hljs-string">" LOCAL detailId = INTEGER (INTEGER);\n"</span></span> <span class="hljs-string"><span class="hljs-string">" LOCAL detailQuantity = INTEGER (INTEGER);\n"</span></span> <span class="hljs-string"><span class="hljs-string">" IMPORT JSON FROM detail TO detailId, detailQuantity;\n"</span></span> <span class="hljs-string"><span class="hljs-string">" FOR imported(INTEGER i) DO {\n"</span></span> <span class="hljs-string"><span class="hljs-string">" NEW od = FOrderDetail {\n"</span></span> <span class="hljs-string"><span class="hljs-string">" id(od) &lt;- detailId(i);\n"</span></span> <span class="hljs-string"><span class="hljs-string">" quantity(od) &lt;- detailQuantity(i);\n"</span></span> <span class="hljs-string"><span class="hljs-string">" price(od) &lt;- 5;\n"</span></span> <span class="hljs-string"><span class="hljs-string">" order(od) &lt;- o;\n"</span></span> <span class="hljs-string"><span class="hljs-string">" }\n"</span></span> <span class="hljs-string"><span class="hljs-string">" }\n"</span></span> <span class="hljs-string"><span class="hljs-string">" APPLY;\n"</span></span> <span class="hljs-string"><span class="hljs-string">" EXPORT JSON FROM price = price(FOrderDetail od), id = id(od) WHERE order(od) == o;\n"</span></span> <span class="hljs-string"><span class="hljs-string">" EXPORT FROM orderPrice(o), exportFile();\n"</span></span> <span class="hljs-string"><span class="hljs-string">" }\n"</span></span> <span class="hljs-string"><span class="hljs-string">"}"</span></span>) order_no = <span class="hljs-number"><span class="hljs-number">354</span></span> order_date = <span class="hljs-string"><span class="hljs-string">'10.10.2017'</span></span> order_details = [dict(id=<span class="hljs-number"><span class="hljs-number">1</span></span>, quantity=<span class="hljs-number"><span class="hljs-number">10</span></span>), dict(id=<span class="hljs-number"><span class="hljs-number">2</span></span>, quantity=<span class="hljs-number"><span class="hljs-number">15</span></span>), dict(id=<span class="hljs-number"><span class="hljs-number">5</span></span>, quantity=<span class="hljs-number"><span class="hljs-number">4</span></span>), dict(id=<span class="hljs-number"><span class="hljs-number">10</span></span>, quantity=<span class="hljs-number"><span class="hljs-number">18</span></span>), dict(id=<span class="hljs-number"><span class="hljs-number">11</span></span>, quantity=<span class="hljs-number"><span class="hljs-number">1</span></span>), dict(id=<span class="hljs-number"><span class="hljs-number">12</span></span>, quantity=<span class="hljs-number"><span class="hljs-number">3</span></span>)] order_json = json.dumps(order_details) url = <span class="hljs-string"><span class="hljs-string">'http://localhost:7651/eval'</span></span> payload = {<span class="hljs-string"><span class="hljs-string">'script'</span></span>: lsfCode, <span class="hljs-string"><span class="hljs-string">'no'</span></span>: str(order_no), <span class="hljs-string"><span class="hljs-string">'date'</span></span>: order_date, <span class="hljs-string"><span class="hljs-string">'detail'</span></span>: (<span class="hljs-string"><span class="hljs-string">'order.json'</span></span>, order_json, <span class="hljs-string"><span class="hljs-string">'text/json'</span></span>)} response = requests.post(url, files=payload) multipart_data = decoder.MultipartDecoder.from_response(response) sum_part, json_part = multipart_data.parts sum = int(sum_part.text) data = json.loads(json_part.text) <span class="hljs-comment"><span class="hljs-comment">############################################################## print(sum) for item in data: print('{0:3}: price {1}'.format(int(item['id']), int(item['price']))) ############################################################## # 205 # 4: price 5 # 18: price 5 # 3: price 5 # 1: price 5 # 10: price 5 # 15: price 5</span></span></code> </pre></div></div><br><a name="toint"></a><h3>  Apelar al sistema interno </h3><br>  Hay dos tipos de interacci√≥n interna: <br><br>  <b>Interoperabilidad Java</b> <br><br>  Este tipo de interacci√≥n le permite llamar al c√≥digo Java dentro del servidor JVM lsFusion.  Para hacer esto, debes: <br><br><ul><li>  aseg√∫rese de que la clase Java compilada sea accesible en el classpath del servidor de aplicaciones.  Tambi√©n es necesario que esta clase herede lsfusion.server.physics.dev.integration.internal.to.InternalAction. <br><div class="spoiler">  <b class="spoiler_title">Ejemplo de clase Java</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.data.sql.exception.SQLHandledException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.language.ScriptingErrorLog; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.language.ScriptingLogicsModule; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.logics.action.controller.context.ExecutionContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.logics.classes.ValueClass; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.logics.property.classes.ClassPropertyInterface; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.physics.dev.integration.internal.to.InternalAction; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.math.BigInteger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.sql.SQLException; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CalculateGCD</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InternalAction</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CalculateGCD</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ScriptingLogicsModule LM, ValueClass... classes)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(LM, classes); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">executeInternal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ExecutionContext&lt;ClassPropertyInterface&gt; context)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> SQLException, SQLHandledException </span></span>{ BigInteger b1 = BigInteger.valueOf((Integer)getParam(<span class="hljs-number"><span class="hljs-number">0</span></span>, context)); BigInteger b2 = BigInteger.valueOf((Integer)getParam(<span class="hljs-number"><span class="hljs-number">1</span></span>, context)); BigInteger gcd = b1.gcd(b2); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { findProperty(<span class="hljs-string"><span class="hljs-string">"gcd[]"</span></span>).change(gcd.intValue(), context); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (ScriptingErrorLog.SemanticErrorException ignored) { } } }</code> </pre></div></div></li><li>  registrar una acci√≥n utilizando el operador especial de llamadas internas (INTERNO) <br><div class="scrollable-table"><table><tbody><tr><td> <code>calculateGCD <font color="#50a14f">' '</font> <font color="#a626a4">INTERNAL</font> <font color="#50a14f">'CalculateGCD'</font> ( <font color="#a626a4">INTEGER</font> , <font color="#a626a4">INTEGER</font> ); <br></code> </td></tr></tbody></table></div></li><li>  Se puede invocar una acci√≥n registrada, como cualquier otra, utilizando el operador de llamada.  En este caso, se ejecutar√° el m√©todo executeInternal (lsfusion.server.logics.action.controller.context.ExecutionContext) de la clase Java especificada. <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#808080"><i>//  </i></font> <br> <font color="#a626a4">FORM</font> gcd <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> (a = <font color="#a626a4">INTEGER</font> , b = <font color="#a626a4">INTEGER</font> ) <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> <font color="#50a14f">'A'</font> = <font color="#a626a4">VALUE</font> (a), <font color="#50a14f">'B'</font> = <font color="#a626a4">VALUE</font> (b) <br> <br> <font color="#a626a4">PROPERTIES</font> gcd(), calculateGCD(a, b) <br> ; <br> <br> <font color="#808080"><i>//   </i></font> <br> run() { <br> calculateGCD( <font color="#986801">100</font> , <font color="#986801">200</font> ); <br> } <br></code> </td></tr></tbody></table></div></li></ul>  <b>Interacci√≥n SQL</b> <br><br>  Este tipo de interacci√≥n le permite acceder a los objetos / construcciones de sintaxis del servidor SQL utilizado por el sistema desarrollado lsFusion.  Para implementar este tipo de interacci√≥n en la plataforma, se utiliza un operador especial: FORMULA.  Este operador le permite crear una propiedad que eval√∫a alguna f√≥rmula en el lenguaje SQL.  La f√≥rmula se establece en forma de una cadena dentro de la cual se utilizan el car√°cter especial $ y el n√∫mero de este par√°metro para acceder al par√°metro (a partir de 1).  En consecuencia, el n√∫mero de par√°metros de la propiedad obtenida ser√° igual al m√°ximo de los n√∫meros de los par√°metros utilizados. <br><div class="scrollable-table"><table><tbody><tr><td> <code>round(number, digits) = <font color="#a626a4">FORMULA</font> <font color="#50a14f">'round(CAST(($1) as numeric),$2)'</font> ; <font color="#808080"><i>//    :       </i></font> <br> jumpWorkdays = <font color="#a626a4">FORMULA</font> <font color="#a626a4">NULL</font> <font color="#a626a4">DATE</font> <font color="#a626a4">PG</font> <font color="#50a14f">'jumpWorkdays($1, $2, $3)'</font> , <font color="#a626a4">MS</font> <font color="#50a14f">'dbo.jumpWorkdays($1, $2, $3)'</font> ; <font color="#808080"><i>//         SQL</i></font> <br></code> </td></tr></tbody></table></div>  Se recomienda usar este operador solo en los casos en que el problema no se pueda resolver con la ayuda de otros operadores, y tambi√©n si se garantiza que los servidores SQL espec√≠ficos se pueden usar, o las construcciones de sintaxis utilizadas cumplen con uno de los √∫ltimos est√°ndares SQL. <br><br><a name="fromint"></a><h3>  Apelaci√≥n del sistema interno </h3><br>  Todo es sim√©trico al atractivo del sistema interno.  Hay dos tipos de interacci√≥n: <br><br>  <b>Interoperabilidad Java</b> <br><br>  Dentro del marco de este tipo de interacci√≥n, el sistema interno puede acceder directamente a los elementos Java del sistema lsFusion (como los objetos Java normales).  Por lo tanto, puede realizar las mismas operaciones que usar protocolos de red, pero al mismo tiempo evitar una sobrecarga significativa de dicha interacci√≥n (por ejemplo, serializaci√≥n de par√°metros / deserializaci√≥n del resultado, etc.).  Adem√°s, este m√©todo de comunicaci√≥n es mucho m√°s conveniente y eficiente si la interacci√≥n es muy cercana (es decir, durante la ejecuci√≥n de una operaci√≥n, se requiere un contacto constante en ambas direcciones, desde el sistema lsFusion a otro sistema y viceversa) y / o requiere acceso a nodos de plataforma espec√≠ficos. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para acceder a los elementos Java de un sistema lsFusion directamente, primero debe obtener un enlace a alg√∫n objeto que tenga interfaces para encontrar estos elementos Java. </font><font style="vertical-align: inherit;">Esto generalmente se hace de una de dos maneras:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Si inicialmente la llamada proviene del sistema lsFusion (a trav√©s del mecanismo descrito anteriormente), entonces, como "objeto de b√∫squeda", puede usar el objeto de acci√≥n "a trav√©s del cual" pasa esta llamada (la clase de esta acci√≥n debe heredarse de lsfusion.server.physics.dev.integration. internal.to.InternalAction, que, a su vez, tiene todas las interfaces necesarias). </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Si el objeto desde cuyo m√©todo es necesario acceder al sistema lsFusion es un bean Spring, entonces se puede obtener un enlace al objeto de l√≥gica de negocios usando la inyecci√≥n de dependencia (el bean se llama businessLogics, respectivamente). </font></font></li></ul><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo de clase Java</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.data.sql.exception.SQLHandledException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.data.value.DataObject; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.language.ScriptingErrorLog; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.language.ScriptingLogicsModule; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.logics.action.controller.context.ExecutionContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.logics.classes.ValueClass; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.logics.property.classes.ClassPropertyInterface; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lsfusion.server.physics.dev.integration.internal.to.InternalAction; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.math.BigInteger; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.sql.SQLException; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CalculateGCDObject</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InternalAction</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CalculateGCDObject</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ScriptingLogicsModule LM, ValueClass... classes)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(LM, classes); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">executeInternal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ExecutionContext&lt;ClassPropertyInterface&gt; context)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> SQLException, SQLHandledException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { DataObject calculation = (DataObject)getParamValue(<span class="hljs-number"><span class="hljs-number">0</span></span>, context); BigInteger a = BigInteger.valueOf((Integer)findProperty(<span class="hljs-string"><span class="hljs-string">"a"</span></span>).read(context, calculation)); BigInteger b = BigInteger.valueOf((Integer)findProperty(<span class="hljs-string"><span class="hljs-string">"b"</span></span>).read(context, calculation)); BigInteger gcd = a.gcd(b); findProperty(<span class="hljs-string"><span class="hljs-string">"gcd[Calculation]"</span></span>).change(gcd.intValue(), context, calculation); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (ScriptingErrorLog.SemanticErrorException ignored) { } } }</code> </pre></div></div><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sistemas de </font><b><font style="vertical-align: inherit;">interacci√≥n SQL</font></b><font style="vertical-align: inherit;"> que tienen acceso al servidor SQL del sistema lsFusion (uno de esos sistemas, por ejemplo, es el propio servidor SQL), pueden acceder directamente a las tablas y campos creados por el sistema lsFusion utilizando las herramientas del servidor SQL. Debe tenerse en cuenta que si la lectura de datos es relativamente segura (a excepci√≥n de la posible eliminaci√≥n / modificaci√≥n de tablas y sus campos), no se desencadenar√° ning√∫n evento cuando se escriban los datos (y, en consecuencia, todos los elementos que los usan: restricciones, agregaciones, etc. n.), y tampoco se volver√°n a contar las materializaciones. Por lo tanto, no se recomienda escribir datos directamente en las tablas del sistema lsFusion y, si es necesario, es importante tener en cuenta todas las caracter√≠sticas anteriores.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tenga en cuenta que dicha interacci√≥n directa (pero solo para lectura) es especialmente conveniente para la integraci√≥n con varios sistemas OLAP, donde todo el proceso debe ocurrir con una sobrecarga m√≠nima.</font></font><br><br><a name="migration"></a><h2>  La migracion </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la pr√°ctica, a menudo surgen situaciones en las que, por diversos motivos, es necesario cambiar los nombres de los elementos existentes del sistema. Si el elemento a renombrar no est√° asociado con ning√∫n dato primario, esto puede hacerse sin ning√∫n gesto innecesario. Pero si este elemento es una propiedad o clase primaria, entonces un cambio de nombre "silencioso" conducir√° al hecho de que los datos de esta propiedad o clase primaria simplemente desaparecer√°n. Para evitar esto, el desarrollador puede crear un archivo especial de migraci√≥n migration.script, colocarlo en el classpath del servidor e indicar en √©l c√≥mo los nombres de los elementos antiguos corresponden a los nuevos nombres. Todo funciona de la siguiente manera:</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La migraci√≥n consiste en bloques que describen los cambios realizados en la versi√≥n especificada de la estructura de la base de datos. </font><font style="vertical-align: inherit;">Al iniciar el servidor, se aplican todos los cambios del archivo de migraci√≥n que tienen una versi√≥n superior a la versi√≥n almacenada en la base de datos. </font><font style="vertical-align: inherit;">Los cambios se aplican de acuerdo con la versi√≥n, desde una versi√≥n m√°s peque√±a a una m√°s grande. </font><font style="vertical-align: inherit;">Si la estructura de la base de datos se cambia con √©xito, la versi√≥n m√°xima de todos los bloques aplicados se escribe en la base de datos como la actual. </font><font style="vertical-align: inherit;">La sintaxis para la descripci√≥n de cada bloque es la siguiente:</font></font><br><br><pre> <code class="plaintext hljs">V&lt; &gt; { 1 ... N }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Los cambios, a su vez, son de los siguientes tipos: </font></font><br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">DATA</font> <font color="#a626a4">PROPERTY</font> oldNS.oldName[class1,...,classN] -&gt; newNS.newName[class1,...,classN] <br> <font color="#a626a4">CLASS</font> oldNS.oldName -&gt; newNS.newName <br> <font color="#a626a4">OBJECT</font> oldNS.oldClassName.oldName -&gt; newNS.newClassName.newName <br> <br> <font color="#a626a4">TABLE</font> oldNS.oldName -&gt; newNS.newName <br> <font color="#a626a4">PROPERTY</font> oldNS.oldName[class1,...,classN] -&gt; newNS.newName[class1,...,classN] <br> <font color="#a626a4">FORM</font> <font color="#a626a4">PROPERTY</font> oldNS.oldFormName.oldName(object1,...,objectN) -&gt; newNS.newFormName.newName(object1,...,objectN) <br> <font color="#a626a4">NAVIGATOR</font> oldNS.oldName -&gt; newNS.newName <br></code> </td></tr></tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para la migraci√≥n de datos de usuario, solo los primeros tres tipos de cambios son relevantes (cambios en propiedades primarias, clases, objetos est√°ticos). </font><font style="vertical-align: inherit;">Se necesitan los cuatro tipos de cambios restantes:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para la migraci√≥n de metadatos (pol√≠ticas de seguridad, configuraci√≥n de tablas, etc.) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para optimizar la migraci√≥n de los datos del usuario (para no volver a calcular las agregaciones y no transferir datos entre las tablas una vez m√°s). </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En consecuencia, si no se necesita la migraci√≥n de metadatos o no hay muchos datos, se pueden omitir dichos cambios en el script de migraci√≥n. </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo de migraci√≥n</font></font></b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td> <code>V0. <font color="#986801">3.1</font> { <br> <font color="#a626a4">DATA</font> <font color="#a626a4">PROPERTY</font> Item.gender[Item.Article] -&gt; Item.dataGender[Item.Article] <font color="#808080"><i>//   DATA </i></font> <br> <font color="#a626a4">PROPERTY</font> System.SIDProperty[Reflection.Property] -&gt; Reflection.dbNameProperty[Reflection.Property] <font color="#808080"><i>//          </i></font> <br> <font color="#a626a4">FORM</font> <font color="#a626a4">PROPERTY</font> Item.itemForm.name(i) -&gt; Item.itemForm.itemName(i) <br> } <br> <br> V0. <font color="#986801">4</font> { <br> <font color="#a626a4">FORM</font> <font color="#a626a4">PROPERTY</font> Document.documentForm.name(i) -&gt; Document.itemForm.itemName(i) <br> <font color="#a626a4">FORM</font> <font color="#a626a4">PROPERTY</font> Item.itemForm.itemName(i) -&gt; Item.itemForm.iname <font color="#808080"><i>//       : iname = itemName(i)</i></font> <br> <font color="#a626a4">CLASS</font> Date.DateInterval -&gt; Date.Interval <br> <font color="#a626a4">OBJECT</font> Geo.Direction.North -&gt; Geo.Direction.north <br> <font color="#a626a4">TABLE</font> User.oldTable -&gt; User.newTable <br> } <br></code> </td></tr></tbody></table></div><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vale la pena se√±alar que, por lo general, la mayor parte del trabajo en la generaci√≥n de scripts de migraci√≥n se realiza utilizando el IDE. </font><font style="vertical-align: inherit;">Por lo tanto, al cambiar el nombre de la mayor√≠a de los elementos, puede especificar la casilla de verificaci√≥n especial Cambiar el archivo de migraci√≥n (habilitado de forma predeterminada), y el IDE generar√° autom√°ticamente todos los scripts necesarios.</font></font><br><br><a name="internationalization"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Internacionalizacion </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la pr√°ctica, a veces surge una situaci√≥n en la que es necesario poder usar una aplicaci√≥n en diferentes idiomas. </font><font style="vertical-align: inherit;">Esta tarea generalmente se reduce a localizar todos los datos de cadena que ve el usuario, a saber: mensajes de texto, encabezados de propiedad, acciones, formularios, etc. </font><font style="vertical-align: inherit;">Todos estos datos en lsFusion se configuran utilizando literales de cadena (cadenas entre comillas simples, por ejemplo 'abc'), respectivamente, su localizaci√≥n se realiza de la siguiente manera:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en lugar del texto a localizar, la cadena identifica los datos de la cadena, encerrados entre llaves (por ejemplo, '{button.cancel}'). </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuando esta cadena se env√≠a al cliente en el servidor, busca todos los identificadores encontrados en la cadena, luego busca cada uno de ellos en todos los </font><font style="vertical-align: inherit;">archivos de proyecto de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ResourceBundle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la configuraci√≥n regional deseada (es decir, la configuraci√≥n regional del cliente), y cuando se encuentra la opci√≥n correcta, el identificador entre par√©ntesis se reemplaza con el texto correspondiente.</font></font></li></ul><div class="scrollable-table"><table><tbody><tr><td> <code>script <font color="#50a14f">'{scheduler.script.scheduled.task.detail}'</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">TEXT</font> (ScheduledTaskDetail); <br> <font color="#a626a4">CONSTRAINT</font> script(ScheduledTaskDetail d) <font color="#a626a4">AND</font> action(d) <font color="#a626a4">MESSAGE</font> <font color="#50a14f">'{scheduler.constraint.script.and.action}'</font> ; <br> <font color="#a626a4">FORM</font> scheduledTask <font color="#50a14f">'{scheduler.form.scheduled.task}'</font> ; <br></code> </td></tr></tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ServerResourceBundle.properties: </font></font><br><pre> <code class="plaintext hljs">scheduler.script.scheduled.task.detail=Script scheduler.constraint.script.and.action=In the scheduler task property and script cannot be selected at the same time scheduler.form.scheduled.task=Tasks</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ServerResourceBundle_ru.properties </font></font><br><pre> <code class="plaintext hljs">scheduler.script.scheduled.task.detail= scheduler.constraint.script.and.action=           scheduler.form.scheduled.task=</code> </pre><br><a name="optimization"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Optimizar el rendimiento de grandes proyectos de datos </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si el sistema es peque√±o y hay relativamente pocos datos, por lo general, funciona de manera bastante eficiente sin ninguna optimizaci√≥n adicional. Si la l√≥gica se vuelve bastante complicada y la cantidad de datos aumenta significativamente, a veces tiene sentido decirle a la plataforma la mejor manera de almacenar y procesar todos estos datos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La plataforma tiene dos mecanismos principales para trabajar con datos: propiedades y acciones. El primero es responsable de almacenar y calcular datos, el segundo es transferir el sistema de un estado a otro. Y si el trabajo de las acciones puede optimizarse de manera bastante limitada (incluso debido al efecto del efecto secundario), entonces para las propiedades hay un conjunto completo de caracter√≠sticas que le permiten reducir el tiempo de respuesta de operaciones espec√≠ficas y aumentar el rendimiento general del sistema:</font></font><br><br><ul><li> .      ( ,  ),     ,   ,  . </li><li> .        ,  ,       . </li><li> .           /       ,         .       ¬´¬ª  . </li></ul><br><a name="materialized"></a><h3>  </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Casi cualquier propiedad agregada en la plataforma se puede materializar. En este caso, la propiedad se almacenar√° en la base de datos de forma constante y autom√°tica cuando se modifiquen los datos de los que depende esta propiedad. Adem√°s, al leer los valores de dicha propiedad materializada, estos valores se leer√°n directamente de la base de datos, como si la propiedad fuera primaria (y no se calculara cada vez). En consecuencia, todas las propiedades primarias se materializan por definici√≥n. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una propiedad se puede materializar si y solo para ella hay un n√∫mero finito de conjuntos de objetos para los cuales el valor de esta propiedad no es NULL. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generalmente, el tema de la materializaci√≥n se examin√≥ con suficiente detalle en un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culo reciente.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre el equilibrio de la escritura y la lectura en bases de datos, por lo que, en mi opini√≥n, hacer hincapi√© en ello en detalle aqu√≠ no tiene mucho sentido. </font></font><br><br><a name="index"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √çndices </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La creaci√≥n de un √≠ndice por propiedad le permite almacenar en la base de datos todos los valores de esta propiedad de manera ordenada. En consecuencia, el √≠ndice se actualiza cada vez que cambia el valor de la propiedad indexada. Gracias al √≠ndice, si, por ejemplo, el filtrado por propiedad indexada est√° en progreso, puede encontrar r√°pidamente los objetos necesarios, en lugar de ver todos los objetos existentes en el sistema. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solo se pueden indexar las propiedades materializadas (de la secci√≥n anterior). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambi√©n se puede construir un √≠ndice en varias propiedades a la vez (esto es efectivo si, por ejemplo, el filtrado se realiza inmediatamente en estas varias propiedades). Adem√°s, los par√°metros de propiedad se pueden incluir en dicho √≠ndice compuesto. Si las propiedades especificadas se almacenan en tablas diferentes, un intento de generar el √≠ndice dar√° como resultado el error correspondiente.</font></font><br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">INDEX</font> customer(Order o); <br> <br> date = <font color="#a626a4">DATA</font> <font color="#a626a4">DATE</font> (Order); <br> <font color="#a626a4">INDEX</font> date(Order o), o; <br> <br> <font color="#a626a4">INDEX</font> name(Sku s), price(s, <font color="#a626a4">DATE</font> d), d; <br></code> </td></tr></tbody></table></div><a name="table"></a><h3>  Mesas </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LsFusion utiliza una base de datos relacional para almacenar y calcular valores de propiedad. Todas las propiedades primarias, as√≠ como todas las propiedades agregadas que est√°n marcadas como materializadas, se almacenan en los campos de las tablas de la base de datos. Para cada tabla, hay un conjunto de campos clave con los nombres key0, key1, ..., keyN, en los que se almacenan los valores de los objetos (por ejemplo, para clases personalizadas, los identificadores de estos objetos). Todos los dem√°s campos almacenan valores de propiedad de tal manera que en el campo correspondiente de cada fila se encuentra el valor de propiedad para los objetos de los campos clave. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al crear una tabla, debe especificar una lista de clases de objetos que ser√°n las claves de esta tabla.</font></font><br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">TABLE</font> book (Book); <br> <br> in = <font color="#a626a4">DATA</font> <font color="#a626a4">BOOLEAN</font> (Sku, Stock); <br> <font color="#a626a4">TABLE</font> skuStock (Sku, Stock); <font color="#808080"><i>//      in</i></font> <br> <br> price = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">10</font> , <font color="#986801">2</font> ] (Sku, <font color="#a626a4">DATE</font> ); <br> <font color="#a626a4">TABLE</font> skuDate (Sku, <font color="#a626a4">DATE</font> ); <font color="#808080"><i>//      Sku</i></font> <br> <br> <font color="#a626a4">TABLE</font> sku (Sku); <br></code> </td></tr></tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para cada propiedad, puede especificar en qu√© tabla debe almacenarse. </font><font style="vertical-align: inherit;">En este caso, el n√∫mero de claves de tabla debe coincidir con el n√∫mero de par√°metros de propiedad, y las clases de par√°metros deben coincidir con las clases de clave de esta tabla. </font><font style="vertical-align: inherit;">Si la tabla en la que se va a almacenar no se establece expl√≠citamente para la propiedad, la propiedad se colocar√° autom√°ticamente en la tabla "m√°s cercana" existente en el sistema (es decir, el n√∫mero de claves que coincide con el n√∫mero de par√°metros de propiedad, y cuyas clases de claves son m√°s cercanas a las clases de par√°metros ) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los nombres de las tablas y campos en los que se almacenan las propiedades en el DBMS se forman de acuerdo con la pol√≠tica de nomenclatura especificada. </font><font style="vertical-align: inherit;">Actualmente, la plataforma admite tres pol√≠ticas de nomenclatura est√°ndar.</font></font><br><div class="scrollable-table"><table><tbody><tr><th>  Pol√≠tica </th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nombre de la tabla </font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nombre del campo </font></font></th></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Completo con firma (predeterminado) </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nombre_espacio Tablas </font></font></td><td> __1 <br> _2..._N </td></tr><tr><td>    </td><td> _ </td><td> _ </td></tr><tr><td>  </td><td>  </td><td>  </td></tr></tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si es necesario, para cada propiedad, el desarrollador puede especificar expl√≠citamente el nombre del campo en el que se almacenar√° esta propiedad. Adem√°s, es posible crear su propia pol√≠tica para nombrar campos de propiedad si lo anterior por alguna raz√≥n no es adecuado. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al elegir una pol√≠tica de nomenclatura, es importante tener en cuenta que el uso de una pol√≠tica de nomenclatura de propiedad demasiado corta, si el n√∫mero de propiedades materializadas es lo suficientemente grande, puede complicar en gran medida la nomenclatura de estas propiedades (por lo que es √∫nico), o, en consecuencia, conducir a la necesidad de nombrar expl√≠citamente Los campos en los que se almacenar√°n estas propiedades.</font></font><br><br><h2>  Conclusi√≥n </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como dijeron en una famosa pel√≠cula animada: "construimos, construimos y finalmente construimos". Por supuesto, puede ser un poco superficial, pero creo que puede descubrir las caracter√≠sticas b√°sicas del lenguaje / plataforma lsFusion para estos tres art√≠culos. Es hora de pasar a la parte m√°s interesante: comparar con otras tecnolog√≠as. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como lo demostr√≥ la experiencia y el formato del Habr, hacer esto de manera m√°s efectiva no jugando solo, sino en un campo extranjero. Es decir, no pasar de las oportunidades, sino de los problemas y, en consecuencia, no hablar de sus ventajas, sino de las desventajas de las tecnolog√≠as alternativas, y en su propia terminolog√≠a. Este enfoque generalmente se percibe mucho mejor en los mercados conservadores y, en mi opini√≥n, dicho mercado es el mercado para el desarrollo de sistemas de informaci√≥n, en cualquier caso, en el espacio postsovi√©tico.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Muy pronto habr√° varios art√≠culos m√°s al estilo de: "¬øPor qu√© no ...?", Y estoy seguro de que ser√°n mucho m√°s interesantes que estos tutoriales muy aburridos. </font></font><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/460887/">https://habr.com/ru/post/460887/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../460877/index.html">Kubernetes-adventure Dailymotion: construcci√≥n de infraestructura en las nubes + local</a></li>
<li><a href="../460879/index.html">DUMP Kazan 2019 - Conferencia de Desarrolladores de Tatarst√°n. Aceptamos solicitudes de informes.</a></li>
<li><a href="../460881/index.html">Dificultades para aplicar tecnolog√≠as OCR en sistemas DLP, o c√≥mo preparamos OCR</a></li>
<li><a href="../460883/index.html">Sobre la vida en un mundo de requisitos cambiantes y los beneficios de las funciones peque√±as</a></li>
<li><a href="../460885/index.html">Informes interesantes en HighLoad ++ Siberia 2019 seg√∫n Plesk</a></li>
<li><a href="../460891/index.html">C√≥mo distinguir el buen SCRUM del malo, utilizando el enfoque del fundador de la computaci√≥n cu√°ntica</a></li>
<li><a href="../460893/index.html">Una mirada a la reubicaci√≥n en Estonia desde adentro hacia afuera: pros, contras y dificultades</a></li>
<li><a href="../460897/index.html">JUnit en GitLab CI con Kubernetes</a></li>
<li><a href="../460899/index.html">26 de julio, Deworkacy - DocOps de Rostelecom</a></li>
<li><a href="../460901/index.html">Por qu√© los desarrolladores senior no pueden conseguir un trabajo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>