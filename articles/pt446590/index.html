<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüë¶ ‚õé üíÉüèº 39 novos recursos dispon√≠veis no Java 12 üéÖüèæ üßë üë©üèΩ‚Äçüíº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De uma maravilhosa entrevista sobre Habr√©: ‚ÄúSimon Ritter √© uma pessoa que trabalhou com Java desde o in√≠cio e continua fazendo isso como diretor t√©cni...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>39 novos recursos dispon√≠veis no Java 12</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446590/"><blockquote>  De uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">maravilhosa entrevista</a> sobre Habr√©: ‚ÄúSimon Ritter √© uma pessoa que trabalhou com Java desde o in√≠cio e continua fazendo isso como diretor t√©cnico adjunto da Azul, uma empresa que trabalha na m√°quina virtual Zing JVM e um dos melhores coletores de lixo, C4 (Continuously Concurrent Compacting Colecionador) ¬ª <br>  Abaixo est√° uma tradu√ß√£o de seu artigo sobre os novos recursos do JDK 12 e algumas dificuldades que voc√™ pode encontrar ao migrar para uma nova compila√ß√£o. </blockquote><p> Escrevi v√°rias postagens no blog que listam todas as altera√ß√µes para cada uma das vers√µes mais recentes do Java ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JDK 10</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JDK 11</a> ).  Agora explorarei o lado obscuro do JDK 12, focando em algumas das armadilhas que podem causar problemas se voc√™ quiser portar o aplicativo para esta vers√£o. </p><br><img src="https://habrastorage.org/webt/0e/rn/j0/0ernj0wwnqnwdejls6zvzjup5k8.png"><br><p><a name="habracut"></a>  O JDK 12 tem o menor n√∫mero de novos recursos de todos os lan√ßamentos de Java at√© o momento (contei 109 no JDK 10 e 90 no JDK 11).  Isso n√£o √© ruim - devido aos ciclos de lan√ßamento, algumas vers√µes conter√£o mais altera√ß√µes e outras menos. </p><br><p>  Vou dividir novas fun√ß√µes em √°reas l√≥gicas √≥bvias: Java, bibliotecas, JVMs e outras fun√ß√µes JDK. </p><br><h2>  Altera√ß√µes de idioma </h2><br><p>  A fun√ß√£o que eu (e presumo que muitas outras pessoas) considerar√° a mais vis√≠vel no JDK 12 √© a nova instru√ß√£o switch ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JEP 325</a> ).  Essa tamb√©m √© a primeira altera√ß√£o de idioma a ser usada como uma fun√ß√£o para "visualizar".  A ideia de "pr√©-visualiza√ß√£o" foi introduzida no in√≠cio de 2018 como parte do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JEP 12</a> .  Essa √© essencialmente uma maneira de habilitar vers√µes beta de novos recursos usando op√ß√µes de linha de comando.  Usando a visualiza√ß√£o, ainda √© poss√≠vel fazer altera√ß√µes com base no feedback do usu√°rio e, na pior das hip√≥teses, remover completamente uma fun√ß√£o se n√£o tiver sido recebida corretamente.  A chave para visualizar fun√ß√µes √© que elas n√£o est√£o inclu√≠das na especifica√ß√£o Java SE.  Sobre a nova op√ß√£o, h√° uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tradu√ß√£o muito boa</a> em Habr√©. <br>  No JDK 12, uma op√ß√£o se tornou uma express√£o que avalia seu "conte√∫do" para produzir um resultado.  Explicarei imediatamente que isso n√£o afeta a compatibilidade com vers√µes anteriores. Portanto, voc√™ n√£o precisa alterar nenhum c√≥digo que use o switch como operador. </p><br><p>  Vou usar o exemplo do JEP, pois √© simples e claro: </p><br><div class="spoiler">  <b class="spoiler_title">Interruptor antigo</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numLetters; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (day) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> MONDAY: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> FRIDAY: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SUNDAY: numLetters = <span class="hljs-number"><span class="hljs-number">6</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> TUESDAY: numLetters = <span class="hljs-number"><span class="hljs-number">7</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> THURSDAY: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SATURDAY: numLetters = <span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> WEDNESDAY: numLetters = <span class="hljs-number"><span class="hljs-number">9</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Huh? "</span></span> + day); }</code> </pre> </div></div><br><p>  Como voc√™ pode ver, <code>numLetters</code> o dia da semana para o nome da vari√°vel <code>day</code> , em seguida, atribu√≠mos o valor <code>numLetters</code> .  Agora que switch √© um operador, podemos fazer a atribui√ß√£o uma vez (reduzindo significativamente a probabilidade de um c√≥digo incorreto) usando o resultado da instru√ß√£o switch: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numLetters = <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (day) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> MONDAY, FRIDAY, SUNDAY -&gt; <span class="hljs-number"><span class="hljs-number">6</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> TUESDAY -&gt; <span class="hljs-number"><span class="hljs-number">7</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> THURSDAY, SATURDAY -&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> WEDNESDAY -&gt; <span class="hljs-number"><span class="hljs-number">9</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Huh? "</span></span> + day); };</code> </pre> <br><p>  Voc√™ notar√° rapidamente duas altera√ß√µes de sintaxe.  Os desenvolvedores do OpenJDK encontraram uma fun√ß√£o de sintaxe pouco conhecida chamada lista separada por v√≠rgula.  Al√©m disso, o operador de express√£o lambda <code>-&gt;</code> facilita o retorno do valor.  Voc√™ ainda pode usar a <code>break</code> com um valor se voc√™ realmente deseja isso.  Existem v√°rios outros detalhes sobre esse recurso, mas provavelmente √© mais f√°cil ler o JEP. </p><br><h2>  Bibliotecas </h2><br><p>  H√° uma mudan√ßa que eu acho muito √∫til.  H√° tamb√©m v√°rios secund√°rios. </p><br><h3>  colecionador </h3><br><p>  A API do Streams, como sempre, possui um novo Collector, fornecido pela classe de utilit√°rio Collectors.  Um novo coletor pode ser obtido usando o m√©todo <code>teeing()</code> .  O colecionador de tee usa tr√™s argumentos: dois colecionadores e uma bifuncional.  Para entender o trabalho deste colecionador, recomendo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">este artigo sobre Habr√©</a> . <br>  Para entender como ele faz isso, desenhei um diagrama: </p><br><img src="https://habrastorage.org/getpro/habr/post_images/821/2db/503/8212db5034c04db49aed57dd44697b22.jpg" alt="imagem"><br><p>  Todos os valores do fluxo de entrada s√£o passados ‚Äã‚Äãpara cada coletor.  O resultado de cada coletor √© passado como argumento para o BiFunction e gerando o resultado final. </p><br><p>  Um exemplo simples √© calcular o valor m√©dio (sim, eu sei que j√° existem coletores para isso, como <code>averagingInt()</code> , mas este √© um exemplo simples para ajudar a entender o conceito). </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/* Assume Collectors is statically imported */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> average = Stream.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>) .collect(teeing( summingDouble(i -&gt; i), counting(), (sum, n) -&gt; sum / n) );</code> </pre> <br><p>  O primeiro coletor calcula a soma do fluxo de entrada e o segundo - o n√∫mero de elementos.  BiFunction divide a soma pelo n√∫mero de elementos para obter o valor m√©dio. </p><br><h3>  java.io </h3><br><p>  <code>InputStream skipNBytes(long n)</code> - ignora e descarta exatamente n bytes do fluxo de entrada InputStream.  Se n for zero ou menos, os bytes n√£o ser√£o ignorados. </p><br><h3>  java.lang </h3><br><p>  Um novo pacote apareceu, java.lang.constant, que faz <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">parte da constante JVM API, JEP 334</a> . </p><br><p>  Cada arquivo de classe Java possui um conjunto persistente que armazena operandos para instru√ß√µes de bytecode na classe.  √â dif√≠cil para os desenvolvedores manipular arquivos de classe devido a problemas ao carregar as classes.  A API da JVM constante fornece tipos de refer√™ncia simb√≥licos para descrever cada forma de uma constante (classe, constante carreg√°vel, <code>MethodHandle</code> , constante <code>MethodType</code> , constante <code>MethodType</code> ). </p><br><p>  Tamb√©m influenciou v√°rias outras classes.  Todas as seguintes classes agora t√™m um m√©todo <code>describeConstable()</code> : </p><br><ul><li>  Class </li><li>  Duplo </li><li>  Enum </li><li>  Flutuar </li><li>  Inteiro </li><li>  Longo </li><li>  String </li><li>  Methodhandle </li><li>  MethodType </li><li>  Varhandle </li></ul><br><p>  Como brit√¢nico, acho muito engra√ßado.  O termo Constable, <code>describeConstable</code> usado desde o s√©culo 11, e √© assim que frequentemente nos referimos a policiais.  √â tamb√©m o nome do famoso artista do s√©culo XVIII, John Constable.  Isso me faz pensar se o m√©todo <code>describeTurner()</code> estar√° em uma vers√£o futura.  Obviamente, nesse caso, √© uma abrevia√ß√£o da <code>Constant Table</code> , n√£o relacionada a um policial ou pintor de paisagens. </p><br><p>  As seguintes classes agora incluem o m√©todo <code>resolveConstantDesc()</code> : </p><br><ul><li>  Duplo </li><li>  Enum.EnumDesc </li><li>  Flutuar </li><li>  Inteiro </li><li>  Longo </li><li>  String </li></ul><br><h3>  java.lang.Character </h3><br><p>  As classes internas foram atualizadas para incluir novos blocos Unicode.  Eu sempre gosto de ver o que as pessoas encontraram para adicionar ao Unicode, aqui est√£o alguns exemplos: </p><br><ul><li>  S√≠mbolos de xadrez </li><li>  N√∫meros maias </li><li>  Sogdian √© uma l√≠ngua iraniana oriental que n√£o era mais usada no s√©culo 11. </li><li>  O velho Sogdian √© uma vers√£o mais antiga (e, eu suspeito, ainda mais limitada) do Sogdian </li></ul><br><h3>  java.lang.Class </h3><br><p>  <code>arrayType()</code> retorna <code>Class</code> para o tipo da matriz cujo tipo de componente √© descrito por esta <code>Class</code> .  Isso pode ser verificado usando <code>jshell</code> : </p><br><pre> <code class="bash hljs">jshell&gt; (new String[2]).getClass().getName() <span class="hljs-variable"><span class="hljs-variable">$11</span></span> ==&gt; <span class="hljs-string"><span class="hljs-string">"[Ljava.lang.String;"</span></span> jshell&gt; (new String[2]).getClass().arrayType() <span class="hljs-variable"><span class="hljs-variable">$12</span></span> ==&gt; class [[Ljava.lang.String; jshell&gt; <span class="hljs-string"><span class="hljs-string">"foo"</span></span>.getClass().arrayType() <span class="hljs-variable"><span class="hljs-variable">$15</span></span> ==&gt; class [Ljava.lang.String;</code> </pre> <br><p>  N√£o sei ao certo qual √© o significado desse m√©todo, pois tudo o que faz √© adicionar uma <code>Class</code> ao tipo que essa classe representa. </p><br><p>  <code>componentType()</code> , o mesmo que <code>getComponentType()</code> .  A pergunta implora - por que adicionar um m√©todo redundante? </p><br><p>  <code>descriptorString()</code> - novamente, retorna o mesmo resultado que <code>getName()</code> .  No entanto, √© necess√°rio porque agora a <code>Class</code> implementa a interface <code>TypeDescriptor</code> associada √† nova API constante da JVM. </p><br><h3>  lava.lang.String </h3><br><p>  <code>indent()</code> - adiciona uma s√©rie de espa√ßos √† esquerda em uma string.  Se o par√¢metro for negativo, esse n√∫mero de espa√ßos √† esquerda ser√° removido (se poss√≠vel). </p><br><p>  <code>transform()</code> - aplica a fun√ß√£o fornecida a uma string.  O resultado pode n√£o ser uma sequ√™ncia. </p><br><h3>  java.lang.invoke </h3><br><p>  <code>VarHandle</code> agora tem <code>toString()</code> para retornar uma descri√ß√£o compacta. </p><br><p>  <code>java.net.SecureCacheResponse</code> e <code>java.net.ssl.HttpsConnection</code> t√™m um novo m√©todo, <code>getSSLSession()</code> que retorna <code>Optional</code> contendo o <code>SSLSession</code> usado na conex√£o. </p><br><h3>  java.nio.files </h3><br><p>  A classe <code>Files</code> possui um novo m√©todo, <code>mismatch()</code> , que localiza e retorna a posi√ß√£o do primeiro byte de incompatibilidade no conte√∫do de dois arquivos, ou -1L, se n√£o houver incompatibilidade. </p><br><h3>  java.text </h3><br><p>  H√° uma nova classe <code>CompactNumberFormat</code> .  Esta √© uma subclasse de <code>NumberFormat</code> que formata um n√∫mero decimal no formato compacto.  Um exemplo de um formato compacto - <code>1M</code> vez de <code>1000000</code> , portanto - requer dois em vez de nove caracteres.  <code>NumberFormat</code> e <code>java.text.spi.NumberFormatProvider</code> foram estendidos para incluir o novo m√©todo <code>getCompactNumberInstance()</code> .  H√° tamb√©m uma nova enumera√ß√£o <code>NumberFormatStyle</code> que tem dois significados: LONG e SHORT. </p><br><h3>  java.util.concurrent </h3><br><p>  O CompletionStage agora inclui v√°rios formul√°rios sobrecarregados com tr√™s m√©todos: </p><br><ul><li>  excepcionalmenteAsync </li><li>  excepcionalmenteCompor </li><li>  exceptionallyComposeAsync </li></ul><br><p>  Esses m√©todos expandem as possibilidades de criar um novo <code>CompletionStage</code> partir de um existente, <code>CompletionStage</code> , se o atual terminar com uma exce√ß√£o.  Verifique a documenta√ß√£o da API para obter detalhes. </p><br><h3>  javax.crypto </h3><br><p>  A classe <code>Cipher</code> possui um novo <code>toString()</code> que retorna uma sequ√™ncia que cont√©m a transforma√ß√£o, modo e provedor de <code>Cipher</code> . </p><br><h3>  javax.naming.ldap.spi </h3><br><p>  Este √© um novo pacote no JDK 12 e cont√©m duas classes: <code>LdapDnsProvider</code> , que √© a classe de provedor para pesquisas de DNS durante opera√ß√µes LDAP, e <code>LdapDnsProviderResults</code> que encapsula o resultado da pesquisa de DNS para o URL LDAP. </p><br><h3>  Swing </h3><br><p>  Swing ainda est√° sendo atualizado!  Sim, o <code>filechooser.FileSystemView</code> agora possui um novo m√©todo <code>getChooserShortcutPanelFiles()</code> .  Ele retorna uma matriz de arquivos representando os valores a serem exibidos por padr√£o na barra de atalhos de sele√ß√£o de arquivos. </p><br><h2>  Mudan√ßas na JVM </h2><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JEP 189: Shenandoah</a> : Coletor de Lixo com Pouco Tempo de Pausa </h3><br><p>  Shenandoah √© um projeto de pesquisa anunciado pela Red Hat em 2014 que se concentra nos requisitos de aplicativos de baixa lat√™ncia para gerenciamento de mem√≥ria na JVM.  Seus objetivos s√£o um tempo de pausa m√°ximo de 1 a 10 ms para um monte de mais de 20 GB ( <del>  portanto, n√£o se destina a pequenas aplica√ß√µes </del>  - como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um dos desenvolvedores do Shenandoah respondeu</a> , n√£o √© assim e faz um excelente trabalho com aplicativos pequenos).  Esse coletor foi projetado para funcionar em paralelo com os encadeamentos de aplicativos, para evitar os problemas que vemos na maioria dos coletores de lixo. </p><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JEP 344: Cole√ß√µes G1 Mistas</a> </h3><br><p>  Essa altera√ß√£o visa melhorar o comportamento do coletor G1 quando atingir a meta de atraso definida.  G1 divide o espa√ßo de heap (antigo e antigo) em regi√µes.  A ideia √© que, na gera√ß√£o antiga, voc√™ n√£o precise coletar lixo em uma opera√ß√£o.  Quando o G1 precisa coletar lixo, ele seleciona as regi√µes que define.  Isso √© chamado de kit de coleta.  Antes do JDK 12, quando o trabalho come√ßava no set, todo o trabalho precisava ser conclu√≠do, em ess√™ncia, como uma opera√ß√£o at√¥mica.  O problema era que, √†s vezes, devido a altera√ß√µes no uso do espa√ßo de heap do aplicativo, o conjunto de coleta era muito grande e levava muito tempo para ser coletado, o que resultava no tempo de pausa n√£o atingido. </p><br><p>  No JDK 12, se G1 identificar essa situa√ß√£o, ele interromper√° a coleta de dados at√© a metade, se isso n√£o afetar a capacidade do aplicativo de continuar alocando espa√ßo para novos objetos.  O efeito l√≠quido de G1 ser√° melhor quando um curto per√≠odo de pausa for alcan√ßado. </p><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JEP 346: retorna rapidamente a mem√≥ria alocada n√£o utilizada do G1</a> </h3><br><p>  Essa √© outra melhoria de desempenho para o G1, mas outra est√° relacionada √† maneira como a JVM interage com o restante do sistema.  Obviamente, √© necess√°ria mem√≥ria para o heap da JVM e, na inicializa√ß√£o, solicita mem√≥ria do alocador de mem√≥ria virtual do sistema operacional.  Quando o aplicativo √© iniciado, pode haver momentos em que a quantidade de mem√≥ria necess√°ria para o heap cai e parte da mem√≥ria alocada pode ser retornada ao sistema operacional para uso por outros aplicativos. </p><br><p>  G1 j√° faz isso, mas s√≥ pode fazer isso em um de dois lugares.  Em primeiro lugar, durante uma cole√ß√£o completa e, em segundo lugar, durante um dos ciclos paralelos.  G1 tenta n√£o fazer uma cole√ß√£o completa e, com pouco uso de mem√≥ria, pode haver per√≠odos significativos entre os ciclos de cole√ß√£o.  Isso leva ao fato de que o G1 pode manter uma mem√≥ria fixa por um longo tempo. </p><br><p>  No JDK 12, o G1 tentar√° periodicamente continuar ou executar um loop paralelo enquanto o aplicativo estiver inativo para determinar o uso geral do heap Java.  A mem√≥ria n√£o utilizada pode ser devolvida ao sistema operacional de maneira mais oportuna e previs√≠vel. </p><br><p>  O novo sinalizador de linha de comando <code>-XX:G1PeriodicGCInterval</code> pode ser usado para definir o n√∫mero de milissegundos entre as verifica√ß√µes. </p><br><p>  Esse recurso levar√° a um uso mais conservador da mem√≥ria da JVM para aplicativos que ficaram inativos por longos per√≠odos de tempo. </p><br><h2>  Outros novos recursos do JDK </h2><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JEP 230: Kit de Microbenchmarking</a> </h3><br><p>  O JMH (Java Microbenchmarking Harness) foi desenvolvido por Alexey Shipilev quando ele trabalhou na Oracle e fornece uma plataforma extensa para o desenvolvimento de testes de desempenho para aplicativos Java.  Alexey fez um excelente trabalho ajudando as pessoas a evitar muitos erros simples que cometem ao tentar analisar o desempenho do aplicativo: aquecer, evitar exce√ß√µes etc. </p><br><p>  Agora o JMH pode ser inclu√≠do no OpenJDK.  Qualquer pessoa interessada em trabalhar no pr√≥prio JDK e alterar o c√≥digo pode us√°-lo para comparar o desempenho antes e depois de suas altera√ß√µes, bem como comparar o desempenho em diferentes releases.  V√°rios testes est√£o inclu√≠dos para permitir o teste;  O design do JMH √© tal que √© f√°cil adicionar novos testes para onde √© necess√°rio. </p><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JEP 340: Uma porta Aarch64, n√£o duas</a> </h3><br><p>  O OpenJDK possui duas portas para a arquitetura Arm64, uma fornecida pela Oracle e a outra pela Red Hat.  Como isso n√£o era necess√°rio, e a Oracle parou de dar suporte ao Arm para seus bin√°rios JDK, decidiu-se usar apenas a porta Red Hat, que ainda √© suportada e desenvolvida. </p><br><h3>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JEP 341: arquivos CDS padr√£o</a> </h3><br><p>  A classe Data Sharing (CDS) costumava ser um recurso comercial no Oracle JDK.  Com uma transi√ß√£o recente feita no JDK 11 para eliminar todas as diferen√ßas funcionais entre o Oracle JDK e o OpenJDK, ele foi inclu√≠do no OpenJDK. </p><br><p>  Para usar o CDS, voc√™ precisa de um arquivo morto criado para classes que s√£o carregadas quando o aplicativo √© iniciado.  O JDK 12 para plataformas de 64 bits agora possui o arquivo <code>classes.jsa</code> no diret√≥rio <code>lib/server</code> .  Este √© o arquivo CDS para "classes padr√£o".  Suponho que isso significa todas as classes p√∫blicas nos m√≥dulos JDK;  N√£o consegui encontrar uma maneira de descompact√°-lo para verificar.  Como o CDS √© ativado por padr√£o, o que equivale √† op√ß√£o <code>-Xshare:auto</code> na linha de comando, os usu√°rios se beneficiar√£o com os melhores tempos de inicializa√ß√£o do aplicativo. </p><br><h2>  Conclus√µes </h2><br><p>  O JDK 12 fornece um pequeno n√∫mero de novas fun√ß√µes e APIs, com a <code>switch</code> sendo a mais interessante para os desenvolvedores.  Os usu√°rios do G1 certamente apreciar√£o as melhorias de desempenho. </p><br><p>  Com a nova vers√£o do release, aconselho todos os usu√°rios a testar seus aplicativos neste release.  Manter o controle de altera√ß√µes incrementais ajudar√° a evitar surpresas se voc√™ decidir avan√ßar para a pr√≥xima vers√£o do suporte de longo prazo. </p><br><p>  Temos compila√ß√µes gratuitas do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JDK 12 para o Zulu Community Edition</a> para ajud√°-lo em seus testes.  N√£o deixe de experiment√°-los. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt446590/">https://habr.com/ru/post/pt446590/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt446576/index.html">Substitui√ß√£o de importa√ß√£o ou como os helic√≥pteros russos fizeram algo errado</a></li>
<li><a href="../pt446578/index.html">Linguagem de programa√ß√£o baseada em cart√£o postal</a></li>
<li><a href="../pt446582/index.html">Reflex√µes sobre hospedagem solar para abelhas</a></li>
<li><a href="../pt446586/index.html">Configura√ß√µes de rede do FreeRadius via DHCP</a></li>
<li><a href="../pt446588/index.html">Verificando o c√≥digo fonte de Roslyn</a></li>
<li><a href="../pt446592/index.html">Verificando o c√≥digo fonte de Roslyn</a></li>
<li><a href="../pt446598/index.html">Recriando fontes CRT</a></li>
<li><a href="../pt446602/index.html">Corrente m√°xima DC atrav√©s do transistor de efeito de campo</a></li>
<li><a href="../pt446604/index.html">ESET: Novos esquemas de entrega de backdoor de grupos cibern√©ticos da OceanLotus</a></li>
<li><a href="../pt446606/index.html">Verifique se voc√™ √© bom em tecnologia aditiva</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>