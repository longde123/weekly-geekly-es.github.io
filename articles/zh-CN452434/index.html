<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎬 🎅🏿 👩‍👦‍👦 更秘密的电报 🎮 ⛹️ 🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="我们曾经将Telegram视为任何类型消息的可靠且安全的传输介质。 但实际上，它具有a-和对称加密的相当普遍的组合。 哪里有趣？ 而且无论如何，为什么有人会信任他们的消息给第三方？ 

 TL； DR-在用户互相阻塞的情况下发明了一个秘密秘密通道。 
 隐秘渠道 


 有很多解决方法可以在两个用户...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>更秘密的电报</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452434/"><p> 我们曾经将Telegram视为任何类型消息的可靠且安全的传输介质。 但实际上，它具有a-和对称加密的相当普遍的组合。 哪里有趣？ 而且无论如何，为什么有人会信任他们的消息给第三方？ <br><img src="https://habrastorage.org/webt/fj/xl/ka/fjxlkasq2yqy1vfjle83rlnc4js.png" alt="间谍vs间谍by AntonioProhías"><br>  TL； DR-在用户互相阻塞的情况下发明了一个秘密秘密通道。 </p><a name="habracut"></a><br><h2 id="covert-channels"> 隐秘渠道 </h2><br><p> 有很多解决方法可以在两个用户之间传输数据，从而避免直接联系。 您可以使用中间商，加密和隐写方法，广播中继网络以及现有协议的其他扩展。 但是有时仅使用正式记录的功能就可以建立安全的联系，这很有用。 或应该说，建立一个<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">秘密通道</a> 。 </p><br><p>我们可以在苏联间谍电影《春天的十七个瞬间》中看到一个例子（这很不错，尝试观看）。 在其中，安全屋窗户上的一朵花用来表示间谍是否完成了任务。 花本身并不意味着任何东西：它可以存在也可以不存在，这种共生是很平常的事，只告诉我们主人对花的热爱。 只有预定的解释才能将间谍收到的信息与随机过路人收到的信息区分开。 </p><br><p><img src="https://habrastorage.org/webt/xq/z2/bs/xqz2bs06a68qp9m11r-fpqgy6fo.jpeg" alt="电影中"></p><br><h2 id="in-window-flower-based-channels-in-telegram">  Telegram中基于窗口的基于花的通道 </h2><br><p> 按照相同的原理来组织自己的秘密通道，您只需要两件事：一扇窗户和一朵花。 窗口代表一个对象，您可以更改其他人和花朵的可见状态-可能的状态以及更改它们的方式。 </p><br><p> 那么，爱丽丝在鲍勃可以看到的电报中会发生什么变化？ 实际上，有很多东西：化身，用户名，上次访问时间等等。 但是通常，这些东西可以同时供所有人使用，从而限制了对话的隐私性-如果有人拥有过渡方法，他就可以读取爱丽丝发送的任何内容。 令人惊讶的是，无需任何加密就可以解决此限制。 </p><br><h3 id="im-blocking-you-haha"> 我在阻止你，哈哈 </h3><br><p> 每个用户都有自己的黑名单，如果读者足够烦，那么他在被阻止后应该已经注意到，他的尚未好友的“上次访问”状态已更改为“很久以前见过”。 事实是，他可能在几秒钟前甚至现在就已经在线，但是Telegram API不会再将此信息发送到您的应用程序。 这样，它可以保护其他用户的隐私免受不必要的侵犯。 作为交换，他们可以查看是否将其列入黑名单。 </p><br><p> 那么看花和被遮挡有什么共同点呢？ 两者都可以在给定的时刻进行检查，从而根据您是否被阻止来接收一点信息。 另一个优点是，Telegram可能不会存储用户互相阻塞的日志（最多仅在短期内用于日志记录）。 </p><br><h2 id="organizing-bits"> 组织位 </h2><br><p> 发送和接收位的可能性很有趣，但我们仍然需要描述其利用机制。 电报在被阻止时拒绝通知您，因此每个``接收位''操作应由收件人初始化（我们称他为鲍勃），而不依赖发件人（她将是爱丽丝），即独立进行。 同样，爱丽丝和鲍勃应该以相同的频率发出请求。 </p><br><p> 每个时钟上的位交换算法如下所示： </p><br><ul><li>  A检查发送位，如果与先前的值不同，则根据值进行更改： <br><ul><li>  A-&gt; T：如果位为1，则块B；否则为0。 </li><li>  A-&gt; T：如果位为0，则取消阻止B。 </li></ul></li><li>  B收到一点： <br><ul><li>  B-&gt; T：解决A； </li><li>  T-&gt; B：B可获得有关A的信息； </li><li>  B：检查接收到的信息是否具有状态： <br><ul><li>  B：如果是-&gt;他没有被阻止并且该位为0 </li><li>  B：如果不是-&gt;他被阻止，该位为1 </li></ul></li></ul></li></ul><br><p> 大多数现代PC具有良好的频率发生器（例如，系统时钟），因此我们可以与它们同步时钟，而无需使用通道来传输除消息位以外的任何内容。 仅值得注意的是，Telegram API请求（取消（阻止）和解决用户状态）都是网络调用，并且无法快速工作，特别是在使用代理或VPN的情况下。 这产生了一个局限性：时钟长度应该比平均响应时间更长（因为我们需要使响应时间适应），这就是我们的数据传输速度受到限制的原因。 </p><br><h3 id="encoding-messages"> 编码信息 </h3><br><p> 自然语言的文本具有很高的冗余度，并且收到错误消息后，大多数人仍然可以阅读。 而且由于Telegram是使者（忽略一些<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">疯狂的东西</a> ），所以我们可以忽略纠错，从而限制了将数据传输到简单文本消息的可能性。 </p><br><p> 我们的频道带宽极低，因此为什么我们需要对可能的消息使用最有效的消息编码。 幸运的是，使者的名字提醒着我们这个问题是一个普遍的问题。 </p><br><p> 这就是为什么我们生活在21世纪的人将使用一百年前电报工作者可用的最有效的编码之一- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">鲍多（Baudot）</a>编码来编码文本。 更准确地说，由<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Donald Murray</a>创建的ITA-2最终版本是在该语言的最常用符号上执行较少的API调用。 </p><br><p>成功发送消息的唯一剩下的就是找到传输会话的边界​​，以便接收者可以在连续的比特流中找到已发送的消息。 在传输开始之前，Bob是否被阻止，并且他的状态不会很快改变。 这就是为什么Alice可以通过将会话交换到对端仅一个时钟来发出有关会话开始的信号的原因。 在会议成功结束时，她将解除对他的封锁，并和平离开。 另一方面，他将继续接收零位，直到确定它们不是消息的一部分为止-博多码没有<code>00000</code>符号。 </p><br><p><img src="https://habrastorage.org/webt/vx/fa/0q/vxfa0q7-ko6isor152okxwclvto.png" alt="在时间表上"></p><br><p> 该方法的缺点是无法将正在进行的转换连接（可以，但是可能由于位偏移而可能需要手动纠错），并且需要将收到的带有错误的空符号与已发送的空符号分开。 但是存在实施的所有问题。 </p><br><h2 id="high-tech"> 高科技 </h2><br><p> 在花了几个小时尝试使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">官方库</a>来使用API​​之后，我很累，并使用更人性化的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Telethon</a>库用Python编写了所有内容。 出于某些奇怪的原因，它甚至还具有同步样式的API，这种情况今天很少见。 自从我自己写的ITA-2消息编码以来，在Internet上没有发现任何有用的信息。 </p><br><p> 考虑到每个网络API调用所需的时间在大多数情况下都超过十分之一秒，因此使用系统时钟进行时钟同步（是的，它在（sleep（）s！之间）！ 用户可以根据需要设置传输速度，但是如果您不想同时看到对方的错误并发现自己被防洪系统所禁止，则建议遵循“每秒不超过请求数”的规则。 事实证明，Telegram对API的使用非常挑剔，即使是连续几次尝试（成功！），我的访问都被冻结了一整天，并且出于未知的原因，只是在传输过程中随机阻止了泛滥。 伙计们，您应该始终声明API使用限制。 </p><br><p> 如果用户决定使用这种奇怪的通道来交换消息，那么他就不必在意任何图形用户界面功能。 而且并非所有系统都具有它，这就是为什么我以终端工具的形式编写应用程序的原因。 它允许通过命令行参数用户ID中给定的通道通过通道发送和接收消息，但是每次启动仅一次操作。 当然，没有人会限制您只运行一个程序的副本，并同时使用两种方式使用多个通道，您只需要使用相同的参数运行同一脚本的多个副本。 </p><br><h3 id="using-the-stuff"> 使用东西 </h3><br><p> 您可以通过GitHub上的API（最后链接到存储库）来了解有关将此内容同时用作命令行实用工具和python3库的更多信息。 唯一的问题是获取自己的API凭据（简单的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">手册</a>就足够了），因为Telegram不允许公开我的API凭据并根据脚本的本地副本中的值进行设置。 除了授权部分（默认情况下是通过stdio制作的）外，所有内容都通过命令行参数传递，如下所示： </p><br><pre> <code class="plaintext hljs">For Alice: For Bob: Enter your phone number: XXX | Enter your phone number: XXX Enter auth code: YYY | Enter auth code: YYY Started message transmission... | Listening for the message... ---++ ('O', '9') | ---++ ('O', '9') --+-+ ('H', '#') | --+-+ ('H', '#') +++++ (1, 1) | +++++ (1, 1) --++- ('N', ',') | --++- ('N', ',') --+-- (' ', ' ') | --+-- (' ', ' ') ++-++ (0, 0) | ++-++ (0, 0) --+-+ ('H', '#') | --+-+ ('H', '#') -++-- ('I', '8') | -++-- ('I', '8') --+-- (' ', ' ') | --+-- (' ', ' ') --+++ ('M', '.') | --+++ ('M', '.') ++--- ('A', '-') | ++--- ('A', '-') -+-+- ('R', "'") | -+-+- ('R', "'") ++++- ('K', '(') | ++++- ('K', '(') +++++ (1, 1) | +++++ (1, 1) +-++- ('F', '!') | +-++- ('F', '!') --+++ ('M', '.') | --+++ ('M', '.') --+++ ('M', '.') | --+++ ('M', '.') Done, exiting... | ----- ('', '') | ----- ('', '') | Automatically decoded: OH, HI MARK!..</code> </pre> <br><p> 接收到的消息会自动解码，但是如果您想手动更正某些错误或跟踪进度，可以通过查看命令行输出来完成。 </p><br><h2 id="outside-of-the-telegram"> 电报外 </h2><br><p> 值得一提的是，可以在任何可以检测是否被其他用户阻止的Messenger和/或社交网络上实施这种渠道。 在现有代码中可以轻松替换相似的接口，因此，如果要这样做，只需使用我的基础即可。 由于传输速度低和API调用响应时间短，因此python的性能低（与C / ++这类情况相比）不是限制因素。 </p><br><p>  PS特别感谢我的激情对我的不寻常爱 </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">俄语版</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">中镜</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Github</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN452434/">https://habr.com/ru/post/zh-CN452434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN452424/index.html">氦缺乏会减慢量子计算机的发展-讨论情况</a></li>
<li><a href="../zh-CN452426/index.html">使用GitHub凭据登录到Azure DevOps</a></li>
<li><a href="../zh-CN452428/index.html">快速Yandex字典</a></li>
<li><a href="../zh-CN452430/index.html">质量检查：黑客马拉松</a></li>
<li><a href="../zh-CN452432/index.html">从人文到开发人员的数量和颜色</a></li>
<li><a href="../zh-CN452436/index.html">学习英语：五个明显的书面错误以及如何避免它们</a></li>
<li><a href="../zh-CN452438/index.html">反对审查制度的历史：麻省理工学院和斯坦福大学科学家创建的Flash代理方法如何工作</a></li>
<li><a href="../zh-CN452440/index.html">很小，可以删除：真实地看一下日本的Minimal Fab项目</a></li>
<li><a href="../zh-CN452442/index.html">我们在浏览器控制台中播放</a></li>
<li><a href="../zh-CN452444/index.html">这笔3900万美元的交易：为什么开源DBMS的创建者决定进行移动开发</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>