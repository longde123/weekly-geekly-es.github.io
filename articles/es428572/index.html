<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëàüèΩ üóª üê´ Componentes de orden superior en reacci√≥n üë®üèº‚Äçüç≥ üèπ üßõüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recientemente, publicamos material sobre funciones de orden superior en JavaScript dirigido a aquellos que aprenden JavaScript. El art√≠culo que estamo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Componentes de orden superior en reacci√≥n</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/428572/">  Recientemente, publicamos material <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sobre funciones de orden superior en JavaScript</a> dirigido a aquellos que aprenden JavaScript.  El art√≠culo que estamos traduciendo hoy est√° destinado a desarrolladores principiantes de React.  Se centra en componentes de orden superior (HOC). <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/w5/om/sh/w5omshlclipwxw7f3yjt7itcooe.png"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Principio DRY y componentes de orden superior en React</font> </h2><br>  No podr√° avanzar lo suficiente en el estudio de la programaci√≥n y no se encontrar√° con el principio casi culto de DRY (no se repita, no repita).  A veces sus seguidores van demasiado lejos, pero, en la mayor√≠a de los casos, vale la pena luchar por el cumplimiento.  Aqu√≠ vamos a hablar sobre el patr√≥n de desarrollo React m√°s popular, que garantiza el cumplimiento del principio DRY.  Se trata de componentes de orden superior.  Para comprender el valor de los componentes de orden superior, primero formulemos y comprendamos el problema que est√°n destinados a resolver. <br><br>  Suponga que necesita recrear un panel de control similar al panel Stripe.  Muchos proyectos tienen la propiedad de desarrollar de acuerdo con el esquema, cuando todo va bien hasta el momento en que se completa el proyecto.  Cuando piensa que el trabajo est√° casi terminado, observa que el panel de control tiene muchas sugerencias de herramientas diferentes que deber√≠an aparecer al pasar el mouse sobre ciertos elementos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d1e/83b/414/d1e83b414be78bf8944ea3838193aaa5.gif"><br>  <i><font color="#999999">Panel de control e informaci√≥n sobre herramientas</font></i> <br><br>  Para implementar dicha funcionalidad, puede usar varios enfoques.  Decidi√≥ hacer esto: determine si el puntero est√° por encima de un componente individual, y luego decida si mostrar una pista para √©l o no.  Hay tres componentes que deben equiparse con una funcionalidad similar.  Estos son <code>Info</code> , <code>TrendChart</code> y <code>DailyChart</code> . <br><br>  Comencemos con el componente de <code>Info</code> .  En este momento es un simple icono SVG. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Info</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;svg       className=<span class="hljs-string"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span>       height={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.height}       viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 16 16"</span></span> width=<span class="hljs-string"><span class="hljs-string">"16"</span></span>&gt;         &lt;path d=<span class="hljs-string"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span> /&gt;     &lt;/svg&gt;   ) } }</code> </pre> <br>  Ahora debemos hacer que este componente pueda determinar si el puntero del mouse est√° por encima o no.  Puede usar los eventos de mouse <code>onMouseOver</code> y <code>onMouseOut</code> para esto.  Se <code>onMouseOver</code> a la funci√≥n pasada a <code>onMouseOver</code> si el puntero del mouse ha ca√≠do en el √°rea del componente, y la funci√≥n pasada a <code>onMouseOut</code> se llamar√° cuando el puntero abandone el componente.  Para organizar todo esto de una manera que sea aceptada en React, agregamos la propiedad <code>hovering</code> al componente, que se almacena en el estado, lo que nos permite volver a representar el componente mostrando u ocultando la informaci√≥n sobre herramientas si esta propiedad cambia. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Info</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering === <span class="hljs-literal"><span class="hljs-literal">true</span></span>         ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id} /&gt;         : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}       &lt;svg         onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver}         onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}         className=<span class="hljs-string"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span>         height={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.height}         viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 16 16"</span></span> width=<span class="hljs-string"><span class="hljs-string">"16"</span></span>&gt;           &lt;path d=<span class="hljs-string"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span> /&gt;       &lt;/svg&gt;     &lt;/&gt;   ) } }</code> </pre> <br>  Result√≥ bastante bien.  Ahora necesitamos agregar la misma funcionalidad a dos componentes m√°s: <code>TrendChart</code> y <code>DailyChart</code> .  El mecanismo anterior para el componente <code>Info</code> funciona bien, lo que no est√° roto no necesita ser reparado, as√≠ que vamos a recrearlo en otros componentes usando el mismo c√≥digo.  Recicle el c√≥digo para el componente <code>TrendChart</code> . <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TrendChart</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering === <span class="hljs-literal"><span class="hljs-literal">true</span></span>         ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id}/&gt;         : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}       &lt;<span class="hljs-type"><span class="hljs-type">Chart</span></span>         <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-symbol"><span class="hljs-symbol">'tren</span></span>d'         onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver}         onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}       /&gt;     &lt;/&gt;   ) } }</code> </pre> <br>  Probablemente ya entendiste qu√© hacer a continuaci√≥n.  Lo mismo se puede hacer con nuestro √∫ltimo componente: <code>DailyChart</code> . <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DailyChart</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering === <span class="hljs-literal"><span class="hljs-literal">true</span></span>         ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id}/&gt;         : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}       &lt;<span class="hljs-type"><span class="hljs-type">Chart</span></span>         <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-symbol"><span class="hljs-symbol">'dail</span></span>y'         onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver}         onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}       /&gt;     &lt;/&gt;   ) } }</code> </pre> <br>  Ahora todo est√° listo.  Es posible que ya hayas escrito algo similar en React.  Este, por supuesto, no es el peor c√≥digo del mundo, pero no sigue el principio DRY particularmente bien.  Como puede ver, al analizar el c√≥digo del componente, nosotros, en cada uno de ellos, repetimos la misma l√≥gica. <br><br>  El problema que enfrentamos ahora deber√≠a ser extremadamente claro.  Este es un c√≥digo duplicado.  Para resolverlo, queremos eliminar la necesidad de copiar el mismo c√≥digo en los casos en que lo que ya hemos implementado es necesario para un nuevo componente.  ¬øC√≥mo solucionarlo?  Antes de hablar sobre esto, nos centraremos en varios conceptos de programaci√≥n que facilitar√°n enormemente la comprensi√≥n de la soluci√≥n propuesta aqu√≠.  Estamos hablando de devoluciones de llamada y funciones de orden superior. <br><br><h2>  <font color="#3AC1EF">Funciones de orden superior</font> </h2><br>  Las funciones en JavaScript son objetos de primera clase.  Esto significa que, como objetos, matrices o cadenas, pueden asignarse a variables, pasarse a funciones como argumentos o devolverse de otras funciones. <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFive</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) } addFive(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) // <span class="hljs-number"><span class="hljs-number">15</span></span></code> </pre> <br>  Si no est√° acostumbrado a este comportamiento, el c√≥digo anterior puede parecerle extra√±o.  Hablemos de lo que est√° pasando aqu√≠.  Es decir, pasamos la funci√≥n <code>add</code> a la funci√≥n <code>addFive</code> como argumento, le <code>addReference</code> nombre a <code>addReference</code> y luego la llamamos. <br><br>  Cuando se utilizan tales construcciones, una funci√≥n que se pasa a otra como argumento se denomina devoluci√≥n de llamada (funci√≥n de devoluci√≥n de llamada), y una funci√≥n que recibe otra funci√≥n como argumento se denomina funci√≥n de orden superior. <br><br>  Nombrar entidades en la programaci√≥n es importante, as√≠ que aqu√≠ est√° el mismo c√≥digo utilizado en el que los nombres se cambian de acuerdo con los conceptos que representan. <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x,y)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">higherOrderFunction</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, callback)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callback(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) } higherOrderFunction(<span class="hljs-number"><span class="hljs-number">10</span></span>, add)</code> </pre> <br>  Este patr√≥n deber√≠a parecerte familiar.  El hecho es que si us√≥, por ejemplo, m√©todos de matriz de JavaScript, trabaj√≥ con jQuery o lodash, entonces ya us√≥ funciones de orden superior y devoluciones de llamada. <br><br><pre> <code class="hljs coffeescript">[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>].map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i)</span></span></span><span class="hljs-function"> =&gt;</span></span> i + <span class="hljs-number"><span class="hljs-number">5</span></span>) _.filter([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>], <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n)</span></span></span><span class="hljs-function"> =&gt;</span></span> n % <span class="hljs-number"><span class="hljs-number">2</span></span> === <span class="hljs-number"><span class="hljs-number">0</span></span> ); $(<span class="hljs-string"><span class="hljs-string">'#btn'</span></span>).<span class="hljs-literal"><span class="hljs-literal">on</span></span>(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Callbacks are everywhere'</span></span>) )</code> </pre> <br>  Volvamos a nuestro ejemplo.  ¬øQu√© pasa si, en lugar de simplemente crear la funci√≥n <code>addFive</code> , queremos crear la funci√≥n <code>addTwenty</code> , <code>addTwenty</code> y otras similares?  Dada la <code>addFive</code> que se <code>addFive</code> funci√≥n <code>addFive</code> , tendremos que copiar su c√≥digo y cambiarlo para crear las funciones mencionadas anteriormente basadas en √©l. <br><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFive</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTen</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">10</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTwenty</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">20</span></span>) } addFive(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) // <span class="hljs-number"><span class="hljs-number">15</span></span> addTen(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) // <span class="hljs-number"><span class="hljs-number">20</span></span> addTwenty(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) // <span class="hljs-number"><span class="hljs-number">30</span></span></code> </pre> <br>  Cabe se√±alar que nuestro c√≥digo no era tan pesadilla, pero est√° claro que muchos fragmentos se repiten.  Nuestro objetivo es que podamos crear tantas funciones que agreguen ciertos n√∫meros a los n√∫meros que se les <code>addFive</code> ( <code>addFive</code> , <code>addTen</code> , <code>addTwenty</code> , etc.) todo lo que necesitemos, mientras minimizamos la duplicaci√≥n de c√≥digo.  ¬øQuiz√°s para lograr esto necesitamos crear una funci√≥n <code>makeAdder</code> ?  Esta funci√≥n puede tomar un cierto n√∫mero y un enlace a la funci√≥n de <code>add</code> .  Dado que el prop√≥sito de esta funci√≥n es crear una nueva funci√≥n que agregue el n√∫mero que se le pas√≥ al dado, podemos hacer que la funci√≥n <code>makeAdder</code> devuelva una nueva funci√≥n que contiene un cierto n√∫mero (como el n√∫mero 5 en <code>makeFive</code> ) y que podr√≠a tomar n√∫meros para agregar a ese n√∫mero. <br><br>  Eche un vistazo a un ejemplo de la implementaci√≥n de los mecanismos anteriores. <br><br><pre> <code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeAdder</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(y)</span></span></span><span class="hljs-function"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, y) } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addFive = makeAdder(<span class="hljs-number"><span class="hljs-number">5</span></span>, add) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addTen = makeAdder(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addTwenty = makeAdder(<span class="hljs-number"><span class="hljs-number">20</span></span>, add) addFive(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-comment"><span class="hljs-comment">// 15 addTen(10) // 20 addTwenty(10) // 30</span></span></code> </pre> <br>  Ahora podemos crear tantas funciones de <code>add</code> como sea necesario, mientras minimizamos la cantidad de duplicaci√≥n de c√≥digo. <br><br>  Si es interesante, el concepto de que hay una determinada funci√≥n que procesa otras funciones para que puedan usarse con menos par√°metros que antes se llama "aplicaci√≥n parcial de la funci√≥n".  Este enfoque se utiliza en la programaci√≥n funcional.  Un ejemplo de su uso es el m√©todo <code>.bind</code> utilizado en JavaScript. <br><br>  Todo esto es bueno, pero ¬øqu√© tiene que ver React con el problema anterior de duplicar el c√≥digo para procesar eventos del mouse al crear nuevos componentes que necesitan esta caracter√≠stica?  El hecho es que al igual que la funci√≥n de orden superior <code>makeAdder</code> nos ayuda a minimizar la duplicaci√≥n de c√≥digo, lo que se llama el "componente de orden superior" nos ayudar√° a lidiar con el mismo problema en una aplicaci√≥n React.  Sin embargo, aqu√≠ todo se ver√° un poco diferente.  Es decir, en lugar de un esquema de trabajo, durante el cual una funci√≥n de orden superior devuelve una nueva funci√≥n que llama a una devoluci√≥n de llamada, un componente de orden superior puede implementar su propio esquema.  Es decir, puede devolver un nuevo componente que representa un componente que desempe√±a el papel de una "devoluci√≥n de llamada".  Quiz√°s ya hayamos dicho muchas cosas, as√≠ que es hora de pasar a los ejemplos. <br><br><h2>  <font color="#3AC1EF">Nuestra funci√≥n de orden superior</font> </h2><br>  Esta caracter√≠stica tiene las siguientes caracter√≠sticas: <br><br><ul><li>  Ella es una funci√≥n. </li><li>  Ella acepta, como argumento, una devoluci√≥n de llamada. </li><li>  Devuelve una nueva funci√≥n. </li><li>  La funci√≥n que devuelve puede llamar a la devoluci√≥n de llamada original que se pas√≥ a nuestra funci√≥n de orden superior. </li></ul><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">higherOrderFunction</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(callback)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callback() } }</code> </pre> <br><h2>  <font color="#3AC1EF">Nuestro componente de mayor orden</font> </h2><br>  Este componente se puede caracterizar de la siguiente manera: <br><br><ul><li>  Es un componente. </li><li>  Como argumento, toma otro componente. </li><li>  Devuelve un nuevo componente. </li><li>  El componente que devuelve puede representar el componente original pasado al componente de orden superior. </li></ul><br><pre> <code class="hljs scala">function higherOrderComponent (<span class="hljs-type"><span class="hljs-type">Component</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   render() {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &lt;<span class="hljs-type"><span class="hljs-type">Component</span></span> /&gt;   } } }</code> </pre> <br><h2>  <font color="#3AC1EF">Implementaci√≥n HOC</font> </h2><br>  Ahora que, en t√©rminos generales, hemos descubierto exactamente qu√© acciones realiza el componente de orden superior, comenzaremos a realizar cambios en nuestro c√≥digo React.  Si recuerdas, la esencia del problema que estamos resolviendo es que el c√≥digo que implementa la l√≥gica de procesamiento de eventos del mouse debe copiarse a todos los componentes que necesitan esta funci√≥n. <br><br><pre> <code class="hljs coffeescript">state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })</code> </pre> <br>  Dado esto, necesitamos nuestro componente de orden superior (llam√©moslo con <code>withHover</code> ) para encapsular el c√≥digo de procesamiento de eventos del mouse y luego pasar la propiedad <code>hovering</code> a los componentes que representa.  Esto nos permitir√° evitar la duplicaci√≥n del c√≥digo correspondiente al colocarlo en el componente <code>withHover</code> . <br><br>  En definitiva, esto es lo que queremos lograr.  Siempre que necesitemos un componente que necesite tener una idea de su propiedad <code>hovering</code> , podemos pasar este componente a un componente de orden superior <code>withHover</code> .  Es decir, queremos trabajar con componentes como se muestra a continuaci√≥n. <br><br><pre> <code class="hljs lisp">const InfoWithHover = withHover(<span class="hljs-name"><span class="hljs-name">Info</span></span>) const TrendChartWithHover = withHover(<span class="hljs-name"><span class="hljs-name">TrendChart</span></span>) const DailyChartWithHover = withHover(<span class="hljs-name"><span class="hljs-name">DailyChart</span></span>)</code> </pre> <br>  Luego, cuando se representa lo que <code>withHover</code> , ser√° el componente fuente al que se pasa la propiedad <code>hovering</code> . <br><br><pre> <code class="hljs xml">function Info ({ hovering, height }) { return (   <span class="hljs-tag"><span class="hljs-tag">&lt;&gt;</span></span>     {hovering === true       ? <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Tooltip</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{this.props.id}</span></span></span><span class="hljs-tag"> /&gt;</span></span>       : null}     <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span></span><span class="hljs-tag">       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{height}</span></span></span><span class="hljs-tag">       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0 0 16 16"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span><span class="hljs-tag">&gt;</span></span>         <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span></span><span class="hljs-tag"> /&gt;</span></span>     <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/&gt;</span></span> ) }</code> </pre> <br>  De hecho, ahora solo tenemos que implementar el componente <code>withHover</code> .  De lo anterior, se puede entender que debe realizar tres acciones: <br><br><ul><li>  Lleve un argumento a Componente. </li><li>  Devuelve un nuevo componente. </li><li>  Renderice el argumento Componente pas√°ndole la propiedad <code>hovering</code> . </li></ul><br><h3>  <font color="#3AC1EF">‚ñç Aceptar el argumento Componente</font> </h3><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withHover</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Component)</span></span></span></span> { }</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç Devolver un nuevo componente</font> </h3><br><pre> <code class="hljs scala">function withHover (<span class="hljs-type"><span class="hljs-type">Component</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ } }</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç Representaci√≥n del componente Componente con la propiedad flotante pasada</font> </h3><br>  Ahora nos enfrentamos a la siguiente pregunta: ¬øc√≥mo llegar a la propiedad <code>hovering</code> ?  De hecho, ya escribimos el c√≥digo para trabajar con esta propiedad.  Solo tenemos que agregarlo al nuevo componente y luego pasarle la propiedad de <code>hovering</code> al representar el componente pasado al componente de orden superior en forma del argumento <code>Component</code> . <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withHover</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOver</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOver}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOut</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOut}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">         </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Component</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hovering</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.hovering}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">       </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     );   } } }</span></span></code> </pre> <br>  Prefiero hablar sobre estas cosas de la siguiente manera (como dice la documentaci√≥n de React): un componente convierte las propiedades en una interfaz de usuario, y un componente de orden superior convierte un componente en otro componente.  En nuestro caso, transformaremos los componentes <code>Info</code> , <code>TrendChart</code> y <code>DailyChart</code> en nuevos componentes que, gracias a la propiedad de <code>DailyChart</code> , sepan si el puntero del mouse est√° sobre ellos. <br><br><h2>  <font color="#3AC1EF">Notas adicionales</font> </h2><br>  En este punto, hemos revisado toda la informaci√≥n b√°sica sobre los componentes de orden superior.  Sin embargo, hay algunas cosas m√°s importantes para discutir. <br><br>  Si echa un vistazo a nuestro HOC con <code>withHover</code> , notar√° que tiene al menos un punto d√©bil.  Implica que el componente receptor de la propiedad <code>hovering</code> no experimentar√° ning√∫n problema con esta propiedad.  En la mayor√≠a de los casos, es probable que esta suposici√≥n est√© justificada, pero puede suceder que esto sea inaceptable.  Por ejemplo, ¬øqu√© pasa si un componente ya tiene una propiedad <code>hovering</code> ?  En este caso, habr√° una colisi√≥n de nombres.  Por lo tanto, se puede realizar un <code>withHover</code> en el componente <code>withHover</code> , que es permitir que el usuario de este componente especifique qu√© nombre debe tener la propiedad <code>hovering</code> pasa a los componentes.  Como <code>withHover</code> es solo una funci√≥n, reescrib√°mosla para que <code>withHover</code> segundo argumento que establezca el nombre de la propiedad que se pasar√° al componente. <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withHover</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component, propName = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'hovering'</span></span></span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> props = {       [propName]: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering     }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOver</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOver}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOut</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOut}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">         </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Component</span></span></span></span><span class="xml"><span class="hljs-tag"> {</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag">} /&gt;</span></span></span><span class="xml">       </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     );   } } }</span></span></code> </pre> <br>  Ahora, gracias al mecanismo de par√°metro predeterminado ES6, establecemos el valor est√°ndar del segundo argumento como <code>hovering</code> , pero si el usuario del componente <code>withHover</code> quiere cambiar esto, puede pasar, en este segundo argumento, el nombre que necesita. <br><br><pre> <code class="hljs scala">function withHover(<span class="hljs-type"><span class="hljs-type">Component</span></span>, propName = <span class="hljs-symbol"><span class="hljs-symbol">'hoverin</span></span>g') { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     const props = {       [propName]: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering     }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       &lt;div onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver} onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}&gt;         &lt;<span class="hljs-type"><span class="hljs-type">Component</span></span> {...props} /&gt;       &lt;/div&gt;     );   } } } function <span class="hljs-type"><span class="hljs-type">Info</span></span> ({ showTooltip, height }) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;&gt;     {showTooltip === <span class="hljs-literal"><span class="hljs-literal">true</span></span>       ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id} /&gt;       : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}     &lt;svg       className=<span class="hljs-string"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span>       height={height}       viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 16 16"</span></span> width=<span class="hljs-string"><span class="hljs-string">"16"</span></span>&gt;         &lt;path d=<span class="hljs-string"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span> /&gt;     &lt;/svg&gt;   &lt;/&gt; ) } const <span class="hljs-type"><span class="hljs-type">InfoWithHover</span></span> = withHover(<span class="hljs-type"><span class="hljs-type">Info</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">'showToolti</span></span>p')</code> </pre> <br><h2>  <font color="#3AC1EF">Problema con la implementaci√≥n de Over</font> </h2><br>  Es posible que haya notado otro problema con la implementaci√≥n de <code>withHover</code> .  Si analizamos nuestro componente <code>Info</code> , notar√° que, entre otras cosas, acepta la propiedad de <code>height</code> .  La forma en que tenemos todo organizado ahora significa que la <code>height</code> se establecer√° en <code>undefined</code> .  La raz√≥n de esto es porque el componente <code>withHover</code> es el componente responsable de representar lo que se le pasa como argumento <code>Component</code> .  Ahora no estamos transfiriendo ninguna propiedad que no sea el <code>hovering</code> que creamos al <code>Component</code> Componente. <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> InfoWithHover = withHover(Info) ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &lt;InfoWithHover height=<span class="hljs-string"><span class="hljs-string">"16px"</span></span> /&gt;</code> </pre> <br>  La propiedad de <code>height</code> se pasa al componente <code>InfoWithHover</code> .  ¬øY cu√°l es este componente?  Este es el componente del que <code>withHover</code> con <code>withHover</code> . <br><br><pre> <code class="hljs scala">function withHover(<span class="hljs-type"><span class="hljs-type">Component</span></span>, propName = <span class="hljs-symbol"><span class="hljs-symbol">'hoverin</span></span>g') { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     console.log(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props) <span class="hljs-comment"><span class="hljs-comment">// { height: "16px" }     const props = {       [propName]: this.state.hovering     }     return (       &lt;div onMouseOver={this.mouseOver} onMouseOut={this.mouseOut}&gt;         &lt;Component {...props} /&gt;       &lt;/div&gt;     );   } } }</span></span></code> </pre> <br>  Dentro del componente <code>WithHover</code> <code>this.props.height</code> es <code>16px</code> , pero en el futuro no haremos nada con esta propiedad.  Necesitamos hacer que esta propiedad pase al argumento <code>Component</code> , que estamos representando. <br><br><pre> <code class="hljs kotlin">render() {     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> props = {       [propName]: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering,       ...<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props,     }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       &lt;div onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver} onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}&gt;         &lt;Component {...props} /&gt;       &lt;/div&gt;     ); }</code> </pre> <br><h2>  <font color="#3AC1EF">Sobre los problemas de trabajar con componentes de terceros de primer orden</font> </h2><br>  Creemos que ya ha apreciado las ventajas de usar componentes de orden superior para reutilizar la l√≥gica en varios componentes sin la necesidad de copiar el mismo c√≥digo.  Ahora pregunt√©monos si hay fallas en los componentes de orden superior.  Esta pregunta puede ser respondida positivamente, y ya nos hemos encontrado con estas deficiencias. <br><br>  Cuando se usa HOC, se produce una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">inversi√≥n de control</a> .  Imagine que estamos utilizando un componente de orden superior que no fue desarrollado por nosotros, como el HOC <code>withRouter</code> Router React Router.  Seg√∫n la documentaci√≥n, <code>withRouter</code> pasar√° las propiedades de <code>match</code> , <code>location</code> e <code>history</code> al componente que envolvi√≥ al representarlo. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Game</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() {   const { <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>, location, history } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props <span class="hljs-comment"><span class="hljs-comment">// From React Router   ... } } export default withRouter(Game)</span></span></code> </pre> <br>  Tenga en cuenta que no estamos creando un elemento <code>Game</code> (es decir, <code>&lt;Game /&gt;</code> ).  Transferimos completamente nuestro componente React Router y confiamos en este componente no solo para renderizar, sino tambi√©n para pasar las propiedades correctas a nuestro componente.  Ya hemos encontrado este problema antes cuando hablamos de un posible conflicto de nombre al pasar la propiedad <code>hovering</code> .  Para solucionar esto, decidimos permitir que el <code>withHover</code> HOC <code>withHover</code> use el segundo argumento para configurar el nombre de la propiedad correspondiente.  Al usar el HOC de otra persona con <code>withRouter</code> , no tenemos esa oportunidad.  Si las propiedades de <code>match</code> , <code>location</code> o <code>history</code> ya se usan en el componente <code>Game</code> , entonces podemos decir que no tuvimos suerte.  Es decir, tenemos que cambiar estos nombres en nuestro componente o rechazar el uso de HOC con <code>withRouter</code> . <br><br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>  Hablando sobre HOC en React, hay dos cosas importantes a tener en cuenta.  En primer lugar, HOC es solo un patr√≥n.  Los componentes de orden superior ni siquiera pueden llamarse algo espec√≠fico de React, a pesar del hecho de que est√°n relacionados con la arquitectura de la aplicaci√≥n.  En segundo lugar, para desarrollar aplicaciones React, no necesita saber acerca de los componentes de orden superior.  Puede que no est√©s familiarizado con ellos, pero escribe excelentes programas.  Sin embargo, como en cualquier negocio, cuantas m√°s herramientas tenga, mejor ser√° el resultado de su trabajo.  Y, si escribe aplicaciones usando React, se perjudicar√° sin agregar HOC a su arsenal. <br><br>  <b>Estimados lectores!</b>  ¬øUtiliza componentes de orden superior en React? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es428572/">https://habr.com/ru/post/es428572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es428562/index.html">Droidcon London. Como fue</a></li>
<li><a href="../es428564/index.html">B√∫squeda de MapKit: consejos y trucos</a></li>
<li><a href="../es428566/index.html">Funciones de flecha de JavaScript: por qu√© son necesarias, c√≥mo manejarlas, cu√°ndo usarlas y cu√°ndo no</a></li>
<li><a href="../es428568/index.html">Gu√≠a de desarrollo de aplicaciones web React Native</a></li>
<li><a href="../es428570/index.html">Funciones de orden superior en JavaScript</a></li>
<li><a href="../es428574/index.html">Lleve la comunicaci√≥n corporativa al siguiente nivel con Zextras Chat</a></li>
<li><a href="../es428576/index.html">[marcador] Versi√≥n en PDF del tutorial de Node.js y nueva gu√≠a de JavaScript</a></li>
<li><a href="../es428578/index.html">C√≥mo comenzar con Hibernate Search</a></li>
<li><a href="../es428580/index.html">Buena gu√≠a de comunicaci√≥n</a></li>
<li><a href="../es428582/index.html">Historia olvidada de OOP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>