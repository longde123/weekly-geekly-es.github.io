<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶ç üîõ üï¥Ô∏è Tests de performances des services Web dans le cadre de l'int√©gration continue. Exp√©rience Yandex üë©üèº‚Äçüé§ üñêüèæ ü•Å</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Presque tous les nouveaux employ√©s de Yandex sont √©tonn√©s de l'ampleur des contraintes que subissent nos produits. Des milliers d'h√¥tes avec des centa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tests de performances des services Web dans le cadre de l'int√©gration continue. Exp√©rience Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/425867/"><p>  Presque tous les nouveaux employ√©s de Yandex sont √©tonn√©s de l'ampleur des contraintes que subissent nos produits.  Des milliers d'h√¥tes avec des centaines de milliers de requ√™tes par seconde.  Et ce n'est l√† qu'un des services.  Dans ce cas, nous devons r√©pondre aux demandes en une fraction de seconde.  M√™me un l√©ger changement dans le produit peut avoir un impact significatif sur les performances, il est donc important de tester et d'√©valuer l'impact de votre code sur le service. </p><br><p>  Au sein de notre service des technologies publicitaires, les tests fonctionnent dans le cadre de la m√©thodologie d'int√©gration continue, dont nous discuterons plus en d√©tail de l'organisation du 25 octobre lors de l'√©v√©nement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Yandex de l'int√©rieur</a> , et aujourd'hui nous partagerons avec les lecteurs Habr l'exp√©rience de l'automatisation de l'√©valuation des m√©triques de produits importantes li√©es √† la performance du service.  Vous apprendrez √† confier l'analyse √† une machine, et non √† les suivre sur des graphiques.  C'est parti! </p><br><img src="https://habrastorage.org/webt/iz/tt/0g/iztt0gctohbgmc0liwkarkwteye.jpeg"><br><p><a name="habracut"></a>  Il ne s'agit pas de tester le site.  Il existe de nombreux outils en ligne pour cela.  Aujourd'hui, nous allons parler d'un service backend interne tr√®s charg√©, qui fait partie d'un grand syst√®me et pr√©pare les informations pour un service externe.  Dans notre cas, pour les pages de r√©sultats de recherche et les sites partenaires.  Si notre composant n'a pas le temps de r√©pondre, les informations qu'il contient ne seront tout simplement pas transmises √† l'utilisateur.  Ainsi, l'entreprise perdra de l'argent.  Par cons√©quent, il est tr√®s important de r√©pondre √† temps. </p><br><p>  Quelles mesures de serveur importantes peuvent √™tre mises en √©vidence? </p><br><ul><li>  <strong>Demande par seconde (RPS)</strong> .  Le bonheur d'un utilisateur est bien s√ªr important pour nous.  Mais si ce n'est pas un, mais des milliers d'utilisateurs sont venus vers vous.  Combien de requ√™tes par seconde votre serveur peut-il supporter et ne pas tomber? </li><li>  <strong>Temps par demande</strong> .  Le contenu du site doit √™tre rendu le plus rapidement possible afin que l'utilisateur ne se lasse pas d'attendre et qu'il n'aille pas au magasin pour du pop-corn.  Dans notre cas, il ne verra pas une partie importante des informations sur la page. </li><li>  <strong>Taille de l'ensemble r√©sident (RSS)</strong> .  Assurez-vous de surveiller la quantit√© de m√©moire utilis√©e par votre programme.  Si le service mange toute la m√©moire, il n'est gu√®re possible de parler de tol√©rance aux pannes. </li><li>  <strong>Erreurs HTTP</strong> . </li></ul><br><p>  Alors mettons-le dans l'ordre. </p><br><h3 id="request-per-second">  Demande par seconde </h3><br><p>  Notre d√©veloppeur, qui s'occupe de tests de charge depuis longtemps, aime parler de la ressource critique du syst√®me.  Voyons voir ce que c'est. </p><br><p>  Chaque syst√®me a ses propres caract√©ristiques de configuration qui d√©terminent le fonctionnement.  Par exemple, la longueur de la file d'attente, le d√©lai de r√©ponse, le pool de threads, etc.  Il peut donc arriver que la capacit√© de votre service repose sur l'une de ces ressources.  Vous pouvez mener une exp√©rience.  Augmentez tour √† tour chaque ressource.  Une ressource, dont l'augmentation augmentera la capacit√© de votre service, sera critique pour vous.  Dans un syst√®me bien configur√©, pour augmenter la capacit√©, vous devrez augmenter non pas une ressource, mais plusieurs.  Mais cela peut encore √™tre "ressenti".  Ce sera formidable si vous pouvez configurer votre syst√®me de sorte que toutes les ressources fonctionnent √† pleine puissance et que le service s‚Äôadapte dans les d√©lais qui lui sont impartis. </p><br><p>  Pour estimer le nombre de requ√™tes par seconde que votre serveur supportera, vous devez lui diriger un flux de requ√™tes.  √âtant donn√© que ce processus est int√©gr√© au syst√®me CI, nous utilisons un ¬´pistolet¬ª tr√®s simple avec des fonctionnalit√©s limit√©es.  Mais √† partir d'un logiciel open source, Yandex.Tank est parfait pour cette t√¢che.  Il a une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> d√©taill√©e.  Un cadeau √† Tank est un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">service</a> permettant de visualiser les r√©sultats. </p><br><p>  <em>Un petit dessus.</em>  Yandex.Tank a une fonctionnalit√© assez riche, non limit√©e √† l'automatisation des demandes de d√©corticage.  Il vous aidera √©galement √† collecter des m√©triques de votre service, √† cr√©er des graphiques et √† fixer le module avec la logique dont vous avez besoin.  En g√©n√©ral, nous vous recommandons fortement de le conna√Ætre. </p><br><p>  Vous devez maintenant envoyer des requ√™tes au tank afin qu'il puisse tirer √† notre service.  Les requ√™tes avec lesquelles vous shellerez le serveur peuvent √™tre du m√™me type, cr√©√©es et propag√©es artificiellement.  Cependant, les mesures seront beaucoup plus pr√©cises si vous pouvez collecter un v√©ritable pool de demandes d'utilisateurs pendant une certaine p√©riode de temps. </p><br><p>  La capacit√© peut √™tre mesur√©e de deux mani√®res. </p><br><p>  <strong>Mod√®le de charge ouverte (stress test)</strong> </p><br><p>  Cr√©ez des "utilisateurs", c'est-√†-dire plusieurs threads qui enverront une demande √† votre syst√®me.  La charge que nous ne donnerons pas est constante, mais l'accumule ou la nourrit m√™me par vagues.  Ensuite, cela nous rapprochera de la vie r√©elle.  Nous augmentons le RPS et saisissons le point auquel le service bombard√© ¬´franchit¬ª le SLA.  Ainsi, vous pouvez trouver les limites du syst√®me. </p><br><p>  Pour calculer le nombre d'utilisateurs, vous pouvez utiliser la petite formule (vous pouvez la lire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ).  En omettant la th√©orie, la formule ressemble √† ceci: </p><br><p>  RPS = 1000 / T * travailleurs, o√π </p><br><p>  ‚Ä¢ T - temps moyen de traitement des demandes (en millisecondes); <br>  ‚Ä¢ travailleurs - le nombre de fils; <br>  ‚Ä¢ 1000 / T requ√™tes par seconde - cette valeur sera g√©n√©r√©e par un g√©n√©rateur √† thread unique. </p><br><p>  <strong>Mod√®le de charge ferm√©e (test de charge)</strong> </p><br><p>  Nous prenons un nombre fixe d '¬´utilisateurs¬ª.  Vous devez le configurer pour que la file d'attente d'entr√©e correspondant √† la configuration de votre service soit toujours obstru√©e.  Dans le m√™me temps, cela n'a aucun sens de faire un nombre de threads sup√©rieur √† la limite de file d'attente, car nous nous reposerons sur ce nombre, et les demandes restantes seront rejet√©es par le serveur avec une erreur 5xx.  Nous regardons combien de requ√™tes par seconde le design pourra √©mettre.  Un tel sch√©ma dans le cas g√©n√©ral n'est pas similaire au flux r√©el de requ√™tes, mais il aidera √† montrer le comportement du syst√®me √† la charge maximale et √† √©valuer son d√©bit actuel. </p><br><p>  Pour la grande majorit√© des syst√®mes (o√π la ressource critique n'est pas li√©e au traitement des connexions), le r√©sultat sera le m√™me.  Dans le m√™me temps, le mod√®le ferm√© a moins de bruit, car le syst√®me est dans la zone de charge qui nous int√©resse tout le temps du test. </p><br><p>  Lors du test de notre service, nous utilisons un mod√®le ferm√©.  Apr√®s le tir, le pistolet nous indique le nombre de demandes par seconde que notre service a pu √©mettre.  Yandex.Tank cet indicateur est √©galement facile √† dire. </p><br><h3 id="time-per-request">  Temps par demande </h3><br><p>  Si nous revenons au paragraphe pr√©c√©dent, il devient √©vident qu'avec un tel sch√©ma, cela n'a aucun sens d'√©valuer le temps de r√©ponse √† une requ√™te.  Plus le syst√®me est charg√©, plus il se d√©grade et plus il r√©pond.  Par cons√©quent, pour tester le temps de r√©ponse, l'approche doit √™tre diff√©rente. </p><br><p>  Pour obtenir le temps de r√©ponse moyen, nous utiliserons le m√™me Yandex.Tank.  Ce n'est que maintenant que nous fixerons le RPS correspondant √† l'indicateur moyen de votre syst√®me en production.  Apr√®s le bombardement, nous obtenons des temps de r√©ponse pour chaque demande.  Sur la base des donn√©es collect√©es, des centiles de temps de r√©ponse peuvent √™tre calcul√©s. </p><br><p>  Ensuite, vous devez comprendre quel centile nous consid√©rons important.  Par exemple, nous misons sur la production.  Nous pouvons laisser 1% des demandes d'erreurs, des non-r√©ponses, des demandes de d√©bogage qui fonctionnent longtemps, des probl√®mes avec le r√©seau, etc.  Par cons√©quent, nous consid√©rons comme important le temps de r√©ponse, qui prend en charge 99% des demandes. </p><br><h3 id="resident-set-size">  Taille de l'ensemble r√©sident </h3><br><p>  Notre serveur fonctionne directement avec les fichiers via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mmap</a> .  En mesurant l'index RSS, nous voulons savoir combien de m√©moire le programme a pris au syst√®me d'exploitation pendant le fonctionnement. </p><br><p>  Sous Linux, le fichier / proc / PID / smaps est √©crit - il s'agit d'une extension bas√©e sur une carte qui montre la consommation de m√©moire pour chacun des mappages de processus.  Si votre processus utilise tmpfs, la m√©moire anonyme et non anonyme sera mise en smaps.  La m√©moire non anonyme comprend, par exemple, les fichiers charg√©s en m√©moire.  Voici un exemple d'entr√©e dans smaps.  Un fichier sp√©cifique est sp√©cifi√© et son param√®tre Anonymous = 0kB. </p><br><pre><code class="hljs go"><span class="hljs-number"><span class="hljs-number">7f</span></span>ea65a60000<span class="hljs-number"><span class="hljs-number">-7f</span></span>ea65a61000 r--s <span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">09</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span> <span class="hljs-number"><span class="hljs-number">79169191</span></span> /place/home/.../some.yabs Size: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Rss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Pss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Shared_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Shared_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Clean: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Private_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Referenced: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Anonymous: <span class="hljs-number"><span class="hljs-number">0</span></span> kB AnonHugePages: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Swap: <span class="hljs-number"><span class="hljs-number">0</span></span> kB KernelPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB MMUPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Locked: <span class="hljs-number"><span class="hljs-number">0</span></span> kB VmFlags: rd mr me ms</code> </pre> <br><p>  Et ceci est un exemple d'allocation de m√©moire anonyme.  Lorsqu'un processus (le m√™me mmap) demande au syst√®me d'exploitation d'allouer une certaine taille de m√©moire, une adresse lui est allou√©e.  Alors que le processus ne prend que de la m√©moire virtuelle.  √Ä ce stade, nous ne savons pas encore quel morceau de m√©moire physique sera allou√©.  Nous voyons un record sans nom.  Ceci est un exemple d'allocation de m√©moire anonyme.  Le syst√®me a √©t√© demand√© la taille de 24572 kB, mais ils ne l'ont pas utilis√© et en fait seulement RSS = 4 kB a √©t√© pris. </p><br><pre> <code class="hljs go"><span class="hljs-number"><span class="hljs-number">7f</span></span>ea67264000<span class="hljs-number"><span class="hljs-number">-7f</span></span>ea68a63000 rw-p <span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> Size: <span class="hljs-number"><span class="hljs-number">24572</span></span> kB Rss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Pss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Shared_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Shared_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Dirty: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Referenced: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Anonymous: <span class="hljs-number"><span class="hljs-number">4</span></span> kB AnonHugePages: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Swap: <span class="hljs-number"><span class="hljs-number">0</span></span> kB KernelPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB MMUPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Locked: <span class="hljs-number"><span class="hljs-number">0</span></span> kB VmFlags: rd wr mr mw me ac</code> </pre> <br><p>  √âtant donn√© que la m√©moire non anonyme allou√©e n'ira nulle part apr√®s l'arr√™t du processus, le fichier ne sera pas supprim√©, nous ne sommes pas int√©ress√©s par ce RSS. </p><br><p>  Avant de commencer √† tirer sur le serveur, nous r√©sumons le flux RSS de / proc / PID / smaps, allou√© √† la m√©moire anonyme, et nous nous en souvenons.  Nous proc√©dons au d√©corticage, similaire au temps de test par demande.  Apr√®s avoir termin√©, pensez √† nouveau √† RSS.  La diff√©rence entre l'√©tat initial et l'√©tat final sera la quantit√© de m√©moire utilis√©e par votre processus pendant le fonctionnement. </p><br><h3 id="http-oshibki">  Erreurs HTTP </h3><br><p>  N'oubliez pas de suivre les codes de r√©ponse que le service renvoie lors des tests.  Si quelque chose s'est mal pass√© lors de la configuration d'un test ou d'un environnement et que le serveur a renvoy√© des erreurs 5xx et 4xx pour toutes vos demandes, il n'y avait pas grand int√©r√™t √† un tel test.  Nous surveillons la proportion de mauvaises r√©ponses.  S'il y a beaucoup d'erreurs, le test est consid√©r√© comme invalide. </p><br><h3 id="nemnogo-o-tochnosti-izmereniy">  Un peu sur la pr√©cision des mesures </h3><br><p>  Et maintenant, la chose la plus importante.  Revenons aux paragraphes pr√©c√©dents.  Il se trouve que les valeurs absolues des m√©triques calcul√©es par nous ne sont pas si importantes pour nous.  Non, bien s√ªr, vous pouvez atteindre la stabilit√© des indicateurs, en tenant compte de tous les facteurs, erreurs et fluctuations.  En parall√®le, √©crivez un travail scientifique sur ce sujet (au fait, si quelqu'un en recherche un, cela pourrait √™tre une bonne option).  Mais ce n'est pas cela qui nous int√©resse. </p><br><p>  Il est important pour nous d'influencer la validation sp√©cifique sur le code par rapport √† l'√©tat pr√©c√©dent du syst√®me.  C'est-√†-dire que la diff√©rence entre les m√©triques de validation en validation est importante.  Et ici, il est n√©cessaire de mettre en place un processus qui comparera cette diff√©rence et garantira en m√™me temps la stabilit√© de la valeur absolue dans cet intervalle. </p><br><p>  L'environnement, les demandes, les donn√©es, l'√©tat du service - tous les facteurs √† notre disposition doivent √™tre fixes.  C'est ce syst√®me qui fonctionne pour nous dans le cadre de l'int√©gration continue, nous fournissant des informations sur toutes sortes de changements survenus au sein de chaque commit.  Malgr√© cela, il ne sera pas possible de tout r√©parer, il y aura du bruit.  On peut r√©duire le bruit, √©videmment, en augmentant l'√©chantillon, c'est-√†-dire faire plusieurs it√©rations de la prise de vue.  De plus, apr√®s avoir tourn√©, disons, 15 it√©rations, nous pouvons calculer la m√©diane de l'√©chantillon r√©sultant.  De plus, il est n√©cessaire de trouver un √©quilibre entre le bruit et la dur√©e de la prise de vue.  Par exemple, nous avons retenu une erreur de 1%.  Si vous souhaitez choisir une m√©thode statistique plus complexe et pr√©cise en fonction de vos besoins, nous vous recommandons un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">livre</a> qui r√©pertorie les options avec une description de quand et laquelle est utilis√©e. </p><br><h3 id="chto-eschyo-mozhno-sdelat-s-shumom">  Que peut-on faire d'autre avec le bruit? </h3><br><p>  Notez que l'environnement dans lequel vous effectuez des tests joue un r√¥le important dans ces tests.  Le banc de test doit √™tre fiable, il ne doit pas ex√©cuter d'autres programmes, car ils peuvent conduire √† la d√©gradation de votre service.  De plus, les r√©sultats peuvent et d√©pendront du profil de charge, de l'environnement, de la base de donn√©es et de divers ¬´orages magn√©tiques¬ª. </p><br><p>  Dans le cadre d'un test de validation unique, nous effectuons plusieurs it√©rations sur diff√©rents h√¥tes.  Premi√®rement, si vous utilisez le cloud, tout peut y arriver.  M√™me si le cloud est sp√©cialis√©, comme le n√¥tre, les processus de service y fonctionnent toujours.  Par cons√©quent, vous ne pouvez pas compter sur le r√©sultat d'un h√¥te.  Et si vous avez un h√¥te de fer, o√π il n'y a pas, comme dans le cloud, de m√©canisme standard pour √©lever l'environnement, vous pouvez m√™me le casser une fois et le laisser ainsi.  Et il vous mentira toujours.  Par cons√©quent, nous effectuons nos tests dans le cloud. </p><br><p>  Certes, une autre question en d√©coule.  Si vos mesures sont effectu√©es √† chaque fois sur des h√¥tes diff√©rents, les r√©sultats peuvent faire un peu de bruit et √† cause de cela.  Ensuite, vous pouvez normaliser les lectures sur l'h√¥te.  Autrement dit, selon les donn√©es historiques, collecter le ¬´coefficient h√¥te¬ª et en tenir compte lors de l'analyse des r√©sultats. </p><br><p>  L'analyse des donn√©es historiques montre que le mat√©riel est diff√©rent.  Le mot ¬´mat√©riel¬ª inclut ici la version du noyau et les cons√©quences de la disponibilit√© (apparemment, les objets du noyau non mobiles en m√©moire). </p><br><p>  Ainsi, √† chaque "h√¥te" (au red√©marrage, l'h√¥te "meurt" et un "nouveau" appara√Æt) nous associons l'amendement par lequel nous multiplions le RPS avant agr√©gation. </p><br><p>  Nous consid√©rons et mettons √† jour les amendements d'une mani√®re extr√™mement maladroite, rappelant √©trangement une option de formation de renforcement. </p><br><p>  Pour un vecteur donn√© de corrections post√©rieures, nous consid√©rons la fonction objectif: </p><br><ul><li>  dans chaque test, nous consid√©rons l'√©cart type des r√©sultats RPS ¬´corrig√©s¬ª obtenus </li><li>  prendre la moyenne d'eux avec des poids √©gaux <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=&quot;false&quot;>(</mo><mo stretchy=&quot;false&quot;>(</mo><mi>t</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>&amp;#x2212;</mo><mi>m</mi><mi>a</mi><mi>i</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>a</mi><mi>n</mi><mi>t</mi><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>t</mi><mi>a</mi><mi>u</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="41.841ex" height="2.66ex" viewBox="0 -832 18014.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-65" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-78" x="466" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-70" x="1039" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMAIN-28" x="1542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMAIN-28" x="1932" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="2321" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-65" x="2683" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-73" x="3149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="3619" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="3980" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-69" x="4342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-6D" x="4687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-65" x="5566" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-73" x="6032" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="6502" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-61" x="6863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-6D" x="7393" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-70" x="8271" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMAIN-2212" x="8997" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-6D" x="9997" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-61" x="10876" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-69" x="11405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-6E" x="11751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="12351" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-65" x="12713" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-6E" x="13179" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-61" x="13780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-6E" x="14309" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="14910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMAIN-29" x="15271" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMAIN-2F" x="15661" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="16161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-61" x="16523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-75" x="17052" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMAIN-29" x="17625" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>t</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>‚àí</mo><mi>m</mi><mi>a</mi><mi>i</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>a</mi><mi>n</mi><mi>t</mi><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>t</mi><mi>a</mi><mi>u</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> exp ((testtimestamp - maintenant) / tau) </script>  , </li><li>  nous avons tau = 1 semaine. </li></ul><br><p>  Ensuite, nous fixons une correction (pour l'h√¥te avec la plus grande somme de ces poids) √† 1,0 et recherchons les valeurs de toutes les autres corrections qui donnent un minimum de la fonction objectif. </p><br><p>  Afin de valider les r√©sultats sur les donn√©es historiques, nous consid√©rons les corrections sur les anciennes donn√©es, nous consid√©rons le r√©sultat corrig√© sur le frais, comparons avec le non corrig√©. </p><br><p>  Une autre option pour ajuster les r√©sultats et r√©duire le bruit est la normalisation des ¬´synth√©tiques¬ª.  Avant de d√©marrer le service √† tester, ex√©cutez un ¬´programme synth√©tique¬ª sur l'h√¥te, √† partir duquel vous pouvez √©valuer l'√©tat de l'h√¥te et calculer le facteur de correction.  Mais dans notre cas, nous utilisons des corrections bas√©es sur l'h√¥te, et cette id√©e est rest√©e une id√©e.  Peut-√™tre que l'un d'entre vous l'aimera. </p><br><p>  Malgr√© l'automatisation et tous ses avantages, n'oubliez pas la dynamique de vos indicateurs.  Il est important de s'assurer que le service ne se d√©grade pas avec le temps.  Vous ne remarquerez peut-√™tre pas de petits rabattements, ils peuvent s'accumuler et, sur une longue p√©riode, vos indicateurs peuvent s'affaisser.  Voici un exemple de nos graphiques que nous examinons √† RPS.  Il montre la valeur relative de chaque validation v√©rifi√©e, son num√©ro et la possibilit√© de voir d'o√π la version a √©t√© allou√©e. </p><br><img src="https://habrastorage.org/webt/qu/lj/_h/qulj_hvry8sfubkrt285xlzidsq.png"><br><img src="https://habrastorage.org/webt/gp/76/o9/gp76o9rgelvep5u8rrpyoricmfs.png"><br><p>  Si vous lisez l'article, il sera certainement int√©ressant pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vous de voir un</a> rapport sur Yandex.Tank et une analyse des r√©sultats des tests de charge. </p><br><p>  Nous vous rappelons √©galement que plus en d√©tail sur l'organisation de l'int√©gration continue nous parlerons du 25 octobre lors de l'√©v√©nement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Yandex de l'int√©rieur</a> .  Venez visiter! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425867/">https://habr.com/ru/post/fr425867/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425851/index.html">Infer.NET: un puissant syst√®me d'apprentissage automatique d√©sormais OpenSource</a></li>
<li><a href="../fr425853/index.html">Toute l'IA conversationnelle lors de la premi√®re conf√©rence Conversations</a></li>
<li><a href="../fr425855/index.html">Twitch m'a am√©lior√© et m'a aid√© √† survivre aux trois mois les plus sombres de ma vie.</a></li>
<li><a href="../fr425859/index.html">Les op√©rateurs r√©gionaux s'opposent √† l'annulation de l'itin√©rance</a></li>
<li><a href="../fr425861/index.html">Testez-vous: pouvez-vous prot√©ger l'entreprise contre les cyberattaques?</a></li>
<li><a href="../fr425869/index.html">iFixit: Apple n'a pas encore activ√© le blocage des MacBooks remis √† neuf</a></li>
<li><a href="../fr425871/index.html">Ekaterinbourg, 11 octobre - Atlassian rencontre le docker</a></li>
<li><a href="../fr425873/index.html">[CppCon 2018] Herb Sutter: vers un C ++ plus simple et plus puissant</a></li>
<li><a href="../fr425875/index.html">Mise √† niveau de la matrice des ordinateurs portables TN-> IPS ou comment obtenir un ordinateur portable plus avanc√© √† partir d'un ordinateur portable √©conomique</a></li>
<li><a href="../fr425877/index.html">Le PDG d'Apple affirme que les puces d'espionnage chinoises dans les serveurs Supermicro sont de la fiction</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>