<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦍 🔛 🕴️ Tests de performances des services Web dans le cadre de l'intégration continue. Expérience Yandex 👩🏼‍🎤 🖐🏾 🥁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Presque tous les nouveaux employés de Yandex sont étonnés de l'ampleur des contraintes que subissent nos produits. Des milliers d'hôtes avec des centa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tests de performances des services Web dans le cadre de l'intégration continue. Expérience Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/425867/"><p>  Presque tous les nouveaux employés de Yandex sont étonnés de l'ampleur des contraintes que subissent nos produits.  Des milliers d'hôtes avec des centaines de milliers de requêtes par seconde.  Et ce n'est là qu'un des services.  Dans ce cas, nous devons répondre aux demandes en une fraction de seconde.  Même un léger changement dans le produit peut avoir un impact significatif sur les performances, il est donc important de tester et d'évaluer l'impact de votre code sur le service. </p><br><p>  Au sein de notre service des technologies publicitaires, les tests fonctionnent dans le cadre de la méthodologie d'intégration continue, dont nous discuterons plus en détail de l'organisation du 25 octobre lors de l'événement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Yandex de l'intérieur</a> , et aujourd'hui nous partagerons avec les lecteurs Habr l'expérience de l'automatisation de l'évaluation des métriques de produits importantes liées à la performance du service.  Vous apprendrez à confier l'analyse à une machine, et non à les suivre sur des graphiques.  C'est parti! </p><br><img src="https://habrastorage.org/webt/iz/tt/0g/iztt0gctohbgmc0liwkarkwteye.jpeg"><br><p><a name="habracut"></a>  Il ne s'agit pas de tester le site.  Il existe de nombreux outils en ligne pour cela.  Aujourd'hui, nous allons parler d'un service backend interne très chargé, qui fait partie d'un grand système et prépare les informations pour un service externe.  Dans notre cas, pour les pages de résultats de recherche et les sites partenaires.  Si notre composant n'a pas le temps de répondre, les informations qu'il contient ne seront tout simplement pas transmises à l'utilisateur.  Ainsi, l'entreprise perdra de l'argent.  Par conséquent, il est très important de répondre à temps. </p><br><p>  Quelles mesures de serveur importantes peuvent être mises en évidence? </p><br><ul><li>  <strong>Demande par seconde (RPS)</strong> .  Le bonheur d'un utilisateur est bien sûr important pour nous.  Mais si ce n'est pas un, mais des milliers d'utilisateurs sont venus vers vous.  Combien de requêtes par seconde votre serveur peut-il supporter et ne pas tomber? </li><li>  <strong>Temps par demande</strong> .  Le contenu du site doit être rendu le plus rapidement possible afin que l'utilisateur ne se lasse pas d'attendre et qu'il n'aille pas au magasin pour du pop-corn.  Dans notre cas, il ne verra pas une partie importante des informations sur la page. </li><li>  <strong>Taille de l'ensemble résident (RSS)</strong> .  Assurez-vous de surveiller la quantité de mémoire utilisée par votre programme.  Si le service mange toute la mémoire, il n'est guère possible de parler de tolérance aux pannes. </li><li>  <strong>Erreurs HTTP</strong> . </li></ul><br><p>  Alors mettons-le dans l'ordre. </p><br><h3 id="request-per-second">  Demande par seconde </h3><br><p>  Notre développeur, qui s'occupe de tests de charge depuis longtemps, aime parler de la ressource critique du système.  Voyons voir ce que c'est. </p><br><p>  Chaque système a ses propres caractéristiques de configuration qui déterminent le fonctionnement.  Par exemple, la longueur de la file d'attente, le délai de réponse, le pool de threads, etc.  Il peut donc arriver que la capacité de votre service repose sur l'une de ces ressources.  Vous pouvez mener une expérience.  Augmentez tour à tour chaque ressource.  Une ressource, dont l'augmentation augmentera la capacité de votre service, sera critique pour vous.  Dans un système bien configuré, pour augmenter la capacité, vous devrez augmenter non pas une ressource, mais plusieurs.  Mais cela peut encore être "ressenti".  Ce sera formidable si vous pouvez configurer votre système de sorte que toutes les ressources fonctionnent à pleine puissance et que le service s’adapte dans les délais qui lui sont impartis. </p><br><p>  Pour estimer le nombre de requêtes par seconde que votre serveur supportera, vous devez lui diriger un flux de requêtes.  Étant donné que ce processus est intégré au système CI, nous utilisons un «pistolet» très simple avec des fonctionnalités limitées.  Mais à partir d'un logiciel open source, Yandex.Tank est parfait pour cette tâche.  Il a une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> détaillée.  Un cadeau à Tank est un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">service</a> permettant de visualiser les résultats. </p><br><p>  <em>Un petit dessus.</em>  Yandex.Tank a une fonctionnalité assez riche, non limitée à l'automatisation des demandes de décorticage.  Il vous aidera également à collecter des métriques de votre service, à créer des graphiques et à fixer le module avec la logique dont vous avez besoin.  En général, nous vous recommandons fortement de le connaître. </p><br><p>  Vous devez maintenant envoyer des requêtes au tank afin qu'il puisse tirer à notre service.  Les requêtes avec lesquelles vous shellerez le serveur peuvent être du même type, créées et propagées artificiellement.  Cependant, les mesures seront beaucoup plus précises si vous pouvez collecter un véritable pool de demandes d'utilisateurs pendant une certaine période de temps. </p><br><p>  La capacité peut être mesurée de deux manières. </p><br><p>  <strong>Modèle de charge ouverte (stress test)</strong> </p><br><p>  Créez des "utilisateurs", c'est-à-dire plusieurs threads qui enverront une demande à votre système.  La charge que nous ne donnerons pas est constante, mais l'accumule ou la nourrit même par vagues.  Ensuite, cela nous rapprochera de la vie réelle.  Nous augmentons le RPS et saisissons le point auquel le service bombardé «franchit» le SLA.  Ainsi, vous pouvez trouver les limites du système. </p><br><p>  Pour calculer le nombre d'utilisateurs, vous pouvez utiliser la petite formule (vous pouvez la lire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ).  En omettant la théorie, la formule ressemble à ceci: </p><br><p>  RPS = 1000 / T * travailleurs, où </p><br><p>  • T - temps moyen de traitement des demandes (en millisecondes); <br>  • travailleurs - le nombre de fils; <br>  • 1000 / T requêtes par seconde - cette valeur sera générée par un générateur à thread unique. </p><br><p>  <strong>Modèle de charge fermée (test de charge)</strong> </p><br><p>  Nous prenons un nombre fixe d '«utilisateurs».  Vous devez le configurer pour que la file d'attente d'entrée correspondant à la configuration de votre service soit toujours obstruée.  Dans le même temps, cela n'a aucun sens de faire un nombre de threads supérieur à la limite de file d'attente, car nous nous reposerons sur ce nombre, et les demandes restantes seront rejetées par le serveur avec une erreur 5xx.  Nous regardons combien de requêtes par seconde le design pourra émettre.  Un tel schéma dans le cas général n'est pas similaire au flux réel de requêtes, mais il aidera à montrer le comportement du système à la charge maximale et à évaluer son débit actuel. </p><br><p>  Pour la grande majorité des systèmes (où la ressource critique n'est pas liée au traitement des connexions), le résultat sera le même.  Dans le même temps, le modèle fermé a moins de bruit, car le système est dans la zone de charge qui nous intéresse tout le temps du test. </p><br><p>  Lors du test de notre service, nous utilisons un modèle fermé.  Après le tir, le pistolet nous indique le nombre de demandes par seconde que notre service a pu émettre.  Yandex.Tank cet indicateur est également facile à dire. </p><br><h3 id="time-per-request">  Temps par demande </h3><br><p>  Si nous revenons au paragraphe précédent, il devient évident qu'avec un tel schéma, cela n'a aucun sens d'évaluer le temps de réponse à une requête.  Plus le système est chargé, plus il se dégrade et plus il répond.  Par conséquent, pour tester le temps de réponse, l'approche doit être différente. </p><br><p>  Pour obtenir le temps de réponse moyen, nous utiliserons le même Yandex.Tank.  Ce n'est que maintenant que nous fixerons le RPS correspondant à l'indicateur moyen de votre système en production.  Après le bombardement, nous obtenons des temps de réponse pour chaque demande.  Sur la base des données collectées, des centiles de temps de réponse peuvent être calculés. </p><br><p>  Ensuite, vous devez comprendre quel centile nous considérons important.  Par exemple, nous misons sur la production.  Nous pouvons laisser 1% des demandes d'erreurs, des non-réponses, des demandes de débogage qui fonctionnent longtemps, des problèmes avec le réseau, etc.  Par conséquent, nous considérons comme important le temps de réponse, qui prend en charge 99% des demandes. </p><br><h3 id="resident-set-size">  Taille de l'ensemble résident </h3><br><p>  Notre serveur fonctionne directement avec les fichiers via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mmap</a> .  En mesurant l'index RSS, nous voulons savoir combien de mémoire le programme a pris au système d'exploitation pendant le fonctionnement. </p><br><p>  Sous Linux, le fichier / proc / PID / smaps est écrit - il s'agit d'une extension basée sur une carte qui montre la consommation de mémoire pour chacun des mappages de processus.  Si votre processus utilise tmpfs, la mémoire anonyme et non anonyme sera mise en smaps.  La mémoire non anonyme comprend, par exemple, les fichiers chargés en mémoire.  Voici un exemple d'entrée dans smaps.  Un fichier spécifique est spécifié et son paramètre Anonymous = 0kB. </p><br><pre><code class="hljs go"><span class="hljs-number"><span class="hljs-number">7f</span></span>ea65a60000<span class="hljs-number"><span class="hljs-number">-7f</span></span>ea65a61000 r--s <span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">09</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span> <span class="hljs-number"><span class="hljs-number">79169191</span></span> /place/home/.../some.yabs Size: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Rss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Pss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Shared_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Shared_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Clean: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Private_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Referenced: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Anonymous: <span class="hljs-number"><span class="hljs-number">0</span></span> kB AnonHugePages: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Swap: <span class="hljs-number"><span class="hljs-number">0</span></span> kB KernelPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB MMUPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Locked: <span class="hljs-number"><span class="hljs-number">0</span></span> kB VmFlags: rd mr me ms</code> </pre> <br><p>  Et ceci est un exemple d'allocation de mémoire anonyme.  Lorsqu'un processus (le même mmap) demande au système d'exploitation d'allouer une certaine taille de mémoire, une adresse lui est allouée.  Alors que le processus ne prend que de la mémoire virtuelle.  À ce stade, nous ne savons pas encore quel morceau de mémoire physique sera alloué.  Nous voyons un record sans nom.  Ceci est un exemple d'allocation de mémoire anonyme.  Le système a été demandé la taille de 24572 kB, mais ils ne l'ont pas utilisé et en fait seulement RSS = 4 kB a été pris. </p><br><pre> <code class="hljs go"><span class="hljs-number"><span class="hljs-number">7f</span></span>ea67264000<span class="hljs-number"><span class="hljs-number">-7f</span></span>ea68a63000 rw-p <span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> Size: <span class="hljs-number"><span class="hljs-number">24572</span></span> kB Rss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Pss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Shared_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Shared_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Dirty: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Referenced: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Anonymous: <span class="hljs-number"><span class="hljs-number">4</span></span> kB AnonHugePages: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Swap: <span class="hljs-number"><span class="hljs-number">0</span></span> kB KernelPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB MMUPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Locked: <span class="hljs-number"><span class="hljs-number">0</span></span> kB VmFlags: rd wr mr mw me ac</code> </pre> <br><p>  Étant donné que la mémoire non anonyme allouée n'ira nulle part après l'arrêt du processus, le fichier ne sera pas supprimé, nous ne sommes pas intéressés par ce RSS. </p><br><p>  Avant de commencer à tirer sur le serveur, nous résumons le flux RSS de / proc / PID / smaps, alloué à la mémoire anonyme, et nous nous en souvenons.  Nous procédons au décorticage, similaire au temps de test par demande.  Après avoir terminé, pensez à nouveau à RSS.  La différence entre l'état initial et l'état final sera la quantité de mémoire utilisée par votre processus pendant le fonctionnement. </p><br><h3 id="http-oshibki">  Erreurs HTTP </h3><br><p>  N'oubliez pas de suivre les codes de réponse que le service renvoie lors des tests.  Si quelque chose s'est mal passé lors de la configuration d'un test ou d'un environnement et que le serveur a renvoyé des erreurs 5xx et 4xx pour toutes vos demandes, il n'y avait pas grand intérêt à un tel test.  Nous surveillons la proportion de mauvaises réponses.  S'il y a beaucoup d'erreurs, le test est considéré comme invalide. </p><br><h3 id="nemnogo-o-tochnosti-izmereniy">  Un peu sur la précision des mesures </h3><br><p>  Et maintenant, la chose la plus importante.  Revenons aux paragraphes précédents.  Il se trouve que les valeurs absolues des métriques calculées par nous ne sont pas si importantes pour nous.  Non, bien sûr, vous pouvez atteindre la stabilité des indicateurs, en tenant compte de tous les facteurs, erreurs et fluctuations.  En parallèle, écrivez un travail scientifique sur ce sujet (au fait, si quelqu'un en recherche un, cela pourrait être une bonne option).  Mais ce n'est pas cela qui nous intéresse. </p><br><p>  Il est important pour nous d'influencer la validation spécifique sur le code par rapport à l'état précédent du système.  C'est-à-dire que la différence entre les métriques de validation en validation est importante.  Et ici, il est nécessaire de mettre en place un processus qui comparera cette différence et garantira en même temps la stabilité de la valeur absolue dans cet intervalle. </p><br><p>  L'environnement, les demandes, les données, l'état du service - tous les facteurs à notre disposition doivent être fixes.  C'est ce système qui fonctionne pour nous dans le cadre de l'intégration continue, nous fournissant des informations sur toutes sortes de changements survenus au sein de chaque commit.  Malgré cela, il ne sera pas possible de tout réparer, il y aura du bruit.  On peut réduire le bruit, évidemment, en augmentant l'échantillon, c'est-à-dire faire plusieurs itérations de la prise de vue.  De plus, après avoir tourné, disons, 15 itérations, nous pouvons calculer la médiane de l'échantillon résultant.  De plus, il est nécessaire de trouver un équilibre entre le bruit et la durée de la prise de vue.  Par exemple, nous avons retenu une erreur de 1%.  Si vous souhaitez choisir une méthode statistique plus complexe et précise en fonction de vos besoins, nous vous recommandons un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">livre</a> qui répertorie les options avec une description de quand et laquelle est utilisée. </p><br><h3 id="chto-eschyo-mozhno-sdelat-s-shumom">  Que peut-on faire d'autre avec le bruit? </h3><br><p>  Notez que l'environnement dans lequel vous effectuez des tests joue un rôle important dans ces tests.  Le banc de test doit être fiable, il ne doit pas exécuter d'autres programmes, car ils peuvent conduire à la dégradation de votre service.  De plus, les résultats peuvent et dépendront du profil de charge, de l'environnement, de la base de données et de divers «orages magnétiques». </p><br><p>  Dans le cadre d'un test de validation unique, nous effectuons plusieurs itérations sur différents hôtes.  Premièrement, si vous utilisez le cloud, tout peut y arriver.  Même si le cloud est spécialisé, comme le nôtre, les processus de service y fonctionnent toujours.  Par conséquent, vous ne pouvez pas compter sur le résultat d'un hôte.  Et si vous avez un hôte de fer, où il n'y a pas, comme dans le cloud, de mécanisme standard pour élever l'environnement, vous pouvez même le casser une fois et le laisser ainsi.  Et il vous mentira toujours.  Par conséquent, nous effectuons nos tests dans le cloud. </p><br><p>  Certes, une autre question en découle.  Si vos mesures sont effectuées à chaque fois sur des hôtes différents, les résultats peuvent faire un peu de bruit et à cause de cela.  Ensuite, vous pouvez normaliser les lectures sur l'hôte.  Autrement dit, selon les données historiques, collecter le «coefficient hôte» et en tenir compte lors de l'analyse des résultats. </p><br><p>  L'analyse des données historiques montre que le matériel est différent.  Le mot «matériel» inclut ici la version du noyau et les conséquences de la disponibilité (apparemment, les objets du noyau non mobiles en mémoire). </p><br><p>  Ainsi, à chaque "hôte" (au redémarrage, l'hôte "meurt" et un "nouveau" apparaît) nous associons l'amendement par lequel nous multiplions le RPS avant agrégation. </p><br><p>  Nous considérons et mettons à jour les amendements d'une manière extrêmement maladroite, rappelant étrangement une option de formation de renforcement. </p><br><p>  Pour un vecteur donné de corrections postérieures, nous considérons la fonction objectif: </p><br><ul><li>  dans chaque test, nous considérons l'écart type des résultats RPS «corrigés» obtenus </li><li>  prendre la moyenne d'eux avec des poids égaux <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=&quot;false&quot;>(</mo><mo stretchy=&quot;false&quot;>(</mo><mi>t</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>&amp;#x2212;</mo><mi>m</mi><mi>a</mi><mi>i</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>a</mi><mi>n</mi><mi>t</mi><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>t</mi><mi>a</mi><mi>u</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="41.841ex" height="2.66ex" viewBox="0 -832 18014.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-65" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-78" x="466" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-70" x="1039" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMAIN-28" x="1542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMAIN-28" x="1932" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="2321" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-65" x="2683" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-73" x="3149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="3619" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="3980" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-69" x="4342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-6D" x="4687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-65" x="5566" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-73" x="6032" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="6502" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-61" x="6863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-6D" x="7393" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-70" x="8271" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMAIN-2212" x="8997" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-6D" x="9997" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-61" x="10876" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-69" x="11405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-6E" x="11751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="12351" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-65" x="12713" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-6E" x="13179" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-61" x="13780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-6E" x="14309" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="14910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMAIN-29" x="15271" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMAIN-2F" x="15661" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-74" x="16161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-61" x="16523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMATHI-75" x="17052" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhg4PX2izx0JNtBG_icoJD-Dov3tfw#MJMAIN-29" x="17625" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>t</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>−</mo><mi>m</mi><mi>a</mi><mi>i</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>a</mi><mi>n</mi><mi>t</mi><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>t</mi><mi>a</mi><mi>u</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> exp ((testtimestamp - maintenant) / tau) </script>  , </li><li>  nous avons tau = 1 semaine. </li></ul><br><p>  Ensuite, nous fixons une correction (pour l'hôte avec la plus grande somme de ces poids) à 1,0 et recherchons les valeurs de toutes les autres corrections qui donnent un minimum de la fonction objectif. </p><br><p>  Afin de valider les résultats sur les données historiques, nous considérons les corrections sur les anciennes données, nous considérons le résultat corrigé sur le frais, comparons avec le non corrigé. </p><br><p>  Une autre option pour ajuster les résultats et réduire le bruit est la normalisation des «synthétiques».  Avant de démarrer le service à tester, exécutez un «programme synthétique» sur l'hôte, à partir duquel vous pouvez évaluer l'état de l'hôte et calculer le facteur de correction.  Mais dans notre cas, nous utilisons des corrections basées sur l'hôte, et cette idée est restée une idée.  Peut-être que l'un d'entre vous l'aimera. </p><br><p>  Malgré l'automatisation et tous ses avantages, n'oubliez pas la dynamique de vos indicateurs.  Il est important de s'assurer que le service ne se dégrade pas avec le temps.  Vous ne remarquerez peut-être pas de petits rabattements, ils peuvent s'accumuler et, sur une longue période, vos indicateurs peuvent s'affaisser.  Voici un exemple de nos graphiques que nous examinons à RPS.  Il montre la valeur relative de chaque validation vérifiée, son numéro et la possibilité de voir d'où la version a été allouée. </p><br><img src="https://habrastorage.org/webt/qu/lj/_h/qulj_hvry8sfubkrt285xlzidsq.png"><br><img src="https://habrastorage.org/webt/gp/76/o9/gp76o9rgelvep5u8rrpyoricmfs.png"><br><p>  Si vous lisez l'article, il sera certainement intéressant pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vous de voir un</a> rapport sur Yandex.Tank et une analyse des résultats des tests de charge. </p><br><p>  Nous vous rappelons également que plus en détail sur l'organisation de l'intégration continue nous parlerons du 25 octobre lors de l'événement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Yandex de l'intérieur</a> .  Venez visiter! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425867/">https://habr.com/ru/post/fr425867/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425851/index.html">Infer.NET: un puissant système d'apprentissage automatique désormais OpenSource</a></li>
<li><a href="../fr425853/index.html">Toute l'IA conversationnelle lors de la première conférence Conversations</a></li>
<li><a href="../fr425855/index.html">Twitch m'a amélioré et m'a aidé à survivre aux trois mois les plus sombres de ma vie.</a></li>
<li><a href="../fr425859/index.html">Les opérateurs régionaux s'opposent à l'annulation de l'itinérance</a></li>
<li><a href="../fr425861/index.html">Testez-vous: pouvez-vous protéger l'entreprise contre les cyberattaques?</a></li>
<li><a href="../fr425869/index.html">iFixit: Apple n'a pas encore activé le blocage des MacBooks remis à neuf</a></li>
<li><a href="../fr425871/index.html">Ekaterinbourg, 11 octobre - Atlassian rencontre le docker</a></li>
<li><a href="../fr425873/index.html">[CppCon 2018] Herb Sutter: vers un C ++ plus simple et plus puissant</a></li>
<li><a href="../fr425875/index.html">Mise à niveau de la matrice des ordinateurs portables TN-> IPS ou comment obtenir un ordinateur portable plus avancé à partir d'un ordinateur portable économique</a></li>
<li><a href="../fr425877/index.html">Le PDG d'Apple affirme que les puces d'espionnage chinoises dans les serveurs Supermicro sont de la fiction</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>