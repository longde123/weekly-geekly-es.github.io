<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌦️ ⛳️ 😯 Jutaan binari kemudian. Bagaimana Linux Diperkuat 🎃 👋 🐏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR . Pada artikel ini, kami mengeksplorasi skema pengerasan yang bekerja di luar kotak pada lima distribusi Linux populer. Untuk masing-masing, ka...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jutaan binari kemudian. Bagaimana Linux Diperkuat</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444418/"><img src="https://habrastorage.org/getpro/habr/post_images/43f/b35/8ca/43fb358cac8e2bec978126698b7d2ece.png" align="left" width="340">  <b>TL; DR</b> .  Pada artikel ini, kami mengeksplorasi skema pengerasan yang bekerja di luar kotak pada lima distribusi Linux populer.  Untuk masing-masing, kami mengambil konfigurasi kernel default, mengunduh semua paket, dan menganalisis skema perlindungan dalam file biner yang dilampirkan.  Kami mempertimbangkan distribusi OpenSUSE 12.4, Debian 9, CentOS, RHEL 6.10 dan 7, serta Ubuntu 14.04, 12.04 dan 18.04 LTS. <br><br>  Hasilnya mengkonfirmasi bahwa skema dasar, seperti stack canaries dan code-independent code, belum digunakan oleh semua orang.  Situasi ini bahkan lebih buruk bagi penyusun ketika datang untuk melindungi terhadap kerentanan seperti tumpukan bentrokan, yang menjadi sorotan pada bulan Januari setelah menerbitkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">informasi kerentanan di systemd</a> .  Tapi tidak semuanya sia-sia.  Di sebagian besar binari, metode perlindungan dasar diterapkan, dan jumlahnya bertambah dari versi ke versi. <br><br>  Verifikasi menunjukkan bahwa jumlah terbesar metode perlindungan diimplementasikan di Ubuntu 18,04 di tingkat OS dan aplikasi, diikuti oleh Debian 9. Di sisi lain, di OpenSUSE 12.4, CentOS 7 dan RHEL 7, skema perlindungan dasar juga diterapkan, dan perlindungan benturan tumpukan diterapkan bahkan lebih luas. dengan paket yang jauh lebih padat secara default. <br><a name="habracut"></a><br><h1>  Pendahuluan </h1><br>  Sulit untuk menyediakan perangkat lunak berkualitas tinggi.  Terlepas dari sejumlah besar alat canggih untuk analisis kode statis dan analisis dinamis saat runtime, serta kemajuan yang signifikan dalam pengembangan kompiler dan bahasa pemrograman, perangkat lunak modern masih mengalami kerentanan yang terus-menerus dieksploitasi oleh penjahat cyber.  Situasinya bahkan lebih buruk di ekosistem yang memasukkan kode warisan.  Dalam kasus seperti itu, kita tidak hanya menghadapi masalah abadi dalam mencari kemungkinan kesalahan yang dieksploitasi, tetapi juga dibatasi oleh kerangka kompatibilitas mundur yang kaku, yang seringkali membutuhkan pemeliharaan kode yang terbatas, dan bahkan lebih buruk lagi, rentan atau bermasalah. <br><br>  Di sinilah metode pengerasan ikut berperan.  Kami tidak dapat mencegah beberapa jenis kesalahan, tetapi kami dapat mempersulit kehidupan penyerang dan menyelesaikan sebagian masalah dengan mencegah atau mencegah <i>operasi</i> kesalahan ini.  Perlindungan semacam itu digunakan di semua sistem operasi modern, namun, metode ini sangat bervariasi dalam kompleksitas, efisiensi, dan kinerja: dari stack canaries dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ASLR</a> hingga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CFI</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ROP</a> perlindungan penuh.  Pada artikel ini, kami akan mempertimbangkan metode perlindungan apa yang digunakan dalam distribusi Linux paling populer dalam konfigurasi default, dan juga mempelajari sifat-sifat binari yang didistribusikan melalui sistem manajemen paket masing-masing distribusi. <br><br><h3>  CVE dan keamanan </h3><br>  Kita semua pernah melihat artikel dengan judul seperti "Aplikasi Paling Rentan Tahun Ini" atau "Sistem Operasi Paling Rentan".  Biasanya, mereka menyediakan statistik pada jumlah total catatan kerentanan seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CVE (Common Vulnerability and Exposures) yang</a> diperoleh dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">National Vulnerability Database (NVD)</a> dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NIST</a> dan sumber lainnya.  Selanjutnya, aplikasi atau OS ini diberi peringkat berdasarkan jumlah CVE.  Sayangnya, meskipun CVE sangat berguna untuk melacak masalah dan menginformasikan vendor dan pengguna, mereka tidak banyak berbicara tentang keamanan nyata dari perangkat lunak. <br><br>  Sebagai contoh, perhatikan jumlah total CVE selama empat tahun terakhir untuk kernel Linux dan lima distribusi server paling populer, yaitu Ubuntu, Debian, Red Hat Enterprise Linux, dan OpenSUSE. <br><br><img src="https://habrastorage.org/webt/3_/pt/md/3_ptmdzx313ayxw3xpi0udnlbdq.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">1</font></i> <br><br>  Apa yang diceritakan bagan ini kepada kita?  Apakah lebih banyak CVE berarti bahwa satu distribusi lebih rentan daripada yang lain?  Tidak ada jawaban.  Misalnya, dalam artikel ini Anda akan melihat bahwa Debian mengimplementasikan mekanisme keamanan yang lebih ketat dibandingkan dengan, katakanlah, OpenSUSE atau RedHat Linux, namun Debian memiliki lebih banyak CVE.  Namun, itu tidak berarti keamanan yang melemah: bahkan memiliki CVE tidak mengatakan apakah kerentanan itu dapat <i>dieksploitasi</i> .  Skor keparahan memberikan gambaran tentang seberapa <i>besar kemungkinan</i> eksploitasi kerentanan, tetapi pada akhirnya eksploitasinya sebagian besar bergantung pada perlindungan yang ada dalam sistem yang terkena dampak, serta pada sumber daya dan kemampuan para penyerang.  Selain itu, kurangnya laporan CVE tidak mengatakan apa-apa tentang kerentanan lain yang <i>tidak terdaftar atau tidak diketahui</i> .  Perbedaan dalam CVE dapat dijelaskan bukan oleh kualitas perangkat lunak, tetapi oleh faktor-faktor lain, termasuk sumber daya yang dialokasikan untuk pengujian, atau ukuran basis pengguna.  Dalam contoh kami, lebih banyak CVE Debian mungkin mengindikasikan bahwa Debian memberikan lebih banyak paket perangkat lunak. <br><br>  Tentu saja, sistem CVE memberikan informasi berguna yang memungkinkan Anda membuat perlindungan yang sesuai.  Semakin baik kita memahami alasan kegagalan program, semakin mudah untuk mengidentifikasi metode operasi yang mungkin dan mengembangkan mekanisme <i>deteksi dan respons</i> yang tepat.  Dalam gbr.  Gambar 2 menunjukkan kategori kerentanan untuk semua distribusi selama empat tahun terakhir ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sumber</a> ).  Sangat jelas bahwa sebagian besar CVE masuk dalam kategori berikut: denial of service (DoS), eksekusi kode, overflow, korupsi memori, kebocoran informasi (exfiltration), dan eskalasi privilege.  Meskipun banyak CVE yang dibahas beberapa kali dalam kategori yang berbeda, secara umum, masalah yang sama tetap ada dari tahun ke tahun.  Pada bagian selanjutnya dari artikel ini, kami akan mengevaluasi penggunaan berbagai skema perlindungan untuk mencegah eksploitasi kerentanan ini. <br><br><img src="https://habrastorage.org/webt/tr/92/pc/tr92pcngbl1y4qxt3shouu6wdi8.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">2</font></i> <br><br><h3>  Tugasnya </h3><br>  Dalam artikel ini, kami bermaksud menjawab pertanyaan-pertanyaan berikut: <br><br><ul><li>  Apa keamanan berbagai distribusi Linux?  Mekanisme pertahanan apa yang ada dalam aplikasi ruang kernel dan pengguna? <br></li><li>  Bagaimana adopsi mekanisme perlindungan untuk berbagai distribusi berubah seiring waktu? <br></li><li>  Berapa dependensi rata-rata paket dan pustaka untuk setiap distribusi? <br></li><li>  Perlindungan apa yang diterapkan untuk setiap biner? </li></ul><br><h3>  Memilih Distribusi </h3><br>  Ternyata sulit untuk menemukan statistik yang akurat tentang instalasi distribusi, karena dalam kebanyakan kasus jumlah unduhan tidak menunjukkan jumlah instalasi nyata.  Namun, varian Unix merupakan mayoritas sistem server (69,2% pada server web, menurut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">statistik dari</a> W3techs dan sumber lain), dan bagian mereka terus tumbuh.  Jadi, untuk penelitian kami, kami fokus pada distribusi yang tersedia di luar platform <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Google Cloud</a> .  Secara khusus, kami memilih OS berikut: <br><br><table><tbody><tr><th>  Distribusi / versi </th><th>  Intinya </th><th>  Membangun </th></tr><tr><td>  OpenSUSE 12.4 </td><td>  4.12.14-95.3-default </td><td>  # 1 SMP Rab 5 Des 06:00:48 UTC 2018 (63a8d29) </td></tr><tr><td>  Debian 9 (stretch) </td><td>  4.9.0-8-amd64 </td><td>  # 1 SMP Debian 4.9.130-2 (2018-10-27) </td></tr><tr><td>  CentOS 6.10 </td><td>  2.6.32-754.10.1.el6.x86_64 </td><td>  # 1 SMP Sel 15 Jan 17:07:28 UTC 2019 </td></tr><tr><td>  CentOS 7 </td><td>  3.10.0-957.5.1.el7.x86_64 </td><td>  # 1 SMP Fri 1 Feb 14:54:57 UTC 2019 </td></tr><tr><td>  Server Red Hat Enterprise Linux 6.10 (Santiago) </td><td>  2.6.32-754.9.1.el6.x86_64 </td><td>  # 1 SMP Rab 21 Nov 15:08:21 EST 2018 </td></tr><tr><td>  Red Hat Enterprise Linux Server 7.6 (Maipo) </td><td>  3.10.0-957.1.3.el7.x86_64 </td><td>  # 1 SMP Kamis 15 Nov 17:36:42 UTC 2018 </td></tr><tr><td>  Ubuntu 14.04 (Tahr Trusty) </td><td>  4.4.0–140-generik </td><td><br>  # 166 ~ 04/14/1-Ubuntu SMP Sabtu 17 Nov 01:52:43 UTC 20 ... </td></tr><tr><td>  Ubuntu 16.04 (Xenial Xerus) </td><td>  4.15.0-1026-gcp </td><td>  # 27 ~ 16.04.1-Ubuntu SMP Fri 7 Des 09:59:47 UTC 2018 </td></tr><tr><td>  Ubuntu 18.04 (Bionic Beaver) </td><td>  4.15.0-1026-gcp </td><td>  # 27-Ubuntu SMP Kamis 6 Des 18:27:01 UTC 2018 </td></tr></tbody></table>  <i><font color="gray">Tabel 1</font></i> <br><br><h1>  Analisis </h1><br>  Kami akan memeriksa konfigurasi kernel default, serta properti paket yang tersedia melalui manajer paket dari setiap paket distribusi di luar kotak.  Dengan demikian, kami hanya mempertimbangkan paket dari mirror default masing-masing distribusi, mengabaikan paket dari repositori yang tidak stabil (misalnya, mirror testing dalam Debian) dan paket pihak ketiga (misalnya, paket Nvidia dari mirror standar).  Selain itu, kami tidak mempertimbangkan kompilasi kernel khusus atau konfigurasi keamanan tingkat lanjut. <br><br><h3>  Analisis konfigurasi kernel </h3><br>  Kami menggunakan skrip analisis berdasarkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pemeriksa kconfig gratis</a> .  Kami mempertimbangkan opsi perlindungan di luar kotak untuk distribusi yang disebutkan dan membandingkannya dengan daftar dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Proyek Bela Diri Kernel</a> (KSPP).  Untuk setiap parameter konfigurasi, Tabel 2 menjelaskan pengaturan yang diinginkan: tanda centang adalah untuk distribusi yang sesuai dengan rekomendasi KSSP (untuk penjelasan tentang istilah-istilah tersebut lihat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> ; dalam artikel mendatang kami akan menjelaskan berapa banyak metode perlindungan ini muncul dan cara meretas sistem jika tidak ada). <br><br> <a href=""><img src="https://habrastorage.org/webt/dx/oh/o0/dxoho0z-lifjcybajszqb-aiirq.png"></a> <br><br><img src="https://habrastorage.org/webt/rm/or/h1/rmorh1jx8aswaj98ts0-7jptjmk.png"><br><br>  Secara umum, kernel yang lebih baru memiliki pengaturan yang lebih ketat di luar kotak.  Misalnya, CentOS 6.10 dan RHEL 6.10 pada kernel 2.6.32 tidak memiliki sebagian besar fungsi kritis yang diimplementasikan dalam kernel baru, seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SMAP</a> , izin RWX yang kuat, pengacakan alamat, atau perlindungan copy2usr.  Perlu dicatat bahwa banyak opsi konfigurasi dari tabel tidak ada di versi kernel yang lebih lama dan tidak berlaku pada kenyataannya - ini masih ditunjukkan dalam tabel sebagai kurangnya perlindungan yang tepat.  Demikian pula, jika parameter konfigurasi tidak tersedia dalam versi ini, dan untuk keamanan, parameter ini harus dinonaktifkan, ini dianggap sebagai konfigurasi yang masuk akal. <br><br>  Poin lain ketika menafsirkan hasil: beberapa konfigurasi kernel yang meningkatkan permukaan serangan dapat digunakan secara bersamaan untuk keamanan.  Contoh-contoh tersebut termasuk uprob dan kprobes, modul kernel, dan BPF / eBPF.  Rekomendasi kami adalah untuk menggunakan mekanisme di atas untuk memberikan perlindungan nyata, karena mereka tidak sepele untuk digunakan, dan operasinya mengasumsikan bahwa aktor jahat sudah mengakar dalam sistem.  Tetapi jika opsi ini diaktifkan, administrator sistem harus secara aktif memantau penyalahgunaan. <br><br>  Mempelajari lebih lanjut entri pada Tabel 2, kita melihat bahwa kernel modern memberikan beberapa opsi untuk melindungi terhadap eksploitasi kerentanan seperti kebocoran informasi dan tumpukan / tumpukan tumpukan.  Namun, kami melihat bahwa bahkan distribusi populer terbaru belum menerapkan perlindungan yang lebih canggih (misalnya, dengan patch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">grsecurity</a> ) atau perlindungan modern terhadap serangan penggunaan kembali kode (misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menggabungkan pengacakan dengan skema seperti R ^ X untuk kode</a> ).  Lebih buruk lagi, bahkan pertahanan yang lebih maju ini tidak melindungi terhadap berbagai serangan.  Dengan demikian, sangat penting bagi administrator sistem untuk melengkapi konfigurasi cerdas dengan solusi yang menawarkan deteksi dan pencegahan eksploitasi saat runtime. <br><br><h3>  Analisis aplikasi </h3><br>  Tidak mengherankan bahwa distribusi yang berbeda memiliki karakteristik paket yang berbeda, opsi kompilasi, dependensi pustaka, dll. Perbedaan ada bahkan untuk distribusi dan paket <a href="">terkait</a> dengan sejumlah kecil dependensi (misalnya, coreutils di Ubuntu atau Debian).  Untuk mengevaluasi perbedaan, kami mengunduh semua paket yang tersedia, mengekstrak isinya dan menganalisis file biner dan dependensi.  Untuk setiap paket, kami melacak paket-paket lain tempat ia bergantung, dan untuk setiap biner kami melacak dependensinya.  Bagian ini merangkum temuan. <br><br><h4>  Distribusi </h4><br>  Secara total, kami mengunduh 361.556 paket untuk semua distribusi, hanya mengekstraksi paket dari mirror default.  Kami mengabaikan paket tanpa ELF file yang dapat dieksekusi, seperti kode sumber, font, dll. Setelah pemfilteran, 129 569 paket dibiarkan berisi total 584 457 file biner.  Distribusi paket dan file di antara distribusi ditunjukkan pada gambar.  3. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f9d/8fc/bbf/f9d8fcbbf2ac0887f4948e1e49446e9a.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">3</font></i> <br><br>  Anda mungkin memperhatikan bahwa semakin modern distribusinya, semakin banyak paket dan file biner yang dikandungnya, yang logis.  Pada saat yang sama, paket Ubuntu dan Debian menyertakan lebih banyak file biner (baik modul dan pustaka yang dapat dieksekusi maupun dinamis) daripada CentOS, SUSE, dan RHEL, yang berpotensi mempengaruhi permukaan serangan Ubuntu dan Debian (harus dicatat bahwa angka-angka tersebut mencerminkan semua binari dari semua versi paket, yaitu, beberapa file dianalisis beberapa kali).  Ini sangat penting ketika mempertimbangkan ketergantungan antar paket.  Dengan demikian, kerentanan dalam biner dari satu paket tunggal dapat memengaruhi banyak bagian ekosistem, sama seperti pustaka yang rentan dapat memengaruhi semua file biner yang mengimpornya.  Sebagai titik referensi, mari kita lihat distribusi jumlah dependensi antar paket di berbagai OS: <br><br> <a href=""><img src="https://habrastorage.org/webt/ii/e3/e5/iie3e5-ei26ezg5yvcyvtzqzl80.png"></a> <br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">4</font></i> <br><br>  Di hampir semua distribusi, 60% paket memiliki setidaknya 10 dependensi.  Selain itu, beberapa paket memiliki lebih banyak dependensi (lebih dari 100).  Hal yang sama berlaku untuk dependensi paket terbalik: seperti yang diharapkan, beberapa paket digunakan oleh banyak paket lain dalam distribusi, sehingga kerentanan dalam beberapa favorit ini memiliki risiko tinggi.  Sebagai contoh, tabel berikut mencantumkan 20 paket dengan jumlah maksimum dependensi terbalik di SLES, Centos 7, Debian 9, dan Ubuntu 18.04 (setiap kotak menunjukkan paket dan jumlah dependensi terbalik). <br><br><img src="https://habrastorage.org/webt/0g/hl/w0/0ghlw0dtmbb3vswp-xgtx1zs-lu.png"><br>  <i><font color="gray">Tabel 3</font></i> <br><br>  Fakta yang menarik.  Meskipun semua OS yang dianalisis dibangun untuk arsitektur x86_64, dan untuk sebagian besar paket, arsitekturnya didefinisikan sebagai x86_64 dan x86, paket sering berisi binari untuk arsitektur lain, seperti yang ditunjukkan pada Gambar.  5. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c4e/899/601/c4e899601e6fc711b224aba6b204c02a.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">5</font></i> <br><br>  Pada bagian selanjutnya, kita akan mempelajari karakteristik dari binari yang dianalisis. <br><br><h4>  Statistik Perlindungan Biner </h4><br>  Sebagai minimum absolut, Anda perlu mempelajari serangkaian opsi perlindungan dasar untuk file biner yang ada.  Beberapa distribusi Linux dilengkapi dengan skrip yang melakukan pemeriksaan tersebut.  Misalnya, di Debian / Ubuntu ada skrip seperti itu.  Berikut ini contoh karyanya: <br><br><pre><code class="bash hljs">$ hardening-check $(<span class="hljs-built_in"><span class="hljs-built_in">which</span></span> docker) /usr/bin/docker: Position Independent Executable: yes Stack protected: yes Fortify Source <span class="hljs-built_in"><span class="hljs-built_in">functions</span></span>: no, only unprotected <span class="hljs-built_in"><span class="hljs-built_in">functions</span></span> found! Read-only relocations: yes Immediate binding: yes</code> </pre> <br>  Script memeriksa lima <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">fungsi perlindungan</a> : <br><br><ul><li>  Position Independent Executable (PIE): menunjukkan apakah bagian teks program dapat dipindahkan dalam memori untuk mencapai pengacakan jika ASLR diaktifkan di kernel. <br></li><li>  Stack Protected: apakah stack canary dimasukkan untuk melindungi dari serangan collision stack. <br></li><li>  Fortify Source: apakah fungsi yang tidak aman (mis. Strcpy) digantikan oleh rekanan yang lebih aman, dan panggilan yang dicentang dalam runtime diganti oleh rekanan yang tidak diverifikasi (mis. Memcpy alih-alih __memcpy_chk). <br></li><li>  Relokasi baca-saja (RELRO): Apakah entri dalam tabel gerakan ditandai sebagai hanya-baca jika berfungsi sebelum eksekusi dimulai. <br></li><li>  Pengikatan langsung: apakah runtime linker memungkinkan semua gerakan sebelum memulai program (ini setara dengan RELRO penuh). </li></ul><br>  Apakah mekanisme di atas cukup?  Sayangnya tidak.  Ada cara yang dikenal untuk menghindari semua pertahanan di atas, tetapi semakin ketat pertahanannya, semakin tinggi mistar bagi penyerang.  Misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">solusi RELRO</a> lebih sulit diterapkan jika PIE dan pengikatan langsung berlaku.  Demikian juga, ASLR penuh membutuhkan pekerjaan tambahan untuk membuat exploit yang berfungsi.  Namun, penyerang canggih siap untuk memenuhi pertahanan seperti itu: ketidakhadiran mereka pada dasarnya akan mempercepat peretasan.  Karena itu, sangat penting bahwa langkah-langkah ini dianggap <i>minimum yang</i> diperlukan. <br><br>  Kami ingin mempelajari berapa banyak file biner dalam distribusi tersebut yang dilindungi oleh ini, serta tiga metode lainnya: <br><br><ul><li>  Bit yang tidak dapat dieksekusi ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NX</a> ) mencegah eksekusi di wilayah mana pun yang tidak dapat dieksekusi, seperti tumpukan tumpukan, dll. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RPATH / RUNPATH</a> menunjukkan jalur eksekusi yang digunakan oleh loader dinamis untuk menemukan perpustakaan yang sesuai.  Yang pertama <i>wajib</i> untuk setiap sistem modern: ketidakhadirannya memungkinkan penyerang untuk secara sewenang-wenang menulis muatan ke dalam memori dan menjalankannya apa adanya.  Untuk yang kedua, konfigurasi jalur eksekusi yang salah membantu dalam memperkenalkan kode yang tidak dipercaya, yang dapat menyebabkan sejumlah masalah (misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">peningkatan privilege</a> , serta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">masalah lainnya</a> ). </li><li>  Stack collision protection memberikan perlindungan terhadap serangan yang menyebabkan stack tumpang tindih dengan area memori lain (seperti heap).  Mengingat eksploitasi baru-baru ini menyalahgunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kerentanan tumpukan tabrakan di systemd</a> , kami merasa pantas untuk memasukkan mekanisme ini dalam kumpulan data kami. </li></ul><br>  Jadi, tanpa basa-basi, mari beralih ke angka.  Tabel 4 dan 5 masing-masing berisi analisis terhadap file yang dapat dieksekusi dan perpustakaan dari berbagai distribusi. <br><br><ul><li>  Seperti yang Anda lihat, perlindungan NX diterapkan di mana-mana, dengan pengecualian langka.  Secara khusus, penggunaannya yang lebih rendah di distribusi Ubuntu dan Debian dapat dicatat dibandingkan dengan CentOS, RHEL dan OpenSUSE. <br></li><li>  Canary tumpukan tidak tersedia di banyak tempat, terutama di distribusi dengan kernel lama.  Beberapa kemajuan telah terlihat dalam distribusi Centos, RHEL, Debian, dan Ubuntu baru-baru ini. <br></li><li>  Dengan pengecualian Debian dan Ubuntu 18.04, sebagian besar distribusi memiliki dukungan PIE yang buruk. <br></li><li>  Perlindungan tabrakan tumpukan diimplementasikan dengan buruk di OpenSUSE, Centos 7 dan RHEL 7 dan praktis tidak ada di tempat lain. <br></li><li>  Semua distribusi dengan kernel modern memiliki beberapa dukungan RELRO, dengan Ubuntu 18,04 memimpin, dengan Debian menempati posisi kedua. </li></ul><br>  Seperti yang telah disebutkan, metrik dalam tabel ini adalah rata-rata di atas semua versi file biner.  Jika Anda hanya melihat versi file terbaru, angkanya akan berbeda (misalnya, lihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kemajuan Debian dengan implementasi PIE</a> ).  Selain itu, sebagian besar distribusi biasanya ketika menghitung statistik memeriksa perlindungan hanya beberapa fungsi dalam kode biner, dan dalam analisis kami persentase sebenarnya dari fungsi yang diperkuat ditunjukkan.  Oleh karena itu, jika 5 dari 50 fungsi dilindungi dalam biner, kami akan memberinya peringkat 0,1, yang sesuai dengan 10% dari fungsi yang diperkuat. <br><br><img src="https://habrastorage.org/webt/m-/fn/1l/m-fn1l_i9vp3-gh8sicmbnkintc.png"><br>  <i><font color="gray">Tabel 4. Karakteristik perlindungan untuk file yang dapat dieksekusi yang ditunjukkan pada gambar.</font></i>  <i><font color="gray">3 (implementasi fungsi yang sesuai sebagai persentase dari jumlah total file yang dapat dieksekusi)</font></i> <br><br><img src="https://habrastorage.org/webt/yt/y1/sa/yty1saotef9aqmxkik36r8iijus.png"><br>  <i><font color="gray">Tabel 5. Karakteristik perlindungan untuk perpustakaan yang ditunjukkan pada Gambar.</font></i>  <i><font color="gray">3 (implementasi fungsi yang sesuai sebagai persentase dari jumlah perpustakaan)</font></i> <br><br>  Jadi, apakah ada kemajuan?  Pasti ada: itu bisa dilihat dari statistik untuk distribusi individu (misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Debian</a> ), serta dari tabel di atas.  Sebagai contoh dalam gambar.  Gambar 6 menunjukkan implementasi mekanisme pertahanan dalam tiga distribusi Ubuntu LTS 5 berturut-turut (kami telah menghilangkan statistik stack collision protection).  Kami memperhatikan bahwa dari versi ke versi semakin banyak file yang mendukung kenari bertumpuk, dan juga secara berurutan semakin banyak file biner datang dengan perlindungan RELRO penuh. <br><br> <a href=""><img src="https://habrastorage.org/webt/d1/ni/or/d1niordj1hmiklmg2-w5rsk6dla.png"></a> <br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">6</font></i> <br><br>  Sayangnya, sejumlah file yang dapat dieksekusi dalam distribusi yang berbeda masih belum memiliki perlindungan di atas.  Sebagai contoh, melihat Ubuntu 18.04, Anda dapat melihat biner ngetty (getty replacement), serta shell mksh dan lksh, interpreter picolisp, paket nvidia-cuda-toolkit (paket populer untuk aplikasi akselerasi GPU seperti kerangka pembelajaran mesin) dan klibc -saya.  Demikian pula, biner mandos-client (alat administratif yang memungkinkan Anda untuk me-restart mesin secara otomatis dengan sistem file terenkripsi), serta rsh-redone-client (menerapkan kembali rsh dan rlogin) dikirimkan tanpa perlindungan NX, meskipun mereka memiliki hak SUID :(. Selain itu, Beberapa binari suid tidak memiliki perlindungan dasar, seperti stack canaries (misalnya, binari Xorg.wrap dari paket Xorg). <br><br><h1>  Ringkasan dan kata penutup </h1><br>  Pada artikel ini, kami menyoroti beberapa fitur keamanan distribusi Linux modern.  Analisis menunjukkan bahwa distribusi Ubuntu LTS terbaru (18,04) menerapkan rata-rata OS terkuat dan perlindungan tingkat aplikasi di antara distribusi dengan kernel yang relatif baru, seperti Ubuntu 14.04, 12.04, dan Debian 9. Namun, distribusi CentOS, RHEL, dan OpenSUSE dibahas dalam kit kami. secara default, seperangkat paket yang lebih padat dikeluarkan, dan versi terbaru (CentOS dan RHEL) memiliki persentase perlindungan tabrakan tumpukan yang lebih tinggi dibandingkan dengan pesaing yang berbasis pada Debian (Debian dan Ubuntu).  Membandingkan versi CentOS dan RedHat, kami melihat peningkatan besar dalam implementasi stack canaries dan RELRO dari versi 6 hingga 7, tetapi rata-rata CentOS memiliki lebih banyak fitur daripada RHEL.  Secara umum, semua distribusi harus memperhatikan perlindungan PIE, yang, dengan pengecualian Debian 9 dan Ubuntu 18.04, diimplementasikan dalam kurang dari 10% file biner dari dataset kami. <br><br>  Akhirnya, perlu dicatat: meskipun kami melakukan penelitian secara manual, ada banyak alat keamanan (misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lynis</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tiger</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Hubble</a> ) yang melakukan analisis dan membantu menghindari konfigurasi yang tidak aman.  Sayangnya, bahkan perlindungan yang kuat dalam konfigurasi yang wajar tidak menjamin tidak adanya eksploitasi.  Itulah sebabnya kami sangat yakin bahwa sangat penting untuk memastikan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pemantauan dan pencegahan serangan yang andal dalam waktu nyata</a> , dengan fokus pada model operasional dan mencegahnya. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id444418/">https://habr.com/ru/post/id444418/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id444406/index.html">Digital Italia. Apa dan bagaimana cara kerjanya</a></li>
<li><a href="../id444408/index.html">Apple merilis iPad baru kemarin dan ada pertanyaan.</a></li>
<li><a href="../id444410/index.html">Peta Jaringan. Tinjauan singkat perangkat lunak untuk membangun peta jaringan</a></li>
<li><a href="../id444414/index.html">Snapdragon 8cx: platform PC 7 nm</a></li>
<li><a href="../id444416/index.html">HyperX Alloy CORE - saat membran dapat memainkan game</a></li>
<li><a href="../id444420/index.html">Cara mengendarai dua roda untuk bekerja</a></li>
<li><a href="../id444422/index.html">Seperti pada tahun 2018: pencetakan FDM industri di Top 3D Expo</a></li>
<li><a href="../id444424/index.html">AMD Radeon VII: Chip High-End (Bagian 2)</a></li>
<li><a href="../id444426/index.html">Lyft dan Uber go IPO publik. Mengapa berinvestasi di Lyft?</a></li>
<li><a href="../id444428/index.html">Mountain Car: Memecahkan tantangan klasik dengan pelatihan penguatan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>