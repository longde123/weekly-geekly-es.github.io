<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛁 🅱️ 🚿 ESP的数据采集系统。 第一部分二氧化碳 🎻 👩‍🔬 😰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="美好的一天！ 在本文中，我想谈谈ESP模块上设备的实现。 相似设备的主题已经在Internet上公开，但并没有停止相关性。 
 主意 

 长期以来，我一直在考虑在公寓中实施某种显示和控制系统，但我找不到可出售的传感器的任何应用程序，特别是针对我自己的。 令人困惑的第一件事是存在某个服务器（单独的一...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ESP的数据采集系统。 第一部分二氧化碳</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/410405/">美好的一天！ 在本文中，我想谈谈ESP模块上设备的实现。 相似设备的主题已经在Internet上公开，但并没有停止相关性。 <br><img src="https://habrastorage.org/webt/85/au/eq/85aueqa-qfotfuc69mmwk7pbmnq.jpeg"><a name="habracut"></a>  <b>主意</b> <br><br> 长期以来，我一直在考虑在公寓中实施某种显示和控制系统，但我找不到可出售的传感器的任何应用程序，特别是针对我自己的。 令人困惑的第一件事是存在某个服务器（单独的一块铁），该服务器收集数据，进行处理并将其扔到某处进行查看。 我想拥有一个独立设备的可伸缩系统，最好在一个应用程序就绪的情况下最好与一个应用程序一起使用，这似乎几乎是不可能的（展望未来，我会说有这样一个应用程序，可以针对我们的任务进行灵活配置）。 当然，我想制造一系列的设备。 <br><br>  <b>系统要求</b> <br><br><ol><li> 缺少硬件服务器（“中央单元”）。 </li><li> 独立的传感器/控件。 </li><li> 传感器必须是无线的。 </li><li> 更改传感器的组成和类型时，不应有任何依赖关系（添加新设备来“锯”别人的东西是不必要的）。 </li><li> 如果可能，传感器应由电池供电。 </li><li> 如有必要，传感器应该能够进行配置，但无需深入研究代码（最好是Web）。 </li><li> 通知。 这是一个单独的要求。 我们都习惯于使用手机并立即收到通知。 </li></ol><br> 这不是“愿望清单”的完整列表，但是这些是主要列表。 <br><br>  <b>寻找解决方案</b> <br><br> 创建系统的解决方案稍后出现。 首先，开发了第一个设备，我将在本文中进行介绍。 <br><br> 硬件部分。  ESP-12E和ESP32。 下面描述的所有项目都在第一个模块上实现。 第二个模块有几个商业项目，本文将不考虑。 <br><br> 互联网上有很多关于ESP-12E的文章和论坛，在此我不会重复其优点和缺点。 原则上，所有“堵塞”的发生主要是由于缺乏使用模块和环境的经验。 <br><br><img src="https://habrastorage.org/webt/j6/bb/aa/j6bbaaawco5ytnkte4mw5qtag2c.jpeg"><br>  <i>图1. ESP-12E的照片。</i> <br><br> 软件部分。  ESP的固件是用Arduino IDE编写的。  Blynk应用程序正在手机/平板电脑的侧面运行。 这是用于显示数据的非常方便的构造方法。 该应用程序具有一个云服务器，设备（传感器）在该云服务器上发送数据，Blynk接收并允许显示它（www.blynk.cc）。 以相同的方式，通过设备来组织反馈。 重要的是，单个应用程序可以从多个设备收集和显示数据。 <br><br><img src="https://habrastorage.org/webt/jd/zf/yz/jdzfyzmdxnywx1kkcxedbn6ru8q.png"><br><br><img src="https://habrastorage.org/webt/iu/e5/mi/iue5mivk9phy0yb2jro75v3rtze.jpeg"><br>  <i>图2.该应用程序的屏幕截图。</i> <br><br> 稍后，我们将发布有关软件的文章，并链接到资源。 我做硬件。 软件实现是由我的同事执行的。 <br><br>  <b>传感器的第一个三重奏</b> <br><br>  1. <b><i>OpenWindAir</i></b>二氧化碳传感器。 <br><br> 基于Wi-Fi模块ESP-12E构建。 使用CO2传感器MH-Z19进行测量。 它广为人知，可让您快速而准确地进行测量。 此外，该设备还具有内置的温度和湿度传感器AM2302。 还支持使用外部传感器，例如，与人员监视系统配合使用。 该设备由PC或5V电源的miniUSB供电。 内置了LED和声音警报（可以从应用程序中关闭后者，或者由时钟使用-以免在晚上醒来）。 <br><br>  2. <b><i>LifeOfFlowers</i></b>用于植物的土壤湿度传感器。 <br><br> 基于Wi-Fi模块ESP-12E构建。 土壤水分的测量是通过将电极插入地面（设备板的一部分）来进行的。 重要的是-电极和整个电路板一样都要上光漆（在这里我不得不做一些测量），这可以防止接触衰减。 除土壤湿度外，该设备还测量湿度和环境温度（AM2302），光照和电池电压。 是的，LifeOfFlowers使用两节AAA电池可使用1至3年（正常运行时间取决于刷新率）。 <br><br>  3. <b><i>警告</i></b>漏水传感器。 <br><br> 基于Wi-Fi模块ESP-12E构建。 使用IP-65外壳随附的电极进行测量。 该设备由两节AAA（或AA）电池供电，工作时间也为1年。 该设备的尺寸仅为55x55x30mm。 首先，您需要将设备放置在潜在危险的地方，这将表明地板上有水存在。 该应用程序还会显示电池的电压，以免忘记及时更换电池。 <br><br>  <b>OpenWindAir-硬件实施</b> <br><br> 在这里，您无法找到电路的装饰，一切都很简单，并且在数据表中。 如果有人需要电路，我可以给。 <br><br> 设备的组成： <br><br>  ESP8266 ESP-12E-模块本身，负责收集，处理和发送数据。 电源3.3V。 <br>  MH-Z19-二氧化碳浓度传感器。 在UART上工作，最高可测量5000ppm，并由5V供电。 <br>  AM2302-湿度和温度的测量。 由于传感器位于外壳内部，因此必须输入校准常数，并且测量数据仅供参考。 为了获得更准确的测量结果，使用了一个远程传感器。 <br><br>  1-1462037-8（IM03TS）-继电器，用于切换小电流，以防万一播放。 原则上，这是一件有趣的事情，但是他们尚未提出应用程序（将其输出到与外部湿度传感器相同的外部连接器）。 <br><br>  CP2102-GM-USB-UART。 是的，我们决定制作精美的日志以实时显示信息，事实证明非常方便，您可以在终端中查看数据，查看下载顺序，调试。 <br><br>  LM1117MP-ADJ-适用于3.3V的LDO。 <br><br> 还有一个蜂鸣器，一对按钮和三个LED。 除了CO2浓度阈值外，LED还指示设备加载，连接到接入点（或脱机工作）的过程以及更新过程。 <br><br> 设备实现OTA更新。 我们将固件扔到任何服务器上（在开处方之后），按下按钮，接通电源，固件过程开始。 闪烁（或重新启动）指定的时间后，您可以转到Web界面（该设备显示为访问点）并驱动网络设置-之后一切就绪。 <br><br><img src="https://habrastorage.org/webt/tw/xr/qq/twxrqqcpb_t9szkzqan7ch4qu4w.jpeg"><br>  <i>图3.带有组件的电路板的照片。</i> <br><br> 我想写一些有关印刷电路板的形式和功能。 在测试过程中，发现在Wi-Fi的长期运行过程中，模块会加热电路板。 如果机壳内部装有温度和湿度传感器，这将不是至关重要的。 我不得不将ESP模块的馈线和传感器分布在不同的方向，并且还要在板上做一个切口，像设计者一样，在板上仍然插入一个特殊的隔板。 因此，在壳体内部没有空气混合，并且温度和湿度的测量更加可靠。 <br><br><img src="https://habrastorage.org/webt/gs/nn/ze/gsnnze6gsm7vhckw58ug61l5lf0.jpeg"><br>  <i>图4.板上分区的照片。</i> <br><br>  <b>房屋</b> <br><br> 有很多疑问-我想拥有一个美丽的金属，流线型的机身和磨砂的指示带等，但与往常一样，极简主义得以拯救。 案例的形状决定了老式5mm LED的存在，事实证明，这非常方便。 由于它们是凸形的，因此您可以将设备放置在例如架子上，并且指示仍然清晰可见。 盒子本身是用2mm有机玻璃激光切割而成的。 <br><br> 我们提供了几种不同颜色，多种颜色以及不同材质的选择。 看起来很不错。 我什至试图立即按照印刷电路板的顺序从PCB制造它。 目前，我们正在考虑在生产中制造机壳的选择，但到目前为止，这仅在计划中。 我也可以布置模型。 <br><br><img src="https://habrastorage.org/webt/tc/qd/cr/tcqdcro5aqh9f8jbiyhkhly3d_0.jpeg"><br>  <i>图5.设备照片。</i> <br><br>  <b>计划</b> <br><br> 通常，有计划制造更多的设备（除了这三个设备之外）。 例如，ESP32具有内置的以太网（您只需要物理）和更多的内置ADC，这将使您无需使用多路复用器，就像LifeOfFlowers一样，但稍后会介绍更多。 <br><br>  <b>威胁。</b>  Blynk具有可轻松在PC上部署（检查）的服务器API。 因此，与服务器的绑定消失了。 <br><br>  <b>ZZY。</b> 为了减少负面影响，将文章重命名。 当我们继续使用设备管理房屋时，我将纠正本文。 <br><br> 感谢您的关注！ <br><br>  ZZZY：如您所愿，这是有关软件<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">geektimes.ru/post/122601</a>的文章的链接。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN410405/">https://habr.com/ru/post/zh-CN410405/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN410387/index.html">丰田开发钕含量低的耐热磁铁</a></li>
<li><a href="../zh-CN410389/index.html">瓷砖编辑器上的John Romero，创建了30多个游戏</a></li>
<li><a href="../zh-CN410391/index.html">旧的多人游戏权利的所有者抵制发烧友重振游戏的尝试</a></li>
<li><a href="../zh-CN410395/index.html">Roskachestvo确定Android中的在线约会比iOS中的便宜</a></li>
<li><a href="../zh-CN410399/index.html">业余天文学家检查了一台新相机，并意外拍摄了超新星闪光</a></li>
<li><a href="../zh-CN410409/index.html">电动汽车面具会从太空返回地球吗？</a></li>
<li><a href="../zh-CN410411/index.html">智能汽车制造商希望通过客户数据获利</a></li>
<li><a href="../zh-CN410413/index.html">47％的父母担心孩子痛苦地挂在智能手机上</a></li>
<li><a href="../zh-CN410415/index.html">您可能不了解的17个最明显的iOS功能</a></li>
<li><a href="../zh-CN410417/index.html">忘记更改方位角：阿丽亚娜5事件调查结果</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>