<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✌🏼 🧦 🧗 Bagaimana saya membuat Yandex.Transportasi saya dengan jadwal dan bus 🤝 💌 🔡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Diposting oleh Mikhail Aksenov, .NET Developer, DataArt 



- Situs web proyek Vrnbus (Voronezh Buses); 
- Bot Telegram: @vrnbusbot ; 
- Proyek Github...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana saya membuat Yandex.Transportasi saya dengan jadwal dan bus</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/411249/"><img src="https://habrastorage.org/webt/a0/8u/mi/a08umi6_8yn4eobkvs63zv_s9tq.jpeg"><br><br>  <i>Diposting oleh Mikhail Aksenov, .NET Developer, DataArt</i> <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Situs web proyek Vrnbus</a> (Voronezh Buses); </li><li>  Bot Telegram: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@vrnbusbot</a> ; </li><li>  Proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Github</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">vrntrans / vrnbus</a> . </li></ul><br><h2>  Bagaimana semuanya dimulai </h2><br>  Pada musim gugur 2014, ada kabar baik bahwa Yandex.Transport diluncurkan di Voronezh, yang menunjukkan pergerakan bus dan troli.  Itu sangat keren tepat di halte bus untuk membuka jadwal dan mengetahui bahwa bus Anda akan bekerja dalam 5 menit. <br><br>  Tetapi setelah beberapa bulan semuanya berjalan sesuai dengan skenario yang benar-benar dapat diprediksi.  Karena semua transportasi di Voronezh dari troli ke minibus bekerja secara tunai, setiap pengemudi tertarik untuk mengangkut penumpang sebanyak mungkin.  Akibatnya, mereka mengatur balapan di antara mereka sendiri. <br><br>  Pengemudi menggunakan layanan baru untuk mengikuti satu sama lain di peta, menyalip dan memotong pesaing di jalan.  Beberapa mulai jatuh dalam pendapatan, mereka mulai mengeluh kepada pemilik rute, dan mereka pergi ke orang-orang yang menjual peralatan dengan GLONASS dan GPS dan mengirimkan data tentang pergerakan mobil ke Yandex.  Atas permintaan pemilik armada, mereka berhenti mengirim informasi, dan bus-bus segera mulai menghilang dari peta.  Sekarang ada sedikit lebih banyak dari mereka, tetapi ini masih jauh lebih sedikit daripada kenyataannya. <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/hy/2p/d9/hy2pd9kotq6w2jrb__n5gm8nzx0.jpeg"><br><br>  Bagi mereka yang terlalu malas untuk membaca lebih lanjut, saya mengusulkan laporan video tentang topik ini: <iframe width="560" height="315" src="https://www.youtube.com/embed/1OtHwGqSL04" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Selebihnya - saya akan menjelaskan proyek dalam bentuk teks. <br><br><h2>  Di mana mendapatkan data? </h2><br>  Pada saat yang sama, di Voronezh ada tempat di mana semua data dikumpulkan - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pusat Organisasi Lalu Lintas Jalan</a> (DPC).  Mereka memiliki aplikasi web yang besar dan berat di situs mereka dengan JavaScript yang tidak berkelanjutan dan artefak lainnya, sementara semua yang ada di dalamnya disertai dengan permintaan POST dan tidak ada yang di-cache.  Menggunakan situs ini sendiri, Anda dapat dengan mudah menempatkan layanan yang mengumpulkan data tentang pergerakan bus. <br><br>  Ada opsi yang memungkinkan Anda untuk melihat peta dan mencari tahu kapan bus akan datang dan apa yang akan terjadi.  Asalkan Anda kira-kira berhenti (± 50 meter).  Di menu, Anda dapat membuka daftar rute dan melihat dengan tepat ke mana bus pergi, tetapi ada masalah - mereka melaju dengan aneh.  Misalnya, di sepanjang Koltsovskaya, sebuah jalan di tengah di mana Anda tidak dapat mempercepat, bus bergerak maju dan mundur dengan kecepatan sekitar 200 km / jam. <br><br><br><h2>  Mengapa python </h2><br>  Saya memilih Python karena itu keren, baterainya dibundel, dan seterusnya. Dan 3.6 karena ada format untuk string literal, mengetik, itu saja.  Mari kita lihat apa yang pada dasarnya saya gunakan: <br><br><ul><li>  Banyak yang mengeluh bahwa mengendarai nama persis pemberhentian dengan segala macam tanda baca sangat sulit.  Kemudian saya menyadari kemungkinan pencarian fuzzy dan membuat unit test pertama untuk itu. </li><li>  Seluruh sistem di-host di Heroku.  Ini gratis, karena saya tidak punya database - saya berharap bisa bertahan dengan database pusat data.  Saya menyetujui penggunaannya dengan Center ketika saya menyadari bahwa data yang saya kumpulkan melalui antarmuka web tidak cukup. </li><li>  Sebenarnya, hosting berjalan melalui server web Tornado.  Saya pikir itu tidak asing bagi siapa saja yang menemukan permintaan web dengan Python. </li><li>  Saya memerlukan paket Pytz karena server Heroku berada di zona waktu yang berbeda, dan data datang kepada saya tanpa menentukan zona waktu.  Karena itu, saya sendiri yang mengurus lokalisasi. </li><li>  Untuk membuat bot, saya menggunakan pustaka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Python-telegram-bot yang</a> disarankan.  Dokumentasi di sini cukup memadai, dan secara umum perpustakaan memenuhi persyaratan produk minimum yang layak.  Awalnya, seluruh proyek adalah bot Telegram, yang sebagai tanggapan atas pengiriman lokasi Anda mengirim jadwal bus. </li><li>  Firebird, mantan Interbase, adalah database sumber terbuka yang saya pikir banyak dari Anda telah bekerja dengannya.  Tentu saja, ini tidak sekeren PostgreSQL yang sama, tetapi untuk sejumlah besar pertanyaan, itu sudah cukup.  Dalam kasus kami, tidak diperlukan lagi. </li><li>  Cachetools adalah modul yang sangat sederhana yang memungkinkan Anda untuk melakukan cache perhitungan.  Ini, tentu saja, bukan tentang memecached atau caching halaman web, tetapi tentang kasus-kasus ketika Anda membutuhkan memoisasi untuk permintaan panjang.  Ambillah, tambahkan dekorator yang sesuai - dan semuanya berfungsi.  Cache memiliki opsi yang berbeda, saya menggunakan versi TTL, yang menyimpan data untuk waktu yang ditentukan, karena saya tahu bahwa data tidak akan diperbarui lebih sering daripada pada interval tertentu (dalam kasus saya - 30 detik). </li></ul><br><br><h2>  Fungsi bot </h2><br><ul><li>  / nextbus stop name - perkiraan waktu kedatangan; </li><li>  / nomor rute terakhir dipisahkan oleh spasi - perhentian terakhir; </li><li>  Pengiriman lokasi - perkiraan waktu kedatangan untuk tiga perhentian berikutnya; </li><li>  Nomor entri - rute gratis dan jarak ke bus (saat mengirim lokasi). </li></ul><br><br>  Saya mencoba menggambarkan perintah-perintah itu dengan cukup sehingga orang tidak akan bertanya bagaimana cara menggunakannya.  Pada dasarnya ada dua perintah dasar: nextbus, ketika Anda menulis nama berhenti, dan mengirim lokasi. <br><br><h2>  Fungsionalitas situs </h2><br>  Saya membuat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs web</a> seminimal mungkin.  Dari perpustakaan pihak ketiga, saya hanya menggunakan dua untuk mendukung pengambilan dan janji, karena versi yang lebih lama dari browser pra-instal di telepon tidak dapat melakukannya tanpa mereka.  Jika Anda tidak mendukung metode ini, Anda akan mendapatkan mi panggilan balik yang cukup berat untuk permintaan itu sendiri.  Dengan mengambil, semuanya terlihat lebih elegan. <br><br><img src="https://habrastorage.org/webt/vn/sd/gu/vnsdgutglxminl8j6wi07w4nkp0.jpeg"><br><br>  Sebenarnya, fungsional di sini terdiri dari 4 poin: <br><br><ol><li>  <b>Kedatangan</b>  Anda bisa menyaksikannya.  Dengan mengklik tombol (omong-omong, mungkin layak untuk melakukan lebih banyak - saya akan memikirkannya!), Anda mengirim lokasi Anda, sistem mencari tiga perhentian terdekat Anda dan menampilkan informasi tentang mereka.  Anda dapat memasukkan nama pemberhentian dan mendapatkan informasi tentang hal itu.  Karena Anda hampir tidak membutuhkan semua 20-30 bus yang dapat tiba di halte, Anda dapat memfilternya berdasarkan rute. </li><li>  <b>Bus</b>  Halaman kedua berisi informasi tentang bus.  Ini karena cerita lain yang mendorong saya ke proyek ini.  Suatu hari, saya lupa topi di bus, yang disebut ruang kontrol, menjelaskan di mana itu terjadi.  Operator itu menyarankan agar saya naik bus di tengah, di mana ia akan kembali, berbalik di terminal.  Saya ingat bahwa saya memiliki login dan kata sandi dari sistem Pusat Manajemen Lalu Lintas, tetapi ternyata saya masih tidak dapat melacak lokasi mobil yang saya butuhkan melalui antarmuka web.  Saya mengembalikan topinya, tetapi dengan susah payah. <br>  Saya pikir menemukan bus bisa jauh lebih mudah.  Saya menulis nomor rute, dan sistem menunjukkan kepada Anda mobil-mobil di telepon, lokasi mereka saat ini dan waktu ketika mereka lewat berhenti di sepanjang jalan.  Dan bahkan jika Anda tahu nomor rute, tetapi Anda tahu nomor bus (ini juga terjadi), Anda masih dapat menemukannya. </li><li>  <b>Peta.</b>  Peta di situs tanpa animasi.  Di sini Anda dapat memilih bus dari daftar atau memasukkan angka secara manual, Anda dapat memfilternya.  Hingga 600 bus dapat ditampilkan di peta, meskipun setelah 20 menjadi sulit untuk menemukan sesuatu di pusat, hanya karena semua rute terkonsentrasi di sini.  Karena itu, lebih baik membatasi pencarian ke parameter yang lebih ketat. </li><li>  <b>Tentang proyek.</b>  Sekarang proyek memiliki situs web, ada bot Telegram, grup di jejaring sosial. </li></ol><br><br>  *** <br>  Untungnya, Python adalah bahasa dengan baterai di luar kotak.  Untuk hal-hal sederhana, Anda bahkan tidak perlu mengunduh apa pun, cukup baca dokumentasinya dengan cermat. <br><br>  Tentu saja, layanan tersebut dapat dilakukan untuk kota-kota lain, terlebih lagi, di beberapa mereka sudah bekerja.  Banyak hal bergantung pada pusat data lokal, di beberapa tempat, misalnya, di St. Petersburg bahkan ada API untuk pengembang.  Tapi yang paling penting adalah warga kota yang ingin mengubah kota mereka menjadi lebih baik. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id411249/">https://habr.com/ru/post/id411249/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id411239/index.html">Kreativitas DIY sejak kecil: menanamkan kecintaan pada produk buatan sendiri</a></li>
<li><a href="../id411241/index.html">"Kepler" menemukan supernova aneh: cepat terbakar, cepat keluar</a></li>
<li><a href="../id411243/index.html">Limbah - ke tungku</a></li>
<li><a href="../id411245/index.html">Mari kita tunjukkan diri kita kepada Semesta: mercusuar yang akan tetap ada setelah peradaban kita</a></li>
<li><a href="../id411247/index.html">Anak-anak yang paling "pintar" menonton VTech Kidizoom. Bagaimana keadaan sebenarnya</a></li>
<li><a href="../id411251/index.html">Pengguna membenci file pemindaian Chrome di drive lokal</a></li>
<li><a href="../id411253/index.html">Penggabungan bintang-bintang neutron mengakhiri alternatif materi gelap dan energi gelap</a></li>
<li><a href="../id411255/index.html">Aplikasi terdesentralisasi untuk jutaan pengguna di Ethereum</a></li>
<li><a href="../id411257/index.html">Di AS, mereka menciptakan sistem laser yang akan menakuti musuh dengan suara</a></li>
<li><a href="../id411259/index.html">Kami menghubungkan meteran air ke rumah pintar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>