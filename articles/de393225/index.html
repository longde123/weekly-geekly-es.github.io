<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛑 💇 🌱 Vierkanaliges 0-50-V-Voltmeter basierend auf dem Digital Laboratory Kit NR05 🤽 ↕️ 👤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oft müssen mehrere Spannungen gleichzeitig gesteuert werden, z. B. die Ausgangsspannungen eines Computer-Netzteils, mehrere Batterien usw. In der letz...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vierkanaliges 0-50-V-Voltmeter basierend auf dem Digital Laboratory Kit NR05</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/masterkit/blog/393225/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oft müssen mehrere Spannungen gleichzeitig gesteuert werden, z. B. die Ausgangsspannungen eines Computer-Netzteils, mehrere Batterien usw. In der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">letzten Veröffentlichung haben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir das Prinzip der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codesperre</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untersucht und bauen nun auf der Grundlage des Erweiterungskits des </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Digital Laboratory Kits NR05</font></a><font style="vertical-align: inherit;"> ein Vierkanal-Digital auf ein Voltmeter mit einer Anzeige der Ergebnisse auf dem in die Platine eingebauten Display. Der Bereich der gemessenen Spannungen kann mit einem externen Teiler geändert werden. Der Messschritt wird durch die Auflösung des Analog-Digital-Wandlers (ADC) des auf der Arduino-Platine verwendeten Atmega 328-Mikrocontrollers bestimmt und beträgt 1024 Werte. Im Spannungsbereich von 0 bis 50 V beträgt der Spannungsmessschritt dann etwa 50 mV, was für den Hausgebrauch völlig ausreicht.</font></font><br>
<br>
<img src="https://habrastorage.org/files/1c8/740/bbe/1c8740bbebde493992785c65a2974e5e.jpg" width="500"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden die gemessenen Spannungen an die freien Analogeingänge der Karte anschließen. Dies sind die Eingänge A0, A4, A5 und A7 im unteren rechten Teil der Karte. Um den Eingang A0 zu verwenden, lassen Sie den Widerstand R4 in der Nähe des XP3-Anschlusses im unteren rechten Teil der Platine vorübergehend fallen.</font></font><br>
<br>
<img src="https://habrastorage.org/files/725/c9b/33d/725c9b33dd8e44b7999e89b30c2d566c.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden einen externen Teiler mit Anschlüssen zum Anschließen der gemessenen Spannungen und einer Expansionsplatine nach der LUT-Methode (der sogenannten "Laser-Bügeltechnologie") herstellen und die Platine in eine Lösung aus Eisenchlorid ätzen. Wir haben SMD-Widerstände verwendet. Wenn Sie jedoch keinen Laserdrucker haben, können Sie den Teiler herstellen, indem Sie Leiter mit einem wasserdichten Filzstift zeichnen. In diesem Fall ist es besser, Ausgangswiderstände zu verwenden, da die Größengenauigkeit der resultierenden Leiter geringer ist. Im Detail kann die Technologie zur Herstellung von Leiterplatten durch Ätzen in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eisenchlorid</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> durch den Kauf eines </font><font style="vertical-align: inherit;">von Master Kit hergestellten </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">NN201-Satzes untersucht</font></a><font style="vertical-align: inherit;"> werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die fertige Trennwand ist auf dem Foto unten dargestellt.</font></font><br>
<br>
<img src="https://habrastorage.org/files/528/eb4/bd8/528eb4bd8c1e4c6799e66e46b7dffed5.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Erweiterungskarte verfügt über eine 2-zeilige Flüssigkristallanzeige mit 16 Zeichen in jeder Zeile. </font><font style="vertical-align: inherit;">Auf einem solchen Indikator lassen sich vier Messwerte von 0 bis 50 Volt mit einer Dezimalstelle und Kanalkennungen recht bequem platzieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist ratsam, die Messungen selbst in kurzer Zeit mehrmals durchzuführen und ihre Werte zu mitteln. </font><font style="vertical-align: inherit;">Dies reduziert zufällige Messfehler. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir erkennen im Programm auch, dass die Ergebnisse „eingefroren“ werden, wenn Sie auf eine der im Board integrierten Schaltflächen klicken, beispielsweise die mittlere. </font><font style="vertical-align: inherit;">Ein zweites Drücken setzt die kontinuierlichen Messungen fort. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir verwenden die LED, die an den 13. digitalen Ausgang von Arduino angeschlossen ist, um den Messvorgang anzuzeigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Basierend auf dem Vorstehenden werden wir ein Programm für Arduino erstellen:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spoiler</font></font></b><div class="spoiler_text">/*--------------------------------------------------------------<br>
   0-50,  ,<br>
    ,    LCD-<br>
 16 , 2 , <br>
 <br>
       <br>
 NR05 « »; 4   10  <br>
 1, 100,     A0,A4,A5,A7<br>
 <br>
   <br>
   5     V_REF<br>
     .<br>
     -<br>
    .<br>
 <br>
     (<br>
   )<br>
    Vin    <br>
  .<br>
   Vout   .<br>
   DIV_*   Vin/Vout.<br>
 <br>
       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">startingelectronics.com</a><br>
--------------------------------------------------------------*/<br>
#include &lt;LiquidCrystal.h&gt;<br>
<br>
//   (    )<br>
#define LED 13<br>
//     <br>
#define NUM_SAMPLES 20<br>
//   <br>
#define DIV_1 11.186<br>
#define DIV_2 11.186<br>
#define DIV_3 11.186<br>
#define DIV_4 11.186<br>
//    <br>
#define V_REF 4.575<br>
//    <br>
#define NUM_KEYS 5<br>
//      ( )<br>
int adcKeyVal[NUM_KEYS] = {30, 150, 360, 535, 760};<br>
<br>
LiquidCrystal lcd(A1, A2, A3, 2, 4, 7);<br>
unsigned long sum[4] = {0}; //     <br>
unsigned char sample_count = 0; //   <br>
float voltage[4] = {0.0}; //  <br>
int cnt = 0; //  <br>
int keyIsPressed = 0; //    «» <br>
<br>
void setup()<br>
{<br>
 lcd.begin(16, 2);<br>
 pinMode(LED, OUTPUT);<br>
 digitalWrite(LED, LOW);<br>
}<br>
<br>
void loop()<br>
{<br>
 //   3 ,     «»<br>
 if (get_key() == 3){<br>
 keyIsPressed = !keyIsPressed;<br>
 delay(500);<br>
 }<br>
 //    (1),     <br>
 if (keyIsPressed == 0){<br>
 digitalWrite(LED, LOW);<br>
 //        <br>
 while (sample_count &lt; NUM_SAMPLES) {<br>
 // sample channel A0, A4, A5, A7<br>
 sum[0] += analogRead(A0);<br>
 sum[1] += analogRead(A4);<br>
 sum[2] += analogRead(A5);<br>
 sum[3] += analogRead(A7);<br>
 sample_count++;<br>
 delay(10);<br>
 }<br>
 digitalWrite(LED, HIGH);<br>
 //         <br>
 for (cnt = 0; cnt &lt; 4; cnt++) {<br>
 voltage[cnt] = ((float)sum[cnt] / (float)NUM_SAMPLES * V_REF) / 1024.0;<br>
 }<br>
 //    <br>
 lcd.setCursor(0, 0);<br>
 lcd.print(«A „);<br>
 lcd.print(voltage[0] * DIV_1, 1);<br>
 lcd.print(“V „);<br>
 // voltage 2 — B (pin A4)<br>
 lcd.setCursor(8, 0);<br>
 lcd.print(“B „);<br>
 lcd.print(voltage[1] * DIV_2, 1);<br>
 lcd.print(“V „);<br>
 // voltge 3 — C (pin A5)<br>
 lcd.setCursor(0, 1);<br>
 lcd.print(“C „);<br>
 lcd.print(voltage[2] * DIV_3, 1);<br>
 lcd.print(“V „);<br>
 // voltage 4 — D (pin A7)<br>
 lcd.setCursor(8, 1);<br>
 lcd.print(“D „);<br>
 lcd.print(voltage[3] * DIV_4, 1);<br>
 lcd.print(“V „);<br>
 <br>
 //    <br>
 sample_count = 0;<br>
 for (cnt = 0; cnt &lt; 4; cnt++) sum[cnt] = 0;<br>
 delay(20);<br>
 }<br>
}<br>
<br>
//     <br>
int get_key()<br>
{<br>
 int input = analogRead(A6);<br>
 int k;<br>
 for (k = 0; k &lt; NUM_KEYS; k++)<br>
 if (input &lt; adcKeyVal[k])<br>
 return k + 1;<br>
 return 0;<br>
}<br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Programm ist mit ausreichend detaillierten Kommentaren ausgestattet, die die Merkmale der Algorithmusimplementierung erläutern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das vielleicht wichtigste Merkmal ist der Prozess der Kalibrierung der Konstanten, die in den Kommentaren zur Berechnung der gemessenen Spannungen beschrieben sind. Verwenden Sie zum Kalibrieren des Teilers (einmal durchgeführt) eine stabile Konstantspannungsquelle. Da die Kalibrierung nur kurze Zeit dauert, können Sie eine 9-V-Krona-Batterie und ein Digitalmultimeter erfolgreich verwenden. Ein Multimeter aus dem "Set eines jungen Elektronikingenieurs" NR02 ist durchaus geeignet. Dieses Kit eignet sich auch hervorragend zum Unterrichten von Löten und Leiterplattenbestückung.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist zu beachten, dass bei einer Änderung der an Arduino ankommenden Versorgungsspannung die Kalibrierungswerte der Referenzspannung entsprechend geändert werden müssen, deren relative Werte gemessen werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um den Messbereich zu ändern, muss ein Teiler mit einem anderen Teilungsverhältnis der Eingangsspannung angelegt werden.</font></font><br>
<br>
<img src="https://habrastorage.org/files/fa0/05b/268/fa005b268fa4431ca6ee067bb716048a.jpg"></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de393225/">https://habr.com/ru/post/de393225/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de393211/index.html">Wie fällt ein schleichender Frühling? [Vert Dider]</a></li>
<li><a href="../de393215/index.html">Japan wird die Landwirte durch Roboter und unbemannte Traktoren ersetzen</a></li>
<li><a href="../de393217/index.html">Hacker Geohot wird zusammen mit dem leitenden Ingenieur von Tesla Motors an einem unbemannten Tesla-Rivalenauto arbeiten</a></li>
<li><a href="../de393219/index.html">Was Sie von einem IT-Spezialisten im Finanzbereich erwarten können: Anforderungen und verwendete Technologien</a></li>
<li><a href="../de393223/index.html">Der Kreislauf der Medikamente in der Natur: Das aus dem Körper ausgeschiedene Medikament gelangt wieder in die Nahrung</a></li>
<li><a href="../de393227/index.html">Die Einnahme von Aspirin erhöht die Überlebenschancen von Krebspatienten um 20%</a></li>
<li><a href="../de393231/index.html">MI Guitar - eine Gitarre für diejenigen, die Gitarre spielen wollen, aber nicht lernen wollen</a></li>
<li><a href="../de393233/index.html">Ein einfaches und effizientes virtuelles Bewegungssystem: Hosensteuerung</a></li>
<li><a href="../de393235/index.html">Im Kosmodrom Vostochny wurde für den ersten Start eine Sojus 2.1a-Trägerrakete installiert</a></li>
<li><a href="../de393237/index.html">Eine kurze Geschichte der Entwicklung unbemannter Fahrzeuge</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>