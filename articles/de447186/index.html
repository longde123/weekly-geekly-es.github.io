<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñï üéóÔ∏è üßòüèø So starten Sie einen ML-Prototyp an einem Tag. Bericht Yandex.Taxi üíÉüèº ü¶É üç∫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Maschinelles Lernen wird w√§hrend des gesamten Bestellzyklus von Yandex.Taxi eingesetzt, und die Anzahl der dank ML arbeitenden Servicekomponenten w√§ch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So starten Sie einen ML-Prototyp an einem Tag. Bericht Yandex.Taxi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/447186/">  Maschinelles Lernen wird w√§hrend des gesamten Bestellzyklus von Yandex.Taxi eingesetzt, und die Anzahl der dank ML arbeitenden Servicekomponenten w√§chst stetig.  Um sie einheitlich zu bauen, brauchten wir einen separaten Prozess.  Roman Khalkachev, Leiter des Dienstes f√ºr maschinelles Lernen und Datenanalyse, sprach √ºber die Datenvorverarbeitung, die Verwendung von Modellen in der Produktion, den Prototyping-Service und verwandte Tools. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/IDHKt1N2IvU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - Meiner Meinung nach sind einige neue Dinge viel leichter wahrzunehmen, wenn sie anhand eines einfachen Beispiels erz√§hlt werden.  Damit der Bericht nicht trocken war, habe ich mich entschlossen, √ºber eine der Aufgaben zu sprechen, die wir l√∂sen.  An ihrem Beispiel werde ich zeigen, warum wir so handeln. <br><br>  Formulieren wir das Problem.  Es gibt Taxifahrer, die von Punkt A nach Punkt B gelangen m√ºssen, und es gibt Fahrer, die f√ºr einen bestimmten Betrag bereit sind, um diese Benutzer von Punkt A nach Punkt B zu bef√∂rdern. Der Benutzer hat mehrere Bedingungen, unter denen er sich befindet.  Er ruft ein Taxi, w√§hlt Punkt A, Punkt B, Fahrpreis usw. aus, landet mit dem Taxi, f√§hrt und landet schlie√ülich.  Heute m√∂chte ich √ºber das Einsteigen in ein Auto und m√∂gliche Probleme sprechen. <br><br><a name="habracut"></a><img src="https://habrastorage.org/webt/i4/wx/-w/i4wx-wctuoekqqjixbj8yud2tsg.jpeg"><br><br>  Diese Probleme h√§ngen in der Regel damit zusammen, dass eine Person einen Ort ausw√§hlen muss, an dem ein Taxi kommen soll.  Und hier gibt es eine Reihe von Schwierigkeiten.  Diese Schwierigkeiten h√§ngen mit vier Dingen zusammen, die ich auf der Folie aufgelistet habe. <br><br><img src="https://habrastorage.org/webt/vn/ua/og/vnuaogglei7as1bbojryct6pguy.jpeg"><br><br>  Erstens ist der Standort dem Benutzer m√∂glicherweise nicht bekannt.  Als Beispiel k√∂nnen Sie sich vorstellen, wer zu einem gro√üen Einkaufszentrum gekommen ist, das Sie nicht oft besuchen.  Sie m√∂chten abreisen und wissen nicht wirklich, wo Sie hier ein Taxi rufen k√∂nnen, wo das Auto anrufen kann, aber wo es zum Beispiel aufgrund der Barriere nicht kann.  Es gibt Probleme mit der Tatsache, dass an einigen Orten viele Menschen, viele Autos sind und es f√ºr Sie schwierig ist, Ihr Auto zu finden.  Es gibt Orte, an denen normalerweise Leute ins Auto steigen. Es ist einfacher, dorthin zu gelangen.  Und Sie wissen vielleicht nicht, wo Sie genau landen m√ºssen, wenn Sie sich an einem neuen Ort befinden, nicht unbedingt im Einkaufszentrum.  Schwierigkeiten k√∂nnen damit verbunden sein, dass der Fahrer nicht zu dem Ort fahren kann, an dem Sie das Taxi gerufen haben: Es ist ihm verboten zu reisen, es gibt einen gro√üen Ausgang vom Einkaufszentrum, gegen√ºber dem Sie nicht anhalten k√∂nnen usw. <br><br>  Andererseits k√∂nnen Sie als Benutzer Probleme haben.  Der Fahrer ist angekommen, alles ist in Ordnung, aber es ist unangenehm, sich zu setzen, weil alle ausgegraben haben.  Sie bitten den Fahrer, woanders zu fahren.  Es gibt andere Gr√ºnde. <br><br>  Das anschaulichste Beispiel, die Quintessenz all dieser Dinge, ist der Flughafen, auf dem fast alles getan wird.  Selbst wenn Sie sehr oft von Sheremetyevo aus fliegen, ist es f√ºr Sie immer noch ein unbekannter Ort, da sich dort oft viele Dinge √§ndern.  Es gibt viele Menschen, viele Autos, es gibt bequeme Landepl√§tze, es gibt unbequeme, aber in der Regel erinnert sich keiner von uns daran. <br><br><img src="https://habrastorage.org/webt/nb/e_/ab/nbe_abma_ki1jpgwfl1fr-mjqka.jpeg"><br><br>  Die L√∂sung wird aus dem Titel der Folie gelesen.  Lassen Sie uns dem Benutzer einige Orte empfehlen, an denen es unserer Meinung nach bequem ist, zu landen.  Der Gedanke scheint offensichtlich, aber hier gibt es viele Nuancen. <br><br>  F√ºr den Anfang ist ‚Äûbequem‚Äú ein subjektives Konzept.  Es scheint, dass vor der L√∂sung des Problems einige Kriterien f√ºr die Tatsache formuliert werden m√ºssen, dass das Problem korrekt gel√∂st wird.  Wir haben drei Hauptformulare f√ºr uns formuliert.  Das erste Kriterium ist wie bei jeder Aufgabe von Empfehlungen: Wahrscheinlich sind Empfehlungen gut, wenn sie verwendet werden.  Wenn wir solche Punkte zeigen, von denen der Benutzer wirklich abreist, sind dies wahrscheinlich gute Punkte.  Aber das ist nat√ºrlich nicht alles, denn Sie k√∂nnen lernen, etwas zu empfehlen, es zu zeigen, den Benutzer zu ermutigen, es zu verwenden, aber Sie k√∂nnen keinen greifbaren Gewinn erzielen (wir werden weder als System noch als Benutzer noch als Fahrer arbeiten).  Daher ist es sehr wichtig, andere Metriken zu betrachten.  Wir haben zwei ausgew√§hlt. <br><br>  Wenn wir Ihnen von einem Landeplatz erz√§hlen, zu dem der Fahrer problemlos fahren kann, sollte die Lieferzeit des Fahrzeugs verk√ºrzt werden.  Wenn es f√ºr den Benutzer hingegen einfacher ist, ein Auto an diesem Ort zu finden, ist es einfacher zu landen, sollte die Wartezeit des Fahrers f√ºr den Fahrer verk√ºrzt werden.  Dies ist ein Teil unserer Hypothese, die wir f√ºr selbstverst√§ndlich halten, und dies sind einige Metriken, die wir betrachten, wenn wir diese Empfehlungen aussprechen.  Aber dies sind nat√ºrlich nicht die einzigen Metriken, die betrachtet werden m√ºssen.  Sie k√∂nnen sich ein Dutzend mehr einfallen lassen.  Ich denke, jeder von Ihnen kann sich hundert dieser Metriken einfallen lassen. <br><br>  Hier sind einige weitere Beispiele.  Dies kann der Anteil der Stornierungen vor der Reise sein.  Theoretisch sollte es abnehmen, wenn der Benutzer leichter landen kann.  Herk√∂mmlicherweise sind dies Anrufe, wenn ein Benutzer den Fahrer anruft, um ihn zu finden, oder umgekehrt, wenn der Fahrer den Benutzer anruft, bevor die Reise beginnt.  Dieser Aufruf unterst√ºtzt und ein Dutzend andere. <br><br>  Wir haben das Problem formuliert.  Wir haben das Kriterium, dass wir dieses Problem l√∂sen k√∂nnen, grob verstanden.  Lassen Sie uns nun dar√ºber nachdenken, wie Sie dieses Problem l√∂sen k√∂nnen.  Das erste, was mir in den Sinn kommt: Empfehlen wir solche bew√§hrten und verst√§ndlichen Landepunkte.  Hier auf der Folie ist ein Beispiel f√ºr das Europ√§ische Einkaufszentrum.  Und wir wissen mit Sicherheit, dass Sie von diesem Einkaufszentrum bis zu den Ausg√§ngen fahren k√∂nnen, und dies ist eine Art Richtlinie, dank derer der Benutzer einen Fahrer finden kann.  Es kann jede Organisation sein.  In einigen Einkaufszentren gibt es ein Beispiel mit dem ABC of Taste.  Meiner Meinung nach ist dies Yerevan Plaza.  Dies ist auch eine Art Richtlinie f√ºr Benutzer und Fahrer, √ºber die wir wissen, dass Sie dort fahren k√∂nnen. <br><br><img src="https://habrastorage.org/webt/ym/ex/lu/ymexlupptviqlhyi4otvpouyjuq.jpeg"><br><br>  Dies k√∂nnen Wahrzeichen an den Flugh√§fen sein, von denen ich gesprochen habe.  Herk√∂mmlicherweise gibt es in Sheremetyevo solche Pole mit Zahlen.  Es ist bequem, ein Taxi zu rufen und ins Auto zu steigen.  Eine gute L√∂sung, aber es hat ein Minus, dass es nicht sehr skalierbar ist.  Wir haben viele L√§nder, Hunderte von St√§dten, eine gro√üe Anzahl verschiedener Einkaufszentren, Flugh√§fen, schwierige Verkehrsknotenpunkte, unbekannte Orte, f√ºr die es schwierig ist, diese Punkte manuell zu ermitteln, und es ist noch schwieriger, sie auf dem neuesten Stand zu halten.  Hier hilft uns das, was lautstark "k√ºnstliche Intelligenz" genannt wird.  Ich nenne es lieber Data Mining oder maschinelles Lernen. <br><br>  Maschinelles Lernen ben√∂tigt irgendeine Art von Daten, und wir haben diese Daten tats√§chlich.  Eine andere M√∂glichkeit, das Problem automatisch zu l√∂sen, besteht darin, diese Daten zu verwenden.  Die √ºbergeordnete Idee ist, dass wir Daten √ºber GPS, Anwendungsprotokolle und ein Stra√üendiagramm haben.  Und wir k√∂nnen verstehen, wo Benutzer tats√§chlich ins Auto steigen.  Nicht die Punkte, an denen sie das Auto anrufen, sondern an denen sie landen.  Und basierend darauf machen Sie so etwas. <br><br><img src="https://habrastorage.org/webt/ps/be/vl/psbevlef58dytmd_75_7iqhukts.jpeg"><br><br>  Diese Punkte werden bereits automatisch f√ºr das Aurora Business Center erhalten, in dem derzeit unser Yandex.Taxi-Team sitzt. <br><br>  Ich habe auf hohem Niveau √ºber unsere Aufgabe gesprochen.  Lassen Sie uns nun genauer dar√ºber sprechen, aus welchen Phasen die L√∂sung dieses Problems besteht.  Es ist klar, dass es eine Phase der Datenaufbereitung gibt. <br><br><img src="https://habrastorage.org/webt/v7/mt/tw/v7mttwhglgsfcylredz1spr1oli.jpeg"><br><br>  Welche Daten haben wir?  Erstens haben wir die GPS-Daten unserer Benutzer und die GPS-Daten unserer Fahrer.  Wenn sie unsere Anwendung verwenden, kennen wir den ungef√§hren Standort der Benutzer.  Es ist klar, dass GPS einen gro√üen Fehler im Bereich von 13 bis 15 Metern aufweist, aber dennoch gibt es etwas.  Zweitens haben wir Informationen, die in den Anwendungsprotokollen enthalten sind, wann der Treiber vom Status "Ich warte auf den Benutzer" zum Status "Ich nehme den Benutzer" gewechselt hat.  Es ist davon auszugehen, dass der Fahrer ungef√§hr zu diesem Zeitpunkt auf den Benutzer gewartet hat, der Benutzer ins Auto gestiegen ist und losgefahren ist.  Um diesen Ort herum wurde gelandet.  Und wir haben eine Stra√üengrafik.  Ein Stra√üendiagramm besteht nicht nur aus einer Reihe von Kanten, Stra√üen, sondern auch aus zus√§tzlichen Metainformationen: Barrieren, Informationen zum Parken usw. Basierend auf diesen Daten k√∂nnen Sie bereits eine Art automatische Punkte erhalten. <br><br>  Dies waren die Quelldaten.  Und am Ausgang wollen wir zwei Dinge.  Dies sind einige sogenannte Landepunktkandidaten.  Wie kommen sie zustande?  Schade, dass das Video nicht gezeigt werden konnte.  Folgendes passiert ungef√§hr.  Wir haben viele GPS-Punkte, an denen wir wissen, dass der Fahrer vom Status ‚ÄûWarten auf einen Passagier‚Äú zum Status ‚ÄûLos geht's‚Äú gewechselt ist.  Wir k√∂nnen sie bedingt in die Grafik zeichnen, dh auf die Stra√üengrafik projizieren, da sich das Auto in der Regel von einer Stra√üe aus bewegt.  F√ºhren Sie in diesem Diagramm eine Art Clustering dieser Punkte durch.  Und um eine gro√üe Anzahl von Kandidaten zu bekommen - dies sind Orte, an denen einige Benutzer ins Auto gestiegen sind, und es war normal und praktisch f√ºr sie.  Nicht wo sie anriefen, sondern wo sie sa√üen. <br><br>  Danach, wenn wir viele Kandidaten haben und einige Benutzer online sind, kennen wir seinen Standort. Er hat die Bewerbung ge√∂ffnet und m√∂chte ein Taxi rufen. Dann k√∂nnen wir aus einer gro√üen Anzahl von Kandidaten die besten f√ºnf ausw√§hlen und ihnen zeigen.  Die besten f√ºnf werden durch ein Modell des maschinellen Lernens ermittelt, das lernt, alle Kandidaten nach der Wahrscheinlichkeit zu ordnen, dass der Benutzer zu diesem Zeitpunkt unter Ber√ºcksichtigung seines Standorts und seiner Reisegeschichte am bequemsten abreisen kann.  Und ungef√§hr auf diese Weise k√∂nnen wir diese Punkte automatisch generieren.  Wenn sie irgendwann irgendwo bedingt ausgraben, das hei√üt, es wird unangenehm, ein Taxi zu rufen, oder wenn sie irgendwo ein Schild anbringen, das das Anhalten verbietet, und Fahrer und Benutzer wirklich aufh√∂ren, an diesem Ort zu landen, dann an einigen Sobald der Algorithmus dies versteht und die Daten aktualisiert werden. <br><br><img src="https://habrastorage.org/webt/se/90/qi/se90qiau_vugtxbwmlmw5s6dhbs.jpeg"><br><br>  Dies ist ungef√§hr das Blockdiagramm, wie wir die Daten aufbereiten.  Dementsprechend ist es ziemlich Standard, wie in jeder Pipeline f√ºr maschinelles Lernen.  Es gibt Datenaufbereitung, es gibt eine Generation von Kandidaten nach dem Algorithmus, sagte ich einer vereinfachten Version.  Wir speichern diese Kandidaten in einer bestimmten Datenbank.  Danach bereiten wir einen Pool f√ºr das Training vor (Trainingsbeispiel), in dem sich unter bestimmten Bedingungen ein Benutzer, eine Zeit, Metainformationen und eine Reihe von Kandidaten befinden und bekannt ist, von welchem ‚Äã‚ÄãPunkt der Benutzer schlie√ülich abgereist ist.  Darauf trainieren wir das Klassifikationsmodell.  Und dann ordnen wir nach den Vorhersagen der Wahrscheinlichkeit die Kandidaten.  Wenn das Modell fertig ist, laden wir es in eine Cloud hoch, in der es gut gespeichert ist. <br><br><img src="https://habrastorage.org/webt/ou/0k/5k/ou0k5kbozlb4w_ypk6m5o2djp3y.jpeg"><br><br>  Welche Tools verwenden wir zur Aufbereitung der Daten?  Grunds√§tzlich alle Datenvorbereitungen, die wir in Python auf dem Python-Stack geschrieben haben: Dies sind Standard-NumPy, Pandas, Scikit-Learn usw. Wir haben viele Daten.  Wir haben Millionen von Reisen pro Monat.  Viele Daten √ºber GPS, √ºber Fahrerspuren, Anwendungsprotokolle, daher m√ºssen wir sie alle im Cluster gleich verarbeiten.  Zu diesem Zweck verwenden wir MapReduce unserer Intra-Yandex-Version, die als YT bezeichnet wird, und es gibt eine in Python geschriebene Bibliothek, mit der einige Mapper und Reduzierer gestartet und einige Berechnungen f√ºr einen gro√üen Cluster durchgef√ºhrt werden k√∂nnen. <br><br>  Wenn die Pipeline fertig ist, m√ºssen wir sie automatisieren, damit die Daten auf dem neuesten Stand sind, und daf√ºr verwenden wir so etwas wie Nirvana und Hitman.  Dies ist auch eine Intra-Yandex-Entwicklung.  Nirvana ist ein Cluster-Computing-Management-Framework.  Tats√§chlich wei√ü sie, wie man fast jedes Programm ausf√ºhrt, fehlertolerant ist, DC-√ºberkreuzt (00:14:53).  Und f√ºr den Fall, dass etwas herunterf√§llt, wei√ü sie, wie sie es neu starten kann, um beim Auftreten von Ereignissen Starts zu erstellen.  usw. <br><br><img src="https://habrastorage.org/webt/wy/c3/9z/wyc39zj9qbomfd5ybc-ifszugde.jpeg"><br><br>  So sieht ungef√§hr die Weboberfl√§che unseres MapReduce-Clusters aus.  Es ist hier zu sehen, dass wir viele Maschinen haben, solche Knoten, auf denen Berechnungen durchgef√ºhrt werden. <br><br><img src="https://habrastorage.org/webt/gl/wd/p4/glwdp4bccgeodj-xzpfk3xyjuu8.jpeg"><br><br>  Und so sieht in der Weboberfl√§che ein typischer Prozess einer Art Datenvorverarbeitung und Modelltraining aus.  Dies ist ein solcher Abh√§ngigkeitsgraph.  Abh√§ngigkeiten sind wie Daten, wenn ein Teil (ein W√ºrfel) auf Daten von einem anderen W√ºrfel wartet.  und logische Abh√§ngigkeit (zuerst haben wir alle Daten vorbereitet und dann mit dem Training begonnen).  Dies ist eine Art automatisiertes System.  F√ºr all dies verwenden wir normalerweise Python. <br><br>  Wir haben das Problem formuliert, Erfolgskriterien formuliert, gelernt, es irgendwie offline zu l√∂sen, sogar eine Art Modell erstellt, und es scheint nach einigen Offline-Metriken zu funktionieren - es sagt wirklich die Punkte voraus, von denen der Benutzer diese Punkte verl√§sst und findet Dies sollte anscheinend die Wartezeit und die Auslieferung des Autos verk√ºrzen. <br><br><img src="https://habrastorage.org/webt/hv/aw/bg/hvawbgrigssxzje4wzv4pgbv72a.jpeg"><br><br>  Versuchen wir diese Modelle, verwenden Sie diese Daten.  Stellen Sie sich dazu den Yandex.Taxi-Service vor. <br><br>  Ein sehr oberfl√§chliches Diagramm sieht so aus.  Es gibt Benutzer, sie haben eine Anwendung und es gibt Treiber, sie haben auch eine Anwendung namens "Taximeter".  Diese Anwendungen kommunizieren irgendwie mit dem Backend, und das Backend ist eine Reihe von Microservices, die miteinander kommunizieren - Ilya hat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dar√ºber gesprochen</a> .  Einer der Microservices ist unser Service, unser Team macht es, es hei√üt ML as a Service, MLaaS. <br><br><img src="https://habrastorage.org/webt/7r/wh/8z/7rwh8zsyfisoucl0_xsvg-u39rg.jpeg"><br><br>  Alles, was Sie √ºber ihn wissen m√ºssen, ist in C ++ geschriebenes MLaaS, das auf dem sogenannten Fastcgi-Daemon basiert.  Dies ist eine Open-Source-Bibliothek, die grob gesagt ein Framework zum Schreiben eines Webservers ist, der Anforderungen abrufen und ver√∂ffentlichen kann. Alles ist Standard.  Es wurde einmal in Yandex geschrieben und in Open Source angelegt.  Wir verwenden die dopped Version.  Was kann dieser Service tun?  Er wei√ü, wie man mit Modellen arbeitet: Wenden Sie sie an, behalten Sie sie zu Hause und aktualisieren Sie sie manchmal, gehen Sie in diese wunderbare Cloud, in der Modelle regelm√§√üig aktualisiert, gespeichert und heruntergeladen werden. <br><br>  Jede Funktionalit√§t, zum Beispiel diese Landepunkte - im Inneren nennen wir sie Abholpunkte - oder zum Beispiel die Tipps von Punkten B, √ºber die Ilya im vorherigen Bericht gesprochen und st√§ndig gebrochen hat, entspricht jeder dieser Funktionen, bei denen es eine Art maschinelles Lernen gibt Handler, der die Logik zum Empfangen einer Anforderung, zum Generieren von maschinellen Lernfaktoren, zum Anwenden von Modellen und zum Generieren einer Antwort speichert.  Nat√ºrlich ist dieser Dienst nicht isoliert, da er auf einige zus√§tzliche Datenquellen, Datenbanken und einige andere Mikrodienste zugreifen kann. <br><br><img src="https://habrastorage.org/webt/g2/st/81/g2st815sxi1r0q1wy6waaoqrxdc.jpeg"><br><br>  So ist es angeordnet, es hat eine ziemlich einfache Architektur.  Ich wollte nicht im Detail auf diese Folie eingehen, ich wollte nur sagen, dass die Architektur konventionell sehr einfach ist.  Die Anfrage kommt an, es gibt eine Fabrik von Modellen, die diese Modelle manchmal aus der Cloud herunterladen.  Im Speicher werden sie in einer einzigen Kopie gespeichert.  F√ºr jede Anforderung wird ein relativ leichtes Modellobjekt erstellt, das Features extrahiert, anwendet und eine Antwort generiert. <br><br><img src="https://habrastorage.org/webt/y3/sq/ru/y3sqruaisy4qicdx5iyvbgrq1ew.jpeg"><br><br>  Aber was haben wir f√ºr den aktuellen Moment?  Ich habe Ihnen bereits gesagt, dass wir Datenvorbereitung, Schulung, verschiedene Studien, Experimente haben und all dies in Python Stack geschrieben ist. Es gibt einige Produktionen, die in C ++ geschrieben sind, einfach weil wir hohe Anforderungen an Effizienz und Produktivit√§t stellen.  Wenn Sie in einem solchen √ñkosystem leben, treten zwei Probleme auf. <br><br>  Dies ist vor allem ein Problem von Experimenten.  Ein Datenwissenschaftler, der in unserem Team arbeitet, hatte beispielsweise eine Idee.  Wenn Sie einen Clustering- oder Klassifizierungsalgorithmus mit leicht unterschiedlichen Parametern ausf√ºhren, k√∂nnen Sie eine bessere Qualit√§t erzielen.  Er hat versucht, seine Hypothese offline zu testen, sie in unseren Python-Prozess integriert, berechnet und es stellt sich wirklich heraus.  Und jetzt m√∂chte er, dass ein AB-Experiment, dh ein Teil der Benutzer, den neuen Algorithmus zeigt und einige bereits online gemessene Metriken misst: sinkt die Zeit wirklich, wartet, nimmt die Nutzung zu.  Zu diesem Zweck verf√ºgt er unter bestimmten Bedingungen √ºber f√ºnf Versionen seines Algorithmus, von denen er glaubt, dass sie offline eine gute Qualit√§t bieten: Implementierung in C ++ und Durchf√ºhrung eines AB-Experiments.  Und nach diesem AB-Experiment werden vielleicht alle f√ºnf verschwendet, das hei√üt, die Qualit√§t der Online-Experimente wird schlechter als offline, dh schlechter als in der Produktion.  Das hei√üt, der Experimentierprozess dauert lange, da bedingt zwei verschiedene Sprachen, zwei verschiedene Technologien. <br><br>  Dies gilt f√ºr vorhandene Funktionen.  Und es gibt neue.  Einmal waren diese Abholpunkte auch Ideen, die ich schnell √ºberpr√ºfen wollte.  Verbringen Sie keine zwei Monate Entwicklungszeit damit - es ist ratsam, in drei Wochen etwas zu besorgen.  Einen solchen Prototyp zu erstellen ist ziemlich m√ºhsam.  Schreiben Sie zun√§chst in Python die Extraktion von Features, einfach weil es bequem ist - bewegen Sie sich schnell, wie sie sagen.  Sie k√∂nnen jeden Prototyp in Python erstellen. Es gibt viele Bibliotheken f√ºr die Datenanalyse.  Sie haben auf Ihrem Laptop experimentiert und m√∂chten nun die Benutzer √ºberpr√ºfen.  Und einen Prototyp zu bauen, stellte sich als ziemlich schwierig heraus.  Wir sind zu dem Schluss gekommen, dass wir einen zus√§tzlichen Service ben√∂tigen, um solche Prototypen relativ schnell zusammenzusetzen - bedingt, in einer Woche oder sogar an einem Tag - und auch AB-Experimente durchzuf√ºhren. <br><br><img src="https://habrastorage.org/webt/zs/yf/kz/zsyfkzkj28m7n4gbzdgl8hmxmaq.jpeg"><br><br>  Wir haben einen solchen Dienst namens PyMLaaS erstellt.  Wie ist er?  Tats√§chlich ist dies ein vollst√§ndiges Analogon von MLaaS, √ºber das ich zuvor gesprochen habe, das jedoch in Python geschrieben wurde und auf Flask, Nginx und Gunicorn basiert.  Die Architektur ist recht einfach, genau wie die von MLaaS, aber es besteht die M√∂glichkeit, schnell einen Prototyp aus Ihren Offline-Experimenten zu untersuchen.  Dar√ºber hinaus haben wir ein solches Proxying auf Nginx-Ebene arrangiert, sodass wir unter bestimmten Bedingungen die M√∂glichkeit hatten, einen Teil der Last von MLaaS an PyMLaaS weiterzuleiten und damit zu experimentieren. <br><br><img src="https://habrastorage.org/webt/iw/n9/dm/iwn9dm9njjt7nhav5gpm1szszpc.jpeg"><br><br>  Das hei√üt, wir haben einige Parameter verschoben und m√∂chten √ºberpr√ºfen, wie sich dies auf Benutzer auswirkt.  Wir haben 5% der PyMLaaS-Last gestartet und werden sehen, was im Experiment passiert.  Schlie√ülich ist es bequem, Prototypen zu erstellen.  Ich habe einen Prototyp einer neuen Funktion erstellt, sie in PyMLaaS gesehen und Sie k√∂nnen sie sofort in der Produktion testen. <br><br>  Es hat uns so gut gefallen, dass die Idee aufkam - warum nicht die ganze Zeit nutzen?  Denn bedingt gibt es Funktionen, die eine gro√üe Last, 1000 RPS und einen gro√üen Speicherbedarf erfordern.  Ich m√∂chte eine ziemlich flexible Parallelit√§t haben.  F√ºr einige Funktionen, f√ºr einige Produkte oder Services, die keine so hohen Anforderungen an Last, Leistung, RPS usw. stellen, verwenden wir diesen Service jedoch recht erfolgreich. <br><br><img src="https://habrastorage.org/webt/6g/ss/t-/6gsst-y5wpmuipwn286nxehsd70.jpeg"><br><br>  Zusammenfassend.         ,    .   .           .    ,  - , ,  ,   -,  - .       -   PyMLaaS,  AB-,      .   ,     MLaaS,    ,       . <br><br>     pickup points ‚Äî   .           .    ,    .   30%     ,   .    . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de447186/">https://habr.com/ru/post/de447186/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de447174/index.html">Der Mythos des Personalhungers oder die Grundregeln f√ºr offene Stellen</a></li>
<li><a href="../de447178/index.html">5 effektive M√∂glichkeiten f√ºr den Einsatz von Process Mining-Technologie</a></li>
<li><a href="../de447180/index.html">√úbersicht und Vergleich von Ingress Controllern f√ºr Kubernetes</a></li>
<li><a href="../de447182/index.html">Betriebssysteme: Drei einfache Teile. Teil 3: Prozess-API (√úbersetzung)</a></li>
<li><a href="../de447184/index.html">Was ist Initial Exchange Offering (IEO) und wie unterscheidet es sich von ICO?</a></li>
<li><a href="../de447190/index.html">Vorhersagen von Mathematikern. Wir analysieren die wichtigsten Methoden zur Erkennung von Anomalien</a></li>
<li><a href="../de447192/index.html">Welche Rolle kann Technologie in der alten Kunst des Gew√ºrzmischens spielen?</a></li>
<li><a href="../de447194/index.html">Rendering-Funktionen in Metro: Exodus c Raytracing</a></li>
<li><a href="../de447196/index.html">7. Check Point Erste Schritte R80.20. Zugangskontrolle</a></li>
<li><a href="../de447198/index.html">Mondmission "Bereshit": Landungsunfall-Sturz auf den Mond</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>