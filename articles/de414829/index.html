<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ö üçé üï∑Ô∏è Mein Weg: wie ich mich weigerte, ein Noolite-Gateway zu kaufen und es durch mein Fahrrad ersetzte üì¶ üöª üçÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Diese Geschichte begann vor anderthalb Jahren, als ‚ÄûNoolite‚Äú -Lichtsteuerger√§te in meine H√§nde fielen (nun, als ich sie bekam, kaufte ich sie selbst, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mein Weg: wie ich mich weigerte, ein Noolite-Gateway zu kaufen und es durch mein Fahrrad ersetzte</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414829/"><img src="https://habrastorage.org/webt/ws/kw/xk/wskwxkd5zxzru5vksii2n16rwpi.jpeg" width="800"><br><br>  Diese Geschichte begann vor anderthalb Jahren, als ‚ÄûNoolite‚Äú -Lichtsteuerger√§te in meine H√§nde fielen (nun, als ich sie bekam, kaufte ich sie selbst, ich habe eine Schw√§che f√ºr alle Arten von interessanter Hardware).  Dann standen mir zwei Bl√∂cke der SB-Serie und der MTRF-64-Adapter zur Verf√ºgung.  Die Bl√∂cke dieser Serie haben mich dadurch angezogen, dass sie in die Hausverkabelung eingebettet werden k√∂nnen, ohne sie wesentlich zu wiederholen: Ich nahm einen Schalter heraus und steckte einen Block an seine Stelle und h√§ngte den Schalter an speziell aus dem Block entfernte Dr√§hte.  In dieser Konfiguration kann das Licht sowohl √ºber einen Funkkanal als auch gem√§√ü den Klassikern √ºber einen Schalter gesteuert werden.  Es gibt nat√ºrlich ein Minus: Die Bl√∂cke dieser Serie unterst√ºtzen kein Feedback, aber ich w√ºrde es gerne tun, denn in MTRF-64 ist es das, aber na ja.  Aber dann habe ich mich geweigert, ein Gateway zugunsten eines Adapters zu kaufen. Sein Potenzial ist gr√∂√üer als das eines Gateways. <br><a name="habracut"></a><br>  Nachdem man viel mit dem Kronleuchter geblinzelt hatte, bestand der Wunsch, alles auf einen gemeinsamen Nenner zu bringen, aber anscheinend verdunkelten andere interessante Eisenst√ºcke diesen Wunsch, weil die Bl√∂cke in eine entfernte Kiste geschickt wurden.  Sie w√§ren also dort gewesen, wenn ich sie bis vor kurzem nicht <s>genauer auf die unanst√§ndig dicke Staubschicht auf ihnen</s> geachtet h√§tte. <br><br><img src="https://habrastorage.org/webt/fh/2i/9p/fh2i9p91tww9bse_zpghssh91sy.jpeg"><br>  <i>Leistungsblock SB-1-150 und MTRF-64</i> <br><br>  Sofort tauchte in meinem Kopf ein Bild auf, auf dem ich das Licht ausschalte, bevor ich ins Bett gehe, ohne aus dem Bett zu kommen, oder das Skript ‚ÄûIch gehe‚Äú mit einem Knopfdruck verwende und alles ausschalte, was in meiner Abwesenheit ausgeschaltet werden sollte. <br><br>  Schlie√ülich wurde beschlossen, zu handeln.  Warum habe ich angefangen, mein Fahrrad zu nieten und das fertige System nicht sofort gekauft?  Nur weil ich etwas mit meinen eigenen H√§nden machen wollte.  Sie kennen dieses Gef√ºhl, wenn Sie etwas zusammenstellen, und es funktioniert.  Au√üerdem lerne ich endlich eine objektorientierte Sprache am Beispiel eines realen Projekts (ich habe Python 3 gew√§hlt). <br><br><h3>  <b>Idee</b> </h3><br>  Es ist ganz einfach - steuern Sie Lichter und Ger√§te von √ºberall im Haus.  Als Hauptsteuerger√§t w√§hlte Raspberry Pi Modell B + in Verbindung mit dem MTRF-64.  Aufgrund der mangelnden Erfahrung bei der Entwicklung solcher Anwendungen wurde beschlossen, mit etwas Einfachem zu beginnen.  Also bin ich zur Implementierung des Telegramm-Bots gekommen. <br><br><img src="https://habrastorage.org/webt/uf/yb/zs/ufybzsoaag50snrbeosyotbq9lk.jpeg" width="550"><br>  <i>Raspberry Pi B + und MTRF-64</i> <br><br>  F√ºr mich selbst habe ich beschlossen, dass zum ersten Mal die folgenden Bot-Funktionen f√ºr mich ausreichen w√ºrden: <br><br><ul><li>  Steuerung von Licht und Haushaltsger√§ten; </li><li>  Unterst√ºtzung f√ºr dimmbare Ger√§te (Licht, Haube usw.); </li><li>  Die Verteilung der Ger√§te nach Raum; </li><li>  Unterst√ºtzung f√ºr Skripte zur schnellen Verwaltung einer Gruppe von Ger√§ten; </li><li>  Benutzer hinzuf√ºgen und in Gruppen verteilen: Eigent√ºmer (k√∂nnen Ger√§te im Haus steuern, haben Zugriff auf die Einstellungen des Hauses), G√§ste (k√∂nnen Ger√§te im Haus steuern, haben keinen Zugriff auf die Einstellungen des Hauses), Abonnenten (warten, bis der Eigent√ºmer sie ins Haus einl√§dt) . </li></ul><br><h3>  <b>Installation</b> </h3><br>  Laden Sie zun√§chst das Betriebssystem f√ºr unseren Himbeerkuchen herunter.  Ich bevorzuge den Beamten f√ºr diesen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Raspbian-Schal</a> .  Es ist praktisch, ein Image mit dem Dienstprogramm Win32DiskImager auf eine CD hochzuladen. <br><br><div class="spoiler">  <b class="spoiler_title">Hier wartete ich auf einen kleinen Fang</b> <div class="spoiler_text">  Tatsache ist, dass ich es gewohnt bin, remote mit Himbeeren zu arbeiten, aber aufgrund der Tatsache, dass in neueren Versionen des Raspbian SSH-Zugriffs standardm√§√üig deaktiviert ist, musste ich <s>mich der</s> Verwendung dieses USB-UART-Adapters <s>ann√§hern</s> <br><br><img src="https://habrastorage.org/webt/8w/vo/pf/8wvopf1oe-x0e_jjeell9qznmfo.jpeg" width="300"><br></div></div><br>  1. Verbinden Sie das Ganze und melden Sie sich an: <br><br><pre><code class="bash hljs">login: pi password: raspberry</code> </pre> <br>  2. Stellen Sie zun√§chst sicher, dass Sie die neuesten Programmversionen verwenden.  Sie k√∂nnten denken: Wir haben gerade das Distributionskit heruntergeladen. Wo ist es frisch?  Aber nein ... <br><br><pre> <code class="bash hljs">sudo apt-get update sudo apt-get -y dist-upgrade</code> </pre> <br>  3. Wir installieren den Paketmanager pip3 und git: <br><br><pre> <code class="bash hljs">sudo apt-get install -y python3-pip git</code> </pre> <br>  4. Laden Sie die Bibliotheken herunter, die f√ºr die Arbeit des Bots erforderlich sind.  Ich verwende die pyTelegramBotAPI-Bibliothek, die sich um alle Nuancen des Sendens und Empfangens von HTTP-Anforderungen k√ºmmert und es mir erm√∂glicht, mich direkt auf die Logik zu konzentrieren: <br><br><pre> <code class="bash hljs">sudo pip3 install pytelegrambotapi pyserial</code> </pre> <br>  5. Laden Sie den Bot herunter: <br><br><pre> <code class="bash hljs">sudo git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/DZimasik/nooBot.git</code> </pre> <br>  Bevor Sie den Bot starten, m√ºssen Sie ihn registrieren, d. H.  Holen Sie sich seine eindeutige ID (Token).  Ein weiterer spezieller Bot wird uns dabei helfen - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">@BotFather</a> .  Senden Sie ihm <b>einfach / newbot</b> und er bittet Sie, einen Namen f√ºr unseren neuen Bot zu finden. Dieser Name wird in der Telegramm-Kontaktliste angezeigt.  Weitere BotFather-Angebote bieten einen eindeutigen Bot-Benutzernamen an.  Die einzige Einschr√§nkung ist, dass der Benutzername mit "bot" enden muss.  Der Benutzername wird unter anderem auch zur Suche nach einem Bot verwendet. <br><br>  Im Prinzip reicht dies aus, um zu beginnen.  Einige Perfektionisten hier k√∂nnen den Bot nach einem Avatar fragen oder eine Willkommensnachricht schreiben.  Nachdem alles eingegeben wurde, gibt BotFather das Token zur√ºck: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bb/0j/v_/bb0jv_84fi5o3caqqrgweyk2j6i.png" width="200"></div><br><br>  6. F√ºgen Sie das Token zur Datei config.py hinzu <br><br><pre> <code class="bash hljs">sudo nano /home/pi/nooBot/config.py</code> </pre> <br><pre> <code class="python hljs">token = <span class="hljs-string"><span class="hljs-string">'_'</span></span> <span class="hljs-comment"><span class="hljs-comment"># Insert your token from BotFather</span></span></code> </pre> <br>  7. Schlie√ülich k√∂nnen Sie den Bot starten: <br><br><pre> <code class="bash hljs">sudo python3 /home/pi/nooBot/noobot.py</code> </pre> <br>  Senden Sie an unseren Bot <b>/ Start</b> .  Wenn der Token korrekt eingegeben wurde, wird die Tastatur angezeigt und es wird eine Meldung angezeigt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/na/2u/8i/na2u8igmpwxb5bxnnqy6t9w2wze.png" width="200"></div><br><h3>  <b>Planen Sie f√ºr die Zukunft</b> </h3><br>  Zu diesem Zeitpunkt steuere ich das Licht im Schlafzimmer und im Flur, aber in Zukunft plane ich, mehr Netzteile zu kaufen (diesmal mit R√ºckmeldung) und meine gesamte Beleuchtung auf Fernbedienung umzustellen.  Es ist auch geplant, dem Bot Feedback-Unterst√ºtzung hinzuzuf√ºgen, damit der Status der Ger√§te und die Parameter der Sensoren im Haus au√üerhalb des Bots ermittelt werden k√∂nnen. <br><br>  Das ist alles f√ºr jetzt.  Ich w√ºrde mich freuen, Ihre Meinung zu h√∂ren.  Gut zu allen! <br><br>  N√ºtzliche Links: <br><br><ul><li>  <a href="">Github-Repository</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Telegramm-Bot-API</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MTRF-64</a> und seine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">API</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de414829/">https://habr.com/ru/post/de414829/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de414817/index.html">Cyber-Oma oder wie wir einen Tag gehackt haben</a></li>
<li><a href="../de414819/index.html">Willkommen zum Unreal Engine 4 Meetup an diesem Samstag in St. Petersburg</a></li>
<li><a href="../de414821/index.html">Praktischer Videokurs der School of Information Security</a></li>
<li><a href="../de414825/index.html">Die einzigen Gef√ºhle, die ich f√ºhlen kann, sind Wut und Angst</a></li>
<li><a href="../de414827/index.html">Bis 2050 werden 50% der weltweiten Energieerzeugung aus erneuerbaren Quellen stammen.</a></li>
<li><a href="../de414831/index.html">Verteiltes Data Warehouse im Data Lake-Konzept: CDH installieren</a></li>
<li><a href="../de414833/index.html">Fintech Digest: PayPal kauft Hyperwallet f√ºr 400 Millionen US-Dollar, Samsung startet Blockchain-Projekt</a></li>
<li><a href="../de414835/index.html">Atmosph√§rische Schauer f√ºhren zum Ausfall von Supercomputern: Was kann man dagegen tun?</a></li>
<li><a href="../de414837/index.html">Zugriff auf den Webserver nur √ºber CloudFlare (iptables) zulassen</a></li>
<li><a href="../de414839/index.html">Wird die Fabrikproduktion von Wohnmodulen dazu beitragen, den Wohnungsmangel zu beheben?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>