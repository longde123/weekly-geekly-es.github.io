<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé• üçÅ ü§æüèΩ Geoservicios web. Resumen de soluciones modernas üì® üà≤ üßúüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como parte de casi cualquier producto en l√≠nea, puede cumplir con una tarea que requiere el uso de un servicio particular relacionado con mapas, geoco...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Geoservicios web. Resumen de soluciones modernas</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462011/"><img src="https://habrastorage.org/webt/0u/8u/jn/0u8ujnh7xzhzt6m8mp2ed630fei.jpeg"><br><br>  Como parte de casi cualquier producto en l√≠nea, puede cumplir con una tarea que requiere el uso de un servicio particular relacionado con mapas, geocodificaci√≥n, geo-posicionamiento.  Personalmente, he estado trabajando en un cat√°logo de bienes ra√≠ces en l√≠nea durante casi 10 a√±os, y como parte de una serie de otros proyectos, tengo experiencia en el uso de funciones espec√≠ficas de diversos servicios geogr√°ficos en l√≠nea. <br><br>  En este art√≠culo, examinar√© las tareas geogr√°ficas que los programadores enfrentan con mayor frecuencia, har√© una breve revisi√≥n de los servicios que ofrecen soluciones para estos problemas y compartir√© mi experiencia al usar estos servicios. <br><br>  Tambi√©n cuento con la participaci√≥n de comentaristas: si observa en la revisi√≥n una inexactitud en la descripci√≥n, la falta de su buen servicio o simplemente tiene algo que agregar a lo que ya escribi√≥, escriba en los comentarios, recolectar√© todo en el texto principal para que siempre tenga una buena lista de herramientas disponibles para el futuro para todas las ocasiones <br><a name="habracut"></a><br><h2>  Tabla de contenidos </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mostrar mapas en el sitio</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Geocodificaci√≥n directa e inversa</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Analizar y autocompletar direcciones</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Busque organizaciones</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ubicaci√≥n del usuario</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Construyendo rutas</a> </li></ul><br><a name="sitemaps"></a><br><h2>  Mostrar mapas en el sitio </h2><br>  Una tarea muy popular es mostrar mapas en l√≠nea en un sitio.  Por ejemplo, para mostrar exactamente en qu√© parte del mapa se encuentra su oficina.  O donde puede recoger lo que vende el autor del anuncio. <br><br>  Para mostrar mapas, se utilizan dos tipos principales de API: <br><br><ul><li>  API de Javascript (interactiva) </li><li>  API est√°tica (est√°tica) </li></ul><br><h3>  API Javascript </h3><br>  Todos los servicios que desarroll√© funcionan principalmente con Rusia, por lo que hablar√© sobre las API que utilic√© yo mismo y que son populares entre nosotros.  S√© que Bing y otros proveedores de mapas tienen API, pero no los utilic√©. <br><br>  La API de Javascript le permite mostrar un mapa interactivo en el sitio con la capacidad de hacer zoom, mostrar marcadores, interactuar con el mapa (arrastrar marcadores, mostrar informaci√≥n sobre herramientas, etc.). <br><br><h4>  Javascript API Yandex.Maps </h4><br><ul><li>  Buenos mapas de Rusia </li><li>  Si bien es gratuito, no incluye algunas caracter√≠sticas </li><li>  Amplias oportunidades: agrupaci√≥n de etiquetas, etc. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tech.yandex.ru/maps/jsapi/doc/2.1/quick-start/index-docpage</a> </li></ul><br><h4>  Javascript API Google Maps </h4><br><ul><li>  Buenos mapas de todo el mundo </li><li>  Por caracter√≠sticas a nivel Yandex </li><li>  Pagado - desde $ 7 por 1000 llamadas </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">developers.google.com/maps/documentation/javascript/tutorial</a> </li></ul><br><h4>  API 2GIS </h4><br><ul><li>  Muy buenas cartas, pero no en todas partes. </li><li>  Adi√≥s gratis </li><li>  La funcionalidad de la API es m√°s d√©bil que Yandex / Google, pero se puede ampliar utilizando m√≥dulos de folleto </li><li>  Pero hay mapas de piso para centros comerciales. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">api.2gis.ru/doc/maps/ru/quickstart</a> </li></ul><br><h4>  Mapas de Azure </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">azure.microsoft.com/en-us/services/azure-maps</a> </li><li>  Una gran cantidad de servicios, incluido un creador de rutas, que determina la ubicaci√≥n por IP </li><li>  Hay l√≠mites gratuitos y una API paga </li></ul><br><h4>  Mapbox </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">docs.mapbox.com/api/maps</a> </li><li>  Lindas tarjetas para web y m√≥vil. </li><li>  Puedo estar equivocado, pero las cartas parecen estar solo en ingl√©s </li><li>  Para aplicaciones m√≥viles, gratis hasta 25,000 usuarios por mes, en la web hasta 50,000 descargas por mes </li></ul><br><br><h3>  API est√°tica </h3><br>  La API est√°tica se puede usar donde necesita mostrar solo una imagen de mapa, sin interactividad.  Por ejemplo, desea adjuntar un mapa a un correo electr√≥nico o permitir que el usuario le imprima instrucciones.  Bueno, o su dise√±ador dibuj√≥ un dise√±o en el que se usa un mapa en lugar del fondo: cargar tarjetas JS completas para tal tarea parece redundante.  Adem√°s, una imagen est√°tica se puede usar como una vista previa para acelerar la carga de una p√°gina por parte del usuario, y al hacerla interactiva. <br><br><h4>  API est√°tica Yandex.Maps </h4><br><ul><li>  Tama√±o m√°ximo 650x450 p√≠xeles </li><li>  Adi√≥s gratis </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tech.yandex.ru/maps/staticapi/doc/1.x/dg/concepts/input_params-docpage</a> </li></ul><br><h4>  API est√°tica Google maps </h4><br><ul><li>  $ 2 por mil solicitudes </li><li>  El tama√±o m√°ximo es 640x640 para la tarifa base y 2048x2048 para la prima ($ 200 por mes) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">developers.google.com/maps/documentation/maps-static/intro</a> </li></ul><br><h4>  API est√°tica 2GIS </h4><br><ul><li>  Por alguna raz√≥n, el sitio aparece como "obsoleto" </li><li>  Adi√≥s gratis </li><li>  Tama√±o m√°ximo 1280x1280 </li><li>  No hay en todas partes </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">api.2gis.ru/doc/maps/1.0/static</a> </li></ul><br><h4>  Mapbox </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">docs.mapbox.com/api/maps</a> </li><li>  Puedo estar equivocado, pero las cartas parecen estar solo en ingl√©s </li><li>  Tama√±o m√°ximo 1280x1280 </li><li>  Gratis hasta 25,000 descargas de mapas por mes </li></ul><br><a name="geocoding"></a><br><h2>  Geocodificaci√≥n </h2><br>  La geocodificaci√≥n es un proceso que le permite encontrar las coordenadas de un objeto en su direcci√≥n.  Bueno, o geocodificaci√≥n inversa: descubra por coordenadas qu√© tipo de geoobjeto se encuentra all√≠.  De hecho, todos los servicios de geocodificaci√≥n funcionan con direcciones ingresadas en un formato arbitrario, al mismo tiempo que las llevan a su est√°ndar.  Por el momento no he encontrado ning√∫n servicio de geocodificaci√≥n completamente gratuito en el mercado. <br><br>  Las aplicaciones t√≠picas de la geocodificaci√≥n son mostrar la direcci√≥n ingresada por el usuario en el mapa, o viceversa (al rev√©s): el usuario coloca una marca en el mapa, debe convertirse en una direcci√≥n. <br><br><h3>  Geocoder Yandex.Map </h3><br><ul><li>  Hay una tarifa gratuita limitada a 25,000 solicitudes por d√≠a. </li><li>  Adem√°s del n√∫mero de solicitudes, tambi√©n est√° limitado por el acuerdo de licencia: los resultados de la codificaci√≥n no se pueden guardar y usar sin una tarjeta (pero se pueden almacenar en cach√©), deben mostrarse solo en los mapas de Yandex y solo en el marco de los servicios p√∫blicos (accesibles para todos o con registro abierto gratuito). </li><li>  Funciona muy bien en Rusia, tanto directa como inversa. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tech.yandex.ru/maps/geocoder</a> </li></ul><br><h3>  Consejos de DaData </h3><br><ul><li>  DaData tiene un servicio de "pistas" que le permite implementar el autocompletado de las direcciones ingresadas por el usuario. </li><li>  Incluye las funciones de un geocodificador (puede proporcionar coordenadas por direcci√≥n y direcci√≥n por coordenadas). </li><li>  Funciona solo en Rusia, el revestimiento es pobre: ‚Äã‚Äãen millonarios al nivel del 75-95%, en promedio en Rusia alrededor del 50% </li><li>  10,000 solicitudes por d√≠a son gratuitas, pero la oferta no permite que se use completamente en modo autom√°tico; para la geocodificaci√≥n autom√°tica, debe usar el servicio de estandarizaci√≥n. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dadata.ru/api/suggest/address</a> </li></ul><br><h3>  API de geocodificaci√≥n de Google Maps </h3><br><ul><li>  $ 5 por 1000 solicitudes. </li><li>  No lo us√©, porque hay an√°logos gratuitos de Yandex y dadata </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">developers.google.com/maps/documentation/geocoding/intro</a> </li></ul><br><br><h3>  Graphhopper </h3><br><ul><li>  Gratis hasta 500 consultas por d√≠a. </li><li>  Muchas otras caracter√≠sticas interesantes. </li><li>  Funciona con OpenStreetMaps </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.graphhopper.com/developers</a> </li></ul><br><h4>  Mapbox </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">docs.mapbox.com/api/search</a> </li><li>  La base d√©bil de las calles en Rusia, al menos en Kaz√°n, las calles en las que pruebo, no pudieron encontrar </li><li>  Gratis hasta 100,000 solicitudes por mes </li></ul><br><h3>  OpenStreetMaps Nominatim </h3><br><ul><li>  Soluci√≥n OpenSource que puede implementar en su propio servidor. </li><li>  No utilizado, tal vez en los comentarios alguien escriba sobre su experiencia usando </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nominatim.org/release-docs/develop/api/Overview</a> </li></ul><br><h3>  2GIS </h3><br><ul><li>  La documentaci√≥n para la API de Javascript declar√≥ la existencia de funciones de geocodificaci√≥n, pero de hecho no encontr√© c√≥mo usarlas en la documentaci√≥n.  Quiz√°s mientras est√° en desarrollo. </li></ul><br><img src="https://habrastorage.org/webt/zf/vt/-4/zfvt-4myl-bujpmdet-49-br-h0.png"><br><a name="parsing"></a><br><h2>  Analizar y autocompletar direcciones </h2><br>  A veces es necesario dejar que el usuario ingrese una direcci√≥n en un formato aleatorio y luego convertir esta direcci√≥n en datos estructurados, por separado el nombre del pa√≠s, regi√≥n, ciudad, calle y n√∫mero de casa.  Esto es necesario para todos los servicios que funcionan con bienes ra√≠ces, es necesario determinar direcciones duplicadas, completar recibos de correo, etc. <br><br>  En principio, todos los servicios de geocodificaci√≥n de la lista anterior hacen frente a esta tarea sin problemas.  Con la geocodificaci√≥n directa, adem√°s de las coordenadas, tambi√©n devuelven informaci√≥n estructurada sobre el geoobjeto encontrado. <br><br>  Por separado, vale la pena se√±alar el servicio de "estandarizaci√≥n" de DaData: a las direcciones de Rusia devuelven mucha informaci√≥n √∫til diferente, 10 kopeks por cada direcci√≥n: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dadata.ru/api/clean/address</a> <br><br>  Adem√°s, tambi√©n me refiero a esta secci√≥n sobre las tareas de encontrar informaci√≥n adicional sobre la direcci√≥n.  En particular, esta determinaci√≥n de a qu√© distrito de la ciudad pertenece la direcci√≥n especificada y la b√∫squeda de las estaciones de metro m√°s cercanas son tareas importantes si buscamos anuncios por direcci√≥n. <br><br><h3>  Definici√≥n del √°rea dentro de la ciudad. </h3><br>  Por el momento, he encontrado dos soluciones para determinar el √°rea dentro de la ciudad.  Ambos funcionan solo para Rusia. <br><br>  El primero y m√°s obvio es DaData.  Mucho se ha escrito sobre este servicio, es realmente un buen servicio para trabajar con direcciones rusas (y esto no es un anuncio).  Pru√©balo t√∫ mismo, aseg√∫rate. <br><br>  Si no desea depender de un servicio de terceros, hay otra soluci√≥n que he aplicado y que sigo aplicando hasta ahora.  Esta es la definici√≥n del distrito por el c√≥digo de <abbr title="Clasificaci√≥n de objetos de divisi√≥n administrativa-territorial en toda Rusia">las</abbr> direcciones <abbr title="Clasificaci√≥n de objetos de divisi√≥n administrativa-territorial en toda Rusia">OKATO</abbr> .  Cada direcci√≥n dentro de Rusia tiene su propio c√≥digo OKATO: 11 d√≠gitos.  De estos, los primeros 5-8, dependiendo de la ciudad, indican claramente el √°rea. <br><br>  Para esas ciudades que necesito, simplemente compil√© una base de datos de c√≥digos OKATO para los distritos, obtuve algo como esta matriz: <br><br><div class="spoiler">  <b class="spoiler_title">Ejemplo de c√≥digos OKATO</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/gl/vz/fk/glvzfkojdmgvtmmkbbzs1u4pydc.png"><br></div></div><br>  La siguiente pregunta es c√≥mo averiguar el c√≥digo de direcci√≥n de OKATO.  DaData lo devuelve como parte de sus servicios de Consejos y Normalizaci√≥n.  Hay un sitio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">okato-oktmo.rf</a> que en la direcci√≥n muestra el c√≥digo OKATO usando el mismo dadat.  Nuestra tarea es encontrar independientemente el c√≥digo OKATO en la direcci√≥n, independientemente de cualquier servicio. <br><br>  Para hacer esto, necesitamos descargar la √∫ltima <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">base de datos FIAS</a> y configurar una b√∫squeda en ella.  Ya hay un art√≠culo en el concentrador con un ejemplo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">c√≥mo importar la base de datos FIAS en MSSQL</a> .  En general, configura la b√∫squeda por FIASU, encuentra la direcci√≥n que necesita all√≠, encuentra su c√≥digo OKATO, por el c√≥digo OKATO de las listas de distritos que conoce el distrito, eso es, el problema est√° resuelto. <br><br>  Si no desea tomar un ba√±o de vapor con la descarga de 60 gigabytes de archivos XML a su base de datos, existe un servicio m√°s barato, pero tambi√©n menos funcional que el servicio de datos que le permite trabajar con la base de datos FIAS: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">kladr-api.ru/docs</a> <br><br><h3>  Busca estaciones de metro cercanas </h3><br>  Una funci√≥n necesaria, especialmente para los residentes de Mosc√∫, cuando necesita encontrar las estaciones de metro m√°s cercanas en la direcci√≥n.  Para esta tarea en este momento conozco dos soluciones: <br><br><h4>  Yandex Geocoder </h4><br>  Primero necesitas encontrar las coordenadas de la direcci√≥n.  Luego, como en la geocodificaci√≥n inversa, pasamos estas coordenadas como par√°metros de solicitud y el tipo del top√≥nimo devuelto kind = metro. <br>  Un par√°metro separado establece el tama√±o del √°rea dentro de la cual es necesario buscar la estaci√≥n m√°s cercana.  Emp√≠ricamente, seleccion√© valores de 0.02 a 0.05 grados dependiendo de la ciudad (en Mosc√∫, un radio de 2 kil√≥metros desde el metro todav√≠a se considera distancia a pie, y en Kaz√°n la distancia entre estaciones es de 1.5 kil√≥metros). <br><br>  Tambi√©n hay un problema con este m√©todo, que a veces el metro m√°s cercano en coordenadas no siempre es el m√°s cercano (por ejemplo, est√° al otro lado del r√≠o, o algo as√≠).  Solo puede determinar el metro m√°s cercano por accesibilidad utilizando los servicios de construcci√≥n de rutas y matrices de distancia, que se discutir√°n en el art√≠culo a continuaci√≥n.  Para una determinaci√≥n aproximada de la estaci√≥n m√°s cercana, el geocodificador Yandex es bastante adecuado y le permite realizar hasta 25,000 solicitudes por d√≠a de forma gratuita. <br><br><h4>  DaData </h4><br>  S√≠, y DaData puede ayudar en esta tarea: dentro de las tarifas pagadas del servicio "r√°pido" o de "estandarizaci√≥n", las 3 estaciones de metro m√°s cercanas y las distancias a ellas tambi√©n se devuelven a cada direcci√≥n. <br><a name="places"></a><br><h2>  Busque organizaciones </h2><br>  Una tarea com√∫n si desea mostrar a sus clientes alg√∫n tipo de organizaci√≥n en su ciudad.  Por ejemplo, vende productos con entrega y desea mostrarle a una persona todos los puntos de entrega de alg√∫n servicio en su ciudad.  O puede hacer dise√±os para imprimir y mostrar al usuario en el mapa todas las imprentas donde puede ir a imprimir su dise√±o. <br><br><h3>  Yandex b√∫squeda por organizaci√≥n </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tech.yandex.ru/maps/geosearch</a> </li><li>  Hasta 500 consultas por d√≠a son gratuitas, siempre que los resultados se muestren en un mapa p√∫blico. </li><li>  Los resultados de b√∫squeda no se pueden guardar ni mostrar en mapas que no sean Yandex. </li></ul><br><h3>  Google lugares api </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">developers.google.com/places/web-service/usage-and-billing</a> </li><li>  Un sistema de aranceles muy complicado, no lo entend√≠ completamente.  Quiz√°s alguien que us√≥ escriba los comentarios. </li><li>  Seg√∫n tengo entendido, las consultas b√°sicas son gratuitas, pero todas ext.  La informaci√≥n (contactos, comentarios, ...) se cobra por separado. </li></ul><br><h3>  2GIS </h3><br>  Se rumorea que tienen una API privada pagada para buscar organizaciones.  Todav√≠a no he logrado acceder a √©l, y hay bastante b√∫squeda de organizaciones de Yandex para nuestras tareas. <br><a name="users"></a><br><h2>  Ubicaci√≥n del usuario por IP </h2><br>  Una tarea com√∫n en la web es comprender desde qu√© ciudad lleg√≥ un visitante a su sitio.  Existen soluciones para esta tarea en forma de servicios en l√≠nea o soluciones independientes para aquellos que no desean depender de servicios de terceros. <br><br>  Servicio en l√≠nea para determinar la ciudad por IP: aqu√≠ puedo aconsejar (para Rusia) DaData nuevamente: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dadata.ru/api/detect_address_by_ip</a> <br>  El l√≠mite es de 10,000 solicitudes por d√≠a.  Si su asistencia excede las 10,000 entradas √∫nicas por d√≠a, tiene sentido considerar las soluciones que est√°n instaladas en su servidor.  Puede leer m√°s sobre ellos en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la revisi√≥n de DaData sobre</a> c√≥mo eligieron qu√© usar. <br><br>  Duplicar√© brevemente la informaci√≥n: <br>  <b>IpGeoBase</b> : sol√≠a ser un buen sitio que se actualizaba diariamente y proporcionaba una base de datos de direcciones IP y sus respectivas ciudades en un formato comprensible legible por m√°quina que se importa f√°cilmente a cualquier base de datos.  Desafortunadamente, dej√≥ de actualizarse en 2017. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ipgeobase.ru</a> <br><br>  <b>SypexGeo</b> : todav√≠a se est√° actualizando, viene en forma de script php y una base de datos para este en su propio formato.  Funciona r√°pido, determina bien <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sypexgeo.net/en/download</a> <br><br>  <b>MaxMind</b> ofrece descargar bases de datos gratuitas con precisi√≥n reducida y una API separada para ellas en varios lenguajes de programaci√≥n.  Las bases de datos m√°s precisas est√°n disponibles como parte de los productos pagos. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dev.maxmind.com/geoip/geoip2/geolite2</a> <br><br><h2>  Determinar la ubicaci√≥n del usuario por coordenadas </h2><br>  La tarea es similar a la tarea de geocodificaci√≥n inversa, con ligeras diferencias. <br><br>  A veces necesitamos determinar la ubicaci√≥n del usuario cuando conocemos sus coordenadas exactamente (por ejemplo, las obtuvimos utilizando los sensores GPS del dispositivo o la API de geolocalizaci√≥n en el navegador).  Hay dos opciones: la geocodificaci√≥n inversa devuelve el nombre del lugar donde se encuentra el usuario.  Pero, ¬øqu√© sucede si el usuario est√° en alg√∫n lugar de la carretera entre las ciudades, o en los suburbios o simplemente en un campo limpio y quiere ver anuncios de venta de terrenos en este campo?  No siempre el geocodificador inverso har√° frente a esto. <br><br>  En este caso, personalmente hago esto: tengo en mi base de datos todas las coordenadas de las ciudades rusas en las que tenemos anuncios y con las que generalmente trabajamos.  Y de acuerdo con las coordenadas del usuario, simplemente determino la ciudad m√°s cercana a √©l de nuestra base de datos, con una simple solicitud: <br><br><pre><code class="sql hljs">ORDER BY (|lng - :lng| + |lat - :lat|) ASC LIMIT 1</code> </pre> <br><a name="directions"></a><br><h2>  Construcci√≥n de la ruta </h2><br>  A veces necesitas construir una ruta de un punto a otro.  Por ejemplo, cree un mapa de ubicaci√≥n desde la ubicaci√≥n del usuario hasta su oficina.  Existen soluciones pagas de Yandex y de Google: su principal diferencia es que Yandex vende una suscripci√≥n con un pago anual, y Google cobra las solicitudes por pieza y deduce dinero de la tarjeta una vez al mes durante el mes. <br>  Google tambi√©n tiene una suscripci√≥n premium, que ofrece algunas funciones adicionales (por ejemplo, aumentar el tama√±o m√°ximo de la imagen de API est√°tica) y un dep√≥sito en los l√≠mites.  Tambi√©n hay una soluci√≥n de 2GIS: la m√°s cara en t√©rminos de 1 ruta construida. <br><br>  Las tareas de construcci√≥n de rutas se dividen en varias subtareas: <br><ol><li>  Construir una ruta de punto a punto es comprensible </li><li>  La matriz de distancias: un servicio que le permite construir una matriz de distancias y tiempo en tr√°nsito entre un conjunto de puntos de partida y llegada.  Por ejemplo, si necesita calcular las rutas √≥ptimas para varios correos que necesitan entregar productos de diferentes almacenes a diferentes clientes.  ¬øO ofrece servicios de limpieza y necesita saber qu√© limpiador ser√° m√°s conveniente desde su hogar para llegar a cada uno de los pedidos de hoy y hacer un esquema √≥ptimo para mover los limpiadores? </li><li>  API de Isochrone: construya alrededor de un √°rea de puntos, que se puede alcanzar al mismo tiempo.  Por ejemplo, "encuentre todos los caf√©s a 15 minutos a pie desde la posici√≥n del usuario". </li></ol><br>  Diferentes proveedores ofrecen diferentes soluciones para todas estas tareas. <br><br>  Gracias a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">3aiats</a> , se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">encontr√≥</a> una soluci√≥n gratuita de c√≥digo abierto: <br><h3>  Graphhopper </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.graphhopper.com/open-source</a> </li><li>  Se instala en su servidor, usa OpenStreetMap para construir rutas, se ejecuta en Java </li><li>  Existe una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">API gratuita y de pago</a> para aquellos que no desean instalar este software en su servidor. </li><li>  Hay una API para geocodificar, construir rutas, construir matrices de distancia y optimizar rutas, as√≠ como isocrona </li></ul><br><br><h3>  MapBox (gracias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">ne_kotin</a> ) </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">docs.mapbox.com/api/navigation</a> </li><li>  Hay una API para geocodificar, construir rutas, construir matrices de distancia y optimizar rutas. </li><li>  Gratis hasta 100,000 solicitudes por mes </li></ul><br><br><h3>  Yandex </h3><br>  Una caracter√≠stica com√∫n de todos los servicios de Yandex para rutas es que operan en Rusia, Abjasia, Azerbaiy√°n, Armenia, Bielorrusia, Georgia, Kazajst√°n, Kirguist√°n, Moldavia, Tayikist√°n, Turqu√≠a, Uzbekist√°n y Ucrania. <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tech.yandex.ru/routing/router</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tech.yandex.ru/routing/distance_matrix</a> </li><li>  Tasas de 120,000 rublos por a√±o </li><li>  Hay una API para construir rutas y matrices de distancia </li><li>  Incluye atascos de tr√°fico, incluidos los previstos para un momento dado en el futuro </li><li>  Capaz de construir rutas a pie, en transporte p√∫blico y personal. </li></ul><br>  Existe un servicio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">app.swizz.ru</a> que utiliza la API de Yandex para crear rutas.  El servicio no tiene su propia API y est√° experimentando problemas con los l√≠mites de Yandex, pero en esencia all√≠ puede ver c√≥mo funciona el generador de rutas Yandex.  Gracias por el enlace <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">3aiats</a> <br><br><h3>  Google </h3><br>  La principal diferencia con Yandex es el precio de pago por uso, es decir, para cada solicitud.  Para vol√∫menes peque√±os, las tarifas ser√°n m√°s rentables con Google, para grandes, con Yandex. <br>  Adem√°s, Google no tiene restricciones en los pa√≠ses donde construyen rutas. <br><br><h4>  API de direcciones de Google </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">developers.google.com/maps/documentation/directions/intro</a> </li><li>  La tarifa es de $ 5 o $ 10 por 1000 solicitudes.  10 - si se utiliza la optimizaci√≥n teniendo en cuenta los embotellamientos y los puntos intermedios.  5 - si solo es una ruta entre 2 puntos. </li><li>  Por funciones, un an√°logo del servicio Yandex para construir rutas entre 2 puntos, pero tiene m√°s configuraciones </li><li>  En particular, puede ofrecer varias rutas alternativas </li></ul><br><br><h4>  API de matriz de distancia de Google </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">developers.google.com/maps/documentation/distance-matrix/start</a> </li><li>  Tarifa 5 $ o 10 $ por 1000 solicitudes, similar a las instrucciones </li><li>  API de matriz de distancia regular </li></ul><br><br><h4>  API de Google Roads </h4><br>  Un servicio √∫nico de Google que le permite trabajar con las carreteras por las que viaja su veh√≠culo. <br>  Vincula autom√°ticamente los puntos de su ruta a las carreteras, muestra el mejor patr√≥n de tr√°fico y toda la informaci√≥n sobre los tramos de carreteras que encuentra en el camino. <br>  Sabe c√≥mo vincular las secciones de carretera m√°s cercanas a los puntos (por ejemplo, en una pista GPS que salta de un lado a otro para mostrar qu√© caminos se cruz√≥ realmente la ruta). <br>  Capaz de mostrar l√≠mites de velocidad en las carreteras de la ruta. <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">developers.google.com/maps/documentation/roads/intro</a> </li><li>  Tarifa de $ 10 para carreteras y $ 20 para 1000 solicitudes de l√≠mite de velocidad </li></ul><br><br><h3>  WikiRoutes </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">wikiroutes.info/developers</a> </li><li>  Construir rutas utilizando el transporte p√∫blico. </li><li>  Hay una API paga para integrarse con el sitio </li></ul><br><br><h3>  Mapas de Azure </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">azure.microsoft.com/en-us/services/azure-maps</a> </li><li>  Una gran cantidad de servicios, incluido un creador de rutas </li><li>  Hay l√≠mites gratuitos y una API paga </li></ul><br><br><h3>  2Gis Logistics </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">logistics.2gis.ru</a> </li><li>  Servicio de construcci√≥n de rutas. </li><li>  5 rutas por d√≠a por 3,500 rublos por mes, listo para discutir un aumento de l√≠mite </li><li>  Por algo de dinero, hay un seguimiento del movimiento de mensajer√≠a y otras funciones adicionales </li></ul><br><br><h3>  Servicios para optimizar la log√≠stica. </h3><br>  Como una clase separada de servicios para la construcci√≥n de rutas, vale la pena destacar las soluciones preparadas para optimizar la log√≠stica, que se cobran en funci√≥n del n√∫mero de correos / veh√≠culos en la l√≠nea.  De hecho, combinan herramientas de construcci√≥n de rutas y otros servicios para optimizar su log√≠stica tanto como sea posible.  Estas son soluciones bastante complejas y de nicho, por lo que las combin√© en una lista. <br>  Gracias por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">agregar a la</a> lista <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">3aiats</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tech.yandex.ru/routing/vrp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">zig-zag.org</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">quickrun.ru</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">maxoptra.ru</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.antor.ru</a> </li></ul><br><br><h2>  Conclusi√≥n </h2><br>  En el mundo actual, puede encontrar un servicio listo para pr√°cticamente cualquier tarea que necesite resolver, o resolverlo utilizando una combinaci√≥n de servicios de la lista anterior.  La √∫nica pregunta es el costo de esta soluci√≥n, cu√°nto ser√° beneficioso para usted. <br><br>  Muchos servicios, a medida que crece su popularidad, cambian a sistemas de monetizaci√≥n cada vez m√°s estrictos, al igual que los mapas de Google, que alguna vez fueron gratuitos, se pagaron por completo, por lo que Yandex se est√° moviendo gradualmente hacia esto. <br><br>  Hay OpenStreetMaps abiertos, que parecen hacer que resuelva todos los problemas de la lista, pero para esto necesita implementarlos usted mismo y, adem√°s de su proyecto, mantener por separado una infraestructura completa para mapas, en la medida en que sea necesario, todos deciden por s√≠ mismos. <br><br>  Probablemente, en la revisi√≥n no indiqu√© algunos servicios excelentes que usa, o us√≥ los servicios de la revisi√≥n y tiene algo que agregar a lo que ya se ha escrito; escriba en los comentarios, lo agregar√© al texto. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/462011/">https://habr.com/ru/post/462011/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461999/index.html">Otra versi√≥n del entorno de desarrollo de WordPress (docker, wp-cli)</a></li>
<li><a href="../462003/index.html">C√≥mo publiqu√© PWA en Svelte en Google Play</a></li>
<li><a href="../462005/index.html">Caracter√≠sticas de Google PageSpeed: calificaci√≥n mejorada del sitio y ranking de b√∫squeda</a></li>
<li><a href="../462007/index.html">Desarrollando scripts robustos de Python</a></li>
<li><a href="../462009/index.html">Tendencias de programaci√≥n: ¬øqu√© se puede esperar en 2020?</a></li>
<li><a href="../462013/index.html">Historial de problemas de migraci√≥n de Docker Storage (Docker root)</a></li>
<li><a href="../462015/index.html">Universo de informes de SAP</a></li>
<li><a href="../462021/index.html">C√≥mo dejar de hacer lo mismo</a></li>
<li><a href="../462023/index.html">Cascadeur: el futuro de la animaci√≥n del juego</a></li>
<li><a href="../462025/index.html">Modelo de datos de red relacional</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>