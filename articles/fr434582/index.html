<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüé® ‚ùå üë∏üèæ Solutions architecturales pour un jeu mobile. Partie 1: Mod√®le ‚úùÔ∏è üê° ü§¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="√âpigraphe: 
 - Comment vais-je √©valuer si vous ne savez pas quoi faire? 
 - Eh bien, il y aura des √©crans et des boutons. 
 - Dima, tu viens de d√©crir...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Solutions architecturales pour un jeu mobile. Partie 1: Mod√®le</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434582/">  <i>√âpigraphe:</i> <i><br></i>  <i>- Comment vais-je √©valuer si vous ne savez pas quoi faire?</i> <i><br></i>  <i>- Eh bien, il y aura des √©crans et des boutons.</i> <i><br></i>  <i>- Dima, tu viens de d√©crire ma vie enti√®re en trois mots!</i> <i><br></i>  <i>(c) Un vrai dialogue lors d'un rassemblement dans une entreprise de jeux</i> <br><br><img src="https://habrastorage.org/webt/zp/ab/js/zpabjszvfb5gcancgd76i5trlz8.jpeg"><br><br>  L'ensemble des besoins et les solutions qui y r√©pondent, dont je parlerai dans cet article, s'est form√© lors de ma participation √† une dizaine de grands projets, d'abord sur Flash puis sur Unity.  Le plus grand des projets comptait plus de 200 000 DAU et a compl√©t√© ma tirelire avec de nouveaux d√©fis originaux.  En revanche, la pertinence et la n√©cessit√© des r√©sultats ant√©rieurs ont √©t√© confirm√©es. <br><br>  Dans notre dure r√©alit√©, tous ceux qui ont au moins une fois con√ßu un grand projet au moins dans leurs pens√©es ont leurs propres id√©es sur la fa√ßon de le faire et sont souvent pr√™ts √† d√©fendre leurs id√©es jusqu'√† la derni√®re goutte de sang.  Pour d'autres, cela me fait sourire, et la direction consid√®re souvent tout cela comme une √©norme bo√Æte noire, qui ne repose sur personne.  Mais que se passe-t-il si je vous dis que les bonnes solutions aideront √† r√©duire la cr√©ation de nouvelles fonctionnalit√©s de 2-3 fois, la recherche d'erreurs dans les anciens 5 √† 10 fois et vous permettront de faire de nombreuses choses nouvelles et importantes qui n'√©taient pas disponibles du tout auparavant?  Il suffit de laisser entrer l'architecture dans votre c≈ìur! <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Solutions architecturales pour un jeu mobile.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2: commande et leurs files d'attente</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Solutions architecturales pour un jeu mobile.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3: Vue sur la pouss√©e du jet</a> <br><a name="habracut"></a><br><br><h2>  Mod√®le </h2><br><h3>  Acc√®s aux champs </h3><br>  La plupart des programmeurs reconnaissent l'importance d'utiliser quelque chose comme MVC.  Peu de gens utilisent le MVC pur du livre d'un gang de quatre, mais toutes les d√©cisions des bureaux normaux sont en quelque sorte similaires √† ce mod√®le dans l'esprit.  Aujourd'hui, nous allons parler de la premi√®re des lettres de cette abr√©viation.  Parce qu'une grande partie du travail des programmeurs dans un jeu mobile concerne les nouvelles fonctionnalit√©s du m√©ta-jeu, impl√©ment√©es sous forme de manipulations avec le mod√®le, et vissant des milliers d'interfaces dans ces fonctionnalit√©s.  Et la commodit√© du mod√®le joue un r√¥le cl√© dans cette le√ßon. <br><br>  Je ne fournis pas le code complet, car c'est un petit dofig, et en g√©n√©ral ce n'est pas √† propos de lui.  J'illustrerai mon raisonnement par un exemple simple: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayerModel</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> money; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> InventoryModel inventory; <span class="hljs-comment"><span class="hljs-comment">/* Using */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SomeTestChanges</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ money = <span class="hljs-number"><span class="hljs-number">10</span></span>; inventory.capacity++; } }</code> </pre> <br>  Cette option ne nous convient pas du tout, car le mod√®le n'envoie pas d'√©v√©nements sur les changements qui s'y produisent.  Si des informations sur les champs qui ont √©t√© affect√©s par les modifications, celles qui ne le sont pas, celles qui doivent √™tre redessin√©es et celles qui ne le sont pas, le programmeur l'indiquera manuellement sous une forme ou une autre - cela deviendra la principale source d'erreurs et de temps.  Et il suffit de ne pas avoir les yeux surpris. Dans la plupart des grands bureaux dans lesquels j'ai travaill√©, le programmeur a lui-m√™me envoy√© toutes sortes d'InventoryUpdatedEvent et, dans certains cas, les a √©galement remplis manuellement.  Certains de ces bureaux ont fait des millions, pensez-vous, merci ou malgr√©? <br><br>  Nous utiliserons notre propre classe ReactiveProperty &lt;T&gt; qui cachera sous le capot toutes les manipulations pour envoyer les messages dont nous avons besoin.  Cela ressemblera √† ceci: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayerModel</span></span></span><span class="hljs-class"> :</span></span> Model { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; money = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReactiveProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveProperty&lt;InventoryModel&gt; inventory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReactiveProperty&lt;InventoryModel&gt;(); <span class="hljs-comment"><span class="hljs-comment">/* Using */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SomeTestChanges</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ money.Value = <span class="hljs-number"><span class="hljs-number">10</span></span>; inventory.Value.capacity.Value++; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Subscription</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Text text)</span></span></span><span class="hljs-function"> </span></span>{ money.SubscribeWithState(text, (x, t) =&gt; t.text = x.ToString()); } }</code> </pre> <br>  Ceci est la premi√®re version du mod√®le.  Cette option est d√©j√† un r√™ve pour de nombreux programmeurs, mais je ne l'aime toujours pas.  La premi√®re chose que je n'aime pas, c'est que l'acc√®s aux valeurs est compliqu√©.  J'ai r√©ussi √† √™tre confus en √©crivant cet exemple, en oubliant Value en un seul endroit, et ce sont pr√©cis√©ment ces manipulations de donn√©es qui constituent la part du lion de tout ce qui est fait et confondu avec le mod√®le.  Si vous utilisez la version linguistique 4.x, vous pouvez le faire: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReactiveProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; money { get; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReactiveProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;();</code> </pre> <br>  mais cela ne r√©sout pas tous les probl√®mes.  Je voudrais √©crire simplement: inventaire.capacit√© ++;.  Supposons que nous essayons d'obtenir pour chaque champ de mod√®le;  ensemble;  Mais pour souscrire √† des √©v√©nements, nous avons √©galement besoin d'acc√©der √† ReactiveProperty lui-m√™me.  Clart√© des inconv√©nients et source de confusion.  Malgr√© le fait qu'il nous suffit d'indiquer quel champ nous allons surveiller.  Et ici, je suis venu avec une man≈ìuvre d√©licate que j'ai aim√©. <br><br>  Voyons voir si vous l'aimez. <br><br>  Ce n'est pas ReactiveProperty qui est ins√©r√© dans le mod√®le concret avec lequel le programmeur traite, il est ins√©r√©, mais son descripteur statique PValue, l'h√©ritier de la propri√©t√© plus g√©n√©rale, il identifie le champ, et √† l'int√©rieur sous le capot du constructeur du mod√®le est cach√© la cr√©ation et le stockage de la ReactiveProperty du type souhait√©.  Pas le meilleur nom, mais c'est arriv√©, puis renomm√©. <br><br>  En code, cela ressemble √† ceci: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayerModel</span></span></span><span class="hljs-class"> :</span></span> Model { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> PValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; MONEY = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PValue&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> money { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MONEY.Get(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> { MONEY.Set(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, value) } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> PModel&lt;InventoryModel&gt; INVENTORY = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PModel&lt;InventoryModel&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> InventoryModel inventory { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> INVENTORY.Get(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> { INVENTORY.Set(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, value) } } <span class="hljs-comment"><span class="hljs-comment">/* Using */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SomeTestChanges</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ money = <span class="hljs-number"><span class="hljs-number">10</span></span>; inventory.capacity++; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Subscription</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Text text)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Get(MONEY).SubscribeWithState(text, (x, t) =&gt; t.text = x.ToString()); } }</code> </pre> <br>  Ceci est la deuxi√®me option.  L'anc√™tre g√©n√©ral du mod√®le, bien s√ªr, √©tait compliqu√© au d√©triment de la cr√©ation et de l'extraction d'une v√©ritable propri√©t√© r√©active selon son descripteur, mais cela peut se faire tr√®s rapidement et sans r√©flexion, ou plut√¥t, appliquer la r√©flexion une seule fois au stade de l'initialisation de la classe.  Et c'est le travail qui est fait une fois par le cr√©ateur du moteur, puis il sera utilis√© par tout le monde.  De plus, cette conception √©vite les tentatives accidentelles de manipuler ReactiveProperty lui-m√™me au lieu des valeurs qui y sont stock√©es.  La cr√©ation du champ est encombr√©e, mais dans tous les cas, c'est exactement la m√™me chose, et elle peut √™tre cr√©√©e avec un mod√®le. <br><br>  √Ä la fin de l'article, il y a un sondage sur l'option que vous pr√©f√©rez. <br>  Tout ce qui est d√©crit ci-dessous peut √™tre impl√©ment√© dans les deux versions. <br><br><h3>  Les transactions </h3><br>  Je veux que les programmeurs puissent modifier les champs du mod√®le uniquement lorsque cela est autoris√© par les restrictions adopt√©es dans le moteur, c'est-√†-dire √† l'int√©rieur de l'√©quipe, et plus jamais.  Pour ce faire, le setter doit aller quelque part et v√©rifier si la commande de transaction est actuellement ouverte, et ensuite seulement autoriser la modification des informations dans le mod√®le.  C'est tr√®s n√©cessaire, car les utilisateurs du moteur essaient r√©guli√®rement de faire quelque chose d'√©trange pour contourner un processus typique, brisant la logique du moteur et provoquant des erreurs subtiles.  Je l'ai vu plus d'une ou deux fois. <br><br>  On pense que si vous cr√©ez une interface distincte pour lire les donn√©es du mod√®le et pour les √©crire, cela vous aidera en quelque sorte.  En r√©alit√©, le mod√®le regorge de fichiers suppl√©mentaires et d'op√©rations suppl√©mentaires fastidieuses.  Ces restrictions sont d√©finitives. Les programmeurs sont oblig√©s, premi√®rement, de les conna√Ætre et d'y penser constamment: ¬´ce que chaque fonction, mod√®le ou interface sp√©cifique doit donner¬ª, et deuxi√®mement, des situations se produisent √©galement lorsque ces restrictions doivent √™tre contourn√©es, donc √† la sortie, nous avons d'Artagnan, qui est venu avec tout cela en blanc, et de nombreux utilisateurs de son moteur, qui sont de mauvais gardes du chef de projet, et malgr√© les abus constants, rien ne fonctionne comme pr√©vu.  Par cons√©quent, je pr√©f√®re bloquer √©troitement la possibilit√© d'une telle erreur.  R√©duisez la dose de conventions, pour ainsi dire. <br><br>  Le setter ReactiveProperty doit avoir un lien vers l'endroit o√π l'√©tat actuel de la transaction doit √™tre v√©rifi√©.  Disons que cet endroit est classCModelRoot.  L'option la plus simple consiste √† la transmettre explicitement au constructeur du mod√®le.  La deuxi√®me version du code lors de l'appel √† RProperty re√ßoit explicitement un lien vers cela et peut y obtenir toutes les informations n√©cessaires.  Pour la premi√®re version du code, vous devrez parcourir les champs du type ReactiveProperty dans le constructeur avec une r√©flexion et leur donner un lien vers cela pour d'autres manipulations.  Un l√©ger inconv√©nient est la n√©cessit√© de cr√©er un constructeur explicite avec un param√®tre dans chaque mod√®le, quelque chose comme ceci: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayerModel</span></span></span><span class="hljs-class"> :</span></span> Model { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PlayerModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ModelRoot gamestate)</span></span></span><span class="hljs-function"> : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(gamestate)</span></span></span><span class="hljs-function"> </span></span>{} }</code> </pre> <br>  Mais pour d'autres caract√©ristiques des mod√®les, il est tr√®s utile que le mod√®le ait un lien avec le mod√®le parent, formant une construction biconnect√©e.  Dans notre exemple, ce sera player.inventory.Parent == player.  Et puis ce constructeur peut √™tre √©vit√©.  Tout mod√®le pourra obtenir et mettre en cache un lien vers un endroit magique de son parent, et celui de son parent, et ainsi de suite jusqu'√† ce que le parent suivant se r√©v√®le √™tre cet endroit magique.  En cons√©quence, au niveau des d√©clarations, tout cela ressemblera √† ceci: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ModelRoot</span></span></span><span class="hljs-class"> :</span></span> Model { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> locked { get; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> partial <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Model Parent { get; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ModelRoot Root { get; } }</code> </pre> <br>  Toute cette beaut√© sera remplie automatiquement lorsque le mod√®le entrera dans l'arbre de jeu.  Oui, le mod√®le nouvellement cr√©√©, qui n'est pas encore arriv√©, ne pourra pas en savoir plus sur la transaction et bloquer les manipulations avec lui-m√™me, mais si l'√©tat de la transaction est interdit, il ne pourra pas entrer dans l'√©tat apr√®s cela, le passeur du futur parent ne le permettra pas, de sorte que l'int√©grit√© du gamestate ne sera pas affect√©e.  Oui, cela n√©cessitera un travail suppl√©mentaire au stade de la programmation du moteur, mais d'un autre c√¥t√©, un programmeur utilisant le moteur √©liminera compl√®tement le besoin de le savoir et d'y penser jusqu'√† ce qu'il essaie de faire quelque chose de mal et se fasse prendre par les mains. <br><br>  Puisque la conversation sur la transactivit√© a commenc√©, les messages sur les modifications ne doivent pas √™tre trait√©s imm√©diatement apr√®s la modification, mais uniquement lorsque toutes les manipulations avec le mod√®le dans la commande en cours sont termin√©es.  Il y a deux raisons √† cela, la premi√®re est la coh√©rence des donn√©es. Tous les √©tats de donn√©es ne sont pas coh√©rents en interne. Vous ne pouvez peut-√™tre pas essayer de les rendre.  Ou si vous √™tes impatient, par exemple, de trier un tableau ou de changer une variable de mod√®le dans une boucle.  Vous ne devriez pas recevoir des centaines de messages de modification. <br><br>  Il y a deux fa√ßons de proc√©der.  La premi√®re consiste √† s'abonner aux mises √† jour d'une variable et √† utiliser une fonction d√©licate qui ajoute un flux de terminaisons de transaction au flux de modifications de la variable et ne fera qu'ignorer les messages par la suite.  C'est assez facile √† faire si vous utilisez UniRX, par exemple.  Mais cette option pr√©sente de nombreuses lacunes, en particulier elle donne lieu √† de nombreux mouvements inutiles.  Personnellement, j'aime l'autre option. <br><br>  Chaque ReactiveProperty se souviendra de son √©tat avant le d√©but de la transaction et de son √©tat actuel.  Un message sur la modification et la fixation des modifications ne sera effectu√© qu'√† la fin de la transaction.  Dans le cas o√π l'objet de la modification √©tait une sorte de collection, cela permettra explicitement d'inclure des informations sur les modifications qui se sont produites dans le message envoy√©. Par exemple, ces deux √©l√©ments de la liste ont √©t√© ajout√©s et supprim√©s.  Au lieu de simplement dire que quelque chose a chang√© et d'obliger le destinataire √† analyser une liste de mille √©l√©ments en longueur √† la recherche d'informations √† redessiner. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> partial <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DispatchChanges</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Command transaction)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FixChanges</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RevertChanges</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre> <br>  L'option prend plus de temps au stade de la cr√©ation du moteur, mais le co√ªt d'utilisation est alors plus faible.  Et surtout, cela ouvre la possibilit√© de la prochaine am√©lioration. <br><br><h3>  Informations sur les modifications apport√©es au mod√®le </h3><br>  Je veux plus du mod√®le.  √Ä tout moment, je veux voir facilement et commod√©ment ce qui a chang√© dans l'√©tat du mod√®le √† la suite de mes actions.  Par exemple, sous cette forme: <br><br><pre> <code class="json hljs">{<span class="hljs-attr"><span class="hljs-attr">"player"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"money"</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">"inventory"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"capacity"</span></span>:<span class="hljs-number"><span class="hljs-number">11</span></span>}}}</code> </pre> <br>  Le plus souvent, il est utile pour le programmeur de voir la diff√©rence entre l'√©tat du mod√®le avant le d√©but de la commande et apr√®s sa fin, ou √† un moment donn√© √† l'int√©rieur de la commande.  Certains pour ce clone l'ensemble du gamestate avant le d√©but de l'√©quipe, puis comparer.  Cela r√©sout partiellement le probl√®me au stade du d√©bogage, mais il est absolument impossible de l'ex√©cuter dans le produit.  Ce clonage d'√©tat, le calcul de la diff√©rence insignifiante entre les deux listes, est une op√©ration monstrueusement ch√®re √† faire avec n'importe quel √©ternuement. <br><br>  Par cons√©quent, ReactiveProperty doit stocker non seulement son √©tat actuel, mais √©galement le pr√©c√©dent.  Cela donne lieu √† tout un groupe d'opportunit√©s extr√™mement utiles.  Premi√®rement, l'extraction de la diff√©rence dans une telle situation est rapide et nous pouvons tranquillement tout jeter dans la nourriture.  Deuxi√®mement, vous pouvez obtenir non pas un diff encombrant, mais un petit hachage compact √† partir des changements, et le comparer avec un hachage de changements dans un autre m√™me gamestate.  Si ce n'est pas d'accord, vous avez des probl√®mes.  Troisi√®mement, si l'ex√©cution de la commande a √©chou√© avec l'ex√©cution, vous pouvez toujours annuler les modifications et vous renseigner sur l'√©tat intact au moment o√π la transaction a commenc√©.  Avec l'√©quipe appliqu√©e √† l'√©tat, ces informations sont inestimables car vous pouvez facilement reproduire la situation avec pr√©cision.  Bien s√ªr, pour cela, vous devez disposer de fonctionnalit√©s pr√™tes √† l'emploi pour une s√©rialisation et une d√©s√©rialisation pratiques de l'√©tat du jeu, mais vous en aurez quand m√™me besoin. <br><br><h3>  S√©rialisation des changements de mod√®le </h3><br>  Le moteur fournit la s√©rialisation et binaire, et en json - et ce n'est pas un hasard.  Bien s√ªr, la s√©rialisation binaire prend beaucoup moins d'espace et fonctionne beaucoup plus rapidement, ce qui est important, en particulier lors du d√©marrage initial.  Mais ce n'est pas un format lisible par l'homme, et ici nous prions pour la commodit√© du d√©bogage.  De plus, il y a un autre √©cueil.  Lorsque votre jeu passe en prod, vous devrez constamment passer d'une version √† l'autre.  Si vos programmeurs suivent quelques pr√©cautions simples et ne suppriment rien de l'√©tat du jeu inutilement, vous ne ressentirez pas cette transition.  Et au format binaire, il n'y a pas de noms de cha√Æne de champ pour des raisons √©videntes, et si les versions ne correspondent pas, vous devrez lire le binaire avec l'ancienne version de l'√©tat, l'exporter vers quelque chose de plus informatif, par exemple, le m√™me json, puis l'importer dans un nouvel √©tat, l'exporter vers le binaire, √©crivez, et seulement apr√®s tout ce travail, comme d'habitude.  Par cons√©quent, dans certains projets, les configurations sont √©crites dans des fichiers binaires compte tenu de leurs tailles cyclop√©ennes, et ils pr√©f√®rent d√©j√† faire glisser l'√©tat d'avant en arri√®re sous la forme de json.  √âvaluez les frais g√©n√©raux et choisissez-vous. <br><br><pre> <code class="cpp hljs">[Flags] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> ExportMode { all = <span class="hljs-number"><span class="hljs-number">0x0</span></span>, changes = <span class="hljs-number"><span class="hljs-number">0x1</span></span>, serverVerified = <span class="hljs-number"><span class="hljs-number">0x2</span></span>, <span class="hljs-comment"><span class="hljs-comment">//    ,    } /**    */ public partial class Model { public bool GetHashCode(ExportMode mode, out int code); public bool Import(BinaryReader binarySerialization); public bool Import(JSONReader json); public void ExportAll(ExportMode mode, BinaryWriter binarySerialization); public void ExportAll(ExportMode mode, JSONWriter json); public bool Export(ExportMode mode, out Dictionary&lt;string, object&gt; data); }</span></span></code> </pre> <br>  La signature de la m√©thode Export (mode ExportMode, out Dictionary &lt;string, object&gt; data) est quelque peu alarmante.  Et la chose est la suivante: lorsque vous s√©rialisez l'arborescence enti√®re, vous pouvez √©crire imm√©diatement dans le flux, ou dans notre cas, dans JSONWriter, qui est un simple module compl√©mentaire de StringWriter.  Mais lorsque vous exportez des modifications, ce n'est pas si simple, car lorsque vous allez profond√©ment dans un arbre et allez dans l'une des branches, vous ne savez toujours pas si vous devez en exporter quoi que ce soit.  Par cons√©quent, √† ce stade, j'ai trouv√© deux solutions, l'une plus simple, la seconde plus compliqu√©e et √©conomique.  Plus simple, lorsque vous exportez uniquement les modifications, vous transformez toutes les modifications en arborescence √† partir de Dictionary &lt;string, object&gt; et List &lt;object&gt;.  Et puis ce qui s'est pass√©, alimentez votre s√©rialiseur pr√©f√©r√©.  Il s'agit d'une approche simple qui ne n√©cessite pas de danser avec un tambourin.  Mais son inconv√©nient est que lors du processus d'exportation des modifications vers le tas, une place pour les collections uniques sera allou√©e.  En fait, il n'y a pas beaucoup d'espace, car cette exportation compl√®te donne un grand arbre, et la commande typique laisse tr√®s peu de changements dans l'arbre. <br><br>  Cependant, beaucoup de gens croient que nourrir le ramasse-miettes comme ce troll n'est pas n√©cessaire sans un besoin extr√™me.  Pour eux, et pour calmer ma conscience, j'ai pr√©par√© une solution plus complexe: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> partial <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExportAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ExportMode mode, Type propertyType, JSONWriter writer, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> newModel = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DetectChanges</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ExportMode mode, Stack&lt;Model&gt; ierarchyChanged = null)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExportChanges</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ExportMode mode, Type propertyType, JSONWriter writer, Queue&lt;Model&gt; ierarchyChanges = null)</span></span></span></span>; }</code> </pre> <br>  L'essence de cette m√©thode est de marcher deux fois dans l'arbre.  Pour la premi√®re fois, examinez tous les mod√®les qui ont chang√© eux-m√™mes ou qui ont des changements dans les mod√®les enfants et √©crivez-les tous dans Queue &lt;Model&gt; ierarchyChanges exactement dans l'ordre dans lequel ils apparaissent dans l'arborescence dans son √©tat actuel.  Il n'y a pas beaucoup de changements, la file d'attente ne sera pas longue.  De plus, rien n'emp√™che de conserver Stack &lt;Model&gt; et Queue &lt;Model&gt; entre les appels et il y aura alors tr√®s peu d'allocations pendant l'appel. <br><br>  Et d√©j√† en passant la deuxi√®me fois √† travers l'arbre, il sera possible de regarder en haut de la file d'attente √† chaque fois, et de comprendre s'il est n√©cessaire d'aller dans cette branche de l'arbre ou de passer imm√©diatement.  Cela permet √† JSONWriter d'√©crire imm√©diatement sans renvoyer d'autres r√©sultats interm√©diaires. <br><br>  Il est tr√®s probable que cette complication ne soit pas vraiment n√©cessaire, car plus tard, vous verrez que l'exportation des modifications dans l'arborescence dont vous avez besoin uniquement pour le d√©bogage ou lors d'un plantage avec Exception.  Pendant le fonctionnement normal, tout est limit√© √† GetHashCode (mode ExportMode, hors code int) auquel tous ces d√©lices sont profond√©ment √©trangers. <br><br>  Avant de continuer √† compliquer notre mod√®le, parlons-en. <br><br><h2>  Pourquoi est-ce si important </h2><br>  Tous les programmeurs disent que c'est terriblement important, mais g√©n√©ralement personne ne les croit.  Pourquoi? <br><br>  Premi√®rement, parce que tous les programmeurs disent que vous devez jeter l'ancien et √©crire le nouveau.  C'est tout, peu importe les qualifications.  Il n'y a aucun moyen manag√©rial de savoir si cela est vrai ou non, et les exp√©riences sont g√©n√©ralement trop ch√®res.  Le manager sera oblig√© de choisir un programmeur et fera confiance √† son jugement.  Le probl√®me est qu'un tel conseiller est g√©n√©ralement celui avec qui la direction travaille depuis longtemps et l'√©value en fonction de sa capacit√© √† concr√©tiser ses id√©es. Et toutes ses meilleures id√©es sont d√©j√† concr√©tis√©es.  Ce n'est donc pas non plus un moyen id√©al de d√©couvrir √† quel point les id√©es des autres et les id√©es diff√©rentes sont bonnes. <br><br>  Deuxi√®mement, 80% de tous les jeux mobiles rapportent moins de 500 $ dans toute leur vie.  Par cons√©quent, au d√©but du projet, la gestion a d'autres probl√®mes, surtout l'architecture.  Mais les d√©cisions prises au tout d√©but du projet prennent les gens en otage et ne laissent pas passer de six mois √† trois ans.  Le processus de refactorisation et de passage √† d'autres id√©es dans un projet d√©j√† en cours, qui a √©galement des clients, est une entreprise tr√®s difficile, co√ªteuse et risqu√©e.  Si pour un projet au tout d√©but, investir trois mois-homme dans une architecture normale semble √™tre un luxe inadmissible, que pouvez-vous dire du co√ªt du retard de la mise √† jour avec de nouvelles fonctionnalit√©s pendant quelques mois? <br><br>  Troisi√®mement, m√™me si l'id√©e de ¬´comment cela devrait √™tre¬ª est en soi bonne et id√©ale, on ne sait pas combien de temps sa mise en ≈ìuvre prendra.  La d√©pendance du temps pass√© sur la fra√Æcheur du programmeur est tr√®s non lin√©aire.  Le seigneur fera une t√¢che simple pas beaucoup plus vite que le cadet.  Une fois et demie, peut-√™tre.  Mais chaque programmeur a sa propre ¬´limite de complexit√©¬ª, au-del√† de laquelle son efficacit√© chute de fa√ßon spectaculaire.  J'ai eu un cas dans ma vie o√π j'avais besoin de r√©aliser une t√¢che architecturale assez compliqu√©e, et m√™me se concentrer compl√®tement sur le probl√®me de d√©sactiver Internet dans la maison et de commander des plats cuisin√©s pendant un mois n'a pas aid√©. Mais deux ans plus tard, apr√®s avoir lu des livres int√©ressants et r√©solu des t√¢ches connexes , J'ai r√©solu ce probl√®me en trois jours.  Je suis s√ªr que tout le monde se souviendra de quelque chose comme √ßa dans sa carri√®re.  Et voici le hic!  Le fait est que si une id√©e ing√©nieuse vous vient √† l'esprit comme il se doit, alors cette nouvelle id√©e se situe probablement quelque part dans votre limite personnelle de complexit√©, et peut-√™tre m√™me un peu derri√®re.  La direction, apr√®s avoir br√ªl√© √† maintes reprises, commence √† souffler sur de nouvelles id√©es.  Et si vous faites le jeu par vous-m√™me, le r√©sultat peut √™tre encore pire, car il n'y aura personne pour vous arr√™ter. <br><br>  Mais comment, alors, quelqu'un parvient-il √† utiliser de bonnes solutions?  Il y a plusieurs fa√ßons. <br><br>  Tout d'abord, chaque entreprise souhaite embaucher une personne pr√™te √† l'emploi qui l'a d√©j√† fait avec un employeur pr√©c√©dent.  C'est le moyen le plus courant de transf√©rer le fardeau de l'exp√©rimentation sur quelqu'un d'autre. <br><br>  Deuxi√®mement, les entreprises ou les personnes qui ont r√©ussi leur premier jeu r√©ussi, se sont √©lanc√©es et ont commenc√© le prochain projet sont pr√™tes √† changer. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Troisi√®mement, admettez-vous honn√™tement que parfois vous faites quelque chose non pas pour le salaire, mais pour le plaisir du processus. L'essentiel est de trouver du temps pour cela. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quatri√®mement, c'est un ensemble de solutions et de biblioth√®ques √©prouv√©es, ainsi que des personnes, qui constituent les principaux fonds de la soci√©t√© de jeux, et c'est la seule chose qui y restera lorsqu'une personne cl√© quittera et d√©m√©nagera en Australie.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La toute derni√®re, mais pas la raison la plus √©vidente: car elle est terriblement b√©n√©fique. </font><font style="vertical-align: inherit;">Les bonnes solutions entra√Ænent une r√©duction multiple du temps d'√©criture de nouvelles fonctionnalit√©s, de d√©bogage et de d√©tection des erreurs. </font><font style="vertical-align: inherit;">Permettez-moi de vous donner un exemple: il y a deux jours, le client a eu une ex√©cution dans une nouvelle fonctionnalit√©, dont la probabilit√© est de 1 sur 1000, c'est-√†-dire que le contr√¥le qualit√© sera tortur√© pour se reproduire, et lorsque vous le donnez, c'est 200 messages d'erreur par jour. </font><font style="vertical-align: inherit;">Combien de temps cela vous prendra-t-il pour reproduire la situation et attraper le client au point d'arr√™t une ligne avant que tout ne s'effondre? </font><font style="vertical-align: inherit;">Par exemple, j'ai 10 minutes.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mod√®le </font></font></h2><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Arbre mod√®le </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le mod√®le se compose de nombreux objets. Diff√©rents programmeurs d√©cident diff√©remment de la fa√ßon de les connecter ensemble. La premi√®re fa√ßon est lorsque le mod√®le est identifi√© par l'endroit o√π il se trouve. Ceci est tr√®s pratique et simple lorsque la r√©f√©rence au mod√®le appartient √† un seul endroit dans ModelRoot. Peut-√™tre m√™me qu'il peut √™tre d√©plac√© d'un endroit √† l'autre, mais deux liens de diff√©rents endroits n'y m√®nent jamais. Nous le ferons en introduisant une nouvelle version du descripteur ModelProperty qui traitera des liens d'un mod√®le √† d'autres mod√®les qui y sont situ√©s. Dans le code, cela ressemblera √† ceci:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PModel</span></span></span><span class="hljs-class">&lt;T&gt; :</span></span> Property&lt;T&gt; where T:Model {} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> partial <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayerModel</span></span></span><span class="hljs-class"> :</span></span> Model { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PModel&lt;InventoryModel&gt; INVENTORY = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PModel&lt;InventoryModel&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> InventoryModel inventory { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> INVENTORY.Value(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> { INVENTORY.Value(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, value); } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelle est la diff√©rence? </font><font style="vertical-align: inherit;">Lorsqu'un nouveau mod√®le est ajout√© √† ce champ, le mod√®le dans lequel il a √©t√© ajout√© est √©crit dans son champ parent et lorsqu'il est supprim√©, le champ parent est r√©initialis√©. </font><font style="vertical-align: inherit;">En th√©orie, tout va bien, mais il y a de nombreux pi√®ges. </font><font style="vertical-align: inherit;">Les premiers - les programmeurs qui l'utiliseront, peuvent se tromper. </font><font style="vertical-align: inherit;">Pour √©viter cela, nous imposons des contr√¥les cach√©s sur ce processus, sous diff√©rents angles:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous allons corriger PValue afin qu'il v√©rifie le type de sa valeur et jure par les experts lorsqu'ils essaient de stocker une r√©f√©rence au mod√®le, indiquant que pour cela, il est n√©cessaire d'utiliser une construction diff√©rente, juste pour ne pas √™tre confondu. </font><font style="vertical-align: inherit;">Ceci, bien s√ªr, est une v√©rification de l'ex√©cution, mais il ne jure qu'√† la toute premi√®re tentative de d√©marrage, ce sera donc le cas.</font></font></li><li>   PModel       Parent  -  ,       .     .        ,  . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un effet secondaire en d√©coule, si vous devez d√©placer un tel mod√®le d'un endroit √† un autre, vous devez d'abord le retirer du premier endroit, puis l'ajouter ensuite au second - sinon les contr√¥les vous gronderont. Mais cela arrive en fait assez rarement. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puisque le mod√®le se trouve √† un endroit strictement d√©fini et a une r√©f√©rence √† son parent, nous pouvons lui ajouter une nouvelle m√©thode - il peut indiquer de quelle mani√®re il se trouve dans l'arbre ModelRoot. Ceci est extr√™mement pratique pour le d√©bogage, mais il est √©galement n√©cessaire pour qu'il puisse √™tre identifi√© de mani√®re unique. Par exemple, trouvez un autre exactement le m√™me mod√®le dans un autre m√™me gamestate, ou indiquez dans la commande transmise au serveur un lien vers le mod√®le contenant la commande. Cela ressemble √† ceci:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ModelPath</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Property[] properties; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Object[] indexes; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> override </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ModelPath </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FromString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> path)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> partial <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ModelPath </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Path</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> partial <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ModelRoot</span></span></span><span class="hljs-class"> :</span></span> Model { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Model </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetByPath</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ModelPath path)</span></span></span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et pourquoi, en fait, il est impossible d'avoir un objet enracin√© dans un endroit, mais de s'y r√©f√©rer d'un autre? Et parce que vous imaginez que vous d√©s√©rialisez un objet de JSON, et ici vous trouverez un lien vers un objet enracin√© dans un endroit compl√®tement diff√©rent. Et il n'y a toujours pas de place pour cela, il ne sera cr√©√© qu'√† travers le plancher de d√©s√©rialisation. Oups Veuillez ne pas proposer de d√©s√©rialisation multipasse. C'est la limitation de cette m√©thode. Par cons√©quent, nous trouverons une deuxi√®me m√©thode:</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tous les mod√®les cr√©√©s par la deuxi√®me m√©thode sont cr√©√©s en un seul endroit magique, et dans tous les autres endroits du gamestate, seuls des liens y sont ins√©r√©s. Lors de la d√©s√©rialisation, s'il existe plusieurs r√©f√©rences √† l'objet, la premi√®re fois que vous acc√©dez au lieu magique, l'objet est cr√©√© et avec toutes les r√©f√©rences suivantes au m√™me objet sont renvoy√©es. Pour impl√©menter d'autres fonctionnalit√©s, nous supposons que le jeu peut avoir plusieurs gamestates, donc le lieu magique ne devrait pas √™tre un commun, mais devrait √™tre situ√©, par exemple, dans le gamestate. Pour les r√©f√©rences √† de tels mod√®les, nous utilisons une autre variante du descripteur PPersistent. Le mod√®le lui-m√™me sera rendu plus sp√©cial par Persistent: Model. Dans le code, cela ressemblera √† ceci:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Persistent</span></span></span><span class="hljs-class"> :</span></span> Model { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ID.Get(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> { ID.Set(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, value); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; ID = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> partial <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ModelRoot</span></span></span><span class="hljs-class"> :</span></span> Model { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nextFreePersistentId { get { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NEXT_FREE_PERSISTENT_ID.Get(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> { NEXT_FREE_PERSISTENT_ID.Set(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, value); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; NEXT_FREE_PERSISTENT_ID = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RProperty&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> PDictionaryModel&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, Persistent&gt; PERSISTENT = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PDictionaryModel&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, Persistent&gt;() { notServerVerified = <span class="hljs-literal"><span class="hljs-literal">true</span></span> }; <span class="hljs-comment"><span class="hljs-comment">/// &lt;summary&gt;      Id-. &lt;/summary&gt; public PersistentT Persistent&lt;PersistentT&gt;(int localId) where PersistentT : Persistent, new(); /// &lt;summary&gt; C    Id. &lt;/summary&gt; public PersistentT Persistent&lt;PersistentT&gt;() where PersistentT : Persistent, new(); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un peu encombrant, mais il peut √™tre utilis√©. </font><font style="vertical-align: inherit;">Pour poser des pailles, Persistent peut fixer le constructeur avec le param√®tre ModelRoot, qui d√©clenchera une alarme s'il essaie de cr√©er ce mod√®le sans utiliser les m√©thodes de ce ModelRoot. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai les deux options dans mon code, et la question est, pourquoi alors utiliser la premi√®re option si la seconde couvre enti√®rement tous les cas possibles? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La r√©ponse est que l'√©tat du jeu doit √™tre, tout d'abord, lisible par les gens. </font><font style="vertical-align: inherit;">√Ä quoi cela ressemble-t-il si, si possible, la premi√®re option est utilis√©e?</font></font><br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"persistents"</span></span>:{}, <span class="hljs-attr"><span class="hljs-attr">"player"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"money"</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">"inventory"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"capacity"</span></span>:<span class="hljs-number"><span class="hljs-number">11</span></span>} } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Et maintenant, √† quoi ressemblerait-il si seule la deuxi√®me option √©tait utilis√©e: </font></font><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"persistents"</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">"1"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"money"</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">"inventory"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>}, <span class="hljs-attr"><span class="hljs-attr">"2"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"capacity"</span></span>:<span class="hljs-number"><span class="hljs-number">11</span></span>} }, <span class="hljs-attr"><span class="hljs-attr">"player"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pour d√©boguer personnellement, je pr√©f√®re la premi√®re option. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Acc√©der aux propri√©t√©s du mod√®le </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'acc√®s √† des installations de stockage de propri√©t√©s r√©actives s'est finalement r√©v√©l√© cach√© sous le capot du mod√®le. Il n'est pas trop √©vident de savoir comment le faire fonctionner pour qu'il fonctionne rapidement, sans trop de code dans les mod√®les finaux et sans trop de r√©flexion. Examinons de plus pr√®s.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La premi√®re chose qu'il est utile de savoir sur Dictionary est que sa lecture ne prend pas autant de temps constant, quelle que soit la taille du dictionnaire. Nous allons cr√©er un dictionnaire statique priv√© dans Model dans lequel chaque type de mod√®le se voit attribuer une description des champs qui s'y trouvent et nous y acc√©derons une fois lors de la construction du mod√®le. Dans le constructeur de type, nous cherchons √† voir s'il existe une description pour notre type. Sinon, nous le cr√©ons, si c'est le cas, nous prenons le fini. Ainsi, la description ne sera cr√©√©e qu'une seule fois pour chaque classe. Lors de la cr√©ation d'une description, nous mettons dans chaque propri√©t√© statique (description de champ) les donn√©es extraites par r√©flexion - le nom du champ et l'index sous lequel le magasin de donn√©es pour ce champ sera dans le tableau. De cette fa√ßonlorsqu'il est accessible via la description du champ, son stockage sera retir√© de la matrice √† un index pr√©c√©demment connu, c'est-√†-dire rapidement.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dans le code, cela ressemblera √† ceci: </font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Model</span></span></span><span class="hljs-class"> :</span></span> IModelInternals { <span class="hljs-meta"><span class="hljs-meta">#region Properties protected static Dictionary</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Type, Property[]&gt; propertiesDictionary = new Dictionary&lt;Type, Property[]&gt;(); protected static Dictionary&lt;Type, Property[]&gt; propertiesForBinarySerializationDictionary = new Dictionary&lt;Type, Property[]&gt;(); protected Property[] _properties, _propertiesForBinarySerialization; protected BaseStorage[] _storages; public Model() { Type targetType = GetType(); if (!propertiesDictionary.ContainsKey(targetType)) RegisterModelsProperties(targetType, new List&lt;Property&gt;(), new List&lt;Property&gt;()); _properties = propertiesDictionary[targetType]; _storages = new BaseStorage[_properties.Length]; for (var i = 0; i &lt; _storages.Length; i++) _storages[i] = _properties[i].CreateStorage(); } private void RegisterModelsProperties(Type target, List&lt;Property&gt; registered, List&lt;Property&gt; registeredForBinary) { if (!propertiesDictionary.ContainsKey(target)) { if (target.BaseType != typeof(Model) &amp;&amp; typeof(Model).IsAssignableFrom(target.BaseType)) RegisterModelsProperties(target.BaseType, registered, registeredForBinary); var fields = target.GetFields(BindingFlags.Public | BindingFlags.Static); // | BindingFlags.DeclaredOnly List&lt;Property&gt; alphabeticSorted = new List&lt;Property&gt;(); for (int i = 0; i &lt; fields.Length; i++) { var field = fields[i]; if (typeof(Property).IsAssignableFrom(field.FieldType)) { var prop = field.GetValue(this) as Property; prop.Name = field.Name; prop.Parent = target; prop.storageIndex = registered.Count; registered.Add(prop); alphabeticSorted.Add(prop); } } alphabeticSorted.Sort((p1, p2) =&gt; String.Compare(p1.Name, p2.Name)); registeredForBinary.AddRange(alphabeticSorted); Property[] properties = new Property[registered.Count]; for (int i = 0; i &lt; registered.Count; i++) properties[i] = registered[i]; propertiesDictionary.Add(target, properties); properties = new Property[registered.Count]; for (int i = 0; i &lt; registeredForBinary.Count; i++) properties[i] = registeredForBinary[i]; propertiesForBinarySerializationDictionary.Add(target, properties); } else { registered.AddRange(propertiesDictionary[target]); registeredForBinary.AddRange(propertiesForBinarySerializationDictionary[target]); } } CastType IModelInternals.GetStorage&lt;CastType&gt;(Property property) { try { return (CastType)_storages[property.storageIndex]; } catch { UnityEngine.Debug.LogError(string.Format("{0}.GetStorage&lt;{1}&gt;({2})",GetType().Name, typeof(CastType).Name, property.ToString())); return null; } } #endregion }</span></span></span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La conception est un peu simple, car les descripteurs de propri√©t√©s statiques d√©clar√©s dans les anc√™tres de ce mod√®le peuvent d√©j√† avoir des index de stockage enregistr√©s et l'ordre de renvoi des propri√©t√©s de Type.GetFields () n'est pas garanti. Pour l'ordre et pour que les propri√©t√©s ne soient pas r√©initialis√©es en deux fois, vous devez vous surveiller. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Propri√©t√©s de collection </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la section sur l'arbre du mod√®le, on pouvait remarquer une construction qui n'√©tait pas mentionn√©e pr√©c√©demment: PDictionaryModel &lt;int, Persistent&gt; - un descripteur pour un champ contenant une collection. Il est clair que nous devrons cr√©er notre propre r√©f√©rentiel pour les collections, qui stocke des informations sur l'apparence de la collection avant le d√©but de la transaction et √† quoi elle ressemble maintenant. Le caillou sous-marin a la taille d'un tonnerre sous Pierre I. Il consiste dans le fait que, ayant deux longs dictionnaires √† port√©e de main, c'est une t√¢che extr√™mement co√ªteuse de calculer le diff entre eux. Je suppose que ces mod√®les devraient √™tre utilis√©s pour toutes les t√¢ches li√©es aux m√©ta, ce qui signifie qu'ils devraient fonctionner rapidement. Au lieu de stocker deux √©tats, de les cloner, puis de les comparer, je fais un crochet d√©licat - seul l'√©tat actuel du dictionnaire est stock√© dans le magasin. Deux autres dictionnaires sont des valeurs supprim√©es,et les anciennes valeurs des √©l√©ments remplac√©s. Enfin, un ensemble de nouvelles cl√©s ajout√©es au dictionnaire est stock√©. Ces informations se remplissent facilement et rapidement. Il est facile de g√©n√©rer toutes les diff√©rences n√©cessaires avec elle, et il suffit de restaurer l'√©tat pr√©c√©dent si n√©cessaire. En code, cela ressemble √† ceci:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DictionaryStorage</span></span></span><span class="hljs-class">&lt;TKey, TValues&gt; :</span></span> BaseStorage { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Dictionary&lt;TKey, TValues&gt; current = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;TKey, TValues&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Dictionary&lt;TKey, TValues&gt; removed = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;TKey, TValues&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Dictionary&lt;TKey, TValues&gt; changedValues = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;TKey, TValues&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HashSet&lt;TKey&gt; newKeys = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashSet&lt;TKey&gt;(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je n'ai pas r√©ussi √† cr√©er un r√©f√©rentiel tout aussi beau pour la Liste, ou je n'ai pas assez de temps, j'en garde deux exemplaires. Un module compl√©mentaire suppl√©mentaire est n√©cessaire pour essayer de minimiser la taille du diff.</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListStorage</span></span></span><span class="hljs-class">&lt;TValue&gt; :</span></span> BaseStorage { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;TValue&gt; current = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;TValue&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;TValue&gt; previouse = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;TValue&gt;(); <span class="hljs-comment"><span class="hljs-comment">//        public List&lt;int&gt; order = new List&lt;int&gt;(); //       . }</span></span></code> </pre> <br><h2>  Total </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous savez clairement ce que vous voulez recevoir et comment, vous pouvez √©crire tout cela en quelques semaines. La vitesse de d√©veloppement du jeu change en m√™me temps si radicalement que lorsque je l'ai essay√©, je n'ai m√™me pas commenc√© mes propres jeux de cr√©ation de jeu sans avoir un bon moteur. Tout simplement parce que le premier mois, l'investissement pour moi a √©videmment port√© ses fruits. Bien s√ªr, cela ne s'applique qu'aux m√©ta. Le gameplay doit √™tre fait √† l'ancienne. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la prochaine partie de l'article, je parlerai des commandes, de la mise en r√©seau et de la pr√©diction des r√©ponses du serveur. Et j'ai aussi quelques questions pour vous qui sont tr√®s importantes pour moi. Si vos r√©ponses diff√®rent de celles donn√©es entre parenth√®ses, je me ferai un plaisir de les lire dans les commentaires ou peut-√™tre m√™me d'√©crire un article. Merci d'avance pour les r√©ponses.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PS Une proposition de coop√©ration et des instructions sur de nombreuses erreurs de syntaxe, veuillez en PM. </font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434582/">https://habr.com/ru/post/fr434582/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434570/index.html">Simulateur en ligne minimaliste de circuits lin√©aires DC et AC</a></li>
<li><a href="../fr434574/index.html">Animation de soulignement de lien CSS pur</a></li>
<li><a href="../fr434576/index.html">Utilisation de l'API KOMPAS-3D ‚Üí Le√ßon 14 ‚Üí Texte multiligne</a></li>
<li><a href="../fr434578/index.html">Hygi√®ne num√©rique: les r√®gles du jeu</a></li>
<li><a href="../fr434580/index.html">Statistiques de grille-pain 2018</a></li>
<li><a href="../fr434584/index.html">Les donn√©es sont dr√¥les (et voici quelques exemples)</a></li>
<li><a href="../fr434586/index.html">Avion personnel. Comprendre et attendre</a></li>
<li><a href="../fr434588/index.html">R√©sum√© de l'ann√©e 2018 √† My Circle</a></li>
<li><a href="../fr434590/index.html">$ ls -l / home / avitotech / new_year</a></li>
<li><a href="../fr434592/index.html">Elon Musk promet de couvrir l'Europe avec le r√©seau Tesla Supercharger l'ann√©e prochaine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>