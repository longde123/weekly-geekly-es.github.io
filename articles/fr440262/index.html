<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê™ üò≥ üë©üèæ‚Äçü§ù‚Äçüë®üèø Magento 2: importez des produits directement dans la base de donn√©es üßùüèø üïé üòÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans un article pr√©c√©dent, j'ai d√©crit le processus d'importation de produits dans Magento 2 de la mani√®re habituelle - √† travers des mod√®les et des r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Magento 2: importez des produits directement dans la base de donn√©es</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440262/"><p>  Dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article pr√©c√©dent,</a> j'ai d√©crit le processus d'importation de produits dans Magento 2 de la mani√®re habituelle - √† travers des mod√®les et des r√©f√©rentiels.  La m√©thode habituelle se caract√©rise par une tr√®s faible vitesse de traitement des donn√©es.  Environ un produit par seconde est sorti sur mon ordinateur portable.  Dans cette suite, je consid√®re une mani√®re alternative d'importer un produit - par enregistrement direct dans la base de donn√©es, en contournant les m√©canismes standards de Magento 2 (mod√®les, usines, r√©f√©rentiels).  La s√©quence d'√©tapes d'importation de produits peut √™tre adapt√©e √† tout langage de programmation compatible avec MySQL. </p><br><p> <em>Avertissement</em> : Magento a une fonctionnalit√© pr√™te √† l'emploi pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">importer des donn√©es</a> et, tr√®s probablement, vous en avez assez.  Cependant, si vous avez besoin d'un contr√¥le plus complet sur le processus d'importation, non limit√© √† la pr√©paration d'un fichier CSV pour ce qu'il est - bienvenue √† cat. </p><br><p><img src="https://habrastorage.org/webt/1n/nh/qm/1nnhqmebkwnkqvecqrlr_wf5b5y.jpeg" alt="image"></p><a name="habracut"></a><br><p>  Le code r√©sultant de l'√©criture des deux articles peut √™tre consult√© dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">module</a> Magento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">flancer32 / mage2_ext_demo_import</a> .  Voici quelques-unes des restrictions que j'ai suivies pour simplifier le code du module de d√©monstration: </p><br><ul><li>  Les produits sont uniquement cr√©√©s, pas mis √† jour. </li><li>  Un entrep√¥t </li><li>  Seuls les noms de cat√©gorie sont import√©s, sans leur structure </li><li>  Les structures de donn√©es sont conformes √† la version 2.3 </li></ul><br><p>  JSON pour importer un seul produit: </p><br><pre><code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"sku"</span></span>: <span class="hljs-string"><span class="hljs-string">"MVA20D-UBV-3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"   47-29 IEK"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"desc"</span></span>: <span class="hljs-string"><span class="hljs-string">"    ..."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"desc_short"</span></span>: <span class="hljs-string"><span class="hljs-string">"   47-29 IEK   ..."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">5.00</span></span>, <span class="hljs-attr"><span class="hljs-attr">"qty"</span></span>: <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-attr"><span class="hljs-attr">"categories"</span></span>: [<span class="hljs-string"><span class="hljs-string">" 1"</span></span>, <span class="hljs-string"><span class="hljs-string">" 2"</span></span>], <span class="hljs-attr"><span class="hljs-attr">"image_path"</span></span>: <span class="hljs-string"><span class="hljs-string">"mva20d_ubv_3.png"</span></span> }</code> </pre> <br><h1 id="obzor-osnovnyh-etapov-importa">  Aper√ßu des principales √©tapes d'importation </h1><br><ul><li>  enregistrement du produit </li><li>  lier le produit et le site Web </li><li>  attributs de produit de base (EAV) </li><li>  donn√©es d'inventaire (quantit√© de produit en stock) </li><li>  m√©dias (photos) </li><li>  lien vers les cat√©gories du catalogue </li></ul><br><h1 id="registraciya-produkta">  Enregistrement du produit </h1><br><p>  Les informations de base sur le produit se <code>catalog_product_entity</code> dans <code>catalog_product_entity</code> : </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`catalog_product_entity`</span></span> ( <span class="hljs-string"><span class="hljs-string">`entity_id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT <span class="hljs-keyword"><span class="hljs-keyword">COMMENT</span></span> <span class="hljs-string"><span class="hljs-string">'Entity Id'</span></span>, <span class="hljs-string"><span class="hljs-string">`attribute_set_id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">smallint</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COMMENT</span></span> <span class="hljs-string"><span class="hljs-string">'Attribute Set ID'</span></span>, <span class="hljs-string"><span class="hljs-string">`type_id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">32</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'simple'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COMMENT</span></span> <span class="hljs-string"><span class="hljs-string">'Type ID'</span></span>, <span class="hljs-string"><span class="hljs-string">`sku`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">64</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COMMENT</span></span> <span class="hljs-string"><span class="hljs-string">'SKU'</span></span>, <span class="hljs-string"><span class="hljs-string">`has_options`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">smallint</span></span>(<span class="hljs-number"><span class="hljs-number">6</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COMMENT</span></span> <span class="hljs-string"><span class="hljs-string">'Has Options'</span></span>, <span class="hljs-string"><span class="hljs-string">`required_options`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">smallint</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COMMENT</span></span> <span class="hljs-string"><span class="hljs-string">'Required Options'</span></span>, <span class="hljs-string"><span class="hljs-string">`created_at`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CURRENT_TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COMMENT</span></span> <span class="hljs-string"><span class="hljs-string">'Creation Time'</span></span>, <span class="hljs-string"><span class="hljs-string">`updated_at`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CURRENT_TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CURRENT_TIMESTAMP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COMMENT</span></span> <span class="hljs-string"><span class="hljs-string">'Update Time'</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`entity_id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`CATALOG_PRODUCT_ENTITY_ATTRIBUTE_SET_ID`</span></span> (<span class="hljs-string"><span class="hljs-string">`attribute_set_id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`CATALOG_PRODUCT_ENTITY_SKU`</span></span> (<span class="hljs-string"><span class="hljs-string">`sku`</span></span>) )</code> </pre> <br><p>  Informations minimales n√©cessaires pour cr√©er une entr√©e dans le registre des produits: </p><br><ul><li> <code>attribute_set_id</code> </li> <li> <code>sku</code> </li> </ul><br><p>  suppl√©mentaire: </p><br><ul><li>  <code>type_id</code> - s'il n'est pas <code>type_id</code> , alors 'simple' sera utilis√© </li></ul><br><p>  Pour l'enregistrement direct dans la base de donn√©es, j'utilise l'adaptateur DB de Magento lui-m√™me: </p><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($sku, $typeId, $attrSetId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\App\ResourceConnection $this-&gt;resource */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\DB\Adapter\Pdo\Mysql $conn */</span></span> $conn = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getConnection(); $table = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getTableName(<span class="hljs-string"><span class="hljs-string">'catalog_product_entity'</span></span>); $bind = [ <span class="hljs-string"><span class="hljs-string">'sku'</span></span> =&gt; $sku, <span class="hljs-string"><span class="hljs-string">'type_id'</span></span> =&gt; $typeId, <span class="hljs-string"><span class="hljs-string">'attribute_set_id'</span></span> =&gt; $attrSetId ]; $conn-&gt;insert($table, $bind); $result = $conn-&gt;lastInsertId($table); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $result; }</code> </pre> <br><p>  Apr√®s avoir enregistr√© un produit dans <code>catalog_product_entity</code> il devient visible dans le panneau d'administration, dans la grille de produits ( <em>Catalogue / Produits</em> ). </p><br><p><img src="https://habrastorage.org/webt/oj/u1/qm/oju1qm6qkqksiq9wugh9g45ut6q.png" alt="image"></p><br><h1 id="svyaz-produkta-i-web-sayta">  Lier le produit et le site Web </h1><br><p>  La relation du produit avec le site d√©termine dans quels magasins et dans quelles vitrines le produit sera disponible en fa√ßade. </p><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">linkToWebsite</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($prodId, $websiteId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\App\ResourceConnection $this-&gt;resource */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\DB\Adapter\Pdo\Mysql $conn */</span></span> $conn = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getConnection(); $table = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getTableName(<span class="hljs-string"><span class="hljs-string">'catalog_product_website'</span></span>); $bind = [ <span class="hljs-string"><span class="hljs-string">'product_id'</span></span> =&gt; $prodId, <span class="hljs-string"><span class="hljs-string">'website_id'</span></span> =&gt; $websiteId ]; $conn-&gt;insert($table, $bind); }</code> </pre> <br><p><img src="https://habrastorage.org/webt/km/aq/al/kmaqaluoyidb9_ejzeyikkpd-x8.png" alt="image"></p><br><h1 id="bazovye-atributy-produkta">  Attributs de base du produit </h1><br><p>  Un produit fra√Æchement enregistr√© n'a pas encore de nom ni de description.  Tout cela se fait via les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">attributs EAV</a> .  Voici une liste des attributs de base du produit qui sont n√©cessaires pour garantir que le produit est correctement affich√© √† l'avant: </p><br><ul><li> <code>name</code> </li> <li> <code>price</code> </li> <li> <code>description</code> </li> <li> <code>short_description</code> </li> <li> <code>status</code> </li> <li> <code>tax_class_id</code> </li> <li> <code>url_key</code> </li> <li> <code>visibility</code> </li> </ul><br><p>  Un attribut distinct au produit est ajout√© comme ceci (les d√©tails d'obtention de l'identifiant et du type d'attribut par son code sont omis): </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($prodId, $attrCode, $attrValue)</span></span></span><span class="hljs-function"> </span></span>{ $attrId = <span class="hljs-comment"><span class="hljs-comment">/* get attribute ID by attribute code */</span></span> $attrType = <span class="hljs-comment"><span class="hljs-comment">/* get attribute type [datetime|decimal|int|text|varchar]) by attribute code */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($attrId) { <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\App\ResourceConnection $this-&gt;resource */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\DB\Adapter\Pdo\Mysql $conn */</span></span> $conn = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getConnection(); $tblName = <span class="hljs-string"><span class="hljs-string">'catalog_product_entity_'</span></span> . $attrType; $table = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getTableName($tblName); $bind = [ <span class="hljs-string"><span class="hljs-string">'attribute_id'</span></span> =&gt; $attrId, <span class="hljs-string"><span class="hljs-string">'entity_id'</span></span> =&gt; $prodId, <span class="hljs-comment"><span class="hljs-comment">/* put all attributes to default store view with id=0 (admin) */</span></span> <span class="hljs-string"><span class="hljs-string">'store_id'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span> =&gt; $attrValue ]; $conn-&gt;insert($table, $bind); } }</code> </pre> <br><p>  √Ä l'aide du code d'attribut, d√©terminez son id et son type de donn√©es ( <code>datetime</code> , <code>decimal</code> , <code>int</code> , <code>text</code> , <code>varchar</code> ), puis dans le tableau correspondant, nous √©crivons les donn√©es pour la vitrine administrative ( <code>store_id = 0</code> ). </p><br><p>  Apr√®s avoir ajout√© les attributs ci-dessus au produit, nous obtenons cette image dans le panneau d'administration: </p><br><p><img src="https://habrastorage.org/webt/wd/wr/ho/wdwrhobsk4l_updxfernrw_uak4.png" alt="image"></p><br><h1 id="inventarnye-dannye">  Donn√©es d'inventaire </h1><br><p>  √Ä partir de la version 2.3, Magento dispose simultan√©ment de deux ensembles de tableaux permettant le stockage des informations d'inventaire (quantit√© de produit): </p><br><ul><li>  <code>cataloginventory_*</code> : ancienne structure; </li><li>  <code>inventory_*</code> : nouvelle structure (MSI - Multi Source Inventory); </li></ul><br><p>  Vous devez ajouter des donn√©es d'inventaire aux deux structures, car  la nouvelle structure n'est pas encore compl√®tement ind√©pendante de l'ancienne (il semble que la table <code>cataloginventory_stock_status</code> soit <code>cataloginventory_stock_status</code> comme <code>inventory_stock_1</code> pour l'entrep√¥t <code>default</code> dans la nouvelle structure). </p><br><h2 id="cataloginventory_">  cataloginventory_ </h2><br><p>  Lors du d√©ploiement de Magneto 2.3, nous avons initialement 2 entr√©es dans <code>store_website</code> , ce qui correspond √† deux sites - le client administratif et le client principal: </p><br><pre> <code class="plaintext hljs">website_id|code |name |sort_order|default_group_id|is_default| ----------|-----|------------|----------|----------------|----------| 0|admin|Admin | 0| 0| 0| 1|base |Main Website| 0| 1| 1|</code> </pre> <br><p>  Dans la table <code>cataloginventory_stock</code> , nous n'avons qu'une seule entr√©e: </p><br><pre> <code class="plaintext hljs">stock_id|website_id|stock_name| --------|----------|----------| 1| 0|Default |</code> </pre> <br><p>  Autrement dit, dans notre ancienne structure, il n'y a qu'un seul ¬´entrep√¥t¬ª ( <code>stock</code> ) et il est li√© au site Web administratif.  L'ajout de nouvelles <code>sources</code> / <code>stocks</code> au MSI via le <code>stocks</code> administration (nouvelle structure) ne conduit pas √† de nouvelles entr√©es dans <code>cataloginventory_stock</code> . </p><br><p>  Les donn√©es d'inventaire sur les produits de l'ancienne structure sont initialement √©crites dans les tableaux: </p><br><ul><li> <code>cataloginventory_stock_item</code> </li> <li> <code>cataloginventory_stock_status</code> </li> </ul><br><h3 id="cataloginventory_stock_item">  cataloginventory_stock_item </h3><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createOldItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($prodId, $qty)</span></span></span><span class="hljs-function"> </span></span>{ $isQtyDecimal = (((int)$qty) != $qty); $isInStock = ($qty &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\App\ResourceConnection $this-&gt;resource */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\DB\Adapter\Pdo\Mysql $conn */</span></span> $conn = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getConnection(); $table = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getTableName(<span class="hljs-string"><span class="hljs-string">'cataloginventory_stock_item'</span></span>); $bind = [ <span class="hljs-string"><span class="hljs-string">'product_id'</span></span> =&gt; $prodId, <span class="hljs-comment"><span class="hljs-comment">/* we use one only stock in 'cataloginventory' structure by default */</span></span> <span class="hljs-string"><span class="hljs-string">'stock_id'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'qty'</span></span> =&gt; $qty, <span class="hljs-string"><span class="hljs-string">'is_qty_decimal'</span></span> =&gt; $isQtyDecimal, <span class="hljs-string"><span class="hljs-string">'is_in_stock'</span></span> =&gt; $isInStock, <span class="hljs-comment"><span class="hljs-comment">/* default stock is bound to admin website (see `cataloginventory_stock`) */</span></span> <span class="hljs-string"><span class="hljs-string">'website_id'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ]; $conn-&gt;insert($table, $bind); }</code> </pre> <br><h3 id="cataloginventory_stock_status">  cataloginventory_stock_status </h3><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createOldStatus</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($prodId, $qty)</span></span></span><span class="hljs-function"> </span></span>{ $isInStock = ($qty &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\App\ResourceConnection $this-&gt;resource */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\DB\Adapter\Pdo\Mysql $conn */</span></span> $conn = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getConnection(); $table = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getTableName(<span class="hljs-string"><span class="hljs-string">'cataloginventory_stock_status'</span></span>); $bind = [ <span class="hljs-string"><span class="hljs-string">'product_id'</span></span> =&gt; $prodId, <span class="hljs-comment"><span class="hljs-comment">/* we use one only stock in 'cataloginventory' structure by default */</span></span> <span class="hljs-string"><span class="hljs-string">'stock_id'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'qty'</span></span> =&gt; $qty, <span class="hljs-string"><span class="hljs-string">'stock_status'</span></span> =&gt; \Magento\CatalogInventory\Api\Data\StockStatusInterface::STATUS_IN_STOCK, <span class="hljs-comment"><span class="hljs-comment">/* default stock is bound to admin website (see `cataloginventory_stock`) */</span></span> <span class="hljs-string"><span class="hljs-string">'website_id'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ]; $conn-&gt;insert($table, $bind); }</code> </pre> <br><h2 id="inventory_">  inventaire_ </h2><br><p>  Initialement, la nouvelle structure de stockage des donn√©es d'inventaire contient 1 " <em>source</em> " ( <code>inventory_source</code> ): </p><br><pre> <code class="plaintext hljs">source_code|name |enabled|description |latitude|longitude|country_id|...| -----------|--------------|-------|--------------|--------|---------|----------|...| default |Default Source| 1|Default Source|0.000000| 0.000000|US |...|</code> </pre> <br><p>  et un " <em>entrep√¥t</em> " ( <code>inventory_stock</code> ): </p><br><pre> <code class="plaintext hljs">stock_id|name | --------|-------------| 1|Default Stock|</code> </pre> <br><p>  Une ¬´ <em>source</em> ¬ª est un magasin physique de produits (le dossier contient des coordonn√©es physiques et une adresse postale).  Un " <em>entrep√¥t</em> " est une union logique de plusieurs "sources" ( <code>inventory_source_stock_link</code> ) </p><br><pre> <code class="plaintext hljs">link_id|stock_id|source_code|priority| -------|--------|-----------|--------| 1| 1|default | 1|</code> </pre> <br><p>  au niveau duquel existe un lien vers le canal de vente ( <code>inventory_stock_sales_channel</code> ) </p><br><pre> <code class="plaintext hljs">type |code|stock_id| -------|----|--------| website|base| 1|</code> </pre> <br><p>  √Ä en juger par la structure des donn√©es, diff√©rents types de canaux de vente sont suppos√©s, mais par d√©faut, seule la connexion " <em>stock</em> " - " <em>site Web</em> " est utilis√©e (le lien vers le site Web est fourni par la <code>base</code> code du site Web). </p><br><p>  Un ¬´ <em>entrep√¥t</em> ¬ª peut √™tre li√© √† plusieurs ¬´ <em>sources</em> ¬ª et une ¬´ <em>source</em> ¬ª peut √™tre li√©e √† plusieurs ¬´ <em>entrep√¥ts</em> ¬ª (relation plusieurs-√†-plusieurs).  Les exceptions sont default'ovye " <em>source</em> " et " <em>entrep√¥t</em> ".  Ils ne se lient pas √† d'autres entit√©s (restriction au niveau du code - l'erreur " <em>Impossible d'enregistrer le lien li√© √† la source par d√©faut ou au stock par d√©faut</em> " se bloque).  Vous pouvez en savoir plus sur la structure MSI dans Magento 2 dans l'article " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Syst√®me de gestion d'entrep√¥t utilisant CQRS et Event Sourcing. Conception</a> ". </p><br><p>  J'utiliserai la configuration par d√©faut et ajouterai toutes les informations d'inventaire √† la source <code>default</code> , qui est utilis√©e dans le canal de vente associ√© au site Web avec le code de <code>base</code> (correspond √† la partie client du magasin - voir <code>store_website</code> ): </p><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createNewItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($sku, $qty)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\App\ResourceConnection $this-&gt;resource */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\DB\Adapter\Pdo\Mysql $conn */</span></span> $conn = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getConnection(); $table = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getTableName(<span class="hljs-string"><span class="hljs-string">'inventory_source_item'</span></span>); $bind = [ <span class="hljs-string"><span class="hljs-string">'source_code'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'default'</span></span>, <span class="hljs-string"><span class="hljs-string">'sku'</span></span> =&gt; $sku, <span class="hljs-string"><span class="hljs-string">'quantity'</span></span> =&gt; $qty, <span class="hljs-string"><span class="hljs-string">'status'</span></span> =&gt; \Magento\InventoryApi\Api\Data\SourceItemInterface::STATUS_IN_STOCK ]; $conn-&gt;insert($table, $bind); }</code> </pre> <br><p>  Apr√®s avoir ajout√© des donn√©es d'inventaire au produit dans le panneau d'administration, nous obtenons cette image: </p><br><p><img src="https://habrastorage.org/webt/o1/pa/31/o1pa31wrecqqgma118t-9jqokqg.png" alt="image"></p><br><h1 id="media">  M√©dias </h1><br><p>  Lors de l'ajout "manuel" d'images au produit via le panneau d'administration, les informations pertinentes sont enregistr√©es dans les tableaux suivants: </p><br><ul><li>  <code>catalog_product_entity_media_gallery</code> : registre m√©dia (images et fichiers vid√©o); </li><li>  <code>catalog_product_entity_media_gallery_value</code> : relier les m√©dias aux produits et aux vitrines (localisation); </li><li>  <code>catalog_product_entity_media_gallery_value_to_entity</code> : liaison des m√©dias uniquement aux produits (vraisemblablement le contenu multim√©dia par d√©faut du produit); </li><li>  <code>catalog_product_entity_varchar</code> : les r√¥les qui utilisent l'image sont enregistr√©s ici; </li></ul><br><p>  et les images elles-m√™mes sont enregistr√©es dans le r√©pertoire <code>./pub/media/catalog/product/x/y/</code> , o√π <code>x</code> et <code>y</code> sont les premi√®re et deuxi√®me lettres du nom du fichier image.  Par exemple, le fichier <code>image.png</code> doit √™tre enregistr√© sous <code>./pub/media/catalog/product/i/m/image.png</code> afin que la plateforme puisse l'utiliser comme image lors de la description des produits du catalogue. </p><br><h2 id="catalog_product_entity_media_gallery">  catalog_product_entity_media_gallery </h2><br><p>  Nous enregistrons le fichier multim√©dia situ√© dans <code>./pub/media/catalog/product/</code> (le processus de placement du fichier dans cet article n'est pas pris en compte): </p><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createMediaGallery</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($imgPathPrefixed)</span></span></span><span class="hljs-function"> </span></span>{ $attrId = <span class="hljs-comment"><span class="hljs-comment">/* get attribute ID by attribute code 'media_gallery' */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\App\ResourceConnection $this-&gt;resource */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\DB\Adapter\Pdo\Mysql $conn */</span></span> $conn = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getConnection(); $table = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getTableName(<span class="hljs-string"><span class="hljs-string">'catalog_product_entity_media_gallery'</span></span>); $bind = [ <span class="hljs-string"><span class="hljs-string">'attribute_id'</span></span> =&gt; $attrId, <span class="hljs-string"><span class="hljs-string">'value'</span></span> =&gt; $imgPathPrefixed, <span class="hljs-comment"><span class="hljs-comment">/* 'image' or 'video' */</span></span> <span class="hljs-string"><span class="hljs-string">'media_type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'image'</span></span>, <span class="hljs-string"><span class="hljs-string">'disabled'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> ]; $conn-&gt;insert($table, $bind); $result = $conn-&gt;lastInsertId($table); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $result; }</code> </pre> <br><p>  Lors de l'enregistrement, un nouveau fichier multim√©dia se voit attribuer un identifiant. </p><br><h2 id="catalog_product_entity_media_gallery_value">  catalog_product_entity_media_gallery_value </h2><br><p>  Nous lions le fichier multim√©dia enregistr√© avec le produit correspondant pour la vitrine par d√©faut: </p><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createGalleryValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($mediaId, $prodId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\App\ResourceConnection $this-&gt;resource */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\DB\Adapter\Pdo\Mysql $conn */</span></span> $conn = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getConnection(); $table = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getTableName(<span class="hljs-string"><span class="hljs-string">'catalog_product_entity_media_gallery_value'</span></span>); $bind = [ <span class="hljs-string"><span class="hljs-string">'value_id'</span></span> =&gt; $mediaId, <span class="hljs-comment"><span class="hljs-comment">/* use admin store view by default */</span></span> <span class="hljs-string"><span class="hljs-string">'store_id'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'entity_id'</span></span> =&gt; $prodId, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-comment"><span class="hljs-comment">/* we have one only image */</span></span> <span class="hljs-string"><span class="hljs-string">'position'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'disabled'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> ]; $conn-&gt;insert($table, $bind); }</code> </pre> <br><h2 id="catalog_product_entity_media_gallery_value_to_entity">  catalog_product_entity_media_gallery_value_to_entity </h2><br><p>  Nous associons le fichier multim√©dia enregistr√© au produit correspondant sans r√©f√©rence √† une vitrine.  On ne sait pas exactement o√π ces donn√©es sont utilis√©es et pourquoi il est impossible d'acc√©der aux donn√©es de la table pr√©c√©dente, mais cette table existe et les donn√©es y sont √©crites lors de l'ajout d'une image au produit.  Par cons√©quent, comme √ßa. </p><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createGalleryValueToEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($mediaId, $prodId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\App\ResourceConnection $this-&gt;resource */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\DB\Adapter\Pdo\Mysql $conn */</span></span> $conn = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getConnection(); $table = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getTableName(<span class="hljs-string"><span class="hljs-string">'catalog_product_entity_media_gallery_value_to_entity'</span></span>); $bind = [ <span class="hljs-string"><span class="hljs-string">'value_id'</span></span> =&gt; $mediaId, <span class="hljs-string"><span class="hljs-string">'entity_id'</span></span> =&gt; $prodId ]; $conn-&gt;insert($table, $bind); }</code> </pre> <br><h2 id="catalog_product_entity_varchar">  catalog_product_entity_varchar </h2><br><p>  Un fichier multim√©dia peut √™tre utilis√© avec diff√©rents r√¥les (le code de l'attribut correspondant est indiqu√© entre parenth√®ses): </p><br><ul><li>  Base ( <code>image</code> ) </li><li>  Petite image ( <code>small_image</code> ) </li><li>  Vignette ( <code>thumbnail</code> ) </li><li>  Image Swatch ( <code>swatch_image</code> ) </li></ul><br><p>  La liaison de r√¥les √† un fichier multim√©dia se produit uniquement dans <code>catalog_product_entity_varchar</code> .  Le code de liaison est similaire au code de la section " <em>Attributs de produit de base</em> ". </p><br><p>  Apr√®s avoir ajout√© l'image au produit dans le panneau d'administration, cela se pr√©sente comme suit: </p><br><p><img src="https://habrastorage.org/webt/w-/vn/uf/w-vnufrenpxowdr5ckl8k5fqzzo.png" alt="image"></p><br><h1 id="kategorii">  Les cat√©gories </h1><br><p>  Tableaux principaux contenant des donn√©es par cat√©gorie: </p><br><ul><li>  <code>catalog_category_entity</code> : registre des cat√©gories; </li><li>  <code>catalog_category_product</code> : association de produits et cat√©gories; </li><li>  <code>catalog_category_entity_*</code> : valeurs des attributs EAV; </li></ul><br><p>  Initialement, dans une application Magento vide, le registre des cat√©gories contient 2 cat√©gories (j'ai raccourci les noms des colonnes: <code>crt</code> - <code>created_at</code> , <code>upd</code> - <code>updated_at</code> ): </p><br><pre> <code class="plaintext hljs">entity_id|attribute_set_id|parent_id|crt|upd|path|position|level|children_count| ---------|----------------|---------|---|---|----|--------|-----|--------------| 1| 3| 0|...|...|1 | 0| 0| 1| 2| 3| 1|...|...|1/2 | 1| 1| 0|</code> </pre> <br><p>  La cat√©gorie avec id = 1 est la racine de tout le r√©pertoire Magento et n'est pas disponible dans le panneau d'administration ou sur le devant.  La cat√©gorie avec id = 2 ( <em>cat√©gorie par d√©faut</em> ) est la cat√©gorie racine du magasin principal du site Web principal (magasin de site <em>Web principal</em> ) cr√©√© lors du d√©ploiement de l'application (voir <em>Admin / Magasins / Tous les magasins</em> ).  De plus, la cat√©gorie tr√®s racine du magasin √† l'avant est √©galement indisponible, uniquement ses sous-cat√©gories. </p><br><p>  √âtant donn√© que le sujet de cet article continue d'importer des donn√©es produit, je n'utiliserai pas d'enregistrement direct dans la base de donn√©es lors de la cr√©ation de cat√©gories, mais j'utiliserai les classes fournies par Magento lui-m√™me (mod√®les et r√©f√©rentiels).  L'enregistrement direct dans la base de donn√©es est utilis√© uniquement pour lier le produit import√© √† la cat√©gorie (la cat√©gorie est mapp√©e par son nom, l'ID de cat√©gorie est extrait lors de la correspondance): </p><br><pre> <code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($prodId, $catId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\App\ResourceConnection $this-&gt;resource */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> \Magento\Framework\DB\Adapter\Pdo\Mysql $conn */</span></span> $conn = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getConnection(); $table = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;resource-&gt;getTableName(<span class="hljs-string"><span class="hljs-string">'catalog_category_product'</span></span>); $bind = [ <span class="hljs-string"><span class="hljs-string">'category_id'</span></span> =&gt; $catId, <span class="hljs-string"><span class="hljs-string">'product_id'</span></span> =&gt; $prodId, ]; $conn-&gt;insert($table, $bind); }</code> </pre> <br><p>  Apr√®s avoir ajout√© un lien de produit aux cat√©gories "Cat√©gorie 1" et "Cat√©gorie 2", les d√©tails du produit dans le panneau d'administration ressemblent √† ceci: </p><br><p><img src="https://habrastorage.org/webt/p9/1l/yc/p91lycpb0w_tpqfe169n5t4djfs.png" alt="image"></p><br><h1 id="dopolnitelnye-deystviya">  Actions suppl√©mentaires </h1><br><p>  Une fois l'importation des donn√©es termin√©e, vous devez effectuer les √©tapes suppl√©mentaires suivantes: </p><br><ul><li>  indexation des donn√©es: un appel dans la console <code>./bin/magento indexer:reindex</code> ; </li><li>  R√©g√©n√©ration d'URL pour les produits / cat√©gories: vous pouvez utiliser l'extension " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">elgentos / r√©g√©n√©rer-catalogue-urls</a> " </li></ul><br><p>  Produits dans le panneau d'administration apr√®s avoir effectu√© des √©tapes suppl√©mentaires: </p><br><p><img src="https://habrastorage.org/webt/q5/ge/fd/q5gefdgdiwcxotbysfymjggmcom.png" alt="image"></p><br><p>  et √† l'avant: </p><br><p><img src="https://habrastorage.org/webt/pl/dw/6l/pldw6lefwqdxl_ye2o-debpkyz4.png" alt="image"></p><br><h1 id="rezyume">  R√©sum√© </h1><br><p>  Le m√™me ensemble de produits (10 pi√®ces) que dans l'article pr√©c√©dent est import√© au moins un ordre de grandeur plus rapidement (1 seconde contre 10).  Pour une estimation plus pr√©cise de la vitesse, vous avez besoin d'un plus grand nombre de produits - plusieurs centaines, et de pr√©f√©rence des milliers.  N√©anmoins, m√™me avec une si petite quantit√© de donn√©es d'entr√©e, on peut conclure que l'utilisation des outils fournis par Magento (mod√®les et r√©f√©rentiels) de mani√®re significative (souligner - de <em>mani√®re significative</em> !) Acc√©l√©rer le d√©veloppement de la fonctionnalit√© requise, mais de mani√®re significative (souligner - de <em>mani√®re significative</em> !) R√©duire la vitesse d'acc√®s des donn√©es √† la base de donn√©es. </p><br><p>  En cons√©quence, l'eau s'est av√©r√©e √™tre humide et ce n'est pas une r√©v√©lation.  Cependant, j'ai maintenant du code sur lequel jouer et peut-√™tre tirer des conclusions plus int√©ressantes. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr440262/">https://habr.com/ru/post/fr440262/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr440248/index.html">Les entreprises devront payer pour avoir acc√®s au profil num√©rique des citoyens</a></li>
<li><a href="../fr440250/index.html">L'occasion s'est endormie pour toujours: la NASA a reconnu la perte d'un rover</a></li>
<li><a href="../fr440252/index.html">Antiquit√©s: un ordinateur moderne √† partir de pi√®ces anciennes</a></li>
<li><a href="../fr440258/index.html">Un tramway sans pilote est actuellement test√© √† Moscou. Nous avons discut√© avec les d√©veloppeurs du pilote automatique.</a></li>
<li><a href="../fr440260/index.html">Le module Chang'e-4 et le rover Yutu-2 sont pr√™ts pour la deuxi√®me nuit de l'autre c√¥t√© de la lune</a></li>
<li><a href="../fr440264/index.html">Jeux Tetris, ou qu'est-ce que la gestion des capacit√©s dans un centre de donn√©es</a></li>
<li><a href="../fr440266/index.html">Quelques mots sur les th√©ories physiques comme approximations du monde r√©el</a></li>
<li><a href="../fr440268/index.html">D√©tournement du son: m√©canisme de g√©n√©ration de clics ultrasoniques chez les noctuelles comme protection contre les chauves-souris</a></li>
<li><a href="../fr440270/index.html">Nous consid√©rons un horaire de travail dans l'esprit</a></li>
<li><a href="../fr440272/index.html">Mobile Opera a un VPN gratuit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>