<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëàüèø üë®üèæ‚Äçüíª ü§πüèΩ Coche el√©ctrico hecho en casa: no todo es lo que piensas üç° üßê üë©üèæ‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos Mientras estudiaba en la universidad, recog√≠ un peque√±o autom√≥vil el√©ctrico, un pozo o tarjetas. Su truco fue que todo el control del acc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Coche el√©ctrico hecho en casa: no todo es lo que piensas</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473708/">  Hola a todos  Mientras estudiaba en la universidad, recog√≠ un peque√±o autom√≥vil el√©ctrico, un pozo o tarjetas.  Su truco fue que todo el control del accionamiento el√©ctrico, incluidos los frenos, se le dio a un controlador improvisado.  Y sobre c√≥mo hice este peque√±o autom√≥vil y qu√© dificultades encontr√© durante la construcci√≥n, me gustar√≠a contarlo en este material.  El material no pretende ser √∫nico, pero para m√≠ fue una gran e interesante experiencia. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0d7/ba5/bcd/0d7ba5bcd39361bb01bdd48e517dfef1.jpg" alt="imagen"><br><a name="habracut"></a><br>  El tema de la historia est√° en la uni√≥n de los aspectos de hardware y software.  Y en el firmware para el controlador, no estaba tratando con algunos conceptos o datos abstractos, sino con dispositivos "f√≠sicos" muy reales: rel√©s, motores el√©ctricos, transistores, etc.  As√≠ que dar√© una breve descripci√≥n de la parte t√©cnica, la composici√≥n que era en el momento de todos los bailes con una pandereta. <br><br><h2>  Nodos principales </h2><br>  Motor de tracci√≥n - colector universal.  Puede funcionar tanto de corriente directa como de corriente alterna.  Voltaje de operaci√≥n 220 voltios. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e16/7d7/b68/e167d7b689f2550e86b9952e6a642125.jpg" alt="imagen"><br><br>  La bater√≠a es de 25 celdas de plomo-√°cido de 6 voltios cada una fabricada por Casil, conectadas en serie, y como resultado obtenemos una bater√≠a de 150-160 voltios.  Se instala en la parte posterior y se rebobina con cinta aislante azul, todo est√° como deber√≠a :) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c0f/c4f/b13/c0fc4fb132bc5363c231df22b9ecb5c7.jpg" alt="imagen"><br><br>  El motor impulsa las ruedas a trav√©s de un engranaje helicoidal con una relaci√≥n de transmisi√≥n i = 10.  La foto muestra que el motor est√° acoplado a la caja de cambios con un rodillo peque√±o, fue mecanizado especialmente. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d6f/38c/a83/d6f38ca83b6009735c06a4f0355ce1b4.jpg" alt="imagen"><br><br>  El sistema de frenado, es decir, el disco de freno con la pinza, no estaba en principio.  Poner un freno f√≠sico en ese momento no funcion√≥.  Por lo tanto, el frenado del motor sigui√≥ siendo la √∫nica opci√≥n real, por lo que el controlador tambi√©n tuvo que tomar el control del frenado de la m√°quina. <br><br><h2>  Controlador para unidad de control </h2><br>  En principio, un controlador simple para un veh√≠culo el√©ctrico tambi√©n se puede montar en una "cama suelta".  Pero me gustar√≠a poder configurar bellamente todo con la ayuda del programa, despu√©s de todo, el siglo XXI.  Despu√©s de una larga discusi√≥n altamente cient√≠fica en la cena, decid√≠ que el microchip chip pic16f877a deber√≠a tomarse como la base del controlador, aqu√≠ est√°n sus breves caracter√≠sticas: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3d4/775/d75/3d4775d758648f5590a09594e4c5389a.jpg" alt="imagen"><br><br>  En ese momento, realmente no ten√≠a problemas con la electr√≥nica, e inicialmente quer√≠a hacer que el circuito fuera est√∫pidamente vergonzoso: el motor est√° encendido o el motor est√° apagado, pero en lugar de un rel√© coloque una llave de transistor para que nada haga clic y no se queme.  Pero decid√≠ que el riesgo estaba justificado, no perd√≠ nada y solo quer√≠a hacer algo que valiera la pena.  As√≠ que me decid√≠ por un microcontrolador + transistor de efecto de campo de potencia como clave.  El acelerador y el bot√≥n de retroceso llevaron al volante. <br><br><h2>  Caracter√≠sticas del circuito </h2><br>  Al elegir un transistor, no escatim√© y eleg√≠ IRFP4227PBF, un transistor de efecto de campo de canal N (se abre con un pulso positivo) para un voltaje de 200 voltios y una corriente m√°xima de 130 amperios.  Caso TO-247AC.  Pero, mirando hacia el futuro, dir√©: pude quemarlo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c72/18c/3ea/c7218c3ea988d6fbb05736a0d83b1f57.jpg" alt="imagen"><br><br><h2>  PWM: qu√© es y con qu√© se come </h2><br>  Como utilic√© un microcontrolador junto con un transistor de efecto de campo, fue un pecado no intentar usar pwm / pWM en el circuito.  ¬øQu√© es una cu√±a?  La modulaci√≥n de ancho de pulso (PWM) es el proceso de control de potencia mediante el m√©todo de encendido y apagado por pulsos del dispositivo.  - Gracias a Wikipedia. <br><br>  La ventaja de este m√©todo para controlar el transistor: durante la operaci√≥n, est√° en dos estados: completamente cerrado, no hay corriente y nada se calienta, o est√° completamente abierto y su resistencia es de varias millas, respectivamente, algunas fracciones de un vatio de calor se disipan en el calor del transistor. o unidades de vatios, el circuito apenas se calienta en este modo de operaci√≥n.  Y tal proceso: abrir / cerrar ocurre miles de veces por segundo.  Esto se llama frecuencia PWM.  Tambi√©n existe una cosa llamada "ciclo de trabajo".  Traducci√≥n al lenguaje humano: esta figura muestra cu√°nto tiempo est√° abierto el transistor.  Si profundizamos un poco m√°s, digamos que tenemos una frecuencia de una se√±al PWM de 1000 hertzios.  Entonces, el transistor se abre y cierra 1000 veces por segundo, y el proceso de conmutaci√≥n entre encendido y apagado es 1/1000 una fracci√≥n de segundo.  El valor 1/1000 es el per√≠odo de la frecuencia.  Y con la ayuda del ciclo de trabajo, mostramos qu√© parte del tiempo desde el per√≠odo en que el transistor est√° abierto y la corriente fluye a trav√©s de √©l.  Por ejemplo: en el programa, el ciclo de trabajo 255 es la potencia m√°xima, 127 - 50%, 0 - el transistor est√° cerrado. <br><br>  Para generar dicha frecuencia, se us√≥ el controlador "f√≠sico" integrado en el chip, aunque existe la posibilidad de implementaci√≥n de software, pero en este caso el controlador solo har√° lo que sea para generar una frecuencia con un per√≠odo espec√≠fico y un ciclo de trabajo en la salida.  Y usando un controlador desde la periferia del MK, era posible generar una se√±al, y as√≠ el programa har√≠a otra cosa. <br><br>  Cuanto m√°s se adentre en el bosque, m√°s enojados estar√°n los lobos: la eficacia del accionamiento el√©ctrico depender√° de la frecuencia de PWM.  Prob√© diferentes frecuencias, de 2 a 15 kilohercios, cada vez que cambiaba program√°ticamente.  Honestamente, no not√© mucha diferencia, pero estoy seguro de que s√≠.  Lamentablemente, los datos sobre este tema no se pudieron obtener en cantidades suficientes.  Lo √∫nico que not√© fue que la m√°quina chirri√≥ a diferentes frecuencias durante la operaci√≥n.  Por cierto, si alguien not√≥ en el metro, autobuses el√©ctricos y trenes que durante el inicio escuchas un retumbar, un chirrido, un aullido: este es el mismo chirrido de los devanados del motor debido al trabajo en las frecuencias del controlador.  Esto es muy notable en el tren "Swallow", que recorre el CCM durante el inicio. <br><br><h2>  Errores en el algoritmo de trabajo </h2><br>  El siguiente problema fue con el motor en reversa.  El motor es un colector, tiene dos devanados, inm√≥vil, un estator, en el cuerpo y giratorio, un rotor.  Para cambiar la direcci√≥n de rotaci√≥n, es necesario desplegar la direcci√≥n de la corriente en uno de los devanados, no yo en la direcci√≥n del otro.  Para esto, se utilizaron dos rel√©s, que funcionaron simult√°neamente, "lanzando" el circuito para revertir cuando se les suministr√≥ energ√≠a.  Pero en la primera versi√≥n del firmware hubo un error: los rel√©s cambiaron bajo carga.  Como resultado de la prueba bajo carga, hay dos rel√©s quemados, ya que el motor es una carga inductiva y hubo un fuerte arco en los contactos del rel√©, los contactos simplemente se derritieron y quemaron durante la conmutaci√≥n. <br><br>  La forma de salir de la situaci√≥n es introducir en el programa la condici√≥n de que antes de apagarla eliminamos la carga desenroscando el ciclo de trabajo de la se√±al PWM en 0, lanzamos el rel√© y volvemos la potencia al nivel establecido.  As√≠ es exactamente como funcionaban los frenos del autom√≥vil: marcha atr√°s.  Solo hardcore: sin sensores y codificadores, nada.  Y aqu√≠ est√° la foto del relevo, es como una retransmisi√≥n de arranque del Lada.  Si los cambia sin carga, tambi√©n funcionan con altos voltajes, mantuvieron 160 voltios a 15 amperios, pero admito que los contactos se calentaron debido a la peque√±a secci√≥n transversal. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1b/358/156/f1b35815670bb9af015657ad127eb8aa.jpg" alt="imagen"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/3b7/773/5c6/3b77735c6de9a2be1be39ce765877dd5.jpg" alt="imagen"><br><br>  Despu√©s de que termin√© el firmware, y la potencia aument√≥ sin problemas a un nivel determinado.  Y esto ya elimina el choque en la transmisi√≥n y la carga en los nodos.  As√≠ es como una l√≠nea en el programa puede aumentar la vida √∫til de la unidad. <br><br><h2>  Conectamos el controlador con el transistor correctamente </h2><br>  Solo quedaba conectar correctamente el transistor con el controlador.  Hice esto de forma incorrecta, a trav√©s de un par √≥ptico, directamente.  Pero este circuito funciona cuando se trabaja con voltajes bajos, a voltajes de operaci√≥n altos, el obturador del transistor se quema constantemente, y se necesita un controlador push-pull para controlar.  El circuito normal se muestra a continuaci√≥n.  Sin embargo, en un momento, el circuito con un par √≥ptico fue suficiente, por alg√∫n milagro, funcion√≥ para una prueba de manejo, y comenz√≥ a quemarse inmediatamente despu√©s.  Aqu√≠ est√° el diagrama del controlador "correcto", solo en mi versi√≥n todav√≠a hab√≠a un desacoplamiento de la √≥ptica del controlador.  Imagen tomada de Drive2: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/723/f64/92d/723f6492daa996d517a83d2ad563376e.jpg" alt="imagen"><br><br><h2>  Algunos puntos interesantes </h2><br><ul><li>  Al arrancar, el motor el√©ctrico consume muchas veces m√°s electricidad incluso sin carga.  Y cuando el rotor frenaba durante el arranque, los cepillos de grafito comenzaron a humear. </li><li>  En ese momento, cuando el transistor se quema en la m√°quina, comienza a funcionar solo, porque solo el transistor separa la bater√≠a del motor.  Por lo tanto, la introducci√≥n de esquemas de protecci√≥n se justifica si no desea correr detr√°s del autom√≥vil y rezar para que no golpee a nadie. </li><li>  El motor que utilic√© es de una lavadora.  Volumen de negocios sin carga, reclam√≥ 14,000, es dif√≠cil de creer, pero esta cifra estaba en la placa de identificaci√≥n.  Aunque tira perfectamente "desde abajo". </li><li>  El voltaje en la bater√≠a se hunde, sin una carga que ten√≠a alrededor de 150 voltios, puede estar tranquilamente 140 bajo carga. Y si la bater√≠a est√° demasiado baja, entonces 130, debido a esto, el autom√≥vil podr√≠a conducir muy bien con bater√≠as nuevas durante los primeros minutos, luego, cuando las bater√≠as se gastaron En alg√∫n lugar alrededor del 20-30% de la energ√≠a, m√°s o menos comenz√≥ el modo de funcionamiento, el autom√≥vil conduc√≠a m√°s lentamente, aceler√≥ m√°s lentamente, pero no era tan notable.  Cuando las bater√≠as consumieron aproximadamente el 70% de la carga, el viaje se convirti√≥ en un curso de tortuga. </li><li>  Incluso logr√© quemar un transistor bastante potente debido a una sobretensi√≥n en su obturador.  Para protegerse contra esto, debe derivar la puerta del transistor con un diodo a la fuente de alimentaci√≥n + del controlador del transistor. </li><li>  Los rel√©s se conectaron al MK utilizando interruptores de transistor de baja potencia en peque√±os ratones. </li></ul><br><h2>  Al final, lo que sucedi√≥ en el video </h2><br><iframe width="560" height="315" src="https://www.youtube.com/embed/3tFyz7RdQ7k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  En general, mis experimentos con el motor el√©ctrico comenzaron en la escuela y prob√© muchos dise√±os diferentes, pero este es el esquema m√°s exitoso en ese momento.  Si te gusta el material, escribir√© una publicaci√≥n separada sobre toda la epopeya. <br><br>  UPD: Cambi√≥ los errores en el art√≠culo, gracias a todos los que respondieron </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/473708/">https://habr.com/ru/post/473708/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../473692/index.html">Ennoble Phicomm K3C Router Wi-Fi</a></li>
<li><a href="../473694/index.html">Rusia es un centro global de desarrollo CAD. ¬øSab√≠as esto?</a></li>
<li><a href="../473702/index.html">¬øQu√© se est√° fragmentando en la cadena de bloques terahash?</a></li>
<li><a href="../473704/index.html">Bro vs. no hermano</a></li>
<li><a href="../473706/index.html">Zoia: CMS reactivo ligero para el desarrollo r√°pido de sitios web</a></li>
<li><a href="../473710/index.html">Los principios de documentaci√≥n y localizaci√≥n, o c√≥mo obtener una buena localizaci√≥n a un costo m√≠nimo.</a></li>
<li><a href="../473714/index.html">C√≥mo llegu√© a la especificaci√≥n formal de un procesador RISC-V en F #</a></li>
<li><a href="../473716/index.html">Widgets accionados por mouse. Arrastra y suelta dentro de la ventana</a></li>
<li><a href="../473718/index.html">C√≥mo agregar cheques a NoVerify sin escribir una sola l√≠nea de c√≥digo Go</a></li>
<li><a href="../473720/index.html">Dos formas de hacer pruebas unitarias confiables</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>