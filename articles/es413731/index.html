<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游녩游 游뗸游 游꼚 BA / SA Investigaci칩n de mercado laboral 鮫勇 游뱙 游뛆</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Investigar el mercado de vacantes de analistas" era la tarea muy real de un analista l칤der muy real de una empresa grande o peque침a. El analizador re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>BA / SA Investigaci칩n de mercado laboral</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413731/"><p>  "Investigar el mercado de vacantes de analistas" era la tarea muy real de un analista l칤der muy real de una empresa grande o peque침a.  El analizador reparte docenas de descripciones de trabajo con hh manualmente, dispers치ndolas de acuerdo con las habilidades solicitadas y aumentando el contador en la columna de la hoja de c치lculo correspondiente. </p><br><p>  Vi en esta tarea un buen campo para la automatizaci칩n y decid칤 tratar de manejarlo con menos sangre, f치cil y simplemente. </p><br><p>  Me interesaron las siguientes cuestiones planteadas en este estudio: </p><br><ul><li>  salario promedio para analistas de negocios y sistemas, </li><li>  las habilidades y cualidades personales m치s demandadas en este puesto, </li><li>  dependencias (si las hay) entre ciertas habilidades y el nivel de salario. </li></ul><br><p>  Spoiler: no funcion칩 f치cil y simplemente. </p><a name="habracut"></a><br><h1 id="podgotovka-dannyh">  Preparaci칩n de datos </h1><br><p>  Si queremos recopilar muchos datos sobre vacantes, entonces es l칩gico que no est칠 limitado.  Sin embargo, para <del>  experimentar pureza </del>  simplicidad, comenzamos con este recurso. </p><br><h2 id="sbor">  Coleccion </h2><br><p>  Para recopilar datos, utilizaremos la <a href="">b칰squeda de empleo a</a> trav칠s de la API hh. </p><br><p>  Buscar칠 utilizando la consulta de texto simple "analista de sistemas", "analista de negocios" y "propietario del producto", porque las actividades y 치reas de responsabilidad en estos puestos, por regla general, se superponen. </p><br><p> Para hacer esto, cree una solicitud del formulario <code>https://api.hh.ru/vacancies?text="systems+analyst"</code> y analice el JSON recibido. </p><br><p>  Para obtener las vacantes m치s relevantes en la muestra, buscaremos solo en los encabezados de vacantes agregando el par치metro <code>search_field=name</code> a la consulta. </p><br><p>  <a href="">Aqu칤</a> puede ver qu칠 campos de vacantes se devuelven para esta solicitud.  Eleg칤 lo siguiente: </p><br><ul><li>  t칤tulo del trabajo </li><li>  la ciudad </li><li>  fecha de publicaci칩n </li><li>  salario - l칤mites superior e inferior </li><li>  moneda en la que se indica el salario </li><li>  bruto - T / F </li><li>  la compa침ia </li><li>  responsabilidades </li><li>  requisitos para el candidato </li></ul><br><p>  Adem치s, quiero analizar m치s a fondo las habilidades que se indican en la secci칩n Habilidades clave, pero esta secci칩n solo est치 disponible en la descripci칩n completa del trabajo.  Por lo tanto, tambi칠n mantendr칠 enlaces a las vacantes encontradas, para obtener posteriormente una lista de habilidades para cada una de ellas. </p><br><div class="spoiler">  <b class="spoiler_title">Ver c칩digo</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">#     :) library(jsonlite) library(curl) library(dplyr) library(ggplot2) library(RColorBrewer) library(plotly) hh.getjobs &lt;- <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(query, paid = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>) { # Makes a <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> hh API <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> gets the list <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> vacancies based <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> the given <span class="hljs-keyword"><span class="hljs-keyword">search</span></span> queries df &lt;- data.frame( query = <span class="hljs-type"><span class="hljs-type">character</span></span>() #    , URL = <span class="hljs-type"><span class="hljs-type">character</span></span>() #    , id = <span class="hljs-type"><span class="hljs-type">numeric</span></span>() # id  , <span class="hljs-type"><span class="hljs-type">Name</span></span> = <span class="hljs-type"><span class="hljs-type">character</span></span>() #   , City = <span class="hljs-type"><span class="hljs-type">character</span></span>() , Published = <span class="hljs-type"><span class="hljs-type">character</span></span>() , Currency = <span class="hljs-type"><span class="hljs-type">character</span></span>() , <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> = <span class="hljs-type"><span class="hljs-type">numeric</span></span>() # .    , <span class="hljs-keyword"><span class="hljs-keyword">To</span></span> = <span class="hljs-type"><span class="hljs-type">numeric</span></span>() # .  , Gross = <span class="hljs-type"><span class="hljs-type">character</span></span>() , Company = <span class="hljs-type"><span class="hljs-type">character</span></span>() , Responsibility = <span class="hljs-type"><span class="hljs-type">character</span></span>() , Requerement = <span class="hljs-type"><span class="hljs-type">character</span></span>() , stringsAsFactors = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (q <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> query) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (pageNum <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">99</span></span>) { try( { data &lt;- fromJSON(paste0("https://api.hh.ru/vacancies?search_field=name&amp;text=\"" , q , "\"&amp;search_field=name" , "&amp;only_with_salary=", paid ,"&amp;page=" , pageNum)) df &lt;- rbind(df, data.frame( q, data$items$<span class="pgsql"><span class="pgsql">url, </span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">as</span></span></span><span class="pgsql">.numeric(data$items$</span><span class="undefined"></span></span><span class="pgsql"><span class="undefined"></span></span>id), data$items$<span class="pgsql"><span class="hljs-type"><span class="pgsql"><span class="hljs-type">name</span></span></span><span class="pgsql">, data$items$</span><span class="undefined"></span></span><span class="pgsql"><span class="undefined"></span></span>area$<span class="hljs-type"><span class="hljs-type">name</span></span>, data$items$<span class="perl"><span class="perl">published_at, data$items$</span></span>salary$currency, data$items$<span class="perl"><span class="perl">salary$from, data$items$</span></span>salary$<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>, data$items$<span class="perl"><span class="perl">salary$gross, data$items$</span></span>employer$<span class="hljs-type"><span class="hljs-type">name</span></span>, data$items$<span class="perl"><span class="perl">snippet$responsibility, data$items$</span></span>snippet$requirement, stringsAsFactors = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>)) }) print(paste0("Downloading page:", pageNum + <span class="hljs-number"><span class="hljs-number">1</span></span>, "; query = \"", q, "\"")) } } names &lt;- c("query", "URL", "id", "Name", "City", "Published", "Currency", "From", "To", "Gross", "Company", "Responsibility", "Requirement") colnames(df) &lt;- names <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df) }</code> </pre> </div></div><br><p>  En la funci칩n <code>hh.getjobs()</code> , la entrada acepta el vector de consultas de b칰squeda de inter칠s y refinamiento, solo nos interesan las vacantes con el salario especificado o todo en una fila (por defecto tomamos la segunda opci칩n).  Se crea un marco de dafa vac칤o, y luego se <code>fromJSON()</code> funci칩n <code>fromJSON()</code> del paquete <code>fromJSON()</code> , que toma la URL de entrada y devuelve una lista estructurada.  A continuaci칩n, de los nodos en esta lista, obtenemos los datos que nos interesan y completamos los campos del marco de datos correspondientes. </p><br><p>  Por defecto, los datos se proporcionan p치gina por p치gina, con 20 elementos en cada p치gina.  Para un m치ximo de 2,000 vacantes laborales.  Todos los datos que recibimos se registran en <code>df</code> . </p><br><p>  <strong>Life hack 1:</strong> no es un hecho que, a pedido nuestro, haya 2.000 vacantes y, en alg칰n momento, recibiremos p치ginas en blanco.  En este caso, R jura y salta del bucle.  Por lo tanto, envolvemos cuidadosamente el contenido del bucle interno en <code>try()</code> . </p><br><p>  <strong>Life hack 2:</strong> tambi칠n tiene sentido agregar la salida del estado actual de recopilaci칩n de datos a la consola en el bucle interno, porque este no es un negocio r치pido.  Hice esto: </p><br><pre> <code class="hljs lisp">print(<span class="hljs-name"><span class="hljs-name">paste0</span></span>(<span class="hljs-string"><span class="hljs-string">"Downloading page:"</span></span>, pageNum + <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"; query = \""</span></span>, query, <span class="hljs-string"><span class="hljs-string">"\""</span></span>))</code> </pre> <br><p>  Despu칠s de completar los datos, las columnas se renombran para que sea conveniente trabajar con ellas y se devuelve el marco de datos resultante. </p><br><p>  Almacenar칠 esta y otras funciones auxiliares en un archivo de <code>functions.R</code> separado para no saturar el script principal, que hasta ahora se ve as칤: </p><br><pre> <code class="hljs pgsql">source("functions.R") # Step <span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> data # <span class="hljs-number"><span class="hljs-number">1.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> vacancies (short <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>) jobdf &lt;- hh.getjobs(query = c("business+analyst" , "systems+analyst" , "product+owner"), paid = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>)</code> </pre> <br><p>  Ahora obtendremos <code>experience</code> y <code>key_skills</code> de la <a href="">descripci칩n completa del trabajo</a> . </p><br><p>  <code>hh.getxp</code> el marco de datos a la funci칩n <code>hh.getxp</code> , seguimos los enlaces guardados a las vacantes, y de la descripci칩n completa obtenemos el valor de la experiencia laboral requerida.  El valor resultante se almacena en una nueva columna. </p><br><div class="spoiler">  <b class="spoiler_title">Ver c칩digo</b> <div class="spoiler_text"><pre> <code class="hljs powershell">hh.getxp &lt;- function(df) { df<span class="hljs-variable"><span class="hljs-variable">$experience</span></span> &lt;- NA <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (myURL <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> df<span class="hljs-variable"><span class="hljs-variable">$URL</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>( { <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> &lt;- fromJSON(myURL) df[<span class="hljs-type"><span class="hljs-type">df</span></span><span class="hljs-variable"><span class="hljs-variable">$URL</span></span> == <span class="hljs-type"><span class="hljs-type">myURL</span></span>, <span class="hljs-string"><span class="hljs-string">"experience"</span></span>] &lt;- <span class="hljs-keyword"><span class="hljs-keyword">data</span></span><span class="hljs-variable"><span class="hljs-variable">$experience</span></span><span class="hljs-variable"><span class="hljs-variable">$name</span></span> } ) print(paste0(<span class="hljs-string"><span class="hljs-string">"Filling in "</span></span>, which(df<span class="hljs-variable"><span class="hljs-variable">$URL</span></span> == myURL, arr.ind = TRUE), <span class="hljs-string"><span class="hljs-string">"from "</span></span>, nrow(df))) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df) }</code> </pre> </div></div><br><p>  La descripci칩n de la nueva funci칩n auxiliar se env칤a a <code>functions.R</code> , y el script principal ahora accede a ella: </p><br><pre> <code class="hljs pgsql"># s<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> experience (<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">full</span></span> <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>) jobdf &lt;- hh.getxp(jobdf) # <span class="hljs-number"><span class="hljs-number">1.3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> skills (<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">full</span></span> <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>.skills &lt;- hh.getskills(jobdf$URL)</code> </pre> <br><p>  En el fragmento anterior, tambi칠n formamos un nuevo marco de datos <code>all.skills</code> formulario "job id - skill": </p><br><div class="spoiler">  <b class="spoiler_title">Ver c칩digo</b> <div class="spoiler_text"><pre> <code class="hljs mel">hh.getskills &lt;- function(allurls) { analyst.skills &lt;- data.frame( id = <span class="hljs-keyword"><span class="hljs-keyword">character</span></span>(), # id  skill = <span class="hljs-keyword"><span class="hljs-keyword">character</span></span>() #   ) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (myURL <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> allurls) { data &lt;- fromJSON(myURL) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (length(data$key_skills) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) analyst.skills &lt;- rbind(analyst.skills, cbind(data$id, data$key_skills)) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(paste0(<span class="hljs-string"><span class="hljs-string">"Filling in "</span></span> , which(allurls == myURL, arr.ind = TRUE) , <span class="hljs-string"><span class="hljs-string">" out of "</span></span> , length(allurls))) } names(analyst.skills) &lt;- c(<span class="hljs-string"><span class="hljs-string">"id"</span></span>, <span class="hljs-string"><span class="hljs-string">"skill"</span></span>) analyst.skills$skill &lt;- <span class="hljs-keyword"><span class="hljs-keyword">tolower</span></span>(analyst.skills$skill) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(analyst.skills) }</code> </pre> </div></div><br><h2 id="preprocessing">  Preprocesamiento </h2><br><p>  Veamos cu치ntos datos hemos logrado recopilar: </p><br><pre> <code class="hljs perl">&gt; <span class="hljs-keyword"><span class="hljs-keyword">length</span></span>(unique(jobdf$id)) [<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-number"><span class="hljs-number">1478</span></span> &gt; <span class="hljs-keyword"><span class="hljs-keyword">length</span></span>(jobdf$id) [<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-number"><span class="hljs-number">1498</span></span></code> </pre> <br><p>  춰Casi mil quinientos empleos!  Se ve bien  Y aparentemente, varias vacantes entraron en los resultados de b칰squeda dos veces, para diferentes solicitudes.  Por lo tanto, el primer paso es dejar solo entradas 칰nicas: <code>jobdf &lt;- jobdf[unique(jobdf$id),]</code> . </p><br><p>  Para comparar los salarios de los analistas del mercado laboral, necesito </p><br><p>  1) aseg칰rese de que todos los datos disponibles sobre salarios se presenten en una moneda 칰nica, </p><br><p>  2) seleccione en un marco de datos separado aquellas vacantes para las cuales se indica el salario. </p><br><p>  Consideramos cada una de las subtareas con m치s detalle.  Anteriormente, puede averiguar qu칠 monedas se encuentran, en principio, en nuestros datos utilizando la <code>table(jobdf$Currency)</code> .  En mi caso, adem치s de rublos, aparecieron d칩lares, euros, hryvnias, tenge kazajo e incluso sumas uzbecas. </p><br><p>  Para convertir los valores salariales en rublos, debe averiguar el tipo de cambio actual.  Descubriremos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desde el Banco Central</a> : </p><br><div class="spoiler">  <b class="spoiler_title">Ver c칩digo</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">quotations.<span class="hljs-keyword"><span class="hljs-keyword">update</span></span> &lt;- <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(currencies) { # Parses the most up-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-<span class="hljs-type"><span class="hljs-type">date</span></span> qutations data provided <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> the Central Bank <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> Russia # <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">returns</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> currency rate against RUR doc &lt;- <span class="hljs-type"><span class="hljs-type">XML</span></span>::xmlParse("http://www.cbr.ru/scripts/XML_daily.asp") quotationsdf &lt;- <span class="hljs-type"><span class="hljs-type">XML</span></span>::xmlToDataFrame(doc, stringsAsFactors = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>) quotationsdf &lt;- <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(quotationsdf, -<span class="hljs-type"><span class="hljs-type">Name</span></span>) quotationsdf$NumCode &lt;- <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.numeric(quotationsdf$NumCode) quotationsdf$Nominal &lt;- <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.numeric(quotationsdf$Nominal) quotationsdf$<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span> &lt;- <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.numeric(sub(",", ".", quotationsdf$<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span>)) quotationsdf$<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span> &lt;- quotationsdf$<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span> / quotationsdf$Nominal quotationsdf &lt;- quotationsdf %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(CharCode, <span class="hljs-keyword"><span class="hljs-keyword">Value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(quotationsdf) }</code> </pre> </div></div><br><p>  Para asegurarse de que los cursos se procesen correctamente en R, debe asegurarse de que la parte decimal est칠 separada por un punto.  Adem치s, debe prestar atenci칩n a la columna Nominal: en alg칰n lugar es 1, en alg칰n lugar 10 o 100. Esto significa que una libra esterlina cuesta ~ 85 rublos y, por ejemplo, por cien drams armenios puede comprar ~ 13 rublos.  Para la conveniencia de un procesamiento adicional, reduje los valores a un valor nominal de 1 en relaci칩n con el rublo. </p><br><p>  Ahora puedes traducir.  Nuestro script hace esto usando la funci칩n <code>convert.currency()</code> .  El tipo de cambio actual se toma de la tabla de <code>quotations</code> , donde guardamos los datos del XML proporcionado por el Banco Central.  Adem치s, la funci칩n de entrada acepta la moneda objetivo para la conversi칩n (por defecto RUR) y una tabla con vacantes, los valores de los tenedores de salarios en los que es necesario conducir a una moneda 칰nica.  La funci칩n devuelve una tabla con d칤gitos de salario actualizados (ya sin la columna Moneda, como innecesaria). </p><br><p>  Tuve que jugar con los rublos bielorrusos: despu칠s de recibir datos muy extra침os en varios enfoques, realic칠 una peque침a investigaci칩n y descubr칤 que desde 2016 se ha utilizado una nueva moneda en Bielorrusia, que difiere no solo en el tipo de cambio, sino tambi칠n en la abreviatura (ahora no BYR, sino BYN) .  En los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">directorios</a> hh, todav칤a se usa la abreviatura BYR, sobre la cual XML del Banco Central no sabe nada.  Por lo tanto, en la funci칩n <code>convert.currency()</code> I <del>  no de la manera m치s elegante </del>  Primero, reemplazo la abreviatura con la actual, y solo luego voy directamente a la conversi칩n. </p><br><p>  Se ve as칤: </p><br><div class="spoiler">  <b class="spoiler_title">Ver c칩digo</b> <div class="spoiler_text"><pre> <code class="hljs mel">convert.currency &lt;- function(targetCurrency = <span class="hljs-string"><span class="hljs-string">"RUR"</span></span>, df, quotationsdf) { cond &lt;- (!is.na(df$Currency) &amp; df$Currency == <span class="hljs-string"><span class="hljs-string">"BYR"</span></span>) df[cond, <span class="hljs-string"><span class="hljs-string">"Currency"</span></span>] &lt;- <span class="hljs-string"><span class="hljs-string">"BYN"</span></span> currencies &lt;- unique(na.omit(df$Currency[df$Currency != targetCurrency])) #     ( ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!is.null(df$From)) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (currency <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> currencies) { <span class="hljs-keyword"><span class="hljs-keyword">condition</span></span> &lt;- (!is.na(df$From) &amp; df$Currency == currency) try( df$From[<span class="hljs-keyword"><span class="hljs-keyword">condition</span></span>] &lt;- df$From[<span class="hljs-keyword"><span class="hljs-keyword">condition</span></span>] * quotationsdf$Value[quotationsdf$CharCode == currency] ) } } #     ( ) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!is.null(df$To)) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (currency <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> currencies) { <span class="hljs-keyword"><span class="hljs-keyword">condition</span></span> &lt;- !is.na(df$To) &amp; df$Currency == currency try( df$To[<span class="hljs-keyword"><span class="hljs-keyword">condition</span></span>] &lt;- df$To[<span class="hljs-keyword"><span class="hljs-keyword">condition</span></span>] * quotationsdf$Value[quotationsdf$CharCode == currency] ) } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(-Currency)) }</code> </pre> </div></div><br><p>  Tambi칠n puede tener en cuenta que algunos datos sobre salarios se presentan en valores brutos, es decir, el empleado recibir치 un poco menos en la mano.  Para calcular el salario neto de los residentes de la Federaci칩n de Rusia, el 13% debe deducirse de estas cifras (el 30% se deduce para los no residentes). </p><br><div class="spoiler">  <b class="spoiler_title">Ver c칩digo</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">gross.<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>.net &lt;- <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(df, resident = <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (resident == <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>) coef &lt;- <span class="hljs-number"><span class="hljs-number">0.87</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> coef &lt;- <span class="hljs-number"><span class="hljs-number">0.7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>(df$Gross)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>(df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>)) #     ( ) { <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> &lt;- na.omit(<span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.numeric(rownames(df[!<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>) &amp; df$Gross == <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>,]))) df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>] &lt;- df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>] * coef } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>(df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>)) #     ( ) { <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> &lt;- na.omit(<span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.numeric(rownames(df[!<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>) &amp; df$Gross == <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>,]))) df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>] &lt;- df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>] * coef } df &lt;- df %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(-Gross) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df) }</code> </pre> </div></div><br><p>  Por supuesto, no har칠 esto, porque en este caso vale la pena considerar los impuestos en diferentes pa칤ses, y no solo en Rusia, o agregar un filtro por pa칤s en la consulta de b칰squeda inicial. </p><br><p>  El 칰ltimo paso antes del an치lisis es dividir las vacantes encontradas en tres categor칤as: junio, medio y superior, y escribir las posiciones recibidas en una nueva columna.  Los cargos superiores incluir치n aquellos en los nombres de los cuales la palabra "senior" y sus sin칩nimos est치n presentes.  Del mismo modo, encontraremos las posiciones iniciales para las palabras clave "junior" y sin칩nimos, y entre los medios incluimos todos aquellos entre: </p><br><pre> <code class="hljs powershell">get.positions &lt;- function(df) { df<span class="hljs-variable"><span class="hljs-variable">$lvl</span></span> &lt;- NA df[<span class="hljs-type"><span class="hljs-type">grep</span></span>(<span class="hljs-type"><span class="hljs-type">pattern</span></span> = <span class="hljs-string"><span class="hljs-string">"lead|senior|||"</span></span>, <span class="hljs-type"><span class="hljs-type">x</span></span> = <span class="hljs-type"><span class="hljs-type">df</span></span><span class="hljs-variable"><span class="hljs-variable">$Name</span></span>, <span class="hljs-type"><span class="hljs-type">ignore.case</span></span> = <span class="hljs-type"><span class="hljs-type">TRUE</span></span>), <span class="hljs-string"><span class="hljs-string">"lvl"</span></span>] &lt;- <span class="hljs-string"><span class="hljs-string">"senior"</span></span> df[<span class="hljs-type"><span class="hljs-type">grep</span></span>(<span class="hljs-type"><span class="hljs-type">pattern</span></span> = <span class="hljs-string"><span class="hljs-string">"junior|||"</span></span>, <span class="hljs-type"><span class="hljs-type">x</span></span> = <span class="hljs-type"><span class="hljs-type">df</span></span><span class="hljs-variable"><span class="hljs-variable">$Name</span></span>, <span class="hljs-type"><span class="hljs-type">ignore.case</span></span> = <span class="hljs-type"><span class="hljs-type">TRUE</span></span>), <span class="hljs-string"><span class="hljs-string">"lvl"</span></span>] &lt;- <span class="hljs-string"><span class="hljs-string">"junior"</span></span> df[<span class="hljs-type"><span class="hljs-type">is.na</span></span>(<span class="hljs-type"><span class="hljs-type">df</span></span><span class="hljs-variable"><span class="hljs-variable">$lvl</span></span>), <span class="hljs-string"><span class="hljs-string">"lvl"</span></span>] &lt;- <span class="hljs-string"><span class="hljs-string">"middle"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df) }</code> </pre> <br><p>  Agregue el bloque de preparaci칩n de datos al script principal. </p><br><div class="spoiler">  <b class="spoiler_title">Agregado</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"># Step <span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">prepare</span></span> data # <span class="hljs-number"><span class="hljs-number">2.1</span></span>. Convert <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> currencies <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> target currency # <span class="hljs-number"><span class="hljs-number">2.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> up-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-<span class="hljs-type"><span class="hljs-type">date</span></span> currency rates quotations &lt;- quotations.<span class="hljs-keyword"><span class="hljs-keyword">update</span></span>() # <span class="hljs-number"><span class="hljs-number">2.1</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> convert <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> RUR jobdf &lt;- convert.currency(df = jobdf, quotationsdf = quotations) # <span class="hljs-number"><span class="hljs-number">2.2</span></span> convert Gross <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> Net # jobdf &lt;- gross.<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>.net(df = jobdf) # <span class="hljs-number"><span class="hljs-number">2.3</span></span> define segments jobdf &lt;- <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>.positions(jobdf)</code> </pre> </div></div><br><h1 id="analiz">  An치lisis </h1><br><p>  Como se mencion칩 anteriormente, voy a analizar los siguientes aspectos de los datos obtenidos: </p><br><ul><li>  salario promedio BA / SA, </li><li>  las habilidades y cualidades personales m치s demandadas en este puesto, </li><li>  dependencias (si las hay) entre ciertas habilidades y el nivel de salario. </li></ul><br><h2 id="sredniy-dohod-basa">  Ingresos promedio de BA / SA </h2><br><p>  Al final result칩 que, las empresas son reacias a indicar l칤mites salariales superiores o inferiores. </p><br><p>  En nuestro marco de datos <code>jobdf</code> estos valores est치n en las columnas Para y Desde, respectivamente.  Quiero encontrar los promedios y escribirlos en una nueva columna Salario. </p><br><p>  Para los casos en que el salario se indica en su totalidad, esto se puede hacer f치cilmente utilizando la funci칩n <code>mean()</code> , filtrando todos los dem치s registros donde faltan los datos en el enchufe en su totalidad o en parte.  Pero en este caso, quedar칤a menos del 10% de nuestra muestra original, que ya es peque침a.  Por lo tanto, calculo el coeficiente <del>  Podgoniana </del>  , que le indica cu치nto difieren en promedio los valores To y From en las vacantes en las que se indica la bifurcaci칩n completa, y con su ayuda complet칠 los datos faltantes en los casos en que solo falta un valor. </p><br><div class="spoiler">  <b class="spoiler_title">Ver c칩digo</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span>.paid &lt;- <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(df, suggest = <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>) { # <span class="hljs-keyword"><span class="hljs-keyword">Returns</span></span> a data frame <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> average salaries <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> <span class="hljs-keyword"><span class="hljs-keyword">To</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> # optionally, can suggest <span class="hljs-keyword"><span class="hljs-keyword">To</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> one <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> specified <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (suggest == <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>) { df &lt;- df %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(!<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>) | !<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>)) magic.coefficient &lt;- # shows the average difference <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> max <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> min salary round(mean(df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>/df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>, na.rm = <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>) df[<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>),]$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span> &lt;- df[<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(df$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>),]$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span> * magic.coefficient df[<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>),]$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span> &lt;- df[<span class="hljs-keyword"><span class="hljs-keyword">is</span></span>.na(df$<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>),]$<span class="hljs-keyword"><span class="hljs-keyword">To</span></span> / magic.coefficient } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { df &lt;- na.omit(df) } df$salary &lt;- rowMeans(x = df %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">To</span></span>)) df$salary &lt;- ceiling(df$salary / <span class="hljs-number"><span class="hljs-number">10000</span></span>) * <span class="hljs-number"><span class="hljs-number">10000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(-<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>, -<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>)) }</code> </pre> </div></div><br><p>  Este es un filtrado de datos "suave", que se establece en la funci칩n <code>select.paid()</code> con el par치metro <code>suggest = TRUE</code> .  Alternativamente, podemos especificar <code>suggest = FALSE</code> al llamar a la funci칩n y simplemente cortar todas las l칤neas donde los datos salariales est치n al menos parcialmente ausentes.  Sin embargo, utilizando un filtrado suave y un coeficiente m치gico, logr칠 guardar casi una cuarta parte del conjunto de datos original en la muestra. </p><br><p>  Pasamos a la parte visual: </p><br><p><img src="https://habrastorage.org/webt/tl/kf/rl/tlkfrlmay_64qqh4ttw9sfekr70.png"></p><br><p>  En este gr치fico puede evaluar visualmente la densidad de distribuci칩n de los salarios de BA / SA en dos capitales y en regiones.  Pero, 쯤u칠 sucede si especificamos la solicitud y comparamos cu치nto obtienen los hombres intermedios y superiores en las capitales? </p><br><p><img src="https://habrastorage.org/webt/9w/vu/-c/9wvu-cqh1uwtvzs7h_s67tfaysu.png"></p><br><p>  A partir del gr치fico obtenido, est치 claro que la diferencia en las situaciones salariales entre hombres de mediana edad y superiores en Mosc칰 y San Petersburgo no es muy diferente.  Entonces, en San Petersburgo, los medios alcanzan, por regla general, en la regi칩n de 70 tr, mientras que en Mosc칰 el pico de densidad cae en ~ 120 tr, y la diferencia en el ingreso de especialistas de alto nivel en Mosc칰 y San Petersburgo difiere en un promedio de 60 mil. </p><br><p>  Tambi칠n podemos ver, por ejemplo, los salarios de los analistas de Mosc칰 por puesto: </p><br><p><img src="https://habrastorage.org/webt/p8/n3/qa/p8n3qaghbsibxc74tpmlju6xnba.png"></p><br><p>  Se puede concluir que a) hoy en Mosc칰 hay una demanda mucho mayor de analistas de nivel de entrada, yb) al mismo tiempo, el umbral salarial superior para tales especialistas es mucho m치s limitado que el de los medios y los adultos mayores. </p><br><p>  Otra observaci칩n: el sn promedio de los especialistas de Mosc칰 de nivel medio y alto tiene un 치rea de intersecci칩n bastante grande.  Esto puede indicar que el mercado tiene una frontera bastante borrosa entre estos dos pasos. </p><br><p>  C칩digo completo para gr치ficos debajo del corte. </p><br><div class="spoiler">  <b class="spoiler_title">Vista</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"># Step <span class="hljs-number"><span class="hljs-number">3</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">analyze</span></span> salaries # <span class="hljs-number"><span class="hljs-number">3.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> paid jobs (<span class="hljs-keyword"><span class="hljs-keyword">with</span></span> salaries specified) jobs.paid &lt;- <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>.paid(jobdf) # <span class="hljs-number"><span class="hljs-number">3.2</span></span> plot salaries density <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> region ggplotly(ggplot(jobs.paid, aes(salary, fill = region, colour = region)) + geom_density(alpha=<span class="hljs-number"><span class="hljs-number">.3</span></span>) + scale_fill_discrete(guide = guide_legend(<span class="hljs-keyword"><span class="hljs-keyword">reverse</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>)) + scale_x_continuous(labels = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(x) format(x, scientific = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>), <span class="hljs-type"><span class="hljs-type">name</span></span> = ", .", breaks = round(seq(min(jobs.paid$salary), max(jobs.paid$salary), <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> = <span class="hljs-number"><span class="hljs-number">30000</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>)) + scale_y_continuous(<span class="hljs-type"><span class="hljs-type">name</span></span> = " ") + theme(axis.text.x = element_text(size=<span class="hljs-number"><span class="hljs-number">9</span></span>), axis.title = element_text(size=<span class="hljs-number"><span class="hljs-number">10</span></span>))) # <span class="hljs-number"><span class="hljs-number">3.3</span></span> compare salaries <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> middle / senior <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> capitals ggplot(jobs.paid %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(region %<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>% c("", "-"), lvl %<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>% c("senior", "middle")), aes(salary, fill = region, colour = region)) + facet_grid(lvl ~ .) + geom_density(alpha = <span class="hljs-number"><span class="hljs-number">.3</span></span>) + scale_x_continuous(labels = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(x) format(x, scientific = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>), <span class="hljs-type"><span class="hljs-type">name</span></span> = ", .", breaks = round(seq(min(jobs.paid$salary), max(jobs.paid$salary), <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> = <span class="hljs-number"><span class="hljs-number">30000</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>)) + scale_y_continuous(<span class="hljs-type"><span class="hljs-type">name</span></span> = " ") + scale_fill_discrete(<span class="hljs-type"><span class="hljs-type">name</span></span> = "") + scale_color_discrete(<span class="hljs-type"><span class="hljs-type">name</span></span> = "") + guides(fill=guide_legend( keywidth=<span class="hljs-number"><span class="hljs-number">0.1</span></span>, keyheight=<span class="hljs-number"><span class="hljs-number">0.1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>.unit="inch") ) + theme(legend.spacing = unit(<span class="hljs-number"><span class="hljs-number">1</span></span>,"inch"), axis.title = element_text(size=<span class="hljs-number"><span class="hljs-number">10</span></span>)) # <span class="hljs-number"><span class="hljs-number">3.4</span></span> plot salaries <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Moscow <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> position ggplotly(ggplot(jobs.paid %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(region == ""), aes(salary, fill = lvl, color = lvl)) + geom_density(alpha=<span class="hljs-number"><span class="hljs-number">.4</span></span>) + scale_fill_brewer(palette = "Set2") + scale_color_brewer(palette = "Set2") + theme_light() + scale_y_continuous(<span class="hljs-type"><span class="hljs-type">name</span></span> = " ") + scale_x_continuous(labels = <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(x) format(x, scientific = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>), <span class="hljs-type"><span class="hljs-type">name</span></span> = ", .", breaks = round(seq(min(jobs.paid$salary), max(jobs.paid$salary), <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> = <span class="hljs-number"><span class="hljs-number">30000</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>)) + theme(axis.text.x = element_text(size=<span class="hljs-number"><span class="hljs-number">9</span></span>), axis.title = element_text(size=<span class="hljs-number"><span class="hljs-number">10</span></span>)))</code> </pre> </div></div><br><h2 id="analiz-navykov-key-skills">  An치lisis de habilidades clave </h2><br><p>  Pasamos al objetivo clave del estudio: identificar las habilidades m치s buscadas para BA / SA.  Para hacer esto, analizaremos los datos que se indican expl칤citamente en el campo especial de la vacante: habilidades clave. </p><br><h3 id="naibolee-populyarnye-navyki">  Habilidades m치s populares </h3><br><p>  Anteriormente, recibimos un marco de datos separado <code>all.skills</code> , donde registramos los pares "id de trabajo - habilidad".  Encontrar las habilidades m치s comunes es f치cil con la funci칩n <code>table()</code> : </p><br><pre> <code class="hljs powershell">tmp &lt;- as.data.frame(table(all.skills<span class="hljs-variable"><span class="hljs-variable">$skill</span></span>), col.names = c(<span class="hljs-string"><span class="hljs-string">"Skill"</span></span>, <span class="hljs-string"><span class="hljs-string">"Freq"</span></span>)) htmlTable::htmlTable(x = head(tmp[<span class="hljs-type"><span class="hljs-type">order</span></span>(<span class="hljs-type"><span class="hljs-type">tmp</span></span><span class="hljs-variable"><span class="hljs-variable">$Freq</span></span>, <span class="hljs-type"><span class="hljs-type">na.last</span></span> = <span class="hljs-type"><span class="hljs-type">TRUE</span></span>, <span class="hljs-type"><span class="hljs-type">decreasing</span></span> = <span class="hljs-type"><span class="hljs-type">TRUE</span></span>),]), rnames = FALSE, header = c(<span class="hljs-string"><span class="hljs-string">"Skill"</span></span>, <span class="hljs-string"><span class="hljs-string">"Freq"</span></span>), align = <span class="hljs-string"><span class="hljs-string">'l'</span></span>, css.cell = <span class="hljs-string"><span class="hljs-string">"padding-left: .5em; padding-right: 2em;"</span></span>)</code> </pre> <br><p>  Obtienes algo como lo siguiente: </p><br><p><img src="https://habrastorage.org/webt/fe/t1/jr/fet1jrr_wgnh7veffx3cgbaoe5y.png"></p><br><p>  Aqu칤 Freq es el n칰mero de vacantes en el campo "key_skills" del cual se indica la habilidad correspondiente de la columna Skill. </p><br><p>  "춰Pero eso no es todo!" (C) Es bastante obvio que las mismas habilidades se pueden encontrar f치cilmente en diferentes vacantes en t칠rminos sin칩nimos. </p><br><p>  Recopil칠 un peque침o diccionario de sin칩nimos para los nombres de las habilidades y las divid칤 en categor칤as. </p><br><p>  El diccionario es un archivo csv con columnas de categor칤a, una de las siguientes: Actividades, Herramientas, Conocimiento, Est치ndares y Personal;  skill: el nombre principal de la skill, que usar칠 en lugar de todos los sin칩nimos encontrados;  syn1, syn2, ... syn13: posibles variaciones para cada habilidad.  Algunas filas pueden contener columnas vac칤as de sin칩nimos. </p><br><pre> <code class="hljs cs">category;skill;syn1;syn2;syn3;syn4;syn5;syn6;syn7;syn8;syn9;syn10;syn11;syn12;syn13 tools;axure;;;;;;;;;;;;; tools;lucidchart;;;;;;;;;;;;; standards;archimate;;;;;;;;;;;;; standards;uml;activity diagram;use <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> diagram;ucd;<span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">diagram</span></span>;;;;;;;;; personal;teamwork;team player;  ;;;;;;;;;;; activities;wireframing;mockup;mock-up;;-;wireframe;;ui;ux/;/ux;;;;</code> </pre> <br><p>  Primero, importe el diccionario y luego redistribuya las habilidades nuevamente en funci칩n de las equivalencias existentes: </p><br><pre> <code class="hljs pgsql"># <span class="hljs-keyword"><span class="hljs-keyword">Analyze</span></span> skills # <span class="hljs-number"><span class="hljs-number">4.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span> dict &lt;- <span class="hljs-keyword"><span class="hljs-keyword">read</span></span>.csv(file = "competencies.csv", <span class="hljs-keyword"><span class="hljs-keyword">header</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, stringsAsFactors = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>, sep = ";", na.strings = "", encoding = "UTF-8") # <span class="hljs-number"><span class="hljs-number">4.2</span></span> match skills <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>.skills &lt;- categorize.skills(<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>.skills, dict)</code> </pre> <br><p>  Debajo del corte, puede ver el relleno de la funci칩n <code>categorize.skills()</code> . </p><br><div class="spoiler">  <b class="spoiler_title">esas mismas agallas!</b> <div class="spoiler_text"><pre> <code class="hljs powershell">categorize.skills &lt;- function(analyst_skills, dictionary) { analyst_skills<span class="hljs-variable"><span class="hljs-variable">$skill</span></span>.group &lt;- NA analyst_skills<span class="hljs-variable"><span class="hljs-variable">$category</span></span> &lt;- NA <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (myskill <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> dictionary<span class="hljs-variable"><span class="hljs-variable">$skill</span></span>) { category &lt;- dictionary[<span class="hljs-type"><span class="hljs-type">dictionary</span></span><span class="hljs-variable"><span class="hljs-variable">$skill</span></span> == <span class="hljs-type"><span class="hljs-type">myskill</span></span>, <span class="hljs-string"><span class="hljs-string">"category"</span></span>] mypattern &lt;- paste0(na.omit(t(dictionary %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(skill == myskill) %&gt;% select(starts_with(<span class="hljs-string"><span class="hljs-string">"syn"</span></span>)))), collapse = <span class="hljs-string"><span class="hljs-string">"|"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nchar(mypattern) &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) mypattern &lt;- paste0(c(myskill, mypattern), collapse = <span class="hljs-string"><span class="hljs-string">"|"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> mypattern &lt;- myskill <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>( { analyst_skills[<span class="hljs-type"><span class="hljs-type">grep</span></span>(<span class="hljs-type"><span class="hljs-type">x</span></span> = <span class="hljs-type"><span class="hljs-type">analyst_skills</span></span><span class="hljs-variable"><span class="hljs-variable">$skill</span></span>, <span class="hljs-type"><span class="hljs-type">pattern</span></span> = <span class="hljs-type"><span class="hljs-type">mypattern</span></span>),<span class="hljs-string"><span class="hljs-string">"skill.group"</span></span>] &lt;- myskill analyst_skills[<span class="hljs-type"><span class="hljs-type">grep</span></span>(<span class="hljs-type"><span class="hljs-type">x</span></span> = <span class="hljs-type"><span class="hljs-type">analyst_skills</span></span><span class="hljs-variable"><span class="hljs-variable">$skill</span></span>, <span class="hljs-type"><span class="hljs-type">pattern</span></span> = <span class="hljs-type"><span class="hljs-type">mypattern</span></span>),<span class="hljs-string"><span class="hljs-string">"category"</span></span>] &lt;- category } ) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(analyst_skills) }</code> </pre> </div></div><br><p>  Agrego la columna de categor칤a y habilidad al marco de datos de habilidades original.  grupo: para la categor칤a y el nombre generalizado de la habilidad, respectivamente.  Luego reviso el diccionario importado y compongo un patr칩n para la funci칩n <code>grep()</code> de cada l칤nea de sin칩nimos.  Al agregar cada valor de columna no vac칤o a la fila, los separo con un gui칩n para obtener una condici칩n "o".  Entonces, para todas las habilidades de la tabla fuente, que incluye el <code>uml|activity diagram|use case diagram|ucd|class diagram</code> , escribir칠 el valor "uml" en la columna skill.group.  춰Y as칤 ser치 con todos! .. habilidad del marco de datos original. </p><br><p>  Al volver a solicitar la parte superior de las habilidades m치s populares, puede ver que la alineaci칩n de las fuerzas ha cambiado algo: </p><br><p><img src="https://habrastorage.org/webt/ks/pl/xo/ksplxofujwalnkk7vsjnlyenp5c.png"></p><br><p>  Los tres l칤deres ahora tienen gesti칩n de proyectos, an치lisis de negocios y documentaci칩n, y el conocimiento de UML ha cambiado de los 7 mejores. </p><br><p>  Es bastante interesante revisar las categor칤as y descubrir qu칠 habilidades tienen m치s demanda en cada una de ellas. </p><br><p>  Por ejemplo, para la categor칤a Conocimiento, la situaci칩n es la siguiente: </p><br><div class="spoiler">  <b class="spoiler_title">Ver c칩digo</b> <div class="spoiler_text"><pre> <code class="hljs mel">tmp &lt;- merge(x = all.skills, y = jobdf %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(id, lvl), by = <span class="hljs-string"><span class="hljs-string">"id"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sort</span></span> = FALSE) tmp &lt;- na.omit(tmp) ggplot(as.data.frame(table(tmp %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(category == <span class="hljs-string"><span class="hljs-string">"knowledge"</span></span>) %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(skill.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span>)))) + geom_bar(colour = <span class="hljs-string"><span class="hljs-string">"#666666"</span></span>, stat = <span class="hljs-string"><span class="hljs-string">"identity"</span></span>, aes(x = <span class="hljs-keyword"><span class="hljs-keyword">reorder</span></span>(Var1, Freq), y = Freq, fill = <span class="hljs-keyword"><span class="hljs-keyword">reorder</span></span>(Var1, -Freq))) + scale_y_continuous(name = <span class="hljs-string"><span class="hljs-string">" "</span></span>) + theme(legend.position = <span class="hljs-string"><span class="hljs-string">"none"</span></span>, axis.<span class="hljs-keyword"><span class="hljs-keyword">text</span></span> = element_text(<span class="hljs-keyword"><span class="hljs-keyword">size</span></span> = <span class="hljs-number"><span class="hljs-number">12</span></span>)) + coord_flip()</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/rc/nm/39/rcnm39xkws0pl3cl-pslehkvykk.png"></p><br><p>  El gr치fico muestra que la mayor demanda es de conocimiento en el campo de bases de datos, metodolog칤as de desarrollo de software y 1C.  Luego viene el conocimiento en el campo de CRM, sistemas ERP y los conceptos b치sicos de programaci칩n. </p><br><p>  En lo que respecta a los est치ndares, el conocimiento de SQL y UML tiene una gran demanda, la notaci칩n ARIS llega a sus talones, pero los GOST ocupan solo el sexto lugar. </p><br><div class="spoiler">  <b class="spoiler_title">Aqui esta el codigo</b> <div class="spoiler_text"><pre> <code class="hljs lisp">ggplot(<span class="hljs-name"><span class="hljs-name">as</span></span>.data.frame(<span class="hljs-name"><span class="hljs-name">table</span></span>(<span class="hljs-name"><span class="hljs-name">tmp</span></span> %&gt;% filter(<span class="hljs-name"><span class="hljs-name">category</span></span> == <span class="hljs-string"><span class="hljs-string">"standards"</span></span>) %&gt;% select(<span class="hljs-name"><span class="hljs-name">skill</span></span>.group)))) + geom_bar(<span class="hljs-name"><span class="hljs-name">colour</span></span> = <span class="hljs-string"><span class="hljs-string">"#666666"</span></span>, stat = <span class="hljs-string"><span class="hljs-string">"identity"</span></span>, aes(<span class="hljs-name"><span class="hljs-name">x</span></span> = reorder(<span class="hljs-name"><span class="hljs-name">Var1</span></span>, Freq), y = Freq, fill = Var1)) + scale_y_continuous(<span class="hljs-name"><span class="hljs-name">name</span></span> = <span class="hljs-string"><span class="hljs-string">" "</span></span>) + theme(<span class="hljs-name"><span class="hljs-name">legend</span></span>.position = <span class="hljs-string"><span class="hljs-string">"none"</span></span>, axis.text = element_text(<span class="hljs-name"><span class="hljs-name">size</span></span> = <span class="hljs-number"><span class="hljs-number">12</span></span>)) + coord_flip()</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/t5/ue/xu/t5uexufq4amkljtdmdngysyuwqu.png"></p><br><p>  En cuanto a las herramientas utilizadas, una vez m치s vemos confirmaci칩n de que la cabeza es la herramienta principal del analista.  No se puede prescindir de la l칤nea de MS Office y los sistemas de seguimiento de tareas, pero el resto es de poca preocupaci칩n para el editor en el que el analista crea sus propios esquemas o bosqueja modelos de interfaz. </p><br><div class="spoiler">  <b class="spoiler_title">Aqui esta el codigo</b> <div class="spoiler_text"><pre> <code class="hljs lisp">ggplot(<span class="hljs-name"><span class="hljs-name">tmp</span></span> %&gt;% filter(<span class="hljs-name"><span class="hljs-name">category</span></span> == <span class="hljs-string"><span class="hljs-string">"tools"</span></span>)) + geom_histogram(<span class="hljs-name"><span class="hljs-name">colour</span></span> = <span class="hljs-string"><span class="hljs-string">"#666666"</span></span>, stat = <span class="hljs-string"><span class="hljs-string">"count"</span></span>, aes(<span class="hljs-name"><span class="hljs-name">skill</span></span>.group, fill = skill.group)) + scale_y_continuous(<span class="hljs-name"><span class="hljs-name">name</span></span> = <span class="hljs-string"><span class="hljs-string">" "</span></span>) + theme(<span class="hljs-name"><span class="hljs-name">legend</span></span>.position = <span class="hljs-string"><span class="hljs-string">"none"</span></span>, axis.text = element_text(<span class="hljs-name"><span class="hljs-name">size</span></span> = <span class="hljs-number"><span class="hljs-number">12</span></span>)) + coord_flip()</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/hw/7e/jh/hw7ejh4ntj1nln-p7hbfgyb36vq.png"></p><br><h3 id="vliyanie-navykov-na-dohod">  El impacto de las habilidades en los ingresos </h3><br><p> , ,        .     ,      ,   ,        . </p><br><p>           <code>jobs.paid</code>   <code>all.skills</code> ,         data frame. </p><br><pre> <code class="hljs pgsql"># <span class="hljs-number"><span class="hljs-number">4.4</span></span> vizualize paid skills tmp &lt;- na.omit(merge(x = <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>.skills, y = jobs.paid %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(id, salary, lvl, City), <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> = "id", sort = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>))</code> </pre> <br><p>    : </p><br><pre> <code class="hljs lua">&gt; head(tmp) id skill skill.group category salary lvl City <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">25781585</span></span> android mobile <span class="hljs-built_in"><span class="hljs-built_in">os</span></span> knowledge <span class="hljs-number"><span class="hljs-number">90000</span></span> middle  <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">25781585</span></span>   project management activities <span class="hljs-number"><span class="hljs-number">90000</span></span> middle  <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">25781585</span></span>   project management activities <span class="hljs-number"><span class="hljs-number">90000</span></span> middle  <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">25781585</span></span> ios mobile <span class="hljs-built_in"><span class="hljs-built_in">os</span></span> knowledge <span class="hljs-number"><span class="hljs-number">90000</span></span> middle  <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">25750025</span></span> aris aris standards <span class="hljs-number"><span class="hljs-number">70000</span></span> middle  <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">25750025</span></span> - business analysis activities <span class="hljs-number"><span class="hljs-number">70000</span></span> middle </code> </pre> <br><p>        , ..     .    : </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="hljs lisp">ggplotly(<span class="hljs-name"><span class="hljs-name">ggplot</span></span>(<span class="hljs-name"><span class="hljs-name">tmp</span></span> %&gt;% filter(<span class="hljs-name"><span class="hljs-name">category</span></span> == <span class="hljs-string"><span class="hljs-string">"activities"</span></span>), aes(<span class="hljs-name"><span class="hljs-name">skill</span></span>.group, salary)) + coord_flip() + geom_count(<span class="hljs-name"><span class="hljs-name">aes</span></span>(<span class="hljs-name"><span class="hljs-name">size</span></span> = ..n.., color = City)) + scale_fill_discrete(<span class="hljs-name"><span class="hljs-name">name</span></span> = <span class="hljs-string"><span class="hljs-string">""</span></span>) + scale_y_continuous(<span class="hljs-name"><span class="hljs-name">name</span></span> = <span class="hljs-string"><span class="hljs-string">", ."</span></span>) + scale_size_area(<span class="hljs-name"><span class="hljs-name">max_size</span></span> = <span class="hljs-number"><span class="hljs-number">11</span></span>) + theme(<span class="hljs-name"><span class="hljs-name">legend</span></span>.position = <span class="hljs-string"><span class="hljs-string">"bottom"</span></span>, axis.title = element_blank(), axis.text.y = element_text(<span class="hljs-name"><span class="hljs-name">size=10</span></span>, angle=10)))</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/kg/p5/zx/kgp5zx9_quhke3vrstg0wdqsb54.png"></p><br><p>     ,    BA/SA           . </p><br><p>      : </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="hljs lisp">ggplot(<span class="hljs-name"><span class="hljs-name">tmp</span></span> %&gt;% filter(<span class="hljs-name"><span class="hljs-name">category</span></span> == <span class="hljs-string"><span class="hljs-string">"personal"</span></span>, City %in% c(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"-"</span></span>)), aes(<span class="hljs-name"><span class="hljs-name">tools</span></span>:<span class="hljs-symbol"><span class="hljs-symbol">:toTitleCase</span></span>(<span class="hljs-name"><span class="hljs-name">skill</span></span>), salary)) + coord_flip() + geom_count(<span class="hljs-name"><span class="hljs-name">aes</span></span>(<span class="hljs-name"><span class="hljs-name">size</span></span> = ..n.., color = skill.group)) + scale_y_continuous(<span class="hljs-name"><span class="hljs-name">breaks</span></span> = round(<span class="hljs-name"><span class="hljs-name">seq</span></span>(<span class="hljs-name"><span class="hljs-name">min</span></span>(<span class="hljs-name"><span class="hljs-name">tmp</span></span>$salary), max(<span class="hljs-name"><span class="hljs-name">tmp</span></span>$salary), by = <span class="hljs-number"><span class="hljs-number">20000</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>), name = <span class="hljs-string"><span class="hljs-string">", ."</span></span>) + scale_size_area(<span class="hljs-name"><span class="hljs-name">max_size</span></span> = <span class="hljs-number"><span class="hljs-number">10</span></span>) + theme(<span class="hljs-name"><span class="hljs-name">legend</span></span>.position = <span class="hljs-string"><span class="hljs-string">"none"</span></span>, axis.title = element_text(<span class="hljs-name"><span class="hljs-name">size</span></span> = <span class="hljs-number"><span class="hljs-number">11</span></span>), axis.text.y = element_text(<span class="hljs-name"><span class="hljs-name">size=10</span></span>, angle=0))</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/ao/-9/de/ao-9deui5nzklciz_ia4en0aqkm.png"></p><br><p>    ,    MS Office         ,      ,      -          .  ,   ,   ,         . </p><br><p>  ,   ,   :     UML  ARIS,    SQL   (  )    ,    IDEF      ,      "". </p><br><p><img src="https://habrastorage.org/webt/fj/de/xh/fjdexhskz6oer1ahnjx2ecsgumm.png"></p><br><h2 id="analiz-teksta-vakansiy">    </h2><br><p>   ,           ,      ,       .   ,       1478         -    key_skills.  ,          -     . </p><br><h3 id="import-i-podgotovka-opisaniy">     </h3><br><p> ,         data frame: </p><br><pre> <code class="hljs lua">&gt; jobdf$Responsibility<span class="hljs-string"><span class="hljs-string">[[1]]</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-string"><span class="hljs-string">"Training course in business analysis. 餃 Define needs of the user/client, understand the problem which needs to be solved. 餃 "</span></span> &gt; jobdf$Requirement<span class="hljs-string"><span class="hljs-string">[[1]]</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-string"><span class="hljs-string">"At least 6 months&amp;#39; experience in business analysis. 餃 Knowledge of qualitative methods such as usability testing, interviewing, focus groups. 餃 "</span></span></code> </pre> <br><p> , ,  .       URL'  ,    . </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="hljs powershell">hh.get.full.desrtion &lt;- function(df) { df<span class="hljs-variable"><span class="hljs-variable">$full</span></span>.description &lt;- NA <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (myURL <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> df<span class="hljs-variable"><span class="hljs-variable">$URL</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>( { <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> &lt;- fromJSON(myURL) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (length(<span class="hljs-keyword"><span class="hljs-keyword">data</span></span><span class="hljs-variable"><span class="hljs-variable">$description</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { df<span class="hljs-variable"><span class="hljs-variable">$full</span></span>.description[<span class="hljs-type"><span class="hljs-type">which</span></span>(<span class="hljs-type"><span class="hljs-type">df</span></span><span class="hljs-variable"><span class="hljs-variable">$URL</span></span> == <span class="hljs-type"><span class="hljs-type">myURL</span></span>, <span class="hljs-type"><span class="hljs-type">arr.ind</span></span> = <span class="hljs-type"><span class="hljs-type">TRUE</span></span>)] &lt;- <span class="hljs-keyword"><span class="hljs-keyword">data</span></span><span class="hljs-variable"><span class="hljs-variable">$description</span></span> } print(paste0(<span class="hljs-string"><span class="hljs-string">"Filling in "</span></span> , which(df<span class="hljs-variable"><span class="hljs-variable">$URL</span></span> == myURL, arr.ind = TRUE) , <span class="hljs-string"><span class="hljs-string">" out of "</span></span> , length(df<span class="hljs-variable"><span class="hljs-variable">$URL</span></span>))) } ) } df<span class="hljs-variable"><span class="hljs-variable">$full</span></span>.description &lt;- tolower(df<span class="hljs-variable"><span class="hljs-variable">$full</span></span>.description) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(df) }</code> </pre> </div></div><br><p>      - , html-  .,            <code>gsub</code> : </p><br><pre> <code class="hljs lua"><span class="hljs-built_in"><span class="hljs-built_in">remove</span></span>.Html &lt;- <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(htmlString)</span></span></span></span> { #<span class="hljs-built_in"><span class="hljs-built_in">remove</span></span> html tags <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">gsub</span></span>(<span class="hljs-string"><span class="hljs-string">"&lt;.*?&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, htmlString)) }</code> </pre> <br><p> , ,    ,           ,  .      data frame   (   df),       ,        df  "id, skill.group, category". </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="hljs pgsql">skills.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span> &lt;- <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(df, <span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span>) { sk &lt;- data.frame( id = <span class="hljs-type"><span class="hljs-type">numeric</span></span>() , skill.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> = <span class="hljs-type"><span class="hljs-type">character</span></span>() , category = <span class="hljs-type"><span class="hljs-type">character</span></span>() ) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (myskill <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span>$skill) { category &lt;- <span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span>$skill == myskill, "category"] mypattern &lt;- paste0(na.omit(t(<span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span> %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(skill == myskill) %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(starts_with("syn")))), collapse = "|") <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-type"><span class="hljs-type">nchar</span></span>(mypattern) &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { mypattern &lt;- paste0(c(myskill, mypattern), collapse = "|") } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { mypattern &lt;- myskill } cond = grep(x = df$<span class="hljs-keyword"><span class="hljs-keyword">full</span></span>.description, pattern = mypattern) tmp &lt;- data.frame( id = df[cond, "id"], skill.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> = rep(myskill, length(cond)), category = rep(category, length(cond)) ) sk &lt;- rbind(sk, tmp) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(sk) }</code> </pre> </div></div><br><h3 id="snova-o-samyh-vostrebovannyh-navykah">      </h3><br><pre> <code class="hljs pgsql"># <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-type"><span class="hljs-type">text</span></span> analysis # <span class="hljs-number"><span class="hljs-number">5.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">full</span></span> descriptions jobdf &lt;- hh.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">full</span></span>.description(jobdf) jobdf$<span class="hljs-keyword"><span class="hljs-keyword">full</span></span>.description &lt;- remove.Html(tolower(jobdf$<span class="hljs-keyword"><span class="hljs-keyword">full</span></span>.description)) sk.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span> &lt;- skills.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span>(jobdf, dict)</code> </pre> <br><p> ,  ? </p><br><pre> <code class="hljs pgsql">&gt; head(sk.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span>) id skill.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> category <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">25638419</span></span> axure tools <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">24761526</span></span> axure tools <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">25634145</span></span> axure tools <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">24451152</span></span> axure tools <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">25630612</span></span> axure tools <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">24985548</span></span> axure tools &gt; tmp &lt;- <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.data.frame(<span class="hljs-keyword"><span class="hljs-keyword">table</span></span>(sk.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span>$skill.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span>), col.names = c("Skill", "Freq")) &gt; htmlTable::htmlTable(x = head(tmp[<span class="hljs-keyword"><span class="hljs-keyword">order</span></span>(tmp$Freq, na.last = <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>, decreasing = <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>),], <span class="hljs-number"><span class="hljs-number">20</span></span>), rnames = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">header</span></span> = c("Skill", "Freq"), align = <span class="hljs-string"><span class="hljs-string">'l'</span></span>, css.cell = "padding-left: .5em; padding-right: 2em;")</code> </pre> <br><p><img src="https://habrastorage.org/webt/qn/kq/np/qnkqnprl1bcfuz2lt6wk29ukcio.png"></p><br><p> ,      ! Project management,       key_skills,       (   ). </p><br><p>     ,         ,        key_skills       -5. </p><br><p>      ,         .          1478 ,    ,    key_skills,      ,     . </p><br><p><img src="https://habrastorage.org/webt/7j/0x/no/7j0xno5etsw92txe8q5pfsixqv8.png"></p><br><p>    ,     ,    BA        , -      . </p><br><p><img src="https://habrastorage.org/webt/am/ou/pc/amoupckhtlpmbkfkglhpd9tjqwg.png"></p><br><h3 id="i-snova-o-dengah">     </h3><br><p> ,         . </p><br><p>      data frame   ,    ,      .       ,      -. </p><br><pre> <code class="hljs pgsql">tmp &lt;- na.omit(merge(x = sk.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span>, y = jobs.paid %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(City %<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>% c("", "-")) %&gt;% <span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(id, salary, lvl, City), <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> = "id", sort = <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span>))</code> </pre> <br><pre> <code class="hljs objectivec">&gt; head(tmp) <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> skill.group category salary lvl City <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">25243346</span></span> uml standards <span class="hljs-number"><span class="hljs-number">160000</span></span> middle  <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">25243346</span></span> requirements management activities <span class="hljs-number"><span class="hljs-number">160000</span></span> middle  <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">25243346</span></span> designing business processes activities <span class="hljs-number"><span class="hljs-number">160000</span></span> middle  <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">25243346</span></span> communication skills personal <span class="hljs-number"><span class="hljs-number">160000</span></span> middle  <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">25243346</span></span> mobile os knowledge <span class="hljs-number"><span class="hljs-number">160000</span></span> middle  <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">25243346</span></span> ms visio tools <span class="hljs-number"><span class="hljs-number">160000</span></span> middle </code> </pre> <br><p>     ,            ,    ,             . </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="hljs lisp">ggplotly(<span class="hljs-name"><span class="hljs-name">ggplot</span></span>(<span class="hljs-name"><span class="hljs-name">tmp</span></span> %&gt;% filter(<span class="hljs-name"><span class="hljs-name">category</span></span> == <span class="hljs-string"><span class="hljs-string">"activities"</span></span>), aes(<span class="hljs-name"><span class="hljs-name">skill</span></span>.group, lvl)) + geom_count(<span class="hljs-name"><span class="hljs-name">aes</span></span>(<span class="hljs-name"><span class="hljs-name">color</span></span> = salary, size = ..n..)) + scale_size_area(<span class="hljs-name"><span class="hljs-name">max_size</span></span> = <span class="hljs-number"><span class="hljs-number">13</span></span>) + theme(<span class="hljs-name"><span class="hljs-name">legend</span></span>.position = <span class="hljs-string"><span class="hljs-string">"right"</span></span>, legend.title = element_text(<span class="hljs-name"><span class="hljs-name">size</span></span> = <span class="hljs-number"><span class="hljs-number">10</span></span>), axis.title = element_blank(), axis.text.y = element_text(<span class="hljs-name"><span class="hljs-name">size=10</span></span>)) + coord_flip() + scale_color_continuous(<span class="hljs-name"><span class="hljs-name">labels</span></span> = function(<span class="hljs-name"><span class="hljs-name">x</span></span>) format(<span class="hljs-name"><span class="hljs-name">x</span></span>, scientific = FALSE), breaks = round(<span class="hljs-name"><span class="hljs-name">seq</span></span>(<span class="hljs-name"><span class="hljs-name">min</span></span>(<span class="hljs-name"><span class="hljs-name">tmp</span></span>$salary), max(<span class="hljs-name"><span class="hljs-name">tmp</span></span>$salary), by = <span class="hljs-number"><span class="hljs-number">70000</span></span>),<span class="hljs-number"><span class="hljs-number">1</span></span>), low = <span class="hljs-string"><span class="hljs-string">"blue"</span></span>, high = <span class="hljs-string"><span class="hljs-string">"red"</span></span>, name = <span class="hljs-string"><span class="hljs-string">", ."</span></span>))</code> </pre> </div></div><br><p>      ? </p><br><p><img src="https://habrastorage.org/webt/js/eo/0o/jseo0o75saiwtj14u0a0z1fbd_c.png"></p><br><p> -, ,          -  . (    ,     ,      ,      .) </p><br><p> -,   ,  ""    -,      . </p><br><p>          ,     key_skills. </p><br><p><img src="https://habrastorage.org/webt/tm/na/lz/tmnalz2vluh5ihlax9yqe11_ita.png"></p><br><p>   ,   ,         150 ..         UML  ARIS,   IDEF,  ,              . </p><br><p>         : </p><br><p><img src="https://habrastorage.org/webt/45/ze/2z/45ze2zurgduh50qz03z9egc_kws.png"></p><br><p>   ,  -     ,    ,    key_skills  ,      .  ,     150 ..    ,           . </p><br><h2 id="a-kak-zhe-bescennyy-opyt">     ? </h2><br><p> ,          -   : </p><br><p><img src="https://habrastorage.org/webt/eg/fa/xn/egfaxnsxj6y03vzzmysisihdo4s.png"></p><br><p> ,      ,        ,       ?  ,           .   ,  ,       .   ,   칩    (    )     <del>   </del> . </p><br><p>  ,  -    : </p><br><p><img src="https://habrastorage.org/webt/nd/vn/b3/ndvnb3hm_ayffdszrruohuyj2go.png"></p><br><h1 id="koe-kakie-vyvody"> -  </h1><br><p>        BA/SA ,  </p><br><ul><li>          .             ,     ; </li><li>      (    )   200 .. ,    ,              ; </li><li>          ; </li><li>     -  ( ,  ,         ) </li><li>  <code>key_skills</code>    hh   ,             ; </li><li>   ,   ,    ,          (!)  ; </li><li>       ,       -,   UX   ; </li><li>    . ,    -    150 ..; </li><li>  ,   ,   SQL,    UML &amp; ARIS.         , ..         .  , ,    ,   <del>   </del>  . </li></ul><br><pre> <code class="hljs pgsql">wordcloud2::wordcloud2(data = <span class="hljs-keyword"><span class="hljs-keyword">table</span></span>(sk.<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span>$skill.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span>), rotateRatio = <span class="hljs-number"><span class="hljs-number">0.3</span></span>, color = <span class="hljs-string"><span class="hljs-string">'random-dark'</span></span>)</code> </pre> <br><p><img src="https://habrastorage.org/webt/kh/07/1l/kh071lq_vp7d4lihybz-k2kx-ow.gif" alt="imagen"></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es413731/">https://habr.com/ru/post/es413731/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es413719/index.html">C ++ 20 en camino! Encuentro en Rapperswil Yona</a></li>
<li><a href="../es413721/index.html">Comprobaci칩n de tiempo: Timejacking vs Bitcoin</a></li>
<li><a href="../es413723/index.html">Saga de servicios electr칩nicos y sus ubicaciones. Parte 2. Armario electr칩nico</a></li>
<li><a href="../es413725/index.html">Trabajando con matrices en bash</a></li>
<li><a href="../es413729/index.html">C칩mo y por qu칠 escribimos nuestro ECS</a></li>
<li><a href="../es413733/index.html">Mikrosh, Krista, Apogee, Lviv: las primeras computadoras sovi칠ticas para llevar</a></li>
<li><a href="../es413739/index.html">C칩mo escaneamos todo Internet y lo que aprendimos</a></li>
<li><a href="../es413741/index.html">Qu칠 era y c칩mo: impresiones del equipo WWDC Redmadrobot</a></li>
<li><a href="../es413743/index.html">Inicie LAMP y cientos de otras aplicaciones web con unos pocos clics.</a></li>
<li><a href="../es413745/index.html">Se desarroll칩 un sistema de alimentaci칩n inal치mbrico para todos los componentes electr칩nicos del cuerpo humano a la vez.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>