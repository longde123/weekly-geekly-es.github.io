<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê∫ ‚òÑÔ∏è üë©üèæ‚Äçüî¨ C√≥mo funcionar√° HPE SimpliVity 380 para VDI: pruebas de carga dura üë©üèº‚Äç‚öïÔ∏è üç∂ üì∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El cliente quer√≠a VDI. Mir√© muy de cerca el mont√≥n de SimpliVity + VDI Citrix Virtual Desktop. Para todos los operadores, trabajadores de oficina en c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo funcionar√° HPE SimpliVity 380 para VDI: pruebas de carga dura</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/croc/blog/449210/"><img src="https://habrastorage.org/webt/_c/-f/ze/_c-fze90jo2wiz1tnxiharmlfde.jpeg" alt="imagen"><br><br>  El cliente quer√≠a VDI.  Mir√© muy de cerca el mont√≥n de SimpliVity + VDI Citrix Virtual Desktop.  Para todos los operadores, trabajadores de oficina en ciudades, etc.  Hay cinco mil usuarios solo en la primera ola de migraci√≥n y, por lo tanto, insistieron en realizar pruebas de estr√©s.  VDI puede comenzar a disminuir, puede descansar tranquilamente, y esto no siempre sucede debido a problemas con el canal.  Compramos un paquete de prueba muy potente espec√≠ficamente para VDI y cargamos la infraestructura hasta que cay√≥ en los discos y el procesador. <br><br>  Por lo tanto, necesitamos una botella de pl√°stico, el software LoginVSI para pruebas sofisticadas de VDI.  Lo tenemos con licencias para 300 usuarios.  Luego tomaron el hardware HPE SimpliVity 380 en un paquete adecuado para la tarea de m√°xima densidad de usuario en un servidor, cortaron m√°quinas virtuales con una buena suscripci√≥n, colocaron software de oficina en Win10 y comenzaron las pruebas. <br><br>  <b>Vamos!</b> <a name="habracut"></a><br><br><h2>  El sistema </h2><br>  Dos nodos (servidores) HPE SimpliVity 380 Gen10.  En cada uno: <br><br><ul><li>  2 x Intel Xeon Platinum 8170 26c 2.1Ghz. </li><li>  RAM: 768 GB, 12 x 64 GB LRDIMM DDR4 2666 MHz. </li><li>  Controlador de disco primario: HPE Smart Array P816i-a SR Gen10. </li><li>  Discos duros: 9 x 1.92 TB SATA 6Gb / s SSD (en configuraci√≥n RAID6 7 + 2, es decir, este es un modelo mediano en t√©rminos de HPE SimpliVity). </li><li>  Tarjetas de red: 4 x 1 Gb Eth (datos del usuario), 2 x 10 Gb Eth (SimpliVity y vMotion backend). </li><li>  Tarjetas especiales FPGA integradas en cada nodo para deduplicaci√≥n / compresi√≥n. </li></ul><br>  Los nodos est√°n conectados entre s√≠ mediante una interconexi√≥n Ethernet de 10 Gb directamente sin un conmutador externo, que se utiliza como un backend SimpliVity y para transmitir datos de m√°quinas virtuales a trav√©s de NFS.  Los datos de la m√°quina virtual en un cl√∫ster siempre se reflejan entre dos nodos. <br><br>  Los nodos se agrupan en un cl√∫ster de Vmware vSphere que ejecuta vCenter. <br><br>  Para las pruebas, se implementa un controlador de dominio y un agente de conexi√≥n Citrix.  El controlador de dominio, el intermediario y vCenter se colocan en un cl√∫ster separado. <br><img src="https://habrastorage.org/webt/iy/2f/cm/iy2fcmya1kwnjrngq2hsdg-0dcs.png" alt="imagen"><br><img src="https://habrastorage.org/webt/_w/wm/uw/_wwmuwksqxifn3xvsjqxqg8mbj0.png" alt="imagen"><br>  Como infraestructura de prueba, se implementan 300 escritorios virtuales en la configuraci√≥n Dedicado - Copia completa, es decir, cada escritorio es una copia completa de la imagen original de la m√°quina virtual y guarda todos los cambios realizados por los usuarios. <br><br>  Cada m√°quina virtual tiene 2vCPU y 4GB de RAM: <br><br><img src="https://habrastorage.org/webt/6s/un/ru/6sunrupu_e3qtrv0ozkzjhdz1ti.png" alt="imagen"><br><br><img src="https://habrastorage.org/webt/3z/tp/cg/3ztpcgbgkwhbjqiypygrcvq7t9o.png" alt="imagen"><br><br>  El siguiente software requerido para la prueba se instal√≥ en las m√°quinas virtuales: <br><br><ul><li>  Windows 10 (64 bits), versi√≥n 1809. </li><li>  Adobe Reader XI. </li><li>  Citrix Virtual Delivery Agent 1811.1. </li><li>  Doro PDF 1.82. </li><li>  Actualizaci√≥n de Java 7 13. </li><li>  Microsoft Office Professional Plus 2016. </li></ul><br>  Entre nodos: replicaci√≥n sincr√≥nica.  Cada bloque de datos en el cl√∫ster tiene dos copias.  Es decir, ahora un conjunto completo de datos en cada uno de los nodos.  Con un grupo de tres o m√°s nodos, copias de bloques en dos lugares diferentes.  Al crear una nueva m√°quina virtual, se crea una copia adicional en uno de los nodos del cl√∫ster.  Si un nodo falla, todas las m√°quinas virtuales que se ejecutaban anteriormente en √©l se reinician autom√°ticamente en otros nodos donde tienen r√©plicas.  Si el nodo falla durante mucho tiempo, comienza una recuperaci√≥n de redundancia gradual y el cl√∫ster vuelve a la redundancia N + 1 nuevamente. <br><br>  El equilibrio y el almacenamiento de datos se produce al nivel del almacenamiento de software de SimpliVity. <br><br>  Las m√°quinas virtuales ejecutan un cl√∫ster de virtualizaci√≥n; tambi√©n las aloja en el almacenamiento de software.  Los escritorios en s√≠ se tomaron de acuerdo con la plantilla est√°ndar: las tablas de financieros y operacionalistas se sometieron a una prueba (estas son dos plantillas diferentes). <br><br><h3>  Prueba </h3><br>  Para las pruebas, se utiliz√≥ el complejo de pruebas del software LoginVSI 4.1.  El complejo LoginVSI como parte del servidor de administraci√≥n y 12 m√°quinas para conexiones de prueba se implementaron en un host f√≠sico separado. <br><img src="https://habrastorage.org/webt/a9/tg/a8/a9tga8ijvirliv42fkcqld9yvma.png" alt="imagen"><br><br>  Las pruebas se llevaron a cabo en tres modos: <br><br>  Modo de referencia: opciones de carga para 300 trabajadores del conocimiento y 300 trabajadores de almacenamiento. <br><br>  El modo est√°ndar es la opci√≥n de carga 300 Power Workers. <br><br>  Para permitir que los trabajadores de Power trabajen y aumenten la diversidad de carga, se agreg√≥ una biblioteca de archivos adicionales de Power Library al complejo LoginVSI.  Para garantizar la repetibilidad de los resultados, todos los ajustes del banco de pruebas se dejaron en Predeterminado. <br><br>  Las pruebas para trabajadores de Knowledge and Power simulan la carga real de usuarios que trabajan en estaciones de trabajo virtuales. <br><br>  La prueba de los trabajadores de almacenamiento se cre√≥ espec√≠ficamente para probar sistemas de almacenamiento, lejos de las cargas de trabajo reales y, en su mayor parte, consiste en el trabajo del usuario con una gran cantidad de archivos de diferentes tama√±os. <br><br>  Durante las pruebas, los usuarios inician sesi√≥n en las estaciones de trabajo durante 48 minutos, aproximadamente un usuario cada 10 segundos. <br><br><h2>  Resultados </h2><br>  El resultado principal de las pruebas de LoginVSI es la m√©trica VSImax, que se compila a partir del tiempo de ejecuci√≥n de varias tareas ejecutadas por el usuario.  Por ejemplo: tiempo de apertura de archivo en el bloc de notas, tiempo de compresi√≥n de archivo en 7-Zip, etc. <br><br>  Una descripci√≥n detallada del c√°lculo de las m√©tricas est√° disponible en la documentaci√≥n oficial en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enlace</a> . <br><br>  En otras palabras, LoginVSI repite un patr√≥n de carga t√≠pico, simula las acciones del usuario en una suite ofim√°tica, lee archivos PDF, etc., y mide varios retrasos.  Hay un nivel cr√≠tico de demoras "todo se ralentiza, es imposible trabajar"), antes de lo cual se considera que no se alcanza el m√°ximo de usuarios.  Si el tiempo de respuesta es 1,000 ms m√°s r√°pido que este estado de "todo se ralentiza", entonces se considera que el sistema funciona bien y puede agregar m√°s usuarios. <br><br>  Aqu√≠ est√°n las m√©tricas b√°sicas: <br><table><tbody><tr><td width="78"><p>  <b>M√©trica</b> </p><br></td><td width="191"><p>  <b>Acci√≥n tomada</b> </p><br></td><td width="301"><p>  <b>Descripci√≥n</b> <b>detallada</b> </p><br></td><td width="142"><p>  <b>Componentes cargables</b> </p><br></td></tr><tr><td width="78"><p>  <b>NSLD</b> </p><br></td><td width="191"><p>  Hora de apertura del texto <br>  archivo con un peso de 1.500 kB </p><br></td><td width="301"><p>  El bloc de notas comienza y <br>  abre un documento aleatorio que pesa 1.500 Kbytes, que se copia del grupo <br>  de recursos </p><br></td><td width="142"><p>  CPU y E / S </p><br></td></tr><tr><td width="78"><p>  <b>Nfo</b> </p><br></td><td width="191"><p>  Hora de apertura del di√°logo <br>  ventanas de bloc de notas </p><br></td><td width="301"><p>  Abrir un archivo VSI-Notepad [Ctrl + O] </p><br></td><td width="142"><p>  CPU, RAM y E / S </p><br><p></p><br></td></tr><tr><td width="78"><p>  <b>ZHC *</b> </p><br></td><td width="191"><p>  Tiempo de creaci√≥n de archivo comprimido de compresi√≥n fuerte </p><br></td><td width="301"><p>  Compresi√≥n local <br>  tama√±o de archivo aleatorio .pst de 5 MB, que se copia de <br>  grupo de recursos </p><br></td><td width="142"><p>  CPU y E / S </p><br></td></tr><tr><td width="78"><p>  <b>ZLC *</b> </p><br></td><td width="191"><p>  Tiempo de creaci√≥n de archivo comprimido de baja compresi√≥n </p><br></td><td width="301"><p>  Compresi√≥n local <br>  tama√±o de archivo aleatorio .pst de 5 MB, que se copia de <br>  grupo de recursos </p><br></td><td width="142"><p>  I / O </p><br><p></p><br></td></tr><tr><td width="78"><p>  <b>CPU</b> </p><br></td><td width="191"><p>  C√°lculo grande <br>  matriz de datos aleatorios </p><br></td><td width="301"><p>  Crea una gran variedad <br>  datos aleatorios que se utilizar√°n en el temporizador de E / S (temporizador de E / S) </p><br></td><td width="142"><p>  CPU </p><br></td></tr></tbody></table><br>  Al realizar la prueba, se calcula inicialmente la m√©trica b√°sica de VSIbase, que muestra la velocidad de las tareas sin la carga en el sistema.  En base a esto, se determina el umbral VSImax, que es igual a VSIbase + 1000ms. <br><br>  Las conclusiones sobre el rendimiento del sistema se basan en dos m√©tricas: VSIbase, que determina la velocidad del sistema, y ‚Äã‚Äãel umbral VSImax, que determina el n√∫mero m√°ximo de usuarios que el sistema puede soportar sin una degradaci√≥n significativa. <br><br><h3>  Punto de referencia de 300 trabajadores del conocimiento </h3><br>  Los trabajadores del conocimiento son usuarios que regularmente cargan memoria, procesador e IO con varios picos peque√±os.  El software emula la carga de los usuarios exigentes de la oficina, como si estuvieran constantemente metiendo algo (PDF, Java, suite ofim√°tica, viendo fotos, 7-Zip).  A medida que se agregan usuarios de cero a 300, la demora para cada uno aumenta gradualmente. <br><br>  Datos estad√≠sticos de VSImax: <br><img src="https://habrastorage.org/webt/yr/pg/u-/yrpgu-lqswmvwsxousflbpiid0e.png" alt="imagen"><br>  VSIbase = 986 ms, no se alcanz√≥ el umbral de VSI. <br><br>  Estad√≠sticas de la carga en el sistema de almacenamiento de la supervisi√≥n de SimpliVity: <br><img src="https://habrastorage.org/webt/hi/ki/x4/hikix4jqp5ujbqkeff-taxzp_z0.png" alt="imagen"><br><br>  Con este tipo de carga, el sistema puede soportar una carga mayor con poca o ninguna degradaci√≥n en el rendimiento.  El tiempo de ejecuci√≥n de las tareas del usuario crece sin problemas, el tiempo de respuesta del sistema no cambia durante las pruebas y es de hasta 3 ms para escritura y de hasta 1 ms para lectura. <br><br>  <b>Conclusi√≥n:</b> 300 conocimientos de usuarios sin ning√∫n problema trabajan en el cl√∫ster actual y no interfieren entre s√≠, alcanzando una sobre suscripci√≥n de pCPU / vCPU 1 a 6. Los retrasos generales aumentan de manera uniforme, pero no se ha alcanzado el l√≠mite condicional. <br><br><h3>  Punto de referencia de 300 trabajadores de almacenamiento </h3><br>  Estos son usuarios que constantemente escriben y leen en una proporci√≥n de 30 a 70, respectivamente.  Esta prueba se realiz√≥ m√°s por el bien del experimento.  Datos estad√≠sticos de VSImax: <br><img src="https://habrastorage.org/webt/ib/2h/ga/ib2hgacipsoa5r2w2qk-giyd_74.png" alt="imagen"><br><br>  VSIbase = 1673, umbral de VSI alcanzado en 240 usuarios. <br><br>  Estad√≠sticas de la carga en el sistema de almacenamiento de la supervisi√≥n de SimpliVity: <br><img src="https://habrastorage.org/webt/h3/5e/dl/h35edlal4qoqlm50xovdrm0skjm.png" alt="imagen"><br>  Este tipo de carga, de hecho, es una prueba de esfuerzo del sistema de almacenamiento.  Cuando se ejecuta, cada usuario escribe en el disco muchos archivos aleatorios de diferentes tama√±os.  En este caso, se puede ver que cuando se excede un cierto umbral de carga, algunos usuarios aumentan el tiempo requerido para completar las tareas de grabaci√≥n de archivos.  Al mismo tiempo, la carga en el sistema de almacenamiento, el procesador y la memoria del host no cambia significativamente, por lo tanto, actualmente es imposible determinar exactamente a qu√© se asocian los retrasos. <br><br>  Las conclusiones sobre el rendimiento del sistema usando esta prueba solo se pueden hacer en comparaci√≥n con los resultados de la prueba en otros sistemas, ya que tales cargas son sint√©ticas, poco realistas.  Sin embargo, en general, la prueba sali√≥ bien.  Hasta 210 sesiones, todo sali√≥ bien, y luego comenzaron las respuestas incomprensibles, que no se rastrearon en ninguna parte excepto Login VSI. <br><br><h3>  300 trabajadores de poder </h3><br>  Estos son usuarios que aman el procesador, la memoria y el alto IO.  Estos "usuarios avanzados" ejecutan regularmente tareas complejas con picos largos como instalar nuevo software y desempacar grandes archivos.  Datos estad√≠sticos de VSImax: <br><img src="https://habrastorage.org/webt/ai/v4/m0/aiv4m093szu4euojw1le0djqqvg.png" alt="imagen"><br><br>  VSIbase = 970, no se alcanz√≥ el umbral de VSI. <br><br>  Estad√≠sticas de la carga en el sistema de almacenamiento de la supervisi√≥n de SimpliVity: <br><img src="https://habrastorage.org/webt/01/61/tj/0161tj6hzex9d4yfjqati65jb8q.png" alt="imagen"><br><br>  Durante las pruebas, se alcanz√≥ el umbral de carga del procesador en uno de los nodos del sistema, pero esto no tuvo un impacto significativo en su funcionamiento: <br><br><img src="https://habrastorage.org/webt/s0/2q/z3/s02qz3amd1xazzhdk8hmh12rdpk.png" alt="imagen"><br><br><img src="https://habrastorage.org/webt/wn/yf/6s/wnyf6swpmuwerwvw6xxu881scni.png" alt="imagen"><br><br>  En este caso, el sistema puede soportar una carga mayor sin una degradaci√≥n significativa del rendimiento.  El tiempo de ejecuci√≥n de las tareas del usuario crece sin problemas, el tiempo de respuesta del sistema no cambia durante las pruebas y es de hasta 3 ms para escritura y de hasta 1 ms para lectura. <br><br>  Las pruebas habituales para el cliente no fueron suficientes, y fuimos m√°s all√°: aumentamos las caracter√≠sticas de la VM (la cantidad de vCPU para evaluar el aumento de la suscripci√≥n excesiva y el tama√±o del disco) y agregamos carga adicional. <br><br>  Durante pruebas adicionales, se utiliz√≥ la siguiente configuraci√≥n de soporte: <br>  Implement√© 300 escritorios virtuales en la configuraci√≥n de 4vCPU, 4GB RAM, 80GB HDD. <br><br>  Configuraci√≥n de una de las m√°quinas de prueba: <br><img src="https://habrastorage.org/webt/qf/ws/mj/qfwsmjptnkubxctz0-1gcx9u0si.png" alt="imagen"><br><br>  Las m√°quinas se implementan en la opci√≥n Dedicado - Copia completa: <br><br><img src="https://habrastorage.org/webt/tm/jz/0u/tmjz0uxhrw_adxqzttt2rgcboh8.png" alt="imagen"><br><br><img src="https://habrastorage.org/webt/qp/zz/iw/qpzziw9qrafmmvz5aeqs4aa26ru.png" alt="imagen"><br><br><h3>  300 trabajadores del conocimiento de referencia 12 sobresuscripci√≥n </h3><br>  Datos estad√≠sticos de VSImax: <br><img src="https://habrastorage.org/webt/1f/wq/kg/1fwqkg1fm42iqsjuvmll4cym7p4.png" alt="imagen"><br><br>  VSIbase = 921 ms, no se alcanz√≥ el umbral de VSI. <br><br>  Estad√≠sticas de la carga en el sistema de almacenamiento de la supervisi√≥n de SimpliVity: <br><img src="https://habrastorage.org/webt/v8/d1/ko/v8d1kocafexbhemlivrcfog9cy8.png" alt="imagen"><br><br>  Los resultados son similares a probar la configuraci√≥n anterior de VM. <br><br><h3>  300 trabajadores en exceso suscribi√©ndose 12 </h3><br>  Datos estad√≠sticos de VSImax: <br><img src="https://habrastorage.org/webt/dv/tz/gk/dvtzgkj-bpuanvk5ffguz65qmr0.png" alt="imagen"><br><br>  VSIbase = 933, no se alcanz√≥ el umbral de VSI. <br><br>  Estad√≠sticas de la carga en el sistema de almacenamiento de la supervisi√≥n de SimpliVity: <br><img src="https://habrastorage.org/webt/gw/gi/bo/gwgibojmbld7r6ztpoe6ss0y8bo.png" alt="imagen"><br><br>  En esta prueba, tambi√©n se alcanz√≥ el umbral de carga del procesador, pero esto no tuvo un impacto significativo en el rendimiento: <br><br><img src="https://habrastorage.org/webt/5m/ny/te/5mnyteugxst3_7osvcklrg2adxi.png" alt="imagen"><br><br><img src="https://habrastorage.org/webt/60/ha/eu/60haeutmt3k6bn2ywn70e7_d6bu.png" alt="imagen"><br><br>  Los resultados son similares a probar la configuraci√≥n anterior. <br><br><h3>  ¬øQu√© sucede si comienza la carga durante 10 horas? </h3><br>  Ahora veremos si habr√° un "efecto de acumulaci√≥n" y ejecutaremos pruebas durante 10 horas seguidas. <br><br>  Las pruebas largas y una descripci√≥n de la secci√≥n deben estar dirigidas al hecho de que quer√≠amos verificar si habr√≠a alg√∫n problema con la granja con una carga larga. <br><br><h3>  Punto de referencia de 300 trabajadores del conocimiento + 10 horas </h3><br>  Adem√°s, la prueba de la variante de carga de 300 trabajadores del conocimiento se llev√≥ a cabo con el trabajo posterior de los usuarios durante 10 horas. <br><br>  Datos estad√≠sticos de VSImax: <br><img src="https://habrastorage.org/webt/1m/bk/jc/1mbkjcthbgggrycwnjrqu56rwww.png" alt="imagen"><br><br>  VSIbase = 919 ms, no se alcanz√≥ el umbral de VSI. <br><br>  VSImax Datos estad√≠sticos detallados: <br><img src="https://habrastorage.org/webt/wy/lb/cs/wylbcstsir7bxiw9lua3m7xi2_c.png" alt="imagen"><br><br>  El gr√°fico muestra que durante toda la prueba no hay degradaci√≥n del rendimiento. <br><br>  Estad√≠sticas de la carga en el sistema de almacenamiento de la supervisi√≥n de SimpliVity: <br><img src="https://habrastorage.org/webt/gl/r4/g0/glr4g0s7zaeev1k1zq5turro40k.png" alt="imagen"><br><br>  El rendimiento del sistema de almacenamiento permanece en el mismo nivel durante toda la prueba. <br><br><h3>  Pruebas adicionales con carga sint√©tica adicional </h3><br>  El cliente solicit√≥ agregar una carga salvaje al disco.  Para hacer esto, se agreg√≥ una tarea al sistema de almacenamiento en cada una de las m√°quinas virtuales del usuario para iniciar una carga sint√©tica en el disco cuando el usuario inicia sesi√≥n en el sistema.  La carga fue proporcionada por la utilidad fio, que permite limitar la carga en el disco por el n√∫mero de IOPS.  En cada m√°quina, se lanz√≥ una tarea para iniciar una carga adicional en la cantidad de 22 IOPS 70% / 30% de lectura / escritura aleatoria. <br><br><h3>  Punto de referencia de 300 trabajadores del conocimiento + 22 IOPS por usuario </h3><br>  Durante las pruebas iniciales, se descubri√≥ que fio crea una carga adicional significativa en el procesador de las m√°quinas virtuales.  Esto condujo a una r√°pida sobrecarga del host en la CPU y afect√≥ en gran medida el funcionamiento del sistema en su conjunto. <br><br>  Carga de CPU de los hosts: <br><img src="https://habrastorage.org/webt/w6/gz/wt/w6gzwt7zok77j_mrtclbzur7sfc.png" alt="imagen"><br><br><img src="https://habrastorage.org/webt/_m/n7/dw/_mn7dwrbhicgrgllc9cnb_gzxkm.png" alt="imagen"><br><br>  Los retrasos del sistema de almacenamiento tambi√©n aumentaron naturalmente: <br><img src="https://habrastorage.org/webt/vp/uz/e7/vpuze7bmzsbvpsskg_3rcsyxlrk.png" alt="imagen"><br><br>  La falta de potencia inform√°tica se ha vuelto cr√≠tica para aproximadamente 240 usuarios: <br><img src="https://habrastorage.org/webt/uq/nr/e7/uqnre7iobieo2zcqosxmadyl7ca.png" alt="imagen"><br><br>  Debido a los resultados, se decidi√≥ realizar una prueba que requiere menos CPU. <br><br><h3>  Referencia de 230 trabajadores de oficina + 22 IOPS por usuario </h3><br>  Para reducir la carga en la CPU, se seleccion√≥ el tipo de carga de los trabajadores de Office y se agregaron 22 IOPS de carga sint√©tica a cada sesi√≥n. <br><br>  La prueba se limit√≥ a 230 sesiones para no exceder la carga m√°xima en la CPU. <br><br>  La prueba se lanz√≥ con el trabajo posterior de los usuarios durante 10 horas para verificar la estabilidad del sistema durante la operaci√≥n prolongada a una carga cercana al m√°ximo. <br><br>  Datos estad√≠sticos de VSImax: <br><img src="https://habrastorage.org/webt/ne/vz/nh/nevznhbzamx-9idqqcsmkaip6j4.png" alt="imagen"><br><br>  VSIbase = 918 ms, no se alcanz√≥ el umbral de VSI. <br><br>  VSImax Datos estad√≠sticos detallados: <br><img src="https://habrastorage.org/webt/e6/3b/2g/e63b2g_qhey5o9vmzuanqfidqhe.png" alt="imagen"><br><br>  El gr√°fico muestra que durante toda la prueba no hay degradaci√≥n del rendimiento. <br><br>  Estad√≠sticas de CPU: <br><img src="https://habrastorage.org/webt/mt/tn/jo/mttnjo09trs9shnvuelmutmkjaw.png" alt="imagen"><br><br><img src="https://habrastorage.org/webt/at/bv/im/atbvim4noi3ehoqwcpw_nkuk5hu.png" alt="imagen"><br><br>  Al realizar esta prueba, la carga en la CPU de los hosts era casi m√°xima. <br><br>  Estad√≠sticas de la carga en el sistema de almacenamiento de la supervisi√≥n de SimpliVity: <br><img src="https://habrastorage.org/webt/qc/_z/bd/qc_zbdfztexr5yw6s2xh2pe_evy.png" alt="imagen"><br><br>  El rendimiento del sistema de almacenamiento permanece en el mismo nivel durante toda la prueba. <br><br>  La carga en el sistema de almacenamiento durante la prueba fue de aproximadamente 6.500 IOPS en una proporci√≥n de 60/40 (3.900 IOPS para lectura, 2.600 IOPS para escritura), que es de aproximadamente 28 IOPS por estaci√≥n de trabajo. <br><br>  El tiempo de respuesta promedi√≥ 3 ms para escritura y hasta 1 ms para lectura. <br><br><h2>  Resumen </h2><br>  Al modelar cargas reales en la infraestructura HPE SimpliVity, se obtuvieron resultados que confirmaron la capacidad del sistema para proporcionar escritorios virtuales en la cantidad de al menos 300 m√°quinas Full Clone en un par de nodos SimpliVity.  Al mismo tiempo, el tiempo de respuesta del sistema de almacenamiento se mantuvo en un nivel √≥ptimo durante toda la prueba. <br><br>  Estamos muy impresionados por el enfoque sobre las largas pruebas y la comparaci√≥n de soluciones antes de la implementaci√≥n.  Podemos probar el rendimiento de sus cargas de trabajo si lo desea.  Incluyendo otras soluciones hiperconvergentes.  El cliente mencionado ahora est√° completando pruebas en otra soluci√≥n en paralelo.  Su infraestructura actual es solo una flota de PC, dominio y software en cada lugar de trabajo.  Pasar a VDI sin pruebas es, por supuesto, bastante dif√≠cil.  Espec√≠ficamente, es dif√≠cil comprender las capacidades reales de la granja de servidores VDI sin migrar usuarios reales a ella.  Y estas pruebas le permiten evaluar r√°pidamente las capacidades reales de un sistema en particular sin la necesidad de atraer usuarios comunes.  Por lo tanto, tal estudio surgi√≥. <br><br>  El segundo enfoque importante: el cliente estableci√≥ inmediatamente la escala correcta.  Aqu√≠ puede comprar un servidor y agregar una granja, por ejemplo, para 100 usuarios, todo es predecible al precio del usuario.  Por ejemplo, cuando necesiten agregar otros 300 usuarios, sabr√°n que necesitan dos servidores en una configuraci√≥n ya definida y no reconsiderar√°n las posibilidades de actualizar su infraestructura como un todo. <br><br>  Caracter√≠sticas interesantes de la Federaci√≥n HPE SimpliVity.  El negocio est√° dividido geogr√°ficamente, por lo que tiene sentido colocar su propia pieza de hierro VDI por separado en una oficina distante.  En SimpliVity Federation, cada m√°quina virtual se replica de acuerdo con un cronograma con la capacidad de hacerlo entre grupos geogr√°ficamente remotos muy r√°pidamente y sin carga en el canal; esta es una muy buena copia de seguridad integrada.  Cuando se replican m√°quinas virtuales entre sitios, el canal se usa lo menos posible, y esto hace posible construir arquitecturas DR muy interesantes con un solo centro de control y un mont√≥n de sitios de almacenamiento descentralizados. <br><img src="https://habrastorage.org/webt/iu/zm/mo/iuzmmojtdcsyhteccn2fvq4bxbi.png" alt="imagen"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Federaci√≥n</a> <br><br>  Todo esto en conjunto permite evaluar el aspecto financiero con gran detalle, e imponer los costos de VDI en los planes de crecimiento de la compa√±√≠a, y comprender cu√°n r√°pido la soluci√≥n dar√° sus frutos y c√≥mo funcionar√°.  Porque cualquier VDI es una soluci√≥n que en √∫ltima instancia ahorra una tonelada de recursos, pero al mismo tiempo, muy probablemente, sin una oportunidad rentable de cambiarlo dentro de los 5-7 a√±os de uso. <br><br>  En general, si tiene alguna pregunta que no sea para comentarios, escr√≠bame a mk@croc.ru. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/449210/">https://habr.com/ru/post/449210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449196/index.html">Flexiant Cloud Orchestrator: con qu√© se come</a></li>
<li><a href="../449198/index.html">FFmpeg comienza con Visual Studio</a></li>
<li><a href="../449200/index.html">Aspectos destacados del pasado Mosc√∫ Python Conf ++ 2019: transformaci√≥n en una plataforma para la comunicaci√≥n</a></li>
<li><a href="../449204/index.html">A medida que consideramos las m√©tricas para el desarrollo y soporte de la documentaci√≥n. Informe Yandex</a></li>
<li><a href="../449208/index.html">C√≥mo crear y administrar equipos exitosos</a></li>
<li><a href="../449214/index.html">Klusterkit</a></li>
<li><a href="../449216/index.html">Hacer trampa en c√°maras de vigilancia automatizadas</a></li>
<li><a href="../449218/index.html">10 habilidades cr√≠ticas que cada ingeniero de DevOps</a></li>
<li><a href="../449220/index.html">DrumHero: C√≥mo hice el primer juego en mi vida</a></li>
<li><a href="../449224/index.html">Sobre el sesgo de la inteligencia artificial</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>