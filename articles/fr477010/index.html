<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”¸ ğŸ ğŸ‘©ğŸ¿â€ğŸ”§ Slurm Mega. Installation d'un cluster prÃªt pour la production, 3 conseils utiles pour les haut-parleurs et Slurm avec Luke Skyoker et R2D2 ğŸˆšï¸ ğŸ”± ğŸˆµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le 24 novembre s'est terminÃ© avec Slurme Mega, un cours intensif avancÃ© sur Kubernetes. La prochaine Mega se tiendra Ã  Moscou du 18 au 20 mai. 





 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Slurm Mega. Installation d'un cluster prÃªt pour la production, 3 conseils utiles pour les haut-parleurs et Slurm avec Luke Skyoker et R2D2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/477010/"><p>  Le 24 novembre s'est terminÃ© avec Slurme Mega, un cours intensif avancÃ© sur Kubernetes.  <a href="https://slurm.io/mega%3Futm_source%3Dhabrreport%26utm_medium%3Dhabrreport%26utm_campaign%3Dhabrreport">La prochaine Mega</a> se tiendra Ã  Moscou du 18 au 20 mai. </p><br><p><img src="https://habrastorage.org/webt/lp/-y/r-/lp-yr-8tmqls1ygypj-a-_ubsf8.jpeg"></p><br><p>  L'idÃ©e de Slurm Mega: nous regardons sous le capot du cluster, nous analysons en thÃ©orie et pratiquons les subtilitÃ©s de l'installation et de la configuration du cluster prÃªt Ã  la production (Â«the-not-so-easy-wayÂ»), nous considÃ©rons les mÃ©canismes garantissant la sÃ©curitÃ© et la tolÃ©rance aux pannes des applications. </p><br><p> Mega Bonus: ceux qui rÃ©ussissent le Slurm Basic et le Slurm Mega reÃ§oivent toutes les connaissances nÃ©cessaires pour rÃ©ussir l'examen <a href="https://www.cncf.io/certification/cka/">CKA</a> Ã  la <a href="https://www.cncf.io/certification/cka/">CNCF</a> et une remise de 50% sur l'examen. </p><br><p>  Un merci spÃ©cial Ã  Selectel pour avoir fourni le cloud pour la pratique, grÃ¢ce auquel chaque participant a travaillÃ© dans son propre cluster Ã  part entiÃ¨re, et nous n'avons pas eu Ã  ajouter 5 000 supplÃ©mentaires au prix du billet pour cela. </p><br><p><a name="habracut"></a>  Je ne dirai pas qui sont Bondarev et Selivanov, qui sont intÃ©ressÃ©s, <a href="https://habr.com/ru/company/southbridge/blog/476526/">lisez ici</a> . </p><br><p>  <strong>Slurm Mega.</strong>  <strong>Premier jour.</strong> </p><br><p>  Le premier jour de Slurm Mega, nous avons chargÃ© les participants de 4 sujets.  Pavel Selivanov a parlÃ© du processus de crÃ©ation d'un cluster Ã  sÃ©curitÃ© intÃ©grÃ©e de l'intÃ©rieur, du travail de Kubeadm, ainsi que des tests et du clustering de cluster. </p><br><p><img src="https://habrastorage.org/webt/_v/ei/r-/_veir-kpprdyk8dq8m0l3sktnba.jpeg"></p><br><p>  La premiÃ¨re pause-cafÃ©.  Habituellement, un Â«appel Ã  un enseignantÂ», mais sur Slurm, pendant que les Ã©lÃ¨ves boivent du cafÃ©, les enseignants continuent de rÃ©pondre aux questions. </p><br><p><img src="https://habrastorage.org/webt/fu/ah/gm/fuahgmesttrer7kljuagpal_mge.jpeg"><br>  <em>Et malgrÃ© le fait que le nuage Â«Break IIÂ» plane au-dessus de la tÃªte de Pavel Selivanov, ce n'est pas le destin de partir pour une pause.</em> </p><br><p><img src="https://habrastorage.org/webt/kw/pg/yy/kwpgyyrtbedhkowj_nqs5olc6am.jpeg"><br>  <em>Sergei Bondarev et Marcel Ibraev font la queue pour se rendre au dÃ©partement.</em> </p><br><p>  Pendant la pause, je suis allÃ© voir Sergey Bondarev et lui ai demandÃ©: Â«Que recommanderiez-vous Ã  tous les ingÃ©nieurs de Kubernetes en fonction de votre expÃ©rience de travail avec les clusters de nos clients?Â» </p><br><p>  Sergey a fait une recommandation simple: Â« <em>Bloquer l'accÃ¨s d'Internet au serveur API.</em>  <em>Parce que pÃ©riodiquement, il existe des menaces de sÃ©curitÃ© qui permettent aux utilisateurs non autorisÃ©s d'accÃ©der au cluster.</em>  " </p><br><p>  AprÃ¨s quelques minutes et une bouteille d'eau minÃ©rale, Pavel Selivanov se prÃ©cipita dans la bataille avec <del>  une ombre </del>  le sujet Â«Connexion au cluster Ã  l'aide d'un fournisseur externeÂ», Ã  savoir LDAP (Nginx + Python) et OIDC (Dex + Gangway). </p><br><p>  Au cours de la pause suivante, les ingÃ©nieurs de Kubernetes ont Ã©tÃ© conseillÃ©s par Marcel Ibraev, prÃ©sident de Slerm, administrateur certifiÃ© de Kubernetes: Â« <em>Je dirai quelque chose de trivial, mais Ã©tant donnÃ© la frÃ©quence Ã  laquelle je rencontre cela, on soupÃ§onne que tout le monde n'en tient pas compte.</em>  <em>Ne croyez pas aveuglÃ©ment toutes sortes de procÃ©dures Internet, qui vous diront Ã  quel point telle ou telle solution fonctionne.</em>  <em>Dans le contexte de Kubernetes, cela prend une signification particuliÃ¨re.</em>  <em>Pour Kubernetes, un systÃ¨me complexe et l'ajout d'une solution qui n'a pas Ã©tÃ© testÃ©e spÃ©cifiquement dans votre projet et votre installation du cluster, peut entraÃ®ner de tristes consÃ©quences, malgrÃ© le fait qu'ils aient Ã©crit sur sa fraÃ®cheur sur Internet.</em>  <em>MÃªme juste Kubernetes lui-mÃªme, sans une approche Ã©quilibrÃ©e, peut nuire Ã  votre projet, "ce qui est bon pour le Russe est la mort pour l'Allemand."</em>  <em>Par consÃ©quent, nous testons, vÃ©rifions et exÃ©cutons toute solution avant de la mettre en Å“uvre Ã  la maison.</em>  <em>Ce n'est que de cette maniÃ¨re que vous prendrez en compte toutes les nuances qui pourraient survenir</em> . Â» </p><br><p>  AprÃ¨s le dÃ©jeuner, Sergey Bondarev a rejoint la bataille.  Son sujet est la politique de rÃ©seau, Ã  savoir une introduction au CNI et Ã  la politique de sÃ©curitÃ© du rÃ©seau. </p><br><p><img src="https://habrastorage.org/webt/lt/qz/v6/ltqzv68ozpxjwbqa_hbuy0lbqj0.jpeg"></p><br><p>  Internet regorge d'articles sur la politique rÃ©seau.  Les administrateurs pensent que vous pouvez vous passer des stratÃ©gies rÃ©seau, mais les agents de sÃ©curitÃ© adorent cet outil et nÃ©cessitent l'activation des stratÃ©gies rÃ©seau. </p><br><p>  Le volant de Kubernetes de Sergey Bondarev a Ã©tÃ© interceptÃ© par Pavel Selivanov sur le thÃ¨me "Applications sÃ»res et hautement accessibles dans le cluster".  Il a ses sujets prÃ©fÃ©rÃ©s: PodSecurityPolicy, PodDisruptionBudget, LimitRange / ResourceQuota. </p><br><p><img src="https://habrastorage.org/webt/4e/fr/cu/4efrcupnqfwjyrofwbnsdmcsgl4.jpeg"></p><br><p>  Le sujet de Mega dont Pavel a parlÃ© Ã  DevOpsConf: <a href="https://habr.com/ru/company/southbridge/blog/472484/">comment briser rapidement et facilement le cluster Kubernetes et obtenir tous les droits en 5 minutes</a> . </p><br><p>  AprÃ¨s l'histoire, la facilitÃ© avec laquelle le cluster Kubernetes est craquÃ©, les administrateurs sceptiques disent: "Oui, je vous l'ai dit, votre Kubernetes est une connerie troublÃ©e."  Pavel explique qu'il est possible de configurer la sÃ©curitÃ© dans un cluster, et ce n'est pas difficile, seuls les paramÃ¨tres de sÃ©curitÃ© sont dÃ©sactivÃ©s par dÃ©faut.  DÃ©tails dans la transcription du <a href="https://habr.com/ru/company/southbridge/blog/472484/">rapport</a> . </p><br><p><img src="https://habrastorage.org/webt/xw/tg/rn/xwtgrnbpolizppjnja-vkc8z3bq.jpeg"><br>  <em>- Qui a cassÃ© le cluster?</em>  <em>Il a donc cassÃ© un cluster!</em>  <em>Je peux voir parfaitement d'ici!</em> </p><br><p>  Tout est simple et facile sur Slmerms, pour ne pas s'ennuyer.  Mais cette fois, Telegram a dÃ©cidÃ© de montrer Ã  tout le monde le cinquiÃ¨me point: </p><br><pre><code class="plaintext hljs"> , [22 . 2019 ., 16:52:52]: ,        ,   </code> </pre> <br><p><img src="https://habrastorage.org/webt/od/sw/lb/odswlbzgstlt95kaspmynfwogqw.png"></p><br><p>  Sur ce brillant et rempli de connaissances pratiques, le premier jour s'est terminÃ©.  Le deuxiÃ¨me jour, il y aura encore plus de pratique, dÃ©marrer un cluster de base de donnÃ©es en utilisant l'exemple PostgreSQL, dÃ©marrer un cluster RabbitMQ, gÃ©rer les secrets dans Kubernetes. </p><br><p><img src="https://habrastorage.org/webt/ed/ry/mg/edrymgieyudpsmmeldfjwnqabdm.jpeg"></p><br><p>  <strong>Slurm Mega.</strong>  <strong>DeuxiÃ¨me jour.</strong> </p><br><p>  L'animateur a commencÃ© la deuxiÃ¨me journÃ©e par une annonce animÃ©e: Â«Le matin, comme Pavel l'a dit hier, un vrai hardcore nous attend.  Dans la langue des chirurgiens, nous creusons dans les tripes de Kubernetes! Â» </p><br><p>  L'animateur de masse est une histoire distincte.  L'un des problÃ¨mes de Slurm est que les personnes en surcharge d'informations sont dÃ©connectÃ©es et s'endorment.  Nous avons toujours cherchÃ© un moyen d'y remÃ©dier, et dans le dernier Slurme, les petits matchs avec le public se sont bien montrÃ©s.  Cette fois, nous avons embauchÃ© une personne spÃ©cialement formÃ©e.  Nous avons beaucoup discutÃ© de Â«concours intÃ©ressantsÂ» dans le chat, mais le fait demeure que nous n'avons pas vu de participants aussi excitants. </p><br><p><img src="https://habrastorage.org/webt/ru/1c/nm/ru1cnmpcfkyfl4srb3y1bqqlymy.jpeg"></p><br><p>  Marcel Ibraev est venu Ã  la rescousse - et il a commencÃ© Ã  Ã©tudier les applications Stateful dans le cluster.  A savoir, dÃ©marrer un cluster de base de donnÃ©es en utilisant l'exemple de PostgreSQL et dÃ©marrer un cluster RabbitMQ. </p><br><p>  AprÃ¨s le dÃ©jeuner, Sergey Bondarev s'est rendu au K8S.  Et son thÃ¨me Ã©tait "Garder les secrets".  Il Ã©tait couvert par Mulder et Scully.  Gestion des secrets appris dans Kubernetes et Vault.  Et aussi "La vÃ©ritÃ© est lÃ -bas." </p><br><p><img src="https://habrastorage.org/webt/25/6-/ft/256-ftjxbsudpoumgjccw64tq1q.jpeg"></p><br><p>  Qui a continuÃ© jusque tard dans la soirÃ©e lorsque Pavel Selivanov a parlÃ© de l'autoscaler Ã  dosettes horizontales </p><br><p>  <strong>Slurm Mega.</strong>  <strong>TroisiÃ¨me jour.</strong> </p><br><p>  Brusquement et vivement le matin, Sergey Bondarev a choquÃ© le public avec une sauvegarde et une rÃ©cupÃ©ration aprÃ¨s des Ã©checs.  La sauvegarde et la rÃ©cupÃ©ration de cluster Ã  l'aide de Heptio Velero et etcd ont Ã©tÃ© vÃ©rifiÃ©es personnellement. </p><br><p><img src="https://habrastorage.org/webt/x-/zo/e7/x-zoe7ucfo42hqbarrixdndblog.jpeg"></p><br><p>  Sergey a poursuivi le sujet de la rotation annuelle des certificats dans un cluster: renouvellement des certificats de plan de contrÃ´le Ã  l'aide de kubeadm.  Juste avant le dÃ©jeuner, pour aiguiser l'appÃ©tit des participants ou le repousser complÃ¨tement, Pavel Selivanov a soulevÃ© la question du dÃ©ploiement de l'application. </p><br><p><img src="https://habrastorage.org/webt/yn/9t/at/yn9tatk-qbo7_uco3nzfz7xlpj0.jpeg"></p><br><p>  Nous avons examinÃ© les outils de modÃ©lisation et de dÃ©ploiement, et en mÃªme temps les stratÃ©gies de dÃ©ploiement. </p><br><p>  Pavel Selivanov a parlÃ© d'un nouveau sujet: Service Mesh, installation d'Istio.  Le sujet s'est avÃ©rÃ© si riche qu'il peut Ãªtre traitÃ© sÃ©parÃ©ment de maniÃ¨re intensive.  Nous discutons des plans, suivons les annonces. </p><br><p>  L'essentiel est que tout fonctionne correctement.  Parce qu'il est temps de pratiquer: <br>  construction de CI / CD pour lancer simultanÃ©ment le dÃ©ploiement d'applications et la mise Ã  jour du cluster.  Dans les projets de formation, tout fonctionne bien.  Et la vie est parfois pleine de surprises. </p><br><p><img src="https://habrastorage.org/webt/et/jv/he/etjvheoqceo8wudprtgct_pdegw.jpeg"></p><br><p>  Que le Slurm soit avec vous! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr477010/">https://habr.com/ru/post/fr477010/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr477000/index.html">Comment augmenter la prÃ©cision des capteurs</a></li>
<li><a href="../fr477002/index.html">Comment nous avons hÃ©bergÃ© le scandaleux tableau d'images 8chan</a></li>
<li><a href="../fr477004/index.html">Ã‰nergie solaire salÃ©e</a></li>
<li><a href="../fr477006/index.html">Java est-il le meilleur langage de programmation pour les dÃ©butants?</a></li>
<li><a href="../fr477008/index.html">Buildroot: CrÃ©ation d'un firmware multiplateforme avec zabbix-server</a></li>
<li><a href="../fr477014/index.html">Enfants sur Internet: comment garantir la cybersÃ©curitÃ© des utilisateurs les plus vulnÃ©rables</a></li>
<li><a href="../fr477016/index.html">Pourquoi allons-nous aux confÃ©rences scientifiques?</a></li>
<li><a href="../fr477018/index.html">MÃ©canisme de confidentialitÃ© Hack Mimblewimble</a></li>
<li><a href="../fr477020/index.html">Jugez n'importe qui d'une simple pression sur un bouton</a></li>
<li><a href="../fr477022/index.html">Comment pouvons-nous vous aider? Comment pouvez-vous nous aider?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>