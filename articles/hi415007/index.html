<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯМЮ ЁЯЦХЁЯП╗ ЁЯНд рд▓рд┐рдирдХреНрд╕ рдкрд░ рдЬрдЯрд┐рд▓ рддрд░реАрдХреЗ рд╕реЗ рдмреНрд▓реВрдЯреВрде рдХреИрд╕реЗ рд╕реЗрдЯ рдХрд░реЗрдВ ЁЯСйтАНтЪХя╕П ЁЯФй ЁЯРК</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╡рд╛рд░реНрд╖рд┐рдХ рдЖрдИрдЯреА рдлреЛрд░рдо рдХреА рддреИрдпрд╛рд░реА рдореЗрдВ, рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдФрд░ рдПрдХрд▓-рдмреЛрд░реНрдб рдХрдВрдкреНрдпреВрдЯрд░ рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд╛рдпрд░рд▓реЗрд╕ рдЧреЗрдордкреИрдб рджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдПрдХ рд╕рд░рд▓ рдореИрди...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд▓рд┐рдирдХреНрд╕ рдкрд░ рдЬрдЯрд┐рд▓ рддрд░реАрдХреЗ рд╕реЗ рдмреНрд▓реВрдЯреВрде рдХреИрд╕реЗ рд╕реЗрдЯ рдХрд░реЗрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415007/"><p><img src="https://habrastorage.org/webt/wq/9u/sv/wq9usvb7w6-8_c5p_dhrrkom_qa.jpeg"></p><br><p> рд╡рд╛рд░реНрд╖рд┐рдХ рдЖрдИрдЯреА рдлреЛрд░рдо рдХреА рддреИрдпрд╛рд░реА рдореЗрдВ, рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдФрд░ рдПрдХрд▓-рдмреЛрд░реНрдб рдХрдВрдкреНрдпреВрдЯрд░ рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд╛рдпрд░рд▓реЗрд╕ рдЧреЗрдордкреИрдб рджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдПрдХ рд╕рд░рд▓ рдореИрдирд┐рдкреБрд▓реЗрдЯрд░ рдмрдирд╛рдиреЗ рдХрд╛ рд╡рд┐рдЪрд╛рд░ рдЖрдпрд╛ред  рдордВрдЪ рдХреА рд╢реБрд░реБрдЖрдд рд╕реЗ рдПрдХ рдорд╣реАрдиреЗ рдкрд╣рд▓реЗ, рдПрдХ TRIC рдХрдВрдЯреНрд░реЛрд▓рд░, рдХрдИ рд╕рд░реНрд╡реЛрдореЛрдЯрд░реНрд╕, рдПрдХ рдЖрдпрд░рди рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдФрд░ рдПрдХ рдорд╣реАрдиреЗ рдереЗред </p><br><p>  "рд╕рдм рдХреБрдЫ рдпреЛрдЬрдирд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИ," рд▓реЗрдХрд┐рди рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдирд╣реАрдВред </p><a name="habracut"></a><br><h1 id="etap-1-podgotovka">  рдЪрд░рдг 1. рддреИрдпрд╛рд░реА </h1><br><p>  TRIC рдкрд░ рд╕рд╡рд╛рд░ рд▓рд┐рдирдХреНрд╕ рдРрд╕реЗ рдореИрдирд┐рдкреБрд▓реЗрдЯрд░ рдХреЗ рд▓рд┐рдП рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рд╣рд▓рдЪрд▓ рдерд╛</a> , рд▓реЗрдХрд┐рди "рдпрд╣ рдмрд╛рдд рдмрд╣реБрдд рд╣реА рдкреНрд░рдпреЛрдЬреНрдп рдФрд░ рд░рдЦрд░рдЦрд╛рд╡ рдХреА рд╣реИ" ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрдорд╛рд░реНрдЯ рдЗрдВрдЯрд░рдХреЙрдо</a> рдореЗрдВ рд▓рд┐рдирдХреНрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" class="user_link">рдХреНрд▓рд╕реНрдЯрд░рд╕реНрдЯрд░</a> рдЙрджреНрдзрд░рдг)ред </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрдкреЗрд╕рд┐рдлрд┐рдХреЗрд╢рди</a> рдкрдврд╝рдиреЗ рдХреЗ рдмрд╛рдж рдкрддрд╛ рдЪрд▓рд╛ рдХрд┐ рдЗрд╕рдореЗрдВ рдмреНрд▓реВрдЯреВрде рд╣реИред  рдпрджрд┐ рдЖрдкрдиреЗ рдЗрд╕ рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХрд╛ рд╕реНрдерд╛рдирд╛рдВрддрд░рдг рд╡рд╛рдИ-рдлрд╛рдИ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдЕрдиреНрдп рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рддрд░реАрдХреЗ рдирд╣реАрдВ рд╣реИрдВред  рдореЗрдиреВ рдореЗрдВ рдмреНрд▓реВрдЯреВрде рдХрд╛ рдХреЛрдИ рдЙрд▓реНрд▓реЗрдЦ рдирд╣реАрдВ рд╣реИред  рд▓реЗрдХрд┐рди рдРрд╕рд╛ рдХреИрд╕реЗ? </p><br><p>  рдПрд╕рдПрд╕рдПрдЪ, рдПрдХ рдкреЗрдЪрдХрд╢ рдФрд░ рдЬрд┐рдЬреНрдЮрд╛рд╕рд╛ рд╕реЗ рд▓реИрд╕, рдореИрдВрдиреЗ рдмреНрд▓реВрдЯреВрде рдХреА рддрд▓рд╛рд╢ рд╢реБрд░реВ рдХрд░ рджреАред  рдЗрд╕ рдкреНрд░рдгрд╛рд▓реА рдореЗрдВ hcitool, hciconfig рдФрд░ bluetoothd daemon рд╢рд╛рдорд┐рд▓ рдереЗред  рдЙрди рд╕рднреА рдиреЗ рдХрд╣рд╛ рдХрд┐ рд╡рд╣ рд╡рд╣рд╛рдВ рдирд╣реАрдВ рдерд╛ред </p><br><pre><code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># hcitool dev Devices:</span></span></code> </pre> <br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># hciconfig hci0 Can't get device info: No such device</span></span></code> </pre> <br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># bluetoothd -n &amp; [1] 5449 root@trik-7dda93:~# bluetoothd[5449]: Bluetooth daemon 4.101 bluetoothd[5449]: Starting SDP server bluetoothd[5449]: Bluetooth Management interface initialized</span></span></code> </pre> <br><p>  рдмрд╛рд╣рд░реА USB рдореЙрдбреНрдпреВрд▓ рдХреА рддрд▓рд╛рд╢ рдореЗрдВ рджреЛрд╕реНрддреЛрдВ рдХреЛ рдХреЙрд▓ рдХрд░рдирд╛, рдореИрдВрдиреЗ рдЦреЛрдЬ рдЬрд╛рд░реА рд░рдЦреАред </p><br><p>  рдирд┐рдпрдВрддреНрд░рдХ рдХреЛ рдЕрд▓рдЧ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЬреЛрд░реНрдЬрд┐рди WG7311-0A рдореЙрдбреНрдпреВрд▓ рдкрд╛рдпрд╛ рдЧрдпрд╛ред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рдирд┐рд░реНрджреЗрд╢</a> рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╡рд╛рдИ-рдлрд╛рдИ, рдмреНрд▓реВрдЯреВрде рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдПрдХ рдПрдлрдПрдо рд░реЗрдбрд┐рдпреЛ рднреА рд╣реИред  рдмреНрд▓реВрдЯреВрде рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдВрдЯрд░рдлрд╝реЗрд╕ UART рд╣реИ, рдФрд░ рдЗрд╕реЗ BT_EN рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЪрд╛рд▓реВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/de/5d/qh/de5dqhz_nocaef_cwt0fh_d5umc.jpeg"></p><br><p>  рдпрд╣ рдкрдврд╝рдиреЗ рдХреЗ рдмрд╛рдж рдХрд┐ рдмреНрд▓реВрдЯреВрде рдореЙрдбреНрдпреВрд▓ рдХреЛ UART рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ hcitool рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреИрд╕реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдореИрдВрдиреЗ рдЕрдкрдиреА рдХрд┐рд╕реНрдордд рдФрд░ рдХреБрдЫ рднреА рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреАред  рддреАрди рдореБрдХреНрдд UART рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдореЗрдВ рд╕реЗ рджреЛ рдЪреБрдк рдереЗред </p><br><p>  рд▓реЗрдХрд┐рди рд╣рдорд╛рд░рд╛ рд╕рдВрдкрд░реНрдХ BT_EN рд╕реЗ рд╣реИ!  рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдореЙрдбреНрдпреВрд▓ рдмрд╕ рдмрдВрдж рд╣реЛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рдЬрд╡рд╛рдм рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИред  рдПрдЖрд░рдПрдо рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдПрдХ рдлрд╛рдЗрд▓ рдорд┐рд▓реА рдЬрд╣рд╛рдВ рдПрд╕рдУрд╕реА рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рд╕рднреА рд╕рдВрдкрд░реНрдХ рдкрдВрдЬреАрдХреГрдд рд╣реИрдВред  рдХрд░реНрдиреЗрд▓ рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ <code>arch/arm/mach-davinci/board-da850-trik.c</code> рдХреЛ <code>arch/arm/mach-davinci/board-da850-trik.c</code> , рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдмреНрд▓реВрдЯреВрде рдХреЗ рд▓рд┐рдП <code>arch/arm/mach-davinci/board-da850-trik.c</code> рд╕рдВрдкрд░реНрдХ рдкрд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЬреАрдд!  рдореИрдВрдиреЗ рд╕реЛрдЪрд╛ред </p><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> da850_trik_bluetooth_pins[] __initconst = { DA850_GPIO6_11, <span class="hljs-comment"><span class="hljs-comment">/*BT_EN_33 */</span></span> DA850_GPIO6_10, <span class="hljs-comment"><span class="hljs-comment">/*BT_WU_33*/</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> };</code> </pre> <br><h1 id="etap-2-nastuplenie">  рд╕реНрдЯреЗрдЬ 2. рдЖрдкрддреНрддрд┐рдЬрдирдХ </h1><br><p>  GPIO рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд┐рд╕реА рд╕рдВрдкрд░реНрдХ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЗрд╕рдХрд╛ рдПрдВрдб-рдЯреВ-рдПрдВрдб рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдЦреЛрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╣рдо <code>arch/arm/mach-davinci/board-da850-trik.c</code> рдореЗрдВ BT_EN_33 рд╕рдВрдкрд░реНрдХ рдХреЛ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рдЕрдиреБрд░реЛрдз рдХреЗ рд╕рд╛рде рдХрд░реНрдиреЗрд▓ рдХреЛрдб рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд▓рд╛рдЗрди рдкрд╛рддреЗ рд╣реИрдВ: </p><br><pre> <code class="hljs lisp">ret = gpio_request_one(<span class="hljs-name"><span class="hljs-name">GPIO_TO_PIN</span></span>(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>), GPIOF_OUT_INIT_LOW, <span class="hljs-string"><span class="hljs-string">"BT_EN_33"</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br><p>  рдпрд╣ рдореИрдХреНрд░реЛ GPIO_TO_PIN рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  <code>arch/arm/mach-davinci/include/mach/gpio-davinci.h</code> рдореЗрдВ рдореИрдХреНрд░реЛ рд╡рд┐рд╡рд░рдг рджреЗрдЦреЗрдВ <code>arch/arm/mach-davinci/include/mach/gpio-davinci.h</code> : </p><br><pre> <code class="hljs cs"><span class="hljs-comment"><span class="hljs-comment">/* Convert GPIO signal to GPIO pin number */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> GPIO_TO_PIN(bank, gpio) (16 * (bank) + (gpio))</span></span></code> </pre> <br><p>  рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рдПрдВрдб-рдЯреВ-рдПрдВрдб рдХреЙрдиреНрдЯреИрдХреНрдЯ рдирдВрдмрд░ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдо 16 * 6 + 11 = 107 рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред рдЕрдм рд╣рдо рд╕рдВрдкрд░реНрдХ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рдХреА рдУрд░ рдореБрдбрд╝рддреЗ рд╣реИрдВред </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 1 &gt;&gt; /sys/devices/virtual/gpio/gpio107/value</code> </pre> <br><p>  рдЗрдХреЛ рдХрдорд╛рдВрдб рдореЗрдВ 0 рдпрд╛ 1 рд╕рдВрдкрд░реНрдХ рдХреА рд╕реНрдерд┐рддрд┐ рд╣реИред </p><br><p>  рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдБ рдФрд░ ... </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># hciattach /dev/ttyS0 texas Found a Texas Instruments' chip! Firmware file : /lib/firmware/TIInit_7.6.15.bts can't open firmware file: No such file or directory Warning: cannot find BTS file: /lib/firmware/TIInit_7.6.15.bts Device setup complete</span></span></code> </pre> <br><p>  рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЕрд╕рдВрдЧрдд (рдлрд┐рд▓рд╣рд╛рд▓) рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ред  рд╣рдо hcitool рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ: </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># hcitool dev Devices:</span></span></code> </pre> <br><p>  рдХреЛрдИ рдЙрдкрдХрд░рдг рдирд╣реАрдВ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд░реВрдк рд╕реЗ рдХрдерд┐рдд рд░реВрдк рд╕реЗ рдкрд╛рд░рд┐рдд рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рд╣рдо рджреВрд╕рд░реА рдмрд╛рд░ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдПрдХ рдЕрд▓рдЧ рдкреНрд░рдХрд╛рд░ рдХреЗ рдПрдбрд╛рдкреНрдЯрд░ рдХреЗ рд╕рд╛рде: </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># hciattach /dev/ttyS0 texasalt Texas module LMP version : 0x06 Texas module LMP sub-version : 0x1f0f internal version freeze: 15 software version: 6 chip: wl1271 (7) Opening firmware file: /etc/firmware/wl1271.bin Could not open firmware file /etc/firmware/wl1271.bin: No such file or directory (2). Device setup complete</span></span></code> </pre> <br><p>  рдФрд░ рдлрд┐рд░, рдХреБрдЫ рднреА рдирд╣реАрдВред  рдЖрдЗрдП рдкрд╣рд▓реА рдЧрд▓рддреА рдкрд░ рд╡рд╛рдкрд╕ рдЬрд╛рдПрдВ рдФрд░ рдЕрдВрдЧреНрд░реЗрдЬреА рдХрд╛ рдЬреНрдЮрд╛рди рд▓рд╛рдЧреВ рдХрд░реЗрдВ: </p><br><pre> <code class="bash hljs">Warning: cannot find BTS file: /lib/firmware/TIInit_7.6.15.bts</code> </pre> <br><p>  рд╣рдо рдлрд░реНрдорд╡реЗрдпрд░ рдХреЗ рд╕рд╛рде рдлрд╝реЛрд▓реНрдбрд░ / рд▓рд┐рдм / рдлрд░реНрдорд╡реЗрдпрд░ рдЦреЛрд▓рддреЗ рд╣реИрдВ рдФрд░ рд╣рдореЗрдВ рдЬрд┐рд╕ рдлрд╝рд╛рдЗрд▓ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рд╡рд╣ рдирд╣реАрдВ рдорд┐рд▓рддреА рд╣реИред  рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдПрдХ рд▓рдВрдмреА рдЦреЛрдЬ рдХреЗ рдмрд╛рдж, рд╣рдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">TI рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА</a> рдкрд░ рд╡рд╛рдВрдЫрд┐рдд рдлрд╝рд╛рдЗрд▓ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдвреВрдВрдврддреЗ рд╣реИрдВ</a> рдФрд░ рдЗрд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рддреЗ рд╣реИрдВред  рдЙрд╕реА рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрдиреНрдп рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдиреЗ рдХрд╛рдо рдХрд░рдиреЗ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░ рджрд┐рдпрд╛ред </p><br><pre> <code class="bash hljs">curl -k https://git.ti.com/wilink8-bt/ti-bt-firmware/blobs/raw/45897a170bc30afb841b1491642e774f0c89b584/TIInit_7.6.15.bts &gt; TIInit_7.6.15.bts cp TIInit_7.6.15.bts /lib/firmware/TIInit_7.6.15.bts</code> </pre> <br><p>  рд╣рдо рдирд┐рдпрдВрддреНрд░рдХ рдХреЛ рд░реАрдмреВрдЯ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдкреБрди: рдХрдиреЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ: </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># echo 1 &gt;&gt; /sys/devices/virtual/gpio/gpio107/value root@trik-7dda93:~# hciattach /dev/ttyS0 texas Found a Texas Instruments' chip! Firmware file : /lib/firmware/TIInit_7.6.15.bts Loaded BTS script version 1 Device setup complete</span></span></code> </pre> <br><p>  рд╣реБрд░реНрд░реЗ!  рдлрд░реНрдорд╡реЗрдпрд░ рдмреВрдЯ рд╣реЛ рдЧрдпрд╛ рд╣реИред  рдЪреЗрдХрд┐рдВрдЧ hciconfig: </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># hciconfig hci0: Type: BR/EDR Bus: UART BD Address: 78:**:**:**:**:B3 ACL MTU: 1021:4 SCO MTU: 180:4 DOWN RX bytes:509 acl:0 sco:0 events:21 errors:0 TX bytes:388 acl:0 sco:0 commands:21 errors:0</span></span></code> </pre> <br><p>  рд╣рдо рдмреНрд▓реВрдЯреВрде рд╕реЗрд╡рд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реНрдХреИрди рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╣рдорд╛рд░реЗ рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рддреЗ рд╣реИрдВ: </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># bluetoothd -n &amp; [1] 4689 bluetoothd[4689]: Bluetooth daemon 4.101 bluetoothd[4689]: Starting SDP server bluetoothd[4689]: Bluetooth Management interface initialized bluetoothd[4689]: Parsing /etc/bluetooth/serial.conf failed: No such file or directory bluetoothd[4689]: Could not get the contents of DMI chassis type bluetoothd[4689]: Adapter /org/bluez/4689/hci0 has been enabled root@trik-7dda93:~# hciconfig hci0 piscan</span></span></code> </pre> <br><p>  рдПрдХ рдХрдВрдкреНрдпреВрдЯрд░ рдЦреЛрдЬ рдПрдХ рдЙрдкрдХрд░рдг рдкрд╛рддрд╛ рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/vs/bz/mb/vsbzmb32vz8tbechhhpuroku9qs.png"></p><br><p>  рдмреНрд▓реВрдЯреВрде рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash case "$1" in start) echo 1 &gt;&gt; /sys/devices/virtual/gpio/gpio107/value bluetoothd -n &amp; hciattach /dev/ttyS0 texas hciconfig hci0 piscan ;; stop) ;; restart) ;; status) ;; *) ;;</span></span></code> </pre> <br><p>  рдФрд░ рдЗрд╕реЗ рдСрдЯреЛрд░рди рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ: </p><br><pre> <code class="bash hljs">cp init-bluetooth /etc/init.d/init-bluetooth update-rc.d init-bluetooth <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> 99</code> </pre> <br><p>  рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдкреБрдирд░рд╛рд░рдВрдн рдФрд░ рд╢рдЯрдбрд╛рдЙрди рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рд░реВрдк рд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╕реНрдЯреЙрдк рдФрд░ рдкреБрдирд░рд╛рд░рдВрдн рд╡рд┐рдХрд▓реНрдк рдореЗрдВ рдХреЛрдИ рдХрдорд╛рдВрдб рдирд╣реАрдВ рд╣реИред </p><br><h1 id="etap-3-proverka-svyazi">  рд╕реНрдЯреЗрдЬ 3. рд╕рдВрдЪрд╛рд░ рдЬрд╛рдБрдЪ </h1><br><p>  рджреЛрдиреЛрдВ рджрд┐рд╢рд╛рдУрдВ рдореЗрдВ рд╕рдВрдЪрд╛рд░ рдХреЛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рддрд░реАрдХрд╛ COM рдкреЛрд░реНрдЯ рд╕реЗрд╡рд╛ рд╣реИред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреБрдЫ рдЖрджреЗрд╢реЛрдВ рдХреЗ рд╕рд╛рде,</a> рдЗрд╕реЗ рдЪрд╛рд▓реВ рдХрд░реЗрдВ: </p><br><pre> <code class="bash hljs">root@trik-7dda93:~<span class="hljs-comment"><span class="hljs-comment"># sdptool add --channel=3 SP Serial Port service registered root@trik-7dda93:~# mknod -m 666 /dev/rfcomm0 c 216 0 root@trik-7dda93:~# rfcomm watch /dev/rfcomm0 3 /sbin/getty rfcomm0 115200 linux Waiting for connection on channel 3</span></span></code> </pre> <br><p>  рд╣рдо рдлреЛрди рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рдиреЗ рдХрд╛ рдирд┐рдордВрддреНрд░рдг рджреЗрдЦрддреЗ рд╣реИрдВ: </p><br><p><img src="https://habrastorage.org/webt/0i/lw/p9/0ilwp9kassasp_xfmvc3xhcwvl8.png"></p><br><p>  рдкрд░реАрдХреНрд╖рдг рдХрд┐рдП рдЧрдП рдЯрд░реНрдорд┐рдирд▓реЛрдВ рдореЗрдВ рд╕реЗ рдХреЛрдИ рднреА рдЦрд╛рд▓реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд╛рд╕рд╡рд░реНрдб рджрд░реНрдЬ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореБрдЭреЗ SSH рд╕рддреНрд░ рдореЗрдВ рдереНрд░реЗрдб рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓реЙрдЧрд┐рди рдЬрд╛рдирдХрд╛рд░реА рднреЗрдЬрдиреА рдереАред </p><br><h1 id="etap-4-configure--make">  рд╕реНрдЯреЗрдЬ рек ./configure &amp;&amp; рдореЗрдХ </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧреЗрдордкреИрдб рдХреЛ рд▓рд┐рдирдХреНрд╕ рд╕реЗ рдЬреЛрдбрд╝рдиреЗ</a> рдХреЗ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЗ рдмрд╛рдж <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">,</a> рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рддреЗ рд╣реИрдВ: </p><br><ul><li>  рд╡рд┐рддрд░рдг рдореЗрдВ рдмреНрд▓реВрдЬрд╝ рдкреБрд░рд╛рдирд╛ рд╣реИ рдФрд░ рд╕рд┐рдХреНрд╕рдб рдбреЗрдорди рд╕реЗ рдЖрджреЗрд╢реЛрдВ рдХреЛ рдирд╣реАрдВ рд╕рдордЭрддрд╛ рд╣реИ, рдЬреЛ рдЧреЗрдордкреИрдб рдХреЗ рд╕рд╛рде рдПрдХ рд╕рдВрдмрдВрдз рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИ </li><li>  рд╕реНрд░реЛрдд рд╕реЗ рдирдпрд╛ рдмреНрд▓реВрдЬрд╝ рд╕рдВрд╕реНрдХрд░рдг рдХрдИ рдирд┐рд░реНрднрд░рддрд╛ рдХреЗ рдХрд╛рд░рдг рд╕рдВрдХрд▓рди рдХрд░рдиреЗ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ </li><li>  рддрд╛рдЬрд╛ рдбреЗрдмрд┐рдпрди рдХреЗ рдмреНрд▓реВрдЬрд╝ рдХреЛ udv рдФрд░ systemd рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЬреЛ рд╡рд░реНрддрдорд╛рди рд╡рд┐рддрд░рдг рд╕реЗ рдЧрд╛рдпрдм рд╣реИрдВ </li></ul><br><p>  рдПрдХрдорд╛рддреНрд░ рдирд┐рд░реНрднрд░рддрд╛ рдЬреЛ рд╕рдВрддреБрд╖реНрдЯ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдереА, рд╡рд╣ рдпреВрдиреАрдкреБрдЯ рдХрд░реНрдиреЗрд▓ рдореЙрдбреНрдпреВрд▓ рдерд╛ред </p><br><p>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП: </p><br><ul><li>  рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рд╡рд░реНрддрдорд╛рди рдХрд░реНрдиреЗрд▓ рдХрд╛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ </li></ul><br><pre> <code class="bash hljs">cp /proc/config.gz config.gz gunzip config.gz</code> </pre> <br><ul><li>  рдбрд╛рдЙрдирд▓реЛрдб <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд░реНрдиреЗрд▓ рдХреЛрдб</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЯреВрд▓рдЪрд┐рди</a> рдбрд╛рдЙрдирд▓реЛрдб рдФрд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ </li><li>  рдХрд░реНрдиреЗрд▓ рдХреЛрдб рдХреЗ рд╕рд╛рде рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдХрд░реНрдиреЗрд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЙрдкреА рдХрд░реЗрдВ </li><li>  рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ uinput рдореЙрдбреНрдпреВрд▓ рдЬреЛрдбрд╝реЗрдВ </li></ul><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"CONFIG_INPUT_UINPUT=m"</span></span> &gt;&gt; config</code> </pre> <br><ul><li>  рдкрд╣рд▓реЗ рдЯреВрд▓рдХрд┐рди рдХреЛ рдЪрд╛рд▓реВ рдХрд░рдХреЗ рд╡рд┐рдзрд╛рдирд╕рднрд╛ рд╢реБрд░реВ рдХрд░реЗрдВ </li></ul><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">source</span></span> /opt/trik-sdk/environment-setup-arm926ejste-oe-linux-gnueabi make</code> </pre> <br><ul><li>  рдореЗрдореЛрд░реА рдХрд╛рд░реНрдб рдореЗрдВ рдХрд░реНрдиреЗрд▓ рдореЙрдбреНрдпреВрд▓ рдХреЙрдкреА рдХрд░реЗрдВ </li></ul><br><pre> <code class="bash hljs">make INSTALL_MOD_PATH=/mnt/trik-sd modules_install</code> </pre> <br><ul><li>  uBoot рдЪрд┐рддреНрд░ рдмрдирд╛рдПрдБ рдФрд░ рдЗрд╕реЗ / boot рдкрд░ рдХреЙрдкреА рдХрд░реЗрдВ </li></ul><br><pre> <code class="bash hljs">make uImage cp arch/arm/boot/uImage /mnt/trik-sd/boot/uImage-3.6.7</code> </pre> <br><p>  рдЕрдм рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд░реНрдиреЗрд▓ рдореЙрдбреНрдпреВрд▓ рдХреА рдХрдореА рдХреА рдХрд╕рдо рдирд╣реАрдВ рдЦрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдлрд┐рд░ рд╣рдо рдХреБрдЫ рднреА рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЧреЗрдордкреИрдб рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢ рдмрд╛рдж рдореЗрдВ рдХрд╛рдо рдЖрдПрдВрдЧреЗред </p><br><h1 id="etap-5-varim-kashu-iz-topora">  рдЪрд░рдг 5. рдХреБрд▓реНрд╣рд╛рдбрд╝реА рд╕реЗ рджрд▓рд┐рдпрд╛ рдкрдХрд╛рдирд╛ </h1><br><p>  рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рд╣реЛ рд░рд╣реА рд╣реИ "tyap-blooperред"  рдЪреВрдВрдХрд┐ рдореВрд▓ рд╡рд┐рддрд░рдг рдкрд░ рдЖрд╡рд╢реНрдпрдХ рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреЛ рд░рдЦрдиреЗ рдХрд╛ рдХреЛрдИ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ, рд╣рдо рдХреБрдЫ рд▓реЛрдХрдкреНрд░рд┐рдп рдбрд╛рд▓ рджреЗрдВрдЧреЗред  рдкреНрд░реЛрд╕реЗрд╕рд░ рдореЗрдВ ARMv5TE рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдЗрд╕рдХреЗ рд▓рд┐рдП рд╡рд┐рддрд░рдг рд╣реИрдВред </p><br><p>  рд╣рдо ARM рдХреЗ рд▓рд┐рдП рдпреВрдирд┐рд╡рд░реНрд╕рд▓ рдЖрд░реНрдХ рд▓рд┐рдирдХреНрд╕ рдХреЛ рдЕрдирдкреИрдХ рдХрд░рдиреЗ рдФрд░ рдЪрд▓рд╛рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдХрдВрд╕реЛрд▓ рдореЗрдВ рд▓реЛрдб рдХрд░рддреЗ рд╕рдордп рд╣рдо рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ systemd рдХреЛ рдПрдХ рдирдП рдХрд░реНрдиреЗрд▓ рд╕рдВрд╕реНрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬреЛ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдирд╣реАрдВ рд╣реИред  4.16 рдХрд░реНрдиреЗрд▓ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рдкреНрд░рдпрд╛рд╕ рдЕрд╕рдлрд▓ рд░рд╣реЗ рдФрд░ рдЗрд╕рдореЗрдВ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕рдордп рд▓рдЧрд╛ред </p><br><p>  рд╣рдо рджреВрд╕рд░реЗ рд╡рд┐рдХрд▓реНрдк рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВ - рдбреЗрдмрд┐рдпрдиред  рдПрдЖрд░рдПрдо рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдерд╛рдкрд┐рдд рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рд╛рде рдПрдХ рдбрд┐рд╕реНрдХ рдЫрд╡рд┐ рдореМрдЬреВрдж рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдкреИрдХреЗрдЬ рдФрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рд╛рдл рд╕рд┐рд╕реНрдЯрдо рдбрд╛рд▓рдирд╛ рдмреЗрд╣рддрд░ рд╣реИред </p><br><h2 id="ustanovka-v-qemu">  QEMU рдореЗрдВ рд╕реНрдерд╛рдкрдирд╛ </h2><br><p>  рд╕реНрдерд╛рдкрдирд╛ рдЫрд╡рд┐ ( <a href="">.iso рдХреЗ</a> рд▓рд┐рдП рд▓рд┐рдВрдХ) рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ рдФрд░ QEMU рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред <br>  рд╣рдореЗрдВ рдЗрдВрд╕реНрдЯрд╛рд▓реЗрд╢рди рдХреЛ рдмреВрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░реНрдиреЗрд▓ рдФрд░ рдЗрдирд┐рдЯрд░реНрдб рдЗрдореЗрдЬ рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ рд╕реЗ</a> рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред </p><br><p>  рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдореЗрдореЛрд░реА рдХрд╛рд░реНрдб рдХреЗ рдЖрдХрд╛рд░ рдХреЗ рд╕рд╛рде рдореЗрдореЛрд░реА рдХрд╛рд░реНрдб рдХреА рдПрдХ рдЫрд╡рд┐ рдмрдирд╛рдПрдВ (рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ 4 рдЬреАрдмреА): </p><br><pre> <code class="bash hljs">qemu-img create -f raw debian.img 4G</code> </pre> <br><p>  рд╣рдо рд╕реНрдерд╛рдкрдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ: </p><br><pre> <code class="bash hljs">qemu-system-arm -M versatilepb -kernel vmlinuz-3.2.0-4-versatile -initrd initrd.gz -hda debian.img -cdrom debian-7.11.0-armel-CD-1.iso</code> </pre> <br><p>  рдпрджрд┐ рдЖрдк рдПрдХ рдЧреИрд░-рдорд╛рдирдХ рд╕рд╛рдкреЗрдХреНрд╖ рдореВрд▓ рд╡рд┐рддрд░рдг рдХрд╛ рдбрд┐рд╕реНрдХ рд▓реЗрдЖрдЙрдЯ рдмрдирд╛рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдкрд╣рд▓реЗ рд░реВрдЯ рд╡рд┐рднрд╛рдЬрди рдХреЛ рдЫреЛрдбрд╝ рджреЗрдВ, рдЕрдиреНрдпрдерд╛ рдЖрдкрдХреЛ рдпреВрдмреВрдЯ рдореЗрдВ рдХрд░реНрдиреЗрд▓ рдмреВрдЯ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛ред  рд╡рд┐рднрд╛рдЬрди рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИ рдЬрд┐рд╕ рдкрд░ рд░реВрдЯ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд╕реНрдерд┐рдд рд╣реИред </p><br><p>  рдорд╛рдирдХ рдорд╛рд░реНрдХрдЕрдк рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ: </p><br><ol><li>  EXT4 рд╡рд┐рднрд╛рдЬрди GB 1.3 рдЬреАрдмреА рд░реВрдЯ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд▓рд┐рдП </li><li>  рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ data 500 рдПрдордмреА рдЖрдХрд╛рд░ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП FAT32 рд╡рд┐рднрд╛рдЬрди </li></ol><br><p>  рдореВрд▓ рд╡рд┐рддрд░рдг рдХреА рдЫрд╡рд┐ рдХреЗ рд▓рд┐рдП fdisk рдЖрдЙрдЯрдкреБрдЯ: </p><br><pre> <code class="hljs powershell">Disk: trik<span class="hljs-literal"><span class="hljs-literal">-distro</span></span>.img geometry: <span class="hljs-number"><span class="hljs-number">893</span></span>/<span class="hljs-number"><span class="hljs-number">64</span></span>/<span class="hljs-number"><span class="hljs-number">63</span></span> [<span class="hljs-number"><span class="hljs-number">3604478</span></span> <span class="hljs-type"><span class="hljs-type">sectors</span></span>] Signature: <span class="hljs-number"><span class="hljs-number">0</span></span>xAA55 Starting Ending <span class="hljs-comment"><span class="hljs-comment">#: id cyl hd sec - cyl hd sec [ start - size] ------------------------------------------------------------------------ 1: 83 1023 3 32 - 1023 3 32 [ 1040382 - 2564096] Linux files* 2: 0C 64 0 1 - 1023 3 32 [ 8192 - 1032190] Win95 FAT32L 3: 00 0 0 0 - 0 0 0 [ 0 - 0] unused 4: 00 0 0 0 - 0 0 0 [ 0 - 0] unused</span></span></code> </pre><br><p>  рдкреИрд░рд╛рдореАрдЯрд░ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдХреБрдЫ рдХрдк рдЪрд╛рдп рдкреАрдирд╛ рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐  рдПрдореБрд▓реЗрдЯрд░ рдЕрд╕рд▓реА рдПрдЖрд░рдПрдо рдкреНрд░реЛрд╕реЗрд╕рд░ рд╕реЗ рдЬреНрдпрд╛рджрд╛ рддреЗрдЬ рдирд╣реАрдВ рд╣реИред </p><br><p>  рд╕реНрдерд╛рдкрд┐рдд рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдПрдХ рдФрд░ initrd рдЫрд╡рд┐ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ рд╕реЗ</a> рд▓рд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред </p><br><p>  рд╣рдо рд╕рд┐рд╕реНрдЯрдо рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ: </p><br><pre> <code class="bash hljs">qemu-system-arm -M versatilepb -kernel vmlinuz-3.2.0-4-versatile -initrd initrd.img-3.2.0-4-versatile -hda debian.img -append <span class="hljs-string"><span class="hljs-string">"root=/dev/sda1"</span></span></code> </pre> <br><h2 id="nastroyka-sistemy">  рд╕рд┐рд╕реНрдЯрдо рд╕реЗрдЯрдЕрдк </h2><br><p>  рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рд╕реБрдкрд░рдпреВрдЬрд╝рд░ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддреЗ рд╣реИрдВ, рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВ, рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рдиреНрдпреВрдирддрдо рдЖрд╡реЗрджрди рдкрддреНрд░ рдбрд╛рд▓рддреЗ рд╣реИрдВ: </p><br><pre> <code class="bash hljs">apt-get update apt-get upgrade apt-get install curl git mc htop joystick</code> </pre> <br><h3 id="terminaly">  рдЯрд░реНрдорд┐рдирд▓реЛрдВ </h3><br><p>  рд╣рдо <code>/etc/inittab</code> рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЕрдирд╛рд╡рд╢реНрдпрдХ рдЯрд░реНрдорд┐рдирд▓реЛрдВ рдХреЛ рд╣рдЯрд╛рддреЗ рд╣реИрдВ, рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ UART рдХреЛ рдЪрд╛рд▓реВ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╕рд╣реА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдСрдЯреЛ-рдЗрдирдкреБрдЯ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ (рдХреЗрд╡рд▓ рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреЗ рд╕рдордп рд░реВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ)ред  рдпрджрд┐ рдЖрдк рдирд┐рдпрдВрддреНрд░рдХ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рдХреЗ рд▓рд┐рдП рд╢реЗрд▓ рдЪрд▓рд╛рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рддреЗ рд╣реИрдВ рддреЛ рдСрдЯреЛ-рдЗрдирдкреБрдЯ рдЙрдкрдпреЛрдЧреА рд╣реИред </p><br><pre> <code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">2345</span></span><span class="hljs-symbol"><span class="hljs-symbol">:respawn</span></span><span class="hljs-symbol"><span class="hljs-symbol">:/sbin/getty</span></span> <span class="hljs-number"><span class="hljs-number">38400</span></span> tty1 --autologin root <span class="hljs-comment"><span class="hljs-comment">#2:23:respawn:/sbin/getty 38400 tty2 #3:23:respawn:/sbin/getty 38400 tty3 #4:23:respawn:/sbin/getty 38400 tty4 #5:23:respawn:/sbin/getty 38400 tty5 #6:23:respawn:/sbin/getty 38400 tty6 uart:12345:respawn:/sbin/getty -L 115200 ttyS1</span></span></code> </pre> <br><h3 id="bluetooth-i-wi-fi">  рдмреНрд▓реВрдЯреВрде рдФрд░ рд╡рд╛рдИрдлрд╛рдИ </h3><br><p>  рд╡рд╛рдИ-рдлрд╛рдИ рдФрд░ рдмреНрд▓реВрдЯреВрде рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмреНрд▓реВрдЬрд╝-рдмрд░реНрддрди рдФрд░ wpasupplicant рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред </p><br><pre> <code class="bash hljs">apt-get install bluez-utils wpasupplicant</code> </pre> <br><p>  рд╣рдо eth0 рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рддреЗ рд╣реИрдВ рдФрд░ wlan1 рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ <code>/etc/network/interfaces</code> рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддреЗ рд╣реИрдВ: </p><br><pre> <code class="hljs kotlin"># /etc/network/interfaces -- configuration file <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ifup(<span class="hljs-number"><span class="hljs-number">8</span></span>), ifdown(<span class="hljs-number"><span class="hljs-number">8</span></span>) # The loopback <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lo</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lo</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">inet</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">loopback</span></span></span><span class="hljs-class"> # </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wireless</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interfaces</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wlan1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wlan1</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">inet</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dhcp</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wireless_mode</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">managed</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wireless_essid</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">any</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wpa</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">driver</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wext</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wpa</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">conf</span></span></span><span class="hljs-class"> /</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">etc</span></span></span><span class="hljs-class">/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wpa_supplicant</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">conf</span></span></span></span></code> </pre> <br><p>  рдЕрдЧреНрд░рд┐рдо рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдЬреЛрдбрд╝реЗрдВ <code>/etc/wpa_supplicant.conf</code> , рдХреНрдпреЛрдВрдХрд┐  рдирд┐рдпрдВрддреНрд░рдХ рдкрд░ рд╕реНрд╡рдпрдВ рдРрд╕рд╛ рдХрд░рдирд╛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдирд╣реАрдВ рд╣реИ: </p><br><pre> <code class="bash hljs">wpa_passphrase ssid password &gt;&gt; /etc/wpa_supplicant.conf</code> </pre> <br><p>  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╡рд╛рдИ-рдлрд╛рдИ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЖрдк UART рдХреЛ рдЖрдЧреЗ рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдзреНрдпрд╛рди рд░рдЦреЗрдВ рдХрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдХрд░реНрдиреЗрд▓ рдЗрд╕ рдЯрд░реНрдорд┐рдирд▓ рдХреА рд╕рднреА рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдСрдкрд░реЗрд╢рди рдХреЗ рджреМрд░рд╛рди, рдХрд░реНрдиреЗрд▓ рдпрд╛ рд╕реЗрд╡рд╛ рд╕реЗ рдЕрдЪрд╛рдирдХ рд╕рдВрджреЗрд╢ рдЖрдкрдХреЛ рдмрд╛рдзрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдмреНрд▓реВрдЯреВрде рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЬреЛрдбрд╝реЗрдВред  рдЗрд╕ рдмрд╛рд░, рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВ <code>/etc/init.d/bluetooth</code> : </p><br><pre> <code class="bash hljs"> 139: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-variable"><span class="hljs-variable">$1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> start) <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 1 &gt;&gt; /sys/devices/virtual/gpio/gpio107/value  168: hciattach /dev/ttyS0 texas log_end_msg 0 ;;</code> </pre><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдмреНрд▓реВрдЯреВрде рд╕реЗрд╡рд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╡рд╛рд▓реА рд╕рднреА рд╕реЗрд╡рд╛рдПрдВ рдЖрд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВрдЧреАред </p><br><h3 id="vzmah-vlevo-vzmah-vpravo">  рдмрд╛рдПрдВ рд╕реНрд╡рд╛рдЗрдк рдХрд░реЗрдВ, рд░рд╛рдЗрдЯ рд╕реНрд╡рд╛рдЗрдк рдХрд░реЗрдВ </h3><br><p>  рд╣рдо рдЕрдирд╛рд╡рд╢реНрдпрдХ рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдФрд░ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рд╣рдЯрд╛рддреЗ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ htop рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рд░реИрдо рдореЗрдВ рдПрдХ рдХреАрдорддреА рдЬрдЧрд╣ рдкрд░ рдХрдмреНрдЬрд╛ рдХрд░ рд▓реЗрддреЗ рд╣реИрдВ: </p><br><p><img src="https://habrastorage.org/webt/4e/rg/av/4ergavw2trhiiyvvlnmdtc1luhk.png"></p><br><p>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХрдВрд╕реЛрд▓ рдХрдВрд╕реЛрд▓ рд╕реЗрд╡рд╛ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмрд╣реБрдд рд╕рд╛рд░реА рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ рд╣реИрдВ</a> ред  рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрддрд┐ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдЗрд╕ рд╕реЗрд╡рд╛ рдХреА рдлрд╝рд╛рдЗрд▓ рдХреЛ рд░реВрдЯ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рд▓реЗ рдЬрд╛рдПрдВ: </p><br><pre> <code class="bash hljs">mv /usr/share/dbus-1/system-services/org.freedesktop.ConsoleKit.service /root/</code> </pre> <br><p>  рд╕реЗрд╡рд╛ рдмрдВрдж рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд░реИрдо рдХреА рдЦрдкрдд 19 рдПрдордмреА рдереА, рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж - 16 рдПрдордмреАред </p><br><h3 id="razdely-sistemy">  рд╕рд┐рд╕реНрдЯрдо рдЕрдиреБрднрд╛рдЧ </h3><br><p>  рдпрджреНрдпрдкрд┐ рдпреВрдмреВрдЯ рдХрд░реНрдиреЗрд▓ рдХреЛ рдЙрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕ рдкрд░ рд░реВрдЯ рд╡рд┐рднрд╛рдЬрди рд╕реНрдерд┐рдд рд╣реИ, рдпрд╣ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдХреЗ рд▓рд┐рдП <code>/etc/fstab</code> рдореЗрдВ рд▓рд┐рдЦрдиреЗ рд▓рд╛рдпрдХ рд╣реИред  рд╣рдо рд░реВрдЯ рд╕реЗрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рдкрд╣рд▓реА рд▓рд╛рдЗрди рдХреЛ рдмрджрд▓рддреЗ рд╣реИрдВ: </p><br><pre> <code class="hljs mel">/dev/mmcblk0p1 / auto defaults <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">proc</span></span> /<span class="hljs-keyword"><span class="hljs-keyword">proc</span></span> <span class="hljs-keyword"><span class="hljs-keyword">proc</span></span> defaults <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> devpts /dev/pts devpts mode=<span class="hljs-number"><span class="hljs-number">0620</span></span>,gid=<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> usbdevfs /<span class="hljs-keyword"><span class="hljs-keyword">proc</span></span>/bus/usb usbdevfs noauto <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> tmpfs /run tmpfs mode=<span class="hljs-number"><span class="hljs-number">0755</span></span>,nodev,nosuid,strictatime <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> tmpfs /var/volatile tmpfs defaults <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><p>  рдпрджрд┐ рдЖрдкрдиреЗ рд░реВрдЯ рд╡рд┐рднрд╛рдЬрди рдХреЛ рдкрд╣рд▓реЗ рдирд╣реАрдВ рдмрдирд╛рдпрд╛ рд╣реИ, рддреЛ рд╡рд╛рдВрдЫрд┐рдд рд╡рд┐рднрд╛рдЬрди рд╕рдВрдЦреНрдпрд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рди рднреВрд▓реЗрдВред </p><br><p>  рдпрджрд┐ рдЖрдкрдиреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рджреВрд╕рд░рд╛ рдПрдлрдПрдЯреА рд╡рд┐рднрд╛рдЬрди рдЫреЛрдбрд╝рд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рд╡рд┐рднрд╛рдЬрди рдХреЛ рдорд╛рдЙрдВрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╝реЛрд▓реНрдбрд░ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ </p><br><pre> <code class="bash hljs">mkdir /usr/share/trik</code> </pre> <br><p>  рдФрд░ <code>/etc/fstab</code> рдореЗрдВ рдЕрдиреБрднрд╛рдЧ рд▓рд┐рдЦреЗрдВ: </p><br><pre> <code class="bash hljs">/dev/mmcblk0p2 /usr/share/trik vfat defaults 0 0</code> </pre> <br><h1 id="etap-6-probuem-nashu-kashu">  рдЪрд░рдг 6. рд╣рдо рдЕрдкрдиреЗ рджрд▓рд┐рдпрд╛ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ </h1><br><p>  рд╕рд┐рд╕реНрдЯрдо рдЫрд╡рд┐ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рдХрд░реНрдиреЗрд▓ рдореЙрдбреНрдпреВрд▓ рдФрд░ рдХрд░реНрдиреЗрд▓ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рдорд╛рдЙрдВрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ,     (start) fdisk -l debian.img mount -o loop,offset=NNNN debian.img /mnt/debian</span></span></code> </pre> <br><p>  рдЬрд╣рд╛рдВ, NNNN = рд╕реЗрдХреНрдЯрд░ рдЖрдХрд╛рд░ * рдЕрдиреБрднрд╛рдЧ рдХреА рд╢реБрд░реБрдЖрддред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╕реЗрдХреНрдЯрд░ рдХрд╛ рдЖрдХрд╛рд░ 512 рдмрд╛рдЗрдЯреНрд╕ рд╣реИред </p><br><p>  рд╣рдо рдореВрд▓ рд╡рд┐рддрд░рдг рдХреЛ рднреА рдорд╛рдЙрдВрдЯ рдХрд░рддреЗ рд╣реИрдВ: </p><br><pre> <code class="bash hljs">fdisk -l trik-distro.img mount -o loop,offset=NNNN trik-distro.img /mnt/trik-clean</code> </pre> <br><p>  рд╣рдо QEMU рдФрд░ рдЙрд╕рдХреЗ рдореЙрдбреНрдпреВрд▓ рдХреЗ рд▓рд┐рдП рдХрд░реНрдиреЗрд▓ рдХреЛ рд╣рдЯрд╛рддреЗ рд╣реИрдВ, рдЬреИрд╕рд╛ рдХрд┐  рд╡реЗ рд╣рдорд╛рд░реЗ рдордВрдЪ рдХреЗ рд▓рд┐рдП рдЕрднрд┐рдкреНрд░реЗрдд рдирд╣реАрдВ рд╣реИрдВред  рд╣рдо рдореВрд▓ рд╡рд┐рддрд░рдг рдХреЗ рд╕рдорд╛рди рд╣реА рдирдП рдХрд░реНрдиреЗрд▓ рдФрд░ рдореЙрдбреНрдпреВрд▓ рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рддреЗ рд╣реИрдВред </p><br><pre> <code class="hljs powershell">rm <span class="hljs-literal"><span class="hljs-literal">-rf</span></span> /mnt/debian/boot/ rm <span class="hljs-literal"><span class="hljs-literal">-rf</span></span> /mnt/debian/lib/modules/<span class="hljs-number"><span class="hljs-number">3.2</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-literal"><span class="hljs-literal">-4</span></span><span class="hljs-literal"><span class="hljs-literal">-versatile</span></span> rm <span class="hljs-literal"><span class="hljs-literal">-rf</span></span> /mnt/debian/lib/modules/<span class="hljs-number"><span class="hljs-number">3.2</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-literal"><span class="hljs-literal">-5</span></span><span class="hljs-literal"><span class="hljs-literal">-versatile</span></span> mkdir /mnt/debian/boot/ cp arch/arm/boot/uImage /mnt/debian/boot/ make INSTALL_MOD_PATH=/mnt/debian modules_install</code> </pre> <br><p>  рд╣рдореЗрдВ рд╡рд╛рдИ-рдлрд╛рдИ рдореЙрдбреНрдпреВрд▓ рдХреЗ рд▓рд┐рдП рдлрд░реНрдорд╡реЗрдпрд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА, рдЬреЛ рдХрд┐ рдореВрд▓ рд╡рд┐рддрд░рдг рдореЗрдВ рд╣реИ / lib / рдлрд░реНрдорд╡реЗрдпрд░ рдлрд╝реЛрд▓реНрдбрд░ рдФрд░ рдмреНрд▓реВрдЯреВрде рдлрд░реНрдорд╡реЗрдпрд░ рдЬреЛ рд╣рдореЗрдВ рдкрд╣рд▓реЗ рдорд┐рд▓рд╛ рдерд╛ред </p><br><pre> <code class="hljs ruby">cp /mnt/trik-clean/lib/firmware/* <span class="hljs-regexp"><span class="hljs-regexp">/mnt/debian</span></span><span class="hljs-regexp"><span class="hljs-regexp">/lib/firmware</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ cp TIInit_7.6.15.bts /mnt</span></span><span class="hljs-regexp"><span class="hljs-regexp">/debian/lib</span></span><span class="hljs-regexp"><span class="hljs-regexp">/firmware/</span></span></code> </pre> <br><p>  рдбрд┐рд╕реНрдХ рдЫрд╡рд┐рдпреЛрдВ рдХреЛ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ: </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">umount</span></span> /mnt/trik-clean umount /mnt/debian</code> </pre> <br><p>  рдФрд░ dd рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдореЗрдореЛрд░реА рдХрд╛рд░реНрдб рдореЗрдВ рдЗрдореЗрдЬ рдХреЛ рдХреЙрдкреА рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВ: </p><br><pre> <code class="hljs cs"><span class="hljs-meta"><span class="hljs-meta">#    ( ) lsblk dd </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">=debian.img of=/dev/sdX bs=4M</span></span></code> </pre> <br><h1 id="etap-7-finishnaya-pryamaya">  рд╕реНрдЯреЗрдЬ 7. рдлрд┐рдирд┐рд╢ рд▓рд╛рдЗрди </h1><br><p>  рд╣рдо рдЧреЗрдордкреИрдб рдХреЛ рдирдИ рдкреНрд░рдгрд╛рд▓реА рд╕реЗ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреЛ рд╕рдВрдХрд▓рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╕рд┐рдХреНрд╕рдб рдбреЗрдореЙрди рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рд╣рдо рдЧреЗрдордкреИрдб рдХреЛ рдпреВрдПрд╕рдмреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрдВрдЯреНрд░реЛрд▓рд░ рд╕реЗ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ рдФрд░ рдПрдХ рдЬреЛрдбрд╝реА рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЛрдЧреНрд░рд╛рдо рдЪрд▓рд╛рддреЗ рд╣реИрдВ: </p><br><pre> <code class="bash hljs">root@trik:~/bt<span class="hljs-comment"><span class="hljs-comment"># ./sixpair Current Bluetooth master: 78:**:**:**:**:b9 Setting master bd_addr to 78:**:**:**:**:b9</span></span></code> </pre> <br><p>  рдЬрдм рдЧреЗрдордкреИрдб рдЬреБрдбрд╝рд╛ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдХреБрдЫ рднреА рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЫрд╣рдкреИрдб рд╕реЗрд╡рд╛ рдЪреБрдк рд╣реИ: </p><br><pre> <code class="bash hljs">sixad-bin[2675]: started sixad-bin[2675]: sixad started, press the PS button now sixad-bin[2675]: unable to connect to sdp session</code> </pre> <br><p>  рд▓реЗрдХрд┐рди рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИ рд╕рдореБрджрд╛рдп рдкрд╣рд▓реЗ рд╕реЗ рд╣реА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрдиреЗрдХреНрд╢рди</a> рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП "рдмреИрд╕рд╛рдЦреА" рдмрдирд╛ рдЪреБрдХрд╛ рд╣реИред </p><br><p>  рд╣рдо рдХрд╛рд░реНрдпрдХреНрд░рдо рдХрд╛ рдкреБрдирд░реНрдирд┐рд░реНрдорд╛рдг рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЖрдирдиреНрджрд┐рдд рд╣реЛрддреЗ рд╣реИрдВред </p><br><pre> <code class="hljs powershell">sixad<span class="hljs-literal"><span class="hljs-literal">-bin</span></span>[<span class="hljs-number"><span class="hljs-number">2833</span></span>]: started sixad<span class="hljs-literal"><span class="hljs-literal">-bin</span></span>[<span class="hljs-number"><span class="hljs-number">2833</span></span>]: sixad started, press the PS button now sixad<span class="hljs-literal"><span class="hljs-literal">-bin</span></span>[<span class="hljs-number"><span class="hljs-number">2833</span></span>]: unable to connect to sdp session sixad<span class="hljs-literal"><span class="hljs-literal">-sixaxis</span></span>[<span class="hljs-number"><span class="hljs-number">2836</span></span>]: started sixad<span class="hljs-literal"><span class="hljs-literal">-sixaxis</span></span>[<span class="hljs-number"><span class="hljs-number">2836</span></span>]: Connected <span class="hljs-string"><span class="hljs-string">'PLAYSTATION(R)3 Controller (00:**:**:**:**:09)'</span></span> [<span class="hljs-type"><span class="hljs-type">Battery</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span>]</code> </pre> <br><p>  рдЕрдм рдЧреЗрдордкреИрдб рдПрдХ рдЗрдирдкреБрдЯ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рд╣реИ рдФрд░ рдЬреЗрд╕реНрдЯреЗрд╕реНрдЯ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд╕рднреА рдмрдЯрди рдФрд░ рдПрдирд╛рд▓реЙрдЧ рд╕реЗрдВрд╕рд░ рдХреА рд╕реНрдерд┐рддрд┐ рджрд┐рдЦрд╛рдПрдЧрд╛: </p><br><pre> <code class="hljs apache"><span class="hljs-attribute"><span class="hljs-attribute">root</span></span>@trik:~# ls /dev/input/ by-path event0 event1 event2 event3 js0 js1 js2 mice root@trik:~# jstest --normal /dev/input/jsX Driver version is 2.1.0. Joystick (PLAYSTATION(R)3 Controller (00:**:**:**:**:09)) has 29 axes (X, Y, Z, Rx, Ry, Rz, Throttle, Rudder, Wheel, Gas, Brake, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, (null), (null), (null), (null), (null), (null), (null), (null)) and 17 buttons (Trigger, ThumbBtn, ThumbBtn2, TopBtn, TopBtn2, PinkieBtn, BaseBtn, BaseBtn2, BaseBtn3, BaseBtn4, BaseBtn5, BaseBtn6, BtnDead, BtnA, BtnB, BtnC, BtnX). Testing ... (interrupt to exit) Axes: 0: 0 1: 0 2: 0 3: 0 4: -7150 5: -7746 6:-32767 7: 0 8: 0 9: 0 10: 0 11: 0 12: 0 13: 0 14: 0 15: 0 16: 0 17: 0 18: 0 19: 0 20: 0 21: 0 22: 0 23: 0 24: 0 25: 0 26: 0 27: 0 28: 0 Buttons: 0:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 1:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 2:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 3:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 4:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 5:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 6:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 7:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 8:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 9:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 10:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 11:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 12:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 13:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 14:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 15:<span class="hljs-literal"><span class="hljs-literal">off</span></span> 16:<span class="hljs-literal"><span class="hljs-literal">off</span></span></code> </pre> <br><p>  рдЬрд╣рд╛рдВ X рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдбрд┐рд╡рд╛рдЗрд╕ рдирдВрдмрд░ рд╣реИ, 2. рдмрдЯрди рдФрд░ рдХреБрд▓реНрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рджреЗрдЦреА рдЬрд╛ рд╕рдХрддреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред </p><br><h1 id="ispolzuem-na-praktike">  рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">YouTube</a> рдкрд░ рдЧреЗрдордкреИрдб рджрд┐рдЦрд╛ рд░рд╣рд╛ рд╡реАрдбрд┐рдпреЛ </p><br><div class="spoiler">  <b class="spoiler_title">рд╡рд┐рддрд░рдг рдХреА рддрд╕реНрд╡реАрд░реЗрдВ</b> <div class="spoiler_text"><p>  рдХрд░реНрдиреЗрд▓ рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ: <br><img src="https://habrastorage.org/webt/aj/mx/xt/ajmxxtarcapbe4hwfefj5-v83ws.jpeg"><br>  X11 рдкрд░ рдЪрд▓ рд░рд╣рд╛ рдЯрд░реНрдорд┐рдирд▓: <br><img src="https://habrastorage.org/webt/bi/gn/vk/bignvkyajckcuobz8rzgyf5priw.jpeg"></p><br><p><img src="https://habrastorage.org/webt/cp/6k/pu/cp6kpumd7uxcxnlyc3jg7mpmn2m.jpeg"><br>  рдФрд░ рдкрд░рдВрдкрд░рд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░: <br><img src="https://habrastorage.org/webt/9f/et/xk/9fetxkfu74mdacfatuwnaodrmj8.jpeg"></p><br><p><img src="https://habrastorage.org/webt/qw/mi/1h/qwmi1hncq77acchz8dfjfpzs334.jpeg"></p></div></div><br><h3 id="poleznye-ssylki">  рдЙрдкрдпреЛрдЧреА рд▓рд┐рдВрдХ </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреНрдпреВрд▓рд╢реЙрдХ</a> 3 рдЧреЗрдордкреИрдб рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрдХреНрд░рдо - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд┐рдХреНрд╕рдПрдпрд░</a> рдФрд░ <a href="">рд╕рд┐рдХреНрд╕рдб</a> ред </p><br><p>  рдЧреЗрдордкреИрдб рдФрд░ рдЕрдиреНрдп рдЗрдирдкреБрдЯ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП, рдПрдХ рд╣рд▓реНрдХрд╛ рд╕реА рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╣реИ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓рд┐рдмрдиреЗрдЬреЙрдп</a> ред </p><br><p>  рд╕рд░реНрд╡рд┐рд╕рдореЛрдЯрд░реНрд╕ рдФрд░ рдореЛрдЯрд░реНрд╕ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрдХреНрд░рдо рдХрд╛ рд╕реНрд░реЛрдд рдХреЛрдб <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">GitHub рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╣реИ</a> ред </p><br><p>  рдПрдХ makeshift рд╡рд┐рддрд░рдг рдХрд┐рдЯ рдХреЗ рд▓рд┐рдП рдЖрд▓реЗрдЦ рд╕реЗ рд╕рднреА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓реЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">GitHub рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╣реИрдВ</a> ред </p><br><p>  рдХрд░реНрдиреЗрд▓ рд╕реНрд░реЛрдд <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">GitHub рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╣реИ</a> ред </p><br><h1 id="interesnye-fakty-o-kontrollere">  рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд░реЛрдЪрдХ рддрдереНрдп </h1><br><ul><li>  рд╕реНрдкреЗрд╕рд┐рдлрд┐рдХреЗрд╢рди рдореЗрдВ рдХрд╣рд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рд░реИрдо 256 рдПрдордмреА рд╣реИред  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдЖрдк htop рдЪрд▓рд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдХреЗрд╡рд▓ 128 MB рд╣реА рдЙрдкрд▓рдмреНрдз рд╣реИред  рдпрд╣ рдХрд░реНрдиреЗрд▓ рд╡рд┐рдХрд▓реНрдкреЛрдВ рджреНрд╡рд╛рд░рд╛ рд╕реАрдорд┐рдд рд╣реИ рдЬрд┐рд╕реЗ uBoot рдХрдВрд╕реЛрд▓ рдореЗрдВ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </li></ul><br><pre> <code class="bash hljs">mem=128M console=ttyS1,115200n8 rw noinitrd rootwait root=/dev/mmcblk0p1 vt.global_cursor_default=0 consoleblank=0</code> </pre> <br><p>  рдореЗрдореЛрд░реА рдЪрд┐рдк рдорд╛рдЗрдХреНрд░реЛрди рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдорд┐рдд 3PC22 D9MTD рдЪрд┐рд╣реНрдирд┐рдд рд╣реИред  рдЗрд╕рдХреА рд╡рд░реНрддрдорд╛рди рдорд╛рддреНрд░рд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рдерд╛ред </p><br><ul><li>  uBoot рдХреЛ SPI рдлрд╝реНрд▓реИрд╢ рдореЗрдореЛрд░реА рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдХрд░реНрдиреЗрд▓ рднреА рд╡рд╛рдпрд░реНрдб рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЖрдк рдЕрдкрдиреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЗрд╕ рдЬрдЧрд╣ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдПрдХ рдирдИ рдХрд░реНрдиреЗрд▓ рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ uBoot рдХреЛ рдкреБрди: рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рд╡рд╣ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗред </li></ul><br><p>  Dmesg рд╕реЗ рдЫрд╡рд┐рдпреЛрдВ рдХреЗ рдкрддреЗ: </p><br><pre> <code class="bash hljs">[ 11.598170] 0x000000000000-0x000000040000 : <span class="hljs-string"><span class="hljs-string">"uboot"</span></span> [ 11.642985] 0x000000040000-0x000000080000 : <span class="hljs-string"><span class="hljs-string">"uboot-env1"</span></span> [ 11.706256] 0x000000080000-0x0000000c0000 : <span class="hljs-string"><span class="hljs-string">"uboot-env2"</span></span> [ 11.761827] 0x0000000c0000-0x000000100000 : <span class="hljs-string"><span class="hljs-string">"config-periph"</span></span> [ 11.805129] 0x000000100000-0x000000400000 : <span class="hljs-string"><span class="hljs-string">"kernel"</span></span> [ 11.861864] 0x000000400000-0x000001000000 : <span class="hljs-string"><span class="hljs-string">"RootFS"</span></span></code> </pre> <br><ul><li>  рдирд┐рдпрдВрддреНрд░рдХ рдХреА рд╕реНрдХреНрд░реАрди, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЫреЛрдЯреА рд╣реИ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдПрдХ рдкреНрд░рддрд┐рд░реЛрдзрдХ рд╕реЗрдВрд╕рд░ рд╣реИред  рдХреНрдпрд╛ рд╕реЗрдВрд╕рд░ рдЦреБрдж рдЬреБрдбрд╝рд╛ рд╣реИ рдЕрдЬреНрдЮрд╛рдд рд╣реИред </li><li>  рдбреБрдЕрд▓рд╢реЙрдХ 3 рдореЗрдВ рдпреВрдПрд╕рдмреА рдХрдиреЗрдХреНрдЯрд░ рдкрд░ рдПрд▓рдИрдбреА рд╣реИрдВ рдЬреЛ рдЧреЗрдордкреИрдб / рдЬреЙрдпрд╕реНрдЯрд┐рдХ рдХреА рд╕рдВрдЦреНрдпрд╛ рджрд┐рдЦрд╛рддреЗ рд╣реИрдВред  рд╡реАрдбрд┐рдпреЛ рдореЗрдВ рдПрдХ рдЧреЗрдордкреИрдб рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреА рд╕рдВрдЦреНрдпрд╛ 3 рд╣реИред рдпрд╣ рдПрдХ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐  рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рджреЛ рдФрд░ "рдЬреЙрдпрд╕реНрдЯрд┐рдХ" рд╣реИрдВ: рдПрдХ рдПрдХреНрд╕реЗрд▓реЗрд░реЛрдореАрдЯрд░ рдФрд░ рдПрдХ рдЬрд╛рдЗрд░реЛрд╕реНрдХреЛрдкред </li></ul><br><h1 id="problemy-voznikshie-pri-ispolzovanii">  рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рд╛ </h1><br><ul><li>  рд░реЛрдмреЛрдЯ рдХрднреА-рдХрднреА рдЯрд╛рдЗрдЯ рдШреВрдорддрд╛ рд╣реИ, рд╕рд░реНрд╡рд┐рд╕рдореЛрдЯрд░реНрд╕ рдХреЛ рдмрдВрдж рдХрд┐рдП рдмрд┐рдирд╛, рдЬреЛ рдЙрдиреНрд╣реЗрдВ рдбреЗрдЯрд╛ рд▓рд╛рдЗрди рдкрд░ рд╢реЛрд░ рд╕реЗ рдЕрдкрдиреА рд╕реНрдерд┐рддрд┐ рдмрджрд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдорд╛рдирдХ рд╡рд┐рддрд░рдг</a> рдкрд░ рднреА рдпрд╣ рджреЗрдЦрд╛ рдЧрдпрд╛ рд╣реИред </li><li>  рдкреАрдбрдмреНрд▓реВрдПрдо рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХрд╛ рд╕рдорд╛рд╡реЗрд╢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг</a> рдореЗрдВ рд▓рд┐рдЦреЗ рдЧрдП рд╕реЗ рдЕрд▓рдЧ рд╣реИред  рдХрдо рд╕реЗ рдХрдо рд╢реБрджреНрдз рд╕реА рдореЗрдВ рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд┐рдпрд╛ред </li><li>  рдпреВрдПрд╕рдмреА рдХрднреА-рдХрднреА рдбреЗрдмрд┐рдпрди рдкрд░ рдХрд╛рдо рдХрд░рдирд╛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реИред </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi415007/">https://habr.com/ru/post/hi415007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi414997/index.html">рдПрдордПрд▓-рдмреНрд▓рд┐рдЯреНрдЬ: рдкрд╣рд▓реЗ рдпреЛрдЧреНрдпрддрд╛ рджреМрд░ рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг</a></li>
<li><a href="../hi414999/index.html">3 рдбреА рд╡реЙрдЪрдореИрди рдФрд░ рдерд░реНрдорд┐рд╕реНрдЯрд░ рдЯреНрд░рд╛рдВрдЬрд┐рд╕реНрдЯрд░</a></li>
<li><a href="../hi415001/index.html">рдЙрдмрд░ рд░реЛрдмреЛрдЯ рдХрд╛рд░ рдХреЗ рд╕рдВрдЪрд╛рд▓рдХ, рдЬрд┐рд╕рдиреЗ рдПрдХ рд╕рд╛рдЗрдХрд┐рд▓ рдЪрд╛рд▓рдХ рдХреЛ рдЧреЛрд▓реА рдорд╛рд░ рджреА, рдЯрдХреНрдХрд░ рдХреЗ рд╕рдордп рд╡реЙрдЗрд╕ рд╢реЛ рджреЗрдЦрд╛</a></li>
<li><a href="../hi415003/index.html">Apple.com рдкрд░ рдЕрдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдлрд╝рд╛рдЗрд▓ рдЕрдкрд▓реЛрдб</a></li>
<li><a href="../hi415005/index.html">рд╕реМрд░ рдкреИрдирд▓, рд╡реЙрдпрд╕ рдХрдорд╛рдВрдб рдФрд░ рдСрдл-рд░реЛрдб рд░реЗрд╕рд┐рдВрдЧ: рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рдХ рд╕рд╛рдЗрдХрд┐рд▓ рдХрд╛ рд╡рд░реНрддрдорд╛рди рдФрд░ рднрд╡рд┐рд╖реНрдп</a></li>
<li><a href="../hi415009/index.html">рдЙрддреНрддрд░ рдЕрдореЗрд░рд┐рдХрд╛ рднрд░реНрддреА рдореЗрдВ рдХреМрди рд╣реИ - рднрд╛рдЧ 1</a></li>
<li><a href="../hi415011/index.html">2018 рдХреНрд▓рдм рдСрдл рд░реЛрдо рд░рд┐рдкреЛрд░реНрдЯ, рдЕрдзреНрдпрд╛рдп 3.10: "рдмреАрдЯреНрд╕ рдкрд░ рдХрд░"</a></li>
<li><a href="../hi415015/index.html">рдирд┐рдЬрд╝рдиреА рдиреЛрд╡рдЧреЛрд░реЛрдб рдореЗрдВ рдЖрдИрдЯреА рдирд┐рдпреЛрдХреНрддрд╛рдУрдВ рдХреА рд░реЗрдЯрд┐рдВрдЧ: рддрдХрдиреАрдХреА рд╡рд┐рд╢рд┐рд╖реНрдЯрддрд╛рдУрдВ рдХреЗ рдЫрд╛рддреНрд░реЛрдВ рдХреА рдкреНрд░рд╛рдердорд┐рдХрддрд╛рдУрдВ рдХрд╛ рдПрдХ рдЕрдзреНрдпрдпрди</a></li>
<li><a href="../hi415017/index.html">.NET рдЙрддреНрдкрд╛рдж рдЬреЛ рдЬреАрд╡рди рдмрдЪрд╛рддрд╛ рд╣реИ</a></li>
<li><a href="../hi415019/index.html">рд╡рд┐рдкрдгрдиред рдмрд╕ рдЬрдЯрд┐рд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>