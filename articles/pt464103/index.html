<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÄ üëéüèæ üë©üèª‚Äçüíª Rascunho do padr√£o nacional de IoT do OpenUNB: revis√£o cr√≠tica üßòüèº üë®üèø‚Äçüè≠ ‚ô¶Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! 

 H√° algum tempo, o Grupo de Trabalho da Internet das Coisas da Skoltech publicou um rascunho do padr√£o nacional de IoT de banda estreita c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rascunho do padr√£o nacional de IoT do OpenUNB: revis√£o cr√≠tica</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464103/"> Ol√° Habr! <br><br>  H√° algum tempo, o Grupo de Trabalho da Internet das Coisas da Skoltech publicou um rascunho do padr√£o nacional de IoT de banda estreita chamado ‚ÄúOpenUNB‚Äù, cujo texto completo pode ser encontrado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  Por um lado, o fen√¥meno √© indubitavelmente positivo - se no campo dos padr√µes de banda larga existe de fato aberto para uso de todos que desejam LoRaWAN, os padr√µes de banda estreita at√© hoje s√£o extremamente propriet√°rios (Sigfox, XNB da Strizh, NB-Fi da Vaviot - embora o √∫ltimo tamb√©m √© publicado na forma de um projeto de norma nacional, n√£o revela partes essenciais para a implementa√ß√£o de terceiros). <br><br>  Ao mesmo tempo, os sistemas de banda estreita e banda larga t√™m seus pr√≥prios pr√≥s e contras, portanto, dizer "por que voc√™ precisa de algo mais quando existe LoRaWAN" n√£o √© totalmente verdade.  Ou seja, √© necess√°rio um padr√£o aberto para comunica√ß√µes UNB. <br><br>  No entanto, a necessidade √© apenas uma das duas condi√ß√µes.  O segundo √© sufici√™ncia.  Ok, o que a Skoltech publicou √© necess√°rio, mas √© suficiente para uso pr√°tico? <br><br><img src="https://habrastorage.org/webt/mu/4m/y3/mu4my3u5mgerviabkc-yhlqhb2m.jpeg"><br><br>  N√≥s responderemos a isso em um formato semelhante a uma entrevista - sob as cita√ß√µes cortadas do rascunho do padr√£o OpenUNB e seus coment√°rios, dados por Alexander Sheptovetsky (AS), diretor t√©cnico da GoodWAN, e Oleg Artamonov (OA), diretor t√©cnico da Unwired Devices. <br><br>  Ent√£o vamos l√°.  A estil√≠stica, ortografia e pontua√ß√£o dos autores s√£o preservadas. <br><a name="habracut"></a><br><blockquote>  Um recurso do protocolo √© o uso de modula√ß√£o de banda ultra-estreita (a largura do espectro de emiss√£o √© menor que 1 kHz), que permite alcan√ßar uma alta rela√ß√£o sinal-ru√≠do (com restri√ß√µes na pot√™ncia irradiada na faixa n√£o licenciada), o que significa transmitir dados a longas dist√¢ncias ou atrav√©s de v√°rios obst√°culos (paredes de concreto, divis√≥rias arm√°rios de metal). </blockquote>  <b>OA: o</b> primeiro erro dos autores da norma √© que eles inicialmente assumem alta SNR (rela√ß√£o sinal / ru√≠do) como o principal requisito para sinais em sistemas LPWAN - e a partir desses erros continuar√° a crescer no design e na implementa√ß√£o do pr√≥prio protocolo, como escolher pre√¢mbulos, por exemplo. <br><br>  Na realidade, a principal capacidade dos protocolos sem fio LPWAN, fornecendo seu "alcance", √© a capacidade de receber um sinal com um SNR <i>baixo</i> , at√© um negativo, ou seja,  casos em que o n√≠vel do sinal √© inferior ao n√≠vel do ru√≠do. <br><br>  Al√©m disso, os autores da norma n√£o est√£o bem familiarizados com os princ√≠pios b√°sicos da teoria da transmiss√£o de sinais e, especificamente, com o limite de Shannon na taxa de transfer√™ncia de dados no canal na presen√ßa de ru√≠do.  Essa velocidade √© determinada pelo valor do SNR <i>e pela</i> largura do espectro do sinal - de fato, um √© compensado pelo outro.  Portanto, para transmitir dados em sistemas LPWAN a longas dist√¢ncias, os sinais de banda estreita e banda larga (por exemplo, na banda LoRaWAN - 125 kHz) s√£o usados ‚Äã‚Äãcom √™xito, cada um dos m√©todos tem suas pr√≥prias vantagens e desvantagens. <br><blockquote>  Isso √© poss√≠vel devido ao fato de que os dispositivos de assinante transmitem dados sem estabelecer uma conex√£o com a esta√ß√£o base (modo simplex), como por exemplo, isso √© feito em redes celulares m√≥veis. </blockquote>  <b>OA:</b> al√©m dos erros estil√≠sticos e de pontua√ß√£o, noto o uso inaceit√°vel e inaceit√°vel da terminologia.  O modo simplex, isto √©, a transmiss√£o de mensagens pelo canal de comunica√ß√£o apenas em uma dire√ß√£o, n√£o est√° diretamente relacionado √† necessidade de estabelecer uma conex√£o - e certamente estes n√£o s√£o sin√¥nimos.  O mesmo LoRaWAN fornece comunica√ß√£o bidirecional no modo half-duplex, mas tamb√©m n√£o requer conex√£o pr√©via com o BS. <br><br>  Provavelmente, os autores tinham em mente a aus√™ncia de um modo de opera√ß√£o de sess√£o no OpenUNB - mas esse √© um recurso caracter√≠stico de todos os protocolos LPWAN. <br><blockquote>  Para simplificar e reduzir o custo do projeto do transceptor, a transmiss√£o e a recep√ß√£o s√£o separadas no tempo, ou seja, os dados s√£o trocados da esta√ß√£o base no modo simplex (transmiss√£o da unidade de assinante para a esta√ß√£o base) ou no modo half duplex (transmiss√£o da unidade de assinante para a esta√ß√£o base e a subseq√ºente recep√ß√£o no dispositivo do assinante a partir da esta√ß√£o base). </blockquote>  <b>OA:</b> e literalmente meia p√°gina depois, verifica-se que tamb√©m existe o modo half-duplex no OpenUNB!  Em geral, quero observar que existem muitas contradi√ß√µes internas no rascunho da norma. <br><blockquote>  A ordem de bytes no pacote √© do mais antigo para o mais novo (big endian) </blockquote>  <b>OA:</b> big-endian √© um tipo de arquitetura de computador com uma ordem de bytes espec√≠fica em um n√∫mero multibyte.  Em um pacote, a ordem dos bytes √© sempre a mesma - do primeiro ao √∫ltimo.  Repito: para um rascunho de padr√£o nacional, um uso t√£o descuidado da terminologia estabelecida √© inaceit√°vel. <br><blockquote>  Os pacotes podem ter comprimentos diferentes, dependendo do tamanho da carga √∫til.  Op√ß√µes de comprimento de carga √∫til: 0, 64 ou 128 bits.  Uma mensagem com carga √∫til zero pode ser usada como um sinal regular de que o dispositivo est√° funcionando (pulsa√ß√£o).  Os comprimentos de pacotes de 64 e 128 bits s√£o determinados pelo tamanho dos blocos de criptografia dos algoritmos de criptografia. </blockquote>  <b>AS:</b> Os desenvolvedores limitaram o comprimento da carga √∫til a 0, 64 ou 128 bits, justificando isso com a conveni√™ncia da criptografia.  Essa √© uma limita√ß√£o completamente artificial.  √Äs vezes, voc√™ precisa enviar mensagens muito curtas, mas precisa usar 64 bits.  De que efici√™ncia energ√©tica podemos falar depois disso!  Como criptografar mensagens curtas com chaves longas pode ser lido, por exemplo, no protocolo LoRaWAN. <br><br>  <b>OA:</b> sim, no mesmo LoRaWAN, o esquema de criptografia AES-CTR √© usado regularmente, o que permite criptografar pacotes de qualquer tamanho, incluindo  menor comprimento da chave. <br><blockquote>  Para alcan√ßar uma faixa de transmiss√£o alta na faixa n√£o licenciada, √© necess√°ria uma alta rela√ß√£o sinal / ru√≠do.  Isso √© alcan√ßado devido √† largura de banda de transmiss√£o ultra pequena (da ordem de 100 Hz). </blockquote>  <b>AS:</b> no rascunho do padr√£o, n√£o h√° sequer uma √∫nica opini√£o sobre a largura de banda - √© "inferior a 1 kHz", depois "cerca de 100 Hz".  N√£o foi poss√≠vel chegar a uma √∫nica declara√ß√£o na norma? <br><br>  <b>OA:</b> e novamente sobre a necessidade de um alto SNR.  N√£o n√£o  O LPWAN tamb√©m √© LPWAN para funcionar mesmo com um SNR negativo. <br><br><blockquote>  Alguns transceptores podem alterar suas propriedades bastante fortemente no in√≠cio de uma transmiss√£o.  Isso pode afetar a frequ√™ncia e o comprimento do sinal modulado dos primeiros bits no pacote.  Para compensar esse fator, recomenda-se emitir um sinal em uma frequ√™ncia de pacotes com dura√ß√£o igual a uma dura√ß√£o de transmiss√£o de 1-2 bits antes de iniciar a transmiss√£o do pre√¢mbulo (Figura 2).  [...] No final da transmiss√£o, ap√≥s a soma de verifica√ß√£o, voc√™ tamb√©m deve estudar 1 bit a mais e reduzir gradualmente a amplitude do sinal, o que aumentar√° a probabilidade de recep√ß√£o correta do √∫ltimo bit. </blockquote><br><br>  <b>AS: As</b> informa√ß√µes e os desenhos s√£o retirados da descri√ß√£o t√©cnica do SigFox e est√£o conectados a alguns recursos da descri√ß√£o do SigFox.  O receptor corrige os bits n√£o no momento da mudan√ßa de fase, mas antes e depois.  Voc√™ n√£o deve copiar sem pensar os recursos e erros de descri√ß√£o de outras pessoas. <br><blockquote>  Valor recomendado do pre√¢mbulo para o pacote de liga√ß√£o ascendente: 10101010101010101010 <sub>2</sub> .  A crit√©rio dos desenvolvedores, os valores de pre√¢mbulo para toda a rede podem ser alterados.  Por exemplo, isso pode ser usado para criar v√°rias redes em um territ√≥rio, cuja recep√ß√£o de uma ou outra esta√ß√£o base ser√° dividida com base em v√°rios pre√¢mbulos. </blockquote>  <b>AS:</b> Breve explica√ß√£o.  Os receptores de sinal UNB operam no n√≠vel do ru√≠do do ar.  Como regra, s√£o utilizados receptores de convers√£o direta, ap√≥s os quais s√£o feitas FFTs.  Se o sinal tiver modula√ß√£o de fase, observe mais a mudan√ßa de fase para cada canal de frequ√™ncia.  Se uma sequ√™ncia digital correspondente ao pre√¢mbulo for encontrada em qualquer canal, ser√° tomada uma decis√£o sobre a presen√ßa de um sinal √∫til.  Ao mesmo tempo, em cada correlacionador ap√≥s a FFT, uma sequ√™ncia aleat√≥ria de zeros e uns est√° constantemente saindo do ru√≠do do √©ter - isso significa que sempre h√° a possibilidade de obter um pre√¢mbulo do ru√≠do do √©ter.  Agora vamos ver com que frequ√™ncia os pre√¢mbulos falsos de 16 bits aparecer√£o, por exemplo, no receptor, cuja utiliza√ß√£o √© declarada por Vaviot, os autores de um "esbo√ßo de padr√£o nacional" similar.  A banda de recep√ß√£o declarada por eles √© de 200 kHz com um passo de 7 Hz na FFT, o que significa que s√£o necess√°rios mais de 28 mil correlacionadores.  Para um acerto exato em um bit de 10 ms (velocidade de transmiss√£o de 100 bps), os correlacionadores iniciam a cada 2,5 ms.  No total, 11 milh√µes de correlatos devem ser verificados a cada segundo quanto √† poss√≠vel presen√ßa de um pre√¢mbulo, e <i>uma m√©dia de 178 pre√¢mbulos falsos ser√° derramada</i> do ru√≠do do √©ter a <i>cada segundo</i> .  Cada pre√¢mbulo falso precisa ser processado - e ao mesmo tempo n√£o perder a recep√ß√£o dos pre√¢mbulos verdadeiros.  Essa √© uma tarefa irracionalmente redundante para um processador BS, que j√° funciona at√© o limite. <br><br>  Para todos os fabricantes de sistemas UNB que eu conhe√ßo, <i>o pre√¢mbulo tem 32 bits</i> e foi escolhido n√£o por acaso, mas como resultado de c√°lculos e experimentos. <br><br>  Al√©m disso, o objetivo do pre√¢mbulo n√£o √© apenas extrair um sinal √∫til do fluxo de ru√≠do, mas tamb√©m fornecer sincroniza√ß√£o.  <i>Nos sistemas UNB, sequ√™ncias M especiais de bits com uma fun√ß√£o de autocorrela√ß√£o pronunciada s√£o usadas como pre√¢mbulo</i> .  Por exemplo, se antes da sequ√™ncia proposta pelos autores (101010101010101010 <sub>2</sub> ), mais um par 10 <sub>2 for</sub> recebido acidentalmente do ru√≠do, o receptor determinar√° o in√≠cio das informa√ß√µes √∫teis dois bits mais cedo e n√£o poder√° receber o pacote. <br><br>  Alguns sistemas usam pre√¢mbulos regulares, mas depois deles sempre aparece a palavra sincroniza√ß√£o, que n√£o √© fornecida neste protocolo.  Pelas mesmas raz√µes, √© incorreto usar o identificador do dispositivo como pre√¢mbulo do downlink, conforme fornecido por este protocolo. <br><br>  <b>OA: os</b> autores do rascunho da norma s√£o claramente resumidos pela id√©ia de uma ‚Äúalta rela√ß√£o sinal / ru√≠do‚Äù profundamente enraizada em suas cabe√ßas, que eles j√° enfatizaram v√°rias vezes.  Sim, durante experimentos no laborat√≥rio, o SNR √© alto e o receptor pode trabalhar no modo "eu vejo o sinal - recebo o sinal" (e muitos produtos baratos vendidos no Aliexpress funcionam com sucesso nesse modo, fornecendo um alcance de comunica√ß√£o de v√°rias centenas de metros). <br><br>  Em quaisquer condi√ß√µes reais, e mais ainda a dist√¢ncias declaradas de 50 km, o pre√¢mbulo proposto simplesmente morre em ru√≠do: um bit ruim ou ru√≠do aleat√≥rio √† sua frente ser√° suficiente para impedir que o receptor reconhe√ßa o pacote. <br><br>  <b>AS:</b> Sem elementos de codifica√ß√£o √† prova de ru√≠do, √© imposs√≠vel obter comunica√ß√µes de alta qualidade nas condi√ß√µes do ru√≠do do ar cotidiano, especialmente na faixa de frequ√™ncia n√£o licenciada, este √© um "cl√°ssico do g√™nero".  Qualquer interfer√™ncia de pulso curto no canal, tocando apenas um bit em toda a sequ√™ncia, e o receptor n√£o aceita nada. <br><blockquote>  O ID do remetente √© uma sequ√™ncia exclusiva de 32 bits atribu√≠da a um dispositivo durante sua produ√ß√£o.  Informa√ß√µes adicionais sobre identificadores s√£o fornecidas no Ap√™ndice E: Formato para escrever identificadores, unidades de assinantes, c√°lculo de informa√ß√µes de controle e intervalos reservados de identificadores. </blockquote>  <b>OA:</b> o padr√£o, que afirma ser a base de um sistema unificado de transfer√™ncia de dados em sistemas de contabilidade de recursos, n√£o descreve as regras pelas quais os fabricantes escolhem identificadores para si mesmos - nem sequer √© indicado que tais regras jamais existir√£o.  O que isso levar√°?  √â isso mesmo, para um monte de dispositivos de diferentes fabricantes, mas com os mesmos identificadores, porque cada segundo fabricante simplesmente numerar√° os dispositivos do zero. <br><blockquote>  As informa√ß√µes de servi√ßo consistem em 8 bits, com os 6 bits mais √† esquerda reservados para uso futuro.  2 bits s√£o reservados para o n√∫mero do pacote na mensagem. </blockquote>  <b>OA: uma</b> quantidade muito estranha e muito modesta de informa√ß√µes gerais.  Pode-se especificar o n√∫mero de pacote de ponta a ponta, o tipo de criptografia, o tamanho do pacote e muito mais.  N√£o est√° claro por que precisamos de um n√∫mero de pacote "local" na mensagem - digamos que recebemos o n√∫mero de pacote 0 e depois o n√∫mero 1. Devemos descartar o segundo?  E se esse j√° √© o pacote n√∫mero 1 da pr√≥xima mensagem, da qual perdemos o n√∫mero 0 no ar?  E se n√£o podemos descartar pacotes com base nisso, como resolvemos o problema com o fato de o dispositivo poder transmitir 4 pacotes id√™nticos seguidos - aceitamos e consideramos todos eles, recebendo v√°rias cargas duplicadas na sa√≠da? <br><br>  <b>AS:</b> Geralmente, um pre√¢mbulo segue um cabe√ßalho que indica o comprimento do pacote; este n√£o √© o caso neste protocolo.  Como o receptor entende quantos bits discar?  √â claro que voc√™ pode verificar todos os comprimentos poss√≠veis usando CRC, mas ningu√©m faz isso, √© muito caro do ponto de vista do hardware do receptor. <br><blockquote>  A soma de verifica√ß√£o do pacote √© calculada com base no algoritmo do Ap√™ndice B: C√°lculo da soma de verifica√ß√£o do pacote. </blockquote>  <b>OA:</b> para ser sincero, apenas fico de boca aberta.  N√£o, <i>geralmente n√£o h√°</i> prote√ß√£o contra ataques t√≠picos no protocolo!  Com a seguran√ßa e a seguran√ßa declaradas do protocolo, o uso de cifras fortes e outros e outros, qualquer um pode pegar o pacote de outra pessoa, alterar os campos nele, substituir a carga √∫til de outro pacote, recalcular a soma de verifica√ß√£o - e transmiti-la, e a esta√ß√£o base aceitar√° e n√£o pode de forma alguma distinguir um pacote falso de um pacote "nativo". <br><br>  <b>AS: os</b> desenvolvedores protegem informa√ß√µes √∫teis com criptografia, mas isso claramente n√£o √© suficiente!  Os desenvolvedores afirmam que est√£o familiarizados com os protocolos LoRaWAN e NB-FI; nesse caso, eles entenderiam por que a prote√ß√£o contra repeti√ß√µes √© necess√°ria e por que uma inser√ß√£o adicional de imita√ß√£o √© necess√°ria no pacote.  Por exemplo, um pacote com uma carga √∫til de 0 bits √© absolutamente inseguro, n√£o h√° problema em escrev√™-lo do ar e repeti-lo, e o sistema o entender√° como seu.  Tamb√©m n√£o √© dif√≠cil para um invasor enviar qualquer lixo ao sistema ou repetir em nome de qualquer sensor em pacotes com comprimento diferente de zero. <br><br>  O padr√£o a priori j√° se tornou protocolos de seguran√ßa da informa√ß√£o no LoRaWAN, que justificavam o uso de duas chaves de seguran√ßa, para a rede e para o usu√°rio, al√©m da capacidade de gerar chaves de sess√£o atrav√©s do ar, aparentemente os desenvolvedores do protocolo nem pensavam nisso. <br><blockquote>  As chaves de criptografia devem ser armazenadas no dispositivo do assinante e nos servidores de rede em um armazenamento seguro.  Para criptografar pacotes de uplink e downlink, diferentes chaves de criptografia devem ser usadas.  Para cada dispositivo, o conjunto de chaves de criptografia deve ser exclusivo. </blockquote>  <b>OA:</b> por um lado, os desenvolvedores do OpenUNB se credenciam com "tamanhos de campo selecionados em m√∫ltiplos de 8 bits, para processamento mais eficiente em microprocessadores" (ortografia do autor), por outro lado, parece que eles simplesmente n√£o conhecem uma t√©cnica de otimiza√ß√£o sim√©trica t√£o eficaz criptografia, como a capacidade de manter o dispositivo final em vez de dois procedimentos - criptografia e descriptografia - apenas um, o que reduz bastante o tamanho do firmware nos microcontroladores.  Pelo menos no rascunho da norma n√£o √© mencionado. <br><br>  <b>AS:</b> mas eles realmente conseguiram escolher o tamanho dos campos em m√∫ltiplos de 8 bits! <br><blockquote>  Enviar uma mensagem de um canal a jusante s√≥ √© poss√≠vel em resposta a uma mensagem de um canal a montante.  Existem v√°rias raz√µes para isso.  Em primeiro lugar, o protocolo √© especializado em dispositivos de assinante que n√£o possuem energia externa e s√£o projetados para uma dura√ß√£o de bateria extra longa, o que significa que o consumo de energia desempenha um papel fundamental.  Como o consumo do transmissor no modo de recebimento √© bastante alto, voc√™ deve alternar para esse modo apenas por um curto per√≠odo de tempo. </blockquote>  <b>OA: N√£o</b> entendo muito bem por que limitar conscientemente o escopo do padr√£o, j√° o fa√ßa j√° do que o indicado na introdu√ß√£o ao mesmo padr√£o.  Um medidor el√©trico dom√©stico comum possui energia externa?  Tem.  O que impede voc√™ de manter o "transmissor no modo de recebimento" ligado o tempo todo?  Nada. <br><blockquote>  Em segundo lugar, n√£o √© poss√≠vel selecionar um intervalo de tempo espec√≠fico em um dispositivo de assinante, pois, a fim de reduzir o custo dos dispositivos de assinante, eles geralmente s√£o equipados com osciladores de cristal inst√°veis ‚Äã‚Äãe n√£o possuem um rel√≥gio em tempo real. </blockquote>  <b>OA:</b> Isso, √© claro, n√£o √© assim.  Primeiramente, olhando para a frente dois par√°grafos, os autores j√° est√£o segurando uma enorme janela de recep√ß√£o - 8 segundos (no mesmo LoRaWAN, as janelas de recep√ß√£o t√™m 1-2 segundos de tamanho).  Em segundo lugar, √© suficiente calcular com que freq√º√™ncia o dispositivo deve sincronizar o rel√≥gio com a esta√ß√£o base (e fornecer um m√©todo para essa sincroniza√ß√£o) para que o problema da instabilidade do quartzo n√£o seja um problema.  No LoraWAN, isso √© feito em dispositivos de classe B. <br><blockquote>  Em terceiro lugar, a baixa estabilidade dos osciladores de cristal nos dispositivos de assinante requer o uso do algoritmo de ajuste de frequ√™ncia descrito no Ap√™ndice D: Ajuste da frequ√™ncia de transmiss√£o no downlink.  Mas, como a √∫ltima mensagem do canal upstream √© usada para calcular o desvio de frequ√™ncia, e a frequ√™ncia do oscilador de cristal pode mudar com o tempo (por exemplo, quando a temperatura muda), o tempo entre a √∫ltima mensagem upstream e a jusante deve ser pequeno o suficiente para alterar o desvio de frequ√™ncia no canal do assinante. dispositivo durante esse per√≠odo foi insignificante. </blockquote>  <b>AS:</b> A julgar pelos detalhes da descri√ß√£o, os desenvolvedores do protocolo OpenUNB consideram sua solu√ß√£o para o problema da sincroniza√ß√£o de canal descendente em frequ√™ncia como a conquista mais importante. <br><br>  O pr√≥prio m√©todo de c√°lculo √© bastante aceit√°vel, mas h√° v√°rios problemas: <br><br><ul><li>         ,     ,    . </li><li>        . </li><li>      ,     7  50 ,   7      . </li><li>         ,        . </li><li>              . </li><li>           ,            ,     . </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realizamos os estudos apropriados e n√£o conseguimos obter, em condi√ß√µes reais, uma precis√£o de acerto na faixa de 868 MHz acima de ¬± 150 Hz. Para receber um sinal de 100 Hz BPSK, √© necess√°ria uma precis√£o de pelo menos 30 Hz. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SigFox opera no canal de retorno com uma modula√ß√£o de frequ√™ncia de 600 Hz. Penso que a organiza√ß√£o m√°xima poss√≠vel do canal de retorno √© 2GFSK com um desvio de 300 Hz e um aumento na pot√™ncia do sinal a jusante para 100 mW.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al√©m disso, sistemas UNB com chaveamento de sinal de mudan√ßa de fase n√£o funcionam muito bem em objetos em movimento, devido a um aumento no ru√≠do de fase durante a propaga√ß√£o do sinal de caminhos m√∫ltiplos. O m√©todo proposto para determinar a frequ√™ncia do sinal descendente na presen√ßa de vi√©s Doppler dar√° um erro adicional na determina√ß√£o da frequ√™ncia portadora do canal de liga√ß√£o ascendente, o que levar√° a um erro adicional na determina√ß√£o da frequ√™ncia descendente. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Talvez os autores do protocolo tenham outros dados, confirmados n√£o "em cima da mesa", mas em condi√ß√µes reais, eu gostaria de ver os relat√≥rios dos testes. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acrescento que mesmo um desvio de 30 Hz com uma faixa de 100 Hz n√£o √© a recep√ß√£o ideal, mas cerca de 10% dos erros de bits (nos sistemas LPWAN isso √© tradicionalmente levado para o exterior, no qual a qualidade da recep√ß√£o ainda pode ser considerada aceit√°vel). Dada a falta de codifica√ß√£o de ru√≠do no OpenUNB, a probabilidade de uma mensagem da ordem de algumas centenas de bits capturar pelo menos um erro com um BER de 10% √© muito alta - ou seja, especificamente no OpenUNB, eu avaliaria o desvio de frequ√™ncia permitido em que algo de alguma forma √†s vezes, s√£o tomadas, no m√°ximo 5%. Em </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trinta vezes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> melhor do que √© poss√≠vel obter na realidade. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em suma, h√° s√©rias d√∫vidas de que o m√©todo de organiza√ß√£o de um canal de comunica√ß√£o reversa descrito no rascunho da norma seja geralmente operacional em princ√≠pio.</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A dura√ß√£o do intervalo de tempo T </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dl</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© selecionada para ser v√°rias vezes a dura√ß√£o da transmiss√£o de um pacote de downlink. </font><font style="vertical-align: inherit;">Esse aumento no tamanho da janela de tempo √© necess√°rio, pois geralmente existem muitos dispositivos por esta√ß√£o, o que pode levar √† necessidade de enviar um pacote de downlink para v√°rios dispositivos ao mesmo tempo.</font></font></blockquote> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Toda m√°gica tem um pre√ßo, como disse o her√≥i de uma s√©rie. </font><font style="vertical-align: inherit;">No caso do planejamento de redes de r√°dio, esse pre√ßo deve ser calculado - ou os autores do rascunho da norma n√£o encontraram tempo para tais c√°lculos (mas talvez n√£o valesse a pena apressar-se a publicar o projeto?), Ou n√£o pensaram em faz√™-lo.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nesse caso, como os mesmos autores observaram corretamente acima, a opera√ß√£o do receptor √© um procedimento que consome bastante energia. Em um caso, obtemos 8 segundos de opera√ß√£o ociosa, no outro (quando o slot de recep√ß√£o √© reduzido para 1-2 segundos) - a possibilidade da esta√ß√£o base n√£o responder (n√£o havia tempo para o intervalo de tempo definido) e a necessidade de reiniciar as mensagens do receptor. Era necess√°rio estimar pelo menos aproximadamente a carga do √©ter e o consumo de energia em ambos os casos, dependendo da intensidade das trocas de r√°dio na rede, e tamb√©m fornecer uma maneira explicitamente descrita para confirmar que o receptor recebeu mensagens da esta√ß√£o base. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finalmente, n√£o est√° claro no texto da norma se toda a premissa a jusante deve cair em T </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dl</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ou o destinat√°rio, depois de pegar o pre√¢mbulo e seu endere√ßo, estender√° a janela de recep√ß√£o at√© tempo suficiente para receber todo o pacote. </font><font style="vertical-align: inherit;">Como regra, nos sistemas LPWAN eles seguem o segundo caminho, novamente permitindo reduzir a dura√ß√£o necess√°ria da janela de recebimento.</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em caso de recep√ß√£o bem-sucedida pelo dispositivo assinante da mensagem do canal downstream, em resposta, envia uma mensagem sobre a recep√ß√£o bem-sucedida no uplink. </font><font style="vertical-align: inherit;">Os dados do usu√°rio devem conter uma indica√ß√£o da mensagem confirmada. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[...] Uma mensagem com carga zero pode ser usada como confirma√ß√£o de que a esta√ß√£o base recebeu dados de uma unidade de assinante (reconhecimento).</font></font></blockquote> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ol√° novamente, seguran√ßa! Como confirma√ß√£o da entrega, prop√µe-se enviar um pacote criptograficamente desprotegido da esta√ß√£o base, que qualquer um pode falsificar em meio minuto. Sem mencionar o que voc√™ tenta entender nesses dois par√°grafos - o dispositivo deve enviar uma mensagem sobre sua recep√ß√£o bem-sucedida ao ACK? No texto literal do rascunho da norma, verifica-se que deveria. ACK para ACK. Mas, pelo menos, n√£o √© dito em nenhum lugar que a esta√ß√£o base deve responder ACK por ACK em ACK - ou melhor, o rascunho da norma n√£o diz em nenhum lugar como a BS deve entender se deve reconhecer o pacote ou n√£o. Esta n√£o √© uma propriedade do pacote (embora com 6 bits vazios no cabe√ßalho, um possa ser alocado para o sinalizador de confirma√ß√£o de entrega).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E o que significa "uma indica√ß√£o de uma mensagem confirmada" deve ser contida? </font><font style="vertical-align: inherit;">Como apontar para uma mensagem espec√≠fica em um sistema no qual n√£o √© fornecida uma rotulagem individual de mensagens por um protocolo?</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O padr√£o OpenUNB requer uma quantidade m√≠nima de energia para enviar um pouco de informa√ß√£o. </font><font style="vertical-align: inherit;">De acordo com os resultados de testes preliminares, agora √© um dos protocolos com maior economia de energia.</font></font></blockquote> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AS: Uma</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> declara√ß√£o controversa e n√£o confirmada. </font><font style="vertical-align: inherit;">O protocolo cont√©m pelo menos alguns elementos que indicam sua baixa efici√™ncia energ√©tica:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Uma soma de verifica√ß√£o excessivamente longa de 32 bits, apesar de todos os fabricantes desses sistemas custarem 16 bits de CRC. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A restri√ß√£o no comprimento da informa√ß√£o √© apenas estritamente de 64 ou 128 bits. </font><font style="vertical-align: inherit;">Se voc√™ precisar enviar uma mensagem curta de v√°rios bits (por exemplo, de qualquer sensor bin√°rio - 1 bit), ser√° necess√°rio transmitir alguns bytes extras a cada vez, qual √© a efici√™ncia aqui.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A necessidade declarada de duplicar a transmiss√£o de uma mensagem at√© quatro vezes, o que altera imediatamente os par√¢metros de energia em 4 vezes. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Uma janela de 8 segundos para receber pacotes a jusante. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu gostaria muito de ver os relat√≥rios de teste, existem algumas d√∫vidas de que eles existem. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sim, √© dif√≠cil entender onde Skoltech estava com tanta pressa que ele n√£o podia compartilhar relat√≥rios de teste e outras informa√ß√µes de suporte para avaliar em que desempenho real do OpenUNB se pode contar.</font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O OpenUNB √© um padr√£o aberto universal, absolutamente pronto para uso pr√°tico. </font></font></blockquote> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AS:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O texto da norma √© bruto, cont√©m descri√ß√µes fragment√°rias, incompletas e imprecisas de elementos perfurados individuais; seu uso na pr√°tica √© imposs√≠vel. </font><font style="vertical-align: inherit;">N√£o h√° nada sobre as especificidades do elemento-chave dos sistemas UNB - o receptor da esta√ß√£o base. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OA:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> No geral, tenho a sensa√ß√£o de um bom trabalho de curso de terceiro ano escrito em uma semana ou duas. </font><font style="vertical-align: inherit;">Muito bem, participei de todas as palestras, compreendi at√© 70% a 80%, ainda n√£o h√° experi√™ncia real, mas pelo menos h√° um assunto para uma discuss√£o proveitosa com o professor ao passar no teste. </font><font style="vertical-align: inherit;">Antes da aplica√ß√£o pr√°tica, n√£o √© como antes da lua - para aplica√ß√£o pr√°tica na LPWAN, todo esse projeto ter√° que ser jogado fora e reescrito.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt464103/">https://habr.com/ru/post/pt464103/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt464091/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel 311 (de 12 a 18 de agosto)</a></li>
<li><a href="../pt464093/index.html">Bens digitais: o que fazer se um cliente vier buscar uma compra em um ano?</a></li>
<li><a href="../pt464095/index.html">Getters e Setters em Dart and Flutter</a></li>
<li><a href="../pt464097/index.html">A evolu√ß√£o da intelig√™ncia: por que os rob√¥s precisam de emo√ß√µes</a></li>
<li><a href="../pt464099/index.html">An√°lise da linguagem VKScript: JavaScript, e voc√™?</a></li>
<li><a href="../pt464105/index.html">Servidor Commento nativo com Docker Compose</a></li>
<li><a href="../pt464107/index.html">Eventos digitais em Moscou, de 19 a 25 de agosto</a></li>
<li><a href="../pt464109/index.html">P√°ra-quedas supers√¥nicos do espa√ßo</a></li>
<li><a href="../pt464111/index.html">Natas Web. Passagem da plataforma CTF destinada a explorar vulnerabilidades da Web</a></li>
<li><a href="../pt464113/index.html">"CAD para todos, de gra√ßa, e n√£o deixe ningu√©m ir ..." ou os primeiros passos na programa√ß√£o do FreeCAD em Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>