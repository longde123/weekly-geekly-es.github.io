<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¼ â›½ï¸ ğŸˆ Ø³Ù…Ùƒ Ø§Ù„Ø³Ù„ÙˆØ± Ù…Ù‚Ø¯Ù…Ø© â‰ï¸ ğŸ¤±ğŸ¼ ğŸ˜“</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ÙˆØ§Ø­Ø¯Ø© Ù…Ù† Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø´Ø¨ÙƒØ§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø© Ù‡ÙŠ Ù‡Ø´Ø§Ø´ØªÙ‡Ø§. Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªØµÙÙŠØ© ØŒ ÙˆØ³ÙŠØ§Ø³Ø§Øª ØªØ¨Ø§Ø¯Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ØŒ ÙˆØ¨Ø±ÙˆØªÙˆÙƒÙˆÙ„Ø§Øª Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© ØªØ¬Ø¹Ù„ Ø§Ù„...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ø³Ù…Ùƒ Ø§Ù„Ø³Ù„ÙˆØ± Ù…Ù‚Ø¯Ù…Ø©</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441532/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/tm/-b/yz/tm-byzhobce3it0kku80cuyttny.png" alt="Ø§Ù„ØµÙˆØ±Ø©"><br><br>  ÙˆØ§Ø­Ø¯Ø© Ù…Ù† Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø´Ø¨ÙƒØ§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø© Ù‡ÙŠ Ù‡Ø´Ø§Ø´ØªÙ‡Ø§.  Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªØµÙÙŠØ© ØŒ ÙˆØ³ÙŠØ§Ø³Ø§Øª ØªØ¨Ø§Ø¯Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ØŒ ÙˆØ¨Ø±ÙˆØªÙˆÙƒÙˆÙ„Ø§Øª Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© ØªØ¬Ø¹Ù„ Ø§Ù„Ø´Ø¨ÙƒØ§Øª Ù…Ø±Ø¨ÙƒØ© ÙˆØªØ®Ø¶Ø¹ Ù„Ù„Ø¹ÙˆØ§Ù…Ù„ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©.  ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­Ø¯Ø« ØªØ¹Ø·Ù„ Ø§Ù„Ø´Ø¨ÙƒØ© Ø¹Ù† ØºÙŠØ± Ù‚ØµØ¯ Ø¹Ù†Ø¯ Ø¥Ø¬Ø±Ø§Ø¡ ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ù„Ù‰ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø£Ùˆ ACL ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ÙˆØ§Ø­Ø¯</a> Ø£Ùˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ø«Ù†ÙŠÙ†</a> ).  Ù†ÙØªÙ‚Ø± Ø¨Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø¥Ù„Ù‰ Ø£Ø¯Ø§Ø© Ù„ØªÙ‚ÙŠÙŠÙ… Ø³Ù„ÙˆÙƒ Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨ØªÙƒÙˆÙŠÙ† Ø¬Ø¯ÙŠØ¯ Ù‚Ø¨Ù„ Ø¥Ø¬Ø±Ø§Ø¡ ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ§Ø¬.  Ø£Ø±ÙŠØ¯ Ø£Ù† Ø£Ø¹Ø±Ù Ø¨Ø§Ù„Ø¶Ø¨Ø· Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø´Ø¨ÙƒØ© "Ø£" Ø³ØªÙƒÙˆÙ† Ù…ØªØ§Ø­Ø© Ù„ÙŠ Ø¥Ø°Ø§ Ù‚Ù…Øª Ø¨ØªØµÙÙŠØ© Ø¨Ø¹Ø¶ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª BGP Ø§Ù„ÙˆØ§Ø±Ø¯Ø© Ù…Ù† Ø§Ù„Ù…ÙˆÙØ± Ø¨ØŸ  Ù…Ø§ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø°ÙŠ Ø³ØªÙ†ØªÙ‚Ù„ Ø¨Ù‡ Ø§Ù„Ø­Ø²Ù… Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ© C Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù… D Ø¥Ø°Ø§ Ù‚Ù…Øª Ø¨Ù…Ø¶Ø§Ø¹ÙØ© Ù…Ù‚ÙŠØ§Ø³ IGP Ø¹Ù„Ù‰ Ø£Ø­Ø¯ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù†Ù‚Ù„ØŸ  Ø³ÙˆÙ ØªØ³Ø§Ø¹Ø¯Ù†Ø§ Ø£Ø³Ù…Ø§Ùƒ Ø§Ù„Ù‚Ø±Ø´ ÙÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø£Ø®Ø±Ù‰! <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  Ø§Ø³ØªØ¹Ø±Ø§Ø¶ Ø³Ù…Ùƒ Ø§Ù„Ø³Ù„ÙˆØ± </h2><br>  Ø£Ø³Ù…Ø§Ùƒ Ø§Ù„Ù‚Ø±Ø´ Ù‡ÙŠ Ø£Ø¯Ø§Ø© Ù„Ù†Ù…Ø°Ø¬Ø© Ø§Ù„Ø´Ø¨ÙƒØ©.  Ø§Ù„ØºØ±Ø¶ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù…Ù†Ù‡ Ù‡Ùˆ Ø§Ø®ØªØ¨Ø§Ø± ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ† Ù‚Ø¨Ù„ ØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ø¥Ù„Ù‰ Ø´Ø¨ÙƒØ© Ø§Ù„Ø¥Ù†ØªØ§Ø¬.  ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø³Ù…Ø§Ùƒ Ø§Ù„Ù‚Ø±Ø´ Ø£ÙŠØ¶Ù‹Ø§ Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ø´Ø¨ÙƒØ© ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù†Ù‡.  Ù…Ù† Ø§Ù„ÙˆØ§Ø¶Ø­ Ø£Ù† Ø¹Ù…Ù„ÙŠØ§Øª CI / CD Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø´Ø¨ÙƒØ§Øª ØªÙØªÙ‚Ø± Ø¥Ù„Ù‰ Ø£Ø¯Ø§Ø© Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙƒÙˆÙŠÙ†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©.  Ø³Ù…Ùƒ Ø§Ù„Ø³Ù„ÙˆØ± ÙŠØ­Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©. <br><br>  Ù„Ø§ ÙŠØªØ·Ù„Ø¨ Batfish Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¥Ù„Ù‰ Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØŒ ÙŠÙ‚ÙˆÙ… Batfish Ø¨Ù†Ù…Ø§Ø°Ø¬ Ø³Ù„ÙˆÙƒ Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ø³ØªÙ†Ø§Ø¯Ù‹Ø§ Ø¥Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ù…Ù„ÙØ§Øª ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¬Ù‡Ø§Ø². <br><br>  ÙŠÙ…ÙƒÙ† Ù„Ø³Ù…ÙƒØ© Ø§Ù„Ø¨Ø­Ø±: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ØªØ­Ø¯ÙŠØ¯ Ø­Ø§Ù„Ø© Ø§Ù„Ø¬ÙˆØ§Ø± Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„Ø§Øª Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ© (BGP ØŒ IS-IS ØŒ OSPF) </li><li style=";text-align:right;direction:rtl">  Ø­Ø³Ø§Ø¨ RIB Ù„ÙƒÙ„ Ø¹Ù†ØµØ± Ø´Ø¨ÙƒØ© </li><li style=";text-align:right;direction:rtl">  ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª NTP Ùˆ AAA Ùˆ MTU </li><li style=";text-align:right;direction:rtl">  Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ØªØ­Ø¯ÙŠØ¯ Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ÙˆØµÙˆÙ„ (ACL) ØªÙ…Ù†Ø¹ Ù…Ø±ÙˆØ± Ø­Ø±ÙƒØ© Ù…Ø±ÙˆØ± Ø§Ù„Ø´Ø¨ÙƒØ© (ØªÙ…Ø«ÙŠÙ„ÙŠØ© ØªØªØ¨Ø¹ Ø§Ù„Ø­Ø²Ù…Ø© Ø¹Ù„Ù‰ Cisco ASA) </li><li style=";text-align:right;direction:rtl">  ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ù† Ø·Ø±Ù Ø¥Ù„Ù‰ Ø·Ø±Ù Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¶ÙŠÙÙŠÙ† Ø¯Ø§Ø®Ù„ Ø§Ù„Ø´Ø¨ÙƒØ© </li><li style=";text-align:right;direction:rtl">  Ø¹Ø±Ø¶ Ù…Ø³Ø§Ø± Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ø¨Ø± Ø§Ù„Ø´Ø¨ÙƒØ© (Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ) </li></ul><br><br>  Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Ø£Ø±ÙŠØ³ØªØ§ </li><li style=";text-align:right;direction:rtl">  Ø£Ø±ÙˆØ¨Ø§ </li><li style=";text-align:right;direction:rtl">  AWS (VPCs ØŒ ACLs Ù„Ù„Ø´Ø¨ÙƒØ© ØŒ VPN GW ØŒ NAT GW ØŒ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª GW ØŒ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†) </li><li style=";text-align:right;direction:rtl">  Cisco (NX-OS Ùˆ IOS Ùˆ IOS-XE Ùˆ IOS-XR Ùˆ ASA) </li><li style=";text-align:right;direction:rtl">  Dell force10 </li><li style=";text-align:right;direction:rtl">  Ù…Ø³Ø¨Ùƒ </li><li style=";text-align:right;direction:rtl">  iptables </li><li style=";text-align:right;direction:rtl">  Ø§Ù„Ø¹Ø±Ø¹Ø± (MX ØŒ EX ØŒ QFX ØŒ SRX ØŒ Ø³Ù„Ø³Ù„Ø© T ØŒ PTX) </li><li style=";text-align:right;direction:rtl">  Mrv </li><li style=";text-align:right;direction:rtl">  Ø´Ø¨ÙƒØ§Øª Ø¨Ø§Ù„Ùˆ Ø£Ù„ØªÙˆ </li><li style=";text-align:right;direction:rtl">  Quagga / FRR </li><li style=";text-align:right;direction:rtl">  ÙƒÙˆØ§Ù†ØªØ§ </li><li style=";text-align:right;direction:rtl">  ÙÙŠÙˆØ³ </li></ul><br><img src="https://habrastorage.org/webt/p_/ai/gt/p_aigtayir28gmvf6yxdhec7vkm.png" alt="Ø§Ù„ØµÙˆØ±Ø©"><br><br>  Ø³Ù…ÙƒØ© Ø§Ù„Ø¨Ø­Ø± Ù‡Ùˆ ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø§ÙØ§.  Ù„Ù„Ø¹Ù…Ù„ Ù…Ø±ÙŠØ­Ø© Ù…Ø¹Ù‡Ø§ ØªÙ…Øª ÙƒØªØ§Ø¨Ø© Pybatfish - Ø¨ÙŠØ«ÙˆÙ† SDK. <br><br>  Ø¯Ø¹Ù†Ø§ Ù†Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø©.  Ø³Ø£Ø±ÙŠÙƒÙ… Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª Batfish Ù…Ø¹ Ù…Ø«Ø§Ù„. <br><br><h2 style=";text-align:right;direction:rtl">  Ù…Ø«Ø§Ù„ </h2><br>  Ù†Ø¯ÙŠØ± Ù†Ø¸Ø§Ù…ÙŠÙ† Ù…Ø³ØªÙ‚Ù„ÙŠÙ†: AS 41214 Ùˆ AS 10631. ÙƒÙ…Ø§ IGP ØŒ AS-41214 ÙŠØ³ØªØ®Ø¯Ù… IS-IS ØŒ Ùˆ AS-10631 - OSPF.  Ø¯Ø§Ø®Ù„ ÙƒÙ„ AS ØŒ ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… IBGP-fullmesh.  ØªØ¹Ù„Ù† LDN-CORE-01 Ø¹Ù† Ø¨Ø§Ø¯Ø¦Ø© Ø§Ù„Ø¬ÙˆØ§Ø± Ù„Ù€ BGP 135.65.0.0/19 ØŒ MSK-CORE-01 - 140.0.0.0/24.  ÙŠØ­Ø¯Ø« ØªØ¨Ø§Ø¯Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…Ø³ØªÙ‚Ù„Ø© Ø¹Ù†Ø¯ ØªÙ‚Ø§Ø·Ø¹ HKI-CORE-01 - SPB-CORE-01. <br><br>  <b>HKI-CORE-01 ØŒ STH-CORE-01</b> - Ø£Ø¬Ù‡Ø²Ø© ØªÙˆØ¬ÙŠÙ‡ Junos <br>  <b>LDN-CORE-01 ØŒ AMS-CORE-01 ØŒ SPB-CORE-01 ØŒ MSK-CORE-01</b> - Ø£Ø¬Ù‡Ø²Ø© ØªÙˆØ¬ÙŠÙ‡ Cisco IOS <br><br> <a href=""><img src="https://habrastorage.org/webt/oc/a6/xv/oca6xv1rrtbzkou8autoshzlfte.png"></a> <br><br>  ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ù…Ø¹ Batfish ÙˆØ§Ù„Ø«Ø¹Ø¨Ø§Ù† SDK: <br><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs">docker pull batfish/allinone docker run batfish/allinone docker container <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> -it &lt;container&gt; bash</code> </pre> <br>  ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙƒØªØ¨Ø© Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ Ø¨ÙŠØ«ÙˆÙ†: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">root@ea9a1559d88e:/<span class="hljs-comment"><span class="hljs-comment"># python3 -------------------- &gt;&gt;&gt; from pybatfish.client.commands import bf_logger, bf_init_snapshot &gt;&gt;&gt; from pybatfish.question.question import load_questions &gt;&gt;&gt; from pybatfish.question import bfq &gt;&gt;&gt; import logging &gt;&gt;&gt; bf_logger.setLevel(logging.ERROR) &gt;&gt;&gt; load_questions() &gt;&gt;&gt; bf_init_snapshot('tmp/habr') 'ss_e8065858-a911-4f8a-b020-49c9b96d0381'</span></span></code> </pre> <br>  <b>bf_init_snapshot ('tmp / habr')</b> - ØªÙ‚ÙˆÙ… Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø¨ØªØ­Ù…ÙŠÙ„ Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ† ÙÙŠ Batfish ÙˆØªØ¹Ø¯Ù‡Ø§ Ù„Ù„ØªØ­Ù„ÙŠÙ„. <br><br>  <b>/ tmp / habr</b> - Ø¯Ù„ÙŠÙ„ Ù…Ø¹ Ù…Ù„ÙØ§Øª ØªÙƒÙˆÙŠÙ† Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡. <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">root@ea9a1559d88e:/tmp/habr<span class="hljs-comment"><span class="hljs-comment"># tree . `-- configs |-- AMS-CORE-01.cfg |-- HKI-CORE-01.cfg |-- LDN-CORE-01.cfg |-- MSK-CORE-01.cfg |-- SPB-CORE-01.cfg `-- STH-CORE-01.cfg 1 directory, 6 files</span></span></code> </pre> <br>  Ø§Ù„Ø¢Ù† Ø¯Ø¹ÙˆÙ†Ø§ Ù†Ø­Ø¯Ø¯ Ø­Ø§Ù„Ø© Ø¬Ù„Ø³Ø§Øª BGP Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ LDN-CORE-01: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">&gt;&gt;&gt; bgp_peers = bfq.bgpSessionStatus(nodes=<span class="hljs-string"><span class="hljs-string">'LDN-CORE-01'</span></span>).answer().frame() &gt;&gt;&gt; bgp_peers Node VRF Local_AS Local_IP Remote_AS Remote_Node Remote_IP Session_Type Est_Status 0 ldn-core-01 default 41214 172.20.20.1 41214 sth-core-01 172.20.20.2 IBGP EST 1 ldn-core-01 default 41214 172.20.20.1 41214 ams-core-01 172.20.20.3 IBGP EST 2 ldn-core-01 default 41214 172.20.20.1 41214 hki-core-01 172.20.20.4 IBGP EST</code> </pre><br>  Ø­Ø³Ù†Ø§ ÙƒÙŠÙØŸ  ÙŠØ¨Ø¯Ùˆ ÙˆÙƒØ£Ù†Ù‡ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø©ØŸ <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">LDN-CORE-01<span class="hljs-comment"><span class="hljs-comment">#show ip bgp summary â€¦ Neighbor V AS MsgRcvd MsgSent TblVer InQ OutQ Up/Down State/PfxRcd 172.20.20.2 4 41214 629 669 9 0 0 00:56:51 0 172.20.20.3 4 41214 826 827 9 0 0 01:10:18 0 172.20.20.4 4 41214 547 583 9 0 0 00:49:24 1</span></span></code> </pre><br>  Ø§Ù„Ø¢Ù† Ø¯Ø¹Ù†Ø§ Ù†Ø±Ù‰ Ù…Ø§ Ù‡ÙŠ Ø·Ø±Ù‚ IS-IS Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ RIB Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ HKI-CORE-01 ÙˆÙÙ‚Ù‹Ø§ Ù„Ù€ Batfish: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">&gt;&gt;&gt; isis_routes = bfq.routes(nodes=<span class="hljs-string"><span class="hljs-string">'HKI-CORE-01'</span></span>, protocols=<span class="hljs-string"><span class="hljs-string">'isis'</span></span>).answer().frame() &gt;&gt;&gt; isis_routes Node VRF Network Next_Hop Next_Hop_IP Protocol Admin_Distance Metric Tag 0 hki-core-01 default 172.20.20.3/32 ams-core-01 10.0.0.6 isisL2 18 20 None 1 hki-core-01 default 172.20.20.1/32 ams-core-01 10.0.0.6 isisL2 18 30 None 2 hki-core-01 default 172.20.20.2/32 sth-core-01 10.0.0.4 isisL2 18 10 None 3 hki-core-01 default 172.20.20.1/32 sth-core-01 10.0.0.4 isisL2 18 30 None 4 hki-core-01 default 10.0.0.0/31 sth-core-01 10.0.0.4 isisL2 18 20 None 5 hki-core-01 default 10.0.0.2/31 ams-core-01 10.0.0.6 isisL2 18 20 None</code> </pre><br>  ÙÙŠ Ø³Ø·Ø± Ø§Ù„Ø£ÙˆØ§Ù…Ø±: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">showroute@HKI-CORE-01<span class="hljs-comment"><span class="hljs-comment"># run show route table inet.0 protocol isis inet.0: 18 destinations, 18 routes (18 active, 0 holddown, 0 hidden) + = Active Route, - = Last Active, * = Both 10.0.0.0/31 *[IS-IS/18] 00:51:25, metric 20 &gt; to 10.0.0.4 via ge-0/0/0.0 10.0.0.2/31 *[IS-IS/18] 00:51:45, metric 20 &gt; to 10.0.0.6 via ge-0/0/1.0 172.20.20.1/32 *[IS-IS/18] 00:51:25, metric 30 to 10.0.0.4 via ge-0/0/0.0 &gt; to 10.0.0.6 via ge-0/0/1.0 172.20.20.2/32 *[IS-IS/18] 00:51:25, metric 10 &gt; to 10.0.0.4 via ge-0/0/0.0 172.20.20.3/32 *[IS-IS/18] 00:51:45, metric 20 &gt; to 10.0.0.6 via ge-0/0/1.0</span></span></code> </pre><br>  Ø¹Ø¸ÙŠÙ…!  Ø£ÙØªØ±Ø¶ Ø£Ù†Ù‡ Ø£ØµØ¨Ø­ Ø£ÙƒØ«Ø± ÙˆØ¶ÙˆØ­Ø§ Ù„Ùƒ Ø£Ù† Ù‡Ù†Ø§Ùƒ Ø³Ù…ÙƒØ© Ø§Ù„Ø¨Ø§ØªÙÙŠØ´. <br><br>  ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ù‚Ø§Ù„ ØŒ ÙƒØªØ¨Øª Ø£Ù†Ù‡ ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Batfish Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„ØªÙƒÙˆÙŠÙ† Ù‚Ø¨Ù„ Ø¥Ø¬Ø±Ø§Ø¦Ù‡Ø§ Ø¹Ù„Ù‰ Ø´Ø¨ÙƒØ© "Ø§Ù„Ù…Ø¹Ø±ÙƒØ©".  Ø§Ù„Ø¢Ù† Ø£Ù‚ØªØ±Ø­ Ø¯Ø±Ø§Ø³Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ <b>RobotFramework</b> .  Ù„Ù‡Ø°Ø§ ØŒ ÙƒØªØ¨Øª ÙˆØ­Ø¯Ø© ØµØºÙŠØ±Ø© Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù„Ù‰ PyBatfish ØªØ³Ù…Ø­ Ù„Ùƒ Ø¨Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ØªØ­Ø¯ÙŠØ¯ Ø­Ø§Ù„Ø© Ø¬Ù„Ø³Ø§Øª BGP Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø¨ÙƒØ© </li><li style=";text-align:right;direction:rtl">  ØªØ­Ø¯ÙŠØ¯ Ø­Ø§Ù„Ø© Ø§Ù„Ø¬ÙˆØ§Ø± IS-IS </li><li style=";text-align:right;direction:rtl">  ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ù† Ø·Ø±Ù Ø¥Ù„Ù‰ Ø·Ø±Ù Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù‚Ø¯ Ø¹Ù„Ù‰ Ø´Ø¨ÙƒØ© Ù…Ø¹ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠ Ø§Ù„ØªØªØ¨Ø¹ </li><li style=";text-align:right;direction:rtl">  ØªØ­Ø¯ÙŠØ¯ Ø­Ø¬Ù… RIB Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ ØªÙˆØ¬ÙŠÙ‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ù…Ø¹ÙŠÙ† </li></ul><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">LibraryBatfish.py</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> logging <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pybatfish.client.commands <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> bf_logger, bf_init_snapshot <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pybatfish.question.question <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> load_questions, list_questions <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pybatfish.question <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> bfq <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pybatfish.datamodel.flow <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> HeaderConstraints, PathConstraints <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> robot.api <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> logger <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LibraryBatfish</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, snapshot)</span></span></span><span class="hljs-function">:</span></span> bf_logger.setLevel(logging.ERROR) load_questions() bf_init_snapshot(snapshot) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check_bgp_peers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> not_established_peers = list() bgp_peers = bfq.bgpSessionStatus().answer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> peer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> bgp_peers.rows: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> peer.get(<span class="hljs-string"><span class="hljs-string">'Established_Status'</span></span>) != <span class="hljs-string"><span class="hljs-string">'ESTABLISHED'</span></span>: not_established_peers.append(dict.fromkeys(peer.get(<span class="hljs-string"><span class="hljs-string">'Local_IP'</span></span>).split(), peer.get(<span class="hljs-string"><span class="hljs-string">'Remote_IP'</span></span>).get(<span class="hljs-string"><span class="hljs-string">'value'</span></span>))) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(not_established_peers) == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: logger.warn(<span class="hljs-string"><span class="hljs-string">'BGP neighbors are not in an established state:'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> neighborship <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> not_established_peers: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> peer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> neighborship: logger.warn(<span class="hljs-string"><span class="hljs-string">'{} - {}'</span></span>.format(peer, neighborship.get(peer))) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check_routes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, node, protocol)</span></span></span><span class="hljs-function">:</span></span> routes = bfq.routes(nodes=node, protocols=protocol).answer() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> len(routes.rows) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check_isis_neighbors</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, description)</span></span></span><span class="hljs-function">:</span></span> not_isis_enabled_links = list() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> link <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self._get_isis_enabled_links(description): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> link <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self._get_isis_neighbors(): not_isis_enabled_links.append(link) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(not_isis_enabled_links) == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> link <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> not_isis_enabled_links: logger.warn(<span class="hljs-string"><span class="hljs-string">'{} {} has no IS-IS neighbor'</span></span>.format(link.get(<span class="hljs-string"><span class="hljs-string">'hostname'</span></span>), link.get(<span class="hljs-string"><span class="hljs-string">'interface'</span></span>))) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ping</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, source_ip, destination_ip)</span></span></span><span class="hljs-function">:</span></span> ip_owners = bfq.ipOwners().answer() traceroute = self._get_traceroute_status(source_ip, destination_ip, ip_owners) reverse_traceroute = self._get_traceroute_status(destination_ip, source_ip, ip_owners) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> traceroute == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> reverse_traceroute == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: self._show_trace(source_ip, destination_ip, ip_owners) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: logger.warn(<span class="hljs-string"><span class="hljs-string">'Ping {} -&gt; {} failed'</span></span>.format(source_ip, destination_ip)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_get_traceroute_status</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, source_ip, destination_ip, addresses)</span></span></span><span class="hljs-function">:</span></span> tracert = self._unidirectional_virtual_traceroute(source_ip, destination_ip, addresses) isAccepted = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> tracert != <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> trace <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> tracert.rows[<span class="hljs-number"><span class="hljs-number">0</span></span>].get(<span class="hljs-string"><span class="hljs-string">'Traces'</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> trace.get(<span class="hljs-string"><span class="hljs-string">'disposition'</span></span>) != <span class="hljs-string"><span class="hljs-string">'ACCEPTED'</span></span>: isAccepted = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> isAccepted == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_get_paths</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, source_ip, destination_ip, addresses)</span></span></span><span class="hljs-function">:</span></span> tracert = self._unidirectional_virtual_traceroute(source_ip, destination_ip, addresses) traces = tracert.rows[<span class="hljs-number"><span class="hljs-number">0</span></span>].get(<span class="hljs-string"><span class="hljs-string">'Traces'</span></span>) paths = dict() path_number = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> trace <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> traces: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> trace.get(<span class="hljs-string"><span class="hljs-string">'disposition'</span></span>) == <span class="hljs-string"><span class="hljs-string">'ACCEPTED'</span></span>: path = list() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> hop <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> trace.get(<span class="hljs-string"><span class="hljs-string">'hops'</span></span>): path.append(hop.get(<span class="hljs-string"><span class="hljs-string">'node'</span></span>).get(<span class="hljs-string"><span class="hljs-string">'name'</span></span>)) paths[path_number] = path path_number += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> paths <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_unidirectional_virtual_traceroute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, source_ip, destination_ip, addresses)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> address <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> addresses.rows: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> address.get(<span class="hljs-string"><span class="hljs-string">'IP'</span></span>) == source_ip: node = address.get(<span class="hljs-string"><span class="hljs-string">'Node'</span></span>).get(<span class="hljs-string"><span class="hljs-string">'name'</span></span>) int = address.get(<span class="hljs-string"><span class="hljs-string">'Interface'</span></span>) headers = HeaderConstraints(srcIps=source_ip, dstIps=destination_ip, ipProtocols=[<span class="hljs-string"><span class="hljs-string">'ICMP'</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: tracert = bfq.traceroute(startLocation=<span class="hljs-string"><span class="hljs-string">"{}[{}]"</span></span>.format(node,int), headers=headers).answer() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tracert <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: logger.warn(<span class="hljs-string"><span class="hljs-string">'{} address has not been found'</span></span>.format(source_ip)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_get_isis_enabled_links</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, description=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'core-link'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> isis_enabled_links = list() interfaces = bfq.interfaceProperties().answer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> int <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> interfaces.rows: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> int.get(<span class="hljs-string"><span class="hljs-string">'Description'</span></span>) != <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> description <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> int.get(<span class="hljs-string"><span class="hljs-string">'Description'</span></span>): isis_enabled_links.append({<span class="hljs-string"><span class="hljs-string">'hostname'</span></span> : int.get(<span class="hljs-string"><span class="hljs-string">'Interface'</span></span>).get(<span class="hljs-string"><span class="hljs-string">'hostname'</span></span>), <span class="hljs-string"><span class="hljs-string">'interface'</span></span> : int.get(<span class="hljs-string"><span class="hljs-string">'Interface'</span></span>).get(<span class="hljs-string"><span class="hljs-string">'interface'</span></span>)}) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isis_enabled_links <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_get_isis_neighbors</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> isis_neighbors = list() isis_adjacencies = bfq.edges(edgeType=<span class="hljs-string"><span class="hljs-string">'isis'</span></span>).answer() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> neighbor <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> isis_adjacencies.rows: isis_neighbors.append(neighbor.get(<span class="hljs-string"><span class="hljs-string">'Interface'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isis_neighbors <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_show_trace</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, source_ip, destination_ip, addresses)</span></span></span><span class="hljs-function">:</span></span> logger.console(<span class="hljs-string"><span class="hljs-string">'\nTraceroute to {} from {}'</span></span>.format(destination_ip, source_ip)) paths = self._get_paths(source_ip, destination_ip, addresses) path_num = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> path <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> paths: n = <span class="hljs-number"><span class="hljs-number">1</span></span> logger.console(<span class="hljs-string"><span class="hljs-string">'\n Path N{}'</span></span>.format(path_num)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> hop <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> paths.get(path): logger.console(<span class="hljs-string"><span class="hljs-string">' {} {}'</span></span>.format(n, hop)) n += <span class="hljs-number"><span class="hljs-number">1</span></span> path_num += <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre><br></div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">batfish-test.robot</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/j8/fe/dt/j8fedtxnppjoyed3l4mkvgijmgw.png" alt="Ø§Ù„ØµÙˆØ±Ø©"><br></div></div><br><h2 style=";text-align:right;direction:rtl">  Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ N1 </h2><br> <a href=""><img src="https://habrastorage.org/webt/oc/a6/xv/oca6xv1rrtbzkou8autoshzlfte.png"></a> <br><br>  ØªØ­Øª Ø³ÙŠØ·Ø±ØªÙŠ Ù„Ø§ ØªØ²Ø§Ù„ Ù†ÙØ³ Ø§Ù„Ø´Ø¨ÙƒØ©.  Ø§ÙØªØ±Ø¶ Ø£Ù†Ù†ÙŠ Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ ØªØ±ØªÙŠØ¨ Ø§Ù„ÙÙ„Ø§ØªØ± Ø¹Ù„Ù‰ Ø­Ø¯ÙˆØ¯ <b>AS 41214</b> Ùˆ <b>AS 10631</b> ÙˆØ­Ø¸Ø±Ù‡Ø§ ÙÙŠ Ø­Ø²Ù… Ø§Ù„ÙˆØµÙ„Ø§Øª Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¹Ù†Ø§ÙˆÙŠÙ† IP Ù„Ù„Ù…ØµØ¯Ø± Ø£Ùˆ Ø§Ù„ÙˆØ¬Ù‡Ø© Ù…Ù† Ù†Ø·Ø§Ù‚ BOGONS. <br><br>  Ù‚Ù… Ø¨Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù‚Ø¨Ù„ Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª. <br><br><img src="https://habrastorage.org/webt/83/7m/ev/837mevcx8y6uqg_ydag7giziw3y.png" alt="Ø§Ù„ØµÙˆØ±Ø©"><br><br>  Ù…Ø±Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª. <br><br>  Ø³Ù†Ø¬Ø±ÙŠ ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ù„Ù‰ ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ <b>HKI-CORE-01</b> - /tmp/habr/configs/HKI-CORE-01.cfg: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 0.0.0.0/8 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 10.0.0.0/8 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 100.64.0.0/10 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 127.0.0.0/8 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 169.254.0.0/16 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 172.16.0.0/12 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 192.0.2.0/24 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 192.88.99.0/24 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 192.168.0.0/16 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 198.18.0.0/15 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 198.51.100.0/24 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 203.0.113.0/24 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 224.0.0.0/4 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 from address 240.0.0.0/4 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM010 <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> discard <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term PERMIT-IP-ANY-ANY <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> accept <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> interfaces ge-0/0/2.0 family inet filter input BOGONS <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> interfaces ge-0/0/2.0 family inet filter output BOGONS</code> </pre><br>  Ù‚Ù… Ø¨Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±. <br><br><img src="https://habrastorage.org/webt/ef/y_/gn/efy_gnibn9qy2sbfxyiq_iysft0.png"><br><br>  Ù„Ù‚Ø¯ ÙƒÙ†Øª Ù‚Ø±ÙŠØ¨Ù‹Ø§ Ø¬Ø¯Ù‹Ø§ ØŒ ÙˆÙ„ÙƒÙ† ÙƒÙ…Ø§ ÙŠÙˆØ¶Ø­ Ù†Ø§ØªØ¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ØŒ Ø¨Ø¹Ø¯ Ø¥Ø¬Ø±Ø§Ø¡ ØªØºÙŠÙŠØ±Ø§Øª BGP ØŒ Ù„Ù… ÙŠÙƒÙ† Ø§Ù„Ø­ÙŠ 192.168.30.0 - 192.168.30.1 ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£Ø³ÙŠØ³ -&gt; ÙˆÙ†ØªÙŠØ¬Ø© Ù„Ø°Ù„Ùƒ ØŒ ÙÙ‚Ø¯ Ø§ØªØµØ§Ù„ IP Ø¨ÙŠÙ† Ø§Ù„Ù†Ù‚Ø§Ø· 135.65.0.1 &lt;-&gt; 140.0.0.1.  Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø®Ø·Ø£ØŸ  Ù†Ù†Ø¸Ø± Ø¨Ø¹Ù†Ø§ÙŠØ© ÙÙŠ ØªÙƒÙˆÙŠÙ† <b>HKI-CORE-01</b> ÙˆÙ†Ø±Ù‰ Ø£Ù† Ù†Ø¸ÙŠØ± eBGP Ù…Ø«Ø¨Øª Ø¹Ù„Ù‰ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø®Ø§ØµØ©: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">showroute@HKI-CORE-01<span class="hljs-comment"><span class="hljs-comment"># show interfaces ge-0/0/2 | display set set interfaces ge-0/0/2 description SPB-CORE-01 set interfaces ge-0/0/2 unit 0 family inet filter input BOGONS set interfaces ge-0/0/2 unit 0 family inet filter output BOGONS set interfaces ge-0/0/2 unit 0 family inet address 192.168.30.0/31</span></span></code> </pre><br>  Ø§Ù„Ø®Ù„Ø§ØµØ©: Ù…Ù† Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠ ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¹Ù†Ø¯ Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ Ø£Ùˆ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„ÙØ±Ø¹ÙŠØ© 192.168.30.0/31 Ø¥Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡. <br><br>  Ø³Ø£Ø¶ÙŠÙ Ø´Ø¨ÙƒØ© Ø¹Ù†Ø¯ Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ Ø¥Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡ ØŒ Ø³Ø£Ù‚ÙˆÙ… Ø¨ØªØ­Ø¯ÙŠØ« /tmp/habr/configs/HKI-CORE-01.cfg Ù…Ø±Ø© Ø£Ø®Ø±Ù‰: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM005 from address 192.168.0.0/31 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> firewall family inet filter BOGONS term TERM005 <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> accept</code> </pre><br>  Ù‚Ù… Ø¨Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±. <br><br><img src="https://habrastorage.org/webt/83/7m/ev/837mevcx8y6uqg_ydag7giziw3y.png"><br><br>  Ø§Ù„Ø¢Ù† Ù„Ù† ØªÙ…Ø± Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ø§Ù„Ù…Ø±ØºÙˆØ¨ ÙÙŠÙ‡Ø§ Ù…Ù† Ø®Ù„Ø§Ù„ ÙˆØ§Ø¬Ù‡Ø© ebgp AS 41214 - AS 10631. ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¬Ø±Ø§Ø¡ ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ø£Ù…Ø§Ù† Ø¯ÙˆÙ† Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ø¹ÙˆØ§Ù‚Ø¨. <br><br><h2 style=";text-align:right;direction:rtl">  Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ N2 </h2><br> <a href=""><img src="https://habrastorage.org/webt/zk/zy/aw/zkzyawxfphcnrmi2dsrd2xyz2ik.png"></a> <br><br>  Ø£Ø­ØªØ§Ø¬ Ù‡Ù†Ø§ Ø¥Ù„Ù‰ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ© 150.0.0.0/24 Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ <b>MSK-CORE-01</b> ÙˆØ¶Ù…Ø§Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù†Ù‚Ø·ØªÙŠÙ† 135.65.0.1 Ùˆ 150.0.0.1 <br><br>  Ø£Ù‚ÙˆÙ… Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø³Ø·Ø± Ø§Ù„ØªØ§Ù„ÙŠØ© Ø¥Ù„Ù‰ ØªÙƒÙˆÙŠÙ† Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ MSK-CORE-01 - tmp / habr / configs / MSK-CORE-01.cfg: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">interface Loopback2 ip address 150.0.0.1 255.255.255.255 ! ip route 150.0.0.0 255.255.255.0 Null0 ! router bgp 10631 ! address-family ipv4 network 150.0.0.0 mask 255.255.255.0 !</code> </pre><br>  ÙŠÙ…ÙƒÙ†Ù†ÙŠ ØªØºÙŠÙŠØ± Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù†ØµÙŠ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">git diff HEAD~ diff --git a/batfish-robot.robot b/batfish-robot.robot index 8d963c5..ce8cb6a 100644 --- a/batfish-robot.robot +++ b/batfish-robot.robot @@ -5,7 +5,7 @@ Library LibraryBatfish.py tmp/habr <span class="hljs-variable"><span class="hljs-variable">${ISIS-ENABLED-LINK-DESCRIPTION}</span></span> ISIS-LINK <span class="hljs-variable"><span class="hljs-variable">${NODE}</span></span> HKI-CORE-01 <span class="hljs-variable"><span class="hljs-variable">${PROTOCOL}</span></span> ebgp -<span class="hljs-variable"><span class="hljs-variable">${RIB-SIZE}</span></span> 1 +<span class="hljs-variable"><span class="hljs-variable">${RIB-SIZE}</span></span> 2 *** Test Cases *** ISIS @@ -27,3 +27,8 @@ Ping [Documentation] Test end-to-end ICMP connectivity &amp; show traceroute <span class="hljs-variable"><span class="hljs-variable">${result}</span></span>= Ping 135.65.0.1 140.0.0.1 Should Be Equal As Integers <span class="hljs-variable"><span class="hljs-variable">${result}</span></span> 1 + +Ping2 + [Documentation] Test end-to-end ICMP connectivity &amp; show traceroute + <span class="hljs-variable"><span class="hljs-variable">${result}</span></span>= Ping 135.65.0.1 150.0.0.1 + Should Be Equal As Integers <span class="hljs-variable"><span class="hljs-variable">${result}</span></span> 1</code> </pre><br>  <i>Ø§Ù„Ø¢Ù† Ø£ØªÙˆÙ‚Ø¹ Ø±Ø¤ÙŠØ© Ø·Ø±ÙŠÙ‚ÙŠÙ† eBGP Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ HKI-CORE-01 ØŒ ØªØªÙ… Ø¥Ø¶Ø§ÙØ© ÙØ­Øµ Ø§ØªØµØ§Ù„ Ø¥Ø¶Ø§ÙÙŠ</i> <br><br><img src="https://habrastorage.org/webt/0m/lo/1a/0mlo1aaedcfzwisajf7mz34mvai.png"><br><br>  Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨ÙŠÙ† 135.65.0.1 Ùˆ 150.0.0.1 ØŒ Ø¹Ù„Ø§ÙˆØ© Ø¹Ù„Ù‰ Ø°Ù„Ùƒ ØŒ ÙŠÙˆØ¬Ø¯ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ <b>HKI-CORE-01</b> Ù…Ø³Ø§Ø± eBGP ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· ØŒ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ù…Ø³Ø§Ø±ÙŠÙ†. <br><br>  ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø­ØªÙˆÙŠØ§Øª RIB Ø¹Ù„Ù‰ <b>HKI-CORE-01</b> Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© ØªÙƒÙˆÙŠÙ† Ø¬Ø¯ÙŠØ¯ Ø¥Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ <b>MSK-CORE-01</b> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">showroute@HKI-CORE-01<span class="hljs-comment"><span class="hljs-comment"># run show route table inet.0 protocol bgp inet.0: 20 destinations, 20 routes (19 active, 0 holddown, 1 hidden) + = Active Route, - = Last Active, * = Both 135.65.0.0/19 *[BGP/170] 02:25:38, MED 0, localpref 100, from 172.20.20.1 AS path: I, validation-state: unverified &gt; to 10.0.0.4 via ge-0/0/0.0 to 10.0.0.6 via ge-0/0/1.0 140.0.0.0/24 *[BGP/170] 01:38:02, localpref 100 AS path: 10631 I, validation-state: unverified &gt; to 192.168.30.1 via ge-0/0/2.0 showroute@HKI-CORE-01# run show route table inet.0 protocol bgp hidden detail inet.0: 20 destinations, 20 routes (19 active, 0 holddown, 1 hidden) 150.0.0.0/24 (1 entry, 0 announced) BGP /-101 Next hop type: Router, Next hop index: 563 Address: 0x940f43c Next-hop reference count: 4 Source: 192.168.30.1 Next hop: 192.168.30.1 via ge-0/0/2.0, selected Session Id: 0x9 State: &lt;Hidden Ext&gt; Local AS: 41214 Peer AS: 10631 Age: 1:42:03 Validation State: unverified Task: BGP_10631.192.168.30.1+179 AS path: 10631 I Localpref: 100 Router ID: 10.68.1.1 Hidden reason: rejected by import policy</span></span></code> </pre><br>  Ù„Ø§Ø­Ø¸ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù„Ù„Ø¨Ø§Ø¯Ø¦Ø§Øª Ø§Ù„ÙˆØ§Ø±Ø¯Ø© Ù…Ù† <b>SPB-CORE-01</b> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">set</span></span> protocols bgp group AS10631 import FROM-AS10631 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> protocols bgp group AS10631 neighbor 192.168.30.1 description SPB-CORE-01 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> protocols bgp group AS10631 neighbor 192.168.30.1 peer-as 10631 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> policy-options policy-statement FROM-AS10631 term TERM010 from route-filter 140.0.0.0/24 exact <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> policy-options policy-statement FROM-AS10631 term TERM010 <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> accept <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> policy-options policy-statement FROM-AS10631 term DENY <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> reject</code> </pre><br>  Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø³Ù…Ø§Ø­ 150.0.0.0/24 Ù…ÙÙ‚ÙˆØ¯.  Ø¥Ø¶Ø§ÙØªÙ‡ Ø¥Ù„Ù‰ ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙˆØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">showroute@HKI-CORE-01<span class="hljs-comment"><span class="hljs-comment"># show | compare [edit policy-options policy-statement FROM-AS10631 term TERM010 from] route-filter 140.0.0.0/24 exact { ... } + route-filter 150.0.0.0/24 exact; [edit]</span></span></code> </pre><br><img src="https://habrastorage.org/webt/1j/yu/xk/1jyuxk-xbg4zvwcraua6o0p9hwm.png"><br><br>  Ø¹Ø¸ÙŠÙ… ØŒ Ù‡Ù†Ø§Ùƒ Ø§ØªØµØ§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø´Ø¨ÙƒØ§Øª ØŒ ÙŠØªÙ… Ø§Ø¬ØªÙŠØ§Ø² Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª!  Ø­ØªÙ‰ ØªØªÙ…ÙƒÙ† Ù…Ù† Ø¥Ø¬Ø±Ø§Ø¡ Ù‡Ø°Ù‡ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ù„Ù‰ Ø¹Ù…Ù„ Ø´Ø¨ÙƒØ© "Ø§Ù„Ù‚ØªØ§Ù„". <br><br><h2 style=";text-align:right;direction:rtl">  Ø§Ù„Ø®Ø§ØªÙ…Ø© </h2><br>  ÙÙŠ Ø±Ø£ÙŠÙŠ ØŒ Ø¨Ø§ØªÙÙŠØ´ Ù‡Ùˆ Ø£Ø¯Ø§Ø© Ù‚ÙˆÙŠØ© Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†Ø§Øª Ù‡Ø§Ø¦Ù„Ø©.  Ø¬Ø±Ø¨Ù‡Ø§ ÙˆØ§Ù†Ø¸Ø± Ù„Ù†ÙØ³Ùƒ. <br><br>  Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø«ÙŠØ±Ø§Ù‹ Ù„Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ù„Ùƒ - Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ù‚ØµÙŠØ±Ø© ØŒ Ø³ÙŠØ³Ø¹Ø¯ Ù…Ø·ÙˆØ±Ùˆ Batfish Ø¨Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø© ÙˆØ¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¨Ø³Ø±Ø¹Ø©. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">batfish-org.slack.com</a> <br><br>  Ø´ÙƒØ±Ø§ Ù„Ø§Ù‡ØªÙ…Ø§Ù…ÙƒÙ… <br><br><h2 style=";text-align:right;direction:rtl">  Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.batfish.org</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.youtube.com/channel/UCA-OUW_3IOt9U_s60KvmJYA</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github.com/batfish/batfish</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">media.readthedocs.org/pdf/pybatfish/latest/pybatfish.pdf</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">github.com/showroute/batfish-habr</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar441532/">https://habr.com/ru/post/ar441532/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar441522/index.html">Ù…Ù„Ø®Øµ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø«ÙŠØ±Ø© Ù„Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­Ù…ÙˆÙ„ Ø±Ù‚Ù… 287 (18 ÙØ¨Ø±Ø§ÙŠØ± - 24 ÙØ¨Ø±Ø§ÙŠØ±)</a></li>
<li><a href="../ar441524/index.html">Ù†ØªØ§Ø¦Ø¬ Ø¯Ø±Ø§Ø³Ø© Ø¬Ø¯ÙŠØ¯Ø©: Ø²Ø±Ø¹ Ù†Ø®Ø§Ø¹ Ø§Ù„Ø¹Ø¸Ù… ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ¨Ø·Ø¦ Ø§Ù„Ø´ÙŠØ®ÙˆØ®Ø©</a></li>
<li><a href="../ar441526/index.html">Ø¹ÙˆØ§Ù…Ù„ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ†</a></li>
<li><a href="../ar441528/index.html">ÙƒÙŠÙ ØªØ­ÙˆÙ„Øª Ø­ÙŠØ§ØªÙŠ Ø¥Ù„Ù‰ ÙƒØªØ§Ø¨ ÙƒØ§ÙÙƒØ§</a></li>
<li><a href="../ar441530/index.html">Ø³ÙŠØªÙ… Ø¥Ø·Ù„Ø§Ù‚ SDN ÙÙŠ Ø§Ù„ÙØ¶Ø§Ø¡: Ù„Ù…Ø§Ø°Ø§ Ù‡Ø°Ø§ Ù…Ø·Ù„ÙˆØ¨</a></li>
<li><a href="../ar441534/index.html">Ù…ÙˆØ§Ø²Ù† Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø£ÙˆØ±ÙƒØ³ØªØ±Ø§</a></li>
<li><a href="../ar441536/index.html">Ø£ØµÙ†Ø§Ù Ù…Ù† SIMD</a></li>
<li><a href="../ar441538/index.html">Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ù…Ø³ØªÙˆØ¯Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© ÙˆØ§Ù„Ø³Ø­Ø§Ø¨Ø©</a></li>
<li><a href="../ar441540/index.html">Vue mixins ØŒ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØµØ±ÙŠØ­Ø© (Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ Ù…Ù† Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ù„Ù…Ø¹Ø¯Ù„Ø§Øª BEM)</a></li>
<li><a href="../ar441546/index.html">Hayabusa-2 "ØªØ·Ø±Ù‚ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø© Ø§Ù„ÙƒÙˆÙŠÙƒØ¨</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>