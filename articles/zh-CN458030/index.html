<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😴 👃🏾 🧦 功能性JavaScript：查找数组元素和.reduce（）方法的算术平均值的五种方法 🗾 👨🏿‍🤝‍👨🏼 🈳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="遍历数组的方法类似于“启动药物”（当然，它们不是药物；我并不是说药物是好药；它们只是一种比喻）。 因此，许多人“坐下来”进行函数式编程。 问题是它们非常方便。 此外，这些方法大多数都很容易理解。 .map()和.filter()仅接受一个回调参数，并允许您解决简单的问题。 但是，感觉到.reduce...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>功能性JavaScript：查找数组元素和.reduce（）方法的算术平均值的五种方法</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/458030/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">遍历数组的方法</a>类似于“启动药物”（当然，它们不是药物；我并不是说药物是好药；它们只是一种比喻）。 因此，许多人“坐下来”进行函数式编程。 问题是它们非常方便。 此外，这些方法大多数都很容易理解。  <code>.map()</code>和<code>.filter()</code>仅接受一个回调参数，并允许您解决简单的问题。 但是，感觉到<code>.reduce()</code>方法给许多人带来了一些困难。 要了解它会有点困难。 <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/zd/ig/jp/zdigjpelbgmyf4qdprvkrxo5bu4.png"></a> <br><a name="habracut"></a><br> 我已经<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">写了</a>关于为什么我认为<code>.reduce()</code>会带来很多问题的文章。 部分原因在于许多手册仅在处理数字时演示了<code>.reduce()</code>的使用。 因此，我写了关于使用<code>.reduce()</code>可以解决多少个不暗示算术运算的任务。 但是，如果您绝对需要使用数字怎么办？ <br><br>  <code>.reduce()</code>典型用法看起来像是计算数组元素的算术平均值。 乍一看，此任务似乎没有什么特别之处。 但是她不是那么简单。 事实是，在计算平均值之前，您需要找到以下指标： <br><br><ol><li> 数组元素值的总数。 </li><li> 数组的长度。 </li></ol><br> 找出所有这些非常简单。 而且，计算数字数组的平均值也不是一件容易的事。 这是一个基本示例： <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">average</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">nums</span></span></span><span class="hljs-function">) </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nums.reduce(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) =&gt;</span></span> (a + b)) / nums.length; }</code> </pre> <br> 如您所见，这里没有特殊的理解。 但是，如果您必须使用更复杂的数据结构，则任务将变得更加困难。 如果我们有一组对象怎么办？ 如果该数组中的某些对象需要过滤怎么办？ 如果需要从对象中提取某些数值该怎么办？ 在这种情况下，计算数组元素的平均值已经有点复杂了。 <br><br> 为了解决这个问题，我们将解决培训问题（它是基于FreeCodeCamp的任务）。 我们将以五种不同的方式解决它。 它们每个都有自己的优点和缺点。 对这5种解决此问题的方法的分析将显示JavaScript的灵活性。 我希望对解决方案的分析能为您在实际项目中如何使用<code>.reduce()</code>提供参考。 <br><br><h2>  <font color="#3AC1EF">任务概述</font> </h2><br> 假设我们有一个描述维多利亚时代的lang语表达式的对象数组。 您需要过滤掉在Google图书中找不到的那些表达式（相应对象的<code>found</code>属性为<code>false</code> ），并为这些表达式的受欢迎程度找到一个平均评分。 此类数据如下所示（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">从此处获取</a> ）： <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> victorianSlang = [           term: <span class="hljs-string"><span class="hljs-string">'doing the bear'</span></span>,        <span class="hljs-attr"><span class="hljs-attr">found</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,        <span class="hljs-attr"><span class="hljs-attr">popularity</span></span>: <span class="hljs-number"><span class="hljs-number">108</span></span>,    },           <span class="hljs-attr"><span class="hljs-attr">term</span></span>: <span class="hljs-string"><span class="hljs-string">'katterzem'</span></span>,        <span class="hljs-attr"><span class="hljs-attr">found</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,        <span class="hljs-attr"><span class="hljs-attr">popularity</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>,    },           <span class="hljs-attr"><span class="hljs-attr">term</span></span>: <span class="hljs-string"><span class="hljs-string">'bone shaker'</span></span>,        <span class="hljs-attr"><span class="hljs-attr">found</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,        <span class="hljs-attr"><span class="hljs-attr">popularity</span></span>: <span class="hljs-number"><span class="hljs-number">609</span></span>,    },           <span class="hljs-attr"><span class="hljs-attr">term</span></span>: <span class="hljs-string"><span class="hljs-string">'smothering a parrot'</span></span>,        <span class="hljs-attr"><span class="hljs-attr">found</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,        <span class="hljs-attr"><span class="hljs-attr">popularity</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>,    },           <span class="hljs-attr"><span class="hljs-attr">term</span></span>: <span class="hljs-string"><span class="hljs-string">'damfino'</span></span>,        <span class="hljs-attr"><span class="hljs-attr">found</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,        <span class="hljs-attr"><span class="hljs-attr">popularity</span></span>: <span class="hljs-number"><span class="hljs-number">232</span></span>,    },           <span class="hljs-attr"><span class="hljs-attr">term</span></span>: <span class="hljs-string"><span class="hljs-string">'rain napper'</span></span>,        <span class="hljs-attr"><span class="hljs-attr">found</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,        <span class="hljs-attr"><span class="hljs-attr">popularity</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>,    },           <span class="hljs-attr"><span class="hljs-attr">term</span></span>: <span class="hljs-string"><span class="hljs-string">'donkey'</span></span>s breakfast<span class="hljs-string"><span class="hljs-string">',        found: true,        popularity: 787,    },           term: '</span></span>rational costume<span class="hljs-string"><span class="hljs-string">',        found: true,        popularity: 513,    },           term: '</span></span>mind the grease<span class="hljs-string"><span class="hljs-string">',        found: true,        popularity: 154,    }, ];</span></span></code> </pre> <br> 考虑5种方法来找到评估此数组中表达式流行度的平均值。 <br><br><h2>  <font color="#3AC1EF">1.不使用.reduce（）解决问题（命令循环）</font> </h2><br> 在我们解决问题的第一种方法中，将不使用<code>.reduce()</code>方法。 如果您以前没有遇到过迭代数组的方法，那么我希望通过解析此示例可以为您澄清一下情况。 <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> popularitySum = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> itemsFound = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> len = victorianSlang.length; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> item = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; len; i++) {    item = victorianSlang[i];    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item.found) {        popularitySum = item.popularity + popularitySum;        itemsFound = itemsFound + <span class="hljs-number"><span class="hljs-number">1</span></span>;   } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> averagePopularity = popularitySum / itemsFound; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Average popularity:"</span></span>, averagePopularity);</code> </pre> <br> 如果您熟悉JavaScript，那么您将轻松理解此示例。 实际上，这里发生以下情况： <br><br><ol><li> 我们初始化变量<code>itemsFound</code>和<code>itemsFound</code> 。 第一个变量<code>popularitySum</code> ，存储表达式受欢迎程度的总体评分。 第二个变量<code>itemsFound</code> （很惊讶）存储找到的表达式数量。 </li><li> 然后，我们初始化常量<code>len</code>和变量<code>item</code> ，这对遍历数组很有用。 </li><li> 在<code>for</code>循环中，计数器<code>i</code>递增，直到其值达到数组最后一个元素的索引值为止。 </li><li> 在循环内部，我们获取要探索的数组元素。 我们使用<code>victorianSlang[i]</code>构造访问元素。 </li><li> 然后，我们确定是否在藏书中找到了该表达方式。 </li><li> 如果在书本中出现表达式，我们将采用其受欢迎程度等级的值，并将其添加到变量<code>popularitySum</code>的值中。 </li><li> 同时，我们还增加了找到的表达式<code>itemsFound</code>的计数器。 </li><li> 最后，我们通过将<code>itemsFound</code>除以<code>itemsFound</code>找到平均值。 </li></ol><br> 因此，我们应付了任务。 也许我们的决定不是特别漂亮，但确实可以做到。 使用方法遍历数组将使其更加整洁。 让我们看一下我们是否成功，事实是，要“清理”这一决定。 <br><br><h2>  <font color="#3AC1EF">2.简单的解决方案1：.filter（）、. map（）并使用.reduce（）查找数量</font> </h2><br> 让我们在第一次尝试使用数组的方法来解决问题之前，将其分成小部分。 即，这是我们需要做的： <br><br><ol><li> 选择表示Google图书集中的表达式的对象。 在这里，您可以使用<code>.filter()</code>方法。 </li><li> 从对象中提取表达受欢迎程度的评估。 要解决此子任务， <code>.map()</code>方法是合适的。 </li><li> 计算等级的总和。 在这里，我们可以求助于我们的老朋友<code>.reduce()</code>的帮助。 </li><li> 最后，找到估计的平均值。 </li></ol><br> 这是代码中的样子： <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   // ---------------------------------------------------------------------------- function isFound(item) {    return item.found; }; function getPopularity(item) {    return item.popularity; } function addScores(runningTotal, popularity) {    return runningTotal + popularity; } //  // ---------------------------------------------------------------------------- //  ,      . const foundSlangTerms = victorianSlang.filter(isFound); //   ,   . const popularityScores = foundSlangTerms.map(getPopularity); //     .    ,    //   ,  reduce     ,  0. const scoresTotal = popularityScores.reduce(addScores, 0); //       . const averagePopularity = scoresTotal / popularityScores.length; console.log("Average popularity:", averagePopularity);</span></span></code> </pre> <br> 看一下<code>addScore</code>函数，以及<code>addScore</code> <code>.reduce()</code>的行。 请注意， <code>addScore</code>接受两个参数。 第一个， <code>runningTotal</code> ，称为电池。 它存储值的总和。 每当我们遍历数组并执行<code>return</code>时，它的值都会更改。 第二个参数<code>popularity</code>是我们正在处理的数组的单独元素。 在<code>addScore</code>数组的最开始， <code>addScore</code>的<code>addScore</code> <code>return</code>从未执行过。 这意味着<code>runningTotal</code>没有自动设置<code>runningTotal</code> 。 因此，通过调用<code>.reduce()</code> ，我们将一开始需要传递给<code>runningTotal</code>的值传递给该方法。 这是传递给<code>.reduce()</code>的第二个参数。 <br><br> 因此，我们应用了迭代数组的方法来解决该问题。 该解决方案的新版本比以前的解决方案干净得多。 换句话说，该决定更具声明性。 我们不会向JavaScript确切说明如何执行循环；我们不会遵循数组元素的索引。 相反，我们声明了小尺寸的简单辅助函数并将其组合在一起。 数组方法<code>.filter()</code> <code>.map()</code>和<code>.filter()</code>为我们完成了所有艰苦的工作。 解决此类问题的这种方法更具表现力。 这些数组方法比循环所能完成的更加完整，它们告诉我们代码中规定的意图。 <br><br><h2>  <font color="#3AC1EF">3.简易解决方案2：使用多个电池</font> </h2><br> 在该解决方案的先前版本中，我们创建了一堆中间变量。 例如， <code>foundSlangTerms</code>和<code>foundSlangTerms</code> 。 在我们的情况下，这样的解决方案是完全可以接受的。 但是，如果我们为代码设计设定一个更复杂的目标怎么办？ 如果我们可以在程序中使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">流利的界面</a>设计模式，那就太好了。 使用这种方法，我们将能够链接所有函数的调用，并且无需中间变量就可以执行此操作。 但是，这里有一个问题在等待着我们。 请注意，我们需要获取PopularScores.length的值。 如果要链接所有内容，则需要其他方法来查找数组中元素的数量。 数组中元素的数量在计算平均值时起除数的作用。 让我们看看是否可以更改解决问题的方法，以便可以通过将方法调用组合在链中来完成所有工作。 我们将通过遍历数组元素时跟踪两个值来做到这一点，即使用“双电池”。 <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   // --------------------------------------------------------------------------------- function isFound(item) {    return item.found; }; function getPopularity(item) {    return item.popularity; } //    ,  return,   . function addScores({totalPopularity, itemCount}, popularity) {    return {        totalPopularity: totalPopularity + popularity,        itemCount:    itemCount + 1,    }; } //  // --------------------------------------------------------------------------------- const initialInfo  = {totalPopularity: 0, itemCount: 0}; const popularityInfo = victorianSlang.filter(isFound)    .map(getPopularity)    .reduce(addScores, initialInfo); //       . const {totalPopularity, itemCount} = popularityInfo; const averagePopularity = totalPopularity / itemCount; console.log("Average popularity:", averagePopularity);</span></span></code> </pre> <br> 在这里，为了使用两个值，我们在reducer函数中使用了对象。 每次使用<code>addScrores</code>执行数组<code>addScrores</code> ，我们都会更新人气等级的总值和元素数。 重要的是要注意，这两个值表示为单个对象。 通过这种方法，我们可以“欺骗”系统并将两个实体存储在相同的返回值内。 <br><br>  <code>addScrores</code>函数比上一个示例中具有相同名称的函数要复杂一些。 但是现在事实证明，我们可以使用一个方法调用链来对数组执行所有操作。 处理数组的结果是，我们获得了<code>popularityInfo</code>对象，该对象存储了查找平均值所需的所有内容。 这使呼叫链变得简洁明了。 <br><br> 如果您希望改进此代码，则可以尝试一下。 例如-您可以重做它以摆脱许多中间变量。 您甚至可以尝试将此代码放在一行上。 <br><br><h2>  <font color="#3AC1EF">4.不使用点符号的功能组合</font> </h2><br> 如果您不熟悉函数式编程，或者您觉得函数式编程过于复杂，则可以跳过本节。 如果您已经熟悉<code>curry()</code>和<code>compose()</code>则对其进行解析将使您受益。 如果您想深入研究本主题，请阅读有关JavaScript中的函数式编程的资料，尤其是其中包含该资料的系列文章的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">第三</a>部分。 <br><br> 我们是采用功能性方法的程序员。 这意味着我们努力从其他功能（小型和简单）构建复杂的功能。 到目前为止，在考虑各种解决方案的过程中，我们减少了中间变量的数量。 结果，解决方案代码变得越来越简单。 但是，如果将这个想法发挥到极致呢？ 如果您尝试摆脱所有中间变量该怎么办？ 甚至尝试摆脱某些参数？ <br><br> 您可以创建一个函数来单独使用<code>compose()</code>函数来计算平均值，而无需使用变量。 我们称其为“不使用细化符号的编程”或“隐式编程”。 为了编写这样的程序，您将需要许多辅助功能。 <br><br> 有时这样的代码会让人震惊。 这是由于这样一种事实，即这种方法与公认的方法有很大不同。 但是我发现以隐式编程的方式编写代码是理解函数式编程本质的最快方法之一。 因此，我建议您在某些个人项目中尝试这种技术。 但是我想说的是，也许您不应该以隐式编程的方式编写其他人必须阅读的代码。 <br><br> 因此，回到我们构建一个计算平均值系统的任务。 为了节省空间，我们将在这里转到使用箭头功能。 通常，通常最好使用命名函数。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这是</a>一篇关于该主题<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的</a>好文章。 如果出现错误，这可以使您获得更好的堆栈跟踪结果。 <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   // ---------------------------------------------------------------------------- const filter = p =&gt; a =&gt; a.filter(p); const map   = f =&gt; a =&gt; a.map(f); const prop  = k =&gt; x =&gt; x[k]; const reduce = r =&gt; i =&gt; a =&gt; a.reduce(r, i); const compose = (...fns) =&gt; (arg) =&gt; fns.reduceRight((arg, fn) =&gt; fn(arg), arg); //  -   "blackbird combinator". //     : https://jrsinclair.com/articles/2019/compose-js-functions-multiple-parameters/ const B1 = f =&gt; g =&gt; h =&gt; x =&gt; f(g(x))(h(x)); //  // ---------------------------------------------------------------------------- //   sum,    . const sum = reduce((a, i) =&gt; a + i)(0); //     . const length = a =&gt; a.length; //       . const div = a =&gt; b =&gt; a / b; //   compose()        . //    compose()     . const calcPopularity = compose(    B1(div)(sum)(length),    map(prop('popularity')),    filter(prop('found')), ); const averagePopularity = calcPopularity(victorianSlang); console.log("Average popularity:", averagePopularity);</span></span></code> </pre> <br> 如果所有这些代码在您看来都是胡说八道-不用担心。 我将其包括在此处是一种智力活动，但并不会让您感到不高兴。 <br><br> 在这种情况下，主要工作是在<code>compose()</code>函数中。 如果从下至上读取其内容，结果表明，计算是通过根据<code>found</code>元素的属性过滤数组开始的。 然后，我们使用<code>map()</code>检索<code>popularity</code>元素属性。 之后，我们使用所谓的“ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">黑鸟组合器</a> ”。 该实体表示为函数<code>B1</code> ，用于对一组输入数据执行两次计算。 为了更好地理解这一点，请看以下示例： <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,  , : const avg1 = B1(div)(sum)(length); const avg2 = arr =&gt; div(sum(arr))(length(arr)); const avg3 = arr =&gt; ( sum(arr) / length(arr) ); const avg4 = arr =&gt; arr.reduce((a, x) =&gt; a + x, 0) / arr.length;</span></span></code> </pre> <br> 同样，如果您什么都不懂，请放心。 这只是说明可以用非常不同的方式编写JavaScript。 在这些功能中，这就是这种语言的美。 <br><br><h2>  <font color="#3AC1EF">5.通过累计平均值的计算一次性解决问题</font> </h2><br> 以上所有软件构造都很好地解决了我们的问题（包括命令周期）。 那些使用<code>.reduce()</code>方法的工具有一些共同点。 它们是基于将问题分解为小片段的。 然后以各种方式组装这些片段。 通过分析这些解决方案，您可能会注意到在其中我们进行了三次遍历。 感觉它是无效的。 如果有一种方法可以处理数组并一次性返回结果，那就太好了。 虽然存在此方法，但是其应用将需要求助于数学。 <br><br> 为了一次计算数组元素的平均值，我们需要一种新方法。 您需要找到一种使用先前计算的平均值和新值来计算平均值的方法。 我们使用代数寻找这种方法。 <br><br> 使用以下公式可以找到<code>n</code>数字的平均值： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea8/922/a8a/ea8922a8ad59e55aa604bf01c72b55e4.png"></div><br> 为了找出平均<code>n + 1</code>数字，可以使用相同的公式，但是要使用不同的条目： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/77c/ee8/a1f/77cee8a1fe717b88a55b2f2af6f222e2.png"></div><br> 此公式与此相同： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/651/b3a/0ca/651b3a0caa501b140e23cbce68a96720.png"></div><br> 与此相同： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f7b/e1b/da4/f7be1bda4b12343eee3dde51d80f95c0.png"></div><br> 如果稍加转换，将得到以下结果： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/038/165/1b5/0381651b520c5136458129c1882a44af.png"></div><br> 如果您看不到所有内容，那就没关系。 所有这些转换的结果是，借助于最后一个公式，我们可以在数组的单次遍历期间计算平均值。 为此，您需要知道当前元素的值，上一步中计算出的平均值以及元素数。 此外，大多数计算都可以在化简函数中进行： <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      // ---------------------------------------------------------------------------- function averageScores({avg, n}, slangTermInfo) {    if (!slangTermInfo.found) {        return {avg, n};       return {        avg: (slangTermInfo.popularity + n * avg) / (n + 1),        n:  n + 1,    }; } //  // ---------------------------------------------------------------------------- //       . const initialVals    = {avg: 0, n: 0}; const averagePopularity = victorianSlang.reduce(averageScores, initialVals).avg; console.log("Average popularity:", averagePopularity);</span></span></code> </pre> <br> 多亏了这种方法，才可以绕过数组一次找到必要的值。 其他方法使用一遍过滤数组，另一遍从数组中提取必要的数据，另一遍查找元素值的总和。 在这里，一切都适合一次通过数组。 <br><br> 请注意，这不一定会使计算效率更高。 使用这种方法，必须进行更多的计算。 当每个新值到达时，我们执行乘法和除法运算，以将当前平均值保持在当前状态。 在该问题的其他解决方案中，我们在程序结束时仅将一个数除以另一个。 但是，这种方法在内存使用方面效率更高。 此处不使用中间数组，因此我们只能在内存中存储具有两个值的对象。 <br><br>         .        .     ,     .   .  ,   ,      . <br><br><h2> <font color="#3AC1EF"> ?</font> </h2><br>              ?   ,     . ,    -  . , ,      ,       .         ,       .       ,           .          ,      ,       . <br><br> ,  -     ,           .       ,         ?   .      .  —   . <br><br><h2> <font color="#3AC1EF"></font> </h2><br>         : <br><br><ol><li>   <code>.reduce()</code> . </li><li>    <code>.filter()</code>  <code>.map()</code> ,   —  <code>.reduce()</code>       . </li><li>   ,      . </li><li>     . </li><li>         . </li></ol><br>  , -,     ?    —  .      -  —     ,          : <br><br><ol><li>    ,     .      —   . </li><li>    ,    ,    —     . </li><li> , ,        —   ,     . </li></ol><br> <b> !</b>        JavaScript-? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/a09/9e4/5a8/a099e45a81c9dafd3a3673edd5ea415b.jpg"></a> </div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN458030/">https://habr.com/ru/post/zh-CN458030/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN458014/index.html">FEDOR机器人-在新的国际空间站（ISS）机组人员的培训下进行首次太空任务</a></li>
<li><a href="../zh-CN458018/index.html">composer vs npm：多模块开发</a></li>
<li><a href="../zh-CN458020/index.html">7月IT活动摘要</a></li>
<li><a href="../zh-CN458022/index.html">通过横幅广告进行指纹识别？ 现在这很常见</a></li>
<li><a href="../zh-CN458026/index.html">序列化格式比较</a></li>
<li><a href="../zh-CN458040/index.html">从莫斯科到托木斯克。 一招的故事</a></li>
<li><a href="../zh-CN458042/index.html">我如何在NSU组织机器学习培训</a></li>
<li><a href="../zh-CN458044/index.html">省级信息安全-停滞还是发展？</a></li>
<li><a href="../zh-CN458046/index.html">摇篮备忘单</a></li>
<li><a href="../zh-CN458048/index.html">委托作为管理工具</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>