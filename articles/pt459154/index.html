<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≥üèΩ üë©üèΩ‚ÄçüöÄ üêô Rede para pequenas empresas usando equipamentos Cisco. Parte 1 üå™Ô∏è ü§¶üèª üöé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sauda√ß√µes, querido habrozhitel e convidados casuais. Nesta s√©rie de artigos, focaremos na constru√ß√£o de uma rede simples para uma empresa que n√£o √© mu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rede para pequenas empresas usando equipamentos Cisco. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459154/">  Sauda√ß√µes, querido habrozhitel e convidados casuais.  Nesta s√©rie de artigos, focaremos na constru√ß√£o de uma rede simples para uma empresa que n√£o √© muito exigente em sua infraestrutura de TI, mas, ao mesmo tempo, precisa fornecer a seus funcion√°rios uma conex√£o com a Internet de alta qualidade, acesso a recursos de arquivos compartilhados e acesso a VPN. ao local de trabalho e conectando um sistema de videovigil√¢ncia, cujo acesso estaria dispon√≠vel em qualquer lugar do mundo.  Para o segmento de pequenas empresas, o r√°pido crescimento e, consequentemente, o re-planejamento da rede s√£o muito caracter√≠sticos.  Neste artigo, iniciaremos em um escrit√≥rio com 15 locais de trabalho e expandiremos a rede.  Portanto, se algum t√≥pico for interessante, escreva nos coment√°rios, tentaremos introduzi-lo no artigo.  Assumirei que o leitor esteja familiarizado com os conceitos b√°sicos de redes de computadores, mas fornecerei links para a Wikipedia para todos os termos t√©cnicos; se algo n√£o estiver claro, clique e corrija esse defeito. <br><a name="habracut"></a><br>  Ent√£o, vamos come√ßar.  Qualquer rede come√ßa com um tour pela √°rea e a obten√ß√£o dos requisitos do cliente, que ser√£o posteriormente formados na declara√ß√£o de trabalho.  Freq√ºentemente, o pr√≥prio cliente n√£o entende completamente o que deseja e o que precisa para isso; portanto, ele precisa ser levado ao que podemos fazer, mas isso √© mais do que um representante de vendas; forneceremos a parte t√©cnica, portanto, suponha que temos esses requisitos iniciais: <br><br><ul><li>  17 trabalhos para PCs desktop </li><li>  Network Attached Storage ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NAS</a> ) </li><li>  Sistema de vigil√¢ncia usando c√¢meras <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NVR</a> e IP (8 pe√ßas) </li><li>  Cobertura de escrit√≥rio Wi-Fi, presen√ßa de duas redes (interna e de convidado) </li><li>  Voc√™ pode adicionar impressoras de rede (at√© 3 pe√ßas) </li><li>  A perspectiva de abrir um segundo escrit√≥rio no outro lado da cidade </li></ul><br><h3>  Sele√ß√£o de equipamentos </h3><br>  N√£o vou me aprofundar na sele√ß√£o de um fornecedor, j√° que essa √© uma quest√£o que gera s√©culos de controv√©rsia, vamos nos concentrar no fato de que j√° decidimos sobre a marca, essa √© a Cisco. <br><br>  A base da rede √© um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">roteador</a> (roteador).  √â importante avaliar nossas necessidades, pois no futuro planejamos expandir a rede.  Obviamente, a compra de um roteador com uma reserva para isso economizar√° dinheiro para o cliente durante a expans√£o, embora seja um pouco mais caro no primeiro est√°gio.  A Cisco para o segmento de pequenas empresas oferece a s√©rie Rvxxx, que apresenta roteadores para escrit√≥rios dom√©sticos (RV1xx, na maioria das vezes com um m√≥dulo Wi-Fi interno), projetados para conectar v√°rias esta√ß√µes de trabalho e armazenamento em rede.  Mas eles n√£o nos interessam, pois possuem recursos de VPN bastante limitados e uma largura de banda bastante pequena.  Al√©m disso, n√£o estamos interessados ‚Äã‚Äãno m√≥dulo sem fio embutido, uma vez que ele deve ser colocado em uma sala t√©cnica em um rack, o Wi-Fi ser√° organizado usando AP ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pontos de acesso</a> ).  Nossa escolha ser√° do RV320, que √© o modelo mais jovem da s√©rie mais antiga.  N√£o precisamos de um grande n√∫mero de portas no switch embutido, pois teremos um switch separado para fornecer um n√∫mero suficiente de portas.  Entre as principais vantagens do roteador est√£o a alta taxa de transfer√™ncia do servidor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">VPN</a> (75 Mbit / s), a disponibilidade de uma licen√ßa para 10 t√∫neis VPN, a capacidade de aumentar o t√∫nel VPN Site-2-site.  Outro ponto importante √© a presen√ßa de uma segunda porta WAN para fornecer uma conex√£o de Internet de backup. <br><br>  Um roteador <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(switch)</a> segue o roteador.  O par√¢metro de chave mais importante √© o conjunto de fun√ß√µes que possui.  Mas primeiro, vamos contar as portas.  No nosso caso, planejamos conectar-se ao switch: 17 PCs, 2 APs (pontos de acesso Wi-Fi), 8 c√¢meras IP, 1 NAS, 3 impressoras de rede.  Usando aritm√©tica, obtemos o n√∫mero 31, que corresponde ao n√∫mero de dispositivos que est√£o inicialmente conectados √† rede, adicionamos 2 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uplinks</a> a isso (planejamos expandir a rede) e paramos em 48 portas.  Agora, sobre a funcionalidade: nosso switch deve poder usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">VLAN</a> , de prefer√™ncia todas as 4096, minas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SFP</a> n√£o interferir√°, j√° que ser√° poss√≠vel conectar o switch √† outra extremidade do edif√≠cio usando √≥ptica, ele deve poder trabalhar em um c√≠rculo vicioso, o que nos permite reservar links ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">STP-Spanning Tree Protocol</a> ), assim como APs e c√¢meras ser√£o alimentados atrav√©s de um cabo de par tran√ßado, portanto, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PoE √©</a> necess√°rio (voc√™ pode ler mais sobre os protocolos no wiki, os nomes s√£o clic√°veis).  Como n√£o precisamos de uma funcionalidade <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">L3</a> muito complexa, nossa escolha ser√° no Cisco SG250-50P, pois ele possui funcionalidade suficiente para n√≥s e, ao mesmo tempo, n√£o inclui fun√ß√µes redundantes.  Falaremos sobre Wi-Fi no pr√≥ximo artigo, pois esse √© um t√≥pico bastante extenso.  A√≠ nos debru√ßamos sobre a escolha do AR.  N√£o escolhemos NAS e c√¢meras, assumimos que outras pessoas est√£o fazendo isso, mas estamos interessados ‚Äã‚Äãapenas na rede. <br><br><h3>  Planejamento </h3><br>  Para come√ßar, determinaremos quais redes virtuais precisamos (quais VLANs virtuais podem ser encontradas na Wikipedia).  Portanto, temos v√°rios segmentos de rede l√≥gica: <br><br><ul><li>  Esta√ß√µes de trabalho do cliente (PCs) </li><li>  Servidor (NAS) </li><li>  Vigil√¢ncia por v√≠deo </li><li>  Dispositivos convidados (WiFi) </li></ul><br>  Al√©m disso, de acordo com as regras de boa forma, transferiremos a interface de gerenciamento de dispositivos para uma VLAN separada.  Voc√™ pode numerar VLANs em qualquer ordem, eu escolherei isso: <br><br><ul><li>  Gerenciamento de VLAN10 (MGMT) </li><li>  Servidor VLAN50 </li><li>  LAN VLAN100 + WiFi </li><li>  Wi-Fi do visitante VLAN150 (V-WiFi) </li><li>  CAMs VLAN200 </li></ul><br>  Em seguida, faremos um plano de IP, usaremos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma m√°scara de</a> 24 bits e uma sub-rede 192.168.x.x.  Vamos come√ßar. <br><br>  No pool redundante, haver√° endere√ßos que ser√£o configurados estaticamente (impressoras, servidores, interfaces de gerenciamento etc., para clientes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DHCP</a> fornecer√£o um endere√ßo din√¢mico). <br><br><img src="https://habrastorage.org/webt/vb/u4/8f/vbu48fh6pu6yy3u3pkxhc82ub9u.png" alt="imagem"><br><br>  Ent√£o, imaginamos o IP, h√° alguns pontos que eu gostaria de prestar aten√ß√£o: <br><br><ul><li>  Na rede de controle, n√£o faz sentido aumentar o DHCP, exatamente o mesmo que na rede do servidor, pois todos os endere√ßos s√£o atribu√≠dos manualmente ao configurar o equipamento.  Alguns deixam um pequeno pool DHCP no caso de conectar novos equipamentos, para sua configura√ß√£o inicial, mas estou acostumado a isso e aconselho voc√™ a configurar o equipamento n√£o no cliente, mas na sua mesa, para que n√£o fa√ßa esse pool aqui. </li><li>  Alguns modelos de c√¢mera podem exigir um endere√ßo est√°tico, mas assumimos que as c√¢meras o recebem automaticamente. </li><li>  Na rede local, deixamos o pool para impressoras, pois o servi√ßo de impress√£o em rede n√£o funciona de maneira confi√°vel com endere√ßos din√¢micos. </li></ul><br><h3>  Configura√ß√£o do roteador </h3><br>  Bem, finalmente, vamos √† configura√ß√£o.  Pegamos um cabo de conex√£o e nos conectamos a uma das quatro portas LAN do roteador.  Por padr√£o, um servidor DHCP est√° ativado no roteador e est√° dispon√≠vel em 192.168.1.1.  Voc√™ pode verificar isso com o utilit√°rio do console ipconfig, cuja sa√≠da ser√° nosso roteador como gateway padr√£o.  Verifique: <br><br><img src="https://habrastorage.org/webt/nm/tq/lj/nmtqljuyib4ttkvumvu8s9i5a9g.png"><br><br>  No navegador, acesse este endere√ßo, confirme uma conex√£o insegura e efetue login com o nome de usu√°rio / senha cisco / cisco.  Altere imediatamente a senha para proteger.  E a primeira coisa que vamos para a guia Configura√ß√£o, a se√ß√£o Rede, aqui atribu√≠mos o nome e o nome de dom√≠nio do roteador <br><br><img src="https://habrastorage.org/webt/jk/y4/ye/jky4yejacpxaqmxlwrigx3yfsre.png"><br><br>  Agora adicione VLANs ao nosso roteador.  V√° para Gerenciamento de portas / associa√ß√£o √† VLAN.  Seremos recebidos pelo r√≥tulo padr√£o de VLAN-ok <br><br><img src="https://habrastorage.org/webt/na/sw/h3/naswh3kqrry8_xqitu6gynd7zok.png"><br><br>  N√£o precisamos deles, excluiremos tudo, exceto o primeiro, j√° que ele √© o padr√£o e n√£o pode ser exclu√≠do; adicionaremos imediatamente as VLANs que planejamos.  N√£o se esque√ßa de marcar a caixa na parte superior.  Al√©m disso, o gerenciamento de dispositivos √© permitido apenas a partir da rede de gerenciamento, e o roteamento entre redes √© permitido em qualquer lugar, exceto na rede de convidados.  Vamos configurar as portas um pouco mais tarde. <br><br><img src="https://habrastorage.org/webt/kz/j1/31/kzj131bvykf1yurxl0lv93k0f8s.png"><br><br>  Agora configure o servidor DHCP de acordo com a nossa tabela.  Para fazer isso, v√° para Configura√ß√£o DHCP / DHCP. <br>  Para redes nas quais o DHCP ser√° desativado, configure apenas o endere√ßo do gateway, que ser√° o primeiro na sub-rede (respectivamente, a m√°scara). <br><br><img src="https://habrastorage.org/webt/e0/ty/yt/e0tyyt-13e3n22ozadceexsum1u.png"><br><br>  Nas redes com DHCP, tudo √© bem simples, tamb√©m configuramos o endere√ßo do gateway, abaixo prescrevemos pools e DNS-ki: <br><br><img src="https://habrastorage.org/webt/nc/1t/1s/nc1t1su_n4tk4azoad4lxqi_1_y.png"><br><br>  N√≥s descobrimos isso com o DHCP, agora os clientes conectados √† rede local receber√£o o endere√ßo automaticamente.  Agora vamos configurar as portas (as portas s√£o configuradas de acordo com o padr√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">802.1q</a> , o link √© clic√°vel, voc√™ pode se familiarizar com ele).  Como se sup√µe que todos os clientes ser√£o conectados por meio de switches gerenciados de uma VLAN (nativa) sem etiqueta, o MGMT estar√° em todas as portas, isso significa que qualquer dispositivo conectado a essa porta entrar√° nessa rede (mais detalhes aqui).  Volte para Gerenciamento de portas / associa√ß√£o √† VLAN e configure-o.  Deixamos a VLAN1 em todas as portas Exclu√≠das, n√£o precisamos dela. <br><br><img src="https://habrastorage.org/webt/9r/ao/j-/9raoj-o8mcbsq2avpisulbav6wg.png"><br><br>  Agora, em nossa placa de rede, precisamos configurar um endere√ßo est√°tico da sub-rede de gerenciamento, pois entramos nessa sub-rede depois de clicar em ‚Äúsalvar‚Äù e o servidor DHCP n√£o est√° aqui.  Vamos √†s configura√ß√µes do adaptador de rede e configuramos o endere√ßo.  Depois disso, o roteador estar√° dispon√≠vel no endere√ßo 192.168.10.1 <br><br><img src="https://habrastorage.org/webt/fm/1t/zx/fm1tzx27c5daleh6seaviolz_oi.png"><br><br>  Configure nossa conex√£o com a Internet.  Suponha que obtivemos um endere√ßo est√°tico de um provedor.  V√° para Setup / Network, marque WAN1 abaixo, clique em Edit.  Selecione IP est√°tico e configure seu endere√ßo. <br><br><img src="https://habrastorage.org/webt/mb/pd/gv/mbpdgvskfgqef1s6bshr3jud-xg.png"><br><br>  E o √∫ltimo de hoje - configuramos o acesso remoto.  Para fazer isso, v√° para Firewall / Geral e marque a caixa de sele√ß√£o Gerenciamento Remoto, configure a porta conforme necess√°rio <br><br><img src="https://habrastorage.org/webt/hi/hu/ix/hihuix7lpoj8dtm3ef0w-6ldxge.png"><br><br>  Provavelmente √© tudo por hoje.  Como resultado do artigo, temos um roteador configurado b√°sico com o qual podemos acessar a Internet.  O volume do artigo √© maior do que eu esperava, portanto, na pr√≥xima parte, concluiremos a configura√ß√£o do roteador, aumentamos o VPN-ku, configuramos o firewall e o log e configuramos o switch e j√° podemos iniciar nosso escrit√≥rio.  Espero que o artigo seja pelo menos um pouco √∫til e informativo para voc√™.  Estou escrevendo pela primeira vez, ficarei muito feliz com cr√≠ticas e perguntas construtivas, tentarei responder a todos e levar em considera√ß√£o seus coment√°rios.  Al√©m disso, como escrevi no come√ßo, seus pensamentos s√£o bem-vindos sobre o que mais pode aparecer no escrit√≥rio e o que mais iremos configurar. <br><br>  Meus contatos: <br>  Telegrama: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">hebelz</a> <br>  Skype / correio: kashuba@antik.sk <br>  Adicione, fale. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt459154/">https://habr.com/ru/post/pt459154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt459142/index.html">Construindo um gr√°fico de linha de m√©dia m√≥vel animado em R. Recuperando dados atrav√©s da API da NBA</a></li>
<li><a href="../pt459144/index.html">Frontend Weekly Digest (1 a 7 de julho de 2019)</a></li>
<li><a href="../pt459146/index.html">Food Design Digest Junho 2019</a></li>
<li><a href="../pt459150/index.html">O resumo de materiais frescos do mundo do front-end da √∫ltima semana n ¬∞ 372 (1 a 7 de julho de 2019)</a></li>
<li><a href="../pt459152/index.html">Preencha documentos no Microsoft Word usando Python. Parte 2</a></li>
<li><a href="../pt459156/index.html">VNIITE do planeta como um todo: como na URSS eles criaram o sistema de ‚Äúcasa inteligente‚Äù</a></li>
<li><a href="../pt459158/index.html">Como o artefato se torna a maior falha da v√°lvula</a></li>
<li><a href="../pt459160/index.html">Como voc√™ escolhe produtos nas lojas?</a></li>
<li><a href="../pt459162/index.html">"Para vencer o campeonato, a equipe deve respirar em un√≠ssono." Entrevista com o Workshops de Moscou, instrutor do ICPC</a></li>
<li><a href="../pt459166/index.html">O que voc√™ √©, fechamentos em JavaScript?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>