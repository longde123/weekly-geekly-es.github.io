<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍷 👩‍🏭 ☝🏿 Erstellen einer Haftnotizanwendung mit 8base, GraphQL und React 🚶🏿 🥫 👋🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sehen Sie sich hier die Demoversion des Programms an . 

 Zeitmanagement war für mich zu jeder Zeit ein großer Kampf, geplante Aufgaben werden vergess...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen einer Haftnotizanwendung mit 8base, GraphQL und React</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463907/"><img src="https://habrastorage.org/getpro/habr/post_images/c98/5ef/e7d/c985efe7da6be444438fac5cbae68238.png" alt="Bild"><br><br>  Sehen Sie sich hier die Demoversion des Programms <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">an</a> . <br><br>  Zeitmanagement war für mich zu jeder Zeit ein großer Kampf, geplante Aufgaben werden vergessen, Notizen gehen verloren, weil sie auf mehrere Anwendungen verteilt sind, die Notizen speichern.  Die Lösung ist überhaupt nicht in der Anwendung für personalisierte Notizen enthalten, die Sie erstellen sollten, obwohl es wahrscheinlich ist, dass Sie sie aufgrund der Zeit verwenden, die Sie in sie investieren. <br><a name="habracut"></a><br>  Um eine Notizanwendung zu erstellen, benötigen wir einen einfachen Stapel, für den praktisch kein Entwicklungs-Backend erforderlich ist, und eine Anwendung, die einfach bereitgestellt werden kann.  Basierend auf diesen Anforderungen wählen wir den Stapel für die Anwendung.  Es sieht so aus: <br>  <b>-React</b> - für die Front-End-Entwicklung.  Dies ist eine beliebte Bibliothek zum Erstellen von Benutzeroberflächen. Sie kann problemlos auf mehreren Plattformen wie Now und Netlify bereitgestellt werden. <br>  <b>-8base GraphQL</b> - Datenbankschicht für unsere Anwendung.  Hier speichern und lesen wir Anfragen in unserer Anwendung.  Mit 8base müssen Sie kein Backend für die Anwendung erstellen und verwalten. <br><br>  Ich habe mit diesen Tools erfolgreich eine einfache Anwendung erstellt.  In diesem Artikel werden wir uns mit dem Erstellen dieser Anwendung und dem Einrichten eines Backends auf der 8base-Plattform befassen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/807/f6e/fa9/807f6efa97c63a172fa3e621d6411de5.png" alt="Bild"><br><br>  Wenn Screenshots für Sie nicht geeignet sind, können Sie sich jederzeit eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Demoanwendung</a> ansehen.  Notizen werden zufällig auf einer Webseite platziert und können an verschiedene Stellen gezogen werden. <br><br>  Das Befolgen der Anweisungen erfordert ein grundlegendes Verständnis von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">React</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Node.js.</a>  Bevor Sie beginnen, stellen Sie bitte sicher, dass Node und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">npm</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Garn installiert sind</a> . <br><br>  Wir werden im Projekt auch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GraphQL-</a> Abfragen verwenden, daher ist eine gewisse Vertrautheit mit dieser Technologie hilfreich. <br><br>  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">8base-</a> Plattform bietet eine Vielzahl von Funktionen, mit denen Entwickler Anwendungen schneller und einfacher erstellen können.  Mit 8base können Sie das Backend Ihrer Anwendung einfach organisieren, ohne Code schreiben zu müssen.  Mit der 8base-Plattform können Sie Ihr Backend mithilfe einer einfachen grafischen Oberfläche erstellen, mit der Sie folgende Aktionen ausführen können: <br><br><ul><li>  Definieren Sie Ihr Datenschema: Erstellen Sie Tabellen / Tabellenbeziehungen. </li><li>  Dateien hochladen. </li><li>  Definieren Sie Zugriffsrechte und Berechtigungsrollen. </li><li>  Verwalten Sie verschiedene Projekte mithilfe von Workshops. </li><li>  Entwerfen Sie Abfragen mit dem API-Explorer (basierend auf GraphQL). </li></ul><br>  In diesem Handbuch erfahren Sie, wie Sie mit 8base die Serverseite schnell konfigurieren und Daten mithilfe der GraphQL-API verarbeiten können.  Unsere Front-End-Anwendung wird mit React erstellt und interagiert mit GraphQL mit dem Server. <br><br>  Gehen Sie folgendermaßen vor, um 8base zu verwenden: <br><br>  1. <b>Erstellen Sie ein Konto</b> auf 8base.  Es ist kostenlos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/674/3bc/809/6743bc8091fa63acb34a068fe09581a9.png" alt="Bild"><br><br>  2. Klicken Sie nach Abschluss der Registrierung auf die Schaltfläche <b>Data Builder</b> , um zur Seite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Daten zu gelangen</a> , und klicken Sie auf Neue Tabelle, um die Konfiguration des Backends zu starten. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/571/e32/808/571e32808c3cd8d029805f01279c60a8.png" alt="Bild"><br><br>  3. Nach dem Laden einer neuen Tabelle werden Sie zum Schema weitergeleitet und können mit der Definition der Felder beginnen.  Lassen Sie uns ein paar Dinge beachten.  Links sehen Sie <i>Systemtabellen</i> und <i>Ihre Tabellen</i> . <br><br>  Jeder neue 8base-Arbeitsbereich enthält automatisch mehrere integrierte Tabellen.  Diese Tabellen werden beispielsweise für Dateien, Einstellungen und Berechtigungen verwendet und sind alle über die 8base GraphQL-API zugänglich. <br><br>  4. <b>Erstellen Sie die</b> <i>Notes-</i> <b>Tabelle</b> , die aus den folgenden Feldern besteht: <br><br>  <b>Titel</b> : Feldtyp <i>Text</i> .  Hier wird der Titel der Notiz sein. <br>  <b>text</b> : Typ des <i>Textfeldes</i> .  Dieses Feld enthält den Hauptteil der Notiz. <br>  Unser Schema ist recht einfach und wird verwendet, um die Chancen zu erreichen, die wir zu realisieren versuchen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bea/d62/ca7/bead62ca7ffa32276ddc9df5ef9a4712.png" alt="Bild"><br><br>  5. <b>Kopieren Sie anschließend die</b> Endpunkt-API-URL (unten links verfügbar). Dies ist die Hauptkommunikationslinie zwischen den Client- und Serverteilen Ihrer Anwendung. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/56b/762/8d9/56b7628d911cf529305c3dece34a3896.png" alt="Bild"><br><br>  6. Schließlich <b>erlauben</b> wir für die Zwecke dieses Handbuchs standardmäßig <b>den öffentlichen Zugriff für Gäste</b> , sodass keine Authentifizierung erforderlich ist.  Um dem Gast den Zugriff auf die neue Notes-Tabelle zu ermöglichen, gehen Sie zu Einstellungen&gt; Rollen&gt; Gast und aktivieren Sie die entsprechenden Kontrollkästchen im Abschnitt Notes.  Allen nicht autorisierten Benutzern, die auf Ihren API-Endpunkt zugreifen, wird standardmäßig die Gastrolle zugewiesen.  Die Autorisierung wird in diesem Handbuch nicht behandelt.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier</a> erfahren Sie mehr darüber, wie Sie damit arbeiten. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/110/0c9/f7d/1100c9f7d58abd0b4ade83938c6378c7.png" alt="Bild"><br><br>  Nachdem wir die Konfiguration des Backends mit 8base abgeschlossen haben, beginnen wir mit der Arbeit an der Front-End-Seite der Anwendung. <br><br><h3>  Erste Schritte </h3><br>  Ich habe ein Starterprojekt erstellt, um den Overhead einfach zu konfigurieren und zu reduzieren, sodass der Artikel im Wesentlichen beschreibt, wie Sie mit 8base und GraphQL beginnen.  Das Grundgerüst der Anwendung ist bereits konfiguriert, einschließlich der Stile und der Struktur des Projekts.  Im Starterzweig stehen folgende Optionen zur Verfügung: <br><br><ol><li>  Eine Komponente des Notizformulars zum Erstellen einer Notiz. </li><li>  Eine Komponente einer Notiz, die die Details einer einzelnen Notiz anzeigt. </li><li>  Eine Notizlistenkomponente, die eine Liste der verfügbaren Notizen anzeigt. </li></ol><br>  Führen Sie den folgenden Befehl aus, um das Repository zu klonen: <br><br><pre><code class="javascript hljs">git clone -b starter https:<span class="hljs-comment"><span class="hljs-comment">//github.com/HackAfro/note-app.git</span></span></code> </pre> <br>  Öffnen Sie den Ordner und installieren Sie die Projektabhängigkeiten, indem Sie den folgenden Befehl ausführen: <br><br><pre> <code class="javascript hljs">npm install</code> </pre> <br>  Starten Sie den React-Anwendungsserver, indem Sie npm start im Terminal im Stammordner Ihres Projekts ausführen. <br><br><h4>  Stellen Sie mit GraphQL eine Verbindung zum 8base-Backend her </h4><br>  Nachdem unser erstes Frontend eingerichtet ist, besteht der nächste Schritt darin, den Client für die Interaktion mit dem 8base-Backend mithilfe von GraphQL zu konfigurieren.  Eine nützliche Bibliothek, die Ihnen beim Verbinden hilft, ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Apollo-Boost</a> .  Es bietet einem Client die Möglichkeit, über einen URI eine Verbindung zum GraphQL-Backend herzustellen.  URI ist ein von 8base bereitgestellter Endpunkt.  Aktualisieren <i>wir die</i> Datei <i>index.js</i> , um ApolloClient zu konfigurieren. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-dom"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ApolloProvider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-apollo"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ApolloClient <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"apollo-boost"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> serviceWorker <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./serviceWorker"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"./index.css"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./App"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> client = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ApolloClient({ <span class="hljs-attr"><span class="hljs-attr">uri</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;YOUR_8BASE_ENDPOINT&gt;"</span></span> }); ReactDOM.render( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ApolloProvider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">client</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{client}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ApolloProvider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"root"</span></span>) ); serviceWorker.unregister();</code> </pre> <br>  ApolloClient verwendet ein Objekt mit der Eigenschaft <i>uri</i> als Argument.  Gleichzeitig gibt uns der Kunde Zugriff auf das Empfangen, Aktualisieren und Löschen von Daten mit der bereitgestellten <i>URL</i> .  Stellen Sie sicher, dass Sie den Wert von &lt;YOUR_8BASE_ENDPOINT&gt; durch den tatsächlichen Endpunkt ersetzen. <br><br>  Dann verpacken wir die Anwendung in ApolloProvider, der den Prop-Client akzeptiert.  ApolloProvider lädt das 8base-Tabellenschema, mit dem Sie auf alle Datenmodelleigenschaften in Ihrem Front-End-Code zugreifen können. <br><br><h4>  Notizen empfangen und anzeigen </h4><br>  Um Notizen vom Backend zu erhalten, schreiben wir eine GraphQL-Abfrage, um in 8base gespeicherte Notizen zu erhalten.  <i>Beginnen</i> wir mit der Aktualisierung der Datei <i>App.js.</i> <br><br>  Fügen Sie die folgenden Importe hinzu, in denen Sie den TODO-1-Kommentar finden: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gql <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"graphql-tag"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { graphql } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-apollo"</span></span>;</code> </pre> <br>  Sie sind nützlich, um GraphQL-Abfragen zu erstellen und Requisiten zum Notieren an die App-Komponente zu senden.  Als nächstes müssen wir eine Anfrage hinzufügen, um Notizen von der Serverseite zu erhalten.  Aktualisieren Sie <i>NOTE_LIST_QUERY so</i> , dass es wie das folgende Snippet aussieht: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> NOTE_LIST_QUERY = gql<span class="hljs-string"><span class="hljs-string">` query { notesList { items { id title text } } } `</span></span>;</code> </pre> <br>  Wenn Sie sich bei Ihren Anforderungen nicht sicher sind, können Sie sie jederzeit im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://auth.8base.com/login%3Fstate%3Dg6Fo2SBpQzdtSDdPX3B6Y1Y1QUFvVXp0R014dG56MVpWVzlHZaN0aWTZIG5ncC16aHpjSXE1TlJtVUVyQmVKdVpIQXo5aEdFVFZEo2NpZNkgcUdIWlZ1NUN4WTVrbGl2bTI4T1BMam9wdnNZcDBiYUQ%26client%3DqGHZVu5CxY5klivm28OPLjopvsYp0baD%26protocol%3Doauth2%26response_type%3Dtoken%2520id_token%26redirect_uri%3D">8base API-Explorer</a> testen.  Lassen Sie uns die obige Abfrage überprüfen. <br><br>  Wenn Sie diese Abfrage in Ihrem Explorer ausführen, geben Sie höchstwahrscheinlich ein leeres Array zurück, da Sie keine Notizen erstellt haben.  Mit der 8base-Symbolleiste können Sie ganz einfach Notizen erstellen.  Folgen Sie dem Datenlink in der Seitenleiste und befolgen Sie die Anweisungen in den folgenden Screenshots: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/757/48f/de2/75748fde25301cb5fba67934b5a89d37.png" alt="Bild"><br><br>  Wir erhalten <i>ID</i> , <i>Titel</i> und <i>Text</i> von den NotesList-Elementen.  Als Nächstes bereiten wir die <i>App-</i> Komponente für die Verwendung der aus der Anfrage erhaltenen Notizen vor.  Schließlich werden wir die <i>graphql HOC</i> (Higher Order Component) verwenden, um die Abfrage der <i>App-</i> Komponente <i>zuzuordnen</i> .  Die Funktion akzeptiert die Abfragezeichenfolge und die Konfigurationsparameter. <br>  // TODO - 3 <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> graphql(NOTE_LIST_QUERY, { <span class="hljs-attr"><span class="hljs-attr">props</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { data } = result; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { loading, refetch } = data; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> notes = []; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data &amp;&amp; data.notesList) notes = data.notesList.items; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { loading, notes, refetch, }; }, })(App);</code> </pre> <br>  Ersetzen Sie die vorhandene Exportzeile unter dem obigen TODO-3-Kommentar. <br><br>  Die <i>graphql-</i> Funktion gibt eine "Enhancer" -Funktion zurück, die jede an sie übergebene Komponente mit GraphQL-Funktionen erweitert.  Dies entspricht dem Komponentenmuster höherer Ordnung, das auch von der <i>Verbindungsfunktion</i> in Response-Redux verwendet wird. <br><br>  Mit der Funktion <code>graphql()</code> können wir auf den GraphQL-Endpunkt zugreifen.  Es akzeptiert die Abfrage als ersten Parameter (NOTE_LIST_QUERY), den zweiten als config, der Rückgabewert ist HOC, der mit der erforderlichen Komponente als Argument ausgeführt werden sollte.  Im Fragment übergeben wir den Wert der Eigenschaft <code>data.noteList</code> neuen Variablennotizen.  Durch die Rückgabe dieses Werts können wir innerhalb der Komponente als <code>props.notes</code> und als <code>props.notes</code> den Download-Status <code>props.loading</code> . <br><br>  Die <i>Refetch-</i> Methode ist sehr nützlich, damit wir etwas erreichen können, das der Echtzeitaktualisierung nahe kommt.  Wir werden die Funktion nach jeder Mutation aufrufen, um sicherzustellen, dass die Daten in der Anwendung immer mit dem 8base-Backend synchronisiert sind. <br>  Wenn Sie zu localhost: 3000 wechseln, wird die gerade erstellte Notiz angezeigt.  Wir müssen in der Lage sein, Notizen zu erstellen, ohne die 8base-Symbolleiste aufzurufen. Dies bedeutet, dass Sie zur nächsten Stufe von GraphQL wechseln müssen.  Mutationen! <br><br><h4>  Notizen erstellen </h4><br>  Nachdem Sie die Einstellungen für den Empfang von Notizen vom Backend vorgenommen haben, besteht der nächste logische Schritt darin, die Möglichkeit zum Erstellen von Notizen hinzuzufügen.  Die anfänglichen Dateien enthalten die Formularkomponente, und wir müssen die Komponente aktualisieren, damit die Mutation die erstellten Notizen im 8base-Backend speichern kann. <br><br>  Im vorherigen Abschnitt haben wir die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anforderung</a> zum Empfangen von Notizen vom Backend ausgeführt. In diesem Abschnitt werden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mutationen durchgeführt</a> , um neue Notizen zu speichern. Die Mutation ähnelt der Anforderung, mit dem einzigen Unterschied, dass die Mutation immer dann aufgerufen wird, wenn die Daten geändert werden müssen.  Nach dem Erstellen von Tabellen in 8base sind Abfragen und Mutationen für diese Tabelle in der Explorer-API leicht zugänglich.  Daher können wir immer dorthin gelangen, wenn wir Zweifel haben, wie die Mutation strukturiert sein sollte. <br><br>  Mal sehen, wie die Mutation aussieht, um Notizen im API-Explorer zu erstellen.  Gehen Sie zur 8base-Symbolleiste und klicken Sie in der Seitenleiste auf den API-Explorer. <br><br>  Klicken Sie im API-Explorer wie oben gezeigt auf den <i>Mutationslink</i> .  Dies zeigt alle verfügbaren Mutationen.  Suchen Sie nach den Verantwortlichen für das Erstellen von Notizen: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f18/b87/a31/f18b87a316f26f5ebdaaaafbdc3a9625.png" alt="Bild"><br><br>  Der Screenshot zeigt, dass der Mutationsname <i>noteCreate lautet</i> und ein Argument vom Typ <i>NoteCreateInput verwendet wird</i> .  <i>NoteCreateInput</i> - Definiert den Typ des Anforderungshauptteils, der zum Erstellen einer Notiz erforderlich ist. <br><br>  Nachdem wir nun wissen, was von uns verlangt wird, können wir mit der Implementierung beginnen.  Ich habe mich um Sie gekümmert und ein Formular zum Erstellen von Notizen <i>erstellt</i> . <i>Daher muss</i> der Komponente mithilfe der Funktion <i>graphql</i> noch eine Mutation <i>hinzugefügt</i> werden. <br><br>  Öffnen Sie <i>src / components / note-form / index.js</i> und fügen Sie die folgenden Importe hinzu, wenn Sie einen TODO 1-Kommentar haben .: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gql <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"graphql-tag"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { graphql } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react-apollo"</span></span>;</code> </pre> <br>  Als nächstes deklarieren wir die Mutation, aktualisieren die Variable <i>NOTE_MUTATION</i> und weisen ihr einen neuen Wert zu, ähnlich dem folgenden Fragment: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> NOTE_MUTATION = gql<span class="hljs-string"><span class="hljs-string">` mutation NoteCreate($data: NoteCreateInput!) { noteCreate(data: $data) { id } } `</span></span>;</code> </pre> <br>  Als nächstes verknüpfen wir die Mutation mit der Komponente mithilfe der <i>graphql-</i> Funktion.  Ersetzen Sie die <i>Exportzeile</i> in der Datei durch das folgende Snippet: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> graphql(NOTE_MUTATION, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"noteCreate"</span></span> })(NoteForm);</code> </pre><br>  Daher <i>übergibt</i> die <i>graphql-</i> Funktion die benannte Funktion <i>noteCreate</i> , mit der die create-Mutation ausgeführt wird.  Verwenden Sie die Funktion <i>noteCreate</i> , um beim <i>Senden</i> eines Formulars eine Notiz zu erstellen. <br><br>  Gehen Sie zum TODO 4-Kommentar und aktualisieren Sie die <i>Submit-</i> Funktion so, dass sie wie im folgenden Snippet aussieht: <br>  // TODO - 4 <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> submit = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> note =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> res = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> noteCreate({ <span class="hljs-attr"><span class="hljs-attr">variables</span></span>: { <span class="hljs-attr"><span class="hljs-attr">data</span></span>: note } }); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (res.data.noteCreate.id) { setNote({ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }); refetch() } };</code> </pre> <br>  Im obigen Snippet haben wir die <i>noteCreate-</i> Funktion verwendet, um die <i>create-</i> Mutation in der Notes-Tabelle durchzuführen.  Das an die Funktion übergebene Argument ist ein Objekt, das <i>Variablen</i> und einen <i>Datenkörper enthält</i> . <br><br>  Wir warten, bis die Anforderung abgeschlossen ist, und überprüfen dann ihren Erfolg, indem wir die ID im Antworttext finden.  Dann setzen wir den Zustand der Notiz zurück und rufen ihn erneut ab.  Ich habe die Funktion zum erneuten Abrufen bereits in diesem Artikel erwähnt, aber ich möchte Ihren Speicher aktualisieren.  Durch erneutes Abrufen wird Ihre Komponente gezwungen, die in der Funktion <code>graphql()</code> definierte Abfrage zu wiederholen. <br><br>  Jetzt ist alles zum Testen bereit.  Gehen Sie zu localhost: 3000, füllen Sie das Formular aus und genießen Sie das Ergebnis. <br><br><h4>  Notizen löschen </h4><br>  Was nützt eine Notiz-App, wenn Sie nicht alle Ihre Notizen löschen und so tun können, als ob sie nie existiert hätten?  Vorgehensweise zum Löschen einer Notiz: <br><br><ol><li>  Der Benutzer klickt auf die Schaltfläche Löschen. </li><li>  Ein Bestätigungsfenster wird angezeigt - dies reduziert die Anzahl der böswilligen Benutzer, was sehr nützlich ist. </li><li>  Es bleibt eine Handlung zu begehen - löschen Sie die Notiz. </li></ol><br>  Die Einstellung zum Löschen von Notizen befindet sich in der Datei <i>src / note-card / delete-button.js</i> .  Öffnen Sie die Datei und fügen Sie die folgenden Importe oben in die Datei ein.  Insbesondere unten, wo sich TODO 1 befindet: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> gql <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'graphql-tag'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { graphql } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-apollo'</span></span>;</code> </pre> <br>  Schreiben Sie dann die <i>Löschmutation</i> und weisen Sie sie der Variablen <i>DELETE_MUTATION zu</i> .  Dies sollte ungefähr so ​​aussehen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> DELETE_MUTATION = gql<span class="hljs-string"><span class="hljs-string">` mutation DeleteNote($data: NoteDeleteInput!) { noteDelete(data: $data) { success } } `</span></span>;</code> </pre> <br>  Als nächstes verknüpfen wir die Mutation mit der Komponente mithilfe der <i>graphql-</i> Funktion.  Ersetzen Sie die <i>Exportzeile</i> in der Datei durch das folgende Fragment: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> graphql(DELETE_MUTATION, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'deleteNote'</span></span>, })(DeleteButton);</code> </pre> <br>  Die Funktion <i>graphql übergibt dann</i> die benannte Funktion <i>deleteNote</i> , mit der die <i>Löschmutation ausgeführt</i> wird.  Jetzt können wir den Click Event Handler aktualisieren und die dringend benötigten Einstellungen hinzufügen, um die Notiz zu löschen. <br><br>  Gehen Sie zur <i>onDeleteClick-</i> Funktion in der Komponente und platzieren Sie das folgende Fragment in der Funktion: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> onDeleteClick = <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: noteId, }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> remove = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.confirm(<span class="hljs-string"><span class="hljs-string">'Are you sure you want to delete this note?'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (remove) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> deleteNote({ <span class="hljs-attr"><span class="hljs-attr">variables</span></span>: { data } }); refetch(); } };</code> </pre> <br>  Wenn Sie auf die Schaltfläche Löschen im Hauptteil des <b>Datenobjekts</b> klicken, setzen wir das <i>ID-</i> Feld auf <i>noteId</i> und zeigen dem Benutzer eine Bestätigungsmeldung an, in der eindeutig angegeben wird, dass wir diese Notiz dauerhaft löschen <i>möchten</i> .  Wenn der Benutzer wie beabsichtigt <i>vorgeht</i> und fortfährt, rufen wir die Funktion <i>deleteNote</i> auf, <i>um das</i> Löschen zu <i>ändern</i> .  Wenn dies abgeschlossen ist, benötigen Sie eine Bewerbung. <br><br>  So sollte es aussehen.  Gehen Sie zu localhost: 3000 und versuchen Sie, die Notiz zu löschen: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/515/f80/9ea/515f809ea6cbc73518d449241df4299e.png" alt="Bild"><br>  Eine Demo dieser Anwendung finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br><h3>  Fazit </h3><br>  Ich bin mir sicher, dass Sie eine gute Zeit beim Erstellen dieser Anwendung hatten. Wir haben uns angesehen, wie Sie Abfragen schreiben, um Daten von der Serverseite von 8base zu empfangen, und wie Sie Mutationen zum <i>Erstellen</i> und <i>Löschen</i> schreiben.  8base als Plattform ist relativ einfach zu navigieren und bietet eine intuitive Benutzeroberfläche.  Ich verbrachte die Nacht damit, es herauszufinden.  Sie können das fehlende Loch ausfüllen, indem Sie lernen, wie Sie <i>Aktualisierungsmutationen</i> schreiben und Notizen bearbeiten.  Ich bin sicher, dass die Benutzer zufrieden sein werden.  Sie können auch die offizielle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> anzeigen, um weitere Informationen zur Plattform zu erhalten.  Den Quellcode der Anwendung finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de463907/">https://habr.com/ru/post/de463907/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de463897/index.html">Sicherheitsüberprüfung der MCS Cloud Platform</a></li>
<li><a href="../de463899/index.html">Warum haben wir so lange auf die Erfindung des Fahrrads gewartet?</a></li>
<li><a href="../de463901/index.html">Testen der Verfügbarkeit von NB-IoT-Netzwerken in St. Petersburg (August 2019)</a></li>
<li><a href="../de463903/index.html">5 Tipps zur Designführung Teil 2</a></li>
<li><a href="../de463905/index.html">Youtube Channel Promotion</a></li>
<li><a href="../de463913/index.html">Und wie suchen Personalagenturen wirklich nach Programmierern?</a></li>
<li><a href="../de463915/index.html">Was ist ein CDN und wie funktioniert es?</a></li>
<li><a href="../de463917/index.html">20 Dinge, die ich gerne wissen würde, bevor ich Webentwickler werde</a></li>
<li><a href="../de463919/index.html">Großer philosophischer Gedanke: Top 10 DotNext 2019 Piter Talks</a></li>
<li><a href="../de463921/index.html">(Nicht sehr) versteckte Kosten der gemeinsamen Codebasis von iOS und Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>