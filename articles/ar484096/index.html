<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉโ๐ฉโ๐ง ๐ผ ๐ ูุนุฑูุฉ ุงุซููู Yakozun ุ ุฃู ูุงุณุงูุฏุฑุง ุถุฏ HBase. ุชุฌุฑุจุฉ ูุฑูู ุณุจูุฑุจูู ๐๐ฟ ๐ฟ ๐ฃ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฐู ููุณุช ูุฌุฑุฏ ููุชุฉ ุ ููุจุฏู ุฃู ูุฐู ุงูุตูุฑุฉ ุจุนูููุง ุชุนูุณ ุจุฏูุฉ ุฃูุซุฑ ุฌููุฑ ููุงุนุฏ ุงูุจูุงูุงุช ูุฐู ุ ููู ุงูููุงูุฉ ุณูููู ูู ุงููุงุถุญ ููุงุฐุง: 



 ููููุง ูุชุตููู DB-Engin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุนุฑูุฉ ุงุซููู Yakozun ุ ุฃู ูุงุณุงูุฏุฑุง ุถุฏ HBase. ุชุฌุฑุจุฉ ูุฑูู ุณุจูุฑุจูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/484096/" style=";text-align:right;direction:rtl">  ูุฐู ููุณุช ูุฌุฑุฏ ููุชุฉ ุ ููุจุฏู ุฃู ูุฐู ุงูุตูุฑุฉ ุจุนูููุง ุชุนูุณ ุจุฏูุฉ ุฃูุซุฑ ุฌููุฑ ููุงุนุฏ ุงูุจูุงูุงุช ูุฐู ุ ููู ุงูููุงูุฉ ุณูููู ูู ุงููุงุถุญ ููุงุฐุง: <br><br><img src="https://habrastorage.org/webt/i2/lk/zo/i2lkzo9tq7zpeprcbtgm3-mufk4.png"><br><br>  ููููุง ูุชุตููู DB-Engines ุ ูุฅู ูุงุนุฏุชู ุฃุนูุฏุฉ NoSQL ุงูุฃูุซุฑ ุดููุนูุง ููุง Cassandra (ุงููุดุงุฑ ุฅูููุง ูููุง ููู ุจุงุณู CS) ู HBase (HB). <br><br><img src="https://habrastorage.org/webt/su/rd/39/surd39n7bmrbnxgpn0512tnxamm.png"><br><br>  ุจูุงุกู ุนูู ุฅุฑุงุฏุฉ ุงููุตูุฑ ุ ูุนูู ูุฑูู ุฅุฏุงุฑุฉ ุชุญููู ุงูุจูุงูุงุช ุงูุชุงุจุน ููุง ูู ุณุจูุฑุจูู ุนู ูุซุจ ูุน HB ููุชุฑุฉ <a href="https://habr.com/ru/company/sberbank/blog/420425/">ุทูููุฉ</a> .  ุฎูุงู ูุฐุง ุงูููุช ุ ุฏุฑุณูุง ููุงุท ุงูููุฉ ูุงูุถุนู ุจุดูู ุฌูุฏ ูุชุนูููุง ููู ูุทุจุฎูุง.  ููุน ุฐูู ุ ูุฅู ูุฌูุฏ ุจุฏูู ูู ุดูู CS ุทูุงู ุงูููุช ุฌุนููู ุฃุนุฐุจ ููุณู ุจุดููู: ูู ุงุชุฎุฐูุง ุงูุฎูุงุฑ ุงูุตุญูุญุ  ุนูุงูุฉ ุนูู ุฐูู ุ ูุงูุช ูุชุงุฆุฌ <a href="https://www.datastax.com/products/compare/nosql-performance-benchmarks">ุงูููุงุฑูุฉ</a> ุงูุชู ุฃุฌุฑุงูุง DataStax ุฃู CS ูุฏ ูุฒู ุจุณูููุฉ HB ุจุฏุฑุฌุฉ ุชูุฑูุจูุฉ ุณุงุญูุฉ.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ DataStax ูู ุดุฎุต ููุชู ุ ููุฌุจ ุฃูุง ุชุฃุฎุฐ ูููุฉ ููุง.  ุฃูุถุง ุ ูุงูุช ูููุฉ ุตุบูุฑุฉ ูู ุงููุนูููุงุช ุญูู ุดุฑูุท ุงูุงุฎุชุจุงุฑ ูุญุฑุฌุฉ ุ ูุฐูู ูุฑุฑูุง ุฃู ูุนุฑู ุจุดูู ูุณุชูู ูู ูู ููู BigData NoSql ุ ููุงูุช ุงููุชุงุฆุฌ ูุซูุฑุฉ ููุงูุชูุงู ููุบุงูุฉ. <br><a name="habracut"></a><br>  ููุน ุฐูู ุ ูุจู ุงูุงูุชูุงู ุฅูู ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑุงุช ุงูููุฌุฒุฉ ุ ูู ุงูุถุฑูุฑู ูุตู ุงูุฌูุงูุจ ุงูุฃุณุงุณูุฉ ูุชููููุงุช ุงูุจูุฆุฉ.  ุงูุญูููุฉ ูู ุฃู CS ูููู ุงุณุชุฎุฏุงููุง ูู ูุถุน ุงูุชุณุงูุญ ููุฏุงู ุงูุจูุงูุงุช.  ุฃู  ูุฐุง ุนูุฏูุง ูููู ุฎุงุฏู ูุงุญุฏ (ุนูุฏุฉ) ูุณุคููุงู ุนู ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจููุชุงุญ ูุนูู ุ ูุฅุฐุง ุชู ุฅููุงู ุชุดุบููู ูุณุจุจ ูุง ุ ูุณูุชู ููุฏ ูููุฉ ูุฐุง ุงูููุชุงุญ.  ุจุงููุณุจุฉ ููุนุฏูุฏ ูู ุงูููุงู ุ ูุฐุง ููุณ ุจุงูุฃูุฑ ุงูุญุงุณู ุ ููู ุจุงููุณุจุฉ ูููุทุงุน ุงููุตุฑูู ุ ููุฐุง ูู ุงูุงุณุชุซูุงุก ูููุณ ุงููุงุนุฏุฉ.  ูู ุญุงูุชูุง ุ ูู ุงูููู ุฃู ูููู ูุฏูู ุนุฏุฉ ูุณุฎ ูู ุงูุจูุงูุงุช ููุชุฎุฒูู ุงูููุซูู ุจู. <br><br>  ูุฐูู ุ ุชู ุงููุธุฑ ููุท ูู ูุถุน CS ูููุณุฎ ุงููุชูุงุซู ุงูุซูุงุซู ุ ุฃู  ุชู ุฅูุดุงุก ุงูุญุงูุฉ ุจุงุณุชุฎุฏุงู ุงููุนููุงุช ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> KEYSPACE ks <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLICATION</span></span> = {<span class="hljs-string"><span class="hljs-string">'class'</span></span> : <span class="hljs-string"><span class="hljs-string">'NetworkTopologyStrategy'</span></span>, <span class="hljs-string"><span class="hljs-string">'datacenter1'</span></span> : <span class="hljs-number"><span class="hljs-number">3</span></span>};</code> </pre> <br>  ุนูุงูุฉ ุนูู ุฐูู ุ ููุงู ุทุฑููุชุงู ูุถูุงู ุงููุณุชูู ุงููุทููุจ ูู ุงูุงุชุณุงู.  ุงููุงุนุฏุฉ ุงูุนุงูุฉ: <br>  NW + NR&gt; RF <br><br>  ูุฐุง ูุนูู ุฃู ุนุฏุฏ ุงูุชุฃููุฏุงุช ูู ุงูุนูุฏ ุนูุฏ ุงููุชุงุจุฉ (NW) ุจุงูุฅุถุงูุฉ ุฅูู ุนุฏุฏ ุงูุชุฃููุฏุงุช ูู ุงูุนูุฏ ุนูุฏ ุงููุฑุงุกุฉ (NR) ูุฌุจ ุฃู ูููู ุฃูุจุฑ ูู ุนุงูู ุงููุณุฎ ุงููุชูุงุซู.  ูู ุญุงูุชูุง ุ RF = 3 ูุจุงูุชุงูู ูุฅู ุงูุฎูุงุฑุงุช ุงูุชุงููุฉ ููุงุณุจุฉ: <br>  2 + 2&gt; 3 <br>  3 + 1&gt; 3 <br><br>  ูุธุฑูุง ูุฃูู ูู ุงูุฃูููุฉ ุจููุงู ุจุงููุณุจุฉ ููุง ุฃู ูุญุงูุธ ุนูู ููุซูููุฉ ุงูุจูุงูุงุช ูุฏุฑ ุงูุฅููุงู ุ ููุฏ ุชู ุงุฎุชูุงุฑ ูุฎุทุท 3 + 1.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุนูู HB ุนูู ุฃุณุงุณ ูุดุงุจู ุ ุฃู  ูุซู ูุฐู ุงูููุงุฑูุฉ ุณุชููู ุฃูุซุฑ ุตุฏูุง. <br><br>  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู DataStax ูุงู ุจุงูุนูุณ ูู ุฃุจุญุงุซูู ุ ููุฏ ูุงููุง ุจุชุนููู RF = 1 ููู ูู CS ู HB (ุจุงููุณุจุฉ ุฅูู ุงูุฃุฎูุฑ ูู ุฎูุงู ุชุบููุฑ ุฅุนุฏุงุฏุงุช HDFS).  ูุฐุง ุฌุงูุจ ููู ุญููุง ุ ูุฃู ุงูุชุฃุซูุฑ ุนูู ุฃุฏุงุก CS ูู ูุฐู ุงูุญุงูุฉ ูุจูุฑ.  ุนูู ุณุจูู ุงููุซุงู ุ ุชูุถุญ ุงูุตูุฑุฉ ุฃุฏูุงู ุงูุฒูุงุฏุฉ ูู ุงูููุช ุงููุงุฒู ูุชุญููู ุงูุจูุงูุงุช ูู CS: <br><br><img src="https://habrastorage.org/webt/fw/az/r9/fwazr9muypegpgjpyaq4rnagg8u.png"><br><br>  ููุง ูุฑู ูุง ููู ุ ุงูููุงุถูุน ุงูุฃูุซุฑ ุชูุงูุณุง ุชูุชุจ ุงูุจูุงูุงุช ุ ูููุง ุทุงูุช ุงููุฏุฉ.  ูุฐุง ุฃูุฑ ุทุจูุนู ุ ูููู ูู ุงูููู ุฃู ูููู ุชุฏููุฑ ุฃุฏุงุก RF = 3 ุฃุนูู ุจูุซูุฑ.  ุจูุนูู ุขุฎุฑ ุ ุฅุฐุง ูุชุจูุง ูู 4 ุฌุฏุงูู ูู ูู ูู 5 ุชุฏููุงุช (ุงููุฌููุน 20) ุ ูุฅู RF = 3 ุชููุฏ ุญูุงูู ูุฑุชูู (150 ุซุงููุฉ RF = 3 ููุงุจู 75 ูู RF = 1).  ูููู ุฅุฐุง ูููุง ุจุฒูุงุฏุฉ ุงูุญูู ุนู ุทุฑูู ุชุญููู ุงูุจูุงูุงุช ูู 8 ุฌุฏุงูู ูู ูู ูู 5 ุชุฏููุงุช (ุฅุฌูุงูู 40) ุ ูุฅู ููุฏุงู RF = 3 ูููู ุจุงููุนู 2.7 ูุฑุฉ (375 ุซุงููุฉ ููุงุจู 138). <br><br>  ุฑุจูุง ูุฐุง ุฌุฒุฆููุง ุณุฑ ุงุฎุชุจุงุฑ DataStax ุงููุงุฌุญ ูุงุฎุชุจุงุฑ ุชุญููู CS ุ ูุฃู ุชุบููุฑ ุนุงูู ุงููุณุฎ ุงููุชูุงุซู ูู 2 ุฅูู 3 ูู ููู ูู ุชุฃุซูุฑ ุจุงููุณุจุฉ ูู HB ูู ูููููุง.  ุฃู  ุฃูุฑุงุต ููุณุช ุนูู ุงูุฒุฌุงุฌุฉ ู HB ุงูุชูููู ูุฏููุง.  ููุน ุฐูู ุ ููุงู ุงูุนุฏูุฏ ูู ุงููุฒุงูู ุงูุฃุฎุฑู ุ ูุฃูู ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุฅุตุฏุงุฑ HB ุงูุฎุงุต ุจูุง ุชู ุชุตุญูุญู ูุชุนุชููู ููููุงู ุ ุงูุจูุฆุงุช ูุฎุชููุฉ ุชูุงููุง ุ ุฅูุฎ.  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฃูุถูุง ุฅูู ุฃููู ุฑุจูุง ูุง ุฃุนุฑู ููููุฉ ุฅุนุฏุงุฏ CS ุจุดูู ุตุญูุญ ูููุงู ุจุนุถ ุงูุทุฑู ุงูุฃูุซุฑ ูุงุนููุฉ ููุชุนุงูู ูุนูุง ูุขูู ูู ุงูุชุนูููุงุช ุงูุชู ุณููุชุดููุง.  ููู ุฃูู ุงูุฃุดูุงุก ุฃููุง. <br><br>  ุชู ุฅุฌุฑุงุก ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุนูู ูุฌููุนุฉ ุญุฏูุฏูุฉ ุชุชููู ูู 4 ุฎูุงุฏู ุ ูู ูู ุชูููู: <br><br>  <i>ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ: ุฒููู E5-2680 v4 @ 2.40GHZ 64 ุงูููุงุถูุน.</i> <i><br></i>  <i>ุงูุฃูุฑุงุต: 12 ูุทุนุฉ ูู SATA HDD</i> <i><br></i>  <i>ูุณุฎุฉ ุฌุงูุง: 1.8.0_111</i> <i><br></i> <br><br>  ุฅุตุฏุงุฑ CS: 3.11.5 <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุนููุงุช cassandra.yml</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุนุฏุฏ ุงูุฃุฑูุงู: 256 <br>  hinted_handoff_enabled: ุตุญูุญ <br>  hinted_handoff_throttle_in_kb: 1024 <br>  max_hints_delivery_threads: 2 <br>  ุชูููุญุงุช: / data10 / cassandra / ุชูููุญุงุช <br>  hints_flush_period_in_ms: 10000 <br>  max_hints_file_size_in_mb: 128 <br>  batchlog_replay_throttle_in_kb: 1024 <br>  ุงูููุซู: AllowAllAuthenticator <br>  ุงููุฎูู: AllowAllAuthorizer <br>  Role_manager: CassandraRoleManager <br>  role_validity_in_ms: 2000 <br>  ุฃุฐููุงุช_ุงููุงุฏุฉ_ุงูุนุงู: 2000 <br>  credentials_validity_in_ms: 2000 <br>  ุฃุฏุงุฉ ุงูุชูุณูู: org.apache.cassandra.dht.Murmur3Partitioner <br>  data_file_directories: <br>  - / data1 / cassandra / data # ูู ุฏููู dataN ูู ูุญุฑู ูููุตู <br>  - / data2 / ูุงุณุงูุฏุฑุง / ุงูุจูุงูุงุช <br>  - / data3 / ูุงุณุงูุฏุฑุง / ุงูุจูุงูุงุช <br>  - / data4 / ูุงุณุงูุฏุฑุง / ุงูุจูุงูุงุช <br>  - / data5 / ูุงุณุงูุฏุฑุง / ุงูุจูุงูุงุช <br>  - / data6 / ูุงุณุงูุฏุฑุง / ุงูุจูุงูุงุช <br>  - / data7 / ูุงุณุงูุฏุฑุง / ุงูุจูุงูุงุช <br>  - / data8 / ูุงุณุงูุฏุฑุง / ุงูุจูุงูุงุช <br>  conflog_directory: / data9 / cassandra / conflog <br>  cdc_enabled: ุฎุทุฃ <br>  disk_failure_policy: ุชููู <br>  conf_failure_policy: ุชููู <br>  prepared_statements_cache_size_mb: <br>  thrift_prepared_statements_cache_size_mb: <br>  key_cache_size_in_mb: <br>  key_cache_save_period: 14400 <br>  row_cache_size_in_mb: 0 <br>  row_cache_save_period: 0 <br>  counter_cache_size_in_mb: <br>  counter_cache_save_period: 7200 <br>  save_caches_directory: / data10 / cassandra / save_caches <br>  conflog_sync: ุฏูุฑูุฉ <br>  conflog_sync_period_in_ms: 10000 <br>  conflog_segment_size_in_mb: 32 <br>  seed_provider: <br>  - class_name: org.apache.cassandra.locator.SimpleSeedProvider <br>  ุงููุนููุงุช: <br>  - ุงูุจุฐูุฑ: "* ุ *" <br>  concurrent_reads: 256 # ุญุงูู 64 - ูุง ูุฑู ูุงุญุธุช <br>  concurrent_writes: 256 # ุญุงูู 64 - ูุง ูุฑู ูุงุญุธุช <br>  concurrent_counter_writes: 256 # ุฌุฑุจ 64 - ูู ููุงุญุธ ูุฑู <br>  concurrent_materialized_view_writes: 32 <br>  memtable_heap_space_in_mb: 2048 # ุฌุฑุจ 16 ุฌูุฌุงุจุงูุช - ูุงู ุฃุจุทุฃ <br>  memtable_allocation_type: heap_buffers <br>  index_summary_capacity_in_mb: <br>  index_summary_resize_interval_in_minutes: 60 <br>  trickle_fsync: ุฎุทุฃ <br>  trickle_fsync_interval_in_kb: 10240 <br>  storage_port: 7000 <br>  ssl_storage_port: 7001 <br>  listen_address: * <br>  ุนููุงู ุงูุจุซ: * <br>  listen_on_broadcast_address: ุตุญูุญ <br>  internode_authenticator: org.apache.cassandra.auth.AllowAllInternodeAuthenticator <br>  start_native_transport: ุตุญูุญ <br>  native_transport_port: 9042 <br>  start_rpc: ุตุญูุญ <br>  rpc_address: * <br>  rpc_port: 9160 <br>  rpc_keepalive: ุตุญูุญ <br>  rpc_server_type: sync <br>  thrift_framed_transport_size_in_mb: 15 <br>  incremental_backups: false <br>  snapshot_before_compaction: ุฎุทุฃ <br>  auto_snapshot: ุตุญูุญ <br>  column_index_size_in_kb: 64 <br>  column_index_cache_size_in_kb: 2 <br>  ูุถุงุฏุงุช ุงููุชุฒุงููุฉ: 4 <br>  compaction_throughput_mb_per_sec: 1600 <br>  sstable_preemptive_open_interval_in_mb: 50 <br>  read_request_timeout_in_ms: 100000 <br>  range_request_timeout_in_ms: 200000 <br>  write_request_timeout_in_ms: 40000 <br>  counter_write_request_timeout_in_ms: 100000 <br>  cas_contention_timeout_in_ms: 20000 <br>  truncate_request_timeout_in_ms: 60000 <br>  request_timeout_in_ms: 200000 <br>  slow_query_log_timeout_in_ms: 500 <br>  cross_node_timeout: ุฎุทุฃ <br>  endpoint_snitch: GossipingPropertyFileSnitch <br>  dynamic_snitch_update_interval_in_ms: 100 <br>  dynamic_snitch_reset_interval_in_ms: 600000 <br>  dynamic_snitch_badness_threshold: 0.1 <br>  request_scheduler: org.apache.cassandra.scheduler.NoScheduler <br>  server_encryption_options: <br>  internode_encryption: ูุง ุดูุก <br>  client_encryption_options: <br>  ุชูููู: ุฎุทุฃ <br>  internode_compression: dc <br>  inter_dc_tcp_nodelay: false <br>  tracetype_query_ttl: 86400 <br>  tracetype_repair_ttl: 604800 <br>  enable_user_defined_functions: false <br>  enable_scripted_user_defined_functions: false <br>  windows_timer_interval: 1 <br>  transparent_data_encryption_options: <br>  ุชูููู: ุฎุทุฃ <br>  ุนูุงูุฉ ูููุฒุฉ: ุงูุญุฏ ุงูุฃุฏูู: 1000 <br>  tombstone_failure_threshold: 100000 <br>  batch_size_warn_threshold_in_kb: 200 <br>  batch_size_fail_threshold_in_kb: 250 <br>  unlogged_batch_across_partitions_warn_threshold: 10 <br>  compaction_large_partition_warning_threshold_mb: 100 <br>  gc_warn_threshold_in_ms: 1000 <br>  back_pressure_enabled: ุฎุทุฃ <br>  enable_materialized_views: true <br>  enable_sasi_indexes: ุตุญูุญ <br></div></div><br>  ุฅุนุฏุงุฏุงุช GC: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">### ุฅุนุฏุงุฏุงุช CMS</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  -XX: + UseParNewGC <br>  -XX: + UseConcMarkSweepGC <br>  -XX: + CMSParallelRemarkEnabled <br>  -XX: SurvivorRatio = 8 <br>  -XX: MaxTenuringThreshold = 1 <br>  -XX: CMSInitiatingOccupancyFraction = 75 <br>  -XX: + UseCMSInitiatingOccupancyOnly <br>  -XX: CMSWaitDuration = 10000 <br>  -XX: + CMSParallelInitialMarkEnabled <br>  -XX: + CMSEdenChunksRecordAlways <br>  -XX: + CMSClassUnloadingEnabled <br><br></div></div><br>  ุชู ุชุฎุตูุต ุฐุงูุฑุฉ jvm.options ุจุณุฑุนุฉ 16 ุฌูุฌุง ุจุงูุช (ูุง ุชุฒุงู ุชุญุงูู 32 ุฌูุฌุง ุจุงูุช ุ ููู ููุงุญุธ ุฃู ุงุฎุชูุงู). <br><br>  ุชู ุฅูุดุงุก ุงูุฌุฏุงูู ุจูุงุณุทุฉ ุงูุฃูุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> ks.t1 (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> <span class="hljs-built_in"><span class="hljs-built_in">bigint</span></span> PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span>, title <span class="hljs-built_in"><span class="hljs-built_in">text</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> compression = {<span class="hljs-string"><span class="hljs-string">'sstable_compression'</span></span>: <span class="hljs-string"><span class="hljs-string">'LZ4Compressor'</span></span>, <span class="hljs-string"><span class="hljs-string">'chunk_length_kb'</span></span>: <span class="hljs-number"><span class="hljs-number">64</span></span>};</code> </pre> <br>  ุฅุตุฏุงุฑ HB: 1.2.0-cdh5.14.2 (ูู ุงูุตู org.apache.hadoop.hbase.regionserver.HRegion ุงุณุชุจุนุฏูุง MetricsRegion ููุง ุฃุฏู ุฅูู GC ูุน ุฃูุซุฑ ูู 1000 ููุทูุฉ ุนูู RegionServer) <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฎูุงุฑุงุช HBase ุบูุฑ ุงูุงูุชุฑุงุถูุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  zookeeper.session.timeout: 120000 <br>  hbase.rpc.timeout: ุฏูููุชุงู <br>  hbase.client.scanner.timeout.period: ุฏูููุชุงู <br>  hbase.master.handler.count: 10 <br>  hbase.regionserver.lease.period ุ hbase.client.scanner.timeout.period: 2 ุฏูููุฉ (ุฏูุงุฆู) <br>  hbase.regionserver.handler.count: 160 <br>  hbase.regionserver.metahandler.count: 30 <br>  hbase.regionserver.logroll.period: 4 ุณุงุนุงุช <br>  hbase.regionserver.maxlogs: 200 <br>  hbase.hregion.memstore.flush.size: 1 GiB <br>  hbase.hregion.memstore.block.multiplier: 6 <br>  hbase.hstore.compactionThreshold: 5 <br>  hbase.hstore.blockingStoreFiles: 200 <br>  hbase.hregion.m Majorcompaction: ููู ูุงุญุฏ <br>  HBase Service Advanced Configuration Snippet (ุตูุงู ุงูุฃูุงู) ูู hbase-site.xml: <br>  hbase.regionserver.wal.codecorg.apache.hadoop.hbase.regionserver.wal.IndexedWALEditCodec <br>  hbase.master.namespace.init.timeout3600000 <br>  hbase.regionserver.optionalcacheflushinterval18000000 <br>  hbase.regionserver.thread.compaction.large12 <br>  hbase.regionserver.wal.enablecompressiontrue <br>  hbase.hstore.compaction.max.size1073741824 <br>  hbase.server.compactchecker.interval.multiplier200 <br>  ุฎูุงุฑุงุช ุชูููู Java ูู HBase RegionServer: <br>  -XX: + UseParNewGC -XX: + UseConcMarkSweepGC -XX: CMSInitiatingOccupancyFraction = 70 -XX: + CMSParallelRemarkEnabled -XX: ReservedCodeCacheSize = 256m <br>  hbase.snapshot.master.timeoutMillis: ุฏูููุชุงู <br>  hbase.snapshot.region.timeout: ุฏูููุชุงู <br>  hbase.snapshot.master.timeout.millis: ุฏูููุชุงู <br>  HBase REST Server Max ุญุฌู ุงูุณุฌู: 100 MiB <br>  HBase ุฎุงุฏู ุฃูุตู ุฎุงุฏู ุณุฌู ุงููุณุฎ ุงูุงุญุชูุงุทู: 5 <br>  HBase Thrift Server Max ุญุฌู ุงูุณุฌู: 100 MiB <br>  HBase ุงูุงุฏุฎุงุฑ ุฎุงุฏู ุงูุญุฏ ุงูุฃูุตู ุณุฌู ููู ุงููุณุฎ ุงูุงุญุชูุงุทู: 5 <br>  ูุงุฌุณุชูุฑ ูุงูุณ ุญุฌู ุงูุณุฌู: 100 ููุฌุงุจุงูุช <br>  ูุงุฌุณุชูุฑ ุงููุณุฎ ุงูุงุญุชูุงุทู ููู ุงูุณุฌู ุงูุฃูุตู: 5 <br>  ุณุฌู ููุทูุฉ ุงููุทุงู ุงูุฃูุตู: 100 ููุฌุงุจุงูุช <br>  ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุฃูุตู ูููู ุณุฌู RegionServer: 5 <br>  ูุงูุฐุฉ ุงูุชุดุงู Master HBase ุงููุดุทุฉ: 4 ุฏูุงุฆู <br>  dfs.client.hedged.read.threadpool.size: 40 <br>  dfs.client.hedged.read.threshold.millis: 10 ูููู ุซุงููุฉ <br>  hbase.rest.threads.min: 8 <br>  hbase.rest.threads.max: 150 <br>  ูุงุตูุงุช ููู ุงูุนูููุฉ ุงููุตูู: 180ุ000 <br>  hbase.thrift.minWorkerThreads: 200 <br>  hbase.master.executor.openregion.threads: 30 <br>  hbase.master.executor.closeregion.threads: 30 <br>  hbase.master.executor.serverops.threads: 60 <br>  hbase.regionserver.thread.compaction.small: 6 <br>  hbase.ipc.server.read.threadpool.size: 20 <br>  ุงูููุงุถูุน ููุทูุฉ ุงููุญุฑู: 6 <br>  ุนููู Java Heap Size ุจุงูุจุงูุช: 1 GiB <br>  HBase REST Server ุงููุฌููุนุฉ ุงูุงูุชุฑุงุถูุฉ: 3 GiB <br>  HBase Thrift Server ุงููุฌููุนุฉ ุงูุงูุชุฑุงุถูุฉ: 3 GiB <br>  Java Heap Size of HBase Master in Bytes: 16 GiB <br>  ุญุฌู ูููุฉ Java ูู HBase RegionServer ุจุงูุจุงูุช: 32 ุฌูุฌุง ุจุงูุช <br><br>  + ZooKeeper <br>  maxClientCnxns: 601 <br>  maxSessionTimeout: 120000 </div></div><br>  ุฅูุดุงุก ุงูุฌุฏุงูู: <br>  <i>hbase org.apache.hadoop.hbase.util.RegionSplitter ns: t1 UniformSplit -c 64 -f cf</i> <i><br></i>  <i>ุชุบููุฑ 'ns: t1' ุ {NAME =&gt; 'cf' ุ DATA_BLOCK_ENCODING =&gt; 'FAST_DIFF' ุ COMPRESSION =&gt; 'GZ'}</i> <br><br>  ููุงู ููุทุฉ ูููุฉ ูุงุญุฏุฉ - ูุง ููุถุญ ูุตู DataStax ุนุฏุฏ ุงูููุงุทู ุงูุชู ุชู ุงุณุชุฎุฏุงููุง ูุฅูุดุงุก ุฌุฏุงูู HB ุ ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุฃูุฑ ููู ุจุงููุณุจุฉ ูููููุงุช ุงููุจูุฑุฉ.  ูุฐูู ุ ููุงุฎุชุจุงุฑุงุช ุ ุชู ุงุฎุชูุงุฑ ุงูุฑูู = 64 ุ ูุงูุฐู ูุณูุญ ุจุชุฎุฒูู ูุง ูุตู ุฅูู 640 ุฌูุฌุงุจุงูุช ุ ุฃู  ุทุงููุฉ ูุชูุณุทุฉ ุงูุญุฌู. <br><br>  ูู ููุช ุงูุงุฎุชุจุงุฑ ุ ูุงู ูุฏู HBase 22 ุฃูู ุทุงููุฉ ู 67 ุฃูู ููุทูุฉ (ุณูููู ุฐูู ูุงุชูุงู ุจุงููุณุจุฉ ููุฅุตุฏุงุฑ 1.2.0 ุ ุฅู ูู ููู ููุชุตุญูุญ ุงููุฐููุฑ ุฃุนูุงู). <br><br>  ุงูุขู ููุฑูุฒ.  ูุธุฑูุง ูุฃูู ูู ููู ูู ุงููุงุถุญ ุงูุชููููุงุช ุงูุฃูุซุฑ ูุงุฆุฏุฉ ููุงุนุฏุฉ ุจูุงูุงุช ูุนููุฉ ุ ููุฏ ุชู ุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑุงุช ูู ูุฌููุนุงุช ูุฎุชููุฉ.  ุฃู  ูู ุจุนุถ ุงูุงุฎุชุจุงุฑุงุช ุ ุฐูุจ ุงูุญูู ูู ููุช ูุงุญุฏ ุฅูู 4 ุฌุฏุงูู (ุชู ุงุณุชุฎุฏุงู ุฌููุน ุงูุนูุฏ ุงูุฃุฑุจุนุฉ ููุงุชุตุงู).  ูู ุงุฎุชุจุงุฑุงุช ุฃุฎุฑู ุ ุนูููุง ูุน 8 ุทุงููุงุช ูุฎุชููุฉ.  ูู ุจุนุถ ุงูุญุงูุงุช ุ ูุงู ุญุฌู ุงูุฏููุนุงุช 100 ุ ููู ุญุงูุงุช ุฃุฎุฑู 200 (ูุนููุฉ ุงูุฏููุนุงุช - ุงูุธุฑ ุงูููุฏ ุฃุฏูุงู).  ุญุฌู ุงูุจูุงูุงุช ูููููุฉ 10 ุจุงูุช ุฃู 100 ุจุงูุช (ุญุฌู ุงูุจูุงูุงุช).  ูู ุงููุฌููุน ุ ุชู ูุชุงุจุฉ 5 ููุงููู ุงูุณุฌูุงุช ูุทุฑุญูุง ูู ูู ูุฑุฉ ูู ูู ุฌุฏูู.  ูู ุงูููุช ููุณู ุ ุชูุช ูุชุงุจุฉ / ูุฑุงุกุฉ 5 ุชุฏููุงุช ูู ูู ุฌุฏูู (ุฑูู ุงูุฏูู ูู thNum) ุ ุงุณุชุฎุฏู ูู ูููุง ูุทุงูู ุงูุฑุฆูุณู (ุนุฏุฏ = 1 ููููู): <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (opType.equals(<span class="hljs-string"><span class="hljs-string">"insert"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Long key = count * thNum; key &lt; count * (thNum + <span class="hljs-number"><span class="hljs-number">1</span></span>); key += <span class="hljs-number"><span class="hljs-number">0</span></span>) { StringBuilder sb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(<span class="hljs-string"><span class="hljs-string">"BEGIN BATCH "</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; batch; i++) { String value = RandomStringUtils.random(dataSize, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); sb.append(<span class="hljs-string"><span class="hljs-string">"INSERT INTO "</span></span>) .append(tableName) .append(<span class="hljs-string"><span class="hljs-string">"(id, title) "</span></span>) .append(<span class="hljs-string"><span class="hljs-string">"VALUES ("</span></span>) .append(key) .append(<span class="hljs-string"><span class="hljs-string">", '"</span></span>) .append(value) .append(<span class="hljs-string"><span class="hljs-string">"');"</span></span>); key++; } sb.append(<span class="hljs-string"><span class="hljs-string">"APPLY BATCH;"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String query = sb.toString(); session.execute(query); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Long key = count * thNum; key &lt; count * (thNum + <span class="hljs-number"><span class="hljs-number">1</span></span>); key += <span class="hljs-number"><span class="hljs-number">0</span></span>) { StringBuilder sb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(<span class="hljs-string"><span class="hljs-string">"SELECT * FROM "</span></span>).append(tableName).append(<span class="hljs-string"><span class="hljs-string">" WHERE id IN ("</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; batch; i++) { sb = sb.append(key); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i+<span class="hljs-number"><span class="hljs-number">1</span></span> &lt; batch) sb.append(<span class="hljs-string"><span class="hljs-string">","</span></span>); key++; } sb = sb.append(<span class="hljs-string"><span class="hljs-string">");"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String query = sb.toString(); ResultSet rs = session.execute(query); } }</code> </pre><br>  ููููุง ูุฐูู ุ ุชู ุชูููุฑ ูุธููุฉ ููุงุซูุฉ ูู HB: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Configuration conf = getConf(); HTable table = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HTable(conf, keyspace + <span class="hljs-string"><span class="hljs-string">":"</span></span> + tableName); table.setAutoFlush(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); List&lt;Get&gt; lGet = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); List&lt;Put&gt; lPut = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] cf = Bytes.toBytes(<span class="hljs-string"><span class="hljs-string">"cf"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] qf = Bytes.toBytes(<span class="hljs-string"><span class="hljs-string">"value"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (opType.equals(<span class="hljs-string"><span class="hljs-string">"insert"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Long key = count * thNum; key &lt; count * (thNum + <span class="hljs-number"><span class="hljs-number">1</span></span>); key += <span class="hljs-number"><span class="hljs-number">0</span></span>) { lPut.clear(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; batch; i++) { Put p = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Put(makeHbaseRowKey(key)); String value = RandomStringUtils.random(dataSize, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); p.addColumn(cf, qf, value.getBytes()); lPut.add(p); key++; } table.put(lPut); table.flushCommits(); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Long key = count * thNum; key &lt; count * (thNum + <span class="hljs-number"><span class="hljs-number">1</span></span>); key += <span class="hljs-number"><span class="hljs-number">0</span></span>) { lGet.clear(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; batch; i++) { Get g = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Get(makeHbaseRowKey(key)); lGet.add(g); key++; } Result[] rs = table.get(lGet); } }</code> </pre><br>  ูุธุฑูุง ูุฃู ุงูุนููู ูุฌุจ ุฃู ููุชู ุจุงูุชูุฒูุน ุงูููุญุฏ ููุจูุงูุงุช ูู HB ุ ูุฅู ูุธููุฉ ุงูุชูููุญ ุงูุฑุฆูุณูุฉ ุชุจุฏู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] makeHbaseRowKey(<span class="hljs-keyword"><span class="hljs-keyword">long</span></span> key) { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] nonSaltedRowKey = Bytes.toBytes(key); CRC32 crc32 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CRC32(); crc32.update(nonSaltedRowKey); <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> crc32Value = crc32.getValue(); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] salt = Arrays.copyOfRange(Bytes.toBytes(crc32Value), <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ArrayUtils.addAll(salt, nonSaltedRowKey); }</code> </pre><br>  ุงูุขู ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ุงููุชุงุฆุฌ: <br><br><img src="https://habrastorage.org/webt/id/yd/pc/idydpc9plsmulsycf0i-wqy3c3c.png"><br><br>  ููุณ ุงูุฑุณู ุงูุจูุงูู: <br><br><img src="https://habrastorage.org/webt/72/ag/o1/72ago1u2gdnlufjanqwavk5p1jk.png"><br><br>  ุชุชููุฒ ููุฒุฉ HB ุจุฃููุง ูุฏูุดุฉ ูุฏุฑุฌุฉ ุฃูู ููุฌุฏ ุดู ูู ูุฌูุฏ ููุน ูู ุนูู ุงูุฒุฌุงุฌุฉ ูู ุฅุนุฏุงุฏุงุช CS.  ููุน ุฐูู ุ ูุฅู googling ูุงูุชูุงุก ุงููุนููุงุช ุงูุฃูุซุฑ ูุถูุญูุง (ูุซู concurrent_writes ุฃู memtable_heap_space_in_mb) ูู ูุนุทูุง ุชุณุงุฑุนูุง.  ูู ุงูููุช ููุณู ุ ุณุฌูุงุช ูุธููุฉ ุ ูุง ุฃูุณู ุนูู ุฃู ุดูุก. <br><br>  ุชููู ุงูุจูุงูุงุช ุจุงูุชุณุงูู ุนุจุฑ ุงูุนูุฏ ุ ูุงูุฅุญุตุงุกุงุช ูู ุฌููุน ุงูุนูุฏ ูู ููุณูุง ุชูุฑูุจุง. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูููุง ููู ุงูุฅุญุตุงุกุงุช ุงูููุฌูุฏุฉ ุนูู ุงูุฌุฏูู ูุน ุฅุญุฏู ุงูุนูุฏ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  Keyspace: ูุงูุณุงุณ <br>  ุนุฏุฏ ูุฑุงุช ุงููุฑุงุกุฉ: 9383707 <br>  ูุฑุงุกุฉ ุงููููู: 0.04287025042448576 ูููู <br>  ุนุฏุฏ ุงููุชุงุจุฉ: 15462012 <br>  ุงููุชุงุจุฉ ุงููููู: 0.1350068438699957 ูููู <br>  ุงููุจุงุช ุงููุนููุฉ: 0 <br>  ุงูุฌุฏูู: t1 <br>  SSTable ุงูุนุฏ: 16 <br>  ุงููุณุงุญุฉ ุงููุณุชุฎุฏูุฉ (ุญู): 148.59 ููุฌุงุจุงูุช <br>  ุงููุณุงุญุฉ ุงููุณุชุฎุฏูุฉ (ุงููุฌููุน): 148.59 ููุฌุงุจุงูุช <br>  ุงููุณุงุญุฉ ุงููุณุชุฎุฏูุฉ ูู ูุจู ููุทุงุช (ุงูุฅุฌูุงูู): 0 ุจุงูุช <br>  ุฅููุงู ูููุฉ ุงูุฐุงูุฑุฉ ุงููุณุชุฎุฏูุฉ (ุงูุฅุฌูุงูู): 5.17 ููุฌุงุจุงูุช <br>  ูุณุจุฉ ุถุบุท SSTable: 0.5720989576459437 <br>  ุนุฏุฏ ุงูุฃูุณุงู (ุชูุฏูุฑ): 3970323 <br>  ุนุฏุฏ ุงูุฎูุงูุง Memtable: 0 <br>  ุญุฌู ุงูุจูุงูุงุช Memtable: 0 ุจุงูุช <br>  Memtable ุฅููุงู ุงูุฐุงูุฑุฉ ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุงููุณุชุฎุฏูุฉ: 0 ุจุงูุช <br>  Memtable ุงูุชุจุฏูู ุงูุนุฏ: 5 <br>  ุฅุญุตุงุก ุงููุฑุงุกุฉ ุงููุญูู: 2346045 <br>  ูุฑุงุกุฉ ุฒูู ุงููุตูู ุงููุญูู: NaN ms <br>  ุนุฏุฏ ุงููุชุงุจุฉ ุงููุญููุฉ: 3865503 <br>  ุฒูู ุงูุชูุงู ุงููุชุงุจุฉ ุงููุญููุฉ: NaN ms <br>  ุงููุจุงุช ุงููุนููุฉ: 0 <br>  ุฅุตูุงุญ ุงููุณุจุฉ ุงููุฆููุฉ: 0.0 <br>  ุจููู ูุฑุดุญ ุงูุฌุงุจูุงุช ูุงุฐุจุฉ: 25 <br>  ุจููู ูุฑุดุญ ูุณุจุฉ ูุงุฐุจุฉ: 0.00000 <br>  ูุณุงุญุฉ ูุฑุดุญ ุจููู ุงููุณุชุฎุฏูุฉ: 4.57 ููุฌุงุจุงูุช <br>  ุชุตููุฉ ุจููู ูุจุงูุฉ ุฐุงูุฑุฉ ูููุฉ ุงููุณุชุฎุฏูุฉ: 4.57 ููุบุงุจุงูุช <br>  ููุฎุต ุงูููุฑุณ ุฅููุงู ุงูุฐุงูุฑุฉ ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุงููุณุชุฎุฏูุฉ: 590.02 KiB <br>  ุจูุงูุงุช ุงูุชุนุฑูู ุถุบุท ุฎุงุฑุฌ ุงูุฐุงูุฑุฉ ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุงููุณุชุฎุฏูุฉ: 19.45 ููููุจุงูุช <br>  ุงูุญุฏ ุงูุฃุฏูู ูู ูุญุฏุงุช ุงูุจุงูุช ุงููุถุบูุทุฉ: 36 <br>  ุงูุญุฏ ุงูุฃูุตู ููุณู ุงูุจุงูุช ุงููุถุบูุทุฉ: 42 <br>  ูุนูู ุงููุณู ุงููุถุบูุท ุจุงูุช: 42 <br>  ูุชูุณุท โโุงูุฎูุงูุง ุงูุญูุฉ ููู ุดุฑูุญุฉ (ุขุฎุฑ ุฎูุณ ุฏูุงุฆู): NaN <br>  ุงูุญุฏ ุงูุฃูุตู ููุฎูุงูุง ุงูุญูุฉ ููู ุดุฑูุญุฉ (ุขุฎุฑ ุฎูุณ ุฏูุงุฆู): 0 <br>  ุดูุงูุฏ ุงููุจูุฑ ุงููุชูุณุทุฉ ููู ุดุฑูุญุฉ (ุขุฎุฑ ุฎูุณ ุฏูุงุฆู): NaN <br>  ุงูุญุฏ ุงูุฃูุตู ูุดูุงูุฏ ุงููุจูุฑ ููู ุดุฑูุญุฉ (ุขุฎุฑ ุฎูุณ ุฏูุงุฆู): 0 <br>  ุงูุทูุฑุงุช ุงููุณูุทุฉ: 0 ุจุงูุช <br></div></div><br>  ูู ููู ููุญุงููุฉ ุชูููู ุญุฌู ุงูุฏููุนุฉ (ุญุชู ุฅุฑุณุงู ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู) ุชุฃุซูุฑ ุ ุจู ุงุฒุฏุงุฏุช ุณูุกูุง.  ูู ุงููููู ุฃู ูููู ูุฐุง ูู ุงููุงูุน ูู ุฃูุตู ุฃุฏุงุก ูู CS ุ ุญูุซ ุฅู ุงููุชุงุฆุฌ ุงูุชู ุชู ุงูุญุตูู ุนูููุง ุนูู CS ุชุดุจู ุชูู ุงูุชู ุชู ุงูุญุตูู ุนูููุง ูู DataStax - ุญูุงูู ูุฆุงุช ุงูุขูุงู ูู ุงูุนูููุงุช ูู ุงูุซุงููุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุฅุฐุง ูุธุฑุช ุฅูู ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ ุ ูุณุชุฑู ุฃู CS ูุณุชุฎุฏู ุงููุซูุฑ ูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุงูุฃูุฑุงุต: <br><br><img src="https://habrastorage.org/webt/us/fo/i4/usfoi4-mgkktzlosilmz2ogm7uu.png"><br>  <i>ููุถุญ ุงูุดูู ุงุณุชุฎุฏุงู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุนูู ุงูุชูุงูู ููู ูู ููุงุนุฏ ุงูุจูุงูุงุช.</i> <br><br>  ูููุง ูุชุนูู ุจููุงุฆุฏ ุงููุฑุงุกุฉ ุงููููุฉ ูู HB.  ูููู ููุงุญุธุฉ ุฃู ุงุณุชุฎุฏุงู ุงููุฑุต ุฃุซูุงุก ุงููุฑุงุกุฉ ููุฎูุถ ููุบุงูุฉ ุจุงููุณุจุฉ ููู ูู ููุงุนุฏ ุงูุจูุงูุงุช (ุงุฎุชุจุงุฑุงุช ุงููุฑุงุกุฉ ูู ุงูุฌุฒุก ุงูุฃุฎูุฑ ูู ุฏูุฑุฉ ุงูุงุฎุชุจุงุฑ ููู ูุงุนุฏุฉ ุจูุงูุงุช ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู CS ูู 15:20 ุฅูู 15:40).  ูู ุญุงูุฉ HB ุ ุงูุณุจุจ ูุงุถุญ - ููุนุธู ุงูุจูุงูุงุช ูุนููุฉ ูู ุงูุฐุงูุฑุฉ ุ ูู ุงูุฐุงูุฑุฉ ุ ูุจุนุถูุง ุชู ุชุฎุฒููู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช.  ุจุงููุณุจุฉ ุฅูู CS ุ ููุณ ูู ุงููุงุถุญ ุชูุงููุง ููู ูุนูู ุ ููุน ุฐูู ุ ูุฅู ุงุณุชุฎุฏุงู ุงููุฑุต ุบูุฑ ูุฑุฆู ุฃูุถูุง ุ ูููู ููุท ูู ุญุงูุฉ ุญุฏูุซ ูุญุงููุฉ ูุชุดุบูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช row_cache_size_in_mb = 2048 ูุชุนููู ุงูุชุฎุฒูู ุงููุคูุช = {'keys': 'ALL'ุ 'rows_per_partition': ' 2ุ000ุ000 '} ุ ูููู ูุฐุง ุฌุนู ุงูุฃูุฑ ุฃุณูุฃ ููููุง. <br><br>  ูุฌุฏุฑ ุฃูุถูุง ุฃู ูููู ูุฑุฉ ุฃุฎุฑู ููุทุฉ ูููุฉ ุญูู ุนุฏุฏ ุงูููุงุทู ูู HB.  ูู ุญุงูุชูุง ุ ุชูุช ุงูุฅุดุงุฑุฉ ุฅูู ุงููููุฉ 64. ุฅุฐุง ููุช ุจุชูููููุง ูุฌุนูุชูุง ุชุณุงูู ุนูู ุณุจูู ุงููุซุงู 4 ุ ุซู ุนูุฏ ุงูุฎูุงุถ ุงูุณุฑุนุฉ ุชูุฎูุถ ูุฑุชูู.  ูุงูุณุจุจ ูู ุฃู memstore ุณูู ุชุณุฏ ุจุดูู ุฃุณุฑุน ูุฃู ุงููููุงุช ุณูู ุชุชุณุฑุจ ุฃูุซุฑ ูู ูุฑุฉ ุ ูุนูุฏ ูุฑุงุกุชูุง ุณุชุญุชุงุฌ ุฅูู ูุนุงูุฌุฉ ุงููุฒูุฏ ูู ุงููููุงุช ุ ููู ุนูููุฉ ูุนูุฏุฉ ุฅูู ุญุฏ ูุง ุจุงููุณุจุฉ ูู HB.  ูู ุงูุธุฑูู ุงูุญููููุฉ ุ ูููู ูุนุงูุฌุฉ ุฐูู ูู ุฎูุงู ุงูุชูููุฑ ูู ุงุณุชุฑุงุชูุฌูุฉ ุงูุฅุนุฏุงุฏ ุงููุณุจู ูุงูุชุนุงูุฏ ุ ุนูู ูุฌู ุงูุฎุตูุต ุ ูุณุชุฎุฏู ุฃุฏุงุฉ ูุณุงุนุฏุฉ ุฐุงุชูุฉ ุชุฌูุน ุงูููุงูุฉ ูุชุถุบุท HFiles ุจุงุณุชูุฑุงุฑ ูู ุงูุฎูููุฉ.  ูู ุงููููู ุฃูู ุจุงููุณุจุฉ ูุงุฎุชุจุงุฑุงุช DataStax ุ ุชู ุชุฎุตูุต ููุทูุฉ ูุงุญุฏุฉ ุนููููุง ููู ุฌุฏูู (ููุฐุง ุบูุฑ ุตุญูุญ) ููุฐุง ุณููุถุญ ุฅูู ุญุฏ ูุง ุณุจุจ ููุฏุงู HB ูุซูุฑูุง ูู ุงุฎุชุจุงุฑุงุช ุงููุฑุงุกุฉ ุงูุฎุงุตุฉ ุจูู. <br><br>  ุงูุงุณุชูุชุงุฌุงุช ุงูุฃูููุฉ ูู ูุฐุง ูู ุนูู ุงููุญู ุงูุชุงูู.  ุนูู ุงูุชุฑุงุถ ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ูุงุฏุญุฉ ุฃุซูุงุก ุงูุงุฎุชุจุงุฑ ุ ูุฅู ูุงุณุงูุฏุฑุง ูุดุจู ุงูุนููุงู ุฐู ุฃูุฏุงู ูู ุงูุทูู.  ุจุชุนุจูุฑ ุฃุฏู ุ ุจูููุง ุชุชูุงุฒู ุนูู ุณุงู ูุงุญุฏุฉ ุ ููุง ูู ุงูุตูุฑุฉ ูู ุจุฏุงูุฉ ุงูููุงู ุ ูุฅููุง ุชุธูุฑ ูุชุงุฆุฌ ุฌูุฏุฉ ูุณุจููุง ุ ููู ุนูุฏูุง ุชูุงุชู ูู ุธู ููุณ ุงูุธุฑูู ุ ูุฅููุง ุชุฎุณุฑ ุชูุงููุง.  ูู ุงูููุช ููุณู ุ ูุน ุงูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุงูุงุณุชุฎุฏุงู ุงูููุฎูุถ ููุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุนูู ุฃุฌูุฒุชูุง ุ ุชุนูููุง ุฃู ูุฒุฑุน HBs ูู RegionServer ููู ูุถูู ูุจุงูุชุงูู ุถุงุนูุช ุงูุฅูุชุงุฌูุฉ.  ุฃู  ูุน ุงูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ ุ ูุฅู ูุถุน CS ุฃูุซุฑ ุงุณุชูุงุกูุง. <br><br>  ุจุงูุทุจุน ุ ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุงุตุทูุงุนูุฉ ุชูุงููุง ููููุฉ ุงูุจูุงูุงุช ุงููุณุชุฎุฏูุฉ ููุง ูุชูุงุถุนุฉ ูุณุจููุง.  ูู ุงููุญุชูู ุฃูู ุนูุฏ ุงูุชุจุฏูู ุฅูู ุชูุฑุงุจุงูุช ุ ุณูููู ุงููููู ูุฎุชูููุง ุ ูููู ุฅุฐุง ูุงู ุจูุณุน HB ุชุญููู ุชูุฑุงุจุงูุช ุ ููุฏ ูุงู ูุฐุง ุจุงููุณุจุฉ ุฅูู CS ููุซู ูุดููุฉ.  ุบุงูุจูุง ูุง ูุชู ุทุฑุญู ุนูู OperationTimedOutException ุญุชู ูุน ูุฐู ุงููููุงุช ุ ุนูู ุงูุฑุบู ูู ุฃู ูุนููุงุช ุชููุน ุงูุงุณุชุฌุงุจุฉ ูุฏ ุชูุช ุฒูุงุฏุชูุง ุจุงููุนู ุนุฏุฉ ูุฑุงุช ููุงุฑูุฉ ุจุงูุนูุงุตุฑ ุงูุงูุชุฑุงุถูุฉ. <br><br>  ุขูู ุฃูู ูู ุฎูุงู ุงูุฌููุฏ ุงููุดุชุฑูุฉ ุ ุณูุฌุฏ ุงุฎุชูุงูุงุช ูู ุฎุฏูุฉ ุงูุนููุงุก ูุฅุฐุง ูุฌุญูุง ูู ุชุณุฑูุนูุง ุ ูุนูุฏุฆุฐ ุณุฃุถูู ุจุงูุชุฃููุฏ ูุนูููุงุช ุญูู ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ ูู ููุงูุฉ ุงูููุดูุฑ. <br><br>  <b>ูุญุฏุซ:</b> ุชู ุชุทุจูู ุงูุฅุฑุดุงุฏุงุช ุงูุชุงููุฉ ุนูู ุฅุนุฏุงุฏ CS: <br><br>  <i>disk_optimization_strategy: ุงูุบุฒู</i> <i><br></i>  <i>MAX_HEAP_SIZE = "32G"</i> <i><br></i>  <i>HEAP_NEWSIZE = "3200M"</i> <i><br></i>  <i>-Xms32G</i> <i><br></i>  <i>-Xmx32G</i> <i><br></i>  <i>-XX: + UseG1GC</i> <i><br></i>  <i>-XX: G1RSetUpdatingPauseTimePercent = 5</i> <i><br></i>  <i>-XX: MaxGCPauseMillis = 500</i> <i><br></i>  <i>-XX: initatingHeapOccupancyPercent = 70</i> <i><br></i>  <i>-XX: ParallelGCThreads = 32</i> <i><br></i>  <i>-XX: ConcGCThreads = 8</i> <br><br>  ุจุงููุณุจุฉ ุฅูู ุฅุนุฏุงุฏุงุช ูุธุงู ุงูุชุดุบูู ุ ูุนุฏ ูุฐุง ุงูุฅุฌุฑุงุก ุทููููุง ููุนูุฏูุง (ุงูุญุตูู ุนูู ุงูุฌุฐุฑ ุ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎูุงุฏู ุ ููุง ุฅูู ุฐูู) ุ ูุฐูู ูู ูุชู ุชุทุจูู ูุฐู ุงูุชูุตูุงุช.  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ููุง ููุงุนุฏ ุงูุจูุงูุงุช ูู ุธุฑูู ูุชุณุงููุฉ ุ ูุฐูู ูู ุดูุก ุนุงุฏู. <br><br>  ูู ุฌุฒุก ุงูููุฏ ุ ููุฌุฏ ููุตู ูุงุญุฏ ูุฌููุน ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุงูุชู ุชูุชุจ ุฅูู ุงูุฌุฏูู: <br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">connector = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CassandraConnector(); connector.connect(node, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, CL); session = connector.getSession(); session.getCluster().getConfiguration().getSocketOptions().setConnectTimeoutMillis(<span class="hljs-number"><span class="hljs-number">120000</span></span>); KeyspaceRepository sr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KeyspaceRepository(session); sr.useKeyspace(keyspace); prepared = session.prepare(<span class="hljs-string"><span class="hljs-string">"insert into "</span></span> + tableName + <span class="hljs-string"><span class="hljs-string">" (id, title) values (?, ?)"</span></span>);</code> </pre> <br><br>  ุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ุนุจุฑ ุงูุฑุจุท: <br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Long key = count * thNum; key &lt; count * (thNum + <span class="hljs-number"><span class="hljs-number">1</span></span>); key++) { String value = RandomStringUtils.random(dataSize, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); session.execute(prepared.bind(key, value)); }</code> </pre> <br><br>  ูู ููู ููุฐุง ุชุฃุซูุฑ ูุจูุฑ ุนูู ุฃุฏุงุก ุงูุชุณุฌูู.  ูู ุฃุฌู ุงูููุซูููุฉ ุ ุฃุทููุช ุงูุญูู ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ YCSB ุ ููู ููุณ ุงููุชูุฌุฉ ุชูุงููุง.  ููุฌุฏ ุฃุฏูุงู ุฅุญุตุงุฆูุงุช ููุคุดุฑ ูุงุญุฏ (ูู ุฃุตู 4): <br><br>  <i>2020-01-18 14: 41: 53: 180 315 ุซุงููุฉ: 10ุ000ุ000 ุนูููุฉ ุ</i>  <i>21589.1 ุงูุนูููุงุช ุงูุญุงููุฉ / ุซุงููุฉ ุ</i>  <i>[CLEANUP: Count = 100 ุ Max = 2236415 ุ Min = 1 ุ Avg = 22356.39 ุ 90 = 4 ุ 99 = 24 ุ 99.9 = 2236415 ุ 99.99 = 2236415] [INSERT: Count = 119551ุ Max = 174463ุ Min = 273ุ ุงููุชูุณุท โโ= 2582.71 ุ 90 = 3491 ุ 99 = 16767 ุ 99.9 = 99711 ุ 99.99 = 171263]</i> <i><br></i>  <i>[ุจุดูู ุนุงู] ุ RunTime (ูููู ุซุงููุฉ) ุ 315539</i> <i><br></i>  <i>[ุจุดูู ุนุงู] ุ ุงูุฅูุชุงุฌูุฉ (ุงูุนูููุงุช / ุซุงููุฉ) ุ 31691.803548848162</i> <i><br></i>  <i>[TOTAL_GCS_PS_Scavenge] ุ ุงูุนุฏุฏ ุ 161</i> <i><br></i>  <i>[TOTAL_GC_TIME_PS_Scavenge] ุ ุงูููุช (ูููู ุซุงููุฉ) ุ 2433</i> <i><br></i>  <i>[TOTAL_GC_TIME _ูช _ PS_Scavenge] ุ ุงูููุช (ูช) ุ 0.7710615803434757</i> <i><br></i>  <i>[TOTAL_GCS_PS_MarkSweep] ุ ุนุฏุฏ ุ 0</i> <i><br></i>  <i>[TOTAL_GC_TIME_PS_MarkSweep] ุ ุงูููุช (ูููู ุซุงููุฉ) ุ 0</i> <i><br></i>  <i>[TOTAL_GC_TIME _ูช _ PS_MarkSweep] ุ ุงูููุช (ูช) ุ 0.0</i> <i><br></i>  <i>[TOTAL_GCs] ุ ุงููููุช ุ 161</i> <i><br></i>  <i>[TOTAL_GC_TIME] ุ ุงูููุช (ูููู ุซุงููุฉ) ุ 2433</i> <i><br></i>  <i>[TOTAL_GC_TIME_ูช] ุ ุงูููุช (ูช) ุ 0.7710615803434757</i> <i><br></i>  <i>[ุฅุฏุฑุงุฌ] ุ ุงูุนูููุงุช ุ 1000000</i> <i><br></i>  <i>[INSERT] ุ AverageLatency (us) ุ 3114.2427012</i> <i><br></i>  <i>[ุฅุฏุฑุงุฌ] ุ MinLatency (ููุง) ุ 269</i> <i><br></i>  <i>[INSERT] ุ MaxLatency (us) ุ 609279</i> <i><br></i>  <i>[INSERT] ุ 95thPercentileLatency (us) ุ 5007</i> <i><br></i>  <i>[INSERT] ุ 99 thPercentileLatency (us) ุ 33439</i> <i><br></i>  <i>[INSERT] ุ Return = OK ุ 10000000</i> <i><br></i> <br><br>  ููุง ููููู ุฃู ุชุฑู ุฃู ุณุฑุนุฉ ุฏูู ูุงุญุฏ ูู ุญูุงูู 32 ุฃูู ุณุฌู ูู ุงูุซุงููุฉ ุงููุงุญุฏุฉ ุ ุชุนูู 4 ุชุฏููุงุช ุ ูุชุจูู 128 ุฃูููุง ุ ููุจุฏู ุฃูู ูุง ููุฌุฏ ุดูุก ุขุฎุฑ ููุถุบุท ุนูู ุงูุฅุนุฏุงุฏุงุช ุงูุญุงููุฉ ูููุธุงู ุงููุฑุนู ูููุฑุต. <br><br>  ุญูู ูุฑุงุกุฉ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู.  ุจูุถู ูุตูุญุฉ ุงูุฑูุงู ุ ุชููู ูู ุชุณุฑูุน ุฌุฐุฑู.  ุฃุฌุฑูุช ุงููุฑุงุกุฉ ููุณ ูู 5 ุชูุงุฑุงุช ุ ูููู ูู 100. ุฒูุงุฏุฉ ุฅูู 200 ูู ููุชุฌ ุนููุง ุชุฃุซูุฑ.  ุชูุช ุงูุฅุถุงูุฉ ุฃูุถูุง ุฅูู ุงูููุดุฆ: <br>  .withLoadBalancingPolicy (TokenAwarePolicy ุงูุฌุฏูุฏ (DCAwareRoundRobinPolicy.builder (). build ())) <br><br>  ูุชูุฌุฉ ูุฐูู ุ ุฅุฐุง ุฃุธูุฑ ุงูุงุฎุชุจุงุฑ ูู ููุช ูุจูุฑ 159 644 ููุชุจ ุฎุฏูุงุช ุงููุดุงุฑูุน (5 ุชุฏููุงุช ุ 4 ุฌุฏุงูู ุ 100 ุฏูุนุฉ) ุ ุงูุขู: <br>  100 ูุคุดุฑ ุชุฑุงุจุท ุ 4 ุฌุฏุงูู ุ ูุฌููุนุฉ = 1 (ุจุดูู ูุฑุฏู): 301 969 ops <br>  100 ูุคุดุฑ ุชุฑุงุจุท ุ 4 ุฌุฏุงูู ุ ุฏููุนุฉ = 10: 447 608 ops <br>  100 ูุคุดุฑ ุชุฑุงุจุท ุ 4 ุฌุฏุงูู ุ ุฏููุนุฉ = 100: 625 655 ops <br><br>  ูุธุฑูุง ูุฃู ุงููุชุงุฆุฌ ุฃูุถู ูุน ุงูุฏููุนุงุช ุ ููุฏ ุฃุฌุฑูุช ุงุฎุชุจุงุฑุงุช * ููุงุซูุฉ ูุน HB: <br><img src="https://habrastorage.org/webt/ct/bk/-y/ctbk-yrecbwegasrbpauq6f1vv8.png"><br>  <i>* ููุฐ ุงูุนูู ูู 400 ูุคุดุฑ ุชุฑุงุจุท ุ ูุฅู ูุธููุฉ RandomStringUtils ุ ุงูุชู ุชู ุงุณุชุฎุฏุงููุง ุณุงุจููุง ุ ูุฏ ุชู ุชุญููู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุจูุณุจุฉ 100ูช ุ ูุชู ุงุณุชุจุฏุงููุง ุจูููุฏ ุฃุณุฑุน.</i> <br><br>  ูุจุงูุชุงูู ุ ูุฅู ุฒูุงุฏุฉ ุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุนูุฏ ุชุญููู ุงูุจูุงูุงุช ูุนุทู ุฒูุงุฏุฉ ุจุณูุทุฉ ูู ุฃุฏุงุก HB. <br><br>  ุฃูุง ุจุงููุณุจุฉ ูููุฑุงุกุฉ ุ ูุฅููู ูุชุงุฆุฌ ุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุงุช.  ุจูุงุกู ุนูู ุทูุจ <a href="https://habr.com/ru/users/0x62ash/" class="user_link">0x62ash</a> ุ ุชู ุชูููุฐ ุฃูุฑ ุงูุชุฏูู ูุจู ุงููุฑุงุกุฉ ุ ููุง ุชุชููุฑ ุนุฏุฉ ุฎูุงุฑุงุช ุฃุฎุฑู ููููุงุฑูุฉ: <br>  Memstore - ุงููุฑุงุกุฉ ูู ุงูุฐุงูุฑุฉ ุ ุฃู  ูุจู ุงูุชูุธูู ุนูู ุงููุฑุต. <br>  HFile + zip - ุงููุฑุงุกุฉ ูู ุงููููุงุช ุงููุถุบูุทุฉ ุจูุงุณุทุฉ ุฎูุงุฑุฒููุฉ GZ. <br>  HFile + upzip - ูุฑุงุกุฉ ูู ุงููููุงุช ุฏูู ุถุบุท. <br><br>  ููุงู ููุฒุฉ ูููุฉ ุฌุฏูุฑุฉ ุจุงูููุงุญุธุฉ ุ ุญูุซ ุชุชู ูุนุงูุฌุฉ ุงููููุงุช ุงูุตุบูุฑุฉ (ุฑุงุฌุน ุญูู "ุงูุจูุงูุงุช" ุ ุญูุซ ุชุชู ูุชุงุจุฉ 10 ุจุงูุช) ุจุจุทุก ุฃูุซุฑ ุ ุฎุงุตุฉู ุฅุฐุง ุชู ุถุบุทูุง.  ูู ุงููุงุถุญ ุฃู ูุฐุง ูููู ููุท ุญุชู ุญุฌู ูุนูู ุ ููู ุงููุงุถุญ ุฃู ููู 5 ุฌูุฌุงุจุงูุช ูู ุชุชู ูุนุงูุฌุชู ุจุดูู ุฃุณุฑุน ูู 10 ููุบุงุจุงูุช ุ ูููู ูุดูุฑ ุจูุถูุญ ุฅูู ุฃูู ูู ุฌููุน ูุฐู ุงูุงุฎุชุจุงุฑุงุช ูุง ููุฌุฏ ุฃู ุญูู ูุญุฑูุซ ููุจุญุซ ูู ุงูุชููููุงุช ุงููุฎุชููุฉ. <br><br>  ูู ุฃุฌู ุงูุงูุชูุงู ุ ููุช ุจุชุตุญูุญ ุฑูุฒ YCSB ููุนูู ูุน ุฏูุนุงุช HB ูู 100 ูุทุนุฉ ูููุงุณ ุงููููู ูุฃูุซุฑ ูู ุฐูู.  ูููุง ููู ูุชูุฌุฉ ุนูู 4 ูุณุฎ ููุชูุจุฉ ุนูู ุทุงููุงุชูุง ุ ูููู ูููุง 100 ููุถูุน.  ุงุชุถุญ ูุง ููู: <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุนูููุฉ ูุงุญุฏุฉ = 100 ุงูุณุฌูุงุช</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  [ุจุดูู ุนุงู] ุ RunTime (ms) ุ 1165415 <br>  [ุจุดูู ุนุงู] ุ ุงูุฅูุชุงุฌูุฉ (ุงูุนูููุงุช / ุซุงููุฉ) ุ 858.06343662987 <br>  [TOTAL_GCS_PS_Scavenge] ุ ุงููููุช ุ 798 <br>  [TOTAL_GC_TIME_PS_Scavenge] ุ ุงูููุช (ูููู ุซุงููุฉ) ุ 7346 <br>  [TOTAL_GC_TIME _ูช _ PS_Scavenge] ุ ุงูููุช (ูช) ุ 0.6303334005483026 <br>  [TOTAL_GCS_PS_MarkSweep] ุ ุนุฏุฏ ุ 1 <br>  [TOTAL_GC_TIME_PS_MarkSweep] ุ ุงูููุช (ูููู ุซุงููุฉ) ุ 74 <br>  [TOTAL_GC_TIME _ูช _ PS_MarkSweep] ุ ุงูููุช (ูช) ุ 0.006349669431061038 <br>  [TOTAL_GCs] ุ ุงููููุช ุ 799 <br>  [TOTAL_GC_TIME] ุ ุงูููุช (ูููู ุซุงููุฉ) ุ 7420 <br>  [TOTAL_GC_TIME_ูช] ุ ุงูููุช (ูช) ุ 0.6366830699793635 <br>  [INSERT] ุ ุงูุนูููุงุช ุ 1ุ000ุ000 <br>  [INSERT] ุ AverageLatency (us) ุ 115893.891644 <br>  [ุฃุฏุฑุฌ] ุ MinLatency (ููุง) ุ 14528 <br>  [INSERT] ุ MaxLatency (us) ุ 1470463 <br>  [INSERT] ุ 95thPercentileLatency (us) ุ 248319 <br>  [INSERT] ุ 99 thPercentileLatency (us) ุ 445951 <br>  [INSERT] ุ Return = OK ุ 1ุ000ุ000 <br><br>  20/01/19 13:19:16 ุนููู INFO.ConnectionManager $ HConnectionImplementation: ุฅุบูุงู ุจุฑูุงูุฌ zookeeper sessionid = 0x36f98ad0a4ad8cc <br>  20/01/19 13:19:16 INFO zookeeper.ZooKeeper: ุงูุฌูุณุฉ: 0x36f98ad0a4ad8cc ูุบููุฉ <br>  20/01/19 13:19:16 INFO zookeeper.ClientCnxn: EventThread ุงุบูุงู <br>  [ุจุดูู ุนุงู] ุ RunTime (ms) ุ 1165806 <br>  [ุจุดูู ุนุงู] ุ ุงูุฅูุชุงุฌูุฉ (ุงูุนูููุงุช / ุซุงููุฉ) ุ 857.7756504941646 <br>  [TOTAL_GCS_PS_Scavenge] ุ ุงููููุช ุ 776 <br>  [TOTAL_GC_TIME_PS_Scavenge] ุ ุงูููุช (ูููู ุซุงููุฉ) ุ 7517 <br>  [TOTAL_GC_TIME _ูช _ PS_Scavenge] ุ ุงูููุช (ูช) ุ 0.6447899564764635 <br>  [TOTAL_GCS_PS_MarkSweep] ุ ุนุฏุฏ ุ 1 <br>  [TOTAL_GC_TIME_PS_MarkSweep] ุ ุงูููุช (ูููู ุซุงููุฉ) ุ 63 <br>  [TOTAL_GC_TIME _ูช _ PS_MarkSweep] ุ ุงูููุช (ูช) ุ 0.005403986598113236 <br>  [TOTAL_GCs] ุ ุงููููุช ุ 777 <br>  [TOTAL_GC_TIME] ุ ุงูููุช (ูููู ุซุงููุฉ) ุ 7580 <br>  [TOTAL_GC_TIME_ูช] ุ ุงูููุช (ูช) ุ 0.6501939430745767 <br>  [INSERT] ุ ุงูุนูููุงุช ุ 1ุ000ุ000 <br>  [INSERT] ุ AverageLatency (us) ุ 116042.207936 <br>  [INSERT] ุ MinLatency (us) ุ 14056 <br>  [INSERT] ุ MaxLatency (us) ุ 1462271 <br>  [INSERT] ุ 95thPercentileLatency (us) ุ 250239 <br>  [INSERT] ุ 99 thPercentileLatency (us) ุ 446719 <br>  [INSERT] ุ Return = OK ุ 1ุ000ุ000 <br><br>  20/01/19 13:19:16 ุนููู INFO.ConnectionManager $ HConnectionImplementation: ุฅุบูุงู ุจุฑูุงูุฌ zookeeper sessionid = 0x26f98ad07b6d67e <br>  20/01/19 13:19:16 INFO zookeeper.ZooKeeper: ุงูุฌูุณุฉ: 0x26f98ad07b6d67e ูุบููุฉ <br>  20/01/19 13:19:16 INFO zookeeper.ClientCnxn: EventThread ุงุบูุงู <br>  [ุจุดูู ุนุงู] ุ RunTime (ms) ุ 1165999 <br>  [ุจุดูู ุนุงู] ุ ุงูุฅูุชุงุฌูุฉ (ุงูุนูููุงุช / ุซุงููุฉ) ุ 857.63366863951 <br>  [TOTAL_GCS_PS_Scavenge] ุ ุงูุนุฏุฏ ุ 818 <br> [TOTAL_GC_TIME_PS_Scavenge], Time(ms), 7557 <br> [TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.6481137633908777 <br> [TOTAL_GCS_PS_MarkSweep], Count, 1 <br> [TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 79 <br> [TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.006775305982252128 <br> [TOTAL_GCs], Count, 819 <br> [TOTAL_GC_TIME], Time(ms), 7636 <br> [TOTAL_GC_TIME_%], Time(%), 0.6548890693731299 <br> [INSERT], Operations, 1000000 <br> [INSERT], AverageLatency(us), 116172.212864 <br> [INSERT], MinLatency(us), 7952 <br> [INSERT], MaxLatency(us), 1458175 <br> [INSERT], 95thPercentileLatency(us), 250879 <br> [INSERT], 99thPercentileLatency(us), 446463 <br> [INSERT], Return=OK, 1000000 <br><br> 20/01/19 13:19:17 INFO client.ConnectionManager$HConnectionImplementation: Closing zookeeper sessionid=0x36f98ad0a4ad8cd <br> 20/01/19 13:19:17 INFO zookeeper.ZooKeeper: Session: 0x36f98ad0a4ad8cd closed <br> 20/01/19 13:19:17 INFO zookeeper.ClientCnxn: EventThread shut down <br> [OVERALL], RunTime(ms), 1166860 <br> [OVERALL], Throughput(ops/sec), 857.000839860823 <br> [TOTAL_GCS_PS_Scavenge], Count, 707 <br> [TOTAL_GC_TIME_PS_Scavenge], Time(ms), 7239 <br> [TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.6203829079752499 <br> [TOTAL_GCS_PS_MarkSweep], Count, 1 <br> [TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 67 <br> [TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0057419056270675145 <br> [TOTAL_GCs], Count, 708 <br> [TOTAL_GC_TIME], Time(ms), 7306 <br> [TOTAL_GC_TIME_%], Time(%), 0.6261248136023173 <br> [INSERT], Operations, 1000000 <br> [INSERT], AverageLatency(us), 116230.849308 <br> [INSERT], MinLatency(us), 7352 <br> [INSERT], MaxLatency(us), 1443839 <br> [INSERT], 95thPercentileLatency(us), 250623 <br> [INSERT], 99thPercentileLatency(us), 447487 <br> [INSERT], Return=OK, 1000000 </div></div><br><br> ,    CS AverageLatency(us)   3114,   HB AverageLatency(us) = 1162 (,  1  = 100     ). <br><br>      โ        HBase.   ,  SSD       .   ,       ,    ,     4 ,  400    ,      .   :  โ  .  .   ScyllaDB     ,    โฆ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar484096/">https://habr.com/ru/post/ar484096/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar484084/index.html">1C- Bitrix ููุญุงููุฉ ูุชูุฏููู</a></li>
<li><a href="../ar484088/index.html">ูููุฉ ูุฑูุฑ ุงูุงุณุชุนุฑุงุถ (ุชุญููู ~ 5 ูููุงุฑ ูููุฉ ูุฑูุฑ ูู ุงูุชุณุฑูุจุงุช)</a></li>
<li><a href="../ar484090/index.html">ุจููุฉ ุชุญุชูุฉ ุฌุฏูุฏุฉ ูุชูููููุฌูุง ุงููุนูููุงุช ููุฑูุฒ ุจูุงูุงุช ุงููุดุงุฑูุฉ ุงูุฑูุณู</a></li>
<li><a href="../ar484092/index.html">ุฃูุฑุงุก ููุจูุงุก ูุฑุชุฏูู ููุงุจุณ ุฅูู ุญุฏ ูุง</a></li>
<li><a href="../ar484094/index.html">ุฅูุดุงุก ูุทูู ุงููุงุฑ ุบูุจูุจุฉ ุงูุดุฎุต ุงูุซุงูุซ ูุน DOTS</a></li>
<li><a href="../ar484100/index.html">ุงูุนูู ูุน ุงููุงุฌูุฉ ูู ุฎุฑุงุฆุท Google SDK ููุธุงู Android</a></li>
<li><a href="../ar484102/index.html">PHP ููุงุจู ุจูุซูู ุถุฏ ุฑูุจู ุนูู ุงููุถุจุงู: ููุงุฑูุฉ ููุตูุฉ</a></li>
<li><a href="../ar484106/index.html">MVCC ูู PostgreSQL-6. ูุฑุงุบ</a></li>
<li><a href="../ar484108/index.html">Encapsulator Etherblade.net ูุงุณุชุจุฏุงู ุงุณุชุจุฏุงู ููููุงุช ุงูุดุจูุฉ (ุงูุฌุฒุก ุงูุซุงูู)</a></li>
<li><a href="../ar484112/index.html">ูู ูู ุงููููู ุงุฎุชุฑุงู ุงูุทุงุฆุฑุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>