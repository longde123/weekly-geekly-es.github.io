<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ธ๐ฟ ๐ง๐ผโ๐คโ๐ง๐ป ๐ก ูุคููู ุงููุนุจุฉ 0 ู - ุฃุญุณูุช ๐ ๐ โ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="0 AD ูู ูุนุจุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูู ููุน ุงูุงุณุชุฑุงุชูุฌูุฉ ุงูุชุงุฑูุฎูุฉ ูู ุงูููุช ุงูุญูููู ุ ุทูุฑูุง ูุฌุชูุน ุงููุชุทูุนูู. ุญุฌู ูุงุนุฏุฉ ุงูุดูุฑุฉ ุตุบูุฑ ููุฑุฑุช ุงูุชุญูู ูู ุงููุนุจุฉ ุนูู ุฃ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุคููู ุงููุนุจุฉ 0 ู - ุฃุญุณูุช</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/420267/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"></p><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6c5/b41/bfb/6c5b41bfb68b23ef10d61f6ecd1a6665.png" alt="PVS-Studio &amp; 0 A.D."></div><br>  0 AD ูู ูุนุจุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูู ููุน ุงูุงุณุชุฑุงุชูุฌูุฉ ุงูุชุงุฑูุฎูุฉ ูู ุงูููุช ุงูุญูููู ุ ุทูุฑูุง ูุฌุชูุน ุงููุชุทูุนูู.  ุญุฌู ูุงุนุฏุฉ ุงูุดูุฑุฉ ุตุบูุฑ ููุฑุฑุช ุงูุชุญูู ูู ุงููุนุจุฉ ุนูู ุฃููุง ุงุณุชุฑุงุญุฉ ูู ุงููุดุงุฑูุน ุงููุจูุฑุฉ ูุซู Android ู XNU Kernel.  ุฅุฐู ุ ุฃูุงููุง ูุดุฑูุน ูุญุชูู ุนูู 165000 ุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู C ++.  ุฏุนููุง ูุฑู ูุง ูู ูุซูุฑ ููุงูุชูุงู ูููู ุงูุนุซูุฑ ุนููู ุจุงุณุชุฎุฏุงู ูุญูู ุซุงุจุช PVS-Studio. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  0 ู </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">0 AD</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">0 AD</a> ) ูู ูุนุจุฉ ูุฌุงููุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูู ููุน ุงูุงุณุชุฑุงุชูุฌูุฉ ุงูุชุงุฑูุฎูุฉ ูู ุงูููุช ุงูุญูููู ุ ุชู ุชุทููุฑูุง ูู ูุจู ูุฌุชูุน ูู ุงููุชุทูุนูู (ุชูุญุฏ ุงููุทูุฑูู ุงูุฑุฆูุณููู ูู ูุฑูู Wildfire Games).  ุชุณูุญ ูู ุงููุนุจุฉ ุจุงูุชุญูู ูู ุงูุญุถุงุฑุงุช ุงูุชู ูุงูุช ููุฌูุฏุฉ ูู ุงููุชุฑุฉ 500 ูุจู ุงููููุงุฏ.  ูู - ุณูุฉ ูุงุญุฏุฉ ู.  ู.  ุงุนุชุจุงุฑูุง ูู ุตูู ุนุงู 2018 ุ ูููู ุงููุดุฑูุน ูู ุฅุตุฏุงุฑ ุฃููุง.  [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุตู</a> ูุฃุฎูุฐ ูู ููููุจูุฏูุง]. <br><br>  ููุงุฐุง ุจุงูุถุจุท 0 ูุ <br><br>  ุทูุจุช ูู ุฒููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Egor Bredikhin</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">EgorBredikhin</a> ) ุงุฎุชูุงุฑ ุจุนุถ ุงููุดุงุฑูุน ุงูุตุบูุฑุฉ ุงูููุชูุญุฉ ุงูุชู ูููููู ุงูุนูู ุจูุง ุจูู ุงูููุงู ุงูุฃุฎุฑู ูุงูุชุญูู ูููุง.  ุฃุฑุณู ูู ุณุฌู ูููุดุฑูุน 0 ู ุฅูู ุงูุณุคุงู: "ููุงุฐุง ูุฐุง ุงููุดุฑูุนุ"  - ูุงู ููุงู ุฌูุงุจ: "ูุนู ุ ููุฏ ูุนุจุช ูุฐู ุงููุนุจุฉ ููุชู ุ ููู ุงุณุชุฑุงุชูุฌูุฉ ุฌูุฏุฉ ูู ุงูููุช ุงูุญูููู."  ุญุณููุง ุ ุณูููู 0 ู :). <br><br><h2 style=";text-align:right;direction:rtl">  ูุซุงูุฉ ุงูุฎุทุฃ </h2><br>  ุฃุฑูุฏ ุฃู ุฃุซูู ุนูู ูุคููู 0 ู ูุฌูุฏุฉ ููุฏ ุณู ++.  ุญุณููุง ุ ูุงุฏุฑูุง ูุง ุชุชููู ูู ููุงุฌูุฉ ูุซู ูุฐู ุงูุฃุฎุทุงุก ุงูููุฎูุถุฉ ุงููุซุงูุฉ.  ุจุงูุทุจุน ุ ูุฐู ููุณุช ูู ุงูุฃุฎุทุงุก ุ ูููู ุชูู ุงูุชู ูููู ุงูุชุดุงููุง ุจุงุณุชุฎุฏุงู PVS-Studio.  ููุง ููุช ุ ุนูู ุงูุฑุบู ูู ุฃู PVS-Studio ูุง ูุฌุฏ ุฌููุน ุงูุฃุฎุทุงุก ุ ููุน ุฐูู ุ ูููููุง ุงูุชุญุฏุซ ุจุฃูุงู ุนู ุงูุนูุงูุฉ ุจูู ูุซุงูุฉ ุงูุฃุฎุทุงุก ูุฌูุฏุฉ ุงูุดูุฑุฉ ููู. <br><br>  ุนุฏุฏ ูููู ูู ุงูุฃุฑูุงู.  ุงูุนุฏุฏ ุงูุฅุฌูุงูู ูุฃุณุทุฑ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุบูุฑ ุงููุงุฑุบุฉ ูู 231270. ูููุง 28.7ูช ุชุนูููุงุช.  ูู ุงููุฌููุน ุ 165000 ุณุทุฑ ูู ููุฏ C ++ ุงูููู. <br><br>  ูุงู ุนุฏุฏ ุงูุฑุณุงุฆู ุงูุตุงุฏุฑุฉ ุนู ุงููุญูู ุตุบูุฑูุง ุ ูุจุนุฏ ุงูุงุทูุงุน ุนูููุง ุฌููุนูุง ุ ูุชุจุช 19 ุฎุทุฃู.  ุณุฃุฏุฑุณ ุฌููุน ูุฐู ุงูุฃุฎุทุงุก ูุงุญููุง ูู ุงูููุงูุฉ.  ุฑุจูุง ูุงุชูู ุดูุก ุ ูุนุชุจุฑูู ุฃู ุงูุฎุทุฃ ุฑูุฒ ูุฐุฑ ุบูุฑ ุถุงุฑ.  ููุน ุฐูู ุ ุจุดูู ุนุงู ุ ูุฐุง ูุง ูุบูุฑ ุงูุตูุฑุฉ. <br><br>  ูุฐูู ุ ูุฌุฏุช 19 ุฎุทุฃ ูู 165000 ุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ูุญุณุจ ูุซุงูุฉ ุงูุฎุทุฃ: 19 * 1000/165000 = 0.115. <br><br>  ูู ุฃุฌู ุงูุจุณุงุทุฉ ุ ููุชุฑุจ ูููุชุฑุถ ุฃู ูุญูู PVS-Studio ููุชุดู 0.1 ุฎุทุฃ ููู 1000 ุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ุฑูุฒ ุงููุนุจุฉ. <br><br>  ูุชูุฌุฉ ุนุธููุฉ!  ููููุงุฑูุฉ ุ ูู ููุงูุชู ุงูุฃุฎูุฑุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญูู Android ุ</a> ุญุณุจุช ุฃููู ุงูุชุดูุช ุนูู ุงูุฃูู 0.25 ุฎุทุฃ ููู 1000 ุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ูู ุงููุงูุน ุ ูุซุงูุฉ ุงูุฃุฎุทุงุก ููุงู ุฃูุจุฑ ูู ุฐูู ุ ูู ุฃุฌุฏ ุงูููุฉ ูุชุญููู ุงูุชูุฑูุฑ ุจุฃูููู ุจุนูุงูุฉ. <br><br>  ุฃู ุฎุฐ ููุชุจุงุช EFL ุงูุฃุณุงุณูุฉ ููุซุงู ุ ุงูุฐู ููุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุฏุฑุงุณุชู</a> ุจุนูุงูุฉ ูุญุณุงุจ ุนุฏุฏ ุงูุนููุจ.  ูู ุฐูู ุ ููุชุดู PVS-Studio ุฃุฎุทุงุก 0.71 ููู 1000 ุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. <br><br>  ูุฐุง ุ ูุฅู ูุคููู 0 AD ูู ุฒููุงุก ุฌูุฏูู ุ ูู ุฃุฌู ุงูุฅูุตุงู ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ูููุฉ ุตุบูุฑุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูููุชูุจุฉ ูู C ++ ุชุณุงุนุฏูู.  ูุณูุก ุงูุญุธ ุ ูููุง ูุงู ุงููุดุฑูุน ุฃูุจุฑ ุ ูููุง ุงุฒุฏุงุฏ ุชุนููุฏู ุจุดูู ุฃุณุฑุน ุ ูุฒุงุฏุช ูุซุงูุฉ ุงูุฎุทุฃ ุจุดูู ุบูุฑ ุฎุทู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุฒูุฏ</a> ). <br><br><h2 style=";text-align:right;direction:rtl">  ุฃุฎุทุงุก </h2><br>  ุฏุนูุง ุงูุขู ูููู ูุธุฑุฉ ุนูู ุงูุฃุฎุทุงุก ุงูู 19 ุงูุชู ูุฌุฏุชูุง ูู ุงููุนุจุฉ.  ูุชุญููู ุงููุดุฑูุน ุ ุงุณุชุฎุฏูุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PVS-Studio</a> ุงูุฅุตุฏุงุฑ 6.24.  ุฃูุชุฑุญ ุนููู ูุญุงููุฉ ุชูุฒูู ุงูุฅุตุฏุงุฑ ุงูุชุฌุฑูุจู ูุงูุชุญูู ูู ุงููุดุงุฑูุน ุงูุชู ุชุนูู ุนูููุง. <br><br>  <b>ููุงุญุธุฉ</b>  ูุถุน PVS-Studio ูุญู B2B.  ุจุงููุณุจุฉ ูููุดุฑูุนุงุช ุงูุตุบูุฑุฉ ูุงููุทูุฑูู ุงูุฃูุฑุงุฏ ุ ูุฏููุง ุฎูุงุฑ ุชุฑุฎูุต ูุฌุงูู: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููููุฉ ุงุณุชุฎุฏุงู PVS-Studio ูุฌุงููุง</a> ". <br><br>  <b>ุฎุทุฃ N1</b> <br><br>  ููุจุฏุฃ ุจุงููุธุฑ ุฅูู ุฎุทุฃ ูุนูุฏ.  ูู ุงููุงูุน ุ ูุฐุง ููุณ ูุนูุฏูุง ุ ูููู ุนููู ุฃู ุชุชุนุฑู ุนูู ุฌุฒุก ูุจูุฑ ุฌุฏูุง ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> WaterManager::CreateWaveMeshes() { .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> nbNeighb = <span class="hljs-number"><span class="hljs-number">0</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> found = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; nbNeighb = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> p = <span class="hljs-number"><span class="hljs-number">0</span></span>; p &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>; ++p) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (CoastalPointsSet.count(xx+around[p][<span class="hljs-number"><span class="hljs-number">0</span></span>] + (yy + around[p][<span class="hljs-number"><span class="hljs-number">1</span></span>])*SideSize)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nbNeighb &gt;= <span class="hljs-number"><span class="hljs-number">2</span></span>) { CoastalPointsSet.erase(xx + yy*SideSize); <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } ++nbNeighb; <span class="hljs-comment"><span class="hljs-comment">// We've found a new point around us. // Move there xx = xx + around[p][0]; yy = yy + around[p][1]; indexx = xx + yy*SideSize; if (i == 0) Chain.push_back(CoastalPoint(indexx,CVector2D(xx*2,yy*2))); else Chain.push_front(CoastalPoint(indexx,CVector2D(xx*2,yy*2))); CoastalPointsSet.erase(xx + yy*SideSize); found = true; break; } } if (!found) endedChain = true; .... }</span></span></code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุญุฐูุฑ</a> PVS-Studio: ุงูุชุนุจูุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V547</a> CWE-570 'nbNeighb&gt; = 2' ุฎุทุฃ ุฏุงุฆููุง.  WaterManager.cpp 581 <br><br>  ูููููุฉ ุงูุฃููู ุ ุชุจุฏู ุฑุณุงูุฉ ุงููุญูู ุบุฑูุจุฉ.  ููุงุฐุง ุงูุดุฑุท <i>nbNeighb&gt; = 2</i> ุฏุงุฆููุง ุฎุงุทุฆุ  ูู ุงููุงูุน ุ ูู ุฌุณู ุงูุญููุฉ ููุงู ุฒูุงุฏุฉ ูู ุงููุชุบูุฑ <i>nbNeighb</i> ! <br><br>  ุงูุธุฑ ุฃุฏูุงู <i>ูุณุชุดุงูุฏ</i> ุจูุงู <i>ูุงุตู</i> ููุงุทุน ุชูููุฐ ุงูุญููุฉ.  ูุฐูู ุ ุฅุฐุง ุชู ุฒูุงุฏุฉ ุงููุชุบูุฑ <i>nbNeighb</i> ุ ุณูุชู ุฅููุงู ุงูุฏูุฑุฉ.  ูุจุงูุชุงูู ุ ูุฅู ูููุฉ ุงููุชุบูุฑ <i>nbNeighb</i> ูู ุชุตู ุฃุจุฏูุง ุฅูู ูููุฉ ุฃูุจุฑ ูู 1. <br><br>  ูู ุงููุงุถุญ ุฃู ุงูุฑูุฒ ูุญุชูู ุนูู ููุน ูู ุงูุฎุทุฃ ุงูููุทูู. <br><br>  <b>ุฎุทุฃ N2</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> CmpRallyPointRenderer::MergeVisibilitySegments( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">deque</span></span>&lt;SVisibilitySegment&gt;&amp; segments) { .... segments.erase(segments.end()); .... }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: ูุฏ ูุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V783</a> CWE-119 ุฅูุบุงุก ุงูุฅุดุงุฑุฉ ุฅูู ุงูููุงุทุน ุบูุฑ ุงูุตุงูุญุฉ 'segments.end ()'.  1290 <br><br>  ููุฏ ุบุฑูุจ ุฌุฏุง ุฌุฏุง.  ุฑุจูุง ุฃุฑุงุฏ ุงููุจุฑูุฌ ุฅุฒุงูุฉ ุงูุนูุตุฑ ุงูุฃุฎูุฑ ูู ุงูุญุงููุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฌุจ ุฃู ูููู ุงูุฑูุฒ ุนูู ุงููุญู ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">segments.erase(segments.end() - <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br>  ุนูู ุงูุฑุบู ูู ุฐูู ุ ุณูููู ูู ุงูุฃุณูู ุงููุชุงุจุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">segments.pop_back();</code> </pre> <br>  ููููู ุตุงุฏููู ุ ููุณ ูู ุงููุงุถุญ ุชูุงููุง ุจุงููุณุจุฉ ูู ุจุงูุถุจุท ูุง ูุงู ูุฌุจ ูุชุงุจุชู ููุง. <br><br>  <b>ุฎุทุฃ N3 ุ N4</b> <br><br>  ูุฑุฑุช ุงููุธุฑ ูู ุฎุทุฃูู ูุนูุง ุ ูุฃูููุง ูุชุนููุงู ุจุชุณุฑุจ ููุงุฑุฏ ููุชุทูุจุงู ุฃููุงู ุฅุธูุงุฑ ูุง <i>ูู</i> ุงููุงูุฑู <i>WARN_RETURN</i> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> WARN_RETURN(status)\ do\ {\ DEBUG_WARN_ERR(status);\ return status;\ }\ while(0)</span></span></code> </pre> <br>  ูุฐุง ุ ููุง ุชุฑู ุ ูุชุณุจุจ ุงููุงูุฑู <i>WARN_RETURN</i> ูู ุฎุฑูุฌ ุงูุฏุงูุฉ ูู ุงูุฌุณู.  ุงูุขู ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุทุฑู ุบูุฑ ุฏูููุฉ ูุงุณุชุฎุฏุงู ูุฐุง ุงููุงูุฑู. <br><br>  ุงูุฌุฒุก ุงูุฃูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Status </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sys_generate_random_bytes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(u8* buf, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count)</span></span></span><span class="hljs-function"> </span></span>{ FILE* f = fopen(<span class="hljs-string"><span class="hljs-string">"/dev/urandom"</span></span>, <span class="hljs-string"><span class="hljs-string">"rb"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!f) WARN_RETURN(ERR::FAIL); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (count) { <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> numread = fread(buf, <span class="hljs-number"><span class="hljs-number">1</span></span>, count, f); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (numread == <span class="hljs-number"><span class="hljs-number">0</span></span>) WARN_RETURN(ERR::FAIL); buf += numread; count -= numread; } fclose(f); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> INFO::OK; }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V773</a> CWE-401 ุชู ุฅููุงุก ุงููุธููุฉ ุจุฏูู ุชุญุฑูุฑ ุงูููุจุถ 'f'.  ูู ุงููููู ุญุฏูุซ ุชุณุฑุจ ูู ุงูููุงุฑุฏ.  332 <br><br>  ุฅุฐุง ูู ุชุณุชุทุน ูุธููุฉ <i>fread</i> ูุฑุงุกุฉ ุงูุจูุงูุงุช ุ ูุณูุชู ุฅููุงุก ูุธููุฉ <i>sys_generate_random_bytes</i> ุฏูู ุชุญุฑูุฑ ูุงุตู ุงูููู.  ูู ุงููุงุญูุฉ ุงูุนูููุฉ ุ ูุฐุง ุจุงููุงุฏ ูููู.  ูู ุงููุดููู ููู ุฃูู ูู ุชุชููู ูู ูุฑุงุกุฉ ุงูุจูุงูุงุช ูู "/ dev / urandom".  ููุน ุฐูู ุ ูุฅู ุงูุฑูุฒ ูุฐุฑ. <br><br>  ุงูุฌุฒุก ุงูุซุงูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Status </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sys_cursor_create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... sys_cursor_impl* impl = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> sys_cursor_impl; impl-&gt;image = image; impl-&gt;cursor = XcursorImageLoadCursor(wminfo.info.x11.display, image); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(impl-&gt;cursor == None) WARN_RETURN(ERR::FAIL); *cursor = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;sys_cursor&gt;(impl); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> INFO::OK; }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: V773 CWE-401 ุชู ุฅููุงุก ุงููุธููุฉ ุจุฏูู ุชุญุฑูุฑ ูุคุดุฑ "impl".  ูู ุงููููู ุญุฏูุซ ุชุณุฑุจ ููุฐุงูุฑุฉ.  xcpp 421 <br><br>  ุฅุฐุง ูุดู ุชุญููู ุงููุคุดุฑ ุ ูุญุฏุซ ุชุณุฑุจ ููุฐุงูุฑุฉ. <br><br>  <b>ุฎุทุฃ N5</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Status </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadHeightmapImageOs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;u8&gt; fileData = <span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;u8&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> u8[fileSize]); .... }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V554</a> CWE-762 ุงูุงุณุชุฎุฏุงู ุบูุฑ ุงูุตุญูุญ ูู Shared_ptr.  ุณูุชู ุชูุธูู ุงูุฐุงูุฑุฉ ุงููุฎุตุตุฉ ูู "new []" ุจุงุณุชุฎุฏุงู "delete".  MapIO.cpp 54 <br><br>  ุงูุฎูุงุฑ ุงูุตุญูุญ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;u8[]&gt; fileData = <span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;u8&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> u8[fileSize]);</code> </pre> <br>  <b>ุฎุทุฃ N6</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">FUTrackedPtr(ObjectClass* _ptr = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) : ptr(_ptr) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ptr != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) FUTracker::TrackObject((FUTrackable*) ptr); ptr = ptr; }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V570</a> ูุชู ุชุนููู ุงููุชุบูุฑ "ptr" ูููุณู.  FUTracker.h 122 <br><br>  <b>ุฎุทุฃ N7 ุ N8</b> <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::wstring TraceEntry::EncodeAsText() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">wchar_t</span></span> action = (<span class="hljs-keyword"><span class="hljs-keyword">wchar_t</span></span>)m_action; <span class="hljs-keyword"><span class="hljs-keyword">wchar_t</span></span> buf[<span class="hljs-number"><span class="hljs-number">1000</span></span>]; swprintf_s(buf, ARRAY_SIZE(buf), <span class="hljs-string"><span class="hljs-string">L"%#010f: %c \"%ls\" %lu\n"</span></span>, m_timestamp, action, m_pathname.<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>().c_str(), (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>)m_size); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> buf; }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V576</a> CWE-628 ุชูุณูู ุบูุฑ ุตุญูุญ.  ุถุน ูู ุงุนุชุจุงุฑู ุงูุชุญูู ูู ุงููุณูุทุฉ ุงููุนููุฉ ุงูุฎุงูุณุฉ ููุฏุงูุฉ "swprintf_s".  ูู ุงููุชููุน ุฃู ุชููู ูุณูุทุฉ ููุน ุงูุญุฑู.  ุฃุซุฑ. cpp 93 <br><br>  ููุง ุตุงุฏููุง ุชุงุฑูุฎูุง ูุฑุชุจููุง ูุบูุฑ ูุงุถุญ ูุชูููุฐ ุจุฏูู ููุธููุฉ <i>swprintf</i> ูู Visual C ++.  ูู ุฃููู ุจุฅุนุงุฏุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูุนู</a> ุ ูููู ุงุฑุฌุน ุฅูู ูุซุงุฆู ุชุดุฎูุต <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V576</a> (ุงูุธุฑ ูุณู "ุงูุฎุทูุท ุงูุนุฑูุถุฉ"). <br><br>  ูู ูุฐู ุงูุญุงูุฉ ุ ุนูู ุงูุฃุฑุฌุญ ุ ุณูุนูู ูุฐุง ุงูุฑูุฒ ุจุดูู ุตุญูุญ ุนูุฏ ุงูุชุญููู ุงูุจุฑูุฌู ูู Visual C ++ ูู Windows ูุจุดูู ุบูุฑ ุตุญูุญ ุนูุฏ ุงูุจูุงุก ููุธุงู ุงูุชุดุบูู Linux ุฃู macOS. <br><br>  ุฎุทุฃ ููุงุซู: V576 CWE-628 ุชูุณูู ุบูุฑ ุตุญูุญ.  ุถุน ูู ุงุนุชุจุงุฑู ุงูุชุญูู ูู ุงููุณูุทุฉ ุงููุนููุฉ ุงูุฑุงุจุนุฉ ููุฏุงูุฉ "swprintf_s".  ูู ุงููุชููุน ุฃู ุชููู ูุณูุทุฉ ููุน ุงูุญุฑู.  211 <br><br>  <b>ุฎุทุฃ N9 ู N10 ู N11</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงุณูู</a>  ูู ุงูุจุฏุงูุฉ ุ ูุชู ุงุณุชุฎุฏุงู ุงููุคุดุฑ ุ ุซู ูุชู ูุญุตู ููุท. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TEST_CAT2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* dst, ....)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">strcpy</span></span>(dst, dst_val); <span class="hljs-comment"><span class="hljs-comment">// &lt;= int ret = strcat_s(dst, max_dst_chars, src); TS_ASSERT_EQUALS(ret, expected_ret); if(dst != 0) // &lt;= TS_ASSERT(!strcmp(dst, expected_dst)); }</span></span></code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V595</a> CWE-476 ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "dst" ูุจู ุงูุชุญูู ูู ุตุญุชู ุจุงุณุชุฎุฏุงู nullptr.  ุฎุทูุท ุงูุชุญูู: 140 ุ 143. test_secure_crt.h 140 <br><br>  ุฃุนุชูุฏ ุฃู ุงูุฎุทุฃ ูุง ูุชุทูุจ ุดุฑุญูุง.  ุชุญุฐูุฑุงุช ููุงุซูุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V595 CWE-476 ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "dst" ูุจู ุงูุชุญูู ููู ูู ุฎูุงู nullptr.  ุชุญูู ูู ุงูุฎุทูุท: 150 ุ 153. test_secure_crt.h 150 </li><li style=";text-align:right;direction:rtl">  V595 CWE-476 ุชู ุงุณุชุฎุฏุงู ูุคุดุฑ "dst" ูุจู ุงูุชุญูู ููู ูู ุฎูุงู nullptr.  ุฎุทูุท ุงูุชุญูู: 314 ุ 317. test_secure_crt.h 314 </li></ul><br>  <b>ุฎุทุฃ N12</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> tbool; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MikkTSpace::setTSpace(...., <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tbool bIsOrientationPreserving, ....) { .... m_NewVertices.push_back(bIsOrientationPreserving &gt; <span class="hljs-number"><span class="hljs-number">0.5</span></span> ? <span class="hljs-number"><span class="hljs-number">1.0f</span></span> : (<span class="hljs-number"><span class="hljs-number">-1.0f</span></span>)); .... }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V674</a> CWE-682 ุชุชู ููุงุฑูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุญุฑู</a> "0.5" ุงูุญุฑูู ูู ุงูููุน "ุงููุฒุฏูุฌ" ุจูููุฉ ุงูููุน "int".  ุถุน ูู ุงูุงุนุชุจุงุฑ ูุญุต ุชุนุจูุฑ "bIsOrientationPreserving&gt; 0.5".  MikktspaceWrap.cpp 137 <br><br>  ููุณ ูู ุงูููุทูู ููุงุฑูุฉ ูุชุบูุฑ ูู ููุน <i>int</i> ุจุซุงุจุช 0.5.  ุนูุงูุฉ ุนูู ุฐูู ุ ูู ุญูุซ ุงููุนูู ุ ูุฐุง ุจุดูู ุนุงู ูุชุบูุฑ ูู ุงูููุน ุงูููุทูู ุ ููุง ูุนูู ุฃู ููุงุฑูุชู ุจู 0.5 ุชุจุฏู ุบุฑูุจุฉ ููุบุงูุฉ.  ุงูุชุฑุถ ุฃูู ุจุฏูุงู ูู <i>bIsOrientationPreserving</i> ูุชุบูุฑ ุขุฎุฑ ูุฌุจ ุงุณุชุฎุฏุงูู ููุง. <br><br>  <b>ุฎุทุฃ N13</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> Status </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReplaceFile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> VfsPath&amp; pathname, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">shared_ptr</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;u8&gt;&amp; fileContents, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> </span></span>{ ScopedLock s; VfsDirectory* directory; VfsFile* file; Status st; st = vfs_Lookup(pathname, &amp;m_rootDirectory, directory, &amp;file, VFS_LOOKUP_ADD|VFS_LOOKUP_CREATE); <span class="hljs-comment"><span class="hljs-comment">// There is no such file, create it. if (st == ERR::VFS_FILE_NOT_FOUND) { s.~ScopedLock(); return CreateFile(pathname, fileContents, size); } .... }</span></span></code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V749</a> CWE-675 ุณูุชู ุงุณุชุฏุนุงุก <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฏูุฑ</a> ูุงุฆู 's' ูุฑุฉ ุฃุฎุฑู ุจุนุฏ ูุบุงุฏุฑุฉ ูุทุงู ุงููุงุฆู.  vfs.cpp 165 <br><br>  ูุจู ุฅูุดุงุก ููู ุ ูู ุงูุถุฑูุฑู ุฃู ูููู ูุงุฆู ูู ุงูููุน <i>ScopedLock</i> "ุจูุชุญ" ูุงุฆู.  ููุฐุง ุ ูุณูู ุงููุฏูุฑ ุจุดูู ุตุฑูุญ.  ุงููุดููุฉ ูู ุฃูู ุณูุชู ุงุณุชุฏุนุงุก ุงููุฏูุฑ ููุงุฆู <i>s</i> ุชููุงุฆููุง ูุฑุฉ ุฃุฎุฑู ุนูุฏ ุฎุฑูุฌ ุงููุธููุฉ.  ุนูู ุณุจูู ุงููุซุงู  ุณูุชู ุงุณุชุฏุนุงุก ุงููุฏูุฑ ูุฑุชูู.  ูู <i>ุฃูู</i> ุจุฏุฑุงุณุฉ ุฌูุงุฒ ูุฆุฉ <i>ScopedLock</i> ุ ูููู ุนูู ุฃู ุญุงู ุ ูุง ูุฌุจ ุนููู ุงูููุงู ุจุฐูู.  ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ุชุคุฏู ูุฐู ุงูุฏุนูุฉ ุงููุฒุฏูุฌุฉ ุฅูู ุงููุฏูุฑ ุฅูู ุณููู ุบูุฑ ูุญุฏุฏ ุฃู ุฃุฎุทุงุก ุฃุฎุฑู ุบูุฑ ุณุงุฑุฉ.  ุญุชู ุฅุฐุง ูุงูุช ุงูุดูุฑุฉ ุชุนูู ุจุดูู ุฌูุฏ ุงูุขู ุ ููู ุงูุณูู ุฌุฏูุง ูุณุฑ ูู ุดูุก ุนู ุทุฑูู ุชุบููุฑ ุชุทุจูู ูุฆุฉ <i>ScopedLock</i> . <br><br>  <b>ุฎุทุฃ N14 ุ N15 ุ N16 ุ N17</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">CFsmEvent* CFsm::AddEvent( <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> eventType ) { .... pEvent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CFsmEvent( eventType ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( !pEvent ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; .... }</code> </pre> <br>  ุชุญุฐูุฑ PVS-Studio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V668</a> CWE-570 ููุณ ููุงู ุฃู ูุนูู ูู ุงุฎุชุจุงุฑ ูุคุดุฑ "pEvent" ููุงุจู ุงููููุฉ ุงูุฎุงููุฉ ุ ุญูุซ ุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ุนุงูู ุงูุชุดุบูู "ุงูุฌุฏูุฏ".  ุณูุชู ุฅูุดุงุก ุงูุงุณุชุซูุงุก ูู ุญุงูุฉ ุฎุทุฃ ุชุฎุตูุต ุงูุฐุงูุฑุฉ.  fsm.cpp 259 <br><br>  ุงูุชุญูู ูู ุงููุคุดุฑ ูุง ูุนูู ูู ุ ูุฃูู ูู ุญุงูุฉ ูุฌูุฏ ุฎุทุฃ ูู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุ ุณูุชู <i>ุทุฑุญ</i> ุงุณุชุซูุงุก <i>std :: bad_alloc</i> . <br><br>  ูุฐุง ุ ูุฅู ุงูุดูู ุบูุฑ ุถุฑูุฑู ุ ููู ุงูุฎุทุฃ ููุณ ุฌุณููุงู.  ููุน ุฐูู ุ ูู ุดูุก ุฃุณูุฃ ุจูุซูุฑ ุนูุฏูุง ูุชู ุชูููุฐ ุจุนุถ ุงูููุทู ูู ูุต ุฌููุฉ <i>if</i> .  ุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ุงูุญุงูุฉ ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">CFsmTransition* CFsm::AddTransition(....) { .... CFsmEvent* pEvent = AddEvent( eventType ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( !pEvent ) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Create new transition CFsmTransition* pNewTransition = new CFsmTransition( state ); if ( !pNewTransition ) { delete pEvent; return NULL; } .... }</span></span></code> </pre> <br>  ุชุญุฐูุฑ ุงููุญูู: V668 CWE-570 ููุณ ููุงู ูุนูู ูู ุงุฎุชุจุงุฑ ูุคุดุฑ "pNewTransition" ููุงุจู ูููุฉ ุฎุงููุฉ ุ ุญูุซ ุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ุนุงูู ุงูุชุดุบูู "ุงูุฌุฏูุฏ".  ุณูุชู ุฅูุดุงุก ุงูุงุณุชุซูุงุก ูู ุญุงูุฉ ุฎุทุฃ ุชุฎุตูุต ุงูุฐุงูุฑุฉ.  289 <br><br>  ุฌุฑุช ูุญุงููุฉ ูุชุญุฑูุฑ ุงูุฐุงูุฑุฉ ุงูุชู ูุชู ุชุฎุฒูู <i>ุนููุงููุง ูู</i> ูุคุดุฑ <i>pEvent</i> .  ุจุทุจูุนุฉ ุงูุญุงู ุ ูู ูุญุฏุซ ูุฐุง ูุณูุญุฏุซ ุชุณุฑุจ ููุฐุงูุฑุฉ. <br><br>  ูู ุงููุงูุน ุ ุนูุฏูุง ุจุฏุฃุช ูู ุงูุชุนุงูู ูุน ูุฐุง ุงูุฑูุฒ ุ ุงุชุถุญ ุฃู ูู ุดูุก ูุงู ุฃูุซุฑ ุชุนููุฏูุง ูุฑุจูุง ูู ููู ููุงู ุฎุทุฃ ูุงุญุฏ ุ ูููู ุฎุทุฃูู.  ุงูุขู ุณุฃุดุฑุญ ูุง ูู ุงูุฎุทุฃ ูู ูุฐุง ุงูุฑูุฒ.  ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุชุนุฑู ุนูู ุฌูุงุฒ ูุธููุฉ <i>AddEvent</i> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">CFsmEvent* CFsm::AddEvent( <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> eventType ) { CFsmEvent* pEvent = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Lookup event by type EventMap::iterator it = m_Events.find( eventType ); if ( it != m_Events.end() ) { pEvent = it-&gt;second; } else { pEvent = new CFsmEvent( eventType ); if ( !pEvent ) return NULL; // Store new event into internal map m_Events[ eventType ] = pEvent; } return pEvent; }</span></span></code> </pre> <br>  ูุงุญุธ ุฃู ุงูุฏุงูุฉ ูุง ุชุนูุฏ ุงููุคุดุฑ ุฏุงุฆููุง ุฅูู ูุงุฆู ุฌุฏูุฏ ุชู ุฅูุดุงุคู ุจุงุณุชุฎุฏุงู ุนุงูู ุงูุชุดุบูู <i>ุงูุฌุฏูุฏ</i> .  ูู ุจุนุถ ุงูุฃุญูุงู ูุฃุฎุฐ ูุงุฆู ููุฌูุฏ ูู ุญุงููุฉ <i>m_Events</i> .  ูุจุงูููุงุณุจุฉ ุ ุณูุชู ูุถุน ูุคุดุฑ ุงููุงุฆู ุงูุฐู ุชู ุฅูุดุงุคู ุญุฏูุซูุง ูู <i>m_Events</i> . <br><br>  ูููุง ูุทุฑุญ ุงูุณุคุงู: ูู ูููู ูููุจุบู ุฃู ูุฏูุฑ ุงูุฃุดูุงุก ุงูุชู ูุชู ุชุฎุฒูู <i>ูุคุดุฑุงุชูุง ูู</i> ุญุงููุฉ <i>m_Events</i> ุ  ูุณุช ุนูู ุฏุฑุงูุฉ ุจุงููุดุฑูุน ุ ูููู ุนูู ุงูุฃุฑุฌุญ ูู ููุงู ูุง ููุฌุฏ ุฑูุฒ ูุฏูุฑ ูู ูุฐู ุงูุฃุดูุงุก.  ุซู ุญุฐู ูุงุฆู ุฏุงุฎู <i>ุฏุงูุฉ CFsm :: AddTransition ุบูุฑ</i> ุถุฑูุฑู ุจุดูู ุนุงู. <br><br>  ูุฏู ุงูุทุจุงุน ุฃูู ููููู ุจุจุณุงุทุฉ ุญุฐู ุฌุฒุก ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( !pNewTransition ) { <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> pEvent; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; }</code> </pre> <br>  ุฃุฎุทุงุก ุฃุฎุฑู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  V668 CWE-571 ูุง ูุนูู ูุงุฎุชุจุงุฑ ูุคุดุฑ "ret" ููุงุจู ูููุฉ ุฎุงููุฉ ุ ุญูุซ ุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ุนุงูู ุงูุชุดุบูู "ุงูุฌุฏูุฏ".  ุณูุชู ุฅูุดุงุก ุงูุงุณุชุซูุงุก ูู ุญุงูุฉ ุฎุทุฃ ุชุฎุตูุต ุงูุฐุงูุฑุฉ.  ุงูุญููุฉ 120 </li><li style=";text-align:right;direction:rtl">  V668 CWE-571 ูุง ููุฌุฏ ูุนูู ูู ุงุฎุชุจุงุฑ ูุคุดุฑ "ุงูุฌูุงุจ" ููุงุจู ุงููููุฉ ุงูุฎุงููุฉ ุ ุญูุซ ุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ุนุงูู ุงูุชุดุบูู "ุงูุฌุฏูุฏ".  ุณูุชู ุฅูุดุงุก ุงูุงุณุชุซูุงุก ูู ุญุงูุฉ ุฎุทุฃ ุชุฎุตูุต ุงูุฐุงูุฑุฉ.  542 </li></ul><br>  <b>ุฎุทุฃ N18 ุ N19</b> <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dir_scan_callback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct de *de, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *data)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dir_scan_data</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dsd</span></span></span><span class="hljs-class"> = (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dir_scan_data</span></span></span><span class="hljs-class"> *) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dsd-&gt;entries == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> || dsd-&gt;num_entries &gt;= dsd-&gt;arr_size) { dsd-&gt;arr_size *= <span class="hljs-number"><span class="hljs-number">2</span></span>; dsd-&gt;entries = (struct de *) <span class="hljs-built_in"><span class="hljs-built_in">realloc</span></span>(dsd-&gt;entries, dsd-&gt;arr_size * <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(dsd-&gt;entries[<span class="hljs-number"><span class="hljs-number">0</span></span>])); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dsd-&gt;entries == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// TODO(lsm): propagate an error to the caller dsd-&gt;num_entries = 0; } else { dsd-&gt;entries[dsd-&gt;num_entries].file_name = mg_strdup(de-&gt;file_name); dsd-&gt;entries[dsd-&gt;num_entries].st = de-&gt;st; dsd-&gt;entries[dsd-&gt;num_entries].conn = de-&gt;conn; dsd-&gt;num_entries++; } }</span></span></code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุญุฐูุฑ</a> PVS-Studio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">V701</a> CWE-401 realloc () ุชุณุฑุจ ูุญุชูู: ุนูุฏูุง ููุดู realloc () ูู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุ ูุชู ููุฏุงู ุงููุคุดุฑ ุงูุฃุตูู 'dsd-&gt; ุงูุฅุฏุฎุงูุงุช'.  ุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ุชุนููู realloc () ููุคุดุฑ ูุคูุช.  2462 <br><br>  ุฅุฐุง ุฃุตุจุญ ุญุฌู ุงูุตููู ุบูุฑ ูุงูู ุ ูุณูุชู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุจุงุณุชุฎุฏุงู ูุธููุฉ <i>realloc</i> .  ุงูุฎุทุฃ ูู ุฃู ูููุฉ ุงููุคุดุฑ ุฅูู ูุชูุฉ ุงูุฐุงูุฑุฉ ุงูุฃุตููุฉ ูุชู ุงุณุชุจุฏุงููุง ุนูู ุงูููุฑ ุจุงููููุฉ ุงูุฌุฏูุฏุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง ุจูุงุณุทุฉ ุฏุงูุฉ <i>realloc</i> . <br><br>  ุฅุฐุง ูุดู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุ ูุณูู ุชููู ุฏุงูุฉ <i>realloc</i> ุจุฅุฑุฌุงุน NULL ุ ูุณุชุชู ูุชุงุจุฉ NULL ุฅูู ูุชุบูุฑ <i>ุงูุฅุฏุฎุงูุงุช dsd-&gt;</i> .  ุจุนุฏ ุฐูู ุณูููู ูู ุงููุณุชุญูู ุชุญุฑูุฑ ูุชูุฉ ุงูุฐุงูุฑุฉ ุงูุชู ุชู ุชุฎุฒูู <i>ุนููุงููุง</i> ูุณุจููุง ูู <i>ุฅุฏุฎุงูุงุช dsd-&gt;</i> .  ุณูุญุฏุซ ุชุณุฑุจ ููุฐุงูุฑุฉ. <br><br>  ุฎุทุฃ ุขุฎุฑ: ุชุณุฑุจ ูุญุชูู ูู V701 CWE-401 realloc (): ุนูุฏูุง ููุดู realloc () ูู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุ ูุชู ููุฏุงู ุงููุคุดุฑ ุงูุฃุตูู "ุงููุฎุฒู ุงููุคูุช".  ุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ุชุนููู realloc () ููุคุดุฑ ูุคูุช.  ุงููุนุงูุฌ ุงููุณุจู. cpp 84 <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ </h2><br>  ูุง ุฃุณุชุทูุน ุฃู ุฃููู ุฃู ุงูููุงูุฉ ูุฐู ุงููุฑุฉ ูุงูุช ุฑุงุฆุนุฉ ุ ุฃู ุฃููู ุชูููุช ูู ุฅุธูุงุฑ ุงููุซูุฑ ูู ุงูุฃุฎุทุงุก ุงููุธูุนุฉ.  ูุง ูุฌุจ ุงูููุงู ุจู ุ ูุฑุฉ ูุงุญุฏุฉ ูู ูู ูุฑุฉ ููุณุช ุถุฑูุฑูุฉ.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุง ุฃุฑุงู ุ ุซู ุฃูุชุจ</a> . <br><br>  ุดูุฑุง ููู ุนูู ุงูุชูุงููู.  ูุฅุฌุฑุงุก ุชุบููุฑ ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณุฃููู ุงูููุงูุฉ ุจุฏุนูุชู ููุชุงุจุนุชูู</a> ุนูู Instagrampvs_studio_unicorn ูุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">TwitterCode_Analysis</a> . <br><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/ts/z9/km/tsz9kmyjtteajhd4x1au60rsrvq.png" align="left"></a> </p><br><br>  ุฅุฐุง ููุช ุชุฑูุฏ ูุดุงุฑูุฉ ูุฐู ุงูููุงูุฉ ูุน ุฌูููุฑ ูุงุทู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ุ ููุฑุฌู ุงุณุชุฎุฏุงู ุฑุงุจุท ุงูุชุฑุฌูุฉ: Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนูู ุฌูุฏ ุ ูุคููู ุงููุนุจุฉ 0 ู!</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar420267/">https://habr.com/ru/post/ar420267/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar420257/index.html">ูู ูุง ุฒูุช ุชุซุจุช Windows 2008ุ ุฃูุง ุฃูุถูุง ุ ูููุฐุง ุงูุณุจุจ</a></li>
<li><a href="../ar420259/index.html">ููุญุฉ ุชุดุฎูุต ุงูุดูุฎูุฎุฉ ูู ุณูุบุงููุฑุฉ</a></li>
<li><a href="../ar420261/index.html">ูุงุฐุง ุณูููุณุ ููููุฉ ุงุฎุชูุงุฑ ููุงููุณ ML ุงูููุงุณุจุฉ ูููุงู ุงูุนูู</a></li>
<li><a href="../ar420263/index.html">ูุคุชูุฑ ServiceNow "Knowledge18"</a></li>
<li><a href="../ar420265/index.html">ุณุจุน ูุดููุงุช ูู ุชูููุฐ Scrum ูู ููู ูุนุฑู ุนููุง</a></li>
<li><a href="../ar420269/index.html">ุงุณุชูุฒุงู ุงูุฃููุงู: ููุงุฐุง ูุง ุชูุชุดู ููุงูุญุฉ ุงูุฎุฏุงุน ููุงูุน ุงูุชุตูุฏ ูููู ุชุนูู Data Science ุนูู ุฌุนููุง ุชุนููุ</a></li>
<li><a href="../ar420271/index.html">ุงูุชุฏุฑูุจ ุนูู ุงูุชุนุงุทู: ุชุญููุฒ ุงุชุตุงูุงุช ุงูุฏูุงุบ ุงูุนุตุจูุฉ ูู ุฎูุงู ูุนุจุฉ ููุฏูู</a></li>
<li><a href="../ar420273/index.html">ููู ูุชู ุชุฑุชูุจ ุณูุงุฑุฉ ุฑูุงุจ ูููุณุงูุงุช ุงูุทูููุฉ</a></li>
<li><a href="../ar420275/index.html">ุงููุคุชูุฑุงุช ุงููุจุฑู ุนูู ุฅูุชุฑูุช ุงูุฃุดูุงุก 2018-2019. ุฑูุณูุง ูุงูุนุงูู</a></li>
<li><a href="../ar420277/index.html">ุจุนุฏ ุงูุฏูุงุน ุงูุฐูุจ: ุขูุงู ุชูููููุฌูุง Blockchain</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>