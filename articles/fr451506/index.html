<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👉🏻 ☣️ 💪 Comment DNSCrypt a résolu le problème de certificat expiré en entrant une période de validité de 24 heures 🙂 👩🏿‍🤝‍👨🏽 🛅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le passé, les certificats expiraient souvent car ils devaient être mis à jour manuellement. Les gens ont juste oublié de le faire. Avec l'avèneme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment DNSCrypt a résolu le problème de certificat expiré en entrant une période de validité de 24 heures</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/globalsign/blog/451506/"><img src="https://habrastorage.org/webt/3e/zu/06/3ezu06vvjqxtd_brkvpowv0rfha.jpeg"><br><br>  Dans le passé, les certificats expiraient souvent car ils devaient être mis à jour manuellement.  Les gens ont juste oublié de le faire.  Avec l'avènement de Let's Encrypt et une procédure de mise à jour automatique, le problème semble être résolu.  Mais une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">histoire</a> récente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">avec Firefox</a> montre qu'en fait c'est toujours d'actualité.  Malheureusement, les certificats expirent toujours. <br><br>  Si quelqu'un a raté cette histoire, presque toutes les extensions Firefox ont soudainement cessé de fonctionner à minuit le 4 mai 2019. <br><a name="habracut"></a><br>  Il s'est avéré qu'un échec massif s'est produit car Mozilla avait <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">expiré le certificat</a> utilisé pour signer les extensions.  Par conséquent, ils ont été marqués comme "invalides" et n'ont pas réussi le test ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">détails techniques</a> ).  Sur les forums, comme solution de contournement, nous avons recommandé de désactiver la vérification des signatures d'extension dans <i>about: config</i> ou en traduisant l'horloge système. <br><br>  Mozilla a rapidement publié le correctif Firefox 66.0.4, qui résout le problème avec un certificat non valide, et toutes les extensions sont retournées à leur forme normale.  Les développeurs recommandent de l'installer et de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ne pas utiliser</a> de solution de contournement pour contourner la vérification de signature, car ils peuvent entrer en conflit avec le correctif. <br><br>  Cependant, cette histoire montre une fois de plus que l'expiration des certificats reste un problème urgent aujourd'hui. <br><br>  À cet égard, il est intéressant de regarder d'une manière assez originale comment les développeurs du protocole <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DNSCrypt ont</a> fait face à cette tâche.  Leur solution peut être divisée en deux parties.  Premièrement, ce sont des certificats à court terme.  Deuxièmement, avertir les utilisateurs de l'expiration de ceux à long terme. <br><br><h1>  DNSCrypt </h1><br><img src="https://habrastorage.org/webt/8h/s9/gh/8hs9ghvpin-ertiayryvn9qve70.png" align="left">  DNSCrypt - Protocole de chiffrement du trafic DNS.  Il protège les communications DNS contre les interceptions et MiTM, et vous permet également de contourner le blocage au niveau des requêtes DNS. <br><br>  Le protocole enveloppe le trafic DNS entre le client et le serveur dans une conception cryptographique, travaillant sur les protocoles de transport UDP et TCP.  Pour l'utiliser, le client et le résolveur DNS doivent prendre en charge DNSCrypt.  Par exemple, depuis mars 2016, il était activé sur ses serveurs DNS et dans le navigateur Yandex.  Le support a été annoncé par plusieurs autres fournisseurs, dont Google et Cloudflare.  Malheureusement, ils sont peu nombreux (152 serveurs DNS publics sont répertoriés sur le site officiel).  Mais le programme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dnscrypt-proxy</a> peut être installé manuellement sur les clients sous Linux, Windows et MacOS.  Il existe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des implémentations de serveur</a> . <br><br><img src="https://habrastorage.org/webt/e0/_d/tk/e0_dtkyjhanez_16etloysmxhy8.png"><br><br>  Comment fonctionne DNSCrypt?  En bref, le client prend la clé publique du fournisseur sélectionné et avec son aide vérifie ses certificats.  Il existe déjà des clés publiques à court terme pour la session et l'identifiant de la suite de chiffrement.  Il est conseillé aux clients de générer une nouvelle clé pour chaque demande, et les serveurs sont encouragés à changer les clés <b>toutes les 24 heures</b> .  Lors de l'échange de clés, l'algorithme X25519 est utilisé, EdDSA pour la signature et XSalsa20-Poly1305 ou XChaCha20-Poly1305 pour le chiffrement de bloc. <br><br>  Frank Denis, l'un des développeurs du protocole, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">écrit</a> que le remplacement automatique toutes les 24 heures a résolu le problème des certificats expirés.  En principe, le client de référence dnscrypt-proxy accepte les certificats avec une période de validité quelconque, mais il affiche un avertissement «La période de clé dnscrypt-proxy pour ce serveur est trop longue» si elle est valide pendant plus de 24 heures.  Dans le même temps, une image Docker a été publiée, dans laquelle ils ont implémenté un changement rapide de clés (et de certificats). <br><br>  Premièrement, il est extrêmement utile pour la sécurité: si le serveur est compromis ou que la clé est divulguée, le trafic d'hier ne peut pas être décrypté.  La clé a déjà changé.  Ce sera probablement un problème pour la mise en œuvre de la «loi de printemps», qui oblige les fournisseurs à stocker tout le trafic, y compris le trafic chiffré.  Il est entendu que plus tard il pourra être décrypté si nécessaire en demandant une clé au site.  Mais dans ce cas, le site ne pourra tout simplement pas le fournir, car il utilise des clés à court terme, supprimant les anciennes. <br><br>  Mais le plus important, écrit Denis, les clés à court terme obligent les serveurs à configurer l'automatisation dès le premier jour.  Si le serveur se connecte au réseau et que les scripts de changement de clé ne sont pas configurés ou ne fonctionnent pas, cela sera immédiatement détecté. <br><br>  Lorsque l'automatisation change de clé toutes les quelques années, vous ne pouvez pas vous y fier et les utilisateurs peuvent oublier l'expiration du certificat.  Avec un changement de clé quotidien, cela sera détecté instantanément. <br><br>  Dans le même temps, si l'automatisation est configurée normalement, la fréquence de changement des clés n'a pas d'importance: chaque année, chaque trimestre ou trois fois par jour.  Si tout fonctionne pendant plus de 24 heures, cela fonctionnera pour toujours, écrit Frank Denis.  Selon lui, la recommandation d'un changement de clé quotidien dans la deuxième version du protocole, ainsi que l'image Docker prête à l'emploi qui le met en œuvre, ont effectivement réduit le nombre de serveurs avec des certificats expirés, tout en améliorant la sécurité. <br><br>  Cependant, certains fournisseurs ont tout de même décidé, pour des raisons techniques, de fixer la période de validité du certificat à plus de 24 heures.  Ce problème a été principalement résolu avec quelques lignes de code dans dnscrypt-proxy: les utilisateurs reçoivent un avertissement d'information 30 jours avant l'expiration du certificat, un autre message avec un niveau de gravité plus élevé 7 jours avant l'expiration du certificat et un message critique si le certificat reste moins de 24 heures.  Cela ne s'applique qu'aux certificats qui ont initialement une longue période de validité. <br><br>  Ces messages permettent aux utilisateurs d'informer les opérateurs DNS de l'expiration prochaine du certificat avant qu'il ne soit trop tard. <br><br>  Peut-être que si tous les utilisateurs de Firefox avaient reçu un tel message, alors quelqu'un aurait probablement informé les développeurs et n'aurait pas autorisé l'expiration du certificat.  "Je ne me souviens pas d'un seul serveur DNSCrypt de la liste des serveurs DNS publics ayant expiré un certificat au cours des deux ou trois dernières années", écrit Frank Denis.  Dans tous les cas, il est probablement préférable d'avertir d'abord les utilisateurs et de ne pas désactiver les extensions sans avertissement. <br><br><hr><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/rw/hk/1y/rwhk1y-msfqaknqu2kbktqf6g7a.jpeg"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/od/n-/xe/odn-xebtl8a5lexzip_kkkezr6s.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr451506/">https://habr.com/ru/post/fr451506/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr451492/index.html">Sept variables Bash inattendues</a></li>
<li><a href="../fr451496/index.html">Mitap Netologii «Carrières en science des données pour les débutants»</a></li>
<li><a href="../fr451498/index.html">Food Design Digest, avril 2019</a></li>
<li><a href="../fr451502/index.html">Événements numériques à Moscou du 13 au 19 mai</a></li>
<li><a href="../fr451504/index.html">Photos sur le web 2019</a></li>
<li><a href="../fr451508/index.html">Guide factice: Création de chaînes DevOps à l'aide d'outils Open Source</a></li>
<li><a href="../fr451510/index.html">Un peu de paroles techniques sur les outils C ++ de JetBrains, et qu'est-ce que les licornes ont à voir avec ça</a></li>
<li><a href="../fr451512/index.html">Comment analyser le protocole réseau MMORPG mobile</a></li>
<li><a href="../fr451514/index.html">Nouvelles des sous-grilles CSS</a></li>
<li><a href="../fr451516/index.html">Modèles de conception utilisés dans le framework Spring</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>