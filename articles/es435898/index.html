<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöà üñïüèΩ ü§û En qu√© pensar en una entrevista NALSD üóìÔ∏è üë®üèø‚Äçüöí üêì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Describ√≠ una t√≠pica entrevista de codificaci√≥n anteriormente. Adem√°s de la codificaci√≥n, casi siempre hay una pregunta sobre el dise√±o del sistema. (G...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>En qu√© pensar en una entrevista NALSD</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/google/blog/435898/">  Describ√≠ una t√≠pica <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">entrevista de codificaci√≥n</a> anteriormente.  Adem√°s de la codificaci√≥n, casi siempre hay una pregunta sobre el dise√±o del sistema.  (Grande) Dise√±o del sistema.  En el caso de las entrevistas en SRE, esta es una bestia a√∫n m√°s interesante (para m√≠): NALSD.  Dise√±o de sistema grande no abstracto.  La principal diferencia entre SWE y SRE es precisamente en estas letras "NA". <br><br><img src="https://habrastorage.org/webt/zr/dx/lz/zrdxlzdyc1xmixaibmzonhnkup0.jpeg" align="right" width="400" title="Biblioteca en Google Zurich">  ¬øCu√°l es la diferencia y c√≥mo prepararse?  Veamos un ejemplo.  Como ejemplo, tomaremos algo muy material, algo que nadie pedir√° una entrevista real (en Google) :) <br><br>  Por ejemplo, dise√±emos una biblioteca.  Para libros de papel, el habitual.  El texto completo a continuaci√≥n se escribi√≥ en una sesi√≥n en aproximadamente una hora para mostrar aproximadamente lo que puede hacer y lo que es importante hacer.  As√≠ que perd√≥name por la confusi√≥n, pero creo que s√≠ (y por lo tanto existe). <br><a name="habracut"></a><blockquote><h4>  Pregunta de NALSD: Dise√±e una biblioteca p√∫blica. </h4><br>  Primero, nos interesan las caracter√≠sticas de la carga, o nosotros mismos hacemos una suposici√≥n razonable.  Como se trata de un sistema escalable, esta es una ciudad m√≠nima de un mill√≥n de personas.  Vale la pena considerar las opciones: un edificio grande o bibliotecas de distrito m√°s almacenamiento.  Me parece que esto √∫ltimo es m√°s razonable.  Especialmente si no es una ciudad, sino una ciudad. <br><br>  Por lo tanto, nos centraremos en este momento en el sistema de una ciudad (con algunas reservas, podemos aplicar un mecanismo similar en un nivel superior para escalar a muchas ciudades).  Entonces, la ciudad es un mill√≥n de personas.  Redondeamos los n√∫meros para la conveniencia de las estimaciones: permita que haya 1 mill√≥n de lectores probables.  Los lectores van a leer en cualquier momento independientemente uno del otro.  Entonces podemos entenderlo como un simple proceso de Poisson.  Pero el conteo ‚Äúen la carrera‚Äù normalmente ser√° dif√≠cil, as√≠ que tome otro paso de simplificaci√≥n y simplemente tome que el 1% de los lectores querr√°n tomar un libro por d√≠a.  En total, para m√°s c√°lculos, tomamos 10,000 libros por d√≠a. <br><br>  Nuestra tarea es proporcionar la posibilidad de emitir 10,000 libros por d√≠a (adem√°s de devolver los mismos 10,000 en cualquier otro d√≠a en el futuro, por cierto) en la ciudad de m√°s de un mill√≥n.  En este punto, la cuesti√≥n de la monobiblioteca o el distrito ya est√° desapareciendo (por cierto, para que todo el mill√≥n sean lectores potenciales, deben poder llegar a la biblioteca en un per√≠odo de tiempo razonable; de ‚Äã‚Äãlo contrario, el deseo de tomar el libro seguramente disminuir√° con el tiempo de espera).  Por lo tanto, necesitamos evaluar la capacidad de cada biblioteca local.  Es correcto hacer esto teniendo en cuenta la densidad de poblaci√≥n y la accesibilidad, pero dado que esto no afecta en gran medida el sistema en s√≠, por simplicidad de c√°lculos, imaginemos que los ubicamos de manera uniforme.  Pero esto todav√≠a no significa c√≥mo podemos compartirlos.  Obviamente, colocar 10,000 bibliotecas con un libro de manera uniforme en la ciudad no tiene sentido, por lo que debe comprender lo que tiene sentido.  Salimos al nivel inferior. <br><br>  Entonces, una biblioteca.  Para que tenga sentido, la mayor√≠a de los que vienen deben encontrar el libro que necesitan.  Esto significa que necesitaremos mantener un registro y un pron√≥stico de las consultas m√°s populares y tener estos libros listos.  Entonces, debemos mantener el surtido en principio.  Sin pensarlo, dir√≠a que una biblioteca local deber√≠a tener al menos 1000 elementos, la parte superior de ellos en una multitud de copias, m√°s superiores, menos secundarias.  El libro promedio en nuestra biblioteca se lee de 3 d√≠as a 2 semanas (de hecho, la caracter√≠stica depende del libro, se requiere un an√°lisis por separado aqu√≠), lo tomamos igual a la semana promedio y seguimos adelante.  Es decir, el libro tomado falta durante aproximadamente una semana, por lo que los libros m√°s importantes deben almacenarse durante una semana (luego comenzar√°n a recuperarse de los retornos). <br><br>  Tomemos un factor de inflaci√≥n promedio de 6. Entonces, la capacidad de almacenamiento comienza en 6,000 libros.  Menos significa que esto es solo una peque√±a parte superior, que a√∫n puede ayudar en algunos casos (por ejemplo, una isla con "crep√∫sculo" en un supermercado cerca de la sala de juegos para ni√±os), pero lo dejaremos afuera por ahora. <br><br>  En el estado de "equilibrio", regresan y toman aproximadamente el mismo d√≠a, m√°s o menos la dispersi√≥n, pero a√∫n necesitamos la capacidad de aceptar un mayor n√∫mero de n√∫meros m√°ximos de retornos (por ejemplo, debido a una sincronizaci√≥n externa como vacaciones o un cambio de moda).  As√≠ es, para simular.  Pero aqu√≠ y ahora tomaremos un tercero como amortiguador.  En total, apoyamos 6,000 libros disponibles para su emisi√≥n, m√°s un lugar para otros 2,000 en reserva. <br><br>  Entonces, necesitamos una unidad que pueda almacenar 8000 libros.  La reposici√≥n diaria es muy costosa, lo que significa que es por una semana o dos.  Dos semanas, 6,000 libros, con un sesgo en las devoluciones, esto es aproximadamente 300 por d√≠a.  En el momento de la apertura, podemos calificar los 8000 libros para crear el 2000 inicial en circulaci√≥n antes de que regrese el primero.  2000 por 3 d√≠as = aproximadamente 600 libros por d√≠a, m√°s buffer = 800 libros por d√≠a. <br><br>  Vamos a estimar el ancho de banda y los l√≠mites de almacenamiento.  Un libro toma un promedio de 2 cent√≠metros de espacio lineal, 8000 libros - 160 metros.  gire 4 veces verticalmente, 40 metros.  Nos separamos en bastidores de 5 metros, obtenemos 8 bastidores de 4 estantes de 5 metros de largo.  Un bibliotecario (o un robo-bibliotecario) podr√° trabajar con dos bastidores, extraer un libro tomar√° hasta 5 segundos para alcanzarlo, 5 segundos para sacarlo o poner el libro, 5 segundos hacia atr√°s, un total de 15 segundos.  4 bibliotecarios nos proporcionar√°n aproximadamente 15 libros por minuto como m√°ximo, es decir, aproximadamente 900 libros por hora desde el almac√©n aproximadamente. <br><br>  Agregamos tiempo para procesar la solicitud (10s), buscar (5s), ingresar al sistema de recepci√≥n y emisi√≥n (2s) =&gt; 400 libros por hora.  Por lo tanto, el almacenamiento en su punto m√°ximo puede emitir 400 libros por hora, por lo tanto, se puede acceder a 800 libros por d√≠a en 2 horas de trabajo. <br><br>  Ahora consideramos otras caracter√≠sticas: para entregar 400 libros por hora por 4 personas, es necesario acomodar a 100 personas en la sala de espera en una cola frente a la ventana de procesamiento, y para que estas personas no creen multitudes en la entrada y salida.  Es decir, el grupo de entrada debe pasar 400 personas por hora en ambas direcciones.  Resulta que el limitador principal ni siquiera ser√° el almacenamiento, sino la capacidad del pasillo y el grupo de entrada. <br><br>  Esto significa que ser√° posible encontrar la relaci√≥n √≥ptima de almacenamiento y sala con c√°lculos m√°s precisos. <br><br>  Entonces, con la unidad ordenada, volvemos al nivel anterior.  Estimamos la carga total en la biblioteca en aproximadamente 10,000 libros por d√≠a, contamos una unidad en 800 libros por d√≠a, es decir, necesitamos 12.5 unidades.  Con la distribuci√≥n geogr√°fica alrededor de la ciudad, una o dos unidades alternativas (en las fronteras de la ciudad) o incluso 3-4 (adentro) ser√°n accesibles a cada lector, lo que le permite suavizar ligeramente los picos de tr√°fico y / o una mayor demanda de posiciones espec√≠ficas. <br><br>  Tambi√©n sabemos que en cualquier momento se puede cerrar cualquier biblioteca (incendio, inspecci√≥n sanitaria, pintar las manijas de los refrigeradores u otra cosa), con un aumento en el n√∫mero de ellos, la probabilidad de que dos se caigan de la vida coincide, por lo que necesitamos una unidad de repuesto para cada 5-6 unidades  En total, 15 unidades deben garantizar el rendimiento requerido, siempre que mantengan el stock estimado en sus almacenes. <br><br>  Para mantener el stock estimado, tendremos que actualizar una vez por semana o dos (pensamos m√°s arriba de dos) aproximadamente la mitad del surtido para seguir las tendencias, etc.  Esto significa que cada unidad necesita transportar y exportar 4.000 libros cada dos semanas.  Con cada importaci√≥n y exportaci√≥n, estos mismos 4.000 libros deben eliminarse del repositorio y luego se colocan otros.  A 400 libros por hora, la actualizaci√≥n del surtido llevar√° 10 horas con la carga m√°xima.  Lo que, al parecer, todav√≠a no es tan malo, de nuevo, con la carga masiva, muchas cosas ir√°n m√°s r√°pido, sin embargo, mantener el surtido requiere 5 veces m√°s que trabajar con la poblaci√≥n. <br><br>  El libro promedio (2cm * 20cm * 30cm) es de aproximadamente 1.5l, es decir, 4000 libros = 6 metros c√∫bicos.  Se adapta f√°cilmente a una gacela.  El peso de un metro c√∫bico de papel es de 600 kg, es decir, 6 metros c√∫bicos es de 3.6 toneladas.  La capacidad de carga de la gacela es de una tonelada y media, por lo que se necesitar√°n tres gacelas.  M√°s una copia de seguridad.  Tenemos 15 unidades, actualizamos cada 2 semanas, con una distribuci√≥n uniforme estamos al l√≠mite, tenemos que agregar otra gacela. <br><br>  <i>Y no tuvimos tiempo de pensar d√≥nde y d√≥nde llevan estas gacelas, por lo que los almacenes del proveedor y los puntos de descarga de libros que han perdido relevancia aparecen en el diagrama ...</i> <br></blockquote><br>  Entonces se acab√≥ el tiempo.  ¬øQu√© es tan anormal en la pregunta NALSD?  Escalabilidad debe estar en cualquier dise√±o de sistema grande.  Lo principal es la <b>concreci√≥n</b> . <br><br>  Hice muchas suposiciones y suposiciones anteriores, pero todas las estimaciones posteriores se basaron en las anteriores.  Para los n√∫meros, tambi√©n intent√© dar "c√≥mo evaluar correctamente", sin embargo, es muy f√°cil olvidar hacerlo, te cansas y lo olvidas.  Todav√≠a es muy f√°cil quedarse con un n√∫mero de memoria, sin explicaci√≥n ... Pero como el dise√±o es concreto, si alguno de los supuestos resulta ser err√≥neo, se puede arreglar y volver a contar m√°s tarde. <br><br>  <i>Como recuerdo ahora, en mi entrevista con las estimaciones, tom√© un IOPS de un disco de 600, simplemente porque lo optimic√© recientemente y trabaj√© con una matriz, donde _array_ entreg√≥ 600 IOPS ... El entrevistado me pregunt√≥ un poco sorprendido entonces: ¬ø600 IOPS al disco?</i>  <i>: D</i> <br><br>  Durante la entrevista, el entrevistador puede corregir cualquiera de sus suposiciones.  O agregue alg√∫n tipo de restricci√≥n (que no conoc√≠a, no pens√≥, no pregunt√≥ o simplemente el cambio habitual de TK sobre la marcha).  Al mismo tiempo, dado que est√° operando exclusivamente con n√∫meros espec√≠ficos, esto ser√° solo una actualizaci√≥n trivial de los n√∫meros. <br><br>  Si el ajuste de la suposici√≥n provoca un redise√±o del sistema, se trata de un error de dise√±o o un ajuste incorrecto, o va m√°s all√° de la aplicabilidad del sistema, que tampoco es una situaci√≥n rara en la vida real.  Es importante no perderse esos momentos y evaluar las cifras recibidas para la realidad tanto durante la etapa de dise√±o como con cualquier ajuste. <br><br>  Como SRE, estamos obligados a pensar en t√©rminos de escalar sistemas reales bajo las limitaciones reales del hardware real.  Es muy posible que haya un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">algoritmo</a> excelente que intercambie enormes costos de tiempo por una peque√±a cantidad de memoria ... Pero a√∫n as√≠, no puede colocar un petabyte de RAM en el n√∫cleo de un procesador en condiciones reales.  Entonces, si tenemos un petabyte de RAM, entonces tenemos al menos diez mil procesadores.  O veinte.  O treinta.  Y debemos buscar lo √≥ptimo, no global, sino aqu√≠ y ahora, en las condiciones dadas. <br><br>  No es necesario que recuerde los n√∫meros exactos, pero debe tener alguna idea del orden: el mismo IOPS, que el HDD tiene alrededor de cien, y el SSD tiene cientos de miles.  Pero estos cientos de miles van junto con la relaci√≥n entre el costo de un terabyte de HDD y el costo de un terabyte de SSD como uno de cada tres a cuatro.  Y esto no cuenta el arn√©s: un espacio en el estante, cuchillas para ellos, puertos en los interruptores y otras cosas que dejan de ser un centavo cuando la factura va a petabytes. <br><br>  Ahora recu√©stese un poco en su silla, rel√°jese e intente dise√±ar un sistema para suministrar huevos de gallina frescos por suscripci√≥n. <br><br>  Si desea compartir con colegas de habla inglesa, hay una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">opci√≥n en ingl√©s</a> (as√≠ como en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el hub de ingl√©s</a> ). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es435898/">https://habr.com/ru/post/es435898/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es435886/index.html">SpaceX mostr√≥ el prototipo de nave espacial y reducir√° el 10% del personal</a></li>
<li><a href="../es435890/index.html">Los lados oscuros de una persona activa.</a></li>
<li><a href="../es435892/index.html">El resumen de materiales interesantes para el desarrollador m√≥vil # 281 (del 7 al 13 de enero)</a></li>
<li><a href="../es435894/index.html">Clases privadas Escondi√©ndose en php</a></li>
<li><a href="../es435896/index.html">Uso de DiagnosticSource en .NET Core: teor√≠a</a></li>
<li><a href="../es435900/index.html">Encapsularlo</a></li>
<li><a href="../es435902/index.html">No puede simplemente tomar y escribir SELECCIONAR si el proveedor no lo permite ... pero nosotros escribiremos</a></li>
<li><a href="../es435904/index.html">AI tradujo la actividad cerebral al habla</a></li>
<li><a href="../es435906/index.html">Marcapasos Cluster Storage + DRBD (Dual primario) + ctdb</a></li>
<li><a href="../es435908/index.html">Web asc√©tica: prototipo de mercados de pulgas en go and js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>