<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úñÔ∏è üôÉ ü•¢ Como e por que migramos o Preply para o Kubernetes üêØ ‚ùÑÔ∏è üë©üèæ‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neste artigo, descreverei nossa experi√™ncia de migra√ß√£o do Preply para o Kubernetes, como e por que fizemos isso, quais dificuldades encontramos e qua...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como e por que migramos o Preply para o Kubernetes</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464465/"><p>  Neste artigo, descreverei nossa experi√™ncia de migra√ß√£o do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Preply</a> para o Kubernetes, como e por que fizemos isso, quais dificuldades encontramos e quais vantagens obtivemos. </p><br><p><img src="https://habrastorage.org/webt/dg/ko/pe/dgkopeifykiyrylbtsvqb6u89ni.jpeg"></p><a name="habracut"></a><br><h2 id="kubernetes-radi-kubernetes-net-biznes-trebovaniya">  Kubernetes para Kubernetes?  N√£o, requisitos de neg√≥cios! </h2><br><p>  Em torno de Kubernetes, h√° muita publicidade e por boas raz√µes.  Muitas pessoas dizem que isso resolver√° todos os problemas, algumas dizem que provavelmente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">voc√™ n√£o precisa do Kubernetes</a> .  A verdade, √© claro, est√° algures no meio. </p><br><p><img src="https://habrastorage.org/webt/f5/ny/or/f5nyorsmmm2vqawfm6dxw-2qees.jpeg"></p><br><p>  No entanto, todas essas discuss√µes sobre onde e quando o Kubernetes √© necess√°rio merecem um artigo separado.  Agora vou falar um pouco sobre nossos requisitos de neg√≥cios e como a Preply funcionou antes da migra√ß√£o para o Kubernetes: </p><br><ul><li> Quando usamos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fluxo Skullcandy</a> , t√≠nhamos muitos galhos, todos eles mesclados em um galho comum chamado <code>stage-rc</code> , implantado no palco.  A equipe de controle de qualidade testou esse ambiente, depois de testar a ramifica√ß√£o que era alegre no mestre e o mestre implantado no produto.  Todo o procedimento levou cerca de <strong>3-4 horas</strong> e conseguimos implantar <strong>de 0 a 2 vezes por dia</strong> </li><li>  Quando implantamos o c√≥digo quebrado no produto, tivemos que reverter todas as altera√ß√µes inclu√≠das na vers√£o mais recente.  Tamb√©m foi dif√≠cil descobrir qual altera√ß√£o quebrou nosso produto </li><li>  Usamos o AWS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Elastic Beanstalk</a> para hospedar nosso aplicativo.  Cada implanta√ß√£o do Beanstalk no nosso caso levou 45 minutos (todo o pipeline juntamente com os testes foram executados em <strong>90 minutos</strong> ).  A revers√£o para a vers√£o anterior do aplicativo levou <strong>45 minutos</strong> </li></ul><br><p>  Para melhorar nossos produtos e processos na empresa, quer√≠amos: </p><br><ul><li>  Divida um mon√≥lito em microsservi√ßos </li><li>  Implante mais r√°pido e com mais frequ√™ncia </li><li>  Retroceda mais rapidamente </li><li>  Mude nosso processo de desenvolvimento porque pensamos que n√£o era mais eficaz </li></ul><br><h2 id="nashi-potrebnosti">  Nossas necessidades </h2><br><h3 id="izmenyaem-process-razrabotki">  Mudamos o processo de desenvolvimento </h3><br><p>  Para implementar nossas inova√ß√µes com o fluxo Skullcandy, precis√°vamos criar um ambiente din√¢mico para cada filial.  Em nossa abordagem com a configura√ß√£o de aplicativos no Elastic Beanstalk, era dif√≠cil e caro fazer isso.  Quer√≠amos criar ambientes que: </p><br><ul><li>  Implantado de forma r√°pida e f√°cil (de prefer√™ncia cont√™ineres) </li><li>  Trabalhou em inst√¢ncias spot </li><li>  Eles eram t√£o parecidos com prod </li></ul><br><p>  Decidimos mudar para o desenvolvimento baseado em tronco.  Com sua ajuda, cada recurso possui uma ramifica√ß√£o separada, que, independentemente do restante, pode ser mesclada em um mestre.  Uma ramifica√ß√£o principal pode ser implantada a qualquer momento. </p><br><p><img src="https://habrastorage.org/webt/fp/az/cm/fpazcmrnvwjcaeu_xtbwjxlsdwe.jpeg"><br>  <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Desenvolvimento baseado em git-flow e tronco</a></em> </p><br><h3 id="deploimsya-bystree-i-chasche">  Implante mais r√°pido e com mais frequ√™ncia </h3><br><p>  O novo processo baseado em tronco nos permitiu entregar inova√ß√µes para a filial principal mais rapidamente, uma ap√≥s a outra.  Isso nos ajudou muito no processo de encontrar c√≥digo quebrado no produto e revert√™-lo.  No entanto, o tempo de implanta√ß√£o ainda era de 90 minutos e o tempo de revers√£o era de 45 minutos, por isso n√£o foi poss√≠vel implantar com mais frequ√™ncia 4-5 vezes por dia. </p><br><p>  Tamb√©m encontramos dificuldades ao usar a arquitetura de servi√ßo no Elastic Beanstalk.  A solu√ß√£o mais √≥bvia foi usar cont√™ineres e instrumentos para orquestr√°-los.  Al√©m disso, j√° t√≠nhamos experi√™ncia no uso do Docker e do docker-composite para desenvolvimento local. </p><br><p>  Nosso pr√≥ximo passo foi pesquisar os populares orquestradores de cont√™ineres: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AWS ECS</a> </li><li>  Enxame </li><li>  Mesos Apache </li><li>  Nomad </li><li>  Kubernetes </li></ul><br><p>  Decidimos ficar no Kubernetes, e √© por isso.  Entre os orquestradores em quest√£o, todos tiveram algumas falhas importantes: o ECS √© uma solu√ß√£o dependente de fornecedor, o Swarm j√° perdeu os louros do Kubernetes, o Apache Mesos parecia uma nave espacial para n√≥s com seus tratadores.  Nomad parecia interessante, mas se revelou totalmente apenas em integra√ß√£o com outros produtos Hashicorp, tamb√©m ficamos desapontados com o fato de os namespaces no Nomad terem sido pagos. </p><br><p>  Apesar de seu alto limiar de entrada, o Kubernetes √© o padr√£o de fato na orquestra√ß√£o de cont√™ineres.  O Kubernetes como servi√ßo est√° dispon√≠vel na maioria dos principais provedores de nuvem.  A orquestra est√° em desenvolvimento ativo, possui uma grande comunidade de usu√°rios e desenvolvedores e boa documenta√ß√£o. </p><br><p>  Esper√°vamos migrar totalmente nossa plataforma para o Kubernetes em 1 ano.  Dois engenheiros de plataforma sem experi√™ncia no Kubernetes estavam envolvidos na migra√ß√£o de inicializa√ß√£o parcial. </p><br><h2 id="ispolzuem-kubernetes">  Usando o Kubernetes </h2><br><p>  Come√ßamos com a prova de conceito, criamos um cluster de teste e documentamos tudo o que fizemos em detalhes.  Decidimos usar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">kops</a> , j√° que em nossa regi√£o naquele momento o EKS ainda n√£o estava dispon√≠vel (na Irlanda, foi anunciado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">em setembro de 2018</a> ). </p><br><p>  Enquanto trabalhamos com o cluster, testamos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">autoscaler de cluster</a> , o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gerente de</a> certifica√ß√£o Prometheus, integra√ß√µes com o Hashicorp Vault, Jenkins e muito mais.  Jogamos com estrat√©gias de atualiza√ß√£o sem interrup√ß√£o, enfrentamos v√°rios problemas de rede, em particular com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DNS</a> , e refor√ßamos nosso conhecimento em clustering de cluster. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Eles</a> usaram <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">inst√¢ncias spot</a> para otimizar os custos de infraestrutura.  Para receber notifica√ß√µes sobre problemas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">spot</a> , eles usaram o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">kube-spot-termination-handler-handler</a> , o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Spot Instance Advisor</a> pode ajud√°-lo a escolher o tipo de inst√¢ncia spot. </p><br><p>  Iniciamos a migra√ß√£o do fluxo Skullcandy para o desenvolvimento baseado em tronco, onde lan√ßamos um est√°gio din√¢mico para cada solicita√ß√£o pull, o que nos permitiu reduzir o tempo de entrega de novos recursos <strong>de 4-6 para 1-2 horas</strong> . </p><br><p><img src="https://habrastorage.org/webt/os/pt/nk/osptnk8oas5jj-mqrp89sopqqj8.png"><br>  <em>Github hook lan√ßa cria√ß√£o de ambiente din√¢mico para solicita√ß√£o pull</em> </p><br><p>  Usamos um cluster de teste para esses ambientes din√¢micos, cada ambiente estava em um espa√ßo para nome separado.  Os desenvolvedores tiveram acesso ao Painel Kubernetes para depurar seu c√≥digo. </p><br><p>  Estamos felizes por termos come√ßado a se beneficiar do Kubernetes ap√≥s apenas 1-2 meses desde o in√≠cio de seu uso. </p><br><h2 id="klastery-dlya-steydzha-i-proda">  Clusters de est√°gio e venda </h2><br><p>  Nossas configura√ß√µes para clusters de est√°gio e produto: </p><br><ul><li>  kops e Kubernetes 1.11 (a vers√£o mais recente no momento da cria√ß√£o do cluster) </li><li>  Tr√™s n√≥s principais em diferentes zonas de acesso </li><li>  Topologia de rede privada com basti√£o dedicado, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Calico</a> CNI </li><li>  O Prometheus para coletar m√©tricas √© implantado no mesmo cluster que o PVC (vale a pena considerar que n√£o armazenamos m√©tricas por um longo tempo) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Agente de Datadog</a> para APM </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dex + dex-k8s-authenticator</a> para fornecer acesso ao cluster para desenvolvedores </li><li>  Os n√≥s para o cluster de est√°gio funcionam em inst√¢ncias spot </li></ul><br><p>  Ao trabalhar com clusters, encontramos v√°rios problemas.  Por exemplo, as vers√µes do agente Nginx Ingress e Datadog diferiam nos clusters. Em rela√ß√£o a isso, algumas coisas funcionavam no cluster de est√°gio, mas n√£o funcionavam no prod.  <strong>Portanto, decidimos fazer a conformidade total das vers√µes de software nos clusters para evitar esses casos.</strong> </p><br><h2 id="migriruem-prod-v-kubernetes">  Migrando Prod para Kubernetes </h2><br><p>  Os clusters de palco e alimentos est√£o prontos e estamos prontos para iniciar a migra√ß√£o.  Usamos monorepa com a seguinte estrutura: </p><br><pre> <code class="plaintext hljs">. ‚îú‚îÄ‚îÄ microservice1 ‚îÇ ‚îú‚îÄ‚îÄ Dockerfile ‚îÇ ‚îú‚îÄ‚îÄ Jenkinsfile ‚îÇ ‚îî‚îÄ‚îÄ ... ‚îú‚îÄ‚îÄ microservice2 ‚îÇ ‚îú‚îÄ‚îÄ Dockerfile ‚îÇ ‚îú‚îÄ‚îÄ Jenkinsfile ‚îÇ ‚îî‚îÄ‚îÄ ... ‚îú‚îÄ‚îÄ microserviceN ‚îÇ ‚îú‚îÄ‚îÄ Dockerfile ‚îÇ ‚îú‚îÄ‚îÄ Jenkinsfile ‚îÇ ‚îî‚îÄ‚îÄ ... ‚îú‚îÄ‚îÄ helm ‚îÇ ‚îú‚îÄ‚îÄ microservice1 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ Chart.yaml ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ ... ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ values.prod.yaml ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ values.stage.yaml ‚îÇ ‚îú‚îÄ‚îÄ microservice2 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ Chart.yaml ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ ... ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ values.prod.yaml ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ values.stage.yaml ‚îÇ ‚îú‚îÄ‚îÄ microserviceN ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ Chart.yaml ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ ... ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ values.prod.yaml ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ values.stage.yaml ‚îî‚îÄ‚îÄ Jenkinsfile</code> </pre> <br><p>  O <code>Jenkinsfile</code> raiz cont√©m uma tabela de correspond√™ncia entre o nome do microsservi√ßo e o diret√≥rio em que seu c√≥digo est√° localizado.  Quando o desenvolvedor ret√©m a solicita√ß√£o de recebimento para o mestre, uma tag √© criada no GitHub, essa tag √© implantada no produto usando o Jenkins de acordo com o arquivo Jenkins. </p><br><p>  O diret√≥rio <code>helm/</code> cont√©m gr√°ficos HELM com dois arquivos de valores separados para est√°gio e venda.  Usamos o Skaffold para implantar muitos gr√°ficos HELM no palco.  Tentamos usar o quadro geral, mas enfrentamos o fato de que √© dif√≠cil de escalar. </p><br><p>  De acordo com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aplicativo de doze fatores,</a> cada novo microsservi√ßo no produto grava logs no stdout, l√™ segredos do Vault e possui um conjunto b√°sico de alertas (verifica√ß√£o do n√∫mero de lares em funcionamento, quinhentos erros e lat√™ncia na entrada). </p><br><p>  Independentemente de importarmos ou n√£o novos recursos para microsservi√ßos, no nosso caso, toda a funcionalidade principal est√° no mon√≥lito do Django e esse mon√≥lito ainda funciona no Elastic Beanstalk. </p><br><p><img src="https://habrastorage.org/webt/oj/w2/gc/ojw2gcp4v5ngnjl1vy1annhwbyg.jpeg"><br>  <em>Divida o mon√≥lito em microsservi√ßos // The Vigeland Park em Oslo</em> </p><br><p>  Usamos o AWS Cloudfront como uma CDN e, com ele, uma implanta√ß√£o de can√°rio durante toda a migra√ß√£o.  Come√ßamos a migrar o mon√≥lito para o Kubernetes e test√°-lo em algumas vers√µes de idiomas e nas p√°ginas internas do site (como o painel de administra√ß√£o).  Um processo de migra√ß√£o semelhante nos permitiu detectar bugs no produto e aperfei√ßoar nossas implanta√ß√µes em apenas algumas itera√ß√µes.  Ao longo de algumas semanas, monitoramos o estado da plataforma, carga e monitoramento e, no final, 100% do tr√°fego de vendas foi transferido para o Kubernetes. </p><br><p><img src="https://habrastorage.org/webt/zb/jt/-f/zbjt-f_jggyybesds7w0u0cuhx0.png"></p><br><p>  Depois disso, fomos completamente capazes de abandonar o uso do Elastic Beanstalk. </p><br><h2 id="itogi">  Sum√°rio </h2><br><p>  A migra√ß√£o completa levou 11 meses, como mencionei acima, planejamos cumprir o prazo de 1 ano. </p><br><p>  Na verdade, os resultados s√£o √≥bvios: </p><br><ul><li>  O tempo de implanta√ß√£o diminuiu de <strong>90 minutos</strong> para <strong>40 minutos</strong> </li><li>  O n√∫mero de implanta√ß√µes aumentou de <strong>0-2</strong> para <strong>10-15</strong> por dia (e ainda est√° crescendo!) </li><li>  O tempo de revers√£o diminuiu de <strong>45</strong> para <strong>1-2 minutos</strong> </li><li>  Podemos facilmente fornecer novos microsservi√ßos ao produto </li><li>  Arrumamos nosso monitoramento, registro, gerenciamento de segredos, centralizamos e os descrevemos como c√≥digo </li></ul><br><p>  Foi uma experi√™ncia muito legal de migra√ß√£o e ainda estamos trabalhando em muitas melhorias na plataforma.  Certifique-se de ler o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo interessante</a> sobre a experi√™ncia com Kubernetes da Jura, ele foi um desses engenheiros da YAML envolvidos na implementa√ß√£o do Kubernetes no Preply. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt464465/">https://habr.com/ru/post/pt464465/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt464451/index.html">Como eu fiz um rastreador de estacionamento para pessoas</a></li>
<li><a href="../pt464453/index.html">Huskies: remover, sair, substituir? O que?</a></li>
<li><a href="../pt464457/index.html">22 sites para um programador ajud√°-lo a falar ingl√™s</a></li>
<li><a href="../pt464459/index.html">Quatro regras de UX intuitivo</a></li>
<li><a href="../pt464463/index.html">Cadeia de respondentes do iOS ou o que eles pedem na entrevista</a></li>
<li><a href="../pt464467/index.html">Aprenda an√°lise da web a partir do zero. Grande sele√ß√£o</a></li>
<li><a href="../pt464471/index.html">monitoramento de impressora snmp em The Dude</a></li>
<li><a href="../pt464479/index.html">"Manifesto de programadores iniciantes de especialidades relacionadas" ou como cheguei a essa vida</a></li>
<li><a href="../pt464481/index.html">Como constru√≠mos um sistema de treinamento e motiva√ß√£o no est√∫dio</a></li>
<li><a href="../pt464485/index.html">ShIoTiny: ventila√ß√£o em salas √∫midas (exemplo de projeto)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>