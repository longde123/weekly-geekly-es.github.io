<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òùüèæ üë®üèø‚Äçüéì üë©üèø‚Äçü§ù‚Äçüë©üèª La edici√≥n de texto tambi√©n te odia üêç ‚òùüèº üõ¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El art√≠culo de Alexis Bingessner, "La representaci√≥n de texto te odia", publicado hace un mes , est√° muy cerca de m√≠. 

 En 2017, estaba desarrollando...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La edici√≥n de texto tambi√©n te odia</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474036/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El</a> art√≠culo de Alexis Bingessner, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"La representaci√≥n de texto te odia",</a> publicado hace un mes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">, est√°</a> muy cerca de m√≠. <br><br>  En 2017, estaba desarrollando un editor de texto interactivo en un navegador.  Insatisfecho con las bibliotecas ContentEditable existentes, pens√©: ‚Äú¬°Oye, solo vuelvo a realizar la selecci√≥n de texto!  ¬øEs dif√≠cil?  Yo era joven  Ingenuo.  Pens√© que podr√≠a manejarlo en dos semanas.  De hecho, un intento de resolver este problema tom√≥ varios a√±os de mi vida, incluido un a√±o de trabajo remunerado desde la ma√±ana hasta la tarde para desarrollar un editor de texto para el nuevo sistema operativo. <br><br>  En el trabajo, tuve la suerte de aprender mucho de <abbr title="como siempre, gracias a Raf Levien y Yokhey Yukawa que me ense√±aron todo lo que s√© sobre escribir">mentores con vasta experiencia en este campo</abbr> .  He escuchado muchas, muchas historias de miedo.  Incluyendo un ingeniero que admiti√≥ una aplicaci√≥n de Windows con una implementaci√≥n personalizada de un campo de texto y quer√≠a cambiar de una API de entrada de texto obsoleta a una nueva versi√≥n.  Aqu√≠ hay una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lista de interfaces de</a> entrada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de</a> texto en esta nueva versi√≥n: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/905/ade/db0/905adedb0a3bd875236bfadd2c9f533d.png"><br><a name="habracut"></a><br>  As√≠ es, 128 interfaces para ingresar texto.  Estoy casi seguro de que hay ocho (8) diferentes tipos de bloqueos para solucionar problemas de concurrencia, aunque honestamente no le√≠ su documentaci√≥n, as√≠ que no me cite sobre esto.  Ese ingeniero, a√±o y medio (¬°a tiempo completo!) Modific√≥ su editor, pero al final fall√≥ y permaneci√≥ en la antigua API. <br><br>  Escribir es dif√≠cil. <br><br>  Alexis a veces menciona la selecci√≥n de texto, pero su experiencia personal est√° m√°s relacionada con la representaci√≥n.  Como persona, por otro lado, puedo agregar algunos puntos sobre la entrada. <br><br><h3>  Movimiento del cursor vertical </h3><br>  Ya cubr√≠ esto en un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo anterior</a> , pero podemos repetirlo r√°pidamente aqu√≠. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2d7/dcb/be8/2d7dcbbe886a8da0e23abaf51f092ced.png"></div><br><br>  En este ejemplo, si presiona hacia arriba, el cursor va al comienzo de la l√≠nea, antes de la palabra <i>hola</i> .  Hasta ahora, todo es bastante razonable.  Pero si presiona hacia arriba y luego hacia abajo, el cursor saltar√° primero delante de <i>hola</i> , y luego se parar√° despu√©s de <i>algunos</i> . <br><br>  Esto puede no parecer muy l√≥gico.  ¬øPreguntas por qu√© salta a la derecha?  Bueno, con movimientos verticales, cada cursor recuerda la posici√≥n <i>x</i> en p√≠xeles, y solo se actualiza cuando se presiona hacia la izquierda o la derecha, y no hacia arriba y hacia abajo.  El mismo comportamiento evita que los cursores se muevan hacia la izquierda cuando se mueven verticalmente a trav√©s de l√≠neas cortas. <br><br><h3>  Proximidad </h3><br>  Bien, ahora sabemos que cuando seleccionamos texto, tenemos <i>dos</i> partes de estado: el desplazamiento de bytes dentro de la l√≠nea y la coordenada <i>x</i> en p√≠xeles, mencionados anteriormente.  ¬øSe resolvi√≥ el problema?  Pues no. <br><br>  Considere dos posiciones de cursor en una l√≠nea muy larga: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf1/a02/0f5/bf1a020f5aa7512ad957b47717fd4bc2.png"></div><br><br>  Como <i>loooooooooong</i> es una palabra, dos posiciones del cursor tienen <i>exactamente el mismo desplazamiento de bytes en la cadena</i> .  No hay nueva l√≠nea entre ellos, ya que la l√≠nea est√° suavemente envuelta.  Nuestros cursores necesitan un bit extra que les diga a qu√© l√≠nea ir.  La mayor√≠a de los sistemas llaman a este bit de afinidad.  Tambi√©n se usa en un texto bidireccional mixto, del que hablaremos pronto. <br><br><h3>  Modificadores Emoji </h3><br>  Supongamos que le env√≠o un mensaje a un amigo.  Para expresar mis sentimientos quiero agregar un emoji divertido.  Entro en el √°rea de texto un pulgar hacia arriba, <code>a</code> letra <code>a</code> y un modificador de emoji para el tono de piel.  Se ve as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4fd/f6b/1e8/4fdf6b1e84ddd2774b68d335e8b597b8.png"></div><br><br>  Oh, no quer√≠a escribir una carta.  Coloco el cursor despu√©s y hago clic en Retroceso.  Que va a pasar  Vi varias opciones, dependiendo del editor. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/237/c58/054/237c580542b2d5921a07adbdfb2d32c5.png"></div><br><br><ul><li>  <b>Mal # 1</b> puede <i>parecer</i> correcto.  Pero as√≠ es como funciona un editor de texto con soporte para la representaci√≥n de emoji heredados, por ejemplo, Sublime Text.  Esto es malo porque el emoji de dedo ligero se codifica como un dedo amarillo, seguido inmediatamente por un modificador de tono de piel.  No se combinan en un solo s√≠mbolo, como se esperaba.  Incluso si copio el dedo ligero de otra aplicaci√≥n, todav√≠a no se mostrar√° correctamente, como aqu√≠. <br></li><li>  <b>Malo # 2</b> es lo que Chrome 77 hace en la barra de direcciones.  No en p√°ginas web, sino solo en la barra de direcciones.  Este no es un problema de representaci√≥n, ya que funciona copiar y pegar emoji con tono de piel.  En cambio, Chrome elimina la letra, y al notar el modificador que sigue a la letra, tambi√©n la elimina.  Ups <br></li><li>  <b>Mal # 3</b> coincide con la especificaci√≥n Unicode de c√≥mo se deben fusionar los emoji.  Pero esto es bastante incomprensible para los usuarios y, por cierto, debes mover el cursor para que no se atasque a la mitad del emoji. </li></ul><br>  Todas las opciones son malas, por lo que puede suponer que probablemente haya una cuarta opci√≥n.  Hay!  Muchos editores, como TextEdit, ni siquiera le permiten colocar el cursor despu√©s de la letra, ya que el modificador de tono de piel se considera como una sola unidad con el car√°cter anterior.  Esto tiene sentido en el contexto de emoji e incluso funciona bien en este caso, pero ¬øqu√© pasa si el primer car√°cter de la cadena indica el modificador? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ef/a2e/3ad/2efa2e3ad0396bd2362cd08694c841fc.png"></div><br><br>  Ahora el modificador cambia el car√°cter de nueva l√≠nea.  ¬°TextEdit no le permitir√° colocar el cursor al comienzo de la segunda l√≠nea!  Personalmente considero esta decisi√≥n "tambi√©n mala". <br><br>  Tambi√©n puede haber notado que el pulgar hacia arriba se ha convertido en el pulgar hacia abajo.  Lo hice yo mismo para reflejar mis sentimientos sobre toda la situaci√≥n. <br><br>  Por cierto, TextEdit espec√≠ficamente hace que el cursor en la primera l√≠nea tenga <i>muchos</i> errores.  Por ejemplo, ¬øadivina qu√© sucede si presiono <code>4</code> aqu√≠? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c8/988/687/1c898868781c9461aba7ab1e7cb74255.png"></div><br><br>  Si  Tambi√©n podr√≠a pensar que hay espacios entre los n√∫meros.  No estan ahi. <br><br><h3>  Texto bidireccional </h3><br>  Alexis menciona selecciones divididas en texto bidireccional mixto, como en este ejemplo de TextEdit: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14b/dd3/8c3/14bdd38c366451ff768fc4aa15dc17b3.png"></div><br><br>  Esto realmente tiene sentido, ya que el idioma √°rabe en las l√≠neas est√° codificado de derecha a izquierda, por lo que la selecci√≥n parece estar dividida, pero los bytes son un rango continuo. <br><br>  Por lo tanto, es un poco sorprendente que podamos obtener esta selecci√≥n: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/53d/d86/9aa/53dd869aa064eb6ebc8cac8114147800.png"></div><br><br>  S√≠, es visualmente continuo, pero est√° separado por bytes.  Si, es malo.  Algunos editores hacen esto si selecciona texto con las teclas de flecha en lugar del mouse.  Una alternativa es intercambiar las teclas izquierda / derecha dentro del texto con la direcci√≥n de derecha a izquierda, lo que tambi√©n es malo.  No hay buenas opciones aqu√≠. <br><br>  Como beneficio adicional, intente comprender lo que est√° sucediendo aqu√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e88/2bb/b48/e882bbb480ea0a67812b862fc778d815.png"></div><br><br>  Se√±or ... no quiero comentar sobre esto. <br><br><h3>  Lo que pasa con los m√©todos de entrada </h3><br>  El software que traduce las pulsaciones de teclas en entrada se denomina m√©todo de entrada o editor de m√©todos de entrada.  Para el alfabeto latino, este no es un software muy interesante, ya que cada pulsaci√≥n de tecla est√° directamente asociada con la inserci√≥n de un car√°cter.  Pero en muchos guiones, los caracteres no caben en el teclado, por lo que debe ser creativo.  Por ejemplo, en algunos m√©todos de entrada para el idioma chino, el usuario ingresa sonidos y obtiene una lista de caracteres similares en sonido: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/257/4be/547/2574be547e63c1408db959a8bd107c90.png"></div><br><br>  Este campo a veces se denomina regi√≥n de composici√≥n, y a menudo aparece <abbr title="√°rea de composici√≥n">sobre el texto subrayado</abbr> .  A veces el m√©todo de entrada tiene que darle estilo.  Por ejemplo, el m√©todo de entrada japon√©s en Android usa el color de fondo para crear un √°rea para compartir oraciones: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b27/583/4c2/b275834c23880b9375d4da714632f1cc.png"></div><br>  <i><font color="gray">(¬°Gracias a Shae por la captura de pantalla!)</font></i> <br><br>  ¬øTodas estas selecciones y √°reas de composici√≥n interact√∫an con el texto bidireccional?  No pensemos en eso. <br><br>  Los m√©todos de entrada deber√≠an funcionar en todas partes, <i>incluso dentro del terminal</i> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/24d/b76/f54/24db76f544a936d70edb9143a36fdba0.png"></div><br><br>  Nada ir√° a Vim hasta que se seleccione un car√°cter chino de la lista.  Probablemente piense: "¬øPero c√≥mo funciona en el modo de comando Vim?"  No muy bien  Esta es la raz√≥n por la cual el ingreso de texto en Internet y las pulsaciones de teclas son eventos separados.  En la consola, se mezclan, causando problemas. <br><br>  Este es solo un ejemplo de muchos m√©todos de ingreso de texto diferentes.  (¬°No olvide los m√©todos de entrada sin teclado, como la voz y la escritura a mano!) Afortunadamente, el sistema operativo le proporciona todos estos m√©todos.  Pero, desafortunadamente, su cuadro de texto debe decir el protocolo general de entrada de texto utilizado por todos estos m√©todos.  Para Windows, estas son las 128 interfaces enumeradas al principio del art√≠culo.  En otros sistemas operativos, las interfaces son m√°s simples, pero a√∫n son dif√≠ciles de implementar. <br><br>  Tambi√©n puede observar que el m√©todo de entrada es un proceso separado, por lo que tanto el m√©todo de entrada como la aplicaci√≥n pueden realizar cambios en el estado del campo de texto.  Este es en realidad un protocolo de edici√≥n en paralelo.  Windows resuelve el problema con ocho (8) tipos de bloqueos.  Aunque mantener un bloqueo a trav√©s de los l√≠mites del proceso puede parecer dudoso, la mayor√≠a de las otras plataformas intentan usar heur√≠sticas imperfectas para solucionar problemas de concurrencia.  O simplemente esperan que la condici√≥n de la carrera no suceda.  En mi experiencia, la oraci√≥n no es una primitiva muy efectiva del paralelismo. <br><br><h3>  ¬øPor qu√© todo es tan complicado? </h3><br>  Jonathan Blow, en una conferencia sobre degradaci√≥n de software, menciona al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">editor de texto Ken Thompson</a> , que escribi√≥ en una semana.  La mayor parte del c√≥digo en este art√≠culo es complejidad introducida al azar.  ¬øWindows realmente necesita 128 interfaces y 8 tipos de bloqueos para la entrada de texto?  De ninguna manera  ¬øSon los errores en TextEdit el resultado de un modelo de edici√≥n complejo?  Si  ¬øEs preocupante la dispersi√≥n de errores en los programas modernos?  Al menos para m√≠ lo es. <br><br>  Sin embargo, el editor de Ken Thompson tambi√©n fue mucho, mucho m√°s simple de lo que esperamos de los editores de texto modernos.  Unicode admite casi todos los idiomas vivos del mundo (hay alrededor de 7,000 de ellos), y muchos m√°s est√°n muertos.  Existen diferentes scripts, instrucciones de texto y m√©todos de entrada, cada uno de los cuales impone restricciones complejas (y en algunos casos insolubles) a cualquier editor.  Pero tambi√©n debe admitir lectores de pantalla. <br><br>  La enorme complejidad se acumula <i>inevitablemente</i> , y en este art√≠culo solo la tocamos un poco.  Este es un verdadero milagro de programaci√≥n que puede simplemente colocar <code>&lt;textarea&gt;</code> en una p√°gina web y proporcionar instant√°neamente entrada de texto para cada usuario de Internet en todo el mundo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/474036/">https://habr.com/ru/post/474036/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../474020/index.html">C√≥mo Methodius se convirti√≥ en Anna: la experiencia de desarrollar y lanzar clasificadores de mensajes de voz. Parte 3</a></li>
<li><a href="../474024/index.html">Convertimos una aspiradora robot en un soldado universal</a></li>
<li><a href="../474026/index.html">Historias de consumidores, Asos abandona su revista y TikTok</a></li>
<li><a href="../474028/index.html">¬øQu√© habilidades blandas necesitan los desarrolladores? Opiniones de Yandex</a></li>
<li><a href="../474032/index.html">Organizar celdas est√°ndar (notas de un extra√±o)</a></li>
<li><a href="../474038/index.html">Actualizaciones peri√≥dicas de datos</a></li>
<li><a href="../474040/index.html">Entrevista de Playboy: Steve Jobs, Parte 1</a></li>
<li><a href="../474042/index.html">Competencia! Historias a la luz de servidores parpadeantes ...</a></li>
<li><a href="../474046/index.html">Seminarios sobre servicios en la nube, IA, blockchain, ciencia de datos, microservicios: ahora en Mosc√∫ y San Petersburgo</a></li>
<li><a href="../474048/index.html">HILDACRYPT: el nuevo ransomware ataca los sistemas de respaldo y las soluciones antivirus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>