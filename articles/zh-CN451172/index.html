<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¦” ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘©ğŸ½ ğŸ˜¢ æœ±è‰å¨…ï¼šåŠŸèƒ½å’Œç»“æ„å³åŠŸèƒ½ ğŸŒ™ ğŸ¦ ğŸ”—</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å°½ç®¡Juliaçš„æ¦‚å¿µç¼ºå°‘å¸¦æœ‰ç±»å’Œæ–¹æ³•çš„â€œç»å…¸â€é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä½†è¯¥è¯­è¨€æä¾›äº†æŠ½è±¡å·¥å…·ï¼Œç±»å‹ç³»ç»Ÿå’ŒåŠŸèƒ½æ€§ç¼–ç¨‹å…ƒç´ åœ¨å…¶ä¸­å‘æŒ¥äº†å…³é”®ä½œç”¨ã€‚ è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°è€ƒè™‘ç¬¬äºŒç‚¹ã€‚ 

 Juliaä¸­çš„å‡½æ•°æ¦‚å¿µå¯èƒ½ä¸Lispå®¶æ—çš„è¯­è¨€ï¼ˆæ›´ç¡®åˆ‡åœ°è¯´æ˜¯Lisp-1åˆ†æ”¯ï¼‰æœ€ç›¸ä¼¼ï¼Œå¹¶ä¸”å¯ä»¥ä»ä¸‰ä¸ªå±‚æ¬¡æ¥è€ƒè™‘å‡½æ•°ï¼šä½œä¸ºå­ç¨‹åºï¼Œä½œä¸ºç‰¹...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æœ±è‰å¨…ï¼šåŠŸèƒ½å’Œç»“æ„å³åŠŸèƒ½</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451172/"> å°½ç®¡Juliaçš„æ¦‚å¿µç¼ºå°‘å¸¦æœ‰ç±»å’Œæ–¹æ³•çš„â€œç»å…¸â€é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä½†è¯¥è¯­è¨€æä¾›äº†æŠ½è±¡å·¥å…·ï¼Œç±»å‹ç³»ç»Ÿå’ŒåŠŸèƒ½æ€§ç¼–ç¨‹å…ƒç´ åœ¨å…¶ä¸­å‘æŒ¥äº†å…³é”®ä½œç”¨ã€‚ è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°è€ƒè™‘ç¬¬äºŒç‚¹ã€‚ <br><a name="habracut"></a><br>  Juliaä¸­çš„å‡½æ•°æ¦‚å¿µå¯èƒ½ä¸Lispå®¶æ—çš„è¯­è¨€ï¼ˆæ›´ç¡®åˆ‡åœ°è¯´æ˜¯Lisp-1åˆ†æ”¯ï¼‰æœ€ç›¸ä¼¼ï¼Œå¹¶ä¸”å¯ä»¥ä»ä¸‰ä¸ªå±‚æ¬¡æ¥è€ƒè™‘å‡½æ•°ï¼šä½œä¸ºå­ç¨‹åºï¼Œä½œä¸ºç‰¹å®šåŠ¨ä½œåºåˆ—çš„æŠ½è±¡ä»¥åŠè¡¨ç¤ºè¯¥æŠ½è±¡çš„æ•°æ®ã€‚ <br><br><h3> çº§åˆ«1.ä½œä¸ºä¾‹ç¨‹èµ·ä½œç”¨ </h3><br> è‡ªå²å‰æ—¶ä»£ä»¥æ¥ï¼Œå­ç¨‹åºçš„åˆ†é…åŠå…¶åç§°çš„åˆ†é…ä¸€ç›´åœ¨è¿›è¡Œï¼Œé‚£æ—¶Fortranè¢«è®¤ä¸ºæ˜¯é«˜çº§è¯­è¨€ï¼Œè€ŒCå°šæœªå‡ºç°ã€‚ <br><br> ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼ŒJuliaäº§å“æ˜¯æ ‡å‡†çš„ã€‚ å¯ä»¥å°†â€œåŠŸèƒ½â€ç§°ä¸ºåœ¨è¯­æ³•ä¸Šæ²¡æœ‰åˆ’åˆ†è¿‡ç¨‹å’ŒåŠŸèƒ½çš„äº‹å®ã€‚ æ— è®ºæ˜¯è°ƒç”¨å­ä¾‹ç¨‹ä»¥è·å–æŸä¸ªå€¼è¿˜æ˜¯ä»…å¯¹è¯¥æ•°æ®æ‰§è¡ŒæŸäº›æ“ä½œï¼Œè¯¥å­ä¾‹ç¨‹éƒ½ç§°ä¸ºå‡½æ•°ã€‚ <br><br> å‡½æ•°çš„å®šä¹‰ä»¥å…³é”®å­—functionå¼€å¤´ï¼Œåè·Ÿå‚æ•°åˆ—è¡¨ï¼Œæ–¹æ‹¬å·ä¸­çš„å‘½ä»¤åºåˆ—ï¼Œå•è¯<code>end</code>ç»“æŸå®šä¹‰ï¼š <br><br><pre> <code class="julia hljs"><span class="hljs-string"><span class="hljs-string">""" sum_all(collection) Sum all elements of a collection and return the result """</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> sum_all(collection) sum = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> collection sum += collection <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> sum <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br> è¯­æ³•çš„åŒºåˆ«åœ¨äºä»Lispç»§æ‰¿çš„è¡Œä¸ºï¼šå¯¹äºä»å‡½æ•°â€œæ­£å¸¸â€è¿”å›å€¼çš„æƒ…å†µï¼Œä¸éœ€è¦å•è¯<code>return</code> ï¼šè¿”å›<code>end</code>ä¹‹å‰è®¡ç®—çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚ åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå°†è¿”å›å˜é‡<code>sum</code>çš„å€¼ã€‚ å› æ­¤ï¼Œ <code>return</code>å¯ä»¥ç”¨ä½œå‡½æ•°ç‰¹æ®Šè¡Œä¸ºçš„æ ‡è®°ï¼š <br><br><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> safe_division(number, divisor) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> divisor == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> number / divisor <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-comment"><span class="hljs-comment">#    function safe_division1(number, divisor) if divisor == 0 0 #             else number / divisor end end</span></span></code> </pre><br> å¯¹äºå®šä¹‰ç®€çŸ­çš„å‡½æ•°ï¼Œè¯­æ³•ç±»ä¼¼äºæ•°å­¦ç¬¦å·ã€‚ å› æ­¤ï¼Œæ–œè¾¹æ²¿è…¿é•¿çš„é•¿åº¦çš„è®¡ç®—å¯ä»¥å®šä¹‰å¦‚ä¸‹ï¼š <br><br><pre> <code class="julia hljs">hypotenuse(a, b) = sqrt(a^<span class="hljs-number"><span class="hljs-number">2</span></span> + b^<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br> ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦çš„â€œå®‰å…¨â€é™¤æ³•å¯å†™ä¸ºï¼š <br><br><pre> <code class="julia hljs">safe_division(number, divisor) = divisor == <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : number / divisor</code> </pre><br> å¦‚æ‚¨æ‰€è§ï¼Œæ²¡æœ‰å¿…è¦ä¸ºå‡½æ•°å‚æ•°æŒ‡å®šç±»å‹ã€‚ è€ƒè™‘åˆ°Julia JITç¼–è¯‘å™¨çš„å·¥ä½œæ–¹å¼ï¼Œé¸­å­ç±»å‹è¾“å…¥ä¸ä¼šæ€»æ˜¯å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ <br><br> æ­£å¦‚æˆ‘åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸Šä¸€ç¯‡æ–‡ç« ä¸­</a>è¯•å›¾è¯æ˜çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é‚£æ ·</a> ï¼ŒJuliaç¼–è¯‘å™¨å¯ä»¥é€šè¿‡è¾“å…¥å‚æ•°çš„ç±»å‹æ¥æ¨æ–­è¿”å›ç»“æœçš„ç±»å‹ã€‚ å› æ­¤ï¼Œä¾‹å¦‚ï¼Œ <code>safe_division</code>å‡½æ•°éœ€è¦æœ€å°‘çš„ä¿®æ”¹æ‰èƒ½å®ç°å¿«é€Ÿæ“ä½œï¼š <br><br><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> safe_division(number, divisor) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> divisor == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> zero(number / divisor) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> number / divisor <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br> ç°åœ¨ï¼Œå¦‚æœä¸¤ä¸ªå‚æ•°çš„ç±»å‹åœ¨ç¼–è¯‘é˜¶æ®µéƒ½æ˜¯å·²çŸ¥çš„ï¼Œåˆ™è¿”å›çš„ç»“æœçš„ç±»å‹ä¹Ÿå°†æ˜ç¡®æ˜¾ç¤ºï¼Œå› ä¸º  <code>zero(x)</code>å‡½æ•°è¿”å›ä¸å…¶å‚æ•°ç±»å‹ç›¸åŒçš„é›¶å€¼ï¼ˆæ ¹æ®<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">IEEE 754</a> ï¼Œé™¤ä»¥é›¶çš„å€¼å…·æœ‰æµ®ç‚¹æ•°æ ¼å¼çš„å¯å®Œç¾è¡¨ç¤ºçš„å€¼ï¼‰ã€‚ <br><br> å‡½æ•°å¯ä»¥å…·æœ‰å›ºå®šæ•°é‡çš„ä½ç½®å‚æ•°ï¼Œå…·æœ‰é»˜è®¤å€¼çš„ä½ç½®å‚æ•°ï¼Œå‘½åå‚æ•°å’Œå¯å˜æ•°é‡çš„å‚æ•°ã€‚ è¯­æ³•ï¼š <br><br><pre> <code class="julia hljs"><span class="hljs-comment"><span class="hljs-comment">#    function hello(name) println("Hello, ", name) end #      #           function greeting_d(name, greeting = "Hello") println(greeting, ", ", name) end #       #          #       function greeting_kw(name; greeting = "Hello") println(greeting, ", ", name) end #  greeting   ,        function greeting_oblkw(name; greeting) println(greeting, ", ", name) end #      #  ,   ,      names function greeting_nary(greeting, names...) print(greeting) for name in names print(", ", name) end print('\n') end julia&gt; hello("world") Hello, world julia&gt; greeting_d("world") Hello, world julia&gt; greeting_d("Mr. Smith", "How do you do") How do you do, Mr. Smith julia&gt; greeting_kw("Mr. Smith") Hello, Mr. Smith julia&gt; greeting_kw("mom", greeting = "Hi") Hi, mom julia&gt; greeting_oblkw("world") ERROR: UndefKeywordError: keyword argument greeting not assigned Stacktrace: [1] greeting_oblkw(::String) at ./REPL[23]:3 [2] top-level scope at none:0 julia&gt; greeting_oblkw("mom", greeting = "Hi") Hi, mom julia&gt; greeting_nary("Hi", "mom", "dad", "everyone") Hi, mom, dad, everyone</span></span></code> </pre><br><h3> çº§åˆ«2ã€‚ä½œä¸ºæ•°æ®çš„åŠŸèƒ½ </h3><br> è¯¥å‡½æ•°çš„åç§°ä¸ä»…å¯ä»¥åœ¨ç›´æ¥è°ƒç”¨ä¸­ä½¿ç”¨ï¼Œè€Œä¸”è¿˜å¯ä»¥ç”¨ä½œä¸è·å–å€¼çš„è¿‡ç¨‹ç›¸å…³è”çš„æ ‡è¯†ç¬¦ã€‚ ä¾‹å¦‚ï¼š <br><br><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> f_x_x(fn, x) fn(x, x) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> julia&gt; f_x_x(+, <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-comment"><span class="hljs-comment"># +(3, 3) = 3+3 = 6 julia&gt; f_x_x(*, 3) 9 # *(3, 3) = 9 julia&gt; f_x_x(^, 3) 27 # ^(3, 3) = 3^3 = 27 julia&gt; f_x_x(log, 3) 1.0 # log(3, 3) = 1</span></span></code> </pre><br> å¸¦æœ‰åŠŸèƒ½å‚æ•°çš„â€œç»å…¸â€åŠŸèƒ½æ˜¯<code>map</code> ï¼Œ <code>reduce</code>å’Œ<code>filter</code> ã€‚ <br><br>  <code>map(f, x...)</code>å°†å‡½æ•°<code>f</code>åº”ç”¨äº<code>x</code> ï¼ˆæˆ–iå…ƒç´ çš„å…ƒç»„ï¼‰ä¸­æ‰€æœ‰å…ƒç´ çš„å€¼ï¼Œå¹¶å°†ç»“æœä½œä¸ºæ–°é›†åˆè¿”å›ï¼š <br><br><pre> <code class="julia hljs">julia&gt; map(cos, [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-literal"><span class="hljs-literal">Ï€</span></span>/<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-literal"><span class="hljs-literal">Ï€</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-literal"><span class="hljs-literal">Ï€</span></span>/<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-literal"><span class="hljs-literal">Ï€</span></span>]) <span class="hljs-number"><span class="hljs-number">5</span></span>-element <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">Float64</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>}: <span class="hljs-number"><span class="hljs-number">1.0</span></span> <span class="hljs-number"><span class="hljs-number">0.5000000000000001</span></span> <span class="hljs-number"><span class="hljs-number">6.123233995736766e-17</span></span> -<span class="hljs-number"><span class="hljs-number">0.4999999999999998</span></span> -<span class="hljs-number"><span class="hljs-number">1.0</span></span> julia&gt; map(+, (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)) (<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>)</code> </pre><br>  <code>reduce(f, x; init_val)</code>å°†é›†åˆâ€œè¿˜åŸâ€ä¸ºå•ä¸ªå€¼ï¼Œâ€œæ‰©å±•â€é“¾æ¡<code>f(f(...f(f(init_val, x[1]), x[2])...), x[end])</code> ï¼š <br><br><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> myreduce(fn, values, init_val) accum = init_val <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> values accum = fn(accum, x) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> accum <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br> ç”±äºæ— æ³•çœŸæ­£ç¡®å®šæ•°ç»„åœ¨çº¦ç®€è¿‡ç¨‹ä¸­å°†ä»¥ä»€ä¹ˆé¡ºåºé€šè¿‡ï¼Œæˆ–è€…æ˜¯å¦å°†<code>fn(x, accum)</code> <code>fn(accum, x)</code>æˆ–<code>fn(x, accum)</code> ï¼Œå› æ­¤åªæœ‰ä½¿ç”¨å¯äº¤æ¢æˆ–å…³è”è¿ç®—ç¬¦ï¼ˆä¾‹å¦‚åŠ æ³•<code>fn(x, accum)</code>æ—¶ï¼Œçº¦ç®€æ‰ä¼šç»™å‡ºå¯é¢„æµ‹çš„ç»“æœã€‚æˆ–ä¹˜æ³•ã€‚ <br><br>  <code>filter(predicate, x)</code>è¿”å›æ»¡è¶³è°“è¯<code>predicate</code>çš„<code>x</code>å…ƒç´ çš„æ•°ç»„ï¼š <br><br><pre> <code class="julia hljs">julia&gt; filter(isodd, <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-number"><span class="hljs-number">5</span></span>-element <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">Int64</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>}: <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> julia&gt; filter(iszero, [[<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>:-<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-literal"><span class="hljs-literal">im</span></span>]) <span class="hljs-number"><span class="hljs-number">4</span></span>-element <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">Any</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>}: [<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-number"><span class="hljs-number">0.0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> + <span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-literal"><span class="hljs-literal">im</span></span></code> </pre><br> ä½¿ç”¨é«˜é˜¶å‡½æ•°å¯¹æ•°ç»„è¿›è¡Œæ“ä½œè€Œä¸æ˜¯ç¼–å†™å¾ªç¯å…·æœ‰å¤šä¸ªä¼˜ç‚¹ï¼š <br><br><ol><li> ä»£ç è¶Šæ¥è¶ŠçŸ­ </li><li>  <code>map()</code>æˆ–<code>reduce()</code>æ˜¾ç¤ºæ­£åœ¨æ‰§è¡Œçš„æ“ä½œçš„<i>è¯­ä¹‰</i> ï¼Œé‚£ä¹ˆæ‚¨ä»ç„¶éœ€è¦äº†è§£å¾ªç¯ä¸­æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…çš„è¯­ä¹‰ </li><li>  <code>map()</code>å…è®¸ç¼–è¯‘å™¨ç†è§£æ•°ç»„å…ƒç´ ä¸Šçš„æ“ä½œæ˜¯ç‹¬ç«‹äºæ•°æ®çš„ï¼Œè¿™å…è®¸åº”ç”¨å…¶ä»–ä¼˜åŒ– </li></ol><br><h3> çº§åˆ«3ã€‚ä½œä¸ºæŠ½è±¡çš„åŠŸèƒ½ </h3><br> é€šå¸¸åœ¨<code>map()</code>æˆ–<code>filter()</code>æ‚¨éœ€è¦ä½¿ç”¨å°šæœªåˆ†é…å…¶è‡ªèº«åç§°çš„å‡½æ•°ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒJuliaå…è®¸æ‚¨è¡¨è¾¾å¯¹å‚æ•°çš„æ“ä½œçš„<i>æŠ½è±¡</i> ï¼Œè€Œæ— éœ€ä¸ºæ­¤åºåˆ—è¾“å…¥è‡ªå·±çš„åç§°ã€‚ è¿™ç§æŠ½è±¡ç§°ä¸º<i>åŒ¿åå‡½æ•°</i>æˆ–<i>lambdaå‡½æ•°</i> ï¼ˆç”±äºåœ¨æ•°å­¦ä¼ ç»Ÿä¸­ï¼Œæ­¤ç±»å‡½æ•°ç”¨å­—æ¯lambdaè¡¨ç¤ºï¼‰ã€‚ è¯¥è§†å›¾çš„è¯­æ³•ä¸ºï¼š <br><br><pre> <code class="julia hljs"><span class="hljs-comment"><span class="hljs-comment">#   square(x) = x^2 #   x -&gt; x^2 #   hypot(a, b) = sqrt(x^2 + y^2) #   -    ,    , #              (x, y) -&gt; sqrt(x^2 + y^2) #   fortytwo() = 42 #   () -&gt; 42 julia&gt; map(i -&gt; map(x -&gt; x^i, 1:5), 1:5) 5-element Array{Array{Int64,1},1}: [1, 2, 3, 4, 5] [1, 4, 9, 16, 25] [1, 8, 27, 64, 125] [1, 16, 81, 256, 625] [1, 32, 243, 1024, 3125]</span></span></code> </pre><br> å‘½åå‡½æ•°å’ŒåŒ¿åå‡½æ•°éƒ½å¯ä»¥åˆ†é…ç»™å˜é‡å¹¶ä½œä¸ºå€¼è¿”å›ï¼š <br><br><pre> <code class="julia hljs">julia&gt; double_squared = x -&gt; (<span class="hljs-number"><span class="hljs-number">2</span></span> * x)^<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-comment"><span class="hljs-comment">#17 (generic function with 1 method) julia&gt; double_squared(5) 100</span></span></code> </pre><br><h3> å¯å˜èŒƒå›´å’Œè¯æ±‡é—­åŒ… </h3><br> é€šå¸¸ï¼Œä»–ä»¬è¯•å›¾ä»¥è¿™æ ·çš„æ–¹å¼ç¼–å†™å‡½æ•°ï¼šé€šè¿‡å½¢å¼å‚æ•°ï¼ˆå³å½¢å¼å‚æ•°ï¼‰è·å¾—è®¡ç®—æ‰€éœ€çš„æ‰€æœ‰æ•°æ®ã€‚ ä¸»ä½“ä¸­å‡ºç°çš„ä»»ä½•å˜é‡åç§°è¦ä¹ˆæ˜¯å½¢å¼å‚æ•°çš„åç§°ï¼Œè¦ä¹ˆæ˜¯å‡½æ•°ä½“å†…å¼•å…¥çš„å˜é‡çš„åç§°ã€‚ <br><br><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> normal(x, y) z = x + y x + y * z <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> strange(x, y) x + y * z <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br> å…³äº<code>normal()</code>å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¯´æ‰€æœ‰å˜é‡ååœ¨ä¸»ä½“ä¸­éƒ½æ˜¯<i>ç›¸å…³çš„</i> ï¼Œå³ å¦‚æœæˆ‘ä»¬åˆ°å¤„ï¼ˆåŒ…æ‹¬å‚æ•°åˆ—è¡¨ï¼‰éƒ½å°†â€œ xâ€æ›¿æ¢ä¸ºâ€œ mâ€ï¼ˆæˆ–å…¶ä»–ä»»ä½•æ ‡è¯†ç¬¦ï¼‰ï¼Œå°†â€œ yâ€æ›¿æ¢ä¸ºâ€œ nâ€ï¼Œå°†â€œ zâ€æ›¿æ¢ä¸ºâ€œ sum_of_m_and_nâ€ï¼Œåˆ™è¡¨è¾¾å¼çš„å«ä¹‰ä¸ä¼šæ”¹å˜ã€‚ åœ¨<code>strange()</code>å‡½æ•°ä¸­ï¼Œåç§°zæ˜¯<i>ä¸ç›¸å…³çš„</i> ï¼Œå³  aï¼‰å¦‚æœå°†è¯¥åç§°æ›¿æ¢ä¸ºå¦ä¸€åç§°ï¼Œåˆ™å«ä¹‰å¯èƒ½ä¼šæ›´æ”¹ï¼›å¹¶ä¸”bï¼‰å‡½æ•°çš„æ­£ç¡®æ€§å–å†³äºè°ƒç”¨å‡½æ•°æ—¶æ˜¯å¦å®šä¹‰äº†åç§°ä¸ºâ€œ zâ€çš„å˜é‡ã€‚ <br><br> ä¸€èˆ¬æ¥è¯´ï¼Œ <code>normal()</code>å‡½æ•°ä¹Ÿä¸æ˜¯é‚£ä¹ˆå¹²å‡€ï¼š <br><br><ol><li> å¦‚æœåœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰äº†åä¸ºzçš„å˜é‡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ </li><li> å®é™…ä¸Šï¼Œ+å’Œ*å­—ç¬¦ä¹Ÿæ˜¯æ— å…³çš„æ ‡è¯†ç¬¦ã€‚ </li></ol><br> å¯¹äºç¬¬2ç‚¹ï¼Œé™¤äº†è¾¾æˆå…±è¯†å¤–ï¼Œåˆ«æ— ä»–æ³•-ç³»ç»Ÿä¸­ä½¿ç”¨çš„æ‰€æœ‰åŠŸèƒ½çš„å®šä¹‰å¿…é¡»å­˜åœ¨ï¼Œè¿™æ˜¯åˆä¹é€»è¾‘çš„ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒä»¬çš„çœŸæ­£å«ä¹‰ç¬¦åˆæˆ‘ä»¬çš„æœŸæœ›ã€‚ <br><br> ç‚¹1ä¸åƒçœ‹èµ·æ¥é‚£ä¹ˆæ˜æ˜¾ã€‚ äº‹å®æ˜¯ç­”æ¡ˆå–å†³äºå‡½æ•°çš„å®šä¹‰ä½ç½®ã€‚ å¦‚æœæ˜¯å…¨å±€å®šä¹‰çš„ï¼Œåˆ™<code>normal()</code> <code>z</code>å°†æ˜¯å±€éƒ¨å˜é‡ï¼Œå³ å³ä½¿å­˜åœ¨å…¨å±€å˜é‡<code>z</code>å…¶å€¼ä¹Ÿä¸ä¼šè¢«è¦†ç›–ã€‚ å¦‚æœå‡½æ•°çš„å®šä¹‰åœ¨ä»£ç å—å†…éƒ¨ï¼Œåˆ™åœ¨æ­¤å—ä¸­æœ‰<code>z</code>çš„è¾ƒæ—©å®šä¹‰ï¼Œå®ƒå°†æ˜¯è¦æ›´æ”¹çš„å¤–éƒ¨å˜é‡çš„å€¼ã€‚ <br><br> å¦‚æœå‡½æ•°ä¸»ä½“åŒ…å«å¤–éƒ¨å˜é‡çš„åç§°ï¼Œåˆ™æ­¤åç§°ä¸åˆ›å»ºå‡½æ•°çš„ç¯å¢ƒä¸­å­˜åœ¨çš„å€¼ç›¸å…³è”ã€‚ å¦‚æœå‡½æ•°æœ¬èº«æ˜¯ä»æ­¤ç¯å¢ƒä¸­å¯¼å‡ºçš„ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœå®ƒæ˜¯ä»å¦ä¸€ä¸ªå‡½æ•°è¿”å›çš„å€¼ï¼‰ï¼Œåˆ™å®ƒå°†â€œæ•è·â€å†…éƒ¨ç¯å¢ƒä¸­çš„å˜é‡ï¼Œè¯¥å˜é‡åœ¨æ–°ç¯å¢ƒä¸­å°†ä¸å†å¯ç”¨ã€‚ è¿™ç§°ä¸ºè¯æ±‡é—­åŒ…ã€‚ <br><br> é—­åŒ…ä¸»è¦åœ¨ä¸¤ç§æƒ…å†µä¸‹æœ‰ç”¨ï¼šå½“æ‚¨éœ€è¦æ ¹æ®ç»™å®šçš„å‚æ•°åˆ›å»ºå‡½æ•°æ—¶ï¼Œä»¥åŠå½“æ‚¨éœ€è¦å…·æœ‰æŸç§å†…éƒ¨çŠ¶æ€çš„å‡½æ•°æ—¶ã€‚ <br><br> è€ƒè™‘ä¸€ä¸ªå°è£…å†…éƒ¨çŠ¶æ€çš„å‡½æ•°çš„æƒ…å†µï¼š <br><br><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> f_with_counter(fn) call_count = <span class="hljs-number"><span class="hljs-number">0</span></span> ncalls() = call_count <span class="hljs-comment"><span class="hljs-comment"># invoke()  ,     #    ,  ncalls() function invoke(args...) call_count += 1 fn(args...) end #         # call_count     , #   invoke()  call_count()        (call = invoke, call_count = ncalls) end julia&gt; abscount = f_with_counter(abs) (call = getfield(Main, Symbol("#invoke#22")){typeof(abs)}(abs, Core.Box(0)), call_count = getfield(Main, Symbol("#ncalls#21"))(Core.Box(0))) julia&gt; abscount.call_count() 0 julia&gt; abscount.call(-20) 20 julia&gt; abscount.call_count() 1 julia&gt; abscount.call(im) 1.0 julia&gt; abscount.call_count() 2</span></span></code> </pre><br><h4> æ¡ˆä¾‹ç ”ç©¶ï¼šæ‰€æœ‰ç›¸åŒçš„å¤šé¡¹å¼ </h4><br> åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œè€ƒè™‘</a>äº†å°†å¤šé¡¹å¼è¡¨ç¤ºä¸ºç»“æ„ã€‚ ç‰¹åˆ«åœ°ï¼Œå­˜å‚¨ç»“æ„ä¹‹ä¸€æ˜¯ä»æœ€å°çš„ç³»æ•°å¼€å§‹çš„ç³»æ•°åˆ—è¡¨ã€‚ ä¸ºäº†è®¡ç®—ç‚¹<code>x</code>å¤„çš„å¤šé¡¹å¼<code>p</code> ï¼Œå»ºè®®è°ƒç”¨å‡½æ•°<code>evpoly(p, x)</code> ï¼Œè¯¥å‡½æ•°æ ¹æ®Horneræ–¹æ¡ˆè®¡ç®—å¤šé¡¹å¼ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å®Œæ•´çš„å®šä¹‰ä»£ç </b> <div class="spoiler_text"><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract type</span></span> AbstractPolynomial <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-string"><span class="hljs-string">""" Polynomial &lt;: AbstractPolynomial Polynomials written in the canonical form --- Polynomial(v::T) where T&lt;:Union{Vector{&lt;:Real}, NTuple{&lt;:Any, &lt;:Real}}) Construct a `Polynomial` from the list of the coefficients. The coefficients are assumed to go from power 0 in the ascending order. If an empty collection is provided, the constructor returns a zero polynomial. """</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> Polynomial&lt;:AbstractPolynomial degree::<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> coeff::<span class="hljs-built_in"><span class="hljs-built_in">NTuple</span></span>{N, <span class="hljs-built_in"><span class="hljs-built_in">Float64</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> N <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> Polynomial(v::T <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Union</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">Vector</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}, <span class="hljs-built_in"><span class="hljs-built_in">NTuple</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Any</span></span>, &lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}}) coeff = isempty(v) ? (<span class="hljs-number"><span class="hljs-number">0.0</span></span>,) : tuple([<span class="hljs-built_in"><span class="hljs-built_in">Float64</span></span>(x) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> v]...) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> new(length(coeff)-<span class="hljs-number"><span class="hljs-number">1</span></span>, coeff) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-string"><span class="hljs-string">""" InterpPolynomial &lt;: AbstractPolynomial Interpolation polynomials in Newton's form --- InterpPolynomial(xsample::Vector{&lt;:Real}, fsample::Vector{&lt;:Real}) Construct an `InterpPolynomial` from a vector of points `xsample` and corresponding function values `fsample`. All values in `xsample` must be distinct. """</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> InterpPolynomial&lt;:AbstractPolynomial degree::<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> xval::<span class="hljs-built_in"><span class="hljs-built_in">NTuple</span></span>{N, <span class="hljs-built_in"><span class="hljs-built_in">Float64</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> N coeff::<span class="hljs-built_in"><span class="hljs-built_in">NTuple</span></span>{N, <span class="hljs-built_in"><span class="hljs-built_in">Float64</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> N <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> InterpPolynomial(xsample::X, fsample::F) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> {X&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Union</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">Vector</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}, <span class="hljs-built_in"><span class="hljs-built_in">NTuple</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Any</span></span>, &lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}}, F&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Union</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">Vector</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}, <span class="hljs-built_in"><span class="hljs-built_in">NTuple</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Any</span></span>, &lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}}} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> !allunique(xsample) throw(<span class="hljs-built_in"><span class="hljs-built_in">DomainError</span></span>(<span class="hljs-string"><span class="hljs-string">"Cannot interpolate with duplicate X points"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> N = length(xsample) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> length(fsample) != N throw(<span class="hljs-built_in"><span class="hljs-built_in">DomainError</span></span>(<span class="hljs-string"><span class="hljs-string">"Lengths of X and F are not the same"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> coeff = [<span class="hljs-built_in"><span class="hljs-built_in">Float64</span></span>(f) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> f <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> fsample] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>:N <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> j = <span class="hljs-number"><span class="hljs-number">1</span></span>:(i-<span class="hljs-number"><span class="hljs-number">1</span></span>) coeff[i] = (coeff[j] - coeff[i]) / (xsample[j] - xsample[i]) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> new(N-<span class="hljs-number"><span class="hljs-number">1</span></span>, ntuple(i -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Float64</span></span>(xsample[i]), N), tuple(coeff...)) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> InterpPolynomial(fn, xsample::T) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> {T&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Union</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">Vector</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}, <span class="hljs-built_in"><span class="hljs-built_in">NTuple</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Any</span></span>, &lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}}} InterpPolynomial(xsample, map(fn, xsample)) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> evpoly(p::Polynomial, z::<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>) ans = p.coeff[<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> idx = p.degree:-<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> ans = p.coeff[idx] + z * ans <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ans <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> evpoly(p::InterpPolynomial, z::<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>) ans = p.coeff[p.degree+<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> idx = p.degree:-<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> ans = ans * (z - p.xval[idx]) + p.coeff[idx] <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ans <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> Base.:+(p1::Polynomial, p2::Polynomial) <span class="hljs-comment"><span class="hljs-comment">#    ,      deg = max(p1.degree, p2.degree) coeff = zeros(deg+1) coeff[1:p1.degree+1] .+= p1.coeff coeff[1:p2.degree+1] .+= p2.coeff Polynomial(coeff) end function Base.:+(p1::InterpPolynomial, p2::InterpPolynomial) xmax = max(p1.xval..., p2.xval...) xmin = min(p1.xval..., p2.xval...) deg = max(p1.degree, p2.degree) #         #       xmid = 0.5 * xmax + 0.5 * xmin dx = 0.5 * (xmax - xmin) / cos(0.5 * Ï€ / (deg + 1)) chebgrid = [xmid + dx * cos((k - 0.5) * Ï€ / (deg + 1)) for k = 1:deg+1] fsample = [evpoly(p1, x) + evpoly(p2, x) for x in chebgrid] InterpPolynomial(chebgrid, fsample) end function Base.:+(p1::InterpPolynomial, p2::Polynomial) xmax = max(p1.xval...) xmin = min(p1.xval...) deg = max(p1.degree, p2.degree) xmid = 0.5 * xmax + 0.5 * xmin dx = 0.5 * (xmax - xmin) / cos(0.5 * Ï€ / (deg + 1)) chebgrid = [xmid + dx * cos((k - 0.5) * Ï€ / (deg + 1)) for k = 1:deg+1] fsample = [evpoly(p1, x) + evpoly(p2, x) for x in chebgrid] InterpPolynomial(chebgrid, fsample) end function Base.:+(p1::Polynomial, p2::InterpPolynomial) p2 + p1 end</span></span></code> </pre><br></div></div><br> ä»¥ç»“æ„å½¢å¼è¡¨ç¤ºçš„å¤šé¡¹å¼å¹¶ä¸å®Œå…¨å¯¹åº”äºå…¶å¯¹æ•°å­¦å‡½æ•°çš„ç›´è§‚ç†è§£ã€‚ ä½†æ˜¯é€šè¿‡è¿”å›å‡½æ•°å€¼ï¼Œå¤šé¡¹å¼ä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®šä¸ºå‡½æ•°ã€‚ åŸæ¥æ˜¯ï¼š <br><br><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> Polynomial degree::<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> coeff::<span class="hljs-built_in"><span class="hljs-built_in">NTuple</span></span>{N, <span class="hljs-built_in"><span class="hljs-built_in">Float64</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> N <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> Polynomial(v::T <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Union</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">Vector</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}, <span class="hljs-built_in"><span class="hljs-built_in">NTuple</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Any</span></span>, &lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}}) <span class="hljs-comment"><span class="hljs-comment">#     /     P(x) â‰¡ 0 coeff = isempty(v) ? (0.0,) : tuple([Float64(x) for x in v]...) #   -   new #  -    return new(length(coeff)-1, coeff) end end """ evpoly(p::Polynomial, z::Real) Evaluate polynomial `p` at `z` using the Horner's rule """ function evpoly(p::Polynomial, z::Real) ans = p.coeff[end] for idx = p.degree:-1:1 ans = p.coeff[idx] + z * ans end return ans end</span></span></code> </pre><br> æˆ‘ä»¬å°†æ­¤å®šä¹‰è½¬æ¢ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°é‡‡ç”¨ä¸€ä¸ªç³»æ•°æ•°ç»„/å…ƒç»„ï¼Œå¹¶è¿”å›è®¡ç®—å¤šé¡¹å¼çš„å®é™…å‡½æ•°ï¼š <br><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> Polynomial_as_closure(v::T <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Union</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">Vector</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}, <span class="hljs-built_in"><span class="hljs-built_in">NTuple</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Any</span></span>, &lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}}) <span class="hljs-comment"><span class="hljs-comment">#     /     P(x) â‰¡ 0 if isempty(v) return x::Real -&gt; 0.0 end coeff = tuple(map(float, v)...) degree = length(coeff) - 1 function evpoly(z::Real) ans = coeff[end] for idx = degree:-1:1 ans = coeff[idx] + z * ans end return ans end evpoly end julia&gt; p = Polynomial_as_closure((0, 1, 1)) # xÂ² + x (::getfield(Main, Symbol("#evpoly#28")){Tuple{Float64,Float64,Float64},Int64}) (generic function with 1 method) julia&gt; p(1) # ,    evpoly()! 2.0 julia&gt; p(11) 132.0</span></span></code> </pre><br> åŒæ ·ï¼Œæ‚¨å¯ä»¥ä¸ºæ’å€¼å¤šé¡¹å¼ç¼–å†™å‡½æ•°ã€‚ <br><br> ä¸€ä¸ªé‡è¦çš„é—®é¢˜ï¼šåœ¨å…ˆå‰çš„å®šä¹‰ä¸­ï¼Œæ–°å®šä¹‰æ˜¯å¦ä¸¢å¤±äº†æŸäº›å†…å®¹ï¼Ÿ ä¸å¹¸çš„æ˜¯ï¼Œæ˜¯çš„-å°†å¤šé¡¹å¼è®¾ç½®ä¸ºç»“æ„ä¸ºç¼–è¯‘å™¨æä¾›äº†æç¤ºï¼Œå¯¹æˆ‘ä»¬è€Œè¨€ï¼Œä¹Ÿä¸ºè¯¥ç»“æ„æä¾›äº†é‡è½½ç®—æœ¯è¿ç®—ç¬¦çš„åŠŸèƒ½ã€‚  Juliaï¼ŒJuliaæ²¡æœ‰æä¾›å¦‚æ­¤å¼ºå¤§çš„ç±»å‹ç³»ç»Ÿçš„åŠŸèƒ½ã€‚ <br><br> å¹¸è¿çš„æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å……åˆ†åˆ©ç”¨ä¸¤ä¸ªæ–¹é¢çš„ä¼˜åŠ¿ï¼Œå› ä¸ºJuliaå…è®¸æ‚¨åˆ›å»ºæ‰€è°“çš„å¯è°ƒç”¨ç»“æ„ã€‚ å³ æ‚¨å¯ä»¥å°†å¤šé¡¹å¼æŒ‡å®šä¸ºç»“æ„ï¼Œä½†å¯ä»¥å°†å…¶ç§°ä¸ºå‡½æ•°ï¼ åœ¨ä¸Šä¸€ç¯‡æ–‡ç« çš„ç»“æ„å®šä¹‰ä¸­ï¼Œæ‚¨åªéœ€æ·»åŠ ï¼š <br><br><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (p::Polynomial)(z::<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>) evpoly(p, z) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (p::InterpPolynomial)(z::<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>) evpoly(p, z) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br> ä½¿ç”¨å‡½æ•°å‚æ•°ï¼Œæ‚¨è¿˜å¯ä»¥ä¸ºç”±ä¸€ç»„ç‚¹æ„é€ çš„æŸä¸ªå‡½æ•°æ·»åŠ æ’å€¼å¤šé¡¹å¼çš„å¤–éƒ¨æ„é€ å‡½æ•°ï¼š <br><br><pre> <code class="julia hljs"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> InterpPolynomial(fn, xsample::T) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> {T&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Union</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">Vector</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}, <span class="hljs-built_in"><span class="hljs-built_in">NTuple</span></span>{&lt;:<span class="hljs-built_in"><span class="hljs-built_in">Any</span></span>, &lt;:<span class="hljs-built_in"><span class="hljs-built_in">Real</span></span>}}} InterpPolynomial(xsample, map(fn, xsample)) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">æˆ‘ä»¬éªŒè¯å®šä¹‰</b> <div class="spoiler_text"><pre> <code class="julia hljs">julia&gt; psin = InterpPolynomial(sin, [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-literal"><span class="hljs-literal">Ï€</span></span>/<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-literal"><span class="hljs-literal">Ï€</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>*<span class="hljs-literal"><span class="hljs-literal">Ï€</span></span>/<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-literal"><span class="hljs-literal">Ï€</span></span>]) <span class="hljs-comment"><span class="hljs-comment">#   InterpPolynomial(4, (0.0, 0.5235987755982988, 1.5707963267948966, 2.6179938779914944, 3.141592653589793), (0.0, 0.954929658551372, -0.30396355092701327, -0.05805276197975913, 0.036957536116863636)) julia&gt; pcos = InterpPolynomial(cos, [0, Ï€/6, Ï€/2, 5*Ï€/6, Ï€]) #   InterpPolynomial(4, (0.0, 0.5235987755982988, 1.5707963267948966, 2.6179938779914944, 3.141592653589793), (1.0, -0.2558726308373678, -0.36358673785585766, 0.1388799037738005, 5.300924469105863e-17)) julia&gt; psum = pcos + psin InterpPolynomial(4, (3.141592653589793, 2.5416018461576297, 1.5707963267948966, 0.5999908074321635, 0.0), (-1.0, -1.2354929267138448, 0.03888175053443867, 0.1969326657535598, 0.03695753611686364)) julia&gt; for x = range(0, Ï€, length = 20) println("Error at x = ", x, ": ", abs(psum(x) - (sin(x) + cos(x)))) end Error at x = 0.0: 0.0 Error at x = 0.3490658503988659: 0.002748366490382681 Error at x = 0.6981317007977318: 0.0031870524474437723 Error at x = 1.0471975511965976: 0.006538414090220712 Error at x = 1.3962634015954636: 0.0033647273630357244 Error at x = 1.7453292519943295: 0.003570894863996865 Error at x = 2.0943951023931953: 0.007820939854677023 Error at x = 2.443460952792061: 0.004305934583281101 Error at x = 2.792526803190927: 0.00420977797025246 Error at x = 3.141592653589793: 1.1102230246251565e-16</span></span></code> </pre><br></div></div><br><h4> ç»“è®º </h4><br> ä¸çº¯å‘½ä»¤å¼æ ·å¼ç›¸æ¯”ï¼Œä»Juliaçš„å‡½æ•°å¼ç¼–ç¨‹ä¸­å€Ÿç”¨çš„å¯èƒ½æ€§æä¾›äº†æ›´å…·è¡¨è¾¾åŠ›çš„è¯­è¨€ã€‚ ä»¥åŠŸèƒ½å½¢å¼è¡¨ç¤ºç»“æ„æ˜¯æ›´æ–¹ä¾¿è‡ªç„¶åœ°è®°å½•æ•°å­¦æ¦‚å¿µçš„ä¸€ç§æ–¹å¼ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN451172/">https://habr.com/ru/post/zh-CN451172/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN451160/index.html">Apache Kafkaå’ŒSpark Streamingçš„æµå¼ä¼ è¾“</a></li>
<li><a href="../zh-CN451162/index.html">çº é”™-å›½é™…å•ä½åˆ¶ï¼ˆSIï¼‰å½“å‰å’Œæ–°ç‰ˆæœ¬ä¸­çš„ç‰©ç†å¸¸æ•°</a></li>
<li><a href="../zh-CN451164/index.html">ä½¿ç”¨Pythonå¯»æ‰¾å…è´¹çš„åœè½¦ä½</a></li>
<li><a href="../zh-CN451166/index.html">ç”¨äºAIå’ŒMOç³»ç»Ÿçš„æ–°å­˜å‚¨åº“å°†æä¾›ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="../zh-CN451170/index.html">æ°å¤«Â·è´ä½æ–¯ï¼ˆJeff Bezosï¼‰å®£å¸ƒäº†å¾æœæœˆçƒçš„è®¡åˆ’</a></li>
<li><a href="../zh-CN451174/index.html">é€šè¿‡ç°ä»£æ‰‹æ®µå°†ZX Spectrumçš„ç¨‹åºæ”¹ç¼–ä¸ºTR-DOSã€‚ ç¬¬ä¸€éƒ¨åˆ†</a></li>
<li><a href="../zh-CN451176/index.html">æ¥è‡ªOpenStreetMap 458ä¸–ç•Œçš„æ–°é—»ï¼ˆ04/23/2019-04/09/2019ï¼‰</a></li>
<li><a href="../zh-CN451178/index.html">ä¹˜å‘˜é¾™é™è½ä¼ç€é™†æµ‹è¯•</a></li>
<li><a href="../zh-CN451180/index.html">PCBæ›¿ä»£äº†ä¸¤ä¸ªç›´çº¿ç”µæœº</a></li>
<li><a href="../zh-CN451182/index.html">Cæ•°ç»„çš„å¤§å°å¦‚ä½•æˆä¸ºåº“äºŒè¿›åˆ¶æ¥å£çš„ä¸€éƒ¨åˆ†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>