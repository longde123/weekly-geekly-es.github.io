<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎅🏿 🥀 🌷 Kronos: tidak ada perjalanan waktu bahkan dalam sistem terdistribusi 〽️ 👌 👨🏽‍🤝‍👨🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam sistem terdistribusi, ada sejumlah masalah mendasar: transaksi terdistribusi yang efisien, pemrosesan data yang tepat sekali, sinkronisasi jam f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kronos: tidak ada perjalanan waktu bahkan dalam sistem terdistribusi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/goto/blog/426399/"><p> Dalam sistem terdistribusi, ada sejumlah masalah mendasar: transaksi terdistribusi yang efisien, pemrosesan data yang tepat sekali, sinkronisasi jam fisik yang akurat.  Untuk mengatasi masalah yang terakhir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">,</a> berbagai jenis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jam logika</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">diciptakan</a> . </p><br><p>  Namun demikian, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jam vektor</a> memiliki sifat yang tidak menyenangkan: mereka memperkenalkan ketergantungan bersyarat antara peristiwa di mana itu tidak ada, dan kehilangan itu di tempat yang sebenarnya. </p><br><p>  Namun, Anda dapat menemukan sesuatu yang lebih dapat diandalkan - Kronos.  Dalam artikel ini, kita akan melihat algoritma akuntansi hubungan sebab-akibat dan aplikasinya untuk membangun repositori Key-Value dengan transaksi terdistribusi. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b9e/7e5/9fd/b9e7e59fdf49111679ce30f147448e39.png" alt="gambar"></p><a name="habracut"></a><br><h2 id="problemy">  Masalahnya </h2><br><p>  Seperti yang telah disebutkan, ada sejumlah masalah dengan jam logis: </p><br><ul><li><p>  <em>Ketergantungan tidak ada</em> muncul karena jam logis memperkenalkan <em>urutan lengkap</em> pada peristiwa - yaitu, salah satu dari dua peristiwa dapat dikatakan lebih awal bersyarat dan yang bersyarat nanti.  Kontrak tersebut bersifat kondisional, karena tidak mungkin untuk menentukan secara tepat hubungan antara peristiwa-peristiwa dalam waktu, termasuk karena Teori Relativitas Khusus. </p><br></li><li><p>  Di sisi lain, jam logika hanya mempertimbangkan interkoneksi melalui pesan di dalam sistem.  Jika beberapa dua peristiwa terhubung, tetapi di luar sistem, misalnya, melalui pengguna (menambahkan barang ke keranjang di satu bagian sistem -&gt; pembayaran untuk pesanan), maka jam logis mungkin melewatkan hubungan semacam itu. </p><br></li><li><p>  Jam logis tidak dapat diakses dari luar, dan juga sulit untuk menghubungkan beberapa komponen independen (sistem file terdistribusi, layanan pemrosesan permintaan, analitik). </p><br></li></ul><br><h2 id="reshenie">  Solusi </h2><br><p>  Artikel 2014 oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kronos: Desain dan Implementasi Layanan Pemesanan Acara</a> mengusulkan solusi - layanan mandiri yang akan memperhitungkan hubungan sebab-akibat dalam acara. </p><br><p>  Abstraksi utama di dalam Kronos adalah peristiwa di mana pemesanan sebagian diperkenalkan.  Hubungan sebab akibat adalah transitif - yaitu, jika, misalnya, kita tahu bahwa pembuatan file mendahului perubahannya, dan perubahan mendahului penghapusan, kita dapat membuat kesimpulan logis bahwa penciptaan terjadi sebelum penghapusan. </p><br><p>  API minimum dapat didefinisikan dengan serangkaian metode berikut: </p><br><table><thead><tr><th>  Metode </th><th>  Hasil </th><th>  Komentar </th></tr></thead><tbody><tr><td><code>create_event()</code> </td> <td> <code>e</code> </td> <td>  Membuat acara baru di Kronos </td></tr><tr><td> <code>query_order([(e_1, e_2), ...])</code> </td> <td> <code>[&lt;-, concurrent, -&gt;, ...]</code> </td> <td>  Untuk setiap pasangan permintaan, ia mengembalikan arah hubungan sebab-akibat, atau <em>simultanitas</em> peristiwa </td></tr><tr><td> <code>assign_order([(e_1, e_2, must), (e_3, e_4, prefer), ...])</code> </td> <td> <code>OK/FAIL</code> </td> <td>  Untuk setiap pasangan permintaan, tetapkan arah penyebabnya </td></tr><tr><td> <code>acquire_ref(e)</code> </td> <td> <code>OK</code> </td> <td>  Meningkatkan penghitung referensi untuk acara ini. </td></tr><tr><td> <code>release_ref(e)</code> </td> <td> <code>OK</code> </td> <td>  Mengurangi jumlah referensi untuk acara ini. </td></tr></tbody></table><br><h2 id="realizaciya">  Implementasi </h2><br><p>  Adalah logis bahwa sistem didasarkan pada grafik peristiwa yang berorientasi, dengan pencarian luas pertama yang efektif untuk memeriksa hubungan peristiwa, mekanisme stabilitas jika terjadi kegagalan, dan pengumpulan sampah. </p><br><p>  Seperti dapat dilihat dari API, permintaan <code>assign_order</code> menerima jenis hubungan kausal: <code>must</code> atau <code>prefer</code> .  <code>must</code> sesuai dengan invarian ketat - misalnya, <code>_-&gt;_</code> , <code>prefer</code> tidak dapat diterapkan jika konflik dengan hubungan <code>must</code> .  Contoh menggunakan <code>prefer</code> adalah bahwa permintaan yang datang lebih awal lebih baik dibungkus sebelumnya, tetapi ini tidak mempengaruhi kebenaran. </p><br><h3 id="effektivnyy-bfs">  BFS efektif </h3><br><p>  Dalam kasus kami, grafik mungkin besar, tetapi acara yang permintaan verifikasi akan dieksekusi biasanya akan ditutup.  Oleh karena itu, Anda harus menjalankan BFS lebih cepat untuk kasus seperti itu. </p><br><p>  Dalam implementasi standar, tempat terpanjang adalah inisialisasi array dari simpul yang dikunjungi, yang selalu membutuhkan waktu yang sama dengan jumlah simpul dalam grafik.  Sebagai gantinya, Anda bisa menggunakan tabel hash atau menerapkan trik lain. </p><br><h3 id="sborka-musora">  Pengumpulan sampah </h3><br><p>  Seperti yang dapat Anda lihat dari tabel, ada dua metode lagi: <code>acquire_ref</code> dan <code>release_ref</code> . </p><br><p>  Di dalam Kronos, penghitung referensi disimpan untuk setiap acara.  Sementara beberapa layanan memproses acara, atau cadangan kemampuan untuk menambahkan acara baru yang <em>terjadi setelah acara</em> saat ini, ia menyimpan tautan.  Ketika kebutuhan ini hilang, layanan memanggil <code>release_ref</code> . </p><br><p>  Kronos akan menghapus acara ketika semua kondisi terpenuhi: </p><br><ol><li>  Jumlah tautan mencapai nol </li><li>  Semua peristiwa sebelum ini sudah dihapus dari grafik. </li></ol><br><p>  Pendekatan ini tidak membatasi kemungkinan pertanyaan, tetapi menyimpan memori di dalam Kronos. </p><br><h2 id="prilozheniya">  Aplikasi </h2><br><p>  Pertimbangkan penggunaan sistem menggunakan contoh penyimpanan nilai-kunci dengan transaksi yang didistribusikan. </p><br><p>  Misalkan ada beberapa server, setiap server bertanggung jawab atas serangkaian kunci. </p><br><p>  Setiap transaksi berhubungan dengan suatu peristiwa di Kronos.  Untuk setiap kunci, server harus menyimpan jumlah transaksi terakhir di mana kunci ini berpartisipasi.  Klien membuat acara dan mengirimkan nomornya ke semua server yang kunci-kuncinya dipengaruhi oleh transaksi ini.  Server sedang mencoba membuat ketergantungan di Kronos antara nomor transaksi saat ini dan peristiwa sebelumnya yang disimpan untuk kunci ini.  Jika Anda tidak dapat membuat ketergantungan, maka transaksi diakui sebagai tidak berhasil (perhatikan bahwa sampai sekarang belum ada interaksi dengan data). </p><br><p>  Jika semua operasi ketergantungan add selesai dengan sukses - ini berarti bahwa transaksi akan terjadi dan itu dapat dilakukan.  Server mempelajari hal ini dari klien dan mulai mengeksekusi bagian dari transaksi. </p><br><p>  Perhatikan bahwa transaksi tersebut akan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ACID</a> : </p><br><ul><li>  <strong>Atomicity</strong> : transaksi tidak akan dijadwalkan di Kronos, atau akan dijadwalkan untuk dieksekusi di semua node. </li><li>  <strong>Konsistensi</strong> : secara otomatis dalam repositori KV. </li><li>  <strong>Isolasi</strong> : jika dua transaksi berpotongan menurut data, maka mereka akan dihubungkan oleh hubungan sebab akibat di Kronos, yang berarti bahwa satu akan dieksekusi sebelum yang lain. </li><li>  <strong>Daya tahan</strong> : karena Kronos tahan jatuh dan mengasumsikan setiap replika lemari besi juga stabil, satu-satunya hal untuk membuktikan adalah kegigihan data transaksi yang tertunda.  Memang, jika transaksi ditandai oleh klien sebagai berhasil, tetapi catatan belum selesai di server, maka fakta ini mudah dibuat, karena server juga melacak bagian yang selesai dari transaksi. </li></ul><br><h3 id="proizvoditelnost">  Performa </h3><br><p>  Menerapkan penyimpanan KV semacam itu memang bisa efektif.  Artikel asli mengutip data bahwa implementasi KV-storage yang dideskripsikan adalah 4 kali lebih cepat daripada transaksi berdasarkan kunci. </p><br><p>  Selain itu, dibandingkan dengan MongoDB, sistem di atas Kronos hanya 6% di belakang, meskipun fakta bahwa MongoDB tidak menggunakan transaksi terdistribusi. </p><br><h2 id="analiz">  Analisis </h2><br><p>  Namun, pengoperasian Kronos memiliki beberapa kelemahan. </p><br><ul><li>  Pertama, ada overhead mengakses Kronos - setiap permintaan akan membutuhkan setidaknya satu panggilan. </li><li>  Kronos juga akan menjadi titik kegagalan tunggal - penulis artikel tidak menawarkan cara untuk membagi grafik acara. </li><li>  Akan menyenangkan untuk menambahkan sejumlah metode ke sistem.  Sebagai contoh, dalam contoh dengan penyimpanan KV akan lebih baik untuk memiliki panggilan balik yang akan menginformasikan server tentang status transaksi - itu berhasil ditambahkan ke grafik dengan semua dependensi yang diperlukan - atau, sebaliknya, transaksi tidak dapat diselesaikan. </li></ul><br><p>  Namun demikian, sistem yang dijelaskan memungkinkan kontrol yang fleksibel dari hubungan kausal antara peristiwa, memastikan kepatuhan yang dapat diprediksi dengan invarian yang diperlukan. </p><br><h1 id="zaklyuchenie">  Kesimpulan </h1><br><p>  Tentang ini, kami di GoTo School mengajarkan siswa dan anak sekolah ke arah Sistem Terdistribusi. </p><br><p>  Dan ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Algoritma dan Aplikasi</a> , Pemrograman Terapan, Bioinformatika dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Analisis Data</a> </p><br><p>  Datanglah ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sekolah musim gugur</a> kami pada tanggal 27 Oktober - 4 November atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sekolah musim dingin</a> di awal Januari. </p><br><p>  Dan jika Anda bukan lagi pelajar atau pelajar - <a href="">datanglah untuk mengajar</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id426399/">https://habr.com/ru/post/id426399/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id426387/index.html">Grafik dalam Julia. Pola aneh, pantulan segitiga dari garis lurus dan konstruksi normals kucing bundar di ruang hampa</a></li>
<li><a href="../id426389/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 334 (7-14 Oktober, 2018)</a></li>
<li><a href="../id426391/index.html">PHP Digest No. 141 (1 - 15 Oktober 2018)</a></li>
<li><a href="../id426395/index.html">Biaya untuk barang-barang dari toko online asing akan dikenakan pada saat pembelian</a></li>
<li><a href="../id426397/index.html">Penjaga internet</a></li>
<li><a href="../id426401/index.html">Amazon akan mengajarkan AI-nya untuk mendefinisikan emosi manusia</a></li>
<li><a href="../id426405/index.html">Peretas dalam kerangka hukum Federasi Rusia</a></li>
<li><a href="../id426407/index.html">Bagaimana membuat perjalanan ke konferensi tidak berguna</a></li>
<li><a href="../id426409/index.html">Peretas Alexei, yang melindungi router MikroTik tanpa izin dari pemiliknya, telah menjadi terkenal</a></li>
<li><a href="../id426411/index.html">Mengembangkan Kelas Deskripsi C ++ / CLI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>