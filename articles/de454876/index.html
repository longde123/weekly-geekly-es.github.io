<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦀 🔫 🛑 Über das Entwerfen eines flexiblen Systems von Charakterfähigkeiten in Spielen 🤚🏿 🖕 👩🏼‍🤝‍👨🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Fähigkeitssystem des Charakters ist vielleicht das anspruchsvollste an Flexibilität im Spiel. Es ist unmöglich vorherzusagen, welche Zauber in der...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Über das Entwerfen eines flexiblen Systems von Charakterfähigkeiten in Spielen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454876/"> Das Fähigkeitssystem des Charakters ist vielleicht das anspruchsvollste an Flexibilität im Spiel.  Es ist unmöglich vorherzusagen, welche Zauber in der endgültigen Version oder in nachfolgenden Aktualisierungen erscheinen werden.  In diesem Beitrag geht es darum, wie ich den Prozess der Ausführung von Fähigkeiten abstrahiert habe. <br><br>  Die Fähigkeit selbst ist nichts anderes als eine Reihe von Handlungen.  Die Mindestfähigkeitsschnittstelle besteht aus einer Methode: "Anwenden", aber nicht so einfach über die Schwierigkeiten unter dem Schnitt. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1cf/2fe/9f8/1cf2fe9f896ed6a8567e6408ba0f18ab.jpg" alt="Bild"><br><a name="habracut"></a><br>  Jede Fähigkeit beginnt mit einer Reihe von Überprüfungen, um festzustellen, ob sie angewendet werden kann.  Unter ihnen sind gewöhnliche, wie das Aufladen, die Verfügbarkeit von Mana, das Überprüfen der Entfernung und andere.  Hier ist bereits ersichtlich, dass nicht alle Prüfungen von allen Fähigkeiten benötigt werden.  Zum Beispiel gibt es Fähigkeiten, die in jeder Entfernung angewendet werden.  Das heißt, unterschiedliche Fähigkeiten erfordern vor der Ausführung unterschiedliche Überprüfungssätze.  Es ist jedoch klar, dass viele der Prüfungen wiederholt werden und oft viele Fähigkeiten die gleichen Prüfungen erfordern. <br><br>  Insgesamt wird ein Teil der Prüfungen logisch wiederholt, dh sie müssen wie vereinbart geändert werden, dh sofort an allen Orten.  Darüber hinaus sind die Teile der Schecks im allgemeinen Fall unterschiedlich. <br><br>  Wenn Teile von Prüfungen in separaten Objekten ausgewählt werden, die eine Schnittstelle implementieren und in eine einfach verknüpfte Liste integriert sind, erhalten wir eine Vorlagenverantwortungskette. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/46f/ff0/533/46fff0533c9fc04dac8410d11616501b.png" alt="Bild"><br><br>  Bei einer erfolgreichen Prüfung des Links wird die Prüfung des nächsten Links gestartet. Wenn kein nächster Link vorhanden ist, kann die gesamte Prüfung als erfolgreich angesehen werden.  Zusätzlich zur Prüfung selbst kann der Link auch einen Fehlerbehandler enthalten.  Wenn sich beispielsweise bei der Suche nach Mana herausstellt, dass dies nicht ausreicht, kann der Link den Spieler darüber informieren. <br><br>  Mithilfe der Aufgabenkette können wir für die Fähigkeit [Zweiter Wind] leicht ein zusätzliches Glied einfügen, um zu überprüfen, ob der Charakter einen Bogen oder ein Glied trägt, und um zu überprüfen, ob der Charakter eine Gesundheitsstufe unter 30% hat. <br><br>  Lassen Sie uns zurückrollen und uns daran erinnern, dass es Kontrollketten gibt, die für viele Fähigkeiten gleich sind.  Lassen Sie uns die Essenz der Fähigkeitserfüllungsanforderung hervorheben und jeden der Arten von Testketten mit seiner Klasse beschreiben. <br><br>  Die Anfrage ist nur erforderlich, um eine Kette von Aufgaben zu erstellen, sie zu starten und abzubrechen, wenn der Spieler den entsprechenden Befehl erteilt. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a78/7d9/949/a787d9949d3cca939996bcdb7559ccc7.png" alt="Bild"><br><br>  Wir werden bereits Ketten in Abfrageimplementierungen erstellen. <br><br>  Im Moment haben wir bereits gelernt, wie man die Fähigkeit zur Ausführung von Fähigkeiten flexibel testet.  Im Falle einer erfolgreichen Prüfung ist es nun weiterhin erforderlich, die Fähigkeit zu erfüllen. <br><br>  Ich zog es vor, dies zu tun, ohne die Schnittstellen zu ändern, und den letzten immer erfolgreichen Link hinzuzufügen, den die Fähigkeit als Nebeneffekt ausführt.  Hier ist ein Beispiel für eine Implementierung: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TerminalChecker</span></span>: <span class="hljs-title"><span class="hljs-title">ICastChecker</span></span> { CastChecker next { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } ISkill skill; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TerminalChecker</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ISkill skill</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.skill = skill; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { skill.cast(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } }</code> </pre> <br>  Diese Implementierung ermöglicht es uns, Anfragen asynchron zu machen.  Dies ist nützlich, wenn wir zusätzliche Informationen vom Benutzer benötigen.  Zum Beispiel muss eine Fähigkeit auf einen Bereich angewendet werden, den der Spieler mit der Maus auswählt.  Natürlich können Sie das Spiel zu diesem Zeitpunkt nicht stoppen. <br><br>  Jetzt müssen wir Anfragen mit Fähigkeiten abgleichen.  Wir werden dies natürlich unter Verwendung von Polymorphismus tun, indem wir der Fähigkeitsschnittstelle eine Eigenschaft hinzufügen.  Zu diesem Zeitpunkt haben wir die Möglichkeiten für diese Schnittstelle erweitert: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/29d/e8b/ddd/29de8bdddf8cfcf0c06b96ba260ed1ca.png" alt="Bild"><br><br>  Lassen Sie uns nach all der geleisteten Arbeit darüber nachdenken, was eine Fähigkeit ist.  In der aktuellen Implementierung ist dies eine Reihe von Aktionen, denen eine Reihe von Überprüfungen vorausgehen.  Beachten Sie, dass wir auf hohem Niveau in keiner Weise von einer bestimmten Spiellogik abhängig sind.  Mit der anfänglichen Idee, das System der Fähigkeiten zu beschreiben, das auf Zauber angewendet wird, haben wir ein System erhalten, das es uns nach bestimmten Regeln erlaubt oder nicht erlaubt, willkürliche Aktionen auszuführen. <br><br>  Aufgrund dieser Eigenschaft kann dieses System jede Änderung der Spielwelt beschreiben.  Zum Beispiel eine Verkaufstransaktion oder ein Hochbauteam. <br><br>  Schauen wir uns noch einmal alles allgemein an <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ef/83f/aaf/3ef83faaff5970844ae4f53c146a0bf4.png" alt="Bild"><br><br>  In diesem Beispiel ist eine Sprint-Fähigkeit eine normale Fähigkeit ohne Ziel. Die Klasse, die die Anforderung für solche Funktionen implementiert, ist NontargetCastRequest, die wiederum eine Überprüfungskette von ManaChecker, CooldownChecker und TerminalChecker bildet. <br><br>  Der aufrufende Code hängt nicht von den Details der Implementierung dieses Systems ab, dh wir werden die Spiellogik nicht durch Hinzufügen oder Ändern der Fähigkeit brechen. <br><br>  Dies ist das System der Charakterfähigkeiten in minimaler Form.  Diesem Modell fehlen die Mittel, um den aufrufenden Code zu alarmieren, Funktionen auf die Benutzeroberfläche zu übertragen und andere Details des Lebens.  Sie können selbst an sie denken. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de454876/">https://habr.com/ru/post/de454876/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de454860/index.html">Lassen Sie uns QueryProvider beim Umgang mit interpolierten Zeichenfolgen unterstützen</a></li>
<li><a href="../de454864/index.html">Wie sind die Entwicklungsprozesse in verschiedenen Unternehmen</a></li>
<li><a href="../de454868/index.html">Kompilieren von C in WebAssembly ohne Emscripten</a></li>
<li><a href="../de454872/index.html">Space Invaders: jetzt in 512 Bytes (Assembler x86)</a></li>
<li><a href="../de454874/index.html">Ein bisschen über Multitasking in Mikrocontrollern</a></li>
<li><a href="../de454878/index.html">Wir studieren MITRE ATT & CK. Mobile Matrizen: Gerätezugriff. Teil 3</a></li>
<li><a href="../de454880/index.html">"Nebensaison" im Leben eines Freiberuflers: Wie kann man überleben und überleben?</a></li>
<li><a href="../de454882/index.html">Die Architektur einer Ausnahmesituation: Punkt 2 von 4</a></li>
<li><a href="../de454884/index.html">Lesbare Testnamen in JS und im Verhaltensmuster</a></li>
<li><a href="../de454886/index.html">In der Leber sitzen. Warum die Entfernung von Lebertumoren ein Indikator für die überlegenen Fähigkeiten des Chirurgen ist</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>