<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ô¶Ô∏è üë™ ‚ù£Ô∏è Como resolver um problema antigo usando o ML em Python e .Net üí£ üëñ üï≥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Acontece que algumas tarefas o assombram por muitos anos. Para mim, colar senten√ßas de textos nas quais a transi√ß√£o para uma nova linha, e muitas veze...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como resolver um problema antigo usando o ML em Python e .Net</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457072/"><p><img src="https://habrastorage.org/webt/bm/pi/vr/bmpivrmqylxi0ypvqte57qsnadw.png"></p><br><p>  Acontece que algumas tarefas o assombram por muitos anos.  Para mim, colar senten√ßas de textos nas quais a transi√ß√£o para uma nova linha, e muitas vezes tamb√©m quebra de linha, est√° rigidamente entupida, tornou-se uma tarefa dessas.  Na pr√°tica, esse texto √© extra√≠do de PDF ou usando OCR.  Muitas vezes, era poss√≠vel encontrar esses textos nos sites das bibliotecas on-line, nos arquivos de documentos antigos que foram editados pelos editores do DOS.  E essa formata√ß√£o interfere na decomposi√ß√£o adequada em frases (e, com hifeniza√ß√µes, em tokens) para o processamento subsequente da PNL.  E √© banal mostrar esse documento nos resultados de pesquisa - ser√° feio. </p><br><p> Eu resolvi esse problema v√°rias vezes - em Delphi, C #.  Depois, foi um algoritmo dif√≠cil, onde, com minhas m√£os, escrevi, por exemplo, qual poderia ser a largura do texto, para que esse texto fosse considerado formatado "da maneira antiga".  Isso nem sempre funcionou perfeitamente, mas, em geral, foi suficiente. </p><a name="habracut"></a><br><p>  No momento, estou pesquisando alguns projetos de ML em Python.  A certa altura, verificou-se que o pr√≥ximo corpus de documentos consiste em textos extra√≠dos de vers√µes em PDF de artigos cient√≠ficos.  Obviamente, o texto foi extra√≠do com uma quebra de linha r√≠gida pelos caracteres do final do par√°grafo, com h√≠fens.  Ou seja, era imposs√≠vel trabalhar normalmente com esses textos ainda mais.  Python √© atraente porque tem quase tudo!  Mas algumas horas de pesquisa n√£o deram nada em ordem (talvez, √© claro, era isso que eu estava procurando).  E ent√£o decidi mais uma vez escrever um p√≥s-processador para esses documentos.  A escolha foi entre duas op√ß√µes - portar seu c√≥digo anterior com C # ou escrever algo que pudesse ser ensinado.  Finalmente, a segunda abordagem foi motivada pelo fato de os textos cient√≠ficos serem parcialmente exportados de textos de duas colunas e parcialmente de coluna √∫nica.  Tamb√©m diferentes tamanhos de fonte.  Isso levou ao fato de que a vers√£o antiga, com limites permitidos conectados por fio, geralmente funcionava incorretamente.  Para se sentar manualmente novamente, escolha as op√ß√µes - bem, n√£o, logo a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">singularidade chegar√°</a> , n√£o tenho tempo para isso!  Ent√£o, est√° decidido - estamos escrevendo uma biblioteca usando o aprendizado de m√°quina. </p><br><p>  Todo o c√≥digo pode ser encontrado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no reposit√≥rio</a> : </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Notebook com etapas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Utilit√°rios (ao mesmo tempo e um modelo para gera√ß√£o de c√≥digo)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C√≥digo gerado</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Caso de documentos marcados (e n√£o apenas)</a> </li></ul><br><h1 id="razmetka">  Marca√ß√£o </h1><br><p>  Qual √© o burburinho e a complexidade do aprendizado de m√°quina - se o algoritmo falhar em algum lugar, geralmente voc√™ n√£o precisa alterar o programa em si.  √â suficiente coletar novos dados (geralmente eles precisam ser anotados ao mesmo tempo) e reiniciar a constru√ß√£o do modelo.  O computador far√° o resto por voc√™.  Obviamente, h√° uma chance de que, para novos dados, voc√™ tenha que criar novos recursos, alterar a arquitetura, mas na maioria dos casos, acontece que voc√™ s√≥ precisa verificar se tudo come√ßou a funcionar bem.  Isso tamb√©m √© uma dificuldade - coletar e marcar dados pode ser dif√≠cil.  Ou muito dif√≠cil.  E tamb√©m - terrivelmente chato :-) </p><br><p>  Ent√£o, a coisa mais chata √© a marca√ß√£o.  A <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pasta corpus</a> cont√©m documentos que acabei de extrair do corpo do documento Krapivin2009 com o qual estava trabalhando naquele momento.  Existem 10 documentos que me pareciam t√≠picos.  Marquei apenas 3, j√° que no in√≠cio do treinamento nessa base foi obtida qualidade suficiente do ‚Äúadesivo‚Äù.  Se, no futuro, acontecer que tudo n√£o √© t√£o simples, novos documentos com marca√ß√£o ser√£o descartados nessa pasta e o processo de aprendizado ser√° repetido. </p><br><p>  Nesse caso, pareceu-me conveniente que os arquivos permanecessem em texto; portanto, o formato de marca√ß√£o foi adicionar um sinal no in√≠cio da linha de que essa linha deveria ser colada √† anterior (o caractere '+') ou n√£o (o caractere '*').  Aqui est√° um trecho (arquivo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1005058.txt</a> ): </p><br><pre><code class="plaintext hljs">*Introduction *Customers on the web are often overwhelmed with options and flooded with promotional messages for +products or services they neither need nor want. When users cannot find what they are searching for, the +e-commerce site struggles to maintain good customer relations. *Employing a recommender system as part of a site's Customer Relationship Management (CRM) activities +can overcome the problems associated with providing users with too little information, or too much of +the wrong information. Recommender systems are able to assist customers during catalog browsing and are +an effective way to cross-sell and improve customer loyalty. *In this paper, we will compare several recommender systems being used as an essential component of +CRM tools under development at Verizon. Our solutions are purposely for the current customers and current +products - recommendations for new customers and new products are out of the scope of this paper.</code> </pre> <br><p>  Algumas horas de trabalho tedioso e 3 arquivos com 2300 exemplos (uma linha - uma amostra) est√£o prontos.  Isso j√° √© suficiente em muitos casos para classificadores simples, como regress√£o log√≠stica, que foi aplicada. </p><br><h1 id="fichi">  Funcionalidades </h1><br><p>  Classificadores n√£o funcionam diretamente com dados de texto.  As entradas s√£o servidas com recursos - n√∫meros ou sinais booleanos (que, novamente, se traduzem nos n√∫meros 0/1) de que algum recurso est√° presente ou n√£o.  Construir os recursos certos a partir de bons dados √© a chave para o sucesso do aprendizado de m√°quina.  Uma caracter√≠stica do nosso caso √© que nosso corpus √© um texto em ingl√™s.  E eu quero ter pelo menos independ√™ncia m√≠nima de idioma.  Pelo menos nas l√≠nguas europeias.  Portanto, para recursos de texto, usamos um pequeno truque. </p><br><p>  A convers√£o de texto em uma lista de recursos e etiquetas, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">colando</a> com a linha anterior, √© realizada pela fun√ß√£o auxiliar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">_featurize_text_with_annotation</a> : </p><br><pre> <code class="python hljs">x, y = pdf_lines_gluer._featurize_text_with_annotation(raw_text)</code> </pre> <br><p>  Nota - aqui e mais principalmente fragmentos de c√≥digo em python go, que voc√™ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pode ver completamente em um laptop</a> . </p><br><p>  Recursos Utilizados: </p><br><ul><li>  'this_len' - o comprimento da linha atual em caracteres. </li><li>  'mean_len' - o comprimento m√©dio das linhas no intervalo -5 ... + 5 linhas. </li><li>  'prev_len' - o comprimento da linha anterior em caracteres. </li><li>  'first_chars' - aqui est√° o nosso recurso complicado.  Os 2 primeiros caracteres da string s√£o colocados aqui.  Mas, ao mesmo tempo, todas as letras min√∫sculas (de qualquer alfabeto) s√£o substitu√≠das pelo caractere ingl√™s 'a', mai√∫sculas s√£o substitu√≠das por 'A', os n√∫meros s√£o substitu√≠dos por '0'.  Isso reduz significativamente o n√∫mero de sinais poss√≠veis, enquanto os resume.  Exemplos do que acontece: 'Aa', 'aa', 'AA', '0.', 'a-' ... </li><li>  'isalpha' - se a letra √© o √∫ltimo caractere da linha anterior. </li><li>  'isdigit' - se o d√≠gito √© o √∫ltimo caractere da linha anterior. </li><li>  'islower' - se a letra min√∫scula √© o √∫ltimo caractere da linha anterior. </li><li>  'pontua√ß√£o' - um sinal de pontua√ß√£o que termina com a linha anterior ou um espa√ßo para outros caracteres. </li></ul><br><p>  Um exemplo de um conjunto de recursos para uma linha: </p><br><pre> <code class="plaintext hljs">{'this_len': 12, 'mean_len': 75.0, 'prev_len': 0, 'first_chars': 'Aa', 'isalpha': False, 'isdigit': False, 'islower': False, 'punct': ' '}</code> </pre> <br><p>  Para que o classificador do pacote sklearn trabalhe com eles, usamos a classe DictVectorizer, com a qual os recursos de string (temos 'first_chars') s√£o convertidos em v√°rias colunas intituladas (nomes podem ser obtidos atrav√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">get_feature_names ()</a> ) como 'first_chars = Aa ',' first_chars = 0. '.  Os recursos booleanos se transformam em zeros e uns, enquanto os valores num√©ricos permanecem n√∫meros - os nomes dos campos n√£o s√£o alterados.  Externamente, o m√©todo retorna numpy.array desse tipo aproximadamente (apenas uma linha √© mostrada): </p><br><pre> <code class="plaintext hljs">[[ 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 1. 0. 0. 0. 39.1 30. 0. 1. 36. ]]</code> </pre> <br><h1 id="trenirovka-klassifikatora">  Treinamento do Classificador </h1><br><p>  Tendo recebido um conjunto de recursos na forma de uma matriz de n√∫meros de ponto flutuante, agora podemos iniciar o processo de aprendizado.  Para fazer isso, usamos regress√£o log√≠stica como um classificador.  As classes s√£o desequilibradas, portanto, definimos a op√ß√£o class_weight = 'equilibrada', verificamos o resultado na parte de teste do caso: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sklearn.linear_model <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> LogisticRegression <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sklearn.metrics <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> classification_report clf = LogisticRegression(random_state=<span class="hljs-number"><span class="hljs-number">1974</span></span>, solver=<span class="hljs-string"><span class="hljs-string">'liblinear'</span></span>, max_iter=<span class="hljs-number"><span class="hljs-number">2000</span></span>, class_weight=<span class="hljs-string"><span class="hljs-string">'balanced'</span></span>) clf.fit(x_train, y_train) y_pred = clf.predict(x_test) print(classification_report(y_true=y_test, y_pred=y_pred))</code> </pre> <br><p>  Temos indicadores de qualidade: </p><br><pre> <code class="plaintext hljs"> precision recall f1-score support False 0.82 0.92 0.86 207 True 0.96 0.91 0.94 483 accuracy 0.91 690 macro avg 0.89 0.91 0.90 690 weighted avg 0.92 0.91 0.91 690</code> </pre> <br><p>  Como voc√™ pode ver, em cerca de 1/10 dos casos, temos erros de v√°rios tipos.  Mas, na pr√°tica, nem tudo √© t√£o assustador.  O fato √© que, mesmo com a marca√ß√£o dos olhos, nem sempre √© claro onde est√° o final do par√°grafo e onde est√° o final da frase.  Portanto, mesmo a marca√ß√£o em si pode conter esses erros.  Mas os erros mais cr√≠ticos n√£o s√£o onde ocorrem na borda da proposta, mas onde a proposta permanece rasgada.  E existem muito poucos erros desse tipo na realidade. </p><br><h1 id="vosstanavlivaem-tekst">  Recuperar texto </h1><br><p>  Chegou a hora de restaurar o texto danificado pela extra√ß√£o do PDF.  J√° podemos determinar se colamos a linha com a anterior, mas h√° mais um ponto - a hifeniza√ß√£o.  Tudo √© bem direto aqui, ent√£o eu codifiquei essa parte com for√ßa (eu me permito um pseudoc√≥digo): </p><br><pre> <code class="plaintext hljs">     :         :       :      :        \n</code> </pre> <br><p>  Armado com essa estrat√©gia, restauramos o texto em ingl√™s (existem erros como "ff" e "fi" no original - ele foi simplesmente copiado do caso Krapivin2009): </p><br><div class="spoiler">  <b class="spoiler_title">Texto original em ingl√™s</b> <div class="spoiler_text"><pre> <code class="python hljs">text = <span class="hljs-string"><span class="hljs-string">"""The rapid expansion of wireless services such as cellular voice, PCS (Personal Communications Services), mobile data and wireless LANs in recent years is an indication that signicant value is placed on accessibility and portability as key features of telecommunication (Salkintzis and Mathiopoulos (Guest Ed.), 2000). devices have maximum utility when they can be used any- where at anytime". One of the greatest limitations to that goal, how- ever, is nite power supplies. Since batteries provide limited power, a general constraint of wireless communication is the short continuous operation time of mobile terminals. Therefore, power management is y Corresponding Author: Dr. Krishna Sivalingam. Part of the research was supported by Air Force Oce of Scientic Research grants F-49620-97-1- 0471 and F-49620-99-1-0125; by Telcordia Technologies and by Intel. Part of the work was done while the rst author was at Washington State Univer- sity. The authors' can be reached at cej@bbn.com, krishna@eecs.wsu.edu, pagrawal@research.telcordia.com, jcchen@research.telcordia.com c 2001 Kluwer Academic Publishers. Printed in the Netherlands. Jones, Sivalingam, Agrawal and Chen one of the most challenging problems in wireless communication, and recent research has addressed this topic (Bambos, 1998). Examples include a collection of papers available in (Zorzi (Guest Ed.), 1998) and a recent conference tutorial (Srivastava, 2000), both devoted to energy ecient design of wireless networks. Studies show that the signicant consumers of power in a typical laptop are the microprocessor (CPU), liquid crystal display (LCD), hard disk, system memory (DRAM), keyboard/mouse, CDROM drive, oppy drive, I/O subsystem, and the wireless network interface card (Udani and Smith, 1996, Stemm and Katz, 1997). A typical example from a Toshiba 410 CDT mobile computer demonstrates that nearly 36% of power consumed is by the display, 21% by the CPU/memory, 18% by the wireless interface, and 18% by the hard drive. Consequently, energy conservation has been largely considered in the hardware design of the mobile terminal (Chandrakasan and Brodersen, 1995) and in components such as CPU, disks, displays, etc. Signicant additional power savings may result by incorporating low-power strategies into the design of network protocols used for data communication. This paper addresses the incorporation of energy conservation at all layers of the protocol stack for wireless networks. The remainder of this paper is organized as follows. Section 2 introduces the network architectures and wireless protocol stack considered in this paper. Low-power design within the physical layer is brie y discussed in Section 2.3. Sources of power consumption within mobile terminals and general guidelines for reducing the power consumed are presented in Section 3. Section 4 describes work dealing with energy ecient protocols within the MAC layer of wireless networks, and power conserving protocols within the LLC layer are addressed in Section 5. Section 6 discusses power aware protocols within the network layer. Opportunities for saving battery power within the transport layer are discussed in Section 7. Section 8 presents techniques at the OS/middleware and application layers for energy ecient operation. Finally, Section 9 summarizes and concludes the paper. 2. Background This section describes the wireless network architectures considered in this paper. Also, a discussion of the wireless protocol stack is included along with a brief description of each individual protocol layer. The physical layer is further discussed. """</span></span> corrected = pdf_lines_gluer._preprocess_pdf(text, clf, v) print(corrected)</code> </pre> </div></div><br><p>  Ap√≥s a recupera√ß√£o, obtemos: </p><br><div class="spoiler">  <b class="spoiler_title">Texto em ingl√™s recuperado</b> <div class="spoiler_text"><p>  A r√°pida expans√£o de servi√ßos sem fio, como voz celular, PCS (Personal Communications Services), dados m√≥veis e LANs sem fio nos √∫ltimos anos, √© uma indica√ß√£o de que valor significativo √© atribu√≠do √† acessibilidade e portabilidade como principais recursos das telecomunica√ß√µes (Salkintzis e Mathiopoulos (Guest Ed .), 2000).  os dispositivos t√™m utilidade m√°xima quando podem ser usados ‚Äã‚Äãem qualquer lugar a qualquer momento. "Uma das maiores limita√ß√µes a esse objetivo, no entanto, s√£o as fontes de alimenta√ß√£o limitadas. Como as baterias fornecem energia limitada, uma restri√ß√£o geral da comunica√ß√£o sem fio √© o curto tempo de opera√ß√£o cont√≠nua dos dispositivos m√≥veis. Portanto, o gerenciamento de energia √© fornecido por Autor Correspondente: Dr. Krishna Sivalingam Parte da pesquisa foi apoiada pela For√ßa A√©rea Oce, da Scientific Research, concede os subs√≠dios F-49620-97-10471 e F-49620-99-1-0125; por Telcordia Technologies e Intel.Parte do trabalho foi realizada enquanto o primeiro autor estava na Universidade Estadual de Washington.Os autores podem ser encontrados em cej@bbn.com, krishna@eecs.wsu.edu, pagrawal@research.telcordia.com, jcchen@research.telcordia.com c <br>  2001 Editores acad√™micos da Kluwer.  Impresso na Holanda. <br>  Jones, Sivalingam, Agrawal e Chen s√£o um dos problemas mais desafiadores da comunica√ß√£o sem fio, e pesquisas recentes abordaram esse t√≥pico (Bambos, 1998).  Os exemplos incluem uma cole√ß√£o de artigos dispon√≠veis em (Zorzi (Guest Ed.), 1998) e um recente tutorial da confer√™ncia (Srivastava, 2000), ambos dedicados ao design eficiente de energia de redes sem fio. <br>  Estudos mostram que os principais consumidores de energia em um laptop t√≠pico s√£o o microprocessador (CPU), tela de cristal l√≠quido (LCD), disco r√≠gido, mem√≥ria do sistema (DRAM), teclado / mouse, unidade de CDROM, unidade de oppy, subsistema de E / S, e a placa de interface de rede sem fio (Udani e Smith, 1996, Stemm e Katz, 1997).  Um exemplo t√≠pico de um computador m√≥vel Toshiba 410 CDT demonstra que quase 36% da energia consumida √© pelo monitor, 21% pela CPU / mem√≥ria, <br>  18% pela interface sem fio e 18% pelo disco r√≠gido.  Consequentemente, a conserva√ß√£o de energia tem sido amplamente considerada no design de hardware do terminal m√≥vel (Chandrakasan e Brodersen, 1995) e em componentes como CPU, discos, displays, etc.  Uma economia adicional significativa de energia pode resultar da incorpora√ß√£o de estrat√©gias de baixa energia no design de protocolos de rede usados ‚Äã‚Äãpara comunica√ß√£o de dados.  Este artigo aborda a incorpora√ß√£o da conserva√ß√£o de energia em todas as camadas da pilha de protocolos para redes sem fio. <br>  O restante deste artigo est√° organizado da seguinte forma.  A Se√ß√£o 2 apresenta as arquiteturas de rede e a pilha de protocolos sem fio considerados neste documento.  O design de baixa pot√™ncia na camada f√≠sica √© brevemente <br>  discutido na Se√ß√£o 2.3.  As fontes de consumo de energia nos terminais m√≥veis e as diretrizes gerais para reduzir a energia consumida s√£o apresentadas na Se√ß√£o 3. A Se√ß√£o 4 descreve o trabalho que trata dos protocolos de energia ecol√≥gica na camada MAC das redes sem fio, e os protocolos de conserva√ß√£o de energia na camada LLC s√£o abordados na Se√ß√£o <br>  5. A Se√ß√£o 6 discute os protocolos com reconhecimento de energia na camada de rede.  As oportunidades para economizar energia da bateria na camada de transporte s√£o discutidas na Se√ß√£o 7. A Se√ß√£o 8 apresenta t√©cnicas nas camadas OS / middleware e aplicativo para opera√ß√£o com economia de energia. <br>  Finalmente, a Se√ß√£o 9 resume e conclui o artigo. <br>  2. Antecedentes <br>  Esta se√ß√£o descreve as arquiteturas de rede sem fio consideradas neste documento.  Al√©m disso, √© inclu√≠da uma discuss√£o sobre a pilha de protocolos sem fio, juntamente com uma breve descri√ß√£o de cada camada de protocolo individual.  A camada f√≠sica √© discutida em mais detalhes. </p></div></div><br><p>  H√° um lugar controverso, mas, em geral, as frases foram restauradas e esse texto j√° pode ser processado como frases inteiras. </p><br><p>  Mas est√°vamos planejando fazer uma op√ß√£o independente do idioma.  E √© exatamente isso que nosso conjunto de recursos visa.  Vamos verificar o texto em russo (tamb√©m um fragmento de texto em PDF): </p><br><div class="spoiler">  <b class="spoiler_title">Texto original em russo</b> <div class="spoiler_text"><pre> <code class="python hljs">ru_text = <span class="hljs-string"><span class="hljs-string">"""       -       (. 1.10),    ,   - .       ,      , -   .       ,       .          : 1.        ,       -  (   ,   . 1.10,    ). 2.    ( )           ,     .      ,     ."""</span></span> corrected = pdf_lines_gluer._preprocess_pdf(ru_text, clf, v) print(corrected)</code> </pre> </div></div><br><p>  Recebido: </p><br><div class="spoiler">  <b class="spoiler_title">Texto em russo restaurado</b> <div class="spoiler_text"><p>  O m√©todo do vetor de suporte √© projetado para resolver problemas de classifica√ß√£o, procurando bons limites de decis√£o (Fig. 1.10) que separam dois conjuntos de pontos que pertencem a categorias diferentes.  O limite decisivo pode ser uma linha ou superf√≠cie que divide uma amostra de dados de treinamento em espa√ßos pertencentes a duas categorias.  Para classificar novos pontos, basta verificar qual lado da fronteira eles est√£o. <br>  O m√©todo do vetor de pesquisa procura esses limites em dois est√°gios: <br>  1. Os dados s√£o mapeados em um novo espa√ßo de dimens√£o superior, onde o limite pode ser representado como um hiperplano (se os dados forem bidimensionais, como na Fig. 1.10, o hiperplano degenera em uma linha). <br>  2. Um bom limite de decis√£o (dividindo o hiperplano) √© calculado maximizando a dist√¢ncia do hiperplano at√© os pontos mais pr√≥ximos de cada classe; essa etapa √© chamada de maximiza√ß√£o da diferen√ßa.  Isso nos permite generalizar a classifica√ß√£o de novas amostras que n√£o pertencem ao conjunto de dados de treinamento. </p></div></div><br><p>  Tudo √© perfeito aqui. </p><br><h1 id="kak-polzovatsya-kodogeneraciya">  Como usar (gera√ß√£o de c√≥digo) </h1><br><p>  No come√ßo, eu tinha um plano para criar um pacote que pudesse ser entregue usando o PIP, mas depois criei uma maneira mais simples (para mim).  O conjunto de recursos acabou por n√£o ser muito grande, a pr√≥pria regress√£o log√≠stica e o DictVectorizer t√™m uma estrutura simples: </p><br><ul><li>  Para o DictVectorizer, basta salvar os <em>nomes</em> dos recursos e os campos vocabul√°rio_ </li><li>  LogisticRegression possui coef <em>, classes</em> , intercept_ </li></ul><br><p>  Portanto, outra op√ß√£o nasceu com a gera√ß√£o de c√≥digo (no laptop, ela fica na se√ß√£o "Serializar como c√≥digo"): </p><br><ol><li>  Lemos o arquivo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pdf_lines_gluer.py</a> , que cont√©m c√≥digo auxiliar para vetorizar e restaurar o texto usando um classificador treinado. </li><li>  No local designado no c√≥digo-fonte como "# injetar c√≥digo aqui #", inserimos o c√≥digo que inicializa o DictVectorizer e LogisticRegression no estado em que entramos no laptop ap√≥s o treinamento.  Tamb√©m injetamos aqui a √∫nica fun√ß√£o p√∫blica preprocess_pdf (na medida do poss√≠vel para Python): <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">preprocess_pdf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(text: str)</span></span></span><span class="hljs-function"> -&gt; str:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _preprocess_pdf(text, _clf, _v)</code> </pre> </li><li>  O c√≥digo resultante √© gravado no arquivo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pdf_preprocessor.py</a> </li></ol><br><p>  √â esse arquivo pdf_preprocessor.py gerado que cont√©m tudo o que precisamos.  Para us√°-lo, basta pegar este arquivo e solt√°-lo em seu projeto.  Uso: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pdf_preprocessor <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> preprocess_pdf ... print(preprocess_pdf(text))</code> </pre> <br><p>  Se voc√™ tiver algum problema em alguns textos, eis o que voc√™ precisar√° fazer: </p><br><ol><li>  Coloque seus textos na pasta corpus, anote-os. </li><li>  Inicie o seu laptop <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">https://github.com/serge-sotnyk/pdf-lines-gluer/blob/master/pdf_gluer.ipynb</a> - levo menos de 5 segundos nos textos atuais. </li><li>  Fa√ßa e teste a nova vers√£o do arquivo pdf_preprocessor.py </li></ol><br><p>  Talvez algo d√™ errado e a qualidade n√£o o satisfa√ßa.  Ent√£o ser√° um pouco mais complicado - voc√™ precisar√° adicionar novos recursos at√© encontrar a combina√ß√£o correta. </p><br><h1 id="c-i-mlnet">  C # e ML.NET </h1><br><p>  Em nossa empresa, a maior parte do c√≥digo de back-end √© baseada em .Net.  Obviamente, interagir com Python adiciona inconveni√™ncia aqui.  E eu gostaria de ter uma solu√ß√£o semelhante em c #.  Eu acompanho o desenvolvimento da estrutura do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ML.NET</a> h√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">muito tempo</a> .  Fiz pequenas tentativas para fazer algo no ano passado, mas elas foram decepcionantes com a cobertura insuficiente de diferentes casos, uma pequena quantidade de documenta√ß√£o e instabilidade da API.  Desde a primavera deste ano, a estrutura mudou para um estado de lan√ßamento e eu decidi tentar novamente.  Al√©m disso, o trabalho mais tedioso com o layout do corpo j√° foi realizado. </p><br><p>  √Ä primeira vista, a estrutura adicionou conveni√™ncia.  Mais frequentemente, comecei a encontrar a documenta√ß√£o necess√°ria (embora ainda esteja longe da qualidade e quantidade no sklearn).  Mas o mais importante - h√° um ano, eu ainda n√£o conhecia o sklearn.  E agora comecei a ver que muitas coisas no ML.NET estavam tentando fazer √† imagem e semelhan√ßa (na medida do poss√≠vel, dada a diferen√ßa de plataformas).  Essas analogias tornaram mais f√°cil o aprendizado dos princ√≠pios do ML.NET na pr√°tica. </p><br><p>  Um projeto de trabalho nesta plataforma pode ser visto em <a href="">https://github.com/serge-sotnyk/pdf-postprocess.cs</a> </p><br><p>  Os princ√≠pios gerais permaneceram os mesmos - na pasta corpus est√£o localizados documentos anotados (e n√£o t√£o).  Ap√≥s o lan√ßamento do projeto ModelCreator, pr√≥ximo √† pasta corpus, veremos a pasta models, onde o arquivo com o modelo treinado ser√° colocado.  Essa ainda √© a mesma regress√£o log√≠stica com os mesmos recursos. </p><br><p>  Mas aqui eu n√£o brinquei mais com a gera√ß√£o de c√≥digo.  Para usar o modelo treinado, use o projeto PdfPostprocessor (que internamente possui o modelo PdfPostprocessModel.zip compilado como um recurso).  Depois disso, o modelo pode ser usado, conforme mostrado no exemplo m√≠nimo - <a href="">https://github.com/serge-sotnyk/pdf-postprocess.cs/blob/master/MinimalUsageExample/Program.cs</a> : </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> PdfPostprocessor; ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> postprocessor = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Postprocessor(); Console.WriteLine(); Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Restored paragraphs in the English text:"</span></span>); Console.WriteLine(postprocessor.RestoreText(EnText)); Console.WriteLine(); Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Restored paragraphs in the Russian text:"</span></span>); Console.WriteLine(postprocessor.RestoreText(RuText)); }</code> </pre> <br><p>  Enquanto a c√≥pia do modelo da pasta models para o projeto PdfPostprocessor √© realizada manualmente - era mais conveniente para mim controlar melhor qual modelo entra no projeto final. </p><br><p>  Existe o pacote nuget - PdfPostprocessor.  Para usar o pacote e o modelo que voc√™ treinou, use o construtor Postprocessor sobrecarregado. </p><br><h1 id="sravnenie-variantov-na-python-i-c35">  Comparando op√ß√µes em Python e C # </h1><br><p>  Embora seja recente na experi√™ncia de desenvolvimento em duas plataformas, pode fazer sentido recont√°-las brevemente.  Eu n√£o sou um defensor militante de uma plataforma espec√≠fica h√° muito tempo e sou solid√°rio com os sentimentos dos crentes de v√°rias religi√µes.  Voc√™ tamb√©m precisa entender que ainda trabalho com linguagens com digita√ß√£o est√°tica a maior parte da minha vida, para que elas fiquem um pouco mais pr√≥ximas de mim. </p><br><h3 id="chto-ne-ponravilos-pri-perehode-na-c35">  O que eu n√£o gostei ao mudar para C # </h3><br><ul><li>  Verbosidade.  Ainda assim, o c√≥digo Python √© mais compacto.  Esta √© a aus√™ncia de colchetes do operador e colchetes ap√≥s if, for.  A falta de novas infinitas.  Uso ativo de campos, pois s√£o f√°ceis de transformar em propriedades, se necess√°rio.  Mesmo que a privacidade no Python, que √© simplesmente indicada por um sublinhado no in√≠cio do identificador, voc√™ se acostume e, na pr√°tica, acabou sendo muito conveniente, mais conveniente do que v√°rios modificadores de privacidade em outros idiomas.  E a brevidade das constru√ß√µes acelera o desenvolvimento e facilita a leitura do c√≥digo. </li><li>  Na maioria dos casos, o c√≥digo Python parece mais limpo e elegante (isso √© apenas subjetivo).  Isso facilita a leitura e a manuten√ß√£o. </li><li>  Para o Python, para quase tudo, h√° algum tipo de fun√ß√£o ou decorador em algum tipo de pacote, mas no C # muito tem que ser adicionado.  Isso aumenta ainda mais o c√≥digo com v√°rias fun√ß√µes auxiliares, classes.  E isso leva ainda mais tempo. </li><li>  O grau de documenta√ß√£o do C # e suas estruturas √© significativamente menor do que no ecossistema Python. </li><li>  A digita√ß√£o mais rigorosa do ML.NET em compara√ß√£o com o sklearn on√≠voro tamb√©m nos for√ßou a gastar algum tempo procurando as transforma√ß√µes corretas, e o par√°grafo anterior n√£o contribuiu para resolver esse problema. </li></ul><br><h3 id="chto-ponravilos-pri-perehode-na-c35">  O que voc√™ gostou ao mudar para C # </h3><br><ul><li>  Uma sensa√ß√£o de confiabilidade.  J√° n√£o com muita frequ√™ncia, mas com bastante regularidade, o on√≠voro Python me leva a problemas evasivos.  E agora, ao portar o c√≥digo para C #, ocorreu um erro que tornava alguns recursos in√∫teis.  Ap√≥s a corre√ß√£o, a precis√£o aumentou alguns por cento. </li><li>  Velocidade.  No c√≥digo Python, tive que abandonar os recursos vinculados aos quais a decis√£o de colar foi tomada nas ofertas anteriores - se voc√™ enviar propostas ao classificador uma de cada vez, a velocidade geral ser√° menor que o rodap√©.  Para que o processamento de dados no Python seja r√°pido, √© necess√°rio vetoriz√°-lo o m√°ximo poss√≠vel e, √†s vezes, nos faz abandonar op√ß√µes potencialmente √∫teis ou dificulta muito. </li><li>  Linq.  Eles s√£o muito mais convenientes do que a compreens√£o de lista (LC) no Python.  At√© um LC com um para me obriga a escrever primeiro o que vem depois, depois voltar ao come√ßo e anexar para, e s√≥ ent√£o escrever uma express√£o no in√≠cio do LC.  √â s√≥ que, nessa ordem, eu acho - a fonte dos registros, itens, para o que converter.  LINQ (  "" )     .    LC (  for)   . ,       ,   . </li><li> Lambda.    ,   .   ,   C#   . </li></ul><br><p>      ‚Äî      .      ,    .Net     ,   .    -  ‚Äî   REST       C#. </p><br><p>  C#   .            ‚Äî      ,    - .   Microsoft     Kotlin ‚Äî    .Net      ,         .          Python- ‚Äî ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Julia</a> .      . </p><br><h1 id="zaklyuchenie">  Conclus√£o </h1><br><p>    : </p><br><ul><li>   ,     ‚Äî  ,    ,   -    . , ,   -   . </li><li>    .  ,   ML.NET     - .       . </li><li> ,    Python-     .Net.         , . </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt457072/">https://habr.com/ru/post/pt457072/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt457062/index.html">Centro de Treinamento Cosmonauta em Star City</a></li>
<li><a href="../pt457064/index.html">Para a quest√£o dos m√≥dulos</a></li>
<li><a href="../pt457066/index.html">Como modificar o rob√¥ FEDOR e a cadeira de v√¥o da ISS</a></li>
<li><a href="../pt457068/index.html">Filas - o que √©, por que e como us√°-lo? Veja os recursos do AWS SQS</a></li>
<li><a href="../pt457070/index.html">Textolite em vez de papel√£o. Algumas palavras sobre o emblema interativo OFFZONE 2019</a></li>
<li><a href="../pt457074/index.html">A evolu√ß√£o dos desenvolvedores: quais jogos devemos esperar no futuro</a></li>
<li><a href="../pt457078/index.html">Como transformar seu avatar do Telegram em um rel√≥gio</a></li>
<li><a href="../pt457082/index.html">Concess√£o impercept√≠vel de direitos de administrador</a></li>
<li><a href="../pt457086/index.html">Padr√£o arquitetural "Builder" no universo de "Swift" e "iOS" / "macOS"</a></li>
<li><a href="../pt457090/index.html">Ber√ßos de seguran√ßa: JWT</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>