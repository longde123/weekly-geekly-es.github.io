<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âœˆï¸ ğŸ—œï¸ ğŸ¤µ å¦‚ä½•ä¸ºGNOME Shellç¼–å†™æ‰©å±•åï¼šè¯·å‹¿æ‰“æ‰°æ¨¡å¼ ğŸ˜µ ğŸ™ƒ ğŸ‘¨ğŸ¼â€ğŸš’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è¿™ä¸€åˆ‡éƒ½å§‹äºè¿ç§»åˆ°ä¸€ä¸ªLinuxå‘è¡Œç‰ˆçš„æ–°ç‰ˆæœ¬ï¼Œç„¶åå°±æ˜¯ç”¨Javascriptå¼€å‘çš„è‡­åæ˜­è‘—çš„ GNOME Shellï¼ˆç®€ç§°GHï¼‰ã€‚ å¥½å§ï¼Œå¥½çš„ï¼Œåœ¨JSä¸Šä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåœ¨JSä¸Šä¹Ÿå¯ä»¥å·¥ä½œ-å¥½çš„ã€‚ 


åŒæ—¶ï¼Œé•¿æœŸä»¥æ¥ï¼Œæˆ‘çš„å·¥ä½œèŠ‚å¥ä¸€ç›´è¦æ±‚æ‰¾åˆ°ä¸€ä¸ªæ­£å¸¸çš„é‚®ä»¶ç¨‹åºï¼Œè€Œä¸æ˜¯æµè§ˆå™¨ä¸­çš„outlook.offic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•ä¸ºGNOME Shellç¼–å†™æ‰©å±•åï¼šè¯·å‹¿æ‰“æ‰°æ¨¡å¼</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428187/"><p> è¿™ä¸€åˆ‡éƒ½å§‹äºè¿ç§»åˆ°ä¸€ä¸ªLinuxå‘è¡Œç‰ˆçš„æ–°ç‰ˆæœ¬ï¼Œç„¶åå°±æ˜¯ç”¨Javascriptå¼€å‘çš„<em>è‡­åæ˜­è‘—çš„</em> GNOME Shellï¼ˆç®€ç§°GHï¼‰ã€‚ å¥½å§ï¼Œå¥½çš„ï¼Œåœ¨JSä¸Šä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåœ¨JSä¸Šä¹Ÿå¯ä»¥å·¥ä½œ-å¥½çš„ã€‚ </p><br><p>åŒæ—¶ï¼Œé•¿æœŸä»¥æ¥ï¼Œæˆ‘çš„å·¥ä½œèŠ‚å¥ä¸€ç›´è¦æ±‚æ‰¾åˆ°ä¸€ä¸ªæ­£å¸¸çš„é‚®ä»¶ç¨‹åºï¼Œè€Œä¸æ˜¯æµè§ˆå™¨ä¸­çš„<code>outlook.office.com</code>é€‰é¡¹å¡ä»¤äººtheç›®ç»“èˆŒçš„å…†å­—èŠ‚ã€‚ ç°åœ¨æˆ‘å‘ç°ï¼Œåœ¨æˆ‘ä»¬è¿™ä¸ªæ—¶ä»£ï¼Œæœ‰å‡ ä½å‡ ä¹æ˜¯ä¼˜ç§€çš„å€™é€‰äººï¼Œä¸€ä¸ªéº»çƒ¦-é‚®é€’å‘˜å¼€å§‹è®©æˆ‘æ”¶åˆ°æ–°ä¿¡ä»¶çš„é€šçŸ¥-å£°éŸ³å’Œå¼¹å‡ºå¼é¢˜è¯ã€‚ </p><br><p> æ€ä¹ˆåŠ ç¼–å†™â€œè¯·å‹¿æ‰“æ‰°â€æ‰©å±•ç¨‹åºçš„å†³å®šå¹¶æ²¡æœ‰é©¬ä¸Šåšå‡ºï¼Œæˆ‘çœŸçš„ä¸æƒ³å†™è‡ªè¡Œè½¦å’Œ/æˆ–é™·å…¥å¼€å‘/ä»£ç /å¤§é‡é”™è¯¯çš„æ³¥æ½­ï¼Œä½†æ˜¯æˆ‘å†³å®šï¼Œç°åœ¨æˆ‘æƒ³ä¸Habråˆ†äº«æˆ‘çš„ç»éªŒã€‚  <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">1ä¸ª</a></sup> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/737/175/2b5/7371752b5fb33b8858bff75857fbfa83.jpg"></p><a name="habracut"></a><br><h2 id="tehnicheskie-trebovaniya"> æŠ€æœ¯è¦æ±‚ </h2><br><p> æˆ‘æƒ³è¦ <del> ä¸€ä¸ªå¤§ </del> æŒ‰é’®å¯å…³é—­æ‚¨é€‰æ‹©çš„æ—¶é—´çš„é€šçŸ¥å’Œå£°éŸ³ï¼š20åˆ†é’Ÿï¼Œ40åˆ†é’Ÿï¼Œ1å°æ—¶ï¼Œ2å°æ—¶ï¼Œ4ã€8å’Œ24å°æ—¶ã€‚  <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2</a></sup>æ˜¯çš„ï¼Œæ—¶é—´å°±åƒåœ¨Slackä¸­ä¸€æ ·ã€‚ </p><br><p> åœ¨extensions.gnome.orgçš„æ‰©å±•ä¸­ï¼Œæœ‰ä¸€ä¸ªæ‰©å±•åâ€œè¯·å‹¿æ‰“æ‰°æŒ‰é’®â€ï¼Œç”¨ä½œç¼–å†™å…¶æ‰©å±•åâ€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¯·å‹¿æ‰“æ‰°æ—¶é—´â€çš„æ¨¡å‹</a> ã€‚ </p><br><h2 id="konechnyy-rezultat-do-not-disturb-timehttpsextensionsgnomeorgextension1484do-not-disturb-time"> æœ€ç»ˆç»“æœï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¯·å‹¿æ‰“æ‰°æ—¶é—´</a> </h2><br><p><img src="https://habrastorage.org/getpro/habr/post_images/104/41d/479/10441d479062c7540a2743c6fb0b852d.png" alt="ä¸è¦æ‰“æ‰°æ—¶é—´"></p><br><p> ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">extensions.gnome.org</a>å®‰è£…ã€‚ <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">githubä¸Šçš„èµ„æ–™</a> ï¼šæ”¾æ˜Ÿæ˜Ÿï¼Œå‰å­ï¼Œæä¾›æ”¹è¿›ã€‚ </p><br><h3 id="kak-ustanovit-rasshirenie-gh-instrukciya"> å¦‚ä½•å®‰è£…GHæ‰©å±•ç¨‹åºï¼šè¯´æ˜ </h3><br><ol><li> ä»¥Ubuntuä¸ºä¾‹ï¼Œå®‰è£…<em>chrome-gnome-shell</em>è½¯ä»¶åŒ…ï¼ˆæµè§ˆå™¨è¿æ¥å™¨ï¼‰ï¼š <br> <code>sudo apt install chrome-gnome-shell</code> </li> <li> ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é“¾æ¥ï¼Œ</a>å®‰è£…æµè§ˆå™¨æ‰©å±•ï¼š <br><ul><li> ç‚¹å‡»é“¾æ¥ï¼Œ <em>ç‚¹å‡»æ­¤å¤„å®‰è£…æµè§ˆå™¨æ‰©å±•</em> </li><li> åœ¨Ubuntu 18.04ä¸­ï¼Œå®ƒé€‚ç”¨äºChrome / Chromiumæµè§ˆå™¨ï¼ŒFedora 28/29-åœ¨Firefoxå’ŒChromiumä¸­å‡é€‚ç”¨ </li></ul></li><li> æˆ‘ä»¬æ­£åœ¨åˆ—è¡¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://extensions.gnome.org</a>ä¸­å¯»æ‰¾æ‰€éœ€çš„æ‰©å±•åï¼šå¯ç”¨ï¼Œç¦ç”¨ï¼Œæ›´æ”¹æ‰©å±•åè®¾ç½®ã€‚ </li><li> èµ¢åˆ©ï¼ </li></ol><br><h2 id="nachalo"> å¼€å§‹ </h2><br><p> ä»å¤´å¼€å§‹åˆ›å»ºæ‰©å±•ï¼š </p><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> gnome<span class="hljs-literal"><span class="hljs-literal">-shell</span></span><span class="hljs-literal"><span class="hljs-literal">-extension</span></span><span class="hljs-literal"><span class="hljs-literal">-tool</span></span> -<span class="hljs-literal"><span class="hljs-literal">-create</span></span><span class="hljs-literal"><span class="hljs-literal">-extension</span></span> Name: <span class="hljs-keyword"><span class="hljs-keyword">Do</span></span> Not Disturb Time Description: Disables notifications and sound <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> a period Uuid: dnd@catbo.net Created extension <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">'~/.local/share/gnome-shell/extensions/dnd@catbo.net'</span></span> <span class="hljs-comment"><span class="hljs-comment">#  gnome-shell Alt+F2, r, Enter #    https://extensions.gnome.org/local/      #   Gnome Shell - , gnome-shell   systemd,   journalctl -f /usr/bin/gnome-shell #    ,       gnome-shell journalctl -f /usr/bin/gnome-shell | grep -E 'dnd|$'</span></span></code> </pre> <br><p> å¯¹åº”ç›®å½•ä¸­çš„<code>extension.js</code>æ–‡ä»¶æ˜¯æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ï¼Œåœ¨æœ€å°ç‰ˆæœ¬ä¸­ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{} <span class="hljs-comment"><span class="hljs-comment">//   ;    function disable() {} // --||-- ;     enable()</span></span></code> </pre> <br><h3 id="pervyy-kod"> ç¬¬ä¸€ä¸ªä»£ç  </h3><br><p> é¦–å…ˆï¼Œæˆ‘ä»¬æƒ³<code>Status Menu</code>å³ä¸Šæ–¹çš„<code>Status Menu</code>æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œå¦‚ä¸Šé¢çš„å±å¹•æˆªå›¾æ‰€ç¤ºã€‚ </p><br><p> é‚£ä¹ˆä»å“ªé‡Œå¼€å§‹å‘¢ï¼Ÿ å“¦ï¼Œè®©æˆ‘ä»¬ä»æ–‡æ¡£å¼€å§‹ã€‚ æˆ‘ä»¬æ‹¥æœ‰æ‰€æœ‰å®˜æ–¹æ–‡æ¡£ã€‚ ä½†æ˜¯ï¼Œæ²¡æœ‰ï¼Œå®˜æ–¹æ–‡æ¡£éå¸¸å°ä¸”åˆ†æ•£ï¼Œä½†æ˜¯ç”±äº<code>julio641742</code>åŠå…¶éå®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘ä»¬å¾—åˆ°äº†æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿ï¼š </p><br><pre> <code class="javascript hljs"> <span class="hljs-comment"><span class="hljs-comment">// 1 -    (1 - , 0 - , 0.5 -  ) // true,     let dndButton = new PanelMenu.Button(1, "DoNotDisturb", false); // `right` -      (left/center/right) Main.panel.addToStatusArea("DoNotDisturbRole", dndButton, 0, "right"); let box = new St.BoxLayout(); dndButton.actor.add_child(box); let icon = new St.Icon({ style_class: "system-status-icon" }); icon.set_gicon(Gio.icon_new_for_string("/tmp/bell_normal.svg")); box.add(icon);</span></span></code> </pre> <br><p> æ­¤ä»£ç åˆ›å»º<code>dndButton</code>ç±»çš„<code>dndButton</code>é”®å¯¹è±¡-è¿™æ˜¯ä¸“é—¨ä¸ºâ€œçŠ¶æ€èœå•â€é¢æ¿è®¾è®¡çš„æŒ‰é’®ã€‚ ç„¶åä½¿ç”¨Main.panel.addToStatusAreaï¼ˆï¼‰å‡½æ•°å°†å…¶æ’å…¥æ­¤é¢æ¿ã€‚  <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">3</a></sup> </p><br><p> æ’å…¥èœå•é¡¹ï¼Œå¹¶é™„åŠ å¤„ç†ç¨‹åºï¼Œä¾‹å¦‚ï¼š </p><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> menuItem = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PopupMenu.PopupMenuItem(<span class="hljs-string"><span class="hljs-string">"hello, world!"</span></span>); menuItem.connect(<span class="hljs-string"><span class="hljs-string">"activate"</span></span>, (menuItem, event) =&gt; { log(<span class="hljs-string"><span class="hljs-string">"hello, world!"</span></span>); }); dndButton.menu.addMenuItem(menuItem);</code> </pre> <br><p> æ„Ÿè°¢julio641742æä¾›çš„æ–‡æ¡£ï¼ è¿ç»“ï¼š <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://github.com/julio641742/gnome-shell-extension-reference</a> </p><br><p> æœ€ç»ˆçš„å·¥ä½œä»£ç åœ¨<a href="">è¿™é‡Œ</a> ã€‚ </p><br><h2 id="osobennosti-raboty-gnome-shell-i-javascript">  GNOME Shellå’ŒJavascriptåŠŸèƒ½ </h2><br><p> å¤–éƒ¨æ˜¯2018å¹´åº•ï¼ŒNode.js / V8æ˜¯è¿è¡ŒJavascriptä»£ç çš„ä¸»è¦å·¥å…·ã€‚ æ‰€æœ‰ç°ä»£Webå¼€å‘éƒ½åŸºäºâ€œèŠ‚ç‚¹â€ã€‚ </p><br><p> ä½†æ˜¯GNOME ShellåŠå…¶å‘¨å›´çš„æ•´ä¸ªåŸºç¡€ç»“æ„ä½¿ç”¨äº†ä¸åŒçš„Javascriptå¼•æ“ï¼Œå³Mozillaçš„SpiderMonkeyï¼Œè¿™å¸¦æ¥äº†è®¸å¤šé‡è¦çš„æ€§èƒ½å·®å¼‚ã€‚ </p><br><h3 id="import-moduley"> å¯¼å…¥æ¨¡å— </h3><br><p> ä¸Node.jsä¸åŒï¼Œè¿™é‡Œæ²¡æœ‰requireï¼ˆï¼‰ï¼Œä¹Ÿæ²¡æœ‰èŠ±å“¨çš„ES6-importã€‚ ç›¸åï¼Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„å¯¼å…¥å¯¹è±¡ï¼Œè®¿é—®è¯¥å¯¹è±¡çš„å±æ€§ä¼šå¯¼è‡´æ¨¡å—çš„åŠ è½½ï¼š </p><br><pre> <code class="hljs julia"> //<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PanelMenu = require(<span class="hljs-string"><span class="hljs-string">"ui/panelMenu"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PanelMenu = imports.ui.panelMenu;</code> </pre> <br><p> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä»GNOME ShellåŒ…åº“ä¸­ä¸‹è½½äº†js / ui / panelMenu.jsæ¨¡å—ï¼Œè¯¥æ¨¡å—å®ç°äº†å¸¦æœ‰å¼¹å‡ºèœå•çš„æŒ‰é’®çš„åŠŸèƒ½ã€‚ </p><br><p> æ˜¯çš„ï¼Œä½¿ç”¨GNOMEçš„ç°ä»£Linuxæ¡Œé¢é¢æ¿ä¸­çš„æ‰€æœ‰æŒ‰é’®å‡åŸºäºpanelMenu.jsã€‚ åŒ…æ‹¬ï¼šä¸ç”µæ± æŒ‡ç¤ºå™¨ï¼ŒWi-fiï¼ŒéŸ³é‡ç›¸åŒçš„å³æŒ‰é’®ï¼› è¾“å…¥è¯­è¨€å¼€å…³en-ruã€‚ </p><br><p> æ¥ä¸‹æ¥ï¼Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§<code>imports.searchPath</code>è¿™æ˜¯å°†åœ¨å…¶ä¸­æœç´¢æˆ‘ä»¬çš„JSæ¨¡å—çš„è·¯å¾„ï¼ˆè¡Œï¼‰çš„åˆ—è¡¨ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†è®¡æ—¶å™¨å‡½æ•°åˆ†é…ç»™å•ç‹¬çš„timeUtils.jsæ¨¡å—ï¼Œå¹¶å°†å…¶æ”¾åœ¨æ‰©å±•ç¨‹åºextension.jsçš„è¾“å…¥ç‚¹é™„è¿‘ã€‚ å¯¼å…¥timeUtils.jså¦‚ä¸‹ï¼š </p><br><pre> <code class="hljs pgsql">//     , -  ~/.<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/gnome-shell/extensions/&lt;your-<span class="hljs-keyword"><span class="hljs-keyword">extension</span></span>&gt;/ const Me = imports.misc.extensionUtils.getCurrentExtension(); //       imports.searchPath.unshift(Me.path); //   const timeUtils = imports.timeUtils;</code> </pre> <br><h3 id="logirovanie-otladka-javascript"> è®°å½•ï¼Œè°ƒè¯•Javascript </h3><br><p> å¥½å§ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰Node.jsï¼Œå› æ­¤æˆ‘ä»¬æ‹¥æœ‰è‡ªå·±çš„æ—¥å¿—è®°å½•ã€‚ è¯¥ä»£ç ä¸­æä¾›äº†å‡ ä¸ªæ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œè€Œä¸æ˜¯console.logï¼ˆï¼‰ï¼Œè¯·å‚è§gjs /../ global.cppï¼Œstatic_funcsï¼š </p><br><ul><li>  â€œ logâ€ = g_messageï¼ˆâ€œ JS LOGï¼šâ€ +æ¶ˆæ¯ï¼‰-ç™»å½•stderrï¼Œä¾‹å¦‚ï¼š </li></ul><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> cat helloWorld.js log(<span class="hljs-string"><span class="hljs-string">"hello, world"</span></span>); <span class="hljs-variable"><span class="hljs-variable">$</span></span> gjs helloWorld.js Gjs<span class="hljs-literal"><span class="hljs-literal">-Message</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">20</span></span>:<span class="hljs-number"><span class="hljs-number">21.048</span></span>: JS LOG: hello, world</code> </pre> <br><ul><li>  â€œ logErrorâ€-è®°å½•å¼‚å¸¸å †æ ˆï¼š <br><ul><li> ç¬¬ä¸€ä¸ªå¿…éœ€çš„å‚æ•°æ˜¯ä¸€ä¸ªä¾‹å¤–ï¼Œç„¶åç”¨é€—å·åˆ†éš”æ‰€éœ€çš„å†…å®¹ </li><li> ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨éœ€è¦åœ¨æ­£ç¡®çš„ä½ç½®æ‰“å°çº¸å ï¼š </li></ul></li></ul><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'bum!'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(e) { logError(e, <span class="hljs-string"><span class="hljs-string">"what a fuck"</span></span>); }</code> </pre> <br><p> è¿™å°†ä»¥stderræ ·å¼ç»˜åˆ¶ï¼š </p><br><pre> <code class="hljs powershell">(gjs:<span class="hljs-number"><span class="hljs-number">28674</span></span>): Gjs<span class="hljs-literal"><span class="hljs-literal">-WARNING</span></span> **: <span class="hljs-number"><span class="hljs-number">13</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">46.951</span></span>: JS ERROR: what a fuck: Error: bum! ggg<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>./gtk.js:<span class="hljs-number"><span class="hljs-number">5</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span> ddd<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>./gtk.js:<span class="hljs-number"><span class="hljs-number">12</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>./gtk.js:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><ul><li>  â€œ printâ€ = g_printï¼ˆâ€œï¼…s \ nâ€ï¼Œtxtï¼‰;  -stdoutä¸­åªæœ‰æ–‡æœ¬+â€œ \ nâ€ï¼Œæ²¡æœ‰å‰ç¼€å’Œé¢œè‰²ï¼Œä¸logï¼ˆï¼‰ä¸åŒ </li><li>  â€œ printerrâ€ = g_printerrï¼ˆâ€œï¼…s \ nâ€ï¼Œtxtï¼‰-ä¸printçš„åŒºåˆ«åœ¨äºstderr </li></ul><br><p> ä½†æ˜¯ï¼Œæ²¡æœ‰å¼€ç®±å³ç”¨çš„SpiderMonkeyè°ƒè¯•å™¨ï¼ˆæˆ‘æ¯«ä¸è´¹åŠ›åœ°åœ¨æ‰€æœ‰å¯ç”¨çš„æ—¥å¿—è®°å½•å·¥å…·ä¸Šè¾›è‹¦åœ°ç¼–å†™äº†å®ƒï¼Œä½¿ç”¨å®ƒï¼ï¼‰ã€‚ å¦‚æœéœ€è¦ï¼Œå¯ä»¥å°è¯•JSRDbgï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸€</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">äºŒ</a> ã€‚ </p><br><h2 id="a-est-li-zhizn-dlya-js-koda-vne-gnome-shell">  GNOME Shellä¹‹å¤–çš„JSä»£ç è¿˜æœ‰ç”Ÿå‘½å—ï¼Ÿ </h2><br><p> æœ‰ã€‚ å¯ä»¥ä½¿ç”¨Javascriptç¼–å†™åŠŸèƒ½é½å…¨çš„åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰ï¼ æ‚¨éœ€è¦ä½¿ç”¨gjs binarï¼ŒJS-GTKä»£ç å¯åŠ¨å™¨ï¼ˆåˆ›å»ºGUIçª—å£çš„ç¤ºä¾‹ï¼‰æ¥è¿è¡Œå®ƒä»¬ï¼š </p><br><pre> <code class="hljs vala">$ which gjs /usr/bin/gjs $ dpkg --search /usr/bin/gjs gjs: /usr/bin/gjs $ cat gtk.js <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Gtk</span></span> = imports.gi.<span class="hljs-built_in"><span class="hljs-built_in">Gtk</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">Gtk</span></span>.init(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); let win = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Gtk</span></span>.Window(); win.connect(<span class="hljs-string"><span class="hljs-string">"delete-event"</span></span>, () =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">Gtk</span></span>.main_quit(); }); win.show_all(); <span class="hljs-built_in"><span class="hljs-built_in">Gtk</span></span>.main(); $ gjs gtk.js</code> </pre> <br><p> ä¸Šé¢ï¼Œæˆ‘æåˆ°å°†ä»£ç åˆ†æˆæ¨¡å—å¹¶ä»JavascriptåŠ è½½å®ƒä»¬ã€‚ é—®é¢˜å‡ºç°äº†ï¼Œä½†æ˜¯å¦‚ä½•åœ¨æ¨¡å—æœ¬èº«ä¸­ç¡®å®šå®ƒæ˜¯ä½œä¸ºâ€œä¸»â€æ¨¡å—å¯åŠ¨è¿˜æ˜¯ä»å¦ä¸€ä¸ªæ¨¡å—åŠ è½½ï¼Ÿ </p><br><p>  Pythonå…·æœ‰çœŸå®çš„æ„é€ ï¼š </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">"__main__"</span></span>: main()</code> </pre> <br><p> åœ¨Node.jsä¸­-ç±»ä¼¼åœ°ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>.main === <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>) { main(); }</code> </pre> <br><p> æˆ‘æ²¡æœ‰æ‰¾åˆ°æœ‰å…³Gjs / GHçš„æ­£å¼ç­”æ¡ˆï¼Œä½†æ˜¯æˆ‘æƒ³å‡ºäº†ä¸€ç§æŠ€æœ¯ï¼Œå¿…é¡»ä¸è¯»è€…åˆ†äº«ï¼ˆä¸ºä»€ä¹ˆæœ‰äººè¯»â€œ dosyudovaâ€ï¼Ÿå°Šé‡ï¼ï¼‰ã€‚ </p><br><p> å› æ­¤ï¼Œè¿™ä¸ªæ£˜æ‰‹çš„æŠ€å·§æ˜¯åŸºäºå¯¹å½“å‰è°ƒç”¨å †æ ˆçš„åˆ†æï¼Œå¦‚æœå®ƒåŒ…å«2è¡Œæˆ–æ›´å¤šè¡Œï¼Œåˆ™æˆ‘ä»¬ä¸åœ¨mainï¼ˆï¼‰æ¨¡å—ä¸­ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>().stack.split(<span class="hljs-regexp"><span class="hljs-regexp">/\r\n|\r|\n/g</span></span>).filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">line</span></span></span><span class="hljs-function"> =&gt;</span></span> line.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) .length == <span class="hljs-number"><span class="hljs-number">1</span></span> ) { main(); }</code> </pre> <br><h2 id="uborka-za-soboy"> å®¶æ”¿æœåŠ¡ </h2><br><p> æ¯ä¸ªGNOME Shellæ‰©å±•éƒ½å¯ä»¥è®¿é—®æ•´ä¸ªGNOME Shellä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼Œè¦æ˜¾ç¤ºä»æœªè¯»å–çš„é€šçŸ¥æ•°ï¼Œæˆ‘ä»¬å°†å®ƒä»¬å¸¦åˆ°ä½äºä¸Šæ–¹ä¸­å¿ƒçš„<code>Notification Area</code>çš„å®¹å™¨ï¼Œè¯¥ä½ç½®åœ¨å›¾ç‰‡ä¸­ä¸ºæ•°å­—4ï¼ˆå•å‡»å½“å‰æ—¶é—´çš„é“­æ–‡ï¼Œå¯åœ¨ç°å®ç”Ÿæ´»ä¸­å•å‡»ï¼Œè€Œä¸æ˜¯åœ¨æ­¤å¤„å•å‡»ï¼‰ï¼š </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/91e/eec/acc/91eeecaccdc67202335ce4d51d8d90d3.png" alt="ä¸è¦æ‰“æ‰°æ—¶é—´"></p><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> unseenlist = Main.panel.statusArea.dateMenu._messageList._notificationSection._list;</code> </pre> <br><p> æ‚¨å¯ä»¥æŸ¥æ˜æœ‰å¤šå°‘æœªè¯»é€šçŸ¥ï¼Œè®¢é˜…æ·»åŠ å’Œåˆ é™¤é€šçŸ¥çš„äº‹ä»¶ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> number = unseenlist.get_n_children(); unseenlist.connect(<span class="hljs-string"><span class="hljs-string">"actor-added"</span></span>, () =&gt; { log(<span class="hljs-string"><span class="hljs-string">"added!"</span></span>); }); unseenlist.connect(<span class="hljs-string"><span class="hljs-string">"actor-removed"</span></span>, () =&gt; { log(<span class="hljs-string"><span class="hljs-string">"removed!"</span></span>); });</code> </pre> <br><p> å¾ˆå¥½ï¼Œä½†æ˜¯ç”¨æˆ·æœ‰æ—¶å¯ä»¥å†³å®šä¸å†éœ€è¦Xæ‰©å±•åï¼Œç„¶åå•å‡»æŒ‰é’®ä»¥ç¦ç”¨æ‰©å±•åã€‚ å¯¹äºæ‰©å±•ï¼Œè¿™ç­‰æ•ˆäºè°ƒç”¨disableï¼ˆï¼‰å‡½æ•°ï¼Œå¹¶ä¸”åº”å°½ä¸€åˆ‡åŠªåŠ›ä½¿å…³é—­çš„æ‰©å±•ä¸ä¼šç ´åæ­£åœ¨è¿è¡Œçš„GHï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">disable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ dndButton.destroy(); }</code> </pre> <br><p> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé™¤äº†åˆ é™¤æŒ‰é’®æœ¬èº«ä¹‹å¤–ï¼Œæ‚¨è¿˜éœ€è¦å–æ¶ˆè®¢é˜…â€œæ·»åŠ äº†è§’è‰²çš„äº‹ä»¶â€ /â€œå·²åˆ é™¤è§’è‰²çš„äº‹ä»¶â€çš„è®¢é˜…ï¼Œä¾‹å¦‚ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> signal = unseenlist.connect(<span class="hljs-string"><span class="hljs-string">"actor-added"</span></span>, () =&gt; { log(<span class="hljs-string"><span class="hljs-string">"added!"</span></span>); }); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">disable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ dndButton.destroy(); unseenlist.disconnect(signal); }</code> </pre> <br><p> å¦‚æœä¸è¿™æ ·åšï¼Œåˆ™å°†ç»§ç»­åœ¨ç›¸åº”çš„äº‹ä»¶ä¸Šè°ƒç”¨å¤„ç†ç¨‹åºçš„ä»£ç ï¼Œå°è¯•æ›´æ–°å°šä¸å­˜åœ¨çš„èœå•æŒ‰é’®çš„çŠ¶æ€ï¼Œå¹¶ä¸”... GNOME Shellå°†å¼€å§‹å¤±è´¥ã€‚ å¥½å§ï¼Œæ˜¯çš„ï¼Œæˆ‘ä»¬ä¼šåšåˆ°çš„ï¼Œç”¨æˆ·ä¼šå‘èª“ï¼Œè¿™å—çŸ³å¤´å°†é£å‘GNOME Shellå¼€å‘äººå‘˜å’ŒGNOMEã€‚ çœŸå®æƒ…å†µï¼ŒThã€‚ </p><br><p> å› æ­¤GNOME Shell / Gjsæ˜¯Glib / GTKå’ŒJavascriptè¿™ä¸¤ä¸ªç³»ç»Ÿçš„å…±ç”Ÿï¼Œå®ƒä»¬å…·æœ‰ä¸åŒçš„èµ„æºç®¡ç†æ–¹æ³•ã€‚  Glib / GTKéœ€è¦æ˜¾å¼é‡Šæ”¾å…¶èµ„æºï¼ˆæŒ‰é’®ï¼Œè®¡æ—¶å™¨ç­‰ï¼‰ã€‚ å¦‚æœå¯¹è±¡æ˜¯ç”±Javascriptå¼•æ“åˆ›å»ºçš„ï¼Œåˆ™æˆ‘ä»¬å°†ç…§å¸¸è¿è¡Œï¼ˆä¸é‡Šæ”¾ä»»ä½•å†…å®¹ï¼‰ã€‚ </p><br><p> å› æ­¤ï¼Œä¸€æ—¦æˆ‘ä»¬çš„æ‰©å±•ç¨‹åºå‡†å¤‡å¥½å¹¶ä¸”æ²¡æœ‰â€œæµåŠ¨â€ï¼Œæ‚¨å¯ä»¥å®‰å…¨åœ°å°†å…¶å‘å¸ƒåœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://extensions.gnome.orgä¸Š</a> ã€‚ </p><br><h2 id="rezhim-gnomesessionpresencestatusbusy-i-dbus">  GnomeSession.PresenceStatus.BUSYå’ŒDBusæ¨¡å¼ã€‚ </h2><br><p> å¦‚æœæ‚¨è¿˜æ²¡æœ‰å¿˜è®°çš„è¯ï¼Œæˆ‘ä»¬æ­£åœ¨åšâ€œè¯·å‹¿æ‰“æ‰°â€æ‰©å±•ç¨‹åºï¼Œå®ƒå°†å…³é—­å‘ç”¨æˆ·æ˜¾ç¤ºçš„é€šçŸ¥ã€‚ </p><br><p>  GNOMEå·²ç»æœ‰ä¸€ä¸ªæ ‡å¿—è´Ÿè´£æ­¤çŠ¶æ€ã€‚ ç”¨æˆ·ç™»å½•åï¼Œå°†åˆ›å»ºgnome-sessionè¿›ç¨‹ï¼Œè¯¥æ ‡å¿—ä½äºå…¶ä¸­ï¼šè¿™æ˜¯GsmPresencePrivate.statuså±æ€§ï¼Œè¯·å‚é˜…gnome-sessionçš„æºï¼Œgnome-session / gsm-presence.cã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡DBusæ¥å£ï¼ˆä¾‹å¦‚è¿›ç¨‹é—´é€šä¿¡ï¼‰è®¿é—®æ­¤æ ‡å¿—ã€‚ </p><br><p> ä¸ä»…æˆ‘ä»¬ï¼ŒGHæœ¬èº«ä¹Ÿéœ€è¦æœ‰å…³æ­¤æ ‡å¿—çš„ä¿¡æ¯ï¼Œä»¥ä¾¿ä¸æ˜¾ç¤ºé€šçŸ¥ã€‚ åœ¨GHæ¥æºä¸­å¾ˆå®¹æ˜“æ‰¾åˆ°ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._presence = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GnomeSession.Presence(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">proxy, error</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._onStatusChanged(proxy.status); }); ... this._presence.connectSignal(<span class="hljs-string"><span class="hljs-string">'StatusChanged'</span></span>, (proxy, senderName, [status]) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._onStatusChanged(status); });</code> </pre> <br><p> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ_onStatusChangedæ–¹æ³•æ˜¯å“åº”çŠ¶æ€æ›´æ”¹çš„å¤„ç†ç¨‹åºã€‚ æˆ‘ä»¬å°†æ­¤ä»£ç å¤åˆ¶ç»™æˆ‘ä»¬è‡ªå·±ï¼Œè¿›è¡Œä¿®æ”¹-æˆ‘ä»¬æ‰¾å‡ºäº†<sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4ä¸ª</a></sup>é€šçŸ¥ï¼Œæœ‰å£°éŸ³ã€‚ </p><br><h2 id="vyklyuchenievklyuchenie-zvuka"> é™éŸ³/å–æ¶ˆé™éŸ³ </h2><br><p> å¤§å¤šæ•°ç°ä»£Linuxå°å¼æœºå‡ç”±PulseAudioæ§åˆ¶ï¼Œ <del> è‡­åæ˜­è‘—çš„å·¥ä½œ </del> è¯¥ç¨‹åºçš„ä½œè€…æ˜¯è‡­åæ˜­è‘—çš„Lennart Poetteringã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘è¿˜æ²¡æœ‰å†™è¿‡PulseAudioä»£ç ï¼Œæˆ‘å¾ˆé«˜å…´èƒ½æœ‰æœºä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šäº†è§£PulseAudioã€‚ </p><br><p> ç»“æœï¼Œäº‹å®è¯æ˜ï¼Œå¯¹äºé™éŸ³/å–æ¶ˆé™éŸ³ï¼Œä¸€ä¸ª<code>pactl</code>å®ç”¨ç¨‹åºå°±<code>pactl</code> ï¼Œæˆ–è€…åŸºäºå®ƒçš„ä¸‰ä¸ªå‘½ä»¤æ˜¯ï¼š </p><br><ul><li>  â€œ pactl infoâ€ï¼šæ‰¾å‡º<code>default sink</code> -å¦‚æœæœ‰å¤šä¸ªå£°éŸ³è¾“å‡ºï¼Œåˆ™é»˜è®¤å£°éŸ³ </li><li>  â€œ pactl list sinksâ€ï¼šæ‰¾å‡ºç›¸åº”è®¾å¤‡çš„é™éŸ³/å–æ¶ˆé™éŸ³çŠ¶æ€ </li><li>  â€œ pactl set-sink-muteï¼…ï¼ˆdefaultSinkï¼‰sï¼…ï¼ˆisMuteï¼‰sâ€ï¼šç”¨äºé™éŸ³/å–æ¶ˆé™éŸ³ </li></ul><br><p> å› æ­¤ï¼Œæˆ‘ä»¬çš„ä»»åŠ¡æ˜¯è¿è¡Œå‘½â€‹â€‹ä»¤/è¿›ç¨‹ï¼Œè¯»å–å…¶è¾“å‡ºæ ‡å‡†è¾“å‡ºå¹¶å®šæœŸæœç´¢æ‰€éœ€çš„å€¼ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œè¿™æ˜¯ä¸€é¡¹æ ‡å‡†ä»»åŠ¡ã€‚ </p><br><p> åœ¨GNOMEä¸­ï¼Œglibæ ¸å¿ƒåº“è´Ÿè´£åˆ›å»ºæµç¨‹ï¼Œå¹¶ä¸”æœ‰å‡ºè‰²çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡æ¡£</a> ã€‚ å½“ç„¶ï¼Œå¥¹åœ¨Cã€‚è¿˜æœ‰JSã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼ŒGjsè½¯ä»¶åŒ…åœ¨C-APIå’ŒJavascriptä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªæ™ºèƒ½çš„â€œç›´è§‚â€å±‚ã€‚ ä½†æ˜¯æ‚¨ä»ç„¶äº†è§£ï¼Œæ‚¨éœ€è¦ç¤ºä¾‹ï¼Œè€Œä¸”æ‚¨ä¸èƒ½ä¸è¿›è¡Œè°·æ­Œæœç´¢ã€‚ </p><br><p> ç»“æœï¼Œç”±äºå‡ºè‰²çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¦æ—¨ï¼Œ</a>æˆ‘ä»¬å¾—åˆ°äº†æœ‰æ•ˆçš„ä»£ç ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> resList = GLib.spawn_command_line_sync(cmd); <span class="hljs-comment"><span class="hljs-comment">// res = true/false, /   // status = int,    // out/err = ,  stdout/stderr  let [res, out, err, status] = resList; if (res != true || status != 0) { print("not ok!"); } else { // do something useful }</span></span></code> </pre> <br><h2 id="sohranenie-nastroek-v-reestre"> ä¿å­˜è®¾ç½® <del> åœ¨æ³¨å†Œè¡¨ä¸­ </del></h2><br><p> å½“ç„¶ï¼ŒLinuxä¸­æ²¡æœ‰æ³¨å†Œè¡¨ã€‚ åœ¨è¿™é‡Œæ‚¨ä¸æ˜¯Windowsã€‚ æœ‰ä¸€ä¸ªæ›´å¥½çš„åç§°ï¼Œå«åšGSettingsï¼ˆè¿™æ˜¯APIï¼‰ï¼Œå®ƒåé¢éšè—äº†å‡ ä¸ªå®ç°é€‰é¡¹ï¼Œé»˜è®¤æƒ…å†µä¸‹GNOMEä½¿ç”¨Dconfã€‚ è¿™æ˜¯GUIæ¡†æ¶çš„å¤–è§‚ï¼š </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0fe/03c/eca/0fe03ceca6c7fc9338377fc5d0909024.png" alt="dconfç¼–è¾‘å™¨"></p><br><p>  -æœ‰ä»€ä¹ˆæ¯”å°†è®¾ç½®å­˜å‚¨åœ¨çº¯æ–‡æœ¬æ–‡ä»¶ä¸­æ›´å¥½çš„äº†ï¼Ÿ  -è¯¢é—®é‚£äº›æœ‰èƒ¡å­çš„è€Linuxç”¨æˆ·ã€‚  GSettingsçš„ä¸»è¦åŠŸèƒ½æ˜¯æ‚¨å¯ä»¥è½»æ¾è®¢é˜…è®¾ç½®æ›´æ”¹ï¼Œä¾‹å¦‚ï¼š </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Gio = imports.gi.Gio; settings = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Gio.Settings({ <span class="hljs-attr"><span class="hljs-attr">settings_schema</span></span>: schemaObj }); settings.connect(<span class="hljs-string"><span class="hljs-string">"changed::mute-audio"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ log(<span class="hljs-string"><span class="hljs-string">"I see, you changed it!"</span></span>); });</code> </pre> <br><p> åˆ°ç›®å‰ä¸ºæ­¢ï¼Œâ€œè¯·å‹¿æ‰“æ‰°â€ä¸­çš„å”¯ä¸€è®¾ç½®æ˜¯â€œé™éŸ³â€é€‰é¡¹ï¼Œè¯¥é€‰é¡¹å…è®¸ç”¨æˆ·åœ¨ç”¨æˆ·è¦æ±‚çš„â€œå®‰é™æ—¶é—´â€å†…å…³é—­æˆ–å…³é—­å£°éŸ³ã€‚ </p><br><h2 id="i-nemnogo-klassiki-gui-na-gtk"> è¿˜æœ‰ä¸€äº›ç»å…¸çš„GTK GUI </h2><br><p> ä¸ºäº†å‘ç”¨æˆ·å±•ç¤ºæ‰©å±•åçš„è®¾ç½®ï¼ˆè€Œä¸æ˜¯ç”¨è„çˆªå­è¿›å…¥æ³¨å†Œè¡¨ï¼‰ï¼ŒGHæä¾›äº†ç¼–å†™GUIä»£ç å¹¶å°†å…¶æ”¾å…¥prefs.jsæ–‡ä»¶çš„buildPrefsWidgetï¼ˆï¼‰å‡½æ•°çš„åŠŸèƒ½ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨â€œå·²å®‰è£…çš„æ‰©å±•ç¨‹åºâ€åˆ—è¡¨ä¸­æ‰©å±•ç¨‹åºçš„å¯¹é¢<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼Œ</a>æˆ‘ä»¬å°†çœ‹åˆ°ä¸€ä¸ªé™„åŠ æŒ‰é’®â€œé…ç½®æ­¤æ‰©å±•ç¨‹åºâ€ï¼Œå•å‡»æ­¤æŒ‰é’®å°†æ˜¾ç¤ºæˆ‘ä»¬çš„ç¾ä¸½ã€‚ </p><br><p> è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„â€œå…³äºâ€é€‰é¡¹å¡ï¼Œå› ä¸ºä¼—æ‰€å‘¨çŸ¥ï¼Œå¦‚æœæ²¡æœ‰Eboutï¼Œç¨‹åºå°†æ— æ³•å®Œæˆã€‚ </p><br><p> ä¸€èˆ¬è€Œè¨€ï¼Œè¦æ„å»ºç»å…¸çš„å›¾å½¢ç•Œé¢ï¼ŒGTKæ‹¥æœ‰å„ç§æ„å»ºåŸºå—å’Œ<code></code> ï¼Œæ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>æŸ¥çœ‹å…¶æ•°é‡å’Œè´¨é‡ã€‚ </p><br><p> æˆ‘ä»¬å°†åªä½¿ç”¨å…¶ä¸­ä¸€äº›ï¼š </p><br><ul><li>  Gtk.Notebookæ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œå°±åƒåœ¨æµè§ˆå™¨ä¸­ä¸€æ · </li><li>  Gtk.VBoxæ˜¯ä¸€ä¸ªç”¨äºå‚ç›´æ„é€ å°éƒ¨ä»¶åˆ—è¡¨çš„å®¹å™¨ </li><li>  Gtk.Labelæ˜¯åŸºæœ¬å…ƒç´ ï¼Œæ˜¯é¢˜å­—ï¼Œèƒ½å¤Ÿæ ¼å¼åŒ–HTML </li></ul><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildPrefsWidget</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    Gtk.Notebook    GUI let notebook = new Gtk.Notebook(); ... //  About,    VBox c   10 , //   margin/padding   let aboutBox = new Gtk.VBox({ border_width: 10 }); //     About notebook.append_page( aboutBox, new Gtk.Label({label: "About"}), ); //        , //      ,    (expand) aboutBox.pack_start( new Gtk.Label({ label: "&lt;b&gt;Do Not Disturb Time&lt;/b&gt;", use_markup: true, }), true, // expand true, // fill 0, ); ... notebook.show_all(); return notebook; }</span></span></code> </pre> <br><p> æœ€ç»ˆå±å¹•æˆªå›¾ï¼š </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f87/554/787/f8755478763d159cbb9dfc1518881e60.png"></p><br><h2 id="dopolnitelno"> é€‰é… </h2><br><div class="spoiler">  <b class="spoiler_title">1.æ“ä½œæ–¹å¼ï¼šæ”¯æŒä¸æ“ä½œ</b> <div class="spoiler_text"><p> åœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œç¨‹åºå‘˜çš„å·¥ä½œæ¶‰åŠä¸¤ç§æ¨¡å¼ï¼š <br>  1ï¼‰åœ¨æ”¯æŒæ¨¡å¼ä¸‹ï¼Œå½“æ‚¨éœ€è¦å¿«é€Ÿå“åº”äº‹ä»¶æ—¶-é‚®ä»¶ï¼ŒSlackï¼ŒSkypeç­‰ <br>  2ï¼‰åœ¨æ“ä½œæ¨¡å¼ä¸‹ï¼Œè‡³å…³é‡è¦çš„æ˜¯å°†é€šçŸ¥å‡å°‘è‡³å°‘20åˆ†é’Ÿï¼Œå¦åˆ™ç„¦ç‚¹å°†ä¸¢å¤±å¹¶ä¸”æœ€ç»ˆçš„åŠ³åŠ¨ç”Ÿäº§ç‡å¯å¿½ç•¥ä¸è®¡ã€‚ ä¸ºæ­¤ï¼Œè¯·å‹¿æ‰“æ‰°æ¨¡å¼å¾ˆæœ‰ç”¨ã€‚ </p></div></div><br><div class="spoiler">  <b class="spoiler_title">2.å¦‚ä½•å…³é—­å£°éŸ³</b> <div class="spoiler_text"><p> ä¼¼ä¹ä¸€ä¸ªå®Œå…¨é™éŸ³ï¼Œå¤ªå¤šçš„é™éŸ³ã€‚ å®é™…ä¸Šï¼Œå®é™…ä¸Šï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œæ‚¨å¸Œæœ›åœ¨â€œè¯·å‹¿æ‰“æ‰°â€æ¨¡å¼ä¸‹å¬åˆ°Slack / Skypeï¼Œä½†å…¶ä½™å£°éŸ³ï¼ˆçœŸå®é€šçŸ¥ï¼‰å´æ²¡æœ‰ã€‚ ä½†æ˜¯ä¸ºæ­¤ï¼Œå®ƒä»¬éœ€è¦ä»¥æŸç§æ–¹å¼åŠ ä»¥åŒºåˆ†ã€‚ å½“ç„¶ï¼Œæ‚¨å¯ä»¥åˆ¶ä½œä¸€ä¸ªä¸“é—¨ç”¨äºé€šçŸ¥çš„å£°éŸ³APIï¼ˆå¹¶ä¸”è¯¥APIå·²ç»å­˜åœ¨ï¼‰ï¼Œåªæœ‰æ€»æœ‰ä¸€ä¸ªä¸ä½¿ç”¨æ­¤ç±»åŠŸèƒ½çš„ç¨‹åº/ç¨‹åºå‘˜ã€‚  Mailspringé‚®ä»¶ç¨‹åºå°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼šå®ƒåªæ˜¯é€šè¿‡<code>audio</code>æ ‡ç­¾æ’­æ”¾å£°éŸ³ï¼Œè€Œæ— æ³•ä»¥ä»»ä½•æ–¹å¼å°†å®ƒä»¬ä¸Slacké€šè¯ä¸­çš„è¯­éŸ³åŒºåˆ†å¼€ã€‚ </p></div></div><br><div class="spoiler">  <b class="spoiler_title">3. PanelMenu.Button</b> <div class="spoiler_text"><p>  PanelMenu.Button-è¿™æ˜¯é¢æ¿+å¼¹å‡ºèœå•ä¸­çš„å®é™…æŒ‰é’®ï¼Œæ‚¨å¯ä»¥è‡ªå·±å¼„æ¸…æ¥šå®ƒå¹¶ä»å¤´å¼€å§‹åˆ›å»ºï¼Œ <em>ä¼¤å£å¤„çš„å®¶ä¼™</em>éƒ½ä¼šæ¬£èµå®ƒä»¬ï¼ æˆ‘çš„ç›®æ ‡æ˜¯å¿«é€Ÿå–å¾—ç»“æœï¼Œå› æ­¤æˆ‘å¤åˆ¶äº†éå®˜æ–¹æ–‡æ¡£ä¸­çš„ä»£ç ã€‚ </p></div></div><br><div class="spoiler">  <b class="spoiler_title">4. SetStatusRemoteï¼ˆï¼‰</b> <div class="spoiler_text"><p> å®é™…ä¸Šä½¿ç”¨SetStatusRemoteï¼ˆï¼‰å¯åŠ¨æ¨¡å¼æ›´æ”¹ã€‚ </p></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN428187/">https://habr.com/ru/post/zh-CN428187/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN428175/index.html">ç‹¡çŒ¾çš„å‰ç¼€æ ‘Cçš„å®ç°</a></li>
<li><a href="../zh-CN428177/index.html">é‚£ä¹ˆï¼Œæ±‚èŒ/ ITå·¥ä½œè€…æ€ä¹ˆäº†ï¼Ÿ</a></li>
<li><a href="../zh-CN428179/index.html">åœ¨æ—¥æœ¬çš„ä¸€æ¬¡æ‹å–ä¸­ï¼ŒåŸå‹æœºWiiæ§åˆ¶å™¨æ˜¯ä¸ºGameCubeå¼€å‘çš„</a></li>
<li><a href="../zh-CN428181/index.html">é“å¾·æœºå™¨ï¼šæ— æƒ…è¿˜æ˜¯æ¯«æ— æ„ä¹‰ï¼Ÿ</a></li>
<li><a href="../zh-CN428183/index.html">åœ¨TensorFlowä¸Šä¼˜åŒ–ç¥ç»ç½‘ç»œçš„Levenberg-Marquardtç®—æ³•çš„å®ç°</a></li>
<li><a href="../zh-CN428189/index.html">è°æ˜¯åœ£éª‘å£«ï¼Ÿ</a></li>
<li><a href="../zh-CN428191/index.html">æˆ‘ä»¬åº”è¯¥å¦‚ä½•å®‰æ’é»‘å®¢é©¬æ‹‰æ¾ï¼Œæˆ–è€…æˆ‘ä»¬å¦‚ä½•è¿›è¡Œå†…éƒ¨é»‘å®¢é©¬æ‹‰æ¾ï¼Ÿ</a></li>
<li><a href="../zh-CN428193/index.html">å…³äºæ—…æ¸¸</a></li>
<li><a href="../zh-CN428197/index.html">æœ‰æ•ˆçš„ä¸ªäººç†è´¢ã€‚ 1çº§</a></li>
<li><a href="../zh-CN428201/index.html">JavaScriptä¸­çš„ç—£æ´</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>