<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉโ๐ฉโ๐งโ๐ง ๐ค๐ฝ ๐ Postgres Pro Standard 12.1 Release ๐ฅจ ๐จ๐ป ๐ฉ๐พโ๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชู ุงุฎุชุฑุงุน Postgres Pro Standard DBMS ูุชูุฏูู ููุชุฌุงุช ุงูุชุทููุฑ ุงูุฎุงุตุฉ ุจูุง ูููุณุชุฎุฏููู ุจุดูู ุฃุณุฑุน ููุง ูููููุง ุงูููุงู ุจู ูู ุฎูุงู PostgreSQL. ุชูู ุงูููุฒุงุช ุงูุชู ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Postgres Pro Standard 12.1 Release</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/postgrespro/blog/479618/" style=";text-align:right;direction:rtl">  ุชู ุงุฎุชุฑุงุน Postgres Pro Standard DBMS ูุชูุฏูู ููุชุฌุงุช ุงูุชุทููุฑ ุงูุฎุงุตุฉ ุจูุง ูููุณุชุฎุฏููู ุจุดูู ุฃุณุฑุน ููุง ูููููุง ุงูููุงู ุจู ูู ุฎูุงู PostgreSQL.  ุชูู ุงูููุฒุงุช ุงูุชู ูู ูุชู ุชุถููููุง ุจุนุฏ ูู PostgreSQL ุ ูููููุง ูู ูุณุงุฑ ุซุงุจุช ููุงู ุ ูุญู ูุฏุฑุฌ ูู Postgres Pro Standard.  ุฃูุถูุง ุ ูุชุถูู Postgres Pro Standard ุจุนุถ ุงูุฅุถุงูุงุช ุงูุชู ูุทูุจูุง ุนููุงุคูุง ุ ูููููุง ุบูุฑ ูุชููุฑุฉ ูู ุชูุฒูุน PostgreSQL ุงูููุงุณู. <br><br>  ูู ุจุนุถ ุงูุฃุญูุงู ุ ุชููู ููุงู ุงุณุชุซูุงุกุงุช ูู Postgres Pro Standard ุ ุจูุงุกู ุนูู ุทูุจ ุงููุณุชุฎุฏููู ููุฑุถุงูู ุ ูุชู ุชุถููู ููุฒุงุช ุฃูู ุชุงููุฉ ุ ููู ูู ููุงู ุฌูุฏ ููุท ูู Postgres Pro Enterprise.  ุนูู ูุฌู ุงูุฎุตูุต ุ ูู PTRACK ุ ุญูู ูุฐุง ุงูููุถูุน ุฃุฏูุงู. <br><br>  ููุณ ูู ุดูุก ุ ูููู ุชู ุชุทููุฑ ุญุตุฉ ุนุงุฏูุฉ ูู ุงูุงูุชุฏุงุฏุงุช ูุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ ุงูุฅุถุงููุฉ ุงููุถููุฉ ูู Standard ุจูุงุณุทุฉ Postgres Professional.  ุชู ุงุฎุชุฑุงุน ูุชูููุฐ ุฌููุน ุจูุน Postgres Pro ุจุฌููุฏูุง ุงูุฎุงุตุฉ.  ููุจุฏุฃ ุจุงูุชุญุณููุงุช ุงูุชู ุชุชุทูุจ ุงูุชุฏุฎู ูู ูุดุบู ูุงุนุฏุฉ ุงูุจูุงูุงุช. <br><a name="habracut"></a><br>  ูุฎุชูู Postgres Pro Standard ุนู PostgreSQL ุนูู ูุณุชูููู: ูุฌููุนุฉ ุงูุงูุชุฏุงุฏุงุช ูุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ ุงูููุฌูุฏุฉ ูู ุงูุชุฌููุน ุ ูุงูููุงุฉ ููุณูุง.  ุชู ุชุทุจูู ุจุนุถ ุงูุชุตุญูุญุงุช ุงููููุฏุฉ ุนูู ุงูููุงุฉ ุงูุชู ุชุนูู ุนูู ุชุญุณูู ุงูุฃุฏุงุก (ุนูู ุณุจูู ุงููุซุงู ุ ูุงุดู ููู ุบูุฑ ูุฑุงูู) ูุงูุชุตุญูุญุงุช ุงูุชู ุชุฒูุฏ ูู ููุงุกุฉ ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ ูุงูุฅุถุงูุงุช (ุนูู ุณุจูู ุงููุซุงู ุ ูุฌุนู pg_probackup ุชุนูู ุจูุงูู ููุชูุง ุ ูุชู ุชุทุจูู ุชุตุญูุญ PTRACK 2.0).  ูุชู ุชูููู ุงูุงุฎุชูุงูุงุช ุจูู ุงูุฅุตุฏุงุฑ ุงูุฃุณุงุณู ูู Standard ู PostgreSQL ูุฃูุตู ุชูุงูู ูููู.  ุฏุนูุง ูููู ุฃู ุงูุชุฏุงุฏ pg_pathman ูู ุฌุฒุก ูู Standard ุ ูููู ูููู ุชูุฒููู ูู github ุ ุงูุฐู ุชู ุฅูุดุงุคู ูุชุซุจูุชู ุนูู ูุงููููุง PostgreSQL ุ ูู ุชููู ููุงู ูุดุงูู ูู ุงูุชูุงูู. <br>  ููุจุฏุฃ ุจุงูุชุบููุฑุงุช ูู ุงูููุงุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุญูู ูู ุฅุตุฏุงุฑุงุช ูุญุฏุฉ ุงูุนูุงูุฉ ุงููุฑูุฒุฉ </h3><br>  ูู PostgreSQL ุ ุจุดูู ุงูุชุฑุงุถู ุ ูุชู ุงุณุชุฎุฏุงููุง ูููุงุฑูุฉ ุงูุณูุงุณู ุจููุงุฑูุชูุง ุจุงุณุชุฎุฏุงู ููุชุจุฉ C ุงูููุงุณูุฉ ุ ูููู ููุงู ุฃูุถูุง ุฅููุงููุฉ ุงุณุชุฎุฏุงู ููุชุจุฉ <a href="http://site.icu-project.org/">ICU</a> ุงูุชู ุทูุฑุชูุง IBM ูููุณ ุงูุบุฑุถ.  ุชุนุฏ ูุฐู ุงูููุชุจุฉ ุฐุงุช ูููุฉ ููุง ูู ุงูููุงู ุงูุฃูู ูุฃููุง ุชููุฑ ูุฑุฒูุง ูุณุชูููุง ุนู ุงููุธุงู ุงูุฃุณุงุณู.  ููุฐุง ุงูุณุจุจ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุชู ุงุณุชุฎุฏุงูู ูู 1C ุ ูุชุนูู PostgreSQL "ููุชุฌููุนุงุช ุงููุฑุฏูุฉ" ูุน ูุฐู ุงูููุชุจุฉ ููุชุฑุฉ ุทูููุฉ. <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชููู ููุงุฑูุงุช ุงูุณูุณูุฉ ูู ุฎูุงู ูุญุฏุฉ ุงูุนูุงูุฉ ุงููุฑูุฒุฉ ูู ุจุนุถ ุงูุฃุญูุงู ุฃุณุฑุน ูู ุฎูุงู libc ุ ูุนุฏุฏ ุงูุฃุญุฑู ุงููุนุฑููุฉ ููุง ุฃูุจุฑ.  ุจุดูู ุนุงู ุ ููุชุจุฉ ูููุฏุฉ.  ุชุนูู Postgres Pro Standard ูุนูุง ููุฐ ุงูุฅุตุฏุงุฑ ุงูุฃูู (9.5).  ูู PostgreSQL ุ ุฃุตุจุญ ุงูุนูู ูุน ICU ูููููุง ููุฐ ุงูุฅุตุฏุงุฑ 10. <br><br>  ุงูููุชุจุฉ ูููุฏุฉ ุ ููู ุนููู ุฃู ุชุถุน ูู ุงุนุชุจุงุฑู ุจุนุถ ุญุงูุงุช ุงูุทูุงุฑุฆ.  ูููุชุฑุถ ุฃู ูุณุชุฎุฏู ูุธุงู ุฅุฏุงุฑุฉ ููุงุนุฏ ุงูุจูุงูุงุช ูุฏ ูุฑุฑ ุชุฑููุฉ ูุธุงู ุงูุชุดุบูู.  ุฌูุจุง ุฅูู ุฌูุจ ูุน ูุธุงู ุงูุชุดุบูู ุ ูููู ุฃูุถุง ุชุฑููุฉ ููุชุจุฉ ูุญุฏุฉ ุงูุนูุงูุฉ ุงููุฑูุฒุฉ ุ ูุณูู ูุชุบูุฑ ุชุฑุชูุจ ุงููููุงุช ูู ุงููุฑุฒ.  ุจุนุฏ ุฐูู ุ ุณุชุตุจุญ ุฌููุน ุงูููุงุฑุณ ุบูุฑ ูุงุจูุฉ ููุงุณุชุฎุฏุงู ุนูู ุงูููุฑ: ูุชุงุฆุฌ ุงูุจุญุซ ูู ุงูููุฑุณ ุชุนุทู ูุชุงุฆุฌ ุบูุฑ ุตุญูุญุฉ.  ูู ูุซู ูุฐู ุงูุญุงูุงุช ุ ูุงูุช ุงููุงุนุฏุฉ ุฃู ุฅุตุฏุงุฑ ูุญุฏุฉ ุงูุนูุงูุฉ ุงููุฑูุฒุฉ ูุฏ ุชุบูุฑ ูุชููู. <br><br>  ููู ูุฐุง ูุฑุงุฑ ุตุนุจ ููุบุงูุฉ.  ุจุนุฏ ููุงูุดุงุช ููุณุญ ููุนููุงุก ุ ุชูุฑุฑ ุชุฎููู ุงูุณููู.  ุงูุขู ููุท ูุชู ูุญุต ุฅุตุฏุงุฑุงุช COLLATION (ููุงุนุฏ ุงููุฑุฒ).  ูู ุญุงูุฉ ุชุบููุฑ ุฅุตุฏุงุฑุงุช COLLATION ุงููุณุชุฎุฏูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ุชุตุฏุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุญุฐูุฑุงู ุนูุฏ ุจุฏุก ุชุดุบูู DBMS ุ ููููุง ูุง ุชุชููู.  ููุง ุฃูู ูุฐูุฑ ุงููุณุชุฎุฏู ูู ุจุฏุงูุฉ ูู ุฌูุณุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุงุณุชูุงุฏุฉ ุงููุซูู ูู ุงูุฃููุงู ุ ูุตูุงุฏูู ู GROUP BY </h3><br>  ูููู ุฃู ุชุถุนู ุขููุฉ ุงููุดู ุนู ุญุงูุฉ ุชููู ุชุงู ุงูุฃุฏุงุก.  ูู ูุนุฏ ุจุงูุฅููุงู ุงุณุชุฎุฏุงู ุงููุนูุงุฑ ุงูููุงุณู: ูุณูุญ ุงูุชุตุญูุญ kernel ุจุงูุนูู ุฏูู ุงููุจุญ.  ุจุนุฏ ุฅุฏุฎุงู ุชุญุณููุงุช ูุจูุฑุฉ ุนูู ุขููุฉ ุงูุชุญูู ุ ูุง ุชุธูุฑ ูุฐู ุงููุดููุงุช ุฅูุง ุนูู ุนุฏุฏ ูุจูุฑ ูู ุงูููู ูุงูุงุชุตุงูุงุช. <br><br>  ุชุญุณูู ุชูุฏูุฑ ุนุฏุฏ ูุชุงุฆุฌ ุงููุตูุงุช ูู ูุฌูุฏ ูุคุดุฑุงุช ููุงุณุจุฉ. <br><br>  ููููู ุงูุขู ุงุณุชุฎุฏุงู ููุงุฑุณ ููุงุณุจุฉ ูุชุฌููุน ููุฑุฒ ุงูุญููู.  ุชู ุชุถููู ูุฐู ุงูููุฒุฉ ูุฃูู ูุฑุฉ ูู ุงููุนูุงุฑ 11.1.1 ู Enterprise 11.2.1.  ูุฏููุง ูุนูุงุฑ 12 ูุฏููุง ุฃูุถุง ูุงุญุฏุฉ. <br><br>  ูุฏู Fedor Sigaev ุ CTO ูู Postgres Professional ุ ูุฐู ุงูุชุตุญูุญุงุช ุงููููุฏุฉ ูููุฌุชูุน ุ ููุชู ุงููุธุฑ ูููุง ุ ููุฃูู ุฃู ูุชู ุชุถููููุง ูู ุงูุฅุตุฏุงุฑ PG 13. <br><br>  ููุถุญ ุชุญุณูู ุนูููุฉ GROUP BY ุจุฃูุซูุฉ: ููู ูุงุถุญุฉ ููุงุจูุฉ ููุชูุฑุงุฑ ุจุณูููุฉ. <br><br>  ุงููุฏู ูู ูุฐุง ุงูุชุตุญูุญ ูู ุฃู ุจูุณุชุฌุฑุณ ูู ููู ุจุชุญุณูู ุชุฑุชูุจ ุงูุญููู ุงููุฏุฑุฌุฉ ูู GROUP BY.  ูููุช ุงูุชูููุฐ ูุนุชูุฏ ุนูู ุชุณูุณู ุงูุชุฌููุน (ูุน ููุณ ูุชูุฌุฉ ุงูุงุณุชุนูุงู).  ููุงู ุชูุงุตูู ูู <a href="https://postgrespro.ru/list/thread-id/2388982">ุงูููุงูุดุฉ</a> ุนูู ุงููุงุฆูุฉ ุงูุจุฑูุฏูุฉ <a href="https://postgrespro.ru/list/pgsql-hackers">ูููุชุณูููู</a> . <br><br>  ุฅุฐุง ูุงูุช ุงููููุฉ ูู ุงูุนููุฏ ุงูุฃูู ุงููุฑุงุฏ ูุนุงูุฌุชูุง ูุฑูุฏุฉ ุ ููุง ูุฌุจ ููุงุฑูุฉ ุฃู ุดูุก ุขุฎุฑ.  ุฅุฐุง ุจุฏุฃุช ูู ุนููุฏ ุขุฎุฑ ุ ูุนููู ุฃู ุชูุงุฑู. <br><br><br>  ุงููุตูู ุฅูู ุงูุงุฎุชุจุงุฑ: <br><br><pre style=";text-align:right;direction:rtl"><code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> btg; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> id, i/<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> p, format(<span class="hljs-string"><span class="hljs-string">'%60s'</span></span>, i%<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> v <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> btg <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> generate_series(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1000000</span></span>) i;</code> </pre> <br><br>  ูู ุญูู ุงููุต v ุ ูุชู ุฅูุดุงุก 60 ูุณุงูุฉ ุ ูุชุจูุนุฉ ุจุงูุฃุฑูุงู 0 ุฃู 1. ุชุจุฏู ุงูุฅุฏุฎุงูุงุช ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> btg <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> id <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>; id | p | v <span class="hljs-comment"><span class="hljs-comment">---------+--------+-------------------------------------------------------------- 1000000 | 500000 | 0 999999 | 499999 | 1 999998 | 499999 | 0 (3 rows)</span></span></code> </pre> <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">VACUUM</span></span> btg; <span class="hljs-keyword"><span class="hljs-keyword">ANALYSE</span></span> btg; <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> enable_hashagg=<span class="hljs-keyword"><span class="hljs-keyword">off</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> max_parallel_workers= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> max_parallel_workers_per_gather = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br><br>  ูุฌููุนุฉ ุงููุชุงุฆุฌ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">VACUUM</span></span> btg; <span class="hljs-keyword"><span class="hljs-keyword">EXPLAIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ANALYZE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> count(*) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> btg <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> p, v;</code> </pre> <br><br>  ุฎุทุฉ ุจูุณุชุฌุฑุณ <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"> QUERY PLAN <span class="hljs-comment"><span class="hljs-comment">------------------------------------------------------ GroupAggregate (cost=204036.84..218981.05 rows=494421 width=73) (actual time=843.999..1194.985 rows=1000000 loops=1) Group Key: p, v -&gt; Sort (cost=204036.84..206536.84 rows=1000000 width=65) (actual time=843.990..946.769 rows=1000000 loops=1) Sort Key: p, v Sort Method: external sort Disk: 73320kB -&gt; Seq Scan on btg (cost=0.00..22346.00 rows=1000000 width=65) (actual time=0.158..151.645 rows=1000000 loops=1) Planning time: 0.317 ms Execution time: 1250.086 ms (8 rows)</span></span></code> </pre> <br><br>  ุงูุขู ุจุงูุชุฑุชูุจ ุงูุนูุณู: v ุ ูุนูุฏูุง ููุท p: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">EXPLAIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ANALYZE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> count(*) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> btg <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> v, p; QUERY PLAN <span class="hljs-comment"><span class="hljs-comment">------------------------------------------------ GroupAggregate (cost=204036.84..218981.05 rows=494421 width=73) (actual time=2552.477..3353.890 rows=1000000 loops=1) Group Key: v, p -&gt; Sort (cost=204036.84..206536.84 rows=1000000 width=65) (actual time=2552.469..3111.516 rows=1000000 loops=1) Sort Key: v, p Sort Method: external merge Disk: 76264kB -&gt; Seq Scan on btg (cost=0.00..22346.00 rows=1000000 width=65) (actual time=0.082..126.578 rows=1000000 loops=1) Planning time: 0.060 ms Execution time: 3411.048 ms (8 rows)</span></span></code> </pre> <br><br>  ุงุชุถุญ ุฃู ุงูุนูุณ ูู ุฃุจุทุฃ ุจุดูู ููุญูุธ.  ูุฐูู ูุฃู ุงูุญูู ุงูุฃูู <code>v</code> ุชุญูููู ุจูุงุฑู ุตุบูุฑ ูู ุงูููู.  ูุฌุจ ุนููู ุฅุฌุฑุงุก ุงููุซูุฑ ูู ุงูุงุฎุชุจุงุฑุงุช ุนูู ุงูุญููู ุงููุชุจููุฉ (ููุง - ุงูุญูู p). <br><br>  ููุฑู ููู ุณูุนูู ููุณ ุงูุงุณุชุนูุงู ูุน ุชุตุญูุญ ูุญุฏุฏ ุงูุชุฑุชูุจ ุงูุฃูุซู ููุนุงูุฌุฉ ุงูุฃุนูุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"> QUERY PLAN <span class="hljs-comment"><span class="hljs-comment">---------------------------------------------------------------- GroupAggregate (cost=237400.11..252417.09 rows=501698 width=73) (actual time=415.541..703.647 rows=1000000 loops=1) Group Key: p, v -&gt; Sort (cost=237400.11..239900.11 rows=1000000 width=65) (actual time=415.533..507.785 rows=1000000 loops=1) Sort Key: p, v Sort Method: external merge Disk: 73488kB -&gt; Seq Scan on btg (cost=0.00..22346.00 rows=1000000 width=65) (actual time=0.059..139.587 rows=1000000 loops=1) Planning Time: 0.123 ms Execution Time: 742.118 ms (8 rows)</span></span></code> </pre> <br><br>  ููู ุชุฑุชูุจ ุนูุณู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"> QUERY PLAN <span class="hljs-comment"><span class="hljs-comment">------------------------------------------------------ GroupAggregate (cost=237400.11..252417.09 rows=501698 width=73) (actual time=414.322..714.593 rows=1000000 loops=1) Group Key: p, v -&gt; Sort (cost=237400.11..239900.11 rows=1000000 width=65) (actual time=414.312..517.707 rows=1000000 loops=1) Sort Key: p, v Sort Method: external merge Disk: 76384kB -&gt; Seq Scan on btg (cost=0.00..22346.00 rows=1000000 width=65) (actual time=0.071..129.835 rows=1000000 loops=1) Planning Time: 0.140 ms Execution Time: 753.031 ms (8 rows)</span></span></code> </pre> <br><br>  ุชููู ุงูุฎุทุฉ ุฃูู ููุฌุฏ ูููุงู ุฃูุฑ ุงููุนุงูุฌุฉ ููุณู: Sort Key: pุ v.  ูููุง ูุฐูู ุ ูุฅู ุงูููุช ูู ููุณู ุชูุฑูุจุง.  ูุงุฑู ุงูุขู ูุง ูุญุฏุซ ุนูุฏ ุงุณุชุฎุฏุงู ุงูููุฑุณ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INDEX</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> btg(p, v); <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> enable_seqscan=<span class="hljs-keyword"><span class="hljs-keyword">off</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> enable_bitmapscan=<span class="hljs-keyword"><span class="hljs-keyword">off</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">VACUUM</span></span> btg; <span class="hljs-keyword"><span class="hljs-keyword">EXPLAIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ANALYZE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> count(*) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> btg <span class="hljs-keyword"><span class="hljs-keyword">GROUP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> v, p ;</code> </pre> <br><br>  ูู ุจูุณุชุฌุฑุณ <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"> QUERY PLAN <span class="hljs-comment"><span class="hljs-comment">--------------------------------------------------------- GroupAggregate (cost=0.55..74660.04 rows=494408 width=73) (actual time=0.013..391.317 rows=1000000 loops=1) Group Key: p, v -&gt; Index Only Scan using btg_p_v_idx on btg (cost=0.55..62216.16 rows=999974 width=65) (actual time=0.009..120.298 rows=1000000 loops=1) Heap Fetches: 0 Planning time: 0.078 ms Execution time: 442.923 ms (6 rows)</span></span></code> </pre> <br><br>  ููู ุชุฑุชูุจ ุนูุณู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"> QUERY PLAN <span class="hljs-comment"><span class="hljs-comment">------------------------------------------------------ GroupAggregate (cost=243904.22..258848.04 rows=494408 width=73) (actual time=2558.485..3352.240 rows=1000000 loops=1) Group Key: v, p -&gt; Sort (cost=243904.22..246404.16 rows=999974 width=65) (actual time=2558.478..3110.242 rows=1000000 loops=1) Sort Key: v, p Sort Method: external merge Disk: 76264kB -&gt; Index Only Scan using btg_p_v_idx on btg (cost=0.55..62216.16 rows=999974 width=65) (actual time=0.011..133.563 rows=1000000 loops=1) Heap Fetches: 0 Planning time: 0.093 ms Execution time: 3409.335 ms (9 rows)</span></span></code> </pre> <br><br>  ุงูุขู ูู ููุงุณู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"> QUERY PLAN <span class="hljs-comment"><span class="hljs-comment">-------------------------------------------------------------- GroupAggregate (cost=0.55..74196.82 rows=501685 width=73) (actual time=0.150..412.174 rows=1000000 loops=1) Group Key: p, v -&gt; Index Only Scan using btg_p_v_idx on btg (cost=0.55..61680.16 rows=999974 width=65) (actual time=0.134..149.669 rows=1000000 loops=1) Heap Fetches: 0 Planning Time: 0.175 ms Execution Time: 448.635 ms (6 rows)</span></span></code> </pre> <br><br>  ููู ุชุฑุชูุจ ุนูุณู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"> QUERY PLAN <span class="hljs-comment"><span class="hljs-comment">------------------------------------------------------------- GroupAggregate (cost=0.55..74196.82 rows=501685 width=73) (actual time=0.014..307.258 rows=1000000 loops=1) Group Key: p, v -&gt; Index Only Scan using btg_p_v_idx on btg (cost=0.55..61680.16 rows=999974 width=65) (actual time=0.008..89.204 rows=1000000 loops=1) Heap Fetches: 0 Planning Time: 0.054 ms Execution Time: 337.766 ms (6 rows)</span></span></code> </pre> <br><br>  ุงูููุช ูู ููุณู ูุฑุฉ ุฃุฎุฑู ุ ููู ุฃูุฑ ุทุจูุนู: ูู ุงููุงูุน ุ ุงูุฅุฌุฑุงุกุงุช ูู ููุณูุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุงุณุชุจุฏุงู ุจุงูุช ูุงุฑุบุฉ ุนูุฏ ุงูุชูููุฏ </h3><br>  ูุง ููุจู Postgres Pro ุตูุฑ ุจุงูุช (0x00) ูู ุงูุจูุงูุงุช ุ ูุฐูู ูุน COPY FROM ูุฌุจ ุงุณุชุจุฏุงููุง ุ <a href="https://postgrespro.ru/docs/postgrespro/12/runtime-config-compatible">ูุฅูุง ุณูููู ููุงู ุฎุทุฃ</a> .  ูุฐู ูู ุงููุดููุฉ ุงูุญููููุฉ ุงูุชู ูุงุฌููุง ุงูุนููู ุฃุซูุงุก ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ูู ููู CSV.  ุงูุญู ุงูุฎุงุต ุจู ูู ุงุณุชุจุฏุงู ุงูุจุงูุชุงุช ุงููุงุฑุบุฉ ุจุญุฑู ASCII ุงููุญุฏุฏ.  ูุฌุจ ุฃู ูููู ูุฎุชูููุง ุนู ุงูุฃุญุฑู QUOTE ู DELIMITER ุงููุณุชุฎุฏูุฉ ุนูุฏ ุชูููุฐ COPY FROMุ  ุฎูุงู ุฐูู ุ ูุฏ ุชููู ุงููุชูุฌุฉ ุบูุฑ ูุชููุนุฉ.  ุจุดูู ุงูุชุฑุงุถู ุ ูููุฉ ุงููุชุบูุฑ nul_byte_replacement_on_import (ุงูุณูุณูุฉ) '\ 0' ุ ุฃู ุ ูุง ูุชู ุฅุฌุฑุงุก ุงุณุชุจุฏุงู. <br><br><h3 style=";text-align:right;direction:rtl">  WaitLSN </h3><br>  LSN ูู <a href="https://postgrespro.ru/docs/postgrespro/12/sql-waitlsn">ุฑูู ูุชุณูุณู ูู ุงูุณุฌู</a> ุ ุฃู ูุคุดุฑ ุฅูู ููุถุน ูู WAL (ุฑูู ุชุณูุณู ุงูุณุฌู).  ููุชุธุฑ ุงูุฃูุฑ WAITLSN ุชุดุบูู LSN ุงููุญุฏุฏ.  ุฅุฐุง ูุงู ุงูุชุทุจูู ูุนูู ูุน ูู ูู ุงูุฑุฆูุณู ูุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงูุชุฃูุฏ ูู ุฃููุง ูุชุฒุงููุฉ ูู ููุช ูุขุฎุฑ.  WAITLSN ูู ุขููุฉ interprocess ูู PostgrePro ุชุชุญูู ูู ุงููุฒุงููุฉ ุฃุซูุงุก <a href="https://postgrespro.ru/docs/postgrespro/12/runtime-config-replication">ุงููุณุฎ ุงููุชูุงุซู ุงููุชุฒุงูู</a> .  ุงูุชุฑุงุถููุง ุ ูููู ููุช ุงูุงูุชุธุงุฑ ุบูุฑ ูุญุฏูุฏ.  ููููู ุฅุญุจุงุท ุงูุงูุชุธุงุฑ ุจุงูุถุบุท ุนูู Ctrl + C ุฃู ุฅููุงู ุฎุงุฏู postgres.  ููููู ุฃูุถูุง ุชุนููู ุงููููุฉ ุนู ุทุฑูู ุฅุถุงูุฉ ุชูููุญ TIMEOUT ุ ุฃู ุงูุชุญูู ูู ุญุงูุฉ LSN ุงููุฏู ุฏูู ุงูุงูุชุธุงุฑ ุจุงุณุชุฎุฏุงู ุชูููุญ NOWAIT. <br>  ุงูุชุฑุถ ุฃู ุฃุญุฏ ุงูุชุทุจููุงุช ูููู ุจุฅุฌุฑุงุก ูุนูู ุ ููุชููู ุฑูู LSN ูู DBMS ุนูู ุงูุฑุฆูุณู ููุฑูุฏ ุงูุขู ุงูุชุฃูุฏ ูู ุฃู ุงูุฅุฌุฑุงุกุงุช ุงูููุฌูุฏุฉ ุนูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุณุชุชู ูุฒุงููุชูุง ูุน ุงูุฑุฆูุณู ุ ุฃู  ูููู ุฃู ูุชุฃูุฏ ุงูุชุทุจูู ูู ุฃู ูุง ุณุฌูู ุนูู ุงููุนุงูุฌ ูุฏ ูุตู ุจุงููุนู ุฅูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ูุฌุงูุฒ ูููุฑุงุกุฉ.  ุจุดูู ุงูุชุฑุงุถู ุ ูุฐุง ุนุงุฏุฉ ูุง ูููู ุบูุฑ ูุถููู.  ูุณูุญ ูู WAITLSN ุจุงูุชุญูู ูู ูุฐุง ุงูุชูุงุนู ูุชุญุฏูุฏ ูุถุน ุงูุณููู ูู INFINITELY ุงูุชุฑุงุถููุง ุฅูู TIMEOUT ู NOWAIT. <br><br><h3 style=";text-align:right;direction:rtl">  ุฅุนุงุฏุฉ ูุฑุงุกุฉ ุงููุชุบูุฑุงุช ูู recovery.conf ุงูุณุงุจู </h3><br>  ูู ุฅุดุงุฑุฉ SIGHUP ุ ูุนูุฏ PostgreSQL ูุฑุงุกุฉ postgresql.conf ุ ููู ููุณ recovery.conf.  ุชู ุฅุฏุฎุงู ุชุตุญูุญ kernel ุฌุฏูุฏ ูุณุจููุง ูู Standard and Enterprise 10.4.1.  ุงุถุทุฑ ุฅูู ุฅุนุงุฏุฉ ูุฑุงุกุฉ ู recovery.conf.  ูููู ูู Postgres 12 ูุง ููุฌุฏ ููู recovery.conf ุนูู ุงูุฅุทูุงู: ูุชู ููู ุฌููุน ุงููุชุบูุฑุงุช ููู ุฅูู postgresql.conf.  ููุน ุฐูู ุ ุนูู ุงูุฑุบู ูู ุฅุนุงุฏุฉ ูุฑุงุกุฉ ุงูููู ุจุฃูููู ุ ูู ุชุชู ุฅุนุงุฏุฉ ุชุนุฑูู ุงููุชุบูุฑุงุช ูู recovery.conf ุจูุงุณุทุฉ SIGHUP ุ ูููู ุชุทูุจ ุฅุนุงุฏุฉ ุชุดุบูู Postgres.  ูู Standard ุ ูุฐุง ุบูุฑ ูุทููุจ: ูุชู ูุฑุงุกุฉ ูู ุดูุก ูุฅุนุงุฏุฉ ุชุนุฑููู. <br><br><h3 style=";text-align:right;direction:rtl">  ุฏุนู PTRACK </h3><br>  2.0 PTRACK ูู ุขููุฉ PTRACK ุงููุนุงุฏ ุชุตููููุง ููุฅุตุฏุงุฑุงุช ุงูููุงุณูุฉ ูุงูุฅุตุฏุงุฑุงุช 11 ูุงูุฅุตุฏุงุฑุงุช ุงูุฃูุฏู.  ุนูู ูุณุชูู ูุธุงู ุฅุฏุงุฑุฉ ููุงุนุฏ ุงูุจูุงูุงุช (DBMS) ุ ููุฏ ูุฌุญ ุจูุถู ุชุตุญูุญ kernel ุ ูุงูุขู ุชูุช ุฅุถุงูุฉ ููุญู ptrack ุฅูู <a href="https://postgrespro.ru/docs/postgrespro/12/ptrack">ุงูุชุตุญูุญ</a> .  ูุชุนูุจ PTRACK 2.0 ุชุบููุฑุงุช ุตูุญุฉ ุงูุจูุงูุงุช ููููุฑ ูุงุฌูุฉ ูุงุณุชุฑุฏุงุฏ ูุฐู ุงููุนูููุงุช.  ูููู ุงุณุชุฎุฏุงูู ุนูู ุญุฏ ุณูุงุก ูุฃุบุฑุงุถ ุงูุชุดุฎูุต ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุญุตูู ุนูู ููุฑุฉ ุนู ูุฏู ููุฉ "ุชุญูุฑ" ุงููุซูู ุจุงููุณุจุฉ ูููุทุฉ ุฒูููุฉ ูุญุฏุฏุฉ ุ ูุชุนููู ูุฑูู ูุชุณูุณู ูู ุงูุณุฌู (LSN) ุ ูุฅูุดุงุก ูุณุฎ ุงุญุชูุงุทูุฉ ุชุฏุฑูุฌูุฉ. <br><br>  ุงูุฌุฒุก ุงูุฃุตุนุจ ู "ุงููููู" ูู ุฅุฌุฑุงุก ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชุฒุงูุฏู ุ ููุงุนุฏุฉ ุนุงูุฉ ุ ูู ุนุฒู ูุฌููุนุฉ ูุฑุนูุฉ ูู ุงูุตูุญุงุช ุงูุชู ุชู ุชุบููุฑูุง ุนู ูุฌููุนุฉ ุงูุตูุญุงุช ุจุฃููููุง ูู ูุฌููุนุฉ.  ูุธุฑูุง ูุญูููุฉ ุฃู ุงูุฎุงุฏู ููููู ุงูููุงู ุจูุฐู ุงููููุฉ ูุชูุฏูู ูุนูููุงุช ุญูู ุงูุตูุญุงุช ุงูุชู ุชู ุชุบููุฑูุง ุจุณุฑุนุฉ ุ ูุชู ุชูููู ููุช ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชุฒุงูุฏู ุจุงุณุชุฎุฏุงู PTRACK ุจุดูู ูุจูุฑ. <br><br>  ูุณุชุฎุฏู PTRACK 2.0 ุฌุฏูู ุชุฌุฒุฆุฉ ุจุญุฌู ูุญุฏุฏ ูู ุงูุฐุงูุฑุฉ ุงููุดุชุฑูุฉ ุ ูุชุฒุงูู ุจุดูู ุฏูุฑู ูุน ููู ptrack.map. <br><br>  ูุธุฑูุง ููุชุบูุฑ ุงูุฌุฐุฑู ูู ุขููุฉ ุงูุนูู ุงูุฏุงุฎููุฉ ููุงุฌูุฉ ุงููุณุชุฎุฏู ุบูุฑ ุงููุชูุงููุฉ ูุน ุงูุฅุตุฏุงุฑุงุช ุงููุฏููุฉ ุ ูุฅู ุงูุชุฏุงุฏ ptrack ูุชุงุญ ููุท ูู ุงูุฅุตุฏุงุฑ ุงูุซุงูู ุนุดุฑ ูู PostgresPro Standard ู Enterprise ุ ูุณูููู ูุชุงุญูุง ูุชุตุญูุญ ูููุญู ูู PostgreSQL 12. <br><br><h3 style=";text-align:right;direction:rtl">  ุฃูุงูุฑ ุงูุชุญุฑูุฑ ูู psql ููุธุงู ุงูุชุดุบูู Windows </h3><br>  ูุชู ุชุทุจูู ุงูุฏุนู ุงููุชูุฏู ูุชุญุฑูุฑ ุฃูุงูุฑ ุงูุฅุฏุฎุงู ูู psql ููุธุงู ุงูุชุดุบูู Windows ุจุงุณุชุฎุฏุงู WinEditLine.  ููููู ุงูุขู ุนุฑุถ ุฃุญุฑู ุงูุญุฑูู ุงููุฌุงุฆูุฉ ุงููุฎุชููุฉ ูู ููุช ูุงุญุฏ (ุนูู ูุฌู ุงูุฎุตูุต ุ ูุชู ุนุฑุถ ุงูุณูุฑูููุฉ ุนุงุฏุฉ ุนูู ูุธุงู Windows ุบูุฑ ุงูุฑูุณู). <br><br><h3 style=";text-align:right;direction:rtl">  ูููู ุญุฒูุฉ ููุญุฏุฉ </h3><br><br>  ูููู ุญุฒู ุงูุญุฒู ุงูุซูุงุฆูุฉ ูุฌููุน ุชูุฒูุนุงุช Linux ูู ููุญุฏ ูู ุฃุฌู ุชุจุณูุท ุงูุชุฑุญูู ุจูููุง ูุงูุณูุงุญ ุจุชุซุจูุช ุงูุนุฏูุฏ ูู ุงูููุชุฌุงุช ุงููุณุชูุฏุฉ ุฅูู PostgreSQL ูุนูุง ุฏูู ุฃู ุชุนุงุฑุถ.  ูููู ุงูุนุซูุฑ ุนูู ูุฐุง ูู <a href="https://postgrespro.ru/docs/postgrespro/12/installation-bin">ุงููุตู 16 ูู</a> ุงููุซุงุฆู. <br><br>  ุงูุขู ุนู ุงูุฅุถุงูุงุช: <br><br><h3 style=";text-align:right;direction:rtl">  dump_stat </h3><br>  ุจุฏุง ูู ููุช ูุจูุฑ 9.5.  ุนูุฏ ููู ุงูุจูุงูุงุช ุฃู ุงุณุชุนุงุฏุชูุง ุ ูุง ูุชู ุนุงุฏุฉ ููู ุงูุฅุญุตุงุกุงุช ุงููุชุฑุงููุฉ.  ุฅุฐุง ููุช ุจุฅุนุงุฏุฉ ุชุฌููุนูุง ุจุงุณุชุฎุฏุงู ุฃูุฑ ANALYZE ุ ูุณูุชู ุชูููุฐูุง ููุงูู ุงููุฌููุนุฉ ุ ูููุณ ููุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญุฏุฏุฉ.  ูุฏ ูุชุทูุจ ูุฐุง ุงููุซูุฑ ูู ุงูููุช ุงูุฅุถุงูู ูููุงุนุฏ ุงูุจูุงูุงุช ุงููุจูุฑุฉ. <br><br>  <a href="https://postgrespro.ru/docs/postgrespro/12/dump-stat">ูููุฑ</a> ููุญู dump_stat <a href="https://postgrespro.ru/docs/postgrespro/12/dump-stat">ุงููุธุงุฆู</a> ุงูุชู ุชุชูุญ ูู ุฅูุบุงุก ุชุญููู ูุงุณุชุนุงุฏุฉ ูุญุชููุงุช ุงูุฌุฏูู pg_statistic.  ุนูุฏ ุฅุฌุฑุงุก ุชุญููู / ุงุณุชุฑุฏุงุฏ ุงูุจูุงูุงุช ุ ููููู ุงุณุชุฎุฏุงู dump_stat ูููู ุงูุฅุญุตุงุกุงุช ุงูููุฌูุฏุฉ ุฅูู ุฎุงุฏู ุฌุฏูุฏ ุ ุฏูู ุงูุญุงุฌุฉ ุฅูู ุชุดุบูู ุงูุฃูุฑ ANALYZE ูููุฌููุนุฉ ุจุฃููููุง. <br><br>  ุชูุฑูุบ ุงูุฏุงูุฉ dump_statistic ูุญุชููุงุช ูุชุงููุฌ ุงููุธุงู pg_statistic.  ููุชุฌ INSERT ููู tuple ุจุงููุบุฉ pg_statistic ุ ุจุงุณุชุซูุงุก ุชูู ุงูุชู ุชุญุชูู ุนูู ุฅุญุตุงุฆูุงุช ุญูู ุงูุฌุฏุงูู ูู ูุฎุทุทุงุช information_schema ู pg_catalog. <br><br><h3 style=";text-align:right;direction:rtl">  jsquery </h3><br>  ุชุฐูุฑ ุฃู <a href="https://postgrespro.ru/docs/postgrespro/12/jsquery">ูุฐุง ุงูุชุฏุงุฏ</a> ููุนูู ูุน JSON (B) ุ ูููุณ JS.  ูููุฑ ูุฌููุนุฉ ูู ุงููุธุงุฆู ููุนุงูุฌุฉ ุฃููุงุน ุงูุจูุงูุงุช ูุฐู.  ูุฐู ูุบุฉ ุงุณุชุนูุงู ุฎุงุตุฉ ูู ุฃุฌู ุงูููุงุกุฉ ุ ุจุงุณุชุฎุฏุงู ุงูููุงุฑุณ ุ ุงูุจุญุซ ูู JSON (B).  ูู <a href="https://habr.com/ru/company/postgrespro/blog/448612/">ุงูููุงูุฉ ุนูู ุงููุญูุฑ ุ</a> ููููู ุฑุคูุฉ ุจุนุถ ุงูุฃูุซูุฉ ุนูู jsquery ูุงูุฃุณุงููุจ ุงูุจุฏููุฉ ููุนูู ูุน JSON (B) ุ ุนูู ุณุจูู ุงููุซุงู JSONPath (ููุงููุง ูุชุทููุฑ ุดุฑูุชูุง). <br><br><h3 style=";text-align:right;direction:rtl">  online_analyze </h3><br>  <a href="https://postgrespro.ru/docs/postgrespro/12/online-analyze">ูููุฑ</a> ูุฐุง ุงูููุญู ูุฌููุนุฉ ูู ุงููุธุงุฆู ุงูุชู ุชููู ุนูู ุงูููุฑ ุจุชุญุฏูุซ ุงูุฅุญุตุงุกุงุช ูู ุงูุฌุฏุงูู ุงููุญุฏุฏุฉ ุจุนุฏ ุนูููุงุช INSERT ุฃู UPDATE ุฃู DELETE ุฃู SELECT INTO ูููุง.  ูุคูู ุงูุชูุฏูุฏ ูู ููุฏูุฑ ุณูุบุงูู. <br><br>  ูุงุณุชุฎุฏุงู ุงููุญุฏุฉ ุงูููุทูุฉ ุนุจุฑ ุงูุฅูุชุฑูุช ุ ูุฌุจ ุนููู ุชุญููู ุงูููุชุจุฉ ุงููุดุชุฑูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">LOAD</span></span> <span class="hljs-string"><span class="hljs-string">'online_analyze'</span></span>;</code> </pre> <br><br>  ุฅุญุตุงุฆูุงุช ุงูุชุญุฏูุซุงุช ูููู ุชุฎุตูุตูุง.  ุนูู ุณุจูู ุงููุซุงู ุ ูู ุจุชุนููู ูุณุจุฉ ูุฆููุฉ ูู ุญุฌู ุงูุฌุฏูู ุฃู ุงูุญุฏ ุงูุฃุฏูู (ุงูุญุฏ ุงูุฃุฏูู) ูุชุบููุฑุงุช ุงูุตู ุ ูุจุนุฏ ุฐูู ุณูุชู ุฌูุน ุงูุฅุญุตุงุฆูุงุช ุนูู ุงูููุฑ. <br><br><h3 style=";text-align:right;direction:rtl">  pg_pathman </h3><br>  ุชู <a href="https://postgrespro.ru/docs/postgrespro/12/pg-pathman">ุฅูุดุงุก ููุญู pg_pathman</a> ูู Postgres Professional ูู ููุช ุฃุจูุฑ ูู PostgreSQL kernel ูููุฐ ูุฌููุนุฉ ูุงููุฉ ุชูุงููุง ูู ุงููุธุงุฆู ูุฅูุดุงุก ุฃูุณุงู.  ูุฐูู ุ ูููู ุฅุฌุฑุงุก ุงูุนุฏูุฏ ูู ุงูุนูููุงุช ูุน ุงูุฃูุณุงู ูุน ูู ูู ูุงูุขููุฉ ุงูุฃุฎุฑู.  ูู ุงููุณุชุญุณู ููุท ุนุฏู ุฎูุท ุงูููุงุทุน ุงูุชู ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ ุงูุชูุณูู ุงูุชุนุฑููู ู pg_pathman. <br><br>  ููุน ุฐูู ุ ูุง ุชุฒุงู ุงูุนุฏูุฏ ูู ุนูููุงุช pg_pathman ุฃุณุฑุน ูุจุนุถ ุงูููุฒุงุช ููููุฏุฉ ูู PostgreSQL.  ุนูู ุณุจูู ุงููุซุงู ุ ุงูุฅูุดุงุก ุงูุชููุงุฆู (ุงููุทุน) ููุฃูุณุงู.  ูู PostgreSQL ุ ุชุญุชุงุฌ ุฅูู ุชุนููู ุญุฏูุฏ ูู ูุณู.  ุฅุฐุง ูููุง ุจููุก ุงูุจูุงูุงุช ุงูุชู ูุง ููุนุฑู ุนููุง ูุณุจููุง ุนุฏุฏ ุงูุฃูุณุงู ุงูุชู ูููู ููุง ููุจุบู ุฃู ุชููู ูุจุนุซุฑุฉ ุ ููู ุงูููุงุณุจ ุชุนููู ุงููุงุตู ุงูุฒููู ุจุจุณุงุทุฉ ูุงูุณูุงุญ ููุจุฑูุงูุฌ ุจูุทุน ุงูููุงุทุน ุจููุณู - ุญุณุจ ุงูุญุงุฌุฉ.  pg_pathman ูุนุฑู ููู ุ PostgreSQL ูุง.  ูููู ุ ุจุฏุกูุง ูู PG 11 ุ ููุฌุฏ ูุณู ุงูุชุฑุงุถู (ุงูุชุฑุงุถู) ุ ุญูุซ ููููู ุชูุฑูุบ ุฌููุน ุงูุณุฌูุงุช ุงูุชู ูุง ุชูุฏุฑุฌ ูู ุฃูุณุงู ุฐุงุช ุญุฏูุฏ ูุญุฏุฏุฉ. <br><br>  ููุงู ุงุชูุงู ุฃุณุงุณู ูุน ูุงุฏุฉ ูุฌุชูุน PostgreSQL ููู ุงูุฃูุถู ูู ุงููุณุชูุจู ุ ูู ุญูู ุฃู ุงูููุฒุงุช ุงููุฑูุฏุฉ ูู pg_pathman ุณุชูุฏุฑุฌ ูู ุงููุฑุน ุงูุฑุฆูุณู.  ูููู ุญุชู ุฐูู ุงูููุช ุ ูููู ุฃู ุชุฌุนู pg_pathman ุงูุญูุงุฉ ุฃุณูู ููุณุคููู DB ููุชุทุจูู ููุจุฑูุฌู ุงูุชุทุจููุงุช. <br><br>  ุฅูุดุงุก ููุญู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXTENSION</span></span> pg_pathman;</code> </pre> <br><br>  ูุณูุญ ูู pg_pathman ุจุชูุณูู ุงูุฌุฏุงูู ุงููุจูุฑุฉ ุฅูู ุฃูุณุงู ููููุฑ ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ููุงุฆูุฉ - ูุฌููุนุฉ ูู ุงููุธุงุฆู ูุฅูุดุงุก ุฃูุณุงู ูุงูุนูู ูุนูุง.  ุนูู ุณุจูู ุงููุซุงู ุ ุจุงุณุชุฎุฏุงู ุงููุธููุฉ <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">create_range_partitions(relation <span class="hljs-type"><span class="hljs-type">REGCLASS</span></span>, expression <span class="hljs-type"><span class="hljs-type">TEXT</span></span>, start_value <span class="hljs-type"><span class="hljs-type">ANYELEMENT</span></span>, p_interval <span class="hljs-type"><span class="hljs-type">INTERVAL</span></span>, p_count <span class="hljs-type"><span class="hljs-type">INTEGER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>, partition_data <span class="hljs-type"><span class="hljs-type">BOOLEAN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span>);</code> </pre> <br>  ูููููุง ุฃู ูุณุฃู <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> create_range_partitions(<span class="hljs-string"><span class="hljs-string">'log'</span></span>, <span class="hljs-string"><span class="hljs-string">'dt'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>::<span class="hljs-type"><span class="hljs-type">date</span></span>, <span class="hljs-string"><span class="hljs-string">'1 month'</span></span>::<span class="hljs-type"><span class="hljs-type">interval</span></span>);</code> </pre> <br><br>  ุจุนุฏ ุฐูู ูุถูู ุฃูุณุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> add_range_partition(<span class="hljs-string"><span class="hljs-string">'log'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">'2017-01-01'</span></span>::<span class="hljs-type"><span class="hljs-type">date</span></span>, <span class="hljs-string"><span class="hljs-string">'log_archive'</span></span>, <span class="hljs-string"><span class="hljs-string">'ts0'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> add_range_partition(<span class="hljs-string"><span class="hljs-string">'log'</span></span>, <span class="hljs-string"><span class="hljs-string">'2017-01-01'</span></span>::<span class="hljs-type"><span class="hljs-type">date</span></span>, <span class="hljs-string"><span class="hljs-string">'2017-02-01'</span></span>::<span class="hljs-type"><span class="hljs-type">date</span></span>, <span class="hljs-string"><span class="hljs-string">'log_1'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> add_range_partition(<span class="hljs-string"><span class="hljs-string">'log'</span></span>, <span class="hljs-string"><span class="hljs-string">'2017-02-01'</span></span>::<span class="hljs-type"><span class="hljs-type">date</span></span>, <span class="hljs-string"><span class="hljs-string">'2017-03-01'</span></span>::<span class="hljs-type"><span class="hljs-type">date</span></span><span class="hljs-string"><span class="hljs-string">', log_2'</span></span>);</code> </pre> <br><br>  ุณูุชู ุฅูุดุงุก ุณุฌู ุงูุฃุฑุดูู ูู ูุณุงุญุฉ ุงูุฌุฏูู ts0 ุ ูุงูุจุงูู ุจุดูู ุงูุชุฑุงุถู.  ููู ูุง ููููู ุชุญุฏูุฏ ุงูููุงุทุน ุจุดูู ุตุฑูุญ ุ ูููู ููููู ุงููุซูู ุจุนูููุฉ DBMS ูุฐู ุนู ุทุฑูู ุชุนููู ุงููุงุตู ุงูุฒููู ูุฅูุดุงุก ุฃูุณุงู ูู ุฎุทูุฉ ูุงุญุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> create_range_partitions(<span class="hljs-string"><span class="hljs-string">'log'</span></span>, <span class="hljs-string"><span class="hljs-string">'dt'</span></span>, <span class="hljs-string"><span class="hljs-string">'2017-01-01'</span></span>::<span class="hljs-type"><span class="hljs-type">date</span></span>, <span class="hljs-string"><span class="hljs-string">'1 month'</span></span>::<span class="hljs-type"><span class="hljs-type">interval</span></span>);</code> </pre> <br><br>  ุนูู ุทุงููุฉ ุจุณูุทุฉ ุ ุณูุจุฏู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> pg_pathmania(id <span class="hljs-type"><span class="hljs-type">serial</span></span>, val <span class="hljs-type"><span class="hljs-type">float</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> pg_pathmania(val) <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> random() * <span class="hljs-number"><span class="hljs-number">1000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> generate_series(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> create_range_partitions(<span class="hljs-string"><span class="hljs-string">'pg_pathmania'</span></span>, <span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>); test_parti=# \d+ pg_pathmania <span class="hljs-keyword"><span class="hljs-keyword">Table</span></span> "public.pg_pathmania" <span class="hljs-keyword"><span class="hljs-keyword">Column</span></span> | <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> | <span class="hljs-keyword"><span class="hljs-keyword">Collation</span></span> | Nullable | <span class="hljs-keyword"><span class="hljs-keyword">Default</span></span> | <span class="hljs-keyword"><span class="hljs-keyword">Storage</span></span> | S tats target | Description <span class="hljs-comment"><span class="hljs-comment">--------+------------------+-----------+----------+-----------------------+---------+------+------ id | integer | | not null | nextval('pg_pathmania_id_seq'::regclass) | plain | | val | double precision | | | | plain | | Child tables: pg_pathmania_1, pg_pathmania_10, pg_pathmania_11, pg_pathmania_12, pg_pathmania_13, pg_pathmania_14, pg_pathmania_15, pg_pathmania_16, pg_pathmania_17, pg_pathmania_18, pg_pathmania_19, pg_pathmania_2, pg_pathmania_20, pg_pathmania_21, pg_pathmania_3, pg_pathmania_4, pg_pathmania_5, pg_pathmania_6, pg_pathmania_7, pg_pathmania_8, pg_pathmania_9</span></span></code> </pre> <br><br>  ูู PostgreSQL ุ ุณูุชุนูู ุนูููุง ุฅูุดุงุก ูู ูุณู ูุน ูุฑูููุง ุงูุฎุงุต.  ูู ูุซู ูุฐู ุงูุญุงูุงุช ุ ูุจุทุจูุนุฉ ุงูุญุงู ุ ููุชุจูู ุงููุตู ุงูุฐู ูููุฏ ุฑูุฒ DDL ุงููุทููุจ ุชููุงุฆูุง.  ูุง ุชุญุชุงุฌ ุฅูู ูุชุงุจุฉ ุงูุจุฑุงูุฌ ุงููุตูุฉ ูู pg_pathman ุ ูู ุดูุก ููุฌูุฏ ุจุงููุนู.  ูููู ูุฐุง ููุณ ูู ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู.  ุณูููู ุจุฅุฏุฑุงุฌ ุณุฌู ูุง ููุชุตุฑ ููุท ุนูู ูุนุฑูุชู ูู ุฃู ูู ุงูุฃูุณุงู ุงูุญุงููุฉ ุ ููููู ูุง ููุน ูู ุฃูุฑุจ ูุณู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> pg_pathmania(id, val) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span> (<span class="hljs-number"><span class="hljs-number">2000</span></span>, <span class="hljs-number"><span class="hljs-number">277.835794724524</span></span>);</code> </pre> <br><br>  ูุฑุฉ ุฃุฎุฑู ุ ุชุญูู ูู ูุญุชููุงุช ุงูุฌุฏูู ุจุงุณุชุฎุฏุงู \ d + pg_pathmania: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs">Child <span class="hljs-keyword"><span class="hljs-keyword">tables</span></span>: pg_pathmania_1, pg_pathmania_10, ... pg_pathmania_39, pg_pathmania_4, pg_pathmania_40, pg_pathmania_41,</code> </pre> <br><br>  ุฅููู ูุง ุญุฏุซ: ุฑุฃู pg_pathman ุฃู ุงูุณุฌู ุฐู ุงููุนุฑู = 2000 ูุง ููุน ูู ุงูุฃูุณุงู ุงูุชู ุชู ุฅูุดุงุคูุง ุจุงููุนู ุ ูุญุณุงุจ ุนุฏุฏ ูุง ูุญุชุงุฌูู ุฅูู ุฅูุดุงุฆู ุ ููุนุฑูุฉ ุงููุงุตู ุงูุฒููู ูู RANGE ุงูุฐู ุชู ุชูุณูู ุงูุฌุฏูู ูู ูุจู ุฅููู ุ ูุฅูุดุงุก ุงููุณู ุงูุฐู ููุน ููู ุงูุณุฌู ุงูุฌุฏูุฏ ุ ูุจุงูุทุจุน ุ ุฌููุน ุงูููุงุทุน ุจูู ุงูุญุฏ ุงูุฃุนูู ููุฃูุณุงู ุงููุฏููุฉ ูุงูุญุฏ ุงูุฃุฏูู ูููุณู ุงูุฌุฏูุฏ.  ูุฐุง ุฃูุฑ ูุฑูุญ ููุบุงูุฉ ุ ููู ุงูุญุงูุงุช ุงูุชู ูุชู ูููุง ุงูุชูุจุค ุจููู ูุฌุงู ุชูุณูู ุงูุจูุงูุงุช ุงููุญุฏูุซุฉ ุจุดูู ุณูุก ุ ููุฐู ููุฒุฉ ูุจูุฑุฉ ูู pg_pathman. <br><br><h3 style=";text-align:right;direction:rtl">  pg_query_state </h3><br>  <a href="https://postgrespro.ru/docs/postgrespro/12/pg-query-state">ูุชูุญ</a> ููุง ูุฐุง ุงูุงูุชุฏุงุฏ ุงูุฐู ูููุง ุจุชุทููุฑู <a href="https://postgrespro.ru/docs/postgrespro/12/pg-query-state">ูุนุฑูุฉ</a> ุงูุญุงูุฉ ุงูุญุงููุฉ ููุทูุจุงุช ูู ุนูููุฉ ุงูุชูุฏูู.  ููุฏ ูุงู ููุฌูุฏูุง ููุฐ ุงูุฅุตุฏุงุฑ 9.5 ููุฑุฌุน ุชุงุฑูุฎ ูููุงุฏ ุงูุนุฏูุฏ ูู ุทูุจุงุช ูุดุฑูู ุงูุนููุงุก. <br><br>  ุงูุญูููุฉ ูู ุฃู EXPLAIN ANALYZE ูุณูุญ ูู ุจูุดุงูุฏุฉ ุฅุญุตุงุฆูุงุช ุงูุชูููุฐ ุงูุชู ุชู ุฌูุนูุง ูู ูู ุนูุฏุฉ ูู ุดุฌุฑุฉ ุงูุฎุทุฉ ุ ูููู ูุชู ุฌูุน ูุฐู ุงูุฅุญุตุงุฆูุงุช ููุท ุจุนุฏ ุงูุชูุงู ุงูุงุณุชุนูุงู.  ูููู ูู ุงูุญูุงุฉ ุ ููุฃุณู ุ ููุงู ุญุงูุงุช ุชุญุชุงุฌ ูููุง ุฅูู ุงููุธุฑ ูู ูุง ูู ููุชูู ุงูุทูุจ ุจุนุฏ ูุฑุจูุง ูู ููุชูู.  ูุณูุญ ูู pg_query_state ุจุนุฑุถ ุงูุฅุญุตุงุกุงุช ุงูุญุงููุฉ ููุงุณุชุนูุงู ุงูุฌุงุฑู ุชุดุบููู ูู ุนูููุฉ ุตูุงูุฉ ุฎุงุฑุฌูุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูููู ุชูุณูู ุงูุฅุฎุฑุงุฌ ุงููุงุชุฌ ูุทุงุจููุง ุชูุฑูุจูุง ูุฅุฎุฑุงุฌ ุงูุฃูุฑ EXPLAIN ANALYZE ุงููุนุชุงุฏ. <br><br>  ุงููุฑุงูู: <br><br><h3 style=";text-align:right;direction:rtl">  pgBouncer </h3><br>  <a href="http://www.pgbouncer.org/">ูุฐุง ูู</a> <a href="https://postgrespro.ru/docs/postgrespro/12/pgbouncer">ูุฌุชุฐุจ ุงุชุตุงู ุดุนุจูุฉ</a> ุฃูู ุณูููู ูู ุงูุบุฑูุจ ุฃู ูุชุญุฏุซ ุนู ุฐูู ููุง.  ุฅูู ูุฌุฑุฏ ุฌุฒุก ูู Standard ุ ููุฌุจ ุชุซุจูุชู ุจุดูู ูููุตู ูู ุญุงูุฉ ุงููุงููููุง PostgreSQL. <br><br><h3 style=";text-align:right;direction:rtl">  pg_probackup </h3><br>  <a href="https://postgrespro.ru/docs/postgrespro/12/app-pgprobackup">pg_probackup</a> ูู ูุงุญุฏุฉ ูู ุงูุชุทูุฑุงุช ุงูุฃูุซุฑ ุดุนุจูุฉ ูุฏููุง.  ูุฐุง ูู ูุฏูุฑ ุงููุณุฎ ุงูุงุญุชูุงุทู ูุงูุงุณุชุฑุฏุงุฏ ุงูุชู ูุชู ุชุทููุฑูุง ูุชุญุฏูุซูุง ูู ุงูููุงู ุงูุฃูู ุนู ุทุฑูู Anastasia Lubennikova ุ Grigory Smolkin ููุฌุชูุน ุงููุณุชุฎุฏููู. <br><br>  ุงููุฒุงูุง ุงูุชูุงูุณูุฉ ูู pg_probackup: ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชุฒุงูุฏู ูุน ูุชูุฉ ุงูุชุญุจุจ (8 ูููู ุจุงูุช) ุ ุซูุงุซุฉ ุฃูุถุงุน ูุณุฎ ุงุญุชูุงุทู ุชุฒุงูุฏู (PAGE ุ DELTA ุ PTRACK) ุ ุงูุชุญูู ูู ุชูุงูู ุงููุณุฎ ุงูุงุญุชูุงุทู ุนูุฏ ุงูุทูุจ ุ ุงูุชุญูู ูู ูุธุงู PostgreSQL ุ ุงูุชุญูู ูู ุงููุณุฎ ุงูุงุญุชูุงุทู ุ ุงูุงุณุชุฑุฏุงุฏ ุงูุฌุฒุฆู ุ ุฅูุฎ. <br><br>  ุฃุตุจุญ ูุถุน ุงููุณุฎ ุงูุชุฑุงููู PTRACK ุ ุจุงูุงุนุชูุงุฏ ุนูู <a href="https://postgrespro.ru/docs/postgrespro/12/ptrack">ุงูุงูุชุฏุงุฏ ุงูุฐู ูุญูู ููุณ ุงูุงุณู</a> ูุฌุฒุก ูู ุงูุขููุฉ ุงููุนุงุฏ ุชุตููููุง - PTRACK 2.0 - ุฃุณุฑุน ูุฃุตุจุญ ุงูุขู ุจุดูู ูุง ูุจุณ ููู ุฃุณุฑุน ูุฃุฑุฎุต ุฃูุถุงุน pg_probackup. <br><br><h3 style=";text-align:right;direction:rtl">  pg_repack </h3><br>  <a href="https://postgrespro.ru/docs/postgrespro/12/app-pgrepack">pg_repack ูู</a> ุฃุฏุงุฉ ูุณุงุนุฏุฉ ุดุงุฆุนุฉ ุ ููุดุจู ุชุดุบูููุง VACUUM FULL ุฃู <a href="https://postgrespro.ru/docs/postgrespro/12/sql-cluster">CLUSTER</a> .  ููุณ ููุท ุฅุนุงุฏุฉ ุญุฒู ุงูุฌุฏุงูู ุ ูุฅุฒุงูุฉ ุงููุฑุงุบุงุช ุ ูููู ูุนุฑู ุฃูุถูุง ููููุฉ ุงุณุชุนุงุฏุฉ ุงูุชุฑุชูุจ ุงููุนูู ููููุงุฑุณ ุงููุฌูุนุฉ.  ุนูู ุนูุณ CLUSTER ู VACUUM FULL ุ ูุฅูู ูููุฐ ูุฐู ุงูุนูููุงุช "ุฃุซูุงุก ุงูุชููู" ุ ุฏูู ุงุณุชุฎุฏุงู ุฃููุงู ุงูุทุงููุฉ ุงูุญุตุฑูุฉ ูุงูุนูู ุจุดูู ุนุงู ุจููุงุกุฉ.  ูุง ูุชู ุชุถูููู ูู ุฅุตุฏุงุฑ ุงููุงููููุง. <br><br><h3 style=";text-align:right;direction:rtl">  pg_variables </h3><br>  ุญูู ูุฐุง ุงูุชูุฏูุฏ ุนูู ูุงุจุฑ ููุงู <a href="https://habr.com/ru/company/postgrespro/blog/302200/">ููุงูุฉ</a> ูุซูุฑุฉ ููุงูุชูุงู <a href="https://habr.com/ru/company/postgrespro/blog/302200/">ูู</a> ููุธููุง ุฅููุงู ูุฑููููู.  ุณุจุจ ุงูุชูุฏูุฏ ูู ุฃู ุงูุนูู ูุน ุงููุชุงุฆุฌ ุงููุชูุณุทุฉ ูููู ุฃุญูุงููุง ุบูุฑ ูุฑูุญ ููููู.  ูุณุชูุดู ุงูููุงู ุงูุจุฏุงุฆู.  ุงูุฃูุซุฑ ุดููุนุง ูู ูุฐู ุงูุฌุฏุงูู ุงููุคูุชุฉ. <br><br>  ููุณุชูุฏุน ูุคูุช ููุจูุงูุงุช ุ ูููู ุงูุชุฏุงุฏ pg_variables ุฃูุซุฑ ุฅูุชุงุฌูุฉ ูู ุงูุฌุฏุงูู ุงููุคูุชุฉ (ุงุฎุชุจุงุฑุงุช pgbench ููุฌูุฏุฉ ูู ุงูููุงูุฉ) ุ ููู ุฃูุซุฑ ููุงุกูุฉ: ูุชู ุชุนุฑูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุจูุงุณุทุฉ ุฒูุฌ ูุชุบูุฑ ุงูุญุฒูุฉ ุ ูุงูุฐู ูููู ุชูุฑูุฑู ููุนููุงุช ุ ูุชู ุฅุฑุฌุงุนู ูู ุฏุงูุฉ ุ ุฅูุฎ. ููุงู ูุฌููุนุฉ / ุงูุญุตูู ุนูู ูุธุงุฆู ููุนูู ูุน ุงููุชุบูุฑุงุช.  ูุฐูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุชุฎุฒูู ุงูุนุฏูุฏ ูู ุงููุชุบูุฑุงุช (ุงูุญุฒูุฉ ูู ุงุณู ุงูุญุฒูุฉ ุ ูุงูุชุนุจูุฑ ุจุนุฏ ุงูุนูุงูุฉ ุงูุนุดุฑูุฉ ูู ุงููุชุบูุฑุงุช ูู ูุฐู ุงูุญุฒูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> pgv_set_int(<span class="hljs-string"><span class="hljs-string">'package'</span></span>,<span class="hljs-string"><span class="hljs-string">'#'</span></span>||n,n), n <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> generate_series(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1000000</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> gs(n);</code> </pre> <br><br>  ุชุญุชูู ุงููุชุบูุฑุงุช ุนูู ุฎุงุตูุฉ ูุซูุฑุฉ ููุงูุชูุงู: ููุณ ุฎุทุฃ ุฃู ููุฒุฉ ุ ูููู ููุฒุฉ: ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ุจูุงุณุทุฉ ุงูุงูุชุฏุงุฏ ุชุนูู ูุฌูุฏ ุฎุงุฑุฌ ุงููุนุงููุงุช - ูุชู ุญูุธูุง ูู ุญุงูุฉ ุฅุตูุงุญ ูุนุงููุฉ ููู ุญุงูุฉ ุงูุงุณุชุนุงุฏุฉ ุ  ุนูุงูุฉ ุนูู ุฐูู ุ ุญุชู ุนูุฏ ุชูููุฐ ุฃูุฑ ูููุตู ุ ูููู ุงูุญุตูู ุนูู ุจูุงูุงุช ุฌุฒุฆูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> pgv_insert(<span class="hljs-string"><span class="hljs-string">'package'</span></span>, <span class="hljs-string"><span class="hljs-string">'errs'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">row</span></span>(n)) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> generate_series(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> gs(n) <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-number"><span class="hljs-number">1.0</span></span>/(n<span class="hljs-number"><span class="hljs-number">-3</span></span>)&lt;&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>; ERROR: there <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a <span class="hljs-type"><span class="hljs-type">record</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the variable "errs" <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> same key test_parti=# <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pgv_select(<span class="hljs-string"><span class="hljs-string">'package'</span></span>,<span class="hljs-string"><span class="hljs-string">'errs'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> r(i <span class="hljs-type"><span class="hljs-type">int</span></span>); i <span class="hljs-comment"><span class="hljs-comment">--- 1 2 (2 rows)</span></span></code> </pre> <br><br>  ูู ูุงุญูุฉ ุ ูุฐุง ููุณ ููุงุณุจูุง ููุบุงูุฉ - ูู ุจุนุถ ุงูุญุงูุงุช ุ ูู ุงูุถุฑูุฑู ุชูููุฑ ุญุฐู ุงูุจูุงูุงุช ุงูุชู ุชู ุฅุฏุฎุงููุง ุจุดูู ุบูุฑ ุตุญูุญ ุ ูููู ูู ุญุงูุงุช ุฃุฎุฑู ุ ูุฏ ูููู ุฐูู ูููุฏูุง ููุบุงูุฉ - ุนูู ุณุจูู ุงููุซุงู ุ ุญูุธ ุจุนุถ ุงูุจูุงูุงุช ุญุชู ูู ุญุงูุฉ ุงูุชุฑุงุฌุน ุนู ุงููุนุงููุฉ.  <a href="https://github.com/postgrespro/pg_variables">ุงููุซุงุฆู</a> ูุฏููุง ุชูุงุตูู. <br><br>  ูู ุงูุฎุชุงู ุ ุนุฏุฏ ูููู ูู ุงูููุญูุงุช ุงูุฅุถุงููุฉ: <br><br><h3 style=";text-align:right;direction:rtl">  sr_plan ุ plantuner </h3><br>  <b>sr_plan</b> <a href="https://postgrespro.ru/docs/postgrespro/12/sr-plan">ูุญูุธ ููุณุชุนูุฏ</a> ุฎุทุท ุงูุงุณุชุนูุงู.  ุถููููุง ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> sr_plan.write_mode = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;</code> </pre> <br><br>  ุจุนุฏ ุฐูู ุ ุณูุชู ุชุฎุฒูู ุฎุทุท ุฌููุน ุงูุงุณุชุนูุงูุงุช ุงููุงุญูุฉ ูู ุฌุฏูู sr_plans ุญุชู ูุชู ุชุนููู ูุฐุง ุงููุชุบูุฑ ุนูู "ุฎุทุฃ".  ูุชู ุญูุธ ุฎุทุท ุฌููุน ุงูุทูุจุงุช ุ ุจูุง ูู ุฐูู ุงูุทูุจุงุช ุงููุชูุฑุฑุฉ. <br><br>  <a href="https://postgrespro.ru/docs/postgrespro/12/plantuner">ุชุฏุนู</a> <b>ุฃุฏุงุฉ plantuner</b> ุชูููุญุงุช ูุฌุฏููุฉ ุงูุงุชุตุงู ุฃู ูุตู ุงููุคุดุฑุงุช ุงููุญุฏุฏุฉ ุนูุฏ ุชูููุฐ ุงุณุชุนูุงู.  ูุง ููุฌุฏ ุณูู ุงุซููู ูู ูุชุบูุฑุงุช GUC: enable_index / desable_index: <br><br><pre style=";text-align:right;direction:rtl"> <code class="pgsql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> plantuner.disable_index=<span class="hljs-string"><span class="hljs-string">'id_idx2'</span></span>;</code> </pre> <br><br><h3 style=";text-align:right;direction:rtl">  ููุญูุงุช ููุจุญุซ ุนู ุงููุต ุงููุงูู: shared_ispell ุ pg_tsparser </h3><br>  ููุญู Shared_ispell ุ ุงูุฐู ูุณูุญ ูู ุจูุถุน <a href="https://postgrespro.ru/docs/postgrespro/12/hunspell-dict">ุงูููุงููุณ</a> ูู ุงูุฐุงูุฑุฉ ุงููุดุชุฑูุฉ ุ ููุฌูุฏ ูู Standard ูููุณ ูู PostgreSQL.  ุชุญุชูู ูุฌููุนุฉ hunspell-dict ุนูู ููุงููุณ ููุบุงุช: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  hunspell_en_usุ </li><li style=";text-align:right;direction:rtl">  hunspell_frุ </li><li style=";text-align:right;direction:rtl">  hunspell_nl_nlุ </li><li style=";text-align:right;direction:rtl">  hunspell_ru_ru </li></ul><br><br>  <b>ููุญู pg_tsparser</b> ูู <a href="https://postgrespro.ru/docs/postgrespro/12/pg-tsparser">ูุญูู</a> ุจุญุซ ุนู ูุต <a href="https://postgrespro.ru/docs/postgrespro/12/pg-tsparser">ุจุฏูู</a> .  ูุบูุฑ ูุฐุง ุงูุงูุชุฏุงุฏ ุฅุณุชุฑุงุชูุฌูุฉ ุชุญููู ุงููุต ุงูููุงุณู ูููููุงุช ุงูุชู ุชุชุถูู ุดุฑุทุงุช ุณูููุฉ ุ ููุฐูู ุงูุฃุฑูุงู ูุงูุญุฑูู ููุตููุฉ ุจุงูุดุฑุทุงุช ุงูุณูููุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฃุฌุฒุงุก ุงููุฑุฏูุฉ ูููููุฉ ุงูุชู ูุชู ุฅุฑุฌุงุนูุง ุงูุชุฑุงุถููุง ุ ุชูุฑุฌุน pg_tsparser ุฃูุถูุง ุงููููุฉ ุจุฃููููุง.  ูุนุฏ ูุฐุง ุงูุฃูุฑ ููููุง ุฌุฏูุง ูููุซุงุฆู ุงููููุฉ ุฃู ุงูููุงูุงุช ูุซู ูุฐุง ุงูููุงู ุ ุญูุซ ูุชู ุงูุนุซูุฑ ุนูู ุฑูุฒ ุงูุจุฑูุงูุฌ ุ ูููู ุชูุฌุฏ ูููุงุช ูุซู "pg_tsparser" ุ "pg_probackup" ุ "jsonb_build_object".  ูุง ููุธุฑ ูุฐุง ุงููุญูู ุงููุบูู ุฅูู ูุฐู ุงููููุงุช ููุท ููุฌููุนุฉ ูู ุงูููููุงุช ุ ูููู ุฃูุถูุง ูุฑูุฒ ูููุฒ ูุงุญุฏ ุ ูุจุงูุชุงูู ูุญุณู ุฌูุฏุฉ ุงูุจุญุซ. <br><br><h3 style=";text-align:right;direction:rtl">  ููุญูุงุช ู 1 C </h3><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b><a href="https://postgrespro.ru/docs/postgrespro/12/mchar">mchar</a></b> ูู ููุน ุจูุงูุงุช ุงุฎุชูุงุฑู ููุชูุงูู ูุน Microsoft SQL Serverุ </li><li style=";text-align:right;direction:rtl">  <b><a href="https://postgrespro.ru/docs/postgrespro/12/fulleq">fulleq</a></b> - ูููุฑ ุนุงูู ุชูุงูุค ุฅุถุงูู ููุชูุงูู ูุน Microsoft SQL Server ุ </li><li style=";text-align:right;direction:rtl"> <b><a href="https://postgrespro.ru/docs/postgrespro/12/fasttrun"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fasttrun</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูููุฑ ูุธููุฉ ุบูุฑ ุขููุฉ ูููุนุงููุงุช ูุงูุชุทุงุน ุงูุฌุฏุงูู ุงููุคูุชุฉ ุ ููุง ูููุน ุฏููู pg_class ูู ุงูููู.</font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ูุฎุชุชู ูุฐุง ุงูุงุณุชุนุฑุงุถ ุงููุตูุฑ ุ ูููู ููุณ ุงููุฑู ุจูู PostgresPro Standard ู PostgreSQL. </font><font style="vertical-align: inherit;">ุฐูุฑูุง ุงูุฅุตุฏุงุฑุงุช ุงูุฑุฆูุณูุฉ ุ ูููู ููููู ููุงุฑูุฉ ุงูุฅุตุฏุงุฑุงุช ุจุงูุชูุตูู ูู ุฎูุงู ุงูุจุฏุก ุ ุนูู ุณุจูู ุงููุซุงู ุ </font></font><a href="https://postgrespro.ru/docs/postgrespro/12/index"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงูุตูุญุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar479618/">https://habr.com/ru/post/ar479618/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar479590/index.html">ุฃูุถู 10 ุดุฑูุงุช ูุชุทููุฑ ุงูุชุทุจููุงุช ูู ุนุงู 2020</a></li>
<li><a href="../ar479592/index.html">ููู ุชุญูู ุฃูุฏุงููุ</a></li>
<li><a href="../ar479598/index.html">ุงููุท ูุงูููุจ ุฅุทุนุงู ุงูุฑูุจูุช</a></li>
<li><a href="../ar479600/index.html">DSL ุขุฎุฑ ููุชุญูู ูู ุงูุตุญุฉ</a></li>
<li><a href="../ar479602/index.html">ูุง ูู ุงูุฌูููู ุงููุงูู ูููุงุฐุง ูู ูุทููุจ</a></li>
<li><a href="../ar479620/index.html">ุนูุณ ุงูููุทู</a></li>
<li><a href="../ar479622/index.html">ููู ูุนูู ุงููููุฐุฌ ุงูุฃููู ูููุนุงููุงุช ูุฌูููุฉ ุงููุตุฏุฑ ุนูู blockchain Waves</a></li>
<li><a href="../ar479624/index.html">Postgres Professional gendar Oleg Bartunov ูุฎุจุฑ Faride Roslovets ุนู PostgreSQL ูุงูุฃุนูุงู ูู ุฑูุณูุง</a></li>
<li><a href="../ar479636/index.html">ูููุฉ ุงูููุงุญุฉ ุงูุฎุงุตุฉ. ุฃูุถู ูู ุฑูุณุ</a></li>
<li><a href="../ar479642/index.html">ููู ุฃุฏุช ุงููุฑุงุฑุงุช ุงูุบุจูุฉ ุนูุฏ ุชุตููู ุทุงุฆุฑุฉ ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุซุงููุฉ ุฅูู ุฅูุดุงุก ูุงููุชูุด</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>