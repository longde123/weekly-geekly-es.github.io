<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üà¥ üë®‚Äçüë©‚Äçüë¶ üë≥üèø Schreiben einer API in Python (mit Flask und RapidAPI) üè™ üê£ üòé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn Sie diesen Artikel lesen, sind Sie wahrscheinlich bereits mit den M√∂glichkeiten vertraut, die sich durch die API (Application Programming Interfa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Schreiben einer API in Python (mit Flask und RapidAPI)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/464705/"><img src="https://habrastorage.org/getpro/habr/post_images/ba3/254/0ba/ba32540bab550e3f4f1f33db01f28d00.jpg"><br><br>  Wenn Sie diesen Artikel lesen, sind Sie wahrscheinlich bereits mit den M√∂glichkeiten vertraut, die sich durch die API (Application Programming Interface) er√∂ffnen. <br><br>  Durch Hinzuf√ºgen einer der vielen offenen APIs zu Ihrer Anwendung k√∂nnen Sie die Funktionalit√§t dieser Anwendung erweitern oder durch die erforderlichen Daten erg√§nzen.  Aber was ist, wenn Sie eine einzigartige Funktion entwickelt haben, die Sie mit der Community teilen m√∂chten? <br><a name="habracut"></a><br>  Die Antwort ist einfach: Sie m√ºssen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ihre eigene API erstellen</a> . <br><br>  Trotz der Tatsache, dass es auf den ersten Blick wie eine entmutigende Aufgabe erscheint, ist tats√§chlich alles einfach.  Wir zeigen Ihnen, wie das mit Python geht. <br><br><h3>  Was Sie brauchen, um loszulegen </h3><br>  Um die API zu entwickeln, ben√∂tigen Sie: <br><br><ul><li>  Python 3 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flask</a> - ein einfaches und benutzerfreundliches Framework zum Erstellen von Webanwendungen; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flask-RESTful</a> ist eine Erweiterung f√ºr Flask, mit der Sie schnell und mit minimaler Konfiguration eine REST-API entwickeln k√∂nnen. </li></ul><br>  Die Installation wird mit dem folgenden Befehl ausgef√ºhrt: <br><br><pre><code class="python hljs">pip install flask-restful</code> </pre> <br><blockquote>  <b>Empfohlene kostenlose Intensivprogrammierung f√ºr Anf√§nger:</b> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Telegramm-Bot-Entwicklung in C #</a> - 26. bis 28. August.  <i>Kostenloses Intensivprogramm, mit dem Sie verstehen, wie die Assistenten-Bots in den Funktionen der Arbeit mit der Telegramm-API und anderen Nuancen funktionieren.</i>  <i>Die drei besten Teilnehmer erhalten 30.000 Rubel von Skillbox</i> . <br></blockquote>  <b>Bevor Sie anfangen</b> <br><br>  Wir werden eine RESTful-API mit grundlegenden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CRUID-Funktionen entwickeln</a> . <br><br>  Um das Problem vollst√§ndig zu verstehen, schauen wir uns die beiden oben genannten Begriffe an. <br><br>  <b>Was ist REST?</b> <br><br>  Die REST-API (Representational State Transfer) ist eine API, die HTTP-Anforderungen zum Datenaustausch verwendet. <br><br>  REST-APIs m√ºssen bestimmte Kriterien erf√ºllen: <br><br><ul><li>  Client-Server-Architektur: Der Client interagiert mit der Benutzeroberfl√§che und der Server interagiert mit dem Backend und dem Data Warehouse.  Der Client und der Server sind unabh√§ngig voneinander. Jeder von ihnen kann separat vom anderen ersetzt werden. </li><li>  Statuslos - Auf dem Server werden keine Clientdaten gespeichert.  Der Sitzungsstatus wird auf der Clientseite gespeichert. </li><li>  Cachef√§higkeit - Clients k√∂nnen Serverantworten zwischenspeichern, um die Gesamtleistung zu verbessern. </li></ul><br>  <b>Was ist ein CRUD?</b> <br><br>  <b>CRUD</b> ist ein Programmierkonzept, das vier grundlegende Aktionen beschreibt (Erstellen, Lesen, Aktualisieren und L√∂schen). <br><br>  In der REST-API sind Anforderungstypen und Anforderungsmethoden f√ºr Aktionen wie Ver√∂ffentlichen, Abrufen, Setzen, L√∂schen verantwortlich. <br><br>  Nachdem wir die grundlegenden Begriffe herausgefunden haben, k√∂nnen Sie mit der Erstellung der API beginnen. <br><br><h3>  Entwicklung </h3><br>  Lassen Sie uns ein Repository mit Zitaten √ºber k√ºnstliche Intelligenz erstellen.  KI ist heute eine der am schnellsten wachsenden Technologien, und Python ist ein beliebtes Werkzeug f√ºr die Arbeit mit KI. <br><br>  Mit dieser API kann ein Python-Entwickler schnell Informationen √ºber KI erhalten und sich von neuen Entwicklungen inspirieren lassen.  Wenn der Entwickler wertvolle Gedanken zu diesem Thema hat, kann er diese dem Repository hinzuf√ºgen. <br><br>  Beginnen wir mit dem Importieren der erforderlichen Module und der Konfiguration von Flask: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> flask <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Flask <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> flask_restful <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Api, Resource, reqparse <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random app = Flask(__name__) api = Api(app)</code> </pre> <br>  In diesem Snippet sind Flask, Api und Resource die Klassen, die wir ben√∂tigen. <br><br>  Reqparse ist eine Flask-RESTful-Anforderungsanalyse-Schnittstelle ... Sie ben√∂tigen au√üerdem ein Zufallsmodul, um ein Zufallszitat anzuzeigen. <br><br>  Jetzt erstellen wir ein AI Quotes Repository. <br><br>  Jeder Repo-Eintrag enth√§lt: <br><br><ul><li>  Digitale ID </li><li>  Name des Autors des Zitats; </li><li>  Zitat. </li></ul><br>  Da dies nur ein Beispiel f√ºr das Training ist, speichern wir alle Eintr√§ge in einer Python-Liste.  In einer realen Anwendung w√ºrden wir h√∂chstwahrscheinlich stattdessen eine Datenbank verwenden. <br><br><pre> <code class="python hljs">ai_quotes = [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Kevin Kelly"</span></span>, <span class="hljs-string"><span class="hljs-string">"quote"</span></span>: <span class="hljs-string"><span class="hljs-string">"The business plans of the next 10,000 startups are easy to forecast: "</span></span> + <span class="hljs-string"><span class="hljs-string">"Take X and add AI."</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Stephen Hawking"</span></span>, <span class="hljs-string"><span class="hljs-string">"quote"</span></span>: <span class="hljs-string"><span class="hljs-string">"The development of full artificial intelligence could "</span></span> + <span class="hljs-string"><span class="hljs-string">"spell the end of the human race‚Ä¶ "</span></span> + <span class="hljs-string"><span class="hljs-string">"It would take off on its own, and re-design "</span></span> + <span class="hljs-string"><span class="hljs-string">"itself at an ever increasing rate. "</span></span> + <span class="hljs-string"><span class="hljs-string">"Humans, who are limited by slow biological evolution, "</span></span> + <span class="hljs-string"><span class="hljs-string">"couldn't compete, and would be superseded."</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Claude Shannon"</span></span>, <span class="hljs-string"><span class="hljs-string">"quote"</span></span>: <span class="hljs-string"><span class="hljs-string">"I visualize a time when we will be to robots what "</span></span> + <span class="hljs-string"><span class="hljs-string">"dogs are to humans, "</span></span> + <span class="hljs-string"><span class="hljs-string">"and I'm rooting for the machines."</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Elon Musk"</span></span>, <span class="hljs-string"><span class="hljs-string">"quote"</span></span>: <span class="hljs-string"><span class="hljs-string">"The pace of progress in artificial intelligence "</span></span> + <span class="hljs-string"><span class="hljs-string">"(I'm not referring to narrow AI) "</span></span> + <span class="hljs-string"><span class="hljs-string">"is incredibly fast. Unless you have direct "</span></span> + <span class="hljs-string"><span class="hljs-string">"exposure to groups like Deepmind, "</span></span> + <span class="hljs-string"><span class="hljs-string">"you have no idea how fast ‚Äî it is growing "</span></span> + <span class="hljs-string"><span class="hljs-string">"at a pace close to exponential. "</span></span> + <span class="hljs-string"><span class="hljs-string">"The risk of something seriously dangerous "</span></span> + <span class="hljs-string"><span class="hljs-string">"happening is in the five-year timeframe."</span></span> + <span class="hljs-string"><span class="hljs-string">"10 years at most."</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Geoffrey Hinton"</span></span>, <span class="hljs-string"><span class="hljs-string">"quote"</span></span>: <span class="hljs-string"><span class="hljs-string">"I have always been convinced that the only way "</span></span> + <span class="hljs-string"><span class="hljs-string">"to get artificial intelligence to work "</span></span> + <span class="hljs-string"><span class="hljs-string">"is to do the computation in a way similar to the human brain. "</span></span> + <span class="hljs-string"><span class="hljs-string">"That is the goal I have been pursuing. We are making progress, "</span></span> + <span class="hljs-string"><span class="hljs-string">"though we still have lots to learn about "</span></span> + <span class="hljs-string"><span class="hljs-string">"how the brain actually works."</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Pedro Domingos"</span></span>, <span class="hljs-string"><span class="hljs-string">"quote"</span></span>: <span class="hljs-string"><span class="hljs-string">"People worry that computers will "</span></span> + <span class="hljs-string"><span class="hljs-string">"get too smart and take over the world, "</span></span> + <span class="hljs-string"><span class="hljs-string">"but the real problem is that they're too stupid "</span></span> + <span class="hljs-string"><span class="hljs-string">"and they've already taken over the world."</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Alan Turing"</span></span>, <span class="hljs-string"><span class="hljs-string">"quote"</span></span>: <span class="hljs-string"><span class="hljs-string">"It seems probable that once the machine thinking "</span></span> + <span class="hljs-string"><span class="hljs-string">"method had started, it would not take long "</span></span> + <span class="hljs-string"><span class="hljs-string">"to outstrip our feeble powers‚Ä¶ "</span></span> + <span class="hljs-string"><span class="hljs-string">"They would be able to converse "</span></span> + <span class="hljs-string"><span class="hljs-string">"with each other to sharpen their wits. "</span></span> + <span class="hljs-string"><span class="hljs-string">"At some stage therefore, we should "</span></span> + <span class="hljs-string"><span class="hljs-string">"have to expect the machines to take control."</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Ray Kurzweil"</span></span>, <span class="hljs-string"><span class="hljs-string">"quote"</span></span>: <span class="hljs-string"><span class="hljs-string">"Artificial intelligence will reach "</span></span> + <span class="hljs-string"><span class="hljs-string">"human levels by around 2029. "</span></span> + <span class="hljs-string"><span class="hljs-string">"Follow that out further to, say, 2045, "</span></span> + <span class="hljs-string"><span class="hljs-string">"we will have multiplied the intelligence, "</span></span> + <span class="hljs-string"><span class="hljs-string">"the human biological machine intelligence "</span></span> + <span class="hljs-string"><span class="hljs-string">"of our civilization a billion-fold."</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Sebastian Thrun"</span></span>, <span class="hljs-string"><span class="hljs-string">"quote"</span></span>: <span class="hljs-string"><span class="hljs-string">"Nobody phrases it this way, but I think "</span></span> + <span class="hljs-string"><span class="hljs-string">"that artificial intelligence "</span></span> + <span class="hljs-string"><span class="hljs-string">"is almost a humanities discipline. It's really an attempt "</span></span> + <span class="hljs-string"><span class="hljs-string">"to understand human intelligence and human cognition."</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Andrew Ng"</span></span>, <span class="hljs-string"><span class="hljs-string">"quote"</span></span>: <span class="hljs-string"><span class="hljs-string">"We're making this analogy that AI is the new electricity."</span></span> + <span class="hljs-string"><span class="hljs-string">"Electricity transformed industries: agriculture, "</span></span> + <span class="hljs-string"><span class="hljs-string">"transportation, communication, manufacturing."</span></span> } ]</code> </pre> <br>  Jetzt m√ºssen wir ein Ressourcenklassen-Angebot erstellen, das die Operationen der Endpunkte unserer API bestimmt.  Innerhalb der Klasse m√ºssen vier Methoden deklariert werden: get, post, put, delete. <br><br>  <b>Beginnen wir mit der GET-Methode.</b> <br><br>  Es ist m√∂glich, ein bestimmtes Angebot durch Angabe seiner ID oder eines zuf√§lligen Angebots zu erhalten, wenn die ID nicht angegeben ist. <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Quote</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Resource)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, id=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> id == <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> random.choice(ai_quotes), <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> quote <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ai_quotes: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(quote[<span class="hljs-string"><span class="hljs-string">"id"</span></span>] == id): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> quote, <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Quote not found"</span></span>, <span class="hljs-number"><span class="hljs-number">404</span></span></code> </pre> <br>  Die GET-Methode gibt ein zuf√§lliges Anf√ºhrungszeichen zur√ºck, wenn die ID einen Standardwert enth√§lt, d. H.  Beim Aufruf der Methode wurde keine ID festgelegt. <br><br>  Wenn es angegeben ist, sucht die Methode in Anf√ºhrungszeichen und findet eines, das die angegebene ID enth√§lt.  Wird nichts gefunden, wird die Meldung ‚ÄûAngebot nicht gefunden, 404‚Äú angezeigt. <br><br>  Denken Sie daran: Die Methode gibt einen HTTP-Status von 200 zur√ºck, wenn die Anforderung erfolgreich ist, und 404, wenn der Datensatz nicht gefunden wird. <br><br>  Erstellen wir nun eine POST-Methode, um dem Repository ein neues Angebot hinzuzuf√ºgen <br><br>  W√§hrend der Eingabe erh√§lt es die Kennung jedes neuen Angebots.  Dar√ºber hinaus verwendet POST reqparse, um die Parameter zu analysieren, die im Anforderungshauptteil (Autor und Zitiertext) gespeichert werden. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">post</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, id)</span></span></span><span class="hljs-function">:</span></span> parser = reqparse.RequestParser() parser.add_argument(<span class="hljs-string"><span class="hljs-string">"author"</span></span>) parser.add_argument(<span class="hljs-string"><span class="hljs-string">"quote"</span></span>) params = parser.parse_args() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> quote <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ai_quotes: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(id == quote[<span class="hljs-string"><span class="hljs-string">"id"</span></span>]): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">f"Quote with id </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{id}</span></span></span><span class="hljs-string"> already exists"</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span> quote = { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: int(id), <span class="hljs-string"><span class="hljs-string">"author"</span></span>: params[<span class="hljs-string"><span class="hljs-string">"author"</span></span>], <span class="hljs-string"><span class="hljs-string">"quote"</span></span>: params[<span class="hljs-string"><span class="hljs-string">"quote"</span></span>] } ai_quotes.append(quote) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> quote, <span class="hljs-number"><span class="hljs-number">201</span></span></code> </pre> <br>  Im obigen Code hat die POST-Methode die Angebots-ID akzeptiert.  Dann holte er mit reqparse den Autor und ein Zitat aus der Abfrage und speicherte sie im params-W√∂rterbuch. <br><br>  Wenn bereits ein Angebot mit der angegebenen ID vorhanden ist, zeigt das Verfahren die entsprechende Nachricht und den entsprechenden Code 400 an. <br><br>  Wenn noch kein Angebot mit der angegebenen ID erstellt wurde, erstellt die Methode einen neuen Datensatz mit der angegebenen ID und dem angegebenen Autor sowie anderen Parametern.  Anschlie√üend f√ºgt er der Liste ai_quotes einen Eintrag hinzu und gibt einen Eintrag mit einem neuen Anf√ºhrungszeichen zusammen mit dem Code 201 zur√ºck. <br><br>  Erstellen Sie nun eine PUT-Methode, um ein vorhandenes Angebot im Repository zu √§ndern. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">put</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, id)</span></span></span><span class="hljs-function">:</span></span> parser = reqparse.RequestParser() parser.add_argument(<span class="hljs-string"><span class="hljs-string">"author"</span></span>) parser.add_argument(<span class="hljs-string"><span class="hljs-string">"quote"</span></span>) params = parser.parse_args() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> quote <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ai_quotes: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(id == quote[<span class="hljs-string"><span class="hljs-string">"id"</span></span>]): quote[<span class="hljs-string"><span class="hljs-string">"author"</span></span>] = params[<span class="hljs-string"><span class="hljs-string">"author"</span></span>] quote[<span class="hljs-string"><span class="hljs-string">"quote"</span></span>] = params[<span class="hljs-string"><span class="hljs-string">"quote"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> quote, <span class="hljs-number"><span class="hljs-number">200</span></span> quote = { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: id, <span class="hljs-string"><span class="hljs-string">"author"</span></span>: params[<span class="hljs-string"><span class="hljs-string">"author"</span></span>], <span class="hljs-string"><span class="hljs-string">"quote"</span></span>: params[<span class="hljs-string"><span class="hljs-string">"quote"</span></span>] } ai_quotes.append(quote) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> quote, <span class="hljs-number"><span class="hljs-number">201</span></span></code> </pre> <br>  Die PUT-Methode verwendet √§hnlich wie im vorherigen Beispiel ID und Eingabe und analysiert Anf√ºhrungszeichenparameter mithilfe von reqparse. <br><br>  Wenn ein Angebot mit der angegebenen ID vorhanden ist, aktualisiert das Verfahren es mit neuen Parametern und zeigt dann ein aktualisiertes Angebot mit dem Code 200 an. Wenn kein Angebot mit der angegebenen ID vorhanden ist, wird ein neuer Datensatz mit dem Code 201 erstellt. <br><br>  Lassen Sie uns abschlie√üend eine DELETE-Methode erstellen, um ein Zitat zu entfernen, das nicht mehr inspirierend ist. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, id)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> ai_quotes ai_quotes = [qoute <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> qoute <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ai_quotes <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> qoute[<span class="hljs-string"><span class="hljs-string">"id"</span></span>] != id] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">f"Quote with id </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{id}</span></span></span><span class="hljs-string"> is deleted."</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span></code> </pre> <br>  Diese Methode ruft w√§hrend der Eingabe die Angebots-ID ab und aktualisiert die Liste ai_quotes mithilfe einer allgemeinen Liste. <br><br>  Nachdem wir alle Methoden erstellt haben, m√ºssen wir nur noch die Ressource zur API hinzuf√ºgen, den Pfad festlegen und Flask ausf√ºhren. <br><br><pre> <code class="python hljs">api.add_resource(Quote, <span class="hljs-string"><span class="hljs-string">"/ai-quotes"</span></span>, <span class="hljs-string"><span class="hljs-string">"/ai-quotes/"</span></span>, <span class="hljs-string"><span class="hljs-string">"/ai-quotes/&lt;int:id&gt;"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: app.run(debug=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre> <br>  Unser REST API Service ist fertig! <br><br>  Als N√§chstes k√∂nnen wir den Code in der Datei app.py speichern, indem wir ihn in der Konsole mit dem folgenden Befehl ausf√ºhren: <br><br><pre> <code class="python hljs">python3 app.py</code> </pre> <br>  Wenn alles in Ordnung ist, bekommen wir so etwas: <br><br>  <i>* Debug-Modus: Ein</i> <i><br></i>  <i>* L√§uft unter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">127.0.0.1</a> : 5000 / (Dr√ºcken Sie STRG + C, um das Programm zu beenden.)</i> <i><br></i>  <i>* Neustart mit stat</i> <i><br></i>  <i>* Debugger ist aktiv!</i> <i><br></i>  <i>* Debugger-PIN: XXXXXXX</i> <br><br>  <b>API testen</b> <br><br>  Nachdem die API erstellt wurde, muss sie getestet werden. <br><br>  Dies kann mit dem Curl Console-Dienstprogramm oder dem Insomnia REST-Client oder durch Ver√∂ffentlichen der API in der Rapid-API erfolgen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/07d/0ba/ac3/07d0baac377bd2cd2667b7c457740e64.png"><br><br>  <b>Ver√∂ffentlichen Sie unsere API</b> <br><br>  RapidAPI ist der weltweit gr√∂√üte Marktplatz mit mehr als 10.000 APIs (und etwa 1 Million Entwicklern). <br><br>  RapidAPI bietet nicht nur eine einzige Schnittstelle f√ºr die Arbeit mit APIs von Drittanbietern, sondern bietet Ihnen auch die M√∂glichkeit, Ihre eigene API schnell und einfach zu ver√∂ffentlichen. <br><br>  Dazu m√ºssen Sie es zun√§chst auf einem Server im Netzwerk ver√∂ffentlichen.  In unserem Fall werden wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Heroku verwenden</a> .  Die Arbeit mit ihm sollte keine Schwierigkeiten bereiten ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mehr √ºber ihn erfahren Sie hier</a> ). <br><br>  <b>So ver√∂ffentlichen Sie Ihre API auf Heroku</b> <br><br>  <i><b>1. Installieren Sie Heroku.</b></i> <br><br>  Der erste Schritt besteht darin, die Heroku Command Line Interface (CLI) zu registrieren und zu installieren.  Dies funktioniert unter Ubuntu 16+. <br><br>  <i>sudo snap install heroku --classic</i> <br><br>  Dann melden Sie sich an: <br><br>  <i>Heroku Login</i> <br><br>  <i><b>2. F√ºgen Sie die erforderlichen Dateien hinzu.</b></i> <br><br>  Jetzt m√ºssen wir die Dateien zur Ver√∂ffentlichung dem Ordner in unserer Anwendung hinzuf√ºgen: <br><br><ul><li>  require.txt mit einer Liste der erforderlichen Python-Module; </li><li>  Procfile, das angibt, welche Befehle ausgef√ºhrt werden m√ºssen, um die Anwendung zu starten. </li><li>  .gitignore - um Dateien auszuschlie√üen, die auf dem Server nicht ben√∂tigt werden. </li></ul><br>  Die Datei require.txt enth√§lt die folgenden Zeilen: <br><br><ul><li>  Flasche </li><li>  flaschenruhe </li><li>  Gunicorn </li></ul><br>  Bitte beachten Sie: Wir haben Gunicorn (Python WSGI HTTP Server) zur Liste hinzugef√ºgt, da wir unsere Anwendung auf dem Server ausf√ºhren m√ºssen. <br><br>  Procfile enth√§lt: <br><br>  <i>Web: Gunicorn App: App</i> <br><br>  Der Inhalt von .gitignore: <br><br><pre> <code class="1c hljs">*.pyc __pycache__/</code> </pre> <br>  Nachdem die Dateien erstellt wurden, initialisieren wir das Git-Repo und legen fest: <br><br><pre> <code class="plaintext hljs">git init git add git commit -m "First API commit"</code> </pre> <br>  <i><b>3. Erstellen Sie eine neue Heroku-Anwendung.</b></i> <br><br><pre> <code class="plaintext hljs">heroku create</code> </pre> <br>  Wir senden den Hauptzweig an das entfernte Heroku-Repo: <br><br><pre> <code class="plaintext hljs">git push heroku master</code> </pre> <br>  Jetzt k√∂nnen Sie den API-Dienst mit den folgenden Befehlen √∂ffnen: <br><br><pre> <code class="plaintext hljs">heroku ps:scale web=1 heroku open</code> </pre><br>  Die API ist unter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">your-random-heroku-name.herokuapp.com/ai-quotes</a> verf√ºgbar. <br><br>  <b>So f√ºgen Sie Ihre Python-API zum RapidAPI-Marktplatz hinzu</b> <br><br>  Nachdem der API-Dienst auf Heroku ver√∂ffentlicht wurde, k√∂nnen Sie ihn der Rapid-API hinzuf√ºgen.  Hier finden Sie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ausf√ºhrliche Dokumentation</a> zu diesem Thema. <br><br>  <i><b>1. Erstellen Sie ein RapidAPI-Konto.</b></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f3a/35d/013/f3a35d01372d9c998e7508a59b9a7d69.png"><br><br>  Registrieren Sie ein kostenloses Konto - dies kann √ºber Facebook, Google, GitHub erfolgen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4be/9c2/c7d/4be9c2c7da982571aa16f7e715784409.png"><br><br>  <i><b>2. F√ºgen Sie die API zur Systemsteuerung hinzu.</b></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b38/733/cc5/b38733cc584694eabd37b360a44d42ea.png"><br><br>  <i><b>3. Geben Sie als N√§chstes allgemeine Informationen zu Ihrer API ein.</b></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/414/804/fd7/414804fd7b343aeb691fed695f16e392.png"><br><br>  <i><b>4. Nachdem Sie auf "API hinzuf√ºgen" geklickt haben, wird eine neue Seite angezeigt, auf der Sie Informationen zu unserer API eingeben k√∂nnen.</b></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b39/9dd/c4d/b399ddc4d329fab9e95cf77f34dbd583.png"><br><br>  <i><b>5. Jetzt k√∂nnen Sie entweder die API-Endpunkte manuell eingeben oder die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Swagger-Datei</a> mit OpenAPI herunterladen.</b></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f7/1e6/950/3f71e695060c691e115bc4c54b9f08d8.png"><br><br>  Nun m√ºssen wir die Endpunkte unserer API auf der Seite Endpunkte festlegen.  In unserem Fall entsprechen die Endpunkte dem CRUD-Konzept (abrufen, ver√∂ffentlichen, setzen, l√∂schen). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/42a/c79/eb7/42ac79eb7ba7699e71d93bf79030d0b6.png"><br><br>  Als N√§chstes m√ºssen Sie den Endpunkt GET AI Quote erstellen, auf dem ein zuf√§lliges Anf√ºhrungszeichen (falls die ID Standard ist) oder ein Anf√ºhrungszeichen f√ºr die angegebene ID angezeigt wird. <br><br>  Klicken Sie zum Erstellen eines Endpunkts auf die Schaltfl√§che ‚ÄûEndpunkt erstellen‚Äú. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a7b/82b/ef1/a7b82bef117a91a931584c6c07c63a89.png"><br><br>  Wiederholen Sie diesen Vorgang f√ºr alle anderen API-Endpunkte.  Das ist alles!  Herzlichen Gl√ºckwunsch, Sie haben Ihre API ver√∂ffentlicht! <br><br>  Wenn alles in Ordnung ist, sieht die API-Seite ungef√§hr so ‚Äã‚Äãaus: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/83e/14e/200/83e14e2002bd3a6b85148557c79cb050.png"><br><br><h3>  Fazit </h3><br>  In diesem Artikel haben wir den Prozess des Erstellens eines eigenen RESTful API-Dienstes in Python sowie den Prozess des Publizierens einer API in der Heroku-Cloud und des Hinzuf√ºgens zum RapidAPI-Verzeichnis untersucht. <br><br>  In der Testversion wurden jedoch nur die Grundprinzipien der API-Entwicklung gezeigt - Nuancen wie Sicherheit, Fehlertoleranz und Skalierbarkeit wurden nicht ber√ºcksichtigt. <br><br>  Bei der Entwicklung einer echten API muss all dies ber√ºcksichtigt werden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de464705/">https://habr.com/ru/post/de464705/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de464687/index.html">Wenn Sie die Welt retten wollen, ist Veganismus keine Option</a></li>
<li><a href="../de464689/index.html">Panda Frontend Meetup # 22 Inhalt: Plugins, anspruchsvolle Daten, Tests, deklarative Angular</a></li>
<li><a href="../de464691/index.html">Die Ergebnisse des Standoff-Cyberkampfs oder Wie das PT Expert Security Center Angreifer im Auge behalten hat</a></li>
<li><a href="../de464695/index.html">Interpretiertes Modell des maschinellen Lernens. Teil 1</a></li>
<li><a href="../de464701/index.html">Effektive Startup-Site: Wie Kunden, Partner und Investoren eine Site m√∂gen</a></li>
<li><a href="../de464709/index.html">Lebendig und lebendig: Ransomware-Viren im Jahr 2019</a></li>
<li><a href="../de464711/index.html">Die Zahnfee funktioniert hier nicht: die Schmelzstruktur der Z√§hne von Krokodilen und ihren pr√§historischen Vorfahren</a></li>
<li><a href="../de464713/index.html">Algoreve: Wie Programmierer Partys veranstalten</a></li>
<li><a href="../de464717/index.html">Freiberufliche W√§chter</a></li>
<li><a href="../de464721/index.html">Wie ich die Oracle Database SQL-Zertifizierung vorbereitet und bestanden habe (1Z0-071)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>