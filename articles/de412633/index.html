<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🤝‍👩🏻 🛌🏾 👨🏿‍🤝‍👨🏽 Erfahrung in der Konfiguration und Verwendung von WSL (Linux-Subsystem in Windows 10) 🕺🏿 ⚡️ 🤴🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich wurde aufgefordert, diesen Artikel durch eine Frage zum Toaster im Zusammenhang mit WSL zu schreiben. Nachdem ich vor ungefähr sechs Monaten mehre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erfahrung in der Konfiguration und Verwendung von WSL (Linux-Subsystem in Windows 10)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412633/"><p>  Ich wurde aufgefordert, diesen Artikel durch eine Frage zum Toaster im Zusammenhang mit WSL zu schreiben.  Nachdem ich vor ungefähr sechs Monaten mehrere Jahre lang Systeme auf dem Linux-Kernel verwendet hatte, wechselte ich zu Windows 10 auf einem Heim-PC.  Die Abhängigkeit von der Terminal- und Linux-Umgebung in meiner Arbeit führte mich fast sofort zu der Frage: Installieren Sie entweder eine virtuelle Maschine oder versuchen Sie es mit WSL.  Ich entschied mich für die zweite und war rundum zufrieden. </p><br><p>  Unter der Katze erkläre ich Ihnen, wie Sie WSL installieren und konfigurieren, auf welche Probleme und Einschränkungen ich gestoßen bin, wie Linux-Anwendungen unter Windows ausgeführt werden und umgekehrt sowie wie Sie Xfce-Umgebungselemente in die Windows-Desktopumgebung integrieren. </p><br><p><img src="https://habrastorage.org/webt/-0/ns/in/-0nsinltsgqffm37apocivmp4d8.png"></p><a name="habracut"></a><br><p>  Ich hätte nie gedacht, dass ich eines Tages wieder auf Windows sein würde, aber eine Kombination von Umständen gab mir einen Grund, es zu versuchen: Meine Frau, die weit von der IT entfernt war, zog fast jedes Mal, wenn sie einen Computer benutzen musste;  weckte Nostalgie für ein Spiel, aber sie wollte nicht angemessen unter Wein arbeiten;  und dann gaben sie mir eine Windows 10 Pro Box.  Ich habe WSL fast unmittelbar nach der Installation des Systems installiert, mehrere Abende herumgespielt und festgestellt, dass das Produkt für meine Aufgaben geeignet ist, aber ich möchte ein vertrauteres Terminal und im Allgemeinen einige Annehmlichkeiten. </p><br><h3 id="ustanovka-wsl-i-distributiva">  Installieren Sie WSL und Distribution </h3><br><p> <code>lxrun /install</code> Sie sofort eine Reservierung vor. Im Internet finden Sie eine Beschreibung der Installation, indem Sie den Befehl <code>lxrun /install</code> in der Befehlszeile oder in der PowerShell-Konsole <code>lxrun /install</code> .  Diese Methode funktioniert nicht mehr (nach der Veröffentlichung von WSL in einer stabilen Version).  Soweit ich weiß, kann WSL jetzt nur zusammen mit Ihrer bevorzugten Distribution aus dem Microsoft Store installiert werden. </p><br><p>  Ich stelle außerdem fest, dass bei der Installation die Distributionen OpenSUSE, SUSE Linux Enterprise und Ubuntu 16.04 zur Auswahl standen - die letzte, die ich installiert habe.  Ubuntu 18.04, Debian 9 und Kali Linux sind ebenfalls verfügbar, und andere Distributionen werden möglicherweise angezeigt.  Die Installationsschritte können variieren.  Einige der im Artikel beschriebenen Probleme sind möglicherweise bereits behoben. </p><br><p>  Wir finden die gewünschte Distribution im Store und installieren sie.  Die Installation ist schnell, da nur der Linux-Kernel-Emulator und das Dienstprogramm zum Starten des Subsystems heruntergeladen werden, das sich in drei Fällen im Systemordner befindet: wsl.exe, bash.exe und ubuntu.exe (anstelle von ubuntu wird der Name Ihres Distributionskits angezeigt).  Alle von ihnen sind gleichwertig und tun dasselbe - sie führen ihren eigenen Terminalemulator aus, in dem Linux'ovy Bash unter dem Kernel-Emulator arbeitet.  Beim ersten Start werden wir aufgefordert, einen Standardbenutzernamen und ein Standardkennwort für den Benutzer anzugeben. Danach wird die Distribution direkt installiert.  Geben Sie als Standardbenutzer root ohne Kennwort an. Dies ist für weitere Schritte erforderlich.  Die Sicherheit wird nicht beeinträchtigt. Außerdem habe ich bei der Vorbereitung der Materialien für den Artikel im englischsprachigen Lernprogramm festgestellt, dass neue Versionen von WSL jetzt den Standard-Root-Benutzer ohne Kennwort ohne unnötige Fragen zum Standardbenutzer machen. </p><br><p>  Wir warten auf die Installation.  Als nächstes müssen Sie zuerst die passenden Spiegel für das nächste aktualisieren.  Dazu benötigen Sie einen CLI-Texteditor.  Nur vi ist enthalten, aber ich bevorzuge Nano mehr, also sage ich: </p><br><pre> <code class="bash hljs">apt install nano</code> </pre> <br><p>  sudo ist nicht erforderlich, da wir bereits root sind.  Bearbeiten Sie die Datei /etc/apt/sources.list: </p><br><pre> <code class="bash hljs">nano /etc/apt/sources.list</code> </pre> <br><p>  Yandex-Spiegel funktionieren am besten für mich, daher sieht meine Datei folgendermaßen aus: </p><br><pre> <code class="hljs ruby">deb <span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/ubuntu</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ xenial main universe restricted deb-src http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/ubuntu</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ xenial main universe restricted deb http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/ubuntu</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ xenial-security main universe restricted deb-src http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/ubuntu</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ xenial-security main universe restricted deb http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/ubuntu</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ xenial-updates main universe restricted deb-src http:/</span></span><span class="hljs-regexp"><span class="hljs-regexp">/mirror.yandex.ru/ubuntu</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ xenial-updates main universe restricted</span></span></code> </pre> <br><p>  Drücken Sie zum Speichern Strg + O und zum Beenden Strg + X.  Jetzt können Sie das System auf den aktuellen Status aktualisieren: </p><br><pre> <code class="bash hljs">apt update &amp;&amp; apt upgrade</code> </pre> <br><p>  Nach dem Update können Sie unseren Hauptbenutzer erstellen.  In diesem Artikel werde ich es user1 nennen, aber Sie können den üblichen Namen angeben: </p><br><pre> <code class="bash hljs">addgroup --gid 1000 user1 adduser --home /home/user1 --shell /bin/bash --uid 1000 -G user1,sudo user1</code> </pre> <br><p>  Gehen Sie als Nächstes zum Ordner des Benutzers, gehen Sie darunter, legen Sie ein Kennwort fest und bearbeiten Sie die Datei ~ / .bashrc: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/user1 su user1 passwd nano .bashrc</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Meine grundlegende .bashrc sieht so aus</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># If not running interactively, don't do anything case $- in *i*) ;; *) return;; esac # don't put duplicate lines or lines starting with space in the history. # See bash(1) for more options HISTCONTROL=ignoreboth # append to the history file, don't overwrite it shopt -s histappend # for setting history length see HISTSIZE and HISTFILESIZE in bash(1) HISTSIZE=1000 HISTFILESIZE=2000 # check the window size after each command and, if necessary, # update the values of LINES and COLUMNS. shopt -s checkwinsize # If set, the pattern "**" used in a pathname expansion context will # match all files and zero or more directories and subdirectories. #shopt -s globstar # make less more friendly for non-text input files, see lesspipe(1) [ -x /usr/bin/lesspipe ] &amp;&amp; eval "$(SHELL=/bin/sh lesspipe)" # set variable identifying the chroot you work in (used in the prompt below) if [ -z "${debian_chroot:-}" ] &amp;&amp; [ -r /etc/debian_chroot ]; then debian_chroot=$(cat /etc/debian_chroot) fi # set a fancy prompt (non-color, unless we know we "want" color) case "$TERM" in xterm|xterm-color|*-256color) color_prompt=yes;; esac # uncomment for a colored prompt, if the terminal has the capability; turned # off by default to not distract the user: the focus in a terminal window # should be on the output of commands, not on the prompt #force_color_prompt=yes if [ -n "$force_color_prompt" ]; then if [ -x /usr/bin/tput ] &amp;&amp; tput setaf 1 &gt;&amp;/dev/null; then # We have color support; assume it's compliant with Ecma-48 # (ISO/IEC-6429). (Lack of such support is extremely rare, and such # a case would tend to support setf rather than setaf.) color_prompt=yes else color_prompt= fi fi if [ "$color_prompt" = yes ]; then if [[ ${EUID} == 0 ]] ; then PS1='${debian_chroot:+($debian_chroot)}\[\033[01;31m\]\h\[\033[01;34m\] \W \$\[\033[00m\] ' else PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\] \[\033[01;34m\]\w \$\[\033[00m\] ' fi else PS1='${debian_chroot:+($debian_chroot)}\u@\h \w \$ ' fi unset color_prompt force_color_prompt # If this is an xterm set the title to user@host:dir case "$TERM" in xterm*|rxvt*) PS1="\[\e]0;${debian_chroot:+($debian_chroot)}\u@\h \w\a\]$PS1" ;; *) ;; esac # enable color support of ls and also add handy aliases if [ -x /usr/bin/dircolors ]; then test -r ~/.dircolors &amp;&amp; eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)" alias ls='ls --color=auto' #alias dir='dir --color=auto' #alias vdir='vdir --color=auto' alias grep='grep --color=auto' alias fgrep='fgrep --color=auto' alias egrep='egrep --color=auto' fi # colored GCC warnings and errors #export GCC_COLORS='error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01' # some more ls aliases alias ll='ls -alF' alias la='ls -A' alias l='ls -CF' # Add an "alert" alias for long running commands. Use like so: # sleep 10; alert alias alert='notify-send --urgency=low -i "$([ $? = 0 ] &amp;&amp; echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&amp;|]\s*alert$//'\'')"' # Alias definitions. # You may want to put all your additions into a separate file like # ~/.bash_aliases, instead of adding them here directly. # See /usr/share/doc/bash-doc/examples in the bash-doc package. if [ -f ~/.bash_aliases ]; then . ~/.bash_aliases fi # enable programmable completion features (you don't need to enable # this, if it's already enabled in /etc/bash.bashrc and /etc/profile # sources /etc/bash.bashrc). if ! shopt -oq posix; then if [ -f /usr/share/bash-completion/bash_completion ]; then . /usr/share/bash-completion/bash_completion elif [ -f /etc/bash_completion ]; then . /etc/bash_completion fi fi</span></span></code> </pre> </div></div><br><p>  Alles, das Subsystem ist einsatzbereit ... fast ... </p><br><h3 id="ustanovka-x-servera-xfce-i-prochih-guishnyh-prilozheniy">  Installieren von X Server-, Xfce- und anderen GUI-Anwendungen </h3><br><p>  Das erste Problem, auf das ich gestoßen bin - die Bash-Vervollständigung im vorgeschlagenen Terminalemulator hat funktioniert, um es milde und falsch auszudrücken.  Darüber hinaus weiß dieser Emulator nicht, wie Tabulatoren verwendet werden, und jede Instanz davon startet alles in einem neuen Prozessbereich mit einem separaten Init (der übrigens nicht ersetzt werden kann).  Ich wollte einen normalen Terminalemulator, einige andere GUI-Anwendungen sowie einen Socket, um alles schnell zu starten. </p><br><p>  Als ich diese Frage googelte, stieß ich auf viele Probleme, wie zum Beispiel die Notwendigkeit, dbus in das TCP-Protokoll zu übersetzen.  Im Moment gibt es keine derartigen Probleme.  Unix-Domain-Sockets funktionieren normal im Subsystem und alles kommuniziert ruhig über sie. </p><br><p>  Zunächst benötigen wir einen X-Server, der im Hauptsystem (unter Windows) installiert ist.  Persönlich verwende ich VcXsrv für diesen Zweck - den X11-Port unter Windows.  Die offizielle Website, die in etwa über das Dienstprogramm selbst angegeben ist, bietet es derzeit nicht an. Daher googeln wir das Installationsprogramm und installieren standardmäßig alles. </p><br><p>  Während der Installation kehren wir zum WSL-Terminal zurück. Mit dem Befehl exit kehren wir zum Stammverzeichnis zurück.  Konfigurieren Sie zunächst die russischen Gebietsschemas: </p><br><pre> <code class="bash hljs">locale-gen ru_RU locale-gen ru_RU.UTF-8 update-locale</code> </pre> <br><p>  Installieren Sie als Nächstes einige Xfce-Komponenten.  Natürlich können Sie es vollständig aus dem Metapaket installieren, aber wir werden die meisten Komponenten nicht benötigen, und die modulare Architektur von Xfce ermöglicht es uns, nur das Notwendige bereitzustellen: </p><br><pre> <code class="bash hljs">apt install -y xfce4-session xfce4-notifyd xfce4-appfinder xfce4-panel xfce4-quicklauncher-plugin xfce4-whiskermenu-plugin xfce4-xkb-plugin xfce4-settings xfce4-terminal xfce4-taskmanager mousepad</code> </pre> <br><p>  Es ist nicht sehr praktisch, die Umgebung jedes Mal mit Ihren Händen zu betreiben, daher habe ich diesen Prozess automatisiert.  Erstellen Sie dazu im Hauptsystem einen Ordner an einem für uns geeigneten Ort und führen Sie darin 3 Dateien aus: </p><br><ol><li>  <strong>config.xlaunch</strong> - Einstellungsdatei für VcXsrv <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">XLaunch</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">WindowMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MultiWindow"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ClientMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"NoClient"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">LocalClient</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Display</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">LocalProgram</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xcalc"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">RemoteProgram</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xterm"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">RemotePassword</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">PrivateKey</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">RemoteHost</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">RemoteUser</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">XDMCPHost</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">XDMCPBroadcast</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">XDMCPIndirect</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Clipboard</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ClipboardPrimary</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ExtraParams</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Wgl</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">DisableAC</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">XDMCPTerminate</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> </li><li><p>  <strong>x-run.vbs</strong> - Die WSL beginnt immer mit ihrem Terminalemulator. Wenn Sie sie schließen, werden alle <strong>untergeordneten</strong> Prozesse beendet.  Damit dieses Fenster keine schwieligen Augen hat, ist es schön, es versteckt laufen zu lassen.  Glücklicherweise verfügt Windows über einen integrierten VBScript-Interpreter, mit dem Sie dies in einer Zeile tun können: </p><br><pre> <code class="vbscript hljs">WScript.<span class="hljs-built_in"><span class="hljs-built_in">CreateObject</span></span>(<span class="hljs-string"><span class="hljs-string">"Shell.Application"</span></span>).ShellExecute <span class="hljs-string"><span class="hljs-string">"wsl"</span></span>, <span class="hljs-string"><span class="hljs-string">"cd /home/user1; DISPLAY=:0 LANG=ru_RU.UTF-8 su user1 -c xfce4-session"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"open"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><p>  Lassen Sie mich erklären, was hier passiert.  Wir weisen VBscript an, die wsl-Anwendung mit dem <code>cd /home/user1; DISPLAY=:0 LANG=ru_RU.UTF-8 su user1 -c xfce4-session</code>  <code>cd /home/user1; DISPLAY=:0 LANG=ru_RU.UTF-8 su user1 -c xfce4-session</code> , der <code>cd /home/user1; DISPLAY=:0 LANG=ru_RU.UTF-8 su user1 -c xfce4-session</code> ist für uns nicht wichtig, also die leere Zeile, die offene Aktion - Start, 0 - versteckter Modus.  Wir geben wsl selbst den Befehl zum Ausführen: Gehen Sie zum Benutzerordner und führen Sie mit der Einstellung der Umgebungsvariablen DISPLAY (X-Server-Anzeige) und LANG (verwendetes Gebietsschema) xfce4-session im Auftrag unseres Benutzers user1 aus (dank des Befehls su). </p><br></li><li>  <strong>start.bat</strong> - Batch-Datei, die ausgeführt werden soll. Optional können Sie sie starten <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">start</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">config</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.xlaunch</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">wscript</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x-run</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.vbs</span></span></code> </pre> </li></ol><br><p>  Als nächstes können wir unsere start.bat ausführen und das Xfce-Panel für uns selbst konfigurieren.  Ich stelle fest, dass ich hier auf ein weiteres Problem gestoßen bin: Das Bedienfeld wird perfekt über allen Fenstern angezeigt, kann sich jedoch keinen Platz wie ein Bedienfeld auf dem Windows-Desktop zuweisen.  Wenn jemand eine Lösung für dieses Problem kennt, teilen Sie in den Kommentaren. </p><br><p>  Nun, am Ende dieses Teils ein Screenshot meines Desktops: </p><br><p><img src="https://habrastorage.org/webt/ia/zp/-g/iazp-g5m4o_5tby6t52zl-nwau0.png"></p><br><h3 id="vzaimodeystvie-okruzheniya-windows-i-okruzheniya-podsistemy-linux">  Das Zusammenspiel der Windows-Umgebung und der Umgebung des Linux-Subsystems </h3><br><p>  Sie können Linux-Anwendungen direkt unter Windows mit denselben drei Befehlen ausführen - bash, wsl oder ubuntu.  Vergessen Sie nicht, dass der Start standardmäßig von root aus erfolgt. Sie sollten daher die Berechtigungen durch <code>su</code> verringern. Denken Sie auch daran, die Umgebungsvariable DISPLAY =: 0 zu übergeben, wenn für die Anwendung ein X-Server erforderlich ist.  Sie müssen auch den Ordner ändern, aus dem die Anwendung über die CD in der WSL arbeiten soll.  Beispiel: Berechnen wir md5 für file.txt auf Datenträger D mit Linux md5sum: </p><br><pre> <code class="hljs mel">wsl md5sum &lt; d:\<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>.txt</code> </pre> <br><p>  Der Zugriff auf das Linux-Dateisystem ist ebenfalls verfügbar. Er befindet sich in <code>%localappdata%\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState\rootfs</code> .  Sie können Dateien auf diese Weise lesen, aber es ist nicht ratsam, sie zu schreiben. Sie können das Dateisystem beschädigen.  Ich denke, das Problem ist, dass Windows nicht mit den Rechten und Eigentümern des Linux-Dateisystems arbeiten kann. </p><br><p>  Unter Linux können Sie auch Windows-Anwendungen ausführen.  Führen Sie einfach den exe-shnik aus und er wird im Hauptsystem ausgeführt. </p><br><p>  Windows-Laufwerke werden in <code>/mnt</code> entsprechend ihren Kleinbuchstaben gemountet.  Beispielsweise wird Laufwerk D in <code>/mnt/d</code> .  Unter Linux können Sie Windows-Dateien frei lesen und schreiben.  Sie können Symlinks darauf erstellen.  Die Rechte solcher Dateien sind immer 0777 und der Eigentümer ist root. </p><br><p>  Der Netzwerkstapel des Subsystems ist bei Windows üblich.  Der unter Linux ausgelöste Server ist auf localhost unter Windows verfügbar und umgekehrt.  Unix-Domain-Socket für Windows ist jedoch nur eine leere Datei. Sie können damit nur unter Linux arbeiten.  Linux hat auch Zugriff auf das externe Netzwerk, einschließlich des Abhörens von Ports, wenn die Firewall dies nicht verbietet. <br>  ifconfig unter Linux und ipconfig unter Windows bieten dieselben Informationen zu Netzwerkschnittstellen. </p><br><p>  Über den Windows-Task-Manager können Sie den Prozess innerhalb des Linux-Subsystems sicher beenden.  Linux sieht jedoch nur seine Prozesse. </p><br><h3 id="osobennosti-ogranicheniya-i-podvodnye-kamni">  Funktionen, Einschränkungen und Fallstricke </h3><br><p>  Der Linux-Kernel in der WSL ist nicht real.  Dies ist nur eine Emulatorschicht, die ein Teil der Linux-spezifischen Aufgaben selbst ausführt, und ein Teil der Proxys direkt zum winNT-Kernel.  Der größte Teil der API ist darin implementiert, aber nicht alle.  Sie können Ihren Kernel weder zusammenstellen noch die Kernelmodule (.ko, Kernel Object) verbinden. </p><br><p>  Der WSL-Init-Prozess ist auch ein eigener und das Ersetzen durch beispielsweise system.d funktioniert nicht.  Ich hatte lange den Wunsch, unterwegs einen Daemon-Manager zu schreiben, der mit system.d-Einheitendateien funktioniert und eine ähnliche Schnittstelle bietet, aber nicht alle Hände erreichen. </p><br><p>  OpenFUSE wird nicht unterstützt. Dementsprechend schlägt das Mounten eines virtuellen oder Remote-Dateisystems fehl.  Es ist auch unmöglich, Mount aus einer Datei zu machen. Mount scheint nichts anderes zu können, als hier zu binden. </p><br><p>  Es gibt auch keine Möglichkeit, ein Linux-Dateisystem in mehrere Partitionen / Festplatten zu partitionieren. </p><br><p>  Ein direkter Zugang zu Eisen fehlt praktisch.  Trotzdem befinden wir uns in der Windows-Sandbox und nicht unter Linux.  / dev und / sys sind merklich leer, sie enthalten nur virtuelle Geräte.  Zugriff auf die GPU - nur direkt über den X-Server - in irgendeiner Weise, sodass Sie neuronale Netze in Windows trainieren müssen. </p><br><p>  Bei der JS-Entwicklung bin ich auf die Tatsache gestoßen, dass Electron.js sich weigerte, in WSL ausgeführt zu werden. Ich musste die Umgebung von node.js unter Windows duplizieren. </p><br><h3 id="itogi">  Zusammenfassung </h3><br><p>  Der Artikel hat sich als ziemlich lang herausgestellt, ich hoffe, dass er auch nützlich sein wird. <br>  Die WSL hat sich für mich persönlich als vollständig verwendbares Tool herausgestellt, das meine Probleme löst <del>  Fullstack </del>  Backend-Entwickler.  Eine virtuelle Maschine mit Linux wurde sechs Monate lang nicht benötigt.  Das allgemeine Gefühl ist, dass Windows + WSL viel funktionaler ist als Linux + Wine. </p><br><p>  Beim Schreiben eines Artikels stellte ich fest, dass die WSL-Assembly mit Debian 9.3 im Microsoft Store angezeigt wurde. Diese Distribution ist für mich hübscher als Ubuntu, daher werde ich versuchen, sie zu installieren. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de412633/">https://habr.com/ru/post/de412633/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de412621/index.html">Wie man ein Zauberer wird (Teil 3). Hogwarts Brief</a></li>
<li><a href="../de412623/index.html">Das neue Kit für Star Citizen kostet 27.000 US-Dollar</a></li>
<li><a href="../de412625/index.html">So finden Sie schnell KI- und Data Science-Spezialisten und verlieren sie nicht</a></li>
<li><a href="../de412627/index.html">Internationale Ausstellung CMEF & ICMD 2018 Frühling in Shanghai (Teil 2)</a></li>
<li><a href="../de412629/index.html">Adaptive Wellenform für Ihren Audiodienst</a></li>
<li><a href="../de412637/index.html">Logos neu gestalten oder nicht? Das ist die Frage</a></li>
<li><a href="../de412639/index.html">Worauf Sie warten müssen, um Strategien für den Handel an der Börse zu entwickeln: Wie effizient maschinelles Lernen ist</a></li>
<li><a href="../de412641/index.html">Was haben Bergbau, Georgien und Irkutsk gemeinsam?</a></li>
<li><a href="../de412643/index.html">Wie wir das Zahlungssystem in das russische Projekt integriert haben</a></li>
<li><a href="../de412645/index.html">Objekt, Eigentum, Aktivität: Modelle und Methoden ihrer Konstruktion</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>