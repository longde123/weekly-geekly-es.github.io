<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘¨ğŸ¿ ğŸ’œ ğŸ™ğŸ¾ Wie kann man mit dem unsichtbaren Internet Python-Freunde finden? Die Grundlagen der Entwicklung von I2P-Anwendungen in Python und Asyncio ğŸ™ğŸ¿ ğŸ‘— ğŸ”</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Invisible Internet-Projekt (im Folgenden einfach I2P) bietet Entwicklern eine Plattform fÃ¼r die Entwicklung von Anwendungen mit erweiterten Anford...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie kann man mit dem unsichtbaren Internet Python-Freunde finden? Die Grundlagen der Entwicklung von I2P-Anwendungen in Python und Asyncio</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426315/"><p><img src="https://habrastorage.org/webt/kl/ic/b-/klicb-kqakwxpimmddbugteogkg.jpeg"></p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Das Invisible Internet-Projekt</a> (im Folgenden einfach I2P) bietet Entwicklern eine Plattform fÃ¼r die Entwicklung von Anwendungen mit erweiterten Anforderungen an den Datenschutz der Benutzer.  Dies ist ein virtuelles Netzwerk Ã¼ber dem normalen Internet, in dem Knoten Daten austauschen kÃ¶nnen, ohne ihre reale IP-Adresse preiszugeben.  Anstelle von IP-Adressen im unsichtbaren Internet treten Verbindungen zwischen virtuellen Adressen auf, die als I2P-Ziel bezeichnet werden.  Sie kÃ¶nnen eine beliebige Anzahl solcher Adressen haben und diese auch fÃ¼r jede Verbindung Ã¤ndern. Sie liefern der anderen Seite keine Informationen Ã¼ber die tatsÃ¤chliche IP-Adresse des Clients. </p><br><p>  Dieser Artikel beschreibt die grundlegenden Dinge, die Sie wissen mÃ¼ssen, um I2P-Anwendungen zu schreiben.  Codebeispiele werden in Python mithilfe des in Asyncio integrierten asynchronen Frameworks bereitgestellt. </p><a name="habracut"></a><br><h2 id="vklyuchenie-sam-api-i-ustanovka-i2plib">  Aktivieren der SAM-API und Installieren von i2plib </h2><br><p>  I2P bietet mehrere APIs fÃ¼r die Interaktion mit Clientanwendungen.  FÃ¼r Java-Anwendungen wird I2CP verwendet, fÃ¼r regulÃ¤re Client-Server-Anwendungen kÃ¶nnen I2PTunnel-, HTTP- und Socks-Proxys verwendet werden.  Wir werden eine Anwendung in Python erstellen, wÃ¤hlen Sie also <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SAM</a> .  StandardmÃ¤ÃŸig ist im ursprÃ¼nglichen Java-Client die SAM-API deaktiviert, sodass Sie sie aktivieren mÃ¼ssen.  Gehen Sie zur I2P-Router-Webkonsole, Seite "I2P-Interna" -&gt; "Clients".  Aktivieren Sie das KontrollkÃ¤stchen "Beim Start ausfÃ¼hren" und klicken Sie auf "Start" und dann auf "Client-Konfiguration speichern". </p><br><p><img src="https://habrastorage.org/webt/xt/-e/y2/xt-ey2nkptiocumy-ysrwfjvdrw.jpeg"></p><br><p>  In <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">C ++ ist der i2pd</a> SAM- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Client</a> bereits standardmÃ¤ÃŸig aktiviert. </p><br><p>  Zur Vereinfachung der Verwendung der SAM-API habe ich die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">i2plib</a> Python-Bibliothek geschrieben.  Sie kÃ¶nnen es Ã¼ber pip installieren oder den Quellcode von GitHub herunterladen. </p><br><pre><code class="hljs sql">pip <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> i2plib</code> </pre> <br><p>  Da diese Bibliothek mit dem integrierten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Asyncio-Asyncio-Framework funktioniert</a> , sollten Sie berÃ¼cksichtigen, dass Codebeispiele auch aus asynchronen Funktionen (Coroutinen) stammen, die in der Ereignisschleife arbeiten.  Weitere Verwendungsbeispiele befinden sich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">im Repository</a> . </p><br><h2 id="destination-i-sozdanie-sessii">  Ziel- und Sitzungserstellung </h2><br><p>  I2P Destination besteht im Kern aus einer Reihe von VerschlÃ¼sselungs- und DatensignaturschlÃ¼sseln.  Ã–ffentliche SchlÃ¼ssel aus diesem Bundle werden im I2P-Netzwerk verÃ¶ffentlicht und anstelle der IP-Adresse zum Herstellen von Verbindungen verwendet. </p><br><p>  Wir werden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">i2plib.Destination</a> generieren, das wir in Zukunft verwenden werden: </p><br><pre> <code class="hljs coffeescript">dest = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> i2plib.new_destination() <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(dest.base32 + <span class="hljs-string"><span class="hljs-string">".b32.i2p"</span></span>) <span class="hljs-comment"><span class="hljs-comment">#  base32 </span></span></code> </pre> <br><p>  Die base32-Adresse ist ein Hash, an dem andere Peers Ihr Ziel im Netzwerk finden kÃ¶nnen.  Wenn Sie dieses Ziel fortlaufend in Ihrem Programm verwenden mÃ¶chten, speichern Sie den Inhalt von dest.private_key.data in einer lokalen Datei. </p><br><p>  Jetzt kÃ¶nnen Sie eine SAM-Sitzung erstellen, was wÃ¶rtlich bedeutet, dass dieses Ziel online geschaltet wird: </p><br><pre> <code class="hljs nginx"> <span class="hljs-attribute"><span class="hljs-attribute">session_nickname</span></span> = <span class="hljs-string"><span class="hljs-string">"test-i2p"</span></span> <span class="hljs-comment"><span class="hljs-comment">#      nickname _, session_writer = await i2plib.create_session(session_nickname, destination=dest)</span></span></code> </pre> <br><p>  Es ist wichtig zu beachten, dass das Ziel online ist, solange der Socket session_writer geÃ¶ffnet ist.  Wenn Sie dieses Ziel im Netzwerk "ausschalten" mÃ¶chten, rufen Sie session_writer.close () auf. </p><br><h2 id="delaem-ishodyaschie-soedineniya">  Ausgehende Verbindungen herstellen </h2><br><p>  Nachdem das Ziel online ist, kÃ¶nnen wir es verwenden, um mit anderen Knoten zu kommunizieren.  Stellen Sie beispielsweise eine Verbindung zum Knoten "udhdrtrcetjm5sxzskjyr5ztpeszydbh4dpl3pl4utgqqw2v4jna.b32.i2p" her, senden Sie eine HTTP-GET-Anforderung und lesen Sie die Antwort (es gibt einen Webserver "i2p-projekt.i2p"): </p><br><pre> <code class="hljs lua">remote_host = <span class="hljs-string"><span class="hljs-string">"udhdrtrcetjm5sxzskjyr5ztpeszydbh4dpl3pl4utgqqw2v4jna.b32.i2p"</span></span> reader, writer = await i2plib.stream_connect(session_nickname, remote_host) writer.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(<span class="hljs-string"><span class="hljs-string">"GET /en/ HTTP/1.0\nHost: {}\r\n\r\n"</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">format</span></span>(remote_host).encode()) buflen, resp = <span class="hljs-number"><span class="hljs-number">4096</span></span>, b<span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: data = await reader.<span class="hljs-built_in"><span class="hljs-built_in">read</span></span>(buflen) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(data) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>: resp += data <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> writer.<span class="hljs-built_in"><span class="hljs-built_in">close</span></span>() <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(resp.decode())</code> </pre> <br><h2 id="prinimaem-vhodyaschie-soedineniya">  Akzeptieren Sie eingehende Verbindungen </h2><br><p>  Wie Sie sehen, ist bei der Verbindung mit einem anderen Host alles einfach, aber mit der Annahme eingehender Nachrichten gibt es eine Nuance.  Wenn ein neuer Client eine Verbindung zu Ihnen herstellt, sendet SAM eine Zeichenfolge mit dem Ziel dieses Clients an den ASCII-Socket.  Da Ziel und Daten in einem StÃ¼ck vorliegen kÃ¶nnen, mÃ¼ssen Sie dies berÃ¼cksichtigen. </p><br><p>  So sieht ein einfacher PING-PONG-Server aus, der eine eingehende Verbindung akzeptiert, den Zielclient in der Variablen remote_destination speichert und den PONG zurÃ¼cksendet: </p><br><pre> <code class="hljs python"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle_client</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(incoming, reader, writer)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">"""  """</span></span> dest, data = incoming.split(<span class="hljs-string"><span class="hljs-string">b"\n"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) remote_destination = i2plib.Destination(dest.decode()) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> data: data = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> reader.read(BUFFER_SIZE) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> data == <span class="hljs-string"><span class="hljs-string">b"PING"</span></span>: writer.write(<span class="hljs-string"><span class="hljs-string">b"PONG"</span></span>) writer.close() <span class="hljs-comment"><span class="hljs-comment">#  ,        while True: reader, writer = await i2plib.stream_accept(session_nickname) incoming = await reader.read(BUFFER_SIZE) asyncio.ensure_future(handle_client(incoming, reader, writer))</span></span></code> </pre> <br><h2 id="bolshe-informacii">  Weitere Infos </h2><br><p>  Es beschreibt die Verwendung des Streaming-Protokolls, das als TCP / IP in einem I2P-Netzwerk fungiert.  Die SAM-API bietet auch die MÃ¶glichkeit, anonyme Datagramme zu senden und zu empfangen, Ã¤hnlich wie das UDP-Protokoll.  Diese FunktionalitÃ¤t ist in i2plib noch nicht verfÃ¼gbar und wird spÃ¤ter hinzugefÃ¼gt. </p><br><p>  Dies sind nur die grundlegendsten Informationen, aber es reicht bereits aus, um Ihr Projekt in I2P zu starten.  Das unsichtbare Internet eignet sich zum Schreiben verschiedener Anwendungen, bei denen es vor allem darauf ankommt, die PrivatsphÃ¤re der Benutzer zu wahren.  Das Netzwerk unterliegt keinen EinschrÃ¤nkungen fÃ¼r Entwickler. Es kann sich entweder um einen Client-Server oder eine P2P-Anwendung handeln. </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beispielprogramme mit i2plib</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">I2plib-Dokumentation</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub-Quellcode i2plib</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SAM API-Dokumentation</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Asyncio-Dokumentation</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Technische Beschreibung des I2P-Netzwerks</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de426315/">https://habr.com/ru/post/de426315/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de426301/index.html">Ist es so in Europa, wie sie darÃ¼ber schreiben?</a></li>
<li><a href="../de426303/index.html">Eine kurze Tour durch die Highlights des Zend Frameworks</a></li>
<li><a href="../de426305/index.html">Arbeite mit Charakterstatus. Einheitsexperimente</a></li>
<li><a href="../de426311/index.html">BLACK HAT USA Konferenz. Botnet von einer Million Browsern. Teil 2</a></li>
<li><a href="../de426313/index.html">Neues Microsoft Learn</a></li>
<li><a href="../de426317/index.html">1155 vs 2011. Einige alte Leute ziehen in die Schlacht</a></li>
<li><a href="../de426319/index.html">Testserver fÃ¼r das Entwicklungsteam</a></li>
<li><a href="../de426323/index.html">Ein Versuch, einen Roboterkoffer mit einem begrenzten Budget herzustellen. Glasmatte und Epoxid</a></li>
<li><a href="../de426325/index.html">MIT-Kurs "Computer Systems Security". Vorlesung 12: Netzwerksicherheit, Teil 1</a></li>
<li><a href="../de426327/index.html">Was ist neu in Windows 10 Oktober 2018 Update</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>