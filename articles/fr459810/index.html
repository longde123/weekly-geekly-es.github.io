<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõÉ üïö üë©‚Äçüë©‚Äçüë¶ Microservices ou monolith: √† la recherche d'une solution üêå üçñ üë©üèæ‚Äçüöí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quand un gros produit est con√ßu ou qu'un petit logiciel commence √† devenir un l√©viathan, quelle voie de d√©veloppement dois-je choisir? Dois-je tout r√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Microservices ou monolith: √† la recherche d'une solution</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459810/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gi/vt/lo/givtlo-w7p1lc0eqbh8td8-9k_o.png" alt="image"></div><br>  Quand un gros produit est con√ßu ou qu'un petit logiciel commence √† devenir un l√©viathan, quelle voie de d√©veloppement dois-je choisir?  Dois-je tout r√©√©crire √† partir de z√©ro ou continuer les traditions ¬´historiquement √©tablies¬ª?  Quoi qu'il en soit, vaut-il la peine de revoir le concept m√™me d'architecture? <br><br>  Bonjour, Khabrovites!  Je m'appelle Konstantin et je suis le d√©veloppeur principal d'un syst√®me assez important qui a commenc√© une fois comme une exp√©rience.  Un petit site PHP cr√©√© litt√©ralement "√† genoux" et, bien s√ªr, un monolithe.  Au fil du temps, le site s'est agrandi et s'est heurt√© √† un certain nombre de probl√®mes, dont la solution posait la question "et alors comment?". <br><a name="habracut"></a><br>  Monolith ou microservices?  Que choisir?  La diff√©rence fondamentale entre les approches, √† mon avis, est qu'un monolithe implique un cycle centralis√© de traitement de la demande d'un utilisateur et des microservices - d√©centralis√©s.  Les avantages et inconv√©nients communs des deux approches sont largement connus et r√©pertori√©s plusieurs fois (par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ).  Cependant, il n'y a pas de facteurs aussi √©vidents et √©vidents qui influencent le choix de l'architecture. <br><br><ol><li>  <b>Chargement des employ√©s √† temps plein</b> .  Avec le d√©veloppement rapide du produit, un pool de t√¢ches s'accumule, qui ne peut pas √™tre r√©solu dans un d√©lai acceptable - tout le monde est occup√©.  Et si un tel ¬´blocage¬ª est unique, cela n'a aucun sens d'√©largir le personnel des d√©veloppeurs.  La solution √©vidente est les sous-traitants externes (entreprises ou ind√©pendants).  Mais comment leur donner un morceau de produit pour fonctionner sans risquer de le transformer en OpenSource, grosso modo?  Dans le cas de l'utilisation de microservices, cette t√¢che est beaucoup plus facile √† r√©soudre. </li><li>  <b>La difficult√© de la plong√©e</b> .  Plus le produit est grand, plus il faut de temps √† un nouvel employ√© pour s'y mettre √† l'aise.  Surtout s'il y a beaucoup de valeurs par d√©faut diff√©rentes dans le code (oui, une bonne documentation facilite le processus, mais si ce n'est pas le cas?) Et des personnalisations pour des cas particuliers.  De ce point de vue, traiter une petite pi√®ce ind√©pendante est beaucoup plus facile qu'avec le produit entier imm√©diatement. </li><li>  <b>Ressources aux pics de charge</b> .  Dans ma pratique, il y avait un cas o√π la charge sur les serveurs atteignait parfois des valeurs inacceptables (et si sp√©cifiquement - la RAM √©tait √©puis√©e, un swap √©tait activ√© et le serveur se transformait en l√©gume pendant un certain temps), pendant le travail libre tout le reste du temps (le chargement ne d√©passait pas 30% en termes de RAM )  Et ces pics se sont produits de mani√®re irr√©guli√®re et avec de longues pauses.  Dans le cas d'un monolithe (nous pensons qu'il n'y a nulle part o√π optimiser le code), seule la connexion de nouveaux serveurs avec une copie de l'ensemble du syst√®me pour l'√©quilibrage de charge est sauvegard√©e.  Et dans le cas des microservices, vous pouvez organiser une file d'attente de traitement (bien s√ªr, cela ne s'applique qu'aux op√©rations urgentes qui sont rapides et impr√©vues, comme le d√©chargement d'un tableau Excel). </li><li>  <b>Effectuer des t√¢ches en arri√®re-plan</b> .  La mani√®re dont ce facteur ¬´secoue le bateau¬ª d√©pend de sa taille et de sa complexit√©.  En r√®gle g√©n√©rale, un monolithe et une minuterie (cron) suffisent.  Mais si les t√¢ches commencent √† s'accumuler en grands groupes, des probl√®mes surviennent √©galement.  Il est d√©j√† n√©cessaire d'√©quilibrer les t√¢ches cron.  Les microservices facilitent grandement cette situation. </li><li>  <b>La complexit√© du suivi</b> .  Dans le cas des microservices, les exigences pour la maintenance du fer sont augment√©es - o√π, quoi et comment doivent √™tre configur√©s.  Monolith - en gros, certains param√®tres pour tous les n≈ìuds, microservices - les param√®tres d√©pendent des exigences de microservices sp√©cifiques qui s'ex√©cutent sur le n≈ìud. </li><li>  <b>Exigences de qualification</b> .  Plus le zoo utilise de technologies (et il se d√©veloppe g√©n√©ralement si le syst√®me est microservice), plus les exigences en mati√®re de comp√©tences et de connaissances des employ√©s r√©guliers sont √©lev√©es.  Apr√®s tout, s'il y a des am√©liorations ou des probl√®mes, ils doivent y faire face.  Ou plus de professionnels sont n√©cessaires pour couvrir toute la pile. </li></ol><br>  Faut-il choisir?  Le jeu en vaut-il la chandelle?  Je pense que √ßa vaut vraiment le coup.  Mais il faut aborder la question avec t√™te froide.  Sinon, certains probl√®mes seront simplement remplac√©s par d'autres. <br><br>  Dans mon cas, un tournant s'est produit lorsque le site a cess√© de "s'int√©grer" dans les ressources d'un serveur.  Ensuite, il a √©t√© d√©cid√© de r√©√©crire le syst√®me selon la meilleure option √† mon avis - un hybride.  Il existe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des recommandations g√©n√©rales</a> pour le d√©veloppement de produits dans le ¬´cas hybride¬ª.  Mais je voudrais le compl√©ter par quelques recommandations. <br><br>  Lors de la conception d'un monolithe de d√©marrage, les possibilit√©s de connexion suppl√©mentaire des services externes doivent √™tre imm√©diatement d√©finies.  Construisez imm√©diatement des communications inter-composants comme si ces composants √©taient d√©j√† (ou presque d√©j√†) des ¬´services externes¬ª.  Surtout si elles sont gourmandes en ressources. <br><br>  R√©fl√©chissez imm√©diatement √† une politique d'utilisation des caches et des stockages de donn√©es (bases de donn√©es et fichiers).  Par exemple, partagez la session d'un utilisateur. <br><br>  Et le plus important n'est pas de se pr√©cipiter vers les extr√™mes.  Pour ma part, j'ai d√©duit la formule suivante pour un bon projet: "un syst√®me efficace est un syst√®me √©quilibr√©".  En particulier, cela s'exprime dans le fait que dans les microservices je ne retire que de gros fragments logiquement isol√©s du noyau.  Et puis, seulement si au moins une des conditions est remplie: <br><br><ol><li>  une limitation de la charge et des pr√©visions sont n√©cessaires, le retard d√ª √† l'ex√©cution de la t√¢che n'est pas critique √† son tour </li><li>  l'isolement entra√Ænera une augmentation significative de la productivit√©. </li></ol><br>  Gr√¢ce √† cette approche, nous avons obtenu un syst√®me, 95% des fonctionnalit√©s situ√©es dans le noyau et 5% dans des microservices.  Mais en m√™me temps, le c≈ìur ne repr√©sente que 60% de la charge totale.  Et en m√™me temps, vous pouvez garantir que la charge sur les serveurs individuels ne d√©passe pas les valeurs critiques. <br><br>  Les microservices sont donc (√† partir d'une certaine taille du produit) bons si vous ne les utilisez qu'en cas d'absolue n√©cessit√©, et non √† cause de la mode ou "parce que c'est cool".  Il existe de gros <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">produits</a> qui vivent avec succ√®s comme un monolithe.  Mais parfois, un monolithe ne peut pas r√©soudre le probl√®me ... <br><br>  Je vous remercie! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459810/">https://habr.com/ru/post/fr459810/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459798/index.html">Snom D335 - T√©l√©phone IP multifonctionnel avec √©cran couleur TFT grand √©cran</a></li>
<li><a href="../fr459800/index.html">Visite photographique: ITMO University Optics Museum</a></li>
<li><a href="../fr459802/index.html">Habr Weekly # 9 / Burnout chez les jeunes, interfaces japonaises, r√©seau de neurones Battle.net, jeux et cruaut√©</a></li>
<li><a href="../fr459804/index.html">Cr√©ez des cartes d'aide de crowdsourcing sur WordPress + shMapper</a></li>
<li><a href="../fr459806/index.html">Comment nous avons trait√© le chat Lapuna</a></li>
<li><a href="../fr459814/index.html">Que faites-vous, moteur de rendu? Ou comment fonctionne le module d'affichage du navigateur</a></li>
<li><a href="../fr459816/index.html">R√©seaux de neurones et apprentissage profond, chapitre 3, partie 2: pourquoi la r√©gularisation contribue-t-elle √† r√©duire le recyclage?</a></li>
<li><a href="../fr459820/index.html">Il suffit de glisser la carte: comment OS / 2 est utilis√© dans le m√©tro de New York</a></li>
<li><a href="../fr459822/index.html">Un exemple d'un r√©seau neuronal simple, par cons√©quent, comprendre ce qui est</a></li>
<li><a href="../fr459824/index.html">Liste de contr√¥le pour l'√©criture de superbes extensions Visual Studio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>