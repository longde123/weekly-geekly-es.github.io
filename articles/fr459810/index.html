<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛃 🕚 👩‍👩‍👦 Microservices ou monolith: à la recherche d'une solution 🐌 🍖 👩🏾‍🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quand un gros produit est conçu ou qu'un petit logiciel commence à devenir un léviathan, quelle voie de développement dois-je choisir? Dois-je tout ré...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Microservices ou monolith: à la recherche d'une solution</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459810/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gi/vt/lo/givtlo-w7p1lc0eqbh8td8-9k_o.png" alt="image"></div><br>  Quand un gros produit est conçu ou qu'un petit logiciel commence à devenir un léviathan, quelle voie de développement dois-je choisir?  Dois-je tout réécrire à partir de zéro ou continuer les traditions «historiquement établies»?  Quoi qu'il en soit, vaut-il la peine de revoir le concept même d'architecture? <br><br>  Bonjour, Khabrovites!  Je m'appelle Konstantin et je suis le développeur principal d'un système assez important qui a commencé une fois comme une expérience.  Un petit site PHP créé littéralement "à genoux" et, bien sûr, un monolithe.  Au fil du temps, le site s'est agrandi et s'est heurté à un certain nombre de problèmes, dont la solution posait la question "et alors comment?". <br><a name="habracut"></a><br>  Monolith ou microservices?  Que choisir?  La différence fondamentale entre les approches, à mon avis, est qu'un monolithe implique un cycle centralisé de traitement de la demande d'un utilisateur et des microservices - décentralisés.  Les avantages et inconvénients communs des deux approches sont largement connus et répertoriés plusieurs fois (par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ).  Cependant, il n'y a pas de facteurs aussi évidents et évidents qui influencent le choix de l'architecture. <br><br><ol><li>  <b>Chargement des employés à temps plein</b> .  Avec le développement rapide du produit, un pool de tâches s'accumule, qui ne peut pas être résolu dans un délai acceptable - tout le monde est occupé.  Et si un tel «blocage» est unique, cela n'a aucun sens d'élargir le personnel des développeurs.  La solution évidente est les sous-traitants externes (entreprises ou indépendants).  Mais comment leur donner un morceau de produit pour fonctionner sans risquer de le transformer en OpenSource, grosso modo?  Dans le cas de l'utilisation de microservices, cette tâche est beaucoup plus facile à résoudre. </li><li>  <b>La difficulté de la plongée</b> .  Plus le produit est grand, plus il faut de temps à un nouvel employé pour s'y mettre à l'aise.  Surtout s'il y a beaucoup de valeurs par défaut différentes dans le code (oui, une bonne documentation facilite le processus, mais si ce n'est pas le cas?) Et des personnalisations pour des cas particuliers.  De ce point de vue, traiter une petite pièce indépendante est beaucoup plus facile qu'avec le produit entier immédiatement. </li><li>  <b>Ressources aux pics de charge</b> .  Dans ma pratique, il y avait un cas où la charge sur les serveurs atteignait parfois des valeurs inacceptables (et si spécifiquement - la RAM était épuisée, un swap était activé et le serveur se transformait en légume pendant un certain temps), pendant le travail libre tout le reste du temps (le chargement ne dépassait pas 30% en termes de RAM )  Et ces pics se sont produits de manière irrégulière et avec de longues pauses.  Dans le cas d'un monolithe (nous pensons qu'il n'y a nulle part où optimiser le code), seule la connexion de nouveaux serveurs avec une copie de l'ensemble du système pour l'équilibrage de charge est sauvegardée.  Et dans le cas des microservices, vous pouvez organiser une file d'attente de traitement (bien sûr, cela ne s'applique qu'aux opérations urgentes qui sont rapides et imprévues, comme le déchargement d'un tableau Excel). </li><li>  <b>Effectuer des tâches en arrière-plan</b> .  La manière dont ce facteur «secoue le bateau» dépend de sa taille et de sa complexité.  En règle générale, un monolithe et une minuterie (cron) suffisent.  Mais si les tâches commencent à s'accumuler en grands groupes, des problèmes surviennent également.  Il est déjà nécessaire d'équilibrer les tâches cron.  Les microservices facilitent grandement cette situation. </li><li>  <b>La complexité du suivi</b> .  Dans le cas des microservices, les exigences pour la maintenance du fer sont augmentées - où, quoi et comment doivent être configurés.  Monolith - en gros, certains paramètres pour tous les nœuds, microservices - les paramètres dépendent des exigences de microservices spécifiques qui s'exécutent sur le nœud. </li><li>  <b>Exigences de qualification</b> .  Plus le zoo utilise de technologies (et il se développe généralement si le système est microservice), plus les exigences en matière de compétences et de connaissances des employés réguliers sont élevées.  Après tout, s'il y a des améliorations ou des problèmes, ils doivent y faire face.  Ou plus de professionnels sont nécessaires pour couvrir toute la pile. </li></ol><br>  Faut-il choisir?  Le jeu en vaut-il la chandelle?  Je pense que ça vaut vraiment le coup.  Mais il faut aborder la question avec tête froide.  Sinon, certains problèmes seront simplement remplacés par d'autres. <br><br>  Dans mon cas, un tournant s'est produit lorsque le site a cessé de "s'intégrer" dans les ressources d'un serveur.  Ensuite, il a été décidé de réécrire le système selon la meilleure option à mon avis - un hybride.  Il existe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des recommandations générales</a> pour le développement de produits dans le «cas hybride».  Mais je voudrais le compléter par quelques recommandations. <br><br>  Lors de la conception d'un monolithe de démarrage, les possibilités de connexion supplémentaire des services externes doivent être immédiatement définies.  Construisez immédiatement des communications inter-composants comme si ces composants étaient déjà (ou presque déjà) des «services externes».  Surtout si elles sont gourmandes en ressources. <br><br>  Réfléchissez immédiatement à une politique d'utilisation des caches et des stockages de données (bases de données et fichiers).  Par exemple, partagez la session d'un utilisateur. <br><br>  Et le plus important n'est pas de se précipiter vers les extrêmes.  Pour ma part, j'ai déduit la formule suivante pour un bon projet: "un système efficace est un système équilibré".  En particulier, cela s'exprime dans le fait que dans les microservices je ne retire que de gros fragments logiquement isolés du noyau.  Et puis, seulement si au moins une des conditions est remplie: <br><br><ol><li>  une limitation de la charge et des prévisions sont nécessaires, le retard dû à l'exécution de la tâche n'est pas critique à son tour </li><li>  l'isolement entraînera une augmentation significative de la productivité. </li></ol><br>  Grâce à cette approche, nous avons obtenu un système, 95% des fonctionnalités situées dans le noyau et 5% dans des microservices.  Mais en même temps, le cœur ne représente que 60% de la charge totale.  Et en même temps, vous pouvez garantir que la charge sur les serveurs individuels ne dépasse pas les valeurs critiques. <br><br>  Les microservices sont donc (à partir d'une certaine taille du produit) bons si vous ne les utilisez qu'en cas d'absolue nécessité, et non à cause de la mode ou "parce que c'est cool".  Il existe de gros <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">produits</a> qui vivent avec succès comme un monolithe.  Mais parfois, un monolithe ne peut pas résoudre le problème ... <br><br>  Je vous remercie! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459810/">https://habr.com/ru/post/fr459810/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459798/index.html">Snom D335 - Téléphone IP multifonctionnel avec écran couleur TFT grand écran</a></li>
<li><a href="../fr459800/index.html">Visite photographique: ITMO University Optics Museum</a></li>
<li><a href="../fr459802/index.html">Habr Weekly # 9 / Burnout chez les jeunes, interfaces japonaises, réseau de neurones Battle.net, jeux et cruauté</a></li>
<li><a href="../fr459804/index.html">Créez des cartes d'aide de crowdsourcing sur WordPress + shMapper</a></li>
<li><a href="../fr459806/index.html">Comment nous avons traité le chat Lapuna</a></li>
<li><a href="../fr459814/index.html">Que faites-vous, moteur de rendu? Ou comment fonctionne le module d'affichage du navigateur</a></li>
<li><a href="../fr459816/index.html">Réseaux de neurones et apprentissage profond, chapitre 3, partie 2: pourquoi la régularisation contribue-t-elle à réduire le recyclage?</a></li>
<li><a href="../fr459820/index.html">Il suffit de glisser la carte: comment OS / 2 est utilisé dans le métro de New York</a></li>
<li><a href="../fr459822/index.html">Un exemple d'un réseau neuronal simple, par conséquent, comprendre ce qui est</a></li>
<li><a href="../fr459824/index.html">Liste de contrôle pour l'écriture de superbes extensions Visual Studio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>