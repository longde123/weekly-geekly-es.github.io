<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСНЁЯП╜ ЁЯПП ЁЯЦНя╕П рдХреЛрдгреАрдп рдореЗрдВ рд╡реЗрдзрд╢рд╛рд▓рд╛рдУрдВ рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ 6 рддрд░реАрдХреЗ ЁЯСитАНЁЯСзтАНЁЯСз тШВя╕П ЁЯСЛЁЯП╜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдПрдХ рдЕрд╡рд▓реЛрдХрди рдпреЛрдЧреНрдп рд╕рджрд╕реНрдпрддрд╛ рдХрд╛ рд░рд┐рд╡рд░реНрд╕ рд╕рд╛рдЗрдб 


 рдСрдмреНрдЬрд░реНрд╡рдмрд▓реНрд╕ рдореЗрдВ рдПрдХ рд╕рджрд╕реНрдпрддрд╛ рд╡рд┐рдзрд┐ рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕реЗ рдСрдмреНрдЬрд╝рд░реНрд╡реЗрдмрд▓ рдХреЛ рднреЗрдЬреЗ рдЧрдП ( рдПрдорд┐рдЯ ) рднреЗрдЬреЗ рдЧрдП рдорд╛рдиреЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдХреЛрдгреАрдп рдореЗрдВ рд╡реЗрдзрд╢рд╛рд▓рд╛рдУрдВ рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ 6 рддрд░реАрдХреЗ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484762/"><p><img src="https://habrastorage.org/webt/il/si/if/ilsiifu2g6vegmekipqeks6j-n8.png"></p><br><h3 id="obratnaya-storona-podpiski-na-observable">  рдПрдХ рдЕрд╡рд▓реЛрдХрди рдпреЛрдЧреНрдп рд╕рджрд╕реНрдпрддрд╛ рдХрд╛ рд░рд┐рд╡рд░реНрд╕ рд╕рд╛рдЗрдб </h3><br><p>  рдСрдмреНрдЬрд░реНрд╡рдмрд▓реНрд╕ рдореЗрдВ рдПрдХ <em>рд╕рджрд╕реНрдпрддрд╛</em> рд╡рд┐рдзрд┐ рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕реЗ рдСрдмреНрдЬрд╝рд░реНрд╡реЗрдмрд▓ рдХреЛ рднреЗрдЬреЗ рдЧрдП ( <strong>рдПрдорд┐рдЯ</strong> ) рднреЗрдЬреЗ рдЧрдП рдорд╛рдиреЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рд╛рде рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдХреЛрдгреАрдп рдореЗрдВ, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдШрдЯрдХреЛрдВ / рдирд┐рд░реНрджреЗрд╢реЛрдВ рдореЗрдВ рдФрд░ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд░рд╛рдЙрдЯрд░ рдореЙрдбреНрдпреВрд▓, NgRx рдФрд░ HTTP рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдпрджрд┐ рд╣рдо рдПрдХ рд╕реНрдЯреНрд░реАрдо рдХреА рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдЦреБрд▓реА рд░рд╣реЗрдЧреА рдФрд░ рдЗрд╕реЗ рддрдм рднреА рдХрд╣рд╛ рдЬрд╛рдПрдЧрд╛ рдЬрдм рднреА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рдХрд┐рд╕реА рднреА рд╣рд┐рд╕реНрд╕реЗ рд╕реЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдЗрд╕рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрдм рддрдХ рдХрд┐ рдпрд╣ <em>рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм</em> рдХрд░рдХреЗ рдХреЙрд▓ рдмрдВрдж рди рд╣реЛ рдЬрд╛рдПред </p><br><pre><code class="javascript hljs">@Component({...}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ subscription: Subscription ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> observable = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription = observable.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x)); } }</code> </pre> <a name="habracut"></a><br><p>  рдЗрд╕ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдореЗрдВ, рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрдХрдВрдб рдореЗрдВ рдорд╛рди рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрдВрддрд░рд╛рд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рд╣рдо рднреЗрдЬреЗ рдЧрдП рдорд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХреА рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрддреЗ рд╣реИрдВ, рдФрд░ рд╣рдорд╛рд░реЗ рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХрдВрд╕реЛрд▓ рдХреЗ рд▓рд┐рдП рдкрд░рд┐рдгрд╛рдо рд▓рд┐рдЦрддреЗ рд╣реИрдВред </p><br><p>  рдЕрдм, рдпрджрд┐ AppComponent рдирд╖реНрдЯ рд╣реЛ рдЧрдпрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдШрдЯрдХ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдпрд╛ <em>рдирд╖реНрдЯ ()</em> рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдЕрднреА рднреА рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рдХрдВрд╕реЛрд▓ рд▓реЙрдЧ рджреЗрдЦреЗрдВрдЧреЗред  рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрджреНрдпрдкрд┐ AppComponent рдирд╖реНрдЯ рд╣реЛ рдЧрдпрд╛ рдерд╛, рд╕рджрд╕реНрдпрддрд╛ рд░рджреНрдж рдирд╣реАрдВ рдХреА рдЧрдИ рдереАред </p><br><p>  рдпрджрд┐ рд╕рджрд╕реНрдпрддрд╛ рдмрдВрдж рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рддреЛ рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд▓рдЧрд╛рддрд╛рд░ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬрд┐рд╕рд╕реЗ рдореЗрдореЛрд░реА рдореЗрдореЛрд░реА рдФрд░ рдкреНрд░рджрд░реНрд╢рди рд╕рдорд╕реНрдпрд╛рдПрдВ рдЧрдВрднреАрд░ рд╣реЛ рдЬрд╛рдПрдВрдЧреАред  рд▓реАрдХ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рд░ рдмрд╛рд░ рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓ рд╕реЗ "рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм" рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред </p><br><h3 id="1-ispolzovanie-metoda-unsubscribe">  1. рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ </h3><br><p>  рдХрд┐рд╕реА рднреА рд╕рджрд╕реНрдпрддрд╛ рдХреЗ рдкрд╛рд╕ рдореБрдлреНрдд рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП <em>рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд</em> рдХрд░рдиреЗ рдФрд░ рдЕрд╡рд▓реЛрдХрди рдпреЛрдЧреНрдп рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рд░рджреНрдж рдХрд░рдиреЗ рдХрд╛ рдХрд╛рд░реНрдп рд╣реИред  рдореЗрдореЛрд░реА рд░рд┐рд╕рд╛рд╡ рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓ рдореЗрдВ <em>рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм</em> рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><br><p>  рдХреЛрдгреАрдп рдореЗрдВ, рдЖрдкрдХреЛ рдПрдХ рдШрдЯрдХ рдХреЗ рдирд╖реНрдЯ рд╣реЛрдиреЗ рдкрд░ рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓ рд╕реЗ рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдХреЛрдгреАрдп рдореЗрдВ рдПрдХ <em>рдПрдирдЧреЙрдиреНрдбреЗрд╕реНрдЯреНрд░реЛ</em> рд╣реБрдХ рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдШрдЯрдХ рдХреЛ рдирд╖реНрдЯ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдХрд┐ рдореЗрдореЛрд░реА рдХреЛ рд╕рд╛рдл рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдардВрдб рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди, рдЦреБрд▓реЗ рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдФрд░ рдкреИрд░ рдореЗрдВ рдЕрдиреНрдп рд╢реЙрдЯреНрд╕ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдПред </p><br><pre> <code class="javascript hljs">@Component({тАж}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnDestroy</span></span></span><span class="hljs-class"> </span></span>{ subscription: Subscription ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> observable = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription = observable.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x)); } ngOnDestroy() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription.unsubscribe() } }</code> </pre> <br><p>  рд╣рдордиреЗ рдЕрдкрдиреЗ AppComponent рдореЗрдВ <em>ngOnDestroy</em> рдХреЛ рдЬреЛрдбрд╝рд╛ рдФрд░ рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓ this.subscription рдкрд░ <em>рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд</em> рд╡рд┐рдзрд┐ рдХреЛ <em>рдХреЙрд▓ рдХрд┐рдпрд╛</em> ред  рдЬрдм AppComponent рдирд╖реНрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ (рд▓рд┐рдВрдХ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдХреЗ, <em>рдирд╖реНрдЯ ()</em> рд╡рд┐рдзрд┐, рдЖрджрд┐), рд╕рджрд╕реНрдпрддрд╛ рдлреНрд░реАрдЬ рдирд╣реАрдВ рд╣реЛрдЧреА, рдЕрдВрддрд░рд╛рд▓ рдмрдВрдж рд╣реЛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рдЕрдзрд┐рдХ рдХрдВрд╕реЛрд▓ рд▓реЙрдЧ рдирд╣реАрдВ рд╣реЛрдВрдЧреЗред </p><br><p>  рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдЕрдЧрд░ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХрдИ рд╕рджрд╕реНрдпрддрд╛рдПрдВ рд╣реИрдВ? </p><br><pre> <code class="javascript hljs">@Component({тАж}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnDestroy</span></span></span><span class="hljs-class"> </span></span>{ subscription1$: Subscription; subscription2$: Subscription; ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> observable1$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> observable2$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">400</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription1$ = observable.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"From interval 1000"</span></span> x)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription2$ = observable.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"From interval 400"</span></span> x)); } ngOnDestroy() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription1$.unsubscribe(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription2$.unsubscribe(); } }</code> </pre> <br><p>  AppComponent рдореЗрдВ рджреЛ рд╕рджрд╕реНрдпрддрд╛рдПрдБ рд╣реИрдВ рдФрд░ рджреЛрдиреЛрдВ <em>ngOnDestroy</em> рд╣реБрдХ рдореЗрдВ рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдХреА рдЧрдИ рд╣реИрдВ, рдЬреЛ рдореЗрдореЛрд░реА рд░рд┐рд╕рд╛рд╡ рдХреЛ рд░реЛрдХрддреА рд╣реИрдВред </p><br><p>  рдЖрдк рдПрдХ рд╕рд░рдгреА рдореЗрдВ рд╕рднреА рд╕рджрд╕реНрдпрддрд╛рдПрдБ рднреА рдПрдХрддреНрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдПрдХ рд▓реВрдк рдореЗрдВ рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="javascript hljs">@Component({тАж}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnDestroy</span></span></span><span class="hljs-class"> </span></span>{ subscription1$: Subscription; subscription2$: Subscription; subscriptions: Subscription[] = []; ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> observable1$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> observable2$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">400</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription1$ = observable.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"From interval 1000"</span></span> x)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription2$ = observable.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"From interval 400"</span></span> x)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscriptions.push(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription1$); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscriptions.push(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription2$); } ngOnDestroy() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscriptions.forEach(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">subscription</span></span></span><span class="hljs-function">) =&gt;</span></span> subscription.unsubscribe()); } }</code> </pre> <br><p>  рд╕рджрд╕реНрдпрддрд╛ рд╡рд┐рдзрд┐ рдкреНрд░рдХрд╛рд░ рд╕рджрд╕реНрдпрддрд╛ рдХреА рдПрдХ RxJS рд╡рд╕реНрддреБ рд▓реМрдЯрд╛рддреА рд╣реИред  рдпрд╣ рдПрдХ рдмрд╛рд░ рдХрд╛ рд╕рдВрд╕рд╛рдзрди рд╣реИред  <em>рдРрдб</em> рдореЗрдердб рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рдХреЗ рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдХреЛ рдЧреНрд░реБрдк рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛ рдЪрд╛рдЗрд▓реНрдб рд╕рдмреНрд╕рдХреНрд░рд┐рдкреНрд╢рди рдХреЛ рдХрд░рдВрдЯ рд╕реЗ <em>рдЬреЛрдбрд╝</em> рджреЗрдЧрд╛ред  рдЬрдм рдХреЛрдИ рд╕рджрд╕реНрдпрддрд╛ рд░рджреНрдж рд╣реЛрддреА рд╣реИ, рддреЛ рдЙрд╕рдХреЗ рд╕рднреА рдмрдЪреНрдЪреЗ рднреА рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░ рджрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдЖрдЗрдП рд╣рдорд╛рд░реЗ AppComponent рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ: </p><br><pre> <code class="javascript hljs">@Component({тАж}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnDestroy</span></span></span><span class="hljs-class"> </span></span>{ subscription: Subscription; ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> observable1$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> observable2$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">400</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> subscription1$ = observable.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"From interval 1000"</span></span> x)); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> subscription2$ = observable.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"From interval 400"</span></span> x)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription.add(subscription1$); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription.add(subscription2$); } ngOnDestroy() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription.unsubscribe() } }</code> </pre> <br><p>  рдЗрд╕рд▓рд┐рдП рд╣рдо рдШрдЯрдХ рдХреЗ рд╡рд┐рдирд╛рд╢ рдХреЗ рд╕рдордп рдЗрд╕ <em>$</em> <em>.subscripton1 $</em> рдФрд░ <em>this.subscripton2 $ рд▓рд┐рдЦреЗрдВрдЧреЗ</em> ред </p><br><h3 id="2-ispolzovanie-async--pipe">  2. Async рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ |  рдкрд╛рдЗрдк </h3><br><p>  рдкрд╛рдЗрдк <em>async</em> рдЕрд╡рд▓реЛрдХрди рдпрд╛ рд╡рд╛рджрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрддрд╛ рд╣реИ рдФрд░ рдкрд╛рд░рд┐рдд рдЕрдВрддрд┐рдо рдорд╛рди рд▓реМрдЯрд╛рддрд╛ рд╣реИред  рдЬрдм рдХреЛрдИ рдирдпрд╛ рдорд╛рди рд╕рдмрдорд┐рдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдкрд╛рдЗрдк <em>рдПрд╕рд┐рдВрдХреНрд╕</em> рдкрд░рд┐рд╡рд░реНрддрди рдЯреНрд░реИрдХрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдШрдЯрдХ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИред  рдпрджрд┐ рдШрдЯрдХ рдирд╖реНрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдкрд╛рдЗрдк <em>рдПрд╕рд┐рдВрдХреНрд╕</em> рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рддреА рд╣реИред </p><br><pre> <code class="javascript hljs">@Component({ ..., <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">` &lt;div&gt; Interval: {{observable$ | async}} &lt;/div&gt; `</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ observable$; ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.observable$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); } }</code> </pre> <br><p>  рдкреНрд░рд╛рд░рдВрдн рд╣реЛрдиреЗ рдкрд░, AppComponent рдЕрдВрддрд░рд╛рд▓ рд╡рд┐рдзрд┐ рд╕реЗ рдПрдХ рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓ рдмрдирд╛рдПрдЧрд╛ред  <em>рдЕрд╡рд▓реЛрдХрдиреАрдп $</em> рдкреИрдЯрд░реНрди рдореЗрдВ, <em>Async</em> рдкрд╛рд╕ рд╣реИред  рдпрд╣ <em>рдЕрд╡рд▓реЛрдХрдиреАрдп $ рдХреА</em> рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрддрд╛ рд╣реИ рдФрд░ рдбреЛрдо рдореЗрдВ рдЗрд╕рдХрд╛ рдореВрд▓реНрдп рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЬрдм AppComponent рдирд╖реНрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рд╡рд╣ рднреА рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░ рджреЗрдЧрд╛ред  рдЗрд╕рдХреА рдХрдХреНрд╖рд╛ рдореЗрдВ рдкрд╛рдЗрдк <em>рдПрд╕реНрд╕реЗрдВрдХ</em> рдореЗрдВ <em>ngOnDestroy</em> рд╣реБрдХ рд╣реЛрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рддрдм рдХрд╣рд╛ рдЬрд╛рдПрдЧрд╛ рдЬрдм рдЗрд╕рдХрд╛ рджреГрд╢реНрдп рдирд╖реНрдЯ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред <br>  рдкрд╛рдЗрдк <em>рдПрд╕рд┐рдВрдХреНрд╕</em> рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╡рд╣ рд╕реНрд╡рдпрдВ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░реЗрдЧрд╛ рдФрд░ рдЙрдирд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░реЗрдЧрд╛ред  рдФрд░ рдЕрдм рд╣рдо рдЪрд┐рдВрддрд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рдЕрдЧрд░ рд╣рдо <em>ngOnDestroy</em> рдореЗрдВ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░рдирд╛ рднреВрд▓ рдЬрд╛рддреЗ рд╣реИрдВред </p><br><h3 id="3-ispolzovanie-operatorov-rxjs-take">  3. RxJS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ * рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рд▓реЗрдВ </h3><br><p>  RxJS рдореЗрдВ рдРрд╕реЗ рдЙрдкрдпреЛрдЧреА рдСрдкрд░реЗрдЯрд░ рд╣реЛрддреЗ рд╣реИрдВ рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрдк рд╣рдорд╛рд░реЗ рдХреЛрдгреАрдп рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдШреЛрд╖рдгрд╛рддреНрдордХ рддрд░реАрдХреЗ рд╕реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрдирдореЗрдВ рд╕реЗ рдПрдХ рдСрдкрд░реЗрдЯрд░ рд╣реИ * рд▓реЗ ** рдкрд░рд┐рд╡рд╛рд░: </p><br><ul><li>  <strong>рд▓реЗрдирд╛ (n)</strong> </li><li>  <strong>рдЯреЗрдХ рдпреВрдЯрд┐рд▓ (рдиреЛрдЯрд┐рдлрд╝рд╛рдпрд░)</strong> </li><li>  <strong>takeWile (рд╡рд┐рдзреЗрдп)</strong> </li></ul><br><p>  <strong>рд▓реЗрдирд╛ (n)</strong> <br>  рдпрд╣ рдСрдкрд░реЗрдЯрд░ рдХрдИ рдмрд╛рд░ рдФрд░ рд╕рдорд╛рдкреНрдд рд╣реЛрдиреЗ рд╡рд╛рд▓реА рдореВрд▓ рд╕рджрд╕реНрдпрддрд╛ рдХрд╛ рдЙрддреНрд╕рд░реНрдЬрди рдХрд░рддрд╛ рд╣реИред  рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░, рдПрдХ (1) рд╕рджрд╕реНрдпрддрд╛ рдФрд░ рдирд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рд▓реЗ рдЬрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдпрд╣ рдСрдкрд░реЗрдЯрд░ рдЙрдкрдпреЛрдЧреА рд╣реИ рдЕрдЧрд░ рд╣рдо рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓ рдПрдХ рдмрд╛рд░ рдПрдХ рдорд╛рди рдкрд╛рд░рд┐рдд рдХрд░реЗрдВ, рдФрд░ рдлрд┐рд░ рд╕реНрдЯреНрд░реАрдо рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░реЗрдВ: </p><br><pre> <code class="javascript hljs">@Component({...}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ subscription$; ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> observable$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription$ = observable$.pipe(take(<span class="hljs-number"><span class="hljs-number">1</span></span>)). subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x)); } }</code> </pre> <br><p>  рдЬрдм рдЕрдВрддрд░рд╛рд▓ рдкрд╣рд▓рд╛ рдорд╛рди рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ рддреЛ <em>рд╕рджрд╕реНрдпрддрд╛ $</em> рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рдПрдЧреАред </p><br><p>  <u>рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ</u> : рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЕрдЧрд░ AppComponent рдирд╖реНрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ <em>рд╕рджрд╕реНрдпрддрд╛ $ рд╕рджрд╕реНрдпрддрд╛</em> рдХреЛ рд░рджреНрдж рдирд╣реАрдВ рдХрд░реЗрдЧреА рдЬрдм рддрдХ рдХрд┐ рдЕрдВрддрд░рд╛рд▓ рдореВрд▓реНрдп рдкрд╛рд░рд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ред  рдЗрд╕рд▓рд┐рдП, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИ рдХрд┐ <em>ngOnDestroy</em> рд╣реБрдХ рдореЗрдВ рд╕рдм рдХреБрдЫ рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: </p><br><pre> <code class="javascript hljs">@Component({тАж}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnDestroy</span></span></span><span class="hljs-class"> </span></span>{ subscription$; ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> observable$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription$ = observable$.pipe(take(<span class="hljs-number"><span class="hljs-number">1</span></span>)).subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x)); } ngOnDestroy() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription$.unsubscribe(); } }</code> </pre> <br><p>  <strong>рдЯреЗрдХ рдпреВрдЯрд┐рд▓ (рдиреЛрдЯрд┐рдлрд╝рд╛рдпрд░)</strong> <br>  рдпрд╣ рдХрдерди рдореВрд▓ рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓ рд╕реЗ рдореВрд▓реНрдпреЛрдВ рдХрд╛ рдЙрддреНрд╕рд░реНрдЬрди рдХрд░рддрд╛ рд╣реИ рдЬрдм рддрдХ рдХрд┐ <em>рдиреЛрдЯрд┐рдлрд╝рд╛рдпрд░</em> рдПрдХ рдкреВрд░реНрдг рд╕рдВрджреЗрд╢ рднреЗрдЬрддрд╛ рд╣реИред </p><br><pre> <code class="javascript hljs">@Component({тАж}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnDestroy</span></span></span><span class="hljs-class"> </span></span>{ notifier = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Subject(); ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> observable$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); observable$.pipe(takeUntil(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.notifier)).subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x)); } ngOnDestroy() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.notifier.next(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.notifier.complete(); } }</code> </pre> <br><p>  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╕реВрдЪрдирд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рд╡рд┐рд╖рдп рд╣реИ, рдЬреЛ рдЗрд╕ рд╕рджрд╕реНрдпрддрд╛ рд░рджреНрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдХрдорд╛рдВрдб <em>рднреЗрдЬреЗрдЧрд╛</em> ред  рдЬрдм рддрдХ рд╣рдо рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рддрдм рддрдХ рд╣рдо рдЯреЗрдХ рдпреВрдЯрд┐рд▓ рдореЗрдВ рдЕрд╡рд▓реЛрдХрди рдпреЛрдЧреНрдп рд╣реЛрддреЗ рд╣реИрдВред  рдЯреЗрдХрдЕрдВрдЯрд┐рд▓ рдЗрдВрдЯрд░рд╡рд▓ рд╕рдВрджреЗрд╢реЛрдВ рдХрд╛ рдЙрддреНрд╕рд░реНрдЬрди рдХрд░реЗрдЧрд╛ рдЬрдм рддрдХ рдХрд┐ <em>рдиреЛрдЯрд┐рдлрд╝рд╛рдпрд░</em> рдкрд░реНрдпрд╡реЗрдХреНрд╖рд┐рдд <em>$ рдХреЛ</em> рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдирд╣реАрдВ рдХрд░рддрд╛ред  рдпрд╣ <em>рдиреЛрдЯрдСрдирд╕реНрдЯреНрд░реЛ</em> рд╣реБрдХ рдореЗрдВ <em>рдиреЛрдЯрд┐рдлрд╝рд╛рдпрд░</em> рдбрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд╣реИред </p><br><p>  <strong>takeWile (рд╡рд┐рдзреЗрдп)</strong> <br>  рдЬрдм рддрдХ рд╡реЗ рд╡рд┐рдзреЗрдп рдХреА рд╕реНрдерд┐рддрд┐ рд╕реЗ рдореЗрд▓ рдЦрд╛рддреЗ рд╣реИрдВ, рддрдм рддрдХ рдпрд╣ рдХрдерди рдЕрд╡рд▓реЛрдХрди рдпреЛрдЧреНрдп рдореВрд▓реНрдпреЛрдВ рдХрд╛ рдЙрддреНрд╕рд░реНрдЬрди рдХрд░реЗрдЧрд╛ред </p><br><pre> <code class="javascript hljs">@Component({...}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> observable$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); observable$.pipe(takeWhile(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function"> =&gt;</span></span> value &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>)).subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x)); } }</code> </pre> <br><p>  рд╣рдо рдЯреЗрдХрд╣рд╛рдЗрд╡ рдСрдкрд░реЗрдЯрд░ рдХреЗ рд╕рд╛рде <em>рдЕрд╡рд▓реЛрдХрди рдпреЛрдЧреНрдп $</em> рдХреЛ рдкрд╛рдЗрдк рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рдорд╛рдиреЛрдВ рдХреЛ рддрдм рддрдХ рднреЗрдЬреЗрдВрдЧреЗ рдЬрдм рддрдХ рдХрд┐ рд╡реЗ 10. рд╕реЗ рдХрдо рди рд╣реЛрдВред рдпрджрд┐ 10 рд╕реЗ рдЕрдзрд┐рдХ рдпрд╛ рдЙрд╕рд╕реЗ рдЕрдзрд┐рдХ рдХрд╛ рдорд╛рди рдЖрддрд╛ рд╣реИ, рддреЛ рдСрдкрд░реЗрдЯрд░ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░ рджреЗрдЧрд╛ред <br>  рдпрд╣ рд╕рдордЭрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ <em>рдЕрд╡рд▓реЛрдХрди рдпреЛрдЧреНрдп $</em> рд╕рджрд╕реНрдпрддрд╛ рддрдм рддрдХ рдЦреБрд▓реА рд░рд╣реЗрдЧреА рдЬрдм рддрдХ рдЕрдВрддрд░рд╛рд▓ 10. рдирд╣реАрдВ <em>рджреЗрддрд╛ рд╣реИ</em> ред рдЗрд╕рд▓рд┐рдП, рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП, рд╣рдо рдШрдЯрдХ рдХреЛ рдирд╖реНрдЯ рд╣реЛрдиреЗ рдкрд░ <em>рдЕрд╕реНрдкрд╖реНрдЯ</em> <em>$</em> рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <em>ngOnDestroy</em> рд╣реБрдХ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред </p><br><pre> <code class="javascript hljs">@Component({тАж}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnDestroy</span></span></span><span class="hljs-class"> </span></span>{ subscription$; ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> observable$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription$ = observable$.pipe(takeWhile(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function"> =&gt;</span></span> value &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>)).subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x)); } ngOnDestroy() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscription$.unsubscribe(); } }</code> </pre> <br><h3 id="4-ispolzovanie-operatora-rxjs-first">  4. RxJS рдкрд╣рд▓реЗ рдСрдкрд░реЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ </h3><br><p>  рдпрд╣ рдХрдерди рд╕рдВрдпреБрдХреНрдд рд▓реЗ (1) рдФрд░ рдЯреЗрдХрд╡рд╛рдЗрд▓ рдХреЗ рд╕рдорд╛рди рд╣реИред </p><br><p>  рдпрджрд┐ рдЗрд╕реЗ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рдмрд┐рдирд╛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрддреНрд╕рд░реНрдЬрди-рдпрд╣ рдкрд╣рд▓рд╛ рдорд╛рди рдЕрд╡рд▓реЛрдХрдиреАрдп рд╣реИ рдФрд░ рд╕рдорд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред  рдпрджрд┐ рдЗрд╕реЗ рдПрдХ рд╡рд┐рдзреЗрдп рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рд╛рде рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдЙрддреНрд╕рд░реНрдЬрд┐рдд рдХрд░рддрд╛ рд╣реИ - рдпрд╣ рдореВрд▓ рдЕрд╡рд▓реЛрдХрди рдХрд╛ рдкрд╣рд▓рд╛ рдореВрд▓реНрдп рд╣реИ, рдЬреЛ рд╡рд┐рдзреЗрдп рдлрд╝рдВрдХреНрд╢рди рдХреА рд╕реНрдерд┐рддрд┐ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ, рдФрд░ рд╕рдорд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред </p><br><pre> <code class="javascript hljs">@Component({...}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ observable$; ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.observable = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.observable$.pipe(first()).subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x)); } }</code> </pre> <br><p>  рдпрджрд┐ рдЕрдВрддрд░рд╛рд▓ рдЕрдкрдирд╛ рдкрд╣рд▓рд╛ рдореВрд▓реНрдп рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ, рддреЛ <em>рдЕрд╡рд▓реЛрдХрди рдпреЛрдЧреНрдп $</em> рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдХрдВрд╕реЛрд▓ рдореЗрдВ рд╣рдо рдХреЗрд╡рд▓ 1 рд▓реЙрдЧ рд╕рдВрджреЗрд╢ рджреЗрдЦреЗрдВрдЧреЗред </p><br><pre> <code class="javascript hljs">@Component({...}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ observable$; ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.observable$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.observable$.pipe(first(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">val</span></span></span><span class="hljs-function"> =&gt;</span></span> val === <span class="hljs-number"><span class="hljs-number">10</span></span>)).subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x)); } }</code> </pre> <br><p>  рдпрд╣рд╛рдВ рдкрд╣рд▓реЗ рдорд╛рдиреЛрдВ рдХреЛ рддрдм рддрдХ рдирд╣реАрдВ рдЫреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛ рдЬрдм рддрдХ рдХрд┐ рдЕрдВрддрд░рд╛рд▓ 10 рд╕реЗ рдкрд╛рд░ рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ <em>рдкрд░реНрдпрд╡реЗрдХреНрд╖рд┐рдд $</em> рдкреВрд░рд╛ рд╣реЛ рдЬрд╛рддрд╛ <em>рд╣реИ</em> ред  рдХрдВрд╕реЛрд▓ рдореЗрдВ рд╣рдо рдХреЗрд╡рд▓ рдПрдХ рд╕рдВрджреЗрд╢ рджреЗрдЦреЗрдВрдЧреЗред </p><br><p>  рдкрд╣рд▓реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рдпрджрд┐ AppComponent рдХреЛ рдкрд╣рд▓реЗ <em>рдЕрд╡рд▓реЛрдХрди $</em> рд╕реЗ рдореВрд▓реНрдп рдкреНрд░рд╛рдкреНрдд рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдирд╖реНрдЯ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╕рджрд╕реНрдпрддрд╛ рддрдм рднреА рдЦреБрд▓реА рд░рд╣реЗрдЧреА рдЬрдм рддрдХ рдХрд┐ рдкрд╣рд▓рд╛ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддрд╛ред <br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рджреВрд╕рд░реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рдпрджрд┐ AppComponent рдХреЛ рдЕрдВрддрд░рд╛рд▓ рд╕реЗ рдкрд╣рд▓реЗ рдирд╖реНрдЯ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдСрдкрд░реЗрдЯрд░ рдХреА рд╕реНрдерд┐рддрд┐ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рдореВрд▓реНрдп рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рддрд╛ рд╣реИ, рдлрд┐рд░ рднреА рд╕рджрд╕реНрдпрддрд╛ рдЕрдВрддрд░рд╛рд▓ рдХреЗ 10 рддрдХ рдЦреБрд▓реА рд░рд╣реЗрдЧреАред рдЗрд╕рд▓рд┐рдП, рд╕реБрд░рдХреНрд╖рд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд░рджреНрдж рдХрд░рдиреА рд╣реЛрдЧреАред рд╣реБрдХ <em>ngOnDestroy</em> ред </p><br><h3 id="5-ispolzovanie-dekoratora-dlya-avtomatizacii-otpiski">  5. рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбреЗрдХреЛрд░реЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ </h3><br><p>  рд╣рдо рд╕рднреА рдЗрдВрд╕рд╛рди рд╣реИрдВ, рд╣рдо рднреВрд▓ рдЬрд╛рддреЗ рд╣реИрдВред  рдкрд┐рдЫрд▓реЗ рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ <em>ngOnDestroy</em> рд╣реБрдХ рдкрд░ рднрд░реЛрд╕рд╛ рдХрд░рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛ рд╕рдХреЗ рдХрд┐ рдШрдЯрдХ рдХреЛ рдирд╖реНрдЯ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╕рджрд╕реНрдпрддрд╛ рдХреЛ <em>рдордВрдЬреВрд░реА рджреЗ рджреА рдЧрдИ рд╣реИ</em> ред  рд▓реЗрдХрд┐рди рд╣рдо рдЙрдиреНрд╣реЗрдВ <em>ngOnDestroy</em> рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рдХрд░рдирд╛ рднреВрд▓ рд╕рдХрддреЗ рд╣реИрдВ - рд╢рд╛рдпрдж рд╕рдордп рд╕реАрдорд╛ рдХреЗ рдХрд╛рд░рдг, рдпрд╛ <em>рдирд░реНрд╡</em> рдХреНрд▓рд╛рдЗрдВрдЯ рдЬреЛ рдЬрд╛рдирддрд╛ рд╣реИ рдХрд┐ рдЖрдк рдХрд╣рд╛рдВ рд░рд╣рддреЗ рд╣реИрдВ ... </p><br><p>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдШрдЯрдХ рдореЗрдВ рд╕рднреА рд╕рджрд╕реНрдпрддрд╛ рд╕реЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА рдХреЛрдгреАрдп рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рд╕рдЬреНрдЬрд╛рдХрд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рдЙрдкрдпреЛрдЧреА рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AutoUnsub</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">constructor</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> orig = <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>.prototype.ngOnDestroy; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>.prototype.ngOnDestroy = function() { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> prop <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> property = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[prop]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> property.subscribe === <span class="hljs-string"><span class="hljs-string">"function"</span></span>) { property.unsubscribe(); } } orig.apply(); } } }</code> </pre> <br><p>  рдпрд╣ <em>AutoUnsub</em> рдПрдХ рдбреЗрдХреЛрд░реЗрдЯрд░ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдорд╛рд░реА рдХреЛрдгреАрдп рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдХрдХреНрд╖рд╛рдУрдВ рдореЗрдВ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╣ рдореВрд▓ <em>ngOnDestroy</em> рд╣реБрдХ рдмрдЪрд╛рддрд╛ рд╣реИ, рдлрд┐рд░ рдПрдХ рдирдпрд╛ рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдЙрд╕ рд╡рд░реНрдЧ рд╕реЗ рдЬреЛрдбрд╝рддрд╛ рд╣реИ рдЬрд┐рд╕ рдкрд░ рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕ рддрд░рд╣, рдЬрдм рдХрдХреНрд╖рд╛ рдирд╖реНрдЯ рд╣реЛ рдЬрд╛рддреА рд╣реИ, рддреЛ рдПрдХ рдирдпрд╛ рд╣реБрдХ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдХрд╛рд░реНрдп рд╡рд░реНрдЧ рдХреЗ рдЧреБрдгреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рджрд┐рдЦрддрд╛ рд╣реИ, рдФрд░ рдпрджрд┐ рдпрд╣ рдПрдХ рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓ рдкрд╛рддрд╛ рд╣реИ, рддреЛ рдЗрд╕рд╕реЗ рдЕрдкреНрд░рдХрд╛рд╢рд┐рдд рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рддрдм рдпрд╣ рдореВрд▓ <em>ngOnDestroy</em> рд╣реБрдХ рдХреЛ рдХрдХреНрд╖рд╛ рдореЗрдВ <em>рдмреБрд▓рд╛рддрд╛ рд╣реИ</em> , рдпрджрд┐ рдХреЛрдИ рд╣реЛред </p><br><pre> <code class="javascript hljs">@Component({...}) @AutoUnsub <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ observable$; ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.observable$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.observable$.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x)) } }</code> </pre> <br><p>  рд╣рдо рдЗрд╕реЗ рдЕрдкрдиреЗ AppComponent рдкрд░ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЕрдм <em>ngOnDestroy</em> рдореЗрдВ <em>рдЕрд╡рд▓реЛрдХрди рдпреЛрдЧреНрдп $</em> рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд╛ рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд╛ рдирд╣реАрдВ <em>рдХрд░рддреЗ рд╣реИрдВ</em> - рдбреЗрдХреЛрд░реЗрдЯрд░ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдпрд╣ рдХрд░реЗрдЧрд╛ред </p><br><p>  рд▓реЗрдХрд┐рди рдЗрд╕ рдкрджреНрдзрддрд┐ рдХрд╛ рдПрдХ рдирдХрд╛рд░рд╛рддреНрдордХ рдкрд╣рд▓реВ рдпрд╣ рднреА рд╣реИ - рдпрджрд┐ рд╣рдорд╛рд░реЗ рдШрдЯрдХ рдореЗрдВ рдмрд┐рдирд╛ рд╕рдмрд╕реНрдХреНрд░рд┐рдкреНрд╢рди рдХреЗ рдХреЛрдИ рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓ рд╣реИ рддреЛ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рд╣реЛрдВрдЧреАред </p><br><h3 id="6-ispolzovanie-tslint">  6. tslint рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ </h3><br><p>  рдХрднреА-рдХрднреА tslint рдХрд╛ рдПрдХ рд╕рдВрджреЗрд╢ рдХрдВрд╕реЛрд▓ рдХреЛ рдпрд╣ рдмрддрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ рдШрдЯрдХреЛрдВ рдпрд╛ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдиреЗ <em>ngOnDestroy</em> рд╡рд┐рдзрд┐ рдШреЛрд╖рд┐рдд рдирд╣реАрдВ рдХреА рд╣реИред  рдЖрдк рдХрдВрд╕реЛрд▓ рдХреЛ рдЪреЗрддрд╛рд╡рдиреА рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП tslint рдореЗрдВ рдПрдХ рдХрд╕реНрдЯрдо рдирд┐рдпрдо рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ рдЬрдм рдПрдХ рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╡реГрдХреНрд╖ рдпрд╛ рдирд┐рд░реНрдорд╛рдг рдЪрд▓ рд░рд╣рд╛ рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ рдШрдЯрдХреЛрдВ рдореЗрдВ <em>ngOnDestroy</em> рд╣реБрдХ рдирд╣реАрдВ рд╣реИ: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ngOnDestroyRule.tsimport * as Lint from "tslint" import * as ts from "typescript"; import * as tsutils from "tsutils"; export class Rule extends Lint.Rules.AbstractRule { public static metadata: Lint.IRuleMetadata = { ruleName: "ng-on-destroy", description: "Enforces ngOnDestory hook on component/directive/pipe classes", optionsDescription: "Not configurable.", options: null, type: "style", typescriptOnly: false } public static FAILURE_STRING = "Class name must have the ngOnDestroy hook"; public apply(sourceFile: ts.SourceFile): Lint.RuleFailure[] { return this.applyWithWalker(new NgOnDestroyWalker(sourceFile, Rule.metadata.ruleName, void this.getOptions())) } } class NgOnDestroyWalker extends Lint.AbstractWalker { visitClassDeclaration(node: ts.ClassDeclaration) { this.validateMethods(node); } validateMethods(node: ts.ClassDeclaration) { const methodNames = node.members.filter(ts.isMethodDeclaration).map(m =&gt; m.name!.getText()); const ngOnDestroyArr = methodNames.filter( methodName =&gt; methodName === "ngOnDestroy"); if( ngOnDestroyArr.length === 0) this.addFailureAtNode(node.name, Rule.FAILURE_STRING); } }</span></span></code> </pre> <br><p>  рдЕрдЧрд░ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ <em>ngOnDestroy</em> рдмрд┐рдирд╛ рдРрд╕рд╛ рдХреЛрдИ рдШрдЯрдХ рд╣реИ: </p><br><pre> <code class="javascript hljs">@Component({...}) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ observable$; ngOnInit () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.observable$ = Rx.Observable.interval(<span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.observable$.subscribe(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x)); } }</code> </pre> <br><p>  рд▓рд┐рдВрдЯ-рдЖрдИрдПрдирдЬреА AppComponent рд╣рдореЗрдВ рд▓рд╛рдкрддрд╛ <em>ngOnDestroy</em> рд╣реБрдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪреЗрддрд╛рд╡рдиреА рджреЗрдЧрд╛: </p><br><pre> <code class="bash hljs">$ ng lint Error at app.component.ts 12: Class name must have the ngOnDestroy hook</code> </pre> <br><h3 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h3><br><p>  рдЭреВрд▓рдиреЗ рдпрд╛ рдЦреБрд▓реА рд╕рджрд╕реНрдпрддрд╛ рд╕реЗ рдореЗрдореЛрд░реА рд▓реАрдХ, рддреНрд░реБрдЯрд┐рдпрд╛рдВ, рдЕрд╡рд╛рдВрдЫрд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рдпрд╛ рдЦрд░рд╛рдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкреНрд░рджрд░реНрд╢рди рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ рдХреЛрдгреАрдп рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рд╡реЗрдзрд╢рд╛рд▓рд╛ рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рддрд░реАрдХреЛрдВ рдХреЛ рджреЗрдЦрд╛ред  рдФрд░ рдЬреЛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдкрд░ рдирд┐рд░реНрднрд░ рд╣реИред </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi484762/">https://habr.com/ru/post/hi484762/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi484752/index.html">рдорд╕реНрддреА рдФрд░ рд▓рд╛рдн рдХреЗ рд▓рд┐рдП рдПрдХ рд▓реИрдкрдЯреЙрдк рдбреНрд░рд╛рдЗрд╡рд░ рд▓рд┐рдЦрдирд╛, рдпрд╛ рдХрд░реНрдиреЗрд▓ рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ рдкреНрд░рддрд┐рдмрджреНрдз рд╣реЛ, рднрд▓реЗ рд╣реА рдЖрдк рд╕реНрдорд╛рд░реНрдЯ рди рд╣реЛрдВ</a></li>
<li><a href="../hi484754/index.html">рдЗрдВрдЯреЗрд▓ рддрдп рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рдХрд┐ рдХреМрди рддреЗрдЬ рд╣реИ: рдзреВрдордХреЗрддреБ рдЭреАрд▓ рдпрд╛ рдмрд░реНрдл рдЭреАрд▓</a></li>
<li><a href="../hi484756/index.html">рджреГрд╢реНрдп рд╕реВрдЪрдирд╛ рд╕рд┐рджреНрдзрд╛рдВрдд (рднрд╛рдЧ 2)</a></li>
<li><a href="../hi484758/index.html">рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдФрд░ рд╡реНрдпрд╡рд╕рд╛рдп рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рдмреАрдЪ рдХреНрдпрд╛ рд╕рд╛рдорд╛рдиреНрдп рд╣реИ</a></li>
<li><a href="../hi484760/index.html">21 рд╕реЗ 26 рдЬрдирд╡рд░реА рддрдХ рдорд╛рд╕реНрдХреЛ рдореЗрдВ рдбрд┐рдЬрд┐рдЯрд▓ рдХрд╛рд░реНрдпрдХреНрд░рдо</a></li>
<li><a href="../hi484772/index.html">рд╣рд╛рдЗрдмрд░рдиреЗрдЯ: рдЦрд╛рдирд╛ рдмрдирд╛рдирд╛ рдХреИрд╕реЗ</a></li>
<li><a href="../hi484774/index.html">рдкреЛрд▓реИрдВрдб рдХреЗ рдбреЛрдореЗрди рдЬрд╝реЛрди рдХреА рд╕реНрдерд┐рддрд┐ред 2019 рдХреЗ рд▓рд┐рдП .pl</a></li>
<li><a href="../hi484776/index.html">21 рд╕реЗ 26 рдЬрдирд╡рд░реА рддрдХ рд╕реЗрдВрдЯ рдкреАрдЯрд░реНрд╕рдмрд░реНрдЧ рдореЗрдВ рдбрд┐рдЬрд┐рдЯрд▓ рдХрд╛рд░реНрдпрдХреНрд░рдо</a></li>
<li><a href="../hi484778/index.html">рдЗрдВрдЯреЗрд▓ рд╕рдорд╛рдирд╛рдВрддрд░ рд╕реНрдЯреВрдбрд┐рдпреЛ XE 2020: рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рд╕рднреА рдмреЗрд╣рддрд░реАрди</a></li>
<li><a href="../hi484782/index.html">рдмреНрд▓реЗрдЬрд╝рд░ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд╛рдЗрдб рдСрдирд▓рд╛рдЗрди рд╕реНрдЯреЛрд░: рднрд╛рдЧ 2 - рд╕реАрдЖрдИ / рд╕реАрдбреА</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>