<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚵🏿 👘 🏈 Pembuatan Perselisihan - bot pada .NET Core dengan penyebaran ke server VPS 🚾 🤷🏼 👨🏾‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, Khabrovchans! 

 Hari ini Anda akan membaca artikel yang akan menjelaskan cara membuat bot menggunakan C # di .NET Core, dan cara mendapatkannya...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pembuatan Perselisihan - bot pada .NET Core dengan penyebaran ke server VPS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479180/"><img src="https://habrastorage.org/webt/4w/ke/1l/4wke1lscvblbtnjbp5xuoziadhe.jpeg"><br><br>  Halo, Khabrovchans! <br><br>  Hari ini Anda akan membaca artikel yang akan menjelaskan cara membuat bot menggunakan C # di .NET Core, dan cara mendapatkannya di server jauh. <br><br>  Artikel ini akan terdiri dari latar belakang, tahap persiapan, logika penulisan dan transfer bot ke server jauh. <br><br>  Saya harap artikel ini akan membantu banyak pemula. <br><a name="habracut"></a><br><h2>  Latar belakang </h2><br>  Semuanya berawal pada suatu malam musim gugur tanpa tidur yang saya habiskan di server Discord.  Karena saya bergabung dengannya relatif baru, saya mulai mempelajarinya naik turun.  Setelah menemukan saluran teks "Pekerjaan", saya menjadi tertarik, membukanya, dan menemukan di antara proposal yang tidak menarik bagi saya, ini: <br><br>  <i>"Programmer (pengembang bot)</i> <i><br></i>  <i><b>Persyaratan:</b></i> <i><br><br></i> <ul><li>  <i>pengetahuan bahasa pemrograman;</i> </li><li>  <i>kemampuan belajar mandiri.</i> </li></ul> <i><br></i>  <i>Keinginan:</i> <i><br><br></i> <ul><li>  <i>kemampuan untuk memahami kode orang lain;</i> </li><li>  <i>pengetahuan tentang fungsi DISCORD.</i> </li></ul> <i><br></i>  <i><b>Tugas:</b></i> <i><br><br></i> <ul><li>  <i>pengembangan bot;</i> </li><li>  <i>dukungan dan pemeliharaan bot.</i> </li></ul> <i><br></i>  <i><b>Manfaat Anda:</b></i> <i><br><br></i> <ul><li>  <i>Kemampuan untuk mendukung dan memengaruhi proyek yang Anda sukai;</i> </li><li>  <i>Memperoleh pengalaman kerja tim;</i> </li><li>  <i>Kesempatan untuk menunjukkan dan meningkatkan keterampilan yang ada. "</i> </li></ul> <i><br></i> <br>  Ini langsung membuat saya tertarik.  Ya, mereka tidak membayar untuk pekerjaan ini, tetapi mereka tidak memerlukan kewajiban dari Anda, dan tidak akan ada kelebihan dalam portofolio.  Jadi saya menulis admin server, dan dia meminta saya untuk menulis bot yang akan menampilkan statistik pemain di World of Tanks. <br><br><h2>  Fase persiapan </h2><br><img src="https://habrastorage.org/webt/vq/ff/5x/vqff5x8bux4bpoyns8pqaemchyk.jpeg"><br>  <b>Discrod</b> <br>  Sebelum Anda mulai menulis bot kami, Anda harus membuatnya untuk Discord.  Anda perlu: <br><br><ol><li>  Masuk ke akun Perselisihan <a href="https://discordapp.com/developers/applications/">di</a> </li><li>  Di tab "Aplikasi", klik tombol "Aplikasi Baru" dan beri nama bot </li><li>  Dapatkan token bot dengan masuk ke bot Anda dan temukan tab "Bot" di daftar "Pengaturan" </li><li>  Simpan token di suatu tempat </li></ol><br>  <b>Wargaming</b> <br><br>  Anda juga harus membuat aplikasi dalam Wargaming untuk mengakses API Wargaming.  Di sini juga, semuanya sederhana: <br><br><ol><li>  Kami pergi ke akun Wargaming <a href="https://developers.wargaming.net/">di tautan ini</a> </li><li>  Pergi ke "Aplikasi Saya" dan klik tombol "Tambah Aplikasi Baru", berikan nama aplikasi dan pilih jenisnya </li><li>  Simpan ID aplikasi </li></ol><br>  <b>Perangkat lunak</b> <br><br>  Sudah ada kebebasan memilih.  Seseorang menggunakan Visual Studio, seseorang Penunggang, seseorang umumnya kuat, dan menulis kode dalam Vim (masih, programmer nyata hanya menggunakan keyboard, kan?).  Namun, agar tidak mengimplementasikan API Perselisihan, Anda dapat menggunakan pustaka C # "DSharpPlus" tidak resmi.  Itu dapat diinstal baik dari NuGet, atau dengan mengumpulkan sendiri sumber dari repositori. <br><br><div class="spoiler">  <b class="spoiler_title">Bagi mereka yang tidak tahu atau lupa cara menginstal aplikasi dari NuGet.</b> <div class="spoiler_text">  <b>Petunjuk untuk Visual Studio</b> <br><br><ol><li>  Buka tab Proyek - Manajemen Paket NuGet; </li><li>  Klik pada ulasan dan masukkan "DSharpPlus" di bidang pencarian; </li><li>  Kami memilih dan menginstal kerangka kerja; </li><li>  KEUNTUNGAN! </li></ol><br></div></div><br>  Fase persiapan berakhir, Anda dapat melanjutkan untuk menulis bot. <br><br><h2>  Logika ejaan </h2><br><img src="https://habrastorage.org/webt/zp/3o/ul/zp3oulxjmfdxgw3mxatiw6eqq1u.png"><br><br>  Kami tidak akan mempertimbangkan keseluruhan logika aplikasi, saya hanya akan menunjukkan cara bekerja dengan intersepsi pesan oleh bot, dan cara bekerja dengan Wargaming API. <br><br>  Bekerja dengan bot Discord terjadi melalui fungsi statis async Task MainTask (string [] args); <br>  Untuk memanggil fungsi ini, di Main perlu mendaftar <br><br><pre><code class="plaintext hljs">MainTask(args).ConfigureAwait(false).GetAwaiter().GetResult();</code> </pre> <br>  Selanjutnya, Anda perlu menginisialisasi bot Anda: <br><br><pre> <code class="cs hljs">discord = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DiscordClient(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DiscordConfiguration { Token = token, TokenType = TokenType.Bot, UseInternalLogHandler = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, LogLevel = LogLevel.Debug });</code> </pre> <br>  Di mana token adalah token bot Anda. <br>  Kemudian, melalui lambda, kami menulis perintah yang diperlukan yang harus dijalankan oleh bot: <br><pre> <code class="cs hljs">discord.MessageCreated += <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> e =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> message = e.Message.Content; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (message.StartsWith(<span class="hljs-string"><span class="hljs-string">"&amp;"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> e.Message.RespondAsync(“Hello, ” + e.Author.Username); } };</code> </pre><br>  Di mana e.Author.Username - mendapatkan nama panggilan pengguna. <br><br>  Jadi, ketika Anda mengirim pesan apa pun yang dimulai dengan &amp;, bot akan menyambut Anda. <br><br>  Di akhir fungsi ini, Anda perlu mendaftar tunggu discord.ConnectAsync ();  dan menunggu Task.Delay (-1); <br><br>  Ini akan memungkinkan Anda untuk mengeksekusi perintah di latar belakang tanpa mengambil utas utama. <br><br>  Sekarang Anda harus berurusan dengan API Wargaming.  Semuanya sederhana di sini - tulis permintaan CURL, dapatkan jawabannya dalam bentuk string JSON, tarik data yang diperlukan dari sana dan lakukan manipulasi pada mereka. <br><br><div class="spoiler">  <b class="spoiler_title">Contoh bekerja dengan WargamingAPI</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Player </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindPlayer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> searchNickname</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//https://api.worldoftanks.ru/wot/account/list/?application_id=y0ur_a@@_id_h3r3search=nickname urlRequest = resourceMan.GetString("url_find_player") + appID + "&amp;search=" + searchNickname; Player player = null; string resultResponse = GetResponse(urlRequest); dynamic parsed = JsonConvert.DeserializeObject(resultResponse); string status = parsed.status; if (status == "ok") { int count = parsed.meta.count; if (count &gt; 0) { player = new Player { Nickname = parsed.data[0].nickname, Id = parsed.data[0].account_id }; } else { throw new PlayerNotFound("  "); } } else { string error = parsed.error.message; if (error == "NOT_ENOUGH_SEARCH_LENGTH") { throw new PlayerNotFound("   "); } else if (error == "INVALID_SEARCH") { throw new PlayerNotFound(" "); } else if (error == "SEARCH_NOT_SPECIFIED") { throw new PlayerNotFound(" "); } else { throw new Exception("Something went wrong."); } } return player; }</span></span></code> </pre><br></div></div><br>  Perhatian!  Sangat tidak disarankan untuk menyimpan semua token dan ID aplikasi dalam teks yang jelas!  Paling tidak - Perselisihan melarang token ini ketika mereka mencapai jaringan di seluruh dunia, secara maksimal - bot mulai menggunakan penjahat cyber. <br><br><h2>  Menyebarkan di server VPS </h2><br><img src="https://habrastorage.org/webt/yq/k3/6g/yqk36gjlwxnrbo_ssc422vejtyi.jpeg"><br><br>  Setelah Anda selesai dengan bot, Anda harus meletakkannya di server yang terus berjalan 24/7.  Ini disebabkan oleh fakta bahwa ketika aplikasi Anda bekerja, bot juga berfungsi.  Segera setelah Anda mematikan aplikasi, bot Anda tertidur. <br><br>  Banyak server VPS ada di dunia ini, baik pada Windows maupun Linux, tetapi dalam kebanyakan kasus, Linux beberapa kali lebih murah untuk di-host. <br><br>  Di server Discord, saya disarankan oleh vscale.io, dan saya segera membuat server virtual di Ubuntu dan mengunggah bot.  Saya tidak akan menjelaskan cara kerja situs ini, tetapi saya akan segera melanjutkan ke pengaturan bot. <br><br>  Pertama-tama, Anda perlu menginstal perangkat lunak yang diperlukan yang akan menjalankan bot kami yang ditulis dalam .NET Core.  <a href="https://docs.microsoft.com/ru-ru/dotnet/core/install/linux-package-manager-ubuntu-1804">Cara melakukan ini dijelaskan di sini</a> . <br><br>  Selanjutnya, Anda perlu mengunggah bot ke layanan Git, seperti GitHub dan sejenisnya, dan mengkloningnya ke server VPS, atau mengunduh bot Anda dengan cara lain.  Perhatikan bahwa Anda hanya akan memiliki konsol, tidak akan ada GUI.  Tentu saja <br><br>  Setelah Anda mengunduh bot Anda, Anda harus menjalankannya.  Untuk melakukan ini, Anda perlu: <br><br><ul><li>  Pulihkan semua dependensi: pemulihan dotnet </li><li>  Bangun Aplikasi: dotnet build name_project.sln -c Release </li><li>  Pergi ke DLL yang dibangun; </li><li>  dotnet name_of_file.dll </li></ul><br>  Selamat!  Bot Anda sedang berjalan.  Namun, bot, sayangnya, menempati konsol, dan tidak akan mudah untuk keluar dari server VPS.  Juga, jika server reboot, Anda harus memulai bot lagi.  Ada beberapa jalan keluar dari situasi ini.  Semuanya terkait dengan memulai pada startup server: <br><br><ul><li>  Tambahkan skrip run ke /etc/init.d </li><li>  Buat layanan yang akan dimulai saat startup. </li></ul><br>  Saya tidak melihat intinya merinci mereka, semuanya dijelaskan secara cukup rinci di Internet. <br><br><h2>  Kesimpulan </h2><br>  Saya senang bahwa saya menerima tugas ini.  Ini adalah pengalaman pengembangan bot pertama saya, dan saya senang bahwa saya telah memperoleh pengetahuan baru dalam C # dan bekerja dengan Linux. <br><br>  Tautan ke Discord - server.  <a href="https://discord.gg/yprre9">Bagi mereka yang memainkan game Wargaming.</a> <br>  <a href="https://github.com/hunterlan/WargamingStatistics">Tautan ke repositori tempat Discord bot berada.</a> <br>  <a href="https://github.com/DSharpPlus/DSharpPlus">Tautan ke repositori DSharpPlus.</a> <br>  Terima kasih atas perhatian anda! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id479180/">https://habr.com/ru/post/id479180/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id479166/index.html">Menulis modul kedaluwarsa capped Anda untuk tarantool</a></li>
<li><a href="../id479168/index.html">Cara membuat RESTful API on Symfony 5 + API Platform untuk proyek MODX</a></li>
<li><a href="../id479170/index.html">Pembacaan Akhir Pekan: Intisari Audio Layanan Streaming dan Industri Musik</a></li>
<li><a href="../id479176/index.html">Modders menghabiskan 15 tahun memperbaiki Knights of Old Republic 2</a></li>
<li><a href="../id479178/index.html">Transaksi Deanonymizing Dataset Elliptic</a></li>
<li><a href="../id479182/index.html">Praktek mempersiapkan kata-kata asing dengan pengisi suara untuk menghafal dalam program Anki</a></li>
<li><a href="../id479184/index.html">Pemecahan masalah dengan pwnable.kr 26 - ascii_easy. Kami menangani gadget ROP dari awal sekali dan untuk semua</a></li>
<li><a href="../id479186/index.html">Pada struktur komputasi paralel atau argumen terhadap operator "Go"</a></li>
<li><a href="../id479188/index.html">Jumlah dari semua bilangan alami: 1 + 2 + 3 + 4 + .... Bagian 2</a></li>
<li><a href="../id479192/index.html">Hypervisor Steroid: FreeBSD + ZFS + cbsd</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>