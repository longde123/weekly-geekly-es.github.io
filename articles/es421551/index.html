<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>讹 锔 拣 Dominando Vuex - De cero a h茅roe   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! Les presento la traducci贸n del art铆culo "Dominando Vuex - Zero to Hero" por Sanath Kumar. 


 La documentaci贸n oficial de Vuex lo define co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dominando Vuex - De cero a h茅roe</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421551/"><p>  Hola Habr!  Les presento la traducci贸n del art铆culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Dominando Vuex - Zero to Hero"</a> por Sanath Kumar. </p><br><p>  La documentaci贸n oficial de Vuex lo define como un <b>patr贸n de gesti贸n de estado</b> + biblioteca para aplicaciones Vue.js.  <i>驴Pero qu茅 significa eso?</i>  <i>驴Qu茅 es un patr贸n de gesti贸n estatal?</i> </p><br><p>  Imagine que est谩 trabajando en una gran aplicaci贸n web con cientos de rutas y componentes.  驴No ser铆a m谩s f谩cil si pudi茅ramos almacenar todos los datos que necesitar铆amos en una aplicaci贸n en un almacenamiento centralizado? </p><br><img src="https://habrastorage.org/webt/dm/rc/t5/dmrct5ro7paby7tugthhzagynxw.jpeg"><a name="habracut"></a><br><p> Cada componente o ruta dentro de nuestra aplicaci贸n solicitar谩 datos del estado de Vuex y transferir谩 los datos modificados nuevamente al estado. </p><br><p>  En esencia, el estado de Vuex puede verse como la 煤nica fuente de verdad para toda la aplicaci贸n. </p><br><p>  Los datos se almacenan dentro del estado como un objeto JSON.  Por ejemplo: </p><br><pre><code class="plaintext hljs">state: { name: "John Doe", age: "28" }</code> </pre> <br><p>  Pero, 驴c贸mo pueden nuestros componentes y rutas acceder a los datos almacenados en nuestro estado?  Para hacer esto, necesitamos definir captadores dentro de nuestro repositorio Vuex que devolver谩n los datos del repositorio a nuestros componentes.  Veamos c贸mo se ve un <b>getter</b> simple, que obtiene el nombre de nuestro repositorio: </p><br><pre> <code class="plaintext hljs">getters: { NAME: state =&gt; { return state.name; }, }</code> </pre> <br><p>  Observe que el nombre del captador est谩 en may煤sculas.  Esto es solo una recomendaci贸n de estilo de c贸digo.  No es necesario seguirlo si no te gusta. </p><br><p>  Ahora que hemos definido un captador para el nombre, es incre铆blemente f谩cil obtener el valor del nombre dentro de nuestro componente.  El siguiente c贸digo le permite hacer esto. </p><br><pre> <code class="plaintext hljs">let name = this.$store.getters.NAME;</code> </pre> <br><p>  Descubrimos c贸mo <b>obtener</b> datos del almacenamiento.  Ahora veamos c贸mo podemos <b>establecer los</b> datos en el repositorio.  Definiremos setters, 驴verdad?  Adem谩s, los setters de Vuex se nombran un poco diferente.  Definimos una <b>mutaci贸n</b> para establecer datos en nuestro estado Vuex. </p><br><pre> <code class="plaintext hljs">mutations: { SET_NAME: (state, payload) =&gt; { state.name = payload; }, }</code> </pre> <br><p>  驴Qu茅 m谩s es la carga 煤til?  <b>La carga 煤til</b> son los datos transmitidos a nuestra mutaci贸n desde el componente que hace la mutaci贸n.  驴C贸mo podemos hacer esto?  Muy simple: </p><br><pre> <code class="plaintext hljs">this.$store.commit('SET_NAME', your_name);</code> </pre> <br><p>  Este c贸digo cambiar谩 el estado de la aplicaci贸n y establecer谩 cualquier valor asignado a <i>your_name</i> para la propiedad de nombre dentro de nuestro repositorio. </p><br><p>  MUTACIONES SINCRONICAS </p><br><p>  Imagine que tenemos una lista de nombres almacenados en una base de datos en un servidor remoto.  El servidor nos proporciona un punto final que devuelve una serie de nombres que se pueden usar en nuestro Vue.js.  Por supuesto, podemos usar <b>Axios</b> para consultar el punto final y obtener los datos. </p><br><pre> <code class="plaintext hljs">let {data} = await Axios.get('https://myapiendpoint.com/api/names');</code> </pre> <br><p>  Despu茅s de eso, podemos pasar la matriz devuelta a nuestro estado Vuex de la tienda usando una mutaci贸n.  F谩cil, verdad?  Pero en realidad no.  Las mutaciones son s铆ncronas, y no podemos ejecutar operaciones as铆ncronas, como llamadas de API, dentro de una mutaci贸n. </p><br><p>  驴Qu茅 debemos hacer entonces?  Crea <b>acciones</b> . </p><br><p>  Las acciones son como mutaciones, pero en lugar de cambiar directamente el estado, hacen una mutaci贸n.  驴Suena confuso?  Veamos el anuncio de la acci贸n. </p><br><pre> <code class="plaintext hljs">actions: { SET_NAME: (context, payload) { context.commit('SET_NAME', payload); }, }</code> </pre> <br><p>  Definimos una acci贸n llamada SET_NAME que toma el contexto y la <i>carga 煤til</i> como par谩metros.  La acci贸n confirma la mutaci贸n SET_NAME, creada anteriormente, con los datos que se le pasan, es decir, <b>su_nombre</b> . </p><br><p>  Ahora, en lugar de invocar la mutaci贸n directamente, nuestros componentes activan la acci贸n SET_NAME con un nuevo nombre como datos de la siguiente manera: </p><br><pre> <code class="plaintext hljs">this.$store.dispatch('SET_NAME', your_name);</code> </pre> <br><p>  Luego, la acci贸n inicia la mutaci贸n con los datos que se le pasan, es decir, <i>su_nombre</i> . </p><br><br><h2>  Pero por que? </h2><br><p>  Quiz谩s se pregunte por qu茅 se requiere una declaraci贸n de acci贸n si simplemente podemos iniciar mutaciones con un nuevo valor directamente desde nuestros componentes.  Como se mencion贸 anteriormente, las mutaciones son sincr贸nicas, pero no acciones. </p><br><p>  En el ejemplo anterior, el caso se considera cuando necesita actualizar el valor del nombre, pero no solo en su estado, sino tambi茅n en la base de datos que se ejecuta en el servidor remoto.  Estoy seguro de que as铆 es como pretende utilizar Vuex en un proyecto real en el 99% de los casos.  Eche un vistazo al siguiente fragmento de c贸digo: </p><br><pre> <code class="plaintext hljs">mutations: { SET_NAME: (state, name) =&gt; { state.name = name; }, }, actions: { SET_NAME: async (context, name) =&gt; { let {data} = await Axios.post('http://myapiendpoint.com/api/name', {name: name}); if (data.status == 200) { context.commit('SET_NAME', name); } }, }</code> </pre> <br><p>  El c贸digo en s铆 se explica por s铆 mismo.  Usamos Axios para enviar el nombre al punto final.  Si la solicitud POST se realiz贸 correctamente y el valor del nombre del campo se modific贸 correctamente en el servidor, iniciamos la mutaci贸n SET_ NAME para actualizar el valor del nombre dentro de nuestro estado. </p><br><p>  TOMA PRCTICA NUNCA INICIES MUTACIONES DIRECTAMENTE.  PARA ESTE SIEMPRE USE ACCIONES. </p><br><br><h2>  Configurar el almacenamiento de Vuex en Vue.JS </h2><br><p>  Profundicemos m谩s y descubramos c贸mo podemos implementar Vuex en una aplicaci贸n real. </p><br><h3>  Paso 1. Instala Vuex </h3><br><pre> <code class="plaintext hljs">npm install --save vuex</code> </pre> <br><h3>  Paso 2. Crear un repositorio de Vuex </h3><br><ol><li>  Cree el directorio de la <b>tienda</b> en la ra铆z de nuestra aplicaci贸n. </li><li>  Cree el archivo <b>index.js</b> en este directorio y use el siguiente c贸digo para crear un nuevo repositorio. </li></ol><br><pre> <code class="plaintext hljs">import Vue from 'vue'; import Vuex from 'vuex'; Vue.use(Vuex); export const store = new Vuex.Store({ state: {}, getters: {}, mutations: {}, actions: {}, });</code> </pre> <br><h3>  Paso 3. Agregar almacenamiento Vuex a la aplicaci贸n Vue.JS </h3><br><p>  1. Importe el <b>repositorio</b> al archivo main.js: </p><br><pre> <code class="plaintext hljs">import {store} from './store';</code> </pre> <br><p>  2. Agregue <b>almacenamiento</b> a la instancia de Vue, como se muestra a continuaci贸n: </p><br><pre> <code class="plaintext hljs">new Vue({ el: '#app', store, router, render: h =&gt; h(App), });</code> </pre> <br><p>  Ahora podemos agregar variables de estado, captadores, mutaciones y acciones a nuestro repositorio Vuex. </p><br><br><h2>  Ejemplo </h2><br><p>  Eche un vistazo al repositorio de Vuex de una aplicaci贸n de lista de tareas simple.  "隆No solo otra lista de tareas pendientes!".  驴Eh?  No te preocupes  Al final de este art铆culo, aprender谩 c贸mo usar todo el poder y el poder de Vuex. </p><br><pre> <code class="plaintext hljs">import Vue from 'vue'; import Vuex from 'vuex'; import Axios from 'axios'; Vue.use(Vuex); export const store = new Vuex.Store({ state: { todos: null, }, getters: { TODOS: state =&gt; { return state.todos; }, }, mutations: { SET_TODO: (state, payload) =&gt; { state.todos = payload; }, ADD_TODO: (state, payload) =&gt; { state.todos.push(payload); }, }, actions: { GET_TODO: async (context, payload) =&gt; { let {data} = await Axios.get('http://yourwebsite.com/api/todo'); context.commit('SET_TODO', data); }, SAVE_TODO: async (context, payload) =&gt; { let {data} = await Axios.post('http://yourwebsite.com/api/todo'); context.commit('ADD_TODO', payload); }, }, });</code> </pre> <br><br><h2>  Agregar un nuevo elemento a la lista de tareas </h2><br><p>  Dentro de su componente, inicie la acci贸n SAVE_TODO pas谩ndole un nuevo elemento de tarea pendiente, como se muestra en el fragmento de c贸digo a continuaci贸n. </p><br><pre> <code class="plaintext hljs">let item = 'Get groceries'; this.$store.dispatch('SAVE_TODO', item);</code> </pre> <br><p>  La acci贸n <b>SAVE_TODO</b> realiza una solicitud POST al punto final y luego inicia la <b>mutaci贸n ADD_TODO</b> , que agrega un elemento de <b>tarea</b> pendiente a la variable de estado <b>todos</b> . </p><br><br><h2>  Obtenci贸n de tareas pendientes </h2><br><p>  Dentro del bloque <b>montado ()</b> de su componente, inicie la segunda acci贸n <b>GET_TODO</b> , que recibe todos los elementos de tareas desde el punto final y los almacena en la variable de estado <i>todos</i> , iniciando la mutaci贸n SET_TODO: </p><br><pre> <code class="plaintext hljs">mounted() { this.$store.dispatch('GET_TODO'); }</code> </pre> <br><br><h2>  Acceda a tareas pendientes dentro de un componente </h2><br><p>  Para acceder al elemento <i>todos</i> dentro de un componente, cree una propiedad calculada: </p><br><pre> <code class="plaintext hljs">computed: { todoList() { return this.$store.getters.TODOS; }, }</code> </pre> <br><p>  Dentro del componente, puede acceder a la propiedad calculada: </p><br><pre> <code class="plaintext hljs">&lt;div class="todo-item" v-for="item in todoList"&gt;&lt;/div&gt;</code> </pre> <br><br><h2>  Usando el m茅todo mapGetters </h2><br><p>  Hay una manera a煤n m谩s f谩cil de acceder a las tareas pendientes dentro de un componente utilizando el m茅todo <b>mapGetters</b> proporcionado por Vuex. </p><br><pre> <code class="plaintext hljs">import {mapGetters} from 'vuex'; computed : { ...mapGetters(['TODOS']), //    }</code> </pre> <br><p>  Es posible que ya haya adivinado que el c贸digo dentro de la plantilla debe cambiarse, como se muestra en el fragmento a continuaci贸n. </p><br><pre> <code class="plaintext hljs">&lt;div class="todo-item" v-for="item in TODOS"&gt;&lt;/div&gt;</code> </pre> <br><p>  Observe c贸mo usamos el operador de distribuci贸n ES6 [...] dentro de nuestras propiedades calculadas. </p><br><p>  ALMACENAMIENTO DE VUEX NO ES SOLO LA FUENTE DEL ESTADO ACTUAL DE SU APLICACIN.  TAMBIN ES EL NICO PUNTO QUE DEBE CAMBIAR ESTE ESTADO. </p><br><p>  Esto requiere una peque帽a explicaci贸n.  Ya hemos aprendido c贸mo crear acciones para <b>recibir</b> e <b>instalar</b> elementos de <b>tareas</b> en nuestro repositorio.  驴Qu茅 sucede si necesitamos actualizar un elemento y marcarlo?  驴D贸nde ejecutamos el c贸digo para esto? </p><br><p>  En Internet puede encontrar diferentes opiniones sobre este asunto.  La documentaci贸n tambi茅n carece de una gu铆a clara al respecto. </p><br><p>  Recomendar铆a almacenar todas las llamadas API dentro de las acciones en su repositorio Vuex.  Por lo tanto, cada cambio de estado ocurre solo dentro del repositorio, lo que facilita la depuraci贸n y simplifica la comprensi贸n del c贸digo, y tambi茅n facilita la edici贸n del c贸digo. </p><br><br><h2>  Organizaci贸n del c贸digo </h2><br><p>  Guardar todas las variables de estado, captadores, acciones y mutaciones en un archivo r谩pidamente lo har谩 engorroso tan pronto como comience a trabajar con aplicaciones grandes.  Veamos c贸mo puede organizar el almacenamiento en varios archivos como m贸dulos. </p><br><p>  Cree un nuevo directorio dentro de su repositorio y as铆gnele el nombre <i>m贸dulos</i> .  Agregue el archivo <i>todos.js</i> al directorio creado que contiene el siguiente c贸digo: </p><br><pre> <code class="plaintext hljs">const state = {}; const getters = {}; const mutations = {}; const actions = {}; export default { state, getters, mutations, actions, };</code> </pre> <br><p>  Ahora podemos mover las variables de estado, captadores, mutaciones y acciones del archivo <b>index.js al</b> archivo <b>todos.js</b> .  Recuerde importar <b>Axios</b> .  Todo lo que necesitamos hacer es informarle a Vuex que creamos el m贸dulo de almacenamiento y d贸nde encontrarlo.  El archivo <i>index.js</i> actualizado deber铆a verse as铆: </p><br><pre> <code class="plaintext hljs">import Vue from 'vue'; import Vuex from 'vuex'; import Axios from 'axios'; import todos from './modules/todos'; Vue.use(Vuex); export const store = new Vuex.Store({ state: {}, getters: {}, mutations: {}, actions: {}, modules: { todos, }, });</code> </pre> <br><p>  El archivo <b>todos.js</b> se ver谩 as铆: </p><br><pre> <code class="plaintext hljs">import Axios from 'axios'; state = { todos: null, }; getters = { TODOS: state =&gt; { return state.todos; }, }; mutations = { SET_TODO: (state, payload) =&gt; { state.todos = payload; }, ADD_TODO: (state, payload) =&gt; { state.todos.push(payload); }, }; actions = { GET_TODO: async (context, payload) =&gt; { let {data} = await Axios.get('http://yourwebsite.com/api/todo'); context.commit('SET_TODO', data); }, SAVE_TODO: async (context, payload) =&gt; { let {data} = await Axios.post('http://yourwebsite.com/api/todo'); context.commit('ADD_TODO', payload); }, }; export default { state, getters, mutations, actions, };</code> </pre> <br><br><h2>  Resumen </h2><br><ol><li>  El estado de la aplicaci贸n se almacena como un objeto JSON grande. </li><li>  <b>Los captadores</b> se utilizan para acceder a los valores almacenados en la tienda. </li><li>  <b>Las mutaciones</b> actualizan su condici贸n.  Debe recordarse que las mutaciones son sincr贸nicas. </li><li>  Todas las operaciones asincr贸nicas deben realizarse dentro de las <b>acciones</b> .  Las acciones cambian de estado, iniciando mutaciones. </li><li>  Establezca una regla para iniciar <b>mutaciones</b> exclusivamente a trav茅s de la <b>acci贸n</b> . </li><li>  <b>Los m贸dulos</b> se pueden usar para organizar su almacenamiento en varios archivos peque帽os. </li></ol><br><p>  Vuex hace que trabajar con Vue sea mucho m谩s f谩cil y divertido.  Si es un principiante, puede haber situaciones en las que le resulte dif铆cil decidir si usar Vuex en ciertas 谩reas de su aplicaci贸n.  Sigue tu instinto.  Alcanzar谩s alta velocidad bastante r谩pido. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es421551/">https://habr.com/ru/post/es421551/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es421537/index.html">Funciones de orden superior en JS: Young Fighter Course</a></li>
<li><a href="../es421543/index.html">Clonar una tarjeta sin contacto usando una aplicaci贸n m贸vil</a></li>
<li><a href="../es421545/index.html">Revisi贸n de PocketBook 616: la billetera 2018 m谩s econ贸mica con funci贸n de retroiluminaci贸n</a></li>
<li><a href="../es421547/index.html">Aceptaci贸n del centro de datos independiente</a></li>
<li><a href="../es421549/index.html">Estamos escribiendo documentaci贸n t茅cnica: una gu铆a para el profano</a></li>
<li><a href="../es421553/index.html">Compartimos contenido tecnol贸gico: hemos reunido todos nuestros materiales en un solo sitio</a></li>
<li><a href="../es421555/index.html">Proyecto WideNES: vaya m谩s all谩 de los l铆mites de la pantalla NES</a></li>
<li><a href="../es421557/index.html">Lecci贸n abierta "Programaci贸n asincr贸nica en Java"</a></li>
<li><a href="../es421559/index.html">Arquitectura de IU de componentes en la aplicaci贸n iOS</a></li>
<li><a href="../es421563/index.html">Es posible que deba sentarse de manera diferente para deshacerse del dolor de espalda.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>