<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👰🏻 💂🏼 🛥️ Replicação em cadeia: construindo um repositório KV eficiente (parte 2/2) 🙅 🧤 👂🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuamos a considerar exemplos do uso da replicação em cadeia. Definições básicas e arquiteturas foram fornecidas na primeira parte ; eu recomendo ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Replicação em cadeia: construindo um repositório KV eficiente (parte 2/2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432020/"><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/ou/4j/jl/ou4jjlsyjknckeriwguidrfcqqs.jpeg"></div><br>  Continuamos a considerar exemplos do uso da replicação em cadeia.  Definições básicas e arquiteturas foram fornecidas na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">primeira parte</a> ; eu recomendo que você se familiarize com isso antes de ler a segunda parte. <br><a name="habracut"></a><br>  Neste artigo, estudaremos os seguintes sistemas: <br><br><ul><li>  O Hibari é um repositório distribuído e tolerante a falhas, escrito em erlang. </li><li>  HyperDex - armazenamento de valor-chave distribuído com suporte para pesquisa rápida por atributos secundários e pesquisa por intervalo. </li><li>  ChainReaction - Causal + consistência e georreplicação. </li><li>  Construindo um sistema distribuído sem usar processos adicionais de monitoramento / reconfiguração externos. </li></ul><br><h1>  5. Hibari </h1><br>  O Hibari é um repositório KV tolerante a falhas distribuído, escrito em erlang.  Utiliza replicação em cadeia (abordagem básica), ou seja,  alcança consistência estrita.  Nos testes, o Hibari mostra alto desempenho - vários milhares de atualizações por segundo são obtidas em servidores de duas unidades (solicitações de 1 KB) <br><br><h3>  5.1 Arquitetura </h3><br>  Hash consistente é usado para colocar dados.  A base do armazenamento são blocos físicos e lógicos.  O <i>bloco físico</i> é um servidor com Linux, talvez uma instância do EC2 e, em geral, a VM como um todo.  Um bloco <i>lógico</i> é uma instância de armazenamento com a qual os principais processos do cluster funcionam e cada bloco é um nó em qualquer cadeia.  No exemplo abaixo, o cluster é configurado com 2 blocos lógicos em cada bloco físico e com um comprimento de cadeia de 2. Observe que os nós da cadeia são "manchados" sobre os blocos físicos para aumentar a confiabilidade. <br><br>  O processo mestre (veja a definição na primeira parte) é chamado de <i>servidor Admin</i> . <br><br>  Os dados são armazenados em "tabelas", que são simplesmente divididas em espaços para nome, cada tabela é armazenada em pelo menos uma cadeia e cada cadeia armazena dados em apenas uma tabela. <br><br>  O cliente Hibari recebe atualizações do servidor Admin com uma lista de todas as cabeças e cauda de todas as cadeias (e todas as tabelas).  Assim, os clientes sabem imediatamente para qual nó lógico enviar a solicitação. <br><br><div style="text-align:center;"><img width="600" src="https://habrastorage.org/webt/k1/nh/yg/k1nhygstpeqkgzv5vyuwwsjoffm.png"></div><br><br><h3>  5.2 Hashing </h3><br>  Hibari usa um par <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="noError" id="MJXp-Span-2" style="display: inline-block;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ {T, K \}</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;{T,&nbsp;K&nbsp;\}</span></span><script type="math/tex" id="MathJax-Element-1"> \ {T, K \} </script>  para determinar o nome da cadeia que armazena a chave <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4">K</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.066ex" height="2.057ex" viewBox="0 -780.1 889.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/432020/&amp;usg=ALkJrhguqYN9RaHJdzfZgtSZiG-UYw3OhQ#MJMATHI-4B" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> K </script>  na mesa <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.636ex" height="2.057ex" viewBox="0 -780.1 704.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/432020/&amp;usg=ALkJrhguqYN9RaHJdzfZgtSZiG-UYw3OhQ#MJMATHI-54" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> T </script>  : chave <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-7"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8">K</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.066ex" height="2.057ex" viewBox="0 -780.1 889.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/432020/&amp;usg=ALkJrhguqYN9RaHJdzfZgtSZiG-UYw3OhQ#MJMATHI-4B" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> K </script>  mapeado para o intervalo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-9"><span class="MJXp-mo" id="MJXp-Span-10" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-11">0</span><span class="MJXp-mo" id="MJXp-Span-12" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-13">1</span><span class="MJXp-mo" id="MJXp-Span-14" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-15">1</span><span class="MJXp-mo" id="MJXp-Span-16" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-17">0</span><span class="MJXp-mo" id="MJXp-Span-18" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.303ex" height="2.66ex" viewBox="0 -832 4005.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/432020/&amp;usg=ALkJrhguqYN9RaHJdzfZgtSZiG-UYw3OhQ#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/432020/&amp;usg=ALkJrhguqYN9RaHJdzfZgtSZiG-UYw3OhQ#MJMAIN-30" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/432020/&amp;usg=ALkJrhguqYN9RaHJdzfZgtSZiG-UYw3OhQ#MJMAIN-2C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/432020/&amp;usg=ALkJrhguqYN9RaHJdzfZgtSZiG-UYw3OhQ#MJMAIN-31" x="1224" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/432020/&amp;usg=ALkJrhguqYN9RaHJdzfZgtSZiG-UYw3OhQ#MJMAIN-2C" x="1724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/432020/&amp;usg=ALkJrhguqYN9RaHJdzfZgtSZiG-UYw3OhQ#MJMAIN-31" x="2169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/432020/&amp;usg=ALkJrhguqYN9RaHJdzfZgtSZiG-UYw3OhQ#MJMAIN-2C" x="2670" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/432020/&amp;usg=ALkJrhguqYN9RaHJdzfZgtSZiG-UYw3OhQ#MJMAIN-30" x="3115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/432020/&amp;usg=ALkJrhguqYN9RaHJdzfZgtSZiG-UYw3OhQ#MJMAIN-29" x="3616" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> [0,1, 1,0) </script>  (usando MD5), dividido em seções pelas quais uma cadeia é responsável.  As seções podem ter larguras diferentes, dependendo do "peso" da corrente, por exemplo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kt/hy/hq/kthyhqgqi5bn5xthknmw4f5sjou.png"></div><br><br>  Assim, se alguns blocos físicos são muito poderosos, as cadeias localizadas nele podem receber seções mais largas (mais teclas cairão sobre eles). <br><br><h1>  6. HyperDex </h1><br>  O objetivo deste projeto era construir um armazenamento de valor-chave distribuído, que, diferentemente de outras soluções populares (BigTable, Cassandra, Dynamo), suporta uma pesquisa rápida por atributos secundários e pode executar rapidamente uma pesquisa por intervalo.  Por exemplo, nos sistemas considerados anteriormente, para procurar todos os valores em um determinado intervalo, você precisa passar por todos os servidores, o que, obviamente, é inaceitável.  O HyperDex resolve esse problema usando <i>Hyperspace Hashing</i> . <br><br><h3>  6.1 Arquitetura </h3><br>  A idéia do hash do hiperespaço é construir <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-19"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-6"> n </script>  espaço tridimensional em que cada atributo corresponde a um eixo de coordenadas.  Por exemplo, para objetos (nome, sobrenome, número de telefone), o espaço pode ser assim: <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/zf/be/hu/zfbehu3mpmbsb1bwdfpofn_xywa.png"></div><br><br>  O hiperplano cinza passa por todas as chaves, onde sobrenome = Smith, amarelo - por todas as chaves, onde nome = John.  A interseção desses planos forma uma resposta aos números de telefone da consulta de pesquisa de pessoas com o nome John e o sobrenome Smith.  Portanto, o pedido de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-21"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-7"> k </script>  atributos retorna <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-23"><span class="MJXp-mo" id="MJXp-Span-24" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">n</span><span class="MJXp-mo" id="MJXp-Span-26" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">k</span><span class="MJXp-mo" id="MJXp-Span-28" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-8"> (n-k) </script>  subespaço tridimensional. <br><br>  O espaço de pesquisa é dividido em <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-29"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9"> n </script>  regiões disjuntas tridimensionais e cada região é atribuída a um único servidor.  Um objeto com coordenadas de uma região é armazenado no servidor dessa região.  Assim, um hash é construído entre objetos e servidores. <br><br>  Uma consulta de pesquisa (por intervalo) determinará as regiões incluídas no hiperplano resultante e, portanto, reduzirá o número de servidores pesquisados ​​ao mínimo. <br><br>  Há um problema com essa abordagem: o número de servidores necessários cresce exponencialmente a partir do número de atributos, ou seja,  se atributos <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-31"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-10"> k </script>  então você precisa <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-33"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34">O</span><span class="MJXp-mo" id="MJXp-Span-35" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-36"><span class="MJXp-mn" id="MJXp-Span-37" style="margin-right: 0.05em;">2</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-38" style="vertical-align: 0.5em;">k</span></span><span class="MJXp-mo" id="MJXp-Span-39" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-11"> O (2 ^ k) </script>  servidores.  Para resolver esse problema, o HyperDex aplica uma partição do hiperespaço em subespaços (com uma dimensão inferior) com, respectivamente, um subconjunto de atributos: <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/s1/nf/tk/s1nftktukf2qd4e9ljjuzsgj_b0.png"></div><br><h3>  6.2 Replicação </h3><br>  Para garantir consistência estrita, os autores desenvolveram uma abordagem especial baseada na replicação em cadeia - <i>encadeamento dependente de valor</i> , em que cada nó subsequente é determinado por hash do atributo correspondente.  Por exemplo, a chave <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-40"><span class="MJXp-mo" id="MJXp-Span-41" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mo" id="MJXp-Span-42" style="margin-left: 0.333em; margin-right: 0.333em;">"</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">J</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46">n</span><span class="MJXp-mo" id="MJXp-Span-47" style="margin-left: 0.333em; margin-right: 0.333em;">"</span><span class="MJXp-mo" id="MJXp-Span-48" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mo" id="MJXp-Span-49" style="margin-left: 0.333em; margin-right: 0.333em;">"</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54">h</span><span class="MJXp-mo" id="MJXp-Span-55" style="margin-left: 0.333em; margin-right: 0.333em;">"</span><span class="MJXp-mo" id="MJXp-Span-56" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-12"> ("John", "Smith") </script>  primeiro ele será dividido no espaço principal (obtemos a cadeia principal, também chamada <i>líder de pontos</i> ), depois o hash de <math> </math> $ inline $ "John" $ inline $   para a coordenada no eixo correspondente e assim por diante.  (Veja a imagem abaixo para um exemplo de atualização. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-64"><span class="MJXp-msubsup" id="MJXp-Span-65"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-67" style="vertical-align: -0.4em;">1</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-14"> u_1 </script>  ) <br><br>  Todas as atualizações passam por um líder de ponto, que solicita solicitações (linearizabilidade). <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/qp/ab/z4/qpabz4f0rpxaybrtt5pzhegrrqk.png"></div><br><br>  Se a atualização levar a uma alteração na região, primeiro a nova versão será gravada imediatamente após a antiga (consulte atualização <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-68"><span class="MJXp-msubsup" id="MJXp-Span-69"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-71" style="vertical-align: -0.4em;">2</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-15"> u_2 </script>  ) e depois de receber o ACK da cauda, ​​o link para a versão antiga do servidor anterior será alterado.  Para solicitações simultâneas (por exemplo, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-72"><span class="MJXp-msubsup" id="MJXp-Span-73"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-75" style="vertical-align: -0.4em;">2</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-16"> u_2 </script>  e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-76"><span class="MJXp-msubsup" id="MJXp-Span-77"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-79" style="vertical-align: -0.4em;">3</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> u_3 </script>  ) não violou o líder do ponto de consistência que adiciona controle de versão e outras meta informações ao servidor, se recebidas <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-80"><span class="MJXp-msubsup" id="MJXp-Span-81"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-83" style="vertical-align: -0.4em;">3</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> u_3 </script>  antes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-84"><span class="MJXp-msubsup" id="MJXp-Span-85"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-87" style="vertical-align: -0.4em;">2</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> u_2 </script>  pode determinar que o pedido está quebrado e você precisa esperar <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-88"><span class="MJXp-msubsup" id="MJXp-Span-89"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90" style="margin-right: 0.05em;">u</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-91" style="vertical-align: -0.4em;">2</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> u_2 </script>  . <br><br><h1>  7. ChainReaction </h1><br>  É usado um modelo causal + convergência, que adiciona a condição de convergência livre de conflito à convergência causal (causal).  Para atender à convergência causal, os metadados são adicionados a cada solicitação, o que indica as versões de todas as chaves causalmente dependentes.  O ChainReaction permite a replicação geográfica em vários data centers e é um desenvolvimento adicional da ideia do CRAQ. <br><br><h3>  7.1 Arquitetura </h3><br>  A arquitetura do FAWN é usada com pequenas alterações - cada controlador de domínio consiste em <i>servidores</i> de <i>dados</i> - back-end (armazenamento de dados, replicação, forma um anel DHT) e <i>proxies de cliente</i> - front-end (envia uma solicitação para um nó específico).  Cada chave é replicada para R nós consecutivos, formando uma cadeia.  As solicitações de leitura são processadas pela cauda e gravadas pela cabeça. <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/xz/lv/ei/xzlveipiopeqi4enyao1b_fuehw.png"></div><br><h3>  7.2 Um data center </h3><br>  Observamos uma propriedade importante decorrente da replicação em cadeia - se o nó <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-92"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> k </script>  causal consistente com algumas operações do cliente, e todos os nós anteriores - também.  Então, se a operação <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-94"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> Op </script>  foi visto pela última vez por nós no site <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-97"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98">j</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> j </script>  , todos os dependentes causais (de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-99"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-100">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> Op </script>  ) operações de leitura só podem ser executadas em nós da cabeça ao <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-102"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">j</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> j </script>  .  Assim que <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-104"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26"> Op </script>  será executado na cauda - não haverá restrições de leitura.  Indique as operações de gravação que foram executadas por cauda no controlador de domínio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-107"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">d</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> d </script>  como <b>DC-Write-Stable (d)</b> . <br><br>  Cada cliente armazena uma lista (metadados) de todas as chaves solicitadas pelo cliente no formato (chave, versão, chainIndex), em que chainIndex é a posição do nó na cadeia que respondeu à última solicitação da chave de chave.  <b>Os metadados são armazenados apenas para chaves que o cliente não está ciente se é DC-Write-Stable (d) ou não</b> . <br><br><h4>  7.2.1 Operação de gravação </h4><br>  Observe que quando a operação se tornar DC-Write-Stable (d), nenhuma solicitação de leitura poderá ler as versões anteriores. <br><br>  Para cada solicitação de gravação, uma lista de todas as chaves nas quais as operações de leitura foram executadas antes da adição da última operação de gravação.  Assim que o proxy do cliente recebe a solicitação, ele executa leituras de bloqueio nas caudas de todas as chaves dos metadados (estamos aguardando confirmação da presença da mesma ou da versão mais recente, ou seja, atendemos à condição de consistência causal).  Assim que as confirmações são recebidas, a solicitação de gravação é enviada ao chefe da cadeia correspondente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l2/qo/k_/l2qok_yldb0_aaqjcfmzj2ap_gk.png"></div><br><br>  Depois que o novo valor for armazenado em <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-109"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> k </script>  nós da cadeia, uma notificação é enviada ao cliente (com o índice do último nó).  O cliente atualiza o chainIndex e remove os metadados das chaves enviadas, conforme  ficou conhecido sobre eles que eles eram DC-Write-Stable (d).  Paralelamente, a gravação continua ainda mais - <i>propagação lenta</i> .  Assim, é dada prioridade para escrever operações no primeiro <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-111"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> k </script>  nós.  Assim que o tail armazena a nova versão da chave, uma notificação é enviada ao cliente e transmitida a todos os nós da cadeia, para que eles marquem a chave como estável. <br><br><h4>  7.2.2 Operação de leitura </h4><br>  O proxy do cliente envia uma solicitação de leitura para <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-113"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">x</span><span class="MJXp-mo" id="MJXp-Span-119" style="margin-left: 0.111em; margin-right: 0.167em;">:=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">d</span><span class="MJXp-mo" id="MJXp-Span-124" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-125">1</span><span class="MJXp-mo" id="MJXp-Span-126" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">I</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136">x</span><span class="MJXp-mo" id="MJXp-Span-137" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> index: = rand (1, chainIndex) </script>  nó no circuito, enquanto distribui a carga.  Em resposta, o nó envia o valor e a versão desse valor.  A resposta é enviada ao cliente, enquanto: <br><br><ul><li>  Se a versão for estável, o novo chainIndex será igual ao tamanho da cadeia. </li><li>  Se a versão for mais recente, o novo chainIndex = index. </li><li>  Caso contrário, chainIndex não será alterado. </li></ul><br><h4>  7.2.3 Failover de nó </h4><br>  É quase completamente idêntico à abordagem básica, com algumas diferenças no fato de que, em alguns casos, o chainIndex no cliente se torna inválido - isso é facilmente determinado ao executar solicitações (não há chave nesta versão) e a solicitação é redirecionada ao chefe da cadeia para procurar o nó com a versão desejada. <br><br><h3>  7.3 Vários ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-138"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> N </script>  ) data centers (replicação geográfica) </h3><br>  Tomamos como base os algoritmos de uma arquitetura de servidor único e os adaptamos ao mínimo.  Para iniciantes, em metadados, em vez de apenas valores version e chainIndex, precisamos de vetores versionados de N dimensões. <br><br>  Definimos Global-Write-Stable de maneira semelhante ao DC-Write-Stable (d) - a operação de gravação é considerada Global-Write-Stable se for executada na cauda em todos os CDs. <br><br>  Um novo componente aparece em cada controlador de domínio - <i>remote_proxy</i> , sua tarefa é receber / enviar atualizações de outros controladores de domínio. <br><br><h4>  7.3.1 Executando uma operação de gravação (no servidor <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-140"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> i </script>  ) </h4><br>  O começo é semelhante a uma arquitetura de servidor único - executamos leituras de bloqueio, gravamos na primeira <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-142"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> k </script>  nós de uma corrente.  Nesse momento, o proxy do cliente envia ao cliente um novo vetor chainIndex, onde zeros estão em toda parte, exceto a posição <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-144"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-34"> i </script>  - existe um significado <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-146"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35"> k </script>  .  Próximo - como de costume.  Uma operação adicional no final - a atualização é enviada para remote_proxy, que acumula várias solicitações e envia tudo. <br><br>  Dois problemas surgem aqui: <br><br><ul><li>  Como garantir dependências entre diferentes atualizações provenientes de diferentes controladores de domínio? <br><br>  Cada remote_proxy armazena um vetor de versão local <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-148"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36"> rvp </script>  dimensões <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-152"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37"> N </script>  , que armazena o número de atualizações enviadas e recebidas e as envia em cada atualização.  Portanto, ao receber uma atualização de outro controlador de domínio, o remote_proxy verifica os contadores e, se o contador local for menor, a operação será bloqueada até que a atualização correspondente seja recebida. </li><li>  Como fornecer dependências para esta operação em outros controladores de domínio? <br><br>  Isso é obtido usando um filtro Bloom.  Ao executar operações de gravação / leitura a partir do proxy do cliente, além dos metadados, um filtro bloom também é enviado para cada chave (denominada filtros de resposta).  Esses filtros são armazenados na lista <i>AccessedObjects</i> e, ao solicitar operações de gravação / leitura, os metadados também enviam chaves OR enviadas aos filtros (chamados de filtro de dependência).  Da mesma forma, após a operação de gravação, os filtros correspondentes são excluídos.  Ao enviar uma operação de gravação para outro controlador de domínio, também são enviados um filtro de dependência e um filtro de resposta para essa solicitação. <br><br>  Além disso, o controlador de domínio remoto, depois de receber todas essas informações, verifica se, se os bits definidos do filtro de resposta coincidem com os bits definidos de vários filtros de consulta, essas operações são potencialmente dependentes ocasionais.  Potencialmente - porque um filtro de floração. </li></ul><br><h4>  7.3.2 Operação de leitura </h4><br>  Da mesma forma que uma arquitetura de servidor único, ajustada para o uso do vetor chainIndex em vez de um escalar e a possibilidade de ausência de uma chave no controlador de domínio (porque as atualizações são assíncronas) - aguarde ou redirecione a solicitação para outro controlador de domínio. <br><br><h4>  7.3.3 Resolução de conflitos </h4><br>  Graças aos metadados, as operações dependentes de causalidade são sempre executadas na ordem correta (às vezes é necessário bloquear o processo para isso).  Mas mudanças competitivas em diferentes CDs podem levar a conflitos.  Para resolver essas situações, o Last Write Wins é usado, para o qual um par está presente em cada operação de atualização <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-154"><span class="MJXp-mo" id="MJXp-Span-155" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-156">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">l</span><span class="MJXp-mrow" id="MJXp-Span-159"><span class="MJXp-mo" id="MJXp-Span-160" style="margin-left: 0em; margin-right: 0em;">ó</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">o</span><span class="MJXp-mo" id="MJXp-Span-164" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">s</span><span class="MJXp-mo" id="MJXp-Span-166" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38"> (relógio (s)</script>  onde <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-167"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">c</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39"> c </script>  - horas de procuração, e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-169"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> s </script>  - ID do DC. <br><br><h4>  7.3.4 Manipulando falhas do nó </h4><br>  Semelhante à arquitetura de servidor único. <br><br><h1>  8. Aproveitando o sharding no design de protocolos de replicação escalável </h1><br>  O objetivo do estudo é construir um sistema distribuído com shards e com replicação sem usar um processo mestre externo para reconfigurar / monitorar o cluster. <br><br>  Nas principais abordagens atuais, os autores vêem as seguintes desvantagens: <br><br>  Replicação: <br><br><ul><li>  Primário / Backup - leva a uma discrepância no estado se o Primário tiver sido identificado por falha por engano. </li><li>  Interseção de quorum - pode levar a uma discrepância de estado durante a reconfiguração de cluster. </li></ul><br>  Consistência estrita: <br><br><ul><li>  Os protocolos contam com algoritmos de votação majoritária (por exemplo, Paxos) quando necessário <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-171"><span class="MJXp-mn" id="MJXp-Span-172">2</span><span class="MJXp-mo" id="MJXp-Span-173" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">N</span><span class="MJXp-mo" id="MJXp-Span-175" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-176">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-41"> 2 * N + 1 </script>  soltar nós <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-177"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42"> N </script>  nós. </li></ul><br>  Detecção de falhas do nó: <br><br><ul><li>  P / B e CR implica a presença de detecção ideal de nós com falha com um modelo de falha-parada, o que é inatingível na prática e você deve escolher um intervalo de varredura adequado. </li><li>  O ZooKeeper está sujeito aos mesmos problemas - com um grande número de clientes, uma quantidade significativa de tempo (&gt; 1 segundo) é necessária para que eles atualizem a configuração. </li></ul><br>  A abordagem proposta pelos autores, denominada <i>replicação elástica</i> , é desprovida dessas deficiências e possui as seguintes características: <br><br><ul><li>  Consistência estrita. </li><li>  Para suportar a queda <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-179"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-43"> N </script>  nós devem ter <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-181"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">N</span><span class="MJXp-mo" id="MJXp-Span-183" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-184">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44"> N + 1 </script>  nó. </li><li>  Reconfiguração sem perda de consistência. </li><li>  Não há necessidade de protocolos de consenso com base na votação majoritária. </li></ul><br>  Placa de resumo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/al/nh/yf/alnhyf9vzquirk-ztizoplkeypa.png"></div><br><h3>  8.1 Organização de réplicas </h3><br>  Cada shard define uma sequência de configurações <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-185"><span class="MJXp-mtext" id="MJXp-Span-186">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-192">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">l</span><span class="MJXp-mrow" id="MJXp-Span-194"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">C</span></span><span class="MJXp-mo" id="MJXp-Span-196" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-197"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198" style="margin-right: 0.05em;">C</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-199" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-200" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-msubsup" id="MJXp-Span-201"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202" style="margin-right: 0.05em;">C</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-203" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-204" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-msubsup" id="MJXp-Span-205"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206" style="margin-right: 0.05em;">C</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-207" style="vertical-align: -0.4em;">3</span></span><span class="MJXp-mtext" id="MJXp-Span-208">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-45"> \ mathcal {C} = C_1 :: C_2 :: C_3 \ dots </script>  por exemplo, a nova configuração não contém algum tipo de réplica caída <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-213"><span class="MJXp-mtext" id="MJXp-Span-214">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-216">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">l</span><span class="MJXp-mrow" id="MJXp-Span-222"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">C</span></span><span class="MJXp-mo" id="MJXp-Span-224" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-225">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-229">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-231">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">l</span><span class="MJXp-mrow" id="MJXp-Span-233"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">C</span></span><span class="MJXp-mo" id="MJXp-Span-235" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mo" id="MJXp-Span-236" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-237">R</span><span class="MJXp-mrow" id="MJXp-Span-238"><span class="MJXp-mo" id="MJXp-Span-239" style="margin-left: 0em; margin-right: 0em;">é</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">s</span><span class="MJXp-mtext" id="MJXp-Span-246">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-247">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-253">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254">s</span><span class="MJXp-msubsup" id="MJXp-Span-255"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256" style="margin-right: 0.05em;">R</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-257" style="vertical-align: -0.4em;">j</span></span><span class="MJXp-mo" id="MJXp-Span-258" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-46"> \ mathcal {C} = \ mathcal {C}: :( Réplicas \ setminus R_j) </script><br><br>  Cada elemento da sequência de configuração consiste em: <br><br><ul><li>  réplicas - um conjunto de réplicas. </li><li>  <i>ordenador</i> - ID de uma réplica com uma função especial (veja abaixo). </li></ul><br>  Cada fragmento é representado por um conjunto de réplicas (por construção - <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-259"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-47"> N </script>  ), ou seja,  não dividimos os papéis de "fragmento" e "réplica". <br><br>  Cada réplica armazena os seguintes dados: <br><br><ul><li>  conf - ID da configuração à qual esta réplica pertence. </li><li>  ordenador - qual réplica é o ordenador dessa configuração. </li><li>  mode - modo de réplica, um dos três: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-261"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-263">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">N</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-266">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">N</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268">T</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">E</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-48"> PENDENTE </script>  (todas as réplicas de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-270"><span class="MJXp-msubsup" id="MJXp-Span-271"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-272" style="margin-right: 0.05em;">C</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-273" style="vertical-align: -0.4em;">1</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-49"> C_1 </script>  ), <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-274"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275">A</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276">T</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277">I</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-278">V</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">O</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-50"> ATIVO </script>  (todas as réplicas de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-280"><span class="MJXp-msubsup" id="MJXp-Span-281"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282" style="margin-right: 0.05em;">C</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-283" style="vertical-align: -0.4em;">1</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-51"> C_1 </script>  ), <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-284"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285">I</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">M</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-287">M</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">U</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-289">T</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290">A</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-291">B</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">L</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">E</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52"> IMMUTABLE </script>  . </li><li>  histórico - sequência de operações nos dados reais da réplica <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-294"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">o</span><span class="MJXp-msubsup" id="MJXp-Span-296"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297" style="margin-right: 0.05em;">p</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-298" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-299" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300">o</span><span class="MJXp-msubsup" id="MJXp-Span-301"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302" style="margin-right: 0.05em;">p</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-303" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-304" style="margin-left: 0.111em; margin-right: 0.167em;">::</span><span class="MJXp-mtext" id="MJXp-Span-305">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-306">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-309">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-53"> op_1 :: op_2 :: \ dots </script>  (ou apenas uma condição). </li><li>  estável - o comprimento máximo do prefixo do histórico que é corrigido por esta réplica.  Obviamente, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-310"><span class="MJXp-mn" id="MJXp-Span-311">0</span><span class="MJXp-mo" id="MJXp-Span-312" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-313">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">t</span><span class="MJXp-mrow" id="MJXp-Span-316"><span class="MJXp-mo" id="MJXp-Span-317" style="margin-left: 0em; margin-right: 0em;">á</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">l</span><span class="MJXp-mo" id="MJXp-Span-321" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-322">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">o</span><span class="MJXp-mo" id="MJXp-Span-333" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">t</span><span class="MJXp-mrow" id="MJXp-Span-338"><span class="MJXp-mo" id="MJXp-Span-339" style="margin-left: 0em; margin-right: 0em;">ó</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343">o</span><span class="MJXp-mo" id="MJXp-Span-344" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-54"> 0 <= estável <= comprimento (histórico) </script>  . </li></ul><br>  O objetivo principal de um ordenador de réplicas é enviar solicitações para o restante das réplicas e manter o maior prefixo do histórico: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7_/hk/lo/7_hklowfxczcx0tjd5grugrw9a8.png"></div><br><h3>  8.2 Organização de fragmentos </h3><br>  Os fragmentos são combinados em anéis chamados <i>elásticos</i> .  Cada fragmento pertence a apenas um anel.  O precursor de todo fragmento <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-345"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55"> X </script>  desempenha um papel especial - ele é um <i>sequenciador</i> para ele.  O trabalho do seqüenciador é fornecer ao sucessor uma nova configuração em caso de falhas de réplica. <br><br><div style="text-align:center;"><img width="300" src="https://habrastorage.org/webt/sc/8g/se/sc8gsegolx8iarmilhrkeftetfo.png"></div><br>  São necessárias duas condições: <br><br><ul><li>  Cada faixa elástica possui pelo menos um fragmento e uma réplica em funcionamento. </li><li>  Cada faixa elástica possui pelo menos um fragmento, no qual todas as réplicas estão funcionando. </li></ul><br>  A segunda condição parece muito rigorosa, mas é equivalente à condição “tradicional” de que o processo mestre nunca cai. <br><br><h3>  8.3 Usando replicação em cadeia </h3><br>  Como você deve ter adivinhado, as réplicas são organizadas como uma cadeia (abordagem básica) - o ordenador será o chefe, com pequenas diferenças: <br><br><ul><li>  Em caso de falha no CR, o nó é expulso da cadeia (e substituído por um novo), no ER - uma nova cadeia é criada. </li><li>  Os pedidos de leitura no CR são processados ​​por cauda, ​​no ER, eles passam por toda a cadeia da mesma maneira que os pedidos de gravação. </li></ul><br><h3>  8.5 Reconfiguração em caso de falha </h3><br><ul><li>  As réplicas são monitoradas pelas réplicas do seu fragmento e pelas réplicas de um fragmento do seqüenciador. </li><li>  Assim que uma falha é detectada, as réplicas enviam um comando sobre isso. </li><li>  O seqüenciador envia uma nova configuração (sem uma réplica com falha). </li><li>  Uma nova réplica é criada que sincroniza seu estado com a faixa elástica. </li><li>  Depois disso, o seqüenciador envia a nova configuração com a réplica adicionada. </li></ul><br><h1>  Referências </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://">Hibari</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">hyperdex.orgerdex.org</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">HyperDex: um armazenamento de valor-chave pesquisável e distribuído</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Reação em cadeia</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aproveitando o sharding no design de protocolos de replicação escalável</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt432020/">https://habr.com/ru/post/pt432020/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt432006/index.html">A história de como entrei no tópico da saúde da mulher</a></li>
<li><a href="../pt432008/index.html">Perseguindo os padrões da Web</a></li>
<li><a href="../pt432012/index.html">Como testar contratos inteligentes</a></li>
<li><a href="../pt432014/index.html">Kali Linux para iniciantes</a></li>
<li><a href="../pt432016/index.html">Como a música e o desenho me ensinaram a programar</a></li>
<li><a href="../pt432022/index.html">Forkney it: 8 Vá a projetos interessantes para cavar no código fonte</a></li>
<li><a href="../pt432024/index.html">Gradle 5.0 - novidades</a></li>
<li><a href="../pt432030/index.html">O caminho para um detector de mentiras sem contato ou Como organizar uma hackathon na velocidade máxima</a></li>
<li><a href="../pt432032/index.html">Concluímos o campo de pesquisa do Google</a></li>
<li><a href="../pt432034/index.html">O livro “Eletricidade passo a passo”, de Rudolf Svoren</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>