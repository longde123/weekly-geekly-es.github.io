<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛷️ 👨🏼‍🤝‍👨🏻 🚣🏿 Membuat kekacauan 1k intro untuk ZX-Spectrum 👶🏾 🌴 🤦🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Awalnya, saya tidak berencana untuk melakukan demo di Chaos Constrictions 2018 , tetapi 2-3 minggu sebelum cc saya menyadari bahwa Anda tidak dapat pe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membuat kekacauan 1k intro untuk ZX-Spectrum</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421837/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/7u/dh/ww/7udhwwjcbgzix5jaxzonykfmcf8.png"></div><br>  Awalnya, saya tidak berencana untuk melakukan demo di <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Chaos Constrictions 2018</a></strong> , tetapi 2-3 minggu sebelum <strong>cc saya</strong> menyadari bahwa Anda tidak dapat pergi ke pesta demo dengan tangan kosong, dan memutuskan untuk menulis demo singkat untuk <strong>386 / EGA / DOS</strong> . <br><br>  Setelah dikompilasi dalam <strong>Turbo-C di</strong> bawah <strong>DOS</strong> my <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lib AnotherGraphicsLibrary</a> , yang idealnya masuk dalam struktur beat plan dari mode <strong>EGA</strong> , saya kecewa dengan rem, terutama rem <strong>EGA</strong> .  Demo dalam bentuk di mana saya ingin melihatnya, untuk periode yang sangat terbatas ini, tidak mungkin dilakukan. <br><br>  Namun, saya tidak bisa menyerah dan tidak melakukan apa-apa.  Dan kemudian saya ingat bahwa saya sudah lama ingin mengambil bagian dalam kontes demo <strong>ZX-Spectrum</strong> .  Dan karena saya mendapatkan dua real <strong>48k</strong> di tahun lalu, saya bisa mendapatkan kesenangan dari membuat demo.  Ngomong-ngomong - bagi saya, hal yang paling penting dalam menulis demo adalah pengujian dalam kehidupan nyata, <em>pengemulsi</em> tidak memberikan kesenangan seperti itu dari proses, itu perasaan yang sangat indah ketika, setelah perubahan kode selanjutnya, Anda mengunggah demo ke kehidupan nyata, dan Anda melihat bagaimana perangkat keras yang sebenarnya mengocok byte dalam efek menggambar memori. <br><br>  Karena saya hanya memiliki <strong>48k</strong> real, saya memutuskan untuk membuat demo untuk <strong>48k</strong> .  Dan karena waktu yang terbatas dan kurangnya perkembangan, pilihan jatuh pada penciptaan <strong>int 1k</strong> (demo hanya 1 kilobyte, atau 1024 byte). <br><a name="habracut"></a><br>  Terakhir kali saya mencolek <strong>as80 z80</strong> di <strong>EmuZWin</strong> - emulator hebat dengan assembler <strong>bawaan</strong> .  Namun sayangnya <strong>EmuZWin</strong> tidak bekerja pada sesuatu yang lebih tinggi dari <strong>Windows XP</strong> , atau buggy. <br>  Setelah memeriksa berbagai pilihan, saya berhenti di sekelompok program <strong>Unreal + sjAsm + Notepad ++</strong> , yang, menurut pendapat saya, jauh <strong>lebih mudah daripada</strong> <strong>EmuZWin</strong> dalam hal kenyamanan, tetapi, sebaliknya, hidup. <br><br>  Saat menulis intro ini, saya melakukan, tepat di sumbernya, log pengembangan, berdasarkan yang mana teks berikut ini ditulis: <br><br><h5>  Halo Dunia! </h5><br>  Apa yang harus saya tulis pertama, memiliki hampir nol pengalaman dalam <strong>asm z80</strong> ?  Itu benar, output dari sprite 5x5 familiar atau 40x40 piksel, untuk salah satu efek (ironisnya, di masa depan, agar sesuai dengan 1k bagian yang belum selesai ini dibuang dari intro). <br><br>  Hebatnya, itu sangat mudah untuk melakukan ini dari awal menggunakan label alamat jalur yang dibuat sebelumnya menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Down HL</a> . <br><br>  Oh, register indeks, betapa mudahnya mereka, tetapi yang lebih lambat, mengkonsumsi bar secara harfiah.  Saya harus membuang penggunaan mereka dari banyak tempat. <br><br>  Masih di sini, di awal, saya menemukan gangguan <strong>sjAsm yang</strong> luar biasa, atau lebih tepatnya versi terbarunya.  Disrealisme di <strong>Unreal</strong> menunjukkan urutan perintah yang benar-benar gila.  Saya mengunduh versi kedua dari belakang - itu sudah mungkin untuk hidup dengannya entah bagaimana. <br><br><img src="https://habrastorage.org/webt/xh/yh/ot/xhyhotktsbfmg1iqk_gtrbmsvjy.png"><br><br>  Jelas bahwa Anda tidak dapat menempatkan jumlah yang cukup dari sprite yang ditarik sebelumnya ke dalam 1k, jadi saya memutuskan untuk membuatnya secara dinamis.  Dan tidak bagaimana pun, tetapi menggambar menggunakan poligon. <br><br>  Oleh karena itu, prosedur kedua yang saya tulis adalah prosedur menggambar segitiga.  Sebagian besar, itu adalah porting dari kode mereka sendiri yang ditulis dalam <strong>C.</strong>  Dengan satu-satunya perbedaan global dari versi <strong>C</strong> , scanlines poligon dihasilkan terlebih dahulu, dan hanya kemudian mereka ditarik pada scanlines ini. <br><br>  Setelah bahasa tingkat tinggi, Anda mendapatkan kesenangan dari <strong>jr alias goto</strong> : <br><br><pre><code class="hljs css"><span class="hljs-selector-class"><span class="hljs-selector-class">.sort_me_please</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">de</span></span>,(<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x2</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span>,(<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x0</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span>,<span class="hljs-selector-tag"><span class="hljs-selector-tag">d</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cp</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">nc</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.skip1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x2</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x0</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">de</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.skip1</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">de</span></span>,(<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x1</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span>,(<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x0</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span>,<span class="hljs-selector-tag"><span class="hljs-selector-tag">d</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cp</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">nc</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.skip2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x0</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">de</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x1</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jr</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.sort_me_please</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.skip2</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">de</span></span>,(<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x2</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span>,(<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x1</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span>,<span class="hljs-selector-tag"><span class="hljs-selector-tag">d</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cp</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">nc</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.skip3</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x2</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x1</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">de</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jr</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.sort_me_please</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.skip3</span></span>:</code> </pre> <br>  Saya sedikit terkejut dengan fakta bahwa <strong>ternyata</strong> pada waktu yang masuk akal untuk menulis <strong>draw_triangle yang</strong> berfungsi pada <strong>asm Z80</strong> , yang menggambar piksel poligon demi piksel dan tanpa lubang saat menghubungkan poligon. <br><br><img src="https://habrastorage.org/webt/tl/sv/or/tlsvorwso0wpqcrulnaewu23_84.png"><br>  <em>Halo segitiga!</em> <br><br><h5>  Partikel </h5><br><img src="https://habrastorage.org/webt/ng/kx/mq/ngkxmqez4envpqx6-tzzc0wd2ge.png"><br><br>  Karena adanya generator label garis layar, saya menulis prosedur keluaran titik agak melengkung dan lambat menggunakan label ini.  Prosedur memiliki dua titik masuk - hanya kebalikan dari piksel, dan kebalikan dari piksel dengan mengisinya dengan <strong>TINTA</strong> + <strong>CERAH</strong> + dan warna yang ditentukan dalam salah satu register. <br><br>  Pada tahap menciptakan efek dengan partikel, saya menemukan bahwa contoh dengan struktur dari contoh di <strong>wiki sjAsm</strong> tidak berfungsi.  Googling mengangkat topik dari situs <strong>zx-pk.ru</strong> , tempat masalah ini dijelaskan, dan tidak ada solusi - ha, baik - masalah lain. <br><br>  Saya memutuskan untuk melakukan semuanya dengan jelas - memperbarui koordinat terlepas dari render, dengan gangguan.  Ya ... ditambah byte untuk menghasilkan tabel interupsi. <br><br>  Ada beberapa partikel pada tahap ini, dan mereka hampir tidak masuk ke dalam bingkai - ini adalah tentang lambatnya prosedur saya untuk menghasilkan titik%)) Tapi menggunakan meja bersama dengan sprite tidak membiarkan saya membuangnya dan membawanya siap, karena  ruang yang sangat dihemat ini hanya membutuhkan satu generator tabel.  Dan cintaku untuk sepeda juga :) <br><br>  Terlalu sedikit partikel ... menambah jumlahnya, tetapi sekarang rendering telah digemukkan menjadi dua bingkai. <br><br><img src="https://habrastorage.org/webt/tb/eu/qq/tbeuqqaoeef05uf04tfe33-t7f4.jpeg"><br>  <em>Menguji <strong>Peters WS64</strong> , yang saya dapatkan di cc terakhir dan diperbaiki musim dingin ini :)</em> <br><br>  Ngomong-ngomong, sudah pada tahap ini titik berubah menjadi titik horizontal tebal <strong>2: 1</strong> , seperti pada <strong>Commodore 64</strong> .  Ini terjadi karena jumlah partikel yang awalnya kecil, dan ketidakpuasan saya dengan fakta bahwa mereka sangat tidak terlihat ketika dijalankan dalam kehidupan nyata.  Mengatasi masalah dengan mengganti pelat <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">db</span></span> <span class="hljs-number"><span class="hljs-number">128</span></span>,<span class="hljs-number"><span class="hljs-number">64</span></span>,<span class="hljs-number"><span class="hljs-number">32</span></span>,<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br>  pada <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">db</span></span> <span class="hljs-number"><span class="hljs-number">192</span></span>,<span class="hljs-number"><span class="hljs-number">192</span></span>,<span class="hljs-number"><span class="hljs-number">96</span></span>,<span class="hljs-number"><span class="hljs-number">24</span></span>,<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>;</code> </pre> <br>  yang memperburuk keakuratan penentuan posisi dan membuat penerbangan sedikit tersentak-sentak, tetapi meningkatkan visibilitas.  Di sini, ia juga memainkan ke tangan bahwa partikel-partikel jatuh dari atas ke bawah - penglihatan mereka dioleskan secara vertikal. <br><br>  Partikel-partikel secara kebetulan jatuh masing-masing dengan kecepatan acaknya sendiri, dan dua byte digunakan untuk menyimpan koordinat <strong>Y.</strong> <br><br><h5>  Sprite </h5><br>  Saya membuang bagian sprite yang belum selesai, menyadari bahwa saya tidak bisa cocok dengan itu. <br><br>  Selain itu, sudah ada kekurangan ruang, jadi saya ingat tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> hebat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Introspek</a> tentang pengemasan, saya memilih <strong>zx7</strong> sebagai pengemas, yang menghemat sekitar 110 byte.  Omong-omong, mungkin seseorang tahu pengepak yang lebih cocok untuk intro 1k? <br><br><h5>  Konstruksi kekacauan </h5><br><img src="https://habrastorage.org/webt/83/xj/h4/83xjh4wggmay449rwrmrfphx62y.png"><br><br>  Karena saya sudah memiliki prosedur untuk mengeluarkan poligon, sepertinya ide yang bagus untuk membagi logo <strong>cc</strong> menjadi poligon dan menampilkannya satu per satu. <br><br>  Saya menulis beberapa kode uji yang menampilkan beberapa poligon - semuanya berfungsi sesuai yang saya maksud - baik-baik saja. <br><br>  Untuk memeriksa apakah ide saya cocok atau tidak dalam <strong>1k</strong> , dihasilkan sejumlah poligon acak tertentu, menurut perkiraan, jumlah yang cukup untuk logo tersebut, dan membawanya ke sumber.  Dikompilasi, dan memastikan bahwa - sangat baik - intro, dalam bentuk ini, cocok dengan batas 1024 byte. <br><br><img src="https://habrastorage.org/webt/fq/8k/bc/fq8kbcfvtdbdirtysojcd0hix8m.jpeg"><br>  <em>Foto kehidupan, apakah Anda mengenali perangkat di atas meja?</em>  <em>:)))</em> <br><br>  Saya memutuskan untuk sekali lagi menguji intro setengah jadi, sudah dengan poligon, dan pengepak, diunggah ke nyata dan ... mendapat reset.  Pertama-tama, saya mulai berdosa bahwa saya lupa menginisialisasi memori di suatu tempat, dari mana, di mana semuanya bekerja dengan baik pada emulator <strong>0x00</strong> , dalam kehidupan nyata ada sampah yang menyebabkan reset. <br><br>  Tidak ada yang lebih baik untuk menemukan tempat masalah daripada metode setengah divisi dan <strong>berhenti</strong> saya tidak bisa datang dengan. <br><br>  Dibawa dengan reset secara real selama dua jam, tidak ada cara untuk melokalisasi kesalahan ... <br>  Ternyata, itu tidak ada dalam kode saya, itu termasuk <em>penambah</em> suara yang disertakan pada ponsel dari mana saya memuat WAV.  Perbaikan dari aliran sedikit dalam file <strong>WAV</strong> menghasilkan aliran delirium. <br><br>  Segera setelah saya mematikannya, semuanya bekerja secara ajaib. <br><br>  Dia menjabarkan logo dalam editor grafis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">greenpixel kesalahan</a> , memecahnya menjadi banyak segitiga, dan secara manual mengarahkan koordinat ke sumber.  Setelah mengisi logo <strong>Chaos Constructions</strong> sepenuhnya dan menjalankannya dalam kehidupan nyata - saya senang - itu terlihat cukup bagus. <br><br><img src="https://habrastorage.org/webt/vy/4m/ul/vy4mul7kzdo_o7qav3wtnvc3oki.jpeg"><br>  <em>Tampilan logo pertama di nyata</em> <br><br>  Namun, saya memasukkan poligon acak terlalu sedikit, dan pada logo asli, ada batas <strong>1k</strong> per 150 byte.  Dan ini terlepas dari kenyataan bahwa efek partikel masih belum selesai, dan transisi antara bagian-bagian itu tajam. <br><br>  Untuk pergi tidur hari itu, karena keributan dengan gangguan, ternyata sedini 8 pagi. 8) <br><br>  Dan ya, saya mencoba untuk mengoptimalkan ukuran dengan menyimpan koordinat dan indeks titik secara terpisah, tetapi pengepakan tidak terlalu menyukainya, yang membuat ukuran hanya meningkat. <br><br><h5>  Terakhir </h5><br><img src="https://habrastorage.org/webt/qv/h9/is/qvh9ist1fdq9xunbrd4uyejd3gi.png"><br><br>  Saya datang dengan cara diversifikasi output logo, untuk ini butuh hampir tidak ada tapi dua label piksel lagi: <br><br><pre> <code class="hljs">fake_points1: db 1,2,4,8,16,32,64,128; 1 ch fake_points2: db 32,8,128,2,16,1,64,4; 2 ch normal_points: db 128,64,32,16,8,4,2,1; 3 ch</code> </pre> <br>  Itu memberikan efek keren meningkatkan detail rendering logo, atau kurangnya detail awal dan peningkatan ketajaman secara bertahap. <br><br>  Dan akhirnya, saya membuat versi final dengan semua transisi, membuang banyak segalanya.  Dalam prosesnya, saya menemukan kesalahan dalam prosedur menggambar segitiga - jika dua simpul memiliki koordinat <strong>Y yang</strong> sama, maka segitiga tersebut digambar bengkok (sepertinya membaginya dengan 0 saat menghitung <strong>dx</strong> ), dilewati dengan hack sementara. <br><br><img src="https://habrastorage.org/webt/xo/a3/--/xoa3--9_kt2k-uodr2gabj8ithm.jpeg"><br>  <em>Menguji versi final di Leningrad 48</em> <br><br><h5>  Optimalisasi ukuran </h5><br><img src="https://habrastorage.org/webt/-e/ro/l8/-erol8uszgdcler4i9jhp4n-9cu.jpeg"><br>  <em>Digit ganda adalah "byte tambahan"</em> <br><br><h6>  94 byte tambahan ... </h6><br>  Waktunya telah tiba untuk menghentikan pelestarian / pemulihan “budaya” dari register prosedur input / output, jauh dari mana-mana hal itu diperlukan, tetapi ingatannya memakan. <br><br><h6>  86 byte ... </h6><br>  Diuji dalam kehidupan nyata - itu berhasil!  Dia menghabiskan sedikit lebih banyak memori, sekaligus memperbaiki bug yang dibagi 0 - 63 byte! <br><br><h6>  57 byte ... </h6><br>  Menambahkan perulangan. <br><br><pre> <code class="hljs sql">random_store: <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>:</code> </pre> <br>  Looping dengan cara ini dilakukan pada tingkat pembongkaran, sebagai  sebagai sumber entropi untuk <strong>RNG</strong> , beberapa byte dari kode inisialisasi digunakan (untuk menghemat ruang), yang dimanjakan oleh <strong>RNG</strong> pada bagian pertama.  Oleh karena itu, untuk pengulangan, setelah akhir intro, ada <strong>ret</strong> , well, dan kemudian membongkar dan beralih ke kode yang belum dibuka ... <br><br>  Itu tidak mungkin untuk menyingkirkan 48 byte terakhir, saya harus memotong penangan interrupt, tetapi Hore!  Diisi!  Bahkan 1 byte tambahan tetap. <br><br>  Dan karena tidak ada gangguan, itu dapat dinilai untuk frame, dan sulit untuk melihat penampang balok pada satu piksel pada efek pertama, jadi saya meningkatkan jumlah partikel per mata, dengan kompromi antara kecepatan dan hiburan. <br><br>  Menyengat lebih keras, dengan bodohnya memindahkan kode dan data dari satu tempat ke tempat lain, membantu pengepak.  Yang butuh waktu :) <br><br>  Ini membebaskan sekitar <strong>10 byte di</strong> mana saya terjebak parodi suara.  Khk, khe, suara - ini ada di beberapa tempat, dengan memasukkan telinga: <br><br><pre> <code class="hljs perl"> ifdef UseSound ld a,d <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-comment"><span class="hljs-comment">#10 out (#FE),a endif</span></span></code> </pre> <br>  Saya tidak "memaku" suara, tetapi membuat definisi, sehingga mendapatkan dua versi intro, dengan dan tanpa suara.  Dalam hal itu tanpa suara, dalam byte "ekstra" berdesakan <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">db</span></span> <span class="hljs-string"><span class="hljs-string">'e'</span></span>,<span class="hljs-string"><span class="hljs-string">'r'</span></span>,<span class="hljs-string"><span class="hljs-string">'r'</span></span>,<span class="hljs-string"><span class="hljs-string">'o'</span></span>,<span class="hljs-string"><span class="hljs-string">'r'</span></span></code> </pre> <br>  Saya mengumpulkan <strong>trd</strong> dan <strong>ketuk</strong> , dan mengunggah semuanya ke situs web <strong>cc</strong> . <br><br>  Hore - Saya berpartisipasi dalam demopati! <br><br><h5>  Kata penutup </h5><br>  Ternyata menjadi lucu dengan suara itu, seseorang di patlace mengatakan "suara jernih", seseorang menatapku dengan aneh, dan pada <strong>pouet</strong> aku menemukan yang berikut: <br><br><img src="https://habrastorage.org/webt/vt/p_/sw/vtp_swwrkskgpqbexsuj1nubn40.png"><br><br>  Dan ini: <br><br><img src="https://habrastorage.org/webt/og/vh/wc/ogvhwc8p907emey1wk2erb-ejtm.png"><br><br>  Secara umum, saya tidak mengerti apakah ada yang menyukai suara 10-byte atau tidak :) <br><br>  Dan yang terakhir - itu memalukan bahwa kompetisi <strong>1k</strong> tidak terjadi tahun ini, pekerjaannya ternyata layak, menurut saya, tetapi sulit untuk bersaing dengan <strong>640k</strong> , tetapi saya benar-benar ingin bersaing. <br><br>  <strong>Tulis demo, tulis 1k!</strong> <br><br>  Dan inilah yang akhirnya (ps, jaga telingamu): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/-Q3cD3dx5lY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Versi Diam: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/2fwdWSiczIE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id421837/">https://habr.com/ru/post/id421837/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id421823/index.html">Bagaimana kami membawa X-Ray x64</a></li>
<li><a href="../id421827/index.html">Apa yang harus dibaca tentang Java sekarang?</a></li>
<li><a href="../id421829/index.html">Anomali Frango - romansa fantastis dengan orang-orang nyata dari IT</a></li>
<li><a href="../id421833/index.html">Kami menulis program kami yang paling sederhana untuk ARM Cortex-M3</a></li>
<li><a href="../id421835/index.html">Komisi Antarlembaga mengembangkan teknologi baru untuk memblokir Telegram</a></li>
<li><a href="../id421839/index.html">Pemrograman Java Fungsional dengan Vavr</a></li>
<li><a href="../id421841/index.html">Robotaxi Waymo tidak cukup siap untuk mengakses jalan umum</a></li>
<li><a href="../id421845/index.html">Apa yang sebenarnya dilakukan analis data? Temuan dari 35 Wawancara</a></li>
<li><a href="../id421847/index.html">Lompat ke awan. Membangun solusi IoT anggaran di NodeMCU + Azure IoT Hub</a></li>
<li><a href="../id421849/index.html">Acara untuk SDM di bidang TI pada bulan September 2018: My Circle Digest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>