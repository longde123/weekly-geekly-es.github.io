<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸš… ğŸ™ğŸ¼ ğŸ–¼ï¸ èµ„æºæ§åˆ¶ã€‚ è‡ªå®šä¹‰SwiftGen ğŸ¹ ğŸ‘ ğŸ¤µğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¤§æ¦‚ï¼Œåœ¨æ¯ä¸ªå¤§å‹çš„iOSé¡¹ç›®ä¸­ï¼Œè¿™ä¸ªå¯¿å‘½é•¿çš„é¡¹ç›®å¯èƒ½ä¼šå¶ç„¶å‘ç°æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨è¿‡çš„å›¾æ ‡ï¼Œæˆ–è€…è®¿é—®å¾ˆé•¿æ—¶é—´ä¸å­˜åœ¨çš„æœ¬åœ°åŒ–å¯†é’¥ã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ç§æƒ…å†µæ˜¯ç”±æ³¨æ„åŠ›ä¸é›†ä¸­å¼•èµ·çš„ï¼Œè‡ªåŠ¨åŒ–æ˜¯è§£å†³æ³¨æ„åŠ›ä¸é›†ä¸­çš„æœ€ä½³æ–¹æ³•ã€‚ 


 åœ¨HeadHunterçš„iOSå›¢é˜Ÿä¸­ï¼Œæˆ‘ä»¬éå¸¸é‡è§†è‡ªåŠ¨åŒ–å¼€å‘äººå‘˜å¯èƒ½é‡åˆ°çš„ä¾‹è¡Œä»»...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>èµ„æºæ§åˆ¶ã€‚ è‡ªå®šä¹‰SwiftGen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/423381/"><p> å¤§æ¦‚ï¼Œåœ¨æ¯ä¸ªå¤§å‹çš„iOSé¡¹ç›®ä¸­ï¼Œè¿™ä¸ªå¯¿å‘½é•¿çš„é¡¹ç›®å¯èƒ½ä¼šå¶ç„¶å‘ç°æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨è¿‡çš„å›¾æ ‡ï¼Œæˆ–è€…è®¿é—®å¾ˆé•¿æ—¶é—´ä¸å­˜åœ¨çš„æœ¬åœ°åŒ–å¯†é’¥ã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ç§æƒ…å†µæ˜¯ç”±æ³¨æ„åŠ›ä¸é›†ä¸­å¼•èµ·çš„ï¼Œè‡ªåŠ¨åŒ–æ˜¯è§£å†³æ³¨æ„åŠ›ä¸é›†ä¸­çš„æœ€ä½³æ–¹æ³•ã€‚ </p><br><p> åœ¨HeadHunterçš„iOSå›¢é˜Ÿä¸­ï¼Œæˆ‘ä»¬éå¸¸é‡è§†è‡ªåŠ¨åŒ–å¼€å‘äººå‘˜å¯èƒ½é‡åˆ°çš„ä¾‹è¡Œä»»åŠ¡ã€‚ åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å¼€å§‹ä¸€ç³»åˆ—æœ‰å…³ç®€åŒ–æˆ‘ä»¬çš„æ—¥å¸¸å·¥ä½œçš„å·¥å…·å’Œæ–¹æ³•çš„æ•…äº‹ã€‚ </p><br><p> ä¸ä¹…å‰ï¼Œæˆ‘ä»¬è®¾æ³•ä½¿ç”¨SwiftGenå®ç”¨ç¨‹åºæ¥æ§åˆ¶åº”ç”¨ç¨‹åºèµ„æºã€‚ å…³äºå¦‚ä½•é…ç½®å®ƒï¼Œå¦‚ä½•ä½¿ç”¨å®ƒä»¥åŠè¯¥å®ç”¨ç¨‹åºå¦‚ä½•å¸®åŠ©å°†å¯¹èµ„æºç›¸å…³æ€§çš„æ£€æŸ¥è½¬ç§»åˆ°ç¼–è¯‘å™¨ï¼Œæˆ‘ä»¬å°†è®¨è®ºcatã€‚ </p><br><p><img src="https://habrastorage.org/webt/dl/sy/-c/dlsy-cocqhwmu02tsyr4aoukf-y.jpeg"></p><a name="habracut"></a><br><p>  SwiftGenæ˜¯ä¸€ä¸ªå®ç”¨ç¨‹åºï¼Œå¯è®©æ‚¨ç”ŸæˆSwiftä»£ç ä»¥è®¿é—®Xcodeé¡¹ç›®çš„å„ç§èµ„æºï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š </p><br><ul><li> å­—å‹ </li><li> é¢œè‰² </li><li> æ•…äº‹æ¿ï¼› </li><li> æœ¬åœ°åŒ–å­—ç¬¦ä¸²ï¼› </li><li> èµ„äº§ã€‚ </li></ul><br><p> æ¯ä¸ªäººéƒ½å¯ä»¥ç¼–å†™ç±»ä¼¼çš„ä»£ç æ¥åˆå§‹åŒ–å›¾åƒæˆ–æœ¬åœ°åŒ–å­—ç¬¦ä¸²ï¼š </p><br><pre><code class="swift hljs">logoImageView.image = <span class="hljs-type"><span class="hljs-type">UIImage</span></span>(named: <span class="hljs-string"><span class="hljs-string">"Swift"</span></span>) nameLabel.text = <span class="hljs-type"><span class="hljs-type">String</span></span>( format: <span class="hljs-type"><span class="hljs-type">NSLocalizedString</span></span>(<span class="hljs-string"><span class="hljs-string">"languages.swift.name"</span></span>, comment: <span class="hljs-string"><span class="hljs-string">""</span></span>), locale: <span class="hljs-type"><span class="hljs-type">Locale</span></span>.current )</code> </pre> <br><p> ä¸ºäº†è¡¨ç¤ºå›¾åƒæˆ–æœ¬åœ°åŒ–é”®çš„åç§°ï¼Œæˆ‘ä»¬ä½¿ç”¨å­—ç¬¦ä¸²æ–‡å­—ã€‚ åŒå¼•å·ä¹‹é—´å†™çš„å†…å®¹æœªç»ç¼–è¯‘å™¨æˆ–å¼€å‘ç¯å¢ƒï¼ˆXcodeï¼‰éªŒè¯ã€‚ å…¶ä¸­å­˜åœ¨ä»¥ä¸‹é—®é¢˜é›†ï¼š </p><br><ul><li> æ‚¨å¯ä»¥æ‰“é”™å­—ï¼› </li><li> æ‚¨å¯èƒ½ä¼šåœ¨ç¼–è¾‘æˆ–åˆ é™¤å¯†é’¥/å›¾åƒåå¿˜è®°æ›´æ–°ä»£ç ä¸­çš„ç”¨æ³•ã€‚ </li></ul><br><p> è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨SwiftGenæ”¹è¿›æ­¤ä»£ç ã€‚ </p><br><p> å¯¹äºæˆ‘ä»¬çš„å›¢é˜Ÿè€Œè¨€ï¼Œç”Ÿæˆåªä¸å­—ç¬¦ä¸²å’Œèµ„äº§ç›¸å…³ï¼Œå®ƒä»¬å°†åœ¨æœ¬æ–‡ä¸­è¿›è¡Œè®¨è®ºã€‚ å…¶ä»–ç±»å‹èµ„æºçš„ç”Ÿæˆç±»ä¼¼ï¼Œå¹¶ä¸”ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥è½»æ¾åœ°ç‹¬ç«‹æŒæ¡ã€‚ </p><br><h2 id="vnedrenie-v-proekt"> é¡¹ç›®å®æ–½ </h2><br><p> é¦–å…ˆï¼Œæ‚¨éœ€è¦å®‰è£…SwiftGenã€‚ æˆ‘ä»¬é€‰æ‹©é€šè¿‡CocoaPodså®‰è£…å®ƒï¼Œä»¥æ–¹ä¾¿åœ¨æ‰€æœ‰å›¢é˜Ÿæˆå‘˜ä¹‹é—´åˆ†å‘å®ç”¨ç¨‹åºã€‚ ä½†è¿™å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å®Œæˆï¼Œ <a href="">æ–‡æ¡£ä¸­</a>å¯¹æ­¤è¿›è¡Œäº†è¯¦ç»†ä»‹ç»ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæ‰€æœ‰è¦åšçš„å°±æ˜¯å°†<code>pod 'SwiftGen'</code>æ·»åŠ <code>pod 'SwiftGen'</code> ï¼Œç„¶åæ·»åŠ ä¸€ä¸ªæ–°çš„æ„å»ºé˜¶æ®µï¼ˆ <code>Build Phase</code> ï¼‰ï¼Œè¯¥<code>Build Phase</code>å°†åœ¨æ„å»ºé¡¹ç›®ä¹‹å‰å¯åŠ¨SwiftGenã€‚ </p><br><pre> <code class="plaintext hljs">"$PODS_ROOT"/SwiftGen/bin/swiftgen</code> </pre> <br><p> åœ¨å¼€å§‹â€œ <code>Compile Sources</code>é˜¶æ®µä¹‹å‰è¿è¡ŒSwiftGenå¾ˆé‡è¦ï¼Œä»¥é¿å…åœ¨ç¼–è¯‘é¡¹ç›®æ—¶å‡ºé”™ã€‚ </p><br><p><img src="https://habrastorage.org/webt/gx/1t/xw/gx1txw1lfcxmghilpakndv_wnck.png"></p><br><p> ç°åœ¨æˆ‘ä»¬å‡†å¤‡å°†SwiftGené€‚åº”æˆ‘ä»¬çš„é¡¹ç›®ã€‚ </p><br><h2 id="nastroyka-swiftgen"> é…ç½®SwiftGen </h2><br><p> é¦–å…ˆï¼Œæ‚¨éœ€è¦é…ç½®æ¨¡æ¿ï¼Œé€šè¿‡è¿™äº›æ¨¡æ¿å°†ç”Ÿæˆç”¨äºè®¿é—®èµ„æºçš„ä»£ç ã€‚ è¯¥å®ç”¨ç¨‹åºå·²ç»åŒ…å«äº†ä¸€ç»„ç”¨äºç”Ÿæˆä»£ç çš„æ¨¡æ¿ï¼Œå®ƒä»¬éƒ½å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github</a>ä¸ŠæŸ¥çœ‹ï¼Œå¹¶ä¸”åŸåˆ™ä¸Šå¯ä»¥ä½¿ç”¨ã€‚ æ¨¡æ¿æ˜¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Stencil</a>è¯­è¨€ç¼–å†™çš„ï¼Œå¦‚æœæ‚¨ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Sourcery</a>æˆ–ä¸<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kitura</a>ä¸€èµ·<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç©</a> ï¼Œæ‚¨å¯èƒ½ä¼šç†Ÿæ‚‰å®ƒã€‚ å¦‚æœéœ€è¦ï¼Œæ¯ä¸ªæ¨¡æ¿éƒ½å¯ä»¥é€‚åº”å…¶è‡ªå·±çš„æŒ‡å—ã€‚ <br> ä¾‹å¦‚ï¼Œé‡‡ç”¨<code>enum</code>ç”Ÿæˆçš„æ¨¡æ¿æ¥è®¿é—®æœ¬åœ°åŒ–å­—ç¬¦ä¸²ã€‚ åœ¨æˆ‘ä»¬çœ‹æ¥ï¼Œæ ‡å‡†ä¸­æœ‰å¤ªå¤šå¤šä½™çš„ä¸œè¥¿ï¼Œå¯ä»¥ç®€åŒ–ã€‚ æ‰°æµæ¿ä¸‹é¢æ˜¯ä¸€ä¸ªå¸¦æœ‰è§£é‡Šæ€§æ³¨é‡Šçš„ç®€åŒ–ç¤ºä¾‹ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">èŒƒæœ¬èŒƒä¾‹</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">{#      #} {% set accessModifier %}{% if param.publicAccess %}public{% else %}internal{% endif %}{% endset %} {#    #} {% macro parametersBlock types %}{% filter removeNewlines:"leading" %} {% for type in types %} _ p{{forloop.counter}}: {{type}}{% if not forloop.last %}, {% endif %} {% endfor %} {% endfilter %}{% endmacro %} {% macro argumentsBlock types %}{% filter removeNewlines:"leading" %} {% for type in types %} p{{forloop.counter}}{% if not forloop.last %}, {% endif %} {% endfor %} {% endfilter %}{% endmacro %} {#       enum        #} {% macro recursiveBlock table item sp %} {{sp}}{% for string in item.strings %} {{sp}}{% if not param.noComments %} {{sp}}/// {{string.translation}} {{sp}}{% endif %} {{sp}}{% if string.types %} {{sp}}{{accessModifier}} static func {{string.name|swiftIdentifier:"pretty"|lowerFirstWord|escapeReservedKeywords}}({% call parametersBlock string.types %}) -&gt; String { {{sp}} return localize("{{string.key}}", {% call argumentsBlock string.types %}) {{sp}}} {{sp}}{% else %} {{sp}}{{accessModifier}} static let {{string.name|swiftIdentifier:"pretty"|lowerFirstWord|escapeReservedKeywords}} = localize("{{string.key}}") {{sp}}{% endif %} {{sp}}{% endfor %} {{sp}}{% for child in item.children %} {{sp}}{{accessModifier}} enum {{child.name|swiftIdentifier:"pretty"|escapeReservedKeywords}} { {{sp}}{% set sp2 %}{{sp}} {% endset %} {{sp}}{% call recursiveBlock table child sp2 %} {{sp}}} {{sp}}{% endfor %} {% endmacro %} import Foundation {#   enum #} {% set enumName %}{{param.enumName|default:"L10n"}}{% endset %} {{accessModifier}} enum {{enumName}} { {% if tables.count &gt; 1 %} {% for table in tables %} {{accessModifier}} enum {{table.name|swiftIdentifier:"pretty"|escapeReservedKeywords}} { {% call recursiveBlock table.name table.levels " " %} } {% endfor %} {% else %} {% call recursiveBlock tables.first.name tables.first.levels " " %} {% endif %} } {#  enum Localization         #} extension Localization { fileprivate static func localize(_ key: String, _ args: CVarArg...) -&gt; String { return String( format: NSLocalizedString(key, comment: ""), locale: Locale.current, arguments: args ) } }</code> </pre> </div></div><br><p> å°†æ¨¡æ¿æ–‡ä»¶æœ¬èº«ä¿å­˜åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­éå¸¸æ–¹ä¾¿ï¼Œä¾‹å¦‚ï¼Œä¿å­˜åœ¨<code>SwiftGen/Templates</code>æ–‡ä»¶å¤¹ä¸­ï¼Œä»¥ä¾¿è¯¥æ¨¡æ¿å¯ä¾›é¡¹ç›®ä¸­çš„æ¯ä¸ªäººä½¿ç”¨ã€‚ <br> è¯¥å®ç”¨ç¨‹åºé€šè¿‡YAMLæ–‡ä»¶<code>swiftgen.yml</code>æ”¯æŒé…ç½®ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­æŒ‡å®šæºæ–‡ä»¶ï¼Œæ¨¡æ¿å’Œå…¶ä»–å‚æ•°çš„è·¯å¾„ã€‚ åœ¨<code>Swiftgen</code>æ–‡ä»¶å¤¹çš„é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºå®ƒï¼Œç„¶åå°†ä¸è„šæœ¬ç›¸å…³çš„å…¶ä»–æ–‡ä»¶åˆ†ç»„åˆ°åŒä¸€æ–‡ä»¶å¤¹ä¸­ã€‚ <br> å¯¹äºæˆ‘ä»¬çš„é¡¹ç›®ï¼Œæ­¤æ–‡ä»¶å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="plaintext hljs">xcassets: - paths: ../SwiftGenExample/Assets.xcassets templatePath: Templates/ImageAssets.stencil output: ../SwiftGenExample/Image.swift params: enumName: Image publicAccess: 1 noAllValues: 1 strings: - paths: ../SwiftGenExample/en.lproj/Localizable.strings templatePath: Templates/LocalizableStrings.stencil output: ../SwiftGenExample/Localization.swift params: enumName: Localization publicAccess: 1 noComments: 0</code> </pre> <br><p> å®é™…ä¸Šï¼Œæ–‡ä»¶å’Œæ¨¡æ¿çš„è·¯å¾„ä»¥åŠåœ¨å…¶ä¸­ä¼ é€’åˆ°æ¨¡æ¿ä¸Šä¸‹æ–‡çš„å…¶ä»–å‚æ•°éƒ½åœ¨æ­¤å¤„æŒ‡ç¤ºã€‚ <br> ç”±äºè¯¥æ–‡ä»¶ä¸æ˜¯é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œå› æ­¤åœ¨å¯åŠ¨Swiftgenæ—¶æˆ‘ä»¬éœ€è¦æŒ‡å®šå…¶è·¯å¾„ã€‚ æ›´æ”¹æˆ‘ä»¬çš„å¯åŠ¨è„šæœ¬ï¼š </p><br><pre> <code class="plaintext hljs">"$PODS_ROOT"/SwiftGen/bin/swiftgen config run --config SwiftGen/swiftgen.yml</code> </pre> <br><p> ç°åœ¨æˆ‘ä»¬çš„é¡¹ç›®å¯ä»¥ç»„è£…äº†ã€‚ ç»„è£…åï¼Œä¸¤ä¸ªæ–‡ä»¶<code>Localization.swift</code>å’Œ<code>Image.swift</code>åº”è¯¥æ²¿ç€<code>Image.swift</code>æŒ‡å®šçš„è·¯å¾„å‡ºç°åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ã€‚ å®ƒä»¬éœ€è¦æ·»åŠ åˆ°Xcodeé¡¹ç›®ä¸­ã€‚ åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„æ–‡ä»¶åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">å¯¹äºå­—ç¬¦ä¸²ï¼š</b> <div class="spoiler_text"><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Localization</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Languages</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectiveC</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/// General-purpose, object-oriented programming language that adds Smalltalk-style messaging to the C programming language public static let description = localize("languages.objective-c.description") /// https://en.wikipedia.org/wiki/Objective-C public static let link = localize("languages.objective-c.link") /// Objective-C public static let name = localize("languages.objective-c.name") } public enum Swift { /// General-purpose, multi-paradigm, compiled programming language developed by Apple Inc. for iOS, macOS, watchOS, tvOS, and Linux public static let description = localize("languages.swift.description") /// https://en.wikipedia.org/wiki/Swift_(programming_language) public static let link = localize("languages.swift.link") /// Swift public static let name = localize("languages.swift.name") } } public enum MainScreen { /// Language public static let title = localize("main-screen.title") public enum Button { /// View in Wikipedia public static let title = localize("main-screen.button.title") } } } extension Localization { fileprivate static func localize(_ key: String, _ args: CVarArg...) -&gt; String { return String( format: NSLocalizedString(key, comment: ""), locale: Locale.current, arguments: args ) } }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">å¯¹äºå›¾åƒï¼š</b> <div class="spoiler_text"><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Image</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logos</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> objectiveC: <span class="hljs-type"><span class="hljs-type">UIImage</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> image(named: <span class="hljs-string"><span class="hljs-string">"ObjectiveC"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> swift: <span class="hljs-type"><span class="hljs-type">UIImage</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> image(named: <span class="hljs-string"><span class="hljs-string">"Swift"</span></span>) } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(named name: String)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">UIImage</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> bundle = <span class="hljs-type"><span class="hljs-type">Bundle</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: <span class="hljs-type"><span class="hljs-type">BundleToken</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> image = <span class="hljs-type"><span class="hljs-type">UIImage</span></span>(named: name, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: bundle, compatibleWith: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">fatalError</span></span>(<span class="hljs-string"><span class="hljs-string">"Unable to load image named \(name)."</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> image } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BundleToken</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> </div></div><br><p> ç°åœ¨ï¼Œæ‚¨å¯ä»¥å°†ç”Ÿæˆçš„å›¾åƒæ›¿æ¢ä¸º<code>UIImage(named: "")</code>å½¢å¼çš„å›¾åƒçš„æœ¬åœ°åŒ–å’Œåˆå§‹åŒ–å­—ç¬¦ä¸²<code>UIImage(named: "")</code>æ‰€æœ‰ç”¨æ³•ã€‚ è¿™å°†ä½¿æˆ‘ä»¬æ›´å®¹æ˜“è·Ÿè¸ªå¯¹æ›´æ”¹æˆ–åˆ é™¤æœ¬åœ°åŒ–å­—ç¬¦ä¸²é”®çš„æ›´æ”¹ã€‚ åœ¨ä¸Šè¿°ä»»ä½•ä¸€ç§æƒ…å†µä¸‹ï¼Œåªæœ‰åœ¨ä¿®å¤äº†ä¸æ›´æ”¹ç›¸å…³çš„æ‰€æœ‰é”™è¯¯ä¹‹åï¼Œé¡¹ç›®æ‰å¯ä»¥ç»„è£…ã€‚ <br> æ›´æ”¹ä¹‹åï¼Œæˆ‘ä»¬çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="swift hljs"> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> logos = <span class="hljs-type"><span class="hljs-type">Image</span></span>.<span class="hljs-type"><span class="hljs-type">Logos</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> localization = <span class="hljs-type"><span class="hljs-type">Localization</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupWithLanguage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> language: ProgrammingLanguage)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> language { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .<span class="hljs-type"><span class="hljs-type">Swift</span></span>: logoImageView.image = logos.swift nameLabel.text = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">Swift</span></span>.name descriptionLabel.text = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">Swift</span></span>.description wikiUrl = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">Swift</span></span>.link.toURL() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .<span class="hljs-type"><span class="hljs-type">ObjectiveC</span></span>: logoImageView.image = logos.objectiveC nameLabel.text = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">ObjectiveC</span></span>.name descriptionLabel.text = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">ObjectiveC</span></span>.description wikiUrl = localization.<span class="hljs-type"><span class="hljs-type">Languages</span></span>.<span class="hljs-type"><span class="hljs-type">ObjectiveC</span></span>.link.toURL() } }</code> </pre> <br><h2 id="nastroyka-proekta-v-xcode"> åœ¨Xcodeä¸­è®¾ç½®é¡¹ç›® </h2><br><p> ç”Ÿæˆçš„æ–‡ä»¶å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå®ƒä»¬å¯èƒ½ä¼šè¢«é”™è¯¯åœ°æ‰‹åŠ¨æ›´æ”¹ï¼Œå¹¶ä¸”ç”±äºæ¯æ¬¡ç¼–è¯‘éƒ½ä¼šä»å¤´å¼€å§‹è¦†ç›–å®ƒä»¬ï¼Œæ‰€ä»¥è¿™äº›æ›´æ”¹å¯èƒ½ä¼šä¸¢å¤±ã€‚ ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œæ‚¨å¯ä»¥åœ¨<code>SwiftGen</code>è„šæœ¬åé”å®šæ–‡ä»¶ä»¥è¿›è¡Œå†™å…¥ã€‚ <br> è¿™å¯ä»¥ä½¿ç”¨<code>chmod</code>æ¥å®ç°ã€‚ æˆ‘ä»¬é€šè¿‡å¯åŠ¨SwiftGené‡å†™äº†<code>Build Phase</code> ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><pre> <code class="plaintext hljs">PODSROOT="$1" OUTPUT_FILES=() COUNTER=0 while [ $COUNTER -lt ${SCRIPT_OUTPUT_FILE_COUNT} ]; do tmp="SCRIPT_OUTPUT_FILE_$COUNTER" OUTPUT_FILES+=(${!tmp}) COUNTER=$[$COUNTER+1] done for file in "${OUTPUT_FILES[@]}" do if [ -f $file ] then chmod a=rw "$file" fi done $PODSROOT/SwiftGen/bin/swiftgen config run --config SwiftGen/swiftgen.yml for file in "${OUTPUT_FILES[@]}" do chmod a=r "$file" done</code> </pre> <br><p> è¯¥è„šæœ¬éå¸¸ç®€å•ã€‚ åœ¨å¼€å§‹ç”Ÿæˆä¹‹å‰ï¼Œå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œæˆ‘ä»¬å°†æˆäºˆå®ƒä»¬å†™å…¥æƒé™ã€‚ è¿è¡Œè„šæœ¬åï¼Œæˆ‘ä»¬é˜»æ­¢äº†ä¿®æ”¹æ–‡ä»¶çš„åŠŸèƒ½ã€‚ <br> ä¸ºäº†ä¾¿äºç¼–è¾‘å’Œæ£€æŸ¥è„šæœ¬ä»¥è¿›è¡Œæ£€æŸ¥ï¼Œå°†å…¶æ”¾ç½®åœ¨å•ç‹¬çš„<code>runswiftgen.sh</code>æ–‡ä»¶ä¸­éå¸¸æ–¹ä¾¿ã€‚ å¯ä»¥åœ¨<a href="">æ­¤å¤„</a>æ‰¾åˆ°ç»è¿‡å°‘é‡ä¿®æ”¹çš„è„šæœ¬çš„æœ€ç»ˆç‰ˆæœ¬ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬çš„<code>Build Phase</code>å°†å¦‚ä¸‹æ‰€ç¤ºï¼šæˆ‘ä»¬å°†Podsæ–‡ä»¶å¤¹çš„è·¯å¾„ä¼ é€’åˆ°è„šæœ¬è¾“å…¥ï¼š </p><br><pre> <code class="plaintext hljs">"$SRCROOT"/SwiftGen/runswiftgen.sh "$PODS_ROOT"</code> </pre> <br><p> æˆ‘ä»¬é‡å»ºé¡¹ç›®ï¼Œç°åœ¨å½“æ‚¨å°è¯•æ‰‹åŠ¨ä¿®æ”¹ç”Ÿæˆçš„æ–‡ä»¶æ—¶ï¼Œå°†å‡ºç°è­¦å‘Šï¼š </p><br><p><img src="https://habrastorage.org/webt/-n/ly/km/-nlykmdjarer-97mhderydx5psq.png"></p><br><p> å› æ­¤ï¼Œå¸¦æœ‰Swiftgençš„æ–‡ä»¶å¤¹ç°åœ¨åŒ…å«ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¸€ä¸ªç”¨äºé”å®šæ–‡ä»¶å¹¶å¯åŠ¨<code>Swiftgen</code>çš„è„šæœ¬ä»¥åŠä¸€ä¸ªå¸¦æœ‰è‡ªå®šä¹‰æ¨¡æ¿çš„æ–‡ä»¶å¤¹ã€‚ å¦‚æœ‰å¿…è¦ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å°†å…¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ä»¥è¿›è¡Œè¿›ä¸€æ­¥ç¼–è¾‘ã€‚ </p><br><p><img src="https://habrastorage.org/webt/yw/dk/kq/ywdkkqfdjws_a32syu94hscr4cm.png"></p><br><p> è€Œä¸”ç”±äº<code>Localization.swift</code>å’Œ<code>Image.swift</code>è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå› æ­¤æ‚¨å¯ä»¥å°†å®ƒä»¬æ·»åŠ åˆ°.gitignoreï¼Œè¿™æ ·æ‚¨å°±ä¸å¿…åœ¨<code>git merge</code>å†æ¬¡<code>git merge</code>åè§£å†³å†²çªã€‚ </p><br><p> å¦‚æœæ‚¨çš„é¡¹ç›®ä½¿ç”¨Xcode New Build Systemï¼ˆå®ƒæ˜¯Xcode 10çš„é»˜è®¤æ„å»ºç³»ç»Ÿï¼‰ï¼Œæˆ‘è¿˜è¦æè¯·æ³¨æ„éœ€è¦ä¸ºSwiftGené˜¶æ®µæ„å»ºæŒ‡å®šè¾“å…¥/è¾“å‡ºæ–‡ä»¶ã€‚ åœ¨â€œè¾“å…¥æ–‡ä»¶â€åˆ—è¡¨ä¸­ï¼Œå¿…é¡»æŒ‡å®šç”Ÿæˆä»£ç æ‰€ä¾æ®çš„æ‰€æœ‰æ–‡ä»¶ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™æ˜¯è„šæœ¬æœ¬èº«ï¼Œé…ç½®ï¼Œæ¨¡æ¿ï¼Œ.stringså’Œ.xcassetsæ–‡ä»¶ï¼š </p><br><pre> <code class="plaintext hljs">$(SRCROOT)/SwiftGen/runswiftgen.sh $(SRCROOT)/SwiftGen/swiftgen.yml $(SRCROOT)/SwiftGen/Templates/ImageAssets.stencil $(SRCROOT)/SwiftGen/Templates/LocalizableStrings.stencil $(SRCROOT)/SwiftGenExample/en.lproj/Localizable.strings $(SRCROOT)/SwiftGenExample/Assets.xcassets</code> </pre> <br><p> åœ¨è¾“å‡ºæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æ”¾ç½®SwiftGenç”Ÿæˆä»£ç çš„æ–‡ä»¶ï¼š </p><br><pre> <code class="plaintext hljs">$(SRCROOT)/SwiftGenExample/Image.swift $(SRCROOT)/SwiftGenExample/Localization.swift</code> </pre> <br><p> è¿™äº›æ–‡ä»¶çš„æŒ‡ç¤ºæ˜¯å¿…éœ€çš„ï¼Œä»¥ä¾¿æ„å»ºç³»ç»Ÿå¯ä»¥æ ¹æ®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æ›´æ”¹ä»¥åŠåœ¨ç¨‹åºé›†çš„ä»€ä¹ˆæ—¶å€™åº”æ‰§è¡Œæ­¤è„šæœ¬æ¥å†³å®šæ˜¯å¦è¿è¡Œè„šæœ¬ã€‚ </p><br><h2 id="itogi"> æ€»ç»“ </h2><br><p> åœ¨å¤„ç†é¡¹ç›®èµ„æºæ—¶ï¼ŒSwiftGenæ˜¯é˜²æ­¢æˆ‘ä»¬ç²—å¿ƒå¤§æ„çš„å¥½å·¥å…·ã€‚ æœ‰äº†å®ƒï¼Œæˆ‘ä»¬èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆä»£ç ä»¥è®¿é—®åº”ç”¨ç¨‹åºèµ„æºï¼Œå¹¶æŠŠæ£€æŸ¥èµ„æºä¸ç¼–è¯‘å™¨çš„ç›¸å…³æ€§çš„éƒ¨åˆ†å·¥ä½œè½¬ç§»åˆ°ç¼–è¯‘å™¨ä¸Šï¼Œè¿™æ„å‘³ç€å¯ä»¥ç®€åŒ–æˆ‘ä»¬çš„å·¥ä½œã€‚ å¦å¤–ï¼Œæˆ‘ä»¬è®¾ç½®äº†Xcodeé¡¹ç›®ï¼Œä»¥ä¾¿è¿›ä¸€æ­¥æ–¹ä¾¿ä½¿ç”¨è¯¥å·¥å…·ã€‚ </p><br><p>  <strong>ä¼˜ç‚¹ï¼š</strong> </p><br><ol><li> æ›´å®¹æ˜“æ§åˆ¶é¡¹ç›®èµ„æºã€‚ </li><li> å‡å°‘é”™å­—é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨è‡ªåŠ¨æ›¿æ¢ã€‚ </li><li> åœ¨ç¼–è¯‘é˜¶æ®µæ£€æŸ¥é”™è¯¯ã€‚ </li></ol><br><p>  <strong>ç¼ºç‚¹ï¼š</strong> </p><br><ol><li> ä¸æ”¯æŒLocalizable.stringsdictã€‚ </li><li> ä¸è€ƒè™‘æœªä½¿ç”¨çš„èµ„æºã€‚ </li></ol><br><p> å®Œæ•´çš„ä¾‹å­å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github</a>ä¸Šçœ‹åˆ° </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN423381/">https://habr.com/ru/post/zh-CN423381/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN423371/index.html">æ²ƒå°”æ²ƒæ¨å‡ºæ— é©¾é©¶å®¤è‡ªåŠ¨é©¾é©¶ç”µåŠ¨å¡è½¦</a></li>
<li><a href="../zh-CN423373/index.html">æ²¡æœ‰ç¥ç»ç½‘ç»œå°±æ²¡æœ‰è‡´å‘½ç¼ºé™·çš„äººå·¥æ¨ç†</a></li>
<li><a href="../zh-CN423375/index.html">éŸ©å›½ç§‘å­¦å®¶æ‰¾åˆ°äº†ä¸€ç§é¿å…å› ç­‰ç¦»å­ä½“ä¸ç¨³å®šè€ŒæŸåæ‰˜å¡é©¬å…‹å£çš„æ–¹æ³•</a></li>
<li><a href="../zh-CN423377/index.html">PgModelerç¨‹åºé›†</a></li>
<li><a href="../zh-CN423379/index.html">ä¸ºä»€ä¹ˆå®Œå…¨æ”¾å¼ƒç°é‡‘å¯¹äºå‘å±•ä¸­å›½å®¶æ¥è¯´å¯èƒ½è¿‡äºæ˜‚è´µ</a></li>
<li><a href="../zh-CN423383/index.html">Ajax Asp .net MVCçš„Ajax jsä¿®æ”¹</a></li>
<li><a href="../zh-CN423385/index.html">è¯¾ç¨‹â€œç¼–ç¨‹åŸºç¡€â€</a></li>
<li><a href="../zh-CN423391/index.html">CLRiumï¼ƒ4ï¼š.Netç¤¾åŒºä¼šè®®</a></li>
<li><a href="../zh-CN423393/index.html">åŸºäºè§„åˆ™çš„ç¥ç»ç½‘ç»œ</a></li>
<li><a href="../zh-CN423395/index.html">ç‰¹æ–¯æ‹‰åˆ›ç”µåŠ¨è½¦å­£åº¦äº§é‡çºªå½•</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>