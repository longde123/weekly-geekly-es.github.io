<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🈶 💪🏻 🕵🏻 从Linux设备上的USB摄像机捕获视频 ✅ 🤚 👨🏼‍💻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="背景
 前段时间，我很想从著名的“坦克大战”中“改进”一辆坦克，增加了像我是坦克手一样的比赛能力。阅读了有关哈布雷的几篇文章后，这个想法就出现了（例如，在这里：geektimes.ru/post/257528），在其中我发现了如何使用小型WiFi路由器和USB摄像头来完成此操作。解决方案看起来非常简...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>从Linux设备上的USB摄像机捕获视频</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/386273/"><img align="right" src="https://habrastorage.org/files/f81/32d/2ee/f8132d2ee0764013bb32bbff421a3101.png"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">背景</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前段时间，我很想从著名的“坦克大战”中“改进”一辆坦克，增加了像我是坦克手一样的比赛能力。</font><font style="vertical-align: inherit;">阅读了有关哈布雷的几篇文章后，这个想法就出现了（例如，在这里：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geektimes.ru/post/257528</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），在其中我发现了如何使用小型WiFi路由器和USB摄像头来完成此操作。</font><font style="vertical-align: inherit;">解决方案看起来非常简单：路由器使用特殊固件进行刷新，将摄像机连接到其上，储罐由本地遥控器控制，并且可以在浏览器中查看视频。</font><font style="vertical-align: inherit;">快速组装好原型后，我发现视频的录制质量令人作呕。</font><font style="vertical-align: inherit;">它是320x440x30或640x480x30。</font><font style="vertical-align: inherit;">开启1280x720模式时，充其量是一部带有伪像的撕裂视频，最糟糕的是根本没有。</font><font style="vertical-align: inherit;">1920x1080模式原则上不起作用。</font><font style="vertical-align: inherit;">这让我非常不高兴，因为在PC上，相机支持高达1920x1080x30的模式，并且具有硬件MJPG压缩。</font><font style="vertical-align: inherit;">我的直觉表明，实现还远远不够完美。</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目标</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有FullHD（1920X1080）或HD（1280x720）分辨率和正常帧速率的视频（以便可以播放）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我计划将玩具送给孩子，所以我需要自动启动并支持连接/断开相机的连接。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
总的来说，我想要这样的东西：</font></font><br>
<br>
<img src="https://habrastorage.org/files/212/379/0c3/2123790c344446809b44da1162c1254a.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">局限性</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我不会寻找一个始终适用于任何地方的解决方案。</font><font style="vertical-align: inherit;">以下限制非常适合我：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">好的wifi信号。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接数量有限，只有一个客户端时优先考虑。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相机支持MJPG模式。</font></font></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">硬件和软件</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logitech B910高清摄像机（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.logitech.com/zh-cn/product/b910-hd-webcam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">路由器TP-LINK TL-MR3020。</font><font style="vertical-align: inherit;">这个孩子有以下硬件：CPU MIPS 24K 400MHz，RAM 32 MiB，Flash 4 MiB，以太网100 Mbit，USB 2.0（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://wiki.openwrt.org/en/toh/tp-link/tl-mr3020</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></li>
<li>  .    OR-WRT (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://roboforum.ru/wiki/OR-WRT</a>),    OpenWRT (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://openwrt.org/</a>,  12.07  15.05).</li>
<li>.     ,     .</li>
<li> “ ”.</li>
</ol><br>
<h4> </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，这是一个非常弱的配置，尤其是当您回想起YUV420格式的1920X1080大小的帧占用4 MiB（每像素2个字节）时。</font><font style="vertical-align: inherit;">我被鼓励使用该相机支持硬件MJPG压缩。</font><font style="vertical-align: inherit;">实验表明，压缩的FullHD帧通常小于500 KiB。</font><font style="vertical-align: inherit;">所以我决定继续研究。</font><font style="vertical-align: inherit;">事实证明，要捕获视频并通过HTTP进行流传输，使用了mjpg-streamer（http://sourceforge.net/projects/mjpg-streamer/）。</font><font style="vertical-align: inherit;">对他的代码的分析表明，他使用1个流来捕获视频+为每个客户端使用一个单独的流。</font><font style="vertical-align: inherit;">这不是单核系统的最佳解决方案，因为它需要线程同步和每个线程的堆栈内存。</font><font style="vertical-align: inherit;">他还复制了捕获的帧。</font><font style="vertical-align: inherit;">通常，mjpg-streamer成为嫌疑犯＃1。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有趣的发现</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
研究mjpg-streamer时，我发现Linux上的视频捕获是使用v4l2库完成的，并且使用缓冲区队列来捕获它。</font><font style="vertical-align: inherit;">在调试mjpg-streamer中的这些缓冲区的初始化时，我发现即使对于MJPG模式，它们的大小也非常大，并且意外地与未压缩帧的大小一致。</font><font style="vertical-align: inherit;">因此，我开始怀疑我是否必须进入负责支持摄像机的UVC驱动程序代码。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">驱动程序代码分析和首次成功</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过研究代码，我得出的结论是，缓冲区的大小由相机询问，而我的相机返回了未压缩帧的大小。</font><font style="vertical-align: inherit;">从相机开发人员的角度来看，这可能是最安全的解决方案。</font><font style="vertical-align: inherit;">但这也不是最佳的。</font><font style="vertical-align: inherit;">我决定针对我的情况，可以使用实验性最小压缩率来调整所需的缓冲区大小。</font><font style="vertical-align: inherit;">我选择k = 5 </font><font style="vertical-align: inherit;">有了这个值，我的利润约为20％。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个小题外话。</font></font></b><div class="spoiler_text">   ,      JPG.          .       ,        .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UVC驱动程序代码已准备就绪，可以添加各种“特殊”解决方案，并且我很容易找到了调整缓冲区大小的地方（函数uvc_fixup_video_ctrl（））。</font><font style="vertical-align: inherit;">此外，驱动程序支持一组怪癖，可让您支持与UVC标准有各种偏差的相机。</font><font style="vertical-align: inherit;">通常，驱动程序的开发人员已尽力支持动物园的相机。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过添加缓冲区大小校正，我在1280x720模式甚至1920x1080模式下都可以稳定运行。</font><font style="vertical-align: inherit;">万岁！</font><font style="vertical-align: inherit;">问题解决了一半！</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">寻找新的冒险</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我对最初的成功感到有些满意，我记得mjpg-streamer远非完美。</font><font style="vertical-align: inherit;">当然，您可以做一些简单的事情，不像mjpg-streamer那样通用，但是更适合我的情况。</font><font style="vertical-align: inherit;">因此，我决定制作uvc2http。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在mjpg-streamer中，我不喜欢使用多个流和复制缓冲区。这就决定了解决方案的体系结构：1个流，没有副本。使用非阻塞IO，这非常简单：完成捕获帧并将其发送到客户端，而无需复制。有一个小问题：当我们从缓冲区发送数据时，我们无法将缓冲区返回到队列。并且当缓冲区不在队列中时，驱动程序无法将新帧放入队列中。但是，如果队列大小&gt; 1，则有可能。缓冲区的数量确定可以保证服务的最大连接数。也就是说，如果我想保证支持1个客户端，那么3个缓冲区就足够了（驱动程序写入一个缓冲区，数据从第二个缓冲区发送，第三个缓冲区有库存，以避免在尝试获取新帧时与驱动程序争夺缓冲区）。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uvc2http</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uvc2http由两个组件组成：UvcGrabber和HttpStreamer。</font><font style="vertical-align: inherit;">第一个负责从队列接收缓冲区（帧），并将其返回到队列。</font><font style="vertical-align: inherit;">第二个负责通过HTTP为客户端提供服务。</font><font style="vertical-align: inherit;">还有一些链接这些组件的代码。</font><font style="vertical-align: inherit;">可以在源代码中找到详细信息。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意外的问题</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一切都很棒：该应用程序正常工作，并且以1280x720的分辨率产生了20+帧/秒的速度。我对代码进行了外观上的更改。在另一批更改之后，我测量了帧速率。结果令人沮丧-少于15帧。我急忙寻找导致退化的原因。我可能花了2个小时，在此期间，每次测量的频率都会降低到7帧/秒的值。关于路由器由于长时间工作而导致的性能下降，我想到了不同的想法。这是难以理解的。在某个时候，我关闭了流传输，看到只有一个捕获（没有流传输）给出了相同的7帧。我什至开始怀疑相机有问题。一般来说，有些废话。当时是晚上，相机打开了窗户，露出灰色的东西。为了改变阴暗的图像，我打开了房间内的相机。瞧！帧速率提高到15，我了解了一切。相机会自动调整曝光时间，并且在某个时候变得比给定频率下的帧持续时间更长。在这两个小时内，发生了以下事情：首先，天色渐渐黑了（是晚上），然后我把照相机照进了光亮的房间。将相机对准枝形吊灯，我得到了20+帧/秒的速度。万岁。</font></font><br>
<br>
<h4>    </h4><br>
<ol>
<li>  .              1-1.5 . </li>
<li>    .  ,    ,    qv4l2,          .   :        -   .                .</li>
<li>.    USB       , (     )     (   ).    USB  (  ).</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">路由器的内存和磁盘空间很少。</font><font style="vertical-align: inherit;">因此，我拒绝了OR-WRT并编译了我的OpenWRT映像，从中删除了所有多余的内容。</font></font></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下是比较mjpg-streamer和uvc2http的结果的图板。</font><font style="vertical-align: inherit;">简而言之，内存消耗显着增加，而帧速率和CPU利用率则获得小幅增长。</font></font><br>
<table>
<tbody><tr>
<td></td>
<td colspan="6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1280x720</font></font></td>
<td colspan="6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1920x1080</font></font></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VSZ，KB，1个客户端</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VSZ，KB，2个客户端</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU，％，1个客户端</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU，％，2个客户端</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPS，f / s，1个客户端</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPS，f / s，2个客户端</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VSZ，KB，1个客户端</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VSZ，KB，2个客户端</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU，％，1个客户端</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU，％，2个客户端</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPS，f / s，1个客户端</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPS，f / s，2个客户端</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mjpg流媒体</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16860</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19040</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17.6</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">十五</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25456</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25812</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">五十</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.8</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uvc2http</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3960</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3960</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.6</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7576</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7576</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.2</font></font></td>
</tr>
</tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然还有我和孩子们一起制作的视频：</font></font><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://www.youtube.com/embed/xNq4Pp_O1vo%3Ffeature%3Doembed&amp;usg=ALkJrhhphicX2LtCazMTXFhAeN8ExYk13A" frameborder="0" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
产生的坦克的照片（结果像是一辆吉普赛车）：</font></font><br>
<br>
<img src="https://habrastorage.org/files/2f8/490/1f7/2f84901f7655469cb5a8f1cdbe91335e.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
资料在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://github.com/Legich55555/uvc2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要在PC Linux上使用，只需要编译即可（前提是您不想修补UVC驱动程序）。</font><font style="vertical-align: inherit;">该实用程序以标准方式使用CMake构建。</font><font style="vertical-align: inherit;">如果需要在OpenWRT中使用它，则需要采取其他步骤：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将OpenWrt-15.05目录的内容复制到OpenWRT存储库的根目录。</font><font style="vertical-align: inherit;">这些文件仅适用于OpenWRT 15.05。</font><font style="vertical-align: inherit;">他们描述了OpenWRT的新软件包和UVC驱动程序的补丁。</font></font></li>
<li>        ,     quirk UVC_QUIRK_COMPRESSION_RATE      uvc_driver.c.         UVC.   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">wiki.openwrt.org/doc/devel/patches</a>.         uvc_ids.         :<br>
<br>
<pre><code class="hljs cs"><span class="hljs-comment">/* Logitech B910 HD Webcam */</span><font></font>
	{ .match_flags		= USB_DEVICE_ID_MATCH_DEVICE<font></font>
				| USB_DEVICE_ID_MATCH_INT_INFO,<font></font>
	  .idVendor		= <span class="hljs-number">0x046d</span>,<font></font>
	  .idProduct		= <span class="hljs-number">0x0823</span>,<font></font>
	  .bInterfaceClass	= USB_CLASS_VIDEO,<font></font>
	  .bInterfaceSubClass	= <span class="hljs-number">1</span>,<font></font>
	  .bInterfaceProtocol	= <span class="hljs-number">0</span>,<font></font>
	  .driver_info		= UVC_QUIRK_RESTORE_CTRLS_ON_INIT<font></font>
				| UVC_QUIRK_COMPRESSION_RATE }, <span class="hljs-comment">// Enable buffer correction for compressed modes</span>
</code></pre><br>
</li>
<li>  OpenWRT   (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://wiki.openwrt.org/doc/howto/build</a>).      uvc2http   Multimedia. </li>
<li>  uvc2http    (     )    .     ,      .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在设备上安装软件包/更新系统</font></font></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一步是什么</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该解决方案包括两部分：一个驱动程序补丁和另一个流算法。</font><font style="vertical-align: inherit;">驱动程序补丁可能包含在新版本的Linux内核中，但这是一个有争议的决定，因为它基于最小压缩率的假设。</font><font style="vertical-align: inherit;">在我看来，该实用程序非常适合在较弱的系统（玩具，家庭视频监视系统）上使用，并且可以通过添加通过参数指定摄像机设置的功能来对其稍作改进。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于在CPU负载和通道宽度上有余量（我很容易从连接十个客户端的路由器上收到50+ MBit），因此可以改进流算法。</font><font style="vertical-align: inherit;">您还可以添加声音支持。</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN386273/">https://habr.com/ru/post/zh-CN386273/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN386259/index.html">我们自动节水</a></li>
<li><a href="../zh-CN386261/index.html">罗伯特·汉伯里·布朗和理查德·特维斯的奇妙冒险。第2部分：在南十字勋章之下</a></li>
<li><a href="../zh-CN386263/index.html">媒体公司正试图通过研究受众的神经和生物学反应来选择广告。</a></li>
<li><a href="../zh-CN386265/index.html">魔兽世界电影预告片</a></li>
<li><a href="../zh-CN386271/index.html">审查针对Intel Edison的Xadow可穿戴套件，并基于该套件创建一个奇怪的游戏</a></li>
<li><a href="../zh-CN386275/index.html">“组装一架大型直升机，却一无所知？” -是废话</a></li>
<li><a href="../zh-CN386279/index.html">未来的可穿戴设备如何在1992年出现？游览1992和2003年的小玩意世界</a></li>
<li><a href="../zh-CN386281/index.html">为不寻常的扫描仪筹集资金，即使是书籍也可以快速应对</a></li>
<li><a href="../zh-CN386283/index.html">5个原创品牌通过游戏宣传自己的案例</a></li>
<li><a href="../zh-CN386285/index.html">介绍LXBOX 3 Mini PC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>