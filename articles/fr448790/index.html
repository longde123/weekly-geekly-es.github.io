<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∑ üïë ü§∑üèª SpaceVIL - Framework GUI multiplateforme pour le d√©veloppement sur .Net Core, .Net Standard et JVM ü¶è üëäüèº üëÇüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, je vais essayer de parler du framework SpaceVIL (Space of Visual Items Layout), qui est utilis√© pour cr√©er des interfaces graphiques...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SpaceVIL - Framework GUI multiplateforme pour le d√©veloppement sur .Net Core, .Net Standard et JVM</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448790/"><p>  Dans cet article, je vais essayer de parler du framework SpaceVIL (Space of Visual Items Layout), qui est utilis√© pour cr√©er des interfaces graphiques utilisateur sur les plates-formes .Net / .Net Core et JVM. </p><br><p>  SpaceVIL est un framework multiplateforme et multilingue, il est bas√© sur la technologie graphique OpenGL, et la biblioth√®que GLFW est responsable de la cr√©ation de fen√™tres.  √Ä l'aide de ce cadre, vous pouvez travailler et cr√©er des applications client graphiques dans les syst√®mes d'exploitation Linux, Mac OS X et Windows.  Pour les programmeurs C #, cela est particuli√®rement vrai pour le moment, √©tant donn√© que Microsoft ne portera pas WPF sur d'autres syst√®mes d'exploitation et Avalonia est le seul analogue possible.  Une caract√©ristique de SpaceVIL dans ce cas particulier est le multilinguisme, c'est-√†-dire que le framework pour .Net Core peut √™tre utilis√© en conjonction avec les langages de programmation suivants: C #, VisualBasic.  Le framework JVM peut √™tre utilis√© conjointement avec les langages Java et Scala.  Autrement dit, SpaceVIL peut √™tre utilis√© avec n'importe laquelle de ces langues et le code r√©sultant sera identique, donc lorsque vous basculez vers une autre langue, vous n'aurez pas √† le r√©apprendre. </p><br><p>  SpaceVIL est encore au stade alpha, mais malgr√© cela, le framework peut √™tre pleinement utilis√© en ce moment, car le framework a tout ce dont vous avez besoin pour construire √† la fois une interface utilisateur complexe et cr√©er des √©l√©ments utilisateur visuels compl√®tement nouveaux.  Le but de cet article est pr√©cis√©ment de vous en convaincre. </p><a name="habracut"></a><br><p>  SpaceVIL a √©t√© d√©velopp√© √† partir de z√©ro et c'est pourquoi le cadre a ses propres principes qui le distinguent des analogues. </p><br><ul><li>  L'utilisateur de SpaceVIL a un contr√¥le total sur ce qui se passe. </li><li>  Toute application √©crite dans SpaceVIL sera exactement la m√™me sur toutes les plateformes.  Il n'y a pas d'emb√ªches.  Vous pouvez utiliser n'importe quelle version de SpaceVIL (.Net / JVM, Mac OS X, Linux, Windows), le r√©sultat et l'apparence seront toujours les m√™mes. </li><li>  La version SpaceVIL pour JVM est identique dans l'utilisation de la version SpaceVIL pour .Net </li><li>  SpaceVIL offre des possibilit√©s de personnalisation approfondie d'un √©l√©ment, car tous les objets interactifs sont des conteneurs pour d'autres objets interactifs. </li><li>  Le cadre est tr√®s flexible et facile √† utiliser, car il contient peu de r√®gles strictes de base, et la seule chose que vous devez comprendre avant de commencer √† travailler est ce que signifient les param√®tres de remplissage, de marge, d'alignement (et toute personne qui a cr√©√© des interfaces simples les conna√Æt , dans WPF, Android Studio ou √©crit des styles en CSS). </li><li>  SpaceVIL ne vous demandera pas de faire une √©tude approfondie de son int√©rieur et il fera exactement ce que vous √©crivez.  Tous les √©l√©ments ob√©issent aux r√®gles g√©n√©rales, une approche fonctionnera sur tous les √©l√©ments.  Apr√®s avoir rappel√© la base, il sera possible de pr√©dire √† la fois la composition des √©l√©ments et les fa√ßons de la styliser. </li><li>  Le cadre est tr√®s l√©ger, moins d'un m√©gaoctet et tout en un seul fichier. </li></ul><br><h2 id="vozmozhnosti">  Les possibilit√©s </h2><br><p>  Voyons maintenant de quoi le framework de la version actuelle est capable. </p><br><ul><li>  54 √©l√©ments sont disponibles, dont 10 conteneurs sp√©cialis√©s, 6 primitives (√©l√©ments non interactifs) et 38 √©l√©ments interactifs √† des fins diverses. </li><li>  Sur la base de tous ces √©l√©ments, coupl√© √† la mise en ≈ìuvre d'interfaces sp√©ciales, vous pouvez cr√©er vos propres √©l√©ments de toute complexit√©. </li><li>  Il y a un style d'√©l√©ments, il y a des options pour cr√©er des th√®mes de style entiers ou changer / remplacer le style de n'importe quel √©l√©ment standard dans le cadre.  Jusqu'√† pr√©sent, un seul th√®me est pr√©sent dans SpaceVIL et il est install√© par d√©faut. </li><li>  Il y a un syst√®me d'√©tats.  Chaque √©l√©ment peut se voir attribuer un √©tat visuel pour l'une des m√©thodes d'influence externe: survoler l'√©l√©ment, appuyer sur le bouton de la souris, rel√¢cher le bouton de la souris, basculer, mettre au point et √©teindre l'√©l√©ment. </li><li>  Il existe un filtrage des √©v√©nements.  Chaque √©l√©ment de l'interaction peut filtrer les √©v√©nements qui le traversent, ce qui permet √† un √©v√©nement de passer √† travers l'√©l√©ment et d'√™tre rejet√© par l'autre.  Dans un exemple, je vais en parler plus en d√©tail. </li><li>  Impl√©mentation d'un syst√®me d'√©l√©ments ind√©pendants flottants. </li><li>  Un syst√®me de bo√Ætes de dialogue et d'√©l√©ments de dialogue a √©t√© mis en place. </li><li>  Rendu ind√©pendant impl√©ment√©.  Chaque fen√™tre a deux threads - l'un contr√¥le le rendu, l'autre ex√©cute des t√¢ches √† partir des √©v√©nements entrants, c'est-√†-dire que la fen√™tre continue d√©sormais toujours le rendu (et ne se "bloque"), quelle que soit la t√¢che qui a √©t√© lanc√©e apr√®s avoir appuy√© sur un bouton. </li></ul><br><h2 id="struktura">  La structure </h2><br><p>  Voyons maintenant la structure des √©l√©ments.  Les types d'√©l√©ments suivants sont pr√©sents dans le cadre: fen√™tres, actives et dialogues, conteneurs, pour un positionnement pratique des √©l√©ments, √©l√©ments interactifs et primitives.  Passons bri√®vement en revue tout ce qui pr√©c√®de.  J'esp√®re qu'il n'est pas n√©cessaire d'expliquer de telles fen√™tres, je note seulement que la bo√Æte de dialogue bloque la fen√™tre qui l'a provoqu√©e jusqu'√† sa fermeture. </p><br><h4 id="konteynery">  Conteneurs </h4><br><p>  Les types de conteneurs suivants sont pr√©sent√©s dans SpaceVIL: </p><br><ul><li>  Un conteneur commun (les √©l√©ments √† l'int√©rieur d'un tel conteneur sont positionn√©s en raison de param√®tres d'alignement, de remplissage, de marge, de taille et de taille). </li><li>  Piles verticales et horizontales (les √©l√©ments ajout√©s √† un tel conteneur seront dispos√©s dans l'ordre sans avoir √† affiner les param√®tres qui sont n√©cessaires lors de l'utilisation du type de conteneur pr√©c√©dent). </li><li>  Grille - Les √©l√©ments sont ajout√©s aux cellules de la grille et positionn√©s √† l'int√©rieur de leur cellule. </li><li>  List (ListBox, TreeView), un conteneur bas√© sur une pile verticale, mais avec la possibilit√© de faire d√©filer pour afficher les √©l√©ments qui ne rentrent pas dans le conteneur. </li><li>  S√©parateur (SplitArea), un conteneur peut √™tre de deux types - vertical et horizontal, s√©pare deux zones et contr√¥le interactivement la taille de ces zones. </li><li>  Conteneur √† onglets (TabView), contr√¥le la visibilit√© des pages. </li><li>  WrapGrid, positionne les √©l√©ments √† l'int√©rieur des cellules d'une certaine taille, remplit tout l'espace libre en fonction de l'orientation avec possibilit√© de d√©filement (l'exemple le plus frappant est l'Explorateur Windows en mode d'affichage des ic√¥nes). </li><li>  Et enfin, un conteneur gratuit, probablement le conteneur le plus rare de ceux-ci, est une zone infinie sur laquelle vous pouvez ajouter des √©l√©ments de taille fixe, mais il est pr√©f√©rable de l'utiliser en combinaison avec un √©l√©ment de type ResizableItem. </li></ul><br><h4 id="interaktivnye-elementy">  √âl√©ments interactifs </h4><br><p>  Les √©l√©ments de ce type acceptent de nombreux √©tats et ont divers √©v√©nements.  Si c'est plus simple, tout ce avec quoi vous pouvez interagir et il y a des √©l√©ments interactifs, par exemple: un bouton, une case √† cocher, un √©l√©ment pour saisir du texte, etc. </p><br><h4 id="primitivy">  Primitifs </h4><br><p>  Contrairement aux √©l√©ments interactifs, il existe des primitifs, des √©l√©ments totalement non interactifs, il est impossible de les contacter, ils existent simplement pour se montrer.  Types de primitives: un triangle, un rectangle, une ellipse et un peu plus compliqu√© - une figure arbitraire qui peut prendre la forme de n'importe quelle complexit√©. </p><br><p>  Il existe √©galement des classes de service statiques.  Certaines de ces classes permettent au programmeur d'obtenir et de personnaliser des √©l√©ments √† leur guise.  Par exemple, il existe une classe contr√¥lant les styles d'√©l√©ments et une classe avec laquelle vous pouvez d√©finir une forme d'affichage arbitraire pour un √©l√©ment interactif, une classe de param√®tres par d√©faut, etc. </p><br><h2 id="primer-prostogo-prilozheniya-s-ispolzovaniem-freymvorka-spacevil">  Un exemple d'application simple utilisant le framework SpaceVIL </h2><br><p>  J'ai un peu de fantaisie sur les exemples.  Vous pouvez toujours trouver un exemple fonctionnel abstrait et refl√©tant avec pr√©cision, mais si vous le lisez de c√¥t√©, il semble toujours tr√®s peu convaincant, donc √† titre d'exemple, j'essaie de cr√©er des applications petites mais pr√™tes √† l'emploi qui servent une sorte de but intelligible. </p><br><p>  Passons √† la description de l'application.  Le programme est un √©diteur de cartes de h√©ros pour des jeux comme "Dungeons and Dragons" et porte le nom de CharacterEditor.  Le programme g√©n√®re al√©atoirement un nombre sp√©cifi√© de caract√®res diff√©rents avec des noms, √¢ge, race, sexe, classe et caract√©ristiques.  L'utilisateur a la possibilit√© d'√©crire une biographie et de donner au personnage des comp√©tences sp√©cialis√©es.  En cons√©quence, vous pouvez enregistrer la carte h√©ros en tant que fichier texte.  Passons √† l'analyse de code.  Le programme est √©crit en C #.  Lorsque vous utilisez Java, le code sera essentiellement le m√™me. </p><br><p>  En cons√©quence, nous obtenons une telle application: </p><br><p><img src="https://habrastorage.org/webt/sc/hj/tc/schjtchdgjoprbwxcsls0b-x2_m.png"></p><br><h4 id="sozdanie-okna-prilozheniya">  Cr√©er une fen√™tre d'application </h4><br><p>  √Ä ce stade, nous allons cr√©er une fen√™tre.  Permettez-moi de vous rappeler que SpaceVIL utilise GLFW, donc si vous √©crivez une application pour la plate-forme .Net, la biblioth√®que GLFW compil√©e doit √™tre copi√©e √† c√¥t√© du fichier ex√©cutable.  La machine virtuelle Java utilise le wrapper de biblioth√®que GLFW (LWJGL), qui a d√©j√† un GLFW compil√© dans sa composition. </p><br><p>  Ensuite, remplissez la zone de rendu avec les √©l√©ments n√©cessaires et donnez-leur une belle apparence.  Les principales √©tapes pour y parvenir sont les suivantes: </p><br><ul><li>  Initialisation de SpaceVIL avant de l'utiliser.  Dans la fonction Main, √©crivez simplement: </li></ul><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!SpaceVIL.Common.CommonService.InitSpaceVILComponents()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;</code> </pre> <br><ul><li>  Cr√©ez maintenant une fen√™tre.  Pour ce faire, vous devez √©crire une classe window, en l'h√©ritant de la classe <code>SpaceVIL.ActiveWindow</code> , d√©crire la m√©thode <code>InitWindow()</code> et la d√©finir avec plusieurs param√®tres de base, tels que le nom de la fen√™tre, le texte de la barre de titre et les dimensions.  En cons√©quence, nous obtenons un code qui ressemble √† ceci: </li></ul><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> SpaceVIL; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">CharacterEditor</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainWindow</span></span> : <span class="hljs-title"><span class="hljs-title">ActiveWindow</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitWindow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { SetParameters(<span class="hljs-string"><span class="hljs-string">"CharacterEditor"</span></span>, <span class="hljs-string"><span class="hljs-string">"CharacterEditor"</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">600</span></span>); } } }</code> </pre> <br><ul><li>  Il ne reste plus qu'√† cr√©er une instance de cette classe et √† l'appeler.  Pour ce faire, nous compl√©tons la m√©thode Main avec les lignes de code suivantes: </li></ul><br><pre> <code class="cs hljs">MainWindow mw = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainWindow(); mw.Show();</code> </pre> <br><p>  C'est tout, √† ce stade, vous pouvez d√©marrer l'application et v√©rifier si tout fonctionne. </p><br><h4 id="napolnenie-elementami">  Remplissage d'√©l√©ments </h4><br><p>  Pour impl√©menter CharacterEditor, j'ai d√©cid√© de mettre une barre de titre, une barre d'outils et un s√©parateur vertical sur la fen√™tre.  La barre d'outils contiendra: un bouton pour rafra√Æchir la liste des nouveaux caract√®res g√©n√©r√©s, un bouton pour sauvegarder le caract√®re et un √©l√©ment avec le nombre de caract√®res g√©n√©r√©s.  Sur le c√¥t√© gauche du s√©parateur vertical se trouve une liste de caract√®res g√©n√©r√©s, et sur la droite se trouve une zone de texte pour √©diter un caract√®re s√©lectionn√© dans la liste.  Afin de ne pas encombrer la classe de fen√™tre avec les param√®tres des √©l√©ments, vous pouvez √©crire une classe statique qui nous fournira des √©l√©ments pr√™ts en apparence et en param√®tres.  Lors de l'ajout, il est important de se rappeler que chaque √©l√©ment interactif, qu'il s'agisse d'un bouton ou d'une liste, est un conteneur, c'est-√†-dire que vous pouvez mettre n'importe quoi d'un bouton √† n'importe quoi, des primitives √† un autre conteneur, et tout √©l√©ment complexe n'est qu'un ensemble d'√©l√©ments plus simples qui, au total, servent un seul objectif.  Sachant cela, vous devez vous rappeler la premi√®re r√®gle stricte - avant d'ajouter d'autres √©l√©ments √† un √©l√©ment, vous devez l'ajouter vous-m√™me quelque part, soit √† la classe window elle-m√™me (dans notre cas, c'est <code>MainWindow</code> ), soit √† un conteneur ou tout autre √©l√©ment interactif.  Expliquons avec un exemple: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitWindow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { SetParameters(<span class="hljs-string"><span class="hljs-string">"CharacterEditor"</span></span>, <span class="hljs-string"><span class="hljs-string">"CharacterEditor"</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">600</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   Frame frame = new Frame(); // ,      frame ButtonCore btn = new ButtonCore("Button"); //    , //      . // frame     , //,   . frame.AddItem(btn); //  frame    AddItem(frame); }</span></span></code> </pre> <br><p>  Il est juste d'ajouter d'abord un <code>frame</code> √† la fen√™tre, puis d'ajouter un bouton au <code>frame</code> .  Il peut sembler que la r√®gle est tr√®s g√™nante et vous devrez transpirer lors de la cr√©ation d'une fen√™tre complexe, c'est pourquoi SpaceVIL vous encourage √† cr√©er vos propres √©l√©ments, ce qui simplifie consid√©rablement l'ajout d'√©l√©ments.  Je montrerai et expliquerai la cr√©ation de mes propres √©l√©ments un peu plus tard.  Revenons √† l'application.  Voici la fen√™tre r√©sultante: </p><br><p><img src="https://habrastorage.org/webt/df/lg/kg/dflgkgv6s9jnbaqzsif3zdtkm9k.png"></p><br><p>  Analysons maintenant le code: </p><br><div class="spoiler">  <b class="spoiler_title">Code r√©capitulatif du balisage MainWindow</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> ListBox ItemList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ListBox(); <span class="hljs-comment"><span class="hljs-comment">//     internal TextArea ItemText = new TextArea(); //     internal ButtonCore BtnGenerate; //   internal ButtonCore BtnSave; //    internal SpinItem NumberCount; //    public override void InitWindow() { SetParameters("CharacterEditor", "CharacterEditor", 1000, 600); IsBorderHidden = true; //      IsCentered = true; //       //  TitleBar title = new TitleBar(nameof(CharacterEditor)); //     title.SetIcon( DefaultsService.GetDefaultImage(EmbeddedImage.User, EmbeddedImageSize.Size32x32), 20, 20); // ,       VerticalStack layout = ItemFactory.GetStandardLayout(title.GetHeight()); //  HorizontalStack toolbar = ItemFactory.GetToolbar(); //  VerticalSplitArea splitArea = ItemFactory.GetSplitArea(); //  BtnGenerate = ItemFactory.GetToolbarButton(); //  BtnSave = ItemFactory.GetToolbarButton(); //    NumberCount = ItemFactory.GetSpinItem(); //    ItemText.SetStyle(StyleFactory.GetTextAreaStyle()); //     AddItems(title, layout); layout.AddItems(toolbar, splitArea); toolbar.AddItems(BtnGenerate, BtnSave, ItemFactory.GetVerticalDivider(), NumberCount); splitArea.AssignLeftItem(ItemList); splitArea.AssignRightItem(ItemText); //    BtnGenerate.AddItem(ItemFactory.GetToolbarIcon( DefaultsService.GetDefaultImage(EmbeddedImage.Refresh, EmbeddedImageSize.Size32x32))); BtnSave.AddItem(ItemFactory.GetToolbarIcon( DefaultsService.GetDefaultImage(EmbeddedImage.Diskette, EmbeddedImageSize.Size32x32))); }</span></span></code> </pre> </div></div><br><p>  Dans la classe <code>ItemFactory</code> j'ai d√©crit l'apparence et la disposition des √©l√©ments.  Par exemple, la m√©thode <code>ItemFactory.GetToolbarButton()</code> ressemble √† ceci: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ButtonCore </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetToolbarButton</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ButtonCore btn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ButtonCore(); <span class="hljs-comment"><span class="hljs-comment">//     btn.SetBackground(55, 55, 55); // btn.SetHeightPolicy(SizePolicy.Expand); //       btn.SetWidth(30); //  btn.SetPadding(5, 5, 5, 5); //       // ,           btn.AddItemState(ItemStateType.Hovered, new ItemState(Color.FromArgb(30, 255, 255, 255))); //  ItemState   return btn; }</span></span></code> </pre> <br><p>  Les autres √©l√©ments sont d√©crits de la m√™me mani√®re. </p><br><h4 id="sozdanie-i-primenenie-stiley">  Cr√©ation et application de styles </h4><br><p>  Comme vous l'avez peut-√™tre remarqu√©, j'ai appliqu√© un style √† l'√©l√©ment <code>ItemText</code> .  Voyons donc comment cr√©er des styles et, tout d'abord, jetons un ≈ìil au code de style: </p><br><pre> <code class="cs hljs">Style style = Style.GetTextAreaStyle(); <span class="hljs-comment"><span class="hljs-comment">//       style.Background = Color.Transparent; //   Style textedit = style.GetInnerStyle("textedit"); //     textedit.Foreground = Color.LightGray; //   Style cursor = textedit.GetInnerStyle("cursor"); //     cursor.Background = Color.FromArgb(0, 162, 232);//  </span></span></code> </pre> <br><p>  Comme vous pouvez le voir, j'ai pris un style pr√™t √† l' <code>SpaceVIL.Style</code> classe <code>SpaceVIL.Style</code> pour cet √©l√©ment et l' <code>SpaceVIL.Style</code> l√©g√®rement chang√©, en corrigeant les couleurs.  Chaque style peut contenir plusieurs styles internes pour styliser chaque √©l√©ment complexe constituant.  Par exemple, un √©l√©ment <code>CheckBox</code> compose d'un conteneur, d'un indicateur et d'un texte, de sorte que son style poss√®de des styles internes pour l'indicateur ("indicateur") et le texte ("ligne de texte"). </p><br><p>  La classe <code>Style</code> couvre toutes les propri√©t√©s visuelles des √©l√©ments et en plus de cela, en utilisant le style, vous pouvez changer de mani√®re interactive la forme d'un √©l√©ment, par exemple, d'une ellipse √† un rectangle et vice versa.  Pour appliquer un style, vous devez appeler la m√©thode <code>SetStyle(Style style)</code> sur l'√©l√©ment, comme d√©j√† indiqu√© ci-dessus: </p><br><pre> <code class="cs hljs">ItemText.SetStyle(StyleFactory.GetTextAreaStyle());</code> </pre> <br><h4 id="sozdanie-sobstvennogo-elementa">  Cr√©ez votre propre article </h4><br><p>  Passons maintenant √† la cr√©ation de l'√©l√©ment.  L'√©l√©ment lui-m√™me ne doit pas n√©cessairement √™tre quelque chose de sp√©cifique, il peut s'agir d'une pile r√©guli√®re dans laquelle vous ajoutez plusieurs autres √©l√©ments.  Par exemple, dans l'exemple ci-dessus, j'ai une barre d'outils dans laquelle il y a trois √©l√©ments.  La barre d'outils elle-m√™me n'est qu'une pile horizontale.  Tout pourrait √™tre organis√© comme un √©l√©ment distinct et appel√© ToolBar.  En soi, cela ne fait rien, mais dans la classe <code>MainWindow</code> le nombre de lignes serait r√©duit et la compr√©hension du balisage serait encore plus facile, de plus, c'est aussi un moyen d'affaiblir la premi√®re r√®gle stricte, bien que, bien s√ªr, au final, tout lui ob√©isse.  D'accord, nous ne touchons plus la barre d'outils.  Nous avons besoin d'un √©l√©ment pour la liste qui affichera le caract√®re g√©n√©r√©. </p><br><p>  Pour le rendre plus int√©ressant, nous d√©finissons la composition de l'√©l√©ment plus compliqu√©: </p><br><ul><li>  Une ic√¥ne de personnage dont la couleur indique l'appartenance √† une race fantastique. </li><li>  Nom, pr√©nom et race du personnage sous forme de texte. </li><li>  Bouton d'aide rapide du personnage (n√©cessaire pour d√©montrer les √©v√©nements de filtrage). </li><li>  Bouton pour supprimer le personnage, s'il ne nous convient pas. </li></ul><br><p>  Pour cr√©er une classe de votre propre √©l√©ment, vous devez l'h√©riter de tout √©l√©ment interactif de SpaceVIL, si au moins une classe dans sa composition nous convient, mais pour l'exemple actuel, nous assemblerons l'√©l√©ment √† partir de z√©ro, donc nous l'h√©riterons de la classe abstraite de base des √©l√©ments interactifs - <code>SpaceVIL.Prototype</code> .  Nous devons √©galement impl√©menter la m√©thode <code>InitElements()</code> , dans laquelle nous d√©crivons l'apparence de l'√©l√©ment, l'emplacement et le type des √©l√©ments imbriqu√©s, ainsi que l'ordre d'ajout des √©l√©ments imbriqu√©s.  L'√©l√©ment lui-m√™me sera appel√© <code>CharacterCard</code> . </p><br><p>  Passons √† l'analyse du code de l'√©l√©ment fini: </p><br><div class="spoiler">  <b class="spoiler_title">Code d'article de la carte de caract√®res</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Drawing; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> SpaceVIL; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> SpaceVIL.Core; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> SpaceVIL.Decorations; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> SpaceVIL.Common; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">CharacterEditor</span></span> { <span class="hljs-comment"><span class="hljs-comment">//   SpaceVIL.Prototype internal class CharacterCard : Prototype { private Label _name; private CharacterInfo _characterInfo = null; //      CharacterInfo, //       internal CharacterCard(CharacterInfo info) { //      //        SetSizePolicy(SizePolicy.Expand, SizePolicy.Fixed); SetHeight(30); //   SetBackground(60, 60, 60); //  SetPadding(10, 0, 5, 0); //    SetMargin(2, 1, 2, 1); //   AddItemState(ItemStateType.Hovered, new ItemState(Color.FromArgb(30, 255, 255, 255))); _characterInfo = info; //      //      Label _name = new Label(info.Name + " the " + info.Race); } public override void InitElements() { //  ImageItem _race = new ImageItem(DefaultsService.GetDefaultImage( EmbeddedImage.User, EmbeddedImageSize.Size32x32), false); _race.KeepAspectRatio(true); //   // ImageItem   _race.SetWidthPolicy(SizePolicy.Fixed); _race.SetWidth(20); // ImageItem // ImageItem       _race.SetAlignment(ItemAlignment.Left, ItemAlignment.VCenter); //  ()     switch (_characterInfo.Race) { case CharacterRace.Human: //   _race.SetColorOverlay(Color.FromArgb(0, 162, 232)); break; case CharacterRace.Elf: //   _race.SetColorOverlay(Color.FromArgb(35, 201, 109)); break; case CharacterRace.Dwarf: //   _race.SetColorOverlay(Color.FromArgb(255, 127, 39)); break; } // Label _name _name.SetMargin(30, 0, 30, 0); //    //    ButtonCore infoBtn = new ButtonCore("?"); infoBtn.SetBackground(Color.FromArgb(255, 40, 40, 40)); infoBtn.SetWidth(20); infoBtn.SetSizePolicy(SizePolicy.Fixed, SizePolicy.Expand); infoBtn.SetFontStyle(FontStyle.Bold); infoBtn.SetForeground(210, 210, 210); infoBtn.SetAlignment(ItemAlignment.VCenter, ItemAlignment.Right); infoBtn.SetMargin(0, 0, 20, 0); infoBtn.AddItemState(ItemStateType.Hovered, new ItemState(Color.FromArgb(0, 140, 210))); //   // info        infoBtn.SetPassEvents(false); //   //     info //  hover    infoBtn.EventMouseHover += (sender, args) =&gt; { SetMouseHover(true); }; //     info   //      infoBtn.EventMouseClick += (sender, args) =&gt; { //  ImageItem ImageItem race = new ImageItem(DefaultsService.GetDefaultImage( EmbeddedImage.User, EmbeddedImageSize.Size32x32), false); race.SetSizePolicy(SizePolicy.Fixed, SizePolicy.Fixed); race.SetSize(32, 32); race.SetAlignment(ItemAlignment.Left, ItemAlignment.Top); race.SetColorOverlay(_race.GetColorOverlay()); //  PopUpMessage popUpInfo = new PopUpMessage( _characterInfo.Name + "\n" + "Age: " + _characterInfo.Age + "\n" + "Sex: " + _characterInfo.Sex + "\n" + "Race: " + _characterInfo.Race + "\n" + "Class: " + _characterInfo.Class); //    3  popUpInfo.SetTimeOut(3000); popUpInfo.SetHeight(200); //   //  ,    //    popUpInfo.Show(GetHandler()); //      popUpInfo.AddItem(race); }; //   ButtonCore removeBtn = new ButtonCore(); removeBtn.SetBackground(Color.FromArgb(255, 40, 40, 40)); removeBtn.SetSizePolicy(SizePolicy.Fixed, SizePolicy.Fixed); removeBtn.SetSize(10, 10); removeBtn.SetAlignment(ItemAlignment.VCenter, ItemAlignment.Right); removeBtn.SetCustomFigure(new CustomFigure(false, GraphicsMathService.GetCross(10, 10, 2, 45))); removeBtn.AddItemState(ItemStateType.Hovered, new ItemState(Color.FromArgb(200, 95, 97))); //       removeBtn removeBtn.EventMouseClick += (sender, args) =&gt; { RemoveSelf(); //  }; //      CharacterCard AddItems(_race, _name, infoBtn, removeBtn); } internal void RemoveSelf() { //         GetParent().RemoveItem(this); } public override String ToString() { return _characterInfo.ToString(); } } }</span></span></code> </pre> </div></div><br><p>  Dans l'exemple, j'ai utilis√© une classe auxiliaire, qui contient toutes les caract√©ristiques de base du personnage telles que le nom, le pr√©nom, la race, le sexe, l'√¢ge, la classe de sp√©cialisation, les caract√©ristiques, les capacit√©s et la biographie.  Dans cette classe, tous les param√®tres, √† l'exception des comp√©tences et de la biographie (il est suppos√© que l'utilisateur les inventera ind√©pendamment), sont g√©n√©r√©s. </p><br><h4 id="obrabotka-sobytiy-i-ih-filtraciya">  Traitement et filtrage des √©v√©nements </h4><br><p>  Dans l'exemple pr√©c√©dent, deux types d'√©v√©nements ont √©t√© d√©crits: MouseHover et MouseClick.  Il n'y a que 11 √©v√©nements de base pour le moment, voici la liste: </p><br><ul><li>  EventMouseHover </li><li>  EventMouseLeave </li><li>  EventMouseClick </li><li>  EventMouseDoubleClick </li><li>  EventMousePress </li><li>  EventMouseDrag </li><li>  EventScrollUp </li><li>  EventScrollDown </li><li>  EventKeyPress </li><li>  EventKeyRelease </li><li>  EventTextInput </li></ul><br><p>  Les √©l√©ments complexes ont leurs propres √©v√©nements uniques, mais les √©v√©nements ci-dessus sont disponibles (sur r√©servation) pour tout le monde. </p><br><p>  La syntaxe de la gestion des √©v√©nements est triviale et ressemble √† ceci: </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// C# item.EventMouseClick += (sender, args) =&gt; { // - };</span></span></code> </pre> <br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Java item.eventMouseClick.add((sender, args) -&gt; { // - });</span></span></code> </pre> <br><p>  Passons maintenant au filtrage des √©v√©nements.  Par d√©faut, les √©v√©nements passent par une pyramide d'√©l√©ments.  Dans notre exemple, le bouton <code>infoBtn</code> re√ßoit l'√©v√©nement de cliquer sur le bouton du bouton <code>infoBtn</code> , puis cet √©v√©nement recevra l'√©l√©ment <code>CharacterCard</code> , puis le <code>ListBox</code> dans lequel il sera situ√©, puis <code>SplitArea</code> , <code>VerticalStack</code> et √† la fin il atteindra l'√©l√©ment de base <code>Wontainer</code> . </p><br><p>  Sur chaque √©l√©ment, vous pouvez g√©rer l'√©v√©nement <code>EventMouseClick</code> et toutes ces actions dans l'ordre sp√©cifi√© seront effectu√©es, mais qu'en est-il si en cliquant sur un √©l√©ment, nous ne voulons pas que cet √©v√©nement aille plus loin dans la cha√Æne?  Pour cela, il n'y a que le filtrage des √©v√©nements.  Voyons plus clairement, par exemple, sur l'√©l√©ment <code>CharacterCard</code> .  Imaginez que <code>CharacterCard</code> d√©crit l'√©v√©nement <code>EventMouseClick</code> , qui ins√®re des informations du <code>CharacterInfo</code> li√© dans un champ de texte pour modifier un caract√®re.  Ce comportement sera logique - on clique sur l'√©l√©ment et on voit tous les param√®tres du personnage.  Ensuite, nous √©ditons le personnage, inventons une biographie et des comp√©tences ou changeons les caract√©ristiques.  √Ä un moment donn√©, nous voulions voir une br√®ve information sur un autre personnage g√©n√©r√© dans la liste et cliquer sur le bouton infoBtn.  Si nous ne filtrons pas les √©v√©nements, apr√®s avoir appel√© l'info-bulle, EventMouseClick sera ex√©cut√© sur l'√©l√©ment <code>CharacterCard</code> lui-m√™me, qui, comme nous nous en souvenons, ins√®re du texte dans le champ d'√©dition de caract√®res, ce qui entra√Ænera une perte de modifications si nous n'enregistrons pas les r√©sultats, et le comportement de l'application elle-m√™me sera para√Ætre illogique.  Par cons√©quent, afin que l'√©v√©nement soit ex√©cut√© uniquement sur le bouton, nous pouvons d√©finir le filtre √† l'aide de la <code>infoBtn.SetPassEvents(false)</code> . </p><br><p>  Si vous appelez cette m√©thode de cette fa√ßon, le bouton cessera d'ignorer les √©v√©nements apr√®s lui-m√™me.  Supposons que nous ne voulons pas ignorer les √©v√©nements de clic de souris uniquement, nous pourrions alors appeler une m√©thode avec d'autres param√®tres, par exemple, <code>infoBtn.SetPassEvents(false, InputEventType.MousePress, MouseRelease)</code> . </p><br><p>  Ainsi, il est possible de filtrer les √©v√©nements √† chaque √©tape, en obtenant le r√©sultat souhait√©. </p><br><p>  Vous pouvez √† nouveau regarder l'application, qui s'est finalement av√©r√©e.  Bien s√ªr, les d√©tails de la mise en ≈ìuvre de la logique m√©tier sont omis ici, en particulier, la g√©n√©ration de personnages, leurs comp√©tences et bien plus encore, qui n'est plus directement li√©e √† SpaceVIL.  Le code d'application complet peut √™tre consult√© sur le lien vers GitHub, o√π il existe d√©j√† plusieurs autres exemples de travail avec SpaceVIL, √† la fois en C # et en Java. </p><br><div class="spoiler">  <b class="spoiler_title">Capture d'√©cran de l'application CharacterEditor termin√©e</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/sc/hj/tc/schjtchdgjoprbwxcsls0b-x2_m.png"></p></div></div><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  En conclusion, je voudrais vous rappeler que le cadre est en cours de d√©veloppement actif, de sorte que les plantages et les plantages sont possibles, ainsi que certaines fonctionnalit√©s peuvent √™tre r√©vis√©es et le r√©sultat final de l'utilisation peut radicalement diff√©rer de l'actuel, donc, si la version actuelle du cadre vous convient, alors n'oubliez pas de sauvegarde de cette version, car je ne peux pas garantir que les nouvelles versions seront r√©trocompatibles.  Certains points peuvent √™tre refaits pour augmenter le confort et la vitesse d'utilisation de SpaceVIL et jusqu'√† pr√©sent ne veulent pas faire glisser des id√©es anciennes et abandonn√©es.  De plus, le travail de SpaceVIL n'a pas √©t√© test√© sur les cartes vid√©o d'AMD, en raison du manque d'√©quipements appropri√©s.  Des tests ont √©t√© effectu√©s sur des cartes vid√©o d'Intel et de NVidia.  Le d√©veloppement ult√©rieur de SpaceVIL se concentrera sur l'ajout de nouvelles fonctionnalit√©s (par exemple, il n'y a actuellement aucun support pour les d√©grad√©s) et l'optimisation. </p><br><p>  Je voudrais √©galement mentionner une limitation qui m√©rite d'√™tre rappel√©e lors de l'√©criture d'une application multiplateforme utilisant cette technologie - il n'est pas recommand√© d'utiliser des bo√Ætes de dialogue (et g√©n√©ralement de cr√©er des applications multi-fen√™tres sous Linux en raison d'erreurs de rendu), les bo√Ætes de dialogue peuvent √™tre facilement remplac√©es par des √©l√©ments de dialogue.  Mac OS X interdit g√©n√©ralement la cr√©ation d'applications multi-fen√™tres, car il n√©cessite que l'interface graphique soit lanc√©e uniquement dans le thread d'application principal. </p><br><p>  Vous pouvez t√©l√©charger le cadre de la version requise et tous les exemples pr√©sent√©s de programmes de test aux liens suivants.  La premi√®re version de la documentation est √©galement disponible ici. </p><br><p>  Enfin, une d√©monstration un peu plus visuelle.  Vous trouverez ci-dessous des applications √©crites √† l'aide de la technologie SpaceVIL, qui peuvent vous donner une id√©e de ce que vous pouvez r√©aliser en utilisant SpaceVIL. </p><br><div class="spoiler">  <b class="spoiler_title">Captures d'√©cran d'applications √©crites avec SpaceVIL</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/a-/dx/dl/a-dxdlpcpgm3phqlxmpp1j2cpcw.png"></p><br><p><img src="https://habrastorage.org/webt/jg/c0/6-/jgc06-am6250tpk8csit3idoezy.png"></p><br><p><img src="https://habrastorage.org/webt/uh/ft/_z/uhft_zhswe8ysgmqiaya9dikz5k.png"></p><br><p><img src="https://habrastorage.org/webt/mf/mc/2u/mfmc2uquoyfbevi4_qf9yax2tc8.png"></p><br><p><img src="https://habrastorage.org/webt/8c/wa/ii/8cwaiictybg0oq839xrzqp9vqtm.png"></p></div></div><br><h4 id="ssylki">  Les r√©f√©rences </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Spacevil</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exemples de code GitHub</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr448790/">https://habr.com/ru/post/fr448790/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr448778/index.html">Pr√©sentation du d√©bogage de voyage dans le temps pour Visual Studio Enterprise 2019</a></li>
<li><a href="../fr448780/index.html">Ce qui donne des logiciels pour recruter en argent</a></li>
<li><a href="../fr448782/index.html">Test Python avec pytest. Premiers pas avec pytest, Chapitre 1</a></li>
<li><a href="../fr448784/index.html">Nouvelles fonctionnalit√©s pour les auteurs d'extensions dans Visual Studio 2019 version 16.1</a></li>
<li><a href="../fr448786/index.html">Test Python avec pytest. CHAPITRE 3 Appareils pytest</a></li>
<li><a href="../fr448792/index.html">Test Python avec pytest. Luminaires int√©gr√©s, Chapitre 4</a></li>
<li><a href="../fr448794/index.html">Test Python avec pytest. Plugins CHAPITRE 5</a></li>
<li><a href="../fr448796/index.html">Test Python avec pytest. Configuration, CHAPITRE 6</a></li>
<li><a href="../fr448798/index.html">Test Python avec pytest. Utilisation de pytest avec d'autres outils, CHAPITRE 7</a></li>
<li><a href="../fr448800/index.html">Configurer Visual Studio dans votre organisation avec .vsconfig</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>