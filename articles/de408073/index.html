<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐠 👃🏿 🛀🏿 Wie wir die Plattform für elektronischen Schmuck entwickelt haben ☹️ ✊🏾 🚮</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Idee, Elektronik und Schmuck zu kreuzen, ist sehr alt. Als wir uns an sie erinnerten, ergab die Suche daher eine große Anzahl von Arbeiten zu dies...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie wir die Plattform für elektronischen Schmuck entwickelt haben</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408073/"> Die Idee, Elektronik und Schmuck zu kreuzen, ist sehr alt.  Als wir uns an sie erinnerten, ergab die Suche daher eine große Anzahl von Arbeiten zu diesem Thema.  Richtig, elektronischer Schmuck bedeutete oft Schmuck aus Elektronik - Stücke eines in Epoxidharz gekleideten Bretts, Elemente, Anhänger-Mikroschaltungen.  Wir wollten LED-Dekorationen machen.  Nicht wie bei chinesischem Spielzeug, das an jeder Ecke verkauft wird, weil alles ziemlich uninteressant ist - es gibt mehrere blinkende Programme, die per Knopfdruck umgeschaltet werden können, aber etwas komplizierteres und interessanteres.  Beispielsweise brennen Lauflichter, die auf Umgebungslicht reagieren, im Dunkeln heller und im Licht dunkler.  Oder im Takt der umgebenden Musik flackern.  Oder die Farbe je nach Temperatur ändern.  Oder die Herzfrequenz des Trägers anzeigen.  Mit anderen Worten, wir wollten eine Art aktive Reaktion.  Ich muss sofort sagen - es stellte sich so etwas heraus: <br><br><img src="https://habrastorage.org/webt/uz/qz/rx/uzqzrxdscialsafiiwgbicm2rqu.jpeg"><br><a name="habracut"></a><br>  <i>Warnung: Dieser Artikel wurde in erster Linie für nichttechnische Spezialisten verfasst und weist daher einige Vereinfachungen auf, die dazu führen können, dass Ingenieure missbilligt werden.</i>  <i>Fühlen Sie sich frei, sie auszudrücken.</i> <br><br>  So wurden die Anforderungen an das elektronische Teil gebildet: <br><br><ul><li>  Es sollten mehrere gesteuerte LEDs vorhanden sein (gesteuert - dies bedeutet, dass wir nicht nur ihr Leuchten ein- und ausschalten können, sondern auch ihre Helligkeit und vor allem ihre Farbe steuern können). </li><li>  Es ist mindestens ein Sensor erforderlich - ein Lichtsensor, ein Temperatursensor oder ein Mikrofon.  Herzfrequenzsensoren wurden bisher verschoben - sie erfordern eine direkte Annäherung an den Körper (daher ist Ihr Fitnessarmband in dieser Hinsicht unbrauchbar, wenn Sie es über das Hemd legen). </li><li>  Die Steuerung muss programmierbar sein.  Dies bedeutet, dass wir die Logik der Steuerung der LEDs jederzeit auf eine für die Umgebung der fertigen Dekoration geeignetere Logik ändern können. Wenn beispielsweise kalte Farben in der Dekoration vorherrschen, können Sie das Leuchten entsprechend einstellen. </li><li>  Das Gerät sollte kompakt und leicht sein, da schwere Gegenstände die Möglichkeit ihrer Verwendung stark einschränken. </li><li>  Der Stromkreis sollte aus Gründen der Benutzerfreundlichkeit mit Batterien oder Batterien betrieben werden, die an jeder Ecke gekauft werden können. </li></ul><br>  Nachdem wir diese Anforderungen festgelegt hatten, begannen wir ernsthaft nachzudenken.  Wie jede technische Aufgabe hatte auch diese viele Lösungen. <br><br>  Zum Beispiel könnten wir einen Standardkonstruktor wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LiliPad</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Adafruit GEMMA verwenden</a> , der nur für diese Zwecke erstellt wurde.  Wenn Sie sich GEMMA-Beispiele ansehen, dann sehen Sie eine große Anzahl ähnlicher Projekte mit LEDs, es gibt sogar Ohrringe.  Leider ist der Designer im Prototypenstadium sehr gut geeignet, wenn das Gerät aus Schmutz und Stöcken zusammengebaut werden muss, um zu überprüfen, ob es überhaupt funktioniert, aber leider ist es absolut nicht für kleine Serien geeignet - zusätzliche Steckverbinder, Verbindungen und das gesamte Konstrukt stören .  Nun, die Kosten des Designers und der Teile dafür (und wir erinnern uns, dass wir immer noch LEDs und Sensoren benötigen) wirken sich auch unangenehm auf die Kosten des Endprodukts aus, nicht in die für den Käufer interessanteste Richtung.  Designer sind also eine gute Option, werfen jedoch eine Vielzahl von Fragen auf. <br><br>  Eine Alternative besteht darin, den elektronischen Teil als Ganzes und unabhängig zu entwickeln.  Dieser Weg ist sowohl einfacher (da wir nur das lassen können, was benötigt wird) als auch schwierig (da das Erstellen eines programmierbaren Geräts selbst für unsere scheinbar einfache Aufgabe viele Fallstricke und Kompromisslösungen mit sich bringt).  Als wir eine so wunderbare Gelegenheit sahen, einige Körperteile zu dehnen, konnten wir natürlich nicht vorbeikommen. <br><br>  Hier lohnt es sich wahrscheinlich, einen kurzen Ausflug in die Herstellung von Elektronik zu machen und wie dies geschieht. <br><br><div class="spoiler">  <b class="spoiler_title">Wie man Elektronik an den Fingern macht</b> <div class="spoiler_text">  Zunächst werden die Idee und die Anforderungen für das Gerät formuliert (nun, was wir bereits getan haben).  Anschließend werden diese Anforderungen mit Elektronikspezialisten besprochen und gemeinsam geklärt - das Projekt ist mit Details und Nuancen bewachsen. <br><br>  Es wird ein schematisches Diagramm des Geräts gezeichnet - wie elektronische Komponenten miteinander verbunden werden müssen, um zusammenarbeiten zu können.  Das Schema wird in der Praxis überprüft - von den vorhandenen Mitteln und das erste Gerät wird an der Verkabelung montiert.  Wenn es funktioniert, bedeutet dies, dass das ursprüngliche Schema korrekt war und Sie fortfahren können. <br><br>  Nachdem wir einen bewährten Schaltplan des Geräts haben, beginnt der interessanteste Teil - das PCB-Layout, d.h.  ein solches Stück Leiterplatte mit Schienen, auf die elektronische Komponenten gelötet werden.  Sie können natürlich alles an der Verkabelung tun, aber es wird langsam, langweilig und äußerst unzuverlässig.  Darüber hinaus hat die moderne Technologie eine solche Verbreitung erreicht, dass es möglich ist, eine Leiterplatte mit industrieller Qualität für sehr wenig Geld herzustellen.  Wir werden es jedoch immer noch sehen.  Das Entwerfen einer Leiterplatte soll zeigen, wie wir die Elemente anordnen und wie sie miteinander verbunden werden.  Oder einfach ausgedrückt, wir müssen den Schaltplan schön neu zeichnen und die tatsächlichen physikalischen Abmessungen der Teile berücksichtigen. <br><br>  Es reicht nicht aus, nur eine Leiterplatte zu entwerfen (im Fachjargon - „Verdünnen“). Sie müssen sie dennoch für die Produktion vorbereiten, d. H.  Generieren Sie den richtigen Satz von Dokumenten, einschließlich des Erscheinungsbilds des Ergebnisses, des Schemas der leitenden Spuren, des Bohr- und Metallisierungsschemas.  Normalerweise erhalten es selbst erfahrene Ingenieure nicht sofort, insbesondere wenn das Gerät nicht einfach ist.  Diese Dateien (im Gerber-Format) werden in die Produktion übertragen.  Während die Leiterplatte freigegeben wird, werden Elemente gekauft, die darauf gelötet werden.  In einer Fachsprache heißt die Liste solcher Elemente BoM (aus der englischen Stückliste - eine Liste der Komponenten). <br><br>  Nach Erhalt der Leiterplatte und Kauf aller erforderlichen Komponenten werden die Elemente auf der Leiterplatte montiert. Diese kann manuell (normalerweise für kleine Auflagen von bis zu tausend Exemplaren) oder automatisch (mit speziellen Maschinen für große Chargen) erfolgen.  Die manuelle Installation sieht aus wie ein Ingenieur mit einem Lötkolben, der die Elemente einfach gemäß dem ihm zur Verfügung gestellten Schema auf die Platine verlötet. <br><br>  Nach Abschluss der Installation wird das Gerät programmiert (sofern es Mikrochips enthält, die dies ermöglichen) und getestet, d. H.  Die Funktionsfähigkeit und Beständigkeit gegen verschiedene äußere Einflüsse wird überprüft.  Wenn das Gerät alle Tests bestanden hat, wird es als betriebsbereit erkannt und weiter auf die Verpackung übertragen (d. H. In eine Schachtel gelegt) oder zur weiteren Verarbeitung (wie in unserem Fall).  Wenn nicht, diagnostizieren sie die Ursachen, reparieren, testen sie erneut und lehnen sie entweder dauerhaft ab oder geben sie weiter. <br><br>  Im Allgemeinen ist der Herstellungsprozess der Elektronik nicht der einfachste und trivialste.  Wenn Sie entschlossen sind, diesen Weg zu gehen, empfehlen wir Ihnen dringend, sich an qualifizierte Ingenieure in diesem Bereich zu wenden, vorzugsweise mit Erfahrung in diesem Bereich. <br></div></div><br>  Wir haben also eine Idee und es gibt Anforderungen.  Es bleibt, sie "in der Drüse" zu verkörpern. <br><br>  Überlegungen zu dieser Frage ließen zahlreiche Zweifel aufkommen: <br><br><ul><li>  LEDs sind ziemlich „gefräßige“ Elemente, da sie Lichtquellen sind.  Die gesteuerten LEDs sind dreimal „hungrig“, da es sich im Wesentlichen um drei verschiedene LEDs handelt, die in einem Gehäuse zusammengefasst sind (rote, grüne und blaue Farbkomponenten).  Und wie wir uns erinnern, wollten wir ein kompaktes Gerät, d.h.  Für eine große Batterie haben wir einfach keinen Platz. </li><li>  Batterie und Strom sind der Engpass des gesamten Projekts.  Ich möchte Sie daran erinnern, dass laut Plan zusätzlich zu den LEDs Sensoren und ein Glühschutzkreis vorhanden sein sollten, die auch elektrische Energie verbrauchen.  Und es ist unwahrscheinlich, dass der Käufer zufrieden ist, wenn sein Schmuck einige Minuten lang funktioniert und dann ein Batteriewechsel erforderlich ist. </li><li>  das Gerät muss programmierbar sein - d.h.  Wir müssen in der Lage sein, das Leuchten auf Programmebene zu steuern.  Dies erfordert automatisch ein Mikroprozessorgerät, das als Mikrocontroller bezeichnet wird.  Dies ist ein Chip, an den Sie sowohl LEDs als auch Sensoren anschließen können.  Im Inneren befinden sich ein einfacher Mikroprozessor und ein Speicher, mit denen Sie ein Programm schreiben können, um alle angeschlossenen Geräte zu steuern.  Und dieser Mikrocontroller sollte, wie aus den vorhergehenden Absätzen hervorgeht, sehr wenig elektrische Energie verbrauchen, um den Benutzer nicht zu einem ständigen Batteriewechsel zu verurteilen. </li><li>  Da es so viele verschiedene Sensoren gibt, wurde beschlossen, sich nur auf einen von ihnen zu konzentrieren - den Lichtsensor.  Als solcher Sensor wird ein Fotowiderstand verwendet, der nach diesem Prinzip arbeitet - wenn Licht darauf fällt, nimmt sein Widerstand ab, wenn es im Dunkeln ist, nimmt er zu.  Dies ist ein einfacher Sensor, der ihn mit dem Eingang des Mikrocontrollers verbindet. Wir erhalten ein Gerät zur Messung der Beleuchtung.  Mit Blick auf die Zukunft werde ich sagen, dass es Temperatur- und Schallsensoren gibt, die nach denselben Prinzipien arbeiten und den Fotowiderstand ersetzen können, ohne wesentliche Änderungen an der endgültigen Schaltung vorzunehmen. </li><li>  Die Leiterplatte, auf der die Installation durchgeführt werden soll, sollte rund oder mit abgeschrägten Ecken sein - auch aus ästhetischen Gründen gibt es nicht so viele rechteckige und quadratische Dekorationen. </li></ul><br>  Also stöbern wir in der Suche, sortieren die Kombinationen aus und erhalten so eine Lösung, die uns zufriedenstellt: <br><br><ol><li>  Strom - ein Standard-CR2032-Akku, auch ein "Tablet" von der Größe einer Zehn-Rubel-Münze.  Bietet 3 Volt, ist für eine lange Zeit gelagert, arbeitet in einem weiten Temperaturbereich, billig, wird in jedem Supermarkt verkauft.  Der Halter für eine solche Batterie ist furchtbar einfach und auch sehr kostengünstig; </li><li>  Mikrocontroller - Atmel Attiny85, kompakt, stromsparend, leicht programmierbar, günstig.  Ein zusätzliches Plus ist, dass dieser Chip einen analogen Eingang (dh Sie können dort einen Sensor ohne zusätzliche Schaltkreise anschließen) und eine kleine Anzahl von Beinen (was in unserem Wunsch nach Kompaktheit ein sehr großes Plus ist) hat. </li><li>  LEDs sind SK6812 mini, die 3,5 mm mal 3,5 mm groß sind.  Es schien uns, dass gewöhnliche Fünf-Millimeter-LEDs für diese Schaltung insgesamt sehr und sehr gefräßig sein werden.  Außerdem werden sie normalerweise mit einer Spannung von 5 Volt versorgt, und unsere Batterie liefert nur 3 Volt, d.h.  um zu arbeiten, müsste man einen Konverter verwenden, den ich nicht wollte; </li><li>  Ein Fotowiderstand ist auch ein Lichtsensor - ein traditioneller Sensor, der in Kameras und Gegensprechanlagen verwendet wird, um den Einbruch der Dunkelheit zu bestimmen. </li></ol><br>  Nachdem wir uns für die Komponenten entschieden haben, laden Sie die Dokumentation für den Controller und die LEDs herunter und tauchen Sie in die Studie ein.  Nuancen tauchen auf - die LEDs sind in Reihe geschaltet, „per Zug“ und werden über einen Draht gesteuert, in den die Steuerung auf besondere Weise ein Signal bilden muss - und senden eine bestimmte Folge von Zahlen, von denen jede bedeutet, mit welcher Intensität jede der eingebauten LEDs leuchtet (und wir) Denken Sie daran, dass wir in einem Fall drei davon haben - rot, grün und blau.  Das heißt,  Wir müssen die Helligkeit von Rot, Grün und Blau nacheinander für die erste LED, dann für die zweite, dann für die dritte usw. senden, je nachdem, wie viele von ihnen in Reihe geschaltet sind.  Wenn Sie LED-Streifen in Baumärkten gesehen haben, die mit allen Strahlen des Regenbogens schimmern, dann wissen Sie, dass sie nach ungefähr demselben Prinzip funktionieren. <br><br>  Zusätzlich zur Steuerung dieser LEDs ist ein Interferenzschutz erforderlich, für den ein Kondensator für jede LED erforderlich ist.  Außerdem wird für den Mikrocontroller der gleiche Interferenzkondensator benötigt. <br><br>  Darüber hinaus sind LEDs auch in einem so kompakten Design immer noch leistungsgierig.  Daher muss ihre Gier begrenzt sein, und wir haben einen Begrenzer - Widerstand.  Das heißt,  Jede LED benötigt einen zusätzlichen Strombegrenzungswiderstand.  Es ist lustig, dass sich während der Entwicklung des Produkts herausstellte, dass diese Widerstände nicht viel helfen, aber wie viel sie schaden - bei einer Anzahl von mehr als vier LEDs fehlte der Strom und ich musste sie auf Null Ohm ändern, d. H.  alltägliche Jumper, damit die LEDs richtig funktionieren.  In nachfolgenden Versionen des Schemas haben wir sie vollständig entfernt. <br><br>  Der Fotowiderstand benötigte auch einen zusätzlichen Widerstand, der als Spannungsteiler wirkt.  Vollständige Beispiele für Verbindungsschemata finden Sie, wenn Sie in der Suchmaschine „Arduino-Verbindung eines Fotowiderstands“ fahren. <br><br>  Für die Programmierung des Mikrocontrollers ist es erwähnenswert, dass zum Hochladen der Firmware (Programmcode in binärer Form) in Attiny85 ein spezielles Gerät erforderlich ist - ein „Programmierer“.  Glücklicherweise wird es auf der Grundlage des elektronischen Designers von Arduino (zu dem auch sein älterer Bruder gehört, der ebenfalls ein Atmel-Mikrocontroller ist, aber seriöser) zusammengestellt, der in jedem Elektronikgeschäft oder in China für wenig Geld gekauft werden kann. <br><br>  Und schließlich der Schalter - wir möchten nicht, dass der Benutzer den Akku ständig einlegt und entfernt. <br><br>  Trotz alledem erwies sich der Schaltplan im Vergleich zu den meisten Haushaltsgeräten als einfach (höchstwahrscheinlich ist Ihr Wärmefluss in der Elektronik komplizierter als in unserer Schaltung): <br><br><img src="https://habrastorage.org/webt/hg/ts/p7/hgtsp7br6z-gthfvr0cbgyeonzy.png"><br><br>  Als Ergebnis haben wir ein Gerät erhalten, dessen Abmessungen etwas größer sind als bei einem normalen Tablet-Akku.  Tatsächlich befinden sich die Batterie und der Schalter auf der einen Seite, die LEDs, der Mikrocontroller und der Lichtsensor auf der anderen Seite.  Da die LEDs auch den in der Nähe befindlichen Lichtsensor beeinflussen können (z. B. ihn so beleuchten, dass davon ausgegangen wird, dass der Kreis hell ist, obwohl es möglicherweise noch so dunkel ist), wurde beschlossen, ihn so zu montieren, dass er in eine Ebene senkrecht zur Richtung gebogen werden kann glühen. <br><br>  Durch die Verkabelung haben wir eine ziemlich einfache Leiterplatte erhalten.  Vor der Verkabelung haben wir die Schaltung überprüft und festgestellt, dass sie mit einer Einschränkung funktioniert. Wir haben sie an einer konstanten Stromquelle und nicht an einer Batterie getestet. Die Befürchtungen, dass eine so kleine Batterie nur kurze Zeit anhält, blieben also bis zu dem Moment bestehen, als wir die ersten Geräte löten. <br><br>  Also, die Schaltung ist fertig, die Platine ist geschieden.  Und dann der erste Kompromiss - Tatsache ist, dass Attiny85-Mikrocontroller in zwei Arten von Fällen erhältlich sind - DIP (dies sind klassische Mikroschaltungen mit Stiftbeinen, die Sie wahrscheinlich zu Beginn der Verbreitung von Elektronik und einfachen Geräten gesehen haben) und SO (dies sind planare Mikroschaltungen). klein und kompakt, ohne zusätzliche Löcher zum Löten erforderlich und durch Löten auf der Platine montiert).  Zum Zeitpunkt des Entwurfs war die SO-Komponente unseres Lieferanten teurer und vor allem nicht verfügbar.  Deshalb haben wir die DIP-Version genommen, aber mit der Erwartung, dass wir sie zuerst programmieren und dann vorsichtig die Beine abbeißen und sie wie SO direkt auf die Platine löten.  Dies brachte ein zusätzliches technologisches Risiko mit sich - das Ändern der Firmware in dieser Option nach dem Löten des Mikrocontrollers auf die Platine wäre keine sehr triviale Aufgabe, aber wer von uns mag keine Schwierigkeiten ?! <br><br><img src="https://habrastorage.org/webt/fl/6a/xf/fl6axfi3kxuermcoedmtb-l6o4u.jpeg" alt="Attiny85 DIP / SO"><br><br>  Wir haben Boards in China bestellt, dort wurde dieser Prozess getestet und mit der Montage der Komponenten begonnen.  Die LEDs und Batteriehalter wurden auch in China bestellt, entweder waren sie nicht auf dem lokalen Markt oder sie kosten unanständiges Geld.  Der Rest wurde im nächsten elektronischen Supermarkt gekauft.  Mikrocontroller konnten auch in China bestellt werden, aber eine große Anzahl negativer Rückmeldungen und unsere eigene traurige Erfahrung (als die gesendeten Komponenten nicht gut genug waren) haben uns von einem solchen Schritt abgehalten.  Als wir die fertigen Leiterplatten erhielten, war die gesamte Stückliste in unseren Händen.  Es bleibt sogar noch Zeit, den Programmierer für Mikrocontroller langsam zu löten. <br><br><img src="https://habrastorage.org/webt/ni/go/qo/nigoqohjskm-xouftocvfrydfwa.jpeg"><br><br>  Nach Erhalt der Platinen haben wir ein Testgerät gelötet.  Da das Programm für den Mikrocontroller verschoben wurde, bis das fertige Gerät empfangen wurde (und das war richtig, ich werde später erklären, warum), haben wir den Mikrocontroller nicht "endgültig" verlötet, sondern ein Übergangspad hergestellt, in das der Mikroschaltkreis als Glühbirne in die Patrone eingesetzt werden kann.  Wie erwartet funktionierte das Gerät nicht.  Bei genauerer Betrachtung des Geräts (einige Stunden lang) stellten wir einen Fehler fest - die LEDs waren nicht richtig gelötet.  Tatsache ist, dass es bei der Installation von Mikrochips und Elementen mit einer großen Anzahl von Beinen sehr wichtig ist, diese Beine nicht zu verwechseln und das Element richtig zu platzieren.  Zu diesem Zweck verwenden Ingenieure auf der Markierung auf der Leiterplatte einen Schlüssel - ein Bild eines Punktes, der mit dem auf dem Chipkörper übereinstimmen muss.  Infolgedessen sieht der Lötprozess eines solchen Elements folgendermaßen aus: Wir kombinieren die Schlüssel, löten ein Bein und löten alle anderen.  Das Verwirren des Schlüssels ist normalerweise mit negativen Konsequenzen behaftet - der Autor dieser Zeilen schob den Mikrocontroller irgendwie auf der falschen Seite in den Programmierer - nach fünf Sekunden roch er in der Luft gebraten, und der Finger, der den Chip berührte, bekam einen ordentlichen Brand in der Form des Gehäuses.  Glücklicherweise wurde niemand verletzt und nach dem Abkühlen funktionierte auch der Mikrocontroller weiter. <br><br>  Bei der Entwicklung unseres Motherboards haben wir eine selbst erstellte Beschreibung für LEDs angewendet (Drei-Millimeter-SK6812 sind ziemlich selten als WS2812), und es wurde ein Fehler mit dem Schlüssel gemacht.  Daher sollte sich der LED-Schlüssel während der Installation relativ zum auf der Platine markierten Schlüssel auf der anderen Seite befinden.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Testboard ging sicher zum Schrott. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das zweite Testmuster wurde bereits unter Berücksichtigung dieses Fehlers erstellt. </font><font style="vertical-align: inherit;">Jetzt waren wir sicher, dass unsere Schaltung betriebsbereit war und begannen mit der Programmierung der Firmware. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es sah so aus:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> der Mikrocontroller-Chip wurde in den Programmierer eingesetzt; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Firmware wurde hineingegossen; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> der Chip wurde entfernt und in das Gerät eingesetzt; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die Stromversorgung wurde eingeschaltet und die Funktionsfähigkeit überprüft. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> alles wurde zuerst wiederholt. </font></font></li></ul><br><img src="https://habrastorage.org/webt/bi/ng/bd/bingbd5ygulzpskw2ej_qcfjlxu.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich stelle fest, dass diese Operation manchmal tagsüber mehrere Dutzend Mal wiederholt werden musste. </font><font style="vertical-align: inherit;">Es war möglich, den Programmierer direkt auf den Chip auf der Platine zu löten, aber wie Sie sich erinnern, suchen wir nicht nach einfachen Wegen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auch in der Programmierungsphase wurden viele interessante Dinge enthüllt.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alles begann damit, dass keine der Standardbibliotheken für die Arbeit mit gesteuerten LEDs funktionierte. Der Grund war nicht an einem Ort, sondern an zwei. Erstens waren die Zeitintervalle für die Codierung der Steuersignale für andere Arten von LEDs vorgesehen und stimmten nicht geringfügig mit den in der Dokumentation für unsere angegebenen überein. Zweitens stellte sich heraus, dass der Mikrocontroller bei Batterieleistung mit einer niedrigeren Frequenz arbeitet und diese standardmäßig noch weiter reduzieren kann, um Energie zu sparen (was der Fall ist, wenn er sich in der Batterie befindet), was wiederum zu einer Änderung der Zeitintervalle für die Steuerung der LEDs führt. Ein paar Stunden in einer Umarmung mit einem Oszilloskop halfen, die Bibliothek auf die gewünschten Intervalle abzustimmen, und eine halbe Stunde und ein paar Experimente ermöglichten es uns, einen Befehl zu finden, der den Mikrocontroller daran hinderte, die Arbeitsfrequenz zu ändern.Als Ergebnis eines mittellangen Kampfes konnten wir die LEDs normalerweise steuern und sie mit den Farben beleuchten, die wir brauchten, und nicht in einer völlig zufälligen Reihenfolge.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die zweite Überraschung präsentierte einen Lichtsensor. Nachdem wir es programmiert hatten, konnten wir lange Zeit nicht verstehen, warum es keine Reaktion darauf gab, es mit einem Finger (dh vollständig abgedunkelt) aus dem Wort „vollständig“ zu schließen. Die Antwort kam nach einigen Tagen genauer Betrachtung von Beispielen für die Arbeit mit solchen Sensoren. Es stellte sich heraus, dass beim Einrichten des analogen Anschlusses, an den der Sensor angeschlossen werden sollte, eine Nummerierung und beim Lesen der Messwerte eine andere verwendet werden musste (ja, ich erinnerte mich auch an den Witz „Wow, es gibt einen Fehler in einer Ziffer, aber welchen Unterschied!“). . Nach dieser Erkenntnis funktionierte alles wie es sollte. Die Firmware wurde geschrieben. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Da uns nicht eine und nicht zwei Leiterplatten, sondern zehn auf einmal geschickt wurden (eine wurde, wie wir uns erinnern, entsorgt), löten wir alle anderen freudig.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es stellte sich heraus, dass das Gesetz der großen Anzahl auch in kleinen Chargen funktioniert - Produktionsfehler traten bei zwei von zehn Platinen auf - unsere chinesischen Kollegen führten die elektrische Verbindung zwischen der vorderen und der hinteren Schicht der Platine nicht gut genug durch, so dass aufgrund mangelnder Leistung nichts funktionierte. Glücklicherweise kann dies leicht durch Löten der Zwischenschichtlöcher mit dem Leiter beseitigt werden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Geräte werden zusammengebaut, getestet und zur weiteren Verarbeitung übertragen, um das Aussehen einer fertigen Dekoration zu erhalten. Tatsächlich haben wir nicht mehr als eine Woche für die gesamte Entwicklung aufgewendet, aber aufgrund von Ablenkungen für andere Aufgaben und Erwartungen (Freizeit, Komponenten, Leiterplatten) war dieser gesamte Prozess über ein halbes Jahr verteilt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn jemand interessiert ist - der Quellcode und die Projektmaterialien werden auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github veröffentlicht</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Geschichte endet nicht dort. Nach der ersten lehrreichen Erfahrung haben wir mehrere weitere Versionen des Boards erstellt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die zweite Version war in zwei Versionen - mit sechs LEDs in einem Kreis und vier (eine in der Mitte) und unterschied sich darin, dass wir hier die SO-Codierung des Chips verwendeten. Aber hier gab es einige Exzesse - bei der Verkabelung der Platine aufgrund von Verwechslungen in den Namen wurde der falsche Kontaktbereich gewählt und infolgedessen mussten die Chipbeine für die Installation unter das Gehäuse geschoben werden. Außerdem haben sie die Kontakte für die Firmware und die drei "Power-Signal-Ground" getrennt, um Standorte zu trennen und weitere LEDs als externes Element hinzufügen zu können.</font></font><br><br><img src="https://habrastorage.org/webt/r9/lj/lc/r9ljlchh7gttw_jiyfdhzhcylq4.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Außerdem wurde ein weiterer unangenehmer Nachteil festgestellt: Der Meister bat mich, das Brett perfekt rund zu machen (in unserer Version sah es eher aus wie ein Rechteck mit abgerundeten Ecken). Sie überprüften gleichzeitig die chinesische Industrie auf die Herstellung von Leiterplatten mit einer Dicke von weniger als einem Millimeter. Das Ergebnis war vollkommen zufriedenstellend: Als Ersatz für die Halterungen für CR2016-Batterien erhielten wir eine noch leichtere Plattform, aus der Sie beispielsweise bereits Ohrringe herstellen können. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Für die Firmware dieser Geräte wurde der Programmierer a la "Collective Farm" auf dem Pogo Pin verwendet. Wie sich herausstellte, blieb das Laden der Firmware immer noch nicht trivial - es war notwendig, die Platine fest an die Stifte zu drücken, was beim ersten Mal nicht sofort möglich war.</font></font><br><br><img src="https://habrastorage.org/webt/dv/vd/u6/dvvdu6vhiegubulmejwyl220wec.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Apotheose für die Entwicklung dieses Zweigs der Plattform war die dritte und neueste Version. </font><font style="vertical-align: inherit;">Darin wurden die Kontakte für die Firmware auf einem separaten flexiblen Kabel angezeigt, eine zusätzliche Karte für den Programmierer wurde bestellt. </font><font style="vertical-align: inherit;">Bei dieser Iteration bewerteten wir den PCBA-Service von Seeedstudio, der Leiterplatten für uns herstellte. In der chinesischen Industrie wurden die meisten Komponenten montiert. Wir haben den Kontaktstecker für das Programmiergerät, den Batteriehalter, den Fotowiderstand und die LEDs eingelötet. Sie wurden nicht gefunden (mit Ausnahme des Fotowiderstands) Komponenten zur Installation verfügbar. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Ergebnis sieht ungefähr so ​​aus: </font></font><br><br><img src="https://habrastorage.org/webt/c8/fq/gj/c8fqgjh5buzgycilsgtg2l2lwxq.jpeg"><br><br><img src="https://habrastorage.org/webt/hh/xb/gz/hhxbgz7hpzidjydb0mskpxyrjl4.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im Allgemeinen erwies sich das Projekt als interessant. </font><font style="vertical-align: inherit;">Wie sich herausstellte, können selbst scheinbar einfache Dinge recht komplexe Nuancen im Inneren verbergen, was deutlich gezeigt wurde.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de408073/">https://habr.com/ru/post/de408073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de408061/index.html">Schallverlust in Knochenleitungskopfhörern am Beispiel von Aftershokz Trekz Titanium</a></li>
<li><a href="../de408063/index.html">Ehre 6A Überprüfung: Der Budget-Mitarbeiter ist anders</a></li>
<li><a href="../de408065/index.html">Deutsche Ärzte haben für 80% des Körpers eines Kindes transgene Haut gezüchtet</a></li>
<li><a href="../de408067/index.html">Von SimCity zu Real Girlfriend: Eine Geschichte von Simulationsspielen, Teil 1</a></li>
<li><a href="../de408071/index.html">Bereits 2500 Online-Shops werden auf den Computern der Besucher abgebaut</a></li>
<li><a href="../de408075/index.html">10 vielversprechende wissenschaftliche Startups des Jahres 2017 laut C & EN</a></li>
<li><a href="../de408077/index.html">Warum iPhone 8 besser ist als iPhone X.</a></li>
<li><a href="../de408079/index.html">Die neue Version des Merlin-Motors für Falcon 9 ist während des Tests explodiert</a></li>
<li><a href="../de408081/index.html">Manchmal funktioniert es nicht</a></li>
<li><a href="../de408083/index.html">Satellitenabhängige Beobachtung in der Zivilluftfahrt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>