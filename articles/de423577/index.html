<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äçüî¨ üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë© ü§¶üèæ Erstellen eines Logikspiels f√ºr eine Spieleplattform üèÇüèΩ ü§üüèª üï∫üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Guten Tag. 

 Ich m√∂chte meine Bekanntschaftsgeschichte mit der Gameduino 3-Gaming-Plattform sowie ein kleines Gespr√§ch √ºber die Programmierung des ei...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen eines Logikspiels f√ºr eine Spieleplattform</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423577/">  Guten Tag. <br><br>  Ich m√∂chte meine Bekanntschaftsgeschichte mit der Gameduino 3-Gaming-Plattform sowie ein kleines Gespr√§ch √ºber die Programmierung des einfachsten Logikspiels f√ºr diese Plattform, das in Verbindung mit Arduino Uno verwendet wird, teilen. <br><br>  Was ist Gameduino 3?  Gameduino 3 ist ein Erweiterungsboard, mit dem Sie das Arduino in eine moderne Handheld-Spielekonsole (dh Gr√∂√üe) verwandeln k√∂nnen.  Zu meiner √úberraschung konnte ich im Hub keine detaillierten Informationen zu diesem Board finden.  Ich m√∂chte diese L√ºcke schlie√üen, zumal der Vorstand meiner Meinung nach Aufmerksamkeit verdient. <br><br><h3>  Ein bisschen Geschichte </h3><br>  Der Autor des Projekts namens Gameduino ist James Bowman, der 2011 die erste Version des Boards erstellt hat.  Dann wurde es als VGA-Modul f√ºr Arduino positioniert.  Das Board hie√ü Gameduino und basierte auf der Xilinx Spartan-3A-Familie programmierbarer Logik-FPGAs.  Auf der Platine wurden Anschl√ºsse zum Anschlie√üen eines VGA-Monitors und von Stereolautsprechern installiert. <img src="https://habrastorage.org/webt/as/6q/1-/as6q1-hlbbmoyubblbcs6hehog0.jpeg" alt="Bild"><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Gameduino-Funktionen (1):</b> <div class="spoiler_text"><ul><li>  VGA-Videoausgang mit einer Aufl√∂sung von 400 x 300 Pixel, 512 Farben; </li><li>  Der gesamte Farbumfang wird im FPGA mit einer Genauigkeit von 15 Bit verarbeitet. </li></ul><br>  Hintergrundgrafiken: <br><br><ul><li>  Bereich der symbolischen Hintergrundgrafiken 512x512 Pixel; </li><li>  256 Zeichen mit jeweils einer unabh√§ngigen 4-Farben-Palette; </li><li>  implementierte den Effekt des Umschlie√üens von Textzeichenfolgen mit Pixelgl√§ttung; </li></ul><br>  Vordergrundgrafiken: <br><br><ul><li>  Jedes Sprite hat eine Aufl√∂sung von 16 x 16 Pixel. </li><li>  Jedes Sprite kann eine 256-, 16- oder 4-Farben-Palette haben. </li><li>  Unterst√ºtzung f√ºr 4-Wege-Rotations- und Horizontalrotationsalgorithmen; </li><li>  96 Sprites pro Rasterlinie, 1536 Texturelemente pro Rasterlinie; </li><li>  Mechanismus zum Erkennen m√∂glicher Schnittpunkte von Sprites; </li></ul><br>  Audioausgabe: <br><br><ul><li>  12-Bit-Zweikanal-Frequenzsynthesizer; </li><li>  64-stimmige Polyphonie im Frequenzbereich von 10 - 8000 Hz. </li></ul><br>  Das Bild wird auf dem Bildschirm eines Standard-VGA-Monitors mit einer Aufl√∂sung von 400 x 300 Pixel angezeigt. <br>  Die Kompatibilit√§t mit allen Standard-VGA-Monitoren mit einer Aufl√∂sung von 800 x 600 Pixel bleibt erhalten. <br></div></div><br>  2013 wurde die zweite Version des Boards ver√∂ffentlicht - Gameduino 2, in dem es im Gegensatz zur Vorg√§ngerversion bereits einen resistiven 4,3-Zoll-Touchscreen mit einer Aufl√∂sung von 480 x 272, einen 3-Achsen-Beschleunigungsmesser, einen microSD-Speicherkartensteckplatz und einen Audioausgang f√ºr Kopfh√∂rer gab. <br><br><img src="https://habrastorage.org/webt/rv/e-/vg/rve-vggbftjqtpadk4ftr7xtfq4.jpeg" alt="Bild"><br><br>  Das ‚ÄûHerz‚Äú der Platine war der Grafikcontroller EVE (Embedded Video Engine - auf Russisch √ºbersetzt als ‚ÄûEmbedded Video Module‚Äú) FT800, der √ºber leistungsstarke Rechenfunktionen verf√ºgt und mehrere Funktionen gleichzeitig kombiniert: Bilderzeugung und Ausgabe auf dem Bildschirm des TFT-Displays, Touchscreen-Verarbeitung, Klangerzeugung. <br><br><div class="spoiler">  <b class="spoiler_title">Funktionsplan des FT800-Grafikcontrollers</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/lj/7_/dd/lj7_ddvshsrqz9f1mhfs_xhzvja.jpeg" alt="Bild"><br><br>  Die folgenden Funktionsbl√∂cke sind in der Mikroschaltungsstruktur enthalten: Grafikcontroller, Audio-Controller, resistiver Touchpanel-Controller.  Der FT800-Chip steuert Displays mit einer Aufl√∂sung von bis zu 512 x 512 Pixel.  Der FT800 unterst√ºtzt auch LCD WQVGA (480 x 272) und QVGA (320 x 240).  Die EVE (Embedded Video Engine) FT800 ist eine schl√ºsselfertige L√∂sung zum Erstellen einer grafischen Benutzeroberfl√§che.  Die Mikroschaltung erzeugt Anzeigesteuerungssignale und verf√ºgt √ºber integrierte Grafikfunktionen zum Anzeigen von Punkten, Linien, Bitmap-Bildern, volumetrischen Tasten, Texten usw. </div></div><br><br><div class="spoiler">  <b class="spoiler_title">Systemstruktur Basierend auf dem FT800 Graphics Controller</b> <div class="spoiler_text">  Die Bilderzeugung basiert auf einer Reihe von Befehlen (Anzeigeliste), die vom Steuerungsmikrocontroller √ºber die I2C- oder SPI-Schnittstelle an den FT800 √ºbertragen werden (in Gameduino 2 erfolgt die Kommunikation zwischen dem Arduino und dem FT800 √ºber die SPI-Schnittstelle).  Die FT800-Funktionen entlasten den Host-Controller des Systems erheblich. <br><br><img src="https://habrastorage.org/webt/br/2b/2u/br2b2ueemryzlv-qxkor6whrft4.jpeg" alt="Bild"><br><br>  Um beispielsweise eine Reihe von Tasten anzuzeigen, reicht es aus, einen Befehl an den Grafikcontroller zu √ºbertragen (vier 32-Bit-W√∂rter), und der FT800 bildet unabh√§ngig das Bild dieser Tasten auf dem Bildschirm des TFT-Displays.  Der Befehlssatz des FTDI-Grafikcontrollers enth√§lt mehr als 50 Funktionen, mit denen verschiedene Bilder mit verschiedenen Effekten auf dem Bildschirm angezeigt werden k√∂nnen. <br><br>  Ausf√ºhrliche Programmieranleitungen f√ºr Steuerungen und Beispiele f√ºr die Arbeit mit verschiedenen Entwurfsumgebungen finden Sie in den Anwendungshinweisen auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">FTDI-</a> Website. <br><br>  Auf Russisch finden Sie hier eine gute Beschreibung der Funktionalit√§t, der allgemeinen Prinzipien und der Arbeitsbeispiele. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Eigenschaften von Gameduino 2:</b> <div class="spoiler_text"><ul><li>  Bildschirmaufl√∂sung von 480 x 272 Pixel in 24-Bit-Farbe; </li><li>  eine Reihe von Befehlen im Stil von OpenGL; </li><li>  bis zu 2000 Sprites jeder Gr√∂√üe; </li><li>  256 KB Videospeicher; </li><li>  sanfte Sprite-Rotation und Skalierung mit bilinearer Filterung; </li><li>  glatter Kreis und lineares Muster in Hardware - 16x Gl√§ttung; </li><li>  JPEG-Hardware-Decodierung; </li><li>  Integriertes Rendering von Verl√§ufen, Text, W√§hlscheiben und Schaltfl√§chen. </li></ul><br>  Der Ton wird √ºber eine verst√§rkte Kopfh√∂rerbuchse ausgegeben. <br>  Das System unterst√ºtzt die Auswahl integrierter Beispiele und Werkzeuge. <br><br>  Das Controller-ROM ist bereits verkabelt: <br><br><ul><li>  hochwertige Schriftarten (6 Gr√∂√üen); </li><li>  Samples von 8 Musikinstrumenten, die von einer MIDI-Note gespielt werden; </li><li>  Samples von 10 Percussion Sounds. </li></ul><br>  Und nat√ºrlich k√∂nnen Sie Ihre eigenen Schriftarten und Soundbits in 256 KB RAM laden. <br><br>  Die Verwendung der Arduino-Plattform ist keine Voraussetzung: Die Gameduino 2-Karte kann mit einem Mikrocontroller oder einer Mikrocontroller-Karte mit einer SPI-Schnittstelle verbunden werden. </div></div><br>  2017 wurde die dritte Version des Boards ver√∂ffentlicht - Gameduino 3, das fast identisch mit Gameduino 2 aussieht. Anstelle von FT800 wird der neue Grafikcontroller FT810 verwendet, der mit FT800 abw√§rtskompatibel ist (d. H. Der gesamte Code f√ºr Gameduino2 funktioniert auf Gameduino3). Gleichzeitig verf√ºgt es √ºber viermal mehr Rechenfunktionen, z. B. schnellere Hardware-JPEG-Decodierung, Videodecodierung, bis zu 1 MB RAM usw. <br><br><div class="spoiler">  <b class="spoiler_title">Eigenschaften Gameduino 3:</b> <div class="spoiler_text"><ul><li>  Videodecoder f√ºr 30-fps-Vollbildvideo; </li><li>  1 Megabyte interner RAM; </li><li>  Anschl√ºsse f√ºr microSD-Karten und Audioausgang; </li><li>  4,3 ‚Äù480x272 kontrastreiches LCD-Panel mit resistivem Touchscreen; </li><li>  Unterst√ºtzung f√ºr Karten, die mit dem Kachelkarten-Editor erstellt wurden; </li><li>  PNG-Bild von microSD herunterladen; </li><li>  beschleunigte JPEG-Decodierung; </li><li>  Hardware-Hoch- / Querformat-Umschaltung; </li><li>  Unterst√ºtzung f√ºr Arduino, ESP8266 und Teensy 3.2; </li><li>  Online-Tools zur Vorbereitung von Grafiken, Audio, Schrift und Video; </li></ul><br></div></div><br>  James Bowman hat f√ºr sein Projekt eine Bibliothek mit vielen Beispielen ver√∂ffentlicht, die sofort funktionieren.  Die aktuelle Bibliothek, die ich gefunden habe, ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Programmieranleitung</a> (auf Englisch), in der alles ausf√ºhrlich beschrieben wird.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Viele n√ºtzliche Informationen</a> zum Installieren einer IDE usw. usw. <br><br><h3>  Programmierung </h3><br>  Als ich durch die Weiten des <s>Bolschoi-</s> Internet- <s>Theaters</s> wanderte, stie√ü ich auf ein interessantes Projekt f√ºr Arduino - das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">logische Spiel ‚ÄûColumns‚Äú</a> , das unter der √ºblichen preiswerten chinesischen Farbanzeige von 128 x 160 Pixel geschrieben wurde.  Ich wollte dieses Spiel wiederholen, aber auf meinem Board werde ich es FT810 (mit dem Namen der GPU) nennen, das zu diesem Zeitpunkt bereits in meinen H√§nden war.  Ich habe es bereits geschafft, das Programmierhandbuch und Beispiele aus der Bibliothek zu studieren, und meine H√§nde ‚Äûjuckten‚Äú nur vor dem Wunsch, etwas Eigenes zu schreiben.  Was ich sofort angefangen habe. <br><br>  Als erstes musste ich den Text auf dem Bildschirm anzeigen. <br><br>  Dank der integrierten Schriftarten ist die Textausgabe auf dem Bildschirm recht einfach.  Hier ist eine Demo-Skizze aus der Bibliothek (mit meinen Kommentaren): <br><br><div class="spoiler">  <b class="spoiler_title">Skizze helloworld.ino</b> <div class="spoiler_text"><pre><code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;EEPROM.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SPI.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;GD2.h&gt;</span></span></span><span class="hljs-meta"> void setup() { Serial.begin(1000000); //   ,    1000000  GD.begin(0); //  ,   . } void loop() { GD.ClearColorRGB(0x103000); //    . GD.Clear(); //   (   ) GD.cmd_text( //  ,  GD.w / 2, //     2 GD.h / 2, //     2 31, //   OPT_CENTER, // ,         . </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Hello world"</span></span></span><span class="hljs-meta">); //   GD.swap(); //         (   ). }</span></span></code> </pre>  Als Ergebnis erhalten wir hier einen so sch√∂nen Text: <br><img src="https://habrastorage.org/webt/em/jq/xi/emjqxiynb2wjckhowwkvltpta9c.png" alt="Bild"><br></div></div><br>  Als n√§chstes mussten geometrische Formen gezeichnet werden, zum Beispiel: Linien. <br>  Um Linien zu zeichnen, m√ºssen Sie Begin (LINES) oder Begin (LINE_STRIP) verwenden. <br>  LINES verbindet jedes Scheitelpunktpaar, w√§hrend LINE_STRIP alle Scheitelpunkte miteinander verbindet. <br><br>  Ich werde die folgende Demo-Skizze aus der Bibliothek geben (mit meinen Kommentaren): <br><br><div class="spoiler">  <b class="spoiler_title">Skizzieren Sie lines.ino</b> <div class="spoiler_text"><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;EEPROM.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SPI.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;GD2.h&gt;</span></span></span><span class="hljs-meta"> void setup() { Serial.begin(1000000); //   ,    1000000 . GD.begin(); //  ,   . } static void zigzag(int x) { GD.Vertex2ii(x - 10, 10); //     GD.Vertex2ii(x + 10, 60); //     () GD.Vertex2ii(x - 10, 110); GD.Vertex2ii(x + 10, 160); GD.Vertex2ii(x - 10, 210); GD.Vertex2ii(x + 10, 260); //     () } void loop() { GD.Clear(); //   (    - 0000000) GD.Begin(LINES); //     zigzag(140); //   zigzag   -   GD.Begin(LINE_STRIP); //     zigzag(240); GD.LineWidth(16 * 10); //        1/16 , .. 1/16 * 16 * 10 = 10  GD.Begin(LINE_STRIP); zigzag(340); GD.swap(); //         (   ). }</span></span></code> </pre> <br>  Linien auf dem Bildschirm: <br><br><img src="https://habrastorage.org/webt/zr/bp/_w/zrbp_ws6saudfdakxpv8tf2tvwc.png" alt="Bild"></div></div><br>  Fahren wir vom Strichzeichnen mit dem Zeichnen von Rechtecken fort. <br><br>  Verwenden Sie zum Zeichnen von Rechtecken Begin (RECTS) und legen Sie die gegen√ºberliegenden Ecken des Rechtecks ‚Äã‚Äãfest.  Die Reihenfolge der beiden Winkel spielt keine Rolle.  Rechtecke werden mit abgerundeten Ecken gezeichnet, wobei die Breite der aktuellen Linie als Radius der Ecke verwendet wird.  Abgerundete Ecken erstrecken sich √ºber die R√§nder des Rechtecks ‚Äã‚Äãhinaus. Wenn Sie also den Radius des Winkels vergr√∂√üern, erh√∂ht sich die Anzahl der Pixel.  In diesem Beispiel wird mit zunehmendem Eckenradius dreimal ein 420 √ó 20-Rechteck gezeichnet. <br><br><div class="spoiler">  <b class="spoiler_title">Skizzieren Sie rechtecke.ino</b> <div class="spoiler_text"><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;EEPROM.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SPI.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;GD2.h&gt;</span></span></span><span class="hljs-meta"> void setup() { Serial.begin(1000000); //   ,    1000000 . GD.begin(); //  ,   . } void loop() { GD.Clear(); //   (    - 0000000) GD.Begin(RECTS); //     GD.Vertex2ii(30, 30); //       GD.Vertex2ii(450, 50); //       GD.LineWidth(16 * 10); //         1/16 , .. 1/16 * 16 * 10 = 10  GD.Vertex2ii(30, 120); //       GD.Vertex2ii(450, 140); //       GD.LineWidth(16 * 20); //         1/16 , .. 1/16 * 16 * 20 = 20  GD.Vertex2ii(30, 220); //       GD.Vertex2ii(450, 230); //       GD.swap(); //         (   ) }</span></span></code> </pre> <br>  Ergebnis: <br><img src="https://habrastorage.org/webt/vg/qi/mc/vgqimcuhwc-jsiwqizewxsxlgf8.png" alt="Bild"><br></div></div><br>  Fahren wir mit dem Zeichnen eines Kreises fort - der Grundlage f√ºr zuk√ºnftige Touch-Schaltfl√§chen.  Kehren wir zum ersten Beispiel mit Text zur√ºck und f√ºgen Sie loop () einige Zeilen hinzu. <br><br><div class="spoiler">  <b class="spoiler_title">Skizze mit farbigen Kreisen</b> <div class="spoiler_text"><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;EEPROM.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SPI.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;GD2.h&gt;</span></span></span><span class="hljs-meta"> void setup() { Serial.begin(1000000); //   ,    1000000  GD.begin(0); //  ,   . } void loop() { GD.ClearColorRGB(0x103000); //    . GD.Clear(); //   (   ) GD.cmd_text( //  ,  GD.w / 2, //     2 GD.h / 2, //     2 31, //   OPT_CENTER, // ,          </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Hello world"</span></span></span><span class="hljs-meta">); //   GD.PointSize(16 * 30); //    ()    1/16 , .. 1/16 * 16 * 30 = 30  GD.Begin(POINTS); //     () GD.ColorRGB(0xff8000); //   orange GD.Vertex2ii(220, 100); //   ()   220,100 GD.ColorRGB(0x0080ff); //   teal GD.Vertex2ii(260, 170); //   ()   260,170 GD.swap(); //         (   ) }</span></span></code> </pre> <br>  Ergebnis: <br><br><img src="https://habrastorage.org/webt/gw/rz/ja/gwrzjak3bp7sqsywwd89rwj0-5w.png"><br></div></div><br>  Um mit Touch-Tasten arbeiten zu k√∂nnen, muss die Verarbeitung des Dr√ºckens des Touchscreens organisiert werden.  Dies geschieht wie folgt.  Ich werde das Prinzip kurz erl√§utern.  Jedes Pixel (Punkt) auf dem Bildschirm hat eine Farbe.  Es hat auch einen unsichtbaren Tag-Wert, der einem Punkt (oder einem ganzen Objekt wie Linie, Kreis, Rechteck usw.) zugewiesen und zum Erkennen von Ber√ºhrungen dieses Objekts verwendet werden kann.  Die folgende Skizze zeigt ein Beispiel f√ºr das Festlegen des Tag-Werts f√ºr farbige Kreise auf 100 und 101. <br><br><div class="spoiler">  <b class="spoiler_title">Touchscreen-Skizze</b> <div class="spoiler_text"><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;EEPROM.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SPI.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;GD2.h&gt;</span></span></span><span class="hljs-meta"> void setup() { Serial.begin(1000000); //   ,    1000000  GD.begin(0); //  ,   . } void loop() { GD.ClearColorRGB(0x103000); //    . GD.Clear(); //   (   ) GD.cmd_text( //  ,  GD.w / 2, //     2 GD.h / 2, //     2 31, //   OPT_CENTER, // ,          </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Hello world"</span></span></span><span class="hljs-meta">); //   GD.PointSize(16 * 30); //    ()    1/16 , .. 1/16 * 16 * 30 = 30  GD.Begin(POINTS); //     () GD.ColorRGB(0xff8000); //   orange GD.Tag(100); //       () GD.Vertex2ii(220, 100); //   ()   220,100 GD.ColorRGB(0x0080ff); //   teal GD.Tag(101); //       () GD.Vertex2ii(260, 170); //   ()   260,170 GD.swap(); //         (   ) GD.get_inputs(); //     if(GD.inputs.tag &gt; 0) //      Serial.println(GD.inputs.tag); //       ‚Äú‚Äù  }</span></span></code> </pre> <br>  Wenn das System erkennt, dass ein Kreis ber√ºhrt wird, meldet es seinen Sensorcode, in diesem Fall 100 oder 101. Wenn Sie im Fenster der seriellen Schnittstelle auf dem Bildschirm auf Objekte (farbige Kreise) klicken, werden die Werte der Tags angezeigt, die den gepressten Objekten entsprechen: <br><br><img src="https://habrastorage.org/webt/lh/q3/u_/lhq3u_jn8obrrcjy_kwke8m6gdw.png"><br></div></div><br>  Ich gab Beispiele f√ºr grundlegende Operationen, mit denen es bereits m√∂glich war, sicher mit der Erstellung des Spiels fortzufahren.  Nat√ºrlich wurde das Spiel nicht von Grund auf neu erstellt, aber die Basis war ein vorgefertigter Arbeitscode, der angepasst wurde (unter Beibehaltung der Grafiken), sodass die Originalversion des Spiels dem Original sehr √§hnlich war. <br><br>  Die erste Version des Spiels: <br><br><img src="https://habrastorage.org/webt/3f/no/xg/3fnoxgf8auqkkotrp1lgtjqk6kq.jpeg"><br><br>  Nachdem ich einige Tage gespielt hatte, wollte ich etwas am Design √§ndern, zum Beispiel einen anderen, ungew√∂hnlichen anstelle eines wei√üen Hintergrunds.  Und dann erinnerte ich mich an ein Beispiel aus der Bibliothek, in dem der Sternenhimmel im Hintergrund blitzte: <br><br><div class="spoiler">  <b class="spoiler_title">Slot Sketch slotgag.ino</b> <div class="spoiler_text"><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;EEPROM.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SPI.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;GD2.h&gt;</span></span></span><span class="hljs-meta"> #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"slotgag_assets.h"</span></span></span><span class="hljs-meta"> //      void setup() { Serial.begin(1000000); GD.begin(); LOAD_ASSETS(); //     } void loop() { GD.Clear(); //   ( ,     ) GD.ColorMask(1, 1, 1, 0); //        R, G, B,   GD.Begin(BITMAPS); //      GD.BitmapHandle(BACKGROUND_HANDLE); //   - GD.BitmapSize(NEAREST, REPEAT, REPEAT, 480, 272); //        GD.Vertex2ii(0, 0, BACKGROUND_HANDLE); //      0,0 GD.ColorMask(1, 1, 1, 1); GD.ColorRGB(0xa0a0a0); GD.Vertex2ii(240 - GAMEDUINO_WIDTH / 2, 136 - GAMEDUINO_HEIGHT / 2, GAMEDUINO_HANDLE); static int x = 0; GD.LineWidth(20 * 16); GD.BlendFunc(DST_ALPHA, ONE); GD.Begin(LINES); GD.Vertex2ii(x, 0); GD.Vertex2ii(x + 100, 272); x = (x + 20) % 480; //' }a GD.swap(); }</span></span></code> </pre> <br>  Ansicht: <br><br><img src="https://habrastorage.org/webt/x-/es/y4/x-esy4aropwlyqh0bvl75jf1qpg.png"><br><br>  Um nicht in die Wildnis einzutauchen, habe ich nicht den gesamten Code kommentiert, sondern nur die erforderlichen Codezeilen, die ich in meine Arbeitsskizze kopiert habe. </div></div><br>  Um ein Bild des Sternenhimmels als Hintergrund hinzuzuf√ºgen, musste ich Folgendes tun: √Ñndern Sie zun√§chst die schwarze Farbe der Linien und des Texts in Wei√ü (so dass sie auf einem schwarzen Hintergrund sichtbar sind), schreiben Sie die Datei slotgag.gd2 auf die Micro-SD-Karte, auf der das Bild gespeichert ist. F√ºgen Sie slotgag_assets.h zum Projektordner hinzu und f√ºgen Sie der Skizze die erforderlichen 8 Codezeilen hinzu. <br><br>  Als Ergebnis erhielt das Spiel diese Form: <br><br><img src="https://habrastorage.org/webt/2t/hh/qo/2thhqo_apc-nidsqbcuudt98bwe.jpeg"><br><br>  Und was ist ein Spiel ohne Sounddesign?  Es bleiben Soundeffekte hinzuzuf√ºgen, zumal sie in guter Qualit√§t und Vielfalt pr√§sentiert werden. <br><br>  Gameduino 2/3 verf√ºgt √ºber zwei Soundsysteme.  Der erste - ein Synthesizer - kann eine Reihe von festen Kl√§ngen und Noten erzeugen.  Ein Synthesizer ist n√ºtzlich, um einem Projekt schnell Sound hinzuzuf√ºgen. Da der Soundsatz jedoch festgelegt ist, ist er nicht sehr flexibel.  Die zweite ist die Probenreproduktion.  Es gibt gesampelten Sound aus dem Hauptspeicher in verschiedenen Formaten wieder.  Dieses System ist viel flexibler, aber Sie m√ºssen Samples vorbereiten und in den RAM laden. <br><br>  Ich habe einen festen Soundsynthesizer verwendet.  Der Synthesizer bietet mehrere kurze Percussion-Sounds, haupts√§chlich zur Verwendung in Benutzeroberfl√§chen.  Um einen Sound abzuspielen, m√ºssen Sie GD.play () mit einer Soundkennung aufrufen.  Vollst√§ndige Liste der verf√ºgbaren Sounds: <br><br>  Klicken Sie auf <br>  SCHALTER <br>  Kuhglocke <br>  NOTCH <br>  Hihat <br>  Kickdrum <br>  Pop <br>  Klack <br>  CHACK <br><br><h3>  Zusammenfassung </h3><br>  Das Ergebnis war eine solche Skizze: <br><br><div class="spoiler">  <b class="spoiler_title">Sketch Columns.ino</b> <div class="spoiler_text"><pre> <code class="hljs lua">#include &lt;SPI.h&gt; #include &lt;GD2.h&gt; #include &lt;avr/eeprom.h&gt; #include <span class="hljs-string"><span class="hljs-string">"slotgag_assets.h"</span></span> #define TAG_BUTTON_LEFT <span class="hljs-number"><span class="hljs-number">201</span></span> #define TAG_BUTTON_RIGHT <span class="hljs-number"><span class="hljs-number">202</span></span> #define TAG_BUTTON_ROT <span class="hljs-number"><span class="hljs-number">203</span></span> #define TAG_BUTTON_DROP <span class="hljs-number"><span class="hljs-number">204</span></span> #define X_BUTTON_LEFT <span class="hljs-number"><span class="hljs-number">50</span></span> #define Y_BUTTON_LEFT <span class="hljs-number"><span class="hljs-number">222</span></span> #define X_BUTTON_RIGHT <span class="hljs-number"><span class="hljs-number">430</span></span> #define Y_BUTTON_RIGHT <span class="hljs-number"><span class="hljs-number">222</span></span> #define X_BUTTON_ROT <span class="hljs-number"><span class="hljs-number">430</span></span> #define Y_BUTTON_ROT <span class="hljs-number"><span class="hljs-number">50</span></span> #define X_BUTTON_DROP <span class="hljs-number"><span class="hljs-number">50</span></span> #define Y_BUTTON_DROP <span class="hljs-number"><span class="hljs-number">50</span></span> // Color definitions #define BLACK <span class="hljs-number"><span class="hljs-number">0x000000</span></span> #define RED <span class="hljs-number"><span class="hljs-number">0xFF0000</span></span> #define GREEN <span class="hljs-number"><span class="hljs-number">0x00FF00</span></span> #define BLUE <span class="hljs-number"><span class="hljs-number">0x0000FF</span></span> #define YELLOW <span class="hljs-number"><span class="hljs-number">0xFFFF00</span></span> #define MAGENTA <span class="hljs-number"><span class="hljs-number">0xFF00FF</span></span> #define CYAN <span class="hljs-number"><span class="hljs-number">0x00FFFF</span></span> #define WHITE <span class="hljs-number"><span class="hljs-number">0xFFFFFF</span></span> #define DISPLAY_MAX_X <span class="hljs-number"><span class="hljs-number">480</span></span> #define DISPLAY_MAX_Y <span class="hljs-number"><span class="hljs-number">272</span></span> #define MaxX <span class="hljs-number"><span class="hljs-number">8</span></span> #define MaxY <span class="hljs-number"><span class="hljs-number">17</span></span> #define SmeX <span class="hljs-number"><span class="hljs-number">3</span></span> #define SmeY <span class="hljs-number"><span class="hljs-number">3</span></span> #define razmer <span class="hljs-number"><span class="hljs-number">18</span></span> #define NumCol <span class="hljs-number"><span class="hljs-number">6</span></span> #define MaxLevel <span class="hljs-number"><span class="hljs-number">8</span></span> #define NextLevel <span class="hljs-number"><span class="hljs-number">80</span></span> #define DISP_LEFT ((DISPLAY_MAX_X - MaxX*razmer)/<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">2</span></span>) #define DISP_RIGHT ((DISPLAY_MAX_X + MaxX*razmer)/<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span>) #define DISP_TOP ((DISPLAY_MAX_Y - (MaxY<span class="hljs-number"><span class="hljs-number">-4</span></span>)*razmer)/<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">2</span></span>) #define DISP_BOT ((DISPLAY_MAX_Y + (MaxY<span class="hljs-number"><span class="hljs-number">-4</span></span>)*razmer)/<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span>) uint8_t MasSt[MaxX][MaxY], MasTmp[MaxX][MaxY], fignext[<span class="hljs-number"><span class="hljs-number">3</span></span>]; uint8_t Level=<span class="hljs-number"><span class="hljs-number">1</span></span>, dx, dy, tr, flfirst=<span class="hljs-number"><span class="hljs-number">1</span></span>; uint32_t MasCol[]={WHITE, BLACK, RED, BLUE, GREEN, YELLOW, MAGENTA, CYAN}; unsigned long Counter, Score=<span class="hljs-number"><span class="hljs-number">0</span></span>, TScore=<span class="hljs-number"><span class="hljs-number">0</span></span>, Record=<span class="hljs-number"><span class="hljs-number">0</span></span>, myrecord; uint16_t tempspeed = <span class="hljs-number"><span class="hljs-number">1000</span></span>; bool fl, Demo=<span class="hljs-literal"><span class="hljs-literal">true</span></span>, Arbeiten=<span class="hljs-literal"><span class="hljs-literal">false</span></span>, FlZ=<span class="hljs-literal"><span class="hljs-literal">false</span></span>; int8_t x,y; int8_t mmm [<span class="hljs-number"><span class="hljs-number">4</span></span>][<span class="hljs-number"><span class="hljs-number">2</span></span>]={{<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">-1</span></span>},{<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>}}; uint16_t MasSpeed[MaxLevel]={<span class="hljs-number"><span class="hljs-number">500</span></span>,<span class="hljs-number"><span class="hljs-number">450</span></span>,<span class="hljs-number"><span class="hljs-number">400</span></span>,<span class="hljs-number"><span class="hljs-number">350</span></span>,<span class="hljs-number"><span class="hljs-number">300</span></span>,<span class="hljs-number"><span class="hljs-number">250</span></span>,<span class="hljs-number"><span class="hljs-number">200</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>}; uint8_t state_game = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long time_count; <span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> prevkey; uint32_t btn_color = <span class="hljs-number"><span class="hljs-number">0xff0000</span></span>; /****************************************************************************************************************/ void setup(void) { Serial.begin(<span class="hljs-number"><span class="hljs-number">1000000</span></span>); Serial.println(<span class="hljs-string"><span class="hljs-string">"Columns"</span></span>); GD.begin(); LOAD_ASSETS(); GD.BitmapHandle(BACKGROUND_HANDLE); GD.BitmapSize(NEAREST, REPEAT, REPEAT, <span class="hljs-number"><span class="hljs-number">480</span></span>, <span class="hljs-number"><span class="hljs-number">272</span></span>); randomSeed(analogRead(<span class="hljs-number"><span class="hljs-number">5</span></span>)); myrecord = eeprom_read_byte((unsigned <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> *)<span class="hljs-number"><span class="hljs-number">1</span></span>); time_count = millis() + <span class="hljs-number"><span class="hljs-number">1000</span></span>; } static struct { <span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> t, note; } pacman[] = { { <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">71</span></span> }, { <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">83</span></span> }, { <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">78</span></span> }, { <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">75</span></span> }, { <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">83</span></span> }, { <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">78</span></span> }, { <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">75</span></span> }, { <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">72</span></span> }, { <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">84</span></span> }, { <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">79</span></span> }, { <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">76</span></span> }, { <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">84</span></span> }, { <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-number"><span class="hljs-number">79</span></span> }, { <span class="hljs-number"><span class="hljs-number">28</span></span>, <span class="hljs-number"><span class="hljs-number">76</span></span> }, { <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">71</span></span> }, { <span class="hljs-number"><span class="hljs-number">34</span></span>, <span class="hljs-number"><span class="hljs-number">83</span></span> }, { <span class="hljs-number"><span class="hljs-number">36</span></span>, <span class="hljs-number"><span class="hljs-number">78</span></span> }, { <span class="hljs-number"><span class="hljs-number">38</span></span>, <span class="hljs-number"><span class="hljs-number">75</span></span> }, { <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">83</span></span> }, { <span class="hljs-number"><span class="hljs-number">41</span></span>, <span class="hljs-number"><span class="hljs-number">78</span></span> }, { <span class="hljs-number"><span class="hljs-number">44</span></span>, <span class="hljs-number"><span class="hljs-number">75</span></span> }, { <span class="hljs-number"><span class="hljs-number">48</span></span>, <span class="hljs-number"><span class="hljs-number">75</span></span> }, { <span class="hljs-number"><span class="hljs-number">49</span></span>, <span class="hljs-number"><span class="hljs-number">76</span></span> }, { <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">77</span></span> }, { <span class="hljs-number"><span class="hljs-number">52</span></span>, <span class="hljs-number"><span class="hljs-number">77</span></span> }, { <span class="hljs-number"><span class="hljs-number">53</span></span>, <span class="hljs-number"><span class="hljs-number">78</span></span> }, { <span class="hljs-number"><span class="hljs-number">54</span></span>, <span class="hljs-number"><span class="hljs-number">79</span></span> }, { <span class="hljs-number"><span class="hljs-number">56</span></span>, <span class="hljs-number"><span class="hljs-number">79</span></span> }, { <span class="hljs-number"><span class="hljs-number">57</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span> }, { <span class="hljs-number"><span class="hljs-number">58</span></span>, <span class="hljs-number"><span class="hljs-number">81</span></span> }, { <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">83</span></span> }, { <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span> } }; //================================================== void loop(void) { GD.get_inputs(); <span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> key = GD.inputs.tag; int8_t VAL = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prevkey == <span class="hljs-number"><span class="hljs-number">0x00</span></span>) { switch (key) { case TAG_BUTTON_LEFT: VAL = <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; case TAG_BUTTON_RIGHT: VAL = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; case TAG_BUTTON_ROT: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!FlZ) { GD.play(HIHAT); <span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> aa=MasSt[x][y]; MasSt[x][y]=MasSt[x][y+<span class="hljs-number"><span class="hljs-number">2</span></span>]; MasSt[x][y+<span class="hljs-number"><span class="hljs-number">2</span></span>]=MasSt[x][y+<span class="hljs-number"><span class="hljs-number">1</span></span>]; MasSt[x][y+<span class="hljs-number"><span class="hljs-number">1</span></span>]=aa; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; case TAG_BUTTON_DROP: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Arbeiten) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!FlZ) { tempspeed=<span class="hljs-number"><span class="hljs-number">50</span></span>; GD.play(NOTCH); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { GD.play(CLICK); Demo=<span class="hljs-literal"><span class="hljs-literal">false</span></span>; NewGame(); } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } prevkey = key; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (VAL!=<span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; fig_shift(VAL) &amp;&amp; !FlZ) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">3</span></span>;i++) { MasSt[x+VAL][y+i]=MasSt[x][y+i]; MasSt[x][y+i]=<span class="hljs-number"><span class="hljs-number">0</span></span>; } x=x+VAL; } ProcGame(); ViewStacan(); GD.swap(); } //================================================== // redraw one square void ViewQuad(<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> i,<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> j,<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> mycolor) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (j&lt;<span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; uint16_t wy=DISP_TOP + SmeY+(j<span class="hljs-number"><span class="hljs-number">-3</span></span>)*razmer-j; uint16_t wx=DISP_LEFT + SmeX+i*razmer-i; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mycolor!=<span class="hljs-number"><span class="hljs-number">0</span></span>) { GD.LineWidth(<span class="hljs-number"><span class="hljs-number">16</span></span>*<span class="hljs-number"><span class="hljs-number">1</span></span>); GD.ColorRGB(WHITE); GD.Begin(LINE_STRIP); GD.Vertex2ii(wx,wy); GD.Vertex2ii(wx + razmer<span class="hljs-number"><span class="hljs-number">-1</span></span>,wy); GD.Vertex2ii(wx + razmer<span class="hljs-number"><span class="hljs-number">-1</span></span>,wy + razmer<span class="hljs-number"><span class="hljs-number">-1</span></span>); GD.Vertex2ii(wx,wy + razmer<span class="hljs-number"><span class="hljs-number">-1</span></span>); GD.Vertex2ii(wx,wy); GD.Begin(RECTS); GD.ColorRGB(MasCol[mycolor]); GD.Vertex2ii(wx+<span class="hljs-number"><span class="hljs-number">1</span></span>, wy+<span class="hljs-number"><span class="hljs-number">1</span></span>); GD.Vertex2ii(wx+<span class="hljs-number"><span class="hljs-number">1</span></span> + razmer<span class="hljs-number"><span class="hljs-number">-2</span></span> - <span class="hljs-number"><span class="hljs-number">1</span></span>, wy+<span class="hljs-number"><span class="hljs-number">1</span></span> + razmer<span class="hljs-number"><span class="hljs-number">-2</span></span> - <span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { } } //================================================== void ViewStacan(void) { <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> myStr2[<span class="hljs-number"><span class="hljs-number">5</span></span>]; // Draw background fone GD.Clear(); GD.ColorMask(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); GD.Begin(BITMAPS); GD.BitmapHandle(BACKGROUND_HANDLE); GD.BitmapSize(NEAREST, REPEAT, REPEAT, <span class="hljs-number"><span class="hljs-number">480</span></span>, <span class="hljs-number"><span class="hljs-number">272</span></span>); GD.Vertex2ii(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, BACKGROUND_HANDLE); // Print text GD.ColorRGB(WHITE); GD.cmd_text(DISP_LEFT - <span class="hljs-number"><span class="hljs-number">30</span></span>, DISP_TOP + <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span>, OPT_CENTER, <span class="hljs-string"><span class="hljs-string">"LEVEL"</span></span>); GD.cmd_text(DISP_RIGHT + <span class="hljs-number"><span class="hljs-number">30</span></span>, DISP_TOP + <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span>, OPT_CENTER, <span class="hljs-string"><span class="hljs-string">"NEXT"</span></span>); GD.cmd_text(DISP_RIGHT + <span class="hljs-number"><span class="hljs-number">30</span></span>, DISP_TOP + <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span>, OPT_CENTER, <span class="hljs-string"><span class="hljs-string">"SCORE"</span></span>); GD.cmd_text(DISP_LEFT - <span class="hljs-number"><span class="hljs-number">30</span></span>, DISP_TOP + <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span>, OPT_CENTER, <span class="hljs-string"><span class="hljs-string">"TOP"</span></span>); // Print digit Score GD.ColorRGB(RED); sprintf(myStr2,<span class="hljs-string"><span class="hljs-string">"%05d"</span></span>,Score ); GD.cmd_text(DISP_RIGHT + <span class="hljs-number"><span class="hljs-number">30</span></span>, DISP_TOP + <span class="hljs-number"><span class="hljs-number">130</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span>, OPT_CENTER, myStr2); // Print digit Top sprintf(myStr2,<span class="hljs-string"><span class="hljs-string">"%05d"</span></span>,myrecord ); GD.cmd_text(DISP_LEFT - <span class="hljs-number"><span class="hljs-number">30</span></span>, DISP_TOP + <span class="hljs-number"><span class="hljs-number">130</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span>, OPT_CENTER, myStr2); // Print digit Level sprintf(myStr2,<span class="hljs-string"><span class="hljs-string">"%02d"</span></span>,Level ); GD.cmd_text(DISP_LEFT - <span class="hljs-number"><span class="hljs-number">30</span></span>, DISP_TOP + <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">31</span></span>, OPT_CENTER, myStr2); // Draw color squares <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> j=<span class="hljs-number"><span class="hljs-number">3</span></span>;j&lt;MaxY;j++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;MaxX;i++) ViewQuad(i,j,MasSt[i][j]); // Draw Next Figure <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">3</span></span>;i++) { GD.ColorRGB(WHITE); GD.Begin(LINE_STRIP); GD.LineWidth(<span class="hljs-number"><span class="hljs-number">16</span></span>*<span class="hljs-number"><span class="hljs-number">1</span></span>); GD.Vertex2ii(DISP_RIGHT + <span class="hljs-number"><span class="hljs-number">15</span></span>, DISP_TOP + <span class="hljs-number"><span class="hljs-number">20</span></span> + razmer*ii); GD.Vertex2ii(DISP_RIGHT + <span class="hljs-number"><span class="hljs-number">15</span></span> + razmer<span class="hljs-number"><span class="hljs-number">-1</span></span>, DISP_TOP + <span class="hljs-number"><span class="hljs-number">20</span></span> + razmer*ii); GD.Vertex2ii(DISP_RIGHT + <span class="hljs-number"><span class="hljs-number">15</span></span> + razmer<span class="hljs-number"><span class="hljs-number">-1</span></span>, DISP_TOP + <span class="hljs-number"><span class="hljs-number">20</span></span> + razmer*ii + razmer<span class="hljs-number"><span class="hljs-number">-1</span></span>); GD.Vertex2ii(DISP_RIGHT + <span class="hljs-number"><span class="hljs-number">15</span></span>, DISP_TOP + <span class="hljs-number"><span class="hljs-number">20</span></span> + razmer*ii + razmer<span class="hljs-number"><span class="hljs-number">-1</span></span>); GD.Vertex2ii(DISP_RIGHT + <span class="hljs-number"><span class="hljs-number">15</span></span>, DISP_TOP + <span class="hljs-number"><span class="hljs-number">20</span></span> + razmer*ii); GD.Begin(RECTS); GD.ColorRGB(MasCol[fignext[i]]); GD.Vertex2ii(DISP_RIGHT+<span class="hljs-number"><span class="hljs-number">15</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>, DISP_TOP+<span class="hljs-number"><span class="hljs-number">20</span></span>+razmer*i-i+<span class="hljs-number"><span class="hljs-number">1</span></span>); GD.Vertex2ii(DISP_RIGHT+<span class="hljs-number"><span class="hljs-number">15</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>+razmer<span class="hljs-number"><span class="hljs-number">-2</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>, DISP_TOP+<span class="hljs-number"><span class="hljs-number">20</span></span>+razmer*i-i+<span class="hljs-number"><span class="hljs-number">1</span></span>+razmer<span class="hljs-number"><span class="hljs-number">-2</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>); } // Draw <span class="hljs-string"><span class="hljs-string">"stacan"</span></span> GD.ColorRGB(WHITE); GD.Begin(LINE_STRIP); GD.LineWidth(<span class="hljs-number"><span class="hljs-number">16</span></span>*<span class="hljs-number"><span class="hljs-number">1</span></span>); GD.Vertex2ii(DISP_LEFT + <span class="hljs-number"><span class="hljs-number">1</span></span>, DISP_TOP); GD.Vertex2ii(DISP_LEFT + <span class="hljs-number"><span class="hljs-number">1</span></span>, DISP_BOT); GD.Vertex2ii(DISP_LEFT + <span class="hljs-number"><span class="hljs-number">1</span></span> + razmer*MaxX+<span class="hljs-number"><span class="hljs-number">5</span></span>-MaxX - <span class="hljs-number"><span class="hljs-number">1</span></span>, DISP_BOT); GD.Vertex2ii(DISP_LEFT + <span class="hljs-number"><span class="hljs-number">1</span></span> + razmer*MaxX+<span class="hljs-number"><span class="hljs-number">5</span></span>-MaxX - <span class="hljs-number"><span class="hljs-number">1</span></span>, DISP_TOP); // Draw <span class="hljs-number"><span class="hljs-number">9</span></span> vertical <span class="hljs-built_in"><span class="hljs-built_in">lines</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">9</span></span>; i++) { GD.ColorRGB(WHITE); GD.Begin(LINE_STRIP); GD.LineWidth(<span class="hljs-number"><span class="hljs-number">16</span></span>*<span class="hljs-number"><span class="hljs-number">1</span></span>); GD.Vertex2ii(DISP_LEFT + <span class="hljs-number"><span class="hljs-number">3</span></span> + razmer*ii, DISP_TOP); GD.Vertex2ii(DISP_LEFT + <span class="hljs-number"><span class="hljs-number">3</span></span> + razmer*ii, DISP_BOT - <span class="hljs-number"><span class="hljs-number">2</span></span>); } // Draw <span class="hljs-number"><span class="hljs-number">1</span></span> horizontal line GD.ColorRGB(WHITE); GD.Begin(LINE_STRIP); GD.Vertex2ii(DISP_LEFT + <span class="hljs-number"><span class="hljs-number">3</span></span>, DISP_BOT - <span class="hljs-number"><span class="hljs-number">2</span></span>); GD.Vertex2ii(DISP_LEFT + <span class="hljs-number"><span class="hljs-number">3</span></span> + razmer*MaxX-MaxX - <span class="hljs-number"><span class="hljs-number">1</span></span>, DISP_BOT - <span class="hljs-number"><span class="hljs-number">2</span></span>); // Draw <span class="hljs-string"><span class="hljs-string">"Game Over"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Demo &amp;&amp; !Arbeiten) { GD.Begin(RECTS); GD.ColorRGB(WHITE); GD.Vertex2ii((DISP_LEFT + DISP_RIGHT)/<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">60</span></span>, (DISP_TOP + DISP_BOT)/<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">40</span></span>); GD.Vertex2ii((DISP_LEFT + DISP_RIGHT)/<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">60</span></span>, (DISP_TOP + DISP_BOT)/<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">40</span></span>); GD.ColorRGB(BLACK); GD.Vertex2ii((DISP_LEFT + DISP_RIGHT)/<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">58</span></span>, (DISP_TOP + DISP_BOT)/<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">38</span></span>); GD.Vertex2ii((DISP_LEFT + DISP_RIGHT)/<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">58</span></span>, (DISP_TOP + DISP_BOT)/<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">38</span></span>); GD.ColorRGB(RED); GD.cmd_text((DISP_LEFT + DISP_RIGHT)/<span class="hljs-number"><span class="hljs-number">2</span></span>, (DISP_TOP + DISP_BOT)/<span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, OPT_CENTER, <span class="hljs-string"><span class="hljs-string">"GAME"</span></span>); GD.cmd_text((DISP_LEFT + DISP_RIGHT)/<span class="hljs-number"><span class="hljs-number">2</span></span>, (DISP_TOP + DISP_BOT)/<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, OPT_CENTER, <span class="hljs-string"><span class="hljs-string">"OVER"</span></span>); } // Draw Buttons GD.Begin(POINTS); GD.PointSize(<span class="hljs-number"><span class="hljs-number">16</span></span>*<span class="hljs-number"><span class="hljs-number">50</span></span>); // Set size of buttons (<span class="hljs-number"><span class="hljs-number">50</span></span> pix) GD.ColorRGB(btn_color); // Set fone color of buttons GD.Tag(TAG_BUTTON_LEFT); // Set TAG <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> BUTTON_LEFT GD.Vertex2ii( X_BUTTON_LEFT, Y_BUTTON_LEFT); // Place BUTTON1 GD.Tag(TAG_BUTTON_RIGHT); // Set TAG <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> BUTTON_RIGHT GD.Vertex2ii(X_BUTTON_RIGHT, Y_BUTTON_RIGHT); // Place BUTTON2 GD.Tag(TAG_BUTTON_ROT); // Set TAG <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> BUTTON_ROT GD.Vertex2ii( X_BUTTON_ROT, Y_BUTTON_ROT); // Place BUTTON3 GD.Tag(TAG_BUTTON_DROP); // Set TAG <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> BUTTON_DROP GD.Vertex2ii(X_BUTTON_DROP, Y_BUTTON_DROP); // Place BUTTON4 // Draw figures <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> buttons circles GD.Tag(<span class="hljs-number"><span class="hljs-number">255</span></span>); GD.ColorRGB(<span class="hljs-number"><span class="hljs-number">0xffff00</span></span>); GD.LineWidth(<span class="hljs-number"><span class="hljs-number">16</span></span>*<span class="hljs-number"><span class="hljs-number">2</span></span>); GD.Begin(LINE_STRIP); GD.Vertex2ii(X_BUTTON_LEFT + <span class="hljs-number"><span class="hljs-number">30</span></span>, Y_BUTTON_LEFT - <span class="hljs-number"><span class="hljs-number">20</span></span>); GD.Vertex2ii(X_BUTTON_LEFT, Y_BUTTON_LEFT - <span class="hljs-number"><span class="hljs-number">20</span></span>); GD.Vertex2ii(X_BUTTON_LEFT, Y_BUTTON_LEFT - <span class="hljs-number"><span class="hljs-number">40</span></span>); GD.Vertex2ii(X_BUTTON_LEFT - <span class="hljs-number"><span class="hljs-number">40</span></span>, Y_BUTTON_LEFT); GD.Vertex2ii(X_BUTTON_LEFT, Y_BUTTON_LEFT + <span class="hljs-number"><span class="hljs-number">40</span></span>); GD.Vertex2ii(X_BUTTON_LEFT, Y_BUTTON_LEFT + <span class="hljs-number"><span class="hljs-number">20</span></span>); GD.Vertex2ii(X_BUTTON_LEFT + <span class="hljs-number"><span class="hljs-number">30</span></span>, Y_BUTTON_LEFT + <span class="hljs-number"><span class="hljs-number">20</span></span>); GD.Vertex2ii(X_BUTTON_LEFT + <span class="hljs-number"><span class="hljs-number">30</span></span>, Y_BUTTON_LEFT - <span class="hljs-number"><span class="hljs-number">20</span></span>); GD.Begin(LINE_STRIP); GD.Vertex2ii(X_BUTTON_RIGHT - <span class="hljs-number"><span class="hljs-number">30</span></span>, Y_BUTTON_RIGHT - <span class="hljs-number"><span class="hljs-number">20</span></span>); GD.Vertex2ii(X_BUTTON_RIGHT, Y_BUTTON_RIGHT - <span class="hljs-number"><span class="hljs-number">20</span></span>); GD.Vertex2ii(X_BUTTON_RIGHT, Y_BUTTON_RIGHT - <span class="hljs-number"><span class="hljs-number">40</span></span>); GD.Vertex2ii(X_BUTTON_RIGHT + <span class="hljs-number"><span class="hljs-number">40</span></span>, Y_BUTTON_RIGHT); GD.Vertex2ii(X_BUTTON_RIGHT, Y_BUTTON_RIGHT + <span class="hljs-number"><span class="hljs-number">40</span></span>); GD.Vertex2ii(X_BUTTON_RIGHT, Y_BUTTON_RIGHT + <span class="hljs-number"><span class="hljs-number">20</span></span>); GD.Vertex2ii(X_BUTTON_RIGHT - <span class="hljs-number"><span class="hljs-number">30</span></span>, Y_BUTTON_RIGHT + <span class="hljs-number"><span class="hljs-number">20</span></span>); GD.Vertex2ii(X_BUTTON_RIGHT - <span class="hljs-number"><span class="hljs-number">30</span></span>, Y_BUTTON_RIGHT - <span class="hljs-number"><span class="hljs-number">20</span></span>); GD.Begin(LINE_STRIP); GD.Vertex2ii(X_BUTTON_ROT - <span class="hljs-number"><span class="hljs-number">40</span></span>, Y_BUTTON_ROT); GD.Vertex2ii(X_BUTTON_ROT, Y_BUTTON_ROT - <span class="hljs-number"><span class="hljs-number">40</span></span>); GD.Vertex2ii(X_BUTTON_ROT + <span class="hljs-number"><span class="hljs-number">40</span></span>, Y_BUTTON_ROT); GD.Vertex2ii(X_BUTTON_ROT, Y_BUTTON_ROT + <span class="hljs-number"><span class="hljs-number">40</span></span>); GD.Vertex2ii(X_BUTTON_ROT - <span class="hljs-number"><span class="hljs-number">40</span></span>, Y_BUTTON_ROT); GD.Begin(LINE_STRIP); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Arbeiten) { GD.Vertex2ii(X_BUTTON_DROP - <span class="hljs-number"><span class="hljs-number">40</span></span>, Y_BUTTON_DROP - <span class="hljs-number"><span class="hljs-number">10</span></span>); GD.Vertex2ii(X_BUTTON_DROP + <span class="hljs-number"><span class="hljs-number">40</span></span>, Y_BUTTON_DROP - <span class="hljs-number"><span class="hljs-number">10</span></span>); GD.Vertex2ii(X_BUTTON_DROP, Y_BUTTON_DROP + <span class="hljs-number"><span class="hljs-number">30</span></span>); GD.Vertex2ii(X_BUTTON_DROP - <span class="hljs-number"><span class="hljs-number">40</span></span>, Y_BUTTON_DROP - <span class="hljs-number"><span class="hljs-number">10</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { GD.Vertex2ii(X_BUTTON_DROP - <span class="hljs-number"><span class="hljs-number">10</span></span>, Y_BUTTON_DROP - <span class="hljs-number"><span class="hljs-number">40</span></span>); GD.Vertex2ii(X_BUTTON_DROP + <span class="hljs-number"><span class="hljs-number">30</span></span>, Y_BUTTON_DROP); GD.Vertex2ii(X_BUTTON_DROP - <span class="hljs-number"><span class="hljs-number">10</span></span>, Y_BUTTON_DROP + <span class="hljs-number"><span class="hljs-number">40</span></span>); GD.Vertex2ii(X_BUTTON_DROP - <span class="hljs-number"><span class="hljs-number">10</span></span>, Y_BUTTON_DROP - <span class="hljs-number"><span class="hljs-number">40</span></span>); } } //================================================== void ClearMas(<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> MasStx[MaxX][MaxY]) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> j=<span class="hljs-number"><span class="hljs-number">0</span></span>;j&lt;MaxY;j++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;MaxX;i++) MasStx[i][j]=<span class="hljs-number"><span class="hljs-number">0</span></span>; } //================================================== void Sosed(int i,int j,int dx,int dy, <span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> mode) { int nx=i+dx; int ny=j+dy; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nx&gt;=<span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; ny&gt;=<span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; nx&lt;MaxX &amp;&amp; ny&lt;MaxY &amp;&amp; MasSt[nx][ny]==MasSt[i][j]) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mode==<span class="hljs-number"><span class="hljs-number">1</span></span>) MasTmp[i][j]++; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mode==<span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; (MasTmp[nx][ny]&gt;<span class="hljs-number"><span class="hljs-number">1</span></span> || MasTmp[i][j]&gt;<span class="hljs-number"><span class="hljs-number">2</span></span> )) { MasTmp[nx][ny]=<span class="hljs-number"><span class="hljs-number">3</span></span>; MasTmp[i][j]=<span class="hljs-number"><span class="hljs-number">3</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mode==<span class="hljs-number"><span class="hljs-number">3</span></span> &amp;&amp; MasTmp[nx][ny]==<span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (MasTmp[i][j]!=<span class="hljs-number"><span class="hljs-number">3</span></span>) { MasTmp[i][j]=<span class="hljs-number"><span class="hljs-number">3</span></span>; fl=<span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } } } } //================================================== void Sos(int i,int j, <span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> mode) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> k=<span class="hljs-number"><span class="hljs-number">0</span></span>;k&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>;k++) Sosed(i,j,mmm[k][<span class="hljs-number"><span class="hljs-number">0</span></span>],mmm[k][<span class="hljs-number"><span class="hljs-number">1</span></span>],mode); } //================================================== // <span class="hljs-built_in"><span class="hljs-built_in">create</span></span> <span class="hljs-built_in"><span class="hljs-built_in">next</span></span> figure void GetNext(void) { x=<span class="hljs-number"><span class="hljs-number">3</span></span>; y=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">3</span></span>;i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Demo) MasSt[x][i]=fignext[i]; fignext[i]=<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>(NumCol)+<span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Demo) { Counter++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Counter==NextLevel) { Counter=<span class="hljs-number"><span class="hljs-number">0</span></span>; Level++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Level&gt;MaxLevel) Level=MaxLevel; } tempspeed=MasSpeed[Level<span class="hljs-number"><span class="hljs-number">-1</span></span>]; } } //================================================== // <span class="hljs-built_in"><span class="hljs-built_in">find</span></span> onecolor elements bool FindFull(void) { <span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> i,j,k; bool res; res=<span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> k=<span class="hljs-number"><span class="hljs-number">2</span></span>;k&lt;<span class="hljs-number"><span class="hljs-number">8</span></span>;k++) { // by every color ClearMas(MasTmp); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (j=<span class="hljs-number"><span class="hljs-number">3</span></span>;j&lt;MaxY;j++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;MaxX;i++) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (MasSt[i][j]==k) Sos(i,j,<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (j=<span class="hljs-number"><span class="hljs-number">3</span></span>;j&lt;MaxY;j++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;MaxX;i++) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (MasTmp[i][j]&gt;<span class="hljs-number"><span class="hljs-number">1</span></span>) Sos(i,j,<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { fl=<span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (j=<span class="hljs-number"><span class="hljs-number">3</span></span>;j&lt;MaxY;j++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;MaxX;i++) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (MasTmp[i][j]&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) Sos(i,j,<span class="hljs-number"><span class="hljs-number">3</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (fl); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (j=<span class="hljs-number"><span class="hljs-number">3</span></span>;j&lt;MaxY;j++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;MaxX;i++) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (MasTmp[i][j]==<span class="hljs-number"><span class="hljs-number">3</span></span>) { MasSt[i][j]=<span class="hljs-number"><span class="hljs-number">1</span></span>; TScore++; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(res); } //================================================ // move figure down bool fig_drop(int dy) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dy&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; !FlZ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (y+dy+<span class="hljs-number"><span class="hljs-number">2</span></span>&gt;MaxY<span class="hljs-number"><span class="hljs-number">-1</span></span> || MasSt[x+dx][y+dy+<span class="hljs-number"><span class="hljs-number">2</span></span>]&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (y&lt;<span class="hljs-number"><span class="hljs-number">3</span></span>) { gameover(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (y+dy+dy+<span class="hljs-number"><span class="hljs-number">2</span></span>&gt;MaxY<span class="hljs-number"><span class="hljs-number">-1</span></span> || MasSt[x+dx][y+dy+dy+<span class="hljs-number"><span class="hljs-number">2</span></span>]&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { GD.play(COWBELL); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">3</span></span>;i++) MasSt[x][y+<span class="hljs-number"><span class="hljs-number">2</span></span>-i+dy]=MasSt[x][y+<span class="hljs-number"><span class="hljs-number">2</span></span>-i]; MasSt[x][y]=<span class="hljs-number"><span class="hljs-number">0</span></span>; y=y+dy; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); } //================================================ // move figure left/right (shift) bool fig_shift(int dx) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x+dx&lt;<span class="hljs-number"><span class="hljs-number">0</span></span> || x+dx&gt;MaxX<span class="hljs-number"><span class="hljs-number">-1</span></span>) { GD.play(COWBELL); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dx!=<span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (MasSt[x+dx][y+dy+<span class="hljs-number"><span class="hljs-number">2</span></span>]==<span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x+dx+dx&lt;<span class="hljs-number"><span class="hljs-number">0</span></span> || x+dx+dx&gt;MaxX<span class="hljs-number"><span class="hljs-number">-1</span></span>) GD.play(COWBELL); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> GD.play(CHACK); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { GD.play(COWBELL); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); } //================================================== // State-machine void ProcGame(void) { <span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> i,j,k; bool res = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (time_count &lt; millis()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Arbeiten) time_count = millis() + tempspeed; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> time_count = millis() + <span class="hljs-number"><span class="hljs-number">1000</span></span>; switch (state_game) { // Demo case <span class="hljs-number"><span class="hljs-number">0</span></span>: Score=<span class="hljs-number"><span class="hljs-number">0</span></span>; GetNext(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> j=<span class="hljs-number"><span class="hljs-number">3</span></span>;j&lt;MaxY;j++) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;MaxX;i++) MasSt[i][j]=<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>(<span class="hljs-number"><span class="hljs-number">6</span></span>)+<span class="hljs-number"><span class="hljs-number">2</span></span>; state_game = <span class="hljs-number"><span class="hljs-number">1</span></span>; TScore=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; case <span class="hljs-number"><span class="hljs-number">1</span></span>: FindFull(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TScore&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { FlZ=<span class="hljs-literal"><span class="hljs-literal">true</span></span>; time_count = millis() + <span class="hljs-number"><span class="hljs-number">500</span></span>; } state_game = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; case <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (j=<span class="hljs-number"><span class="hljs-number">0</span></span>;j&lt;MaxY;j++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;MaxX;i++) { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (MasSt[i][MaxY<span class="hljs-number"><span class="hljs-number">-1</span></span>-j]==<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (k=<span class="hljs-number"><span class="hljs-number">0</span></span>;k&lt;MaxY<span class="hljs-number"><span class="hljs-number">-2</span></span>-j;k++) MasSt[i][MaxY<span class="hljs-number"><span class="hljs-number">-1</span></span>-kj] = MasSt[i][MaxY<span class="hljs-number"><span class="hljs-number">-2</span></span>-kj]; res=<span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(res) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TScore&gt;<span class="hljs-number"><span class="hljs-number">7</span></span>) Score=Score+TScore+(TScore<span class="hljs-number"><span class="hljs-number">-8</span></span>)*<span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Score=Score+TScore; state_game = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { state_game = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; // Arbeiten case <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fig_drop(<span class="hljs-number"><span class="hljs-number">1</span></span>)) { tempspeed=MasSpeed[Level<span class="hljs-number"><span class="hljs-number">-1</span></span>]; TScore=<span class="hljs-number"><span class="hljs-number">0</span></span>; FindFull(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TScore&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>) { GD.play(KICKDRUM); FlZ=<span class="hljs-literal"><span class="hljs-literal">true</span></span>; state_game = <span class="hljs-number"><span class="hljs-number">4</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { FlZ=<span class="hljs-literal"><span class="hljs-literal">false</span></span>; GetNext(); } } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; case <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (j=<span class="hljs-number"><span class="hljs-number">0</span></span>;j&lt;MaxY;j++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;MaxX;i++) { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (MasSt[i][MaxY<span class="hljs-number"><span class="hljs-number">-1</span></span>-j]==<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (k=<span class="hljs-number"><span class="hljs-number">0</span></span>;k&lt;MaxY<span class="hljs-number"><span class="hljs-number">-2</span></span>-j;k++) MasSt[i][MaxY<span class="hljs-number"><span class="hljs-number">-1</span></span>-kj] = MasSt[i][MaxY<span class="hljs-number"><span class="hljs-number">-2</span></span>-kj]; res=<span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(res) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TScore&gt;<span class="hljs-number"><span class="hljs-number">7</span></span>) Score=Score+TScore+(TScore<span class="hljs-number"><span class="hljs-number">-8</span></span>)*<span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Score=Score+TScore; state_game = <span class="hljs-number"><span class="hljs-number">5</span></span>; FlZ=<span class="hljs-literal"><span class="hljs-literal">true</span></span>; GD.play(CLACK); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { state_game = <span class="hljs-number"><span class="hljs-number">3</span></span>; FlZ=<span class="hljs-literal"><span class="hljs-literal">false</span></span>; time_count = millis() + <span class="hljs-number"><span class="hljs-number">100</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; case <span class="hljs-number"><span class="hljs-number">5</span></span>: state_game = <span class="hljs-number"><span class="hljs-number">3</span></span>; FlZ=<span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; default: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } //================================================ // start new game void NewGame() { Score = <span class="hljs-number"><span class="hljs-number">0</span></span>; FlZ = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; ClearMas(MasSt); Arbeiten = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; GetNext(); Counter = <span class="hljs-number"><span class="hljs-number">0</span></span>; Level = <span class="hljs-number"><span class="hljs-number">1</span></span>; tempspeed = MasSpeed[<span class="hljs-number"><span class="hljs-number">0</span></span>]; Record = myrecord; state_game = <span class="hljs-number"><span class="hljs-number">3</span></span>; } //================================================ // draw <span class="hljs-string"><span class="hljs-string">"GAME OVER"</span></span> void gameover() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Arbeiten==<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { GD.play(SWITCH); Arbeiten=<span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Score&gt;myrecord) { myrecord=Score; eeprom_write_byte((unsigned <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> *) <span class="hljs-number"><span class="hljs-number">1</span></span>, myrecord); } } }</code> </pre> </div></div><div class="spoiler">  <b class="spoiler_title">slotgag_assets.h</b> <div class="spoiler_text"><pre> <code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LOAD_ASSETS() GD.safeload(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"slotgag.gd2"</span></span></span><span class="hljs-meta">); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> BACKGROUND_HANDLE 0 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> BACKGROUND_WIDTH 256 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> BACKGROUND_HEIGHT 256 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> BACKGROUND_CELLS 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> GAMEDUINO_HANDLE 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> GAMEDUINO_WIDTH 395 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> GAMEDUINO_HEIGHT 113 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> GAMEDUINO_CELLS 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ASSETS_END 220342UL static const shape_t BACKGROUND_SHAPE = {0, 256, 256, 0}; static const shape_t GAMEDUINO_SHAPE = {1, 395, 113, 0};</span></span></code> </pre></div></div><br>  Ich glaube, ich habe die Aufgabe abgeschlossen, meine erste Arbeitsskizze f√ºr dieses Board zu erstellen.  Ich hoffe, dass mindestens eine Person daran interessiert war, meine Geschichte zu lesen.  Kritik und Kommentare sind willkommen.  Die Pl√§ne h√∂ren nicht auf, gehen weiter und teilen nat√ºrlich Erfahrung und Wissen. <br><br>  Um die Funktionsweise des Boards zu demonstrieren, poste ich ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Video</a> mit Ton (Achtung! Lauter Ton!). <br>  Vielen Dank f√ºr Ihre Aufmerksamkeit. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de423577/">https://habr.com/ru/post/de423577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de423567/index.html">Noch einmal √ºber k√ºnstliche Intelligenz</a></li>
<li><a href="../de423569/index.html">Wir definieren einfach und genau die Sprache der Nachrichten</a></li>
<li><a href="../de423571/index.html">Alle m√∂glichen Dinge in MetaPost</a></li>
<li><a href="../de423573/index.html">Synchronizit√§t ist ein Mythos</a></li>
<li><a href="../de423575/index.html">Designstandards in der Mikroelektronik: Wo gibt es wirklich 7 Nanometer in der 7-nm-Technologie?</a></li>
<li><a href="../de423579/index.html">Cloud Services f√ºr WebGL? Nein danke</a></li>
<li><a href="../de423583/index.html">Erhalten von Unf√§llen durch NotificationIRP in OSS</a></li>
<li><a href="../de423585/index.html">Live: CI / CD unter iOS und Android</a></li>
<li><a href="../de423587/index.html">Erstellen eines InnoDB-Clusters aus MySQL 5.7 auf Centos 7</a></li>
<li><a href="../de423589/index.html">Wie wir TTS zum Beispiel ausgew√§hlt haben, klingt im W√∂rterbuch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>