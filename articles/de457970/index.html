<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóØÔ∏è üò≥ üë©‚Äçüë©‚Äçüëß Linter in Go. Wie man sie kocht. Denis Isaev üë©üèº‚Äçü§ù‚Äçüë®üèæ ü•£ üèÇ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich schlage vor, dass Sie sich mit dem Protokoll des Berichts von Denis Isaev jirfag "Linter in Go. Wie man sie kocht " vertraut machen. 


 In go 50+...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Linter in Go. Wie man sie kocht. Denis Isaev</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457970/"><h4 id="predlagayu-oznakomitsya-s-rasshifrovkoy-doklada-denisa-isaeva-jirfag-lintery-v-go-kak-ih-gotovit">  Ich schlage vor, dass Sie sich mit dem Protokoll des Berichts von Denis Isaev <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">jirfag</a> "Linter in Go. Wie man sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">kocht</a> " vertraut machen. </h4><br><p>  In go 50+ linter: Was ist ihr Gewinn und wie k√∂nnen sie effektiv in den Entwicklungsprozess integriert werden?  Der Bericht wird sowohl f√ºr diejenigen n√ºtzlich sein, die noch keinen Linter verwenden, als auch f√ºr diejenigen, die ihn bereits verwenden: Ich werde wenig bekannte Tricks und Praktiken f√ºr die Arbeit mit Linter aufzeigen. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/VlnxsfSs1ms" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Wen k√ºmmert es bitte unter der Katze. <a name="habracut"></a></p><br><p>  Hallo.  Ich hei√üe Dennis Isaev.  Wir werden dar√ºber sprechen, wie man in Go Linters kocht.  Der Bericht wird sowohl f√ºr Anf√§nger, die noch keinen Linter verwendet haben, als auch f√ºr Profis interessant sein.  Ich werde Ihnen einige wenig bekannte Tricks erz√§hlen. </p><br><p><img src="https://habrastorage.org/webt/n0/9y/_n/n09y_nbwkxomwtpxvpxkjduwv14.png"></p><br><p>  Ein bisschen √ºber mich.  Ich bin der Autor des OpenSource-Projekts Golangci-Lint.  Arbeitete in mail.ru.  Jetzt arbeite ich als TeamLead im Backend von Yandex.Taxi.  Mein Bericht basiert auf Erfahrungen mit Hunderten von Golangci-Lint-Benutzern.  Wie sie den Linter verwendet haben, welche Schwierigkeiten sie hatten und welche Erfahrungen sie mit der Implementierung von Go-Lintern in mail.ru und Yandex gemacht haben. </p><br><p><img src="https://habrastorage.org/webt/71/rs/vt/71rsvtht1v3xvl8nanocimgz7vc.png"></p><br><p>  Wir werden 5 Hauptthemen im Bericht behandeln. </p><br><p><img src="https://habrastorage.org/webt/br/eq/yg/breqygygay_hptqbkx45lu-agpw.png"></p><br><p>  Ich sehe ziemlich oft, dass Linters √ºberhaupt nicht verwendet werden.  Erh√∂hen Sie Ihre H√§nde zu denen, die den Linter ausnahmslos in allen Projekten verwenden.  Nicht alle. </p><br><p><img src="https://habrastorage.org/webt/yu/qs/44/yuqs44e2b1hl9ykkxlbcmfp72tw.png"></p><br><p>  Sprechen wir dar√ºber, warum sie nicht verwendet werden.  Meistens, wenn ich frage, warum ihr es nicht benutzt, sagen sie, dass Linter uns st√∂rt.  Sie verlangsamen nur die Entwicklung.  Es ist nichts Gutes in ihnen.  Dies ist teilweise wahr.  Wenn Sie die Feinheiten der Abstimmung nicht kennen, k√∂nnen sie wirklich st√∂ren.  Wir werden etwas sp√§ter dar√ºber sprechen. </p><br><p><img src="https://habrastorage.org/webt/e5/0u/_h/e50u_h2_oioyrkqq3kspoibntza.png"></p><br><p>  Au√üerdem denken die Leute oft, dass der Linter nur eine kleine Sache findet, etwas Stilistisches, einige unkritische Fehler, und tats√§chlich ist es das nicht wert.  Ist es einfacher, Zeit zu verschwenden? </p><br><p><img src="https://habrastorage.org/webt/ch/fv/m7/chfvm7l6u8hqpj2sr5mzjdazfpc.png"></p><br><p>  Sofort Gegenbeispiele.  Ein Fehler in Docker wurde mit go vet gefunden.  Aufruf zum Abbrechen der Funktion vergessen.  Aus diesem Grund endet die Hintergrundgoroutine m√∂glicherweise nicht. </p><br><p><img src="https://habrastorage.org/webt/kr/46/jo/kr46johuzdn2edxanefi39d9-30.png"></p><br><p>  Ein Fehler im Etcd-Projekt.  Der coole Go-Kritiker Linter stellte fest, dass das Argument strings.HasPrefix verwirrt ist.  Die √úberpr√ºfung auf das unsichere HTTP-Protokoll funktioniert nicht. </p><br><p><img src="https://habrastorage.org/webt/jn/kc/34/jnkc34kkfq02wcnkfglixjljy8w.png"></p><br><p>  In Go selbst besteht der Fehler darin, dass das i-Element mit dem i-ten verglichen wird, obwohl es mit dem j-ten verglichen werden sollte.  Auch von Linter gefunden. </p><br><p><img src="https://habrastorage.org/webt/pu/cx/gn/pucxgnyb1cpcedhh2ezrgkzz25o.png"></p><br><p>  Drei Beispiele in gro√üen OpenSource-Projekten, die von Lintern gefunden wurden.  Einige werden fragen: Ok, na und?  Er findet einige kritische Fehler.  F√ºr einen kritischen Fehler werden 100 unkritische oder falsch positive Ergebnisse gefunden.  Ich kann meine empirischen Statistiken angeben: Normalerweise habe ich ungef√§hr 80 Prozent aller Probleme, die Linters melden: Einige Stilprobleme, z. B. Variablen, werden nicht verwendet, und so weiter, 15 Prozent sind echte Fehler und ungef√§hr 5 Prozent sind falsch positiv. </p><br><p><img src="https://habrastorage.org/webt/t-/le/fe/t-lefekr_uop6smwkr8hsh-_ndy.png"></p><br><p>  Lassen Sie uns nun dar√ºber sprechen, warum Linters ben√∂tigt werden.  Der wichtigste Bonus ist, dass Linters Zeit sparen.  Und Zeit ist Geld.  Je fr√ºher Sie Fehler finden, desto g√ºnstiger kosten sie f√ºr Ihr Unternehmen.  Auf der Folie finden Sie eine grafische Darstellung der ungef√§hren Kosten f√ºr die Behebung des Fehlers in Abh√§ngigkeit von der Phase, in der er gefunden wurde.  Dementsprechend erh√∂hen sich die Kosten von jeder Phase von der Entwicklung bis zur Produktion um das Dreifache.  Finden Sie Fehler fr√ºhzeitig, idealerweise in der IDE, und sparen Sie Firmengeld. </p><br><p><img src="https://habrastorage.org/webt/dj/rt/vg/djrtvgov0gszrqott6lurea2-ou.png"></p><br><p>  Es kommt h√§ufig vor, dass Entwickler in CodeReview einige Probleme melden, die Linters m√∂glicherweise finden.  Warum sie das tun, ist unverst√§ndlich.  Zun√§chst muss der Autor des Codes warten, bis er CodeReview besteht.  Zweitens muss der Pr√ºfer selbst Zeit damit verbringen, mechanische Probleme zu finden.  Er konnte Linter das anvertrauen.  Wenn ich dies bemerke, erzwinge ich es immer und wir sind uns im Team einig, dass wir die √úberpr√ºfung nicht auf alles pr√ºfen k√∂nnen, was der Linter finden kann.  Ob wir dem alles vertrauen.  Wenn wir au√üerdem einige Probleme finden, die h√§ufig bei der √úberpr√ºfung auftreten und keine Linters enthalten, versuchen wir, Linters zu finden, die sie theoretisch auffangen k√∂nnten.  Wir verschwenden also keine Zeit mit der √úberpr√ºfung. </p><br><p><img src="https://habrastorage.org/webt/op/x5/zn/opx5znmyz96fphztoniygacwi7c.png"></p><br><p>  Linters erm√∂glichen es uns, irgendwie zu garantieren und eine vorhersehbare Codequalit√§t im Projekt zu haben.  In diesem Fall handelt es sich beispielsweise um nicht verwendete Funktionsargumente. </p><br><p><img src="https://habrastorage.org/webt/7z/_o/s1/7z_os1fsrsmnf-zml0pagozdn78.png"></p><br><p>  Mit Lintern k√∂nnen Sie kritische Fehler so fr√ºh wie m√∂glich finden und CodeReview-Zeit sparen.  Stellen Sie gleichzeitig eine gewisse Qualit√§t des Codes f√ºr das Projekt sicher. </p><br><p><img src="https://habrastorage.org/webt/zg/bv/_u/zgbv_u6n03huui5tv02mmrptx6u.png"></p><br><p>  Go hat √ºber 50 Linters, aber die beliebtesten sind 4. Dies sind die auf der Folie.  Sie werden einfach verwendet, weil sie cool sind.  Der Rest will sich normalerweise nicht darum k√ºmmern.  Jetzt m√∂chte ich anhand von Beispielen zeigen, welche Art von Lintern es gibt.  Ich m√∂chte 25 Linter-Beispiele demonstrieren.  Jetzt wird es wahrscheinlich das wichtigste im Bericht sein. </p><br><p><img src="https://habrastorage.org/webt/3o/jw/3c/3ojw3cdlryaspdv7pns7wrmrdks.png"></p><br><p>  Beginnen wir mit Formatierern, die Formatierer pr√ºfen.  Gofmt ist im Wesentlichen kein Linter.  Aber wir k√∂nnen es als Linter betrachten.  Er wei√ü, wie er uns sagen kann, dass es nicht gen√ºgend Zeilenvorsch√ºbe gibt, irgendwo zus√§tzliche Leerzeichen.  Im Allgemeinen ist dies der Standard zum √úberpr√ºfen und Verwalten der Codeformatierung. </p><br><p><img src="https://habrastorage.org/webt/oh/43/lm/oh43lmztndg3qrcirv5zatznhnk.png"></p><br><p>  Gofmt hat auch eine wenig bekannte Option -s, mit der Sie Ausdr√ºcke vereinfachen k√∂nnen. </p><br><p><img src="https://habrastorage.org/webt/v4/ye/vc/v4yevcz6msilkmoy-s23m4ikgie.png"></p><br><p>  Goimports enth√§lt alles, was gofmt enth√§lt, aber es wei√ü auch noch, wie man Importe neu anordnet, l√∂scht und die erforderlichen Importe hinzuf√ºgt. </p><br><p><img src="https://habrastorage.org/webt/me/xz/ea/mexzea3h4oqpj5rz4_28kgnlfjg.png"></p><br><p>  Unindent ist ein wunderbarer Linter, der die Verschachtelung von Code verringern kann.  In diesem Fall sagt er uns, dass wenn wir die beiden Wenns zu einem kombinieren, die Verschachtelungsebene um eins abf√§llt. </p><br><p><img src="https://habrastorage.org/webt/s8/vw/hh/s8vwhhcz36gcvqmjzoao9zx0sbo.png"></p><br><p>  Betrachten wir Linters, die die Komplexit√§t des Codes √ºberpr√ºfen.  Das coolste von ihnen ist Gocyclo.  Er ist der langweiligste.  Viele hassen ihn.  Er √ºberpr√ºft die zyklomatische Komplexit√§t des Codes und schw√∂rt, wenn diese Komplexit√§t der Funktion einen bestimmten Schwellenwert √ºberschreitet.  Der Schwellenwert ist konfigurierbar.  Wenn vereinfacht, ist die zyklomatische Komplexit√§t die Menge an if im Code.  Hier ist er zu gro√ü und der Linter schw√∂rt. </p><br><p><img src="https://habrastorage.org/webt/40/dh/rf/40dhrfgpsg_ipvkiva2f7izoats.png"></p><br><p>  Nakedret ist ein solcher Linter, der sagen kann, dass Sie return ohne Werte verwenden und es gleichzeitig in einer zu langen Funktion verwenden.  Nach dem offiziellen Leitfaden werden solche R√ºcksendungen nicht empfohlen. </p><br><p><img src="https://habrastorage.org/webt/-m/h4/sa/-mh4sal0ijvrzufd1voosn0alt8.png"></p><br><p>  Es gibt eine Gruppe von Linter-Teststilen.  Zum Beispiel √ºberpr√ºft gochecknoglobals, ob Sie keine globalen Variablen verwenden.  Nat√ºrlich m√ºssen sie nicht verwendet werden. </p><br><p><img src="https://habrastorage.org/webt/44/xs/gx/44xsgxsltp04g37dp3cy1y73apu.png"></p><br><p>  Golint schw√∂rt auf dieselbe apiUrl-Variable.  Sagt, URL sollte in Gro√übuchstaben verwendet werden.  Seit dieser Abk√ºrzung. </p><br><p><img src="https://habrastorage.org/webt/cv/l4/cd/cvl4cdmxlfi1o9hg-od8yaizdku.png"></p><br><p>  Gochecknoinits stellt sicher, dass Sie keine Init-Funktionen verwenden.  Init-Funktionen sollten aus bestimmten Gr√ºnden nicht verwendet werden. </p><br><p><img src="https://habrastorage.org/webt/fl/no/i-/flnoi-e2ymfxhjuouxrblzmax1i.png"></p><br><p>  Einfacher k√ºhler Linter.  Teil von Staticheck oder Megacheck.  In sich selbst befindet sich eine Vielzahl von Mustern, um den Code zu vereinfachen.  In diesem Fall stellen Sie m√∂glicherweise fest, dass Zeichenfolgen.HasPrefix nicht ben√∂tigt wird, da Zeichenfolgen.TrimPrefix bereits die erforderlichen √úberpr√ºfungen enth√§lt, und Sie k√∂nnen if entfernen. </p><br><p><img src="https://habrastorage.org/webt/a1/ks/l-/a1ksl-ic4y4luhbsncm4zzjcfqi.png"></p><br><p>  Goconst √ºberpr√ºft, ob Ihr Code keine doppelten Zeichenfolgenliterale enth√§lt, die in Konstanten gezogen werden k√∂nnten.  Die Anzahl dieser Wiederholungen ist konfigurierbar.  In diesem Fall zwei. </p><br><p><img src="https://habrastorage.org/webt/eb/wg/p-/ebwgp-tcumgwuboffctw-ultuhc.png"></p><br><p>  Misspell Linter, der √ºberpr√ºft, ob der Code in den Kommentaren keine Tippfehler enth√§lt.  In diesem Fall enth√§lt die Folie einen Tippfehler des anderen Wortes im Kommentartext.  Sie k√∂nnen den Dialekt des Englischen anpassen: Amerikanisch, Britisch. </p><br><p><img src="https://habrastorage.org/webt/cp/hk/gg/cphkggzyzgrgn8_zcpwapupc_9y.png"></p><br><p>  Deaktivieren Sie den Linter, um sicherzustellen, dass Sie keine unn√∂tigen Konvertierungen durchf√ºhren.  In diesem Fall ist die Variable bereits vom Typ string.  Es macht keinen Sinn, es zu konvertieren. </p><br><p><img src="https://habrastorage.org/webt/_x/mw/d8/_xmwd846ttkqu3rvjkh1wxnemru.png"></p><br><p>  Lassen Sie uns nun die Linters sehen, die nicht verwendeten Code √ºberpr√ºfen.  Der erste ist Varcheck.  Es wird nach nicht verwendeten Variablen gesucht. </p><br><p><img src="https://habrastorage.org/webt/zt/tt/j3/ztttj3tn3b3ihumj_asgyu_ssu4.png"></p><br><p>  Unbenutzte k√∂nnen auf ungenutzte Felder von Strukturen schw√∂ren. </p><br><p><img src="https://habrastorage.org/webt/qb/ww/qd/qbwwqdosm6vthcmuna535jnbyoy.png"></p><br><p>  Deadcode sagt uns, ob ein Typ nicht verwendet wird. </p><br><p><img src="https://habrastorage.org/webt/yb/dj/ow/ybdjowi8ng8up7uww9amcmfmvri.png"></p><br><p>  Oder die Funktion wird nicht verwendet. </p><br><p><img src="https://habrastorage.org/webt/aa/ic/r8/aaicr8arhzyxymspkagbuyfddb4.png"></p><br><p>  Unparam kann melden, wenn im Funktionsk√∂rper selbst keine Funktionsargumente verwendet werden. </p><br><p><img src="https://habrastorage.org/webt/gn/zz/cc/gnzzccget6iole9xmvqjvf410zm.png"></p><br><p>  Ineffassign meldet, wenn eine √Ñnderung durch eine Variable im Code nicht weiter verwendet wird.  Dies ist entweder das Ergebnis einer Art Refactoring.  Irgendwo haben sie vergessen, etwas oder einen K√§fer zu reinigen.  In diesem Beispiel wird die Anzahl erh√∂ht.  Dar√ºber hinaus wird es nicht weiter verwendet.  Dies ist einem Fehler sehr √§hnlich. </p><br><p><img src="https://habrastorage.org/webt/ph/hn/vv/phhnvvyhavzzn7bpaayu3gpprec.png"></p><br><p>  Es gibt eine Gruppe von Linter-Testleistungen.  Zum Beispiel sagt uns maligned, dass eine bestimmte testStruck-Struktur durch Neuordnung der Felder in der Gr√∂√üe komprimiert werden kann.  Wenn Sie es als Teil von golangci-lint ausf√ºhren, gibt es au√üerdem eine Option, mit der Sie die gew√ºnschte Reihenfolge der Felder sofort drucken k√∂nnen, um sie nicht selbst auszuw√§hlen. </p><br><p><img src="https://habrastorage.org/webt/bg/tt/am/bgttamoa5j5266shahgap3hihuw.png"></p><br><p>  Es gibt so einen coolen gocritic Linter.  Er hat viele Schecks drinnen.  Einer von ihnen ist riesigParam.  Sie wei√ü, wie sie uns √ºber das Kopieren schwerer Datenstrukturen Bericht erstatten kann.  In diesem Fall wird heavyStruct nach Wert kopiert und muss nur als Zeiger √ºbergeben werden. </p><br><p><img src="https://habrastorage.org/webt/bw/5i/me/bw5imecya7pb85b2_6gblmqgl9q.png"></p><br><p>  Prealloc kann uns Stellen im Code finden, an denen wir Slice vorab bereitstellen k√∂nnen.  Er findet es so, dass er sucht, wo wir konstante st√ºndliche Iterationen auf Slice durchf√ºhren.  Und in ihnen h√§ngen Angelegenheiten an.  In diesem Fall k√∂nnen Sie die Variable ret f√ºr die L√§nge des Slice ss vorab zuweisen und Speicher und CPU sparen. </p><br><p><img src="https://habrastorage.org/webt/wo/8b/ty/wo8btytonlzgh3axhc2r2lkntau.png"></p><br><p>  Und schlie√ülich Linters, die Fehler finden.  Scopelint findet wahrscheinlich, dass der h√§ufigste Fehler f√ºr Anf√§nger darin besteht, die Bereichsvariable einer Schleife als Referenz zu erfassen.  In diesem Fall wird die Variable arg loop als Referenz erfasst.  Bei der n√§chsten Iteration wird es bereits eine andere Bedeutung geben. </p><br><p><img src="https://habrastorage.org/webt/hp/fg/i6/hpfgi6p2a5rgpxg4wuvo8lmin_y.png"></p><br><p>  Staticcheck  Fr√ºher hie√ü es Megacheck.  Jetzt wurde es umbenannt.  Aus diesem Grund gibt es in der Gemeinde so wenig Verwirrung.  Staticcheck kann Tonnen von verschiedenen Fehlern finden.  Das ist eine wirklich coole Sache.  Wie zum Tierarzt gehen.  Einer von ihnen auf der Rutsche ist ein Rennen.  Nat√ºrlich m√ºssen wir sync.WaitGroup erh√∂hen, bevor wir goroutine eingeben. </p><br><p><img src="https://habrastorage.org/webt/ec/22/b_/ec22b_dn6og0njhppjrfhv7hav0.png"></p><br><p>  Der Tierarzt findet meistens Insekten.  In diesem Fall wird die Variable i verglichen, so dass das Ergebnis immer wahr ist.  Daher gibt es offensichtlich einen Fehler.  Im Allgemeinen sollten Sie immer einen Tierarzt verwenden. </p><br><p><img src="https://habrastorage.org/webt/ew/7m/im/ew7mimaq8i-hhnnxihqoaidmzpq.png"></p><br><p>  Gosec steht f√ºr Go Security.  Findet potenzielle Sicherheitsprobleme in Go.  In diesem Fall k√∂nnen Benutzerdaten in arg ankommen.  Daher kann es den Befehl rm shell infiltrieren.  Und hier vielleicht Shell in Aktion zum Beispiel.  Ich stelle fest, dass Go-Sicherheit h√§ufig zu falsch positiven Ergebnissen f√ºhrt.  Deshalb schalte ich es manchmal aus. </p><br><p><img src="https://habrastorage.org/webt/kj/3s/pd/kj3spdxvgi3wysimti4bvfpl-dw.png"></p><br><p>  Errchek findet Orte, an denen wir die Fehlerpr√ºfung vergessen haben.  Ein guter, sicherer Programmierstil ist immer √ºberall, um alle Fehler zu √ºberpr√ºfen. </p><br><p><img src="https://habrastorage.org/webt/zg/dg/ed/zgdgedtsoo9k-_jb5ozaywumvom.png"></p><br><p>  Zwei Linter sollten getrennt vermerkt werden: Staticcheck und Go-Critical.  Denn in jedem von ihnen befinden sich Dutzende, wenn nicht Hunderte von Schecks.  Probieren Sie sie daher unbedingt aus. </p><br><p><img src="https://habrastorage.org/webt/uu/at/9n/uuat9nlumkoztxvwcc_dvlivacc.png"></p><br><p>  Jetzt haben wir 25 Linter-Beispiele untersucht.  Und ich sagte auch, dass wir mehr als 50 Linters in Go haben.  Welche verwenden?  Ich rate Ihnen, alles maximal zu nutzen.  F√ºgen Sie einfach alle Linters hinzu, die Sie k√∂nnen.  Verbringen Sie dann eine Stunde und schalten Sie sie einzeln aus.  Schalten Sie diejenigen aus, die Ihnen unbedeutend erscheinen.  Beispielsweise werden einige Leistungsoptimierungen gefunden, an denen Sie √ºberhaupt nicht interessiert sind.  Sie werden eine Stunde damit verbringen, Ihre eigene Liste von Linter f√ºr sich selbst zu erstellen, und Sie k√∂nnen damit weiter leben. </p><br><p><img src="https://habrastorage.org/webt/05/yt/o2/05yto2j_ituxze5vszdzkln3m4s.png"></p><br><p>  Der vollst√§ndige Katalog aller Linters ist √ºber den Link auf der Folie verf√ºgbar. </p><br><p><img src="https://habrastorage.org/webt/hr/eg/ms/hregmsph6oqwrwbremeqjr3hdom.png"></p><br><p>  Lassen Sie uns dar√ºber sprechen, wie man Linter laufen l√§sst.  Manchmal werden Linters mit solchen Makefiles gestartet.  Das Problem ist, dass es langsam ist.  Es wird alles nacheinander ausgef√ºhrt. </p><br><p><img src="https://habrastorage.org/webt/pa/24/p8/pa24p8mowqtcdxc09v1bd--k8zm.png"></p><br><p>  Wir k√∂nnen die Ausf√ºhrung parallel √ºber xargs -P durchf√ºhren.  Es gibt auch ein Problem.  Erstens sind dies nur 4 Linters.  Und schon 10 Codezeilen.  Was passiert, wenn wir 20 Linters einschalten?  Zweitens ist diese Parallelisierung, gelinde gesagt, nicht die optimalste. </p><br><p><img src="https://habrastorage.org/webt/4r/yy/uq/4ryyuq9idfuppazujvbfm0-jv84.png"></p><br><p>  Gometalinter kommt zur Rettung.  Gometalinter ist ein solcher Aggregator von Lintern, dass es buchst√§blich in ein paar Befehlen ausgef√ºhrt werden kann.  Auf der Folie √§hnelt der Befehl zum Starten desselben Linters der vorherigen Folie.  Sie m√ºssen jedoch nicht unabh√§ngig installiert und beim parallelen Start nicht schamanisiert werden.  Gometalinter parallelisiert bereits alles unter der Haube.  Aber er hat ein grundlegendes Problem.  Jeder Linter wird als separater Prozess gestartet.  Gabelt ihn.  Wenn wir das Wissen hinzuf√ºgen, dass jeder Linter in sich 80 Prozent der Zeit mit dem Parsen des Codes und nur 20 Prozent mit der Analyse selbst verbringt, stellt sich heraus, dass wir 80 Prozent der Arbeit verschwenden.  Und verwenden Sie die Daten nicht wieder.  Wir k√∂nnten das Programm 1 Mal analysieren und dann 50 Linter f√ºttern. </p><br><p><img src="https://habrastorage.org/webt/9k/ci/e0/9kcie0zugz6ndeuz4dkup3qbcxo.png"></p><br><p>  Gl√ºcklicherweise gibt es Golangci-Flusen, die genau das tun.  Er analysiert einmal.  Einmal tippen.  Weitere Analyseger√§te laufen darauf.  Dadurch funktioniert es viel schneller.  Ein √§hnlicher Startbefehl auf einer Folie. </p><br><p><img src="https://habrastorage.org/webt/xg/nf/r-/xgnfr-8sfk9kktxqg7m-w-gtzuk.png"></p><br><p>  Sie k√∂nnen die Grafik auf einem meiner Projekte 30.000 Codezeilen sehen.  Ein kleines Projekt und nur 4 Linter.  Sie k√∂nnen feststellen, dass es manchmal einen gro√üen Unterschied in der Arbeitsgeschwindigkeit gibt, sowohl zwischen dem sequentiellen Start als auch zwischen Gometalinter und Golangci-Lint.  Wenn dieser Linter nicht 4, sondern 20 ist, ist der Unterschied viel gr√∂√üer. </p><br><p><img src="https://habrastorage.org/webt/wt/od/hh/wtodhhewmvbr6ntlhmticbyboqo.png"></p><br><p>  Wichtige Klarstellung zum Gometallinter.  Seit dem 7. April erkl√§rt der Autor des Gometalinter-Projekts, dass es veraltet ist.  Das Repository wurde archiviert und jedem wird empfohlen, auf Golangci-Lint umzusteigen, da es schneller ist und dort mehr Extras enth√§lt.  Zum Beispiel Unterst√ºtzung f√ºr Go-Module und so weiter. </p><br><p><img src="https://habrastorage.org/webt/3w/o-/rl/3wo-rltzm-28zyzktklgokya__m.png"></p><br><p>  Neben Performance- und Go-Modulen bietet Golangci-Lint auch Br√∂tchen wie die YAML-Konfiguration, die M√∂glichkeit, Warnungen irgendwie zu √ºberspringen, sie auszuschlie√üen und so weiter. </p><br><p><img src="https://habrastorage.org/webt/qe/mt/j4/qemtj4mww4ghwgevvrldygfsrcs.png"></p><br><p>  Golangci-lint wird mithilfe der Datei golangci-lint.yaml konfiguriert.  Ein Beispiel f√ºr diese Datei mit einer Beschreibung aller Optionen finden Sie unter dem Link auf der Folie.  Betrachten Sie zum Beispiel den Abschnitt Linters-Einstellungen.  In diesem Abschnitt werden wir die Konfiguration importieren.  Es gibt eine so seltene Option f√ºr lokale Pr√§fixe.  Darin k√∂nnen Sie den Pfad zum aktuellen Projekt angeben.  In diesem Fall beispielsweise github.com/local/repo. </p><br><p><img src="https://habrastorage.org/webt/zw/lm/ru/zwlmru9ittbjcnpaqtsm1kjsiso.png"></p><br><p>  Wenn goimports lokale Importe in github.com/local/repo sieht, wird sichergestellt, dass sie sich in einem separaten Abschnitt befinden. </p><br><p><img src="https://habrastorage.org/webt/je/xz/np/jexznpn95qga4k1tajcxhzlc7tq.png"></p><br><p>  Damit sie ganz am Ende sind.  Damit sind sie von allen externen Importen getrennt.  Dies erleichtert die visuelle Unterscheidung zwischen externen und internen Importen.  Wenn er bemerkt, dass dies nicht so ist, wird er schw√∂ren. </p><br><p><img src="https://habrastorage.org/webt/jr/k_/wh/jrk_whrcx5nxvjcunwpojfc6blq.png"></p><br><p>  Und wenn Sie auch die Option golangci-lint run --fix verwenden, repariert golangci-lint sie automatisch f√ºr Sie und sortiert die Importe neu. </p><br><p><img src="https://habrastorage.org/webt/om/hz/rz/omhzrz39llatxdcwh903291uyig.png"></p><br><p>  Lassen Sie uns dar√ºber sprechen, was Linters in der Terminologie golangci-lint sind.  Linter werden in schnell und langsam unterteilt.  Die schnellen werden schnell genannt und mit der schnellen Flagge in der Hilfe markiert.  Sie unterscheiden sich darin, dass schnelle Linters eine eher eingeschr√§nkte Darstellung des Programms erfordern, beispielsweise den AST-Baum und einige Typinformationen.  W√§hrend Kupferlinters noch zus√§tzlich eine SSA-√úbermittlung durch das Programm erfordern und den Cache weniger wiederverwenden.  Es gibt nur sechs langsame Linters.  Sie sind auf der Folie markiert.  In bestimmten F√§llen ist es sinnvoll, nur einen schnellen Linter zu verwenden. </p><br><p><img src="https://habrastorage.org/webt/hy/bj/mn/hybjmnqjc_sx6yupmtu3bmp4yqk.png"></p><br><p>  M√∂glicherweise stellen Sie einen Geschwindigkeitsunterschied fest.  Es ist enorm dreimal zwischen schnellem Start und langsam.  Eigentlich golangci-lint run - schnell werden nur schnelle Linters gestartet. </p><br><p><img src="https://habrastorage.org/webt/mz/a_/cy/mza_cytq5xuunzovfpkpw0l7uhc.png"></p><br><p>  √úber Build-Cache.  Es gibt so etwas wie einen Build-Cache.  Dies ist der Cache, den die Go-Bin√§rdatei beim Kompilieren des Programms beim Laden von Typen erstellt, damit diese Kompilierung beim n√§chsten Mal schneller erfolgt.  Derselbe Cache wird von Lintern zum Parsen von Programmen zum Erstellen von Typinformationen wiederverwendet.  M√∂glicherweise stellen Sie fest, dass der erste Neustart ziemlich lang ist, wenn Sie den Cache leeren.  Und der n√§chste wird dreimal schneller sein.  Achten Sie auf Ihren ersten Start von Linter in Ihrem Projekt.  Es wird immer viel langsamer sein. </p><br><p><img src="https://habrastorage.org/webt/sr/t-/wf/srt-wffukanjk1wsnf7udixlppc.png"></p><br><p>  Hier k√∂nnen Sie den Schluss ziehen, dass es in CI zwischen CI-Starts sinnvoll ist, Ihren Cache wiederzuverwenden.  Sie beschleunigen nicht nur Linters, sondern auch das Ausf√ºhren von Tests, das Kompilieren und m√∂glicherweise etwas anderes.  Ich rate allen. </p><br><p><img src="https://habrastorage.org/webt/dh/t6/40/dht640a9ima2euast-lyw2m0ycm.png"></p><br><p>  Ich kann nicht √ºber Go-Analyse sprechen.  Dies ist ein neues Framework, das seit Go 1.12 ver√∂ffentlicht wurde.  Es vereinheitlicht Schnittstellen so, dass Linter einfach zu schreiben, Linter einfach zu bedienen und auszuf√ºhren ist.  Go-Tierarzt startet 1.12 insgesamt ganz auf Go-Analyse umgestellt.  Offensichtlich ist dies die Zukunft.  Dass es das gesamte √ñkosystem von Go stark ver√§ndern wird.  Aber im Moment ist es im Allgemeinen ziemlich fr√ºh, dar√ºber zu sprechen.  Also, was wird als n√§chstes passieren?  Weil ich bei der Go-Analyse nur wenige Linters gesehen habe und fast keiner der vorhandenen noch darauf umgestellt hat. </p><br><p><img src="https://habrastorage.org/webt/pd/ai/wr/pdaiwrm4exla4vob6jude1q5ag4.png"></p><br><p>  Wenn Sie eine kurze Schlussfolgerung zum Abschnitt zum Ausf√ºhren von Lintern ziehen, empfehle ich jedem, Golangci-Lint zu verwenden.  Sie werden schnell und bequem Linters ausf√ºhren.  Sie m√ºssen nicht mit anderen Anweisungen, Befehlen schamanen. </p><br><p><img src="https://habrastorage.org/webt/np/5e/rt/np5ert5mpx8duxndaz3z4jyfxaa.png"></p><br><p>  Lassen Sie uns dar√ºber sprechen, wie Linter im Projekt implementiert wird.  Ich denke, dort standen alle, die versuchten, Linters einzuf√ºhren, vor einem solchen Problem.  Hier haben Sie ein Projekt f√ºr eine Million Codezeilen mit Geschichte.  Sie haben TeamLead √ºberzeugt, Linters zu implementieren.  Starten Sie und sehen Sie eine Million Nachrichten.  Verstehen Sie, dass Sie wochenlang keine Zeit haben, sich zu setzen, um alles zu reparieren.  Was zu tun ist?  Sie k√∂nnen einfach aufgeben und alles aufgeben.  Oder Sie k√∂nnen sich etwas einfallen lassen. </p><br><p><img src="https://habrastorage.org/webt/r6/20/nh/r620nhcfiheftehfd95wvcubqxg.png"></p><br><p>  Erstens, die einfachste Option, k√∂nnen Sie versuchen, einige Kommentare von Lintern im Text regelm√§√üig mit der Konfiguration golangci-lint.yaml auszuschlie√üen.  Wenn Sie feststellen, dass bei den Kommentaren Linters schw√∂ren, diese Kommentare Ihnen jedoch im Allgemeinen egal sind, k√∂nnen Sie sie zu den Ausnahmen hinzuf√ºgen. </p><br><p><img src="https://habrastorage.org/webt/k3/e2/r0/k3e2r06d6zqjr-udzpytsgl3wsa.png"></p><br><p>  Kann Wege ausgeschlossen werden.  Sie haben beispielsweise ein Verzeichnis eines Drittanbieters und Ihr Code ist nicht vorhanden.  Sie m√ºssen es nicht √ºberpr√ºfen.  Kann durch Dateinamen ausgeschlossen werden. </p><br><p><img src="https://habrastorage.org/webt/7o/xd/1y/7oxd1y9ydrw7izbbgcz44fil67w.png"></p><br><p>  Wenn Sie nicht die gesamte Datei ausschlie√üen m√∂chten, k√∂nnen Sie die Funktion mit nolint vor der Funktion ausschlie√üen.  F√ºr nolint k√∂nnen Sie √ºber den Doppelpunkt eine Liste von Lintern angeben, f√ºr die es als Ausnahme fungiert.  Oder nicht anzugeben, dann werden alle Linter ignoriert. </p><br><p><img src="https://habrastorage.org/webt/ba/u0/u7/bau0u73eyak4rfzpawoxsdn38ys.png"></p><br><p>  Wann sollte man Nolint √ºberhaupt verwenden?  Zum Beispiel verwende ich nolint: deepguard, das Importe erfassen kann, d. H.  Importe k√∂nnen nicht verwendet werden.  Ich habe den Import der Logrus-Bibliothek verbl√ºfft, um sie nicht versehentlich anstelle meines gew√ºnschten Loggers zu verwenden.  Aber in meinem Logger selbst benutze ich Logrus.  Daher muss ich nur an einer Stelle im Projekt nur eine Datei aus dem Import erstellen.  Ich markiere es mit Nolint. </p><br><p><img src="https://habrastorage.org/webt/zu/ly/js/zulyjsetqrvw7kkuamogbsfrif0.png"></p><br><p>  Angenommen, Sie haben dies alles getan, f√ºgen Sie exclude und nolint hinzu.  Wir sehen, dass noch Tausende von Nachrichten √ºbrig sind.  Repariere es ein paar Tage.  Es gibt einen coolen Hack.  Schauen wir uns ein Beispiel an.  Es gibt eine main.go-Datei, in der die 5. Zeile vor langer Zeit hinzugef√ºgt wurde, und die 6. Zeile wird erst heute hinzugef√ºgt.  Was k√∂nnen wir tun? </p><br><p><img src="https://habrastorage.org/webt/vu/eo/8a/vueo8a22i6im38vl8ucmrcbqkak.png"></p><br><p>  Wir k√∂nnen revgrep verwenden.  Mit Revgrep k√∂nnen wir eine Git-Revision angeben, nach der wir nach Fehlern suchen m√ºssen.  Das hei√üt, hinterlassen Sie eine Nachricht erst nach einer bestimmten √úberarbeitung.  Wenn die 6. Zeile nach dem Ursprungsmaster ge√§ndert wird, wird sie nur behoben.  Und alle vorherigen Nachrichten wird er nicht die 5. Zeile melden.  Das ist ein sehr cooler Trick.           .    .     golangci-lint      .    .   , .           git    hash commit.       .                .     hash commit  tag  revgrep    CI.          .           .             .      mail.ru,      . </p><br><p><img src="https://habrastorage.org/webt/jr/gx/yh/jrgxyhhduiqynrf3zk247jdf7gg.png"></p><br><p>   revgrep    golangci-lint.     --new-from-rev  --new.   . </p><br><p><img src="https://habrastorage.org/webt/hi/ox/vi/hioxviksgb9hn41ptwcy69ukfvc.png"></p><br><p>     .                --new.     20 ,   .   .      .      .      .  Was zu tun ist?    --new-from   ,    .         . </p><br><p><img src="https://habrastorage.org/webt/ht/sx/dl/htsxdlhg87cpsd58nzt8zyr4pv4.png"></p><br><p>  .   golangci-lint .          .            .       ,   . </p><br><p><img src="https://habrastorage.org/webt/y3/ci/ot/y3ciotx_sk_m0ionhcntvlwap_u.png"></p><br><p>        .     . -,     CI.       CI,      .    go get.     .     ,      CI build  .     .    .    wget  .    .  ,     ---enable-all  ,        golangci-lint, ,    5       build  .       .      . </p><br><p><img src="https://habrastorage.org/webt/9o/vd/4l/9ovd4ldx8hr9_sv2znb0ozmytn4.png"></p><br><p> Das Coole ist Pre-Commit Hook.  Wer verwendet den Pre-Commit-Hook, um Ihre H√§nde zu heben?  Ziemlich wenig.  Pre-Commit-Hook ist eine Git-Datei, mit der Sie nach dem Festschreiben beliebigen Code ausf√ºhren k√∂nnen.  Aber bevor dieses Commit erfolgreich ist.  Wenn der Pre-Commit-Hook einen Fehler zur√ºckgibt, schl√§gt das Festschreiben fehl.  In der Regel ist es praktisch, dort Schnelltests, statische Analysen usw. einzubetten.  Ich rate jedem, Golangci-Flusen einzubetten.  Sie k√∂nnen dies manuell √ºber das Shell-Skript tun.  Dies ist √ºber das Pre-Commit-Dienstprogramm m√∂glich.  Ein Beispiel f√ºr die Einrichtung auf einer Folie.  Installiert Pre-Commit mit pip, einem Dienstprogramm zum Installieren von Python-Paketen.  pip install pre-commit installiert die Konfiguration.  Golangci-lint unterst√ºtzt bereits die Integration mit Pre-Commit. </p><br><p><img src="https://habrastorage.org/webt/kq/br/fp/kqbrfpzjvqocjfu4unpnm7ezt98.png"></p><br><p>  Die Option --fast.  Wir kehrten zu ihr zur√ºck.  Ich rate jedem, es in der IDE zu verwenden.  Im Allgemeinen sollte die IDE nat√ºrlich die Integration mit Lintern verwenden.  Verwenden Sie die Option --fast, damit Ihre IDE nicht einfriert. </p><br><p><img src="https://habrastorage.org/webt/xx/0p/tf/xx0ptfqhvp4oo7_imfbxxvdeu4o.png"></p><br><p>  Ich denke das ist ziemlich offensichtlich.  In CI m√ºssen Linters eingebettet werden.  Wenn Sie sie nicht einbetten, wird es ein klassisches Bild geben: "Lass es uns jetzt h√§mmern, jetzt haben wir eine Ver√∂ffentlichung, nicht vorher."  Allm√§hlich werden Sie immer mehr Kommentare haben.  Sie h√∂ren einfach auf, Linters als Klasse zu betrachten.  Daher streng in CI.  Dar√ºber hinaus k√∂nnen Sie einfach Linters in CI installieren. Wenn der Build fehlschl√§gt, klettern wir in das Build-Protokoll und suchen, warum es dort hingefallen ist.  Wo ist der Kommentar in welcher Zeile?  Dies ist nicht sehr praktisch. </p><br><p><img src="https://habrastorage.org/webt/q8/hk/le/q8hklenfqstclvq9e-mmurlm4au.png"></p><br><p>  Es gibt einen cooleren Weg.  Sie k√∂nnen Linter als Person oder als Pr√ºfer fungieren lassen.  Sie k√∂nnen Sie unter github.com, gitlab.com f√ºr eine Zeile mit Fehlercode auf Ihrer Pull-Anfrage kommentieren.  Linter kann schreiben, dass er ein Problem gefunden hat.  Das ist unglaublich cool.  Dies spart Zeit beim Code des Autors.  Weil Sie nicht in das Build-Protokoll gehen m√ºssen.  Au√üerdem kann eine Person einen Kommentar abgeben, wenn sie dieser Bemerkung des Linter nicht zustimmt.  Im Beispiel auf der Folie erfolgt dies mit dem Dienstprogramm reviewdog.  Dienstprogramm OpenSource.  Sie ist frei.  Sie k√∂nnen sich selbst installieren. </p><br><p><img src="https://habrastorage.org/webt/_-/kp/us/_-kpuscagzfkeyd8szqkk9x2l7a.png"></p><br><p>  Neben Reviewdog gibt es auch Projekte wie GolangCI, Code Climate, Hound.  Mit ihnen k√∂nnen Sie diese Linters mit nur einem Klick mit Ihrem OpenSouce- oder privaten Repository verbinden und in Pull Request inline kommentieren.  Es gibt immer noch eine coole Sache, SonarQube. </p><br><p><img src="https://habrastorage.org/webt/ru/ax/2w/ruax2wvnx5vsvmesb4vuoelaupa.png"></p><br><p>  Ich kann goreportcard noch nicht erw√§hnen.  Mit diesem Projekt k√∂nnen Sie einen Bericht in Ihrem Repository erstellen.  Sie geben dort Noten ab, geben ein Abzeichen und schreiben, wie gut Ihr Code f√ºr ein Dutzend Linter Clean ist.  Ich rate auch. </p><br><p><img src="https://habrastorage.org/webt/po/up/hj/pouphj7ed7qsrt8y9lmfmywq2vm.png"></p><br><p>  Ich m√∂chte, dass Sie gleich am Montag zur Arbeit kommen und etwas von dem anwenden k√∂nnen, was ich gesagt habe.  Hier ist eine Zusammenfassung dessen, was Sie anwenden k√∂nnen.  Installieren Sie zuerst Golangci-Lint.  Schalten Sie dort alle Linters ein.  Dann verbringen Sie 1 Stunde.  Schalten Sie w√§hrend dieser Stunde alle Linters aus, die Ihnen wahnhaft erscheinen.  Betten Sie danach golangci-lint in das CI in der IDE ein und konfigurieren Sie den Pre-Commit-Hook.  Gleich danach k√∂nnen Sie --new-from-rev konfigurieren und angeben, dass wir beim aktuellen Commit nach Fehlern suchen.  Und alle vorherigen Fehler werden sp√§ter separat behoben.  Konfigurieren Sie danach optional den Reviewdog so, dass er Ihnen weiterhin Kommentare zu Ihrem Github oder in Gitlab gibt.  Damit steigern Sie die Qualit√§t des Projekts enorm.  Begeistern Sie das ganze Team. </p><br><p><img src="https://habrastorage.org/webt/xc/ui/oz/xcuioz2pwqak8ercso3w8z2glc0.png"></p><br><p>  Vielen Dank f√ºr Ihre Aufmerksamkeit.  Meine Kontakte auf der Folie. </p><br><p>  Frage: Sagen Sie mir, haben Sie vorgefertigte Konfigurationsdateien, die Sie in Open Access stellen und die Sie einfach herunterladen und verwenden k√∂nnen, um die Tonnen von Golangci-Lint-Einstellungen nicht zu verstehen?  Was Sie empfehlen. </p><br><p>  Antwort: Gute Idee.  Golangci-lint selbst hat bereits eine eigene golangci-lint.yaml, die es verwendet.  Sie k√∂nnen es als Ausgangspunkt verwenden. </p><br><p>  Frage: Lesen Sie auf der Folie zum Build-Cache den Cache f√ºr Module.  Im Cache geben Sie den gesamten Modulcache an.  Sie k√∂nnen .cache / downloads angeben, dann gibt es einen ziemlich gro√üen Unterschied: 400 Megabyte gegen√ºber 10. Dies reicht aus, um die Module einfach zu extrahieren.  Dies ist jedoch nur m√∂glich, wenn das Modul verwendet wird. </p><br><p>  Frage: Werden Sie auch go-Module oder dep unterst√ºtzen oder in etwas in einem gehen? </p><br><p>  Antwort: Keine Notwendigkeit, die man unterst√ºtzt.  Jetzt gibt es eine Go-Paketbibliothek.  Sie ist mit dem Laden des Quellcodes besch√§ftigt.  Es unterst√ºtzt sowohl Module als auch Nichtmodule.  Sie wird die Unterst√ºtzung f√ºr Nicht-Module noch nicht entfernen. </p><br><p>  Frage: Planen Sie verschiedene Plugins f√ºr die Integration nicht nur mit Travis, sondern auch mit anderen Automatisierungsservern? </p><br><p>  Antwort: golangci-lint f√ºhrt keine Integration durch.  Um in CI zu laufen, rufen Sie einfach golangci-lint --run auf. </p><br><p>  Frage: Um einige Berichte zu analysieren, zum Beispiel in Jenkins, speichern wir eine HTML-Datei. </p><br><p>  Antwort: Es gibt ein Ausgabeformat junit, csv, json xml.  All dies kann bereits analysiert werden. </p><br><p>  Frage: Wir haben vorher Gometalinter verwendet und es war langsam.  Dann wechselten wir zu einem Linter namens Revive.  Du hast ihn √ºberhaupt nicht erw√§hnt.  Und ich f√ºr meinen Teil bin √ºberhaupt kein Experte in diesem Thema.  Ich wusste nichts √ºber deinen Linter, was du erz√§hlt hast.  K√∂nnten Sie am Ende schreiben, sagen wir die Profis Ihres Linter oder die Profis der Wiederbelebung. </p><br><p>  Antwort: revive ist ein umgeschriebener Golint.  Dies ist nur einer der Linter.  Es gibt Einstellungen.  Er f√ºgte auch ein paar Linter hinzu, ein paar Schecks.  Golangci-Flusen sind in sich 30-50 Linter.  Dies ist eine Wiederbelebung von anderthalb Linter.  Revive ist insofern cool, als es Golint nimmt und es parallel macht.  Beleben Sie die Arbeit schneller wieder als Golint.  Dies ist jedoch nur ein Linter.  Revive kann Teil von Golangci-Flusen sein. </p><br><p>  Frage: Sie hatten eine Folie in der √úberpr√ºfung der Linters √ºber gocritic: vastParam, die empfohlen wird, um fett gedruckte Strukturen per Zeiger zu √ºbertragen.  Dies wird jedoch dazu f√ºhren, dass alle diese Strukturen ausschlie√ülich in HEAP zugewiesen werden.  Und wird dies nicht zu gr√∂√üeren Problemen als Vorteilen f√ºhren?  Wenn solche Strukturen zum Beispiel viel √ºbertragen werden. </p><br><p>  Antwort: Ich stimme vollkommen zu.  Sie sollten diese Warnungen nicht verwenden und sie nicht einfach befolgen.  Es kann wie eine vorzeitige Optimierung sein, es kann dem Projekt schaden.  Normalerweise schalte ich diese Klasse von Lintern im Allgemeinen aus, wenn ich nicht die Leistung einer kritischen Aufgabe habe.  wo ich Schw√§chen mit dem Profiler finde. </p><br><p>  Frage: Ich komme aus Yandex.  Wir verwenden Ihren Linter in einem gro√üen Repository.  Wir haben festgestellt, dass er bereits sehr schnell f√ºr ein gro√ües Repository arbeitet.  In nur wenigen Tagen haben sie ein einfaches Dienstprogramm geschrieben, das √ºber go package Pakete findet, die sich seit Einf√ºhrung des Zweigs vom Assistenten ge√§ndert haben, sowie Pakete, die von ihnen abh√§ngen.  Und lassen Sie den Linter nur auf ihnen laufen.  Und der Lintercheck wurde mehrmals beschleunigt. </p><br><p>  Antwort: Vielleicht erstellen Sie eine IDSUE, f√ºgen ein Skript hinzu, und m√∂glicherweise werde ich all dies in Golangci-Lint einbetten. </p><br><p>  Frage: Sind f√ºr die gefundenen Kommentare Schweregrade geplant, damit einige in den Bericht aufgenommen werden k√∂nnen, der CI-Prozess jedoch nicht gef√§lscht wird?  Zum Beispiel durch den Abschlusscode. </p><br><p>  Antwort: Viele Leute haben gefragt und ich werde sofort sagen, dass die Schwierigkeit darin besteht, dass diese Ernsthaftigkeit sie alle unterst√ºtzt. Es gibt 3 oder 4 von 30 Linter. Was tun mit Stahl?  Unverst√§ndlich.  Es ist notwendig, ihre Kommentare manuell zu analysieren und sie irgendwie zu markieren.  Behandeln Sie falsch positive Ergebnisse.  Dies ist in der Regel ein gro√üer Arbeitsaufwand.  Ich bin mir nicht sicher, was wann gemacht wird.  Es gibt andere M√∂glichkeiten, um das gleiche Ziel zu erreichen. </p><br><p>  Frage: Es gibt Artikel auf dem Hub  Genauer gesagt, eine Reihe von Artikeln √ºber C ++ Linter.  Das Unternehmen entwickelt dieses Gesch√§ft.  Sie verdienen Geld damit.  Tats√§chlich richtet sich ihre Arbeit oder vielmehr diese Reihe von Ver√∂ffentlichungen nicht mehr an Entwickler, sondern eher an diejenigen, die Entwickler verwalten.  Dies ist im Wesentlichen reiner Code, Stilisierung.  Dies ist unsere Aufgabe, aber auch die Aufgabe von F√ºhrungskr√§ften, Teamleitern.  Planen Sie, diese Medienreihe hier in gro√üen Mengen solcher Ressourcen bekannt zu machen, damit die Leute sie lesen und dann ihren Teams vorstellen k√∂nnen?  Und nicht wir haben von unten geklopft. </p><br><p>  Antwort: Ich hatte einen Plan.  Danke f√ºr das Angebot.  Ich hatte vor, einen umfassenden Artikel wie diese Rede zu schreiben, aber dort im Laufe des Jahres ausf√ºhrlicher und umfassender.  Vielleicht schreibe ich auf Russisch und Englisch. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de457970/">https://habr.com/ru/post/de457970/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de457960/index.html">Besprechungsraum LÃ∂iÃ∂tÃ∂tÃ∂lÃ∂eÃ∂ Helfer v 2</a></li>
<li><a href="../de457962/index.html">Wie bei der Thrash-Architektur und dem Mangel an F√§higkeiten in Scrum haben wir komponenten√ºbergreifende Teams erstellt</a></li>
<li><a href="../de457964/index.html">Echte Virtualit√§t: Workstations ++</a></li>
<li><a href="../de457966/index.html">‚ÄûIch w√ºrde eine spezielle IT-Zone im S√ºden Russlands er√∂ffnen‚Äú - 10 Fragen an Programmierer Nr. 11. Neue Saison</a></li>
<li><a href="../de457968/index.html">Parallelen, die sich √ºberschneiden - das Kommunikationsministerium hat √ºber Nacht Milliarden an Budgets verbrannt</a></li>
<li><a href="../de457972/index.html">ClangFormat und Notepad ++ Integration</a></li>
<li><a href="../de457978/index.html">18 Tricks zum Arbeiten mit Visual Studio</a></li>
<li><a href="../de457980/index.html">Neuronale Netze und tiefes Lernen, Kapitel 2: Funktionsweise des Backpropagation-Algorithmus</a></li>
<li><a href="../de457982/index.html">Umzug ins Ausland: 6 Dienste zur Unterst√ºtzung von Einwanderern in den USA und Kanada</a></li>
<li><a href="../de457986/index.html">JetBrains Open Day 2019: Sendungen melden</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>