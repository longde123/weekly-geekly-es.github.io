<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎽 🦃 🧖🏽 GitHub startet seine Tentakel im CI / CD- und Artefaktmanagement 👩🏾‍🤝‍👩🏻 🖲️ 🚶🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im Mai 2019 gab GitHub die Veröffentlichung des Paketregistrierungsdienstes bekannt . Im Anschluss daran wurde bereits im August die Unterstützung für...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>GitHub startet seine Tentakel im CI / CD- und Artefaktmanagement</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468345/"><p>  Im Mai 2019 gab GitHub <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die</a> Veröffentlichung des Paketregistrierungsdienstes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bekannt</a> .  Im Anschluss daran wurde bereits im August die Unterstützung für CI / CD in Actions <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">angekündigt</a> . </p><br><p>  In dem Artikel werde ich Ihnen erklären, welche Art von Diensten es gibt und wie diese am Beispiel eines kleinen Haustierprojekts auf GitHub verwendet werden können. </p><br><p><img src="https://habrastorage.org/webt/7s/te/zf/7stezfizd-3i3zlnp0xbay3ttou.png"></p><a name="habracut"></a><br><h2 id="chto-eto-za-servisy-takie">  Um welche Art von Dienstleistungen handelt es sich? </h2><br><p>  GitHub Actions ist eine Plattform, mit der Sie den Software-Lebenszyklus verwalten können, dessen Quellcode auf GitHub gehostet wird.  Tatsächlich haben TravisCI, CircleCI und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">viele andere</a> kostenlose CI / CD-Plattformen mit Actions einen neuen Konkurrenten erhalten. </p><br><p>  GitHub Package Registry ist das zentrale Repository für Artefakte. Derzeit werden fünf verschiedene Arten von Artefakten unterstützt. </p><br><p> <em>Unterstützte Artefakttypen in Aktionen</em> </p><br><div class="scrollable-table"><table><thead><tr><th>  Unterstützung bei Aktionen </th><th>  Analog </th><th>  Sprache </th></tr></thead><tbody><tr><td>  NPM-Pakete </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.npmjs.com/</a> </td><td>  Javascript </td></tr><tr><td>  Docker-Bilder </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://hub.docker.com/</a> </td><td>  - - </td></tr><tr><td>  Maven Artefakte </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://mvnrepository.com/</a> </td><td>  Java </td></tr><tr><td>  Nuget-Pakete </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://www.nuget.org/</a> </td><td>  .NET </td></tr><tr><td>  Rubin Edelsteine </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://rubygems.org/</a> </td><td>  Ruby </td></tr></tbody></table></div><br><p>  Dies ist eine bequeme Gelegenheit, alle Artefakte an einem Ort zu haben, da es nicht immer ratsam ist, Ihren Nexus- oder Artifactory-Server bereitzustellen. </p><br><p>  GitHub wird GitLab immer ähnlicher und irgendwo, wo es bereits einen Gegner übertroffen hat, unterstützt GitLab beispielsweise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">noch keine</a> NuGet-Pakete und Ruby-Edelsteine.  Wenn Sie früher für Open Source-Projekte externe Integrationen mit GitHub verbinden mussten, befinden sich jetzt alle Eier in einem Korb.  Hier kann jeder entscheiden, ob es gut oder schlecht ist, aber zumindest ist es bequem. </p><br><h2 id="kak-poprobovat">  Wie versuche ich es? </h2><br><p>  Beide Dienste befinden sich derzeit im Beta-Modus. Auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesen</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Seiten</a> können Sie sich für einen Beta-Test registrieren. </p><br><p>  Die Migration von anderen Diensten ist sehr einfach. Ich habe mehrere meiner Lieblingsprojekte von TravisCI und DockerHub auf Actions bzw. Package Registry migriert. </p><br><p>  Ich werde Ihnen in einem Beispiel zeigen, wie es aussieht.  Das Projekt ist das häufigste, ich habe darüber in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem</a> Artikel geschrieben.  Nichts kompliziertes, der übliche LaTeX-Code, mit dessen Hilfe Artefakte gesammelt werden (2 PDF-Dateien), werden in GitHub-Releases veröffentlicht.  Um nicht eine Reihe von LaTeX-Paketen herunterzuladen, habe ich eine Docker-Datei geschrieben, damit Sie bequem von jedem Betriebssystem aus arbeiten können. </p><br><h3 id="package-registry">  Paketregistrierung </h3><br><p>  Um mit der Paketregistrierung anstelle von DockerHub zu arbeiten, müssen Sie nur zwei einfache Schritte ausführen. <br>  Wir erstellen ein Token in den GitHub-Einstellungen (das Token muss zum Schreiben und Lesen von Artefakten berechtigt sein). </p><br><p><img src="https://habrastorage.org/webt/7z/aj/p_/7zajp_bcvr7zvdvup4ocwkavs9s.png"><br>  <em>Seite zur Token-Erstellung</em> </p><br><p>  Und dann können wir uns mit dem erstellten Token authentifizieren und Artefakte pushen, so einfach ist das: </p><br><pre><code class="bash hljs">docker login docker.pkg.github.com --username amet13 docker tag docker-latex:0.0.1 docker.pkg.github.com/amet13/master-thesis/docker-latex:0.0.1 docker push docker.pkg.github.com/amet13/master-thesis/docker-latex:0.0.1</code> </pre> <br><p>  Bitte beachten Sie, dass ich meinen Spitznamen auf GitHub ausdrücklich in Kleinbuchstaben angegeben habe, andernfalls wird von Docker eine Fehlermeldung angezeigt: </p><br><pre> <code class="plaintext hljs">Error parsing reference: "docker.pkg.github.com/Amet13/master-thesis/docker-latex:0.0.1" is not a valid repository/tag: invalid reference format: repository name must be lowercase</code> </pre> <br><p>  So sieht es in der GitHub-Weboberfläche aus: </p><br><p><img src="https://habrastorage.org/webt/il/n1/lk/iln1lkji7xcbwutpodohhtu6mac.png"><br>  <em>Paketregistrierungsseite für Docker-Images</em> </p><br><p>  Zusätzlich zu den Anweisungen zum Herunterladen des neuesten Bildes stehen Download-Statistiken zur Verfügung. Sie können eine separate Docker-Ebene über die Weboberfläche herunterladen. Der Download-Verlauf der Bilder ist verfügbar. </p><br><h3 id="actions">  Aktionen </h3><br><p>  Aktionen sind etwas komplizierter, aber für diejenigen, die jemals mit einem anderen CI / CD-System gearbeitet haben, wird es nicht schwer zu verstehen sein.  Die Konfiguration in Aktionen wird durch deklarative YAML beschrieben, obwohl zuvor HCL <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verwendet wurde</a> . </p><br><p>  Einige grundlegende Konzepte (ich werde die Definitionen nicht absichtlich übersetzen, ich denke, hier ist alles klar): </p><br><ul><li>  Workflow - Ein Prozess, der den Software-Lebenszyklus (Erstellen, Testen, Packen, Freigeben, Bereitstellen) für das Repository verwaltet </li><li>  Workflow-Datei - Die Datei, in der der Workflow beschrieben wird, befindet sich im Stammverzeichnis des Repositorys im Verzeichnis <code>.github/workflows/</code> </li><li>  Job ist jeder Lauf des Workflows. Job wird ausgelöst. Zu einem bestimmten Zeitpunkt können viele Jobs gestartet werden </li><li>  Schritt - Jeder Job hat einen Schritt. Bei jedem Schritt können Sie Befehle oder Aktionen ausführen </li><li>  Aktion - Ein von jemandem geschriebenes „Plug-In“. Eine Liste mit vielen Aktionen finden Sie im Repository für <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">fantastische Aktionen</a> </li><li>  Virtuelle Umgebung - die Umgebung, in der Job ausgeführt wird (tatsächlich handelt es sich um eine virtuelle Maschine unter Windows, MacOS oder Linux). </li><li>  Runner ist eine bereitgestellte Umgebung zum Starten eines Jobs. Es kann jeweils nur ein Job auf Runner ausgeführt werden </li><li>  Ereignis - Ein Ereignis, das den Workflow auslöst, z. B. Push, Pull Request, Webhook, Cron Job usw. </li><li>  Artefakt - Artefakte (Binärdateien, Bilder, Protokolle usw.) </li></ul><br><p><img src="https://habrastorage.org/webt/li/o5/wo/lio5wo4cvnajpzvw29ohncr2v20.png"><br>  <em>So sieht die Seite Jobliste im Workflow aus.</em> </p><br><p>  Einschränkungen und Verbote: </p><br><ul><li>  20 Workflows pro Repository </li><li>  1000 API-Anforderungen pro Stunde für alle Aktionen im Repository </li><li>  maximale Arbeitszeit - 6 Stunden </li><li>  20 Jobs können im Repository parallel arbeiten (für alle Workflows) </li><li>  Es ist verboten, Aktionen für Cryptocurrency Mining und Serverless Computing zu verwenden </li></ul><br><p>  Die aktuellste Dokumentation finden Sie unter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem Link</a> . </p><br><p><img src="https://habrastorage.org/webt/vt/up/tn/vtuptngx2wtzrzoz8g_odzyases.png"><br>  <em>Und hier sind die Protokolle eines Jobs</em> </p><br><h3 id="primer">  Beispiel </h3><br><p>  Kehren wir zum Beispiel zurück. <a href="">Hier ist,</a> wie meine Konfiguration aussieht. Wir werden sie in Teilen genauer analysieren. </p><br><p>  Geben Sie einen Namen für den Workflow an und beschreiben Sie, auf welchen Trigger er ausgelöst werden soll (eine Liste aller Trigger finden Sie in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> ): </p><br><pre> <code class="plaintext hljs">name: master-thesis on: [push]</code> </pre> <br><p>  In welcher virtuellen Umgebung wird Job ausgeführt: </p><br><pre> <code class="plaintext hljs">jobs: build: # ubuntu-latest, ubuntu-18.04, or ubuntu-16.04 # windows-latest, windows-2019, or windows-2016 # macOS-latest or macOS-10.14 runs-on: ubuntu-latest</code> </pre> <br><p>  Der erste Schritt, im <code>name:</code> Geben Sie den Namen des Schritts an (optional), und in <code>uses:</code> Welche Aktion möchten wir verwenden? In diesem Fall klonen Sie das Repository: </p><br><pre> <code class="plaintext hljs"> steps: - name: Checkout repo uses: actions/checkout@v1</code> </pre> <br><p>  Im nächsten Schritt verwenden wir keine Aktion, sondern nur eine Reihe unserer Befehle, mit denen wir uns bei der Paketregistrierung anmelden, das Docker-Image sammeln und in das Image-Repository verschieben.  Im <code>env:</code> Block <code>env:</code> setzen Umgebungsvariablen, wir nehmen eine davon aus Geheimnissen: </p><br><pre> <code class="plaintext hljs"> - name: Build docker image and push it to the registry env: GITHUB_TOKEN: ${{ secrets.GH_TOKEN }} DOCKER_IMAGE_ORIGIN: "docker.pkg.github.com/amet13/master-thesis/docker-latex" run: | # Pull submodules git submodule init git submodule update --remote # Login to GitHub Packages and build Docker image docker login docker.pkg.github.com -u amet13 -p ${GITHUB_TOKEN} docker pull ${DOCKER_IMAGE_ORIGIN}:latest docker build -t ${DOCKER_IMAGE_ORIGIN}:${GITHUB_SHA} . # Generate PDF artifacts docker run --rm -i \ -v ${PWD}:/master-thesis:Z ${DOCKER_IMAGE_ORIGIN}:${GITHUB_SHA} \ bash -c "latexmk -xelatex -synctex=1 -jobname=master-thesis main.tex" docker run --rm -i \ -v ${PWD}:/master-thesis:Z ${DOCKER_IMAGE_ORIGIN}:${GITHUB_SHA} \ bash -c "cd presentation/ &amp;&amp; latexmk -xelatex -synctex=1 -jobname=presentation main.tex" # Publish Docker image to GitHub Packages (with latest tag) docker tag ${DOCKER_IMAGE_ORIGIN}:${GITHUB_SHA} ${DOCKER_IMAGE_ORIGIN}:latest docker push ${DOCKER_IMAGE_ORIGIN}:${GITHUB_SHA} docker push ${DOCKER_IMAGE_ORIGIN}:latest</code> </pre> <br><p>  Ich bin sicher, dass in naher Zukunft eine Aktion angezeigt wird, die Bilder automatisch markiert und pusht, anstatt Docker-Befehle manuell zu schreiben. </p><br><p><img src="https://habrastorage.org/webt/bg/gw/oa/bggwoan0cceznbnkt5e_xqga1yo.png"><br>  <em>Hinzufügen eines Geheimnisses mit einem Github-Token</em> </p><br><p>  Der nächste Schritt nach dem Erstellen der PDFs besteht darin, eine Version auf GitHub zu erstellen und die gesammelten Artefakte in diese Version aufzunehmen.  Um automatisch ein Release zu erstellen, verwenden wir eine Aktion eines <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Drittanbieters</a> , in der Sie im <code>if:</code> -Block die Bedingung für das Starten des Schritts angeben können - nur beim Erstellen des Tags: </p><br><pre> <code class="plaintext hljs"> - name: Create GitHub release with artifacts uses: softprops/action-gh-release@v1 if: startsWith(github.ref, 'refs/tags/') with: files: | master-thesis.pdf presentation/presentation.pdf name: "Build ${GITHUB_SHA}" env: GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}</code> </pre> <br><h2 id="itogi">  Zusammenfassung </h2><br><p>  Trotz des Beta-Status funktionieren beide Dienste gut. Ich bin sicher, dass viele Dinge erledigt sein werden. <br>  An einigen Stellen kann es unpraktisch sein, es gibt keine globalen Variablen, aber dies kann mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Krücken erfolgen</a> . </p><br><p>  Ich mochte den GitHub-Ansatz, HCL zugunsten von YAML aufzugeben.  Ich mochte auch die Unterstützung für viele Arten von Hosts, die (vorerst) sehr sparsam sind. Mal sehen, wie es weitergeht.  Im Allgemeinen funktioniert ein solcher Haufen für einfache Pipelines in öffentlichen Repositories auf GitHub sehr gut. </p><br><p>  <em>Die Übersetzung dieses Artikels ist bereits auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Medium</a> .</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de468345/">https://habr.com/ru/post/de468345/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de468333/index.html">So debuggen und profilieren Sie exe-Dateien mit Visual Studio</a></li>
<li><a href="../de468337/index.html">Arbeiten mit cron für Android und Hinzufügen eines Shell-Skripts zum automatischen Ausführen, wenn das Gerät gestartet wird</a></li>
<li><a href="../de468339/index.html">Einführung in das Dark Theme für Visual Studio App Center</a></li>
<li><a href="../de468341/index.html">Azure Cloud Shell auf dem Windows-Terminal</a></li>
<li><a href="../de468343/index.html">Jeff Bezos: "Zum Wohl der Erde in den Weltraum gehen"</a></li>
<li><a href="../de468347/index.html">MetricKit. Leistungsanalyse von iOS-Anwendungen</a></li>
<li><a href="../de468351/index.html">Marktmikrostruktur und negative Selektion</a></li>
<li><a href="../de468363/index.html">Mein Magnum Opus aus der Welt des Mobile Gaming</a></li>
<li><a href="../de468367/index.html">Amazon kündigt Plan zur globalen Erwärmung an</a></li>
<li><a href="../de468369/index.html">Wie ich „WildMAN“ erstellt habe - eine Parodie auf viele 8-Bit-Spiele und sie kürzlich auf Android portiert habe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>