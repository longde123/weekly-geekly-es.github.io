<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëΩ üññüèª üçû Comment fonctionnent les balles dans les jeux vid√©o? üî± üëå ‚è≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les jeux FPS (jeu de tir √† la premi√®re personne, jeu de tir √† la premi√®re personne) sont devenus une partie int√©grante de l'industrie du jeu vid√©o dep...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment fonctionnent les balles dans les jeux vid√©o?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475420/">  Les jeux FPS (jeu de tir √† la premi√®re personne, jeu de tir √† la premi√®re personne) sont devenus une partie int√©grante de l'industrie du jeu vid√©o depuis l'av√®nement du <em>Wolfenstein 3D</em> le plus populaire en 1992.  Depuis, le genre a √©volu√©: les graphismes se sont am√©lior√©s, les budgets de d√©veloppement ont augment√© et l'√©cosyst√®me e-sports s'est d√©velopp√©.  Mais qu'en est-il de leur fondation - la m√©canique de tir?  Comment s'est pass√© le d√©veloppement sur ce front?  Pourquoi les armes semblent-elles r√©elles dans certains jeux et comme des jouets dans d'autres? <br><br><h1>  Hitscan </h1><br>  √Ä l'√©poque pr√©c√©dente, de nombreux jeux de rendu de sc√®nes 3D en images 2D utilisaient une technique appel√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="noopener nofollow">raycasting</a> .  Le raycasting permet au moteur de d√©terminer le premier objet avec lequel le faisceau croise.  Mais ensuite, les d√©veloppeurs ont pos√© la question: ¬´Et si vous sortiez un faisceau du canon de l'arme pour simuler une balle?¬ª Gr√¢ce √† cette id√©e, un hitcan est n√© (¬´hit scanning¬ª). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/edd/52e/e9f/edd52ee9f987eed8d495a47b5cb300d1.gif" width="557" height="200"></div><br>  <i>Exemple de diffusion de rayons</i> <br><br>  Dans la plupart des impl√©mentations d'armes avec hitcan, lorsqu'un joueur tire, le moteur physique effectue les op√©rations suivantes: <br><br><ul><li>  D√©finit la direction dans laquelle l'arme pointe. </li><li>  Lib√®re un faisceau d'un canon d'arme √† une distance pr√©d√©termin√©e. </li><li>  Utilise la diffusion de rayons pour d√©terminer si un rayon a frapp√© l'objet. </li></ul><br>  Si le moteur d√©termine que l‚Äôobjet est sur la ligne de feu, il l‚Äôinformera de cela, disant que la balle l‚Äôa ¬´touch√©¬ª.  Ensuite, la cible peut effectuer tous les calculs n√©cessaires pour enregistrer les d√©g√¢ts. <a name="habracut"></a><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d00/b25/587/d00b2558736abf59879e8ae221070557.png" width="1280" height="720"></div><br>  <i>De l' <strong>unit√©</strong> .</i>  <i>Le point A d√©signe une arme √©mettant un faisceau au point maximum B. Le faisceau entre en collision avec un cube auquel le moteur signale qu'il a √©t√© touch√©.</i> <br><br>  Hitscan est intrins√®quement simple, mais de nombreuses modifications diff√©rentes peuvent √™tre apport√©es pour ajouter une autre logique: <br><br><ul><li>  Si nous continuons le faisceau au-del√† du premier objet qu'il frappe, nous pouvons percer plusieurs objets sur la ligne, comme le railgun dans <em>Quake</em> </li><li>  Si nous supprimons la port√©e maximale du faisceau, nous obtenons un laser qui volera pour toujours jusqu'√† ce qu'il frappe quelque chose </li><li>  Vous pouvez programmer certaines surfaces r√©fl√©chissantes de sorte que les balles rebondissent sur elles </li></ul><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed//7fY4Lgw/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>  <i><strong>Overwatch.</strong></i>  <i>La capacit√© de d√©viation du caract√®re Genji est un exemple de surface r√©fl√©chissante.</i> <br><br>  Le principal avantage du raycasting est sa vitesse de traitement √©norme.  Il est calcul√© rapidement et ne n√©cessite pas de m√©moire suppl√©mentaire ni de temps processeur pour cr√©er un nouvel objet physique.  Cela signifie que le code r√©seau n√©cessaire pour synchroniser plusieurs clients sera minimal, car le serveur n'a besoin que de suivre la direction du faisceau.  Le recul est √©galement r√©alis√© simplement, pour simuler cet effet, il suffit d'ajouter une l√©g√®re d√©viation √† la vue de l'arme. <br><br>  Par cons√©quent, il n'est pas surprenant que hitscan soit utilis√© dans la logique de tir de nombreux jeux.  Les exemples classiques sont <em>Wolfenstein 3D</em> et <em>Doom</em> , mais cette technologie est √©galement utilis√©e dans les jeux modernes.  Des personnages comme Soldier 76, McCree et <em>Overwatch</em> Doom Widow utilisent des armes avec hitscan, et la plupart des armes dans <em>Call of Duty sont</em> √©galement bas√©es sur hitscan. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed//GJlka1y/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed//IeCD3nN/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed//1mOUKye/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><strong>Overwatch, Call of Duty, Wolfenstein 3D</strong></i> <br><br>  Alors pourquoi cette approche n'est-elle pas utilis√©e dans tous les jeux? <br><br>  Premi√®rement, comme vous l'avez probablement remarqu√©, les rayons ont une vitesse de mouvement infiniment √©lev√©e, c'est-√†-dire qu'ils atteignent instantan√©ment le point final.  Il n'y a pas de temps pour le mouvement d'une balle entre le tir d'une balle et la frappe d'un objet.  Cela signifie que si un rayon frappe un objet, il est impossible d'√©viter une balle, m√™me si la cible est √† plusieurs kilom√®tres du joueur. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed//w9eDJ1u/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><strong>Halo.</strong></i>  <i>Notez que le coup de canon et les effets de toucher le sol se produisent simultan√©ment.</i> <br><br>  Deuxi√®mement, la plupart des impl√©mentations hitcan utilisent des faisceaux directs.  Cela signifie qu'il est difficile de prendre en compte le vent, la gravit√© et d'autres facteurs externes qui peuvent affecter la balle apr√®s avoir vol√© hors du tronc.  Les programmeurs peuvent ajouter toutes sortes d'astuces pour que le faisceau imite de vraies balles, mais d√®s que le joueur "tire" sur le faisceau, il n'y a aucun moyen de changer son chemin au milieu. <br><br>  Dans de nombreux jeux occasionnels, hitscan est toujours utilis√© car il simplifie la courbe d'apprentissage pour la plupart des nouveaux joueurs.  Mais qu'en est-il des jeux cherchant √† transmettre la "vraie" sensation de tir?  Avec de telles restrictions, cela est impossible √† r√©aliser, donc une m√©thode diff√©rente est n√©cessaire. <br><br><h1>  Balistique d'un objet volant </h1><br>  Ce terme peut sembler compliqu√©, mais √† un niveau abstrait, l'id√©e est assez simple.  Chaque balle ou projectile tir√© d'une arme cr√©e un nouvel objet physique dans la sc√®ne.  Il a sa propre masse, sa vitesse et son propre cadre de contact (hitbox), qui sont suivis par le moteur de jeu. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed//Ta02qiP/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <strong>Max Payne 3</strong> <br><br>  Les avantages de la balistique se manifestent pleinement dans les jeux o√π le r√©alisme a la plus haute priorit√©.  √âtant donn√© que chaque objet volant existe seul, nous pouvons prendre en compte l'influence du vent, du frottement, de la gravit√©, de la temp√©rature - toute force qui devrait agir sur la balle.  Maintenant que nous pouvons changer la physique, les joueurs peuvent utiliser des armes plus diverses, pas seulement de simples pistolets et lasers;  nous pouvons ajouter des grenades et des roquettes √† notre arsenal. <br><br>  √âtant donn√© que les balles dans un tel syst√®me ne se d√©placent pas √† la vitesse de la lumi√®re, il est √©galement possible de r√©aliser des propri√©t√©s temporelles: <br><br><ul><li>  Bullet Time utilis√© par <em>Max Payne</em> , <em>Sniper Elite</em> et <em>Superhot</em> . </li><li>  Le temps de d√©placement des balles, c'est-√†-dire lors du tir √† longue distance (ou lors du tir d'un projectile se d√©pla√ßant lentement), la pr√©emption devient critique. </li><li>  Explosions d'obus retard√©es, telles que des grenades </li></ul><br>  En raison de ces calculs suppl√©mentaires, le traitement devient plus co√ªteux que l'utilisation de hitscan.  Pour assurer la synchronisation, les serveurs doivent faire beaucoup plus de travail, il est n√©cessaire d'√©liminer les divergences ou les conflits dans la logique c√¥t√© client, afin que tous les joueurs d'un m√™me serveur soient dans les m√™mes conditions. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed//RqTJFm3/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed//XZ4Smxa/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed//qsfueqP/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <strong>Superhot, Battlefield 1, Overwatch</strong> <br><br>  Il existe de nombreuses solutions pour maximiser la productivit√©.  Par exemple, le moteur peut stocker un pool d'objets charg√©s avant le d√©but du jeu et les ¬´activer¬ª selon les besoins.  Apr√®s avoir touch√© la surface, vous pouvez jouer l'animation de la balistique et √©teindre la balle, en l'enregistrant pour l'avenir.  Cette m√©thode vous permet d'√©conomiser les ressources informatiques et la m√©moire occup√©es par la cr√©ation et la destruction multiples d'objets. <br><br>  Il existe √©galement de nombreuses fa√ßons d'effectuer des calculs, mais √† un niveau √©lev√©, la diff√©rence r√©side dans le lieu o√π ils d√©cident de traiter le "tact" du jeu - une unit√© de temps: <br><br><ul><li>  L'horloge est calcul√©e s√©par√©ment de la logique de rendu, c'est-√†-dire que le jeu aura une reproduction plus pr√©cise des objets m√™me lorsque les images sont saut√©es.  Plus de logique est n√©cessaire pour calculer le temps exact √©coul√© depuis le rendu pr√©c√©dent. </li><li>  Calcul d'une mesure dans chaque trame;  lier la physique √† la fr√©quence d'images.  Si vous d√©sactivez la restriction sur la fr√©quence d'images maximale ou si le jeu commence √† sauter des images, la physique du monde acc√©l√©rera ou ralentira. </li></ul><br>  Les effets de la liaison du mouvement aux mesures sont clairement visibles lorsque les obus se d√©placent assez rapidement pour parcourir une distance assez grande entre les mesures.  Des situations peuvent survenir lorsque des objets ¬´se croisent¬ª, car dans le moteur, ils ne se sont jamais intersect√©s. <br><br>  Tout cela semble compliqu√©, tant de gens pensent que c'est une m√©thode relativement nouvelle;  cependant, cela s'est produit avant que hitscan!  Avant les jeux FPS, il y avait de nombreux tireurs de haut en bas comme <em>Asteroids</em> , <em>Space Invaders</em> ou <em>Galaxian</em> .  Ce sont des jeux d'arcade des ann√©es 70, dans lesquels la balistique des obus a d√©j√† √©t√© mise en ≈ìuvre, bien que de mani√®re assez primitive. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed//P7jEjjn/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><strong>Ast√©ro√Ødes.</strong></i>  <i>Les coquilles sont assez difficiles √† voir, mais elles le sont!</i> <br><br>  Mais m√™me avec toutes ces fonctionnalit√©s, nous ne pouvons pas recr√©er un mod√®le r√©aliste du monde r√©el.  Existe-t-il un moyen de tirer parti des deux m√©thodes? <br><br><h1>  Syst√®mes hybrides </h1><br>  La plupart des moteurs de jeu sont capables de g√©rer les deux types de simulation de balle: hitcan et balistique.  Cela vous permet de r√©aliser une vaste s√©lection d'armes;  des jeux comme <em>Halo</em> , <em>GTA</em> et <em>Half-Life</em> ont des armes qui peuvent prendre en charge les deux types de physique. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed//61FC8Xd/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed//JmAm4jc/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><strong>Halo.</strong></i>  <i>Le fusil d'assaut utilise hitscan;</i>  <i>Needler utilise la balistique des projectiles</i> <br><br>  Les d√©veloppeurs peuvent √©galement m√©langer les deux techniques pour couvrir les faiblesses de chaque syst√®me et fournir un comportement plus r√©aliste.  Par exemple, pour √©liminer le probl√®me de passage d'objets entre eux, chaque balle dans chaque cycle du moteur peut √©mettre un faisceau.  Cela permet au moteur de voir si l'un des rayons se croise entre les mesures et entre en collision dans l'air. <br><br>  Ils peuvent √©galement √™tre combin√©s pour am√©liorer les fonctionnalit√©s du jeu.  Un bon exemple de cela est la s√©rie <em>Sniper Elite</em> ;  apr√®s avoir appuy√© sur la g√¢chette, le moteur utilise le hit-scan pour d√©terminer si le tir est effectu√© suffisamment pr√®s d'un objet d√©tectable pour d√©clencher un ralenti.  Si c'est le cas, alors une balle est tir√©e avec le calcul de la balistique en mode "bullet-time". <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed//OAbRWU1/embed?ref=https" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i><strong>Sniper elite</strong></i> <br><br>  Nous avons donc examin√© les bases du comportement des balles dans les jeux vid√©o!  Fait int√©ressant, les am√©liorations dans ce domaine concernent principalement de petites optimisations et am√©liorations, et non un traitement √† grande √©chelle.  Apr√®s la sortie des premiers jeux r√©volutionnaires, nous n'avons fait aucune √©tape ni perc√©e significative. <br><br>  Et ensuite?  Comment ce domaine se d√©veloppera-t-il √† l'avenir? <br><br>  Je ne pense pas que dans un proche avenir, l'approche hybride dispara√Ætra, car elle offre des avantages suppl√©mentaires.  Mais je pr√©dis qu'il y aura de nombreuses am√©liorations de la part de la balistique des obus.  La fr√©quence de calcul de l'horloge continue d'augmenter (car la puissance CPU augmente), et on peut se rapprocher de la limite asymptotique de la simulation de la balle ¬´monde r√©el¬ª. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr475420/">https://habr.com/ru/post/fr475420/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr475404/index.html">Mod√®le BLoC avec un exemple simple</a></li>
<li><a href="../fr475406/index.html">Comme j'ai √©crit le bot pour l'√©cole d / z et chang√© la base de donn√©es</a></li>
<li><a href="../fr475408/index.html">Caract√©ristiques du paiement des imp√¥ts par les ind√©pendants IT ind√©pendants</a></li>
<li><a href="../fr475416/index.html">L'intelligence artificielle dans son propre SOC: les responsables des centres de surveillance des cyberattaques r√™vent-ils d'analyses √©lectriques</a></li>
<li><a href="../fr475418/index.html">Discussion: pourquoi l'h√©bergement vid√©o populaire supprime de plus en plus de contenu avec des guides de pirates</a></li>
<li><a href="../fr475424/index.html">Vol avec un dosim√®tre dans votre poche</a></li>
<li><a href="../fr475426/index.html">BIM, CAD ou MCAD? Repenser la conception architecturale</a></li>
<li><a href="../fr475430/index.html">Mission: trouver un emploi au coll√®ge</a></li>
<li><a href="../fr475432/index.html">L'histoire d'un piratage ou de la col√®re du programmeur</a></li>
<li><a href="../fr475434/index.html">- Nous vous rappellerons</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>