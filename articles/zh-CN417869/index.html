<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍍 📓 ❕ 如何调试WebRTC 🆘 🤸🏻 👩🏻‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="自成立以来，Voximplant一直在使用WebRTC：首先作为Flash的替代产品进行语音和视频通话，然后完全替代。 这项技术的发展道路漫长而痛苦，直到最近所有主要的浏览器都开始支持该技术，屏幕传输，多个视频流都遇到了困难，有时仅关闭并打开视频流就会使浏览器崩溃。 积累的经验使我们能够为Habr翻...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>如何调试WebRTC</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/Voximplant/blog/417869/"> 自成立以来，Voximplant一直在使用WebRTC：首先作为Flash的替代产品进行语音和视频通话，然后完全替代。 这项技术的发展道路漫长而痛苦，直到最近所有主要的浏览器都开始支持该技术，屏幕传输，多个视频流都遇到了困难，有时仅关闭并打开视频流就会使浏览器崩溃。 积累的经验使我们能够为Habr翻译有趣的文章，今天，我们将这个词传递给Xirsys的Lee Sylvester，他将讨论在Chrome，Firefox，Safari和Edge中进行调试（视频）调用的过程。 调试WebRTC并不容易，我们甚至针对删除流行浏览器中的日志提供了特殊<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">说明</a> 。  Lee拥有的一切-您会发现削减的地方（剧透：很多东西，包括WireShark）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cf/yz/h0/cfyzh02gdgxjvmew9ifyv8p9iju.jpeg"></div><a name="habracut"></a><br><h2>  WebRTC的阴暗面 </h2><br> 在Xirsys工作时，我看到了一些使用WebRTC的超酷应用程序。 但是，尽管一小群开发人员创建了高科技产品，但大多数程序员甚至无法开始使用WebRTC。 怎么了 一切都很简单。 这很复杂。 <br><br> 我们许多人都熟悉典型的Web应用程序。 这样的应用程序具有发送请求的客户端和响应这些请求的服务器。 一个简单，线性且易于预测的过程。 如果出现问题，我们通常知道在哪里查看日志以及可能发生的情况。 但是使用WebRTC，一切都不是那么简单。 <br><br><h2> 异步性 </h2><br> 如果您曾经编写过多线程应用程序，那么您可能知道这种开发带来的麻烦。 飞行，糟糕的记忆-但大多数情况下只是难以发现的错误。 <br><br>  WebRTC本质上是异步的。 这根本不是简单的AJAX异步。 打个比方，这些是同时启动的几个AJAX请求，它们试图使两台计算机上的数据一致。 那仍然是娱乐。 <br><br><h2>  NAT绕过雷区 </h2><br> 创建Web应用程序归结为开发可在服务器上运行并响应请求的内容。 可能发生的最糟糕的事情是IPTables中未打开的端口。 它在2分钟内得到处理。 您不能说WebRTC。 <br><br>  Web服务器，甚至不是其软件，而是硬件，都是具有公共IP地址的设备。 它们可以从任何地方访问。  WebRTC可以从用户的计算机发送和接收数据。  IP地址通常为192.168。Something，并且不会因响应网络请求而燃烧。 <br><br>  WebRTC的作者对此很了解，因此引擎将对不同的连接方法进行分类，以试图在两台不是专门为此设计的计算机之间建立连接。 <br><br><h2> 从哪里开始调试 </h2><br> 在本文中，我将讨论解决最流行问题的基本工具。 但是在此之前，让我们看看WebRTC通常如何建立连接。 <br><br><h2>  WebRTC如何建立连接 </h2><br> 所有WebRTC连接都需要信令协议的帮助。  “一点帮助”是您自己的服务器和协议，呼叫者可以在建立对等连接之前与之通话。 <br><br>  WebRTC将使用信令协议传输有关IP地址的信息，捕获和播放语音和视频的能力，网络拓扑以及传输的数据。 <br><br> 常用的协议是COMET（或SIP-译者注）和Web套接字。  WebRTC不会将开发人员限制为任何事物，因此您可以随意使用，至少可以通过记事本传输数据并复制粘贴（在其中一个研讨会上完成，它可以工作-还是翻译器）。 连接到两台计算机的信号允许您已经通过WebRTC启动连接。 <br><br><h4> 提供和回答 </h4><br>  WebRTC连接使用“要约”和“答案”： <br><br><ol><li> 连接的发起者创建并传递到另一侧“要约”。 </li><li> 对方收到“要约”，创建“响应”，然后将其传递回去。 </li><li> 连接的发起者会收到一个“答案”。 </li></ol><br> 从理论上讲。 实际上，礼貌交流看起来并不那么简单。 <br><br><ol><li> 在发送“要约”之前，连接启动器创建<b>RTCPeerConnection</b>的实例，并使用<b>rtcPeerConnection.createOffer（）</b> <b>从中</b>接收文本包“ SDP”（会话描述协议<b>）</b> ； 该软件包描述了为浏览器接收/传输语音和视频的功能。 </li><li> 使用<b>rtcPeerConnection.setLocalDescription（）</b>将SDP包的内容设置为“连接本地端的描述”。 </li><li> 数据包被发送到另一端，使用<b>rtcPeerConnection.setRemoteDescription（）</b>将其内容设置为“连接另一端的描述”。 </li><li> 在连接的另一端，使用<b>rtcPeerConnection.createAnswer（）</b>创建了自己的SDP包，其内容设置为“连接本地端的描述”。 </li><li> 数据包被传递到连接启动器，连接启动器将其内容设置为“连接另一端的描述”。 </li></ol><br> 而且，只有在完成所有操作之后，连接双方才知道彼此接收和发送语音/视频的能力。 <br><br><h4>  ICE候选人 </h4><br> 但是，与媒体合作的能力还不够。 毕竟，缔约双方尚未透露有关网络状态的任何信息。 <br><br> 您可以立即了解浏览器支持哪些视频编解码器，以及笔记本电脑上是否有摄像头。 查找外部IP地址和NAT操作的逻辑需要花费时间，并且在收到此信息时会交换有关网络状态的信息。 <br><br> 借助Trickle ICE技术（并非所有浏览器都支持-译者注），只要找到合适的“候选人”，就可以随时建立两个WebRTC设备之间的连接。 <br><br> 开发人员必须订阅<b>onicecandidate</b>事件（全部为小写！），然后将接收到的SDP数据包传递到另一端，在此需要WebRTC使用<b>addIceCandidate</b>方法传输它们（此处用大写字母表示）。 它可以双向工作。 <br><br><h2> 连接方式 </h2><br>  WebRTC使用诸如STUN（用于NAT的会话遍历实用程序）和TURN（用于在NAT周围进行中继的遍历）之类的东西来建立连接。 听起来很吓人，但实际上只有两种网络协议。 <br><br><h4>  STUN服务器 </h4><br> 这两个协议中的第一个比回显服务器要复杂一些。 当连接参与者想要描述如何与他们连接时，他们需要他们的公共IP地址。 而且很可能不是计算机的IP地址，公共设备很少分配给用户设备。 发明了整个NAT技术，以免相互隔离。 为了仍然找到您的公共地址，浏览器向STUN服务器发出请求。 通过NAT，网络数据包将其返回地址更改为public。 接收到带有请求的数据包后，STUN服务器会将数据包的返回地址复制到其有效负载中，然后将数据包发送回去。 数据包以相反的方向通过NAT，丢失了其公共IP地址，但是此地址的副本保留在有效负载中，WebRTC可以在其中读取它。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qh/vo/8r/qhvo8rafhc4akmapxnb7vtni2pe.png"></div><br><h2>  TURN服务器 </h2><br>  TURN服务器使用STUN协议扩展。 相同的包，标头和一个新东西： <b>command</b> 。 服务器是代理：两个客户端都通过UDP <b>分配</b>端口连接到它，并通过服务器传输其数据。 <br><br>  TURN服务器的设计方式是，连接的发起者比另一端具有更多的功能。 当通过TURN服务器进行的呼叫成功或失败时，这会产生有趣的效果，具体取决于谁在呼叫谁（记住所有Skype-注释转换器）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/07/j6/qq/07j6qqsbyc7fod_yx2vuk_9zctu.png"></div><br><h2> 侦错 </h2><br> 因此，您阅读了本段。 我们对翻译感到满意，并记住该文章是关于调试WebRTC的。 但是以上所有都是必要的最低要求，没有它，您甚至无法启动。 但是，如果您开始，并且没有不人道的运气，那么它将破灭。 <br><br> 它将以许多不同的方式破裂。 第一个是缺乏连通性。 您将STUN和TURN服务器设置都传递给了两个WebRTC，帮助它们交换报价，答案和ICE候选人，但是没有视频或语音。 从哪里开始？ 带有本地播放问题。 <br><br><h2>  WebRTC本地调试 </h2><br> 就像我在上面写的，WebRTC的主要工作发生在浏览器端。  STUN和TURN服务器非常简单，因此大多数问题都发生在运行两个浏览器的JavaScript代码中。 悲伤但真实。 另一方面，如果最有趣的事情发生在本地浏览器中，那么您就有足够的机会进行调试！ <br><br> 首先要检查的是您的信号。 这是您的代码，可在浏览器之间传输带有视频的音频配置（要约，答案）以及有关网络设置的信息（候选冰）。 您需要检查发送了哪些数据包，接收和发送了哪些WebRTC： <br><br><ul><li> 连接的另一端收到了要约？ 连接发起者是否收到响应？ 如果没有这种最少的便利设施交换，就不会建立连接。 </li><li> 连接两端的WebRTC是否向您传递带有ICE候选数据包？ 您是否交换了这些数据包，并使用<b>addIceCandidate</b>将其传递回另一侧？ </li><li> 如果数据包交换一切正常，是否<b>调用</b>了<b>onaddstream</b>事件处理程序，您是否将结果对象安装在HTML元素中以播放视频（或音频）？ </li></ul><br> 如果数据包交换不是可疑的，则可以深入探讨会话的内容。 <br><br><h2> 会话描述协议 </h2><br>  WebRTC以SDP文本格式创建了Offer，Answer和ICE候选软件包。 乍一看，这些软件包的内容看起来很吓人，但是只要稍加准备，您就可以在调试期间从中受益匪浅。  Wikipedia很好地描述了SDP，但我为您找到了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">更好的描述</a> 。 <br><br> 候选ICE SDP数据包中最重要的字段是<b>typ</b> 。 对于WebRTC，字段可以具有以下三个值之一： <br><br><ul><li> 典型主机； </li><li>  typ srflx; </li><li> 典型继电器。 </li></ul><br><h4> 典型主机 </h4><br>  <b>主机</b>类型指定用于本地连接的ICE候选对象（WebRTC枚举了多个候选对象，希望建立连接，但事先不知道会出现哪种候选-译者注）。 这样的连接不需要STUN或TURN服务器，因为本地网络中的设备通常可以直接建立网络连接。 从本地网络调试时，您只需要检查和调试<b>主机</b>数据包的传输，并确保设备可以相互发送UDP数据包。 尽管有例外，但实际上，我已经看到了网络配置，其中浏览器需要TURN服务器才能将...连接到自身。 <br><br><h4> 打字机 </h4><br> 字母“ srflx”的组合表示“ Server Reflexive”，并使用外部IP地址标记候选连接，其中STUN服务器足以进行连接（使用NAT渗透技术，在大约80％的情况下成功，请注意翻译者）。 <br><br><h4> 典型继电器 </h4><br>  “中继”标记通过TURN服务器的连接，几乎总是成功。 重要的是要记住，不需要WebRTC来创建带有“ typ”字段的三个完全不同的程序包。 如何选择候选人取决于特定浏览器版本中WebRTC的实现。 <br><br><h2> 测试设备连接 </h2><br>  Google提供了专用的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Web应用程序</a>来测试您设备上的WebRTC连接。 打开页面，单击“开始”按钮，JavaScript代码将尝试使用信号传输，Google的STUN和TURN服务器建立与Google服务器的连接。 <br><br><h2>  WebRTC内部 </h2><br> 您检查了所有软件包，检查了代码，一切看起来都正确，但是不起作用？ 对于这种情况，Google在其Chrome浏览器中提供了一个特殊部分，该部分显示了连接设置过程中WebRTC的内部情况，并在连接成功的情况下提供了一些精美的图表。 要使用，请在浏览器中打开特殊的技术链接： <br><br> <code>chrome://webrtc-internals</code> <br> <br> 如果您已经有一个使用WebRTC打开的应用程序，则将立即看到大量技术数据。 否则，只需打开另一个选项卡，其中就会使用WebRTC。 该选项卡显示对<b>RTCPeerConnection</b>对象的所有调用，并允许您实时查看如何建立连接。 <br><br><h2>  ICE设置 </h2><br> 页面顶部是用于初始化连接的ICE字符串。 如果在错误形成期间发生错误，则将立即可见（作者通过“ ICE行”，使用STUN和TURN服务器列表（“ iceServers”对象）引用RTCPeerConnection对象的配置-译者注）。 也许没有服务器列表？ 在首次调用<b>createOffer</b>或<b>createAnswer</b>之前，必须配置RTCPeerConnection对象。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lo/hz/xo/lohzxoou7x8sbrhqfwuruhcwsw4.png"></div><br><h2>  RTCPeerConnection事件 </h2><br> 下一个内部部分<b>将按</b>时间顺序显示对<b>RTCPeerConnection</b>方法的调用以及从对象接收的事件。 错误会以红色仔细突出显示。 请注意，红色的<b>addIceCandidateFailed</b>通常并不表示错误，并且连接可以正常建立。 如果连接成功，则列表中的最后一个事件将是<b>iceconnectionstatechange</b>事件，其值为<b>complete</b> 。 <br><br><h2>  “统计”部分 </h2><br> 下一部分与成功建立连接有关。 它包含传输数据和网络延迟的统计信息。 最有趣的两个选项是： <b>ssrc</b>和<b>bweforvideo</b> 。 <br><br><ul><li>  <b>ssrc</b> （“流源”）标记每个音频和视频轨道。 显示传输数据的统计信息和<b>往返时间</b>等参数; </li><li>  <b>bweforvideo</b> （带宽估计）显示使用的网络通道的宽度。 </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/te/9e/wt/te9ewt2nl26jhbezdqj3_rkr8d4.png"></div><br><h2>  GetStats函数 </h2><br> 通常，您将无法访问内部页面。 例如，当您的用户出现问题时。 在这种情况下，可以通过调用<b>RTCPeerConnection</b>对象上的<b>getStats</b>方法来获取与内部页显示的数据相同的数据。 此方法设置了一个回调函数，每次发生有趣的事情时WebRTC都会调用该函数。 调用的函数获取一个对象，该对象具有内部页面显示的字段： <br><br><pre> <code class="javascript hljs">rtcPeerConnection.getStats(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">stats</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"lostpackets"</span></span>).innerText = stats.packetsLost; });</code> </pre><br> 另一个有用的工具是<b>RTCPeerConnection</b>对象的<b>oniceconnectionstatechange</b>事件。 事件处理程序将接收连接进度信息。 可能的选择： <br><br><ul><li>  <b>new</b> ：WebRTC期望来自连接第二面的候选对象，必须使用<b>addIceCandidate</b>方法添加<b>候选对象</b> ； </li><li>  <b>检查</b> ：WebRTC从连接的第二端收到候选者，将它们与本地候选者进行比较，并遍历选项； </li><li>  <b>已连接</b> ：选择一对合适的候选者并建立连接。 值得注意的是，此后，候选人可以按照Trickle ICE协议继续参加； </li><li>  <b>已完成</b> ：已收到所有候选人并建立了联系。 </li><li>  <b>断开连接</b> ：连接已<b>断开</b> 。 在不稳定的频道上，WebRTC能够重新连接自身，我们监视<b>连接的</b>标志； </li><li>  <b>已关闭</b> ：连接已断开，WebRTC不再适用。 </li></ul><br> 如果连接以<b>失败</b>状态结束，那么我们可以检查双方收到的候选对象并了解连接失败的原因。 例如，如果一侧提供了<b>host</b>和<b>srflx候选者</b> ，则另一侧提供了<b>host</b>和<b>relay</b> ，但设备位于不同的网络上。 <br><br><h2> 黑色矩形代替视频 </h2><br> 通常，建立连接时会传输声音，但是一个或两个参与者都有一个黑色矩形，而不是视频。 如果在连接转换为<b>完成</b>状态之前将接收到的视频对象分配给HTML元素，则通常会发生这种情况。 <br><br><h2> 如何在外面戳魔杖 </h2><br> 除了<b>RTCPeerConnection</b>对象<b>本身</b>和浏览器显示的内部信息外，您还可以使用网络数据包分析工具，例如Wireshark。 这些工具可以显示使用过的WebRTC协议的数据包。 例如，Wireshark将在主窗口中向您显示STUN数据包的内容，您可以通过在过滤器字段中键入关键字“ stun”来过滤它们： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/c4/89/jf/c489jf68awl5u25fah6xnv8piee.png"></div><br> 在服务器响应中要看什么？ 如果仅看到<b>绑定</b>类型的答案，则意味着仅支持STUN（外部IP对话），并且WebRTC仅提供<b>srflx</b>候选对象。 如果答案包含TURN特定的包<b>Allocation</b>和<b>CreatePermission</b> ，则WebRTC将有机会尝试通过代理服务器进行连接。 数据包分析器标记成功和不成功的<b>分配</b> 。 如果没有成功，则很可能传递了对TURN服务器的错误访问参数（几乎总是使用用户名和密码（译者注）进行保护）。 <br><br> 如果日志中有一个<b>CreatePermission成功响应</b>包，那么我们可以假定STUN和TURN配置一切正常。 并且，如果还有<b>ChannelBind</b>软件包，则可以高速建立与TURN服务器的连接。 <br><br><h2> 手机问题 </h2><br> 在我的实践中，许多建立WiFi连接的WebRTC解决方案无法通过3G / 4G连接。 在移动设备上启动的应用程序更难调试：我们没有Wireshark这样简单的数据包分析器，而Safari无法显示WebRTC内部。 逻辑建议，如果应用程序通过WiFi可以正常工作，则问题不在于应用程序本身，而在于蜂窝通信。 如何调试？ 拿一台笔记本电脑，然后将<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">3G加密狗连接</a>到它。 因此，您有一个数据包分析器和便捷的日志，可以在合理的时间内找到所有麻烦的根源。 <br><br><h2> 结论 </h2><br> 调试WebRTC并不容易，但是如果您在Internet上搜索良好，则可以找到许多文章和示例。 如果您从事实时通信领域的工作，那么我建议您阅读<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">STUN</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">TURN</a>协议和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WebRTC</a>技术的RFC规范。 这些文件很大，但其中包含的信息有助于做出可靠的决定并回答“为什么不响”的问题。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN417869/">https://habr.com/ru/post/zh-CN417869/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN417859/index.html">与Microsoft Dynamics 365的3CX集成</a></li>
<li><a href="../zh-CN417861/index.html">无休止的素数模式</a></li>
<li><a href="../zh-CN417863/index.html">孩子们要点菜了吗？ 英国伦理委员会授权对人类胚胎进行基因工程</a></li>
<li><a href="../zh-CN417865/index.html">Android的可访问性-披着羊皮的狼？ Yandex讲座</a></li>
<li><a href="../zh-CN417867/index.html">如何评估IT项目的持续时间，以及什么都不值得做</a></li>
<li><a href="../zh-CN417871/index.html">在亚轨道旅游的终点</a></li>
<li><a href="../zh-CN417873/index.html">创建弹出窗口的方法</a></li>
<li><a href="../zh-CN417875/index.html">使用现代Rails走出Rabbit Hole SPA</a></li>
<li><a href="../zh-CN417877/index.html">Tinder如何（略）隐藏您的位置</a></li>
<li><a href="../zh-CN417879/index.html">如何免费参加Microsoft的考试[例如最近的竞赛]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>