<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå∏ üòµ üîõ Ingenier√≠a de regalos üçê ü§Æ üîá</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Fuera de la ventana est√° lloviendo, diciembre est√° en el calendario. Se acerca el tiempo de las vacaciones y, por lo tanto, el tiempo de los regalos. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ingenier√≠a de regalos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480792/"><img src="https://habrastorage.org/webt/md/lw/ph/mdlwpht7vhixr2jkxrftetb8hv4.jpeg"><br><br>  Fuera de la ventana est√° lloviendo, diciembre est√° en el calendario.  Se acerca el tiempo de las vacaciones y, por lo tanto, el tiempo de los regalos.  El colega Pavel quiere una nueva computadora port√°til para √©l y su novia Masha quiere una casa junto al mar.  Y a pesar del salario digno de la profesi√≥n de tyzhprogrammer, no vivimos en un mundo de posibilidades infinitas, lo que significa que no puedo darle a estas personas exactamente lo que m√°s quieren (aunque Pasha sea mi mejor Pavel, a quien Lo s√©, pero Masha est√° bien). <br><br>  Aqu√≠ es donde aparece el problema de los "regalos baratos".  No funciona dar un regalo costoso a todos, pero no quiero dar otra caja de chocolates, una vela o una figurita indistinta.  Por lo tanto, debe combinar los negocios con el placer: me gusta hacer las cosas con mis propias manos y el resultado es excelente como regalo.  Esta es una historia sobre c√≥mo una vez m√°s fing√≠ ser ingeniero y hice varios regalos a mano. <br><a name="habracut"></a><br><h2>  Una peque√±a digresi√≥n del tema principal. </h2><br>  No puedo ir inmediatamente al tema principal, as√≠ que comenzar√© desde lejos.  Hace unos a√±os, se lanz√≥ el juego "The Witcher 3".  Mi amigo me aconsej√≥ que jugara, y en general realmente admir√© el juego.  Luego decid√≠ qu√© hacer y le di algo tem√°tico relacionado con el juego ... No profundizar√© en la descripci√≥n del juego (Google ayudar√° a todos) ni dir√© que no se me ocurrieron muchas cosas. para las palabras clave "The Witcher, Engineer, Gift". <br><br>  El personaje principal del juego tiene un caballo llamado "Roach" (en ruso), el h√©roe de vez en cuando la conduce con la frase "Move, Roach".  Decid√≠ hacer un juguete mec√°nico sobre el tema de "remover cucarachas". <br><br>  Naturalmente, el regalo fue concebido como algo completamente in√∫til, est√∫pido pero divertido, por lo que el plan fue el siguiente: <br><br><ol><li>  Hay una caja que oculta el mecanismo en s√≠ mismo. </li><li>  El mecanismo es un eje que gira y que mueve el caballo. </li><li>  La m√°xima "tenacidad" del movimiento del caballo es bienvenida.  Inicialmente, incluso se pensaba que el caballo deber√≠a moverse como un pez, y no como un caballo (despu√©s de todo, cucaracha), pero el resultado fue "algo intermedio". </li><li>  Todo esto se har√° con madera contrachapada, que de acuerdo con los dibujos se puede cortar con precisi√≥n a pedido con un l√°ser. </li></ol><br>  La principal desventaja de la elecci√≥n del material y el hecho de que el corte se realizar√° a pedido fue el hecho de que perd√≠ la oportunidad de crear un prototipo, lo que significa que todos los problemas de las manos torcidas y el incumplimiento de la regla de "siete medidas" se hicieron sentir con bastante rapidez: <br><br><img src="https://habrastorage.org/webt/bq/9h/e2/bq9he2doyiixrvhr47zha5frml0.jpeg"><br><br>  Aunque al final, el hecho de que muchos detalles del mecanismo de reacci√≥n debido a espacios demasiado grandes ayudaron a compensar el hecho de que conect√© las partes y el eje de manera bastante torcida.  Aqu√≠, como dicen, "menos menos da m√°s" y el mecanismo en su conjunto funcion√≥, como se pretend√≠a: <br><br><img src="https://habrastorage.org/webt/cn/x2/gf/cnx2gfjjm2rasl3jtcd3oah-ors.gif"><br><br>  Despu√©s de que solo hubo una peque√±a pintura y el resultado fue una caja as√≠: <br><br><img src="https://habrastorage.org/webt/fe/x9/uf/fex9ufxoprduhzobingucsoinm4.jpeg"><br><br>  Entonces alguien dir√° que era necesario hacer que la caja fuera transparente para que fuera posible observar el trabajo del interior, pero de hecho al principio supuse que no pod√≠a ensamblar todo el mecanismo y la caja desde el interior de manera tan limpia y ordenada que no doler√≠a. mira a trav√©s de las paredes transparentes de la caja.  Por lo tanto, una caja opaca es una medida necesaria. <br><br>  Solo queda empacarlo, atar un lazo en una caja y el regalo est√° listo: <br><br><img src="https://habrastorage.org/webt/k9/47/k_/k947k_nkfln04gnb6adkqda9vs4.jpeg"><br><br>  Pero para no molestar al ni√±o interior, que quer√≠a sentirse como un ingeniero en una situaci√≥n en la que, de hecho, pegu√© un par de piezas de madera contrachapada, decid√≠ hacer un "dibujo".  Perd√≥name a todos aquellos que entienden algo en los dibujos t√©cnicos, porque  Entiendo que esto es m√°s una parodia del dibujo que un dibujo real, pero como me pareci√≥, agreg√≥ valor a un juguete simple: <br><br><img src="https://habrastorage.org/webt/pk/t2/ms/pkt2msf9f2s496bchyrmdi6fs0w.png"><br><br><h2>  Hoy yo ... </h2><br>  A veces el destino juega con nosotros y de alguna manera insin√∫a que algo deber√≠a suceder pronto.  La historia de uno de mis dispositivos comienza exactamente igual.  Ped√≠ algunos peque√±os dispositivos electr√≥nicos por un valor de alrededor de $ 5, que, como de costumbre, pasaron un mes en la carretera, despu√©s de lo cual recib√≠ un SMS que el paquete me estaba esperando en la oficina de correos local.  La caja result√≥ ser mucho m√°s grande de lo que esperaba e inmediatamente gener√≥ dudas sobre su contenido.  Se confirmaron las dudas: en el interior, adem√°s de las peque√±as cosas que ped√≠, tambi√©n hab√≠a una pantalla de tinta electr√≥nica de tres colores con una diagonal de 4,2 pulgadas.  Me puse en contacto con el vendedor, √©l confirm√≥ que hab√≠a estropeado algo al empacar, pero dijo que puedo considerar esto como un regalo y usarlo como mejor me parezca. <br><br>  Fate me insinu√≥ que ha llegado el momento de comenzar un nuevo proyecto y este proyecto ser√° algo con una pantalla de tinta electr√≥nica.  Despu√©s de familiarizarme brevemente con las especificaciones del dispositivo y conectar la pantalla al controlador, me asegur√© de que la especificaci√≥n no me mintiera sobre el tiempo de actualizaci√≥n.  La pantalla se actualiz√≥ durante m√°s de 10 segundos, parpadeando y tratando de causarme un ataque epil√©ptico: <br><br><img src="https://habrastorage.org/webt/ni/w1/h5/niw1h5wpnfczyud_2593yvxq-mg.gif"><br>  (No tengo fotos anteriores de la conexi√≥n de la pantalla, as√≠ que aqu√≠ el dispositivo ya tiene un aspecto m√°s significativo) <br><br>  Qued√≥ claro que necesita un dispositivo simple que no requiera animaciones complejas (y animaciones en general).  Y luego me encontr√© con un calendario de humor: <br><img src="https://habrastorage.org/webt/zm/a0/dg/zma0dglgpkea9lkxbnqlndawc-o.jpeg"><br><br>  El calendario del estado de √°nimo es un conjunto de im√°genes simples y firmas ir√≥nicas para ellos.  Decid√≠ que har√≠a un calendario (que en realidad no es un calendario en absoluto) con el nombre "Hoy I" ... Ser√° un dispositivo simple que cada d√≠a muestra alguna imagen que caracteriza el "estado mental" de hoy y una descripci√≥n del mismo.  Adem√°s, el calendario tambi√©n podr√≠a tener otras funciones, pero el calendario principal ser√≠a precisamente el "calendario", su propia imagen para cada d√≠a. <br><br>  El m√≥dulo de papel electr√≥nico permit√≠a mostrar tres colores (negro, rojo y blanco), que deber√≠an transmitirse al m√≥dulo, como dos im√°genes: blanco y negro y rojo y blanco.  De hecho, ser√≠a m√°s correcto decir que la pantalla simplemente espera un mapa de bits monocromo, donde cada bit determina el color de un p√≠xel (no estoy seguro de que este t√©rmino sea aplicable al papel electr√≥nico, pero espero que la idea sea clara).  Se puede establecer un mapa de bits separado para el canal negro o rojo.  Por lo tanto, hay un conjunto de bytes donde cada bit que se establece en 1 corresponder√° a un p√≠xel de color, y todos los bits que permanecen 0 ser√°n p√≠xeles blancos en la pantalla.  La resoluci√≥n de la pantalla es de 400 x 300 p√≠xeles, es decir  para una imagen en blanco y negro, se requerir√°n 15,000 bytes (8 p√≠xeles est√°n codificados en un byte).  Para los tres colores, tomar√° 30,000 bytes, si no intenta empaquetar la imagen de manera m√°s compacta.  Desde el punto de vista de la implementaci√≥n, los creadores de la pantalla podr√≠an simplemente seleccionar dos bits por p√≠xel y almacenar el estado real de las cosas (d√≥nde es rojo, d√≥nde es negro y d√≥nde es blanco), pero esto requerir√≠a los mismos 30,000 bytes, pero incluso para im√°genes monocromas requerir√≠a la transferencia de 30,000 bytes. <br><br>  Como en cualquiera de mis otras "manualidades", comenc√© a inventarme tareas para que todo no se convirtiera en "enchufar el cableado y descargar la biblioteca".  Incluso si tenemos en cuenta la capacidad de implementar alg√∫n tipo de algoritmo de compresi√≥n de imagen en el lado del controlador, qued√≥ claro que sin un almacenamiento externo para archivos de imagen, el controlador estar√≠a muy deprimido.  Se decidi√≥ tomar una tarjeta SD y escribir un contenedor de c√≥digo simple para trabajar con FAT32.  Por supuesto, ser√≠a posible prescindir de un sistema de archivos y escribir datos en una tarjeta de memoria directamente, pero me pareci√≥ que era menos conveniente agregar nuevos archivos, y fue interesante para m√≠ implementar las operaciones b√°sicas para trabajar con FAT32 con mis propias manos. <br><br>  Es importante aclarar que tengo la costumbre de escribir cosas yo mismo (no deber√≠as decirme que hay un mar de bibliotecas, lo s√© y con Google) cuando hago esas cosas, pero desde  Antes de eso, no tuve el placer de trabajar con FAT32 en un nivel bajo, fue un proceso bastante entretenido. <br><br>  No entrar√© en detalles sobre el trabajo con FAT32 y la tarjeta SD en su conjunto, como  Internet est√° lleno de art√≠culos sobre este tema (y no quiero convertir mi historia en un recuento de especificaciones), pero hablar√© sobre algunas cosas que deben implementarse.  Es necesario implementar no solo las funciones de lectura de un archivo y escritura en un archivo (decid√≠ almacenar algunas configuraciones y estados en la misma tarjeta SD, y no en la EEPROM), sino tambi√©n las funciones de b√∫squeda de un archivo en el sistema de archivos si necesita trabajar con de la forma habitual <br><br>  Todos los datos en la tarjeta de memoria se dividen en grupos (la unidad direccionable principal en el sistema de archivos FAT32), y los grupos ya est√°n divididos en sectores.  Para leer el archivo "habr.txt" de la tarjeta SD en FAT32, necesita: <br><br><ol><li>  Inicialice la tarjeta de memoria. </li><li>  Lea el sector en la direcci√≥n cero y verifique que el sistema de archivos FAT32 tenga un encabezado determinado (puede omitir este paso si creemos en la suerte). </li><li>  Lea el sector en la direcci√≥n cero y obtenga "Direccionamiento de bloque l√≥gico" (LBA). </li><li>  Lea el sector en la direcci√≥n recibida (LBA) y obtenga los datos necesarios (qu√© cl√∫ster es la ra√≠z: el directorio ra√≠z, cu√°ntos sectores hay en el cl√∫ster, etc.). </li><li>  Lea el grupo "Directorio ra√≠z" (de hecho, la lectura se realiza por sectores, solo necesita leer tantos sectores como sectores hay en el grupo) por su n√∫mero.  Tiene su propia f√≥rmula para convertir n√∫meros de serie del cl√∫ster en direcciones f√≠sicas.  La informaci√≥n del archivo se almacena aqu√≠, por lo que leemos los datos en busca del archivo deseado.  Hay un poco m√°s sobre los nombres de archivo: el nombre puede ser corto o largo, dependiendo de esto, los datos se almacenan en un lugar (en la misma estructura) o en un registro adicional, que tambi√©n debe leerse por separado.  Cuando se encuentra un archivo con el nombre deseado, obtenemos el cl√∫ster en el que se encuentra su inicio (o tal vez el archivo completo si cabe en el tama√±o del cl√∫ster), as√≠ como el tama√±o del archivo.  Si el archivo no se encuentra en este grupo, buscamos el siguiente grupo y repetimos el proceso de b√∫squeda de archivos. </li><li>  Lea el cl√∫ster en la direcci√≥n encontrada.  Y contin√∫e leyendo m√°s los grupos y busque el siguiente grupo hasta que se hayan le√≠do todos los datos. </li></ol><br>  Me parece que es m√°s f√°cil decir el principio del sistema de archivos a aquellos que han implementado listas vinculadas al menos una vez, porque  de hecho, el sistema de archivos FAT32 es un conjunto de bloques de datos y un tipo de tabla que dice d√≥nde buscar el siguiente bloque de datos.  Leer cualquier dato de FAT32 es un proceso en el que leemos los datos, buscamos la direcci√≥n del siguiente bloque, leemos los datos, buscamos la direcci√≥n del siguiente bloque, etc. <br><br>  No implement√© todos los escenarios posibles y simplifiqu√© algunas cosas: <br><br><ul><li>  Todos los archivos est√°n en la ra√≠z de la tarjeta de memoria y no se utiliza la exploraci√≥n de directorios. </li><li>  Todos los archivos tienen nombres cortos. </li><li>  El controlador al inicio lee una lista de archivos y los almacena en la memoria para no buscar cada archivo nuevamente. </li><li>  El n√∫mero m√°ximo de archivos est√° limitado por una constante (y de hecho dibuj√© solo un par de docenas de im√°genes). </li></ul><br>  En resumen, todo lo anterior es una raz√≥n convincente para tomar una biblioteca preparada y no gastar mucho tiempo leyendo documentaci√≥n, desarrollando y depurando.  Me aconsejar√≠a implementar tales cosas solo con fines educativos o "por diversi√≥n". <br><br>  La pantalla tambi√©n impuso algunas limitaciones, ya que  cualquier imagen en ella se muestra de esta manera: <br><br><ol><li>  Nos despertamos e inicializamos la pantalla (para extender su vida √∫til y ahorrar energ√≠a, la pantalla b√°sicamente duerme). </li><li>  Exponemos el canal necesario (por ejemplo, negro). </li><li>  Reenviamos 15000 bytes de la imagen. </li><li>  Exponemos el canal necesario (por ejemplo, rojo). </li><li>  Reenviamos 15000 bytes de la imagen. </li><li>  Le decimos a la pantalla que extraiga datos del b√∫fer. </li><li>  Esperamos hasta que la pantalla termine de dibujar. </li><li>  Le decimos a la pantalla que duerma. </li></ol><br>  Para las im√°genes monocromas, puede omitir los pasos 4 y 5. Para una imagen de tres colores, el orden de transmisi√≥n de las im√°genes en blanco y negro y rojo-blanco no es importante, porque  el rojo siempre se pinta sobre negro, el negro solo sobre blanco y solo los p√≠xeles permanecen en blanco, que son blanco y negro y blanco y rojo y blanco. <br><br>  Para simplificar (para no aumentar el n√∫mero total de archivos), decid√≠ almacenar las im√°genes en blanco y negro y rojo blanco como un solo archivo, donde la imagen en blanco y negro es seguida inmediatamente por rojo-blanco: <br><br><img src="https://habrastorage.org/webt/qo/p-/4j/qop-4jlidhtf82tthoxxspebl2o.png"><br><br>  El resultado de comparar estas im√°genes fue algo como esto (me parece que cada uno de nosotros al menos una vez en nuestra vida nos sentimos como un ciervo con cuernos, una pata): <br><br><img src="https://habrastorage.org/webt/7o/tb/cs/7otbcsv6yqjrqivfjutep87b1am.png"><br><br>  De hecho, las dos im√°genes fueron seguidas por otra imagen que conten√≠a una descripci√≥n del estado (al hacer clic en el bot√≥n, puede obtener una descripci√≥n que coincida con la imagen que se muestra hoy). <br><br>  Debido a la memoria limitada del controlador, los datos de la tarjeta de memoria nunca se leen por completo en la memoria del controlador.  La imagen de la tarjeta de memoria se lee en fragmentos que est√°n determinados por el tama√±o del sector (por simplicidad, suponemos que este tama√±o siempre es est√°tico y no puede cambiar de una tarjeta a otra) y cae en el proceso de procesamiento de datos de la tarjeta.  En mi implementaci√≥n, la funci√≥n de leer un archivo toma como entrada el n√∫mero de cl√∫ster, el tama√±o del archivo y la devoluci√≥n de llamada para "extraer" para cada lectura de sector.  Este enfoque nos permiti√≥ utilizar varias funciones diferentes de procesamiento de archivos para leer y mostrar la imagen en s√≠ o su descripci√≥n. <br><br>  Entonces, la siguiente l√≥gica recay√≥ en la funci√≥n de devoluci√≥n de llamada de leer im√°genes de una tarjeta de memoria: <br><br><ol><li>  Establezca el canal requerido (el canal se determina al azar) antes de enviar datos a la pantalla. </li><li>  Realice un seguimiento de los datos transmitidos para cambiar de canal cuando se complete el env√≠o de datos para el canal anterior. </li><li>  Enviar datos recibidos de la tarjeta. </li><li>  Determine que se han transmitido los datos necesarios y que se puede ignorar el resto de los datos (imagen con descripci√≥n). </li></ol><br>  Fue complicado por el hecho de que decid√≠ ingresar im√°genes que conten√≠an m√°s datos de los que deber√≠an mostrarse en la pantalla.  Es decir  hay una imagen, que es el fondo y siempre es est√°tica y corresponde al tama√±o de la pantalla, y hay una imagen mucho m√°s grande de la que debe tomar un √°rea aleatoria (el tama√±o de la pantalla) y mostrarla. <br><br>  Dicha imagen impuso requisitos adicionales en el controlador: era necesario calcular cu√°ntos bytes de la l√≠nea actual de la pantalla se transfirieron, cu√°nto m√°s se deb√≠a agregar en la siguiente llamada (si la l√≠nea ca√≠a en el borde del tama√±o del sector) y cu√°ntos se deber√≠an omitir. <br><br>  Visualmente, esta situaci√≥n se puede mostrar as√≠: <br><br><img src="https://habrastorage.org/webt/22/iy/sr/22iysrbf7x-8n4ptpq4mtbq6kjc.png"><br><br>  Hay un cierto b√∫fer en el que hay una "ventana" del tama√±o requerido (secci√≥n verde) y solo necesita leer los datos de esta ventana, leyendo los datos del b√∫fer en fragmentos de N bytes.  Ser√≠a posible visualizar un proceso de lectura como este: <br><br><img src="https://habrastorage.org/webt/cp/me/qo/cpmeqoznzfnhkflphfxdhscxhq0.gif"><br><br>  En general, agregar la l√≥gica de trabajar con la pantalla en una funci√≥n que siempre recibe un b√∫fer de 512 bytes y que deber√≠a determinar cu√°l de estos 512 bytes se necesita (si se necesita algo) result√≥ no ser una tarea tan f√°cil de resolver "En la frente".  M√°s precisamente, la tarea no era tan complicada como no est√°ndar en comparaci√≥n con las soluciones cotidianas, por lo tanto, sorprendentemente, fue muy interesante resolverla.  Para m√≠ fue como una "tarea de olimpiada", donde era necesario calcular la cantidad de electricidad necesaria para contraer los m√∫sculos con el fin de transferir agua de un cubo a otro con dos cucharas (una cuchara en cada mano). <br><br>  Para comprender mejor cu√°l es la dificultad aqu√≠, agregar√© otra animaci√≥n aqu√≠, solo "en t√©rminos de" el contenido del cl√∫ster, y no todo el archivo (toda la otra informaci√≥n debe almacenarse por separado): <br><br><img src="https://habrastorage.org/webt/ba/vk/zg/bavkzgmfovjycovxj1uasy7kwae.gif"><br><br>  Seg√∫n lo planeado, el calendario debe mostrar una nueva imagen todos los d√≠as, es decir  debe poder monitorear el tiempo (incluso cuando est√° apagado), lo que significa que tambi√©n se necesita un m√≥dulo de reloj en tiempo real (RTC).  Y a pesar de que mi controlador tiene un reloj de tiempo real incorporado, es casi imposible tomarle una bater√≠a, porque  los contactos no est√°n conectados a la placa.  Decid√≠ no violar las piernas del controlador en un intento de soldarlas y tom√© el RTC chino externo.  Se supon√≠a que trabajar con RTC era completamente simple: <br><br><ul><li>  Cuando est√© activado, obtenga el tiempo del RTC chino. </li><li>  Establecer hora en RTC interno. </li><li>  Use el RTC interno para contar el tiempo y olv√≠dese de los chinos hasta el pr√≥ximo cierre. </li></ul><br>  Pero aqu√≠, todo result√≥ no ser tan simple, porque el RTC interno del controlador funciona con el tiempo en el formato habitual (marca de tiempo UNIX), y su amigo chino usa decimal codificado en binario (BCD).  Antes de esto, no encontr√© este formato y me sorprendi√≥ mucho que incluso los m√≥dulos modernos para Arduino lo usen.  La esencia del formato es bastante simple: hay un byte que, por ejemplo, almacena la cantidad de segundos.  Los cuatro bits de orden superior almacenan decenas, y los cuatro bits de orden inferior almacenan unidades.  Resulta que la representaci√≥n hexadecimal de este byte contiene un tiempo legible: el byte 0x49 corresponde a un valor de 49 segundos (aunque en el sistema decimal, este byte corresponde a 72). <br><br>  Seg√∫n tengo entendido, sucedi√≥ tan hist√≥ricamente que fue m√°s f√°cil usar RTC directamente con codificadores de pantalla para crear un reloj, pero tuve que convertir BDC a la marca de tiempo UNIX con bol√≠grafos. <br><br>  Adem√°s de la pantalla, el m√≥dulo de reloj en tiempo real, la tarjeta de memoria y el sistema de archivos, era necesario envolver todas estas gl√°ndulas en un estuche, que tambi√©n ten√≠a que fabricarse, es decir  "Dibujar".  Puedes leer con m√°s detalle todo el dolor que encontr√© en mi √∫ltima publicaci√≥n, aqu√≠ todo era exactamente igual: <br><br><img src="https://habrastorage.org/webt/f_/6i/jh/f_6ijh7_nag2fpzyjwzkdkapips.jpeg"><br>  (No planifiqu√© la producci√≥n en masa, todos los detalles son el resultado de mediciones incorrectas o soluciones mal pensadas) <br><br>  Como resultado, se dibujaron el caso y los detalles necesarios (no hay portada en la imagen): <br><br><img src="https://habrastorage.org/webt/pg/k9/w-/pgk9w-ajyangtju3ianmi1dm9jo.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los botones se colocaron en una parte separada para facilitar el ensamblaje (parece que todav√≠a aprend√≠ algo desde el momento del √∫ltimo proyecto): </font></font><br><br><img src="https://habrastorage.org/webt/lp/c_/i8/lpc_i8kkwazohmmz2ujiynl2lea.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el ensamblaje (con la excepci√≥n de las cubiertas frontal y posterior) se ve as√≠: la </font></font><br><br><img src="https://habrastorage.org/webt/ah/yq/un/ahyqun2x2cwbvpn2hk5o59dupbw.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pantalla est√° unida a la caja con bridas. </font><font style="vertical-align: inherit;">Esto result√≥ ser un m√©todo mucho m√°s conveniente que atornillarlo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bueno, un peque√±o infierno para los perfeccionistas (una barba de cables y componentes): </font></font><br><br><img src="https://habrastorage.org/webt/tv/kh/pz/tvkhpznwutzclmhqaf_0q1abk_a.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el ensamblaje result√≥ ser un dispositivo para el que hice un peque√±o libro: instrucciones: </font></font><br><br><img src="https://habrastorage.org/webt/cw/s0/y9/cws0y9bk4nre9kwyjwjar2cvsui.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la tapa posterior est√° atornillada, lo que le permite desmontar el dispositivo si se requiere violencia adicional en su interior:</font></font><br><br><img src="https://habrastorage.org/webt/ec/dj/d6/ecdjd6m9-d85udrkqee-vphi1qe.jpeg"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> S√≠, ¬°es m√°s f√°cil comprar una casa junto al mar! </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y luego, alguien que haya le√≠do hasta este punto dir√°: ‚Äú¬°¬øY esta es una alternativa a los simples regalos ?! S√≠, inmediatamente necesita invertir 100500 horas de su tiempo, ¬°lo cual es mucho m√°s caro que el dinero! No discutir√© sobre este tema, solo dir√© que para m√≠ este es un proceso meditativo y mato dos p√°jaros de un tiro; por un lado, hago cosas que b√°sicamente nadie necesita (pocos me pagar√≠an por desarrollar algo tal), pero que son interesantes para m√≠, y una persona recibe un objeto √∫nico como regalo, que, aunque no tiene una carga √∫til obvia, sonr√≠e. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin embargo, para que no haya un regusto de las soluciones que requieren mucho tiempo, compartir√© algunas historias m√°s.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora, en general, se ha puesto muy de moda imprimir cosas en una impresora 3D. </font><font style="vertical-align: inherit;">Los dispositivos de impresi√≥n se han vuelto mucho m√°s accesibles, y el software para crear modelos es lo suficientemente simple para que los ni√±os lo entiendan.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Llorar por ayuda </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el trabajo, recibimos una broma sobre el hecho de que si necesitas ayuda, solo tienes que gritarle a la gaviota y alguien definitivamente te ayudar√°. En verdad, no s√© con qu√© est√° relacionado o de d√≥nde vino esta broma, pero en la correspondencia interna a menudo comenzaron a aparecer im√°genes de gaviotas, insinuando que alguien necesita ayuda. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin embargo, la oficina de tipo abierto y la modestia interna de algunos colegas no les permitieron aprovechar al m√°ximo la oportunidad de pedir ayuda de esta manera. Luego, un "hombre que no era ingeniero" decidi√≥ ir al rescate, tomando un "M√≥dulo de reproductor de m√∫sica MP3 para Arduino", un clon chino de Arduino Nano, algunos cables y un par de mp3 con la grabaci√≥n de los sonidos de las gaviotas.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En general, debe tenerse en cuenta aqu√≠ que tengo la costumbre de pedir varios m√≥dulos con descuento, lo que, seg√∫n me parece, alg√∫n d√≠a puede ser √∫til, o recibir√© tales art√≠culos electr√≥nicos como un regalo de amigos / conocidos que no encontraron √∫tiles estos art√≠culos electr√≥nicos. </font><font style="vertical-align: inherit;">Por lo tanto, la palabra "tumbarse" no es accidental, sino que describe con mucha precisi√≥n el estado de las cosas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como soy una persona que est√° lejos del modelado 3D, simplemente tom√© un modelo ya hecho de la cabeza de la gaviota e hice los cambios necesarios. </font><font style="vertical-align: inherit;">A saber, de los cambios fue necesario:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Separe el pico de la cabeza para imprimir el pico en un color diferente. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Haga una "cavidad" en la que se encuentren todos los componentes electr√≥nicos (altavoz, reproductor, arduino y cables). </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El resultado es algo como esto (el pico se divide en dos partes para una mejor calidad de impresi√≥n): </font></font><br><br><img src="https://habrastorage.org/webt/r7/nz/9_/r7nz9_z7qibv9mqtowdvp038dki.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no creo que tenga sentido hablar de c√≥digo, porque </font><font style="vertical-align: inherit;">Adem√°s de inicializar el reproductor, solo hab√≠a un controlador de clic de bot√≥n y se reproduc√≠a una de las grabaciones de voz de la gaviota (en general: playSound (rand () &amp; 3);). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despu√©s de eso, simplemente deje la gaviota para imprimir y juntar todo. </font><font style="vertical-align: inherit;">Como resultado, tenemos un "simulador de t√©" completo (el color de la gaviota est√° determinado por el pl√°stico que estaba disponible), que se conecta al USB y cuando hace clic en el bot√≥n en la cabeza de la gaviota, reproduce el "pedido de ayuda":</font></font><br><br><img src="https://habrastorage.org/webt/ec/xg/ts/ecxgtsytg7czrd89196s2bwm8de.jpeg"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬øA√∫n m√°s f√°cil? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un colega se quej√≥ de que estaba constantemente distra√≠da mientras escrib√≠a los ex√°menes. </font><font style="vertical-align: inherit;">Encontramos en Internet un modelo 3D de gafas y hacemos peque√±os cambios: </font></font><br><br><img src="https://habrastorage.org/webt/kg/zz/jv/kgzzjvkhncuwiektwjpkjqciv54.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, tenemos gafas - anteojeras. </font><font style="vertical-align: inherit;">No estamos distra√≠dos por nosotros mismos y los dem√°s entienden que no debes distraerte:</font></font><br><br><img src="https://habrastorage.org/webt/ce/vm/k5/cevmk5j74alm2qbuzodzsk5uplc.jpeg"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬°Muy simple! </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Entonces, para crear necesitas: </font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La capacidad de encontrar o dibujar una muleta en el editor de vectores. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La capacidad de dibujar 2 cilindros en el editor 3D, uno m√°s que el otro en ~ 0.4 mm. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La capacidad de hacer un simple trozo de papel: una etiqueta. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Impresora 3D (servicio de impresi√≥n propio o personalizado). </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La impresora es ordinaria. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y ahora, en orden ... Dibujamos una muleta: </font></font><br><br><img src="https://habrastorage.org/webt/l6/z_/uv/l6z_uvppvank9lg9tnt00clmeeq.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dibujamos dos cilindros: </font></font><br><br><img src="https://habrastorage.org/webt/aa/xi/yd/aaxiydolfoszxdnh8duxmhk3io0.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imprimimos las partes y la etiqueta y obtenemos un gran y sencillo regalo para "tyzhprogramistov":</font></font><br><br><img src="https://habrastorage.org/webt/ux/up/w9/uxupw9tma7hqfuhatlg6n2loies.jpeg"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬øPara qu√© fue todo esto? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"A veces el destino juega con nosotros y de alguna manera insin√∫a que algo deber√≠a suceder pronto". Varias veces en mi vida tuve ideas que quer√≠a realizar, pero esper√© algo. </font><font style="vertical-align: inherit;">No har√≠a un "calendario" electr√≥nico si una pantalla gratuita no viniera de China, lo que significa que ni siquiera tratar√≠a con FAT32, no aprender√≠a sobre el formato BCD utilizado en RTC. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quiz√°s alguien lea esta historia (o al menos mire las fotos) y piense: "¬°Maldici√≥n, si √©l pudiera hacerlo, entonces yo podr√≠a hacerlo a√∫n mejor!" Y como resultado, alegrar√° a alguien cercano. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fuera de la ventana est√° lloviendo, diciembre est√° en el calendario. </font><font style="vertical-align: inherit;">Se acerca el tiempo de las vacaciones y, por lo tanto, el tiempo de los regalos. </font><font style="vertical-align: inherit;">Haga y reciba regalos interesantes, no solo otra caja de bombones, una vela o una estatuilla.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/480792/">https://habr.com/ru/post/480792/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../480778/index.html">Gesti√≥n de gestos: manejo de superposiciones visuales. Parte 2</a></li>
<li><a href="../480782/index.html">5 cosas que me gustar√≠a saber cuando comenc√© a usar Angular</a></li>
<li><a href="../480786/index.html">Clonaci√≥n profunda independiente de objetos en JavaScript</a></li>
<li><a href="../480788/index.html">√Årbol de navidad en la l√≠nea de comando</a></li>
<li><a href="../480790/index.html">"Eficiencia de f√°brica". Encontrar un cuello de botella e implementar un sistema de extracci√≥n para aumentar la productividad</a></li>
<li><a href="../480794/index.html">Un poco sobre el caso especial de la implementaci√≥n de algoritmos de b√∫squeda de puertas abiertas</a></li>
<li><a href="../480796/index.html">Programadores de Schrodinger, devops y gatos.</a></li>
<li><a href="../480798/index.html">Revisi√≥n de informes de C ++ Russia Piter 2019</a></li>
<li><a href="../480800/index.html">Buscando un probador de trabajo? Prep√°rese para demostrar habilidades de desarrollador</a></li>
<li><a href="../480802/index.html">Ingenier√≠a del Caos, Parte 3: M√©todos y herramientas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>